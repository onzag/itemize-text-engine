import {
  CONTAINER_CLASS_PREFIX,
  CUSTOM_CLASS_PREFIX,
  RICH_TEXT_CLASS_PREFIX,
  SERIALIZATION_REGISTRY,
  STANDARD_PARAGRAPH,
  STANDARD_TEXT_NODE,
  TABLE_CLASS_PREFIX,
  __commonJS,
  __spreadProps,
  __spreadValues,
  __toESM,
  __yieldStar,
  convertStyleStringToReactObject,
  deserialize,
  deserializePlain,
  getAllowedChildrenTypes,
  getContextFor,
  getUIHandlerValueWithKnownContextFor,
  getUUIDFor,
  isBlock,
  isInline,
  isSuperBlock,
  isVoid,
  normalizeElement,
  require_deep_equal,
  require_react,
  require_react_dom,
  sanitize,
  serialize,
  serializeString
} from "/dist/commons-EJSJQMMI.js";

// ../node_modules/direction/index.js
var require_direction = __commonJS({
  "../node_modules/direction/index.js"(exports, module) {
    "use strict";
    module.exports = direction;
    var RTL = "\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC";
    var LTR = "A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";
    var rtl = new RegExp("^[^" + LTR + "]*[" + RTL + "]");
    var ltr = new RegExp("^[^" + RTL + "]*[" + LTR + "]");
    function direction(value) {
      value = String(value || "");
      if (rtl.test(value)) {
        return "rtl";
      }
      if (ltr.test(value)) {
        return "ltr";
      }
      return "neutral";
    }
  }
});

// ../node_modules/lodash/isObject.js
var require_isObject = __commonJS({
  "../node_modules/lodash/isObject.js"(exports, module) {
    function isObject2(value) {
      var type = typeof value;
      return value != null && (type == "object" || type == "function");
    }
    module.exports = isObject2;
  }
});

// ../node_modules/lodash/_freeGlobal.js
var require_freeGlobal = __commonJS({
  "../node_modules/lodash/_freeGlobal.js"(exports, module) {
    var freeGlobal = typeof global == "object" && global && global.Object === Object && global;
    module.exports = freeGlobal;
  }
});

// ../node_modules/lodash/_root.js
var require_root = __commonJS({
  "../node_modules/lodash/_root.js"(exports, module) {
    var freeGlobal = require_freeGlobal();
    var freeSelf = typeof self == "object" && self && self.Object === Object && self;
    var root = freeGlobal || freeSelf || Function("return this")();
    module.exports = root;
  }
});

// ../node_modules/lodash/now.js
var require_now = __commonJS({
  "../node_modules/lodash/now.js"(exports, module) {
    var root = require_root();
    var now = function() {
      return root.Date.now();
    };
    module.exports = now;
  }
});

// ../node_modules/lodash/_trimmedEndIndex.js
var require_trimmedEndIndex = __commonJS({
  "../node_modules/lodash/_trimmedEndIndex.js"(exports, module) {
    var reWhitespace = /\s/;
    function trimmedEndIndex(string3) {
      var index = string3.length;
      while (index-- && reWhitespace.test(string3.charAt(index))) {
      }
      return index;
    }
    module.exports = trimmedEndIndex;
  }
});

// ../node_modules/lodash/_baseTrim.js
var require_baseTrim = __commonJS({
  "../node_modules/lodash/_baseTrim.js"(exports, module) {
    var trimmedEndIndex = require_trimmedEndIndex();
    var reTrimStart = /^\s+/;
    function baseTrim(string3) {
      return string3 ? string3.slice(0, trimmedEndIndex(string3) + 1).replace(reTrimStart, "") : string3;
    }
    module.exports = baseTrim;
  }
});

// ../node_modules/lodash/_Symbol.js
var require_Symbol = __commonJS({
  "../node_modules/lodash/_Symbol.js"(exports, module) {
    var root = require_root();
    var Symbol2 = root.Symbol;
    module.exports = Symbol2;
  }
});

// ../node_modules/lodash/_getRawTag.js
var require_getRawTag = __commonJS({
  "../node_modules/lodash/_getRawTag.js"(exports, module) {
    var Symbol2 = require_Symbol();
    var objectProto = Object.prototype;
    var hasOwnProperty = objectProto.hasOwnProperty;
    var nativeObjectToString = objectProto.toString;
    var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
    function getRawTag(value) {
      var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];
      try {
        value[symToStringTag] = void 0;
        var unmasked = true;
      } catch (e2) {
      }
      var result = nativeObjectToString.call(value);
      if (unmasked) {
        if (isOwn) {
          value[symToStringTag] = tag;
        } else {
          delete value[symToStringTag];
        }
      }
      return result;
    }
    module.exports = getRawTag;
  }
});

// ../node_modules/lodash/_objectToString.js
var require_objectToString = __commonJS({
  "../node_modules/lodash/_objectToString.js"(exports, module) {
    var objectProto = Object.prototype;
    var nativeObjectToString = objectProto.toString;
    function objectToString(value) {
      return nativeObjectToString.call(value);
    }
    module.exports = objectToString;
  }
});

// ../node_modules/lodash/_baseGetTag.js
var require_baseGetTag = __commonJS({
  "../node_modules/lodash/_baseGetTag.js"(exports, module) {
    var Symbol2 = require_Symbol();
    var getRawTag = require_getRawTag();
    var objectToString = require_objectToString();
    var nullTag = "[object Null]";
    var undefinedTag = "[object Undefined]";
    var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
    function baseGetTag(value) {
      if (value == null) {
        return value === void 0 ? undefinedTag : nullTag;
      }
      return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);
    }
    module.exports = baseGetTag;
  }
});

// ../node_modules/lodash/isObjectLike.js
var require_isObjectLike = __commonJS({
  "../node_modules/lodash/isObjectLike.js"(exports, module) {
    function isObjectLike(value) {
      return value != null && typeof value == "object";
    }
    module.exports = isObjectLike;
  }
});

// ../node_modules/lodash/isSymbol.js
var require_isSymbol = __commonJS({
  "../node_modules/lodash/isSymbol.js"(exports, module) {
    var baseGetTag = require_baseGetTag();
    var isObjectLike = require_isObjectLike();
    var symbolTag = "[object Symbol]";
    function isSymbol(value) {
      return typeof value == "symbol" || isObjectLike(value) && baseGetTag(value) == symbolTag;
    }
    module.exports = isSymbol;
  }
});

// ../node_modules/lodash/toNumber.js
var require_toNumber = __commonJS({
  "../node_modules/lodash/toNumber.js"(exports, module) {
    var baseTrim = require_baseTrim();
    var isObject2 = require_isObject();
    var isSymbol = require_isSymbol();
    var NAN = 0 / 0;
    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
    var reIsBinary = /^0b[01]+$/i;
    var reIsOctal = /^0o[0-7]+$/i;
    var freeParseInt = parseInt;
    function toNumber(value) {
      if (typeof value == "number") {
        return value;
      }
      if (isSymbol(value)) {
        return NAN;
      }
      if (isObject2(value)) {
        var other = typeof value.valueOf == "function" ? value.valueOf() : value;
        value = isObject2(other) ? other + "" : other;
      }
      if (typeof value != "string") {
        return value === 0 ? value : +value;
      }
      value = baseTrim(value);
      var isBinary = reIsBinary.test(value);
      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
    }
    module.exports = toNumber;
  }
});

// ../node_modules/lodash/debounce.js
var require_debounce = __commonJS({
  "../node_modules/lodash/debounce.js"(exports, module) {
    var isObject2 = require_isObject();
    var now = require_now();
    var toNumber = require_toNumber();
    var FUNC_ERROR_TEXT = "Expected a function";
    var nativeMax = Math.max;
    var nativeMin = Math.min;
    function debounce2(func, wait, options) {
      var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;
      if (typeof func != "function") {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      wait = toNumber(wait) || 0;
      if (isObject2(options)) {
        leading = !!options.leading;
        maxing = "maxWait" in options;
        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
        trailing = "trailing" in options ? !!options.trailing : trailing;
      }
      function invokeFunc(time2) {
        var args = lastArgs, thisArg = lastThis;
        lastArgs = lastThis = void 0;
        lastInvokeTime = time2;
        result = func.apply(thisArg, args);
        return result;
      }
      function leadingEdge(time2) {
        lastInvokeTime = time2;
        timerId = setTimeout(timerExpired, wait);
        return leading ? invokeFunc(time2) : result;
      }
      function remainingWait(time2) {
        var timeSinceLastCall = time2 - lastCallTime, timeSinceLastInvoke = time2 - lastInvokeTime, timeWaiting = wait - timeSinceLastCall;
        return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
      }
      function shouldInvoke(time2) {
        var timeSinceLastCall = time2 - lastCallTime, timeSinceLastInvoke = time2 - lastInvokeTime;
        return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
      }
      function timerExpired() {
        var time2 = now();
        if (shouldInvoke(time2)) {
          return trailingEdge(time2);
        }
        timerId = setTimeout(timerExpired, remainingWait(time2));
      }
      function trailingEdge(time2) {
        timerId = void 0;
        if (trailing && lastArgs) {
          return invokeFunc(time2);
        }
        lastArgs = lastThis = void 0;
        return result;
      }
      function cancel() {
        if (timerId !== void 0) {
          clearTimeout(timerId);
        }
        lastInvokeTime = 0;
        lastArgs = lastCallTime = lastThis = timerId = void 0;
      }
      function flush() {
        return timerId === void 0 ? result : trailingEdge(now());
      }
      function debounced() {
        var time2 = now(), isInvoking = shouldInvoke(time2);
        lastArgs = arguments;
        lastThis = this;
        lastCallTime = time2;
        if (isInvoking) {
          if (timerId === void 0) {
            return leadingEdge(lastCallTime);
          }
          if (maxing) {
            clearTimeout(timerId);
            timerId = setTimeout(timerExpired, wait);
            return invokeFunc(lastCallTime);
          }
        }
        if (timerId === void 0) {
          timerId = setTimeout(timerExpired, wait);
        }
        return result;
      }
      debounced.cancel = cancel;
      debounced.flush = flush;
      return debounced;
    }
    module.exports = debounce2;
  }
});

// ../node_modules/lodash/throttle.js
var require_throttle = __commonJS({
  "../node_modules/lodash/throttle.js"(exports, module) {
    var debounce2 = require_debounce();
    var isObject2 = require_isObject();
    var FUNC_ERROR_TEXT = "Expected a function";
    function throttle2(func, wait, options) {
      var leading = true, trailing = true;
      if (typeof func != "function") {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      if (isObject2(options)) {
        leading = "leading" in options ? !!options.leading : leading;
        trailing = "trailing" in options ? !!options.trailing : trailing;
      }
      return debounce2(func, wait, {
        "leading": leading,
        "maxWait": wait,
        "trailing": trailing
      });
    }
    module.exports = throttle2;
  }
});

// ../node_modules/is-hotkey/lib/index.js
var require_lib = __commonJS({
  "../node_modules/is-hotkey/lib/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    var IS_MAC = typeof window != "undefined" && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);
    var MODIFIERS = {
      alt: "altKey",
      control: "ctrlKey",
      meta: "metaKey",
      shift: "shiftKey"
    };
    var ALIASES = {
      add: "+",
      break: "pause",
      cmd: "meta",
      command: "meta",
      ctl: "control",
      ctrl: "control",
      del: "delete",
      down: "arrowdown",
      esc: "escape",
      ins: "insert",
      left: "arrowleft",
      mod: IS_MAC ? "meta" : "control",
      opt: "alt",
      option: "alt",
      return: "enter",
      right: "arrowright",
      space: " ",
      spacebar: " ",
      up: "arrowup",
      win: "meta",
      windows: "meta"
    };
    var CODES = {
      backspace: 8,
      tab: 9,
      enter: 13,
      shift: 16,
      control: 17,
      alt: 18,
      pause: 19,
      capslock: 20,
      escape: 27,
      " ": 32,
      pageup: 33,
      pagedown: 34,
      end: 35,
      home: 36,
      arrowleft: 37,
      arrowup: 38,
      arrowright: 39,
      arrowdown: 40,
      insert: 45,
      delete: 46,
      meta: 91,
      numlock: 144,
      scrolllock: 145,
      ";": 186,
      "=": 187,
      ",": 188,
      "-": 189,
      ".": 190,
      "/": 191,
      "`": 192,
      "[": 219,
      "\\": 220,
      "]": 221,
      "'": 222
    };
    for (f = 1; f < 20; f++) {
      CODES["f" + f] = 111 + f;
    }
    var f;
    function isHotkey(hotkey, options, event) {
      if (options && !("byKey" in options)) {
        event = options;
        options = null;
      }
      if (!Array.isArray(hotkey)) {
        hotkey = [hotkey];
      }
      var array = hotkey.map(function(string3) {
        return parseHotkey(string3, options);
      });
      var check = function check2(e2) {
        return array.some(function(object) {
          return compareHotkey(object, e2);
        });
      };
      var ret = event == null ? check : check(event);
      return ret;
    }
    function isCodeHotkey(hotkey, event) {
      return isHotkey(hotkey, event);
    }
    function isKeyHotkey2(hotkey, event) {
      return isHotkey(hotkey, { byKey: true }, event);
    }
    function parseHotkey(hotkey, options) {
      var byKey = options && options.byKey;
      var ret = {};
      hotkey = hotkey.replace("++", "+add");
      var values = hotkey.split("+");
      var length = values.length;
      for (var k in MODIFIERS) {
        ret[MODIFIERS[k]] = false;
      }
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = void 0;
      try {
        for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var value = _step.value;
          var optional = value.endsWith("?") && value.length > 1;
          if (optional) {
            value = value.slice(0, -1);
          }
          var name = toKeyName(value);
          var modifier = MODIFIERS[name];
          if (length === 1 || !modifier) {
            if (byKey) {
              ret.key = name;
            } else {
              ret.which = toKeyCode(value);
            }
          }
          if (modifier) {
            ret[modifier] = optional ? null : true;
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }
      return ret;
    }
    function compareHotkey(object, event) {
      for (var key in object) {
        var expected = object[key];
        var actual = void 0;
        if (expected == null) {
          continue;
        }
        if (key === "key" && event.key != null) {
          actual = event.key.toLowerCase();
        } else if (key === "which") {
          actual = expected === 91 && event.which === 93 ? 91 : event.which;
        } else {
          actual = event[key];
        }
        if (actual == null && expected === false) {
          continue;
        }
        if (actual !== expected) {
          return false;
        }
      }
      return true;
    }
    function toKeyCode(name) {
      name = toKeyName(name);
      var code = CODES[name] || name.toUpperCase().charCodeAt(0);
      return code;
    }
    function toKeyName(name) {
      name = name.toLowerCase();
      name = ALIASES[name] || name;
      return name;
    }
    exports.default = isHotkey;
    exports.isHotkey = isHotkey;
    exports.isCodeHotkey = isCodeHotkey;
    exports.isKeyHotkey = isKeyHotkey2;
    exports.parseHotkey = parseHotkey;
    exports.compareHotkey = compareHotkey;
    exports.toKeyCode = toKeyCode;
    exports.toKeyName = toKeyName;
  }
});

// example4.tsx
var import_react7 = __toESM(require_react());
var import_react_dom4 = __toESM(require_react_dom());

// ../editor/slate/index.tsx
var import_react3 = __toESM(require_react());
var import_deep_equal2 = __toESM(require_deep_equal());

// ../node_modules/is-plain-object/dist/is-plain-object.mjs
function isObject(o) {
  return Object.prototype.toString.call(o) === "[object Object]";
}
function isPlainObject(o) {
  var ctor, prot;
  if (isObject(o) === false)
    return false;
  ctor = o.constructor;
  if (ctor === void 0)
    return true;
  prot = ctor.prototype;
  if (isObject(prot) === false)
    return false;
  if (prot.hasOwnProperty("isPrototypeOf") === false) {
    return false;
  }
  return true;
}

// ../node_modules/immer/dist/immer.mjs
var NOTHING = Symbol.for("immer-nothing");
var DRAFTABLE = Symbol.for("immer-draftable");
var DRAFT_STATE = Symbol.for("immer-state");
var errors = true ? [
  // All error codes, starting by 0:
  function(plugin) {
    return "The plugin for '".concat(plugin, "' has not been loaded into Immer. To enable the plugin, import and call `enable").concat(plugin, "()` when initializing your application.");
  },
  function(thing) {
    return "produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '".concat(thing, "'");
  },
  "This object has been frozen and should not be mutated",
  function(data) {
    return "Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? " + data;
  },
  "An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",
  "Immer forbids circular references",
  "The first or second argument to `produce` must be a function",
  "The third argument to `produce` must be a function or undefined",
  "First argument to `createDraft` must be a plain object, an array, or an immerable object",
  "First argument to `finishDraft` must be a draft returned by `createDraft`",
  function(thing) {
    return "'current' expects a draft, got: ".concat(thing);
  },
  "Object.defineProperty() cannot be used on an Immer draft",
  "Object.setPrototypeOf() cannot be used on an Immer draft",
  "Immer only supports deleting array indices",
  "Immer only supports setting array indices and the 'length' property",
  function(thing) {
    return "'original' expects a draft, got: ".concat(thing);
  }
  // Note: if more errors are added, the errorOffset in Patches.ts should be increased
  // See Patches.ts for additional errors
] : [];
function die(error, ...args) {
  if (true) {
    const e2 = errors[error];
    const msg2 = typeof e2 === "function" ? e2.apply(null, args) : e2;
    throw new Error("[Immer] ".concat(msg2));
  }
  throw new Error(
    "[Immer] minified error nr: ".concat(error, ". Full error at: https://bit.ly/3cXEKWf")
  );
}
var getPrototypeOf = Object.getPrototypeOf;
function isDraft(value) {
  return !!value && !!value[DRAFT_STATE];
}
function isDraftable(value) {
  var _a;
  if (!value)
    return false;
  return isPlainObject2(value) || Array.isArray(value) || !!value[DRAFTABLE] || !!((_a = value.constructor) == null ? void 0 : _a[DRAFTABLE]) || isMap(value) || isSet(value);
}
var objectCtorString = Object.prototype.constructor.toString();
function isPlainObject2(value) {
  if (!value || typeof value !== "object")
    return false;
  const proto = getPrototypeOf(value);
  if (proto === null) {
    return true;
  }
  const Ctor = Object.hasOwnProperty.call(proto, "constructor") && proto.constructor;
  if (Ctor === Object)
    return true;
  return typeof Ctor == "function" && Function.toString.call(Ctor) === objectCtorString;
}
function each(obj, iter) {
  if (getArchtype(obj) === 0) {
    Object.entries(obj).forEach(([key, value]) => {
      iter(key, value, obj);
    });
  } else {
    obj.forEach((entry, index) => iter(index, entry, obj));
  }
}
function getArchtype(thing) {
  const state = thing[DRAFT_STATE];
  return state ? state.type_ : Array.isArray(thing) ? 1 : isMap(thing) ? 2 : isSet(thing) ? 3 : 0;
}
function has(thing, prop) {
  return getArchtype(thing) === 2 ? thing.has(prop) : Object.prototype.hasOwnProperty.call(thing, prop);
}
function set(thing, propOrOldValue, value) {
  const t2 = getArchtype(thing);
  if (t2 === 2)
    thing.set(propOrOldValue, value);
  else if (t2 === 3) {
    thing.add(value);
  } else
    thing[propOrOldValue] = value;
}
function is(x, y) {
  if (x === y) {
    return x !== 0 || 1 / x === 1 / y;
  } else {
    return x !== x && y !== y;
  }
}
function isMap(target) {
  return target instanceof Map;
}
function isSet(target) {
  return target instanceof Set;
}
function latest(state) {
  return state.copy_ || state.base_;
}
function shallowCopy(base, strict) {
  if (isMap(base)) {
    return new Map(base);
  }
  if (isSet(base)) {
    return new Set(base);
  }
  if (Array.isArray(base))
    return Array.prototype.slice.call(base);
  if (!strict && isPlainObject2(base)) {
    if (!getPrototypeOf(base)) {
      const obj = /* @__PURE__ */ Object.create(null);
      return Object.assign(obj, base);
    }
    return __spreadValues({}, base);
  }
  const descriptors = Object.getOwnPropertyDescriptors(base);
  delete descriptors[DRAFT_STATE];
  let keys = Reflect.ownKeys(descriptors);
  for (let i2 = 0; i2 < keys.length; i2++) {
    const key = keys[i2];
    const desc = descriptors[key];
    if (desc.writable === false) {
      desc.writable = true;
      desc.configurable = true;
    }
    if (desc.get || desc.set)
      descriptors[key] = {
        configurable: true,
        writable: true,
        // could live with !!desc.set as well here...
        enumerable: desc.enumerable,
        value: base[key]
      };
  }
  return Object.create(getPrototypeOf(base), descriptors);
}
function freeze(obj, deep = false) {
  if (isFrozen(obj) || isDraft(obj) || !isDraftable(obj))
    return obj;
  if (getArchtype(obj) > 1) {
    obj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections;
  }
  Object.freeze(obj);
  if (deep)
    each(obj, (_key, value) => freeze(value, true), true);
  return obj;
}
function dontMutateFrozenCollections() {
  die(2);
}
function isFrozen(obj) {
  return Object.isFrozen(obj);
}
var plugins = {};
function getPlugin(pluginKey) {
  const plugin = plugins[pluginKey];
  if (!plugin) {
    die(0, pluginKey);
  }
  return plugin;
}
var currentScope;
function getCurrentScope() {
  return currentScope;
}
function createScope(parent_, immer_) {
  return {
    drafts_: [],
    parent_,
    immer_,
    // Whenever the modified draft contains a draft from another scope, we
    // need to prevent auto-freezing so the unowned draft can be finalized.
    canAutoFreeze_: true,
    unfinalizedDrafts_: 0
  };
}
function usePatchesInScope(scope, patchListener) {
  if (patchListener) {
    getPlugin("Patches");
    scope.patches_ = [];
    scope.inversePatches_ = [];
    scope.patchListener_ = patchListener;
  }
}
function revokeScope(scope) {
  leaveScope(scope);
  scope.drafts_.forEach(revokeDraft);
  scope.drafts_ = null;
}
function leaveScope(scope) {
  if (scope === currentScope) {
    currentScope = scope.parent_;
  }
}
function enterScope(immer2) {
  return currentScope = createScope(currentScope, immer2);
}
function revokeDraft(draft) {
  const state = draft[DRAFT_STATE];
  if (state.type_ === 0 || state.type_ === 1)
    state.revoke_();
  else
    state.revoked_ = true;
}
function processResult(result, scope) {
  scope.unfinalizedDrafts_ = scope.drafts_.length;
  const baseDraft = scope.drafts_[0];
  const isReplaced = result !== void 0 && result !== baseDraft;
  if (isReplaced) {
    if (baseDraft[DRAFT_STATE].modified_) {
      revokeScope(scope);
      die(4);
    }
    if (isDraftable(result)) {
      result = finalize(scope, result);
      if (!scope.parent_)
        maybeFreeze(scope, result);
    }
    if (scope.patches_) {
      getPlugin("Patches").generateReplacementPatches_(
        baseDraft[DRAFT_STATE].base_,
        result,
        scope.patches_,
        scope.inversePatches_
      );
    }
  } else {
    result = finalize(scope, baseDraft, []);
  }
  revokeScope(scope);
  if (scope.patches_) {
    scope.patchListener_(scope.patches_, scope.inversePatches_);
  }
  return result !== NOTHING ? result : void 0;
}
function finalize(rootScope, value, path3) {
  if (isFrozen(value))
    return value;
  const state = value[DRAFT_STATE];
  if (!state) {
    each(
      value,
      (key, childValue) => finalizeProperty(rootScope, state, value, key, childValue, path3),
      true
      // See #590, don't recurse into non-enumerable of non drafted objects
    );
    return value;
  }
  if (state.scope_ !== rootScope)
    return value;
  if (!state.modified_) {
    maybeFreeze(rootScope, state.base_, true);
    return state.base_;
  }
  if (!state.finalized_) {
    state.finalized_ = true;
    state.scope_.unfinalizedDrafts_--;
    const result = state.copy_;
    let resultEach = result;
    let isSet2 = false;
    if (state.type_ === 3) {
      resultEach = new Set(result);
      result.clear();
      isSet2 = true;
    }
    each(
      resultEach,
      (key, childValue) => finalizeProperty(rootScope, state, result, key, childValue, path3, isSet2)
    );
    maybeFreeze(rootScope, result, false);
    if (path3 && rootScope.patches_) {
      getPlugin("Patches").generatePatches_(
        state,
        path3,
        rootScope.patches_,
        rootScope.inversePatches_
      );
    }
  }
  return state.copy_;
}
function finalizeProperty(rootScope, parentState, targetObject, prop, childValue, rootPath, targetIsSet) {
  if (childValue === targetObject)
    die(5);
  if (isDraft(childValue)) {
    const path3 = rootPath && parentState && parentState.type_ !== 3 && // Set objects are atomic since they have no keys.
    !has(parentState.assigned_, prop) ? rootPath.concat(prop) : void 0;
    const res = finalize(rootScope, childValue, path3);
    set(targetObject, prop, res);
    if (isDraft(res)) {
      rootScope.canAutoFreeze_ = false;
    } else
      return;
  } else if (targetIsSet) {
    targetObject.add(childValue);
  }
  if (isDraftable(childValue) && !isFrozen(childValue)) {
    if (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {
      return;
    }
    finalize(rootScope, childValue);
    if (!parentState || !parentState.scope_.parent_)
      maybeFreeze(rootScope, childValue);
  }
}
function maybeFreeze(scope, value, deep = false) {
  if (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {
    freeze(value, deep);
  }
}
function createProxyProxy(base, parent3) {
  const isArray = Array.isArray(base);
  const state = {
    type_: isArray ? 1 : 0,
    // Track which produce call this is associated with.
    scope_: parent3 ? parent3.scope_ : getCurrentScope(),
    // True for both shallow and deep changes.
    modified_: false,
    // Used during finalization.
    finalized_: false,
    // Track which properties have been assigned (true) or deleted (false).
    assigned_: {},
    // The parent draft state.
    parent_: parent3,
    // The base state.
    base_: base,
    // The base proxy.
    draft_: null,
    // set below
    // The base copy with any updated values.
    copy_: null,
    // Called by the `produce` function.
    revoke_: null,
    isManual_: false
  };
  let target = state;
  let traps = objectTraps;
  if (isArray) {
    target = [state];
    traps = arrayTraps;
  }
  const { revoke, proxy } = Proxy.revocable(target, traps);
  state.draft_ = proxy;
  state.revoke_ = revoke;
  return proxy;
}
var objectTraps = {
  get(state, prop) {
    if (prop === DRAFT_STATE)
      return state;
    const source = latest(state);
    if (!has(source, prop)) {
      return readPropFromProto(state, source, prop);
    }
    const value = source[prop];
    if (state.finalized_ || !isDraftable(value)) {
      return value;
    }
    if (value === peek(state.base_, prop)) {
      prepareCopy(state);
      return state.copy_[prop] = createProxy(value, state);
    }
    return value;
  },
  has(state, prop) {
    return prop in latest(state);
  },
  ownKeys(state) {
    return Reflect.ownKeys(latest(state));
  },
  set(state, prop, value) {
    const desc = getDescriptorFromProto(latest(state), prop);
    if (desc == null ? void 0 : desc.set) {
      desc.set.call(state.draft_, value);
      return true;
    }
    if (!state.modified_) {
      const current2 = peek(latest(state), prop);
      const currentState = current2 == null ? void 0 : current2[DRAFT_STATE];
      if (currentState && currentState.base_ === value) {
        state.copy_[prop] = value;
        state.assigned_[prop] = false;
        return true;
      }
      if (is(value, current2) && (value !== void 0 || has(state.base_, prop)))
        return true;
      prepareCopy(state);
      markChanged(state);
    }
    if (state.copy_[prop] === value && // special case: handle new props with value 'undefined'
    (value !== void 0 || prop in state.copy_) || // special case: NaN
    Number.isNaN(value) && Number.isNaN(state.copy_[prop]))
      return true;
    state.copy_[prop] = value;
    state.assigned_[prop] = true;
    return true;
  },
  deleteProperty(state, prop) {
    if (peek(state.base_, prop) !== void 0 || prop in state.base_) {
      state.assigned_[prop] = false;
      prepareCopy(state);
      markChanged(state);
    } else {
      delete state.assigned_[prop];
    }
    if (state.copy_) {
      delete state.copy_[prop];
    }
    return true;
  },
  // Note: We never coerce `desc.value` into an Immer draft, because we can't make
  // the same guarantee in ES5 mode.
  getOwnPropertyDescriptor(state, prop) {
    const owner = latest(state);
    const desc = Reflect.getOwnPropertyDescriptor(owner, prop);
    if (!desc)
      return desc;
    return {
      writable: true,
      configurable: state.type_ !== 1 || prop !== "length",
      enumerable: desc.enumerable,
      value: owner[prop]
    };
  },
  defineProperty() {
    die(11);
  },
  getPrototypeOf(state) {
    return getPrototypeOf(state.base_);
  },
  setPrototypeOf() {
    die(12);
  }
};
var arrayTraps = {};
each(objectTraps, (key, fn) => {
  arrayTraps[key] = function() {
    arguments[0] = arguments[0][0];
    return fn.apply(this, arguments);
  };
});
arrayTraps.deleteProperty = function(state, prop) {
  if (isNaN(parseInt(prop)))
    die(13);
  return arrayTraps.set.call(this, state, prop, void 0);
};
arrayTraps.set = function(state, prop, value) {
  if (prop !== "length" && isNaN(parseInt(prop)))
    die(14);
  return objectTraps.set.call(this, state[0], prop, value, state[0]);
};
function peek(draft, prop) {
  const state = draft[DRAFT_STATE];
  const source = state ? latest(state) : draft;
  return source[prop];
}
function readPropFromProto(state, source, prop) {
  var _a;
  const desc = getDescriptorFromProto(source, prop);
  return desc ? "value" in desc ? desc.value : (
    // This is a very special case, if the prop is a getter defined by the
    // prototype, we should invoke it with the draft as context!
    (_a = desc.get) == null ? void 0 : _a.call(state.draft_)
  ) : void 0;
}
function getDescriptorFromProto(source, prop) {
  if (!(prop in source))
    return void 0;
  let proto = getPrototypeOf(source);
  while (proto) {
    const desc = Object.getOwnPropertyDescriptor(proto, prop);
    if (desc)
      return desc;
    proto = getPrototypeOf(proto);
  }
  return void 0;
}
function markChanged(state) {
  if (!state.modified_) {
    state.modified_ = true;
    if (state.parent_) {
      markChanged(state.parent_);
    }
  }
}
function prepareCopy(state) {
  if (!state.copy_) {
    state.copy_ = shallowCopy(
      state.base_,
      state.scope_.immer_.useStrictShallowCopy_
    );
  }
}
var Immer2 = class {
  constructor(config) {
    this.autoFreeze_ = true;
    this.useStrictShallowCopy_ = false;
    this.produce = (base, recipe, patchListener) => {
      if (typeof base === "function" && typeof recipe !== "function") {
        const defaultBase = recipe;
        recipe = base;
        const self2 = this;
        return function curriedProduce(base2 = defaultBase, ...args) {
          return self2.produce(base2, (draft) => recipe.call(this, draft, ...args));
        };
      }
      if (typeof recipe !== "function")
        die(6);
      if (patchListener !== void 0 && typeof patchListener !== "function")
        die(7);
      let result;
      if (isDraftable(base)) {
        const scope = enterScope(this);
        const proxy = createProxy(base, void 0);
        let hasError = true;
        try {
          result = recipe(proxy);
          hasError = false;
        } finally {
          if (hasError)
            revokeScope(scope);
          else
            leaveScope(scope);
        }
        usePatchesInScope(scope, patchListener);
        return processResult(result, scope);
      } else if (!base || typeof base !== "object") {
        result = recipe(base);
        if (result === void 0)
          result = base;
        if (result === NOTHING)
          result = void 0;
        if (this.autoFreeze_)
          freeze(result, true);
        if (patchListener) {
          const p = [];
          const ip = [];
          getPlugin("Patches").generateReplacementPatches_(base, result, p, ip);
          patchListener(p, ip);
        }
        return result;
      } else
        die(1, base);
    };
    this.produceWithPatches = (base, recipe) => {
      if (typeof base === "function") {
        return (state, ...args) => this.produceWithPatches(state, (draft) => base(draft, ...args));
      }
      let patches, inversePatches;
      const result = this.produce(base, recipe, (p, ip) => {
        patches = p;
        inversePatches = ip;
      });
      return [result, patches, inversePatches];
    };
    if (typeof (config == null ? void 0 : config.autoFreeze) === "boolean")
      this.setAutoFreeze(config.autoFreeze);
    if (typeof (config == null ? void 0 : config.useStrictShallowCopy) === "boolean")
      this.setUseStrictShallowCopy(config.useStrictShallowCopy);
  }
  createDraft(base) {
    if (!isDraftable(base))
      die(8);
    if (isDraft(base))
      base = current(base);
    const scope = enterScope(this);
    const proxy = createProxy(base, void 0);
    proxy[DRAFT_STATE].isManual_ = true;
    leaveScope(scope);
    return proxy;
  }
  finishDraft(draft, patchListener) {
    const state = draft && draft[DRAFT_STATE];
    if (!state || !state.isManual_)
      die(9);
    const { scope_: scope } = state;
    usePatchesInScope(scope, patchListener);
    return processResult(void 0, scope);
  }
  /**
   * Pass true to automatically freeze all copies created by Immer.
   *
   * By default, auto-freezing is enabled.
   */
  setAutoFreeze(value) {
    this.autoFreeze_ = value;
  }
  /**
   * Pass true to enable strict shallow copy.
   *
   * By default, immer does not copy the object descriptors such as getter, setter and non-enumrable properties.
   */
  setUseStrictShallowCopy(value) {
    this.useStrictShallowCopy_ = value;
  }
  applyPatches(base, patches) {
    let i2;
    for (i2 = patches.length - 1; i2 >= 0; i2--) {
      const patch = patches[i2];
      if (patch.path.length === 0 && patch.op === "replace") {
        base = patch.value;
        break;
      }
    }
    if (i2 > -1) {
      patches = patches.slice(i2 + 1);
    }
    const applyPatchesImpl = getPlugin("Patches").applyPatches_;
    if (isDraft(base)) {
      return applyPatchesImpl(base, patches);
    }
    return this.produce(
      base,
      (draft) => applyPatchesImpl(draft, patches)
    );
  }
};
function createProxy(value, parent3) {
  const draft = isMap(value) ? getPlugin("MapSet").proxyMap_(value, parent3) : isSet(value) ? getPlugin("MapSet").proxySet_(value, parent3) : createProxyProxy(value, parent3);
  const scope = parent3 ? parent3.scope_ : getCurrentScope();
  scope.drafts_.push(draft);
  return draft;
}
function current(value) {
  if (!isDraft(value))
    die(10, value);
  return currentImpl(value);
}
function currentImpl(value) {
  if (!isDraftable(value) || isFrozen(value))
    return value;
  const state = value[DRAFT_STATE];
  let copy;
  if (state) {
    if (!state.modified_)
      return state.base_;
    state.finalized_ = true;
    copy = shallowCopy(value, state.scope_.immer_.useStrictShallowCopy_);
  } else {
    copy = shallowCopy(value, true);
  }
  each(copy, (key, childValue) => {
    set(copy, key, currentImpl(childValue));
  });
  if (state) {
    state.finalized_ = false;
  }
  return copy;
}
var immer = new Immer2();
var produce = immer.produce;
var produceWithPatches = immer.produceWithPatches.bind(
  immer
);
var setAutoFreeze = immer.setAutoFreeze.bind(immer);
var setUseStrictShallowCopy = immer.setUseStrictShallowCopy.bind(immer);
var applyPatches = immer.applyPatches.bind(immer);
var createDraft = immer.createDraft.bind(immer);
var finishDraft = immer.finishDraft.bind(immer);

// ../node_modules/slate/dist/index.es.js
var PathRef = {
  transform(ref, op) {
    var {
      current: current2,
      affinity
    } = ref;
    if (current2 == null) {
      return;
    }
    var path3 = Path.transform(current2, op, {
      affinity
    });
    ref.current = path3;
    if (path3 == null) {
      ref.unref();
    }
  }
};
var PointRef = {
  transform(ref, op) {
    var {
      current: current2,
      affinity
    } = ref;
    if (current2 == null) {
      return;
    }
    var point3 = Point.transform(current2, op, {
      affinity
    });
    ref.current = point3;
    if (point3 == null) {
      ref.unref();
    }
  }
};
var RangeRef = {
  transform(ref, op) {
    var {
      current: current2,
      affinity
    } = ref;
    if (current2 == null) {
      return;
    }
    var path3 = Range.transform(current2, op, {
      affinity
    });
    ref.current = path3;
    if (path3 == null) {
      ref.unref();
    }
  }
};
var DIRTY_PATHS = /* @__PURE__ */ new WeakMap();
var DIRTY_PATH_KEYS = /* @__PURE__ */ new WeakMap();
var FLUSHING = /* @__PURE__ */ new WeakMap();
var NORMALIZING = /* @__PURE__ */ new WeakMap();
var PATH_REFS = /* @__PURE__ */ new WeakMap();
var POINT_REFS = /* @__PURE__ */ new WeakMap();
var RANGE_REFS = /* @__PURE__ */ new WeakMap();
var Path = {
  ancestors(path3) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      reverse = false
    } = options;
    var paths = Path.levels(path3, options);
    if (reverse) {
      paths = paths.slice(1);
    } else {
      paths = paths.slice(0, -1);
    }
    return paths;
  },
  common(path3, another) {
    var common = [];
    for (var i2 = 0; i2 < path3.length && i2 < another.length; i2++) {
      var av = path3[i2];
      var bv = another[i2];
      if (av !== bv) {
        break;
      }
      common.push(av);
    }
    return common;
  },
  compare(path3, another) {
    var min = Math.min(path3.length, another.length);
    for (var i2 = 0; i2 < min; i2++) {
      if (path3[i2] < another[i2])
        return -1;
      if (path3[i2] > another[i2])
        return 1;
    }
    return 0;
  },
  endsAfter(path3, another) {
    var i2 = path3.length - 1;
    var as = path3.slice(0, i2);
    var bs = another.slice(0, i2);
    var av = path3[i2];
    var bv = another[i2];
    return Path.equals(as, bs) && av > bv;
  },
  endsAt(path3, another) {
    var i2 = path3.length;
    var as = path3.slice(0, i2);
    var bs = another.slice(0, i2);
    return Path.equals(as, bs);
  },
  endsBefore(path3, another) {
    var i2 = path3.length - 1;
    var as = path3.slice(0, i2);
    var bs = another.slice(0, i2);
    var av = path3[i2];
    var bv = another[i2];
    return Path.equals(as, bs) && av < bv;
  },
  equals(path3, another) {
    return path3.length === another.length && path3.every((n3, i2) => n3 === another[i2]);
  },
  hasPrevious(path3) {
    return path3[path3.length - 1] > 0;
  },
  isAfter(path3, another) {
    return Path.compare(path3, another) === 1;
  },
  isAncestor(path3, another) {
    return path3.length < another.length && Path.compare(path3, another) === 0;
  },
  isBefore(path3, another) {
    return Path.compare(path3, another) === -1;
  },
  isChild(path3, another) {
    return path3.length === another.length + 1 && Path.compare(path3, another) === 0;
  },
  isCommon(path3, another) {
    return path3.length <= another.length && Path.compare(path3, another) === 0;
  },
  isDescendant(path3, another) {
    return path3.length > another.length && Path.compare(path3, another) === 0;
  },
  isParent(path3, another) {
    return path3.length + 1 === another.length && Path.compare(path3, another) === 0;
  },
  isPath(value) {
    return Array.isArray(value) && (value.length === 0 || typeof value[0] === "number");
  },
  isSibling(path3, another) {
    if (path3.length !== another.length) {
      return false;
    }
    var as = path3.slice(0, -1);
    var bs = another.slice(0, -1);
    var al = path3[path3.length - 1];
    var bl = another[another.length - 1];
    return al !== bl && Path.equals(as, bs);
  },
  levels(path3) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      reverse = false
    } = options;
    var list = [];
    for (var i2 = 0; i2 <= path3.length; i2++) {
      list.push(path3.slice(0, i2));
    }
    if (reverse) {
      list.reverse();
    }
    return list;
  },
  next(path3) {
    if (path3.length === 0) {
      throw new Error("Cannot get the next path of a root path [".concat(path3, "], because it has no next index."));
    }
    var last2 = path3[path3.length - 1];
    return path3.slice(0, -1).concat(last2 + 1);
  },
  operationCanTransformPath(operation) {
    switch (operation.type) {
      case "insert_node":
      case "remove_node":
      case "merge_node":
      case "split_node":
      case "move_node":
        return true;
      default:
        return false;
    }
  },
  parent(path3) {
    if (path3.length === 0) {
      throw new Error("Cannot get the parent path of the root path [".concat(path3, "]."));
    }
    return path3.slice(0, -1);
  },
  previous(path3) {
    if (path3.length === 0) {
      throw new Error("Cannot get the previous path of a root path [".concat(path3, "], because it has no previous index."));
    }
    var last2 = path3[path3.length - 1];
    if (last2 <= 0) {
      throw new Error("Cannot get the previous path of a first child path [".concat(path3, "] because it would result in a negative index."));
    }
    return path3.slice(0, -1).concat(last2 - 1);
  },
  relative(path3, ancestor) {
    if (!Path.isAncestor(ancestor, path3) && !Path.equals(path3, ancestor)) {
      throw new Error("Cannot get the relative path of [".concat(path3, "] inside ancestor [").concat(ancestor, "], because it is not above or equal to the path."));
    }
    return path3.slice(ancestor.length);
  },
  transform(path3, operation) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    if (!path3)
      return null;
    var p = [...path3];
    var {
      affinity = "forward"
    } = options;
    if (path3.length === 0) {
      return p;
    }
    switch (operation.type) {
      case "insert_node": {
        var {
          path: op
        } = operation;
        if (Path.equals(op, p) || Path.endsBefore(op, p) || Path.isAncestor(op, p)) {
          p[op.length - 1] += 1;
        }
        break;
      }
      case "remove_node": {
        var {
          path: _op
        } = operation;
        if (Path.equals(_op, p) || Path.isAncestor(_op, p)) {
          return null;
        } else if (Path.endsBefore(_op, p)) {
          p[_op.length - 1] -= 1;
        }
        break;
      }
      case "merge_node": {
        var {
          path: _op2,
          position
        } = operation;
        if (Path.equals(_op2, p) || Path.endsBefore(_op2, p)) {
          p[_op2.length - 1] -= 1;
        } else if (Path.isAncestor(_op2, p)) {
          p[_op2.length - 1] -= 1;
          p[_op2.length] += position;
        }
        break;
      }
      case "split_node": {
        var {
          path: _op3,
          position: _position
        } = operation;
        if (Path.equals(_op3, p)) {
          if (affinity === "forward") {
            p[p.length - 1] += 1;
          } else if (affinity === "backward")
            ;
          else {
            return null;
          }
        } else if (Path.endsBefore(_op3, p)) {
          p[_op3.length - 1] += 1;
        } else if (Path.isAncestor(_op3, p) && path3[_op3.length] >= _position) {
          p[_op3.length - 1] += 1;
          p[_op3.length] -= _position;
        }
        break;
      }
      case "move_node": {
        var {
          path: _op4,
          newPath: onp
        } = operation;
        if (Path.equals(_op4, onp)) {
          return p;
        }
        if (Path.isAncestor(_op4, p) || Path.equals(_op4, p)) {
          var copy = onp.slice();
          if (Path.endsBefore(_op4, onp) && _op4.length < onp.length) {
            copy[_op4.length - 1] -= 1;
          }
          return copy.concat(p.slice(_op4.length));
        } else if (Path.isSibling(_op4, onp) && (Path.isAncestor(onp, p) || Path.equals(onp, p))) {
          if (Path.endsBefore(_op4, p)) {
            p[_op4.length - 1] -= 1;
          } else {
            p[_op4.length - 1] += 1;
          }
        } else if (Path.endsBefore(onp, p) || Path.equals(onp, p) || Path.isAncestor(onp, p)) {
          if (Path.endsBefore(_op4, p)) {
            p[_op4.length - 1] -= 1;
          }
          p[onp.length - 1] += 1;
        } else if (Path.endsBefore(_op4, p)) {
          if (Path.equals(onp, p)) {
            p[onp.length - 1] += 1;
          }
          p[_op4.length - 1] -= 1;
        }
        break;
      }
    }
    return p;
  }
};
function _typeof(o) {
  "@babel/helpers - typeof";
  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o2) {
    return typeof o2;
  } : function(o2) {
    return o2 && "function" == typeof Symbol && o2.constructor === Symbol && o2 !== Symbol.prototype ? "symbol" : typeof o2;
  }, _typeof(o);
}
function _toPrimitive(input, hint) {
  if (_typeof(input) !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (_typeof(res) !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toPropertyKey(arg) {
  var key = _toPrimitive(arg, "string");
  return _typeof(key) === "symbol" ? key : String(key);
}
function _defineProperty(obj, key, value) {
  key = _toPropertyKey(key);
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function ownKeys$e(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$e(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$e(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$e(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var applyToDraft = (editor, selection, op) => {
  switch (op.type) {
    case "insert_node": {
      var {
        path: path3,
        node: node3
      } = op;
      var parent3 = Node.parent(editor, path3);
      var index = path3[path3.length - 1];
      if (index > parent3.children.length) {
        throw new Error('Cannot apply an "insert_node" operation at path ['.concat(path3, "] because the destination is past the end of the node."));
      }
      parent3.children.splice(index, 0, node3);
      if (selection) {
        for (var [point3, key] of Range.points(selection)) {
          selection[key] = Point.transform(point3, op);
        }
      }
      break;
    }
    case "insert_text": {
      var {
        path: _path,
        offset,
        text
      } = op;
      if (text.length === 0)
        break;
      var _node = Node.leaf(editor, _path);
      var before3 = _node.text.slice(0, offset);
      var after3 = _node.text.slice(offset);
      _node.text = before3 + text + after3;
      if (selection) {
        for (var [_point, _key] of Range.points(selection)) {
          selection[_key] = Point.transform(_point, op);
        }
      }
      break;
    }
    case "merge_node": {
      var {
        path: _path2
      } = op;
      var _node2 = Node.get(editor, _path2);
      var prevPath = Path.previous(_path2);
      var prev = Node.get(editor, prevPath);
      var _parent = Node.parent(editor, _path2);
      var _index = _path2[_path2.length - 1];
      if (Text.isText(_node2) && Text.isText(prev)) {
        prev.text += _node2.text;
      } else if (!Text.isText(_node2) && !Text.isText(prev)) {
        prev.children.push(..._node2.children);
      } else {
        throw new Error('Cannot apply a "merge_node" operation at path ['.concat(_path2, "] to nodes of different interfaces: ").concat(Scrubber.stringify(_node2), " ").concat(Scrubber.stringify(prev)));
      }
      _parent.children.splice(_index, 1);
      if (selection) {
        for (var [_point2, _key2] of Range.points(selection)) {
          selection[_key2] = Point.transform(_point2, op);
        }
      }
      break;
    }
    case "move_node": {
      var {
        path: _path3,
        newPath
      } = op;
      if (Path.isAncestor(_path3, newPath)) {
        throw new Error("Cannot move a path [".concat(_path3, "] to new path [").concat(newPath, "] because the destination is inside itself."));
      }
      var _node3 = Node.get(editor, _path3);
      var _parent2 = Node.parent(editor, _path3);
      var _index2 = _path3[_path3.length - 1];
      _parent2.children.splice(_index2, 1);
      var truePath = Path.transform(_path3, op);
      var newParent = Node.get(editor, Path.parent(truePath));
      var newIndex = truePath[truePath.length - 1];
      newParent.children.splice(newIndex, 0, _node3);
      if (selection) {
        for (var [_point3, _key3] of Range.points(selection)) {
          selection[_key3] = Point.transform(_point3, op);
        }
      }
      break;
    }
    case "remove_node": {
      var {
        path: _path4
      } = op;
      var _index3 = _path4[_path4.length - 1];
      var _parent3 = Node.parent(editor, _path4);
      _parent3.children.splice(_index3, 1);
      if (selection) {
        for (var [_point4, _key4] of Range.points(selection)) {
          var result = Point.transform(_point4, op);
          if (selection != null && result != null) {
            selection[_key4] = result;
          } else {
            var _prev = void 0;
            var next3 = void 0;
            for (var [n3, p] of Node.texts(editor)) {
              if (Path.compare(p, _path4) === -1) {
                _prev = [n3, p];
              } else {
                next3 = [n3, p];
                break;
              }
            }
            var preferNext = false;
            if (_prev && next3) {
              if (Path.equals(next3[1], _path4)) {
                preferNext = !Path.hasPrevious(next3[1]);
              } else {
                preferNext = Path.common(_prev[1], _path4).length < Path.common(next3[1], _path4).length;
              }
            }
            if (_prev && !preferNext) {
              _point4.path = _prev[1];
              _point4.offset = _prev[0].text.length;
            } else if (next3) {
              _point4.path = next3[1];
              _point4.offset = 0;
            } else {
              selection = null;
            }
          }
        }
      }
      break;
    }
    case "remove_text": {
      var {
        path: _path5,
        offset: _offset,
        text: _text
      } = op;
      if (_text.length === 0)
        break;
      var _node4 = Node.leaf(editor, _path5);
      var _before = _node4.text.slice(0, _offset);
      var _after = _node4.text.slice(_offset + _text.length);
      _node4.text = _before + _after;
      if (selection) {
        for (var [_point5, _key5] of Range.points(selection)) {
          selection[_key5] = Point.transform(_point5, op);
        }
      }
      break;
    }
    case "set_node": {
      var {
        path: _path6,
        properties,
        newProperties
      } = op;
      if (_path6.length === 0) {
        throw new Error("Cannot set properties on the root node!");
      }
      var _node5 = Node.get(editor, _path6);
      for (var _key6 in newProperties) {
        if (_key6 === "children" || _key6 === "text") {
          throw new Error('Cannot set the "'.concat(_key6, '" property of nodes!'));
        }
        var value = newProperties[_key6];
        if (value == null) {
          delete _node5[_key6];
        } else {
          _node5[_key6] = value;
        }
      }
      for (var _key7 in properties) {
        if (!newProperties.hasOwnProperty(_key7)) {
          delete _node5[_key7];
        }
      }
      break;
    }
    case "set_selection": {
      var {
        newProperties: _newProperties
      } = op;
      if (_newProperties == null) {
        selection = _newProperties;
      } else {
        if (selection == null) {
          if (!Range.isRange(_newProperties)) {
            throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Scrubber.stringify(_newProperties), " when there is no current selection."));
          }
          selection = _objectSpread$e({}, _newProperties);
        }
        for (var _key8 in _newProperties) {
          var _value = _newProperties[_key8];
          if (_value == null) {
            if (_key8 === "anchor" || _key8 === "focus") {
              throw new Error('Cannot remove the "'.concat(_key8, '" selection property'));
            }
            delete selection[_key8];
          } else {
            selection[_key8] = _value;
          }
        }
      }
      break;
    }
    case "split_node": {
      var {
        path: _path7,
        position,
        properties: _properties
      } = op;
      if (_path7.length === 0) {
        throw new Error('Cannot apply a "split_node" operation at path ['.concat(_path7, "] because the root node cannot be split."));
      }
      var _node6 = Node.get(editor, _path7);
      var _parent4 = Node.parent(editor, _path7);
      var _index4 = _path7[_path7.length - 1];
      var newNode;
      if (Text.isText(_node6)) {
        var _before2 = _node6.text.slice(0, position);
        var _after2 = _node6.text.slice(position);
        _node6.text = _before2;
        newNode = _objectSpread$e(_objectSpread$e({}, _properties), {}, {
          text: _after2
        });
      } else {
        var _before3 = _node6.children.slice(0, position);
        var _after3 = _node6.children.slice(position);
        _node6.children = _before3;
        newNode = _objectSpread$e(_objectSpread$e({}, _properties), {}, {
          children: _after3
        });
      }
      _parent4.children.splice(_index4 + 1, 0, newNode);
      if (selection) {
        for (var [_point6, _key9] of Range.points(selection)) {
          selection[_key9] = Point.transform(_point6, op);
        }
      }
      break;
    }
  }
  return selection;
};
var GeneralTransforms = {
  transform(editor, op) {
    editor.children = createDraft(editor.children);
    var selection = editor.selection && createDraft(editor.selection);
    try {
      selection = applyToDraft(editor, selection, op);
    } finally {
      editor.children = finishDraft(editor.children);
      if (selection) {
        editor.selection = isDraft(selection) ? finishDraft(selection) : selection;
      } else {
        editor.selection = null;
      }
    }
  }
};
var NodeTransforms = {
  insertNodes(editor, nodes2, options) {
    editor.insertNodes(nodes2, options);
  },
  liftNodes(editor, options) {
    editor.liftNodes(options);
  },
  mergeNodes(editor, options) {
    editor.mergeNodes(options);
  },
  moveNodes(editor, options) {
    editor.moveNodes(options);
  },
  removeNodes(editor, options) {
    editor.removeNodes(options);
  },
  setNodes(editor, props, options) {
    editor.setNodes(props, options);
  },
  splitNodes(editor, options) {
    editor.splitNodes(options);
  },
  unsetNodes(editor, props, options) {
    editor.unsetNodes(props, options);
  },
  unwrapNodes(editor, options) {
    editor.unwrapNodes(options);
  },
  wrapNodes(editor, element, options) {
    editor.wrapNodes(element, options);
  }
};
var SelectionTransforms = {
  collapse(editor, options) {
    editor.collapse(options);
  },
  deselect(editor) {
    editor.deselect();
  },
  move(editor, options) {
    editor.move(options);
  },
  select(editor, target) {
    editor.select(target);
  },
  setPoint(editor, props, options) {
    editor.setPoint(props, options);
  },
  setSelection(editor, props) {
    editor.setSelection(props);
  }
};
var isDeepEqual = (node3, another) => {
  for (var key in node3) {
    var a = node3[key];
    var b = another[key];
    if (isPlainObject(a) && isPlainObject(b)) {
      if (!isDeepEqual(a, b))
        return false;
    } else if (Array.isArray(a) && Array.isArray(b)) {
      if (a.length !== b.length)
        return false;
      for (var i2 = 0; i2 < a.length; i2++) {
        if (a[i2] !== b[i2])
          return false;
      }
    } else if (a !== b) {
      return false;
    }
  }
  for (var _key in another) {
    if (node3[_key] === void 0 && another[_key] !== void 0) {
      return false;
    }
  }
  return true;
};
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null)
    return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i2;
  for (i2 = 0; i2 < sourceKeys.length; i2++) {
    key = sourceKeys[i2];
    if (excluded.indexOf(key) >= 0)
      continue;
    target[key] = source[key];
  }
  return target;
}
function _objectWithoutProperties(source, excluded) {
  if (source == null)
    return {};
  var target = _objectWithoutPropertiesLoose(source, excluded);
  var key, i2;
  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
    for (i2 = 0; i2 < sourceSymbolKeys.length; i2++) {
      key = sourceSymbolKeys[i2];
      if (excluded.indexOf(key) >= 0)
        continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key))
        continue;
      target[key] = source[key];
    }
  }
  return target;
}
var _excluded$4 = ["anchor", "focus"];
function ownKeys$d(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$d(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$d(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$d(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Range = {
  edges(range2) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      reverse = false
    } = options;
    var {
      anchor,
      focus
    } = range2;
    return Range.isBackward(range2) === reverse ? [anchor, focus] : [focus, anchor];
  },
  end(range2) {
    var [, end2] = Range.edges(range2);
    return end2;
  },
  equals(range2, another) {
    return Point.equals(range2.anchor, another.anchor) && Point.equals(range2.focus, another.focus);
  },
  includes(range2, target) {
    if (Range.isRange(target)) {
      if (Range.includes(range2, target.anchor) || Range.includes(range2, target.focus)) {
        return true;
      }
      var [rs, re] = Range.edges(range2);
      var [ts, te] = Range.edges(target);
      return Point.isBefore(rs, ts) && Point.isAfter(re, te);
    }
    var [start2, end2] = Range.edges(range2);
    var isAfterStart = false;
    var isBeforeEnd = false;
    if (Point.isPoint(target)) {
      isAfterStart = Point.compare(target, start2) >= 0;
      isBeforeEnd = Point.compare(target, end2) <= 0;
    } else {
      isAfterStart = Path.compare(target, start2.path) >= 0;
      isBeforeEnd = Path.compare(target, end2.path) <= 0;
    }
    return isAfterStart && isBeforeEnd;
  },
  intersection(range2, another) {
    var rest = _objectWithoutProperties(range2, _excluded$4);
    var [s1, e1] = Range.edges(range2);
    var [s2, e2] = Range.edges(another);
    var start2 = Point.isBefore(s1, s2) ? s2 : s1;
    var end2 = Point.isBefore(e1, e2) ? e1 : e2;
    if (Point.isBefore(end2, start2)) {
      return null;
    } else {
      return _objectSpread$d({
        anchor: start2,
        focus: end2
      }, rest);
    }
  },
  isBackward(range2) {
    var {
      anchor,
      focus
    } = range2;
    return Point.isAfter(anchor, focus);
  },
  isCollapsed(range2) {
    var {
      anchor,
      focus
    } = range2;
    return Point.equals(anchor, focus);
  },
  isExpanded(range2) {
    return !Range.isCollapsed(range2);
  },
  isForward(range2) {
    return !Range.isBackward(range2);
  },
  isRange(value) {
    return isPlainObject(value) && Point.isPoint(value.anchor) && Point.isPoint(value.focus);
  },
  *points(range2) {
    yield [range2.anchor, "anchor"];
    yield [range2.focus, "focus"];
  },
  start(range2) {
    var [start2] = Range.edges(range2);
    return start2;
  },
  transform(range2, op) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return produce(range2, (r2) => {
      if (r2 === null) {
        return null;
      }
      var {
        affinity = "inward"
      } = options;
      var affinityAnchor;
      var affinityFocus;
      if (affinity === "inward") {
        var isCollapsed = Range.isCollapsed(r2);
        if (Range.isForward(r2)) {
          affinityAnchor = "forward";
          affinityFocus = isCollapsed ? affinityAnchor : "backward";
        } else {
          affinityAnchor = "backward";
          affinityFocus = isCollapsed ? affinityAnchor : "forward";
        }
      } else if (affinity === "outward") {
        if (Range.isForward(r2)) {
          affinityAnchor = "backward";
          affinityFocus = "forward";
        } else {
          affinityAnchor = "forward";
          affinityFocus = "backward";
        }
      } else {
        affinityAnchor = affinity;
        affinityFocus = affinity;
      }
      var anchor = Point.transform(r2.anchor, op, {
        affinity: affinityAnchor
      });
      var focus = Point.transform(r2.focus, op, {
        affinity: affinityFocus
      });
      if (!anchor || !focus) {
        return null;
      }
      r2.anchor = anchor;
      r2.focus = focus;
    });
  }
};
var isElement = (value) => {
  return isPlainObject(value) && Node.isNodeList(value.children) && !Editor.isEditor(value);
};
var Element2 = {
  isAncestor(value) {
    return isPlainObject(value) && Node.isNodeList(value.children);
  },
  isElement,
  isElementList(value) {
    return Array.isArray(value) && value.every((val) => Element2.isElement(val));
  },
  isElementProps(props) {
    return props.children !== void 0;
  },
  isElementType: function isElementType(value, elementVal) {
    var elementKey = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "type";
    return isElement(value) && value[elementKey] === elementVal;
  },
  matches(element, props) {
    for (var key in props) {
      if (key === "children") {
        continue;
      }
      if (element[key] !== props[key]) {
        return false;
      }
    }
    return true;
  }
};
var _excluded$3 = ["children"];
var _excluded2$3 = ["text"];
var IS_NODE_LIST_CACHE = /* @__PURE__ */ new WeakMap();
var Node = {
  ancestor(root, path3) {
    var node3 = Node.get(root, path3);
    if (Text.isText(node3)) {
      throw new Error("Cannot get the ancestor node at path [".concat(path3, "] because it refers to a text node instead: ").concat(Scrubber.stringify(node3)));
    }
    return node3;
  },
  ancestors(root, path3) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return function* () {
      for (var p of Path.ancestors(path3, options)) {
        var n3 = Node.ancestor(root, p);
        var entry = [n3, p];
        yield entry;
      }
    }();
  },
  child(root, index) {
    if (Text.isText(root)) {
      throw new Error("Cannot get the child of a text node: ".concat(Scrubber.stringify(root)));
    }
    var c = root.children[index];
    if (c == null) {
      throw new Error("Cannot get child at index `".concat(index, "` in node: ").concat(Scrubber.stringify(root)));
    }
    return c;
  },
  children(root, path3) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return function* () {
      var {
        reverse = false
      } = options;
      var ancestor = Node.ancestor(root, path3);
      var {
        children
      } = ancestor;
      var index = reverse ? children.length - 1 : 0;
      while (reverse ? index >= 0 : index < children.length) {
        var child = Node.child(ancestor, index);
        var childPath = path3.concat(index);
        yield [child, childPath];
        index = reverse ? index - 1 : index + 1;
      }
    }();
  },
  common(root, path3, another) {
    var p = Path.common(path3, another);
    var n3 = Node.get(root, p);
    return [n3, p];
  },
  descendant(root, path3) {
    var node3 = Node.get(root, path3);
    if (Editor.isEditor(node3)) {
      throw new Error("Cannot get the descendant node at path [".concat(path3, "] because it refers to the root editor node instead: ").concat(Scrubber.stringify(node3)));
    }
    return node3;
  },
  descendants(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      for (var [node3, path3] of Node.nodes(root, options)) {
        if (path3.length !== 0) {
          yield [node3, path3];
        }
      }
    }();
  },
  elements(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      for (var [node3, path3] of Node.nodes(root, options)) {
        if (Element2.isElement(node3)) {
          yield [node3, path3];
        }
      }
    }();
  },
  extractProps(node3) {
    if (Element2.isAncestor(node3)) {
      var properties = _objectWithoutProperties(node3, _excluded$3);
      return properties;
    } else {
      var properties = _objectWithoutProperties(node3, _excluded2$3);
      return properties;
    }
  },
  first(root, path3) {
    var p = path3.slice();
    var n3 = Node.get(root, p);
    while (n3) {
      if (Text.isText(n3) || n3.children.length === 0) {
        break;
      } else {
        n3 = n3.children[0];
        p.push(0);
      }
    }
    return [n3, p];
  },
  fragment(root, range2) {
    if (Text.isText(root)) {
      throw new Error("Cannot get a fragment starting from a root text node: ".concat(Scrubber.stringify(root)));
    }
    var newRoot = produce({
      children: root.children
    }, (r2) => {
      var [start2, end2] = Range.edges(range2);
      var nodeEntries = Node.nodes(r2, {
        reverse: true,
        pass: (_ref) => {
          var [, path4] = _ref;
          return !Range.includes(range2, path4);
        }
      });
      for (var [, path3] of nodeEntries) {
        if (!Range.includes(range2, path3)) {
          var parent3 = Node.parent(r2, path3);
          var index = path3[path3.length - 1];
          parent3.children.splice(index, 1);
        }
        if (Path.equals(path3, end2.path)) {
          var leaf3 = Node.leaf(r2, path3);
          leaf3.text = leaf3.text.slice(0, end2.offset);
        }
        if (Path.equals(path3, start2.path)) {
          var _leaf = Node.leaf(r2, path3);
          _leaf.text = _leaf.text.slice(start2.offset);
        }
      }
      if (Editor.isEditor(r2)) {
        r2.selection = null;
      }
    });
    return newRoot.children;
  },
  get(root, path3) {
    var node3 = root;
    for (var i2 = 0; i2 < path3.length; i2++) {
      var p = path3[i2];
      if (Text.isText(node3) || !node3.children[p]) {
        throw new Error("Cannot find a descendant at path [".concat(path3, "] in node: ").concat(Scrubber.stringify(root)));
      }
      node3 = node3.children[p];
    }
    return node3;
  },
  has(root, path3) {
    var node3 = root;
    for (var i2 = 0; i2 < path3.length; i2++) {
      var p = path3[i2];
      if (Text.isText(node3) || !node3.children[p]) {
        return false;
      }
      node3 = node3.children[p];
    }
    return true;
  },
  isNode(value) {
    return Text.isText(value) || Element2.isElement(value) || Editor.isEditor(value);
  },
  isNodeList(value) {
    if (!Array.isArray(value)) {
      return false;
    }
    var cachedResult = IS_NODE_LIST_CACHE.get(value);
    if (cachedResult !== void 0) {
      return cachedResult;
    }
    var isNodeList = value.every((val) => Node.isNode(val));
    IS_NODE_LIST_CACHE.set(value, isNodeList);
    return isNodeList;
  },
  last(root, path3) {
    var p = path3.slice();
    var n3 = Node.get(root, p);
    while (n3) {
      if (Text.isText(n3) || n3.children.length === 0) {
        break;
      } else {
        var i2 = n3.children.length - 1;
        n3 = n3.children[i2];
        p.push(i2);
      }
    }
    return [n3, p];
  },
  leaf(root, path3) {
    var node3 = Node.get(root, path3);
    if (!Text.isText(node3)) {
      throw new Error("Cannot get the leaf node at path [".concat(path3, "] because it refers to a non-leaf node: ").concat(Scrubber.stringify(node3)));
    }
    return node3;
  },
  levels(root, path3) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return function* () {
      for (var p of Path.levels(path3, options)) {
        var n3 = Node.get(root, p);
        yield [n3, p];
      }
    }();
  },
  matches(node3, props) {
    return Element2.isElement(node3) && Element2.isElementProps(props) && Element2.matches(node3, props) || Text.isText(node3) && Text.isTextProps(props) && Text.matches(node3, props);
  },
  nodes(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      var {
        pass,
        reverse = false
      } = options;
      var {
        from = [],
        to
      } = options;
      var visited = /* @__PURE__ */ new Set();
      var p = [];
      var n3 = root;
      while (true) {
        if (to && (reverse ? Path.isBefore(p, to) : Path.isAfter(p, to))) {
          break;
        }
        if (!visited.has(n3)) {
          yield [n3, p];
        }
        if (!visited.has(n3) && !Text.isText(n3) && n3.children.length !== 0 && (pass == null || pass([n3, p]) === false)) {
          visited.add(n3);
          var nextIndex = reverse ? n3.children.length - 1 : 0;
          if (Path.isAncestor(p, from)) {
            nextIndex = from[p.length];
          }
          p = p.concat(nextIndex);
          n3 = Node.get(root, p);
          continue;
        }
        if (p.length === 0) {
          break;
        }
        if (!reverse) {
          var newPath = Path.next(p);
          if (Node.has(root, newPath)) {
            p = newPath;
            n3 = Node.get(root, p);
            continue;
          }
        }
        if (reverse && p[p.length - 1] !== 0) {
          var _newPath = Path.previous(p);
          p = _newPath;
          n3 = Node.get(root, p);
          continue;
        }
        p = Path.parent(p);
        n3 = Node.get(root, p);
        visited.add(n3);
      }
    }();
  },
  parent(root, path3) {
    var parentPath = Path.parent(path3);
    var p = Node.get(root, parentPath);
    if (Text.isText(p)) {
      throw new Error("Cannot get the parent of path [".concat(path3, "] because it does not exist in the root."));
    }
    return p;
  },
  string(node3) {
    if (Text.isText(node3)) {
      return node3.text;
    } else {
      return node3.children.map(Node.string).join("");
    }
  },
  texts(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      for (var [node3, path3] of Node.nodes(root, options)) {
        if (Text.isText(node3)) {
          yield [node3, path3];
        }
      }
    }();
  }
};
function ownKeys$c(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$c(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$c(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$c(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Operation = {
  isNodeOperation(value) {
    return Operation.isOperation(value) && value.type.endsWith("_node");
  },
  isOperation(value) {
    if (!isPlainObject(value)) {
      return false;
    }
    switch (value.type) {
      case "insert_node":
        return Path.isPath(value.path) && Node.isNode(value.node);
      case "insert_text":
        return typeof value.offset === "number" && typeof value.text === "string" && Path.isPath(value.path);
      case "merge_node":
        return typeof value.position === "number" && Path.isPath(value.path) && isPlainObject(value.properties);
      case "move_node":
        return Path.isPath(value.path) && Path.isPath(value.newPath);
      case "remove_node":
        return Path.isPath(value.path) && Node.isNode(value.node);
      case "remove_text":
        return typeof value.offset === "number" && typeof value.text === "string" && Path.isPath(value.path);
      case "set_node":
        return Path.isPath(value.path) && isPlainObject(value.properties) && isPlainObject(value.newProperties);
      case "set_selection":
        return value.properties === null && Range.isRange(value.newProperties) || value.newProperties === null && Range.isRange(value.properties) || isPlainObject(value.properties) && isPlainObject(value.newProperties);
      case "split_node":
        return Path.isPath(value.path) && typeof value.position === "number" && isPlainObject(value.properties);
      default:
        return false;
    }
  },
  isOperationList(value) {
    return Array.isArray(value) && value.every((val) => Operation.isOperation(val));
  },
  isSelectionOperation(value) {
    return Operation.isOperation(value) && value.type.endsWith("_selection");
  },
  isTextOperation(value) {
    return Operation.isOperation(value) && value.type.endsWith("_text");
  },
  inverse(op) {
    switch (op.type) {
      case "insert_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "remove_node"
        });
      }
      case "insert_text": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "remove_text"
        });
      }
      case "merge_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "split_node",
          path: Path.previous(op.path)
        });
      }
      case "move_node": {
        var {
          newPath,
          path: path3
        } = op;
        if (Path.equals(newPath, path3)) {
          return op;
        }
        if (Path.isSibling(path3, newPath)) {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            path: newPath,
            newPath: path3
          });
        }
        var inversePath = Path.transform(path3, op);
        var inverseNewPath = Path.transform(Path.next(path3), op);
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          path: inversePath,
          newPath: inverseNewPath
        });
      }
      case "remove_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "insert_node"
        });
      }
      case "remove_text": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "insert_text"
        });
      }
      case "set_node": {
        var {
          properties,
          newProperties
        } = op;
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          properties: newProperties,
          newProperties: properties
        });
      }
      case "set_selection": {
        var {
          properties: _properties,
          newProperties: _newProperties
        } = op;
        if (_properties == null) {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            properties: _newProperties,
            newProperties: null
          });
        } else if (_newProperties == null) {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            properties: null,
            newProperties: _properties
          });
        } else {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            properties: _newProperties,
            newProperties: _properties
          });
        }
      }
      case "split_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "merge_node",
          path: Path.next(op.path)
        });
      }
    }
  }
};
var IS_EDITOR_CACHE = /* @__PURE__ */ new WeakMap();
var isEditor = (value) => {
  var cachedIsEditor = IS_EDITOR_CACHE.get(value);
  if (cachedIsEditor !== void 0) {
    return cachedIsEditor;
  }
  if (!isPlainObject(value)) {
    return false;
  }
  var isEditor2 = typeof value.addMark === "function" && typeof value.apply === "function" && typeof value.deleteFragment === "function" && typeof value.insertBreak === "function" && typeof value.insertSoftBreak === "function" && typeof value.insertFragment === "function" && typeof value.insertNode === "function" && typeof value.insertText === "function" && typeof value.isElementReadOnly === "function" && typeof value.isInline === "function" && typeof value.isSelectable === "function" && typeof value.isVoid === "function" && typeof value.normalizeNode === "function" && typeof value.onChange === "function" && typeof value.removeMark === "function" && typeof value.getDirtyPaths === "function" && (value.marks === null || isPlainObject(value.marks)) && (value.selection === null || Range.isRange(value.selection)) && Node.isNodeList(value.children) && Operation.isOperationList(value.operations);
  IS_EDITOR_CACHE.set(value, isEditor2);
  return isEditor2;
};
var Editor = {
  above(editor, options) {
    return editor.above(options);
  },
  addMark(editor, key, value) {
    editor.addMark(key, value);
  },
  after(editor, at, options) {
    return editor.after(at, options);
  },
  before(editor, at, options) {
    return editor.before(at, options);
  },
  deleteBackward(editor) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      unit = "character"
    } = options;
    editor.deleteBackward(unit);
  },
  deleteForward(editor) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      unit = "character"
    } = options;
    editor.deleteForward(unit);
  },
  deleteFragment(editor, options) {
    editor.deleteFragment(options);
  },
  edges(editor, at) {
    return editor.edges(at);
  },
  elementReadOnly(editor) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return editor.elementReadOnly(options);
  },
  end(editor, at) {
    return editor.end(at);
  },
  first(editor, at) {
    return editor.first(at);
  },
  fragment(editor, at) {
    return editor.fragment(at);
  },
  hasBlocks(editor, element) {
    return editor.hasBlocks(element);
  },
  hasInlines(editor, element) {
    return editor.hasInlines(element);
  },
  hasPath(editor, path3) {
    return editor.hasPath(path3);
  },
  hasTexts(editor, element) {
    return editor.hasTexts(element);
  },
  insertBreak(editor) {
    editor.insertBreak();
  },
  insertFragment(editor, fragment2, options) {
    editor.insertFragment(fragment2, options);
  },
  insertNode(editor, node3) {
    editor.insertNode(node3);
  },
  insertSoftBreak(editor) {
    editor.insertSoftBreak();
  },
  insertText(editor, text) {
    editor.insertText(text);
  },
  isBlock(editor, value) {
    return editor.isBlock(value);
  },
  isEdge(editor, point3, at) {
    return editor.isEdge(point3, at);
  },
  isEditor(value) {
    return isEditor(value);
  },
  isElementReadOnly(editor, element) {
    return editor.isElementReadOnly(element);
  },
  isEmpty(editor, element) {
    return editor.isEmpty(element);
  },
  isEnd(editor, point3, at) {
    return editor.isEnd(point3, at);
  },
  isInline(editor, value) {
    return editor.isInline(value);
  },
  isNormalizing(editor) {
    return editor.isNormalizing();
  },
  isSelectable(editor, value) {
    return editor.isSelectable(value);
  },
  isStart(editor, point3, at) {
    return editor.isStart(point3, at);
  },
  isVoid(editor, value) {
    return editor.isVoid(value);
  },
  last(editor, at) {
    return editor.last(at);
  },
  leaf(editor, at, options) {
    return editor.leaf(at, options);
  },
  levels(editor, options) {
    return editor.levels(options);
  },
  marks(editor) {
    return editor.getMarks();
  },
  next(editor, options) {
    return editor.next(options);
  },
  node(editor, at, options) {
    return editor.node(at, options);
  },
  nodes(editor, options) {
    return editor.nodes(options);
  },
  normalize(editor, options) {
    editor.normalize(options);
  },
  parent(editor, at, options) {
    return editor.parent(at, options);
  },
  path(editor, at, options) {
    return editor.path(at, options);
  },
  pathRef(editor, path3, options) {
    return editor.pathRef(path3, options);
  },
  pathRefs(editor) {
    return editor.pathRefs();
  },
  point(editor, at, options) {
    return editor.point(at, options);
  },
  pointRef(editor, point3, options) {
    return editor.pointRef(point3, options);
  },
  pointRefs(editor) {
    return editor.pointRefs();
  },
  positions(editor, options) {
    return editor.positions(options);
  },
  previous(editor, options) {
    return editor.previous(options);
  },
  range(editor, at, to) {
    return editor.range(at, to);
  },
  rangeRef(editor, range2, options) {
    return editor.rangeRef(range2, options);
  },
  rangeRefs(editor) {
    return editor.rangeRefs();
  },
  removeMark(editor, key) {
    editor.removeMark(key);
  },
  setNormalizing(editor, isNormalizing2) {
    editor.setNormalizing(isNormalizing2);
  },
  start(editor, at) {
    return editor.start(at);
  },
  string(editor, at, options) {
    return editor.string(at, options);
  },
  unhangRange(editor, range2, options) {
    return editor.unhangRange(range2, options);
  },
  void(editor, options) {
    return editor.void(options);
  },
  withoutNormalizing(editor, fn) {
    editor.withoutNormalizing(fn);
  }
};
var Span = {
  isSpan(value) {
    return Array.isArray(value) && value.length === 2 && value.every(Path.isPath);
  }
};
function ownKeys$b(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$b(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$b(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$b(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Point = {
  compare(point3, another) {
    var result = Path.compare(point3.path, another.path);
    if (result === 0) {
      if (point3.offset < another.offset)
        return -1;
      if (point3.offset > another.offset)
        return 1;
      return 0;
    }
    return result;
  },
  isAfter(point3, another) {
    return Point.compare(point3, another) === 1;
  },
  isBefore(point3, another) {
    return Point.compare(point3, another) === -1;
  },
  equals(point3, another) {
    return point3.offset === another.offset && Path.equals(point3.path, another.path);
  },
  isPoint(value) {
    return isPlainObject(value) && typeof value.offset === "number" && Path.isPath(value.path);
  },
  transform(point3, op) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return produce(point3, (p) => {
      if (p === null) {
        return null;
      }
      var {
        affinity = "forward"
      } = options;
      var {
        path: path3,
        offset
      } = p;
      switch (op.type) {
        case "insert_node":
        case "move_node": {
          p.path = Path.transform(path3, op, options);
          break;
        }
        case "insert_text": {
          if (Path.equals(op.path, path3) && (op.offset < offset || op.offset === offset && affinity === "forward")) {
            p.offset += op.text.length;
          }
          break;
        }
        case "merge_node": {
          if (Path.equals(op.path, path3)) {
            p.offset += op.position;
          }
          p.path = Path.transform(path3, op, options);
          break;
        }
        case "remove_text": {
          if (Path.equals(op.path, path3) && op.offset <= offset) {
            p.offset -= Math.min(offset - op.offset, op.text.length);
          }
          break;
        }
        case "remove_node": {
          if (Path.equals(op.path, path3) || Path.isAncestor(op.path, path3)) {
            return null;
          }
          p.path = Path.transform(path3, op, options);
          break;
        }
        case "split_node": {
          if (Path.equals(op.path, path3)) {
            if (op.position === offset && affinity == null) {
              return null;
            } else if (op.position < offset || op.position === offset && affinity === "forward") {
              p.offset -= op.position;
              p.path = Path.transform(path3, op, _objectSpread$b(_objectSpread$b({}, options), {}, {
                affinity: "forward"
              }));
            }
          } else {
            p.path = Path.transform(path3, op, options);
          }
          break;
        }
      }
    });
  }
};
var _scrubber = void 0;
var Scrubber = {
  setScrubber(scrubber) {
    _scrubber = scrubber;
  },
  stringify(value) {
    return JSON.stringify(value, _scrubber);
  }
};
var _excluded$2 = ["text"];
var _excluded2$2 = ["anchor", "focus"];
function ownKeys$a(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$a(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$a(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$a(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Text = {
  equals(text, another) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    var {
      loose = false
    } = options;
    function omitText(obj) {
      var rest = _objectWithoutProperties(obj, _excluded$2);
      return rest;
    }
    return isDeepEqual(loose ? omitText(text) : text, loose ? omitText(another) : another);
  },
  isText(value) {
    return isPlainObject(value) && typeof value.text === "string";
  },
  isTextList(value) {
    return Array.isArray(value) && value.every((val) => Text.isText(val));
  },
  isTextProps(props) {
    return props.text !== void 0;
  },
  matches(text, props) {
    for (var key in props) {
      if (key === "text") {
        continue;
      }
      if (!text.hasOwnProperty(key) || text[key] !== props[key]) {
        return false;
      }
    }
    return true;
  },
  decorations(node3, decorations) {
    var leaves = [_objectSpread$a({}, node3)];
    for (var dec of decorations) {
      var rest = _objectWithoutProperties(dec, _excluded2$2);
      var [start2, end2] = Range.edges(dec);
      var next3 = [];
      var leafEnd = 0;
      var decorationStart = start2.offset;
      var decorationEnd = end2.offset;
      for (var leaf3 of leaves) {
        var {
          length
        } = leaf3.text;
        var leafStart = leafEnd;
        leafEnd += length;
        if (decorationStart <= leafStart && leafEnd <= decorationEnd) {
          Object.assign(leaf3, rest);
          next3.push(leaf3);
          continue;
        }
        if (decorationStart !== decorationEnd && (decorationStart === leafEnd || decorationEnd === leafStart) || decorationStart > leafEnd || decorationEnd < leafStart || decorationEnd === leafStart && leafStart !== 0) {
          next3.push(leaf3);
          continue;
        }
        var middle = leaf3;
        var before3 = void 0;
        var after3 = void 0;
        if (decorationEnd < leafEnd) {
          var off = decorationEnd - leafStart;
          after3 = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(off)
          });
          middle = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(0, off)
          });
        }
        if (decorationStart > leafStart) {
          var _off = decorationStart - leafStart;
          before3 = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(0, _off)
          });
          middle = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(_off)
          });
        }
        Object.assign(middle, rest);
        if (before3) {
          next3.push(before3);
        }
        next3.push(middle);
        if (after3) {
          next3.push(after3);
        }
      }
      leaves = next3;
    }
    return leaves;
  }
};
var getDefaultInsertLocation = (editor) => {
  if (editor.selection) {
    return editor.selection;
  } else if (editor.children.length > 0) {
    return Editor.end(editor, []);
  } else {
    return [0];
  }
};
var matchPath = (editor, path3) => {
  var [node3] = Editor.node(editor, path3);
  return (n3) => n3 === node3;
};
var getCharacterDistance = function getCharacterDistance2(str) {
  var isRTL = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
  var isLTR = !isRTL;
  var codepoints = isRTL ? codepointsIteratorRTL(str) : str;
  var left = CodepointType.None;
  var right = CodepointType.None;
  var distance = 0;
  var gb11 = null;
  var gb12Or13 = null;
  for (var char of codepoints) {
    var code = char.codePointAt(0);
    if (!code)
      break;
    var type = getCodepointType(char, code);
    [left, right] = isLTR ? [right, type] : [type, left];
    if (intersects(left, CodepointType.ZWJ) && intersects(right, CodepointType.ExtPict)) {
      if (isLTR) {
        gb11 = endsWithEmojiZWJ(str.substring(0, distance));
      } else {
        gb11 = endsWithEmojiZWJ(str.substring(0, str.length - distance));
      }
      if (!gb11)
        break;
    }
    if (intersects(left, CodepointType.RI) && intersects(right, CodepointType.RI)) {
      if (gb12Or13 !== null) {
        gb12Or13 = !gb12Or13;
      } else {
        if (isLTR) {
          gb12Or13 = true;
        } else {
          gb12Or13 = endsWithOddNumberOfRIs(str.substring(0, str.length - distance));
        }
      }
      if (!gb12Or13)
        break;
    }
    if (left !== CodepointType.None && right !== CodepointType.None && isBoundaryPair(left, right)) {
      break;
    }
    distance += char.length;
  }
  return distance || 1;
};
var SPACE = /\s/;
var PUNCTUATION = /[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;
var CHAMELEON = /['\u2018\u2019]/;
var getWordDistance = function getWordDistance2(text) {
  var isRTL = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
  var dist = 0;
  var started = false;
  while (text.length > 0) {
    var charDist = getCharacterDistance(text, isRTL);
    var [char, remaining] = splitByCharacterDistance(text, charDist, isRTL);
    if (isWordCharacter(char, remaining, isRTL)) {
      started = true;
      dist += charDist;
    } else if (!started) {
      dist += charDist;
    } else {
      break;
    }
    text = remaining;
  }
  return dist;
};
var splitByCharacterDistance = (str, dist, isRTL) => {
  if (isRTL) {
    var at = str.length - dist;
    return [str.slice(at, str.length), str.slice(0, at)];
  }
  return [str.slice(0, dist), str.slice(dist)];
};
var isWordCharacter = function isWordCharacter2(char, remaining) {
  var isRTL = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
  if (SPACE.test(char)) {
    return false;
  }
  if (CHAMELEON.test(char)) {
    var charDist = getCharacterDistance(remaining, isRTL);
    var [nextChar, nextRemaining] = splitByCharacterDistance(remaining, charDist, isRTL);
    if (isWordCharacter2(nextChar, nextRemaining, isRTL)) {
      return true;
    }
  }
  if (PUNCTUATION.test(char)) {
    return false;
  }
  return true;
};
var codepointsIteratorRTL = function* codepointsIteratorRTL2(str) {
  var end2 = str.length - 1;
  for (var i2 = 0; i2 < str.length; i2++) {
    var char1 = str.charAt(end2 - i2);
    if (isLowSurrogate(char1.charCodeAt(0))) {
      var char2 = str.charAt(end2 - i2 - 1);
      if (isHighSurrogate(char2.charCodeAt(0))) {
        yield char2 + char1;
        i2++;
        continue;
      }
    }
    yield char1;
  }
};
var isHighSurrogate = (charCode) => {
  return charCode >= 55296 && charCode <= 56319;
};
var isLowSurrogate = (charCode) => {
  return charCode >= 56320 && charCode <= 57343;
};
var CodepointType;
(function(CodepointType2) {
  CodepointType2[CodepointType2["None"] = 0] = "None";
  CodepointType2[CodepointType2["Extend"] = 1] = "Extend";
  CodepointType2[CodepointType2["ZWJ"] = 2] = "ZWJ";
  CodepointType2[CodepointType2["RI"] = 4] = "RI";
  CodepointType2[CodepointType2["Prepend"] = 8] = "Prepend";
  CodepointType2[CodepointType2["SpacingMark"] = 16] = "SpacingMark";
  CodepointType2[CodepointType2["L"] = 32] = "L";
  CodepointType2[CodepointType2["V"] = 64] = "V";
  CodepointType2[CodepointType2["T"] = 128] = "T";
  CodepointType2[CodepointType2["LV"] = 256] = "LV";
  CodepointType2[CodepointType2["LVT"] = 512] = "LVT";
  CodepointType2[CodepointType2["ExtPict"] = 1024] = "ExtPict";
  CodepointType2[CodepointType2["Any"] = 2048] = "Any";
})(CodepointType || (CodepointType = {}));
var reExtend = /^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/;
var rePrepend = /^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/;
var reSpacingMark = /^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/;
var reL = /^[\u1100-\u115F\uA960-\uA97C]$/;
var reV = /^[\u1160-\u11A7\uD7B0-\uD7C6]$/;
var reT = /^[\u11A8-\u11FF\uD7CB-\uD7FB]$/;
var reLV = /^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/;
var reLVT = /^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/;
var reExtPict = /^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/;
var getCodepointType = (char, code) => {
  var type = CodepointType.Any;
  if (char.search(reExtend) !== -1) {
    type |= CodepointType.Extend;
  }
  if (code === 8205) {
    type |= CodepointType.ZWJ;
  }
  if (code >= 127462 && code <= 127487) {
    type |= CodepointType.RI;
  }
  if (char.search(rePrepend) !== -1) {
    type |= CodepointType.Prepend;
  }
  if (char.search(reSpacingMark) !== -1) {
    type |= CodepointType.SpacingMark;
  }
  if (char.search(reL) !== -1) {
    type |= CodepointType.L;
  }
  if (char.search(reV) !== -1) {
    type |= CodepointType.V;
  }
  if (char.search(reT) !== -1) {
    type |= CodepointType.T;
  }
  if (char.search(reLV) !== -1) {
    type |= CodepointType.LV;
  }
  if (char.search(reLVT) !== -1) {
    type |= CodepointType.LVT;
  }
  if (char.search(reExtPict) !== -1) {
    type |= CodepointType.ExtPict;
  }
  return type;
};
function intersects(x, y) {
  return (x & y) !== 0;
}
var NonBoundaryPairs = [
  // GB6
  [CodepointType.L, CodepointType.L | CodepointType.V | CodepointType.LV | CodepointType.LVT],
  // GB7
  [CodepointType.LV | CodepointType.V, CodepointType.V | CodepointType.T],
  // GB8
  [CodepointType.LVT | CodepointType.T, CodepointType.T],
  // GB9
  [CodepointType.Any, CodepointType.Extend | CodepointType.ZWJ],
  // GB9a
  [CodepointType.Any, CodepointType.SpacingMark],
  // GB9b
  [CodepointType.Prepend, CodepointType.Any],
  // GB11
  [CodepointType.ZWJ, CodepointType.ExtPict],
  // GB12 and GB13
  [CodepointType.RI, CodepointType.RI]
];
function isBoundaryPair(left, right) {
  return NonBoundaryPairs.findIndex((r2) => intersects(left, r2[0]) && intersects(right, r2[1])) === -1;
}
var endingEmojiZWJ = /(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/;
var endsWithEmojiZWJ = (str) => {
  return str.search(endingEmojiZWJ) !== -1;
};
var endingRIs = /(?:\uD83C[\uDDE6-\uDDFF])+$/g;
var endsWithOddNumberOfRIs = (str) => {
  var match = str.match(endingRIs);
  if (match === null) {
    return false;
  } else {
    var numRIs = match[0].length / 2;
    return numRIs % 2 === 1;
  }
};
var TextTransforms = {
  delete(editor, options) {
    editor.delete(options);
  },
  insertFragment(editor, fragment2, options) {
    editor.insertFragment(fragment2, options);
  },
  insertText(editor, text) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    Editor.withoutNormalizing(editor, () => {
      var {
        voids = false
      } = options;
      var {
        at = getDefaultInsertLocation(editor)
      } = options;
      if (Path.isPath(at)) {
        at = Editor.range(editor, at);
      }
      if (Range.isRange(at)) {
        if (Range.isCollapsed(at)) {
          at = at.anchor;
        } else {
          var end2 = Range.end(at);
          if (!voids && Editor.void(editor, {
            at: end2
          })) {
            return;
          }
          var start2 = Range.start(at);
          var startRef = Editor.pointRef(editor, start2);
          var endRef = Editor.pointRef(editor, end2);
          Transforms.delete(editor, {
            at,
            voids
          });
          var startPoint = startRef.unref();
          var endPoint = endRef.unref();
          at = startPoint || endPoint;
          Transforms.setSelection(editor, {
            anchor: at,
            focus: at
          });
        }
      }
      if (!voids && Editor.void(editor, {
        at
      }) || Editor.elementReadOnly(editor, {
        at
      })) {
        return;
      }
      var {
        path: path3,
        offset
      } = at;
      if (text.length > 0)
        editor.apply({
          type: "insert_text",
          path: path3,
          offset,
          text
        });
    });
  }
};
function ownKeys$9(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$9(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$9(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$9(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Transforms = _objectSpread$9(_objectSpread$9(_objectSpread$9(_objectSpread$9({}, GeneralTransforms), NodeTransforms), SelectionTransforms), TextTransforms);
var apply = (editor, op) => {
  for (var ref of Editor.pathRefs(editor)) {
    PathRef.transform(ref, op);
  }
  for (var _ref of Editor.pointRefs(editor)) {
    PointRef.transform(_ref, op);
  }
  for (var _ref2 of Editor.rangeRefs(editor)) {
    RangeRef.transform(_ref2, op);
  }
  var oldDirtyPaths = DIRTY_PATHS.get(editor) || [];
  var oldDirtyPathKeys = DIRTY_PATH_KEYS.get(editor) || /* @__PURE__ */ new Set();
  var dirtyPaths;
  var dirtyPathKeys;
  var add = (path4) => {
    if (path4) {
      var key = path4.join(",");
      if (!dirtyPathKeys.has(key)) {
        dirtyPathKeys.add(key);
        dirtyPaths.push(path4);
      }
    }
  };
  if (Path.operationCanTransformPath(op)) {
    dirtyPaths = [];
    dirtyPathKeys = /* @__PURE__ */ new Set();
    for (var path3 of oldDirtyPaths) {
      var newPath = Path.transform(path3, op);
      add(newPath);
    }
  } else {
    dirtyPaths = oldDirtyPaths;
    dirtyPathKeys = oldDirtyPathKeys;
  }
  var newDirtyPaths = editor.getDirtyPaths(op);
  for (var _path of newDirtyPaths) {
    add(_path);
  }
  DIRTY_PATHS.set(editor, dirtyPaths);
  DIRTY_PATH_KEYS.set(editor, dirtyPathKeys);
  Transforms.transform(editor, op);
  editor.operations.push(op);
  Editor.normalize(editor, {
    operation: op
  });
  if (op.type === "set_selection") {
    editor.marks = null;
  }
  if (!FLUSHING.get(editor)) {
    FLUSHING.set(editor, true);
    Promise.resolve().then(() => {
      FLUSHING.set(editor, false);
      editor.onChange({
        operation: op
      });
      editor.operations = [];
    });
  }
};
var getDirtyPaths = (editor, op) => {
  switch (op.type) {
    case "insert_text":
    case "remove_text":
    case "set_node": {
      var {
        path: path3
      } = op;
      return Path.levels(path3);
    }
    case "insert_node": {
      var {
        node: node3,
        path: _path
      } = op;
      var levels2 = Path.levels(_path);
      var descendants = Text.isText(node3) ? [] : Array.from(Node.nodes(node3), (_ref) => {
        var [, p2] = _ref;
        return _path.concat(p2);
      });
      return [...levels2, ...descendants];
    }
    case "merge_node": {
      var {
        path: _path2
      } = op;
      var ancestors = Path.ancestors(_path2);
      var previousPath = Path.previous(_path2);
      return [...ancestors, previousPath];
    }
    case "move_node": {
      var {
        path: _path3,
        newPath
      } = op;
      if (Path.equals(_path3, newPath)) {
        return [];
      }
      var oldAncestors = [];
      var newAncestors = [];
      for (var ancestor of Path.ancestors(_path3)) {
        var p = Path.transform(ancestor, op);
        oldAncestors.push(p);
      }
      for (var _ancestor of Path.ancestors(newPath)) {
        var _p = Path.transform(_ancestor, op);
        newAncestors.push(_p);
      }
      var newParent = newAncestors[newAncestors.length - 1];
      var newIndex = newPath[newPath.length - 1];
      var resultPath = newParent.concat(newIndex);
      return [...oldAncestors, ...newAncestors, resultPath];
    }
    case "remove_node": {
      var {
        path: _path4
      } = op;
      var _ancestors = Path.ancestors(_path4);
      return [..._ancestors];
    }
    case "split_node": {
      var {
        path: _path5
      } = op;
      var _levels = Path.levels(_path5);
      var nextPath = Path.next(_path5);
      return [..._levels, nextPath];
    }
    default: {
      return [];
    }
  }
};
var getFragment = (editor) => {
  var {
    selection
  } = editor;
  if (selection) {
    return Node.fragment(editor, selection);
  }
  return [];
};
var normalizeNode = (editor, entry) => {
  var [node3, path3] = entry;
  if (Text.isText(node3)) {
    return;
  }
  if (Element2.isElement(node3) && node3.children.length === 0) {
    var child = {
      text: ""
    };
    Transforms.insertNodes(editor, child, {
      at: path3.concat(0),
      voids: true
    });
    return;
  }
  var shouldHaveInlines = Editor.isEditor(node3) ? false : Element2.isElement(node3) && (editor.isInline(node3) || node3.children.length === 0 || Text.isText(node3.children[0]) || editor.isInline(node3.children[0]));
  var n3 = 0;
  for (var i2 = 0; i2 < node3.children.length; i2++, n3++) {
    var currentNode = Node.get(editor, path3);
    if (Text.isText(currentNode))
      continue;
    var _child = currentNode.children[n3];
    var prev = currentNode.children[n3 - 1];
    var isLast = i2 === node3.children.length - 1;
    var isInlineOrText = Text.isText(_child) || Element2.isElement(_child) && editor.isInline(_child);
    if (isInlineOrText !== shouldHaveInlines) {
      Transforms.removeNodes(editor, {
        at: path3.concat(n3),
        voids: true
      });
      n3--;
    } else if (Element2.isElement(_child)) {
      if (editor.isInline(_child)) {
        if (prev == null || !Text.isText(prev)) {
          var newChild = {
            text: ""
          };
          Transforms.insertNodes(editor, newChild, {
            at: path3.concat(n3),
            voids: true
          });
          n3++;
        } else if (isLast) {
          var _newChild = {
            text: ""
          };
          Transforms.insertNodes(editor, _newChild, {
            at: path3.concat(n3 + 1),
            voids: true
          });
          n3++;
        }
      }
    } else {
      if (prev != null && Text.isText(prev)) {
        if (Text.equals(_child, prev, {
          loose: true
        })) {
          Transforms.mergeNodes(editor, {
            at: path3.concat(n3),
            voids: true
          });
          n3--;
        } else if (prev.text === "") {
          Transforms.removeNodes(editor, {
            at: path3.concat(n3 - 1),
            voids: true
          });
          n3--;
        } else if (_child.text === "") {
          Transforms.removeNodes(editor, {
            at: path3.concat(n3),
            voids: true
          });
          n3--;
        }
      }
    }
  }
};
var shouldNormalize = (editor, _ref) => {
  var {
    iteration,
    initialDirtyPathsLength
  } = _ref;
  var maxIterations = initialDirtyPathsLength * 42;
  if (iteration > maxIterations) {
    throw new Error("Could not completely normalize the editor after ".concat(maxIterations, " iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));
  }
  return true;
};
var above = function above2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    voids = false,
    mode = "lowest",
    at = editor.selection,
    match
  } = options;
  if (!at) {
    return;
  }
  var path3 = Editor.path(editor, at);
  var reverse = mode === "lowest";
  for (var [n3, p] of Editor.levels(editor, {
    at: path3,
    voids,
    match,
    reverse
  })) {
    if (Text.isText(n3))
      continue;
    if (Range.isRange(at)) {
      if (Path.isAncestor(p, at.anchor.path) && Path.isAncestor(p, at.focus.path)) {
        return [n3, p];
      }
    } else {
      if (!Path.equals(path3, p)) {
        return [n3, p];
      }
    }
  }
};
function ownKeys$8(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$8(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$8(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$8(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var addMark = (editor, key, value) => {
  var {
    selection
  } = editor;
  if (selection) {
    var match = (node3, path3) => {
      if (!Text.isText(node3)) {
        return false;
      }
      var [parentNode2, parentPath] = Editor.parent(editor, path3);
      return !editor.isVoid(parentNode2) || editor.markableVoid(parentNode2);
    };
    var expandedSelection = Range.isExpanded(selection);
    var markAcceptingVoidSelected = false;
    if (!expandedSelection) {
      var [selectedNode, selectedPath] = Editor.node(editor, selection);
      if (selectedNode && match(selectedNode, selectedPath)) {
        var [parentNode] = Editor.parent(editor, selectedPath);
        markAcceptingVoidSelected = parentNode && editor.markableVoid(parentNode);
      }
    }
    if (expandedSelection || markAcceptingVoidSelected) {
      Transforms.setNodes(editor, {
        [key]: value
      }, {
        match,
        split: true,
        voids: true
      });
    } else {
      var marks3 = _objectSpread$8(_objectSpread$8({}, Editor.marks(editor) || {}), {}, {
        [key]: value
      });
      editor.marks = marks3;
      if (!FLUSHING.get(editor)) {
        editor.onChange();
      }
    }
  }
};
function ownKeys$7(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$7(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$7(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$7(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var after = function after2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var anchor = Editor.point(editor, at, {
    edge: "end"
  });
  var focus = Editor.end(editor, []);
  var range2 = {
    anchor,
    focus
  };
  var {
    distance = 1
  } = options;
  var d = 0;
  var target;
  for (var p of Editor.positions(editor, _objectSpread$7(_objectSpread$7({}, options), {}, {
    at: range2
  }))) {
    if (d > distance) {
      break;
    }
    if (d !== 0) {
      target = p;
    }
    d++;
  }
  return target;
};
function ownKeys$6(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$6(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$6(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$6(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var before = function before2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var anchor = Editor.start(editor, []);
  var focus = Editor.point(editor, at, {
    edge: "start"
  });
  var range2 = {
    anchor,
    focus
  };
  var {
    distance = 1
  } = options;
  var d = 0;
  var target;
  for (var p of Editor.positions(editor, _objectSpread$6(_objectSpread$6({}, options), {}, {
    at: range2,
    reverse: true
  }))) {
    if (d > distance) {
      break;
    }
    if (d !== 0) {
      target = p;
    }
    d++;
  }
  return target;
};
var deleteBackward = (editor, unit) => {
  var {
    selection
  } = editor;
  if (selection && Range.isCollapsed(selection)) {
    Transforms.delete(editor, {
      unit,
      reverse: true
    });
  }
};
var deleteForward = (editor, unit) => {
  var {
    selection
  } = editor;
  if (selection && Range.isCollapsed(selection)) {
    Transforms.delete(editor, {
      unit
    });
  }
};
var deleteFragment = function deleteFragment2(editor) {
  var {
    direction = "forward"
  } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    selection
  } = editor;
  if (selection && Range.isExpanded(selection)) {
    Transforms.delete(editor, {
      reverse: direction === "backward"
    });
  }
};
var edges = (editor, at) => {
  return [Editor.start(editor, at), Editor.end(editor, at)];
};
function ownKeys$5(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$5(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$5(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$5(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var elementReadOnly = function elementReadOnly2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return Editor.above(editor, _objectSpread$5(_objectSpread$5({}, options), {}, {
    match: (n3) => Element2.isElement(n3) && Editor.isElementReadOnly(editor, n3)
  }));
};
var end = (editor, at) => {
  return Editor.point(editor, at, {
    edge: "end"
  });
};
var first = (editor, at) => {
  var path3 = Editor.path(editor, at, {
    edge: "start"
  });
  return Editor.node(editor, path3);
};
var fragment = (editor, at) => {
  var range2 = Editor.range(editor, at);
  return Node.fragment(editor, range2);
};
function ownKeys$4(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$4(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$4(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$4(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var getVoid = function getVoid2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return Editor.above(editor, _objectSpread$4(_objectSpread$4({}, options), {}, {
    match: (n3) => Element2.isElement(n3) && Editor.isVoid(editor, n3)
  }));
};
var hasBlocks = (editor, element) => {
  return element.children.some((n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3));
};
var hasInlines = (editor, element) => {
  return element.children.some((n3) => Text.isText(n3) || Editor.isInline(editor, n3));
};
var hasPath = (editor, path3) => {
  return Node.has(editor, path3);
};
var hasTexts = (editor, element) => {
  return element.children.every((n3) => Text.isText(n3));
};
var insertBreak = (editor) => {
  Transforms.splitNodes(editor, {
    always: true
  });
};
var insertNode = (editor, node3, options) => {
  Transforms.insertNodes(editor, node3, options);
};
var insertSoftBreak = (editor) => {
  Transforms.splitNodes(editor, {
    always: true
  });
};
function ownKeys$3(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$3(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$3(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$3(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var insertText = function insertText2(editor, text) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    selection,
    marks: marks3
  } = editor;
  if (selection) {
    if (marks3) {
      var node3 = _objectSpread$3({
        text
      }, marks3);
      Transforms.insertNodes(editor, node3, {
        at: options.at,
        voids: options.voids
      });
    } else {
      Transforms.insertText(editor, text, options);
    }
    editor.marks = null;
  }
};
var isBlock2 = (editor, value) => {
  return !editor.isInline(value);
};
var isEdge = (editor, point3, at) => {
  return Editor.isStart(editor, point3, at) || Editor.isEnd(editor, point3, at);
};
var isEmpty = (editor, element) => {
  var {
    children
  } = element;
  var [first2] = children;
  return children.length === 0 || children.length === 1 && Text.isText(first2) && first2.text === "" && !editor.isVoid(element);
};
var isEnd = (editor, point3, at) => {
  var end2 = Editor.end(editor, at);
  return Point.equals(point3, end2);
};
var isNormalizing = (editor) => {
  var isNormalizing2 = NORMALIZING.get(editor);
  return isNormalizing2 === void 0 ? true : isNormalizing2;
};
var isStart = (editor, point3, at) => {
  if (point3.offset !== 0) {
    return false;
  }
  var start2 = Editor.start(editor, at);
  return Point.equals(point3, start2);
};
var last = (editor, at) => {
  var path3 = Editor.path(editor, at, {
    edge: "end"
  });
  return Editor.node(editor, path3);
};
var leaf = function leaf2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var path3 = Editor.path(editor, at, options);
  var node3 = Node.leaf(editor, path3);
  return [node3, path3];
};
function levels(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return function* () {
    var {
      at = editor.selection,
      reverse = false,
      voids = false
    } = options;
    var {
      match
    } = options;
    if (match == null) {
      match = () => true;
    }
    if (!at) {
      return;
    }
    var levels2 = [];
    var path3 = Editor.path(editor, at);
    for (var [n3, p] of Node.levels(editor, path3)) {
      if (!match(n3, p)) {
        continue;
      }
      levels2.push([n3, p]);
      if (!voids && Element2.isElement(n3) && Editor.isVoid(editor, n3)) {
        break;
      }
    }
    if (reverse) {
      levels2.reverse();
    }
    yield* __yieldStar(levels2);
  }();
}
var _excluded$1 = ["text"];
var _excluded2$1 = ["text"];
var marks = function marks2(editor) {
  var {
    marks: marks3,
    selection
  } = editor;
  if (!selection) {
    return null;
  }
  var {
    anchor,
    focus
  } = selection;
  if (marks3) {
    return marks3;
  }
  if (Range.isExpanded(selection)) {
    var isEnd2 = Editor.isEnd(editor, anchor, anchor.path);
    if (isEnd2) {
      var after3 = Editor.after(editor, anchor);
      if (after3) {
        anchor = after3;
      }
    }
    var [match] = Editor.nodes(editor, {
      match: Text.isText,
      at: {
        anchor,
        focus
      }
    });
    if (match) {
      var [_node] = match;
      var _rest = _objectWithoutProperties(_node, _excluded$1);
      return _rest;
    } else {
      return {};
    }
  }
  var {
    path: path3
  } = anchor;
  var [node3] = Editor.leaf(editor, path3);
  if (anchor.offset === 0) {
    var prev = Editor.previous(editor, {
      at: path3,
      match: Text.isText
    });
    var markedVoid = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isVoid(editor, n3) && editor.markableVoid(n3)
    });
    if (!markedVoid) {
      var block = Editor.above(editor, {
        match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3)
      });
      if (prev && block) {
        var [prevNode, prevPath] = prev;
        var [, blockPath] = block;
        if (Path.isAncestor(blockPath, prevPath)) {
          node3 = prevNode;
        }
      }
    }
  }
  var rest = _objectWithoutProperties(node3, _excluded2$1);
  return rest;
};
var next = function next2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    mode = "lowest",
    voids = false
  } = options;
  var {
    match,
    at = editor.selection
  } = options;
  if (!at) {
    return;
  }
  var pointAfterLocation = Editor.after(editor, at, {
    voids
  });
  if (!pointAfterLocation)
    return;
  var [, to] = Editor.last(editor, []);
  var span = [pointAfterLocation.path, to];
  if (Path.isPath(at) && at.length === 0) {
    throw new Error("Cannot get the next node from the root node!");
  }
  if (match == null) {
    if (Path.isPath(at)) {
      var [parent3] = Editor.parent(editor, at);
      match = (n3) => parent3.children.includes(n3);
    } else {
      match = () => true;
    }
  }
  var [next3] = Editor.nodes(editor, {
    at: span,
    match,
    mode,
    voids
  });
  return next3;
};
var node = function node2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var path3 = Editor.path(editor, at, options);
  var node3 = Node.get(editor, path3);
  return [node3, path3];
};
function nodes(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return function* () {
    var {
      at = editor.selection,
      mode = "all",
      universal = false,
      reverse = false,
      voids = false,
      ignoreNonSelectable = false
    } = options;
    var {
      match
    } = options;
    if (!match) {
      match = () => true;
    }
    if (!at) {
      return;
    }
    var from;
    var to;
    if (Span.isSpan(at)) {
      from = at[0];
      to = at[1];
    } else {
      var first2 = Editor.path(editor, at, {
        edge: "start"
      });
      var last2 = Editor.path(editor, at, {
        edge: "end"
      });
      from = reverse ? last2 : first2;
      to = reverse ? first2 : last2;
    }
    var nodeEntries = Node.nodes(editor, {
      reverse,
      from,
      to,
      pass: (_ref) => {
        var [node4] = _ref;
        if (!Element2.isElement(node4))
          return false;
        if (!voids && (Editor.isVoid(editor, node4) || Editor.isElementReadOnly(editor, node4)))
          return true;
        if (ignoreNonSelectable && !Editor.isSelectable(editor, node4))
          return true;
        return false;
      }
    });
    var matches = [];
    var hit;
    for (var [node3, path3] of nodeEntries) {
      if (ignoreNonSelectable && Element2.isElement(node3) && !Editor.isSelectable(editor, node3)) {
        continue;
      }
      var isLower = hit && Path.compare(path3, hit[1]) === 0;
      if (mode === "highest" && isLower) {
        continue;
      }
      if (!match(node3, path3)) {
        if (universal && !isLower && Text.isText(node3)) {
          return;
        } else {
          continue;
        }
      }
      if (mode === "lowest" && isLower) {
        hit = [node3, path3];
        continue;
      }
      var emit = mode === "lowest" ? hit : [node3, path3];
      if (emit) {
        if (universal) {
          matches.push(emit);
        } else {
          yield emit;
        }
      }
      hit = [node3, path3];
    }
    if (mode === "lowest" && hit) {
      if (universal) {
        matches.push(hit);
      } else {
        yield hit;
      }
    }
    if (universal) {
      yield* __yieldStar(matches);
    }
  }();
}
var normalize = function normalize2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    force = false,
    operation
  } = options;
  var getDirtyPaths2 = (editor2) => {
    return DIRTY_PATHS.get(editor2) || [];
  };
  var getDirtyPathKeys = (editor2) => {
    return DIRTY_PATH_KEYS.get(editor2) || /* @__PURE__ */ new Set();
  };
  var popDirtyPath = (editor2) => {
    var path3 = getDirtyPaths2(editor2).pop();
    var key = path3.join(",");
    getDirtyPathKeys(editor2).delete(key);
    return path3;
  };
  if (!Editor.isNormalizing(editor)) {
    return;
  }
  if (force) {
    var allPaths = Array.from(Node.nodes(editor), (_ref) => {
      var [, p] = _ref;
      return p;
    });
    var allPathKeys = new Set(allPaths.map((p) => p.join(",")));
    DIRTY_PATHS.set(editor, allPaths);
    DIRTY_PATH_KEYS.set(editor, allPathKeys);
  }
  if (getDirtyPaths2(editor).length === 0) {
    return;
  }
  Editor.withoutNormalizing(editor, () => {
    for (var dirtyPath of getDirtyPaths2(editor)) {
      if (Node.has(editor, dirtyPath)) {
        var entry = Editor.node(editor, dirtyPath);
        var [node3, _] = entry;
        if (Element2.isElement(node3) && node3.children.length === 0) {
          editor.normalizeNode(entry, {
            operation
          });
        }
      }
    }
    var dirtyPaths = getDirtyPaths2(editor);
    var initialDirtyPathsLength = dirtyPaths.length;
    var iteration = 0;
    while (dirtyPaths.length !== 0) {
      if (!editor.shouldNormalize({
        dirtyPaths,
        iteration,
        initialDirtyPathsLength,
        operation
      })) {
        return;
      }
      var _dirtyPath = popDirtyPath(editor);
      if (Node.has(editor, _dirtyPath)) {
        var _entry = Editor.node(editor, _dirtyPath);
        editor.normalizeNode(_entry, {
          operation
        });
      }
      iteration++;
      dirtyPaths = getDirtyPaths2(editor);
    }
  });
};
var parent = function parent2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var path3 = Editor.path(editor, at, options);
  var parentPath = Path.parent(path3);
  var entry = Editor.node(editor, parentPath);
  return entry;
};
var pathRef = function pathRef2(editor, path3) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    affinity = "forward"
  } = options;
  var ref = {
    current: path3,
    affinity,
    unref() {
      var {
        current: current2
      } = ref;
      var pathRefs2 = Editor.pathRefs(editor);
      pathRefs2.delete(ref);
      ref.current = null;
      return current2;
    }
  };
  var refs = Editor.pathRefs(editor);
  refs.add(ref);
  return ref;
};
var pathRefs = (editor) => {
  var refs = PATH_REFS.get(editor);
  if (!refs) {
    refs = /* @__PURE__ */ new Set();
    PATH_REFS.set(editor, refs);
  }
  return refs;
};
var path = function path2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    depth,
    edge
  } = options;
  if (Path.isPath(at)) {
    if (edge === "start") {
      var [, firstPath] = Node.first(editor, at);
      at = firstPath;
    } else if (edge === "end") {
      var [, lastPath] = Node.last(editor, at);
      at = lastPath;
    }
  }
  if (Range.isRange(at)) {
    if (edge === "start") {
      at = Range.start(at);
    } else if (edge === "end") {
      at = Range.end(at);
    } else {
      at = Path.common(at.anchor.path, at.focus.path);
    }
  }
  if (Point.isPoint(at)) {
    at = at.path;
  }
  if (depth != null) {
    at = at.slice(0, depth);
  }
  return at;
};
var pointRef = function pointRef2(editor, point3) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    affinity = "forward"
  } = options;
  var ref = {
    current: point3,
    affinity,
    unref() {
      var {
        current: current2
      } = ref;
      var pointRefs2 = Editor.pointRefs(editor);
      pointRefs2.delete(ref);
      ref.current = null;
      return current2;
    }
  };
  var refs = Editor.pointRefs(editor);
  refs.add(ref);
  return ref;
};
var pointRefs = (editor) => {
  var refs = POINT_REFS.get(editor);
  if (!refs) {
    refs = /* @__PURE__ */ new Set();
    POINT_REFS.set(editor, refs);
  }
  return refs;
};
var point = function point2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    edge = "start"
  } = options;
  if (Path.isPath(at)) {
    var path3;
    if (edge === "end") {
      var [, lastPath] = Node.last(editor, at);
      path3 = lastPath;
    } else {
      var [, firstPath] = Node.first(editor, at);
      path3 = firstPath;
    }
    var node3 = Node.get(editor, path3);
    if (!Text.isText(node3)) {
      throw new Error("Cannot get the ".concat(edge, " point in the node at path [").concat(at, "] because it has no ").concat(edge, " text node."));
    }
    return {
      path: path3,
      offset: edge === "end" ? node3.text.length : 0
    };
  }
  if (Range.isRange(at)) {
    var [start2, end2] = Range.edges(at);
    return edge === "start" ? start2 : end2;
  }
  return at;
};
function positions(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return function* () {
    var {
      at = editor.selection,
      unit = "offset",
      reverse = false,
      voids = false,
      ignoreNonSelectable = false
    } = options;
    if (!at) {
      return;
    }
    var range2 = Editor.range(editor, at);
    var [start2, end2] = Range.edges(range2);
    var first2 = reverse ? end2 : start2;
    var isNewBlock = false;
    var blockText = "";
    var distance = 0;
    var leafTextRemaining = 0;
    var leafTextOffset = 0;
    for (var [node3, path3] of Editor.nodes(editor, {
      at,
      reverse,
      voids,
      ignoreNonSelectable
    })) {
      if (Element2.isElement(node3)) {
        if (!voids && (editor.isVoid(node3) || editor.isElementReadOnly(node3))) {
          yield Editor.start(editor, path3);
          continue;
        }
        if (editor.isInline(node3))
          continue;
        if (Editor.hasInlines(editor, node3)) {
          var e2 = Path.isAncestor(path3, end2.path) ? end2 : Editor.end(editor, path3);
          var s = Path.isAncestor(path3, start2.path) ? start2 : Editor.start(editor, path3);
          blockText = Editor.string(editor, {
            anchor: s,
            focus: e2
          }, {
            voids
          });
          isNewBlock = true;
        }
      }
      if (Text.isText(node3)) {
        var isFirst = Path.equals(path3, first2.path);
        if (isFirst) {
          leafTextRemaining = reverse ? first2.offset : node3.text.length - first2.offset;
          leafTextOffset = first2.offset;
        } else {
          leafTextRemaining = node3.text.length;
          leafTextOffset = reverse ? leafTextRemaining : 0;
        }
        if (isFirst || isNewBlock || unit === "offset") {
          yield {
            path: path3,
            offset: leafTextOffset
          };
          isNewBlock = false;
        }
        while (true) {
          if (distance === 0) {
            if (blockText === "")
              break;
            distance = calcDistance(blockText, unit, reverse);
            blockText = splitByCharacterDistance(blockText, distance, reverse)[1];
          }
          leafTextOffset = reverse ? leafTextOffset - distance : leafTextOffset + distance;
          leafTextRemaining = leafTextRemaining - distance;
          if (leafTextRemaining < 0) {
            distance = -leafTextRemaining;
            break;
          }
          distance = 0;
          yield {
            path: path3,
            offset: leafTextOffset
          };
        }
      }
    }
    function calcDistance(text, unit2, reverse2) {
      if (unit2 === "character") {
        return getCharacterDistance(text, reverse2);
      } else if (unit2 === "word") {
        return getWordDistance(text, reverse2);
      } else if (unit2 === "line" || unit2 === "block") {
        return text.length;
      }
      return 1;
    }
  }();
}
var previous = function previous2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    mode = "lowest",
    voids = false
  } = options;
  var {
    match,
    at = editor.selection
  } = options;
  if (!at) {
    return;
  }
  var pointBeforeLocation = Editor.before(editor, at, {
    voids
  });
  if (!pointBeforeLocation) {
    return;
  }
  var [, to] = Editor.first(editor, []);
  var span = [pointBeforeLocation.path, to];
  if (Path.isPath(at) && at.length === 0) {
    throw new Error("Cannot get the previous node from the root node!");
  }
  if (match == null) {
    if (Path.isPath(at)) {
      var [parent3] = Editor.parent(editor, at);
      match = (n3) => parent3.children.includes(n3);
    } else {
      match = () => true;
    }
  }
  var [previous3] = Editor.nodes(editor, {
    reverse: true,
    at: span,
    match,
    mode,
    voids
  });
  return previous3;
};
var rangeRef = function rangeRef2(editor, range2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    affinity = "forward"
  } = options;
  var ref = {
    current: range2,
    affinity,
    unref() {
      var {
        current: current2
      } = ref;
      var rangeRefs2 = Editor.rangeRefs(editor);
      rangeRefs2.delete(ref);
      ref.current = null;
      return current2;
    }
  };
  var refs = Editor.rangeRefs(editor);
  refs.add(ref);
  return ref;
};
var rangeRefs = (editor) => {
  var refs = RANGE_REFS.get(editor);
  if (!refs) {
    refs = /* @__PURE__ */ new Set();
    RANGE_REFS.set(editor, refs);
  }
  return refs;
};
var range = (editor, at, to) => {
  if (Range.isRange(at) && !to) {
    return at;
  }
  var start2 = Editor.start(editor, at);
  var end2 = Editor.end(editor, to || at);
  return {
    anchor: start2,
    focus: end2
  };
};
function ownKeys$2(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$2(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$2(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$2(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var removeMark = (editor, key) => {
  var {
    selection
  } = editor;
  if (selection) {
    var match = (node3, path3) => {
      if (!Text.isText(node3)) {
        return false;
      }
      var [parentNode2, parentPath] = Editor.parent(editor, path3);
      return !editor.isVoid(parentNode2) || editor.markableVoid(parentNode2);
    };
    var expandedSelection = Range.isExpanded(selection);
    var markAcceptingVoidSelected = false;
    if (!expandedSelection) {
      var [selectedNode, selectedPath] = Editor.node(editor, selection);
      if (selectedNode && match(selectedNode, selectedPath)) {
        var [parentNode] = Editor.parent(editor, selectedPath);
        markAcceptingVoidSelected = parentNode && editor.markableVoid(parentNode);
      }
    }
    if (expandedSelection || markAcceptingVoidSelected) {
      Transforms.unsetNodes(editor, key, {
        match,
        split: true,
        voids: true
      });
    } else {
      var marks3 = _objectSpread$2({}, Editor.marks(editor) || {});
      delete marks3[key];
      editor.marks = marks3;
      if (!FLUSHING.get(editor)) {
        editor.onChange();
      }
    }
  }
};
var setNormalizing = (editor, isNormalizing2) => {
  NORMALIZING.set(editor, isNormalizing2);
};
var start = (editor, at) => {
  return Editor.point(editor, at, {
    edge: "start"
  });
};
var string = function string2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    voids = false
  } = options;
  var range2 = Editor.range(editor, at);
  var [start2, end2] = Range.edges(range2);
  var text = "";
  for (var [node3, path3] of Editor.nodes(editor, {
    at: range2,
    match: Text.isText,
    voids
  })) {
    var t2 = node3.text;
    if (Path.equals(path3, end2.path)) {
      t2 = t2.slice(0, end2.offset);
    }
    if (Path.equals(path3, start2.path)) {
      t2 = t2.slice(start2.offset);
    }
    text += t2;
  }
  return text;
};
var unhangRange = function unhangRange2(editor, range2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    voids = false
  } = options;
  var [start2, end2] = Range.edges(range2);
  if (start2.offset !== 0 || end2.offset !== 0 || Range.isCollapsed(range2) || Path.hasPrevious(end2.path)) {
    return range2;
  }
  var endBlock = Editor.above(editor, {
    at: end2,
    match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
    voids
  });
  var blockPath = endBlock ? endBlock[1] : [];
  var first2 = Editor.start(editor, start2);
  var before3 = {
    anchor: first2,
    focus: end2
  };
  var skip = true;
  for (var [node3, path3] of Editor.nodes(editor, {
    at: before3,
    match: Text.isText,
    reverse: true,
    voids
  })) {
    if (skip) {
      skip = false;
      continue;
    }
    if (node3.text !== "" || Path.isBefore(path3, blockPath)) {
      end2 = {
        path: path3,
        offset: node3.text.length
      };
      break;
    }
  }
  return {
    anchor: start2,
    focus: end2
  };
};
var withoutNormalizing = (editor, fn) => {
  var value = Editor.isNormalizing(editor);
  Editor.setNormalizing(editor, false);
  try {
    fn();
  } finally {
    Editor.setNormalizing(editor, value);
  }
  Editor.normalize(editor);
};
var deleteText = function deleteText2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var _Editor$void, _Editor$void2;
    var {
      reverse = false,
      unit = "character",
      distance = 1,
      voids = false
    } = options;
    var {
      at = editor.selection,
      hanging = false
    } = options;
    if (!at) {
      return;
    }
    var isCollapsed = false;
    if (Range.isRange(at) && Range.isCollapsed(at)) {
      isCollapsed = true;
      at = at.anchor;
    }
    if (Point.isPoint(at)) {
      var furthestVoid = Editor.void(editor, {
        at,
        mode: "highest"
      });
      if (!voids && furthestVoid) {
        var [, voidPath] = furthestVoid;
        at = voidPath;
      } else {
        var opts = {
          unit,
          distance
        };
        var target = reverse ? Editor.before(editor, at, opts) || Editor.start(editor, []) : Editor.after(editor, at, opts) || Editor.end(editor, []);
        at = {
          anchor: at,
          focus: target
        };
        hanging = true;
      }
    }
    if (Path.isPath(at)) {
      Transforms.removeNodes(editor, {
        at,
        voids
      });
      return;
    }
    if (Range.isCollapsed(at)) {
      return;
    }
    if (!hanging) {
      var [, _end] = Range.edges(at);
      var endOfDoc = Editor.end(editor, []);
      if (!Point.equals(_end, endOfDoc)) {
        at = Editor.unhangRange(editor, at, {
          voids
        });
      }
    }
    var [start2, end2] = Range.edges(at);
    var startBlock = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      at: start2,
      voids
    });
    var endBlock = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      at: end2,
      voids
    });
    var isAcrossBlocks = startBlock && endBlock && !Path.equals(startBlock[1], endBlock[1]);
    var isSingleText = Path.equals(start2.path, end2.path);
    var startNonEditable = voids ? null : (_Editor$void = Editor.void(editor, {
      at: start2,
      mode: "highest"
    })) !== null && _Editor$void !== void 0 ? _Editor$void : Editor.elementReadOnly(editor, {
      at: start2,
      mode: "highest"
    });
    var endNonEditable = voids ? null : (_Editor$void2 = Editor.void(editor, {
      at: end2,
      mode: "highest"
    })) !== null && _Editor$void2 !== void 0 ? _Editor$void2 : Editor.elementReadOnly(editor, {
      at: end2,
      mode: "highest"
    });
    if (startNonEditable) {
      var before3 = Editor.before(editor, start2);
      if (before3 && startBlock && Path.isAncestor(startBlock[1], before3.path)) {
        start2 = before3;
      }
    }
    if (endNonEditable) {
      var after3 = Editor.after(editor, end2);
      if (after3 && endBlock && Path.isAncestor(endBlock[1], after3.path)) {
        end2 = after3;
      }
    }
    var matches = [];
    var lastPath;
    for (var entry of Editor.nodes(editor, {
      at,
      voids
    })) {
      var [node3, path3] = entry;
      if (lastPath && Path.compare(path3, lastPath) === 0) {
        continue;
      }
      if (!voids && Element2.isElement(node3) && (Editor.isVoid(editor, node3) || Editor.isElementReadOnly(editor, node3)) || !Path.isCommon(path3, start2.path) && !Path.isCommon(path3, end2.path)) {
        matches.push(entry);
        lastPath = path3;
      }
    }
    var pathRefs2 = Array.from(matches, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    var startRef = Editor.pointRef(editor, start2);
    var endRef = Editor.pointRef(editor, end2);
    var removedText = "";
    if (!isSingleText && !startNonEditable) {
      var _point = startRef.current;
      var [_node] = Editor.leaf(editor, _point);
      var {
        path: _path
      } = _point;
      var {
        offset
      } = start2;
      var text = _node.text.slice(offset);
      if (text.length > 0) {
        editor.apply({
          type: "remove_text",
          path: _path,
          offset,
          text
        });
        removedText = text;
      }
    }
    pathRefs2.reverse().map((r2) => r2.unref()).filter((r2) => r2 !== null).forEach((p) => Transforms.removeNodes(editor, {
      at: p,
      voids
    }));
    if (!endNonEditable) {
      var _point2 = endRef.current;
      var [_node2] = Editor.leaf(editor, _point2);
      var {
        path: _path2
      } = _point2;
      var _offset = isSingleText ? start2.offset : 0;
      var _text = _node2.text.slice(_offset, end2.offset);
      if (_text.length > 0) {
        editor.apply({
          type: "remove_text",
          path: _path2,
          offset: _offset,
          text: _text
        });
        removedText = _text;
      }
    }
    if (!isSingleText && isAcrossBlocks && endRef.current && startRef.current) {
      Transforms.mergeNodes(editor, {
        at: endRef.current,
        hanging: true,
        voids
      });
    }
    if (isCollapsed && reverse && unit === "character" && removedText.length > 1 && removedText.match(/[\u0E00-\u0E7F]+/)) {
      Transforms.insertText(editor, removedText.slice(0, removedText.length - distance));
    }
    var startUnref = startRef.unref();
    var endUnref = endRef.unref();
    var point3 = reverse ? startUnref || endUnref : endUnref || startUnref;
    if (options.at == null && point3) {
      Transforms.select(editor, point3);
    }
  });
};
var insertFragment = function insertFragment2(editor, fragment2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      hanging = false,
      voids = false
    } = options;
    var {
      at = getDefaultInsertLocation(editor)
    } = options;
    if (!fragment2.length) {
      return;
    }
    if (Range.isRange(at)) {
      if (!hanging) {
        at = Editor.unhangRange(editor, at, {
          voids
        });
      }
      if (Range.isCollapsed(at)) {
        at = at.anchor;
      } else {
        var [, end2] = Range.edges(at);
        if (!voids && Editor.void(editor, {
          at: end2
        })) {
          return;
        }
        var pointRef3 = Editor.pointRef(editor, end2);
        Transforms.delete(editor, {
          at
        });
        at = pointRef3.unref();
      }
    } else if (Path.isPath(at)) {
      at = Editor.start(editor, at);
    }
    if (!voids && Editor.void(editor, {
      at
    })) {
      return;
    }
    var inlineElementMatch = Editor.above(editor, {
      at,
      match: (n3) => Element2.isElement(n3) && Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    if (inlineElementMatch) {
      var [, _inlinePath] = inlineElementMatch;
      if (Editor.isEnd(editor, at, _inlinePath)) {
        var after3 = Editor.after(editor, _inlinePath);
        at = after3;
      } else if (Editor.isStart(editor, at, _inlinePath)) {
        var before3 = Editor.before(editor, _inlinePath);
        at = before3;
      }
    }
    var blockMatch = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      at,
      voids
    });
    var [, blockPath] = blockMatch;
    var isBlockStart = Editor.isStart(editor, at, blockPath);
    var isBlockEnd = Editor.isEnd(editor, at, blockPath);
    var isBlockEmpty = isBlockStart && isBlockEnd;
    var mergeStart = !isBlockStart || isBlockStart && isBlockEnd;
    var mergeEnd = !isBlockEnd;
    var [, firstPath] = Node.first({
      children: fragment2
    }, []);
    var [, lastPath] = Node.last({
      children: fragment2
    }, []);
    var matches = [];
    var matcher = (_ref) => {
      var [n3, p] = _ref;
      var isRoot = p.length === 0;
      if (isRoot) {
        return false;
      }
      if (isBlockEmpty) {
        return true;
      }
      if (mergeStart && Path.isAncestor(p, firstPath) && Element2.isElement(n3) && !editor.isVoid(n3) && !editor.isInline(n3)) {
        return false;
      }
      if (mergeEnd && Path.isAncestor(p, lastPath) && Element2.isElement(n3) && !editor.isVoid(n3) && !editor.isInline(n3)) {
        return false;
      }
      return true;
    };
    for (var entry of Node.nodes({
      children: fragment2
    }, {
      pass: matcher
    })) {
      if (matcher(entry)) {
        matches.push(entry);
      }
    }
    var starts = [];
    var middles = [];
    var ends = [];
    var starting = true;
    var hasBlocks2 = false;
    for (var [node3] of matches) {
      if (Element2.isElement(node3) && !editor.isInline(node3)) {
        starting = false;
        hasBlocks2 = true;
        middles.push(node3);
      } else if (starting) {
        starts.push(node3);
      } else {
        ends.push(node3);
      }
    }
    var [inlineMatch] = Editor.nodes(editor, {
      at,
      match: (n3) => Text.isText(n3) || Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    var [, inlinePath] = inlineMatch;
    var isInlineStart = Editor.isStart(editor, at, inlinePath);
    var isInlineEnd = Editor.isEnd(editor, at, inlinePath);
    var middleRef = Editor.pathRef(editor, isBlockEnd && !ends.length ? Path.next(blockPath) : blockPath);
    var endRef = Editor.pathRef(editor, isInlineEnd ? Path.next(inlinePath) : inlinePath);
    Transforms.splitNodes(editor, {
      at,
      match: (n3) => hasBlocks2 ? Element2.isElement(n3) && Editor.isBlock(editor, n3) : Text.isText(n3) || Editor.isInline(editor, n3),
      mode: hasBlocks2 ? "lowest" : "highest",
      always: hasBlocks2 && (!isBlockStart || starts.length > 0) && (!isBlockEnd || ends.length > 0),
      voids
    });
    var startRef = Editor.pathRef(editor, !isInlineStart || isInlineStart && isInlineEnd ? Path.next(inlinePath) : inlinePath);
    Transforms.insertNodes(editor, starts, {
      at: startRef.current,
      match: (n3) => Text.isText(n3) || Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    if (isBlockEmpty && !starts.length && middles.length && !ends.length) {
      Transforms.delete(editor, {
        at: blockPath,
        voids
      });
    }
    Transforms.insertNodes(editor, middles, {
      at: middleRef.current,
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      mode: "lowest",
      voids
    });
    Transforms.insertNodes(editor, ends, {
      at: endRef.current,
      match: (n3) => Text.isText(n3) || Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    if (!options.at) {
      var path3;
      if (ends.length > 0 && endRef.current) {
        path3 = Path.previous(endRef.current);
      } else if (middles.length > 0 && middleRef.current) {
        path3 = Path.previous(middleRef.current);
      } else if (startRef.current) {
        path3 = Path.previous(startRef.current);
      }
      if (path3) {
        var _end = Editor.end(editor, path3);
        Transforms.select(editor, _end);
      }
    }
    startRef.unref();
    middleRef.unref();
    endRef.unref();
  });
};
var collapse = function collapse2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    edge = "anchor"
  } = options;
  var {
    selection
  } = editor;
  if (!selection) {
    return;
  } else if (edge === "anchor") {
    Transforms.select(editor, selection.anchor);
  } else if (edge === "focus") {
    Transforms.select(editor, selection.focus);
  } else if (edge === "start") {
    var [start2] = Range.edges(selection);
    Transforms.select(editor, start2);
  } else if (edge === "end") {
    var [, end2] = Range.edges(selection);
    Transforms.select(editor, end2);
  }
};
var deselect = (editor) => {
  var {
    selection
  } = editor;
  if (selection) {
    editor.apply({
      type: "set_selection",
      properties: selection,
      newProperties: null
    });
  }
};
var move = function move2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    selection
  } = editor;
  var {
    distance = 1,
    unit = "character",
    reverse = false
  } = options;
  var {
    edge = null
  } = options;
  if (!selection) {
    return;
  }
  if (edge === "start") {
    edge = Range.isBackward(selection) ? "focus" : "anchor";
  }
  if (edge === "end") {
    edge = Range.isBackward(selection) ? "anchor" : "focus";
  }
  var {
    anchor,
    focus
  } = selection;
  var opts = {
    distance,
    unit,
    ignoreNonSelectable: true
  };
  var props = {};
  if (edge == null || edge === "anchor") {
    var point3 = reverse ? Editor.before(editor, anchor, opts) : Editor.after(editor, anchor, opts);
    if (point3) {
      props.anchor = point3;
    }
  }
  if (edge == null || edge === "focus") {
    var _point = reverse ? Editor.before(editor, focus, opts) : Editor.after(editor, focus, opts);
    if (_point) {
      props.focus = _point;
    }
  }
  Transforms.setSelection(editor, props);
};
var select = (editor, target) => {
  var {
    selection
  } = editor;
  target = Editor.range(editor, target);
  if (selection) {
    Transforms.setSelection(editor, target);
    return;
  }
  if (!Range.isRange(target)) {
    throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Scrubber.stringify(target)));
  }
  editor.apply({
    type: "set_selection",
    properties: selection,
    newProperties: target
  });
};
function ownKeys$1(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$1(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$1(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$1(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var setPoint = function setPoint2(editor, props) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    selection
  } = editor;
  var {
    edge = "both"
  } = options;
  if (!selection) {
    return;
  }
  if (edge === "start") {
    edge = Range.isBackward(selection) ? "focus" : "anchor";
  }
  if (edge === "end") {
    edge = Range.isBackward(selection) ? "anchor" : "focus";
  }
  var {
    anchor,
    focus
  } = selection;
  var point3 = edge === "anchor" ? anchor : focus;
  Transforms.setSelection(editor, {
    [edge === "anchor" ? "anchor" : "focus"]: _objectSpread$1(_objectSpread$1({}, point3), props)
  });
};
var setSelection = (editor, props) => {
  var {
    selection
  } = editor;
  var oldProps = {};
  var newProps = {};
  if (!selection) {
    return;
  }
  for (var k in props) {
    if (k === "anchor" && props.anchor != null && !Point.equals(props.anchor, selection.anchor) || k === "focus" && props.focus != null && !Point.equals(props.focus, selection.focus) || k !== "anchor" && k !== "focus" && props[k] !== selection[k]) {
      oldProps[k] = selection[k];
      newProps[k] = props[k];
    }
  }
  if (Object.keys(oldProps).length > 0) {
    editor.apply({
      type: "set_selection",
      properties: oldProps,
      newProperties: newProps
    });
  }
};
var insertNodes = function insertNodes2(editor, nodes2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      hanging = false,
      voids = false,
      mode = "lowest"
    } = options;
    var {
      at,
      match,
      select: select2
    } = options;
    if (Node.isNode(nodes2)) {
      nodes2 = [nodes2];
    }
    if (nodes2.length === 0) {
      return;
    }
    var [node3] = nodes2;
    if (!at) {
      at = getDefaultInsertLocation(editor);
      if (select2 !== false) {
        select2 = true;
      }
    }
    if (select2 == null) {
      select2 = false;
    }
    if (Range.isRange(at)) {
      if (!hanging) {
        at = Editor.unhangRange(editor, at, {
          voids
        });
      }
      if (Range.isCollapsed(at)) {
        at = at.anchor;
      } else {
        var [, end2] = Range.edges(at);
        var pointRef3 = Editor.pointRef(editor, end2);
        Transforms.delete(editor, {
          at
        });
        at = pointRef3.unref();
      }
    }
    if (Point.isPoint(at)) {
      if (match == null) {
        if (Text.isText(node3)) {
          match = (n3) => Text.isText(n3);
        } else if (editor.isInline(node3)) {
          match = (n3) => Text.isText(n3) || Editor.isInline(editor, n3);
        } else {
          match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
        }
      }
      var [entry] = Editor.nodes(editor, {
        at: at.path,
        match,
        mode,
        voids
      });
      if (entry) {
        var [, matchPath2] = entry;
        var pathRef3 = Editor.pathRef(editor, matchPath2);
        var isAtEnd = Editor.isEnd(editor, at, matchPath2);
        Transforms.splitNodes(editor, {
          at,
          match,
          mode,
          voids
        });
        var path3 = pathRef3.unref();
        at = isAtEnd ? Path.next(path3) : path3;
      } else {
        return;
      }
    }
    var parentPath = Path.parent(at);
    var index = at[at.length - 1];
    if (!voids && Editor.void(editor, {
      at: parentPath
    })) {
      return;
    }
    for (var _node of nodes2) {
      var _path = parentPath.concat(index);
      index++;
      editor.apply({
        type: "insert_node",
        path: _path,
        node: _node
      });
      at = Path.next(at);
    }
    at = Path.previous(at);
    if (select2) {
      var point3 = Editor.end(editor, at);
      if (point3) {
        Transforms.select(editor, point3);
      }
    }
  });
};
var liftNodes = function liftNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      at = editor.selection,
      mode = "lowest",
      voids = false
    } = options;
    var {
      match
    } = options;
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (!at) {
      return;
    }
    var matches = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(matches, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    for (var pathRef3 of pathRefs2) {
      var path3 = pathRef3.unref();
      if (path3.length < 2) {
        throw new Error("Cannot lift node at a path [".concat(path3, "] because it has a depth of less than `2`."));
      }
      var parentNodeEntry = Editor.node(editor, Path.parent(path3));
      var [parent3, parentPath] = parentNodeEntry;
      var index = path3[path3.length - 1];
      var {
        length
      } = parent3.children;
      if (length === 1) {
        var toPath = Path.next(parentPath);
        Transforms.moveNodes(editor, {
          at: path3,
          to: toPath,
          voids
        });
        Transforms.removeNodes(editor, {
          at: parentPath,
          voids
        });
      } else if (index === 0) {
        Transforms.moveNodes(editor, {
          at: path3,
          to: parentPath,
          voids
        });
      } else if (index === length - 1) {
        var _toPath = Path.next(parentPath);
        Transforms.moveNodes(editor, {
          at: path3,
          to: _toPath,
          voids
        });
      } else {
        var splitPath = Path.next(path3);
        var _toPath2 = Path.next(parentPath);
        Transforms.splitNodes(editor, {
          at: splitPath,
          voids
        });
        Transforms.moveNodes(editor, {
          at: path3,
          to: _toPath2,
          voids
        });
      }
    }
  });
};
var _excluded = ["text"];
var _excluded2 = ["children"];
var hasSingleChildNest = (editor, node3) => {
  if (Element2.isElement(node3)) {
    var element = node3;
    if (Editor.isVoid(editor, node3)) {
      return true;
    } else if (element.children.length === 1) {
      return hasSingleChildNest(editor, element.children[0]);
    } else {
      return false;
    }
  } else if (Editor.isEditor(node3)) {
    return false;
  } else {
    return true;
  }
};
var mergeNodes = function mergeNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      match,
      at = editor.selection
    } = options;
    var {
      hanging = false,
      voids = false,
      mode = "lowest"
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      if (Path.isPath(at)) {
        var [parent3] = Editor.parent(editor, at);
        match = (n3) => parent3.children.includes(n3);
      } else {
        match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
      }
    }
    if (!hanging && Range.isRange(at)) {
      at = Editor.unhangRange(editor, at, {
        voids
      });
    }
    if (Range.isRange(at)) {
      if (Range.isCollapsed(at)) {
        at = at.anchor;
      } else {
        var [, end2] = Range.edges(at);
        var pointRef3 = Editor.pointRef(editor, end2);
        Transforms.delete(editor, {
          at
        });
        at = pointRef3.unref();
        if (options.at == null) {
          Transforms.select(editor, at);
        }
      }
    }
    var [current2] = Editor.nodes(editor, {
      at,
      match,
      voids,
      mode
    });
    var prev = Editor.previous(editor, {
      at,
      match,
      voids,
      mode
    });
    if (!current2 || !prev) {
      return;
    }
    var [node3, path3] = current2;
    var [prevNode, prevPath] = prev;
    if (path3.length === 0 || prevPath.length === 0) {
      return;
    }
    var newPath = Path.next(prevPath);
    var commonPath = Path.common(path3, prevPath);
    var isPreviousSibling = Path.isSibling(path3, prevPath);
    var levels2 = Array.from(Editor.levels(editor, {
      at: path3
    }), (_ref) => {
      var [n3] = _ref;
      return n3;
    }).slice(commonPath.length).slice(0, -1);
    var emptyAncestor = Editor.above(editor, {
      at: path3,
      mode: "highest",
      match: (n3) => levels2.includes(n3) && hasSingleChildNest(editor, n3)
    });
    var emptyRef = emptyAncestor && Editor.pathRef(editor, emptyAncestor[1]);
    var properties;
    var position;
    if (Text.isText(node3) && Text.isText(prevNode)) {
      var rest = _objectWithoutProperties(node3, _excluded);
      position = prevNode.text.length;
      properties = rest;
    } else if (Element2.isElement(node3) && Element2.isElement(prevNode)) {
      var rest = _objectWithoutProperties(node3, _excluded2);
      position = prevNode.children.length;
      properties = rest;
    } else {
      throw new Error("Cannot merge the node at path [".concat(path3, "] with the previous sibling because it is not the same kind: ").concat(Scrubber.stringify(node3), " ").concat(Scrubber.stringify(prevNode)));
    }
    if (!isPreviousSibling) {
      Transforms.moveNodes(editor, {
        at: path3,
        to: newPath,
        voids
      });
    }
    if (emptyRef) {
      Transforms.removeNodes(editor, {
        at: emptyRef.current,
        voids
      });
    }
    if (Element2.isElement(prevNode) && Editor.isEmpty(editor, prevNode) || Text.isText(prevNode) && prevNode.text === "" && prevPath[prevPath.length - 1] !== 0) {
      Transforms.removeNodes(editor, {
        at: prevPath,
        voids
      });
    } else {
      editor.apply({
        type: "merge_node",
        path: newPath,
        position,
        properties
      });
    }
    if (emptyRef) {
      emptyRef.unref();
    }
  });
};
var moveNodes = (editor, options) => {
  Editor.withoutNormalizing(editor, () => {
    var {
      to,
      at = editor.selection,
      mode = "lowest",
      voids = false
    } = options;
    var {
      match
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    var toRef = Editor.pathRef(editor, to);
    var targets = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(targets, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    for (var pathRef3 of pathRefs2) {
      var path3 = pathRef3.unref();
      var newPath = toRef.current;
      if (path3.length !== 0) {
        editor.apply({
          type: "move_node",
          path: path3,
          newPath
        });
      }
      if (toRef.current && Path.isSibling(newPath, path3) && Path.isAfter(newPath, path3)) {
        toRef.current = Path.next(toRef.current);
      }
    }
    toRef.unref();
  });
};
var removeNodes = function removeNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      hanging = false,
      voids = false,
      mode = "lowest"
    } = options;
    var {
      at = editor.selection,
      match
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (!hanging && Range.isRange(at)) {
      at = Editor.unhangRange(editor, at, {
        voids
      });
    }
    var depths = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(depths, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    for (var pathRef3 of pathRefs2) {
      var path3 = pathRef3.unref();
      if (path3) {
        var [node3] = Editor.node(editor, path3);
        editor.apply({
          type: "remove_node",
          path: path3,
          node: node3
        });
      }
    }
  });
};
var setNodes = function setNodes2(editor, props) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      match,
      at = editor.selection,
      compare,
      merge
    } = options;
    var {
      hanging = false,
      mode = "lowest",
      split = false,
      voids = false
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (!hanging && Range.isRange(at)) {
      at = Editor.unhangRange(editor, at, {
        voids
      });
    }
    if (split && Range.isRange(at)) {
      if (Range.isCollapsed(at) && Editor.leaf(editor, at.anchor)[0].text.length > 0) {
        return;
      }
      var rangeRef3 = Editor.rangeRef(editor, at, {
        affinity: "inward"
      });
      var [start2, end2] = Range.edges(at);
      var splitMode = mode === "lowest" ? "lowest" : "highest";
      var endAtEndOfNode = Editor.isEnd(editor, end2, end2.path);
      Transforms.splitNodes(editor, {
        at: end2,
        match,
        mode: splitMode,
        voids,
        always: !endAtEndOfNode
      });
      var startAtStartOfNode = Editor.isStart(editor, start2, start2.path);
      Transforms.splitNodes(editor, {
        at: start2,
        match,
        mode: splitMode,
        voids,
        always: !startAtStartOfNode
      });
      at = rangeRef3.unref();
      if (options.at == null) {
        Transforms.select(editor, at);
      }
    }
    if (!compare) {
      compare = (prop, nodeProp) => prop !== nodeProp;
    }
    for (var [node3, path3] of Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    })) {
      var properties = {};
      var newProperties = {};
      if (path3.length === 0) {
        continue;
      }
      var hasChanges = false;
      for (var k in props) {
        if (k === "children" || k === "text") {
          continue;
        }
        if (compare(props[k], node3[k])) {
          hasChanges = true;
          if (node3.hasOwnProperty(k))
            properties[k] = node3[k];
          if (merge) {
            if (props[k] != null)
              newProperties[k] = merge(node3[k], props[k]);
          } else {
            if (props[k] != null)
              newProperties[k] = props[k];
          }
        }
      }
      if (hasChanges) {
        editor.apply({
          type: "set_node",
          path: path3,
          properties,
          newProperties
        });
      }
    }
  });
};
var deleteRange = (editor, range2) => {
  if (Range.isCollapsed(range2)) {
    return range2.anchor;
  } else {
    var [, end2] = Range.edges(range2);
    var pointRef3 = Editor.pointRef(editor, end2);
    Transforms.delete(editor, {
      at: range2
    });
    return pointRef3.unref();
  }
};
var splitNodes = function splitNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      mode = "lowest",
      voids = false
    } = options;
    var {
      match,
      at = editor.selection,
      height = 0,
      always = false
    } = options;
    if (match == null) {
      match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (Range.isRange(at)) {
      at = deleteRange(editor, at);
    }
    if (Path.isPath(at)) {
      var path3 = at;
      var point3 = Editor.point(editor, path3);
      var [parent3] = Editor.parent(editor, path3);
      match = (n3) => n3 === parent3;
      height = point3.path.length - path3.length + 1;
      at = point3;
      always = true;
    }
    if (!at) {
      return;
    }
    var beforeRef = Editor.pointRef(editor, at, {
      affinity: "backward"
    });
    var afterRef;
    try {
      var [highest] = Editor.nodes(editor, {
        at,
        match,
        mode,
        voids
      });
      if (!highest) {
        return;
      }
      var voidMatch = Editor.void(editor, {
        at,
        mode: "highest"
      });
      var nudge = 0;
      if (!voids && voidMatch) {
        var [voidNode, voidPath] = voidMatch;
        if (Element2.isElement(voidNode) && editor.isInline(voidNode)) {
          var after3 = Editor.after(editor, voidPath);
          if (!after3) {
            var text = {
              text: ""
            };
            var afterPath = Path.next(voidPath);
            Transforms.insertNodes(editor, text, {
              at: afterPath,
              voids
            });
            after3 = Editor.point(editor, afterPath);
          }
          at = after3;
          always = true;
        }
        var siblingHeight = at.path.length - voidPath.length;
        height = siblingHeight + 1;
        always = true;
      }
      afterRef = Editor.pointRef(editor, at);
      var depth = at.path.length - height;
      var [, highestPath] = highest;
      var lowestPath = at.path.slice(0, depth);
      var position = height === 0 ? at.offset : at.path[depth] + nudge;
      for (var [node3, _path] of Editor.levels(editor, {
        at: lowestPath,
        reverse: true,
        voids
      })) {
        var split = false;
        if (_path.length < highestPath.length || _path.length === 0 || !voids && Element2.isElement(node3) && Editor.isVoid(editor, node3)) {
          break;
        }
        var _point = beforeRef.current;
        var isEnd2 = Editor.isEnd(editor, _point, _path);
        if (always || !beforeRef || !Editor.isEdge(editor, _point, _path)) {
          split = true;
          var properties = Node.extractProps(node3);
          editor.apply({
            type: "split_node",
            path: _path,
            position,
            properties
          });
        }
        position = _path[_path.length - 1] + (split || isEnd2 ? 1 : 0);
      }
      if (options.at == null) {
        var _point2 = afterRef.current || Editor.end(editor, []);
        Transforms.select(editor, _point2);
      }
    } finally {
      var _afterRef;
      beforeRef.unref();
      (_afterRef = afterRef) === null || _afterRef === void 0 || _afterRef.unref();
    }
  });
};
var unsetNodes = function unsetNodes2(editor, props) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  if (!Array.isArray(props)) {
    props = [props];
  }
  var obj = {};
  for (var key of props) {
    obj[key] = null;
  }
  Transforms.setNodes(editor, obj, options);
};
var unwrapNodes = function unwrapNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      mode = "lowest",
      split = false,
      voids = false
    } = options;
    var {
      at = editor.selection,
      match
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (Path.isPath(at)) {
      at = Editor.range(editor, at);
    }
    var rangeRef3 = Range.isRange(at) ? Editor.rangeRef(editor, at) : null;
    var matches = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(
      matches,
      (_ref) => {
        var [, p] = _ref;
        return Editor.pathRef(editor, p);
      }
      // unwrapNode will call liftNode which does not support splitting the node when nested.
      // If we do not reverse the order and call it from top to the bottom, it will remove all blocks
      // that wrap target node. So we reverse the order.
    ).reverse();
    var _loop = function _loop2() {
      var path3 = pathRef3.unref();
      var [node3] = Editor.node(editor, path3);
      var range2 = Editor.range(editor, path3);
      if (split && rangeRef3) {
        range2 = Range.intersection(rangeRef3.current, range2);
      }
      Transforms.liftNodes(editor, {
        at: range2,
        match: (n3) => Element2.isAncestor(node3) && node3.children.includes(n3),
        voids
      });
    };
    for (var pathRef3 of pathRefs2) {
      _loop();
    }
    if (rangeRef3) {
      rangeRef3.unref();
    }
  });
};
function ownKeys(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var wrapNodes = function wrapNodes2(editor, element) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      mode = "lowest",
      split = false,
      voids = false
    } = options;
    var {
      match,
      at = editor.selection
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      if (Path.isPath(at)) {
        match = matchPath(editor, at);
      } else if (editor.isInline(element)) {
        match = (n3) => Element2.isElement(n3) && Editor.isInline(editor, n3) || Text.isText(n3);
      } else {
        match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
      }
    }
    if (split && Range.isRange(at)) {
      var [start2, end2] = Range.edges(at);
      var rangeRef3 = Editor.rangeRef(editor, at, {
        affinity: "inward"
      });
      Transforms.splitNodes(editor, {
        at: end2,
        match,
        voids
      });
      Transforms.splitNodes(editor, {
        at: start2,
        match,
        voids
      });
      at = rangeRef3.unref();
      if (options.at == null) {
        Transforms.select(editor, at);
      }
    }
    var roots = Array.from(Editor.nodes(editor, {
      at,
      match: editor.isInline(element) ? (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3) : (n3) => Editor.isEditor(n3),
      mode: "lowest",
      voids
    }));
    var _loop = function _loop2() {
      var a = Range.isRange(at) ? Range.intersection(at, Editor.range(editor, rootPath)) : at;
      if (!a) {
        return 0;
      }
      var matches = Array.from(Editor.nodes(editor, {
        at: a,
        match,
        mode,
        voids
      }));
      if (matches.length > 0) {
        var [first2] = matches;
        var last2 = matches[matches.length - 1];
        var [, firstPath] = first2;
        var [, lastPath] = last2;
        if (firstPath.length === 0 && lastPath.length === 0) {
          return 0;
        }
        var commonPath = Path.equals(firstPath, lastPath) ? Path.parent(firstPath) : Path.common(firstPath, lastPath);
        var range2 = Editor.range(editor, firstPath, lastPath);
        var commonNodeEntry = Editor.node(editor, commonPath);
        var [commonNode] = commonNodeEntry;
        var depth = commonPath.length + 1;
        var wrapperPath = Path.next(lastPath.slice(0, depth));
        var wrapper = _objectSpread(_objectSpread({}, element), {}, {
          children: []
        });
        Transforms.insertNodes(editor, wrapper, {
          at: wrapperPath,
          voids
        });
        Transforms.moveNodes(editor, {
          at: range2,
          match: (n3) => Element2.isAncestor(commonNode) && commonNode.children.includes(n3),
          to: wrapperPath.concat(0),
          voids
        });
      }
    }, _ret;
    for (var [, rootPath] of roots) {
      _ret = _loop();
      if (_ret === 0)
        continue;
    }
  });
};
var createEditor = () => {
  var editor = {
    children: [],
    operations: [],
    selection: null,
    marks: null,
    isElementReadOnly: () => false,
    isInline: () => false,
    isSelectable: () => true,
    isVoid: () => false,
    markableVoid: () => false,
    onChange: () => {
    },
    // Core
    apply: function apply$1() {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      return apply(editor, ...args);
    },
    // Editor
    addMark: function addMark$1() {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }
      return addMark(editor, ...args);
    },
    deleteBackward: function deleteBackward$1() {
      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        args[_key3] = arguments[_key3];
      }
      return deleteBackward(editor, ...args);
    },
    deleteForward: function deleteForward$1() {
      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
        args[_key4] = arguments[_key4];
      }
      return deleteForward(editor, ...args);
    },
    deleteFragment: function deleteFragment$1() {
      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
        args[_key5] = arguments[_key5];
      }
      return deleteFragment(editor, ...args);
    },
    getFragment: function getFragment$1() {
      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
        args[_key6] = arguments[_key6];
      }
      return getFragment(editor, ...args);
    },
    insertBreak: function insertBreak$1() {
      for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
        args[_key7] = arguments[_key7];
      }
      return insertBreak(editor, ...args);
    },
    insertSoftBreak: function insertSoftBreak$1() {
      for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
        args[_key8] = arguments[_key8];
      }
      return insertSoftBreak(editor, ...args);
    },
    insertFragment: function insertFragment$1() {
      for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
        args[_key9] = arguments[_key9];
      }
      return insertFragment(editor, ...args);
    },
    insertNode: function insertNode$1() {
      for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
        args[_key10] = arguments[_key10];
      }
      return insertNode(editor, ...args);
    },
    insertText: function insertText$1() {
      for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {
        args[_key11] = arguments[_key11];
      }
      return insertText(editor, ...args);
    },
    normalizeNode: function normalizeNode$1() {
      for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {
        args[_key12] = arguments[_key12];
      }
      return normalizeNode(editor, ...args);
    },
    removeMark: function removeMark$1() {
      for (var _len13 = arguments.length, args = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {
        args[_key13] = arguments[_key13];
      }
      return removeMark(editor, ...args);
    },
    getDirtyPaths: function getDirtyPaths$1() {
      for (var _len14 = arguments.length, args = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {
        args[_key14] = arguments[_key14];
      }
      return getDirtyPaths(editor, ...args);
    },
    shouldNormalize: function shouldNormalize$1() {
      for (var _len15 = arguments.length, args = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {
        args[_key15] = arguments[_key15];
      }
      return shouldNormalize(editor, ...args);
    },
    // Editor interface
    above: function above$1() {
      for (var _len16 = arguments.length, args = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {
        args[_key16] = arguments[_key16];
      }
      return above(editor, ...args);
    },
    after: function after$1() {
      for (var _len17 = arguments.length, args = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {
        args[_key17] = arguments[_key17];
      }
      return after(editor, ...args);
    },
    before: function before$1() {
      for (var _len18 = arguments.length, args = new Array(_len18), _key18 = 0; _key18 < _len18; _key18++) {
        args[_key18] = arguments[_key18];
      }
      return before(editor, ...args);
    },
    collapse: function collapse$1() {
      for (var _len19 = arguments.length, args = new Array(_len19), _key19 = 0; _key19 < _len19; _key19++) {
        args[_key19] = arguments[_key19];
      }
      return collapse(editor, ...args);
    },
    delete: function _delete() {
      for (var _len20 = arguments.length, args = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {
        args[_key20] = arguments[_key20];
      }
      return deleteText(editor, ...args);
    },
    deselect: function deselect$1() {
      for (var _len21 = arguments.length, args = new Array(_len21), _key21 = 0; _key21 < _len21; _key21++) {
        args[_key21] = arguments[_key21];
      }
      return deselect(editor, ...args);
    },
    edges: function edges$1() {
      for (var _len22 = arguments.length, args = new Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {
        args[_key22] = arguments[_key22];
      }
      return edges(editor, ...args);
    },
    elementReadOnly: function elementReadOnly$1() {
      for (var _len23 = arguments.length, args = new Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {
        args[_key23] = arguments[_key23];
      }
      return elementReadOnly(editor, ...args);
    },
    end: function end$1() {
      for (var _len24 = arguments.length, args = new Array(_len24), _key24 = 0; _key24 < _len24; _key24++) {
        args[_key24] = arguments[_key24];
      }
      return end(editor, ...args);
    },
    first: function first$1() {
      for (var _len25 = arguments.length, args = new Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {
        args[_key25] = arguments[_key25];
      }
      return first(editor, ...args);
    },
    fragment: function fragment$1() {
      for (var _len26 = arguments.length, args = new Array(_len26), _key26 = 0; _key26 < _len26; _key26++) {
        args[_key26] = arguments[_key26];
      }
      return fragment(editor, ...args);
    },
    getMarks: function getMarks() {
      for (var _len27 = arguments.length, args = new Array(_len27), _key27 = 0; _key27 < _len27; _key27++) {
        args[_key27] = arguments[_key27];
      }
      return marks(editor, ...args);
    },
    hasBlocks: function hasBlocks$1() {
      for (var _len28 = arguments.length, args = new Array(_len28), _key28 = 0; _key28 < _len28; _key28++) {
        args[_key28] = arguments[_key28];
      }
      return hasBlocks(editor, ...args);
    },
    hasInlines: function hasInlines$1() {
      for (var _len29 = arguments.length, args = new Array(_len29), _key29 = 0; _key29 < _len29; _key29++) {
        args[_key29] = arguments[_key29];
      }
      return hasInlines(editor, ...args);
    },
    hasPath: function hasPath$1() {
      for (var _len30 = arguments.length, args = new Array(_len30), _key30 = 0; _key30 < _len30; _key30++) {
        args[_key30] = arguments[_key30];
      }
      return hasPath(editor, ...args);
    },
    hasTexts: function hasTexts$1() {
      for (var _len31 = arguments.length, args = new Array(_len31), _key31 = 0; _key31 < _len31; _key31++) {
        args[_key31] = arguments[_key31];
      }
      return hasTexts(editor, ...args);
    },
    insertNodes: function insertNodes$1() {
      for (var _len32 = arguments.length, args = new Array(_len32), _key32 = 0; _key32 < _len32; _key32++) {
        args[_key32] = arguments[_key32];
      }
      return insertNodes(editor, ...args);
    },
    isBlock: function isBlock$1() {
      for (var _len33 = arguments.length, args = new Array(_len33), _key33 = 0; _key33 < _len33; _key33++) {
        args[_key33] = arguments[_key33];
      }
      return isBlock2(editor, ...args);
    },
    isEdge: function isEdge$1() {
      for (var _len34 = arguments.length, args = new Array(_len34), _key34 = 0; _key34 < _len34; _key34++) {
        args[_key34] = arguments[_key34];
      }
      return isEdge(editor, ...args);
    },
    isEmpty: function isEmpty$1() {
      for (var _len35 = arguments.length, args = new Array(_len35), _key35 = 0; _key35 < _len35; _key35++) {
        args[_key35] = arguments[_key35];
      }
      return isEmpty(editor, ...args);
    },
    isEnd: function isEnd$1() {
      for (var _len36 = arguments.length, args = new Array(_len36), _key36 = 0; _key36 < _len36; _key36++) {
        args[_key36] = arguments[_key36];
      }
      return isEnd(editor, ...args);
    },
    isNormalizing: function isNormalizing$1() {
      for (var _len37 = arguments.length, args = new Array(_len37), _key37 = 0; _key37 < _len37; _key37++) {
        args[_key37] = arguments[_key37];
      }
      return isNormalizing(editor, ...args);
    },
    isStart: function isStart$1() {
      for (var _len38 = arguments.length, args = new Array(_len38), _key38 = 0; _key38 < _len38; _key38++) {
        args[_key38] = arguments[_key38];
      }
      return isStart(editor, ...args);
    },
    last: function last$1() {
      for (var _len39 = arguments.length, args = new Array(_len39), _key39 = 0; _key39 < _len39; _key39++) {
        args[_key39] = arguments[_key39];
      }
      return last(editor, ...args);
    },
    leaf: function leaf$1() {
      for (var _len40 = arguments.length, args = new Array(_len40), _key40 = 0; _key40 < _len40; _key40++) {
        args[_key40] = arguments[_key40];
      }
      return leaf(editor, ...args);
    },
    levels: function levels$1() {
      for (var _len41 = arguments.length, args = new Array(_len41), _key41 = 0; _key41 < _len41; _key41++) {
        args[_key41] = arguments[_key41];
      }
      return levels(editor, ...args);
    },
    liftNodes: function liftNodes$1() {
      for (var _len42 = arguments.length, args = new Array(_len42), _key42 = 0; _key42 < _len42; _key42++) {
        args[_key42] = arguments[_key42];
      }
      return liftNodes(editor, ...args);
    },
    mergeNodes: function mergeNodes$1() {
      for (var _len43 = arguments.length, args = new Array(_len43), _key43 = 0; _key43 < _len43; _key43++) {
        args[_key43] = arguments[_key43];
      }
      return mergeNodes(editor, ...args);
    },
    move: function move$1() {
      for (var _len44 = arguments.length, args = new Array(_len44), _key44 = 0; _key44 < _len44; _key44++) {
        args[_key44] = arguments[_key44];
      }
      return move(editor, ...args);
    },
    moveNodes: function moveNodes$1() {
      for (var _len45 = arguments.length, args = new Array(_len45), _key45 = 0; _key45 < _len45; _key45++) {
        args[_key45] = arguments[_key45];
      }
      return moveNodes(editor, ...args);
    },
    next: function next$1() {
      for (var _len46 = arguments.length, args = new Array(_len46), _key46 = 0; _key46 < _len46; _key46++) {
        args[_key46] = arguments[_key46];
      }
      return next(editor, ...args);
    },
    node: function node$1() {
      for (var _len47 = arguments.length, args = new Array(_len47), _key47 = 0; _key47 < _len47; _key47++) {
        args[_key47] = arguments[_key47];
      }
      return node(editor, ...args);
    },
    nodes: function nodes$1() {
      for (var _len48 = arguments.length, args = new Array(_len48), _key48 = 0; _key48 < _len48; _key48++) {
        args[_key48] = arguments[_key48];
      }
      return nodes(editor, ...args);
    },
    normalize: function normalize$1() {
      for (var _len49 = arguments.length, args = new Array(_len49), _key49 = 0; _key49 < _len49; _key49++) {
        args[_key49] = arguments[_key49];
      }
      return normalize(editor, ...args);
    },
    parent: function parent$1() {
      for (var _len50 = arguments.length, args = new Array(_len50), _key50 = 0; _key50 < _len50; _key50++) {
        args[_key50] = arguments[_key50];
      }
      return parent(editor, ...args);
    },
    path: function path$1() {
      for (var _len51 = arguments.length, args = new Array(_len51), _key51 = 0; _key51 < _len51; _key51++) {
        args[_key51] = arguments[_key51];
      }
      return path(editor, ...args);
    },
    pathRef: function pathRef$1() {
      for (var _len52 = arguments.length, args = new Array(_len52), _key52 = 0; _key52 < _len52; _key52++) {
        args[_key52] = arguments[_key52];
      }
      return pathRef(editor, ...args);
    },
    pathRefs: function pathRefs$1() {
      for (var _len53 = arguments.length, args = new Array(_len53), _key53 = 0; _key53 < _len53; _key53++) {
        args[_key53] = arguments[_key53];
      }
      return pathRefs(editor, ...args);
    },
    point: function point$1() {
      for (var _len54 = arguments.length, args = new Array(_len54), _key54 = 0; _key54 < _len54; _key54++) {
        args[_key54] = arguments[_key54];
      }
      return point(editor, ...args);
    },
    pointRef: function pointRef$1() {
      for (var _len55 = arguments.length, args = new Array(_len55), _key55 = 0; _key55 < _len55; _key55++) {
        args[_key55] = arguments[_key55];
      }
      return pointRef(editor, ...args);
    },
    pointRefs: function pointRefs$1() {
      for (var _len56 = arguments.length, args = new Array(_len56), _key56 = 0; _key56 < _len56; _key56++) {
        args[_key56] = arguments[_key56];
      }
      return pointRefs(editor, ...args);
    },
    positions: function positions$1() {
      for (var _len57 = arguments.length, args = new Array(_len57), _key57 = 0; _key57 < _len57; _key57++) {
        args[_key57] = arguments[_key57];
      }
      return positions(editor, ...args);
    },
    previous: function previous$1() {
      for (var _len58 = arguments.length, args = new Array(_len58), _key58 = 0; _key58 < _len58; _key58++) {
        args[_key58] = arguments[_key58];
      }
      return previous(editor, ...args);
    },
    range: function range$1() {
      for (var _len59 = arguments.length, args = new Array(_len59), _key59 = 0; _key59 < _len59; _key59++) {
        args[_key59] = arguments[_key59];
      }
      return range(editor, ...args);
    },
    rangeRef: function rangeRef$1() {
      for (var _len60 = arguments.length, args = new Array(_len60), _key60 = 0; _key60 < _len60; _key60++) {
        args[_key60] = arguments[_key60];
      }
      return rangeRef(editor, ...args);
    },
    rangeRefs: function rangeRefs$1() {
      for (var _len61 = arguments.length, args = new Array(_len61), _key61 = 0; _key61 < _len61; _key61++) {
        args[_key61] = arguments[_key61];
      }
      return rangeRefs(editor, ...args);
    },
    removeNodes: function removeNodes$1() {
      for (var _len62 = arguments.length, args = new Array(_len62), _key62 = 0; _key62 < _len62; _key62++) {
        args[_key62] = arguments[_key62];
      }
      return removeNodes(editor, ...args);
    },
    select: function select$1() {
      for (var _len63 = arguments.length, args = new Array(_len63), _key63 = 0; _key63 < _len63; _key63++) {
        args[_key63] = arguments[_key63];
      }
      return select(editor, ...args);
    },
    setNodes: function setNodes$1() {
      for (var _len64 = arguments.length, args = new Array(_len64), _key64 = 0; _key64 < _len64; _key64++) {
        args[_key64] = arguments[_key64];
      }
      return setNodes(editor, ...args);
    },
    setNormalizing: function setNormalizing$1() {
      for (var _len65 = arguments.length, args = new Array(_len65), _key65 = 0; _key65 < _len65; _key65++) {
        args[_key65] = arguments[_key65];
      }
      return setNormalizing(editor, ...args);
    },
    setPoint: function setPoint$1() {
      for (var _len66 = arguments.length, args = new Array(_len66), _key66 = 0; _key66 < _len66; _key66++) {
        args[_key66] = arguments[_key66];
      }
      return setPoint(editor, ...args);
    },
    setSelection: function setSelection$1() {
      for (var _len67 = arguments.length, args = new Array(_len67), _key67 = 0; _key67 < _len67; _key67++) {
        args[_key67] = arguments[_key67];
      }
      return setSelection(editor, ...args);
    },
    splitNodes: function splitNodes$1() {
      for (var _len68 = arguments.length, args = new Array(_len68), _key68 = 0; _key68 < _len68; _key68++) {
        args[_key68] = arguments[_key68];
      }
      return splitNodes(editor, ...args);
    },
    start: function start$1() {
      for (var _len69 = arguments.length, args = new Array(_len69), _key69 = 0; _key69 < _len69; _key69++) {
        args[_key69] = arguments[_key69];
      }
      return start(editor, ...args);
    },
    string: function string$1() {
      for (var _len70 = arguments.length, args = new Array(_len70), _key70 = 0; _key70 < _len70; _key70++) {
        args[_key70] = arguments[_key70];
      }
      return string(editor, ...args);
    },
    unhangRange: function unhangRange$1() {
      for (var _len71 = arguments.length, args = new Array(_len71), _key71 = 0; _key71 < _len71; _key71++) {
        args[_key71] = arguments[_key71];
      }
      return unhangRange(editor, ...args);
    },
    unsetNodes: function unsetNodes$1() {
      for (var _len72 = arguments.length, args = new Array(_len72), _key72 = 0; _key72 < _len72; _key72++) {
        args[_key72] = arguments[_key72];
      }
      return unsetNodes(editor, ...args);
    },
    unwrapNodes: function unwrapNodes$1() {
      for (var _len73 = arguments.length, args = new Array(_len73), _key73 = 0; _key73 < _len73; _key73++) {
        args[_key73] = arguments[_key73];
      }
      return unwrapNodes(editor, ...args);
    },
    void: function _void() {
      for (var _len74 = arguments.length, args = new Array(_len74), _key74 = 0; _key74 < _len74; _key74++) {
        args[_key74] = arguments[_key74];
      }
      return getVoid(editor, ...args);
    },
    withoutNormalizing: function withoutNormalizing$1() {
      for (var _len75 = arguments.length, args = new Array(_len75), _key75 = 0; _key75 < _len75; _key75++) {
        args[_key75] = arguments[_key75];
      }
      return withoutNormalizing(editor, ...args);
    },
    wrapNodes: function wrapNodes$1() {
      for (var _len76 = arguments.length, args = new Array(_len76), _key76 = 0; _key76 < _len76; _key76++) {
        args[_key76] = arguments[_key76];
      }
      return wrapNodes(editor, ...args);
    }
  };
  return editor;
};

// ../node_modules/slate-react/dist/index.es.js
var import_direction = __toESM(require_direction());
var import_debounce = __toESM(require_debounce());
var import_throttle = __toESM(require_throttle());
var import_react = __toESM(require_react());

// ../node_modules/compute-scroll-into-view/dist/index.mjs
function t(t2) {
  return "object" == typeof t2 && null != t2 && 1 === t2.nodeType;
}
function e(t2, e2) {
  return (!e2 || "hidden" !== t2) && "visible" !== t2 && "clip" !== t2;
}
function n(t2, n3) {
  if (t2.clientHeight < t2.scrollHeight || t2.clientWidth < t2.scrollWidth) {
    var r2 = getComputedStyle(t2, null);
    return e(r2.overflowY, n3) || e(r2.overflowX, n3) || function(t3) {
      var e2 = function(t4) {
        if (!t4.ownerDocument || !t4.ownerDocument.defaultView)
          return null;
        try {
          return t4.ownerDocument.defaultView.frameElement;
        } catch (t5) {
          return null;
        }
      }(t3);
      return !!e2 && (e2.clientHeight < t3.scrollHeight || e2.clientWidth < t3.scrollWidth);
    }(t2);
  }
  return false;
}
function r(t2, e2, n3, r2, i2, o, l, d) {
  return o < t2 && l > e2 || o > t2 && l < e2 ? 0 : o <= t2 && d <= n3 || l >= e2 && d >= n3 ? o - t2 - r2 : l > e2 && d < n3 || o < t2 && d > n3 ? l - e2 + i2 : 0;
}
var i = function(e2, i2) {
  var o = window, l = i2.scrollMode, d = i2.block, f = i2.inline, h = i2.boundary, u = i2.skipOverflowHiddenElements, s = "function" == typeof h ? h : function(t2) {
    return t2 !== h;
  };
  if (!t(e2))
    throw new TypeError("Invalid target");
  for (var a, c, g = document.scrollingElement || document.documentElement, p = [], m = e2; t(m) && s(m); ) {
    if ((m = null == (c = (a = m).parentElement) ? a.getRootNode().host || null : c) === g) {
      p.push(m);
      break;
    }
    null != m && m === document.body && n(m) && !n(document.documentElement) || null != m && n(m, u) && p.push(m);
  }
  for (var w = o.visualViewport ? o.visualViewport.width : innerWidth, v = o.visualViewport ? o.visualViewport.height : innerHeight, W = window.scrollX || pageXOffset, H = window.scrollY || pageYOffset, b = e2.getBoundingClientRect(), y = b.height, E = b.width, M = b.top, V = b.right, x = b.bottom, I = b.left, C = "start" === d || "nearest" === d ? M : "end" === d ? x : M + y / 2, R = "center" === f ? I + E / 2 : "end" === f ? V : I, T = [], k = 0; k < p.length; k++) {
    var B = p[k], D = B.getBoundingClientRect(), O = D.height, X = D.width, Y = D.top, L = D.right, S = D.bottom, j = D.left;
    if ("if-needed" === l && M >= 0 && I >= 0 && x <= v && V <= w && M >= Y && x <= S && I >= j && V <= L)
      return T;
    var N = getComputedStyle(B), q = parseInt(N.borderLeftWidth, 10), z = parseInt(N.borderTopWidth, 10), A = parseInt(N.borderRightWidth, 10), F = parseInt(N.borderBottomWidth, 10), G = 0, J = 0, K = "offsetWidth" in B ? B.offsetWidth - B.clientWidth - q - A : 0, P = "offsetHeight" in B ? B.offsetHeight - B.clientHeight - z - F : 0, Q = "offsetWidth" in B ? 0 === B.offsetWidth ? 0 : X / B.offsetWidth : 0, U = "offsetHeight" in B ? 0 === B.offsetHeight ? 0 : O / B.offsetHeight : 0;
    if (g === B)
      G = "start" === d ? C : "end" === d ? C - v : "nearest" === d ? r(H, H + v, v, z, F, H + C, H + C + y, y) : C - v / 2, J = "start" === f ? R : "center" === f ? R - w / 2 : "end" === f ? R - w : r(W, W + w, w, q, A, W + R, W + R + E, E), G = Math.max(0, G + H), J = Math.max(0, J + W);
    else {
      G = "start" === d ? C - Y - z : "end" === d ? C - S + F + P : "nearest" === d ? r(Y, S, O, z, F + P, C, C + y, y) : C - (Y + O / 2) + P / 2, J = "start" === f ? R - j - q : "center" === f ? R - (j + X / 2) + K / 2 : "end" === f ? R - L + A + K : r(j, L, X, q, A + K, R, R + E, E);
      var Z = B.scrollLeft, $ = B.scrollTop;
      C += $ - (G = Math.max(0, Math.min($ + G / U, B.scrollHeight - O / U + P))), R += Z - (J = Math.max(0, Math.min(Z + J / Q, B.scrollWidth - X / Q + K)));
    }
    T.push({ el: B, top: G, left: J });
  }
  return T;
};

// ../node_modules/scroll-into-view-if-needed/es/index.js
function isOptionsObject(options) {
  return options === Object(options) && Object.keys(options).length !== 0;
}
function defaultBehavior(actions, behavior) {
  if (behavior === void 0) {
    behavior = "auto";
  }
  var canSmoothScroll = "scrollBehavior" in document.body.style;
  actions.forEach(function(_ref) {
    var el = _ref.el, top = _ref.top, left = _ref.left;
    if (el.scroll && canSmoothScroll) {
      el.scroll({
        top,
        left,
        behavior
      });
    } else {
      el.scrollTop = top;
      el.scrollLeft = left;
    }
  });
}
function getOptions(options) {
  if (options === false) {
    return {
      block: "end",
      inline: "nearest"
    };
  }
  if (isOptionsObject(options)) {
    return options;
  }
  return {
    block: "start",
    inline: "nearest"
  };
}
function scrollIntoView(target, options) {
  var isTargetAttached = target.isConnected || target.ownerDocument.documentElement.contains(target);
  if (isOptionsObject(options) && typeof options.behavior === "function") {
    return options.behavior(isTargetAttached ? i(target, options) : []);
  }
  if (!isTargetAttached) {
    return;
  }
  var computeOptions = getOptions(options);
  return defaultBehavior(i(target, computeOptions), computeOptions.behavior);
}
var es_default = scrollIntoView;

// ../node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js
var resizeObservers = [];

// ../node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js
var hasActiveObservations = function() {
  return resizeObservers.some(function(ro) {
    return ro.activeTargets.length > 0;
  });
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js
var hasSkippedObservations = function() {
  return resizeObservers.some(function(ro) {
    return ro.skippedTargets.length > 0;
  });
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js
var msg = "ResizeObserver loop completed with undelivered notifications.";
var deliverResizeLoopError = function() {
  var event;
  if (typeof ErrorEvent === "function") {
    event = new ErrorEvent("error", {
      message: msg
    });
  } else {
    event = document.createEvent("Event");
    event.initEvent("error", false, false);
    event.message = msg;
  }
  window.dispatchEvent(event);
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js
var ResizeObserverBoxOptions;
(function(ResizeObserverBoxOptions2) {
  ResizeObserverBoxOptions2["BORDER_BOX"] = "border-box";
  ResizeObserverBoxOptions2["CONTENT_BOX"] = "content-box";
  ResizeObserverBoxOptions2["DEVICE_PIXEL_CONTENT_BOX"] = "device-pixel-content-box";
})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));

// ../node_modules/@juggle/resize-observer/lib/utils/freeze.js
var freeze2 = function(obj) {
  return Object.freeze(obj);
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js
var ResizeObserverSize = /* @__PURE__ */ function() {
  function ResizeObserverSize2(inlineSize, blockSize) {
    this.inlineSize = inlineSize;
    this.blockSize = blockSize;
    freeze2(this);
  }
  return ResizeObserverSize2;
}();

// ../node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js
var DOMRectReadOnly = function() {
  function DOMRectReadOnly2(x, y, width, height) {
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.top = this.y;
    this.left = this.x;
    this.bottom = this.top + this.height;
    this.right = this.left + this.width;
    return freeze2(this);
  }
  DOMRectReadOnly2.prototype.toJSON = function() {
    var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;
    return { x, y, top, right, bottom, left, width, height };
  };
  DOMRectReadOnly2.fromRect = function(rectangle) {
    return new DOMRectReadOnly2(rectangle.x, rectangle.y, rectangle.width, rectangle.height);
  };
  return DOMRectReadOnly2;
}();

// ../node_modules/@juggle/resize-observer/lib/utils/element.js
var isSVG = function(target) {
  return target instanceof SVGElement && "getBBox" in target;
};
var isHidden = function(target) {
  if (isSVG(target)) {
    var _a = target.getBBox(), width = _a.width, height = _a.height;
    return !width && !height;
  }
  var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;
  return !(offsetWidth || offsetHeight || target.getClientRects().length);
};
var isElement2 = function(obj) {
  var _a;
  if (obj instanceof Element) {
    return true;
  }
  var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;
  return !!(scope && obj instanceof scope.Element);
};
var isReplacedElement = function(target) {
  switch (target.tagName) {
    case "INPUT":
      if (target.type !== "image") {
        break;
      }
    case "VIDEO":
    case "AUDIO":
    case "EMBED":
    case "OBJECT":
    case "CANVAS":
    case "IFRAME":
    case "IMG":
      return true;
  }
  return false;
};

// ../node_modules/@juggle/resize-observer/lib/utils/global.js
var global2 = typeof window !== "undefined" ? window : {};

// ../node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js
var cache = /* @__PURE__ */ new WeakMap();
var scrollRegexp = /auto|scroll/;
var verticalRegexp = /^tb|vertical/;
var IE = /msie|trident/i.test(global2.navigator && global2.navigator.userAgent);
var parseDimension = function(pixel) {
  return parseFloat(pixel || "0");
};
var size = function(inlineSize, blockSize, switchSizes) {
  if (inlineSize === void 0) {
    inlineSize = 0;
  }
  if (blockSize === void 0) {
    blockSize = 0;
  }
  if (switchSizes === void 0) {
    switchSizes = false;
  }
  return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);
};
var zeroBoxes = freeze2({
  devicePixelContentBoxSize: size(),
  borderBoxSize: size(),
  contentBoxSize: size(),
  contentRect: new DOMRectReadOnly(0, 0, 0, 0)
});
var calculateBoxSizes = function(target, forceRecalculation) {
  if (forceRecalculation === void 0) {
    forceRecalculation = false;
  }
  if (cache.has(target) && !forceRecalculation) {
    return cache.get(target);
  }
  if (isHidden(target)) {
    cache.set(target, zeroBoxes);
    return zeroBoxes;
  }
  var cs = getComputedStyle(target);
  var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();
  var removePadding = !IE && cs.boxSizing === "border-box";
  var switchSizes = verticalRegexp.test(cs.writingMode || "");
  var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || "");
  var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || "");
  var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);
  var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);
  var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);
  var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);
  var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);
  var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);
  var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);
  var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);
  var horizontalPadding = paddingLeft + paddingRight;
  var verticalPadding = paddingTop + paddingBottom;
  var horizontalBorderArea = borderLeft + borderRight;
  var verticalBorderArea = borderTop + borderBottom;
  var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;
  var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;
  var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;
  var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;
  var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;
  var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;
  var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;
  var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;
  var boxes = freeze2({
    devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),
    borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),
    contentBoxSize: size(contentWidth, contentHeight, switchSizes),
    contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)
  });
  cache.set(target, boxes);
  return boxes;
};
var calculateBoxSize = function(target, observedBox, forceRecalculation) {
  var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;
  switch (observedBox) {
    case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:
      return devicePixelContentBoxSize;
    case ResizeObserverBoxOptions.BORDER_BOX:
      return borderBoxSize;
    default:
      return contentBoxSize;
  }
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js
var ResizeObserverEntry = /* @__PURE__ */ function() {
  function ResizeObserverEntry2(target) {
    var boxes = calculateBoxSizes(target);
    this.target = target;
    this.contentRect = boxes.contentRect;
    this.borderBoxSize = freeze2([boxes.borderBoxSize]);
    this.contentBoxSize = freeze2([boxes.contentBoxSize]);
    this.devicePixelContentBoxSize = freeze2([boxes.devicePixelContentBoxSize]);
  }
  return ResizeObserverEntry2;
}();

// ../node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js
var calculateDepthForNode = function(node3) {
  if (isHidden(node3)) {
    return Infinity;
  }
  var depth = 0;
  var parent3 = node3.parentNode;
  while (parent3) {
    depth += 1;
    parent3 = parent3.parentNode;
  }
  return depth;
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js
var broadcastActiveObservations = function() {
  var shallowestDepth = Infinity;
  var callbacks2 = [];
  resizeObservers.forEach(function processObserver(ro) {
    if (ro.activeTargets.length === 0) {
      return;
    }
    var entries = [];
    ro.activeTargets.forEach(function processTarget(ot) {
      var entry = new ResizeObserverEntry(ot.target);
      var targetDepth = calculateDepthForNode(ot.target);
      entries.push(entry);
      ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);
      if (targetDepth < shallowestDepth) {
        shallowestDepth = targetDepth;
      }
    });
    callbacks2.push(function resizeObserverCallback() {
      ro.callback.call(ro.observer, entries, ro.observer);
    });
    ro.activeTargets.splice(0, ro.activeTargets.length);
  });
  for (var _i = 0, callbacks_1 = callbacks2; _i < callbacks_1.length; _i++) {
    var callback = callbacks_1[_i];
    callback();
  }
  return shallowestDepth;
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js
var gatherActiveObservationsAtDepth = function(depth) {
  resizeObservers.forEach(function processObserver(ro) {
    ro.activeTargets.splice(0, ro.activeTargets.length);
    ro.skippedTargets.splice(0, ro.skippedTargets.length);
    ro.observationTargets.forEach(function processTarget(ot) {
      if (ot.isActive()) {
        if (calculateDepthForNode(ot.target) > depth) {
          ro.activeTargets.push(ot);
        } else {
          ro.skippedTargets.push(ot);
        }
      }
    });
  });
};

// ../node_modules/@juggle/resize-observer/lib/utils/process.js
var process2 = function() {
  var depth = 0;
  gatherActiveObservationsAtDepth(depth);
  while (hasActiveObservations()) {
    depth = broadcastActiveObservations();
    gatherActiveObservationsAtDepth(depth);
  }
  if (hasSkippedObservations()) {
    deliverResizeLoopError();
  }
  return depth > 0;
};

// ../node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js
var trigger;
var callbacks = [];
var notify = function() {
  return callbacks.splice(0).forEach(function(cb) {
    return cb();
  });
};
var queueMicroTask = function(callback) {
  if (!trigger) {
    var toggle_1 = 0;
    var el_1 = document.createTextNode("");
    var config = { characterData: true };
    new MutationObserver(function() {
      return notify();
    }).observe(el_1, config);
    trigger = function() {
      el_1.textContent = "".concat(toggle_1 ? toggle_1-- : toggle_1++);
    };
  }
  callbacks.push(callback);
  trigger();
};

// ../node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js
var queueResizeObserver = function(cb) {
  queueMicroTask(function ResizeObserver2() {
    requestAnimationFrame(cb);
  });
};

// ../node_modules/@juggle/resize-observer/lib/utils/scheduler.js
var watching = 0;
var isWatching = function() {
  return !!watching;
};
var CATCH_PERIOD = 250;
var observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };
var events = [
  "resize",
  "load",
  "transitionend",
  "animationend",
  "animationstart",
  "animationiteration",
  "keyup",
  "keydown",
  "mouseup",
  "mousedown",
  "mouseover",
  "mouseout",
  "blur",
  "focus"
];
var time = function(timeout) {
  if (timeout === void 0) {
    timeout = 0;
  }
  return Date.now() + timeout;
};
var scheduled = false;
var Scheduler = function() {
  function Scheduler2() {
    var _this = this;
    this.stopped = true;
    this.listener = function() {
      return _this.schedule();
    };
  }
  Scheduler2.prototype.run = function(timeout) {
    var _this = this;
    if (timeout === void 0) {
      timeout = CATCH_PERIOD;
    }
    if (scheduled) {
      return;
    }
    scheduled = true;
    var until = time(timeout);
    queueResizeObserver(function() {
      var elementsHaveResized = false;
      try {
        elementsHaveResized = process2();
      } finally {
        scheduled = false;
        timeout = until - time();
        if (!isWatching()) {
          return;
        }
        if (elementsHaveResized) {
          _this.run(1e3);
        } else if (timeout > 0) {
          _this.run(timeout);
        } else {
          _this.start();
        }
      }
    });
  };
  Scheduler2.prototype.schedule = function() {
    this.stop();
    this.run();
  };
  Scheduler2.prototype.observe = function() {
    var _this = this;
    var cb = function() {
      return _this.observer && _this.observer.observe(document.body, observerConfig);
    };
    document.body ? cb() : global2.addEventListener("DOMContentLoaded", cb);
  };
  Scheduler2.prototype.start = function() {
    var _this = this;
    if (this.stopped) {
      this.stopped = false;
      this.observer = new MutationObserver(this.listener);
      this.observe();
      events.forEach(function(name) {
        return global2.addEventListener(name, _this.listener, true);
      });
    }
  };
  Scheduler2.prototype.stop = function() {
    var _this = this;
    if (!this.stopped) {
      this.observer && this.observer.disconnect();
      events.forEach(function(name) {
        return global2.removeEventListener(name, _this.listener, true);
      });
      this.stopped = true;
    }
  };
  return Scheduler2;
}();
var scheduler = new Scheduler();
var updateCount = function(n3) {
  !watching && n3 > 0 && scheduler.start();
  watching += n3;
  !watching && scheduler.stop();
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObservation.js
var skipNotifyOnElement = function(target) {
  return !isSVG(target) && !isReplacedElement(target) && getComputedStyle(target).display === "inline";
};
var ResizeObservation = function() {
  function ResizeObservation2(target, observedBox) {
    this.target = target;
    this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;
    this.lastReportedSize = {
      inlineSize: 0,
      blockSize: 0
    };
  }
  ResizeObservation2.prototype.isActive = function() {
    var size2 = calculateBoxSize(this.target, this.observedBox, true);
    if (skipNotifyOnElement(this.target)) {
      this.lastReportedSize = size2;
    }
    if (this.lastReportedSize.inlineSize !== size2.inlineSize || this.lastReportedSize.blockSize !== size2.blockSize) {
      return true;
    }
    return false;
  };
  return ResizeObservation2;
}();

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js
var ResizeObserverDetail = /* @__PURE__ */ function() {
  function ResizeObserverDetail2(resizeObserver, callback) {
    this.activeTargets = [];
    this.skippedTargets = [];
    this.observationTargets = [];
    this.observer = resizeObserver;
    this.callback = callback;
  }
  return ResizeObserverDetail2;
}();

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverController.js
var observerMap = /* @__PURE__ */ new WeakMap();
var getObservationIndex = function(observationTargets, target) {
  for (var i2 = 0; i2 < observationTargets.length; i2 += 1) {
    if (observationTargets[i2].target === target) {
      return i2;
    }
  }
  return -1;
};
var ResizeObserverController = function() {
  function ResizeObserverController2() {
  }
  ResizeObserverController2.connect = function(resizeObserver, callback) {
    var detail = new ResizeObserverDetail(resizeObserver, callback);
    observerMap.set(resizeObserver, detail);
  };
  ResizeObserverController2.observe = function(resizeObserver, target, options) {
    var detail = observerMap.get(resizeObserver);
    var firstObservation = detail.observationTargets.length === 0;
    if (getObservationIndex(detail.observationTargets, target) < 0) {
      firstObservation && resizeObservers.push(detail);
      detail.observationTargets.push(new ResizeObservation(target, options && options.box));
      updateCount(1);
      scheduler.schedule();
    }
  };
  ResizeObserverController2.unobserve = function(resizeObserver, target) {
    var detail = observerMap.get(resizeObserver);
    var index = getObservationIndex(detail.observationTargets, target);
    var lastObservation = detail.observationTargets.length === 1;
    if (index >= 0) {
      lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);
      detail.observationTargets.splice(index, 1);
      updateCount(-1);
    }
  };
  ResizeObserverController2.disconnect = function(resizeObserver) {
    var _this = this;
    var detail = observerMap.get(resizeObserver);
    detail.observationTargets.slice().forEach(function(ot) {
      return _this.unobserve(resizeObserver, ot.target);
    });
    detail.activeTargets.splice(0, detail.activeTargets.length);
  };
  return ResizeObserverController2;
}();

// ../node_modules/@juggle/resize-observer/lib/ResizeObserver.js
var ResizeObserver = function() {
  function ResizeObserver2(callback) {
    if (arguments.length === 0) {
      throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");
    }
    if (typeof callback !== "function") {
      throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");
    }
    ResizeObserverController.connect(this, callback);
  }
  ResizeObserver2.prototype.observe = function(target, options) {
    if (arguments.length === 0) {
      throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");
    }
    if (!isElement2(target)) {
      throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");
    }
    ResizeObserverController.observe(this, target, options);
  };
  ResizeObserver2.prototype.unobserve = function(target) {
    if (arguments.length === 0) {
      throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");
    }
    if (!isElement2(target)) {
      throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");
    }
    ResizeObserverController.unobserve(this, target);
  };
  ResizeObserver2.prototype.disconnect = function() {
    ResizeObserverController.disconnect(this);
  };
  ResizeObserver2.toString = function() {
    return "function ResizeObserver () { [polyfill code] }";
  };
  return ResizeObserver2;
}();

// ../node_modules/slate-react/dist/index.es.js
var import_is_hotkey = __toESM(require_lib());
var import_react_dom = __toESM(require_react_dom());
function _defineProperty2(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _objectWithoutPropertiesLoose2(source, excluded) {
  if (source == null)
    return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i2;
  for (i2 = 0; i2 < sourceKeys.length; i2++) {
    key = sourceKeys[i2];
    if (excluded.indexOf(key) >= 0)
      continue;
    target[key] = source[key];
  }
  return target;
}
function _objectWithoutProperties2(source, excluded) {
  if (source == null)
    return {};
  var target = _objectWithoutPropertiesLoose2(source, excluded);
  var key, i2;
  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
    for (i2 = 0; i2 < sourceSymbolKeys.length; i2++) {
      key = sourceSymbolKeys[i2];
      if (excluded.indexOf(key) >= 0)
        continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key))
        continue;
      target[key] = source[key];
    }
  }
  return target;
}
var n2 = 0;
var Key = class {
  constructor() {
    this.id = "".concat(n2++);
  }
};
var NODE_TO_INDEX = /* @__PURE__ */ new WeakMap();
var NODE_TO_PARENT = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_WINDOW = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_ELEMENT = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PLACEHOLDER_ELEMENT = /* @__PURE__ */ new WeakMap();
var ELEMENT_TO_NODE = /* @__PURE__ */ new WeakMap();
var NODE_TO_ELEMENT = /* @__PURE__ */ new WeakMap();
var NODE_TO_KEY = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_KEY_TO_ELEMENT = /* @__PURE__ */ new WeakMap();
var IS_READ_ONLY = /* @__PURE__ */ new WeakMap();
var IS_FOCUSED = /* @__PURE__ */ new WeakMap();
var IS_COMPOSING = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_USER_SELECTION = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_ON_CHANGE = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_SCHEDULE_FLUSH = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_INSERTION_MARKS = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_USER_MARKS = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_DIFFS = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_ACTION = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_SELECTION = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_FORCE_RENDER = /* @__PURE__ */ new WeakMap();
var PLACEHOLDER_SYMBOL = Symbol("placeholder");
var MARK_PLACEHOLDER_SYMBOL = Symbol("mark-placeholder");
var DOMText = globalThis.Text;
var getDefaultView = (value) => {
  return value && value.ownerDocument && value.ownerDocument.defaultView || null;
};
var isDOMComment = (value) => {
  return isDOMNode(value) && value.nodeType === 8;
};
var isDOMElement = (value) => {
  return isDOMNode(value) && value.nodeType === 1;
};
var isDOMNode = (value) => {
  var window2 = getDefaultView(value);
  return !!window2 && value instanceof window2.Node;
};
var isDOMSelection = (value) => {
  var window2 = value && value.anchorNode && getDefaultView(value.anchorNode);
  return !!window2 && value instanceof window2.Selection;
};
var isDOMText = (value) => {
  return isDOMNode(value) && value.nodeType === 3;
};
var isPlainTextOnlyPaste = (event) => {
  return event.clipboardData && event.clipboardData.getData("text/plain") !== "" && event.clipboardData.types.length === 1;
};
var normalizeDOMPoint = (domPoint) => {
  var [node3, offset] = domPoint;
  if (isDOMElement(node3) && node3.childNodes.length) {
    var isLast = offset === node3.childNodes.length;
    var index = isLast ? offset - 1 : offset;
    [node3, index] = getEditableChildAndIndex(node3, index, isLast ? "backward" : "forward");
    isLast = index < offset;
    while (isDOMElement(node3) && node3.childNodes.length) {
      var i2 = isLast ? node3.childNodes.length - 1 : 0;
      node3 = getEditableChild(node3, i2, isLast ? "backward" : "forward");
    }
    offset = isLast && node3.textContent != null ? node3.textContent.length : 0;
  }
  return [node3, offset];
};
var hasShadowRoot = (node3) => {
  var parent3 = node3 && node3.parentNode;
  while (parent3) {
    if (parent3.toString() === "[object ShadowRoot]") {
      return true;
    }
    parent3 = parent3.parentNode;
  }
  return false;
};
var getEditableChildAndIndex = (parent3, index, direction) => {
  var {
    childNodes
  } = parent3;
  var child = childNodes[index];
  var i2 = index;
  var triedForward = false;
  var triedBackward = false;
  while (isDOMComment(child) || isDOMElement(child) && child.childNodes.length === 0 || isDOMElement(child) && child.getAttribute("contenteditable") === "false") {
    if (triedForward && triedBackward) {
      break;
    }
    if (i2 >= childNodes.length) {
      triedForward = true;
      i2 = index - 1;
      direction = "backward";
      continue;
    }
    if (i2 < 0) {
      triedBackward = true;
      i2 = index + 1;
      direction = "forward";
      continue;
    }
    child = childNodes[i2];
    index = i2;
    i2 += direction === "forward" ? 1 : -1;
  }
  return [child, index];
};
var getEditableChild = (parent3, index, direction) => {
  var [child] = getEditableChildAndIndex(parent3, index, direction);
  return child;
};
var getPlainText = (domNode) => {
  var text = "";
  if (isDOMText(domNode) && domNode.nodeValue) {
    return domNode.nodeValue;
  }
  if (isDOMElement(domNode)) {
    for (var childNode of Array.from(domNode.childNodes)) {
      text += getPlainText(childNode);
    }
    var display = getComputedStyle(domNode).getPropertyValue("display");
    if (display === "block" || display === "list" || domNode.tagName === "BR") {
      text += "\n";
    }
  }
  return text;
};
var catchSlateFragment = /data-slate-fragment="(.+?)"/m;
var getSlateFragmentAttribute = (dataTransfer) => {
  var htmlData = dataTransfer.getData("text/html");
  var [, fragment2] = htmlData.match(catchSlateFragment) || [];
  return fragment2;
};
var isTrackedMutation = (editor, mutation, batch) => {
  var {
    target
  } = mutation;
  if (isDOMElement(target) && target.matches('[contentEditable="false"]')) {
    return false;
  }
  var {
    document: document2
  } = ReactEditor.getWindow(editor);
  if (document2.contains(target)) {
    return ReactEditor.hasDOMNode(editor, target, {
      editable: true
    });
  }
  var parentMutation = batch.find((_ref) => {
    var {
      addedNodes,
      removedNodes
    } = _ref;
    for (var node3 of addedNodes) {
      if (node3 === target || node3.contains(target)) {
        return true;
      }
    }
    for (var _node of removedNodes) {
      if (_node === target || _node.contains(target)) {
        return true;
      }
    }
  });
  if (!parentMutation || parentMutation === mutation) {
    return false;
  }
  return isTrackedMutation(editor, parentMutation, batch);
};
var IS_REACT_VERSION_17_OR_ABOVE = parseInt(import_react.default.version.split(".")[0], 10) >= 17;
var IS_IOS = typeof navigator !== "undefined" && typeof window !== "undefined" && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
var IS_APPLE = typeof navigator !== "undefined" && /Mac OS X/.test(navigator.userAgent);
var IS_ANDROID = typeof navigator !== "undefined" && /Android/.test(navigator.userAgent);
var IS_FIREFOX = typeof navigator !== "undefined" && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);
var IS_SAFARI = typeof navigator !== "undefined" && /Version\/[\d\.]+.*Safari/.test(navigator.userAgent);
var IS_EDGE_LEGACY = typeof navigator !== "undefined" && /Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent);
var IS_CHROME = typeof navigator !== "undefined" && /Chrome/i.test(navigator.userAgent);
var IS_CHROME_LEGACY = typeof navigator !== "undefined" && /Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent);
var IS_FIREFOX_LEGACY = typeof navigator !== "undefined" && /^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent);
var IS_UC_MOBILE = typeof navigator !== "undefined" && /.*UCBrowser/.test(navigator.userAgent);
var IS_WECHATBROWSER = typeof navigator !== "undefined" && /.*Wechat/.test(navigator.userAgent);
var CAN_USE_DOM = !!(typeof window !== "undefined" && typeof window.document !== "undefined" && typeof window.document.createElement !== "undefined");
var HAS_BEFORE_INPUT_SUPPORT = !IS_CHROME_LEGACY && !IS_EDGE_LEGACY && // globalThis is undefined in older browsers
typeof globalThis !== "undefined" && globalThis.InputEvent && // @ts-ignore The `getTargetRanges` property isn't recognized.
typeof globalThis.InputEvent.prototype.getTargetRanges === "function";
var ReactEditor = {
  /**
   * Check if the user is currently composing inside the editor.
   */
  isComposing(editor) {
    return !!IS_COMPOSING.get(editor);
  },
  /**
   * Return the host window of the current editor.
   */
  getWindow(editor) {
    var window2 = EDITOR_TO_WINDOW.get(editor);
    if (!window2) {
      throw new Error("Unable to find a host window element for this editor");
    }
    return window2;
  },
  /**
   * Find a key for a Slate node.
   */
  findKey(editor, node3) {
    var key = NODE_TO_KEY.get(node3);
    if (!key) {
      key = new Key();
      NODE_TO_KEY.set(node3, key);
    }
    return key;
  },
  /**
   * Find the path of Slate node.
   */
  findPath(editor, node3) {
    var path3 = [];
    var child = node3;
    while (true) {
      var parent3 = NODE_TO_PARENT.get(child);
      if (parent3 == null) {
        if (Editor.isEditor(child)) {
          return path3;
        } else {
          break;
        }
      }
      var i2 = NODE_TO_INDEX.get(child);
      if (i2 == null) {
        break;
      }
      path3.unshift(i2);
      child = parent3;
    }
    throw new Error("Unable to find the path for Slate node: ".concat(Scrubber.stringify(node3)));
  },
  /**
   * Find the DOM node that implements DocumentOrShadowRoot for the editor.
   */
  findDocumentOrShadowRoot(editor) {
    var el = ReactEditor.toDOMNode(editor, editor);
    var root = el.getRootNode();
    if ((root instanceof Document || root instanceof ShadowRoot) && root.getSelection != null) {
      return root;
    }
    return el.ownerDocument;
  },
  /**
   * Check if the editor is focused.
   */
  isFocused(editor) {
    return !!IS_FOCUSED.get(editor);
  },
  /**
   * Check if the editor is in read-only mode.
   */
  isReadOnly(editor) {
    return !!IS_READ_ONLY.get(editor);
  },
  /**
   * Blur the editor.
   */
  blur(editor) {
    var el = ReactEditor.toDOMNode(editor, editor);
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    IS_FOCUSED.set(editor, false);
    if (root.activeElement === el) {
      el.blur();
    }
  },
  /**
   * Focus the editor.
   */
  focus(editor) {
    var el = ReactEditor.toDOMNode(editor, editor);
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    IS_FOCUSED.set(editor, true);
    if (root.activeElement !== el) {
      el.focus({
        preventScroll: true
      });
    }
  },
  /**
   * Deselect the editor.
   */
  deselect(editor) {
    var {
      selection
    } = editor;
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    var domSelection = root.getSelection();
    if (domSelection && domSelection.rangeCount > 0) {
      domSelection.removeAllRanges();
    }
    if (selection) {
      Transforms.deselect(editor);
    }
  },
  /**
   * Check if a DOM node is within the editor.
   */
  hasDOMNode(editor, target) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    var {
      editable = false
    } = options;
    var editorEl = ReactEditor.toDOMNode(editor, editor);
    var targetEl;
    try {
      targetEl = isDOMElement(target) ? target : target.parentElement;
    } catch (err) {
      if (!err.message.includes('Permission denied to access property "nodeType"')) {
        throw err;
      }
    }
    if (!targetEl) {
      return false;
    }
    return targetEl.closest("[data-slate-editor]") === editorEl && (!editable || targetEl.isContentEditable ? true : typeof targetEl.isContentEditable === "boolean" && // isContentEditable exists only on HTMLElement, and on other nodes it will be undefined
    // this is the core logic that lets you know you got the right editor.selection instead of null when editor is contenteditable="false"(readOnly)
    targetEl.closest('[contenteditable="false"]') === editorEl || !!targetEl.getAttribute("data-slate-zero-width"));
  },
  /**
   * Insert data from a `DataTransfer` into the editor.
   */
  insertData(editor, data) {
    editor.insertData(data);
  },
  /**
   * Insert fragment data from a `DataTransfer` into the editor.
   */
  insertFragmentData(editor, data) {
    return editor.insertFragmentData(data);
  },
  /**
   * Insert text data from a `DataTransfer` into the editor.
   */
  insertTextData(editor, data) {
    return editor.insertTextData(data);
  },
  /**
   * Sets data from the currently selected fragment on a `DataTransfer`.
   */
  setFragmentData(editor, data, originEvent) {
    editor.setFragmentData(data, originEvent);
  },
  /**
   * Find the native DOM element from a Slate node.
   */
  toDOMNode(editor, node3) {
    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);
    var domNode = Editor.isEditor(node3) ? EDITOR_TO_ELEMENT.get(editor) : KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.get(ReactEditor.findKey(editor, node3));
    if (!domNode) {
      throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Scrubber.stringify(node3)));
    }
    return domNode;
  },
  /**
   * Find a native DOM selection point from a Slate point.
   */
  toDOMPoint(editor, point3) {
    var [node3] = Editor.node(editor, point3.path);
    var el = ReactEditor.toDOMNode(editor, node3);
    var domPoint;
    if (Editor.void(editor, {
      at: point3
    })) {
      point3 = {
        path: point3.path,
        offset: 0
      };
    }
    var selector = "[data-slate-string], [data-slate-zero-width]";
    var texts = Array.from(el.querySelectorAll(selector));
    var start2 = 0;
    for (var i2 = 0; i2 < texts.length; i2++) {
      var text = texts[i2];
      var domNode = text.childNodes[0];
      if (domNode == null || domNode.textContent == null) {
        continue;
      }
      var {
        length
      } = domNode.textContent;
      var attr = text.getAttribute("data-slate-length");
      var trueLength = attr == null ? length : parseInt(attr, 10);
      var end2 = start2 + trueLength;
      var nextText = texts[i2 + 1];
      if (point3.offset === end2 && nextText !== null && nextText !== void 0 && nextText.hasAttribute("data-slate-mark-placeholder")) {
        var _nextText$textContent;
        var domText = nextText.childNodes[0];
        domPoint = [
          // COMPAT: If we don't explicity set the dom point to be on the actual
          // dom text element, chrome will put the selection behind the actual dom
          // text element, causing domRange.getBoundingClientRect() calls on a collapsed
          // selection to return incorrect zero values (https://bugs.chromium.org/p/chromium/issues/detail?id=435438)
          // which will cause issues when scrolling to it.
          domText instanceof DOMText ? domText : nextText,
          (_nextText$textContent = nextText.textContent) !== null && _nextText$textContent !== void 0 && _nextText$textContent.startsWith("\uFEFF") ? 1 : 0
        ];
        break;
      }
      if (point3.offset <= end2) {
        var offset = Math.min(length, Math.max(0, point3.offset - start2));
        domPoint = [domNode, offset];
        break;
      }
      start2 = end2;
    }
    if (!domPoint) {
      throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Scrubber.stringify(point3)));
    }
    return domPoint;
  },
  /**
   * Find a native DOM range from a Slate `range`.
   *
   * Notice: the returned range will always be ordinal regardless of the direction of Slate `range` due to DOM API limit.
   *
   * there is no way to create a reverse DOM Range using Range.setStart/setEnd
   * according to https://dom.spec.whatwg.org/#concept-range-bp-set.
   */
  toDOMRange(editor, range2) {
    var {
      anchor,
      focus
    } = range2;
    var isBackward = Range.isBackward(range2);
    var domAnchor = ReactEditor.toDOMPoint(editor, anchor);
    var domFocus = Range.isCollapsed(range2) ? domAnchor : ReactEditor.toDOMPoint(editor, focus);
    var window2 = ReactEditor.getWindow(editor);
    var domRange = window2.document.createRange();
    var [startNode, startOffset] = isBackward ? domFocus : domAnchor;
    var [endNode, endOffset] = isBackward ? domAnchor : domFocus;
    var startEl = isDOMElement(startNode) ? startNode : startNode.parentElement;
    var isStartAtZeroWidth = !!startEl.getAttribute("data-slate-zero-width");
    var endEl = isDOMElement(endNode) ? endNode : endNode.parentElement;
    var isEndAtZeroWidth = !!endEl.getAttribute("data-slate-zero-width");
    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset);
    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset);
    return domRange;
  },
  /**
   * Find a Slate node from a native DOM `element`.
   */
  toSlateNode(editor, domNode) {
    var domEl = isDOMElement(domNode) ? domNode : domNode.parentElement;
    if (domEl && !domEl.hasAttribute("data-slate-node")) {
      domEl = domEl.closest("[data-slate-node]");
    }
    var node3 = domEl ? ELEMENT_TO_NODE.get(domEl) : null;
    if (!node3) {
      throw new Error("Cannot resolve a Slate node from DOM node: ".concat(domEl));
    }
    return node3;
  },
  /**
   * Get the target range from a DOM `event`.
   */
  findEventRange(editor, event) {
    if ("nativeEvent" in event) {
      event = event.nativeEvent;
    }
    var {
      clientX: x,
      clientY: y,
      target
    } = event;
    if (x == null || y == null) {
      throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(event));
    }
    var node3 = ReactEditor.toSlateNode(editor, event.target);
    var path3 = ReactEditor.findPath(editor, node3);
    if (Element2.isElement(node3) && Editor.isVoid(editor, node3)) {
      var rect = target.getBoundingClientRect();
      var isPrev = editor.isInline(node3) ? x - rect.left < rect.left + rect.width - x : y - rect.top < rect.top + rect.height - y;
      var edge = Editor.point(editor, path3, {
        edge: isPrev ? "start" : "end"
      });
      var point3 = isPrev ? Editor.before(editor, edge) : Editor.after(editor, edge);
      if (point3) {
        var _range = Editor.range(editor, point3);
        return _range;
      }
    }
    var domRange;
    var {
      document: document2
    } = ReactEditor.getWindow(editor);
    if (document2.caretRangeFromPoint) {
      domRange = document2.caretRangeFromPoint(x, y);
    } else {
      var position = document2.caretPositionFromPoint(x, y);
      if (position) {
        domRange = document2.createRange();
        domRange.setStart(position.offsetNode, position.offset);
        domRange.setEnd(position.offsetNode, position.offset);
      }
    }
    if (!domRange) {
      throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(event));
    }
    var range2 = ReactEditor.toSlateRange(editor, domRange, {
      exactMatch: false,
      suppressThrow: false
    });
    return range2;
  },
  /**
   * Find a Slate point from a DOM selection's `domNode` and `domOffset`.
   */
  toSlatePoint(editor, domPoint, options) {
    var {
      exactMatch,
      suppressThrow
    } = options;
    var [nearestNode, nearestOffset] = exactMatch ? domPoint : normalizeDOMPoint(domPoint);
    var parentNode = nearestNode.parentNode;
    var textNode = null;
    var offset = 0;
    if (parentNode) {
      var _domNode$textContent, _domNode$textContent2;
      var editorEl = ReactEditor.toDOMNode(editor, editor);
      var potentialVoidNode = parentNode.closest('[data-slate-void="true"]');
      var voidNode = potentialVoidNode && editorEl.contains(potentialVoidNode) ? potentialVoidNode : null;
      var leafNode = parentNode.closest("[data-slate-leaf]");
      var domNode = null;
      if (leafNode) {
        textNode = leafNode.closest('[data-slate-node="text"]');
        if (textNode) {
          var window2 = ReactEditor.getWindow(editor);
          var range2 = window2.document.createRange();
          range2.setStart(textNode, 0);
          range2.setEnd(nearestNode, nearestOffset);
          var contents = range2.cloneContents();
          var removals = [...Array.prototype.slice.call(contents.querySelectorAll("[data-slate-zero-width]")), ...Array.prototype.slice.call(contents.querySelectorAll("[contenteditable=false]"))];
          removals.forEach((el) => {
            if (IS_ANDROID && !exactMatch && el.hasAttribute("data-slate-zero-width") && el.textContent.length > 0 && el.textContext !== "\uFEFF") {
              if (el.textContent.startsWith("\uFEFF")) {
                el.textContent = el.textContent.slice(1);
              }
              return;
            }
            el.parentNode.removeChild(el);
          });
          offset = contents.textContent.length;
          domNode = textNode;
        }
      } else if (voidNode) {
        var leafNodes = voidNode.querySelectorAll("[data-slate-leaf]");
        for (var index = 0; index < leafNodes.length; index++) {
          var current2 = leafNodes[index];
          if (ReactEditor.hasDOMNode(editor, current2)) {
            leafNode = current2;
            break;
          }
        }
        if (!leafNode) {
          offset = 1;
        } else {
          textNode = leafNode.closest('[data-slate-node="text"]');
          domNode = leafNode;
          offset = domNode.textContent.length;
          domNode.querySelectorAll("[data-slate-zero-width]").forEach((el) => {
            offset -= el.textContent.length;
          });
        }
      }
      if (domNode && offset === domNode.textContent.length && // COMPAT: Android IMEs might remove the zero width space while composing,
      // and we don't add it for line-breaks.
      IS_ANDROID && domNode.getAttribute("data-slate-zero-width") === "z" && (_domNode$textContent = domNode.textContent) !== null && _domNode$textContent !== void 0 && _domNode$textContent.startsWith("\uFEFF") && (parentNode.hasAttribute("data-slate-zero-width") || IS_FIREFOX && (_domNode$textContent2 = domNode.textContent) !== null && _domNode$textContent2 !== void 0 && _domNode$textContent2.endsWith("\n\n"))) {
        offset--;
      }
    }
    if (IS_ANDROID && !textNode && !exactMatch) {
      var node3 = parentNode.hasAttribute("data-slate-node") ? parentNode : parentNode.closest("[data-slate-node]");
      if (node3 && ReactEditor.hasDOMNode(editor, node3, {
        editable: true
      })) {
        var _slateNode = ReactEditor.toSlateNode(editor, node3);
        var {
          path: _path,
          offset: _offset
        } = Editor.start(editor, ReactEditor.findPath(editor, _slateNode));
        if (!node3.querySelector("[data-slate-leaf]")) {
          _offset = nearestOffset;
        }
        return {
          path: _path,
          offset: _offset
        };
      }
    }
    if (!textNode) {
      if (suppressThrow) {
        return null;
      }
      throw new Error("Cannot resolve a Slate point from DOM point: ".concat(domPoint));
    }
    var slateNode = ReactEditor.toSlateNode(editor, textNode);
    var path3 = ReactEditor.findPath(editor, slateNode);
    return {
      path: path3,
      offset
    };
  },
  /**
   * Find a Slate range from a DOM range or selection.
   */
  toSlateRange(editor, domRange, options) {
    var {
      exactMatch,
      suppressThrow
    } = options;
    var el = isDOMSelection(domRange) ? domRange.anchorNode : domRange.startContainer;
    var anchorNode;
    var anchorOffset;
    var focusNode;
    var focusOffset;
    var isCollapsed;
    if (el) {
      if (isDOMSelection(domRange)) {
        anchorNode = domRange.anchorNode;
        anchorOffset = domRange.anchorOffset;
        focusNode = domRange.focusNode;
        focusOffset = domRange.focusOffset;
        if (IS_CHROME && hasShadowRoot(anchorNode)) {
          isCollapsed = domRange.anchorNode === domRange.focusNode && domRange.anchorOffset === domRange.focusOffset;
        } else {
          isCollapsed = domRange.isCollapsed;
        }
      } else {
        anchorNode = domRange.startContainer;
        anchorOffset = domRange.startOffset;
        focusNode = domRange.endContainer;
        focusOffset = domRange.endOffset;
        isCollapsed = domRange.collapsed;
      }
    }
    if (anchorNode == null || focusNode == null || anchorOffset == null || focusOffset == null) {
      throw new Error("Cannot resolve a Slate range from DOM range: ".concat(domRange));
    }
    var anchor = ReactEditor.toSlatePoint(editor, [anchorNode, anchorOffset], {
      exactMatch,
      suppressThrow
    });
    if (!anchor) {
      return null;
    }
    var focus = isCollapsed ? anchor : ReactEditor.toSlatePoint(editor, [focusNode, focusOffset], {
      exactMatch,
      suppressThrow
    });
    if (!focus) {
      return null;
    }
    if (IS_FIREFOX && !isCollapsed && anchorNode !== focusNode) {
      var isEnd2 = Editor.isEnd(editor, anchor, anchor.path);
      var isStart2 = Editor.isStart(editor, focus, focus.path);
      if (isEnd2) {
        var after3 = Editor.after(editor, anchor);
        anchor = after3 || anchor;
      }
      if (isStart2) {
        var before3 = Editor.before(editor, focus);
        focus = before3 || focus;
      }
    }
    var range2 = {
      anchor,
      focus
    };
    if (Range.isExpanded(range2) && Range.isForward(range2) && isDOMElement(focusNode) && Editor.void(editor, {
      at: range2.focus,
      mode: "highest"
    })) {
      range2 = Editor.unhangRange(editor, range2, {
        voids: true
      });
    }
    return range2;
  },
  hasRange(editor, range2) {
    var {
      anchor,
      focus
    } = range2;
    return Editor.hasPath(editor, anchor.path) && Editor.hasPath(editor, focus.path);
  },
  /**
   * Check if the target is in the editor.
   */
  hasTarget(editor, target) {
    return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target);
  },
  /**
   * Check if the target is editable and in the editor.
   */
  hasEditableTarget(editor, target) {
    return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target, {
      editable: true
    });
  },
  /**
   * Check if the target can be selectable
   */
  hasSelectableTarget(editor, target) {
    return ReactEditor.hasEditableTarget(editor, target) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, target);
  },
  /**
   * Check if the target is inside void and in an non-readonly editor.
   */
  isTargetInsideNonReadonlyVoid(editor, target) {
    if (IS_READ_ONLY.get(editor))
      return false;
    var slateNode = ReactEditor.hasTarget(editor, target) && ReactEditor.toSlateNode(editor, target);
    return Element2.isElement(slateNode) && Editor.isVoid(editor, slateNode);
  },
  /**
   * Experimental and android specific: Flush all pending diffs and cancel composition at the next possible time.
   */
  androidScheduleFlush(editor) {
    var _EDITOR_TO_SCHEDULE_F;
    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(editor)) === null || _EDITOR_TO_SCHEDULE_F === void 0 ? void 0 : _EDITOR_TO_SCHEDULE_F();
  },
  /**
   * Experimental and android specific: Get pending diffs
   */
  androidPendingDiffs(editor) {
    return EDITOR_TO_PENDING_DIFFS.get(editor);
  }
};
var useIsomorphicLayoutEffect = CAN_USE_DOM ? import_react.useLayoutEffect : import_react.useEffect;
var _excluded$32 = ["anchor", "focus"];
var _excluded2$12 = ["anchor", "focus"];
var shallowCompare = (obj1, obj2) => Object.keys(obj1).length === Object.keys(obj2).length && Object.keys(obj1).every((key) => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]);
var isDecoratorRangeListEqual = (list, another) => {
  if (list.length !== another.length) {
    return false;
  }
  for (var i2 = 0; i2 < list.length; i2++) {
    var range2 = list[i2];
    var other = another[i2];
    var rangeOwnProps = _objectWithoutProperties2(range2, _excluded$32);
    var otherOwnProps = _objectWithoutProperties2(other, _excluded2$12);
    if (!Range.equals(range2, other) || range2[PLACEHOLDER_SYMBOL] !== other[PLACEHOLDER_SYMBOL] || !shallowCompare(rangeOwnProps, otherOwnProps)) {
      return false;
    }
  }
  return true;
};
var String2 = (props) => {
  var {
    isLast,
    leaf: leaf3,
    parent: parent3,
    text
  } = props;
  var editor = useSlateStatic();
  var path3 = ReactEditor.findPath(editor, text);
  var parentPath = Path.parent(path3);
  var isMarkPlaceholder = leaf3[MARK_PLACEHOLDER_SYMBOL] === true;
  if (editor.isVoid(parent3)) {
    return /* @__PURE__ */ import_react.default.createElement(ZeroWidthString, {
      length: Node.string(parent3).length
    });
  }
  if (leaf3.text === "" && parent3.children[parent3.children.length - 1] === text && !editor.isInline(parent3) && Editor.string(editor, parentPath) === "") {
    return /* @__PURE__ */ import_react.default.createElement(ZeroWidthString, {
      isLineBreak: true,
      isMarkPlaceholder
    });
  }
  if (leaf3.text === "") {
    return /* @__PURE__ */ import_react.default.createElement(ZeroWidthString, {
      isMarkPlaceholder
    });
  }
  if (isLast && leaf3.text.slice(-1) === "\n") {
    return /* @__PURE__ */ import_react.default.createElement(TextString, {
      isTrailing: true,
      text: leaf3.text
    });
  }
  return /* @__PURE__ */ import_react.default.createElement(TextString, {
    text: leaf3.text
  });
};
var TextString = (props) => {
  var {
    text,
    isTrailing = false
  } = props;
  var ref = (0, import_react.useRef)(null);
  var getTextContent = () => {
    return "".concat(text !== null && text !== void 0 ? text : "").concat(isTrailing ? "\n" : "");
  };
  useIsomorphicLayoutEffect(() => {
    var textWithTrailing = getTextContent();
    if (ref.current && ref.current.textContent !== textWithTrailing) {
      ref.current.textContent = textWithTrailing;
    }
  });
  if (!ref.current) {
    return /* @__PURE__ */ import_react.default.createElement("span", {
      "data-slate-string": true,
      ref
    }, getTextContent());
  }
  return /* @__PURE__ */ import_react.default.createElement("span", {
    "data-slate-string": true,
    ref
  });
};
var ZeroWidthString = (props) => {
  var {
    length = 0,
    isLineBreak = false,
    isMarkPlaceholder = false
  } = props;
  var attributes = {
    "data-slate-zero-width": isLineBreak ? "n" : "z",
    "data-slate-length": length
  };
  if (isMarkPlaceholder) {
    attributes["data-slate-mark-placeholder"] = true;
  }
  return /* @__PURE__ */ import_react.default.createElement("span", Object.assign({}, attributes), !IS_ANDROID || !isLineBreak ? "\uFEFF" : null, isLineBreak ? /* @__PURE__ */ import_react.default.createElement("br", null) : null);
};
var EditorContext = /* @__PURE__ */ (0, import_react.createContext)(null);
var useSlateStatic = () => {
  var editor = (0, import_react.useContext)(EditorContext);
  if (!editor) {
    throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");
  }
  return editor;
};
var Leaf = (props) => {
  var {
    leaf: leaf3,
    isLast,
    text,
    parent: parent3,
    renderPlaceholder,
    renderLeaf = (props2) => /* @__PURE__ */ import_react.default.createElement(DefaultLeaf, Object.assign({}, props2))
  } = props;
  var lastPlaceholderRef = (0, import_react.useRef)(null);
  var placeholderRef = (0, import_react.useRef)(null);
  var editor = useSlateStatic();
  var placeholderResizeObserver = (0, import_react.useRef)(null);
  (0, import_react.useEffect)(() => {
    return () => {
      if (placeholderResizeObserver.current) {
        placeholderResizeObserver.current.disconnect();
      }
    };
  }, []);
  (0, import_react.useEffect)(() => {
    var placeholderEl = placeholderRef === null || placeholderRef === void 0 ? void 0 : placeholderRef.current;
    if (placeholderEl) {
      EDITOR_TO_PLACEHOLDER_ELEMENT.set(editor, placeholderEl);
    } else {
      EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor);
    }
    if (placeholderResizeObserver.current) {
      placeholderResizeObserver.current.disconnect();
      if (placeholderEl)
        placeholderResizeObserver.current.observe(placeholderEl);
    } else if (placeholderEl) {
      var ResizeObserver$1 = window.ResizeObserver || ResizeObserver;
      placeholderResizeObserver.current = new ResizeObserver$1(() => {
        var forceRender2 = EDITOR_TO_FORCE_RENDER.get(editor);
        forceRender2 === null || forceRender2 === void 0 ? void 0 : forceRender2();
      });
      placeholderResizeObserver.current.observe(placeholderEl);
    }
    if (!placeholderEl && lastPlaceholderRef.current) {
      var forceRender = EDITOR_TO_FORCE_RENDER.get(editor);
      forceRender === null || forceRender === void 0 ? void 0 : forceRender();
    }
    lastPlaceholderRef.current = placeholderRef.current;
    return () => {
      EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor);
    };
  }, [placeholderRef, leaf3]);
  var children = /* @__PURE__ */ import_react.default.createElement(String2, {
    isLast,
    leaf: leaf3,
    parent: parent3,
    text
  });
  if (leaf3[PLACEHOLDER_SYMBOL]) {
    var placeholderProps = {
      children: leaf3.placeholder,
      attributes: {
        "data-slate-placeholder": true,
        style: {
          position: "absolute",
          pointerEvents: "none",
          width: "100%",
          maxWidth: "100%",
          display: "block",
          opacity: "0.333",
          userSelect: "none",
          textDecoration: "none"
        },
        contentEditable: false,
        ref: placeholderRef
      }
    };
    children = /* @__PURE__ */ import_react.default.createElement(import_react.default.Fragment, null, renderPlaceholder(placeholderProps), children);
  }
  var attributes = {
    "data-slate-leaf": true
  };
  return renderLeaf({
    attributes,
    children,
    leaf: leaf3,
    text
  });
};
var MemoizedLeaf = /* @__PURE__ */ import_react.default.memo(Leaf, (prev, next3) => {
  return next3.parent === prev.parent && next3.isLast === prev.isLast && next3.renderLeaf === prev.renderLeaf && next3.renderPlaceholder === prev.renderPlaceholder && next3.text === prev.text && Text.equals(next3.leaf, prev.leaf) && next3.leaf[PLACEHOLDER_SYMBOL] === prev.leaf[PLACEHOLDER_SYMBOL];
});
var DefaultLeaf = (props) => {
  var {
    attributes,
    children
  } = props;
  return /* @__PURE__ */ import_react.default.createElement("span", Object.assign({}, attributes), children);
};
var Text2 = (props) => {
  var {
    decorations,
    isLast,
    parent: parent3,
    renderPlaceholder,
    renderLeaf,
    text
  } = props;
  var editor = useSlateStatic();
  var ref = (0, import_react.useRef)(null);
  var leaves = Text.decorations(text, decorations);
  var key = ReactEditor.findKey(editor, text);
  var children = [];
  for (var i2 = 0; i2 < leaves.length; i2++) {
    var leaf3 = leaves[i2];
    children.push(/* @__PURE__ */ import_react.default.createElement(MemoizedLeaf, {
      isLast: isLast && i2 === leaves.length - 1,
      key: "".concat(key.id, "-").concat(i2),
      renderPlaceholder,
      leaf: leaf3,
      text,
      parent: parent3,
      renderLeaf
    }));
  }
  useIsomorphicLayoutEffect(() => {
    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);
    if (ref.current) {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.set(key, ref.current);
      NODE_TO_ELEMENT.set(text, ref.current);
      ELEMENT_TO_NODE.set(ref.current, text);
    } else {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.delete(key);
      NODE_TO_ELEMENT.delete(text);
    }
  });
  return /* @__PURE__ */ import_react.default.createElement("span", {
    "data-slate-node": "text",
    ref
  }, children);
};
var MemoizedText = /* @__PURE__ */ import_react.default.memo(Text2, (prev, next3) => {
  return next3.parent === prev.parent && next3.isLast === prev.isLast && next3.renderLeaf === prev.renderLeaf && next3.text === prev.text && isDecoratorRangeListEqual(next3.decorations, prev.decorations);
});
var Element3 = (props) => {
  var {
    decorations,
    element,
    renderElement = (p) => /* @__PURE__ */ import_react.default.createElement(DefaultElement, Object.assign({}, p)),
    renderPlaceholder,
    renderLeaf,
    selection
  } = props;
  var editor = useSlateStatic();
  var readOnly = useReadOnly();
  var isInline2 = editor.isInline(element);
  var key = ReactEditor.findKey(editor, element);
  var ref = (0, import_react.useCallback)((ref2) => {
    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);
    if (ref2) {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.set(key, ref2);
      NODE_TO_ELEMENT.set(element, ref2);
      ELEMENT_TO_NODE.set(ref2, element);
    } else {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.delete(key);
      NODE_TO_ELEMENT.delete(element);
    }
  }, [editor, key, element]);
  var children = useChildren({
    decorations,
    node: element,
    renderElement,
    renderPlaceholder,
    renderLeaf,
    selection
  });
  var attributes = {
    "data-slate-node": "element",
    ref
  };
  if (isInline2) {
    attributes["data-slate-inline"] = true;
  }
  if (!isInline2 && Editor.hasInlines(editor, element)) {
    var text = Node.string(element);
    var dir = (0, import_direction.default)(text);
    if (dir === "rtl") {
      attributes.dir = dir;
    }
  }
  if (Editor.isVoid(editor, element)) {
    attributes["data-slate-void"] = true;
    if (!readOnly && isInline2) {
      attributes.contentEditable = false;
    }
    var Tag = isInline2 ? "span" : "div";
    var [[_text]] = Node.texts(element);
    children = /* @__PURE__ */ import_react.default.createElement(Tag, {
      "data-slate-spacer": true,
      style: {
        height: "0",
        color: "transparent",
        outline: "none",
        position: "absolute"
      }
    }, /* @__PURE__ */ import_react.default.createElement(MemoizedText, {
      renderPlaceholder,
      decorations: [],
      isLast: false,
      parent: element,
      text: _text
    }));
    NODE_TO_INDEX.set(_text, 0);
    NODE_TO_PARENT.set(_text, element);
  }
  return renderElement({
    attributes,
    children,
    element
  });
};
var MemoizedElement = /* @__PURE__ */ import_react.default.memo(Element3, (prev, next3) => {
  return prev.element === next3.element && prev.renderElement === next3.renderElement && prev.renderLeaf === next3.renderLeaf && isDecoratorRangeListEqual(prev.decorations, next3.decorations) && (prev.selection === next3.selection || !!prev.selection && !!next3.selection && Range.equals(prev.selection, next3.selection));
});
var DefaultElement = (props) => {
  var {
    attributes,
    children,
    element
  } = props;
  var editor = useSlateStatic();
  var Tag = editor.isInline(element) ? "span" : "div";
  return /* @__PURE__ */ import_react.default.createElement(Tag, Object.assign({}, attributes, {
    style: {
      position: "relative"
    }
  }), children);
};
var DecorateContext = /* @__PURE__ */ (0, import_react.createContext)(() => []);
var useDecorate = () => {
  return (0, import_react.useContext)(DecorateContext);
};
var SelectedContext = /* @__PURE__ */ (0, import_react.createContext)(false);
var useChildren = (props) => {
  var {
    decorations,
    node: node3,
    renderElement,
    renderPlaceholder,
    renderLeaf,
    selection
  } = props;
  var decorate = useDecorate();
  var editor = useSlateStatic();
  var path3 = ReactEditor.findPath(editor, node3);
  var children = [];
  var isLeafBlock = Element2.isElement(node3) && !editor.isInline(node3) && Editor.hasInlines(editor, node3);
  for (var i2 = 0; i2 < node3.children.length; i2++) {
    var p = path3.concat(i2);
    var n3 = node3.children[i2];
    var key = ReactEditor.findKey(editor, n3);
    var range2 = Editor.range(editor, p);
    var sel = selection && Range.intersection(range2, selection);
    var ds = decorate([n3, p]);
    for (var dec of decorations) {
      var d = Range.intersection(dec, range2);
      if (d) {
        ds.push(d);
      }
    }
    if (Element2.isElement(n3)) {
      children.push(/* @__PURE__ */ import_react.default.createElement(SelectedContext.Provider, {
        key: "provider-".concat(key.id),
        value: !!sel
      }, /* @__PURE__ */ import_react.default.createElement(MemoizedElement, {
        decorations: ds,
        element: n3,
        key: key.id,
        renderElement,
        renderPlaceholder,
        renderLeaf,
        selection: sel
      })));
    } else {
      children.push(/* @__PURE__ */ import_react.default.createElement(MemoizedText, {
        decorations: ds,
        key: key.id,
        isLast: isLeafBlock && i2 === node3.children.length - 1,
        parent: node3,
        renderPlaceholder,
        renderLeaf,
        text: n3
      }));
    }
    NODE_TO_INDEX.set(n3, i2);
    NODE_TO_PARENT.set(n3, node3);
  }
  return children;
};
var ReadOnlyContext = /* @__PURE__ */ (0, import_react.createContext)(false);
var useReadOnly = () => {
  return (0, import_react.useContext)(ReadOnlyContext);
};
var SlateContext = /* @__PURE__ */ (0, import_react.createContext)(null);
var useSlate = () => {
  var context = (0, import_react.useContext)(SlateContext);
  if (!context) {
    throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");
  }
  var {
    editor
  } = context;
  return editor;
};
var TRIPLE_CLICK = 3;
var HOTKEYS = {
  bold: "mod+b",
  compose: ["down", "left", "right", "up", "backspace", "enter"],
  moveBackward: "left",
  moveForward: "right",
  moveWordBackward: "ctrl+left",
  moveWordForward: "ctrl+right",
  deleteBackward: "shift?+backspace",
  deleteForward: "shift?+delete",
  extendBackward: "shift+left",
  extendForward: "shift+right",
  italic: "mod+i",
  insertSoftBreak: "shift+enter",
  splitBlock: "enter",
  undo: "mod+z"
};
var APPLE_HOTKEYS = {
  moveLineBackward: "opt+up",
  moveLineForward: "opt+down",
  moveWordBackward: "opt+left",
  moveWordForward: "opt+right",
  deleteBackward: ["ctrl+backspace", "ctrl+h"],
  deleteForward: ["ctrl+delete", "ctrl+d"],
  deleteLineBackward: "cmd+shift?+backspace",
  deleteLineForward: ["cmd+shift?+delete", "ctrl+k"],
  deleteWordBackward: "opt+shift?+backspace",
  deleteWordForward: "opt+shift?+delete",
  extendLineBackward: "opt+shift+up",
  extendLineForward: "opt+shift+down",
  redo: "cmd+shift+z",
  transposeCharacter: "ctrl+t"
};
var WINDOWS_HOTKEYS = {
  deleteWordBackward: "ctrl+shift?+backspace",
  deleteWordForward: "ctrl+shift?+delete",
  redo: ["ctrl+y", "ctrl+shift+z"]
};
var create = (key) => {
  var generic = HOTKEYS[key];
  var apple = APPLE_HOTKEYS[key];
  var windows = WINDOWS_HOTKEYS[key];
  var isGeneric = generic && (0, import_is_hotkey.isKeyHotkey)(generic);
  var isApple = apple && (0, import_is_hotkey.isKeyHotkey)(apple);
  var isWindows = windows && (0, import_is_hotkey.isKeyHotkey)(windows);
  return (event) => {
    if (isGeneric && isGeneric(event))
      return true;
    if (IS_APPLE && isApple && isApple(event))
      return true;
    if (!IS_APPLE && isWindows && isWindows(event))
      return true;
    return false;
  };
};
var Hotkeys = {
  isBold: create("bold"),
  isCompose: create("compose"),
  isMoveBackward: create("moveBackward"),
  isMoveForward: create("moveForward"),
  isDeleteBackward: create("deleteBackward"),
  isDeleteForward: create("deleteForward"),
  isDeleteLineBackward: create("deleteLineBackward"),
  isDeleteLineForward: create("deleteLineForward"),
  isDeleteWordBackward: create("deleteWordBackward"),
  isDeleteWordForward: create("deleteWordForward"),
  isExtendBackward: create("extendBackward"),
  isExtendForward: create("extendForward"),
  isExtendLineBackward: create("extendLineBackward"),
  isExtendLineForward: create("extendLineForward"),
  isItalic: create("italic"),
  isMoveLineBackward: create("moveLineBackward"),
  isMoveLineForward: create("moveLineForward"),
  isMoveWordBackward: create("moveWordBackward"),
  isMoveWordForward: create("moveWordForward"),
  isRedo: create("redo"),
  isSoftBreak: create("insertSoftBreak"),
  isSplitBlock: create("splitBlock"),
  isTransposeCharacter: create("transposeCharacter"),
  isUndo: create("undo")
};
var createRestoreDomManager = (editor, receivedUserInput) => {
  var bufferedMutations = [];
  var clear = () => {
    bufferedMutations = [];
  };
  var registerMutations = (mutations) => {
    if (!receivedUserInput.current) {
      return;
    }
    var trackedMutations = mutations.filter((mutation) => isTrackedMutation(editor, mutation, mutations));
    bufferedMutations.push(...trackedMutations);
  };
  function restoreDOM() {
    bufferedMutations.reverse().forEach((mutation) => {
      if (mutation.type === "characterData") {
        mutation.target.textContent = mutation.oldValue;
        return;
      }
      mutation.removedNodes.forEach((node3) => {
        mutation.target.insertBefore(node3, mutation.nextSibling);
      });
      mutation.addedNodes.forEach((node3) => {
        mutation.target.removeChild(node3);
      });
    });
    clear();
  }
  return {
    registerMutations,
    restoreDOM,
    clear
  };
};
var MUTATION_OBSERVER_CONFIG$1 = {
  subtree: true,
  childList: true,
  characterData: true,
  characterDataOldValue: true
};
var RestoreDOMComponent = class extends import_react.Component {
  constructor() {
    super(...arguments);
    this.context = null;
    this.manager = null;
    this.mutationObserver = null;
  }
  observe() {
    var _this$mutationObserve;
    var {
      node: node3
    } = this.props;
    if (!node3.current) {
      throw new Error("Failed to attach MutationObserver, `node` is undefined");
    }
    (_this$mutationObserve = this.mutationObserver) === null || _this$mutationObserve === void 0 ? void 0 : _this$mutationObserve.observe(node3.current, MUTATION_OBSERVER_CONFIG$1);
  }
  componentDidMount() {
    var {
      receivedUserInput
    } = this.props;
    var editor = this.context;
    this.manager = createRestoreDomManager(editor, receivedUserInput);
    this.mutationObserver = new MutationObserver(this.manager.registerMutations);
    this.observe();
  }
  getSnapshotBeforeUpdate() {
    var _this$mutationObserve2, _this$mutationObserve3, _this$manager2;
    var pendingMutations = (_this$mutationObserve2 = this.mutationObserver) === null || _this$mutationObserve2 === void 0 ? void 0 : _this$mutationObserve2.takeRecords();
    if (pendingMutations !== null && pendingMutations !== void 0 && pendingMutations.length) {
      var _this$manager;
      (_this$manager = this.manager) === null || _this$manager === void 0 ? void 0 : _this$manager.registerMutations(pendingMutations);
    }
    (_this$mutationObserve3 = this.mutationObserver) === null || _this$mutationObserve3 === void 0 ? void 0 : _this$mutationObserve3.disconnect();
    (_this$manager2 = this.manager) === null || _this$manager2 === void 0 ? void 0 : _this$manager2.restoreDOM();
    return null;
  }
  componentDidUpdate() {
    var _this$manager3;
    (_this$manager3 = this.manager) === null || _this$manager3 === void 0 ? void 0 : _this$manager3.clear();
    this.observe();
  }
  componentWillUnmount() {
    var _this$mutationObserve4;
    (_this$mutationObserve4 = this.mutationObserver) === null || _this$mutationObserve4 === void 0 ? void 0 : _this$mutationObserve4.disconnect();
  }
  render() {
    return this.props.children;
  }
};
RestoreDOMComponent.contextType = EditorContext;
var RestoreDOM = IS_ANDROID ? RestoreDOMComponent : (_ref) => {
  var {
    children
  } = _ref;
  return /* @__PURE__ */ import_react.default.createElement(import_react.default.Fragment, null, children);
};
function verifyDiffState(editor, textDiff) {
  var {
    path: path3,
    diff
  } = textDiff;
  if (!Editor.hasPath(editor, path3)) {
    return false;
  }
  var node3 = Node.get(editor, path3);
  if (!Text.isText(node3)) {
    return false;
  }
  if (diff.start !== node3.text.length || diff.text.length === 0) {
    return node3.text.slice(diff.start, diff.start + diff.text.length) === diff.text;
  }
  var nextPath = Path.next(path3);
  if (!Editor.hasPath(editor, nextPath)) {
    return false;
  }
  var nextNode = Node.get(editor, nextPath);
  return Text.isText(nextNode) && nextNode.text.startsWith(diff.text);
}
function applyStringDiff(text) {
  for (var _len = arguments.length, diffs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    diffs[_key - 1] = arguments[_key];
  }
  return diffs.reduce((text2, diff) => text2.slice(0, diff.start) + diff.text + text2.slice(diff.end), text);
}
function longestCommonPrefixLength(str, another) {
  var length = Math.min(str.length, another.length);
  for (var i2 = 0; i2 < length; i2++) {
    if (str.charAt(i2) !== another.charAt(i2)) {
      return i2;
    }
  }
  return length;
}
function longestCommonSuffixLength(str, another, max) {
  var length = Math.min(str.length, another.length, max);
  for (var i2 = 0; i2 < length; i2++) {
    if (str.charAt(str.length - i2 - 1) !== another.charAt(another.length - i2 - 1)) {
      return i2;
    }
  }
  return length;
}
function normalizeStringDiff(targetText, diff) {
  var {
    start: start2,
    end: end2,
    text
  } = diff;
  var removedText = targetText.slice(start2, end2);
  var prefixLength = longestCommonPrefixLength(removedText, text);
  var max = Math.min(removedText.length - prefixLength, text.length - prefixLength);
  var suffixLength = longestCommonSuffixLength(removedText, text, max);
  var normalized = {
    start: start2 + prefixLength,
    end: end2 - suffixLength,
    text: text.slice(prefixLength, text.length - suffixLength)
  };
  if (normalized.start === normalized.end && normalized.text.length === 0) {
    return null;
  }
  return normalized;
}
function mergeStringDiffs(targetText, a, b) {
  var start2 = Math.min(a.start, b.start);
  var overlap = Math.max(0, Math.min(a.start + a.text.length, b.end) - b.start);
  var applied = applyStringDiff(targetText, a, b);
  var sliceEnd = Math.max(b.start + b.text.length, a.start + a.text.length + (a.start + a.text.length > b.start ? b.text.length : 0) - overlap);
  var text = applied.slice(start2, sliceEnd);
  var end2 = Math.max(a.end, b.end - a.text.length + (a.end - a.start));
  return normalizeStringDiff(targetText, {
    start: start2,
    end: end2,
    text
  });
}
function targetRange(textDiff) {
  var {
    path: path3,
    diff
  } = textDiff;
  return {
    anchor: {
      path: path3,
      offset: diff.start
    },
    focus: {
      path: path3,
      offset: diff.end
    }
  };
}
function normalizePoint(editor, point3) {
  var {
    path: path3,
    offset
  } = point3;
  if (!Editor.hasPath(editor, path3)) {
    return null;
  }
  var leaf3 = Node.get(editor, path3);
  if (!Text.isText(leaf3)) {
    return null;
  }
  var parentBlock = Editor.above(editor, {
    match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
    at: path3
  });
  if (!parentBlock) {
    return null;
  }
  while (offset > leaf3.text.length) {
    var entry = Editor.next(editor, {
      at: path3,
      match: Text.isText
    });
    if (!entry || !Path.isDescendant(entry[1], parentBlock[1])) {
      return null;
    }
    offset -= leaf3.text.length;
    leaf3 = entry[0];
    path3 = entry[1];
  }
  return {
    path: path3,
    offset
  };
}
function normalizeRange(editor, range2) {
  var anchor = normalizePoint(editor, range2.anchor);
  if (!anchor) {
    return null;
  }
  if (Range.isCollapsed(range2)) {
    return {
      anchor,
      focus: anchor
    };
  }
  var focus = normalizePoint(editor, range2.focus);
  if (!focus) {
    return null;
  }
  return {
    anchor,
    focus
  };
}
function transformPendingPoint(editor, point3, op) {
  var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor);
  var textDiff = pendingDiffs === null || pendingDiffs === void 0 ? void 0 : pendingDiffs.find((_ref) => {
    var {
      path: path3
    } = _ref;
    return Path.equals(path3, point3.path);
  });
  if (!textDiff || point3.offset <= textDiff.diff.start) {
    return Point.transform(point3, op, {
      affinity: "backward"
    });
  }
  var {
    diff
  } = textDiff;
  if (point3.offset <= diff.start + diff.text.length) {
    var _anchor = {
      path: point3.path,
      offset: diff.start
    };
    var _transformed = Point.transform(_anchor, op, {
      affinity: "backward"
    });
    if (!_transformed) {
      return null;
    }
    return {
      path: _transformed.path,
      offset: _transformed.offset + point3.offset - diff.start
    };
  }
  var anchor = {
    path: point3.path,
    offset: point3.offset - diff.text.length + diff.end - diff.start
  };
  var transformed = Point.transform(anchor, op, {
    affinity: "backward"
  });
  if (!transformed) {
    return null;
  }
  if (op.type === "split_node" && Path.equals(op.path, point3.path) && anchor.offset < op.position && diff.start < op.position) {
    return transformed;
  }
  return {
    path: transformed.path,
    offset: transformed.offset + diff.text.length - diff.end + diff.start
  };
}
function transformPendingRange(editor, range2, op) {
  var anchor = transformPendingPoint(editor, range2.anchor, op);
  if (!anchor) {
    return null;
  }
  if (Range.isCollapsed(range2)) {
    return {
      anchor,
      focus: anchor
    };
  }
  var focus = transformPendingPoint(editor, range2.focus, op);
  if (!focus) {
    return null;
  }
  return {
    anchor,
    focus
  };
}
function transformTextDiff(textDiff, op) {
  var {
    path: path3,
    diff,
    id
  } = textDiff;
  switch (op.type) {
    case "insert_text": {
      if (!Path.equals(op.path, path3) || op.offset >= diff.end) {
        return textDiff;
      }
      if (op.offset <= diff.start) {
        return {
          diff: {
            start: op.text.length + diff.start,
            end: op.text.length + diff.end,
            text: diff.text
          },
          id,
          path: path3
        };
      }
      return {
        diff: {
          start: diff.start,
          end: diff.end + op.text.length,
          text: diff.text
        },
        id,
        path: path3
      };
    }
    case "remove_text": {
      if (!Path.equals(op.path, path3) || op.offset >= diff.end) {
        return textDiff;
      }
      if (op.offset + op.text.length <= diff.start) {
        return {
          diff: {
            start: diff.start - op.text.length,
            end: diff.end - op.text.length,
            text: diff.text
          },
          id,
          path: path3
        };
      }
      return {
        diff: {
          start: diff.start,
          end: diff.end - op.text.length,
          text: diff.text
        },
        id,
        path: path3
      };
    }
    case "split_node": {
      if (!Path.equals(op.path, path3) || op.position >= diff.end) {
        return {
          diff,
          id,
          path: Path.transform(path3, op, {
            affinity: "backward"
          })
        };
      }
      if (op.position > diff.start) {
        return {
          diff: {
            start: diff.start,
            end: Math.min(op.position, diff.end),
            text: diff.text
          },
          id,
          path: path3
        };
      }
      return {
        diff: {
          start: diff.start - op.position,
          end: diff.end - op.position,
          text: diff.text
        },
        id,
        path: Path.transform(path3, op, {
          affinity: "forward"
        })
      };
    }
    case "merge_node": {
      if (!Path.equals(op.path, path3)) {
        return {
          diff,
          id,
          path: Path.transform(path3, op)
        };
      }
      return {
        diff: {
          start: diff.start + op.position,
          end: diff.end + op.position,
          text: diff.text
        },
        id,
        path: Path.transform(path3, op)
      };
    }
  }
  var newPath = Path.transform(path3, op);
  if (!newPath) {
    return null;
  }
  return {
    diff,
    path: newPath,
    id
  };
}
function ownKeys$32(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread$32(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys$32(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys$32(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var RESOLVE_DELAY = 25;
var FLUSH_DELAY = 200;
var debug = function debug2() {
};
function createAndroidInputManager(_ref) {
  var {
    editor,
    scheduleOnDOMSelectionChange,
    onDOMSelectionChange
  } = _ref;
  var flushing = false;
  var compositionEndTimeoutId = null;
  var flushTimeoutId = null;
  var actionTimeoutId = null;
  var idCounter = 0;
  var insertPositionHint = false;
  var applyPendingSelection = () => {
    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(editor);
    EDITOR_TO_PENDING_SELECTION.delete(editor);
    if (pendingSelection) {
      var {
        selection
      } = editor;
      var normalized = normalizeRange(editor, pendingSelection);
      if (normalized && (!selection || !Range.equals(normalized, selection))) {
        Transforms.select(editor, normalized);
      }
    }
  };
  var performAction = () => {
    var action = EDITOR_TO_PENDING_ACTION.get(editor);
    EDITOR_TO_PENDING_ACTION.delete(editor);
    if (!action) {
      return;
    }
    if (action.at) {
      var target = Point.isPoint(action.at) ? normalizePoint(editor, action.at) : normalizeRange(editor, action.at);
      if (!target) {
        return;
      }
      var _targetRange = Editor.range(editor, target);
      if (!editor.selection || !Range.equals(editor.selection, _targetRange)) {
        Transforms.select(editor, target);
      }
    }
    action.run();
  };
  var flush = () => {
    var _EDITOR_TO_PENDING_DI;
    if (flushTimeoutId) {
      clearTimeout(flushTimeoutId);
      flushTimeoutId = null;
    }
    if (actionTimeoutId) {
      clearTimeout(actionTimeoutId);
      actionTimeoutId = null;
    }
    if (!hasPendingDiffs() && !hasPendingAction()) {
      applyPendingSelection();
      return;
    }
    if (!flushing) {
      flushing = true;
      setTimeout(() => flushing = false);
    }
    if (hasPendingAction()) {
      flushing = "action";
    }
    var selectionRef = editor.selection && Editor.rangeRef(editor, editor.selection, {
      affinity: "forward"
    });
    EDITOR_TO_USER_MARKS.set(editor, editor.marks);
    debug("flush", EDITOR_TO_PENDING_ACTION.get(editor), EDITOR_TO_PENDING_DIFFS.get(editor));
    var scheduleSelectionChange = !!((_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI !== void 0 && _EDITOR_TO_PENDING_DI.length);
    var diff;
    while (diff = (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI2 === void 0 ? void 0 : _EDITOR_TO_PENDING_DI2[0]) {
      var _EDITOR_TO_PENDING_DI2, _EDITOR_TO_PENDING_DI3;
      var pendingMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);
      if (pendingMarks !== void 0) {
        EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);
        editor.marks = pendingMarks;
      }
      if (pendingMarks && insertPositionHint === false) {
        insertPositionHint = null;
      }
      var range2 = targetRange(diff);
      if (!editor.selection || !Range.equals(editor.selection, range2)) {
        Transforms.select(editor, range2);
      }
      if (diff.diff.text) {
        Editor.insertText(editor, diff.diff.text);
      } else {
        Editor.deleteFragment(editor);
      }
      EDITOR_TO_PENDING_DIFFS.set(editor, (_EDITOR_TO_PENDING_DI3 = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI3 === void 0 ? void 0 : _EDITOR_TO_PENDING_DI3.filter((_ref2) => {
        var {
          id
        } = _ref2;
        return id !== diff.id;
      }));
      if (!verifyDiffState(editor, diff)) {
        scheduleSelectionChange = false;
        EDITOR_TO_PENDING_ACTION.delete(editor);
        EDITOR_TO_USER_MARKS.delete(editor);
        flushing = "action";
        EDITOR_TO_PENDING_SELECTION.delete(editor);
        scheduleOnDOMSelectionChange.cancel();
        onDOMSelectionChange.cancel();
        selectionRef === null || selectionRef === void 0 ? void 0 : selectionRef.unref();
      }
    }
    var selection = selectionRef === null || selectionRef === void 0 ? void 0 : selectionRef.unref();
    if (selection && !EDITOR_TO_PENDING_SELECTION.get(editor) && (!editor.selection || !Range.equals(selection, editor.selection))) {
      Transforms.select(editor, selection);
    }
    if (hasPendingAction()) {
      performAction();
      return;
    }
    if (scheduleSelectionChange) {
      scheduleOnDOMSelectionChange();
    }
    scheduleOnDOMSelectionChange.flush();
    onDOMSelectionChange.flush();
    applyPendingSelection();
    var userMarks = EDITOR_TO_USER_MARKS.get(editor);
    EDITOR_TO_USER_MARKS.delete(editor);
    if (userMarks !== void 0) {
      editor.marks = userMarks;
      editor.onChange();
    }
  };
  var handleCompositionEnd = (_event) => {
    if (compositionEndTimeoutId) {
      clearTimeout(compositionEndTimeoutId);
    }
    compositionEndTimeoutId = setTimeout(() => {
      IS_COMPOSING.set(editor, false);
      flush();
    }, RESOLVE_DELAY);
  };
  var handleCompositionStart = (_event) => {
    IS_COMPOSING.set(editor, true);
    if (compositionEndTimeoutId) {
      clearTimeout(compositionEndTimeoutId);
      compositionEndTimeoutId = null;
    }
  };
  var updatePlaceholderVisibility = function updatePlaceholderVisibility2() {
    var forceHide = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
    var placeholderElement = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor);
    if (!placeholderElement) {
      return;
    }
    if (hasPendingDiffs() || forceHide) {
      placeholderElement.style.display = "none";
      return;
    }
    placeholderElement.style.removeProperty("display");
  };
  var storeDiff = (path3, diff) => {
    var _EDITOR_TO_PENDING_DI4;
    var pendingDiffs = (_EDITOR_TO_PENDING_DI4 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI4 !== void 0 ? _EDITOR_TO_PENDING_DI4 : [];
    EDITOR_TO_PENDING_DIFFS.set(editor, pendingDiffs);
    var target = Node.leaf(editor, path3);
    var idx = pendingDiffs.findIndex((change) => Path.equals(change.path, path3));
    if (idx < 0) {
      var normalized = normalizeStringDiff(target.text, diff);
      if (normalized) {
        pendingDiffs.push({
          path: path3,
          diff,
          id: idCounter++
        });
      }
      updatePlaceholderVisibility();
      return;
    }
    var merged = mergeStringDiffs(target.text, pendingDiffs[idx].diff, diff);
    if (!merged) {
      pendingDiffs.splice(idx, 1);
      updatePlaceholderVisibility();
      return;
    }
    pendingDiffs[idx] = _objectSpread$32(_objectSpread$32({}, pendingDiffs[idx]), {}, {
      diff: merged
    });
  };
  var scheduleAction = function scheduleAction2(run) {
    var {
      at
    } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    insertPositionHint = false;
    EDITOR_TO_PENDING_SELECTION.delete(editor);
    scheduleOnDOMSelectionChange.cancel();
    onDOMSelectionChange.cancel();
    if (hasPendingAction()) {
      flush();
    }
    EDITOR_TO_PENDING_ACTION.set(editor, {
      at,
      run
    });
    actionTimeoutId = setTimeout(flush);
  };
  var handleDOMBeforeInput = (event) => {
    var _targetRange2;
    if (flushTimeoutId) {
      clearTimeout(flushTimeoutId);
      flushTimeoutId = null;
    }
    var {
      inputType: type
    } = event;
    var targetRange2 = null;
    var data = event.dataTransfer || event.data || void 0;
    if (insertPositionHint !== false && type !== "insertText" && type !== "insertCompositionText") {
      insertPositionHint = false;
    }
    var [nativeTargetRange] = event.getTargetRanges();
    if (nativeTargetRange) {
      targetRange2 = ReactEditor.toSlateRange(editor, nativeTargetRange, {
        exactMatch: false,
        suppressThrow: true
      });
    }
    var window2 = ReactEditor.getWindow(editor);
    var domSelection = window2.getSelection();
    if (!targetRange2 && domSelection) {
      nativeTargetRange = domSelection;
      targetRange2 = ReactEditor.toSlateRange(editor, domSelection, {
        exactMatch: false,
        suppressThrow: true
      });
    }
    targetRange2 = (_targetRange2 = targetRange2) !== null && _targetRange2 !== void 0 ? _targetRange2 : editor.selection;
    if (!targetRange2) {
      return;
    }
    if (Range.isExpanded(targetRange2) && type.startsWith("delete")) {
      var [start2, end2] = Range.edges(targetRange2);
      var leaf3 = Node.leaf(editor, start2.path);
      if (leaf3.text.length === start2.offset && end2.offset === 0) {
        var next3 = Editor.next(editor, {
          at: start2.path,
          match: Text.isText
        });
        if (next3 && Path.equals(next3[1], end2.path)) {
          targetRange2 = {
            anchor: end2,
            focus: end2
          };
        }
      }
    }
    if (Range.isExpanded(targetRange2) && type.startsWith("delete")) {
      if (Path.equals(targetRange2.anchor.path, targetRange2.focus.path)) {
        var [_start, _end] = Range.edges(targetRange2);
        return storeDiff(targetRange2.anchor.path, {
          text: "",
          end: _end.offset,
          start: _start.offset
        });
      }
      var direction = type.endsWith("Backward") ? "backward" : "forward";
      return scheduleAction(() => Editor.deleteFragment(editor, {
        direction
      }), {
        at: targetRange2
      });
    }
    switch (type) {
      case "deleteByComposition":
      case "deleteByCut":
      case "deleteByDrag": {
        return scheduleAction(() => Editor.deleteFragment(editor), {
          at: targetRange2
        });
      }
      case "deleteContent":
      case "deleteContentForward": {
        var {
          anchor
        } = targetRange2;
        if (Range.isCollapsed(targetRange2)) {
          var targetNode = Node.leaf(editor, anchor.path);
          if (anchor.offset < targetNode.text.length) {
            return storeDiff(anchor.path, {
              text: "",
              start: anchor.offset,
              end: anchor.offset + 1
            });
          }
        }
        return scheduleAction(() => Editor.deleteForward(editor), {
          at: targetRange2
        });
      }
      case "deleteContentBackward": {
        var _nativeTargetRange;
        var {
          anchor: _anchor
        } = targetRange2;
        var nativeCollapsed = isDOMSelection(nativeTargetRange) ? nativeTargetRange.isCollapsed : !!((_nativeTargetRange = nativeTargetRange) !== null && _nativeTargetRange !== void 0 && _nativeTargetRange.collapsed);
        if (nativeCollapsed && Range.isCollapsed(targetRange2) && _anchor.offset > 0) {
          return storeDiff(_anchor.path, {
            text: "",
            start: _anchor.offset - 1,
            end: _anchor.offset
          });
        }
        return scheduleAction(() => Editor.deleteBackward(editor), {
          at: targetRange2
        });
      }
      case "deleteEntireSoftLine": {
        return scheduleAction(() => {
          Editor.deleteBackward(editor, {
            unit: "line"
          });
          Editor.deleteForward(editor, {
            unit: "line"
          });
        }, {
          at: targetRange2
        });
      }
      case "deleteHardLineBackward": {
        return scheduleAction(() => Editor.deleteBackward(editor, {
          unit: "block"
        }), {
          at: targetRange2
        });
      }
      case "deleteSoftLineBackward": {
        return scheduleAction(() => Editor.deleteBackward(editor, {
          unit: "line"
        }), {
          at: targetRange2
        });
      }
      case "deleteHardLineForward": {
        return scheduleAction(() => Editor.deleteForward(editor, {
          unit: "block"
        }), {
          at: targetRange2
        });
      }
      case "deleteSoftLineForward": {
        return scheduleAction(() => Editor.deleteForward(editor, {
          unit: "line"
        }), {
          at: targetRange2
        });
      }
      case "deleteWordBackward": {
        return scheduleAction(() => Editor.deleteBackward(editor, {
          unit: "word"
        }), {
          at: targetRange2
        });
      }
      case "deleteWordForward": {
        return scheduleAction(() => Editor.deleteForward(editor, {
          unit: "word"
        }), {
          at: targetRange2
        });
      }
      case "insertLineBreak": {
        return scheduleAction(() => Editor.insertSoftBreak(editor), {
          at: targetRange2
        });
      }
      case "insertParagraph": {
        return scheduleAction(() => Editor.insertBreak(editor), {
          at: targetRange2
        });
      }
      case "insertCompositionText":
      case "deleteCompositionText":
      case "insertFromComposition":
      case "insertFromDrop":
      case "insertFromPaste":
      case "insertFromYank":
      case "insertReplacementText":
      case "insertText": {
        if ((data === null || data === void 0 ? void 0 : data.constructor.name) === "DataTransfer") {
          return scheduleAction(() => ReactEditor.insertData(editor, data), {
            at: targetRange2
          });
        }
        if (typeof data === "string" && data.includes("\n")) {
          return scheduleAction(() => Editor.insertSoftBreak(editor), {
            at: Range.end(targetRange2)
          });
        }
        var text = data !== null && data !== void 0 ? data : "";
        if (EDITOR_TO_PENDING_INSERTION_MARKS.get(editor)) {
          text = text.replace("\uFEFF", "");
        }
        if (Path.equals(targetRange2.anchor.path, targetRange2.focus.path)) {
          var [_start2, _end2] = Range.edges(targetRange2);
          var diff = {
            start: _start2.offset,
            end: _end2.offset,
            text
          };
          if (text && insertPositionHint && type === "insertCompositionText") {
            var hintPosition = insertPositionHint.start + insertPositionHint.text.search(/\S|$/);
            var diffPosition = diff.start + diff.text.search(/\S|$/);
            if (diffPosition === hintPosition + 1 && diff.end === insertPositionHint.start + insertPositionHint.text.length) {
              diff.start -= 1;
              insertPositionHint = null;
              scheduleFlush();
            } else {
              insertPositionHint = false;
            }
          } else if (type === "insertText") {
            if (insertPositionHint === null) {
              insertPositionHint = diff;
            } else if (insertPositionHint && Range.isCollapsed(targetRange2) && insertPositionHint.end + insertPositionHint.text.length === _start2.offset) {
              insertPositionHint = _objectSpread$32(_objectSpread$32({}, insertPositionHint), {}, {
                text: insertPositionHint.text + text
              });
            } else {
              insertPositionHint = false;
            }
          } else {
            insertPositionHint = false;
          }
          storeDiff(_start2.path, diff);
          return;
        }
        return scheduleAction(() => Editor.insertText(editor, text), {
          at: targetRange2
        });
      }
    }
  };
  var hasPendingAction = () => {
    return !!EDITOR_TO_PENDING_ACTION.get(editor);
  };
  var hasPendingDiffs = () => {
    var _EDITOR_TO_PENDING_DI5;
    return !!((_EDITOR_TO_PENDING_DI5 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI5 !== void 0 && _EDITOR_TO_PENDING_DI5.length);
  };
  var hasPendingChanges = () => {
    return hasPendingAction() || hasPendingDiffs();
  };
  var isFlushing = () => {
    return flushing;
  };
  var handleUserSelect = (range2) => {
    EDITOR_TO_PENDING_SELECTION.set(editor, range2);
    if (flushTimeoutId) {
      clearTimeout(flushTimeoutId);
      flushTimeoutId = null;
    }
    var {
      selection
    } = editor;
    if (!range2) {
      return;
    }
    var pathChanged = !selection || !Path.equals(selection.anchor.path, range2.anchor.path);
    var parentPathChanged = !selection || !Path.equals(selection.anchor.path.slice(0, -1), range2.anchor.path.slice(0, -1));
    if (pathChanged && insertPositionHint || parentPathChanged) {
      insertPositionHint = false;
    }
    if (pathChanged || !hasPendingDiffs()) {
      flushTimeoutId = setTimeout(flush, FLUSH_DELAY);
    }
  };
  var handleInput = () => {
    if (hasPendingAction() || !hasPendingDiffs()) {
      flush();
    }
  };
  var handleKeyDown = (_) => {
    if (!hasPendingDiffs()) {
      updatePlaceholderVisibility(true);
      setTimeout(updatePlaceholderVisibility);
    }
  };
  var scheduleFlush = () => {
    if (!hasPendingAction()) {
      actionTimeoutId = setTimeout(flush);
    }
  };
  var handleDomMutations = (mutations) => {
    if (hasPendingDiffs() || hasPendingAction()) {
      return;
    }
    if (mutations.some((mutation) => isTrackedMutation(editor, mutation, mutations))) {
      var _EDITOR_TO_FORCE_REND;
      (_EDITOR_TO_FORCE_REND = EDITOR_TO_FORCE_RENDER.get(editor)) === null || _EDITOR_TO_FORCE_REND === void 0 ? void 0 : _EDITOR_TO_FORCE_REND();
    }
  };
  return {
    flush,
    scheduleFlush,
    hasPendingDiffs,
    hasPendingAction,
    hasPendingChanges,
    isFlushing,
    handleUserSelect,
    handleCompositionEnd,
    handleCompositionStart,
    handleDOMBeforeInput,
    handleKeyDown,
    handleDomMutations,
    handleInput
  };
}
function useIsMounted() {
  var isMountedRef = (0, import_react.useRef)(false);
  (0, import_react.useEffect)(() => {
    isMountedRef.current = true;
    return () => {
      isMountedRef.current = false;
    };
  }, []);
  return isMountedRef.current;
}
function useMutationObserver(node3, callback, options) {
  var [mutationObserver] = (0, import_react.useState)(() => new MutationObserver(callback));
  useIsomorphicLayoutEffect(() => {
    mutationObserver.takeRecords();
  });
  (0, import_react.useEffect)(() => {
    if (!node3.current) {
      throw new Error("Failed to attach MutationObserver, `node` is undefined");
    }
    mutationObserver.observe(node3.current, options);
    return () => mutationObserver.disconnect();
  }, []);
}
var _excluded$22 = ["node"];
function ownKeys$22(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread$22(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys$22(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys$22(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var MUTATION_OBSERVER_CONFIG = {
  subtree: true,
  childList: true,
  characterData: true
};
function useAndroidInputManager(_ref) {
  var {
    node: node3
  } = _ref, options = _objectWithoutProperties2(_ref, _excluded$22);
  if (!IS_ANDROID) {
    return null;
  }
  var editor = useSlateStatic();
  var isMounted = useIsMounted();
  var [inputManager] = (0, import_react.useState)(() => createAndroidInputManager(_objectSpread$22({
    editor
  }, options)));
  useMutationObserver(node3, inputManager.handleDomMutations, MUTATION_OBSERVER_CONFIG);
  EDITOR_TO_SCHEDULE_FLUSH.set(editor, inputManager.scheduleFlush);
  if (isMounted) {
    inputManager.flush();
  }
  return inputManager;
}
function useTrackUserInput() {
  var editor = useSlateStatic();
  var receivedUserInput = (0, import_react.useRef)(false);
  var animationFrameIdRef = (0, import_react.useRef)(0);
  var onUserInput = (0, import_react.useCallback)(() => {
    if (receivedUserInput.current) {
      return;
    }
    receivedUserInput.current = true;
    var window2 = ReactEditor.getWindow(editor);
    window2.cancelAnimationFrame(animationFrameIdRef.current);
    animationFrameIdRef.current = window2.requestAnimationFrame(() => {
      receivedUserInput.current = false;
    });
  }, []);
  (0, import_react.useEffect)(() => () => cancelAnimationFrame(animationFrameIdRef.current), []);
  return {
    receivedUserInput,
    onUserInput
  };
}
var _excluded$12 = ["autoFocus", "decorate", "onDOMBeforeInput", "placeholder", "readOnly", "renderElement", "renderLeaf", "renderPlaceholder", "scrollSelectionIntoView", "style", "as", "disableDefaultStyles"];
var _excluded22 = ["text"];
function ownKeys$12(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread$12(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys$12(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys$12(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var Children = (props) => /* @__PURE__ */ import_react.default.createElement(import_react.default.Fragment, null, useChildren(props));
var Editable = (props) => {
  var _EDITOR_TO_PLACEHOLDE, _EDITOR_TO_PLACEHOLDE2;
  var {
    autoFocus,
    decorate = defaultDecorate,
    onDOMBeforeInput: propsOnDOMBeforeInput,
    placeholder,
    readOnly = false,
    renderElement,
    renderLeaf,
    renderPlaceholder = (props2) => /* @__PURE__ */ import_react.default.createElement(DefaultPlaceholder, Object.assign({}, props2)),
    scrollSelectionIntoView = defaultScrollSelectionIntoView,
    style: userStyle = {},
    as: Component2 = "div",
    disableDefaultStyles = false
  } = props, attributes = _objectWithoutProperties2(props, _excluded$12);
  var editor = useSlate();
  var [isComposing, setIsComposing] = (0, import_react.useState)(false);
  var ref = (0, import_react.useRef)(null);
  var deferredOperations = (0, import_react.useRef)([]);
  var {
    onUserInput,
    receivedUserInput
  } = useTrackUserInput();
  var [, forceRender] = (0, import_react.useReducer)((s) => s + 1, 0);
  EDITOR_TO_FORCE_RENDER.set(editor, forceRender);
  IS_READ_ONLY.set(editor, readOnly);
  var state = (0, import_react.useMemo)(() => ({
    isDraggingInternally: false,
    isUpdatingSelection: false,
    latestElement: null,
    hasMarkPlaceholder: false
  }), []);
  (0, import_react.useEffect)(() => {
    if (ref.current && autoFocus) {
      ref.current.focus();
    }
  }, [autoFocus]);
  var onDOMSelectionChange = (0, import_react.useCallback)((0, import_throttle.default)(() => {
    if ((IS_ANDROID || !ReactEditor.isComposing(editor)) && (!state.isUpdatingSelection || androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing()) && !state.isDraggingInternally) {
      var root = ReactEditor.findDocumentOrShadowRoot(editor);
      var {
        activeElement
      } = root;
      var el = ReactEditor.toDOMNode(editor, editor);
      var domSelection = root.getSelection();
      if (activeElement === el) {
        state.latestElement = activeElement;
        IS_FOCUSED.set(editor, true);
      } else {
        IS_FOCUSED.delete(editor);
      }
      if (!domSelection) {
        return Transforms.deselect(editor);
      }
      var {
        anchorNode,
        focusNode
      } = domSelection;
      var anchorNodeSelectable = ReactEditor.hasEditableTarget(editor, anchorNode) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, anchorNode);
      var focusNodeSelectable = ReactEditor.hasEditableTarget(editor, focusNode) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, focusNode);
      if (anchorNodeSelectable && focusNodeSelectable) {
        var range2 = ReactEditor.toSlateRange(editor, domSelection, {
          exactMatch: false,
          suppressThrow: true
        });
        if (range2) {
          if (!ReactEditor.isComposing(editor) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.hasPendingChanges()) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing())) {
            Transforms.select(editor, range2);
          } else {
            androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleUserSelect(range2);
          }
        }
      }
      if (readOnly && (!anchorNodeSelectable || !focusNodeSelectable)) {
        Transforms.deselect(editor);
      }
    }
  }, 100), [readOnly]);
  var scheduleOnDOMSelectionChange = (0, import_react.useMemo)(() => (0, import_debounce.default)(onDOMSelectionChange, 0), [onDOMSelectionChange]);
  var androidInputManager = useAndroidInputManager({
    node: ref,
    onDOMSelectionChange,
    scheduleOnDOMSelectionChange
  });
  useIsomorphicLayoutEffect(() => {
    var window2;
    if (ref.current && (window2 = getDefaultView(ref.current))) {
      EDITOR_TO_WINDOW.set(editor, window2);
      EDITOR_TO_ELEMENT.set(editor, ref.current);
      NODE_TO_ELEMENT.set(editor, ref.current);
      ELEMENT_TO_NODE.set(ref.current, editor);
    } else {
      NODE_TO_ELEMENT.delete(editor);
    }
    var {
      selection
    } = editor;
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    var domSelection = root.getSelection();
    if (!domSelection || !ReactEditor.isFocused(editor) || androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.hasPendingAction()) {
      return;
    }
    var setDomSelection = (forceChange) => {
      var hasDomSelection = domSelection.type !== "None";
      if (!selection && !hasDomSelection) {
        return;
      }
      var editorElement = EDITOR_TO_ELEMENT.get(editor);
      var hasDomSelectionInEditor = false;
      if (editorElement.contains(domSelection.anchorNode) && editorElement.contains(domSelection.focusNode)) {
        hasDomSelectionInEditor = true;
      }
      if (hasDomSelection && hasDomSelectionInEditor && selection && !forceChange) {
        var slateRange = ReactEditor.toSlateRange(editor, domSelection, {
          exactMatch: true,
          // domSelection is not necessarily a valid Slate range
          // (e.g. when clicking on contentEditable:false element)
          suppressThrow: true
        });
        if (slateRange && Range.equals(slateRange, selection)) {
          var _anchorNode$parentEle;
          if (!state.hasMarkPlaceholder) {
            return;
          }
          var {
            anchorNode
          } = domSelection;
          if (anchorNode !== null && anchorNode !== void 0 && (_anchorNode$parentEle = anchorNode.parentElement) !== null && _anchorNode$parentEle !== void 0 && _anchorNode$parentEle.hasAttribute("data-slate-mark-placeholder")) {
            return;
          }
        }
      }
      if (selection && !ReactEditor.hasRange(editor, selection)) {
        editor.selection = ReactEditor.toSlateRange(editor, domSelection, {
          exactMatch: false,
          suppressThrow: true
        });
        return;
      }
      state.isUpdatingSelection = true;
      var newDomRange2 = selection && ReactEditor.toDOMRange(editor, selection);
      if (newDomRange2) {
        if (Range.isBackward(selection)) {
          domSelection.setBaseAndExtent(newDomRange2.endContainer, newDomRange2.endOffset, newDomRange2.startContainer, newDomRange2.startOffset);
        } else {
          domSelection.setBaseAndExtent(newDomRange2.startContainer, newDomRange2.startOffset, newDomRange2.endContainer, newDomRange2.endOffset);
        }
        scrollSelectionIntoView(editor, newDomRange2);
      } else {
        domSelection.removeAllRanges();
      }
      return newDomRange2;
    };
    var newDomRange = setDomSelection();
    var ensureSelection = (androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.isFlushing()) === "action";
    if (!IS_ANDROID || !ensureSelection) {
      setTimeout(() => {
        if (newDomRange && IS_FIREFOX) {
          var el = ReactEditor.toDOMNode(editor, editor);
          el.focus();
        }
        state.isUpdatingSelection = false;
      });
      return;
    }
    var timeoutId = null;
    var animationFrameId = requestAnimationFrame(() => {
      if (ensureSelection) {
        var ensureDomSelection = (forceChange) => {
          try {
            var el = ReactEditor.toDOMNode(editor, editor);
            el.focus();
            setDomSelection(forceChange);
          } catch (e2) {
          }
        };
        ensureDomSelection();
        timeoutId = setTimeout(() => {
          ensureDomSelection(true);
          state.isUpdatingSelection = false;
        });
      }
    });
    return () => {
      cancelAnimationFrame(animationFrameId);
      if (timeoutId) {
        clearTimeout(timeoutId);
      }
    };
  });
  var onDOMBeforeInput = (0, import_react.useCallback)((event) => {
    onUserInput();
    if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target) && !isDOMEventHandled(event, propsOnDOMBeforeInput)) {
      var _EDITOR_TO_USER_SELEC;
      if (androidInputManager) {
        return androidInputManager.handleDOMBeforeInput(event);
      }
      scheduleOnDOMSelectionChange.flush();
      onDOMSelectionChange.flush();
      var {
        selection
      } = editor;
      var {
        inputType: type
      } = event;
      var data = event.dataTransfer || event.data || void 0;
      var isCompositionChange = type === "insertCompositionText" || type === "deleteCompositionText";
      if (isCompositionChange && ReactEditor.isComposing(editor)) {
        return;
      }
      var native = false;
      if (type === "insertText" && selection && Range.isCollapsed(selection) && // Only use native character insertion for single characters a-z or space for now.
      // Long-press events (hold a + press 4 = ä) to choose a special character otherwise
      // causes duplicate inserts.
      event.data && event.data.length === 1 && /[a-z ]/i.test(event.data) && // Chrome has issues correctly editing the start of nodes: https://bugs.chromium.org/p/chromium/issues/detail?id=1249405
      // When there is an inline element, e.g. a link, and you select
      // right after it (the start of the next node).
      selection.anchor.offset !== 0) {
        var _node$parentElement, _window$getComputedSt;
        native = true;
        if (editor.marks) {
          native = false;
        }
        var {
          anchor: anchor2
        } = selection;
        var [node3, offset] = ReactEditor.toDOMPoint(editor, anchor2);
        var anchorNode = (_node$parentElement = node3.parentElement) === null || _node$parentElement === void 0 ? void 0 : _node$parentElement.closest("a");
        var window2 = ReactEditor.getWindow(editor);
        if (native && anchorNode && ReactEditor.hasDOMNode(editor, anchorNode)) {
          var _lastText$textContent;
          var lastText = window2 === null || window2 === void 0 ? void 0 : window2.document.createTreeWalker(anchorNode, NodeFilter.SHOW_TEXT).lastChild();
          if (lastText === node3 && ((_lastText$textContent = lastText.textContent) === null || _lastText$textContent === void 0 ? void 0 : _lastText$textContent.length) === offset) {
            native = false;
          }
        }
        if (native && node3.parentElement && (window2 === null || window2 === void 0 ? void 0 : (_window$getComputedSt = window2.getComputedStyle(node3.parentElement)) === null || _window$getComputedSt === void 0 ? void 0 : _window$getComputedSt.whiteSpace) === "pre") {
          var block = Editor.above(editor, {
            at: anchor2.path,
            match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3)
          });
          if (block && Node.string(block[0]).includes("	")) {
            native = false;
          }
        }
      }
      if (!type.startsWith("delete") || type.startsWith("deleteBy")) {
        var [targetRange2] = event.getTargetRanges();
        if (targetRange2) {
          var range2 = ReactEditor.toSlateRange(editor, targetRange2, {
            exactMatch: false,
            suppressThrow: false
          });
          if (!selection || !Range.equals(selection, range2)) {
            native = false;
            var selectionRef = !isCompositionChange && editor.selection && Editor.rangeRef(editor, editor.selection);
            Transforms.select(editor, range2);
            if (selectionRef) {
              EDITOR_TO_USER_SELECTION.set(editor, selectionRef);
            }
          }
        }
      }
      if (isCompositionChange) {
        return;
      }
      if (!native) {
        event.preventDefault();
      }
      if (selection && Range.isExpanded(selection) && type.startsWith("delete")) {
        var direction = type.endsWith("Backward") ? "backward" : "forward";
        Editor.deleteFragment(editor, {
          direction
        });
        return;
      }
      switch (type) {
        case "deleteByComposition":
        case "deleteByCut":
        case "deleteByDrag": {
          Editor.deleteFragment(editor);
          break;
        }
        case "deleteContent":
        case "deleteContentForward": {
          Editor.deleteForward(editor);
          break;
        }
        case "deleteContentBackward": {
          Editor.deleteBackward(editor);
          break;
        }
        case "deleteEntireSoftLine": {
          Editor.deleteBackward(editor, {
            unit: "line"
          });
          Editor.deleteForward(editor, {
            unit: "line"
          });
          break;
        }
        case "deleteHardLineBackward": {
          Editor.deleteBackward(editor, {
            unit: "block"
          });
          break;
        }
        case "deleteSoftLineBackward": {
          Editor.deleteBackward(editor, {
            unit: "line"
          });
          break;
        }
        case "deleteHardLineForward": {
          Editor.deleteForward(editor, {
            unit: "block"
          });
          break;
        }
        case "deleteSoftLineForward": {
          Editor.deleteForward(editor, {
            unit: "line"
          });
          break;
        }
        case "deleteWordBackward": {
          Editor.deleteBackward(editor, {
            unit: "word"
          });
          break;
        }
        case "deleteWordForward": {
          Editor.deleteForward(editor, {
            unit: "word"
          });
          break;
        }
        case "insertLineBreak":
          Editor.insertSoftBreak(editor);
          break;
        case "insertParagraph": {
          Editor.insertBreak(editor);
          break;
        }
        case "insertFromComposition":
        case "insertFromDrop":
        case "insertFromPaste":
        case "insertFromYank":
        case "insertReplacementText":
        case "insertText": {
          if (type === "insertFromComposition") {
            if (ReactEditor.isComposing(editor)) {
              setIsComposing(false);
              IS_COMPOSING.set(editor, false);
            }
          }
          if ((data === null || data === void 0 ? void 0 : data.constructor.name) === "DataTransfer") {
            ReactEditor.insertData(editor, data);
          } else if (typeof data === "string") {
            if (native) {
              deferredOperations.current.push(() => Editor.insertText(editor, data));
            } else {
              Editor.insertText(editor, data);
            }
          }
          break;
        }
      }
      var toRestore = (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(editor)) === null || _EDITOR_TO_USER_SELEC === void 0 ? void 0 : _EDITOR_TO_USER_SELEC.unref();
      EDITOR_TO_USER_SELECTION.delete(editor);
      if (toRestore && (!editor.selection || !Range.equals(editor.selection, toRestore))) {
        Transforms.select(editor, toRestore);
      }
    }
  }, [readOnly, propsOnDOMBeforeInput]);
  useIsomorphicLayoutEffect(() => {
    if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {
      ref.current.addEventListener("beforeinput", onDOMBeforeInput);
    }
    return () => {
      if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {
        ref.current.removeEventListener("beforeinput", onDOMBeforeInput);
      }
    };
  }, [onDOMBeforeInput]);
  useIsomorphicLayoutEffect(() => {
    var window2 = ReactEditor.getWindow(editor);
    window2.document.addEventListener("selectionchange", scheduleOnDOMSelectionChange);
    return () => {
      window2.document.removeEventListener("selectionchange", scheduleOnDOMSelectionChange);
    };
  }, [scheduleOnDOMSelectionChange]);
  var decorations = decorate([editor, []]);
  if (placeholder && editor.children.length === 1 && Array.from(Node.texts(editor)).length === 1 && Node.string(editor) === "" && !isComposing) {
    var start2 = Editor.start(editor, []);
    decorations.push({
      [PLACEHOLDER_SYMBOL]: true,
      placeholder,
      anchor: start2,
      focus: start2
    });
  }
  var {
    marks: marks3
  } = editor;
  state.hasMarkPlaceholder = false;
  if (editor.selection && Range.isCollapsed(editor.selection) && marks3) {
    var {
      anchor
    } = editor.selection;
    var leaf3 = Node.leaf(editor, anchor.path);
    var rest = _objectWithoutProperties2(leaf3, _excluded22);
    if (!Text.equals(leaf3, marks3, {
      loose: true
    })) {
      state.hasMarkPlaceholder = true;
      var unset = Object.fromEntries(Object.keys(rest).map((mark) => [mark, null]));
      decorations.push(_objectSpread$12(_objectSpread$12(_objectSpread$12({
        [MARK_PLACEHOLDER_SYMBOL]: true
      }, unset), marks3), {}, {
        anchor,
        focus: anchor
      }));
    }
  }
  (0, import_react.useEffect)(() => {
    setTimeout(() => {
      var {
        selection
      } = editor;
      if (selection) {
        var {
          anchor: _anchor
        } = selection;
        var _text = Node.leaf(editor, _anchor.path);
        if (marks3 && !Text.equals(_text, marks3, {
          loose: true
        })) {
          EDITOR_TO_PENDING_INSERTION_MARKS.set(editor, marks3);
          return;
        }
      }
      EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);
    });
  });
  var placeholderHeight = (_EDITOR_TO_PLACEHOLDE = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor)) === null || _EDITOR_TO_PLACEHOLDE === void 0 ? void 0 : (_EDITOR_TO_PLACEHOLDE2 = _EDITOR_TO_PLACEHOLDE.getBoundingClientRect()) === null || _EDITOR_TO_PLACEHOLDE2 === void 0 ? void 0 : _EDITOR_TO_PLACEHOLDE2.height;
  return /* @__PURE__ */ import_react.default.createElement(ReadOnlyContext.Provider, {
    value: readOnly
  }, /* @__PURE__ */ import_react.default.createElement(DecorateContext.Provider, {
    value: decorate
  }, /* @__PURE__ */ import_react.default.createElement(RestoreDOM, {
    node: ref,
    receivedUserInput
  }, /* @__PURE__ */ import_react.default.createElement(Component2, Object.assign({
    role: readOnly ? void 0 : "textbox",
    "aria-multiline": readOnly ? void 0 : true
  }, attributes, {
    // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd
    // have to use hacks to make these replacement-based features work.
    // For SSR situations HAS_BEFORE_INPUT_SUPPORT is false and results in prop
    // mismatch warning app moves to browser. Pass-through consumer props when
    // not CAN_USE_DOM (SSR) and default to falsy value
    spellCheck: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.spellCheck : false,
    autoCorrect: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCorrect : "false",
    autoCapitalize: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCapitalize : "false",
    "data-slate-editor": true,
    "data-slate-node": "value",
    // explicitly set this
    contentEditable: !readOnly,
    // in some cases, a decoration needs access to the range / selection to decorate a text node,
    // then you will select the whole text node when you select part the of text
    // this magic zIndex="-1" will fix it
    zindex: -1,
    suppressContentEditableWarning: true,
    ref,
    style: _objectSpread$12(_objectSpread$12({}, disableDefaultStyles ? {} : _objectSpread$12({
      // Allow positioning relative to the editable element.
      position: "relative",
      // Prevent the default outline styles.
      outline: "none",
      // Preserve adjacent whitespace and new lines.
      whiteSpace: "pre-wrap",
      // Allow words to break if they are too long.
      wordWrap: "break-word"
    }, placeholderHeight ? {
      minHeight: placeholderHeight
    } : {})), userStyle),
    onBeforeInput: (0, import_react.useCallback)((event) => {
      if (!HAS_BEFORE_INPUT_SUPPORT && !readOnly && !isEventHandled(event, attributes.onBeforeInput) && ReactEditor.hasSelectableTarget(editor, event.target)) {
        event.preventDefault();
        if (!ReactEditor.isComposing(editor)) {
          var _text2 = event.data;
          Editor.insertText(editor, _text2);
        }
      }
    }, [readOnly]),
    onInput: (0, import_react.useCallback)((event) => {
      if (androidInputManager) {
        androidInputManager.handleInput();
        return;
      }
      for (var op of deferredOperations.current) {
        op();
      }
      deferredOperations.current = [];
    }, []),
    onBlur: (0, import_react.useCallback)((event) => {
      if (readOnly || state.isUpdatingSelection || !ReactEditor.hasSelectableTarget(editor, event.target) || isEventHandled(event, attributes.onBlur)) {
        return;
      }
      var root = ReactEditor.findDocumentOrShadowRoot(editor);
      if (state.latestElement === root.activeElement) {
        return;
      }
      var {
        relatedTarget
      } = event;
      var el = ReactEditor.toDOMNode(editor, editor);
      if (relatedTarget === el) {
        return;
      }
      if (isDOMElement(relatedTarget) && relatedTarget.hasAttribute("data-slate-spacer")) {
        return;
      }
      if (relatedTarget != null && isDOMNode(relatedTarget) && ReactEditor.hasDOMNode(editor, relatedTarget)) {
        var node3 = ReactEditor.toSlateNode(editor, relatedTarget);
        if (Element2.isElement(node3) && !editor.isVoid(node3)) {
          return;
        }
      }
      if (IS_SAFARI) {
        var domSelection = root.getSelection();
        domSelection === null || domSelection === void 0 ? void 0 : domSelection.removeAllRanges();
      }
      IS_FOCUSED.delete(editor);
    }, [readOnly, attributes.onBlur]),
    onClick: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onClick) && isDOMNode(event.target)) {
        var node3 = ReactEditor.toSlateNode(editor, event.target);
        var path3 = ReactEditor.findPath(editor, node3);
        if (!Editor.hasPath(editor, path3) || Node.get(editor, path3) !== node3) {
          return;
        }
        if (event.detail === TRIPLE_CLICK && path3.length >= 1) {
          var blockPath = path3;
          if (!(Element2.isElement(node3) && Editor.isBlock(editor, node3))) {
            var _block$;
            var block = Editor.above(editor, {
              match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
              at: path3
            });
            blockPath = (_block$ = block === null || block === void 0 ? void 0 : block[1]) !== null && _block$ !== void 0 ? _block$ : path3.slice(0, 1);
          }
          var range2 = Editor.range(editor, blockPath);
          Transforms.select(editor, range2);
          return;
        }
        if (readOnly) {
          return;
        }
        var _start = Editor.start(editor, path3);
        var end2 = Editor.end(editor, path3);
        var startVoid = Editor.void(editor, {
          at: _start
        });
        var endVoid = Editor.void(editor, {
          at: end2
        });
        if (startVoid && endVoid && Path.equals(startVoid[1], endVoid[1])) {
          var _range = Editor.range(editor, _start);
          Transforms.select(editor, _range);
        }
      }
    }, [readOnly, attributes.onClick]),
    onCompositionEnd: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target)) {
        if (ReactEditor.isComposing(editor)) {
          setIsComposing(false);
          IS_COMPOSING.set(editor, false);
        }
        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleCompositionEnd(event);
        if (isEventHandled(event, attributes.onCompositionEnd) || IS_ANDROID) {
          return;
        }
        if (!IS_SAFARI && !IS_FIREFOX_LEGACY && !IS_IOS && !IS_WECHATBROWSER && !IS_UC_MOBILE && event.data) {
          var placeholderMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);
          EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);
          if (placeholderMarks !== void 0) {
            EDITOR_TO_USER_MARKS.set(editor, editor.marks);
            editor.marks = placeholderMarks;
          }
          Editor.insertText(editor, event.data);
          var userMarks = EDITOR_TO_USER_MARKS.get(editor);
          EDITOR_TO_USER_MARKS.delete(editor);
          if (userMarks !== void 0) {
            editor.marks = userMarks;
          }
        }
      }
    }, [attributes.onCompositionEnd]),
    onCompositionUpdate: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionUpdate)) {
        if (!ReactEditor.isComposing(editor)) {
          setIsComposing(true);
          IS_COMPOSING.set(editor, true);
        }
      }
    }, [attributes.onCompositionUpdate]),
    onCompositionStart: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target)) {
        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleCompositionStart(event);
        if (isEventHandled(event, attributes.onCompositionStart) || IS_ANDROID) {
          return;
        }
        setIsComposing(true);
        var {
          selection
        } = editor;
        if (selection) {
          if (Range.isExpanded(selection)) {
            Editor.deleteFragment(editor);
            return;
          }
          var inline = Editor.above(editor, {
            match: (n3) => Element2.isElement(n3) && Editor.isInline(editor, n3),
            mode: "highest"
          });
          if (inline) {
            var [, inlinePath] = inline;
            if (Editor.isEnd(editor, selection.anchor, inlinePath)) {
              var point3 = Editor.after(editor, inlinePath);
              Transforms.setSelection(editor, {
                anchor: point3,
                focus: point3
              });
            }
          }
        }
      }
    }, [attributes.onCompositionStart]),
    onCopy: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCopy)) {
        event.preventDefault();
        ReactEditor.setFragmentData(editor, event.clipboardData, "copy");
      }
    }, [attributes.onCopy]),
    onCut: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCut)) {
        event.preventDefault();
        ReactEditor.setFragmentData(editor, event.clipboardData, "cut");
        var {
          selection
        } = editor;
        if (selection) {
          if (Range.isExpanded(selection)) {
            Editor.deleteFragment(editor);
          } else {
            var node3 = Node.parent(editor, selection.anchor.path);
            if (Editor.isVoid(editor, node3)) {
              Transforms.delete(editor);
            }
          }
        }
      }
    }, [readOnly, attributes.onCut]),
    onDragOver: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragOver)) {
        var node3 = ReactEditor.toSlateNode(editor, event.target);
        if (Element2.isElement(node3) && Editor.isVoid(editor, node3)) {
          event.preventDefault();
        }
      }
    }, [attributes.onDragOver]),
    onDragStart: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragStart)) {
        var node3 = ReactEditor.toSlateNode(editor, event.target);
        var path3 = ReactEditor.findPath(editor, node3);
        var voidMatch = Element2.isElement(node3) && Editor.isVoid(editor, node3) || Editor.void(editor, {
          at: path3,
          voids: true
        });
        if (voidMatch) {
          var range2 = Editor.range(editor, path3);
          Transforms.select(editor, range2);
        }
        state.isDraggingInternally = true;
        ReactEditor.setFragmentData(editor, event.dataTransfer, "drag");
      }
    }, [readOnly, attributes.onDragStart]),
    onDrop: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDrop)) {
        event.preventDefault();
        var draggedRange = editor.selection;
        var range2 = ReactEditor.findEventRange(editor, event);
        var data = event.dataTransfer;
        Transforms.select(editor, range2);
        if (state.isDraggingInternally) {
          if (draggedRange && !Range.equals(draggedRange, range2) && !Editor.void(editor, {
            at: range2,
            voids: true
          })) {
            Transforms.delete(editor, {
              at: draggedRange
            });
          }
        }
        ReactEditor.insertData(editor, data);
        if (!ReactEditor.isFocused(editor)) {
          ReactEditor.focus(editor);
        }
      }
      state.isDraggingInternally = false;
    }, [readOnly, attributes.onDrop]),
    onDragEnd: (0, import_react.useCallback)((event) => {
      if (!readOnly && state.isDraggingInternally && attributes.onDragEnd && ReactEditor.hasTarget(editor, event.target)) {
        attributes.onDragEnd(event);
      }
      state.isDraggingInternally = false;
    }, [readOnly, attributes.onDragEnd]),
    onFocus: (0, import_react.useCallback)((event) => {
      if (!readOnly && !state.isUpdatingSelection && ReactEditor.hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onFocus)) {
        var el = ReactEditor.toDOMNode(editor, editor);
        var root = ReactEditor.findDocumentOrShadowRoot(editor);
        state.latestElement = root.activeElement;
        if (IS_FIREFOX && event.target !== el) {
          el.focus();
          return;
        }
        IS_FOCUSED.set(editor, true);
      }
    }, [readOnly, attributes.onFocus]),
    onKeyDown: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target)) {
        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleKeyDown(event);
        var {
          nativeEvent
        } = event;
        if (ReactEditor.isComposing(editor) && nativeEvent.isComposing === false) {
          IS_COMPOSING.set(editor, false);
          setIsComposing(false);
        }
        if (isEventHandled(event, attributes.onKeyDown) || ReactEditor.isComposing(editor)) {
          return;
        }
        var {
          selection
        } = editor;
        var element = editor.children[selection !== null ? selection.focus.path[0] : 0];
        var isRTL = (0, import_direction.default)(Node.string(element)) === "rtl";
        if (Hotkeys.isRedo(nativeEvent)) {
          event.preventDefault();
          var maybeHistoryEditor = editor;
          if (typeof maybeHistoryEditor.redo === "function") {
            maybeHistoryEditor.redo();
          }
          return;
        }
        if (Hotkeys.isUndo(nativeEvent)) {
          event.preventDefault();
          var _maybeHistoryEditor = editor;
          if (typeof _maybeHistoryEditor.undo === "function") {
            _maybeHistoryEditor.undo();
          }
          return;
        }
        if (Hotkeys.isMoveLineBackward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line",
            reverse: true
          });
          return;
        }
        if (Hotkeys.isMoveLineForward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line"
          });
          return;
        }
        if (Hotkeys.isExtendLineBackward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line",
            edge: "focus",
            reverse: true
          });
          return;
        }
        if (Hotkeys.isExtendLineForward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line",
            edge: "focus"
          });
          return;
        }
        if (Hotkeys.isMoveBackward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isCollapsed(selection)) {
            Transforms.move(editor, {
              reverse: !isRTL
            });
          } else {
            Transforms.collapse(editor, {
              edge: "start"
            });
          }
          return;
        }
        if (Hotkeys.isMoveForward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isCollapsed(selection)) {
            Transforms.move(editor, {
              reverse: isRTL
            });
          } else {
            Transforms.collapse(editor, {
              edge: "end"
            });
          }
          return;
        }
        if (Hotkeys.isMoveWordBackward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isExpanded(selection)) {
            Transforms.collapse(editor, {
              edge: "focus"
            });
          }
          Transforms.move(editor, {
            unit: "word",
            reverse: !isRTL
          });
          return;
        }
        if (Hotkeys.isMoveWordForward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isExpanded(selection)) {
            Transforms.collapse(editor, {
              edge: "focus"
            });
          }
          Transforms.move(editor, {
            unit: "word",
            reverse: isRTL
          });
          return;
        }
        if (!HAS_BEFORE_INPUT_SUPPORT) {
          if (Hotkeys.isBold(nativeEvent) || Hotkeys.isItalic(nativeEvent) || Hotkeys.isTransposeCharacter(nativeEvent)) {
            event.preventDefault();
            return;
          }
          if (Hotkeys.isSoftBreak(nativeEvent)) {
            event.preventDefault();
            Editor.insertSoftBreak(editor);
            return;
          }
          if (Hotkeys.isSplitBlock(nativeEvent)) {
            event.preventDefault();
            Editor.insertBreak(editor);
            return;
          }
          if (Hotkeys.isDeleteBackward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "backward"
              });
            } else {
              Editor.deleteBackward(editor);
            }
            return;
          }
          if (Hotkeys.isDeleteForward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "forward"
              });
            } else {
              Editor.deleteForward(editor);
            }
            return;
          }
          if (Hotkeys.isDeleteLineBackward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "backward"
              });
            } else {
              Editor.deleteBackward(editor, {
                unit: "line"
              });
            }
            return;
          }
          if (Hotkeys.isDeleteLineForward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "forward"
              });
            } else {
              Editor.deleteForward(editor, {
                unit: "line"
              });
            }
            return;
          }
          if (Hotkeys.isDeleteWordBackward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "backward"
              });
            } else {
              Editor.deleteBackward(editor, {
                unit: "word"
              });
            }
            return;
          }
          if (Hotkeys.isDeleteWordForward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "forward"
              });
            } else {
              Editor.deleteForward(editor, {
                unit: "word"
              });
            }
            return;
          }
        } else {
          if (IS_CHROME || IS_SAFARI) {
            if (selection && (Hotkeys.isDeleteBackward(nativeEvent) || Hotkeys.isDeleteForward(nativeEvent)) && Range.isCollapsed(selection)) {
              var currentNode = Node.parent(editor, selection.anchor.path);
              if (Element2.isElement(currentNode) && Editor.isVoid(editor, currentNode) && (Editor.isInline(editor, currentNode) || Editor.isBlock(editor, currentNode))) {
                event.preventDefault();
                Editor.deleteBackward(editor, {
                  unit: "block"
                });
                return;
              }
            }
          }
        }
      }
    }, [readOnly, attributes.onKeyDown]),
    onPaste: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onPaste)) {
        if (!HAS_BEFORE_INPUT_SUPPORT || isPlainTextOnlyPaste(event.nativeEvent)) {
          event.preventDefault();
          ReactEditor.insertData(editor, event.clipboardData);
        }
      }
    }, [readOnly, attributes.onPaste])
  }), /* @__PURE__ */ import_react.default.createElement(Children, {
    decorations,
    node: editor,
    renderElement,
    renderPlaceholder,
    renderLeaf,
    selection: editor.selection
  })))));
};
var DefaultPlaceholder = (_ref) => {
  var {
    attributes,
    children
  } = _ref;
  return (
    // COMPAT: Artificially add a line-break to the end on the placeholder element
    // to prevent Android IMEs to pick up its content in autocorrect and to auto-capitalize the first letter
    /* @__PURE__ */ import_react.default.createElement("span", Object.assign({}, attributes), children, IS_ANDROID && /* @__PURE__ */ import_react.default.createElement("br", null))
  );
};
var defaultDecorate = () => [];
var defaultScrollSelectionIntoView = (editor, domRange) => {
  if (domRange.getBoundingClientRect && (!editor.selection || editor.selection && Range.isCollapsed(editor.selection))) {
    var leafEl = domRange.startContainer.parentElement;
    leafEl.getBoundingClientRect = domRange.getBoundingClientRect.bind(domRange);
    es_default(leafEl, {
      scrollMode: "if-needed"
    });
    delete leafEl.getBoundingClientRect;
  }
};
var isEventHandled = (event, handler) => {
  if (!handler) {
    return false;
  }
  var shouldTreatEventAsHandled = handler(event);
  if (shouldTreatEventAsHandled != null) {
    return shouldTreatEventAsHandled;
  }
  return event.isDefaultPrevented() || event.isPropagationStopped();
};
var isDOMEventHandled = (event, handler) => {
  if (!handler) {
    return false;
  }
  var shouldTreatEventAsHandled = handler(event);
  if (shouldTreatEventAsHandled != null) {
    return shouldTreatEventAsHandled;
  }
  return event.defaultPrevented;
};
var FocusedContext = /* @__PURE__ */ (0, import_react.createContext)(false);
var SlateSelectorContext = /* @__PURE__ */ (0, import_react.createContext)({});
function getSelectorContext(editor) {
  var eventListeners = (0, import_react.useRef)([]).current;
  var slateRef = (0, import_react.useRef)({
    editor
  }).current;
  var onChange = (0, import_react.useCallback)((editor2) => {
    slateRef.editor = editor2;
    eventListeners.forEach((listener) => listener(editor2));
  }, []);
  var selectorContext = (0, import_react.useMemo)(() => {
    return {
      getSlate: () => slateRef.editor,
      addEventListener: (callback) => {
        eventListeners.push(callback);
        return () => {
          eventListeners.splice(eventListeners.indexOf(callback), 1);
        };
      }
    };
  }, [eventListeners, slateRef]);
  return {
    selectorContext,
    onChange
  };
}
var _excluded3 = ["editor", "children", "onChange", "value"];
var Slate = (props) => {
  var {
    editor,
    children,
    onChange,
    value
  } = props, rest = _objectWithoutProperties2(props, _excluded3);
  var unmountRef = (0, import_react.useRef)(false);
  var [context, setContext] = import_react.default.useState(() => {
    if (!Node.isNodeList(value)) {
      throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(Scrubber.stringify(value)));
    }
    if (!Editor.isEditor(editor)) {
      throw new Error("[Slate] editor is invalid! You passed: ".concat(Scrubber.stringify(editor)));
    }
    editor.children = value;
    Object.assign(editor, rest);
    return {
      v: 0,
      editor
    };
  });
  var {
    selectorContext,
    onChange: handleSelectorChange
  } = getSelectorContext(editor);
  var onContextChange = (0, import_react.useCallback)(() => {
    if (onChange) {
      onChange(editor.children);
    }
    setContext((prevContext) => ({
      v: prevContext.v + 1,
      editor
    }));
    handleSelectorChange(editor);
  }, [onChange]);
  (0, import_react.useEffect)(() => {
    EDITOR_TO_ON_CHANGE.set(editor, onContextChange);
    return () => {
      EDITOR_TO_ON_CHANGE.set(editor, () => {
      });
      unmountRef.current = true;
    };
  }, []);
  var [isFocused, setIsFocused] = (0, import_react.useState)(ReactEditor.isFocused(editor));
  (0, import_react.useEffect)(() => {
    setIsFocused(ReactEditor.isFocused(editor));
  });
  useIsomorphicLayoutEffect(() => {
    var fn = () => setIsFocused(ReactEditor.isFocused(editor));
    if (IS_REACT_VERSION_17_OR_ABOVE) {
      document.addEventListener("focusin", fn);
      document.addEventListener("focusout", fn);
      return () => {
        document.removeEventListener("focusin", fn);
        document.removeEventListener("focusout", fn);
      };
    } else {
      document.addEventListener("focus", fn, true);
      document.addEventListener("blur", fn, true);
      return () => {
        document.removeEventListener("focus", fn, true);
        document.removeEventListener("blur", fn, true);
      };
    }
  }, []);
  return /* @__PURE__ */ import_react.default.createElement(SlateSelectorContext.Provider, {
    value: selectorContext
  }, /* @__PURE__ */ import_react.default.createElement(SlateContext.Provider, {
    value: context
  }, /* @__PURE__ */ import_react.default.createElement(EditorContext.Provider, {
    value: context.editor
  }, /* @__PURE__ */ import_react.default.createElement(FocusedContext.Provider, {
    value: isFocused
  }, children))));
};
var doRectsIntersect = (rect, compareRect) => {
  var middle = (compareRect.top + compareRect.bottom) / 2;
  return rect.top <= middle && rect.bottom >= middle;
};
var areRangesSameLine = (editor, range1, range2) => {
  var rect1 = ReactEditor.toDOMRange(editor, range1).getBoundingClientRect();
  var rect2 = ReactEditor.toDOMRange(editor, range2).getBoundingClientRect();
  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1);
};
var findCurrentLineRange = (editor, parentRange) => {
  var parentRangeBoundary = Editor.range(editor, Range.end(parentRange));
  var positions2 = Array.from(Editor.positions(editor, {
    at: parentRange
  }));
  var left = 0;
  var right = positions2.length;
  var middle = Math.floor(right / 2);
  if (areRangesSameLine(editor, Editor.range(editor, positions2[left]), parentRangeBoundary)) {
    return Editor.range(editor, positions2[left], parentRangeBoundary);
  }
  if (positions2.length < 2) {
    return Editor.range(editor, positions2[positions2.length - 1], parentRangeBoundary);
  }
  while (middle !== positions2.length && middle !== left) {
    if (areRangesSameLine(editor, Editor.range(editor, positions2[middle]), parentRangeBoundary)) {
      right = middle;
    } else {
      left = middle;
    }
    middle = Math.floor((left + right) / 2);
  }
  return Editor.range(editor, positions2[right], parentRangeBoundary);
};
function ownKeys2(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread2(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys2(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys2(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var withReact = (editor) => {
  var e2 = editor;
  var {
    apply: apply2,
    onChange,
    deleteBackward: deleteBackward2,
    addMark: addMark2,
    removeMark: removeMark2
  } = e2;
  EDITOR_TO_KEY_TO_ELEMENT.set(e2, /* @__PURE__ */ new WeakMap());
  e2.addMark = (key, value) => {
    var _EDITOR_TO_SCHEDULE_F, _EDITOR_TO_PENDING_DI;
    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(e2)) === null || _EDITOR_TO_SCHEDULE_F === void 0 ? void 0 : _EDITOR_TO_SCHEDULE_F();
    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e2) && (_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(e2)) !== null && _EDITOR_TO_PENDING_DI !== void 0 && _EDITOR_TO_PENDING_DI.length) {
      EDITOR_TO_PENDING_INSERTION_MARKS.set(e2, null);
    }
    EDITOR_TO_USER_MARKS.delete(e2);
    addMark2(key, value);
  };
  e2.removeMark = (key) => {
    var _EDITOR_TO_PENDING_DI2;
    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e2) && (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(e2)) !== null && _EDITOR_TO_PENDING_DI2 !== void 0 && _EDITOR_TO_PENDING_DI2.length) {
      EDITOR_TO_PENDING_INSERTION_MARKS.set(e2, null);
    }
    EDITOR_TO_USER_MARKS.delete(e2);
    removeMark2(key);
  };
  e2.deleteBackward = (unit) => {
    if (unit !== "line") {
      return deleteBackward2(unit);
    }
    if (e2.selection && Range.isCollapsed(e2.selection)) {
      var parentBlockEntry = Editor.above(e2, {
        match: (n3) => Element2.isElement(n3) && Editor.isBlock(e2, n3),
        at: e2.selection
      });
      if (parentBlockEntry) {
        var [, parentBlockPath] = parentBlockEntry;
        var parentElementRange = Editor.range(e2, parentBlockPath, e2.selection.anchor);
        var currentLineRange = findCurrentLineRange(e2, parentElementRange);
        if (!Range.isCollapsed(currentLineRange)) {
          Transforms.delete(e2, {
            at: currentLineRange
          });
        }
      }
    }
  };
  e2.apply = (op) => {
    var matches = [];
    var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(e2);
    if (pendingDiffs !== null && pendingDiffs !== void 0 && pendingDiffs.length) {
      var transformed = pendingDiffs.map((textDiff) => transformTextDiff(textDiff, op)).filter(Boolean);
      EDITOR_TO_PENDING_DIFFS.set(e2, transformed);
    }
    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(e2);
    if (pendingSelection) {
      EDITOR_TO_PENDING_SELECTION.set(e2, transformPendingRange(e2, pendingSelection, op));
    }
    var pendingAction = EDITOR_TO_PENDING_ACTION.get(e2);
    if (pendingAction !== null && pendingAction !== void 0 && pendingAction.at) {
      var at = Point.isPoint(pendingAction === null || pendingAction === void 0 ? void 0 : pendingAction.at) ? transformPendingPoint(e2, pendingAction.at, op) : transformPendingRange(e2, pendingAction.at, op);
      EDITOR_TO_PENDING_ACTION.set(e2, at ? _objectSpread2(_objectSpread2({}, pendingAction), {}, {
        at
      }) : null);
    }
    switch (op.type) {
      case "insert_text":
      case "remove_text":
      case "set_node":
      case "split_node": {
        matches.push(...getMatches(e2, op.path));
        break;
      }
      case "set_selection": {
        var _EDITOR_TO_USER_SELEC;
        (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(e2)) === null || _EDITOR_TO_USER_SELEC === void 0 ? void 0 : _EDITOR_TO_USER_SELEC.unref();
        EDITOR_TO_USER_SELECTION.delete(e2);
        break;
      }
      case "insert_node":
      case "remove_node": {
        matches.push(...getMatches(e2, Path.parent(op.path)));
        break;
      }
      case "merge_node": {
        var prevPath = Path.previous(op.path);
        matches.push(...getMatches(e2, prevPath));
        break;
      }
      case "move_node": {
        var commonPath = Path.common(Path.parent(op.path), Path.parent(op.newPath));
        matches.push(...getMatches(e2, commonPath));
        break;
      }
    }
    apply2(op);
    for (var [path3, key] of matches) {
      var [node3] = Editor.node(e2, path3);
      NODE_TO_KEY.set(node3, key);
    }
  };
  e2.setFragmentData = (data) => {
    var {
      selection
    } = e2;
    if (!selection) {
      return;
    }
    var [start2, end2] = Range.edges(selection);
    var startVoid = Editor.void(e2, {
      at: start2.path
    });
    var endVoid = Editor.void(e2, {
      at: end2.path
    });
    if (Range.isCollapsed(selection) && !startVoid) {
      return;
    }
    var domRange = ReactEditor.toDOMRange(e2, selection);
    var contents = domRange.cloneContents();
    var attach = contents.childNodes[0];
    contents.childNodes.forEach((node3) => {
      if (node3.textContent && node3.textContent.trim() !== "") {
        attach = node3;
      }
    });
    if (endVoid) {
      var [voidNode] = endVoid;
      var r2 = domRange.cloneRange();
      var domNode = ReactEditor.toDOMNode(e2, voidNode);
      r2.setEndAfter(domNode);
      contents = r2.cloneContents();
    }
    if (startVoid) {
      attach = contents.querySelector("[data-slate-spacer]");
    }
    Array.from(contents.querySelectorAll("[data-slate-zero-width]")).forEach((zw) => {
      var isNewline = zw.getAttribute("data-slate-zero-width") === "n";
      zw.textContent = isNewline ? "\n" : "";
    });
    if (isDOMText(attach)) {
      var span = attach.ownerDocument.createElement("span");
      span.style.whiteSpace = "pre";
      span.appendChild(attach);
      contents.appendChild(span);
      attach = span;
    }
    var fragment2 = e2.getFragment();
    var string3 = JSON.stringify(fragment2);
    var encoded = window.btoa(encodeURIComponent(string3));
    attach.setAttribute("data-slate-fragment", encoded);
    data.setData("application/x-slate-fragment", encoded);
    var div = contents.ownerDocument.createElement("div");
    div.appendChild(contents);
    div.setAttribute("hidden", "true");
    contents.ownerDocument.body.appendChild(div);
    data.setData("text/html", div.innerHTML);
    data.setData("text/plain", getPlainText(div));
    contents.ownerDocument.body.removeChild(div);
    return data;
  };
  e2.insertData = (data) => {
    if (!e2.insertFragmentData(data)) {
      e2.insertTextData(data);
    }
  };
  e2.insertFragmentData = (data) => {
    var fragment2 = data.getData("application/x-slate-fragment") || getSlateFragmentAttribute(data);
    if (fragment2) {
      var decoded = decodeURIComponent(window.atob(fragment2));
      var parsed = JSON.parse(decoded);
      e2.insertFragment(parsed);
      return true;
    }
    return false;
  };
  e2.insertTextData = (data) => {
    var text = data.getData("text/plain");
    if (text) {
      var lines = text.split(/\r\n|\r|\n/);
      var split = false;
      for (var line of lines) {
        if (split) {
          Transforms.splitNodes(e2, {
            always: true
          });
        }
        e2.insertText(line);
        split = true;
      }
      return true;
    }
    return false;
  };
  e2.onChange = () => {
    import_react_dom.default.unstable_batchedUpdates(() => {
      var onContextChange = EDITOR_TO_ON_CHANGE.get(e2);
      if (onContextChange) {
        onContextChange();
      }
      onChange();
    });
  };
  return e2;
};
var getMatches = (e2, path3) => {
  var matches = [];
  for (var [n3, p] of Editor.levels(e2, {
    at: path3
  })) {
    var key = ReactEditor.findKey(e2, n3);
    matches.push([p, key]);
  }
  return matches;
};

// ../node_modules/slate-history/dist/index.es.js
var History = {
  /**
   * Check if a value is a `History` object.
   */
  isHistory(value) {
    return isPlainObject(value) && Array.isArray(value.redos) && Array.isArray(value.undos) && (value.redos.length === 0 || Operation.isOperationList(value.redos[0].operations)) && (value.undos.length === 0 || Operation.isOperationList(value.undos[0].operations));
  }
};
var SAVING = /* @__PURE__ */ new WeakMap();
var MERGING = /* @__PURE__ */ new WeakMap();
var HistoryEditor = {
  /**
   * Check if a value is a `HistoryEditor` object.
   */
  isHistoryEditor(value) {
    return History.isHistory(value.history) && Editor.isEditor(value);
  },
  /**
   * Get the merge flag's current value.
   */
  isMerging(editor) {
    return MERGING.get(editor);
  },
  /**
   * Get the saving flag's current value.
   */
  isSaving(editor) {
    return SAVING.get(editor);
  },
  /**
   * Redo to the previous saved state.
   */
  redo(editor) {
    editor.redo();
  },
  /**
   * Undo to the previous saved state.
   */
  undo(editor) {
    editor.undo();
  },
  /**
   * Apply a series of changes inside a synchronous `fn`, without merging any of
   * the new operations into previous save point in the history.
   */
  withoutMerging(editor, fn) {
    var prev = HistoryEditor.isMerging(editor);
    MERGING.set(editor, false);
    fn();
    MERGING.set(editor, prev);
  },
  /**
   * Apply a series of changes inside a synchronous `fn`, without saving any of
   * their operations into the history.
   */
  withoutSaving(editor, fn) {
    var prev = HistoryEditor.isSaving(editor);
    SAVING.set(editor, false);
    fn();
    SAVING.set(editor, prev);
  }
};
var withHistory = (editor) => {
  var e2 = editor;
  var {
    apply: apply2
  } = e2;
  e2.history = {
    undos: [],
    redos: []
  };
  e2.redo = () => {
    var {
      history
    } = e2;
    var {
      redos
    } = history;
    if (redos.length > 0) {
      var batch = redos[redos.length - 1];
      if (batch.selectionBefore) {
        Transforms.setSelection(e2, batch.selectionBefore);
      }
      HistoryEditor.withoutSaving(e2, () => {
        Editor.withoutNormalizing(e2, () => {
          for (var op of batch.operations) {
            e2.apply(op);
          }
        });
      });
      history.redos.pop();
      e2.writeHistory("undos", batch);
    }
  };
  e2.undo = () => {
    var {
      history
    } = e2;
    var {
      undos
    } = history;
    if (undos.length > 0) {
      var batch = undos[undos.length - 1];
      HistoryEditor.withoutSaving(e2, () => {
        Editor.withoutNormalizing(e2, () => {
          var inverseOps = batch.operations.map(Operation.inverse).reverse();
          for (var op of inverseOps) {
            e2.apply(op);
          }
          if (batch.selectionBefore) {
            Transforms.setSelection(e2, batch.selectionBefore);
          }
        });
      });
      e2.writeHistory("redos", batch);
      history.undos.pop();
    }
  };
  e2.apply = (op) => {
    var {
      operations,
      history
    } = e2;
    var {
      undos
    } = history;
    var lastBatch = undos[undos.length - 1];
    var lastOp = lastBatch && lastBatch.operations[lastBatch.operations.length - 1];
    var save = HistoryEditor.isSaving(e2);
    var merge = HistoryEditor.isMerging(e2);
    if (save == null) {
      save = shouldSave(op);
    }
    if (save) {
      if (merge == null) {
        if (lastBatch == null) {
          merge = false;
        } else if (operations.length !== 0) {
          merge = true;
        } else {
          merge = shouldMerge(op, lastOp);
        }
      }
      if (lastBatch && merge) {
        lastBatch.operations.push(op);
      } else {
        var batch = {
          operations: [op],
          selectionBefore: e2.selection
        };
        e2.writeHistory("undos", batch);
      }
      while (undos.length > 100) {
        undos.shift();
      }
      history.redos = [];
    }
    apply2(op);
  };
  e2.writeHistory = (stack, batch) => {
    e2.history[stack].push(batch);
  };
  return e2;
};
var shouldMerge = (op, prev) => {
  if (prev && op.type === "insert_text" && prev.type === "insert_text" && op.offset === prev.offset + prev.text.length && Path.equals(op.path, prev.path)) {
    return true;
  }
  if (prev && op.type === "remove_text" && prev.type === "remove_text" && op.offset + op.text.length === prev.offset && Path.equals(op.path, prev.path)) {
    return true;
  }
  return false;
};
var shouldSave = (op, prev) => {
  if (op.type === "set_selection") {
    return false;
  }
  return true;
};

// ../node_modules/pretty-bytes/index.js
var BYTE_UNITS = [
  "B",
  "kB",
  "MB",
  "GB",
  "TB",
  "PB",
  "EB",
  "ZB",
  "YB"
];
var BIBYTE_UNITS = [
  "B",
  "KiB",
  "MiB",
  "GiB",
  "TiB",
  "PiB",
  "EiB",
  "ZiB",
  "YiB"
];
var BIT_UNITS = [
  "b",
  "kbit",
  "Mbit",
  "Gbit",
  "Tbit",
  "Pbit",
  "Ebit",
  "Zbit",
  "Ybit"
];
var BIBIT_UNITS = [
  "b",
  "kibit",
  "Mibit",
  "Gibit",
  "Tibit",
  "Pibit",
  "Eibit",
  "Zibit",
  "Yibit"
];
var toLocaleString = (number, locale, options) => {
  let result = number;
  if (typeof locale === "string" || Array.isArray(locale)) {
    result = number.toLocaleString(locale, options);
  } else if (locale === true || options !== void 0) {
    result = number.toLocaleString(void 0, options);
  }
  return result;
};
function prettyBytes(number, options) {
  if (!Number.isFinite(number)) {
    throw new TypeError("Expected a finite number, got ".concat(typeof number, ": ").concat(number));
  }
  options = __spreadValues({
    bits: false,
    binary: false,
    space: true
  }, options);
  const UNITS = options.bits ? options.binary ? BIBIT_UNITS : BIT_UNITS : options.binary ? BIBYTE_UNITS : BYTE_UNITS;
  const separator = options.space ? " " : "";
  if (options.signed && number === 0) {
    return " 0".concat(separator).concat(UNITS[0]);
  }
  const isNegative = number < 0;
  const prefix = isNegative ? "-" : options.signed ? "+" : "";
  if (isNegative) {
    number = -number;
  }
  let localeOptions;
  if (options.minimumFractionDigits !== void 0) {
    localeOptions = { minimumFractionDigits: options.minimumFractionDigits };
  }
  if (options.maximumFractionDigits !== void 0) {
    localeOptions = __spreadValues({ maximumFractionDigits: options.maximumFractionDigits }, localeOptions);
  }
  if (number < 1) {
    const numberString2 = toLocaleString(number, options.locale, localeOptions);
    return prefix + numberString2 + separator + UNITS[0];
  }
  const exponent = Math.min(Math.floor(options.binary ? Math.log(number) / Math.log(1024) : Math.log10(number) / 3), UNITS.length - 1);
  number /= (options.binary ? 1024 : 1e3) ** exponent;
  if (!localeOptions) {
    number = number.toPrecision(3);
  }
  const numberString = toLocaleString(Number(number), options.locale, localeOptions);
  const unit = UNITS[exponent];
  return prefix + numberString + separator + unit;
}

// ../editor/slate/current-element.tsx
var import_react2 = __toESM(require_react());
var CurrentElementContext = import_react2.default.createContext(null);
var CurrentElementProvider = class extends import_react2.default.PureComponent {
  render() {
    return /* @__PURE__ */ import_react2.default.createElement(CurrentElementContext.Provider, { value: this.props }, this.props.children);
  }
};
var CurrentElementRetrieverOptimizer = class extends import_react2.default.PureComponent {
  render() {
    return this.props.fn({
      attributes: this.props.attributes,
      children: this.props.children,
      element: this.props.element
    }, this.props.isSelected, this.props.selectionCriteria, this.props.selectionIsPrimary);
  }
};
var CurrentElementRetriever = class extends import_react2.default.PureComponent {
  constructor(props) {
    super(props);
    this.consume = this.consume.bind(this);
  }
  consume(selection) {
    const elementInQuestion = this.props.element;
    let isSelected = false;
    let selectionCriteria = null;
    let selectionIsPrimary = false;
    if (isBlock(elementInQuestion)) {
      selectionCriteria = "block";
      isSelected = selection.block === elementInQuestion;
      selectionIsPrimary = isSelected && !selection.inline;
    } else if (isSuperBlock(elementInQuestion)) {
      selectionCriteria = "superblock";
      const index = selection.superblocks.findIndex((e2) => e2 === elementInQuestion);
      isSelected = index !== -1;
      selectionIsPrimary = isSelected && !selection.block && !selection.inline && index === selection.superblocks.length - 1;
    } else {
      selectionCriteria = "inline";
      isSelected = selection.inline === elementInQuestion;
      selectionIsPrimary = isSelected;
    }
    return /* @__PURE__ */ import_react2.default.createElement(
      CurrentElementRetrieverOptimizer,
      __spreadProps(__spreadValues({}, this.props), {
        isSelected,
        selectionCriteria,
        selectionIsPrimary
      })
    );
  }
  render() {
    return /* @__PURE__ */ import_react2.default.createElement(CurrentElementContext.Consumer, null, this.consume);
  }
};

// ../util/index.ts
var import_deep_equal = __toESM(require_deep_equal());
function countSize(root) {
  if (typeof root.text === "string") {
    return root.text.length;
  }
  const counts = root.children.map(countSize);
  if (counts.length === 0) {
    return 0;
  } else if (counts.length === 1) {
    return counts[0];
  }
  return counts.reduce((a, b) => a + b);
}
function countSizeAndWords(root) {
  if (typeof root.text === "string") {
    return [
      root.text.length,
      root.text.split(" ").filter((v) => v !== "").length
    ];
  }
  const results = root.children.map(countSizeAndWords);
  if (results.length === 0) {
    return [0, 0];
  } else if (results.length === 1) {
    return results[0];
  }
  return results.reduce((a, b) => {
    return [a[0] + b[0], a[1] + b[1]];
  });
}

// ../editor/index.ts
function localeReplacer(str, ...args) {
  return str.replace(/\{(\d+)\}/g, (match, indexMatch) => {
    if (typeof args[indexMatch] === "undefined") {
      return "?";
    } else if (args[indexMatch] === null) {
      return "";
    }
    return args[indexMatch].toString();
  });
}
var mimeExtensions = {
  "audio/aac": "aac",
  "application/x-abiword": "abw",
  "application/x-freearc": "arc",
  "video/x-msvideo": "avi",
  "application/vnd.amazon.ebook": "azw",
  "application/octet-stream": "bin",
  "image/bmp": "bmp",
  "application/x-bzip": "bz",
  "application/x-bzip2": "bz2",
  "application/x-csh": "csh",
  "text/css": "css",
  "text/csv": "csv",
  "application/msword": "doc",
  "application/vnd.openxmlformats-officedocument.wordprocessingml.document": "docx",
  "application/vnd.ms-fontobject": "eot",
  "application/epub+zip": "epub",
  "image/gif": "gif",
  "text/html": "html",
  "image/vnd.microsoft.icon": "ico",
  "text/calendar": "ics",
  "application/java-archive": "jar",
  "image/jpeg": "jpg",
  "text/javascript": "js",
  "application/json": "json",
  "application/ld+json": "jsonld",
  "audio/midi audio/x-midi": "mid",
  "audio/mpeg": "mp3",
  "video/mpeg": "mpeg",
  "application/vnd.apple.installer+xml": "mpkg",
  "application/vnd.oasis.opendocument.presentation": "odp",
  "application/vnd.oasis.opendocument.spreadsheet": "ods",
  "application/vnd.oasis.opendocument.text": "odt",
  "audio/ogg": "oga",
  "video/ogg": "ogv",
  "application/ogg": "ogx",
  "font/otf": "otf",
  "image/png": "png",
  "application/pdf": "pdf",
  "application/vnd.ms-powerpoint": "ppt",
  "application/vnd.openxmlformats-officedocument.presentationml.presentation": "pptx",
  "application/x-rar-compressed": "rar",
  "application/rtf": "rtf",
  "application/x-sh": "sh",
  "image/svg+xml": "svg",
  "application/x-shockwave-flash": "swf",
  "application/x-tar": "tar",
  "image/tiff": "tiff",
  "font/ttf": "ttf",
  "text/plain": "txt",
  "application/vnd.visio": "vsd",
  "audio/wav": "wav",
  "audio/webm": "weba",
  "video/webm": "webm",
  "image/webp": "webp",
  "font/woff": "woff",
  "font/woff2": "woff2",
  "application/xhtml+xml": "xhtml",
  "application/vnd.ms-excel": "xls",
  "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": "xlsx",
  "application/xml if not readable from casual users (RFC 3023, section 3)": "xml",
  "application/vnd.mozilla.xul+xml": "xul",
  "application/zip": "zip",
  "video/3gpp": "3gp",
  "video/3gpp2": "3g2",
  "application/x-7z-compressed": "7z"
};
function mimeTypeToExtension(str) {
  const expectedExt = mimeExtensions[str];
  if (expectedExt) {
    return expectedExt;
  }
  return (str.split("/")[1] || "txt").substr(0, 3);
}
var templatedAttributes = [
  "thref",
  "textContent",
  "html",
  "forEach",
  "context",
  "uiHandler"
];
var templatedInteractiveActions = [
  "click",
  "blur",
  "focus",
  "input",
  "keydown",
  "keypress",
  "keyup",
  "mousedown",
  "mouseenter",
  "mouseleave",
  "mousemove",
  "mouseover",
  "mouseout",
  "mouseup",
  "mousewheel",
  "touchstart",
  "touchmove",
  "touchend",
  "touchcancel",
  "wheel"
];
var templatedStyledAttributes = [
  "styleHover",
  "styleActive"
];
var specialTypes = {
  "void-block": "container",
  "void-superblock": "container",
  "void-inline": "inline"
};
function getInfoFor(node3, i18nData) {
  if (node3.type === "document") {
    return null;
  }
  const isInteractive = templatedInteractiveActions.some((attr) => typeof node3[attr] !== "undefined" && node3[attr] !== null);
  const isTemplateStyled = templatedStyledAttributes.some((attr) => typeof node3[attr] !== "undefined" && node3[attr] !== null);
  const isBasicStyled = !!node3.style || node3.richClassList && node3.richClassList.length;
  const isBasicTemplated = templatedAttributes.some((attr) => typeof node3[attr] !== "undefined" && node3[attr] !== null);
  const isTemplate = isInteractive || isTemplateStyled || isBasicTemplated;
  const foundCustomName = !node3.givenName && node3.uiHandler ? i18nData.richUIHandlerElement[node3.uiHandler.replace(/-/g, "_")] : null;
  let nameLabel = node3.givenName ? node3.givenName : foundCustomName || (node3.type ? i18nData[specialTypes[node3.type] ? specialTypes[node3.type] : node3.type.replace(/-/g, "_")] || node3.type : i18nData.text);
  if (!node3.givenName && !foundCustomName) {
    if (isBasicStyled || isTemplateStyled) {
      nameLabel = localeReplacer(i18nData.styled, nameLabel);
    }
    if (isInteractive) {
      nameLabel = localeReplacer(i18nData.interactive, nameLabel);
    }
    if (isTemplate) {
      nameLabel = localeReplacer(i18nData.template, nameLabel);
    }
  }
  return {
    isTemplate,
    isInteractive,
    name: nameLabel,
    isText: typeof node3.text === "string"
  };
}

// ../editor/slate/index.tsx
var defaultBaseI18nRichInfoEnglish = {
  actions: "actions",
  alt: "alt",
  classes: "classes",
  container: "container",
  context: "context",
  custom: "custom",
  each: "loop for each",
  file: "file",
  image: "image",
  inline: "inline",
  interactive: "interactive {0}",
  link: "link",
  list: "list",
  listItem: "list item",
  name: "name",
  paragraph: "paragraph",
  quote: "quote",
  renderCondition: "render condition",
  richClasses: {},
  richContainers: {},
  richCustoms: {},
  richTables: {},
  richUIHandlerElement: {},
  settings: "settings",
  sizes: "sizes",
  standalone: "standalone",
  style: "style",
  styleActive: "style active",
  styleHover: "style hover",
  styled: "styled {0}",
  styles: "styles",
  table: "table",
  tbody: "table body",
  td: "table column",
  template: "template {0}",
  templating: "templating",
  text: "text",
  tfoot: "table footer",
  th: "table column",
  thead: "table head",
  title: "title",
  tr: "table row",
  type: "type",
  uiHandler: "ui handler",
  video: "video"
};
var ElementWrapperDisabler = import_react3.default.createContext(false);
function findLastIndex(arr, fn) {
  let currentIndex = arr.length;
  while (currentIndex--) {
    if (fn(arr[currentIndex])) {
      return currentIndex;
    }
  }
  return -1;
}
var EDITOR_POOL = /* @__PURE__ */ new Map();
function onAnyTab(ev) {
  setTimeout(() => {
    const editorElement = EDITOR_POOL.get(document.activeElement);
    EDITOR_POOL.forEach((e2) => e2 !== editorElement && e2.selectiveHardBlurIfHasSelectedElement(ev, document.activeElement instanceof HTMLElement ? document.activeElement : null));
    if (editorElement) {
      editorElement.forceFocus();
    }
  }, 70);
}
if (typeof document !== "undefined") {
  document.addEventListener("keydown", (e2) => {
    if (e2.key === "Tab") {
      onAnyTab(e2);
    }
  });
}
var ALL_CONTAINERS = [];
var ALL_TABLES = [];
var ALL_CUSTOM = [];
var ALL_RICH_CLASSES = [];
var ALL_IS_LOADED = false;
function calculateStylesheet(stylesheet) {
  Array.from(stylesheet.cssRules).forEach((r2) => {
    if (r2 instanceof CSSMediaRule || r2.cssRules) {
      calculateStylesheet(r2);
      return;
    }
    const selectorSplitted = (r2.selectorText || r2.cssText.split("{")[0].trim()).split(" ");
    selectorSplitted.forEach((sbase) => {
      let internalSelectorSplitted = sbase.split(".");
      internalSelectorSplitted.shift();
      internalSelectorSplitted.forEach((s) => {
        let className = s;
        if (className.includes(":")) {
          className = className.split(":")[0];
        }
        if (className.endsWith(",")) {
          className = className.substr(0, className.length - 1);
        }
        if (className.startsWith(CONTAINER_CLASS_PREFIX)) {
          const toPush = className.substr(CONTAINER_CLASS_PREFIX.length);
          if (!ALL_CONTAINERS.includes(toPush)) {
            ALL_CONTAINERS.push(toPush);
          }
        } else if (className.startsWith(TABLE_CLASS_PREFIX)) {
          const toPush = className.substr(TABLE_CLASS_PREFIX.length);
          if (!ALL_TABLES.includes(toPush)) {
            ALL_TABLES.push(toPush);
          }
        } else if (className.startsWith(CUSTOM_CLASS_PREFIX)) {
          const toPush = className.substr(CUSTOM_CLASS_PREFIX.length);
          if (!ALL_CUSTOM.includes(toPush)) {
            ALL_CUSTOM.push(toPush);
          }
        } else if (className.startsWith(RICH_TEXT_CLASS_PREFIX)) {
          const toPush = className.substr(RICH_TEXT_CLASS_PREFIX.length);
          if (!ALL_RICH_CLASSES.includes(toPush)) {
            ALL_RICH_CLASSES.push(toPush);
          }
        }
      });
    });
  });
}
var ALL_PROMISE = new Promise(async (resolve) => {
  if (ALL_IS_LOADED) {
    resolve();
    return;
  }
  if (typeof document !== "undefined") {
    const stylesheetHrefPrefix = location.protocol + "//" + location.host + "/rest/resource/build";
    const foundPreloadedStylesheet = document.styleSheets && Array.from(document.styleSheets).find((s) => s.href && s.href.startsWith(stylesheetHrefPrefix));
    if (foundPreloadedStylesheet) {
      ALL_IS_LOADED = true;
      calculateStylesheet(foundPreloadedStylesheet);
      resolve();
    } else {
      const allLinks = document.head.querySelectorAll("link");
      const foundStylesheetNode = Array.from(allLinks).find((s) => s.href.startsWith(stylesheetHrefPrefix));
      if (!foundStylesheetNode) {
        ALL_IS_LOADED = true;
        resolve();
      } else {
        foundStylesheetNode.addEventListener("load", () => {
          const foundLoadedStyleSheet = document.styleSheets && Array.from(document.styleSheets).find((s) => s.href && s.href.startsWith(stylesheetHrefPrefix));
          ALL_IS_LOADED = true;
          if (foundLoadedStyleSheet) {
            calculateStylesheet(foundLoadedStyleSheet);
          }
          resolve();
        });
      }
    }
  }
});
var falseFn = () => false;
var SlateEditor = class extends import_react3.default.Component {
  /**
   * Constructs a new instance of the slate editor component
   * @param props the props
   */
  constructor(props) {
    super(props);
    this.isInNormalization = false;
    this.preventNormalize = false;
    /**
     * When a call to delete the current selected node is done, the selection anchors as they have been set
     * need to be removed and reset because otherwise they will be pointing to invalid nodes, this internal
     * flag allows to keep track of that so.
     * 
     * 1. the delete function gets called, the flag gets set to true
     * 2. slate is internally asked to delete at the selected and given path
     * 3. this triggers the change function which will try to recalculate anchors, but the old anchors are invalid
     * 4. because of the flag the change function knows the löast change was a selected delete and tells the anchor
     * recalculation not to reuse old anchors
     */
    this.lastChangeWasSelectedDelete = false;
    this.editableRef = import_react3.default.createRef();
    this.wrapperRef = import_react3.default.createRef();
    this.state = {
      // setting up the internal value from the property
      // first we pick the internal value if available
      // or otherwise we parse one
      treeValue: props.treeValue || (props.isRichText ? deserialize(props.value, null, {
        useContextRulesOf: props.rootContext
      }) : deserializePlain(props.value)),
      // we are synced
      synced: true,
      // focused
      focused: false,
      // set up the anchors
      currentText: null,
      currentInlineElement: null,
      currentBlockElement: null,
      currentSuperBlockElements: null,
      currentTextAnchor: null,
      currentInlineElementAnchor: null,
      currentBlockElementAnchor: null,
      currentSuperBlockElementAnchors: null,
      currentSelectedText: null,
      currentSelectedInlineElement: null,
      currentSelectedBlockElement: null,
      currentSelectedSuperBlockElements: null,
      currentSelectedTextAnchor: null,
      currentSelectedInlineElementAnchor: null,
      currentSelectedBlockElementAnchor: null,
      currentSelectedSuperBlockElementAnchors: null,
      currentSelectedElement: null,
      currentSelectedElementAnchor: null,
      previousSelectedElementAnchor: null,
      previousTextAnchor: null,
      isRichText: props.isRichText,
      currentRootContext: props.rootContext || null,
      currentSelectedBlockContext: null,
      currentSelectedInlineContext: null,
      currentSelectedTopmostSuperBlockContext: null,
      currentSelectedElementContext: null,
      currentValid: props.currentValid,
      // ensure SSR compatibility
      // since we cannot read the CSS file on the server side
      // as we have no access to stylesheets
      allContainers: [],
      allCustom: [],
      allRichClasses: [],
      allTables: [],
      allowsInsertElement: falseFn,
      allowsText: false,
      inlineIsVoid: false,
      blockIsVoid: false,
      topmostSuperblockIsVoid: false,
      superBlockUIHandler: null,
      blockUIHandler: null,
      inlineUIHandler: null
    };
    this.isUnmounted = false;
    const rawEditor = createEditor();
    this.editor = withReact(withHistory(rawEditor));
    this.forceFocus = this.forceFocus.bind(this);
    this.forceBlur = this.forceBlur.bind(this);
    this.normalizeNode = this.normalizeNode.bind(this);
    this.insertBreak = this.insertBreak.bind(this);
    this.insertSuperbreak = this.insertSuperbreak.bind(this);
    this.deleteBackward = this.deleteBackward.bind(this);
    this.deleteForward = this.deleteForward.bind(this);
    this.setFragmentData = this.setFragmentData.bind(this);
    this.findAndAppendFilesToDataTransfer = this.findAndAppendFilesToDataTransfer.bind(this);
    this.insertData = this.insertData.bind(this);
    this.findAndInsertFilesFromDataTransfer = this.findAndInsertFilesFromDataTransfer.bind(this);
    this.isVoid = this.isVoid.bind(this);
    this.getContextFor = this.getContextFor.bind(this);
    this.getRootContext = this.getRootContext.bind(this);
    this.originalSetFragmentData = this.editor.setFragmentData;
    this.originalInsertData = this.editor.insertData;
    this.editor.isInline = this.isInline;
    this.editor.isVoid = this.isVoid;
    this.editor.normalizeNode = this.normalizeNode;
    this.editor.insertBreak = this.insertBreak;
    this.editor.deleteBackward = this.deleteBackward;
    this.editor.deleteForward = this.deleteForward;
    this.editor.setFragmentData = this.setFragmentData;
    this.editor.insertData = this.insertData;
    this.getPreviousSelectedElementAnchor = this.getPreviousSelectedElementAnchor.bind(this);
    this.getPreviousTextAnchor = this.getPreviousTextAnchor.bind(this);
    this.deleteSelectedNode = this.deleteSelectedNode.bind(this);
    this.deletePath = this.deletePath.bind(this);
    this.setValue = this.setValue.bind(this);
    this.renderElement = this.renderElement.bind(this);
    this.actuallyRenderElement = this.actuallyRenderElement.bind(this);
    this.onChange = this.onChange.bind(this);
    this.renderText = this.renderText.bind(this);
    this.onFocusedChange = this.onFocusedChange.bind(this);
    this.onBlurredChange = this.onBlurredChange.bind(this);
    this.onKeyDown = this.onKeyDown.bind(this);
    this.deleteTableColumn = this.deleteTableColumn.bind(this);
    this.deleteTableRow = this.deleteTableRow.bind(this);
    this.selectPath = this.selectPath.bind(this);
    this.movePaths = this.movePaths.bind(this);
    this.focus = this.focus.bind(this);
    this.insertImage = this.insertImage.bind(this);
    this.insertVideo = this.insertVideo.bind(this);
    this.updateVideo = this.updateVideo.bind(this);
    this.insertFile = this.insertFile.bind(this);
    this.insertTemplateText = this.insertTemplateText.bind(this);
    this.updateTemplateText = this.updateTemplateText.bind(this);
    this.insertTemplateHTML = this.insertTemplateHTML.bind(this);
    this.updateTemplateHTML = this.updateTemplateHTML.bind(this);
    this.insertTable = this.insertTable.bind(this);
    this.insertTableColumn = this.insertTableColumn.bind(this);
    this.insertTableRow = this.insertTableRow.bind(this);
    this.toggleTable = this.toggleTable.bind(this);
    this.canToggleTable = this.canToggleTable.bind(this);
    this.insertContainer = this.insertContainer.bind(this);
    this.insertCustom = this.insertCustom.bind(this);
    this.toggleQuote = this.toggleQuote.bind(this);
    this.toggleTitle = this.toggleTitle.bind(this);
    this.insertList = this.insertList.bind(this);
    this.toggleLink = this.toggleLink.bind(this);
    this.updateLink = this.updateLink.bind(this);
    this.setStyle = this.setStyle.bind(this);
    this.set = this.set.bind(this);
    this.setHoverStyle = this.setHoverStyle.bind(this);
    this.setActiveStyle = this.setActiveStyle.bind(this);
    this.setRichClasses = this.setRichClasses.bind(this);
    this.setContext = this.setContext.bind(this);
    this.setIfCondition = this.setIfCondition.bind(this);
    this.setForEach = this.setForEach.bind(this);
    this.formatToggle = this.formatToggle.bind(this);
    this.setAction = this.setAction.bind(this);
    this.insertElement = this.insertElement.bind(this);
    this.getState = this.getState.bind(this);
    this.setUIHandler = this.setUIHandler.bind(this);
    this.setUIHandlerArg = this.setUIHandlerArg.bind(this);
    this.availableFilteringFunction = this.availableFilteringFunction.bind(this);
    this.calculateAnchors = this.calculateAnchors.bind(this);
    this.updateNodeAt = this.updateNodeAt.bind(this);
    this.insertNodeAt = this.insertNodeAt.bind(this);
    this.deleteNodeAt = this.deleteNodeAt.bind(this);
    this.mergeNodesAt = this.mergeNodesAt.bind(this);
    this.splitElementAndEscapeChildIntoParentAt = this.splitElementAndEscapeChildIntoParentAt.bind(this);
    this.wrapNodeAt = this.wrapNodeAt.bind(this);
    this.getNodeAt = this.getNodeAt.bind(this);
    this.cloneElementAt = this.cloneElementAt.bind(this);
    this.moveNodeAt = this.moveNodeAt.bind(this);
    this.hardBlur = this.hardBlur.bind(this);
    this.selectiveHardBlurIfHasSelectedElement = this.selectiveHardBlurIfHasSelectedElement.bind(this);
    this.softBlur = this.softBlur.bind(this);
  }
  /**
   * The standard derived state function is used in order to set the state in an effective way
   * it is used because the behaviour of this editor is rather complex
   * @param props the current props
   * @param state the current state
   * @returns a partial of the new state or null
   */
  static getDerivedStateFromProps(props, state) {
    if (state.synced) {
      if (props.treeValue) {
        if (!state.treeValue || props.treeValue.id !== state.treeValue.id) {
          return {
            treeValue: props.treeValue,
            isRichText: props.isRichText,
            currentRootContext: props.rootContext || null,
            currentValid: props.currentValid,
            currentText: null,
            currentInlineElement: null,
            currentBlockElement: null,
            currentSuperBlockElements: null,
            currentTextAnchor: null,
            currentInlineElementAnchor: null,
            currentBlockElementAnchor: null,
            currentSuperBlockElementAnchors: null,
            currentSelectedText: null,
            currentSelectedInlineElement: null,
            currentSelectedBlockElement: null,
            currentSelectedSuperBlockElements: null,
            currentSelectedTextAnchor: null,
            currentSelectedInlineElementAnchor: null,
            currentSelectedBlockElementAnchor: null,
            currentSelectedSuperBlockElementAnchors: null,
            currentSelectedBlockContext: null,
            currentSelectedInlineContext: null,
            currentSelectedTopmostSuperBlockContext: null,
            currentSelectedElement: null,
            currentSelectedElementAnchor: null,
            currentSelectedElementContext: null,
            previousSelectedElementAnchor: null,
            previousTextAnchor: null,
            allowsInsertElement: falseFn,
            allowsText: false,
            inlineIsVoid: false,
            blockIsVoid: false,
            topmostSuperblockIsVoid: false,
            superBlockUIHandler: null,
            blockUIHandler: null,
            inlineUIHandler: null
          };
        }
      } else {
        const newtreeValue = props.isRichText ? deserialize(props.value, state.treeValue, {
          useContextRulesOf: state.currentRootContext
        }) : deserializePlain(props.value, state.treeValue);
        if (!state.treeValue || newtreeValue.id !== state.treeValue.id) {
          return {
            treeValue: newtreeValue,
            isRichText: props.isRichText,
            currentRootContext: props.rootContext || null,
            currentValid: props.currentValid,
            currentText: null,
            currentInlineElement: null,
            currentBlockElement: null,
            currentSuperBlockElements: null,
            currentTextAnchor: null,
            currentInlineElementAnchor: null,
            currentBlockElementAnchor: null,
            currentSuperBlockElementAnchors: null,
            currentSelectedText: null,
            currentSelectedInlineElement: null,
            currentSelectedBlockElement: null,
            currentSelectedSuperBlockElements: null,
            currentSelectedTextAnchor: null,
            currentSelectedInlineElementAnchor: null,
            currentSelectedBlockElementAnchor: null,
            currentSelectedSuperBlockElementAnchors: null,
            currentSelectedElement: null,
            currentSelectedElementAnchor: null,
            previousSelectedElementAnchor: null,
            previousTextAnchor: null,
            allowsInsertElement: falseFn,
            allowsText: false,
            inlineIsVoid: false,
            blockIsVoid: false,
            topmostSuperblockIsVoid: false,
            superBlockUIHandler: null,
            blockUIHandler: null,
            inlineUIHandler: null
          };
        }
      }
    }
    return null;
  }
  /**
   * This function runs and prepares the tree that is to be inserted into the
   * pasted content
   * @param data the data transfer of the clipboard
   * @param blobs an object that contains the blob transfer object
   * @param element the element we are currently processing
   */
  async findAndInsertFilesFromDataTransfer(data, element) {
    let newElement = element;
    let wasOverwritten = false;
    if (newElement.type === "image" || newElement.type === "file") {
      const idSpecified = newElement.srcId;
      const urlToReadFrom = newElement.src;
      const existantFile = newElement.type === "image" ? this.props.onRetrieveImage(idSpecified) : this.props.onRetrieveFile(idSpecified);
      if (existantFile) {
        if (newElement.type === "image") {
          const newImageNode = __spreadProps(__spreadValues({}, newElement), {
            type: "image",
            children: [
              {
                bold: false,
                italic: false,
                text: "",
                underline: false
              }
            ],
            src: existantFile.file.url,
            srcSet: existantFile.srcset,
            sizes: "70vw"
          });
          newElement = newImageNode;
          wasOverwritten = true;
        } else {
          const newFileNode = __spreadProps(__spreadValues({}, newElement), {
            type: "file",
            children: [
              {
                bold: false,
                italic: false,
                text: "",
                underline: false
              }
            ],
            src: existantFile.url
          });
          newElement = newFileNode;
          wasOverwritten = true;
        }
      } else {
        const infoFromInsert = await this.props.onInsertFileFromURL(
          urlToReadFrom,
          newElement.fileName || newElement.alt || idSpecified,
          newElement.type === "image"
        );
        if (infoFromInsert) {
          if (newElement.type === "image") {
            const imageNode = __spreadProps(__spreadValues({}, newElement), {
              type: "image",
              children: [
                {
                  bold: false,
                  italic: false,
                  text: "",
                  underline: false
                }
              ],
              height: infoFromInsert.height,
              width: infoFromInsert.width,
              src: infoFromInsert.result.url,
              srcId: infoFromInsert.result.id,
              srcSet: null
            });
            newElement = imageNode;
            wasOverwritten = true;
          } else {
            const fileNode = __spreadProps(__spreadValues({}, newElement), {
              type: "file",
              children: [
                {
                  bold: false,
                  italic: false,
                  text: "",
                  underline: false
                }
              ],
              size: prettyBytes(infoFromInsert.result.size),
              src: infoFromInsert.result.url,
              srcId: infoFromInsert.result.id
            });
            newElement = fileNode;
            wasOverwritten = true;
          }
        } else {
          newElement = null;
          wasOverwritten = true;
        }
      }
    }
    if (newElement && newElement.children && !wasOverwritten) {
      newElement = __spreadValues({}, newElement);
      newElement.children = (await Promise.all(newElement.children.map(this.findAndInsertFilesFromDataTransfer.bind(this, data)))).filter((e2) => !!e2);
    }
    return newElement;
  }
  /**
   * This function runs when we are inserting using the slate clipboard
   * @param data the data transfer
   */
  async insertData(data) {
    const fragment2 = data.getData("application/x-slate-fragment");
    if (fragment2) {
      console.warn("The editor used the fallback clipboard mechanism rather than the new clipboard, files may fail to load");
      const decoded = decodeURIComponent(window.atob(fragment2));
      const parsed = (await Promise.all(JSON.parse(decoded).map(this.findAndInsertFilesFromDataTransfer.bind(this, data)))).filter((e2) => !!e2);
      if (!parsed || !parsed.length) {
        console.warn("Failed to find children to add");
        return;
      }
      const shouldUseInsertFragment = !isSuperBlock(parsed[0]);
      if (shouldUseInsertFragment) {
        Transforms.insertFragment(this.editor, parsed);
      } else if (this.state.currentBlockElementAnchor) {
        Transforms.insertNodes(this.editor, parsed);
      }
      return;
    }
    if (data.files.length) {
      Array.from(data.files).forEach((f) => {
        if (this.props.supportedImageTypes.includes(f.type)) {
          this.insertImage(f, false);
        } else {
          this.insertFile(f);
        }
      });
      return;
    }
    const htmlData = data.getData("text/html");
    if (htmlData) {
      const deserialized = deserialize(htmlData, null, {
        dontNormalize: true
      });
      const parsed = (await Promise.all(deserialized.children.map(this.findAndInsertFilesFromDataTransfer.bind(this, data)))).filter((e2) => !!e2);
      if (!parsed || !parsed.length) {
        console.warn("Failed to find children to add");
        return;
      }
      const shouldUseInsertFragment = !isSuperBlock(parsed[0]);
      if (shouldUseInsertFragment) {
        Transforms.insertFragment(this.editor, parsed);
      } else if (this.state.currentBlockElementAnchor) {
        Transforms.insertNodes(this.editor, parsed);
      }
      return;
    } else {
      this.originalInsertData(data);
      return;
    }
  }
  getDataURI(blob) {
    const reader = new FileReader();
    reader.readAsDataURL(blob);
    return new Promise((resolve, reject) => {
      reader.addEventListener(
        "load",
        () => {
          resolve(reader.result);
        },
        false
      );
      reader.addEventListener("error", () => {
        reject();
      });
    });
  }
  /**
   * Runs per each rich element that has just been copied to the clipboard
   * @param data the data transfer
   * @param element the rich element we have just copied
   */
  async findAndAppendFilesToDataTransfer(data, element) {
    if (element.type === "image" || element.type === "file") {
      const urlToReadFrom = element.src;
      try {
        const blob = await (await fetch(urlToReadFrom)).blob();
        const dataURI = await this.getDataURI(blob);
        element.src = dataURI;
        delete element.srcSet;
      } catch (err) {
      }
    }
    if (element.children) {
      await Promise.all(element.children.map(this.findAndAppendFilesToDataTransfer.bind(this, data)));
    }
  }
  /**
   * This function runs when we are preparing the slate clipboard
   * @param data the data transfer
   */
  async setFragmentData(data) {
    this.originalSetFragmentData(data);
    const fragment64 = data.getData("application/x-slate-fragment");
    if (fragment64 && navigator.clipboard) {
      const copyDataTree = JSON.parse(decodeURIComponent(atob(fragment64)));
      await Promise.all(copyDataTree.map(this.findAndAppendFilesToDataTransfer.bind(this, data)));
      const document2 = {
        children: copyDataTree,
        id: "COPY_ELEMENT",
        rich: true,
        type: "document"
      };
      const html = serialize(document2);
      const htmlStr = html.map((n3) => n3.outerHTML).join("");
      const text = serializeString(document2);
      const textPlain = new Blob([text], { type: "text/plain" });
      const htmlBody = new Blob([htmlStr], { type: "text/html" });
      const item = new ClipboardItem({
        "text/plain": textPlain,
        "text/html": htmlBody
      });
      await navigator.clipboard.write([item]);
    }
  }
  updateNodeAt(path3, v) {
    Transforms.setNodes(this.editor, v, {
      at: path3
    });
  }
  deleteNodeAt(path3) {
    Transforms.delete(this.editor, {
      at: path3
    });
  }
  insertNodeAt(path3, node3, targetIndex) {
    Transforms.insertNodes(this.editor, node3, {
      at: [...path3, targetIndex]
    });
  }
  mergeNodesAt(basePath, referencePath) {
    const parentPath = [...basePath];
    parentPath.pop();
    Transforms.mergeNodes(this.editor, {
      at: referencePath,
      voids: true
    });
  }
  splitElementAndEscapeChildIntoParentAt(path3, escapingChildIndex) {
    Transforms.liftNodes(this.editor, {
      at: [...path3, escapingChildIndex]
    });
  }
  wrapNodeAt(path3, wrappers) {
    wrappers.forEach((wrapper) => {
      Transforms.wrapNodes(this.editor, wrapper, {
        at: path3
      });
    });
  }
  getNodeAt(path3) {
    return Node.get(this.editor, path3);
  }
  cloneElementAt(fromPath, toPath) {
    const toCopyNode = this.getNodeAt(fromPath);
    const copy = __spreadValues({}, toCopyNode);
    copy.children = [];
    Transforms.insertNodes(this.editor, copy, {
      at: toPath
    });
  }
  moveNodeAt(fromPath, toPath) {
    Transforms.moveNodes(this.editor, {
      at: fromPath,
      to: toPath
    });
  }
  /**
   * Normalization funciton that overrides the normalization
   * of the standard editor
   * @param entry the entry we are normalizing
   */
  normalizeNode(entry) {
    if (this.isInNormalization || this.preventNormalize) {
      return;
    }
    const [node3, path3] = entry;
    if (Editor.isEditor(node3)) {
      this.isInNormalization = true;
      if (node3.children.length === 0) {
        Transforms.insertNodes(
          this.editor,
          { type: "paragraph", children: [STANDARD_TEXT_NODE()] },
          { at: path3.concat(0) }
        );
      } else {
        const pseudoDocument = {
          type: "document",
          children: node3.children,
          id: this.state.treeValue.id,
          rich: this.state.treeValue.rich
        };
        const nodeAtSelection = this.editor.selection ? this.getNodeAt(this.editor.selection.anchor.path) : null;
        const nodeIgnore = [];
        if (Text.isText(nodeAtSelection) && nodeAtSelection.text === "") {
          nodeIgnore.push(this.editor.selection.anchor.path);
        }
        try {
          normalizeElement(
            pseudoDocument,
            [],
            pseudoDocument,
            {
              workOnOriginal: false,
              updateNodeAt: this.updateNodeAt,
              deleteNodeAt: this.deleteNodeAt,
              insertNodeAt: this.insertNodeAt,
              mergeNodesAt: this.mergeNodesAt,
              splitElementAndEscapeChildIntoParentAt: this.splitElementAndEscapeChildIntoParentAt,
              wrapNodeAt: this.wrapNodeAt,
              getNodeAt: this.getNodeAt,
              cloneElementAt: this.cloneElementAt,
              moveNodeAt: this.moveNodeAt
            },
            {
              ignoreNodesAt: nodeIgnore,
              useContextRulesOf: this.state.currentRootContext
            }
          );
        } catch (err) {
          console.error(err.stack);
        }
      }
      this.isInNormalization = false;
    }
  }
  /**
   * Override for the default editor inline function
   * @param element the element that is to be considered
   * @returns a boolean on whether it represents an inline element
   */
  isInline(element) {
    return isInline(element);
  }
  /**
   * Override for the default editor void function
   * @param element the element that is to be considered
   * @returns a boolean on whether it represents a void element
   */
  isVoid(element) {
    return isVoid(element);
  }
  /**
   * Override for the default editor insert break function
   */
  insertBreak() {
    const currentSuperBlockElement = this.state.currentSuperBlockElements && this.state.currentSuperBlockElements[this.state.currentSuperBlockElements.length - 1];
    const isListItemBreak = currentSuperBlockElement && // and we are within a list and a list item
    currentSuperBlockElement.type === "list-item";
    if (
      // if we are simply collapsed
      Range.isCollapsed(this.editor.selection) && // and we have a list item
      isListItemBreak && // and that first children is an empty paragraph
      // there may be a second list
      currentSuperBlockElement.children[0].type === "paragraph" && // with one empty text node
      currentSuperBlockElement.children[0].children.length === 1 && Text.isText(currentSuperBlockElement.children[0].children[0]) && currentSuperBlockElement.children[0].children[0].text === ""
    ) {
      this.breakList();
      return;
    }
    if (!this.state.currentBlockElement) {
      Transforms.splitNodes(this.editor, { always: true });
      return;
    }
    if (this.editor.isVoid(this.state.currentBlockElement)) {
      Transforms.insertNodes(this.editor, {
        type: "paragraph",
        children: [
          __spreadProps(__spreadValues({}, this.state.currentText), {
            text: ""
          })
        ]
      });
      return;
    }
    const end2 = Range.end(this.editor.selection);
    const finalBlockPath = [...this.state.currentBlockElementAnchor];
    let lastChild = this.state.currentBlockElement;
    if (lastChild && Element2.isElement(lastChild)) {
      do {
        const lastPoint = lastChild.children.length - 1;
        lastChild = lastChild.children[lastPoint];
        finalBlockPath.push(lastPoint);
      } while (Element2.isElement(lastChild));
    }
    const finalBlockOffset = lastChild ? lastChild.text.length : null;
    const isEndOfLine = end2.offset === finalBlockOffset && Path.equals(finalBlockPath, end2.path);
    if (isListItemBreak) {
      Transforms.splitNodes(this.editor, { always: true, match: (n3) => n3.type === "list-item" });
    } else {
      Transforms.splitNodes(this.editor, { always: true });
    }
    if (isEndOfLine) {
      Transforms.setNodes(this.editor, {
        uiHandler: null,
        html: null,
        uiHandlerArgs: null,
        textContent: null
      }, {
        match: (n3) => {
          return isBlock(n3);
        },
        mode: "lowest",
        at: this.editor.selection.anchor.path
      });
    }
  }
  /**
   * Override function to perform a forward delete
   * backwards event
   * @param unit the unit we are dealing with
   */
  deleteForward(unit) {
    const { selection } = this.editor;
    if (selection && Range.isCollapsed(selection)) {
      if (this.state.currentBlockElement && this.state.currentBlockElement.children.length === 1 && Text.isText(this.state.currentBlockElement.children[0]) && this.state.currentBlockElement.children[0].text === "") {
        Transforms.delete(this.editor, { at: this.state.currentBlockElementAnchor });
      } else {
        Transforms.delete(this.editor, { unit });
      }
    }
  }
  /**
   * Override function to perform a standard delete
   * backwards event
   * @param unit the unit we are dealing with
   */
  deleteBackward(unit) {
    const { selection } = this.editor;
    const currentSuperBlockElement = this.state.currentSuperBlockElements && this.state.currentSuperBlockElements[this.state.currentSuperBlockElements.length - 1];
    if (selection && // and it's collapsed
    Range.isCollapsed(selection) && currentSuperBlockElement && currentSuperBlockElement.type === "list-item" && // and we are deleting a character of a word
    ((unit === "character" || unit === "word") && // and we are at the start of the block
    selection.anchor.offset === 0 || // or we are removing a line or block
    (unit === "line" || unit == "block"))) {
      this.breakList();
    } else if (selection && Range.isCollapsed(selection)) {
      Transforms.delete(this.editor, { unit, reverse: true });
    }
  }
  /**
   * Breaks the list based on the current selection
   * we must be in a list currently, this function is called
   * by the delete backwards functionality as well as the toggle
   * list one
   */
  breakList() {
    this.preventNormalize = true;
    Transforms.unwrapNodes(
      this.editor,
      {
        match: (n3) => {
          return n3.type === "list";
        },
        mode: "lowest",
        split: true
      }
    );
    this.preventNormalize = false;
    Transforms.unwrapNodes(
      this.editor,
      {
        match: (n3) => {
          return n3.type === "list-item";
        },
        mode: "lowest",
        split: true
      }
    );
  }
  /**
   * Inserts a superblock break, since you might not be able to escape
   * superblocks, eg. such as a single container, you will use a superblock break
   * alt+enter in order to escape the superblock
   * 
   * @param at the path of the superblock to insert a break at
   * @param reverse whether to insert it before or after, by default it will be after, use this flag for before
   */
  insertSuperbreak(at, reverse) {
    let currentElementToBreakFromAnchor = at || this.state.currentBlockElement && isVoid(this.state.currentBlockElement) && this.state.currentBlockElementAnchor || this.state.currentSuperBlockElements && this.state.currentSuperBlockElementAnchors[this.state.currentSuperBlockElementAnchors.length - 1];
    if (!currentElementToBreakFromAnchor) {
      return;
    }
    let currentElementToBreakFrom = Node.get(this.editor, currentElementToBreakFromAnchor);
    currentElementToBreakFromAnchor = [...currentElementToBreakFromAnchor];
    let parentSuperBlockElementAnchor = [...currentElementToBreakFromAnchor];
    parentSuperBlockElementAnchor.pop();
    let parentSuperBlockElement = null;
    while (true) {
      parentSuperBlockElement = Node.get(this.editor, parentSuperBlockElementAnchor);
      const allowsChildren = SERIALIZATION_REGISTRY.ALLOWS_CHILDREN[parentSuperBlockElement.type];
      const canParentHaveParagraphAsChildren = !allowsChildren || allowsChildren.includes("paragraph");
      const isASoloEscapableType = currentElementToBreakFrom.type === "list";
      if (
        // list and list items can be escaped by
        // standard entering so we don't allow that as a break point
        !isASoloEscapableType && canParentHaveParagraphAsChildren || !parentSuperBlockElementAnchor.length
      ) {
        break;
      }
      parentSuperBlockElementAnchor.pop();
      currentElementToBreakFromAnchor.pop();
      currentElementToBreakFrom = Node.get(this.editor, currentElementToBreakFromAnchor);
    }
    ;
    if (currentElementToBreakFrom.type === "list") {
      return;
    }
    const nextAnchor = currentElementToBreakFromAnchor;
    if (!reverse) {
      nextAnchor[nextAnchor.length - 1]++;
    }
    Transforms.insertNodes(this.editor, {
      type: "paragraph",
      children: [
        {
          text: ""
        }
      ]
    }, { at: nextAnchor });
    const nextAnchorText = nextAnchor.concat([0]);
    this.focusAt({
      anchor: {
        offset: 0,
        path: nextAnchorText
      },
      focus: {
        offset: 0,
        path: nextAnchorText
      }
    });
  }
  /**
   * Calculates the anchors and the context based on a given value
   * (or the current value of the editor) and the selection nodes
   * that are currently selected (or it will override with the defaults)
   * @param anchor the anchor that is currently deemed to be selected at
   * @param value the value that we are working with, if not provided it will take it from the state
   * @param currentGivenSelectedNodeAnchor the selected node anchor, and text anchor if not provided
   * it will use the default values based on the logic of the calculated anchors
   */
  calculateAnchors(anchor, value, currentGivenSelectedNodeAnchor) {
    let currentInlineElement = null;
    let currentInlineElementAnchor = null;
    let currentBlockElement = null;
    let currentBlockElementAnchor = null;
    let currentSuperBlockElements = null;
    let currentSuperBlockElementAnchors = null;
    let currentText = null;
    let currentTextAnchor = null;
    let previousSelectedElementAnchor = this.state.currentSelectedElementAnchor;
    let previousTextAnchor = this.state.currentTextAnchor;
    if (anchor) {
      let currentLoopingElement = value ? {
        children: value
      } : this.state.treeValue;
      const loopingAnchor = [];
      anchor.forEach((n3, index) => {
        loopingAnchor.push(n3);
        currentLoopingElement = currentLoopingElement && currentLoopingElement.children[n3];
        if (currentLoopingElement && SERIALIZATION_REGISTRY.INLINES[currentLoopingElement.type]) {
          currentInlineElement = currentLoopingElement;
          currentInlineElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.BLOCKS[currentLoopingElement.type]) {
          currentBlockElement = currentLoopingElement;
          currentBlockElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.SUPERBLOCKS[currentLoopingElement.type]) {
          if (!currentSuperBlockElements) {
            currentSuperBlockElements = [];
            currentSuperBlockElementAnchors = [];
          }
          currentSuperBlockElements.push(currentLoopingElement);
          currentSuperBlockElementAnchors.push([...loopingAnchor]);
        }
        if (currentLoopingElement && Text.isText(currentLoopingElement)) {
          currentText = currentLoopingElement;
          currentTextAnchor = [...loopingAnchor];
        }
      });
    }
    let currentSelectedInlineElementAnchor = null;
    let currentSelectedInlineElement = null;
    let currentSelectedBlockElement = null;
    let currentSelectedSuperBlockElements = null;
    let currentSelectedBlockElementAnchor = null;
    let currentSelectedSuperBlockElementAnchors = null;
    let currentSelectedText = null;
    let currentSelectedTextAnchor = null;
    let givenSelectedNodeAnchorIsCorrupted = false;
    if (currentGivenSelectedNodeAnchor) {
      let currentSelectedElementCorruptionTest = value ? {
        children: value
      } : this.state.treeValue;
      givenSelectedNodeAnchorIsCorrupted = currentGivenSelectedNodeAnchor.some((n3, index) => {
        if (!currentSelectedElementCorruptionTest || !currentSelectedElementCorruptionTest.children || !currentSelectedElementCorruptionTest.children[n3]) {
          return true;
        }
        currentSelectedElementCorruptionTest = currentSelectedElementCorruptionTest.children[n3];
      });
    }
    if (!currentGivenSelectedNodeAnchor || givenSelectedNodeAnchorIsCorrupted) {
      currentSelectedInlineElementAnchor = currentInlineElementAnchor;
      currentSelectedInlineElement = currentInlineElement;
      currentSelectedBlockElement = currentBlockElement;
      currentSelectedBlockElementAnchor = currentBlockElementAnchor;
      currentSelectedSuperBlockElements = currentSuperBlockElements;
      currentSelectedSuperBlockElementAnchors = currentSuperBlockElementAnchors;
      currentSelectedText = currentText;
      currentSelectedTextAnchor = currentTextAnchor;
    } else {
      const loopingAnchor = [];
      let currentLoopingElement = value ? {
        children: value
      } : this.state.treeValue;
      currentGivenSelectedNodeAnchor.forEach((n3, index) => {
        currentLoopingElement = currentLoopingElement && currentLoopingElement.children[n3];
        loopingAnchor.push(n3);
        if (currentLoopingElement && SERIALIZATION_REGISTRY.INLINES[currentLoopingElement.type]) {
          currentSelectedInlineElement = currentLoopingElement;
          currentSelectedInlineElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.BLOCKS[currentLoopingElement.type]) {
          currentSelectedBlockElement = currentLoopingElement;
          currentSelectedBlockElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.SUPERBLOCKS[currentLoopingElement.type]) {
          if (!currentSelectedSuperBlockElements) {
            currentSelectedSuperBlockElements = [];
            currentSelectedSuperBlockElementAnchors = [];
          }
          currentSelectedSuperBlockElements.push(currentLoopingElement);
          currentSelectedSuperBlockElementAnchors.push([...loopingAnchor]);
        }
        if (currentLoopingElement && Text.isText(currentLoopingElement)) {
          currentSelectedText = currentLoopingElement;
          currentSelectedTextAnchor = [...loopingAnchor];
        }
      });
    }
    const pseudoDocument = {
      type: "document",
      children: value,
      id: this.state.treeValue.id,
      rich: this.state.treeValue.rich
    };
    const currentSelectedTopmostSuperBlockContext = getContextFor(
      currentSelectedSuperBlockElementAnchors && currentSelectedSuperBlockElementAnchors[currentSelectedSuperBlockElementAnchors.length - 1],
      "final",
      pseudoDocument,
      this.state.currentRootContext
    );
    const currentSelectedBlockContext = getContextFor(
      currentSelectedBlockElementAnchor,
      "final",
      pseudoDocument,
      this.state.currentRootContext
    );
    const currentSelectedInlineContext = getContextFor(
      currentSelectedInlineElementAnchor,
      "final",
      pseudoDocument,
      this.state.currentRootContext
    );
    const baseSuperBlock = currentSelectedSuperBlockElements && currentSelectedSuperBlockElements[currentSelectedSuperBlockElements.length - 1] || pseudoDocument;
    const baseAllowedChildreOfSuperBlock = baseSuperBlock ? getAllowedChildrenTypes(baseSuperBlock) : [];
    const superBlockUIHandler = getUIHandlerValueWithKnownContextFor(
      baseSuperBlock,
      currentSelectedTopmostSuperBlockContext || this.state.currentRootContext,
      this.state.currentRootContext
    );
    const baseBlock = currentSelectedBlockElement;
    const baseAllowedChildrenOfBlock = baseBlock ? getAllowedChildrenTypes(baseBlock) : [];
    const blockUIHandler = getUIHandlerValueWithKnownContextFor(
      baseBlock,
      currentSelectedBlockContext,
      this.state.currentRootContext
    );
    const inlineUIHandler = getUIHandlerValueWithKnownContextFor(
      currentSelectedInlineElement,
      currentSelectedInlineContext,
      this.state.currentRootContext
    );
    const allowsInsertElement = (element, opts = {}) => {
      if (opts.collapsed || opts.extended || opts.selected) {
        if (opts.selected && !this.editor.selection) {
          return false;
        }
        const isCollapsed = this.editor.selection && Range.isCollapsed(this.editor.selection);
        if (!isCollapsed && opts.collapsed) {
          return false;
        } else if (isCollapsed && opts.extended) {
          return false;
        }
      }
      if (isSuperBlock(element) || isBlock(element)) {
        if (!baseAllowedChildreOfSuperBlock.includes(element.type)) {
          return false;
        }
        return superBlockUIHandler && superBlockUIHandler.allowsChildren ? superBlockUIHandler.allowsChildren(element, baseSuperBlock) : true;
      } else if (isInline(element)) {
        if (!baseAllowedChildrenOfBlock.includes(element.type)) {
          return false;
        }
        return blockUIHandler && blockUIHandler.allowsChildren ? blockUIHandler.allowsChildren(element, baseBlock) : true;
      } else {
        return false;
      }
    };
    const topmostSuperblock = currentSelectedSuperBlockElements && currentSelectedSuperBlockElements[currentSelectedSuperBlockElements.length - 1];
    const topmostSuperblockAnchor = currentSelectedSuperBlockElementAnchors && currentSelectedSuperBlockElementAnchors[currentSelectedSuperBlockElementAnchors.length - 1];
    const inlineIsVoid = currentSelectedInlineElement ? isVoid(currentSelectedInlineElement) : false;
    const blockIsVoid = currentSelectedBlockElement ? isVoid(currentSelectedBlockElement) : false;
    const topmostSuperblockIsVoid = topmostSuperblock ? isVoid(topmostSuperblock) : false;
    const voidElement = inlineIsVoid || blockIsVoid || topmostSuperblockIsVoid;
    const allowsText = !voidElement;
    const currentSelectedElement = currentSelectedInlineElement || currentSelectedBlockElement || topmostSuperblock || null;
    const currentSelectedElementAnchor = currentSelectedInlineElementAnchor || currentSelectedBlockElementAnchor || topmostSuperblockAnchor || null;
    return {
      currentTextAnchor,
      currentText,
      currentBlockElement,
      currentBlockElementAnchor,
      currentInlineElement,
      currentInlineElementAnchor,
      currentSuperBlockElements,
      currentSuperBlockElementAnchors,
      currentSelectedText,
      currentSelectedTextAnchor,
      currentSelectedBlockElement,
      currentSelectedBlockElementAnchor,
      currentSelectedInlineElement,
      currentSelectedInlineElementAnchor,
      currentSelectedSuperBlockElements,
      currentSelectedSuperBlockElementAnchors,
      currentSelectedElement,
      currentSelectedElementAnchor,
      currentSelectedTopmostSuperBlockContext,
      currentSelectedBlockContext,
      currentSelectedInlineContext,
      currentSelectedElementContext: currentSelectedInlineContext || currentSelectedBlockContext || currentSelectedTopmostSuperBlockContext,
      allowsInsertElement,
      allowsText,
      inlineIsVoid,
      blockIsVoid,
      topmostSuperblockIsVoid,
      superBlockUIHandler,
      blockUIHandler,
      inlineUIHandler,
      previousSelectedElementAnchor,
      previousTextAnchor
    };
  }
  /**
   * Triggers on change when the field is focused
   * and has changed
   * @param anchor the anchor that we are at
   * @param value the value that we got
   */
  onFocusedChange(anchor, value) {
    if (this.isUnmounted) {
      return;
    }
    this.setState(this.calculateAnchors(anchor, value));
    if (!this.state.focused) {
      this.props.onFocus && this.props.onFocus();
      this.setState({
        focused: true
      });
    }
  }
  /**
   * Triggers on an on change whent he field is blurred
   * @param value the value that we are working with
   */
  onBlurredChange(value) {
    if (this.isUnmounted) {
      return;
    }
    if (this.state.focused) {
      this.props.onBlur && this.props.onBlur();
    }
    const currentSelectedSuperBlockElementAnchor = this.state.currentSelectedSuperBlockElementAnchors && this.state.currentSelectedSuperBlockElementAnchors[this.state.currentSelectedSuperBlockElementAnchors.length - 1];
    const currentSelectedAnchor = this.state.currentSelectedTextAnchor || this.state.currentSelectedInlineElementAnchor || this.state.currentSelectedBlockElementAnchor || currentSelectedSuperBlockElementAnchor;
    const anchorData = this.calculateAnchors(
      // no anchor as it is not known
      null,
      // the value
      value,
      // and we pass the selected node anchor as it
      // remains even after the selection only if
      // we have not just deleted that node
      currentSelectedAnchor && !this.lastChangeWasSelectedDelete ? currentSelectedAnchor : null
    );
    this.setState(__spreadValues({
      focused: false
    }, anchorData));
  }
  /**
   * An optimization so that the component updates only when it's necessary
   * @param nextProps the next properties
   * @param nextState the next state
   */
  shouldComponentUpdate(nextProps, nextState) {
    const standardUpdate = nextProps.id !== this.props.id || nextProps.lang !== this.props.lang || nextProps.currentValid !== this.props.currentValid || nextState.focused !== this.state.focused || nextProps.Wrapper !== this.props.Wrapper || nextProps.isRichText !== this.props.isRichText || nextProps.rootContext !== this.props.rootContext || nextProps.baseI18n !== this.props.baseI18n || nextState.currentTextAnchor !== this.state.currentTextAnchor || nextState.currentSelectedTextAnchor !== this.state.currentSelectedTextAnchor || nextState.currentRootContext !== this.state.currentRootContext || nextProps.currentLoadError !== this.props.currentLoadError || nextProps.elementWrappers !== this.props.elementWrappers || !(0, import_deep_equal2.default)(this.state.allContainers, nextState.allContainers, { strict: true }) || !(0, import_deep_equal2.default)(this.state.allTables, nextState.allTables, { strict: true }) || !(0, import_deep_equal2.default)(this.state.allCustom, nextState.allCustom, { strict: true }) || !(0, import_deep_equal2.default)(this.state.allRichClasses, nextState.allRichClasses, { strict: true }) || !(0, import_deep_equal2.default)(nextProps.wrapperArgs, this.props.wrapperArgs, { strict: true }) || !(0, import_deep_equal2.default)(nextProps.elementWrappersArgs, this.props.elementWrappersArgs, { strict: true }) || !(0, import_deep_equal2.default)(nextProps.features, this.props.features, { strict: true });
    if (standardUpdate) {
      return true;
    }
    if (nextProps.treeValue && nextState.synced) {
      return nextProps.treeValue.id !== this.state.treeValue.id;
    }
    return true;
  }
  /**
   * Sets the value off the rich text
   * @param v the value to set
   */
  setValue(v) {
    if (this.isUnmounted || this.props.disabled) {
      return;
    }
    const newRootDocument = {
      // we don't know the id yet
      id: null,
      type: "document",
      rich: this.state.treeValue.rich,
      children: v
    };
    const serialized = serializeString(newRootDocument);
    newRootDocument.id = getUUIDFor(serialized);
    clearTimeout(this.updateTimeout);
    const isEqual = (serialized || null) === (this.props.value || null);
    if (isEqual) {
      this.setState({
        treeValue: newRootDocument,
        synced: true
      });
    } else {
      this.setState({
        treeValue: newRootDocument,
        synced: false
      });
      this.updateTimeout = setTimeout(() => {
        if (this.state.treeValue.rich) {
          if (this.props.cacheStoreCountGlobal) {
            const count = countSize(this.state.treeValue);
            window[this.props.cacheStoreCountGlobal] = count;
          }
        }
        this.props.onChange(serializeString(this.state.treeValue), this.state.treeValue);
        this.updateTimeout = setTimeout(() => {
          if (!this.isUnmounted) {
            this.setState({
              synced: true
            });
          }
        }, 30);
      }, 300);
    }
  }
  /**
   * Provides the context a given node is sitting in
   * @param n the node in question
   * @param onlySwichingContext provides the context only if it was set
   * by the given node otherwise it will return null
   */
  getContextFor(n3, level, onlySwichingContext) {
    if (onlySwichingContext) {
      const nodeAsRichElement = Path.isPath(n3) ? Node.get(this.editor, n3) : n3;
      if (!nodeAsRichElement.context && !nodeAsRichElement.forEach) {
        return null;
      }
    }
    const pathOfNode = Path.isPath(n3) ? n3 : ReactEditor.findPath(this.editor, n3);
    return getContextFor(
      pathOfNode,
      level || "final",
      this.state.treeValue,
      this.state.currentRootContext
    );
  }
  getRootContext() {
    return this.state.currentRootContext;
  }
  renderElement(props) {
    return /* @__PURE__ */ import_react3.default.createElement(
      CurrentElementRetriever,
      __spreadProps(__spreadValues({}, props), {
        fn: this.actuallyRenderElement
      })
    );
  }
  /**
   * the render element function to be used in slate editor
   * @param props the properties that slate provides to render the component
   */
  actuallyRenderElement(props, isSelected, selectionCriteria, isPrimary) {
    const { attributes, children, element } = props;
    const uiHandler = element.uiHandler;
    let toReturn = null;
    let wasUIHandled = false;
    if (uiHandler) {
      const handlerContext = this.getContextFor(element);
      const uiHandlerArgs = element.uiHandlerArgs;
      let propertiesFromContext = handlerContext && handlerContext.properties && handlerContext.properties[uiHandler];
      if (!propertiesFromContext) {
        propertiesFromContext = this.props.rootContext && this.props.rootContext.properties[uiHandler];
        if (propertiesFromContext && propertiesFromContext.nonRootInheritable) {
          propertiesFromContext = null;
        }
      }
      if (propertiesFromContext && propertiesFromContext.type === "ui-handler" && propertiesFromContext.editorHandler) {
        const HandlerComponent = propertiesFromContext.editorHandler.Component;
        const handlerExtraArgs = propertiesFromContext.editorHandler.extraArgs;
        const passExtraInfo = propertiesFromContext.editorHandler.passSlateInfo;
        const extraInfo = passExtraInfo ? {
          helpers: this.getHelpers(),
          selected: isSelected && isPrimary
        } : {};
        let className = null;
        element.richClassList && element.richClassList.forEach((c) => {
          className = (className || "") + " rich-text--" + c;
        });
        const style = convertStyleStringToReactObject(element.style);
        const styleActive = convertStyleStringToReactObject(element.styleActive);
        const styleHover = convertStyleStringToReactObject(element.styleHover);
        toReturn = /* @__PURE__ */ import_react3.default.createElement(
          HandlerComponent,
          __spreadValues({
            args: __spreadValues(__spreadValues({}, uiHandlerArgs), handlerExtraArgs),
            isSlate: true,
            attributes,
            element,
            style,
            styleActive,
            styleHover,
            className,
            events: null
          }, extraInfo),
          children
        );
        const contextSwichContext = this.getContextFor(element, "final", true);
        if (contextSwichContext && contextSwichContext.loopable && contextSwichContext.editorArgs && contextSwichContext.editorArgs.loopEmulation && contextSwichContext.editorArgs.loopEmulation >= 1) {
          const arr = [];
          for (let i2 = 0; i2 < contextSwichContext.editorArgs.loopEmulation; i2++) {
            const shouldDisableElementWrappers = i2 !== contextSwichContext.editorArgs.loopEmulation - 1;
            if (contextSwichContext.editorArgs.wrapper) {
              if (shouldDisableElementWrappers) {
                arr.push(
                  /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2))
                );
              } else {
                arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2)));
              }
            } else {
              if (shouldDisableElementWrappers) {
                arr.push(
                  /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, toReturn)
                );
              } else {
                arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, toReturn));
              }
            }
          }
          toReturn = arr;
        } else if (contextSwichContext && contextSwichContext.editorArgs && contextSwichContext.editorArgs.wrapper) {
          toReturn = contextSwichContext.editorArgs.wrapper(toReturn);
        }
        wasUIHandled = true;
      }
    }
    if (!wasUIHandled) {
      const customProps = __spreadProps(__spreadValues({}, attributes), { children });
      const html = element.html;
      if (typeof html === "string") {
        const htmlContext = this.getContextFor(element);
        let propertiesFromContext = htmlContext && htmlContext.properties && htmlContext.properties[html];
        if (!propertiesFromContext) {
          propertiesFromContext = this.props.rootContext && this.props.rootContext.properties && this.props.rootContext.properties[html];
          if (propertiesFromContext && propertiesFromContext.nonRootInheritable) {
            propertiesFromContext = null;
          }
        }
        if (propertiesFromContext && propertiesFromContext.type === "html" && typeof propertiesFromContext.editorDisplay !== "undefined") {
          const toDisplay = propertiesFromContext.editorDisplay;
          if (typeof toDisplay === "string") {
            customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, /* @__PURE__ */ import_react3.default.createElement("div", { contentEditable: false, dangerouslySetInnerHTML: { __html: toDisplay }, style: { display: "contents" } }), children);
          } else {
            customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, /* @__PURE__ */ import_react3.default.createElement("div", { contentEditable: false, style: { display: "contents" } }, toDisplay), children);
          }
        } else {
          customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, propertiesFromContext && propertiesFromContext.label || element.children[0].text, children);
        }
      }
      const text = element.textContent;
      if (typeof text === "string") {
        const textContext = this.getContextFor(element);
        let propertiesFromContext = textContext && textContext.properties && textContext.properties[text];
        if (!propertiesFromContext) {
          propertiesFromContext = this.props.rootContext && this.props.rootContext.properties && this.props.rootContext.properties[text];
          if (propertiesFromContext && propertiesFromContext.nonRootInheritable) {
            propertiesFromContext = null;
          }
        }
        customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, propertiesFromContext && propertiesFromContext.type === "text" && (propertiesFromContext.editorDisplay || propertiesFromContext.label) || element.children[0].text, children);
      }
      toReturn = SERIALIZATION_REGISTRY.REACTIFY[element.type]({
        active: false,
        selected: isSelected && isPrimary,
        element,
        asTemplate: false,
        customProps,
        // we don't care as we are not using the onCustom function
        parent: null,
        tree: null
      });
      const contextSwichContext = this.getContextFor(element, "final", true);
      if (contextSwichContext && contextSwichContext.loopable && contextSwichContext.editorArgs && contextSwichContext.editorArgs.loopEmulation && contextSwichContext.editorArgs.loopEmulation >= 1) {
        const arr = [];
        for (let i2 = 0; i2 < contextSwichContext.editorArgs.loopEmulation; i2++) {
          const shouldDisableElementWrappers = i2 !== contextSwichContext.editorArgs.loopEmulation - 1;
          if (contextSwichContext.editorArgs.wrapper) {
            if (shouldDisableElementWrappers) {
              arr.push(
                /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2))
              );
            } else {
              arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2)));
            }
          } else {
            if (shouldDisableElementWrappers) {
              arr.push(
                /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, toReturn)
              );
            } else {
              arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, toReturn));
            }
          }
        }
        toReturn = arr;
      } else if (contextSwichContext && contextSwichContext.editorArgs && contextSwichContext.editorArgs.wrapper) {
        toReturn = contextSwichContext.editorArgs.wrapper(toReturn);
      }
    }
    if (this.props.elementWrappers && (!wasUIHandled && this.props.elementWrappers.components && this.props.elementWrappers.components[element.type] || this.props.elementWrappers.uiHandler && this.props.elementWrappers.uiHandler[element.uiHandler])) {
      const ElementWrapper = this.props.elementWrappers.uiHandler && this.props.elementWrappers.uiHandler[element.uiHandler] || this.props.elementWrappers.components[element.type];
      if (ElementWrapper) {
        return /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Consumer, null, (disabled) => disabled ? toReturn : /* @__PURE__ */ import_react3.default.createElement(
          ElementWrapper,
          __spreadValues({
            element,
            helpers: this.getHelpers(),
            primarySelection: isPrimary,
            isSelected,
            featureSupport: this.getFeatureSupport()
          }, this.props.elementWrappersArgs),
          toReturn
        ));
      }
    }
    return toReturn;
  }
  /**
   * the function that is called by slate to render text
   * @param props the properties given by slate to render a text leaf
   */
  renderText(props) {
    const { attributes, children, leaf: leaf3 } = props;
    return SERIALIZATION_REGISTRY.REACTIFY.text({
      active: false,
      selected: false,
      element: leaf3,
      asTemplate: false,
      customProps: __spreadProps(__spreadValues({}, attributes), { children }),
      // we don't care as we are not using the onCustom function
      // this will prevent normalization but that's fine
      parent: null,
      tree: null
    });
  }
  /**
   * The change function that is called via slate when a change occurs
   * this function hits every time on every change of the rich text
   * @param newValue the new value of the children of the document
   */
  onChange(newValue) {
    if (this.isUnmounted) {
      return;
    }
    if (this.editor.selection && ReactEditor.isFocused(this.editor)) {
      this.onFocusedChange(this.editor.selection.anchor.path, newValue);
    } else {
      this.onBlurredChange(newValue);
    }
    this.lastChangeWasSelectedDelete = false;
    this.setValue(newValue);
  }
  /**
   * Performs a hard blur event and the paths are cleared out
   */
  hardBlur() {
    if (this.isUnmounted) {
      return;
    }
    this.setState({
      currentSelectedInlineElementAnchor: null,
      currentSelectedInlineElement: null,
      currentSelectedText: null,
      currentSelectedTextAnchor: null,
      currentSelectedBlockElement: null,
      currentSelectedBlockElementAnchor: null,
      currentSelectedSuperBlockElements: null,
      currentSelectedSuperBlockElementAnchors: null,
      currentSelectedInlineContext: null,
      currentSelectedBlockContext: null,
      currentSelectedTopmostSuperBlockContext: null,
      currentSelectedElement: null,
      currentSelectedElementAnchor: null,
      currentSelectedElementContext: null,
      previousSelectedElementAnchor: this.state.currentSelectedElementAnchor,
      previousTextAnchor: this.state.currentTextAnchor
    });
    Transforms.deselect(this.editor);
    ReactEditor.blur(this.editor);
  }
  selectiveHardBlurIfHasSelectedElement(e2, ele) {
    var _a, _b, _c, _d;
    if (this.state.currentSelectedElement) {
      if (ele && ((_b = (_a = this.wrapperRef) == null ? void 0 : _a.current) == null ? void 0 : _b.selectiveHardBlur)) {
        (_d = (_c = this.wrapperRef) == null ? void 0 : _c.current) == null ? void 0 : _d.selectiveHardBlur(e2, ele);
      } else {
        this.hardBlur();
      }
    }
  }
  /**
   * Performs a soft blur event
   */
  softBlur() {
    ReactEditor.blur(this.editor);
    Transforms.deselect(this.editor);
  }
  deletePath(p) {
    const currentSelectedElementAnchor = this.state.currentSelectedElementAnchor;
    if (Path.equals(p, currentSelectedElementAnchor) || Path.isAncestor(p, currentSelectedElementAnchor)) {
      this.lastChangeWasSelectedDelete = true;
    }
    Transforms.delete(this.editor, {
      at: p
    });
    if (this.state.currentText) {
      ReactEditor.focus(this.editor);
    } else {
      ReactEditor.blur(this.editor);
    }
  }
  /**
   * given a node path, that should represent either an element or a text node
   * this allows such a path to be selected and be marked into the selection
   * @param p the path to select
   */
  selectPath(p) {
    if (this.isUnmounted) {
      return;
    }
    this.setState(
      this.calculateAnchors(
        this.editor.selection && this.editor.selection.anchor.path,
        this.state.treeValue.children,
        p
      )
    );
  }
  /**
   * Allows to move between two paths as it moves elements to one place to another
   * @param p the path to select
   */
  movePaths(from, to) {
    if (this.isUnmounted) {
      return;
    }
    const selectedElement = this.state.currentSelectedElement;
    const toCropped = [...to];
    const toLast = toCropped.pop();
    const fromCropped = [...from];
    const fromLast = fromCropped.pop();
    const actualTo = [...to];
    if (Path.equals(fromCropped, toCropped) && toLast > fromLast) {
      actualTo[actualTo.length - 1]--;
    }
    Transforms.moveNodes(
      this.editor,
      {
        at: from,
        to: actualTo
      }
    );
    setTimeout(() => {
      const newSelectedAnchor = selectedElement ? ReactEditor.findPath(this.editor, selectedElement) : null;
      this.setState(this.calculateAnchors(this.editor.selection && this.editor.selection.anchor.path, null, newSelectedAnchor));
    }, 0);
  }
  getPreviousSelectedElementAnchor() {
    return this.state.previousSelectedElementAnchor;
  }
  getPreviousTextAnchor() {
    return this.state.previousTextAnchor;
  }
  /**
   * Deletes the selected node that has been selected, either the current default
   * or one that has been manually selected using selectPath
   */
  deleteSelectedNode() {
    this.lastChangeWasSelectedDelete = true;
    const selectedElementAnchor = this.state.currentSelectedElementAnchor;
    Transforms.delete(this.editor, {
      at: selectedElementAnchor
    });
    if (this.state.currentText) {
      ReactEditor.focus(this.editor);
    } else {
      ReactEditor.blur(this.editor);
    }
  }
  /**
   * A helper function to call react focus back into the editor
   */
  focus() {
    ReactEditor.focus(this.editor);
  }
  /**
   * An async function that is a bit of a hack to focus at a given
   * range, because of the way slate works it needs to be async
   * @param at the range to focus at
   * @returns a void promise once it's done
   */
  async focusAt(at) {
    if (Range.isRange(at)) {
      return new Promise((r2) => {
        setTimeout(() => {
          ReactEditor.focus(this.editor);
          setTimeout(() => {
            Transforms.select(this.editor, at);
            setTimeout(r2, 0);
          }, 0);
        }, 0);
      });
    } else {
      this.selectPath(at);
    }
  }
  /**
   * Provides a fallback for insert when no insert region is found
   * @param type 
   * @returns 
   */
  getFallbackInsertPath() {
    if (this.state.currentSelectedInlineElement) {
      return [...this.state.currentSelectedInlineElementAnchor, this.state.currentSelectedInlineElement.children.length];
    } else if (this.state.currentSelectedBlockElement) {
      return [...this.state.currentSelectedBlockElementAnchor, this.state.currentSelectedBlockElement.children.length];
    } else if (this.state.currentSelectedSuperBlockElements) {
      const currentSelectedSuperBlockElementAnchor = this.state.currentSelectedSuperBlockElementAnchors[this.state.currentSelectedSuperBlockElementAnchors.length - 1];
      const currentSelectedSuperBlockElement = this.state.currentSelectedSuperBlockElements[this.state.currentSelectedSuperBlockElements.length - 1];
      return [...currentSelectedSuperBlockElementAnchor, currentSelectedSuperBlockElement.children.length];
    } else {
      return [this.state.treeValue.children.length];
    }
  }
  /**
   * Will insert an image based on a given file that has
   * been taken as an input
   * 
   * Note that there is an insert file function that should be given
   * as prop and that's what this function will call, if an error occurred
   * it should have been fed as a prop as well, so this function always
   * returns a void promise
   * 
   * @param file the file
   * @param standalone whether to make it a standalone image
   * @returns a void promise once it's done
   */
  async insertImage(file, standalone) {
    try {
      const data = await this.props.onInsertFile(file, true);
      if (!data) {
        return;
      }
      const imageNode = {
        type: "image",
        alt: null,
        children: [
          {
            bold: false,
            italic: false,
            text: "",
            underline: false
          }
        ],
        height: data.height,
        width: data.width,
        sizes: "70vw",
        src: data.result.url,
        srcId: data.result.id,
        srcSet: null,
        standalone
      };
      if (!this.editor.selection) {
        Transforms.insertNodes(this.editor, imageNode, { at: this.getFallbackInsertPath() });
      } else {
        Transforms.insertNodes(this.editor, imageNode);
      }
    } catch (err) {
    }
  }
  updateTemplateText(label, value) {
    if (this.state.currentSelectedInlineElement) {
      Transforms.setNodes(this.editor, {
        textContent: value || ""
      }, { at: this.state.currentSelectedInlineElementAnchor });
      Transforms.setNodes(this.editor, {
        text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.text)
      }, { at: this.state.currentSelectedTextAnchor });
    }
  }
  /**
   * Will insert a bit of template text that is used for templating purposes
   * 
   * @param label the label to give it
   * @param value the value that it gets
   * @param at at which range to insert it (optional)
   * @returns a void promise
   */
  insertTemplateText(label, value) {
    const textNode = {
      bold: false,
      italic: false,
      underline: false,
      text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.text)
    };
    const inlineNode = {
      children: [textNode],
      type: "inline",
      textContent: value || ""
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, inlineNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, inlineNode);
    }
  }
  updateTemplateHTML(label, value) {
    if (this.state.currentSelectedBlockElement) {
      Transforms.setNodes(this.editor, {
        html: value || ""
      }, { at: this.state.currentSelectedBlockElementAnchor });
      Transforms.setNodes(this.editor, {
        text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.container)
      }, { at: this.state.currentSelectedTextAnchor });
    }
  }
  /**
   * Will insert a bit of template html that is used for templating purposes, work similar
   * to template text, except it uses html content instead to replace the inner html
   * 
   * @param label the label to be given to the element to be added
   * @param value the value that will be used from the context
   * @param at an optional range where to be inserted
   */
  insertTemplateHTML(label, value) {
    const textNode = {
      bold: false,
      italic: false,
      underline: false,
      text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.container)
    };
    const voidBlock = {
      children: [textNode],
      type: "void-block",
      html: value || ""
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, voidBlock, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, voidBlock);
    }
  }
  /**
   * Inserts a table at the given location
   * @param type the type of the table
   */
  insertTable(type) {
    const tableNode = {
      type: "table",
      children: [
        {
          type: "tbody",
          children: [
            {
              type: "tr",
              children: [
                {
                  type: "td",
                  children: [
                    STANDARD_PARAGRAPH()
                  ]
                }
              ]
            }
          ]
        }
      ],
      tableType: type || null
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, tableNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, tableNode);
    }
  }
  insertTableColumn() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentColumnIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    if (currentColumnIndex === -1) {
      return;
    }
    const currentColumn = this.state.currentSelectedSuperBlockElements[currentColumnIndex];
    const currentColumnAnchor = this.state.currentSelectedSuperBlockElementAnchors[currentColumnIndex];
    const targetColumnAnchor = [...currentColumnAnchor];
    targetColumnAnchor[targetColumnAnchor.length - 1]++;
    const targetIndex = targetColumnAnchor[targetColumnAnchor.length - 1];
    const tableAnchor = [...currentColumnAnchor];
    tableAnchor.pop();
    tableAnchor.pop();
    tableAnchor.pop();
    try {
      const tableElement = this.getNodeAt(tableAnchor);
      if (tableElement.type === "table") {
        tableElement.children.forEach((theadOrTbodyOrTfoot, theadOrTbodyOrTFootIndex) => {
          theadOrTbodyOrTfoot.children.forEach((row, rowIndex) => {
            const column = {
              type: "td",
              children: [
                STANDARD_PARAGRAPH()
              ]
            };
            let actualTargetIndex = targetIndex;
            if (actualTargetIndex > row.children.length) {
              actualTargetIndex = row.children.length;
            }
            const insertPoint = [...tableAnchor, theadOrTbodyOrTFootIndex, rowIndex, actualTargetIndex];
            this.preventNormalize = rowIndex !== theadOrTbodyOrTfoot.children.length - 1;
            Transforms.insertNodes(this.editor, column, { at: insertPoint });
            this.preventNormalize = false;
          });
        });
        const textAnchorOfColumn = targetColumnAnchor;
        textAnchorOfColumn.push(0);
        textAnchorOfColumn.push(0);
        this.focusAt({
          anchor: {
            offset: 0,
            path: targetColumnAnchor
          },
          focus: {
            offset: 0,
            path: targetColumnAnchor
          }
        });
      }
    } catch (e2) {
    }
  }
  deleteTableColumn() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentColumnIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    if (currentColumnIndex === -1) {
      return;
    }
    const currentColumn = this.state.currentSelectedSuperBlockElements[currentColumnIndex];
    const currentColumnAnchor = this.state.currentSelectedSuperBlockElementAnchors[currentColumnIndex];
    const targetIndex = currentColumnAnchor[currentColumnAnchor.length - 1];
    const tableAnchor = [...currentColumnAnchor];
    tableAnchor.pop();
    tableAnchor.pop();
    tableAnchor.pop();
    try {
      const tableElement = this.getNodeAt(tableAnchor);
      if (tableElement.type === "table") {
        tableElement.children.forEach((theadOrTbodyOrTfoot, theadOrTbodyOrTFootIndex) => {
          theadOrTbodyOrTfoot.children.forEach((row, rowIndex) => {
            const deletePoint = [...tableAnchor, theadOrTbodyOrTFootIndex, rowIndex, targetIndex];
            this.preventNormalize = rowIndex !== theadOrTbodyOrTfoot.children.length - 1;
            Transforms.delete(this.editor, { at: deletePoint });
            this.preventNormalize = false;
          });
        });
      }
    } catch (e2) {
    }
  }
  insertTableRow() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentRowIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "tr");
    if (currentRowIndex === -1) {
      return;
    }
    const currentRow = this.state.currentSelectedSuperBlockElements[currentRowIndex];
    const currentRowAnchor = this.state.currentSelectedSuperBlockElementAnchors[currentRowIndex];
    const row = {
      type: "tr",
      children: currentRow.children.map((v) => ({
        type: "td",
        children: [
          STANDARD_PARAGRAPH()
        ]
      }))
    };
    const parentTbodyOrTheadOrTfootAnchor = [...currentRowAnchor];
    parentTbodyOrTheadOrTfootAnchor.pop();
    const parentTbodyOrTheadOrTfoot = this.getNodeAt(parentTbodyOrTheadOrTfootAnchor);
    if (parentTbodyOrTheadOrTfoot.type === "tbody") {
      const targetRowAnchor = currentRowAnchor;
      targetRowAnchor[targetRowAnchor.length - 1]++;
      Transforms.insertNodes(this.editor, row, { at: targetRowAnchor });
      const targetRowAnchorFirstText = targetRowAnchor;
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      this.focusAt({
        anchor: {
          offset: 0,
          path: targetRowAnchorFirstText
        },
        focus: {
          offset: 0,
          path: targetRowAnchorFirstText
        }
      });
    } else if (parentTbodyOrTheadOrTfoot.type === "thead") {
      const tbodyAnchor = [...parentTbodyOrTheadOrTfootAnchor];
      tbodyAnchor[tbodyAnchor.length - 1]++;
      let tbody = null;
      try {
        tbody = this.getNodeAt(tbodyAnchor);
      } catch (e2) {
      }
      if (tbody && tbody.type === "tbody") {
        const targetRowAnchor = tbodyAnchor;
        targetRowAnchor.push(0);
        Transforms.insertNodes(this.editor, row, { at: targetRowAnchor });
        const targetRowAnchorFirstText = targetRowAnchor;
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        this.focusAt({
          anchor: {
            offset: 0,
            path: targetRowAnchorFirstText
          },
          focus: {
            offset: 0,
            path: targetRowAnchorFirstText
          }
        });
      } else {
        const tbody2 = {
          type: "tbody",
          children: [row]
        };
        Transforms.insertNodes(this.editor, tbody2, { at: tbodyAnchor });
        const targetRowAnchorFirstText = tbodyAnchor;
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        this.focusAt({
          anchor: {
            offset: 0,
            path: targetRowAnchorFirstText
          },
          focus: {
            offset: 0,
            path: targetRowAnchorFirstText
          }
        });
      }
    } else if (parentTbodyOrTheadOrTfoot.type === "tfoot") {
      const tbodyAnchor = [...parentTbodyOrTheadOrTfootAnchor];
      tbodyAnchor[tbodyAnchor.length - 1]--;
      let tbody = null;
      try {
        tbody = this.getNodeAt(tbodyAnchor);
      } catch (e2) {
      }
      const tfootClone = __spreadValues({}, parentTbodyOrTheadOrTfoot);
      tfootClone.children = tfootClone.children.map((v) => {
        return {
          type: "tr",
          children: v.children.map((v2) => ({
            type: "td",
            children: [
              STANDARD_PARAGRAPH()
            ]
          }))
        };
      });
      this.preventNormalize = true;
      if (tbody && tbody.type === "tbody") {
        const currentTBodyPropsCopy = __spreadValues({}, tbody);
        delete currentTBodyPropsCopy.children;
        Transforms.setNodes(
          this.editor,
          currentTBodyPropsCopy,
          {
            at: parentTbodyOrTheadOrTfootAnchor
          }
        );
      } else {
        Transforms.setNodes(
          this.editor,
          {
            type: "tbody"
          },
          {
            at: parentTbodyOrTheadOrTfootAnchor
          }
        );
      }
      this.preventNormalize = false;
      const nextAnchorForTfoot = [...parentTbodyOrTheadOrTfootAnchor];
      nextAnchorForTfoot[nextAnchorForTfoot.length - 1]++;
      Transforms.insertNodes(this.editor, tfootClone, { at: nextAnchorForTfoot });
      const targetRowAnchorFirstText = tbody ? parentTbodyOrTheadOrTfootAnchor : nextAnchorForTfoot;
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      this.focusAt({
        anchor: {
          offset: 0,
          path: targetRowAnchorFirstText
        },
        focus: {
          offset: 0,
          path: targetRowAnchorFirstText
        }
      });
    }
  }
  deleteTableRow() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentRowIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "tr");
    if (currentRowIndex === -1) {
      return;
    }
    try {
      Transforms.delete(this.editor, { at: this.state.currentSelectedSuperBlockElementAnchors[currentRowIndex] });
    } catch (e2) {
    }
  }
  /**
   * Tells whether the current table row can
   * be toggled in the environment it is
   */
  canToggleTable(element) {
    if (!this.state.currentSelectedSuperBlockElements) {
      return false;
    }
    const potentialTdIndex = findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    if (potentialTdIndex === -1) {
      return false;
    }
    const tdAnchor = this.state.currentSelectedSuperBlockElementAnchors[potentialTdIndex];
    const rowPath = [...tdAnchor];
    rowPath.pop();
    const theadOrTbodyOrTfootPath = [...rowPath];
    theadOrTbodyOrTfootPath.pop();
    const tablePath = [...theadOrTbodyOrTfootPath];
    tablePath.pop();
    try {
      const potentialRow = this.getNodeAt(rowPath);
      if (potentialRow.type !== "tr") {
        return false;
      }
      const theadOrTbodyOrTfoot = this.getNodeAt(theadOrTbodyOrTfootPath);
      if (theadOrTbodyOrTfoot.type === element) {
        return true;
      } else if (theadOrTbodyOrTfoot.type === "tfoot" || theadOrTbodyOrTfoot.type === "thead") {
        return false;
      }
      const tableParent = this.getNodeAt(tablePath);
      if (tableParent.type !== "table") {
        return false;
      }
      const theadOrTfootAlreadyExists = tableParent.children.find((c) => c.type === element);
      if (theadOrTfootAlreadyExists) {
        return false;
      } else {
        if (element === "thead") {
          return rowPath[rowPath.length - 1] === 0;
        } else if (element === "tfoot") {
          return rowPath[rowPath.length - 1] === theadOrTbodyOrTfoot.children.length - 1;
        }
        return false;
      }
    } catch (e2) {
      return false;
    }
  }
  /**
   * Only works when the first element of the table
   * is selected, aka the first row
   */
  toggleTable(element) {
    if (!this.canToggleTable(element)) {
      return;
    }
    const potentialTdIndex = findLastIndex(this.state.currentSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    const tdAnchor = this.state.currentSelectedSuperBlockElementAnchors[potentialTdIndex];
    const rowPath = [...tdAnchor];
    rowPath.pop();
    const theadOrTbodyPath = [...rowPath];
    theadOrTbodyPath.pop();
    const tablePath = [...theadOrTbodyPath];
    tablePath.pop();
    const tableParent = this.getNodeAt(tablePath);
    const position = tableParent.children.findIndex((e2) => e2.type === element);
    const bodyPosition = tableParent.children.findIndex((e2) => e2.type === "tbody");
    if (position !== -1) {
      const currentTBody = tableParent.children[bodyPosition];
      if (!currentTBody) {
        Transforms.setNodes(
          this.editor,
          {
            type: "tbody"
          },
          {
            at: [...tablePath, position]
          }
        );
      } else {
        const currentTBodyPropsCopy = __spreadValues({}, currentTBody);
        delete currentTBodyPropsCopy.children;
        Transforms.setNodes(
          this.editor,
          currentTBodyPropsCopy,
          {
            at: [...tablePath, position]
          }
        );
      }
    } else {
      const currentTBody = tableParent.children[bodyPosition];
      if (!currentTBody) {
        return;
      }
      if (currentTBody.children.length === 1) {
        Transforms.setNodes(
          this.editor,
          {
            type: element
          },
          {
            at: [...tablePath, bodyPosition]
          }
        );
      } else {
        const currentTBodyPropsCopy = __spreadValues({}, currentTBody);
        currentTBodyPropsCopy.children = [];
        currentTBodyPropsCopy.type = element;
        this.preventNormalize = true;
        Transforms.insertNodes(
          this.editor,
          currentTBodyPropsCopy,
          {
            at: [...tablePath, element === "thead" ? 0 : bodyPosition + 1]
          }
        );
        this.preventNormalize = false;
        if (element === "thead") {
          Transforms.moveNodes(
            this.editor,
            {
              // tbody is now in 1 ahead
              // zero for the first row
              at: [...tablePath, bodyPosition + 1, 0],
              // this is our new thead
              to: [...tablePath, 0, 0]
            }
          );
        } else {
          Transforms.moveNodes(
            this.editor,
            {
              // tbody is at the same place as before
              // we pick the last row
              at: [...tablePath, bodyPosition, currentTBody.children.length - 1],
              // this is our new tfoot which is after our body
              to: [...tablePath, bodyPosition + 1, 0]
            }
          );
        }
      }
    }
  }
  _getVideoSrcOriginAndStatus(url) {
    let src = null;
    let origin = null;
    let status = true;
    let parsedURL = null;
    if (url) {
      try {
        parsedURL = new URL(url);
      } catch (e2) {
        status = false;
      }
    }
    if (parsedURL) {
      if (parsedURL.hostname === "youtube.com" || parsedURL.hostname === "www.youtube.com" || parsedURL.hostname === "youtu.be") {
        origin = "youtube";
        const isClassicYTUrl = parsedURL.hostname === "youtube.com" || parsedURL.hostname === "www.youtube.com";
        if (isClassicYTUrl && parsedURL.pathname.startsWith("/embed/")) {
          src = parsedURL.pathname.split("/")[2];
        } else if (isClassicYTUrl && parsedURL.pathname.startsWith("/watch")) {
          let search = parsedURL.search;
          if (search[0] === "?") {
            search = search.substr(1);
          }
          search.split("&").forEach((v) => {
            if (v.startsWith("v=")) {
              src = v.substr(2);
            }
          });
        } else if (parsedURL.hostname === "youtu.be") {
          src = parsedURL.pathname.split("/")[1];
        }
        status = true;
      } else if (parsedURL.host === "player.vimeo.com") {
        origin = "vimeo";
        src = parsedURL.pathname.split("/")[2];
        status = true;
      } else {
        status = false;
      }
    }
    return {
      src,
      origin,
      status
    };
  }
  updateVideo(url) {
    const data = this._getVideoSrcOriginAndStatus(url);
    if (data.status && this.state.currentSelectedBlockElement && this.state.currentSelectedBlockElement.type === "video") {
      Transforms.setNodes(this.editor, {
        origin: data.origin,
        src: data.src
      }, {
        at: this.state.currentSelectedBlockElementAnchor
      });
    }
    return data.status;
  }
  /**
   * Will insert a video given the information
   * @param url the url of the video
   * @param at a partial range to insert at
   * @returns a boolean on whether it succeeded
   */
  insertVideo(url) {
    const data = this._getVideoSrcOriginAndStatus(url);
    const videoNode = {
      type: "video",
      children: [
        {
          bold: false,
          italic: false,
          text: "",
          underline: false
        }
      ],
      origin: data.origin,
      src: data.src
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, videoNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, videoNode);
    }
    this.onChange(this.editor.children);
    return data.status;
  }
  /**
   * Will insert a file based on the information given it uses
   * the standard on insert file function in order to perfom it
   *
   * @param file the file to insert
   * @param at a partial range to insert at
   */
  async insertFile(file) {
    try {
      const data = await this.props.onInsertFile(file, false);
      if (!data) {
        return;
      }
      const fileNode = {
        type: "file",
        children: [
          {
            bold: false,
            italic: false,
            text: "",
            underline: false
          }
        ],
        extension: mimeTypeToExtension(file.type),
        fileName: data.result.name,
        size: prettyBytes(data.result.size),
        src: data.result.url,
        srcId: data.result.id
      };
      if (!this.editor.selection) {
        Transforms.insertNodes(this.editor, fileNode, { at: this.getFallbackInsertPath() });
      } else {
        Transforms.insertNodes(this.editor, fileNode);
      }
    } catch (err) {
    }
    this.onChange(this.editor.children);
  }
  /**
   * Will insert a container at the given location
   * @param type optional, the container type, otherwise will insert a standard container
   * @param at an optional range
   */
  async insertContainer(type) {
    const containerNode = {
      type: "container",
      children: [
        {
          type: "paragraph",
          children: [
            {
              bold: false,
              italic: false,
              underline: false,
              text: ""
            }
          ]
        }
      ],
      containerType: type || null
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, containerNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, containerNode);
    }
    this.onChange(this.editor.children);
  }
  /**
   * Inserts a custom element
   * @param type the type for the custom element
   * @param at an optional at range to insert the custom at
   */
  async insertCustom(type) {
    const customNode = {
      type: "custom",
      children: [
        {
          type: "paragraph",
          children: [
            {
              bold: false,
              italic: false,
              underline: false,
              text: ""
            }
          ]
        }
      ],
      customType: type
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, customNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, customNode);
    }
    this.onChange(this.editor.children);
  }
  /**
   * Makes a quote out of the current element
   * @param at toggle at the given range, this will cause a focus
   */
  async toggleQuote() {
    const isCollapsed = Range.isCollapsed(this.editor.selection);
    if (isCollapsed && this.state.currentSelectedBlockElement) {
      if (this.state.currentSelectedBlockElement.type === "quote") {
        Transforms.setNodes(
          this.editor,
          {
            type: "paragraph"
          }
        );
      } else {
        Transforms.setNodes(
          this.editor,
          {
            type: "quote"
          }
        );
      }
    }
    this.onChange(this.editor.children);
  }
  /**
   * Makes a title out of the current element
   * @param type the title type
   * @param at an optional range
   */
  async toggleTitle(type) {
    const isCollapsed = Range.isCollapsed(this.editor.selection);
    if (isCollapsed && this.state.currentSelectedBlockElement) {
      if (this.state.currentSelectedBlockElement.type === "title") {
        Transforms.setNodes(
          this.editor,
          {
            type: "paragraph"
          }
        );
      } else {
        Transforms.setNodes(
          this.editor,
          {
            type: "title",
            titleType: type
          }
        );
      }
    }
    this.onChange(this.editor.children);
  }
  /**
   * Makes a list out of the current element
   * @param type the type of the list that is to be toggled, either bulleted or number
   * @param at an optional range
   */
  async insertList(type) {
    const listNode = {
      type: "list",
      listType: type,
      children: [
        {
          type: "list-item",
          children: [
            STANDARD_PARAGRAPH()
          ]
        }
      ]
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, listNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, listNode);
    }
  }
  updateLink(url, tvalue) {
    let validState = true;
    if (url) {
      try {
        const urlParsed = new URL(url);
        const isLocal = urlParsed.hostname === location.hostname;
        const onlyLocal = !this.props.features.supportsExternalLinks;
        if (onlyLocal && !isLocal) {
          validState = false;
        }
      } catch (e2) {
        validState = false;
      }
    }
    if (this.state.currentSelectedInlineElement && this.state.currentSelectedInlineElement.type === "link") {
      const link = {
        href: url,
        thref: tvalue
      };
      Transforms.setNodes(this.editor, link, {
        at: this.state.currentSelectedInlineElementAnchor
      });
    }
    this.onChange(this.editor.children);
    return validState;
  }
  /**
   * Makes a link out of the current element
   * @param url the url that we are using (null if using tvalue)
   * @param tvalue the template value to use (null if providing url)
   * @param at an optional range to pass
   * @returns a boolean if the link was valid and toggleLink
   */
  toggleLink(url, tvalue) {
    let validState = true;
    if (url) {
      try {
        const urlParsed = new URL(url);
        const isLocal = urlParsed.hostname === location.hostname;
        const onlyLocal = !this.props.features.supportsExternalLinks;
        if (onlyLocal && !isLocal) {
          validState = false;
        }
      } catch (e2) {
        validState = false;
      }
    }
    const link = {
      type: "link",
      href: url,
      thref: tvalue,
      children: [
        STANDARD_TEXT_NODE(this.props.baseI18n.link)
      ]
    };
    if (this.editor.selection && Range.isCollapsed(this.editor.selection)) {
      if (this.state.currentSelectedInlineElement && this.state.currentSelectedInlineElement.type === "link") {
        Transforms.unwrapNodes(this.editor, {
          at: this.state.currentSelectedInlineElementAnchor
        });
      } else {
        Transforms.insertNodes(this.editor, link);
      }
    } else if (this.editor.selection) {
      Transforms.wrapNodes(this.editor, link, {
        match: (v) => Text.isText(v),
        split: true
      });
    } else {
      Transforms.insertNodes(this.editor, link, {
        at: this.getFallbackInsertPath()
      });
    }
    this.onChange(this.editor.children);
    return validState;
  }
  /**
   * Abitrary update, does an arbitrary update for an element or node
   * at the given path
   * @param args an object to update that should be partial of the element rich properties
   * @param anchor the node anchor to update
   */
  set(args, anchor) {
    Transforms.setNodes(this.editor, args, { at: anchor });
    this.onChange(this.editor.children);
  }
  /**
   * Sets the current style for the element
   * @param style the style to be set, this should be a style string
   * @param anchor the element anchor to update
   */
  setStyle(style, anchor) {
    Transforms.setNodes(this.editor, {
      style
    }, { at: anchor });
    this.onChange(this.editor.children);
  }
  /**
   * Sets the template hover style for the element
   * @param style the style to be set, this should be a style string
   * @param anchor the element anchor to update
   */
  setHoverStyle(style, anchor) {
    Transforms.setNodes(this.editor, {
      styleHover: style
    }, { at: anchor });
    this.onChange(this.editor.children);
  }
  /**
   * Sets the active style for the element
   * @param style the style to be set, this should be a style string
   * @param anchor the element anchor to update
   */
  setActiveStyle(style, anchor) {
    Transforms.setNodes(this.editor, {
      styleActive: style
    }, { at: anchor });
    this.onChange(this.editor.children);
  }
  /**
   * Sets the rich classes of the element
   * @param classes an array of string that represent the rich classes
   * @param anchor the element anchor
   */
  setRichClasses(classes, anchor) {
    Transforms.setNodes(this.editor, {
      richClassList: classes
    }, { at: anchor });
    this.onChange(this.editor.children);
  }
  /**
   * Sets a given action for usage within templating
   * as an event listener
   * 
   * Note that using this function is risky if the structure to provide a given
   * key is not understood properly, keys should be valid
   * 
   * @param key the key for the action, should be something like, click, mouseenter, etc...
   * @param value the value for the property
   * @param anchor the anchor for the element that is to be assigned the listener to turn interactive
   */
  setAction(key, value, anchor) {
    Transforms.setNodes(this.editor, {
      [key]: value
    }, { at: anchor });
    this.onChange(this.editor.children);
  }
  /**
   * Sets an UI handler to a given element so that it is ui handled
   * 
   * This is an avanced option for ui handling
   * 
   * normally you would use this function for updating an already inserted
   * ui handled component
   * 
   * @param value the value for the ui handler that should be taken out of the context
   * @param args the args for the ui handler
   * @param anchor the anchor where to insert at
   */
  setUIHandler(value, args, anchor) {
    Transforms.setNodes(this.editor, {
      uiHandler: value,
      uiHandlerArgs: args
    }, { at: anchor });
    this.onChange(this.editor.children);
  }
  /**
   * Sets ui handler args to a given element
   * @param key the ui handler arg key
   * @param value the ui handler arg value
   * @param anchor the anchor in question
   */
  setUIHandlerArg(key, value, anchor) {
    const nodeAtPath = Node.get(this.editor, anchor);
    let newValue = __spreadProps(__spreadValues({}, nodeAtPath.uiHandlerArgs), {
      [key]: value
    });
    if (value === null || value === void 0) {
      delete newValue[key];
    }
    Transforms.setNodes(this.editor, {
      uiHandlerArgs: newValue
    }, { at: anchor });
    this.onChange(this.editor.children);
  }
  /**
   * Inserts an element at a given position
   * @param element the element 
   * @param at an optional position to do it at
   */
  insertElement(element) {
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, element, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, element);
    }
  }
  /**
   * Sets the context key
   * @param value the value for the new context key
   * @param anchor the anchor where to set the context key at
   */
  setContext(value, anchor) {
    Transforms.setNodes(this.editor, {
      context: value
    }, { at: anchor });
  }
  /**
   * Sets the context key
   * @param value the value for the new if condition key
   * @param anchor the anchor where to set the context key at
   */
  setIfCondition(value, anchor) {
    Transforms.setNodes(this.editor, {
      ifCondition: value
    }, { at: anchor });
  }
  /**
  * Sets the for-each loop key
  * @param value the value for the new context key
  * @param anchor the anchor where to set the context key at
  */
  setForEach(value, anchor) {
    Transforms.setNodes(this.editor, {
      forEach: value
    }, { at: anchor });
  }
  /**
   * Formats the current text as bold
   */
  formatToggle(key) {
    if (this.state.currentText && this.editor.selection && Point.equals(this.editor.selection.anchor, this.editor.selection.focus)) {
      Transforms.insertNodes(
        this.editor,
        __spreadProps(__spreadValues({}, this.state.currentText), {
          text: "",
          [key]: !this.state.currentText[key]
        })
      );
    } else {
      if (this.state.currentText) {
        Transforms.setNodes(
          this.editor,
          { [key]: !this.state.currentText[key] },
          { match: (n3) => Text.isText(n3), split: true }
        );
      } else if (this.state.currentSelectedText) {
        Transforms.setNodes(
          this.editor,
          { [key]: !this.state.currentSelectedText[key] },
          { match: (n3) => Text.isText(n3), at: this.state.currentSelectedBlockElementAnchor, mode: "all" }
        );
      }
    }
  }
  /**
   * This is a helper function that is used in order to extract the available
   * classes that we have for usage within rich classes, container, and customs
   * considering what we have found in the all promise for all what is available
   * because there might be filters for them, and we need to find the labels and whatnot
   * of what we can actually use
   * 
   * @param feature the feature we are searching for basically, supportsCustom, supportsRichClasses and supportsContainers
   * that we decide on whether we support that feature
   * @param featureAll the all name for the feature in the state and where it is located in the state that we are meant to await
   * basically allCustoms, allRichClasses and allContainers
   * @param featureList the list of supported that is given in the feature support of the property so basically
   * supportedCustoms, supportedRichClasses and supportedContainers
   * @param i18nLocation the location for the i18n data in the i18n root, basically custom, containers and rich
   */
  availableFilteringFunction(feature, featureAll, featureList, i18nLocation) {
    return (
      // we pick the feature of the eg. supportsCustom, supportsRichClasses out of the feature support to see
      // if we support that feature at all
      (this.props.features[feature] ? (
        // if we do we pick from the state what we have found in the stylesheet
        // of the classes for that feature as we have awaited
        this.state[featureAll].filter(
          (c) => (
            // and we filter based on our feature list, if we have one of course, otherwise all pass
            this.props.features[featureList] ? this.props.features[featureList].includes(c) : true
          )
        )
      ) : []).map((c) => {
        return {
          value: c,
          label: this.props.baseI18n && this.props.baseI18n[i18nLocation] && // both the default and by replacing
          (this.props.baseI18n[i18nLocation][c] || this.props.baseI18n[i18nLocation][c.replace(/-/g, "_")]) || c
          // and if we find nothing we use the value itself
        };
      })
    );
  }
  /**
   * Triggers on the keydown of the slate editor itself
   * @param e the event
   */
  onKeyDown(e2) {
    if (e2.key === "Enter" && e2.altKey) {
      this.insertSuperbreak(null, e2.shiftKey);
    } else if (e2.key === "z" && e2.ctrlKey && !e2.shiftKey) {
      this.editor.undo();
    } else if (e2.key === "y" && e2.ctrlKey || e2.key === "z" && e2.ctrlKey && e2.shiftKey) {
      this.editor.redo();
    }
  }
  /**
   * Basic old school component did mount
   */
  async componentDidMount() {
    await ALL_PROMISE;
    if (!this.isUnmounted) {
      this.setState({
        allContainers: ALL_CONTAINERS,
        allTables: ALL_TABLES,
        allCustom: ALL_CUSTOM,
        allRichClasses: ALL_RICH_CLASSES
      });
    }
    if (this.props.autoFocus) {
      ReactEditor.focus(this.editor);
      this.forceFocus();
    }
    const editableHTMLElement = this.editableRef.current.childNodes[0];
    EDITOR_POOL.set(editableHTMLElement, this);
  }
  componentDidUpdate(prevProps, prevState, snapshot) {
    if (prevState.currentText && prevState.currentText.text === "") {
      const anchorInCurrent = ReactEditor.findPath(this.editor, prevState.currentText);
      if (anchorInCurrent) {
        try {
          const elementInCurrent = Node.get(this.editor, anchorInCurrent);
          if (elementInCurrent.text === "" && elementInCurrent !== this.state.currentText) {
            this.normalizeNode([this.editor, []]);
          }
        } catch (e2) {
        }
      }
    }
  }
  getState() {
    return this.state;
  }
  /**
   * Sometimes slate leaves a selection behind we need to unselect if such
   * is the case
   */
  componentWillUnmount() {
    this.isUnmounted = true;
    ReactEditor.deselect(this.editor);
    const editableHTMLElement = this.editableRef.current.childNodes[0];
    EDITOR_POOL.delete(editableHTMLElement);
  }
  /**
   * Provides the helpers that are used by the editor
   * to construct rich text data
   */
  getHelpers() {
    const helpers = {
      editor: this.editor,
      Transforms,
      Range,
      ReactEditor,
      HistoryEditor,
      Node,
      Path,
      getContextFor: this.getContextFor,
      getRootContext: this.getRootContext,
      getState: this.getState,
      selectPath: this.selectPath,
      deletePath: this.deletePath,
      movePaths: this.movePaths,
      deleteSelectedNode: this.deleteSelectedNode,
      getPreviousSelectedElementAnchor: this.getPreviousSelectedElementAnchor,
      getPreviousTextAnchor: this.getPreviousTextAnchor,
      focus: this.focus,
      focusAt: this.focusAt,
      insertSuperbreak: this.insertSuperbreak,
      formatToggle: this.formatToggle,
      insertContainer: this.insertContainer,
      insertCustom: this.insertCustom,
      insertFile: this.insertFile,
      insertImage: this.insertImage,
      insertVideo: this.insertVideo,
      updateVideo: this.updateVideo,
      insertTemplateText: this.insertTemplateText,
      updateTemplateText: this.updateTemplateText,
      insertTemplateHTML: this.insertTemplateHTML,
      updateTemplateHTML: this.updateTemplateHTML,
      insertTable: this.insertTable,
      insertTableColumn: this.insertTableColumn,
      insertTableRow: this.insertTableRow,
      toggleTable: this.toggleTable,
      canToggleTable: this.canToggleTable,
      toggleLink: this.toggleLink,
      updateLink: this.updateLink,
      insertList: this.insertList,
      toggleQuote: this.toggleQuote,
      toggleTitle: this.toggleTitle,
      setActiveStyle: this.setActiveStyle,
      setContext: this.setContext,
      setIfCondition: this.setIfCondition,
      setForEach: this.setForEach,
      setHoverStyle: this.setHoverStyle,
      setStyle: this.setStyle,
      set: this.set,
      setRichClasses: this.setRichClasses,
      setAction: this.setAction,
      setUIHandler: this.setUIHandler,
      setUIHandlerArg: this.setUIHandlerArg,
      insertElement: this.insertElement,
      deleteTableColumn: this.deleteTableColumn,
      deleteTableRow: this.deleteTableRow,
      hardBlur: this.hardBlur,
      softBlur: this.softBlur
    };
    return helpers;
  }
  /**
   * Provides the feature support information that is used by the editor
   * to know what it can and can't do
   */
  getFeatureSupport() {
    if (this.props.features === null) {
      return null;
    }
    const availableCustoms = this.availableFilteringFunction("supportsCustom", "allCustom", "supportedCustoms", "richCustoms");
    const availableRichClasses = this.availableFilteringFunction("supportsRichClasses", "allRichClasses", "supportedRichClasses", "richClasses");
    const availableContainers = this.availableFilteringFunction("supportsContainers", "allContainers", "supportedContainers", "richContainers");
    const availableTables = this.availableFilteringFunction("supportsTables", "allTables", "supportedTables", "richTables");
    const newFeatureSupport = __spreadProps(__spreadValues({}, this.props.features), {
      availableContainers,
      availableCustoms,
      availableRichClasses,
      availableTables
    });
    return newFeatureSupport;
  }
  forceFocus() {
    if (!this.state.focused) {
      const path3 = [];
      let current2 = this.editor.children && this.editor.children[0];
      while (current2) {
        path3.push(0);
        current2 = current2.children && current2.children[0];
      }
      this.focusAt({
        anchor: {
          offset: 0,
          path: path3
        },
        focus: {
          offset: 0,
          path: path3
        }
      });
      setTimeout(() => {
        if (!this.state.focused) {
          this.onFocusedChange(path3, this.editor.children);
        }
      }, 20);
    }
  }
  forceBlur() {
    setTimeout(() => {
      if (this.state.focused) {
        this.onBlurredChange(this.editor.children);
      }
    }, 20);
  }
  /**
   * Render function
   */
  render() {
    let children = /* @__PURE__ */ import_react3.default.createElement(
      CurrentElementProvider,
      {
        block: this.state.currentSelectedBlockElement,
        superblocks: this.state.currentSelectedSuperBlockElements || [],
        inline: this.state.currentSelectedInlineElement
      },
      /* @__PURE__ */ import_react3.default.createElement("div", { ref: this.editableRef, style: { display: "contents" }, "data-slate-bug": "true" }, /* @__PURE__ */ import_react3.default.createElement(
        Editable,
        {
          id: this.props.id,
          lang: this.props.lang,
          onKeyDown: this.onKeyDown,
          renderElement: this.renderElement,
          renderLeaf: this.renderText,
          placeholder: this.props.placeholder,
          readOnly: this.props.disabled,
          disabled: this.props.disabled,
          style: { scrollMarginTop: this.props.scrollMarginTop },
          onBlur: this.forceBlur,
          "aria-invalid": !this.props.currentValid,
          "aria-errormessage": this.props.currentValid ? null : this.props.currentGeneralErrorElementId,
          "aria-describedby": this.props.currentDescribedBy,
          "aria-placeholder": this.props.placeholder
        }
      ))
    );
    const Wrapper = this.props.Wrapper;
    if (Wrapper) {
      children = /* @__PURE__ */ import_react3.default.createElement(
        Wrapper,
        __spreadProps(__spreadValues({}, this.props.wrapperArgs), {
          disabled: this.props.disabled,
          state: this.state,
          helpers: this.getHelpers(),
          featureSupport: this.getFeatureSupport(),
          currentLoadError: this.props.currentLoadError,
          dismissCurrentLoadError: this.props.dismissCurrentLoadError,
          ref: this.wrapperRef,
          baseI18n: this.props.baseI18n
        }),
        children
      );
    }
    if (this.props.rootContext && this.props.rootContext.editorArgs && this.props.rootContext.editorArgs.wrapper) {
      children = this.props.rootContext.editorArgs.wrapper(children);
    }
    if (this.state.treeValue.children !== this.editor.children) {
      this.editor.children = this.state.treeValue.children;
    }
    return /* @__PURE__ */ import_react3.default.createElement(
      Slate,
      {
        editor: this.editor,
        value: this.state.treeValue.children,
        onChange: this.onChange
      },
      children
    );
  }
};

// ../editor/slate/wrapper.tsx
var import_react6 = __toESM(require_react());

// ../editor/slate/drawer/index.tsx
var import_react4 = __toESM(require_react());
function DefaultWrapperDrawerElementTitle(props) {
  return /* @__PURE__ */ import_react4.default.createElement("h6", null, props.info.isInteractive ? /* @__PURE__ */ import_react4.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconRtlOnly" }, String.fromCharCode(9094)) : null, /* @__PURE__ */ import_react4.default.createElement(
    "span",
    {
      className: props.isCurrent ? "slateEditorWrapperDrawerElementTitleSelected" : "slateEditorWrapperDrawerElementTitle",
      role: "button",
      "aria-current": props.isCurrent,
      onClick: props.onSelect
    },
    props.info.name
  ), props.info.isInteractive ? /* @__PURE__ */ import_react4.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconLtrOnly" }, String.fromCharCode(9094)) : null, props.isCurrent ? null : /* @__PURE__ */ import_react4.default.createElement(import_react4.default.Fragment, null, /* @__PURE__ */ import_react4.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconLtrOnly" }, String.fromCharCode(11106)), /* @__PURE__ */ import_react4.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconRtlOnly" }, String.fromCharCode(11106))));
}
function DefaultWrapperDrawerElementTitleWrapper(props) {
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerElementTitleWrapper" }, props.children);
}
function DefaultWrapperDrawerInfoPanelWrapper(props) {
  return props.children;
}
function DefaultWrapperDrawerTabs(props) {
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerTabs" }, props.options.map((v) => /* @__PURE__ */ import_react4.default.createElement(
    "button",
    {
      onClick: props.setSelectedOption.bind(null, v.id),
      key: v.id,
      className: props.selectedOption === v.id ? "slateEditorWrapperDrawerTabSelected" : "slateEditorWrapperDrawerTab"
    },
    v.label
  )));
}
function WrapperDrawer(props) {
  const [location2, setLocation] = (0, import_react4.useState)(localStorage.getItem("SLATE_DRAWER_LAST_LOCATION") || "MAIN");
  const [accessibilitySelectedOption, useAccessibilitySelectedOption] = (0, import_react4.useState)(null);
  (0, import_react4.useEffect)(() => {
    if (!props.drawerOpen) {
      useAccessibilitySelectedOption(null);
    }
  }, [props.drawerOpen]);
  const setLocationCallback = (0, import_react4.useCallback)((value) => {
    localStorage.setItem("SLATE_DRAWER_LAST_LOCATION", value);
    useAccessibilitySelectedOption(value);
    setLocation(value);
  }, []);
  let settingsForNode = null;
  let titleForNode = null;
  if (props.state.currentSelectedElement) {
    let infoPanel = null;
    const selectedNodeInfo = getInfoFor(
      props.state.currentSelectedElement,
      props.baseI18n
    );
    const potentialBlockParent = props.state.currentSelectedElement === props.state.currentSelectedInlineElement ? getInfoFor(
      props.state.currentSelectedBlockElement,
      props.baseI18n
    ) : null;
    const superBlockPaths = (props.state.currentSelectedSuperBlockElements || []).filter((e2) => e2 !== props.state.currentSelectedElement).map((v, index) => {
      return {
        info: getInfoFor(v, props.baseI18n),
        path: props.state.currentSelectedSuperBlockElementAnchors[index]
      };
    });
    const entirePath = superBlockPaths;
    if (potentialBlockParent) {
      entirePath.push({
        info: potentialBlockParent,
        path: props.state.currentSelectedBlockElementAnchor
      });
    }
    entirePath.push({
      info: selectedNodeInfo,
      path: props.state.currentSelectedElementAnchor
    });
    const WrapperDrawerElementTitle = props.WrapperDrawerElementTitle || DefaultWrapperDrawerElementTitle;
    titleForNode = entirePath.map((v, i2) => {
      return /* @__PURE__ */ import_react4.default.createElement(
        WrapperDrawerElementTitle,
        {
          entirePath,
          info: v.info,
          isCurrent: i2 === entirePath.length - 1,
          key: i2,
          index: i2,
          onSelect: i2 === entirePath.length - 1 ? null : props.helpers.selectPath.bind(null, v.path)
        }
      );
    });
    const WrapperDrawerInfoPanelWrapper = props.WrapperDrawerInfoPanelWrapper || DefaultWrapperDrawerInfoPanelWrapper;
    const WrapperDrawerTabs = props.WrapperDrawerTabs || DefaultWrapperDrawerTabs;
    settingsForNode = /* @__PURE__ */ import_react4.default.createElement(import_react4.default.Fragment, null, !selectedNodeInfo.isText ? /* @__PURE__ */ import_react4.default.createElement(
      WrapperDrawerTabs,
      {
        accessibilitySelectedOption,
        selectedOption: location2,
        setSelectedOption: setLocationCallback,
        setAccessibilitySelectedOption: useAccessibilitySelectedOption,
        options: [
          {
            id: "MAIN",
            label: props.baseI18n.settings
          },
          props.featureSupport.supportsCustomStyles || props.featureSupport.supportsRichClasses ? {
            id: "STYLES",
            label: props.baseI18n.styles
          } : null,
          props.featureSupport.supportsTemplating ? {
            id: "TEMPLATING",
            label: props.baseI18n.templating
          } : null,
          props.featureSupport.supportsTemplating ? {
            id: "ACTIONS",
            label: props.baseI18n.actions
          } : null
        ].filter((v) => !!v)
      }
    ) : null, /* @__PURE__ */ import_react4.default.createElement(
      WrapperDrawerInfoPanelWrapper,
      {
        accessibilitySelectedOption,
        selectedOption: location2,
        setSelectedOption: setLocationCallback,
        setAccessibilitySelectedOption: useAccessibilitySelectedOption
      },
      infoPanel
    ));
  }
  const WrapperForTitle = props.WrapperDrawerElementTitleWrapper || DefaultWrapperDrawerElementTitleWrapper;
  return /* @__PURE__ */ import_react4.default.createElement(import_react4.default.Fragment, null, /* @__PURE__ */ import_react4.default.createElement(WrapperForTitle, null, titleForNode), settingsForNode, props.drawerExtraChildren);
}

// ../editor/slate/dialogs/file.tsx
var import_react5 = __toESM(require_react());
var import_react_dom2 = __toESM(require_react_dom());
function DefaultDialog(props) {
  if (!props.open) {
    return null;
  }
  const dialog = /* @__PURE__ */ import_react5.default.createElement("div", { className: "slateEditorDialogBackdrop" }, /* @__PURE__ */ import_react5.default.createElement("div", { className: "slateEditorDialog" }, /* @__PURE__ */ import_react5.default.createElement("div", { className: "slateEditorDialogTitle" }, props.title), /* @__PURE__ */ import_react5.default.createElement("div", { className: "slateEditorDialogContent" }, props.children), /* @__PURE__ */ import_react5.default.createElement("div", { className: "slateEditorButtons" }, props.buttons.map((v) => /* @__PURE__ */ import_react5.default.createElement("button", { key: v.action, onClick: v.onClick }, v.label)))));
  return import_react_dom2.default.createPortal(dialog, document.body);
}
var FileLoadErrorDialog = class extends import_react5.default.PureComponent {
  constructor(props) {
    super(props);
    this.onClose = this.onClose.bind(this);
  }
  onClose() {
    this.props.dismissCurrentLoadError();
  }
  /**
   * The render function
   */
  render() {
    const Dialog = this.props.Dialog || DefaultDialog;
    return /* @__PURE__ */ import_react5.default.createElement(
      Dialog,
      {
        open: !!this.props.currentLoadError,
        onClose: this.onClose,
        title: this.props.i18nGenericError,
        buttons: [
          {
            label: this.props.i18nOk,
            onClick: this.props.dismissCurrentLoadError,
            action: "primary"
          }
        ]
      },
      this.props.currentLoadError
    );
  }
};

// ../editor/slate/wrapper.tsx
var import_react_dom3 = __toESM(require_react_dom());
var defaultWrapperI18nRichInfoEnglish = __spreadProps(__spreadValues({}, defaultBaseI18nRichInfoEnglish), {
  formatAddContainerLabel: "add container",
  addTemplateHTML: {
    label: "select a template",
    placeholder: "select a template",
    submit: "ok",
    title: "add template html"
  },
  addTemplateText: {
    label: "select a template",
    placeholder: "select a template",
    submit: "ok",
    title: "add template text"
  },
  formatAddCustomLabel: "add custom",
  formatAddFileLabel: "add file",
  formatAddImageLabel: "add image",
  formatAddTableLabel: "add table",
  formatAddTbodyLabel: "add table body",
  formatAddTdLabel: "add table column",
  formatAddTemplateHTML: "add template html",
  formatAddTemplateText: "add template text",
  formatAddTfootLabel: "add table foot",
  formatAddTheadLabel: "add table head",
  formatAddThLabel: "add table header column",
  formatAddTrLabel: "add table row",
  formatAddVideoLabel: "add table video",
  formatBoldLabel: "bold",
  formatDeleteElement: "delete",
  formatDelTdLabel: "delete table column",
  formatDelThLabel: "delete table header column",
  formatDelTrLabel: "delete table row",
  formatItalicLabel: "italic",
  formatLinkLabel: "link",
  formatListBulletedLabel: "bulleted list",
  formatListNumberedLabel: "numbered list",
  formatMakeLoop: "make loop",
  formatMore: "more",
  formatQuoteLabel: "quote",
  formatSetActiveStyleLabel: "active style",
  formatSetClassLabel: "class names",
  formatSetContext: "set context",
  formatSetEventHandlers: "set event handlers",
  formatSetHoverStyleLabel: "hover style",
  formatSetRenderCondition: "set render condition",
  formatSetStyleLabel: "set style",
  formatSetUIHandlerArgLabel: "set ui handler arg",
  formatSetUIHandlerArgName: "set ui handler arg name",
  formatSetUIHandlerArgValue: "set ui handler arg value",
  formatSetUIHandlerLabel: "set ui handler",
  formatTitleLabel: "title",
  formatUnderlineLabel: "underline",
  loadVideo: {
    invalid: "invalid url",
    label: "youtube and vimeo only",
    placeholder: "https://youtube.com/...",
    submit: "insert",
    title: "insert a video"
  },
  setLink: {
    invalid: "invalid link",
    label: "url",
    placeholder: "https://url",
    placeholderLocalOnly: "./local-url-only",
    submit: "ok",
    templated: "or select one of these template values",
    templatedLabel: "template value",
    templatedPlaceholder: "template value",
    templatedUnspecified: "unspecified",
    title: "insert a link,"
  },
  genericError: "error",
  ok: "ok"
});
function callFn(focusFn, actionFn, ...args) {
  focusFn();
  actionFn(...args);
}
function DefaultEditorContainer(props) {
  return /* @__PURE__ */ import_react6.default.createElement("div", { className: "slateEditorDefaultEditorContainer" }, props.children);
}
var DefaultToolbar = import_react6.default.forwardRef((props, ref) => {
  return /* @__PURE__ */ import_react6.default.createElement("div", __spreadProps(__spreadValues({ className: "slateEditorToolbar" }, props.props), { ref }), /* @__PURE__ */ import_react6.default.createElement("div", { className: "slateEditorToolbarInternal" }, props.toolbarContents, props.customChildren, /* @__PURE__ */ import_react6.default.createElement("div", { className: "slateEditorToolbarInternalSpacer" }), props.drawerButton));
});
function DefaultToolbarButtonComponent(props) {
  return /* @__PURE__ */ import_react6.default.createElement(
    "button",
    {
      className: "slateEditorToolbarButton " + (props.selected ? " selected" : ""),
      title: props.title,
      disabled: props.disabled,
      onClick: props.onClick,
      dangerouslySetInnerHTML: { __html: props.htmlEntity + (typeof props.count === "number" ? " (" + props.count + ")" : "") }
    }
  );
}
function Bold(props) {
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  const disabled = !props.state.currentSelectedText || !props.state.allowsText;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatBoldLabel,
      disabled,
      selected: props.state.currentSelectedText && props.state.currentSelectedText.bold,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.formatToggle, "bold"),
      htmlEntity: "\u{1D401}",
      type: "bold",
      disjointedMode: props.disjointedMode
    }
  );
}
function Italic(props) {
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  const disabled = !props.state.currentSelectedText || !props.state.allowsText;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatItalicLabel,
      disabled,
      selected: props.state.currentSelectedText && props.state.currentSelectedText.italic,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.formatToggle, "italic"),
      htmlEntity: "\u{1D470}",
      type: "italic",
      disjointedMode: props.disjointedMode
    }
  );
}
function Underline(props) {
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  const disabled = !props.state.currentSelectedText || !props.state.allowsText;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatUnderlineLabel,
      disabled,
      selected: props.state.currentSelectedText && props.state.currentSelectedText.underline,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.formatToggle, "underline"),
      htmlEntity: "\u1E48",
      type: "underline",
      disjointedMode: props.disjointedMode
    }
  );
}
function VDivider(props) {
  if (props.ToolbarVDivider) {
    const RealDivider = props.ToolbarVDivider;
    return /* @__PURE__ */ import_react6.default.createElement(RealDivider, null);
  }
  return /* @__PURE__ */ import_react6.default.createElement("div", { className: "slateEditorVdivider" });
}
function HDivider(props) {
  if (props.ToolbarHDivider) {
    const RealDivider = props.ToolbarHDivider;
    return /* @__PURE__ */ import_react6.default.createElement(RealDivider, null);
  }
  return /* @__PURE__ */ import_react6.default.createElement(import_react6.default.Fragment, null, /* @__PURE__ */ import_react6.default.createElement("div", { className: "slateEditorHdividerspacer" }), /* @__PURE__ */ import_react6.default.createElement("div", { className: "slateEditorHdivider" }));
}
function Link(props) {
  if (!props.featureSupport.supportsLinks || !props.isReady) {
    return null;
  }
  let templateLinkAmount = 0;
  if (props.featureSupport.supportsTemplating && props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentSelectedBlockContext.properties).forEach((key) => {
      const property = props.state.currentSelectedBlockContext.properties[key];
      if (property.type === "link") {
        templateLinkAmount++;
      }
    });
  }
  if (props.featureSupport.supportsTemplating && props.state.currentRootContext && props.state.currentRootContext !== props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentRootContext.properties).forEach((key) => {
      const property = props.state.currentRootContext.properties[key];
      if (property.nonRootInheritable) {
        return;
      }
      if (property.type === "link") {
        templateLinkAmount++;
      }
    });
  }
  const disabled = !props.state.allowsInsertElement({ type: "link", href: "", children: [], thref: null });
  const selected = props.helpers.editor.selection && props.helpers.Range.isCollapsed(props.helpers.editor.selection) && props.state.currentSelectedInlineElement && props.state.currentSelectedInlineElement.type === "link";
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatLinkLabel,
      selected,
      disabled,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.toggleLink, null, null),
      count: templateLinkAmount === 0 ? null : templateLinkAmount,
      htmlEntity: "\u{1F517}",
      type: "link",
      disjointedMode: props.disjointedMode
    }
  );
}
function Title(props) {
  if (!props.featureSupport.supportsTitle) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "title", titleType: "h1", children: [] }, { collapsed: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatTitleLabel,
      disabled,
      selected: props.state.currentSelectedBlockElement && props.state.currentSelectedBlockElement.type === "title",
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.toggleTitle, "h1"),
      htmlEntity: "\u{1D413}",
      type: "title",
      disjointedMode: props.disjointedMode
    }
  );
}
function Quote(props) {
  if (!props.featureSupport.supportsQuote) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "quote", children: [] }, { collapsed: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatQuoteLabel,
      disabled,
      selected: props.state.currentSelectedBlockElement && props.state.currentSelectedBlockElement.type === "quote",
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.toggleQuote),
      htmlEntity: '"',
      type: "quote",
      disjointedMode: props.disjointedMode
    }
  );
}
function NumberedList(props) {
  if (!props.featureSupport.supportsLists) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "list", listType: "numbered", children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatListNumberedLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertList, "numbered"),
      htmlEntity: "123",
      type: "numbered-list",
      disjointedMode: props.disjointedMode
    }
  );
}
function BulletedList(props) {
  if (!props.featureSupport.supportsLists) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "list", listType: "bulleted", children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatListBulletedLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertList, "bulleted"),
      htmlEntity: "...",
      type: "bulleted-list",
      disjointedMode: props.disjointedMode
    }
  );
}
var imgExample = {
  type: "image",
  children: [STANDARD_TEXT_NODE()],
  width: 0,
  height: 0,
  alt: "",
  src: "",
  srcSet: "",
  srcId: "",
  standalone: false,
  sizes: ""
};
function Image(props) {
  if (!props.featureSupport.supportsImages) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement(imgExample, { selected: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddImageLabel,
      disabled,
      selected: false,
      onClick: props.requestImage,
      htmlEntity: "\u{1F4F7}",
      type: "image",
      disjointedMode: props.disjointedMode
    }
  );
}
var videoExample = {
  type: "video",
  origin: "youtube",
  src: "",
  children: [STANDARD_TEXT_NODE()]
};
function Video(props) {
  if (!props.featureSupport.supportsVideos) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement(videoExample, { selected: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddVideoLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertVideo, null),
      htmlEntity: "\u{1F3A5}",
      type: "video",
      disjointedMode: props.disjointedMode
    }
  );
}
var fileExample = {
  type: "file",
  children: [STANDARD_TEXT_NODE()],
  extension: "",
  fileName: "",
  size: "",
  src: "",
  srcId: ""
};
function File(props) {
  if (!props.featureSupport.supportsFiles) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement(fileExample, { selected: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddFileLabel,
      disabled,
      selected: false,
      onClick: props.requestFile,
      htmlEntity: "\u{1F5B9}",
      type: "file",
      disjointedMode: props.disjointedMode
    }
  );
}
function Container(props) {
  if (!props.featureSupport.supportsContainers) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "container", containerType: null, children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddContainerLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertContainer, null),
      htmlEntity: "\u26F6",
      type: "container",
      disjointedMode: props.disjointedMode
    }
  );
}
function Table(props) {
  if (!props.featureSupport.supportsTables) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "table", tableType: null, children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddTableLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertTable, null),
      htmlEntity: "\u1699",
      type: "table",
      disjointedMode: props.disjointedMode
    }
  );
}
function TemplateText(props) {
  if (!props.isReady || !props.featureSupport.supportsTemplating) {
    return null;
  }
  let templateTextAmount = 0;
  if (props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentSelectedBlockContext.properties).forEach((key) => {
      const property = props.state.currentSelectedBlockContext.properties[key];
      if (property.type === "text") {
        templateTextAmount++;
      }
    });
  }
  if (props.featureSupport.supportsTemplating && props.state.currentRootContext && props.state.currentRootContext !== props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentRootContext.properties).forEach((key) => {
      const property = props.state.currentRootContext.properties[key];
      if (property.nonRootInheritable) {
        return;
      }
      if (property.type === "text") {
        templateTextAmount++;
      }
    });
  }
  if (templateTextAmount === 0) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "inline", children: [], textContent: "text" });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddTemplateText,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertTemplateText, null, null),
      htmlEntity: "text",
      type: "table",
      disjointedMode: props.disjointedMode,
      count: templateTextAmount
    }
  );
}
function TemplateHTML(props) {
  if (!props.isReady || !props.featureSupport.supportsTemplating) {
    return null;
  }
  let templateHTMLAmount = 0;
  const currentSelectedSuperBlockElement = props.state.currentSelectedSuperBlockElements && props.state.currentSelectedSuperBlockElements[props.state.currentSelectedSuperBlockElements.length - 1];
  if (currentSelectedSuperBlockElement && props.state.currentSelectedTopmostSuperBlockContext) {
    Object.keys(props.state.currentSelectedTopmostSuperBlockContext.properties).forEach((key) => {
      const property = props.state.currentSelectedTopmostSuperBlockContext.properties[key];
      if (property.type === "html") {
        templateHTMLAmount++;
      }
    });
  }
  if (props.featureSupport.supportsTemplating && props.state.currentRootContext && props.state.currentRootContext !== props.state.currentSelectedTopmostSuperBlockContext) {
    Object.keys(props.state.currentRootContext.properties).forEach((key) => {
      const property = props.state.currentRootContext.properties[key];
      if (property.nonRootInheritable) {
        return;
      }
      if (property.type === "html") {
        templateHTMLAmount++;
      }
    });
  }
  if (templateHTMLAmount === 0) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "void-block", children: [], html: "html" });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react6.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddTemplateHTML,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertTemplateHTML, null, null),
      htmlEntity: "html",
      type: "table",
      disjointedMode: props.disjointedMode,
      count: templateHTMLAmount
    }
  );
}
function ToolbarExtra(props) {
  const elementReference = typeof props.extra.element === "function" ? props.extra.element() : props.extra.element;
  const defaultAction = (0, import_react6.useCallback)(() => {
    const element = typeof props.extra.element === "function" ? props.extra.element() : props.extra.element;
    props.helpers.insertElement(element);
    return element;
  }, [props.extra.element, props.helpers.insertElement]);
  (0, import_react6.useEffect)(() => {
    if (props.extra.onAnyKeyDown) {
      document.body.addEventListener("keydown", props.extra.onAnyKeyDown);
      return () => {
        document.body.removeEventListener("keydown", props.extra.onAnyKeyDown);
      };
    }
    return;
  }, [props.extra.onAnyKeyDown]);
  const onClick = (0, import_react6.useCallback)((e2) => {
    if (props.extra.refocusHandler) {
      props.extra.refocusHandler(props.helpers.focus, e2);
    } else {
      props.helpers.focus();
    }
    props.extra.onClick ? props.extra.onClick(defaultAction, e2) : defaultAction();
  }, []);
  let disabled = false;
  if (elementReference) {
    disabled = !props.state.allowsInsertElement(elementReference);
  }
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  if (typeof props.extra.title === "string" || !props.extra.title) {
    return /* @__PURE__ */ import_react6.default.createElement(
      ToolbarButton,
      __spreadValues({
        title: props.extra.title,
        disabled,
        selected: props.extra.selected,
        count: props.extra.count,
        disjointedMode: props.disjointedMode,
        htmlEntity: "?",
        type: "extra",
        extraId: props.extra.id,
        onClick
      }, props.extra.toolbarButtonProps)
    );
  } else {
    const element = props.extra.title;
    return import_react6.default.cloneElement(element, {
      children: (i18nTitle) => /* @__PURE__ */ import_react6.default.createElement(
        ToolbarButton,
        __spreadValues({
          title: i18nTitle,
          disabled,
          selected: props.extra.selected,
          count: props.extra.count,
          disjointedMode: props.disjointedMode,
          htmlEntity: "?",
          type: "extra",
          extraId: props.extra.id,
          onClick
        }, props.extra.toolbarButtonProps)
      )
    });
  }
}
function ToolbarExtras(props) {
  if (props.toolbarExtras && props.toolbarExtras.length) {
    const toolbarExtras = props.toolbarExtras.map((x, index) => {
      return /* @__PURE__ */ import_react6.default.createElement(ToolbarExtra, __spreadProps(__spreadValues({}, props), { extra: x, key: index }));
    });
    const customs = props.toolbarExtras.map((x, i2) => x.customChildren ? /* @__PURE__ */ import_react6.default.createElement(import_react6.default.Fragment, { key: i2 }, x.customChildren) : null);
    return /* @__PURE__ */ import_react6.default.createElement(import_react6.default.Fragment, null, toolbarExtras, customs);
  }
  return null;
}
function None() {
  return null;
}
var toolbarRegistry = {
  none: None,
  italic: Italic,
  bold: Bold,
  underline: Underline,
  "bulleted-list": BulletedList,
  "numbered-list": NumberedList,
  "template-html": TemplateHTML,
  "template-text": TemplateText,
  title: Title,
  container: Container,
  divider: VDivider,
  hdivider: HDivider,
  extras: ToolbarExtras,
  file: File,
  image: Image,
  link: Link,
  quote: Quote,
  video: Video,
  table: Table
};
function DefaultToolbarDrawerToggleButton(props) {
  return /* @__PURE__ */ import_react6.default.createElement(
    "button",
    {
      onClick: props.toggleDrawer,
      className: "slateEditorToolbarButton",
      dangerouslySetInnerHTML: { __html: props.drawerOpen ? "&#11014;" : "&#11015;" }
    }
  );
}
var RichTextEditorToolbar = class extends import_react6.default.Component {
  constructor(props) {
    super(props);
    this.state = {
      isReady: false
    };
  }
  componentDidMount() {
    this.setState({
      isReady: true
    });
    this.props.onHeightChange(this.getHeight());
  }
  componentDidUpdate() {
    this.props.onHeightChange(this.getHeight());
  }
  getHeight() {
    var _a, _b;
    return (_b = (_a = this.appBarHeaderRef) == null ? void 0 : _a.current) == null ? void 0 : _b.offsetHeight;
  }
  getAppbarHeader() {
    var _a;
    return (_a = this.appBarHeaderRef) == null ? void 0 : _a.current;
  }
  render() {
    if (!this.props.state.isRichText) {
      return null;
    }
    if (this.props.disjointedMode && !this.props.disjointedModeKeepToolbar && !this.props.state.currentSelectedElement) {
      return null;
    }
    const toolbarForm = (this.props.customToolbar || [
      "bold",
      "italic",
      "underline",
      this.props.featureSupport.supportsTitle || this.props.featureSupport.supportsQuote || this.props.featureSupport.supportsLinks || this.props.featureSupport.supportsLists ? "divider" : "none",
      this.props.featureSupport.supportsLinks ? "link" : "none",
      this.props.featureSupport.supportsTitle ? "title" : "none",
      this.props.featureSupport.supportsQuote ? "quote" : "none",
      this.props.featureSupport.supportsLists ? "bulleted-list" : "none",
      this.props.featureSupport.supportsLists ? "numbered-list" : "none",
      this.props.featureSupport.supportsTables ? "table" : "none",
      this.props.featureSupport.supportsImages || this.props.featureSupport.supportsFiles || this.props.featureSupport.supportsVideos ? "divider" : "none",
      this.props.featureSupport.supportsImages ? "image" : "none",
      this.props.featureSupport.supportsFiles ? "file" : "none",
      this.props.featureSupport.supportsVideos ? "video" : "none",
      "divider",
      this.props.featureSupport.supportsContainers ? "container" : "none",
      "template-text",
      "template-html",
      this.props.toolbarExtras && this.props.toolbarExtras.length ? "extras" : "none"
    ]).map((v) => {
      if (typeof v === "function") {
        return v(this.props);
      }
      return v;
    });
    const DrawerToggleComponent = this.props.ToolbarDrawerButton || DefaultToolbarDrawerToggleButton;
    let drawerButton = this.props.shouldHaveDrawer() ? /* @__PURE__ */ import_react6.default.createElement(
      DrawerToggleComponent,
      {
        drawerOpen: this.props.drawerOpen,
        toggleDrawer: this.props.toggleDrawer,
        disjointedMode: this.props.disjointedMode
      }
    ) : null;
    const customChildren = [];
    const toolbarFormMapped = toolbarForm.map((ele, index) => {
      if (typeof ele === "string") {
        const Element4 = toolbarRegistry[ele];
        return /* @__PURE__ */ import_react6.default.createElement(
          Element4,
          __spreadProps(__spreadValues({}, this.props), {
            isReady: this.state.isReady,
            key: index
          })
        );
      } else {
        const extraValue = typeof ele === "function" ? ele(this.props) : ele;
        if (extraValue.customChildren) {
          customChildren.push(
            /* @__PURE__ */ import_react6.default.createElement(import_react6.default.Fragment, { key: index }, extraValue.customChildren)
          );
        }
        return /* @__PURE__ */ import_react6.default.createElement(
          ToolbarExtra,
          __spreadProps(__spreadValues({}, this.props), {
            isReady: this.state.isReady,
            key: index,
            extra: extraValue
          })
        );
      }
    });
    const Toolbar = this.props.Toolbar || DefaultToolbar;
    const toReturn = /* @__PURE__ */ import_react6.default.createElement(
      Toolbar,
      {
        customChildren,
        disjointedMode: this.props.disjointedMode,
        drawerButton,
        drawerOpen: this.props.drawerOpen,
        props: {
          ["data-unblur"]: true
        },
        toolbarContents: toolbarFormMapped,
        ref: this.appBarHeaderRef
      }
    );
    if (this.props.disjointedMode && this.state.isReady) {
      return import_react_dom3.default.createPortal(toReturn, document.body);
    } else if (this.props.disjointedMode) {
      return null;
    } else {
      return toReturn;
    }
  }
};
var DefaultSlateWrapper = class extends import_react6.default.PureComponent {
  /**
   * Constructs a new material ui based wrapper for the slate editor
   * @param props the base properties that every wrapper gets extended for this specific wrapper
   */
  constructor(props) {
    super(props);
    this.state = {
      inlineElementThatWasCurrentBeforeLosingFocus: null,
      // keep SSR compatibility by keeping the drawer closed at the start
      // as we cannot read local storage in the server side
      drawerOpen: false,
      toolbarHeight: 0,
      noAnimate: true,
      toolbarState: null
    };
    this.isUnmounted = false;
    this.inputImageRef = import_react6.default.createRef();
    this.inputFileRef = import_react6.default.createRef();
    this.DrawerContainerRef = import_react6.default.createRef();
    this.toolbarRef = import_react6.default.createRef();
    this.editorRef = import_react6.default.createRef();
    this.onHeightChange = this.onHeightChange.bind(this);
    this.onImageLoad = this.onImageLoad.bind(this);
    this.onFileLoad = this.onFileLoad.bind(this);
    this.requestImage = this.requestImage.bind(this);
    this.requestFile = this.requestFile.bind(this);
    this.onFileEventedReFocus = this.onFileEventedReFocus.bind(this);
    this.refocus = this.refocus.bind(this);
    this.shouldHaveDrawer = this.shouldHaveDrawer.bind(this);
    this.toggleDrawer = this.toggleDrawer.bind(this);
    this.setToolbarState = this.setToolbarState.bind(this);
    this.selectiveHardBlur = this.selectiveHardBlur.bind(this);
    this.keyUpListener = this.keyUpListener.bind(this);
    this.onAltActionTriggered = this.onAltActionTriggered.bind(this);
  }
  onAltActionTriggered(tabNav, action) {
    if (action === "blur") {
      this.props.helpers.hardBlur();
    }
  }
  onHeightChange(newHeight) {
    if (this.state.toolbarHeight !== newHeight) {
      this.setState({
        toolbarHeight: newHeight
      });
    }
  }
  /**
   * During the mount event
   */
  componentDidMount() {
    if (this.shouldHaveDrawer()) {
      this.setState({
        drawerOpen: localStorage.getItem("SLATE_DRAWER_OPEN") === "true",
        noAnimate: true
      }, () => {
        setTimeout(() => {
          !this.isUnmounted && this.setState({
            noAnimate: false
          });
        }, 300);
      });
    } else {
      this.setState({
        noAnimate: false
      });
    }
    document.body.addEventListener("mousedown", this.selectiveHardBlur);
    document.body.addEventListener("touchstart", this.selectiveHardBlur);
    document.body.addEventListener("keyup", this.keyUpListener);
  }
  componentWillUnmount() {
    document.body.removeEventListener("mousedown", this.selectiveHardBlur);
    document.body.removeEventListener("touchstart", this.selectiveHardBlur);
    document.body.removeEventListener("keyup", this.keyUpListener);
    this.isUnmounted = true;
  }
  keyUpListener(e2) {
    if (e2.key === "Tab") {
      this.selectiveHardBlur(e2);
    }
  }
  selectiveHardBlur(e2, altTarget) {
    const target = altTarget || e2.target;
    if (this.props.state.currentSelectedText) {
      if (this.isUnblurred(target)) {
        if (target.tagName !== "INPUT") {
          e2.preventDefault();
        }
      } else if (!this.isInEditor(target)) {
        this.props.helpers.hardBlur();
      }
    }
  }
  isUnblurred(ele) {
    if (ele === this.toolbarRef.current.getAppbarHeader() || ele === this.DrawerContainerRef.current.getDrawerBody() || ele.dataset.unblur) {
      return true;
    }
    if (ele.parentElement) {
      return this.isUnblurred(ele.parentElement);
    }
    return false;
  }
  isInEditor(ele) {
    if (ele.dataset.notEditor) {
      return false;
    }
    if (ele === this.editorRef.current) {
      return true;
    }
    if (ele.parentElement) {
      return this.isInEditor(ele.parentElement);
    }
    return false;
  }
  /**
   * Specifies on whether it should have a drawer
   * @returns a boolean on this fact
   */
  shouldHaveDrawer() {
    if (!this.props.featureSupport || this.props.hideDrawer) {
      return false;
    }
    return !!(this.props.featureSupport.supportsTemplating || this.props.featureSupport.supportsCustomStyles || this.props.featureSupport.supportsContainers || this.props.featureSupport.supportedCustoms || this.props.featureSupport.supportsRichClasses || this.props.drawerExtras);
  }
  /**
   * Executes in order to open the dialog in order to request an image
   * via this file upload dialog
   */
  requestImage() {
    document.body.addEventListener("focus", this.onFileEventedReFocus, { capture: true });
    this.originalSelectionArea = this.props.state.currentText ? this.props.helpers.editor.selection : null;
    this.originalSelectionPath = this.props.state.currentSelectedInlineElementAnchor || this.props.state.currentSelectedBlockElementAnchor || this.props.state.currentSelectedSuperBlockElementAnchors && this.props.state.currentSelectedSuperBlockElementAnchors[this.props.state.currentSelectedSuperBlockElementAnchors.length - 1];
    this.inputImageRef.current.click();
  }
  /**
   * Executes in order to open the dialog in order to request an file
   * via this file upload dialog
   */
  requestFile() {
    document.body.addEventListener("focus", this.onFileEventedReFocus, { capture: true });
    this.originalSelectionArea = this.props.state.currentText ? this.props.helpers.editor.selection : null;
    this.originalSelectionPath = this.props.state.currentSelectedInlineElementAnchor || this.props.state.currentSelectedBlockElementAnchor || this.props.state.currentSelectedSuperBlockElementAnchors && this.props.state.currentSelectedSuperBlockElementAnchors[this.props.state.currentSelectedSuperBlockElementAnchors.length - 1];
    this.inputFileRef.current.click();
  }
  /**
   * Opens/closes the drawer
   */
  toggleDrawer() {
    const newState = !this.state.drawerOpen;
    this.setState({
      drawerOpen: newState
    });
    if (!this.props.disjointedMode) {
      window.dispatchEvent(new Event("SLATE_DRAWER_OPEN"));
    }
    localStorage.setItem("SLATE_DRAWER_OPEN", JSON.stringify(newState));
  }
  /**
   * Refocuses as the original selection area that was focused
   * mainly used by dialogs once they haave closed
   */
  refocus() {
    if (this.isUnmounted) {
      return;
    }
    if (this.originalSelectionArea) {
      this.props.helpers.focusAt(this.originalSelectionArea);
    } else if (this.originalSelectionPath) {
      this.props.helpers.selectPath(this.originalSelectionPath);
    }
  }
  /**
   * Triggers once the document has recovered focus from the file
   * dialog that is native for the file upload
   */
  onFileEventedReFocus() {
    document.body.removeEventListener("focus", this.onFileEventedReFocus, { capture: true });
    this.refocusTimeout = setTimeout(this.refocus, 30);
  }
  setToolbarState(state) {
    if (this.state.toolbarState !== state) {
      this.setState({ toolbarState: state });
    }
  }
  /**
   * This function gets called once the image input calls the on change event
   * which means it has been loaded by the input itself and it's available for
   * reading
   * @param e the change event that contains the file 
   */
  async onImageLoad(e2) {
    document.body.removeEventListener("focus", this.onFileEventedReFocus, { capture: true });
    clearTimeout(this.refocusTimeout);
    const file = e2.target.files[0];
    e2.target.value = "";
    await this.props.helpers.focusAt(this.originalSelectionArea || this.originalSelectionPath);
    this.props.helpers.insertImage(file, false);
  }
  /**
   * This function gets called once the file input calls the on change event
   * which means it has been loaded by the input itself and it's available for
   * reading
   * @param e the change event that contains the file
   */
  async onFileLoad(e2) {
    document.body.removeEventListener("focus", this.onFileEventedReFocus, { capture: true });
    clearTimeout(this.refocusTimeout);
    const file = e2.target.files[0];
    e2.target.value = "";
    await this.props.helpers.focusAt(this.originalSelectionArea || this.originalSelectionPath);
    this.props.helpers.insertFile(file);
  }
  /**
   * Standard render function from the wrapper
   */
  render() {
    const imageInput = this.props.state.isRichText && this.props.featureSupport.supportsImages ? /* @__PURE__ */ import_react6.default.createElement(
      "input",
      {
        ref: this.inputImageRef,
        type: "file",
        accept: this.props.featureSupport.supportsImagesAccept,
        style: { display: "none" },
        autoComplete: "off",
        onChange: this.onImageLoad
      }
    ) : null;
    const fileInput = this.props.state.isRichText && this.props.featureSupport.supportsFiles ? /* @__PURE__ */ import_react6.default.createElement(
      "input",
      {
        ref: this.inputFileRef,
        type: "file",
        accept: this.props.featureSupport.supportsFilesAccept,
        style: { display: "none" },
        autoComplete: "off",
        onChange: this.onFileLoad
      }
    ) : null;
    const fileLoadErrorDialog = this.props.state.isRichText && (this.props.featureSupport.supportsImages || this.props.featureSupport.supportsFiles) ? /* @__PURE__ */ import_react6.default.createElement(
      FileLoadErrorDialog,
      {
        currentLoadError: this.props.currentLoadError,
        dismissCurrentLoadError: this.props.dismissCurrentLoadError,
        i18nGenericError: this.props.baseI18n.genericError,
        i18nOk: this.props.baseI18n.ok,
        Dialog: this.props.Dialog
      }
    ) : null;
    let toolbar = /* @__PURE__ */ import_react6.default.createElement(
      RichTextEditorToolbar,
      __spreadProps(__spreadValues({}, this.props), {
        toolbarState: this.state.toolbarState,
        toolbarHeight: this.state.toolbarHeight,
        ref: this.toolbarRef,
        onHeightChange: this.onHeightChange,
        requestImage: this.requestImage,
        requestFile: this.requestFile,
        shouldHaveDrawer: this.shouldHaveDrawer,
        drawerOpen: this.state.drawerOpen,
        toggleDrawer: this.toggleDrawer,
        setToolbarState: this.setToolbarState
      })
    );
    let extraChildren = null;
    if (this.props.customExtraChildren) {
      const [characterCount, wordCount] = countSizeAndWords(this.props.state.treeValue);
      extraChildren = this.props.customExtraChildren(characterCount, wordCount);
    }
    let drawerContainer = /* @__PURE__ */ import_react6.default.createElement(
      DrawerContainer,
      __spreadProps(__spreadValues({}, this.props), {
        ref: this.DrawerContainerRef,
        drawerOpen: this.state.drawerOpen,
        noAnimate: this.state.noAnimate,
        toolbarHeight: this.state.toolbarHeight
      })
    );
    const DisjointedEditorContainer = this.props.DisjointedEditorContainer || "div";
    const EditorContainer = this.props.EditorContainer || DefaultEditorContainer;
    const DisjointedEditor = this.props.DisjointedEditor || "div";
    const Editor2 = this.props.Editor || "div";
    const basicClassName = "rich-text editor " + (this.props.state.isRichText ? "rich-text-mode" : "plain-text-mode") + (this.props.state.focused ? " focused" : "") + (this.props.state.currentValid ? " valid" : " invalid") + (this.props.disabled ? " disabled" : " enabled");
    let box = null;
    if (this.props.disjointedMode) {
      box = /* @__PURE__ */ import_react6.default.createElement(DisjointedEditorContainer, { ref: this.editorRef, className: "slateEditorDisjointedEditorContainer" }, /* @__PURE__ */ import_react6.default.createElement(DisjointedEditor, { className: basicClassName }, this.props.children), /* @__PURE__ */ import_react6.default.createElement("div", { "data-not-editor": true, style: { width: "100%" } }, extraChildren));
    } else {
      box = /* @__PURE__ */ import_react6.default.createElement(import_react6.default.Fragment, null, /* @__PURE__ */ import_react6.default.createElement(
        Editor2,
        {
          ref: this.editorRef,
          className: basicClassName
        },
        this.props.children
      ), extraChildren);
    }
    if (this.props.BaseWrapper) {
      const BaseWrapper = this.props.BaseWrapper;
      box = /* @__PURE__ */ import_react6.default.createElement(
        BaseWrapper,
        __spreadProps(__spreadValues({}, this.props), {
          drawerOpen: this.state.drawerOpen
        }),
        box
      );
    }
    if (this.props.ToolbarWrapper) {
      const ToolbarWrapper = this.props.ToolbarWrapper;
      toolbar = /* @__PURE__ */ import_react6.default.createElement(ToolbarWrapper, __spreadProps(__spreadValues({}, this.props), { drawerOpen: this.state.drawerOpen }), toolbar);
    }
    if (this.props.DrawerWrapper) {
      const DrawerWrapper = this.props.DrawerWrapper;
      drawerContainer = /* @__PURE__ */ import_react6.default.createElement(DrawerWrapper, __spreadProps(__spreadValues({}, this.props), { drawerOpen: this.state.drawerOpen }), drawerContainer);
    }
    let toReturn;
    if (this.props.disjointedMode) {
      toReturn = /* @__PURE__ */ import_react6.default.createElement(import_react6.default.Fragment, null, toolbar, box, drawerContainer, imageInput, fileInput);
    } else {
      toReturn = /* @__PURE__ */ import_react6.default.createElement(import_react6.default.Fragment, null, toolbar, /* @__PURE__ */ import_react6.default.createElement(EditorContainer, null, box, drawerContainer), imageInput, fileInput);
    }
    if (this.props.FinalWrapper) {
      const FinalWrapper = this.props.FinalWrapper;
      toReturn = /* @__PURE__ */ import_react6.default.createElement(FinalWrapper, __spreadProps(__spreadValues({}, this.props), { drawerOpen: this.state.drawerOpen }), toReturn);
    }
    return toReturn;
  }
};
var DefaultDrawerBody = import_react6.default.forwardRef((props, ref) => {
  return /* @__PURE__ */ import_react6.default.createElement("div", { ref, className: "slateEditorDrawerBody" }, props.drawerOpen ? props.children : null);
});
function DefaultDrawerSpacer(props) {
  return /* @__PURE__ */ import_react6.default.createElement(
    "div",
    {
      className: "slateEditorDrawerAppbarSpacer",
      style: { height: props.toolbarHeight, flex: "0 0 " + props.toolbarHeight + "px" }
    }
  );
}
function DefaultDrawerContainerBox(props) {
  return /* @__PURE__ */ import_react6.default.createElement(
    "div",
    {
      className: (props.drawerOpen ? "open " : "") + (props.disjointedMode ? "slateEditorDrawerFixed" : "slateEditorDrawer") + (props.noAnimate ? " slateEditorDrawerNoAnimate" : "")
    },
    props.children
  );
}
var DrawerContainer = class extends import_react6.default.Component {
  constructor(props) {
    super(props);
    this.state = {
      isReady: false
    };
    this.editorDrawerBodyRef = import_react6.default.createRef();
  }
  componentDidMount() {
    this.setState({
      isReady: true
    });
  }
  getDrawerBody() {
    return this.editorDrawerBodyRef.current;
  }
  render() {
    if (this.props.disjointedMode && !this.props.state.currentSelectedElement) {
      return null;
    }
    const DrawerContainerBox = this.props.DrawerContainerBox || DefaultDrawerContainerBox;
    const DrawerSpacer = this.props.DrawerSpacer || DefaultDrawerSpacer;
    const DrawerBody = this.props.DrawerBody || DefaultDrawerBody;
    const toReturn = /* @__PURE__ */ import_react6.default.createElement(
      DrawerContainerBox,
      {
        disjointedMode: this.props.disjointedMode,
        drawerOpen: this.props.drawerOpen,
        noAnimate: this.props.noAnimate,
        toolbarHeight: this.props.toolbarHeight
      },
      this.props.disjointedMode && this.props.drawerOpen ? /* @__PURE__ */ import_react6.default.createElement(
        DrawerSpacer,
        {
          disjointedMode: this.props.disjointedMode,
          toolbarHeight: this.props.toolbarHeight
        }
      ) : null,
      /* @__PURE__ */ import_react6.default.createElement(
        DrawerBody,
        {
          ref: this.editorDrawerBodyRef,
          disjointedMode: this.props.disjointedMode,
          toolbarHeight: this.props.toolbarHeight,
          drawerOpen: this.props.drawerOpen
        },
        /* @__PURE__ */ import_react6.default.createElement(WrapperDrawer, __spreadValues({}, this.props))
      )
    );
    if (this.props.disjointedMode) {
      if (this.state.isReady) {
        return import_react_dom3.default.createPortal(toReturn, document.body);
      } else {
        return null;
      }
    } else {
      return toReturn;
    }
  }
};

// example4.tsx
var featureSupportBasic = {
  supportedContainers: [],
  supportedCustoms: [],
  supportedRichClasses: [],
  supportedTables: [],
  supportsContainers: true,
  supportsCustom: true,
  supportsCustomStyles: true,
  supportsExternalLinks: true,
  // we will disable both files and images
  // for now
  supportsFiles: false,
  supportsFilesAccept: null,
  supportsImages: false,
  supportsImagesAccept: null,
  supportsLinks: true,
  supportsLists: true,
  supportsQuote: true,
  supportsRichClasses: true,
  supportsTables: true,
  supportsTemplating: true,
  supportsTitle: true,
  supportsVideos: true
};
var TEXT_FROM_SERVER_1 = "";
var sanitized1 = sanitize({
  fileResolver: null
}, featureSupportBasic, TEXT_FROM_SERVER_1);
var textTree1 = deserialize(sanitized1);
function Example() {
  const [htmlValue, setHtmlValue] = (0, import_react7.useState)(sanitized1);
  const [treeValue, setTreeValue] = (0, import_react7.useState)(textTree1);
  return /* @__PURE__ */ import_react7.default.createElement("div", null, /* @__PURE__ */ import_react7.default.createElement("h1", null, "Basic Editing"), /* @__PURE__ */ import_react7.default.createElement("section", null, /* @__PURE__ */ import_react7.default.createElement("h4", null, "Basic Editor (Unstyled) (No Wrapper) (No Element Wrappers)"), /* @__PURE__ */ import_react7.default.createElement("div", { style: { border: "solid 1px #ccc" } }, /* @__PURE__ */ import_react7.default.createElement(
    SlateEditor,
    {
      id: "my-editor",
      currentLoadError: null,
      dismissCurrentLoadError: null,
      onInsertFile: null,
      onInsertFileFromURL: null,
      onRetrieveFile: null,
      onRetrieveImage: null,
      supportedImageTypes: null,
      currentValid: true,
      treeValue,
      value: htmlValue,
      features: featureSupportBasic,
      isRichText: textTree1.rich,
      lang: "en",
      onChange: (value, textTreeValue) => {
        setHtmlValue(value);
        setTreeValue(textTreeValue);
      },
      rootContext: null,
      baseI18n: defaultBaseI18nRichInfoEnglish
    }
  ))), /* @__PURE__ */ import_react7.default.createElement("section", null, /* @__PURE__ */ import_react7.default.createElement("h4", null, "Basic Editor (Unstyled) (No Element Wrappers)"), /* @__PURE__ */ import_react7.default.createElement("div", { style: { border: "solid 1px #ccc" } }, /* @__PURE__ */ import_react7.default.createElement(
    SlateEditor,
    {
      id: "my-editor",
      currentLoadError: null,
      dismissCurrentLoadError: null,
      onInsertFile: null,
      onInsertFileFromURL: null,
      onRetrieveFile: null,
      onRetrieveImage: null,
      supportedImageTypes: null,
      currentValid: true,
      treeValue,
      value: htmlValue,
      features: featureSupportBasic,
      isRichText: textTree1.rich,
      lang: "en",
      onChange: (value, textTreeValue) => {
        setHtmlValue(value);
        setTreeValue(textTreeValue);
      },
      rootContext: null,
      Wrapper: DefaultSlateWrapper,
      baseI18n: defaultWrapperI18nRichInfoEnglish
    }
  ))), /* @__PURE__ */ import_react7.default.createElement("section", null, /* @__PURE__ */ import_react7.default.createElement("code", null, htmlValue), /* @__PURE__ */ import_react7.default.createElement("code", null, JSON.stringify(treeValue, null, 2))));
}
import_react_dom4.default.render(/* @__PURE__ */ import_react7.default.createElement(Example, null), document.querySelector("#app"));
/*! Bundled license information:

is-plain-object/dist/is-plain-object.mjs:
  (*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL2RpcmVjdGlvbi9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL2lzT2JqZWN0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvX2ZyZWVHbG9iYWwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC9fcm9vdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL25vdy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL190cmltbWVkRW5kSW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC9fYmFzZVRyaW0uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC9fU3ltYm9sLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvX2dldFJhd1RhZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL19vYmplY3RUb1N0cmluZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL19iYXNlR2V0VGFnLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvaXNPYmplY3RMaWtlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvaXNTeW1ib2wuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC90b051bWJlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL2RlYm91bmNlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvdGhyb3R0bGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2lzLWhvdGtleS9saWIvaW5kZXguanMiLCAiLi4vZXhhbXBsZTQudHN4IiwgIi4uLy4uL2VkaXRvci9zbGF0ZS9pbmRleC50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2lzLXBsYWluLW9iamVjdC9kaXN0L2lzLXBsYWluLW9iamVjdC5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy91dGlscy9lbnYudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy91dGlscy9lcnJvcnMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy91dGlscy9jb21tb24udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy91dGlscy9wbHVnaW5zLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9pbW1lci9zcmMvY29yZS9zY29wZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvaW1tZXIvc3JjL2NvcmUvZmluYWxpemUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy9jb3JlL3Byb3h5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9pbW1lci9zcmMvY29yZS9pbW1lckNsYXNzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9pbW1lci9zcmMvY29yZS9jdXJyZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9pbW1lci9zcmMvcGx1Z2lucy9wYXRjaGVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9pbW1lci9zcmMvcGx1Z2lucy9tYXBzZXQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy9pbW1lci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvcGF0aC1yZWYudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3BvaW50LXJlZi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvcmFuZ2UtcmVmLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdXRpbHMvd2Vhay1tYXBzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9wYXRoLnRzIiwgIi4uLy4uLy4uLy4uLy4uLy55YXJuL2JlcnJ5L2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjIzLjItZDAxM2Q2Y2Y3ZS0xMC56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyIsICIuLi8uLi8uLi8uLi8uLi8ueWFybi9iZXJyeS9jYWNoZS9AYmFiZWwtcnVudGltZS1ucG0tNy4yMy4yLWQwMTNkNmNmN2UtMTAuemlwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b1ByaW1pdGl2ZS5qcyIsICIuLi8uLi8uLi8uLi8uLi8ueWFybi9iZXJyeS9jYWNoZS9AYmFiZWwtcnVudGltZS1ucG0tNy4yMy4yLWQwMTNkNmNmN2UtMTAuemlwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b1Byb3BlcnR5S2V5LmpzIiwgIi4uLy4uLy4uLy4uLy4uLy55YXJuL2JlcnJ5L2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjIzLjItZDAxM2Q2Y2Y3ZS0xMC56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy90cmFuc2Zvcm1zL2dlbmVyYWwudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9zZWxlY3Rpb24udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy91dGlscy9kZWVwLWVxdWFsLnRzIiwgIi4uLy4uLy4uLy4uLy4uLy55YXJuL2JlcnJ5L2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjIzLjItZDAxM2Q2Y2Y3ZS0xMC56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UuanMiLCAiLi4vLi4vLi4vLi4vLi4vLnlhcm4vYmVycnkvY2FjaGUvQGJhYmVsLXJ1bnRpbWUtbnBtLTcuMjMuMi1kMDEzZDZjZjdlLTEwLnppcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3JhbmdlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9lbGVtZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9ub2RlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9vcGVyYXRpb24udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaXMtZWRpdG9yLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9lZGl0b3IudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL2xvY2F0aW9uLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9wb2ludC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvc2NydWJiZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3RleHQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy91dGlscy9nZXQtZGVmYXVsdC1pbnNlcnQtbG9jYXRpb24udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy91dGlscy9tYXRjaC1wYXRoLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdXRpbHMvc3RyaW5nLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy90cmFuc2Zvcm1zL3RleHQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvaW5kZXgudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9jb3JlL2FwcGx5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvY29yZS9nZXQtZGlydHktcGF0aHMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9jb3JlL2dldC1mcmFnbWVudC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2NvcmUvbm9ybWFsaXplLW5vZGUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9jb3JlL3Nob3VsZC1ub3JtYWxpemUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvYWJvdmUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvYWRkLW1hcmsudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvYWZ0ZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvYmVmb3JlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2RlbGV0ZS1iYWNrd2FyZC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9kZWxldGUtZm9yd2FyZC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9kZWxldGUtZnJhZ21lbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvZWRnZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvZWxlbWVudC1yZWFkLW9ubHkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvZW5kLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2ZpcnN0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2ZyYWdtZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2dldC12b2lkLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2hhcy1ibG9ja3MudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaGFzLWlubGluZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaGFzLXBhdGgudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaGFzLXRleHRzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2luc2VydC1icmVhay50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pbnNlcnQtbm9kZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pbnNlcnQtc29mdC1icmVhay50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pbnNlcnQtdGV4dC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pcy1ibG9jay50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pcy1lZGdlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2lzLWVtcHR5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2lzLWVuZC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pcy1ub3JtYWxpemluZy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pcy1zdGFydC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9sYXN0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2xlYWYudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvbGV2ZWxzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL21hcmtzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL25leHQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3Ivbm9kZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9ub3JtYWxpemUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvcGFyZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3BhdGgtcmVmLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3BhdGgtcmVmcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9wYXRoLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3BvaW50LXJlZi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9wb2ludC1yZWZzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3BvaW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3Bvc2l0aW9ucy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9wcmV2aW91cy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9yYW5nZS1yZWYudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvcmFuZ2UtcmVmcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9yYW5nZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9yZW1vdmUtbWFyay50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9zZXQtbm9ybWFsaXppbmcudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3Ivc3RhcnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3Ivc3RyaW5nLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3VuaGFuZy1yYW5nZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci93aXRob3V0LW5vcm1hbGl6aW5nLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy10ZXh0L2RlbGV0ZS10ZXh0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy10ZXh0L2luc2VydC1mcmFnbWVudC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtc2VsZWN0aW9uL2NvbGxhcHNlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1zZWxlY3Rpb24vZGVzZWxlY3QudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLXNlbGVjdGlvbi9tb3ZlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1zZWxlY3Rpb24vc2VsZWN0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1zZWxlY3Rpb24vc2V0LXBvaW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1zZWxlY3Rpb24vc2V0LXNlbGVjdGlvbi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS9pbnNlcnQtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLW5vZGUvbGlmdC1ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS9tZXJnZS1ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS9tb3ZlLW5vZGVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1ub2RlL3JlbW92ZS1ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS9zZXQtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLW5vZGUvc3BsaXQtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLW5vZGUvdW5zZXQtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLW5vZGUvdW53cmFwLW5vZGVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1ub2RlL3dyYXAtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9jcmVhdGUtZWRpdG9yLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9jb21wdXRlLXNjcm9sbC1pbnRvLXZpZXcvc3JjL2luZGV4LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zY3JvbGwtaW50by12aWV3LWlmLW5lZWRlZC9lcy9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL3V0aWxzL3Jlc2l6ZU9ic2VydmVycy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL2FsZ29yaXRobXMvaGFzQWN0aXZlT2JzZXJ2YXRpb25zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvYWxnb3JpdGhtcy9oYXNTa2lwcGVkT2JzZXJ2YXRpb25zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvYWxnb3JpdGhtcy9kZWxpdmVyUmVzaXplTG9vcEVycm9yLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvZnJlZXplLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvUmVzaXplT2JzZXJ2ZXJTaXplLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvRE9NUmVjdFJlYWRPbmx5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvZWxlbWVudC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL3V0aWxzL2dsb2JhbC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL2FsZ29yaXRobXMvY2FsY3VsYXRlQm94U2l6ZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL1Jlc2l6ZU9ic2VydmVyRW50cnkuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9hbGdvcml0aG1zL2NhbGN1bGF0ZURlcHRoRm9yTm9kZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL2FsZ29yaXRobXMvYnJvYWRjYXN0QWN0aXZlT2JzZXJ2YXRpb25zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvYWxnb3JpdGhtcy9nYXRoZXJBY3RpdmVPYnNlcnZhdGlvbnNBdERlcHRoLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvcHJvY2Vzcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL3V0aWxzL3F1ZXVlTWljcm9UYXNrLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvcXVldWVSZXNpemVPYnNlcnZlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL3V0aWxzL3NjaGVkdWxlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL1Jlc2l6ZU9ic2VydmF0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvUmVzaXplT2JzZXJ2ZXJEZXRhaWwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9SZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9SZXNpemVPYnNlcnZlci5qcyIsICIuLi8uLi8ueWFybi9jYWNoZS9AYmFiZWwtcnVudGltZS1ucG0tNy4xNS4zLTYzMzNjNzEzNjItMmYwYjhkMmQ0ZS56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIiwgIi4uLy4uLy55YXJuL2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjE1LjMtNjMzM2M3MTM2Mi0yZjBiOGQyZDRlLnppcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qcyIsICIuLi8uLi8ueWFybi9jYWNoZS9AYmFiZWwtcnVudGltZS1ucG0tNy4xNS4zLTYzMzNjNzEzNjItMmYwYjhkMmQ0ZS56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMva2V5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMvd2Vhay1tYXBzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMvZG9tLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMvZW52aXJvbm1lbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9wbHVnaW4vcmVhY3QtZWRpdG9yLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLWlzb21vcnBoaWMtbGF5b3V0LWVmZmVjdC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3V0aWxzL3JhbmdlLWxpc3QudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL3N0cmluZy50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2Utc2xhdGUtc3RhdGljLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2NvbXBvbmVudHMvbGVhZi50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL3RleHQudHN4IiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvY29tcG9uZW50cy9lbGVtZW50LnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1kZWNvcmF0ZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1zZWxlY3RlZC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1jaGlsZHJlbi50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2UtcmVhZC1vbmx5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLXNsYXRlLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3V0aWxzL2NvbnN0YW50cy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3V0aWxzL2hvdGtleXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL3Jlc3RvcmUtZG9tL3Jlc3RvcmUtZG9tLW1hbmFnZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL3Jlc3RvcmUtZG9tL3Jlc3RvcmUtZG9tLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3V0aWxzL2RpZmYtdGV4dC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL2FuZHJvaWQtaW5wdXQtbWFuYWdlci9hbmRyb2lkLWlucHV0LW1hbmFnZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2UtaXMtbW91bnRlZC50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2UtbXV0YXRpb24tb2JzZXJ2ZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy9hbmRyb2lkLWlucHV0LW1hbmFnZXIvdXNlLWFuZHJvaWQtaW5wdXQtbWFuYWdlci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS10cmFjay11c2VyLWlucHV0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvY29tcG9uZW50cy9lZGl0YWJsZS50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2UtZm9jdXNlZC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1zbGF0ZS1zZWxlY3Rvci50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL3NsYXRlLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1lZGl0b3IudHN4IiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLXNsYXRlLXNlbGVjdGlvbi50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy91dGlscy9saW5lcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3BsdWdpbi93aXRoLXJlYWN0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1oaXN0b3J5L3NyYy9oaXN0b3J5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1oaXN0b3J5L3NyYy9oaXN0b3J5LWVkaXRvci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtaGlzdG9yeS9zcmMvd2l0aC1oaXN0b3J5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9wcmV0dHktYnl0ZXMvaW5kZXguanMiLCAiLi4vLi4vZWRpdG9yL3NsYXRlL2N1cnJlbnQtZWxlbWVudC50c3giLCAiLi4vLi4vdXRpbC9pbmRleC50cyIsICIuLi8uLi9lZGl0b3IvaW5kZXgudHMiLCAiLi4vLi4vZWRpdG9yL3NsYXRlL3dyYXBwZXIudHN4IiwgIi4uLy4uL2VkaXRvci9zbGF0ZS9kcmF3ZXIvaW5kZXgudHN4IiwgIi4uLy4uL2VkaXRvci9zbGF0ZS9kaWFsb2dzL2ZpbGUudHN4Il0sCiAgInNvdXJjZXNDb250ZW50IjogWyIndXNlIHN0cmljdCdcblxubW9kdWxlLmV4cG9ydHMgPSBkaXJlY3Rpb25cblxudmFyIFJUTCA9ICdcXHUwNTkxLVxcdTA3RkZcXHVGQjFELVxcdUZERkRcXHVGRTcwLVxcdUZFRkMnXG52YXIgTFRSID1cbiAgJ0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNicgK1xuICAnXFx1MDBGOC1cXHUwMkI4XFx1MDMwMC1cXHUwNTkwXFx1MDgwMC1cXHUxRkZGXFx1MjAwRVxcdTJDMDAtXFx1RkIxQycgK1xuICAnXFx1RkUwMC1cXHVGRTZGXFx1RkVGRC1cXHVGRkZGJ1xuXG52YXIgcnRsID0gbmV3IFJlZ0V4cCgnXlteJyArIExUUiArICddKlsnICsgUlRMICsgJ10nKVxudmFyIGx0ciA9IG5ldyBSZWdFeHAoJ15bXicgKyBSVEwgKyAnXSpbJyArIExUUiArICddJylcblxuZnVuY3Rpb24gZGlyZWN0aW9uKHZhbHVlKSB7XG4gIHZhbHVlID0gU3RyaW5nKHZhbHVlIHx8ICcnKVxuXG4gIGlmIChydGwudGVzdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gJ3J0bCdcbiAgfVxuXG4gIGlmIChsdHIudGVzdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gJ2x0cidcbiAgfVxuXG4gIHJldHVybiAnbmV1dHJhbCdcbn1cbiIsICIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdDtcbiIsICIvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZyZWVHbG9iYWw7XG4iLCAidmFyIGZyZWVHbG9iYWwgPSByZXF1aXJlKCcuL19mcmVlR2xvYmFsJyk7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxubW9kdWxlLmV4cG9ydHMgPSByb290O1xuIiwgInZhciByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5vdztcbiIsICIvKiogVXNlZCB0byBtYXRjaCBhIHNpbmdsZSB3aGl0ZXNwYWNlIGNoYXJhY3Rlci4gKi9cbnZhciByZVdoaXRlc3BhY2UgPSAvXFxzLztcblxuLyoqXG4gKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltRW5kYCB0byBnZXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IG5vbi13aGl0ZXNwYWNlXG4gKiBjaGFyYWN0ZXIgb2YgYHN0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBpbnNwZWN0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyLlxuICovXG5mdW5jdGlvbiB0cmltbWVkRW5kSW5kZXgoc3RyaW5nKSB7XG4gIHZhciBpbmRleCA9IHN0cmluZy5sZW5ndGg7XG5cbiAgd2hpbGUgKGluZGV4LS0gJiYgcmVXaGl0ZXNwYWNlLnRlc3Qoc3RyaW5nLmNoYXJBdChpbmRleCkpKSB7fVxuICByZXR1cm4gaW5kZXg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdHJpbW1lZEVuZEluZGV4O1xuIiwgInZhciB0cmltbWVkRW5kSW5kZXggPSByZXF1aXJlKCcuL190cmltbWVkRW5kSW5kZXgnKTtcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbVN0YXJ0ID0gL15cXHMrLztcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50cmltYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIHRyaW0uXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB0cmltbWVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRyaW0oc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmdcbiAgICA/IHN0cmluZy5zbGljZSgwLCB0cmltbWVkRW5kSW5kZXgoc3RyaW5nKSArIDEpLnJlcGxhY2UocmVUcmltU3RhcnQsICcnKVxuICAgIDogc3RyaW5nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VUcmltO1xuIiwgInZhciByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW1ib2w7XG4iLCAidmFyIFN5bWJvbCA9IHJlcXVpcmUoJy4vX1N5bWJvbCcpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgc3ltVG9TdHJpbmdUYWcgPSBTeW1ib2wgPyBTeW1ib2wudG9TdHJpbmdUYWcgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlR2V0VGFnYCB3aGljaCBpZ25vcmVzIGBTeW1ib2wudG9TdHJpbmdUYWdgIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSByYXcgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gZ2V0UmF3VGFnKHZhbHVlKSB7XG4gIHZhciBpc093biA9IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHN5bVRvU3RyaW5nVGFnKSxcbiAgICAgIHRhZyA9IHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcblxuICB0cnkge1xuICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHVuZGVmaW5lZDtcbiAgICB2YXIgdW5tYXNrZWQgPSB0cnVlO1xuICB9IGNhdGNoIChlKSB7fVxuXG4gIHZhciByZXN1bHQgPSBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgaWYgKHVubWFza2VkKSB7XG4gICAgaWYgKGlzT3duKSB7XG4gICAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ10gPSB0YWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ107XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0UmF3VGFnO1xuIiwgIi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgdXNpbmcgYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgY29udmVydGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG9iamVjdFRvU3RyaW5nO1xuIiwgInZhciBTeW1ib2wgPSByZXF1aXJlKCcuL19TeW1ib2wnKSxcbiAgICBnZXRSYXdUYWcgPSByZXF1aXJlKCcuL19nZXRSYXdUYWcnKSxcbiAgICBvYmplY3RUb1N0cmluZyA9IHJlcXVpcmUoJy4vX29iamVjdFRvU3RyaW5nJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBudWxsVGFnID0gJ1tvYmplY3QgTnVsbF0nLFxuICAgIHVuZGVmaW5lZFRhZyA9ICdbb2JqZWN0IFVuZGVmaW5lZF0nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1Ub1N0cmluZ1RhZyA9IFN5bWJvbCA/IFN5bWJvbC50b1N0cmluZ1RhZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0VGFnYCB3aXRob3V0IGZhbGxiYWNrcyBmb3IgYnVnZ3kgZW52aXJvbm1lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG4gKi9cbmZ1bmN0aW9uIGJhc2VHZXRUYWcodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZFRhZyA6IG51bGxUYWc7XG4gIH1cbiAgcmV0dXJuIChzeW1Ub1N0cmluZ1RhZyAmJiBzeW1Ub1N0cmluZ1RhZyBpbiBPYmplY3QodmFsdWUpKVxuICAgID8gZ2V0UmF3VGFnKHZhbHVlKVxuICAgIDogb2JqZWN0VG9TdHJpbmcodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VHZXRUYWc7XG4iLCAiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3RMaWtlO1xuIiwgInZhciBiYXNlR2V0VGFnID0gcmVxdWlyZSgnLi9fYmFzZUdldFRhZycpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgYmFzZUdldFRhZyh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1N5bWJvbDtcbiIsICJ2YXIgYmFzZVRyaW0gPSByZXF1aXJlKCcuL19iYXNlVHJpbScpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpLFxuICAgIGlzU3ltYm9sID0gcmVxdWlyZSgnLi9pc1N5bWJvbCcpO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBOQU4gPSAwIC8gMDtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gYmFzZVRyaW0odmFsdWUpO1xuICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcbiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcbiAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b051bWJlcjtcbiIsICJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0JyksXG4gICAgbm93ID0gcmVxdWlyZSgnLi9ub3cnKSxcbiAgICB0b051bWJlciA9IHJlcXVpcmUoJy4vdG9OdW1iZXInKTtcblxuLyoqIEVycm9yIG1lc3NhZ2UgY29uc3RhbnRzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAqIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHRpbWVXYWl0aW5nID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXG4gICAgcmV0dXJuIG1heGluZ1xuICAgICAgPyBuYXRpdmVNaW4odGltZVdhaXRpbmcsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKVxuICAgICAgOiB0aW1lV2FpdGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblxuICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG4gICAgLy8gdHJhaWxpbmcgZWRnZSwgdGhlIHN5c3RlbSB0aW1lIGhhcyBnb25lIGJhY2t3YXJkcyBhbmQgd2UncmUgdHJlYXRpbmdcbiAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG4gICAgcmV0dXJuIChsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCAodGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCkgfHxcbiAgICAgICh0aW1lU2luY2VMYXN0Q2FsbCA8IDApIHx8IChtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0KSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKTtcbiAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuICAgIH1cbiAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG4gICAgfVxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgfVxuICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCksXG4gICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cbiAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgbGFzdENhbGxUaW1lID0gdGltZTtcblxuICAgIGlmIChpc0ludm9raW5nKSB7XG4gICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgICAgaWYgKG1heGluZykge1xuICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuICAgICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG4iLCAidmFyIGRlYm91bmNlID0gcmVxdWlyZSgnLi9kZWJvdW5jZScpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpO1xuXG4vKiogRXJyb3IgbWVzc2FnZSBjb25zdGFudHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKipcbiAqIENyZWF0ZXMgYSB0aHJvdHRsZWQgZnVuY3Rpb24gdGhhdCBvbmx5IGludm9rZXMgYGZ1bmNgIGF0IG1vc3Qgb25jZSBwZXJcbiAqIGV2ZXJ5IGB3YWl0YCBtaWxsaXNlY29uZHMuIFRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgXG4gKiBtZXRob2QgdG8gY2FuY2VsIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvXG4gKiBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS4gUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2BcbiAqIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGBcbiAqIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZCB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGVcbiAqIHRocm90dGxlZCBmdW5jdGlvbi4gU3Vic2VxdWVudCBjYWxscyB0byB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHJldHVybiB0aGVcbiAqIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIHRocm90dGxlZCBmdW5jdGlvblxuICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy50aHJvdHRsZWAgYW5kIGBfLmRlYm91bmNlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHRocm90dGxlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHRocm90dGxlIGludm9jYXRpb25zIHRvLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHRocm90dGxlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQXZvaWQgZXhjZXNzaXZlbHkgdXBkYXRpbmcgdGhlIHBvc2l0aW9uIHdoaWxlIHNjcm9sbGluZy5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdzY3JvbGwnLCBfLnRocm90dGxlKHVwZGF0ZVBvc2l0aW9uLCAxMDApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHJlbmV3VG9rZW5gIHdoZW4gdGhlIGNsaWNrIGV2ZW50IGlzIGZpcmVkLCBidXQgbm90IG1vcmUgdGhhbiBvbmNlIGV2ZXJ5IDUgbWludXRlcy5cbiAqIHZhciB0aHJvdHRsZWQgPSBfLnRocm90dGxlKHJlbmV3VG9rZW4sIDMwMDAwMCwgeyAndHJhaWxpbmcnOiBmYWxzZSB9KTtcbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCB0aHJvdHRsZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgdGhyb3R0bGVkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCB0aHJvdHRsZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGVhZGluZyA9IHRydWUsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICdsZWFkaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLmxlYWRpbmcgOiBsZWFkaW5nO1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cbiAgcmV0dXJuIGRlYm91bmNlKGZ1bmMsIHdhaXQsIHtcbiAgICAnbGVhZGluZyc6IGxlYWRpbmcsXG4gICAgJ21heFdhaXQnOiB3YWl0LFxuICAgICd0cmFpbGluZyc6IHRyYWlsaW5nXG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxuLyoqXG4gKiBDb25zdGFudHMuXG4gKi9cblxudmFyIElTX01BQyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgL01hY3xpUG9kfGlQaG9uZXxpUGFkLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm0pO1xuXG52YXIgTU9ESUZJRVJTID0ge1xuICBhbHQ6ICdhbHRLZXknLFxuICBjb250cm9sOiAnY3RybEtleScsXG4gIG1ldGE6ICdtZXRhS2V5JyxcbiAgc2hpZnQ6ICdzaGlmdEtleSdcbn07XG5cbnZhciBBTElBU0VTID0ge1xuICBhZGQ6ICcrJyxcbiAgYnJlYWs6ICdwYXVzZScsXG4gIGNtZDogJ21ldGEnLFxuICBjb21tYW5kOiAnbWV0YScsXG4gIGN0bDogJ2NvbnRyb2wnLFxuICBjdHJsOiAnY29udHJvbCcsXG4gIGRlbDogJ2RlbGV0ZScsXG4gIGRvd246ICdhcnJvd2Rvd24nLFxuICBlc2M6ICdlc2NhcGUnLFxuICBpbnM6ICdpbnNlcnQnLFxuICBsZWZ0OiAnYXJyb3dsZWZ0JyxcbiAgbW9kOiBJU19NQUMgPyAnbWV0YScgOiAnY29udHJvbCcsXG4gIG9wdDogJ2FsdCcsXG4gIG9wdGlvbjogJ2FsdCcsXG4gIHJldHVybjogJ2VudGVyJyxcbiAgcmlnaHQ6ICdhcnJvd3JpZ2h0JyxcbiAgc3BhY2U6ICcgJyxcbiAgc3BhY2ViYXI6ICcgJyxcbiAgdXA6ICdhcnJvd3VwJyxcbiAgd2luOiAnbWV0YScsXG4gIHdpbmRvd3M6ICdtZXRhJ1xufTtcblxudmFyIENPREVTID0ge1xuICBiYWNrc3BhY2U6IDgsXG4gIHRhYjogOSxcbiAgZW50ZXI6IDEzLFxuICBzaGlmdDogMTYsXG4gIGNvbnRyb2w6IDE3LFxuICBhbHQ6IDE4LFxuICBwYXVzZTogMTksXG4gIGNhcHNsb2NrOiAyMCxcbiAgZXNjYXBlOiAyNyxcbiAgJyAnOiAzMixcbiAgcGFnZXVwOiAzMyxcbiAgcGFnZWRvd246IDM0LFxuICBlbmQ6IDM1LFxuICBob21lOiAzNixcbiAgYXJyb3dsZWZ0OiAzNyxcbiAgYXJyb3d1cDogMzgsXG4gIGFycm93cmlnaHQ6IDM5LFxuICBhcnJvd2Rvd246IDQwLFxuICBpbnNlcnQ6IDQ1LFxuICBkZWxldGU6IDQ2LFxuICBtZXRhOiA5MSxcbiAgbnVtbG9jazogMTQ0LFxuICBzY3JvbGxsb2NrOiAxNDUsXG4gICc7JzogMTg2LFxuICAnPSc6IDE4NyxcbiAgJywnOiAxODgsXG4gICctJzogMTg5LFxuICAnLic6IDE5MCxcbiAgJy8nOiAxOTEsXG4gICdgJzogMTkyLFxuICAnWyc6IDIxOSxcbiAgJ1xcXFwnOiAyMjAsXG4gICddJzogMjIxLFxuICAnXFwnJzogMjIyXG59O1xuXG5mb3IgKHZhciBmID0gMTsgZiA8IDIwOyBmKyspIHtcbiAgQ09ERVNbJ2YnICsgZl0gPSAxMTEgKyBmO1xufVxuXG4vKipcbiAqIElzIGhvdGtleT9cbiAqL1xuXG5mdW5jdGlvbiBpc0hvdGtleShob3RrZXksIG9wdGlvbnMsIGV2ZW50KSB7XG4gIGlmIChvcHRpb25zICYmICEoJ2J5S2V5JyBpbiBvcHRpb25zKSkge1xuICAgIGV2ZW50ID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0gbnVsbDtcbiAgfVxuXG4gIGlmICghQXJyYXkuaXNBcnJheShob3RrZXkpKSB7XG4gICAgaG90a2V5ID0gW2hvdGtleV07XG4gIH1cblxuICB2YXIgYXJyYXkgPSBob3RrZXkubWFwKGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICByZXR1cm4gcGFyc2VIb3RrZXkoc3RyaW5nLCBvcHRpb25zKTtcbiAgfSk7XG4gIHZhciBjaGVjayA9IGZ1bmN0aW9uIGNoZWNrKGUpIHtcbiAgICByZXR1cm4gYXJyYXkuc29tZShmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICByZXR1cm4gY29tcGFyZUhvdGtleShvYmplY3QsIGUpO1xuICAgIH0pO1xuICB9O1xuICB2YXIgcmV0ID0gZXZlbnQgPT0gbnVsbCA/IGNoZWNrIDogY2hlY2soZXZlbnQpO1xuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBpc0NvZGVIb3RrZXkoaG90a2V5LCBldmVudCkge1xuICByZXR1cm4gaXNIb3RrZXkoaG90a2V5LCBldmVudCk7XG59XG5cbmZ1bmN0aW9uIGlzS2V5SG90a2V5KGhvdGtleSwgZXZlbnQpIHtcbiAgcmV0dXJuIGlzSG90a2V5KGhvdGtleSwgeyBieUtleTogdHJ1ZSB9LCBldmVudCk7XG59XG5cbi8qKlxuICogUGFyc2UuXG4gKi9cblxuZnVuY3Rpb24gcGFyc2VIb3RrZXkoaG90a2V5LCBvcHRpb25zKSB7XG4gIHZhciBieUtleSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5ieUtleTtcbiAgdmFyIHJldCA9IHt9O1xuXG4gIC8vIFNwZWNpYWwgY2FzZSB0byBoYW5kbGUgdGhlIGArYCBrZXkgc2luY2Ugd2UgdXNlIGl0IGFzIGEgc2VwYXJhdG9yLlxuICBob3RrZXkgPSBob3RrZXkucmVwbGFjZSgnKysnLCAnK2FkZCcpO1xuICB2YXIgdmFsdWVzID0gaG90a2V5LnNwbGl0KCcrJyk7XG4gIHZhciBsZW5ndGggPSB2YWx1ZXMubGVuZ3RoO1xuXG4gIC8vIEVuc3VyZSB0aGF0IGFsbCB0aGUgbW9kaWZpZXJzIGFyZSBzZXQgdG8gZmFsc2UgdW5sZXNzIHRoZSBob3RrZXkgaGFzIHRoZW0uXG5cbiAgZm9yICh2YXIgayBpbiBNT0RJRklFUlMpIHtcbiAgICByZXRbTU9ESUZJRVJTW2tdXSA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdmFsdWVzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgdmFyIHZhbHVlID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIHZhciBvcHRpb25hbCA9IHZhbHVlLmVuZHNXaXRoKCc/JykgJiYgdmFsdWUubGVuZ3RoID4gMTtcblxuICAgICAgaWYgKG9wdGlvbmFsKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMCwgLTEpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbmFtZSA9IHRvS2V5TmFtZSh2YWx1ZSk7XG4gICAgICB2YXIgbW9kaWZpZXIgPSBNT0RJRklFUlNbbmFtZV07XG5cbiAgICAgIGlmIChsZW5ndGggPT09IDEgfHwgIW1vZGlmaWVyKSB7XG4gICAgICAgIGlmIChieUtleSkge1xuICAgICAgICAgIHJldC5rZXkgPSBuYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldC53aGljaCA9IHRvS2V5Q29kZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG1vZGlmaWVyKSB7XG4gICAgICAgIHJldFttb2RpZmllcl0gPSBvcHRpb25hbCA/IG51bGwgOiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIENvbXBhcmUuXG4gKi9cblxuZnVuY3Rpb24gY29tcGFyZUhvdGtleShvYmplY3QsIGV2ZW50KSB7XG4gIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICB2YXIgZXhwZWN0ZWQgPSBvYmplY3Rba2V5XTtcbiAgICB2YXIgYWN0dWFsID0gdm9pZCAwO1xuXG4gICAgaWYgKGV4cGVjdGVkID09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT09ICdrZXknICYmIGV2ZW50LmtleSAhPSBudWxsKSB7XG4gICAgICBhY3R1YWwgPSBldmVudC5rZXkudG9Mb3dlckNhc2UoKTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3doaWNoJykge1xuICAgICAgYWN0dWFsID0gZXhwZWN0ZWQgPT09IDkxICYmIGV2ZW50LndoaWNoID09PSA5MyA/IDkxIDogZXZlbnQud2hpY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdHVhbCA9IGV2ZW50W2tleV07XG4gICAgfVxuXG4gICAgaWYgKGFjdHVhbCA9PSBudWxsICYmIGV4cGVjdGVkID09PSBmYWxzZSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBVdGlscy5cbiAqL1xuXG5mdW5jdGlvbiB0b0tleUNvZGUobmFtZSkge1xuICBuYW1lID0gdG9LZXlOYW1lKG5hbWUpO1xuICB2YXIgY29kZSA9IENPREVTW25hbWVdIHx8IG5hbWUudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApO1xuICByZXR1cm4gY29kZTtcbn1cblxuZnVuY3Rpb24gdG9LZXlOYW1lKG5hbWUpIHtcbiAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgbmFtZSA9IEFMSUFTRVNbbmFtZV0gfHwgbmFtZTtcbiAgcmV0dXJuIG5hbWU7XG59XG5cbi8qKlxuICogRXhwb3J0LlxuICovXG5cbmV4cG9ydHMuZGVmYXVsdCA9IGlzSG90a2V5O1xuZXhwb3J0cy5pc0hvdGtleSA9IGlzSG90a2V5O1xuZXhwb3J0cy5pc0NvZGVIb3RrZXkgPSBpc0NvZGVIb3RrZXk7XG5leHBvcnRzLmlzS2V5SG90a2V5ID0gaXNLZXlIb3RrZXk7XG5leHBvcnRzLnBhcnNlSG90a2V5ID0gcGFyc2VIb3RrZXk7XG5leHBvcnRzLmNvbXBhcmVIb3RrZXkgPSBjb21wYXJlSG90a2V5O1xuZXhwb3J0cy50b0tleUNvZGUgPSB0b0tleUNvZGU7XG5leHBvcnRzLnRvS2V5TmFtZSA9IHRvS2V5TmFtZTsiLCAiaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgUmVhY3RET00gZnJvbSBcInJlYWN0LWRvbVwiO1xuaW1wb3J0IHsgZGVzZXJpYWxpemUgfSBmcm9tIFwiLi4vc2VyaWFsaXplclwiO1xuaW1wb3J0IHsgSUZlYXR1cmVTdXBwb3J0T3B0aW9ucywgc2FuaXRpemUgfSBmcm9tIFwiLi4vc2FuaXRpemVyXCI7XG5pbXBvcnQgeyByZW5kZXJUZW1wbGF0ZURvbnRTYW5pdGl6ZSwgcmVuZGVyVGVtcGxhdGVEeW5hbWljYWxseSB9IGZyb20gXCIuLi9yZW5kZXJlclwiO1xuaW1wb3J0IHsgTXV0YXRpbmdUZW1wbGF0ZUFyZ3MsIFRlbXBsYXRlQXJncyB9IGZyb20gXCIuLi9zZXJpYWxpemVyL3RlbXBsYXRlLWFyZ3NcIjtcbmltcG9ydCB7IElQYXJhZ3JhcGggfSBmcm9tIFwiLi4vc2VyaWFsaXplci90eXBlcy9wYXJhZ3JhcGhcIjtcbmltcG9ydCB7IElJbWFnZSB9IGZyb20gXCIuLi9zZXJpYWxpemVyL3R5cGVzL2ltYWdlXCI7XG5pbXBvcnQgeyBJVUlIYW5kbGVyUHJvcHMgfSBmcm9tIFwiLi4vc2VyaWFsaXplci9iYXNlXCI7XG5pbXBvcnQgeyBTbGF0ZUVkaXRvciwgZGVmYXVsdEJhc2VJMThuUmljaEluZm9FbmdsaXNoIH0gZnJvbSBcIi4uL2VkaXRvci9zbGF0ZVwiO1xuaW1wb3J0IHsgRGVmYXVsdFNsYXRlV3JhcHBlciwgZGVmYXVsdFdyYXBwZXJJMThuUmljaEluZm9FbmdsaXNoIH0gZnJvbSBcIi4uL2VkaXRvci9zbGF0ZS93cmFwcGVyXCI7XG5cbmNvbnN0IGZlYXR1cmVTdXBwb3J0QmFzaWM6IElGZWF0dXJlU3VwcG9ydE9wdGlvbnMgPSB7XG4gIHN1cHBvcnRlZENvbnRhaW5lcnM6IFtdLFxuICBzdXBwb3J0ZWRDdXN0b21zOiBbXSxcbiAgc3VwcG9ydGVkUmljaENsYXNzZXM6IFtdLFxuICBzdXBwb3J0ZWRUYWJsZXM6IFtdLFxuICBzdXBwb3J0c0NvbnRhaW5lcnM6IHRydWUsXG4gIHN1cHBvcnRzQ3VzdG9tOiB0cnVlLFxuICBzdXBwb3J0c0N1c3RvbVN0eWxlczogdHJ1ZSxcbiAgc3VwcG9ydHNFeHRlcm5hbExpbmtzOiB0cnVlLFxuICAvLyB3ZSB3aWxsIGRpc2FibGUgYm90aCBmaWxlcyBhbmQgaW1hZ2VzXG4gIC8vIGZvciBub3dcbiAgc3VwcG9ydHNGaWxlczogZmFsc2UsXG4gIHN1cHBvcnRzRmlsZXNBY2NlcHQ6IG51bGwsXG4gIHN1cHBvcnRzSW1hZ2VzOiBmYWxzZSxcbiAgc3VwcG9ydHNJbWFnZXNBY2NlcHQ6IG51bGwsXG4gIHN1cHBvcnRzTGlua3M6IHRydWUsXG4gIHN1cHBvcnRzTGlzdHM6IHRydWUsXG4gIHN1cHBvcnRzUXVvdGU6IHRydWUsXG4gIHN1cHBvcnRzUmljaENsYXNzZXM6IHRydWUsXG4gIHN1cHBvcnRzVGFibGVzOiB0cnVlLFxuICBzdXBwb3J0c1RlbXBsYXRpbmc6IHRydWUsXG4gIHN1cHBvcnRzVGl0bGU6IHRydWUsXG4gIHN1cHBvcnRzVmlkZW9zOiB0cnVlLFxufTtcblxuLy8gV2Ugd2lsbCBzdGFydCB3aXRoIGFuIGVtcHR5IHZhbHVlXG5jb25zdCBURVhUX0ZST01fU0VSVkVSXzEgPSAnJztcblxuLy8gd2Ugc2FuaXRpemUsIGl0IHdpbGwgZG8gbm90aGluZyBpbiB0aGlzXG4vLyBjYXNlXG5jb25zdCBzYW5pdGl6ZWQxID0gc2FuaXRpemUoe1xuICBmaWxlUmVzb2x2ZXI6IG51bGwsXG59LCBmZWF0dXJlU3VwcG9ydEJhc2ljLCBURVhUX0ZST01fU0VSVkVSXzEpO1xuXG5jb25zdCB0ZXh0VHJlZTEgPSBkZXNlcmlhbGl6ZShzYW5pdGl6ZWQxKTtcblxuZnVuY3Rpb24gRXhhbXBsZSgpIHtcbiAgLy8gb3VyIGluaXRpYWwgdmFsdWUgaXMgdGhlIHNhbWUgYXMgdGhlIHNhbml0aXplZFxuICAvLyB0aGlzIHZhbHVlIGlzIGZvciBjb252ZW5pZW5jZSBpcyBub3Qgd2hhdCBpcyB1c2VkXG4gIC8vIGZvciB0aGUgc3RhdGUgb2YgdGhlIGVkaXRvciBidXQgdGhlIHRyZWUgaXNcbiAgY29uc3QgW2h0bWxWYWx1ZSwgc2V0SHRtbFZhbHVlXSA9IHVzZVN0YXRlKHNhbml0aXplZDEpO1xuICBjb25zdCBbdHJlZVZhbHVlLCBzZXRUcmVlVmFsdWVdID0gdXNlU3RhdGUodGV4dFRyZWUxKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8aDE+QmFzaWMgRWRpdGluZzwvaDE+XG5cbiAgICAgIDxzZWN0aW9uPlxuICAgICAgICA8aDQ+XG4gICAgICAgICAgQmFzaWMgRWRpdG9yIChVbnN0eWxlZCkgKE5vIFdyYXBwZXIpIChObyBFbGVtZW50IFdyYXBwZXJzKVxuICAgICAgICA8L2g0PlxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGJvcmRlcjogXCJzb2xpZCAxcHggI2NjY1wiIH19PlxuICAgICAgICAgIDxTbGF0ZUVkaXRvclxuICAgICAgICAgICAgaWQ9XCJteS1lZGl0b3JcIlxuXG4gICAgICAgICAgICAvLyB0aGlzIGlzIHJlZ2FyZ2luZyBmaWxlIGxvYWRpbmdcbiAgICAgICAgICAgIC8vIHdlIGhhdmUgZGlzYWJsZWQgZmlsZXMgYW5kIGltYWdlcyBzbyB0aGlzIHNob3VsZG4ndCBoYXBwZW5cbiAgICAgICAgICAgIGN1cnJlbnRMb2FkRXJyb3I9e251bGx9XG4gICAgICAgICAgICBkaXNtaXNzQ3VycmVudExvYWRFcnJvcj17bnVsbH1cbiAgICAgICAgICAgIG9uSW5zZXJ0RmlsZT17bnVsbH1cbiAgICAgICAgICAgIG9uSW5zZXJ0RmlsZUZyb21VUkw9e251bGx9XG4gICAgICAgICAgICBvblJldHJpZXZlRmlsZT17bnVsbH1cbiAgICAgICAgICAgIG9uUmV0cmlldmVJbWFnZT17bnVsbH1cbiAgICAgICAgICAgIHN1cHBvcnRlZEltYWdlVHlwZXM9e251bGx9XG5cbiAgICAgICAgICAgIC8vIHRoaXMgdmFsaWRpdHkgaXMgZG9uZSB2aWEgYW5vdGhlciBjcml0ZXJpYVxuICAgICAgICAgICAgLy8gb2YgeW91ciBjaG9vc2luZ1xuICAgICAgICAgICAgY3VycmVudFZhbGlkPXt0cnVlfVxuICAgICAgICAgICAgdHJlZVZhbHVlPXt0cmVlVmFsdWV9XG4gICAgICAgICAgICB2YWx1ZT17aHRtbFZhbHVlfVxuXG4gICAgICAgICAgICAvLyB3ZSBmZWVkIGl0IHRoZSBzYW1lIGZlYXR1cmUgc3VwcG9ydCB3ZSB1c2VkXG4gICAgICAgICAgICBmZWF0dXJlcz17ZmVhdHVyZVN1cHBvcnRCYXNpY31cbiAgICAgICAgICAgIGlzUmljaFRleHQ9e3RleHRUcmVlMS5yaWNofVxuICAgICAgICAgICAgLy8gdGhlIGdpdmVuIGxhbmd1YWdlXG4gICAgICAgICAgICBsYW5nPVwiZW5cIlxuXG4gICAgICAgICAgICBvbkNoYW5nZT17KHZhbHVlLCB0ZXh0VHJlZVZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgIHNldEh0bWxWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgIHNldFRyZWVWYWx1ZSh0ZXh0VHJlZVZhbHVlKTtcbiAgICAgICAgICAgIH19XG5cbiAgICAgICAgICAgIC8vIHRoaXMgaXMgdXNlZCB0byBkZWZpbmUgYSByb290IGNvbnRleHRcbiAgICAgICAgICAgIC8vIHVzZWQgZm9yIHRlbXBsYXRpbmcsIHRvIGRldGVybWluZVxuICAgICAgICAgICAgLy8gdGhlIHNoYXBlIG9mIHRoZSBjb250ZXh0IHRoYXQgd2lsbCBiZSBmZWVkXG4gICAgICAgICAgICByb290Q29udGV4dD17bnVsbH1cblxuICAgICAgICAgICAgLy8gdGhpcyBpcyB1c2VkIHRvIGZlZWQgaXQgbGFuZ3VhZ2UgaW5mb3JtYXRpb25cbiAgICAgICAgICAgIGJhc2VJMThuPXtkZWZhdWx0QmFzZUkxOG5SaWNoSW5mb0VuZ2xpc2h9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3NlY3Rpb24+XG5cbiAgICAgIDxzZWN0aW9uPlxuICAgICAgICA8aDQ+XG4gICAgICAgICAgQmFzaWMgRWRpdG9yIChVbnN0eWxlZCkgKE5vIEVsZW1lbnQgV3JhcHBlcnMpXG4gICAgICAgIDwvaDQ+XG4gICAgICAgIDxkaXYgc3R5bGU9e3sgYm9yZGVyOiBcInNvbGlkIDFweCAjY2NjXCIgfX0+XG4gICAgICAgICAgPFNsYXRlRWRpdG9yXG4gICAgICAgICAgICBpZD1cIm15LWVkaXRvclwiXG5cbiAgICAgICAgICAgIC8vIHRoaXMgaXMgcmVnYXJnaW5nIGZpbGUgbG9hZGluZ1xuICAgICAgICAgICAgLy8gd2UgaGF2ZSBkaXNhYmxlZCBmaWxlcyBhbmQgaW1hZ2VzIHNvIHRoaXMgc2hvdWxkbid0IGhhcHBlblxuICAgICAgICAgICAgY3VycmVudExvYWRFcnJvcj17bnVsbH1cbiAgICAgICAgICAgIGRpc21pc3NDdXJyZW50TG9hZEVycm9yPXtudWxsfVxuICAgICAgICAgICAgb25JbnNlcnRGaWxlPXtudWxsfVxuICAgICAgICAgICAgb25JbnNlcnRGaWxlRnJvbVVSTD17bnVsbH1cbiAgICAgICAgICAgIG9uUmV0cmlldmVGaWxlPXtudWxsfVxuICAgICAgICAgICAgb25SZXRyaWV2ZUltYWdlPXtudWxsfVxuICAgICAgICAgICAgc3VwcG9ydGVkSW1hZ2VUeXBlcz17bnVsbH1cblxuICAgICAgICAgICAgLy8gdGhpcyB2YWxpZGl0eSBpcyBkb25lIHZpYSBhbm90aGVyIGNyaXRlcmlhXG4gICAgICAgICAgICAvLyBvZiB5b3VyIGNob29zaW5nXG4gICAgICAgICAgICBjdXJyZW50VmFsaWQ9e3RydWV9XG4gICAgICAgICAgICB0cmVlVmFsdWU9e3RyZWVWYWx1ZX1cbiAgICAgICAgICAgIHZhbHVlPXtodG1sVmFsdWV9XG5cbiAgICAgICAgICAgIC8vIHdlIGZlZWQgaXQgdGhlIHNhbWUgZmVhdHVyZSBzdXBwb3J0IHdlIHVzZWRcbiAgICAgICAgICAgIGZlYXR1cmVzPXtmZWF0dXJlU3VwcG9ydEJhc2ljfVxuICAgICAgICAgICAgaXNSaWNoVGV4dD17dGV4dFRyZWUxLnJpY2h9XG4gICAgICAgICAgICAvLyB0aGUgZ2l2ZW4gbGFuZ3VhZ2VcbiAgICAgICAgICAgIGxhbmc9XCJlblwiXG5cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIHRleHRUcmVlVmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgc2V0SHRtbFZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgICAgc2V0VHJlZVZhbHVlKHRleHRUcmVlVmFsdWUpO1xuICAgICAgICAgICAgfX1cblxuICAgICAgICAgICAgLy8gdGhpcyBpcyB1c2VkIHRvIGRlZmluZSBhIHJvb3QgY29udGV4dFxuICAgICAgICAgICAgLy8gdXNlZCBmb3IgdGVtcGxhdGluZywgdG8gZGV0ZXJtaW5lXG4gICAgICAgICAgICAvLyB0aGUgc2hhcGUgb2YgdGhlIGNvbnRleHQgdGhhdCB3aWxsIGJlIGZlZWRcbiAgICAgICAgICAgIHJvb3RDb250ZXh0PXtudWxsfVxuXG4gICAgICAgICAgICAvLyBUaGUgd3JhcHBlciB3cmFwcyB0aGUgZWRpdG9yIGFuZCBicmluZ3MgZXh0cmEgZnVuY3Rpb25hbGl0eVxuICAgICAgICAgICAgLy8gdGhlIGRlZmF1bHQgd3JhcHBlciBicmluZ3MgYSB0b29sYmFyIGFuZCBhIGNvbmZpZyBkcmF3ZXJcbiAgICAgICAgICAgIC8vIHdoaWNoIGlzIGhpZ2hseSBjdXN0b21pemFibGUsXG4gICAgICAgICAgICAvLyB0aGUgY29uZmlndXJhdGlvbiBpcyBkb25lIHZpYSB3cmFwcGVyQXJncyBwcm9wXG4gICAgICAgICAgICAvLyBhbmQgaXMgcGFzc2VkIGFzIHByb3BzIHRvIHRoZSBkZWZhdWx0IHdyYXBwZXJcbiAgICAgICAgICAgIC8vIHNhZGx5IHRoZXNlIHByb3BzIGFyZSBhcmJpdHJhcnkgYW5kIGFzIGEgcmVzdWx0XG4gICAgICAgICAgICAvLyB0aGVyZSdzIG5vIHR5cGVzY3JpcHQgYXV0b2NvbXBsZXRpdGlvbiwgYXMgYW55b25lIGNhbiB3cml0ZSBhIHdyYXBwZXJcbiAgICAgICAgICAgIC8vIHRoZSBkZWZhdWx0IGlzbid0IHByZXR0eSBhdCBhbGwsIGFuZCB5b3Ugc2hvdWxkIHRyeSB0byBjb25maWd1cmUgaXQgdG8gaGF2ZSB0aGUgc2FtZVxuICAgICAgICAgICAgLy8gbG9vayBhbmQgZmVlbCBhcyB5b3VyIGFwcCwgaW4gaXRlbWl6ZSBmYXN0IHByb3RvdHlwaW5nIGl0IGlzIHJlY29uZmlndXJlZCB0byB1c2UgbWF0ZXJpYWwgVUlcbiAgICAgICAgICAgIFdyYXBwZXI9e0RlZmF1bHRTbGF0ZVdyYXBwZXJ9XG4gICAgICAgICAgICAvLyBub3RlIGhvdyB3ZSBjaGFuZ2VkIHRoaXMgdG8gdXNlIHRoZSBvbmUgdGhhdCBoYXMgbW9yZSBkZXRhaWxzXG4gICAgICAgICAgICAvLyB3aGljaCBhcmUgbmVjZXNzYXJ5IGZvciB0aGUgd3JhcHBlciB0byBmdW5jdGlvblxuICAgICAgICAgICAgYmFzZUkxOG49e2RlZmF1bHRXcmFwcGVySTE4blJpY2hJbmZvRW5nbGlzaH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc2VjdGlvbj5cblxuICAgICAgPHNlY3Rpb24+XG4gICAgICAgIDxjb2RlPntodG1sVmFsdWV9PC9jb2RlPlxuICAgICAgICA8Y29kZT57SlNPTi5zdHJpbmdpZnkodHJlZVZhbHVlLCBudWxsLCAyKX08L2NvZGU+XG4gICAgICA8L3NlY3Rpb24+XG4gICAgPC9kaXYgPlxuICApO1xufVxuXG5SZWFjdERPTS5yZW5kZXIoPEV4YW1wbGUgLz4sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXBwXCIpKTsiLCAiLyoqXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIHNsYXRlIGVsZW1lbnQsIHRoZSBzbGF0ZSBlbGVtZW50IGlzIHVzZWQgdG8gY3JlYXRlXG4gKiByaWNoIHRleHQgZWRpdG9ycyBhbmQgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoIHRoZSBQcm9wZXJ0eUVudHJ5VGV4dCB0eXBlXG4gKiBldmVuIGlmIGl0IGNhbiBhbHNvIGJlIHVzZWQgaW4gYSBzdGFuZGFsb25lIHdheVxuICogXG4gKiBAbW9kdWxlXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IGVxdWFscyBmcm9tIFwiZGVlcC1lcXVhbFwiO1xuaW1wb3J0IHsgQmFzZUVkaXRvciwgY3JlYXRlRWRpdG9yLCBUcmFuc2Zvcm1zLCBSYW5nZSwgRWRpdG9yLCBFbGVtZW50LCBOb2RlLCBQYXRoLCBUZXh0LCBOb2RlRW50cnksIFBvaW50IH0gZnJvbSBcInNsYXRlXCI7XG5pbXBvcnQgeyBTbGF0ZSwgRWRpdGFibGUsIHdpdGhSZWFjdCwgUmVhY3RFZGl0b3IsIFJlbmRlckVsZW1lbnRQcm9wcywgUmVuZGVyTGVhZlByb3BzIH0gZnJvbSBcInNsYXRlLXJlYWN0XCI7XG5pbXBvcnQgeyB3aXRoSGlzdG9yeSwgSGlzdG9yeUVkaXRvciB9IGZyb20gXCJzbGF0ZS1oaXN0b3J5XCI7XG5pbXBvcnQge1xuICBJUm9vdExldmVsRG9jdW1lbnQsIGRlc2VyaWFsaXplLCBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLCBSaWNoRWxlbWVudCwgZGVzZXJpYWxpemVQbGFpbixcbiAgZ2V0Q29udGV4dEZvciwgbm9ybWFsaXplRWxlbWVudCwgZ2V0QWxsb3dlZENoaWxkcmVuVHlwZXMsIGdldFVJSGFuZGxlclZhbHVlV2l0aEtub3duQ29udGV4dEZvciwgaXNJbmxpbmUsIGlzVm9pZCwgaXNTdXBlckJsb2NrLCBpc0Jsb2NrLCBnZXRVVUlERm9yLFxuICBzZXJpYWxpemUsIHNlcmlhbGl6ZVN0cmluZyxcbn0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXJcIjtcbmltcG9ydCB7IGNvbnZlcnRTdHlsZVN0cmluZ1RvUmVhY3RPYmplY3QsIElVSUhhbmRsZXJQcm9wcyB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL2Jhc2VcIjtcbmltcG9ydCB7IElWaWRlbyB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL3ZpZGVvXCI7XG5pbXBvcnQgcHJldHR5Qnl0ZXMgZnJvbSBcInByZXR0eS1ieXRlc1wiO1xuaW1wb3J0IHsgSUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL2NvbnRhaW5lclwiO1xuaW1wb3J0IHsgSUZpbGUgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9maWxlXCI7XG5pbXBvcnQgeyBJSW1hZ2UgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9pbWFnZVwiO1xuaW1wb3J0IHsgSVRleHQsIFNUQU5EQVJEX1RFWFRfTk9ERSB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL3RleHRcIjtcbmltcG9ydCB7IElDdXN0b20gfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9jdXN0b21cIjtcbmltcG9ydCB7IElJbmxpbmUgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9pbmxpbmVcIjtcbmltcG9ydCB7IEN1cnJlbnRFbGVtZW50UHJvdmlkZXIsIEN1cnJlbnRFbGVtZW50UmV0cmlldmVyIH0gZnJvbSBcIi4vY3VycmVudC1lbGVtZW50XCI7XG5pbXBvcnQgeyBJVm9pZEJsb2NrIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvdm9pZC1ibG9ja1wiO1xuaW1wb3J0IHsgSUxpc3QgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9saXN0XCI7XG5pbXBvcnQgeyBTVEFOREFSRF9QQVJBR1JBUEggfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9wYXJhZ3JhcGhcIjtcbmltcG9ydCB7IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uLCBJVGVtcGxhdGVBcmdIVE1MRGVmaW5pdGlvbiwgSVRlbXBsYXRlQXJnVGV4dERlZmluaXRpb24sIElUZW1wbGF0ZUFyZ1VJSGFuZGxlckRlZmluaXRpb24gfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90ZW1wbGF0ZS1hcmdzXCI7XG5pbXBvcnQgeyBJTGluayB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL2xpbmtcIjtcbmltcG9ydCB7IElUYWJsZSwgSVRib2R5LCBJVGQsIElUZm9vdCwgSVRyIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvdGFibGVcIjtcbmltcG9ydCB7IENPTlRBSU5FUl9DTEFTU19QUkVGSVgsIENVU1RPTV9DTEFTU19QUkVGSVgsIElGZWF0dXJlU3VwcG9ydE9wdGlvbnMsIFJJQ0hfVEVYVF9DTEFTU19QUkVGSVgsIFRBQkxFX0NMQVNTX1BSRUZJWCB9IGZyb20gXCIuLi8uLi9zYW5pdGl6ZXJcIjtcbmltcG9ydCB7IGNvdW50U2l6ZSB9IGZyb20gXCIuLi8uLi91dGlsXCI7XG5pbXBvcnQgeyBsb2NhbGVSZXBsYWNlciwgbWltZVR5cGVUb0V4dGVuc2lvbiB9IGZyb20gXCIuLlwiO1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdEJhc2VJMThuUmljaEluZm9FbmdsaXNoOiBJQmFzZUkxOG5SaWNoVGV4dEluZm8gPSB7XG4gIGFjdGlvbnM6IFwiYWN0aW9uc1wiLFxuICBhbHQ6IFwiYWx0XCIsXG4gIGNsYXNzZXM6IFwiY2xhc3Nlc1wiLFxuICBjb250YWluZXI6IFwiY29udGFpbmVyXCIsXG4gIGNvbnRleHQ6IFwiY29udGV4dFwiLFxuICBjdXN0b206IFwiY3VzdG9tXCIsXG4gIGVhY2g6IFwibG9vcCBmb3IgZWFjaFwiLFxuICBmaWxlOiBcImZpbGVcIixcbiAgaW1hZ2U6IFwiaW1hZ2VcIixcbiAgaW5saW5lOiBcImlubGluZVwiLFxuICBpbnRlcmFjdGl2ZTogXCJpbnRlcmFjdGl2ZSB7MH1cIixcbiAgbGluazogXCJsaW5rXCIsXG4gIGxpc3Q6IFwibGlzdFwiLFxuICBsaXN0SXRlbTogXCJsaXN0IGl0ZW1cIixcbiAgbmFtZTogXCJuYW1lXCIsXG4gIHBhcmFncmFwaDogXCJwYXJhZ3JhcGhcIixcbiAgcXVvdGU6IFwicXVvdGVcIixcbiAgcmVuZGVyQ29uZGl0aW9uOiBcInJlbmRlciBjb25kaXRpb25cIixcbiAgcmljaENsYXNzZXM6IHt9LFxuICByaWNoQ29udGFpbmVyczoge30sXG4gIHJpY2hDdXN0b21zOiB7fSxcbiAgcmljaFRhYmxlczoge30sXG4gIHJpY2hVSUhhbmRsZXJFbGVtZW50OiB7fSxcbiAgc2V0dGluZ3M6IFwic2V0dGluZ3NcIixcbiAgc2l6ZXM6IFwic2l6ZXNcIixcbiAgc3RhbmRhbG9uZTogXCJzdGFuZGFsb25lXCIsXG4gIHN0eWxlOiBcInN0eWxlXCIsXG4gIHN0eWxlQWN0aXZlOiBcInN0eWxlIGFjdGl2ZVwiLFxuICBzdHlsZUhvdmVyOiBcInN0eWxlIGhvdmVyXCIsXG4gIHN0eWxlZDogXCJzdHlsZWQgezB9XCIsXG4gIHN0eWxlczogXCJzdHlsZXNcIixcbiAgdGFibGU6IFwidGFibGVcIixcbiAgdGJvZHk6IFwidGFibGUgYm9keVwiLFxuICB0ZDogXCJ0YWJsZSBjb2x1bW5cIixcbiAgdGVtcGxhdGU6IFwidGVtcGxhdGUgezB9XCIsXG4gIHRlbXBsYXRpbmc6IFwidGVtcGxhdGluZ1wiLFxuICB0ZXh0OiBcInRleHRcIixcbiAgdGZvb3Q6IFwidGFibGUgZm9vdGVyXCIsXG4gIHRoOiBcInRhYmxlIGNvbHVtblwiLFxuICB0aGVhZDogXCJ0YWJsZSBoZWFkXCIsXG4gIHRpdGxlOiBcInRpdGxlXCIsXG4gIHRyOiBcInRhYmxlIHJvd1wiLFxuICB0eXBlOiBcInR5cGVcIixcbiAgdWlIYW5kbGVyOiBcInVpIGhhbmRsZXJcIixcbiAgdmlkZW86IFwidmlkZW9cIixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQmFzZUkxOG5SaWNoVGV4dEluZm8ge1xuICBuYW1lOiBzdHJpbmc7XG4gIGFsdDogc3RyaW5nO1xuICBzaXplczogc3RyaW5nO1xuICBjb250YWluZXI6IHN0cmluZztcbiAgaW5saW5lOiBzdHJpbmc7XG4gIHRleHQ6IHN0cmluZztcbiAgY3VzdG9tOiBzdHJpbmc7XG4gIGZpbGU6IHN0cmluZztcbiAgaW1hZ2U6IHN0cmluZztcbiAgbGluazogc3RyaW5nO1xuICBsaXN0OiBzdHJpbmc7XG4gIGxpc3RJdGVtOiBzdHJpbmc7XG4gIHBhcmFncmFwaDogc3RyaW5nO1xuICBxdW90ZTogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICB0YWJsZTogc3RyaW5nO1xuICB0aGVhZDogc3RyaW5nO1xuICB0Ym9keTogc3RyaW5nO1xuICB0Zm9vdDogc3RyaW5nO1xuICB0cjogc3RyaW5nO1xuICB0ZDogc3RyaW5nO1xuICB0aDogc3RyaW5nO1xuICB2aWRlbzogc3RyaW5nO1xuICBzdHlsZWQ6IHN0cmluZztcbiAgdGVtcGxhdGU6IHN0cmluZztcbiAgaW50ZXJhY3RpdmU6IHN0cmluZztcbiAgc3R5bGU6IHN0cmluZztcbiAgc3R5bGVBY3RpdmU6IHN0cmluZztcbiAgc3R5bGVIb3Zlcjogc3RyaW5nO1xuICBjbGFzc2VzOiBzdHJpbmc7XG4gIHNldHRpbmdzOiBzdHJpbmc7XG4gIHN0eWxlczogc3RyaW5nO1xuICB0ZW1wbGF0aW5nOiBzdHJpbmc7XG4gIGFjdGlvbnM6IHN0cmluZztcbiAgZWFjaDogc3RyaW5nO1xuICBjb250ZXh0OiBzdHJpbmc7XG4gIHJlbmRlckNvbmRpdGlvbjogc3RyaW5nO1xuICB1aUhhbmRsZXI6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBzdGFuZGFsb25lOiBzdHJpbmc7XG5cbiAgcmljaFVJSGFuZGxlckVsZW1lbnQ6IHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG4gIH07XG4gIHJpY2hUYWJsZXM6IHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG4gIH07XG4gIHJpY2hDb250YWluZXJzOiB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xuICB9O1xuICByaWNoQ2xhc3Nlczoge1xuICAgIFtrZXk6IHN0cmluZ106IHN0cmluZztcbiAgfTtcbiAgcmljaEN1c3RvbXM6IHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG4gIH07XG59XG5cbmRlY2xhcmUgbW9kdWxlICdzbGF0ZScge1xuICBpbnRlcmZhY2UgQ3VzdG9tVHlwZXMge1xuICAgIEVkaXRvcjogQmFzZUVkaXRvciAmIFJlYWN0RWRpdG9yO1xuICAgIEVsZW1lbnQ6IFJpY2hFbGVtZW50O1xuICAgIFRleHQ6IElUZXh0O1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNsYXRlRmlsZSB7XG4gIC8qKlxuICogdGhlIG5hbWUgb2YgdGhlIGZpbGVcbiAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgbWltZSB0eXBlXG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBhbiB1bmlxdWUgaWRcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiB0aGUgdXJsIHdoZXJlIGl0IGlzIHN0b3JlZFxuICAgKi9cbiAgdXJsOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgc2l6ZSBvZiB0aGUgZmlsZSBpbiBieXRlc1xuICAgKi9cbiAgc2l6ZTogbnVtYmVyO1xuICAvKipcbiAgICogb3B0aW9uYWwgbWV0YWRhdGEsIG1pZ2h0IGJlIG51bGwsIHVzdWFsbHkgY29uc3RhaW5zIHdpZHRoIGFuZFxuICAgKiBoZWlnaHQsIHNldCBieSB0aGUgY2xpZW50LCBpcyBsaW1pdGVkIHRvIDEyOCBjaGFyYWN0ZXJzXG4gICAqIFxuICAgKiBlbmNvZGluZyBpcyBXeEg7bmFtZSxuYW1lLG5hbWUgYXMgbWFueSBuYW1lcyBhcyB0aGVyZSBhcmUgc3BlY2lhbFxuICAgKiBkaW1lbnNpb25zLCBsYXJnZSwgc21hbGwgYW5kIG1lZGl1bSBkbyBub3QgY291bnRcbiAgICovXG4gIG1ldGFkYXRhOiBzdHJpbmcsXG4gIC8qKlxuICAgKiBBIHNvdXJjZSwgZWl0aGVyIGEgRmlsZSBvciBCbG9iXG4gICAqL1xuICBzcmM/OiBGaWxlIHwgQmxvYjtcbn07XG5cbi8qKlxuICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIGZpbGUgdGhhdCBoYXMganVzdCBiZWVuIGluc2VydGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVNsYXRlSW5zZXJ0ZWRGaWxlSW5mb3JtYXRpb25UeXBlIHtcbiAgLyoqXG4gICAqIFRoZSBmaWxlIGl0c2VsZlxuICAgKi9cbiAgcmVzdWx0OiBJU2xhdGVGaWxlO1xuICAvKipcbiAgICogd2lkdGggb2YgdGhlIGZpbGUsIG9ubHkgYXZhaWxhYmxlIGlmIGl0J3MgYW4gaW1hZ2VcbiAgICovXG4gIHdpZHRoOiBudW1iZXI7XG4gIC8qKlxuICAgKiBoZWlnaHQgb2YgdGhlIGZpbGUsIG9ubHkgYXZhaWxhYmxlIGlmIGl0J3MgYW4gaW1hZ2VcbiAgICovXG4gIGhlaWdodDogbnVtYmVyO1xuICAvKipcbiAgICogd2hldGhlciBpdCBpcyBhbiBpbWFnZVxuICAgKi9cbiAgaXNJbWFnZTogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBVc2VkIHdpdGhpbiBjb250ZXh0cyB3aXRoIGxvb3AgZW11bGF0aW9uIHRvIGRpc2FibGUgdGhlIGVsZW1lbnQgd3JhcHBlciB0byBkaXNwbGF5IGluIGFsbFxuICogYnV0IHRoZSBsYXN0IGVsZW1lbnRcbiAqL1xuY29uc3QgRWxlbWVudFdyYXBwZXJEaXNhYmxlciA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoZmFsc2UpO1xuXG5mdW5jdGlvbiBmaW5kTGFzdEluZGV4KGFycjogYW55W10sIGZuOiAoZWxlOiBhbnkpID0+IGJvb2xlYW4pIHtcbiAgbGV0IGN1cnJlbnRJbmRleCA9IGFyci5sZW5ndGg7XG4gIHdoaWxlIChjdXJyZW50SW5kZXgtLSkge1xuICAgIGlmIChmbihhcnJbY3VycmVudEluZGV4XSkpIHtcbiAgICAgIHJldHVybiBjdXJyZW50SW5kZXg7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xO1xufVxuXG4vLyBmb3Igc29tZSByZWFzb24gZGVzcGl0ZSB0aGVyZSBiZWluZyBhIHNpbmdsZSBjbGFzcyBhbmQgd2l0aCBjZXJ0YWludHlcbi8vIHdoZW4gdGhlIGZvY3VzQXQgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgdGhlIG9uRm9jdXMgZnVuY3Rpb24gZ2V0cyBleGVjdXRlZCB3aXRoXG4vLyB0aGUgcHJldmlvdXMgdmFsdWVzIGZvciB0aGUgaW5zdGFuY2UgaW4gYSB3YXkgdGhhdCBtYWtlcyB6ZXJvIHNlbnNlXG4vLyBzb21lIG9wdGltaXphdGlvbiB0aGluZ3MgYXJlIGdvaW5nIG9uIGZyb20gdGhlIGJyb3dzZXJcbi8vIFRoaXMgb25seSBvY2N1cnMgaW4gQ2hyb21lLi4uLiBzbyBpdCBpcyByZWxhdGVkIHRvIGNocm9tZVxuLy8gbGV0IHByZXZlbnROZXh0Rm9jdXMgPSBmYWxzZTtcblxuLy8gZnVuY3Rpb24gcHJldmVudEZvY3VzKCkge1xuLy8gICBwcmV2ZW50TmV4dEZvY3VzID0gdHJ1ZTtcbi8vICAgc2V0VGltZW91dCgoKSA9PiB7XG4vLyAgICAgcHJldmVudE5leHRGb2N1cyA9IGZhbHNlO1xuLy8gICB9LCAzMDApO1xuLy8gfVxuXG4vLyBTbGF0ZSBpcyBidWdneSByZWdhcmRpbmcgc2hpZnQrdGFiXG4vLyByZW1vdmUgd2hlbiBzaGlmdCt0YWIgaXMgZml4ZWRcbmNvbnN0IEVESVRPUl9QT09MID0gbmV3IE1hcDxIVE1MRWxlbWVudCwgU2xhdGVFZGl0b3I+KCk7XG5cbi8vIGJ1Z2d5IHRvIHJlcGFpciBpdCBub3QgZm9jdXNpbmcgd2hlbiBpdCBzaG91bGQgYW5kIGtlZXBpbmcgZm9jdXMgd2hlbiBpdCBzaG91bGRuJ3Rcbi8vIGZvciBib3RoIHRhYiBhbmQgc2hpZnQgdGFiXG5mdW5jdGlvbiBvbkFueVRhYihldjogS2V5Ym9hcmRFdmVudCkge1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBjb25zdCBlZGl0b3JFbGVtZW50ID0gRURJVE9SX1BPT0wuZ2V0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgYW55KTtcbiAgICBFRElUT1JfUE9PTC5mb3JFYWNoKChlKSA9PiBlICE9PSBlZGl0b3JFbGVtZW50ICYmIGUuc2VsZWN0aXZlSGFyZEJsdXJJZkhhc1NlbGVjdGVkRWxlbWVudChldiwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ID9cbiAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgOiBudWxsKSk7XG4gICAgaWYgKGVkaXRvckVsZW1lbnQpIHtcbiAgICAgIC8vIG1heWJlIGEgd2F5IHRvIGtlZXAgdGhlIGN1cnNvciB3aGVyZSBpdCB3YXM/Li4uLlxuICAgICAgLy8gaXQncyBraW5kIG9mIGFubm95aW5nIHRoYXQgdGhlIGN1cnNvciBtb3Zlc1xuICAgICAgZWRpdG9yRWxlbWVudC5mb3JjZUZvY3VzKCk7XG4gICAgfVxuICB9LCA3MCk7XG59XG5cbi8vIHdoYXQncyB3b3JzZSBzb21ldGltZXMgaXQgcmV0YWlucyBmb2N1cyB3aGVuIGl0IHNob3VsZG4ndFxuXG5pZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIlRhYlwiKSB7XG4gICAgICBvbkFueVRhYihlKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIENvbWJpbmUgYm90aCBpbnRlcmZhY2VzXG4gKi9cbmludGVyZmFjZSBJdGVtaXplRWRpdG9yIGV4dGVuZHMgUmVhY3RFZGl0b3IsIEhpc3RvcnlFZGl0b3IgeyB9O1xuXG4vKipcbiAqIFRoZSB1aSBoYW5kbGVyIHByb3BzIHRoYXQgYW4gdWkgaGFuZGxlciB0YWtlc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElTbGF0ZVRlbXBsYXRlVUlIYW5kbGVyUHJvcHMgZXh0ZW5kcyBJVUlIYW5kbGVyUHJvcHMge1xuICAvKipcbiAgICogV2hldGhlciBpdCBpcyBjdXJyZW50bHkgaW50byBhbiBzbGF0ZSBpbnN0YW5jZVxuICAgKi9cbiAgaXNTbGF0ZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSBhdHRyaWJ1dGVzIHRoYXQgc2xhdGUgcHJvdmlkZXNcbiAgICovXG4gIGF0dHJpYnV0ZXM6IGFueTtcbiAgLyoqXG4gICAqIFRoZSBoZWxwZXJzIHRoYXQgbWlnaHQgYmUgcHJvdmlkZWQgaWYgdGhlIGhhbmRsZXJcbiAgICogcmVxdWVzdHMgZXh0cmEgaW5mb1xuICAgKi9cbiAgaGVscGVycz86IElIZWxwZXJGdW5jdGlvbnM7XG4gIC8qKlxuICAgKiBUaGUgc2VsZWN0ZWQgc3RhdGUgdGhhdCBtaWdodCBiZSBwcm92aWRlZCBpZiB0aGUgaGFuZGxlclxuICAgKiByZXF1ZXN0cyBleHRyYSBpbmZvXG4gICAqL1xuICBzZWxlY3RlZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhbiBhdmFpbGFibGUgZWxlbWVudCwgdXNlZCBpbnRlcm5hbGx5XG4gKiBmb3IgdGhlIGNsYXNzZXMgdGhhdCBhcmUgYXZhaWxhYmxlIGZvciB1c2FnZSBvbiByaWNoXG4gKiBjbGFzc2VzLCBjb250YWluZXIsIGFuZCBzbyBvbi4uLlxuICovXG5pbnRlcmZhY2UgSUF2YWlsYWJsZUVsZW1lbnRDU1NDbGFzc05hbWUge1xuICAvKipcbiAgICogVGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBhdmFpbGFibGUgZWxlbWVudFxuICAgKi9cbiAgdmFsdWU6IHN0cmluZztcbiAgLyoqXG4gICAqIEEgaHVtYW4gcmVhZGFibGUgdmFsdWUsIGV4dHJhY3RlZCBmcm9tIHRoZSByb290XG4gICAqIGkxOG4gZGF0YSB3aXRoIHRoZSBzYW1lIGNsYXNzIG5hbWVcbiAgICogZm9yIHRoZSBnaXZlbiBjdXJyZW50IGxhbmd1YWdlLCBpdCBpcyB1c3VhbGx5IHN1YmNsYXNzZWRcbiAgICogaW50byBzZXZlcmFsIHN1YmNvbnRhaW5lcnMgaW4gdGhlIHJvb3QgaW5mb3JtYXRpb24gZ2l2ZW5cbiAgICogXG4gICAqIHJpY2g6IGZvciByaWNoIHRleHQgY2xhc3Nlc1xuICAgKiBjb250YWluZXJzOiBmb3IgY29udGFpbmVyc1xuICAgKiBjdXN0b206IGZvciBjdXN0b21cbiAgICogXG4gICAqIGVnLiBjb250YWluZXItbWF4aW11bSBhcyBhIGNsYXNzIG5hbWUsIGlzIHJlZmVycmVkIGFzXG4gICAqIG1heGltdW0gYXMgdGhlIGNvbnRhbmVyIHR5cGUsIHNvIGl0IHdpbGwgbG9vayBmb3IgY29udGFpbmVycy5tYXhpbXVtXG4gICAqIGluIHRoZSBwcm9wZXJ0aWVzIGZpbGUgb24gdGhlIGdpdmVuIGxhbmd1YWdlIGZvciBhIGdpdmVuIGxhYmVsXG4gICAqIFxuICAgKiBlZy4gcmljaC10ZXh0LS11bHRyYS1tZWdhLWJvbGQgaXMgcmVmZXJyZWQgYXMgdGhlIHVsdHJhLW1lZ2EtYm9sZFxuICAgKiByaWNoIGNsYXNzLCBzbyBpdCB3aWxsIGxvb2sgZm9yIHJpY2gudWx0cmEtbWVnYS1ib2xkIG9yIHJpY2gudWx0cmFfbWVnYV9ib2xkXG4gICAqIGluIHRoZSBwcm9wZXJ0aWVzIGZpbGVcbiAgICovXG4gIGxhYmVsOiBzdHJpbmc7XG59XG5cbi8vIFdlIG5lZWQgdG8gZmluZCBhbGwgdGhlIGNvbnRhaW5lcnMsIGN1c3RvbSBjbGFzc2VzIGFuZCByaWNoIGNsYXNzZXNcbi8vIHdlIGhhdmUgYXZhaWxhYmxlIGJ5IGRlZmF1bHQgYW5kIHRoYXQgY2FuIGJlIHVzZWQgaW5zaWRlIHRoZSBpdGVtaXplXG4vLyBhcHBsaWNhdGlvbiwgc28gd2UgdXNlIHRoZXNlIGhlbHBlciB2YXJpYWJsZXNcbi8vIHRoYXQgZXhpc3RzIG9ubHkgaGVyZSBpbnNpZGUgdGhpcyBtb2R1bGVcblxuLyoqXG4gKiBBbGwgdGhlIGNvbnRhaW5lcnMgdGhhdCB3ZSBjb3VsZCBmaW5kIHNvIGZhclxuICogQGlnbm9yZVxuICovXG5sZXQgQUxMX0NPTlRBSU5FUlM6IHN0cmluZ1tdID0gW107XG4vKipcbiAqIEFsbCB0aGUgdGFibGVzIHRoYXQgd2UgY291bGQgZmluZCBzbyBmYXJcbiAqIEBpZ25vcmVcbiAqL1xubGV0IEFMTF9UQUJMRVM6IHN0cmluZ1tdID0gW107XG4vKipcbiAqIEFsbCB0aGUgY3VzdG9tIGNsYXNzZXMgdGhhdCB3ZSBjb3VsZCBmaW5kIHNvIGZhclxuICogQGlnbm9yZVxuICovXG5sZXQgQUxMX0NVU1RPTTogc3RyaW5nW10gPSBbXTtcbi8qKlxuICogQWxsIHRoZSByaWNoIGNsYXNzZXMgdGhhdCB3ZSBjb3VsZCBmaW5kIHNvIGZhclxuICogQGlnbm9yZVxuICovXG5sZXQgQUxMX1JJQ0hfQ0xBU1NFUzogc3RyaW5nW10gPSBbXTtcbi8qKlxuICogV2hldGhlciB3ZSBoYXZlIGxvYWRlZCBhbGwgdGhlc2UgdmFyaWFibGVzXG4gKiBAaWdub3JlXG4gKi9cbmxldCBBTExfSVNfTE9BREVEOiBib29sZWFuID0gZmFsc2U7XG5cbi8qKlxuICogV2l0aCBhIGdpdmVuIHN0eWxlc2hlZXQgdGhhdCBpcyBwYXNzZWQgaW5zaWRlIHRoZSBzdHlsZXNoZWV0IHZhcmlhYmxlXG4gKiBzZXQsIGl0IHdpbGwgdXNlIGl0IHRvIGZpbmQgdGhlIGdpdmVuIGNsYXNzIG5hbWVzIHRoYXQgYXJlIGF2YWlsYWJsZVxuICogZm9yIHVzYWdlIHdpdGhpbiB0aGUgcmljaCB0ZXh0IGVkaXRvciBhbmQgYWRkIGl0IHRvIHRoZSByZWdpc3RyeVxuICogQHBhcmFtIHN0eWxlc2hlZXQgdGhlIHN0eWxlc2hlZXQgdG8gY2FsY3VsYXRlXG4gKiBAaWdub3JlXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZVN0eWxlc2hlZXQoc3R5bGVzaGVldDogQ1NTU3R5bGVTaGVldCB8IENTU01lZGlhUnVsZSkge1xuICAvLyBzbyBmaXJzdCB3ZSBzcGxpdCB3aXRoaW4gdGhlIHJ1bGVzXG4gIEFycmF5LmZyb20oc3R5bGVzaGVldC5jc3NSdWxlcykuZm9yRWFjaCgocikgPT4ge1xuICAgIGlmIChyIGluc3RhbmNlb2YgQ1NTTWVkaWFSdWxlIHx8IChyIGFzIGFueSkuY3NzUnVsZXMpIHtcbiAgICAgIGNhbGN1bGF0ZVN0eWxlc2hlZXQociBhcyBDU1NNZWRpYVJ1bGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFuZCBub3cgd2UgbmVlZCB0aGUgc2VsZWN0b3IgcGFydCB0aGF0IHNlbGVjdHMsIGFuZCBzcGxpdCBpdCBzbyB3ZSBoYXZlXG4gICAgLy8gc29tZXRoaW5nIGxpa2UgW1wiLnRydXN0ZWRcIiwgXCIucmljaC10ZXh0LS1zb21ldGhpbmdcIl1cbiAgICAvLyBzZWxlY3RvclRleHQgaXMgc3VwcG9ydGVkIGluIGNocm9taXVtIGJhc2VkIGJyb3dzZXJzIGJ1dCBub3QgYWxsLCBzbyB3ZSBoYXZlIGEgbW9yZSBleHBlbnNpdmVcbiAgICAvLyBmYWxsYmFjayBpbiBwbGFjZSBmb3IgdGhhdFxuICAgIGNvbnN0IHNlbGVjdG9yU3BsaXR0ZWQgPSAoKHIgYXMgYW55KS5zZWxlY3RvclRleHQgYXMgc3RyaW5nIHx8IHIuY3NzVGV4dC5zcGxpdChcIntcIilbMF0udHJpbSgpKS5zcGxpdChcIiBcIik7XG5cbiAgICAvLyBub3cgd2UgdGFrZSB0aGF0IHNlbGVjdGlvbiwgd2UgYXJlIG9ubHkgY29uY2VybmVkIHdpdGggdGhlIGNsYXNzZXNcbiAgICAvLyB0aGF0IG1hdGNoIG91ciBwcmVmaXhlZCB0aGluZ3NcbiAgICBzZWxlY3RvclNwbGl0dGVkLmZvckVhY2goKHNiYXNlKSA9PiB7XG4gICAgICBsZXQgaW50ZXJuYWxTZWxlY3RvclNwbGl0dGVkID0gc2Jhc2Uuc3BsaXQoXCIuXCIpO1xuICAgICAgaW50ZXJuYWxTZWxlY3RvclNwbGl0dGVkLnNoaWZ0KCk7XG5cbiAgICAgIGludGVybmFsU2VsZWN0b3JTcGxpdHRlZC5mb3JFYWNoKChzKSA9PiB7XG4gICAgICAgIC8vIG5vdyB3ZSB0YWtlIHRoZSBjbGFzcyBuYW1lXG4gICAgICAgIGxldCBjbGFzc05hbWUgPSBzO1xuICAgICAgICBpZiAoY2xhc3NOYW1lLmluY2x1ZGVzKFwiOlwiKSkge1xuICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zcGxpdChcIjpcIilbMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsYXNzTmFtZS5lbmRzV2l0aChcIixcIikpIHtcbiAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3Vic3RyKDAsIGNsYXNzTmFtZS5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFuZCB3ZSBjaGVjayB3aGV0aGVyIGl0IG1hdGNoZXMgYW55IG9mIG91ciBwcmVmaXhlcyB0aGF0XG4gICAgICAgIC8vIG1ha2UgaXQgYSB2YWxpZCBjbGFzcyBvZiB0aGUgZ2l2ZW4gdHlwZVxuICAgICAgICBpZiAoY2xhc3NOYW1lLnN0YXJ0c1dpdGgoQ09OVEFJTkVSX0NMQVNTX1BSRUZJWCkpIHtcbiAgICAgICAgICBjb25zdCB0b1B1c2ggPSBjbGFzc05hbWUuc3Vic3RyKENPTlRBSU5FUl9DTEFTU19QUkVGSVgubGVuZ3RoKTtcbiAgICAgICAgICBpZiAoIUFMTF9DT05UQUlORVJTLmluY2x1ZGVzKHRvUHVzaCkpIHtcbiAgICAgICAgICAgIEFMTF9DT05UQUlORVJTLnB1c2godG9QdXNoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lLnN0YXJ0c1dpdGgoVEFCTEVfQ0xBU1NfUFJFRklYKSkge1xuICAgICAgICAgIGNvbnN0IHRvUHVzaCA9IGNsYXNzTmFtZS5zdWJzdHIoVEFCTEVfQ0xBU1NfUFJFRklYLmxlbmd0aCk7XG4gICAgICAgICAgaWYgKCFBTExfVEFCTEVTLmluY2x1ZGVzKHRvUHVzaCkpIHtcbiAgICAgICAgICAgIEFMTF9UQUJMRVMucHVzaCh0b1B1c2gpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChjbGFzc05hbWUuc3RhcnRzV2l0aChDVVNUT01fQ0xBU1NfUFJFRklYKSkge1xuICAgICAgICAgIGNvbnN0IHRvUHVzaCA9IGNsYXNzTmFtZS5zdWJzdHIoQ1VTVE9NX0NMQVNTX1BSRUZJWC5sZW5ndGgpO1xuICAgICAgICAgIGlmICghQUxMX0NVU1RPTS5pbmNsdWRlcyh0b1B1c2gpKSB7XG4gICAgICAgICAgICBBTExfQ1VTVE9NLnB1c2godG9QdXNoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lLnN0YXJ0c1dpdGgoUklDSF9URVhUX0NMQVNTX1BSRUZJWCkpIHtcbiAgICAgICAgICBjb25zdCB0b1B1c2ggPSBjbGFzc05hbWUuc3Vic3RyKFJJQ0hfVEVYVF9DTEFTU19QUkVGSVgubGVuZ3RoKTtcbiAgICAgICAgICBpZiAoIUFMTF9SSUNIX0NMQVNTRVMuaW5jbHVkZXModG9QdXNoKSkge1xuICAgICAgICAgICAgQUxMX1JJQ0hfQ0xBU1NFUy5wdXNoKHRvUHVzaCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogd2UgYXJlIGdvaW5nIHRvIGJ1aWxkIGEgcHJvbWlzZVxuICogZm9yIHJldHJpZXZpbmcgdGhlIGF2YWlsYWJsZSBjbGFzc2VzIGZvciB0aGUgcmljaFxuICogdGV4dCBlZGl0b3JcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgQUxMX1BST01JU0UgPSBuZXcgUHJvbWlzZTx2b2lkPihhc3luYyAocmVzb2x2ZSkgPT4ge1xuICAvLyBpZiB3ZSBhcmUgYWxyZWFkeSBsb2FkZWQgdGhlbiB3ZSBhcmUgZG9uZVxuICBpZiAoQUxMX0lTX0xPQURFRCkge1xuICAgIHJlc29sdmUoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNvbnN0IHN0eWxlc2hlZXRIcmVmUHJlZml4ID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0ICsgXCIvcmVzdC9yZXNvdXJjZS9idWlsZFwiO1xuICAgIC8vIG5vdyB3ZSBnb3QgdG8gc2VlIGlmIGJ5IHRoZSB0aW1lIHRoaXMgcHJvbWlzZSBpcyBydW5uaW5nXG4gICAgLy8gaXQgaXMgYWxyZWFkeSBkb25lIGxvYWRpbmdcbiAgICBjb25zdCBmb3VuZFByZWxvYWRlZFN0eWxlc2hlZXQgPVxuICAgICAgZG9jdW1lbnQuc3R5bGVTaGVldHMgJiYgQXJyYXkuZnJvbShkb2N1bWVudC5zdHlsZVNoZWV0cykuZmluZCgocykgPT4gcy5ocmVmICYmIHMuaHJlZi5zdGFydHNXaXRoKHN0eWxlc2hlZXRIcmVmUHJlZml4KSk7XG5cbiAgICAvLyBpZiB3ZSBmaW5kIGl0IGFuZCB1c2UgaXQgdG8gY2FsY3VsYXRlIGl0XG4gICAgaWYgKGZvdW5kUHJlbG9hZGVkU3R5bGVzaGVldCkge1xuICAgICAgQUxMX0lTX0xPQURFRCA9IHRydWU7XG4gICAgICBjYWxjdWxhdGVTdHlsZXNoZWV0KGZvdW5kUHJlbG9hZGVkU3R5bGVzaGVldCk7XG4gICAgICByZXNvbHZlKCk7XG5cbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBsaW5rIHRvIGxvYWRcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYWxsTGlua3MgPSBkb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaW5rXCIpO1xuICAgICAgY29uc3QgZm91bmRTdHlsZXNoZWV0Tm9kZSA9IEFycmF5LmZyb20oYWxsTGlua3MpLmZpbmQoKHMpID0+IHMuaHJlZi5zdGFydHNXaXRoKHN0eWxlc2hlZXRIcmVmUHJlZml4KSk7XG5cbiAgICAgIC8vIGlmIHdlIGRvbid0IGZpbmQgYSBiYXNlIGNzcyBidWlsZCwgdGhlbiB3ZSBtYXJrIGl0IGFzIGRvbmVcbiAgICAgIGlmICghZm91bmRTdHlsZXNoZWV0Tm9kZSkge1xuICAgICAgICBBTExfSVNfTE9BREVEID0gdHJ1ZTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIHNldCB1cCBhIG9ubG9hZCBjYWxsYmFja1xuICAgICAgICBmb3VuZFN0eWxlc2hlZXROb2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgICAgICAgICAvLyBhbmQgb25jZSB3ZSBhcmUgbG9hZGVkIHdlIHdhbnQgdG8gZ3JhYiB0aGUgY3NzIHN0eWxlc2hlZXRcbiAgICAgICAgICBjb25zdCBmb3VuZExvYWRlZFN0eWxlU2hlZXQgPVxuICAgICAgICAgICAgZG9jdW1lbnQuc3R5bGVTaGVldHMgJiZcbiAgICAgICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQuc3R5bGVTaGVldHMpLmZpbmQoKHMpID0+IHMuaHJlZiAmJiBzLmhyZWYuc3RhcnRzV2l0aChzdHlsZXNoZWV0SHJlZlByZWZpeCkpO1xuICAgICAgICAgIC8vIG1hcmsgaXQgYXMgbG9hZGVkXG4gICAgICAgICAgQUxMX0lTX0xPQURFRCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBwcm9jZXNzIGl0XG4gICAgICAgICAgaWYgKGZvdW5kTG9hZGVkU3R5bGVTaGVldCkge1xuICAgICAgICAgICAgY2FsY3VsYXRlU3R5bGVzaGVldChmb3VuZExvYWRlZFN0eWxlU2hlZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBhbmQgcmVzb2x2ZVxuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGV4dGVuZGVkIHNldCBvZiB0aGUgZmVhdHVyZXMgdGhhdCB0aGUgZWRpdG9yIHN1cHBvcnRzXG4gKiB3aXRoIGEgbG90IG1vcmUgb2YgY29udGV4dHVhbCBpbmZvcm1hdGlvbiBvbiB3aGF0IGl0IGhhcyBpbiBwbGFjZVxuICogZm9yIHN1Y2hcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQWNjZXNzaWJsZUZlYXR1cmVTdXBwb3J0T3B0aW9ucyBleHRlbmRzIElGZWF0dXJlU3VwcG9ydE9wdGlvbnMge1xuICAvKipcbiAgICogVGhlIGNsYXNzZXMgdGhhdCBhcmUgYXZhaWxhYmxlIGJ5IHRoZSByaWNoIHRleHRcbiAgICogbm9uIHByZWZpeGVkXG4gICAqL1xuICBhdmFpbGFibGVSaWNoQ2xhc3NlczogSUF2YWlsYWJsZUVsZW1lbnRDU1NDbGFzc05hbWVbXTtcbiAgLyoqXG4gICAqIFRoZSBjdXN0b21zIHRoYXQgYXJlIGF2YWlsYWJsZVxuICAgKi9cbiAgYXZhaWxhYmxlQ3VzdG9tczogSUF2YWlsYWJsZUVsZW1lbnRDU1NDbGFzc05hbWVbXTtcbiAgLyoqXG4gICAqIFRoZSBjbGFzc2VzIHRoYXQgYXJlIGF2YWlsYWJsZSBmb3IgdGhlIGNvbnRhaW5lcnNcbiAgICovXG4gIGF2YWlsYWJsZUNvbnRhaW5lcnM6IElBdmFpbGFibGVFbGVtZW50Q1NTQ2xhc3NOYW1lW107XG4gIC8qKlxuICAgKiBUaGUgY2xhc3NlcyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHRoZSBjb250YWluZXJzXG4gICAqL1xuICBhdmFpbGFibGVUYWJsZXM6IElBdmFpbGFibGVFbGVtZW50Q1NTQ2xhc3NOYW1lW107XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGJ1bmNoIG9mIGhlbHBlcnMgdGhhdCB3aWxsIGhlbHAgb3V0IGJ1aWxkaW5nXG4gKiB0aGluZ3MgbGlrZSB0b29sYmFycyBvciBhbnl0aGluZyBlbHNlIChha2EuIHRoZSB3cmFwcGVyKVxuICogYXJvdW5kIHRoZSBlZGl0b3JcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJSGVscGVyRnVuY3Rpb25zIHtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIGVkaXRvciBpbnN0YW5jZSBvZiB0aGUgZ2l2ZW5cbiAgICogZWRpdG9yXG4gICAqL1xuICBlZGl0b3I6IEl0ZW1pemVFZGl0b3I7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSByZWFjdCBlZGl0b3IgY2xhc3MgaXRzZWxmXG4gICAqIHByb3ZpZGVkIGJ5IHNsYXRlXG4gICAqL1xuICBSZWFjdEVkaXRvcjogdHlwZW9mIFJlYWN0RWRpdG9yO1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgaGlzdG9yeSBlZGl0b3IgY2xhc3MgaXRzZWxmXG4gICAqIHByb3ZpZGVkIGJ5IHNsYXRlXG4gICAqL1xuICBIaXN0b3J5RWRpdG9yOiB0eXBlb2YgSGlzdG9yeUVkaXRvcjtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHRyYW5zZm9ybXMgY2xhc3MgaXRzZWxmXG4gICAqIHByb3ZpZGVkIGJ5IHNsYXRlXG4gICAqL1xuICBUcmFuc2Zvcm1zOiB0eXBlb2YgVHJhbnNmb3JtcztcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHJhbmdlIGNsYXNzIGl0c2VsZlxuICAgKiBwcm92aWRlZCBieSBzbGF0ZVxuICAgKi9cbiAgUmFuZ2U6IHR5cGVvZiBSYW5nZTtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIG5vZGUgY2xhc3MgaXRzZWxmXG4gICAqL1xuICBOb2RlOiB0eXBlb2YgTm9kZTtcbiAgLyoqXG4gICAqIFRoZSBwYXRoIHR5cGVcbiAgICovXG4gIFBhdGg6IHR5cGVvZiBQYXRoO1xuXG4gIC8qKlxuICAgKiBQcm92aWVzIHRoZSBjb250ZXh0IGZvciB0aGUgZ2l2ZW4gcGF0aFxuICAgKi9cbiAgZ2V0Q29udGV4dEZvcjogKGVsZW1lbnQ6IFJpY2hFbGVtZW50IHwgSVRleHQgfCBQYXRoLCBsZXZlbD86IFwiZmluYWxcIiB8IFwic2VsZWN0LWNvbnRleHRcIiB8IFwic2VsZWN0LWxvb3BcIiwgb25seVN3aWNoaW5nQ29udGV4dD86IGJvb2xlYW4pID0+IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uO1xuICBnZXRSb290Q29udGV4dDogKCkgPT4gSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb247XG4gIGdldFN0YXRlOiAoKSA9PiBJU2xhdGVFZGl0b3JJbnRlcm5hbFN0YXRlVHlwZTtcblxuICAvKipcbiAgICogcGVyZm9ybXMgYSBwc2V1ZG8gc2VsZWN0aW9uIGF0IGEgZ2l2ZW4gcGF0aFxuICAgKiB0aGlzIHNlbGVjdGlvbiBpcyBzaWxlbnQgYW5kIGRvZXMgbm90IGFmZmVjdCBvdGhlciB0aGFuIHRoZSBjdXJyZW50XG4gICAqIHNlbGVjdGVkIHBhdGggYmFzZWQgb24gdGhlIGluZm9ybWF0aW9uLCBpdCBkb2VzIG5vdCBjYXVzZSBhIGNhcmV0XG4gICAqIGNoYW5nZSBvciBhbnl0aGluZyBvZiB0aGUgc29ydHNcbiAgICogQHBhcmFtIHBhdGggdGhlIHBhdGggdG8gc2VsZWN0XG4gICAqL1xuICBzZWxlY3RQYXRoOiAocGF0aDogUGF0aCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogU3dpdGNoZXMgYSBwYXRoIGZyb20gb25lIHBsYWNlIHRvIGFub3RoZXJcbiAgICovXG4gIG1vdmVQYXRoczogKGZyb206IFBhdGgsIHRvOiBQYXRoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBEZWxldGVzIGdpdmVuIGEgcGF0aFxuICAgKi9cbiAgZGVsZXRlUGF0aDogKHBhdGg6IFBhdGgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgdGhlIG5vZGUgYXQgdGhlIHNlbGVjdGVkIHBhdGhcbiAgICovXG4gIGRlbGV0ZVNlbGVjdGVkTm9kZTogKCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogQWxsb3dzIHRvIGtubyB3aGF0IHRoZSBwcmV2aW91cyBzZWxlY3RlZCBlbGVtZW50IHdhc1xuICAgKiBiZWZvcmUgdGhpcyBvbmUgd2FzIHNlbGVjdGVkXG4gICAqL1xuICBnZXRQcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcjogKCkgPT4gUGF0aDtcbiAgLyoqXG4gICAqIEFsbG93cyB0byBrbm8gd2hhdCB0aGUgcHJldmlvdXMgc2VsZWN0ZWQgZWxlbWVudCB3YXNcbiAgICogYmVmb3JlIHRoaXMgb25lIHdhcyBzZWxlY3RlZFxuICAgKi9cbiAgZ2V0UHJldmlvdXNUZXh0QW5jaG9yOiAoKSA9PiBQYXRoO1xuXG4gIC8qKlxuICAgKiBmb2N1c2VzIHRoZSB0ZXh0IGVkaXRvclxuICAgKi9cbiAgZm9jdXM6ICgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBGb2N1c2VzIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uXG4gICAqIEBwYXJhbSBhdCB0aGUgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqL1xuICBmb2N1c0F0OiAoYXQ6IFJhbmdlIHwgUGF0aCkgPT4gUHJvbWlzZTx2b2lkPjtcblxuICAvKipcbiAgICogaW5zZXJ0cyBhIHN1cGVyIGJyZWFrIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiBpbiBvcmRlclxuICAgKiB0byBhZGQgYSBwYXJhZ3JhcGhcbiAgICovXG4gIGluc2VydFN1cGVyYnJlYWs6IChhdD86IFBhdGgsIHJldmVyc2U/OiBib29sZWFuKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBXaWxsIGluc2VydCBhbiBpbWFnZSBiYXNlZCBvbiBhIGdpdmVuIGZpbGUgdGhhdCBoYXNcbiAgICogYmVlbiB0YWtlbiBhcyBhbiBpbnB1dFxuICAgKiBAcGFyYW0gZmlsZSB0aGUgZmlsZVxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqIEBwYXJhbSBzdGFuZGFsb25lIHdoZXRoZXIgdG8gbWFrZSBpdCBhIHN0YW5kYWxvbmUgaW1hZ2VcbiAgICovXG4gIGluc2VydEltYWdlOiAoZmlsZTogRmlsZSwgc3RhbmRhbG9uZTogYm9vbGVhbikgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGEgdmlkZW8gZ2l2ZW4gdGhlIGluZm9ybWF0aW9uXG4gICAqIEBwYXJhbSB1cmwgdGhlIHVybCBvZiB0aGUgdmlkZW8sIG9ubHkgeW91dHViZSBhbmQgdmltZW8gc3VwcG9ydGVkIGFzIG9yaWdpblxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqIEByZXR1cm5zIGEgYm9vbGVhbiB0cnVlIGlmIHRoZSB2aWRlbyB3YXMgcHJvcGVybHkgaW5zZXJ0ZWQsIGZhbHNlIGlmIHRoZSB2aWRlbyB1cmwgd2FzIGludmFsaWRcbiAgICovXG4gIGluc2VydFZpZGVvOiAodXJsOiBzdHJpbmcpID0+IGJvb2xlYW47XG4gIHVwZGF0ZVZpZGVvOiAodXJsOiBzdHJpbmcpID0+IGJvb2xlYW47XG4gIC8qKlxuICAgKiBXaWxsIGluc2VydCBhIGZpbGUgYmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIGdpdmVuXG4gICAqIEBwYXJhbSBmaWxlIHRoZSBmaWxlIHRvIGluc2VydFxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqL1xuICBpbnNlcnRGaWxlOiAoZmlsZTogRmlsZSkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGEgY29udGFpbmVyIGF0IHRoZSBnaXZlbiBsb2NhdGlvblxuICAgKiBAcGFyYW0gdHlwZSBvcHRpb25hbCwgdGhlIGNvbnRhaW5lciB0eXBlLCBvdGhlcndpc2Ugd2lsbFxuICAgKiBpbnNlcnQgYSBzdGFuZGFyZCBjb250YWluZXJcbiAgICogdGhpcyBpcyBjYXJldCBiYXNlZCB1bmxlc3MgeW91IHNwZWNpZnkgeW91ciBvd24gY3VzdG9tIHJhbmdlXG4gICAqIG5vdGUgdGhhdCBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2lsbCBjYXVzZSBhIHJlZm9jdXNcbiAgICogQHBhcmFtIHR5cGUgdGhlIGNvbnRhaW5lciB0eXBlXG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZSB0byBpbnNlcnQgYXRcbiAgICovXG4gIGluc2VydENvbnRhaW5lcjogKHR5cGU/OiBzdHJpbmcpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgY3VzdG9tIGVsZW1lbnRcbiAgICogdGhpcyBpcyBjYXJldCBiYXNlZCB1bmxlc3MgeW91IHNwZWNpZnkgeW91ciBvd24gY3VzdG9tIHJhbmdlXG4gICAqIG5vdGUgdGhhdCBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2lsbCBjYXVzZSBhIHJlZm9jdXNcbiAgICogQHBhcmFtIHR5cGUgdGhlIGN1c3RvbSB0eXBlXG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZSB0byBpbnNlcnQgYXRcbiAgICovXG4gIGluc2VydEN1c3RvbTogKHR5cGU6IHN0cmluZykgPT4gdm9pZDtcbiAgLyoqXG4gICAqIEluc2VydHMgYSB0ZW1wbGF0ZSB0ZXh0XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqIEBwYXJhbSBsYWJlbCB0aGUgbGFiZWwgdG8gdXNlIGZvciB0aGUgdGVtcGxhdGUgdGV4dFxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIGFjdHVhbCB2YWx1ZSBmb3IgdGhlIHRlbXBsYXRlIHRleHQgdG8gYmUgdXNlZCBvZmYgdGhlIGNvbnRleHRcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKi9cbiAgaW5zZXJ0VGVtcGxhdGVUZXh0OiAobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgdXBkYXRlVGVtcGxhdGVUZXh0OiAobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgLyoqXG4gICAqIEluc2VydHMgYSB0ZW1wbGF0ZSBodG1sIGZyYWdtZW50XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqIEBwYXJhbSBsYWJlbCB0aGUgbGFiZWwgdG8gdXNlIGZvciB0aGUgdGVtcGxhdGUgaHRtbFxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIGFjdHVhbCB2YWx1ZSBmb3IgdGhlIHRlbXBsYXRlIGh0bWwgdG8gYmUgdXNlZCBvZmYgdGhlIGNvbnRleHRcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKi9cbiAgaW5zZXJ0VGVtcGxhdGVIVE1MOiAobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgdXBkYXRlVGVtcGxhdGVIVE1MOiAobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4gdm9pZDtcblxuICAvKipcbiAgICogSW5zZXJ0cyBhbiBlbGVtZW50IGF0IHRoZSBnaXZlbiBwb3NpdGlvblxuICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgZWxlbWVudCB0byBpbnNlcnRcbiAgICogQHBhcmFtIGF0IG9wdGlvbmFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKi9cbiAgaW5zZXJ0RWxlbWVudDogKGVsZW1lbnQ6IFJpY2hFbGVtZW50KSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgdGFibGUgYXQgdGhlIGdpdmVuIGxvY2F0aW9uXG4gICAqL1xuICBpbnNlcnRUYWJsZTogKHRhYmxlVHlwZTogc3RyaW5nKSA9PiB2b2lkO1xuICBpbnNlcnRUYWJsZUNvbHVtbjogKCkgPT4gdm9pZDtcbiAgaW5zZXJ0VGFibGVSb3c6ICgpID0+IHZvaWQ7XG4gIGRlbGV0ZVRhYmxlQ29sdW1uOiAoKSA9PiB2b2lkO1xuICBkZWxldGVUYWJsZVJvdzogKCkgPT4gdm9pZDtcbiAgdG9nZ2xlVGFibGU6IChlbGVtZW50OiBcInRoZWFkXCIgfCBcInRmb290XCIpID0+IHZvaWQ7XG4gIGNhblRvZ2dsZVRhYmxlOiAoZWxlbWVudDogXCJ0aGVhZFwiIHwgXCJ0Zm9vdFwiKSA9PiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBNYWtlcyBhIHF1b3RlIG91dCBvZiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqL1xuICB0b2dnbGVRdW90ZTogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIE1ha2VzIGEgdGl0bGUgb3V0IG9mIHRoZSBjdXJyZW50IGVsZW1lbnRcbiAgICogdGhpcyBpcyBjYXJldCBiYXNlZCB1bmxlc3MgeW91IHNwZWNpZnkgeW91ciBvd24gY3VzdG9tIHJhbmdlXG4gICAqIG5vdGUgdGhhdCBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2lsbCBjYXVzZSBhIHJlZm9jdXNcbiAgICovXG4gIHRvZ2dsZVRpdGxlOiAodHlwZTogXCJoMVwiIHwgXCJoMlwiIHwgXCJoM1wiIHwgXCJoNFwiIHwgXCJoNVwiIHwgXCJoNlwiKSA9PiB2b2lkO1xuICAvKipcbiAgICogTWFrZXMgYSBsaXN0IG91dCBvZiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqL1xuICBpbnNlcnRMaXN0OiAodHlwZTogXCJidWxsZXRlZFwiIHwgXCJudW1iZXJlZFwiKSA9PiB2b2lkO1xuICAvKipcbiAgICogTWFrZXMgYSBsaW5rIG91dCBvZiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqIEByZXR1cm5zIGEgYm9vbGVhbiBzcGVjaWZ5aW5nIHdoZXRoZXIgdGhlIHRvZ2dsaW5nIHdhcyBzdWNjZXNmdWwgb3IgaXQgZmFpbGVkXG4gICAqIGZvciBzb21lIHJlYXNvbiwgZWcuIGludmFsaWQgbGluaywgbGlua3MgYXJlIG5vdCBzdXBwb3J0ZWRcbiAgICovXG4gIHRvZ2dsZUxpbms6ICh1cmw6IHN0cmluZywgdGVtcGxhdGVWYWx1ZTogc3RyaW5nKSA9PiBib29sZWFuO1xuICB1cGRhdGVMaW5rOiAodXJsOiBzdHJpbmcsIHRlbXBsYXRlVmFsdWU6IHN0cmluZykgPT4gYm9vbGVhbjtcblxuICAvKipcbiAgICogRm9ybWF0cyB0aGUgY3VycmVudCB0ZXh0IGFzIGJvbGRcbiAgICogdGhpcyBpcyBhbHdheXMgY2FyZXQgYmFzZWQgYW5kIGRvZXMgbm90IGFsbG93IGZvciBjdXN0b21cbiAgICogcmFuZ2VzXG4gICAqIEl0IHdpbGwgcmVmb2N1cyBvbmNlIGRvbmVcbiAgICovXG4gIGZvcm1hdFRvZ2dsZTogKHR5cGU6IFwiYm9sZFwiIHwgXCJpdGFsaWNcIiB8IFwidW5kZXJsaW5lXCIpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIGRvZXMgYW4gYXJiaXRyYXJ5IHVwZGF0ZSBvZiBhcmJpdHJhcnkgYXJndW1lbnRzIG9mZiB0aGUgY3VycmVudFxuICAgKiBlbGVtZW50IHZhbHVlLCB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICogQHBhcmFtIGFyZ3MgdGhlIGFyYml0cmFyeSBhcmd1bWVudHMgKHBhcnRpYWwgdmFsdWUpXG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGFuY2hvciB3aGVyZSB0aGUgdXBkYXRlIHNob3VsZCB0YWtlIHBsYWNlIChzaG91bGQgcG9pbnQgYXQgYW4gZWxlbWVudClcbiAgICovXG4gIHNldDogKGFyZ3M6IFBhcnRpYWw8UmljaEVsZW1lbnQ+IHwgUGFydGlhbDxJVGV4dD4sIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCBzdHlsZSBmb3IgdGhlIGVsZW1lbnRcbiAgICogdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWZvY3VzIGFuZCBpdCdzIHNpbGVudCBhbmQgbWVhbnRcbiAgICogZm9yIGluZGlyZWN0IHVzYWdlXG4gICAqL1xuICBzZXRTdHlsZTogKHN0eWxlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFNldHMgdGhlIHRlbXBsYXRlIGhvdmVyIHN0eWxlIGZvciB0aGUgZWxlbWVudFxuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldEhvdmVyU3R5bGU6IChzdHlsZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhY3RpdmUgc3R5bGUgZm9yIHRoZSBlbGVtZW50XG4gICAqIHRoaXMgZnVuY3Rpb24gZG9lcyBub3QgcmVmb2N1cyBhbmQgaXQncyBzaWxlbnQgYW5kIG1lYW50XG4gICAqIGZvciBpbmRpcmVjdCB1c2FnZVxuICAgKi9cbiAgc2V0QWN0aXZlU3R5bGU6IChzdHlsZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb250ZXh0IGtleVxuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldENvbnRleHQ6IChrZXk6IHN0cmluZywgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuICAvKipcbiAgICogU2V0cyB0aGUgaWYgcmVuZGVyIGNvbmRpdGlvblxuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldElmQ29uZGl0aW9uOiAoa2V5OiBzdHJpbmcsIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFNldHMgYW4gVUkgaGFuZGxlciBpbiB0aGUgZ2l2ZW4gYW5jaG9yIHdpdGggdGhlIGdpdmVuIGFyZ3NcbiAgICogdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWZvY3VzIGFuZCBpdCdzIHNpbGVudCBhbmQgbWVhbnRcbiAgICogZm9yIGluZGlyZWN0IHVzYWdlXG4gICAqL1xuICBzZXRVSUhhbmRsZXI6IChrZXk6IHN0cmluZywgYXJnczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSwgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuICAvKipcbiAgICogQWxsb3dzIHRvIHNldCBVSSBoYW5kbGVyIGFyZ3MgaW4gdGhlIHVpIGhhbmRsZXJcbiAgICovXG4gIHNldFVJSGFuZGxlckFyZzogKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBmb3ItZWFjaCBsb29wIGtleVxuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldEZvckVhY2g6IChrZXk6IHN0cmluZywgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuICAvKipcbiAgICogU2V0cyBhbGwgdGhlIHJpY2ggY2xhc3Nlc1xuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldFJpY2hDbGFzc2VzOiAobGlzdDogc3RyaW5nW10sIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFNldHMgYW4gYWN0aW9uIGtleVxuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldEFjdGlvbjogKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgaGFyZCBibHVyLCBhbmQgZXZlbiB0aGUgc2VsZWN0ZWQgcGF0aHMgYXJlIGxvc3RcbiAgICovXG4gIGhhcmRCbHVyOiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogUGVyZm9ybXMgYSBzb2Z0IGJsdXIgZXZlbnRcbiAgICovXG4gIHNvZnRCbHVyOiAoKSA9PiB2b2lkO1xufVxuXG4vKipcbiAqIENvbnRhaW5zIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGVcbiAqIHN0YXRlIG9mIHRoZSBlZGl0b3IgYXMgaXQgaXMgcmlnaHRcbiAqIG5vd1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElTbGF0ZUVkaXRvckludGVybmFsU3RhdGVUeXBlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgaXQgaXMgY3VyZW50bHkgZm9jdXNlZFxuICAgKiB0aGlzIGlzIGEgc3RhdGUgaW5oZXJlbnQgb2YgdGhlXG4gICAqIHN0YXRlIG9mIHRoZSBlZGl0b3JcbiAgICovXG4gIGZvY3VzZWQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgaXQgaXMgcmljaCB0ZXh0XG4gICAqIHRoZSBzbGF0ZSBlZGl0b3IgaXMgYWJsZSB0byBjb250YWluXG4gICAqIG5vbi1yaWNoIHRleHQsIHdoZW4gaXQncyBhcyBhIHBsYWluXG4gICAqIHRleHQgZm9ybVxuICAgKiBcbiAgICogeW91IHNob3VsZCB1c2UgdGhpcyB0byBjaGFuZ2UvcmVtb3ZlXG4gICAqIHRoZSB0b29sYmFycyBhbmQgd3JhcHBlcnMgYW5kIHVzZVxuICAgKiBvbmx5IHBhcmFncmFwaHNcbiAgICogXG4gICAqIHRoaXMgaXMgcGFzc2VkIGRpcmVjdGx5IGZyb21cbiAgICogdGhlIHByb3BzIG9mIHRoZSBlZGl0b3JcbiAgICovXG4gIGlzUmljaFRleHQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGN1cnJlbnQgdmFsdWUgaXMgdmFsaWRcbiAgICogdGhpcyBpcyBwYXNzZWQgZGlyZWN0bHkgZnJvbSB0aGUgcHJvcHNcbiAgICogYW5kIGl0J3MgdXNlZCBmb3Igc3R5bGlzdGljIHB1cnBvc2VzXG4gICAqL1xuICBjdXJyZW50VmFsaWQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHRleHQgYmVpbmcgd29ya2VkIHdpdGgsIHJlcHJlc2VudHNcbiAgICogYSB0ZXh0IG5vZGUgd2hlcmUgdGhlIGNhcmV0IGlzIGN1cnJlbnRseSBwbGFjZWRcbiAgICovXG4gIGN1cnJlbnRUZXh0OiBJVGV4dDtcbiAgY3VycmVudElubGluZUVsZW1lbnQ6IFJpY2hFbGVtZW50O1xuICBjdXJyZW50QmxvY2tFbGVtZW50OiBSaWNoRWxlbWVudDtcbiAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50czogUmljaEVsZW1lbnRbXTtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgcGF0aCBmb2xsb3dlZCwgdGV4dCBwYXRoIGZvciB0aGUgY3VycmVudCB0ZXh0XG4gICAqL1xuICBjdXJyZW50VGV4dEFuY2hvcjogUGF0aDtcbiAgY3VycmVudElubGluZUVsZW1lbnRBbmNob3I6IFBhdGg7XG4gIGN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3I6IFBhdGg7XG4gIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IFBhdGhbXTtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgc2VsZWN0ZWQgbm9kZSB0aGF0IGlzIGJlaW5nIHdvcmtlZCB3aXRoXG4gICAqIHRoaXMgaXMgbm9ybWFsbHkgYXV0b21hdGljYWxseSBzZWxlY3RlZCB0byBiZSB0aGVcbiAgICogY3VycmVudCBlbGVtZW50XG4gICAqL1xuICBjdXJyZW50U2VsZWN0ZWRUZXh0OiBJVGV4dDtcbiAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudDogUmljaEVsZW1lbnQ7XG4gIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudDogUmljaEVsZW1lbnQ7XG4gIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50czogUmljaEVsZW1lbnRbXTtcbiAgY3VycmVudFNlbGVjdGVkRWxlbWVudDogUmljaEVsZW1lbnQ7XG5cbiAgY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvcjogUGF0aDtcbiAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvcjogUGF0aDtcbiAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yOiBQYXRoO1xuICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IFBhdGhbXTtcblxuICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yOiBQYXRoO1xuICBwcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcjogUGF0aDtcbiAgcHJldmlvdXNUZXh0QW5jaG9yOiBQYXRoO1xuXG4gIGN1cnJlbnRSb290Q29udGV4dDogSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb247XG4gIGN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dDogSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb247XG4gIGN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dDogSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb247XG4gIGN1cnJlbnRTZWxlY3RlZElubGluZUNvbnRleHQ6IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uO1xuICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29udGV4dDogSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb247XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHZhbHVlIGZyb20gdGhlIGRvY3VtZW50IHRoYXQgaXMgdXNlZFxuICAgKiBpbiB0aGUgc2xhdGUgcmljaCB0ZXh0IGVkaXRvclxuICAgKi9cbiAgdHJlZVZhbHVlOiBJUm9vdExldmVsRG9jdW1lbnQ7XG5cbiAgLyoqXG4gICAqIENvbnRleHR1YWwsIHZlcnkgc3BlY2lmaWMgdG8gdGhlIGN1cnJlbnQgY29udGV4dFxuICAgKiB3aGVyZSB0aGUgY3Vyc29yIGlzIGxvY2F0ZWRcbiAgICovXG4gIGFsbG93c0luc2VydEVsZW1lbnQ6IChlbGVtZW50OiBSaWNoRWxlbWVudCwgb3B0cz86IHsgY29sbGFwc2VkPzogYm9vbGVhbjsgZXh0ZW5kZWQ/OiBib29sZWFuOyBzZWxlY3RlZD86IGJvb2xlYW4gfSkgPT4gYm9vbGVhbjtcbiAgYWxsb3dzVGV4dDogYm9vbGVhbjtcbiAgaW5saW5lSXNWb2lkOiBib29sZWFuO1xuICBibG9ja0lzVm9pZDogYm9vbGVhbjtcbiAgdG9wbW9zdFN1cGVyYmxvY2tJc1ZvaWQ6IGJvb2xlYW47XG4gIHN1cGVyQmxvY2tVSUhhbmRsZXI6IElUZW1wbGF0ZUFyZ1VJSGFuZGxlckRlZmluaXRpb247XG4gIGJsb2NrVUlIYW5kbGVyOiBJVGVtcGxhdGVBcmdVSUhhbmRsZXJEZWZpbml0aW9uO1xuICBpbmxpbmVVSUhhbmRsZXI6IElUZW1wbGF0ZUFyZ1VJSGFuZGxlckRlZmluaXRpb247XG59XG5cbi8qKlxuICogVGhlIHByb3BzIHRoYXQgZXZlcnkgZWxlbWVudCB3cmFwcGVyIGlzIGdvaW5nIHRvIGdldFxuICogYmFzZWQgb24gdGhlIHN0YW5kYXJkIHRoYXQgaXMgcGFzZWQgYnkgZWFjaCBlbGVtZW50XG4gKiBvbmNlIHN1Y2ggZWxlbWVudCBpcyBzZWxlY3RlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElTbGF0ZUVkaXRvcldyYXBwZXJFbGVtZW50UHJvcHMge1xuICAvKipcbiAgICogVGhlIGVsZW1lbnQgYmVpbmcgc2VsZWN0ZWRcbiAgICovXG4gIGVsZW1lbnQ6IFJpY2hFbGVtZW50O1xuICAvKipcbiAgICogV2hldGhlciB0aGUgc2VsZWN0aW9uIGlzIHByaW1hcnlcbiAgICovXG4gIHByaW1hcnlTZWxlY3Rpb246IGJvb2xlYW47XG4gIC8qKlxuICAgKiB3ZXRoZXIgaXMgc2VsZWN0ZWRcbiAgICovXG4gIGlzU2VsZWN0ZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUaGUgaGVscGVycyBmdW5jdGlvbnNcbiAgICovXG4gIGhlbHBlcnM6IElIZWxwZXJGdW5jdGlvbnM7XG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBjb21wb25lbnQgaXRzZWxmIHRoYXQgc2hvdWxkXG4gICAqIGJlIHJldHVybmVkXG4gICAqL1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogVGhlIGZlYXR1cmUgc3VwcG9ydFxuICAgKi9cbiAgZmVhdHVyZVN1cHBvcnQ6IElBY2Nlc3NpYmxlRmVhdHVyZVN1cHBvcnRPcHRpb25zO1xufVxuXG4vKipcbiAqIFRoZSBlbGVtZW50IHdyYXBwZXJzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVNsYXRlRWRpdG9yRWxlbWVudFdyYXBwZXJzIHtcbiAgY29tcG9uZW50cz86IHtcbiAgICBba2V5OiBzdHJpbmddOiBSZWFjdC5Db21wb25lbnRUeXBlPElTbGF0ZUVkaXRvcldyYXBwZXJFbGVtZW50UHJvcHM+O1xuICB9LFxuICB1aUhhbmRsZXI/OiB7XG4gICAgW2tleTogc3RyaW5nXTogUmVhY3QuQ29tcG9uZW50VHlwZTxJU2xhdGVFZGl0b3JXcmFwcGVyRWxlbWVudFByb3BzPjtcbiAgfSxcbn07XG5cbi8qKlxuICogVGhlIGJhc2UgcHJvcHMgdGhhdCBldmVyeSB3cmFwcGVyIGlzIGdvaW5nIHRvIGdldFxuICogYmFzZWQgb24gdGhlIHN0YW5kYXJkIHRoYXQgaXMgcGFzc2VkIGJ5IHRoZSBjb21wb25lbnRcbiAqIHRoYXQgY29udGFpbnMgdGhlIGJhc2UgcmljaCB0ZXh0IGVkaXRvclxuICogXG4gKiBZb3UgbWlnaHQgZXh0ZW5kIHRoaXMgY2xhc3MgYW5kIHJlcXVpcmUgZXh0cmEgcHJvcHMsIHRoZXNlXG4gKiBwcm9wcyBtaWdodCBiZSBwYXNzZWQgYnkgdXNpbmcgdGhlIHdyYXBwZXJBcmdzIGZyb21cbiAqIHRoZSBtYWluIGNvbXBvbmVudCB3aGljaCB3aWxsIHBhc3MgdGhlbSB0byB0aGUgd3JhcHBlclxuICogXG4gKiBXaGVuIGltcGxlbWVudGluZyB0aGUgd3JhcHBlciB5b3UgbWF5IGFkZCBhIHNlbGVjdGl2ZUhhcmRCbHVyIGZ1bmN0aW9uXG4gKiBmb3Igd2hpY2ggdHJpZ2dlcnMgd2hlbiB0aGUgZWxlbWVudCBpcyBibHVycmVkIHRvIHByZXZlbnQgcmVhbCBibHVycmluZyAoYWthIGV4ZWN1dGluZyBoYXJkQmx1cilcbiAqIGRlcGVuZGluZyBvbiBpZiBzb21ldGhpbmcgaXMgc2VsZWN0ZWQgaW4gdGhlIHdyYXBwZXJcbiAqIFxuICogVGhlIHNlbGVjdGl2ZUhhcmRCbHVyIHNob3VsZCB0YWtlIGEgKGV2OiBLZXlib2FyZEV2ZW50LCB0YXJnZXQ6IEhUTUxFbGVtZW50KSBpZiB5b3Ugd2lzaCB0byBwcmV2ZW50XG4gKiB0aGUgYmx1ciBmcm9tIGhhcHBlbmluZ1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElTbGF0ZUVkaXRvcldyYXBwZXJCYXNlUHJvcHMge1xuICAvKipcbiAgICogV2hldGhlciBpdCBpcyBkaXNhYmxlZFxuICAgKi9cbiAgZGlzYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBzbGF0ZSBlZGl0b3IgY3VycmVudCBzdGF0ZVxuICAgKiB0aGF0IGlzIHBhc3NlZCB0byB0aGUgd3JhcHBlciBpbiBvcmRlclxuICAgKiBzbyBpdCBjYW4gZ2V0IHN0YXRlIGluZm9ybWF0aW9uXG4gICAqL1xuICBzdGF0ZTogSVNsYXRlRWRpdG9ySW50ZXJuYWxTdGF0ZVR5cGU7XG4gIC8qKlxuICAgKiBUaGlzIGlzIGEgbGlzdCBvZiBleHRlbmRlZCBmZWF0dXJlcyB0aGF0IGFyZSBhdmFpbGFibGVcbiAgICogdG8gdGhlIGVkaXRvciwgYW5kIHRoZSB3cmFwcGVyIGNhbiByZW5kZXIgYnV0dG9uc1xuICAgKiBhbmQgd2hhdG5vdCBmcm9tIGl0XG4gICAqL1xuICBmZWF0dXJlU3VwcG9ydDogSUFjY2Vzc2libGVGZWF0dXJlU3VwcG9ydE9wdGlvbnM7XG4gIC8qKlxuICAgKiBUaGVzZSBhcmUgaGVscGVyIGZ1bmN0aW9ucyB0aGF0IGFyZSB1c2VkIHRvIGluc2VydCBlbGVtZW50c1xuICAgKiBhbmQgbW9kaWZ5IG5vZGVzXG4gICAqL1xuICBoZWxwZXJzOiBJSGVscGVyRnVuY3Rpb25zO1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgdGhpbmcgdG8gd3JhcCwgaXQgaXMgdGhlIHJlYWN0XG4gICAqIHJpY2ggdGV4dCBlZGl0b3IgaXRzZWxmIGFzIGl0IGNvbWVzIGZyb20gc2xhdGVcbiAgICogYW5kIGl0IHNob3VsZCBiZSByZW5kZXJlZFxuICAgKiB3aGVyZSBpdCBpcyBleHBlY3RlZCB0byBiZSB1c2VkXG4gICAqL1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogQSBjdXJyZW50IGVycm9yLCB0cmFuc2xhdGVkXG4gICAqIGl0IGlzIGdpdmVuIGRpcmVjdGx5IGFzIGEgcHJvcCB0byB0aGUgZWRpdG9yIGNsYXNzXG4gICAqIGFzIGl0J3MganVzdCBwYXNzZWQgcmlnaHQgaGVyZSBhcyB3ZWxsIHRvIHRoZSB3cmFwcGVyXG4gICAqIHRoaXMgaXMgdXNlZCB2aWEgdGhlIFByb3BlcnR5RW50cnlUZXh0IGFzIGl0IGRvZXNcbiAgICogaW5kZWVkIHByb3ZpZGUgdGhpcyBhcyBhIHByb3AgZm9yIHRoZSByZW5kZXJcbiAgICovXG4gIGN1cnJlbnRMb2FkRXJyb3I6IHN0cmluZztcbiAgLyoqXG4gICAqIERpc21pc3MgdGhlIGN1cnJlbnQgbG9hZCBlcnJvciBmb2xsb3dzIHRoZSBzYW1lIGxvZ2ljXG4gICAqIGFzIHRoZSBjdXJyZW50TG9hZEVycm9yXG4gICAqL1xuICBkaXNtaXNzQ3VycmVudExvYWRFcnJvcjogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIHRoZSBiYXNlIGkxOG4gZ2l2ZW5cbiAgICovXG4gIGJhc2VJMThuOiBJQmFzZUkxOG5SaWNoVGV4dEluZm87XG59XG5cbi8qKlxuICogVGhlc2UgYXJlIHRoZSBwcm9wcyB0aGF0IHRoZSBlZGl0b3IgaXRzZWxmIHJlcXVpcmVzXG4gKiBpbiBvcmRlciB0byBmdW5jdGlvbiwgYW5kIHRoZXkgYXJlIGRlc2lnbmVkIGluIG1pbmQgdG8gbWFrZVxuICogaXRzZWxmIHN1aXRhYmxlIHRvIGJlIGFuIGVudHJ5IHR5cGUgZm9yIGl0ZW1pemUgdGV4dCB0eXBlcywgYm90aFxuICogcGxhaW4gYW5kIGh0bWxcbiAqL1xuaW50ZXJmYWNlIElTbGF0ZUVkaXRvclByb3BzIHtcbiAgLyoqXG4gICAqIEFuIGlkIGZvciB0aGUgY29udGVudCBlZGl0YWJsZSBhcmVhXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgc3VwcG9ydGVkIHR5cGVzIHRoYXQgYXJlIGFsbG93ZWQgZm9yIHRoZSBpbWFnZVxuICAgKiBpbnB1dFxuICAgKi9cbiAgc3VwcG9ydGVkSW1hZ2VUeXBlczogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGl0ZW1pemUgaW50ZXJuYWxseSwgZm9yIHNldHRpbmcgdGhlIGxhc3QgdGV4dCBjaGFuZ2VcbiAgICogdmFsdWUgY291bnQgZm9yIHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyBpbiBhbiBlZmZpY2llbnQgd2F5XG4gICAqIHNpbmNlIHRoZSBlZGl0b3IgY2FuIGNvdW50IGJldHRlclxuICAgKiBcbiAgICogdGhpcyB3aWxsIHNldCBhIGdsb2JhbCB2YWx1ZSB3aXRoIHRoZSBjb3VudCBvZiB0aGUgbGFzdCBlZGl0ZWRcbiAgICogcmljaCB0ZXh0LCBpZiBhIHZhbGlkYXRpb24gb2NjdXJzIGltbWVkaWF0ZWx5IGFmdGVyIHRoaXMgdmFsdWVcbiAgICogY2FuIGJlIHJldHJpZXZlZCByaWdodCBhd2F5IGZyb20gdGhlIGdsb2JhbFxuICAgKiBcbiAgICogd2hpbGUgdGhpcyBpcyBhIGhhY2ssIGl0J3MgYSBoYWNrIGRvbmUgZm9yIGVmZmljaWVuY3ksIHNpbmNlIGNvbnNpc3RlbmN5XG4gICAqIG5vdyBpcyBleHBlbnNpdmVcbiAgICovXG4gIGNhY2hlU3RvcmVDb3VudEdsb2JhbD86IHN0cmluZztcblxuICAvKipcbiAgICogVmFsdWUgZm9yIHRoZSBsYW5nIHByb3BlcnR5XG4gICAqL1xuICBsYW5nOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEEgcmVhY3QgY29tcG9uZW50IHRoYXQgaXMgdG8gd3JhcCB0aGUgZWRpdG9yXG4gICAqIG5vcm1hbGx5IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgdG9vbGJhcnMgYW5kIGFkZCB0byB0aGUgZnVuY3Rpb25hbGl0eVxuICAgKiB0aGF0IHdpc2hlcyB0byBiZSBhZGRlZCBpbiBvcmRlciB0byBtYWtlIGl0IGZ1bGx5IGN1c3RvbWl6YWJsZVxuICAgKiBUaGUgd3JhcHBlciB3aWxsIHJlY2VpdmUgdGhlIHJpY2ggdGV4dCBlZGl0b3IgY29tcG9uZW50IGl0c2VsZiBhcyBhIGNoaWxkcmVuXG4gICAqIHRoZSByYXcgZWRpdG9yIHRvIGxhdW5jaCBjb21tYW5kcyBhbmQgc29tZSB1dGlsaXR5IGZ1bmN0aW9uc1xuICAgKiBcbiAgICogV2hlbiBidWlsZGluZyB5b3VyIG93biBjdXN0b20gcmVuZGVyZXJzIGFuZCB5b3Ugc3RpbGwgd2lsbCB1c2UgdGhlIGZhc3QgcHJvdG90eWluZ1xuICAgKiBzbGF0ZSByZW5kZXJlciBhcyB5b3VyIHJpY2ggdGV4dCBlZGl0b3Igb2YgY2hvaWNlLCBpdCBpcyB0aGUgd3JhcHBlciB0aGF0IHlvdSB3aWxsXG4gICAqIHVzZSB0byBjdXN0b21pemUgeW91ciB0b29sYmFyIGFuZCBvdGhlciBmdW5jdGlvbmFsaXR5IHlvdSB3YW50IHRvIGFkZDsgd2hpbGUgdGhlIHN0YW5kYXJkXG4gICAqIGl0ZW1pemUgZmFzdCBwcm90b3R5cGluZyBlZGl0b3IgYW5kIGl0cyB3cmFwcGVyIGNhbiBkbyB3b25kZXJzIGl0IG1pZ2h0IG5vdCBjb3ZlclxuICAgKiBhbGwgeW91ciB1c2UgY2FzZXMgYW5kIHlvdSBtaWdodCB3YW50IHRvIGNyZWF0ZSB5b3VyIG93biBjdXNvbSByZW5kZXJlcnNcbiAgICovXG4gIFdyYXBwZXI/OiBSZWFjdC5Db21wb25lbnRUeXBlPElTbGF0ZUVkaXRvcldyYXBwZXJCYXNlUHJvcHM+O1xuICAvKipcbiAgICogRXh0cmEgd3JhcHBlciBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgd3JhcHBlciwgdGhlIGNvbXBvbmVudCBmb3IgdGhlIHdyYXBwZXJcbiAgICogYWx3YXlzIG11c3QgaGF2ZSB0aGUgYmFzZSB3cmFwcGVyIHByb3BzLCBidXQgaXQgY2FuIGhhdmUgZXh0cmEgYXJndW1lbnRzXG4gICAqIGFuZCB0aGV5IGNhbiBiZSBwcm92aWRlZCB2aWEgdGhpcyBhcmd1bWVudFxuICAgKi9cbiAgd3JhcHBlckFyZ3M/OiBhbnk7XG5cbiAgLyoqXG4gICAqIFdyYXBwZXJzIGZvciBzcGVjaWZpYyBlbGVtZW50cyBhcyB0aGV5IGFyZSBzZWxlY3RlZCBhbmQgb25seSBpZiB0aGV5IGFyZSBzZWxlY3RlZFxuICAgKi9cbiAgZWxlbWVudFdyYXBwZXJzPzogSVNsYXRlRWRpdG9yRWxlbWVudFdyYXBwZXJzO1xuXG4gIC8qKlxuICAgKiBBcmdzIHBhc3NlZCB0byBhbGwgdGhlIGVsZW1lbnQgd3JhcHBlcnNcbiAgICovXG4gIGVsZW1lbnRXcmFwcGVyc0FyZ3M/OiBhbnk7XG5cbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIHN0YW5kYXJkIGZlYXR1cmVzIHRoYXQgYXJlIHN1cHBvcnRlZFxuICAgKiBhY2NvcmRpbmcgdG8gdGhlIGRlZmluaXRpb24sIHRoZSBwcm9wZXJ0eSBlbnRyeSBoYW5kbGVyXG4gICAqIHByb3ZpZGVzIHRoaXMgcmlnaHQgYXdheSB0byB0aGUgcmVuZGVyZXJcbiAgICovXG4gIGZlYXR1cmVzOiBJRmVhdHVyZVN1cHBvcnRPcHRpb25zO1xuICAvKipcbiAgICogVGhlIHZhbHVlIGFzIGh0bWwgb3IgcGxhaW4gdGV4dCwgbG9vayBhdCB0aGVcbiAgICogaXNSaWNoVGV4dCBwcm9wIGluIHRoaXMgc2FtZSBzdHJ1Y3R1cmUgaW4gb3JkZXJcbiAgICogdG8gbWFyayBpdCBhcyBodG1sIG9yIHBsYWluXG4gICAqL1xuICB2YWx1ZTogc3RyaW5nO1xuICAvKipcbiAgICogd2hldGhlciB0aGUgY3VycmVudCB2YWx1ZSBpcyB2YWxpZCwgdGhlIGhhbmRsZXJcbiAgICogY2FuIGRlY2lkZSB3aGV0aGVyIHRoZSB2YWx1ZSBpcyB2YWxpZCwgZWcuIHRvbyBsb25nXG4gICAqIGFuZCBtYXJrIGl0IGhlcmUgYXMgaW52YWxpZFxuICAgKi9cbiAgY3VycmVudFZhbGlkOiBib29sZWFuO1xuICAvKipcbiAgICogQSBjdXJyZW50IGxvYWRpbmcgZXJyb3IsIHRyYW5zbGF0ZWQsIHRoaXMgaXMgYWxzbyBnaXZlbiBieVxuICAgKiB0aGUgaGFuZGxlcjsgaXQgaXMgdXNlZCB3aGVuIGEgZmFpbHVyZSBvY2N1cnJlZCB0byBpbnNlcnRcbiAgICogZmlsZXMgYW5kIG90aGVyIGZvcm1zIG9mIG1lZGlhIGNvbnRlbnRcbiAgICovXG4gIGN1cnJlbnRMb2FkRXJyb3I6IHN0cmluZztcbiAgLyoqXG4gICAqIFVzZWQgdG8gc2V0IGFyaWEgdmFsdWVzIGZvciBwZW9wbGUgd2hvIHVzZSBzY3JlZW4gcmVhZGVyc1xuICAgKiBcbiAgICogYWZmZWN0cyBib3RoIGFyaWEtaW52YWxpZCBhbmQgYXJpYS1lcnJvcm1lc3NhZ2VcbiAgICovXG4gIGN1cnJlbnRHZW5lcmFsRXJyb3JFbGVtZW50SWQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBhZmZlY3RzIGFyaWEtZGVzY3JpYmVkYnlcbiAgICovXG4gIGN1cnJlbnREZXNjcmliZWRCeT86IHN0cmluZztcbiAgLyoqXG4gICAqIERpc21pc3MgdGhlIGN1cnJlbnQgbG9hZCBlcnJvclxuICAgKi9cbiAgZGlzbWlzc0N1cnJlbnRMb2FkRXJyb3I6ICgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBUaGUgcm9vdCBjb250ZXh0LCBjYW4gYmUgbnVsbCBpZiBubyBjb250ZXh0OyBnaXZlbiB0aGlzIGlzIGEgdGV4dCB0eXBlXG4gICAqIGFuZCB0aGUgY29udGV4dCBpcyBhbiBzcGVjaWFsIHNvcnQgb2YgYXJndW1lbnQgdGhlIHJlbmRlcmVyIG11c3QgYmUgdGhlIG9uZVxuICAgKiB0aGF0IGRlY2lkZXMgaG93IHRvIHJlY2VpdmUgdGhlc2UgYW5kIGhvdyB0byB0YWtlIHRoZW0sIHVzaW5nIHRoZVxuICAgKiByZW5kZXJlckFyZ3MgcHJvcGVydHkgaXQgbWlnaHQgYmUgcGFzc2VkIHRoZXJlLCBhcyB0aGlzIGlzIGEgcmVuZGVyaW5nXG4gICAqIGVsZW1lbnRcbiAgICovXG4gIHJvb3RDb250ZXh0OiBJVGVtcGxhdGVBcmdDb250ZXh0RGVmaW5pdGlvbjtcbiAgLyoqXG4gICAqIFRoZSBiYXNlIGkxOG4sIHRoaXMgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIHdyYXBwZXJcbiAgICogdGhlIHdyYXBwZXIgbWF5IHJlcXVpcmUgbW9yZSBpbmZvcm1hdGlvblxuICAgKiBzbyBpdCBpcyByZWNvbW1lbmRlZCB0aGF0IHlvdSBjaGVjayBob3cgdGhlIHdyYXBwZXIgaGFuZGxlcyBpdHNcbiAgICogbmVlZHNcbiAgICovXG4gIGJhc2VJMThuOiBJQmFzZUkxOG5SaWNoVGV4dEluZm87XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSB2YWx1ZSByZXByZXNlbnRzIHJpY2ggdGV4dCwgZ2l2ZW4gdGhlIHZhbHVlIGlzXG4gICAqIGEgc3RyaW5nLCB0aGlzIGVkaXRvciBtdXN0IGtub3cgaG93IHRvIHBhcnNlIGl0XG4gICAqL1xuICBpc1JpY2hUZXh0OiBib29sZWFuO1xuICAvKipcbiAgICogQW4gaW50ZXJuYWwgdmFsdWUgcHJvdmlkZWRcbiAgICogdGhhdCByZXByZXNlbnRzIGEgc2xhdGUgZG9jdW1lbnRcbiAgICogaXQgbWlnaHQgYmUgbnVsbCBpZiB0aGlzIHZhbHVlXG4gICAqIGlzIHVua25vd25cbiAgICovXG4gIHRyZWVWYWx1ZTogSVJvb3RMZXZlbERvY3VtZW50O1xuICAvKipcbiAgICogVHJpZ2dlcnMgb24gY2hhbmdlLCBpdCBpcyBtZWFudCB0byBrZWVwIHRoZSBzYW1lIHNoYXBlXG4gICAqIGFzIHRoZSBoYW5kbGVyIGV4cGVjdHMgaXRcbiAgICovXG4gIG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZywgdHJlZVZhbHVlOiBJUm9vdExldmVsRG9jdW1lbnQpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBUcmlnZ2VycyBvbiBmb2N1cywgaXQgY2FuIGJlIHVzZWQgdG8gY3VzdG9taXplIHRoZSByZW5kZXJlciB0aGF0IGlzIGNyZWF0ZWRcbiAgICogdXNpbmcgaXRcbiAgICovXG4gIG9uRm9jdXM/OiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogVHJpZ2dlcnMgb24gYmx1ciwgaXQgY2FuIGJlIHVzZWQgdG8gY3VzdG9taXplIHRoZSByZW5kZXJlciB0aGF0IGlzIGNyZWF0ZWRcbiAgICogdXNpbmcgaXRcbiAgICovXG4gIG9uQmx1cj86ICgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IHVzdWFsbHkgY29tZXMgZnJvbSB0aGUgaGFuZGxlciBhbmQgaXMgcHJvdmlkZWQgdmlhIHRoZSByZW5kZXJlclxuICAgKiBkaXJlY3RseSB0byB0aGlzIGluIG9yZGVyIHRvIGhhbmRsZSBmaWxlIGluc2VydGlvbnMgaW50byB0aGUgbWVkaWEgcHJvcGVydHlcbiAgICogdGhpcyBmdW5jdGlvbiBpcyBnaXZlbiBieSB0aGUgaGFuZGxlciBpbiB0aGlzIHdheSB0byB0aGUgcmVuZGVyZXJcbiAgICovXG4gIG9uSW5zZXJ0RmlsZTogKGZpbGU6IEZpbGUsIGlzRXhwZWN0aW5nSW1hZ2U/OiBib29sZWFuKSA9PiBQcm9taXNlPElTbGF0ZUluc2VydGVkRmlsZUluZm9ybWF0aW9uVHlwZT47XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IHVzdWFsbHkgY29tZXMgZnJvbSB0aGUgaGFuZGxlciBhbmQgaXMgcHJvdmlkZWQgdmlhIHRoZSByZW5kZXJlclxuICAgKiBkaXJlY3RseSB0byB0aGlzIGluIG9yZGVyIHRvIGhhbmRsZSBmaWxlIGluc2VydGlvbnMgaW50byB0aGUgbWVkaWEgcHJvcGVydHlcbiAgICogdGhpcyBmdW5jdGlvbiBpcyBnaXZlbiBieSB0aGUgaGFuZGxlciBpbiB0aGlzIHdheSB0byB0aGUgcmVuZGVyZXJcbiAgICovXG4gIG9uSW5zZXJ0RmlsZUZyb21VUkw6ICh1cmw6IHN0cmluZywgbmFtZTogc3RyaW5nLCBpc0V4cGVjdGluZ0ltYWdlPzogYm9vbGVhbikgPT4gUHJvbWlzZTxJU2xhdGVJbnNlcnRlZEZpbGVJbmZvcm1hdGlvblR5cGU+O1xuICAvKipcbiAgICogRnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgc3BlY2lmaWVkIHRvIGluZm9ybSB3aGV0aGVyIGEgZmlsZSBpcyBpbmNsdWRlZFxuICAgKiBpbiB0aGUgY3VycmVudCBpbnRlcm5hbCBpbmZvcm1hdGlvblxuICAgKi9cbiAgb25SZXRyaWV2ZUZpbGU6IChmaWxlSWQ6IHN0cmluZykgPT4gSVNsYXRlRmlsZTtcblxuICAvKipcbiAgICogRnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgc3BlY2lmaWVkIHRvIHJldHJpZXZlIGFuIGltYWdlXG4gICAqIEBwYXJhbSBmaWxlSWQgXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgb25SZXRyaWV2ZUltYWdlOiAoZmlsZUlkOiBzdHJpbmcpID0+ICh7IGZpbGU6IElTbGF0ZUZpbGUsIHNyY3NldDogc3RyaW5nIH0pXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBzcGVjaWZpZWQgdG8gcmV0cmlldmUgZGF0YSB1cmlzIGZyb20gYmxvYiB1cmxzIGdpdmVuXG4gICAqIGEgZmlsZSBpZFxuICAgKi9cbiAgLy8gb25SZXRyaWV2ZURhdGFVUkk6IChmaWxlSWQ6IHN0cmluZykgPT4gc3RyaW5nO1xuICAvKipcbiAgICogQSBwbGFjZWhvbGRlciB0byBiZSB1c2VkIHRvIGJlIGRpc3BsYXllZCwgaXQgb25seSBkaXNwbGF5cyB3aGVuIHRoZSB2YWx1ZVxuICAgKiBpcyBjb25zaWRlcmVkIHRvIGJlIHRoZSBudWxsIGRvY3VtZW50XG4gICAqL1xuICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gYXV0byBmb2N1cyBvbiBtb3VudFxuICAgKi9cbiAgYXV0b0ZvY3VzPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGZpZWxkIGlzIGRpc2FibGVkXG4gICAqL1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBBbiBzcGVjaWZpYyBzY3JvbGwgbWFyZ2luIHRvcCB0byBiZSB1c2VkIHdoZW4gc2Nyb2xsIGludG8gdmlldyBpcyB1c2VkXG4gICAqIGFnYWluc3QgdGhpcyBlbGVtZW50XG4gICAqL1xuICBzY3JvbGxNYXJnaW5Ub3A/OiBzdHJpbmcgfCBudW1iZXI7XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgdGhpcyBlZGl0b3IgYW5kIGl0IGlzIHVzZWQgb25seVxuICogaW50ZXJuYWxseSBpbiB0aGUgZWRpdG9yIHN0YXRlLCB0aGUgd3JhcHBlciBtaWdodCBhY2Nlc3Mgc29tZSBwYXJ0cyBvZiBpdFxuICogbmV2ZXJ0aGVsZXNzIHZpYSB0aGUgaGVscGVycywgZmVhdHVyZSBzdXBwb3J0IGFuZCB3aGF0bm90XG4gKi9cbmludGVyZmFjZSBJU2xhdGVFZGl0b3JTdGF0ZSBleHRlbmRzIElTbGF0ZUVkaXRvckludGVybmFsU3RhdGVUeXBlIHtcbiAgLyoqXG4gICAqIFRoZSBhY3R1YWwgaW50ZXJuYWwgdmFsdWUgdGhhdCBzbGF0ZSBpc1xuICAgKiB1c2luZywgc2xhdGUgZXhwZWN0cyBhbiBpbW11dGFibGUgb2JqZWN0IGhlcmUsIGFuZCB0aGlzIGlzIHdoYXQgaXQgaXNcbiAgICogdXNpbmcgdGhlIHNlcmlhbGl6ZXIgZnVuY3Rpb25zIGluIHRoZSB1dGlsaXRpZXMgaW4gb3JkZXJcbiAgICogdG8gb2J0YWluIHRoaXMgaW50ZXJuYWwgdmFsdWVcbiAgICovXG4gIHRyZWVWYWx1ZTogSVJvb3RMZXZlbERvY3VtZW50O1xuICAvKipcbiAgICogV2hldGhlciB0aGUgaW50ZXJuYWwgdmFsdWUgaXMgc3luY2VkIG9yIHNob3VsZCBiZSBzeW5jZWQsIGJlY2F1c2UgdGhlIHJpY2hcbiAgICogdGV4dCBlZGl0b3IgaXMgcmF0aGVyIGNvbXBsZXgsIHNlbmRpbmcgdXBkYXRlcyBhbGwgdGhlIHRpbWUgYW5kIHJlZmV0Y2hpbmcgZnJvbVxuICAgKiB0aGUgc3RyaW5nIHRoYXQgaXMgY3VycmVudCB2YWx1ZSB0byByZXBhcnNlIGlzIGV4cGVuc2l2ZSwgd2UgZG8gdGhlIGZvbGxvd2luZ1xuICAgKiBcbiAgICogMS4gb25jZSBzb21ldGhpbmcgaGFzIGNoYW5nZWQgaW4gc2xhdGUsIHRoZSBzeW5jZWQgc3RhdGUgd2lsbCBiZSBzZXQgdG8gZmFsc2UsIGFuZCBhIHRpbWVyIHdpbGwgYmUgc2V0IGFzXG4gICAqIGEgdGltZW91dCBpbiBvcmRlciB0byBhY3R1YWxseSBjYWxsIG9uQ2hhbmdlLCBzbyBpdGVtaXplIGludGVybmFsIGhhbmRsaW5nICh3aGljaCBpcyBleHBlbnNpdmUpLCB3b24ndCB0cmlnZ2VyXG4gICAqIG9uIGV2ZXJ5IHNpbmdsZSBrZXlwcmVzcywgb25jZSB0aGUgdXNlciBzdG9wcyB0eXBpbmcsIHRoZSBlbnRpcmUgY2hhaW4gb2YgZXZlbnRzIGdldHMgcmVsZWFzZWRcbiAgICogMi4gd2hpbGUgdGhlIGZsYWcgaXMgZmFsc2UgdGhlIHN0cmluZyB2YWx1ZSBjYW5ub3QgYWZmZWN0IHRoZSBpbnRlcm5hbGx5IHNldCB2YWx1ZSBhbmQgaXQgd2lsbCBub3Qgb3ZlcnJpZGUsIHNvXG4gICAqIHRoZSB2YWx1ZSB0aGF0IGlzIHNob3duIGlzIG9ubHkgZGVwZW5kYW50IG9uIHRoZSBpbnRlcm5hbCBzdGF0ZSB0aGF0IGlzIGhlcmUsIGFuZCBvbmNlIHRoZSBmbGFnIGlzIHNldCB0byB0cnVlXG4gICAqIHRoZW4gaXQgd2lsbCBiZSByZWNoZWNrZWRcbiAgICogMy4gd2hlbiB0aGUgZmxhZyBpcyBzZXQgdG8gdHJ1ZSAodXNpbmcgZ2V0RGVyaXZlZCBpbiBvcmRlciBvIGJlIGNoZWFwZXIgYW5kIGF2b2lkIDEgZXh0cmEgcmVuZGVyIGN5Y2xlKSB3ZSB3aWxsXG4gICAqIDMuMS4gQ2hlY2sgdGhlIGludGVybmFsIHZhbHVlLCBpZiBvbmUgcHJvdmlkZWQsIGFuZCBpZiB0aGV5IGJvdGggYXJlIHRoZSBzYW1lIGFuZCBtYXRjaCB0aGUgdXVpZCBzaWduYXR1cmUsIHRoZW4gd2VcbiAgICogY29uc2lkZXIgd2UgYXJlIGhvbGRpbmcgdGhlIHNhbWUgdmFsdWU7IGlmIHRoYXQncyBub3QgdGhlIGNhc2UsIG5vIGludGVybmFsIHZhbHVlLCBvciBpbnRlcm5hbCB2YWx1ZSBkb2Vzbid0IG1hdGNoXG4gICAqIHdlIHJlc2V0IHRvIHRoZSBuZXcgaW50ZXJuYWwgdmFsdWUgYW5kIGRpc2FibGUgYWxsIGN1cnJlbnQgc2VsZWN0aW9ucyBhbmQgYW5jaG9yc1xuICAgKiAzLjIuIENoZWNrIHRoZSBzdHJpbmcgdmFsdWUgYW5kIHNlcmlhbGl6ZSBpdCwgYmFzZWQgb24gdGhlIGlzUmljaFRleHQgcHJvcGVydHkgdG8gZGVmaW5lIGhvdyBpdCB3aWxsIGJlIHBhcnNlZFxuICAgKiB0byBjcmVhdGUgYSBkb2N1bWVudCwgY2hlY2sgdGhlIHNpZ25hdHVyZSBvZiB0aGUgcmVzdWx0LCBpZiB0aGUgc2lnbmF0dXJlIGRvZXNuJ3QgbWF0Y2gsIHRoaXMgbWVhbnMgdGhleSBhcmUgZGlmZmVyZW50XG4gICAqIGRvY3VtZW50cyBzbyB3ZSBkbyB0aGUgc2FtZSwgYW5kIHVwZGF0ZSB3aXRoIHRoZSBuZXcgdmFsdWVcbiAgICovXG4gIHN5bmNlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIGFsbCBjb250YWluZXJzIHRoYXQgZXhpc3Qgd2l0aGluIHRoZSBkZWZpbml0aW9uc1xuICAgKiBmb3IgdGhlIGNzcyBjbGFzc2VzXG4gICAqIFxuICAgKiBUaGV5IGV4aXN0IGFzIHN0YXRlIGJlY2F1c2Ugb2YgU1NSXG4gICAqIFRoZSBzZXJ2ZXIgc2lkZSBpcyBub3QgYWJsZSB0byBhY2Nlc3MgdGhlc2Ugbm9yIHJlYWQgdGhlIENTUyBmaWxlXG4gICAqIGZyb20gdGhlIHN0eWxlc2hlZXRzIGRlZmluaXRpb25cbiAgICovXG4gIGFsbENvbnRhaW5lcnM6IHN0cmluZ1tdO1xuICAvKipcbiAgICogYXZhaWxhYmxlIGN1c3RvbSB0aGF0IGV4aXN0IHdpdGhpbiB0aGUgZGVmaW5pdGlvbnNcbiAgICogZm9yIHRoZSBjc3MgY2xhc3Nlc1xuICAgKiBcbiAgICogVGhleSBleGlzdCBhcyBzdGF0ZSBiZWNhdXNlIG9mIFNTUlxuICAgKiBUaGUgc2VydmVyIHNpZGUgaXMgbm90IGFibGUgdG8gYWNjZXNzIHRoZXNlIG5vciByZWFkIHRoZSBDU1MgZmlsZVxuICAgKiBmcm9tIHRoZSBzdHlsZXNoZWV0cyBkZWZpbml0aW9uXG4gICAqL1xuICBhbGxDdXN0b206IHN0cmluZ1tdO1xuICAvKipcbiAgICogYXZhaWxhYmxlIHJpY2ggY2xhc3MgdGhhdCBleGlzdCB3aXRoaW4gdGhlIGRlZmluaXRpb25zXG4gICAqIGZvciB0aGUgY3NzIGNsYXNzZXNcbiAgICogXG4gICAqIFRoZXkgZXhpc3QgYXMgc3RhdGUgYmVjYXVzZSBvZiBTU1JcbiAgICogVGhlIHNlcnZlciBzaWRlIGlzIG5vdCBhYmxlIHRvIGFjY2VzcyB0aGVzZSBub3IgcmVhZCB0aGUgQ1NTIGZpbGVcbiAgICogZnJvbSB0aGUgc3R5bGVzaGVldHMgZGVmaW5pdGlvblxuICAgKi9cbiAgYWxsUmljaENsYXNzZXM6IHN0cmluZ1tdO1xuICAvKipcbiAgICogYWxsIHRhYmxlcyB0aGF0IGV4aXN0IHdpdGhpbiB0aGUgZGVmaW5pdGlvbnNcbiAgICogZm9yIHRoZSBjc3MgY2xhc3Nlc1xuICAgKiBcbiAgICogVGhleSBleGlzdCBhcyBzdGF0ZSBiZWNhdXNlIG9mIFNTUlxuICAgKiBUaGUgc2VydmVyIHNpZGUgaXMgbm90IGFibGUgdG8gYWNjZXNzIHRoZXNlIG5vciByZWFkIHRoZSBDU1MgZmlsZVxuICAgKiBmcm9tIHRoZSBzdHlsZXNoZWV0cyBkZWZpbml0aW9uXG4gICAqL1xuICBhbGxUYWJsZXM6IHN0cmluZ1tdO1xufVxuXG5jb25zdCBmYWxzZUZuID0gKCkgPT4gZmFsc2U7XG5cbi8qKlxuICogQmVob2xkIHRoZSBjb21wb25lbnQgdGhhdCBkb2VzIGEgbG90IG9mIHRoZSBtYWdpY1xuICogZm9yIHJpY2ggdGV4dCBoYW5kbGluZywgdGhpcyBjb21wb25lbnQgZG9lcyBub3QgaGF2ZSBhbnkgZGVmaW5pdGlvblxuICogb24gaG93IGl0IGlzIHN1cHBvc2VkIHRvIHJlbmRlciB0aGluZ3MgbGlrZSB0aGUgdG9vbGJhciBhbmQgd2hhdCBmdW5jdGlvbnNcbiAqIHN1Y2ggcHJvdmlkZXMgaW4gb3JkZXIgdG8gYmUgYWJsZSB0byBjb25zdHJ1Y3QgdGhlIHJpY2ggdGV4dFxuICogYW5kIGl0J3MgdGhlIGpvYiBvZiB0aGUgZGV2ZWxvcGVyIHRvIGRlY2lkZSBob3cgdG8gZG8gc28sIGJ5IGRlZmF1bHQgdGhlcmVcbiAqIGlzIGEgd3JhcHBlciB0aGF0IGlzIHVzZWQgZm9yIGZhc3QgcHJvdG90eXBpbmcsIGJ1dCBpdCdzIGEgcmF0aGVyIGdlbmVyaWNcbiAqIG9uZSwgYW5kIGRldmVsb3BlcnMgdXNpbmcgaXRlbWl6ZSBzaG91bGQgdXNlIHRoaXMgc2xhdGUgZWRpdG9yIGNsYXNzIGFuZCBhcmVcbiAqIGNvbW1lbmRlZCB0bywgYmVjYXVzZSBpdCdzIGVhc3ksIGJ1dCB0aGV5IHNob3VsZCBwcmVmZXIgdG8gdXNlIHRoZWlyIG93blxuICogY3VzdG9taXplZCB3cmFwcGVyIHRvIHByb3ZpZGUgdGhlIGZ1bmN0aW9uYWxpdHkgdGhleSB3YW50IGFuZCBob3cgdGhleSB3YW50IGl0XG4gKiBzbyB0aGV5IGNhbiBkZWZpbmUgZXZlbiB0aGVpciBvd24gY3VzdG9tIHVpLWhhbmRsZXIgYmFzZWQgZWxlbWVudHMsIHN1Y2ggYXMsIGVnLlxuICogbWF0aCBjb21wb25lbnRzXG4gKiBcbiAqIGl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSB5b3VyIG93biBjdXN0b20gcmVuZGVyZXIgYW5kIGltcG9ydCB0aGlzIGNsYXNzLCBjb3B5aW5nIG9mZlxuICogdGhlIFByb3BlcnR5RW50cnlUZXh0IGJlY2F1c2UgaXQgd2lsbCBub3QgaW5jbHVkZSBhbnkgbWF0ZXJpYWwgVUkgZmFzdCBwcm90b3R5cGluZyByZXNvdXJjZXNcbiAqIG90aGVyd2lzZSBpZiB5b3UgYXJlIGFsc28gdXNpbmcgbWF0ZXJpYWwgVUkgYXMgaW5jbHVkZWQgaW4gaXRlbWl6ZSB5b3UgbWlnaHQgdXNlXG4gKiBXcmFwcGVyIGFuZCB3cmFwcGVyQXJncyBpbiB0aGUgcmVuZGVyZXJBcmdzIGJ1dCB0aGlzIGlzIHJhdGhlciBhZHZhbmNlZCwgdGhlIG1vc3RcbiAqIGFkdmFuY2VkIHN0dWZmIG9mZiBpdGVtaXplIGFuZCBvbmUgdGhhdCBzaG91bGQgYmUgc2ltcGxpZmllZFxuICovXG5leHBvcnQgY2xhc3MgU2xhdGVFZGl0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVNsYXRlRWRpdG9yUHJvcHMsIElTbGF0ZUVkaXRvclN0YXRlPiB7XG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSByZWFjdCBlZGl0b3IgZWxlbWVudCB0aGF0IGlzIGNyZWF0ZWRcbiAgICogdXNpbmcgc2xhdGVcbiAgICovXG4gIHByaXZhdGUgZWRpdG9yOiBJdGVtaXplRWRpdG9yO1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgdXBkYXRlIHRpbWVvdXQgdGhhdCBpcyB1c2VkIGluIG9yZGVyIHRvIHJ1biBvbkNoYW5nZSBldmVudHMgd2hlblxuICAgKiB0aGUgdXNlciBzdG9wcyB0eXBpbmcgYW5kIG5vdCBvbiBldmVyeSBrZXlzdHJva2UsIGJlY2F1c2UgcmljaCB0ZXh0IGlzIGV4cGVuc2l2ZVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVUaW1lb3V0OiBOb2RlSlMuVGltZW91dDtcbiAgcHJpdmF0ZSBpc0luTm9ybWFsaXphdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHByZXZlbnROb3JtYWxpemU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgLyoqXG4gICAqIFdoZW4gYSBjYWxsIHRvIGRlbGV0ZSB0aGUgY3VycmVudCBzZWxlY3RlZCBub2RlIGlzIGRvbmUsIHRoZSBzZWxlY3Rpb24gYW5jaG9ycyBhcyB0aGV5IGhhdmUgYmVlbiBzZXRcbiAgICogbmVlZCB0byBiZSByZW1vdmVkIGFuZCByZXNldCBiZWNhdXNlIG90aGVyd2lzZSB0aGV5IHdpbGwgYmUgcG9pbnRpbmcgdG8gaW52YWxpZCBub2RlcywgdGhpcyBpbnRlcm5hbFxuICAgKiBmbGFnIGFsbG93cyB0byBrZWVwIHRyYWNrIG9mIHRoYXQgc28uXG4gICAqIFxuICAgKiAxLiB0aGUgZGVsZXRlIGZ1bmN0aW9uIGdldHMgY2FsbGVkLCB0aGUgZmxhZyBnZXRzIHNldCB0byB0cnVlXG4gICAqIDIuIHNsYXRlIGlzIGludGVybmFsbHkgYXNrZWQgdG8gZGVsZXRlIGF0IHRoZSBzZWxlY3RlZCBhbmQgZ2l2ZW4gcGF0aFxuICAgKiAzLiB0aGlzIHRyaWdnZXJzIHRoZSBjaGFuZ2UgZnVuY3Rpb24gd2hpY2ggd2lsbCB0cnkgdG8gcmVjYWxjdWxhdGUgYW5jaG9ycywgYnV0IHRoZSBvbGQgYW5jaG9ycyBhcmUgaW52YWxpZFxuICAgKiA0LiBiZWNhdXNlIG9mIHRoZSBmbGFnIHRoZSBjaGFuZ2UgZnVuY3Rpb24ga25vd3MgdGhlIGxcdTAwRjZhc3QgY2hhbmdlIHdhcyBhIHNlbGVjdGVkIGRlbGV0ZSBhbmQgdGVsbHMgdGhlIGFuY2hvclxuICAgKiByZWNhbGN1bGF0aW9uIG5vdCB0byByZXVzZSBvbGQgYW5jaG9yc1xuICAgKi9cbiAgcHJpdmF0ZSBsYXN0Q2hhbmdlV2FzU2VsZWN0ZWREZWxldGU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIG9yaWdpbmFsU2V0RnJhZ21lbnREYXRhOiBhbnk7XG4gIHByaXZhdGUgb3JpZ2luYWxJbnNlcnREYXRhOiBhbnk7XG4gIHByaXZhdGUgaXNVbm1vdW50ZWQ6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBlZGl0YWJsZVJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50PiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuICBwcml2YXRlIHdyYXBwZXJSZWY6IFJlYWN0LlJlZk9iamVjdDxhbnk+ID0gUmVhY3QuY3JlYXRlUmVmKCk7XG5cbiAgLyoqXG4gICAqIFRoZSBzdGFuZGFyZCBkZXJpdmVkIHN0YXRlIGZ1bmN0aW9uIGlzIHVzZWQgaW4gb3JkZXIgdG8gc2V0IHRoZSBzdGF0ZSBpbiBhbiBlZmZlY3RpdmUgd2F5XG4gICAqIGl0IGlzIHVzZWQgYmVjYXVzZSB0aGUgYmVoYXZpb3VyIG9mIHRoaXMgZWRpdG9yIGlzIHJhdGhlciBjb21wbGV4XG4gICAqIEBwYXJhbSBwcm9wcyB0aGUgY3VycmVudCBwcm9wc1xuICAgKiBAcGFyYW0gc3RhdGUgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICogQHJldHVybnMgYSBwYXJ0aWFsIG9mIHRoZSBuZXcgc3RhdGUgb3IgbnVsbFxuICAgKi9cbiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhwcm9wczogSVNsYXRlRWRpdG9yUHJvcHMsIHN0YXRlOiBJU2xhdGVFZGl0b3JTdGF0ZSk6IFBhcnRpYWw8SVNsYXRlRWRpdG9yU3RhdGU+IHtcbiAgICAvLyB3ZSBvbmx5IG1lc3Mgd2l0aCB0aGUgc3RhdGUgaWYgd2UgYXJlIHN5bmNlZFxuICAgIC8vIGlmIHdlIGRpZCBub3Qgb3VyIHN0YXRlIHdvdWxkIGJhc2ljYWxseSBiZSBpbW11dGFibGVcbiAgICAvLyBhcyBpdCB3b3VsZCByZXN0b3JlIGZyb20gdGhlIHByb3Agb24gZWFjaCByZW5kZXIgY3ljbGVcbiAgICBpZiAoc3RhdGUuc3luY2VkKSB7XG4gICAgICAvLyBub3cgaWYgd2UgaGF2ZSBhbiBpbnRlcm5hbCB2YWx1ZSB0aGF0IGlzIGdpdmVuIHZpYSB0aGUgcHJvcHNcbiAgICAgIC8vIHRoaXMgbWVhbnMgdGhhdCB0aGlzIGlzIHRoZSBpbnRlcm5hbCB2YWx1ZSB0aGF0IHJlZmVycyB0byB0aGUgdmFsdWVcbiAgICAgIC8vIGl0c2VsZlxuICAgICAgaWYgKHByb3BzLnRyZWVWYWx1ZSkge1xuXG4gICAgICAgIC8vIHdlIGNoZWNrLCBpZiB3ZSBkb24ndCBoYXZlIGFuIGludGVybmFsIHZhbHVlIHRoZW4gY2VydGFpbmx5XG4gICAgICAgIC8vIHRoaXMgbmV3IGludGVybmFsIHZhbHVlIGFwcGxpZXMsIGFuZCBhbHNvIHdlIG9ubHkgY2FyZSBhYm91dCBjaGFuZ2luZ1xuICAgICAgICAvLyB0byB0aGUgaW50ZXJuYWwgdmFsdWUgbmV3IHZhbHVlIGlmIHRoZSBpZHMgYXJlIG1pc3RtYXRjaGluZyBhcyB0aGlzIGlkXG4gICAgICAgIC8vIHJlcHJlc2VudHMgdGhlIHVuaXF1ZSBzaWduYXR1cmUgb2YgdGhhdCB2YWx1ZVxuICAgICAgICBpZiAoIXN0YXRlLnRyZWVWYWx1ZSB8fCBwcm9wcy50cmVlVmFsdWUuaWQgIT09IHN0YXRlLnRyZWVWYWx1ZS5pZCkge1xuXG4gICAgICAgICAgLy8gc28gaWYgdGhlIGNyaXRlcmlhIHBhc3NlcywgYW5kIHRoZSBzaWduYXR1cmVzIGRvbid0IG1hdGNoIG9yIHRoZXJlJ3Mgbm8gaW50ZXJuYWxcbiAgICAgICAgICAvLyB2YWx1ZSB0byBjb21wYXJlIGFnYWluc3Qgd2Ugd2lsbCB1cGRhdGUgdGhlIGludGVybmFsIHZhbHVlIGFuZCBjbGVhciBhbGwgdGhlIGFuY2hvcnNcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHJlZVZhbHVlOiBwcm9wcy50cmVlVmFsdWUsXG4gICAgICAgICAgICBpc1JpY2hUZXh0OiBwcm9wcy5pc1JpY2hUZXh0LFxuICAgICAgICAgICAgY3VycmVudFJvb3RDb250ZXh0OiBwcm9wcy5yb290Q29udGV4dCB8fCBudWxsLFxuICAgICAgICAgICAgY3VycmVudFZhbGlkOiBwcm9wcy5jdXJyZW50VmFsaWQsXG5cbiAgICAgICAgICAgIGN1cnJlbnRUZXh0OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudElubGluZUVsZW1lbnQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50QmxvY2tFbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50czogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRUZXh0QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudElubGluZUVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yczogbnVsbCxcblxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkVGV4dDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHM6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yczogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUNvbnRleHQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRDb250ZXh0OiBudWxsLFxuICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBwcmV2aW91c1RleHRBbmNob3I6IG51bGwsXG5cbiAgICAgICAgICAgIGFsbG93c0luc2VydEVsZW1lbnQ6IGZhbHNlRm4sXG4gICAgICAgICAgICBhbGxvd3NUZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIGlubGluZUlzVm9pZDogZmFsc2UsXG4gICAgICAgICAgICBibG9ja0lzVm9pZDogZmFsc2UsXG4gICAgICAgICAgICB0b3Btb3N0U3VwZXJibG9ja0lzVm9pZDogZmFsc2UsXG4gICAgICAgICAgICBzdXBlckJsb2NrVUlIYW5kbGVyOiBudWxsLFxuICAgICAgICAgICAgYmxvY2tVSUhhbmRsZXI6IG51bGwsXG4gICAgICAgICAgICBpbmxpbmVVSUhhbmRsZXI6IG51bGwsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYW4gaW50ZXJuYWwgdmFsdWUgd2UgbmVlZCB0byB1c2UgdGhlIGdpdmVuXG4gICAgICAgIC8vIHN0cmluZ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYW5kIGRlc2VyaWFsaXplIGl0IGJhc2VkIG9uIHRoZSBwcm9wc1xuICAgICAgICBjb25zdCBuZXd0cmVlVmFsdWUgPSBwcm9wcy5pc1JpY2hUZXh0ID9cbiAgICAgICAgICBkZXNlcmlhbGl6ZShwcm9wcy52YWx1ZSwgc3RhdGUudHJlZVZhbHVlLCB7XG4gICAgICAgICAgICB1c2VDb250ZXh0UnVsZXNPZjogc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LFxuICAgICAgICAgIH0pIDpcbiAgICAgICAgICBkZXNlcmlhbGl6ZVBsYWluKHByb3BzLnZhbHVlLCBzdGF0ZS50cmVlVmFsdWUpO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm8gaW50ZXJuYWwgdmFsdWUgdG8gY29tcGFyZSwgb3IgdGhlIG5ldyBpbnRlcm5hbCB2YWx1ZSBkb2Vzbid0XG4gICAgICAgIC8vIG1hdGNoIHdpdGggdGhlIGN1cnJlbnQsIG5vdGUgdGhhdCB0aGUgc2lnbmF0dXJlIHdpbGwgbWF0Y2ggd2l0aCBwYXJzZWQgdmFsdWVzXG4gICAgICAgIC8vIGFzIGl0IHVzZXMgYSBuYW1lc3BhY2VkIHV1aWQgdGhhdCB3aWxsIGdpdmUgdGhlIHNhbWUgdmFsdWUgZm9yIHRoZSBzYW1lIHN0cmluZ1xuICAgICAgICBpZiAoIXN0YXRlLnRyZWVWYWx1ZSB8fCBuZXd0cmVlVmFsdWUuaWQgIT09IHN0YXRlLnRyZWVWYWx1ZS5pZCkge1xuXG4gICAgICAgICAgLy8gdGhlbiB3ZSBkbyB0aGUgc2FtZSBhbmQgc2V0IHRoZSBuZXcgaW50ZXJuYWwgdmFsdWVcbiAgICAgICAgICAvLyBhbmQgY2xlYXIgYWxsIHRoZSBhbmNob3JzXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRyZWVWYWx1ZTogbmV3dHJlZVZhbHVlLFxuICAgICAgICAgICAgaXNSaWNoVGV4dDogcHJvcHMuaXNSaWNoVGV4dCxcbiAgICAgICAgICAgIGN1cnJlbnRSb290Q29udGV4dDogcHJvcHMucm9vdENvbnRleHQgfHwgbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRWYWxpZDogcHJvcHMuY3VycmVudFZhbGlkLFxuXG4gICAgICAgICAgICBjdXJyZW50VGV4dDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRJbmxpbmVFbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudEJsb2NrRWxlbWVudDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHM6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50VGV4dEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRJbmxpbmVFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudEJsb2NrRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IG51bGwsXG5cbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgcHJldmlvdXNUZXh0QW5jaG9yOiBudWxsLFxuXG4gICAgICAgICAgICBhbGxvd3NJbnNlcnRFbGVtZW50OiBmYWxzZUZuLFxuICAgICAgICAgICAgYWxsb3dzVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBpbmxpbmVJc1ZvaWQ6IGZhbHNlLFxuICAgICAgICAgICAgYmxvY2tJc1ZvaWQ6IGZhbHNlLFxuICAgICAgICAgICAgdG9wbW9zdFN1cGVyYmxvY2tJc1ZvaWQ6IGZhbHNlLFxuICAgICAgICAgICAgc3VwZXJCbG9ja1VJSGFuZGxlcjogbnVsbCxcbiAgICAgICAgICAgIGJsb2NrVUlIYW5kbGVyOiBudWxsLFxuICAgICAgICAgICAgaW5saW5lVUlIYW5kbGVyOiBudWxsLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBzbGF0ZSBlZGl0b3IgY29tcG9uZW50XG4gICAqIEBwYXJhbSBwcm9wcyB0aGUgcHJvcHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJU2xhdGVFZGl0b3JQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAvLyBzZXR0aW5nIHVwIHRoZSBpbnRlcm5hbCB2YWx1ZSBmcm9tIHRoZSBwcm9wZXJ0eVxuICAgICAgLy8gZmlyc3Qgd2UgcGljayB0aGUgaW50ZXJuYWwgdmFsdWUgaWYgYXZhaWxhYmxlXG4gICAgICAvLyBvciBvdGhlcndpc2Ugd2UgcGFyc2Ugb25lXG4gICAgICB0cmVlVmFsdWU6IHByb3BzLnRyZWVWYWx1ZSB8fCAocHJvcHMuaXNSaWNoVGV4dCA/IGRlc2VyaWFsaXplKHByb3BzLnZhbHVlLCBudWxsLCB7XG4gICAgICAgIHVzZUNvbnRleHRSdWxlc09mOiBwcm9wcy5yb290Q29udGV4dCxcbiAgICAgIH0pIDogZGVzZXJpYWxpemVQbGFpbihwcm9wcy52YWx1ZSkpLFxuXG4gICAgICAvLyB3ZSBhcmUgc3luY2VkXG4gICAgICBzeW5jZWQ6IHRydWUsXG4gICAgICAvLyBmb2N1c2VkXG4gICAgICBmb2N1c2VkOiBmYWxzZSxcblxuICAgICAgLy8gc2V0IHVwIHRoZSBhbmNob3JzXG4gICAgICBjdXJyZW50VGV4dDogbnVsbCxcbiAgICAgIGN1cnJlbnRJbmxpbmVFbGVtZW50OiBudWxsLFxuICAgICAgY3VycmVudEJsb2NrRWxlbWVudDogbnVsbCxcbiAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHM6IG51bGwsXG4gICAgICBjdXJyZW50VGV4dEFuY2hvcjogbnVsbCxcbiAgICAgIGN1cnJlbnRJbmxpbmVFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgY3VycmVudEJsb2NrRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IG51bGwsXG5cbiAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzOiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvcjogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgIHByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgcHJldmlvdXNUZXh0QW5jaG9yOiBudWxsLFxuXG4gICAgICBpc1JpY2hUZXh0OiBwcm9wcy5pc1JpY2hUZXh0LFxuICAgICAgY3VycmVudFJvb3RDb250ZXh0OiBwcm9wcy5yb290Q29udGV4dCB8fCBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lQ29udGV4dDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRDb250ZXh0OiBudWxsLFxuICAgICAgY3VycmVudFZhbGlkOiBwcm9wcy5jdXJyZW50VmFsaWQsXG5cbiAgICAgIC8vIGVuc3VyZSBTU1IgY29tcGF0aWJpbGl0eVxuICAgICAgLy8gc2luY2Ugd2UgY2Fubm90IHJlYWQgdGhlIENTUyBmaWxlIG9uIHRoZSBzZXJ2ZXIgc2lkZVxuICAgICAgLy8gYXMgd2UgaGF2ZSBubyBhY2Nlc3MgdG8gc3R5bGVzaGVldHNcbiAgICAgIGFsbENvbnRhaW5lcnM6IFtdLFxuICAgICAgYWxsQ3VzdG9tOiBbXSxcbiAgICAgIGFsbFJpY2hDbGFzc2VzOiBbXSxcbiAgICAgIGFsbFRhYmxlczogW10sXG5cbiAgICAgIGFsbG93c0luc2VydEVsZW1lbnQ6IGZhbHNlRm4sXG4gICAgICBhbGxvd3NUZXh0OiBmYWxzZSxcbiAgICAgIGlubGluZUlzVm9pZDogZmFsc2UsXG4gICAgICBibG9ja0lzVm9pZDogZmFsc2UsXG4gICAgICB0b3Btb3N0U3VwZXJibG9ja0lzVm9pZDogZmFsc2UsXG4gICAgICBzdXBlckJsb2NrVUlIYW5kbGVyOiBudWxsLFxuICAgICAgYmxvY2tVSUhhbmRsZXI6IG51bGwsXG4gICAgICBpbmxpbmVVSUhhbmRsZXI6IG51bGwsXG4gICAgfVxuXG4gICAgdGhpcy5pc1VubW91bnRlZCA9IGZhbHNlO1xuXG4gICAgLy8gbm93IHdlIGJ1aWxkIHRoZSBzbGF0ZSBlZGl0b3JcbiAgICBjb25zdCByYXdFZGl0b3IgPSBjcmVhdGVFZGl0b3IoKTtcbiAgICAvLyB3aXRoIHJlYWN0IG9mIGNvdXJzZSA7KVxuICAgIHRoaXMuZWRpdG9yID0gd2l0aFJlYWN0KHdpdGhIaXN0b3J5KHJhd0VkaXRvcikpO1xuXG4gICAgdGhpcy5mb3JjZUZvY3VzID0gdGhpcy5mb3JjZUZvY3VzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5mb3JjZUJsdXIgPSB0aGlzLmZvcmNlQmx1ci5iaW5kKHRoaXMpO1xuXG4gICAgLy8gc2V0dGluZyB1cCB0aGUgZnVuY3Rpb25zIHRvIG92ZXJyaWRlXG4gICAgLy8gdGhlIGRlZmF1bHRzXG4gICAgdGhpcy5ub3JtYWxpemVOb2RlID0gdGhpcy5ub3JtYWxpemVOb2RlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRCcmVhayA9IHRoaXMuaW5zZXJ0QnJlYWsuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydFN1cGVyYnJlYWsgPSB0aGlzLmluc2VydFN1cGVyYnJlYWsuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZUJhY2t3YXJkID0gdGhpcy5kZWxldGVCYWNrd2FyZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlRm9yd2FyZCA9IHRoaXMuZGVsZXRlRm9yd2FyZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0RnJhZ21lbnREYXRhID0gdGhpcy5zZXRGcmFnbWVudERhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLmZpbmRBbmRBcHBlbmRGaWxlc1RvRGF0YVRyYW5zZmVyID0gdGhpcy5maW5kQW5kQXBwZW5kRmlsZXNUb0RhdGFUcmFuc2Zlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0RGF0YSA9IHRoaXMuaW5zZXJ0RGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZmluZEFuZEluc2VydEZpbGVzRnJvbURhdGFUcmFuc2ZlciA9IHRoaXMuZmluZEFuZEluc2VydEZpbGVzRnJvbURhdGFUcmFuc2Zlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaXNWb2lkID0gdGhpcy5pc1ZvaWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldENvbnRleHRGb3IgPSB0aGlzLmdldENvbnRleHRGb3IuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldFJvb3RDb250ZXh0ID0gdGhpcy5nZXRSb290Q29udGV4dC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5vcmlnaW5hbFNldEZyYWdtZW50RGF0YSA9IHRoaXMuZWRpdG9yLnNldEZyYWdtZW50RGF0YTtcbiAgICB0aGlzLm9yaWdpbmFsSW5zZXJ0RGF0YSA9IHRoaXMuZWRpdG9yLmluc2VydERhdGE7XG5cbiAgICAvLyBhbmQgc28gd2Ugb3ZlcnJpZGVcbiAgICB0aGlzLmVkaXRvci5pc0lubGluZSA9IHRoaXMuaXNJbmxpbmUgYXMgYW55O1xuICAgIHRoaXMuZWRpdG9yLmlzVm9pZCA9IHRoaXMuaXNWb2lkIGFzIGFueTtcbiAgICB0aGlzLmVkaXRvci5ub3JtYWxpemVOb2RlID0gdGhpcy5ub3JtYWxpemVOb2RlO1xuICAgIHRoaXMuZWRpdG9yLmluc2VydEJyZWFrID0gdGhpcy5pbnNlcnRCcmVhaztcbiAgICB0aGlzLmVkaXRvci5kZWxldGVCYWNrd2FyZCA9IHRoaXMuZGVsZXRlQmFja3dhcmQ7XG4gICAgdGhpcy5lZGl0b3IuZGVsZXRlRm9yd2FyZCA9IHRoaXMuZGVsZXRlRm9yd2FyZDtcbiAgICB0aGlzLmVkaXRvci5zZXRGcmFnbWVudERhdGEgPSB0aGlzLnNldEZyYWdtZW50RGF0YTtcbiAgICB0aGlzLmVkaXRvci5pbnNlcnREYXRhID0gdGhpcy5pbnNlcnREYXRhO1xuXG4gICAgdGhpcy5nZXRQcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvciA9IHRoaXMuZ2V0UHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3IuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldFByZXZpb3VzVGV4dEFuY2hvciA9IHRoaXMuZ2V0UHJldmlvdXNUZXh0QW5jaG9yLmJpbmQodGhpcyk7XG5cbiAgICAvLyBvdGhlciBmdW5jdGlvbnMgYW5kIGhlbGVyIHV0aWxpdGllc1xuICAgIHRoaXMuZGVsZXRlU2VsZWN0ZWROb2RlID0gdGhpcy5kZWxldGVTZWxlY3RlZE5vZGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZVBhdGggPSB0aGlzLmRlbGV0ZVBhdGguYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldFZhbHVlID0gdGhpcy5zZXRWYWx1ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVuZGVyRWxlbWVudCA9IHRoaXMucmVuZGVyRWxlbWVudC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYWN0dWFsbHlSZW5kZXJFbGVtZW50ID0gdGhpcy5hY3R1YWxseVJlbmRlckVsZW1lbnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVuZGVyVGV4dCA9IHRoaXMucmVuZGVyVGV4dC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25Gb2N1c2VkQ2hhbmdlID0gdGhpcy5vbkZvY3VzZWRDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQmx1cnJlZENoYW5nZSA9IHRoaXMub25CbHVycmVkQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbktleURvd24gPSB0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5kZWxldGVUYWJsZUNvbHVtbiA9IHRoaXMuZGVsZXRlVGFibGVDb2x1bW4uYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZVRhYmxlUm93ID0gdGhpcy5kZWxldGVUYWJsZVJvdy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2VsZWN0UGF0aCA9IHRoaXMuc2VsZWN0UGF0aC5iaW5kKHRoaXMpO1xuICAgIHRoaXMubW92ZVBhdGhzID0gdGhpcy5tb3ZlUGF0aHMuYmluZCh0aGlzKTtcbiAgICB0aGlzLmZvY3VzID0gdGhpcy5mb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0SW1hZ2UgPSB0aGlzLmluc2VydEltYWdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRWaWRlbyA9IHRoaXMuaW5zZXJ0VmlkZW8uYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZVZpZGVvID0gdGhpcy51cGRhdGVWaWRlby5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0RmlsZSA9IHRoaXMuaW5zZXJ0RmlsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0VGVtcGxhdGVUZXh0ID0gdGhpcy5pbnNlcnRUZW1wbGF0ZVRleHQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZVRlbXBsYXRlVGV4dCA9IHRoaXMudXBkYXRlVGVtcGxhdGVUZXh0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRUZW1wbGF0ZUhUTUwgPSB0aGlzLmluc2VydFRlbXBsYXRlSFRNTC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlVGVtcGxhdGVIVE1MID0gdGhpcy51cGRhdGVUZW1wbGF0ZUhUTUwuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydFRhYmxlID0gdGhpcy5pbnNlcnRUYWJsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0VGFibGVDb2x1bW4gPSB0aGlzLmluc2VydFRhYmxlQ29sdW1uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRUYWJsZVJvdyA9IHRoaXMuaW5zZXJ0VGFibGVSb3cuYmluZCh0aGlzKTtcbiAgICB0aGlzLnRvZ2dsZVRhYmxlID0gdGhpcy50b2dnbGVUYWJsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2FuVG9nZ2xlVGFibGUgPSB0aGlzLmNhblRvZ2dsZVRhYmxlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRDb250YWluZXIgPSB0aGlzLmluc2VydENvbnRhaW5lci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0Q3VzdG9tID0gdGhpcy5pbnNlcnRDdXN0b20uYmluZCh0aGlzKTtcbiAgICB0aGlzLnRvZ2dsZVF1b3RlID0gdGhpcy50b2dnbGVRdW90ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudG9nZ2xlVGl0bGUgPSB0aGlzLnRvZ2dsZVRpdGxlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRMaXN0ID0gdGhpcy5pbnNlcnRMaXN0LmJpbmQodGhpcyk7XG4gICAgdGhpcy50b2dnbGVMaW5rID0gdGhpcy50b2dnbGVMaW5rLmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGVMaW5rID0gdGhpcy51cGRhdGVMaW5rLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRTdHlsZSA9IHRoaXMuc2V0U3R5bGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldCA9IHRoaXMuc2V0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRIb3ZlclN0eWxlID0gdGhpcy5zZXRIb3ZlclN0eWxlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRBY3RpdmVTdHlsZSA9IHRoaXMuc2V0QWN0aXZlU3R5bGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldFJpY2hDbGFzc2VzID0gdGhpcy5zZXRSaWNoQ2xhc3Nlcy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0Q29udGV4dCA9IHRoaXMuc2V0Q29udGV4dC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0SWZDb25kaXRpb24gPSB0aGlzLnNldElmQ29uZGl0aW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRGb3JFYWNoID0gdGhpcy5zZXRGb3JFYWNoLmJpbmQodGhpcyk7XG4gICAgdGhpcy5mb3JtYXRUb2dnbGUgPSB0aGlzLmZvcm1hdFRvZ2dsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0QWN0aW9uID0gdGhpcy5zZXRBY3Rpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydEVsZW1lbnQgPSB0aGlzLmluc2VydEVsZW1lbnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldFN0YXRlID0gdGhpcy5nZXRTdGF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0VUlIYW5kbGVyID0gdGhpcy5zZXRVSUhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldFVJSGFuZGxlckFyZyA9IHRoaXMuc2V0VUlIYW5kbGVyQXJnLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmF2YWlsYWJsZUZpbHRlcmluZ0Z1bmN0aW9uID0gdGhpcy5hdmFpbGFibGVGaWx0ZXJpbmdGdW5jdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2FsY3VsYXRlQW5jaG9ycyA9IHRoaXMuY2FsY3VsYXRlQW5jaG9ycy5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy51cGRhdGVOb2RlQXQgPSB0aGlzLnVwZGF0ZU5vZGVBdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0Tm9kZUF0ID0gdGhpcy5pbnNlcnROb2RlQXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZU5vZGVBdCA9IHRoaXMuZGVsZXRlTm9kZUF0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5tZXJnZU5vZGVzQXQgPSB0aGlzLm1lcmdlTm9kZXNBdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc3BsaXRFbGVtZW50QW5kRXNjYXBlQ2hpbGRJbnRvUGFyZW50QXQgPSB0aGlzLnNwbGl0RWxlbWVudEFuZEVzY2FwZUNoaWxkSW50b1BhcmVudEF0LmJpbmQodGhpcyk7XG4gICAgdGhpcy53cmFwTm9kZUF0ID0gdGhpcy53cmFwTm9kZUF0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZXROb2RlQXQgPSB0aGlzLmdldE5vZGVBdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2xvbmVFbGVtZW50QXQgPSB0aGlzLmNsb25lRWxlbWVudEF0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5tb3ZlTm9kZUF0ID0gdGhpcy5tb3ZlTm9kZUF0LmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmhhcmRCbHVyID0gdGhpcy5oYXJkQmx1ci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2VsZWN0aXZlSGFyZEJsdXJJZkhhc1NlbGVjdGVkRWxlbWVudCA9IHRoaXMuc2VsZWN0aXZlSGFyZEJsdXJJZkhhc1NlbGVjdGVkRWxlbWVudC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc29mdEJsdXIgPSB0aGlzLnNvZnRCbHVyLmJpbmQodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBydW5zIGFuZCBwcmVwYXJlcyB0aGUgdHJlZSB0aGF0IGlzIHRvIGJlIGluc2VydGVkIGludG8gdGhlXG4gICAqIHBhc3RlZCBjb250ZW50XG4gICAqIEBwYXJhbSBkYXRhIHRoZSBkYXRhIHRyYW5zZmVyIG9mIHRoZSBjbGlwYm9hcmRcbiAgICogQHBhcmFtIGJsb2JzIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBibG9iIHRyYW5zZmVyIG9iamVjdFxuICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgZWxlbWVudCB3ZSBhcmUgY3VycmVudGx5IHByb2Nlc3NpbmdcbiAgICovXG4gIHB1YmxpYyBhc3luYyBmaW5kQW5kSW5zZXJ0RmlsZXNGcm9tRGF0YVRyYW5zZmVyKGRhdGE6IERhdGFUcmFuc2ZlciwgZWxlbWVudDogUmljaEVsZW1lbnQpOiBQcm9taXNlPFJpY2hFbGVtZW50PiB7XG4gICAgLy8gYnkgZGVmYXVsdCB0aGUgbmV3IGVsZW1lbnQgaXMgaXRzZWxmXG4gICAgbGV0IG5ld0VsZW1lbnQgPSBlbGVtZW50O1xuICAgIGxldCB3YXNPdmVyd3JpdHRlbiA9IGZhbHNlO1xuXG4gICAgLy8gaG93ZXZlciB3ZSBtaWdodCBoYXZlIHRoZXNlIHR5cGVzIHdlIG5lZWQgdG8gcHJvY2Vzc1xuICAgIGlmIChuZXdFbGVtZW50LnR5cGUgPT09IFwiaW1hZ2VcIiB8fCBuZXdFbGVtZW50LnR5cGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICBjb25zdCBpZFNwZWNpZmllZCA9IG5ld0VsZW1lbnQuc3JjSWQ7XG4gICAgICBjb25zdCB1cmxUb1JlYWRGcm9tID0gbmV3RWxlbWVudC5zcmM7XG5cbiAgICAgIGNvbnN0IGV4aXN0YW50RmlsZSA9IG5ld0VsZW1lbnQudHlwZSA9PT0gXCJpbWFnZVwiID9cbiAgICAgICAgdGhpcy5wcm9wcy5vblJldHJpZXZlSW1hZ2UoaWRTcGVjaWZpZWQpIDpcbiAgICAgICAgdGhpcy5wcm9wcy5vblJldHJpZXZlRmlsZShpZFNwZWNpZmllZCk7XG5cbiAgICAgIGlmIChleGlzdGFudEZpbGUpIHtcbiAgICAgICAgLy8gRmlsZSBiZWxvbmdzIHRvIHRoaXMgZWRpdG9yLCBub3RoaW5nIHRvIGRvXG4gICAgICAgIGlmIChuZXdFbGVtZW50LnR5cGUgPT09IFwiaW1hZ2VcIikge1xuICAgICAgICAgIGNvbnN0IG5ld0ltYWdlTm9kZTogSUltYWdlID0ge1xuICAgICAgICAgICAgLi4ubmV3RWxlbWVudCxcbiAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBib2xkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgdW5kZXJsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHNyYzogKGV4aXN0YW50RmlsZSBhcyBhbnkpLmZpbGUudXJsLFxuICAgICAgICAgICAgc3JjU2V0OiAoZXhpc3RhbnRGaWxlIGFzIGFueSkuc3Jjc2V0LFxuICAgICAgICAgICAgc2l6ZXM6IFwiNzB2d1wiLFxuICAgICAgICAgIH07XG4gICAgICAgICAgbmV3RWxlbWVudCA9IG5ld0ltYWdlTm9kZTtcbiAgICAgICAgICB3YXNPdmVyd3JpdHRlbiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgbmV3RmlsZU5vZGU6IElGaWxlID0ge1xuICAgICAgICAgICAgLi4ubmV3RWxlbWVudCxcbiAgICAgICAgICAgIHR5cGU6IFwiZmlsZVwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3JjOiAoZXhpc3RhbnRGaWxlIGFzIGFueSkudXJsLFxuICAgICAgICAgIH07XG4gICAgICAgICAgbmV3RWxlbWVudCA9IG5ld0ZpbGVOb2RlO1xuICAgICAgICAgIHdhc092ZXJ3cml0dGVuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmlsZSBiZWxvbmdzIHRvIGEgZGlmZmVyZW50IGVkaXRvciwgY2xvbmluZyB0aGUgY29udGVudFxuICAgICAgICBjb25zdCBpbmZvRnJvbUluc2VydCA9IGF3YWl0IHRoaXMucHJvcHMub25JbnNlcnRGaWxlRnJvbVVSTChcbiAgICAgICAgICB1cmxUb1JlYWRGcm9tLFxuICAgICAgICAgIChuZXdFbGVtZW50IGFzIGFueSkuZmlsZU5hbWUgfHwgKG5ld0VsZW1lbnQgYXMgYW55KS5hbHQgfHwgaWRTcGVjaWZpZWQsXG4gICAgICAgICAgbmV3RWxlbWVudC50eXBlID09PSBcImltYWdlXCIsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGluZm9Gcm9tSW5zZXJ0KSB7XG4gICAgICAgICAgaWYgKG5ld0VsZW1lbnQudHlwZSA9PT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZU5vZGU6IElJbWFnZSA9IHtcbiAgICAgICAgICAgICAgLi4ubmV3RWxlbWVudCxcbiAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZVwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgaXRhbGljOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBpbmZvRnJvbUluc2VydC5oZWlnaHQsXG4gICAgICAgICAgICAgIHdpZHRoOiBpbmZvRnJvbUluc2VydC53aWR0aCxcbiAgICAgICAgICAgICAgc3JjOiBpbmZvRnJvbUluc2VydC5yZXN1bHQudXJsLFxuICAgICAgICAgICAgICBzcmNJZDogaW5mb0Zyb21JbnNlcnQucmVzdWx0LmlkLFxuICAgICAgICAgICAgICBzcmNTZXQ6IG51bGwsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbmV3RWxlbWVudCA9IGltYWdlTm9kZTtcbiAgICAgICAgICAgIHdhc092ZXJ3cml0dGVuID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmlsZU5vZGU6IElGaWxlID0ge1xuICAgICAgICAgICAgICAuLi5uZXdFbGVtZW50LFxuICAgICAgICAgICAgICB0eXBlOiBcImZpbGVcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBib2xkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgdW5kZXJsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNpemU6IHByZXR0eUJ5dGVzKGluZm9Gcm9tSW5zZXJ0LnJlc3VsdC5zaXplKSxcbiAgICAgICAgICAgICAgc3JjOiBpbmZvRnJvbUluc2VydC5yZXN1bHQudXJsLFxuICAgICAgICAgICAgICBzcmNJZDogaW5mb0Zyb21JbnNlcnQucmVzdWx0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG5ld0VsZW1lbnQgPSBmaWxlTm9kZTtcbiAgICAgICAgICAgIHdhc092ZXJ3cml0dGVuID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3RWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgd2FzT3ZlcndyaXR0ZW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gaWYgd2Ugc3RpbGwgaGF2ZSB0aGUgZWxlbWVudCBhbmQgaXQgaGFzIGNoaWxkcmVuXG4gICAgLy8gd2UgbmVlZCB0byBwcm9jZXNzIHRob3NlIHRvb1xuICAgIGlmIChuZXdFbGVtZW50ICYmIG5ld0VsZW1lbnQuY2hpbGRyZW4gJiYgIXdhc092ZXJ3cml0dGVuKSB7XG4gICAgICBuZXdFbGVtZW50ID0geyAuLi5uZXdFbGVtZW50IH07XG4gICAgICBuZXdFbGVtZW50LmNoaWxkcmVuID0gKFxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCgobmV3RWxlbWVudC5jaGlsZHJlbiBhcyBhbnkpLm1hcCh0aGlzLmZpbmRBbmRJbnNlcnRGaWxlc0Zyb21EYXRhVHJhbnNmZXIuYmluZCh0aGlzLCBkYXRhKSkpXG4gICAgICApLmZpbHRlcihlID0+ICEhZSkgYXMgYW55O1xuICAgIH1cblxuICAgIHJldHVybiBuZXdFbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gcnVucyB3aGVuIHdlIGFyZSBpbnNlcnRpbmcgdXNpbmcgdGhlIHNsYXRlIGNsaXBib2FyZFxuICAgKiBAcGFyYW0gZGF0YSB0aGUgZGF0YSB0cmFuc2ZlclxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluc2VydERhdGEoZGF0YTogRGF0YVRyYW5zZmVyKSB7XG4gICAgLy8gd2UgZ3JhYiB0aGUgZnJhZ21lbnQgZGF0YSBmb3Igc2xhdGVcbiAgICBjb25zdCBmcmFnbWVudCA9IGRhdGEuZ2V0RGF0YSgnYXBwbGljYXRpb24veC1zbGF0ZS1mcmFnbWVudCcpO1xuXG4gICAgLy8gaWYgd2UgaGF2ZSBpdCB0aGlzIGlzIHRoZSBkZWZhdWx0IGNsaXBib2FyZFxuICAgIC8vIHRoaXMgc2hvdWxkIG5vdCBoYXBwZW4gYnkgZGVmYXVsdCB0aGlzIG1lYW5zIGl0IGlzIHVzaW5nIHRoZSBmYWxsYmFja1xuICAgIC8vIGNsaXBib2FyZCBtZWNoYW5pc21cbiAgICBpZiAoZnJhZ21lbnQpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlRoZSBlZGl0b3IgdXNlZCB0aGUgZmFsbGJhY2sgY2xpcGJvYXJkIG1lY2hhbmlzbSByYXRoZXIgdGhhbiB0aGUgbmV3IGNsaXBib2FyZCwgZmlsZXMgbWF5IGZhaWwgdG8gbG9hZFwiKTtcbiAgICAgIC8vIHRoZW4gd2UgZGVjb2RlIGFuZCBwYXJzZVxuICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZVVSSUNvbXBvbmVudCh3aW5kb3cuYXRvYihmcmFnbWVudCkpO1xuICAgICAgLy8gbm90ZSBob3cgd2UgZmlsdGVyIGluIGNhc2UgYml0cyBmYWlsIHRvIGxvYWQgKGFrYSBpbWFnZXMgYW5kIGZpbGVzKVxuICAgICAgY29uc3QgcGFyc2VkID0gKFxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChKU09OLnBhcnNlKGRlY29kZWQpLm1hcCh0aGlzLmZpbmRBbmRJbnNlcnRGaWxlc0Zyb21EYXRhVHJhbnNmZXIuYmluZCh0aGlzLCBkYXRhKSkpIGFzIE5vZGVbXVxuICAgICAgKS5maWx0ZXIoZSA9PiAhIWUpIGFzIGFueTtcblxuICAgICAgaWYgKCFwYXJzZWQgfHwgIXBhcnNlZC5sZW5ndGgpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGZpbmQgY2hpbGRyZW4gdG8gYWRkXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIG5vdyB3ZSBjYW4gaW5zZXJ0IHRoYXQgZnJhZ21lbnQgb25jZSB3ZSBhcmUgZG9uZVxuICAgICAgY29uc3Qgc2hvdWxkVXNlSW5zZXJ0RnJhZ21lbnQgPSAhaXNTdXBlckJsb2NrKHBhcnNlZFswXSk7XG4gICAgICBpZiAoc2hvdWxkVXNlSW5zZXJ0RnJhZ21lbnQpIHtcbiAgICAgICAgLy8gaW5zZXJ0aW5nIGEgZnJhZ21lbnQgYWxsb3dzIG1lcmdpbmcgb2YgYmxvY2tzXG4gICAgICAgIC8vIHdpdGggdGhpcyB3ZSBlbnN1cmUgdGhhdCBmb3IgZXhhbXBsZSwgYSB0aXRsZSBjYW4gYmUgcGFzdGVkXG4gICAgICAgIC8vIGluc2lkZSBhIHBhcmFncmFwaFxuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydEZyYWdtZW50KHRoaXMuZWRpdG9yLCBwYXJzZWQpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3IpIHtcbiAgICAgICAgLy8gdGhlIG5leHQgb25lIGlzIGEgc3VwZXJibG9jayB3ZSBhcmUgdHJ5aW5nIHRvIHB1c2hcbiAgICAgICAgLy8gd2UgZG8gbm90IGFsbG93IGl0IGF0dGVtcHRpbmcgdG8gbWVyZ2Ugd2l0aCBvdXIgY3VycmVudFxuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBwYXJzZWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChkYXRhLmZpbGVzLmxlbmd0aCkge1xuICAgICAgQXJyYXkuZnJvbShkYXRhLmZpbGVzKS5mb3JFYWNoKChmKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnN1cHBvcnRlZEltYWdlVHlwZXMuaW5jbHVkZXMoZi50eXBlKSkge1xuICAgICAgICAgIHRoaXMuaW5zZXJ0SW1hZ2UoZiwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuaW5zZXJ0RmlsZShmKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gbmV3IHdheSB0aGF0IG9mZmVycyBzdXBlciBjb21wYWJpbGl0eSB3aXRoIGV2ZXJ5dGhpbmdcbiAgICBjb25zdCBodG1sRGF0YSA9IGRhdGEuZ2V0RGF0YShcInRleHQvaHRtbFwiKTtcbiAgICBpZiAoaHRtbERhdGEpIHtcbiAgICAgIC8vIHdlIGRlc2VyaWFsaXplIGFuZCBwcm9jZXNzIGEgcmF3IGh0bWxcbiAgICAgIGNvbnN0IGRlc2VyaWFsaXplZCA9IGRlc2VyaWFsaXplKGh0bWxEYXRhLCBudWxsLCB7XG4gICAgICAgIGRvbnROb3JtYWxpemU6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgLy8gdGhlbiBzZW5kIGl0IGZvciBmaWxlIHByb2Nlc3NpbmdcbiAgICAgIGNvbnN0IHBhcnNlZCA9IChcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZGVzZXJpYWxpemVkLmNoaWxkcmVuLm1hcCh0aGlzLmZpbmRBbmRJbnNlcnRGaWxlc0Zyb21EYXRhVHJhbnNmZXIuYmluZCh0aGlzLCBkYXRhKSkpIGFzIE5vZGVbXVxuICAgICAgKS5maWx0ZXIoZSA9PiAhIWUpIGFzIGFueTtcblxuICAgICAgaWYgKCFwYXJzZWQgfHwgIXBhcnNlZC5sZW5ndGgpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGZpbmQgY2hpbGRyZW4gdG8gYWRkXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIG5vdyB3ZSBjYW4gaW5zZXJ0IHRoYXQgZnJhZ21lbnQgb25jZSB3ZSBhcmUgZG9uZVxuICAgICAgY29uc3Qgc2hvdWxkVXNlSW5zZXJ0RnJhZ21lbnQgPSAhaXNTdXBlckJsb2NrKHBhcnNlZFswXSk7XG4gICAgICBpZiAoc2hvdWxkVXNlSW5zZXJ0RnJhZ21lbnQpIHtcbiAgICAgICAgLy8gaW5zZXJ0aW5nIGEgZnJhZ21lbnQgYWxsb3dzIG1lcmdpbmcgb2YgYmxvY2tzXG4gICAgICAgIC8vIHdpdGggdGhpcyB3ZSBlbnN1cmUgdGhhdCBmb3IgZXhhbXBsZSwgYSB0aXRsZSBjYW4gYmUgcGFzdGVkXG4gICAgICAgIC8vIGluc2lkZSBhIHBhcmFncmFwaFxuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydEZyYWdtZW50KHRoaXMuZWRpdG9yLCBwYXJzZWQpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3IpIHtcbiAgICAgICAgLy8gdGhlIG5leHQgb25lIGlzIGEgc3VwZXJibG9jayB3ZSBhcmUgdHJ5aW5nIHRvIHB1c2hcbiAgICAgICAgLy8gd2UgZG8gbm90IGFsbG93IGl0IGF0dGVtcHRpbmcgdG8gbWVyZ2Ugd2l0aCBvdXIgY3VycmVudFxuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBwYXJzZWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9yaWdpbmFsSW5zZXJ0RGF0YShkYXRhKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0RGF0YVVSSShibG9iOiBCbG9iKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcImxvYWRcIixcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIC8vIGNvbnZlcnQgaW1hZ2UgZmlsZSB0byBiYXNlNjQgc3RyaW5nXG4gICAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0IGFzIGFueSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZhbHNlXG4gICAgICApO1xuICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoKSA9PiB7XG4gICAgICAgIHJlamVjdCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUnVucyBwZXIgZWFjaCByaWNoIGVsZW1lbnQgdGhhdCBoYXMganVzdCBiZWVuIGNvcGllZCB0byB0aGUgY2xpcGJvYXJkXG4gICAqIEBwYXJhbSBkYXRhIHRoZSBkYXRhIHRyYW5zZmVyXG4gICAqIEBwYXJhbSBlbGVtZW50IHRoZSByaWNoIGVsZW1lbnQgd2UgaGF2ZSBqdXN0IGNvcGllZFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGZpbmRBbmRBcHBlbmRGaWxlc1RvRGF0YVRyYW5zZmVyKGRhdGE6IERhdGFUcmFuc2ZlciwgZWxlbWVudDogUmljaEVsZW1lbnQpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIHdlIHdhbnQgdG8gc3BvdCBpbWFnZXMgYW5kIGZpbGVzXG4gICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJpbWFnZVwiIHx8IGVsZW1lbnQudHlwZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIC8vIGdldCB0aGUgdXJsXG4gICAgICBjb25zdCB1cmxUb1JlYWRGcm9tID0gZWxlbWVudC5zcmM7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCAoKGF3YWl0IGZldGNoKHVybFRvUmVhZEZyb20pKS5ibG9iKCkpO1xuICAgICAgICBjb25zdCBkYXRhVVJJID0gYXdhaXQgdGhpcy5nZXREYXRhVVJJKGJsb2IpO1xuXG4gICAgICAgIC8vIC8vIGlmIGl0J3MgYSBibG9iXG4gICAgICAgIC8vIGNvbnN0IGlzQmxvYiA9IHVybFRvUmVhZEZyb20uc3RhcnRzV2l0aChcImJsb2I6XCIpO1xuXG4gICAgICAgIC8vIC8vIHRoZW4gd2Ugc2hvdWxkIHRoaW5rIGFib3V0IGNvcHlpbmcgaXQgcmlnaHQgaW50byB0aGUgZGF0YSB0cmFuc2ZlclxuICAgICAgICAvLyAvLyBzaW5jZSBibG9icyBhcmUgdGVtcG9yYXJ5XG4gICAgICAgIC8vIGlmIChpc0Jsb2IpIHtcbiAgICAgICAgLy8gICBjb25zdCB1cmxEYXRhID0gdGhpcy5wcm9wcy5vblJldHJpZXZlRGF0YVVSSShlbGVtZW50LnNyY0lkKTtcbiAgICAgICAgLy8gICBpZiAodXJsRGF0YSkge1xuICAgICAgICAvLyAgICAgZ2F0aGVyZWRGaWxlc1tlbGVtZW50LnNyY0lkXSA9IHVybERhdGE7XG4gICAgICAgIC8vICAgfVxuICAgICAgICAvLyB9XG5cbiAgICAgICAgZWxlbWVudC5zcmMgPSBkYXRhVVJJO1xuICAgICAgICBkZWxldGUgKGVsZW1lbnQgYXMgSUltYWdlKS5zcmNTZXQ7XG4gICAgICB9IGNhdGNoIChlcnIpIHsgfVxuICAgIH1cblxuICAgIC8vIG5vdyB3ZSBydW4gcGVyIGVhY2ggY2hpbGRyZW5cbiAgICBpZiAoZWxlbWVudC5jaGlsZHJlbikge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoKGVsZW1lbnQuY2hpbGRyZW4gYXMgYW55KS5tYXAodGhpcy5maW5kQW5kQXBwZW5kRmlsZXNUb0RhdGFUcmFuc2Zlci5iaW5kKHRoaXMsIGRhdGEpKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gcnVucyB3aGVuIHdlIGFyZSBwcmVwYXJpbmcgdGhlIHNsYXRlIGNsaXBib2FyZFxuICAgKiBAcGFyYW0gZGF0YSB0aGUgZGF0YSB0cmFuc2ZlclxuICAgKi9cbiAgcHVibGljIGFzeW5jIHNldEZyYWdtZW50RGF0YShkYXRhOiBEYXRhVHJhbnNmZXIpIHtcbiAgICAvLyB3ZSBydW4gdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHRvIHByZXBhcmUgdGhlIGNsaXBib2FyZFxuICAgIHRoaXMub3JpZ2luYWxTZXRGcmFnbWVudERhdGEoZGF0YSk7XG5cbiAgICAvLyBuZWVkIHRvIGZpbmQgdGhlIGZpbGVzIHRoYXQgYXJlIGluY2x1ZGVkIGluIHRoZSBjb3B5XG4gICAgY29uc3QgZnJhZ21lbnQ2NCA9IGRhdGEuZ2V0RGF0YShcImFwcGxpY2F0aW9uL3gtc2xhdGUtZnJhZ21lbnRcIik7XG4gICAgaWYgKGZyYWdtZW50NjQgJiYgbmF2aWdhdG9yLmNsaXBib2FyZCkge1xuICAgICAgLy8gd2UgYXJlIGRvaW5nIHRoZSByZWFsIGNvcHlpbmcgaGVyZSBzaW5jZSB0aGUgY29weWluZyBtZWNoYW5pc21cbiAgICAgIC8vIHRoYXQgY29tZXMgYnkgZGVmYXVsdCBpcyBub3QgdmVyeSBnb29kXG4gICAgICBjb25zdCBjb3B5RGF0YVRyZWU6IFJpY2hFbGVtZW50W10gPSBKU09OLnBhcnNlKGRlY29kZVVSSUNvbXBvbmVudChhdG9iKGZyYWdtZW50NjQpKSk7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChjb3B5RGF0YVRyZWUubWFwKHRoaXMuZmluZEFuZEFwcGVuZEZpbGVzVG9EYXRhVHJhbnNmZXIuYmluZCh0aGlzLCBkYXRhKSkpO1xuXG4gICAgICBjb25zdCBkb2N1bWVudCA9ICh7XG4gICAgICAgIGNoaWxkcmVuOiBjb3B5RGF0YVRyZWUgYXMgYW55LFxuICAgICAgICBpZDogXCJDT1BZX0VMRU1FTlRcIixcbiAgICAgICAgcmljaDogdHJ1ZSxcbiAgICAgICAgdHlwZTogXCJkb2N1bWVudFwiIGFzIFwiZG9jdW1lbnRcIixcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBodG1sID0gc2VyaWFsaXplKGRvY3VtZW50KSBhcyBIVE1MRWxlbWVudFtdO1xuICAgICAgY29uc3QgaHRtbFN0ciA9IGh0bWwubWFwKChuKSA9PiBuLm91dGVySFRNTCkuam9pbihcIlwiKTtcbiAgICAgIGNvbnN0IHRleHQgPSBzZXJpYWxpemVTdHJpbmcoZG9jdW1lbnQpO1xuXG4gICAgICBjb25zdCB0ZXh0UGxhaW4gPSBuZXcgQmxvYihbdGV4dF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pO1xuICAgICAgY29uc3QgaHRtbEJvZHkgPSBuZXcgQmxvYihbaHRtbFN0cl0sIHsgdHlwZTogJ3RleHQvaHRtbCcgfSk7XG4gICAgICBjb25zdCBpdGVtID0gbmV3IENsaXBib2FyZEl0ZW0oe1xuICAgICAgICAndGV4dC9wbGFpbic6IHRleHRQbGFpbixcbiAgICAgICAgXCJ0ZXh0L2h0bWxcIjogaHRtbEJvZHksXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGUoW2l0ZW1dKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU5vZGVBdChwYXRoOiBQYXRoLCB2OiBQYXJ0aWFsPFJpY2hFbGVtZW50IHwgSVRleHQ+KSB7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwgdiwge1xuICAgICAgYXQ6IHBhdGgsXG4gICAgfSk7XG4gIH1cbiAgcHJpdmF0ZSBkZWxldGVOb2RlQXQocGF0aDogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMuZGVsZXRlKHRoaXMuZWRpdG9yLCB7XG4gICAgICBhdDogcGF0aCxcbiAgICB9KTtcbiAgfVxuICBwcml2YXRlIGluc2VydE5vZGVBdChwYXRoOiBQYXRoLCBub2RlOiBSaWNoRWxlbWVudCB8IElUZXh0LCB0YXJnZXRJbmRleDogbnVtYmVyKSB7XG4gICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgbm9kZSwge1xuICAgICAgYXQ6IFsuLi5wYXRoLCB0YXJnZXRJbmRleF0sXG4gICAgfSk7XG4gIH1cbiAgcHJpdmF0ZSBtZXJnZU5vZGVzQXQoYmFzZVBhdGg6IFBhdGgsIHJlZmVyZW5jZVBhdGg6IFBhdGgpIHtcbiAgICBjb25zdCBwYXJlbnRQYXRoID0gWy4uLmJhc2VQYXRoXTtcbiAgICBwYXJlbnRQYXRoLnBvcCgpO1xuXG4gICAgLy8gZHVlIHRvIGEgc2xhdGUgYnVnIG1lcmdpbmcgZG9lc24ndCBxdWl0ZSB3b3JrXG4gICAgLy8gaXQganVzdCBkb2VzIG5vdGhpbmcsIGRlc3BpdGUgdGhlIHNwZWNpZmljYXRpb25cbiAgICAvLyB0aGUgc2Vjb25kIGFyZ3VtZW50IGRvZXNuJ3QgcGFzcyBlaXRoZXJcbiAgICBUcmFuc2Zvcm1zLm1lcmdlTm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIGF0OiByZWZlcmVuY2VQYXRoLFxuICAgICAgdm9pZHM6IHRydWUsXG4gICAgfSk7XG4gIH1cbiAgcHJpdmF0ZSBzcGxpdEVsZW1lbnRBbmRFc2NhcGVDaGlsZEludG9QYXJlbnRBdChwYXRoOiBQYXRoLCBlc2NhcGluZ0NoaWxkSW5kZXg6IG51bWJlcikge1xuICAgIFRyYW5zZm9ybXMubGlmdE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICBhdDogWy4uLnBhdGgsIGVzY2FwaW5nQ2hpbGRJbmRleF0sXG4gICAgfSlcbiAgfVxuICBwcml2YXRlIHdyYXBOb2RlQXQocGF0aDogUGF0aCwgd3JhcHBlcnM6IFJpY2hFbGVtZW50W10pIHtcbiAgICB3cmFwcGVycy5mb3JFYWNoKCh3cmFwcGVyKSA9PiB7XG4gICAgICBUcmFuc2Zvcm1zLndyYXBOb2Rlcyh0aGlzLmVkaXRvciwgd3JhcHBlciwge1xuICAgICAgICBhdDogcGF0aCxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHByaXZhdGUgZ2V0Tm9kZUF0KHBhdGg6IFBhdGgpIHtcbiAgICByZXR1cm4gTm9kZS5nZXQodGhpcy5lZGl0b3IsIHBhdGgpIGFzIFJpY2hFbGVtZW50IHwgSVRleHQ7XG4gIH1cbiAgcHJpdmF0ZSBjbG9uZUVsZW1lbnRBdChmcm9tUGF0aDogUGF0aCwgdG9QYXRoOiBQYXRoKSB7XG4gICAgY29uc3QgdG9Db3B5Tm9kZSA9IHRoaXMuZ2V0Tm9kZUF0KGZyb21QYXRoKSBhcyBSaWNoRWxlbWVudDtcbiAgICBjb25zdCBjb3B5ID0ge1xuICAgICAgLi4udG9Db3B5Tm9kZSxcbiAgICB9XG4gICAgY29weS5jaGlsZHJlbiA9IFtdO1xuXG4gICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgY29weSwge1xuICAgICAgYXQ6IHRvUGF0aCxcbiAgICB9KTtcbiAgfVxuICBwcml2YXRlIG1vdmVOb2RlQXQoZnJvbVBhdGg6IFBhdGgsIHRvUGF0aDogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICBhdDogZnJvbVBhdGgsXG4gICAgICB0bzogdG9QYXRoLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6YXRpb24gZnVuY2l0b24gdGhhdCBvdmVycmlkZXMgdGhlIG5vcm1hbGl6YXRpb25cbiAgICogb2YgdGhlIHN0YW5kYXJkIGVkaXRvclxuICAgKiBAcGFyYW0gZW50cnkgdGhlIGVudHJ5IHdlIGFyZSBub3JtYWxpemluZ1xuICAgKi9cbiAgcHVibGljIG5vcm1hbGl6ZU5vZGUoZW50cnk6IE5vZGVFbnRyeTxOb2RlPikge1xuICAgIC8vIHRoZSBub3JtYWxpemF0aW9uIGZ1bmN0aW9uIHRoYXQgY29tZXNcbiAgICAvLyBmcm9tIHRoZSBzZXJpYWxpemVyIHRha2VzIGNhcmUgb2YgdGhlXG4gICAgLy8gZW50aXJlIHNlcmlhbGl6YXRpb24gbWVjaGFuaXNtIGFuZCBzaGFsbCBub3RcbiAgICAvLyBiZSByZWNhbGxlZCB3aGVuIGl0J3MgZG9pbmcgaXRzIGpvYlxuICAgIGlmICh0aGlzLmlzSW5Ob3JtYWxpemF0aW9uIHx8IHRoaXMucHJldmVudE5vcm1hbGl6ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IFtub2RlLCBwYXRoXSA9IGVudHJ5O1xuXG4gICAgLy8gaWYgaXQncyB0aGUgZWRpdG9yIGl0c2VsZiwgdGhpcyBpcyB0aGUgb25seSBjYXNlXG4gICAgLy8gd2Ugd2FudCB0byBub3JtYWxpemVcbiAgICAvLyB3ZSB3YW50IHRvIGF2b2lkIG90aGVycyBhcyB0aGV5IGFyZSB2ZXJib3NlXG4gICAgaWYgKEVkaXRvci5pc0VkaXRvcihub2RlKSkge1xuICAgICAgdGhpcy5pc0luTm9ybWFsaXphdGlvbiA9IHRydWU7XG5cbiAgICAgIC8vIHRoaXMgd2lsbCBiYXNpY2FsbHkgYmUgdHJ1ZSBldmVyeSB0aW1lXG4gICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gd2UgaW5zZXJ0IGEgcGFyYWdyYXBoXG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsXG4gICAgICAgICAgeyB0eXBlOiBcInBhcmFncmFwaFwiLCBjaGlsZHJlbjogW1NUQU5EQVJEX1RFWFRfTk9ERSgpIGFzIGFueV0gfSxcbiAgICAgICAgICB7IGF0OiBwYXRoLmNvbmNhdCgwKSB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBwc2V1ZG9Eb2N1bWVudDogSVJvb3RMZXZlbERvY3VtZW50ID0ge1xuICAgICAgICAgIHR5cGU6IFwiZG9jdW1lbnRcIixcbiAgICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbiBhcyBhbnksXG4gICAgICAgICAgaWQ6IHRoaXMuc3RhdGUudHJlZVZhbHVlLmlkLFxuICAgICAgICAgIHJpY2g6IHRoaXMuc3RhdGUudHJlZVZhbHVlLnJpY2gsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgbm9kZUF0U2VsZWN0aW9uID0gdGhpcy5lZGl0b3Iuc2VsZWN0aW9uID8gdGhpcy5nZXROb2RlQXQodGhpcy5lZGl0b3Iuc2VsZWN0aW9uLmFuY2hvci5wYXRoKSA6IG51bGw7XG4gICAgICAgIGNvbnN0IG5vZGVJZ25vcmU6IFBhdGhbXSA9IFtdO1xuICAgICAgICBpZiAoVGV4dC5pc1RleHQobm9kZUF0U2VsZWN0aW9uKSAmJiBub2RlQXRTZWxlY3Rpb24udGV4dCA9PT0gXCJcIikge1xuICAgICAgICAgIG5vZGVJZ25vcmUucHVzaCh0aGlzLmVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLnBhdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBub3JtYWxpemVFbGVtZW50KFxuICAgICAgICAgICAgcHNldWRvRG9jdW1lbnQsXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgICAgIHBzZXVkb0RvY3VtZW50LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB3b3JrT25PcmlnaW5hbDogZmFsc2UsXG4gICAgICAgICAgICAgIHVwZGF0ZU5vZGVBdDogdGhpcy51cGRhdGVOb2RlQXQsXG4gICAgICAgICAgICAgIGRlbGV0ZU5vZGVBdDogdGhpcy5kZWxldGVOb2RlQXQsXG4gICAgICAgICAgICAgIGluc2VydE5vZGVBdDogdGhpcy5pbnNlcnROb2RlQXQsXG4gICAgICAgICAgICAgIG1lcmdlTm9kZXNBdDogdGhpcy5tZXJnZU5vZGVzQXQsXG4gICAgICAgICAgICAgIHNwbGl0RWxlbWVudEFuZEVzY2FwZUNoaWxkSW50b1BhcmVudEF0OiB0aGlzLnNwbGl0RWxlbWVudEFuZEVzY2FwZUNoaWxkSW50b1BhcmVudEF0LFxuICAgICAgICAgICAgICB3cmFwTm9kZUF0OiB0aGlzLndyYXBOb2RlQXQsXG4gICAgICAgICAgICAgIGdldE5vZGVBdDogdGhpcy5nZXROb2RlQXQsXG4gICAgICAgICAgICAgIGNsb25lRWxlbWVudEF0OiB0aGlzLmNsb25lRWxlbWVudEF0LFxuICAgICAgICAgICAgICBtb3ZlTm9kZUF0OiB0aGlzLm1vdmVOb2RlQXQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZ25vcmVOb2Rlc0F0OiBub2RlSWdub3JlLFxuICAgICAgICAgICAgICB1c2VDb250ZXh0UnVsZXNPZjogdGhpcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIuc3RhY2spO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuaXNJbk5vcm1hbGl6YXRpb24gPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgZm9yIHRoZSBkZWZhdWx0IGVkaXRvciBpbmxpbmUgZnVuY3Rpb25cbiAgICogQHBhcmFtIGVsZW1lbnQgdGhlIGVsZW1lbnQgdGhhdCBpcyB0byBiZSBjb25zaWRlcmVkXG4gICAqIEByZXR1cm5zIGEgYm9vbGVhbiBvbiB3aGV0aGVyIGl0IHJlcHJlc2VudHMgYW4gaW5saW5lIGVsZW1lbnRcbiAgICovXG4gIHB1YmxpYyBpc0lubGluZShlbGVtZW50OiBSaWNoRWxlbWVudCkge1xuICAgIHJldHVybiBpc0lubGluZShlbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSBmb3IgdGhlIGRlZmF1bHQgZWRpdG9yIHZvaWQgZnVuY3Rpb25cbiAgICogQHBhcmFtIGVsZW1lbnQgdGhlIGVsZW1lbnQgdGhhdCBpcyB0byBiZSBjb25zaWRlcmVkXG4gICAqIEByZXR1cm5zIGEgYm9vbGVhbiBvbiB3aGV0aGVyIGl0IHJlcHJlc2VudHMgYSB2b2lkIGVsZW1lbnRcbiAgICovXG4gIHB1YmxpYyBpc1ZvaWQoZWxlbWVudDogUmljaEVsZW1lbnQpIHtcbiAgICByZXR1cm4gaXNWb2lkKGVsZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIGZvciB0aGUgZGVmYXVsdCBlZGl0b3IgaW5zZXJ0IGJyZWFrIGZ1bmN0aW9uXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0QnJlYWsoKSB7XG4gICAgY29uc3QgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50ID0gdGhpcy5zdGF0ZS5jdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzICYmXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHNbdGhpcy5zdGF0ZS5jdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzLmxlbmd0aCAtIDFdO1xuXG4gICAgY29uc3QgaXNMaXN0SXRlbUJyZWFrID0gKFxuICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50ICYmXG4gICAgICAvLyBhbmQgd2UgYXJlIHdpdGhpbiBhIGxpc3QgYW5kIGEgbGlzdCBpdGVtXG4gICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnQudHlwZSA9PT0gXCJsaXN0LWl0ZW1cIlxuICAgICk7XG4gICAgaWYgKFxuICAgICAgLy8gaWYgd2UgYXJlIHNpbXBseSBjb2xsYXBzZWRcbiAgICAgIFJhbmdlLmlzQ29sbGFwc2VkKHRoaXMuZWRpdG9yLnNlbGVjdGlvbikgJiZcbiAgICAgIC8vIGFuZCB3ZSBoYXZlIGEgbGlzdCBpdGVtXG4gICAgICBpc0xpc3RJdGVtQnJlYWsgJiZcbiAgICAgIC8vIGFuZCB0aGF0IGZpcnN0IGNoaWxkcmVuIGlzIGFuIGVtcHR5IHBhcmFncmFwaFxuICAgICAgLy8gdGhlcmUgbWF5IGJlIGEgc2Vjb25kIGxpc3RcbiAgICAgIChjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnQuY2hpbGRyZW5bMF0gYXMgYW55KS50eXBlID09PSBcInBhcmFncmFwaFwiICYmXG4gICAgICAvLyB3aXRoIG9uZSBlbXB0eSB0ZXh0IG5vZGVcbiAgICAgIChjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnQuY2hpbGRyZW5bMF0gYXMgYW55KS5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiZcbiAgICAgIFRleHQuaXNUZXh0KChjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnQuY2hpbGRyZW5bMF0gYXMgYW55KS5jaGlsZHJlblswXSkgJiZcbiAgICAgIChjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnQuY2hpbGRyZW5bMF0gYXMgYW55KS5jaGlsZHJlblswXS50ZXh0ID09PSBcIlwiXG4gICAgICAvLyBhbmQgdGhhdCB0ZXh0IG5vZGUgaXMgZW1wdHlcbiAgICAgIC8vIGJhc2ljYWxseVxuICAgICAgLy8gMS4gbGlzdCBpdGVtIDFcbiAgICAgIC8vIDIuIHxcbiAgICAgIC8vIDMuIGxpc3QgaXRlbSAzXG4gICAgICAvLyBhbmQgd2UgYXJlIHByZXNzaW5nIGVudGVyIHRoZXJlIHdoZXJlIHwgcmVwcmVzZW50cyB0aGUgY2FyZXRcbiAgICApIHtcbiAgICAgIC8vIHdlIG5lZWQgdG8gYnJlYWsgdGhlIGxpc3RcbiAgICAgIHRoaXMuYnJlYWtMaXN0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnQpIHtcbiAgICAgIC8vIHN0cmFuZ2VcbiAgICAgIFRyYW5zZm9ybXMuc3BsaXROb2Rlcyh0aGlzLmVkaXRvciwgeyBhbHdheXM6IHRydWUgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaWYgd2UgYXJlIGRlYWxpbmcgd2l0aCBhIHZvaWQgZWxlbWVudCBsaWtlIGFuIGltYWdlXG4gICAgLy8gd2UgZG9uJ3Qgd2FudCB0byBjbG9uZSBpdFxuICAgIGlmICh0aGlzLmVkaXRvci5pc1ZvaWQodGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50IGFzIGFueSkpIHtcbiAgICAgIC8vIHRoZW4gd2Ugd2FudCB0byBpbnNlcnQgYW4gZW1wdHkgcGFyYWdyYXBoXG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICAgIHR5cGU6IFwicGFyYWdyYXBoXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgLi4udGhpcy5zdGF0ZS5jdXJyZW50VGV4dCxcbiAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBub3cgd2UgZ2V0IHRoZSBlbmQgb2YgdGhlIGdpdmVuIHJhbmdlXG4gICAgY29uc3QgZW5kID0gUmFuZ2UuZW5kKHRoaXMuZWRpdG9yLnNlbGVjdGlvbik7XG4gICAgLy8gYW5kIG1ha2UgYSBjb3B5IG9mIHRoZSBibG9jayBlbGVtZW50IGFuY2hvclxuICAgIGNvbnN0IGZpbmFsQmxvY2tQYXRoOiBQYXRoID0gWy4uLnRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudEFuY2hvcl07XG5cbiAgICAvLyBhbmQgbGV0J3MgZmluZCB0aGUgbGFzdCBjaGlsZCB0aGF0IHNob3VsZCBiZSBhbiB0ZXh0IG5vZGVcbiAgICAvLyBhcyB3ZSBnbyBkZWVwIGluc2lkZSB0aGUgc3RydWN0dXJlXG4gICAgbGV0IGxhc3RDaGlsZDogTm9kZSA9IHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudCBhcyBhbnk7XG4gICAgaWYgKGxhc3RDaGlsZCAmJiBFbGVtZW50LmlzRWxlbWVudChsYXN0Q2hpbGQpKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGNvbnN0IGxhc3RQb2ludCA9IGxhc3RDaGlsZC5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICBsYXN0Q2hpbGQgPSBsYXN0Q2hpbGQuY2hpbGRyZW5bbGFzdFBvaW50XSBhcyBhbnkgYXMgTm9kZTtcbiAgICAgICAgZmluYWxCbG9ja1BhdGgucHVzaChsYXN0UG9pbnQpO1xuICAgICAgfSB3aGlsZSAoRWxlbWVudC5pc0VsZW1lbnQobGFzdENoaWxkKSk7XG4gICAgfVxuXG4gICAgLy8gdW50aWwgd2UgZmluZCB0aGUgdGV4dCBub2RlLCB0aGUgbGFzdCB0ZXh0IG5vZGUgaW4gdGhlIGxhc3QgcGFydFxuICAgIC8vIG9mIHRoZXNlIFxuICAgIGNvbnN0IGZpbmFsQmxvY2tPZmZzZXQgPSBsYXN0Q2hpbGQgPyAobGFzdENoaWxkIGFzIFRleHQpLnRleHQubGVuZ3RoIDogbnVsbDtcblxuICAgIGNvbnN0IGlzRW5kT2ZMaW5lID0gKFxuICAgICAgZW5kLm9mZnNldCA9PT0gZmluYWxCbG9ja09mZnNldCAmJlxuICAgICAgUGF0aC5lcXVhbHMoZmluYWxCbG9ja1BhdGgsIGVuZC5wYXRoKVxuICAgICk7XG5cbiAgICBpZiAoaXNMaXN0SXRlbUJyZWFrKSB7XG4gICAgICAvLyBvdGhlcndpc2Ugd2UgZG8gYSBzaW1wbGUgc3BsaXQgbm9kZVxuICAgICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKHRoaXMuZWRpdG9yLCB7IGFsd2F5czogdHJ1ZSwgbWF0Y2g6IChuOiBhbnkpID0+IG4udHlwZSA9PT0gXCJsaXN0LWl0ZW1cIiB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gb3RoZXJ3aXNlIHdlIGRvIGEgc2ltcGxlIHNwbGl0IG5vZGVcbiAgICAgIFRyYW5zZm9ybXMuc3BsaXROb2Rlcyh0aGlzLmVkaXRvciwgeyBhbHdheXM6IHRydWUgfSlcbiAgICB9XG5cbiAgICAvLyBnb3R0YSBjbGVhciB1aSBoYW5kbGVycyBhbmQgd2hhdG5vdFxuICAgIGlmIChpc0VuZE9mTGluZSkge1xuICAgICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgICB1aUhhbmRsZXI6IG51bGwsXG4gICAgICAgIGh0bWw6IG51bGwsXG4gICAgICAgIHVpSGFuZGxlckFyZ3M6IG51bGwsXG4gICAgICAgIHRleHRDb250ZW50OiBudWxsLFxuICAgICAgfSwge1xuICAgICAgICBtYXRjaDogKG4pID0+IHtcbiAgICAgICAgICByZXR1cm4gaXNCbG9jayhuIGFzIGFueSk7XG4gICAgICAgIH0sXG4gICAgICAgIG1vZGU6IFwibG93ZXN0XCIsXG4gICAgICAgIGF0OiB0aGlzLmVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLnBhdGgsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSBmdW5jdGlvbiB0byBwZXJmb3JtIGEgZm9yd2FyZCBkZWxldGVcbiAgICogYmFja3dhcmRzIGV2ZW50XG4gICAqIEBwYXJhbSB1bml0IHRoZSB1bml0IHdlIGFyZSBkZWFsaW5nIHdpdGhcbiAgICovXG4gIHB1YmxpYyBkZWxldGVGb3J3YXJkKHVuaXQ6IFwiY2hhcmFjdGVyXCIgfCBcIndvcmRcIiB8IFwibGluZVwiIHwgXCJibG9ja1wiKSB7XG4gICAgLy8gZmlyc3Qgd2UgcGljayB0aGUgY3VycmVudCBzZWxlY3Rpb25cbiAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gdGhpcy5lZGl0b3JcblxuICAgIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNDb2xsYXBzZWQoc2VsZWN0aW9uKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnQgJiZcbiAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICBUZXh0LmlzVGV4dCh0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnQuY2hpbGRyZW5bMF0pICYmXG4gICAgICAgIHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudC5jaGlsZHJlblswXS50ZXh0ID09PSBcIlwiXG4gICAgICApIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5kZWxldGUodGhpcy5lZGl0b3IsIHsgYXQ6IHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudEFuY2hvciB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKHRoaXMuZWRpdG9yLCB7IHVuaXQgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIGZ1bmN0aW9uIHRvIHBlcmZvcm0gYSBzdGFuZGFyZCBkZWxldGVcbiAgICogYmFja3dhcmRzIGV2ZW50XG4gICAqIEBwYXJhbSB1bml0IHRoZSB1bml0IHdlIGFyZSBkZWFsaW5nIHdpdGhcbiAgICovXG4gIHB1YmxpYyBkZWxldGVCYWNrd2FyZCh1bml0OiBcImNoYXJhY3RlclwiIHwgXCJ3b3JkXCIgfCBcImxpbmVcIiB8IFwiYmxvY2tcIikge1xuICAgIC8vIGZpcnN0IHdlIHBpY2sgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IHRoaXMuZWRpdG9yO1xuXG4gICAgY29uc3QgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50ID0gdGhpcy5zdGF0ZS5jdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzICYmXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHNbdGhpcy5zdGF0ZS5jdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzLmxlbmd0aCAtIDFdO1xuXG4gICAgLy8gaWYgd2UgaGF2ZSBvbmUgb2YgYW55IGtpbmRcbiAgICBpZiAoXG4gICAgICBzZWxlY3Rpb24gJiZcbiAgICAgIC8vIGFuZCBpdCdzIGNvbGxhcHNlZFxuICAgICAgUmFuZ2UuaXNDb2xsYXBzZWQoc2VsZWN0aW9uKSAmJlxuICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50ICYmXG4gICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnQudHlwZSA9PT0gXCJsaXN0LWl0ZW1cIiAmJlxuICAgICAgKFxuICAgICAgICAvLyBhbmQgd2UgYXJlIGRlbGV0aW5nIGEgY2hhcmFjdGVyIG9mIGEgd29yZFxuICAgICAgICAoXG4gICAgICAgICAgKHVuaXQgPT09IFwiY2hhcmFjdGVyXCIgfHwgdW5pdCA9PT0gXCJ3b3JkXCIpICYmXG4gICAgICAgICAgLy8gYW5kIHdlIGFyZSBhdCB0aGUgc3RhcnQgb2YgdGhlIGJsb2NrXG4gICAgICAgICAgc2VsZWN0aW9uLmFuY2hvci5vZmZzZXQgPT09IDBcbiAgICAgICAgKSB8fFxuICAgICAgICAvLyBvciB3ZSBhcmUgcmVtb3ZpbmcgYSBsaW5lIG9yIGJsb2NrXG4gICAgICAgIChcbiAgICAgICAgICB1bml0ID09PSBcImxpbmVcIiB8fCB1bml0ID09IFwiYmxvY2tcIlxuICAgICAgICApXG4gICAgICApXG4gICAgKSB7XG4gICAgICAvLyB3ZSBuZWVkIHRvIGJyZWFrIHRoZSBsaXN0LCBicmVha2luZyB0aGUgbGlzdCBjb25zaXN0IG9mIHNwbGl0dGluZ1xuICAgICAgLy8gb25lIGxpc3QgaW50byB0d28sIHJlbW92aW5nIHRoZSBmaXJzdCBvciB0aGUgbGFzdCBlbGVtZW50IGJhY2sgdG8gYSBwYXJhZ3JhcGhcbiAgICAgIC8vIG9yIHdoYXRub3QsIGV0Yy4uLlxuICAgICAgdGhpcy5icmVha0xpc3QoKTtcblxuICAgICAgLy8gb3RoZXJ3aXNlIGlmIHdlIGhhdmUgYSBzZWxlY3Rpb24sIGFuZCB0aGUgc2VsZWN0aW9uIGlzIGNvbGxhcHNlZFxuICAgIH0gZWxzZSBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKHNlbGVjdGlvbikpIHtcbiAgICAgIC8vIHdlIG11c3QgYXZvaWQgcmVtb3ZpbmcgY3VycmVudCBsb2NhdGlvbiBpZiBzdWNoIGlzIGVtcHR5XG4gICAgICAvLyB0aGlzIGlzIGJlY2F1c2UgZWcuIGlmIHdlIGhhdmUgYSBib2xkIHRleHRcbiAgICAgIC8vIHRoZW4gd2Ugd2FudCB0byBlbnN1cmUgdGhhdCBzdWNoIGlzIG5vdCByZW1vdmVkXG4gICAgICAvLyB0aGVyZSBhcmUgaG93ZXZlciBpbiBtb3N0IGNpcmN1bXN0YW5jZXMgd2Ugd2FudCB0byBlbnN1cmVcbiAgICAgIC8vIGFueSBlbXB0eSB0ZXh0IGlzIHJlbW92ZWQgZXZlbiBpbiB0aGUgY3VycmVudCBjYXJldFxuICAgICAgVHJhbnNmb3Jtcy5kZWxldGUodGhpcy5lZGl0b3IsIHsgdW5pdCwgcmV2ZXJzZTogdHJ1ZSB9KTtcbiAgICAgIC8vIG90aGVyd2lzZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCcmVha3MgdGhlIGxpc3QgYmFzZWQgb24gdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAqIHdlIG11c3QgYmUgaW4gYSBsaXN0IGN1cnJlbnRseSwgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWRcbiAgICogYnkgdGhlIGRlbGV0ZSBiYWNrd2FyZHMgZnVuY3Rpb25hbGl0eSBhcyB3ZWxsIGFzIHRoZSB0b2dnbGVcbiAgICogbGlzdCBvbmVcbiAgICovXG4gIHB1YmxpYyBicmVha0xpc3QoKSB7XG4gICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gdHJ1ZTtcblxuICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoXG4gICAgICB0aGlzLmVkaXRvcixcbiAgICAgIHtcbiAgICAgICAgbWF0Y2g6IChuOiBhbnkpID0+IHtcbiAgICAgICAgICByZXR1cm4gbi50eXBlID09PSBcImxpc3RcIjtcbiAgICAgICAgfSxcbiAgICAgICAgbW9kZTogXCJsb3dlc3RcIixcbiAgICAgICAgc3BsaXQ6IHRydWUsXG4gICAgICB9XG4gICAgKTtcblxuICAgIHRoaXMucHJldmVudE5vcm1hbGl6ZSA9IGZhbHNlO1xuXG4gICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhcbiAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAge1xuICAgICAgICBtYXRjaDogKG46IGFueSkgPT4ge1xuICAgICAgICAgIHJldHVybiBuLnR5cGUgPT09IFwibGlzdC1pdGVtXCI7XG4gICAgICAgIH0sXG4gICAgICAgIG1vZGU6IFwibG93ZXN0XCIsXG4gICAgICAgIHNwbGl0OiB0cnVlLFxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0cyBhIHN1cGVyYmxvY2sgYnJlYWssIHNpbmNlIHlvdSBtaWdodCBub3QgYmUgYWJsZSB0byBlc2NhcGVcbiAgICogc3VwZXJibG9ja3MsIGVnLiBzdWNoIGFzIGEgc2luZ2xlIGNvbnRhaW5lciwgeW91IHdpbGwgdXNlIGEgc3VwZXJibG9jayBicmVha1xuICAgKiBhbHQrZW50ZXIgaW4gb3JkZXIgdG8gZXNjYXBlIHRoZSBzdXBlcmJsb2NrXG4gICAqIFxuICAgKiBAcGFyYW0gYXQgdGhlIHBhdGggb2YgdGhlIHN1cGVyYmxvY2sgdG8gaW5zZXJ0IGEgYnJlYWsgYXRcbiAgICogQHBhcmFtIHJldmVyc2Ugd2hldGhlciB0byBpbnNlcnQgaXQgYmVmb3JlIG9yIGFmdGVyLCBieSBkZWZhdWx0IGl0IHdpbGwgYmUgYWZ0ZXIsIHVzZSB0aGlzIGZsYWcgZm9yIGJlZm9yZVxuICAgKi9cbiAgcHVibGljIGluc2VydFN1cGVyYnJlYWsoYXQ/OiBQYXRoLCByZXZlcnNlPzogYm9vbGVhbikge1xuICAgIGxldCBjdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tQW5jaG9yID0gYXQgfHwgKFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50ICYmIGlzVm9pZCh0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnQpICYmIHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudEFuY2hvclxuICAgICkgfHwgKFxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHMgJiZcbiAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW3RoaXMuc3RhdGUuY3VycmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycy5sZW5ndGggLSAxXVxuICAgICAgKTtcblxuICAgIGlmICghY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbUFuY2hvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBjdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tID0gTm9kZS5nZXQodGhpcy5lZGl0b3IsIGN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb21BbmNob3IpIGFzIFJpY2hFbGVtZW50O1xuICAgIC8vIG1ha2UgYSBjb3B5XG4gICAgY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbUFuY2hvciA9IFsuLi5jdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tQW5jaG9yXTtcbiAgICAvLyBzbyB3ZSBnZXQgdGhpcyBhbmNob3IgZm9yIHRoZSBwYXJlbnRcbiAgICBsZXQgcGFyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3IgPSBbLi4uY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbUFuY2hvcl07XG4gICAgcGFyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3IucG9wKCk7XG4gICAgbGV0IHBhcmVudFN1cGVyQmxvY2tFbGVtZW50OiBSaWNoRWxlbWVudCA9IG51bGw7XG5cbiAgICAvLyBhbmQgbm93IGxvb3BcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgLy8gZ2V0IHRoZSBwYXJlbnQgZWxlbWVudCBhbmQgY2hlY2sgdGhhdCBwYXJhZ3JhcGhzIGNhbiBiZSBhZGRlZCB0byBpdFxuICAgICAgcGFyZW50U3VwZXJCbG9ja0VsZW1lbnQgPSBOb2RlLmdldCh0aGlzLmVkaXRvciwgcGFyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3IpIGFzIFJpY2hFbGVtZW50O1xuICAgICAgY29uc3QgYWxsb3dzQ2hpbGRyZW4gPSBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLkFMTE9XU19DSElMRFJFTltwYXJlbnRTdXBlckJsb2NrRWxlbWVudC50eXBlXTtcbiAgICAgIGNvbnN0IGNhblBhcmVudEhhdmVQYXJhZ3JhcGhBc0NoaWxkcmVuID0gIWFsbG93c0NoaWxkcmVuIHx8IGFsbG93c0NoaWxkcmVuLmluY2x1ZGVzKFwicGFyYWdyYXBoXCIpO1xuICAgICAgY29uc3QgaXNBU29sb0VzY2FwYWJsZVR5cGUgPSBjdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tLnR5cGUgPT09IFwibGlzdFwiO1xuXG4gICAgICAvLyBjb3VsZCBiZSB0aGUgZWRpdG9yLCBzbyB3ZSBzdG9wXG4gICAgICBpZiAoXG4gICAgICAgIChcbiAgICAgICAgICAvLyBsaXN0IGFuZCBsaXN0IGl0ZW1zIGNhbiBiZSBlc2NhcGVkIGJ5XG4gICAgICAgICAgLy8gc3RhbmRhcmQgZW50ZXJpbmcgc28gd2UgZG9uJ3QgYWxsb3cgdGhhdCBhcyBhIGJyZWFrIHBvaW50XG4gICAgICAgICAgIWlzQVNvbG9Fc2NhcGFibGVUeXBlICYmXG4gICAgICAgICAgY2FuUGFyZW50SGF2ZVBhcmFncmFwaEFzQ2hpbGRyZW5cbiAgICAgICAgKSB8fFxuICAgICAgICAhcGFyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3IubGVuZ3RoXG4gICAgICApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBnbyBvbmUgbGV2ZWwgdXAgZm9yIGJvdGhcbiAgICAgIHBhcmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yLnBvcCgpO1xuICAgICAgY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbUFuY2hvci5wb3AoKTtcbiAgICAgIGN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb20gPSBOb2RlLmdldCh0aGlzLmVkaXRvciwgY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbUFuY2hvcikgYXMgUmljaEVsZW1lbnQ7XG4gICAgfTtcblxuICAgIC8vIGNhbm5vdCBicmVhayBhcyBpdCdzIGEgc29sbyBlc2NhcGFibGUgdHlwZVxuICAgIGlmIChjdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tLnR5cGUgPT09IFwibGlzdFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYW5kIG5vdyB3ZSBuZWVkIHRvIGdldCB0aGUgbmV4dCBhbmNob3IgdGhhdCBpcyBuZXh0IHRvIHN1Y2ggYmxvY2tcbiAgICBjb25zdCBuZXh0QW5jaG9yID0gY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbUFuY2hvcjtcbiAgICBpZiAoIXJldmVyc2UpIHtcbiAgICAgIC8vIGlmIGl0J3MgaW4gcmV2ZXJzZSB3ZSBhY3R1YWxseSBqdXN0IGluc2VydCByaWdodCBpbiB0aGUgc2FtZSBzcG90XG4gICAgICAvLyB3aGljaCB3aWxsIHB1c2ggdGhlIGdpdmVuIHN1cGVyYmxvY2sgZm9yd2FyZHNcbiAgICAgIG5leHRBbmNob3JbbmV4dEFuY2hvci5sZW5ndGggLSAxXSsrO1xuICAgIH1cblxuICAgIC8vIGFuZCB3ZSBpbnNlcnQgYSBjbG9uZSBiYXNlZCBvbiB0aGUgYmxvY2sgaXRzZWxmXG4gICAgLy8gd2l0aCBubyB0ZXh0XG4gICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgdHlwZTogXCJwYXJhZ3JhcGhcIiBhcyBhbnksXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICB7XG4gICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgfSBhcyBhbnlcbiAgICAgIF1cbiAgICB9LCB7IGF0OiBuZXh0QW5jaG9yIH0pO1xuXG4gICAgLy8gYW5kIHdlIHdhbnQgdG8gZm9jdXMgb24gc3VjaCB0ZXh0XG4gICAgY29uc3QgbmV4dEFuY2hvclRleHQgPSBuZXh0QW5jaG9yLmNvbmNhdChbMF0pO1xuXG4gICAgdGhpcy5mb2N1c0F0KHtcbiAgICAgIGFuY2hvcjoge1xuICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgIHBhdGg6IG5leHRBbmNob3JUZXh0LFxuICAgICAgfSxcbiAgICAgIGZvY3VzOiB7XG4gICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgcGF0aDogbmV4dEFuY2hvclRleHQsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIGFuY2hvcnMgYW5kIHRoZSBjb250ZXh0IGJhc2VkIG9uIGEgZ2l2ZW4gdmFsdWVcbiAgICogKG9yIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBlZGl0b3IpIGFuZCB0aGUgc2VsZWN0aW9uIG5vZGVzXG4gICAqIHRoYXQgYXJlIGN1cnJlbnRseSBzZWxlY3RlZCAob3IgaXQgd2lsbCBvdmVycmlkZSB3aXRoIHRoZSBkZWZhdWx0cylcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgYW5jaG9yIHRoYXQgaXMgY3VycmVudGx5IGRlZW1lZCB0byBiZSBzZWxlY3RlZCBhdFxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRoYXQgd2UgYXJlIHdvcmtpbmcgd2l0aCwgaWYgbm90IHByb3ZpZGVkIGl0IHdpbGwgdGFrZSBpdCBmcm9tIHRoZSBzdGF0ZVxuICAgKiBAcGFyYW0gY3VycmVudEdpdmVuU2VsZWN0ZWROb2RlQW5jaG9yIHRoZSBzZWxlY3RlZCBub2RlIGFuY2hvciwgYW5kIHRleHQgYW5jaG9yIGlmIG5vdCBwcm92aWRlZFxuICAgKiBpdCB3aWxsIHVzZSB0aGUgZGVmYXVsdCB2YWx1ZXMgYmFzZWQgb24gdGhlIGxvZ2ljIG9mIHRoZSBjYWxjdWxhdGVkIGFuY2hvcnNcbiAgICovXG4gIHB1YmxpYyBjYWxjdWxhdGVBbmNob3JzKFxuICAgIGFuY2hvcjogUGF0aCxcbiAgICB2YWx1ZT86IE5vZGVbXSxcbiAgICBjdXJyZW50R2l2ZW5TZWxlY3RlZE5vZGVBbmNob3I/OiBQYXRoLFxuICApIHtcbiAgICAvLyBmaXJzdCB3ZSBzZXQgdXAgYWxsIHRoZSBiYXNpY3MgdG8gdGhlaXIgbnVsbCB2YWx1ZVxuICAgIGxldCBjdXJyZW50SW5saW5lRWxlbWVudDogUmljaEVsZW1lbnQgPSBudWxsO1xuICAgIGxldCBjdXJyZW50SW5saW5lRWxlbWVudEFuY2hvcjogUGF0aCA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRCbG9ja0VsZW1lbnQ6IFJpY2hFbGVtZW50ID0gbnVsbDtcbiAgICBsZXQgY3VycmVudEJsb2NrRWxlbWVudEFuY2hvcjogUGF0aCA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHM6IFJpY2hFbGVtZW50W10gPSBudWxsO1xuICAgIGxldCBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzOiBQYXRoW10gPSBudWxsO1xuICAgIGxldCBjdXJyZW50VGV4dDogSVRleHQgPSBudWxsO1xuICAgIGxldCBjdXJyZW50VGV4dEFuY2hvcjogUGF0aCA9IG51bGw7XG5cbiAgICBsZXQgcHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3I6IFBhdGggPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3I7XG4gICAgbGV0IHByZXZpb3VzVGV4dEFuY2hvcjogUGF0aCA9IHRoaXMuc3RhdGUuY3VycmVudFRleHRBbmNob3I7XG5cbiAgICAvLyBub3cgd2UgZG8gbmVlZCB0byBzZXR1cCB0aGUgYW5jaG9yIGlmIHdlIGhhdmUgYW4gYW5jaG9yXG4gICAgLy8gaW4gdGhhdCBjYXNlIHdlIG5lZWQgdG8gcG9wdWxhdGUgdGhlc2UgZmllbGRzXG4gICAgaWYgKGFuY2hvcikge1xuICAgICAgLy8gdGhlIGN1cnJlbnQgZWxlbWVudFxuICAgICAgbGV0IGN1cnJlbnRMb29waW5nRWxlbWVudCA9IHZhbHVlID8ge1xuICAgICAgICBjaGlsZHJlbjogdmFsdWUsXG4gICAgICB9IGFzIGFueSA6IHRoaXMuc3RhdGUudHJlZVZhbHVlO1xuICAgICAgY29uc3QgbG9vcGluZ0FuY2hvcjogUGF0aCA9IFtdO1xuXG4gICAgICAvLyB3ZSBsb29wIGluIG91ciB0ZXh0IGFuY2hvclxuICAgICAgYW5jaG9yLmZvckVhY2goKG46IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICBsb29waW5nQW5jaG9yLnB1c2gobik7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGFuIGVsZW1lbnRcbiAgICAgICAgY3VycmVudExvb3BpbmdFbGVtZW50ID0gY3VycmVudExvb3BpbmdFbGVtZW50ICYmIGN1cnJlbnRMb29waW5nRWxlbWVudC5jaGlsZHJlbltuXSBhcyBSaWNoRWxlbWVudDtcblxuICAgICAgICAvLyBpZiBpdCdzIGEgbm9uIGlubGluZSB0aGVuIHdlIGFyZSBpbnRvIG91ciBjdXJyZW50IGJsb2NrXG4gICAgICAgIGlmIChjdXJyZW50TG9vcGluZ0VsZW1lbnQgJiYgU0VSSUFMSVpBVElPTl9SRUdJU1RSWS5JTkxJTkVTW2N1cnJlbnRMb29waW5nRWxlbWVudC50eXBlXSkge1xuICAgICAgICAgIGN1cnJlbnRJbmxpbmVFbGVtZW50ID0gY3VycmVudExvb3BpbmdFbGVtZW50O1xuICAgICAgICAgIGN1cnJlbnRJbmxpbmVFbGVtZW50QW5jaG9yID0gWy4uLmxvb3BpbmdBbmNob3JdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHN1cGVyYmxvY2sgb3IgbGlzdC1pdGVtIGVsZW1lbnQgdGhhdCBjb250YWlucyBsaXN0c1xuICAgICAgICBpZiAoY3VycmVudExvb3BpbmdFbGVtZW50ICYmIFNFUklBTElaQVRJT05fUkVHSVNUUlkuQkxPQ0tTW2N1cnJlbnRMb29waW5nRWxlbWVudC50eXBlXSkge1xuICAgICAgICAgIGN1cnJlbnRCbG9ja0VsZW1lbnQgPSBjdXJyZW50TG9vcGluZ0VsZW1lbnQ7XG4gICAgICAgICAgY3VycmVudEJsb2NrRWxlbWVudEFuY2hvciA9IFsuLi5sb29waW5nQW5jaG9yXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHdlIGhhdmUgYSBzdXBlcmJsb2NrIG9yIGxpc3QtaXRlbSBlbGVtZW50IHRoYXQgY29udGFpbnMgbGlzdHNcbiAgICAgICAgaWYgKGN1cnJlbnRMb29waW5nRWxlbWVudCAmJiBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLlNVUEVSQkxPQ0tTW2N1cnJlbnRMb29waW5nRWxlbWVudC50eXBlXSkge1xuICAgICAgICAgIGlmICghY3VycmVudFN1cGVyQmxvY2tFbGVtZW50cykge1xuICAgICAgICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50cyA9IFtdO1xuICAgICAgICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycyA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzLnB1c2goY3VycmVudExvb3BpbmdFbGVtZW50KTtcbiAgICAgICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLnB1c2goWy4uLmxvb3BpbmdBbmNob3JdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXJyZW50TG9vcGluZ0VsZW1lbnQgJiYgVGV4dC5pc1RleHQoY3VycmVudExvb3BpbmdFbGVtZW50KSkge1xuICAgICAgICAgIGN1cnJlbnRUZXh0ID0gY3VycmVudExvb3BpbmdFbGVtZW50O1xuICAgICAgICAgIGN1cnJlbnRUZXh0QW5jaG9yID0gWy4uLmxvb3BpbmdBbmNob3JdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBub3cgZm9yIG91ciBzZWxlY3Rpb24sIGJ5IGRlZmF1bHQgaXQncyBhbGwgbnVsbFxuICAgIGxldCBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yOiBQYXRoID0gbnVsbDtcbiAgICBsZXQgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudDogUmljaEVsZW1lbnQgPSBudWxsO1xuICAgIGxldCBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQ6IFJpY2hFbGVtZW50ID0gbnVsbDtcbiAgICBsZXQgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzOiBSaWNoRWxlbWVudFtdID0gbnVsbDtcbiAgICBsZXQgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yOiBQYXRoID0gbnVsbDtcbiAgICBsZXQgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzOiBQYXRoW10gPSBudWxsO1xuICAgIGxldCBjdXJyZW50U2VsZWN0ZWRUZXh0OiBJVGV4dCA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3I6IFBhdGggPSBudWxsO1xuXG4gICAgbGV0IGdpdmVuU2VsZWN0ZWROb2RlQW5jaG9ySXNDb3JydXB0ZWQgPSBmYWxzZTtcblxuICAgIGlmIChjdXJyZW50R2l2ZW5TZWxlY3RlZE5vZGVBbmNob3IpIHtcbiAgICAgIGxldCBjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29ycnVwdGlvblRlc3QgPSB2YWx1ZSA/IHtcbiAgICAgICAgY2hpbGRyZW46IHZhbHVlLFxuICAgICAgfSBhcyBhbnkgOiB0aGlzLnN0YXRlLnRyZWVWYWx1ZTtcbiAgICAgIGdpdmVuU2VsZWN0ZWROb2RlQW5jaG9ySXNDb3JydXB0ZWQgPSBjdXJyZW50R2l2ZW5TZWxlY3RlZE5vZGVBbmNob3Iuc29tZSgobjogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhY3VycmVudFNlbGVjdGVkRWxlbWVudENvcnJ1cHRpb25UZXN0IHx8XG4gICAgICAgICAgIWN1cnJlbnRTZWxlY3RlZEVsZW1lbnRDb3JydXB0aW9uVGVzdC5jaGlsZHJlbiB8fFxuICAgICAgICAgICFjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29ycnVwdGlvblRlc3QuY2hpbGRyZW5bbl1cbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudENvcnJ1cHRpb25UZXN0ID0gY3VycmVudFNlbGVjdGVkRWxlbWVudENvcnJ1cHRpb25UZXN0LmNoaWxkcmVuW25dO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIHNlbGVjdGVkIGFuY2hvciBhbmQgb3JpZ2luXG4gICAgLy8gd2UgaGF2ZSBwdXJwb3NlbHkgc2V0IHRoZW4gd2Ugc2hvdWxkXG4gICAgLy8gZGVmYXVsdCB0byB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHZhbHVlcywgaWYgYW55XG4gICAgaWYgKCFjdXJyZW50R2l2ZW5TZWxlY3RlZE5vZGVBbmNob3IgfHwgZ2l2ZW5TZWxlY3RlZE5vZGVBbmNob3JJc0NvcnJ1cHRlZCkge1xuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvciA9IGN1cnJlbnRJbmxpbmVFbGVtZW50QW5jaG9yO1xuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCA9IGN1cnJlbnRJbmxpbmVFbGVtZW50O1xuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50ID0gY3VycmVudEJsb2NrRWxlbWVudDtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvciA9IGN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3I7XG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgPSBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzO1xuICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzID0gY3VycmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycztcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHQgPSBjdXJyZW50VGV4dDtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3IgPSBjdXJyZW50VGV4dEFuY2hvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbG9vcGluZ0FuY2hvcjogUGF0aCA9IFtdO1xuXG4gICAgICAvLyBub3cgd2UgbmVlZCB0byBwcmVwYXJlIGFuZCBmaW5kIHRoZSB0ZXh0IG9yaWdpbiwgYW5kIGNvbnRleHRcbiAgICAgIC8vIGFzIHdlbGwgYXMgdGhlIHNlbGVjdGVkIGVsZW1lbnRcbiAgICAgIGxldCBjdXJyZW50TG9vcGluZ0VsZW1lbnQgPSB2YWx1ZSA/IHtcbiAgICAgICAgY2hpbGRyZW46IHZhbHVlLFxuICAgICAgfSBhcyBhbnkgOiB0aGlzLnN0YXRlLnRyZWVWYWx1ZTtcblxuICAgICAgLy8gc28gd2UgbG9vcCBpbiB0aGUgb3JpZ2luIGFuY2hvclxuICAgICAgY3VycmVudEdpdmVuU2VsZWN0ZWROb2RlQW5jaG9yLmZvckVhY2goKG46IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAvLyBhbmQgdXBkYXRlIHRoZSBub2RlIG9yaWdpblxuICAgICAgICBjdXJyZW50TG9vcGluZ0VsZW1lbnQgPSBjdXJyZW50TG9vcGluZ0VsZW1lbnQgJiYgY3VycmVudExvb3BpbmdFbGVtZW50LmNoaWxkcmVuW25dO1xuICAgICAgICBsb29waW5nQW5jaG9yLnB1c2gobik7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRMb29waW5nRWxlbWVudCAmJiBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLklOTElORVNbY3VycmVudExvb3BpbmdFbGVtZW50LnR5cGVdKSB7XG4gICAgICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCA9IGN1cnJlbnRMb29waW5nRWxlbWVudDtcbiAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yID0gWy4uLmxvb3BpbmdBbmNob3JdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHN1cGVyYmxvY2sgb3IgbGlzdC1pdGVtIGVsZW1lbnQgdGhhdCBjb250YWlucyBsaXN0c1xuICAgICAgICBpZiAoY3VycmVudExvb3BpbmdFbGVtZW50ICYmIFNFUklBTElaQVRJT05fUkVHSVNUUlkuQkxPQ0tTW2N1cnJlbnRMb29waW5nRWxlbWVudC50eXBlXSkge1xuICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCA9IGN1cnJlbnRMb29waW5nRWxlbWVudDtcbiAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IgPSBbLi4ubG9vcGluZ0FuY2hvcl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgc3VwZXJibG9jayBvciBsaXN0LWl0ZW0gZWxlbWVudCB0aGF0IGNvbnRhaW5zIGxpc3RzXG4gICAgICAgIGlmIChjdXJyZW50TG9vcGluZ0VsZW1lbnQgJiYgU0VSSUFMSVpBVElPTl9SRUdJU1RSWS5TVVBFUkJMT0NLU1tjdXJyZW50TG9vcGluZ0VsZW1lbnQudHlwZV0pIHtcbiAgICAgICAgICBpZiAoIWN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cykge1xuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzID0gW107XG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzLnB1c2goY3VycmVudExvb3BpbmdFbGVtZW50KTtcbiAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMucHVzaChbLi4ubG9vcGluZ0FuY2hvcl0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1cnJlbnRMb29waW5nRWxlbWVudCAmJiBUZXh0LmlzVGV4dChjdXJyZW50TG9vcGluZ0VsZW1lbnQpKSB7XG4gICAgICAgICAgY3VycmVudFNlbGVjdGVkVGV4dCA9IGN1cnJlbnRMb29waW5nRWxlbWVudDtcbiAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yID0gWy4uLmxvb3BpbmdBbmNob3JdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBwc2V1ZG9Eb2N1bWVudDogSVJvb3RMZXZlbERvY3VtZW50ID0ge1xuICAgICAgdHlwZTogXCJkb2N1bWVudFwiLFxuICAgICAgY2hpbGRyZW46IHZhbHVlIGFzIGFueSxcbiAgICAgIGlkOiB0aGlzLnN0YXRlLnRyZWVWYWx1ZS5pZCxcbiAgICAgIHJpY2g6IHRoaXMuc3RhdGUudHJlZVZhbHVlLnJpY2gsXG4gICAgfTtcblxuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dCA9IGdldENvbnRleHRGb3IoXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMgJiYgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW2N1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycy5sZW5ndGggLSAxXSxcbiAgICAgIFwiZmluYWxcIixcbiAgICAgIHBzZXVkb0RvY3VtZW50LFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICAgKTtcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQgPSBnZXRDb250ZXh0Rm9yKFxuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yLFxuICAgICAgXCJmaW5hbFwiLFxuICAgICAgcHNldWRvRG9jdW1lbnQsXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgICApO1xuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZElubGluZUNvbnRleHQgPSBnZXRDb250ZXh0Rm9yKFxuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvcixcbiAgICAgIFwiZmluYWxcIixcbiAgICAgIHBzZXVkb0RvY3VtZW50LFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICAgKTtcblxuICAgIC8vIENhbGN1bGF0aW9uIG9mIG90aGVyIGNvbnRleHR1YWwgaW5mb3JtYXRpb25cbiAgICBjb25zdCBiYXNlU3VwZXJCbG9jayA9IChcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyAmJiBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHNbY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzLmxlbmd0aCAtIDFdXG4gICAgKSB8fCBwc2V1ZG9Eb2N1bWVudDtcbiAgICBjb25zdCBiYXNlQWxsb3dlZENoaWxkcmVPZlN1cGVyQmxvY2sgPSBiYXNlU3VwZXJCbG9jayA/IGdldEFsbG93ZWRDaGlsZHJlblR5cGVzKGJhc2VTdXBlckJsb2NrKSA6IFtdO1xuXG4gICAgY29uc3Qgc3VwZXJCbG9ja1VJSGFuZGxlciA9IGdldFVJSGFuZGxlclZhbHVlV2l0aEtub3duQ29udGV4dEZvcihcbiAgICAgIGJhc2VTdXBlckJsb2NrIGFzIFJpY2hFbGVtZW50LFxuICAgICAgY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0IHx8IHRoaXMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICAgKTtcblxuICAgIGNvbnN0IGJhc2VCbG9jayA9IGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudDtcbiAgICBjb25zdCBiYXNlQWxsb3dlZENoaWxkcmVuT2ZCbG9jayA9IGJhc2VCbG9jayA/IGdldEFsbG93ZWRDaGlsZHJlblR5cGVzKGJhc2VCbG9jaykgOiBbXTtcblxuICAgIGNvbnN0IGJsb2NrVUlIYW5kbGVyID0gZ2V0VUlIYW5kbGVyVmFsdWVXaXRoS25vd25Db250ZXh0Rm9yKFxuICAgICAgYmFzZUJsb2NrLFxuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0LFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICAgKTtcblxuICAgIGNvbnN0IGlubGluZVVJSGFuZGxlciA9IGdldFVJSGFuZGxlclZhbHVlV2l0aEtub3duQ29udGV4dEZvcihcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVDb250ZXh0LFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICAgKTtcblxuICAgIGNvbnN0IGFsbG93c0luc2VydEVsZW1lbnQgPSAoZWxlbWVudDogUmljaEVsZW1lbnQsIG9wdHM6IHsgY29sbGFwc2VkPzogYm9vbGVhbjsgZXh0ZW5kZWQ/OiBib29sZWFuOyBzZWxlY3RlZD86IGJvb2xlYW4gfSA9IHt9KSA9PiB7XG4gICAgICBpZiAob3B0cy5jb2xsYXBzZWQgfHwgb3B0cy5leHRlbmRlZCB8fCBvcHRzLnNlbGVjdGVkKSB7XG4gICAgICAgIGlmIChvcHRzLnNlbGVjdGVkICYmICF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNDb2xsYXBzZWQgPSB0aGlzLmVkaXRvci5zZWxlY3Rpb24gJiYgUmFuZ2UuaXNDb2xsYXBzZWQodGhpcy5lZGl0b3Iuc2VsZWN0aW9uKTtcbiAgICAgICAgaWYgKCFpc0NvbGxhcHNlZCAmJiBvcHRzLmNvbGxhcHNlZCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0NvbGxhcHNlZCAmJiBvcHRzLmV4dGVuZGVkKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHdlIGZpcnN0IG5lZWQgdG8gY2hlY2sgd2hlcmUgaXQgZ29lc1xuICAgICAgaWYgKGlzU3VwZXJCbG9jayhlbGVtZW50KSB8fCBpc0Jsb2NrKGVsZW1lbnQpKSB7XG4gICAgICAgIGlmICghYmFzZUFsbG93ZWRDaGlsZHJlT2ZTdXBlckJsb2NrLmluY2x1ZGVzKGVsZW1lbnQudHlwZSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXJCbG9ja1VJSGFuZGxlciAmJiBzdXBlckJsb2NrVUlIYW5kbGVyLmFsbG93c0NoaWxkcmVuID9cbiAgICAgICAgICBzdXBlckJsb2NrVUlIYW5kbGVyLmFsbG93c0NoaWxkcmVuKGVsZW1lbnQsIGJhc2VTdXBlckJsb2NrIGFzIFJpY2hFbGVtZW50KSA6XG4gICAgICAgICAgdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNJbmxpbmUoZWxlbWVudCkpIHtcbiAgICAgICAgaWYgKCFiYXNlQWxsb3dlZENoaWxkcmVuT2ZCbG9jay5pbmNsdWRlcyhlbGVtZW50LnR5cGUpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJsb2NrVUlIYW5kbGVyICYmIGJsb2NrVUlIYW5kbGVyLmFsbG93c0NoaWxkcmVuID9cbiAgICAgICAgICBibG9ja1VJSGFuZGxlci5hbGxvd3NDaGlsZHJlbihlbGVtZW50LCBiYXNlQmxvY2spIDpcbiAgICAgICAgICB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHRvcG1vc3RTdXBlcmJsb2NrID0gY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzICYmXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHNbY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IHRvcG1vc3RTdXBlcmJsb2NrQW5jaG9yID0gY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzICYmXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGlubGluZUlzVm9pZCA9IGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQgPyBpc1ZvaWQoY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCkgOiBmYWxzZTtcbiAgICBjb25zdCBibG9ja0lzVm9pZCA9IGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCA/IGlzVm9pZChjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQpIDogZmFsc2U7XG4gICAgY29uc3QgdG9wbW9zdFN1cGVyYmxvY2tJc1ZvaWQgPSB0b3Btb3N0U3VwZXJibG9jayA/IGlzVm9pZCh0b3Btb3N0U3VwZXJibG9jaykgOiBmYWxzZTtcbiAgICBjb25zdCB2b2lkRWxlbWVudCA9IGlubGluZUlzVm9pZCB8fCBibG9ja0lzVm9pZCB8fCB0b3Btb3N0U3VwZXJibG9ja0lzVm9pZDtcbiAgICBjb25zdCBhbGxvd3NUZXh0ID0gIXZvaWRFbGVtZW50O1xuXG4gICAgY29uc3QgY3VycmVudFNlbGVjdGVkRWxlbWVudCA9IGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQgfHwgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50IHx8IHRvcG1vc3RTdXBlcmJsb2NrIHx8IG51bGw7XG4gICAgY29uc3QgY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvciA9IGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IgfHwgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yIHx8IHRvcG1vc3RTdXBlcmJsb2NrQW5jaG9yIHx8IG51bGw7XG5cbiAgICAvLyBub3cgd2UgY2FuIHJldHVyblxuICAgIHJldHVybiB7XG4gICAgICBjdXJyZW50VGV4dEFuY2hvcixcbiAgICAgIGN1cnJlbnRUZXh0LFxuICAgICAgY3VycmVudEJsb2NrRWxlbWVudCxcbiAgICAgIGN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3IsXG4gICAgICBjdXJyZW50SW5saW5lRWxlbWVudCxcbiAgICAgIGN1cnJlbnRJbmxpbmVFbGVtZW50QW5jaG9yLFxuICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50cyxcbiAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0LFxuICAgICAgY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvcixcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvcixcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yLFxuICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzLFxuICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLFxuICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IsXG5cbiAgICAgIGN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUNvbnRleHQsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29udGV4dDogY3VycmVudFNlbGVjdGVkSW5saW5lQ29udGV4dCB8fCBjdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQgfHwgY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0LFxuXG4gICAgICBhbGxvd3NJbnNlcnRFbGVtZW50LFxuICAgICAgYWxsb3dzVGV4dCxcbiAgICAgIGlubGluZUlzVm9pZCxcbiAgICAgIGJsb2NrSXNWb2lkLFxuICAgICAgdG9wbW9zdFN1cGVyYmxvY2tJc1ZvaWQsXG4gICAgICBzdXBlckJsb2NrVUlIYW5kbGVyLFxuICAgICAgYmxvY2tVSUhhbmRsZXIsXG4gICAgICBpbmxpbmVVSUhhbmRsZXIsXG5cbiAgICAgIHByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yLFxuICAgICAgcHJldmlvdXNUZXh0QW5jaG9yLFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBvbiBjaGFuZ2Ugd2hlbiB0aGUgZmllbGQgaXMgZm9jdXNlZFxuICAgKiBhbmQgaGFzIGNoYW5nZWRcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgYW5jaG9yIHRoYXQgd2UgYXJlIGF0XG4gICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgdGhhdCB3ZSBnb3RcbiAgICovXG4gIHB1YmxpYyBvbkZvY3VzZWRDaGFuZ2UoYW5jaG9yOiBQYXRoLCB2YWx1ZTogTm9kZVtdKSB7XG4gICAgaWYgKHRoaXMuaXNVbm1vdW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gbm93IHdlIGNhbiBjYWxjdWxhdGUgdGhlIGFuY2hvcnMgYW5kIGNvbnRleHRcbiAgICB0aGlzLnNldFN0YXRlKHRoaXMuY2FsY3VsYXRlQW5jaG9ycyhhbmNob3IsIHZhbHVlKSk7XG5cbiAgICAvLyBpZiB3ZSBhcmUgbm90IGNvbnNpZGVyZWQgYXMgY3VycmVudGx5IGZvY3VzZWRcbiAgICBpZiAoIXRoaXMuc3RhdGUuZm9jdXNlZCkge1xuICAgICAgLy8gd2UgY2FsbCB0aGlzXG4gICAgICB0aGlzLnByb3BzLm9uRm9jdXMgJiYgdGhpcy5wcm9wcy5vbkZvY3VzKCk7XG4gICAgICAvLyBhbmQgc2V0IHRoZSBzdGF0ZVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGZvY3VzZWQ6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgb24gYW4gb24gY2hhbmdlIHdoZW50IGhlIGZpZWxkIGlzIGJsdXJyZWRcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0aGF0IHdlIGFyZSB3b3JraW5nIHdpdGhcbiAgICovXG4gIHB1YmxpYyBvbkJsdXJyZWRDaGFuZ2UodmFsdWU/OiBOb2RlW10pIHtcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBpZiB3ZSBhcmUgY29uc2lkZXJlZCBhcyBmb2N1c2VkXG4gICAgaWYgKHRoaXMuc3RhdGUuZm9jdXNlZCkge1xuICAgICAgLy8gd2VsbCBub3QgYW55bW9yZVxuICAgICAgdGhpcy5wcm9wcy5vbkJsdXIgJiYgdGhpcy5wcm9wcy5vbkJsdXIoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvciA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzICYmXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1t0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycy5sZW5ndGggLSAxXTtcblxuICAgIC8vIHdlIHBpY2sgdGhlIGFuY2hvciBiYXNlZCBvbiBzcGVjaWZpY2l0eVxuICAgIC8vIHRoZSBvbmUgd2UgZ290IHRoZSBtb3N0IHNwZWNpZmljIHdlIHBhc3MgdGhhdFxuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZEFuY2hvciA9XG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3IgfHxcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvciB8fFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IgfHxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yO1xuXG4gICAgLy8gbm93IHdlIGNhbiBjYWxsIHRoaXNcbiAgICBjb25zdCBhbmNob3JEYXRhID0gdGhpcy5jYWxjdWxhdGVBbmNob3JzKFxuICAgICAgLy8gbm8gYW5jaG9yIGFzIGl0IGlzIG5vdCBrbm93blxuICAgICAgbnVsbCxcbiAgICAgIC8vIHRoZSB2YWx1ZVxuICAgICAgdmFsdWUsXG4gICAgICAvLyBhbmQgd2UgcGFzcyB0aGUgc2VsZWN0ZWQgbm9kZSBhbmNob3IgYXMgaXRcbiAgICAgIC8vIHJlbWFpbnMgZXZlbiBhZnRlciB0aGUgc2VsZWN0aW9uIG9ubHkgaWZcbiAgICAgIC8vIHdlIGhhdmUgbm90IGp1c3QgZGVsZXRlZCB0aGF0IG5vZGVcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEFuY2hvciAmJlxuICAgICAgICAhdGhpcy5sYXN0Q2hhbmdlV2FzU2VsZWN0ZWREZWxldGUgPyBjdXJyZW50U2VsZWN0ZWRBbmNob3IgOiBudWxsLFxuICAgICk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBmb2N1c2VkOiBmYWxzZSxcbiAgICAgIC4uLmFuY2hvckRhdGEsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgdGhlIGNvbXBvbmVudCB1cGRhdGVzIG9ubHkgd2hlbiBpdCdzIG5lY2Vzc2FyeVxuICAgKiBAcGFyYW0gbmV4dFByb3BzIHRoZSBuZXh0IHByb3BlcnRpZXNcbiAgICogQHBhcmFtIG5leHRTdGF0ZSB0aGUgbmV4dCBzdGF0ZVxuICAgKi9cbiAgcHVibGljIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHM6IElTbGF0ZUVkaXRvclByb3BzLCBuZXh0U3RhdGU6IElTbGF0ZUVkaXRvclN0YXRlKSB7XG4gICAgY29uc3Qgc3RhbmRhcmRVcGRhdGUgPSAoXG4gICAgICBuZXh0UHJvcHMuaWQgIT09IHRoaXMucHJvcHMuaWQgfHxcbiAgICAgIG5leHRQcm9wcy5sYW5nICE9PSB0aGlzLnByb3BzLmxhbmcgfHxcbiAgICAgIG5leHRQcm9wcy5jdXJyZW50VmFsaWQgIT09IHRoaXMucHJvcHMuY3VycmVudFZhbGlkIHx8XG4gICAgICBuZXh0U3RhdGUuZm9jdXNlZCAhPT0gdGhpcy5zdGF0ZS5mb2N1c2VkIHx8XG4gICAgICBuZXh0UHJvcHMuV3JhcHBlciAhPT0gdGhpcy5wcm9wcy5XcmFwcGVyIHx8XG4gICAgICBuZXh0UHJvcHMuaXNSaWNoVGV4dCAhPT0gdGhpcy5wcm9wcy5pc1JpY2hUZXh0IHx8XG4gICAgICBuZXh0UHJvcHMucm9vdENvbnRleHQgIT09IHRoaXMucHJvcHMucm9vdENvbnRleHQgfHxcbiAgICAgIG5leHRQcm9wcy5iYXNlSTE4biAhPT0gdGhpcy5wcm9wcy5iYXNlSTE4biB8fFxuICAgICAgbmV4dFN0YXRlLmN1cnJlbnRUZXh0QW5jaG9yICE9PSB0aGlzLnN0YXRlLmN1cnJlbnRUZXh0QW5jaG9yIHx8XG4gICAgICBuZXh0U3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvciAhPT0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yIHx8XG4gICAgICBuZXh0U3RhdGUuY3VycmVudFJvb3RDb250ZXh0ICE9PSB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCB8fFxuICAgICAgbmV4dFByb3BzLmN1cnJlbnRMb2FkRXJyb3IgIT09IHRoaXMucHJvcHMuY3VycmVudExvYWRFcnJvciB8fFxuICAgICAgbmV4dFByb3BzLmVsZW1lbnRXcmFwcGVycyAhPT0gdGhpcy5wcm9wcy5lbGVtZW50V3JhcHBlcnMgfHxcbiAgICAgICFlcXVhbHModGhpcy5zdGF0ZS5hbGxDb250YWluZXJzLCBuZXh0U3RhdGUuYWxsQ29udGFpbmVycywgeyBzdHJpY3Q6IHRydWUgfSkgfHxcbiAgICAgICFlcXVhbHModGhpcy5zdGF0ZS5hbGxUYWJsZXMsIG5leHRTdGF0ZS5hbGxUYWJsZXMsIHsgc3RyaWN0OiB0cnVlIH0pIHx8XG4gICAgICAhZXF1YWxzKHRoaXMuc3RhdGUuYWxsQ3VzdG9tLCBuZXh0U3RhdGUuYWxsQ3VzdG9tLCB7IHN0cmljdDogdHJ1ZSB9KSB8fFxuICAgICAgIWVxdWFscyh0aGlzLnN0YXRlLmFsbFJpY2hDbGFzc2VzLCBuZXh0U3RhdGUuYWxsUmljaENsYXNzZXMsIHsgc3RyaWN0OiB0cnVlIH0pIHx8XG4gICAgICAhZXF1YWxzKG5leHRQcm9wcy53cmFwcGVyQXJncywgdGhpcy5wcm9wcy53cmFwcGVyQXJncywgeyBzdHJpY3Q6IHRydWUgfSkgfHxcbiAgICAgICFlcXVhbHMobmV4dFByb3BzLmVsZW1lbnRXcmFwcGVyc0FyZ3MsIHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzQXJncywgeyBzdHJpY3Q6IHRydWUgfSkgfHxcbiAgICAgICFlcXVhbHMobmV4dFByb3BzLmZlYXR1cmVzLCB0aGlzLnByb3BzLmZlYXR1cmVzLCB7IHN0cmljdDogdHJ1ZSB9KVxuICAgIClcblxuICAgIC8vIGlmIGl0J3MgYSBzdGFuZGFyZCB1cGRhdGUgbWF0Y2hcbiAgICBpZiAoc3RhbmRhcmRVcGRhdGUpIHtcbiAgICAgIC8vIHllcFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gb3RoZXJ3aXNlIGxldCdzIGNoZWNrIGZvciBpbnRlcm5hbCB2YWx1ZXMgc2lnbmF0dXJlIGRpZmZlcmVuY2VzXG4gICAgaWYgKG5leHRQcm9wcy50cmVlVmFsdWUgJiYgbmV4dFN0YXRlLnN5bmNlZCkge1xuICAgICAgcmV0dXJuIG5leHRQcm9wcy50cmVlVmFsdWUuaWQgIT09IHRoaXMuc3RhdGUudHJlZVZhbHVlLmlkO1xuICAgIH1cblxuICAgIC8vIG90aGVyd2lzZSB3ZSBkbyBhbGxvdyBmb3IgdGhlIHVwZGF0ZVxuICAgIC8vIGFzIHdpdGhvdXQgYW4gaW50ZXJuYWwgdmFsdWUgb3IgaW4gYSBub24tc3luY2VkIHN0YXRlXG4gICAgLy8gd2UgYXJlIGxpc3RlbmluZyBmb3IgZXZlcnkgY2hhbmdlXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgb2ZmIHRoZSByaWNoIHRleHRcbiAgICogQHBhcmFtIHYgdGhlIHZhbHVlIHRvIHNldFxuICAgKi9cbiAgcHVibGljIHNldFZhbHVlKHY6IGFueSkge1xuICAgIC8vIGZvciBzb21lIHJlYXNvbiBzbGF0ZSBrZWVwcyB0cmlnZ2VyaW5nXG4gICAgLy8gYSB2YWx1ZSBjaGFuZ2Ugd2hlbiBpdCdzIGRpc2FibGVkXG4gICAgLy8gYmVjYXVzZSBzbGF0ZSBjYW4gYmUgYnVnZ3lcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCB8fCB0aGlzLnByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYnVpbGQgYSBuZXcgZG9jdW1lbnRcbiAgICBjb25zdCBuZXdSb290RG9jdW1lbnQ6IElSb290TGV2ZWxEb2N1bWVudCA9IHtcbiAgICAgIC8vIHdlIGRvbid0IGtub3cgdGhlIGlkIHlldFxuICAgICAgaWQ6IG51bGwsXG4gICAgICB0eXBlOiBcImRvY3VtZW50XCIsXG4gICAgICByaWNoOiB0aGlzLnN0YXRlLnRyZWVWYWx1ZS5yaWNoLFxuICAgICAgY2hpbGRyZW46IHYsXG4gICAgfTtcblxuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBzZXJpYWxpemVTdHJpbmcobmV3Um9vdERvY3VtZW50KTtcbiAgICBuZXdSb290RG9jdW1lbnQuaWQgPSBnZXRVVUlERm9yKHNlcmlhbGl6ZWQpO1xuXG4gICAgLy8gd2UgZG8gbm90IHVwZGF0ZSBpbW1lZGlhdGVseSxcbiAgICAvLyBmb3IgdGhhdCB3ZSBmaXJzdCBjbGVhciB0aGUgdXBkYXRlIHRpbWVvdXRcbiAgICAvLyB0aGUgdXBkYXRlIHRpbWVvdXQgY29udGFpbnMgdXBkYXRlIGluc3RydWN0aW9uc1xuICAgIC8vIDIgb2YgdGhlbVxuICAgIC8vIHdlIHdhbnQgdG8gaGFsdCBzdWNoIGFzeW5jIGV4ZWN1dGlvblxuICAgIGNsZWFyVGltZW91dCh0aGlzLnVwZGF0ZVRpbWVvdXQpO1xuXG4gICAgY29uc3QgaXNFcXVhbCA9IChzZXJpYWxpemVkIHx8IG51bGwpID09PSAodGhpcy5wcm9wcy52YWx1ZSB8fCBudWxsKTtcblxuICAgIGlmIChpc0VxdWFsKSB7XG4gICAgICAvLyBhbmQgc2V0IHRoZSBzdGF0ZSB0byB0aGF0XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdHJlZVZhbHVlOiBuZXdSb290RG9jdW1lbnQsXG4gICAgICAgIHN5bmNlZDogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdHJlZVZhbHVlOiBuZXdSb290RG9jdW1lbnQsXG4gICAgICAgIHN5bmNlZDogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgLy8gbm93IHdlIGNhbiBzZXQgaXRcbiAgICAgIHRoaXMudXBkYXRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS50cmVlVmFsdWUucmljaCkge1xuICAgICAgICAgIGlmICh0aGlzLnByb3BzLmNhY2hlU3RvcmVDb3VudEdsb2JhbCkge1xuICAgICAgICAgICAgLy8gd2hhdCB3ZSBkbyBpcyB0aGF0IHdlIGNvdW50IHRoZSBjaGFyYWN0ZXJzXG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IGNvdW50U2l6ZSh0aGlzLnN0YXRlLnRyZWVWYWx1ZSk7XG4gICAgICAgICAgICAvLyBhbmQgc2V0IGl0IGluIHRoZSBsYXN0IHJpY2ggdGV4dCBjaGFuZ2UgY2hlYXQgdmFyaWFibGVcbiAgICAgICAgICAgICh3aW5kb3cgYXMgYW55KVt0aGlzLnByb3BzLmNhY2hlU3RvcmVDb3VudEdsb2JhbF0gPSBjb3VudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhbmQgbm93IHdlIGNhbiB0cmlnZ2VyIHRoZSBvbiBjaGFuZ2UgZXZlbnRcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZShzZXJpYWxpemVTdHJpbmcodGhpcy5zdGF0ZS50cmVlVmFsdWUpLCB0aGlzLnN0YXRlLnRyZWVWYWx1ZSk7XG4gICAgICAgIC8vIGFuZCBub3cgd2UgYXJlIGdvaW5nIHRvIHdhaXQgYSBsaXR0bGUgYml0IG1vcmVcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgLy8gdG8gdGVsbCBpdCB0aGF0IGl0IHNob3VsZCBzeW5jXG4gICAgICAgICAgaWYgKCF0aGlzLmlzVW5tb3VudGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgc3luY2VkOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAzMCk7XG4gICAgICB9LCAzMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyB0aGUgY29udGV4dCBhIGdpdmVuIG5vZGUgaXMgc2l0dGluZyBpblxuICAgKiBAcGFyYW0gbiB0aGUgbm9kZSBpbiBxdWVzdGlvblxuICAgKiBAcGFyYW0gb25seVN3aWNoaW5nQ29udGV4dCBwcm92aWRlcyB0aGUgY29udGV4dCBvbmx5IGlmIGl0IHdhcyBzZXRcbiAgICogYnkgdGhlIGdpdmVuIG5vZGUgb3RoZXJ3aXNlIGl0IHdpbGwgcmV0dXJuIG51bGxcbiAgICovXG4gIHB1YmxpYyBnZXRDb250ZXh0Rm9yKG46IE5vZGUgfCBQYXRoLCBsZXZlbD86IFwiZmluYWxcIiB8IFwic2VsZWN0LWNvbnRleHRcIiB8IFwic2VsZWN0LWxvb3BcIiwgb25seVN3aWNoaW5nQ29udGV4dD86IGJvb2xlYW4pOiBJVGVtcGxhdGVBcmdDb250ZXh0RGVmaW5pdGlvbiB7XG4gICAgaWYgKG9ubHlTd2ljaGluZ0NvbnRleHQpIHtcbiAgICAgIGNvbnN0IG5vZGVBc1JpY2hFbGVtZW50OiBSaWNoRWxlbWVudCA9IChQYXRoLmlzUGF0aChuKSA/IE5vZGUuZ2V0KHRoaXMuZWRpdG9yLCBuKSA6IG4pIGFzIFJpY2hFbGVtZW50O1xuICAgICAgaWYgKCFub2RlQXNSaWNoRWxlbWVudC5jb250ZXh0ICYmICFub2RlQXNSaWNoRWxlbWVudC5mb3JFYWNoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHBhdGhPZk5vZGUgPSBQYXRoLmlzUGF0aChuKSA/IG4gOiBSZWFjdEVkaXRvci5maW5kUGF0aCh0aGlzLmVkaXRvciwgbik7XG4gICAgcmV0dXJuIGdldENvbnRleHRGb3IoXG4gICAgICBwYXRoT2ZOb2RlLFxuICAgICAgbGV2ZWwgfHwgXCJmaW5hbFwiLFxuICAgICAgdGhpcy5zdGF0ZS50cmVlVmFsdWUsXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGdldFJvb3RDb250ZXh0KCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dDtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXJFbGVtZW50KHByb3BzOiBSZW5kZXJFbGVtZW50UHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEN1cnJlbnRFbGVtZW50UmV0cmlldmVyXG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgZm49e3RoaXMuYWN0dWFsbHlSZW5kZXJFbGVtZW50fVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICAvKipcbiAgICogdGhlIHJlbmRlciBlbGVtZW50IGZ1bmN0aW9uIHRvIGJlIHVzZWQgaW4gc2xhdGUgZWRpdG9yXG4gICAqIEBwYXJhbSBwcm9wcyB0aGUgcHJvcGVydGllcyB0aGF0IHNsYXRlIHByb3ZpZGVzIHRvIHJlbmRlciB0aGUgY29tcG9uZW50XG4gICAqL1xuICBwdWJsaWMgYWN0dWFsbHlSZW5kZXJFbGVtZW50KFxuICAgIHByb3BzOiBSZW5kZXJFbGVtZW50UHJvcHMsXG4gICAgaXNTZWxlY3RlZDogYm9vbGVhbixcbiAgICBzZWxlY3Rpb25Dcml0ZXJpYTogXCJibG9ja1wiIHwgXCJzdXBlcmJsb2NrXCIgfCBcImlubGluZVwiLFxuICAgIGlzUHJpbWFyeTogYm9vbGVhbixcbiAgKSB7XG4gICAgLy8gZmlyc3Qgd2UgZXh0cmFjdCBhbGwgdGhlc2Ugc3R1ZmZzXG4gICAgY29uc3QgeyBhdHRyaWJ1dGVzLCBjaGlsZHJlbiwgZWxlbWVudCB9ID0gcHJvcHM7XG5cbiAgICAvLyBsZXQncyBjaGVjayBmb3IgYSB1aSBoYW5kbGVyXG4gICAgY29uc3QgdWlIYW5kbGVyID0gKGVsZW1lbnQgYXMgYW55IGFzIFJpY2hFbGVtZW50KS51aUhhbmRsZXI7XG4gICAgbGV0IHRvUmV0dXJuOiBSZWFjdC5SZWFjdE5vZGUgPSBudWxsO1xuICAgIGxldCB3YXNVSUhhbmRsZWQgPSBmYWxzZTtcblxuICAgIC8vIGlmIHdlIGhhdmUgb25lXG4gICAgaWYgKHVpSGFuZGxlcikge1xuICAgICAgY29uc3QgaGFuZGxlckNvbnRleHQgPSB0aGlzLmdldENvbnRleHRGb3IoZWxlbWVudCBhcyBhbnkpO1xuXG4gICAgICAvLyB3ZSBleHRyYWN0IHRoZSBhcmd1bWVudHMgZm9yIHRoZSB1aSBoYW5kbGVyIHRoYXQgYXJlIGluIHRoZSByaWNoIGVsZW1lbnRcbiAgICAgIGNvbnN0IHVpSGFuZGxlckFyZ3MgPSAoZWxlbWVudCBhcyBhbnkgYXMgUmljaEVsZW1lbnQpLnVpSGFuZGxlckFyZ3M7XG5cbiAgICAgIC8vIGFuZCBub3cgd2UgdHJ5IHRvIGdldCB0aGUgdWkgaGFuZGxlciBmcm9tIHRoZSBjb250ZXh0IGl0c2VsZlxuICAgICAgLy8gZWl0aGVyIHRoZSByb290IG9yIHRoZSBvbmUgaW4gdGhlIHByb3BlcnR5IGl0c2VsZlxuICAgICAgbGV0IHByb3BlcnRpZXNGcm9tQ29udGV4dDogSVRlbXBsYXRlQXJnVUlIYW5kbGVyRGVmaW5pdGlvbiA9XG4gICAgICAgIChoYW5kbGVyQ29udGV4dCAmJiBoYW5kbGVyQ29udGV4dC5wcm9wZXJ0aWVzICYmIGhhbmRsZXJDb250ZXh0LnByb3BlcnRpZXNbdWlIYW5kbGVyXSkgYXMgSVRlbXBsYXRlQXJnVUlIYW5kbGVyRGVmaW5pdGlvbjtcblxuICAgICAgaWYgKCFwcm9wZXJ0aWVzRnJvbUNvbnRleHQpIHtcbiAgICAgICAgcHJvcGVydGllc0Zyb21Db250ZXh0ID0gKHRoaXMucHJvcHMucm9vdENvbnRleHQgJiYgdGhpcy5wcm9wcy5yb290Q29udGV4dC5wcm9wZXJ0aWVzW3VpSGFuZGxlcl0pIGFzIElUZW1wbGF0ZUFyZ1VJSGFuZGxlckRlZmluaXRpb247XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzRnJvbUNvbnRleHQgJiYgcHJvcGVydGllc0Zyb21Db250ZXh0Lm5vblJvb3RJbmhlcml0YWJsZSkge1xuICAgICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gaWYgd2UgZG9uJ3QgZmluZCBhIFVJIGhhbmRsZXJcbiAgICAgIC8vIGxldCdzIHB1dCBhIG1lc3NhZ2UgYWJvdXQgaXRcbiAgICAgIGlmIChcbiAgICAgICAgcHJvcGVydGllc0Zyb21Db250ZXh0ICYmXG4gICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dC50eXBlID09PSBcInVpLWhhbmRsZXJcIiAmJlxuICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQuZWRpdG9ySGFuZGxlclxuICAgICAgKSB7XG4gICAgICAgIC8vIG5vdyB3ZSBjYW4gZ2V0IHRoZSBjb21wb25lbnQsIGV4dHJhIGFyZ3MgYW5kIHdoYXRub3RcbiAgICAgICAgY29uc3QgSGFuZGxlckNvbXBvbmVudCA9IHByb3BlcnRpZXNGcm9tQ29udGV4dC5lZGl0b3JIYW5kbGVyLkNvbXBvbmVudDtcbiAgICAgICAgY29uc3QgaGFuZGxlckV4dHJhQXJncyA9IHByb3BlcnRpZXNGcm9tQ29udGV4dC5lZGl0b3JIYW5kbGVyLmV4dHJhQXJncztcbiAgICAgICAgY29uc3QgcGFzc0V4dHJhSW5mbyA9IHByb3BlcnRpZXNGcm9tQ29udGV4dC5lZGl0b3JIYW5kbGVyLnBhc3NTbGF0ZUluZm87XG5cbiAgICAgICAgLy8gdGhlIGV4dHJhIGluZm8gdGhhdCBzaG91bGQgYmUgcGFzc2VkIGlmIG5lY2Vzc2FyeVxuICAgICAgICBjb25zdCBleHRyYUluZm8gPSBwYXNzRXh0cmFJbmZvID9cbiAgICAgICAgICB7XG4gICAgICAgICAgICBoZWxwZXJzOiB0aGlzLmdldEhlbHBlcnMoKSxcbiAgICAgICAgICAgIHNlbGVjdGVkOiBpc1NlbGVjdGVkICYmIGlzUHJpbWFyeSxcbiAgICAgICAgICB9IDoge307XG5cbiAgICAgICAgbGV0IGNsYXNzTmFtZTogc3RyaW5nID0gbnVsbDtcbiAgICAgICAgKGVsZW1lbnQgYXMgYW55IGFzIFJpY2hFbGVtZW50KS5yaWNoQ2xhc3NMaXN0ICYmIChlbGVtZW50IGFzIGFueSBhcyBSaWNoRWxlbWVudCkucmljaENsYXNzTGlzdC5mb3JFYWNoKChjKSA9PiB7XG4gICAgICAgICAgY2xhc3NOYW1lID0gKGNsYXNzTmFtZSB8fCBcIlwiKSArIFwiIHJpY2gtdGV4dC0tXCIgKyBjO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBjb252ZXJ0U3R5bGVTdHJpbmdUb1JlYWN0T2JqZWN0KChlbGVtZW50IGFzIGFueSBhcyBSaWNoRWxlbWVudCkuc3R5bGUpO1xuICAgICAgICBjb25zdCBzdHlsZUFjdGl2ZSA9IGNvbnZlcnRTdHlsZVN0cmluZ1RvUmVhY3RPYmplY3QoKGVsZW1lbnQgYXMgYW55IGFzIFJpY2hFbGVtZW50KS5zdHlsZUFjdGl2ZSk7XG4gICAgICAgIGNvbnN0IHN0eWxlSG92ZXIgPSBjb252ZXJ0U3R5bGVTdHJpbmdUb1JlYWN0T2JqZWN0KChlbGVtZW50IGFzIGFueSBhcyBSaWNoRWxlbWVudCkuc3R5bGVIb3Zlcik7XG5cbiAgICAgICAgLy8gbm93IHdlIGNhbiB1c2UgdGhlIGhhbmRsZXIgY29tcG9uZW50IHRoYXQgaXMgZ2l2ZW4gdmlhIHRoZSB1aSBoYW5kbGVyXG4gICAgICAgIHRvUmV0dXJuID0gPEhhbmRsZXJDb21wb25lbnRcbiAgICAgICAgICBhcmdzPXt7XG4gICAgICAgICAgICAuLi51aUhhbmRsZXJBcmdzLFxuICAgICAgICAgICAgLi4uaGFuZGxlckV4dHJhQXJncyxcbiAgICAgICAgICB9IGFzIGFueX1cbiAgICAgICAgICBpc1NsYXRlPXt0cnVlfVxuICAgICAgICAgIGF0dHJpYnV0ZXM9e2F0dHJpYnV0ZXN9XG4gICAgICAgICAgZWxlbWVudD17ZWxlbWVudCBhcyBhbnl9XG4gICAgICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgICAgIHN0eWxlQWN0aXZlPXtzdHlsZUFjdGl2ZX1cbiAgICAgICAgICBzdHlsZUhvdmVyPXtzdHlsZUhvdmVyfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICAgIGV2ZW50cz17bnVsbH1cbiAgICAgICAgICB7Li4uZXh0cmFJbmZvfVxuICAgICAgICA+XG4gICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L0hhbmRsZXJDb21wb25lbnQ+O1xuXG4gICAgICAgIGNvbnN0IGNvbnRleHRTd2ljaENvbnRleHQgPSB0aGlzLmdldENvbnRleHRGb3IoZWxlbWVudCBhcyBhbnksIFwiZmluYWxcIiwgdHJ1ZSk7XG5cbiAgICAgICAgLy8gaWYgd2UgYXJlIGluIGEgdWkgaGFuZGxlciB0aGF0IGlzIGN1cnJlbnRseSBsb29waW5nXG4gICAgICAgIC8vIGFzIHdlIGhhdmUgZW50ZXJlZCBhIGxvb3BhYmxlIGNvbnRleHRcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbnRleHRTd2ljaENvbnRleHQgJiZcbiAgICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0Lmxvb3BhYmxlICYmXG4gICAgICAgICAgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzICYmXG4gICAgICAgICAgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLmxvb3BFbXVsYXRpb24gJiZcbiAgICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3MubG9vcEVtdWxhdGlvbiA+PSAxXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIGFuZCBub3cgd2UgaGF2ZSBlbnRlcmVkIGxvb3AgZW11bGF0aW9uXG4gICAgICAgICAgY29uc3QgYXJyOiBSZWFjdC5SZWFjdE5vZGVbXSA9IFtdO1xuICAgICAgICAgIC8vIHdlIGFyZSBnb2luZyB0byB1c2UgdGhlIHdyYXBwZXIgaW4gZWFjaCBjYXNlIHRvIGNoYW5nZSB0aGUgY29udGV4dFxuICAgICAgICAgIC8vIHdoaWNoIGhvcGVmdWxseSB3aWxsIGNoYW5nZSB0aGluZ3MgZG93biB0aGUgbGluZVxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLmxvb3BFbXVsYXRpb247IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkRGlzYWJsZUVsZW1lbnRXcmFwcGVycyA9IGkgIT09IGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy5sb29wRW11bGF0aW9uIC0gMTtcbiAgICAgICAgICAgIGlmIChjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcikge1xuICAgICAgICAgICAgICBpZiAoc2hvdWxkRGlzYWJsZUVsZW1lbnRXcmFwcGVycykge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKFxuICAgICAgICAgICAgICAgICAgPEVsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXIgdmFsdWU9e3RydWV9IGtleT17aX0+XG4gICAgICAgICAgICAgICAgICAgIHtjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcih0b1JldHVybiwgaSl9XG4gICAgICAgICAgICAgICAgICA8L0VsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaCg8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT57Y29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIodG9SZXR1cm4sIGkpfTwvUmVhY3QuRnJhZ21lbnQ+KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKHNob3VsZERpc2FibGVFbGVtZW50V3JhcHBlcnMpIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaChcbiAgICAgICAgICAgICAgICAgIDxFbGVtZW50V3JhcHBlckRpc2FibGVyLlByb3ZpZGVyIHZhbHVlPXt0cnVlfSBrZXk9e2l9PlxuICAgICAgICAgICAgICAgICAgICB7dG9SZXR1cm59XG4gICAgICAgICAgICAgICAgICA8L0VsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaCg8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT57dG9SZXR1cm59PC9SZWFjdC5GcmFnbWVudD4pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRvUmV0dXJuID0gYXJyO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHRTd2ljaENvbnRleHQgJiYgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzICYmIGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy53cmFwcGVyKSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGlmIHdlIGdvdCBhIHN0YW5kYXJkIGNvbnRleHQsIHdpdGggYSB3cmFwcGVyLCB0aGVuIHdlIHVzZSBpdFxuICAgICAgICAgIHRvUmV0dXJuID0gY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIodG9SZXR1cm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgd2FzVUlIYW5kbGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXdhc1VJSGFuZGxlZCkge1xuICAgICAgY29uc3QgY3VzdG9tUHJvcHM6IGFueSA9IHsgLi4uYXR0cmlidXRlcywgY2hpbGRyZW4gfTtcblxuICAgICAgY29uc3QgaHRtbCA9IChlbGVtZW50IGFzIGFueSBhcyBSaWNoRWxlbWVudCkuaHRtbDtcbiAgICAgIGlmICh0eXBlb2YgaHRtbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBodG1sQ29udGV4dCA9IHRoaXMuZ2V0Q29udGV4dEZvcihlbGVtZW50IGFzIGFueSk7XG4gICAgICAgIGxldCBwcm9wZXJ0aWVzRnJvbUNvbnRleHQ6IElUZW1wbGF0ZUFyZ0hUTUxEZWZpbml0aW9uID0gaHRtbENvbnRleHQgJiYgaHRtbENvbnRleHQucHJvcGVydGllcyAmJiBodG1sQ29udGV4dC5wcm9wZXJ0aWVzW2h0bWxdIGFzIElUZW1wbGF0ZUFyZ0hUTUxEZWZpbml0aW9uO1xuICAgICAgICBpZiAoIXByb3BlcnRpZXNGcm9tQ29udGV4dCkge1xuICAgICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCA9IHRoaXMucHJvcHMucm9vdENvbnRleHQgJiYgdGhpcy5wcm9wcy5yb290Q29udGV4dC5wcm9wZXJ0aWVzICYmIHRoaXMucHJvcHMucm9vdENvbnRleHQucHJvcGVydGllc1todG1sXSBhcyBJVGVtcGxhdGVBcmdIVE1MRGVmaW5pdGlvbjtcbiAgICAgICAgICBpZiAocHJvcGVydGllc0Zyb21Db250ZXh0ICYmIHByb3BlcnRpZXNGcm9tQ29udGV4dC5ub25Sb290SW5oZXJpdGFibGUpIHtcbiAgICAgICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb3BlcnRpZXNGcm9tQ29udGV4dCAmJiBwcm9wZXJ0aWVzRnJvbUNvbnRleHQudHlwZSA9PT0gXCJodG1sXCIgJiYgdHlwZW9mIHByb3BlcnRpZXNGcm9tQ29udGV4dC5lZGl0b3JEaXNwbGF5ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdG9EaXNwbGF5ID0gcHJvcGVydGllc0Zyb21Db250ZXh0LmVkaXRvckRpc3BsYXk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0b0Rpc3BsYXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGN1c3RvbVByb3BzLmNoaWxkcmVuID0gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxkaXYgY29udGVudEVkaXRhYmxlPXtmYWxzZX0gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiB0b0Rpc3BsYXkgfX0gc3R5bGU9e3sgZGlzcGxheTogXCJjb250ZW50c1wiIH19IC8+XG4gICAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1c3RvbVByb3BzLmNoaWxkcmVuID0gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxkaXYgY29udGVudEVkaXRhYmxlPXtmYWxzZX0gc3R5bGU9e3sgZGlzcGxheTogXCJjb250ZW50c1wiIH19PlxuICAgICAgICAgICAgICAgICAge3RvRGlzcGxheX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VzdG9tUHJvcHMuY2hpbGRyZW4gPSAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7KHByb3BlcnRpZXNGcm9tQ29udGV4dCAmJiBwcm9wZXJ0aWVzRnJvbUNvbnRleHQubGFiZWwpIHx8IChlbGVtZW50IGFzIGFueSkuY2hpbGRyZW5bMF0udGV4dH1cbiAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0ZXh0ID0gZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgIGlmICh0eXBlb2YgdGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCB0ZXh0Q29udGV4dCA9IHRoaXMuZ2V0Q29udGV4dEZvcihlbGVtZW50IGFzIGFueSk7XG4gICAgICAgIGxldCBwcm9wZXJ0aWVzRnJvbUNvbnRleHQ6IElUZW1wbGF0ZUFyZ1RleHREZWZpbml0aW9uID0gdGV4dENvbnRleHQgJiZcbiAgICAgICAgICB0ZXh0Q29udGV4dC5wcm9wZXJ0aWVzICYmXG4gICAgICAgICAgdGV4dENvbnRleHQucHJvcGVydGllc1t0ZXh0XSBhcyBJVGVtcGxhdGVBcmdUZXh0RGVmaW5pdGlvbjtcbiAgICAgICAgaWYgKCFwcm9wZXJ0aWVzRnJvbUNvbnRleHQpIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQgPSB0aGlzLnByb3BzLnJvb3RDb250ZXh0ICYmXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJvb3RDb250ZXh0LnByb3BlcnRpZXMgJiZcbiAgICAgICAgICAgIHRoaXMucHJvcHMucm9vdENvbnRleHQucHJvcGVydGllc1t0ZXh0XSBhcyBJVGVtcGxhdGVBcmdUZXh0RGVmaW5pdGlvbjtcbiAgICAgICAgICBpZiAocHJvcGVydGllc0Zyb21Db250ZXh0ICYmIHByb3BlcnRpZXNGcm9tQ29udGV4dC5ub25Sb290SW5oZXJpdGFibGUpIHtcbiAgICAgICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY3VzdG9tUHJvcHMuY2hpbGRyZW4gPSAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHsoXG4gICAgICAgICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCAmJlxuICAgICAgICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQudHlwZSA9PT0gXCJ0ZXh0XCIgJiZcbiAgICAgICAgICAgICAgKHByb3BlcnRpZXNGcm9tQ29udGV4dC5lZGl0b3JEaXNwbGF5IHx8IHByb3BlcnRpZXNGcm9tQ29udGV4dC5sYWJlbClcbiAgICAgICAgICAgICkgfHwgKGVsZW1lbnQgYXMgYW55KS5jaGlsZHJlblswXS50ZXh0fVxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgIDwvPlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBhbmQgbm93IHdlIGNhbGwgdGhlIHJlYWN0aWZpY2F0aW9uXG4gICAgICB0b1JldHVybiA9IFNFUklBTElaQVRJT05fUkVHSVNUUlkuUkVBQ1RJRllbZWxlbWVudC50eXBlIGFzIHN0cmluZ10oe1xuICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgICBzZWxlY3RlZDogaXNTZWxlY3RlZCAmJiBpc1ByaW1hcnksXG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQgYXMgYW55LFxuICAgICAgICBhc1RlbXBsYXRlOiBmYWxzZSxcbiAgICAgICAgY3VzdG9tUHJvcHMsXG5cbiAgICAgICAgLy8gd2UgZG9uJ3QgY2FyZSBhcyB3ZSBhcmUgbm90IHVzaW5nIHRoZSBvbkN1c3RvbSBmdW5jdGlvblxuICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgIHRyZWU6IG51bGwsXG4gICAgICB9KSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IGNvbnRleHRTd2ljaENvbnRleHQgPSB0aGlzLmdldENvbnRleHRGb3IoZWxlbWVudCBhcyBhbnksIFwiZmluYWxcIiwgdHJ1ZSk7XG5cbiAgICAgIC8vIGlmIHdlIGZpbmQgb3Vyc2VsdmVzIGluIGEgbG9vcGFibGUgY29udGV4dCBhcyB3ZSBhcmUgY3VycmVudGx5IGxvb3BpbmdcbiAgICAgIGlmIChcbiAgICAgICAgY29udGV4dFN3aWNoQ29udGV4dCAmJlxuICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0Lmxvb3BhYmxlICYmXG4gICAgICAgIGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncyAmJlxuICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3MubG9vcEVtdWxhdGlvbiAmJlxuICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3MubG9vcEVtdWxhdGlvbiA+PSAxXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgYXJyOiBSZWFjdC5SZWFjdE5vZGVbXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy5sb29wRW11bGF0aW9uOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBzaG91bGREaXNhYmxlRWxlbWVudFdyYXBwZXJzID0gaSAhPT0gY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLmxvb3BFbXVsYXRpb24gLSAxO1xuICAgICAgICAgIGlmIChjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcikge1xuICAgICAgICAgICAgaWYgKHNob3VsZERpc2FibGVFbGVtZW50V3JhcHBlcnMpIHtcbiAgICAgICAgICAgICAgYXJyLnB1c2goXG4gICAgICAgICAgICAgICAgPEVsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXIgdmFsdWU9e3RydWV9IGtleT17aX0+XG4gICAgICAgICAgICAgICAgICB7Y29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIodG9SZXR1cm4sIGkpfVxuICAgICAgICAgICAgICAgIDwvRWxlbWVudFdyYXBwZXJEaXNhYmxlci5Qcm92aWRlcj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFyci5wdXNoKDxSZWFjdC5GcmFnbWVudCBrZXk9e2l9Pntjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcih0b1JldHVybiwgaSl9PC9SZWFjdC5GcmFnbWVudD4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoc2hvdWxkRGlzYWJsZUVsZW1lbnRXcmFwcGVycykge1xuICAgICAgICAgICAgICBhcnIucHVzaChcbiAgICAgICAgICAgICAgICA8RWxlbWVudFdyYXBwZXJEaXNhYmxlci5Qcm92aWRlciB2YWx1ZT17dHJ1ZX0ga2V5PXtpfT5cbiAgICAgICAgICAgICAgICAgIHt0b1JldHVybn1cbiAgICAgICAgICAgICAgICA8L0VsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXI+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhcnIucHVzaCg8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT57dG9SZXR1cm59PC9SZWFjdC5GcmFnbWVudD4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0b1JldHVybiA9IGFycjtcbiAgICAgIH0gZWxzZSBpZiAoY29udGV4dFN3aWNoQ29udGV4dCAmJiBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3MgJiYgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIpIHtcbiAgICAgICAgdG9SZXR1cm4gPSBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcih0b1JldHVybik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5wcm9wcy5lbGVtZW50V3JhcHBlcnMgJiZcbiAgICAgIChcbiAgICAgICAgKFxuICAgICAgICAgICF3YXNVSUhhbmRsZWQgJiZcbiAgICAgICAgICB0aGlzLnByb3BzLmVsZW1lbnRXcmFwcGVycy5jb21wb25lbnRzICYmXG4gICAgICAgICAgdGhpcy5wcm9wcy5lbGVtZW50V3JhcHBlcnMuY29tcG9uZW50c1tlbGVtZW50LnR5cGVdXG4gICAgICAgICkgfHwgKFxuICAgICAgICAgIHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzLnVpSGFuZGxlciAmJlxuICAgICAgICAgIHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzLnVpSGFuZGxlcltlbGVtZW50LnVpSGFuZGxlcl1cbiAgICAgICAgKVxuICAgICAgKVxuICAgICkge1xuICAgICAgY29uc3QgRWxlbWVudFdyYXBwZXIgPVxuICAgICAgICAoXG4gICAgICAgICAgdGhpcy5wcm9wcy5lbGVtZW50V3JhcHBlcnMudWlIYW5kbGVyICYmXG4gICAgICAgICAgdGhpcy5wcm9wcy5lbGVtZW50V3JhcHBlcnMudWlIYW5kbGVyW2VsZW1lbnQudWlIYW5kbGVyXVxuICAgICAgICApIHx8IHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzLmNvbXBvbmVudHNbZWxlbWVudC50eXBlXTtcblxuICAgICAgaWYgKEVsZW1lbnRXcmFwcGVyKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPEVsZW1lbnRXcmFwcGVyRGlzYWJsZXIuQ29uc3VtZXI+XG4gICAgICAgICAgICB7KGRpc2FibGVkKSA9PiAoXG4gICAgICAgICAgICAgIGRpc2FibGVkID8gdG9SZXR1cm4gOiAoXG4gICAgICAgICAgICAgICAgPEVsZW1lbnRXcmFwcGVyXG4gICAgICAgICAgICAgICAgICBlbGVtZW50PXtlbGVtZW50fVxuICAgICAgICAgICAgICAgICAgaGVscGVycz17dGhpcy5nZXRIZWxwZXJzKCl9XG4gICAgICAgICAgICAgICAgICBwcmltYXJ5U2VsZWN0aW9uPXtpc1ByaW1hcnl9XG4gICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXtpc1NlbGVjdGVkfVxuICAgICAgICAgICAgICAgICAgZmVhdHVyZVN1cHBvcnQ9e3RoaXMuZ2V0RmVhdHVyZVN1cHBvcnQoKX1cbiAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmVsZW1lbnRXcmFwcGVyc0FyZ3N9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge3RvUmV0dXJufVxuICAgICAgICAgICAgICAgIDwvRWxlbWVudFdyYXBwZXI+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9FbGVtZW50V3JhcHBlckRpc2FibGVyLkNvbnN1bWVyPlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0b1JldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiB0aGUgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgYnkgc2xhdGUgdG8gcmVuZGVyIHRleHRcbiAgICogQHBhcmFtIHByb3BzIHRoZSBwcm9wZXJ0aWVzIGdpdmVuIGJ5IHNsYXRlIHRvIHJlbmRlciBhIHRleHQgbGVhZlxuICAgKi9cbiAgcHVibGljIHJlbmRlclRleHQocHJvcHM6IFJlbmRlckxlYWZQcm9wcykge1xuICAgIC8vIGZpcnN0IHdlIGV4dHJhY3QgdGhlIGF0dHJpYnV0ZXNcbiAgICBjb25zdCB7IGF0dHJpYnV0ZXMsIGNoaWxkcmVuLCBsZWFmIH0gPSBwcm9wcztcblxuICAgIC8vIG5vdyB3ZSB1c2UgdGhlIHNlcmlhbGl6YXRpb24gcmVnaXN0cnkgaW4gb3JkZXJcbiAgICAvLyB0byBtYWtlIHRoZSBjYWxsc1xuICAgIHJldHVybiBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLlJFQUNUSUZZLnRleHQoe1xuICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgIGVsZW1lbnQ6IGxlYWYgYXMgYW55LFxuICAgICAgYXNUZW1wbGF0ZTogZmFsc2UsXG4gICAgICBjdXN0b21Qcm9wczogeyAuLi5hdHRyaWJ1dGVzLCBjaGlsZHJlbiB9LFxuXG4gICAgICAvLyB3ZSBkb24ndCBjYXJlIGFzIHdlIGFyZSBub3QgdXNpbmcgdGhlIG9uQ3VzdG9tIGZ1bmN0aW9uXG4gICAgICAvLyB0aGlzIHdpbGwgcHJldmVudCBub3JtYWxpemF0aW9uIGJ1dCB0aGF0J3MgZmluZVxuICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgdHJlZTogbnVsbCxcbiAgICB9KSBhcyBhbnk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNoYW5nZSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB2aWEgc2xhdGUgd2hlbiBhIGNoYW5nZSBvY2N1cnNcbiAgICogdGhpcyBmdW5jdGlvbiBoaXRzIGV2ZXJ5IHRpbWUgb24gZXZlcnkgY2hhbmdlIG9mIHRoZSByaWNoIHRleHRcbiAgICogQHBhcmFtIG5ld1ZhbHVlIHRoZSBuZXcgdmFsdWUgb2YgdGhlIGNoaWxkcmVuIG9mIHRoZSBkb2N1bWVudFxuICAgKi9cbiAgcHVibGljIG9uQ2hhbmdlKG5ld1ZhbHVlOiBOb2RlW10pIHtcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGlmIHRoZXJlJ3MgYSBzZWxlY3Rpb25cbiAgICBpZiAodGhpcy5lZGl0b3Iuc2VsZWN0aW9uICYmIFJlYWN0RWRpdG9yLmlzRm9jdXNlZCh0aGlzLmVkaXRvcikpIHtcbiAgICAgIC8vIHdlIGFyZSBvbiBmb2N1c1xuICAgICAgdGhpcy5vbkZvY3VzZWRDaGFuZ2UodGhpcy5lZGl0b3Iuc2VsZWN0aW9uLmFuY2hvci5wYXRoLCBuZXdWYWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBhcmUgYmx1cnJlZFxuICAgICAgdGhpcy5vbkJsdXJyZWRDaGFuZ2UobmV3VmFsdWUpO1xuICAgIH1cblxuICAgIC8vIGFsd2F5cyByZW1hcmsgdGhlIGZsYWcgYXMgZmFsc2UgYXMgdGhpcyBjaGFuZ2UgaXMgYSBub3JtYWwgY2hhbmdlXG4gICAgdGhpcy5sYXN0Q2hhbmdlV2FzU2VsZWN0ZWREZWxldGUgPSBmYWxzZTtcblxuICAgIC8vIGFuZCBpZiB0aGUgbmV3IHZhbHVlIGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgb2xkIGNoaWxkcmVuIG9mIHRoZSBkb2N1bWVudFxuICAgIC8vIGFzIHRoZXNlIHZhbHVlcyBhcmUgaW1tdXRhYmxlIGFuZCB3ZSBqdXN0IG92ZXJyaWRlIHRoZW1cbiAgICAvLyBOT1cgaXQgbWF0dGVycyBhcyBzbGF0ZSBkaWQgYSB3ZWlyZCB1cGRhdGUgd2hlcmUgaXQgY2hhbmdlcyB0aGUgaW1tdXRhYmxlXG4gICAgLy8gc3RhdGUgYmVjYXVzZSBub3cgdGhlIHN0YXRlIGlzIG11dGFibGVcbiAgICAvL2lmIChuZXdWYWx1ZSAhPT0gdGhpcy5zdGF0ZS50cmVlVmFsdWUuY2hpbGRyZW4gYXMgYW55KSB7XG4gICAgLy8gd2UgdXBkYXRlLCB0aGUgcmVhc29uIHRoZSB2YWx1ZSBtaWdodCBiZSBlcXVhbCBpcyBiZWNhdXNlIHRoZSBjaGFuZ2VcbiAgICAvLyB0cmlnZ2VycyBmb3IgY2hhbmdlcyBpbiB0aGUgc2VsZWN0aW9uXG4gICAgdGhpcy5zZXRWYWx1ZShuZXdWYWx1ZSk7XG4gICAgLy99XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSBoYXJkIGJsdXIgZXZlbnQgYW5kIHRoZSBwYXRocyBhcmUgY2xlYXJlZCBvdXRcbiAgICovXG4gIHB1YmxpYyBoYXJkQmx1cigpIHtcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkVGV4dDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHM6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVDb250ZXh0OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29udGV4dDogbnVsbCxcbiAgICAgIHByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yOiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgICBwcmV2aW91c1RleHRBbmNob3I6IHRoaXMuc3RhdGUuY3VycmVudFRleHRBbmNob3IsXG4gICAgfSk7XG4gICAgVHJhbnNmb3Jtcy5kZXNlbGVjdCh0aGlzLmVkaXRvcik7XG4gICAgUmVhY3RFZGl0b3IuYmx1cih0aGlzLmVkaXRvcik7XG4gIH1cblxuICBwdWJsaWMgc2VsZWN0aXZlSGFyZEJsdXJJZkhhc1NlbGVjdGVkRWxlbWVudChlOiBLZXlib2FyZEV2ZW50LCBlbGU6IEhUTUxFbGVtZW50KSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCkge1xuICAgICAgaWYgKGVsZSAmJiB0aGlzLndyYXBwZXJSZWY/LmN1cnJlbnQ/LnNlbGVjdGl2ZUhhcmRCbHVyKSB7XG4gICAgICAgIHRoaXMud3JhcHBlclJlZj8uY3VycmVudD8uc2VsZWN0aXZlSGFyZEJsdXIoZSwgZWxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGFyZEJsdXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSBzb2Z0IGJsdXIgZXZlbnRcbiAgICovXG4gIHB1YmxpYyBzb2Z0Qmx1cigpIHtcbiAgICBSZWFjdEVkaXRvci5ibHVyKHRoaXMuZWRpdG9yKTtcbiAgICBUcmFuc2Zvcm1zLmRlc2VsZWN0KHRoaXMuZWRpdG9yKTtcbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVQYXRoKHA6IFBhdGgpIHtcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yO1xuXG4gICAgaWYgKFxuICAgICAgUGF0aC5lcXVhbHMocCwgY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcikgfHxcbiAgICAgIFBhdGguaXNBbmNlc3RvcihwLCBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yKVxuICAgICkge1xuICAgICAgdGhpcy5sYXN0Q2hhbmdlV2FzU2VsZWN0ZWREZWxldGUgPSB0cnVlO1xuICAgIH1cblxuICAgIFRyYW5zZm9ybXMuZGVsZXRlKHRoaXMuZWRpdG9yLCB7XG4gICAgICBhdDogcCxcbiAgICB9KTtcblxuICAgIC8vIGFuZCBub3cgd2UgY2FuIHJlZm9jdXNcbiAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50VGV4dCkge1xuICAgICAgLy8gbm93IHdlIG5lZWQgdG8gcmVmb2N1c1xuICAgICAgUmVhY3RFZGl0b3IuZm9jdXModGhpcy5lZGl0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBSZWFjdEVkaXRvci5ibHVyKHRoaXMuZWRpdG9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZ2l2ZW4gYSBub2RlIHBhdGgsIHRoYXQgc2hvdWxkIHJlcHJlc2VudCBlaXRoZXIgYW4gZWxlbWVudCBvciBhIHRleHQgbm9kZVxuICAgKiB0aGlzIGFsbG93cyBzdWNoIGEgcGF0aCB0byBiZSBzZWxlY3RlZCBhbmQgYmUgbWFya2VkIGludG8gdGhlIHNlbGVjdGlvblxuICAgKiBAcGFyYW0gcCB0aGUgcGF0aCB0byBzZWxlY3RcbiAgICovXG4gIHB1YmxpYyBzZWxlY3RQYXRoKHA6IFBhdGgpIHtcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIG5vdyB3ZSBjYW4gdXBkYXRlIHRoZSBzdGF0ZVxuICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICB0aGlzLmNhbGN1bGF0ZUFuY2hvcnMoXG4gICAgICAgIHRoaXMuZWRpdG9yLnNlbGVjdGlvbiAmJiB0aGlzLmVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLnBhdGgsXG4gICAgICAgIHRoaXMuc3RhdGUudHJlZVZhbHVlLmNoaWxkcmVuIGFzIGFueSxcbiAgICAgICAgcCxcbiAgICAgICksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvd3MgdG8gbW92ZSBiZXR3ZWVuIHR3byBwYXRocyBhcyBpdCBtb3ZlcyBlbGVtZW50cyB0byBvbmUgcGxhY2UgdG8gYW5vdGhlclxuICAgKiBAcGFyYW0gcCB0aGUgcGF0aCB0byBzZWxlY3RcbiAgICovXG4gIHB1YmxpYyBtb3ZlUGF0aHMoZnJvbTogUGF0aCwgdG86IFBhdGgpIHtcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGVkRWxlbWVudCA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudDtcblxuICAgIC8vIGR1ZSB0byBhIGJ1ZyBpbiB0aGUgd2F5IHRoZSBub2RlcyBhcmUgbW92ZWQgYWN0dWFsbHlcbiAgICAvLyBpdCBoYXMgdG8gYmUgZG9uZSB0aGlzIHdheSBzbyBmaXJzdCB3ZSBuZWVkIHRvIGZpbmRcbiAgICAvLyBpZiB3ZSBhcmUganVzdCBzb3J0aW5nLCBzb3J0aW5nIGluIHRoZSBzYW1lIGxldmVsXG4gICAgY29uc3QgdG9Dcm9wcGVkID0gWy4uLnRvXTtcbiAgICBjb25zdCB0b0xhc3QgPSB0b0Nyb3BwZWQucG9wKCk7XG5cbiAgICBjb25zdCBmcm9tQ3JvcHBlZCA9IFsuLi5mcm9tXTtcbiAgICBjb25zdCBmcm9tTGFzdCA9IGZyb21Dcm9wcGVkLnBvcCgpO1xuXG4gICAgLy8gdGhpcyB3aWxsIHdvcmsgYXMgd2hlcmUgd2UgYXJlIGFjdHVhbGx5IG1vdmluZyB0b1xuICAgIGNvbnN0IGFjdHVhbFRvID0gWy4uLnRvXTtcblxuICAgIC8vIGlmIHdlIGFyZSBhdCB0aGUgc2FtZSBsZXZlbCwgYW5kIHdlIGFyZSBtb3ZpbmcgdW5kZXIgb3VyIGZyb21cbiAgICBpZiAoUGF0aC5lcXVhbHMoZnJvbUNyb3BwZWQsIHRvQ3JvcHBlZCkgJiYgdG9MYXN0ID4gZnJvbUxhc3QpIHtcbiAgICAgIC8vIHRoZW4gd2Ugc3Vic3RyYWN0IG9uZVxuICAgICAgYWN0dWFsVG9bYWN0dWFsVG8ubGVuZ3RoIC0gMV0tLTtcbiAgICB9XG5cbiAgICAvLyB0aGUgcmVhc29uIHdlIGRvIHRoYXQgaXMgYmVjYXVzZSBmb3Igc29tZSB3ZWlyZCBtZXNzZWQgdXAgcmVhc29uIHNsYXRlXG4gICAgLy8gaXMgZ29pbmcgdG8gbW92ZSB0aGluZ3MgYXQgdGhlIHNhbWUgbGV2ZWwgb25lIHBvc2l0aW9uIGZ1cnRoZXIgYmVjYXVzZVxuICAgIC8vIHdlIGFyZSB0YWtpbmcgb25lIGVsZW1lbnQgYXdheSAoaXQgZG9lcyB0aGF0KSBhbmQgdGhlbiBpdCBtb3ZlcyBpdCB0byB0aGUgd3JvbmdcbiAgICAvLyBwbGFjZSBvbmUgZnVydGhlciBiZWNhdXNlIHRoZW4gaXQgaXMgbm90IHRoZXJlIGFueW1vcmUsIHdlaXJkbHkgdGhpcyBkb2Vzbid0XG4gICAgLy8gaGFwcGVuIHdoZW4gdGhlcmUgYXJlIG1hbnkgbGV2ZWxzIGludm9sdmVkXG5cbiAgICAvLyBhbmQgd2UgY2FuIG1vdmUgaXQgbm93XG4gICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoXG4gICAgICB0aGlzLmVkaXRvcixcbiAgICAgIHtcbiAgICAgICAgYXQ6IGZyb20sXG4gICAgICAgIHRvOiBhY3R1YWxUbyxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBhbmQgbm93IHdlIG5lZWQgdG8gZmluZCBvdXQgdGhlIHBhdGggdG8gc2VsZWN0XG4gICAgICBjb25zdCBuZXdTZWxlY3RlZEFuY2hvciA9IHNlbGVjdGVkRWxlbWVudCA/IFJlYWN0RWRpdG9yLmZpbmRQYXRoKHRoaXMuZWRpdG9yLCBzZWxlY3RlZEVsZW1lbnQpIDogbnVsbDtcbiAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5jYWxjdWxhdGVBbmNob3JzKHRoaXMuZWRpdG9yLnNlbGVjdGlvbiAmJiB0aGlzLmVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLnBhdGgsIG51bGwsIG5ld1NlbGVjdGVkQW5jaG9yKSlcbiAgICB9LCAwKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRQcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5wcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRQcmV2aW91c1RleHRBbmNob3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUucHJldmlvdXNUZXh0QW5jaG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgdGhlIHNlbGVjdGVkIG5vZGUgdGhhdCBoYXMgYmVlbiBzZWxlY3RlZCwgZWl0aGVyIHRoZSBjdXJyZW50IGRlZmF1bHRcbiAgICogb3Igb25lIHRoYXQgaGFzIGJlZW4gbWFudWFsbHkgc2VsZWN0ZWQgdXNpbmcgc2VsZWN0UGF0aFxuICAgKi9cbiAgcHVibGljIGRlbGV0ZVNlbGVjdGVkTm9kZSgpIHtcbiAgICAvLyBmaXJzdCB3ZSBtYXJrIHRvIHNheSB0aGF0IHRoZSBsYXN0IHdhcyBzZWxlY3RlZCBkZWxldGUsIHJlbWVtYmVyIGFzIGRlZmluZWRcbiAgICAvLyB0aGlzIGlzIHVzZWQgYmVjYXVzZSBkdXJpbmcgdGhlIG5vcm1hbGl6YXRpb24gdGhlIGFuY2hvcnMgbWlnaHQgY29ycnVwdCBkdXJpbmcgdGhlXG4gICAgLy8gY2FsbCB0byBvbmNoYW5nZSBhcyB0aGUgc2VsZWN0ZWQgYW5jaG9ycyBhcmUgbm93IG1lc3NlZCB1cCwgc28gdGhpcyBmbGFnXG4gICAgLy8gZW5zdXJlcyB0byBjbGVhciB1cCB0aGUgYW5jaG9ycyBqdXN0IGFmdGVyIHRoZSB0cmFuc2Zvcm1cbiAgICB0aGlzLmxhc3RDaGFuZ2VXYXNTZWxlY3RlZERlbGV0ZSA9IHRydWU7XG5cbiAgICBjb25zdCBzZWxlY3RlZEVsZW1lbnRBbmNob3IgPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3I7XG5cbiAgICAvLyBzbyB3ZSBkZWxldGUgd2hpY2ggd2lsbCBjYWxsIG9uY2hhbmdlIGFuZCBub3JtYWxpemF0aW9uXG4gICAgVHJhbnNmb3Jtcy5kZWxldGUodGhpcy5lZGl0b3IsIHtcbiAgICAgIGF0OiBzZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgfSk7XG5cbiAgICAvLyBhbmQgbm93IHdlIGNhbiByZWZvY3VzXG4gICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFRleHQpIHtcbiAgICAgIC8vIG5vdyB3ZSBuZWVkIHRvIHJlZm9jdXNcbiAgICAgIFJlYWN0RWRpdG9yLmZvY3VzKHRoaXMuZWRpdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgUmVhY3RFZGl0b3IuYmx1cih0aGlzLmVkaXRvcik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBBIGhlbHBlciBmdW5jdGlvbiB0byBjYWxsIHJlYWN0IGZvY3VzIGJhY2sgaW50byB0aGUgZWRpdG9yXG4gICAqL1xuICBwdWJsaWMgZm9jdXMoKSB7XG4gICAgLy9wcmV2ZW50Rm9jdXMoKTtcbiAgICAvLyBub3cgd2UgbmVlZCB0byByZWZvY3VzXG4gICAgUmVhY3RFZGl0b3IuZm9jdXModGhpcy5lZGl0b3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuIGFzeW5jIGZ1bmN0aW9uIHRoYXQgaXMgYSBiaXQgb2YgYSBoYWNrIHRvIGZvY3VzIGF0IGEgZ2l2ZW5cbiAgICogcmFuZ2UsIGJlY2F1c2Ugb2YgdGhlIHdheSBzbGF0ZSB3b3JrcyBpdCBuZWVkcyB0byBiZSBhc3luY1xuICAgKiBAcGFyYW0gYXQgdGhlIHJhbmdlIHRvIGZvY3VzIGF0XG4gICAqIEByZXR1cm5zIGEgdm9pZCBwcm9taXNlIG9uY2UgaXQncyBkb25lXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZm9jdXNBdChhdDogUmFuZ2UgfCBQYXRoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy9wcmV2ZW50Rm9jdXMoKTtcblxuICAgIGlmIChSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyKSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIFJlYWN0RWRpdG9yLmZvY3VzKHRoaXMuZWRpdG9yKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KHRoaXMuZWRpdG9yLCBhdCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHIsIDApO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdFBhdGgoYXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBhIGZhbGxiYWNrIGZvciBpbnNlcnQgd2hlbiBubyBpbnNlcnQgcmVnaW9uIGlzIGZvdW5kXG4gICAqIEBwYXJhbSB0eXBlIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIHB1YmxpYyBnZXRGYWxsYmFja0luc2VydFBhdGgoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCkge1xuICAgICAgcmV0dXJuIFsuLi50aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IsIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudC5jaGlsZHJlbi5sZW5ndGhdO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQpIHtcbiAgICAgIHJldHVybiBbLi4udGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IsIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50LmNoaWxkcmVuLmxlbmd0aF07XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cykge1xuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3IgPVxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1t0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycy5sZW5ndGggLSAxXTtcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50ID1cbiAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHNbdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMubGVuZ3RoIC0gMV07XG4gICAgICByZXR1cm4gWy4uLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yLCBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudC5jaGlsZHJlbi5sZW5ndGhdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW3RoaXMuc3RhdGUudHJlZVZhbHVlLmNoaWxkcmVuLmxlbmd0aF07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGFuIGltYWdlIGJhc2VkIG9uIGEgZ2l2ZW4gZmlsZSB0aGF0IGhhc1xuICAgKiBiZWVuIHRha2VuIGFzIGFuIGlucHV0XG4gICAqIFxuICAgKiBOb3RlIHRoYXQgdGhlcmUgaXMgYW4gaW5zZXJ0IGZpbGUgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgZ2l2ZW5cbiAgICogYXMgcHJvcCBhbmQgdGhhdCdzIHdoYXQgdGhpcyBmdW5jdGlvbiB3aWxsIGNhbGwsIGlmIGFuIGVycm9yIG9jY3VycmVkXG4gICAqIGl0IHNob3VsZCBoYXZlIGJlZW4gZmVkIGFzIGEgcHJvcCBhcyB3ZWxsLCBzbyB0aGlzIGZ1bmN0aW9uIGFsd2F5c1xuICAgKiByZXR1cm5zIGEgdm9pZCBwcm9taXNlXG4gICAqIFxuICAgKiBAcGFyYW0gZmlsZSB0aGUgZmlsZVxuICAgKiBAcGFyYW0gc3RhbmRhbG9uZSB3aGV0aGVyIHRvIG1ha2UgaXQgYSBzdGFuZGFsb25lIGltYWdlXG4gICAqIEByZXR1cm5zIGEgdm9pZCBwcm9taXNlIG9uY2UgaXQncyBkb25lXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5zZXJ0SW1hZ2UoZmlsZTogRmlsZSwgc3RhbmRhbG9uZTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIHdlIHRyeVxuICAgIHRyeSB7XG4gICAgICAvLyBub3cgbGV0J3Mgc2VlIHdoYXQgd2UgZ2V0XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5wcm9wcy5vbkluc2VydEZpbGUoZmlsZSwgdHJ1ZSk7XG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmcgdGhlcmUgc2hvdWxkIGJlIGFuIGVycm9yIGluIHRoZSBwcm9wc1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIG5vdyB3ZSBjYW4gYnVpbGQgdGhlIGltYWdlIG5vZGUgdGhhdCB3ZSBzaG91bGQgYWRkIGluIHRoZSB0cmVlXG4gICAgICBjb25zdCBpbWFnZU5vZGU6IElJbWFnZSA9IHtcbiAgICAgICAgdHlwZTogXCJpbWFnZVwiLFxuICAgICAgICBhbHQ6IG51bGwsXG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgYm9sZDogZmFsc2UsXG4gICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBoZWlnaHQ6IGRhdGEuaGVpZ2h0LFxuICAgICAgICB3aWR0aDogZGF0YS53aWR0aCxcbiAgICAgICAgc2l6ZXM6IFwiNzB2d1wiLFxuICAgICAgICBzcmM6IGRhdGEucmVzdWx0LnVybCxcbiAgICAgICAgc3JjSWQ6IGRhdGEucmVzdWx0LmlkLFxuICAgICAgICBzcmNTZXQ6IG51bGwsXG4gICAgICAgIHN0YW5kYWxvbmUsXG4gICAgICB9O1xuXG4gICAgICAvLyBhbmQgd2UgY2FsbCB0aGUgaW5zZXJ0IG5vZGVcbiAgICAgIGlmICghdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGltYWdlTm9kZSBhcyBhbnksIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBpbWFnZU5vZGUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVUZW1wbGF0ZVRleHQobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xuICAgIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQpIHtcbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgICAgdGV4dENvbnRlbnQ6IHZhbHVlIHx8IFwiXCIsXG4gICAgICB9LCB7IGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IgfSk7XG4gICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICAgIHRleHQ6IGxhYmVsIHx8IGxvY2FsZVJlcGxhY2VyKHRoaXMucHJvcHMuYmFzZUkxOG4udGVtcGxhdGUsIHRoaXMucHJvcHMuYmFzZUkxOG4udGV4dCksXG4gICAgICB9LCB7IGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3IgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGEgYml0IG9mIHRlbXBsYXRlIHRleHQgdGhhdCBpcyB1c2VkIGZvciB0ZW1wbGF0aW5nIHB1cnBvc2VzXG4gICAqIFxuICAgKiBAcGFyYW0gbGFiZWwgdGhlIGxhYmVsIHRvIGdpdmUgaXRcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0aGF0IGl0IGdldHNcbiAgICogQHBhcmFtIGF0IGF0IHdoaWNoIHJhbmdlIHRvIGluc2VydCBpdCAob3B0aW9uYWwpXG4gICAqIEByZXR1cm5zIGEgdm9pZCBwcm9taXNlXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0VGVtcGxhdGVUZXh0KGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICAvLyBub3cgd2UgbWFrZSB0aGUgdGV4dCBub2RlXG4gICAgY29uc3QgdGV4dE5vZGU6IElUZXh0ID0ge1xuICAgICAgYm9sZDogZmFsc2UsXG4gICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgdW5kZXJsaW5lOiBmYWxzZSxcbiAgICAgIHRleHQ6IGxhYmVsIHx8IGxvY2FsZVJlcGxhY2VyKHRoaXMucHJvcHMuYmFzZUkxOG4udGVtcGxhdGUsIHRoaXMucHJvcHMuYmFzZUkxOG4udGV4dCksXG4gICAgfTtcblxuICAgIC8vIGFuZCBub3cgd2UgYnVpbGQgYSBwYXJhZ3JhcGggbm9kZSB0byBwdXQgdGhlIHRleHQgdGhlcmVcbiAgICBjb25zdCBpbmxpbmVOb2RlOiBJSW5saW5lID0ge1xuICAgICAgY2hpbGRyZW46IFt0ZXh0Tm9kZV0sXG4gICAgICB0eXBlOiBcImlubGluZVwiLFxuICAgICAgdGV4dENvbnRlbnQ6IHZhbHVlIHx8IFwiXCIsXG4gICAgfTtcblxuICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgIGlmICghdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBpbmxpbmVOb2RlIGFzIGFueSwgeyBhdDogdGhpcy5nZXRGYWxsYmFja0luc2VydFBhdGgoKSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgaW5saW5lTm9kZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZVRlbXBsYXRlSFRNTChsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50KSB7XG4gICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICAgIGh0bWw6IHZhbHVlIHx8IFwiXCIsXG4gICAgICB9LCB7IGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvciB9KTtcbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgICAgdGV4dDogbGFiZWwgfHwgbG9jYWxlUmVwbGFjZXIodGhpcy5wcm9wcy5iYXNlSTE4bi50ZW1wbGF0ZSwgdGhpcy5wcm9wcy5iYXNlSTE4bi5jb250YWluZXIpLFxuICAgICAgfSwgeyBhdDogdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIGluc2VydCBhIGJpdCBvZiB0ZW1wbGF0ZSBodG1sIHRoYXQgaXMgdXNlZCBmb3IgdGVtcGxhdGluZyBwdXJwb3Nlcywgd29yayBzaW1pbGFyXG4gICAqIHRvIHRlbXBsYXRlIHRleHQsIGV4Y2VwdCBpdCB1c2VzIGh0bWwgY29udGVudCBpbnN0ZWFkIHRvIHJlcGxhY2UgdGhlIGlubmVyIGh0bWxcbiAgICogXG4gICAqIEBwYXJhbSBsYWJlbCB0aGUgbGFiZWwgdG8gYmUgZ2l2ZW4gdG8gdGhlIGVsZW1lbnQgdG8gYmUgYWRkZWRcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0aGF0IHdpbGwgYmUgdXNlZCBmcm9tIHRoZSBjb250ZXh0XG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZSB3aGVyZSB0byBiZSBpbnNlcnRlZFxuICAgKi9cbiAgcHVibGljIGluc2VydFRlbXBsYXRlSFRNTChsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgLy8gYW5kIGNyZWF0ZSBhIHRleHQgbm9kZSBiYXNlZCBvbiB0aGF0XG4gICAgLy8gd2hpY2ggaXMgd2hlcmUgd2UgcHV0IHRoZSBsYWJlbFxuICAgIGNvbnN0IHRleHROb2RlOiBJVGV4dCA9IHtcbiAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgaXRhbGljOiBmYWxzZSxcbiAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICB0ZXh0OiBsYWJlbCB8fCBsb2NhbGVSZXBsYWNlcih0aGlzLnByb3BzLmJhc2VJMThuLnRlbXBsYXRlLCB0aGlzLnByb3BzLmJhc2VJMThuLmNvbnRhaW5lciksXG4gICAgfVxuXG4gICAgLy8gYW5kIGEgY29udGFpbmVyIHRvIG1ha2UgaXQgYmUgdGhlIGlubmVyIGh0bWxcbiAgICAvLyBjb250YWluZXJcbiAgICBjb25zdCB2b2lkQmxvY2s6IElWb2lkQmxvY2sgPSB7XG4gICAgICBjaGlsZHJlbjogW3RleHROb2RlXSxcbiAgICAgIHR5cGU6IFwidm9pZC1ibG9ja1wiLFxuICAgICAgaHRtbDogdmFsdWUgfHwgXCJcIixcbiAgICB9XG5cbiAgICAvLyBhbmQgd2UgY2FsbCB0aGUgaW5zZXJ0IG5vZGVcbiAgICBpZiAoIXRoaXMuZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgdm9pZEJsb2NrLCB7IGF0OiB0aGlzLmdldEZhbGxiYWNrSW5zZXJ0UGF0aCgpIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCB2b2lkQmxvY2spO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgdGFibGUgYXQgdGhlIGdpdmVuIGxvY2F0aW9uXG4gICAqIEBwYXJhbSB0eXBlIHRoZSB0eXBlIG9mIHRoZSB0YWJsZVxuICAgKi9cbiAgcHVibGljIGluc2VydFRhYmxlKHR5cGU/OiBzdHJpbmcpIHtcbiAgICAvLyBub3cgd2UgY2FuIG1ha2UgdGhlIGNvbnRhaW5lclxuICAgIGNvbnN0IHRhYmxlTm9kZTogSVRhYmxlID0ge1xuICAgICAgdHlwZTogXCJ0YWJsZVwiLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IFwidGJvZHlcIixcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiBcInRyXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZFwiLFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgU1RBTkRBUkRfUEFSQUdSQVBIKCksXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB0YWJsZVR5cGU6IHR5cGUgfHwgbnVsbCxcbiAgICB9O1xuXG4gICAgLy8gYW5kIHdlIGNhbGwgdGhlIGluc2VydCBub2RlXG4gICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHRhYmxlTm9kZSwgeyBhdDogdGhpcy5nZXRGYWxsYmFja0luc2VydFBhdGgoKSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgdGFibGVOb2RlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaW5zZXJ0VGFibGVDb2x1bW4oKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRDb2x1bW5JbmRleCA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzICYmXG4gICAgICBmaW5kTGFzdEluZGV4KHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzLCAoZSkgPT4gZS50eXBlID09PSBcInRkXCIgfHwgZS50eXBlID09PSBcInRoXCIpO1xuXG4gICAgaWYgKGN1cnJlbnRDb2x1bW5JbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50Q29sdW1uID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHNbY3VycmVudENvbHVtbkluZGV4XTtcbiAgICBjb25zdCBjdXJyZW50Q29sdW1uQW5jaG9yID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbY3VycmVudENvbHVtbkluZGV4XTtcblxuICAgIC8vIHRoaXMgaXMgd2hlcmUgd2UgZW5kIHRvIGZvY3VzIGFzIHRoYXQncyB3aGVyZSB3ZSBhZGQgdGhlIG5ldyByb3cgYXRcbiAgICAvLyBob3dldmVyIHdlIGRvIG5lZWQgdG8gYWRkIGEgbmV3IGNvbHVtbiBhdCB0aGUgc2FtZSBpbmRleCBpbiBldmVyeVxuICAgIC8vIHJvd1xuICAgIGNvbnN0IHRhcmdldENvbHVtbkFuY2hvciA9IFsuLi5jdXJyZW50Q29sdW1uQW5jaG9yXTtcbiAgICB0YXJnZXRDb2x1bW5BbmNob3JbdGFyZ2V0Q29sdW1uQW5jaG9yLmxlbmd0aCAtIDFdKys7XG5cbiAgICBjb25zdCB0YXJnZXRJbmRleCA9IHRhcmdldENvbHVtbkFuY2hvclt0YXJnZXRDb2x1bW5BbmNob3IubGVuZ3RoIC0gMV07XG5cbiAgICBjb25zdCB0YWJsZUFuY2hvciA9IFsuLi5jdXJyZW50Q29sdW1uQW5jaG9yXTtcbiAgICAvLyB0clxuICAgIHRhYmxlQW5jaG9yLnBvcCgpO1xuICAgIC8vIHRoZWFkIG9yIHRib2R5XG4gICAgdGFibGVBbmNob3IucG9wKCk7XG4gICAgLy8gdGFibGVcbiAgICB0YWJsZUFuY2hvci5wb3AoKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB0YWJsZUVsZW1lbnQgPSB0aGlzLmdldE5vZGVBdCh0YWJsZUFuY2hvcikgYXMgUmljaEVsZW1lbnQ7XG5cbiAgICAgIGlmICh0YWJsZUVsZW1lbnQudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgIHRhYmxlRWxlbWVudC5jaGlsZHJlbi5mb3JFYWNoKCh0aGVhZE9yVGJvZHlPclRmb290LCB0aGVhZE9yVGJvZHlPclRGb290SW5kZXgpID0+IHtcbiAgICAgICAgICB0aGVhZE9yVGJvZHlPclRmb290LmNoaWxkcmVuLmZvckVhY2goKHJvdywgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbjogSVRkID0ge1xuICAgICAgICAgICAgICB0eXBlOiBcInRkXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgU1RBTkRBUkRfUEFSQUdSQVBIKCksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZXQgYWN0dWFsVGFyZ2V0SW5kZXg6IG51bWJlciA9IHRhcmdldEluZGV4O1xuICAgICAgICAgICAgaWYgKGFjdHVhbFRhcmdldEluZGV4ID4gcm93LmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICBhY3R1YWxUYXJnZXRJbmRleCA9IHJvdy5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGluc2VydFBvaW50ID0gWy4uLnRhYmxlQW5jaG9yLCB0aGVhZE9yVGJvZHlPclRGb290SW5kZXgsIHJvd0luZGV4LCBhY3R1YWxUYXJnZXRJbmRleF07XG5cbiAgICAgICAgICAgIC8vIG9ubHkgYWxsb3cgdG8gbm9ybWFsaXplIGF0IG91ciBsYXN0IGluc2VydFxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBub3JtYWxpemVyIHdpbGwgZ2V0IGNyYXp5XG4gICAgICAgICAgICB0aGlzLnByZXZlbnROb3JtYWxpemUgPSByb3dJbmRleCAhPT0gdGhlYWRPclRib2R5T3JUZm9vdC5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgY29sdW1uLCB7IGF0OiBpbnNlcnRQb2ludCB9KTtcbiAgICAgICAgICAgIHRoaXMucHJldmVudE5vcm1hbGl6ZSA9IGZhbHNlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0ZXh0QW5jaG9yT2ZDb2x1bW4gPSB0YXJnZXRDb2x1bW5BbmNob3I7XG4gICAgICAgIC8vIHBhcmFncmFwaFxuICAgICAgICB0ZXh0QW5jaG9yT2ZDb2x1bW4ucHVzaCgwKTtcbiAgICAgICAgLy8gdGV4dFxuICAgICAgICB0ZXh0QW5jaG9yT2ZDb2x1bW4ucHVzaCgwKTtcblxuICAgICAgICB0aGlzLmZvY3VzQXQoe1xuICAgICAgICAgIGFuY2hvcjoge1xuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgcGF0aDogdGFyZ2V0Q29sdW1uQW5jaG9yLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9jdXM6IHtcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIHBhdGg6IHRhcmdldENvbHVtbkFuY2hvcixcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcblxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVUYWJsZUNvbHVtbigpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudENvbHVtbkluZGV4ID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgJiZcbiAgICAgIGZpbmRMYXN0SW5kZXgodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMsIChlKSA9PiBlLnR5cGUgPT09IFwidGRcIiB8fCBlLnR5cGUgPT09IFwidGhcIik7XG5cbiAgICBpZiAoY3VycmVudENvbHVtbkluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRDb2x1bW4gPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50c1tjdXJyZW50Q29sdW1uSW5kZXhdO1xuICAgIGNvbnN0IGN1cnJlbnRDb2x1bW5BbmNob3IgPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1tjdXJyZW50Q29sdW1uSW5kZXhdO1xuXG4gICAgLy8gdGhpcyBpcyB0aGUgaW5kZXggd2UgYXJlIHJlbW92aW5nIGluIGVhY2ggcm93XG4gICAgY29uc3QgdGFyZ2V0SW5kZXggPSBjdXJyZW50Q29sdW1uQW5jaG9yW2N1cnJlbnRDb2x1bW5BbmNob3IubGVuZ3RoIC0gMV07XG5cbiAgICBjb25zdCB0YWJsZUFuY2hvciA9IFsuLi5jdXJyZW50Q29sdW1uQW5jaG9yXTtcbiAgICAvLyB0clxuICAgIHRhYmxlQW5jaG9yLnBvcCgpO1xuICAgIC8vIHRoZWFkIG9yIHRib2R5XG4gICAgdGFibGVBbmNob3IucG9wKCk7XG4gICAgLy8gdGFibGVcbiAgICB0YWJsZUFuY2hvci5wb3AoKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB0YWJsZUVsZW1lbnQgPSB0aGlzLmdldE5vZGVBdCh0YWJsZUFuY2hvcikgYXMgUmljaEVsZW1lbnQ7XG5cbiAgICAgIGlmICh0YWJsZUVsZW1lbnQudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgIHRhYmxlRWxlbWVudC5jaGlsZHJlbi5mb3JFYWNoKCh0aGVhZE9yVGJvZHlPclRmb290LCB0aGVhZE9yVGJvZHlPclRGb290SW5kZXgpID0+IHtcbiAgICAgICAgICB0aGVhZE9yVGJvZHlPclRmb290LmNoaWxkcmVuLmZvckVhY2goKHJvdywgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRlbGV0ZVBvaW50ID0gWy4uLnRhYmxlQW5jaG9yLCB0aGVhZE9yVGJvZHlPclRGb290SW5kZXgsIHJvd0luZGV4LCB0YXJnZXRJbmRleF07XG5cbiAgICAgICAgICAgIC8vIG9ubHkgYWxsb3cgdG8gbm9ybWFsaXplIGF0IG91ciBsYXN0IGluc2VydFxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBub3JtYWxpemVyIHdpbGwgZ2V0IGNyYXp5XG4gICAgICAgICAgICB0aGlzLnByZXZlbnROb3JtYWxpemUgPSByb3dJbmRleCAhPT0gdGhlYWRPclRib2R5T3JUZm9vdC5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5kZWxldGUodGhpcy5lZGl0b3IsIHsgYXQ6IGRlbGV0ZVBvaW50IH0pO1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGluc2VydFRhYmxlUm93KCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50Um93SW5kZXggPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyAmJlxuICAgICAgZmluZExhc3RJbmRleCh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cywgKGUpID0+IGUudHlwZSA9PT0gXCJ0clwiKTtcblxuICAgIGlmIChjdXJyZW50Um93SW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFJvdyA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzW2N1cnJlbnRSb3dJbmRleF07XG4gICAgY29uc3QgY3VycmVudFJvd0FuY2hvciA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW2N1cnJlbnRSb3dJbmRleF07XG5cbiAgICBjb25zdCByb3c6IElUciA9IHtcbiAgICAgIHR5cGU6IFwidHJcIixcbiAgICAgIGNoaWxkcmVuOiBjdXJyZW50Um93LmNoaWxkcmVuLm1hcCgodikgPT4gKFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogXCJ0ZFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICBTVEFOREFSRF9QQVJBR1JBUEgoKSxcbiAgICAgICAgICBdLFxuICAgICAgICB9XG4gICAgICApKSxcbiAgICB9O1xuXG4gICAgLy8gYW5kIG5vdyBsZXQncyBnZXQgdGhlIHRoZWFkIG9yIHRib2R5IGluIHF1ZXN0aW9uXG4gICAgY29uc3QgcGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdEFuY2hvciA9IFsuLi5jdXJyZW50Um93QW5jaG9yXTtcbiAgICBwYXJlbnRUYm9keU9yVGhlYWRPclRmb290QW5jaG9yLnBvcCgpO1xuICAgIGNvbnN0IHBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3QgPSB0aGlzLmdldE5vZGVBdChwYXJlbnRUYm9keU9yVGhlYWRPclRmb290QW5jaG9yKSBhcyBSaWNoRWxlbWVudDtcblxuICAgIC8vIGlmIGl0J3MgYSB0Ym9keVxuICAgIGlmIChwYXJlbnRUYm9keU9yVGhlYWRPclRmb290LnR5cGUgPT09IFwidGJvZHlcIikge1xuICAgICAgLy8gd2Ugc2ltcGx5IGFkZCB0aGUgcm93IG5leHQgdG8gdGhlIGN1cnJlbnRcbiAgICAgIGNvbnN0IHRhcmdldFJvd0FuY2hvciA9IGN1cnJlbnRSb3dBbmNob3I7XG4gICAgICB0YXJnZXRSb3dBbmNob3JbdGFyZ2V0Um93QW5jaG9yLmxlbmd0aCAtIDFdKys7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCByb3csIHsgYXQ6IHRhcmdldFJvd0FuY2hvciB9KTtcblxuICAgICAgY29uc3QgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0ID0gdGFyZ2V0Um93QW5jaG9yO1xuICAgICAgLy8gZmlyc3QgdGRcbiAgICAgIHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dC5wdXNoKDApO1xuICAgICAgLy8gZmlyc3QgcGFyYWdyYXBoXG4gICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgIC8vIGZpcnN0IHRleHQgaW4gcGFyYWdyYXBoXG4gICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcblxuICAgICAgdGhpcy5mb2N1c0F0KHtcbiAgICAgICAgYW5jaG9yOiB7XG4gICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgIHBhdGg6IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCxcbiAgICAgICAgfSxcbiAgICAgICAgZm9jdXM6IHtcbiAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgcGF0aDogdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChwYXJlbnRUYm9keU9yVGhlYWRPclRmb290LnR5cGUgPT09IFwidGhlYWRcIikge1xuICAgICAgLy8gb3RoZXJ3aXNlIHdlIG5lZWQgdG8gYWRkIHRoZSByb3cgaW4gdGhlIHRib2R5LCB0aGF0IGlzIG5leHRcbiAgICAgIC8vIHRvIHRoZSB0aGVhZFxuICAgICAgY29uc3QgdGJvZHlBbmNob3IgPSBbLi4ucGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdEFuY2hvcl07XG4gICAgICB0Ym9keUFuY2hvclt0Ym9keUFuY2hvci5sZW5ndGggLSAxXSsrO1xuXG4gICAgICAvLyBsZXQncyBnZXQgdGhlIHRib2R5XG4gICAgICBsZXQgdGJvZHk6IFJpY2hFbGVtZW50ID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRib2R5ID0gdGhpcy5nZXROb2RlQXQodGJvZHlBbmNob3IpIGFzIFJpY2hFbGVtZW50O1xuICAgICAgfSBjYXRjaCB7XG5cbiAgICAgIH1cblxuICAgICAgLy8gaWYgd2UgaGF2ZSBhIHRib2R5XG4gICAgICBpZiAodGJvZHkgJiYgdGJvZHkudHlwZSA9PT0gXCJ0Ym9keVwiKSB7XG4gICAgICAgIC8vIG5ldyByb3cgYXQgdGhlIHN0YXJ0IG9mIHRoZSB0Ym9keVxuICAgICAgICBjb25zdCB0YXJnZXRSb3dBbmNob3IgPSB0Ym9keUFuY2hvcjtcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yLnB1c2goMCk7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHJvdywgeyBhdDogdGFyZ2V0Um93QW5jaG9yIH0pO1xuXG4gICAgICAgIGNvbnN0IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCA9IHRhcmdldFJvd0FuY2hvcjtcbiAgICAgICAgLy8gZmlyc3QgdGRcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG4gICAgICAgIC8vIGZpcnN0IHBhcmFncmFwaFxuICAgICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgICAgLy8gZmlyc3QgdGV4dCBpbiBwYXJhZ3JhcGhcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG5cbiAgICAgICAgdGhpcy5mb2N1c0F0KHtcbiAgICAgICAgICBhbmNob3I6IHtcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIHBhdGg6IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvY3VzOiB7XG4gICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICBwYXRoOiB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBubyB0Ym9keSwgd2UgbmVlZCB0byBhZGQgYSBuZXcgdGJvZHkgd2hlcmUgaXQgc2hvdWxkIGJlXG4gICAgICAgIC8vIGNvdWxkIGJlIGEgdGZvb3Qgb3IgZG93bnJpZ2h0IG1pc3NpbmdcbiAgICAgICAgY29uc3QgdGJvZHk6IElUYm9keSA9IHtcbiAgICAgICAgICB0eXBlOiBcInRib2R5XCIsXG4gICAgICAgICAgY2hpbGRyZW46IFtyb3ddLFxuICAgICAgICB9O1xuXG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHRib2R5LCB7IGF0OiB0Ym9keUFuY2hvciB9KTtcblxuICAgICAgICBjb25zdCB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQgPSB0Ym9keUFuY2hvcjtcbiAgICAgICAgLy8gZmlyc3QgdHJcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG4gICAgICAgIC8vIGZpcnN0IHRkXG4gICAgICAgIHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dC5wdXNoKDApO1xuICAgICAgICAvLyBmaXJzdCBwYXJhZ3JhcGhcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG4gICAgICAgIC8vIGZpcnN0IHRleHQgaW4gcGFyYWdyYXBoXG4gICAgICAgIHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dC5wdXNoKDApO1xuXG4gICAgICAgIHRoaXMuZm9jdXNBdCh7XG4gICAgICAgICAgYW5jaG9yOiB7XG4gICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICBwYXRoOiB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb2N1czoge1xuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgcGF0aDogdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdC50eXBlID09PSBcInRmb290XCIpIHtcbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBuZWVkIHRvIGFkZCB0aGUgcm93IGluIHRoZSB0Ym9keSwgdGhhdCBpcyBuZXh0XG4gICAgICAvLyB0byB0aGUgdGhlYWRcbiAgICAgIGNvbnN0IHRib2R5QW5jaG9yID0gWy4uLnBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3RBbmNob3JdO1xuICAgICAgdGJvZHlBbmNob3JbdGJvZHlBbmNob3IubGVuZ3RoIC0gMV0tLTtcblxuICAgICAgLy8gbGV0J3MgZ2V0IHRoZSB0Ym9keVxuICAgICAgbGV0IHRib2R5OiBSaWNoRWxlbWVudCA9IG51bGw7XG4gICAgICB0cnkge1xuICAgICAgICB0Ym9keSA9IHRoaXMuZ2V0Tm9kZUF0KHRib2R5QW5jaG9yKSBhcyBSaWNoRWxlbWVudDtcbiAgICAgIH0gY2F0Y2gge1xuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRmb290Q2xvbmUgPSB7IC4uLnBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3QgfSBhcyBJVGZvb3Q7XG4gICAgICB0Zm9vdENsb25lLmNoaWxkcmVuID0gdGZvb3RDbG9uZS5jaGlsZHJlbi5tYXAoKHYpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiBcInRyXCIsXG4gICAgICAgICAgY2hpbGRyZW46IHYuY2hpbGRyZW4ubWFwKHYyID0+IChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ0ZFwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIFNUQU5EQVJEX1BBUkFHUkFQSCgpLFxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKSksXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBpZiB3ZSBoYXZlIGEgdGJvZHlcbiAgICAgIHRoaXMucHJldmVudE5vcm1hbGl6ZSA9IHRydWU7XG4gICAgICBpZiAodGJvZHkgJiYgdGJvZHkudHlwZSA9PT0gXCJ0Ym9keVwiKSB7XG4gICAgICAgIC8vIHdlIHVwZGF0ZSBvdXIgdGZvb3QgdG8gYmUgdGJvZHkgc28gdGhhdCBpdCBtZXJnZXNcbiAgICAgICAgY29uc3QgY3VycmVudFRCb2R5UHJvcHNDb3B5ID0geyAuLi50Ym9keSB9O1xuICAgICAgICBkZWxldGUgY3VycmVudFRCb2R5UHJvcHNDb3B5LmNoaWxkcmVuO1xuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIGN1cnJlbnRUQm9keVByb3BzQ29weSBhcyBhbnksXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXQ6IHBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3RBbmNob3IsXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gd2Ugc2ltcGx5IG1ha2UgaXQgaW50byBhIHRib2R5XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogXCJ0Ym9keVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXQ6IHBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3RBbmNob3IsXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gZmFsc2U7XG5cbiAgICAgIGNvbnN0IG5leHRBbmNob3JGb3JUZm9vdCA9IFsuLi5wYXJlbnRUYm9keU9yVGhlYWRPclRmb290QW5jaG9yXTtcbiAgICAgIG5leHRBbmNob3JGb3JUZm9vdFtuZXh0QW5jaG9yRm9yVGZvb3QubGVuZ3RoIC0gMV0rKztcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHRmb290Q2xvbmUsIHsgYXQ6IG5leHRBbmNob3JGb3JUZm9vdCB9KTtcblxuICAgICAgLy8gaWYgdGhlcmUgd2FzIGEgdGJvZHkgdGhlIG1lcmdpbmcgcmVhY3Rpb24gY2F1c2VkIHRoYXQgdGhlIG5leHQgYW5jaG9yIGlzIG5vdFxuICAgICAgLy8gYW55bW9yZSB3aGVyZSBvdXIgbm9kZSBpcyBzbyB3ZSBjYW4gdXNlIHRoaXMgb25lLCBvdGhlcndpc2UgaXQgaXMgdGhlIHNhbWUgYXMgdGhlIG5leHRcbiAgICAgIGNvbnN0IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCA9IHRib2R5ID8gcGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdEFuY2hvciA6IG5leHRBbmNob3JGb3JUZm9vdDtcbiAgICAgIC8vIGZpcnN0IHRyXG4gICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgIC8vIGZpcnN0IHRkXG4gICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgIC8vIGZpcnN0IHBhcmFncmFwaFxuICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG4gICAgICAvLyBmaXJzdCB0ZXh0IGluIHBhcmFncmFwaFxuICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG5cbiAgICAgIHRoaXMuZm9jdXNBdCh7XG4gICAgICAgIGFuY2hvcjoge1xuICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICBwYXRoOiB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQsXG4gICAgICAgIH0sXG4gICAgICAgIGZvY3VzOiB7XG4gICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgIHBhdGg6IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVUYWJsZVJvdygpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFJvd0luZGV4ID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgJiZcbiAgICAgIGZpbmRMYXN0SW5kZXgodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMsIChlKSA9PiBlLnR5cGUgPT09IFwidHJcIik7XG5cbiAgICBpZiAoY3VycmVudFJvd0luZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBUcmFuc2Zvcm1zLmRlbGV0ZSh0aGlzLmVkaXRvciwgeyBhdDogdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbY3VycmVudFJvd0luZGV4XSB9KTtcbiAgICB9IGNhdGNoIHtcblxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUZWxscyB3aGV0aGVyIHRoZSBjdXJyZW50IHRhYmxlIHJvdyBjYW5cbiAgICogYmUgdG9nZ2xlZCBpbiB0aGUgZW52aXJvbm1lbnQgaXQgaXNcbiAgICovXG4gIHB1YmxpYyBjYW5Ub2dnbGVUYWJsZShlbGVtZW50OiBcInRoZWFkXCIgfCBcInRmb290XCIpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgcG90ZW50aWFsVGRJbmRleCA9IGZpbmRMYXN0SW5kZXgodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMsIChlKSA9PiBlLnR5cGUgPT09IFwidGRcIiB8fCBlLnR5cGUgPT09IFwidGhcIik7XG5cbiAgICBpZiAocG90ZW50aWFsVGRJbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCB0ZEFuY2hvciA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW3BvdGVudGlhbFRkSW5kZXhdO1xuXG4gICAgY29uc3Qgcm93UGF0aCA9IFsuLi50ZEFuY2hvcl07XG4gICAgcm93UGF0aC5wb3AoKTtcblxuICAgIGNvbnN0IHRoZWFkT3JUYm9keU9yVGZvb3RQYXRoID0gWy4uLnJvd1BhdGhdO1xuICAgIHRoZWFkT3JUYm9keU9yVGZvb3RQYXRoLnBvcCgpO1xuXG4gICAgY29uc3QgdGFibGVQYXRoID0gWy4uLnRoZWFkT3JUYm9keU9yVGZvb3RQYXRoXTtcbiAgICB0YWJsZVBhdGgucG9wKCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcG90ZW50aWFsUm93ID0gdGhpcy5nZXROb2RlQXQocm93UGF0aCkgYXMgUmljaEVsZW1lbnQ7XG4gICAgICBpZiAocG90ZW50aWFsUm93LnR5cGUgIT09IFwidHJcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRoZWFkT3JUYm9keU9yVGZvb3QgPSB0aGlzLmdldE5vZGVBdCh0aGVhZE9yVGJvZHlPclRmb290UGF0aCkgYXMgUmljaEVsZW1lbnQ7XG4gICAgICBpZiAodGhlYWRPclRib2R5T3JUZm9vdC50eXBlID09PSBlbGVtZW50KSB7XG4gICAgICAgIC8vIGlmIHdlIGFyZSBhbHJlYWR5IGluIGEgdGhlYWQgb2YgY291cnNlIHdlIGNhbiB0b2dnbGUgaXQgaW50byBhIHRib2R5XG4gICAgICAgIC8vIHJvdyBlbGVtZW50XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh0aGVhZE9yVGJvZHlPclRmb290LnR5cGUgPT09IFwidGZvb3RcIiB8fCB0aGVhZE9yVGJvZHlPclRmb290LnR5cGUgPT09IFwidGhlYWRcIikge1xuICAgICAgICAvLyB3ZSBjYW4ndCBjb252ZXJ0IHRoZSBzYW1lIHRoaW5nIGFzIHdlIGFyZSBub3QgaW4gdGhlIHJpZ2h0IHBsYWNlXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGFibGVQYXJlbnQgPSB0aGlzLmdldE5vZGVBdCh0YWJsZVBhdGgpIGFzIFJpY2hFbGVtZW50O1xuICAgICAgaWYgKHRhYmxlUGFyZW50LnR5cGUgIT09IFwidGFibGVcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIHdlIGNhbm5vdCB0b2dnbGUgaWYgd2UgYWxyZWFkeSBoYXZlIGEgdGhlYWRcbiAgICAgIGNvbnN0IHRoZWFkT3JUZm9vdEFscmVhZHlFeGlzdHMgPSB0YWJsZVBhcmVudC5jaGlsZHJlbi5maW5kKChjKSA9PiBjLnR5cGUgPT09IGVsZW1lbnQpO1xuICAgICAgaWYgKHRoZWFkT3JUZm9vdEFscmVhZHlFeGlzdHMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IFwidGhlYWRcIikge1xuICAgICAgICAgIC8vIG90aGVyd2lzZSB3ZSBjYW4gb25seSB0b2dnbGUgaWYgdGhpcyBpcyB0aGUgZmlyc3Qgcm93IG9mIHRoZSB0YWJsZVxuICAgICAgICAgIHJldHVybiByb3dQYXRoW3Jvd1BhdGgubGVuZ3RoIC0gMV0gPT09IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudCA9PT0gXCJ0Zm9vdFwiKSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIGNhbiBvbmx5IHRvZ2dsZSBpZiB0aGlzIGlzIHRoZSBsYXN0IHJvdyBvZiB0aGUgdGFibGVcbiAgICAgICAgICByZXR1cm4gcm93UGF0aFtyb3dQYXRoLmxlbmd0aCAtIDFdID09PSB0aGVhZE9yVGJvZHlPclRmb290LmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9ubHkgd29ya3Mgd2hlbiB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgdGFibGVcbiAgICogaXMgc2VsZWN0ZWQsIGFrYSB0aGUgZmlyc3Qgcm93XG4gICAqL1xuICBwdWJsaWMgdG9nZ2xlVGFibGUoZWxlbWVudDogXCJ0aGVhZFwiIHwgXCJ0Zm9vdFwiKSB7XG4gICAgaWYgKCF0aGlzLmNhblRvZ2dsZVRhYmxlKGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG90ZW50aWFsVGRJbmRleCA9IGZpbmRMYXN0SW5kZXgodGhpcy5zdGF0ZS5jdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzLCAoZSkgPT4gZS50eXBlID09PSBcInRkXCIgfHwgZS50eXBlID09PSBcInRoXCIpO1xuICAgIGNvbnN0IHRkQW5jaG9yID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbcG90ZW50aWFsVGRJbmRleF07XG5cbiAgICBjb25zdCByb3dQYXRoID0gWy4uLnRkQW5jaG9yXTtcbiAgICByb3dQYXRoLnBvcCgpO1xuXG4gICAgY29uc3QgdGhlYWRPclRib2R5UGF0aCA9IFsuLi5yb3dQYXRoXTtcbiAgICB0aGVhZE9yVGJvZHlQYXRoLnBvcCgpO1xuXG4gICAgY29uc3QgdGFibGVQYXRoID0gWy4uLnRoZWFkT3JUYm9keVBhdGhdO1xuICAgIHRhYmxlUGF0aC5wb3AoKTtcblxuICAgIGNvbnN0IHRhYmxlUGFyZW50ID0gdGhpcy5nZXROb2RlQXQodGFibGVQYXRoKSBhcyBJVGFibGU7XG5cbiAgICAvLyBtb3ZlIGFsbCB0aGUgdGhlYWQgZWxlbWVudHMgaW50byB0aGUgdGJvZHlcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRhYmxlUGFyZW50LmNoaWxkcmVuLmZpbmRJbmRleCgoZSkgPT4gZS50eXBlID09PSBlbGVtZW50KTtcbiAgICBjb25zdCBib2R5UG9zaXRpb24gPSB0YWJsZVBhcmVudC5jaGlsZHJlbi5maW5kSW5kZXgoKGUpID0+IGUudHlwZSA9PT0gXCJ0Ym9keVwiKTtcbiAgICBpZiAocG9zaXRpb24gIT09IC0xKSB7XG4gICAgICBjb25zdCBjdXJyZW50VEJvZHkgPSB0YWJsZVBhcmVudC5jaGlsZHJlbltib2R5UG9zaXRpb25dO1xuXG4gICAgICBpZiAoIWN1cnJlbnRUQm9keSkge1xuICAgICAgICAvLyBubyBib2R5IGxldCdzIG1ha2UgdGhlIHdob2xlIHRoaW5nIHRoZSBib2R5XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogXCJ0Ym9keVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXQ6IFsuLi50YWJsZVBhdGgsIHBvc2l0aW9uXSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlbnN1cmUgdGhleSB3aWxsIG1lcmdlIGFuZCBiZWNvbWUgMSBzaW5nbGUgYm9keVxuICAgICAgICAvLyBhcyB0aGV5IGFyZSBtZXJnYWJsZVxuICAgICAgICBjb25zdCBjdXJyZW50VEJvZHlQcm9wc0NvcHkgPSB7IC4uLmN1cnJlbnRUQm9keSB9O1xuICAgICAgICBkZWxldGUgY3VycmVudFRCb2R5UHJvcHNDb3B5LmNoaWxkcmVuO1xuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIGN1cnJlbnRUQm9keVByb3BzQ29weSBhcyBhbnksXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXQ6IFsuLi50YWJsZVBhdGgsIHBvc2l0aW9uXSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1vdmUgdGhlIGZpcnN0IHJvdyBvZiB0aGUgdGJvZHkgYXMgYSB0aGVhZFxuICAgICAgY29uc3QgY3VycmVudFRCb2R5ID0gdGFibGVQYXJlbnQuY2hpbGRyZW5bYm9keVBvc2l0aW9uXTtcblxuICAgICAgaWYgKCFjdXJyZW50VEJvZHkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBvbmx5IHRoYXQgb25lIHJvd1xuICAgICAgaWYgKGN1cnJlbnRUQm9keS5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gbm8gb3RoZXIgdGhhbiBvbmUgcm93IGxldCdzIG1ha2UgdGhlIHdob2xlIHRoaW5nIHRoZSB0aGVhZFxuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IGVsZW1lbnQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgYm9keVBvc2l0aW9uXSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjdXJyZW50VEJvZHlQcm9wc0NvcHkgPSB7IC4uLmN1cnJlbnRUQm9keSB9O1xuICAgICAgICBjdXJyZW50VEJvZHlQcm9wc0NvcHkuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgY3VycmVudFRCb2R5UHJvcHNDb3B5LnR5cGUgPSBlbGVtZW50O1xuXG4gICAgICAgIC8vIGluc2VydGluZyBlbXB0eSBlbGVtZW50XG4gICAgICAgIHRoaXMucHJldmVudE5vcm1hbGl6ZSA9IHRydWU7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAgY3VycmVudFRCb2R5UHJvcHNDb3B5IGFzIGFueSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgZWxlbWVudCA9PT0gXCJ0aGVhZFwiID8gMCA6IGJvZHlQb3NpdGlvbiArIDFdLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IFwidGhlYWRcIikge1xuICAgICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKFxuICAgICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vIHRib2R5IGlzIG5vdyBpbiAxIGFoZWFkXG4gICAgICAgICAgICAgIC8vIHplcm8gZm9yIHRoZSBmaXJzdCByb3dcbiAgICAgICAgICAgICAgYXQ6IFsuLi50YWJsZVBhdGgsIGJvZHlQb3NpdGlvbiArIDEsIDBdLFxuICAgICAgICAgICAgICAvLyB0aGlzIGlzIG91ciBuZXcgdGhlYWRcbiAgICAgICAgICAgICAgdG86IFsuLi50YWJsZVBhdGgsIDAsIDBdLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoXG4gICAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgLy8gdGJvZHkgaXMgYXQgdGhlIHNhbWUgcGxhY2UgYXMgYmVmb3JlXG4gICAgICAgICAgICAgIC8vIHdlIHBpY2sgdGhlIGxhc3Qgcm93XG4gICAgICAgICAgICAgIGF0OiBbLi4udGFibGVQYXRoLCBib2R5UG9zaXRpb24sIGN1cnJlbnRUQm9keS5jaGlsZHJlbi5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgICAgLy8gdGhpcyBpcyBvdXIgbmV3IHRmb290IHdoaWNoIGlzIGFmdGVyIG91ciBib2R5XG4gICAgICAgICAgICAgIHRvOiBbLi4udGFibGVQYXRoLCBib2R5UG9zaXRpb24gKyAxLCAwXSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0VmlkZW9TcmNPcmlnaW5BbmRTdGF0dXModXJsOiBzdHJpbmcpIHtcbiAgICAvLyBmaXJzdCB3ZSBwYXJzZSB0aGUgdXJsLCB3ZSBvbmx5IHN1cHBvcnQgeW91dHViZSBvciB2aW1lb1xuICAgIC8vIHVybHMgZm9yIHRoZSB2aWRlb1xuICAgIGxldCBzcmM6IHN0cmluZyA9IG51bGw7XG4gICAgbGV0IG9yaWdpbjogc3RyaW5nID0gbnVsbDtcbiAgICBsZXQgc3RhdHVzOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIGxldCBwYXJzZWRVUkw6IFVSTCA9IG51bGw7XG4gICAgaWYgKHVybCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcGFyc2VkVVJMID0gbmV3IFVSTCh1cmwpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHN0YXR1cyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGZpcnN0IHdlIGFyZSBnb2luZyB0byBjaGVjayBmb3IgeW91dHViZVxuICAgIC8vIHVybHNcbiAgICBpZiAocGFyc2VkVVJMKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHBhcnNlZFVSTC5ob3N0bmFtZSA9PT0gXCJ5b3V0dWJlLmNvbVwiIHx8XG4gICAgICAgIHBhcnNlZFVSTC5ob3N0bmFtZSA9PT0gXCJ3d3cueW91dHViZS5jb21cIiB8fFxuICAgICAgICBwYXJzZWRVUkwuaG9zdG5hbWUgPT09IFwieW91dHUuYmVcIlxuICAgICAgKSB7XG4gICAgICAgIC8vIHNldCBpdCBhcyB5b3V0dWJlIGluIHRoZSBvcmlnaW5cbiAgICAgICAgb3JpZ2luID0gXCJ5b3V0dWJlXCI7XG5cbiAgICAgICAgLy8gY2hlY2sgZm9yIGNsYXNzaWMgeW91dHViZSB1cmxzXG4gICAgICAgIGNvbnN0IGlzQ2xhc3NpY1lUVXJsID0gKFxuICAgICAgICAgIHBhcnNlZFVSTC5ob3N0bmFtZSA9PT0gXCJ5b3V0dWJlLmNvbVwiIHx8XG4gICAgICAgICAgcGFyc2VkVVJMLmhvc3RuYW1lID09PSBcInd3dy55b3V0dWJlLmNvbVwiXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gYW5kIHRoZW4gd2UgY2FuIGNoZWNrIGZvciB0aGVzZSBhcyB3ZSB0cnlcbiAgICAgICAgLy8gdG8gZ2V0IHRoZSBzb3VyY2UgaWRcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlzQ2xhc3NpY1lUVXJsICYmXG4gICAgICAgICAgcGFyc2VkVVJMLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvZW1iZWQvXCIpXG4gICAgICAgICkge1xuICAgICAgICAgIHNyYyA9IHBhcnNlZFVSTC5wYXRobmFtZS5zcGxpdChcIi9cIilbMl07XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgaXNDbGFzc2ljWVRVcmwgJiZcbiAgICAgICAgICBwYXJzZWRVUkwucGF0aG5hbWUuc3RhcnRzV2l0aChcIi93YXRjaFwiKVxuICAgICAgICApIHtcbiAgICAgICAgICBsZXQgc2VhcmNoID0gcGFyc2VkVVJMLnNlYXJjaDtcbiAgICAgICAgICBpZiAoc2VhcmNoWzBdID09PSBcIj9cIikge1xuICAgICAgICAgICAgc2VhcmNoID0gc2VhcmNoLnN1YnN0cigxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VhcmNoLnNwbGl0KFwiJlwiKS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICAgICAgICBpZiAodi5zdGFydHNXaXRoKFwidj1cIikpIHtcbiAgICAgICAgICAgICAgc3JjID0gdi5zdWJzdHIoMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgcGFyc2VkVVJMLmhvc3RuYW1lID09PSBcInlvdXR1LmJlXCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgc3JjID0gcGFyc2VkVVJMLnBhdGhuYW1lLnNwbGl0KFwiL1wiKVsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdlIGhhdmUgc3VjY2VkZWRcbiAgICAgICAgc3RhdHVzID0gdHJ1ZTtcblxuICAgICAgICAvLyBub3cgZm9yIHZpbWVvXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBwYXJzZWRVUkwuaG9zdCA9PT0gXCJwbGF5ZXIudmltZW8uY29tXCJcbiAgICAgICkge1xuICAgICAgICAvLyBtdWNoIHNpbXBsZXJcbiAgICAgICAgb3JpZ2luID0gXCJ2aW1lb1wiO1xuICAgICAgICBzcmMgPSBwYXJzZWRVUkwucGF0aG5hbWUuc3BsaXQoXCIvXCIpWzJdO1xuICAgICAgICBzdGF0dXMgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXMgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3JjLFxuICAgICAgb3JpZ2luLFxuICAgICAgc3RhdHVzLFxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVWaWRlbyh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9nZXRWaWRlb1NyY09yaWdpbkFuZFN0YXR1cyh1cmwpO1xuXG4gICAgaWYgKFxuICAgICAgZGF0YS5zdGF0dXMgJiZcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50ICYmXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudC50eXBlID09PSBcInZpZGVvXCJcbiAgICApIHtcbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgICAgb3JpZ2luOiBkYXRhLm9yaWdpbixcbiAgICAgICAgc3JjOiBkYXRhLnNyYyxcbiAgICAgIH0gYXMgYW55LCB7XG4gICAgICAgIGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvclxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YS5zdGF0dXM7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBpbnNlcnQgYSB2aWRlbyBnaXZlbiB0aGUgaW5mb3JtYXRpb25cbiAgICogQHBhcmFtIHVybCB0aGUgdXJsIG9mIHRoZSB2aWRlb1xuICAgKiBAcGFyYW0gYXQgYSBwYXJ0aWFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKiBAcmV0dXJucyBhIGJvb2xlYW4gb24gd2hldGhlciBpdCBzdWNjZWVkZWRcbiAgICovXG4gIHB1YmxpYyBpbnNlcnRWaWRlbyh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9nZXRWaWRlb1NyY09yaWdpbkFuZFN0YXR1cyh1cmwpO1xuXG5cbiAgICAvLyBhbmQgaW5zZXJ0IHRoZSB2aWRlbyBpZiB3ZSBoYXZlIGJlZW5cbiAgICAvLyBjb25zaWRlcmVkIHN1Y2Nlc2Z1bFxuICAgIGNvbnN0IHZpZGVvTm9kZTogSVZpZGVvID0ge1xuICAgICAgdHlwZTogXCJ2aWRlb1wiLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlLFxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgb3JpZ2luOiBkYXRhLm9yaWdpbiBhcyBhbnksXG4gICAgICBzcmM6IGRhdGEuc3JjLFxuICAgIH1cblxuICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgIGlmICghdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCB2aWRlb05vZGUsIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHZpZGVvTm9kZSk7XG4gICAgfVxuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG5cbiAgICAvLyByZXR1cm4gdGhlIHN0YXR1c1xuICAgIHJldHVybiBkYXRhLnN0YXR1cztcbiAgfTtcbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGEgZmlsZSBiYXNlZCBvbiB0aGUgaW5mb3JtYXRpb24gZ2l2ZW4gaXQgdXNlc1xuICAgKiB0aGUgc3RhbmRhcmQgb24gaW5zZXJ0IGZpbGUgZnVuY3Rpb24gaW4gb3JkZXIgdG8gcGVyZm9tIGl0XG4gICAqXG4gICAqIEBwYXJhbSBmaWxlIHRoZSBmaWxlIHRvIGluc2VydFxuICAgKiBAcGFyYW0gYXQgYSBwYXJ0aWFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluc2VydEZpbGUoZmlsZTogRmlsZSkge1xuICAgIC8vIHNvIHdlIHRyeVxuICAgIHRyeSB7XG4gICAgICAvLyB3ZSBjYWxsIHRoZSBpbnNlcnQgZmlsZSBmdW5jdGlvbiwgYW5kIHBhc3MgZmFsc2UgYmVjYXVzZVxuICAgICAgLy8gd2UgYXJlIG5vdCBkZWFsaW5nIHdpdGggYW4gaW1hZ2VcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnByb3BzLm9uSW5zZXJ0RmlsZShmaWxlLCBmYWxzZSk7XG5cbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZyB0aGVyZSBzaG91bGQgYmUgYW4gZXJyb3IgaW4gdGhlIHN0YXRlXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gbm93IHdlIGNhbiBidWlsZCB0aGUgZmlsZSBub2RlXG4gICAgICBjb25zdCBmaWxlTm9kZTogSUZpbGUgPSB7XG4gICAgICAgIHR5cGU6IFwiZmlsZVwiLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgICAgICAgaXRhbGljOiBmYWxzZSxcbiAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlLFxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgZXh0ZW5zaW9uOiBtaW1lVHlwZVRvRXh0ZW5zaW9uKGZpbGUudHlwZSksXG4gICAgICAgIGZpbGVOYW1lOiBkYXRhLnJlc3VsdC5uYW1lLFxuICAgICAgICBzaXplOiBwcmV0dHlCeXRlcyhkYXRhLnJlc3VsdC5zaXplKSxcbiAgICAgICAgc3JjOiBkYXRhLnJlc3VsdC51cmwsXG4gICAgICAgIHNyY0lkOiBkYXRhLnJlc3VsdC5pZCxcbiAgICAgIH07XG5cbiAgICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgZmlsZU5vZGUsIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBmaWxlTm9kZSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgfVxuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGEgY29udGFpbmVyIGF0IHRoZSBnaXZlbiBsb2NhdGlvblxuICAgKiBAcGFyYW0gdHlwZSBvcHRpb25hbCwgdGhlIGNvbnRhaW5lciB0eXBlLCBvdGhlcndpc2Ugd2lsbCBpbnNlcnQgYSBzdGFuZGFyZCBjb250YWluZXJcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5zZXJ0Q29udGFpbmVyKHR5cGU/OiBzdHJpbmcpIHtcbiAgICAvLyBub3cgd2UgY2FuIG1ha2UgdGhlIGNvbnRhaW5lclxuICAgIGNvbnN0IGNvbnRhaW5lck5vZGU6IElDb250YWluZXIgPSB7XG4gICAgICB0eXBlOiBcImNvbnRhaW5lclwiLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYm9sZDogZmFsc2UsXG4gICAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gICAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGNvbnRhaW5lclR5cGU6IHR5cGUgfHwgbnVsbCxcbiAgICB9O1xuXG4gICAgLy8gYW5kIHdlIGNhbGwgdGhlIGluc2VydCBub2RlXG4gICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGNvbnRhaW5lck5vZGUsIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGNvbnRhaW5lck5vZGUpO1xuICAgIH1cblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgY3VzdG9tIGVsZW1lbnRcbiAgICogQHBhcmFtIHR5cGUgdGhlIHR5cGUgZm9yIHRoZSBjdXN0b20gZWxlbWVudFxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgYXQgcmFuZ2UgdG8gaW5zZXJ0IHRoZSBjdXN0b20gYXRcbiAgICovXG4gIHB1YmxpYyBhc3luYyBpbnNlcnRDdXN0b20odHlwZTogc3RyaW5nKSB7XG4gICAgLy8gbm93IHdlIGNhbiBtYWtlIHRoZSBjdXN0b21cbiAgICBjb25zdCBjdXN0b21Ob2RlOiBJQ3VzdG9tID0ge1xuICAgICAgdHlwZTogXCJjdXN0b21cIixcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcInBhcmFncmFwaFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSBhcyBhbnlcbiAgICAgIF0sXG4gICAgICBjdXN0b21UeXBlOiB0eXBlLFxuICAgIH07XG5cbiAgICAvLyBhbmQgd2UgY2FsbCB0aGUgaW5zZXJ0IG5vZGVcbiAgICBpZiAoIXRoaXMuZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgY3VzdG9tTm9kZSwgeyBhdDogdGhpcy5nZXRGYWxsYmFja0luc2VydFBhdGgoKSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgY3VzdG9tTm9kZSk7XG4gICAgfVxuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2VzIGEgcXVvdGUgb3V0IG9mIHRoZSBjdXJyZW50IGVsZW1lbnRcbiAgICogQHBhcmFtIGF0IHRvZ2dsZSBhdCB0aGUgZ2l2ZW4gcmFuZ2UsIHRoaXMgd2lsbCBjYXVzZSBhIGZvY3VzXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgdG9nZ2xlUXVvdGUoKSB7XG4gICAgLy8gbm93IHdlIGdvdCB0byBjaGVjayBpZiB3ZSBhcmUgY29sbGFwc2VkXG4gICAgY29uc3QgaXNDb2xsYXBzZWQgPSBSYW5nZS5pc0NvbGxhcHNlZCh0aGlzLmVkaXRvci5zZWxlY3Rpb24pO1xuXG4gICAgaWYgKGlzQ29sbGFwc2VkICYmIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50KSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQudHlwZSA9PT0gXCJxdW90ZVwiKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IFwicXVvdGVcIixcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2VzIGEgdGl0bGUgb3V0IG9mIHRoZSBjdXJyZW50IGVsZW1lbnRcbiAgICogQHBhcmFtIHR5cGUgdGhlIHRpdGxlIHR5cGVcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgdG9nZ2xlVGl0bGUodHlwZTogXCJoMVwiIHwgXCJoMlwiIHwgXCJoM1wiIHwgXCJoNFwiIHwgXCJoNVwiIHwgXCJoNlwiKSB7XG4gICAgLy8gbm93IHdlIGdvdCB0byBjaGVjayBpZiB3ZSBhcmUgY29sbGFwc2VkXG4gICAgY29uc3QgaXNDb2xsYXBzZWQgPSBSYW5nZS5pc0NvbGxhcHNlZCh0aGlzLmVkaXRvci5zZWxlY3Rpb24pO1xuXG4gICAgaWYgKGlzQ29sbGFwc2VkICYmIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50KSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQudHlwZSA9PT0gXCJ0aXRsZVwiKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IFwidGl0bGVcIixcbiAgICAgICAgICAgIHRpdGxlVHlwZTogdHlwZSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2VzIGEgbGlzdCBvdXQgb2YgdGhlIGN1cnJlbnQgZWxlbWVudFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgdHlwZSBvZiB0aGUgbGlzdCB0aGF0IGlzIHRvIGJlIHRvZ2dsZWQsIGVpdGhlciBidWxsZXRlZCBvciBudW1iZXJcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5zZXJ0TGlzdCh0eXBlOiBcImJ1bGxldGVkXCIgfCBcIm51bWJlcmVkXCIpIHtcbiAgICAvLyBub3cgd2UgY2FuIG1ha2UgdGhlIGx1c3RcbiAgICBjb25zdCBsaXN0Tm9kZTogSUxpc3QgPSB7XG4gICAgICB0eXBlOiBcImxpc3RcIixcbiAgICAgIGxpc3RUeXBlOiB0eXBlLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IFwibGlzdC1pdGVtXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIFNUQU5EQVJEX1BBUkFHUkFQSCgpLFxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfTtcblxuICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgIGlmICghdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBsaXN0Tm9kZSwgeyBhdDogdGhpcy5nZXRGYWxsYmFja0luc2VydFBhdGgoKSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgbGlzdE5vZGUpO1xuICAgIH1cbiAgfTtcblxuICBwdWJsaWMgdXBkYXRlTGluayh1cmw6IHN0cmluZywgdHZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBvdGhlcndpc2UgbGV0J3MgZmluZCB3aGF0IHVybCB3ZSBhcmUgdXNpbmdcbiAgICBsZXQgdmFsaWRTdGF0ZTogYm9vbGVhbiA9IHRydWU7XG4gICAgLy8gaWYgdGhlcmUgYXJlIG5vIHR2YWx1ZSdzIGdpdmVuXG4gICAgaWYgKHVybCkge1xuICAgICAgLy8gd2UgYXR0ZW1wdCB0byBwYXJzZSBpdFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gYW5kIHNvIHdlIGRvIGluIG9yZGVyIHRvIGNoZWNrIGxvY2FsaXR5XG4gICAgICAgIGNvbnN0IHVybFBhcnNlZCA9IG5ldyBVUkwodXJsKTtcbiAgICAgICAgY29uc3QgaXNMb2NhbCA9IHVybFBhcnNlZC5ob3N0bmFtZSA9PT0gbG9jYXRpb24uaG9zdG5hbWU7XG5cbiAgICAgICAgLy8gbm93IGFzIGZlYXR1cmUgc3VwcG9ydCBtYXliZSBvbmx5IGxvY2FsIHVybHMgYmUgYWxsb3dlZFxuICAgICAgICBjb25zdCBvbmx5TG9jYWwgPSAhdGhpcy5wcm9wcy5mZWF0dXJlcy5zdXBwb3J0c0V4dGVybmFsTGlua3M7XG4gICAgICAgIC8vIGlmIGl0J3Mgc3VjaCB0aGUgY2FzZSBhZG4gaXQncyBub3QgYSBsb2NhbCB1cmxcbiAgICAgICAgaWYgKG9ubHlMb2NhbCAmJiAhaXNMb2NhbCkge1xuICAgICAgICAgIC8vIHdlIGhhdmUgZmFpbGVkXG4gICAgICAgICAgdmFsaWRTdGF0ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgdmFsaWRTdGF0ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCAmJlxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50LnR5cGUgPT09IFwibGlua1wiXG4gICAgKSB7XG4gICAgICBjb25zdCBsaW5rOiBQYXJ0aWFsPElMaW5rPiA9IHtcbiAgICAgICAgaHJlZjogdXJsLFxuICAgICAgICB0aHJlZjogdHZhbHVlLFxuICAgICAgfVxuICAgICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwgbGluaywge1xuICAgICAgICBhdDogdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG5cbiAgICByZXR1cm4gdmFsaWRTdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlcyBhIGxpbmsgb3V0IG9mIHRoZSBjdXJyZW50IGVsZW1lbnRcbiAgICogQHBhcmFtIHVybCB0aGUgdXJsIHRoYXQgd2UgYXJlIHVzaW5nIChudWxsIGlmIHVzaW5nIHR2YWx1ZSlcbiAgICogQHBhcmFtIHR2YWx1ZSB0aGUgdGVtcGxhdGUgdmFsdWUgdG8gdXNlIChudWxsIGlmIHByb3ZpZGluZyB1cmwpXG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZSB0byBwYXNzXG4gICAqIEByZXR1cm5zIGEgYm9vbGVhbiBpZiB0aGUgbGluayB3YXMgdmFsaWQgYW5kIHRvZ2dsZUxpbmtcbiAgICovXG4gIHB1YmxpYyB0b2dnbGVMaW5rKHVybDogc3RyaW5nLCB0dmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIC8vIG90aGVyd2lzZSBsZXQncyBmaW5kIHdoYXQgdXJsIHdlIGFyZSB1c2luZ1xuICAgIGxldCB2YWxpZFN0YXRlOiBib29sZWFuID0gdHJ1ZTtcbiAgICAvLyBpZiB0aGVyZSBhcmUgbm8gdHZhbHVlJ3MgZ2l2ZW5cbiAgICBpZiAodXJsKSB7XG4gICAgICAvLyB3ZSBhdHRlbXB0IHRvIHBhcnNlIGl0XG4gICAgICB0cnkge1xuICAgICAgICAvLyBhbmQgc28gd2UgZG8gaW4gb3JkZXIgdG8gY2hlY2sgbG9jYWxpdHlcbiAgICAgICAgY29uc3QgdXJsUGFyc2VkID0gbmV3IFVSTCh1cmwpO1xuICAgICAgICBjb25zdCBpc0xvY2FsID0gdXJsUGFyc2VkLmhvc3RuYW1lID09PSBsb2NhdGlvbi5ob3N0bmFtZTtcblxuICAgICAgICAvLyBub3cgYXMgZmVhdHVyZSBzdXBwb3J0IG1heWJlIG9ubHkgbG9jYWwgdXJscyBiZSBhbGxvd2VkXG4gICAgICAgIGNvbnN0IG9ubHlMb2NhbCA9ICF0aGlzLnByb3BzLmZlYXR1cmVzLnN1cHBvcnRzRXh0ZXJuYWxMaW5rcztcbiAgICAgICAgLy8gaWYgaXQncyBzdWNoIHRoZSBjYXNlIGFkbiBpdCdzIG5vdCBhIGxvY2FsIHVybFxuICAgICAgICBpZiAob25seUxvY2FsICYmICFpc0xvY2FsKSB7XG4gICAgICAgICAgLy8gd2UgaGF2ZSBmYWlsZWRcbiAgICAgICAgICB2YWxpZFN0YXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICB2YWxpZFN0YXRlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbGluazogSUxpbmsgPSB7XG4gICAgICB0eXBlOiBcImxpbmtcIixcbiAgICAgIGhyZWY6IHVybCxcbiAgICAgIHRocmVmOiB0dmFsdWUsXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICBTVEFOREFSRF9URVhUX05PREUodGhpcy5wcm9wcy5iYXNlSTE4bi5saW5rKVxuICAgICAgXVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHRoaXMuZWRpdG9yLnNlbGVjdGlvbiAmJlxuICAgICAgUmFuZ2UuaXNDb2xsYXBzZWQodGhpcy5lZGl0b3Iuc2VsZWN0aW9uKVxuICAgICkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQgJiZcbiAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50LnR5cGUgPT09IFwibGlua1wiXG4gICAgICApIHtcbiAgICAgICAgVHJhbnNmb3Jtcy51bndyYXBOb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgICAgIGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3JcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBsaW5rKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgVHJhbnNmb3Jtcy53cmFwTm9kZXModGhpcy5lZGl0b3IsIGxpbmssIHtcbiAgICAgICAgbWF0Y2g6ICh2KSA9PiBUZXh0LmlzVGV4dCh2KSxcbiAgICAgICAgc3BsaXQ6IHRydWUsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgbGluaywge1xuICAgICAgICBhdDogdGhpcy5nZXRGYWxsYmFja0luc2VydFBhdGgoKSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuXG4gICAgLy8gd2UgaGF2ZSBzdWNjZWVkZWRcbiAgICByZXR1cm4gdmFsaWRTdGF0ZTtcbiAgfTtcblxuICAvKipcbiAgICogQWJpdHJhcnkgdXBkYXRlLCBkb2VzIGFuIGFyYml0cmFyeSB1cGRhdGUgZm9yIGFuIGVsZW1lbnQgb3Igbm9kZVxuICAgKiBhdCB0aGUgZ2l2ZW4gcGF0aFxuICAgKiBAcGFyYW0gYXJncyBhbiBvYmplY3QgdG8gdXBkYXRlIHRoYXQgc2hvdWxkIGJlIHBhcnRpYWwgb2YgdGhlIGVsZW1lbnQgcmljaCBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIG5vZGUgYW5jaG9yIHRvIHVwZGF0ZVxuICAgKi9cbiAgcHVibGljIHNldChhcmdzOiBhbnksIGFuY2hvcjogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIGFyZ3MsIHsgYXQ6IGFuY2hvciB9KTtcblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjdXJyZW50IHN0eWxlIGZvciB0aGUgZWxlbWVudFxuICAgKiBAcGFyYW0gc3R5bGUgdGhlIHN0eWxlIHRvIGJlIHNldCwgdGhpcyBzaG91bGQgYmUgYSBzdHlsZSBzdHJpbmdcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgZWxlbWVudCBhbmNob3IgdG8gdXBkYXRlXG4gICAqL1xuICBwdWJsaWMgc2V0U3R5bGUoc3R5bGU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgc3R5bGUsXG4gICAgfSwgeyBhdDogYW5jaG9yIH0pO1xuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHRlbXBsYXRlIGhvdmVyIHN0eWxlIGZvciB0aGUgZWxlbWVudFxuICAgKiBAcGFyYW0gc3R5bGUgdGhlIHN0eWxlIHRvIGJlIHNldCwgdGhpcyBzaG91bGQgYmUgYSBzdHlsZSBzdHJpbmdcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgZWxlbWVudCBhbmNob3IgdG8gdXBkYXRlXG4gICAqL1xuICBwdWJsaWMgc2V0SG92ZXJTdHlsZShzdHlsZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICBzdHlsZUhvdmVyOiBzdHlsZSxcbiAgICB9LCB7IGF0OiBhbmNob3IgfSk7XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgYWN0aXZlIHN0eWxlIGZvciB0aGUgZWxlbWVudFxuICAgKiBAcGFyYW0gc3R5bGUgdGhlIHN0eWxlIHRvIGJlIHNldCwgdGhpcyBzaG91bGQgYmUgYSBzdHlsZSBzdHJpbmdcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgZWxlbWVudCBhbmNob3IgdG8gdXBkYXRlXG4gICAqL1xuICBwdWJsaWMgc2V0QWN0aXZlU3R5bGUoc3R5bGU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgc3R5bGVBY3RpdmU6IHN0eWxlLFxuICAgIH0sIHsgYXQ6IGFuY2hvciB9KTtcblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSByaWNoIGNsYXNzZXMgb2YgdGhlIGVsZW1lbnRcbiAgICogQHBhcmFtIGNsYXNzZXMgYW4gYXJyYXkgb2Ygc3RyaW5nIHRoYXQgcmVwcmVzZW50IHRoZSByaWNoIGNsYXNzZXNcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgZWxlbWVudCBhbmNob3JcbiAgICovXG4gIHB1YmxpYyBzZXRSaWNoQ2xhc3NlcyhjbGFzc2VzOiBzdHJpbmdbXSwgYW5jaG9yOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgcmljaENsYXNzTGlzdDogY2xhc3NlcyxcbiAgICB9LCB7IGF0OiBhbmNob3IgfSk7XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyBhIGdpdmVuIGFjdGlvbiBmb3IgdXNhZ2Ugd2l0aGluIHRlbXBsYXRpbmdcbiAgICogYXMgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogXG4gICAqIE5vdGUgdGhhdCB1c2luZyB0aGlzIGZ1bmN0aW9uIGlzIHJpc2t5IGlmIHRoZSBzdHJ1Y3R1cmUgdG8gcHJvdmlkZSBhIGdpdmVuXG4gICAqIGtleSBpcyBub3QgdW5kZXJzdG9vZCBwcm9wZXJseSwga2V5cyBzaG91bGQgYmUgdmFsaWRcbiAgICogXG4gICAqIEBwYXJhbSBrZXkgdGhlIGtleSBmb3IgdGhlIGFjdGlvbiwgc2hvdWxkIGJlIHNvbWV0aGluZyBsaWtlLCBjbGljaywgbW91c2VlbnRlciwgZXRjLi4uXG4gICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgZm9yIHRoZSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBhbmNob3IgZm9yIHRoZSBlbGVtZW50IHRoYXQgaXMgdG8gYmUgYXNzaWduZWQgdGhlIGxpc3RlbmVyIHRvIHR1cm4gaW50ZXJhY3RpdmVcbiAgICovXG4gIHB1YmxpYyBzZXRBY3Rpb24oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIFtrZXldOiB2YWx1ZSxcbiAgICB9LCB7IGF0OiBhbmNob3IgfSk7XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFuIFVJIGhhbmRsZXIgdG8gYSBnaXZlbiBlbGVtZW50IHNvIHRoYXQgaXQgaXMgdWkgaGFuZGxlZFxuICAgKiBcbiAgICogVGhpcyBpcyBhbiBhdmFuY2VkIG9wdGlvbiBmb3IgdWkgaGFuZGxpbmdcbiAgICogXG4gICAqIG5vcm1hbGx5IHlvdSB3b3VsZCB1c2UgdGhpcyBmdW5jdGlvbiBmb3IgdXBkYXRpbmcgYW4gYWxyZWFkeSBpbnNlcnRlZFxuICAgKiB1aSBoYW5kbGVkIGNvbXBvbmVudFxuICAgKiBcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSBmb3IgdGhlIHVpIGhhbmRsZXIgdGhhdCBzaG91bGQgYmUgdGFrZW4gb3V0IG9mIHRoZSBjb250ZXh0XG4gICAqIEBwYXJhbSBhcmdzIHRoZSBhcmdzIGZvciB0aGUgdWkgaGFuZGxlclxuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBhbmNob3Igd2hlcmUgdG8gaW5zZXJ0IGF0XG4gICAqL1xuICBwdWJsaWMgc2V0VUlIYW5kbGVyKHZhbHVlOiBzdHJpbmcsIGFyZ3M6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0sIGFuY2hvcjogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIHVpSGFuZGxlcjogdmFsdWUsXG4gICAgICB1aUhhbmRsZXJBcmdzOiBhcmdzLFxuICAgIH0sIHsgYXQ6IGFuY2hvciB9KTtcblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdWkgaGFuZGxlciBhcmdzIHRvIGEgZ2l2ZW4gZWxlbWVudFxuICAgKiBAcGFyYW0ga2V5IHRoZSB1aSBoYW5kbGVyIGFyZyBrZXlcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB1aSBoYW5kbGVyIGFyZyB2YWx1ZVxuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBhbmNob3IgaW4gcXVlc3Rpb25cbiAgICovXG4gIHB1YmxpYyBzZXRVSUhhbmRsZXJBcmcoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkge1xuICAgIGNvbnN0IG5vZGVBdFBhdGggPSBOb2RlLmdldCh0aGlzLmVkaXRvciwgYW5jaG9yKTtcbiAgICBsZXQgbmV3VmFsdWU6IGFueSA9IHtcbiAgICAgIC4uLihub2RlQXRQYXRoIGFzIGFueSBhcyBSaWNoRWxlbWVudCkudWlIYW5kbGVyQXJncyxcbiAgICAgIFtrZXldOiB2YWx1ZSxcbiAgICB9O1xuXG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRlbGV0ZSBuZXdWYWx1ZVtrZXldO1xuICAgIH1cbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICB1aUhhbmRsZXJBcmdzOiBuZXdWYWx1ZSxcbiAgICB9LCB7IGF0OiBhbmNob3IgfSk7XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGFuIGVsZW1lbnQgYXQgYSBnaXZlbiBwb3NpdGlvblxuICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgZWxlbWVudCBcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHBvc2l0aW9uIHRvIGRvIGl0IGF0XG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0RWxlbWVudChlbGVtZW50OiBSaWNoRWxlbWVudCkge1xuICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgIGlmICghdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBlbGVtZW50LCB7IGF0OiB0aGlzLmdldEZhbGxiYWNrSW5zZXJ0UGF0aCgpIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY29udGV4dCBrZXlcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSBmb3IgdGhlIG5ldyBjb250ZXh0IGtleVxuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBhbmNob3Igd2hlcmUgdG8gc2V0IHRoZSBjb250ZXh0IGtleSBhdFxuICAgKi9cbiAgcHVibGljIHNldENvbnRleHQodmFsdWU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgY29udGV4dDogdmFsdWUsXG4gICAgfSwgeyBhdDogYW5jaG9yIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb250ZXh0IGtleVxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIGZvciB0aGUgbmV3IGlmIGNvbmRpdGlvbiBrZXlcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgYW5jaG9yIHdoZXJlIHRvIHNldCB0aGUgY29udGV4dCBrZXkgYXRcbiAgICovXG4gIHB1YmxpYyBzZXRJZkNvbmRpdGlvbih2YWx1ZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICBpZkNvbmRpdGlvbjogdmFsdWUsXG4gICAgfSwgeyBhdDogYW5jaG9yIH0pO1xuICB9O1xuXG5cbiAgLyoqXG4gICogU2V0cyB0aGUgZm9yLWVhY2ggbG9vcCBrZXlcbiAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIGZvciB0aGUgbmV3IGNvbnRleHQga2V5XG4gICogQHBhcmFtIGFuY2hvciB0aGUgYW5jaG9yIHdoZXJlIHRvIHNldCB0aGUgY29udGV4dCBrZXkgYXRcbiAgKi9cbiAgcHVibGljIHNldEZvckVhY2godmFsdWU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgZm9yRWFjaDogdmFsdWUsXG4gICAgfSwgeyBhdDogYW5jaG9yIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGb3JtYXRzIHRoZSBjdXJyZW50IHRleHQgYXMgYm9sZFxuICAgKi9cbiAgcHVibGljIGZvcm1hdFRvZ2dsZShrZXk6IFwiYm9sZFwiIHwgXCJpdGFsaWNcIiB8IFwidW5kZXJsaW5lXCIpIHtcbiAgICAvLyBpZiB3ZSBoYXZlIGEgc2VsZWN0aW9uIGFuZCB0aGUgcG9pbnRzIGFyZSBlcXVhbFxuICAgIC8vIGJhc2ljYWxseSB0aGUgc2FtZSBhcyBhIGNvbGxhcHNlZCBzZWxlY3Rpb25cbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRUZXh0ICYmXG4gICAgICB0aGlzLmVkaXRvci5zZWxlY3Rpb24gJiZcbiAgICAgIFBvaW50LmVxdWFscyh0aGlzLmVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLCB0aGlzLmVkaXRvci5zZWxlY3Rpb24uZm9jdXMpXG4gICAgKSB7XG4gICAgICAvLyB0aGVuIHdlIGluc2VydCBhbiBlbXB0eSB0ZXh0IG5vZGUsIGl0IHdpbGwgcmVtYWluIGFsaXZlXG4gICAgICAvLyBieSB2aXJ0dWUgb2YgaXQgYmVpbmcgdGhlIHNhbWUgbG9jYXRpb24gYXMgb3VyIGN1cnNvciBzb1xuICAgICAgLy8gbm9ybWFsaXphdGlvbiB3b24ndCByZW1vdmUgaXRcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoXG4gICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICB7XG4gICAgICAgICAgLi4udGhpcy5zdGF0ZS5jdXJyZW50VGV4dCxcbiAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgIFtrZXldOiAhdGhpcy5zdGF0ZS5jdXJyZW50VGV4dFtrZXldLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gb3RoZXJ3aXNlIHdlIGp1c3QgdG9nZ2xlXG4gICAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50VGV4dCkge1xuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIHsgW2tleV06ICF0aGlzLnN0YXRlLmN1cnJlbnRUZXh0W2tleV0gfSxcbiAgICAgICAgICB7IG1hdGNoOiBuID0+IFRleHQuaXNUZXh0KG4pLCBzcGxpdDogdHJ1ZSB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dCkge1xuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIHsgW2tleV06ICF0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHRba2V5XSB9LFxuICAgICAgICAgIHsgbWF0Y2g6IG4gPT4gVGV4dC5pc1RleHQobiksIGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvciwgbW9kZTogXCJhbGxcIiB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgYSBoZWxwZXIgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIGluIG9yZGVyIHRvIGV4dHJhY3QgdGhlIGF2YWlsYWJsZVxuICAgKiBjbGFzc2VzIHRoYXQgd2UgaGF2ZSBmb3IgdXNhZ2Ugd2l0aGluIHJpY2ggY2xhc3NlcywgY29udGFpbmVyLCBhbmQgY3VzdG9tc1xuICAgKiBjb25zaWRlcmluZyB3aGF0IHdlIGhhdmUgZm91bmQgaW4gdGhlIGFsbCBwcm9taXNlIGZvciBhbGwgd2hhdCBpcyBhdmFpbGFibGVcbiAgICogYmVjYXVzZSB0aGVyZSBtaWdodCBiZSBmaWx0ZXJzIGZvciB0aGVtLCBhbmQgd2UgbmVlZCB0byBmaW5kIHRoZSBsYWJlbHMgYW5kIHdoYXRub3RcbiAgICogb2Ygd2hhdCB3ZSBjYW4gYWN0dWFsbHkgdXNlXG4gICAqIFxuICAgKiBAcGFyYW0gZmVhdHVyZSB0aGUgZmVhdHVyZSB3ZSBhcmUgc2VhcmNoaW5nIGZvciBiYXNpY2FsbHksIHN1cHBvcnRzQ3VzdG9tLCBzdXBwb3J0c1JpY2hDbGFzc2VzIGFuZCBzdXBwb3J0c0NvbnRhaW5lcnNcbiAgICogdGhhdCB3ZSBkZWNpZGUgb24gd2hldGhlciB3ZSBzdXBwb3J0IHRoYXQgZmVhdHVyZVxuICAgKiBAcGFyYW0gZmVhdHVyZUFsbCB0aGUgYWxsIG5hbWUgZm9yIHRoZSBmZWF0dXJlIGluIHRoZSBzdGF0ZSBhbmQgd2hlcmUgaXQgaXMgbG9jYXRlZCBpbiB0aGUgc3RhdGUgdGhhdCB3ZSBhcmUgbWVhbnQgdG8gYXdhaXRcbiAgICogYmFzaWNhbGx5IGFsbEN1c3RvbXMsIGFsbFJpY2hDbGFzc2VzIGFuZCBhbGxDb250YWluZXJzXG4gICAqIEBwYXJhbSBmZWF0dXJlTGlzdCB0aGUgbGlzdCBvZiBzdXBwb3J0ZWQgdGhhdCBpcyBnaXZlbiBpbiB0aGUgZmVhdHVyZSBzdXBwb3J0IG9mIHRoZSBwcm9wZXJ0eSBzbyBiYXNpY2FsbHlcbiAgICogc3VwcG9ydGVkQ3VzdG9tcywgc3VwcG9ydGVkUmljaENsYXNzZXMgYW5kIHN1cHBvcnRlZENvbnRhaW5lcnNcbiAgICogQHBhcmFtIGkxOG5Mb2NhdGlvbiB0aGUgbG9jYXRpb24gZm9yIHRoZSBpMThuIGRhdGEgaW4gdGhlIGkxOG4gcm9vdCwgYmFzaWNhbGx5IGN1c3RvbSwgY29udGFpbmVycyBhbmQgcmljaFxuICAgKi9cbiAgcHJpdmF0ZSBhdmFpbGFibGVGaWx0ZXJpbmdGdW5jdGlvbihcbiAgICBmZWF0dXJlOiBzdHJpbmcsXG4gICAgZmVhdHVyZUFsbDogc3RyaW5nLFxuICAgIGZlYXR1cmVMaXN0OiBzdHJpbmcsXG4gICAgaTE4bkxvY2F0aW9uOiBzdHJpbmcsXG4gICk6IElBdmFpbGFibGVFbGVtZW50Q1NTQ2xhc3NOYW1lW10ge1xuXG4gICAgLy8gc28gd2UgZG8gaXQgaW4gb25lIGxpbmUgYmVjYXVzZSBhcHBhcmVudGx5IHdlIGRvbid0IGNhcmUgYWJvdXQgcmVhZGFiaWxpdHlcbiAgICAvLyBhbmQgd2lsbCBmaXggaXQgd2l0aCBjb21tZW50c1xuICAgIHJldHVybiAoXG4gICAgICAvLyB3ZSBwaWNrIHRoZSBmZWF0dXJlIG9mIHRoZSBlZy4gc3VwcG9ydHNDdXN0b20sIHN1cHBvcnRzUmljaENsYXNzZXMgb3V0IG9mIHRoZSBmZWF0dXJlIHN1cHBvcnQgdG8gc2VlXG4gICAgICAvLyBpZiB3ZSBzdXBwb3J0IHRoYXQgZmVhdHVyZSBhdCBhbGxcbiAgICAgIHRoaXMucHJvcHMuZmVhdHVyZXNbZmVhdHVyZV0gP1xuICAgICAgICAvLyBpZiB3ZSBkbyB3ZSBwaWNrIGZyb20gdGhlIHN0YXRlIHdoYXQgd2UgaGF2ZSBmb3VuZCBpbiB0aGUgc3R5bGVzaGVldFxuICAgICAgICAvLyBvZiB0aGUgY2xhc3NlcyBmb3IgdGhhdCBmZWF0dXJlIGFzIHdlIGhhdmUgYXdhaXRlZFxuICAgICAgICAodGhpcy5zdGF0ZVtmZWF0dXJlQWxsXSBhcyBzdHJpbmdbXSkuZmlsdGVyKChjKSA9PlxuICAgICAgICAgIC8vIGFuZCB3ZSBmaWx0ZXIgYmFzZWQgb24gb3VyIGZlYXR1cmUgbGlzdCwgaWYgd2UgaGF2ZSBvbmUgb2YgY291cnNlLCBvdGhlcndpc2UgYWxsIHBhc3NcbiAgICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVzW2ZlYXR1cmVMaXN0XSA/IHRoaXMucHJvcHMuZmVhdHVyZXNbZmVhdHVyZUxpc3RdLmluY2x1ZGVzKGMpIDogdHJ1ZVxuICAgICAgICApIDpcbiAgICAgICAgW11cbiAgICApLm1hcCgoYykgPT4ge1xuICAgICAgLy8gYW5kIG5vdyB3ZSBtYXAgaW4gb3JkZXIgdG8gZ2l2ZSBpdCBhIGxhYmVsIGJhc2VkIG9uIHRoZSByb290IGkxOG4gZGF0YVxuICAgICAgLy8gYXMgd2UgaGF2ZSBkZXNjcmliZWQgYmVmb3JlLCBhbmQgdGhleSBhcmUgZm91bmQgaW4gdGhlIGkxOG4gbG9jYXRpb24gdGhhdFxuICAgICAgLy8gdGhleSBoYXZlIGJlZW4gZGVmaW5lZCBieSBkZWZhdWx0IGJ5IHRoaXMgdGV4dCBlZGl0b3IgZWxlbWVudFxuICAgICAgLy8gYW5kIHdlIHNlYXJjaCBpbnRvIHRoZSBpMThuIHJvb3RcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBjLFxuICAgICAgICBsYWJlbDogKFxuICAgICAgICAgIHRoaXMucHJvcHMuYmFzZUkxOG4gJiZcbiAgICAgICAgICB0aGlzLnByb3BzLmJhc2VJMThuW2kxOG5Mb2NhdGlvbl0gJiZcbiAgICAgICAgICAoXG4gICAgICAgICAgICAvLyBib3RoIHRoZSBkZWZhdWx0IGFuZCBieSByZXBsYWNpbmdcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYmFzZUkxOG5baTE4bkxvY2F0aW9uXVtjXSB8fFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5iYXNlSTE4bltpMThuTG9jYXRpb25dW2MucmVwbGFjZSgvLS9nLCBcIl9cIildXG4gICAgICAgICAgKVxuICAgICAgICApIHx8IGNcbiAgICAgICAgLy8gYW5kIGlmIHdlIGZpbmQgbm90aGluZyB3ZSB1c2UgdGhlIHZhbHVlIGl0c2VsZlxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBvbiB0aGUga2V5ZG93biBvZiB0aGUgc2xhdGUgZWRpdG9yIGl0c2VsZlxuICAgKiBAcGFyYW0gZSB0aGUgZXZlbnRcbiAgICovXG4gIHB1YmxpYyBvbktleURvd24oZTogUmVhY3QuS2V5Ym9hcmRFdmVudCkge1xuICAgIC8vIG9uIGFsdCtlbnRlciB3ZSB3YW50IHRvIGluc2VydCBhIHN1cGVyIGJsb2NrIGJyZWFrXG4gICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIgJiYgZS5hbHRLZXkpIHtcbiAgICAgIHRoaXMuaW5zZXJ0U3VwZXJicmVhayhudWxsLCBlLnNoaWZ0S2V5KTtcbiAgICB9IGVsc2UgaWYgKGUua2V5ID09PSBcInpcIiAmJiBlLmN0cmxLZXkgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgIHRoaXMuZWRpdG9yLnVuZG8oKTtcbiAgICB9IGVsc2UgaWYgKChlLmtleSA9PT0gXCJ5XCIgJiYgZS5jdHJsS2V5KSB8fCAoZS5rZXkgPT09IFwielwiICYmIGUuY3RybEtleSAmJiBlLnNoaWZ0S2V5KSkge1xuICAgICAgdGhpcy5lZGl0b3IucmVkbygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCYXNpYyBvbGQgc2Nob29sIGNvbXBvbmVudCBkaWQgbW91bnRcbiAgICovXG4gIHB1YmxpYyBhc3luYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAvLyBub3cgd2UgY2FuIGF3YWl0IGZvciBvdXIgYWxsIHByb21pc2UgaGVyZVxuICAgIGF3YWl0IEFMTF9QUk9NSVNFO1xuICAgIC8vIGFuZCBmaXQgdGhlIGluZm9ybWF0aW9uIHRoZXJlIGFzIHdlIGhhdmUgZ290dGVuXG4gICAgLy8gb3VyIGFycmF5cyBmaWxsZWQgZnJvbSB0aGUgc3R5bGVzaGVldFxuICAgIGlmICghdGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFsbENvbnRhaW5lcnM6IEFMTF9DT05UQUlORVJTLFxuICAgICAgICBhbGxUYWJsZXM6IEFMTF9UQUJMRVMsXG4gICAgICAgIGFsbEN1c3RvbTogQUxMX0NVU1RPTSxcbiAgICAgICAgYWxsUmljaENsYXNzZXM6IEFMTF9SSUNIX0NMQVNTRVMsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5hdXRvRm9jdXMpIHtcbiAgICAgIFJlYWN0RWRpdG9yLmZvY3VzKHRoaXMuZWRpdG9yKTtcbiAgICAgIC8vIGJ1ZyBzb21ldGltZXMgaXQgd2lsbCBub3QgZm9jdXNcbiAgICAgIC8vIEZvY3VzIGdvZCBkYW1uIGl0XG4gICAgICB0aGlzLmZvcmNlRm9jdXMoKTtcbiAgICB9XG5cbiAgICBjb25zdCBlZGl0YWJsZUhUTUxFbGVtZW50ID0gdGhpcy5lZGl0YWJsZVJlZi5jdXJyZW50LmNoaWxkTm9kZXNbMF0gYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgRURJVE9SX1BPT0wuc2V0KGVkaXRhYmxlSFRNTEVsZW1lbnQsIHRoaXMpO1xuICB9XG5cbiAgcHVibGljIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IFJlYWRvbmx5PElTbGF0ZUVkaXRvclByb3BzPiwgcHJldlN0YXRlOiBSZWFkb25seTxJU2xhdGVFZGl0b3JTdGF0ZT4sIHNuYXBzaG90PzogYW55KTogdm9pZCB7XG4gICAgLy8gaWYgb3VyIHByZXYgc2VsZWN0ZWQgdGV4dCBpcyBlbXB0eVxuICAgIGlmIChwcmV2U3RhdGUuY3VycmVudFRleHQgJiYgcHJldlN0YXRlLmN1cnJlbnRUZXh0LnRleHQgPT09IFwiXCIpIHtcbiAgICAgIC8vIGxldCdzIGZpbmQgd2hlcmUgaXQgaXMgbm93XG4gICAgICBjb25zdCBhbmNob3JJbkN1cnJlbnQgPSBSZWFjdEVkaXRvci5maW5kUGF0aCh0aGlzLmVkaXRvciwgcHJldlN0YXRlLmN1cnJlbnRUZXh0KTtcbiAgICAgIGlmIChhbmNob3JJbkN1cnJlbnQpIHtcbiAgICAgICAgLy8gbGV0J3MgZmluZCB3aGF0IGl0IGlzIG5vd1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGVsZW1lbnRJbkN1cnJlbnQgPSBOb2RlLmdldCh0aGlzLmVkaXRvciwgYW5jaG9ySW5DdXJyZW50KSBhcyBJVGV4dDtcbiAgICAgICAgICAvLyBpZiBpdCdzIHN0aWxsIGVtcHR5IGFuZCB3ZSBhcmUgbm90IG92ZXIgaXQsIHRoZW4gd2UgbWF5IHdhbnQgdG8gZGVsZXRlIGl0XG4gICAgICAgICAgaWYgKGVsZW1lbnRJbkN1cnJlbnQudGV4dCA9PT0gXCJcIiAmJiBlbGVtZW50SW5DdXJyZW50ICE9PSB0aGlzLnN0YXRlLmN1cnJlbnRUZXh0KSB7XG4gICAgICAgICAgICAvLyBub3cgd2UgbmVlZCB0byBrbm93IGlmIGl0J3MgYW4gaW5saW5lIHNwYWNlciwgdm9pZCwgZXRjLi4uXG4gICAgICAgICAgICAvLyBzbyB3ZSBqdXN0IGNhbGwgbm9ybWFsaXphdGlvblxuICAgICAgICAgICAgdGhpcy5ub3JtYWxpemVOb2RlKFt0aGlzLmVkaXRvciwgW11dKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIG5vZGUgaXMgbWlzc2luZyBhbmQgc2xhdGUgc29tZWhvdyByZXBvcnRzIGl0IGF0IHN0aWxsIGJlaW5nIHRoZXJlXG4gICAgICAgICAgLy8gY2F1c2VzIGFuIGVycm9yLCBub3RoaWduIHRvIGRvLCB0aGUgbm9kZSBoYXMgYmVlbiBkZWxldGVkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogU29tZXRpbWVzIHNsYXRlIGxlYXZlcyBhIHNlbGVjdGlvbiBiZWhpbmQgd2UgbmVlZCB0byB1bnNlbGVjdCBpZiBzdWNoXG4gICAqIGlzIHRoZSBjYXNlXG4gICAqL1xuICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgLy8gd2UgbmVlZCB0byBzZXQgdGhpcyB0byBwcmV2ZW50IHRoZSBzZXQgdmFsdWVcbiAgICAvLyBmcm9tIGJlaW5nIGNhbGxlZCBvbiBhbiB1bm1vdW50ZWQgY29tcG9uZW50XG4gICAgdGhpcy5pc1VubW91bnRlZCA9IHRydWU7XG4gICAgUmVhY3RFZGl0b3IuZGVzZWxlY3QodGhpcy5lZGl0b3IpO1xuXG4gICAgY29uc3QgZWRpdGFibGVIVE1MRWxlbWVudCA9IHRoaXMuZWRpdGFibGVSZWYuY3VycmVudC5jaGlsZE5vZGVzWzBdIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgIEVESVRPUl9QT09MLmRlbGV0ZShlZGl0YWJsZUhUTUxFbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyB0aGUgaGVscGVycyB0aGF0IGFyZSB1c2VkIGJ5IHRoZSBlZGl0b3JcbiAgICogdG8gY29uc3RydWN0IHJpY2ggdGV4dCBkYXRhXG4gICAqL1xuICBwdWJsaWMgZ2V0SGVscGVycygpIHtcbiAgICBjb25zdCBoZWxwZXJzOiBJSGVscGVyRnVuY3Rpb25zID0ge1xuICAgICAgZWRpdG9yOiB0aGlzLmVkaXRvcixcbiAgICAgIFRyYW5zZm9ybXMsXG4gICAgICBSYW5nZSxcbiAgICAgIFJlYWN0RWRpdG9yLFxuICAgICAgSGlzdG9yeUVkaXRvcixcbiAgICAgIE5vZGUsXG4gICAgICBQYXRoLFxuXG4gICAgICBnZXRDb250ZXh0Rm9yOiB0aGlzLmdldENvbnRleHRGb3IsXG4gICAgICBnZXRSb290Q29udGV4dDogdGhpcy5nZXRSb290Q29udGV4dCxcbiAgICAgIGdldFN0YXRlOiB0aGlzLmdldFN0YXRlLFxuXG4gICAgICBzZWxlY3RQYXRoOiB0aGlzLnNlbGVjdFBhdGgsXG4gICAgICBkZWxldGVQYXRoOiB0aGlzLmRlbGV0ZVBhdGgsXG4gICAgICBtb3ZlUGF0aHM6IHRoaXMubW92ZVBhdGhzLFxuXG4gICAgICBkZWxldGVTZWxlY3RlZE5vZGU6IHRoaXMuZGVsZXRlU2VsZWN0ZWROb2RlLFxuXG4gICAgICBnZXRQcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcjogdGhpcy5nZXRQcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcixcbiAgICAgIGdldFByZXZpb3VzVGV4dEFuY2hvcjogdGhpcy5nZXRQcmV2aW91c1RleHRBbmNob3IsXG5cbiAgICAgIGZvY3VzOiB0aGlzLmZvY3VzLFxuICAgICAgZm9jdXNBdDogdGhpcy5mb2N1c0F0LFxuXG4gICAgICBpbnNlcnRTdXBlcmJyZWFrOiB0aGlzLmluc2VydFN1cGVyYnJlYWssXG5cbiAgICAgIGZvcm1hdFRvZ2dsZTogdGhpcy5mb3JtYXRUb2dnbGUsXG4gICAgICBpbnNlcnRDb250YWluZXI6IHRoaXMuaW5zZXJ0Q29udGFpbmVyLFxuICAgICAgaW5zZXJ0Q3VzdG9tOiB0aGlzLmluc2VydEN1c3RvbSxcbiAgICAgIGluc2VydEZpbGU6IHRoaXMuaW5zZXJ0RmlsZSxcbiAgICAgIGluc2VydEltYWdlOiB0aGlzLmluc2VydEltYWdlLFxuICAgICAgaW5zZXJ0VmlkZW86IHRoaXMuaW5zZXJ0VmlkZW8sXG4gICAgICB1cGRhdGVWaWRlbzogdGhpcy51cGRhdGVWaWRlbyxcbiAgICAgIGluc2VydFRlbXBsYXRlVGV4dDogdGhpcy5pbnNlcnRUZW1wbGF0ZVRleHQsXG4gICAgICB1cGRhdGVUZW1wbGF0ZVRleHQ6IHRoaXMudXBkYXRlVGVtcGxhdGVUZXh0LFxuICAgICAgaW5zZXJ0VGVtcGxhdGVIVE1MOiB0aGlzLmluc2VydFRlbXBsYXRlSFRNTCxcbiAgICAgIHVwZGF0ZVRlbXBsYXRlSFRNTDogdGhpcy51cGRhdGVUZW1wbGF0ZUhUTUwsXG4gICAgICBpbnNlcnRUYWJsZTogdGhpcy5pbnNlcnRUYWJsZSxcbiAgICAgIGluc2VydFRhYmxlQ29sdW1uOiB0aGlzLmluc2VydFRhYmxlQ29sdW1uLFxuICAgICAgaW5zZXJ0VGFibGVSb3c6IHRoaXMuaW5zZXJ0VGFibGVSb3csXG4gICAgICB0b2dnbGVUYWJsZTogdGhpcy50b2dnbGVUYWJsZSxcbiAgICAgIGNhblRvZ2dsZVRhYmxlOiB0aGlzLmNhblRvZ2dsZVRhYmxlLFxuICAgICAgdG9nZ2xlTGluazogdGhpcy50b2dnbGVMaW5rLFxuICAgICAgdXBkYXRlTGluazogdGhpcy51cGRhdGVMaW5rLFxuICAgICAgaW5zZXJ0TGlzdDogdGhpcy5pbnNlcnRMaXN0LFxuICAgICAgdG9nZ2xlUXVvdGU6IHRoaXMudG9nZ2xlUXVvdGUsXG4gICAgICB0b2dnbGVUaXRsZTogdGhpcy50b2dnbGVUaXRsZSxcbiAgICAgIHNldEFjdGl2ZVN0eWxlOiB0aGlzLnNldEFjdGl2ZVN0eWxlLFxuICAgICAgc2V0Q29udGV4dDogdGhpcy5zZXRDb250ZXh0LFxuICAgICAgc2V0SWZDb25kaXRpb246IHRoaXMuc2V0SWZDb25kaXRpb24sXG4gICAgICBzZXRGb3JFYWNoOiB0aGlzLnNldEZvckVhY2gsXG4gICAgICBzZXRIb3ZlclN0eWxlOiB0aGlzLnNldEhvdmVyU3R5bGUsXG4gICAgICBzZXRTdHlsZTogdGhpcy5zZXRTdHlsZSxcbiAgICAgIHNldDogdGhpcy5zZXQsXG4gICAgICBzZXRSaWNoQ2xhc3NlczogdGhpcy5zZXRSaWNoQ2xhc3NlcyxcbiAgICAgIHNldEFjdGlvbjogdGhpcy5zZXRBY3Rpb24sXG4gICAgICBzZXRVSUhhbmRsZXI6IHRoaXMuc2V0VUlIYW5kbGVyLFxuICAgICAgc2V0VUlIYW5kbGVyQXJnOiB0aGlzLnNldFVJSGFuZGxlckFyZyxcbiAgICAgIGluc2VydEVsZW1lbnQ6IHRoaXMuaW5zZXJ0RWxlbWVudCxcbiAgICAgIGRlbGV0ZVRhYmxlQ29sdW1uOiB0aGlzLmRlbGV0ZVRhYmxlQ29sdW1uLFxuICAgICAgZGVsZXRlVGFibGVSb3c6IHRoaXMuZGVsZXRlVGFibGVSb3csXG5cbiAgICAgIGhhcmRCbHVyOiB0aGlzLmhhcmRCbHVyLFxuICAgICAgc29mdEJsdXI6IHRoaXMuc29mdEJsdXIsXG4gICAgfVxuXG4gICAgcmV0dXJuIGhlbHBlcnM7XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZXMgdGhlIGZlYXR1cmUgc3VwcG9ydCBpbmZvcm1hdGlvbiB0aGF0IGlzIHVzZWQgYnkgdGhlIGVkaXRvclxuICAgKiB0byBrbm93IHdoYXQgaXQgY2FuIGFuZCBjYW4ndCBkb1xuICAgKi9cbiAgcHVibGljIGdldEZlYXR1cmVTdXBwb3J0KCkge1xuICAgIC8vIEhhcHBlbnMgZm9yIHBsYWludGV4dCB3aGljaCBoYXMgbm8gZmVhdHVyZXNcbiAgICAvLyBzaW5jZSBpdCBkb2Vzbid0IHN1cHBvcnQgYW55XG4gICAgaWYgKHRoaXMucHJvcHMuZmVhdHVyZXMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIHdlIGdldCB0aGVzZSBmcm9tIHRoZSBhdmFpbGFibGUgZmlsdGVyaW5nIGZ1bmN0aW9uc1xuICAgIGNvbnN0IGF2YWlsYWJsZUN1c3RvbXMgPSB0aGlzLmF2YWlsYWJsZUZpbHRlcmluZ0Z1bmN0aW9uKFwic3VwcG9ydHNDdXN0b21cIiwgXCJhbGxDdXN0b21cIiwgXCJzdXBwb3J0ZWRDdXN0b21zXCIsIFwicmljaEN1c3RvbXNcIik7XG4gICAgY29uc3QgYXZhaWxhYmxlUmljaENsYXNzZXMgPSB0aGlzLmF2YWlsYWJsZUZpbHRlcmluZ0Z1bmN0aW9uKFwic3VwcG9ydHNSaWNoQ2xhc3Nlc1wiLCBcImFsbFJpY2hDbGFzc2VzXCIsIFwic3VwcG9ydGVkUmljaENsYXNzZXNcIiwgXCJyaWNoQ2xhc3Nlc1wiKTtcbiAgICBjb25zdCBhdmFpbGFibGVDb250YWluZXJzID0gdGhpcy5hdmFpbGFibGVGaWx0ZXJpbmdGdW5jdGlvbihcInN1cHBvcnRzQ29udGFpbmVyc1wiLCBcImFsbENvbnRhaW5lcnNcIiwgXCJzdXBwb3J0ZWRDb250YWluZXJzXCIsIFwicmljaENvbnRhaW5lcnNcIik7XG4gICAgY29uc3QgYXZhaWxhYmxlVGFibGVzID0gdGhpcy5hdmFpbGFibGVGaWx0ZXJpbmdGdW5jdGlvbihcInN1cHBvcnRzVGFibGVzXCIsIFwiYWxsVGFibGVzXCIsIFwic3VwcG9ydGVkVGFibGVzXCIsIFwicmljaFRhYmxlc1wiKTtcblxuICAgIC8vIGFuZCBleHRlbmQgYmFzZWQgb24gdGhlIGZlYXR1cmVzXG4gICAgY29uc3QgbmV3RmVhdHVyZVN1cHBvcnQ6IElBY2Nlc3NpYmxlRmVhdHVyZVN1cHBvcnRPcHRpb25zID0ge1xuICAgICAgLi4udGhpcy5wcm9wcy5mZWF0dXJlcyxcblxuICAgICAgYXZhaWxhYmxlQ29udGFpbmVycyxcbiAgICAgIGF2YWlsYWJsZUN1c3RvbXMsXG4gICAgICBhdmFpbGFibGVSaWNoQ2xhc3NlcyxcbiAgICAgIGF2YWlsYWJsZVRhYmxlcyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ld0ZlYXR1cmVTdXBwb3J0O1xuICB9XG5cbiAgcHVibGljIGZvcmNlRm9jdXMoKSB7XG4gICAgLy8gd2l0aCB0aGlzIGNvbmRpdGlvbiB3ZSBhdm9pZCBpdCBhcHBseWluZyB3aXRoIGNoaWxkcmVuXG4gICAgLy8gdGhhdCBhcmUgbmVzdGVkLCBzdWNoIGFzIGludGVybmFsIHRleHRhcmVhc1xuICAgIC8vIGlmIChcbiAgICAvLyAgIC8vIXByZXZlbnROZXh0Rm9jdXMgJiZcbiAgICAvLyAgIGUudGFyZ2V0ICYmXG4gICAgLy8gICAoZS50YXJnZXQgYXMgSFRNTERpdkVsZW1lbnQpLmRhdGFzZXQgJiZcbiAgICAvLyAgIChlLnRhcmdldCBhcyBIVE1MRGl2RWxlbWVudCkuZGF0YXNldC5zbGF0ZUVkaXRvciA9PT0gXCJ0cnVlXCJcbiAgICAvLyApIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuZm9jdXNlZCkge1xuICAgICAgY29uc3QgcGF0aDogUGF0aCA9IFtdO1xuICAgICAgbGV0IGN1cnJlbnQ6IGFueSA9IHRoaXMuZWRpdG9yLmNoaWxkcmVuICYmIHRoaXMuZWRpdG9yLmNoaWxkcmVuWzBdO1xuICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICAgICAgcGF0aC5wdXNoKDApO1xuICAgICAgICBjdXJyZW50ID0gY3VycmVudC5jaGlsZHJlbiAmJiBjdXJyZW50LmNoaWxkcmVuWzBdO1xuICAgICAgfVxuICAgICAgLy8gYnVnIGluIHNsYXRlIHNvbWV0aW1lcyBpdCBqdXN0IHJlamVjdHMgdG8gZm9jdXNcbiAgICAgIC8vIHdoZW4gdXNpbmcgdGFiLCBzcGVjaWZpY2FsbHkgc2hpZnQrdGFiXG4gICAgICAvLyBuYWggaXQgZG9lcyBpdCBhbHNvIHdpdGggdGFiIHNvbWV0aW1lc1xuICAgICAgdGhpcy5mb2N1c0F0KHtcbiAgICAgICAgYW5jaG9yOiB7XG4gICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgIH0sXG4gICAgICAgIGZvY3VzOiB7XG4gICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gTW9yZSBidWdzIGluIHNsYXRlIHN0aWxsIG1heSByZWplY3QgdG8gZm9jdXMgYmVjYXVzZSBzbGF0ZVxuICAgICAgLy8gY2FuIGJlIHZlcnkgYnVnZ3lcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuZm9jdXNlZCkge1xuICAgICAgICAgIHRoaXMub25Gb2N1c2VkQ2hhbmdlKHBhdGgsIHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgfSwgMjApO1xuICAgIH1cbiAgICAvLyB9XG4gIH1cblxuICBwdWJsaWMgZm9yY2VCbHVyKCkge1xuICAgIC8vIGJ1ZyBpbiBzbGF0ZSBzb21ldGltZXMgaXQgd2lsbCBub3QgYmx1ciBhbmQganVzdCByZWplY3RzIHRvIGJsdXJcbiAgICAvLyB3aGVuIGFub3RoZXIgZWxlbWVudCBoYXMgYmVlbiBibHVycmVkXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICAgIHRoaXMub25CbHVycmVkQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgICAgIH1cbiAgICB9LCAyMCk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIGZ1bmN0aW9uXG4gICAqL1xuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIC8vIG1ha2UgdGhlIGVkaXRhYmxlXG4gICAgbGV0IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgPSAoXG4gICAgICA8Q3VycmVudEVsZW1lbnRQcm92aWRlclxuICAgICAgICBibG9jaz17dGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnR9XG4gICAgICAgIHN1cGVyYmxvY2tzPXt0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyB8fCBbXX1cbiAgICAgICAgaW5saW5lPXt0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnR9XG4gICAgICA+XG4gICAgICAgIDxkaXYgcmVmPXt0aGlzLmVkaXRhYmxlUmVmfSBzdHlsZT17eyBkaXNwbGF5OiBcImNvbnRlbnRzXCIgfX0gZGF0YS1zbGF0ZS1idWc9XCJ0cnVlXCI+XG4gICAgICAgICAgPEVkaXRhYmxlXG4gICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5pZH1cbiAgICAgICAgICAgIGxhbmc9e3RoaXMucHJvcHMubGFuZ31cbiAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5vbktleURvd259XG4gICAgICAgICAgICByZW5kZXJFbGVtZW50PXt0aGlzLnJlbmRlckVsZW1lbnR9XG4gICAgICAgICAgICByZW5kZXJMZWFmPXt0aGlzLnJlbmRlclRleHR9XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj17dGhpcy5wcm9wcy5wbGFjZWhvbGRlcn1cbiAgICAgICAgICAgIHJlYWRPbmx5PXt0aGlzLnByb3BzLmRpc2FibGVkfVxuICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMucHJvcHMuZGlzYWJsZWR9XG4gICAgICAgICAgICBzdHlsZT17eyBzY3JvbGxNYXJnaW5Ub3A6IHRoaXMucHJvcHMuc2Nyb2xsTWFyZ2luVG9wIH19XG4gICAgICAgICAgICAvLyBvbkZvY3VzPXt0aGlzLmZvcmNlRm9jdXN9XG4gICAgICAgICAgICBvbkJsdXI9e3RoaXMuZm9yY2VCbHVyfVxuICAgICAgICAgICAgLy8gb25DbGljaz17cHJldmVudEZvY3VzfVxuICAgICAgICAgICAgYXJpYS1pbnZhbGlkPXshdGhpcy5wcm9wcy5jdXJyZW50VmFsaWR9XG4gICAgICAgICAgICBhcmlhLWVycm9ybWVzc2FnZT17dGhpcy5wcm9wcy5jdXJyZW50VmFsaWQgPyBudWxsIDogdGhpcy5wcm9wcy5jdXJyZW50R2VuZXJhbEVycm9yRWxlbWVudElkfVxuICAgICAgICAgICAgYXJpYS1kZXNjcmliZWRieT17dGhpcy5wcm9wcy5jdXJyZW50RGVzY3JpYmVkQnl9XG4gICAgICAgICAgICBhcmlhLXBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLnBsYWNlaG9sZGVyfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9DdXJyZW50RWxlbWVudFByb3ZpZGVyPlxuICAgICk7XG5cbiAgICAvLyBhbmQgcGljayBvbiB0aGUgd3JhcHBlciwgaG9wZWZ1bGx5IHdlIGhhdmUgb25lXG4gICAgLy8gaXQnZCBiZSB3ZWlyZCBub3QgdG8gaGF2ZSBvbmVcbiAgICBjb25zdCBXcmFwcGVyID0gdGhpcy5wcm9wcy5XcmFwcGVyO1xuXG4gICAgLy8gaWYgd2UgaGF2ZSBhIHdyYXBwZXJcbiAgICBpZiAoV3JhcHBlcikge1xuICAgICAgLy8gYW5kIHdlIGZlZWQgdGhlIHRoaW5nIGluIHRoZSB3cmFwcGVyIGFzIHRoZSBuZXcgY2hpbGRyZW5cbiAgICAgIC8vIHRoYXQgaXMgbm93IHdyYXBwZXIgaW5zaWRlIHRoZSB3cmFwcGVyXG4gICAgICBjaGlsZHJlbiA9IChcbiAgICAgICAgPFdyYXBwZXJcbiAgICAgICAgICB7Li4udGhpcy5wcm9wcy53cmFwcGVyQXJnc31cbiAgICAgICAgICBkaXNhYmxlZD17dGhpcy5wcm9wcy5kaXNhYmxlZH1cbiAgICAgICAgICBzdGF0ZT17dGhpcy5zdGF0ZX1cbiAgICAgICAgICBoZWxwZXJzPXt0aGlzLmdldEhlbHBlcnMoKX1cbiAgICAgICAgICBmZWF0dXJlU3VwcG9ydD17dGhpcy5nZXRGZWF0dXJlU3VwcG9ydCgpfVxuICAgICAgICAgIGN1cnJlbnRMb2FkRXJyb3I9e3RoaXMucHJvcHMuY3VycmVudExvYWRFcnJvcn1cbiAgICAgICAgICBkaXNtaXNzQ3VycmVudExvYWRFcnJvcj17dGhpcy5wcm9wcy5kaXNtaXNzQ3VycmVudExvYWRFcnJvcn1cbiAgICAgICAgICByZWY9e3RoaXMud3JhcHBlclJlZn1cbiAgICAgICAgICBiYXNlSTE4bj17dGhpcy5wcm9wcy5iYXNlSTE4bn1cbiAgICAgICAgPlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9XcmFwcGVyPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyB3cmFwcGluZyBiYXNlZCBvbiB0aGUgcm9vdCBjb250ZXh0XG4gICAgaWYgKHRoaXMucHJvcHMucm9vdENvbnRleHQgJiYgdGhpcy5wcm9wcy5yb290Q29udGV4dC5lZGl0b3JBcmdzICYmIHRoaXMucHJvcHMucm9vdENvbnRleHQuZWRpdG9yQXJncy53cmFwcGVyKSB7XG4gICAgICBjaGlsZHJlbiA9IHRoaXMucHJvcHMucm9vdENvbnRleHQuZWRpdG9yQXJncy53cmFwcGVyKGNoaWxkcmVuKTtcbiAgICB9XG5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vaWFuc3Rvcm10YXlsb3Ivc2xhdGUvcHVsbC80NTQwXG4gICAgaWYgKHRoaXMuc3RhdGUudHJlZVZhbHVlLmNoaWxkcmVuICE9PSB0aGlzLmVkaXRvci5jaGlsZHJlbikge1xuICAgICAgdGhpcy5lZGl0b3IuY2hpbGRyZW4gPSB0aGlzLnN0YXRlLnRyZWVWYWx1ZS5jaGlsZHJlbjtcbiAgICB9XG5cbiAgICAvLyBub3cgd2UgY2FuIHJldHVyblxuICAgIHJldHVybiAoXG4gICAgICA8U2xhdGVcbiAgICAgICAgZWRpdG9yPXt0aGlzLmVkaXRvcn1cbiAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudHJlZVZhbHVlLmNoaWxkcmVufVxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZX1cbiAgICAgID5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9TbGF0ZT5cbiAgICApO1xuICB9XG59XG4iLCAiLyohXG4gKiBpcy1wbGFpbi1vYmplY3QgPGh0dHBzOi8vZ2l0aHViLmNvbS9qb25zY2hsaW5rZXJ0L2lzLXBsYWluLW9iamVjdD5cbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNywgSm9uIFNjaGxpbmtlcnQuXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuZnVuY3Rpb24gaXNPYmplY3Qobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pID09PSAnW29iamVjdCBPYmplY3RdJztcbn1cblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvKSB7XG4gIHZhciBjdG9yLHByb3Q7XG5cbiAgaWYgKGlzT2JqZWN0KG8pID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIElmIGhhcyBtb2RpZmllZCBjb25zdHJ1Y3RvclxuICBjdG9yID0gby5jb25zdHJ1Y3RvcjtcbiAgaWYgKGN0b3IgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRydWU7XG5cbiAgLy8gSWYgaGFzIG1vZGlmaWVkIHByb3RvdHlwZVxuICBwcm90ID0gY3Rvci5wcm90b3R5cGU7XG4gIGlmIChpc09iamVjdChwcm90KSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiBjb25zdHJ1Y3RvciBkb2VzIG5vdCBoYXZlIGFuIE9iamVjdC1zcGVjaWZpYyBtZXRob2RcbiAgaWYgKHByb3QuaGFzT3duUHJvcGVydHkoJ2lzUHJvdG90eXBlT2YnKSA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBNb3N0IGxpa2VseSBhIHBsYWluIE9iamVjdFxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IHsgaXNQbGFpbk9iamVjdCB9O1xuIiwgIi8vIFNob3VsZCBiZSBubyBpbXBvcnRzIGhlcmUhXG5cbi8qKlxuICogVGhlIHNlbnRpbmVsIHZhbHVlIHJldHVybmVkIGJ5IHByb2R1Y2VycyB0byByZXBsYWNlIHRoZSBkcmFmdCB3aXRoIHVuZGVmaW5lZC5cbiAqL1xuZXhwb3J0IGNvbnN0IE5PVEhJTkc6IHVuaXF1ZSBzeW1ib2wgPSBTeW1ib2wuZm9yKFwiaW1tZXItbm90aGluZ1wiKVxuXG4vKipcbiAqIFRvIGxldCBJbW1lciB0cmVhdCB5b3VyIGNsYXNzIGluc3RhbmNlcyBhcyBwbGFpbiBpbW11dGFibGUgb2JqZWN0c1xuICogKGFsYmVpdCB3aXRoIGEgY3VzdG9tIHByb3RvdHlwZSksIHlvdSBtdXN0IGRlZmluZSBlaXRoZXIgYW4gaW5zdGFuY2UgcHJvcGVydHlcbiAqIG9yIGEgc3RhdGljIHByb3BlcnR5IG9uIGVhY2ggb2YgeW91ciBjdXN0b20gY2xhc3Nlcy5cbiAqXG4gKiBPdGhlcndpc2UsIHlvdXIgY2xhc3MgaW5zdGFuY2Ugd2lsbCBuZXZlciBiZSBkcmFmdGVkLCB3aGljaCBtZWFucyBpdCB3b24ndCBiZVxuICogc2FmZSB0byBtdXRhdGUgaW4gYSBwcm9kdWNlIGNhbGxiYWNrLlxuICovXG5leHBvcnQgY29uc3QgRFJBRlRBQkxFOiB1bmlxdWUgc3ltYm9sID0gU3ltYm9sLmZvcihcImltbWVyLWRyYWZ0YWJsZVwiKVxuXG5leHBvcnQgY29uc3QgRFJBRlRfU1RBVEU6IHVuaXF1ZSBzeW1ib2wgPSBTeW1ib2wuZm9yKFwiaW1tZXItc3RhdGVcIilcbiIsICJleHBvcnQgY29uc3QgZXJyb3JzID1cblx0cHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiXG5cdFx0PyBbXG5cdFx0XHRcdC8vIEFsbCBlcnJvciBjb2Rlcywgc3RhcnRpbmcgYnkgMDpcblx0XHRcdFx0ZnVuY3Rpb24ocGx1Z2luOiBzdHJpbmcpIHtcblx0XHRcdFx0XHRyZXR1cm4gYFRoZSBwbHVnaW4gZm9yICcke3BsdWdpbn0nIGhhcyBub3QgYmVlbiBsb2FkZWQgaW50byBJbW1lci4gVG8gZW5hYmxlIHRoZSBwbHVnaW4sIGltcG9ydCBhbmQgY2FsbCBcXGBlbmFibGUke3BsdWdpbn0oKVxcYCB3aGVuIGluaXRpYWxpemluZyB5b3VyIGFwcGxpY2F0aW9uLmBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24odGhpbmc6IHN0cmluZykge1xuXHRcdFx0XHRcdHJldHVybiBgcHJvZHVjZSBjYW4gb25seSBiZSBjYWxsZWQgb24gdGhpbmdzIHRoYXQgYXJlIGRyYWZ0YWJsZTogcGxhaW4gb2JqZWN0cywgYXJyYXlzLCBNYXAsIFNldCBvciBjbGFzc2VzIHRoYXQgYXJlIG1hcmtlZCB3aXRoICdbaW1tZXJhYmxlXTogdHJ1ZScuIEdvdCAnJHt0aGluZ30nYFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcIlRoaXMgb2JqZWN0IGhhcyBiZWVuIGZyb3plbiBhbmQgc2hvdWxkIG5vdCBiZSBtdXRhdGVkXCIsXG5cdFx0XHRcdGZ1bmN0aW9uKGRhdGE6IGFueSkge1xuXHRcdFx0XHRcdHJldHVybiAoXG5cdFx0XHRcdFx0XHRcIkNhbm5vdCB1c2UgYSBwcm94eSB0aGF0IGhhcyBiZWVuIHJldm9rZWQuIERpZCB5b3UgcGFzcyBhbiBvYmplY3QgZnJvbSBpbnNpZGUgYW4gaW1tZXIgZnVuY3Rpb24gdG8gYW4gYXN5bmMgcHJvY2Vzcz8gXCIgK1xuXHRcdFx0XHRcdFx0ZGF0YVxuXHRcdFx0XHRcdClcblx0XHRcdFx0fSxcblx0XHRcdFx0XCJBbiBpbW1lciBwcm9kdWNlciByZXR1cm5lZCBhIG5ldyB2YWx1ZSAqYW5kKiBtb2RpZmllZCBpdHMgZHJhZnQuIEVpdGhlciByZXR1cm4gYSBuZXcgdmFsdWUgKm9yKiBtb2RpZnkgdGhlIGRyYWZ0LlwiLFxuXHRcdFx0XHRcIkltbWVyIGZvcmJpZHMgY2lyY3VsYXIgcmVmZXJlbmNlc1wiLFxuXHRcdFx0XHRcIlRoZSBmaXJzdCBvciBzZWNvbmQgYXJndW1lbnQgdG8gYHByb2R1Y2VgIG11c3QgYmUgYSBmdW5jdGlvblwiLFxuXHRcdFx0XHRcIlRoZSB0aGlyZCBhcmd1bWVudCB0byBgcHJvZHVjZWAgbXVzdCBiZSBhIGZ1bmN0aW9uIG9yIHVuZGVmaW5lZFwiLFxuXHRcdFx0XHRcIkZpcnN0IGFyZ3VtZW50IHRvIGBjcmVhdGVEcmFmdGAgbXVzdCBiZSBhIHBsYWluIG9iamVjdCwgYW4gYXJyYXksIG9yIGFuIGltbWVyYWJsZSBvYmplY3RcIixcblx0XHRcdFx0XCJGaXJzdCBhcmd1bWVudCB0byBgZmluaXNoRHJhZnRgIG11c3QgYmUgYSBkcmFmdCByZXR1cm5lZCBieSBgY3JlYXRlRHJhZnRgXCIsXG5cdFx0XHRcdGZ1bmN0aW9uKHRoaW5nOiBzdHJpbmcpIHtcblx0XHRcdFx0XHRyZXR1cm4gYCdjdXJyZW50JyBleHBlY3RzIGEgZHJhZnQsIGdvdDogJHt0aGluZ31gXG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwiT2JqZWN0LmRlZmluZVByb3BlcnR5KCkgY2Fubm90IGJlIHVzZWQgb24gYW4gSW1tZXIgZHJhZnRcIixcblx0XHRcdFx0XCJPYmplY3Quc2V0UHJvdG90eXBlT2YoKSBjYW5ub3QgYmUgdXNlZCBvbiBhbiBJbW1lciBkcmFmdFwiLFxuXHRcdFx0XHRcIkltbWVyIG9ubHkgc3VwcG9ydHMgZGVsZXRpbmcgYXJyYXkgaW5kaWNlc1wiLFxuXHRcdFx0XHRcIkltbWVyIG9ubHkgc3VwcG9ydHMgc2V0dGluZyBhcnJheSBpbmRpY2VzIGFuZCB0aGUgJ2xlbmd0aCcgcHJvcGVydHlcIixcblx0XHRcdFx0ZnVuY3Rpb24odGhpbmc6IHN0cmluZykge1xuXHRcdFx0XHRcdHJldHVybiBgJ29yaWdpbmFsJyBleHBlY3RzIGEgZHJhZnQsIGdvdDogJHt0aGluZ31gXG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gTm90ZTogaWYgbW9yZSBlcnJvcnMgYXJlIGFkZGVkLCB0aGUgZXJyb3JPZmZzZXQgaW4gUGF0Y2hlcy50cyBzaG91bGQgYmUgaW5jcmVhc2VkXG5cdFx0XHRcdC8vIFNlZSBQYXRjaGVzLnRzIGZvciBhZGRpdGlvbmFsIGVycm9yc1xuXHRcdCAgXVxuXHRcdDogW11cblxuZXhwb3J0IGZ1bmN0aW9uIGRpZShlcnJvcjogbnVtYmVyLCAuLi5hcmdzOiBhbnlbXSk6IG5ldmVyIHtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuXHRcdGNvbnN0IGUgPSBlcnJvcnNbZXJyb3JdXG5cdFx0Y29uc3QgbXNnID0gdHlwZW9mIGUgPT09IFwiZnVuY3Rpb25cIiA/IGUuYXBwbHkobnVsbCwgYXJncyBhcyBhbnkpIDogZVxuXHRcdHRocm93IG5ldyBFcnJvcihgW0ltbWVyXSAke21zZ31gKVxuXHR9XG5cdHRocm93IG5ldyBFcnJvcihcblx0XHRgW0ltbWVyXSBtaW5pZmllZCBlcnJvciBucjogJHtlcnJvcn0uIEZ1bGwgZXJyb3IgYXQ6IGh0dHBzOi8vYml0Lmx5LzNjWEVLV2ZgXG5cdClcbn1cbiIsICJpbXBvcnQge1xuXHREUkFGVF9TVEFURSxcblx0RFJBRlRBQkxFLFxuXHRPYmplY3Rpc2gsXG5cdERyYWZ0ZWQsXG5cdEFueU9iamVjdCxcblx0QW55TWFwLFxuXHRBbnlTZXQsXG5cdEltbWVyU3RhdGUsXG5cdEFyY2hUeXBlLFxuXHRkaWVcbn0gZnJvbSBcIi4uL2ludGVybmFsXCJcblxuZXhwb3J0IGNvbnN0IGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mXG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGFuIEltbWVyIGRyYWZ0ICovXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gaXNEcmFmdCh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdHJldHVybiAhIXZhbHVlICYmICEhdmFsdWVbRFJBRlRfU1RBVEVdXG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHZhbHVlIGNhbiBiZSBkcmFmdGVkIGJ5IEltbWVyICovXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gaXNEcmFmdGFibGUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuXHRpZiAoIXZhbHVlKSByZXR1cm4gZmFsc2Vcblx0cmV0dXJuIChcblx0XHRpc1BsYWluT2JqZWN0KHZhbHVlKSB8fFxuXHRcdEFycmF5LmlzQXJyYXkodmFsdWUpIHx8XG5cdFx0ISF2YWx1ZVtEUkFGVEFCTEVdIHx8XG5cdFx0ISF2YWx1ZS5jb25zdHJ1Y3Rvcj8uW0RSQUZUQUJMRV0gfHxcblx0XHRpc01hcCh2YWx1ZSkgfHxcblx0XHRpc1NldCh2YWx1ZSlcblx0KVxufVxuXG5jb25zdCBvYmplY3RDdG9yU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci50b1N0cmluZygpXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiKSByZXR1cm4gZmFsc2Vcblx0Y29uc3QgcHJvdG8gPSBnZXRQcm90b3R5cGVPZih2YWx1ZSlcblx0aWYgKHByb3RvID09PSBudWxsKSB7XG5cdFx0cmV0dXJuIHRydWVcblx0fVxuXHRjb25zdCBDdG9yID1cblx0XHRPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChwcm90bywgXCJjb25zdHJ1Y3RvclwiKSAmJiBwcm90by5jb25zdHJ1Y3RvclxuXG5cdGlmIChDdG9yID09PSBPYmplY3QpIHJldHVybiB0cnVlXG5cblx0cmV0dXJuIChcblx0XHR0eXBlb2YgQ3RvciA9PSBcImZ1bmN0aW9uXCIgJiZcblx0XHRGdW5jdGlvbi50b1N0cmluZy5jYWxsKEN0b3IpID09PSBvYmplY3RDdG9yU3RyaW5nXG5cdClcbn1cblxuLyoqIEdldCB0aGUgdW5kZXJseWluZyBvYmplY3QgdGhhdCBpcyByZXByZXNlbnRlZCBieSB0aGUgZ2l2ZW4gZHJhZnQgKi9cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBvcmlnaW5hbDxUPih2YWx1ZTogVCk6IFQgfCB1bmRlZmluZWRcbmV4cG9ydCBmdW5jdGlvbiBvcmlnaW5hbCh2YWx1ZTogRHJhZnRlZDxhbnk+KTogYW55IHtcblx0aWYgKCFpc0RyYWZ0KHZhbHVlKSkgZGllKDE1LCB2YWx1ZSlcblx0cmV0dXJuIHZhbHVlW0RSQUZUX1NUQVRFXS5iYXNlX1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZWFjaDxUIGV4dGVuZHMgT2JqZWN0aXNoPihcblx0b2JqOiBULFxuXHRpdGVyOiAoa2V5OiBzdHJpbmcgfCBudW1iZXIsIHZhbHVlOiBhbnksIHNvdXJjZTogVCkgPT4gdm9pZCxcblx0ZW51bWVyYWJsZU9ubHk/OiBib29sZWFuXG4pOiB2b2lkXG5leHBvcnQgZnVuY3Rpb24gZWFjaChvYmo6IGFueSwgaXRlcjogYW55KSB7XG5cdGlmIChnZXRBcmNodHlwZShvYmopID09PSBBcmNoVHlwZS5PYmplY3QpIHtcblx0XHRPYmplY3QuZW50cmllcyhvYmopLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuXHRcdFx0aXRlcihrZXksIHZhbHVlLCBvYmopXG5cdFx0fSlcblx0fSBlbHNlIHtcblx0XHRvYmouZm9yRWFjaCgoZW50cnk6IGFueSwgaW5kZXg6IGFueSkgPT4gaXRlcihpbmRleCwgZW50cnksIG9iaikpXG5cdH1cbn1cblxuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFyY2h0eXBlKHRoaW5nOiBhbnkpOiBBcmNoVHlwZSB7XG5cdGNvbnN0IHN0YXRlOiB1bmRlZmluZWQgfCBJbW1lclN0YXRlID0gdGhpbmdbRFJBRlRfU1RBVEVdXG5cdHJldHVybiBzdGF0ZVxuXHRcdD8gc3RhdGUudHlwZV9cblx0XHQ6IEFycmF5LmlzQXJyYXkodGhpbmcpXG5cdFx0PyBBcmNoVHlwZS5BcnJheVxuXHRcdDogaXNNYXAodGhpbmcpXG5cdFx0PyBBcmNoVHlwZS5NYXBcblx0XHQ6IGlzU2V0KHRoaW5nKVxuXHRcdD8gQXJjaFR5cGUuU2V0XG5cdFx0OiBBcmNoVHlwZS5PYmplY3Rcbn1cblxuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIGhhcyh0aGluZzogYW55LCBwcm9wOiBQcm9wZXJ0eUtleSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gZ2V0QXJjaHR5cGUodGhpbmcpID09PSBBcmNoVHlwZS5NYXBcblx0XHQ/IHRoaW5nLmhhcyhwcm9wKVxuXHRcdDogT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaW5nLCBwcm9wKVxufVxuXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KHRoaW5nOiBBbnlNYXAgfCBBbnlPYmplY3QsIHByb3A6IFByb3BlcnR5S2V5KTogYW55IHtcblx0Ly8gQHRzLWlnbm9yZVxuXHRyZXR1cm4gZ2V0QXJjaHR5cGUodGhpbmcpID09PSBBcmNoVHlwZS5NYXAgPyB0aGluZy5nZXQocHJvcCkgOiB0aGluZ1twcm9wXVxufVxuXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gc2V0KHRoaW5nOiBhbnksIHByb3BPck9sZFZhbHVlOiBQcm9wZXJ0eUtleSwgdmFsdWU6IGFueSkge1xuXHRjb25zdCB0ID0gZ2V0QXJjaHR5cGUodGhpbmcpXG5cdGlmICh0ID09PSBBcmNoVHlwZS5NYXApIHRoaW5nLnNldChwcm9wT3JPbGRWYWx1ZSwgdmFsdWUpXG5cdGVsc2UgaWYgKHQgPT09IEFyY2hUeXBlLlNldCkge1xuXHRcdHRoaW5nLmFkZCh2YWx1ZSlcblx0fSBlbHNlIHRoaW5nW3Byb3BPck9sZFZhbHVlXSA9IHZhbHVlXG59XG5cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBpcyh4OiBhbnksIHk6IGFueSk6IGJvb2xlYW4ge1xuXHQvLyBGcm9tOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmJqcy9ibG9iL2M2OTkwNGE1MTFiOTAwMjY2OTM1MTY4MjIzMDYzZGQ4NzcyZGZjNDAvcGFja2FnZXMvZmJqcy9zcmMvY29yZS9zaGFsbG93RXF1YWwuanNcblx0aWYgKHggPT09IHkpIHtcblx0XHRyZXR1cm4geCAhPT0gMCB8fCAxIC8geCA9PT0gMSAvIHlcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4geCAhPT0geCAmJiB5ICE9PSB5XG5cdH1cbn1cblxuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTWFwKHRhcmdldDogYW55KTogdGFyZ2V0IGlzIEFueU1hcCB7XG5cdHJldHVybiB0YXJnZXQgaW5zdGFuY2VvZiBNYXBcbn1cblxuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2V0KHRhcmdldDogYW55KTogdGFyZ2V0IGlzIEFueVNldCB7XG5cdHJldHVybiB0YXJnZXQgaW5zdGFuY2VvZiBTZXRcbn1cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXRlc3Qoc3RhdGU6IEltbWVyU3RhdGUpOiBhbnkge1xuXHRyZXR1cm4gc3RhdGUuY29weV8gfHwgc3RhdGUuYmFzZV9cbn1cblxuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIHNoYWxsb3dDb3B5KGJhc2U6IGFueSwgc3RyaWN0OiBib29sZWFuKSB7XG5cdGlmIChpc01hcChiYXNlKSkge1xuXHRcdHJldHVybiBuZXcgTWFwKGJhc2UpXG5cdH1cblx0aWYgKGlzU2V0KGJhc2UpKSB7XG5cdFx0cmV0dXJuIG5ldyBTZXQoYmFzZSlcblx0fVxuXHRpZiAoQXJyYXkuaXNBcnJheShiYXNlKSkgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGJhc2UpXG5cblx0aWYgKCFzdHJpY3QgJiYgaXNQbGFpbk9iamVjdChiYXNlKSkge1xuXHRcdGlmICghZ2V0UHJvdG90eXBlT2YoYmFzZSkpIHtcblx0XHRcdGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUobnVsbClcblx0XHRcdHJldHVybiBPYmplY3QuYXNzaWduKG9iaiwgYmFzZSlcblx0XHR9XG5cdFx0cmV0dXJuIHsuLi5iYXNlfVxuXHR9XG5cblx0Y29uc3QgZGVzY3JpcHRvcnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhiYXNlKVxuXHRkZWxldGUgZGVzY3JpcHRvcnNbRFJBRlRfU1RBVEUgYXMgYW55XVxuXHRsZXQga2V5cyA9IFJlZmxlY3Qub3duS2V5cyhkZXNjcmlwdG9ycylcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y29uc3Qga2V5OiBhbnkgPSBrZXlzW2ldXG5cdFx0Y29uc3QgZGVzYyA9IGRlc2NyaXB0b3JzW2tleV1cblx0XHRpZiAoZGVzYy53cml0YWJsZSA9PT0gZmFsc2UpIHtcblx0XHRcdGRlc2Mud3JpdGFibGUgPSB0cnVlXG5cdFx0XHRkZXNjLmNvbmZpZ3VyYWJsZSA9IHRydWVcblx0XHR9XG5cdFx0Ly8gbGlrZSBvYmplY3QuYXNzaWduLCB3ZSB3aWxsIHJlYWQgYW55IF9vd25fLCBnZXQvc2V0IGFjY2Vzc29ycy4gVGhpcyBoZWxwcyBpbiBkZWFsaW5nXG5cdFx0Ly8gd2l0aCBsaWJyYXJpZXMgdGhhdCB0cmFwIHZhbHVlcywgbGlrZSBtb2J4IG9yIHZ1ZVxuXHRcdC8vIHVubGlrZSBvYmplY3QuYXNzaWduLCBub24tZW51bWVyYWJsZXMgd2lsbCBiZSBjb3BpZWQgYXMgd2VsbFxuXHRcdGlmIChkZXNjLmdldCB8fCBkZXNjLnNldClcblx0XHRcdGRlc2NyaXB0b3JzW2tleV0gPSB7XG5cdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0XHRcdFx0d3JpdGFibGU6IHRydWUsIC8vIGNvdWxkIGxpdmUgd2l0aCAhIWRlc2Muc2V0IGFzIHdlbGwgaGVyZS4uLlxuXHRcdFx0XHRlbnVtZXJhYmxlOiBkZXNjLmVudW1lcmFibGUsXG5cdFx0XHRcdHZhbHVlOiBiYXNlW2tleV1cblx0XHRcdH1cblx0fVxuXHRyZXR1cm4gT2JqZWN0LmNyZWF0ZShnZXRQcm90b3R5cGVPZihiYXNlKSwgZGVzY3JpcHRvcnMpXG59XG5cbi8qKlxuICogRnJlZXplcyBkcmFmdGFibGUgb2JqZWN0cy4gUmV0dXJucyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICogQnkgZGVmYXVsdCBmcmVlemVzIHNoYWxsb3dseSwgYnV0IGlmIHRoZSBzZWNvbmQgYXJndW1lbnQgaXMgYHRydWVgIGl0IHdpbGwgZnJlZXplIHJlY3Vyc2l2ZWx5LlxuICpcbiAqIEBwYXJhbSBvYmpcbiAqIEBwYXJhbSBkZWVwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcmVlemU8VD4ob2JqOiBULCBkZWVwPzogYm9vbGVhbik6IFRcbmV4cG9ydCBmdW5jdGlvbiBmcmVlemU8VD4ob2JqOiBhbnksIGRlZXA6IGJvb2xlYW4gPSBmYWxzZSk6IFQge1xuXHRpZiAoaXNGcm96ZW4ob2JqKSB8fCBpc0RyYWZ0KG9iaikgfHwgIWlzRHJhZnRhYmxlKG9iaikpIHJldHVybiBvYmpcblx0aWYgKGdldEFyY2h0eXBlKG9iaikgPiAxIC8qIE1hcCBvciBTZXQgKi8pIHtcblx0XHRvYmouc2V0ID0gb2JqLmFkZCA9IG9iai5jbGVhciA9IG9iai5kZWxldGUgPSBkb250TXV0YXRlRnJvemVuQ29sbGVjdGlvbnMgYXMgYW55XG5cdH1cblx0T2JqZWN0LmZyZWV6ZShvYmopXG5cdGlmIChkZWVwKSBlYWNoKG9iaiwgKF9rZXksIHZhbHVlKSA9PiBmcmVlemUodmFsdWUsIHRydWUpLCB0cnVlKVxuXHRyZXR1cm4gb2JqXG59XG5cbmZ1bmN0aW9uIGRvbnRNdXRhdGVGcm96ZW5Db2xsZWN0aW9ucygpIHtcblx0ZGllKDIpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Zyb3plbihvYmo6IGFueSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gT2JqZWN0LmlzRnJvemVuKG9iailcbn1cbiIsICJpbXBvcnQge1xuXHRJbW1lclN0YXRlLFxuXHRQYXRjaCxcblx0RHJhZnRlZCxcblx0SW1tZXJCYXNlU3RhdGUsXG5cdEFueU1hcCxcblx0QW55U2V0LFxuXHRBcmNoVHlwZSxcblx0ZGllXG59IGZyb20gXCIuLi9pbnRlcm5hbFwiXG5cbi8qKiBQbHVnaW4gdXRpbGl0aWVzICovXG5jb25zdCBwbHVnaW5zOiB7XG5cdFBhdGNoZXM/OiB7XG5cdFx0Z2VuZXJhdGVQYXRjaGVzXyhcblx0XHRcdHN0YXRlOiBJbW1lclN0YXRlLFxuXHRcdFx0YmFzZVBhdGg6IFBhdGNoUGF0aCxcblx0XHRcdHBhdGNoZXM6IFBhdGNoW10sXG5cdFx0XHRpbnZlcnNlUGF0Y2hlczogUGF0Y2hbXVxuXHRcdCk6IHZvaWRcblx0XHRnZW5lcmF0ZVJlcGxhY2VtZW50UGF0Y2hlc18oXG5cdFx0XHRiYXNlOiBhbnksXG5cdFx0XHRyZXBsYWNlbWVudDogYW55LFxuXHRcdFx0cGF0Y2hlczogUGF0Y2hbXSxcblx0XHRcdGludmVyc2VQYXRjaGVzOiBQYXRjaFtdXG5cdFx0KTogdm9pZFxuXHRcdGFwcGx5UGF0Y2hlc188VD4oZHJhZnQ6IFQsIHBhdGNoZXM6IFBhdGNoW10pOiBUXG5cdH1cblx0TWFwU2V0Pzoge1xuXHRcdHByb3h5TWFwXzxUIGV4dGVuZHMgQW55TWFwPih0YXJnZXQ6IFQsIHBhcmVudD86IEltbWVyU3RhdGUpOiBUXG5cdFx0cHJveHlTZXRfPFQgZXh0ZW5kcyBBbnlTZXQ+KHRhcmdldDogVCwgcGFyZW50PzogSW1tZXJTdGF0ZSk6IFRcblx0fVxufSA9IHt9XG5cbnR5cGUgUGx1Z2lucyA9IHR5cGVvZiBwbHVnaW5zXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQbHVnaW48SyBleHRlbmRzIGtleW9mIFBsdWdpbnM+KFxuXHRwbHVnaW5LZXk6IEtcbik6IEV4Y2x1ZGU8UGx1Z2luc1tLXSwgdW5kZWZpbmVkPiB7XG5cdGNvbnN0IHBsdWdpbiA9IHBsdWdpbnNbcGx1Z2luS2V5XVxuXHRpZiAoIXBsdWdpbikge1xuXHRcdGRpZSgwLCBwbHVnaW5LZXkpXG5cdH1cblx0Ly8gQHRzLWlnbm9yZVxuXHRyZXR1cm4gcGx1Z2luXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkUGx1Z2luPEsgZXh0ZW5kcyBrZXlvZiBQbHVnaW5zPihcblx0cGx1Z2luS2V5OiBLLFxuXHRpbXBsZW1lbnRhdGlvbjogUGx1Z2luc1tLXVxuKTogdm9pZCB7XG5cdGlmICghcGx1Z2luc1twbHVnaW5LZXldKSBwbHVnaW5zW3BsdWdpbktleV0gPSBpbXBsZW1lbnRhdGlvblxufVxuLyoqIE1hcCAvIFNldCBwbHVnaW4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBNYXBTdGF0ZSBleHRlbmRzIEltbWVyQmFzZVN0YXRlIHtcblx0dHlwZV86IEFyY2hUeXBlLk1hcFxuXHRjb3B5XzogQW55TWFwIHwgdW5kZWZpbmVkXG5cdGFzc2lnbmVkXzogTWFwPGFueSwgYm9vbGVhbj4gfCB1bmRlZmluZWRcblx0YmFzZV86IEFueU1hcFxuXHRyZXZva2VkXzogYm9vbGVhblxuXHRkcmFmdF86IERyYWZ0ZWQ8QW55TWFwLCBNYXBTdGF0ZT5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXRTdGF0ZSBleHRlbmRzIEltbWVyQmFzZVN0YXRlIHtcblx0dHlwZV86IEFyY2hUeXBlLlNldFxuXHRjb3B5XzogQW55U2V0IHwgdW5kZWZpbmVkXG5cdGJhc2VfOiBBbnlTZXRcblx0ZHJhZnRzXzogTWFwPGFueSwgRHJhZnRlZD4gLy8gbWFwcyB0aGUgb3JpZ2luYWwgdmFsdWUgdG8gdGhlIGRyYWZ0IHZhbHVlIGluIHRoZSBuZXcgc2V0XG5cdHJldm9rZWRfOiBib29sZWFuXG5cdGRyYWZ0XzogRHJhZnRlZDxBbnlTZXQsIFNldFN0YXRlPlxufVxuXG4vKiogUGF0Y2hlcyBwbHVnaW4gKi9cblxuZXhwb3J0IHR5cGUgUGF0Y2hQYXRoID0gKHN0cmluZyB8IG51bWJlcilbXVxuIiwgImltcG9ydCB7XG5cdFBhdGNoLFxuXHRQYXRjaExpc3RlbmVyLFxuXHREcmFmdGVkLFxuXHRJbW1lcixcblx0RFJBRlRfU1RBVEUsXG5cdEltbWVyU3RhdGUsXG5cdEFyY2hUeXBlLFxuXHRnZXRQbHVnaW5cbn0gZnJvbSBcIi4uL2ludGVybmFsXCJcblxuLyoqIEVhY2ggc2NvcGUgcmVwcmVzZW50cyBhIGBwcm9kdWNlYCBjYWxsLiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEltbWVyU2NvcGUge1xuXHRwYXRjaGVzXz86IFBhdGNoW11cblx0aW52ZXJzZVBhdGNoZXNfPzogUGF0Y2hbXVxuXHRjYW5BdXRvRnJlZXplXzogYm9vbGVhblxuXHRkcmFmdHNfOiBhbnlbXVxuXHRwYXJlbnRfPzogSW1tZXJTY29wZVxuXHRwYXRjaExpc3RlbmVyXz86IFBhdGNoTGlzdGVuZXJcblx0aW1tZXJfOiBJbW1lclxuXHR1bmZpbmFsaXplZERyYWZ0c186IG51bWJlclxufVxuXG5sZXQgY3VycmVudFNjb3BlOiBJbW1lclNjb3BlIHwgdW5kZWZpbmVkXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50U2NvcGUoKSB7XG5cdHJldHVybiBjdXJyZW50U2NvcGUhXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNjb3BlKFxuXHRwYXJlbnRfOiBJbW1lclNjb3BlIHwgdW5kZWZpbmVkLFxuXHRpbW1lcl86IEltbWVyXG4pOiBJbW1lclNjb3BlIHtcblx0cmV0dXJuIHtcblx0XHRkcmFmdHNfOiBbXSxcblx0XHRwYXJlbnRfLFxuXHRcdGltbWVyXyxcblx0XHQvLyBXaGVuZXZlciB0aGUgbW9kaWZpZWQgZHJhZnQgY29udGFpbnMgYSBkcmFmdCBmcm9tIGFub3RoZXIgc2NvcGUsIHdlXG5cdFx0Ly8gbmVlZCB0byBwcmV2ZW50IGF1dG8tZnJlZXppbmcgc28gdGhlIHVub3duZWQgZHJhZnQgY2FuIGJlIGZpbmFsaXplZC5cblx0XHRjYW5BdXRvRnJlZXplXzogdHJ1ZSxcblx0XHR1bmZpbmFsaXplZERyYWZ0c186IDBcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlUGF0Y2hlc0luU2NvcGUoXG5cdHNjb3BlOiBJbW1lclNjb3BlLFxuXHRwYXRjaExpc3RlbmVyPzogUGF0Y2hMaXN0ZW5lclxuKSB7XG5cdGlmIChwYXRjaExpc3RlbmVyKSB7XG5cdFx0Z2V0UGx1Z2luKFwiUGF0Y2hlc1wiKSAvLyBhc3NlcnQgd2UgaGF2ZSB0aGUgcGx1Z2luXG5cdFx0c2NvcGUucGF0Y2hlc18gPSBbXVxuXHRcdHNjb3BlLmludmVyc2VQYXRjaGVzXyA9IFtdXG5cdFx0c2NvcGUucGF0Y2hMaXN0ZW5lcl8gPSBwYXRjaExpc3RlbmVyXG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJldm9rZVNjb3BlKHNjb3BlOiBJbW1lclNjb3BlKSB7XG5cdGxlYXZlU2NvcGUoc2NvcGUpXG5cdHNjb3BlLmRyYWZ0c18uZm9yRWFjaChyZXZva2VEcmFmdClcblx0Ly8gQHRzLWlnbm9yZVxuXHRzY29wZS5kcmFmdHNfID0gbnVsbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gbGVhdmVTY29wZShzY29wZTogSW1tZXJTY29wZSkge1xuXHRpZiAoc2NvcGUgPT09IGN1cnJlbnRTY29wZSkge1xuXHRcdGN1cnJlbnRTY29wZSA9IHNjb3BlLnBhcmVudF9cblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW50ZXJTY29wZShpbW1lcjogSW1tZXIpIHtcblx0cmV0dXJuIChjdXJyZW50U2NvcGUgPSBjcmVhdGVTY29wZShjdXJyZW50U2NvcGUsIGltbWVyKSlcbn1cblxuZnVuY3Rpb24gcmV2b2tlRHJhZnQoZHJhZnQ6IERyYWZ0ZWQpIHtcblx0Y29uc3Qgc3RhdGU6IEltbWVyU3RhdGUgPSBkcmFmdFtEUkFGVF9TVEFURV1cblx0aWYgKHN0YXRlLnR5cGVfID09PSBBcmNoVHlwZS5PYmplY3QgfHwgc3RhdGUudHlwZV8gPT09IEFyY2hUeXBlLkFycmF5KVxuXHRcdHN0YXRlLnJldm9rZV8oKVxuXHRlbHNlIHN0YXRlLnJldm9rZWRfID0gdHJ1ZVxufVxuIiwgImltcG9ydCB7XG5cdEltbWVyU2NvcGUsXG5cdERSQUZUX1NUQVRFLFxuXHRpc0RyYWZ0YWJsZSxcblx0Tk9USElORyxcblx0UGF0Y2hQYXRoLFxuXHRlYWNoLFxuXHRoYXMsXG5cdGZyZWV6ZSxcblx0SW1tZXJTdGF0ZSxcblx0aXNEcmFmdCxcblx0U2V0U3RhdGUsXG5cdHNldCxcblx0QXJjaFR5cGUsXG5cdGdldFBsdWdpbixcblx0ZGllLFxuXHRyZXZva2VTY29wZSxcblx0aXNGcm96ZW5cbn0gZnJvbSBcIi4uL2ludGVybmFsXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NSZXN1bHQocmVzdWx0OiBhbnksIHNjb3BlOiBJbW1lclNjb3BlKSB7XG5cdHNjb3BlLnVuZmluYWxpemVkRHJhZnRzXyA9IHNjb3BlLmRyYWZ0c18ubGVuZ3RoXG5cdGNvbnN0IGJhc2VEcmFmdCA9IHNjb3BlLmRyYWZ0c18hWzBdXG5cdGNvbnN0IGlzUmVwbGFjZWQgPSByZXN1bHQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQgIT09IGJhc2VEcmFmdFxuXHRpZiAoaXNSZXBsYWNlZCkge1xuXHRcdGlmIChiYXNlRHJhZnRbRFJBRlRfU1RBVEVdLm1vZGlmaWVkXykge1xuXHRcdFx0cmV2b2tlU2NvcGUoc2NvcGUpXG5cdFx0XHRkaWUoNClcblx0XHR9XG5cdFx0aWYgKGlzRHJhZnRhYmxlKHJlc3VsdCkpIHtcblx0XHRcdC8vIEZpbmFsaXplIHRoZSByZXN1bHQgaW4gY2FzZSBpdCBjb250YWlucyAob3IgaXMpIGEgc3Vic2V0IG9mIHRoZSBkcmFmdC5cblx0XHRcdHJlc3VsdCA9IGZpbmFsaXplKHNjb3BlLCByZXN1bHQpXG5cdFx0XHRpZiAoIXNjb3BlLnBhcmVudF8pIG1heWJlRnJlZXplKHNjb3BlLCByZXN1bHQpXG5cdFx0fVxuXHRcdGlmIChzY29wZS5wYXRjaGVzXykge1xuXHRcdFx0Z2V0UGx1Z2luKFwiUGF0Y2hlc1wiKS5nZW5lcmF0ZVJlcGxhY2VtZW50UGF0Y2hlc18oXG5cdFx0XHRcdGJhc2VEcmFmdFtEUkFGVF9TVEFURV0uYmFzZV8sXG5cdFx0XHRcdHJlc3VsdCxcblx0XHRcdFx0c2NvcGUucGF0Y2hlc18sXG5cdFx0XHRcdHNjb3BlLmludmVyc2VQYXRjaGVzXyFcblx0XHRcdClcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0Ly8gRmluYWxpemUgdGhlIGJhc2UgZHJhZnQuXG5cdFx0cmVzdWx0ID0gZmluYWxpemUoc2NvcGUsIGJhc2VEcmFmdCwgW10pXG5cdH1cblx0cmV2b2tlU2NvcGUoc2NvcGUpXG5cdGlmIChzY29wZS5wYXRjaGVzXykge1xuXHRcdHNjb3BlLnBhdGNoTGlzdGVuZXJfIShzY29wZS5wYXRjaGVzXywgc2NvcGUuaW52ZXJzZVBhdGNoZXNfISlcblx0fVxuXHRyZXR1cm4gcmVzdWx0ICE9PSBOT1RISU5HID8gcmVzdWx0IDogdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGZpbmFsaXplKHJvb3RTY29wZTogSW1tZXJTY29wZSwgdmFsdWU6IGFueSwgcGF0aD86IFBhdGNoUGF0aCkge1xuXHQvLyBEb24ndCByZWN1cnNlIGluIHRobyByZWN1cnNpdmUgZGF0YSBzdHJ1Y3R1cmVzXG5cdGlmIChpc0Zyb3plbih2YWx1ZSkpIHJldHVybiB2YWx1ZVxuXG5cdGNvbnN0IHN0YXRlOiBJbW1lclN0YXRlID0gdmFsdWVbRFJBRlRfU1RBVEVdXG5cdC8vIEEgcGxhaW4gb2JqZWN0LCBtaWdodCBuZWVkIGZyZWV6aW5nLCBtaWdodCBjb250YWluIGRyYWZ0c1xuXHRpZiAoIXN0YXRlKSB7XG5cdFx0ZWFjaChcblx0XHRcdHZhbHVlLFxuXHRcdFx0KGtleSwgY2hpbGRWYWx1ZSkgPT5cblx0XHRcdFx0ZmluYWxpemVQcm9wZXJ0eShyb290U2NvcGUsIHN0YXRlLCB2YWx1ZSwga2V5LCBjaGlsZFZhbHVlLCBwYXRoKSxcblx0XHRcdHRydWUgLy8gU2VlICM1OTAsIGRvbid0IHJlY3Vyc2UgaW50byBub24tZW51bWVyYWJsZSBvZiBub24gZHJhZnRlZCBvYmplY3RzXG5cdFx0KVxuXHRcdHJldHVybiB2YWx1ZVxuXHR9XG5cdC8vIE5ldmVyIGZpbmFsaXplIGRyYWZ0cyBvd25lZCBieSBhbm90aGVyIHNjb3BlLlxuXHRpZiAoc3RhdGUuc2NvcGVfICE9PSByb290U2NvcGUpIHJldHVybiB2YWx1ZVxuXHQvLyBVbm1vZGlmaWVkIGRyYWZ0LCByZXR1cm4gdGhlIChmcm96ZW4pIG9yaWdpbmFsXG5cdGlmICghc3RhdGUubW9kaWZpZWRfKSB7XG5cdFx0bWF5YmVGcmVlemUocm9vdFNjb3BlLCBzdGF0ZS5iYXNlXywgdHJ1ZSlcblx0XHRyZXR1cm4gc3RhdGUuYmFzZV9cblx0fVxuXHQvLyBOb3QgZmluYWxpemVkIHlldCwgbGV0J3MgZG8gdGhhdCBub3dcblx0aWYgKCFzdGF0ZS5maW5hbGl6ZWRfKSB7XG5cdFx0c3RhdGUuZmluYWxpemVkXyA9IHRydWVcblx0XHRzdGF0ZS5zY29wZV8udW5maW5hbGl6ZWREcmFmdHNfLS1cblx0XHRjb25zdCByZXN1bHQgPSBzdGF0ZS5jb3B5X1xuXHRcdC8vIEZpbmFsaXplIGFsbCBjaGlsZHJlbiBvZiB0aGUgY29weVxuXHRcdC8vIEZvciBzZXRzIHdlIGNsb25lIGJlZm9yZSBpdGVyYXRpbmcsIG90aGVyd2lzZSB3ZSBjYW4gZ2V0IGluIGVuZGxlc3MgbG9vcCBkdWUgdG8gbW9kaWZ5aW5nIGR1cmluZyBpdGVyYXRpb24sIHNlZSAjNjI4XG5cdFx0Ly8gVG8gcHJlc2VydmUgaW5zZXJ0aW9uIG9yZGVyIGluIGFsbCBjYXNlcyB3ZSB0aGVuIGNsZWFyIHRoZSBzZXRcblx0XHQvLyBBbmQgd2UgbGV0IGZpbmFsaXplUHJvcGVydHkga25vdyBpdCBuZWVkcyB0byByZS1hZGQgbm9uLWRyYWZ0IGNoaWxkcmVuIGJhY2sgdG8gdGhlIHRhcmdldFxuXHRcdGxldCByZXN1bHRFYWNoID0gcmVzdWx0XG5cdFx0bGV0IGlzU2V0ID0gZmFsc2Vcblx0XHRpZiAoc3RhdGUudHlwZV8gPT09IEFyY2hUeXBlLlNldCkge1xuXHRcdFx0cmVzdWx0RWFjaCA9IG5ldyBTZXQocmVzdWx0KVxuXHRcdFx0cmVzdWx0LmNsZWFyKClcblx0XHRcdGlzU2V0ID0gdHJ1ZVxuXHRcdH1cblx0XHRlYWNoKHJlc3VsdEVhY2gsIChrZXksIGNoaWxkVmFsdWUpID0+XG5cdFx0XHRmaW5hbGl6ZVByb3BlcnR5KHJvb3RTY29wZSwgc3RhdGUsIHJlc3VsdCwga2V5LCBjaGlsZFZhbHVlLCBwYXRoLCBpc1NldClcblx0XHQpXG5cdFx0Ly8gZXZlcnl0aGluZyBpbnNpZGUgaXMgZnJvemVuLCB3ZSBjYW4gZnJlZXplIGhlcmVcblx0XHRtYXliZUZyZWV6ZShyb290U2NvcGUsIHJlc3VsdCwgZmFsc2UpXG5cdFx0Ly8gZmlyc3QgdGltZSBmaW5hbGl6aW5nLCBsZXQncyBjcmVhdGUgdGhvc2UgcGF0Y2hlc1xuXHRcdGlmIChwYXRoICYmIHJvb3RTY29wZS5wYXRjaGVzXykge1xuXHRcdFx0Z2V0UGx1Z2luKFwiUGF0Y2hlc1wiKS5nZW5lcmF0ZVBhdGNoZXNfKFxuXHRcdFx0XHRzdGF0ZSxcblx0XHRcdFx0cGF0aCxcblx0XHRcdFx0cm9vdFNjb3BlLnBhdGNoZXNfLFxuXHRcdFx0XHRyb290U2NvcGUuaW52ZXJzZVBhdGNoZXNfIVxuXHRcdFx0KVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gc3RhdGUuY29weV9cbn1cblxuZnVuY3Rpb24gZmluYWxpemVQcm9wZXJ0eShcblx0cm9vdFNjb3BlOiBJbW1lclNjb3BlLFxuXHRwYXJlbnRTdGF0ZTogdW5kZWZpbmVkIHwgSW1tZXJTdGF0ZSxcblx0dGFyZ2V0T2JqZWN0OiBhbnksXG5cdHByb3A6IHN0cmluZyB8IG51bWJlcixcblx0Y2hpbGRWYWx1ZTogYW55LFxuXHRyb290UGF0aD86IFBhdGNoUGF0aCxcblx0dGFyZ2V0SXNTZXQ/OiBib29sZWFuXG4pIHtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiBjaGlsZFZhbHVlID09PSB0YXJnZXRPYmplY3QpXG5cdFx0ZGllKDUpXG5cdGlmIChpc0RyYWZ0KGNoaWxkVmFsdWUpKSB7XG5cdFx0Y29uc3QgcGF0aCA9XG5cdFx0XHRyb290UGF0aCAmJlxuXHRcdFx0cGFyZW50U3RhdGUgJiZcblx0XHRcdHBhcmVudFN0YXRlIS50eXBlXyAhPT0gQXJjaFR5cGUuU2V0ICYmIC8vIFNldCBvYmplY3RzIGFyZSBhdG9taWMgc2luY2UgdGhleSBoYXZlIG5vIGtleXMuXG5cdFx0XHQhaGFzKChwYXJlbnRTdGF0ZSBhcyBFeGNsdWRlPEltbWVyU3RhdGUsIFNldFN0YXRlPikuYXNzaWduZWRfISwgcHJvcCkgLy8gU2tpcCBkZWVwIHBhdGNoZXMgZm9yIGFzc2lnbmVkIGtleXMuXG5cdFx0XHRcdD8gcm9vdFBhdGghLmNvbmNhdChwcm9wKVxuXHRcdFx0XHQ6IHVuZGVmaW5lZFxuXHRcdC8vIERyYWZ0cyBvd25lZCBieSBgc2NvcGVgIGFyZSBmaW5hbGl6ZWQgaGVyZS5cblx0XHRjb25zdCByZXMgPSBmaW5hbGl6ZShyb290U2NvcGUsIGNoaWxkVmFsdWUsIHBhdGgpXG5cdFx0c2V0KHRhcmdldE9iamVjdCwgcHJvcCwgcmVzKVxuXHRcdC8vIERyYWZ0cyBmcm9tIGFub3RoZXIgc2NvcGUgbXVzdCBwcmV2ZW50ZWQgdG8gYmUgZnJvemVuXG5cdFx0Ly8gaWYgd2UgZ290IGEgZHJhZnQgYmFjayBmcm9tIGZpbmFsaXplLCB3ZSdyZSBpbiBhIG5lc3RlZCBwcm9kdWNlIGFuZCBzaG91bGRuJ3QgZnJlZXplXG5cdFx0aWYgKGlzRHJhZnQocmVzKSkge1xuXHRcdFx0cm9vdFNjb3BlLmNhbkF1dG9GcmVlemVfID0gZmFsc2Vcblx0XHR9IGVsc2UgcmV0dXJuXG5cdH0gZWxzZSBpZiAodGFyZ2V0SXNTZXQpIHtcblx0XHR0YXJnZXRPYmplY3QuYWRkKGNoaWxkVmFsdWUpXG5cdH1cblx0Ly8gU2VhcmNoIG5ldyBvYmplY3RzIGZvciB1bmZpbmFsaXplZCBkcmFmdHMuIEZyb3plbiBvYmplY3RzIHNob3VsZCBuZXZlciBjb250YWluIGRyYWZ0cy5cblx0aWYgKGlzRHJhZnRhYmxlKGNoaWxkVmFsdWUpICYmICFpc0Zyb3plbihjaGlsZFZhbHVlKSkge1xuXHRcdGlmICghcm9vdFNjb3BlLmltbWVyXy5hdXRvRnJlZXplXyAmJiByb290U2NvcGUudW5maW5hbGl6ZWREcmFmdHNfIDwgMSkge1xuXHRcdFx0Ly8gb3B0aW1pemF0aW9uOiBpZiBhbiBvYmplY3QgaXMgbm90IGEgZHJhZnQsIGFuZCB3ZSBkb24ndCBoYXZlIHRvXG5cdFx0XHQvLyBkZWVwZnJlZXplIGV2ZXJ5dGhpbmcsIGFuZCB3ZSBhcmUgc3VyZSB0aGF0IG5vIGRyYWZ0cyBhcmUgbGVmdCBpbiB0aGUgcmVtYWluaW5nIG9iamVjdFxuXHRcdFx0Ly8gY2F1c2Ugd2Ugc2F3IGFuZCBmaW5hbGl6ZWQgYWxsIGRyYWZ0cyBhbHJlYWR5OyB3ZSBjYW4gc3RvcCB2aXNpdGluZyB0aGUgcmVzdCBvZiB0aGUgdHJlZS5cblx0XHRcdC8vIFRoaXMgYmVuZWZpdHMgZXNwZWNpYWxseSBhZGRpbmcgbGFyZ2UgZGF0YSB0cmVlJ3Mgd2l0aG91dCBmdXJ0aGVyIHByb2Nlc3NpbmcuXG5cdFx0XHQvLyBTZWUgYWRkLWRhdGEuanMgcGVyZiB0ZXN0XG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdFx0ZmluYWxpemUocm9vdFNjb3BlLCBjaGlsZFZhbHVlKVxuXHRcdC8vIGltbWVyIGRlZXAgZnJlZXplcyBwbGFpbiBvYmplY3RzLCBzbyBpZiB0aGVyZSBpcyBubyBwYXJlbnQgc3RhdGUsIHdlIGZyZWV6ZSBhcyB3ZWxsXG5cdFx0aWYgKCFwYXJlbnRTdGF0ZSB8fCAhcGFyZW50U3RhdGUuc2NvcGVfLnBhcmVudF8pXG5cdFx0XHRtYXliZUZyZWV6ZShyb290U2NvcGUsIGNoaWxkVmFsdWUpXG5cdH1cbn1cblxuZnVuY3Rpb24gbWF5YmVGcmVlemUoc2NvcGU6IEltbWVyU2NvcGUsIHZhbHVlOiBhbnksIGRlZXAgPSBmYWxzZSkge1xuXHQvLyB3ZSBuZXZlciBmcmVlemUgZm9yIGEgbm9uLXJvb3Qgc2NvcGU7IGFzIGl0IHdvdWxkIHByZXZlbnQgcHJ1bmluZyBmb3IgZHJhZnRzIGluc2lkZSB3cmFwcGluZyBvYmplY3RzXG5cdGlmICghc2NvcGUucGFyZW50XyAmJiBzY29wZS5pbW1lcl8uYXV0b0ZyZWV6ZV8gJiYgc2NvcGUuY2FuQXV0b0ZyZWV6ZV8pIHtcblx0XHRmcmVlemUodmFsdWUsIGRlZXApXG5cdH1cbn1cbiIsICJpbXBvcnQge1xuXHRlYWNoLFxuXHRoYXMsXG5cdGlzLFxuXHRpc0RyYWZ0YWJsZSxcblx0c2hhbGxvd0NvcHksXG5cdGxhdGVzdCxcblx0SW1tZXJCYXNlU3RhdGUsXG5cdEltbWVyU3RhdGUsXG5cdERyYWZ0ZWQsXG5cdEFueU9iamVjdCxcblx0QW55QXJyYXksXG5cdE9iamVjdGlzaCxcblx0Z2V0Q3VycmVudFNjb3BlLFxuXHRnZXRQcm90b3R5cGVPZixcblx0RFJBRlRfU1RBVEUsXG5cdGRpZSxcblx0Y3JlYXRlUHJveHksXG5cdEFyY2hUeXBlLFxuXHRJbW1lclNjb3BlXG59IGZyb20gXCIuLi9pbnRlcm5hbFwiXG5cbmludGVyZmFjZSBQcm94eUJhc2VTdGF0ZSBleHRlbmRzIEltbWVyQmFzZVN0YXRlIHtcblx0YXNzaWduZWRfOiB7XG5cdFx0W3Byb3BlcnR5OiBzdHJpbmddOiBib29sZWFuXG5cdH1cblx0cGFyZW50Xz86IEltbWVyU3RhdGVcblx0cmV2b2tlXygpOiB2b2lkXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJveHlPYmplY3RTdGF0ZSBleHRlbmRzIFByb3h5QmFzZVN0YXRlIHtcblx0dHlwZV86IEFyY2hUeXBlLk9iamVjdFxuXHRiYXNlXzogYW55XG5cdGNvcHlfOiBhbnlcblx0ZHJhZnRfOiBEcmFmdGVkPEFueU9iamVjdCwgUHJveHlPYmplY3RTdGF0ZT5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm94eUFycmF5U3RhdGUgZXh0ZW5kcyBQcm94eUJhc2VTdGF0ZSB7XG5cdHR5cGVfOiBBcmNoVHlwZS5BcnJheVxuXHRiYXNlXzogQW55QXJyYXlcblx0Y29weV86IEFueUFycmF5IHwgbnVsbFxuXHRkcmFmdF86IERyYWZ0ZWQ8QW55QXJyYXksIFByb3h5QXJyYXlTdGF0ZT5cbn1cblxudHlwZSBQcm94eVN0YXRlID0gUHJveHlPYmplY3RTdGF0ZSB8IFByb3h5QXJyYXlTdGF0ZVxuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgZHJhZnQgb2YgdGhlIGBiYXNlYCBvYmplY3QuXG4gKlxuICogVGhlIHNlY29uZCBhcmd1bWVudCBpcyB0aGUgcGFyZW50IGRyYWZ0LXN0YXRlICh1c2VkIGludGVybmFsbHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJveHlQcm94eTxUIGV4dGVuZHMgT2JqZWN0aXNoPihcblx0YmFzZTogVCxcblx0cGFyZW50PzogSW1tZXJTdGF0ZVxuKTogRHJhZnRlZDxULCBQcm94eVN0YXRlPiB7XG5cdGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5KGJhc2UpXG5cdGNvbnN0IHN0YXRlOiBQcm94eVN0YXRlID0ge1xuXHRcdHR5cGVfOiBpc0FycmF5ID8gQXJjaFR5cGUuQXJyYXkgOiAoQXJjaFR5cGUuT2JqZWN0IGFzIGFueSksXG5cdFx0Ly8gVHJhY2sgd2hpY2ggcHJvZHVjZSBjYWxsIHRoaXMgaXMgYXNzb2NpYXRlZCB3aXRoLlxuXHRcdHNjb3BlXzogcGFyZW50ID8gcGFyZW50LnNjb3BlXyA6IGdldEN1cnJlbnRTY29wZSgpISxcblx0XHQvLyBUcnVlIGZvciBib3RoIHNoYWxsb3cgYW5kIGRlZXAgY2hhbmdlcy5cblx0XHRtb2RpZmllZF86IGZhbHNlLFxuXHRcdC8vIFVzZWQgZHVyaW5nIGZpbmFsaXphdGlvbi5cblx0XHRmaW5hbGl6ZWRfOiBmYWxzZSxcblx0XHQvLyBUcmFjayB3aGljaCBwcm9wZXJ0aWVzIGhhdmUgYmVlbiBhc3NpZ25lZCAodHJ1ZSkgb3IgZGVsZXRlZCAoZmFsc2UpLlxuXHRcdGFzc2lnbmVkXzoge30sXG5cdFx0Ly8gVGhlIHBhcmVudCBkcmFmdCBzdGF0ZS5cblx0XHRwYXJlbnRfOiBwYXJlbnQsXG5cdFx0Ly8gVGhlIGJhc2Ugc3RhdGUuXG5cdFx0YmFzZV86IGJhc2UsXG5cdFx0Ly8gVGhlIGJhc2UgcHJveHkuXG5cdFx0ZHJhZnRfOiBudWxsIGFzIGFueSwgLy8gc2V0IGJlbG93XG5cdFx0Ly8gVGhlIGJhc2UgY29weSB3aXRoIGFueSB1cGRhdGVkIHZhbHVlcy5cblx0XHRjb3B5XzogbnVsbCxcblx0XHQvLyBDYWxsZWQgYnkgdGhlIGBwcm9kdWNlYCBmdW5jdGlvbi5cblx0XHRyZXZva2VfOiBudWxsIGFzIGFueSxcblx0XHRpc01hbnVhbF86IGZhbHNlXG5cdH1cblxuXHQvLyB0aGUgdHJhcHMgbXVzdCB0YXJnZXQgc29tZXRoaW5nLCBhIGJpdCBsaWtlIHRoZSAncmVhbCcgYmFzZS5cblx0Ly8gYnV0IGFsc28sIHdlIG5lZWQgdG8gYmUgYWJsZSB0byBkZXRlcm1pbmUgZnJvbSB0aGUgdGFyZ2V0IHdoYXQgdGhlIHJlbGV2YW50IHN0YXRlIGlzXG5cdC8vICh0byBhdm9pZCBjcmVhdGluZyB0cmFwcyBwZXIgaW5zdGFuY2UgdG8gY2FwdHVyZSB0aGUgc3RhdGUgaW4gY2xvc3VyZSxcblx0Ly8gYW5kIHRvIGF2b2lkIGNyZWF0aW5nIHdlaXJkIGhpZGRlbiBwcm9wZXJ0aWVzIGFzIHdlbGwpXG5cdC8vIFNvIHRoZSB0cmljayBpcyB0byB1c2UgJ3N0YXRlJyBhcyB0aGUgYWN0dWFsICd0YXJnZXQnISAoYW5kIG1ha2Ugc3VyZSB3ZSBpbnRlcmNlcHQgZXZlcnl0aGluZylcblx0Ly8gTm90ZSB0aGF0IGluIHRoZSBjYXNlIG9mIGFuIGFycmF5LCB3ZSBwdXQgdGhlIHN0YXRlIGluIGFuIGFycmF5IHRvIGhhdmUgYmV0dGVyIFJlZmxlY3QgZGVmYXVsdHMgb290YlxuXHRsZXQgdGFyZ2V0OiBUID0gc3RhdGUgYXMgYW55XG5cdGxldCB0cmFwczogUHJveHlIYW5kbGVyPG9iamVjdCB8IEFycmF5PGFueT4+ID0gb2JqZWN0VHJhcHNcblx0aWYgKGlzQXJyYXkpIHtcblx0XHR0YXJnZXQgPSBbc3RhdGVdIGFzIGFueVxuXHRcdHRyYXBzID0gYXJyYXlUcmFwc1xuXHR9XG5cblx0Y29uc3Qge3Jldm9rZSwgcHJveHl9ID0gUHJveHkucmV2b2NhYmxlKHRhcmdldCwgdHJhcHMpXG5cdHN0YXRlLmRyYWZ0XyA9IHByb3h5IGFzIGFueVxuXHRzdGF0ZS5yZXZva2VfID0gcmV2b2tlXG5cdHJldHVybiBwcm94eSBhcyBhbnlcbn1cblxuLyoqXG4gKiBPYmplY3QgZHJhZnRzXG4gKi9cbmV4cG9ydCBjb25zdCBvYmplY3RUcmFwczogUHJveHlIYW5kbGVyPFByb3h5U3RhdGU+ID0ge1xuXHRnZXQoc3RhdGUsIHByb3ApIHtcblx0XHRpZiAocHJvcCA9PT0gRFJBRlRfU1RBVEUpIHJldHVybiBzdGF0ZVxuXG5cdFx0Y29uc3Qgc291cmNlID0gbGF0ZXN0KHN0YXRlKVxuXHRcdGlmICghaGFzKHNvdXJjZSwgcHJvcCkpIHtcblx0XHRcdC8vIG5vbi1leGlzdGluZyBvciBub24tb3duIHByb3BlcnR5Li4uXG5cdFx0XHRyZXR1cm4gcmVhZFByb3BGcm9tUHJvdG8oc3RhdGUsIHNvdXJjZSwgcHJvcClcblx0XHR9XG5cdFx0Y29uc3QgdmFsdWUgPSBzb3VyY2VbcHJvcF1cblx0XHRpZiAoc3RhdGUuZmluYWxpemVkXyB8fCAhaXNEcmFmdGFibGUodmFsdWUpKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWVcblx0XHR9XG5cdFx0Ly8gQ2hlY2sgZm9yIGV4aXN0aW5nIGRyYWZ0IGluIG1vZGlmaWVkIHN0YXRlLlxuXHRcdC8vIEFzc2lnbmVkIHZhbHVlcyBhcmUgbmV2ZXIgZHJhZnRlZC4gVGhpcyBjYXRjaGVzIGFueSBkcmFmdHMgd2UgY3JlYXRlZCwgdG9vLlxuXHRcdGlmICh2YWx1ZSA9PT0gcGVlayhzdGF0ZS5iYXNlXywgcHJvcCkpIHtcblx0XHRcdHByZXBhcmVDb3B5KHN0YXRlKVxuXHRcdFx0cmV0dXJuIChzdGF0ZS5jb3B5XyFbcHJvcCBhcyBhbnldID0gY3JlYXRlUHJveHkodmFsdWUsIHN0YXRlKSlcblx0XHR9XG5cdFx0cmV0dXJuIHZhbHVlXG5cdH0sXG5cdGhhcyhzdGF0ZSwgcHJvcCkge1xuXHRcdHJldHVybiBwcm9wIGluIGxhdGVzdChzdGF0ZSlcblx0fSxcblx0b3duS2V5cyhzdGF0ZSkge1xuXHRcdHJldHVybiBSZWZsZWN0Lm93bktleXMobGF0ZXN0KHN0YXRlKSlcblx0fSxcblx0c2V0KFxuXHRcdHN0YXRlOiBQcm94eU9iamVjdFN0YXRlLFxuXHRcdHByb3A6IHN0cmluZyAvKiBzdHJpY3RseSBub3QsIGJ1dCBoZWxwcyBUUyAqLyxcblx0XHR2YWx1ZVxuXHQpIHtcblx0XHRjb25zdCBkZXNjID0gZ2V0RGVzY3JpcHRvckZyb21Qcm90byhsYXRlc3Qoc3RhdGUpLCBwcm9wKVxuXHRcdGlmIChkZXNjPy5zZXQpIHtcblx0XHRcdC8vIHNwZWNpYWwgY2FzZTogaWYgdGhpcyB3cml0ZSBpcyBjYXB0dXJlZCBieSBhIHNldHRlciwgd2UgaGF2ZVxuXHRcdFx0Ly8gdG8gdHJpZ2dlciBpdCB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcblx0XHRcdGRlc2Muc2V0LmNhbGwoc3RhdGUuZHJhZnRfLCB2YWx1ZSlcblx0XHRcdHJldHVybiB0cnVlXG5cdFx0fVxuXHRcdGlmICghc3RhdGUubW9kaWZpZWRfKSB7XG5cdFx0XHQvLyB0aGUgbGFzdCBjaGVjayBpcyBiZWNhdXNlIHdlIG5lZWQgdG8gYmUgYWJsZSB0byBkaXN0aW5ndWlzaCBzZXR0aW5nIGEgbm9uLWV4aXN0aW5nIHRvIHVuZGVmaW5lZCAod2hpY2ggaXMgYSBjaGFuZ2UpXG5cdFx0XHQvLyBmcm9tIHNldHRpbmcgYW4gZXhpc3RpbmcgcHJvcGVydHkgd2l0aCB2YWx1ZSB1bmRlZmluZWQgdG8gdW5kZWZpbmVkICh3aGljaCBpcyBub3QgYSBjaGFuZ2UpXG5cdFx0XHRjb25zdCBjdXJyZW50ID0gcGVlayhsYXRlc3Qoc3RhdGUpLCBwcm9wKVxuXHRcdFx0Ly8gc3BlY2lhbCBjYXNlLCBpZiB3ZSBhc3NpZ25pbmcgdGhlIG9yaWdpbmFsIHZhbHVlIHRvIGEgZHJhZnQsIHdlIGNhbiBpZ25vcmUgdGhlIGFzc2lnbm1lbnRcblx0XHRcdGNvbnN0IGN1cnJlbnRTdGF0ZTogUHJveHlPYmplY3RTdGF0ZSA9IGN1cnJlbnQ/LltEUkFGVF9TVEFURV1cblx0XHRcdGlmIChjdXJyZW50U3RhdGUgJiYgY3VycmVudFN0YXRlLmJhc2VfID09PSB2YWx1ZSkge1xuXHRcdFx0XHRzdGF0ZS5jb3B5XyFbcHJvcF0gPSB2YWx1ZVxuXHRcdFx0XHRzdGF0ZS5hc3NpZ25lZF9bcHJvcF0gPSBmYWxzZVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdFx0fVxuXHRcdFx0aWYgKGlzKHZhbHVlLCBjdXJyZW50KSAmJiAodmFsdWUgIT09IHVuZGVmaW5lZCB8fCBoYXMoc3RhdGUuYmFzZV8sIHByb3ApKSlcblx0XHRcdFx0cmV0dXJuIHRydWVcblx0XHRcdHByZXBhcmVDb3B5KHN0YXRlKVxuXHRcdFx0bWFya0NoYW5nZWQoc3RhdGUpXG5cdFx0fVxuXG5cdFx0aWYgKFxuXHRcdFx0KHN0YXRlLmNvcHlfIVtwcm9wXSA9PT0gdmFsdWUgJiZcblx0XHRcdFx0Ly8gc3BlY2lhbCBjYXNlOiBoYW5kbGUgbmV3IHByb3BzIHdpdGggdmFsdWUgJ3VuZGVmaW5lZCdcblx0XHRcdFx0KHZhbHVlICE9PSB1bmRlZmluZWQgfHwgcHJvcCBpbiBzdGF0ZS5jb3B5XykpIHx8XG5cdFx0XHQvLyBzcGVjaWFsIGNhc2U6IE5hTlxuXHRcdFx0KE51bWJlci5pc05hTih2YWx1ZSkgJiYgTnVtYmVyLmlzTmFOKHN0YXRlLmNvcHlfIVtwcm9wXSkpXG5cdFx0KVxuXHRcdFx0cmV0dXJuIHRydWVcblxuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRzdGF0ZS5jb3B5XyFbcHJvcF0gPSB2YWx1ZVxuXHRcdHN0YXRlLmFzc2lnbmVkX1twcm9wXSA9IHRydWVcblx0XHRyZXR1cm4gdHJ1ZVxuXHR9LFxuXHRkZWxldGVQcm9wZXJ0eShzdGF0ZSwgcHJvcDogc3RyaW5nKSB7XG5cdFx0Ly8gVGhlIGB1bmRlZmluZWRgIGNoZWNrIGlzIGEgZmFzdCBwYXRoIGZvciBwcmUtZXhpc3Rpbmcga2V5cy5cblx0XHRpZiAocGVlayhzdGF0ZS5iYXNlXywgcHJvcCkgIT09IHVuZGVmaW5lZCB8fCBwcm9wIGluIHN0YXRlLmJhc2VfKSB7XG5cdFx0XHRzdGF0ZS5hc3NpZ25lZF9bcHJvcF0gPSBmYWxzZVxuXHRcdFx0cHJlcGFyZUNvcHkoc3RhdGUpXG5cdFx0XHRtYXJrQ2hhbmdlZChzdGF0ZSlcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gaWYgYW4gb3JpZ2luYWxseSBub3QgYXNzaWduZWQgcHJvcGVydHkgd2FzIGRlbGV0ZWRcblx0XHRcdGRlbGV0ZSBzdGF0ZS5hc3NpZ25lZF9bcHJvcF1cblx0XHR9XG5cdFx0aWYgKHN0YXRlLmNvcHlfKSB7XG5cdFx0XHRkZWxldGUgc3RhdGUuY29weV9bcHJvcF1cblx0XHR9XG5cdFx0cmV0dXJuIHRydWVcblx0fSxcblx0Ly8gTm90ZTogV2UgbmV2ZXIgY29lcmNlIGBkZXNjLnZhbHVlYCBpbnRvIGFuIEltbWVyIGRyYWZ0LCBiZWNhdXNlIHdlIGNhbid0IG1ha2Vcblx0Ly8gdGhlIHNhbWUgZ3VhcmFudGVlIGluIEVTNSBtb2RlLlxuXHRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc3RhdGUsIHByb3ApIHtcblx0XHRjb25zdCBvd25lciA9IGxhdGVzdChzdGF0ZSlcblx0XHRjb25zdCBkZXNjID0gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob3duZXIsIHByb3ApXG5cdFx0aWYgKCFkZXNjKSByZXR1cm4gZGVzY1xuXHRcdHJldHVybiB7XG5cdFx0XHR3cml0YWJsZTogdHJ1ZSxcblx0XHRcdGNvbmZpZ3VyYWJsZTogc3RhdGUudHlwZV8gIT09IEFyY2hUeXBlLkFycmF5IHx8IHByb3AgIT09IFwibGVuZ3RoXCIsXG5cdFx0XHRlbnVtZXJhYmxlOiBkZXNjLmVudW1lcmFibGUsXG5cdFx0XHR2YWx1ZTogb3duZXJbcHJvcF1cblx0XHR9XG5cdH0sXG5cdGRlZmluZVByb3BlcnR5KCkge1xuXHRcdGRpZSgxMSlcblx0fSxcblx0Z2V0UHJvdG90eXBlT2Yoc3RhdGUpIHtcblx0XHRyZXR1cm4gZ2V0UHJvdG90eXBlT2Yoc3RhdGUuYmFzZV8pXG5cdH0sXG5cdHNldFByb3RvdHlwZU9mKCkge1xuXHRcdGRpZSgxMilcblx0fVxufVxuXG4vKipcbiAqIEFycmF5IGRyYWZ0c1xuICovXG5cbmNvbnN0IGFycmF5VHJhcHM6IFByb3h5SGFuZGxlcjxbUHJveHlBcnJheVN0YXRlXT4gPSB7fVxuZWFjaChvYmplY3RUcmFwcywgKGtleSwgZm4pID0+IHtcblx0Ly8gQHRzLWlnbm9yZVxuXHRhcnJheVRyYXBzW2tleV0gPSBmdW5jdGlvbigpIHtcblx0XHRhcmd1bWVudHNbMF0gPSBhcmd1bWVudHNbMF1bMF1cblx0XHRyZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuXHR9XG59KVxuYXJyYXlUcmFwcy5kZWxldGVQcm9wZXJ0eSA9IGZ1bmN0aW9uKHN0YXRlLCBwcm9wKSB7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgaXNOYU4ocGFyc2VJbnQocHJvcCBhcyBhbnkpKSlcblx0XHRkaWUoMTMpXG5cdC8vIEB0cy1pZ25vcmVcblx0cmV0dXJuIGFycmF5VHJhcHMuc2V0IS5jYWxsKHRoaXMsIHN0YXRlLCBwcm9wLCB1bmRlZmluZWQpXG59XG5hcnJheVRyYXBzLnNldCA9IGZ1bmN0aW9uKHN0YXRlLCBwcm9wLCB2YWx1ZSkge1xuXHRpZiAoXG5cdFx0cHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmXG5cdFx0cHJvcCAhPT0gXCJsZW5ndGhcIiAmJlxuXHRcdGlzTmFOKHBhcnNlSW50KHByb3AgYXMgYW55KSlcblx0KVxuXHRcdGRpZSgxNClcblx0cmV0dXJuIG9iamVjdFRyYXBzLnNldCEuY2FsbCh0aGlzLCBzdGF0ZVswXSwgcHJvcCwgdmFsdWUsIHN0YXRlWzBdKVxufVxuXG4vLyBBY2Nlc3MgYSBwcm9wZXJ0eSB3aXRob3V0IGNyZWF0aW5nIGFuIEltbWVyIGRyYWZ0LlxuZnVuY3Rpb24gcGVlayhkcmFmdDogRHJhZnRlZCwgcHJvcDogUHJvcGVydHlLZXkpIHtcblx0Y29uc3Qgc3RhdGUgPSBkcmFmdFtEUkFGVF9TVEFURV1cblx0Y29uc3Qgc291cmNlID0gc3RhdGUgPyBsYXRlc3Qoc3RhdGUpIDogZHJhZnRcblx0cmV0dXJuIHNvdXJjZVtwcm9wXVxufVxuXG5mdW5jdGlvbiByZWFkUHJvcEZyb21Qcm90byhzdGF0ZTogSW1tZXJTdGF0ZSwgc291cmNlOiBhbnksIHByb3A6IFByb3BlcnR5S2V5KSB7XG5cdGNvbnN0IGRlc2MgPSBnZXREZXNjcmlwdG9yRnJvbVByb3RvKHNvdXJjZSwgcHJvcClcblx0cmV0dXJuIGRlc2Ncblx0XHQ/IGB2YWx1ZWAgaW4gZGVzY1xuXHRcdFx0PyBkZXNjLnZhbHVlXG5cdFx0XHQ6IC8vIFRoaXMgaXMgYSB2ZXJ5IHNwZWNpYWwgY2FzZSwgaWYgdGhlIHByb3AgaXMgYSBnZXR0ZXIgZGVmaW5lZCBieSB0aGVcblx0XHRcdCAgLy8gcHJvdG90eXBlLCB3ZSBzaG91bGQgaW52b2tlIGl0IHdpdGggdGhlIGRyYWZ0IGFzIGNvbnRleHQhXG5cdFx0XHQgIGRlc2MuZ2V0Py5jYWxsKHN0YXRlLmRyYWZ0Xylcblx0XHQ6IHVuZGVmaW5lZFxufVxuXG5mdW5jdGlvbiBnZXREZXNjcmlwdG9yRnJvbVByb3RvKFxuXHRzb3VyY2U6IGFueSxcblx0cHJvcDogUHJvcGVydHlLZXlcbik6IFByb3BlcnR5RGVzY3JpcHRvciB8IHVuZGVmaW5lZCB7XG5cdC8vICdpbicgY2hlY2tzIHByb3RvIVxuXHRpZiAoIShwcm9wIGluIHNvdXJjZSkpIHJldHVybiB1bmRlZmluZWRcblx0bGV0IHByb3RvID0gZ2V0UHJvdG90eXBlT2Yoc291cmNlKVxuXHR3aGlsZSAocHJvdG8pIHtcblx0XHRjb25zdCBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90bywgcHJvcClcblx0XHRpZiAoZGVzYykgcmV0dXJuIGRlc2Ncblx0XHRwcm90byA9IGdldFByb3RvdHlwZU9mKHByb3RvKVxuXHR9XG5cdHJldHVybiB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hcmtDaGFuZ2VkKHN0YXRlOiBJbW1lclN0YXRlKSB7XG5cdGlmICghc3RhdGUubW9kaWZpZWRfKSB7XG5cdFx0c3RhdGUubW9kaWZpZWRfID0gdHJ1ZVxuXHRcdGlmIChzdGF0ZS5wYXJlbnRfKSB7XG5cdFx0XHRtYXJrQ2hhbmdlZChzdGF0ZS5wYXJlbnRfKVxuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZUNvcHkoc3RhdGU6IHtcblx0YmFzZV86IGFueVxuXHRjb3B5XzogYW55XG5cdHNjb3BlXzogSW1tZXJTY29wZVxufSkge1xuXHRpZiAoIXN0YXRlLmNvcHlfKSB7XG5cdFx0c3RhdGUuY29weV8gPSBzaGFsbG93Q29weShcblx0XHRcdHN0YXRlLmJhc2VfLFxuXHRcdFx0c3RhdGUuc2NvcGVfLmltbWVyXy51c2VTdHJpY3RTaGFsbG93Q29weV9cblx0XHQpXG5cdH1cbn1cbiIsICJpbXBvcnQge1xuXHRJUHJvZHVjZVdpdGhQYXRjaGVzLFxuXHRJUHJvZHVjZSxcblx0SW1tZXJTdGF0ZSxcblx0RHJhZnRlZCxcblx0aXNEcmFmdGFibGUsXG5cdHByb2Nlc3NSZXN1bHQsXG5cdFBhdGNoLFxuXHRPYmplY3Rpc2gsXG5cdERSQUZUX1NUQVRFLFxuXHREcmFmdCxcblx0UGF0Y2hMaXN0ZW5lcixcblx0aXNEcmFmdCxcblx0aXNNYXAsXG5cdGlzU2V0LFxuXHRjcmVhdGVQcm94eVByb3h5LFxuXHRnZXRQbHVnaW4sXG5cdGRpZSxcblx0ZW50ZXJTY29wZSxcblx0cmV2b2tlU2NvcGUsXG5cdGxlYXZlU2NvcGUsXG5cdHVzZVBhdGNoZXNJblNjb3BlLFxuXHRnZXRDdXJyZW50U2NvcGUsXG5cdE5PVEhJTkcsXG5cdGZyZWV6ZSxcblx0Y3VycmVudFxufSBmcm9tIFwiLi4vaW50ZXJuYWxcIlxuXG5pbnRlcmZhY2UgUHJvZHVjZXJzRm5zIHtcblx0cHJvZHVjZTogSVByb2R1Y2Vcblx0cHJvZHVjZVdpdGhQYXRjaGVzOiBJUHJvZHVjZVdpdGhQYXRjaGVzXG59XG5cbmV4cG9ydCBjbGFzcyBJbW1lciBpbXBsZW1lbnRzIFByb2R1Y2Vyc0ZucyB7XG5cdGF1dG9GcmVlemVfOiBib29sZWFuID0gdHJ1ZVxuXHR1c2VTdHJpY3RTaGFsbG93Q29weV86IGJvb2xlYW4gPSBmYWxzZVxuXG5cdGNvbnN0cnVjdG9yKGNvbmZpZz86IHthdXRvRnJlZXplPzogYm9vbGVhbjsgdXNlU3RyaWN0U2hhbGxvd0NvcHk/OiBib29sZWFufSkge1xuXHRcdGlmICh0eXBlb2YgY29uZmlnPy5hdXRvRnJlZXplID09PSBcImJvb2xlYW5cIilcblx0XHRcdHRoaXMuc2V0QXV0b0ZyZWV6ZShjb25maWchLmF1dG9GcmVlemUpXG5cdFx0aWYgKHR5cGVvZiBjb25maWc/LnVzZVN0cmljdFNoYWxsb3dDb3B5ID09PSBcImJvb2xlYW5cIilcblx0XHRcdHRoaXMuc2V0VXNlU3RyaWN0U2hhbGxvd0NvcHkoY29uZmlnIS51c2VTdHJpY3RTaGFsbG93Q29weSlcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgYHByb2R1Y2VgIGZ1bmN0aW9uIHRha2VzIGEgdmFsdWUgYW5kIGEgXCJyZWNpcGUgZnVuY3Rpb25cIiAod2hvc2Vcblx0ICogcmV0dXJuIHZhbHVlIG9mdGVuIGRlcGVuZHMgb24gdGhlIGJhc2Ugc3RhdGUpLiBUaGUgcmVjaXBlIGZ1bmN0aW9uIGlzXG5cdCAqIGZyZWUgdG8gbXV0YXRlIGl0cyBmaXJzdCBhcmd1bWVudCBob3dldmVyIGl0IHdhbnRzLiBBbGwgbXV0YXRpb25zIGFyZVxuXHQgKiBvbmx5IGV2ZXIgYXBwbGllZCB0byBhIF9fY29weV9fIG9mIHRoZSBiYXNlIHN0YXRlLlxuXHQgKlxuXHQgKiBQYXNzIG9ubHkgYSBmdW5jdGlvbiB0byBjcmVhdGUgYSBcImN1cnJpZWQgcHJvZHVjZXJcIiB3aGljaCByZWxpZXZlcyB5b3Vcblx0ICogZnJvbSBwYXNzaW5nIHRoZSByZWNpcGUgZnVuY3Rpb24gZXZlcnkgdGltZS5cblx0ICpcblx0ICogT25seSBwbGFpbiBvYmplY3RzIGFuZCBhcnJheXMgYXJlIG1hZGUgbXV0YWJsZS4gQWxsIG90aGVyIG9iamVjdHMgYXJlXG5cdCAqIGNvbnNpZGVyZWQgdW5jb3B5YWJsZS5cblx0ICpcblx0ICogTm90ZTogVGhpcyBmdW5jdGlvbiBpcyBfX2JvdW5kX18gdG8gaXRzIGBJbW1lcmAgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7YW55fSBiYXNlIC0gdGhlIGluaXRpYWwgc3RhdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gcmVjaXBlIC0gZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHByb3h5IG9mIHRoZSBiYXNlIHN0YXRlIGFzIGZpcnN0IGFyZ3VtZW50IGFuZCB3aGljaCBjYW4gYmUgZnJlZWx5IG1vZGlmaWVkXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHBhdGNoTGlzdGVuZXIgLSBvcHRpb25hbCBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdpdGggYWxsIHRoZSBwYXRjaGVzIHByb2R1Y2VkIGhlcmVcblx0ICogQHJldHVybnMge2FueX0gYSBuZXcgc3RhdGUsIG9yIHRoZSBpbml0aWFsIHN0YXRlIGlmIG5vdGhpbmcgd2FzIG1vZGlmaWVkXG5cdCAqL1xuXHRwcm9kdWNlOiBJUHJvZHVjZSA9IChiYXNlOiBhbnksIHJlY2lwZT86IGFueSwgcGF0Y2hMaXN0ZW5lcj86IGFueSkgPT4ge1xuXHRcdC8vIGN1cnJpZWQgaW52b2NhdGlvblxuXHRcdGlmICh0eXBlb2YgYmFzZSA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiByZWNpcGUgIT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0Y29uc3QgZGVmYXVsdEJhc2UgPSByZWNpcGVcblx0XHRcdHJlY2lwZSA9IGJhc2VcblxuXHRcdFx0Y29uc3Qgc2VsZiA9IHRoaXNcblx0XHRcdHJldHVybiBmdW5jdGlvbiBjdXJyaWVkUHJvZHVjZShcblx0XHRcdFx0dGhpczogYW55LFxuXHRcdFx0XHRiYXNlID0gZGVmYXVsdEJhc2UsXG5cdFx0XHRcdC4uLmFyZ3M6IGFueVtdXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuIHNlbGYucHJvZHVjZShiYXNlLCAoZHJhZnQ6IERyYWZ0ZWQpID0+IHJlY2lwZS5jYWxsKHRoaXMsIGRyYWZ0LCAuLi5hcmdzKSkgLy8gcHJldHRpZXItaWdub3JlXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHR5cGVvZiByZWNpcGUgIT09IFwiZnVuY3Rpb25cIikgZGllKDYpXG5cdFx0aWYgKHBhdGNoTGlzdGVuZXIgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcGF0Y2hMaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKVxuXHRcdFx0ZGllKDcpXG5cblx0XHRsZXQgcmVzdWx0XG5cblx0XHQvLyBPbmx5IHBsYWluIG9iamVjdHMsIGFycmF5cywgYW5kIFwiaW1tZXJhYmxlIGNsYXNzZXNcIiBhcmUgZHJhZnRlZC5cblx0XHRpZiAoaXNEcmFmdGFibGUoYmFzZSkpIHtcblx0XHRcdGNvbnN0IHNjb3BlID0gZW50ZXJTY29wZSh0aGlzKVxuXHRcdFx0Y29uc3QgcHJveHkgPSBjcmVhdGVQcm94eShiYXNlLCB1bmRlZmluZWQpXG5cdFx0XHRsZXQgaGFzRXJyb3IgPSB0cnVlXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRyZXN1bHQgPSByZWNpcGUocHJveHkpXG5cdFx0XHRcdGhhc0Vycm9yID0gZmFsc2Vcblx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdC8vIGZpbmFsbHkgaW5zdGVhZCBvZiBjYXRjaCArIHJldGhyb3cgYmV0dGVyIHByZXNlcnZlcyBvcmlnaW5hbCBzdGFja1xuXHRcdFx0XHRpZiAoaGFzRXJyb3IpIHJldm9rZVNjb3BlKHNjb3BlKVxuXHRcdFx0XHRlbHNlIGxlYXZlU2NvcGUoc2NvcGUpXG5cdFx0XHR9XG5cdFx0XHR1c2VQYXRjaGVzSW5TY29wZShzY29wZSwgcGF0Y2hMaXN0ZW5lcilcblx0XHRcdHJldHVybiBwcm9jZXNzUmVzdWx0KHJlc3VsdCwgc2NvcGUpXG5cdFx0fSBlbHNlIGlmICghYmFzZSB8fCB0eXBlb2YgYmFzZSAhPT0gXCJvYmplY3RcIikge1xuXHRcdFx0cmVzdWx0ID0gcmVjaXBlKGJhc2UpXG5cdFx0XHRpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHJlc3VsdCA9IGJhc2Vcblx0XHRcdGlmIChyZXN1bHQgPT09IE5PVEhJTkcpIHJlc3VsdCA9IHVuZGVmaW5lZFxuXHRcdFx0aWYgKHRoaXMuYXV0b0ZyZWV6ZV8pIGZyZWV6ZShyZXN1bHQsIHRydWUpXG5cdFx0XHRpZiAocGF0Y2hMaXN0ZW5lcikge1xuXHRcdFx0XHRjb25zdCBwOiBQYXRjaFtdID0gW11cblx0XHRcdFx0Y29uc3QgaXA6IFBhdGNoW10gPSBbXVxuXHRcdFx0XHRnZXRQbHVnaW4oXCJQYXRjaGVzXCIpLmdlbmVyYXRlUmVwbGFjZW1lbnRQYXRjaGVzXyhiYXNlLCByZXN1bHQsIHAsIGlwKVxuXHRcdFx0XHRwYXRjaExpc3RlbmVyKHAsIGlwKVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdFxuXHRcdH0gZWxzZSBkaWUoMSwgYmFzZSlcblx0fVxuXG5cdHByb2R1Y2VXaXRoUGF0Y2hlczogSVByb2R1Y2VXaXRoUGF0Y2hlcyA9IChiYXNlOiBhbnksIHJlY2lwZT86IGFueSk6IGFueSA9PiB7XG5cdFx0Ly8gY3VycmllZCBpbnZvY2F0aW9uXG5cdFx0aWYgKHR5cGVvZiBiYXNlID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdHJldHVybiAoc3RhdGU6IGFueSwgLi4uYXJnczogYW55W10pID0+XG5cdFx0XHRcdHRoaXMucHJvZHVjZVdpdGhQYXRjaGVzKHN0YXRlLCAoZHJhZnQ6IGFueSkgPT4gYmFzZShkcmFmdCwgLi4uYXJncykpXG5cdFx0fVxuXG5cdFx0bGV0IHBhdGNoZXM6IFBhdGNoW10sIGludmVyc2VQYXRjaGVzOiBQYXRjaFtdXG5cdFx0Y29uc3QgcmVzdWx0ID0gdGhpcy5wcm9kdWNlKGJhc2UsIHJlY2lwZSwgKHA6IFBhdGNoW10sIGlwOiBQYXRjaFtdKSA9PiB7XG5cdFx0XHRwYXRjaGVzID0gcFxuXHRcdFx0aW52ZXJzZVBhdGNoZXMgPSBpcFxuXHRcdH0pXG5cdFx0cmV0dXJuIFtyZXN1bHQsIHBhdGNoZXMhLCBpbnZlcnNlUGF0Y2hlcyFdXG5cdH1cblxuXHRjcmVhdGVEcmFmdDxUIGV4dGVuZHMgT2JqZWN0aXNoPihiYXNlOiBUKTogRHJhZnQ8VD4ge1xuXHRcdGlmICghaXNEcmFmdGFibGUoYmFzZSkpIGRpZSg4KVxuXHRcdGlmIChpc0RyYWZ0KGJhc2UpKSBiYXNlID0gY3VycmVudChiYXNlKVxuXHRcdGNvbnN0IHNjb3BlID0gZW50ZXJTY29wZSh0aGlzKVxuXHRcdGNvbnN0IHByb3h5ID0gY3JlYXRlUHJveHkoYmFzZSwgdW5kZWZpbmVkKVxuXHRcdHByb3h5W0RSQUZUX1NUQVRFXS5pc01hbnVhbF8gPSB0cnVlXG5cdFx0bGVhdmVTY29wZShzY29wZSlcblx0XHRyZXR1cm4gcHJveHkgYXMgYW55XG5cdH1cblxuXHRmaW5pc2hEcmFmdDxEIGV4dGVuZHMgRHJhZnQ8YW55Pj4oXG5cdFx0ZHJhZnQ6IEQsXG5cdFx0cGF0Y2hMaXN0ZW5lcj86IFBhdGNoTGlzdGVuZXJcblx0KTogRCBleHRlbmRzIERyYWZ0PGluZmVyIFQ+ID8gVCA6IG5ldmVyIHtcblx0XHRjb25zdCBzdGF0ZTogSW1tZXJTdGF0ZSA9IGRyYWZ0ICYmIChkcmFmdCBhcyBhbnkpW0RSQUZUX1NUQVRFXVxuXHRcdGlmICghc3RhdGUgfHwgIXN0YXRlLmlzTWFudWFsXykgZGllKDkpXG5cdFx0Y29uc3Qge3Njb3BlXzogc2NvcGV9ID0gc3RhdGVcblx0XHR1c2VQYXRjaGVzSW5TY29wZShzY29wZSwgcGF0Y2hMaXN0ZW5lcilcblx0XHRyZXR1cm4gcHJvY2Vzc1Jlc3VsdCh1bmRlZmluZWQsIHNjb3BlKVxuXHR9XG5cblx0LyoqXG5cdCAqIFBhc3MgdHJ1ZSB0byBhdXRvbWF0aWNhbGx5IGZyZWV6ZSBhbGwgY29waWVzIGNyZWF0ZWQgYnkgSW1tZXIuXG5cdCAqXG5cdCAqIEJ5IGRlZmF1bHQsIGF1dG8tZnJlZXppbmcgaXMgZW5hYmxlZC5cblx0ICovXG5cdHNldEF1dG9GcmVlemUodmFsdWU6IGJvb2xlYW4pIHtcblx0XHR0aGlzLmF1dG9GcmVlemVfID0gdmFsdWVcblx0fVxuXG5cdC8qKlxuXHQgKiBQYXNzIHRydWUgdG8gZW5hYmxlIHN0cmljdCBzaGFsbG93IGNvcHkuXG5cdCAqXG5cdCAqIEJ5IGRlZmF1bHQsIGltbWVyIGRvZXMgbm90IGNvcHkgdGhlIG9iamVjdCBkZXNjcmlwdG9ycyBzdWNoIGFzIGdldHRlciwgc2V0dGVyIGFuZCBub24tZW51bXJhYmxlIHByb3BlcnRpZXMuXG5cdCAqL1xuXHRzZXRVc2VTdHJpY3RTaGFsbG93Q29weSh2YWx1ZTogYm9vbGVhbikge1xuXHRcdHRoaXMudXNlU3RyaWN0U2hhbGxvd0NvcHlfID0gdmFsdWVcblx0fVxuXG5cdGFwcGx5UGF0Y2hlczxUIGV4dGVuZHMgT2JqZWN0aXNoPihiYXNlOiBULCBwYXRjaGVzOiBQYXRjaFtdKTogVCB7XG5cdFx0Ly8gSWYgYSBwYXRjaCByZXBsYWNlcyB0aGUgZW50aXJlIHN0YXRlLCB0YWtlIHRoYXQgcmVwbGFjZW1lbnQgYXMgYmFzZVxuXHRcdC8vIGJlZm9yZSBhcHBseWluZyBwYXRjaGVzXG5cdFx0bGV0IGk6IG51bWJlclxuXHRcdGZvciAoaSA9IHBhdGNoZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdGNvbnN0IHBhdGNoID0gcGF0Y2hlc1tpXVxuXHRcdFx0aWYgKHBhdGNoLnBhdGgubGVuZ3RoID09PSAwICYmIHBhdGNoLm9wID09PSBcInJlcGxhY2VcIikge1xuXHRcdFx0XHRiYXNlID0gcGF0Y2gudmFsdWVcblx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gSWYgdGhlcmUgd2FzIGEgcGF0Y2ggdGhhdCByZXBsYWNlZCB0aGUgZW50aXJlIHN0YXRlLCBzdGFydCBmcm9tIHRoZVxuXHRcdC8vIHBhdGNoIGFmdGVyIHRoYXQuXG5cdFx0aWYgKGkgPiAtMSkge1xuXHRcdFx0cGF0Y2hlcyA9IHBhdGNoZXMuc2xpY2UoaSArIDEpXG5cdFx0fVxuXG5cdFx0Y29uc3QgYXBwbHlQYXRjaGVzSW1wbCA9IGdldFBsdWdpbihcIlBhdGNoZXNcIikuYXBwbHlQYXRjaGVzX1xuXHRcdGlmIChpc0RyYWZ0KGJhc2UpKSB7XG5cdFx0XHQvLyBOLkI6IG5ldmVyIGhpdHMgaWYgc29tZSBwYXRjaCBhIHJlcGxhY2VtZW50LCBwYXRjaGVzIGFyZSBuZXZlciBkcmFmdHNcblx0XHRcdHJldHVybiBhcHBseVBhdGNoZXNJbXBsKGJhc2UsIHBhdGNoZXMpXG5cdFx0fVxuXHRcdC8vIE90aGVyd2lzZSwgcHJvZHVjZSBhIGNvcHkgb2YgdGhlIGJhc2Ugc3RhdGUuXG5cdFx0cmV0dXJuIHRoaXMucHJvZHVjZShiYXNlLCAoZHJhZnQ6IERyYWZ0ZWQpID0+XG5cdFx0XHRhcHBseVBhdGNoZXNJbXBsKGRyYWZ0LCBwYXRjaGVzKVxuXHRcdClcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJveHk8VCBleHRlbmRzIE9iamVjdGlzaD4oXG5cdHZhbHVlOiBULFxuXHRwYXJlbnQ/OiBJbW1lclN0YXRlXG4pOiBEcmFmdGVkPFQsIEltbWVyU3RhdGU+IHtcblx0Ly8gcHJlY29uZGl0aW9uOiBjcmVhdGVQcm94eSBzaG91bGQgYmUgZ3VhcmRlZCBieSBpc0RyYWZ0YWJsZSwgc28gd2Uga25vdyB3ZSBjYW4gc2FmZWx5IGRyYWZ0XG5cdGNvbnN0IGRyYWZ0OiBEcmFmdGVkID0gaXNNYXAodmFsdWUpXG5cdFx0PyBnZXRQbHVnaW4oXCJNYXBTZXRcIikucHJveHlNYXBfKHZhbHVlLCBwYXJlbnQpXG5cdFx0OiBpc1NldCh2YWx1ZSlcblx0XHQ/IGdldFBsdWdpbihcIk1hcFNldFwiKS5wcm94eVNldF8odmFsdWUsIHBhcmVudClcblx0XHQ6IGNyZWF0ZVByb3h5UHJveHkodmFsdWUsIHBhcmVudClcblxuXHRjb25zdCBzY29wZSA9IHBhcmVudCA/IHBhcmVudC5zY29wZV8gOiBnZXRDdXJyZW50U2NvcGUoKVxuXHRzY29wZS5kcmFmdHNfLnB1c2goZHJhZnQpXG5cdHJldHVybiBkcmFmdFxufVxuIiwgImltcG9ydCB7XG5cdGRpZSxcblx0aXNEcmFmdCxcblx0c2hhbGxvd0NvcHksXG5cdGVhY2gsXG5cdERSQUZUX1NUQVRFLFxuXHRzZXQsXG5cdEltbWVyU3RhdGUsXG5cdGlzRHJhZnRhYmxlLFxuXHRpc0Zyb3plblxufSBmcm9tIFwiLi4vaW50ZXJuYWxcIlxuXG4vKiogVGFrZXMgYSBzbmFwc2hvdCBvZiB0aGUgY3VycmVudCBzdGF0ZSBvZiBhIGRyYWZ0IGFuZCBmaW5hbGl6ZXMgaXQgKGJ1dCB3aXRob3V0IGZyZWV6aW5nKS4gVGhpcyBpcyBhIGdyZWF0IHV0aWxpdHkgdG8gcHJpbnQgdGhlIGN1cnJlbnQgc3RhdGUgZHVyaW5nIGRlYnVnZ2luZyAobm8gUHJveGllcyBpbiB0aGUgd2F5KS4gVGhlIG91dHB1dCBvZiBjdXJyZW50IGNhbiBhbHNvIGJlIHNhZmVseSBsZWFrZWQgb3V0c2lkZSB0aGUgcHJvZHVjZXIuICovXG5leHBvcnQgZnVuY3Rpb24gY3VycmVudDxUPih2YWx1ZTogVCk6IFRcbmV4cG9ydCBmdW5jdGlvbiBjdXJyZW50KHZhbHVlOiBhbnkpOiBhbnkge1xuXHRpZiAoIWlzRHJhZnQodmFsdWUpKSBkaWUoMTAsIHZhbHVlKVxuXHRyZXR1cm4gY3VycmVudEltcGwodmFsdWUpXG59XG5cbmZ1bmN0aW9uIGN1cnJlbnRJbXBsKHZhbHVlOiBhbnkpOiBhbnkge1xuXHRpZiAoIWlzRHJhZnRhYmxlKHZhbHVlKSB8fCBpc0Zyb3plbih2YWx1ZSkpIHJldHVybiB2YWx1ZVxuXHRjb25zdCBzdGF0ZTogSW1tZXJTdGF0ZSB8IHVuZGVmaW5lZCA9IHZhbHVlW0RSQUZUX1NUQVRFXVxuXHRsZXQgY29weTogYW55XG5cdGlmIChzdGF0ZSkge1xuXHRcdGlmICghc3RhdGUubW9kaWZpZWRfKSByZXR1cm4gc3RhdGUuYmFzZV9cblx0XHQvLyBPcHRpbWl6YXRpb246IGF2b2lkIGdlbmVyYXRpbmcgbmV3IGRyYWZ0cyBkdXJpbmcgY29weWluZ1xuXHRcdHN0YXRlLmZpbmFsaXplZF8gPSB0cnVlXG5cdFx0Y29weSA9IHNoYWxsb3dDb3B5KHZhbHVlLCBzdGF0ZS5zY29wZV8uaW1tZXJfLnVzZVN0cmljdFNoYWxsb3dDb3B5Xylcblx0fSBlbHNlIHtcblx0XHRjb3B5ID0gc2hhbGxvd0NvcHkodmFsdWUsIHRydWUpXG5cdH1cblx0Ly8gcmVjdXJzZVxuXHRlYWNoKGNvcHksIChrZXksIGNoaWxkVmFsdWUpID0+IHtcblx0XHRzZXQoY29weSwga2V5LCBjdXJyZW50SW1wbChjaGlsZFZhbHVlKSlcblx0fSlcblx0aWYgKHN0YXRlKSB7XG5cdFx0c3RhdGUuZmluYWxpemVkXyA9IGZhbHNlXG5cdH1cblx0cmV0dXJuIGNvcHlcbn1cbiIsICJpbXBvcnQge2ltbWVyYWJsZX0gZnJvbSBcIi4uL2ltbWVyXCJcbmltcG9ydCB7XG5cdEltbWVyU3RhdGUsXG5cdFBhdGNoLFxuXHRTZXRTdGF0ZSxcblx0UHJveHlBcnJheVN0YXRlLFxuXHRNYXBTdGF0ZSxcblx0UHJveHlPYmplY3RTdGF0ZSxcblx0UGF0Y2hQYXRoLFxuXHRnZXQsXG5cdGVhY2gsXG5cdGhhcyxcblx0Z2V0QXJjaHR5cGUsXG5cdGdldFByb3RvdHlwZU9mLFxuXHRpc1NldCxcblx0aXNNYXAsXG5cdGxvYWRQbHVnaW4sXG5cdEFyY2hUeXBlLFxuXHRkaWUsXG5cdGlzRHJhZnQsXG5cdGlzRHJhZnRhYmxlLFxuXHROT1RISU5HLFxuXHRlcnJvcnNcbn0gZnJvbSBcIi4uL2ludGVybmFsXCJcblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZVBhdGNoZXMoKSB7XG5cdGNvbnN0IGVycm9yT2Zmc2V0ID0gMTZcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuXHRcdGVycm9ycy5wdXNoKFxuXHRcdFx0J1NldHMgY2Fubm90IGhhdmUgXCJyZXBsYWNlXCIgcGF0Y2hlcy4nLFxuXHRcdFx0ZnVuY3Rpb24ob3A6IHN0cmluZykge1xuXHRcdFx0XHRyZXR1cm4gXCJVbnN1cHBvcnRlZCBwYXRjaCBvcGVyYXRpb246IFwiICsgb3Bcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbihwYXRoOiBzdHJpbmcpIHtcblx0XHRcdFx0cmV0dXJuIFwiQ2Fubm90IGFwcGx5IHBhdGNoLCBwYXRoIGRvZXNuJ3QgcmVzb2x2ZTogXCIgKyBwYXRoXG5cdFx0XHR9LFxuXHRcdFx0XCJQYXRjaGluZyByZXNlcnZlZCBhdHRyaWJ1dGVzIGxpa2UgX19wcm90b19fLCBwcm90b3R5cGUgYW5kIGNvbnN0cnVjdG9yIGlzIG5vdCBhbGxvd2VkXCJcblx0XHQpXG5cdH1cblxuXHRjb25zdCBSRVBMQUNFID0gXCJyZXBsYWNlXCJcblx0Y29uc3QgQUREID0gXCJhZGRcIlxuXHRjb25zdCBSRU1PVkUgPSBcInJlbW92ZVwiXG5cblx0ZnVuY3Rpb24gZ2VuZXJhdGVQYXRjaGVzXyhcblx0XHRzdGF0ZTogSW1tZXJTdGF0ZSxcblx0XHRiYXNlUGF0aDogUGF0Y2hQYXRoLFxuXHRcdHBhdGNoZXM6IFBhdGNoW10sXG5cdFx0aW52ZXJzZVBhdGNoZXM6IFBhdGNoW11cblx0KTogdm9pZCB7XG5cdFx0c3dpdGNoIChzdGF0ZS50eXBlXykge1xuXHRcdFx0Y2FzZSBBcmNoVHlwZS5PYmplY3Q6XG5cdFx0XHRjYXNlIEFyY2hUeXBlLk1hcDpcblx0XHRcdFx0cmV0dXJuIGdlbmVyYXRlUGF0Y2hlc0Zyb21Bc3NpZ25lZChcblx0XHRcdFx0XHRzdGF0ZSxcblx0XHRcdFx0XHRiYXNlUGF0aCxcblx0XHRcdFx0XHRwYXRjaGVzLFxuXHRcdFx0XHRcdGludmVyc2VQYXRjaGVzXG5cdFx0XHRcdClcblx0XHRcdGNhc2UgQXJjaFR5cGUuQXJyYXk6XG5cdFx0XHRcdHJldHVybiBnZW5lcmF0ZUFycmF5UGF0Y2hlcyhzdGF0ZSwgYmFzZVBhdGgsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKVxuXHRcdFx0Y2FzZSBBcmNoVHlwZS5TZXQ6XG5cdFx0XHRcdHJldHVybiBnZW5lcmF0ZVNldFBhdGNoZXMoXG5cdFx0XHRcdFx0KHN0YXRlIGFzIGFueSkgYXMgU2V0U3RhdGUsXG5cdFx0XHRcdFx0YmFzZVBhdGgsXG5cdFx0XHRcdFx0cGF0Y2hlcyxcblx0XHRcdFx0XHRpbnZlcnNlUGF0Y2hlc1xuXHRcdFx0XHQpXG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2VuZXJhdGVBcnJheVBhdGNoZXMoXG5cdFx0c3RhdGU6IFByb3h5QXJyYXlTdGF0ZSxcblx0XHRiYXNlUGF0aDogUGF0Y2hQYXRoLFxuXHRcdHBhdGNoZXM6IFBhdGNoW10sXG5cdFx0aW52ZXJzZVBhdGNoZXM6IFBhdGNoW11cblx0KSB7XG5cdFx0bGV0IHtiYXNlXywgYXNzaWduZWRffSA9IHN0YXRlXG5cdFx0bGV0IGNvcHlfID0gc3RhdGUuY29weV8hXG5cblx0XHQvLyBSZWR1Y2UgY29tcGxleGl0eSBieSBlbnN1cmluZyBgYmFzZWAgaXMgbmV2ZXIgbG9uZ2VyLlxuXHRcdGlmIChjb3B5Xy5sZW5ndGggPCBiYXNlXy5sZW5ndGgpIHtcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdDtbYmFzZV8sIGNvcHlfXSA9IFtjb3B5XywgYmFzZV9dXG5cdFx0XHQ7W3BhdGNoZXMsIGludmVyc2VQYXRjaGVzXSA9IFtpbnZlcnNlUGF0Y2hlcywgcGF0Y2hlc11cblx0XHR9XG5cblx0XHQvLyBQcm9jZXNzIHJlcGxhY2VkIGluZGljZXMuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBiYXNlXy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGFzc2lnbmVkX1tpXSAmJiBjb3B5X1tpXSAhPT0gYmFzZV9baV0pIHtcblx0XHRcdFx0Y29uc3QgcGF0aCA9IGJhc2VQYXRoLmNvbmNhdChbaV0pXG5cdFx0XHRcdHBhdGNoZXMucHVzaCh7XG5cdFx0XHRcdFx0b3A6IFJFUExBQ0UsXG5cdFx0XHRcdFx0cGF0aCxcblx0XHRcdFx0XHQvLyBOZWVkIHRvIG1heWJlIGNsb25lIGl0LCBhcyBpdCBjYW4gaW4gZmFjdCBiZSB0aGUgb3JpZ2luYWwgdmFsdWVcblx0XHRcdFx0XHQvLyBkdWUgdG8gdGhlIGJhc2UvY29weSBpbnZlcnNpb24gYXQgdGhlIHN0YXJ0IG9mIHRoaXMgZnVuY3Rpb25cblx0XHRcdFx0XHR2YWx1ZTogY2xvbmVQYXRjaFZhbHVlSWZOZWVkZWQoY29weV9baV0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdGludmVyc2VQYXRjaGVzLnB1c2goe1xuXHRcdFx0XHRcdG9wOiBSRVBMQUNFLFxuXHRcdFx0XHRcdHBhdGgsXG5cdFx0XHRcdFx0dmFsdWU6IGNsb25lUGF0Y2hWYWx1ZUlmTmVlZGVkKGJhc2VfW2ldKVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByb2Nlc3MgYWRkZWQgaW5kaWNlcy5cblx0XHRmb3IgKGxldCBpID0gYmFzZV8ubGVuZ3RoOyBpIDwgY29weV8ubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHBhdGggPSBiYXNlUGF0aC5jb25jYXQoW2ldKVxuXHRcdFx0cGF0Y2hlcy5wdXNoKHtcblx0XHRcdFx0b3A6IEFERCxcblx0XHRcdFx0cGF0aCxcblx0XHRcdFx0Ly8gTmVlZCB0byBtYXliZSBjbG9uZSBpdCwgYXMgaXQgY2FuIGluIGZhY3QgYmUgdGhlIG9yaWdpbmFsIHZhbHVlXG5cdFx0XHRcdC8vIGR1ZSB0byB0aGUgYmFzZS9jb3B5IGludmVyc2lvbiBhdCB0aGUgc3RhcnQgb2YgdGhpcyBmdW5jdGlvblxuXHRcdFx0XHR2YWx1ZTogY2xvbmVQYXRjaFZhbHVlSWZOZWVkZWQoY29weV9baV0pXG5cdFx0XHR9KVxuXHRcdH1cblx0XHRmb3IgKGxldCBpID0gY29weV8ubGVuZ3RoIC0gMTsgYmFzZV8ubGVuZ3RoIDw9IGk7IC0taSkge1xuXHRcdFx0Y29uc3QgcGF0aCA9IGJhc2VQYXRoLmNvbmNhdChbaV0pXG5cdFx0XHRpbnZlcnNlUGF0Y2hlcy5wdXNoKHtcblx0XHRcdFx0b3A6IFJFTU9WRSxcblx0XHRcdFx0cGF0aFxuXHRcdFx0fSlcblx0XHR9XG5cdH1cblxuXHQvLyBUaGlzIGlzIHVzZWQgZm9yIGJvdGggTWFwIG9iamVjdHMgYW5kIG5vcm1hbCBvYmplY3RzLlxuXHRmdW5jdGlvbiBnZW5lcmF0ZVBhdGNoZXNGcm9tQXNzaWduZWQoXG5cdFx0c3RhdGU6IE1hcFN0YXRlIHwgUHJveHlPYmplY3RTdGF0ZSxcblx0XHRiYXNlUGF0aDogUGF0Y2hQYXRoLFxuXHRcdHBhdGNoZXM6IFBhdGNoW10sXG5cdFx0aW52ZXJzZVBhdGNoZXM6IFBhdGNoW11cblx0KSB7XG5cdFx0Y29uc3Qge2Jhc2VfLCBjb3B5X30gPSBzdGF0ZVxuXHRcdGVhY2goc3RhdGUuYXNzaWduZWRfISwgKGtleSwgYXNzaWduZWRWYWx1ZSkgPT4ge1xuXHRcdFx0Y29uc3Qgb3JpZ1ZhbHVlID0gZ2V0KGJhc2VfLCBrZXkpXG5cdFx0XHRjb25zdCB2YWx1ZSA9IGdldChjb3B5XyEsIGtleSlcblx0XHRcdGNvbnN0IG9wID0gIWFzc2lnbmVkVmFsdWUgPyBSRU1PVkUgOiBoYXMoYmFzZV8sIGtleSkgPyBSRVBMQUNFIDogQUREXG5cdFx0XHRpZiAob3JpZ1ZhbHVlID09PSB2YWx1ZSAmJiBvcCA9PT0gUkVQTEFDRSkgcmV0dXJuXG5cdFx0XHRjb25zdCBwYXRoID0gYmFzZVBhdGguY29uY2F0KGtleSBhcyBhbnkpXG5cdFx0XHRwYXRjaGVzLnB1c2gob3AgPT09IFJFTU9WRSA/IHtvcCwgcGF0aH0gOiB7b3AsIHBhdGgsIHZhbHVlfSlcblx0XHRcdGludmVyc2VQYXRjaGVzLnB1c2goXG5cdFx0XHRcdG9wID09PSBBRERcblx0XHRcdFx0XHQ/IHtvcDogUkVNT1ZFLCBwYXRofVxuXHRcdFx0XHRcdDogb3AgPT09IFJFTU9WRVxuXHRcdFx0XHRcdD8ge29wOiBBREQsIHBhdGgsIHZhbHVlOiBjbG9uZVBhdGNoVmFsdWVJZk5lZWRlZChvcmlnVmFsdWUpfVxuXHRcdFx0XHRcdDoge29wOiBSRVBMQUNFLCBwYXRoLCB2YWx1ZTogY2xvbmVQYXRjaFZhbHVlSWZOZWVkZWQob3JpZ1ZhbHVlKX1cblx0XHRcdClcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2VuZXJhdGVTZXRQYXRjaGVzKFxuXHRcdHN0YXRlOiBTZXRTdGF0ZSxcblx0XHRiYXNlUGF0aDogUGF0Y2hQYXRoLFxuXHRcdHBhdGNoZXM6IFBhdGNoW10sXG5cdFx0aW52ZXJzZVBhdGNoZXM6IFBhdGNoW11cblx0KSB7XG5cdFx0bGV0IHtiYXNlXywgY29weV99ID0gc3RhdGVcblxuXHRcdGxldCBpID0gMFxuXHRcdGJhc2VfLmZvckVhY2goKHZhbHVlOiBhbnkpID0+IHtcblx0XHRcdGlmICghY29weV8hLmhhcyh2YWx1ZSkpIHtcblx0XHRcdFx0Y29uc3QgcGF0aCA9IGJhc2VQYXRoLmNvbmNhdChbaV0pXG5cdFx0XHRcdHBhdGNoZXMucHVzaCh7XG5cdFx0XHRcdFx0b3A6IFJFTU9WRSxcblx0XHRcdFx0XHRwYXRoLFxuXHRcdFx0XHRcdHZhbHVlXG5cdFx0XHRcdH0pXG5cdFx0XHRcdGludmVyc2VQYXRjaGVzLnVuc2hpZnQoe1xuXHRcdFx0XHRcdG9wOiBBREQsXG5cdFx0XHRcdFx0cGF0aCxcblx0XHRcdFx0XHR2YWx1ZVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdFx0aSsrXG5cdFx0fSlcblx0XHRpID0gMFxuXHRcdGNvcHlfIS5mb3JFYWNoKCh2YWx1ZTogYW55KSA9PiB7XG5cdFx0XHRpZiAoIWJhc2VfLmhhcyh2YWx1ZSkpIHtcblx0XHRcdFx0Y29uc3QgcGF0aCA9IGJhc2VQYXRoLmNvbmNhdChbaV0pXG5cdFx0XHRcdHBhdGNoZXMucHVzaCh7XG5cdFx0XHRcdFx0b3A6IEFERCxcblx0XHRcdFx0XHRwYXRoLFxuXHRcdFx0XHRcdHZhbHVlXG5cdFx0XHRcdH0pXG5cdFx0XHRcdGludmVyc2VQYXRjaGVzLnVuc2hpZnQoe1xuXHRcdFx0XHRcdG9wOiBSRU1PVkUsXG5cdFx0XHRcdFx0cGF0aCxcblx0XHRcdFx0XHR2YWx1ZVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdFx0aSsrXG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlUmVwbGFjZW1lbnRQYXRjaGVzXyhcblx0XHRiYXNlVmFsdWU6IGFueSxcblx0XHRyZXBsYWNlbWVudDogYW55LFxuXHRcdHBhdGNoZXM6IFBhdGNoW10sXG5cdFx0aW52ZXJzZVBhdGNoZXM6IFBhdGNoW11cblx0KTogdm9pZCB7XG5cdFx0cGF0Y2hlcy5wdXNoKHtcblx0XHRcdG9wOiBSRVBMQUNFLFxuXHRcdFx0cGF0aDogW10sXG5cdFx0XHR2YWx1ZTogcmVwbGFjZW1lbnQgPT09IE5PVEhJTkcgPyB1bmRlZmluZWQgOiByZXBsYWNlbWVudFxuXHRcdH0pXG5cdFx0aW52ZXJzZVBhdGNoZXMucHVzaCh7XG5cdFx0XHRvcDogUkVQTEFDRSxcblx0XHRcdHBhdGg6IFtdLFxuXHRcdFx0dmFsdWU6IGJhc2VWYWx1ZVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBhcHBseVBhdGNoZXNfPFQ+KGRyYWZ0OiBULCBwYXRjaGVzOiBQYXRjaFtdKTogVCB7XG5cdFx0cGF0Y2hlcy5mb3JFYWNoKHBhdGNoID0+IHtcblx0XHRcdGNvbnN0IHtwYXRoLCBvcH0gPSBwYXRjaFxuXG5cdFx0XHRsZXQgYmFzZTogYW55ID0gZHJhZnRcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aC5sZW5ndGggLSAxOyBpKyspIHtcblx0XHRcdFx0Y29uc3QgcGFyZW50VHlwZSA9IGdldEFyY2h0eXBlKGJhc2UpXG5cdFx0XHRcdGxldCBwID0gcGF0aFtpXVxuXHRcdFx0XHRpZiAodHlwZW9mIHAgIT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIHAgIT09IFwibnVtYmVyXCIpIHtcblx0XHRcdFx0XHRwID0gXCJcIiArIHBcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFNlZSAjNzM4LCBhdm9pZCBwcm90b3R5cGUgcG9sbHV0aW9uXG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQocGFyZW50VHlwZSA9PT0gQXJjaFR5cGUuT2JqZWN0IHx8IHBhcmVudFR5cGUgPT09IEFyY2hUeXBlLkFycmF5KSAmJlxuXHRcdFx0XHRcdChwID09PSBcIl9fcHJvdG9fX1wiIHx8IHAgPT09IFwiY29uc3RydWN0b3JcIilcblx0XHRcdFx0KVxuXHRcdFx0XHRcdGRpZShlcnJvck9mZnNldCArIDMpXG5cdFx0XHRcdGlmICh0eXBlb2YgYmFzZSA9PT0gXCJmdW5jdGlvblwiICYmIHAgPT09IFwicHJvdG90eXBlXCIpXG5cdFx0XHRcdFx0ZGllKGVycm9yT2Zmc2V0ICsgMylcblx0XHRcdFx0YmFzZSA9IGdldChiYXNlLCBwKVxuXHRcdFx0XHRpZiAodHlwZW9mIGJhc2UgIT09IFwib2JqZWN0XCIpIGRpZShlcnJvck9mZnNldCArIDIsIHBhdGguam9pbihcIi9cIikpXG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHR5cGUgPSBnZXRBcmNodHlwZShiYXNlKVxuXHRcdFx0Y29uc3QgdmFsdWUgPSBkZWVwQ2xvbmVQYXRjaFZhbHVlKHBhdGNoLnZhbHVlKSAvLyB1c2VkIHRvIGNsb25lIHBhdGNoIHRvIGVuc3VyZSBvcmlnaW5hbCBwYXRjaCBpcyBub3QgbW9kaWZpZWQsIHNlZSAjNDExXG5cdFx0XHRjb25zdCBrZXkgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cblx0XHRcdHN3aXRjaCAob3ApIHtcblx0XHRcdFx0Y2FzZSBSRVBMQUNFOlxuXHRcdFx0XHRcdHN3aXRjaCAodHlwZSkge1xuXHRcdFx0XHRcdFx0Y2FzZSBBcmNoVHlwZS5NYXA6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBiYXNlLnNldChrZXksIHZhbHVlKVxuXHRcdFx0XHRcdFx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0XHRcdFx0XHRcdGNhc2UgQXJjaFR5cGUuU2V0OlxuXHRcdFx0XHRcdFx0XHRkaWUoZXJyb3JPZmZzZXQpXG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHQvLyBpZiB2YWx1ZSBpcyBhbiBvYmplY3QsIHRoZW4gaXQncyBhc3NpZ25lZCBieSByZWZlcmVuY2Vcblx0XHRcdFx0XHRcdFx0Ly8gaW4gdGhlIGZvbGxvd2luZyBhZGQgb3IgcmVtb3ZlIG9wcywgdGhlIHZhbHVlIGZpZWxkIGluc2lkZSB0aGUgcGF0Y2ggd2lsbCBhbHNvIGJlIG1vZGlmeWVkXG5cdFx0XHRcdFx0XHRcdC8vIHNvIHdlIHVzZSB2YWx1ZSBmcm9tIHRoZSBjbG9uZWQgcGF0Y2hcblx0XHRcdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKGJhc2Vba2V5XSA9IHZhbHVlKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0Y2FzZSBBREQ6XG5cdFx0XHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdFx0XHRjYXNlIEFyY2hUeXBlLkFycmF5OlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4ga2V5ID09PSBcIi1cIlxuXHRcdFx0XHRcdFx0XHRcdD8gYmFzZS5wdXNoKHZhbHVlKVxuXHRcdFx0XHRcdFx0XHRcdDogYmFzZS5zcGxpY2Uoa2V5IGFzIGFueSwgMCwgdmFsdWUpXG5cdFx0XHRcdFx0XHRjYXNlIEFyY2hUeXBlLk1hcDpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJhc2Uuc2V0KGtleSwgdmFsdWUpXG5cdFx0XHRcdFx0XHRjYXNlIEFyY2hUeXBlLlNldDpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJhc2UuYWRkKHZhbHVlKVxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIChiYXNlW2tleV0gPSB2YWx1ZSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdGNhc2UgUkVNT1ZFOlxuXHRcdFx0XHRcdHN3aXRjaCAodHlwZSkge1xuXHRcdFx0XHRcdFx0Y2FzZSBBcmNoVHlwZS5BcnJheTpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJhc2Uuc3BsaWNlKGtleSBhcyBhbnksIDEpXG5cdFx0XHRcdFx0XHRjYXNlIEFyY2hUeXBlLk1hcDpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJhc2UuZGVsZXRlKGtleSlcblx0XHRcdFx0XHRcdGNhc2UgQXJjaFR5cGUuU2V0OlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYmFzZS5kZWxldGUocGF0Y2gudmFsdWUpXG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZGVsZXRlIGJhc2Vba2V5XVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRkaWUoZXJyb3JPZmZzZXQgKyAxLCBvcClcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0cmV0dXJuIGRyYWZ0XG5cdH1cblxuXHQvLyBvcHRpbWl6ZTogdGhpcyBpcyBxdWl0ZSBhIHBlcmZvcm1hbmNlIGhpdCwgY2FuIHdlIGRldGVjdCBpbnRlbGxpZ2VudGx5IHdoZW4gaXQgaXMgbmVlZGVkP1xuXHQvLyBFLmcuIGF1dG8tZHJhZnQgd2hlbiBuZXcgb2JqZWN0cyBmcm9tIG91dHNpZGUgYXJlIGFzc2lnbmVkIGFuZCBtb2RpZmllZD9cblx0Ly8gKFNlZSBmYWlsaW5nIHRlc3Qgd2hlbiBkZWVwQ2xvbmUganVzdCByZXR1cm5zIG9iailcblx0ZnVuY3Rpb24gZGVlcENsb25lUGF0Y2hWYWx1ZTxUPihvYmo6IFQpOiBUXG5cdGZ1bmN0aW9uIGRlZXBDbG9uZVBhdGNoVmFsdWUob2JqOiBhbnkpIHtcblx0XHRpZiAoIWlzRHJhZnRhYmxlKG9iaikpIHJldHVybiBvYmpcblx0XHRpZiAoQXJyYXkuaXNBcnJheShvYmopKSByZXR1cm4gb2JqLm1hcChkZWVwQ2xvbmVQYXRjaFZhbHVlKVxuXHRcdGlmIChpc01hcChvYmopKVxuXHRcdFx0cmV0dXJuIG5ldyBNYXAoXG5cdFx0XHRcdEFycmF5LmZyb20ob2JqLmVudHJpZXMoKSkubWFwKChbaywgdl0pID0+IFtrLCBkZWVwQ2xvbmVQYXRjaFZhbHVlKHYpXSlcblx0XHRcdClcblx0XHRpZiAoaXNTZXQob2JqKSkgcmV0dXJuIG5ldyBTZXQoQXJyYXkuZnJvbShvYmopLm1hcChkZWVwQ2xvbmVQYXRjaFZhbHVlKSlcblx0XHRjb25zdCBjbG9uZWQgPSBPYmplY3QuY3JlYXRlKGdldFByb3RvdHlwZU9mKG9iaikpXG5cdFx0Zm9yIChjb25zdCBrZXkgaW4gb2JqKSBjbG9uZWRba2V5XSA9IGRlZXBDbG9uZVBhdGNoVmFsdWUob2JqW2tleV0pXG5cdFx0aWYgKGhhcyhvYmosIGltbWVyYWJsZSkpIGNsb25lZFtpbW1lcmFibGVdID0gb2JqW2ltbWVyYWJsZV1cblx0XHRyZXR1cm4gY2xvbmVkXG5cdH1cblxuXHRmdW5jdGlvbiBjbG9uZVBhdGNoVmFsdWVJZk5lZWRlZDxUPihvYmo6IFQpOiBUIHtcblx0XHRpZiAoaXNEcmFmdChvYmopKSB7XG5cdFx0XHRyZXR1cm4gZGVlcENsb25lUGF0Y2hWYWx1ZShvYmopXG5cdFx0fSBlbHNlIHJldHVybiBvYmpcblx0fVxuXG5cdGxvYWRQbHVnaW4oXCJQYXRjaGVzXCIsIHtcblx0XHRhcHBseVBhdGNoZXNfLFxuXHRcdGdlbmVyYXRlUGF0Y2hlc18sXG5cdFx0Z2VuZXJhdGVSZXBsYWNlbWVudFBhdGNoZXNfXG5cdH0pXG59XG4iLCAiLy8gdHlwZXMgb25seSFcbmltcG9ydCB7XG5cdEltbWVyU3RhdGUsXG5cdEFueU1hcCxcblx0QW55U2V0LFxuXHRNYXBTdGF0ZSxcblx0U2V0U3RhdGUsXG5cdERSQUZUX1NUQVRFLFxuXHRnZXRDdXJyZW50U2NvcGUsXG5cdGxhdGVzdCxcblx0aXNEcmFmdGFibGUsXG5cdGNyZWF0ZVByb3h5LFxuXHRsb2FkUGx1Z2luLFxuXHRtYXJrQ2hhbmdlZCxcblx0ZGllLFxuXHRBcmNoVHlwZSxcblx0ZWFjaFxufSBmcm9tIFwiLi4vaW50ZXJuYWxcIlxuXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlTWFwU2V0KCkge1xuXHRjbGFzcyBEcmFmdE1hcCBleHRlbmRzIE1hcCB7XG5cdFx0W0RSQUZUX1NUQVRFXTogTWFwU3RhdGVcblxuXHRcdGNvbnN0cnVjdG9yKHRhcmdldDogQW55TWFwLCBwYXJlbnQ/OiBJbW1lclN0YXRlKSB7XG5cdFx0XHRzdXBlcigpXG5cdFx0XHR0aGlzW0RSQUZUX1NUQVRFXSA9IHtcblx0XHRcdFx0dHlwZV86IEFyY2hUeXBlLk1hcCxcblx0XHRcdFx0cGFyZW50XzogcGFyZW50LFxuXHRcdFx0XHRzY29wZV86IHBhcmVudCA/IHBhcmVudC5zY29wZV8gOiBnZXRDdXJyZW50U2NvcGUoKSEsXG5cdFx0XHRcdG1vZGlmaWVkXzogZmFsc2UsXG5cdFx0XHRcdGZpbmFsaXplZF86IGZhbHNlLFxuXHRcdFx0XHRjb3B5XzogdW5kZWZpbmVkLFxuXHRcdFx0XHRhc3NpZ25lZF86IHVuZGVmaW5lZCxcblx0XHRcdFx0YmFzZV86IHRhcmdldCxcblx0XHRcdFx0ZHJhZnRfOiB0aGlzIGFzIGFueSxcblx0XHRcdFx0aXNNYW51YWxfOiBmYWxzZSxcblx0XHRcdFx0cmV2b2tlZF86IGZhbHNlXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Z2V0IHNpemUoKTogbnVtYmVyIHtcblx0XHRcdHJldHVybiBsYXRlc3QodGhpc1tEUkFGVF9TVEFURV0pLnNpemVcblx0XHR9XG5cblx0XHRoYXMoa2V5OiBhbnkpOiBib29sZWFuIHtcblx0XHRcdHJldHVybiBsYXRlc3QodGhpc1tEUkFGVF9TVEFURV0pLmhhcyhrZXkpXG5cdFx0fVxuXG5cdFx0c2V0KGtleTogYW55LCB2YWx1ZTogYW55KSB7XG5cdFx0XHRjb25zdCBzdGF0ZTogTWFwU3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXVxuXHRcdFx0YXNzZXJ0VW5yZXZva2VkKHN0YXRlKVxuXHRcdFx0aWYgKCFsYXRlc3Qoc3RhdGUpLmhhcyhrZXkpIHx8IGxhdGVzdChzdGF0ZSkuZ2V0KGtleSkgIT09IHZhbHVlKSB7XG5cdFx0XHRcdHByZXBhcmVNYXBDb3B5KHN0YXRlKVxuXHRcdFx0XHRtYXJrQ2hhbmdlZChzdGF0ZSlcblx0XHRcdFx0c3RhdGUuYXNzaWduZWRfIS5zZXQoa2V5LCB0cnVlKVxuXHRcdFx0XHRzdGF0ZS5jb3B5XyEuc2V0KGtleSwgdmFsdWUpXG5cdFx0XHRcdHN0YXRlLmFzc2lnbmVkXyEuc2V0KGtleSwgdHJ1ZSlcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzXG5cdFx0fVxuXG5cdFx0ZGVsZXRlKGtleTogYW55KTogYm9vbGVhbiB7XG5cdFx0XHRpZiAoIXRoaXMuaGFzKGtleSkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHN0YXRlOiBNYXBTdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdXG5cdFx0XHRhc3NlcnRVbnJldm9rZWQoc3RhdGUpXG5cdFx0XHRwcmVwYXJlTWFwQ29weShzdGF0ZSlcblx0XHRcdG1hcmtDaGFuZ2VkKHN0YXRlKVxuXHRcdFx0aWYgKHN0YXRlLmJhc2VfLmhhcyhrZXkpKSB7XG5cdFx0XHRcdHN0YXRlLmFzc2lnbmVkXyEuc2V0KGtleSwgZmFsc2UpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzdGF0ZS5hc3NpZ25lZF8hLmRlbGV0ZShrZXkpXG5cdFx0XHR9XG5cdFx0XHRzdGF0ZS5jb3B5XyEuZGVsZXRlKGtleSlcblx0XHRcdHJldHVybiB0cnVlXG5cdFx0fVxuXG5cdFx0Y2xlYXIoKSB7XG5cdFx0XHRjb25zdCBzdGF0ZTogTWFwU3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXVxuXHRcdFx0YXNzZXJ0VW5yZXZva2VkKHN0YXRlKVxuXHRcdFx0aWYgKGxhdGVzdChzdGF0ZSkuc2l6ZSkge1xuXHRcdFx0XHRwcmVwYXJlTWFwQ29weShzdGF0ZSlcblx0XHRcdFx0bWFya0NoYW5nZWQoc3RhdGUpXG5cdFx0XHRcdHN0YXRlLmFzc2lnbmVkXyA9IG5ldyBNYXAoKVxuXHRcdFx0XHRlYWNoKHN0YXRlLmJhc2VfLCBrZXkgPT4ge1xuXHRcdFx0XHRcdHN0YXRlLmFzc2lnbmVkXyEuc2V0KGtleSwgZmFsc2UpXG5cdFx0XHRcdH0pXG5cdFx0XHRcdHN0YXRlLmNvcHlfIS5jbGVhcigpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yRWFjaChjYjogKHZhbHVlOiBhbnksIGtleTogYW55LCBzZWxmOiBhbnkpID0+IHZvaWQsIHRoaXNBcmc/OiBhbnkpIHtcblx0XHRcdGNvbnN0IHN0YXRlOiBNYXBTdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdXG5cdFx0XHRsYXRlc3Qoc3RhdGUpLmZvckVhY2goKF92YWx1ZTogYW55LCBrZXk6IGFueSwgX21hcDogYW55KSA9PiB7XG5cdFx0XHRcdGNiLmNhbGwodGhpc0FyZywgdGhpcy5nZXQoa2V5KSwga2V5LCB0aGlzKVxuXHRcdFx0fSlcblx0XHR9XG5cblx0XHRnZXQoa2V5OiBhbnkpOiBhbnkge1xuXHRcdFx0Y29uc3Qgc3RhdGU6IE1hcFN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV1cblx0XHRcdGFzc2VydFVucmV2b2tlZChzdGF0ZSlcblx0XHRcdGNvbnN0IHZhbHVlID0gbGF0ZXN0KHN0YXRlKS5nZXQoa2V5KVxuXHRcdFx0aWYgKHN0YXRlLmZpbmFsaXplZF8gfHwgIWlzRHJhZnRhYmxlKHZhbHVlKSkge1xuXHRcdFx0XHRyZXR1cm4gdmFsdWVcblx0XHRcdH1cblx0XHRcdGlmICh2YWx1ZSAhPT0gc3RhdGUuYmFzZV8uZ2V0KGtleSkpIHtcblx0XHRcdFx0cmV0dXJuIHZhbHVlIC8vIGVpdGhlciBhbHJlYWR5IGRyYWZ0ZWQgb3IgcmVhc3NpZ25lZFxuXHRcdFx0fVxuXHRcdFx0Ly8gZGVzcGl0ZSB3aGF0IGl0IGxvb2tzLCB0aGlzIGNyZWF0ZXMgYSBkcmFmdCBvbmx5IG9uY2UsIHNlZSBhYm92ZSBjb25kaXRpb25cblx0XHRcdGNvbnN0IGRyYWZ0ID0gY3JlYXRlUHJveHkodmFsdWUsIHN0YXRlKVxuXHRcdFx0cHJlcGFyZU1hcENvcHkoc3RhdGUpXG5cdFx0XHRzdGF0ZS5jb3B5XyEuc2V0KGtleSwgZHJhZnQpXG5cdFx0XHRyZXR1cm4gZHJhZnRcblx0XHR9XG5cblx0XHRrZXlzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8YW55PiB7XG5cdFx0XHRyZXR1cm4gbGF0ZXN0KHRoaXNbRFJBRlRfU1RBVEVdKS5rZXlzKClcblx0XHR9XG5cblx0XHR2YWx1ZXMoKTogSXRlcmFibGVJdGVyYXRvcjxhbnk+IHtcblx0XHRcdGNvbnN0IGl0ZXJhdG9yID0gdGhpcy5rZXlzKClcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFtTeW1ib2wuaXRlcmF0b3JdOiAoKSA9PiB0aGlzLnZhbHVlcygpLFxuXHRcdFx0XHRuZXh0OiAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgciA9IGl0ZXJhdG9yLm5leHQoKVxuXHRcdFx0XHRcdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdFx0XHRcdFx0aWYgKHIuZG9uZSkgcmV0dXJuIHJcblx0XHRcdFx0XHRjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0KHIudmFsdWUpXG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdGRvbmU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0dmFsdWVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gYXMgYW55XG5cdFx0fVxuXG5cdFx0ZW50cmllcygpOiBJdGVyYWJsZUl0ZXJhdG9yPFthbnksIGFueV0+IHtcblx0XHRcdGNvbnN0IGl0ZXJhdG9yID0gdGhpcy5rZXlzKClcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFtTeW1ib2wuaXRlcmF0b3JdOiAoKSA9PiB0aGlzLmVudHJpZXMoKSxcblx0XHRcdFx0bmV4dDogKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHIgPSBpdGVyYXRvci5uZXh0KClcblx0XHRcdFx0XHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRcdFx0XHRcdGlmIChyLmRvbmUpIHJldHVybiByXG5cdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmdldChyLnZhbHVlKVxuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRkb25lOiBmYWxzZSxcblx0XHRcdFx0XHRcdHZhbHVlOiBbci52YWx1ZSwgdmFsdWVdXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGFzIGFueVxuXHRcdH1cblxuXHRcdFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZW50cmllcygpXG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gcHJveHlNYXBfPFQgZXh0ZW5kcyBBbnlNYXA+KHRhcmdldDogVCwgcGFyZW50PzogSW1tZXJTdGF0ZSk6IFQge1xuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRyZXR1cm4gbmV3IERyYWZ0TWFwKHRhcmdldCwgcGFyZW50KVxuXHR9XG5cblx0ZnVuY3Rpb24gcHJlcGFyZU1hcENvcHkoc3RhdGU6IE1hcFN0YXRlKSB7XG5cdFx0aWYgKCFzdGF0ZS5jb3B5Xykge1xuXHRcdFx0c3RhdGUuYXNzaWduZWRfID0gbmV3IE1hcCgpXG5cdFx0XHRzdGF0ZS5jb3B5XyA9IG5ldyBNYXAoc3RhdGUuYmFzZV8pXG5cdFx0fVxuXHR9XG5cblx0Y2xhc3MgRHJhZnRTZXQgZXh0ZW5kcyBTZXQge1xuXHRcdFtEUkFGVF9TVEFURV06IFNldFN0YXRlXG5cdFx0Y29uc3RydWN0b3IodGFyZ2V0OiBBbnlTZXQsIHBhcmVudD86IEltbWVyU3RhdGUpIHtcblx0XHRcdHN1cGVyKClcblx0XHRcdHRoaXNbRFJBRlRfU1RBVEVdID0ge1xuXHRcdFx0XHR0eXBlXzogQXJjaFR5cGUuU2V0LFxuXHRcdFx0XHRwYXJlbnRfOiBwYXJlbnQsXG5cdFx0XHRcdHNjb3BlXzogcGFyZW50ID8gcGFyZW50LnNjb3BlXyA6IGdldEN1cnJlbnRTY29wZSgpISxcblx0XHRcdFx0bW9kaWZpZWRfOiBmYWxzZSxcblx0XHRcdFx0ZmluYWxpemVkXzogZmFsc2UsXG5cdFx0XHRcdGNvcHlfOiB1bmRlZmluZWQsXG5cdFx0XHRcdGJhc2VfOiB0YXJnZXQsXG5cdFx0XHRcdGRyYWZ0XzogdGhpcyxcblx0XHRcdFx0ZHJhZnRzXzogbmV3IE1hcCgpLFxuXHRcdFx0XHRyZXZva2VkXzogZmFsc2UsXG5cdFx0XHRcdGlzTWFudWFsXzogZmFsc2Vcblx0XHRcdH1cblx0XHR9XG5cblx0XHRnZXQgc2l6ZSgpOiBudW1iZXIge1xuXHRcdFx0cmV0dXJuIGxhdGVzdCh0aGlzW0RSQUZUX1NUQVRFXSkuc2l6ZVxuXHRcdH1cblxuXHRcdGhhcyh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdFx0XHRjb25zdCBzdGF0ZTogU2V0U3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXVxuXHRcdFx0YXNzZXJ0VW5yZXZva2VkKHN0YXRlKVxuXHRcdFx0Ly8gYml0IG9mIHRyaWNrZXJ5IGhlcmUsIHRvIGJlIGFibGUgdG8gcmVjb2duaXplIGJvdGggdGhlIHZhbHVlLCBhbmQgdGhlIGRyYWZ0IG9mIGl0cyB2YWx1ZVxuXHRcdFx0aWYgKCFzdGF0ZS5jb3B5Xykge1xuXHRcdFx0XHRyZXR1cm4gc3RhdGUuYmFzZV8uaGFzKHZhbHVlKVxuXHRcdFx0fVxuXHRcdFx0aWYgKHN0YXRlLmNvcHlfLmhhcyh2YWx1ZSkpIHJldHVybiB0cnVlXG5cdFx0XHRpZiAoc3RhdGUuZHJhZnRzXy5oYXModmFsdWUpICYmIHN0YXRlLmNvcHlfLmhhcyhzdGF0ZS5kcmFmdHNfLmdldCh2YWx1ZSkpKVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0fVxuXG5cdFx0YWRkKHZhbHVlOiBhbnkpOiBhbnkge1xuXHRcdFx0Y29uc3Qgc3RhdGU6IFNldFN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV1cblx0XHRcdGFzc2VydFVucmV2b2tlZChzdGF0ZSlcblx0XHRcdGlmICghdGhpcy5oYXModmFsdWUpKSB7XG5cdFx0XHRcdHByZXBhcmVTZXRDb3B5KHN0YXRlKVxuXHRcdFx0XHRtYXJrQ2hhbmdlZChzdGF0ZSlcblx0XHRcdFx0c3RhdGUuY29weV8hLmFkZCh2YWx1ZSlcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzXG5cdFx0fVxuXG5cdFx0ZGVsZXRlKHZhbHVlOiBhbnkpOiBhbnkge1xuXHRcdFx0aWYgKCF0aGlzLmhhcyh2YWx1ZSkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHN0YXRlOiBTZXRTdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdXG5cdFx0XHRhc3NlcnRVbnJldm9rZWQoc3RhdGUpXG5cdFx0XHRwcmVwYXJlU2V0Q29weShzdGF0ZSlcblx0XHRcdG1hcmtDaGFuZ2VkKHN0YXRlKVxuXHRcdFx0cmV0dXJuIChcblx0XHRcdFx0c3RhdGUuY29weV8hLmRlbGV0ZSh2YWx1ZSkgfHxcblx0XHRcdFx0KHN0YXRlLmRyYWZ0c18uaGFzKHZhbHVlKVxuXHRcdFx0XHRcdD8gc3RhdGUuY29weV8hLmRlbGV0ZShzdGF0ZS5kcmFmdHNfLmdldCh2YWx1ZSkpXG5cdFx0XHRcdFx0OiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmYWxzZSlcblx0XHRcdClcblx0XHR9XG5cblx0XHRjbGVhcigpIHtcblx0XHRcdGNvbnN0IHN0YXRlOiBTZXRTdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdXG5cdFx0XHRhc3NlcnRVbnJldm9rZWQoc3RhdGUpXG5cdFx0XHRpZiAobGF0ZXN0KHN0YXRlKS5zaXplKSB7XG5cdFx0XHRcdHByZXBhcmVTZXRDb3B5KHN0YXRlKVxuXHRcdFx0XHRtYXJrQ2hhbmdlZChzdGF0ZSlcblx0XHRcdFx0c3RhdGUuY29weV8hLmNsZWFyKClcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2YWx1ZXMoKTogSXRlcmFibGVJdGVyYXRvcjxhbnk+IHtcblx0XHRcdGNvbnN0IHN0YXRlOiBTZXRTdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdXG5cdFx0XHRhc3NlcnRVbnJldm9rZWQoc3RhdGUpXG5cdFx0XHRwcmVwYXJlU2V0Q29weShzdGF0ZSlcblx0XHRcdHJldHVybiBzdGF0ZS5jb3B5XyEudmFsdWVzKClcblx0XHR9XG5cblx0XHRlbnRyaWVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8W2FueSwgYW55XT4ge1xuXHRcdFx0Y29uc3Qgc3RhdGU6IFNldFN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV1cblx0XHRcdGFzc2VydFVucmV2b2tlZChzdGF0ZSlcblx0XHRcdHByZXBhcmVTZXRDb3B5KHN0YXRlKVxuXHRcdFx0cmV0dXJuIHN0YXRlLmNvcHlfIS5lbnRyaWVzKClcblx0XHR9XG5cblx0XHRrZXlzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8YW55PiB7XG5cdFx0XHRyZXR1cm4gdGhpcy52YWx1ZXMoKVxuXHRcdH1cblxuXHRcdFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMudmFsdWVzKClcblx0XHR9XG5cblx0XHRmb3JFYWNoKGNiOiBhbnksIHRoaXNBcmc/OiBhbnkpIHtcblx0XHRcdGNvbnN0IGl0ZXJhdG9yID0gdGhpcy52YWx1ZXMoKVxuXHRcdFx0bGV0IHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKVxuXHRcdFx0d2hpbGUgKCFyZXN1bHQuZG9uZSkge1xuXHRcdFx0XHRjYi5jYWxsKHRoaXNBcmcsIHJlc3VsdC52YWx1ZSwgcmVzdWx0LnZhbHVlLCB0aGlzKVxuXHRcdFx0XHRyZXN1bHQgPSBpdGVyYXRvci5uZXh0KClcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0ZnVuY3Rpb24gcHJveHlTZXRfPFQgZXh0ZW5kcyBBbnlTZXQ+KHRhcmdldDogVCwgcGFyZW50PzogSW1tZXJTdGF0ZSk6IFQge1xuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRyZXR1cm4gbmV3IERyYWZ0U2V0KHRhcmdldCwgcGFyZW50KVxuXHR9XG5cblx0ZnVuY3Rpb24gcHJlcGFyZVNldENvcHkoc3RhdGU6IFNldFN0YXRlKSB7XG5cdFx0aWYgKCFzdGF0ZS5jb3B5Xykge1xuXHRcdFx0Ly8gY3JlYXRlIGRyYWZ0cyBmb3IgYWxsIGVudHJpZXMgdG8gcHJlc2VydmUgaW5zZXJ0aW9uIG9yZGVyXG5cdFx0XHRzdGF0ZS5jb3B5XyA9IG5ldyBTZXQoKVxuXHRcdFx0c3RhdGUuYmFzZV8uZm9yRWFjaCh2YWx1ZSA9PiB7XG5cdFx0XHRcdGlmIChpc0RyYWZ0YWJsZSh2YWx1ZSkpIHtcblx0XHRcdFx0XHRjb25zdCBkcmFmdCA9IGNyZWF0ZVByb3h5KHZhbHVlLCBzdGF0ZSlcblx0XHRcdFx0XHRzdGF0ZS5kcmFmdHNfLnNldCh2YWx1ZSwgZHJhZnQpXG5cdFx0XHRcdFx0c3RhdGUuY29weV8hLmFkZChkcmFmdClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzdGF0ZS5jb3B5XyEuYWRkKHZhbHVlKVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGFzc2VydFVucmV2b2tlZChzdGF0ZTogYW55IC8qRVM1U3RhdGUgfCBNYXBTdGF0ZSB8IFNldFN0YXRlKi8pIHtcblx0XHRpZiAoc3RhdGUucmV2b2tlZF8pIGRpZSgzLCBKU09OLnN0cmluZ2lmeShsYXRlc3Qoc3RhdGUpKSlcblx0fVxuXG5cdGxvYWRQbHVnaW4oXCJNYXBTZXRcIiwge3Byb3h5TWFwXywgcHJveHlTZXRffSlcbn1cbiIsICJpbXBvcnQge1xuXHRJUHJvZHVjZSxcblx0SVByb2R1Y2VXaXRoUGF0Y2hlcyxcblx0SW1tZXIsXG5cdERyYWZ0LFxuXHRJbW11dGFibGVcbn0gZnJvbSBcIi4vaW50ZXJuYWxcIlxuXG5leHBvcnQge1xuXHREcmFmdCxcblx0SW1tdXRhYmxlLFxuXHRQYXRjaCxcblx0UGF0Y2hMaXN0ZW5lcixcblx0b3JpZ2luYWwsXG5cdGN1cnJlbnQsXG5cdGlzRHJhZnQsXG5cdGlzRHJhZnRhYmxlLFxuXHROT1RISU5HIGFzIG5vdGhpbmcsXG5cdERSQUZUQUJMRSBhcyBpbW1lcmFibGUsXG5cdGZyZWV6ZSxcblx0T2JqZWN0aXNoXG59IGZyb20gXCIuL2ludGVybmFsXCJcblxuY29uc3QgaW1tZXIgPSBuZXcgSW1tZXIoKVxuXG4vKipcbiAqIFRoZSBgcHJvZHVjZWAgZnVuY3Rpb24gdGFrZXMgYSB2YWx1ZSBhbmQgYSBcInJlY2lwZSBmdW5jdGlvblwiICh3aG9zZVxuICogcmV0dXJuIHZhbHVlIG9mdGVuIGRlcGVuZHMgb24gdGhlIGJhc2Ugc3RhdGUpLiBUaGUgcmVjaXBlIGZ1bmN0aW9uIGlzXG4gKiBmcmVlIHRvIG11dGF0ZSBpdHMgZmlyc3QgYXJndW1lbnQgaG93ZXZlciBpdCB3YW50cy4gQWxsIG11dGF0aW9ucyBhcmVcbiAqIG9ubHkgZXZlciBhcHBsaWVkIHRvIGEgX19jb3B5X18gb2YgdGhlIGJhc2Ugc3RhdGUuXG4gKlxuICogUGFzcyBvbmx5IGEgZnVuY3Rpb24gdG8gY3JlYXRlIGEgXCJjdXJyaWVkIHByb2R1Y2VyXCIgd2hpY2ggcmVsaWV2ZXMgeW91XG4gKiBmcm9tIHBhc3NpbmcgdGhlIHJlY2lwZSBmdW5jdGlvbiBldmVyeSB0aW1lLlxuICpcbiAqIE9ubHkgcGxhaW4gb2JqZWN0cyBhbmQgYXJyYXlzIGFyZSBtYWRlIG11dGFibGUuIEFsbCBvdGhlciBvYmplY3RzIGFyZVxuICogY29uc2lkZXJlZCB1bmNvcHlhYmxlLlxuICpcbiAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gaXMgX19ib3VuZF9fIHRvIGl0cyBgSW1tZXJgIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7YW55fSBiYXNlIC0gdGhlIGluaXRpYWwgc3RhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb2R1Y2VyIC0gZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHByb3h5IG9mIHRoZSBiYXNlIHN0YXRlIGFzIGZpcnN0IGFyZ3VtZW50IGFuZCB3aGljaCBjYW4gYmUgZnJlZWx5IG1vZGlmaWVkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwYXRjaExpc3RlbmVyIC0gb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aXRoIGFsbCB0aGUgcGF0Y2hlcyBwcm9kdWNlZCBoZXJlXG4gKiBAcmV0dXJucyB7YW55fSBhIG5ldyBzdGF0ZSwgb3IgdGhlIGluaXRpYWwgc3RhdGUgaWYgbm90aGluZyB3YXMgbW9kaWZpZWRcbiAqL1xuZXhwb3J0IGNvbnN0IHByb2R1Y2U6IElQcm9kdWNlID0gaW1tZXIucHJvZHVjZVxuXG4vKipcbiAqIExpa2UgYHByb2R1Y2VgLCBidXQgYHByb2R1Y2VXaXRoUGF0Y2hlc2AgYWx3YXlzIHJldHVybnMgYSB0dXBsZVxuICogW25leHRTdGF0ZSwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXNdIChpbnN0ZWFkIG9mIGp1c3QgdGhlIG5leHQgc3RhdGUpXG4gKi9cbmV4cG9ydCBjb25zdCBwcm9kdWNlV2l0aFBhdGNoZXM6IElQcm9kdWNlV2l0aFBhdGNoZXMgPSBpbW1lci5wcm9kdWNlV2l0aFBhdGNoZXMuYmluZChcblx0aW1tZXJcbilcblxuLyoqXG4gKiBQYXNzIHRydWUgdG8gYXV0b21hdGljYWxseSBmcmVlemUgYWxsIGNvcGllcyBjcmVhdGVkIGJ5IEltbWVyLlxuICpcbiAqIEFsd2F5cyBmcmVlemUgYnkgZGVmYXVsdCwgZXZlbiBpbiBwcm9kdWN0aW9uIG1vZGVcbiAqL1xuZXhwb3J0IGNvbnN0IHNldEF1dG9GcmVlemUgPSBpbW1lci5zZXRBdXRvRnJlZXplLmJpbmQoaW1tZXIpXG5cbi8qKlxuICogUGFzcyB0cnVlIHRvIGVuYWJsZSBzdHJpY3Qgc2hhbGxvdyBjb3B5LlxuICpcbiAqIEJ5IGRlZmF1bHQsIGltbWVyIGRvZXMgbm90IGNvcHkgdGhlIG9iamVjdCBkZXNjcmlwdG9ycyBzdWNoIGFzIGdldHRlciwgc2V0dGVyIGFuZCBub24tZW51bXJhYmxlIHByb3BlcnRpZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBzZXRVc2VTdHJpY3RTaGFsbG93Q29weSA9IGltbWVyLnNldFVzZVN0cmljdFNoYWxsb3dDb3B5LmJpbmQoaW1tZXIpXG5cbi8qKlxuICogQXBwbHkgYW4gYXJyYXkgb2YgSW1tZXIgcGF0Y2hlcyB0byB0aGUgZmlyc3QgYXJndW1lbnQuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyBhIHByb2R1Y2VyLCB3aGljaCBtZWFucyBjb3B5LW9uLXdyaXRlIGlzIGluIGVmZmVjdC5cbiAqL1xuZXhwb3J0IGNvbnN0IGFwcGx5UGF0Y2hlcyA9IGltbWVyLmFwcGx5UGF0Y2hlcy5iaW5kKGltbWVyKVxuXG4vKipcbiAqIENyZWF0ZSBhbiBJbW1lciBkcmFmdCBmcm9tIHRoZSBnaXZlbiBiYXNlIHN0YXRlLCB3aGljaCBtYXkgYmUgYSBkcmFmdCBpdHNlbGYuXG4gKiBUaGUgZHJhZnQgY2FuIGJlIG1vZGlmaWVkIHVudGlsIHlvdSBmaW5hbGl6ZSBpdCB3aXRoIHRoZSBgZmluaXNoRHJhZnRgIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlRHJhZnQgPSBpbW1lci5jcmVhdGVEcmFmdC5iaW5kKGltbWVyKVxuXG4vKipcbiAqIEZpbmFsaXplIGFuIEltbWVyIGRyYWZ0IGZyb20gYSBgY3JlYXRlRHJhZnRgIGNhbGwsIHJldHVybmluZyB0aGUgYmFzZSBzdGF0ZVxuICogKGlmIG5vIGNoYW5nZXMgd2VyZSBtYWRlKSBvciBhIG1vZGlmaWVkIGNvcHkuIFRoZSBkcmFmdCBtdXN0ICpub3QqIGJlXG4gKiBtdXRhdGVkIGFmdGVyd2FyZHMuXG4gKlxuICogUGFzcyBhIGZ1bmN0aW9uIGFzIHRoZSAybmQgYXJndW1lbnQgdG8gZ2VuZXJhdGUgSW1tZXIgcGF0Y2hlcyBiYXNlZCBvbiB0aGVcbiAqIGNoYW5nZXMgdGhhdCB3ZXJlIG1hZGUuXG4gKi9cbmV4cG9ydCBjb25zdCBmaW5pc2hEcmFmdCA9IGltbWVyLmZpbmlzaERyYWZ0LmJpbmQoaW1tZXIpXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyBhY3R1YWxseSBhIG5vLW9wLCBidXQgY2FuIGJlIHVzZWQgdG8gY2FzdCBhbiBpbW11dGFibGUgdHlwZVxuICogdG8gYW4gZHJhZnQgdHlwZSBhbmQgbWFrZSBUeXBlU2NyaXB0IGhhcHB5XG4gKlxuICogQHBhcmFtIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYXN0RHJhZnQ8VD4odmFsdWU6IFQpOiBEcmFmdDxUPiB7XG5cdHJldHVybiB2YWx1ZSBhcyBhbnlcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGFjdHVhbGx5IGEgbm8tb3AsIGJ1dCBjYW4gYmUgdXNlZCB0byBjYXN0IGEgbXV0YWJsZSB0eXBlXG4gKiB0byBhbiBpbW11dGFibGUgdHlwZSBhbmQgbWFrZSBUeXBlU2NyaXB0IGhhcHB5XG4gKiBAcGFyYW0gdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhc3RJbW11dGFibGU8VD4odmFsdWU6IFQpOiBJbW11dGFibGU8VD4ge1xuXHRyZXR1cm4gdmFsdWUgYXMgYW55XG59XG5cbmV4cG9ydCB7SW1tZXJ9XG5cbmV4cG9ydCB7ZW5hYmxlUGF0Y2hlc30gZnJvbSBcIi4vcGx1Z2lucy9wYXRjaGVzXCJcbmV4cG9ydCB7ZW5hYmxlTWFwU2V0fSBmcm9tIFwiLi9wbHVnaW5zL21hcHNldFwiXG4iLCAiaW1wb3J0IHsgT3BlcmF0aW9uLCBQYXRoIH0gZnJvbSAnLi4nXG5cbi8qKlxuICogYFBhdGhSZWZgIG9iamVjdHMga2VlcCBhIHNwZWNpZmljIHBhdGggaW4gYSBkb2N1bWVudCBzeW5jZWQgb3ZlciB0aW1lIGFzIG5ld1xuICogb3BlcmF0aW9ucyBhcmUgYXBwbGllZCB0byB0aGUgZWRpdG9yLiBZb3UgY2FuIGFjY2VzcyB0aGVpciBgY3VycmVudGAgcHJvcGVydHlcbiAqIGF0IGFueSB0aW1lIGZvciB0aGUgdXAtdG8tZGF0ZSBwYXRoIHZhbHVlLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aFJlZiB7XG4gIGN1cnJlbnQ6IFBhdGggfCBudWxsXG4gIGFmZmluaXR5OiAnZm9yd2FyZCcgfCAnYmFja3dhcmQnIHwgbnVsbFxuICB1bnJlZigpOiBQYXRoIHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhdGhSZWZJbnRlcmZhY2Uge1xuICAvKipcbiAgICogVHJhbnNmb3JtIHRoZSBwYXRoIHJlZidzIGN1cnJlbnQgdmFsdWUgYnkgYW4gb3BlcmF0aW9uLlxuICAgKi9cbiAgdHJhbnNmb3JtOiAocmVmOiBQYXRoUmVmLCBvcDogT3BlcmF0aW9uKSA9PiB2b2lkXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBQYXRoUmVmOiBQYXRoUmVmSW50ZXJmYWNlID0ge1xuICB0cmFuc2Zvcm0ocmVmOiBQYXRoUmVmLCBvcDogT3BlcmF0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgeyBjdXJyZW50LCBhZmZpbml0eSB9ID0gcmVmXG5cbiAgICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBwYXRoID0gUGF0aC50cmFuc2Zvcm0oY3VycmVudCwgb3AsIHsgYWZmaW5pdHkgfSlcbiAgICByZWYuY3VycmVudCA9IHBhdGhcblxuICAgIGlmIChwYXRoID09IG51bGwpIHtcbiAgICAgIHJlZi51bnJlZigpXG4gICAgfVxuICB9LFxufVxuIiwgImltcG9ydCB7IE9wZXJhdGlvbiwgUG9pbnQgfSBmcm9tICcuLidcbmltcG9ydCB7IFRleHREaXJlY3Rpb24gfSBmcm9tICcuLi90eXBlcy90eXBlcydcblxuLyoqXG4gKiBgUG9pbnRSZWZgIG9iamVjdHMga2VlcCBhIHNwZWNpZmljIHBvaW50IGluIGEgZG9jdW1lbnQgc3luY2VkIG92ZXIgdGltZSBhcyBuZXdcbiAqIG9wZXJhdGlvbnMgYXJlIGFwcGxpZWQgdG8gdGhlIGVkaXRvci4gWW91IGNhbiBhY2Nlc3MgdGhlaXIgYGN1cnJlbnRgIHByb3BlcnR5XG4gKiBhdCBhbnkgdGltZSBmb3IgdGhlIHVwLXRvLWRhdGUgcG9pbnQgdmFsdWUuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBQb2ludFJlZiB7XG4gIGN1cnJlbnQ6IFBvaW50IHwgbnVsbFxuICBhZmZpbml0eTogVGV4dERpcmVjdGlvbiB8IG51bGxcbiAgdW5yZWYoKTogUG9pbnQgfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9pbnRSZWZJbnRlcmZhY2Uge1xuICAvKipcbiAgICogVHJhbnNmb3JtIHRoZSBwb2ludCByZWYncyBjdXJyZW50IHZhbHVlIGJ5IGFuIG9wZXJhdGlvbi5cbiAgICovXG4gIHRyYW5zZm9ybTogKHJlZjogUG9pbnRSZWYsIG9wOiBPcGVyYXRpb24pID0+IHZvaWRcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFBvaW50UmVmOiBQb2ludFJlZkludGVyZmFjZSA9IHtcbiAgdHJhbnNmb3JtKHJlZjogUG9pbnRSZWYsIG9wOiBPcGVyYXRpb24pOiB2b2lkIHtcbiAgICBjb25zdCB7IGN1cnJlbnQsIGFmZmluaXR5IH0gPSByZWZcblxuICAgIGlmIChjdXJyZW50ID09IG51bGwpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHBvaW50ID0gUG9pbnQudHJhbnNmb3JtKGN1cnJlbnQsIG9wLCB7IGFmZmluaXR5IH0pXG4gICAgcmVmLmN1cnJlbnQgPSBwb2ludFxuXG4gICAgaWYgKHBvaW50ID09IG51bGwpIHtcbiAgICAgIHJlZi51bnJlZigpXG4gICAgfVxuICB9LFxufVxuIiwgImltcG9ydCB7IE9wZXJhdGlvbiwgUmFuZ2UgfSBmcm9tICcuLidcblxuLyoqXG4gKiBgUmFuZ2VSZWZgIG9iamVjdHMga2VlcCBhIHNwZWNpZmljIHJhbmdlIGluIGEgZG9jdW1lbnQgc3luY2VkIG92ZXIgdGltZSBhcyBuZXdcbiAqIG9wZXJhdGlvbnMgYXJlIGFwcGxpZWQgdG8gdGhlIGVkaXRvci4gWW91IGNhbiBhY2Nlc3MgdGhlaXIgYGN1cnJlbnRgIHByb3BlcnR5XG4gKiBhdCBhbnkgdGltZSBmb3IgdGhlIHVwLXRvLWRhdGUgcmFuZ2UgdmFsdWUuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBSYW5nZVJlZiB7XG4gIGN1cnJlbnQ6IFJhbmdlIHwgbnVsbFxuICBhZmZpbml0eTogJ2ZvcndhcmQnIHwgJ2JhY2t3YXJkJyB8ICdvdXR3YXJkJyB8ICdpbndhcmQnIHwgbnVsbFxuICB1bnJlZigpOiBSYW5nZSB8IG51bGxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYW5nZVJlZkludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gdGhlIHJhbmdlIHJlZidzIGN1cnJlbnQgdmFsdWUgYnkgYW4gb3BlcmF0aW9uLlxuICAgKi9cbiAgdHJhbnNmb3JtOiAocmVmOiBSYW5nZVJlZiwgb3A6IE9wZXJhdGlvbikgPT4gdm9pZFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgUmFuZ2VSZWY6IFJhbmdlUmVmSW50ZXJmYWNlID0ge1xuICB0cmFuc2Zvcm0ocmVmOiBSYW5nZVJlZiwgb3A6IE9wZXJhdGlvbik6IHZvaWQge1xuICAgIGNvbnN0IHsgY3VycmVudCwgYWZmaW5pdHkgfSA9IHJlZlxuXG4gICAgaWYgKGN1cnJlbnQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcGF0aCA9IFJhbmdlLnRyYW5zZm9ybShjdXJyZW50LCBvcCwgeyBhZmZpbml0eSB9KVxuICAgIHJlZi5jdXJyZW50ID0gcGF0aFxuXG4gICAgaWYgKHBhdGggPT0gbnVsbCkge1xuICAgICAgcmVmLnVucmVmKClcbiAgICB9XG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBQYXRoLCBQYXRoUmVmLCBQb2ludFJlZiwgUmFuZ2VSZWYgfSBmcm9tICcuLidcblxuZXhwb3J0IGNvbnN0IERJUlRZX1BBVEhTOiBXZWFrTWFwPEVkaXRvciwgUGF0aFtdPiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBESVJUWV9QQVRIX0tFWVM6IFdlYWtNYXA8RWRpdG9yLCBTZXQ8c3RyaW5nPj4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgRkxVU0hJTkc6IFdlYWtNYXA8RWRpdG9yLCBib29sZWFuPiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBOT1JNQUxJWklORzogV2Vha01hcDxFZGl0b3IsIGJvb2xlYW4+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IFBBVEhfUkVGUzogV2Vha01hcDxFZGl0b3IsIFNldDxQYXRoUmVmPj4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgUE9JTlRfUkVGUzogV2Vha01hcDxFZGl0b3IsIFNldDxQb2ludFJlZj4+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IFJBTkdFX1JFRlM6IFdlYWtNYXA8RWRpdG9yLCBTZXQ8UmFuZ2VSZWY+PiA9IG5ldyBXZWFrTWFwKClcbiIsICJpbXBvcnQge1xuICBJbnNlcnROb2RlT3BlcmF0aW9uLFxuICBNZXJnZU5vZGVPcGVyYXRpb24sXG4gIE1vdmVOb2RlT3BlcmF0aW9uLFxuICBPcGVyYXRpb24sXG4gIFJlbW92ZU5vZGVPcGVyYXRpb24sXG4gIFNwbGl0Tm9kZU9wZXJhdGlvbixcbn0gZnJvbSAnLi4nXG5pbXBvcnQgeyBUZXh0RGlyZWN0aW9uIH0gZnJvbSAnLi4vdHlwZXMvdHlwZXMnXG5cbi8qKlxuICogYFBhdGhgIGFycmF5cyBhcmUgYSBsaXN0IG9mIGluZGV4ZXMgdGhhdCBkZXNjcmliZSBhIG5vZGUncyBleGFjdCBwb3NpdGlvbiBpblxuICogYSBTbGF0ZSBub2RlIHRyZWUuIEFsdGhvdWdoIHRoZXkgYXJlIHVzdWFsbHkgcmVsYXRpdmUgdG8gdGhlIHJvb3QgYEVkaXRvcmBcbiAqIG9iamVjdCwgdGhleSBjYW4gYmUgcmVsYXRpdmUgdG8gYW55IGBOb2RlYCBvYmplY3QuXG4gKi9cblxuZXhwb3J0IHR5cGUgUGF0aCA9IG51bWJlcltdXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aEFuY2VzdG9yc09wdGlvbnMge1xuICByZXZlcnNlPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhdGhMZXZlbHNPcHRpb25zIHtcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXRoVHJhbnNmb3JtT3B0aW9ucyB7XG4gIGFmZmluaXR5PzogVGV4dERpcmVjdGlvbiB8IG51bGxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXRoSW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIEdldCBhIGxpc3Qgb2YgYW5jZXN0b3IgcGF0aHMgZm9yIGEgZ2l2ZW4gcGF0aC5cbiAgICpcbiAgICogVGhlIHBhdGhzIGFyZSBzb3J0ZWQgZnJvbSBzaGFsbG93ZXN0IHRvIGRlZXBlc3QgYW5jZXN0b3IuIEhvd2V2ZXIsIGlmIHRoZVxuICAgKiBgcmV2ZXJzZTogdHJ1ZWAgb3B0aW9uIGlzIHBhc3NlZCwgdGhleSBhcmUgcmV2ZXJzZWQuXG4gICAqL1xuICBhbmNlc3RvcnM6IChwYXRoOiBQYXRoLCBvcHRpb25zPzogUGF0aEFuY2VzdG9yc09wdGlvbnMpID0+IFBhdGhbXVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbW1vbiBhbmNlc3RvciBwYXRoIG9mIHR3byBwYXRocy5cbiAgICovXG4gIGNvbW1vbjogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IFBhdGhcblxuICAvKipcbiAgICogQ29tcGFyZSBhIHBhdGggdG8gYW5vdGhlciwgcmV0dXJuaW5nIGFuIGludGVnZXIgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBwYXRoXG4gICAqIHdhcyBiZWZvcmUsIGF0LCBvciBhZnRlciB0aGUgb3RoZXIuXG4gICAqXG4gICAqIE5vdGU6IFR3byBwYXRocyBvZiB1bmVxdWFsIGxlbmd0aCBjYW4gc3RpbGwgcmVjZWl2ZSBhIGAwYCByZXN1bHQgaWYgb25lIGlzXG4gICAqIGRpcmVjdGx5IGFib3ZlIG9yIGJlbG93IHRoZSBvdGhlci4gSWYgeW91IHdhbnQgZXhhY3QgbWF0Y2hpbmcsIHVzZVxuICAgKiBbW1BhdGguZXF1YWxzXV0gaW5zdGVhZC5cbiAgICovXG4gIGNvbXBhcmU6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiAtMSB8IDAgfCAxXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBlbmRzIGFmdGVyIG9uZSBvZiB0aGUgaW5kZXhlcyBpbiBhbm90aGVyLlxuICAgKi9cbiAgZW5kc0FmdGVyOiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggZW5kcyBhdCBvbmUgb2YgdGhlIGluZGV4ZXMgaW4gYW5vdGhlci5cbiAgICovXG4gIGVuZHNBdDogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGVuZHMgYmVmb3JlIG9uZSBvZiB0aGUgaW5kZXhlcyBpbiBhbm90aGVyLlxuICAgKi9cbiAgZW5kc0JlZm9yZTogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGlzIGV4YWN0bHkgZXF1YWwgdG8gYW5vdGhlci5cbiAgICovXG4gIGVxdWFsczogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHBhdGggb2YgcHJldmlvdXMgc2libGluZyBub2RlIGV4aXN0c1xuICAgKi9cbiAgaGFzUHJldmlvdXM6IChwYXRoOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBpcyBhZnRlciBhbm90aGVyLlxuICAgKi9cbiAgaXNBZnRlcjogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGlzIGFuIGFuY2VzdG9yIG9mIGFub3RoZXIuXG4gICAqL1xuICBpc0FuY2VzdG9yOiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggaXMgYmVmb3JlIGFub3RoZXIuXG4gICAqL1xuICBpc0JlZm9yZTogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGlzIGEgY2hpbGQgb2YgYW5vdGhlci5cbiAgICovXG4gIGlzQ2hpbGQ6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBpcyBlcXVhbCB0byBvciBhbiBhbmNlc3RvciBvZiBhbm90aGVyLlxuICAgKi9cbiAgaXNDb21tb246IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBpcyBhIGRlc2NlbmRhbnQgb2YgYW5vdGhlci5cbiAgICovXG4gIGlzRGVzY2VuZGFudDogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGlzIHRoZSBwYXJlbnQgb2YgYW5vdGhlci5cbiAgICovXG4gIGlzUGFyZW50OiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpcyBhIHZhbHVlIGltcGxlbWVudHMgdGhlIGBQYXRoYCBpbnRlcmZhY2UuXG4gICAqL1xuICBpc1BhdGg6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBQYXRoXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBpcyBhIHNpYmxpbmcgb2YgYW5vdGhlci5cbiAgICovXG4gIGlzU2libGluZzogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBwYXRocyBhdCBldmVyeSBsZXZlbCBkb3duIHRvIGEgcGF0aC4gTm90ZTogdGhpcyBpcyB0aGUgc2FtZVxuICAgKiBhcyBgUGF0aC5hbmNlc3RvcnNgLCBidXQgaW5jbHVkaW5nIHRoZSBwYXRoIGl0c2VsZi5cbiAgICpcbiAgICogVGhlIHBhdGhzIGFyZSBzb3J0ZWQgZnJvbSBzaGFsbG93ZXN0IHRvIGRlZXBlc3QuIEhvd2V2ZXIsIGlmIHRoZSBgcmV2ZXJzZTpcbiAgICogdHJ1ZWAgb3B0aW9uIGlzIHBhc3NlZCwgdGhleSBhcmUgcmV2ZXJzZWQuXG4gICAqL1xuICBsZXZlbHM6IChwYXRoOiBQYXRoLCBvcHRpb25zPzogUGF0aExldmVsc09wdGlvbnMpID0+IFBhdGhbXVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHBhdGgsIGdldCB0aGUgcGF0aCB0byB0aGUgbmV4dCBzaWJsaW5nIG5vZGUuXG4gICAqL1xuICBuZXh0OiAocGF0aDogUGF0aCkgPT4gUGF0aFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBvcGVyYXRpb24gY2FuIGFmZmVjdCBwYXRocyBvciBub3QuIFVzZWQgYXMgYW5cbiAgICogb3B0aW1pemF0aW9uIHdoZW4gdXBkYXRpbmcgZGlydHkgcGF0aHMgZHVyaW5nIG5vcm1hbGl6YXRpb25cbiAgICpcbiAgICogTk9URTogVGhpcyAqbXVzdCogYmUga2VwdCBpbiBzeW5jIHdpdGggdGhlIGltcGxlbWVudGF0aW9uIG9mICd0cmFuc2Zvcm0nXG4gICAqIGJlbG93XG4gICAqL1xuICBvcGVyYXRpb25DYW5UcmFuc2Zvcm1QYXRoOiAoXG4gICAgb3BlcmF0aW9uOiBPcGVyYXRpb25cbiAgKSA9PiBvcGVyYXRpb24gaXNcbiAgICB8IEluc2VydE5vZGVPcGVyYXRpb25cbiAgICB8IFJlbW92ZU5vZGVPcGVyYXRpb25cbiAgICB8IE1lcmdlTm9kZU9wZXJhdGlvblxuICAgIHwgU3BsaXROb2RlT3BlcmF0aW9uXG4gICAgfCBNb3ZlTm9kZU9wZXJhdGlvblxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHBhdGgsIHJldHVybiBhIG5ldyBwYXRoIHJlZmVycmluZyB0byB0aGUgcGFyZW50IG5vZGUgYWJvdmUgaXQuXG4gICAqL1xuICBwYXJlbnQ6IChwYXRoOiBQYXRoKSA9PiBQYXRoXG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgcGF0aCwgZ2V0IHRoZSBwYXRoIHRvIHRoZSBwcmV2aW91cyBzaWJsaW5nIG5vZGUuXG4gICAqL1xuICBwcmV2aW91czogKHBhdGg6IFBhdGgpID0+IFBhdGhcblxuICAvKipcbiAgICogR2V0IGEgcGF0aCByZWxhdGl2ZSB0byBhbiBhbmNlc3Rvci5cbiAgICovXG4gIHJlbGF0aXZlOiAocGF0aDogUGF0aCwgYW5jZXN0b3I6IFBhdGgpID0+IFBhdGhcblxuICAvKipcbiAgICogVHJhbnNmb3JtIGEgcGF0aCBieSBhbiBvcGVyYXRpb24uXG4gICAqL1xuICB0cmFuc2Zvcm06IChcbiAgICBwYXRoOiBQYXRoLFxuICAgIG9wZXJhdGlvbjogT3BlcmF0aW9uLFxuICAgIG9wdGlvbnM/OiBQYXRoVHJhbnNmb3JtT3B0aW9uc1xuICApID0+IFBhdGggfCBudWxsXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBQYXRoOiBQYXRoSW50ZXJmYWNlID0ge1xuICBhbmNlc3RvcnMocGF0aDogUGF0aCwgb3B0aW9uczogUGF0aEFuY2VzdG9yc09wdGlvbnMgPSB7fSk6IFBhdGhbXSB7XG4gICAgY29uc3QgeyByZXZlcnNlID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICBsZXQgcGF0aHMgPSBQYXRoLmxldmVscyhwYXRoLCBvcHRpb25zKVxuXG4gICAgaWYgKHJldmVyc2UpIHtcbiAgICAgIHBhdGhzID0gcGF0aHMuc2xpY2UoMSlcbiAgICB9IGVsc2Uge1xuICAgICAgcGF0aHMgPSBwYXRocy5zbGljZSgwLCAtMSlcbiAgICB9XG5cbiAgICByZXR1cm4gcGF0aHNcbiAgfSxcblxuICBjb21tb24ocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IFBhdGgge1xuICAgIGNvbnN0IGNvbW1vbjogUGF0aCA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoICYmIGkgPCBhbm90aGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBhdiA9IHBhdGhbaV1cbiAgICAgIGNvbnN0IGJ2ID0gYW5vdGhlcltpXVxuXG4gICAgICBpZiAoYXYgIT09IGJ2KSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNvbW1vbi5wdXNoKGF2KVxuICAgIH1cblxuICAgIHJldHVybiBjb21tb25cbiAgfSxcblxuICBjb21wYXJlKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiAtMSB8IDAgfCAxIHtcbiAgICBjb25zdCBtaW4gPSBNYXRoLm1pbihwYXRoLmxlbmd0aCwgYW5vdGhlci5sZW5ndGgpXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1pbjsgaSsrKSB7XG4gICAgICBpZiAocGF0aFtpXSA8IGFub3RoZXJbaV0pIHJldHVybiAtMVxuICAgICAgaWYgKHBhdGhbaV0gPiBhbm90aGVyW2ldKSByZXR1cm4gMVxuICAgIH1cblxuICAgIHJldHVybiAwXG4gIH0sXG5cbiAgZW5kc0FmdGVyKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICBjb25zdCBpID0gcGF0aC5sZW5ndGggLSAxXG4gICAgY29uc3QgYXMgPSBwYXRoLnNsaWNlKDAsIGkpXG4gICAgY29uc3QgYnMgPSBhbm90aGVyLnNsaWNlKDAsIGkpXG4gICAgY29uc3QgYXYgPSBwYXRoW2ldXG4gICAgY29uc3QgYnYgPSBhbm90aGVyW2ldXG4gICAgcmV0dXJuIFBhdGguZXF1YWxzKGFzLCBicykgJiYgYXYgPiBidlxuICB9LFxuXG4gIGVuZHNBdChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaSA9IHBhdGgubGVuZ3RoXG4gICAgY29uc3QgYXMgPSBwYXRoLnNsaWNlKDAsIGkpXG4gICAgY29uc3QgYnMgPSBhbm90aGVyLnNsaWNlKDAsIGkpXG4gICAgcmV0dXJuIFBhdGguZXF1YWxzKGFzLCBicylcbiAgfSxcblxuICBlbmRzQmVmb3JlKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICBjb25zdCBpID0gcGF0aC5sZW5ndGggLSAxXG4gICAgY29uc3QgYXMgPSBwYXRoLnNsaWNlKDAsIGkpXG4gICAgY29uc3QgYnMgPSBhbm90aGVyLnNsaWNlKDAsIGkpXG4gICAgY29uc3QgYXYgPSBwYXRoW2ldXG4gICAgY29uc3QgYnYgPSBhbm90aGVyW2ldXG4gICAgcmV0dXJuIFBhdGguZXF1YWxzKGFzLCBicykgJiYgYXYgPCBidlxuICB9LFxuXG4gIGVxdWFscyhwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHBhdGgubGVuZ3RoID09PSBhbm90aGVyLmxlbmd0aCAmJiBwYXRoLmV2ZXJ5KChuLCBpKSA9PiBuID09PSBhbm90aGVyW2ldKVxuICAgIClcbiAgfSxcblxuICBoYXNQcmV2aW91cyhwYXRoOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHBhdGhbcGF0aC5sZW5ndGggLSAxXSA+IDBcbiAgfSxcblxuICBpc0FmdGVyKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gUGF0aC5jb21wYXJlKHBhdGgsIGFub3RoZXIpID09PSAxXG4gIH0sXG5cbiAgaXNBbmNlc3RvcihwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHBhdGgubGVuZ3RoIDwgYW5vdGhlci5sZW5ndGggJiYgUGF0aC5jb21wYXJlKHBhdGgsIGFub3RoZXIpID09PSAwXG4gIH0sXG5cbiAgaXNCZWZvcmUocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBQYXRoLmNvbXBhcmUocGF0aCwgYW5vdGhlcikgPT09IC0xXG4gIH0sXG5cbiAgaXNDaGlsZChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHBhdGgubGVuZ3RoID09PSBhbm90aGVyLmxlbmd0aCArIDEgJiYgUGF0aC5jb21wYXJlKHBhdGgsIGFub3RoZXIpID09PSAwXG4gICAgKVxuICB9LFxuXG4gIGlzQ29tbW9uKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gcGF0aC5sZW5ndGggPD0gYW5vdGhlci5sZW5ndGggJiYgUGF0aC5jb21wYXJlKHBhdGgsIGFub3RoZXIpID09PSAwXG4gIH0sXG5cbiAgaXNEZXNjZW5kYW50KHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gcGF0aC5sZW5ndGggPiBhbm90aGVyLmxlbmd0aCAmJiBQYXRoLmNvbXBhcmUocGF0aCwgYW5vdGhlcikgPT09IDBcbiAgfSxcblxuICBpc1BhcmVudChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHBhdGgubGVuZ3RoICsgMSA9PT0gYW5vdGhlci5sZW5ndGggJiYgUGF0aC5jb21wYXJlKHBhdGgsIGFub3RoZXIpID09PSAwXG4gICAgKVxuICB9LFxuXG4gIGlzUGF0aCh2YWx1ZTogYW55KTogdmFsdWUgaXMgUGF0aCB7XG4gICAgcmV0dXJuIChcbiAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUpICYmXG4gICAgICAodmFsdWUubGVuZ3RoID09PSAwIHx8IHR5cGVvZiB2YWx1ZVswXSA9PT0gJ251bWJlcicpXG4gICAgKVxuICB9LFxuXG4gIGlzU2libGluZyhwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgaWYgKHBhdGgubGVuZ3RoICE9PSBhbm90aGVyLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgYXMgPSBwYXRoLnNsaWNlKDAsIC0xKVxuICAgIGNvbnN0IGJzID0gYW5vdGhlci5zbGljZSgwLCAtMSlcbiAgICBjb25zdCBhbCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXVxuICAgIGNvbnN0IGJsID0gYW5vdGhlclthbm90aGVyLmxlbmd0aCAtIDFdXG4gICAgcmV0dXJuIGFsICE9PSBibCAmJiBQYXRoLmVxdWFscyhhcywgYnMpXG4gIH0sXG5cbiAgbGV2ZWxzKHBhdGg6IFBhdGgsIG9wdGlvbnM6IFBhdGhMZXZlbHNPcHRpb25zID0ge30pOiBQYXRoW10ge1xuICAgIGNvbnN0IHsgcmV2ZXJzZSA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgY29uc3QgbGlzdDogUGF0aFtdID0gW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxpc3QucHVzaChwYXRoLnNsaWNlKDAsIGkpKVxuICAgIH1cblxuICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICBsaXN0LnJldmVyc2UoKVxuICAgIH1cblxuICAgIHJldHVybiBsaXN0XG4gIH0sXG5cbiAgbmV4dChwYXRoOiBQYXRoKTogUGF0aCB7XG4gICAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IHRoZSBuZXh0IHBhdGggb2YgYSByb290IHBhdGggWyR7cGF0aH1dLCBiZWNhdXNlIGl0IGhhcyBubyBuZXh0IGluZGV4LmBcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBsYXN0ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG4gICAgcmV0dXJuIHBhdGguc2xpY2UoMCwgLTEpLmNvbmNhdChsYXN0ICsgMSlcbiAgfSxcblxuICBvcGVyYXRpb25DYW5UcmFuc2Zvcm1QYXRoKFxuICAgIG9wZXJhdGlvbjogT3BlcmF0aW9uXG4gICk6IG9wZXJhdGlvbiBpc1xuICAgIHwgSW5zZXJ0Tm9kZU9wZXJhdGlvblxuICAgIHwgUmVtb3ZlTm9kZU9wZXJhdGlvblxuICAgIHwgTWVyZ2VOb2RlT3BlcmF0aW9uXG4gICAgfCBTcGxpdE5vZGVPcGVyYXRpb25cbiAgICB8IE1vdmVOb2RlT3BlcmF0aW9uIHtcbiAgICBzd2l0Y2ggKG9wZXJhdGlvbi50eXBlKSB7XG4gICAgICBjYXNlICdpbnNlcnRfbm9kZSc6XG4gICAgICBjYXNlICdyZW1vdmVfbm9kZSc6XG4gICAgICBjYXNlICdtZXJnZV9ub2RlJzpcbiAgICAgIGNhc2UgJ3NwbGl0X25vZGUnOlxuICAgICAgY2FzZSAnbW92ZV9ub2RlJzpcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSxcblxuICBwYXJlbnQocGF0aDogUGF0aCk6IFBhdGgge1xuICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZ2V0IHRoZSBwYXJlbnQgcGF0aCBvZiB0aGUgcm9vdCBwYXRoIFske3BhdGh9XS5gKVxuICAgIH1cblxuICAgIHJldHVybiBwYXRoLnNsaWNlKDAsIC0xKVxuICB9LFxuXG4gIHByZXZpb3VzKHBhdGg6IFBhdGgpOiBQYXRoIHtcbiAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgdGhlIHByZXZpb3VzIHBhdGggb2YgYSByb290IHBhdGggWyR7cGF0aH1dLCBiZWNhdXNlIGl0IGhhcyBubyBwcmV2aW91cyBpbmRleC5gXG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgbGFzdCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXVxuXG4gICAgaWYgKGxhc3QgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCB0aGUgcHJldmlvdXMgcGF0aCBvZiBhIGZpcnN0IGNoaWxkIHBhdGggWyR7cGF0aH1dIGJlY2F1c2UgaXQgd291bGQgcmVzdWx0IGluIGEgbmVnYXRpdmUgaW5kZXguYFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBwYXRoLnNsaWNlKDAsIC0xKS5jb25jYXQobGFzdCAtIDEpXG4gIH0sXG5cbiAgcmVsYXRpdmUocGF0aDogUGF0aCwgYW5jZXN0b3I6IFBhdGgpOiBQYXRoIHtcbiAgICBpZiAoIVBhdGguaXNBbmNlc3RvcihhbmNlc3RvciwgcGF0aCkgJiYgIVBhdGguZXF1YWxzKHBhdGgsIGFuY2VzdG9yKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCB0aGUgcmVsYXRpdmUgcGF0aCBvZiBbJHtwYXRofV0gaW5zaWRlIGFuY2VzdG9yIFske2FuY2VzdG9yfV0sIGJlY2F1c2UgaXQgaXMgbm90IGFib3ZlIG9yIGVxdWFsIHRvIHRoZSBwYXRoLmBcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gcGF0aC5zbGljZShhbmNlc3Rvci5sZW5ndGgpXG4gIH0sXG5cbiAgdHJhbnNmb3JtKFxuICAgIHBhdGg6IFBhdGggfCBudWxsLFxuICAgIG9wZXJhdGlvbjogT3BlcmF0aW9uLFxuICAgIG9wdGlvbnM6IFBhdGhUcmFuc2Zvcm1PcHRpb25zID0ge31cbiAgKTogUGF0aCB8IG51bGwge1xuICAgIGlmICghcGF0aCkgcmV0dXJuIG51bGxcblxuICAgIC8vIFBFUkY6IHVzZSBkZXN0cnVjdGluZyBpbnN0ZWFkIG9mIGltbWVyXG4gICAgY29uc3QgcCA9IFsuLi5wYXRoXVxuICAgIGNvbnN0IHsgYWZmaW5pdHkgPSAnZm9yd2FyZCcgfSA9IG9wdGlvbnNcblxuICAgIC8vIFBFUkY6IEV4aXQgZWFybHkgaWYgdGhlIG9wZXJhdGlvbiBpcyBndWFyYW50ZWVkIG5vdCB0byBoYXZlIGFuIGVmZmVjdC5cbiAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBwXG4gICAgfVxuXG4gICAgc3dpdGNoIChvcGVyYXRpb24udHlwZSkge1xuICAgICAgY2FzZSAnaW5zZXJ0X25vZGUnOiB7XG4gICAgICAgIGNvbnN0IHsgcGF0aDogb3AgfSA9IG9wZXJhdGlvblxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBQYXRoLmVxdWFscyhvcCwgcCkgfHxcbiAgICAgICAgICBQYXRoLmVuZHNCZWZvcmUob3AsIHApIHx8XG4gICAgICAgICAgUGF0aC5pc0FuY2VzdG9yKG9wLCBwKVxuICAgICAgICApIHtcbiAgICAgICAgICBwW29wLmxlbmd0aCAtIDFdICs9IDFcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JlbW92ZV9ub2RlJzoge1xuICAgICAgICBjb25zdCB7IHBhdGg6IG9wIH0gPSBvcGVyYXRpb25cblxuICAgICAgICBpZiAoUGF0aC5lcXVhbHMob3AsIHApIHx8IFBhdGguaXNBbmNlc3RvcihvcCwgcCkpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9IGVsc2UgaWYgKFBhdGguZW5kc0JlZm9yZShvcCwgcCkpIHtcbiAgICAgICAgICBwW29wLmxlbmd0aCAtIDFdIC09IDFcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lcmdlX25vZGUnOiB7XG4gICAgICAgIGNvbnN0IHsgcGF0aDogb3AsIHBvc2l0aW9uIH0gPSBvcGVyYXRpb25cblxuICAgICAgICBpZiAoUGF0aC5lcXVhbHMob3AsIHApIHx8IFBhdGguZW5kc0JlZm9yZShvcCwgcCkpIHtcbiAgICAgICAgICBwW29wLmxlbmd0aCAtIDFdIC09IDFcbiAgICAgICAgfSBlbHNlIGlmIChQYXRoLmlzQW5jZXN0b3Iob3AsIHApKSB7XG4gICAgICAgICAgcFtvcC5sZW5ndGggLSAxXSAtPSAxXG4gICAgICAgICAgcFtvcC5sZW5ndGhdICs9IHBvc2l0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdzcGxpdF9ub2RlJzoge1xuICAgICAgICBjb25zdCB7IHBhdGg6IG9wLCBwb3NpdGlvbiB9ID0gb3BlcmF0aW9uXG5cbiAgICAgICAgaWYgKFBhdGguZXF1YWxzKG9wLCBwKSkge1xuICAgICAgICAgIGlmIChhZmZpbml0eSA9PT0gJ2ZvcndhcmQnKSB7XG4gICAgICAgICAgICBwW3AubGVuZ3RoIC0gMV0gKz0gMVxuICAgICAgICAgIH0gZWxzZSBpZiAoYWZmaW5pdHkgPT09ICdiYWNrd2FyZCcpIHtcbiAgICAgICAgICAgIC8vIE5vdGhpbmcsIGJlY2F1c2UgaXQgc3RpbGwgcmVmZXJzIHRvIHRoZSByaWdodCBwYXRoLlxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChQYXRoLmVuZHNCZWZvcmUob3AsIHApKSB7XG4gICAgICAgICAgcFtvcC5sZW5ndGggLSAxXSArPSAxXG4gICAgICAgIH0gZWxzZSBpZiAoUGF0aC5pc0FuY2VzdG9yKG9wLCBwKSAmJiBwYXRoW29wLmxlbmd0aF0gPj0gcG9zaXRpb24pIHtcbiAgICAgICAgICBwW29wLmxlbmd0aCAtIDFdICs9IDFcbiAgICAgICAgICBwW29wLmxlbmd0aF0gLT0gcG9zaXRpb25cbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21vdmVfbm9kZSc6IHtcbiAgICAgICAgY29uc3QgeyBwYXRoOiBvcCwgbmV3UGF0aDogb25wIH0gPSBvcGVyYXRpb25cblxuICAgICAgICAvLyBJZiB0aGUgb2xkIGFuZCBuZXcgcGF0aCBhcmUgdGhlIHNhbWUsIGl0J3MgYSBuby1vcC5cbiAgICAgICAgaWYgKFBhdGguZXF1YWxzKG9wLCBvbnApKSB7XG4gICAgICAgICAgcmV0dXJuIHBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChQYXRoLmlzQW5jZXN0b3Iob3AsIHApIHx8IFBhdGguZXF1YWxzKG9wLCBwKSkge1xuICAgICAgICAgIGNvbnN0IGNvcHkgPSBvbnAuc2xpY2UoKVxuXG4gICAgICAgICAgaWYgKFBhdGguZW5kc0JlZm9yZShvcCwgb25wKSAmJiBvcC5sZW5ndGggPCBvbnAubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb3B5W29wLmxlbmd0aCAtIDFdIC09IDFcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gY29weS5jb25jYXQocC5zbGljZShvcC5sZW5ndGgpKVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIFBhdGguaXNTaWJsaW5nKG9wLCBvbnApICYmXG4gICAgICAgICAgKFBhdGguaXNBbmNlc3RvcihvbnAsIHApIHx8IFBhdGguZXF1YWxzKG9ucCwgcCkpXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChQYXRoLmVuZHNCZWZvcmUob3AsIHApKSB7XG4gICAgICAgICAgICBwW29wLmxlbmd0aCAtIDFdIC09IDFcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcFtvcC5sZW5ndGggLSAxXSArPSAxXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIFBhdGguZW5kc0JlZm9yZShvbnAsIHApIHx8XG4gICAgICAgICAgUGF0aC5lcXVhbHMob25wLCBwKSB8fFxuICAgICAgICAgIFBhdGguaXNBbmNlc3RvcihvbnAsIHApXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChQYXRoLmVuZHNCZWZvcmUob3AsIHApKSB7XG4gICAgICAgICAgICBwW29wLmxlbmd0aCAtIDFdIC09IDFcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwW29ucC5sZW5ndGggLSAxXSArPSAxXG4gICAgICAgIH0gZWxzZSBpZiAoUGF0aC5lbmRzQmVmb3JlKG9wLCBwKSkge1xuICAgICAgICAgIGlmIChQYXRoLmVxdWFscyhvbnAsIHApKSB7XG4gICAgICAgICAgICBwW29ucC5sZW5ndGggLSAxXSArPSAxXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcFtvcC5sZW5ndGggLSAxXSAtPSAxXG4gICAgICAgIH1cblxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwXG4gIH0sXG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3R5cGVvZihvKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvO1xuICB9IDogZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbztcbiAgfSwgX3R5cGVvZihvKTtcbn0iLCAiaW1wb3J0IF90eXBlb2YgZnJvbSBcIi4vdHlwZW9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdG9QcmltaXRpdmUoaW5wdXQsIGhpbnQpIHtcbiAgaWYgKF90eXBlb2YoaW5wdXQpICE9PSBcIm9iamVjdFwiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7XG4gIHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTtcbiAgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciByZXMgPSBwcmltLmNhbGwoaW5wdXQsIGhpbnQgfHwgXCJkZWZhdWx0XCIpO1xuICAgIGlmIChfdHlwZW9mKHJlcykgIT09IFwib2JqZWN0XCIpIHJldHVybiByZXM7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpO1xuICB9XG4gIHJldHVybiAoaGludCA9PT0gXCJzdHJpbmdcIiA/IFN0cmluZyA6IE51bWJlcikoaW5wdXQpO1xufSIsICJpbXBvcnQgX3R5cGVvZiBmcm9tIFwiLi90eXBlb2YuanNcIjtcbmltcG9ydCB0b1ByaW1pdGl2ZSBmcm9tIFwiLi90b1ByaW1pdGl2ZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkoYXJnKSB7XG4gIHZhciBrZXkgPSB0b1ByaW1pdGl2ZShhcmcsIFwic3RyaW5nXCIpO1xuICByZXR1cm4gX3R5cGVvZihrZXkpID09PSBcInN5bWJvbFwiID8ga2V5IDogU3RyaW5nKGtleSk7XG59IiwgImltcG9ydCB0b1Byb3BlcnR5S2V5IGZyb20gXCIuL3RvUHJvcGVydHlLZXkuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAga2V5ID0gdG9Qcm9wZXJ0eUtleShrZXkpO1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gb2JqO1xufSIsICJpbXBvcnQgeyBjcmVhdGVEcmFmdCwgZmluaXNoRHJhZnQsIGlzRHJhZnQgfSBmcm9tICdpbW1lcidcbmltcG9ydCB7XG4gIEFuY2VzdG9yLFxuICBEZXNjZW5kYW50LFxuICBFZGl0b3IsXG4gIEVsZW1lbnQsXG4gIE5vZGUsXG4gIE5vZGVFbnRyeSxcbiAgT3BlcmF0aW9uLFxuICBQYXRoLFxuICBQb2ludCxcbiAgUmFuZ2UsXG4gIFNjcnViYmVyLFxuICBTZWxlY3Rpb24sXG4gIFRleHQsXG59IGZyb20gJy4uLy4uL2luZGV4J1xuXG5leHBvcnQgaW50ZXJmYWNlIEdlbmVyYWxUcmFuc2Zvcm1zIHtcbiAgLyoqXG4gICAqIFRyYW5zZm9ybSB0aGUgZWRpdG9yIGJ5IGFuIG9wZXJhdGlvbi5cbiAgICovXG4gIHRyYW5zZm9ybTogKGVkaXRvcjogRWRpdG9yLCBvcDogT3BlcmF0aW9uKSA9PiB2b2lkXG59XG5cbmNvbnN0IGFwcGx5VG9EcmFmdCA9IChlZGl0b3I6IEVkaXRvciwgc2VsZWN0aW9uOiBTZWxlY3Rpb24sIG9wOiBPcGVyYXRpb24pID0+IHtcbiAgc3dpdGNoIChvcC50eXBlKSB7XG4gICAgY2FzZSAnaW5zZXJ0X25vZGUnOiB7XG4gICAgICBjb25zdCB7IHBhdGgsIG5vZGUgfSA9IG9wXG4gICAgICBjb25zdCBwYXJlbnQgPSBOb2RlLnBhcmVudChlZGl0b3IsIHBhdGgpXG4gICAgICBjb25zdCBpbmRleCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXVxuXG4gICAgICBpZiAoaW5kZXggPiBwYXJlbnQuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgQ2Fubm90IGFwcGx5IGFuIFwiaW5zZXJ0X25vZGVcIiBvcGVyYXRpb24gYXQgcGF0aCBbJHtwYXRofV0gYmVjYXVzZSB0aGUgZGVzdGluYXRpb24gaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBub2RlLmBcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBwYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAwLCBub2RlKVxuXG4gICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgIGZvciAoY29uc3QgW3BvaW50LCBrZXldIG9mIFJhbmdlLnBvaW50cyhzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgc2VsZWN0aW9uW2tleV0gPSBQb2ludC50cmFuc2Zvcm0ocG9pbnQsIG9wKSFcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGNhc2UgJ2luc2VydF90ZXh0Jzoge1xuICAgICAgY29uc3QgeyBwYXRoLCBvZmZzZXQsIHRleHQgfSA9IG9wXG4gICAgICBpZiAodGV4dC5sZW5ndGggPT09IDApIGJyZWFrXG4gICAgICBjb25zdCBub2RlID0gTm9kZS5sZWFmKGVkaXRvciwgcGF0aClcbiAgICAgIGNvbnN0IGJlZm9yZSA9IG5vZGUudGV4dC5zbGljZSgwLCBvZmZzZXQpXG4gICAgICBjb25zdCBhZnRlciA9IG5vZGUudGV4dC5zbGljZShvZmZzZXQpXG4gICAgICBub2RlLnRleHQgPSBiZWZvcmUgKyB0ZXh0ICsgYWZ0ZXJcblxuICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICBmb3IgKGNvbnN0IFtwb2ludCwga2V5XSBvZiBSYW5nZS5wb2ludHMoc2VsZWN0aW9uKSkge1xuICAgICAgICAgIHNlbGVjdGlvbltrZXldID0gUG9pbnQudHJhbnNmb3JtKHBvaW50LCBvcCkhXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjYXNlICdtZXJnZV9ub2RlJzoge1xuICAgICAgY29uc3QgeyBwYXRoIH0gPSBvcFxuICAgICAgY29uc3Qgbm9kZSA9IE5vZGUuZ2V0KGVkaXRvciwgcGF0aClcbiAgICAgIGNvbnN0IHByZXZQYXRoID0gUGF0aC5wcmV2aW91cyhwYXRoKVxuICAgICAgY29uc3QgcHJldiA9IE5vZGUuZ2V0KGVkaXRvciwgcHJldlBhdGgpXG4gICAgICBjb25zdCBwYXJlbnQgPSBOb2RlLnBhcmVudChlZGl0b3IsIHBhdGgpXG4gICAgICBjb25zdCBpbmRleCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXVxuXG4gICAgICBpZiAoVGV4dC5pc1RleHQobm9kZSkgJiYgVGV4dC5pc1RleHQocHJldikpIHtcbiAgICAgICAgcHJldi50ZXh0ICs9IG5vZGUudGV4dFxuICAgICAgfSBlbHNlIGlmICghVGV4dC5pc1RleHQobm9kZSkgJiYgIVRleHQuaXNUZXh0KHByZXYpKSB7XG4gICAgICAgIHByZXYuY2hpbGRyZW4ucHVzaCguLi5ub2RlLmNoaWxkcmVuKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBDYW5ub3QgYXBwbHkgYSBcIm1lcmdlX25vZGVcIiBvcGVyYXRpb24gYXQgcGF0aCBbJHtwYXRofV0gdG8gbm9kZXMgb2YgZGlmZmVyZW50IGludGVyZmFjZXM6ICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICl9ICR7U2NydWJiZXIuc3RyaW5naWZ5KHByZXYpfWBcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBwYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKVxuXG4gICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgIGZvciAoY29uc3QgW3BvaW50LCBrZXldIG9mIFJhbmdlLnBvaW50cyhzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgc2VsZWN0aW9uW2tleV0gPSBQb2ludC50cmFuc2Zvcm0ocG9pbnQsIG9wKSFcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGNhc2UgJ21vdmVfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCwgbmV3UGF0aCB9ID0gb3BcblxuICAgICAgaWYgKFBhdGguaXNBbmNlc3RvcihwYXRoLCBuZXdQYXRoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYENhbm5vdCBtb3ZlIGEgcGF0aCBbJHtwYXRofV0gdG8gbmV3IHBhdGggWyR7bmV3UGF0aH1dIGJlY2F1c2UgdGhlIGRlc3RpbmF0aW9uIGlzIGluc2lkZSBpdHNlbGYuYFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vZGUgPSBOb2RlLmdldChlZGl0b3IsIHBhdGgpXG4gICAgICBjb25zdCBwYXJlbnQgPSBOb2RlLnBhcmVudChlZGl0b3IsIHBhdGgpXG4gICAgICBjb25zdCBpbmRleCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXVxuXG4gICAgICAvLyBUaGlzIGlzIHRyaWNreSwgYnV0IHNpbmNlIHRoZSBgcGF0aGAgYW5kIGBuZXdQYXRoYCBib3RoIHJlZmVyIHRvXG4gICAgICAvLyB0aGUgc2FtZSBzbmFwc2hvdCBpbiB0aW1lLCB0aGVyZSdzIGEgbWlzbWF0Y2guIEFmdGVyIGVpdGhlclxuICAgICAgLy8gcmVtb3ZpbmcgdGhlIG9yaWdpbmFsIHBvc2l0aW9uLCB0aGUgc2Vjb25kIHN0ZXAncyBwYXRoIGNhbiBiZSBvdXRcbiAgICAgIC8vIG9mIGRhdGUuIFNvIGluc3RlYWQgb2YgdXNpbmcgdGhlIGBvcC5uZXdQYXRoYCBkaXJlY3RseSwgd2VcbiAgICAgIC8vIHRyYW5zZm9ybSBgb3AucGF0aGAgdG8gYXNjZXJ0YWluIHdoYXQgdGhlIGBuZXdQYXRoYCB3b3VsZCBiZSBhZnRlclxuICAgICAgLy8gdGhlIG9wZXJhdGlvbiB3YXMgYXBwbGllZC5cbiAgICAgIHBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICBjb25zdCB0cnVlUGF0aCA9IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wKSFcbiAgICAgIGNvbnN0IG5ld1BhcmVudCA9IE5vZGUuZ2V0KGVkaXRvciwgUGF0aC5wYXJlbnQodHJ1ZVBhdGgpKSBhcyBBbmNlc3RvclxuICAgICAgY29uc3QgbmV3SW5kZXggPSB0cnVlUGF0aFt0cnVlUGF0aC5sZW5ndGggLSAxXVxuXG4gICAgICBuZXdQYXJlbnQuY2hpbGRyZW4uc3BsaWNlKG5ld0luZGV4LCAwLCBub2RlKVxuXG4gICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgIGZvciAoY29uc3QgW3BvaW50LCBrZXldIG9mIFJhbmdlLnBvaW50cyhzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgc2VsZWN0aW9uW2tleV0gPSBQb2ludC50cmFuc2Zvcm0ocG9pbnQsIG9wKSFcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGNhc2UgJ3JlbW92ZV9ub2RlJzoge1xuICAgICAgY29uc3QgeyBwYXRoIH0gPSBvcFxuICAgICAgY29uc3QgaW5kZXggPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cbiAgICAgIGNvbnN0IHBhcmVudCA9IE5vZGUucGFyZW50KGVkaXRvciwgcGF0aClcbiAgICAgIHBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpXG5cbiAgICAgIC8vIFRyYW5zZm9ybSBhbGwgdGhlIHBvaW50cyBpbiB0aGUgdmFsdWUsIGJ1dCBpZiB0aGUgcG9pbnQgd2FzIGluIHRoZVxuICAgICAgLy8gbm9kZSB0aGF0IHdhcyByZW1vdmVkIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSByYW5nZSBvciByZW1vdmUgaXQuXG4gICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgIGZvciAoY29uc3QgW3BvaW50LCBrZXldIG9mIFJhbmdlLnBvaW50cyhzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gUG9pbnQudHJhbnNmb3JtKHBvaW50LCBvcClcblxuICAgICAgICAgIGlmIChzZWxlY3Rpb24gIT0gbnVsbCAmJiByZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2VsZWN0aW9uW2tleV0gPSByZXN1bHRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHByZXY6IE5vZGVFbnRyeTxUZXh0PiB8IHVuZGVmaW5lZFxuICAgICAgICAgICAgbGV0IG5leHQ6IE5vZGVFbnRyeTxUZXh0PiB8IHVuZGVmaW5lZFxuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtuLCBwXSBvZiBOb2RlLnRleHRzKGVkaXRvcikpIHtcbiAgICAgICAgICAgICAgaWYgKFBhdGguY29tcGFyZShwLCBwYXRoKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBwcmV2ID0gW24sIHBdXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV4dCA9IFtuLCBwXVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHByZWZlck5leHQgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKHByZXYgJiYgbmV4dCkge1xuICAgICAgICAgICAgICBpZiAoUGF0aC5lcXVhbHMobmV4dFsxXSwgcGF0aCkpIHtcbiAgICAgICAgICAgICAgICBwcmVmZXJOZXh0ID0gIVBhdGguaGFzUHJldmlvdXMobmV4dFsxXSlcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmVmZXJOZXh0ID1cbiAgICAgICAgICAgICAgICAgIFBhdGguY29tbW9uKHByZXZbMV0sIHBhdGgpLmxlbmd0aCA8XG4gICAgICAgICAgICAgICAgICBQYXRoLmNvbW1vbihuZXh0WzFdLCBwYXRoKS5sZW5ndGhcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocHJldiAmJiAhcHJlZmVyTmV4dCkge1xuICAgICAgICAgICAgICBwb2ludC5wYXRoID0gcHJldlsxXVxuICAgICAgICAgICAgICBwb2ludC5vZmZzZXQgPSBwcmV2WzBdLnRleHQubGVuZ3RoXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5leHQpIHtcbiAgICAgICAgICAgICAgcG9pbnQucGF0aCA9IG5leHRbMV1cbiAgICAgICAgICAgICAgcG9pbnQub2Zmc2V0ID0gMFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2VsZWN0aW9uID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGNhc2UgJ3JlbW92ZV90ZXh0Jzoge1xuICAgICAgY29uc3QgeyBwYXRoLCBvZmZzZXQsIHRleHQgfSA9IG9wXG4gICAgICBpZiAodGV4dC5sZW5ndGggPT09IDApIGJyZWFrXG4gICAgICBjb25zdCBub2RlID0gTm9kZS5sZWFmKGVkaXRvciwgcGF0aClcbiAgICAgIGNvbnN0IGJlZm9yZSA9IG5vZGUudGV4dC5zbGljZSgwLCBvZmZzZXQpXG4gICAgICBjb25zdCBhZnRlciA9IG5vZGUudGV4dC5zbGljZShvZmZzZXQgKyB0ZXh0Lmxlbmd0aClcbiAgICAgIG5vZGUudGV4dCA9IGJlZm9yZSArIGFmdGVyXG5cbiAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgZm9yIChjb25zdCBbcG9pbnQsIGtleV0gb2YgUmFuZ2UucG9pbnRzKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICBzZWxlY3Rpb25ba2V5XSA9IFBvaW50LnRyYW5zZm9ybShwb2ludCwgb3ApIVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY2FzZSAnc2V0X25vZGUnOiB7XG4gICAgICBjb25zdCB7IHBhdGgsIHByb3BlcnRpZXMsIG5ld1Byb3BlcnRpZXMgfSA9IG9wXG5cbiAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBzZXQgcHJvcGVydGllcyBvbiB0aGUgcm9vdCBub2RlIWApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vZGUgPSBOb2RlLmdldChlZGl0b3IsIHBhdGgpXG5cbiAgICAgIGZvciAoY29uc3Qga2V5IGluIG5ld1Byb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ2NoaWxkcmVuJyB8fCBrZXkgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHNldCB0aGUgXCIke2tleX1cIiBwcm9wZXJ0eSBvZiBub2RlcyFgKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmFsdWUgPSBuZXdQcm9wZXJ0aWVzWzxrZXlvZiBOb2RlPmtleV1cblxuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgIGRlbGV0ZSBub2RlWzxrZXlvZiBOb2RlPmtleV1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlWzxrZXlvZiBOb2RlPmtleV0gPSB2YWx1ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHByb3BlcnRpZXMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgZGVmaW5lZCwgYnV0IGFyZSBub3cgbWlzc2luZywgbXVzdCBiZSBkZWxldGVkXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmICghbmV3UHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgZGVsZXRlIG5vZGVbPGtleW9mIE5vZGU+a2V5XVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY2FzZSAnc2V0X3NlbGVjdGlvbic6IHtcbiAgICAgIGNvbnN0IHsgbmV3UHJvcGVydGllcyB9ID0gb3BcblxuICAgICAgaWYgKG5ld1Byb3BlcnRpZXMgPT0gbnVsbCkge1xuICAgICAgICBzZWxlY3Rpb24gPSBuZXdQcm9wZXJ0aWVzXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc2VsZWN0aW9uID09IG51bGwpIHtcbiAgICAgICAgICBpZiAoIVJhbmdlLmlzUmFuZ2UobmV3UHJvcGVydGllcykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYENhbm5vdCBhcHBseSBhbiBpbmNvbXBsZXRlIFwic2V0X3NlbGVjdGlvblwiIG9wZXJhdGlvbiBwcm9wZXJ0aWVzICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICAgICAgICAgIG5ld1Byb3BlcnRpZXNcbiAgICAgICAgICAgICAgKX0gd2hlbiB0aGVyZSBpcyBubyBjdXJyZW50IHNlbGVjdGlvbi5gXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZWN0aW9uID0geyAuLi5uZXdQcm9wZXJ0aWVzIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5ld1Byb3BlcnRpZXMpIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IG5ld1Byb3BlcnRpZXNbPGtleW9mIFJhbmdlPmtleV1cblxuICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnYW5jaG9yJyB8fCBrZXkgPT09ICdmb2N1cycpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVtb3ZlIHRoZSBcIiR7a2V5fVwiIHNlbGVjdGlvbiBwcm9wZXJ0eWApXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlbGV0ZSBzZWxlY3Rpb25bPGtleW9mIFJhbmdlPmtleV1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0aW9uWzxrZXlvZiBSYW5nZT5rZXldID0gdmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjYXNlICdzcGxpdF9ub2RlJzoge1xuICAgICAgY29uc3QgeyBwYXRoLCBwb3NpdGlvbiwgcHJvcGVydGllcyB9ID0gb3BcblxuICAgICAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgQ2Fubm90IGFwcGx5IGEgXCJzcGxpdF9ub2RlXCIgb3BlcmF0aW9uIGF0IHBhdGggWyR7cGF0aH1dIGJlY2F1c2UgdGhlIHJvb3Qgbm9kZSBjYW5ub3QgYmUgc3BsaXQuYFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vZGUgPSBOb2RlLmdldChlZGl0b3IsIHBhdGgpXG4gICAgICBjb25zdCBwYXJlbnQgPSBOb2RlLnBhcmVudChlZGl0b3IsIHBhdGgpXG4gICAgICBjb25zdCBpbmRleCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXVxuICAgICAgbGV0IG5ld05vZGU6IERlc2NlbmRhbnRcblxuICAgICAgaWYgKFRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICAgIGNvbnN0IGJlZm9yZSA9IG5vZGUudGV4dC5zbGljZSgwLCBwb3NpdGlvbilcbiAgICAgICAgY29uc3QgYWZ0ZXIgPSBub2RlLnRleHQuc2xpY2UocG9zaXRpb24pXG4gICAgICAgIG5vZGUudGV4dCA9IGJlZm9yZVxuICAgICAgICBuZXdOb2RlID0ge1xuICAgICAgICAgIC4uLihwcm9wZXJ0aWVzIGFzIFBhcnRpYWw8VGV4dD4pLFxuICAgICAgICAgIHRleHQ6IGFmdGVyLFxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBiZWZvcmUgPSBub2RlLmNoaWxkcmVuLnNsaWNlKDAsIHBvc2l0aW9uKVxuICAgICAgICBjb25zdCBhZnRlciA9IG5vZGUuY2hpbGRyZW4uc2xpY2UocG9zaXRpb24pXG4gICAgICAgIG5vZGUuY2hpbGRyZW4gPSBiZWZvcmVcblxuICAgICAgICBuZXdOb2RlID0ge1xuICAgICAgICAgIC4uLihwcm9wZXJ0aWVzIGFzIFBhcnRpYWw8RWxlbWVudD4pLFxuICAgICAgICAgIGNoaWxkcmVuOiBhZnRlcixcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4ICsgMSwgMCwgbmV3Tm9kZSlcblxuICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICBmb3IgKGNvbnN0IFtwb2ludCwga2V5XSBvZiBSYW5nZS5wb2ludHMoc2VsZWN0aW9uKSkge1xuICAgICAgICAgIHNlbGVjdGlvbltrZXldID0gUG9pbnQudHJhbnNmb3JtKHBvaW50LCBvcCkhXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNlbGVjdGlvblxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgR2VuZXJhbFRyYW5zZm9ybXM6IEdlbmVyYWxUcmFuc2Zvcm1zID0ge1xuICB0cmFuc2Zvcm0oZWRpdG9yOiBFZGl0b3IsIG9wOiBPcGVyYXRpb24pOiB2b2lkIHtcbiAgICBlZGl0b3IuY2hpbGRyZW4gPSBjcmVhdGVEcmFmdChlZGl0b3IuY2hpbGRyZW4pXG4gICAgbGV0IHNlbGVjdGlvbiA9IGVkaXRvci5zZWxlY3Rpb24gJiYgY3JlYXRlRHJhZnQoZWRpdG9yLnNlbGVjdGlvbilcblxuICAgIHRyeSB7XG4gICAgICBzZWxlY3Rpb24gPSBhcHBseVRvRHJhZnQoZWRpdG9yLCBzZWxlY3Rpb24sIG9wKVxuICAgIH0gZmluYWxseSB7XG4gICAgICBlZGl0b3IuY2hpbGRyZW4gPSBmaW5pc2hEcmFmdChlZGl0b3IuY2hpbGRyZW4pXG5cbiAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgZWRpdG9yLnNlbGVjdGlvbiA9IGlzRHJhZnQoc2VsZWN0aW9uKVxuICAgICAgICAgID8gKGZpbmlzaERyYWZ0KHNlbGVjdGlvbikgYXMgUmFuZ2UpXG4gICAgICAgICAgOiBzZWxlY3Rpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVkaXRvci5zZWxlY3Rpb24gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICB9LFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWxlbWVudCwgTG9jYXRpb24sIE5vZGUsIFBhdGggfSBmcm9tICcuLi8uLi9pbmRleCdcbmltcG9ydCB7IE5vZGVNYXRjaCwgUHJvcHNDb21wYXJlLCBQcm9wc01lcmdlIH0gZnJvbSAnLi4vZWRpdG9yJ1xuaW1wb3J0IHsgTWF4aW1pemVNb2RlLCBSYW5nZU1vZGUgfSBmcm9tICcuLi8uLi90eXBlcy90eXBlcydcblxuZXhwb3J0IGludGVyZmFjZSBOb2RlSW5zZXJ0Tm9kZXNPcHRpb25zPFQgZXh0ZW5kcyBOb2RlPiB7XG4gIGF0PzogTG9jYXRpb25cbiAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgbW9kZT86IFJhbmdlTW9kZVxuICBoYW5naW5nPzogYm9vbGVhblxuICBzZWxlY3Q/OiBib29sZWFuXG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVUcmFuc2Zvcm1zIHtcbiAgLyoqXG4gICAqIEluc2VydCBub2RlcyBpbiB0aGUgZWRpdG9yXG4gICAqIGF0IHRoZSBzcGVjaWZpZWQgbG9jYXRpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgY3VycmVudCBzZWxlY3Rpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIGluc2VydE5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG5vZGVzOiBOb2RlIHwgTm9kZVtdLFxuICAgIG9wdGlvbnM/OiBOb2RlSW5zZXJ0Tm9kZXNPcHRpb25zPFQ+XG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBMaWZ0IG5vZGVzIGF0IGEgc3BlY2lmaWMgbG9jYXRpb24gdXB3YXJkcyBpbiB0aGUgZG9jdW1lbnQgdHJlZSwgc3BsaXR0aW5nXG4gICAqIHRoZWlyIHBhcmVudCBpbiB0d28gaWYgbmVjZXNzYXJ5LlxuICAgKi9cbiAgbGlmdE5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBhdD86IExvY2F0aW9uXG4gICAgICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICAgICAgbW9kZT86IE1heGltaXplTW9kZVxuICAgICAgdm9pZHM/OiBib29sZWFuXG4gICAgfVxuICApID0+IHZvaWRcblxuICAvKipcbiAgICogTWVyZ2UgYSBub2RlIGF0IGEgbG9jYXRpb24gd2l0aCB0aGUgcHJldmlvdXMgbm9kZSBvZiB0aGUgc2FtZSBkZXB0aCxcbiAgICogcmVtb3ZpbmcgYW55IGVtcHR5IGNvbnRhaW5pbmcgbm9kZXMgYWZ0ZXIgdGhlIG1lcmdlIGlmIG5lY2Vzc2FyeS5cbiAgICovXG4gIG1lcmdlTm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGF0PzogTG9jYXRpb25cbiAgICAgIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gICAgICBtb2RlPzogUmFuZ2VNb2RlXG4gICAgICBoYW5naW5nPzogYm9vbGVhblxuICAgICAgdm9pZHM/OiBib29sZWFuXG4gICAgfVxuICApID0+IHZvaWRcblxuICAvKipcbiAgICogTW92ZSB0aGUgbm9kZXMgYXQgYSBsb2NhdGlvbiB0byBhIG5ldyBsb2NhdGlvbi5cbiAgICovXG4gIG1vdmVOb2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zOiB7XG4gICAgICBhdD86IExvY2F0aW9uXG4gICAgICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICAgICAgbW9kZT86IE1heGltaXplTW9kZVxuICAgICAgdG86IFBhdGhcbiAgICAgIHZvaWRzPzogYm9vbGVhblxuICAgIH1cbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgbm9kZXMgYXQgYSBzcGVjaWZpYyBsb2NhdGlvbiBpbiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICByZW1vdmVOb2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzoge1xuICAgICAgYXQ/OiBMb2NhdGlvblxuICAgICAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgICAgIG1vZGU/OiBSYW5nZU1vZGVcbiAgICAgIGhhbmdpbmc/OiBib29sZWFuXG4gICAgICB2b2lkcz86IGJvb2xlYW5cbiAgICB9XG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBTZXQgbmV3IHByb3BlcnRpZXMgb24gdGhlIG5vZGVzIGF0IGEgbG9jYXRpb24uXG4gICAqL1xuICBzZXROb2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBwcm9wczogUGFydGlhbDxUPixcbiAgICBvcHRpb25zPzoge1xuICAgICAgYXQ/OiBMb2NhdGlvblxuICAgICAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgICAgIG1vZGU/OiBNYXhpbWl6ZU1vZGVcbiAgICAgIGhhbmdpbmc/OiBib29sZWFuXG4gICAgICBzcGxpdD86IGJvb2xlYW5cbiAgICAgIHZvaWRzPzogYm9vbGVhblxuICAgICAgY29tcGFyZT86IFByb3BzQ29tcGFyZVxuICAgICAgbWVyZ2U/OiBQcm9wc01lcmdlXG4gICAgfVxuICApID0+IHZvaWRcblxuICAvKipcbiAgICogU3BsaXQgdGhlIG5vZGVzIGF0IGEgc3BlY2lmaWMgbG9jYXRpb24uXG4gICAqL1xuICBzcGxpdE5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBhdD86IExvY2F0aW9uXG4gICAgICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICAgICAgbW9kZT86IFJhbmdlTW9kZVxuICAgICAgYWx3YXlzPzogYm9vbGVhblxuICAgICAgaGVpZ2h0PzogbnVtYmVyXG4gICAgICB2b2lkcz86IGJvb2xlYW5cbiAgICB9XG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBVbnNldCBwcm9wZXJ0aWVzIG9uIHRoZSBub2RlcyBhdCBhIGxvY2F0aW9uLlxuICAgKi9cbiAgdW5zZXROb2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBwcm9wczogc3RyaW5nIHwgc3RyaW5nW10sXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGF0PzogTG9jYXRpb25cbiAgICAgIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gICAgICBtb2RlPzogTWF4aW1pemVNb2RlXG4gICAgICBoYW5naW5nPzogYm9vbGVhblxuICAgICAgc3BsaXQ/OiBib29sZWFuXG4gICAgICB2b2lkcz86IGJvb2xlYW5cbiAgICB9XG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBVbndyYXAgdGhlIG5vZGVzIGF0IGEgbG9jYXRpb24gZnJvbSBhIHBhcmVudCBub2RlLCBzcGxpdHRpbmcgdGhlIHBhcmVudCBpZlxuICAgKiBuZWNlc3NhcnkgdG8gZW5zdXJlIHRoYXQgb25seSB0aGUgY29udGVudCBpbiB0aGUgcmFuZ2UgaXMgdW53cmFwcGVkLlxuICAgKi9cbiAgdW53cmFwTm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGF0PzogTG9jYXRpb25cbiAgICAgIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gICAgICBtb2RlPzogTWF4aW1pemVNb2RlXG4gICAgICBzcGxpdD86IGJvb2xlYW5cbiAgICAgIHZvaWRzPzogYm9vbGVhblxuICAgIH1cbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIFdyYXAgdGhlIG5vZGVzIGF0IGEgbG9jYXRpb24gaW4gYSBuZXcgY29udGFpbmVyIG5vZGUsIHNwbGl0dGluZyB0aGUgZWRnZXNcbiAgICogb2YgdGhlIHJhbmdlIGZpcnN0IHRvIGVuc3VyZSB0aGF0IG9ubHkgdGhlIGNvbnRlbnQgaW4gdGhlIHJhbmdlIGlzIHdyYXBwZWQuXG4gICAqL1xuICB3cmFwTm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgZWxlbWVudDogRWxlbWVudCxcbiAgICBvcHRpb25zPzoge1xuICAgICAgYXQ/OiBMb2NhdGlvblxuICAgICAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgICAgIG1vZGU/OiBNYXhpbWl6ZU1vZGVcbiAgICAgIHNwbGl0PzogYm9vbGVhblxuICAgICAgdm9pZHM/OiBib29sZWFuXG4gICAgfVxuICApID0+IHZvaWRcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IE5vZGVUcmFuc2Zvcm1zOiBOb2RlVHJhbnNmb3JtcyA9IHtcbiAgaW5zZXJ0Tm9kZXMoZWRpdG9yLCBub2Rlcywgb3B0aW9ucykge1xuICAgIGVkaXRvci5pbnNlcnROb2Rlcyhub2Rlcywgb3B0aW9ucylcbiAgfSxcbiAgbGlmdE5vZGVzKGVkaXRvciwgb3B0aW9ucykge1xuICAgIGVkaXRvci5saWZ0Tm9kZXMob3B0aW9ucylcbiAgfSxcbiAgbWVyZ2VOb2RlcyhlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IubWVyZ2VOb2RlcyhvcHRpb25zKVxuICB9LFxuICBtb3ZlTm9kZXMoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLm1vdmVOb2RlcyhvcHRpb25zKVxuICB9LFxuICByZW1vdmVOb2RlcyhlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IucmVtb3ZlTm9kZXMob3B0aW9ucylcbiAgfSxcbiAgc2V0Tm9kZXMoZWRpdG9yLCBwcm9wcywgb3B0aW9ucykge1xuICAgIGVkaXRvci5zZXROb2Rlcyhwcm9wcywgb3B0aW9ucylcbiAgfSxcbiAgc3BsaXROb2RlcyhlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3Iuc3BsaXROb2RlcyhvcHRpb25zKVxuICB9LFxuICB1bnNldE5vZGVzKGVkaXRvciwgcHJvcHMsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IudW5zZXROb2Rlcyhwcm9wcywgb3B0aW9ucylcbiAgfSxcbiAgdW53cmFwTm9kZXMoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLnVud3JhcE5vZGVzKG9wdGlvbnMpXG4gIH0sXG4gIHdyYXBOb2RlcyhlZGl0b3IsIGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3Iud3JhcE5vZGVzKGVsZW1lbnQsIG9wdGlvbnMpXG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBMb2NhdGlvbiwgUG9pbnQsIFJhbmdlIH0gZnJvbSAnLi4vLi4vaW5kZXgnXG5pbXBvcnQgeyBNb3ZlVW5pdCwgU2VsZWN0aW9uRWRnZSB9IGZyb20gJy4uLy4uL3R5cGVzL3R5cGVzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdGlvbkNvbGxhcHNlT3B0aW9ucyB7XG4gIGVkZ2U/OiBTZWxlY3Rpb25FZGdlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0aW9uTW92ZU9wdGlvbnMge1xuICBkaXN0YW5jZT86IG51bWJlclxuICB1bml0PzogTW92ZVVuaXRcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbiAgZWRnZT86IFNlbGVjdGlvbkVkZ2Vcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWxlY3Rpb25TZXRQb2ludE9wdGlvbnMge1xuICBlZGdlPzogU2VsZWN0aW9uRWRnZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdGlvblRyYW5zZm9ybXMge1xuICAvKipcbiAgICogQ29sbGFwc2UgdGhlIHNlbGVjdGlvbi5cbiAgICovXG4gIGNvbGxhcHNlOiAoZWRpdG9yOiBFZGl0b3IsIG9wdGlvbnM/OiBTZWxlY3Rpb25Db2xsYXBzZU9wdGlvbnMpID0+IHZvaWRcblxuICAvKipcbiAgICogVW5zZXQgdGhlIHNlbGVjdGlvbi5cbiAgICovXG4gIGRlc2VsZWN0OiAoZWRpdG9yOiBFZGl0b3IpID0+IHZvaWRcblxuICAvKipcbiAgICogTW92ZSB0aGUgc2VsZWN0aW9uJ3MgcG9pbnQgZm9yd2FyZCBvciBiYWNrd2FyZC5cbiAgICovXG4gIG1vdmU6IChlZGl0b3I6IEVkaXRvciwgb3B0aW9ucz86IFNlbGVjdGlvbk1vdmVPcHRpb25zKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc2VsZWN0aW9uIHRvIGEgbmV3IHZhbHVlLlxuICAgKi9cbiAgc2VsZWN0OiAoZWRpdG9yOiBFZGl0b3IsIHRhcmdldDogTG9jYXRpb24pID0+IHZvaWRcblxuICAvKipcbiAgICogU2V0IG5ldyBwcm9wZXJ0aWVzIG9uIG9uZSBvZiB0aGUgc2VsZWN0aW9uJ3MgcG9pbnRzLlxuICAgKi9cbiAgc2V0UG9pbnQ6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBwcm9wczogUGFydGlhbDxQb2ludD4sXG4gICAgb3B0aW9ucz86IFNlbGVjdGlvblNldFBvaW50T3B0aW9uc1xuICApID0+IHZvaWRcblxuICAvKipcbiAgICogU2V0IG5ldyBwcm9wZXJ0aWVzIG9uIHRoZSBzZWxlY3Rpb24uXG4gICAqL1xuICBzZXRTZWxlY3Rpb246IChlZGl0b3I6IEVkaXRvciwgcHJvcHM6IFBhcnRpYWw8UmFuZ2U+KSA9PiB2b2lkXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBTZWxlY3Rpb25UcmFuc2Zvcm1zOiBTZWxlY3Rpb25UcmFuc2Zvcm1zID0ge1xuICBjb2xsYXBzZShlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IuY29sbGFwc2Uob3B0aW9ucylcbiAgfSxcbiAgZGVzZWxlY3QoZWRpdG9yKSB7XG4gICAgZWRpdG9yLmRlc2VsZWN0KClcbiAgfSxcbiAgbW92ZShlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IubW92ZShvcHRpb25zKVxuICB9LFxuICBzZWxlY3QoZWRpdG9yLCB0YXJnZXQpIHtcbiAgICBlZGl0b3Iuc2VsZWN0KHRhcmdldClcbiAgfSxcbiAgc2V0UG9pbnQoZWRpdG9yLCBwcm9wcywgb3B0aW9ucykge1xuICAgIGVkaXRvci5zZXRQb2ludChwcm9wcywgb3B0aW9ucylcbiAgfSxcbiAgc2V0U2VsZWN0aW9uKGVkaXRvciwgcHJvcHMpIHtcbiAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKHByb3BzKVxuICB9LFxufVxuIiwgImltcG9ydCB7IGlzUGxhaW5PYmplY3QgfSBmcm9tICdpcy1wbGFpbi1vYmplY3QnXG5cbi8qXG4gIEN1c3RvbSBkZWVwIGVxdWFsIGNvbXBhcmlzb24gZm9yIFNsYXRlIG5vZGVzLlxuXG4gIFdlIGRvbid0IG5lZWQgZ2VuZXJhbCBwdXJwb3NlIGRlZXAgZXF1YWxpdHk7XG4gIFNsYXRlIG9ubHkgc3VwcG9ydHMgcGxhaW4gdmFsdWVzLCBBcnJheXMsIGFuZCBuZXN0ZWQgb2JqZWN0cy5cbiAgQ29tcGxleCB2YWx1ZXMgbmVzdGVkIGluc2lkZSBBcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWQuXG5cbiAgU2xhdGUgb2JqZWN0cyBhcmUgZGVzaWduZWQgdG8gYmUgc2VyaWFsaXNlZCwgc29cbiAgbWlzc2luZyBrZXlzIGFyZSBkZWxpYmVyYXRlbHkgbm9ybWFsaXNlZCB0byB1bmRlZmluZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBpc0RlZXBFcXVhbCA9IChcbiAgbm9kZTogUmVjb3JkPHN0cmluZywgYW55PixcbiAgYW5vdGhlcjogUmVjb3JkPHN0cmluZywgYW55PlxuKTogYm9vbGVhbiA9PiB7XG4gIGZvciAoY29uc3Qga2V5IGluIG5vZGUpIHtcbiAgICBjb25zdCBhID0gbm9kZVtrZXldXG4gICAgY29uc3QgYiA9IGFub3RoZXJba2V5XVxuICAgIGlmIChpc1BsYWluT2JqZWN0KGEpICYmIGlzUGxhaW5PYmplY3QoYikpIHtcbiAgICAgIGlmICghaXNEZWVwRXF1YWwoYSwgYikpIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhKSAmJiBBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2VcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYVtpXSAhPT0gYltpXSkgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhICE9PSBiKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICAvKlxuICAgIERlZXAgb2JqZWN0IGVxdWFsaXR5IGlzIG9ubHkgbmVjZXNzYXJ5IGluIG9uZSBkaXJlY3Rpb247IGluIHRoZSByZXZlcnNlIGRpcmVjdGlvblxuICAgIHdlIGFyZSBvbmx5IGxvb2tpbmcgZm9yIGtleXMgdGhhdCBhcmUgbWlzc2luZy5cbiAgICBBcyBhYm92ZSwgdW5kZWZpbmVkIGtleXMgYXJlIG5vcm1hbGlzZWQgdG8gbWlzc2luZy5cbiAgKi9cblxuICBmb3IgKGNvbnN0IGtleSBpbiBhbm90aGVyKSB7XG4gICAgaWYgKG5vZGVba2V5XSA9PT0gdW5kZWZpbmVkICYmIGFub3RoZXJba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaV07XG4gICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59IiwgImltcG9ydCBvYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIGZyb20gXCIuL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7XG4gIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9O1xuICB2YXIgdGFyZ2V0ID0gb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTtcbiAgdmFyIGtleSwgaTtcbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTtcbiAgICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn0iLCAiaW1wb3J0IHsgcHJvZHVjZSB9IGZyb20gJ2ltbWVyJ1xuaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ2lzLXBsYWluLW9iamVjdCdcbmltcG9ydCB7IEV4dGVuZGVkVHlwZSwgT3BlcmF0aW9uLCBQYXRoLCBQb2ludCwgUG9pbnRFbnRyeSB9IGZyb20gJy4uJ1xuaW1wb3J0IHsgUmFuZ2VEaXJlY3Rpb24gfSBmcm9tICcuLi90eXBlcy90eXBlcydcblxuLyoqXG4gKiBgUmFuZ2VgIG9iamVjdHMgYXJlIGEgc2V0IG9mIHBvaW50cyB0aGF0IHJlZmVyIHRvIGEgc3BlY2lmaWMgc3BhbiBvZiBhIFNsYXRlXG4gKiBkb2N1bWVudC4gVGhleSBjYW4gZGVmaW5lIGEgc3BhbiBpbnNpZGUgYSBzaW5nbGUgbm9kZSBvciBhIGNhbiBzcGFuIGFjcm9zc1xuICogbXVsdGlwbGUgbm9kZXMuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBCYXNlUmFuZ2Uge1xuICBhbmNob3I6IFBvaW50XG4gIGZvY3VzOiBQb2ludFxufVxuXG5leHBvcnQgdHlwZSBSYW5nZSA9IEV4dGVuZGVkVHlwZTwnUmFuZ2UnLCBCYXNlUmFuZ2U+XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmFuZ2VFZGdlc09wdGlvbnMge1xuICByZXZlcnNlPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhbmdlVHJhbnNmb3JtT3B0aW9ucyB7XG4gIGFmZmluaXR5PzogUmFuZ2VEaXJlY3Rpb24gfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmFuZ2VJbnRlcmZhY2Uge1xuICAvKipcbiAgICogR2V0IHRoZSBzdGFydCBhbmQgZW5kIHBvaW50cyBvZiBhIHJhbmdlLCBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSBhcHBlYXJcbiAgICogaW4gdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgZWRnZXM6IChyYW5nZTogUmFuZ2UsIG9wdGlvbnM/OiBSYW5nZUVkZ2VzT3B0aW9ucykgPT4gW1BvaW50LCBQb2ludF1cblxuICAvKipcbiAgICogR2V0IHRoZSBlbmQgcG9pbnQgb2YgYSByYW5nZS5cbiAgICovXG4gIGVuZDogKHJhbmdlOiBSYW5nZSkgPT4gUG9pbnRcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSByYW5nZSBpcyBleGFjdGx5IGVxdWFsIHRvIGFub3RoZXIuXG4gICAqL1xuICBlcXVhbHM6IChyYW5nZTogUmFuZ2UsIGFub3RoZXI6IFJhbmdlKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcmFuZ2UgaW5jbHVkZXMgYSBwYXRoLCBhIHBvaW50IG9yIHBhcnQgb2YgYW5vdGhlciByYW5nZS5cbiAgICovXG4gIGluY2x1ZGVzOiAocmFuZ2U6IFJhbmdlLCB0YXJnZXQ6IFBhdGggfCBQb2ludCB8IFJhbmdlKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaW50ZXJzZWN0aW9uIG9mIGEgcmFuZ2Ugd2l0aCBhbm90aGVyLlxuICAgKi9cbiAgaW50ZXJzZWN0aW9uOiAocmFuZ2U6IFJhbmdlLCBhbm90aGVyOiBSYW5nZSkgPT4gUmFuZ2UgfCBudWxsXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcmFuZ2UgaXMgYmFja3dhcmQsIG1lYW5pbmcgdGhhdCBpdHMgYW5jaG9yIHBvaW50IGFwcGVhcnMgaW4gdGhlXG4gICAqIGRvY3VtZW50IF9hZnRlcl8gaXRzIGZvY3VzIHBvaW50LlxuICAgKi9cbiAgaXNCYWNrd2FyZDogKHJhbmdlOiBSYW5nZSkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHJhbmdlIGlzIGNvbGxhcHNlZCwgbWVhbmluZyB0aGF0IGJvdGggaXRzIGFuY2hvciBhbmQgZm9jdXNcbiAgICogcG9pbnRzIHJlZmVyIHRvIHRoZSBleGFjdCBzYW1lIHBvc2l0aW9uIGluIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIGlzQ29sbGFwc2VkOiAocmFuZ2U6IFJhbmdlKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcmFuZ2UgaXMgZXhwYW5kZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG9wcG9zaXRlIG9mIFtbUmFuZ2UuaXNDb2xsYXBzZWRdXSBhbmQgaXMgcHJvdmlkZWQgZm9yIGxlZ2liaWxpdHkuXG4gICAqL1xuICBpc0V4cGFuZGVkOiAocmFuZ2U6IFJhbmdlKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcmFuZ2UgaXMgZm9yd2FyZC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgb3Bwb3NpdGUgb2YgW1tSYW5nZS5pc0JhY2t3YXJkXV0gYW5kIGlzIHByb3ZpZGVkIGZvciBsZWdpYmlsaXR5LlxuICAgKi9cbiAgaXNGb3J3YXJkOiAocmFuZ2U6IFJhbmdlKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaW1wbGVtZW50cyB0aGUgW1tSYW5nZV1dIGludGVyZmFjZS5cbiAgICovXG4gIGlzUmFuZ2U6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBSYW5nZVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlIHRocm91Z2ggYWxsIG9mIHRoZSBwb2ludCBlbnRyaWVzIGluIGEgcmFuZ2UuXG4gICAqL1xuICBwb2ludHM6IChyYW5nZTogUmFuZ2UpID0+IEdlbmVyYXRvcjxQb2ludEVudHJ5LCB2b2lkLCB1bmRlZmluZWQ+XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhcnQgcG9pbnQgb2YgYSByYW5nZS5cbiAgICovXG4gIHN0YXJ0OiAocmFuZ2U6IFJhbmdlKSA9PiBQb2ludFxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gYSByYW5nZSBieSBhbiBvcGVyYXRpb24uXG4gICAqL1xuICB0cmFuc2Zvcm06IChcbiAgICByYW5nZTogUmFuZ2UsXG4gICAgb3A6IE9wZXJhdGlvbixcbiAgICBvcHRpb25zPzogUmFuZ2VUcmFuc2Zvcm1PcHRpb25zXG4gICkgPT4gUmFuZ2UgfCBudWxsXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBSYW5nZTogUmFuZ2VJbnRlcmZhY2UgPSB7XG4gIGVkZ2VzKHJhbmdlOiBSYW5nZSwgb3B0aW9uczogUmFuZ2VFZGdlc09wdGlvbnMgPSB7fSk6IFtQb2ludCwgUG9pbnRdIHtcbiAgICBjb25zdCB7IHJldmVyc2UgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgIGNvbnN0IHsgYW5jaG9yLCBmb2N1cyB9ID0gcmFuZ2VcbiAgICByZXR1cm4gUmFuZ2UuaXNCYWNrd2FyZChyYW5nZSkgPT09IHJldmVyc2VcbiAgICAgID8gW2FuY2hvciwgZm9jdXNdXG4gICAgICA6IFtmb2N1cywgYW5jaG9yXVxuICB9LFxuXG4gIGVuZChyYW5nZTogUmFuZ2UpOiBQb2ludCB7XG4gICAgY29uc3QgWywgZW5kXSA9IFJhbmdlLmVkZ2VzKHJhbmdlKVxuICAgIHJldHVybiBlbmRcbiAgfSxcblxuICBlcXVhbHMocmFuZ2U6IFJhbmdlLCBhbm90aGVyOiBSYW5nZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICBQb2ludC5lcXVhbHMocmFuZ2UuYW5jaG9yLCBhbm90aGVyLmFuY2hvcikgJiZcbiAgICAgIFBvaW50LmVxdWFscyhyYW5nZS5mb2N1cywgYW5vdGhlci5mb2N1cylcbiAgICApXG4gIH0sXG5cbiAgaW5jbHVkZXMocmFuZ2U6IFJhbmdlLCB0YXJnZXQ6IFBhdGggfCBQb2ludCB8IFJhbmdlKTogYm9vbGVhbiB7XG4gICAgaWYgKFJhbmdlLmlzUmFuZ2UodGFyZ2V0KSkge1xuICAgICAgaWYgKFxuICAgICAgICBSYW5nZS5pbmNsdWRlcyhyYW5nZSwgdGFyZ2V0LmFuY2hvcikgfHxcbiAgICAgICAgUmFuZ2UuaW5jbHVkZXMocmFuZ2UsIHRhcmdldC5mb2N1cylcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBjb25zdCBbcnMsIHJlXSA9IFJhbmdlLmVkZ2VzKHJhbmdlKVxuICAgICAgY29uc3QgW3RzLCB0ZV0gPSBSYW5nZS5lZGdlcyh0YXJnZXQpXG4gICAgICByZXR1cm4gUG9pbnQuaXNCZWZvcmUocnMsIHRzKSAmJiBQb2ludC5pc0FmdGVyKHJlLCB0ZSlcbiAgICB9XG5cbiAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyhyYW5nZSlcbiAgICBsZXQgaXNBZnRlclN0YXJ0ID0gZmFsc2VcbiAgICBsZXQgaXNCZWZvcmVFbmQgPSBmYWxzZVxuXG4gICAgaWYgKFBvaW50LmlzUG9pbnQodGFyZ2V0KSkge1xuICAgICAgaXNBZnRlclN0YXJ0ID0gUG9pbnQuY29tcGFyZSh0YXJnZXQsIHN0YXJ0KSA+PSAwXG4gICAgICBpc0JlZm9yZUVuZCA9IFBvaW50LmNvbXBhcmUodGFyZ2V0LCBlbmQpIDw9IDBcbiAgICB9IGVsc2Uge1xuICAgICAgaXNBZnRlclN0YXJ0ID0gUGF0aC5jb21wYXJlKHRhcmdldCwgc3RhcnQucGF0aCkgPj0gMFxuICAgICAgaXNCZWZvcmVFbmQgPSBQYXRoLmNvbXBhcmUodGFyZ2V0LCBlbmQucGF0aCkgPD0gMFxuICAgIH1cblxuICAgIHJldHVybiBpc0FmdGVyU3RhcnQgJiYgaXNCZWZvcmVFbmRcbiAgfSxcblxuICBpbnRlcnNlY3Rpb24ocmFuZ2U6IFJhbmdlLCBhbm90aGVyOiBSYW5nZSk6IFJhbmdlIHwgbnVsbCB7XG4gICAgY29uc3QgeyBhbmNob3IsIGZvY3VzLCAuLi5yZXN0IH0gPSByYW5nZVxuICAgIGNvbnN0IFtzMSwgZTFdID0gUmFuZ2UuZWRnZXMocmFuZ2UpXG4gICAgY29uc3QgW3MyLCBlMl0gPSBSYW5nZS5lZGdlcyhhbm90aGVyKVxuICAgIGNvbnN0IHN0YXJ0ID0gUG9pbnQuaXNCZWZvcmUoczEsIHMyKSA/IHMyIDogczFcbiAgICBjb25zdCBlbmQgPSBQb2ludC5pc0JlZm9yZShlMSwgZTIpID8gZTEgOiBlMlxuXG4gICAgaWYgKFBvaW50LmlzQmVmb3JlKGVuZCwgc3RhcnQpKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4geyBhbmNob3I6IHN0YXJ0LCBmb2N1czogZW5kLCAuLi5yZXN0IH1cbiAgICB9XG4gIH0sXG5cbiAgaXNCYWNrd2FyZChyYW5nZTogUmFuZ2UpOiBib29sZWFuIHtcbiAgICBjb25zdCB7IGFuY2hvciwgZm9jdXMgfSA9IHJhbmdlXG4gICAgcmV0dXJuIFBvaW50LmlzQWZ0ZXIoYW5jaG9yLCBmb2N1cylcbiAgfSxcblxuICBpc0NvbGxhcHNlZChyYW5nZTogUmFuZ2UpOiBib29sZWFuIHtcbiAgICBjb25zdCB7IGFuY2hvciwgZm9jdXMgfSA9IHJhbmdlXG4gICAgcmV0dXJuIFBvaW50LmVxdWFscyhhbmNob3IsIGZvY3VzKVxuICB9LFxuXG4gIGlzRXhwYW5kZWQocmFuZ2U6IFJhbmdlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICFSYW5nZS5pc0NvbGxhcHNlZChyYW5nZSlcbiAgfSxcblxuICBpc0ZvcndhcmQocmFuZ2U6IFJhbmdlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICFSYW5nZS5pc0JhY2t3YXJkKHJhbmdlKVxuICB9LFxuXG4gIGlzUmFuZ2UodmFsdWU6IGFueSk6IHZhbHVlIGlzIFJhbmdlIHtcbiAgICByZXR1cm4gKFxuICAgICAgaXNQbGFpbk9iamVjdCh2YWx1ZSkgJiZcbiAgICAgIFBvaW50LmlzUG9pbnQodmFsdWUuYW5jaG9yKSAmJlxuICAgICAgUG9pbnQuaXNQb2ludCh2YWx1ZS5mb2N1cylcbiAgICApXG4gIH0sXG5cbiAgKnBvaW50cyhyYW5nZTogUmFuZ2UpOiBHZW5lcmF0b3I8UG9pbnRFbnRyeSwgdm9pZCwgdW5kZWZpbmVkPiB7XG4gICAgeWllbGQgW3JhbmdlLmFuY2hvciwgJ2FuY2hvciddXG4gICAgeWllbGQgW3JhbmdlLmZvY3VzLCAnZm9jdXMnXVxuICB9LFxuXG4gIHN0YXJ0KHJhbmdlOiBSYW5nZSk6IFBvaW50IHtcbiAgICBjb25zdCBbc3RhcnRdID0gUmFuZ2UuZWRnZXMocmFuZ2UpXG4gICAgcmV0dXJuIHN0YXJ0XG4gIH0sXG5cbiAgdHJhbnNmb3JtKFxuICAgIHJhbmdlOiBSYW5nZSB8IG51bGwsXG4gICAgb3A6IE9wZXJhdGlvbixcbiAgICBvcHRpb25zOiBSYW5nZVRyYW5zZm9ybU9wdGlvbnMgPSB7fVxuICApOiBSYW5nZSB8IG51bGwge1xuICAgIHJldHVybiBwcm9kdWNlKHJhbmdlLCByID0+IHtcbiAgICAgIGlmIChyID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG4gICAgICBjb25zdCB7IGFmZmluaXR5ID0gJ2lud2FyZCcgfSA9IG9wdGlvbnNcbiAgICAgIGxldCBhZmZpbml0eUFuY2hvcjogJ2ZvcndhcmQnIHwgJ2JhY2t3YXJkJyB8IG51bGxcbiAgICAgIGxldCBhZmZpbml0eUZvY3VzOiAnZm9yd2FyZCcgfCAnYmFja3dhcmQnIHwgbnVsbFxuXG4gICAgICBpZiAoYWZmaW5pdHkgPT09ICdpbndhcmQnKSB7XG4gICAgICAgIC8vIElmIHRoZSByYW5nZSBpcyBjb2xsYXBzZWQsIG1ha2Ugc3VyZSB0byB1c2UgdGhlIHNhbWUgYWZmaW5pdHkgdG9cbiAgICAgICAgLy8gYXZvaWQgdGhlIHR3byBwb2ludHMgcGFzc2luZyBlYWNoIG90aGVyIGFuZCBleHBhbmRpbmcgaW4gdGhlIG9wcG9zaXRlXG4gICAgICAgIC8vIGRpcmVjdGlvblxuICAgICAgICBjb25zdCBpc0NvbGxhcHNlZCA9IFJhbmdlLmlzQ29sbGFwc2VkKHIpXG4gICAgICAgIGlmIChSYW5nZS5pc0ZvcndhcmQocikpIHtcbiAgICAgICAgICBhZmZpbml0eUFuY2hvciA9ICdmb3J3YXJkJ1xuICAgICAgICAgIGFmZmluaXR5Rm9jdXMgPSBpc0NvbGxhcHNlZCA/IGFmZmluaXR5QW5jaG9yIDogJ2JhY2t3YXJkJ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFmZmluaXR5QW5jaG9yID0gJ2JhY2t3YXJkJ1xuICAgICAgICAgIGFmZmluaXR5Rm9jdXMgPSBpc0NvbGxhcHNlZCA/IGFmZmluaXR5QW5jaG9yIDogJ2ZvcndhcmQnXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYWZmaW5pdHkgPT09ICdvdXR3YXJkJykge1xuICAgICAgICBpZiAoUmFuZ2UuaXNGb3J3YXJkKHIpKSB7XG4gICAgICAgICAgYWZmaW5pdHlBbmNob3IgPSAnYmFja3dhcmQnXG4gICAgICAgICAgYWZmaW5pdHlGb2N1cyA9ICdmb3J3YXJkJ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFmZmluaXR5QW5jaG9yID0gJ2ZvcndhcmQnXG4gICAgICAgICAgYWZmaW5pdHlGb2N1cyA9ICdiYWNrd2FyZCdcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWZmaW5pdHlBbmNob3IgPSBhZmZpbml0eVxuICAgICAgICBhZmZpbml0eUZvY3VzID0gYWZmaW5pdHlcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFuY2hvciA9IFBvaW50LnRyYW5zZm9ybShyLmFuY2hvciwgb3AsIHsgYWZmaW5pdHk6IGFmZmluaXR5QW5jaG9yIH0pXG4gICAgICBjb25zdCBmb2N1cyA9IFBvaW50LnRyYW5zZm9ybShyLmZvY3VzLCBvcCwgeyBhZmZpbml0eTogYWZmaW5pdHlGb2N1cyB9KVxuXG4gICAgICBpZiAoIWFuY2hvciB8fCAhZm9jdXMpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cblxuICAgICAgci5hbmNob3IgPSBhbmNob3JcbiAgICAgIHIuZm9jdXMgPSBmb2N1c1xuICAgIH0pXG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ2lzLXBsYWluLW9iamVjdCdcbmltcG9ydCB7IEFuY2VzdG9yLCBEZXNjZW5kYW50LCBFZGl0b3IsIEV4dGVuZGVkVHlwZSwgTm9kZSwgUGF0aCB9IGZyb20gJy4uJ1xuXG4vKipcbiAqIGBFbGVtZW50YCBvYmplY3RzIGFyZSBhIHR5cGUgb2Ygbm9kZSBpbiBhIFNsYXRlIGRvY3VtZW50IHRoYXQgY29udGFpbiBvdGhlclxuICogZWxlbWVudCBub2RlcyBvciB0ZXh0IG5vZGVzLiBUaGV5IGNhbiBiZSBlaXRoZXIgXCJibG9ja3NcIiBvciBcImlubGluZXNcIlxuICogZGVwZW5kaW5nIG9uIHRoZSBTbGF0ZSBlZGl0b3IncyBjb25maWd1cmF0aW9uLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUVsZW1lbnQge1xuICBjaGlsZHJlbjogRGVzY2VuZGFudFtdXG59XG5cbmV4cG9ydCB0eXBlIEVsZW1lbnQgPSBFeHRlbmRlZFR5cGU8J0VsZW1lbnQnLCBCYXNlRWxlbWVudD5cblxuZXhwb3J0IGludGVyZmFjZSBFbGVtZW50SW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaW1wbGVtZW50cyB0aGUgJ0FuY2VzdG9yJyBpbnRlcmZhY2UuXG4gICAqL1xuICBpc0FuY2VzdG9yOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgQW5jZXN0b3JcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpbXBsZW1lbnRzIHRoZSBgRWxlbWVudGAgaW50ZXJmYWNlLlxuICAgKi9cbiAgaXNFbGVtZW50OiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgRWxlbWVudFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGFuIGFycmF5IG9mIGBFbGVtZW50YCBvYmplY3RzLlxuICAgKi9cbiAgaXNFbGVtZW50TGlzdDogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIEVsZW1lbnRbXVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHNldCBvZiBwcm9wcyBpcyBhIHBhcnRpYWwgb2YgRWxlbWVudC5cbiAgICovXG4gIGlzRWxlbWVudFByb3BzOiAocHJvcHM6IGFueSkgPT4gcHJvcHMgaXMgUGFydGlhbDxFbGVtZW50PlxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGltcGxlbWVudHMgdGhlIGBFbGVtZW50YCBpbnRlcmZhY2UgYW5kIGhhcyBlbGVtZW50S2V5IHdpdGggc2VsZWN0ZWQgdmFsdWUuXG4gICAqIERlZmF1bHQgaXQgY2hlY2sgdG8gYHR5cGVgIGtleSB2YWx1ZVxuICAgKi9cbiAgaXNFbGVtZW50VHlwZTogPFQgZXh0ZW5kcyBFbGVtZW50PihcbiAgICB2YWx1ZTogYW55LFxuICAgIGVsZW1lbnRWYWw6IHN0cmluZyxcbiAgICBlbGVtZW50S2V5Pzogc3RyaW5nXG4gICkgPT4gdmFsdWUgaXMgVFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBlbGVtZW50IG1hdGNoZXMgc2V0IG9mIHByb3BlcnRpZXMuXG4gICAqXG4gICAqIE5vdGU6IHRoaXMgY2hlY2tzIGN1c3RvbSBwcm9wZXJ0aWVzLCBhbmQgaXQgZG9lcyBub3QgZW5zdXJlIHRoYXQgYW55XG4gICAqIGNoaWxkcmVuIGFyZSBlcXVpdmFsZW50LlxuICAgKi9cbiAgbWF0Y2hlczogKGVsZW1lbnQ6IEVsZW1lbnQsIHByb3BzOiBQYXJ0aWFsPEVsZW1lbnQ+KSA9PiBib29sZWFuXG59XG5cbi8qKlxuICogU2hhcmVkIHRoZSBmdW5jdGlvbiB3aXRoIGlzRWxlbWVudFR5cGUgdXRpbGl0eVxuICovXG5jb25zdCBpc0VsZW1lbnQgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEVsZW1lbnQgPT4ge1xuICByZXR1cm4gKFxuICAgIGlzUGxhaW5PYmplY3QodmFsdWUpICYmXG4gICAgTm9kZS5pc05vZGVMaXN0KHZhbHVlLmNoaWxkcmVuKSAmJlxuICAgICFFZGl0b3IuaXNFZGl0b3IodmFsdWUpXG4gIClcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IEVsZW1lbnQ6IEVsZW1lbnRJbnRlcmZhY2UgPSB7XG4gIGlzQW5jZXN0b3IodmFsdWU6IGFueSk6IHZhbHVlIGlzIEFuY2VzdG9yIHtcbiAgICByZXR1cm4gaXNQbGFpbk9iamVjdCh2YWx1ZSkgJiYgTm9kZS5pc05vZGVMaXN0KHZhbHVlLmNoaWxkcmVuKVxuICB9LFxuXG4gIGlzRWxlbWVudCxcblxuICBpc0VsZW1lbnRMaXN0KHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBFbGVtZW50W10ge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5ldmVyeSh2YWwgPT4gRWxlbWVudC5pc0VsZW1lbnQodmFsKSlcbiAgfSxcblxuICBpc0VsZW1lbnRQcm9wcyhwcm9wczogYW55KTogcHJvcHMgaXMgUGFydGlhbDxFbGVtZW50PiB7XG4gICAgcmV0dXJuIChwcm9wcyBhcyBQYXJ0aWFsPEVsZW1lbnQ+KS5jaGlsZHJlbiAhPT0gdW5kZWZpbmVkXG4gIH0sXG5cbiAgaXNFbGVtZW50VHlwZTogPFQgZXh0ZW5kcyBFbGVtZW50PihcbiAgICB2YWx1ZTogYW55LFxuICAgIGVsZW1lbnRWYWw6IHN0cmluZyxcbiAgICBlbGVtZW50S2V5OiBzdHJpbmcgPSAndHlwZSdcbiAgKTogdmFsdWUgaXMgVCA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIGlzRWxlbWVudCh2YWx1ZSkgJiYgdmFsdWVbPGtleW9mIERlc2NlbmRhbnQ+ZWxlbWVudEtleV0gPT09IGVsZW1lbnRWYWxcbiAgICApXG4gIH0sXG5cbiAgbWF0Y2hlcyhlbGVtZW50OiBFbGVtZW50LCBwcm9wczogUGFydGlhbDxFbGVtZW50Pik6IGJvb2xlYW4ge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XG4gICAgICBpZiAoa2V5ID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChlbGVtZW50WzxrZXlvZiBEZXNjZW5kYW50PmtleV0gIT09IHByb3BzWzxrZXlvZiBEZXNjZW5kYW50PmtleV0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfSxcbn1cblxuLyoqXG4gKiBgRWxlbWVudEVudHJ5YCBvYmplY3RzIHJlZmVyIHRvIGFuIGBFbGVtZW50YCBhbmQgdGhlIGBQYXRoYCB3aGVyZSBpdCBjYW4gYmVcbiAqIGZvdW5kIGluc2lkZSBhIHJvb3Qgbm9kZS5cbiAqL1xuZXhwb3J0IHR5cGUgRWxlbWVudEVudHJ5ID0gW0VsZW1lbnQsIFBhdGhdXG4iLCAiaW1wb3J0IHsgcHJvZHVjZSB9IGZyb20gJ2ltbWVyJ1xuaW1wb3J0IHsgRWRpdG9yLCBQYXRoLCBSYW5nZSwgU2NydWJiZXIsIFRleHQgfSBmcm9tICcuLidcbmltcG9ydCB7IEVsZW1lbnQsIEVsZW1lbnRFbnRyeSB9IGZyb20gJy4vZWxlbWVudCdcblxuLyoqXG4gKiBUaGUgYE5vZGVgIHVuaW9uIHR5cGUgcmVwcmVzZW50cyBhbGwgb2YgdGhlIGRpZmZlcmVudCB0eXBlcyBvZiBub2RlcyB0aGF0XG4gKiBvY2N1ciBpbiBhIFNsYXRlIGRvY3VtZW50IHRyZWUuXG4gKi9cblxuZXhwb3J0IHR5cGUgQmFzZU5vZGUgPSBFZGl0b3IgfCBFbGVtZW50IHwgVGV4dFxuZXhwb3J0IHR5cGUgTm9kZSA9IEVkaXRvciB8IEVsZW1lbnQgfCBUZXh0XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZUFuY2VzdG9yc09wdGlvbnMge1xuICByZXZlcnNlPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVDaGlsZHJlbk9wdGlvbnMge1xuICByZXZlcnNlPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVEZXNjZW5kYW50c09wdGlvbnMge1xuICBmcm9tPzogUGF0aFxuICB0bz86IFBhdGhcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbiAgcGFzcz86IChub2RlOiBOb2RlRW50cnkpID0+IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb2RlRWxlbWVudHNPcHRpb25zIHtcbiAgZnJvbT86IFBhdGhcbiAgdG8/OiBQYXRoXG4gIHJldmVyc2U/OiBib29sZWFuXG4gIHBhc3M/OiAobm9kZTogTm9kZUVudHJ5KSA9PiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZUxldmVsc09wdGlvbnMge1xuICByZXZlcnNlPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVOb2Rlc09wdGlvbnMge1xuICBmcm9tPzogUGF0aFxuICB0bz86IFBhdGhcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbiAgcGFzcz86IChlbnRyeTogTm9kZUVudHJ5KSA9PiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZVRleHRzT3B0aW9ucyB7XG4gIGZyb20/OiBQYXRoXG4gIHRvPzogUGF0aFxuICByZXZlcnNlPzogYm9vbGVhblxuICBwYXNzPzogKG5vZGU6IE5vZGVFbnRyeSkgPT4gYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVJbnRlcmZhY2Uge1xuICAvKipcbiAgICogR2V0IHRoZSBub2RlIGF0IGEgc3BlY2lmaWMgcGF0aCwgYXNzZXJ0aW5nIHRoYXQgaXQncyBhbiBhbmNlc3RvciBub2RlLlxuICAgKi9cbiAgYW5jZXN0b3I6IChyb290OiBOb2RlLCBwYXRoOiBQYXRoKSA9PiBBbmNlc3RvclxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBnZW5lcmF0b3Igb2YgYWxsIHRoZSBhbmNlc3RvciBub2RlcyBhYm92ZSBhIHNwZWNpZmljIHBhdGguXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQgdGhlIG9yZGVyIGlzIHRvcC1kb3duLCBmcm9tIGhpZ2hlc3QgdG8gbG93ZXN0IGFuY2VzdG9yIGluXG4gICAqIHRoZSB0cmVlLCBidXQgeW91IGNhbiBwYXNzIHRoZSBgcmV2ZXJzZTogdHJ1ZWAgb3B0aW9uIHRvIGdvIGJvdHRvbS11cC5cbiAgICovXG4gIGFuY2VzdG9yczogKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgcGF0aDogUGF0aCxcbiAgICBvcHRpb25zPzogTm9kZUFuY2VzdG9yc09wdGlvbnNcbiAgKSA9PiBHZW5lcmF0b3I8Tm9kZUVudHJ5PEFuY2VzdG9yPiwgdm9pZCwgdW5kZWZpbmVkPlxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNoaWxkIG9mIGEgbm9kZSBhdCBhIHNwZWNpZmljIGluZGV4LlxuICAgKi9cbiAgY2hpbGQ6IChyb290OiBOb2RlLCBpbmRleDogbnVtYmVyKSA9PiBEZXNjZW5kYW50XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgb3ZlciB0aGUgY2hpbGRyZW4gb2YgYSBub2RlIGF0IGEgc3BlY2lmaWMgcGF0aC5cbiAgICovXG4gIGNoaWxkcmVuOiAoXG4gICAgcm9vdDogTm9kZSxcbiAgICBwYXRoOiBQYXRoLFxuICAgIG9wdGlvbnM/OiBOb2RlQ2hpbGRyZW5PcHRpb25zXG4gICkgPT4gR2VuZXJhdG9yPE5vZGVFbnRyeTxEZXNjZW5kYW50Piwgdm9pZCwgdW5kZWZpbmVkPlxuXG4gIC8qKlxuICAgKiBHZXQgYW4gZW50cnkgZm9yIHRoZSBjb21tb24gYW5jZXNldG9yIG5vZGUgb2YgdHdvIHBhdGhzLlxuICAgKi9cbiAgY29tbW9uOiAocm9vdDogTm9kZSwgcGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gTm9kZUVudHJ5XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbm9kZSBhdCBhIHNwZWNpZmljIHBhdGgsIGFzc2VydGluZyB0aGF0IGl0J3MgYSBkZXNjZW5kYW50IG5vZGUuXG4gICAqL1xuICBkZXNjZW5kYW50OiAocm9vdDogTm9kZSwgcGF0aDogUGF0aCkgPT4gRGVzY2VuZGFudFxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBnZW5lcmF0b3Igb2YgYWxsIHRoZSBkZXNjZW5kYW50IG5vZGUgZW50cmllcyBpbnNpZGUgYSByb290IG5vZGUuXG4gICAqL1xuICBkZXNjZW5kYW50czogKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgb3B0aW9ucz86IE5vZGVEZXNjZW5kYW50c09wdGlvbnNcbiAgKSA9PiBHZW5lcmF0b3I8Tm9kZUVudHJ5PERlc2NlbmRhbnQ+LCB2b2lkLCB1bmRlZmluZWQ+XG5cbiAgLyoqXG4gICAqIFJldHVybiBhIGdlbmVyYXRvciBvZiBhbGwgdGhlIGVsZW1lbnQgbm9kZXMgaW5zaWRlIGEgcm9vdCBub2RlLiBFYWNoIGl0ZXJhdGlvblxuICAgKiB3aWxsIHJldHVybiBhbiBgRWxlbWVudEVudHJ5YCB0dXBsZSBjb25zaXN0aW5nIG9mIGBbRWxlbWVudCwgUGF0aF1gLiBJZiB0aGVcbiAgICogcm9vdCBub2RlIGlzIGFuIGVsZW1lbnQgaXQgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgaXRlcmF0aW9uIGFzIHdlbGwuXG4gICAqL1xuICBlbGVtZW50czogKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgb3B0aW9ucz86IE5vZGVFbGVtZW50c09wdGlvbnNcbiAgKSA9PiBHZW5lcmF0b3I8RWxlbWVudEVudHJ5LCB2b2lkLCB1bmRlZmluZWQ+XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgcHJvcHMgZnJvbSBhIE5vZGUuXG4gICAqL1xuICBleHRyYWN0UHJvcHM6IChub2RlOiBOb2RlKSA9PiBOb2RlUHJvcHNcblxuICAvKipcbiAgICogR2V0IHRoZSBmaXJzdCBub2RlIGVudHJ5IGluIGEgcm9vdCBub2RlIGZyb20gYSBwYXRoLlxuICAgKi9cbiAgZmlyc3Q6IChyb290OiBOb2RlLCBwYXRoOiBQYXRoKSA9PiBOb2RlRW50cnlcblxuICAvKipcbiAgICogR2V0IHRoZSBzbGljZWQgZnJhZ21lbnQgcmVwcmVzZW50ZWQgYnkgYSByYW5nZSBpbnNpZGUgYSByb290IG5vZGUuXG4gICAqL1xuICBmcmFnbWVudDogKHJvb3Q6IE5vZGUsIHJhbmdlOiBSYW5nZSkgPT4gRGVzY2VuZGFudFtdXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGVzY2VuZGFudCBub2RlIHJlZmVycmVkIHRvIGJ5IGEgc3BlY2lmaWMgcGF0aC4gSWYgdGhlIHBhdGggaXMgYW5cbiAgICogZW1wdHkgYXJyYXksIGl0IHJlZmVycyB0byB0aGUgcm9vdCBub2RlIGl0c2VsZi5cbiAgICovXG4gIGdldDogKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpID0+IE5vZGVcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBkZXNjZW5kYW50IG5vZGUgZXhpc3RzIGF0IGEgc3BlY2lmaWMgcGF0aC5cbiAgICovXG4gIGhhczogKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpbXBsZW1lbnRzIHRoZSBgTm9kZWAgaW50ZXJmYWNlLlxuICAgKi9cbiAgaXNOb2RlOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgTm9kZVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgbGlzdCBvZiBgTm9kZWAgb2JqZWN0cy5cbiAgICovXG4gIGlzTm9kZUxpc3Q6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBOb2RlW11cblxuICAvKipcbiAgICogR2V0IHRoZSBsYXN0IG5vZGUgZW50cnkgaW4gYSByb290IG5vZGUgZnJvbSBhIHBhdGguXG4gICAqL1xuICBsYXN0OiAocm9vdDogTm9kZSwgcGF0aDogUGF0aCkgPT4gTm9kZUVudHJ5XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbm9kZSBhdCBhIHNwZWNpZmljIHBhdGgsIGVuc3VyaW5nIGl0J3MgYSBsZWFmIHRleHQgbm9kZS5cbiAgICovXG4gIGxlYWY6IChyb290OiBOb2RlLCBwYXRoOiBQYXRoKSA9PiBUZXh0XG5cbiAgLyoqXG4gICAqIFJldHVybiBhIGdlbmVyYXRvciBvZiB0aGUgaW4gYSBicmFuY2ggb2YgdGhlIHRyZWUsIGZyb20gYSBzcGVjaWZpYyBwYXRoLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0IHRoZSBvcmRlciBpcyB0b3AtZG93biwgZnJvbSBoaWdoZXN0IHRvIGxvd2VzdCBub2RlIGluIHRoZSB0cmVlLFxuICAgKiBidXQgeW91IGNhbiBwYXNzIHRoZSBgcmV2ZXJzZTogdHJ1ZWAgb3B0aW9uIHRvIGdvIGJvdHRvbS11cC5cbiAgICovXG4gIGxldmVsczogKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgcGF0aDogUGF0aCxcbiAgICBvcHRpb25zPzogTm9kZUxldmVsc09wdGlvbnNcbiAgKSA9PiBHZW5lcmF0b3I8Tm9kZUVudHJ5LCB2b2lkLCB1bmRlZmluZWQ+XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgbm9kZSBtYXRjaGVzIGEgc2V0IG9mIHByb3BzLlxuICAgKi9cbiAgbWF0Y2hlczogKG5vZGU6IE5vZGUsIHByb3BzOiBQYXJ0aWFsPE5vZGU+KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIFJldHVybiBhIGdlbmVyYXRvciBvZiBhbGwgdGhlIG5vZGUgZW50cmllcyBvZiBhIHJvb3Qgbm9kZS4gRWFjaCBlbnRyeSBpc1xuICAgKiByZXR1cm5lZCBhcyBhIGBbTm9kZSwgUGF0aF1gIHR1cGxlLCB3aXRoIHRoZSBwYXRoIHJlZmVycmluZyB0byB0aGUgbm9kZSdzXG4gICAqIHBvc2l0aW9uIGluc2lkZSB0aGUgcm9vdCBub2RlLlxuICAgKi9cbiAgbm9kZXM6IChcbiAgICByb290OiBOb2RlLFxuICAgIG9wdGlvbnM/OiBOb2RlTm9kZXNPcHRpb25zXG4gICkgPT4gR2VuZXJhdG9yPE5vZGVFbnRyeSwgdm9pZCwgdW5kZWZpbmVkPlxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBhcmVudCBvZiBhIG5vZGUgYXQgYSBzcGVjaWZpYyBwYXRoLlxuICAgKi9cbiAgcGFyZW50OiAocm9vdDogTm9kZSwgcGF0aDogUGF0aCkgPT4gQW5jZXN0b3JcblxuICAvKipcbiAgICogR2V0IHRoZSBjb25jYXRlbmF0ZWQgdGV4dCBzdHJpbmcgb2YgYSBub2RlJ3MgY29udGVudC5cbiAgICpcbiAgICogTm90ZSB0aGF0IHRoaXMgd2lsbCBub3QgaW5jbHVkZSBzcGFjZXMgb3IgbGluZSBicmVha3MgYmV0d2VlbiBibG9jayBub2Rlcy5cbiAgICogSXQgaXMgbm90IGEgdXNlci1mYWNpbmcgc3RyaW5nLCBidXQgYSBzdHJpbmcgZm9yIHBlcmZvcm1pbmcgb2Zmc2V0LXJlbGF0ZWRcbiAgICogY29tcHV0YXRpb25zIGZvciBhIG5vZGUuXG4gICAqL1xuICBzdHJpbmc6IChub2RlOiBOb2RlKSA9PiBzdHJpbmdcblxuICAvKipcbiAgICogUmV0dXJuIGEgZ2VuZXJhdG9yIG9mIGFsbCBsZWFmIHRleHQgbm9kZXMgaW4gYSByb290IG5vZGUuXG4gICAqL1xuICB0ZXh0czogKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgb3B0aW9ucz86IE5vZGVUZXh0c09wdGlvbnNcbiAgKSA9PiBHZW5lcmF0b3I8Tm9kZUVudHJ5PFRleHQ+LCB2b2lkLCB1bmRlZmluZWQ+XG59XG5cbmNvbnN0IElTX05PREVfTElTVF9DQUNIRSA9IG5ldyBXZWFrTWFwPGFueVtdLCBib29sZWFuPigpXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBOb2RlOiBOb2RlSW50ZXJmYWNlID0ge1xuICBhbmNlc3Rvcihyb290OiBOb2RlLCBwYXRoOiBQYXRoKTogQW5jZXN0b3Ige1xuICAgIGNvbnN0IG5vZGUgPSBOb2RlLmdldChyb290LCBwYXRoKVxuXG4gICAgaWYgKFRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IHRoZSBhbmNlc3RvciBub2RlIGF0IHBhdGggWyR7cGF0aH1dIGJlY2F1c2UgaXQgcmVmZXJzIHRvIGEgdGV4dCBub2RlIGluc3RlYWQ6ICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICAgIG5vZGVcbiAgICAgICAgKX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVcbiAgfSxcblxuICAqYW5jZXN0b3JzKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgcGF0aDogUGF0aCxcbiAgICBvcHRpb25zOiBOb2RlQW5jZXN0b3JzT3B0aW9ucyA9IHt9XG4gICk6IEdlbmVyYXRvcjxOb2RlRW50cnk8QW5jZXN0b3I+LCB2b2lkLCB1bmRlZmluZWQ+IHtcbiAgICBmb3IgKGNvbnN0IHAgb2YgUGF0aC5hbmNlc3RvcnMocGF0aCwgb3B0aW9ucykpIHtcbiAgICAgIGNvbnN0IG4gPSBOb2RlLmFuY2VzdG9yKHJvb3QsIHApXG4gICAgICBjb25zdCBlbnRyeTogTm9kZUVudHJ5PEFuY2VzdG9yPiA9IFtuLCBwXVxuICAgICAgeWllbGQgZW50cnlcbiAgICB9XG4gIH0sXG5cbiAgY2hpbGQocm9vdDogTm9kZSwgaW5kZXg6IG51bWJlcik6IERlc2NlbmRhbnQge1xuICAgIGlmIChUZXh0LmlzVGV4dChyb290KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCB0aGUgY2hpbGQgb2YgYSB0ZXh0IG5vZGU6ICR7U2NydWJiZXIuc3RyaW5naWZ5KHJvb3QpfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBjID0gcm9vdC5jaGlsZHJlbltpbmRleF0gYXMgRGVzY2VuZGFudFxuXG4gICAgaWYgKGMgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCBjaGlsZCBhdCBpbmRleCBcXGAke2luZGV4fVxcYCBpbiBub2RlOiAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgICByb290XG4gICAgICAgICl9YFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBjXG4gIH0sXG5cbiAgKmNoaWxkcmVuKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgcGF0aDogUGF0aCxcbiAgICBvcHRpb25zOiBOb2RlQ2hpbGRyZW5PcHRpb25zID0ge31cbiAgKTogR2VuZXJhdG9yPE5vZGVFbnRyeTxEZXNjZW5kYW50Piwgdm9pZCwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgeyByZXZlcnNlID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICBjb25zdCBhbmNlc3RvciA9IE5vZGUuYW5jZXN0b3Iocm9vdCwgcGF0aClcbiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBhbmNlc3RvclxuICAgIGxldCBpbmRleCA9IHJldmVyc2UgPyBjaGlsZHJlbi5sZW5ndGggLSAxIDogMFxuXG4gICAgd2hpbGUgKHJldmVyc2UgPyBpbmRleCA+PSAwIDogaW5kZXggPCBjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gTm9kZS5jaGlsZChhbmNlc3RvciwgaW5kZXgpXG4gICAgICBjb25zdCBjaGlsZFBhdGggPSBwYXRoLmNvbmNhdChpbmRleClcbiAgICAgIHlpZWxkIFtjaGlsZCwgY2hpbGRQYXRoXVxuICAgICAgaW5kZXggPSByZXZlcnNlID8gaW5kZXggLSAxIDogaW5kZXggKyAxXG4gICAgfVxuICB9LFxuXG4gIGNvbW1vbihyb290OiBOb2RlLCBwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogTm9kZUVudHJ5IHtcbiAgICBjb25zdCBwID0gUGF0aC5jb21tb24ocGF0aCwgYW5vdGhlcilcbiAgICBjb25zdCBuID0gTm9kZS5nZXQocm9vdCwgcClcbiAgICByZXR1cm4gW24sIHBdXG4gIH0sXG5cbiAgZGVzY2VuZGFudChyb290OiBOb2RlLCBwYXRoOiBQYXRoKTogRGVzY2VuZGFudCB7XG4gICAgY29uc3Qgbm9kZSA9IE5vZGUuZ2V0KHJvb3QsIHBhdGgpXG5cbiAgICBpZiAoRWRpdG9yLmlzRWRpdG9yKG5vZGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IHRoZSBkZXNjZW5kYW50IG5vZGUgYXQgcGF0aCBbJHtwYXRofV0gYmVjYXVzZSBpdCByZWZlcnMgdG8gdGhlIHJvb3QgZWRpdG9yIG5vZGUgaW5zdGVhZDogJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgICAgbm9kZVxuICAgICAgICApfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZVxuICB9LFxuXG4gICpkZXNjZW5kYW50cyhcbiAgICByb290OiBOb2RlLFxuICAgIG9wdGlvbnM6IE5vZGVEZXNjZW5kYW50c09wdGlvbnMgPSB7fVxuICApOiBHZW5lcmF0b3I8Tm9kZUVudHJ5PERlc2NlbmRhbnQ+LCB2b2lkLCB1bmRlZmluZWQ+IHtcbiAgICBmb3IgKGNvbnN0IFtub2RlLCBwYXRoXSBvZiBOb2RlLm5vZGVzKHJvb3QsIG9wdGlvbnMpKSB7XG4gICAgICBpZiAocGF0aC5sZW5ndGggIT09IDApIHtcbiAgICAgICAgLy8gTk9URTogd2UgaGF2ZSB0byBjb2VyY2UgaGVyZSBiZWNhdXNlIGNoZWNraW5nIHRoZSBwYXRoJ3MgbGVuZ3RoIGRvZXNcbiAgICAgICAgLy8gZ3VhcmFudGVlIHRoYXQgYG5vZGVgIGlzIG5vdCBhIGBFZGl0b3JgLCBidXQgVHlwZVNjcmlwdCBkb2Vzbid0IGtub3cuXG4gICAgICAgIHlpZWxkIFtub2RlLCBwYXRoXSBhcyBOb2RlRW50cnk8RGVzY2VuZGFudD5cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgKmVsZW1lbnRzKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgb3B0aW9uczogTm9kZUVsZW1lbnRzT3B0aW9ucyA9IHt9XG4gICk6IEdlbmVyYXRvcjxFbGVtZW50RW50cnksIHZvaWQsIHVuZGVmaW5lZD4ge1xuICAgIGZvciAoY29uc3QgW25vZGUsIHBhdGhdIG9mIE5vZGUubm9kZXMocm9vdCwgb3B0aW9ucykpIHtcbiAgICAgIGlmIChFbGVtZW50LmlzRWxlbWVudChub2RlKSkge1xuICAgICAgICB5aWVsZCBbbm9kZSwgcGF0aF1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgZXh0cmFjdFByb3BzKG5vZGU6IE5vZGUpOiBOb2RlUHJvcHMge1xuICAgIGlmIChFbGVtZW50LmlzQW5jZXN0b3Iobm9kZSkpIHtcbiAgICAgIGNvbnN0IHsgY2hpbGRyZW4sIC4uLnByb3BlcnRpZXMgfSA9IG5vZGVcblxuICAgICAgcmV0dXJuIHByb3BlcnRpZXNcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgeyB0ZXh0LCAuLi5wcm9wZXJ0aWVzIH0gPSBub2RlXG5cbiAgICAgIHJldHVybiBwcm9wZXJ0aWVzXG4gICAgfVxuICB9LFxuXG4gIGZpcnN0KHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpOiBOb2RlRW50cnkge1xuICAgIGNvbnN0IHAgPSBwYXRoLnNsaWNlKClcbiAgICBsZXQgbiA9IE5vZGUuZ2V0KHJvb3QsIHApXG5cbiAgICB3aGlsZSAobikge1xuICAgICAgaWYgKFRleHQuaXNUZXh0KG4pIHx8IG4uY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuID0gbi5jaGlsZHJlblswXVxuICAgICAgICBwLnB1c2goMClcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW24sIHBdXG4gIH0sXG5cbiAgZnJhZ21lbnQocm9vdDogTm9kZSwgcmFuZ2U6IFJhbmdlKTogRGVzY2VuZGFudFtdIHtcbiAgICBpZiAoVGV4dC5pc1RleHQocm9vdCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgYSBmcmFnbWVudCBzdGFydGluZyBmcm9tIGEgcm9vdCB0ZXh0IG5vZGU6ICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICAgIHJvb3RcbiAgICAgICAgKX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgbmV3Um9vdCA9IHByb2R1Y2UoeyBjaGlsZHJlbjogcm9vdC5jaGlsZHJlbiB9LCByID0+IHtcbiAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKHJhbmdlKVxuICAgICAgY29uc3Qgbm9kZUVudHJpZXMgPSBOb2RlLm5vZGVzKHIsIHtcbiAgICAgICAgcmV2ZXJzZTogdHJ1ZSxcbiAgICAgICAgcGFzczogKFssIHBhdGhdKSA9PiAhUmFuZ2UuaW5jbHVkZXMocmFuZ2UsIHBhdGgpLFxuICAgICAgfSlcblxuICAgICAgZm9yIChjb25zdCBbLCBwYXRoXSBvZiBub2RlRW50cmllcykge1xuICAgICAgICBpZiAoIVJhbmdlLmluY2x1ZGVzKHJhbmdlLCBwYXRoKSkge1xuICAgICAgICAgIGNvbnN0IHBhcmVudCA9IE5vZGUucGFyZW50KHIsIHBhdGgpXG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cbiAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFBhdGguZXF1YWxzKHBhdGgsIGVuZC5wYXRoKSkge1xuICAgICAgICAgIGNvbnN0IGxlYWYgPSBOb2RlLmxlYWYociwgcGF0aClcbiAgICAgICAgICBsZWFmLnRleHQgPSBsZWFmLnRleHQuc2xpY2UoMCwgZW5kLm9mZnNldClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChQYXRoLmVxdWFscyhwYXRoLCBzdGFydC5wYXRoKSkge1xuICAgICAgICAgIGNvbnN0IGxlYWYgPSBOb2RlLmxlYWYociwgcGF0aClcbiAgICAgICAgICBsZWFmLnRleHQgPSBsZWFmLnRleHQuc2xpY2Uoc3RhcnQub2Zmc2V0KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChFZGl0b3IuaXNFZGl0b3IocikpIHtcbiAgICAgICAgci5zZWxlY3Rpb24gPSBudWxsXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiBuZXdSb290LmNoaWxkcmVuXG4gIH0sXG5cbiAgZ2V0KHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpOiBOb2RlIHtcbiAgICBsZXQgbm9kZSA9IHJvb3RcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcCA9IHBhdGhbaV1cblxuICAgICAgaWYgKFRleHQuaXNUZXh0KG5vZGUpIHx8ICFub2RlLmNoaWxkcmVuW3BdKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgQ2Fubm90IGZpbmQgYSBkZXNjZW5kYW50IGF0IHBhdGggWyR7cGF0aH1dIGluIG5vZGU6ICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICAgICAgcm9vdFxuICAgICAgICAgICl9YFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIG5vZGUgPSBub2RlLmNoaWxkcmVuW3BdXG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVcbiAgfSxcblxuICBoYXMocm9vdDogTm9kZSwgcGF0aDogUGF0aCk6IGJvb2xlYW4ge1xuICAgIGxldCBub2RlID0gcm9vdFxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwID0gcGF0aFtpXVxuXG4gICAgICBpZiAoVGV4dC5pc1RleHQobm9kZSkgfHwgIW5vZGUuY2hpbGRyZW5bcF0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIG5vZGUgPSBub2RlLmNoaWxkcmVuW3BdXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfSxcblxuICBpc05vZGUodmFsdWU6IGFueSk6IHZhbHVlIGlzIE5vZGUge1xuICAgIHJldHVybiAoXG4gICAgICBUZXh0LmlzVGV4dCh2YWx1ZSkgfHwgRWxlbWVudC5pc0VsZW1lbnQodmFsdWUpIHx8IEVkaXRvci5pc0VkaXRvcih2YWx1ZSlcbiAgICApXG4gIH0sXG5cbiAgaXNOb2RlTGlzdCh2YWx1ZTogYW55KTogdmFsdWUgaXMgTm9kZVtdIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgY2FjaGVkUmVzdWx0ID0gSVNfTk9ERV9MSVNUX0NBQ0hFLmdldCh2YWx1ZSlcbiAgICBpZiAoY2FjaGVkUmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBjYWNoZWRSZXN1bHRcbiAgICB9XG4gICAgY29uc3QgaXNOb2RlTGlzdCA9IHZhbHVlLmV2ZXJ5KHZhbCA9PiBOb2RlLmlzTm9kZSh2YWwpKVxuICAgIElTX05PREVfTElTVF9DQUNIRS5zZXQodmFsdWUsIGlzTm9kZUxpc3QpXG4gICAgcmV0dXJuIGlzTm9kZUxpc3RcbiAgfSxcblxuICBsYXN0KHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpOiBOb2RlRW50cnkge1xuICAgIGNvbnN0IHAgPSBwYXRoLnNsaWNlKClcbiAgICBsZXQgbiA9IE5vZGUuZ2V0KHJvb3QsIHApXG5cbiAgICB3aGlsZSAobikge1xuICAgICAgaWYgKFRleHQuaXNUZXh0KG4pIHx8IG4uY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpID0gbi5jaGlsZHJlbi5sZW5ndGggLSAxXG4gICAgICAgIG4gPSBuLmNoaWxkcmVuW2ldXG4gICAgICAgIHAucHVzaChpKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbbiwgcF1cbiAgfSxcblxuICBsZWFmKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpOiBUZXh0IHtcbiAgICBjb25zdCBub2RlID0gTm9kZS5nZXQocm9vdCwgcGF0aClcblxuICAgIGlmICghVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgdGhlIGxlYWYgbm9kZSBhdCBwYXRoIFske3BhdGh9XSBiZWNhdXNlIGl0IHJlZmVycyB0byBhIG5vbi1sZWFmIG5vZGU6ICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICAgIG5vZGVcbiAgICAgICAgKX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVcbiAgfSxcblxuICAqbGV2ZWxzKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgcGF0aDogUGF0aCxcbiAgICBvcHRpb25zOiBOb2RlTGV2ZWxzT3B0aW9ucyA9IHt9XG4gICk6IEdlbmVyYXRvcjxOb2RlRW50cnksIHZvaWQsIHVuZGVmaW5lZD4ge1xuICAgIGZvciAoY29uc3QgcCBvZiBQYXRoLmxldmVscyhwYXRoLCBvcHRpb25zKSkge1xuICAgICAgY29uc3QgbiA9IE5vZGUuZ2V0KHJvb3QsIHApXG4gICAgICB5aWVsZCBbbiwgcF1cbiAgICB9XG4gIH0sXG5cbiAgbWF0Y2hlcyhub2RlOiBOb2RlLCBwcm9wczogUGFydGlhbDxOb2RlPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiZcbiAgICAgICAgRWxlbWVudC5pc0VsZW1lbnRQcm9wcyhwcm9wcykgJiZcbiAgICAgICAgRWxlbWVudC5tYXRjaGVzKG5vZGUsIHByb3BzKSkgfHxcbiAgICAgIChUZXh0LmlzVGV4dChub2RlKSAmJlxuICAgICAgICBUZXh0LmlzVGV4dFByb3BzKHByb3BzKSAmJlxuICAgICAgICBUZXh0Lm1hdGNoZXMobm9kZSwgcHJvcHMpKVxuICAgIClcbiAgfSxcblxuICAqbm9kZXMoXG4gICAgcm9vdDogTm9kZSxcbiAgICBvcHRpb25zOiBOb2RlTm9kZXNPcHRpb25zID0ge31cbiAgKTogR2VuZXJhdG9yPE5vZGVFbnRyeSwgdm9pZCwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgeyBwYXNzLCByZXZlcnNlID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICBjb25zdCB7IGZyb20gPSBbXSwgdG8gfSA9IG9wdGlvbnNcbiAgICBjb25zdCB2aXNpdGVkID0gbmV3IFNldCgpXG4gICAgbGV0IHA6IFBhdGggPSBbXVxuICAgIGxldCBuID0gcm9vdFxuXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGlmICh0byAmJiAocmV2ZXJzZSA/IFBhdGguaXNCZWZvcmUocCwgdG8pIDogUGF0aC5pc0FmdGVyKHAsIHRvKSkpIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgaWYgKCF2aXNpdGVkLmhhcyhuKSkge1xuICAgICAgICB5aWVsZCBbbiwgcF1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UncmUgYWxsb3dlZCB0byBnbyBkb3dud2FyZCBhbmQgd2UgaGF2ZW4ndCBkZXNjZW5kZWQgeWV0LCBkby5cbiAgICAgIGlmIChcbiAgICAgICAgIXZpc2l0ZWQuaGFzKG4pICYmXG4gICAgICAgICFUZXh0LmlzVGV4dChuKSAmJlxuICAgICAgICBuLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAocGFzcyA9PSBudWxsIHx8IHBhc3MoW24sIHBdKSA9PT0gZmFsc2UpXG4gICAgICApIHtcbiAgICAgICAgdmlzaXRlZC5hZGQobilcbiAgICAgICAgbGV0IG5leHRJbmRleCA9IHJldmVyc2UgPyBuLmNoaWxkcmVuLmxlbmd0aCAtIDEgOiAwXG5cbiAgICAgICAgaWYgKFBhdGguaXNBbmNlc3RvcihwLCBmcm9tKSkge1xuICAgICAgICAgIG5leHRJbmRleCA9IGZyb21bcC5sZW5ndGhdXG4gICAgICAgIH1cblxuICAgICAgICBwID0gcC5jb25jYXQobmV4dEluZGV4KVxuICAgICAgICBuID0gTm9kZS5nZXQocm9vdCwgcClcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UncmUgYXQgdGhlIHJvb3QgYW5kIHdlIGNhbid0IGdvIGRvd24sIHdlJ3JlIGRvbmUuXG4gICAgICBpZiAocC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UncmUgZ29pbmcgZm9yd2FyZC4uLlxuICAgICAgaWYgKCFyZXZlcnNlKSB7XG4gICAgICAgIGNvbnN0IG5ld1BhdGggPSBQYXRoLm5leHQocClcblxuICAgICAgICBpZiAoTm9kZS5oYXMocm9vdCwgbmV3UGF0aCkpIHtcbiAgICAgICAgICBwID0gbmV3UGF0aFxuICAgICAgICAgIG4gPSBOb2RlLmdldChyb290LCBwKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UncmUgZ29pbmcgYmFja3dhcmQuLi5cbiAgICAgIGlmIChyZXZlcnNlICYmIHBbcC5sZW5ndGggLSAxXSAhPT0gMCkge1xuICAgICAgICBjb25zdCBuZXdQYXRoID0gUGF0aC5wcmV2aW91cyhwKVxuICAgICAgICBwID0gbmV3UGF0aFxuICAgICAgICBuID0gTm9kZS5nZXQocm9vdCwgcClcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gT3RoZXJ3aXNlIHdlJ3JlIGdvaW5nIHVwd2FyZC4uLlxuICAgICAgcCA9IFBhdGgucGFyZW50KHApXG4gICAgICBuID0gTm9kZS5nZXQocm9vdCwgcClcbiAgICAgIHZpc2l0ZWQuYWRkKG4pXG4gICAgfVxuICB9LFxuXG4gIHBhcmVudChyb290OiBOb2RlLCBwYXRoOiBQYXRoKTogQW5jZXN0b3Ige1xuICAgIGNvbnN0IHBhcmVudFBhdGggPSBQYXRoLnBhcmVudChwYXRoKVxuICAgIGNvbnN0IHAgPSBOb2RlLmdldChyb290LCBwYXJlbnRQYXRoKVxuXG4gICAgaWYgKFRleHQuaXNUZXh0KHApKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IHRoZSBwYXJlbnQgb2YgcGF0aCBbJHtwYXRofV0gYmVjYXVzZSBpdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgcm9vdC5gXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIHBcbiAgfSxcblxuICBzdHJpbmcobm9kZTogTm9kZSk6IHN0cmluZyB7XG4gICAgaWYgKFRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICByZXR1cm4gbm9kZS50ZXh0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBub2RlLmNoaWxkcmVuLm1hcChOb2RlLnN0cmluZykuam9pbignJylcbiAgICB9XG4gIH0sXG5cbiAgKnRleHRzKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgb3B0aW9uczogTm9kZVRleHRzT3B0aW9ucyA9IHt9XG4gICk6IEdlbmVyYXRvcjxOb2RlRW50cnk8VGV4dD4sIHZvaWQsIHVuZGVmaW5lZD4ge1xuICAgIGZvciAoY29uc3QgW25vZGUsIHBhdGhdIG9mIE5vZGUubm9kZXMocm9vdCwgb3B0aW9ucykpIHtcbiAgICAgIGlmIChUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgICB5aWVsZCBbbm9kZSwgcGF0aF1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG59XG5cbi8qKlxuICogVGhlIGBEZXNjZW5kYW50YCB1bmlvbiB0eXBlIHJlcHJlc2VudHMgbm9kZXMgdGhhdCBhcmUgZGVzY2VuZGFudHMgaW4gdGhlXG4gKiB0cmVlLiBJdCBpcyByZXR1cm5lZCBhcyBhIGNvbnZlbmllbmNlIGluIGNlcnRhaW4gY2FzZXMgdG8gbmFycm93IGEgdmFsdWVcbiAqIGZ1cnRoZXIgdGhhbiB0aGUgbW9yZSBnZW5lcmljIGBOb2RlYCB1bmlvbi5cbiAqL1xuXG5leHBvcnQgdHlwZSBEZXNjZW5kYW50ID0gRWxlbWVudCB8IFRleHRcblxuLyoqXG4gKiBUaGUgYEFuY2VzdG9yYCB1bmlvbiB0eXBlIHJlcHJlc2VudHMgbm9kZXMgdGhhdCBhcmUgYW5jZXN0b3JzIGluIHRoZSB0cmVlLlxuICogSXQgaXMgcmV0dXJuZWQgYXMgYSBjb252ZW5pZW5jZSBpbiBjZXJ0YWluIGNhc2VzIHRvIG5hcnJvdyBhIHZhbHVlIGZ1cnRoZXJcbiAqIHRoYW4gdGhlIG1vcmUgZ2VuZXJpYyBgTm9kZWAgdW5pb24uXG4gKi9cblxuZXhwb3J0IHR5cGUgQW5jZXN0b3IgPSBFZGl0b3IgfCBFbGVtZW50XG5cbi8qKlxuICogYE5vZGVFbnRyeWAgb2JqZWN0cyBhcmUgcmV0dXJuZWQgd2hlbiBpdGVyYXRpbmcgb3ZlciB0aGUgbm9kZXMgaW4gYSBTbGF0ZVxuICogZG9jdW1lbnQgdHJlZS4gVGhleSBjb25zaXN0IG9mIHRoZSBub2RlIGFuZCBpdHMgYFBhdGhgIHJlbGF0aXZlIHRvIHRoZSByb290XG4gKiBub2RlIGluIHRoZSBkb2N1bWVudC5cbiAqL1xuXG5leHBvcnQgdHlwZSBOb2RlRW50cnk8VCBleHRlbmRzIE5vZGUgPSBOb2RlPiA9IFtULCBQYXRoXVxuXG4vKipcbiAqIENvbnZlbmllbmNlIHR5cGUgZm9yIHJldHVybmluZyB0aGUgcHJvcHMgb2YgYSBub2RlLlxuICovXG5leHBvcnQgdHlwZSBOb2RlUHJvcHMgPVxuICB8IE9taXQ8RWRpdG9yLCAnY2hpbGRyZW4nPlxuICB8IE9taXQ8RWxlbWVudCwgJ2NoaWxkcmVuJz5cbiAgfCBPbWl0PFRleHQsICd0ZXh0Jz5cbiIsICJpbXBvcnQgeyBFeHRlbmRlZFR5cGUsIE5vZGUsIFBhdGgsIFJhbmdlIH0gZnJvbSAnLi4nXG5pbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnaXMtcGxhaW4tb2JqZWN0J1xuXG5leHBvcnQgdHlwZSBCYXNlSW5zZXJ0Tm9kZU9wZXJhdGlvbiA9IHtcbiAgdHlwZTogJ2luc2VydF9ub2RlJ1xuICBwYXRoOiBQYXRoXG4gIG5vZGU6IE5vZGVcbn1cblxuZXhwb3J0IHR5cGUgSW5zZXJ0Tm9kZU9wZXJhdGlvbiA9IEV4dGVuZGVkVHlwZTxcbiAgJ0luc2VydE5vZGVPcGVyYXRpb24nLFxuICBCYXNlSW5zZXJ0Tm9kZU9wZXJhdGlvblxuPlxuXG5leHBvcnQgdHlwZSBCYXNlSW5zZXJ0VGV4dE9wZXJhdGlvbiA9IHtcbiAgdHlwZTogJ2luc2VydF90ZXh0J1xuICBwYXRoOiBQYXRoXG4gIG9mZnNldDogbnVtYmVyXG4gIHRleHQ6IHN0cmluZ1xufVxuXG5leHBvcnQgdHlwZSBJbnNlcnRUZXh0T3BlcmF0aW9uID0gRXh0ZW5kZWRUeXBlPFxuICAnSW5zZXJ0VGV4dE9wZXJhdGlvbicsXG4gIEJhc2VJbnNlcnRUZXh0T3BlcmF0aW9uXG4+XG5cbmV4cG9ydCB0eXBlIEJhc2VNZXJnZU5vZGVPcGVyYXRpb24gPSB7XG4gIHR5cGU6ICdtZXJnZV9ub2RlJ1xuICBwYXRoOiBQYXRoXG4gIHBvc2l0aW9uOiBudW1iZXJcbiAgcHJvcGVydGllczogUGFydGlhbDxOb2RlPlxufVxuXG5leHBvcnQgdHlwZSBNZXJnZU5vZGVPcGVyYXRpb24gPSBFeHRlbmRlZFR5cGU8XG4gICdNZXJnZU5vZGVPcGVyYXRpb24nLFxuICBCYXNlTWVyZ2VOb2RlT3BlcmF0aW9uXG4+XG5cbmV4cG9ydCB0eXBlIEJhc2VNb3ZlTm9kZU9wZXJhdGlvbiA9IHtcbiAgdHlwZTogJ21vdmVfbm9kZSdcbiAgcGF0aDogUGF0aFxuICBuZXdQYXRoOiBQYXRoXG59XG5cbmV4cG9ydCB0eXBlIE1vdmVOb2RlT3BlcmF0aW9uID0gRXh0ZW5kZWRUeXBlPFxuICAnTW92ZU5vZGVPcGVyYXRpb24nLFxuICBCYXNlTW92ZU5vZGVPcGVyYXRpb25cbj5cblxuZXhwb3J0IHR5cGUgQmFzZVJlbW92ZU5vZGVPcGVyYXRpb24gPSB7XG4gIHR5cGU6ICdyZW1vdmVfbm9kZSdcbiAgcGF0aDogUGF0aFxuICBub2RlOiBOb2RlXG59XG5cbmV4cG9ydCB0eXBlIFJlbW92ZU5vZGVPcGVyYXRpb24gPSBFeHRlbmRlZFR5cGU8XG4gICdSZW1vdmVOb2RlT3BlcmF0aW9uJyxcbiAgQmFzZVJlbW92ZU5vZGVPcGVyYXRpb25cbj5cblxuZXhwb3J0IHR5cGUgQmFzZVJlbW92ZVRleHRPcGVyYXRpb24gPSB7XG4gIHR5cGU6ICdyZW1vdmVfdGV4dCdcbiAgcGF0aDogUGF0aFxuICBvZmZzZXQ6IG51bWJlclxuICB0ZXh0OiBzdHJpbmdcbn1cblxuZXhwb3J0IHR5cGUgUmVtb3ZlVGV4dE9wZXJhdGlvbiA9IEV4dGVuZGVkVHlwZTxcbiAgJ1JlbW92ZVRleHRPcGVyYXRpb24nLFxuICBCYXNlUmVtb3ZlVGV4dE9wZXJhdGlvblxuPlxuXG5leHBvcnQgdHlwZSBCYXNlU2V0Tm9kZU9wZXJhdGlvbiA9IHtcbiAgdHlwZTogJ3NldF9ub2RlJ1xuICBwYXRoOiBQYXRoXG4gIHByb3BlcnRpZXM6IFBhcnRpYWw8Tm9kZT5cbiAgbmV3UHJvcGVydGllczogUGFydGlhbDxOb2RlPlxufVxuXG5leHBvcnQgdHlwZSBTZXROb2RlT3BlcmF0aW9uID0gRXh0ZW5kZWRUeXBlPFxuICAnU2V0Tm9kZU9wZXJhdGlvbicsXG4gIEJhc2VTZXROb2RlT3BlcmF0aW9uXG4+XG5cbmV4cG9ydCB0eXBlIEJhc2VTZXRTZWxlY3Rpb25PcGVyYXRpb24gPVxuICB8IHtcbiAgICAgIHR5cGU6ICdzZXRfc2VsZWN0aW9uJ1xuICAgICAgcHJvcGVydGllczogbnVsbFxuICAgICAgbmV3UHJvcGVydGllczogUmFuZ2VcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogJ3NldF9zZWxlY3Rpb24nXG4gICAgICBwcm9wZXJ0aWVzOiBQYXJ0aWFsPFJhbmdlPlxuICAgICAgbmV3UHJvcGVydGllczogUGFydGlhbDxSYW5nZT5cbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogJ3NldF9zZWxlY3Rpb24nXG4gICAgICBwcm9wZXJ0aWVzOiBSYW5nZVxuICAgICAgbmV3UHJvcGVydGllczogbnVsbFxuICAgIH1cblxuZXhwb3J0IHR5cGUgU2V0U2VsZWN0aW9uT3BlcmF0aW9uID0gRXh0ZW5kZWRUeXBlPFxuICAnU2V0U2VsZWN0aW9uT3BlcmF0aW9uJyxcbiAgQmFzZVNldFNlbGVjdGlvbk9wZXJhdGlvblxuPlxuXG5leHBvcnQgdHlwZSBCYXNlU3BsaXROb2RlT3BlcmF0aW9uID0ge1xuICB0eXBlOiAnc3BsaXRfbm9kZSdcbiAgcGF0aDogUGF0aFxuICBwb3NpdGlvbjogbnVtYmVyXG4gIHByb3BlcnRpZXM6IFBhcnRpYWw8Tm9kZT5cbn1cblxuZXhwb3J0IHR5cGUgU3BsaXROb2RlT3BlcmF0aW9uID0gRXh0ZW5kZWRUeXBlPFxuICAnU3BsaXROb2RlT3BlcmF0aW9uJyxcbiAgQmFzZVNwbGl0Tm9kZU9wZXJhdGlvblxuPlxuXG5leHBvcnQgdHlwZSBOb2RlT3BlcmF0aW9uID1cbiAgfCBJbnNlcnROb2RlT3BlcmF0aW9uXG4gIHwgTWVyZ2VOb2RlT3BlcmF0aW9uXG4gIHwgTW92ZU5vZGVPcGVyYXRpb25cbiAgfCBSZW1vdmVOb2RlT3BlcmF0aW9uXG4gIHwgU2V0Tm9kZU9wZXJhdGlvblxuICB8IFNwbGl0Tm9kZU9wZXJhdGlvblxuXG5leHBvcnQgdHlwZSBTZWxlY3Rpb25PcGVyYXRpb24gPSBTZXRTZWxlY3Rpb25PcGVyYXRpb25cblxuZXhwb3J0IHR5cGUgVGV4dE9wZXJhdGlvbiA9IEluc2VydFRleHRPcGVyYXRpb24gfCBSZW1vdmVUZXh0T3BlcmF0aW9uXG5cbi8qKlxuICogYE9wZXJhdGlvbmAgb2JqZWN0cyBkZWZpbmUgdGhlIGxvdy1sZXZlbCBpbnN0cnVjdGlvbnMgdGhhdCBTbGF0ZSBlZGl0b3JzIHVzZVxuICogdG8gYXBwbHkgY2hhbmdlcyB0byB0aGVpciBpbnRlcm5hbCBzdGF0ZS4gUmVwcmVzZW50aW5nIGFsbCBjaGFuZ2VzIGFzXG4gKiBvcGVyYXRpb25zIGlzIHdoYXQgYWxsb3dzIFNsYXRlIGVkaXRvcnMgdG8gZWFzaWx5IGltcGxlbWVudCBoaXN0b3J5LFxuICogY29sbGFib3JhdGlvbiwgYW5kIG90aGVyIGZlYXR1cmVzLlxuICovXG5cbmV4cG9ydCB0eXBlIEJhc2VPcGVyYXRpb24gPSBOb2RlT3BlcmF0aW9uIHwgU2VsZWN0aW9uT3BlcmF0aW9uIHwgVGV4dE9wZXJhdGlvblxuZXhwb3J0IHR5cGUgT3BlcmF0aW9uID0gRXh0ZW5kZWRUeXBlPCdPcGVyYXRpb24nLCBCYXNlT3BlcmF0aW9uPlxuXG5leHBvcnQgaW50ZXJmYWNlIE9wZXJhdGlvbkludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgYE5vZGVPcGVyYXRpb25gIG9iamVjdC5cbiAgICovXG4gIGlzTm9kZU9wZXJhdGlvbjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIE5vZGVPcGVyYXRpb25cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhbiBgT3BlcmF0aW9uYCBvYmplY3QuXG4gICAqL1xuICBpc09wZXJhdGlvbjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIE9wZXJhdGlvblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgbGlzdCBvZiBgT3BlcmF0aW9uYCBvYmplY3RzLlxuICAgKi9cbiAgaXNPcGVyYXRpb25MaXN0OiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgT3BlcmF0aW9uW11cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIGBTZWxlY3Rpb25PcGVyYXRpb25gIG9iamVjdC5cbiAgICovXG4gIGlzU2VsZWN0aW9uT3BlcmF0aW9uOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgU2VsZWN0aW9uT3BlcmF0aW9uXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBgVGV4dE9wZXJhdGlvbmAgb2JqZWN0LlxuICAgKi9cbiAgaXNUZXh0T3BlcmF0aW9uOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgVGV4dE9wZXJhdGlvblxuXG4gIC8qKlxuICAgKiBJbnZlcnQgYW4gb3BlcmF0aW9uLCByZXR1cm5pbmcgYSBuZXcgb3BlcmF0aW9uIHRoYXQgd2lsbCBleGFjdGx5IHVuZG8gdGhlXG4gICAqIG9yaWdpbmFsIHdoZW4gYXBwbGllZC5cbiAgICovXG4gIGludmVyc2U6IChvcDogT3BlcmF0aW9uKSA9PiBPcGVyYXRpb25cbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IE9wZXJhdGlvbjogT3BlcmF0aW9uSW50ZXJmYWNlID0ge1xuICBpc05vZGVPcGVyYXRpb24odmFsdWU6IGFueSk6IHZhbHVlIGlzIE5vZGVPcGVyYXRpb24ge1xuICAgIHJldHVybiBPcGVyYXRpb24uaXNPcGVyYXRpb24odmFsdWUpICYmIHZhbHVlLnR5cGUuZW5kc1dpdGgoJ19ub2RlJylcbiAgfSxcblxuICBpc09wZXJhdGlvbih2YWx1ZTogYW55KTogdmFsdWUgaXMgT3BlcmF0aW9uIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHZhbHVlLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2luc2VydF9ub2RlJzpcbiAgICAgICAgcmV0dXJuIFBhdGguaXNQYXRoKHZhbHVlLnBhdGgpICYmIE5vZGUuaXNOb2RlKHZhbHVlLm5vZGUpXG4gICAgICBjYXNlICdpbnNlcnRfdGV4dCc6XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgdHlwZW9mIHZhbHVlLm9mZnNldCA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICB0eXBlb2YgdmFsdWUudGV4dCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICBQYXRoLmlzUGF0aCh2YWx1ZS5wYXRoKVxuICAgICAgICApXG4gICAgICBjYXNlICdtZXJnZV9ub2RlJzpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICB0eXBlb2YgdmFsdWUucG9zaXRpb24gPT09ICdudW1iZXInICYmXG4gICAgICAgICAgUGF0aC5pc1BhdGgodmFsdWUucGF0aCkgJiZcbiAgICAgICAgICBpc1BsYWluT2JqZWN0KHZhbHVlLnByb3BlcnRpZXMpXG4gICAgICAgIClcbiAgICAgIGNhc2UgJ21vdmVfbm9kZSc6XG4gICAgICAgIHJldHVybiBQYXRoLmlzUGF0aCh2YWx1ZS5wYXRoKSAmJiBQYXRoLmlzUGF0aCh2YWx1ZS5uZXdQYXRoKVxuICAgICAgY2FzZSAncmVtb3ZlX25vZGUnOlxuICAgICAgICByZXR1cm4gUGF0aC5pc1BhdGgodmFsdWUucGF0aCkgJiYgTm9kZS5pc05vZGUodmFsdWUubm9kZSlcbiAgICAgIGNhc2UgJ3JlbW92ZV90ZXh0JzpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICB0eXBlb2YgdmFsdWUub2Zmc2V0ID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgIHR5cGVvZiB2YWx1ZS50ZXh0ID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgIFBhdGguaXNQYXRoKHZhbHVlLnBhdGgpXG4gICAgICAgIClcbiAgICAgIGNhc2UgJ3NldF9ub2RlJzpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBQYXRoLmlzUGF0aCh2YWx1ZS5wYXRoKSAmJlxuICAgICAgICAgIGlzUGxhaW5PYmplY3QodmFsdWUucHJvcGVydGllcykgJiZcbiAgICAgICAgICBpc1BsYWluT2JqZWN0KHZhbHVlLm5ld1Byb3BlcnRpZXMpXG4gICAgICAgIClcbiAgICAgIGNhc2UgJ3NldF9zZWxlY3Rpb24nOlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICh2YWx1ZS5wcm9wZXJ0aWVzID09PSBudWxsICYmIFJhbmdlLmlzUmFuZ2UodmFsdWUubmV3UHJvcGVydGllcykpIHx8XG4gICAgICAgICAgKHZhbHVlLm5ld1Byb3BlcnRpZXMgPT09IG51bGwgJiYgUmFuZ2UuaXNSYW5nZSh2YWx1ZS5wcm9wZXJ0aWVzKSkgfHxcbiAgICAgICAgICAoaXNQbGFpbk9iamVjdCh2YWx1ZS5wcm9wZXJ0aWVzKSAmJlxuICAgICAgICAgICAgaXNQbGFpbk9iamVjdCh2YWx1ZS5uZXdQcm9wZXJ0aWVzKSlcbiAgICAgICAgKVxuICAgICAgY2FzZSAnc3BsaXRfbm9kZSc6XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgUGF0aC5pc1BhdGgodmFsdWUucGF0aCkgJiZcbiAgICAgICAgICB0eXBlb2YgdmFsdWUucG9zaXRpb24gPT09ICdudW1iZXInICYmXG4gICAgICAgICAgaXNQbGFpbk9iamVjdCh2YWx1ZS5wcm9wZXJ0aWVzKVxuICAgICAgICApXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0sXG5cbiAgaXNPcGVyYXRpb25MaXN0KHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBPcGVyYXRpb25bXSB7XG4gICAgcmV0dXJuIChcbiAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmV2ZXJ5KHZhbCA9PiBPcGVyYXRpb24uaXNPcGVyYXRpb24odmFsKSlcbiAgICApXG4gIH0sXG5cbiAgaXNTZWxlY3Rpb25PcGVyYXRpb24odmFsdWU6IGFueSk6IHZhbHVlIGlzIFNlbGVjdGlvbk9wZXJhdGlvbiB7XG4gICAgcmV0dXJuIE9wZXJhdGlvbi5pc09wZXJhdGlvbih2YWx1ZSkgJiYgdmFsdWUudHlwZS5lbmRzV2l0aCgnX3NlbGVjdGlvbicpXG4gIH0sXG5cbiAgaXNUZXh0T3BlcmF0aW9uKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBUZXh0T3BlcmF0aW9uIHtcbiAgICByZXR1cm4gT3BlcmF0aW9uLmlzT3BlcmF0aW9uKHZhbHVlKSAmJiB2YWx1ZS50eXBlLmVuZHNXaXRoKCdfdGV4dCcpXG4gIH0sXG5cbiAgaW52ZXJzZShvcDogT3BlcmF0aW9uKTogT3BlcmF0aW9uIHtcbiAgICBzd2l0Y2ggKG9wLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2luc2VydF9ub2RlJzoge1xuICAgICAgICByZXR1cm4geyAuLi5vcCwgdHlwZTogJ3JlbW92ZV9ub2RlJyB9XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2luc2VydF90ZXh0Jzoge1xuICAgICAgICByZXR1cm4geyAuLi5vcCwgdHlwZTogJ3JlbW92ZV90ZXh0JyB9XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lcmdlX25vZGUnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLm9wLCB0eXBlOiAnc3BsaXRfbm9kZScsIHBhdGg6IFBhdGgucHJldmlvdXMob3AucGF0aCkgfVxuICAgICAgfVxuXG4gICAgICBjYXNlICdtb3ZlX25vZGUnOiB7XG4gICAgICAgIGNvbnN0IHsgbmV3UGF0aCwgcGF0aCB9ID0gb3BcblxuICAgICAgICAvLyBQRVJGOiBpbiB0aGlzIGNhc2UgdGhlIG1vdmUgb3BlcmF0aW9uIGlzIGEgbm8tb3AgYW55d2F5cy5cbiAgICAgICAgaWYgKFBhdGguZXF1YWxzKG5ld1BhdGgsIHBhdGgpKSB7XG4gICAgICAgICAgcmV0dXJuIG9wXG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGUgbW92ZSBoYXBwZW5zIGNvbXBsZXRlbHkgd2l0aGluIGEgc2luZ2xlIHBhcmVudCB0aGUgcGF0aCBhbmRcbiAgICAgICAgLy8gbmV3UGF0aCBhcmUgc3RhYmxlIHdpdGggcmVzcGVjdCB0byBlYWNoIG90aGVyLlxuICAgICAgICBpZiAoUGF0aC5pc1NpYmxpbmcocGF0aCwgbmV3UGF0aCkpIHtcbiAgICAgICAgICByZXR1cm4geyAuLi5vcCwgcGF0aDogbmV3UGF0aCwgbmV3UGF0aDogcGF0aCB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGUgbW92ZSBkb2VzIG5vdCBoYXBwZW4gd2l0aGluIGEgc2luZ2xlIHBhcmVudCBpdCBpcyBwb3NzaWJsZVxuICAgICAgICAvLyBmb3IgdGhlIG1vdmUgdG8gaW1wYWN0IHRoZSB0cnVlIHBhdGggdG8gdGhlIGxvY2F0aW9uIHdoZXJlIHRoZSBub2RlXG4gICAgICAgIC8vIHdhcyByZW1vdmVkIGZyb20gYW5kIHdoZXJlIGl0IHdhcyBpbnNlcnRlZC4gV2UgaGF2ZSB0byBhZGp1c3QgZm9yIHRoaXNcbiAgICAgICAgLy8gYW5kIGZpbmQgdGhlIG9yaWdpbmFsIHBhdGguIFdlIGNhbiBhY2NvbXBsaXNoIHRoaXMgKG9ubHkgaW4gbm9uLXNpYmxpbmcpXG4gICAgICAgIC8vIG1vdmVzIGJ5IGxvb2tpbmcgYXQgdGhlIGltcGFjdCBvZiB0aGUgbW92ZSBvcGVyYXRpb24gb24gdGhlIG5vZGVcbiAgICAgICAgLy8gYWZ0ZXIgdGhlIG9yaWdpbmFsIG1vdmUgcGF0aC5cbiAgICAgICAgY29uc3QgaW52ZXJzZVBhdGggPSBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcCkhXG4gICAgICAgIGNvbnN0IGludmVyc2VOZXdQYXRoID0gUGF0aC50cmFuc2Zvcm0oUGF0aC5uZXh0KHBhdGgpLCBvcCkhXG4gICAgICAgIHJldHVybiB7IC4uLm9wLCBwYXRoOiBpbnZlcnNlUGF0aCwgbmV3UGF0aDogaW52ZXJzZU5ld1BhdGggfVxuICAgICAgfVxuXG4gICAgICBjYXNlICdyZW1vdmVfbm9kZSc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4ub3AsIHR5cGU6ICdpbnNlcnRfbm9kZScgfVxuICAgICAgfVxuXG4gICAgICBjYXNlICdyZW1vdmVfdGV4dCc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4ub3AsIHR5cGU6ICdpbnNlcnRfdGV4dCcgfVxuICAgICAgfVxuXG4gICAgICBjYXNlICdzZXRfbm9kZSc6IHtcbiAgICAgICAgY29uc3QgeyBwcm9wZXJ0aWVzLCBuZXdQcm9wZXJ0aWVzIH0gPSBvcFxuICAgICAgICByZXR1cm4geyAuLi5vcCwgcHJvcGVydGllczogbmV3UHJvcGVydGllcywgbmV3UHJvcGVydGllczogcHJvcGVydGllcyB9XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3NldF9zZWxlY3Rpb24nOiB7XG4gICAgICAgIGNvbnN0IHsgcHJvcGVydGllcywgbmV3UHJvcGVydGllcyB9ID0gb3BcblxuICAgICAgICBpZiAocHJvcGVydGllcyA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLm9wLFxuICAgICAgICAgICAgcHJvcGVydGllczogbmV3UHJvcGVydGllcyBhcyBSYW5nZSxcbiAgICAgICAgICAgIG5ld1Byb3BlcnRpZXM6IG51bGwsXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG5ld1Byb3BlcnRpZXMgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5vcCxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IG51bGwsXG4gICAgICAgICAgICBuZXdQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzIGFzIFJhbmdlLFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4geyAuLi5vcCwgcHJvcGVydGllczogbmV3UHJvcGVydGllcywgbmV3UHJvcGVydGllczogcHJvcGVydGllcyB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2FzZSAnc3BsaXRfbm9kZSc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4ub3AsIHR5cGU6ICdtZXJnZV9ub2RlJywgcGF0aDogUGF0aC5uZXh0KG9wLnBhdGgpIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IGlzUGxhaW5PYmplY3QgfSBmcm9tICdpcy1wbGFpbi1vYmplY3QnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgT3BlcmF0aW9uIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9vcGVyYXRpb24nXG5cbmNvbnN0IElTX0VESVRPUl9DQUNIRSA9IG5ldyBXZWFrTWFwPG9iamVjdCwgYm9vbGVhbj4oKVxuXG5leHBvcnQgY29uc3QgaXNFZGl0b3I6IEVkaXRvckludGVyZmFjZVsnaXNFZGl0b3InXSA9IChcbiAgdmFsdWU6IGFueVxuKTogdmFsdWUgaXMgRWRpdG9yID0+IHtcbiAgY29uc3QgY2FjaGVkSXNFZGl0b3IgPSBJU19FRElUT1JfQ0FDSEUuZ2V0KHZhbHVlKVxuICBpZiAoY2FjaGVkSXNFZGl0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBjYWNoZWRJc0VkaXRvclxuICB9XG5cbiAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgY29uc3QgaXNFZGl0b3IgPVxuICAgIHR5cGVvZiB2YWx1ZS5hZGRNYXJrID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmFwcGx5ID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmRlbGV0ZUZyYWdtZW50ID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmluc2VydEJyZWFrID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmluc2VydFNvZnRCcmVhayA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5pbnNlcnRGcmFnbWVudCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5pbnNlcnROb2RlID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmluc2VydFRleHQgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuaXNFbGVtZW50UmVhZE9ubHkgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuaXNJbmxpbmUgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuaXNTZWxlY3RhYmxlID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmlzVm9pZCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5ub3JtYWxpemVOb2RlID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLm9uQ2hhbmdlID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLnJlbW92ZU1hcmsgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuZ2V0RGlydHlQYXRocyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICh2YWx1ZS5tYXJrcyA9PT0gbnVsbCB8fCBpc1BsYWluT2JqZWN0KHZhbHVlLm1hcmtzKSkgJiZcbiAgICAodmFsdWUuc2VsZWN0aW9uID09PSBudWxsIHx8IFJhbmdlLmlzUmFuZ2UodmFsdWUuc2VsZWN0aW9uKSkgJiZcbiAgICBOb2RlLmlzTm9kZUxpc3QodmFsdWUuY2hpbGRyZW4pICYmXG4gICAgT3BlcmF0aW9uLmlzT3BlcmF0aW9uTGlzdCh2YWx1ZS5vcGVyYXRpb25zKVxuICBJU19FRElUT1JfQ0FDSEUuc2V0KHZhbHVlLCBpc0VkaXRvcilcbiAgcmV0dXJuIGlzRWRpdG9yXG59XG4iLCAiaW1wb3J0IHtcbiAgQW5jZXN0b3IsXG4gIERlc2NlbmRhbnQsXG4gIEVsZW1lbnQsXG4gIEV4dGVuZGVkVHlwZSxcbiAgTG9jYXRpb24sXG4gIE5vZGUsXG4gIE5vZGVFbnRyeSxcbiAgT3BlcmF0aW9uLFxuICBQYXRoLFxuICBQYXRoUmVmLFxuICBQb2ludCxcbiAgUG9pbnRSZWYsXG4gIFJhbmdlLFxuICBSYW5nZVJlZixcbiAgU3BhbixcbiAgVGV4dCxcbiAgVHJhbnNmb3Jtcyxcbn0gZnJvbSAnLi4nXG5pbXBvcnQge1xuICBMZWFmRWRnZSxcbiAgTWF4aW1pemVNb2RlLFxuICBSYW5nZURpcmVjdGlvbixcbiAgU2VsZWN0aW9uTW9kZSxcbiAgVGV4dERpcmVjdGlvbixcbiAgVGV4dFVuaXQsXG4gIFRleHRVbml0QWRqdXN0bWVudCxcbn0gZnJvbSAnLi4vdHlwZXMvdHlwZXMnXG5pbXBvcnQgeyBPbWl0Rmlyc3RBcmcgfSBmcm9tICcuLi91dGlscy90eXBlcydcbmltcG9ydCB7IGlzRWRpdG9yIH0gZnJvbSAnLi4vZWRpdG9yL2lzLWVkaXRvcidcbmltcG9ydCB7XG4gIFRleHRJbnNlcnRGcmFnbWVudE9wdGlvbnMsXG4gIFRleHRJbnNlcnRUZXh0T3B0aW9ucyxcbn0gZnJvbSAnLi90cmFuc2Zvcm1zL3RleHQnXG5pbXBvcnQgeyBOb2RlSW5zZXJ0Tm9kZXNPcHRpb25zIH0gZnJvbSAnLi90cmFuc2Zvcm1zL25vZGUnXG5cbi8qKlxuICogVGhlIGBFZGl0b3JgIGludGVyZmFjZSBzdG9yZXMgYWxsIHRoZSBzdGF0ZSBvZiBhIFNsYXRlIGVkaXRvci4gSXQgaXMgZXh0ZW5kZWRcbiAqIGJ5IHBsdWdpbnMgdGhhdCB3aXNoIHRvIGFkZCB0aGVpciBvd24gaGVscGVycyBhbmQgaW1wbGVtZW50IG5ldyBiZWhhdmlvcnMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUVkaXRvciB7XG4gIC8vIENvcmUgc3RhdGUuXG5cbiAgY2hpbGRyZW46IERlc2NlbmRhbnRbXVxuICBzZWxlY3Rpb246IFNlbGVjdGlvblxuICBvcGVyYXRpb25zOiBPcGVyYXRpb25bXVxuICBtYXJrczogRWRpdG9yTWFya3MgfCBudWxsXG5cbiAgLy8gT3ZlcnJpZGVhYmxlIGNvcmUgbWV0aG9kcy5cblxuICBhcHBseTogKG9wZXJhdGlvbjogT3BlcmF0aW9uKSA9PiB2b2lkXG4gIGdldERpcnR5UGF0aHM6IChvcGVyYXRpb246IE9wZXJhdGlvbikgPT4gUGF0aFtdXG4gIGdldEZyYWdtZW50OiAoKSA9PiBEZXNjZW5kYW50W11cbiAgaXNFbGVtZW50UmVhZE9ubHk6IChlbGVtZW50OiBFbGVtZW50KSA9PiBib29sZWFuXG4gIGlzU2VsZWN0YWJsZTogKGVsZW1lbnQ6IEVsZW1lbnQpID0+IGJvb2xlYW5cbiAgbWFya2FibGVWb2lkOiAoZWxlbWVudDogRWxlbWVudCkgPT4gYm9vbGVhblxuICBub3JtYWxpemVOb2RlOiAoZW50cnk6IE5vZGVFbnRyeSwgb3B0aW9ucz86IHsgb3BlcmF0aW9uPzogT3BlcmF0aW9uIH0pID0+IHZvaWRcbiAgb25DaGFuZ2U6IChvcHRpb25zPzogeyBvcGVyYXRpb24/OiBPcGVyYXRpb24gfSkgPT4gdm9pZFxuICBzaG91bGROb3JtYWxpemU6ICh7XG4gICAgaXRlcmF0aW9uLFxuICAgIGRpcnR5UGF0aHMsXG4gICAgb3BlcmF0aW9uLFxuICB9OiB7XG4gICAgaXRlcmF0aW9uOiBudW1iZXJcbiAgICBpbml0aWFsRGlydHlQYXRoc0xlbmd0aDogbnVtYmVyXG4gICAgZGlydHlQYXRoczogUGF0aFtdXG4gICAgb3BlcmF0aW9uPzogT3BlcmF0aW9uXG4gIH0pID0+IGJvb2xlYW5cblxuICAvLyBPdmVycmlkZWFibGUgY29yZSB0cmFuc2Zvcm1zLlxuXG4gIGFkZE1hcms6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmFkZE1hcms+XG4gIGNvbGxhcHNlOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMuY29sbGFwc2U+XG4gIGRlbGV0ZTogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLmRlbGV0ZT5cbiAgZGVsZXRlQmFja3dhcmQ6ICh1bml0OiBUZXh0VW5pdCkgPT4gdm9pZFxuICBkZWxldGVGb3J3YXJkOiAodW5pdDogVGV4dFVuaXQpID0+IHZvaWRcbiAgZGVsZXRlRnJhZ21lbnQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmRlbGV0ZUZyYWdtZW50PlxuICBkZXNlbGVjdDogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLmRlc2VsZWN0PlxuICBpbnNlcnRCcmVhazogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaW5zZXJ0QnJlYWs+XG4gIGluc2VydEZyYWdtZW50OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMuaW5zZXJ0RnJhZ21lbnQ+XG4gIGluc2VydE5vZGU6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmluc2VydE5vZGU+XG4gIGluc2VydE5vZGVzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXM+XG4gIGluc2VydFNvZnRCcmVhazogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaW5zZXJ0U29mdEJyZWFrPlxuICBpbnNlcnRUZXh0OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMuaW5zZXJ0VGV4dD5cbiAgbGlmdE5vZGVzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMubGlmdE5vZGVzPlxuICBtZXJnZU5vZGVzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMubWVyZ2VOb2Rlcz5cbiAgbW92ZTogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLm1vdmU+XG4gIG1vdmVOb2RlczogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLm1vdmVOb2Rlcz5cbiAgbm9ybWFsaXplOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5ub3JtYWxpemU+XG4gIHJlbW92ZU1hcms6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnJlbW92ZU1hcms+XG4gIHJlbW92ZU5vZGVzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXM+XG4gIHNlbGVjdDogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLnNlbGVjdD5cbiAgc2V0Tm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgcHJvcHM6IFBhcnRpYWw8VD4sXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGF0PzogTG9jYXRpb25cbiAgICAgIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gICAgICBtb2RlPzogTWF4aW1pemVNb2RlXG4gICAgICBoYW5naW5nPzogYm9vbGVhblxuICAgICAgc3BsaXQ/OiBib29sZWFuXG4gICAgICB2b2lkcz86IGJvb2xlYW5cbiAgICAgIGNvbXBhcmU/OiBQcm9wc0NvbXBhcmVcbiAgICAgIG1lcmdlPzogUHJvcHNNZXJnZVxuICAgIH1cbiAgKSA9PiB2b2lkXG4gIHNldE5vcm1hbGl6aW5nOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5zZXROb3JtYWxpemluZz5cbiAgc2V0UG9pbnQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5zZXRQb2ludD5cbiAgc2V0U2VsZWN0aW9uOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMuc2V0U2VsZWN0aW9uPlxuICBzcGxpdE5vZGVzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMuc3BsaXROb2Rlcz5cbiAgdW5zZXROb2RlczogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLnVuc2V0Tm9kZXM+XG4gIHVud3JhcE5vZGVzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMudW53cmFwTm9kZXM+XG4gIHdpdGhvdXROb3JtYWxpemluZzogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nPlxuICB3cmFwTm9kZXM6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy53cmFwTm9kZXM+XG5cbiAgLy8gT3ZlcnJpZGVhYmxlIGNvcmUgcXVlcmllcy5cblxuICBhYm92ZTogPFQgZXh0ZW5kcyBBbmNlc3Rvcj4oXG4gICAgb3B0aW9ucz86IEVkaXRvckFib3ZlT3B0aW9uczxUPlxuICApID0+IE5vZGVFbnRyeTxUPiB8IHVuZGVmaW5lZFxuICBhZnRlcjogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuYWZ0ZXI+XG4gIGJlZm9yZTogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuYmVmb3JlPlxuICBlZGdlczogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuZWRnZXM+XG4gIGVsZW1lbnRSZWFkT25seTogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuZWxlbWVudFJlYWRPbmx5PlxuICBlbmQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmVuZD5cbiAgZmlyc3Q6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmZpcnN0PlxuICBmcmFnbWVudDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuZnJhZ21lbnQ+XG4gIGdldE1hcmtzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5tYXJrcz5cbiAgaGFzQmxvY2tzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5oYXNCbG9ja3M+XG4gIGhhc0lubGluZXM6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmhhc0lubGluZXM+XG4gIGhhc1BhdGg6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmhhc1BhdGg+XG4gIGhhc1RleHRzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5oYXNUZXh0cz5cbiAgaXNCbG9jazogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaXNCbG9jaz5cbiAgaXNFZGdlOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5pc0VkZ2U+XG4gIGlzRW1wdHk6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmlzRW1wdHk+XG4gIGlzRW5kOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5pc0VuZD5cbiAgaXNJbmxpbmU6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmlzSW5saW5lPlxuICBpc05vcm1hbGl6aW5nOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5pc05vcm1hbGl6aW5nPlxuICBpc1N0YXJ0OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5pc1N0YXJ0PlxuICBpc1ZvaWQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmlzVm9pZD5cbiAgbGFzdDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IubGFzdD5cbiAgbGVhZjogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IubGVhZj5cbiAgbGV2ZWxzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIG9wdGlvbnM/OiBFZGl0b3JMZXZlbHNPcHRpb25zPFQ+XG4gICkgPT4gR2VuZXJhdG9yPE5vZGVFbnRyeTxUPiwgdm9pZCwgdW5kZWZpbmVkPlxuICBuZXh0OiA8VCBleHRlbmRzIERlc2NlbmRhbnQ+KFxuICAgIG9wdGlvbnM/OiBFZGl0b3JOZXh0T3B0aW9uczxUPlxuICApID0+IE5vZGVFbnRyeTxUPiB8IHVuZGVmaW5lZFxuICBub2RlOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5ub2RlPlxuICBub2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBvcHRpb25zPzogRWRpdG9yTm9kZXNPcHRpb25zPFQ+XG4gICkgPT4gR2VuZXJhdG9yPE5vZGVFbnRyeTxUPiwgdm9pZCwgdW5kZWZpbmVkPlxuICBwYXJlbnQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnBhcmVudD5cbiAgcGF0aDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucGF0aD5cbiAgcGF0aFJlZjogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucGF0aFJlZj5cbiAgcGF0aFJlZnM6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnBhdGhSZWZzPlxuICBwb2ludDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucG9pbnQ+XG4gIHBvaW50UmVmOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5wb2ludFJlZj5cbiAgcG9pbnRSZWZzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5wb2ludFJlZnM+XG4gIHBvc2l0aW9uczogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucG9zaXRpb25zPlxuICBwcmV2aW91czogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBvcHRpb25zPzogRWRpdG9yUHJldmlvdXNPcHRpb25zPFQ+XG4gICkgPT4gTm9kZUVudHJ5PFQ+IHwgdW5kZWZpbmVkXG4gIHJhbmdlOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5yYW5nZT5cbiAgcmFuZ2VSZWY6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnJhbmdlUmVmPlxuICByYW5nZVJlZnM6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnJhbmdlUmVmcz5cbiAgc3RhcnQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnN0YXJ0PlxuICBzdHJpbmc6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnN0cmluZz5cbiAgdW5oYW5nUmFuZ2U6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnVuaGFuZ1JhbmdlPlxuICB2b2lkOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci52b2lkPlxufVxuXG5leHBvcnQgdHlwZSBFZGl0b3IgPSBFeHRlbmRlZFR5cGU8J0VkaXRvcicsIEJhc2VFZGl0b3I+XG5cbmV4cG9ydCB0eXBlIEJhc2VTZWxlY3Rpb24gPSBSYW5nZSB8IG51bGxcblxuZXhwb3J0IHR5cGUgU2VsZWN0aW9uID0gRXh0ZW5kZWRUeXBlPCdTZWxlY3Rpb24nLCBCYXNlU2VsZWN0aW9uPlxuXG5leHBvcnQgdHlwZSBFZGl0b3JNYXJrcyA9IE9taXQ8VGV4dCwgJ3RleHQnPlxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvckFib3ZlT3B0aW9uczxUIGV4dGVuZHMgQW5jZXN0b3I+IHtcbiAgYXQ/OiBMb2NhdGlvblxuICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICBtb2RlPzogTWF4aW1pemVNb2RlXG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvckFmdGVyT3B0aW9ucyB7XG4gIGRpc3RhbmNlPzogbnVtYmVyXG4gIHVuaXQ/OiBUZXh0VW5pdEFkanVzdG1lbnRcbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yQmVmb3JlT3B0aW9ucyB7XG4gIGRpc3RhbmNlPzogbnVtYmVyXG4gIHVuaXQ/OiBUZXh0VW5pdEFkanVzdG1lbnRcbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yRGlyZWN0ZWREZWxldGlvbk9wdGlvbnMge1xuICB1bml0PzogVGV4dFVuaXRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JFbGVtZW50UmVhZE9ubHlPcHRpb25zIHtcbiAgYXQ/OiBMb2NhdGlvblxuICBtb2RlPzogTWF4aW1pemVNb2RlXG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvckZyYWdtZW50RGVsZXRpb25PcHRpb25zIHtcbiAgZGlyZWN0aW9uPzogVGV4dERpcmVjdGlvblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvckxlYWZPcHRpb25zIHtcbiAgZGVwdGg/OiBudW1iZXJcbiAgZWRnZT86IExlYWZFZGdlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yTGV2ZWxzT3B0aW9uczxUIGV4dGVuZHMgTm9kZT4ge1xuICBhdD86IExvY2F0aW9uXG4gIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gIHJldmVyc2U/OiBib29sZWFuXG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvck5leHRPcHRpb25zPFQgZXh0ZW5kcyBEZXNjZW5kYW50PiB7XG4gIGF0PzogTG9jYXRpb25cbiAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgbW9kZT86IFNlbGVjdGlvbk1vZGVcbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yTm9kZU9wdGlvbnMge1xuICBkZXB0aD86IG51bWJlclxuICBlZGdlPzogTGVhZkVkZ2Vcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JOb2Rlc09wdGlvbnM8VCBleHRlbmRzIE5vZGU+IHtcbiAgYXQ/OiBMb2NhdGlvbiB8IFNwYW5cbiAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgbW9kZT86IFNlbGVjdGlvbk1vZGVcbiAgdW5pdmVyc2FsPzogYm9vbGVhblxuICByZXZlcnNlPzogYm9vbGVhblxuICB2b2lkcz86IGJvb2xlYW5cbiAgaWdub3JlTm9uU2VsZWN0YWJsZT86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JOb3JtYWxpemVPcHRpb25zIHtcbiAgZm9yY2U/OiBib29sZWFuXG4gIG9wZXJhdGlvbj86IE9wZXJhdGlvblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvclBhcmVudE9wdGlvbnMge1xuICBkZXB0aD86IG51bWJlclxuICBlZGdlPzogTGVhZkVkZ2Vcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JQYXRoT3B0aW9ucyB7XG4gIGRlcHRoPzogbnVtYmVyXG4gIGVkZ2U/OiBMZWFmRWRnZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvclBhdGhSZWZPcHRpb25zIHtcbiAgYWZmaW5pdHk/OiBUZXh0RGlyZWN0aW9uIHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvclBvaW50T3B0aW9ucyB7XG4gIGVkZ2U/OiBMZWFmRWRnZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvclBvaW50UmVmT3B0aW9ucyB7XG4gIGFmZmluaXR5PzogVGV4dERpcmVjdGlvbiB8IG51bGxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JQb3NpdGlvbnNPcHRpb25zIHtcbiAgYXQ/OiBMb2NhdGlvblxuICB1bml0PzogVGV4dFVuaXRBZGp1c3RtZW50XG4gIHJldmVyc2U/OiBib29sZWFuXG4gIHZvaWRzPzogYm9vbGVhblxuICBpZ25vcmVOb25TZWxlY3RhYmxlPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvclByZXZpb3VzT3B0aW9uczxUIGV4dGVuZHMgTm9kZT4ge1xuICBhdD86IExvY2F0aW9uXG4gIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gIG1vZGU/OiBTZWxlY3Rpb25Nb2RlXG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvclJhbmdlUmVmT3B0aW9ucyB7XG4gIGFmZmluaXR5PzogUmFuZ2VEaXJlY3Rpb24gfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yU3RyaW5nT3B0aW9ucyB7XG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvclVuaGFuZ1JhbmdlT3B0aW9ucyB7XG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvclZvaWRPcHRpb25zIHtcbiAgYXQ/OiBMb2NhdGlvblxuICBtb2RlPzogTWF4aW1pemVNb2RlXG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvckludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBHZXQgdGhlIGFuY2VzdG9yIGFib3ZlIGEgbG9jYXRpb24gaW4gdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgYWJvdmU6IDxUIGV4dGVuZHMgQW5jZXN0b3I+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JBYm92ZU9wdGlvbnM8VD5cbiAgKSA9PiBOb2RlRW50cnk8VD4gfCB1bmRlZmluZWRcblxuICAvKipcbiAgICogQWRkIGEgY3VzdG9tIHByb3BlcnR5IHRvIHRoZSBsZWFmIHRleHQgbm9kZXMgaW4gdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKlxuICAgKiBJZiB0aGUgc2VsZWN0aW9uIGlzIGN1cnJlbnRseSBjb2xsYXBzZWQsIHRoZSBtYXJrcyB3aWxsIGJlIGFkZGVkIHRvIHRoZVxuICAgKiBgZWRpdG9yLm1hcmtzYCBwcm9wZXJ0eSBpbnN0ZWFkLCBhbmQgYXBwbGllZCB3aGVuIHRleHQgaXMgaW5zZXJ0ZWQgbmV4dC5cbiAgICovXG4gIGFkZE1hcms6IChlZGl0b3I6IEVkaXRvciwga2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHZvaWRcblxuICAvKipcbiAgICogR2V0IHRoZSBwb2ludCBhZnRlciBhIGxvY2F0aW9uLlxuICAgKi9cbiAgYWZ0ZXI6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBhdDogTG9jYXRpb24sXG4gICAgb3B0aW9ucz86IEVkaXRvckFmdGVyT3B0aW9uc1xuICApID0+IFBvaW50IHwgdW5kZWZpbmVkXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcG9pbnQgYmVmb3JlIGEgbG9jYXRpb24uXG4gICAqL1xuICBiZWZvcmU6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBhdDogTG9jYXRpb24sXG4gICAgb3B0aW9ucz86IEVkaXRvckJlZm9yZU9wdGlvbnNcbiAgKSA9PiBQb2ludCB8IHVuZGVmaW5lZFxuXG4gIC8qKlxuICAgKiBEZWxldGUgY29udGVudCBpbiB0aGUgZWRpdG9yIGJhY2t3YXJkIGZyb20gdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKi9cbiAgZGVsZXRlQmFja3dhcmQ6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yRGlyZWN0ZWREZWxldGlvbk9wdGlvbnNcbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIERlbGV0ZSBjb250ZW50IGluIHRoZSBlZGl0b3IgZm9yd2FyZCBmcm9tIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICovXG4gIGRlbGV0ZUZvcndhcmQ6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yRGlyZWN0ZWREZWxldGlvbk9wdGlvbnNcbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIERlbGV0ZSB0aGUgY29udGVudCBpbiB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAqL1xuICBkZWxldGVGcmFnbWVudDogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JGcmFnbWVudERlbGV0aW9uT3B0aW9uc1xuICApID0+IHZvaWRcblxuICAvKipcbiAgICogR2V0IHRoZSBzdGFydCBhbmQgZW5kIHBvaW50cyBvZiBhIGxvY2F0aW9uLlxuICAgKi9cbiAgZWRnZXM6IChlZGl0b3I6IEVkaXRvciwgYXQ6IExvY2F0aW9uKSA9PiBbUG9pbnQsIFBvaW50XVxuXG4gIC8qKlxuICAgKiBNYXRjaCBhIHJlYWQtb25seSBlbGVtZW50IGluIHRoZSBjdXJyZW50IGJyYW5jaCBvZiB0aGUgZWRpdG9yLlxuICAgKi9cbiAgZWxlbWVudFJlYWRPbmx5OiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvckVsZW1lbnRSZWFkT25seU9wdGlvbnNcbiAgKSA9PiBOb2RlRW50cnk8RWxlbWVudD4gfCB1bmRlZmluZWRcblxuICAvKipcbiAgICogR2V0IHRoZSBlbmQgcG9pbnQgb2YgYSBsb2NhdGlvbi5cbiAgICovXG4gIGVuZDogKGVkaXRvcjogRWRpdG9yLCBhdDogTG9jYXRpb24pID0+IFBvaW50XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZmlyc3Qgbm9kZSBhdCBhIGxvY2F0aW9uLlxuICAgKi9cbiAgZmlyc3Q6IChlZGl0b3I6IEVkaXRvciwgYXQ6IExvY2F0aW9uKSA9PiBOb2RlRW50cnlcblxuICAvKipcbiAgICogR2V0IHRoZSBmcmFnbWVudCBhdCBhIGxvY2F0aW9uLlxuICAgKi9cbiAgZnJhZ21lbnQ6IChlZGl0b3I6IEVkaXRvciwgYXQ6IExvY2F0aW9uKSA9PiBEZXNjZW5kYW50W11cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBub2RlIGhhcyBibG9jayBjaGlsZHJlbi5cbiAgICovXG4gIGhhc0Jsb2NrczogKGVkaXRvcjogRWRpdG9yLCBlbGVtZW50OiBFbGVtZW50KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgbm9kZSBoYXMgaW5saW5lIGFuZCB0ZXh0IGNoaWxkcmVuLlxuICAgKi9cbiAgaGFzSW5saW5lczogKGVkaXRvcjogRWRpdG9yLCBlbGVtZW50OiBFbGVtZW50KSA9PiBib29sZWFuXG5cbiAgaGFzUGF0aDogKGVkaXRvcjogRWRpdG9yLCBwYXRoOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgbm9kZSBoYXMgdGV4dCBjaGlsZHJlbi5cbiAgICovXG4gIGhhc1RleHRzOiAoZWRpdG9yOiBFZGl0b3IsIGVsZW1lbnQ6IEVsZW1lbnQpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogSW5zZXJ0IGEgYmxvY2sgYnJlYWsgYXQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKlxuICAgKiBJZiB0aGUgc2VsZWN0aW9uIGlzIGN1cnJlbnRseSBleHBhbmRlZCwgaXQgd2lsbCBiZSBkZWxldGVkIGZpcnN0LlxuICAgKi9cbiAgaW5zZXJ0QnJlYWs6IChlZGl0b3I6IEVkaXRvcikgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgZnJhZ21lbnRcbiAgICogYXQgdGhlIHNwZWNpZmllZCBsb2NhdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgaW5zZXJ0RnJhZ21lbnQ6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBmcmFnbWVudDogTm9kZVtdLFxuICAgIG9wdGlvbnM/OiBUZXh0SW5zZXJ0RnJhZ21lbnRPcHRpb25zXG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBBdG9taWNhbGx5IGluc2VydHMgYG5vZGVzYFxuICAgKiBhdCB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBpbnNlcnROb2RlOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG5vZGU6IE5vZGUsXG4gICAgb3B0aW9ucz86IE5vZGVJbnNlcnROb2Rlc09wdGlvbnM8VD5cbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIEluc2VydCBhIHNvZnQgYnJlYWsgYXQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKlxuICAgKiBJZiB0aGUgc2VsZWN0aW9uIGlzIGN1cnJlbnRseSBleHBhbmRlZCwgaXQgd2lsbCBiZSBkZWxldGVkIGZpcnN0LlxuICAgKi9cbiAgaW5zZXJ0U29mdEJyZWFrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHZvaWRcblxuICAvKipcbiAgICogSW5zZXJ0IGEgc3RyaW5nIG9mIHRleHRcbiAgICogYXQgdGhlIHNwZWNpZmllZCBsb2NhdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgaW5zZXJ0VGV4dDogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIHRleHQ6IHN0cmluZyxcbiAgICBvcHRpb25zPzogVGV4dEluc2VydFRleHRPcHRpb25zXG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgYmxvY2sgYEVsZW1lbnRgIG9iamVjdC5cbiAgICovXG4gIGlzQmxvY2s6IChlZGl0b3I6IEVkaXRvciwgdmFsdWU6IEVsZW1lbnQpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwb2ludCBpcyBhbiBlZGdlIG9mIGEgbG9jYXRpb24uXG4gICAqL1xuICBpc0VkZ2U6IChlZGl0b3I6IEVkaXRvciwgcG9pbnQ6IFBvaW50LCBhdDogTG9jYXRpb24pID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhbiBgRWRpdG9yYCBvYmplY3QuXG4gICAqL1xuICBpc0VkaXRvcjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIEVkaXRvclxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgcmVhZC1vbmx5IGBFbGVtZW50YCBvYmplY3QuXG4gICAqL1xuICBpc0VsZW1lbnRSZWFkT25seTogKGVkaXRvcjogRWRpdG9yLCBlbGVtZW50OiBFbGVtZW50KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgZW1wdHksIGFjY291bnRpbmcgZm9yIHZvaWQgbm9kZXMuXG4gICAqL1xuICBpc0VtcHR5OiAoZWRpdG9yOiBFZGl0b3IsIGVsZW1lbnQ6IEVsZW1lbnQpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwb2ludCBpcyB0aGUgZW5kIHBvaW50IG9mIGEgbG9jYXRpb24uXG4gICAqL1xuICBpc0VuZDogKGVkaXRvcjogRWRpdG9yLCBwb2ludDogUG9pbnQsIGF0OiBMb2NhdGlvbikgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGFuIGlubGluZSBgRWxlbWVudGAgb2JqZWN0LlxuICAgKi9cbiAgaXNJbmxpbmU6IChlZGl0b3I6IEVkaXRvciwgdmFsdWU6IEVsZW1lbnQpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGVkaXRvciBpcyBjdXJyZW50bHkgbm9ybWFsaXppbmcgYWZ0ZXIgZWFjaCBvcGVyYXRpb24uXG4gICAqL1xuICBpc05vcm1hbGl6aW5nOiAoZWRpdG9yOiBFZGl0b3IpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIHNlbGVjdGFibGUgYEVsZW1lbnRgIG9iamVjdC5cbiAgICovXG4gIGlzU2VsZWN0YWJsZTogKGVkaXRvcjogRWRpdG9yLCBlbGVtZW50OiBFbGVtZW50KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcG9pbnQgaXMgdGhlIHN0YXJ0IHBvaW50IG9mIGEgbG9jYXRpb24uXG4gICAqL1xuICBpc1N0YXJ0OiAoZWRpdG9yOiBFZGl0b3IsIHBvaW50OiBQb2ludCwgYXQ6IExvY2F0aW9uKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSB2b2lkIGBFbGVtZW50YCBvYmplY3QuXG4gICAqL1xuICBpc1ZvaWQ6IChlZGl0b3I6IEVkaXRvciwgdmFsdWU6IEVsZW1lbnQpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogR2V0IHRoZSBsYXN0IG5vZGUgYXQgYSBsb2NhdGlvbi5cbiAgICovXG4gIGxhc3Q6IChlZGl0b3I6IEVkaXRvciwgYXQ6IExvY2F0aW9uKSA9PiBOb2RlRW50cnlcblxuICAvKipcbiAgICogR2V0IHRoZSBsZWFmIHRleHQgbm9kZSBhdCBhIGxvY2F0aW9uLlxuICAgKi9cbiAgbGVhZjogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIGF0OiBMb2NhdGlvbixcbiAgICBvcHRpb25zPzogRWRpdG9yTGVhZk9wdGlvbnNcbiAgKSA9PiBOb2RlRW50cnk8VGV4dD5cblxuICAvKipcbiAgICogSXRlcmF0ZSB0aHJvdWdoIGFsbCBvZiB0aGUgbGV2ZWxzIGF0IGEgbG9jYXRpb24uXG4gICAqL1xuICBsZXZlbHM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvckxldmVsc09wdGlvbnM8VD5cbiAgKSA9PiBHZW5lcmF0b3I8Tm9kZUVudHJ5PFQ+LCB2b2lkLCB1bmRlZmluZWQ+XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWFya3MgdGhhdCB3b3VsZCBiZSBhZGRlZCB0byB0ZXh0IGF0IHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICovXG4gIG1hcmtzOiAoZWRpdG9yOiBFZGl0b3IpID0+IE9taXQ8VGV4dCwgJ3RleHQnPiB8IG51bGxcblxuICAvKipcbiAgICogR2V0IHRoZSBtYXRjaGluZyBub2RlIGluIHRoZSBicmFuY2ggb2YgdGhlIGRvY3VtZW50IGFmdGVyIGEgbG9jYXRpb24uXG4gICAqL1xuICBuZXh0OiA8VCBleHRlbmRzIERlc2NlbmRhbnQ+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JOZXh0T3B0aW9uczxUPlxuICApID0+IE5vZGVFbnRyeTxUPiB8IHVuZGVmaW5lZFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5vZGUgYXQgYSBsb2NhdGlvbi5cbiAgICovXG4gIG5vZGU6IChlZGl0b3I6IEVkaXRvciwgYXQ6IExvY2F0aW9uLCBvcHRpb25zPzogRWRpdG9yTm9kZU9wdGlvbnMpID0+IE5vZGVFbnRyeVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlIHRocm91Z2ggYWxsIG9mIHRoZSBub2RlcyBpbiB0aGUgRWRpdG9yLlxuICAgKi9cbiAgbm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvck5vZGVzT3B0aW9uczxUPlxuICApID0+IEdlbmVyYXRvcjxOb2RlRW50cnk8VD4sIHZvaWQsIHVuZGVmaW5lZD5cblxuICAvKipcbiAgICogTm9ybWFsaXplIGFueSBkaXJ0eSBvYmplY3RzIGluIHRoZSBlZGl0b3IuXG4gICAqL1xuICBub3JtYWxpemU6IChlZGl0b3I6IEVkaXRvciwgb3B0aW9ucz86IEVkaXRvck5vcm1hbGl6ZU9wdGlvbnMpID0+IHZvaWRcblxuICAvKipcbiAgICogR2V0IHRoZSBwYXJlbnQgbm9kZSBvZiBhIGxvY2F0aW9uLlxuICAgKi9cbiAgcGFyZW50OiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgYXQ6IExvY2F0aW9uLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JQYXJlbnRPcHRpb25zXG4gICkgPT4gTm9kZUVudHJ5PEFuY2VzdG9yPlxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBhdGggb2YgYSBsb2NhdGlvbi5cbiAgICovXG4gIHBhdGg6IChlZGl0b3I6IEVkaXRvciwgYXQ6IExvY2F0aW9uLCBvcHRpb25zPzogRWRpdG9yUGF0aE9wdGlvbnMpID0+IFBhdGhcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbXV0YWJsZSByZWYgZm9yIGEgYFBhdGhgIG9iamVjdCwgd2hpY2ggd2lsbCBzdGF5IGluIHN5bmMgYXMgbmV3XG4gICAqIG9wZXJhdGlvbnMgYXJlIGFwcGxpZWQgdG8gdGhlIGVkaXRvci5cbiAgICovXG4gIHBhdGhSZWY6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBwYXRoOiBQYXRoLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JQYXRoUmVmT3B0aW9uc1xuICApID0+IFBhdGhSZWZcblxuICAvKipcbiAgICogR2V0IHRoZSBzZXQgb2YgY3VycmVudGx5IHRyYWNrZWQgcGF0aCByZWZzIG9mIHRoZSBlZGl0b3IuXG4gICAqL1xuICBwYXRoUmVmczogKGVkaXRvcjogRWRpdG9yKSA9PiBTZXQ8UGF0aFJlZj5cblxuICAvKipcbiAgICogR2V0IHRoZSBzdGFydCBvciBlbmQgcG9pbnQgb2YgYSBsb2NhdGlvbi5cbiAgICovXG4gIHBvaW50OiAoZWRpdG9yOiBFZGl0b3IsIGF0OiBMb2NhdGlvbiwgb3B0aW9ucz86IEVkaXRvclBvaW50T3B0aW9ucykgPT4gUG9pbnRcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbXV0YWJsZSByZWYgZm9yIGEgYFBvaW50YCBvYmplY3QsIHdoaWNoIHdpbGwgc3RheSBpbiBzeW5jIGFzIG5ld1xuICAgKiBvcGVyYXRpb25zIGFyZSBhcHBsaWVkIHRvIHRoZSBlZGl0b3IuXG4gICAqL1xuICBwb2ludFJlZjogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIHBvaW50OiBQb2ludCxcbiAgICBvcHRpb25zPzogRWRpdG9yUG9pbnRSZWZPcHRpb25zXG4gICkgPT4gUG9pbnRSZWZcblxuICAvKipcbiAgICogR2V0IHRoZSBzZXQgb2YgY3VycmVudGx5IHRyYWNrZWQgcG9pbnQgcmVmcyBvZiB0aGUgZWRpdG9yLlxuICAgKi9cbiAgcG9pbnRSZWZzOiAoZWRpdG9yOiBFZGl0b3IpID0+IFNldDxQb2ludFJlZj5cblxuICAvKipcbiAgICogUmV0dXJuIGFsbCB0aGUgcG9zaXRpb25zIGluIGBhdGAgcmFuZ2Ugd2hlcmUgYSBgUG9pbnRgIGNhbiBiZSBwbGFjZWQuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIG1vdmVzIGZvcndhcmQgYnkgaW5kaXZpZHVhbCBvZmZzZXRzIGF0IGEgdGltZSwgYnV0XG4gICAqIHRoZSBgdW5pdGAgb3B0aW9uIGNhbiBiZSB1c2VkIHRvIHRvIG1vdmUgYnkgY2hhcmFjdGVyLCB3b3JkLCBsaW5lLCBvciBibG9jay5cbiAgICpcbiAgICogVGhlIGByZXZlcnNlYCBvcHRpb24gY2FuIGJlIHVzZWQgdG8gY2hhbmdlIGl0ZXJhdGlvbiBkaXJlY3Rpb24uXG4gICAqXG4gICAqIE5vdGU6IEJ5IGRlZmF1bHQgdm9pZCBub2RlcyBhcmUgdHJlYXRlZCBhcyBhIHNpbmdsZSBwb2ludCBhbmQgaXRlcmF0aW9uXG4gICAqIHdpbGwgbm90IGhhcHBlbiBpbnNpZGUgdGhlaXIgY29udGVudCB1bmxlc3MgeW91IHBhc3MgaW4gdHJ1ZSBmb3IgdGhlXG4gICAqIGB2b2lkc2Agb3B0aW9uLCB0aGVuIGl0ZXJhdGlvbiB3aWxsIG9jY3VyLlxuICAgKi9cbiAgcG9zaXRpb25zOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvclBvc2l0aW9uc09wdGlvbnNcbiAgKSA9PiBHZW5lcmF0b3I8UG9pbnQsIHZvaWQsIHVuZGVmaW5lZD5cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXRjaGluZyBub2RlIGluIHRoZSBicmFuY2ggb2YgdGhlIGRvY3VtZW50IGJlZm9yZSBhIGxvY2F0aW9uLlxuICAgKi9cbiAgcHJldmlvdXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvclByZXZpb3VzT3B0aW9uczxUPlxuICApID0+IE5vZGVFbnRyeTxUPiB8IHVuZGVmaW5lZFxuXG4gIC8qKlxuICAgKiBHZXQgYSByYW5nZSBvZiBhIGxvY2F0aW9uLlxuICAgKi9cbiAgcmFuZ2U6IChlZGl0b3I6IEVkaXRvciwgYXQ6IExvY2F0aW9uLCB0bz86IExvY2F0aW9uKSA9PiBSYW5nZVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBtdXRhYmxlIHJlZiBmb3IgYSBgUmFuZ2VgIG9iamVjdCwgd2hpY2ggd2lsbCBzdGF5IGluIHN5bmMgYXMgbmV3XG4gICAqIG9wZXJhdGlvbnMgYXJlIGFwcGxpZWQgdG8gdGhlIGVkaXRvci5cbiAgICovXG4gIHJhbmdlUmVmOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgcmFuZ2U6IFJhbmdlLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JSYW5nZVJlZk9wdGlvbnNcbiAgKSA9PiBSYW5nZVJlZlxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNldCBvZiBjdXJyZW50bHkgdHJhY2tlZCByYW5nZSByZWZzIG9mIHRoZSBlZGl0b3IuXG4gICAqL1xuICByYW5nZVJlZnM6IChlZGl0b3I6IEVkaXRvcikgPT4gU2V0PFJhbmdlUmVmPlxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBjdXN0b20gcHJvcGVydHkgZnJvbSBhbGwgb2YgdGhlIGxlYWYgdGV4dCBub2RlcyBpbiB0aGUgY3VycmVudFxuICAgKiBzZWxlY3Rpb24uXG4gICAqXG4gICAqIElmIHRoZSBzZWxlY3Rpb24gaXMgY3VycmVudGx5IGNvbGxhcHNlZCwgdGhlIHJlbW92YWwgd2lsbCBiZSBzdG9yZWQgb25cbiAgICogYGVkaXRvci5tYXJrc2AgYW5kIGFwcGxpZWQgdG8gdGhlIHRleHQgaW5zZXJ0ZWQgbmV4dC5cbiAgICovXG4gIHJlbW92ZU1hcms6IChlZGl0b3I6IEVkaXRvciwga2V5OiBzdHJpbmcpID0+IHZvaWRcblxuICAvKipcbiAgICogTWFudWFsbHkgc2V0IGlmIHRoZSBlZGl0b3Igc2hvdWxkIGN1cnJlbnRseSBiZSBub3JtYWxpemluZy5cbiAgICpcbiAgICogTm90ZTogVXNpbmcgdGhpcyBpbmNvcnJlY3RseSBjYW4gbGVhdmUgdGhlIGVkaXRvciBpbiBhbiBpbnZhbGlkIHN0YXRlLlxuICAgKlxuICAgKi9cbiAgc2V0Tm9ybWFsaXppbmc6IChlZGl0b3I6IEVkaXRvciwgaXNOb3JtYWxpemluZzogYm9vbGVhbikgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0YXJ0IHBvaW50IG9mIGEgbG9jYXRpb24uXG4gICAqL1xuICBzdGFydDogKGVkaXRvcjogRWRpdG9yLCBhdDogTG9jYXRpb24pID0+IFBvaW50XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdGV4dCBzdHJpbmcgY29udGVudCBvZiBhIGxvY2F0aW9uLlxuICAgKlxuICAgKiBOb3RlOiBieSBkZWZhdWx0IHRoZSB0ZXh0IG9mIHZvaWQgbm9kZXMgaXMgY29uc2lkZXJlZCB0byBiZSBhbiBlbXB0eVxuICAgKiBzdHJpbmcsIHJlZ2FyZGxlc3Mgb2YgY29udGVudCwgdW5sZXNzIHlvdSBwYXNzIGluIHRydWUgZm9yIHRoZSB2b2lkcyBvcHRpb25cbiAgICovXG4gIHN0cmluZzogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIGF0OiBMb2NhdGlvbixcbiAgICBvcHRpb25zPzogRWRpdG9yU3RyaW5nT3B0aW9uc1xuICApID0+IHN0cmluZ1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgcmFuZ2UgaW50byBhIG5vbi1oYW5naW5nIG9uZS5cbiAgICovXG4gIHVuaGFuZ1JhbmdlOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgcmFuZ2U6IFJhbmdlLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JVbmhhbmdSYW5nZU9wdGlvbnNcbiAgKSA9PiBSYW5nZVxuXG4gIC8qKlxuICAgKiBNYXRjaCBhIHZvaWQgbm9kZSBpbiB0aGUgY3VycmVudCBicmFuY2ggb2YgdGhlIGVkaXRvci5cbiAgICovXG4gIHZvaWQ6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yVm9pZE9wdGlvbnNcbiAgKSA9PiBOb2RlRW50cnk8RWxlbWVudD4gfCB1bmRlZmluZWRcblxuICAvKipcbiAgICogQ2FsbCBhIGZ1bmN0aW9uLCBkZWZlcnJpbmcgbm9ybWFsaXphdGlvbiB1bnRpbCBhZnRlciBpdCBjb21wbGV0ZXMuXG4gICAqL1xuICB3aXRob3V0Tm9ybWFsaXppbmc6IChlZGl0b3I6IEVkaXRvciwgZm46ICgpID0+IHZvaWQpID0+IHZvaWRcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IEVkaXRvcjogRWRpdG9ySW50ZXJmYWNlID0ge1xuICBhYm92ZShlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLmFib3ZlKG9wdGlvbnMpXG4gIH0sXG5cbiAgYWRkTWFyayhlZGl0b3IsIGtleSwgdmFsdWUpIHtcbiAgICBlZGl0b3IuYWRkTWFyayhrZXksIHZhbHVlKVxuICB9LFxuXG4gIGFmdGVyKGVkaXRvciwgYXQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLmFmdGVyKGF0LCBvcHRpb25zKVxuICB9LFxuXG4gIGJlZm9yZShlZGl0b3IsIGF0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5iZWZvcmUoYXQsIG9wdGlvbnMpXG4gIH0sXG5cbiAgZGVsZXRlQmFja3dhcmQoZWRpdG9yLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7IHVuaXQgPSAnY2hhcmFjdGVyJyB9ID0gb3B0aW9uc1xuICAgIGVkaXRvci5kZWxldGVCYWNrd2FyZCh1bml0KVxuICB9LFxuXG4gIGRlbGV0ZUZvcndhcmQoZWRpdG9yLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7IHVuaXQgPSAnY2hhcmFjdGVyJyB9ID0gb3B0aW9uc1xuICAgIGVkaXRvci5kZWxldGVGb3J3YXJkKHVuaXQpXG4gIH0sXG5cbiAgZGVsZXRlRnJhZ21lbnQoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLmRlbGV0ZUZyYWdtZW50KG9wdGlvbnMpXG4gIH0sXG5cbiAgZWRnZXMoZWRpdG9yLCBhdCkge1xuICAgIHJldHVybiBlZGl0b3IuZWRnZXMoYXQpXG4gIH0sXG5cbiAgZWxlbWVudFJlYWRPbmx5KGVkaXRvcjogRWRpdG9yLCBvcHRpb25zOiBFZGl0b3JFbGVtZW50UmVhZE9ubHlPcHRpb25zID0ge30pIHtcbiAgICByZXR1cm4gZWRpdG9yLmVsZW1lbnRSZWFkT25seShvcHRpb25zKVxuICB9LFxuXG4gIGVuZChlZGl0b3IsIGF0KSB7XG4gICAgcmV0dXJuIGVkaXRvci5lbmQoYXQpXG4gIH0sXG5cbiAgZmlyc3QoZWRpdG9yLCBhdCkge1xuICAgIHJldHVybiBlZGl0b3IuZmlyc3QoYXQpXG4gIH0sXG5cbiAgZnJhZ21lbnQoZWRpdG9yLCBhdCkge1xuICAgIHJldHVybiBlZGl0b3IuZnJhZ21lbnQoYXQpXG4gIH0sXG5cbiAgaGFzQmxvY2tzKGVkaXRvciwgZWxlbWVudCkge1xuICAgIHJldHVybiBlZGl0b3IuaGFzQmxvY2tzKGVsZW1lbnQpXG4gIH0sXG5cbiAgaGFzSW5saW5lcyhlZGl0b3IsIGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmhhc0lubGluZXMoZWxlbWVudClcbiAgfSxcblxuICBoYXNQYXRoKGVkaXRvciwgcGF0aCkge1xuICAgIHJldHVybiBlZGl0b3IuaGFzUGF0aChwYXRoKVxuICB9LFxuXG4gIGhhc1RleHRzKGVkaXRvciwgZWxlbWVudCkge1xuICAgIHJldHVybiBlZGl0b3IuaGFzVGV4dHMoZWxlbWVudClcbiAgfSxcblxuICBpbnNlcnRCcmVhayhlZGl0b3IpIHtcbiAgICBlZGl0b3IuaW5zZXJ0QnJlYWsoKVxuICB9LFxuXG4gIGluc2VydEZyYWdtZW50KGVkaXRvciwgZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IuaW5zZXJ0RnJhZ21lbnQoZnJhZ21lbnQsIG9wdGlvbnMpXG4gIH0sXG5cbiAgaW5zZXJ0Tm9kZShlZGl0b3IsIG5vZGUpIHtcbiAgICBlZGl0b3IuaW5zZXJ0Tm9kZShub2RlKVxuICB9LFxuXG4gIGluc2VydFNvZnRCcmVhayhlZGl0b3IpIHtcbiAgICBlZGl0b3IuaW5zZXJ0U29mdEJyZWFrKClcbiAgfSxcblxuICBpbnNlcnRUZXh0KGVkaXRvciwgdGV4dCkge1xuICAgIGVkaXRvci5pbnNlcnRUZXh0KHRleHQpXG4gIH0sXG5cbiAgaXNCbG9jayhlZGl0b3IsIHZhbHVlKSB7XG4gICAgcmV0dXJuIGVkaXRvci5pc0Jsb2NrKHZhbHVlKVxuICB9LFxuXG4gIGlzRWRnZShlZGl0b3IsIHBvaW50LCBhdCkge1xuICAgIHJldHVybiBlZGl0b3IuaXNFZGdlKHBvaW50LCBhdClcbiAgfSxcblxuICBpc0VkaXRvcih2YWx1ZTogYW55KTogdmFsdWUgaXMgRWRpdG9yIHtcbiAgICByZXR1cm4gaXNFZGl0b3IodmFsdWUpXG4gIH0sXG5cbiAgaXNFbGVtZW50UmVhZE9ubHkoZWRpdG9yLCBlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVkaXRvci5pc0VsZW1lbnRSZWFkT25seShlbGVtZW50KVxuICB9LFxuXG4gIGlzRW1wdHkoZWRpdG9yLCBlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVkaXRvci5pc0VtcHR5KGVsZW1lbnQpXG4gIH0sXG5cbiAgaXNFbmQoZWRpdG9yLCBwb2ludCwgYXQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmlzRW5kKHBvaW50LCBhdClcbiAgfSxcblxuICBpc0lubGluZShlZGl0b3IsIHZhbHVlKSB7XG4gICAgcmV0dXJuIGVkaXRvci5pc0lubGluZSh2YWx1ZSlcbiAgfSxcblxuICBpc05vcm1hbGl6aW5nKGVkaXRvcikge1xuICAgIHJldHVybiBlZGl0b3IuaXNOb3JtYWxpemluZygpXG4gIH0sXG5cbiAgaXNTZWxlY3RhYmxlKGVkaXRvcjogRWRpdG9yLCB2YWx1ZTogRWxlbWVudCkge1xuICAgIHJldHVybiBlZGl0b3IuaXNTZWxlY3RhYmxlKHZhbHVlKVxuICB9LFxuXG4gIGlzU3RhcnQoZWRpdG9yLCBwb2ludCwgYXQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmlzU3RhcnQocG9pbnQsIGF0KVxuICB9LFxuXG4gIGlzVm9pZChlZGl0b3IsIHZhbHVlKSB7XG4gICAgcmV0dXJuIGVkaXRvci5pc1ZvaWQodmFsdWUpXG4gIH0sXG5cbiAgbGFzdChlZGl0b3IsIGF0KSB7XG4gICAgcmV0dXJuIGVkaXRvci5sYXN0KGF0KVxuICB9LFxuXG4gIGxlYWYoZWRpdG9yLCBhdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IubGVhZihhdCwgb3B0aW9ucylcbiAgfSxcblxuICBsZXZlbHMoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5sZXZlbHMob3B0aW9ucylcbiAgfSxcblxuICBtYXJrcyhlZGl0b3IpIHtcbiAgICByZXR1cm4gZWRpdG9yLmdldE1hcmtzKClcbiAgfSxcblxuICBuZXh0PFQgZXh0ZW5kcyBEZXNjZW5kYW50PihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yTmV4dE9wdGlvbnM8VD5cbiAgKTogTm9kZUVudHJ5PFQ+IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gZWRpdG9yLm5leHQob3B0aW9ucylcbiAgfSxcblxuICBub2RlKGVkaXRvciwgYXQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLm5vZGUoYXQsIG9wdGlvbnMpXG4gIH0sXG5cbiAgbm9kZXMoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5ub2RlcyhvcHRpb25zKVxuICB9LFxuXG4gIG5vcm1hbGl6ZShlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3Iubm9ybWFsaXplKG9wdGlvbnMpXG4gIH0sXG5cbiAgcGFyZW50KGVkaXRvciwgYXQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLnBhcmVudChhdCwgb3B0aW9ucylcbiAgfSxcblxuICBwYXRoKGVkaXRvciwgYXQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLnBhdGgoYXQsIG9wdGlvbnMpXG4gIH0sXG5cbiAgcGF0aFJlZihlZGl0b3IsIHBhdGgsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLnBhdGhSZWYocGF0aCwgb3B0aW9ucylcbiAgfSxcblxuICBwYXRoUmVmcyhlZGl0b3IpIHtcbiAgICByZXR1cm4gZWRpdG9yLnBhdGhSZWZzKClcbiAgfSxcblxuICBwb2ludChlZGl0b3IsIGF0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5wb2ludChhdCwgb3B0aW9ucylcbiAgfSxcblxuICBwb2ludFJlZihlZGl0b3IsIHBvaW50LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5wb2ludFJlZihwb2ludCwgb3B0aW9ucylcbiAgfSxcblxuICBwb2ludFJlZnMoZWRpdG9yKSB7XG4gICAgcmV0dXJuIGVkaXRvci5wb2ludFJlZnMoKVxuICB9LFxuXG4gIHBvc2l0aW9ucyhlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLnBvc2l0aW9ucyhvcHRpb25zKVxuICB9LFxuXG4gIHByZXZpb3VzKGVkaXRvciwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IucHJldmlvdXMob3B0aW9ucylcbiAgfSxcblxuICByYW5nZShlZGl0b3IsIGF0LCB0bykge1xuICAgIHJldHVybiBlZGl0b3IucmFuZ2UoYXQsIHRvKVxuICB9LFxuXG4gIHJhbmdlUmVmKGVkaXRvciwgcmFuZ2UsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLnJhbmdlUmVmKHJhbmdlLCBvcHRpb25zKVxuICB9LFxuXG4gIHJhbmdlUmVmcyhlZGl0b3IpIHtcbiAgICByZXR1cm4gZWRpdG9yLnJhbmdlUmVmcygpXG4gIH0sXG5cbiAgcmVtb3ZlTWFyayhlZGl0b3IsIGtleSkge1xuICAgIGVkaXRvci5yZW1vdmVNYXJrKGtleSlcbiAgfSxcblxuICBzZXROb3JtYWxpemluZyhlZGl0b3IsIGlzTm9ybWFsaXppbmcpIHtcbiAgICBlZGl0b3Iuc2V0Tm9ybWFsaXppbmcoaXNOb3JtYWxpemluZylcbiAgfSxcblxuICBzdGFydChlZGl0b3IsIGF0KSB7XG4gICAgcmV0dXJuIGVkaXRvci5zdGFydChhdClcbiAgfSxcblxuICBzdHJpbmcoZWRpdG9yLCBhdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3Iuc3RyaW5nKGF0LCBvcHRpb25zKVxuICB9LFxuXG4gIHVuaGFuZ1JhbmdlKGVkaXRvciwgcmFuZ2UsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLnVuaGFuZ1JhbmdlKHJhbmdlLCBvcHRpb25zKVxuICB9LFxuXG4gIHZvaWQoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci52b2lkKG9wdGlvbnMpXG4gIH0sXG5cbiAgd2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgZm46ICgpID0+IHZvaWQpIHtcbiAgICBlZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGZuKVxuICB9LFxufVxuXG4vKipcbiAqIEEgaGVscGVyIHR5cGUgZm9yIG5hcnJvd2luZyBtYXRjaGVkIG5vZGVzIHdpdGggYSBwcmVkaWNhdGUuXG4gKi9cblxuZXhwb3J0IHR5cGUgTm9kZU1hdGNoPFQgZXh0ZW5kcyBOb2RlPiA9XG4gIHwgKChub2RlOiBOb2RlLCBwYXRoOiBQYXRoKSA9PiBub2RlIGlzIFQpXG4gIHwgKChub2RlOiBOb2RlLCBwYXRoOiBQYXRoKSA9PiBib29sZWFuKVxuXG5leHBvcnQgdHlwZSBQcm9wc0NvbXBhcmUgPSAocHJvcDogUGFydGlhbDxOb2RlPiwgbm9kZTogUGFydGlhbDxOb2RlPikgPT4gYm9vbGVhblxuZXhwb3J0IHR5cGUgUHJvcHNNZXJnZSA9IChwcm9wOiBQYXJ0aWFsPE5vZGU+LCBub2RlOiBQYXJ0aWFsPE5vZGU+KSA9PiBvYmplY3RcbiIsICJpbXBvcnQgeyBQYXRoLCBQb2ludCwgUmFuZ2UgfSBmcm9tICcuLidcblxuLyoqXG4gKiBUaGUgYExvY2F0aW9uYCBpbnRlcmZhY2UgaXMgYSB1bmlvbiBvZiB0aGUgd2F5cyB0byByZWZlciB0byBhIHNwZWNpZmljXG4gKiBsb2NhdGlvbiBpbiBhIFNsYXRlIGRvY3VtZW50OiBwYXRocywgcG9pbnRzIG9yIHJhbmdlcy5cbiAqXG4gKiBNZXRob2RzIHdpbGwgb2Z0ZW4gYWNjZXB0IGEgYExvY2F0aW9uYCBpbnN0ZWFkIG9mIHJlcXVpcmluZyBvbmx5IGEgYFBhdGhgLFxuICogYFBvaW50YCBvciBgUmFuZ2VgLiBUaGlzIGVsaW1pbmF0ZXMgdGhlIG5lZWQgZm9yIGRldmVsb3BlcnMgdG8gbWFuYWdlXG4gKiBjb252ZXJ0aW5nIGJldHdlZW4gdGhlIGRpZmZlcmVudCBpbnRlcmZhY2VzIGluIHRoZWlyIG93biBjb2RlIGJhc2UuXG4gKi9cblxuZXhwb3J0IHR5cGUgTG9jYXRpb24gPSBQYXRoIHwgUG9pbnQgfCBSYW5nZVxuXG5leHBvcnQgaW50ZXJmYWNlIExvY2F0aW9uSW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaW1wbGVtZW50cyB0aGUgYExvY2F0aW9uYCBpbnRlcmZhY2UuXG4gICAqL1xuICBpc0xvY2F0aW9uOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgTG9jYXRpb25cbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IExvY2F0aW9uOiBMb2NhdGlvbkludGVyZmFjZSA9IHtcbiAgaXNMb2NhdGlvbih2YWx1ZTogYW55KTogdmFsdWUgaXMgTG9jYXRpb24ge1xuICAgIHJldHVybiBQYXRoLmlzUGF0aCh2YWx1ZSkgfHwgUG9pbnQuaXNQb2ludCh2YWx1ZSkgfHwgUmFuZ2UuaXNSYW5nZSh2YWx1ZSlcbiAgfSxcbn1cblxuLyoqXG4gKiBUaGUgYFNwYW5gIGludGVyZmFjZSBpcyBhIGxvdy1sZXZlbCB3YXkgdG8gcmVmZXIgdG8gbG9jYXRpb25zIGluIG5vZGVzXG4gKiB3aXRob3V0IHVzaW5nIGBQb2ludGAgd2hpY2ggcmVxdWlyZXMgbGVhZiB0ZXh0IG5vZGVzIHRvIGJlIHByZXNlbnQuXG4gKi9cblxuZXhwb3J0IHR5cGUgU3BhbiA9IFtQYXRoLCBQYXRoXVxuXG5leHBvcnQgaW50ZXJmYWNlIFNwYW5JbnRlcmZhY2Uge1xuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpbXBsZW1lbnRzIHRoZSBgU3BhbmAgaW50ZXJmYWNlLlxuICAgKi9cbiAgaXNTcGFuOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgU3BhblxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgU3BhbjogU3BhbkludGVyZmFjZSA9IHtcbiAgaXNTcGFuKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBTcGFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAyICYmIHZhbHVlLmV2ZXJ5KFBhdGguaXNQYXRoKVxuICAgIClcbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnaXMtcGxhaW4tb2JqZWN0J1xuaW1wb3J0IHsgcHJvZHVjZSB9IGZyb20gJ2ltbWVyJ1xuaW1wb3J0IHsgRXh0ZW5kZWRUeXBlLCBPcGVyYXRpb24sIFBhdGggfSBmcm9tICcuLidcbmltcG9ydCB7IFRleHREaXJlY3Rpb24gfSBmcm9tICcuLi90eXBlcy90eXBlcydcblxuLyoqXG4gKiBgUG9pbnRgIG9iamVjdHMgcmVmZXIgdG8gYSBzcGVjaWZpYyBsb2NhdGlvbiBpbiBhIHRleHQgbm9kZSBpbiBhIFNsYXRlXG4gKiBkb2N1bWVudC4gSXRzIHBhdGggcmVmZXJzIHRvIHRoZSBsb2NhdGlvbiBvZiB0aGUgbm9kZSBpbiB0aGUgdHJlZSwgYW5kIGl0c1xuICogb2Zmc2V0IHJlZmVycyB0byB0aGUgZGlzdGFuY2UgaW50byB0aGUgbm9kZSdzIHN0cmluZyBvZiB0ZXh0LiBQb2ludHMgY2FuXG4gKiBvbmx5IHJlZmVyIHRvIGBUZXh0YCBub2Rlcy5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VQb2ludCB7XG4gIHBhdGg6IFBhdGhcbiAgb2Zmc2V0OiBudW1iZXJcbn1cblxuZXhwb3J0IHR5cGUgUG9pbnQgPSBFeHRlbmRlZFR5cGU8J1BvaW50JywgQmFzZVBvaW50PlxuXG5leHBvcnQgaW50ZXJmYWNlIFBvaW50VHJhbnNmb3JtT3B0aW9ucyB7XG4gIGFmZmluaXR5PzogVGV4dERpcmVjdGlvbiB8IG51bGxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb2ludEludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBDb21wYXJlIGEgcG9pbnQgdG8gYW5vdGhlciwgcmV0dXJuaW5nIGFuIGludGVnZXIgaW5kaWNhdGluZyB3aGV0aGVyIHRoZVxuICAgKiBwb2ludCB3YXMgYmVmb3JlLCBhdCwgb3IgYWZ0ZXIgdGhlIG90aGVyLlxuICAgKi9cbiAgY29tcGFyZTogKHBvaW50OiBQb2ludCwgYW5vdGhlcjogUG9pbnQpID0+IC0xIHwgMCB8IDFcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwb2ludCBpcyBhZnRlciBhbm90aGVyLlxuICAgKi9cbiAgaXNBZnRlcjogKHBvaW50OiBQb2ludCwgYW5vdGhlcjogUG9pbnQpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwb2ludCBpcyBiZWZvcmUgYW5vdGhlci5cbiAgICovXG4gIGlzQmVmb3JlOiAocG9pbnQ6IFBvaW50LCBhbm90aGVyOiBQb2ludCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBvaW50IGlzIGV4YWN0bHkgZXF1YWwgdG8gYW5vdGhlci5cbiAgICovXG4gIGVxdWFsczogKHBvaW50OiBQb2ludCwgYW5vdGhlcjogUG9pbnQpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpbXBsZW1lbnRzIHRoZSBgUG9pbnRgIGludGVyZmFjZS5cbiAgICovXG4gIGlzUG9pbnQ6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBQb2ludFxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gYSBwb2ludCBieSBhbiBvcGVyYXRpb24uXG4gICAqL1xuICB0cmFuc2Zvcm06IChcbiAgICBwb2ludDogUG9pbnQsXG4gICAgb3A6IE9wZXJhdGlvbixcbiAgICBvcHRpb25zPzogUG9pbnRUcmFuc2Zvcm1PcHRpb25zXG4gICkgPT4gUG9pbnQgfCBudWxsXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBQb2ludDogUG9pbnRJbnRlcmZhY2UgPSB7XG4gIGNvbXBhcmUocG9pbnQ6IFBvaW50LCBhbm90aGVyOiBQb2ludCk6IC0xIHwgMCB8IDEge1xuICAgIGNvbnN0IHJlc3VsdCA9IFBhdGguY29tcGFyZShwb2ludC5wYXRoLCBhbm90aGVyLnBhdGgpXG5cbiAgICBpZiAocmVzdWx0ID09PSAwKSB7XG4gICAgICBpZiAocG9pbnQub2Zmc2V0IDwgYW5vdGhlci5vZmZzZXQpIHJldHVybiAtMVxuICAgICAgaWYgKHBvaW50Lm9mZnNldCA+IGFub3RoZXIub2Zmc2V0KSByZXR1cm4gMVxuICAgICAgcmV0dXJuIDBcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH0sXG5cbiAgaXNBZnRlcihwb2ludDogUG9pbnQsIGFub3RoZXI6IFBvaW50KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFBvaW50LmNvbXBhcmUocG9pbnQsIGFub3RoZXIpID09PSAxXG4gIH0sXG5cbiAgaXNCZWZvcmUocG9pbnQ6IFBvaW50LCBhbm90aGVyOiBQb2ludCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBQb2ludC5jb21wYXJlKHBvaW50LCBhbm90aGVyKSA9PT0gLTFcbiAgfSxcblxuICBlcXVhbHMocG9pbnQ6IFBvaW50LCBhbm90aGVyOiBQb2ludCk6IGJvb2xlYW4ge1xuICAgIC8vIFBFUkY6IGVuc3VyZSB0aGUgb2Zmc2V0cyBhcmUgZXF1YWwgZmlyc3Qgc2luY2UgdGhleSBhcmUgY2hlYXBlciB0byBjaGVjay5cbiAgICByZXR1cm4gKFxuICAgICAgcG9pbnQub2Zmc2V0ID09PSBhbm90aGVyLm9mZnNldCAmJiBQYXRoLmVxdWFscyhwb2ludC5wYXRoLCBhbm90aGVyLnBhdGgpXG4gICAgKVxuICB9LFxuXG4gIGlzUG9pbnQodmFsdWU6IGFueSk6IHZhbHVlIGlzIFBvaW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgaXNQbGFpbk9iamVjdCh2YWx1ZSkgJiZcbiAgICAgIHR5cGVvZiB2YWx1ZS5vZmZzZXQgPT09ICdudW1iZXInICYmXG4gICAgICBQYXRoLmlzUGF0aCh2YWx1ZS5wYXRoKVxuICAgIClcbiAgfSxcblxuICB0cmFuc2Zvcm0oXG4gICAgcG9pbnQ6IFBvaW50IHwgbnVsbCxcbiAgICBvcDogT3BlcmF0aW9uLFxuICAgIG9wdGlvbnM6IFBvaW50VHJhbnNmb3JtT3B0aW9ucyA9IHt9XG4gICk6IFBvaW50IHwgbnVsbCB7XG4gICAgcmV0dXJuIHByb2R1Y2UocG9pbnQsIHAgPT4ge1xuICAgICAgaWYgKHAgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgYWZmaW5pdHkgPSAnZm9yd2FyZCcgfSA9IG9wdGlvbnNcbiAgICAgIGNvbnN0IHsgcGF0aCwgb2Zmc2V0IH0gPSBwXG5cbiAgICAgIHN3aXRjaCAob3AudHlwZSkge1xuICAgICAgICBjYXNlICdpbnNlcnRfbm9kZSc6XG4gICAgICAgIGNhc2UgJ21vdmVfbm9kZSc6IHtcbiAgICAgICAgICBwLnBhdGggPSBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcCwgb3B0aW9ucykhXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ2luc2VydF90ZXh0Jzoge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIFBhdGguZXF1YWxzKG9wLnBhdGgsIHBhdGgpICYmXG4gICAgICAgICAgICAob3Aub2Zmc2V0IDwgb2Zmc2V0IHx8XG4gICAgICAgICAgICAgIChvcC5vZmZzZXQgPT09IG9mZnNldCAmJiBhZmZpbml0eSA9PT0gJ2ZvcndhcmQnKSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHAub2Zmc2V0ICs9IG9wLnRleHQubGVuZ3RoXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ21lcmdlX25vZGUnOiB7XG4gICAgICAgICAgaWYgKFBhdGguZXF1YWxzKG9wLnBhdGgsIHBhdGgpKSB7XG4gICAgICAgICAgICBwLm9mZnNldCArPSBvcC5wb3NpdGlvblxuICAgICAgICAgIH1cblxuICAgICAgICAgIHAucGF0aCA9IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wLCBvcHRpb25zKSFcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAncmVtb3ZlX3RleHQnOiB7XG4gICAgICAgICAgaWYgKFBhdGguZXF1YWxzKG9wLnBhdGgsIHBhdGgpICYmIG9wLm9mZnNldCA8PSBvZmZzZXQpIHtcbiAgICAgICAgICAgIHAub2Zmc2V0IC09IE1hdGgubWluKG9mZnNldCAtIG9wLm9mZnNldCwgb3AudGV4dC5sZW5ndGgpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3JlbW92ZV9ub2RlJzoge1xuICAgICAgICAgIGlmIChQYXRoLmVxdWFscyhvcC5wYXRoLCBwYXRoKSB8fCBQYXRoLmlzQW5jZXN0b3Iob3AucGF0aCwgcGF0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcC5wYXRoID0gUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3AsIG9wdGlvbnMpIVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBjYXNlICdzcGxpdF9ub2RlJzoge1xuICAgICAgICAgIGlmIChQYXRoLmVxdWFscyhvcC5wYXRoLCBwYXRoKSkge1xuICAgICAgICAgICAgaWYgKG9wLnBvc2l0aW9uID09PSBvZmZzZXQgJiYgYWZmaW5pdHkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgb3AucG9zaXRpb24gPCBvZmZzZXQgfHxcbiAgICAgICAgICAgICAgKG9wLnBvc2l0aW9uID09PSBvZmZzZXQgJiYgYWZmaW5pdHkgPT09ICdmb3J3YXJkJylcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBwLm9mZnNldCAtPSBvcC5wb3NpdGlvblxuXG4gICAgICAgICAgICAgIHAucGF0aCA9IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wLCB7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBhZmZpbml0eTogJ2ZvcndhcmQnLFxuICAgICAgICAgICAgICB9KSFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcC5wYXRoID0gUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3AsIG9wdGlvbnMpIVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9LFxufVxuXG4vKipcbiAqIGBQb2ludEVudHJ5YCBvYmplY3RzIGFyZSByZXR1cm5lZCB3aGVuIGl0ZXJhdGluZyBvdmVyIGBQb2ludGAgb2JqZWN0cyB0aGF0XG4gKiBiZWxvbmcgdG8gYSByYW5nZS5cbiAqL1xuXG5leHBvcnQgdHlwZSBQb2ludEVudHJ5ID0gW1BvaW50LCAnYW5jaG9yJyB8ICdmb2N1cyddXG4iLCAiZXhwb3J0IHR5cGUgU2NydWJiZXIgPSAoa2V5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKSA9PiB1bmtub3duXG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NydWJiZXJJbnRlcmZhY2Uge1xuICBzZXRTY3J1YmJlcihzY3J1YmJlcjogU2NydWJiZXIgfCB1bmRlZmluZWQpOiB2b2lkXG4gIHN0cmluZ2lmeSh2YWx1ZTogYW55KTogc3RyaW5nXG59XG5cbmxldCBfc2NydWJiZXI6IFNjcnViYmVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXG5cbi8qKlxuICogVGhpcyBpbnRlcmZhY2UgaW1wbGVtZW50cyBhIHN0cmluZ2lmeSgpIGZ1bmN0aW9uLCB3aGljaCBpcyB1c2VkIGJ5IFNsYXRlXG4gKiBpbnRlcm5hbGx5IHdoZW4gZ2VuZXJhdGluZyBleGNlcHRpb25zIGNvbnRhaW5pbmcgZW5kIHVzZXIgZGF0YS4gRGV2ZWxvcGVyc1xuICogdXNpbmcgU2xhdGUgbWF5IGNhbGwgU2NydWJiZXIuc2V0U2NydWJiZXIoKSB0byBhbHRlciB0aGUgYmVoYXZpb3Igb2YgdGhpc1xuICogc3RyaW5naWZ5KCkgZnVuY3Rpb24uXG4gKlxuICogRm9yIGV4YW1wbGUsIHRvIHByZXZlbnQgdGhlIGNsZWFydGV4dCBsb2dnaW5nIG9mICd0ZXh0JyBmaWVsZHMgd2l0aGluIE5vZGVzOlxuICpcbiAqICAgIGltcG9ydCB7IFNjcnViYmVyIH0gZnJvbSAnc2xhdGUnO1xuICogICAgU2NydWJiZXIuc2V0U2NydWJiZXIoKGtleSwgdmFsKSA9PiB7XG4gKiAgICAgIGlmIChrZXkgPT09ICd0ZXh0JykgcmV0dXJuICcuLi5zY3J1YmJlZC4uLidcbiAqICAgICAgcmV0dXJuIHZhbFxuICogICAgfSk7XG4gKlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgU2NydWJiZXI6IFNjcnViYmVySW50ZXJmYWNlID0ge1xuICBzZXRTY3J1YmJlcihzY3J1YmJlcjogU2NydWJiZXIgfCB1bmRlZmluZWQpOiB2b2lkIHtcbiAgICBfc2NydWJiZXIgPSBzY3J1YmJlclxuICB9LFxuXG4gIHN0cmluZ2lmeSh2YWx1ZTogYW55KTogc3RyaW5nIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUsIF9zY3J1YmJlcilcbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnaXMtcGxhaW4tb2JqZWN0J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLidcbmltcG9ydCB7IEV4dGVuZGVkVHlwZSB9IGZyb20gJy4uL3R5cGVzL2N1c3RvbS10eXBlcydcbmltcG9ydCB7IGlzRGVlcEVxdWFsIH0gZnJvbSAnLi4vdXRpbHMvZGVlcC1lcXVhbCdcblxuLyoqXG4gKiBgVGV4dGAgb2JqZWN0cyByZXByZXNlbnQgdGhlIG5vZGVzIHRoYXQgY29udGFpbiB0aGUgYWN0dWFsIHRleHQgY29udGVudCBvZiBhXG4gKiBTbGF0ZSBkb2N1bWVudCBhbG9uZyB3aXRoIGFueSBmb3JtYXR0aW5nIHByb3BlcnRpZXMuIFRoZXkgYXJlIGFsd2F5cyBsZWFmXG4gKiBub2RlcyBpbiB0aGUgZG9jdW1lbnQgdHJlZSBhcyB0aGV5IGNhbm5vdCBjb250YWluIGFueSBjaGlsZHJlbi5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VUZXh0IHtcbiAgdGV4dDogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIFRleHQgPSBFeHRlbmRlZFR5cGU8J1RleHQnLCBCYXNlVGV4dD5cblxuZXhwb3J0IGludGVyZmFjZSBUZXh0RXF1YWxzT3B0aW9ucyB7XG4gIGxvb3NlPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRJbnRlcmZhY2Uge1xuICAvKipcbiAgICogQ2hlY2sgaWYgdHdvIHRleHQgbm9kZXMgYXJlIGVxdWFsLlxuICAgKlxuICAgKiBXaGVuIGxvb3NlIGlzIHNldCwgdGhlIHRleHQgaXMgbm90IGNvbXBhcmVkLiBUaGlzIGlzXG4gICAqIHVzZWQgdG8gY2hlY2sgd2hldGhlciBzaWJsaW5nIHRleHQgbm9kZXMgY2FuIGJlIG1lcmdlZC5cbiAgICovXG4gIGVxdWFsczogKHRleHQ6IFRleHQsIGFub3RoZXI6IFRleHQsIG9wdGlvbnM/OiBUZXh0RXF1YWxzT3B0aW9ucykgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGltcGxlbWVudHMgdGhlIGBUZXh0YCBpbnRlcmZhY2UuXG4gICAqL1xuICBpc1RleHQ6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBUZXh0XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBsaXN0IG9mIGBUZXh0YCBvYmplY3RzLlxuICAgKi9cbiAgaXNUZXh0TGlzdDogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIFRleHRbXVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBzb21lIHByb3BzIGFyZSBhIHBhcnRpYWwgb2YgVGV4dC5cbiAgICovXG4gIGlzVGV4dFByb3BzOiAocHJvcHM6IGFueSkgPT4gcHJvcHMgaXMgUGFydGlhbDxUZXh0PlxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiB0ZXh0IG1hdGNoZXMgc2V0IG9mIHByb3BlcnRpZXMuXG4gICAqXG4gICAqIE5vdGU6IHRoaXMgaXMgZm9yIG1hdGNoaW5nIGN1c3RvbSBwcm9wZXJ0aWVzLCBhbmQgaXQgZG9lcyBub3QgZW5zdXJlIHRoYXRcbiAgICogdGhlIGB0ZXh0YCBwcm9wZXJ0eSBhcmUgdHdvIG5vZGVzIGVxdWFsLlxuICAgKi9cbiAgbWF0Y2hlczogKHRleHQ6IFRleHQsIHByb3BzOiBQYXJ0aWFsPFRleHQ+KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGVhdmVzIGZvciBhIHRleHQgbm9kZSBnaXZlbiBkZWNvcmF0aW9ucy5cbiAgICovXG4gIGRlY29yYXRpb25zOiAobm9kZTogVGV4dCwgZGVjb3JhdGlvbnM6IFJhbmdlW10pID0+IFRleHRbXVxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgVGV4dDogVGV4dEludGVyZmFjZSA9IHtcbiAgZXF1YWxzKHRleHQ6IFRleHQsIGFub3RoZXI6IFRleHQsIG9wdGlvbnM6IFRleHRFcXVhbHNPcHRpb25zID0ge30pOiBib29sZWFuIHtcbiAgICBjb25zdCB7IGxvb3NlID0gZmFsc2UgfSA9IG9wdGlvbnNcblxuICAgIGZ1bmN0aW9uIG9taXRUZXh0KG9iajogUmVjb3JkPGFueSwgYW55Pikge1xuICAgICAgY29uc3QgeyB0ZXh0LCAuLi5yZXN0IH0gPSBvYmpcblxuICAgICAgcmV0dXJuIHJlc3RcbiAgICB9XG5cbiAgICByZXR1cm4gaXNEZWVwRXF1YWwoXG4gICAgICBsb29zZSA/IG9taXRUZXh0KHRleHQpIDogdGV4dCxcbiAgICAgIGxvb3NlID8gb21pdFRleHQoYW5vdGhlcikgOiBhbm90aGVyXG4gICAgKVxuICB9LFxuXG4gIGlzVGV4dCh2YWx1ZTogYW55KTogdmFsdWUgaXMgVGV4dCB7XG4gICAgcmV0dXJuIGlzUGxhaW5PYmplY3QodmFsdWUpICYmIHR5cGVvZiB2YWx1ZS50ZXh0ID09PSAnc3RyaW5nJ1xuICB9LFxuXG4gIGlzVGV4dExpc3QodmFsdWU6IGFueSk6IHZhbHVlIGlzIFRleHRbXSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmV2ZXJ5KHZhbCA9PiBUZXh0LmlzVGV4dCh2YWwpKVxuICB9LFxuXG4gIGlzVGV4dFByb3BzKHByb3BzOiBhbnkpOiBwcm9wcyBpcyBQYXJ0aWFsPFRleHQ+IHtcbiAgICByZXR1cm4gKHByb3BzIGFzIFBhcnRpYWw8VGV4dD4pLnRleHQgIT09IHVuZGVmaW5lZFxuICB9LFxuXG4gIG1hdGNoZXModGV4dDogVGV4dCwgcHJvcHM6IFBhcnRpYWw8VGV4dD4pOiBib29sZWFuIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgaWYgKGtleSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgIXRleHQuaGFzT3duUHJvcGVydHkoa2V5KSB8fFxuICAgICAgICB0ZXh0WzxrZXlvZiBUZXh0PmtleV0gIT09IHByb3BzWzxrZXlvZiBUZXh0PmtleV1cbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9LFxuXG4gIGRlY29yYXRpb25zKG5vZGU6IFRleHQsIGRlY29yYXRpb25zOiBSYW5nZVtdKTogVGV4dFtdIHtcbiAgICBsZXQgbGVhdmVzOiBUZXh0W10gPSBbeyAuLi5ub2RlIH1dXG5cbiAgICBmb3IgKGNvbnN0IGRlYyBvZiBkZWNvcmF0aW9ucykge1xuICAgICAgY29uc3QgeyBhbmNob3IsIGZvY3VzLCAuLi5yZXN0IH0gPSBkZWNcbiAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKGRlYylcbiAgICAgIGNvbnN0IG5leHQgPSBbXVxuICAgICAgbGV0IGxlYWZFbmQgPSAwXG4gICAgICBjb25zdCBkZWNvcmF0aW9uU3RhcnQgPSBzdGFydC5vZmZzZXRcbiAgICAgIGNvbnN0IGRlY29yYXRpb25FbmQgPSBlbmQub2Zmc2V0XG5cbiAgICAgIGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHtcbiAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IGxlYWYudGV4dFxuICAgICAgICBjb25zdCBsZWFmU3RhcnQgPSBsZWFmRW5kXG4gICAgICAgIGxlYWZFbmQgKz0gbGVuZ3RoXG5cbiAgICAgICAgLy8gSWYgdGhlIHJhbmdlIGVuY29tcGFzc2VzIHRoZSBlbnRpcmUgbGVhZiwgYWRkIHRoZSByYW5nZS5cbiAgICAgICAgaWYgKGRlY29yYXRpb25TdGFydCA8PSBsZWFmU3RhcnQgJiYgbGVhZkVuZCA8PSBkZWNvcmF0aW9uRW5kKSB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihsZWFmLCByZXN0KVxuICAgICAgICAgIG5leHQucHVzaChsZWFmKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGUgcmFuZ2UgZXhwYW5kZWQgYW5kIG1hdGNoIHRoZSBsZWFmLCBvciBzdGFydHMgYWZ0ZXIsIG9yIGVuZHMgYmVmb3JlIGl0LCBjb250aW51ZS5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIChkZWNvcmF0aW9uU3RhcnQgIT09IGRlY29yYXRpb25FbmQgJiZcbiAgICAgICAgICAgIChkZWNvcmF0aW9uU3RhcnQgPT09IGxlYWZFbmQgfHwgZGVjb3JhdGlvbkVuZCA9PT0gbGVhZlN0YXJ0KSkgfHxcbiAgICAgICAgICBkZWNvcmF0aW9uU3RhcnQgPiBsZWFmRW5kIHx8XG4gICAgICAgICAgZGVjb3JhdGlvbkVuZCA8IGxlYWZTdGFydCB8fFxuICAgICAgICAgIChkZWNvcmF0aW9uRW5kID09PSBsZWFmU3RhcnQgJiYgbGVhZlN0YXJ0ICE9PSAwKVxuICAgICAgICApIHtcbiAgICAgICAgICBuZXh0LnB1c2gobGVhZilcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gT3RoZXJ3aXNlIHdlIG5lZWQgdG8gc3BsaXQgdGhlIGxlYWYsIGF0IHRoZSBzdGFydCwgZW5kLCBvciBib3RoLFxuICAgICAgICAvLyBhbmQgYWRkIHRoZSByYW5nZSB0byB0aGUgbWlkZGxlIGludGVyc2VjdGluZyBzZWN0aW9uLiBEbyB0aGUgZW5kXG4gICAgICAgIC8vIHNwbGl0IGZpcnN0IHNpbmNlIHdlIGRvbid0IG5lZWQgdG8gdXBkYXRlIHRoZSBvZmZzZXQgdGhhdCB3YXkuXG4gICAgICAgIGxldCBtaWRkbGUgPSBsZWFmXG4gICAgICAgIGxldCBiZWZvcmVcbiAgICAgICAgbGV0IGFmdGVyXG5cbiAgICAgICAgaWYgKGRlY29yYXRpb25FbmQgPCBsZWFmRW5kKSB7XG4gICAgICAgICAgY29uc3Qgb2ZmID0gZGVjb3JhdGlvbkVuZCAtIGxlYWZTdGFydFxuICAgICAgICAgIGFmdGVyID0geyAuLi5taWRkbGUsIHRleHQ6IG1pZGRsZS50ZXh0LnNsaWNlKG9mZikgfVxuICAgICAgICAgIG1pZGRsZSA9IHsgLi4ubWlkZGxlLCB0ZXh0OiBtaWRkbGUudGV4dC5zbGljZSgwLCBvZmYpIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkZWNvcmF0aW9uU3RhcnQgPiBsZWFmU3RhcnQpIHtcbiAgICAgICAgICBjb25zdCBvZmYgPSBkZWNvcmF0aW9uU3RhcnQgLSBsZWFmU3RhcnRcbiAgICAgICAgICBiZWZvcmUgPSB7IC4uLm1pZGRsZSwgdGV4dDogbWlkZGxlLnRleHQuc2xpY2UoMCwgb2ZmKSB9XG4gICAgICAgICAgbWlkZGxlID0geyAuLi5taWRkbGUsIHRleHQ6IG1pZGRsZS50ZXh0LnNsaWNlKG9mZikgfVxuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmFzc2lnbihtaWRkbGUsIHJlc3QpXG5cbiAgICAgICAgaWYgKGJlZm9yZSkge1xuICAgICAgICAgIG5leHQucHVzaChiZWZvcmUpXG4gICAgICAgIH1cblxuICAgICAgICBuZXh0LnB1c2gobWlkZGxlKVxuXG4gICAgICAgIGlmIChhZnRlcikge1xuICAgICAgICAgIG5leHQucHVzaChhZnRlcilcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZWF2ZXMgPSBuZXh0XG4gICAgfVxuXG4gICAgcmV0dXJuIGxlYXZlc1xuICB9LFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgTG9jYXRpb24gfSBmcm9tICcuLi9pbnRlcmZhY2VzJ1xuXG4vKipcbiAqIEdldCB0aGUgZGVmYXVsdCBsb2NhdGlvbiB0byBpbnNlcnQgY29udGVudCBpbnRvIHRoZSBlZGl0b3IuXG4gKiBCeSBkZWZhdWx0LCB1c2UgdGhlIHNlbGVjdGlvbiBhcyB0aGUgdGFyZ2V0IGxvY2F0aW9uLiBCdXQgaWYgdGhlcmUgaXNcbiAqIG5vIHNlbGVjdGlvbiwgaW5zZXJ0IGF0IHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50IHNpbmNlIHRoYXQgaXMgc3VjaCBhXG4gKiBjb21tb24gdXNlIGNhc2Ugd2hlbiBpbnNlcnRpbmcgZnJvbSBhIG5vbi1zZWxlY3RlZCBzdGF0ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRJbnNlcnRMb2NhdGlvbiA9IChlZGl0b3I6IEVkaXRvcik6IExvY2F0aW9uID0+IHtcbiAgaWYgKGVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICByZXR1cm4gZWRpdG9yLnNlbGVjdGlvblxuICB9IGVsc2UgaWYgKGVkaXRvci5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIEVkaXRvci5lbmQoZWRpdG9yLCBbXSlcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gWzBdXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuXG5leHBvcnQgY29uc3QgbWF0Y2hQYXRoID0gKFxuICBlZGl0b3I6IEVkaXRvcixcbiAgcGF0aDogUGF0aFxuKTogKChub2RlOiBOb2RlKSA9PiBib29sZWFuKSA9PiB7XG4gIGNvbnN0IFtub2RlXSA9IEVkaXRvci5ub2RlKGVkaXRvciwgcGF0aClcbiAgcmV0dXJuIG4gPT4gbiA9PT0gbm9kZVxufVxuIiwgIi8vIENoYXJhY3RlciAoZ3JhcGhlbWUgY2x1c3RlcikgYm91bmRhcmllcyBhcmUgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG9cbi8vIHRoZSBkZWZhdWx0IGdyYXBoZW1lIGNsdXN0ZXIgYm91bmRhcnkgc3BlY2lmaWNhdGlvbiwgZXh0ZW5kZWQgZ3JhcGhlbWUgY2x1c3RlcnMgdmFyaWFudFsxXS5cbi8vXG4vLyBSZWZlcmVuY2VzOlxuLy9cbi8vIFsxXSBodHRwczovL3d3dy51bmljb2RlLm9yZy9yZXBvcnRzL3RyMjkvI0RlZmF1bHRfR3JhcGhlbWVfQ2x1c3Rlcl9UYWJsZVxuLy8gWzJdIGh0dHBzOi8vd3d3LnVuaWNvZGUub3JnL1B1YmxpYy9VQ0QvbGF0ZXN0L3VjZC9hdXhpbGlhcnkvR3JhcGhlbWVCcmVha1Byb3BlcnR5LnR4dFxuLy8gWzNdIGh0dHBzOi8vd3d3LnVuaWNvZGUub3JnL1B1YmxpYy9VQ0QvbGF0ZXN0L3VjZC9hdXhpbGlhcnkvR3JhcGhlbWVCcmVha1Rlc3QuaHRtbFxuLy8gWzRdIGh0dHBzOi8vd3d3LnVuaWNvZGUub3JnL1B1YmxpYy9VQ0QvbGF0ZXN0L3VjZC9hdXhpbGlhcnkvR3JhcGhlbWVCcmVha1Rlc3QudHh0XG5cbi8qKlxuICogR2V0IHRoZSBkaXN0YW5jZSB0byB0aGUgZW5kIG9mIHRoZSBmaXJzdCBjaGFyYWN0ZXIgaW4gYSBzdHJpbmcgb2YgdGV4dC5cbiAqL1xuXG5leHBvcnQgY29uc3QgZ2V0Q2hhcmFjdGVyRGlzdGFuY2UgPSAoc3RyOiBzdHJpbmcsIGlzUlRMID0gZmFsc2UpOiBudW1iZXIgPT4ge1xuICBjb25zdCBpc0xUUiA9ICFpc1JUTFxuICBjb25zdCBjb2RlcG9pbnRzID0gaXNSVEwgPyBjb2RlcG9pbnRzSXRlcmF0b3JSVEwoc3RyKSA6IHN0clxuXG4gIGxldCBsZWZ0OiBDb2RlcG9pbnRUeXBlID0gQ29kZXBvaW50VHlwZS5Ob25lXG4gIGxldCByaWdodDogQ29kZXBvaW50VHlwZSA9IENvZGVwb2ludFR5cGUuTm9uZVxuICBsZXQgZGlzdGFuY2UgPSAwXG4gIC8vIEV2YWx1YXRpb24gb2YgdGhlc2UgY29uZGl0aW9ucyBhcmUgZGVmZXJyZWQuXG4gIGxldCBnYjExOiBib29sZWFuIHwgbnVsbCA9IG51bGwgLy8gSXMgR0IxMSBhcHBsaWNhYmxlP1xuICBsZXQgZ2IxMk9yMTM6IGJvb2xlYW4gfCBudWxsID0gbnVsbCAvLyBJcyBHQjEyIG9yIEdCMTMgYXBwbGljYWJsZT9cblxuICBmb3IgKGNvbnN0IGNoYXIgb2YgY29kZXBvaW50cykge1xuICAgIGNvbnN0IGNvZGUgPSBjaGFyLmNvZGVQb2ludEF0KDApXG4gICAgaWYgKCFjb2RlKSBicmVha1xuXG4gICAgY29uc3QgdHlwZSA9IGdldENvZGVwb2ludFR5cGUoY2hhciwgY29kZSlcbiAgICA7W2xlZnQsIHJpZ2h0XSA9IGlzTFRSID8gW3JpZ2h0LCB0eXBlXSA6IFt0eXBlLCBsZWZ0XVxuXG4gICAgaWYgKFxuICAgICAgaW50ZXJzZWN0cyhsZWZ0LCBDb2RlcG9pbnRUeXBlLlpXSikgJiZcbiAgICAgIGludGVyc2VjdHMocmlnaHQsIENvZGVwb2ludFR5cGUuRXh0UGljdClcbiAgICApIHtcbiAgICAgIGlmIChpc0xUUikge1xuICAgICAgICBnYjExID0gZW5kc1dpdGhFbW9qaVpXSihzdHIuc3Vic3RyaW5nKDAsIGRpc3RhbmNlKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdiMTEgPSBlbmRzV2l0aEVtb2ppWldKKHN0ci5zdWJzdHJpbmcoMCwgc3RyLmxlbmd0aCAtIGRpc3RhbmNlKSlcbiAgICAgIH1cbiAgICAgIGlmICghZ2IxMSkgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBpbnRlcnNlY3RzKGxlZnQsIENvZGVwb2ludFR5cGUuUkkpICYmXG4gICAgICBpbnRlcnNlY3RzKHJpZ2h0LCBDb2RlcG9pbnRUeXBlLlJJKVxuICAgICkge1xuICAgICAgaWYgKGdiMTJPcjEzICE9PSBudWxsKSB7XG4gICAgICAgIGdiMTJPcjEzID0gIWdiMTJPcjEzXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNMVFIpIHtcbiAgICAgICAgICBnYjEyT3IxMyA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnYjEyT3IxMyA9IGVuZHNXaXRoT2RkTnVtYmVyT2ZSSXMoXG4gICAgICAgICAgICBzdHIuc3Vic3RyaW5nKDAsIHN0ci5sZW5ndGggLSBkaXN0YW5jZSlcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghZ2IxMk9yMTMpIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgbGVmdCAhPT0gQ29kZXBvaW50VHlwZS5Ob25lICYmXG4gICAgICByaWdodCAhPT0gQ29kZXBvaW50VHlwZS5Ob25lICYmXG4gICAgICBpc0JvdW5kYXJ5UGFpcihsZWZ0LCByaWdodClcbiAgICApIHtcbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgZGlzdGFuY2UgKz0gY2hhci5sZW5ndGhcbiAgfVxuXG4gIHJldHVybiBkaXN0YW5jZSB8fCAxXG59XG5cbmNvbnN0IFNQQUNFID0gL1xccy9cbmNvbnN0IFBVTkNUVUFUSU9OID1cbiAgL1tcXHUwMDJCXFx1MDAyMS1cXHUwMDIzXFx1MDAyNS1cXHUwMDJBXFx1MDAyQy1cXHUwMDJGXFx1MDAzQVxcdTAwM0JcXHUwMDNGXFx1MDA0MFxcdTAwNUItXFx1MDA1RFxcdTAwNUZcXHUwMDdCXFx1MDA3RFxcdTAwQTFcXHUwMEE3XFx1MDBBQlxcdTAwQjZcXHUwMEI3XFx1MDBCQlxcdTAwQkZcXHUwMzdFXFx1MDM4N1xcdTA1NUEtXFx1MDU1RlxcdTA1ODlcXHUwNThBXFx1MDVCRVxcdTA1QzBcXHUwNUMzXFx1MDVDNlxcdTA1RjNcXHUwNUY0XFx1MDYwOVxcdTA2MEFcXHUwNjBDXFx1MDYwRFxcdTA2MUJcXHUwNjFFXFx1MDYxRlxcdTA2NkEtXFx1MDY2RFxcdTA2RDRcXHUwNzAwLVxcdTA3MERcXHUwN0Y3LVxcdTA3RjlcXHUwODMwLVxcdTA4M0VcXHUwODVFXFx1MDk2NFxcdTA5NjVcXHUwOTcwXFx1MEFGMFxcdTBERjRcXHUwRTRGXFx1MEU1QVxcdTBFNUJcXHUwRjA0LVxcdTBGMTJcXHUwRjE0XFx1MEYzQS1cXHUwRjNEXFx1MEY4NVxcdTBGRDAtXFx1MEZENFxcdTBGRDlcXHUwRkRBXFx1MTA0QS1cXHUxMDRGXFx1MTBGQlxcdTEzNjAtXFx1MTM2OFxcdTE0MDBcXHUxNjZEXFx1MTY2RVxcdTE2OUJcXHUxNjlDXFx1MTZFQi1cXHUxNkVEXFx1MTczNVxcdTE3MzZcXHUxN0Q0LVxcdTE3RDZcXHUxN0Q4LVxcdTE3REFcXHUxODAwLVxcdTE4MEFcXHUxOTQ0XFx1MTk0NVxcdTFBMUVcXHUxQTFGXFx1MUFBMC1cXHUxQUE2XFx1MUFBOC1cXHUxQUFEXFx1MUI1QS1cXHUxQjYwXFx1MUJGQy1cXHUxQkZGXFx1MUMzQi1cXHUxQzNGXFx1MUM3RVxcdTFDN0ZcXHUxQ0MwLVxcdTFDQzdcXHUxQ0QzXFx1MjAxMC1cXHUyMDI3XFx1MjAzMC1cXHUyMDQzXFx1MjA0NS1cXHUyMDUxXFx1MjA1My1cXHUyMDVFXFx1MjA3RFxcdTIwN0VcXHUyMDhEXFx1MjA4RVxcdTIzMjlcXHUyMzJBXFx1Mjc2OC1cXHUyNzc1XFx1MjdDNVxcdTI3QzZcXHUyN0U2LVxcdTI3RUZcXHUyOTgzLVxcdTI5OThcXHUyOUQ4LVxcdTI5REJcXHUyOUZDXFx1MjlGRFxcdTJDRjktXFx1MkNGQ1xcdTJDRkVcXHUyQ0ZGXFx1MkQ3MFxcdTJFMDAtXFx1MkUyRVxcdTJFMzAtXFx1MkUzQlxcdTMwMDEtXFx1MzAwM1xcdTMwMDgtXFx1MzAxMVxcdTMwMTQtXFx1MzAxRlxcdTMwMzBcXHUzMDNEXFx1MzBBMFxcdTMwRkJcXHVBNEZFXFx1QTRGRlxcdUE2MEQtXFx1QTYwRlxcdUE2NzNcXHVBNjdFXFx1QTZGMi1cXHVBNkY3XFx1QTg3NC1cXHVBODc3XFx1QThDRVxcdUE4Q0ZcXHVBOEY4LVxcdUE4RkFcXHVBOTJFXFx1QTkyRlxcdUE5NUZcXHVBOUMxLVxcdUE5Q0RcXHVBOURFXFx1QTlERlxcdUFBNUMtXFx1QUE1RlxcdUFBREVcXHVBQURGXFx1QUFGMFxcdUFBRjFcXHVBQkVCXFx1RkQzRVxcdUZEM0ZcXHVGRTEwLVxcdUZFMTlcXHVGRTMwLVxcdUZFNTJcXHVGRTU0LVxcdUZFNjFcXHVGRTYzXFx1RkU2OFxcdUZFNkFcXHVGRTZCXFx1RkYwMS1cXHVGRjAzXFx1RkYwNS1cXHVGRjBBXFx1RkYwQy1cXHVGRjBGXFx1RkYxQVxcdUZGMUJcXHVGRjFGXFx1RkYyMFxcdUZGM0ItXFx1RkYzRFxcdUZGM0ZcXHVGRjVCXFx1RkY1RFxcdUZGNUYtXFx1RkY2NV0vXG5jb25zdCBDSEFNRUxFT04gPSAvWydcXHUyMDE4XFx1MjAxOV0vXG5cbi8qKlxuICogR2V0IHRoZSBkaXN0YW5jZSB0byB0aGUgZW5kIG9mIHRoZSBmaXJzdCB3b3JkIGluIGEgc3RyaW5nIG9mIHRleHQuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGdldFdvcmREaXN0YW5jZSA9ICh0ZXh0OiBzdHJpbmcsIGlzUlRMID0gZmFsc2UpOiBudW1iZXIgPT4ge1xuICBsZXQgZGlzdCA9IDBcbiAgbGV0IHN0YXJ0ZWQgPSBmYWxzZVxuXG4gIHdoaWxlICh0ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBjaGFyRGlzdCA9IGdldENoYXJhY3RlckRpc3RhbmNlKHRleHQsIGlzUlRMKVxuICAgIGNvbnN0IFtjaGFyLCByZW1haW5pbmddID0gc3BsaXRCeUNoYXJhY3RlckRpc3RhbmNlKHRleHQsIGNoYXJEaXN0LCBpc1JUTClcblxuICAgIGlmIChpc1dvcmRDaGFyYWN0ZXIoY2hhciwgcmVtYWluaW5nLCBpc1JUTCkpIHtcbiAgICAgIHN0YXJ0ZWQgPSB0cnVlXG4gICAgICBkaXN0ICs9IGNoYXJEaXN0XG4gICAgfSBlbHNlIGlmICghc3RhcnRlZCkge1xuICAgICAgZGlzdCArPSBjaGFyRGlzdFxuICAgIH0gZWxzZSB7XG4gICAgICBicmVha1xuICAgIH1cblxuICAgIHRleHQgPSByZW1haW5pbmdcbiAgfVxuXG4gIHJldHVybiBkaXN0XG59XG5cbi8qKlxuICogU3BsaXQgYSBzdHJpbmcgaW4gdHdvIHBhcnRzIGF0IGEgZ2l2ZW4gZGlzdGFuY2Ugc3RhcnRpbmcgZnJvbSB0aGUgZW5kIHdoZW5cbiAqIGBpc1JUTGAgaXMgc2V0IHRvIGB0cnVlYC5cbiAqL1xuXG5leHBvcnQgY29uc3Qgc3BsaXRCeUNoYXJhY3RlckRpc3RhbmNlID0gKFxuICBzdHI6IHN0cmluZyxcbiAgZGlzdDogbnVtYmVyLFxuICBpc1JUTD86IGJvb2xlYW5cbik6IFtzdHJpbmcsIHN0cmluZ10gPT4ge1xuICBpZiAoaXNSVEwpIHtcbiAgICBjb25zdCBhdCA9IHN0ci5sZW5ndGggLSBkaXN0XG4gICAgcmV0dXJuIFtzdHIuc2xpY2UoYXQsIHN0ci5sZW5ndGgpLCBzdHIuc2xpY2UoMCwgYXQpXVxuICB9XG5cbiAgcmV0dXJuIFtzdHIuc2xpY2UoMCwgZGlzdCksIHN0ci5zbGljZShkaXN0KV1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIGNoYXJhY3RlciBpcyBhIHdvcmQgY2hhcmFjdGVyLiBUaGUgYHJlbWFpbmluZ2AgYXJndW1lbnQgaXMgdXNlZFxuICogYmVjYXVzZSBzb21ldGltZXMgeW91IG11c3QgcmVhZCBzdWJzZXF1ZW50IGNoYXJhY3RlcnMgdG8gdHJ1bHkgZGV0ZXJtaW5lIGl0LlxuICovXG5cbmNvbnN0IGlzV29yZENoYXJhY3RlciA9IChcbiAgY2hhcjogc3RyaW5nLFxuICByZW1haW5pbmc6IHN0cmluZyxcbiAgaXNSVEwgPSBmYWxzZVxuKTogYm9vbGVhbiA9PiB7XG4gIGlmIChTUEFDRS50ZXN0KGNoYXIpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBDaGFtZWxlb25zIGNvdW50IGFzIHdvcmQgY2hhcmFjdGVycyBhcyBsb25nIGFzIHRoZXkncmUgaW4gYSB3b3JkLCBzb1xuICAvLyByZWN1cnNlIHRvIHNlZSBpZiB0aGUgbmV4dCBvbmUgaXMgYSB3b3JkIGNoYXJhY3RlciBvciBub3QuXG4gIGlmIChDSEFNRUxFT04udGVzdChjaGFyKSkge1xuICAgIGNvbnN0IGNoYXJEaXN0ID0gZ2V0Q2hhcmFjdGVyRGlzdGFuY2UocmVtYWluaW5nLCBpc1JUTClcbiAgICBjb25zdCBbbmV4dENoYXIsIG5leHRSZW1haW5pbmddID0gc3BsaXRCeUNoYXJhY3RlckRpc3RhbmNlKFxuICAgICAgcmVtYWluaW5nLFxuICAgICAgY2hhckRpc3QsXG4gICAgICBpc1JUTFxuICAgIClcblxuICAgIGlmIChpc1dvcmRDaGFyYWN0ZXIobmV4dENoYXIsIG5leHRSZW1haW5pbmcsIGlzUlRMKSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBpZiAoUFVOQ1RVQVRJT04udGVzdChjaGFyKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cblxuLyoqXG4gKiBJdGVyYXRlIG9uIGNvZGVwb2ludHMgZnJvbSByaWdodCB0byBsZWZ0LlxuICovXG5cbmV4cG9ydCBjb25zdCBjb2RlcG9pbnRzSXRlcmF0b3JSVEwgPSBmdW5jdGlvbiogKHN0cjogc3RyaW5nKSB7XG4gIGNvbnN0IGVuZCA9IHN0ci5sZW5ndGggLSAxXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjaGFyMSA9IHN0ci5jaGFyQXQoZW5kIC0gaSlcblxuICAgIGlmIChpc0xvd1N1cnJvZ2F0ZShjaGFyMS5jaGFyQ29kZUF0KDApKSkge1xuICAgICAgY29uc3QgY2hhcjIgPSBzdHIuY2hhckF0KGVuZCAtIGkgLSAxKVxuICAgICAgaWYgKGlzSGlnaFN1cnJvZ2F0ZShjaGFyMi5jaGFyQ29kZUF0KDApKSkge1xuICAgICAgICB5aWVsZCBjaGFyMiArIGNoYXIxXG5cbiAgICAgICAgaSsrXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgeWllbGQgY2hhcjFcbiAgfVxufVxuXG4vKipcbiAqIElzIGBjaGFyQ29kZWAgYSBoaWdoIHN1cnJvZ2F0ZS5cbiAqXG4gKiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Vbml2ZXJzYWxfQ2hhcmFjdGVyX1NldF9jaGFyYWN0ZXJzI1N1cnJvZ2F0ZXNcbiAqL1xuXG5jb25zdCBpc0hpZ2hTdXJyb2dhdGUgPSAoY2hhckNvZGU6IG51bWJlcikgPT4ge1xuICByZXR1cm4gY2hhckNvZGUgPj0gMHhkODAwICYmIGNoYXJDb2RlIDw9IDB4ZGJmZlxufVxuXG4vKipcbiAqIElzIGBjaGFyQ29kZWAgYSBsb3cgc3Vycm9nYXRlLlxuICpcbiAqIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VuaXZlcnNhbF9DaGFyYWN0ZXJfU2V0X2NoYXJhY3RlcnMjU3Vycm9nYXRlc1xuICovXG5cbmNvbnN0IGlzTG93U3Vycm9nYXRlID0gKGNoYXJDb2RlOiBudW1iZXIpID0+IHtcbiAgcmV0dXJuIGNoYXJDb2RlID49IDB4ZGMwMCAmJiBjaGFyQ29kZSA8PSAweGRmZmZcbn1cblxuZW51bSBDb2RlcG9pbnRUeXBlIHtcbiAgTm9uZSA9IDAsXG4gIEV4dGVuZCA9IDEgPDwgMCxcbiAgWldKID0gMSA8PCAxLFxuICBSSSA9IDEgPDwgMixcbiAgUHJlcGVuZCA9IDEgPDwgMyxcbiAgU3BhY2luZ01hcmsgPSAxIDw8IDQsXG4gIEwgPSAxIDw8IDUsXG4gIFYgPSAxIDw8IDYsXG4gIFQgPSAxIDw8IDcsXG4gIExWID0gMSA8PCA4LFxuICBMVlQgPSAxIDw8IDksXG4gIEV4dFBpY3QgPSAxIDw8IDEwLFxuICBBbnkgPSAxIDw8IDExLFxufVxuXG5jb25zdCByZUV4dGVuZCA9IC9eW1xccHtHcl9FeHR9XFxwe0VNb2R9XSQvdVxuY29uc3QgcmVQcmVwZW5kID1cbiAgL15bXFx1MDYwMC1cXHUwNjA1XFx1MDZERFxcdTA3MEZcXHUwODkwLVxcdTA4OTFcXHUwOEUyXFx1MEQ0RVxcdXsxMTBCRH1cXHV7MTEwQ0R9XFx1ezExMUMyfS1cXHV7MTExQzN9XFx1ezExOTNGfVxcdXsxMTk0MX1cXHV7MTFBM0F9XFx1ezExQTg0fS1cXHV7MTFBODl9XFx1ezExRDQ2fV0kL3VcbmNvbnN0IHJlU3BhY2luZ01hcmsgPVxuICAvXltcXHUwOTAzXFx1MDkzQlxcdTA5M0UtXFx1MDk0MFxcdTA5NDktXFx1MDk0Q1xcdTA5NEUtXFx1MDk0RlxcdTA5ODItXFx1MDk4M1xcdTA5QkYtXFx1MDlDMFxcdTA5QzctXFx1MDlDOFxcdTA5Q0ItXFx1MDlDQ1xcdTBBMDNcXHUwQTNFLVxcdTBBNDBcXHUwQTgzXFx1MEFCRS1cXHUwQUMwXFx1MEFDOVxcdTBBQ0ItXFx1MEFDQ1xcdTBCMDItXFx1MEIwM1xcdTBCNDBcXHUwQjQ3LVxcdTBCNDhcXHUwQjRCLVxcdTBCNENcXHUwQkJGXFx1MEJDMS1cXHUwQkMyXFx1MEJDNi1cXHUwQkM4XFx1MEJDQS1cXHUwQkNDXFx1MEMwMS1cXHUwQzAzXFx1MEM0MS1cXHUwQzQ0XFx1MEM4Mi1cXHUwQzgzXFx1MENCRVxcdTBDQzAtXFx1MENDMVxcdTBDQzMtXFx1MENDNFxcdTBDQzctXFx1MENDOFxcdTBDQ0EtXFx1MENDQlxcdTBEMDItXFx1MEQwM1xcdTBEM0YtXFx1MEQ0MFxcdTBENDYtXFx1MEQ0OFxcdTBENEEtXFx1MEQ0Q1xcdTBEODItXFx1MEQ4M1xcdTBERDAtXFx1MEREMVxcdTBERDgtXFx1MERERVxcdTBERjItXFx1MERGM1xcdTBFMzNcXHUwRUIzXFx1MEYzRS1cXHUwRjNGXFx1MEY3RlxcdTEwMzFcXHUxMDNCLVxcdTEwM0NcXHUxMDU2LVxcdTEwNTdcXHUxMDg0XFx1MTcxNVxcdTE3MzRcXHUxN0I2XFx1MTdCRS1cXHUxN0M1XFx1MTdDNy1cXHUxN0M4XFx1MTkyMy1cXHUxOTI2XFx1MTkyOS1cXHUxOTJCXFx1MTkzMC1cXHUxOTMxXFx1MTkzMy1cXHUxOTM4XFx1MUExOS1cXHUxQTFBXFx1MUE1NVxcdTFBNTdcXHUxQTZELVxcdTFBNzJcXHUxQjA0XFx1MUIzQlxcdTFCM0QtXFx1MUI0MVxcdTFCNDMtXFx1MUI0NFxcdTFCODJcXHUxQkExXFx1MUJBNi1cXHUxQkE3XFx1MUJBQVxcdTFCRTdcXHUxQkVBLVxcdTFCRUNcXHUxQkVFXFx1MUJGMi1cXHUxQkYzXFx1MUMyNC1cXHUxQzJCXFx1MUMzNC1cXHUxQzM1XFx1MUNFMVxcdTFDRjdcXHVBODIzLVxcdUE4MjRcXHVBODI3XFx1QTg4MC1cXHVBODgxXFx1QThCNC1cXHVBOEMzXFx1QTk1Mi1cXHVBOTUzXFx1QTk4M1xcdUE5QjQtXFx1QTlCNVxcdUE5QkEtXFx1QTlCQlxcdUE5QkUtXFx1QTlDMFxcdUFBMkYtXFx1QUEzMFxcdUFBMzMtXFx1QUEzNFxcdUFBNERcXHVBQUVCXFx1QUFFRS1cXHVBQUVGXFx1QUFGNVxcdUFCRTMtXFx1QUJFNFxcdUFCRTYtXFx1QUJFN1xcdUFCRTktXFx1QUJFQVxcdUFCRUNcXHV7MTEwMDB9XFx1ezExMDAyfVxcdXsxMTA4Mn1cXHV7MTEwQjB9LVxcdXsxMTBCMn1cXHV7MTEwQjd9LVxcdXsxMTBCOH1cXHV7MTExMkN9XFx1ezExMTQ1fS1cXHV7MTExNDZ9XFx1ezExMTgyfVxcdXsxMTFCM30tXFx1ezExMUI1fVxcdXsxMTFCRn0tXFx1ezExMUMwfVxcdXsxMTFDRX1cXHV7MTEyMkN9LVxcdXsxMTIyRX1cXHV7MTEyMzJ9LVxcdXsxMTIzM31cXHV7MTEyMzV9XFx1ezExMkUwfS1cXHV7MTEyRTJ9XFx1ezExMzAyfS1cXHV7MTEzMDN9XFx1ezExMzNGfVxcdXsxMTM0MX0tXFx1ezExMzQ0fVxcdXsxMTM0N30tXFx1ezExMzQ4fVxcdXsxMTM0Qn0tXFx1ezExMzREfVxcdXsxMTM2Mn0tXFx1ezExMzYzfVxcdXsxMTQzNX0tXFx1ezExNDM3fVxcdXsxMTQ0MH0tXFx1ezExNDQxfVxcdXsxMTQ0NX1cXHV7MTE0QjF9LVxcdXsxMTRCMn1cXHV7MTE0Qjl9XFx1ezExNEJCfS1cXHV7MTE0QkN9XFx1ezExNEJFfVxcdXsxMTRDMX1cXHV7MTE1QjB9LVxcdXsxMTVCMX1cXHV7MTE1Qjh9LVxcdXsxMTVCQn1cXHV7MTE1QkV9XFx1ezExNjMwfS1cXHV7MTE2MzJ9XFx1ezExNjNCfS1cXHV7MTE2M0N9XFx1ezExNjNFfVxcdXsxMTZBQ31cXHV7MTE2QUV9LVxcdXsxMTZBRn1cXHV7MTE2QjZ9XFx1ezExNzI2fVxcdXsxMTgyQ30tXFx1ezExODJFfVxcdXsxMTgzOH1cXHV7MTE5MzF9LVxcdXsxMTkzNX1cXHV7MTE5Mzd9LVxcdXsxMTkzOH1cXHV7MTE5M0R9XFx1ezExOTQwfVxcdXsxMTk0Mn1cXHV7MTE5RDF9LVxcdXsxMTlEM31cXHV7MTE5REN9LVxcdXsxMTlERn1cXHV7MTE5RTR9XFx1ezExQTM5fVxcdXsxMUE1N30tXFx1ezExQTU4fVxcdXsxMUE5N31cXHV7MTFDMkZ9XFx1ezExQzNFfVxcdXsxMUNBOX1cXHV7MTFDQjF9XFx1ezExQ0I0fVxcdXsxMUQ4QX0tXFx1ezExRDhFfVxcdXsxMUQ5M30tXFx1ezExRDk0fVxcdXsxMUQ5Nn1cXHV7MTFFRjV9LVxcdXsxMUVGNn1cXHV7MTZGNTF9LVxcdXsxNkY4N31cXHV7MTZGRjB9LVxcdXsxNkZGMX1cXHV7MUQxNjZ9XFx1ezFEMTZEfV0kL3VcbmNvbnN0IHJlTCA9IC9eW1xcdTExMDAtXFx1MTE1RlxcdUE5NjAtXFx1QTk3Q10kL3VcbmNvbnN0IHJlViA9IC9eW1xcdTExNjAtXFx1MTFBN1xcdUQ3QjAtXFx1RDdDNl0kL3VcbmNvbnN0IHJlVCA9IC9eW1xcdTExQTgtXFx1MTFGRlxcdUQ3Q0ItXFx1RDdGQl0kL3VcbmNvbnN0IHJlTFYgPVxuICAvXltcXHVBQzAwXFx1QUMxQ1xcdUFDMzhcXHVBQzU0XFx1QUM3MFxcdUFDOENcXHVBQ0E4XFx1QUNDNFxcdUFDRTBcXHVBQ0ZDXFx1QUQxOFxcdUFEMzRcXHVBRDUwXFx1QUQ2Q1xcdUFEODhcXHVBREE0XFx1QURDMFxcdUFERENcXHVBREY4XFx1QUUxNFxcdUFFMzBcXHVBRTRDXFx1QUU2OFxcdUFFODRcXHVBRUEwXFx1QUVCQ1xcdUFFRDhcXHVBRUY0XFx1QUYxMFxcdUFGMkNcXHVBRjQ4XFx1QUY2NFxcdUFGODBcXHVBRjlDXFx1QUZCOFxcdUFGRDRcXHVBRkYwXFx1QjAwQ1xcdUIwMjhcXHVCMDQ0XFx1QjA2MFxcdUIwN0NcXHVCMDk4XFx1QjBCNFxcdUIwRDBcXHVCMEVDXFx1QjEwOFxcdUIxMjRcXHVCMTQwXFx1QjE1Q1xcdUIxNzhcXHVCMTk0XFx1QjFCMFxcdUIxQ0NcXHVCMUU4XFx1QjIwNFxcdUIyMjBcXHVCMjNDXFx1QjI1OFxcdUIyNzRcXHVCMjkwXFx1QjJBQ1xcdUIyQzhcXHVCMkU0XFx1QjMwMFxcdUIzMUNcXHVCMzM4XFx1QjM1NFxcdUIzNzBcXHVCMzhDXFx1QjNBOFxcdUIzQzRcXHVCM0UwXFx1QjNGQ1xcdUI0MThcXHVCNDM0XFx1QjQ1MFxcdUI0NkNcXHVCNDg4XFx1QjRBNFxcdUI0QzBcXHVCNERDXFx1QjRGOFxcdUI1MTRcXHVCNTMwXFx1QjU0Q1xcdUI1NjhcXHVCNTg0XFx1QjVBMFxcdUI1QkNcXHVCNUQ4XFx1QjVGNFxcdUI2MTBcXHVCNjJDXFx1QjY0OFxcdUI2NjRcXHVCNjgwXFx1QjY5Q1xcdUI2QjhcXHVCNkQ0XFx1QjZGMFxcdUI3MENcXHVCNzI4XFx1Qjc0NFxcdUI3NjBcXHVCNzdDXFx1Qjc5OFxcdUI3QjRcXHVCN0QwXFx1QjdFQ1xcdUI4MDhcXHVCODI0XFx1Qjg0MFxcdUI4NUNcXHVCODc4XFx1Qjg5NFxcdUI4QjBcXHVCOENDXFx1QjhFOFxcdUI5MDRcXHVCOTIwXFx1QjkzQ1xcdUI5NThcXHVCOTc0XFx1Qjk5MFxcdUI5QUNcXHVCOUM4XFx1QjlFNFxcdUJBMDBcXHVCQTFDXFx1QkEzOFxcdUJBNTRcXHVCQTcwXFx1QkE4Q1xcdUJBQThcXHVCQUM0XFx1QkFFMFxcdUJBRkNcXHVCQjE4XFx1QkIzNFxcdUJCNTBcXHVCQjZDXFx1QkI4OFxcdUJCQTRcXHVCQkMwXFx1QkJEQ1xcdUJCRjhcXHVCQzE0XFx1QkMzMFxcdUJDNENcXHVCQzY4XFx1QkM4NFxcdUJDQTBcXHVCQ0JDXFx1QkNEOFxcdUJDRjRcXHVCRDEwXFx1QkQyQ1xcdUJENDhcXHVCRDY0XFx1QkQ4MFxcdUJEOUNcXHVCREI4XFx1QkRENFxcdUJERjBcXHVCRTBDXFx1QkUyOFxcdUJFNDRcXHVCRTYwXFx1QkU3Q1xcdUJFOThcXHVCRUI0XFx1QkVEMFxcdUJFRUNcXHVCRjA4XFx1QkYyNFxcdUJGNDBcXHVCRjVDXFx1QkY3OFxcdUJGOTRcXHVCRkIwXFx1QkZDQ1xcdUJGRThcXHVDMDA0XFx1QzAyMFxcdUMwM0NcXHVDMDU4XFx1QzA3NFxcdUMwOTBcXHVDMEFDXFx1QzBDOFxcdUMwRTRcXHVDMTAwXFx1QzExQ1xcdUMxMzhcXHVDMTU0XFx1QzE3MFxcdUMxOENcXHVDMUE4XFx1QzFDNFxcdUMxRTBcXHVDMUZDXFx1QzIxOFxcdUMyMzRcXHVDMjUwXFx1QzI2Q1xcdUMyODhcXHVDMkE0XFx1QzJDMFxcdUMyRENcXHVDMkY4XFx1QzMxNFxcdUMzMzBcXHVDMzRDXFx1QzM2OFxcdUMzODRcXHVDM0EwXFx1QzNCQ1xcdUMzRDhcXHVDM0Y0XFx1QzQxMFxcdUM0MkNcXHVDNDQ4XFx1QzQ2NFxcdUM0ODBcXHVDNDlDXFx1QzRCOFxcdUM0RDRcXHVDNEYwXFx1QzUwQ1xcdUM1MjhcXHVDNTQ0XFx1QzU2MFxcdUM1N0NcXHVDNTk4XFx1QzVCNFxcdUM1RDBcXHVDNUVDXFx1QzYwOFxcdUM2MjRcXHVDNjQwXFx1QzY1Q1xcdUM2NzhcXHVDNjk0XFx1QzZCMFxcdUM2Q0NcXHVDNkU4XFx1QzcwNFxcdUM3MjBcXHVDNzNDXFx1Qzc1OFxcdUM3NzRcXHVDNzkwXFx1QzdBQ1xcdUM3QzhcXHVDN0U0XFx1QzgwMFxcdUM4MUNcXHVDODM4XFx1Qzg1NFxcdUM4NzBcXHVDODhDXFx1QzhBOFxcdUM4QzRcXHVDOEUwXFx1QzhGQ1xcdUM5MThcXHVDOTM0XFx1Qzk1MFxcdUM5NkNcXHVDOTg4XFx1QzlBNFxcdUM5QzBcXHVDOURDXFx1QzlGOFxcdUNBMTRcXHVDQTMwXFx1Q0E0Q1xcdUNBNjhcXHVDQTg0XFx1Q0FBMFxcdUNBQkNcXHVDQUQ4XFx1Q0FGNFxcdUNCMTBcXHVDQjJDXFx1Q0I0OFxcdUNCNjRcXHVDQjgwXFx1Q0I5Q1xcdUNCQjhcXHVDQkQ0XFx1Q0JGMFxcdUNDMENcXHVDQzI4XFx1Q0M0NFxcdUNDNjBcXHVDQzdDXFx1Q0M5OFxcdUNDQjRcXHVDQ0QwXFx1Q0NFQ1xcdUNEMDhcXHVDRDI0XFx1Q0Q0MFxcdUNENUNcXHVDRDc4XFx1Q0Q5NFxcdUNEQjBcXHVDRENDXFx1Q0RFOFxcdUNFMDRcXHVDRTIwXFx1Q0UzQ1xcdUNFNThcXHVDRTc0XFx1Q0U5MFxcdUNFQUNcXHVDRUM4XFx1Q0VFNFxcdUNGMDBcXHVDRjFDXFx1Q0YzOFxcdUNGNTRcXHVDRjcwXFx1Q0Y4Q1xcdUNGQThcXHVDRkM0XFx1Q0ZFMFxcdUNGRkNcXHVEMDE4XFx1RDAzNFxcdUQwNTBcXHVEMDZDXFx1RDA4OFxcdUQwQTRcXHVEMEMwXFx1RDBEQ1xcdUQwRjhcXHVEMTE0XFx1RDEzMFxcdUQxNENcXHVEMTY4XFx1RDE4NFxcdUQxQTBcXHVEMUJDXFx1RDFEOFxcdUQxRjRcXHVEMjEwXFx1RDIyQ1xcdUQyNDhcXHVEMjY0XFx1RDI4MFxcdUQyOUNcXHVEMkI4XFx1RDJENFxcdUQyRjBcXHVEMzBDXFx1RDMyOFxcdUQzNDRcXHVEMzYwXFx1RDM3Q1xcdUQzOThcXHVEM0I0XFx1RDNEMFxcdUQzRUNcXHVENDA4XFx1RDQyNFxcdUQ0NDBcXHVENDVDXFx1RDQ3OFxcdUQ0OTRcXHVENEIwXFx1RDRDQ1xcdUQ0RThcXHVENTA0XFx1RDUyMFxcdUQ1M0NcXHVENTU4XFx1RDU3NFxcdUQ1OTBcXHVENUFDXFx1RDVDOFxcdUQ1RTRcXHVENjAwXFx1RDYxQ1xcdUQ2MzhcXHVENjU0XFx1RDY3MFxcdUQ2OENcXHVENkE4XFx1RDZDNFxcdUQ2RTBcXHVENkZDXFx1RDcxOFxcdUQ3MzRcXHVENzUwXFx1RDc2Q1xcdUQ3ODhdJC91XG5jb25zdCByZUxWVCA9XG4gIC9eW1xcdUFDMDEtXFx1QUMxQlxcdUFDMUQtXFx1QUMzN1xcdUFDMzktXFx1QUM1M1xcdUFDNTUtXFx1QUM2RlxcdUFDNzEtXFx1QUM4QlxcdUFDOEQtXFx1QUNBN1xcdUFDQTktXFx1QUNDM1xcdUFDQzUtXFx1QUNERlxcdUFDRTEtXFx1QUNGQlxcdUFDRkQtXFx1QUQxN1xcdUFEMTktXFx1QUQzM1xcdUFEMzUtXFx1QUQ0RlxcdUFENTEtXFx1QUQ2QlxcdUFENkQtXFx1QUQ4N1xcdUFEODktXFx1QURBM1xcdUFEQTUtXFx1QURCRlxcdUFEQzEtXFx1QUREQlxcdUFEREQtXFx1QURGN1xcdUFERjktXFx1QUUxM1xcdUFFMTUtXFx1QUUyRlxcdUFFMzEtXFx1QUU0QlxcdUFFNEQtXFx1QUU2N1xcdUFFNjktXFx1QUU4M1xcdUFFODUtXFx1QUU5RlxcdUFFQTEtXFx1QUVCQlxcdUFFQkQtXFx1QUVEN1xcdUFFRDktXFx1QUVGM1xcdUFFRjUtXFx1QUYwRlxcdUFGMTEtXFx1QUYyQlxcdUFGMkQtXFx1QUY0N1xcdUFGNDktXFx1QUY2M1xcdUFGNjUtXFx1QUY3RlxcdUFGODEtXFx1QUY5QlxcdUFGOUQtXFx1QUZCN1xcdUFGQjktXFx1QUZEM1xcdUFGRDUtXFx1QUZFRlxcdUFGRjEtXFx1QjAwQlxcdUIwMEQtXFx1QjAyN1xcdUIwMjktXFx1QjA0M1xcdUIwNDUtXFx1QjA1RlxcdUIwNjEtXFx1QjA3QlxcdUIwN0QtXFx1QjA5N1xcdUIwOTktXFx1QjBCM1xcdUIwQjUtXFx1QjBDRlxcdUIwRDEtXFx1QjBFQlxcdUIwRUQtXFx1QjEwN1xcdUIxMDktXFx1QjEyM1xcdUIxMjUtXFx1QjEzRlxcdUIxNDEtXFx1QjE1QlxcdUIxNUQtXFx1QjE3N1xcdUIxNzktXFx1QjE5M1xcdUIxOTUtXFx1QjFBRlxcdUIxQjEtXFx1QjFDQlxcdUIxQ0QtXFx1QjFFN1xcdUIxRTktXFx1QjIwM1xcdUIyMDUtXFx1QjIxRlxcdUIyMjEtXFx1QjIzQlxcdUIyM0QtXFx1QjI1N1xcdUIyNTktXFx1QjI3M1xcdUIyNzUtXFx1QjI4RlxcdUIyOTEtXFx1QjJBQlxcdUIyQUQtXFx1QjJDN1xcdUIyQzktXFx1QjJFM1xcdUIyRTUtXFx1QjJGRlxcdUIzMDEtXFx1QjMxQlxcdUIzMUQtXFx1QjMzN1xcdUIzMzktXFx1QjM1M1xcdUIzNTUtXFx1QjM2RlxcdUIzNzEtXFx1QjM4QlxcdUIzOEQtXFx1QjNBN1xcdUIzQTktXFx1QjNDM1xcdUIzQzUtXFx1QjNERlxcdUIzRTEtXFx1QjNGQlxcdUIzRkQtXFx1QjQxN1xcdUI0MTktXFx1QjQzM1xcdUI0MzUtXFx1QjQ0RlxcdUI0NTEtXFx1QjQ2QlxcdUI0NkQtXFx1QjQ4N1xcdUI0ODktXFx1QjRBM1xcdUI0QTUtXFx1QjRCRlxcdUI0QzEtXFx1QjREQlxcdUI0REQtXFx1QjRGN1xcdUI0RjktXFx1QjUxM1xcdUI1MTUtXFx1QjUyRlxcdUI1MzEtXFx1QjU0QlxcdUI1NEQtXFx1QjU2N1xcdUI1NjktXFx1QjU4M1xcdUI1ODUtXFx1QjU5RlxcdUI1QTEtXFx1QjVCQlxcdUI1QkQtXFx1QjVEN1xcdUI1RDktXFx1QjVGM1xcdUI1RjUtXFx1QjYwRlxcdUI2MTEtXFx1QjYyQlxcdUI2MkQtXFx1QjY0N1xcdUI2NDktXFx1QjY2M1xcdUI2NjUtXFx1QjY3RlxcdUI2ODEtXFx1QjY5QlxcdUI2OUQtXFx1QjZCN1xcdUI2QjktXFx1QjZEM1xcdUI2RDUtXFx1QjZFRlxcdUI2RjEtXFx1QjcwQlxcdUI3MEQtXFx1QjcyN1xcdUI3MjktXFx1Qjc0M1xcdUI3NDUtXFx1Qjc1RlxcdUI3NjEtXFx1Qjc3QlxcdUI3N0QtXFx1Qjc5N1xcdUI3OTktXFx1QjdCM1xcdUI3QjUtXFx1QjdDRlxcdUI3RDEtXFx1QjdFQlxcdUI3RUQtXFx1QjgwN1xcdUI4MDktXFx1QjgyM1xcdUI4MjUtXFx1QjgzRlxcdUI4NDEtXFx1Qjg1QlxcdUI4NUQtXFx1Qjg3N1xcdUI4NzktXFx1Qjg5M1xcdUI4OTUtXFx1QjhBRlxcdUI4QjEtXFx1QjhDQlxcdUI4Q0QtXFx1QjhFN1xcdUI4RTktXFx1QjkwM1xcdUI5MDUtXFx1QjkxRlxcdUI5MjEtXFx1QjkzQlxcdUI5M0QtXFx1Qjk1N1xcdUI5NTktXFx1Qjk3M1xcdUI5NzUtXFx1Qjk4RlxcdUI5OTEtXFx1QjlBQlxcdUI5QUQtXFx1QjlDN1xcdUI5QzktXFx1QjlFM1xcdUI5RTUtXFx1QjlGRlxcdUJBMDEtXFx1QkExQlxcdUJBMUQtXFx1QkEzN1xcdUJBMzktXFx1QkE1M1xcdUJBNTUtXFx1QkE2RlxcdUJBNzEtXFx1QkE4QlxcdUJBOEQtXFx1QkFBN1xcdUJBQTktXFx1QkFDM1xcdUJBQzUtXFx1QkFERlxcdUJBRTEtXFx1QkFGQlxcdUJBRkQtXFx1QkIxN1xcdUJCMTktXFx1QkIzM1xcdUJCMzUtXFx1QkI0RlxcdUJCNTEtXFx1QkI2QlxcdUJCNkQtXFx1QkI4N1xcdUJCODktXFx1QkJBM1xcdUJCQTUtXFx1QkJCRlxcdUJCQzEtXFx1QkJEQlxcdUJCREQtXFx1QkJGN1xcdUJCRjktXFx1QkMxM1xcdUJDMTUtXFx1QkMyRlxcdUJDMzEtXFx1QkM0QlxcdUJDNEQtXFx1QkM2N1xcdUJDNjktXFx1QkM4M1xcdUJDODUtXFx1QkM5RlxcdUJDQTEtXFx1QkNCQlxcdUJDQkQtXFx1QkNEN1xcdUJDRDktXFx1QkNGM1xcdUJDRjUtXFx1QkQwRlxcdUJEMTEtXFx1QkQyQlxcdUJEMkQtXFx1QkQ0N1xcdUJENDktXFx1QkQ2M1xcdUJENjUtXFx1QkQ3RlxcdUJEODEtXFx1QkQ5QlxcdUJEOUQtXFx1QkRCN1xcdUJEQjktXFx1QkREM1xcdUJERDUtXFx1QkRFRlxcdUJERjEtXFx1QkUwQlxcdUJFMEQtXFx1QkUyN1xcdUJFMjktXFx1QkU0M1xcdUJFNDUtXFx1QkU1RlxcdUJFNjEtXFx1QkU3QlxcdUJFN0QtXFx1QkU5N1xcdUJFOTktXFx1QkVCM1xcdUJFQjUtXFx1QkVDRlxcdUJFRDEtXFx1QkVFQlxcdUJFRUQtXFx1QkYwN1xcdUJGMDktXFx1QkYyM1xcdUJGMjUtXFx1QkYzRlxcdUJGNDEtXFx1QkY1QlxcdUJGNUQtXFx1QkY3N1xcdUJGNzktXFx1QkY5M1xcdUJGOTUtXFx1QkZBRlxcdUJGQjEtXFx1QkZDQlxcdUJGQ0QtXFx1QkZFN1xcdUJGRTktXFx1QzAwM1xcdUMwMDUtXFx1QzAxRlxcdUMwMjEtXFx1QzAzQlxcdUMwM0QtXFx1QzA1N1xcdUMwNTktXFx1QzA3M1xcdUMwNzUtXFx1QzA4RlxcdUMwOTEtXFx1QzBBQlxcdUMwQUQtXFx1QzBDN1xcdUMwQzktXFx1QzBFM1xcdUMwRTUtXFx1QzBGRlxcdUMxMDEtXFx1QzExQlxcdUMxMUQtXFx1QzEzN1xcdUMxMzktXFx1QzE1M1xcdUMxNTUtXFx1QzE2RlxcdUMxNzEtXFx1QzE4QlxcdUMxOEQtXFx1QzFBN1xcdUMxQTktXFx1QzFDM1xcdUMxQzUtXFx1QzFERlxcdUMxRTEtXFx1QzFGQlxcdUMxRkQtXFx1QzIxN1xcdUMyMTktXFx1QzIzM1xcdUMyMzUtXFx1QzI0RlxcdUMyNTEtXFx1QzI2QlxcdUMyNkQtXFx1QzI4N1xcdUMyODktXFx1QzJBM1xcdUMyQTUtXFx1QzJCRlxcdUMyQzEtXFx1QzJEQlxcdUMyREQtXFx1QzJGN1xcdUMyRjktXFx1QzMxM1xcdUMzMTUtXFx1QzMyRlxcdUMzMzEtXFx1QzM0QlxcdUMzNEQtXFx1QzM2N1xcdUMzNjktXFx1QzM4M1xcdUMzODUtXFx1QzM5RlxcdUMzQTEtXFx1QzNCQlxcdUMzQkQtXFx1QzNEN1xcdUMzRDktXFx1QzNGM1xcdUMzRjUtXFx1QzQwRlxcdUM0MTEtXFx1QzQyQlxcdUM0MkQtXFx1QzQ0N1xcdUM0NDktXFx1QzQ2M1xcdUM0NjUtXFx1QzQ3RlxcdUM0ODEtXFx1QzQ5QlxcdUM0OUQtXFx1QzRCN1xcdUM0QjktXFx1QzREM1xcdUM0RDUtXFx1QzRFRlxcdUM0RjEtXFx1QzUwQlxcdUM1MEQtXFx1QzUyN1xcdUM1MjktXFx1QzU0M1xcdUM1NDUtXFx1QzU1RlxcdUM1NjEtXFx1QzU3QlxcdUM1N0QtXFx1QzU5N1xcdUM1OTktXFx1QzVCM1xcdUM1QjUtXFx1QzVDRlxcdUM1RDEtXFx1QzVFQlxcdUM1RUQtXFx1QzYwN1xcdUM2MDktXFx1QzYyM1xcdUM2MjUtXFx1QzYzRlxcdUM2NDEtXFx1QzY1QlxcdUM2NUQtXFx1QzY3N1xcdUM2NzktXFx1QzY5M1xcdUM2OTUtXFx1QzZBRlxcdUM2QjEtXFx1QzZDQlxcdUM2Q0QtXFx1QzZFN1xcdUM2RTktXFx1QzcwM1xcdUM3MDUtXFx1QzcxRlxcdUM3MjEtXFx1QzczQlxcdUM3M0QtXFx1Qzc1N1xcdUM3NTktXFx1Qzc3M1xcdUM3NzUtXFx1Qzc4RlxcdUM3OTEtXFx1QzdBQlxcdUM3QUQtXFx1QzdDN1xcdUM3QzktXFx1QzdFM1xcdUM3RTUtXFx1QzdGRlxcdUM4MDEtXFx1QzgxQlxcdUM4MUQtXFx1QzgzN1xcdUM4MzktXFx1Qzg1M1xcdUM4NTUtXFx1Qzg2RlxcdUM4NzEtXFx1Qzg4QlxcdUM4OEQtXFx1QzhBN1xcdUM4QTktXFx1QzhDM1xcdUM4QzUtXFx1QzhERlxcdUM4RTEtXFx1QzhGQlxcdUM4RkQtXFx1QzkxN1xcdUM5MTktXFx1QzkzM1xcdUM5MzUtXFx1Qzk0RlxcdUM5NTEtXFx1Qzk2QlxcdUM5NkQtXFx1Qzk4N1xcdUM5ODktXFx1QzlBM1xcdUM5QTUtXFx1QzlCRlxcdUM5QzEtXFx1QzlEQlxcdUM5REQtXFx1QzlGN1xcdUM5RjktXFx1Q0ExM1xcdUNBMTUtXFx1Q0EyRlxcdUNBMzEtXFx1Q0E0QlxcdUNBNEQtXFx1Q0E2N1xcdUNBNjktXFx1Q0E4M1xcdUNBODUtXFx1Q0E5RlxcdUNBQTEtXFx1Q0FCQlxcdUNBQkQtXFx1Q0FEN1xcdUNBRDktXFx1Q0FGM1xcdUNBRjUtXFx1Q0IwRlxcdUNCMTEtXFx1Q0IyQlxcdUNCMkQtXFx1Q0I0N1xcdUNCNDktXFx1Q0I2M1xcdUNCNjUtXFx1Q0I3RlxcdUNCODEtXFx1Q0I5QlxcdUNCOUQtXFx1Q0JCN1xcdUNCQjktXFx1Q0JEM1xcdUNCRDUtXFx1Q0JFRlxcdUNCRjEtXFx1Q0MwQlxcdUNDMEQtXFx1Q0MyN1xcdUNDMjktXFx1Q0M0M1xcdUNDNDUtXFx1Q0M1RlxcdUNDNjEtXFx1Q0M3QlxcdUNDN0QtXFx1Q0M5N1xcdUNDOTktXFx1Q0NCM1xcdUNDQjUtXFx1Q0NDRlxcdUNDRDEtXFx1Q0NFQlxcdUNDRUQtXFx1Q0QwN1xcdUNEMDktXFx1Q0QyM1xcdUNEMjUtXFx1Q0QzRlxcdUNENDEtXFx1Q0Q1QlxcdUNENUQtXFx1Q0Q3N1xcdUNENzktXFx1Q0Q5M1xcdUNEOTUtXFx1Q0RBRlxcdUNEQjEtXFx1Q0RDQlxcdUNEQ0QtXFx1Q0RFN1xcdUNERTktXFx1Q0UwM1xcdUNFMDUtXFx1Q0UxRlxcdUNFMjEtXFx1Q0UzQlxcdUNFM0QtXFx1Q0U1N1xcdUNFNTktXFx1Q0U3M1xcdUNFNzUtXFx1Q0U4RlxcdUNFOTEtXFx1Q0VBQlxcdUNFQUQtXFx1Q0VDN1xcdUNFQzktXFx1Q0VFM1xcdUNFRTUtXFx1Q0VGRlxcdUNGMDEtXFx1Q0YxQlxcdUNGMUQtXFx1Q0YzN1xcdUNGMzktXFx1Q0Y1M1xcdUNGNTUtXFx1Q0Y2RlxcdUNGNzEtXFx1Q0Y4QlxcdUNGOEQtXFx1Q0ZBN1xcdUNGQTktXFx1Q0ZDM1xcdUNGQzUtXFx1Q0ZERlxcdUNGRTEtXFx1Q0ZGQlxcdUNGRkQtXFx1RDAxN1xcdUQwMTktXFx1RDAzM1xcdUQwMzUtXFx1RDA0RlxcdUQwNTEtXFx1RDA2QlxcdUQwNkQtXFx1RDA4N1xcdUQwODktXFx1RDBBM1xcdUQwQTUtXFx1RDBCRlxcdUQwQzEtXFx1RDBEQlxcdUQwREQtXFx1RDBGN1xcdUQwRjktXFx1RDExM1xcdUQxMTUtXFx1RDEyRlxcdUQxMzEtXFx1RDE0QlxcdUQxNEQtXFx1RDE2N1xcdUQxNjktXFx1RDE4M1xcdUQxODUtXFx1RDE5RlxcdUQxQTEtXFx1RDFCQlxcdUQxQkQtXFx1RDFEN1xcdUQxRDktXFx1RDFGM1xcdUQxRjUtXFx1RDIwRlxcdUQyMTEtXFx1RDIyQlxcdUQyMkQtXFx1RDI0N1xcdUQyNDktXFx1RDI2M1xcdUQyNjUtXFx1RDI3RlxcdUQyODEtXFx1RDI5QlxcdUQyOUQtXFx1RDJCN1xcdUQyQjktXFx1RDJEM1xcdUQyRDUtXFx1RDJFRlxcdUQyRjEtXFx1RDMwQlxcdUQzMEQtXFx1RDMyN1xcdUQzMjktXFx1RDM0M1xcdUQzNDUtXFx1RDM1RlxcdUQzNjEtXFx1RDM3QlxcdUQzN0QtXFx1RDM5N1xcdUQzOTktXFx1RDNCM1xcdUQzQjUtXFx1RDNDRlxcdUQzRDEtXFx1RDNFQlxcdUQzRUQtXFx1RDQwN1xcdUQ0MDktXFx1RDQyM1xcdUQ0MjUtXFx1RDQzRlxcdUQ0NDEtXFx1RDQ1QlxcdUQ0NUQtXFx1RDQ3N1xcdUQ0NzktXFx1RDQ5M1xcdUQ0OTUtXFx1RDRBRlxcdUQ0QjEtXFx1RDRDQlxcdUQ0Q0QtXFx1RDRFN1xcdUQ0RTktXFx1RDUwM1xcdUQ1MDUtXFx1RDUxRlxcdUQ1MjEtXFx1RDUzQlxcdUQ1M0QtXFx1RDU1N1xcdUQ1NTktXFx1RDU3M1xcdUQ1NzUtXFx1RDU4RlxcdUQ1OTEtXFx1RDVBQlxcdUQ1QUQtXFx1RDVDN1xcdUQ1QzktXFx1RDVFM1xcdUQ1RTUtXFx1RDVGRlxcdUQ2MDEtXFx1RDYxQlxcdUQ2MUQtXFx1RDYzN1xcdUQ2MzktXFx1RDY1M1xcdUQ2NTUtXFx1RDY2RlxcdUQ2NzEtXFx1RDY4QlxcdUQ2OEQtXFx1RDZBN1xcdUQ2QTktXFx1RDZDM1xcdUQ2QzUtXFx1RDZERlxcdUQ2RTEtXFx1RDZGQlxcdUQ2RkQtXFx1RDcxN1xcdUQ3MTktXFx1RDczM1xcdUQ3MzUtXFx1RDc0RlxcdUQ3NTEtXFx1RDc2QlxcdUQ3NkQtXFx1RDc4N1xcdUQ3ODktXFx1RDdBM10kL3VcbmNvbnN0IHJlRXh0UGljdCA9IC9eXFxwe0V4dFBpY3R9JC91XG5cbmNvbnN0IGdldENvZGVwb2ludFR5cGUgPSAoY2hhcjogc3RyaW5nLCBjb2RlOiBudW1iZXIpOiBDb2RlcG9pbnRUeXBlID0+IHtcbiAgbGV0IHR5cGUgPSBDb2RlcG9pbnRUeXBlLkFueVxuICBpZiAoY2hhci5zZWFyY2gocmVFeHRlbmQpICE9PSAtMSkge1xuICAgIHR5cGUgfD0gQ29kZXBvaW50VHlwZS5FeHRlbmRcbiAgfVxuICBpZiAoY29kZSA9PT0gMHgyMDBkKSB7XG4gICAgdHlwZSB8PSBDb2RlcG9pbnRUeXBlLlpXSlxuICB9XG4gIGlmIChjb2RlID49IDB4MWYxZTYgJiYgY29kZSA8PSAweDFmMWZmKSB7XG4gICAgdHlwZSB8PSBDb2RlcG9pbnRUeXBlLlJJXG4gIH1cbiAgaWYgKGNoYXIuc2VhcmNoKHJlUHJlcGVuZCkgIT09IC0xKSB7XG4gICAgdHlwZSB8PSBDb2RlcG9pbnRUeXBlLlByZXBlbmRcbiAgfVxuICBpZiAoY2hhci5zZWFyY2gocmVTcGFjaW5nTWFyaykgIT09IC0xKSB7XG4gICAgdHlwZSB8PSBDb2RlcG9pbnRUeXBlLlNwYWNpbmdNYXJrXG4gIH1cbiAgaWYgKGNoYXIuc2VhcmNoKHJlTCkgIT09IC0xKSB7XG4gICAgdHlwZSB8PSBDb2RlcG9pbnRUeXBlLkxcbiAgfVxuICBpZiAoY2hhci5zZWFyY2gocmVWKSAhPT0gLTEpIHtcbiAgICB0eXBlIHw9IENvZGVwb2ludFR5cGUuVlxuICB9XG4gIGlmIChjaGFyLnNlYXJjaChyZVQpICE9PSAtMSkge1xuICAgIHR5cGUgfD0gQ29kZXBvaW50VHlwZS5UXG4gIH1cbiAgaWYgKGNoYXIuc2VhcmNoKHJlTFYpICE9PSAtMSkge1xuICAgIHR5cGUgfD0gQ29kZXBvaW50VHlwZS5MVlxuICB9XG4gIGlmIChjaGFyLnNlYXJjaChyZUxWVCkgIT09IC0xKSB7XG4gICAgdHlwZSB8PSBDb2RlcG9pbnRUeXBlLkxWVFxuICB9XG4gIGlmIChjaGFyLnNlYXJjaChyZUV4dFBpY3QpICE9PSAtMSkge1xuICAgIHR5cGUgfD0gQ29kZXBvaW50VHlwZS5FeHRQaWN0XG4gIH1cblxuICByZXR1cm4gdHlwZVxufVxuXG5mdW5jdGlvbiBpbnRlcnNlY3RzKHg6IENvZGVwb2ludFR5cGUsIHk6IENvZGVwb2ludFR5cGUpIHtcbiAgcmV0dXJuICh4ICYgeSkgIT09IDBcbn1cblxuY29uc3QgTm9uQm91bmRhcnlQYWlyczogW0NvZGVwb2ludFR5cGUsIENvZGVwb2ludFR5cGVdW10gPSBbXG4gIC8vIEdCNlxuICBbXG4gICAgQ29kZXBvaW50VHlwZS5MLFxuICAgIENvZGVwb2ludFR5cGUuTCB8IENvZGVwb2ludFR5cGUuViB8IENvZGVwb2ludFR5cGUuTFYgfCBDb2RlcG9pbnRUeXBlLkxWVCxcbiAgXSxcbiAgLy8gR0I3XG4gIFtDb2RlcG9pbnRUeXBlLkxWIHwgQ29kZXBvaW50VHlwZS5WLCBDb2RlcG9pbnRUeXBlLlYgfCBDb2RlcG9pbnRUeXBlLlRdLFxuICAvLyBHQjhcbiAgW0NvZGVwb2ludFR5cGUuTFZUIHwgQ29kZXBvaW50VHlwZS5ULCBDb2RlcG9pbnRUeXBlLlRdLFxuICAvLyBHQjlcbiAgW0NvZGVwb2ludFR5cGUuQW55LCBDb2RlcG9pbnRUeXBlLkV4dGVuZCB8IENvZGVwb2ludFR5cGUuWldKXSxcbiAgLy8gR0I5YVxuICBbQ29kZXBvaW50VHlwZS5BbnksIENvZGVwb2ludFR5cGUuU3BhY2luZ01hcmtdLFxuICAvLyBHQjliXG4gIFtDb2RlcG9pbnRUeXBlLlByZXBlbmQsIENvZGVwb2ludFR5cGUuQW55XSxcbiAgLy8gR0IxMVxuICBbQ29kZXBvaW50VHlwZS5aV0osIENvZGVwb2ludFR5cGUuRXh0UGljdF0sXG4gIC8vIEdCMTIgYW5kIEdCMTNcbiAgW0NvZGVwb2ludFR5cGUuUkksIENvZGVwb2ludFR5cGUuUkldLFxuXVxuXG5mdW5jdGlvbiBpc0JvdW5kYXJ5UGFpcihsZWZ0OiBDb2RlcG9pbnRUeXBlLCByaWdodDogQ29kZXBvaW50VHlwZSkge1xuICByZXR1cm4gKFxuICAgIE5vbkJvdW5kYXJ5UGFpcnMuZmluZEluZGV4KFxuICAgICAgciA9PiBpbnRlcnNlY3RzKGxlZnQsIHJbMF0pICYmIGludGVyc2VjdHMocmlnaHQsIHJbMV0pXG4gICAgKSA9PT0gLTFcbiAgKVxufVxuXG5jb25zdCBlbmRpbmdFbW9qaVpXSiA9IC9cXHB7RXh0UGljdH1bXFxwe0dyX0V4dH1cXHB7RU1vZH1dKlxcdTIwMEQkL3VcbmNvbnN0IGVuZHNXaXRoRW1vamlaV0ogPSAoc3RyOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHN0ci5zZWFyY2goZW5kaW5nRW1vamlaV0opICE9PSAtMVxufVxuXG5jb25zdCBlbmRpbmdSSXMgPSAvXFxwe1JJfSskL2d1XG5jb25zdCBlbmRzV2l0aE9kZE51bWJlck9mUklzID0gKHN0cjogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IG1hdGNoID0gc3RyLm1hdGNoKGVuZGluZ1JJcylcbiAgaWYgKG1hdGNoID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH0gZWxzZSB7XG4gICAgLy8gQSBSSSBpcyByZXByZXNlbnRlZCBieSBhIHN1cnJvZ2F0ZSBwYWlyLlxuICAgIGNvbnN0IG51bVJJcyA9IG1hdGNoWzBdLmxlbmd0aCAvIDJcbiAgICByZXR1cm4gbnVtUklzICUgMiA9PT0gMVxuICB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBMb2NhdGlvbiwgTm9kZSwgUGF0aCwgUmFuZ2UsIFRyYW5zZm9ybXMgfSBmcm9tICcuLi8uLi9pbmRleCdcbmltcG9ydCB7IFRleHRVbml0IH0gZnJvbSAnLi4vLi4vdHlwZXMvdHlwZXMnXG5pbXBvcnQgeyBnZXREZWZhdWx0SW5zZXJ0TG9jYXRpb24gfSBmcm9tICcuLi8uLi91dGlscydcblxuZXhwb3J0IGludGVyZmFjZSBUZXh0RGVsZXRlT3B0aW9ucyB7XG4gIGF0PzogTG9jYXRpb25cbiAgZGlzdGFuY2U/OiBudW1iZXJcbiAgdW5pdD86IFRleHRVbml0XG4gIHJldmVyc2U/OiBib29sZWFuXG4gIGhhbmdpbmc/OiBib29sZWFuXG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRJbnNlcnRGcmFnbWVudE9wdGlvbnMge1xuICBhdD86IExvY2F0aW9uXG4gIGhhbmdpbmc/OiBib29sZWFuXG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRJbnNlcnRUZXh0T3B0aW9ucyB7XG4gIGF0PzogTG9jYXRpb25cbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dFRyYW5zZm9ybXMge1xuICAvKipcbiAgICogRGVsZXRlIGNvbnRlbnQgaW4gdGhlIGVkaXRvci5cbiAgICovXG4gIGRlbGV0ZTogKGVkaXRvcjogRWRpdG9yLCBvcHRpb25zPzogVGV4dERlbGV0ZU9wdGlvbnMpID0+IHZvaWRcblxuICAvKipcbiAgICogSW5zZXJ0IGEgZnJhZ21lbnQgaW4gdGhlIGVkaXRvclxuICAgKiBhdCB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBpbnNlcnRGcmFnbWVudDogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIGZyYWdtZW50OiBOb2RlW10sXG4gICAgb3B0aW9ucz86IFRleHRJbnNlcnRGcmFnbWVudE9wdGlvbnNcbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIEluc2VydCBhIHN0cmluZyBvZiB0ZXh0IGluIHRoZSBlZGl0b3JcbiAgICogYXQgdGhlIHNwZWNpZmllZCBsb2NhdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgaW5zZXJ0VGV4dDogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIHRleHQ6IHN0cmluZyxcbiAgICBvcHRpb25zPzogVGV4dEluc2VydFRleHRPcHRpb25zXG4gICkgPT4gdm9pZFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgVGV4dFRyYW5zZm9ybXM6IFRleHRUcmFuc2Zvcm1zID0ge1xuICBkZWxldGUoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLmRlbGV0ZShvcHRpb25zKVxuICB9LFxuICBpbnNlcnRGcmFnbWVudChlZGl0b3IsIGZyYWdtZW50LCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLmluc2VydEZyYWdtZW50KGZyYWdtZW50LCBvcHRpb25zKVxuICB9LFxuICBpbnNlcnRUZXh0KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIHRleHQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiBUZXh0SW5zZXJ0VGV4dE9wdGlvbnMgPSB7fVxuICApOiB2b2lkIHtcbiAgICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgICAgY29uc3QgeyB2b2lkcyA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgICBsZXQgeyBhdCA9IGdldERlZmF1bHRJbnNlcnRMb2NhdGlvbihlZGl0b3IpIH0gPSBvcHRpb25zXG5cbiAgICAgIGlmIChQYXRoLmlzUGF0aChhdCkpIHtcbiAgICAgICAgYXQgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBhdClcbiAgICAgIH1cblxuICAgICAgaWYgKFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICAgIGlmIChSYW5nZS5pc0NvbGxhcHNlZChhdCkpIHtcbiAgICAgICAgICBhdCA9IGF0LmFuY2hvclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGVuZCA9IFJhbmdlLmVuZChhdClcbiAgICAgICAgICBpZiAoIXZvaWRzICYmIEVkaXRvci52b2lkKGVkaXRvciwgeyBhdDogZW5kIH0pKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgc3RhcnQgPSBSYW5nZS5zdGFydChhdClcbiAgICAgICAgICBjb25zdCBzdGFydFJlZiA9IEVkaXRvci5wb2ludFJlZihlZGl0b3IsIHN0YXJ0KVxuICAgICAgICAgIGNvbnN0IGVuZFJlZiA9IEVkaXRvci5wb2ludFJlZihlZGl0b3IsIGVuZClcbiAgICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHsgYXQsIHZvaWRzIH0pXG4gICAgICAgICAgY29uc3Qgc3RhcnRQb2ludCA9IHN0YXJ0UmVmLnVucmVmKClcbiAgICAgICAgICBjb25zdCBlbmRQb2ludCA9IGVuZFJlZi51bnJlZigpXG5cbiAgICAgICAgICBhdCA9IHN0YXJ0UG9pbnQgfHwgZW5kUG9pbnQhXG4gICAgICAgICAgVHJhbnNmb3Jtcy5zZXRTZWxlY3Rpb24oZWRpdG9yLCB7IGFuY2hvcjogYXQsIGZvY3VzOiBhdCB9KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgKCF2b2lkcyAmJiBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQgfSkpIHx8XG4gICAgICAgIEVkaXRvci5lbGVtZW50UmVhZE9ubHkoZWRpdG9yLCB7IGF0IH0pXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgcGF0aCwgb2Zmc2V0IH0gPSBhdFxuICAgICAgaWYgKHRleHQubGVuZ3RoID4gMClcbiAgICAgICAgZWRpdG9yLmFwcGx5KHsgdHlwZTogJ2luc2VydF90ZXh0JywgcGF0aCwgb2Zmc2V0LCB0ZXh0IH0pXG4gICAgfSlcbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBHZW5lcmFsVHJhbnNmb3JtcyB9IGZyb20gJy4vZ2VuZXJhbCdcbmltcG9ydCB7IE5vZGVUcmFuc2Zvcm1zIH0gZnJvbSAnLi9ub2RlJ1xuaW1wb3J0IHsgU2VsZWN0aW9uVHJhbnNmb3JtcyB9IGZyb20gJy4vc2VsZWN0aW9uJ1xuaW1wb3J0IHsgVGV4dFRyYW5zZm9ybXMgfSBmcm9tICcuL3RleHQnXG5cbmV4cG9ydCBjb25zdCBUcmFuc2Zvcm1zOiBHZW5lcmFsVHJhbnNmb3JtcyAmXG4gIE5vZGVUcmFuc2Zvcm1zICZcbiAgU2VsZWN0aW9uVHJhbnNmb3JtcyAmXG4gIFRleHRUcmFuc2Zvcm1zID0ge1xuICAuLi5HZW5lcmFsVHJhbnNmb3JtcyxcbiAgLi4uTm9kZVRyYW5zZm9ybXMsXG4gIC4uLlNlbGVjdGlvblRyYW5zZm9ybXMsXG4gIC4uLlRleHRUcmFuc2Zvcm1zLFxufVxuIiwgImltcG9ydCB7IFBhdGhSZWYgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgtcmVmJ1xuaW1wb3J0IHsgUG9pbnRSZWYgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BvaW50LXJlZidcbmltcG9ydCB7IFJhbmdlUmVmIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZS1yZWYnXG5pbXBvcnQgeyBESVJUWV9QQVRIX0tFWVMsIERJUlRZX1BBVEhTLCBGTFVTSElORyB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgV2l0aEVkaXRvckZpcnN0QXJnIH0gZnJvbSAnLi4vdXRpbHMvdHlwZXMnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGFwcGx5OiBXaXRoRWRpdG9yRmlyc3RBcmc8RWRpdG9yWydhcHBseSddPiA9IChlZGl0b3IsIG9wKSA9PiB7XG4gIGZvciAoY29uc3QgcmVmIG9mIEVkaXRvci5wYXRoUmVmcyhlZGl0b3IpKSB7XG4gICAgUGF0aFJlZi50cmFuc2Zvcm0ocmVmLCBvcClcbiAgfVxuXG4gIGZvciAoY29uc3QgcmVmIG9mIEVkaXRvci5wb2ludFJlZnMoZWRpdG9yKSkge1xuICAgIFBvaW50UmVmLnRyYW5zZm9ybShyZWYsIG9wKVxuICB9XG5cbiAgZm9yIChjb25zdCByZWYgb2YgRWRpdG9yLnJhbmdlUmVmcyhlZGl0b3IpKSB7XG4gICAgUmFuZ2VSZWYudHJhbnNmb3JtKHJlZiwgb3ApXG4gIH1cblxuICBjb25zdCBvbGREaXJ0eVBhdGhzID0gRElSVFlfUEFUSFMuZ2V0KGVkaXRvcikgfHwgW11cbiAgY29uc3Qgb2xkRGlydHlQYXRoS2V5cyA9IERJUlRZX1BBVEhfS0VZUy5nZXQoZWRpdG9yKSB8fCBuZXcgU2V0KClcbiAgbGV0IGRpcnR5UGF0aHM6IFBhdGhbXVxuICBsZXQgZGlydHlQYXRoS2V5czogU2V0PHN0cmluZz5cblxuICBjb25zdCBhZGQgPSAocGF0aDogUGF0aCB8IG51bGwpID0+IHtcbiAgICBpZiAocGF0aCkge1xuICAgICAgY29uc3Qga2V5ID0gcGF0aC5qb2luKCcsJylcblxuICAgICAgaWYgKCFkaXJ0eVBhdGhLZXlzLmhhcyhrZXkpKSB7XG4gICAgICAgIGRpcnR5UGF0aEtleXMuYWRkKGtleSlcbiAgICAgICAgZGlydHlQYXRocy5wdXNoKHBhdGgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKFBhdGgub3BlcmF0aW9uQ2FuVHJhbnNmb3JtUGF0aChvcCkpIHtcbiAgICBkaXJ0eVBhdGhzID0gW11cbiAgICBkaXJ0eVBhdGhLZXlzID0gbmV3IFNldCgpXG4gICAgZm9yIChjb25zdCBwYXRoIG9mIG9sZERpcnR5UGF0aHMpIHtcbiAgICAgIGNvbnN0IG5ld1BhdGggPSBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcClcbiAgICAgIGFkZChuZXdQYXRoKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBkaXJ0eVBhdGhzID0gb2xkRGlydHlQYXRoc1xuICAgIGRpcnR5UGF0aEtleXMgPSBvbGREaXJ0eVBhdGhLZXlzXG4gIH1cblxuICBjb25zdCBuZXdEaXJ0eVBhdGhzID0gZWRpdG9yLmdldERpcnR5UGF0aHMob3ApXG4gIGZvciAoY29uc3QgcGF0aCBvZiBuZXdEaXJ0eVBhdGhzKSB7XG4gICAgYWRkKHBhdGgpXG4gIH1cblxuICBESVJUWV9QQVRIUy5zZXQoZWRpdG9yLCBkaXJ0eVBhdGhzKVxuICBESVJUWV9QQVRIX0tFWVMuc2V0KGVkaXRvciwgZGlydHlQYXRoS2V5cylcbiAgVHJhbnNmb3Jtcy50cmFuc2Zvcm0oZWRpdG9yLCBvcClcbiAgZWRpdG9yLm9wZXJhdGlvbnMucHVzaChvcClcbiAgRWRpdG9yLm5vcm1hbGl6ZShlZGl0b3IsIHtcbiAgICBvcGVyYXRpb246IG9wLFxuICB9KVxuXG4gIC8vIENsZWFyIGFueSBmb3JtYXRzIGFwcGxpZWQgdG8gdGhlIGN1cnNvciBpZiB0aGUgc2VsZWN0aW9uIGNoYW5nZXMuXG4gIGlmIChvcC50eXBlID09PSAnc2V0X3NlbGVjdGlvbicpIHtcbiAgICBlZGl0b3IubWFya3MgPSBudWxsXG4gIH1cblxuICBpZiAoIUZMVVNISU5HLmdldChlZGl0b3IpKSB7XG4gICAgRkxVU0hJTkcuc2V0KGVkaXRvciwgdHJ1ZSlcblxuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgRkxVU0hJTkcuc2V0KGVkaXRvciwgZmFsc2UpXG4gICAgICBlZGl0b3Iub25DaGFuZ2UoeyBvcGVyYXRpb246IG9wIH0pXG4gICAgICBlZGl0b3Iub3BlcmF0aW9ucyA9IFtdXG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IFdpdGhFZGl0b3JGaXJzdEFyZyB9IGZyb20gJy4uL3V0aWxzL3R5cGVzJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbi8qKlxuICogR2V0IHRoZSBcImRpcnR5XCIgcGF0aHMgZ2VuZXJhdGVkIGZyb20gYW4gb3BlcmF0aW9uLlxuICovXG5leHBvcnQgY29uc3QgZ2V0RGlydHlQYXRoczogV2l0aEVkaXRvckZpcnN0QXJnPEVkaXRvclsnZ2V0RGlydHlQYXRocyddPiA9IChcbiAgZWRpdG9yLFxuICBvcFxuKSA9PiB7XG4gIHN3aXRjaCAob3AudHlwZSkge1xuICAgIGNhc2UgJ2luc2VydF90ZXh0JzpcbiAgICBjYXNlICdyZW1vdmVfdGV4dCc6XG4gICAgY2FzZSAnc2V0X25vZGUnOiB7XG4gICAgICBjb25zdCB7IHBhdGggfSA9IG9wXG4gICAgICByZXR1cm4gUGF0aC5sZXZlbHMocGF0aClcbiAgICB9XG5cbiAgICBjYXNlICdpbnNlcnRfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgbm9kZSwgcGF0aCB9ID0gb3BcbiAgICAgIGNvbnN0IGxldmVscyA9IFBhdGgubGV2ZWxzKHBhdGgpXG4gICAgICBjb25zdCBkZXNjZW5kYW50cyA9IFRleHQuaXNUZXh0KG5vZGUpXG4gICAgICAgID8gW11cbiAgICAgICAgOiBBcnJheS5mcm9tKE5vZGUubm9kZXMobm9kZSksIChbLCBwXSkgPT4gcGF0aC5jb25jYXQocCkpXG5cbiAgICAgIHJldHVybiBbLi4ubGV2ZWxzLCAuLi5kZXNjZW5kYW50c11cbiAgICB9XG5cbiAgICBjYXNlICdtZXJnZV9ub2RlJzoge1xuICAgICAgY29uc3QgeyBwYXRoIH0gPSBvcFxuICAgICAgY29uc3QgYW5jZXN0b3JzID0gUGF0aC5hbmNlc3RvcnMocGF0aClcbiAgICAgIGNvbnN0IHByZXZpb3VzUGF0aCA9IFBhdGgucHJldmlvdXMocGF0aClcbiAgICAgIHJldHVybiBbLi4uYW5jZXN0b3JzLCBwcmV2aW91c1BhdGhdXG4gICAgfVxuXG4gICAgY2FzZSAnbW92ZV9ub2RlJzoge1xuICAgICAgY29uc3QgeyBwYXRoLCBuZXdQYXRoIH0gPSBvcFxuXG4gICAgICBpZiAoUGF0aC5lcXVhbHMocGF0aCwgbmV3UGF0aCkpIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9sZEFuY2VzdG9yczogUGF0aFtdID0gW11cbiAgICAgIGNvbnN0IG5ld0FuY2VzdG9yczogUGF0aFtdID0gW11cblxuICAgICAgZm9yIChjb25zdCBhbmNlc3RvciBvZiBQYXRoLmFuY2VzdG9ycyhwYXRoKSkge1xuICAgICAgICBjb25zdCBwID0gUGF0aC50cmFuc2Zvcm0oYW5jZXN0b3IsIG9wKVxuICAgICAgICBvbGRBbmNlc3RvcnMucHVzaChwISlcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBhbmNlc3RvciBvZiBQYXRoLmFuY2VzdG9ycyhuZXdQYXRoKSkge1xuICAgICAgICBjb25zdCBwID0gUGF0aC50cmFuc2Zvcm0oYW5jZXN0b3IsIG9wKVxuICAgICAgICBuZXdBbmNlc3RvcnMucHVzaChwISlcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV3UGFyZW50ID0gbmV3QW5jZXN0b3JzW25ld0FuY2VzdG9ycy5sZW5ndGggLSAxXVxuICAgICAgY29uc3QgbmV3SW5kZXggPSBuZXdQYXRoW25ld1BhdGgubGVuZ3RoIC0gMV1cbiAgICAgIGNvbnN0IHJlc3VsdFBhdGggPSBuZXdQYXJlbnQuY29uY2F0KG5ld0luZGV4KVxuXG4gICAgICByZXR1cm4gWy4uLm9sZEFuY2VzdG9ycywgLi4ubmV3QW5jZXN0b3JzLCByZXN1bHRQYXRoXVxuICAgIH1cblxuICAgIGNhc2UgJ3JlbW92ZV9ub2RlJzoge1xuICAgICAgY29uc3QgeyBwYXRoIH0gPSBvcFxuICAgICAgY29uc3QgYW5jZXN0b3JzID0gUGF0aC5hbmNlc3RvcnMocGF0aClcbiAgICAgIHJldHVybiBbLi4uYW5jZXN0b3JzXVxuICAgIH1cblxuICAgIGNhc2UgJ3NwbGl0X25vZGUnOiB7XG4gICAgICBjb25zdCB7IHBhdGggfSA9IG9wXG4gICAgICBjb25zdCBsZXZlbHMgPSBQYXRoLmxldmVscyhwYXRoKVxuICAgICAgY29uc3QgbmV4dFBhdGggPSBQYXRoLm5leHQocGF0aClcbiAgICAgIHJldHVybiBbLi4ubGV2ZWxzLCBuZXh0UGF0aF1cbiAgICB9XG5cbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzJ1xuaW1wb3J0IHsgV2l0aEVkaXRvckZpcnN0QXJnIH0gZnJvbSAnLi4vdXRpbHMnXG5cbmV4cG9ydCBjb25zdCBnZXRGcmFnbWVudDogV2l0aEVkaXRvckZpcnN0QXJnPFxuICBFZGl0b3JbJ2dldEZyYWdtZW50J11cbj4gPSBlZGl0b3IgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG5cbiAgaWYgKHNlbGVjdGlvbikge1xuICAgIHJldHVybiBOb2RlLmZyYWdtZW50KGVkaXRvciwgc2VsZWN0aW9uKVxuICB9XG4gIHJldHVybiBbXVxufVxuIiwgImltcG9ydCB7IFdpdGhFZGl0b3JGaXJzdEFyZyB9IGZyb20gJy4uL3V0aWxzL3R5cGVzJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgRGVzY2VuZGFudCwgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplTm9kZTogV2l0aEVkaXRvckZpcnN0QXJnPEVkaXRvclsnbm9ybWFsaXplTm9kZSddPiA9IChcbiAgZWRpdG9yLFxuICBlbnRyeVxuKSA9PiB7XG4gIGNvbnN0IFtub2RlLCBwYXRoXSA9IGVudHJ5XG5cbiAgLy8gVGhlcmUgYXJlIG5vIGNvcmUgbm9ybWFsaXphdGlvbnMgZm9yIHRleHQgbm9kZXMuXG4gIGlmIChUZXh0LmlzVGV4dChub2RlKSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgLy8gRW5zdXJlIHRoYXQgYmxvY2sgYW5kIGlubGluZSBub2RlcyBoYXZlIGF0IGxlYXN0IG9uZSB0ZXh0IGNoaWxkLlxuICBpZiAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICBjb25zdCBjaGlsZCA9IHsgdGV4dDogJycgfVxuICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBjaGlsZCwge1xuICAgICAgYXQ6IHBhdGguY29uY2F0KDApLFxuICAgICAgdm9pZHM6IHRydWUsXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIERldGVybWluZSB3aGV0aGVyIHRoZSBub2RlIHNob3VsZCBoYXZlIGJsb2NrIG9yIGlubGluZSBjaGlsZHJlbi5cbiAgY29uc3Qgc2hvdWxkSGF2ZUlubGluZXMgPSBFZGl0b3IuaXNFZGl0b3Iobm9kZSlcbiAgICA/IGZhbHNlXG4gICAgOiBFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJlxuICAgICAgKGVkaXRvci5pc0lubGluZShub2RlKSB8fFxuICAgICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBUZXh0LmlzVGV4dChub2RlLmNoaWxkcmVuWzBdKSB8fFxuICAgICAgICBlZGl0b3IuaXNJbmxpbmUobm9kZS5jaGlsZHJlblswXSkpXG5cbiAgLy8gU2luY2Ugd2UnbGwgYmUgYXBwbHlpbmcgb3BlcmF0aW9ucyB3aGlsZSBpdGVyYXRpbmcsIGtlZXAgdHJhY2sgb2YgYW5cbiAgLy8gaW5kZXggdGhhdCBhY2NvdW50cyBmb3IgYW55IGFkZGVkL3JlbW92ZWQgbm9kZXMuXG4gIGxldCBuID0gMFxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKywgbisrKSB7XG4gICAgY29uc3QgY3VycmVudE5vZGUgPSBOb2RlLmdldChlZGl0b3IsIHBhdGgpXG4gICAgaWYgKFRleHQuaXNUZXh0KGN1cnJlbnROb2RlKSkgY29udGludWVcbiAgICBjb25zdCBjaGlsZCA9IGN1cnJlbnROb2RlLmNoaWxkcmVuW25dIGFzIERlc2NlbmRhbnRcbiAgICBjb25zdCBwcmV2ID0gY3VycmVudE5vZGUuY2hpbGRyZW5bbiAtIDFdIGFzIERlc2NlbmRhbnRcbiAgICBjb25zdCBpc0xhc3QgPSBpID09PSBub2RlLmNoaWxkcmVuLmxlbmd0aCAtIDFcbiAgICBjb25zdCBpc0lubGluZU9yVGV4dCA9XG4gICAgICBUZXh0LmlzVGV4dChjaGlsZCkgfHwgKEVsZW1lbnQuaXNFbGVtZW50KGNoaWxkKSAmJiBlZGl0b3IuaXNJbmxpbmUoY2hpbGQpKVxuXG4gICAgLy8gT25seSBhbGxvdyBibG9jayBub2RlcyBpbiB0aGUgdG9wLWxldmVsIGNoaWxkcmVuIGFuZCBwYXJlbnQgYmxvY2tzXG4gICAgLy8gdGhhdCBvbmx5IGNvbnRhaW4gYmxvY2sgbm9kZXMuIFNpbWlsYXJseSwgb25seSBhbGxvdyBpbmxpbmUgbm9kZXMgaW5cbiAgICAvLyBvdGhlciBpbmxpbmUgbm9kZXMsIG9yIHBhcmVudCBibG9ja3MgdGhhdCBvbmx5IGNvbnRhaW4gaW5saW5lcyBhbmRcbiAgICAvLyB0ZXh0LlxuICAgIGlmIChpc0lubGluZU9yVGV4dCAhPT0gc2hvdWxkSGF2ZUlubGluZXMpIHtcbiAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7IGF0OiBwYXRoLmNvbmNhdChuKSwgdm9pZHM6IHRydWUgfSlcbiAgICAgIG4tLVxuICAgIH0gZWxzZSBpZiAoRWxlbWVudC5pc0VsZW1lbnQoY2hpbGQpKSB7XG4gICAgICAvLyBFbnN1cmUgdGhhdCBpbmxpbmUgbm9kZXMgYXJlIHN1cnJvdW5kZWQgYnkgdGV4dCBub2Rlcy5cbiAgICAgIGlmIChlZGl0b3IuaXNJbmxpbmUoY2hpbGQpKSB7XG4gICAgICAgIGlmIChwcmV2ID09IG51bGwgfHwgIVRleHQuaXNUZXh0KHByZXYpKSB7XG4gICAgICAgICAgY29uc3QgbmV3Q2hpbGQgPSB7IHRleHQ6ICcnIH1cbiAgICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgbmV3Q2hpbGQsIHtcbiAgICAgICAgICAgIGF0OiBwYXRoLmNvbmNhdChuKSxcbiAgICAgICAgICAgIHZvaWRzOiB0cnVlLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgbisrXG4gICAgICAgIH0gZWxzZSBpZiAoaXNMYXN0KSB7XG4gICAgICAgICAgY29uc3QgbmV3Q2hpbGQgPSB7IHRleHQ6ICcnIH1cbiAgICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgbmV3Q2hpbGQsIHtcbiAgICAgICAgICAgIGF0OiBwYXRoLmNvbmNhdChuICsgMSksXG4gICAgICAgICAgICB2b2lkczogdHJ1ZSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIG4rK1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE1lcmdlIGFkamFjZW50IHRleHQgbm9kZXMgdGhhdCBhcmUgZW1wdHkgb3IgbWF0Y2guXG4gICAgICBpZiAocHJldiAhPSBudWxsICYmIFRleHQuaXNUZXh0KHByZXYpKSB7XG4gICAgICAgIGlmIChUZXh0LmVxdWFscyhjaGlsZCwgcHJldiwgeyBsb29zZTogdHJ1ZSB9KSkge1xuICAgICAgICAgIFRyYW5zZm9ybXMubWVyZ2VOb2RlcyhlZGl0b3IsIHsgYXQ6IHBhdGguY29uY2F0KG4pLCB2b2lkczogdHJ1ZSB9KVxuICAgICAgICAgIG4tLVxuICAgICAgICB9IGVsc2UgaWYgKHByZXYudGV4dCA9PT0gJycpIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgYXQ6IHBhdGguY29uY2F0KG4gLSAxKSxcbiAgICAgICAgICAgIHZvaWRzOiB0cnVlLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgbi0tXG4gICAgICAgIH0gZWxzZSBpZiAoY2hpbGQudGV4dCA9PT0gJycpIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgYXQ6IHBhdGguY29uY2F0KG4pLFxuICAgICAgICAgICAgdm9pZHM6IHRydWUsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBuLS1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IFdpdGhFZGl0b3JGaXJzdEFyZyB9IGZyb20gJy4uL3V0aWxzL3R5cGVzJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBzaG91bGROb3JtYWxpemU6IFdpdGhFZGl0b3JGaXJzdEFyZzxFZGl0b3JbJ3Nob3VsZE5vcm1hbGl6ZSddPiA9IChcbiAgZWRpdG9yLFxuICB7IGl0ZXJhdGlvbiwgaW5pdGlhbERpcnR5UGF0aHNMZW5ndGggfVxuKSA9PiB7XG4gIGNvbnN0IG1heEl0ZXJhdGlvbnMgPSBpbml0aWFsRGlydHlQYXRoc0xlbmd0aCAqIDQyIC8vIEhBQ0s6IGJldHRlciB3YXk/XG5cbiAgaWYgKGl0ZXJhdGlvbiA+IG1heEl0ZXJhdGlvbnMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgQ291bGQgbm90IGNvbXBsZXRlbHkgbm9ybWFsaXplIHRoZSBlZGl0b3IgYWZ0ZXIgJHttYXhJdGVyYXRpb25zfSBpdGVyYXRpb25zISBUaGlzIGlzIHVzdWFsbHkgZHVlIHRvIGluY29ycmVjdCBub3JtYWxpemF0aW9uIGxvZ2ljIHRoYXQgbGVhdmVzIGEgbm9kZSBpbiBhbiBpbnZhbGlkIHN0YXRlLmBcbiAgICApXG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcblxuZXhwb3J0IGNvbnN0IGFib3ZlOiBFZGl0b3JJbnRlcmZhY2VbJ2Fib3ZlJ10gPSAoZWRpdG9yLCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3Qge1xuICAgIHZvaWRzID0gZmFsc2UsXG4gICAgbW9kZSA9ICdsb3dlc3QnLFxuICAgIGF0ID0gZWRpdG9yLnNlbGVjdGlvbixcbiAgICBtYXRjaCxcbiAgfSA9IG9wdGlvbnNcblxuICBpZiAoIWF0KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBwYXRoID0gRWRpdG9yLnBhdGgoZWRpdG9yLCBhdClcbiAgY29uc3QgcmV2ZXJzZSA9IG1vZGUgPT09ICdsb3dlc3QnXG5cbiAgZm9yIChjb25zdCBbbiwgcF0gb2YgRWRpdG9yLmxldmVscyhlZGl0b3IsIHtcbiAgICBhdDogcGF0aCxcbiAgICB2b2lkcyxcbiAgICBtYXRjaCxcbiAgICByZXZlcnNlLFxuICB9KSkge1xuICAgIGlmIChUZXh0LmlzVGV4dChuKSkgY29udGludWVcbiAgICBpZiAoUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgUGF0aC5pc0FuY2VzdG9yKHAsIGF0LmFuY2hvci5wYXRoKSAmJlxuICAgICAgICBQYXRoLmlzQW5jZXN0b3IocCwgYXQuZm9jdXMucGF0aClcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gW24sIHBdXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghUGF0aC5lcXVhbHMocGF0aCwgcCkpIHtcbiAgICAgICAgcmV0dXJuIFtuLCBwXVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBGTFVTSElORyB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBhZGRNYXJrOiBFZGl0b3JJbnRlcmZhY2VbJ2FkZE1hcmsnXSA9IChlZGl0b3IsIGtleSwgdmFsdWUpID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuXG4gIGlmIChzZWxlY3Rpb24pIHtcbiAgICBjb25zdCBtYXRjaCA9IChub2RlOiBOb2RlLCBwYXRoOiBQYXRoKSA9PiB7XG4gICAgICBpZiAoIVRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZSAvLyBtYXJrcyBjYW4gb25seSBiZSBhcHBsaWVkIHRvIHRleHRcbiAgICAgIH1cbiAgICAgIGNvbnN0IFtwYXJlbnROb2RlLCBwYXJlbnRQYXRoXSA9IEVkaXRvci5wYXJlbnQoZWRpdG9yLCBwYXRoKVxuICAgICAgcmV0dXJuICFlZGl0b3IuaXNWb2lkKHBhcmVudE5vZGUpIHx8IGVkaXRvci5tYXJrYWJsZVZvaWQocGFyZW50Tm9kZSlcbiAgICB9XG4gICAgY29uc3QgZXhwYW5kZWRTZWxlY3Rpb24gPSBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbilcbiAgICBsZXQgbWFya0FjY2VwdGluZ1ZvaWRTZWxlY3RlZCA9IGZhbHNlXG4gICAgaWYgKCFleHBhbmRlZFNlbGVjdGlvbikge1xuICAgICAgY29uc3QgW3NlbGVjdGVkTm9kZSwgc2VsZWN0ZWRQYXRoXSA9IEVkaXRvci5ub2RlKGVkaXRvciwgc2VsZWN0aW9uKVxuICAgICAgaWYgKHNlbGVjdGVkTm9kZSAmJiBtYXRjaChzZWxlY3RlZE5vZGUsIHNlbGVjdGVkUGF0aCkpIHtcbiAgICAgICAgY29uc3QgW3BhcmVudE5vZGVdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIHNlbGVjdGVkUGF0aClcbiAgICAgICAgbWFya0FjY2VwdGluZ1ZvaWRTZWxlY3RlZCA9XG4gICAgICAgICAgcGFyZW50Tm9kZSAmJiBlZGl0b3IubWFya2FibGVWb2lkKHBhcmVudE5vZGUpXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChleHBhbmRlZFNlbGVjdGlvbiB8fCBtYXJrQWNjZXB0aW5nVm9pZFNlbGVjdGVkKSB7XG4gICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICBlZGl0b3IsXG4gICAgICAgIHsgW2tleV06IHZhbHVlIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBtYXRjaCxcbiAgICAgICAgICBzcGxpdDogdHJ1ZSxcbiAgICAgICAgICB2b2lkczogdHJ1ZSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtYXJrcyA9IHtcbiAgICAgICAgLi4uKEVkaXRvci5tYXJrcyhlZGl0b3IpIHx8IHt9KSxcbiAgICAgICAgW2tleV06IHZhbHVlLFxuICAgICAgfVxuXG4gICAgICBlZGl0b3IubWFya3MgPSBtYXJrc1xuICAgICAgaWYgKCFGTFVTSElORy5nZXQoZWRpdG9yKSkge1xuICAgICAgICBlZGl0b3Iub25DaGFuZ2UoKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBhZnRlcjogRWRpdG9ySW50ZXJmYWNlWydhZnRlciddID0gKGVkaXRvciwgYXQsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCBhbmNob3IgPSBFZGl0b3IucG9pbnQoZWRpdG9yLCBhdCwgeyBlZGdlOiAnZW5kJyB9KVxuICBjb25zdCBmb2N1cyA9IEVkaXRvci5lbmQoZWRpdG9yLCBbXSlcbiAgY29uc3QgcmFuZ2UgPSB7IGFuY2hvciwgZm9jdXMgfVxuICBjb25zdCB7IGRpc3RhbmNlID0gMSB9ID0gb3B0aW9uc1xuICBsZXQgZCA9IDBcbiAgbGV0IHRhcmdldFxuXG4gIGZvciAoY29uc3QgcCBvZiBFZGl0b3IucG9zaXRpb25zKGVkaXRvciwge1xuICAgIC4uLm9wdGlvbnMsXG4gICAgYXQ6IHJhbmdlLFxuICB9KSkge1xuICAgIGlmIChkID4gZGlzdGFuY2UpIHtcbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKGQgIT09IDApIHtcbiAgICAgIHRhcmdldCA9IHBcbiAgICB9XG5cbiAgICBkKytcbiAgfVxuXG4gIHJldHVybiB0YXJnZXRcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgYmVmb3JlOiBFZGl0b3JJbnRlcmZhY2VbJ2JlZm9yZSddID0gKGVkaXRvciwgYXQsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCBhbmNob3IgPSBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBbXSlcbiAgY29uc3QgZm9jdXMgPSBFZGl0b3IucG9pbnQoZWRpdG9yLCBhdCwgeyBlZGdlOiAnc3RhcnQnIH0pXG4gIGNvbnN0IHJhbmdlID0geyBhbmNob3IsIGZvY3VzIH1cbiAgY29uc3QgeyBkaXN0YW5jZSA9IDEgfSA9IG9wdGlvbnNcbiAgbGV0IGQgPSAwXG4gIGxldCB0YXJnZXRcblxuICBmb3IgKGNvbnN0IHAgb2YgRWRpdG9yLnBvc2l0aW9ucyhlZGl0b3IsIHtcbiAgICAuLi5vcHRpb25zLFxuICAgIGF0OiByYW5nZSxcbiAgICByZXZlcnNlOiB0cnVlLFxuICB9KSkge1xuICAgIGlmIChkID4gZGlzdGFuY2UpIHtcbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKGQgIT09IDApIHtcbiAgICAgIHRhcmdldCA9IHBcbiAgICB9XG5cbiAgICBkKytcbiAgfVxuXG4gIHJldHVybiB0YXJnZXRcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBXaXRoRWRpdG9yRmlyc3RBcmcgfSBmcm9tICcuLi91dGlscy90eXBlcydcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZUJhY2t3YXJkOiBXaXRoRWRpdG9yRmlyc3RBcmc8RWRpdG9yWydkZWxldGVCYWNrd2FyZCddPiA9IChcbiAgZWRpdG9yLFxuICB1bml0XG4pID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuXG4gIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNDb2xsYXBzZWQoc2VsZWN0aW9uKSkge1xuICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwgeyB1bml0LCByZXZlcnNlOiB0cnVlIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBXaXRoRWRpdG9yRmlyc3RBcmcgfSBmcm9tICcuLi91dGlscy90eXBlcydcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZUZvcndhcmQ6IFdpdGhFZGl0b3JGaXJzdEFyZzxFZGl0b3JbJ2RlbGV0ZUZvcndhcmQnXT4gPSAoXG4gIGVkaXRvcixcbiAgdW5pdFxuKSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcblxuICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKHNlbGVjdGlvbikpIHtcbiAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHsgdW5pdCB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgZGVsZXRlRnJhZ21lbnQ6IEVkaXRvckludGVyZmFjZVsnZGVsZXRlRnJhZ21lbnQnXSA9IChcbiAgZWRpdG9yLFxuICB7IGRpcmVjdGlvbiA9ICdmb3J3YXJkJyB9ID0ge31cbikgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG5cbiAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHsgcmV2ZXJzZTogZGlyZWN0aW9uID09PSAnYmFja3dhcmQnIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgZWRnZXM6IEVkaXRvckludGVyZmFjZVsnZWRnZXMnXSA9IChlZGl0b3IsIGF0KSA9PiB7XG4gIHJldHVybiBbRWRpdG9yLnN0YXJ0KGVkaXRvciwgYXQpLCBFZGl0b3IuZW5kKGVkaXRvciwgYXQpXVxufVxuIiwgImltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgZWxlbWVudFJlYWRPbmx5OiBFZGl0b3JJbnRlcmZhY2VbJ2VsZW1lbnRSZWFkT25seSddID0gKFxuICBlZGl0b3IsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIHJldHVybiBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNFbGVtZW50UmVhZE9ubHkoZWRpdG9yLCBuKSxcbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgZW5kOiBFZGl0b3JJbnRlcmZhY2VbJ2VuZCddID0gKGVkaXRvciwgYXQpID0+IHtcbiAgcmV0dXJuIEVkaXRvci5wb2ludChlZGl0b3IsIGF0LCB7IGVkZ2U6ICdlbmQnIH0pXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGZpcnN0OiBFZGl0b3JJbnRlcmZhY2VbJ2ZpcnN0J10gPSAoZWRpdG9yLCBhdCkgPT4ge1xuICBjb25zdCBwYXRoID0gRWRpdG9yLnBhdGgoZWRpdG9yLCBhdCwgeyBlZGdlOiAnc3RhcnQnIH0pXG4gIHJldHVybiBFZGl0b3Iubm9kZShlZGl0b3IsIHBhdGgpXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5cbmV4cG9ydCBjb25zdCBmcmFnbWVudDogRWRpdG9ySW50ZXJmYWNlWydmcmFnbWVudCddID0gKGVkaXRvciwgYXQpID0+IHtcbiAgY29uc3QgcmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBhdClcbiAgcmV0dXJuIE5vZGUuZnJhZ21lbnQoZWRpdG9yLCByYW5nZSlcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcblxuZXhwb3J0IGNvbnN0IGdldFZvaWQ6IEVkaXRvckludGVyZmFjZVsndm9pZCddID0gKGVkaXRvciwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIHJldHVybiBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNWb2lkKGVkaXRvciwgbiksXG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5cbmV4cG9ydCBjb25zdCBoYXNCbG9ja3M6IEVkaXRvckludGVyZmFjZVsnaGFzQmxvY2tzJ10gPSAoZWRpdG9yLCBlbGVtZW50KSA9PiB7XG4gIHJldHVybiBlbGVtZW50LmNoaWxkcmVuLnNvbWUoXG4gICAgbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gIClcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcblxuZXhwb3J0IGNvbnN0IGhhc0lubGluZXM6IEVkaXRvckludGVyZmFjZVsnaGFzSW5saW5lcyddID0gKGVkaXRvciwgZWxlbWVudCkgPT4ge1xuICByZXR1cm4gZWxlbWVudC5jaGlsZHJlbi5zb21lKFxuICAgIG4gPT4gVGV4dC5pc1RleHQobikgfHwgRWRpdG9yLmlzSW5saW5lKGVkaXRvciwgbilcbiAgKVxufVxuIiwgImltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcblxuZXhwb3J0IGNvbnN0IGhhc1BhdGg6IEVkaXRvckludGVyZmFjZVsnaGFzUGF0aCddID0gKGVkaXRvciwgcGF0aCkgPT4ge1xuICByZXR1cm4gTm9kZS5oYXMoZWRpdG9yLCBwYXRoKVxufVxuIiwgImltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcblxuZXhwb3J0IGNvbnN0IGhhc1RleHRzOiBFZGl0b3JJbnRlcmZhY2VbJ2hhc1RleHRzJ10gPSAoZWRpdG9yLCBlbGVtZW50KSA9PiB7XG4gIHJldHVybiBlbGVtZW50LmNoaWxkcmVuLmV2ZXJ5KG4gPT4gVGV4dC5pc1RleHQobikpXG59XG4iLCAiaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0QnJlYWs6IEVkaXRvckludGVyZmFjZVsnaW5zZXJ0QnJlYWsnXSA9IGVkaXRvciA9PiB7XG4gIFRyYW5zZm9ybXMuc3BsaXROb2RlcyhlZGl0b3IsIHsgYWx3YXlzOiB0cnVlIH0pXG59XG4iLCAiaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0Tm9kZTogRWRpdG9ySW50ZXJmYWNlWydpbnNlcnROb2RlJ10gPSAoXG4gIGVkaXRvcixcbiAgbm9kZSxcbiAgb3B0aW9uc1xuKSA9PiB7XG4gIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBub2RlLCBvcHRpb25zKVxufVxuIiwgImltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGluc2VydFNvZnRCcmVhazogRWRpdG9ySW50ZXJmYWNlWydpbnNlcnRTb2Z0QnJlYWsnXSA9IGVkaXRvciA9PiB7XG4gIFRyYW5zZm9ybXMuc3BsaXROb2RlcyhlZGl0b3IsIHsgYWx3YXlzOiB0cnVlIH0pXG59XG4iLCAiaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0VGV4dDogRWRpdG9ySW50ZXJmYWNlWydpbnNlcnRUZXh0J10gPSAoXG4gIGVkaXRvcixcbiAgdGV4dCxcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24sIG1hcmtzIH0gPSBlZGl0b3JcblxuICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgaWYgKG1hcmtzKSB7XG4gICAgICBjb25zdCBub2RlID0geyB0ZXh0LCAuLi5tYXJrcyB9XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgbm9kZSwge1xuICAgICAgICBhdDogb3B0aW9ucy5hdCxcbiAgICAgICAgdm9pZHM6IG9wdGlvbnMudm9pZHMsXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydFRleHQoZWRpdG9yLCB0ZXh0LCBvcHRpb25zKVxuICAgIH1cblxuICAgIGVkaXRvci5tYXJrcyA9IG51bGxcbiAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgaXNCbG9jazogRWRpdG9ySW50ZXJmYWNlWydpc0Jsb2NrJ10gPSAoZWRpdG9yLCB2YWx1ZSkgPT4ge1xuICByZXR1cm4gIWVkaXRvci5pc0lubGluZSh2YWx1ZSlcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgaXNFZGdlOiBFZGl0b3JJbnRlcmZhY2VbJ2lzRWRnZSddID0gKGVkaXRvciwgcG9pbnQsIGF0KSA9PiB7XG4gIHJldHVybiBFZGl0b3IuaXNTdGFydChlZGl0b3IsIHBvaW50LCBhdCkgfHwgRWRpdG9yLmlzRW5kKGVkaXRvciwgcG9pbnQsIGF0KVxufVxuIiwgImltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcblxuZXhwb3J0IGNvbnN0IGlzRW1wdHk6IEVkaXRvckludGVyZmFjZVsnaXNFbXB0eSddID0gKGVkaXRvciwgZWxlbWVudCkgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuIH0gPSBlbGVtZW50XG4gIGNvbnN0IFtmaXJzdF0gPSBjaGlsZHJlblxuICByZXR1cm4gKFxuICAgIGNoaWxkcmVuLmxlbmd0aCA9PT0gMCB8fFxuICAgIChjaGlsZHJlbi5sZW5ndGggPT09IDEgJiZcbiAgICAgIFRleHQuaXNUZXh0KGZpcnN0KSAmJlxuICAgICAgZmlyc3QudGV4dCA9PT0gJycgJiZcbiAgICAgICFlZGl0b3IuaXNWb2lkKGVsZW1lbnQpKVxuICApXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wb2ludCdcblxuZXhwb3J0IGNvbnN0IGlzRW5kOiBFZGl0b3JJbnRlcmZhY2VbJ2lzRW5kJ10gPSAoZWRpdG9yLCBwb2ludCwgYXQpID0+IHtcbiAgY29uc3QgZW5kID0gRWRpdG9yLmVuZChlZGl0b3IsIGF0KVxuICByZXR1cm4gUG9pbnQuZXF1YWxzKHBvaW50LCBlbmQpXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBOT1JNQUxJWklORyB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcblxuZXhwb3J0IGNvbnN0IGlzTm9ybWFsaXppbmc6IEVkaXRvckludGVyZmFjZVsnaXNOb3JtYWxpemluZyddID0gZWRpdG9yID0+IHtcbiAgY29uc3QgaXNOb3JtYWxpemluZyA9IE5PUk1BTElaSU5HLmdldChlZGl0b3IpXG4gIHJldHVybiBpc05vcm1hbGl6aW5nID09PSB1bmRlZmluZWQgPyB0cnVlIDogaXNOb3JtYWxpemluZ1xufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcG9pbnQnXG5cbmV4cG9ydCBjb25zdCBpc1N0YXJ0OiBFZGl0b3JJbnRlcmZhY2VbJ2lzU3RhcnQnXSA9IChlZGl0b3IsIHBvaW50LCBhdCkgPT4ge1xuICAvLyBQRVJGOiBJZiB0aGUgb2Zmc2V0IGlzbid0IGAwYCB3ZSBrbm93IGl0J3Mgbm90IHRoZSBzdGFydC5cbiAgaWYgKHBvaW50Lm9mZnNldCAhPT0gMCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgY29uc3Qgc3RhcnQgPSBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBhdClcbiAgcmV0dXJuIFBvaW50LmVxdWFscyhwb2ludCwgc3RhcnQpXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGxhc3Q6IEVkaXRvckludGVyZmFjZVsnbGFzdCddID0gKGVkaXRvciwgYXQpID0+IHtcbiAgY29uc3QgcGF0aCA9IEVkaXRvci5wYXRoKGVkaXRvciwgYXQsIHsgZWRnZTogJ2VuZCcgfSlcbiAgcmV0dXJuIEVkaXRvci5ub2RlKGVkaXRvciwgcGF0aClcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcblxuZXhwb3J0IGNvbnN0IGxlYWY6IEVkaXRvckludGVyZmFjZVsnbGVhZiddID0gKGVkaXRvciwgYXQsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCBwYXRoID0gRWRpdG9yLnBhdGgoZWRpdG9yLCBhdCwgb3B0aW9ucylcbiAgY29uc3Qgbm9kZSA9IE5vZGUubGVhZihlZGl0b3IsIHBhdGgpXG4gIHJldHVybiBbbm9kZSwgcGF0aF1cbn1cbiIsICJpbXBvcnQgeyBOb2RlLCBOb2RlRW50cnkgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IsIEVkaXRvckxldmVsc09wdGlvbnMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5cbmV4cG9ydCBmdW5jdGlvbiogbGV2ZWxzPFQgZXh0ZW5kcyBOb2RlPihcbiAgZWRpdG9yOiBFZGl0b3IsXG4gIG9wdGlvbnM6IEVkaXRvckxldmVsc09wdGlvbnM8VD4gPSB7fVxuKTogR2VuZXJhdG9yPE5vZGVFbnRyeTxUPiwgdm9pZCwgdW5kZWZpbmVkPiB7XG4gIGNvbnN0IHsgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uLCByZXZlcnNlID0gZmFsc2UsIHZvaWRzID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgbGV0IHsgbWF0Y2ggfSA9IG9wdGlvbnNcblxuICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgIG1hdGNoID0gKCkgPT4gdHJ1ZVxuICB9XG5cbiAgaWYgKCFhdCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgbGV2ZWxzOiBOb2RlRW50cnk8VD5bXSA9IFtdXG4gIGNvbnN0IHBhdGggPSBFZGl0b3IucGF0aChlZGl0b3IsIGF0KVxuXG4gIGZvciAoY29uc3QgW24sIHBdIG9mIE5vZGUubGV2ZWxzKGVkaXRvciwgcGF0aCkpIHtcbiAgICBpZiAoIW1hdGNoKG4sIHApKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGxldmVscy5wdXNoKFtuLCBwXSBhcyBOb2RlRW50cnk8VD4pXG5cbiAgICBpZiAoIXZvaWRzICYmIEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBuKSkge1xuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAocmV2ZXJzZSkge1xuICAgIGxldmVscy5yZXZlcnNlKClcbiAgfVxuXG4gIHlpZWxkKiBsZXZlbHNcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgTm9kZUVudHJ5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzJ1xuXG5leHBvcnQgY29uc3QgbWFya3M6IEVkaXRvckludGVyZmFjZVsnbWFya3MnXSA9IChlZGl0b3IsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IG1hcmtzLCBzZWxlY3Rpb24gfSA9IGVkaXRvclxuXG4gIGlmICghc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBsZXQgeyBhbmNob3IsIGZvY3VzIH0gPSBzZWxlY3Rpb25cblxuICBpZiAobWFya3MpIHtcbiAgICByZXR1cm4gbWFya3NcbiAgfVxuXG4gIGlmIChSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICAvKipcbiAgICAgKiBDT01QQVQ6IE1ha2Ugc3VyZSBoYW5naW5nIHJhbmdlcyAoY2F1c2VkIGJ5IGRvdWJsZSBjbGlja2luZyBpbiBGaXJlZm94KVxuICAgICAqIGRvIG5vdCBhZHZlcnNlbHkgYWZmZWN0IHRoZSByZXR1cm5lZCBtYXJrcy5cbiAgICAgKi9cbiAgICBjb25zdCBpc0VuZCA9IEVkaXRvci5pc0VuZChlZGl0b3IsIGFuY2hvciwgYW5jaG9yLnBhdGgpXG4gICAgaWYgKGlzRW5kKSB7XG4gICAgICBjb25zdCBhZnRlciA9IEVkaXRvci5hZnRlcihlZGl0b3IsIGFuY2hvciBhcyBQb2ludClcbiAgICAgIGlmIChhZnRlcikge1xuICAgICAgICBhbmNob3IgPSBhZnRlclxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IFttYXRjaF0gPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogVGV4dC5pc1RleHQsXG4gICAgICBhdDoge1xuICAgICAgICBhbmNob3IsXG4gICAgICAgIGZvY3VzLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBjb25zdCBbbm9kZV0gPSBtYXRjaCBhcyBOb2RlRW50cnk8VGV4dD5cbiAgICAgIGNvbnN0IHsgdGV4dCwgLi4ucmVzdCB9ID0gbm9kZVxuICAgICAgcmV0dXJuIHJlc3RcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHt9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgeyBwYXRoIH0gPSBhbmNob3JcblxuICBsZXQgW25vZGVdID0gRWRpdG9yLmxlYWYoZWRpdG9yLCBwYXRoKVxuXG4gIGlmIChhbmNob3Iub2Zmc2V0ID09PSAwKSB7XG4gICAgY29uc3QgcHJldiA9IEVkaXRvci5wcmV2aW91cyhlZGl0b3IsIHsgYXQ6IHBhdGgsIG1hdGNoOiBUZXh0LmlzVGV4dCB9KVxuICAgIGNvbnN0IG1hcmtlZFZvaWQgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogbiA9PlxuICAgICAgICBFbGVtZW50LmlzRWxlbWVudChuKSAmJlxuICAgICAgICBFZGl0b3IuaXNWb2lkKGVkaXRvciwgbikgJiZcbiAgICAgICAgZWRpdG9yLm1hcmthYmxlVm9pZChuKSxcbiAgICB9KVxuICAgIGlmICghbWFya2VkVm9pZCkge1xuICAgICAgY29uc3QgYmxvY2sgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbiksXG4gICAgICB9KVxuXG4gICAgICBpZiAocHJldiAmJiBibG9jaykge1xuICAgICAgICBjb25zdCBbcHJldk5vZGUsIHByZXZQYXRoXSA9IHByZXZcbiAgICAgICAgY29uc3QgWywgYmxvY2tQYXRoXSA9IGJsb2NrXG5cbiAgICAgICAgaWYgKFBhdGguaXNBbmNlc3RvcihibG9ja1BhdGgsIHByZXZQYXRoKSkge1xuICAgICAgICAgIG5vZGUgPSBwcmV2Tm9kZSBhcyBUZXh0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCB7IHRleHQsIC4uLnJlc3QgfSA9IG5vZGVcbiAgcmV0dXJuIHJlc3Rcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgU3BhbiB9IGZyb20gJy4uL2ludGVyZmFjZXMvbG9jYXRpb24nXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuXG5leHBvcnQgY29uc3QgbmV4dDogRWRpdG9ySW50ZXJmYWNlWyduZXh0J10gPSAoZWRpdG9yLCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyBtb2RlID0gJ2xvd2VzdCcsIHZvaWRzID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgbGV0IHsgbWF0Y2gsIGF0ID0gZWRpdG9yLnNlbGVjdGlvbiB9ID0gb3B0aW9uc1xuXG4gIGlmICghYXQpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IHBvaW50QWZ0ZXJMb2NhdGlvbiA9IEVkaXRvci5hZnRlcihlZGl0b3IsIGF0LCB7IHZvaWRzIH0pXG5cbiAgaWYgKCFwb2ludEFmdGVyTG9jYXRpb24pIHJldHVyblxuXG4gIGNvbnN0IFssIHRvXSA9IEVkaXRvci5sYXN0KGVkaXRvciwgW10pXG5cbiAgY29uc3Qgc3BhbjogU3BhbiA9IFtwb2ludEFmdGVyTG9jYXRpb24ucGF0aCwgdG9dXG5cbiAgaWYgKFBhdGguaXNQYXRoKGF0KSAmJiBhdC5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBnZXQgdGhlIG5leHQgbm9kZSBmcm9tIHRoZSByb290IG5vZGUhYClcbiAgfVxuXG4gIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgaWYgKFBhdGguaXNQYXRoKGF0KSkge1xuICAgICAgY29uc3QgW3BhcmVudF0gPSBFZGl0b3IucGFyZW50KGVkaXRvciwgYXQpXG4gICAgICBtYXRjaCA9IG4gPT4gcGFyZW50LmNoaWxkcmVuLmluY2x1ZGVzKG4pXG4gICAgfSBlbHNlIHtcbiAgICAgIG1hdGNoID0gKCkgPT4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IFtuZXh0XSA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHsgYXQ6IHNwYW4sIG1hdGNoLCBtb2RlLCB2b2lkcyB9KVxuICByZXR1cm4gbmV4dFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuXG5leHBvcnQgY29uc3Qgbm9kZTogRWRpdG9ySW50ZXJmYWNlWydub2RlJ10gPSAoZWRpdG9yLCBhdCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHBhdGggPSBFZGl0b3IucGF0aChlZGl0b3IsIGF0LCBvcHRpb25zKVxuICBjb25zdCBub2RlID0gTm9kZS5nZXQoZWRpdG9yLCBwYXRoKVxuICByZXR1cm4gW25vZGUsIHBhdGhdXG59XG4iLCAiaW1wb3J0IHsgTm9kZSwgTm9kZUVudHJ5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JOb2Rlc09wdGlvbnMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFNwYW4gfSBmcm9tICcuLi9pbnRlcmZhY2VzL2xvY2F0aW9uJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuXG5leHBvcnQgZnVuY3Rpb24qIG5vZGVzPFQgZXh0ZW5kcyBOb2RlPihcbiAgZWRpdG9yOiBFZGl0b3IsXG4gIG9wdGlvbnM6IEVkaXRvck5vZGVzT3B0aW9uczxUPiA9IHt9XG4pOiBHZW5lcmF0b3I8Tm9kZUVudHJ5PFQ+LCB2b2lkLCB1bmRlZmluZWQ+IHtcbiAgY29uc3Qge1xuICAgIGF0ID0gZWRpdG9yLnNlbGVjdGlvbixcbiAgICBtb2RlID0gJ2FsbCcsXG4gICAgdW5pdmVyc2FsID0gZmFsc2UsXG4gICAgcmV2ZXJzZSA9IGZhbHNlLFxuICAgIHZvaWRzID0gZmFsc2UsXG4gICAgaWdub3JlTm9uU2VsZWN0YWJsZSA9IGZhbHNlLFxuICB9ID0gb3B0aW9uc1xuICBsZXQgeyBtYXRjaCB9ID0gb3B0aW9uc1xuXG4gIGlmICghbWF0Y2gpIHtcbiAgICBtYXRjaCA9ICgpID0+IHRydWVcbiAgfVxuXG4gIGlmICghYXQpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGxldCBmcm9tXG4gIGxldCB0b1xuXG4gIGlmIChTcGFuLmlzU3BhbihhdCkpIHtcbiAgICBmcm9tID0gYXRbMF1cbiAgICB0byA9IGF0WzFdXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZmlyc3QgPSBFZGl0b3IucGF0aChlZGl0b3IsIGF0LCB7IGVkZ2U6ICdzdGFydCcgfSlcbiAgICBjb25zdCBsYXN0ID0gRWRpdG9yLnBhdGgoZWRpdG9yLCBhdCwgeyBlZGdlOiAnZW5kJyB9KVxuICAgIGZyb20gPSByZXZlcnNlID8gbGFzdCA6IGZpcnN0XG4gICAgdG8gPSByZXZlcnNlID8gZmlyc3QgOiBsYXN0XG4gIH1cblxuICBjb25zdCBub2RlRW50cmllcyA9IE5vZGUubm9kZXMoZWRpdG9yLCB7XG4gICAgcmV2ZXJzZSxcbiAgICBmcm9tLFxuICAgIHRvLFxuICAgIHBhc3M6IChbbm9kZV0pID0+IHtcbiAgICAgIGlmICghRWxlbWVudC5pc0VsZW1lbnQobm9kZSkpIHJldHVybiBmYWxzZVxuICAgICAgaWYgKFxuICAgICAgICAhdm9pZHMgJiZcbiAgICAgICAgKEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBub2RlKSB8fCBFZGl0b3IuaXNFbGVtZW50UmVhZE9ubHkoZWRpdG9yLCBub2RlKSlcbiAgICAgIClcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIGlmIChpZ25vcmVOb25TZWxlY3RhYmxlICYmICFFZGl0b3IuaXNTZWxlY3RhYmxlKGVkaXRvciwgbm9kZSkpIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9LFxuICB9KVxuXG4gIGNvbnN0IG1hdGNoZXM6IE5vZGVFbnRyeTxUPltdID0gW11cbiAgbGV0IGhpdDogTm9kZUVudHJ5PFQ+IHwgdW5kZWZpbmVkXG5cbiAgZm9yIChjb25zdCBbbm9kZSwgcGF0aF0gb2Ygbm9kZUVudHJpZXMpIHtcbiAgICBpZiAoXG4gICAgICBpZ25vcmVOb25TZWxlY3RhYmxlICYmXG4gICAgICBFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJlxuICAgICAgIUVkaXRvci5pc1NlbGVjdGFibGUoZWRpdG9yLCBub2RlKVxuICAgICkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCBpc0xvd2VyID0gaGl0ICYmIFBhdGguY29tcGFyZShwYXRoLCBoaXRbMV0pID09PSAwXG5cbiAgICAvLyBJbiBoaWdoZXN0IG1vZGUgYW55IG5vZGUgbG93ZXIgdGhhbiB0aGUgbGFzdCBoaXQgaXMgbm90IGEgbWF0Y2guXG4gICAgaWYgKG1vZGUgPT09ICdoaWdoZXN0JyAmJiBpc0xvd2VyKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGlmICghbWF0Y2gobm9kZSwgcGF0aCkpIHtcbiAgICAgIC8vIElmIHdlJ3ZlIGFycml2ZWQgYXQgYSBsZWFmIHRleHQgbm9kZSB0aGF0IGlzIG5vdCBsb3dlciB0aGFuIHRoZSBsYXN0XG4gICAgICAvLyBoaXQsIHRoZW4gd2UndmUgZm91bmQgYSBicmFuY2ggdGhhdCBkb2Vzbid0IGluY2x1ZGUgYSBtYXRjaCwgd2hpY2hcbiAgICAgIC8vIG1lYW5zIHRoZSBtYXRjaCBpcyBub3QgdW5pdmVyc2FsLlxuICAgICAgaWYgKHVuaXZlcnNhbCAmJiAhaXNMb3dlciAmJiBUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUncyBhIG1hdGNoIGFuZCBpdCdzIGxvd2VyIHRoYW4gdGhlIGxhc3QsIHVwZGF0ZSB0aGUgaGl0LlxuICAgIGlmIChtb2RlID09PSAnbG93ZXN0JyAmJiBpc0xvd2VyKSB7XG4gICAgICBoaXQgPSBbbm9kZSwgcGF0aF0gYXMgTm9kZUVudHJ5PFQ+XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIC8vIEluIGxvd2VzdCBtb2RlIHdlIGVtaXQgdGhlIGxhc3QgaGl0LCBvbmNlIGl0J3MgZ3VhcmFudGVlZCBsb3dlc3QuXG4gICAgY29uc3QgZW1pdDogTm9kZUVudHJ5PFQ+IHwgdW5kZWZpbmVkID1cbiAgICAgIG1vZGUgPT09ICdsb3dlc3QnID8gaGl0IDogKFtub2RlLCBwYXRoXSBhcyBOb2RlRW50cnk8VD4pXG5cbiAgICBpZiAoZW1pdCkge1xuICAgICAgaWYgKHVuaXZlcnNhbCkge1xuICAgICAgICBtYXRjaGVzLnB1c2goZW1pdClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHlpZWxkIGVtaXRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBoaXQgPSBbbm9kZSwgcGF0aF0gYXMgTm9kZUVudHJ5PFQ+XG4gIH1cblxuICAvLyBTaW5jZSBsb3dlc3QgaXMgYWx3YXlzIGVtaXR0aW5nIG9uZSBiZWhpbmQsIGNhdGNoIHVwIGF0IHRoZSBlbmQuXG4gIGlmIChtb2RlID09PSAnbG93ZXN0JyAmJiBoaXQpIHtcbiAgICBpZiAodW5pdmVyc2FsKSB7XG4gICAgICBtYXRjaGVzLnB1c2goaGl0KVxuICAgIH0gZWxzZSB7XG4gICAgICB5aWVsZCBoaXRcbiAgICB9XG4gIH1cblxuICAvLyBVbml2ZXJzYWwgZGVmZXJzIHRvIGVuc3VyZSB0aGF0IHRoZSBtYXRjaCBvY2N1cnMgaW4gZXZlcnkgYnJhbmNoLCBzbyB3ZVxuICAvLyB5aWVsZCBhbGwgb2YgdGhlIG1hdGNoZXMgYWZ0ZXIgaXRlcmF0aW5nLlxuICBpZiAodW5pdmVyc2FsKSB7XG4gICAgeWllbGQqIG1hdGNoZXNcbiAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBESVJUWV9QQVRIX0tFWVMsIERJUlRZX1BBVEhTIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplOiBFZGl0b3JJbnRlcmZhY2VbJ25vcm1hbGl6ZSddID0gKFxuICBlZGl0b3IsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIGNvbnN0IHsgZm9yY2UgPSBmYWxzZSwgb3BlcmF0aW9uIH0gPSBvcHRpb25zXG4gIGNvbnN0IGdldERpcnR5UGF0aHMgPSAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICByZXR1cm4gRElSVFlfUEFUSFMuZ2V0KGVkaXRvcikgfHwgW11cbiAgfVxuXG4gIGNvbnN0IGdldERpcnR5UGF0aEtleXMgPSAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICByZXR1cm4gRElSVFlfUEFUSF9LRVlTLmdldChlZGl0b3IpIHx8IG5ldyBTZXQoKVxuICB9XG5cbiAgY29uc3QgcG9wRGlydHlQYXRoID0gKGVkaXRvcjogRWRpdG9yKTogUGF0aCA9PiB7XG4gICAgY29uc3QgcGF0aCA9IGdldERpcnR5UGF0aHMoZWRpdG9yKS5wb3AoKSFcbiAgICBjb25zdCBrZXkgPSBwYXRoLmpvaW4oJywnKVxuICAgIGdldERpcnR5UGF0aEtleXMoZWRpdG9yKS5kZWxldGUoa2V5KVxuICAgIHJldHVybiBwYXRoXG4gIH1cblxuICBpZiAoIUVkaXRvci5pc05vcm1hbGl6aW5nKGVkaXRvcikpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGlmIChmb3JjZSkge1xuICAgIGNvbnN0IGFsbFBhdGhzID0gQXJyYXkuZnJvbShOb2RlLm5vZGVzKGVkaXRvciksIChbLCBwXSkgPT4gcClcbiAgICBjb25zdCBhbGxQYXRoS2V5cyA9IG5ldyBTZXQoYWxsUGF0aHMubWFwKHAgPT4gcC5qb2luKCcsJykpKVxuICAgIERJUlRZX1BBVEhTLnNldChlZGl0b3IsIGFsbFBhdGhzKVxuICAgIERJUlRZX1BBVEhfS0VZUy5zZXQoZWRpdG9yLCBhbGxQYXRoS2V5cylcbiAgfVxuXG4gIGlmIChnZXREaXJ0eVBhdGhzKGVkaXRvcikubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIC8qXG4gICAgICBGaXggZGlydHkgZWxlbWVudHMgd2l0aCBubyBjaGlsZHJlbi5cbiAgICAgIGVkaXRvci5ub3JtYWxpemVOb2RlKCkgZG9lcyBmaXggdGhpcywgYnV0IHNvbWUgbm9ybWFsaXphdGlvbiBmaXhlcyBhbHNvIHJlcXVpcmUgaXQgdG8gd29yay5cbiAgICAgIFJ1bm5pbmcgYW4gaW5pdGlhbCBwYXNzIGF2b2lkcyB0aGUgY2F0Y2gtMjIgcmFjZSBjb25kaXRpb24uXG4gICAgKi9cbiAgICBmb3IgKGNvbnN0IGRpcnR5UGF0aCBvZiBnZXREaXJ0eVBhdGhzKGVkaXRvcikpIHtcbiAgICAgIGlmIChOb2RlLmhhcyhlZGl0b3IsIGRpcnR5UGF0aCkpIHtcbiAgICAgICAgY29uc3QgZW50cnkgPSBFZGl0b3Iubm9kZShlZGl0b3IsIGRpcnR5UGF0aClcbiAgICAgICAgY29uc3QgW25vZGUsIF9dID0gZW50cnlcblxuICAgICAgICAvKlxuICAgICAgICAgIFRoZSBkZWZhdWx0IG5vcm1hbGl6ZXIgaW5zZXJ0cyBhbiBlbXB0eSB0ZXh0IG5vZGUgaW4gdGhpcyBzY2VuYXJpbywgYnV0IGl0IGNhbiBiZSBjdXN0b21pc2VkLlxuICAgICAgICAgIFNvIHRoZXJlIGlzIHNvbWUgcmlzayBoZXJlLlxuXG4gICAgICAgICAgQXMgbG9uZyBhcyB0aGUgbm9ybWFsaXplciBvbmx5IGluc2VydHMgY2hpbGQgbm9kZXMgZm9yIHRoaXMgY2FzZSBpdCBpcyBzYWZlIHRvIGRvIGluIGFueSBvcmRlcjtcbiAgICAgICAgICBieSBkZWZpbml0aW9uIGFkZGluZyBjaGlsZHJlbiB0byBhbiBlbXB0eSBub2RlIGNhbid0IGNhdXNlIG90aGVyIHBhdGhzIHRvIGNoYW5nZS5cbiAgICAgICAgKi9cbiAgICAgICAgaWYgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUoZW50cnksIHsgb3BlcmF0aW9uIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZGlydHlQYXRocyA9IGdldERpcnR5UGF0aHMoZWRpdG9yKVxuICAgIGNvbnN0IGluaXRpYWxEaXJ0eVBhdGhzTGVuZ3RoID0gZGlydHlQYXRocy5sZW5ndGhcbiAgICBsZXQgaXRlcmF0aW9uID0gMFxuXG4gICAgd2hpbGUgKGRpcnR5UGF0aHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICBpZiAoXG4gICAgICAgICFlZGl0b3Iuc2hvdWxkTm9ybWFsaXplKHtcbiAgICAgICAgICBkaXJ0eVBhdGhzLFxuICAgICAgICAgIGl0ZXJhdGlvbixcbiAgICAgICAgICBpbml0aWFsRGlydHlQYXRoc0xlbmd0aCxcbiAgICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgIH0pXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRpcnR5UGF0aCA9IHBvcERpcnR5UGF0aChlZGl0b3IpXG5cbiAgICAgIC8vIElmIHRoZSBub2RlIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIHRyZWUsIGl0IGRvZXMgbm90IG5lZWQgdG8gYmUgbm9ybWFsaXplZC5cbiAgICAgIGlmIChOb2RlLmhhcyhlZGl0b3IsIGRpcnR5UGF0aCkpIHtcbiAgICAgICAgY29uc3QgZW50cnkgPSBFZGl0b3Iubm9kZShlZGl0b3IsIGRpcnR5UGF0aClcbiAgICAgICAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUoZW50cnksIHsgb3BlcmF0aW9uIH0pXG4gICAgICB9XG4gICAgICBpdGVyYXRpb24rK1xuICAgICAgZGlydHlQYXRocyA9IGdldERpcnR5UGF0aHMoZWRpdG9yKVxuICAgIH1cbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IEFuY2VzdG9yLCBOb2RlRW50cnkgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5cbmV4cG9ydCBjb25zdCBwYXJlbnQ6IEVkaXRvckludGVyZmFjZVsncGFyZW50J10gPSAoZWRpdG9yLCBhdCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHBhdGggPSBFZGl0b3IucGF0aChlZGl0b3IsIGF0LCBvcHRpb25zKVxuICBjb25zdCBwYXJlbnRQYXRoID0gUGF0aC5wYXJlbnQocGF0aClcbiAgY29uc3QgZW50cnkgPSBFZGl0b3Iubm9kZShlZGl0b3IsIHBhcmVudFBhdGgpXG4gIHJldHVybiBlbnRyeSBhcyBOb2RlRW50cnk8QW5jZXN0b3I+XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBhdGhSZWYgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgtcmVmJ1xuXG5leHBvcnQgY29uc3QgcGF0aFJlZjogRWRpdG9ySW50ZXJmYWNlWydwYXRoUmVmJ10gPSAoXG4gIGVkaXRvcixcbiAgcGF0aCxcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgY29uc3QgeyBhZmZpbml0eSA9ICdmb3J3YXJkJyB9ID0gb3B0aW9uc1xuICBjb25zdCByZWY6IFBhdGhSZWYgPSB7XG4gICAgY3VycmVudDogcGF0aCxcbiAgICBhZmZpbml0eSxcbiAgICB1bnJlZigpIHtcbiAgICAgIGNvbnN0IHsgY3VycmVudCB9ID0gcmVmXG4gICAgICBjb25zdCBwYXRoUmVmcyA9IEVkaXRvci5wYXRoUmVmcyhlZGl0b3IpXG4gICAgICBwYXRoUmVmcy5kZWxldGUocmVmKVxuICAgICAgcmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICByZXR1cm4gY3VycmVudFxuICAgIH0sXG4gIH1cblxuICBjb25zdCByZWZzID0gRWRpdG9yLnBhdGhSZWZzKGVkaXRvcilcbiAgcmVmcy5hZGQocmVmKVxuICByZXR1cm4gcmVmXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQQVRIX1JFRlMgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5cbmV4cG9ydCBjb25zdCBwYXRoUmVmczogRWRpdG9ySW50ZXJmYWNlWydwYXRoUmVmcyddID0gZWRpdG9yID0+IHtcbiAgbGV0IHJlZnMgPSBQQVRIX1JFRlMuZ2V0KGVkaXRvcilcblxuICBpZiAoIXJlZnMpIHtcbiAgICByZWZzID0gbmV3IFNldCgpXG4gICAgUEFUSF9SRUZTLnNldChlZGl0b3IsIHJlZnMpXG4gIH1cblxuICByZXR1cm4gcmVmc1xufVxuIiwgImltcG9ydCB7IEVkaXRvckludGVyZmFjZSwgTm9kZSwgUGF0aCwgUG9pbnQsIFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcydcblxuZXhwb3J0IGNvbnN0IHBhdGg6IEVkaXRvckludGVyZmFjZVsncGF0aCddID0gKGVkaXRvciwgYXQsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IGRlcHRoLCBlZGdlIH0gPSBvcHRpb25zXG5cbiAgaWYgKFBhdGguaXNQYXRoKGF0KSkge1xuICAgIGlmIChlZGdlID09PSAnc3RhcnQnKSB7XG4gICAgICBjb25zdCBbLCBmaXJzdFBhdGhdID0gTm9kZS5maXJzdChlZGl0b3IsIGF0KVxuICAgICAgYXQgPSBmaXJzdFBhdGhcbiAgICB9IGVsc2UgaWYgKGVkZ2UgPT09ICdlbmQnKSB7XG4gICAgICBjb25zdCBbLCBsYXN0UGF0aF0gPSBOb2RlLmxhc3QoZWRpdG9yLCBhdClcbiAgICAgIGF0ID0gbGFzdFBhdGhcbiAgICB9XG4gIH1cblxuICBpZiAoUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICBpZiAoZWRnZSA9PT0gJ3N0YXJ0Jykge1xuICAgICAgYXQgPSBSYW5nZS5zdGFydChhdClcbiAgICB9IGVsc2UgaWYgKGVkZ2UgPT09ICdlbmQnKSB7XG4gICAgICBhdCA9IFJhbmdlLmVuZChhdClcbiAgICB9IGVsc2Uge1xuICAgICAgYXQgPSBQYXRoLmNvbW1vbihhdC5hbmNob3IucGF0aCwgYXQuZm9jdXMucGF0aClcbiAgICB9XG4gIH1cblxuICBpZiAoUG9pbnQuaXNQb2ludChhdCkpIHtcbiAgICBhdCA9IGF0LnBhdGhcbiAgfVxuXG4gIGlmIChkZXB0aCAhPSBudWxsKSB7XG4gICAgYXQgPSBhdC5zbGljZSgwLCBkZXB0aClcbiAgfVxuXG4gIHJldHVybiBhdFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQb2ludFJlZiB9IGZyb20gJy4uL2ludGVyZmFjZXMvcG9pbnQtcmVmJ1xuXG5leHBvcnQgY29uc3QgcG9pbnRSZWY6IEVkaXRvckludGVyZmFjZVsncG9pbnRSZWYnXSA9IChcbiAgZWRpdG9yLFxuICBwb2ludCxcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgY29uc3QgeyBhZmZpbml0eSA9ICdmb3J3YXJkJyB9ID0gb3B0aW9uc1xuICBjb25zdCByZWY6IFBvaW50UmVmID0ge1xuICAgIGN1cnJlbnQ6IHBvaW50LFxuICAgIGFmZmluaXR5LFxuICAgIHVucmVmKCkge1xuICAgICAgY29uc3QgeyBjdXJyZW50IH0gPSByZWZcbiAgICAgIGNvbnN0IHBvaW50UmVmcyA9IEVkaXRvci5wb2ludFJlZnMoZWRpdG9yKVxuICAgICAgcG9pbnRSZWZzLmRlbGV0ZShyZWYpXG4gICAgICByZWYuY3VycmVudCA9IG51bGxcbiAgICAgIHJldHVybiBjdXJyZW50XG4gICAgfSxcbiAgfVxuXG4gIGNvbnN0IHJlZnMgPSBFZGl0b3IucG9pbnRSZWZzKGVkaXRvcilcbiAgcmVmcy5hZGQocmVmKVxuICByZXR1cm4gcmVmXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQT0lOVF9SRUZTIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuXG5leHBvcnQgY29uc3QgcG9pbnRSZWZzOiBFZGl0b3JJbnRlcmZhY2VbJ3BvaW50UmVmcyddID0gZWRpdG9yID0+IHtcbiAgbGV0IHJlZnMgPSBQT0lOVF9SRUZTLmdldChlZGl0b3IpXG5cbiAgaWYgKCFyZWZzKSB7XG4gICAgcmVmcyA9IG5ldyBTZXQoKVxuICAgIFBPSU5UX1JFRlMuc2V0KGVkaXRvciwgcmVmcylcbiAgfVxuXG4gIHJldHVybiByZWZzXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5cbmV4cG9ydCBjb25zdCBwb2ludDogRWRpdG9ySW50ZXJmYWNlWydwb2ludCddID0gKGVkaXRvciwgYXQsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IGVkZ2UgPSAnc3RhcnQnIH0gPSBvcHRpb25zXG5cbiAgaWYgKFBhdGguaXNQYXRoKGF0KSkge1xuICAgIGxldCBwYXRoXG5cbiAgICBpZiAoZWRnZSA9PT0gJ2VuZCcpIHtcbiAgICAgIGNvbnN0IFssIGxhc3RQYXRoXSA9IE5vZGUubGFzdChlZGl0b3IsIGF0KVxuICAgICAgcGF0aCA9IGxhc3RQYXRoXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IFssIGZpcnN0UGF0aF0gPSBOb2RlLmZpcnN0KGVkaXRvciwgYXQpXG4gICAgICBwYXRoID0gZmlyc3RQYXRoXG4gICAgfVxuXG4gICAgY29uc3Qgbm9kZSA9IE5vZGUuZ2V0KGVkaXRvciwgcGF0aClcblxuICAgIGlmICghVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgdGhlICR7ZWRnZX0gcG9pbnQgaW4gdGhlIG5vZGUgYXQgcGF0aCBbJHthdH1dIGJlY2F1c2UgaXQgaGFzIG5vICR7ZWRnZX0gdGV4dCBub2RlLmBcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4geyBwYXRoLCBvZmZzZXQ6IGVkZ2UgPT09ICdlbmQnID8gbm9kZS50ZXh0Lmxlbmd0aCA6IDAgfVxuICB9XG5cbiAgaWYgKFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXMoYXQpXG4gICAgcmV0dXJuIGVkZ2UgPT09ICdzdGFydCcgPyBzdGFydCA6IGVuZFxuICB9XG5cbiAgcmV0dXJuIGF0XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JQb3NpdGlvbnNPcHRpb25zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcG9pbnQnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQge1xuICBnZXRDaGFyYWN0ZXJEaXN0YW5jZSxcbiAgZ2V0V29yZERpc3RhbmNlLFxuICBzcGxpdEJ5Q2hhcmFjdGVyRGlzdGFuY2UsXG59IGZyb20gJy4uL3V0aWxzL3N0cmluZydcblxuZXhwb3J0IGZ1bmN0aW9uKiBwb3NpdGlvbnMoXG4gIGVkaXRvcjogRWRpdG9yLFxuICBvcHRpb25zOiBFZGl0b3JQb3NpdGlvbnNPcHRpb25zID0ge31cbik6IEdlbmVyYXRvcjxQb2ludCwgdm9pZCwgdW5kZWZpbmVkPiB7XG4gIGNvbnN0IHtcbiAgICBhdCA9IGVkaXRvci5zZWxlY3Rpb24sXG4gICAgdW5pdCA9ICdvZmZzZXQnLFxuICAgIHJldmVyc2UgPSBmYWxzZSxcbiAgICB2b2lkcyA9IGZhbHNlLFxuICAgIGlnbm9yZU5vblNlbGVjdGFibGUgPSBmYWxzZSxcbiAgfSA9IG9wdGlvbnNcblxuICBpZiAoIWF0KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvKipcbiAgICogQWxnb3JpdGhtIG5vdGVzOlxuICAgKlxuICAgKiBFYWNoIHN0ZXAgYGRpc3RhbmNlYCBpcyBkeW5hbWljIGRlcGVuZGluZyBvbiB0aGUgdW5kZXJseWluZyB0ZXh0XG4gICAqIGFuZCB0aGUgYHVuaXRgIHNwZWNpZmllZC4gIEVhY2ggc3RlcCwgZS5nLiwgYSBsaW5lIG9yIHdvcmQsIG1heVxuICAgKiBzcGFuIG11bHRpcGxlIHRleHQgbm9kZXMsIHNvIHdlIGl0ZXJhdGUgdGhyb3VnaCB0aGUgdGV4dCBib3RoIG9uXG4gICAqIHR3byBsZXZlbHMgaW4gc3RlcC1zeW5jOlxuICAgKlxuICAgKiBgbGVhZlRleHRgIHN0b3JlcyB0aGUgdGV4dCBvbiBhIHRleHQgbGVhZiBsZXZlbCwgYW5kIGlzIGFkdmFuY2VkXG4gICAqIHRocm91Z2ggdXNpbmcgdGhlIGNvdW50ZXJzIGBsZWFmVGV4dE9mZnNldGAgYW5kIGBsZWFmVGV4dFJlbWFpbmluZ2AuXG4gICAqXG4gICAqIGBibG9ja1RleHRgIHN0b3JlcyB0aGUgdGV4dCBvbiBhIGJsb2NrIGxldmVsLCBhbmQgaXMgc2hvcnRlbmVkXG4gICAqIGJ5IGBkaXN0YW5jZWAgZXZlcnkgdGltZSBpdCBpcyBhZHZhbmNlZC5cbiAgICpcbiAgICogV2Ugb25seSBtYWludGFpbiBhIHdpbmRvdyBvZiBvbmUgYmxvY2tUZXh0IGFuZCBvbmUgbGVhZlRleHQgYmVjYXVzZVxuICAgKiBhIGJsb2NrIG5vZGUgYWx3YXlzIGFwcGVhcnMgYmVmb3JlIGFsbCBvZiBpdHMgbGVhZiBub2Rlcy5cbiAgICovXG5cbiAgY29uc3QgcmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBhdClcbiAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXMocmFuZ2UpXG4gIGNvbnN0IGZpcnN0ID0gcmV2ZXJzZSA/IGVuZCA6IHN0YXJ0XG4gIGxldCBpc05ld0Jsb2NrID0gZmFsc2VcbiAgbGV0IGJsb2NrVGV4dCA9ICcnXG4gIGxldCBkaXN0YW5jZSA9IDAgLy8gRGlzdGFuY2UgZm9yIGxlYWZUZXh0IHRvIGNhdGNoIHVwIHRvIGJsb2NrVGV4dC5cbiAgbGV0IGxlYWZUZXh0UmVtYWluaW5nID0gMFxuICBsZXQgbGVhZlRleHRPZmZzZXQgPSAwXG5cbiAgLy8gSXRlcmF0ZSB0aHJvdWdoIGFsbCBub2RlcyBpbiByYW5nZSwgZ3JhYmJpbmcgZW50aXJlIHRleHR1YWwgY29udGVudFxuICAvLyBvZiBibG9jayBub2RlcyBpbiBibG9ja1RleHQsIGFuZCB0ZXh0IG5vZGVzIGluIGxlYWZUZXh0LlxuICAvLyBFeHBsb2l0cyB0aGUgZmFjdCB0aGF0IG5vZGVzIGFyZSBzZXF1ZW5jZWQgaW4gc3VjaCBhIHdheSB0aGF0IHdlIGZpcnN0XG4gIC8vIGVuY291bnRlciB0aGUgYmxvY2sgbm9kZSwgdGhlbiBhbGwgb2YgaXRzIHRleHQgbm9kZXMsIHNvIHdoZW4gaXRlcmF0aW5nXG4gIC8vIHRocm91Z2ggdGhlIGJsb2NrVGV4dCBhbmQgbGVhZlRleHQgd2UganVzdCBuZWVkIHRvIHJlbWVtYmVyIGEgd2luZG93IG9mXG4gIC8vIG9uZSBibG9jayBub2RlIGFuZCBsZWFmIG5vZGUsIHJlc3BlY3RpdmVseS5cbiAgZm9yIChjb25zdCBbbm9kZSwgcGF0aF0gb2YgRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgIGF0LFxuICAgIHJldmVyc2UsXG4gICAgdm9pZHMsXG4gICAgaWdub3JlTm9uU2VsZWN0YWJsZSxcbiAgfSkpIHtcbiAgICAvKlxuICAgICAqIEVMRU1FTlQgTk9ERSAtIFlpZWxkIHBvc2l0aW9uKHMpIGZvciB2b2lkcywgY29sbGVjdCBibG9ja1RleHQgZm9yIGJsb2Nrc1xuICAgICAqL1xuICAgIGlmIChFbGVtZW50LmlzRWxlbWVudChub2RlKSkge1xuICAgICAgLy8gVm9pZCBub2RlcyBhcmUgYSBzcGVjaWFsIGNhc2UsIHNvIGJ5IGRlZmF1bHQgd2Ugd2lsbCBhbHdheXNcbiAgICAgIC8vIHlpZWxkIHRoZWlyIGZpcnN0IHBvaW50LiBJZiB0aGUgYHZvaWRzYCBvcHRpb24gaXMgc2V0IHRvIHRydWUsXG4gICAgICAvLyB0aGVuIHdlIHdpbGwgaXRlcmF0ZSBvdmVyIHRoZWlyIGNvbnRlbnQuXG4gICAgICBpZiAoIXZvaWRzICYmIChlZGl0b3IuaXNWb2lkKG5vZGUpIHx8IGVkaXRvci5pc0VsZW1lbnRSZWFkT25seShub2RlKSkpIHtcbiAgICAgICAgeWllbGQgRWRpdG9yLnN0YXJ0KGVkaXRvciwgcGF0aClcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gSW5saW5lIGVsZW1lbnQgbm9kZXMgYXJlIGlnbm9yZWQgYXMgdGhleSBkb24ndCB0aGVtc2VsdmVzXG4gICAgICAvLyBjb250cmlidXRlIHRvIGBibG9ja1RleHRgIG9yIGBsZWFmVGV4dGAgLSB0aGVpciBwYXJlbnQgYW5kXG4gICAgICAvLyBjaGlsZHJlbiBkby5cbiAgICAgIGlmIChlZGl0b3IuaXNJbmxpbmUobm9kZSkpIGNvbnRpbnVlXG5cbiAgICAgIC8vIEJsb2NrIGVsZW1lbnQgbm9kZSAtIHNldCBgYmxvY2tUZXh0YCB0byBpdHMgdGV4dCBjb250ZW50LlxuICAgICAgaWYgKEVkaXRvci5oYXNJbmxpbmVzKGVkaXRvciwgbm9kZSkpIHtcbiAgICAgICAgLy8gV2UgYWx3YXlzIGV4aGF1c3QgYmxvY2sgbm9kZXMgYmVmb3JlIGVuY291bnRlcmluZyBhIG5ldyBvbmU6XG4gICAgICAgIC8vICAgY29uc29sZS5hc3NlcnQoYmxvY2tUZXh0ID09PSAnJyxcbiAgICAgICAgLy8gICAgIGBibG9ja1RleHQ9JyR7YmxvY2tUZXh0fScgLSBgK1xuICAgICAgICAvLyAgICAgYG5vdCBleGhhdXN0ZWQgYmVmb3JlIG5ldyBibG9jayBub2RlYCwgcGF0aClcblxuICAgICAgICAvLyBFbnN1cmUgcmFuZ2UgY29uc2lkZXJlZCBpcyBjYXBwZWQgdG8gYHJhbmdlYCwgaW4gdGhlXG4gICAgICAgIC8vIHN0YXJ0L2VuZCBlZGdlIGNhc2VzIHdoZXJlIGJsb2NrIGV4dGVuZHMgYmV5b25kIHJhbmdlLlxuICAgICAgICAvLyBFcXVpdmFsZW50IHRvIHRoaXMsIGJ1dCBwcmVzdW1hYmx5IG1vcmUgcGVyZm9ybWFudDpcbiAgICAgICAgLy8gICBibG9ja1JhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgLi4uRWRpdG9yLmVkZ2VzKGVkaXRvciwgcGF0aCkpXG4gICAgICAgIC8vICAgYmxvY2tSYW5nZSA9IFJhbmdlLmludGVyc2VjdGlvbihyYW5nZSwgYmxvY2tSYW5nZSkgLy8gaW50ZXJzZWN0XG4gICAgICAgIC8vICAgYmxvY2tUZXh0ID0gRWRpdG9yLnN0cmluZyhlZGl0b3IsIGJsb2NrUmFuZ2UsIHsgdm9pZHMgfSlcbiAgICAgICAgY29uc3QgZSA9IFBhdGguaXNBbmNlc3RvcihwYXRoLCBlbmQucGF0aClcbiAgICAgICAgICA/IGVuZFxuICAgICAgICAgIDogRWRpdG9yLmVuZChlZGl0b3IsIHBhdGgpXG4gICAgICAgIGNvbnN0IHMgPSBQYXRoLmlzQW5jZXN0b3IocGF0aCwgc3RhcnQucGF0aClcbiAgICAgICAgICA/IHN0YXJ0XG4gICAgICAgICAgOiBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBwYXRoKVxuXG4gICAgICAgIGJsb2NrVGV4dCA9IEVkaXRvci5zdHJpbmcoZWRpdG9yLCB7IGFuY2hvcjogcywgZm9jdXM6IGUgfSwgeyB2b2lkcyB9KVxuICAgICAgICBpc05ld0Jsb2NrID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogVEVYVCBMRUFGIE5PREUgLSBJdGVyYXRlIHRocm91Z2ggdGV4dCBjb250ZW50LCB5aWVsZGluZ1xuICAgICAqIHBvc2l0aW9ucyBldmVyeSBgZGlzdGFuY2VgIG9mZnNldCBhY2NvcmRpbmcgdG8gYHVuaXRgLlxuICAgICAqL1xuICAgIGlmIChUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgY29uc3QgaXNGaXJzdCA9IFBhdGguZXF1YWxzKHBhdGgsIGZpcnN0LnBhdGgpXG5cbiAgICAgIC8vIFByb29mIHRoYXQgd2UgYWx3YXlzIGV4aGF1c3QgdGV4dCBub2RlcyBiZWZvcmUgZW5jb3VudGVyaW5nIGEgbmV3IG9uZTpcbiAgICAgIC8vICAgY29uc29sZS5hc3NlcnQobGVhZlRleHRSZW1haW5pbmcgPD0gMCxcbiAgICAgIC8vICAgICBgbGVhZlRleHRSZW1haW5pbmc9JHtsZWFmVGV4dFJlbWFpbmluZ30gLSBgK1xuICAgICAgLy8gICAgIGBub3QgZXhoYXVzdGVkIGJlZm9yZSBuZXcgbGVhZiB0ZXh0IG5vZGVgLCBwYXRoKVxuXG4gICAgICAvLyBSZXNldCBgbGVhZlRleHRgIGNvdW50ZXJzIGZvciBuZXcgdGV4dCBub2RlLlxuICAgICAgaWYgKGlzRmlyc3QpIHtcbiAgICAgICAgbGVhZlRleHRSZW1haW5pbmcgPSByZXZlcnNlXG4gICAgICAgICAgPyBmaXJzdC5vZmZzZXRcbiAgICAgICAgICA6IG5vZGUudGV4dC5sZW5ndGggLSBmaXJzdC5vZmZzZXRcbiAgICAgICAgbGVhZlRleHRPZmZzZXQgPSBmaXJzdC5vZmZzZXQgLy8gV29ya3MgZm9yIHJldmVyc2UgdG9vLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGVhZlRleHRSZW1haW5pbmcgPSBub2RlLnRleHQubGVuZ3RoXG4gICAgICAgIGxlYWZUZXh0T2Zmc2V0ID0gcmV2ZXJzZSA/IGxlYWZUZXh0UmVtYWluaW5nIDogMFxuICAgICAgfVxuXG4gICAgICAvLyBZaWVsZCBwb3NpdGlvbiBhdCB0aGUgc3RhcnQgb2Ygbm9kZSAocG90ZW50aWFsbHkpLlxuICAgICAgaWYgKGlzRmlyc3QgfHwgaXNOZXdCbG9jayB8fCB1bml0ID09PSAnb2Zmc2V0Jykge1xuICAgICAgICB5aWVsZCB7IHBhdGgsIG9mZnNldDogbGVhZlRleHRPZmZzZXQgfVxuICAgICAgICBpc05ld0Jsb2NrID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgLy8gWWllbGQgcG9zaXRpb25zIGV2ZXJ5IChkeW5hbWljYWxseSBjYWxjdWxhdGVkKSBgZGlzdGFuY2VgIG9mZnNldC5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIC8vIElmIGBsZWFmVGV4dGAgaGFzIGNhdWdodCB1cCB3aXRoIGBibG9ja1RleHRgIChkaXN0YW5jZT0wKSxcbiAgICAgICAgLy8gYW5kIGlmIGJsb2NrVGV4dCBpcyBleGhhdXN0ZWQsIGJyZWFrIHRvIGdldCBhbm90aGVyIGJsb2NrIG5vZGUsXG4gICAgICAgIC8vIG90aGVyd2lzZSBhZHZhbmNlIGJsb2NrVGV4dCBmb3J3YXJkIGJ5IHRoZSBuZXcgYGRpc3RhbmNlYC5cbiAgICAgICAgaWYgKGRpc3RhbmNlID09PSAwKSB7XG4gICAgICAgICAgaWYgKGJsb2NrVGV4dCA9PT0gJycpIGJyZWFrXG4gICAgICAgICAgZGlzdGFuY2UgPSBjYWxjRGlzdGFuY2UoYmxvY2tUZXh0LCB1bml0LCByZXZlcnNlKVxuICAgICAgICAgIC8vIFNwbGl0IHRoZSBzdHJpbmcgYXQgdGhlIHByZXZpb3VzbHkgZm91bmQgZGlzdGFuY2UgYW5kIHVzZSB0aGVcbiAgICAgICAgICAvLyByZW1haW5pbmcgc3RyaW5nIGZvciB0aGUgbmV4dCBpdGVyYXRpb24uXG4gICAgICAgICAgYmxvY2tUZXh0ID0gc3BsaXRCeUNoYXJhY3RlckRpc3RhbmNlKGJsb2NrVGV4dCwgZGlzdGFuY2UsIHJldmVyc2UpWzFdXG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZHZhbmNlIGBsZWFmVGV4dGAgYnkgdGhlIGN1cnJlbnQgYGRpc3RhbmNlYC5cbiAgICAgICAgbGVhZlRleHRPZmZzZXQgPSByZXZlcnNlXG4gICAgICAgICAgPyBsZWFmVGV4dE9mZnNldCAtIGRpc3RhbmNlXG4gICAgICAgICAgOiBsZWFmVGV4dE9mZnNldCArIGRpc3RhbmNlXG4gICAgICAgIGxlYWZUZXh0UmVtYWluaW5nID0gbGVhZlRleHRSZW1haW5pbmcgLSBkaXN0YW5jZVxuXG4gICAgICAgIC8vIElmIGBsZWFmVGV4dGAgaXMgZXhoYXVzdGVkLCBicmVhayB0byBnZXQgYSBuZXcgbGVhZiBub2RlXG4gICAgICAgIC8vIGFuZCBzZXQgZGlzdGFuY2UgdG8gdGhlIG92ZXJmbG93IGFtb3VudCwgc28gd2UnbGwgKG1heWJlKVxuICAgICAgICAvLyBjYXRjaCB1cCB0byBibG9ja1RleHQgaW4gdGhlIG5leHQgbGVhZiB0ZXh0IG5vZGUuXG4gICAgICAgIGlmIChsZWFmVGV4dFJlbWFpbmluZyA8IDApIHtcbiAgICAgICAgICBkaXN0YW5jZSA9IC1sZWFmVGV4dFJlbWFpbmluZ1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdWNjZXNzZnVsbHkgd2Fsa2VkIGBkaXN0YW5jZWAgb2Zmc2V0cyB0aHJvdWdoIGBsZWFmVGV4dGBcbiAgICAgICAgLy8gdG8gY2F0Y2ggdXAgd2l0aCBgYmxvY2tUZXh0YCwgc28gd2UgY2FuIHJlc2V0IGBkaXN0YW5jZWBcbiAgICAgICAgLy8gYW5kIHlpZWxkIHRoaXMgcG9zaXRpb24gaW4gdGhpcyBub2RlLlxuICAgICAgICBkaXN0YW5jZSA9IDBcbiAgICAgICAgeWllbGQgeyBwYXRoLCBvZmZzZXQ6IGxlYWZUZXh0T2Zmc2V0IH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gUHJvb2YgdGhhdCB1cG9uIGNvbXBsZXRpb24sIHdlJ3ZlIGV4YWh1c3RlZCBib3RoIGxlYWYgYW5kIGJsb2NrIHRleHQ6XG4gIC8vICAgY29uc29sZS5hc3NlcnQobGVhZlRleHRSZW1haW5pbmcgPD0gMCwgXCJsZWFmVGV4dCB3YXNuJ3QgZXhoYXVzdGVkXCIpXG4gIC8vICAgY29uc29sZS5hc3NlcnQoYmxvY2tUZXh0ID09PSAnJywgXCJibG9ja1RleHQgd2Fzbid0IGV4aGF1c3RlZFwiKVxuXG4gIC8vIEhlbHBlcjpcbiAgLy8gUmV0dXJuIHRoZSBkaXN0YW5jZSBpbiBvZmZzZXRzIGZvciBhIHN0ZXAgb2Ygc2l6ZSBgdW5pdGAgb24gZ2l2ZW4gc3RyaW5nLlxuICBmdW5jdGlvbiBjYWxjRGlzdGFuY2UodGV4dDogc3RyaW5nLCB1bml0OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuKSB7XG4gICAgaWYgKHVuaXQgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICByZXR1cm4gZ2V0Q2hhcmFjdGVyRGlzdGFuY2UodGV4dCwgcmV2ZXJzZSlcbiAgICB9IGVsc2UgaWYgKHVuaXQgPT09ICd3b3JkJykge1xuICAgICAgcmV0dXJuIGdldFdvcmREaXN0YW5jZSh0ZXh0LCByZXZlcnNlKVxuICAgIH0gZWxzZSBpZiAodW5pdCA9PT0gJ2xpbmUnIHx8IHVuaXQgPT09ICdibG9jaycpIHtcbiAgICAgIHJldHVybiB0ZXh0Lmxlbmd0aFxuICAgIH1cbiAgICByZXR1cm4gMVxuICB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFNwYW4gfSBmcm9tICcuLi9pbnRlcmZhY2VzL2xvY2F0aW9uJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcblxuZXhwb3J0IGNvbnN0IHByZXZpb3VzOiBFZGl0b3JJbnRlcmZhY2VbJ3ByZXZpb3VzJ10gPSAoZWRpdG9yLCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyBtb2RlID0gJ2xvd2VzdCcsIHZvaWRzID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgbGV0IHsgbWF0Y2gsIGF0ID0gZWRpdG9yLnNlbGVjdGlvbiB9ID0gb3B0aW9uc1xuXG4gIGlmICghYXQpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IHBvaW50QmVmb3JlTG9jYXRpb24gPSBFZGl0b3IuYmVmb3JlKGVkaXRvciwgYXQsIHsgdm9pZHMgfSlcblxuICBpZiAoIXBvaW50QmVmb3JlTG9jYXRpb24pIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IFssIHRvXSA9IEVkaXRvci5maXJzdChlZGl0b3IsIFtdKVxuXG4gIC8vIFRoZSBzZWFyY2ggbG9jYXRpb24gaXMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIGRvY3VtZW50IHRvIHRoZSBwYXRoIG9mXG4gIC8vIHRoZSBwb2ludCBiZWZvcmUgdGhlIGxvY2F0aW9uIHBhc3NlZCBpblxuICBjb25zdCBzcGFuOiBTcGFuID0gW3BvaW50QmVmb3JlTG9jYXRpb24ucGF0aCwgdG9dXG5cbiAgaWYgKFBhdGguaXNQYXRoKGF0KSAmJiBhdC5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBnZXQgdGhlIHByZXZpb3VzIG5vZGUgZnJvbSB0aGUgcm9vdCBub2RlIWApXG4gIH1cblxuICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgIGlmIChQYXRoLmlzUGF0aChhdCkpIHtcbiAgICAgIGNvbnN0IFtwYXJlbnRdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIGF0KVxuICAgICAgbWF0Y2ggPSBuID0+IHBhcmVudC5jaGlsZHJlbi5pbmNsdWRlcyhuKVxuICAgIH0gZWxzZSB7XG4gICAgICBtYXRjaCA9ICgpID0+IHRydWVcbiAgICB9XG4gIH1cblxuICBjb25zdCBbcHJldmlvdXNdID0gRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgIHJldmVyc2U6IHRydWUsXG4gICAgYXQ6IHNwYW4sXG4gICAgbWF0Y2gsXG4gICAgbW9kZSxcbiAgICB2b2lkcyxcbiAgfSlcblxuICByZXR1cm4gcHJldmlvdXNcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUmFuZ2VSZWYgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlLXJlZidcblxuZXhwb3J0IGNvbnN0IHJhbmdlUmVmOiBFZGl0b3JJbnRlcmZhY2VbJ3JhbmdlUmVmJ10gPSAoXG4gIGVkaXRvcixcbiAgcmFuZ2UsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIGNvbnN0IHsgYWZmaW5pdHkgPSAnZm9yd2FyZCcgfSA9IG9wdGlvbnNcbiAgY29uc3QgcmVmOiBSYW5nZVJlZiA9IHtcbiAgICBjdXJyZW50OiByYW5nZSxcbiAgICBhZmZpbml0eSxcbiAgICB1bnJlZigpIHtcbiAgICAgIGNvbnN0IHsgY3VycmVudCB9ID0gcmVmXG4gICAgICBjb25zdCByYW5nZVJlZnMgPSBFZGl0b3IucmFuZ2VSZWZzKGVkaXRvcilcbiAgICAgIHJhbmdlUmVmcy5kZWxldGUocmVmKVxuICAgICAgcmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICByZXR1cm4gY3VycmVudFxuICAgIH0sXG4gIH1cblxuICBjb25zdCByZWZzID0gRWRpdG9yLnJhbmdlUmVmcyhlZGl0b3IpXG4gIHJlZnMuYWRkKHJlZilcbiAgcmV0dXJuIHJlZlxufVxuIiwgImltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUkFOR0VfUkVGUyB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcblxuZXhwb3J0IGNvbnN0IHJhbmdlUmVmczogRWRpdG9ySW50ZXJmYWNlWydyYW5nZVJlZnMnXSA9IGVkaXRvciA9PiB7XG4gIGxldCByZWZzID0gUkFOR0VfUkVGUy5nZXQoZWRpdG9yKVxuXG4gIGlmICghcmVmcykge1xuICAgIHJlZnMgPSBuZXcgU2V0KClcbiAgICBSQU5HRV9SRUZTLnNldChlZGl0b3IsIHJlZnMpXG4gIH1cblxuICByZXR1cm4gcmVmc1xufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5cbmV4cG9ydCBjb25zdCByYW5nZTogRWRpdG9ySW50ZXJmYWNlWydyYW5nZSddID0gKGVkaXRvciwgYXQsIHRvKSA9PiB7XG4gIGlmIChSYW5nZS5pc1JhbmdlKGF0KSAmJiAhdG8pIHtcbiAgICByZXR1cm4gYXRcbiAgfVxuXG4gIGNvbnN0IHN0YXJ0ID0gRWRpdG9yLnN0YXJ0KGVkaXRvciwgYXQpXG4gIGNvbnN0IGVuZCA9IEVkaXRvci5lbmQoZWRpdG9yLCB0byB8fCBhdClcbiAgcmV0dXJuIHsgYW5jaG9yOiBzdGFydCwgZm9jdXM6IGVuZCB9XG59XG4iLCAiaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IEZMVVNISU5HIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IHJlbW92ZU1hcms6IEVkaXRvckludGVyZmFjZVsncmVtb3ZlTWFyayddID0gKGVkaXRvciwga2V5KSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcblxuICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgY29uc3QgbWF0Y2ggPSAobm9kZTogTm9kZSwgcGF0aDogUGF0aCkgPT4ge1xuICAgICAgaWYgKCFUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2UgLy8gbWFya3MgY2FuIG9ubHkgYmUgYXBwbGllZCB0byB0ZXh0XG4gICAgICB9XG4gICAgICBjb25zdCBbcGFyZW50Tm9kZSwgcGFyZW50UGF0aF0gPSBFZGl0b3IucGFyZW50KGVkaXRvciwgcGF0aClcbiAgICAgIHJldHVybiAhZWRpdG9yLmlzVm9pZChwYXJlbnROb2RlKSB8fCBlZGl0b3IubWFya2FibGVWb2lkKHBhcmVudE5vZGUpXG4gICAgfVxuICAgIGNvbnN0IGV4cGFuZGVkU2VsZWN0aW9uID0gUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pXG4gICAgbGV0IG1hcmtBY2NlcHRpbmdWb2lkU2VsZWN0ZWQgPSBmYWxzZVxuICAgIGlmICghZXhwYW5kZWRTZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0IFtzZWxlY3RlZE5vZGUsIHNlbGVjdGVkUGF0aF0gPSBFZGl0b3Iubm9kZShlZGl0b3IsIHNlbGVjdGlvbilcbiAgICAgIGlmIChzZWxlY3RlZE5vZGUgJiYgbWF0Y2goc2VsZWN0ZWROb2RlLCBzZWxlY3RlZFBhdGgpKSB7XG4gICAgICAgIGNvbnN0IFtwYXJlbnROb2RlXSA9IEVkaXRvci5wYXJlbnQoZWRpdG9yLCBzZWxlY3RlZFBhdGgpXG4gICAgICAgIG1hcmtBY2NlcHRpbmdWb2lkU2VsZWN0ZWQgPVxuICAgICAgICAgIHBhcmVudE5vZGUgJiYgZWRpdG9yLm1hcmthYmxlVm9pZChwYXJlbnROb2RlKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXhwYW5kZWRTZWxlY3Rpb24gfHwgbWFya0FjY2VwdGluZ1ZvaWRTZWxlY3RlZCkge1xuICAgICAgVHJhbnNmb3Jtcy51bnNldE5vZGVzKGVkaXRvciwga2V5LCB7XG4gICAgICAgIG1hdGNoLFxuICAgICAgICBzcGxpdDogdHJ1ZSxcbiAgICAgICAgdm9pZHM6IHRydWUsXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtYXJrcyA9IHsgLi4uKEVkaXRvci5tYXJrcyhlZGl0b3IpIHx8IHt9KSB9XG4gICAgICBkZWxldGUgbWFya3NbPGtleW9mIE5vZGU+a2V5XVxuICAgICAgZWRpdG9yLm1hcmtzID0gbWFya3NcbiAgICAgIGlmICghRkxVU0hJTkcuZ2V0KGVkaXRvcikpIHtcbiAgICAgICAgZWRpdG9yLm9uQ2hhbmdlKClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IE5PUk1BTElaSU5HIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuXG5leHBvcnQgY29uc3Qgc2V0Tm9ybWFsaXppbmc6IEVkaXRvckludGVyZmFjZVsnc2V0Tm9ybWFsaXppbmcnXSA9IChcbiAgZWRpdG9yLFxuICBpc05vcm1hbGl6aW5nXG4pID0+IHtcbiAgTk9STUFMSVpJTkcuc2V0KGVkaXRvciwgaXNOb3JtYWxpemluZylcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3Qgc3RhcnQ6IEVkaXRvckludGVyZmFjZVsnc3RhcnQnXSA9IChlZGl0b3IsIGF0KSA9PiB7XG4gIHJldHVybiBFZGl0b3IucG9pbnQoZWRpdG9yLCBhdCwgeyBlZGdlOiAnc3RhcnQnIH0pXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuXG5leHBvcnQgY29uc3Qgc3RyaW5nOiBFZGl0b3JJbnRlcmZhY2VbJ3N0cmluZyddID0gKGVkaXRvciwgYXQsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IHZvaWRzID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgY29uc3QgcmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBhdClcbiAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXMocmFuZ2UpXG4gIGxldCB0ZXh0ID0gJydcblxuICBmb3IgKGNvbnN0IFtub2RlLCBwYXRoXSBvZiBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgYXQ6IHJhbmdlLFxuICAgIG1hdGNoOiBUZXh0LmlzVGV4dCxcbiAgICB2b2lkcyxcbiAgfSkpIHtcbiAgICBsZXQgdCA9IG5vZGUudGV4dFxuXG4gICAgaWYgKFBhdGguZXF1YWxzKHBhdGgsIGVuZC5wYXRoKSkge1xuICAgICAgdCA9IHQuc2xpY2UoMCwgZW5kLm9mZnNldClcbiAgICB9XG5cbiAgICBpZiAoUGF0aC5lcXVhbHMocGF0aCwgc3RhcnQucGF0aCkpIHtcbiAgICAgIHQgPSB0LnNsaWNlKHN0YXJ0Lm9mZnNldClcbiAgICB9XG5cbiAgICB0ZXh0ICs9IHRcbiAgfVxuXG4gIHJldHVybiB0ZXh0XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcblxuZXhwb3J0IGNvbnN0IHVuaGFuZ1JhbmdlOiBFZGl0b3JJbnRlcmZhY2VbJ3VuaGFuZ1JhbmdlJ10gPSAoXG4gIGVkaXRvcixcbiAgcmFuZ2UsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIGNvbnN0IHsgdm9pZHMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICBsZXQgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXMocmFuZ2UpXG5cbiAgLy8gUEVSRjogZXhpdCBlYXJseSBpZiB3ZSBjYW4gZ3VhcmFudGVlIHRoYXQgdGhlIHJhbmdlIGlzbid0IGhhbmdpbmcuXG4gIGlmIChcbiAgICBzdGFydC5vZmZzZXQgIT09IDAgfHxcbiAgICBlbmQub2Zmc2V0ICE9PSAwIHx8XG4gICAgUmFuZ2UuaXNDb2xsYXBzZWQocmFuZ2UpIHx8XG4gICAgUGF0aC5oYXNQcmV2aW91cyhlbmQucGF0aClcbiAgKSB7XG4gICAgcmV0dXJuIHJhbmdlXG4gIH1cblxuICBjb25zdCBlbmRCbG9jayA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICBhdDogZW5kLFxuICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbiksXG4gICAgdm9pZHMsXG4gIH0pXG4gIGNvbnN0IGJsb2NrUGF0aCA9IGVuZEJsb2NrID8gZW5kQmxvY2tbMV0gOiBbXVxuICBjb25zdCBmaXJzdCA9IEVkaXRvci5zdGFydChlZGl0b3IsIHN0YXJ0KVxuICBjb25zdCBiZWZvcmUgPSB7IGFuY2hvcjogZmlyc3QsIGZvY3VzOiBlbmQgfVxuICBsZXQgc2tpcCA9IHRydWVcblxuICBmb3IgKGNvbnN0IFtub2RlLCBwYXRoXSBvZiBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgYXQ6IGJlZm9yZSxcbiAgICBtYXRjaDogVGV4dC5pc1RleHQsXG4gICAgcmV2ZXJzZTogdHJ1ZSxcbiAgICB2b2lkcyxcbiAgfSkpIHtcbiAgICBpZiAoc2tpcCkge1xuICAgICAgc2tpcCA9IGZhbHNlXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGlmIChub2RlLnRleHQgIT09ICcnIHx8IFBhdGguaXNCZWZvcmUocGF0aCwgYmxvY2tQYXRoKSkge1xuICAgICAgZW5kID0geyBwYXRoLCBvZmZzZXQ6IG5vZGUudGV4dC5sZW5ndGggfVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICByZXR1cm4geyBhbmNob3I6IHN0YXJ0LCBmb2N1czogZW5kIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3Qgd2l0aG91dE5vcm1hbGl6aW5nOiBFZGl0b3JJbnRlcmZhY2VbJ3dpdGhvdXROb3JtYWxpemluZyddID0gKFxuICBlZGl0b3IsXG4gIGZuXG4pID0+IHtcbiAgY29uc3QgdmFsdWUgPSBFZGl0b3IuaXNOb3JtYWxpemluZyhlZGl0b3IpXG4gIEVkaXRvci5zZXROb3JtYWxpemluZyhlZGl0b3IsIGZhbHNlKVxuICB0cnkge1xuICAgIGZuKClcbiAgfSBmaW5hbGx5IHtcbiAgICBFZGl0b3Iuc2V0Tm9ybWFsaXppbmcoZWRpdG9yLCB2YWx1ZSlcbiAgfVxuICBFZGl0b3Iubm9ybWFsaXplKGVkaXRvcilcbn1cbiIsICJpbXBvcnQgeyBUZXh0VHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy90ZXh0J1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcG9pbnQnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBOb2RlRW50cnkgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5cbmV4cG9ydCBjb25zdCBkZWxldGVUZXh0OiBUZXh0VHJhbnNmb3Jtc1snZGVsZXRlJ10gPSAoZWRpdG9yLCBvcHRpb25zID0ge30pID0+IHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICByZXZlcnNlID0gZmFsc2UsXG4gICAgICB1bml0ID0gJ2NoYXJhY3RlcicsXG4gICAgICBkaXN0YW5jZSA9IDEsXG4gICAgICB2b2lkcyA9IGZhbHNlLFxuICAgIH0gPSBvcHRpb25zXG4gICAgbGV0IHsgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uLCBoYW5naW5nID0gZmFsc2UgfSA9IG9wdGlvbnNcblxuICAgIGlmICghYXQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCBpc0NvbGxhcHNlZCA9IGZhbHNlXG4gICAgaWYgKFJhbmdlLmlzUmFuZ2UoYXQpICYmIFJhbmdlLmlzQ29sbGFwc2VkKGF0KSkge1xuICAgICAgaXNDb2xsYXBzZWQgPSB0cnVlXG4gICAgICBhdCA9IGF0LmFuY2hvclxuICAgIH1cblxuICAgIGlmIChQb2ludC5pc1BvaW50KGF0KSkge1xuICAgICAgY29uc3QgZnVydGhlc3RWb2lkID0gRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0LCBtb2RlOiAnaGlnaGVzdCcgfSlcblxuICAgICAgaWYgKCF2b2lkcyAmJiBmdXJ0aGVzdFZvaWQpIHtcbiAgICAgICAgY29uc3QgWywgdm9pZFBhdGhdID0gZnVydGhlc3RWb2lkXG4gICAgICAgIGF0ID0gdm9pZFBhdGhcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG9wdHMgPSB7IHVuaXQsIGRpc3RhbmNlIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gcmV2ZXJzZVxuICAgICAgICAgID8gRWRpdG9yLmJlZm9yZShlZGl0b3IsIGF0LCBvcHRzKSB8fCBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBbXSlcbiAgICAgICAgICA6IEVkaXRvci5hZnRlcihlZGl0b3IsIGF0LCBvcHRzKSB8fCBFZGl0b3IuZW5kKGVkaXRvciwgW10pXG4gICAgICAgIGF0ID0geyBhbmNob3I6IGF0LCBmb2N1czogdGFyZ2V0IH1cbiAgICAgICAgaGFuZ2luZyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoUGF0aC5pc1BhdGgoYXQpKSB7XG4gICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwgeyBhdCwgdm9pZHMgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChSYW5nZS5pc0NvbGxhcHNlZChhdCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICghaGFuZ2luZykge1xuICAgICAgY29uc3QgWywgZW5kXSA9IFJhbmdlLmVkZ2VzKGF0KVxuICAgICAgY29uc3QgZW5kT2ZEb2MgPSBFZGl0b3IuZW5kKGVkaXRvciwgW10pXG5cbiAgICAgIGlmICghUG9pbnQuZXF1YWxzKGVuZCwgZW5kT2ZEb2MpKSB7XG4gICAgICAgIGF0ID0gRWRpdG9yLnVuaGFuZ1JhbmdlKGVkaXRvciwgYXQsIHsgdm9pZHMgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXMoYXQpXG4gICAgY29uc3Qgc3RhcnRCbG9jayA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbiksXG4gICAgICBhdDogc3RhcnQsXG4gICAgICB2b2lkcyxcbiAgICB9KVxuICAgIGNvbnN0IGVuZEJsb2NrID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKSxcbiAgICAgIGF0OiBlbmQsXG4gICAgICB2b2lkcyxcbiAgICB9KVxuICAgIGNvbnN0IGlzQWNyb3NzQmxvY2tzID1cbiAgICAgIHN0YXJ0QmxvY2sgJiYgZW5kQmxvY2sgJiYgIVBhdGguZXF1YWxzKHN0YXJ0QmxvY2tbMV0sIGVuZEJsb2NrWzFdKVxuICAgIGNvbnN0IGlzU2luZ2xlVGV4dCA9IFBhdGguZXF1YWxzKHN0YXJ0LnBhdGgsIGVuZC5wYXRoKVxuICAgIGNvbnN0IHN0YXJ0Tm9uRWRpdGFibGUgPSB2b2lkc1xuICAgICAgPyBudWxsXG4gICAgICA6IEVkaXRvci52b2lkKGVkaXRvciwgeyBhdDogc3RhcnQsIG1vZGU6ICdoaWdoZXN0JyB9KSA/P1xuICAgICAgICBFZGl0b3IuZWxlbWVudFJlYWRPbmx5KGVkaXRvciwgeyBhdDogc3RhcnQsIG1vZGU6ICdoaWdoZXN0JyB9KVxuICAgIGNvbnN0IGVuZE5vbkVkaXRhYmxlID0gdm9pZHNcbiAgICAgID8gbnVsbFxuICAgICAgOiBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQ6IGVuZCwgbW9kZTogJ2hpZ2hlc3QnIH0pID8/XG4gICAgICAgIEVkaXRvci5lbGVtZW50UmVhZE9ubHkoZWRpdG9yLCB7IGF0OiBlbmQsIG1vZGU6ICdoaWdoZXN0JyB9KVxuXG4gICAgLy8gSWYgdGhlIHN0YXJ0IG9yIGVuZCBwb2ludHMgYXJlIGluc2lkZSBhbiBpbmxpbmUgdm9pZCwgbnVkZ2UgdGhlbSBvdXQuXG4gICAgaWYgKHN0YXJ0Tm9uRWRpdGFibGUpIHtcbiAgICAgIGNvbnN0IGJlZm9yZSA9IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBzdGFydClcblxuICAgICAgaWYgKGJlZm9yZSAmJiBzdGFydEJsb2NrICYmIFBhdGguaXNBbmNlc3RvcihzdGFydEJsb2NrWzFdLCBiZWZvcmUucGF0aCkpIHtcbiAgICAgICAgc3RhcnQgPSBiZWZvcmVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZW5kTm9uRWRpdGFibGUpIHtcbiAgICAgIGNvbnN0IGFmdGVyID0gRWRpdG9yLmFmdGVyKGVkaXRvciwgZW5kKVxuXG4gICAgICBpZiAoYWZ0ZXIgJiYgZW5kQmxvY2sgJiYgUGF0aC5pc0FuY2VzdG9yKGVuZEJsb2NrWzFdLCBhZnRlci5wYXRoKSkge1xuICAgICAgICBlbmQgPSBhZnRlclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdldCB0aGUgaGlnaGVzdCBub2RlcyB0aGF0IGFyZSBjb21wbGV0ZWx5IGluc2lkZSB0aGUgcmFuZ2UsIGFzIHdlbGwgYXNcbiAgICAvLyB0aGUgc3RhcnQgYW5kIGVuZCBub2Rlcy5cbiAgICBjb25zdCBtYXRjaGVzOiBOb2RlRW50cnlbXSA9IFtdXG4gICAgbGV0IGxhc3RQYXRoOiBQYXRoIHwgdW5kZWZpbmVkXG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIEVkaXRvci5ub2RlcyhlZGl0b3IsIHsgYXQsIHZvaWRzIH0pKSB7XG4gICAgICBjb25zdCBbbm9kZSwgcGF0aF0gPSBlbnRyeVxuXG4gICAgICBpZiAobGFzdFBhdGggJiYgUGF0aC5jb21wYXJlKHBhdGgsIGxhc3RQYXRoKSA9PT0gMCkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgICghdm9pZHMgJiZcbiAgICAgICAgICBFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJlxuICAgICAgICAgIChFZGl0b3IuaXNWb2lkKGVkaXRvciwgbm9kZSkgfHxcbiAgICAgICAgICAgIEVkaXRvci5pc0VsZW1lbnRSZWFkT25seShlZGl0b3IsIG5vZGUpKSkgfHxcbiAgICAgICAgKCFQYXRoLmlzQ29tbW9uKHBhdGgsIHN0YXJ0LnBhdGgpICYmICFQYXRoLmlzQ29tbW9uKHBhdGgsIGVuZC5wYXRoKSlcbiAgICAgICkge1xuICAgICAgICBtYXRjaGVzLnB1c2goZW50cnkpXG4gICAgICAgIGxhc3RQYXRoID0gcGF0aFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHBhdGhSZWZzID0gQXJyYXkuZnJvbShtYXRjaGVzLCAoWywgcF0pID0+IEVkaXRvci5wYXRoUmVmKGVkaXRvciwgcCkpXG4gICAgY29uc3Qgc3RhcnRSZWYgPSBFZGl0b3IucG9pbnRSZWYoZWRpdG9yLCBzdGFydClcbiAgICBjb25zdCBlbmRSZWYgPSBFZGl0b3IucG9pbnRSZWYoZWRpdG9yLCBlbmQpXG5cbiAgICBsZXQgcmVtb3ZlZFRleHQgPSAnJ1xuXG4gICAgaWYgKCFpc1NpbmdsZVRleHQgJiYgIXN0YXJ0Tm9uRWRpdGFibGUpIHtcbiAgICAgIGNvbnN0IHBvaW50ID0gc3RhcnRSZWYuY3VycmVudCFcbiAgICAgIGNvbnN0IFtub2RlXSA9IEVkaXRvci5sZWFmKGVkaXRvciwgcG9pbnQpXG4gICAgICBjb25zdCB7IHBhdGggfSA9IHBvaW50XG4gICAgICBjb25zdCB7IG9mZnNldCB9ID0gc3RhcnRcbiAgICAgIGNvbnN0IHRleHQgPSBub2RlLnRleHQuc2xpY2Uob2Zmc2V0KVxuICAgICAgaWYgKHRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICBlZGl0b3IuYXBwbHkoeyB0eXBlOiAncmVtb3ZlX3RleHQnLCBwYXRoLCBvZmZzZXQsIHRleHQgfSlcbiAgICAgICAgcmVtb3ZlZFRleHQgPSB0ZXh0XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGF0aFJlZnNcbiAgICAgIC5yZXZlcnNlKClcbiAgICAgIC5tYXAociA9PiByLnVucmVmKCkpXG4gICAgICAuZmlsdGVyKChyKTogciBpcyBQYXRoID0+IHIgIT09IG51bGwpXG4gICAgICAuZm9yRWFjaChwID0+IFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7IGF0OiBwLCB2b2lkcyB9KSlcblxuICAgIGlmICghZW5kTm9uRWRpdGFibGUpIHtcbiAgICAgIGNvbnN0IHBvaW50ID0gZW5kUmVmLmN1cnJlbnQhXG4gICAgICBjb25zdCBbbm9kZV0gPSBFZGl0b3IubGVhZihlZGl0b3IsIHBvaW50KVxuICAgICAgY29uc3QgeyBwYXRoIH0gPSBwb2ludFxuICAgICAgY29uc3Qgb2Zmc2V0ID0gaXNTaW5nbGVUZXh0ID8gc3RhcnQub2Zmc2V0IDogMFxuICAgICAgY29uc3QgdGV4dCA9IG5vZGUudGV4dC5zbGljZShvZmZzZXQsIGVuZC5vZmZzZXQpXG4gICAgICBpZiAodGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGVkaXRvci5hcHBseSh7IHR5cGU6ICdyZW1vdmVfdGV4dCcsIHBhdGgsIG9mZnNldCwgdGV4dCB9KVxuICAgICAgICByZW1vdmVkVGV4dCA9IHRleHRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWlzU2luZ2xlVGV4dCAmJiBpc0Fjcm9zc0Jsb2NrcyAmJiBlbmRSZWYuY3VycmVudCAmJiBzdGFydFJlZi5jdXJyZW50KSB7XG4gICAgICBUcmFuc2Zvcm1zLm1lcmdlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiBlbmRSZWYuY3VycmVudCxcbiAgICAgICAgaGFuZ2luZzogdHJ1ZSxcbiAgICAgICAgdm9pZHMsXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIEZvciBUaGFpIHNjcmlwdCwgZGVsZXRpbmcgTiBjaGFyYWN0ZXIocykgYmFja3dhcmQgc2hvdWxkIGRlbGV0ZVxuICAgIC8vIE4gY29kZSBwb2ludChzKSBpbnN0ZWFkIG9mIGFuIGVudGlyZSBncmFwaGVtZSBjbHVzdGVyLlxuICAgIC8vIFRoZXJlZm9yZSwgdGhlIHJlbWFpbmluZyBjb2RlIHBvaW50cyBzaG91bGQgYmUgaW5zZXJ0ZWQgYmFjay5cbiAgICBpZiAoXG4gICAgICBpc0NvbGxhcHNlZCAmJlxuICAgICAgcmV2ZXJzZSAmJlxuICAgICAgdW5pdCA9PT0gJ2NoYXJhY3RlcicgJiZcbiAgICAgIHJlbW92ZWRUZXh0Lmxlbmd0aCA+IDEgJiZcbiAgICAgIHJlbW92ZWRUZXh0Lm1hdGNoKC9bXFx1MEUwMC1cXHUwRTdGXSsvKVxuICAgICkge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnRUZXh0KFxuICAgICAgICBlZGl0b3IsXG4gICAgICAgIHJlbW92ZWRUZXh0LnNsaWNlKDAsIHJlbW92ZWRUZXh0Lmxlbmd0aCAtIGRpc3RhbmNlKVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0VW5yZWYgPSBzdGFydFJlZi51bnJlZigpXG4gICAgY29uc3QgZW5kVW5yZWYgPSBlbmRSZWYudW5yZWYoKVxuICAgIGNvbnN0IHBvaW50ID0gcmV2ZXJzZSA/IHN0YXJ0VW5yZWYgfHwgZW5kVW5yZWYgOiBlbmRVbnJlZiB8fCBzdGFydFVucmVmXG5cbiAgICBpZiAob3B0aW9ucy5hdCA9PSBudWxsICYmIHBvaW50KSB7XG4gICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHBvaW50KVxuICAgIH1cbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IE5vZGUsIE5vZGVFbnRyeSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBUZXh0VHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy90ZXh0J1xuaW1wb3J0IHsgZ2V0RGVmYXVsdEluc2VydExvY2F0aW9uIH0gZnJvbSAnLi4vdXRpbHMnXG5cbmV4cG9ydCBjb25zdCBpbnNlcnRGcmFnbWVudDogVGV4dFRyYW5zZm9ybXNbJ2luc2VydEZyYWdtZW50J10gPSAoXG4gIGVkaXRvcixcbiAgZnJhZ21lbnQsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3QgeyBoYW5naW5nID0gZmFsc2UsIHZvaWRzID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICBsZXQgeyBhdCA9IGdldERlZmF1bHRJbnNlcnRMb2NhdGlvbihlZGl0b3IpIH0gPSBvcHRpb25zXG5cbiAgICBpZiAoIWZyYWdtZW50Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICBpZiAoIWhhbmdpbmcpIHtcbiAgICAgICAgYXQgPSBFZGl0b3IudW5oYW5nUmFuZ2UoZWRpdG9yLCBhdCwgeyB2b2lkcyB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoUmFuZ2UuaXNDb2xsYXBzZWQoYXQpKSB7XG4gICAgICAgIGF0ID0gYXQuYW5jaG9yXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBbLCBlbmRdID0gUmFuZ2UuZWRnZXMoYXQpXG5cbiAgICAgICAgaWYgKCF2b2lkcyAmJiBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQ6IGVuZCB9KSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcG9pbnRSZWYgPSBFZGl0b3IucG9pbnRSZWYoZWRpdG9yLCBlbmQpXG4gICAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwgeyBhdCB9KVxuICAgICAgICBhdCA9IHBvaW50UmVmLnVucmVmKCkhXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChQYXRoLmlzUGF0aChhdCkpIHtcbiAgICAgIGF0ID0gRWRpdG9yLnN0YXJ0KGVkaXRvciwgYXQpXG4gICAgfVxuXG4gICAgaWYgKCF2b2lkcyAmJiBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQgfSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIElmIHRoZSBpbnNlcnQgcG9pbnQgaXMgYXQgdGhlIGVkZ2Ugb2YgYW4gaW5saW5lIG5vZGUsIG1vdmUgaXQgb3V0c2lkZVxuICAgIC8vIGluc3RlYWQgc2luY2UgaXQgd2lsbCBuZWVkIHRvIGJlIHNwbGl0IG90aGVyd2lzZS5cbiAgICBjb25zdCBpbmxpbmVFbGVtZW50TWF0Y2ggPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICBhdCxcbiAgICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0lubGluZShlZGl0b3IsIG4pLFxuICAgICAgbW9kZTogJ2hpZ2hlc3QnLFxuICAgICAgdm9pZHMsXG4gICAgfSlcblxuICAgIGlmIChpbmxpbmVFbGVtZW50TWF0Y2gpIHtcbiAgICAgIGNvbnN0IFssIGlubGluZVBhdGhdID0gaW5saW5lRWxlbWVudE1hdGNoXG5cbiAgICAgIGlmIChFZGl0b3IuaXNFbmQoZWRpdG9yLCBhdCwgaW5saW5lUGF0aCkpIHtcbiAgICAgICAgY29uc3QgYWZ0ZXIgPSBFZGl0b3IuYWZ0ZXIoZWRpdG9yLCBpbmxpbmVQYXRoKSFcbiAgICAgICAgYXQgPSBhZnRlclxuICAgICAgfSBlbHNlIGlmIChFZGl0b3IuaXNTdGFydChlZGl0b3IsIGF0LCBpbmxpbmVQYXRoKSkge1xuICAgICAgICBjb25zdCBiZWZvcmUgPSBFZGl0b3IuYmVmb3JlKGVkaXRvciwgaW5saW5lUGF0aCkhXG4gICAgICAgIGF0ID0gYmVmb3JlXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYmxvY2tNYXRjaCA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbiksXG4gICAgICBhdCxcbiAgICAgIHZvaWRzLFxuICAgIH0pIVxuICAgIGNvbnN0IFssIGJsb2NrUGF0aF0gPSBibG9ja01hdGNoXG4gICAgY29uc3QgaXNCbG9ja1N0YXJ0ID0gRWRpdG9yLmlzU3RhcnQoZWRpdG9yLCBhdCwgYmxvY2tQYXRoKVxuICAgIGNvbnN0IGlzQmxvY2tFbmQgPSBFZGl0b3IuaXNFbmQoZWRpdG9yLCBhdCwgYmxvY2tQYXRoKVxuICAgIGNvbnN0IGlzQmxvY2tFbXB0eSA9IGlzQmxvY2tTdGFydCAmJiBpc0Jsb2NrRW5kXG4gICAgY29uc3QgbWVyZ2VTdGFydCA9ICFpc0Jsb2NrU3RhcnQgfHwgKGlzQmxvY2tTdGFydCAmJiBpc0Jsb2NrRW5kKVxuICAgIGNvbnN0IG1lcmdlRW5kID0gIWlzQmxvY2tFbmRcbiAgICBjb25zdCBbLCBmaXJzdFBhdGhdID0gTm9kZS5maXJzdCh7IGNoaWxkcmVuOiBmcmFnbWVudCB9LCBbXSlcbiAgICBjb25zdCBbLCBsYXN0UGF0aF0gPSBOb2RlLmxhc3QoeyBjaGlsZHJlbjogZnJhZ21lbnQgfSwgW10pXG5cbiAgICBjb25zdCBtYXRjaGVzOiBOb2RlRW50cnlbXSA9IFtdXG4gICAgY29uc3QgbWF0Y2hlciA9IChbbiwgcF06IE5vZGVFbnRyeSkgPT4ge1xuICAgICAgY29uc3QgaXNSb290ID0gcC5sZW5ndGggPT09IDBcbiAgICAgIGlmIChpc1Jvb3QpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmIChpc0Jsb2NrRW1wdHkpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBtZXJnZVN0YXJ0ICYmXG4gICAgICAgIFBhdGguaXNBbmNlc3RvcihwLCBmaXJzdFBhdGgpICYmXG4gICAgICAgIEVsZW1lbnQuaXNFbGVtZW50KG4pICYmXG4gICAgICAgICFlZGl0b3IuaXNWb2lkKG4pICYmXG4gICAgICAgICFlZGl0b3IuaXNJbmxpbmUobilcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBtZXJnZUVuZCAmJlxuICAgICAgICBQYXRoLmlzQW5jZXN0b3IocCwgbGFzdFBhdGgpICYmXG4gICAgICAgIEVsZW1lbnQuaXNFbGVtZW50KG4pICYmXG4gICAgICAgICFlZGl0b3IuaXNWb2lkKG4pICYmXG4gICAgICAgICFlZGl0b3IuaXNJbmxpbmUobilcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE5vZGUubm9kZXMoeyBjaGlsZHJlbjogZnJhZ21lbnQgfSwgeyBwYXNzOiBtYXRjaGVyIH0pKSB7XG4gICAgICBpZiAobWF0Y2hlcihlbnRyeSkpIHtcbiAgICAgICAgbWF0Y2hlcy5wdXNoKGVudHJ5KVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0cyA9IFtdXG4gICAgY29uc3QgbWlkZGxlcyA9IFtdXG4gICAgY29uc3QgZW5kcyA9IFtdXG4gICAgbGV0IHN0YXJ0aW5nID0gdHJ1ZVxuICAgIGxldCBoYXNCbG9ja3MgPSBmYWxzZVxuXG4gICAgZm9yIChjb25zdCBbbm9kZV0gb2YgbWF0Y2hlcykge1xuICAgICAgaWYgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmICFlZGl0b3IuaXNJbmxpbmUobm9kZSkpIHtcbiAgICAgICAgc3RhcnRpbmcgPSBmYWxzZVxuICAgICAgICBoYXNCbG9ja3MgPSB0cnVlXG4gICAgICAgIG1pZGRsZXMucHVzaChub2RlKVxuICAgICAgfSBlbHNlIGlmIChzdGFydGluZykge1xuICAgICAgICBzdGFydHMucHVzaChub2RlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW5kcy5wdXNoKG5vZGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgW2lubGluZU1hdGNoXSA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICAgIGF0LFxuICAgICAgbWF0Y2g6IG4gPT4gVGV4dC5pc1RleHQobikgfHwgRWRpdG9yLmlzSW5saW5lKGVkaXRvciwgbiksXG4gICAgICBtb2RlOiAnaGlnaGVzdCcsXG4gICAgICB2b2lkcyxcbiAgICB9KSFcblxuICAgIGNvbnN0IFssIGlubGluZVBhdGhdID0gaW5saW5lTWF0Y2hcbiAgICBjb25zdCBpc0lubGluZVN0YXJ0ID0gRWRpdG9yLmlzU3RhcnQoZWRpdG9yLCBhdCwgaW5saW5lUGF0aClcbiAgICBjb25zdCBpc0lubGluZUVuZCA9IEVkaXRvci5pc0VuZChlZGl0b3IsIGF0LCBpbmxpbmVQYXRoKVxuXG4gICAgY29uc3QgbWlkZGxlUmVmID0gRWRpdG9yLnBhdGhSZWYoXG4gICAgICBlZGl0b3IsXG4gICAgICBpc0Jsb2NrRW5kICYmICFlbmRzLmxlbmd0aCA/IFBhdGgubmV4dChibG9ja1BhdGgpIDogYmxvY2tQYXRoXG4gICAgKVxuXG4gICAgY29uc3QgZW5kUmVmID0gRWRpdG9yLnBhdGhSZWYoXG4gICAgICBlZGl0b3IsXG4gICAgICBpc0lubGluZUVuZCA/IFBhdGgubmV4dChpbmxpbmVQYXRoKSA6IGlubGluZVBhdGhcbiAgICApXG5cbiAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdCxcbiAgICAgIG1hdGNoOiBuID0+XG4gICAgICAgIGhhc0Jsb2Nrc1xuICAgICAgICAgID8gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICAgICAgICAgIDogVGV4dC5pc1RleHQobikgfHwgRWRpdG9yLmlzSW5saW5lKGVkaXRvciwgbiksXG4gICAgICBtb2RlOiBoYXNCbG9ja3MgPyAnbG93ZXN0JyA6ICdoaWdoZXN0JyxcbiAgICAgIGFsd2F5czpcbiAgICAgICAgaGFzQmxvY2tzICYmXG4gICAgICAgICghaXNCbG9ja1N0YXJ0IHx8IHN0YXJ0cy5sZW5ndGggPiAwKSAmJlxuICAgICAgICAoIWlzQmxvY2tFbmQgfHwgZW5kcy5sZW5ndGggPiAwKSxcbiAgICAgIHZvaWRzLFxuICAgIH0pXG5cbiAgICBjb25zdCBzdGFydFJlZiA9IEVkaXRvci5wYXRoUmVmKFxuICAgICAgZWRpdG9yLFxuICAgICAgIWlzSW5saW5lU3RhcnQgfHwgKGlzSW5saW5lU3RhcnQgJiYgaXNJbmxpbmVFbmQpXG4gICAgICAgID8gUGF0aC5uZXh0KGlubGluZVBhdGgpXG4gICAgICAgIDogaW5saW5lUGF0aFxuICAgIClcblxuICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBzdGFydHMsIHtcbiAgICAgIGF0OiBzdGFydFJlZi5jdXJyZW50ISxcbiAgICAgIG1hdGNoOiBuID0+IFRleHQuaXNUZXh0KG4pIHx8IEVkaXRvci5pc0lubGluZShlZGl0b3IsIG4pLFxuICAgICAgbW9kZTogJ2hpZ2hlc3QnLFxuICAgICAgdm9pZHMsXG4gICAgfSlcblxuICAgIGlmIChpc0Jsb2NrRW1wdHkgJiYgIXN0YXJ0cy5sZW5ndGggJiYgbWlkZGxlcy5sZW5ndGggJiYgIWVuZHMubGVuZ3RoKSB7XG4gICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHsgYXQ6IGJsb2NrUGF0aCwgdm9pZHMgfSlcbiAgICB9XG5cbiAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgbWlkZGxlcywge1xuICAgICAgYXQ6IG1pZGRsZVJlZi5jdXJyZW50ISxcbiAgICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbiksXG4gICAgICBtb2RlOiAnbG93ZXN0JyxcbiAgICAgIHZvaWRzLFxuICAgIH0pXG5cbiAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgZW5kcywge1xuICAgICAgYXQ6IGVuZFJlZi5jdXJyZW50ISxcbiAgICAgIG1hdGNoOiBuID0+IFRleHQuaXNUZXh0KG4pIHx8IEVkaXRvci5pc0lubGluZShlZGl0b3IsIG4pLFxuICAgICAgbW9kZTogJ2hpZ2hlc3QnLFxuICAgICAgdm9pZHMsXG4gICAgfSlcblxuICAgIGlmICghb3B0aW9ucy5hdCkge1xuICAgICAgbGV0IHBhdGhcblxuICAgICAgaWYgKGVuZHMubGVuZ3RoID4gMCAmJiBlbmRSZWYuY3VycmVudCkge1xuICAgICAgICBwYXRoID0gUGF0aC5wcmV2aW91cyhlbmRSZWYuY3VycmVudClcbiAgICAgIH0gZWxzZSBpZiAobWlkZGxlcy5sZW5ndGggPiAwICYmIG1pZGRsZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIHBhdGggPSBQYXRoLnByZXZpb3VzKG1pZGRsZVJlZi5jdXJyZW50KVxuICAgICAgfSBlbHNlIGlmIChzdGFydFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHBhdGggPSBQYXRoLnByZXZpb3VzKHN0YXJ0UmVmLmN1cnJlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgIGNvbnN0IGVuZCA9IEVkaXRvci5lbmQoZWRpdG9yLCBwYXRoKVxuICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIGVuZClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdGFydFJlZi51bnJlZigpXG4gICAgbWlkZGxlUmVmLnVucmVmKClcbiAgICBlbmRSZWYudW5yZWYoKVxuICB9KVxufVxuIiwgImltcG9ydCB7IFNlbGVjdGlvblRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvc2VsZWN0aW9uJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcblxuZXhwb3J0IGNvbnN0IGNvbGxhcHNlOiBTZWxlY3Rpb25UcmFuc2Zvcm1zWydjb2xsYXBzZSddID0gKFxuICBlZGl0b3IsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIGNvbnN0IHsgZWRnZSA9ICdhbmNob3InIH0gPSBvcHRpb25zXG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcblxuICBpZiAoIXNlbGVjdGlvbikge1xuICAgIHJldHVyblxuICB9IGVsc2UgaWYgKGVkZ2UgPT09ICdhbmNob3InKSB7XG4gICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBzZWxlY3Rpb24uYW5jaG9yKVxuICB9IGVsc2UgaWYgKGVkZ2UgPT09ICdmb2N1cycpIHtcbiAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHNlbGVjdGlvbi5mb2N1cylcbiAgfSBlbHNlIGlmIChlZGdlID09PSAnc3RhcnQnKSB7XG4gICAgY29uc3QgW3N0YXJ0XSA9IFJhbmdlLmVkZ2VzKHNlbGVjdGlvbilcbiAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHN0YXJ0KVxuICB9IGVsc2UgaWYgKGVkZ2UgPT09ICdlbmQnKSB7XG4gICAgY29uc3QgWywgZW5kXSA9IFJhbmdlLmVkZ2VzKHNlbGVjdGlvbilcbiAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIGVuZClcbiAgfVxufVxuIiwgImltcG9ydCB7IFNlbGVjdGlvblRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvc2VsZWN0aW9uJ1xuXG5leHBvcnQgY29uc3QgZGVzZWxlY3Q6IFNlbGVjdGlvblRyYW5zZm9ybXNbJ2Rlc2VsZWN0J10gPSBlZGl0b3IgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG5cbiAgaWYgKHNlbGVjdGlvbikge1xuICAgIGVkaXRvci5hcHBseSh7XG4gICAgICB0eXBlOiAnc2V0X3NlbGVjdGlvbicsXG4gICAgICBwcm9wZXJ0aWVzOiBzZWxlY3Rpb24sXG4gICAgICBuZXdQcm9wZXJ0aWVzOiBudWxsLFxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBTZWxlY3Rpb25UcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL3NlbGVjdGlvbidcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcblxuZXhwb3J0IGNvbnN0IG1vdmU6IFNlbGVjdGlvblRyYW5zZm9ybXNbJ21vdmUnXSA9IChlZGl0b3IsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gIGNvbnN0IHsgZGlzdGFuY2UgPSAxLCB1bml0ID0gJ2NoYXJhY3RlcicsIHJldmVyc2UgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICBsZXQgeyBlZGdlID0gbnVsbCB9ID0gb3B0aW9uc1xuXG4gIGlmICghc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAoZWRnZSA9PT0gJ3N0YXJ0Jykge1xuICAgIGVkZ2UgPSBSYW5nZS5pc0JhY2t3YXJkKHNlbGVjdGlvbikgPyAnZm9jdXMnIDogJ2FuY2hvcidcbiAgfVxuXG4gIGlmIChlZGdlID09PSAnZW5kJykge1xuICAgIGVkZ2UgPSBSYW5nZS5pc0JhY2t3YXJkKHNlbGVjdGlvbikgPyAnYW5jaG9yJyA6ICdmb2N1cydcbiAgfVxuXG4gIGNvbnN0IHsgYW5jaG9yLCBmb2N1cyB9ID0gc2VsZWN0aW9uXG4gIGNvbnN0IG9wdHMgPSB7IGRpc3RhbmNlLCB1bml0LCBpZ25vcmVOb25TZWxlY3RhYmxlOiB0cnVlIH1cbiAgY29uc3QgcHJvcHM6IFBhcnRpYWw8UmFuZ2U+ID0ge31cblxuICBpZiAoZWRnZSA9PSBudWxsIHx8IGVkZ2UgPT09ICdhbmNob3InKSB7XG4gICAgY29uc3QgcG9pbnQgPSByZXZlcnNlXG4gICAgICA/IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBhbmNob3IsIG9wdHMpXG4gICAgICA6IEVkaXRvci5hZnRlcihlZGl0b3IsIGFuY2hvciwgb3B0cylcblxuICAgIGlmIChwb2ludCkge1xuICAgICAgcHJvcHMuYW5jaG9yID0gcG9pbnRcbiAgICB9XG4gIH1cblxuICBpZiAoZWRnZSA9PSBudWxsIHx8IGVkZ2UgPT09ICdmb2N1cycpIHtcbiAgICBjb25zdCBwb2ludCA9IHJldmVyc2VcbiAgICAgID8gRWRpdG9yLmJlZm9yZShlZGl0b3IsIGZvY3VzLCBvcHRzKVxuICAgICAgOiBFZGl0b3IuYWZ0ZXIoZWRpdG9yLCBmb2N1cywgb3B0cylcblxuICAgIGlmIChwb2ludCkge1xuICAgICAgcHJvcHMuZm9jdXMgPSBwb2ludFxuICAgIH1cbiAgfVxuXG4gIFRyYW5zZm9ybXMuc2V0U2VsZWN0aW9uKGVkaXRvciwgcHJvcHMpXG59XG4iLCAiaW1wb3J0IHsgU2VsZWN0aW9uVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9zZWxlY3Rpb24nXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBTY3J1YmJlciB9IGZyb20gJy4uL2ludGVyZmFjZXMvc2NydWJiZXInXG5cbmV4cG9ydCBjb25zdCBzZWxlY3Q6IFNlbGVjdGlvblRyYW5zZm9ybXNbJ3NlbGVjdCddID0gKGVkaXRvciwgdGFyZ2V0KSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgdGFyZ2V0ID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgdGFyZ2V0KVxuXG4gIGlmIChzZWxlY3Rpb24pIHtcbiAgICBUcmFuc2Zvcm1zLnNldFNlbGVjdGlvbihlZGl0b3IsIHRhcmdldClcbiAgICByZXR1cm5cbiAgfVxuXG4gIGlmICghUmFuZ2UuaXNSYW5nZSh0YXJnZXQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFdoZW4gc2V0dGluZyB0aGUgc2VsZWN0aW9uIGFuZCB0aGUgY3VycmVudCBzZWxlY3Rpb24gaXMgXFxgbnVsbFxcYCB5b3UgbXVzdCBwcm92aWRlIGF0IGxlYXN0IGFuIFxcYGFuY2hvclxcYCBhbmQgXFxgZm9jdXNcXGAsIGJ1dCB5b3UgcGFzc2VkOiAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgdGFyZ2V0XG4gICAgICApfWBcbiAgICApXG4gIH1cblxuICBlZGl0b3IuYXBwbHkoe1xuICAgIHR5cGU6ICdzZXRfc2VsZWN0aW9uJyxcbiAgICBwcm9wZXJ0aWVzOiBzZWxlY3Rpb24sXG4gICAgbmV3UHJvcGVydGllczogdGFyZ2V0LFxuICB9KVxufVxuIiwgImltcG9ydCB7IFNlbGVjdGlvblRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvc2VsZWN0aW9uJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcblxuZXhwb3J0IGNvbnN0IHNldFBvaW50OiBTZWxlY3Rpb25UcmFuc2Zvcm1zWydzZXRQb2ludCddID0gKFxuICBlZGl0b3IsXG4gIHByb3BzLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gIGxldCB7IGVkZ2UgPSAnYm90aCcgfSA9IG9wdGlvbnNcblxuICBpZiAoIXNlbGVjdGlvbikge1xuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKGVkZ2UgPT09ICdzdGFydCcpIHtcbiAgICBlZGdlID0gUmFuZ2UuaXNCYWNrd2FyZChzZWxlY3Rpb24pID8gJ2ZvY3VzJyA6ICdhbmNob3InXG4gIH1cblxuICBpZiAoZWRnZSA9PT0gJ2VuZCcpIHtcbiAgICBlZGdlID0gUmFuZ2UuaXNCYWNrd2FyZChzZWxlY3Rpb24pID8gJ2FuY2hvcicgOiAnZm9jdXMnXG4gIH1cblxuICBjb25zdCB7IGFuY2hvciwgZm9jdXMgfSA9IHNlbGVjdGlvblxuICBjb25zdCBwb2ludCA9IGVkZ2UgPT09ICdhbmNob3InID8gYW5jaG9yIDogZm9jdXNcblxuICBUcmFuc2Zvcm1zLnNldFNlbGVjdGlvbihlZGl0b3IsIHtcbiAgICBbZWRnZSA9PT0gJ2FuY2hvcicgPyAnYW5jaG9yJyA6ICdmb2N1cyddOiB7IC4uLnBvaW50LCAuLi5wcm9wcyB9LFxuICB9KVxufVxuIiwgImltcG9ydCB7IFNlbGVjdGlvblRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvc2VsZWN0aW9uJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BvaW50J1xuXG5leHBvcnQgY29uc3Qgc2V0U2VsZWN0aW9uOiBTZWxlY3Rpb25UcmFuc2Zvcm1zWydzZXRTZWxlY3Rpb24nXSA9IChcbiAgZWRpdG9yLFxuICBwcm9wc1xuKSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgY29uc3Qgb2xkUHJvcHM6IFBhcnRpYWw8UmFuZ2U+IHwgbnVsbCA9IHt9XG4gIGNvbnN0IG5ld1Byb3BzOiBQYXJ0aWFsPFJhbmdlPiA9IHt9XG5cbiAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGZvciAoY29uc3QgayBpbiBwcm9wcykge1xuICAgIGlmIChcbiAgICAgIChrID09PSAnYW5jaG9yJyAmJlxuICAgICAgICBwcm9wcy5hbmNob3IgIT0gbnVsbCAmJlxuICAgICAgICAhUG9pbnQuZXF1YWxzKHByb3BzLmFuY2hvciwgc2VsZWN0aW9uLmFuY2hvcikpIHx8XG4gICAgICAoayA9PT0gJ2ZvY3VzJyAmJlxuICAgICAgICBwcm9wcy5mb2N1cyAhPSBudWxsICYmXG4gICAgICAgICFQb2ludC5lcXVhbHMocHJvcHMuZm9jdXMsIHNlbGVjdGlvbi5mb2N1cykpIHx8XG4gICAgICAoayAhPT0gJ2FuY2hvcicgJiZcbiAgICAgICAgayAhPT0gJ2ZvY3VzJyAmJlxuICAgICAgICBwcm9wc1s8a2V5b2YgUmFuZ2U+a10gIT09IHNlbGVjdGlvbls8a2V5b2YgUmFuZ2U+a10pXG4gICAgKSB7XG4gICAgICBvbGRQcm9wc1s8a2V5b2YgUmFuZ2U+a10gPSBzZWxlY3Rpb25bPGtleW9mIFJhbmdlPmtdXG4gICAgICBuZXdQcm9wc1s8a2V5b2YgUmFuZ2U+a10gPSBwcm9wc1s8a2V5b2YgUmFuZ2U+a11cbiAgICB9XG4gIH1cblxuICBpZiAoT2JqZWN0LmtleXMob2xkUHJvcHMpLmxlbmd0aCA+IDApIHtcbiAgICBlZGl0b3IuYXBwbHkoe1xuICAgICAgdHlwZTogJ3NldF9zZWxlY3Rpb24nLFxuICAgICAgcHJvcGVydGllczogb2xkUHJvcHMsXG4gICAgICBuZXdQcm9wZXJ0aWVzOiBuZXdQcm9wcyxcbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgTm9kZVRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcG9pbnQnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBnZXREZWZhdWx0SW5zZXJ0TG9jYXRpb24gfSBmcm9tICcuLi91dGlscydcblxuZXhwb3J0IGNvbnN0IGluc2VydE5vZGVzOiBOb2RlVHJhbnNmb3Jtc1snaW5zZXJ0Tm9kZXMnXSA9IChcbiAgZWRpdG9yLFxuICBub2RlcyxcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCB7IGhhbmdpbmcgPSBmYWxzZSwgdm9pZHMgPSBmYWxzZSwgbW9kZSA9ICdsb3dlc3QnIH0gPSBvcHRpb25zXG4gICAgbGV0IHsgYXQsIG1hdGNoLCBzZWxlY3QgfSA9IG9wdGlvbnNcblxuICAgIGlmIChOb2RlLmlzTm9kZShub2RlcykpIHtcbiAgICAgIG5vZGVzID0gW25vZGVzXVxuICAgIH1cblxuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IFtub2RlXSA9IG5vZGVzXG5cbiAgICBpZiAoIWF0KSB7XG4gICAgICBhdCA9IGdldERlZmF1bHRJbnNlcnRMb2NhdGlvbihlZGl0b3IpXG4gICAgICBpZiAoc2VsZWN0ICE9PSBmYWxzZSkge1xuICAgICAgICBzZWxlY3QgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdCA9PSBudWxsKSB7XG4gICAgICBzZWxlY3QgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmIChSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgaWYgKCFoYW5naW5nKSB7XG4gICAgICAgIGF0ID0gRWRpdG9yLnVuaGFuZ1JhbmdlKGVkaXRvciwgYXQsIHsgdm9pZHMgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKFJhbmdlLmlzQ29sbGFwc2VkKGF0KSkge1xuICAgICAgICBhdCA9IGF0LmFuY2hvclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgWywgZW5kXSA9IFJhbmdlLmVkZ2VzKGF0KVxuICAgICAgICBjb25zdCBwb2ludFJlZiA9IEVkaXRvci5wb2ludFJlZihlZGl0b3IsIGVuZClcbiAgICAgICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7IGF0IH0pXG4gICAgICAgIGF0ID0gcG9pbnRSZWYudW5yZWYoKSFcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoUG9pbnQuaXNQb2ludChhdCkpIHtcbiAgICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICAgIGlmIChUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgICAgIG1hdGNoID0gbiA9PiBUZXh0LmlzVGV4dChuKVxuICAgICAgICB9IGVsc2UgaWYgKGVkaXRvci5pc0lubGluZShub2RlKSkge1xuICAgICAgICAgIG1hdGNoID0gbiA9PiBUZXh0LmlzVGV4dChuKSB8fCBFZGl0b3IuaXNJbmxpbmUoZWRpdG9yLCBuKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hdGNoID0gbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgW2VudHJ5XSA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IGF0LnBhdGgsXG4gICAgICAgIG1hdGNoLFxuICAgICAgICBtb2RlLFxuICAgICAgICB2b2lkcyxcbiAgICAgIH0pXG5cbiAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICBjb25zdCBbLCBtYXRjaFBhdGhdID0gZW50cnlcbiAgICAgICAgY29uc3QgcGF0aFJlZiA9IEVkaXRvci5wYXRoUmVmKGVkaXRvciwgbWF0Y2hQYXRoKVxuICAgICAgICBjb25zdCBpc0F0RW5kID0gRWRpdG9yLmlzRW5kKGVkaXRvciwgYXQsIG1hdGNoUGF0aClcbiAgICAgICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGVkaXRvciwgeyBhdCwgbWF0Y2gsIG1vZGUsIHZvaWRzIH0pXG4gICAgICAgIGNvbnN0IHBhdGggPSBwYXRoUmVmLnVucmVmKCkhXG4gICAgICAgIGF0ID0gaXNBdEVuZCA/IFBhdGgubmV4dChwYXRoKSA6IHBhdGhcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHBhcmVudFBhdGggPSBQYXRoLnBhcmVudChhdClcbiAgICBsZXQgaW5kZXggPSBhdFthdC5sZW5ndGggLSAxXVxuXG4gICAgaWYgKCF2b2lkcyAmJiBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQ6IHBhcmVudFBhdGggfSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBub2Rlcykge1xuICAgICAgY29uc3QgcGF0aCA9IHBhcmVudFBhdGguY29uY2F0KGluZGV4KVxuICAgICAgaW5kZXgrK1xuICAgICAgZWRpdG9yLmFwcGx5KHsgdHlwZTogJ2luc2VydF9ub2RlJywgcGF0aCwgbm9kZSB9KVxuICAgICAgYXQgPSBQYXRoLm5leHQoYXQpXG4gICAgfVxuICAgIGF0ID0gUGF0aC5wcmV2aW91cyhhdClcblxuICAgIGlmIChzZWxlY3QpIHtcbiAgICAgIGNvbnN0IHBvaW50ID0gRWRpdG9yLmVuZChlZGl0b3IsIGF0KVxuXG4gICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBwb2ludClcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgTm9kZVRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IG1hdGNoUGF0aCB9IGZyb20gJy4uL3V0aWxzL21hdGNoLXBhdGgnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgQW5jZXN0b3IsIE5vZGVFbnRyeSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5cbmV4cG9ydCBjb25zdCBsaWZ0Tm9kZXM6IE5vZGVUcmFuc2Zvcm1zWydsaWZ0Tm9kZXMnXSA9IChcbiAgZWRpdG9yLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IHsgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uLCBtb2RlID0gJ2xvd2VzdCcsIHZvaWRzID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICBsZXQgeyBtYXRjaCB9ID0gb3B0aW9uc1xuXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICAgIG1hdGNoID0gUGF0aC5pc1BhdGgoYXQpXG4gICAgICAgID8gbWF0Y2hQYXRoKGVkaXRvciwgYXQpXG4gICAgICAgIDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgfVxuXG4gICAgaWYgKCFhdCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbWF0Y2hlcyA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHsgYXQsIG1hdGNoLCBtb2RlLCB2b2lkcyB9KVxuICAgIGNvbnN0IHBhdGhSZWZzID0gQXJyYXkuZnJvbShtYXRjaGVzLCAoWywgcF0pID0+IEVkaXRvci5wYXRoUmVmKGVkaXRvciwgcCkpXG5cbiAgICBmb3IgKGNvbnN0IHBhdGhSZWYgb2YgcGF0aFJlZnMpIHtcbiAgICAgIGNvbnN0IHBhdGggPSBwYXRoUmVmLnVucmVmKCkhXG5cbiAgICAgIGlmIChwYXRoLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBDYW5ub3QgbGlmdCBub2RlIGF0IGEgcGF0aCBbJHtwYXRofV0gYmVjYXVzZSBpdCBoYXMgYSBkZXB0aCBvZiBsZXNzIHRoYW4gXFxgMlxcYC5gXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFyZW50Tm9kZUVudHJ5ID0gRWRpdG9yLm5vZGUoZWRpdG9yLCBQYXRoLnBhcmVudChwYXRoKSlcbiAgICAgIGNvbnN0IFtwYXJlbnQsIHBhcmVudFBhdGhdID0gcGFyZW50Tm9kZUVudHJ5IGFzIE5vZGVFbnRyeTxBbmNlc3Rvcj5cbiAgICAgIGNvbnN0IGluZGV4ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG4gICAgICBjb25zdCB7IGxlbmd0aCB9ID0gcGFyZW50LmNoaWxkcmVuXG5cbiAgICAgIGlmIChsZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3QgdG9QYXRoID0gUGF0aC5uZXh0KHBhcmVudFBhdGgpXG4gICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwgeyBhdDogcGF0aCwgdG86IHRvUGF0aCwgdm9pZHMgfSlcbiAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHsgYXQ6IHBhcmVudFBhdGgsIHZvaWRzIH0pXG4gICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwgeyBhdDogcGF0aCwgdG86IHBhcmVudFBhdGgsIHZvaWRzIH0pXG4gICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBsZW5ndGggLSAxKSB7XG4gICAgICAgIGNvbnN0IHRvUGF0aCA9IFBhdGgubmV4dChwYXJlbnRQYXRoKVxuICAgICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHsgYXQ6IHBhdGgsIHRvOiB0b1BhdGgsIHZvaWRzIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzcGxpdFBhdGggPSBQYXRoLm5leHQocGF0aClcbiAgICAgICAgY29uc3QgdG9QYXRoID0gUGF0aC5uZXh0KHBhcmVudFBhdGgpXG4gICAgICAgIFRyYW5zZm9ybXMuc3BsaXROb2RlcyhlZGl0b3IsIHsgYXQ6IHNwbGl0UGF0aCwgdm9pZHMgfSlcbiAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7IGF0OiBwYXRoLCB0bzogdG9QYXRoLCB2b2lkcyB9KVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBOb2RlVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgU2NydWJiZXIgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3NjcnViYmVyJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcblxuY29uc3QgaGFzU2luZ2xlQ2hpbGROZXN0ID0gKGVkaXRvcjogRWRpdG9yLCBub2RlOiBOb2RlKTogYm9vbGVhbiA9PiB7XG4gIGlmIChFbGVtZW50LmlzRWxlbWVudChub2RlKSkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBub2RlIGFzIEVsZW1lbnRcbiAgICBpZiAoRWRpdG9yLmlzVm9pZChlZGl0b3IsIG5vZGUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSBpZiAoZWxlbWVudC5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiBoYXNTaW5nbGVDaGlsZE5lc3QoZWRpdG9yLCBlbGVtZW50LmNoaWxkcmVuWzBdKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0gZWxzZSBpZiAoRWRpdG9yLmlzRWRpdG9yKG5vZGUpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgbWVyZ2VOb2RlczogTm9kZVRyYW5zZm9ybXNbJ21lcmdlTm9kZXMnXSA9IChcbiAgZWRpdG9yLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIGxldCB7IG1hdGNoLCBhdCA9IGVkaXRvci5zZWxlY3Rpb24gfSA9IG9wdGlvbnNcbiAgICBjb25zdCB7IGhhbmdpbmcgPSBmYWxzZSwgdm9pZHMgPSBmYWxzZSwgbW9kZSA9ICdsb3dlc3QnIH0gPSBvcHRpb25zXG5cbiAgICBpZiAoIWF0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgICAgaWYgKFBhdGguaXNQYXRoKGF0KSkge1xuICAgICAgICBjb25zdCBbcGFyZW50XSA9IEVkaXRvci5wYXJlbnQoZWRpdG9yLCBhdClcbiAgICAgICAgbWF0Y2ggPSBuID0+IHBhcmVudC5jaGlsZHJlbi5pbmNsdWRlcyhuKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWF0Y2ggPSBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWhhbmdpbmcgJiYgUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICAgIGF0ID0gRWRpdG9yLnVuaGFuZ1JhbmdlKGVkaXRvciwgYXQsIHsgdm9pZHMgfSlcbiAgICB9XG5cbiAgICBpZiAoUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICAgIGlmIChSYW5nZS5pc0NvbGxhcHNlZChhdCkpIHtcbiAgICAgICAgYXQgPSBhdC5hbmNob3JcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IFssIGVuZF0gPSBSYW5nZS5lZGdlcyhhdClcbiAgICAgICAgY29uc3QgcG9pbnRSZWYgPSBFZGl0b3IucG9pbnRSZWYoZWRpdG9yLCBlbmQpXG4gICAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwgeyBhdCB9KVxuICAgICAgICBhdCA9IHBvaW50UmVmLnVucmVmKCkhXG5cbiAgICAgICAgaWYgKG9wdGlvbnMuYXQgPT0gbnVsbCkge1xuICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgYXQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBbY3VycmVudF0gPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7IGF0LCBtYXRjaCwgdm9pZHMsIG1vZGUgfSlcbiAgICBjb25zdCBwcmV2ID0gRWRpdG9yLnByZXZpb3VzKGVkaXRvciwgeyBhdCwgbWF0Y2gsIHZvaWRzLCBtb2RlIH0pXG5cbiAgICBpZiAoIWN1cnJlbnQgfHwgIXByZXYpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IFtub2RlLCBwYXRoXSA9IGN1cnJlbnRcbiAgICBjb25zdCBbcHJldk5vZGUsIHByZXZQYXRoXSA9IHByZXZcblxuICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCB8fCBwcmV2UGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IG5ld1BhdGggPSBQYXRoLm5leHQocHJldlBhdGgpXG4gICAgY29uc3QgY29tbW9uUGF0aCA9IFBhdGguY29tbW9uKHBhdGgsIHByZXZQYXRoKVxuICAgIGNvbnN0IGlzUHJldmlvdXNTaWJsaW5nID0gUGF0aC5pc1NpYmxpbmcocGF0aCwgcHJldlBhdGgpXG4gICAgY29uc3QgbGV2ZWxzID0gQXJyYXkuZnJvbShFZGl0b3IubGV2ZWxzKGVkaXRvciwgeyBhdDogcGF0aCB9KSwgKFtuXSkgPT4gbilcbiAgICAgIC5zbGljZShjb21tb25QYXRoLmxlbmd0aClcbiAgICAgIC5zbGljZSgwLCAtMSlcblxuICAgIC8vIERldGVybWluZSBpZiB0aGUgbWVyZ2Ugd2lsbCBsZWF2ZSBhbiBhbmNlc3RvciBvZiB0aGUgcGF0aCBlbXB0eSBhcyBhXG4gICAgLy8gcmVzdWx0LCBpbiB3aGljaCBjYXNlIHdlJ2xsIHdhbnQgdG8gcmVtb3ZlIGl0IGFmdGVyIG1lcmdpbmcuXG4gICAgY29uc3QgZW1wdHlBbmNlc3RvciA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIGF0OiBwYXRoLFxuICAgICAgbW9kZTogJ2hpZ2hlc3QnLFxuICAgICAgbWF0Y2g6IG4gPT4gbGV2ZWxzLmluY2x1ZGVzKG4pICYmIGhhc1NpbmdsZUNoaWxkTmVzdChlZGl0b3IsIG4pLFxuICAgIH0pXG5cbiAgICBjb25zdCBlbXB0eVJlZiA9IGVtcHR5QW5jZXN0b3IgJiYgRWRpdG9yLnBhdGhSZWYoZWRpdG9yLCBlbXB0eUFuY2VzdG9yWzFdKVxuICAgIGxldCBwcm9wZXJ0aWVzXG4gICAgbGV0IHBvc2l0aW9uXG5cbiAgICAvLyBFbnN1cmUgdGhhdCB0aGUgbm9kZXMgYXJlIGVxdWl2YWxlbnQsIGFuZCBmaWd1cmUgb3V0IHdoYXQgdGhlIHBvc2l0aW9uXG4gICAgLy8gYW5kIGV4dHJhIHByb3BlcnRpZXMgb2YgdGhlIG1lcmdlIHdpbGwgYmUuXG4gICAgaWYgKFRleHQuaXNUZXh0KG5vZGUpICYmIFRleHQuaXNUZXh0KHByZXZOb2RlKSkge1xuICAgICAgY29uc3QgeyB0ZXh0LCAuLi5yZXN0IH0gPSBub2RlXG4gICAgICBwb3NpdGlvbiA9IHByZXZOb2RlLnRleHQubGVuZ3RoXG4gICAgICBwcm9wZXJ0aWVzID0gcmVzdCBhcyBQYXJ0aWFsPFRleHQ+XG4gICAgfSBlbHNlIGlmIChFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJiBFbGVtZW50LmlzRWxlbWVudChwcmV2Tm9kZSkpIHtcbiAgICAgIGNvbnN0IHsgY2hpbGRyZW4sIC4uLnJlc3QgfSA9IG5vZGVcbiAgICAgIHBvc2l0aW9uID0gcHJldk5vZGUuY2hpbGRyZW4ubGVuZ3RoXG4gICAgICBwcm9wZXJ0aWVzID0gcmVzdCBhcyBQYXJ0aWFsPEVsZW1lbnQ+XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBtZXJnZSB0aGUgbm9kZSBhdCBwYXRoIFske3BhdGh9XSB3aXRoIHRoZSBwcmV2aW91cyBzaWJsaW5nIGJlY2F1c2UgaXQgaXMgbm90IHRoZSBzYW1lIGtpbmQ6ICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICAgIG5vZGVcbiAgICAgICAgKX0gJHtTY3J1YmJlci5zdHJpbmdpZnkocHJldk5vZGUpfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgbm9kZSBpc24ndCBhbHJlYWR5IHRoZSBuZXh0IHNpYmxpbmcgb2YgdGhlIHByZXZpb3VzIG5vZGUsIG1vdmVcbiAgICAvLyBpdCBzbyB0aGF0IGl0IGlzIGJlZm9yZSBtZXJnaW5nLlxuICAgIGlmICghaXNQcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwgeyBhdDogcGF0aCwgdG86IG5ld1BhdGgsIHZvaWRzIH0pXG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgd2FzIGdvaW5nIHRvIGJlIGFuIGVtcHR5IGFuY2VzdG9yIG9mIHRoZSBub2RlIHRoYXQgd2FzIG1lcmdlZCxcbiAgICAvLyB3ZSByZW1vdmUgaXQgZnJvbSB0aGUgdHJlZS5cbiAgICBpZiAoZW1wdHlSZWYpIHtcbiAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7IGF0OiBlbXB0eVJlZi5jdXJyZW50ISwgdm9pZHMgfSlcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgdGFyZ2V0IG5vZGUgdGhhdCB3ZSdyZSBtZXJnaW5nIHdpdGggaXMgZW1wdHksIHJlbW92ZSBpdCBpbnN0ZWFkXG4gICAgLy8gb2YgbWVyZ2luZyB0aGUgdHdvLiBUaGlzIGlzIGEgY29tbW9uIHJpY2ggdGV4dCBlZGl0b3IgYmVoYXZpb3IgdG9cbiAgICAvLyBwcmV2ZW50IGxvc2luZyBmb3JtYXR0aW5nIHdoZW4gZGVsZXRpbmcgZW50aXJlIG5vZGVzIHdoZW4geW91IGhhdmUgYVxuICAgIC8vIGhhbmdpbmcgc2VsZWN0aW9uLlxuICAgIC8vIGlmIHByZXZOb2RlIGlzIGZpcnN0IGNoaWxkIGluIHBhcmVudCxkb24ndCByZW1vdmUgaXQuXG4gICAgaWYgKFxuICAgICAgKEVsZW1lbnQuaXNFbGVtZW50KHByZXZOb2RlKSAmJiBFZGl0b3IuaXNFbXB0eShlZGl0b3IsIHByZXZOb2RlKSkgfHxcbiAgICAgIChUZXh0LmlzVGV4dChwcmV2Tm9kZSkgJiZcbiAgICAgICAgcHJldk5vZGUudGV4dCA9PT0gJycgJiZcbiAgICAgICAgcHJldlBhdGhbcHJldlBhdGgubGVuZ3RoIC0gMV0gIT09IDApXG4gICAgKSB7XG4gICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwgeyBhdDogcHJldlBhdGgsIHZvaWRzIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGVkaXRvci5hcHBseSh7XG4gICAgICAgIHR5cGU6ICdtZXJnZV9ub2RlJyxcbiAgICAgICAgcGF0aDogbmV3UGF0aCxcbiAgICAgICAgcG9zaXRpb24sXG4gICAgICAgIHByb3BlcnRpZXMsXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChlbXB0eVJlZikge1xuICAgICAgZW1wdHlSZWYudW5yZWYoKVxuICAgIH1cbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBOb2RlVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgbWF0Y2hQYXRoIH0gZnJvbSAnLi4vdXRpbHMvbWF0Y2gtcGF0aCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5cbmV4cG9ydCBjb25zdCBtb3ZlTm9kZXM6IE5vZGVUcmFuc2Zvcm1zWydtb3ZlTm9kZXMnXSA9IChlZGl0b3IsIG9wdGlvbnMpID0+IHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICB0byxcbiAgICAgIGF0ID0gZWRpdG9yLnNlbGVjdGlvbixcbiAgICAgIG1vZGUgPSAnbG93ZXN0JyxcbiAgICAgIHZvaWRzID0gZmFsc2UsXG4gICAgfSA9IG9wdGlvbnNcbiAgICBsZXQgeyBtYXRjaCB9ID0gb3B0aW9uc1xuXG4gICAgaWYgKCFhdCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICAgIG1hdGNoID0gUGF0aC5pc1BhdGgoYXQpXG4gICAgICAgID8gbWF0Y2hQYXRoKGVkaXRvciwgYXQpXG4gICAgICAgIDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgfVxuXG4gICAgY29uc3QgdG9SZWYgPSBFZGl0b3IucGF0aFJlZihlZGl0b3IsIHRvKVxuICAgIGNvbnN0IHRhcmdldHMgPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7IGF0LCBtYXRjaCwgbW9kZSwgdm9pZHMgfSlcbiAgICBjb25zdCBwYXRoUmVmcyA9IEFycmF5LmZyb20odGFyZ2V0cywgKFssIHBdKSA9PiBFZGl0b3IucGF0aFJlZihlZGl0b3IsIHApKVxuXG4gICAgZm9yIChjb25zdCBwYXRoUmVmIG9mIHBhdGhSZWZzKSB7XG4gICAgICBjb25zdCBwYXRoID0gcGF0aFJlZi51bnJlZigpIVxuICAgICAgY29uc3QgbmV3UGF0aCA9IHRvUmVmLmN1cnJlbnQhXG5cbiAgICAgIGlmIChwYXRoLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBlZGl0b3IuYXBwbHkoeyB0eXBlOiAnbW92ZV9ub2RlJywgcGF0aCwgbmV3UGF0aCB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHRvUmVmLmN1cnJlbnQgJiZcbiAgICAgICAgUGF0aC5pc1NpYmxpbmcobmV3UGF0aCwgcGF0aCkgJiZcbiAgICAgICAgUGF0aC5pc0FmdGVyKG5ld1BhdGgsIHBhdGgpXG4gICAgICApIHtcbiAgICAgICAgLy8gV2hlbiBwZXJmb3JtaW5nIGEgc2libGluZyBtb3ZlIHRvIGEgbGF0ZXIgaW5kZXgsIHRoZSBwYXRoIGF0IHRoZSBkZXN0aW5hdGlvbiBpcyBzaGlmdGVkXG4gICAgICAgIC8vIHRvIGJlZm9yZSB0aGUgaW5zZXJ0aW9uIHBvaW50IGluc3RlYWQgb2YgYWZ0ZXIuIFRvIGVuc3VyZSBvdXIgZ3JvdXAgb2Ygbm9kZXMgYXJlIGluc2VydGVkXG4gICAgICAgIC8vIGluIHRoZSBjb3JyZWN0IG9yZGVyIHdlIGluY3JlbWVudCB0b1JlZiB0byBhY2NvdW50IGZvciB0aGF0XG4gICAgICAgIHRvUmVmLmN1cnJlbnQgPSBQYXRoLm5leHQodG9SZWYuY3VycmVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0b1JlZi51bnJlZigpXG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgTm9kZVRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IG1hdGNoUGF0aCB9IGZyb20gJy4uL3V0aWxzL21hdGNoLXBhdGgnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlTm9kZXM6IE5vZGVUcmFuc2Zvcm1zWydyZW1vdmVOb2RlcyddID0gKFxuICBlZGl0b3IsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3QgeyBoYW5naW5nID0gZmFsc2UsIHZvaWRzID0gZmFsc2UsIG1vZGUgPSAnbG93ZXN0JyB9ID0gb3B0aW9uc1xuICAgIGxldCB7IGF0ID0gZWRpdG9yLnNlbGVjdGlvbiwgbWF0Y2ggfSA9IG9wdGlvbnNcblxuICAgIGlmICghYXQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICBtYXRjaCA9IFBhdGguaXNQYXRoKGF0KVxuICAgICAgICA/IG1hdGNoUGF0aChlZGl0b3IsIGF0KVxuICAgICAgICA6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICAgIH1cblxuICAgIGlmICghaGFuZ2luZyAmJiBSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgYXQgPSBFZGl0b3IudW5oYW5nUmFuZ2UoZWRpdG9yLCBhdCwgeyB2b2lkcyB9KVxuICAgIH1cblxuICAgIGNvbnN0IGRlcHRocyA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHsgYXQsIG1hdGNoLCBtb2RlLCB2b2lkcyB9KVxuICAgIGNvbnN0IHBhdGhSZWZzID0gQXJyYXkuZnJvbShkZXB0aHMsIChbLCBwXSkgPT4gRWRpdG9yLnBhdGhSZWYoZWRpdG9yLCBwKSlcblxuICAgIGZvciAoY29uc3QgcGF0aFJlZiBvZiBwYXRoUmVmcykge1xuICAgICAgY29uc3QgcGF0aCA9IHBhdGhSZWYudW5yZWYoKSFcblxuICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgY29uc3QgW25vZGVdID0gRWRpdG9yLm5vZGUoZWRpdG9yLCBwYXRoKVxuICAgICAgICBlZGl0b3IuYXBwbHkoeyB0eXBlOiAncmVtb3ZlX25vZGUnLCBwYXRoLCBub2RlIH0pXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwgImltcG9ydCB7IE5vZGVUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBtYXRjaFBhdGggfSBmcm9tICcuLi91dGlscy9tYXRjaC1wYXRoJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuXG5leHBvcnQgY29uc3Qgc2V0Tm9kZXM6IE5vZGVUcmFuc2Zvcm1zWydzZXROb2RlcyddID0gKFxuICBlZGl0b3IsXG4gIHByb3BzOiBQYXJ0aWFsPE5vZGU+LFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIGxldCB7IG1hdGNoLCBhdCA9IGVkaXRvci5zZWxlY3Rpb24sIGNvbXBhcmUsIG1lcmdlIH0gPSBvcHRpb25zXG4gICAgY29uc3Qge1xuICAgICAgaGFuZ2luZyA9IGZhbHNlLFxuICAgICAgbW9kZSA9ICdsb3dlc3QnLFxuICAgICAgc3BsaXQgPSBmYWxzZSxcbiAgICAgIHZvaWRzID0gZmFsc2UsXG4gICAgfSA9IG9wdGlvbnNcblxuICAgIGlmICghYXQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICBtYXRjaCA9IFBhdGguaXNQYXRoKGF0KVxuICAgICAgICA/IG1hdGNoUGF0aChlZGl0b3IsIGF0KVxuICAgICAgICA6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICAgIH1cblxuICAgIGlmICghaGFuZ2luZyAmJiBSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgYXQgPSBFZGl0b3IudW5oYW5nUmFuZ2UoZWRpdG9yLCBhdCwgeyB2b2lkcyB9KVxuICAgIH1cblxuICAgIGlmIChzcGxpdCAmJiBSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgaWYgKFxuICAgICAgICBSYW5nZS5pc0NvbGxhcHNlZChhdCkgJiZcbiAgICAgICAgRWRpdG9yLmxlYWYoZWRpdG9yLCBhdC5hbmNob3IpWzBdLnRleHQubGVuZ3RoID4gMFxuICAgICAgKSB7XG4gICAgICAgIC8vIElmIHRoZSByYW5nZSBpcyBjb2xsYXBzZWQgaW4gYSBub24tZW1wdHkgbm9kZSBhbmQgJ3NwbGl0JyBpcyB0cnVlLCB0aGVyZSdzIG5vdGhpbmcgdG9cbiAgICAgICAgLy8gc2V0IHRoYXQgd29uJ3QgZ2V0IG5vcm1hbGl6ZWQgYXdheVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNvbnN0IHJhbmdlUmVmID0gRWRpdG9yLnJhbmdlUmVmKGVkaXRvciwgYXQsIHsgYWZmaW5pdHk6ICdpbndhcmQnIH0pXG4gICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyhhdClcbiAgICAgIGNvbnN0IHNwbGl0TW9kZSA9IG1vZGUgPT09ICdsb3dlc3QnID8gJ2xvd2VzdCcgOiAnaGlnaGVzdCdcbiAgICAgIGNvbnN0IGVuZEF0RW5kT2ZOb2RlID0gRWRpdG9yLmlzRW5kKGVkaXRvciwgZW5kLCBlbmQucGF0aClcbiAgICAgIFRyYW5zZm9ybXMuc3BsaXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IGVuZCxcbiAgICAgICAgbWF0Y2gsXG4gICAgICAgIG1vZGU6IHNwbGl0TW9kZSxcbiAgICAgICAgdm9pZHMsXG4gICAgICAgIGFsd2F5czogIWVuZEF0RW5kT2ZOb2RlLFxuICAgICAgfSlcbiAgICAgIGNvbnN0IHN0YXJ0QXRTdGFydE9mTm9kZSA9IEVkaXRvci5pc1N0YXJ0KGVkaXRvciwgc3RhcnQsIHN0YXJ0LnBhdGgpXG4gICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiBzdGFydCxcbiAgICAgICAgbWF0Y2gsXG4gICAgICAgIG1vZGU6IHNwbGl0TW9kZSxcbiAgICAgICAgdm9pZHMsXG4gICAgICAgIGFsd2F5czogIXN0YXJ0QXRTdGFydE9mTm9kZSxcbiAgICAgIH0pXG4gICAgICBhdCA9IHJhbmdlUmVmLnVucmVmKCkhXG5cbiAgICAgIGlmIChvcHRpb25zLmF0ID09IG51bGwpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBhdClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNvbXBhcmUpIHtcbiAgICAgIGNvbXBhcmUgPSAocHJvcCwgbm9kZVByb3ApID0+IHByb3AgIT09IG5vZGVQcm9wXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBbbm9kZSwgcGF0aF0gb2YgRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgICAgYXQsXG4gICAgICBtYXRjaCxcbiAgICAgIG1vZGUsXG4gICAgICB2b2lkcyxcbiAgICB9KSkge1xuICAgICAgY29uc3QgcHJvcGVydGllczogUGFydGlhbDxOb2RlPiA9IHt9XG4gICAgICAvLyBGSVhNRTogaXMgdGhpcyBjb3JyZWN0P1xuICAgICAgY29uc3QgbmV3UHJvcGVydGllczogUGFydGlhbDxOb2RlPiAmIHsgW2tleTogc3RyaW5nXTogdW5rbm93biB9ID0ge31cblxuICAgICAgLy8gWW91IGNhbid0IHNldCBwcm9wZXJ0aWVzIG9uIHRoZSBlZGl0b3Igbm9kZS5cbiAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBsZXQgaGFzQ2hhbmdlcyA9IGZhbHNlXG5cbiAgICAgIGZvciAoY29uc3QgayBpbiBwcm9wcykge1xuICAgICAgICBpZiAoayA9PT0gJ2NoaWxkcmVuJyB8fCBrID09PSAndGV4dCcpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbXBhcmUocHJvcHNbPGtleW9mIE5vZGU+a10sIG5vZGVbPGtleW9mIE5vZGU+a10pKSB7XG4gICAgICAgICAgaGFzQ2hhbmdlcyA9IHRydWVcbiAgICAgICAgICAvLyBPbWl0IG5ldyBwcm9wZXJ0aWVzIGZyb20gdGhlIG9sZCBwcm9wZXJ0aWVzIGxpc3RcbiAgICAgICAgICBpZiAobm9kZS5oYXNPd25Qcm9wZXJ0eShrKSlcbiAgICAgICAgICAgIHByb3BlcnRpZXNbPGtleW9mIE5vZGU+a10gPSBub2RlWzxrZXlvZiBOb2RlPmtdXG4gICAgICAgICAgLy8gT21pdCBwcm9wZXJ0aWVzIHRoYXQgaGF2ZSBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgbmV3IHByb3BlcnRpZXMgbGlzdFxuICAgICAgICAgIGlmIChtZXJnZSkge1xuICAgICAgICAgICAgaWYgKHByb3BzWzxrZXlvZiBOb2RlPmtdICE9IG51bGwpXG4gICAgICAgICAgICAgIG5ld1Byb3BlcnRpZXNbPGtleW9mIE5vZGU+a10gPSBtZXJnZShcbiAgICAgICAgICAgICAgICBub2RlWzxrZXlvZiBOb2RlPmtdLFxuICAgICAgICAgICAgICAgIHByb3BzWzxrZXlvZiBOb2RlPmtdXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHByb3BzWzxrZXlvZiBOb2RlPmtdICE9IG51bGwpXG4gICAgICAgICAgICAgIG5ld1Byb3BlcnRpZXNbPGtleW9mIE5vZGU+a10gPSBwcm9wc1s8a2V5b2YgTm9kZT5rXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaGFzQ2hhbmdlcykge1xuICAgICAgICBlZGl0b3IuYXBwbHkoe1xuICAgICAgICAgIHR5cGU6ICdzZXRfbm9kZScsXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgICBwcm9wZXJ0aWVzLFxuICAgICAgICAgIG5ld1Byb3BlcnRpZXMsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwgImltcG9ydCB7IE5vZGVUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgUG9pbnRSZWYgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BvaW50LXJlZidcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BvaW50J1xuXG4vKipcbiAqIENvbnZlcnQgYSByYW5nZSBpbnRvIGEgcG9pbnQgYnkgZGVsZXRpbmcgaXQncyBjb250ZW50LlxuICovXG5jb25zdCBkZWxldGVSYW5nZSA9IChlZGl0b3I6IEVkaXRvciwgcmFuZ2U6IFJhbmdlKTogUG9pbnQgfCBudWxsID0+IHtcbiAgaWYgKFJhbmdlLmlzQ29sbGFwc2VkKHJhbmdlKSkge1xuICAgIHJldHVybiByYW5nZS5hbmNob3JcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBbLCBlbmRdID0gUmFuZ2UuZWRnZXMocmFuZ2UpXG4gICAgY29uc3QgcG9pbnRSZWYgPSBFZGl0b3IucG9pbnRSZWYoZWRpdG9yLCBlbmQpXG4gICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7IGF0OiByYW5nZSB9KVxuICAgIHJldHVybiBwb2ludFJlZi51bnJlZigpXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNwbGl0Tm9kZXM6IE5vZGVUcmFuc2Zvcm1zWydzcGxpdE5vZGVzJ10gPSAoXG4gIGVkaXRvcixcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCB7IG1vZGUgPSAnbG93ZXN0Jywgdm9pZHMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgIGxldCB7IG1hdGNoLCBhdCA9IGVkaXRvci5zZWxlY3Rpb24sIGhlaWdodCA9IDAsIGFsd2F5cyA9IGZhbHNlIH0gPSBvcHRpb25zXG5cbiAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgICAgbWF0Y2ggPSBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICB9XG5cbiAgICBpZiAoUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICAgIGF0ID0gZGVsZXRlUmFuZ2UoZWRpdG9yLCBhdClcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgdGFyZ2V0IGlzIGEgcGF0aCwgdGhlIGRlZmF1bHQgaGVpZ2h0LXNraXBwaW5nIGFuZCBwb3NpdGlvblxuICAgIC8vIGNvdW50ZXJzIG5lZWQgdG8gYWNjb3VudCBmb3IgdXMgcG90ZW50aWFsbHkgc3BsaXR0aW5nIGF0IGEgbm9uLWxlYWYuXG4gICAgaWYgKFBhdGguaXNQYXRoKGF0KSkge1xuICAgICAgY29uc3QgcGF0aCA9IGF0XG4gICAgICBjb25zdCBwb2ludCA9IEVkaXRvci5wb2ludChlZGl0b3IsIHBhdGgpXG4gICAgICBjb25zdCBbcGFyZW50XSA9IEVkaXRvci5wYXJlbnQoZWRpdG9yLCBwYXRoKVxuICAgICAgbWF0Y2ggPSBuID0+IG4gPT09IHBhcmVudFxuICAgICAgaGVpZ2h0ID0gcG9pbnQucGF0aC5sZW5ndGggLSBwYXRoLmxlbmd0aCArIDFcbiAgICAgIGF0ID0gcG9pbnRcbiAgICAgIGFsd2F5cyA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoIWF0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBiZWZvcmVSZWYgPSBFZGl0b3IucG9pbnRSZWYoZWRpdG9yLCBhdCwge1xuICAgICAgYWZmaW5pdHk6ICdiYWNrd2FyZCcsXG4gICAgfSlcbiAgICBsZXQgYWZ0ZXJSZWY6IFBvaW50UmVmIHwgdW5kZWZpbmVkXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFtoaWdoZXN0XSA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHsgYXQsIG1hdGNoLCBtb2RlLCB2b2lkcyB9KVxuXG4gICAgICBpZiAoIWhpZ2hlc3QpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHZvaWRNYXRjaCA9IEVkaXRvci52b2lkKGVkaXRvciwgeyBhdCwgbW9kZTogJ2hpZ2hlc3QnIH0pXG4gICAgICBjb25zdCBudWRnZSA9IDBcblxuICAgICAgaWYgKCF2b2lkcyAmJiB2b2lkTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgW3ZvaWROb2RlLCB2b2lkUGF0aF0gPSB2b2lkTWF0Y2hcblxuICAgICAgICBpZiAoRWxlbWVudC5pc0VsZW1lbnQodm9pZE5vZGUpICYmIGVkaXRvci5pc0lubGluZSh2b2lkTm9kZSkpIHtcbiAgICAgICAgICBsZXQgYWZ0ZXIgPSBFZGl0b3IuYWZ0ZXIoZWRpdG9yLCB2b2lkUGF0aClcblxuICAgICAgICAgIGlmICghYWZ0ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSB7IHRleHQ6ICcnIH1cbiAgICAgICAgICAgIGNvbnN0IGFmdGVyUGF0aCA9IFBhdGgubmV4dCh2b2lkUGF0aClcbiAgICAgICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCB0ZXh0LCB7IGF0OiBhZnRlclBhdGgsIHZvaWRzIH0pXG4gICAgICAgICAgICBhZnRlciA9IEVkaXRvci5wb2ludChlZGl0b3IsIGFmdGVyUGF0aCkhXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXQgPSBhZnRlclxuICAgICAgICAgIGFsd2F5cyA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNpYmxpbmdIZWlnaHQgPSBhdC5wYXRoLmxlbmd0aCAtIHZvaWRQYXRoLmxlbmd0aFxuICAgICAgICBoZWlnaHQgPSBzaWJsaW5nSGVpZ2h0ICsgMVxuICAgICAgICBhbHdheXMgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGFmdGVyUmVmID0gRWRpdG9yLnBvaW50UmVmKGVkaXRvciwgYXQpXG4gICAgICBjb25zdCBkZXB0aCA9IGF0LnBhdGgubGVuZ3RoIC0gaGVpZ2h0XG4gICAgICBjb25zdCBbLCBoaWdoZXN0UGF0aF0gPSBoaWdoZXN0XG4gICAgICBjb25zdCBsb3dlc3RQYXRoID0gYXQucGF0aC5zbGljZSgwLCBkZXB0aClcbiAgICAgIGxldCBwb3NpdGlvbiA9IGhlaWdodCA9PT0gMCA/IGF0Lm9mZnNldCA6IGF0LnBhdGhbZGVwdGhdICsgbnVkZ2VcblxuICAgICAgZm9yIChjb25zdCBbbm9kZSwgcGF0aF0gb2YgRWRpdG9yLmxldmVscyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IGxvd2VzdFBhdGgsXG4gICAgICAgIHJldmVyc2U6IHRydWUsXG4gICAgICAgIHZvaWRzLFxuICAgICAgfSkpIHtcbiAgICAgICAgbGV0IHNwbGl0ID0gZmFsc2VcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgcGF0aC5sZW5ndGggPCBoaWdoZXN0UGF0aC5sZW5ndGggfHxcbiAgICAgICAgICBwYXRoLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICghdm9pZHMgJiYgRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiYgRWRpdG9yLmlzVm9pZChlZGl0b3IsIG5vZGUpKVxuICAgICAgICApIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcG9pbnQgPSBiZWZvcmVSZWYuY3VycmVudCFcbiAgICAgICAgY29uc3QgaXNFbmQgPSBFZGl0b3IuaXNFbmQoZWRpdG9yLCBwb2ludCwgcGF0aClcblxuICAgICAgICBpZiAoYWx3YXlzIHx8ICFiZWZvcmVSZWYgfHwgIUVkaXRvci5pc0VkZ2UoZWRpdG9yLCBwb2ludCwgcGF0aCkpIHtcbiAgICAgICAgICBzcGxpdCA9IHRydWVcbiAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gTm9kZS5leHRyYWN0UHJvcHMobm9kZSlcbiAgICAgICAgICBlZGl0b3IuYXBwbHkoe1xuICAgICAgICAgICAgdHlwZTogJ3NwbGl0X25vZGUnLFxuICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgICAgcHJvcGVydGllcyxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcG9zaXRpb24gPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV0gKyAoc3BsaXQgfHwgaXNFbmQgPyAxIDogMClcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuYXQgPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBwb2ludCA9IGFmdGVyUmVmLmN1cnJlbnQgfHwgRWRpdG9yLmVuZChlZGl0b3IsIFtdKVxuICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHBvaW50KVxuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBiZWZvcmVSZWYudW5yZWYoKVxuICAgICAgYWZ0ZXJSZWY/LnVucmVmKClcbiAgICB9XG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgTm9kZVRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZSdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5cbmV4cG9ydCBjb25zdCB1bnNldE5vZGVzOiBOb2RlVHJhbnNmb3Jtc1sndW5zZXROb2RlcyddID0gKFxuICBlZGl0b3IsXG4gIHByb3BzLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkocHJvcHMpKSB7XG4gICAgcHJvcHMgPSBbcHJvcHNdXG4gIH1cblxuICBjb25zdCBvYmo6IGFueSA9IHt9XG5cbiAgZm9yIChjb25zdCBrZXkgb2YgcHJvcHMpIHtcbiAgICBvYmpba2V5XSA9IG51bGxcbiAgfVxuXG4gIFRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCBvYmosIG9wdGlvbnMpXG59XG4iLCAiaW1wb3J0IHsgTm9kZVRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IG1hdGNoUGF0aCB9IGZyb20gJy4uL3V0aWxzL21hdGNoLXBhdGgnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcblxuZXhwb3J0IGNvbnN0IHVud3JhcE5vZGVzOiBOb2RlVHJhbnNmb3Jtc1sndW53cmFwTm9kZXMnXSA9IChcbiAgZWRpdG9yLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IHsgbW9kZSA9ICdsb3dlc3QnLCBzcGxpdCA9IGZhbHNlLCB2b2lkcyA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgbGV0IHsgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uLCBtYXRjaCB9ID0gb3B0aW9uc1xuXG4gICAgaWYgKCFhdCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICAgIG1hdGNoID0gUGF0aC5pc1BhdGgoYXQpXG4gICAgICAgID8gbWF0Y2hQYXRoKGVkaXRvciwgYXQpXG4gICAgICAgIDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgfVxuXG4gICAgaWYgKFBhdGguaXNQYXRoKGF0KSkge1xuICAgICAgYXQgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBhdClcbiAgICB9XG5cbiAgICBjb25zdCByYW5nZVJlZiA9IFJhbmdlLmlzUmFuZ2UoYXQpID8gRWRpdG9yLnJhbmdlUmVmKGVkaXRvciwgYXQpIDogbnVsbFxuICAgIGNvbnN0IG1hdGNoZXMgPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7IGF0LCBtYXRjaCwgbW9kZSwgdm9pZHMgfSlcbiAgICBjb25zdCBwYXRoUmVmcyA9IEFycmF5LmZyb20oXG4gICAgICBtYXRjaGVzLFxuICAgICAgKFssIHBdKSA9PiBFZGl0b3IucGF0aFJlZihlZGl0b3IsIHApXG4gICAgICAvLyB1bndyYXBOb2RlIHdpbGwgY2FsbCBsaWZ0Tm9kZSB3aGljaCBkb2VzIG5vdCBzdXBwb3J0IHNwbGl0dGluZyB0aGUgbm9kZSB3aGVuIG5lc3RlZC5cbiAgICAgIC8vIElmIHdlIGRvIG5vdCByZXZlcnNlIHRoZSBvcmRlciBhbmQgY2FsbCBpdCBmcm9tIHRvcCB0byB0aGUgYm90dG9tLCBpdCB3aWxsIHJlbW92ZSBhbGwgYmxvY2tzXG4gICAgICAvLyB0aGF0IHdyYXAgdGFyZ2V0IG5vZGUuIFNvIHdlIHJldmVyc2UgdGhlIG9yZGVyLlxuICAgICkucmV2ZXJzZSgpXG5cbiAgICBmb3IgKGNvbnN0IHBhdGhSZWYgb2YgcGF0aFJlZnMpIHtcbiAgICAgIGNvbnN0IHBhdGggPSBwYXRoUmVmLnVucmVmKCkhXG4gICAgICBjb25zdCBbbm9kZV0gPSBFZGl0b3Iubm9kZShlZGl0b3IsIHBhdGgpXG4gICAgICBsZXQgcmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBwYXRoKVxuXG4gICAgICBpZiAoc3BsaXQgJiYgcmFuZ2VSZWYpIHtcbiAgICAgICAgcmFuZ2UgPSBSYW5nZS5pbnRlcnNlY3Rpb24ocmFuZ2VSZWYuY3VycmVudCEsIHJhbmdlKSFcbiAgICAgIH1cblxuICAgICAgVHJhbnNmb3Jtcy5saWZ0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiByYW5nZSxcbiAgICAgICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0FuY2VzdG9yKG5vZGUpICYmIG5vZGUuY2hpbGRyZW4uaW5jbHVkZXMobiksXG4gICAgICAgIHZvaWRzLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAocmFuZ2VSZWYpIHtcbiAgICAgIHJhbmdlUmVmLnVucmVmKClcbiAgICB9XG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgTm9kZVRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IG1hdGNoUGF0aCB9IGZyb20gJy4uL3V0aWxzL21hdGNoLXBhdGgnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5cbmV4cG9ydCBjb25zdCB3cmFwTm9kZXM6IE5vZGVUcmFuc2Zvcm1zWyd3cmFwTm9kZXMnXSA9IChcbiAgZWRpdG9yLFxuICBlbGVtZW50LFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IHsgbW9kZSA9ICdsb3dlc3QnLCBzcGxpdCA9IGZhbHNlLCB2b2lkcyA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgbGV0IHsgbWF0Y2gsIGF0ID0gZWRpdG9yLnNlbGVjdGlvbiB9ID0gb3B0aW9uc1xuXG4gICAgaWYgKCFhdCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICAgIGlmIChQYXRoLmlzUGF0aChhdCkpIHtcbiAgICAgICAgbWF0Y2ggPSBtYXRjaFBhdGgoZWRpdG9yLCBhdClcbiAgICAgIH0gZWxzZSBpZiAoZWRpdG9yLmlzSW5saW5lKGVsZW1lbnQpKSB7XG4gICAgICAgIG1hdGNoID0gbiA9PlxuICAgICAgICAgIChFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNJbmxpbmUoZWRpdG9yLCBuKSkgfHwgVGV4dC5pc1RleHQobilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hdGNoID0gbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNwbGl0ICYmIFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyhhdClcbiAgICAgIGNvbnN0IHJhbmdlUmVmID0gRWRpdG9yLnJhbmdlUmVmKGVkaXRvciwgYXQsIHtcbiAgICAgICAgYWZmaW5pdHk6ICdpbndhcmQnLFxuICAgICAgfSlcbiAgICAgIFRyYW5zZm9ybXMuc3BsaXROb2RlcyhlZGl0b3IsIHsgYXQ6IGVuZCwgbWF0Y2gsIHZvaWRzIH0pXG4gICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7IGF0OiBzdGFydCwgbWF0Y2gsIHZvaWRzIH0pXG4gICAgICBhdCA9IHJhbmdlUmVmLnVucmVmKCkhXG5cbiAgICAgIGlmIChvcHRpb25zLmF0ID09IG51bGwpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBhdClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByb290cyA9IEFycmF5LmZyb20oXG4gICAgICBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0LFxuICAgICAgICBtYXRjaDogZWRpdG9yLmlzSW5saW5lKGVsZW1lbnQpXG4gICAgICAgICAgPyBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICAgICAgICA6IG4gPT4gRWRpdG9yLmlzRWRpdG9yKG4pLFxuICAgICAgICBtb2RlOiAnbG93ZXN0JyxcbiAgICAgICAgdm9pZHMsXG4gICAgICB9KVxuICAgIClcblxuICAgIGZvciAoY29uc3QgWywgcm9vdFBhdGhdIG9mIHJvb3RzKSB7XG4gICAgICBjb25zdCBhID0gUmFuZ2UuaXNSYW5nZShhdClcbiAgICAgICAgPyBSYW5nZS5pbnRlcnNlY3Rpb24oYXQsIEVkaXRvci5yYW5nZShlZGl0b3IsIHJvb3RQYXRoKSlcbiAgICAgICAgOiBhdFxuXG4gICAgICBpZiAoIWEpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgY29uc3QgbWF0Y2hlcyA9IEFycmF5LmZyb20oXG4gICAgICAgIEVkaXRvci5ub2RlcyhlZGl0b3IsIHsgYXQ6IGEsIG1hdGNoLCBtb2RlLCB2b2lkcyB9KVxuICAgICAgKVxuXG4gICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IFtmaXJzdF0gPSBtYXRjaGVzXG4gICAgICAgIGNvbnN0IGxhc3QgPSBtYXRjaGVzW21hdGNoZXMubGVuZ3RoIC0gMV1cbiAgICAgICAgY29uc3QgWywgZmlyc3RQYXRoXSA9IGZpcnN0XG4gICAgICAgIGNvbnN0IFssIGxhc3RQYXRoXSA9IGxhc3RcblxuICAgICAgICBpZiAoZmlyc3RQYXRoLmxlbmd0aCA9PT0gMCAmJiBsYXN0UGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vIG1hdGNoaW5nIHBhcmVudCAtIHVzdWFsbHkgbWVhbnMgdGhlIG5vZGUgaXMgYW4gZWRpdG9yIC0gZG9uJ3QgZG8gYW55dGhpbmdcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29tbW9uUGF0aCA9IFBhdGguZXF1YWxzKGZpcnN0UGF0aCwgbGFzdFBhdGgpXG4gICAgICAgICAgPyBQYXRoLnBhcmVudChmaXJzdFBhdGgpXG4gICAgICAgICAgOiBQYXRoLmNvbW1vbihmaXJzdFBhdGgsIGxhc3RQYXRoKVxuXG4gICAgICAgIGNvbnN0IHJhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgZmlyc3RQYXRoLCBsYXN0UGF0aClcbiAgICAgICAgY29uc3QgY29tbW9uTm9kZUVudHJ5ID0gRWRpdG9yLm5vZGUoZWRpdG9yLCBjb21tb25QYXRoKVxuICAgICAgICBjb25zdCBbY29tbW9uTm9kZV0gPSBjb21tb25Ob2RlRW50cnlcbiAgICAgICAgY29uc3QgZGVwdGggPSBjb21tb25QYXRoLmxlbmd0aCArIDFcbiAgICAgICAgY29uc3Qgd3JhcHBlclBhdGggPSBQYXRoLm5leHQobGFzdFBhdGguc2xpY2UoMCwgZGVwdGgpKVxuICAgICAgICBjb25zdCB3cmFwcGVyID0geyAuLi5lbGVtZW50LCBjaGlsZHJlbjogW10gfVxuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgd3JhcHBlciwgeyBhdDogd3JhcHBlclBhdGgsIHZvaWRzIH0pXG5cbiAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IHJhbmdlLFxuICAgICAgICAgIG1hdGNoOiBuID0+XG4gICAgICAgICAgICBFbGVtZW50LmlzQW5jZXN0b3IoY29tbW9uTm9kZSkgJiYgY29tbW9uTm9kZS5jaGlsZHJlbi5pbmNsdWRlcyhuKSxcbiAgICAgICAgICB0bzogd3JhcHBlclBhdGguY29uY2F0KDApLFxuICAgICAgICAgIHZvaWRzLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsICJpbXBvcnQge1xuICBhZGRNYXJrLFxuICBkZWxldGVGcmFnbWVudCxcbiAgRWRpdG9yLFxuICBnZXREaXJ0eVBhdGhzLFxuICBnZXRGcmFnbWVudCxcbiAgaW5zZXJ0QnJlYWssXG4gIGluc2VydEZyYWdtZW50LFxuICBpbnNlcnROb2RlLFxuICBpbnNlcnRTb2Z0QnJlYWssXG4gIGluc2VydFRleHQsXG4gIG5vcm1hbGl6ZU5vZGUsXG4gIHJlbW92ZU1hcmssXG4gIHNob3VsZE5vcm1hbGl6ZSxcbn0gZnJvbSAnLi8nXG5pbXBvcnQgeyBhcHBseSB9IGZyb20gJy4vY29yZSdcbmltcG9ydCB7XG4gIGFib3ZlLFxuICBhZnRlcixcbiAgYmVmb3JlLFxuICBkZWxldGVCYWNrd2FyZCxcbiAgZGVsZXRlRm9yd2FyZCxcbiAgZWRnZXMsXG4gIGVsZW1lbnRSZWFkT25seSxcbiAgZW5kLFxuICBmaXJzdCxcbiAgZnJhZ21lbnQsXG4gIGdldFZvaWQsXG4gIGhhc0Jsb2NrcyxcbiAgaGFzSW5saW5lcyxcbiAgaGFzUGF0aCxcbiAgaGFzVGV4dHMsXG4gIGlzQmxvY2ssXG4gIGlzRWRnZSxcbiAgaXNFbXB0eSxcbiAgaXNFbmQsXG4gIGlzTm9ybWFsaXppbmcsXG4gIGlzU3RhcnQsXG4gIGxhc3QsXG4gIGxlYWYsXG4gIGxldmVscyxcbiAgbWFya3MsXG4gIG5leHQsXG4gIG5vZGUsXG4gIG5vZGVzLFxuICBub3JtYWxpemUsXG4gIHBhcmVudCxcbiAgcGF0aCxcbiAgcGF0aFJlZixcbiAgcGF0aFJlZnMsXG4gIHBvaW50LFxuICBwb2ludFJlZixcbiAgcG9pbnRSZWZzLFxuICBwb3NpdGlvbnMsXG4gIHByZXZpb3VzLFxuICByYW5nZSxcbiAgcmFuZ2VSZWYsXG4gIHJhbmdlUmVmcyxcbiAgc2V0Tm9ybWFsaXppbmcsXG4gIHN0YXJ0LFxuICBzdHJpbmcsXG4gIHVuaGFuZ1JhbmdlLFxuICB3aXRob3V0Tm9ybWFsaXppbmcsXG59IGZyb20gJy4vZWRpdG9yJ1xuaW1wb3J0IHsgZGVsZXRlVGV4dCB9IGZyb20gJy4vdHJhbnNmb3Jtcy10ZXh0J1xuaW1wb3J0IHtcbiAgY29sbGFwc2UsXG4gIGRlc2VsZWN0LFxuICBtb3ZlLFxuICBzZWxlY3QsXG4gIHNldFBvaW50LFxuICBzZXRTZWxlY3Rpb24sXG59IGZyb20gJy4vdHJhbnNmb3Jtcy1zZWxlY3Rpb24nXG5pbXBvcnQge1xuICBpbnNlcnROb2RlcyxcbiAgbGlmdE5vZGVzLFxuICBtZXJnZU5vZGVzLFxuICBtb3ZlTm9kZXMsXG4gIHJlbW92ZU5vZGVzLFxuICBzZXROb2RlcyxcbiAgc3BsaXROb2RlcyxcbiAgdW5zZXROb2RlcyxcbiAgdW53cmFwTm9kZXMsXG4gIHdyYXBOb2Rlcyxcbn0gZnJvbSAnLi90cmFuc2Zvcm1zLW5vZGUnXG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IFNsYXRlIGBFZGl0b3JgIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUVkaXRvciA9ICgpOiBFZGl0b3IgPT4ge1xuICBjb25zdCBlZGl0b3I6IEVkaXRvciA9IHtcbiAgICBjaGlsZHJlbjogW10sXG4gICAgb3BlcmF0aW9uczogW10sXG4gICAgc2VsZWN0aW9uOiBudWxsLFxuICAgIG1hcmtzOiBudWxsLFxuICAgIGlzRWxlbWVudFJlYWRPbmx5OiAoKSA9PiBmYWxzZSxcbiAgICBpc0lubGluZTogKCkgPT4gZmFsc2UsXG4gICAgaXNTZWxlY3RhYmxlOiAoKSA9PiB0cnVlLFxuICAgIGlzVm9pZDogKCkgPT4gZmFsc2UsXG4gICAgbWFya2FibGVWb2lkOiAoKSA9PiBmYWxzZSxcbiAgICBvbkNoYW5nZTogKCkgPT4ge30sXG5cbiAgICAvLyBDb3JlXG4gICAgYXBwbHk6ICguLi5hcmdzKSA9PiBhcHBseShlZGl0b3IsIC4uLmFyZ3MpLFxuXG4gICAgLy8gRWRpdG9yXG4gICAgYWRkTWFyazogKC4uLmFyZ3MpID0+IGFkZE1hcmsoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBkZWxldGVCYWNrd2FyZDogKC4uLmFyZ3MpID0+IGRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgLi4uYXJncyksXG4gICAgZGVsZXRlRm9yd2FyZDogKC4uLmFyZ3MpID0+IGRlbGV0ZUZvcndhcmQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBkZWxldGVGcmFnbWVudDogKC4uLmFyZ3MpID0+IGRlbGV0ZUZyYWdtZW50KGVkaXRvciwgLi4uYXJncyksXG4gICAgZ2V0RnJhZ21lbnQ6ICguLi5hcmdzKSA9PiBnZXRGcmFnbWVudChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGluc2VydEJyZWFrOiAoLi4uYXJncykgPT4gaW5zZXJ0QnJlYWsoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpbnNlcnRTb2Z0QnJlYWs6ICguLi5hcmdzKSA9PiBpbnNlcnRTb2Z0QnJlYWsoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpbnNlcnRGcmFnbWVudDogKC4uLmFyZ3MpID0+IGluc2VydEZyYWdtZW50KGVkaXRvciwgLi4uYXJncyksXG4gICAgaW5zZXJ0Tm9kZTogKC4uLmFyZ3MpID0+IGluc2VydE5vZGUoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpbnNlcnRUZXh0OiAoLi4uYXJncykgPT4gaW5zZXJ0VGV4dChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIG5vcm1hbGl6ZU5vZGU6ICguLi5hcmdzKSA9PiBub3JtYWxpemVOb2RlKGVkaXRvciwgLi4uYXJncyksXG4gICAgcmVtb3ZlTWFyazogKC4uLmFyZ3MpID0+IHJlbW92ZU1hcmsoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBnZXREaXJ0eVBhdGhzOiAoLi4uYXJncykgPT4gZ2V0RGlydHlQYXRocyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHNob3VsZE5vcm1hbGl6ZTogKC4uLmFyZ3MpID0+IHNob3VsZE5vcm1hbGl6ZShlZGl0b3IsIC4uLmFyZ3MpLFxuXG4gICAgLy8gRWRpdG9yIGludGVyZmFjZVxuICAgIGFib3ZlOiAoLi4uYXJncykgPT4gYWJvdmUoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBhZnRlcjogKC4uLmFyZ3MpID0+IGFmdGVyKGVkaXRvciwgLi4uYXJncyksXG4gICAgYmVmb3JlOiAoLi4uYXJncykgPT4gYmVmb3JlKGVkaXRvciwgLi4uYXJncyksXG4gICAgY29sbGFwc2U6ICguLi5hcmdzKSA9PiBjb2xsYXBzZShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGRlbGV0ZTogKC4uLmFyZ3MpID0+IGRlbGV0ZVRleHQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBkZXNlbGVjdDogKC4uLmFyZ3MpID0+IGRlc2VsZWN0KGVkaXRvciwgLi4uYXJncyksXG4gICAgZWRnZXM6ICguLi5hcmdzKSA9PiBlZGdlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGVsZW1lbnRSZWFkT25seTogKC4uLmFyZ3MpID0+IGVsZW1lbnRSZWFkT25seShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGVuZDogKC4uLmFyZ3MpID0+IGVuZChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGZpcnN0OiAoLi4uYXJncykgPT4gZmlyc3QoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBmcmFnbWVudDogKC4uLmFyZ3MpID0+IGZyYWdtZW50KGVkaXRvciwgLi4uYXJncyksXG4gICAgZ2V0TWFya3M6ICguLi5hcmdzKSA9PiBtYXJrcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGhhc0Jsb2NrczogKC4uLmFyZ3MpID0+IGhhc0Jsb2NrcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGhhc0lubGluZXM6ICguLi5hcmdzKSA9PiBoYXNJbmxpbmVzKGVkaXRvciwgLi4uYXJncyksXG4gICAgaGFzUGF0aDogKC4uLmFyZ3MpID0+IGhhc1BhdGgoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBoYXNUZXh0czogKC4uLmFyZ3MpID0+IGhhc1RleHRzKGVkaXRvciwgLi4uYXJncyksXG4gICAgaW5zZXJ0Tm9kZXM6ICguLi5hcmdzKSA9PiBpbnNlcnROb2RlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGlzQmxvY2s6ICguLi5hcmdzKSA9PiBpc0Jsb2NrKGVkaXRvciwgLi4uYXJncyksXG4gICAgaXNFZGdlOiAoLi4uYXJncykgPT4gaXNFZGdlKGVkaXRvciwgLi4uYXJncyksXG4gICAgaXNFbXB0eTogKC4uLmFyZ3MpID0+IGlzRW1wdHkoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpc0VuZDogKC4uLmFyZ3MpID0+IGlzRW5kKGVkaXRvciwgLi4uYXJncyksXG4gICAgaXNOb3JtYWxpemluZzogKC4uLmFyZ3MpID0+IGlzTm9ybWFsaXppbmcoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpc1N0YXJ0OiAoLi4uYXJncykgPT4gaXNTdGFydChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGxhc3Q6ICguLi5hcmdzKSA9PiBsYXN0KGVkaXRvciwgLi4uYXJncyksXG4gICAgbGVhZjogKC4uLmFyZ3MpID0+IGxlYWYoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBsZXZlbHM6ICguLi5hcmdzKSA9PiBsZXZlbHMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBsaWZ0Tm9kZXM6ICguLi5hcmdzKSA9PiBsaWZ0Tm9kZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBtZXJnZU5vZGVzOiAoLi4uYXJncykgPT4gbWVyZ2VOb2RlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIG1vdmU6ICguLi5hcmdzKSA9PiBtb3ZlKGVkaXRvciwgLi4uYXJncyksXG4gICAgbW92ZU5vZGVzOiAoLi4uYXJncykgPT4gbW92ZU5vZGVzKGVkaXRvciwgLi4uYXJncyksXG4gICAgbmV4dDogKC4uLmFyZ3MpID0+IG5leHQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBub2RlOiAoLi4uYXJncykgPT4gbm9kZShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIG5vZGVzOiAoLi4uYXJncykgPT4gbm9kZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBub3JtYWxpemU6ICguLi5hcmdzKSA9PiBub3JtYWxpemUoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBwYXJlbnQ6ICguLi5hcmdzKSA9PiBwYXJlbnQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBwYXRoOiAoLi4uYXJncykgPT4gcGF0aChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHBhdGhSZWY6ICguLi5hcmdzKSA9PiBwYXRoUmVmKGVkaXRvciwgLi4uYXJncyksXG4gICAgcGF0aFJlZnM6ICguLi5hcmdzKSA9PiBwYXRoUmVmcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHBvaW50OiAoLi4uYXJncykgPT4gcG9pbnQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBwb2ludFJlZjogKC4uLmFyZ3MpID0+IHBvaW50UmVmKGVkaXRvciwgLi4uYXJncyksXG4gICAgcG9pbnRSZWZzOiAoLi4uYXJncykgPT4gcG9pbnRSZWZzKGVkaXRvciwgLi4uYXJncyksXG4gICAgcG9zaXRpb25zOiAoLi4uYXJncykgPT4gcG9zaXRpb25zKGVkaXRvciwgLi4uYXJncyksXG4gICAgcHJldmlvdXM6ICguLi5hcmdzKSA9PiBwcmV2aW91cyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHJhbmdlOiAoLi4uYXJncykgPT4gcmFuZ2UoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICByYW5nZVJlZjogKC4uLmFyZ3MpID0+IHJhbmdlUmVmKGVkaXRvciwgLi4uYXJncyksXG4gICAgcmFuZ2VSZWZzOiAoLi4uYXJncykgPT4gcmFuZ2VSZWZzKGVkaXRvciwgLi4uYXJncyksXG4gICAgcmVtb3ZlTm9kZXM6ICguLi5hcmdzKSA9PiByZW1vdmVOb2RlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHNlbGVjdDogKC4uLmFyZ3MpID0+IHNlbGVjdChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHNldE5vZGVzOiAoLi4uYXJncykgPT4gc2V0Tm9kZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBzZXROb3JtYWxpemluZzogKC4uLmFyZ3MpID0+IHNldE5vcm1hbGl6aW5nKGVkaXRvciwgLi4uYXJncyksXG4gICAgc2V0UG9pbnQ6ICguLi5hcmdzKSA9PiBzZXRQb2ludChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHNldFNlbGVjdGlvbjogKC4uLmFyZ3MpID0+IHNldFNlbGVjdGlvbihlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHNwbGl0Tm9kZXM6ICguLi5hcmdzKSA9PiBzcGxpdE5vZGVzKGVkaXRvciwgLi4uYXJncyksXG4gICAgc3RhcnQ6ICguLi5hcmdzKSA9PiBzdGFydChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHN0cmluZzogKC4uLmFyZ3MpID0+IHN0cmluZyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHVuaGFuZ1JhbmdlOiAoLi4uYXJncykgPT4gdW5oYW5nUmFuZ2UoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICB1bnNldE5vZGVzOiAoLi4uYXJncykgPT4gdW5zZXROb2RlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHVud3JhcE5vZGVzOiAoLi4uYXJncykgPT4gdW53cmFwTm9kZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICB2b2lkOiAoLi4uYXJncykgPT4gZ2V0Vm9pZChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHdpdGhvdXROb3JtYWxpemluZzogKC4uLmFyZ3MpID0+IHdpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHdyYXBOb2RlczogKC4uLmFyZ3MpID0+IHdyYXBOb2RlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICB9XG5cbiAgcmV0dXJuIGVkaXRvclxufVxuIiwgIi8vIENvbXB1dGUgd2hhdCBzY3JvbGxpbmcgbmVlZHMgdG8gYmUgZG9uZSBvbiByZXF1aXJlZCBzY3JvbGxpbmcgYm94ZXMgZm9yIHRhcmdldCB0byBiZSBpbiB2aWV3XG5cbi8vIFRoZSB0eXBlIG5hbWVzIGhlcmUgYXJlIG5hbWVkIGFmdGVyIHRoZSBzcGVjIHRvIG1ha2UgaXQgZWFzaWVyIHRvIGZpbmQgbW9yZSBpbmZvcm1hdGlvbiBhcm91bmQgd2hhdCB0aGV5IG1lYW46XG4vLyBUbyByZWR1Y2UgY2h1cm4gYW5kIHJlZHVjZSB0aGluZ3MgdGhhdCBuZWVkIGJlIG1haW50YWluZWQgdGhpbmdzIGZyb20gdGhlIG9mZmljaWFsIFRTIERPTSBsaWJyYXJ5IGlzIHVzZWQgaGVyZVxuLy8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzc29tLXZpZXcvXG5cbi8vIEZvciBhIGRlZmluaXRpb24gb24gd2hhdCBpcyBcImJsb2NrIGZsb3cgZGlyZWN0aW9uXCIgZXhhY3RseSwgY2hlY2sgdGhpczogaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy13cml0aW5nLW1vZGVzLTQvI2Jsb2NrLWZsb3ctZGlyZWN0aW9uXG5cbi8vIGFkZCBzdXBwb3J0IGZvciB2aXN1YWxWaWV3cG9ydCBvYmplY3QgY3VycmVudGx5IGltcGxlbWVudGVkIGluIGNocm9tZVxuaW50ZXJmYWNlIHZpc3VhbFZpZXdwb3J0IHtcbiAgaGVpZ2h0OiBudW1iZXJcbiAgd2lkdGg6IG51bWJlclxufVxuXG50eXBlIFNjcm9sbExvZ2ljYWxQb3NpdGlvbiA9ICdzdGFydCcgfCAnY2VudGVyJyB8ICdlbmQnIHwgJ25lYXJlc3QnXG4vLyBUaGlzIG5ldyBvcHRpb24gaXMgdHJhY2tlZCBpbiB0aGlzIFBSLCB3aGljaCBpcyB0aGUgbW9zdCBsaWtlbHkgY2FuZGlkYXRlIGF0IHRoZSB0aW1lOiBodHRwczovL2dpdGh1Yi5jb20vdzNjL2Nzc3dnLWRyYWZ0cy9wdWxsLzE4MDVcbnR5cGUgU2Nyb2xsTW9kZSA9ICdhbHdheXMnIHwgJ2lmLW5lZWRlZCdcbi8vIE5ldyBvcHRpb24gdGhhdCBza2lwcyBhdXRvLXNjcm9sbGluZyBhbGwgbm9kZXMgd2l0aCBvdmVyZmxvdzogaGlkZGVuIHNldFxuLy8gU2VlIEZGIGltcGxlbWVudGF0aW9uOiBodHRwczovL2hnLm1vemlsbGEub3JnL2ludGVncmF0aW9uL2Z4LXRlYW0vcmV2L2M0OGMzZWMwNTAxMiNsNy4xOFxudHlwZSBTa2lwT3ZlcmZsb3dIaWRkZW5FbGVtZW50cyA9IGJvb2xlYW5cblxuaW50ZXJmYWNlIE9wdGlvbnMge1xuICBibG9jaz86IFNjcm9sbExvZ2ljYWxQb3NpdGlvblxuICBpbmxpbmU/OiBTY3JvbGxMb2dpY2FsUG9zaXRpb25cbiAgc2Nyb2xsTW9kZT86IFNjcm9sbE1vZGVcbiAgYm91bmRhcnk/OiBDdXN0b21TY3JvbGxCb3VuZGFyeVxuICBza2lwT3ZlcmZsb3dIaWRkZW5FbGVtZW50cz86IFNraXBPdmVyZmxvd0hpZGRlbkVsZW1lbnRzXG59XG5cbi8vIEN1c3RvbSBiZWhhdmlvciwgbm90IGluIGFueSBzcGVjXG50eXBlIEN1c3RvbVNjcm9sbEJvdW5kYXJ5Q2FsbGJhY2sgPSAocGFyZW50OiBFbGVtZW50KSA9PiBib29sZWFuXG50eXBlIEN1c3RvbVNjcm9sbEJvdW5kYXJ5ID0gRWxlbWVudCB8IEN1c3RvbVNjcm9sbEJvdW5kYXJ5Q2FsbGJhY2sgfCBudWxsXG5pbnRlcmZhY2UgQ3VzdG9tU2Nyb2xsQWN0aW9uIHtcbiAgZWw6IEVsZW1lbnRcbiAgdG9wOiBudW1iZXJcbiAgbGVmdDogbnVtYmVyXG59XG5cbi8vIEBUT0RPIGJldHRlciBzaGFkb3dkb20gdGVzdCwgMTEgPSBkb2N1bWVudCBmcmFnbWVudFxuZnVuY3Rpb24gaXNFbGVtZW50KGVsOiBhbnkpOiBlbCBpcyBFbGVtZW50IHtcbiAgcmV0dXJuIHR5cGVvZiBlbCA9PT0gJ29iamVjdCcgJiYgZWwgIT0gbnVsbCAmJiBlbC5ub2RlVHlwZSA9PT0gMVxufVxuXG5mdW5jdGlvbiBjYW5PdmVyZmxvdyhcbiAgb3ZlcmZsb3c6IHN0cmluZyB8IG51bGwsXG4gIHNraXBPdmVyZmxvd0hpZGRlbkVsZW1lbnRzPzogYm9vbGVhblxuKSB7XG4gIGlmIChza2lwT3ZlcmZsb3dIaWRkZW5FbGVtZW50cyAmJiBvdmVyZmxvdyA9PT0gJ2hpZGRlbicpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiBvdmVyZmxvdyAhPT0gJ3Zpc2libGUnICYmIG92ZXJmbG93ICE9PSAnY2xpcCdcbn1cblxuZnVuY3Rpb24gZ2V0RnJhbWVFbGVtZW50KGVsOiBFbGVtZW50KSB7XG4gIGlmICghZWwub3duZXJEb2N1bWVudCB8fCAhZWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldykge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICB0cnkge1xuICAgIHJldHVybiBlbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmZyYW1lRWxlbWVudFxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0hpZGRlbkJ5RnJhbWUoZWw6IEVsZW1lbnQpOiBib29sZWFuIHtcbiAgY29uc3QgZnJhbWUgPSBnZXRGcmFtZUVsZW1lbnQoZWwpXG4gIGlmICghZnJhbWUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgZnJhbWUuY2xpZW50SGVpZ2h0IDwgZWwuc2Nyb2xsSGVpZ2h0IHx8IGZyYW1lLmNsaWVudFdpZHRoIDwgZWwuc2Nyb2xsV2lkdGhcbiAgKVxufVxuXG5mdW5jdGlvbiBpc1Njcm9sbGFibGUoZWw6IEVsZW1lbnQsIHNraXBPdmVyZmxvd0hpZGRlbkVsZW1lbnRzPzogYm9vbGVhbikge1xuICBpZiAoZWwuY2xpZW50SGVpZ2h0IDwgZWwuc2Nyb2xsSGVpZ2h0IHx8IGVsLmNsaWVudFdpZHRoIDwgZWwuc2Nyb2xsV2lkdGgpIHtcbiAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpXG4gICAgcmV0dXJuIChcbiAgICAgIGNhbk92ZXJmbG93KHN0eWxlLm92ZXJmbG93WSwgc2tpcE92ZXJmbG93SGlkZGVuRWxlbWVudHMpIHx8XG4gICAgICBjYW5PdmVyZmxvdyhzdHlsZS5vdmVyZmxvd1gsIHNraXBPdmVyZmxvd0hpZGRlbkVsZW1lbnRzKSB8fFxuICAgICAgaXNIaWRkZW5CeUZyYW1lKGVsKVxuICAgIClcbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuLyoqXG4gKiBGaW5kIG91dCB3aGljaCBlZGdlIHRvIGFsaWduIGFnYWluc3Qgd2hlbiBsb2dpY2FsIHNjcm9sbCBwb3NpdGlvbiBpcyBcIm5lYXJlc3RcIlxuICogSW50ZXJlc3RpbmcgZmFjdDogXCJuZWFyZXN0XCIgd29ya3Mgc2ltaWxhcmlseSB0byBcImlmLW5lZWRlZFwiLCBpZiB0aGUgZWxlbWVudCBpcyBmdWxseSB2aXNpYmxlIGl0IHdpbGwgbm90IHNjcm9sbCBpdFxuICpcbiAqIExlZ2VuZHM6XG4gKiDilIzilIDilIDilIDilIDilIDilIDilIDilIDilJAg4pSPIOKUgSDilIEg4pSBIOKUk1xuICog4pSCIHRhcmdldCDilIIgICBmcmFtZVxuICog4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYIOKUlyDilIEg4pSBIOKUgSDilJtcbiAqL1xuZnVuY3Rpb24gYWxpZ25OZWFyZXN0KFxuICBzY3JvbGxpbmdFZGdlU3RhcnQ6IG51bWJlcixcbiAgc2Nyb2xsaW5nRWRnZUVuZDogbnVtYmVyLFxuICBzY3JvbGxpbmdTaXplOiBudW1iZXIsXG4gIHNjcm9sbGluZ0JvcmRlclN0YXJ0OiBudW1iZXIsXG4gIHNjcm9sbGluZ0JvcmRlckVuZDogbnVtYmVyLFxuICBlbGVtZW50RWRnZVN0YXJ0OiBudW1iZXIsXG4gIGVsZW1lbnRFZGdlRW5kOiBudW1iZXIsXG4gIGVsZW1lbnRTaXplOiBudW1iZXJcbikge1xuICAvKipcbiAgICogSWYgZWxlbWVudCBlZGdlIEEgYW5kIGVsZW1lbnQgZWRnZSBCIGFyZSBib3RoIG91dHNpZGUgc2Nyb2xsaW5nIGJveCBlZGdlIEEgYW5kIHNjcm9sbGluZyBib3ggZWRnZSBCXG4gICAqXG4gICAqICAgICAgICAgIOKUjOKUgOKUgOKUkFxuICAgKiAgICAgICAg4pSP4pSB4pSC4pSB4pSB4pSC4pSB4pSTXG4gICAqICAgICAgICAgIOKUgiAg4pSCXG4gICAqICAgICAgICDilIMg4pSCICDilIIg4pSDICAgICAgICBkbyBub3RoaW5nXG4gICAqICAgICAgICAgIOKUgiAg4pSCXG4gICAqICAgICAgICDilJfilIHilILilIHilIHilILilIHilJtcbiAgICogICAgICAgICAg4pSU4pSA4pSA4pSYXG4gICAqXG4gICAqICBJZiBlbGVtZW50IGVkZ2UgQyBhbmQgZWxlbWVudCBlZGdlIEQgYXJlIGJvdGggb3V0c2lkZSBzY3JvbGxpbmcgYm94IGVkZ2UgQyBhbmQgc2Nyb2xsaW5nIGJveCBlZGdlIERcbiAgICpcbiAgICogICAg4pSPIOKUgSDilIEg4pSBIOKUgSDilJNcbiAgICogICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJBcbiAgICogICDilILilIMgICAgICAgICDilIPilIIgICAgICAgIGRvIG5vdGhpbmdcbiAgICogICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJhcbiAgICogICAg4pSXIOKUgSDilIEg4pSBIOKUgSDilJtcbiAgICovXG4gIGlmIChcbiAgICAoZWxlbWVudEVkZ2VTdGFydCA8IHNjcm9sbGluZ0VkZ2VTdGFydCAmJlxuICAgICAgZWxlbWVudEVkZ2VFbmQgPiBzY3JvbGxpbmdFZGdlRW5kKSB8fFxuICAgIChlbGVtZW50RWRnZVN0YXJ0ID4gc2Nyb2xsaW5nRWRnZVN0YXJ0ICYmIGVsZW1lbnRFZGdlRW5kIDwgc2Nyb2xsaW5nRWRnZUVuZClcbiAgKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBlbGVtZW50IGVkZ2UgQSBpcyBvdXRzaWRlIHNjcm9sbGluZyBib3ggZWRnZSBBIGFuZCBlbGVtZW50IGhlaWdodCBpcyBsZXNzIHRoYW4gc2Nyb2xsaW5nIGJveCBoZWlnaHRcbiAgICpcbiAgICogICAgICAgICAg4pSM4pSA4pSA4pSQXG4gICAqICAgICAgICDilI/ilIHilILilIHilIHilILilIHilJMgICAgICAgICDilI/ilIHilIzilIHilIHilJDilIHilJNcbiAgICogICAgICAgICAg4pSU4pSA4pSA4pSYICAgICAgICAgICAgIOKUgiAg4pSCXG4gICAqICBmcm9tICDilIMgICAgICDilIMgICAgIHRvICDilIMg4pSU4pSA4pSA4pSYIOKUg1xuICAgKlxuICAgKiAgICAgICAg4pSX4pSBIOKUgeKUgSDilIHilJsgICAgICAgICDilJfilIEg4pSB4pSBIOKUgeKUm1xuICAgKlxuICAgKiBJZiBlbGVtZW50IGVkZ2UgQiBpcyBvdXRzaWRlIHNjcm9sbGluZyBib3ggZWRnZSBCIGFuZCBlbGVtZW50IGhlaWdodCBpcyBncmVhdGVyIHRoYW4gc2Nyb2xsaW5nIGJveCBoZWlnaHRcbiAgICpcbiAgICogICAgICAgIOKUj+KUgSDilIHilIEg4pSB4pSTICAgICAgICAg4pSP4pSB4pSM4pSB4pSB4pSQ4pSB4pSTXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSCICDilIJcbiAgICogIGZyb20gIOKUgyDilIzilIDilIDilJAg4pSDICAgICB0byAg4pSDIOKUgiAg4pSCIOKUg1xuICAgKiAgICAgICAgICDilIIgIOKUgiAgICAgICAgICAgICDilIIgIOKUglxuICAgKiAgICAgICAg4pSX4pSB4pSC4pSB4pSB4pSC4pSB4pSbICAgICAgICAg4pSX4pSB4pSC4pSB4pSB4pSC4pSB4pSbXG4gICAqICAgICAgICAgIOKUgiAg4pSCICAgICAgICAgICAgIOKUlOKUgOKUgOKUmFxuICAgKiAgICAgICAgICDilIIgIOKUglxuICAgKiAgICAgICAgICDilJTilIDilIDilJhcbiAgICpcbiAgICogSWYgZWxlbWVudCBlZGdlIEMgaXMgb3V0c2lkZSBzY3JvbGxpbmcgYm94IGVkZ2UgQyBhbmQgZWxlbWVudCB3aWR0aCBpcyBsZXNzIHRoYW4gc2Nyb2xsaW5nIGJveCB3aWR0aFxuICAgKlxuICAgKiAgICAgICBmcm9tICAgICAgICAgICAgICAgICB0b1xuICAgKiAgICDilI8g4pSBIOKUgSDilIEg4pSBIOKUkyAgICAgICAgIOKUjyDilIEg4pSBIOKUgSDilIEg4pSTXG4gICAqICDilIzilIDilIDilIDilJAgICAgICAgICAgICAgICAgIOKUjOKUgOKUgOKUgOKUkFxuICAgKiAg4pSCIOKUgyDilIIgICAgICAg4pSDICAgICAgICAg4pSDICAg4pSCICAgICDilINcbiAgICogIOKUlOKUgOKUgOKUgOKUmCAgICAgICAgICAgICAgICAg4pSU4pSA4pSA4pSA4pSYXG4gICAqICAgIOKUlyDilIEg4pSBIOKUgSDilIEg4pSbICAgICAgICAg4pSXIOKUgSDilIEg4pSBIOKUgSDilJtcbiAgICpcbiAgICogSWYgZWxlbWVudCBlZGdlIEQgaXMgb3V0c2lkZSBzY3JvbGxpbmcgYm94IGVkZ2UgRCBhbmQgZWxlbWVudCB3aWR0aCBpcyBncmVhdGVyIHRoYW4gc2Nyb2xsaW5nIGJveCB3aWR0aFxuICAgKlxuICAgKiAgICAgICBmcm9tICAgICAgICAgICAgICAgICB0b1xuICAgKiAgICDilI8g4pSBIOKUgSDilIEg4pSBIOKUkyAgICAgICAgIOKUjyDilIEg4pSBIOKUgSDilIEg4pSTXG4gICAqICAgICAgICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAgICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJBcbiAgICogICAg4pSDICAg4pSCICAgICDilIMgICAgIOKUgiAgIOKUgyAgICAgICAgIOKUgyDilIJcbiAgICogICAgICAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmFxuICAgKiAgICDilJcg4pSBIOKUgSDilIEg4pSBIOKUmyAgICAgICAgIOKUlyDilIEg4pSBIOKUgSDilIEg4pSbXG4gICAqL1xuICBpZiAoXG4gICAgKGVsZW1lbnRFZGdlU3RhcnQgPD0gc2Nyb2xsaW5nRWRnZVN0YXJ0ICYmIGVsZW1lbnRTaXplIDw9IHNjcm9sbGluZ1NpemUpIHx8XG4gICAgKGVsZW1lbnRFZGdlRW5kID49IHNjcm9sbGluZ0VkZ2VFbmQgJiYgZWxlbWVudFNpemUgPj0gc2Nyb2xsaW5nU2l6ZSlcbiAgKSB7XG4gICAgcmV0dXJuIGVsZW1lbnRFZGdlU3RhcnQgLSBzY3JvbGxpbmdFZGdlU3RhcnQgLSBzY3JvbGxpbmdCb3JkZXJTdGFydFxuICB9XG5cbiAgLyoqXG4gICAqIElmIGVsZW1lbnQgZWRnZSBCIGlzIG91dHNpZGUgc2Nyb2xsaW5nIGJveCBlZGdlIEIgYW5kIGVsZW1lbnQgaGVpZ2h0IGlzIGxlc3MgdGhhbiBzY3JvbGxpbmcgYm94IGhlaWdodFxuICAgKlxuICAgKiAgICAgICAg4pSP4pSBIOKUgeKUgSDilIHilJMgICAgICAgICDilI/ilIEg4pSB4pSBIOKUgeKUk1xuICAgKlxuICAgKiAgZnJvbSAg4pSDICAgICAg4pSDICAgICB0byAg4pSDIOKUjOKUgOKUgOKUkCDilINcbiAgICogICAgICAgICAg4pSM4pSA4pSA4pSQICAgICAgICAgICAgIOKUgiAg4pSCXG4gICAqICAgICAgICDilJfilIHilILilIHilIHilILilIHilJsgICAgICAgICDilJfilIHilJTilIHilIHilJjilIHilJtcbiAgICogICAgICAgICAg4pSU4pSA4pSA4pSYXG4gICAqXG4gICAqIElmIGVsZW1lbnQgZWRnZSBBIGlzIG91dHNpZGUgc2Nyb2xsaW5nIGJveCBlZGdlIEEgYW5kIGVsZW1lbnQgaGVpZ2h0IGlzIGdyZWF0ZXIgdGhhbiBzY3JvbGxpbmcgYm94IGhlaWdodFxuICAgKlxuICAgKiAgICAgICAgICDilIzilIDilIDilJBcbiAgICogICAgICAgICAg4pSCICDilIJcbiAgICogICAgICAgICAg4pSCICDilIIgICAgICAgICAgICAg4pSM4pSA4pSA4pSQXG4gICAqICAgICAgICDilI/ilIHilILilIHilIHilILilIHilJMgICAgICAgICDilI/ilIHilILilIHilIHilILilIHilJNcbiAgICogICAgICAgICAg4pSCICDilIIgICAgICAgICAgICAg4pSCICDilIJcbiAgICogIGZyb20gIOKUgyDilJTilIDilIDilJgg4pSDICAgICB0byAg4pSDIOKUgiAg4pSCIOKUg1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUgiAg4pSCXG4gICAqICAgICAgICDilJfilIEg4pSB4pSBIOKUgeKUmyAgICAgICAgIOKUl+KUgeKUlOKUgeKUgeKUmOKUgeKUm1xuICAgKlxuICAgKiBJZiBlbGVtZW50IGVkZ2UgQyBpcyBvdXRzaWRlIHNjcm9sbGluZyBib3ggZWRnZSBDIGFuZCBlbGVtZW50IHdpZHRoIGlzIGdyZWF0ZXIgdGhhbiBzY3JvbGxpbmcgYm94IHdpZHRoXG4gICAqXG4gICAqICAgICAgICAgICBmcm9tICAgICAgICAgICAgICAgICB0b1xuICAgKiAgICAgICAg4pSPIOKUgSDilIEg4pSBIOKUgSDilJMgICAgICAgICDilI8g4pSBIOKUgSDilIEg4pSBIOKUk1xuICAgKiAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQICAgICAgICAgICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJBcbiAgICogIOKUgiAgICAg4pSDICAgICDilIIgICDilIMgICAgICAg4pSCIOKUgyAgICAgICAgIOKUg1xuICAgKiAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYICAgICAgICAgICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJhcbiAgICogICAgICAgIOKUlyDilIEg4pSBIOKUgSDilIEg4pSbICAgICAgICAg4pSXIOKUgSDilIEg4pSBIOKUgSDilJtcbiAgICpcbiAgICogSWYgZWxlbWVudCBlZGdlIEQgaXMgb3V0c2lkZSBzY3JvbGxpbmcgYm94IGVkZ2UgRCBhbmQgZWxlbWVudCB3aWR0aCBpcyBsZXNzIHRoYW4gc2Nyb2xsaW5nIGJveCB3aWR0aFxuICAgKlxuICAgKiAgICAgICAgICAgZnJvbSAgICAgICAgICAgICAgICAgdG9cbiAgICogICAgICAgIOKUjyDilIEg4pSBIOKUgSDilIEg4pSTICAgICAgICAg4pSPIOKUgSDilIEg4pSBIOKUgSDilJNcbiAgICogICAgICAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSQICAgICAgICAgICAgIOKUjOKUgOKUgOKUgOKUkFxuICAgKiAgICAgICAg4pSDICAgICAgIOKUgiDilIMg4pSCICAgICAgIOKUgyAgICAg4pSCICAg4pSDXG4gICAqICAgICAgICAgICAgICAgIOKUlOKUgOKUgOKUgOKUmCAgICAgICAgICAgICDilJTilIDilIDilIDilJhcbiAgICogICAgICAgIOKUlyDilIEg4pSBIOKUgSDilIEg4pSbICAgICAgICAg4pSXIOKUgSDilIEg4pSBIOKUgSDilJtcbiAgICpcbiAgICovXG4gIGlmIChcbiAgICAoZWxlbWVudEVkZ2VFbmQgPiBzY3JvbGxpbmdFZGdlRW5kICYmIGVsZW1lbnRTaXplIDwgc2Nyb2xsaW5nU2l6ZSkgfHxcbiAgICAoZWxlbWVudEVkZ2VTdGFydCA8IHNjcm9sbGluZ0VkZ2VTdGFydCAmJiBlbGVtZW50U2l6ZSA+IHNjcm9sbGluZ1NpemUpXG4gICkge1xuICAgIHJldHVybiBlbGVtZW50RWRnZUVuZCAtIHNjcm9sbGluZ0VkZ2VFbmQgKyBzY3JvbGxpbmdCb3JkZXJFbmRcbiAgfVxuXG4gIHJldHVybiAwXG59XG5cbmZ1bmN0aW9uIGdldFBhcmVudEVsZW1lbnQoZWxlbWVudDogTm9kZSk6IEVsZW1lbnQgfCBudWxsIHtcbiAgY29uc3QgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50XG4gIGlmIChwYXJlbnQgPT0gbnVsbCkge1xuICAgIHJldHVybiAoZWxlbWVudC5nZXRSb290Tm9kZSgpIGFzIFNoYWRvd1Jvb3QpLmhvc3QgfHwgbnVsbFxuICB9XG4gIHJldHVybiBwYXJlbnRcbn1cblxuZXhwb3J0IGRlZmF1bHQgKHRhcmdldDogRWxlbWVudCwgb3B0aW9uczogT3B0aW9ucyk6IEN1c3RvbVNjcm9sbEFjdGlvbltdID0+IHtcbiAgLy9UT0RPOiByZW1vdmUgdGhpcyBoYWNrIHdoZW4gbWljcm9idW5kbGUgd2lsbCBzdXBwb3J0IHR5cGVzY3JpcHQgPj0gNC4wXG4gIGNvbnN0IHdpbmRvd1dpdGhWaWV3cG9ydCA9IHdpbmRvdyBhcyB1bmtub3duIGFzIFdpbmRvdyAmIHtcbiAgICB2aXN1YWxWaWV3cG9ydDogdmlzdWFsVmlld3BvcnRcbiAgfVxuXG4gIGNvbnN0IHsgc2Nyb2xsTW9kZSwgYmxvY2ssIGlubGluZSwgYm91bmRhcnksIHNraXBPdmVyZmxvd0hpZGRlbkVsZW1lbnRzIH0gPVxuICAgIG9wdGlvbnNcbiAgLy8gQWxsb3cgdXNpbmcgYSBjYWxsYmFjayB0byBjaGVjayB0aGUgYm91bmRhcnlcbiAgLy8gVGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgdG8gY2hlY2sgaWYgdGhlIGN1cnJlbnQgdGFyZ2V0IG1hdGNoZXMgdGhlIGJvdW5kYXJ5IGVsZW1lbnQgb3Igbm90XG4gIC8vIElmIHVuZGVmaW5lZCBpdCdsbCBjaGVjayB0aGF0IHRhcmdldCBpcyBuZXZlciB1bmRlZmluZWQgKGNhbiBoYXBwZW4gYXMgd2UgcmVjdXJzZSB1cCB0aGUgdHJlZSlcbiAgY29uc3QgY2hlY2tCb3VuZGFyeSA9XG4gICAgdHlwZW9mIGJvdW5kYXJ5ID09PSAnZnVuY3Rpb24nID8gYm91bmRhcnkgOiAobm9kZTogYW55KSA9PiBub2RlICE9PSBib3VuZGFyeVxuXG4gIGlmICghaXNFbGVtZW50KHRhcmdldCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHRhcmdldCcpXG4gIH1cblxuICAvLyBVc2VkIHRvIGhhbmRsZSB0aGUgdG9wIG1vc3QgZWxlbWVudCB0aGF0IGNhbiBiZSBzY3JvbGxlZFxuICBjb25zdCBzY3JvbGxpbmdFbGVtZW50ID0gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcblxuICAvLyBDb2xsZWN0IGFsbCB0aGUgc2Nyb2xsaW5nIGJveGVzLCBhcyBkZWZpbmVkIGluIHRoZSBzcGVjOiBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20tdmlldy8jc2Nyb2xsaW5nLWJveFxuICBjb25zdCBmcmFtZXM6IEVsZW1lbnRbXSA9IFtdXG4gIGxldCBjdXJzb3I6IEVsZW1lbnQgfCBudWxsID0gdGFyZ2V0XG4gIHdoaWxlIChpc0VsZW1lbnQoY3Vyc29yKSAmJiBjaGVja0JvdW5kYXJ5KGN1cnNvcikpIHtcbiAgICAvLyBNb3ZlIGN1cnNvciB0byBwYXJlbnRcbiAgICBjdXJzb3IgPSBnZXRQYXJlbnRFbGVtZW50KGN1cnNvcilcblxuICAgIC8vIFN0b3Agd2hlbiB3ZSByZWFjaCB0aGUgdmlld3BvcnRcbiAgICBpZiAoY3Vyc29yID09PSBzY3JvbGxpbmdFbGVtZW50KSB7XG4gICAgICBmcmFtZXMucHVzaChjdXJzb3IpXG4gICAgICBicmVha1xuICAgIH1cblxuICAgIC8vIFNraXAgZG9jdW1lbnQuYm9keSBpZiBpdCdzIG5vdCB0aGUgc2Nyb2xsaW5nRWxlbWVudCBhbmQgZG9jdW1lbnRFbGVtZW50IGlzbid0IGluZGVwZW5kZW50bHkgc2Nyb2xsYWJsZVxuICAgIGlmIChcbiAgICAgIGN1cnNvciAhPSBudWxsICYmXG4gICAgICBjdXJzb3IgPT09IGRvY3VtZW50LmJvZHkgJiZcbiAgICAgIGlzU2Nyb2xsYWJsZShjdXJzb3IpICYmXG4gICAgICAhaXNTY3JvbGxhYmxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudClcbiAgICApIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgLy8gTm93IHdlIGNoZWNrIGlmIHRoZSBlbGVtZW50IGlzIHNjcm9sbGFibGUsIHRoaXMgY29kZSBvbmx5IHJ1bnMgaWYgdGhlIGxvb3AgaGF2ZW4ndCBhbHJlYWR5IGhpdCB0aGUgdmlld3BvcnQgb3IgYSBjdXN0b20gYm91bmRhcnlcbiAgICBpZiAoY3Vyc29yICE9IG51bGwgJiYgaXNTY3JvbGxhYmxlKGN1cnNvciwgc2tpcE92ZXJmbG93SGlkZGVuRWxlbWVudHMpKSB7XG4gICAgICBmcmFtZXMucHVzaChjdXJzb3IpXG4gICAgfVxuICB9XG5cbiAgLy8gU3VwcG9ydCBwaW5jaC16b29taW5nIHByb3Blcmx5LCBtYWtpbmcgc3VyZSBlbGVtZW50cyBzY3JvbGwgaW50byB0aGUgdmlzdWFsIHZpZXdwb3J0XG4gIC8vIEJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCB2aXN1YWxWaWV3cG9ydCB3aWxsIHJlcG9ydCB0aGUgbGF5b3V0IHZpZXdwb3J0IGRpbWVuc2lvbnMgb24gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoL0hlaWdodFxuICAvLyBhbmQgdmlld3BvcnQgZGltZW5zaW9ucyBvbiB3aW5kb3cuaW5uZXJXaWR0aC9IZWlnaHRcbiAgLy8gaHR0cHM6Ly93d3cucXVpcmtzbW9kZS5vcmcvbW9iaWxlL3ZpZXdwb3J0czIuaHRtbFxuICAvLyBodHRwczovL2Jva2FuZC5naXRodWIuaW8vdmlld3BvcnQvaW5kZXguaHRtbFxuICBjb25zdCB2aWV3cG9ydFdpZHRoID0gd2luZG93V2l0aFZpZXdwb3J0LnZpc3VhbFZpZXdwb3J0XG4gICAgPyB3aW5kb3dXaXRoVmlld3BvcnQudmlzdWFsVmlld3BvcnQud2lkdGhcbiAgICA6IGlubmVyV2lkdGhcbiAgY29uc3Qgdmlld3BvcnRIZWlnaHQgPSB3aW5kb3dXaXRoVmlld3BvcnQudmlzdWFsVmlld3BvcnRcbiAgICA/IHdpbmRvd1dpdGhWaWV3cG9ydC52aXN1YWxWaWV3cG9ydC5oZWlnaHRcbiAgICA6IGlubmVySGVpZ2h0XG5cbiAgLy8gTmV3ZXIgYnJvd3NlcnMgc3VwcG9ydHMgc2Nyb2xsW1h8WV0sIHBhZ2VbWHxZXU9mZnNldCBpc1xuICBjb25zdCB2aWV3cG9ydFggPSB3aW5kb3cuc2Nyb2xsWCB8fCBwYWdlWE9mZnNldFxuICBjb25zdCB2aWV3cG9ydFkgPSB3aW5kb3cuc2Nyb2xsWSB8fCBwYWdlWU9mZnNldFxuXG4gIGNvbnN0IHtcbiAgICBoZWlnaHQ6IHRhcmdldEhlaWdodCxcbiAgICB3aWR0aDogdGFyZ2V0V2lkdGgsXG4gICAgdG9wOiB0YXJnZXRUb3AsXG4gICAgcmlnaHQ6IHRhcmdldFJpZ2h0LFxuICAgIGJvdHRvbTogdGFyZ2V0Qm90dG9tLFxuICAgIGxlZnQ6IHRhcmdldExlZnQsXG4gIH0gPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuICAvLyBUaGVzZSB2YWx1ZXMgbXV0YXRlIGFzIHdlIGxvb3AgdGhyb3VnaCBhbmQgZ2VuZXJhdGUgc2Nyb2xsIGNvb3JkaW5hdGVzXG4gIGxldCB0YXJnZXRCbG9jazogbnVtYmVyID1cbiAgICBibG9jayA9PT0gJ3N0YXJ0JyB8fCBibG9jayA9PT0gJ25lYXJlc3QnXG4gICAgICA/IHRhcmdldFRvcFxuICAgICAgOiBibG9jayA9PT0gJ2VuZCdcbiAgICAgID8gdGFyZ2V0Qm90dG9tXG4gICAgICA6IHRhcmdldFRvcCArIHRhcmdldEhlaWdodCAvIDIgLy8gYmxvY2sgPT09ICdjZW50ZXJcbiAgbGV0IHRhcmdldElubGluZTogbnVtYmVyID1cbiAgICBpbmxpbmUgPT09ICdjZW50ZXInXG4gICAgICA/IHRhcmdldExlZnQgKyB0YXJnZXRXaWR0aCAvIDJcbiAgICAgIDogaW5saW5lID09PSAnZW5kJ1xuICAgICAgPyB0YXJnZXRSaWdodFxuICAgICAgOiB0YXJnZXRMZWZ0IC8vIGlubGluZSA9PT0gJ3N0YXJ0IHx8IGlubGluZSA9PT0gJ25lYXJlc3RcblxuICAvLyBDb2xsZWN0IG5ldyBzY3JvbGwgcG9zaXRpb25zXG4gIGNvbnN0IGNvbXB1dGF0aW9uczogQ3VzdG9tU2Nyb2xsQWN0aW9uW10gPSBbXVxuICAvLyBJbiBjaHJvbWUgdGhlcmUncyBubyBsb25nZXIgYSBkaWZmZXJlbmNlIGJldHdlZW4gY2FjaGluZyB0aGUgYGZyYW1lcy5sZW5ndGhgIHRvIGEgdmFyIG9yIG5vdCwgc28gd2UgZG9uJ3QgaW4gdGhpcyBjYXNlIChzaXplID4gc3BlZWQgYW55d2F5cylcbiAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGZyYW1lcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBjb25zdCBmcmFtZSA9IGZyYW1lc1tpbmRleF1cblxuICAgIC8vIEBUT0RPIGFkZCBhIHNob3VsZFNjcm9sbCBob29rIGhlcmUgdGhhdCBhbGxvd3MgdXNlcmxhbmQgY29kZSB0byB0YWtlIGNvbnRyb2xcblxuICAgIGNvbnN0IHsgaGVpZ2h0LCB3aWR0aCwgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0IH0gPVxuICAgICAgZnJhbWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuICAgIC8vIElmIHRoZSBlbGVtZW50IGlzIGFscmVhZHkgdmlzaWJsZSB3ZSBjYW4gZW5kIGl0IGhlcmVcbiAgICAvLyBAVE9ETyB0YXJnZXRCbG9jayBhbmQgdGFyZ2V0SW5saW5lIHNob3VsZCBiZSB0YWtlbiBpbnRvIGFjY291bnQgdG8gYmUgY29tcGxpYW50IHdpdGggaHR0cHM6Ly9naXRodWIuY29tL3czYy9jc3N3Zy1kcmFmdHMvcHVsbC8xODA1L2ZpbGVzI2RpZmYtM2MxN2YwZTQzYzIwZjhlY2Y4OTQxOWQ0OWU3ZWY1ZTBSMTMzM1xuICAgIGlmIChcbiAgICAgIHNjcm9sbE1vZGUgPT09ICdpZi1uZWVkZWQnICYmXG4gICAgICB0YXJnZXRUb3AgPj0gMCAmJlxuICAgICAgdGFyZ2V0TGVmdCA+PSAwICYmXG4gICAgICB0YXJnZXRCb3R0b20gPD0gdmlld3BvcnRIZWlnaHQgJiZcbiAgICAgIHRhcmdldFJpZ2h0IDw9IHZpZXdwb3J0V2lkdGggJiZcbiAgICAgIHRhcmdldFRvcCA+PSB0b3AgJiZcbiAgICAgIHRhcmdldEJvdHRvbSA8PSBib3R0b20gJiZcbiAgICAgIHRhcmdldExlZnQgPj0gbGVmdCAmJlxuICAgICAgdGFyZ2V0UmlnaHQgPD0gcmlnaHRcbiAgICApIHtcbiAgICAgIC8vIEJyZWFrIHRoZSBsb29wIGFuZCByZXR1cm4gdGhlIGNvbXB1dGF0aW9ucyBmb3IgdGhpbmdzIHRoYXQgYXJlIG5vdCBmdWxseSB2aXNpYmxlXG4gICAgICByZXR1cm4gY29tcHV0YXRpb25zXG4gICAgfVxuXG4gICAgY29uc3QgZnJhbWVTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZnJhbWUpXG4gICAgY29uc3QgYm9yZGVyTGVmdCA9IHBhcnNlSW50KGZyYW1lU3R5bGUuYm9yZGVyTGVmdFdpZHRoIGFzIHN0cmluZywgMTApXG4gICAgY29uc3QgYm9yZGVyVG9wID0gcGFyc2VJbnQoZnJhbWVTdHlsZS5ib3JkZXJUb3BXaWR0aCBhcyBzdHJpbmcsIDEwKVxuICAgIGNvbnN0IGJvcmRlclJpZ2h0ID0gcGFyc2VJbnQoZnJhbWVTdHlsZS5ib3JkZXJSaWdodFdpZHRoIGFzIHN0cmluZywgMTApXG4gICAgY29uc3QgYm9yZGVyQm90dG9tID0gcGFyc2VJbnQoZnJhbWVTdHlsZS5ib3JkZXJCb3R0b21XaWR0aCBhcyBzdHJpbmcsIDEwKVxuXG4gICAgbGV0IGJsb2NrU2Nyb2xsOiBudW1iZXIgPSAwXG4gICAgbGV0IGlubGluZVNjcm9sbDogbnVtYmVyID0gMFxuXG4gICAgLy8gVGhlIHByb3BlcnR5IGV4aXN0YW5jZSBjaGVja3MgZm9yIG9mZmZzZXRbV2lkdGh8SGVpZ2h0XSBpcyBiZWNhdXNlIG9ubHkgSFRNTEVsZW1lbnQgb2JqZWN0cyBoYXZlIHRoZW0sIGJ1dCBhbnkgRWxlbWVudCBtaWdodCBwYXNzIGJ5IGhlcmVcbiAgICAvLyBAVE9ETyBmaW5kIG91dCBpZiB0aGUgXCJhcyBIVE1MRWxlbWVudFwiIG92ZXJyaWRlcyBjYW4gYmUgZHJvcHBlZFxuICAgIGNvbnN0IHNjcm9sbGJhcldpZHRoID1cbiAgICAgICdvZmZzZXRXaWR0aCcgaW4gZnJhbWVcbiAgICAgICAgPyAoZnJhbWUgYXMgSFRNTEVsZW1lbnQpLm9mZnNldFdpZHRoIC1cbiAgICAgICAgICAoZnJhbWUgYXMgSFRNTEVsZW1lbnQpLmNsaWVudFdpZHRoIC1cbiAgICAgICAgICBib3JkZXJMZWZ0IC1cbiAgICAgICAgICBib3JkZXJSaWdodFxuICAgICAgICA6IDBcbiAgICBjb25zdCBzY3JvbGxiYXJIZWlnaHQgPVxuICAgICAgJ29mZnNldEhlaWdodCcgaW4gZnJhbWVcbiAgICAgICAgPyAoZnJhbWUgYXMgSFRNTEVsZW1lbnQpLm9mZnNldEhlaWdodCAtXG4gICAgICAgICAgKGZyYW1lIGFzIEhUTUxFbGVtZW50KS5jbGllbnRIZWlnaHQgLVxuICAgICAgICAgIGJvcmRlclRvcCAtXG4gICAgICAgICAgYm9yZGVyQm90dG9tXG4gICAgICAgIDogMFxuXG4gICAgY29uc3Qgc2NhbGVYID1cbiAgICAgICdvZmZzZXRXaWR0aCcgaW4gZnJhbWVcbiAgICAgICAgPyAoZnJhbWUgYXMgSFRNTEVsZW1lbnQpLm9mZnNldFdpZHRoID09PSAwXG4gICAgICAgICAgPyAwXG4gICAgICAgICAgOiB3aWR0aCAvIChmcmFtZSBhcyBIVE1MRWxlbWVudCkub2Zmc2V0V2lkdGhcbiAgICAgICAgOiAwXG4gICAgY29uc3Qgc2NhbGVZID1cbiAgICAgICdvZmZzZXRIZWlnaHQnIGluIGZyYW1lXG4gICAgICAgID8gKGZyYW1lIGFzIEhUTUxFbGVtZW50KS5vZmZzZXRIZWlnaHQgPT09IDBcbiAgICAgICAgICA/IDBcbiAgICAgICAgICA6IGhlaWdodCAvIChmcmFtZSBhcyBIVE1MRWxlbWVudCkub2Zmc2V0SGVpZ2h0XG4gICAgICAgIDogMFxuXG4gICAgaWYgKHNjcm9sbGluZ0VsZW1lbnQgPT09IGZyYW1lKSB7XG4gICAgICAvLyBIYW5kbGUgdmlld3BvcnQgbG9naWMgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCBvciBkb2N1bWVudC5ib2R5KVxuXG4gICAgICBpZiAoYmxvY2sgPT09ICdzdGFydCcpIHtcbiAgICAgICAgYmxvY2tTY3JvbGwgPSB0YXJnZXRCbG9ja1xuICAgICAgfSBlbHNlIGlmIChibG9jayA9PT0gJ2VuZCcpIHtcbiAgICAgICAgYmxvY2tTY3JvbGwgPSB0YXJnZXRCbG9jayAtIHZpZXdwb3J0SGVpZ2h0XG4gICAgICB9IGVsc2UgaWYgKGJsb2NrID09PSAnbmVhcmVzdCcpIHtcbiAgICAgICAgYmxvY2tTY3JvbGwgPSBhbGlnbk5lYXJlc3QoXG4gICAgICAgICAgdmlld3BvcnRZLFxuICAgICAgICAgIHZpZXdwb3J0WSArIHZpZXdwb3J0SGVpZ2h0LFxuICAgICAgICAgIHZpZXdwb3J0SGVpZ2h0LFxuICAgICAgICAgIGJvcmRlclRvcCxcbiAgICAgICAgICBib3JkZXJCb3R0b20sXG4gICAgICAgICAgdmlld3BvcnRZICsgdGFyZ2V0QmxvY2ssXG4gICAgICAgICAgdmlld3BvcnRZICsgdGFyZ2V0QmxvY2sgKyB0YXJnZXRIZWlnaHQsXG4gICAgICAgICAgdGFyZ2V0SGVpZ2h0XG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGJsb2NrID09PSAnY2VudGVyJyBpcyB0aGUgZGVmYXVsdFxuICAgICAgICBibG9ja1Njcm9sbCA9IHRhcmdldEJsb2NrIC0gdmlld3BvcnRIZWlnaHQgLyAyXG4gICAgICB9XG5cbiAgICAgIGlmIChpbmxpbmUgPT09ICdzdGFydCcpIHtcbiAgICAgICAgaW5saW5lU2Nyb2xsID0gdGFyZ2V0SW5saW5lXG4gICAgICB9IGVsc2UgaWYgKGlubGluZSA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgaW5saW5lU2Nyb2xsID0gdGFyZ2V0SW5saW5lIC0gdmlld3BvcnRXaWR0aCAvIDJcbiAgICAgIH0gZWxzZSBpZiAoaW5saW5lID09PSAnZW5kJykge1xuICAgICAgICBpbmxpbmVTY3JvbGwgPSB0YXJnZXRJbmxpbmUgLSB2aWV3cG9ydFdpZHRoXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpbmxpbmUgPT09ICduZWFyZXN0JyBpcyB0aGUgZGVmYXVsdFxuICAgICAgICBpbmxpbmVTY3JvbGwgPSBhbGlnbk5lYXJlc3QoXG4gICAgICAgICAgdmlld3BvcnRYLFxuICAgICAgICAgIHZpZXdwb3J0WCArIHZpZXdwb3J0V2lkdGgsXG4gICAgICAgICAgdmlld3BvcnRXaWR0aCxcbiAgICAgICAgICBib3JkZXJMZWZ0LFxuICAgICAgICAgIGJvcmRlclJpZ2h0LFxuICAgICAgICAgIHZpZXdwb3J0WCArIHRhcmdldElubGluZSxcbiAgICAgICAgICB2aWV3cG9ydFggKyB0YXJnZXRJbmxpbmUgKyB0YXJnZXRXaWR0aCxcbiAgICAgICAgICB0YXJnZXRXaWR0aFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIC8vIEFwcGx5IHNjcm9sbCBwb3NpdGlvbiBvZmZzZXRzIGFuZCBlbnN1cmUgdGhleSBhcmUgd2l0aGluIGJvdW5kc1xuICAgICAgLy8gQFRPRE8gYWRkIG1vcmUgdGVzdCBjYXNlcyB0byBjb3ZlciB0aGlzIDEwMCVcbiAgICAgIGJsb2NrU2Nyb2xsID0gTWF0aC5tYXgoMCwgYmxvY2tTY3JvbGwgKyB2aWV3cG9ydFkpXG4gICAgICBpbmxpbmVTY3JvbGwgPSBNYXRoLm1heCgwLCBpbmxpbmVTY3JvbGwgKyB2aWV3cG9ydFgpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEhhbmRsZSBlYWNoIHNjcm9sbGluZyBmcmFtZSB0aGF0IG1pZ2h0IGV4aXN0IGJldHdlZW4gdGhlIHRhcmdldCBhbmQgdGhlIHZpZXdwb3J0XG5cbiAgICAgIGlmIChibG9jayA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICBibG9ja1Njcm9sbCA9IHRhcmdldEJsb2NrIC0gdG9wIC0gYm9yZGVyVG9wXG4gICAgICB9IGVsc2UgaWYgKGJsb2NrID09PSAnZW5kJykge1xuICAgICAgICBibG9ja1Njcm9sbCA9IHRhcmdldEJsb2NrIC0gYm90dG9tICsgYm9yZGVyQm90dG9tICsgc2Nyb2xsYmFySGVpZ2h0XG4gICAgICB9IGVsc2UgaWYgKGJsb2NrID09PSAnbmVhcmVzdCcpIHtcbiAgICAgICAgYmxvY2tTY3JvbGwgPSBhbGlnbk5lYXJlc3QoXG4gICAgICAgICAgdG9wLFxuICAgICAgICAgIGJvdHRvbSxcbiAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgYm9yZGVyVG9wLFxuICAgICAgICAgIGJvcmRlckJvdHRvbSArIHNjcm9sbGJhckhlaWdodCxcbiAgICAgICAgICB0YXJnZXRCbG9jayxcbiAgICAgICAgICB0YXJnZXRCbG9jayArIHRhcmdldEhlaWdodCxcbiAgICAgICAgICB0YXJnZXRIZWlnaHRcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYmxvY2sgPT09ICdjZW50ZXInIGlzIHRoZSBkZWZhdWx0XG4gICAgICAgIGJsb2NrU2Nyb2xsID0gdGFyZ2V0QmxvY2sgLSAodG9wICsgaGVpZ2h0IC8gMikgKyBzY3JvbGxiYXJIZWlnaHQgLyAyXG4gICAgICB9XG5cbiAgICAgIGlmIChpbmxpbmUgPT09ICdzdGFydCcpIHtcbiAgICAgICAgaW5saW5lU2Nyb2xsID0gdGFyZ2V0SW5saW5lIC0gbGVmdCAtIGJvcmRlckxlZnRcbiAgICAgIH0gZWxzZSBpZiAoaW5saW5lID09PSAnY2VudGVyJykge1xuICAgICAgICBpbmxpbmVTY3JvbGwgPSB0YXJnZXRJbmxpbmUgLSAobGVmdCArIHdpZHRoIC8gMikgKyBzY3JvbGxiYXJXaWR0aCAvIDJcbiAgICAgIH0gZWxzZSBpZiAoaW5saW5lID09PSAnZW5kJykge1xuICAgICAgICBpbmxpbmVTY3JvbGwgPSB0YXJnZXRJbmxpbmUgLSByaWdodCArIGJvcmRlclJpZ2h0ICsgc2Nyb2xsYmFyV2lkdGhcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlubGluZSA9PT0gJ25lYXJlc3QnIGlzIHRoZSBkZWZhdWx0XG4gICAgICAgIGlubGluZVNjcm9sbCA9IGFsaWduTmVhcmVzdChcbiAgICAgICAgICBsZWZ0LFxuICAgICAgICAgIHJpZ2h0LFxuICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgIGJvcmRlckxlZnQsXG4gICAgICAgICAgYm9yZGVyUmlnaHQgKyBzY3JvbGxiYXJXaWR0aCxcbiAgICAgICAgICB0YXJnZXRJbmxpbmUsXG4gICAgICAgICAgdGFyZ2V0SW5saW5lICsgdGFyZ2V0V2lkdGgsXG4gICAgICAgICAgdGFyZ2V0V2lkdGhcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCB7IHNjcm9sbExlZnQsIHNjcm9sbFRvcCB9ID0gZnJhbWVcbiAgICAgIC8vIEVuc3VyZSBzY3JvbGwgY29vcmRpbmF0ZXMgYXJlIG5vdCBvdXQgb2YgYm91bmRzIHdoaWxlIGFwcGx5aW5nIHNjcm9sbCBvZmZzZXRzXG4gICAgICBibG9ja1Njcm9sbCA9IE1hdGgubWF4KFxuICAgICAgICAwLFxuICAgICAgICBNYXRoLm1pbihcbiAgICAgICAgICBzY3JvbGxUb3AgKyBibG9ja1Njcm9sbCAvIHNjYWxlWSxcbiAgICAgICAgICBmcmFtZS5zY3JvbGxIZWlnaHQgLSBoZWlnaHQgLyBzY2FsZVkgKyBzY3JvbGxiYXJIZWlnaHRcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgaW5saW5lU2Nyb2xsID0gTWF0aC5tYXgoXG4gICAgICAgIDAsXG4gICAgICAgIE1hdGgubWluKFxuICAgICAgICAgIHNjcm9sbExlZnQgKyBpbmxpbmVTY3JvbGwgLyBzY2FsZVgsXG4gICAgICAgICAgZnJhbWUuc2Nyb2xsV2lkdGggLSB3aWR0aCAvIHNjYWxlWCArIHNjcm9sbGJhcldpZHRoXG4gICAgICAgIClcbiAgICAgIClcblxuICAgICAgLy8gQ2FjaGUgdGhlIG9mZnNldCBzbyB0aGF0IHBhcmVudCBmcmFtZXMgY2FuIHNjcm9sbCB0aGlzIGludG8gdmlldyBjb3JyZWN0bHlcbiAgICAgIHRhcmdldEJsb2NrICs9IHNjcm9sbFRvcCAtIGJsb2NrU2Nyb2xsXG4gICAgICB0YXJnZXRJbmxpbmUgKz0gc2Nyb2xsTGVmdCAtIGlubGluZVNjcm9sbFxuICAgIH1cblxuICAgIGNvbXB1dGF0aW9ucy5wdXNoKHsgZWw6IGZyYW1lLCB0b3A6IGJsb2NrU2Nyb2xsLCBsZWZ0OiBpbmxpbmVTY3JvbGwgfSlcbiAgfVxuXG4gIHJldHVybiBjb21wdXRhdGlvbnNcbn1cbiIsICJpbXBvcnQgY29tcHV0ZSBmcm9tICdjb21wdXRlLXNjcm9sbC1pbnRvLXZpZXcnO1xuZnVuY3Rpb24gaXNPcHRpb25zT2JqZWN0KG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMgPT09IE9iamVjdChvcHRpb25zKSAmJiBPYmplY3Qua2V5cyhvcHRpb25zKS5sZW5ndGggIT09IDA7XG59XG5mdW5jdGlvbiBkZWZhdWx0QmVoYXZpb3IoYWN0aW9ucywgYmVoYXZpb3IpIHtcbiAgaWYgKGJlaGF2aW9yID09PSB2b2lkIDApIHtcbiAgICBiZWhhdmlvciA9ICdhdXRvJztcbiAgfVxuICB2YXIgY2FuU21vb3RoU2Nyb2xsID0gKCdzY3JvbGxCZWhhdmlvcicgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSk7XG4gIGFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciBlbCA9IF9yZWYuZWwsXG4gICAgICB0b3AgPSBfcmVmLnRvcCxcbiAgICAgIGxlZnQgPSBfcmVmLmxlZnQ7XG4gICAgaWYgKGVsLnNjcm9sbCAmJiBjYW5TbW9vdGhTY3JvbGwpIHtcbiAgICAgIGVsLnNjcm9sbCh7XG4gICAgICAgIHRvcDogdG9wLFxuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICBiZWhhdmlvcjogYmVoYXZpb3JcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zY3JvbGxUb3AgPSB0b3A7XG4gICAgICBlbC5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zID09PSBmYWxzZSkge1xuICAgIHJldHVybiB7XG4gICAgICBibG9jazogJ2VuZCcsXG4gICAgICBpbmxpbmU6ICduZWFyZXN0J1xuICAgIH07XG4gIH1cbiAgaWYgKGlzT3B0aW9uc09iamVjdChvcHRpb25zKSkge1xuICAgIHJldHVybiBvcHRpb25zO1xuICB9XG4gIHJldHVybiB7XG4gICAgYmxvY2s6ICdzdGFydCcsXG4gICAgaW5saW5lOiAnbmVhcmVzdCdcbiAgfTtcbn1cbmZ1bmN0aW9uIHNjcm9sbEludG9WaWV3KHRhcmdldCwgb3B0aW9ucykge1xuICB2YXIgaXNUYXJnZXRBdHRhY2hlZCA9IHRhcmdldC5pc0Nvbm5lY3RlZCB8fCB0YXJnZXQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnModGFyZ2V0KTtcbiAgaWYgKGlzT3B0aW9uc09iamVjdChvcHRpb25zKSAmJiB0eXBlb2Ygb3B0aW9ucy5iZWhhdmlvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBvcHRpb25zLmJlaGF2aW9yKGlzVGFyZ2V0QXR0YWNoZWQgPyBjb21wdXRlKHRhcmdldCwgb3B0aW9ucykgOiBbXSk7XG4gIH1cbiAgaWYgKCFpc1RhcmdldEF0dGFjaGVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjb21wdXRlT3B0aW9ucyA9IGdldE9wdGlvbnMob3B0aW9ucyk7XG4gIHJldHVybiBkZWZhdWx0QmVoYXZpb3IoY29tcHV0ZSh0YXJnZXQsIGNvbXB1dGVPcHRpb25zKSwgY29tcHV0ZU9wdGlvbnMuYmVoYXZpb3IpO1xufVxuZXhwb3J0IGRlZmF1bHQgc2Nyb2xsSW50b1ZpZXc7IiwgInZhciByZXNpemVPYnNlcnZlcnMgPSBbXTtcbmV4cG9ydCB7IHJlc2l6ZU9ic2VydmVycyB9O1xuIiwgImltcG9ydCB7IHJlc2l6ZU9ic2VydmVycyB9IGZyb20gJy4uL3V0aWxzL3Jlc2l6ZU9ic2VydmVycyc7XG52YXIgaGFzQWN0aXZlT2JzZXJ2YXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiByZXNpemVPYnNlcnZlcnMuc29tZShmdW5jdGlvbiAocm8pIHsgcmV0dXJuIHJvLmFjdGl2ZVRhcmdldHMubGVuZ3RoID4gMDsgfSk7XG59O1xuZXhwb3J0IHsgaGFzQWN0aXZlT2JzZXJ2YXRpb25zIH07XG4iLCAiaW1wb3J0IHsgcmVzaXplT2JzZXJ2ZXJzIH0gZnJvbSAnLi4vdXRpbHMvcmVzaXplT2JzZXJ2ZXJzJztcbnZhciBoYXNTa2lwcGVkT2JzZXJ2YXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiByZXNpemVPYnNlcnZlcnMuc29tZShmdW5jdGlvbiAocm8pIHsgcmV0dXJuIHJvLnNraXBwZWRUYXJnZXRzLmxlbmd0aCA+IDA7IH0pO1xufTtcbmV4cG9ydCB7IGhhc1NraXBwZWRPYnNlcnZhdGlvbnMgfTtcbiIsICJ2YXIgbXNnID0gJ1Jlc2l6ZU9ic2VydmVyIGxvb3AgY29tcGxldGVkIHdpdGggdW5kZWxpdmVyZWQgbm90aWZpY2F0aW9ucy4nO1xudmFyIGRlbGl2ZXJSZXNpemVMb29wRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV2ZW50O1xuICAgIGlmICh0eXBlb2YgRXJyb3JFdmVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBldmVudCA9IG5ldyBFcnJvckV2ZW50KCdlcnJvcicsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1zZ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICAgIGV2ZW50LmluaXRFdmVudCgnZXJyb3InLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICBldmVudC5tZXNzYWdlID0gbXNnO1xuICAgIH1cbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XG59O1xuZXhwb3J0IHsgZGVsaXZlclJlc2l6ZUxvb3BFcnJvciB9O1xuIiwgInZhciBSZXNpemVPYnNlcnZlckJveE9wdGlvbnM7XG4oZnVuY3Rpb24gKFJlc2l6ZU9ic2VydmVyQm94T3B0aW9ucykge1xuICAgIFJlc2l6ZU9ic2VydmVyQm94T3B0aW9uc1tcIkJPUkRFUl9CT1hcIl0gPSBcImJvcmRlci1ib3hcIjtcbiAgICBSZXNpemVPYnNlcnZlckJveE9wdGlvbnNbXCJDT05URU5UX0JPWFwiXSA9IFwiY29udGVudC1ib3hcIjtcbiAgICBSZXNpemVPYnNlcnZlckJveE9wdGlvbnNbXCJERVZJQ0VfUElYRUxfQ09OVEVOVF9CT1hcIl0gPSBcImRldmljZS1waXhlbC1jb250ZW50LWJveFwiO1xufSkoUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zIHx8IChSZXNpemVPYnNlcnZlckJveE9wdGlvbnMgPSB7fSkpO1xuZXhwb3J0IHsgUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zIH07XG4iLCAiZXhwb3J0IHZhciBmcmVlemUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBPYmplY3QuZnJlZXplKG9iaik7IH07XG4iLCAiaW1wb3J0IHsgZnJlZXplIH0gZnJvbSAnLi91dGlscy9mcmVlemUnO1xudmFyIFJlc2l6ZU9ic2VydmVyU2l6ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVzaXplT2JzZXJ2ZXJTaXplKGlubGluZVNpemUsIGJsb2NrU2l6ZSkge1xuICAgICAgICB0aGlzLmlubGluZVNpemUgPSBpbmxpbmVTaXplO1xuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IGJsb2NrU2l6ZTtcbiAgICAgICAgZnJlZXplKHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gUmVzaXplT2JzZXJ2ZXJTaXplO1xufSgpKTtcbmV4cG9ydCB7IFJlc2l6ZU9ic2VydmVyU2l6ZSB9O1xuIiwgImltcG9ydCB7IGZyZWV6ZSB9IGZyb20gJy4vdXRpbHMvZnJlZXplJztcbnZhciBET01SZWN0UmVhZE9ubHkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERPTVJlY3RSZWFkT25seSh4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMudG9wID0gdGhpcy55O1xuICAgICAgICB0aGlzLmxlZnQgPSB0aGlzLng7XG4gICAgICAgIHRoaXMuYm90dG9tID0gdGhpcy50b3AgKyB0aGlzLmhlaWdodDtcbiAgICAgICAgdGhpcy5yaWdodCA9IHRoaXMubGVmdCArIHRoaXMud2lkdGg7XG4gICAgICAgIHJldHVybiBmcmVlemUodGhpcyk7XG4gICAgfVxuICAgIERPTVJlY3RSZWFkT25seS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCB4ID0gX2EueCwgeSA9IF9hLnksIHRvcCA9IF9hLnRvcCwgcmlnaHQgPSBfYS5yaWdodCwgYm90dG9tID0gX2EuYm90dG9tLCBsZWZ0ID0gX2EubGVmdCwgd2lkdGggPSBfYS53aWR0aCwgaGVpZ2h0ID0gX2EuaGVpZ2h0O1xuICAgICAgICByZXR1cm4geyB4OiB4LCB5OiB5LCB0b3A6IHRvcCwgcmlnaHQ6IHJpZ2h0LCBib3R0b206IGJvdHRvbSwgbGVmdDogbGVmdCwgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9O1xuICAgIH07XG4gICAgRE9NUmVjdFJlYWRPbmx5LmZyb21SZWN0ID0gZnVuY3Rpb24gKHJlY3RhbmdsZSkge1xuICAgICAgICByZXR1cm4gbmV3IERPTVJlY3RSZWFkT25seShyZWN0YW5nbGUueCwgcmVjdGFuZ2xlLnksIHJlY3RhbmdsZS53aWR0aCwgcmVjdGFuZ2xlLmhlaWdodCk7XG4gICAgfTtcbiAgICByZXR1cm4gRE9NUmVjdFJlYWRPbmx5O1xufSgpKTtcbmV4cG9ydCB7IERPTVJlY3RSZWFkT25seSB9O1xuIiwgInZhciBpc1NWRyA9IGZ1bmN0aW9uICh0YXJnZXQpIHsgcmV0dXJuIHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQgJiYgJ2dldEJCb3gnIGluIHRhcmdldDsgfTtcbnZhciBpc0hpZGRlbiA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICBpZiAoaXNTVkcodGFyZ2V0KSkge1xuICAgICAgICB2YXIgX2EgPSB0YXJnZXQuZ2V0QkJveCgpLCB3aWR0aCA9IF9hLndpZHRoLCBoZWlnaHQgPSBfYS5oZWlnaHQ7XG4gICAgICAgIHJldHVybiAhd2lkdGggJiYgIWhlaWdodDtcbiAgICB9XG4gICAgdmFyIF9iID0gdGFyZ2V0LCBvZmZzZXRXaWR0aCA9IF9iLm9mZnNldFdpZHRoLCBvZmZzZXRIZWlnaHQgPSBfYi5vZmZzZXRIZWlnaHQ7XG4gICAgcmV0dXJuICEob2Zmc2V0V2lkdGggfHwgb2Zmc2V0SGVpZ2h0IHx8IHRhcmdldC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7XG59O1xudmFyIGlzRWxlbWVudCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBzY29wZSA9IChfYSA9IG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5vd25lckRvY3VtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGVmYXVsdFZpZXc7XG4gICAgcmV0dXJuICEhKHNjb3BlICYmIG9iaiBpbnN0YW5jZW9mIHNjb3BlLkVsZW1lbnQpO1xufTtcbnZhciBpc1JlcGxhY2VkRWxlbWVudCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICBzd2l0Y2ggKHRhcmdldC50YWdOYW1lKSB7XG4gICAgICAgIGNhc2UgJ0lOUFVUJzpcbiAgICAgICAgICAgIGlmICh0YXJnZXQudHlwZSAhPT0gJ2ltYWdlJykge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICBjYXNlICdWSURFTyc6XG4gICAgICAgIGNhc2UgJ0FVRElPJzpcbiAgICAgICAgY2FzZSAnRU1CRUQnOlxuICAgICAgICBjYXNlICdPQkpFQ1QnOlxuICAgICAgICBjYXNlICdDQU5WQVMnOlxuICAgICAgICBjYXNlICdJRlJBTUUnOlxuICAgICAgICBjYXNlICdJTUcnOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5leHBvcnQgeyBpc1NWRywgaXNIaWRkZW4sIGlzRWxlbWVudCwgaXNSZXBsYWNlZEVsZW1lbnQgfTtcbiIsICJleHBvcnQgdmFyIGdsb2JhbCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDoge307XG4iLCAiaW1wb3J0IHsgUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zIH0gZnJvbSAnLi4vUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zJztcbmltcG9ydCB7IFJlc2l6ZU9ic2VydmVyU2l6ZSB9IGZyb20gJy4uL1Jlc2l6ZU9ic2VydmVyU2l6ZSc7XG5pbXBvcnQgeyBET01SZWN0UmVhZE9ubHkgfSBmcm9tICcuLi9ET01SZWN0UmVhZE9ubHknO1xuaW1wb3J0IHsgaXNTVkcsIGlzSGlkZGVuIH0gZnJvbSAnLi4vdXRpbHMvZWxlbWVudCc7XG5pbXBvcnQgeyBmcmVlemUgfSBmcm9tICcuLi91dGlscy9mcmVlemUnO1xuaW1wb3J0IHsgZ2xvYmFsIH0gZnJvbSAnLi4vdXRpbHMvZ2xvYmFsJztcbnZhciBjYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG52YXIgc2Nyb2xsUmVnZXhwID0gL2F1dG98c2Nyb2xsLztcbnZhciB2ZXJ0aWNhbFJlZ2V4cCA9IC9edGJ8dmVydGljYWwvO1xudmFyIElFID0gKC9tc2llfHRyaWRlbnQvaSkudGVzdChnbG9iYWwubmF2aWdhdG9yICYmIGdsb2JhbC5uYXZpZ2F0b3IudXNlckFnZW50KTtcbnZhciBwYXJzZURpbWVuc2lvbiA9IGZ1bmN0aW9uIChwaXhlbCkgeyByZXR1cm4gcGFyc2VGbG9hdChwaXhlbCB8fCAnMCcpOyB9O1xudmFyIHNpemUgPSBmdW5jdGlvbiAoaW5saW5lU2l6ZSwgYmxvY2tTaXplLCBzd2l0Y2hTaXplcykge1xuICAgIGlmIChpbmxpbmVTaXplID09PSB2b2lkIDApIHsgaW5saW5lU2l6ZSA9IDA7IH1cbiAgICBpZiAoYmxvY2tTaXplID09PSB2b2lkIDApIHsgYmxvY2tTaXplID0gMDsgfVxuICAgIGlmIChzd2l0Y2hTaXplcyA9PT0gdm9pZCAwKSB7IHN3aXRjaFNpemVzID0gZmFsc2U7IH1cbiAgICByZXR1cm4gbmV3IFJlc2l6ZU9ic2VydmVyU2l6ZSgoc3dpdGNoU2l6ZXMgPyBibG9ja1NpemUgOiBpbmxpbmVTaXplKSB8fCAwLCAoc3dpdGNoU2l6ZXMgPyBpbmxpbmVTaXplIDogYmxvY2tTaXplKSB8fCAwKTtcbn07XG52YXIgemVyb0JveGVzID0gZnJlZXplKHtcbiAgICBkZXZpY2VQaXhlbENvbnRlbnRCb3hTaXplOiBzaXplKCksXG4gICAgYm9yZGVyQm94U2l6ZTogc2l6ZSgpLFxuICAgIGNvbnRlbnRCb3hTaXplOiBzaXplKCksXG4gICAgY29udGVudFJlY3Q6IG5ldyBET01SZWN0UmVhZE9ubHkoMCwgMCwgMCwgMClcbn0pO1xudmFyIGNhbGN1bGF0ZUJveFNpemVzID0gZnVuY3Rpb24gKHRhcmdldCwgZm9yY2VSZWNhbGN1bGF0aW9uKSB7XG4gICAgaWYgKGZvcmNlUmVjYWxjdWxhdGlvbiA9PT0gdm9pZCAwKSB7IGZvcmNlUmVjYWxjdWxhdGlvbiA9IGZhbHNlOyB9XG4gICAgaWYgKGNhY2hlLmhhcyh0YXJnZXQpICYmICFmb3JjZVJlY2FsY3VsYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlLmdldCh0YXJnZXQpO1xuICAgIH1cbiAgICBpZiAoaXNIaWRkZW4odGFyZ2V0KSkge1xuICAgICAgICBjYWNoZS5zZXQodGFyZ2V0LCB6ZXJvQm94ZXMpO1xuICAgICAgICByZXR1cm4gemVyb0JveGVzO1xuICAgIH1cbiAgICB2YXIgY3MgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7XG4gICAgdmFyIHN2ZyA9IGlzU1ZHKHRhcmdldCkgJiYgdGFyZ2V0Lm93bmVyU1ZHRWxlbWVudCAmJiB0YXJnZXQuZ2V0QkJveCgpO1xuICAgIHZhciByZW1vdmVQYWRkaW5nID0gIUlFICYmIGNzLmJveFNpemluZyA9PT0gJ2JvcmRlci1ib3gnO1xuICAgIHZhciBzd2l0Y2hTaXplcyA9IHZlcnRpY2FsUmVnZXhwLnRlc3QoY3Mud3JpdGluZ01vZGUgfHwgJycpO1xuICAgIHZhciBjYW5TY3JvbGxWZXJ0aWNhbGx5ID0gIXN2ZyAmJiBzY3JvbGxSZWdleHAudGVzdChjcy5vdmVyZmxvd1kgfHwgJycpO1xuICAgIHZhciBjYW5TY3JvbGxIb3Jpem9udGFsbHkgPSAhc3ZnICYmIHNjcm9sbFJlZ2V4cC50ZXN0KGNzLm92ZXJmbG93WCB8fCAnJyk7XG4gICAgdmFyIHBhZGRpbmdUb3AgPSBzdmcgPyAwIDogcGFyc2VEaW1lbnNpb24oY3MucGFkZGluZ1RvcCk7XG4gICAgdmFyIHBhZGRpbmdSaWdodCA9IHN2ZyA/IDAgOiBwYXJzZURpbWVuc2lvbihjcy5wYWRkaW5nUmlnaHQpO1xuICAgIHZhciBwYWRkaW5nQm90dG9tID0gc3ZnID8gMCA6IHBhcnNlRGltZW5zaW9uKGNzLnBhZGRpbmdCb3R0b20pO1xuICAgIHZhciBwYWRkaW5nTGVmdCA9IHN2ZyA/IDAgOiBwYXJzZURpbWVuc2lvbihjcy5wYWRkaW5nTGVmdCk7XG4gICAgdmFyIGJvcmRlclRvcCA9IHN2ZyA/IDAgOiBwYXJzZURpbWVuc2lvbihjcy5ib3JkZXJUb3BXaWR0aCk7XG4gICAgdmFyIGJvcmRlclJpZ2h0ID0gc3ZnID8gMCA6IHBhcnNlRGltZW5zaW9uKGNzLmJvcmRlclJpZ2h0V2lkdGgpO1xuICAgIHZhciBib3JkZXJCb3R0b20gPSBzdmcgPyAwIDogcGFyc2VEaW1lbnNpb24oY3MuYm9yZGVyQm90dG9tV2lkdGgpO1xuICAgIHZhciBib3JkZXJMZWZ0ID0gc3ZnID8gMCA6IHBhcnNlRGltZW5zaW9uKGNzLmJvcmRlckxlZnRXaWR0aCk7XG4gICAgdmFyIGhvcml6b250YWxQYWRkaW5nID0gcGFkZGluZ0xlZnQgKyBwYWRkaW5nUmlnaHQ7XG4gICAgdmFyIHZlcnRpY2FsUGFkZGluZyA9IHBhZGRpbmdUb3AgKyBwYWRkaW5nQm90dG9tO1xuICAgIHZhciBob3Jpem9udGFsQm9yZGVyQXJlYSA9IGJvcmRlckxlZnQgKyBib3JkZXJSaWdodDtcbiAgICB2YXIgdmVydGljYWxCb3JkZXJBcmVhID0gYm9yZGVyVG9wICsgYm9yZGVyQm90dG9tO1xuICAgIHZhciBob3Jpem9udGFsU2Nyb2xsYmFyVGhpY2tuZXNzID0gIWNhblNjcm9sbEhvcml6b250YWxseSA/IDAgOiB0YXJnZXQub2Zmc2V0SGVpZ2h0IC0gdmVydGljYWxCb3JkZXJBcmVhIC0gdGFyZ2V0LmNsaWVudEhlaWdodDtcbiAgICB2YXIgdmVydGljYWxTY3JvbGxiYXJUaGlja25lc3MgPSAhY2FuU2Nyb2xsVmVydGljYWxseSA/IDAgOiB0YXJnZXQub2Zmc2V0V2lkdGggLSBob3Jpem9udGFsQm9yZGVyQXJlYSAtIHRhcmdldC5jbGllbnRXaWR0aDtcbiAgICB2YXIgd2lkdGhSZWR1Y3Rpb24gPSByZW1vdmVQYWRkaW5nID8gaG9yaXpvbnRhbFBhZGRpbmcgKyBob3Jpem9udGFsQm9yZGVyQXJlYSA6IDA7XG4gICAgdmFyIGhlaWdodFJlZHVjdGlvbiA9IHJlbW92ZVBhZGRpbmcgPyB2ZXJ0aWNhbFBhZGRpbmcgKyB2ZXJ0aWNhbEJvcmRlckFyZWEgOiAwO1xuICAgIHZhciBjb250ZW50V2lkdGggPSBzdmcgPyBzdmcud2lkdGggOiBwYXJzZURpbWVuc2lvbihjcy53aWR0aCkgLSB3aWR0aFJlZHVjdGlvbiAtIHZlcnRpY2FsU2Nyb2xsYmFyVGhpY2tuZXNzO1xuICAgIHZhciBjb250ZW50SGVpZ2h0ID0gc3ZnID8gc3ZnLmhlaWdodCA6IHBhcnNlRGltZW5zaW9uKGNzLmhlaWdodCkgLSBoZWlnaHRSZWR1Y3Rpb24gLSBob3Jpem9udGFsU2Nyb2xsYmFyVGhpY2tuZXNzO1xuICAgIHZhciBib3JkZXJCb3hXaWR0aCA9IGNvbnRlbnRXaWR0aCArIGhvcml6b250YWxQYWRkaW5nICsgdmVydGljYWxTY3JvbGxiYXJUaGlja25lc3MgKyBob3Jpem9udGFsQm9yZGVyQXJlYTtcbiAgICB2YXIgYm9yZGVyQm94SGVpZ2h0ID0gY29udGVudEhlaWdodCArIHZlcnRpY2FsUGFkZGluZyArIGhvcml6b250YWxTY3JvbGxiYXJUaGlja25lc3MgKyB2ZXJ0aWNhbEJvcmRlckFyZWE7XG4gICAgdmFyIGJveGVzID0gZnJlZXplKHtcbiAgICAgICAgZGV2aWNlUGl4ZWxDb250ZW50Qm94U2l6ZTogc2l6ZShNYXRoLnJvdW5kKGNvbnRlbnRXaWR0aCAqIGRldmljZVBpeGVsUmF0aW8pLCBNYXRoLnJvdW5kKGNvbnRlbnRIZWlnaHQgKiBkZXZpY2VQaXhlbFJhdGlvKSwgc3dpdGNoU2l6ZXMpLFxuICAgICAgICBib3JkZXJCb3hTaXplOiBzaXplKGJvcmRlckJveFdpZHRoLCBib3JkZXJCb3hIZWlnaHQsIHN3aXRjaFNpemVzKSxcbiAgICAgICAgY29udGVudEJveFNpemU6IHNpemUoY29udGVudFdpZHRoLCBjb250ZW50SGVpZ2h0LCBzd2l0Y2hTaXplcyksXG4gICAgICAgIGNvbnRlbnRSZWN0OiBuZXcgRE9NUmVjdFJlYWRPbmx5KHBhZGRpbmdMZWZ0LCBwYWRkaW5nVG9wLCBjb250ZW50V2lkdGgsIGNvbnRlbnRIZWlnaHQpXG4gICAgfSk7XG4gICAgY2FjaGUuc2V0KHRhcmdldCwgYm94ZXMpO1xuICAgIHJldHVybiBib3hlcztcbn07XG52YXIgY2FsY3VsYXRlQm94U2l6ZSA9IGZ1bmN0aW9uICh0YXJnZXQsIG9ic2VydmVkQm94LCBmb3JjZVJlY2FsY3VsYXRpb24pIHtcbiAgICB2YXIgX2EgPSBjYWxjdWxhdGVCb3hTaXplcyh0YXJnZXQsIGZvcmNlUmVjYWxjdWxhdGlvbiksIGJvcmRlckJveFNpemUgPSBfYS5ib3JkZXJCb3hTaXplLCBjb250ZW50Qm94U2l6ZSA9IF9hLmNvbnRlbnRCb3hTaXplLCBkZXZpY2VQaXhlbENvbnRlbnRCb3hTaXplID0gX2EuZGV2aWNlUGl4ZWxDb250ZW50Qm94U2l6ZTtcbiAgICBzd2l0Y2ggKG9ic2VydmVkQm94KSB7XG4gICAgICAgIGNhc2UgUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zLkRFVklDRV9QSVhFTF9DT05URU5UX0JPWDpcbiAgICAgICAgICAgIHJldHVybiBkZXZpY2VQaXhlbENvbnRlbnRCb3hTaXplO1xuICAgICAgICBjYXNlIFJlc2l6ZU9ic2VydmVyQm94T3B0aW9ucy5CT1JERVJfQk9YOlxuICAgICAgICAgICAgcmV0dXJuIGJvcmRlckJveFNpemU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gY29udGVudEJveFNpemU7XG4gICAgfVxufTtcbmV4cG9ydCB7IGNhbGN1bGF0ZUJveFNpemUsIGNhbGN1bGF0ZUJveFNpemVzIH07XG4iLCAiaW1wb3J0IHsgY2FsY3VsYXRlQm94U2l6ZXMgfSBmcm9tICcuL2FsZ29yaXRobXMvY2FsY3VsYXRlQm94U2l6ZSc7XG5pbXBvcnQgeyBmcmVlemUgfSBmcm9tICcuL3V0aWxzL2ZyZWV6ZSc7XG52YXIgUmVzaXplT2JzZXJ2ZXJFbnRyeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVzaXplT2JzZXJ2ZXJFbnRyeSh0YXJnZXQpIHtcbiAgICAgICAgdmFyIGJveGVzID0gY2FsY3VsYXRlQm94U2l6ZXModGFyZ2V0KTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMuY29udGVudFJlY3QgPSBib3hlcy5jb250ZW50UmVjdDtcbiAgICAgICAgdGhpcy5ib3JkZXJCb3hTaXplID0gZnJlZXplKFtib3hlcy5ib3JkZXJCb3hTaXplXSk7XG4gICAgICAgIHRoaXMuY29udGVudEJveFNpemUgPSBmcmVlemUoW2JveGVzLmNvbnRlbnRCb3hTaXplXSk7XG4gICAgICAgIHRoaXMuZGV2aWNlUGl4ZWxDb250ZW50Qm94U2l6ZSA9IGZyZWV6ZShbYm94ZXMuZGV2aWNlUGl4ZWxDb250ZW50Qm94U2l6ZV0pO1xuICAgIH1cbiAgICByZXR1cm4gUmVzaXplT2JzZXJ2ZXJFbnRyeTtcbn0oKSk7XG5leHBvcnQgeyBSZXNpemVPYnNlcnZlckVudHJ5IH07XG4iLCAiaW1wb3J0IHsgaXNIaWRkZW4gfSBmcm9tICcuLi91dGlscy9lbGVtZW50JztcbnZhciBjYWxjdWxhdGVEZXB0aEZvck5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgIGlmIChpc0hpZGRlbihub2RlKSkge1xuICAgICAgICByZXR1cm4gSW5maW5pdHk7XG4gICAgfVxuICAgIHZhciBkZXB0aCA9IDA7XG4gICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgIGRlcHRoICs9IDE7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gZGVwdGg7XG59O1xuZXhwb3J0IHsgY2FsY3VsYXRlRGVwdGhGb3JOb2RlIH07XG4iLCAiaW1wb3J0IHsgcmVzaXplT2JzZXJ2ZXJzIH0gZnJvbSAnLi4vdXRpbHMvcmVzaXplT2JzZXJ2ZXJzJztcbmltcG9ydCB7IFJlc2l6ZU9ic2VydmVyRW50cnkgfSBmcm9tICcuLi9SZXNpemVPYnNlcnZlckVudHJ5JztcbmltcG9ydCB7IGNhbGN1bGF0ZURlcHRoRm9yTm9kZSB9IGZyb20gJy4vY2FsY3VsYXRlRGVwdGhGb3JOb2RlJztcbmltcG9ydCB7IGNhbGN1bGF0ZUJveFNpemUgfSBmcm9tICcuL2NhbGN1bGF0ZUJveFNpemUnO1xudmFyIGJyb2FkY2FzdEFjdGl2ZU9ic2VydmF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2hhbGxvd2VzdERlcHRoID0gSW5maW5pdHk7XG4gICAgdmFyIGNhbGxiYWNrcyA9IFtdO1xuICAgIHJlc2l6ZU9ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIHByb2Nlc3NPYnNlcnZlcihybykge1xuICAgICAgICBpZiAocm8uYWN0aXZlVGFyZ2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZW50cmllcyA9IFtdO1xuICAgICAgICByby5hY3RpdmVUYXJnZXRzLmZvckVhY2goZnVuY3Rpb24gcHJvY2Vzc1RhcmdldChvdCkge1xuICAgICAgICAgICAgdmFyIGVudHJ5ID0gbmV3IFJlc2l6ZU9ic2VydmVyRW50cnkob3QudGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciB0YXJnZXREZXB0aCA9IGNhbGN1bGF0ZURlcHRoRm9yTm9kZShvdC50YXJnZXQpO1xuICAgICAgICAgICAgZW50cmllcy5wdXNoKGVudHJ5KTtcbiAgICAgICAgICAgIG90Lmxhc3RSZXBvcnRlZFNpemUgPSBjYWxjdWxhdGVCb3hTaXplKG90LnRhcmdldCwgb3Qub2JzZXJ2ZWRCb3gpO1xuICAgICAgICAgICAgaWYgKHRhcmdldERlcHRoIDwgc2hhbGxvd2VzdERlcHRoKSB7XG4gICAgICAgICAgICAgICAgc2hhbGxvd2VzdERlcHRoID0gdGFyZ2V0RGVwdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjYWxsYmFja3MucHVzaChmdW5jdGlvbiByZXNpemVPYnNlcnZlckNhbGxiYWNrKCkge1xuICAgICAgICAgICAgcm8uY2FsbGJhY2suY2FsbChyby5vYnNlcnZlciwgZW50cmllcywgcm8ub2JzZXJ2ZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcm8uYWN0aXZlVGFyZ2V0cy5zcGxpY2UoMCwgcm8uYWN0aXZlVGFyZ2V0cy5sZW5ndGgpO1xuICAgIH0pO1xuICAgIGZvciAodmFyIF9pID0gMCwgY2FsbGJhY2tzXzEgPSBjYWxsYmFja3M7IF9pIDwgY2FsbGJhY2tzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGNhbGxiYWNrc18xW19pXTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYWxsb3dlc3REZXB0aDtcbn07XG5leHBvcnQgeyBicm9hZGNhc3RBY3RpdmVPYnNlcnZhdGlvbnMgfTtcbiIsICJpbXBvcnQgeyByZXNpemVPYnNlcnZlcnMgfSBmcm9tICcuLi91dGlscy9yZXNpemVPYnNlcnZlcnMnO1xuaW1wb3J0IHsgY2FsY3VsYXRlRGVwdGhGb3JOb2RlIH0gZnJvbSAnLi9jYWxjdWxhdGVEZXB0aEZvck5vZGUnO1xudmFyIGdhdGhlckFjdGl2ZU9ic2VydmF0aW9uc0F0RGVwdGggPSBmdW5jdGlvbiAoZGVwdGgpIHtcbiAgICByZXNpemVPYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiBwcm9jZXNzT2JzZXJ2ZXIocm8pIHtcbiAgICAgICAgcm8uYWN0aXZlVGFyZ2V0cy5zcGxpY2UoMCwgcm8uYWN0aXZlVGFyZ2V0cy5sZW5ndGgpO1xuICAgICAgICByby5za2lwcGVkVGFyZ2V0cy5zcGxpY2UoMCwgcm8uc2tpcHBlZFRhcmdldHMubGVuZ3RoKTtcbiAgICAgICAgcm8ub2JzZXJ2YXRpb25UYXJnZXRzLmZvckVhY2goZnVuY3Rpb24gcHJvY2Vzc1RhcmdldChvdCkge1xuICAgICAgICAgICAgaWYgKG90LmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsY3VsYXRlRGVwdGhGb3JOb2RlKG90LnRhcmdldCkgPiBkZXB0aCkge1xuICAgICAgICAgICAgICAgICAgICByby5hY3RpdmVUYXJnZXRzLnB1c2gob3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm8uc2tpcHBlZFRhcmdldHMucHVzaChvdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5leHBvcnQgeyBnYXRoZXJBY3RpdmVPYnNlcnZhdGlvbnNBdERlcHRoIH07XG4iLCAiaW1wb3J0IHsgaGFzQWN0aXZlT2JzZXJ2YXRpb25zIH0gZnJvbSAnLi4vYWxnb3JpdGhtcy9oYXNBY3RpdmVPYnNlcnZhdGlvbnMnO1xuaW1wb3J0IHsgaGFzU2tpcHBlZE9ic2VydmF0aW9ucyB9IGZyb20gJy4uL2FsZ29yaXRobXMvaGFzU2tpcHBlZE9ic2VydmF0aW9ucyc7XG5pbXBvcnQgeyBkZWxpdmVyUmVzaXplTG9vcEVycm9yIH0gZnJvbSAnLi4vYWxnb3JpdGhtcy9kZWxpdmVyUmVzaXplTG9vcEVycm9yJztcbmltcG9ydCB7IGJyb2FkY2FzdEFjdGl2ZU9ic2VydmF0aW9ucyB9IGZyb20gJy4uL2FsZ29yaXRobXMvYnJvYWRjYXN0QWN0aXZlT2JzZXJ2YXRpb25zJztcbmltcG9ydCB7IGdhdGhlckFjdGl2ZU9ic2VydmF0aW9uc0F0RGVwdGggfSBmcm9tICcuLi9hbGdvcml0aG1zL2dhdGhlckFjdGl2ZU9ic2VydmF0aW9uc0F0RGVwdGgnO1xudmFyIHByb2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRlcHRoID0gMDtcbiAgICBnYXRoZXJBY3RpdmVPYnNlcnZhdGlvbnNBdERlcHRoKGRlcHRoKTtcbiAgICB3aGlsZSAoaGFzQWN0aXZlT2JzZXJ2YXRpb25zKCkpIHtcbiAgICAgICAgZGVwdGggPSBicm9hZGNhc3RBY3RpdmVPYnNlcnZhdGlvbnMoKTtcbiAgICAgICAgZ2F0aGVyQWN0aXZlT2JzZXJ2YXRpb25zQXREZXB0aChkZXB0aCk7XG4gICAgfVxuICAgIGlmIChoYXNTa2lwcGVkT2JzZXJ2YXRpb25zKCkpIHtcbiAgICAgICAgZGVsaXZlclJlc2l6ZUxvb3BFcnJvcigpO1xuICAgIH1cbiAgICByZXR1cm4gZGVwdGggPiAwO1xufTtcbmV4cG9ydCB7IHByb2Nlc3MgfTtcbiIsICJ2YXIgdHJpZ2dlcjtcbnZhciBjYWxsYmFja3MgPSBbXTtcbnZhciBub3RpZnkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjYWxsYmFja3Muc3BsaWNlKDApLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IHJldHVybiBjYigpOyB9KTsgfTtcbnZhciBxdWV1ZU1pY3JvVGFzayA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIGlmICghdHJpZ2dlcikge1xuICAgICAgICB2YXIgdG9nZ2xlXzEgPSAwO1xuICAgICAgICB2YXIgZWxfMSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgICAgICAgdmFyIGNvbmZpZyA9IHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9O1xuICAgICAgICBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAoKSB7IHJldHVybiBub3RpZnkoKTsgfSkub2JzZXJ2ZShlbF8xLCBjb25maWcpO1xuICAgICAgICB0cmlnZ2VyID0gZnVuY3Rpb24gKCkgeyBlbF8xLnRleHRDb250ZW50ID0gXCJcIi5jb25jYXQodG9nZ2xlXzEgPyB0b2dnbGVfMS0tIDogdG9nZ2xlXzErKyk7IH07XG4gICAgfVxuICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB0cmlnZ2VyKCk7XG59O1xuZXhwb3J0IHsgcXVldWVNaWNyb1Rhc2sgfTtcbiIsICJpbXBvcnQgeyBxdWV1ZU1pY3JvVGFzayB9IGZyb20gJy4vcXVldWVNaWNyb1Rhc2snO1xudmFyIHF1ZXVlUmVzaXplT2JzZXJ2ZXIgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICBxdWV1ZU1pY3JvVGFzayhmdW5jdGlvbiBSZXNpemVPYnNlcnZlcigpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNiKTtcbiAgICB9KTtcbn07XG5leHBvcnQgeyBxdWV1ZVJlc2l6ZU9ic2VydmVyIH07XG4iLCAiaW1wb3J0IHsgcHJvY2VzcyB9IGZyb20gJy4vcHJvY2Vzcyc7XG5pbXBvcnQgeyBnbG9iYWwgfSBmcm9tICcuL2dsb2JhbCc7XG5pbXBvcnQgeyBxdWV1ZVJlc2l6ZU9ic2VydmVyIH0gZnJvbSAnLi9xdWV1ZVJlc2l6ZU9ic2VydmVyJztcbnZhciB3YXRjaGluZyA9IDA7XG52YXIgaXNXYXRjaGluZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICEhd2F0Y2hpbmc7IH07XG52YXIgQ0FUQ0hfUEVSSU9EID0gMjUwO1xudmFyIG9ic2VydmVyQ29uZmlnID0geyBhdHRyaWJ1dGVzOiB0cnVlLCBjaGFyYWN0ZXJEYXRhOiB0cnVlLCBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfTtcbnZhciBldmVudHMgPSBbXG4gICAgJ3Jlc2l6ZScsXG4gICAgJ2xvYWQnLFxuICAgICd0cmFuc2l0aW9uZW5kJyxcbiAgICAnYW5pbWF0aW9uZW5kJyxcbiAgICAnYW5pbWF0aW9uc3RhcnQnLFxuICAgICdhbmltYXRpb25pdGVyYXRpb24nLFxuICAgICdrZXl1cCcsXG4gICAgJ2tleWRvd24nLFxuICAgICdtb3VzZXVwJyxcbiAgICAnbW91c2Vkb3duJyxcbiAgICAnbW91c2VvdmVyJyxcbiAgICAnbW91c2VvdXQnLFxuICAgICdibHVyJyxcbiAgICAnZm9jdXMnXG5dO1xudmFyIHRpbWUgPSBmdW5jdGlvbiAodGltZW91dCkge1xuICAgIGlmICh0aW1lb3V0ID09PSB2b2lkIDApIHsgdGltZW91dCA9IDA7IH1cbiAgICByZXR1cm4gRGF0ZS5ub3coKSArIHRpbWVvdXQ7XG59O1xudmFyIHNjaGVkdWxlZCA9IGZhbHNlO1xudmFyIFNjaGVkdWxlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2NoZWR1bGVyKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2NoZWR1bGUoKTsgfTtcbiAgICB9XG4gICAgU2NoZWR1bGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAodGltZW91dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGltZW91dCA9PT0gdm9pZCAwKSB7IHRpbWVvdXQgPSBDQVRDSF9QRVJJT0Q7IH1cbiAgICAgICAgaWYgKHNjaGVkdWxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgIHZhciB1bnRpbCA9IHRpbWUodGltZW91dCk7XG4gICAgICAgIHF1ZXVlUmVzaXplT2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzSGF2ZVJlc2l6ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNIYXZlUmVzaXplZCA9IHByb2Nlc3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSB1bnRpbCAtIHRpbWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzV2F0Y2hpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50c0hhdmVSZXNpemVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJ1bigxMDAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGltZW91dCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucnVuKHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3RhcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIHRoaXMucnVuKCk7XG4gICAgfTtcbiAgICBTY2hlZHVsZXIucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBjYiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm9ic2VydmVyICYmIF90aGlzLm9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwgb2JzZXJ2ZXJDb25maWcpOyB9O1xuICAgICAgICBkb2N1bWVudC5ib2R5ID8gY2IoKSA6IGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgY2IpO1xuICAgIH07XG4gICAgU2NoZWR1bGVyLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5saXN0ZW5lcik7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmUoKTtcbiAgICAgICAgICAgIGV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBfdGhpcy5saXN0ZW5lciwgdHJ1ZSk7IH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTY2hlZHVsZXIucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5zdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyICYmIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIGdsb2JhbC5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIF90aGlzLmxpc3RlbmVyLCB0cnVlKTsgfSk7XG4gICAgICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2NoZWR1bGVyO1xufSgpKTtcbnZhciBzY2hlZHVsZXIgPSBuZXcgU2NoZWR1bGVyKCk7XG52YXIgdXBkYXRlQ291bnQgPSBmdW5jdGlvbiAobikge1xuICAgICF3YXRjaGluZyAmJiBuID4gMCAmJiBzY2hlZHVsZXIuc3RhcnQoKTtcbiAgICB3YXRjaGluZyArPSBuO1xuICAgICF3YXRjaGluZyAmJiBzY2hlZHVsZXIuc3RvcCgpO1xufTtcbmV4cG9ydCB7IHNjaGVkdWxlciwgdXBkYXRlQ291bnQgfTtcbiIsICJpbXBvcnQgeyBSZXNpemVPYnNlcnZlckJveE9wdGlvbnMgfSBmcm9tICcuL1Jlc2l6ZU9ic2VydmVyQm94T3B0aW9ucyc7XG5pbXBvcnQgeyBjYWxjdWxhdGVCb3hTaXplIH0gZnJvbSAnLi9hbGdvcml0aG1zL2NhbGN1bGF0ZUJveFNpemUnO1xuaW1wb3J0IHsgaXNTVkcsIGlzUmVwbGFjZWRFbGVtZW50IH0gZnJvbSAnLi91dGlscy9lbGVtZW50JztcbnZhciBza2lwTm90aWZ5T25FbGVtZW50ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIHJldHVybiAhaXNTVkcodGFyZ2V0KVxuICAgICAgICAmJiAhaXNSZXBsYWNlZEVsZW1lbnQodGFyZ2V0KVxuICAgICAgICAmJiBnZXRDb21wdXRlZFN0eWxlKHRhcmdldCkuZGlzcGxheSA9PT0gJ2lubGluZSc7XG59O1xudmFyIFJlc2l6ZU9ic2VydmF0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXNpemVPYnNlcnZhdGlvbih0YXJnZXQsIG9ic2VydmVkQm94KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLm9ic2VydmVkQm94ID0gb2JzZXJ2ZWRCb3ggfHwgUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zLkNPTlRFTlRfQk9YO1xuICAgICAgICB0aGlzLmxhc3RSZXBvcnRlZFNpemUgPSB7XG4gICAgICAgICAgICBpbmxpbmVTaXplOiAwLFxuICAgICAgICAgICAgYmxvY2tTaXplOiAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIFJlc2l6ZU9ic2VydmF0aW9uLnByb3RvdHlwZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNpemUgPSBjYWxjdWxhdGVCb3hTaXplKHRoaXMudGFyZ2V0LCB0aGlzLm9ic2VydmVkQm94LCB0cnVlKTtcbiAgICAgICAgaWYgKHNraXBOb3RpZnlPbkVsZW1lbnQodGhpcy50YXJnZXQpKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RSZXBvcnRlZFNpemUgPSBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxhc3RSZXBvcnRlZFNpemUuaW5saW5lU2l6ZSAhPT0gc2l6ZS5pbmxpbmVTaXplXG4gICAgICAgICAgICB8fCB0aGlzLmxhc3RSZXBvcnRlZFNpemUuYmxvY2tTaXplICE9PSBzaXplLmJsb2NrU2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmF0aW9uO1xufSgpKTtcbmV4cG9ydCB7IFJlc2l6ZU9ic2VydmF0aW9uIH07XG4iLCAidmFyIFJlc2l6ZU9ic2VydmVyRGV0YWlsID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXNpemVPYnNlcnZlckRldGFpbChyZXNpemVPYnNlcnZlciwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRzID0gW107XG4gICAgICAgIHRoaXMuc2tpcHBlZFRhcmdldHMgPSBbXTtcbiAgICAgICAgdGhpcy5vYnNlcnZhdGlvblRhcmdldHMgPSBbXTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IHJlc2l6ZU9ic2VydmVyO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgfVxuICAgIHJldHVybiBSZXNpemVPYnNlcnZlckRldGFpbDtcbn0oKSk7XG5leHBvcnQgeyBSZXNpemVPYnNlcnZlckRldGFpbCB9O1xuIiwgImltcG9ydCB7IHNjaGVkdWxlciwgdXBkYXRlQ291bnQgfSBmcm9tICcuL3V0aWxzL3NjaGVkdWxlcic7XG5pbXBvcnQgeyBSZXNpemVPYnNlcnZhdGlvbiB9IGZyb20gJy4vUmVzaXplT2JzZXJ2YXRpb24nO1xuaW1wb3J0IHsgUmVzaXplT2JzZXJ2ZXJEZXRhaWwgfSBmcm9tICcuL1Jlc2l6ZU9ic2VydmVyRGV0YWlsJztcbmltcG9ydCB7IHJlc2l6ZU9ic2VydmVycyB9IGZyb20gJy4vdXRpbHMvcmVzaXplT2JzZXJ2ZXJzJztcbnZhciBvYnNlcnZlck1hcCA9IG5ldyBXZWFrTWFwKCk7XG52YXIgZ2V0T2JzZXJ2YXRpb25JbmRleCA9IGZ1bmN0aW9uIChvYnNlcnZhdGlvblRhcmdldHMsIHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JzZXJ2YXRpb25UYXJnZXRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChvYnNlcnZhdGlvblRhcmdldHNbaV0udGFyZ2V0ID09PSB0YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn07XG52YXIgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIoKSB7XG4gICAgfVxuICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5jb25uZWN0ID0gZnVuY3Rpb24gKHJlc2l6ZU9ic2VydmVyLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGV0YWlsID0gbmV3IFJlc2l6ZU9ic2VydmVyRGV0YWlsKHJlc2l6ZU9ic2VydmVyLCBjYWxsYmFjayk7XG4gICAgICAgIG9ic2VydmVyTWFwLnNldChyZXNpemVPYnNlcnZlciwgZGV0YWlsKTtcbiAgICB9O1xuICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5vYnNlcnZlID0gZnVuY3Rpb24gKHJlc2l6ZU9ic2VydmVyLCB0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGRldGFpbCA9IG9ic2VydmVyTWFwLmdldChyZXNpemVPYnNlcnZlcik7XG4gICAgICAgIHZhciBmaXJzdE9ic2VydmF0aW9uID0gZGV0YWlsLm9ic2VydmF0aW9uVGFyZ2V0cy5sZW5ndGggPT09IDA7XG4gICAgICAgIGlmIChnZXRPYnNlcnZhdGlvbkluZGV4KGRldGFpbC5vYnNlcnZhdGlvblRhcmdldHMsIHRhcmdldCkgPCAwKSB7XG4gICAgICAgICAgICBmaXJzdE9ic2VydmF0aW9uICYmIHJlc2l6ZU9ic2VydmVycy5wdXNoKGRldGFpbCk7XG4gICAgICAgICAgICBkZXRhaWwub2JzZXJ2YXRpb25UYXJnZXRzLnB1c2gobmV3IFJlc2l6ZU9ic2VydmF0aW9uKHRhcmdldCwgb3B0aW9ucyAmJiBvcHRpb25zLmJveCkpO1xuICAgICAgICAgICAgdXBkYXRlQ291bnQoMSk7XG4gICAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnVub2JzZXJ2ZSA9IGZ1bmN0aW9uIChyZXNpemVPYnNlcnZlciwgdGFyZ2V0KSB7XG4gICAgICAgIHZhciBkZXRhaWwgPSBvYnNlcnZlck1hcC5nZXQocmVzaXplT2JzZXJ2ZXIpO1xuICAgICAgICB2YXIgaW5kZXggPSBnZXRPYnNlcnZhdGlvbkluZGV4KGRldGFpbC5vYnNlcnZhdGlvblRhcmdldHMsIHRhcmdldCk7XG4gICAgICAgIHZhciBsYXN0T2JzZXJ2YXRpb24gPSBkZXRhaWwub2JzZXJ2YXRpb25UYXJnZXRzLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGxhc3RPYnNlcnZhdGlvbiAmJiByZXNpemVPYnNlcnZlcnMuc3BsaWNlKHJlc2l6ZU9ic2VydmVycy5pbmRleE9mKGRldGFpbCksIDEpO1xuICAgICAgICAgICAgZGV0YWlsLm9ic2VydmF0aW9uVGFyZ2V0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgdXBkYXRlQ291bnQoLTEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuZGlzY29ubmVjdCA9IGZ1bmN0aW9uIChyZXNpemVPYnNlcnZlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZGV0YWlsID0gb2JzZXJ2ZXJNYXAuZ2V0KHJlc2l6ZU9ic2VydmVyKTtcbiAgICAgICAgZGV0YWlsLm9ic2VydmF0aW9uVGFyZ2V0cy5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24gKG90KSB7IHJldHVybiBfdGhpcy51bm9ic2VydmUocmVzaXplT2JzZXJ2ZXIsIG90LnRhcmdldCk7IH0pO1xuICAgICAgICBkZXRhaWwuYWN0aXZlVGFyZ2V0cy5zcGxpY2UoMCwgZGV0YWlsLmFjdGl2ZVRhcmdldHMubGVuZ3RoKTtcbiAgICB9O1xuICAgIHJldHVybiBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXI7XG59KCkpO1xuZXhwb3J0IHsgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyIH07XG4iLCAiaW1wb3J0IHsgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyIH0gZnJvbSAnLi9SZXNpemVPYnNlcnZlckNvbnRyb2xsZXInO1xuaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSAnLi91dGlscy9lbGVtZW50JztcbnZhciBSZXNpemVPYnNlcnZlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVzaXplT2JzZXJ2ZXIoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdSZXNpemVPYnNlcnZlcic6IDEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Jlc2l6ZU9ic2VydmVyJzogVGhlIGNhbGxiYWNrIHByb3ZpZGVkIGFzIHBhcmFtZXRlciAxIGlzIG5vdCBhIGZ1bmN0aW9uLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuY29ubmVjdCh0aGlzLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIFJlc2l6ZU9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBleGVjdXRlICdvYnNlcnZlJyBvbiAnUmVzaXplT2JzZXJ2ZXInOiAxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAwIHByZXNlbnQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNFbGVtZW50KHRhcmdldCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gZXhlY3V0ZSAnb2JzZXJ2ZScgb24gJ1Jlc2l6ZU9ic2VydmVyJzogcGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgJ0VsZW1lbnRcIik7XG4gICAgICAgIH1cbiAgICAgICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLm9ic2VydmUodGhpcywgdGFyZ2V0LCBvcHRpb25zKTtcbiAgICB9O1xuICAgIFJlc2l6ZU9ic2VydmVyLnByb3RvdHlwZS51bm9ic2VydmUgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ3Vub2JzZXJ2ZScgb24gJ1Jlc2l6ZU9ic2VydmVyJzogMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50LlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzRWxlbWVudCh0YXJnZXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ3Vub2JzZXJ2ZScgb24gJ1Jlc2l6ZU9ic2VydmVyJzogcGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgJ0VsZW1lbnRcIik7XG4gICAgICAgIH1cbiAgICAgICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnVub2JzZXJ2ZSh0aGlzLCB0YXJnZXQpO1xuICAgIH07XG4gICAgUmVzaXplT2JzZXJ2ZXIucHJvdG90eXBlLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5kaXNjb25uZWN0KHRoaXMpO1xuICAgIH07XG4gICAgUmVzaXplT2JzZXJ2ZXIudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnZnVuY3Rpb24gUmVzaXplT2JzZXJ2ZXIgKCkgeyBbcG9seWZpbGwgY29kZV0gfSc7XG4gICAgfTtcbiAgICByZXR1cm4gUmVzaXplT2JzZXJ2ZXI7XG59KCkpO1xuZXhwb3J0IHsgUmVzaXplT2JzZXJ2ZXIgfTtcbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gIHZhciBrZXksIGk7XG5cbiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldO1xuICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59IiwgImltcG9ydCBvYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIGZyb20gXCIuL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7XG4gIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9O1xuICB2YXIgdGFyZ2V0ID0gb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTtcbiAgdmFyIGtleSwgaTtcblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaV07XG4gICAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTtcbiAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn0iLCAiLyoqXG4gKiBBbiBhdXRvLWluY3JlbWVudGluZyBpZGVudGlmaWVyIGZvciBrZXlzLlxuICovXG5cbmxldCBuID0gMFxuXG4vKipcbiAqIEEgY2xhc3MgdGhhdCBrZWVwcyB0cmFjayBvZiBhIGtleSBzdHJpbmcuIFdlIHVzZSBhIGZ1bGwgY2xhc3MgaGVyZSBiZWNhdXNlIHdlXG4gKiB3YW50IHRvIGJlIGFibGUgdG8gdXNlIHRoZW0gYXMga2V5cyBpbiBgV2Vha01hcGAgb2JqZWN0cy5cbiAqL1xuXG5leHBvcnQgY2xhc3MgS2V5IHtcbiAgaWQ6IHN0cmluZ1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaWQgPSBgJHtuKyt9YFxuICB9XG59XG4iLCAiaW1wb3J0IHsgQW5jZXN0b3IsIEVkaXRvciwgTm9kZSwgUmFuZ2UsIFJhbmdlUmVmLCBUZXh0IH0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICcuLi9ob29rcy9hbmRyb2lkLWlucHV0LW1hbmFnZXIvYW5kcm9pZC1pbnB1dC1tYW5hZ2VyJ1xuaW1wb3J0IHsgVGV4dERpZmYgfSBmcm9tICcuL2RpZmYtdGV4dCdcbmltcG9ydCB7IEtleSB9IGZyb20gJy4va2V5J1xuXG4vKipcbiAqIFR3byB3ZWFrIG1hcHMgdGhhdCBhbGxvdyB1cyByZWJ1aWxkIGEgcGF0aCBnaXZlbiBhIG5vZGUuIFRoZXkgYXJlIHBvcHVsYXRlZFxuICogYXQgcmVuZGVyIHRpbWUgc3VjaCB0aGF0IGFmdGVyIGEgcmVuZGVyIG9jY3VycyB3ZSBjYW4gYWx3YXlzIGJhY2t0cmFjay5cbiAqL1xuXG5leHBvcnQgY29uc3QgTk9ERV9UT19JTkRFWDogV2Vha01hcDxOb2RlLCBudW1iZXI+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IE5PREVfVE9fUEFSRU5UOiBXZWFrTWFwPE5vZGUsIEFuY2VzdG9yPiA9IG5ldyBXZWFrTWFwKClcblxuLyoqXG4gKiBXZWFrIG1hcHMgdGhhdCBhbGxvdyB1cyB0byBnbyBiZXR3ZWVuIFNsYXRlIG5vZGVzIGFuZCBET00gbm9kZXMuIFRoZXNlXG4gKiBhcmUgdXNlZCB0byByZXNvbHZlIERPTSBldmVudC1yZWxhdGVkIGxvZ2ljIGludG8gU2xhdGUgYWN0aW9ucy5cbiAqL1xuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19XSU5ET1c6IFdlYWtNYXA8RWRpdG9yLCBXaW5kb3c+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19FTEVNRU5UOiBXZWFrTWFwPEVkaXRvciwgSFRNTEVsZW1lbnQ+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19QTEFDRUhPTERFUjogV2Vha01hcDxFZGl0b3IsIHN0cmluZz4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX1BMQUNFSE9MREVSX0VMRU1FTlQ6IFdlYWtNYXA8XG4gIEVkaXRvcixcbiAgSFRNTEVsZW1lbnRcbj4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgRUxFTUVOVF9UT19OT0RFOiBXZWFrTWFwPEhUTUxFbGVtZW50LCBOb2RlPiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBOT0RFX1RPX0VMRU1FTlQ6IFdlYWtNYXA8Tm9kZSwgSFRNTEVsZW1lbnQ+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IE5PREVfVE9fS0VZOiBXZWFrTWFwPE5vZGUsIEtleT4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX0tFWV9UT19FTEVNRU5UOiBXZWFrTWFwPFxuICBFZGl0b3IsXG4gIFdlYWtNYXA8S2V5LCBIVE1MRWxlbWVudD5cbj4gPSBuZXcgV2Vha01hcCgpXG5cbi8qKlxuICogV2VhayBtYXBzIGZvciBzdG9yaW5nIGVkaXRvci1yZWxhdGVkIHN0YXRlLlxuICovXG5cbmV4cG9ydCBjb25zdCBJU19SRUFEX09OTFk6IFdlYWtNYXA8RWRpdG9yLCBib29sZWFuPiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBJU19GT0NVU0VEOiBXZWFrTWFwPEVkaXRvciwgYm9vbGVhbj4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgSVNfRFJBR0dJTkc6IFdlYWtNYXA8RWRpdG9yLCBib29sZWFuPiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBJU19DTElDS0lORzogV2Vha01hcDxFZGl0b3IsIGJvb2xlYW4+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IElTX0NPTVBPU0lORzogV2Vha01hcDxFZGl0b3IsIGJvb2xlYW4+ID0gbmV3IFdlYWtNYXAoKVxuXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX1VTRVJfU0VMRUNUSU9OOiBXZWFrTWFwPFxuICBFZGl0b3IsXG4gIFJhbmdlUmVmIHwgbnVsbFxuPiA9IG5ldyBXZWFrTWFwKClcblxuLyoqXG4gKiBXZWFrIG1hcCBmb3IgYXNzb2NpYXRpbmcgdGhlIGNvbnRleHQgYG9uQ2hhbmdlYCBjb250ZXh0IHdpdGggdGhlIHBsdWdpbi5cbiAqL1xuXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX09OX0NIQU5HRSA9IG5ldyBXZWFrTWFwPEVkaXRvciwgKCkgPT4gdm9pZD4oKVxuXG4vKipcbiAqIFdlYWsgbWFwcyBmb3Igc2F2aW5nIHBlbmRpbmcgc3RhdGUgb24gY29tcG9zaXRpb24gc3RhZ2UuXG4gKi9cblxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19TQ0hFRFVMRV9GTFVTSDogV2Vha01hcDxcbiAgRWRpdG9yLFxuICAoKSA9PiB2b2lkXG4+ID0gbmV3IFdlYWtNYXAoKVxuXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTOiBXZWFrTWFwPFxuICBFZGl0b3IsXG4gIFBhcnRpYWw8VGV4dD4gfCBudWxsXG4+ID0gbmV3IFdlYWtNYXAoKVxuXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX1VTRVJfTUFSS1M6IFdlYWtNYXA8XG4gIEVkaXRvcixcbiAgUGFydGlhbDxUZXh0PiB8IG51bGxcbj4gPSBuZXcgV2Vha01hcCgpXG5cbi8qKlxuICogQW5kcm9pZCBpbnB1dCBoYW5kbGluZyBzcGVjaWZpYyB3ZWFrLW1hcHNcbiAqL1xuXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX1BFTkRJTkdfRElGRlM6IFdlYWtNYXA8XG4gIEVkaXRvcixcbiAgVGV4dERpZmZbXVxuPiA9IG5ldyBXZWFrTWFwKClcblxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19QRU5ESU5HX0FDVElPTjogV2Vha01hcDxcbiAgRWRpdG9yLFxuICBBY3Rpb24gfCBudWxsXG4+ID0gbmV3IFdlYWtNYXAoKVxuXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OOiBXZWFrTWFwPFxuICBFZGl0b3IsXG4gIFJhbmdlIHwgbnVsbFxuPiA9IG5ldyBXZWFrTWFwKClcblxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19GT1JDRV9SRU5ERVI6IFdlYWtNYXA8RWRpdG9yLCAoKSA9PiB2b2lkPiA9IG5ldyBXZWFrTWFwKClcblxuLyoqXG4gKiBTeW1ib2xzLlxuICovXG5cbmV4cG9ydCBjb25zdCBQTEFDRUhPTERFUl9TWU1CT0wgPSAoU3ltYm9sKCdwbGFjZWhvbGRlcicpIGFzIHVua25vd24pIGFzIHN0cmluZ1xuZXhwb3J0IGNvbnN0IE1BUktfUExBQ0VIT0xERVJfU1lNQk9MID0gKFN5bWJvbChcbiAgJ21hcmstcGxhY2Vob2xkZXInXG4pIGFzIHVua25vd24pIGFzIHN0cmluZ1xuIiwgIi8qKlxuICogVHlwZXMuXG4gKi9cblxuLy8gQ09NUEFUOiBUaGlzIGlzIHJlcXVpcmVkIHRvIHByZXZlbnQgVHlwZVNjcmlwdCBhbGlhc2VzIGZyb20gZG9pbmcgc29tZSB2ZXJ5XG4vLyB3ZWlyZCB0aGluZ3MgZm9yIFNsYXRlJ3MgdHlwZXMgd2l0aCB0aGUgc2FtZSBuYW1lIGFzIGdsb2JhbHMuICgyMDE5LzExLzI3KVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8zNTAwMlxuaW1wb3J0IERPTU5vZGUgPSBnbG9iYWxUaGlzLk5vZGVcbmltcG9ydCBET01Db21tZW50ID0gZ2xvYmFsVGhpcy5Db21tZW50XG5pbXBvcnQgRE9NRWxlbWVudCA9IGdsb2JhbFRoaXMuRWxlbWVudFxuaW1wb3J0IERPTVRleHQgPSBnbG9iYWxUaGlzLlRleHRcbmltcG9ydCBET01SYW5nZSA9IGdsb2JhbFRoaXMuUmFuZ2VcbmltcG9ydCBET01TZWxlY3Rpb24gPSBnbG9iYWxUaGlzLlNlbGVjdGlvblxuaW1wb3J0IERPTVN0YXRpY1JhbmdlID0gZ2xvYmFsVGhpcy5TdGF0aWNSYW5nZVxuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuLi9wbHVnaW4vcmVhY3QtZWRpdG9yJ1xuXG5leHBvcnQge1xuICBET01Ob2RlLFxuICBET01Db21tZW50LFxuICBET01FbGVtZW50LFxuICBET01UZXh0LFxuICBET01SYW5nZSxcbiAgRE9NU2VsZWN0aW9uLFxuICBET01TdGF0aWNSYW5nZSxcbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICBTZWxlY3Rpb246IHR5cGVvZiBTZWxlY3Rpb25bJ2NvbnN0cnVjdG9yJ11cbiAgICBEYXRhVHJhbnNmZXI6IHR5cGVvZiBEYXRhVHJhbnNmZXJbJ2NvbnN0cnVjdG9yJ11cbiAgICBOb2RlOiB0eXBlb2YgTm9kZVsnY29uc3RydWN0b3InXVxuICB9XG59XG5cbmV4cG9ydCB0eXBlIERPTVBvaW50ID0gW05vZGUsIG51bWJlcl1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBob3N0IHdpbmRvdyBvZiBhIERPTSBub2RlXG4gKi9cblxuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRWaWV3ID0gKHZhbHVlOiBhbnkpOiBXaW5kb3cgfCBudWxsID0+IHtcbiAgcmV0dXJuIChcbiAgICAodmFsdWUgJiYgdmFsdWUub3duZXJEb2N1bWVudCAmJiB2YWx1ZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSB8fCBudWxsXG4gIClcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIERPTSBub2RlIGlzIGEgY29tbWVudCBub2RlLlxuICovXG5cbmV4cG9ydCBjb25zdCBpc0RPTUNvbW1lbnQgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIERPTUNvbW1lbnQgPT4ge1xuICByZXR1cm4gaXNET01Ob2RlKHZhbHVlKSAmJiB2YWx1ZS5ub2RlVHlwZSA9PT0gOFxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgRE9NIG5vZGUgaXMgYW4gZWxlbWVudCBub2RlLlxuICovXG5cbmV4cG9ydCBjb25zdCBpc0RPTUVsZW1lbnQgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIERPTUVsZW1lbnQgPT4ge1xuICByZXR1cm4gaXNET01Ob2RlKHZhbHVlKSAmJiB2YWx1ZS5ub2RlVHlwZSA9PT0gMVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBET00gbm9kZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgaXNET01Ob2RlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBET01Ob2RlID0+IHtcbiAgY29uc3Qgd2luZG93ID0gZ2V0RGVmYXVsdFZpZXcodmFsdWUpXG4gIHJldHVybiAhIXdpbmRvdyAmJiB2YWx1ZSBpbnN0YW5jZW9mIHdpbmRvdy5Ob2RlXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIERPTSBzZWxlY3Rpb24uXG4gKi9cblxuZXhwb3J0IGNvbnN0IGlzRE9NU2VsZWN0aW9uID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBET01TZWxlY3Rpb24gPT4ge1xuICBjb25zdCB3aW5kb3cgPSB2YWx1ZSAmJiB2YWx1ZS5hbmNob3JOb2RlICYmIGdldERlZmF1bHRWaWV3KHZhbHVlLmFuY2hvck5vZGUpXG4gIHJldHVybiAhIXdpbmRvdyAmJiB2YWx1ZSBpbnN0YW5jZW9mIHdpbmRvdy5TZWxlY3Rpb25cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIERPTSBub2RlIGlzIGFuIGVsZW1lbnQgbm9kZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgaXNET01UZXh0ID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBET01UZXh0ID0+IHtcbiAgcmV0dXJuIGlzRE9NTm9kZSh2YWx1ZSkgJiYgdmFsdWUubm9kZVR5cGUgPT09IDNcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhIHBhc3RlIGV2ZW50IGlzIGEgcGxhaW50ZXh0LW9ubHkgZXZlbnQuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGlzUGxhaW5UZXh0T25seVBhc3RlID0gKGV2ZW50OiBDbGlwYm9hcmRFdmVudCkgPT4ge1xuICByZXR1cm4gKFxuICAgIGV2ZW50LmNsaXBib2FyZERhdGEgJiZcbiAgICBldmVudC5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKSAhPT0gJycgJiZcbiAgICBldmVudC5jbGlwYm9hcmREYXRhLnR5cGVzLmxlbmd0aCA9PT0gMVxuICApXG59XG5cbi8qKlxuICogTm9ybWFsaXplIGEgRE9NIHBvaW50IHNvIHRoYXQgaXQgYWx3YXlzIHJlZmVycyB0byBhIHRleHQgbm9kZS5cbiAqL1xuXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplRE9NUG9pbnQgPSAoZG9tUG9pbnQ6IERPTVBvaW50KTogRE9NUG9pbnQgPT4ge1xuICBsZXQgW25vZGUsIG9mZnNldF0gPSBkb21Qb2ludFxuXG4gIC8vIElmIGl0J3MgYW4gZWxlbWVudCBub2RlLCBpdHMgb2Zmc2V0IHJlZmVycyB0byB0aGUgaW5kZXggb2YgaXRzIGNoaWxkcmVuXG4gIC8vIGluY2x1ZGluZyBjb21tZW50IG5vZGVzLCBzbyB0cnkgdG8gZmluZCB0aGUgcmlnaHQgdGV4dCBjaGlsZCBub2RlLlxuICBpZiAoaXNET01FbGVtZW50KG5vZGUpICYmIG5vZGUuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICBsZXQgaXNMYXN0ID0gb2Zmc2V0ID09PSBub2RlLmNoaWxkTm9kZXMubGVuZ3RoXG4gICAgbGV0IGluZGV4ID0gaXNMYXN0ID8gb2Zmc2V0IC0gMSA6IG9mZnNldFxuICAgIDtbbm9kZSwgaW5kZXhdID0gZ2V0RWRpdGFibGVDaGlsZEFuZEluZGV4KFxuICAgICAgbm9kZSxcbiAgICAgIGluZGV4LFxuICAgICAgaXNMYXN0ID8gJ2JhY2t3YXJkJyA6ICdmb3J3YXJkJ1xuICAgIClcbiAgICAvLyBJZiB0aGUgZWRpdGFibGUgY2hpbGQgZm91bmQgaXMgaW4gZnJvbnQgb2YgaW5wdXQgb2Zmc2V0LCB3ZSBpbnN0ZWFkIHNlZWsgdG8gaXRzIGVuZFxuICAgIGlzTGFzdCA9IGluZGV4IDwgb2Zmc2V0XG5cbiAgICAvLyBJZiB0aGUgbm9kZSBoYXMgY2hpbGRyZW4sIHRyYXZlcnNlIHVudGlsIHdlIGhhdmUgYSBsZWFmIG5vZGUuIExlYWYgbm9kZXNcbiAgICAvLyBjYW4gYmUgZWl0aGVyIHRleHQgbm9kZXMsIG9yIG90aGVyIHZvaWQgRE9NIG5vZGVzLlxuICAgIHdoaWxlIChpc0RPTUVsZW1lbnQobm9kZSkgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgaSA9IGlzTGFzdCA/IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggLSAxIDogMFxuICAgICAgbm9kZSA9IGdldEVkaXRhYmxlQ2hpbGQobm9kZSwgaSwgaXNMYXN0ID8gJ2JhY2t3YXJkJyA6ICdmb3J3YXJkJylcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIG5ldyBvZmZzZXQgaW5zaWRlIHRoZSB0ZXh0IG5vZGUuXG4gICAgb2Zmc2V0ID0gaXNMYXN0ICYmIG5vZGUudGV4dENvbnRlbnQgIT0gbnVsbCA/IG5vZGUudGV4dENvbnRlbnQubGVuZ3RoIDogMFxuICB9XG5cbiAgLy8gUmV0dXJuIHRoZSBub2RlIGFuZCBvZmZzZXQuXG4gIHJldHVybiBbbm9kZSwgb2Zmc2V0XVxufVxuXG4vKipcbiAqIERldGVybWluZXMgd2V0aGVyIHRoZSBhY3RpdmUgZWxlbWVudCBpcyBuZXN0ZWQgd2l0aGluIGEgc2hhZG93Um9vdFxuICovXG5cbmV4cG9ydCBjb25zdCBoYXNTaGFkb3dSb290ID0gKG5vZGU6IE5vZGUgfCBudWxsKSA9PiB7XG4gIGxldCBwYXJlbnQgPSBub2RlICYmIG5vZGUucGFyZW50Tm9kZVxuICB3aGlsZSAocGFyZW50KSB7XG4gICAgaWYgKHBhcmVudC50b1N0cmluZygpID09PSAnW29iamVjdCBTaGFkb3dSb290XScpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlXG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbi8qKlxuICogR2V0IHRoZSBuZWFyZXN0IGVkaXRhYmxlIGNoaWxkIGFuZCBpbmRleCBhdCBgaW5kZXhgIGluIGEgYHBhcmVudGAsIHByZWZlcnJpbmdcbiAqIGBkaXJlY3Rpb25gLlxuICovXG5cbmV4cG9ydCBjb25zdCBnZXRFZGl0YWJsZUNoaWxkQW5kSW5kZXggPSAoXG4gIHBhcmVudDogRE9NRWxlbWVudCxcbiAgaW5kZXg6IG51bWJlcixcbiAgZGlyZWN0aW9uOiAnZm9yd2FyZCcgfCAnYmFja3dhcmQnXG4pOiBbRE9NTm9kZSwgbnVtYmVyXSA9PiB7XG4gIGNvbnN0IHsgY2hpbGROb2RlcyB9ID0gcGFyZW50XG4gIGxldCBjaGlsZCA9IGNoaWxkTm9kZXNbaW5kZXhdXG4gIGxldCBpID0gaW5kZXhcbiAgbGV0IHRyaWVkRm9yd2FyZCA9IGZhbHNlXG4gIGxldCB0cmllZEJhY2t3YXJkID0gZmFsc2VcblxuICAvLyBXaGlsZSB0aGUgY2hpbGQgaXMgYSBjb21tZW50IG5vZGUsIG9yIGFuIGVsZW1lbnQgbm9kZSB3aXRoIG5vIGNoaWxkcmVuLFxuICAvLyBrZWVwIGl0ZXJhdGluZyB0byBmaW5kIGEgc2libGluZyBub24tdm9pZCwgbm9uLWNvbW1lbnQgbm9kZS5cbiAgd2hpbGUgKFxuICAgIGlzRE9NQ29tbWVudChjaGlsZCkgfHxcbiAgICAoaXNET01FbGVtZW50KGNoaWxkKSAmJiBjaGlsZC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMCkgfHxcbiAgICAoaXNET01FbGVtZW50KGNoaWxkKSAmJiBjaGlsZC5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScpID09PSAnZmFsc2UnKVxuICApIHtcbiAgICBpZiAodHJpZWRGb3J3YXJkICYmIHRyaWVkQmFja3dhcmQpIHtcbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKGkgPj0gY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHRyaWVkRm9yd2FyZCA9IHRydWVcbiAgICAgIGkgPSBpbmRleCAtIDFcbiAgICAgIGRpcmVjdGlvbiA9ICdiYWNrd2FyZCdcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgaWYgKGkgPCAwKSB7XG4gICAgICB0cmllZEJhY2t3YXJkID0gdHJ1ZVxuICAgICAgaSA9IGluZGV4ICsgMVxuICAgICAgZGlyZWN0aW9uID0gJ2ZvcndhcmQnXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGNoaWxkID0gY2hpbGROb2Rlc1tpXVxuICAgIGluZGV4ID0gaVxuICAgIGkgKz0gZGlyZWN0aW9uID09PSAnZm9yd2FyZCcgPyAxIDogLTFcbiAgfVxuXG4gIHJldHVybiBbY2hpbGQsIGluZGV4XVxufVxuXG4vKipcbiAqIEdldCB0aGUgbmVhcmVzdCBlZGl0YWJsZSBjaGlsZCBhdCBgaW5kZXhgIGluIGEgYHBhcmVudGAsIHByZWZlcnJpbmdcbiAqIGBkaXJlY3Rpb25gLlxuICovXG5cbmV4cG9ydCBjb25zdCBnZXRFZGl0YWJsZUNoaWxkID0gKFxuICBwYXJlbnQ6IERPTUVsZW1lbnQsXG4gIGluZGV4OiBudW1iZXIsXG4gIGRpcmVjdGlvbjogJ2ZvcndhcmQnIHwgJ2JhY2t3YXJkJ1xuKTogRE9NTm9kZSA9PiB7XG4gIGNvbnN0IFtjaGlsZF0gPSBnZXRFZGl0YWJsZUNoaWxkQW5kSW5kZXgocGFyZW50LCBpbmRleCwgZGlyZWN0aW9uKVxuICByZXR1cm4gY2hpbGRcbn1cblxuLyoqXG4gKiBHZXQgYSBwbGFpbnRleHQgcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbnRlbnQgb2YgYSBub2RlLCBhY2NvdW50aW5nIGZvciBibG9ja1xuICogZWxlbWVudHMgd2hpY2ggZ2V0IGEgbmV3bGluZSBhcHBlbmRlZC5cbiAqXG4gKiBUaGUgZG9tTm9kZSBtdXN0IGJlIGF0dGFjaGVkIHRvIHRoZSBET00uXG4gKi9cblxuZXhwb3J0IGNvbnN0IGdldFBsYWluVGV4dCA9IChkb21Ob2RlOiBET01Ob2RlKSA9PiB7XG4gIGxldCB0ZXh0ID0gJydcblxuICBpZiAoaXNET01UZXh0KGRvbU5vZGUpICYmIGRvbU5vZGUubm9kZVZhbHVlKSB7XG4gICAgcmV0dXJuIGRvbU5vZGUubm9kZVZhbHVlXG4gIH1cblxuICBpZiAoaXNET01FbGVtZW50KGRvbU5vZGUpKSB7XG4gICAgZm9yIChjb25zdCBjaGlsZE5vZGUgb2YgQXJyYXkuZnJvbShkb21Ob2RlLmNoaWxkTm9kZXMpKSB7XG4gICAgICB0ZXh0ICs9IGdldFBsYWluVGV4dChjaGlsZE5vZGUpXG4gICAgfVxuXG4gICAgY29uc3QgZGlzcGxheSA9IGdldENvbXB1dGVkU3R5bGUoZG9tTm9kZSkuZ2V0UHJvcGVydHlWYWx1ZSgnZGlzcGxheScpXG5cbiAgICBpZiAoZGlzcGxheSA9PT0gJ2Jsb2NrJyB8fCBkaXNwbGF5ID09PSAnbGlzdCcgfHwgZG9tTm9kZS50YWdOYW1lID09PSAnQlInKSB7XG4gICAgICB0ZXh0ICs9ICdcXG4nXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRleHRcbn1cblxuLyoqXG4gKiBHZXQgeC1zbGF0ZS1mcmFnbWVudCBhdHRyaWJ1dGUgZnJvbSBkYXRhLXNsYXRlLWZyYWdtZW50XG4gKi9cbmNvbnN0IGNhdGNoU2xhdGVGcmFnbWVudCA9IC9kYXRhLXNsYXRlLWZyYWdtZW50PVwiKC4rPylcIi9tXG5leHBvcnQgY29uc3QgZ2V0U2xhdGVGcmFnbWVudEF0dHJpYnV0ZSA9IChcbiAgZGF0YVRyYW5zZmVyOiBEYXRhVHJhbnNmZXJcbik6IHN0cmluZyB8IHZvaWQgPT4ge1xuICBjb25zdCBodG1sRGF0YSA9IGRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L2h0bWwnKVxuICBjb25zdCBbLCBmcmFnbWVudF0gPSBodG1sRGF0YS5tYXRjaChjYXRjaFNsYXRlRnJhZ21lbnQpIHx8IFtdXG4gIHJldHVybiBmcmFnbWVudFxufVxuXG4vKipcbiAqIEdldCB0aGUgeC1zbGF0ZS1mcmFnbWVudCBhdHRyaWJ1dGUgdGhhdCBleGlzdCBpbiB0ZXh0L2h0bWwgZGF0YVxuICogYW5kIGFwcGVuZCBpdCB0byB0aGUgRGF0YVRyYW5zZmVyIG9iamVjdFxuICovXG5leHBvcnQgY29uc3QgZ2V0Q2xpcGJvYXJkRGF0YSA9IChkYXRhVHJhbnNmZXI6IERhdGFUcmFuc2Zlcik6IERhdGFUcmFuc2ZlciA9PiB7XG4gIGlmICghZGF0YVRyYW5zZmVyLmdldERhdGEoJ2FwcGxpY2F0aW9uL3gtc2xhdGUtZnJhZ21lbnQnKSkge1xuICAgIGNvbnN0IGZyYWdtZW50ID0gZ2V0U2xhdGVGcmFnbWVudEF0dHJpYnV0ZShkYXRhVHJhbnNmZXIpXG4gICAgaWYgKGZyYWdtZW50KSB7XG4gICAgICBjb25zdCBjbGlwYm9hcmREYXRhID0gbmV3IERhdGFUcmFuc2ZlcigpXG4gICAgICBkYXRhVHJhbnNmZXIudHlwZXMuZm9yRWFjaCh0eXBlID0+IHtcbiAgICAgICAgY2xpcGJvYXJkRGF0YS5zZXREYXRhKHR5cGUsIGRhdGFUcmFuc2Zlci5nZXREYXRhKHR5cGUpKVxuICAgICAgfSlcbiAgICAgIGNsaXBib2FyZERhdGEuc2V0RGF0YSgnYXBwbGljYXRpb24veC1zbGF0ZS1mcmFnbWVudCcsIGZyYWdtZW50KVxuICAgICAgcmV0dXJuIGNsaXBib2FyZERhdGFcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRhdGFUcmFuc2ZlclxufVxuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgYSBtdXRhdGlvbiBvcmlnaW5hdGVzIGZyb20gYSBlZGl0YWJsZSBlbGVtZW50IGluc2lkZSB0aGUgZWRpdG9yLlxuICovXG5cbmV4cG9ydCBjb25zdCBpc1RyYWNrZWRNdXRhdGlvbiA9IChcbiAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgbXV0YXRpb246IE11dGF0aW9uUmVjb3JkLFxuICBiYXRjaDogTXV0YXRpb25SZWNvcmRbXVxuKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IHsgdGFyZ2V0IH0gPSBtdXRhdGlvblxuICBpZiAoaXNET01FbGVtZW50KHRhcmdldCkgJiYgdGFyZ2V0Lm1hdGNoZXMoJ1tjb250ZW50RWRpdGFibGU9XCJmYWxzZVwiXScpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBjb25zdCB7IGRvY3VtZW50IH0gPSBSZWFjdEVkaXRvci5nZXRXaW5kb3coZWRpdG9yKVxuICBpZiAoZG9jdW1lbnQuY29udGFpbnModGFyZ2V0KSkge1xuICAgIHJldHVybiBSZWFjdEVkaXRvci5oYXNET01Ob2RlKGVkaXRvciwgdGFyZ2V0LCB7IGVkaXRhYmxlOiB0cnVlIH0pXG4gIH1cblxuICBjb25zdCBwYXJlbnRNdXRhdGlvbiA9IGJhdGNoLmZpbmQoKHsgYWRkZWROb2RlcywgcmVtb3ZlZE5vZGVzIH0pID0+IHtcbiAgICBmb3IgKGNvbnN0IG5vZGUgb2YgYWRkZWROb2Rlcykge1xuICAgICAgaWYgKG5vZGUgPT09IHRhcmdldCB8fCBub2RlLmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IG5vZGUgb2YgcmVtb3ZlZE5vZGVzKSB7XG4gICAgICBpZiAobm9kZSA9PT0gdGFyZ2V0IHx8IG5vZGUuY29udGFpbnModGFyZ2V0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBpZiAoIXBhcmVudE11dGF0aW9uIHx8IHBhcmVudE11dGF0aW9uID09PSBtdXRhdGlvbikge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLy8gVGFyZ2V0IGFkZC9yZW1vdmUgaXMgdHJhY2tlZC4gVHJhY2sgdGhlIG11dGF0aW9uIGlmIHdlIHRyYWNrIHRoZSBwYXJlbnQgbXV0YXRpb24uXG4gIHJldHVybiBpc1RyYWNrZWRNdXRhdGlvbihlZGl0b3IsIHBhcmVudE11dGF0aW9uLCBiYXRjaClcbn1cbiIsICJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmV4cG9ydCBjb25zdCBJU19SRUFDVF9WRVJTSU9OXzE3X09SX0FCT1ZFID1cbiAgcGFyc2VJbnQoUmVhY3QudmVyc2lvbi5zcGxpdCgnLicpWzBdLCAxMCkgPj0gMTdcblxuZXhwb3J0IGNvbnN0IElTX0lPUyA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gIC9pUGFkfGlQaG9uZXxpUG9kLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmXG4gICF3aW5kb3cuTVNTdHJlYW1cblxuZXhwb3J0IGNvbnN0IElTX0FQUExFID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgL01hYyBPUyBYLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbmV4cG9ydCBjb25zdCBJU19BTkRST0lEID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgL0FuZHJvaWQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcblxuZXhwb3J0IGNvbnN0IElTX0ZJUkVGT1ggPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAvXig/IS4qU2VhbW9ua2V5KSg/PS4qRmlyZWZveCkuKi9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcblxuZXhwb3J0IGNvbnN0IElTX1NBRkFSSSA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gIC9WZXJzaW9uXFwvW1xcZFxcLl0rLipTYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcblxuLy8gXCJtb2Rlcm5cIiBFZGdlIHdhcyByZWxlYXNlZCBhdCA3OS54XG5leHBvcnQgY29uc3QgSVNfRURHRV9MRUdBQ1kgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAvRWRnZT9cXC8oPzpbMC02XVswLTldfFswLTddWzAtOF0pKD86XFwuKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcblxuZXhwb3J0IGNvbnN0IElTX0NIUk9NRSA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC9DaHJvbWUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbi8vIE5hdGl2ZSBgYmVmb3JlSW5wdXRgIGV2ZW50cyBkb24ndCB3b3JrIHdlbGwgd2l0aCByZWFjdCBvbiBDaHJvbWUgNzVcbi8vIGFuZCBvbGRlciwgQ2hyb21lIDc2KyBjYW4gdXNlIGBiZWZvcmVJbnB1dGAgdGhvdWdoLlxuZXhwb3J0IGNvbnN0IElTX0NIUk9NRV9MRUdBQ1kgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAvQ2hyb21lP1xcLyg/OlswLTddWzAtNV18WzAtNl1bMC05XSkoPzpcXC4pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG4vLyBGaXJlZm94IGRpZCBub3Qgc3VwcG9ydCBgYmVmb3JlSW5wdXRgIHVudGlsIGB2ODdgLlxuZXhwb3J0IGNvbnN0IElTX0ZJUkVGT1hfTEVHQUNZID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgL14oPyEuKlNlYW1vbmtleSkoPz0uKkZpcmVmb3hcXC8oPzpbMC03XVswLTldfFswLThdWzAtNl0pKD86XFwuKSkuKi9pLnRlc3QoXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudFxuICApXG5cbi8vIFVDIG1vYmlsZSBicm93c2VyXG5leHBvcnQgY29uc3QgSVNfVUNfTU9CSUxFID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgLy4qVUNCcm93c2VyLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbi8vIFdlY2hhdCBicm93c2VyXG5leHBvcnQgY29uc3QgSVNfV0VDSEFUQlJPV1NFUiA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC8uKldlY2hhdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG4vLyBDaGVjayBpZiBET00gaXMgYXZhaWxhYmxlIGFzIFJlYWN0IGRvZXMgaW50ZXJuYWxseS5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9ibG9iL21hc3Rlci9wYWNrYWdlcy9zaGFyZWQvRXhlY3V0aW9uRW52aXJvbm1lbnQuanNcbmV4cG9ydCBjb25zdCBDQU5fVVNFX0RPTSA9ICEhKFxuICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICB0eXBlb2Ygd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgIT09ICd1bmRlZmluZWQnXG4pXG5cbi8vIENPTVBBVDogRmlyZWZveC9FZGdlIExlZ2FjeSBkb24ndCBzdXBwb3J0IHRoZSBgYmVmb3JlaW5wdXRgIGV2ZW50XG4vLyBDaHJvbWUgTGVnYWN5IGRvZXNuJ3Qgc3VwcG9ydCBgYmVmb3JlaW5wdXRgIGNvcnJlY3RseVxuZXhwb3J0IGNvbnN0IEhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCA9XG4gICFJU19DSFJPTUVfTEVHQUNZICYmXG4gICFJU19FREdFX0xFR0FDWSAmJlxuICAvLyBnbG9iYWxUaGlzIGlzIHVuZGVmaW5lZCBpbiBvbGRlciBicm93c2Vyc1xuICB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgZ2xvYmFsVGhpcy5JbnB1dEV2ZW50ICYmXG4gIC8vIEB0cy1pZ25vcmUgVGhlIGBnZXRUYXJnZXRSYW5nZXNgIHByb3BlcnR5IGlzbid0IHJlY29nbml6ZWQuXG4gIHR5cGVvZiBnbG9iYWxUaGlzLklucHV0RXZlbnQucHJvdG90eXBlLmdldFRhcmdldFJhbmdlcyA9PT0gJ2Z1bmN0aW9uJ1xuIiwgImltcG9ydCB7XG4gIEJhc2VFZGl0b3IsXG4gIEVkaXRvcixcbiAgTm9kZSxcbiAgUGF0aCxcbiAgUG9pbnQsXG4gIFJhbmdlLFxuICBTY3J1YmJlcixcbiAgVHJhbnNmb3JtcyxcbiAgRWxlbWVudCxcbn0gZnJvbSAnc2xhdGUnXG5cbmltcG9ydCB7IEtleSB9IGZyb20gJy4uL3V0aWxzL2tleSdcbmltcG9ydCB7XG4gIEVESVRPUl9UT19FTEVNRU5ULFxuICBFTEVNRU5UX1RPX05PREUsXG4gIElTX0ZPQ1VTRUQsXG4gIElTX1JFQURfT05MWSxcbiAgTk9ERV9UT19JTkRFWCxcbiAgTk9ERV9UT19LRVksXG4gIE5PREVfVE9fUEFSRU5ULFxuICBFRElUT1JfVE9fV0lORE9XLFxuICBFRElUT1JfVE9fS0VZX1RPX0VMRU1FTlQsXG4gIElTX0NPTVBPU0lORyxcbiAgRURJVE9SX1RPX1NDSEVEVUxFX0ZMVVNILFxuICBFRElUT1JfVE9fUEVORElOR19ESUZGUyxcbn0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHtcbiAgRE9NRWxlbWVudCxcbiAgRE9NTm9kZSxcbiAgRE9NUG9pbnQsXG4gIERPTVJhbmdlLFxuICBET01TZWxlY3Rpb24sXG4gIERPTVN0YXRpY1JhbmdlLFxuICBpc0RPTUVsZW1lbnQsXG4gIGlzRE9NU2VsZWN0aW9uLFxuICBpc0RPTU5vZGUsXG4gIG5vcm1hbGl6ZURPTVBvaW50LFxuICBoYXNTaGFkb3dSb290LFxuICBET01UZXh0LFxufSBmcm9tICcuLi91dGlscy9kb20nXG5pbXBvcnQgeyBJU19DSFJPTUUsIElTX0ZJUkVGT1gsIElTX0FORFJPSUQgfSBmcm9tICcuLi91dGlscy9lbnZpcm9ubWVudCdcblxuLyoqXG4gKiBBIFJlYWN0IGFuZCBET00tc3BlY2lmaWMgdmVyc2lvbiBvZiB0aGUgYEVkaXRvcmAgaW50ZXJmYWNlLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVhY3RFZGl0b3IgZXh0ZW5kcyBCYXNlRWRpdG9yIHtcbiAgaW5zZXJ0RGF0YTogKGRhdGE6IERhdGFUcmFuc2ZlcikgPT4gdm9pZFxuICBpbnNlcnRGcmFnbWVudERhdGE6IChkYXRhOiBEYXRhVHJhbnNmZXIpID0+IGJvb2xlYW5cbiAgaW5zZXJ0VGV4dERhdGE6IChkYXRhOiBEYXRhVHJhbnNmZXIpID0+IGJvb2xlYW5cbiAgc2V0RnJhZ21lbnREYXRhOiAoXG4gICAgZGF0YTogRGF0YVRyYW5zZmVyLFxuICAgIG9yaWdpbkV2ZW50PzogJ2RyYWcnIHwgJ2NvcHknIHwgJ2N1dCdcbiAgKSA9PiB2b2lkXG4gIGhhc1JhbmdlOiAoZWRpdG9yOiBSZWFjdEVkaXRvciwgcmFuZ2U6IFJhbmdlKSA9PiBib29sZWFuXG4gIGhhc1RhcmdldDogKFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgdGFyZ2V0OiBFdmVudFRhcmdldCB8IG51bGxcbiAgKSA9PiB0YXJnZXQgaXMgRE9NTm9kZVxuICBoYXNFZGl0YWJsZVRhcmdldDogKFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgdGFyZ2V0OiBFdmVudFRhcmdldCB8IG51bGxcbiAgKSA9PiB0YXJnZXQgaXMgRE9NTm9kZVxuICBoYXNTZWxlY3RhYmxlVGFyZ2V0OiAoXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICB0YXJnZXQ6IEV2ZW50VGFyZ2V0IHwgbnVsbFxuICApID0+IGJvb2xlYW5cbiAgaXNUYXJnZXRJbnNpZGVOb25SZWFkb25seVZvaWQ6IChcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIHRhcmdldDogRXZlbnRUYXJnZXQgfCBudWxsXG4gICkgPT4gYm9vbGVhblxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgUmVhY3RFZGl0b3IgPSB7XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdXNlciBpcyBjdXJyZW50bHkgY29tcG9zaW5nIGluc2lkZSB0aGUgZWRpdG9yLlxuICAgKi9cblxuICBpc0NvbXBvc2luZyhlZGl0b3I6IFJlYWN0RWRpdG9yKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhSVNfQ09NUE9TSU5HLmdldChlZGl0b3IpXG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgaG9zdCB3aW5kb3cgb2YgdGhlIGN1cnJlbnQgZWRpdG9yLlxuICAgKi9cblxuICBnZXRXaW5kb3coZWRpdG9yOiBSZWFjdEVkaXRvcik6IFdpbmRvdyB7XG4gICAgY29uc3Qgd2luZG93ID0gRURJVE9SX1RPX1dJTkRPVy5nZXQoZWRpdG9yKVxuICAgIGlmICghd2luZG93KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBmaW5kIGEgaG9zdCB3aW5kb3cgZWxlbWVudCBmb3IgdGhpcyBlZGl0b3InKVxuICAgIH1cbiAgICByZXR1cm4gd2luZG93XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmQgYSBrZXkgZm9yIGEgU2xhdGUgbm9kZS5cbiAgICovXG5cbiAgZmluZEtleShlZGl0b3I6IFJlYWN0RWRpdG9yLCBub2RlOiBOb2RlKTogS2V5IHtcbiAgICBsZXQga2V5ID0gTk9ERV9UT19LRVkuZ2V0KG5vZGUpXG5cbiAgICBpZiAoIWtleSkge1xuICAgICAga2V5ID0gbmV3IEtleSgpXG4gICAgICBOT0RFX1RPX0tFWS5zZXQobm9kZSwga2V5KVxuICAgIH1cblxuICAgIHJldHVybiBrZXlcbiAgfSxcblxuICAvKipcbiAgICogRmluZCB0aGUgcGF0aCBvZiBTbGF0ZSBub2RlLlxuICAgKi9cblxuICBmaW5kUGF0aChlZGl0b3I6IFJlYWN0RWRpdG9yLCBub2RlOiBOb2RlKTogUGF0aCB7XG4gICAgY29uc3QgcGF0aDogUGF0aCA9IFtdXG4gICAgbGV0IGNoaWxkID0gbm9kZVxuXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IE5PREVfVE9fUEFSRU5ULmdldChjaGlsZClcblxuICAgICAgaWYgKHBhcmVudCA9PSBudWxsKSB7XG4gICAgICAgIGlmIChFZGl0b3IuaXNFZGl0b3IoY2hpbGQpKSB7XG4gICAgICAgICAgcmV0dXJuIHBhdGhcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGkgPSBOT0RFX1RPX0lOREVYLmdldChjaGlsZClcblxuICAgICAgaWYgKGkgPT0gbnVsbCkge1xuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBwYXRoLnVuc2hpZnQoaSlcbiAgICAgIGNoaWxkID0gcGFyZW50XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFVuYWJsZSB0byBmaW5kIHRoZSBwYXRoIGZvciBTbGF0ZSBub2RlOiAke1NjcnViYmVyLnN0cmluZ2lmeShub2RlKX1gXG4gICAgKVxuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBET00gbm9kZSB0aGF0IGltcGxlbWVudHMgRG9jdW1lbnRPclNoYWRvd1Jvb3QgZm9yIHRoZSBlZGl0b3IuXG4gICAqL1xuXG4gIGZpbmREb2N1bWVudE9yU2hhZG93Um9vdChlZGl0b3I6IFJlYWN0RWRpdG9yKTogRG9jdW1lbnQgfCBTaGFkb3dSb290IHtcbiAgICBjb25zdCBlbCA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcilcbiAgICBjb25zdCByb290ID0gZWwuZ2V0Um9vdE5vZGUoKVxuXG4gICAgaWYgKFxuICAgICAgKHJvb3QgaW5zdGFuY2VvZiBEb2N1bWVudCB8fCByb290IGluc3RhbmNlb2YgU2hhZG93Um9vdCkgJiZcbiAgICAgIHJvb3QuZ2V0U2VsZWN0aW9uICE9IG51bGxcbiAgICApIHtcbiAgICAgIHJldHVybiByb290XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsLm93bmVyRG9jdW1lbnRcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGVkaXRvciBpcyBmb2N1c2VkLlxuICAgKi9cblxuICBpc0ZvY3VzZWQoZWRpdG9yOiBSZWFjdEVkaXRvcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIUlTX0ZPQ1VTRUQuZ2V0KGVkaXRvcilcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGVkaXRvciBpcyBpbiByZWFkLW9ubHkgbW9kZS5cbiAgICovXG5cbiAgaXNSZWFkT25seShlZGl0b3I6IFJlYWN0RWRpdG9yKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhSVNfUkVBRF9PTkxZLmdldChlZGl0b3IpXG4gIH0sXG5cbiAgLyoqXG4gICAqIEJsdXIgdGhlIGVkaXRvci5cbiAgICovXG5cbiAgYmx1cihlZGl0b3I6IFJlYWN0RWRpdG9yKTogdm9pZCB7XG4gICAgY29uc3QgZWwgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBlZGl0b3IpXG4gICAgY29uc3Qgcm9vdCA9IFJlYWN0RWRpdG9yLmZpbmREb2N1bWVudE9yU2hhZG93Um9vdChlZGl0b3IpXG4gICAgSVNfRk9DVVNFRC5zZXQoZWRpdG9yLCBmYWxzZSlcblxuICAgIGlmIChyb290LmFjdGl2ZUVsZW1lbnQgPT09IGVsKSB7XG4gICAgICBlbC5ibHVyKClcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZvY3VzIHRoZSBlZGl0b3IuXG4gICAqL1xuXG4gIGZvY3VzKGVkaXRvcjogUmVhY3RFZGl0b3IpOiB2b2lkIHtcbiAgICBjb25zdCBlbCA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcilcbiAgICBjb25zdCByb290ID0gUmVhY3RFZGl0b3IuZmluZERvY3VtZW50T3JTaGFkb3dSb290KGVkaXRvcilcbiAgICBJU19GT0NVU0VELnNldChlZGl0b3IsIHRydWUpXG5cbiAgICBpZiAocm9vdC5hY3RpdmVFbGVtZW50ICE9PSBlbCkge1xuICAgICAgZWwuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZXNlbGVjdCB0aGUgZWRpdG9yLlxuICAgKi9cblxuICBkZXNlbGVjdChlZGl0b3I6IFJlYWN0RWRpdG9yKTogdm9pZCB7XG4gICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICAgIGNvbnN0IHJvb3QgPSBSZWFjdEVkaXRvci5maW5kRG9jdW1lbnRPclNoYWRvd1Jvb3QoZWRpdG9yKVxuICAgIGNvbnN0IGRvbVNlbGVjdGlvbiA9IHJvb3QuZ2V0U2VsZWN0aW9uKClcblxuICAgIGlmIChkb21TZWxlY3Rpb24gJiYgZG9tU2VsZWN0aW9uLnJhbmdlQ291bnQgPiAwKSB7XG4gICAgICBkb21TZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKClcbiAgICB9XG5cbiAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICBUcmFuc2Zvcm1zLmRlc2VsZWN0KGVkaXRvcilcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgRE9NIG5vZGUgaXMgd2l0aGluIHRoZSBlZGl0b3IuXG4gICAqL1xuXG4gIGhhc0RPTU5vZGUoXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICB0YXJnZXQ6IERPTU5vZGUsXG4gICAgb3B0aW9uczogeyBlZGl0YWJsZT86IGJvb2xlYW4gfSA9IHt9XG4gICk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgZWRpdGFibGUgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgIGNvbnN0IGVkaXRvckVsID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKVxuICAgIGxldCB0YXJnZXRFbFxuXG4gICAgLy8gQ09NUEFUOiBJbiBGaXJlZm94LCByZWFkaW5nIGB0YXJnZXQubm9kZVR5cGVgIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWZcbiAgICAvLyB0YXJnZXQgaXMgb3JpZ2luYXRpbmcgZnJvbSBhbiBpbnRlcm5hbCBcInJlc3RyaWN0ZWRcIiBlbGVtZW50IChlLmcuIGFcbiAgICAvLyBzdGVwcGVyIGFycm93IG9uIGEgbnVtYmVyIGlucHV0KS4gKDIwMTgvMDUvMDQpXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2lhbnN0b3JtdGF5bG9yL3NsYXRlL2lzc3Vlcy8xODE5XG4gICAgdHJ5IHtcbiAgICAgIHRhcmdldEVsID0gKGlzRE9NRWxlbWVudCh0YXJnZXQpXG4gICAgICAgID8gdGFyZ2V0XG4gICAgICAgIDogdGFyZ2V0LnBhcmVudEVsZW1lbnQpIGFzIEhUTUxFbGVtZW50XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoXG4gICAgICAgICFlcnIubWVzc2FnZS5pbmNsdWRlcygnUGVybWlzc2lvbiBkZW5pZWQgdG8gYWNjZXNzIHByb3BlcnR5IFwibm9kZVR5cGVcIicpXG4gICAgICApIHtcbiAgICAgICAgdGhyb3cgZXJyXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0YXJnZXRFbCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIHRhcmdldEVsLmNsb3Nlc3QoYFtkYXRhLXNsYXRlLWVkaXRvcl1gKSA9PT0gZWRpdG9yRWwgJiZcbiAgICAgICghZWRpdGFibGUgfHwgdGFyZ2V0RWwuaXNDb250ZW50RWRpdGFibGVcbiAgICAgICAgPyB0cnVlXG4gICAgICAgIDogKHR5cGVvZiB0YXJnZXRFbC5pc0NvbnRlbnRFZGl0YWJsZSA9PT0gJ2Jvb2xlYW4nICYmIC8vIGlzQ29udGVudEVkaXRhYmxlIGV4aXN0cyBvbmx5IG9uIEhUTUxFbGVtZW50LCBhbmQgb24gb3RoZXIgbm9kZXMgaXQgd2lsbCBiZSB1bmRlZmluZWRcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgdGhlIGNvcmUgbG9naWMgdGhhdCBsZXRzIHlvdSBrbm93IHlvdSBnb3QgdGhlIHJpZ2h0IGVkaXRvci5zZWxlY3Rpb24gaW5zdGVhZCBvZiBudWxsIHdoZW4gZWRpdG9yIGlzIGNvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCIocmVhZE9ubHkpXG4gICAgICAgICAgICB0YXJnZXRFbC5jbG9zZXN0KCdbY29udGVudGVkaXRhYmxlPVwiZmFsc2VcIl0nKSA9PT0gZWRpdG9yRWwpIHx8XG4gICAgICAgICAgISF0YXJnZXRFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtemVyby13aWR0aCcpKVxuICAgIClcbiAgfSxcblxuICAvKipcbiAgICogSW5zZXJ0IGRhdGEgZnJvbSBhIGBEYXRhVHJhbnNmZXJgIGludG8gdGhlIGVkaXRvci5cbiAgICovXG5cbiAgaW5zZXJ0RGF0YShlZGl0b3I6IFJlYWN0RWRpdG9yLCBkYXRhOiBEYXRhVHJhbnNmZXIpOiB2b2lkIHtcbiAgICBlZGl0b3IuaW5zZXJ0RGF0YShkYXRhKVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbnNlcnQgZnJhZ21lbnQgZGF0YSBmcm9tIGEgYERhdGFUcmFuc2ZlcmAgaW50byB0aGUgZWRpdG9yLlxuICAgKi9cblxuICBpbnNlcnRGcmFnbWVudERhdGEoZWRpdG9yOiBSZWFjdEVkaXRvciwgZGF0YTogRGF0YVRyYW5zZmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGVkaXRvci5pbnNlcnRGcmFnbWVudERhdGEoZGF0YSlcbiAgfSxcblxuICAvKipcbiAgICogSW5zZXJ0IHRleHQgZGF0YSBmcm9tIGEgYERhdGFUcmFuc2ZlcmAgaW50byB0aGUgZWRpdG9yLlxuICAgKi9cblxuICBpbnNlcnRUZXh0RGF0YShlZGl0b3I6IFJlYWN0RWRpdG9yLCBkYXRhOiBEYXRhVHJhbnNmZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZWRpdG9yLmluc2VydFRleHREYXRhKGRhdGEpXG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgZGF0YSBmcm9tIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgZnJhZ21lbnQgb24gYSBgRGF0YVRyYW5zZmVyYC5cbiAgICovXG5cbiAgc2V0RnJhZ21lbnREYXRhKFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgZGF0YTogRGF0YVRyYW5zZmVyLFxuICAgIG9yaWdpbkV2ZW50PzogJ2RyYWcnIHwgJ2NvcHknIHwgJ2N1dCdcbiAgKTogdm9pZCB7XG4gICAgZWRpdG9yLnNldEZyYWdtZW50RGF0YShkYXRhLCBvcmlnaW5FdmVudClcbiAgfSxcblxuICAvKipcbiAgICogRmluZCB0aGUgbmF0aXZlIERPTSBlbGVtZW50IGZyb20gYSBTbGF0ZSBub2RlLlxuICAgKi9cblxuICB0b0RPTU5vZGUoZWRpdG9yOiBSZWFjdEVkaXRvciwgbm9kZTogTm9kZSk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBLRVlfVE9fRUxFTUVOVCA9IEVESVRPUl9UT19LRVlfVE9fRUxFTUVOVC5nZXQoZWRpdG9yKVxuICAgIGNvbnN0IGRvbU5vZGUgPSBFZGl0b3IuaXNFZGl0b3Iobm9kZSlcbiAgICAgID8gRURJVE9SX1RPX0VMRU1FTlQuZ2V0KGVkaXRvcilcbiAgICAgIDogS0VZX1RPX0VMRU1FTlQ/LmdldChSZWFjdEVkaXRvci5maW5kS2V5KGVkaXRvciwgbm9kZSkpXG5cbiAgICBpZiAoIWRvbU5vZGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCByZXNvbHZlIGEgRE9NIG5vZGUgZnJvbSBTbGF0ZSBub2RlOiAke1NjcnViYmVyLnN0cmluZ2lmeShub2RlKX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIGRvbU5vZGVcbiAgfSxcblxuICAvKipcbiAgICogRmluZCBhIG5hdGl2ZSBET00gc2VsZWN0aW9uIHBvaW50IGZyb20gYSBTbGF0ZSBwb2ludC5cbiAgICovXG5cbiAgdG9ET01Qb2ludChlZGl0b3I6IFJlYWN0RWRpdG9yLCBwb2ludDogUG9pbnQpOiBET01Qb2ludCB7XG4gICAgY29uc3QgW25vZGVdID0gRWRpdG9yLm5vZGUoZWRpdG9yLCBwb2ludC5wYXRoKVxuICAgIGNvbnN0IGVsID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgbm9kZSlcbiAgICBsZXQgZG9tUG9pbnQ6IERPTVBvaW50IHwgdW5kZWZpbmVkXG5cbiAgICAvLyBJZiB3ZSdyZSBpbnNpZGUgYSB2b2lkIG5vZGUsIGZvcmNlIHRoZSBvZmZzZXQgdG8gMCwgb3RoZXJ3aXNlIHRoZSB6ZXJvXG4gICAgLy8gd2lkdGggc3BhY2luZyBjaGFyYWN0ZXIgd2lsbCByZXN1bHQgaW4gYW4gaW5jb3JyZWN0IG9mZnNldCBvZiAxXG4gICAgaWYgKEVkaXRvci52b2lkKGVkaXRvciwgeyBhdDogcG9pbnQgfSkpIHtcbiAgICAgIHBvaW50ID0geyBwYXRoOiBwb2ludC5wYXRoLCBvZmZzZXQ6IDAgfVxuICAgIH1cblxuICAgIC8vIEZvciBlYWNoIGxlYWYsIHdlIG5lZWQgdG8gaXNvbGF0ZSBpdHMgY29udGVudCwgd2hpY2ggbWVhbnMgZmlsdGVyaW5nXG4gICAgLy8gdG8gaXRzIGRpcmVjdCB0ZXh0IGFuZCB6ZXJvLXdpZHRoIHNwYW5zLiAoV2UgaGF2ZSB0byBmaWx0ZXIgb3V0IGFueVxuICAgIC8vIG90aGVyIHNpYmxpbmdzIHRoYXQgbWF5IGhhdmUgYmVlbiByZW5kZXJlZCBhbG9uZ3NpZGUgdGhlbS4pXG4gICAgY29uc3Qgc2VsZWN0b3IgPSBgW2RhdGEtc2xhdGUtc3RyaW5nXSwgW2RhdGEtc2xhdGUtemVyby13aWR0aF1gXG4gICAgY29uc3QgdGV4dHMgPSBBcnJheS5mcm9tKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKVxuICAgIGxldCBzdGFydCA9IDBcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHRleHQgPSB0ZXh0c1tpXVxuICAgICAgY29uc3QgZG9tTm9kZSA9IHRleHQuY2hpbGROb2Rlc1swXSBhcyBIVE1MRWxlbWVudFxuXG4gICAgICBpZiAoZG9tTm9kZSA9PSBudWxsIHx8IGRvbU5vZGUudGV4dENvbnRlbnQgPT0gbnVsbCkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGxlbmd0aCB9ID0gZG9tTm9kZS50ZXh0Q29udGVudFxuICAgICAgY29uc3QgYXR0ciA9IHRleHQuZ2V0QXR0cmlidXRlKCdkYXRhLXNsYXRlLWxlbmd0aCcpXG4gICAgICBjb25zdCB0cnVlTGVuZ3RoID0gYXR0ciA9PSBudWxsID8gbGVuZ3RoIDogcGFyc2VJbnQoYXR0ciwgMTApXG4gICAgICBjb25zdCBlbmQgPSBzdGFydCArIHRydWVMZW5ndGhcblxuICAgICAgLy8gUHJlZmVyIHB1dHRpbmcgdGhlIHNlbGVjdGlvbiBpbnNpZGUgdGhlIG1hcmsgcGxhY2Vob2xkZXIgdG8gZW5zdXJlXG4gICAgICAvLyBjb21wb3NlZCB0ZXh0IGlzIGRpc3BsYXllZCB3aXRoIHRoZSBjb3JyZWN0IG1hcmtzLlxuICAgICAgY29uc3QgbmV4dFRleHQgPSB0ZXh0c1tpICsgMV1cbiAgICAgIGlmIChcbiAgICAgICAgcG9pbnQub2Zmc2V0ID09PSBlbmQgJiZcbiAgICAgICAgbmV4dFRleHQ/Lmhhc0F0dHJpYnV0ZSgnZGF0YS1zbGF0ZS1tYXJrLXBsYWNlaG9sZGVyJylcbiAgICAgICkge1xuICAgICAgICBjb25zdCBkb21UZXh0ID0gbmV4dFRleHQuY2hpbGROb2Rlc1swXVxuXG4gICAgICAgIGRvbVBvaW50ID0gW1xuICAgICAgICAgIC8vIENPTVBBVDogSWYgd2UgZG9uJ3QgZXhwbGljaXR5IHNldCB0aGUgZG9tIHBvaW50IHRvIGJlIG9uIHRoZSBhY3R1YWxcbiAgICAgICAgICAvLyBkb20gdGV4dCBlbGVtZW50LCBjaHJvbWUgd2lsbCBwdXQgdGhlIHNlbGVjdGlvbiBiZWhpbmQgdGhlIGFjdHVhbCBkb21cbiAgICAgICAgICAvLyB0ZXh0IGVsZW1lbnQsIGNhdXNpbmcgZG9tUmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgY2FsbHMgb24gYSBjb2xsYXBzZWRcbiAgICAgICAgICAvLyBzZWxlY3Rpb24gdG8gcmV0dXJuIGluY29ycmVjdCB6ZXJvIHZhbHVlcyAoaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDM1NDM4KVxuICAgICAgICAgIC8vIHdoaWNoIHdpbGwgY2F1c2UgaXNzdWVzIHdoZW4gc2Nyb2xsaW5nIHRvIGl0LlxuICAgICAgICAgIGRvbVRleHQgaW5zdGFuY2VvZiBET01UZXh0ID8gZG9tVGV4dCA6IG5leHRUZXh0LFxuICAgICAgICAgIG5leHRUZXh0LnRleHRDb250ZW50Py5zdGFydHNXaXRoKCdcXHVGRUZGJykgPyAxIDogMCxcbiAgICAgICAgXVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBpZiAocG9pbnQub2Zmc2V0IDw9IGVuZCkge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBNYXRoLm1pbihsZW5ndGgsIE1hdGgubWF4KDAsIHBvaW50Lm9mZnNldCAtIHN0YXJ0KSlcbiAgICAgICAgZG9tUG9pbnQgPSBbZG9tTm9kZSwgb2Zmc2V0XVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBzdGFydCA9IGVuZFxuICAgIH1cblxuICAgIGlmICghZG9tUG9pbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCByZXNvbHZlIGEgRE9NIHBvaW50IGZyb20gU2xhdGUgcG9pbnQ6ICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICAgIHBvaW50XG4gICAgICAgICl9YFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBkb21Qb2ludFxuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kIGEgbmF0aXZlIERPTSByYW5nZSBmcm9tIGEgU2xhdGUgYHJhbmdlYC5cbiAgICpcbiAgICogTm90aWNlOiB0aGUgcmV0dXJuZWQgcmFuZ2Ugd2lsbCBhbHdheXMgYmUgb3JkaW5hbCByZWdhcmRsZXNzIG9mIHRoZSBkaXJlY3Rpb24gb2YgU2xhdGUgYHJhbmdlYCBkdWUgdG8gRE9NIEFQSSBsaW1pdC5cbiAgICpcbiAgICogdGhlcmUgaXMgbm8gd2F5IHRvIGNyZWF0ZSBhIHJldmVyc2UgRE9NIFJhbmdlIHVzaW5nIFJhbmdlLnNldFN0YXJ0L3NldEVuZFxuICAgKiBhY2NvcmRpbmcgdG8gaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNjb25jZXB0LXJhbmdlLWJwLXNldC5cbiAgICovXG5cbiAgdG9ET01SYW5nZShlZGl0b3I6IFJlYWN0RWRpdG9yLCByYW5nZTogUmFuZ2UpOiBET01SYW5nZSB7XG4gICAgY29uc3QgeyBhbmNob3IsIGZvY3VzIH0gPSByYW5nZVxuICAgIGNvbnN0IGlzQmFja3dhcmQgPSBSYW5nZS5pc0JhY2t3YXJkKHJhbmdlKVxuICAgIGNvbnN0IGRvbUFuY2hvciA9IFJlYWN0RWRpdG9yLnRvRE9NUG9pbnQoZWRpdG9yLCBhbmNob3IpXG4gICAgY29uc3QgZG9tRm9jdXMgPSBSYW5nZS5pc0NvbGxhcHNlZChyYW5nZSlcbiAgICAgID8gZG9tQW5jaG9yXG4gICAgICA6IFJlYWN0RWRpdG9yLnRvRE9NUG9pbnQoZWRpdG9yLCBmb2N1cylcblxuICAgIGNvbnN0IHdpbmRvdyA9IFJlYWN0RWRpdG9yLmdldFdpbmRvdyhlZGl0b3IpXG4gICAgY29uc3QgZG9tUmFuZ2UgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKVxuICAgIGNvbnN0IFtzdGFydE5vZGUsIHN0YXJ0T2Zmc2V0XSA9IGlzQmFja3dhcmQgPyBkb21Gb2N1cyA6IGRvbUFuY2hvclxuICAgIGNvbnN0IFtlbmROb2RlLCBlbmRPZmZzZXRdID0gaXNCYWNrd2FyZCA/IGRvbUFuY2hvciA6IGRvbUZvY3VzXG5cbiAgICAvLyBBIHNsYXRlIFBvaW50IGF0IHplcm8td2lkdGggTGVhZiBhbHdheXMgaGFzIGFuIG9mZnNldCBvZiAwIGJ1dCBhIG5hdGl2ZSBET00gc2VsZWN0aW9uIGF0XG4gICAgLy8gemVyby13aWR0aCBub2RlIGhhcyBhbiBvZmZzZXQgb2YgMSBzbyB3ZSBoYXZlIHRvIGNoZWNrIGlmIHdlIGFyZSBpbiBhIHplcm8td2lkdGggbm9kZSBhbmRcbiAgICAvLyBhZGp1c3QgdGhlIG9mZnNldCBhY2NvcmRpbmdseS5cbiAgICBjb25zdCBzdGFydEVsID0gKGlzRE9NRWxlbWVudChzdGFydE5vZGUpXG4gICAgICA/IHN0YXJ0Tm9kZVxuICAgICAgOiBzdGFydE5vZGUucGFyZW50RWxlbWVudCkgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBpc1N0YXJ0QXRaZXJvV2lkdGggPSAhIXN0YXJ0RWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNsYXRlLXplcm8td2lkdGgnKVxuICAgIGNvbnN0IGVuZEVsID0gKGlzRE9NRWxlbWVudChlbmROb2RlKVxuICAgICAgPyBlbmROb2RlXG4gICAgICA6IGVuZE5vZGUucGFyZW50RWxlbWVudCkgYXMgSFRNTEVsZW1lbnRcbiAgICBjb25zdCBpc0VuZEF0WmVyb1dpZHRoID0gISFlbmRFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtemVyby13aWR0aCcpXG5cbiAgICBkb21SYW5nZS5zZXRTdGFydChzdGFydE5vZGUsIGlzU3RhcnRBdFplcm9XaWR0aCA/IDEgOiBzdGFydE9mZnNldClcbiAgICBkb21SYW5nZS5zZXRFbmQoZW5kTm9kZSwgaXNFbmRBdFplcm9XaWR0aCA/IDEgOiBlbmRPZmZzZXQpXG4gICAgcmV0dXJuIGRvbVJhbmdlXG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmQgYSBTbGF0ZSBub2RlIGZyb20gYSBuYXRpdmUgRE9NIGBlbGVtZW50YC5cbiAgICovXG5cbiAgdG9TbGF0ZU5vZGUoZWRpdG9yOiBSZWFjdEVkaXRvciwgZG9tTm9kZTogRE9NTm9kZSk6IE5vZGUge1xuICAgIGxldCBkb21FbCA9IGlzRE9NRWxlbWVudChkb21Ob2RlKSA/IGRvbU5vZGUgOiBkb21Ob2RlLnBhcmVudEVsZW1lbnRcblxuICAgIGlmIChkb21FbCAmJiAhZG9tRWwuaGFzQXR0cmlidXRlKCdkYXRhLXNsYXRlLW5vZGUnKSkge1xuICAgICAgZG9tRWwgPSBkb21FbC5jbG9zZXN0KGBbZGF0YS1zbGF0ZS1ub2RlXWApXG4gICAgfVxuXG4gICAgY29uc3Qgbm9kZSA9IGRvbUVsID8gRUxFTUVOVF9UT19OT0RFLmdldChkb21FbCBhcyBIVE1MRWxlbWVudCkgOiBudWxsXG5cbiAgICBpZiAoIW5vZGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJlc29sdmUgYSBTbGF0ZSBub2RlIGZyb20gRE9NIG5vZGU6ICR7ZG9tRWx9YClcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRhcmdldCByYW5nZSBmcm9tIGEgRE9NIGBldmVudGAuXG4gICAqL1xuXG4gIGZpbmRFdmVudFJhbmdlKGVkaXRvcjogUmVhY3RFZGl0b3IsIGV2ZW50OiBhbnkpOiBSYW5nZSB7XG4gICAgaWYgKCduYXRpdmVFdmVudCcgaW4gZXZlbnQpIHtcbiAgICAgIGV2ZW50ID0gZXZlbnQubmF0aXZlRXZlbnRcbiAgICB9XG5cbiAgICBjb25zdCB7IGNsaWVudFg6IHgsIGNsaWVudFk6IHksIHRhcmdldCB9ID0gZXZlbnRcblxuICAgIGlmICh4ID09IG51bGwgfHwgeSA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCByZXNvbHZlIGEgU2xhdGUgcmFuZ2UgZnJvbSBhIERPTSBldmVudDogJHtldmVudH1gKVxuICAgIH1cblxuICAgIGNvbnN0IG5vZGUgPSBSZWFjdEVkaXRvci50b1NsYXRlTm9kZShlZGl0b3IsIGV2ZW50LnRhcmdldClcbiAgICBjb25zdCBwYXRoID0gUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBub2RlKVxuXG4gICAgLy8gSWYgdGhlIGRyb3AgdGFyZ2V0IGlzIGluc2lkZSBhIHZvaWQgbm9kZSwgbW92ZSBpdCBpbnRvIGVpdGhlciB0aGVcbiAgICAvLyBuZXh0IG9yIHByZXZpb3VzIG5vZGUsIGRlcGVuZGluZyBvbiB3aGljaCBzaWRlIHRoZSBgeGAgYW5kIGB5YFxuICAgIC8vIGNvb3JkaW5hdGVzIGFyZSBjbG9zZXN0IHRvLlxuICAgIGlmIChFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJiBFZGl0b3IuaXNWb2lkKGVkaXRvciwgbm9kZSkpIHtcbiAgICAgIGNvbnN0IHJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIGNvbnN0IGlzUHJldiA9IGVkaXRvci5pc0lubGluZShub2RlKVxuICAgICAgICA/IHggLSByZWN0LmxlZnQgPCByZWN0LmxlZnQgKyByZWN0LndpZHRoIC0geFxuICAgICAgICA6IHkgLSByZWN0LnRvcCA8IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLSB5XG5cbiAgICAgIGNvbnN0IGVkZ2UgPSBFZGl0b3IucG9pbnQoZWRpdG9yLCBwYXRoLCB7XG4gICAgICAgIGVkZ2U6IGlzUHJldiA/ICdzdGFydCcgOiAnZW5kJyxcbiAgICAgIH0pXG4gICAgICBjb25zdCBwb2ludCA9IGlzUHJldlxuICAgICAgICA/IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBlZGdlKVxuICAgICAgICA6IEVkaXRvci5hZnRlcihlZGl0b3IsIGVkZ2UpXG5cbiAgICAgIGlmIChwb2ludCkge1xuICAgICAgICBjb25zdCByYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIHBvaW50KVxuICAgICAgICByZXR1cm4gcmFuZ2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFbHNlIHJlc29sdmUgYSByYW5nZSBmcm9tIHRoZSBjYXJldCBwb3NpdGlvbiB3aGVyZSB0aGUgZHJvcCBvY2N1cmVkLlxuICAgIGxldCBkb21SYW5nZVxuICAgIGNvbnN0IHsgZG9jdW1lbnQgfSA9IFJlYWN0RWRpdG9yLmdldFdpbmRvdyhlZGl0b3IpXG5cbiAgICAvLyBDT01QQVQ6IEluIEZpcmVmb3gsIGBjYXJldFJhbmdlRnJvbVBvaW50YCBkb2Vzbid0IGV4aXN0LiAoMjAxNi8wNy8yNSlcbiAgICBpZiAoZG9jdW1lbnQuY2FyZXRSYW5nZUZyb21Qb2ludCkge1xuICAgICAgZG9tUmFuZ2UgPSBkb2N1bWVudC5jYXJldFJhbmdlRnJvbVBvaW50KHgsIHkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gZG9jdW1lbnQuY2FyZXRQb3NpdGlvbkZyb21Qb2ludCh4LCB5KVxuXG4gICAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgICAgZG9tUmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpXG4gICAgICAgIGRvbVJhbmdlLnNldFN0YXJ0KHBvc2l0aW9uLm9mZnNldE5vZGUsIHBvc2l0aW9uLm9mZnNldClcbiAgICAgICAgZG9tUmFuZ2Uuc2V0RW5kKHBvc2l0aW9uLm9mZnNldE5vZGUsIHBvc2l0aW9uLm9mZnNldClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWRvbVJhbmdlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCByZXNvbHZlIGEgU2xhdGUgcmFuZ2UgZnJvbSBhIERPTSBldmVudDogJHtldmVudH1gKVxuICAgIH1cblxuICAgIC8vIFJlc29sdmUgYSBTbGF0ZSByYW5nZSBmcm9tIHRoZSBET00gcmFuZ2UuXG4gICAgY29uc3QgcmFuZ2UgPSBSZWFjdEVkaXRvci50b1NsYXRlUmFuZ2UoZWRpdG9yLCBkb21SYW5nZSwge1xuICAgICAgZXhhY3RNYXRjaDogZmFsc2UsXG4gICAgICBzdXBwcmVzc1Rocm93OiBmYWxzZSxcbiAgICB9KVxuICAgIHJldHVybiByYW5nZVxuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kIGEgU2xhdGUgcG9pbnQgZnJvbSBhIERPTSBzZWxlY3Rpb24ncyBgZG9tTm9kZWAgYW5kIGBkb21PZmZzZXRgLlxuICAgKi9cblxuICB0b1NsYXRlUG9pbnQ8VCBleHRlbmRzIGJvb2xlYW4+KFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgZG9tUG9pbnQ6IERPTVBvaW50LFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGV4YWN0TWF0Y2g6IGJvb2xlYW5cbiAgICAgIHN1cHByZXNzVGhyb3c6IFRcbiAgICB9XG4gICk6IFQgZXh0ZW5kcyB0cnVlID8gUG9pbnQgfCBudWxsIDogUG9pbnQge1xuICAgIGNvbnN0IHsgZXhhY3RNYXRjaCwgc3VwcHJlc3NUaHJvdyB9ID0gb3B0aW9uc1xuICAgIGNvbnN0IFtuZWFyZXN0Tm9kZSwgbmVhcmVzdE9mZnNldF0gPSBleGFjdE1hdGNoXG4gICAgICA/IGRvbVBvaW50XG4gICAgICA6IG5vcm1hbGl6ZURPTVBvaW50KGRvbVBvaW50KVxuICAgIGNvbnN0IHBhcmVudE5vZGUgPSBuZWFyZXN0Tm9kZS5wYXJlbnROb2RlIGFzIERPTUVsZW1lbnRcbiAgICBsZXQgdGV4dE5vZGU6IERPTUVsZW1lbnQgfCBudWxsID0gbnVsbFxuICAgIGxldCBvZmZzZXQgPSAwXG5cbiAgICBpZiAocGFyZW50Tm9kZSkge1xuICAgICAgY29uc3QgZWRpdG9yRWwgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBlZGl0b3IpXG4gICAgICBjb25zdCBwb3RlbnRpYWxWb2lkTm9kZSA9IHBhcmVudE5vZGUuY2xvc2VzdCgnW2RhdGEtc2xhdGUtdm9pZD1cInRydWVcIl0nKVxuICAgICAgLy8gTmVlZCB0byBlbnN1cmUgdGhhdCB0aGUgY2xvc2VzdCB2b2lkIG5vZGUgaXMgYWN0dWFsbHkgYSB2b2lkIG5vZGVcbiAgICAgIC8vIHdpdGhpbiB0aGlzIGVkaXRvciwgYW5kIG5vdCBhIHZvaWQgbm9kZSB3aXRoaW4gc29tZSBwYXJlbnQgZWRpdG9yLiBUaGlzIGNhbiBoYXBwZW5cbiAgICAgIC8vIGlmIHRoaXMgZWRpdG9yIGlzIHdpdGhpbiBhIHZvaWQgbm9kZSBvZiBhbm90aGVyIGVkaXRvciAoXCJuZXN0ZWQgZWRpdG9yc1wiLCBsaWtlIGluXG4gICAgICAvLyB0aGUgXCJFZGl0YWJsZSBWb2lkc1wiIGV4YW1wbGUgb24gdGhlIGRvY3Mgc2l0ZSkuXG4gICAgICBjb25zdCB2b2lkTm9kZSA9XG4gICAgICAgIHBvdGVudGlhbFZvaWROb2RlICYmIGVkaXRvckVsLmNvbnRhaW5zKHBvdGVudGlhbFZvaWROb2RlKVxuICAgICAgICAgID8gcG90ZW50aWFsVm9pZE5vZGVcbiAgICAgICAgICA6IG51bGxcbiAgICAgIGxldCBsZWFmTm9kZSA9IHBhcmVudE5vZGUuY2xvc2VzdCgnW2RhdGEtc2xhdGUtbGVhZl0nKVxuICAgICAgbGV0IGRvbU5vZGU6IERPTUVsZW1lbnQgfCBudWxsID0gbnVsbFxuXG4gICAgICAvLyBDYWxjdWxhdGUgaG93IGZhciBpbnRvIHRoZSB0ZXh0IG5vZGUgdGhlIGBuZWFyZXN0Tm9kZWAgaXMsIHNvIHRoYXQgd2VcbiAgICAgIC8vIGNhbiBkZXRlcm1pbmUgd2hhdCB0aGUgb2Zmc2V0IHJlbGF0aXZlIHRvIHRoZSB0ZXh0IG5vZGUgaXMuXG4gICAgICBpZiAobGVhZk5vZGUpIHtcbiAgICAgICAgdGV4dE5vZGUgPSBsZWFmTm9kZS5jbG9zZXN0KCdbZGF0YS1zbGF0ZS1ub2RlPVwidGV4dFwiXScpXG5cbiAgICAgICAgaWYgKHRleHROb2RlKSB7XG4gICAgICAgICAgY29uc3Qgd2luZG93ID0gUmVhY3RFZGl0b3IuZ2V0V2luZG93KGVkaXRvcilcbiAgICAgICAgICBjb25zdCByYW5nZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVSYW5nZSgpXG4gICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQodGV4dE5vZGUsIDApXG4gICAgICAgICAgcmFuZ2Uuc2V0RW5kKG5lYXJlc3ROb2RlLCBuZWFyZXN0T2Zmc2V0KVxuXG4gICAgICAgICAgY29uc3QgY29udGVudHMgPSByYW5nZS5jbG9uZUNvbnRlbnRzKClcbiAgICAgICAgICBjb25zdCByZW1vdmFscyA9IFtcbiAgICAgICAgICAgIC4uLkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKFxuICAgICAgICAgICAgICBjb250ZW50cy5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zbGF0ZS16ZXJvLXdpZHRoXScpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgLi4uQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoXG4gICAgICAgICAgICAgIGNvbnRlbnRzLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjb250ZW50ZWRpdGFibGU9ZmFsc2VdJylcbiAgICAgICAgICAgICksXG4gICAgICAgICAgXVxuXG4gICAgICAgICAgcmVtb3ZhbHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAvLyBDT01QQVQ6IFdoaWxlIGNvbXBvc2luZyBhdCB0aGUgc3RhcnQgb2YgYSB0ZXh0IG5vZGUsIHNvbWUga2V5Ym9hcmRzIHB1dFxuICAgICAgICAgICAgLy8gdGhlIHRleHQgY29udGVudCBpbnNpZGUgdGhlIHplcm8gd2lkdGggc3BhY2UuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIElTX0FORFJPSUQgJiZcbiAgICAgICAgICAgICAgIWV4YWN0TWF0Y2ggJiZcbiAgICAgICAgICAgICAgZWwuaGFzQXR0cmlidXRlKCdkYXRhLXNsYXRlLXplcm8td2lkdGgnKSAmJlxuICAgICAgICAgICAgICBlbC50ZXh0Q29udGVudC5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgIGVsLnRleHRDb250ZXh0ICE9PSAnXFx1RkVGRidcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpZiAoZWwudGV4dENvbnRlbnQuc3RhcnRzV2l0aCgnXFx1RkVGRicpKSB7XG4gICAgICAgICAgICAgICAgZWwudGV4dENvbnRlbnQgPSBlbC50ZXh0Q29udGVudC5zbGljZSgxKVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsIS5wYXJlbnROb2RlIS5yZW1vdmVDaGlsZChlbClcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgLy8gQ09NUEFUOiBFZGdlIGhhcyBhIGJ1ZyB3aGVyZSBSYW5nZS5wcm90b3R5cGUudG9TdHJpbmcoKSB3aWxsXG4gICAgICAgICAgLy8gY29udmVydCBcXG4gaW50byBcXHJcXG4uIFRoZSBidWcgY2F1c2VzIGEgbG9vcCB3aGVuIHNsYXRlLXJlYWN0XG4gICAgICAgICAgLy8gYXR0ZW1wdHMgdG8gcmVwb3NpdGlvbiBpdHMgY3Vyc29yIHRvIG1hdGNoIHRoZSBuYXRpdmUgcG9zaXRpb24uIFVzZVxuICAgICAgICAgIC8vIHRleHRDb250ZW50Lmxlbmd0aCBpbnN0ZWFkLlxuICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vaXNzdWVzLzEwMjkxMTE2L1xuICAgICAgICAgIG9mZnNldCA9IGNvbnRlbnRzLnRleHRDb250ZW50IS5sZW5ndGhcbiAgICAgICAgICBkb21Ob2RlID0gdGV4dE5vZGVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh2b2lkTm9kZSkge1xuICAgICAgICAvLyBGb3Igdm9pZCBub2RlcywgdGhlIGVsZW1lbnQgd2l0aCB0aGUgb2Zmc2V0IGtleSB3aWxsIGJlIGEgY291c2luLCBub3QgYW5cbiAgICAgICAgLy8gYW5jZXN0b3IsIHNvIGZpbmQgaXQgYnkgZ29pbmcgZG93biBmcm9tIHRoZSBuZWFyZXN0IHZvaWQgcGFyZW50IGFuZCB0YWtpbmcgdGhlXG4gICAgICAgIC8vIGZpcnN0IG9uZSB0aGF0IGlzbid0IGluc2lkZSBhIG5lc3RlZCBlZGl0b3IuXG4gICAgICAgIGNvbnN0IGxlYWZOb2RlcyA9IHZvaWROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNsYXRlLWxlYWZdJylcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxlYWZOb2Rlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50ID0gbGVhZk5vZGVzW2luZGV4XVxuICAgICAgICAgIGlmIChSZWFjdEVkaXRvci5oYXNET01Ob2RlKGVkaXRvciwgY3VycmVudCkpIHtcbiAgICAgICAgICAgIGxlYWZOb2RlID0gY3VycmVudFxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDT01QQVQ6IEluIHJlYWQtb25seSBlZGl0b3JzIHRoZSBsZWFmIGlzIG5vdCByZW5kZXJlZC5cbiAgICAgICAgaWYgKCFsZWFmTm9kZSkge1xuICAgICAgICAgIG9mZnNldCA9IDFcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0ZXh0Tm9kZSA9IGxlYWZOb2RlLmNsb3Nlc3QoJ1tkYXRhLXNsYXRlLW5vZGU9XCJ0ZXh0XCJdJykhXG4gICAgICAgICAgZG9tTm9kZSA9IGxlYWZOb2RlXG4gICAgICAgICAgb2Zmc2V0ID0gZG9tTm9kZS50ZXh0Q29udGVudCEubGVuZ3RoXG4gICAgICAgICAgZG9tTm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zbGF0ZS16ZXJvLXdpZHRoXScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgb2Zmc2V0IC09IGVsLnRleHRDb250ZW50IS5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgZG9tTm9kZSAmJlxuICAgICAgICBvZmZzZXQgPT09IGRvbU5vZGUudGV4dENvbnRlbnQhLmxlbmd0aCAmJlxuICAgICAgICAvLyBDT01QQVQ6IEFuZHJvaWQgSU1FcyBtaWdodCByZW1vdmUgdGhlIHplcm8gd2lkdGggc3BhY2Ugd2hpbGUgY29tcG9zaW5nLFxuICAgICAgICAvLyBhbmQgd2UgZG9uJ3QgYWRkIGl0IGZvciBsaW5lLWJyZWFrcy5cbiAgICAgICAgSVNfQU5EUk9JRCAmJlxuICAgICAgICBkb21Ob2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1zbGF0ZS16ZXJvLXdpZHRoJykgPT09ICd6JyAmJlxuICAgICAgICBkb21Ob2RlLnRleHRDb250ZW50Py5zdGFydHNXaXRoKCdcXHVGRUZGJykgJiZcbiAgICAgICAgLy8gQ09NUEFUOiBJZiB0aGUgcGFyZW50IG5vZGUgaXMgYSBTbGF0ZSB6ZXJvLXdpZHRoIHNwYWNlLCBlZGl0b3IgaXNcbiAgICAgICAgLy8gYmVjYXVzZSB0aGUgdGV4dCBub2RlIHNob3VsZCBoYXZlIG5vIGNoYXJhY3RlcnMuIEhvd2V2ZXIsIGR1cmluZyBJTUVcbiAgICAgICAgLy8gY29tcG9zaXRpb24gdGhlIEFTQ0lJIGNoYXJhY3RlcnMgd2lsbCBiZSBwcmVwZW5kZWQgdG8gdGhlIHplcm8td2lkdGhcbiAgICAgICAgLy8gc3BhY2UsIHNvIHN1YnRyYWN0IDEgZnJvbSB0aGUgb2Zmc2V0IHRvIGFjY291bnQgZm9yIHRoZSB6ZXJvLXdpZHRoXG4gICAgICAgIC8vIHNwYWNlIGNoYXJhY3Rlci5cbiAgICAgICAgKHBhcmVudE5vZGUuaGFzQXR0cmlidXRlKCdkYXRhLXNsYXRlLXplcm8td2lkdGgnKSB8fFxuICAgICAgICAgIC8vIENPTVBBVDogSW4gRmlyZWZveCwgYHJhbmdlLmNsb25lQ29udGVudHMoKWAgcmV0dXJucyBhbiBleHRyYSB0cmFpbGluZyAnXFxuJ1xuICAgICAgICAgIC8vIHdoZW4gdGhlIGRvY3VtZW50IGVuZHMgd2l0aCBhIG5ldy1saW5lIGNoYXJhY3Rlci4gVGhpcyByZXN1bHRzIGluIHRoZSBvZmZzZXRcbiAgICAgICAgICAvLyBsZW5ndGggYmVpbmcgb2ZmIGJ5IG9uZSwgc28gd2UgbmVlZCB0byBzdWJ0cmFjdCBvbmUgdG8gYWNjb3VudCBmb3IgdGhpcy5cbiAgICAgICAgICAoSVNfRklSRUZPWCAmJiBkb21Ob2RlLnRleHRDb250ZW50Py5lbmRzV2l0aCgnXFxuXFxuJykpKVxuICAgICAgKSB7XG4gICAgICAgIG9mZnNldC0tXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKElTX0FORFJPSUQgJiYgIXRleHROb2RlICYmICFleGFjdE1hdGNoKSB7XG4gICAgICBjb25zdCBub2RlID0gcGFyZW50Tm9kZS5oYXNBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtbm9kZScpXG4gICAgICAgID8gcGFyZW50Tm9kZVxuICAgICAgICA6IHBhcmVudE5vZGUuY2xvc2VzdCgnW2RhdGEtc2xhdGUtbm9kZV0nKVxuXG4gICAgICBpZiAobm9kZSAmJiBSZWFjdEVkaXRvci5oYXNET01Ob2RlKGVkaXRvciwgbm9kZSwgeyBlZGl0YWJsZTogdHJ1ZSB9KSkge1xuICAgICAgICBjb25zdCBzbGF0ZU5vZGUgPSBSZWFjdEVkaXRvci50b1NsYXRlTm9kZShlZGl0b3IsIG5vZGUpXG4gICAgICAgIGxldCB7IHBhdGgsIG9mZnNldCB9ID0gRWRpdG9yLnN0YXJ0KFxuICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIHNsYXRlTm9kZSlcbiAgICAgICAgKVxuXG4gICAgICAgIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zbGF0ZS1sZWFmXScpKSB7XG4gICAgICAgICAgb2Zmc2V0ID0gbmVhcmVzdE9mZnNldFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgcGF0aCwgb2Zmc2V0IH0gYXMgVCBleHRlbmRzIHRydWUgPyBQb2ludCB8IG51bGwgOiBQb2ludFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGV4dE5vZGUpIHtcbiAgICAgIGlmIChzdXBwcmVzc1Rocm93KSB7XG4gICAgICAgIHJldHVybiBudWxsIGFzIFQgZXh0ZW5kcyB0cnVlID8gUG9pbnQgfCBudWxsIDogUG9pbnRcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCByZXNvbHZlIGEgU2xhdGUgcG9pbnQgZnJvbSBET00gcG9pbnQ6ICR7ZG9tUG9pbnR9YFxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIENPTVBBVDogSWYgc29tZW9uZSBpcyBjbGlja2luZyBmcm9tIG9uZSBTbGF0ZSBlZGl0b3IgaW50byBhbm90aGVyLFxuICAgIC8vIHRoZSBzZWxlY3QgZXZlbnQgZmlyZXMgdHdpY2UsIG9uY2UgZm9yIHRoZSBvbGQgZWRpdG9yJ3MgYGVsZW1lbnRgXG4gICAgLy8gZmlyc3QsIGFuZCB0aGVuIGFmdGVyd2FyZHMgZm9yIHRoZSBjb3JyZWN0IGBlbGVtZW50YC4gKDIwMTcvMDMvMDMpXG4gICAgY29uc3Qgc2xhdGVOb2RlID0gUmVhY3RFZGl0b3IudG9TbGF0ZU5vZGUoZWRpdG9yLCB0ZXh0Tm9kZSEpXG4gICAgY29uc3QgcGF0aCA9IFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgc2xhdGVOb2RlKVxuICAgIHJldHVybiB7IHBhdGgsIG9mZnNldCB9IGFzIFQgZXh0ZW5kcyB0cnVlID8gUG9pbnQgfCBudWxsIDogUG9pbnRcbiAgfSxcblxuICAvKipcbiAgICogRmluZCBhIFNsYXRlIHJhbmdlIGZyb20gYSBET00gcmFuZ2Ugb3Igc2VsZWN0aW9uLlxuICAgKi9cblxuICB0b1NsYXRlUmFuZ2U8VCBleHRlbmRzIGJvb2xlYW4+KFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgZG9tUmFuZ2U6IERPTVJhbmdlIHwgRE9NU3RhdGljUmFuZ2UgfCBET01TZWxlY3Rpb24sXG4gICAgb3B0aW9uczoge1xuICAgICAgZXhhY3RNYXRjaDogYm9vbGVhblxuICAgICAgc3VwcHJlc3NUaHJvdzogVFxuICAgIH1cbiAgKTogVCBleHRlbmRzIHRydWUgPyBSYW5nZSB8IG51bGwgOiBSYW5nZSB7XG4gICAgY29uc3QgeyBleGFjdE1hdGNoLCBzdXBwcmVzc1Rocm93IH0gPSBvcHRpb25zXG4gICAgY29uc3QgZWwgPSBpc0RPTVNlbGVjdGlvbihkb21SYW5nZSlcbiAgICAgID8gZG9tUmFuZ2UuYW5jaG9yTm9kZVxuICAgICAgOiBkb21SYW5nZS5zdGFydENvbnRhaW5lclxuICAgIGxldCBhbmNob3JOb2RlXG4gICAgbGV0IGFuY2hvck9mZnNldFxuICAgIGxldCBmb2N1c05vZGVcbiAgICBsZXQgZm9jdXNPZmZzZXRcbiAgICBsZXQgaXNDb2xsYXBzZWRcblxuICAgIGlmIChlbCkge1xuICAgICAgaWYgKGlzRE9NU2VsZWN0aW9uKGRvbVJhbmdlKSkge1xuICAgICAgICBhbmNob3JOb2RlID0gZG9tUmFuZ2UuYW5jaG9yTm9kZVxuICAgICAgICBhbmNob3JPZmZzZXQgPSBkb21SYW5nZS5hbmNob3JPZmZzZXRcbiAgICAgICAgZm9jdXNOb2RlID0gZG9tUmFuZ2UuZm9jdXNOb2RlXG4gICAgICAgIGZvY3VzT2Zmc2V0ID0gZG9tUmFuZ2UuZm9jdXNPZmZzZXRcbiAgICAgICAgLy8gQ09NUEFUOiBUaGVyZSdzIGEgYnVnIGluIGNocm9tZSB0aGF0IGFsd2F5cyByZXR1cm5zIGB0cnVlYCBmb3JcbiAgICAgICAgLy8gYGlzQ29sbGFwc2VkYCBmb3IgYSBTZWxlY3Rpb24gdGhhdCBjb21lcyBmcm9tIGEgU2hhZG93Um9vdC5cbiAgICAgICAgLy8gKDIwMjAvMDgvMDgpXG4gICAgICAgIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ0NzUyM1xuICAgICAgICBpZiAoSVNfQ0hST01FICYmIGhhc1NoYWRvd1Jvb3QoYW5jaG9yTm9kZSkpIHtcbiAgICAgICAgICBpc0NvbGxhcHNlZCA9XG4gICAgICAgICAgICBkb21SYW5nZS5hbmNob3JOb2RlID09PSBkb21SYW5nZS5mb2N1c05vZGUgJiZcbiAgICAgICAgICAgIGRvbVJhbmdlLmFuY2hvck9mZnNldCA9PT0gZG9tUmFuZ2UuZm9jdXNPZmZzZXRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpc0NvbGxhcHNlZCA9IGRvbVJhbmdlLmlzQ29sbGFwc2VkXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFuY2hvck5vZGUgPSBkb21SYW5nZS5zdGFydENvbnRhaW5lclxuICAgICAgICBhbmNob3JPZmZzZXQgPSBkb21SYW5nZS5zdGFydE9mZnNldFxuICAgICAgICBmb2N1c05vZGUgPSBkb21SYW5nZS5lbmRDb250YWluZXJcbiAgICAgICAgZm9jdXNPZmZzZXQgPSBkb21SYW5nZS5lbmRPZmZzZXRcbiAgICAgICAgaXNDb2xsYXBzZWQgPSBkb21SYW5nZS5jb2xsYXBzZWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBhbmNob3JOb2RlID09IG51bGwgfHxcbiAgICAgIGZvY3VzTm9kZSA9PSBudWxsIHx8XG4gICAgICBhbmNob3JPZmZzZXQgPT0gbnVsbCB8fFxuICAgICAgZm9jdXNPZmZzZXQgPT0gbnVsbFxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IHJlc29sdmUgYSBTbGF0ZSByYW5nZSBmcm9tIERPTSByYW5nZTogJHtkb21SYW5nZX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgbGV0IGFuY2hvciA9IFJlYWN0RWRpdG9yLnRvU2xhdGVQb2ludChlZGl0b3IsIFthbmNob3JOb2RlLCBhbmNob3JPZmZzZXRdLCB7XG4gICAgICBleGFjdE1hdGNoLFxuICAgICAgc3VwcHJlc3NUaHJvdyxcbiAgICB9KVxuICAgIGlmICghYW5jaG9yKSB7XG4gICAgICByZXR1cm4gbnVsbCBhcyBUIGV4dGVuZHMgdHJ1ZSA/IFJhbmdlIHwgbnVsbCA6IFJhbmdlXG4gICAgfVxuXG4gICAgbGV0IGZvY3VzID0gaXNDb2xsYXBzZWRcbiAgICAgID8gYW5jaG9yXG4gICAgICA6IFJlYWN0RWRpdG9yLnRvU2xhdGVQb2ludChlZGl0b3IsIFtmb2N1c05vZGUsIGZvY3VzT2Zmc2V0XSwge1xuICAgICAgICAgIGV4YWN0TWF0Y2gsXG4gICAgICAgICAgc3VwcHJlc3NUaHJvdyxcbiAgICAgICAgfSlcbiAgICBpZiAoIWZvY3VzKSB7XG4gICAgICByZXR1cm4gbnVsbCBhcyBUIGV4dGVuZHMgdHJ1ZSA/IFJhbmdlIHwgbnVsbCA6IFJhbmdlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc3VwcG9zZSB3ZSBoYXZlIHRoaXMgZG9jdW1lbnQ6XG4gICAgICpcbiAgICAgKiB7IHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAqICAgY2hpbGRyZW46IFtcbiAgICAgKiAgICAgeyB0ZXh0OiAnZm9vICcgfSxcbiAgICAgKiAgICAgeyB0ZXh0OiAnYmFyJyB9LFxuICAgICAqICAgICB7IHRleHQ6ICcgYmF6JyB9XG4gICAgICogICBdXG4gICAgICogfVxuICAgICAqXG4gICAgICogYSBkb3VibGUgY2xpY2sgb24gXCJiYXJcIiBvbiBjaHJvbWUgd2lsbCBjcmVhdGUgdGhpcyByYW5nZTpcbiAgICAgKlxuICAgICAqIGFuY2hvciAtPiBbMCwxXSBvZmZzZXQgMFxuICAgICAqIGZvY3VzICAtPiBbMCwxXSBvZmZzZXQgM1xuICAgICAqXG4gICAgICogd2hpbGUgb24gZmlyZWZveCB3aWxsIGNyZWF0ZSB0aGlzIHJhbmdlOlxuICAgICAqXG4gICAgICogYW5jaG9yIC0+IFswLDBdIG9mZnNldCA0XG4gICAgICogZm9jdXMgIC0+IFswLDJdIG9mZnNldCAwXG4gICAgICpcbiAgICAgKiBsZXQncyB0cnkgdG8gZml4IGl0Li4uXG4gICAgICovXG5cbiAgICBpZiAoSVNfRklSRUZPWCAmJiAhaXNDb2xsYXBzZWQgJiYgYW5jaG9yTm9kZSAhPT0gZm9jdXNOb2RlKSB7XG4gICAgICBjb25zdCBpc0VuZCA9IEVkaXRvci5pc0VuZChlZGl0b3IsIGFuY2hvciEsIGFuY2hvci5wYXRoKVxuICAgICAgY29uc3QgaXNTdGFydCA9IEVkaXRvci5pc1N0YXJ0KGVkaXRvciwgZm9jdXMhLCBmb2N1cy5wYXRoKVxuXG4gICAgICBpZiAoaXNFbmQpIHtcbiAgICAgICAgY29uc3QgYWZ0ZXIgPSBFZGl0b3IuYWZ0ZXIoZWRpdG9yLCBhbmNob3IgYXMgUG9pbnQpXG4gICAgICAgIC8vIEVkaXRvci5hZnRlcigpIG1pZ2h0IHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgYW5jaG9yID0gKGFmdGVyIHx8IGFuY2hvciEpIGFzIFQgZXh0ZW5kcyB0cnVlID8gUG9pbnQgfCBudWxsIDogUG9pbnRcbiAgICAgIH1cblxuICAgICAgaWYgKGlzU3RhcnQpIHtcbiAgICAgICAgY29uc3QgYmVmb3JlID0gRWRpdG9yLmJlZm9yZShlZGl0b3IsIGZvY3VzIGFzIFBvaW50KVxuICAgICAgICBmb2N1cyA9IChiZWZvcmUgfHwgZm9jdXMhKSBhcyBUIGV4dGVuZHMgdHJ1ZSA/IFBvaW50IHwgbnVsbCA6IFBvaW50XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHJhbmdlOiBSYW5nZSA9IHsgYW5jaG9yOiBhbmNob3IgYXMgUG9pbnQsIGZvY3VzOiBmb2N1cyBhcyBQb2ludCB9XG4gICAgLy8gaWYgdGhlIHNlbGVjdGlvbiBpcyBhIGhhbmdpbmcgcmFuZ2UgdGhhdCBlbmRzIGluIGEgdm9pZFxuICAgIC8vIGFuZCB0aGUgRE9NIGZvY3VzIGlzIGFuIEVsZW1lbnRcbiAgICAvLyAobWVhbmluZyB0aGF0IHRoZSBzZWxlY3Rpb24gZW5kcyBiZWZvcmUgdGhlIGVsZW1lbnQpXG4gICAgLy8gdW5oYW5nIHRoZSByYW5nZSB0byBhdm9pZCBtaXN0YWtlbmx5IGluY2x1ZGluZyB0aGUgdm9pZFxuICAgIGlmIChcbiAgICAgIFJhbmdlLmlzRXhwYW5kZWQocmFuZ2UpICYmXG4gICAgICBSYW5nZS5pc0ZvcndhcmQocmFuZ2UpICYmXG4gICAgICBpc0RPTUVsZW1lbnQoZm9jdXNOb2RlKSAmJlxuICAgICAgRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0OiByYW5nZS5mb2N1cywgbW9kZTogJ2hpZ2hlc3QnIH0pXG4gICAgKSB7XG4gICAgICByYW5nZSA9IEVkaXRvci51bmhhbmdSYW5nZShlZGl0b3IsIHJhbmdlLCB7IHZvaWRzOiB0cnVlIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIChyYW5nZSBhcyB1bmtub3duKSBhcyBUIGV4dGVuZHMgdHJ1ZSA/IFJhbmdlIHwgbnVsbCA6IFJhbmdlXG4gIH0sXG5cbiAgaGFzUmFuZ2UoZWRpdG9yOiBSZWFjdEVkaXRvciwgcmFuZ2U6IFJhbmdlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgeyBhbmNob3IsIGZvY3VzIH0gPSByYW5nZVxuICAgIHJldHVybiAoXG4gICAgICBFZGl0b3IuaGFzUGF0aChlZGl0b3IsIGFuY2hvci5wYXRoKSAmJiBFZGl0b3IuaGFzUGF0aChlZGl0b3IsIGZvY3VzLnBhdGgpXG4gICAgKVxuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdGFyZ2V0IGlzIGluIHRoZSBlZGl0b3IuXG4gICAqL1xuICBoYXNUYXJnZXQoXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICB0YXJnZXQ6IEV2ZW50VGFyZ2V0IHwgbnVsbFxuICApOiB0YXJnZXQgaXMgRE9NTm9kZSB7XG4gICAgcmV0dXJuIGlzRE9NTm9kZSh0YXJnZXQpICYmIFJlYWN0RWRpdG9yLmhhc0RPTU5vZGUoZWRpdG9yLCB0YXJnZXQpXG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSB0YXJnZXQgaXMgZWRpdGFibGUgYW5kIGluIHRoZSBlZGl0b3IuXG4gICAqL1xuICBoYXNFZGl0YWJsZVRhcmdldChcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIHRhcmdldDogRXZlbnRUYXJnZXQgfCBudWxsXG4gICk6IHRhcmdldCBpcyBET01Ob2RlIHtcbiAgICByZXR1cm4gKFxuICAgICAgaXNET01Ob2RlKHRhcmdldCkgJiZcbiAgICAgIFJlYWN0RWRpdG9yLmhhc0RPTU5vZGUoZWRpdG9yLCB0YXJnZXQsIHsgZWRpdGFibGU6IHRydWUgfSlcbiAgICApXG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSB0YXJnZXQgY2FuIGJlIHNlbGVjdGFibGVcbiAgICovXG4gIGhhc1NlbGVjdGFibGVUYXJnZXQoXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICB0YXJnZXQ6IEV2ZW50VGFyZ2V0IHwgbnVsbFxuICApOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3RFZGl0b3IuaGFzRWRpdGFibGVUYXJnZXQoZWRpdG9yLCB0YXJnZXQpIHx8XG4gICAgICBSZWFjdEVkaXRvci5pc1RhcmdldEluc2lkZU5vblJlYWRvbmx5Vm9pZChlZGl0b3IsIHRhcmdldClcbiAgICApXG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSB0YXJnZXQgaXMgaW5zaWRlIHZvaWQgYW5kIGluIGFuIG5vbi1yZWFkb25seSBlZGl0b3IuXG4gICAqL1xuICBpc1RhcmdldEluc2lkZU5vblJlYWRvbmx5Vm9pZChcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIHRhcmdldDogRXZlbnRUYXJnZXQgfCBudWxsXG4gICk6IGJvb2xlYW4ge1xuICAgIGlmIChJU19SRUFEX09OTFkuZ2V0KGVkaXRvcikpIHJldHVybiBmYWxzZVxuXG4gICAgY29uc3Qgc2xhdGVOb2RlID1cbiAgICAgIFJlYWN0RWRpdG9yLmhhc1RhcmdldChlZGl0b3IsIHRhcmdldCkgJiZcbiAgICAgIFJlYWN0RWRpdG9yLnRvU2xhdGVOb2RlKGVkaXRvciwgdGFyZ2V0KVxuICAgIHJldHVybiBFbGVtZW50LmlzRWxlbWVudChzbGF0ZU5vZGUpICYmIEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBzbGF0ZU5vZGUpXG4gIH0sXG5cbiAgLyoqXG4gICAqIEV4cGVyaW1lbnRhbCBhbmQgYW5kcm9pZCBzcGVjaWZpYzogRmx1c2ggYWxsIHBlbmRpbmcgZGlmZnMgYW5kIGNhbmNlbCBjb21wb3NpdGlvbiBhdCB0aGUgbmV4dCBwb3NzaWJsZSB0aW1lLlxuICAgKi9cbiAgYW5kcm9pZFNjaGVkdWxlRmx1c2goZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBFRElUT1JfVE9fU0NIRURVTEVfRkxVU0guZ2V0KGVkaXRvcik/LigpXG4gIH0sXG5cbiAgLyoqXG4gICAqIEV4cGVyaW1lbnRhbCBhbmQgYW5kcm9pZCBzcGVjaWZpYzogR2V0IHBlbmRpbmcgZGlmZnNcbiAgICovXG4gIGFuZHJvaWRQZW5kaW5nRGlmZnMoZWRpdG9yOiBFZGl0b3IpIHtcbiAgICByZXR1cm4gRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuZ2V0KGVkaXRvcilcbiAgfSxcbn1cbiIsICJpbXBvcnQgeyB1c2VMYXlvdXRFZmZlY3QsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgQ0FOX1VTRV9ET00gfSBmcm9tICcuLi91dGlscy9lbnZpcm9ubWVudCdcblxuLyoqXG4gKiBQcmV2ZW50IHdhcm5pbmcgb24gU1NSIGJ5IGZhbGxpbmcgYmFjayB0byB1c2VFZmZlY3Qgd2hlbiBET00gaXNuJ3QgYXZhaWxhYmxlXG4gKi9cblxuZXhwb3J0IGNvbnN0IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgPSBDQU5fVVNFX0RPTVxuICA/IHVzZUxheW91dEVmZmVjdFxuICA6IHVzZUVmZmVjdFxuIiwgImltcG9ydCB7IFJhbmdlIH0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyBQTEFDRUhPTERFUl9TWU1CT0wgfSBmcm9tICcuL3dlYWstbWFwcydcblxuZXhwb3J0IGNvbnN0IHNoYWxsb3dDb21wYXJlID0gKG9iajE6IHt9LCBvYmoyOiB7fSkgPT5cbiAgT2JqZWN0LmtleXMob2JqMSkubGVuZ3RoID09PSBPYmplY3Qua2V5cyhvYmoyKS5sZW5ndGggJiZcbiAgT2JqZWN0LmtleXMob2JqMSkuZXZlcnkoXG4gICAga2V5ID0+IG9iajIuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBvYmoxW2tleV0gPT09IG9iajJba2V5XVxuICApXG5cbi8qKlxuICogQ2hlY2sgaWYgYSBsaXN0IG9mIGRlY29yYXRvciByYW5nZXMgYXJlIGVxdWFsIHRvIGFub3RoZXIuXG4gKlxuICogUEVSRjogdGhpcyByZXF1aXJlcyB0aGUgdHdvIGxpc3RzIHRvIGFsc28gaGF2ZSB0aGUgcmFuZ2VzIGluc2lkZSB0aGVtIGluIHRoZVxuICogc2FtZSBvcmRlciwgYnV0IHRoaXMgaXMgYW4gb2theSBjb25zdHJhaW50IGZvciB1cyBzaW5jZSBkZWNvcmF0aW9ucyBhcmVcbiAqIGtlcHQgaW4gb3JkZXIsIGFuZCB0aGUgb2RkIGNhc2Ugd2hlcmUgdGhleSBhcmVuJ3QgaXMgb2theSB0byByZS1yZW5kZXIgZm9yLlxuICovXG5cbmV4cG9ydCBjb25zdCBpc0RlY29yYXRvclJhbmdlTGlzdEVxdWFsID0gKFxuICBsaXN0OiBSYW5nZVtdLFxuICBhbm90aGVyOiBSYW5nZVtdXG4pOiBib29sZWFuID0+IHtcbiAgaWYgKGxpc3QubGVuZ3RoICE9PSBhbm90aGVyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcmFuZ2UgPSBsaXN0W2ldXG4gICAgY29uc3Qgb3RoZXIgPSBhbm90aGVyW2ldXG5cbiAgICBjb25zdCB7IGFuY2hvcjogcmFuZ2VBbmNob3IsIGZvY3VzOiByYW5nZUZvY3VzLCAuLi5yYW5nZU93blByb3BzIH0gPSByYW5nZVxuICAgIGNvbnN0IHsgYW5jaG9yOiBvdGhlckFuY2hvciwgZm9jdXM6IG90aGVyRm9jdXMsIC4uLm90aGVyT3duUHJvcHMgfSA9IG90aGVyXG5cbiAgICBpZiAoXG4gICAgICAhUmFuZ2UuZXF1YWxzKHJhbmdlLCBvdGhlcikgfHxcbiAgICAgIHJhbmdlW1BMQUNFSE9MREVSX1NZTUJPTF0gIT09IG90aGVyW1BMQUNFSE9MREVSX1NZTUJPTF0gfHxcbiAgICAgICFzaGFsbG93Q29tcGFyZShyYW5nZU93blByb3BzLCBvdGhlck93blByb3BzKVxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cbiIsICJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBFZGl0b3IsIFRleHQsIFBhdGgsIEVsZW1lbnQsIE5vZGUgfSBmcm9tICdzbGF0ZSdcblxuaW1wb3J0IHsgUmVhY3RFZGl0b3IsIHVzZVNsYXRlU3RhdGljIH0gZnJvbSAnLi4nXG5pbXBvcnQgeyB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IH0gZnJvbSAnLi4vaG9va3MvdXNlLWlzb21vcnBoaWMtbGF5b3V0LWVmZmVjdCdcbmltcG9ydCB7IElTX0FORFJPSUQgfSBmcm9tICcuLi91dGlscy9lbnZpcm9ubWVudCdcbmltcG9ydCB7IE1BUktfUExBQ0VIT0xERVJfU1lNQk9MIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuXG4vKipcbiAqIExlYWYgY29udGVudCBzdHJpbmdzLlxuICovXG5cbmNvbnN0IFN0cmluZyA9IChwcm9wczoge1xuICBpc0xhc3Q6IGJvb2xlYW5cbiAgbGVhZjogVGV4dFxuICBwYXJlbnQ6IEVsZW1lbnRcbiAgdGV4dDogVGV4dFxufSkgPT4ge1xuICBjb25zdCB7IGlzTGFzdCwgbGVhZiwgcGFyZW50LCB0ZXh0IH0gPSBwcm9wc1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpXG4gIGNvbnN0IHBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIHRleHQpXG4gIGNvbnN0IHBhcmVudFBhdGggPSBQYXRoLnBhcmVudChwYXRoKVxuICBjb25zdCBpc01hcmtQbGFjZWhvbGRlciA9IGxlYWZbTUFSS19QTEFDRUhPTERFUl9TWU1CT0xdID09PSB0cnVlXG5cbiAgLy8gQ09NUEFUOiBSZW5kZXIgdGV4dCBpbnNpZGUgdm9pZCBub2RlcyB3aXRoIGEgemVyby13aWR0aCBzcGFjZS5cbiAgLy8gU28gdGhlIG5vZGUgY2FuIGNvbnRhaW4gc2VsZWN0aW9uIGJ1dCB0aGUgdGV4dCBpcyBub3QgdmlzaWJsZS5cbiAgaWYgKGVkaXRvci5pc1ZvaWQocGFyZW50KSkge1xuICAgIHJldHVybiA8WmVyb1dpZHRoU3RyaW5nIGxlbmd0aD17Tm9kZS5zdHJpbmcocGFyZW50KS5sZW5ndGh9IC8+XG4gIH1cblxuICAvLyBDT01QQVQ6IElmIHRoaXMgaXMgdGhlIGxhc3QgdGV4dCBub2RlIGluIGFuIGVtcHR5IGJsb2NrLCByZW5kZXIgYSB6ZXJvLVxuICAvLyB3aWR0aCBzcGFjZSB0aGF0IHdpbGwgY29udmVydCBpbnRvIGEgbGluZSBicmVhayB3aGVuIGNvcHlpbmcgYW5kIHBhc3RpbmdcbiAgLy8gdG8gc3VwcG9ydCBleHBlY3RlZCBwbGFpbiB0ZXh0LlxuICBpZiAoXG4gICAgbGVhZi50ZXh0ID09PSAnJyAmJlxuICAgIHBhcmVudC5jaGlsZHJlbltwYXJlbnQuY2hpbGRyZW4ubGVuZ3RoIC0gMV0gPT09IHRleHQgJiZcbiAgICAhZWRpdG9yLmlzSW5saW5lKHBhcmVudCkgJiZcbiAgICBFZGl0b3Iuc3RyaW5nKGVkaXRvciwgcGFyZW50UGF0aCkgPT09ICcnXG4gICkge1xuICAgIHJldHVybiA8WmVyb1dpZHRoU3RyaW5nIGlzTGluZUJyZWFrIGlzTWFya1BsYWNlaG9sZGVyPXtpc01hcmtQbGFjZWhvbGRlcn0gLz5cbiAgfVxuXG4gIC8vIENPTVBBVDogSWYgdGhlIHRleHQgaXMgZW1wdHksIGl0J3MgYmVjYXVzZSBpdCdzIG9uIHRoZSBlZGdlIG9mIGFuIGlubGluZVxuICAvLyBub2RlLCBzbyB3ZSByZW5kZXIgYSB6ZXJvLXdpZHRoIHNwYWNlIHNvIHRoYXQgdGhlIHNlbGVjdGlvbiBjYW4gYmVcbiAgLy8gaW5zZXJ0ZWQgbmV4dCB0byBpdCBzdGlsbC5cbiAgaWYgKGxlYWYudGV4dCA9PT0gJycpIHtcbiAgICByZXR1cm4gPFplcm9XaWR0aFN0cmluZyBpc01hcmtQbGFjZWhvbGRlcj17aXNNYXJrUGxhY2Vob2xkZXJ9IC8+XG4gIH1cblxuICAvLyBDT01QQVQ6IEJyb3dzZXJzIHdpbGwgY29sbGFwc2UgdHJhaWxpbmcgbmV3IGxpbmVzIGF0IHRoZSBlbmQgb2YgYmxvY2tzLFxuICAvLyBzbyB3ZSBuZWVkIHRvIGFkZCBhbiBleHRyYSB0cmFpbGluZyBuZXcgbGluZXMgdG8gcHJldmVudCB0aGF0LlxuICBpZiAoaXNMYXN0ICYmIGxlYWYudGV4dC5zbGljZSgtMSkgPT09ICdcXG4nKSB7XG4gICAgcmV0dXJuIDxUZXh0U3RyaW5nIGlzVHJhaWxpbmcgdGV4dD17bGVhZi50ZXh0fSAvPlxuICB9XG5cbiAgcmV0dXJuIDxUZXh0U3RyaW5nIHRleHQ9e2xlYWYudGV4dH0gLz5cbn1cblxuLyoqXG4gKiBMZWFmIHN0cmluZ3Mgd2l0aCB0ZXh0IGluIHRoZW0uXG4gKi9cbmNvbnN0IFRleHRTdHJpbmcgPSAocHJvcHM6IHsgdGV4dDogc3RyaW5nOyBpc1RyYWlsaW5nPzogYm9vbGVhbiB9KSA9PiB7XG4gIGNvbnN0IHsgdGV4dCwgaXNUcmFpbGluZyA9IGZhbHNlIH0gPSBwcm9wc1xuXG4gIGNvbnN0IHJlZiA9IHVzZVJlZjxIVE1MU3BhbkVsZW1lbnQ+KG51bGwpXG5cbiAgY29uc3QgZ2V0VGV4dENvbnRlbnQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGAke3RleHQgPz8gJyd9JHtpc1RyYWlsaW5nID8gJ1xcbicgOiAnJ31gXG4gIH1cblxuICAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdGV4dCByZW5kZXJpbmcgYm91bmRhcnkgd2hlcmUgd2UgaW50ZXJmYWNlIHdpdGggdGhlIERPTVxuICAvLyBUaGUgdGV4dCBpcyBub3QgcmVuZGVyZWQgYXMgcGFydCBvZiB0aGUgdmlydHVhbCBET00sIGFzIHNpbmNlIHdlIGhhbmRsZSBiYXNpYyBjaGFyYWN0ZXIgaW5zZXJ0aW9ucyBuYXRpdmVseSxcbiAgLy8gdXBkYXRpbmcgdGhlIERPTSBpcyBub3QgYSBvbmUgd2F5IGRhdGFmbG93IGFueW1vcmUuIFdoYXQgd2UgbmVlZCBoZXJlIGlzIG5vdCByZWNvbmNpbGlhdGlvbiBhbmQgZGlmZmluZ1xuICAvLyB3aXRoIHByZXZpb3VzIHZlcnNpb24gb2YgdGhlIHZpcnR1YWwgRE9NLCBidXQgcmF0aGVyIGRpZmZpbmcgd2l0aCB0aGUgYWN0dWFsIERPTSBlbGVtZW50LCBhbmQgcmVwbGFjZSB0aGUgRE9NIDxzcGFuPiBjb250ZW50XG4gIC8vIGV4YWN0bHkgaWYgYW5kIG9ubHkgaWYgaXRzIGN1cnJlbnQgY29udGVudCBkb2VzIG5vdCBtYXRjaCBvdXIgY3VycmVudCB2aXJ0dWFsIERPTS5cbiAgLy8gT3RoZXJ3aXNlIHRoZSBET00gVGV4dE5vZGUgd291bGQgYWx3YXlzIGJlIHJlcGxhY2VkIGJ5IFJlYWN0IGFzIHRoZSB1c2VyIHR5cGVzLCB3aGljaCBpbnRlcmZlcmVzIHdpdGggbmF0aXZlIHRleHQgZmVhdHVyZXMsXG4gIC8vIGVnIG1ha2VzIG5hdGl2ZSBzcGVsbGNoZWNrIG9wdCBvdXQgZnJvbSBjaGVja2luZyB0aGUgdGV4dCBub2RlLlxuXG4gIC8vIHVzZUxheW91dEVmZmVjdDogdXBkYXRpbmcgb3VyIHNwYW4gYmVmb3JlIGJyb3dzZXIgcGFpbnRcbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgLy8gbnVsbCBjb2FsZXNjaW5nIHRleHQgdG8gbWFrZSBzdXJlIHdlJ3JlIG5vdCBvdXRwdXRpbmcgXCJudWxsXCIgYXMgYSBzdHJpbmcgaW4gdGhlIGV4dHJlbWUgY2FzZSBpdCBpcyBudWxsaXNoIGF0IHJ1bnRpbWVcbiAgICBjb25zdCB0ZXh0V2l0aFRyYWlsaW5nID0gZ2V0VGV4dENvbnRlbnQoKVxuXG4gICAgaWYgKHJlZi5jdXJyZW50ICYmIHJlZi5jdXJyZW50LnRleHRDb250ZW50ICE9PSB0ZXh0V2l0aFRyYWlsaW5nKSB7XG4gICAgICByZWYuY3VycmVudC50ZXh0Q29udGVudCA9IHRleHRXaXRoVHJhaWxpbmdcbiAgICB9XG5cbiAgICAvLyBpbnRlbnRpb25hbGx5IG5vdCBzcGVjaWZ5aW5nIGRlcGVuZGVuY2llcywgc28gdGhhdCB0aGlzIGVmZmVjdCBydW5zIG9uIGV2ZXJ5IHJlbmRlclxuICAgIC8vIGFzIHRoaXMgZWZmZWN0aXZlbHkgcmVwbGFjZXMgXCJzcGVjaWZ5aW5nIHRoZSB0ZXh0IGluIHRoZSB2aXJ0dWFsIERPTSB1bmRlciB0aGUgPHNwYW4+IGJlbG93XCIgb24gZWFjaCByZW5kZXJcbiAgfSlcblxuICAvLyBSZW5kZXIgdGV4dCBjb250ZW50IGltbWVkaWF0ZWx5IGlmIGl0J3MgdGhlIGZpcnN0LXRpbWUgcmVuZGVyXG4gIC8vIEVuc3VyZSB0aGF0IHRleHQgY29udGVudCBpcyByZW5kZXJlZCBvbiBzZXJ2ZXItc2lkZSByZW5kZXJpbmdcbiAgaWYgKCFyZWYuY3VycmVudCkge1xuICAgIHJldHVybiAoXG4gICAgICA8c3BhbiBkYXRhLXNsYXRlLXN0cmluZyByZWY9e3JlZn0+XG4gICAgICAgIHtnZXRUZXh0Q29udGVudCgpfVxuICAgICAgPC9zcGFuPlxuICAgIClcbiAgfVxuXG4gIC8vIHRoZSBzcGFuIGlzIGludGVudGlvbmFsbHkgc2FtZSBvbiBldmVyeSByZW5kZXIgaW4gdmlydHVhbCBET00sIGFjdHVhbCByZW5kZXJpbmcgaGFwcGVucyBpbiB0aGUgbGF5b3V0IGVmZmVjdCBhYm92ZVxuICByZXR1cm4gPHNwYW4gZGF0YS1zbGF0ZS1zdHJpbmcgcmVmPXtyZWZ9IC8+XG59XG5cbi8qKlxuICogTGVhZiBzdHJpbmdzIHdpdGhvdXQgdGV4dCwgcmVuZGVyIGFzIHplcm8td2lkdGggc3RyaW5ncy5cbiAqL1xuXG5leHBvcnQgY29uc3QgWmVyb1dpZHRoU3RyaW5nID0gKHByb3BzOiB7XG4gIGxlbmd0aD86IG51bWJlclxuICBpc0xpbmVCcmVhaz86IGJvb2xlYW5cbiAgaXNNYXJrUGxhY2Vob2xkZXI/OiBib29sZWFuXG59KSA9PiB7XG4gIGNvbnN0IHsgbGVuZ3RoID0gMCwgaXNMaW5lQnJlYWsgPSBmYWxzZSwgaXNNYXJrUGxhY2Vob2xkZXIgPSBmYWxzZSB9ID0gcHJvcHNcblxuICBjb25zdCBhdHRyaWJ1dGVzID0ge1xuICAgICdkYXRhLXNsYXRlLXplcm8td2lkdGgnOiBpc0xpbmVCcmVhayA/ICduJyA6ICd6JyxcbiAgICAnZGF0YS1zbGF0ZS1sZW5ndGgnOiBsZW5ndGgsXG4gIH1cblxuICBpZiAoaXNNYXJrUGxhY2Vob2xkZXIpIHtcbiAgICBhdHRyaWJ1dGVzWydkYXRhLXNsYXRlLW1hcmstcGxhY2Vob2xkZXInXSA9IHRydWVcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPHNwYW4gey4uLmF0dHJpYnV0ZXN9PlxuICAgICAgeyFJU19BTkRST0lEIHx8ICFpc0xpbmVCcmVhayA/ICdcXHVGRUZGJyA6IG51bGx9XG4gICAgICB7aXNMaW5lQnJlYWsgPyA8YnIgLz4gOiBudWxsfVxuICAgIDwvc3Bhbj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBTdHJpbmdcbiIsICJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4uL3BsdWdpbi9yZWFjdC1lZGl0b3InXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdzbGF0ZSdcblxuLyoqXG4gKiBBIFJlYWN0IGNvbnRleHQgZm9yIHNoYXJpbmcgdGhlIGVkaXRvciBvYmplY3QuXG4gKi9cblxuZXhwb3J0IGNvbnN0IEVkaXRvckNvbnRleHQgPSBjcmVhdGVDb250ZXh0PFJlYWN0RWRpdG9yIHwgbnVsbD4obnVsbClcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgZWRpdG9yIG9iamVjdCBmcm9tIHRoZSBSZWFjdCBjb250ZXh0LlxuICovXG5cbmV4cG9ydCBjb25zdCB1c2VTbGF0ZVN0YXRpYyA9ICgpOiBFZGl0b3IgPT4ge1xuICBjb25zdCBlZGl0b3IgPSB1c2VDb250ZXh0KEVkaXRvckNvbnRleHQpXG5cbiAgaWYgKCFlZGl0b3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVGhlIFxcYHVzZVNsYXRlU3RhdGljXFxgIGhvb2sgbXVzdCBiZSB1c2VkIGluc2lkZSB0aGUgPFNsYXRlPiBjb21wb25lbnQncyBjb250ZXh0LmBcbiAgICApXG4gIH1cblxuICByZXR1cm4gZWRpdG9yXG59XG4iLCAiaW1wb3J0IFJlYWN0LCB7IHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBFbGVtZW50LCBUZXh0IH0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyBSZXNpemVPYnNlcnZlciBhcyBSZXNpemVPYnNlcnZlclBvbHlmaWxsIH0gZnJvbSAnQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXInXG5pbXBvcnQgU3RyaW5nIGZyb20gJy4vc3RyaW5nJ1xuaW1wb3J0IHtcbiAgUExBQ0VIT0xERVJfU1lNQk9MLFxuICBFRElUT1JfVE9fUExBQ0VIT0xERVJfRUxFTUVOVCxcbiAgRURJVE9SX1RPX0ZPUkNFX1JFTkRFUixcbn0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHsgUmVuZGVyTGVhZlByb3BzLCBSZW5kZXJQbGFjZWhvbGRlclByb3BzIH0gZnJvbSAnLi9lZGl0YWJsZSdcbmltcG9ydCB7IHVzZVNsYXRlU3RhdGljIH0gZnJvbSAnLi4vaG9va3MvdXNlLXNsYXRlLXN0YXRpYydcblxuLyoqXG4gKiBJbmRpdmlkdWFsIGxlYXZlcyBpbiBhIHRleHQgbm9kZSB3aXRoIHVuaXF1ZSBmb3JtYXR0aW5nLlxuICovXG5cbmNvbnN0IExlYWYgPSAocHJvcHM6IHtcbiAgaXNMYXN0OiBib29sZWFuXG4gIGxlYWY6IFRleHRcbiAgcGFyZW50OiBFbGVtZW50XG4gIHJlbmRlclBsYWNlaG9sZGVyOiAocHJvcHM6IFJlbmRlclBsYWNlaG9sZGVyUHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHJlbmRlckxlYWY/OiAocHJvcHM6IFJlbmRlckxlYWZQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgdGV4dDogVGV4dFxufSkgPT4ge1xuICBjb25zdCB7XG4gICAgbGVhZixcbiAgICBpc0xhc3QsXG4gICAgdGV4dCxcbiAgICBwYXJlbnQsXG4gICAgcmVuZGVyUGxhY2Vob2xkZXIsXG4gICAgcmVuZGVyTGVhZiA9IChwcm9wczogUmVuZGVyTGVhZlByb3BzKSA9PiA8RGVmYXVsdExlYWYgey4uLnByb3BzfSAvPixcbiAgfSA9IHByb3BzXG5cbiAgY29uc3QgbGFzdFBsYWNlaG9sZGVyUmVmID0gdXNlUmVmPEhUTUxTcGFuRWxlbWVudCB8IG51bGw+KG51bGwpXG4gIGNvbnN0IHBsYWNlaG9sZGVyUmVmID0gdXNlUmVmPEhUTUxTcGFuRWxlbWVudCB8IG51bGw+KG51bGwpXG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlU3RhdGljKClcblxuICBjb25zdCBwbGFjZWhvbGRlclJlc2l6ZU9ic2VydmVyID0gdXNlUmVmPFJlc2l6ZU9ic2VydmVyIHwgbnVsbD4obnVsbClcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAocGxhY2Vob2xkZXJSZXNpemVPYnNlcnZlci5jdXJyZW50KSB7XG4gICAgICAgIHBsYWNlaG9sZGVyUmVzaXplT2JzZXJ2ZXIuY3VycmVudC5kaXNjb25uZWN0KClcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtdKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgcGxhY2Vob2xkZXJFbCA9IHBsYWNlaG9sZGVyUmVmPy5jdXJyZW50XG5cbiAgICBpZiAocGxhY2Vob2xkZXJFbCkge1xuICAgICAgRURJVE9SX1RPX1BMQUNFSE9MREVSX0VMRU1FTlQuc2V0KGVkaXRvciwgcGxhY2Vob2xkZXJFbClcbiAgICB9IGVsc2Uge1xuICAgICAgRURJVE9SX1RPX1BMQUNFSE9MREVSX0VMRU1FTlQuZGVsZXRlKGVkaXRvcilcbiAgICB9XG5cbiAgICBpZiAocGxhY2Vob2xkZXJSZXNpemVPYnNlcnZlci5jdXJyZW50KSB7XG4gICAgICAvLyBVcGRhdGUgZXhpc3Rpbmcgb2JzZXJ2ZXIuXG4gICAgICBwbGFjZWhvbGRlclJlc2l6ZU9ic2VydmVyLmN1cnJlbnQuZGlzY29ubmVjdCgpXG4gICAgICBpZiAocGxhY2Vob2xkZXJFbClcbiAgICAgICAgcGxhY2Vob2xkZXJSZXNpemVPYnNlcnZlci5jdXJyZW50Lm9ic2VydmUocGxhY2Vob2xkZXJFbClcbiAgICB9IGVsc2UgaWYgKHBsYWNlaG9sZGVyRWwpIHtcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBvYnNlcnZlciBhbmQgb2JzZXJ2ZSB0aGUgcGxhY2Vob2xkZXIgZWxlbWVudC5cbiAgICAgIGNvbnN0IFJlc2l6ZU9ic2VydmVyID0gd2luZG93LlJlc2l6ZU9ic2VydmVyIHx8IFJlc2l6ZU9ic2VydmVyUG9seWZpbGxcbiAgICAgIHBsYWNlaG9sZGVyUmVzaXplT2JzZXJ2ZXIuY3VycmVudCA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB7XG4gICAgICAgIC8vIEZvcmNlIGEgcmUtcmVuZGVyIG9mIHRoZSBlZGl0b3Igc28gaXRzIG1pbi1oZWlnaHQgY2FuIGJlIHVwZGF0ZWRcbiAgICAgICAgLy8gdG8gdGhlIG5ldyBoZWlnaHQgb2YgdGhlIHBsYWNlaG9sZGVyLlxuICAgICAgICBjb25zdCBmb3JjZVJlbmRlciA9IEVESVRPUl9UT19GT1JDRV9SRU5ERVIuZ2V0KGVkaXRvcilcbiAgICAgICAgZm9yY2VSZW5kZXI/LigpXG4gICAgICB9KVxuICAgICAgcGxhY2Vob2xkZXJSZXNpemVPYnNlcnZlci5jdXJyZW50Lm9ic2VydmUocGxhY2Vob2xkZXJFbClcbiAgICB9XG5cbiAgICBpZiAoIXBsYWNlaG9sZGVyRWwgJiYgbGFzdFBsYWNlaG9sZGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIC8vIE5vIHBsYWNlaG9sZGVyIGVsZW1lbnQsIHNvIG5vIG5lZWQgZm9yIGEgcmVzaXplIG9ic2VydmVyLlxuICAgICAgLy8gRm9yY2UgYSByZS1yZW5kZXIgb2YgdGhlIGVkaXRvciBzbyBpdHMgbWluLWhlaWdodCBjYW4gYmUgcmVzZXQuXG4gICAgICBjb25zdCBmb3JjZVJlbmRlciA9IEVESVRPUl9UT19GT1JDRV9SRU5ERVIuZ2V0KGVkaXRvcilcbiAgICAgIGZvcmNlUmVuZGVyPy4oKVxuICAgIH1cblxuICAgIGxhc3RQbGFjZWhvbGRlclJlZi5jdXJyZW50ID0gcGxhY2Vob2xkZXJSZWYuY3VycmVudFxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIEVESVRPUl9UT19QTEFDRUhPTERFUl9FTEVNRU5ULmRlbGV0ZShlZGl0b3IpXG4gICAgfVxuICB9LCBbcGxhY2Vob2xkZXJSZWYsIGxlYWZdKVxuXG4gIGxldCBjaGlsZHJlbiA9IChcbiAgICA8U3RyaW5nIGlzTGFzdD17aXNMYXN0fSBsZWFmPXtsZWFmfSBwYXJlbnQ9e3BhcmVudH0gdGV4dD17dGV4dH0gLz5cbiAgKVxuXG4gIGlmIChsZWFmW1BMQUNFSE9MREVSX1NZTUJPTF0pIHtcbiAgICBjb25zdCBwbGFjZWhvbGRlclByb3BzOiBSZW5kZXJQbGFjZWhvbGRlclByb3BzID0ge1xuICAgICAgY2hpbGRyZW46IGxlYWYucGxhY2Vob2xkZXIsXG4gICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICdkYXRhLXNsYXRlLXBsYWNlaG9sZGVyJzogdHJ1ZSxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxuICAgICAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICAgICAgb3BhY2l0eTogJzAuMzMzJyxcbiAgICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAgICAgdGV4dERlY29yYXRpb246ICdub25lJyxcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudEVkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgcmVmOiBwbGFjZWhvbGRlclJlZixcbiAgICAgIH0sXG4gICAgfVxuXG4gICAgY2hpbGRyZW4gPSAoXG4gICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgIHtyZW5kZXJQbGFjZWhvbGRlcihwbGFjZWhvbGRlclByb3BzKX1cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICApXG4gIH1cblxuICAvLyBDT01QQVQ6IEhhdmluZyB0aGUgYGRhdGEtYCBhdHRyaWJ1dGVzIG9uIHRoZXNlIGxlYWYgZWxlbWVudHMgZW5zdXJlcyB0aGF0XG4gIC8vIGluIGNlcnRhaW4gbWlzYmVoYXZpbmcgYnJvd3NlcnMgdGhleSBhcmVuJ3Qgd2VpcmRseSBjbG9uZWQvZGVzdHJveWVkIGJ5XG4gIC8vIGNvbnRlbnRlZGl0YWJsZSBiZWhhdmlvcnMuICgyMDE5LzA1LzA4KVxuICBjb25zdCBhdHRyaWJ1dGVzOiB7XG4gICAgJ2RhdGEtc2xhdGUtbGVhZic6IHRydWVcbiAgfSA9IHtcbiAgICAnZGF0YS1zbGF0ZS1sZWFmJzogdHJ1ZSxcbiAgfVxuXG4gIHJldHVybiByZW5kZXJMZWFmKHsgYXR0cmlidXRlcywgY2hpbGRyZW4sIGxlYWYsIHRleHQgfSlcbn1cblxuY29uc3QgTWVtb2l6ZWRMZWFmID0gUmVhY3QubWVtbyhMZWFmLCAocHJldiwgbmV4dCkgPT4ge1xuICByZXR1cm4gKFxuICAgIG5leHQucGFyZW50ID09PSBwcmV2LnBhcmVudCAmJlxuICAgIG5leHQuaXNMYXN0ID09PSBwcmV2LmlzTGFzdCAmJlxuICAgIG5leHQucmVuZGVyTGVhZiA9PT0gcHJldi5yZW5kZXJMZWFmICYmXG4gICAgbmV4dC5yZW5kZXJQbGFjZWhvbGRlciA9PT0gcHJldi5yZW5kZXJQbGFjZWhvbGRlciAmJlxuICAgIG5leHQudGV4dCA9PT0gcHJldi50ZXh0ICYmXG4gICAgVGV4dC5lcXVhbHMobmV4dC5sZWFmLCBwcmV2LmxlYWYpICYmXG4gICAgbmV4dC5sZWFmW1BMQUNFSE9MREVSX1NZTUJPTF0gPT09IHByZXYubGVhZltQTEFDRUhPTERFUl9TWU1CT0xdXG4gIClcbn0pXG5cbmV4cG9ydCBjb25zdCBEZWZhdWx0TGVhZiA9IChwcm9wczogUmVuZGVyTGVhZlByb3BzKSA9PiB7XG4gIGNvbnN0IHsgYXR0cmlidXRlcywgY2hpbGRyZW4gfSA9IHByb3BzXG4gIHJldHVybiA8c3BhbiB7Li4uYXR0cmlidXRlc30+e2NoaWxkcmVufTwvc3Bhbj5cbn1cblxuZXhwb3J0IGRlZmF1bHQgTWVtb2l6ZWRMZWFmXG4iLCAiaW1wb3J0IFJlYWN0LCB7IHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRWxlbWVudCwgUmFuZ2UsIFRleHQgYXMgU2xhdGVUZXh0IH0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyBSZWFjdEVkaXRvciwgdXNlU2xhdGVTdGF0aWMgfSBmcm9tICcuLidcbmltcG9ydCB7IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgfSBmcm9tICcuLi9ob29rcy91c2UtaXNvbW9ycGhpYy1sYXlvdXQtZWZmZWN0J1xuaW1wb3J0IHsgaXNEZWNvcmF0b3JSYW5nZUxpc3RFcXVhbCB9IGZyb20gJy4uL3V0aWxzL3JhbmdlLWxpc3QnXG5pbXBvcnQge1xuICBFRElUT1JfVE9fS0VZX1RPX0VMRU1FTlQsXG4gIEVMRU1FTlRfVE9fTk9ERSxcbiAgTk9ERV9UT19FTEVNRU5ULFxufSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQgeyBSZW5kZXJMZWFmUHJvcHMsIFJlbmRlclBsYWNlaG9sZGVyUHJvcHMgfSBmcm9tICcuL2VkaXRhYmxlJ1xuaW1wb3J0IExlYWYgZnJvbSAnLi9sZWFmJ1xuXG4vKipcbiAqIFRleHQuXG4gKi9cblxuY29uc3QgVGV4dCA9IChwcm9wczoge1xuICBkZWNvcmF0aW9uczogUmFuZ2VbXVxuICBpc0xhc3Q6IGJvb2xlYW5cbiAgcGFyZW50OiBFbGVtZW50XG4gIHJlbmRlclBsYWNlaG9sZGVyOiAocHJvcHM6IFJlbmRlclBsYWNlaG9sZGVyUHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHJlbmRlckxlYWY/OiAocHJvcHM6IFJlbmRlckxlYWZQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgdGV4dDogU2xhdGVUZXh0XG59KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBkZWNvcmF0aW9ucyxcbiAgICBpc0xhc3QsXG4gICAgcGFyZW50LFxuICAgIHJlbmRlclBsYWNlaG9sZGVyLFxuICAgIHJlbmRlckxlYWYsXG4gICAgdGV4dCxcbiAgfSA9IHByb3BzXG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlU3RhdGljKClcbiAgY29uc3QgcmVmID0gdXNlUmVmPEhUTUxTcGFuRWxlbWVudD4obnVsbClcbiAgY29uc3QgbGVhdmVzID0gU2xhdGVUZXh0LmRlY29yYXRpb25zKHRleHQsIGRlY29yYXRpb25zKVxuICBjb25zdCBrZXkgPSBSZWFjdEVkaXRvci5maW5kS2V5KGVkaXRvciwgdGV4dClcbiAgY29uc3QgY2hpbGRyZW4gPSBbXVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVhdmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgbGVhZiA9IGxlYXZlc1tpXVxuXG4gICAgY2hpbGRyZW4ucHVzaChcbiAgICAgIDxMZWFmXG4gICAgICAgIGlzTGFzdD17aXNMYXN0ICYmIGkgPT09IGxlYXZlcy5sZW5ndGggLSAxfVxuICAgICAgICBrZXk9e2Ake2tleS5pZH0tJHtpfWB9XG4gICAgICAgIHJlbmRlclBsYWNlaG9sZGVyPXtyZW5kZXJQbGFjZWhvbGRlcn1cbiAgICAgICAgbGVhZj17bGVhZn1cbiAgICAgICAgdGV4dD17dGV4dH1cbiAgICAgICAgcGFyZW50PXtwYXJlbnR9XG4gICAgICAgIHJlbmRlckxlYWY9e3JlbmRlckxlYWZ9XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIC8vIFVwZGF0ZSBlbGVtZW50LXJlbGF0ZWQgd2VhayBtYXBzIHdpdGggdGhlIERPTSBlbGVtZW50IHJlZi5cbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgS0VZX1RPX0VMRU1FTlQgPSBFRElUT1JfVE9fS0VZX1RPX0VMRU1FTlQuZ2V0KGVkaXRvcilcbiAgICBpZiAocmVmLmN1cnJlbnQpIHtcbiAgICAgIEtFWV9UT19FTEVNRU5UPy5zZXQoa2V5LCByZWYuY3VycmVudClcbiAgICAgIE5PREVfVE9fRUxFTUVOVC5zZXQodGV4dCwgcmVmLmN1cnJlbnQpXG4gICAgICBFTEVNRU5UX1RPX05PREUuc2V0KHJlZi5jdXJyZW50LCB0ZXh0KVxuICAgIH0gZWxzZSB7XG4gICAgICBLRVlfVE9fRUxFTUVOVD8uZGVsZXRlKGtleSlcbiAgICAgIE5PREVfVE9fRUxFTUVOVC5kZWxldGUodGV4dClcbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIChcbiAgICA8c3BhbiBkYXRhLXNsYXRlLW5vZGU9XCJ0ZXh0XCIgcmVmPXtyZWZ9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvc3Bhbj5cbiAgKVxufVxuXG5jb25zdCBNZW1vaXplZFRleHQgPSBSZWFjdC5tZW1vKFRleHQsIChwcmV2LCBuZXh0KSA9PiB7XG4gIHJldHVybiAoXG4gICAgbmV4dC5wYXJlbnQgPT09IHByZXYucGFyZW50ICYmXG4gICAgbmV4dC5pc0xhc3QgPT09IHByZXYuaXNMYXN0ICYmXG4gICAgbmV4dC5yZW5kZXJMZWFmID09PSBwcmV2LnJlbmRlckxlYWYgJiZcbiAgICBuZXh0LnRleHQgPT09IHByZXYudGV4dCAmJlxuICAgIGlzRGVjb3JhdG9yUmFuZ2VMaXN0RXF1YWwobmV4dC5kZWNvcmF0aW9ucywgcHJldi5kZWNvcmF0aW9ucylcbiAgKVxufSlcblxuZXhwb3J0IGRlZmF1bHQgTWVtb2l6ZWRUZXh0XG4iLCAiaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgZ2V0RGlyZWN0aW9uIGZyb20gJ2RpcmVjdGlvbidcbmltcG9ydCB7IEVkaXRvciwgTm9kZSwgUmFuZ2UsIEVsZW1lbnQgYXMgU2xhdGVFbGVtZW50IH0gZnJvbSAnc2xhdGUnXG5cbmltcG9ydCBUZXh0IGZyb20gJy4vdGV4dCdcbmltcG9ydCB1c2VDaGlsZHJlbiBmcm9tICcuLi9ob29rcy91c2UtY2hpbGRyZW4nXG5pbXBvcnQgeyBSZWFjdEVkaXRvciwgdXNlU2xhdGVTdGF0aWMsIHVzZVJlYWRPbmx5IH0gZnJvbSAnLi4nXG5pbXBvcnQge1xuICBOT0RFX1RPX0VMRU1FTlQsXG4gIEVMRU1FTlRfVE9fTk9ERSxcbiAgTk9ERV9UT19QQVJFTlQsXG4gIE5PREVfVE9fSU5ERVgsXG4gIEVESVRPUl9UT19LRVlfVE9fRUxFTUVOVCxcbn0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHsgaXNEZWNvcmF0b3JSYW5nZUxpc3RFcXVhbCB9IGZyb20gJy4uL3V0aWxzL3JhbmdlLWxpc3QnXG5pbXBvcnQge1xuICBSZW5kZXJFbGVtZW50UHJvcHMsXG4gIFJlbmRlckxlYWZQcm9wcyxcbiAgUmVuZGVyUGxhY2Vob2xkZXJQcm9wcyxcbn0gZnJvbSAnLi9lZGl0YWJsZSdcblxuLyoqXG4gKiBFbGVtZW50LlxuICovXG5cbmNvbnN0IEVsZW1lbnQgPSAocHJvcHM6IHtcbiAgZGVjb3JhdGlvbnM6IFJhbmdlW11cbiAgZWxlbWVudDogU2xhdGVFbGVtZW50XG4gIHJlbmRlckVsZW1lbnQ/OiAocHJvcHM6IFJlbmRlckVsZW1lbnRQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgcmVuZGVyUGxhY2Vob2xkZXI6IChwcm9wczogUmVuZGVyUGxhY2Vob2xkZXJQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgcmVuZGVyTGVhZj86IChwcm9wczogUmVuZGVyTGVhZlByb3BzKSA9PiBKU1guRWxlbWVudFxuICBzZWxlY3Rpb246IFJhbmdlIHwgbnVsbFxufSkgPT4ge1xuICBjb25zdCB7XG4gICAgZGVjb3JhdGlvbnMsXG4gICAgZWxlbWVudCxcbiAgICByZW5kZXJFbGVtZW50ID0gKHA6IFJlbmRlckVsZW1lbnRQcm9wcykgPT4gPERlZmF1bHRFbGVtZW50IHsuLi5wfSAvPixcbiAgICByZW5kZXJQbGFjZWhvbGRlcixcbiAgICByZW5kZXJMZWFmLFxuICAgIHNlbGVjdGlvbixcbiAgfSA9IHByb3BzXG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlU3RhdGljKClcbiAgY29uc3QgcmVhZE9ubHkgPSB1c2VSZWFkT25seSgpXG4gIGNvbnN0IGlzSW5saW5lID0gZWRpdG9yLmlzSW5saW5lKGVsZW1lbnQpXG4gIGNvbnN0IGtleSA9IFJlYWN0RWRpdG9yLmZpbmRLZXkoZWRpdG9yLCBlbGVtZW50KVxuICBjb25zdCByZWYgPSB1c2VDYWxsYmFjayhcbiAgICAocmVmOiBIVE1MRWxlbWVudCB8IG51bGwpID0+IHtcbiAgICAgIC8vIFVwZGF0ZSBlbGVtZW50LXJlbGF0ZWQgd2VhayBtYXBzIHdpdGggdGhlIERPTSBlbGVtZW50IHJlZi5cbiAgICAgIGNvbnN0IEtFWV9UT19FTEVNRU5UID0gRURJVE9SX1RPX0tFWV9UT19FTEVNRU5ULmdldChlZGl0b3IpXG4gICAgICBpZiAocmVmKSB7XG4gICAgICAgIEtFWV9UT19FTEVNRU5UPy5zZXQoa2V5LCByZWYpXG4gICAgICAgIE5PREVfVE9fRUxFTUVOVC5zZXQoZWxlbWVudCwgcmVmKVxuICAgICAgICBFTEVNRU5UX1RPX05PREUuc2V0KHJlZiwgZWxlbWVudClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEtFWV9UT19FTEVNRU5UPy5kZWxldGUoa2V5KVxuICAgICAgICBOT0RFX1RPX0VMRU1FTlQuZGVsZXRlKGVsZW1lbnQpXG4gICAgICB9XG4gICAgfSxcbiAgICBbZWRpdG9yLCBrZXksIGVsZW1lbnRdXG4gIClcbiAgbGV0IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgPSB1c2VDaGlsZHJlbih7XG4gICAgZGVjb3JhdGlvbnMsXG4gICAgbm9kZTogZWxlbWVudCxcbiAgICByZW5kZXJFbGVtZW50LFxuICAgIHJlbmRlclBsYWNlaG9sZGVyLFxuICAgIHJlbmRlckxlYWYsXG4gICAgc2VsZWN0aW9uLFxuICB9KVxuXG4gIC8vIEF0dHJpYnV0ZXMgdGhhdCB0aGUgZGV2ZWxvcGVyIG11c3QgbWl4IGludG8gdGhlIGVsZW1lbnQgaW4gdGhlaXJcbiAgLy8gY3VzdG9tIG5vZGUgcmVuZGVyZXIgY29tcG9uZW50LlxuICBjb25zdCBhdHRyaWJ1dGVzOiB7XG4gICAgJ2RhdGEtc2xhdGUtbm9kZSc6ICdlbGVtZW50J1xuICAgICdkYXRhLXNsYXRlLXZvaWQnPzogdHJ1ZVxuICAgICdkYXRhLXNsYXRlLWlubGluZSc/OiB0cnVlXG4gICAgY29udGVudEVkaXRhYmxlPzogZmFsc2VcbiAgICBkaXI/OiAncnRsJ1xuICAgIHJlZjogYW55XG4gIH0gPSB7XG4gICAgJ2RhdGEtc2xhdGUtbm9kZSc6ICdlbGVtZW50JyxcbiAgICByZWYsXG4gIH1cblxuICBpZiAoaXNJbmxpbmUpIHtcbiAgICBhdHRyaWJ1dGVzWydkYXRhLXNsYXRlLWlubGluZSddID0gdHJ1ZVxuICB9XG5cbiAgLy8gSWYgaXQncyBhIGJsb2NrIG5vZGUgd2l0aCBpbmxpbmUgY2hpbGRyZW4sIGFkZCB0aGUgcHJvcGVyIGBkaXJgIGF0dHJpYnV0ZVxuICAvLyBmb3IgdGV4dCBkaXJlY3Rpb24uXG4gIGlmICghaXNJbmxpbmUgJiYgRWRpdG9yLmhhc0lubGluZXMoZWRpdG9yLCBlbGVtZW50KSkge1xuICAgIGNvbnN0IHRleHQgPSBOb2RlLnN0cmluZyhlbGVtZW50KVxuICAgIGNvbnN0IGRpciA9IGdldERpcmVjdGlvbih0ZXh0KVxuXG4gICAgaWYgKGRpciA9PT0gJ3J0bCcpIHtcbiAgICAgIGF0dHJpYnV0ZXMuZGlyID0gZGlyXG4gICAgfVxuICB9XG5cbiAgLy8gSWYgaXQncyBhIHZvaWQgbm9kZSwgd3JhcCB0aGUgY2hpbGRyZW4gaW4gZXh0cmEgdm9pZC1zcGVjaWZpYyBlbGVtZW50cy5cbiAgaWYgKEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBlbGVtZW50KSkge1xuICAgIGF0dHJpYnV0ZXNbJ2RhdGEtc2xhdGUtdm9pZCddID0gdHJ1ZVxuXG4gICAgaWYgKCFyZWFkT25seSAmJiBpc0lubGluZSkge1xuICAgICAgYXR0cmlidXRlcy5jb250ZW50RWRpdGFibGUgPSBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IFRhZyA9IGlzSW5saW5lID8gJ3NwYW4nIDogJ2RpdidcbiAgICBjb25zdCBbW3RleHRdXSA9IE5vZGUudGV4dHMoZWxlbWVudClcblxuICAgIGNoaWxkcmVuID0gKFxuICAgICAgPFRhZ1xuICAgICAgICBkYXRhLXNsYXRlLXNwYWNlclxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIGhlaWdodDogJzAnLFxuICAgICAgICAgIGNvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPFRleHRcbiAgICAgICAgICByZW5kZXJQbGFjZWhvbGRlcj17cmVuZGVyUGxhY2Vob2xkZXJ9XG4gICAgICAgICAgZGVjb3JhdGlvbnM9e1tdfVxuICAgICAgICAgIGlzTGFzdD17ZmFsc2V9XG4gICAgICAgICAgcGFyZW50PXtlbGVtZW50fVxuICAgICAgICAgIHRleHQ9e3RleHR9XG4gICAgICAgIC8+XG4gICAgICA8L1RhZz5cbiAgICApXG5cbiAgICBOT0RFX1RPX0lOREVYLnNldCh0ZXh0LCAwKVxuICAgIE5PREVfVE9fUEFSRU5ULnNldCh0ZXh0LCBlbGVtZW50KVxuICB9XG5cbiAgcmV0dXJuIHJlbmRlckVsZW1lbnQoeyBhdHRyaWJ1dGVzLCBjaGlsZHJlbiwgZWxlbWVudCB9KVxufVxuXG5jb25zdCBNZW1vaXplZEVsZW1lbnQgPSBSZWFjdC5tZW1vKEVsZW1lbnQsIChwcmV2LCBuZXh0KSA9PiB7XG4gIHJldHVybiAoXG4gICAgcHJldi5lbGVtZW50ID09PSBuZXh0LmVsZW1lbnQgJiZcbiAgICBwcmV2LnJlbmRlckVsZW1lbnQgPT09IG5leHQucmVuZGVyRWxlbWVudCAmJlxuICAgIHByZXYucmVuZGVyTGVhZiA9PT0gbmV4dC5yZW5kZXJMZWFmICYmXG4gICAgaXNEZWNvcmF0b3JSYW5nZUxpc3RFcXVhbChwcmV2LmRlY29yYXRpb25zLCBuZXh0LmRlY29yYXRpb25zKSAmJlxuICAgIChwcmV2LnNlbGVjdGlvbiA9PT0gbmV4dC5zZWxlY3Rpb24gfHxcbiAgICAgICghIXByZXYuc2VsZWN0aW9uICYmXG4gICAgICAgICEhbmV4dC5zZWxlY3Rpb24gJiZcbiAgICAgICAgUmFuZ2UuZXF1YWxzKHByZXYuc2VsZWN0aW9uLCBuZXh0LnNlbGVjdGlvbikpKVxuICApXG59KVxuXG4vKipcbiAqIFRoZSBkZWZhdWx0IGVsZW1lbnQgcmVuZGVyZXIuXG4gKi9cblxuZXhwb3J0IGNvbnN0IERlZmF1bHRFbGVtZW50ID0gKHByb3BzOiBSZW5kZXJFbGVtZW50UHJvcHMpID0+IHtcbiAgY29uc3QgeyBhdHRyaWJ1dGVzLCBjaGlsZHJlbiwgZWxlbWVudCB9ID0gcHJvcHNcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKVxuICBjb25zdCBUYWcgPSBlZGl0b3IuaXNJbmxpbmUoZWxlbWVudCkgPyAnc3BhbicgOiAnZGl2J1xuICByZXR1cm4gKFxuICAgIDxUYWcgey4uLmF0dHJpYnV0ZXN9IHN0eWxlPXt7IHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvVGFnPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IE1lbW9pemVkRWxlbWVudFxuIiwgImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IFJhbmdlLCBOb2RlRW50cnkgfSBmcm9tICdzbGF0ZSdcblxuLyoqXG4gKiBBIFJlYWN0IGNvbnRleHQgZm9yIHNoYXJpbmcgdGhlIGBkZWNvcmF0ZWAgcHJvcCBvZiB0aGUgZWRpdGFibGUuXG4gKi9cblxuZXhwb3J0IGNvbnN0IERlY29yYXRlQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8KGVudHJ5OiBOb2RlRW50cnkpID0+IFJhbmdlW10+KFxuICAoKSA9PiBbXVxuKVxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBgZGVjb3JhdGVgIHByb3Agb2YgdGhlIGVkaXRhYmxlLlxuICovXG5cbmV4cG9ydCBjb25zdCB1c2VEZWNvcmF0ZSA9ICgpOiAoKGVudHJ5OiBOb2RlRW50cnkpID0+IFJhbmdlW10pID0+IHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoRGVjb3JhdGVDb250ZXh0KVxufVxuIiwgImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCdcblxuLyoqXG4gKiBBIFJlYWN0IGNvbnRleHQgZm9yIHNoYXJpbmcgdGhlIGBzZWxlY3RlZGAgc3RhdGUgb2YgYW4gZWxlbWVudC5cbiAqL1xuXG5leHBvcnQgY29uc3QgU2VsZWN0ZWRDb250ZXh0ID0gY3JlYXRlQ29udGV4dChmYWxzZSlcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgYHNlbGVjdGVkYCBzdGF0ZSBvZiBhbiBlbGVtZW50LlxuICovXG5cbmV4cG9ydCBjb25zdCB1c2VTZWxlY3RlZCA9ICgpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoU2VsZWN0ZWRDb250ZXh0KVxufVxuIiwgImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEVkaXRvciwgUmFuZ2UsIEVsZW1lbnQsIEFuY2VzdG9yLCBEZXNjZW5kYW50IH0gZnJvbSAnc2xhdGUnXG5cbmltcG9ydCBFbGVtZW50Q29tcG9uZW50IGZyb20gJy4uL2NvbXBvbmVudHMvZWxlbWVudCdcbmltcG9ydCBUZXh0Q29tcG9uZW50IGZyb20gJy4uL2NvbXBvbmVudHMvdGV4dCdcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi4vcGx1Z2luL3JlYWN0LWVkaXRvcidcbmltcG9ydCB7IHVzZVNsYXRlU3RhdGljIH0gZnJvbSAnLi91c2Utc2xhdGUtc3RhdGljJ1xuaW1wb3J0IHsgdXNlRGVjb3JhdGUgfSBmcm9tICcuL3VzZS1kZWNvcmF0ZSdcbmltcG9ydCB7IE5PREVfVE9fSU5ERVgsIE5PREVfVE9fUEFSRU5UIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHtcbiAgUmVuZGVyRWxlbWVudFByb3BzLFxuICBSZW5kZXJMZWFmUHJvcHMsXG4gIFJlbmRlclBsYWNlaG9sZGVyUHJvcHMsXG59IGZyb20gJy4uL2NvbXBvbmVudHMvZWRpdGFibGUnXG5pbXBvcnQgeyBTZWxlY3RlZENvbnRleHQgfSBmcm9tICcuL3VzZS1zZWxlY3RlZCdcblxuLyoqXG4gKiBDaGlsZHJlbi5cbiAqL1xuXG5jb25zdCB1c2VDaGlsZHJlbiA9IChwcm9wczoge1xuICBkZWNvcmF0aW9uczogUmFuZ2VbXVxuICBub2RlOiBBbmNlc3RvclxuICByZW5kZXJFbGVtZW50PzogKHByb3BzOiBSZW5kZXJFbGVtZW50UHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHJlbmRlclBsYWNlaG9sZGVyOiAocHJvcHM6IFJlbmRlclBsYWNlaG9sZGVyUHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHJlbmRlckxlYWY/OiAocHJvcHM6IFJlbmRlckxlYWZQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgc2VsZWN0aW9uOiBSYW5nZSB8IG51bGxcbn0pID0+IHtcbiAgY29uc3Qge1xuICAgIGRlY29yYXRpb25zLFxuICAgIG5vZGUsXG4gICAgcmVuZGVyRWxlbWVudCxcbiAgICByZW5kZXJQbGFjZWhvbGRlcixcbiAgICByZW5kZXJMZWFmLFxuICAgIHNlbGVjdGlvbixcbiAgfSA9IHByb3BzXG4gIGNvbnN0IGRlY29yYXRlID0gdXNlRGVjb3JhdGUoKVxuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpXG4gIGNvbnN0IHBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIG5vZGUpXG4gIGNvbnN0IGNoaWxkcmVuID0gW11cbiAgY29uc3QgaXNMZWFmQmxvY2sgPVxuICAgIEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmXG4gICAgIWVkaXRvci5pc0lubGluZShub2RlKSAmJlxuICAgIEVkaXRvci5oYXNJbmxpbmVzKGVkaXRvciwgbm9kZSlcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwID0gcGF0aC5jb25jYXQoaSlcbiAgICBjb25zdCBuID0gbm9kZS5jaGlsZHJlbltpXSBhcyBEZXNjZW5kYW50XG4gICAgY29uc3Qga2V5ID0gUmVhY3RFZGl0b3IuZmluZEtleShlZGl0b3IsIG4pXG4gICAgY29uc3QgcmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBwKVxuICAgIGNvbnN0IHNlbCA9IHNlbGVjdGlvbiAmJiBSYW5nZS5pbnRlcnNlY3Rpb24ocmFuZ2UsIHNlbGVjdGlvbilcbiAgICBjb25zdCBkcyA9IGRlY29yYXRlKFtuLCBwXSlcblxuICAgIGZvciAoY29uc3QgZGVjIG9mIGRlY29yYXRpb25zKSB7XG4gICAgICBjb25zdCBkID0gUmFuZ2UuaW50ZXJzZWN0aW9uKGRlYywgcmFuZ2UpXG5cbiAgICAgIGlmIChkKSB7XG4gICAgICAgIGRzLnB1c2goZClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoRWxlbWVudC5pc0VsZW1lbnQobikpIHtcbiAgICAgIGNoaWxkcmVuLnB1c2goXG4gICAgICAgIDxTZWxlY3RlZENvbnRleHQuUHJvdmlkZXIga2V5PXtgcHJvdmlkZXItJHtrZXkuaWR9YH0gdmFsdWU9eyEhc2VsfT5cbiAgICAgICAgICA8RWxlbWVudENvbXBvbmVudFxuICAgICAgICAgICAgZGVjb3JhdGlvbnM9e2RzfVxuICAgICAgICAgICAgZWxlbWVudD17bn1cbiAgICAgICAgICAgIGtleT17a2V5LmlkfVxuICAgICAgICAgICAgcmVuZGVyRWxlbWVudD17cmVuZGVyRWxlbWVudH1cbiAgICAgICAgICAgIHJlbmRlclBsYWNlaG9sZGVyPXtyZW5kZXJQbGFjZWhvbGRlcn1cbiAgICAgICAgICAgIHJlbmRlckxlYWY9e3JlbmRlckxlYWZ9XG4gICAgICAgICAgICBzZWxlY3Rpb249e3NlbH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1NlbGVjdGVkQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgY2hpbGRyZW4ucHVzaChcbiAgICAgICAgPFRleHRDb21wb25lbnRcbiAgICAgICAgICBkZWNvcmF0aW9ucz17ZHN9XG4gICAgICAgICAga2V5PXtrZXkuaWR9XG4gICAgICAgICAgaXNMYXN0PXtpc0xlYWZCbG9jayAmJiBpID09PSBub2RlLmNoaWxkcmVuLmxlbmd0aCAtIDF9XG4gICAgICAgICAgcGFyZW50PXtub2RlfVxuICAgICAgICAgIHJlbmRlclBsYWNlaG9sZGVyPXtyZW5kZXJQbGFjZWhvbGRlcn1cbiAgICAgICAgICByZW5kZXJMZWFmPXtyZW5kZXJMZWFmfVxuICAgICAgICAgIHRleHQ9e259XG4gICAgICAgIC8+XG4gICAgICApXG4gICAgfVxuXG4gICAgTk9ERV9UT19JTkRFWC5zZXQobiwgaSlcbiAgICBOT0RFX1RPX1BBUkVOVC5zZXQobiwgbm9kZSlcbiAgfVxuXG4gIHJldHVybiBjaGlsZHJlblxufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VDaGlsZHJlblxuIiwgImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCdcblxuLyoqXG4gKiBBIFJlYWN0IGNvbnRleHQgZm9yIHNoYXJpbmcgdGhlIGByZWFkT25seWAgc3RhdGUgb2YgdGhlIGVkaXRvci5cbiAqL1xuXG5leHBvcnQgY29uc3QgUmVhZE9ubHlDb250ZXh0ID0gY3JlYXRlQ29udGV4dChmYWxzZSlcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgYHJlYWRPbmx5YCBzdGF0ZSBvZiB0aGUgZWRpdG9yLlxuICovXG5cbmV4cG9ydCBjb25zdCB1c2VSZWFkT25seSA9ICgpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoUmVhZE9ubHlDb250ZXh0KVxufVxuIiwgImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuLi9wbHVnaW4vcmVhY3QtZWRpdG9yJ1xuXG4vKipcbiAqIEEgUmVhY3QgY29udGV4dCBmb3Igc2hhcmluZyB0aGUgZWRpdG9yIG9iamVjdCwgaW4gYSB3YXkgdGhhdCByZS1yZW5kZXJzIHRoZVxuICogY29udGV4dCB3aGVuZXZlciBjaGFuZ2VzIG9jY3VyLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgU2xhdGVDb250ZXh0VmFsdWUge1xuICB2OiBudW1iZXJcbiAgZWRpdG9yOiBSZWFjdEVkaXRvclxufVxuXG5leHBvcnQgY29uc3QgU2xhdGVDb250ZXh0ID0gY3JlYXRlQ29udGV4dDx7XG4gIHY6IG51bWJlclxuICBlZGl0b3I6IFJlYWN0RWRpdG9yXG59IHwgbnVsbD4obnVsbClcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgZWRpdG9yIG9iamVjdCBmcm9tIHRoZSBSZWFjdCBjb250ZXh0LlxuICovXG5cbmV4cG9ydCBjb25zdCB1c2VTbGF0ZSA9ICgpOiBFZGl0b3IgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChTbGF0ZUNvbnRleHQpXG5cbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFRoZSBcXGB1c2VTbGF0ZVxcYCBob29rIG11c3QgYmUgdXNlZCBpbnNpZGUgdGhlIDxTbGF0ZT4gY29tcG9uZW50J3MgY29udGV4dC5gXG4gICAgKVxuICB9XG5cbiAgY29uc3QgeyBlZGl0b3IgfSA9IGNvbnRleHRcbiAgcmV0dXJuIGVkaXRvclxufVxuXG5leHBvcnQgY29uc3QgdXNlU2xhdGVXaXRoViA9ICgpID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoU2xhdGVDb250ZXh0KVxuXG4gIGlmICghY29udGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgXFxgdXNlU2xhdGVcXGAgaG9vayBtdXN0IGJlIHVzZWQgaW5zaWRlIHRoZSA8U2xhdGU+IGNvbXBvbmVudCdzIGNvbnRleHQuYFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBjb250ZXh0XG59XG4iLCAiZXhwb3J0IGNvbnN0IFRSSVBMRV9DTElDSyA9IDNcbiIsICJpbXBvcnQgeyBpc0tleUhvdGtleSB9IGZyb20gJ2lzLWhvdGtleSdcbmltcG9ydCB7IElTX0FQUExFIH0gZnJvbSAnLi9lbnZpcm9ubWVudCdcblxuLyoqXG4gKiBIb3RrZXkgbWFwcGluZ3MgZm9yIGVhY2ggcGxhdGZvcm0uXG4gKi9cblxuY29uc3QgSE9US0VZUyA9IHtcbiAgYm9sZDogJ21vZCtiJyxcbiAgY29tcG9zZTogWydkb3duJywgJ2xlZnQnLCAncmlnaHQnLCAndXAnLCAnYmFja3NwYWNlJywgJ2VudGVyJ10sXG4gIG1vdmVCYWNrd2FyZDogJ2xlZnQnLFxuICBtb3ZlRm9yd2FyZDogJ3JpZ2h0JyxcbiAgbW92ZVdvcmRCYWNrd2FyZDogJ2N0cmwrbGVmdCcsXG4gIG1vdmVXb3JkRm9yd2FyZDogJ2N0cmwrcmlnaHQnLFxuICBkZWxldGVCYWNrd2FyZDogJ3NoaWZ0PytiYWNrc3BhY2UnLFxuICBkZWxldGVGb3J3YXJkOiAnc2hpZnQ/K2RlbGV0ZScsXG4gIGV4dGVuZEJhY2t3YXJkOiAnc2hpZnQrbGVmdCcsXG4gIGV4dGVuZEZvcndhcmQ6ICdzaGlmdCtyaWdodCcsXG4gIGl0YWxpYzogJ21vZCtpJyxcbiAgaW5zZXJ0U29mdEJyZWFrOiAnc2hpZnQrZW50ZXInLFxuICBzcGxpdEJsb2NrOiAnZW50ZXInLFxuICB1bmRvOiAnbW9kK3onLFxufVxuXG5jb25zdCBBUFBMRV9IT1RLRVlTID0ge1xuICBtb3ZlTGluZUJhY2t3YXJkOiAnb3B0K3VwJyxcbiAgbW92ZUxpbmVGb3J3YXJkOiAnb3B0K2Rvd24nLFxuICBtb3ZlV29yZEJhY2t3YXJkOiAnb3B0K2xlZnQnLFxuICBtb3ZlV29yZEZvcndhcmQ6ICdvcHQrcmlnaHQnLFxuICBkZWxldGVCYWNrd2FyZDogWydjdHJsK2JhY2tzcGFjZScsICdjdHJsK2gnXSxcbiAgZGVsZXRlRm9yd2FyZDogWydjdHJsK2RlbGV0ZScsICdjdHJsK2QnXSxcbiAgZGVsZXRlTGluZUJhY2t3YXJkOiAnY21kK3NoaWZ0PytiYWNrc3BhY2UnLFxuICBkZWxldGVMaW5lRm9yd2FyZDogWydjbWQrc2hpZnQ/K2RlbGV0ZScsICdjdHJsK2snXSxcbiAgZGVsZXRlV29yZEJhY2t3YXJkOiAnb3B0K3NoaWZ0PytiYWNrc3BhY2UnLFxuICBkZWxldGVXb3JkRm9yd2FyZDogJ29wdCtzaGlmdD8rZGVsZXRlJyxcbiAgZXh0ZW5kTGluZUJhY2t3YXJkOiAnb3B0K3NoaWZ0K3VwJyxcbiAgZXh0ZW5kTGluZUZvcndhcmQ6ICdvcHQrc2hpZnQrZG93bicsXG4gIHJlZG86ICdjbWQrc2hpZnQreicsXG4gIHRyYW5zcG9zZUNoYXJhY3RlcjogJ2N0cmwrdCcsXG59XG5cbmNvbnN0IFdJTkRPV1NfSE9US0VZUyA9IHtcbiAgZGVsZXRlV29yZEJhY2t3YXJkOiAnY3RybCtzaGlmdD8rYmFja3NwYWNlJyxcbiAgZGVsZXRlV29yZEZvcndhcmQ6ICdjdHJsK3NoaWZ0PytkZWxldGUnLFxuICByZWRvOiBbJ2N0cmwreScsICdjdHJsK3NoaWZ0K3onXSxcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBwbGF0Zm9ybS1hd2FyZSBob3RrZXkgY2hlY2tlci5cbiAqL1xuXG5jb25zdCBjcmVhdGUgPSAoa2V5OiBzdHJpbmcpID0+IHtcbiAgY29uc3QgZ2VuZXJpYyA9IEhPVEtFWVNba2V5XVxuICBjb25zdCBhcHBsZSA9IEFQUExFX0hPVEtFWVNba2V5XVxuICBjb25zdCB3aW5kb3dzID0gV0lORE9XU19IT1RLRVlTW2tleV1cbiAgY29uc3QgaXNHZW5lcmljID0gZ2VuZXJpYyAmJiBpc0tleUhvdGtleShnZW5lcmljKVxuICBjb25zdCBpc0FwcGxlID0gYXBwbGUgJiYgaXNLZXlIb3RrZXkoYXBwbGUpXG4gIGNvbnN0IGlzV2luZG93cyA9IHdpbmRvd3MgJiYgaXNLZXlIb3RrZXkod2luZG93cylcblxuICByZXR1cm4gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgaWYgKGlzR2VuZXJpYyAmJiBpc0dlbmVyaWMoZXZlbnQpKSByZXR1cm4gdHJ1ZVxuICAgIGlmIChJU19BUFBMRSAmJiBpc0FwcGxlICYmIGlzQXBwbGUoZXZlbnQpKSByZXR1cm4gdHJ1ZVxuICAgIGlmICghSVNfQVBQTEUgJiYgaXNXaW5kb3dzICYmIGlzV2luZG93cyhldmVudCkpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuLyoqXG4gKiBIb3RrZXlzLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaXNCb2xkOiBjcmVhdGUoJ2JvbGQnKSxcbiAgaXNDb21wb3NlOiBjcmVhdGUoJ2NvbXBvc2UnKSxcbiAgaXNNb3ZlQmFja3dhcmQ6IGNyZWF0ZSgnbW92ZUJhY2t3YXJkJyksXG4gIGlzTW92ZUZvcndhcmQ6IGNyZWF0ZSgnbW92ZUZvcndhcmQnKSxcbiAgaXNEZWxldGVCYWNrd2FyZDogY3JlYXRlKCdkZWxldGVCYWNrd2FyZCcpLFxuICBpc0RlbGV0ZUZvcndhcmQ6IGNyZWF0ZSgnZGVsZXRlRm9yd2FyZCcpLFxuICBpc0RlbGV0ZUxpbmVCYWNrd2FyZDogY3JlYXRlKCdkZWxldGVMaW5lQmFja3dhcmQnKSxcbiAgaXNEZWxldGVMaW5lRm9yd2FyZDogY3JlYXRlKCdkZWxldGVMaW5lRm9yd2FyZCcpLFxuICBpc0RlbGV0ZVdvcmRCYWNrd2FyZDogY3JlYXRlKCdkZWxldGVXb3JkQmFja3dhcmQnKSxcbiAgaXNEZWxldGVXb3JkRm9yd2FyZDogY3JlYXRlKCdkZWxldGVXb3JkRm9yd2FyZCcpLFxuICBpc0V4dGVuZEJhY2t3YXJkOiBjcmVhdGUoJ2V4dGVuZEJhY2t3YXJkJyksXG4gIGlzRXh0ZW5kRm9yd2FyZDogY3JlYXRlKCdleHRlbmRGb3J3YXJkJyksXG4gIGlzRXh0ZW5kTGluZUJhY2t3YXJkOiBjcmVhdGUoJ2V4dGVuZExpbmVCYWNrd2FyZCcpLFxuICBpc0V4dGVuZExpbmVGb3J3YXJkOiBjcmVhdGUoJ2V4dGVuZExpbmVGb3J3YXJkJyksXG4gIGlzSXRhbGljOiBjcmVhdGUoJ2l0YWxpYycpLFxuICBpc01vdmVMaW5lQmFja3dhcmQ6IGNyZWF0ZSgnbW92ZUxpbmVCYWNrd2FyZCcpLFxuICBpc01vdmVMaW5lRm9yd2FyZDogY3JlYXRlKCdtb3ZlTGluZUZvcndhcmQnKSxcbiAgaXNNb3ZlV29yZEJhY2t3YXJkOiBjcmVhdGUoJ21vdmVXb3JkQmFja3dhcmQnKSxcbiAgaXNNb3ZlV29yZEZvcndhcmQ6IGNyZWF0ZSgnbW92ZVdvcmRGb3J3YXJkJyksXG4gIGlzUmVkbzogY3JlYXRlKCdyZWRvJyksXG4gIGlzU29mdEJyZWFrOiBjcmVhdGUoJ2luc2VydFNvZnRCcmVhaycpLFxuICBpc1NwbGl0QmxvY2s6IGNyZWF0ZSgnc3BsaXRCbG9jaycpLFxuICBpc1RyYW5zcG9zZUNoYXJhY3RlcjogY3JlYXRlKCd0cmFuc3Bvc2VDaGFyYWN0ZXInKSxcbiAgaXNVbmRvOiBjcmVhdGUoJ3VuZG8nKSxcbn1cbiIsICJpbXBvcnQgeyBSZWZPYmplY3QgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi4vLi4vcGx1Z2luL3JlYWN0LWVkaXRvcidcbmltcG9ydCB7IGlzVHJhY2tlZE11dGF0aW9uIH0gZnJvbSAnLi4vLi4vdXRpbHMvZG9tJ1xuXG5leHBvcnQgdHlwZSBSZXN0b3JlRE9NTWFuYWdlciA9IHtcbiAgcmVnaXN0ZXJNdXRhdGlvbnM6IChtdXRhdGlvbnM6IE11dGF0aW9uUmVjb3JkW10pID0+IHZvaWRcbiAgcmVzdG9yZURPTTogKCkgPT4gdm9pZFxuICBjbGVhcjogKCkgPT4gdm9pZFxufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlUmVzdG9yZURvbU1hbmFnZXIgPSAoXG4gIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gIHJlY2VpdmVkVXNlcklucHV0OiBSZWZPYmplY3Q8Ym9vbGVhbj5cbik6IFJlc3RvcmVET01NYW5hZ2VyID0+IHtcbiAgbGV0IGJ1ZmZlcmVkTXV0YXRpb25zOiBNdXRhdGlvblJlY29yZFtdID0gW11cblxuICBjb25zdCBjbGVhciA9ICgpID0+IHtcbiAgICBidWZmZXJlZE11dGF0aW9ucyA9IFtdXG4gIH1cblxuICBjb25zdCByZWdpc3Rlck11dGF0aW9ucyA9IChtdXRhdGlvbnM6IE11dGF0aW9uUmVjb3JkW10pID0+IHtcbiAgICBpZiAoIXJlY2VpdmVkVXNlcklucHV0LmN1cnJlbnQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHRyYWNrZWRNdXRhdGlvbnMgPSBtdXRhdGlvbnMuZmlsdGVyKG11dGF0aW9uID0+XG4gICAgICBpc1RyYWNrZWRNdXRhdGlvbihlZGl0b3IsIG11dGF0aW9uLCBtdXRhdGlvbnMpXG4gICAgKVxuXG4gICAgYnVmZmVyZWRNdXRhdGlvbnMucHVzaCguLi50cmFja2VkTXV0YXRpb25zKVxuICB9XG5cbiAgZnVuY3Rpb24gcmVzdG9yZURPTSgpIHtcbiAgICBidWZmZXJlZE11dGF0aW9ucy5yZXZlcnNlKCkuZm9yRWFjaChtdXRhdGlvbiA9PiB7XG4gICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoYXJhY3RlckRhdGEnKSB7XG4gICAgICAgIG11dGF0aW9uLnRhcmdldC50ZXh0Q29udGVudCA9IG11dGF0aW9uLm9sZFZhbHVlXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBtdXRhdGlvbi5yZW1vdmVkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgbXV0YXRpb24udGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCBtdXRhdGlvbi5uZXh0U2libGluZylcbiAgICAgIH0pXG5cbiAgICAgIG11dGF0aW9uLmFkZGVkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgbXV0YXRpb24udGFyZ2V0LnJlbW92ZUNoaWxkKG5vZGUpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICAvLyBDbGVhciBidWZmZXJlZCBtdXRhdGlvbnMgdG8gZW5zdXJlIHdlIGRvbid0IHVuZG8gdGhlbSB0d2ljZVxuICAgIGNsZWFyKClcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVnaXN0ZXJNdXRhdGlvbnMsXG4gICAgcmVzdG9yZURPTSxcbiAgICBjbGVhcixcbiAgfVxufVxuIiwgImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQsIENvbXBvbmVudFR5cGUsIENvbnRleHRUeXBlLCBSZWZPYmplY3QgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEVkaXRvckNvbnRleHQgfSBmcm9tICcuLi8uLi9ob29rcy91c2Utc2xhdGUtc3RhdGljJ1xuaW1wb3J0IHsgSVNfQU5EUk9JRCB9IGZyb20gJy4uLy4uL3V0aWxzL2Vudmlyb25tZW50J1xuaW1wb3J0IHtcbiAgY3JlYXRlUmVzdG9yZURvbU1hbmFnZXIsXG4gIFJlc3RvcmVET01NYW5hZ2VyLFxufSBmcm9tICcuL3Jlc3RvcmUtZG9tLW1hbmFnZXInXG5cbmNvbnN0IE1VVEFUSU9OX09CU0VSVkVSX0NPTkZJRzogTXV0YXRpb25PYnNlcnZlckluaXQgPSB7XG4gIHN1YnRyZWU6IHRydWUsXG4gIGNoaWxkTGlzdDogdHJ1ZSxcbiAgY2hhcmFjdGVyRGF0YTogdHJ1ZSxcbiAgY2hhcmFjdGVyRGF0YU9sZFZhbHVlOiB0cnVlLFxufVxuXG50eXBlIFJlc3RvcmVET01Qcm9wcyA9IHtcbiAgcmVjZWl2ZWRVc2VySW5wdXQ6IFJlZk9iamVjdDxib29sZWFuPlxuICBub2RlOiBSZWZPYmplY3Q8SFRNTERpdkVsZW1lbnQ+XG59XG5cbi8vIFdlIGhhdmUgdG8gdXNlIGEgY2xhc3MgY29tcG9uZW50IGhlcmUgc2luY2Ugd2UgcmVseSBvbiBgZ2V0U25hcHNob3RCZWZvcmVVcGRhdGVgIHdoaWNoIGhhcyBubyBGQyBlcXVpdmFsZW50XG4vLyB0byBydW4gY29kZSBzeW5jaHJvbm91c2x5IGltbWVkaWF0ZWx5IGJlZm9yZSByZWFjdCBjb21taXRzIHRoZSBjb21wb25lbnQgdXBkYXRlIHRvIHRoZSBET00uXG5jbGFzcyBSZXN0b3JlRE9NQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50PFJlc3RvcmVET01Qcm9wcz4ge1xuICBzdGF0aWMgY29udGV4dFR5cGUgPSBFZGl0b3JDb250ZXh0XG4gIGNvbnRleHQ6IENvbnRleHRUeXBlPHR5cGVvZiBFZGl0b3JDb250ZXh0PiA9IG51bGxcblxuICBwcml2YXRlIG1hbmFnZXI6IFJlc3RvcmVET01NYW5hZ2VyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBtdXRhdGlvbk9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcblxuICBvYnNlcnZlKCkge1xuICAgIGNvbnN0IHsgbm9kZSB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghbm9kZS5jdXJyZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBhdHRhY2ggTXV0YXRpb25PYnNlcnZlciwgYG5vZGVgIGlzIHVuZGVmaW5lZCcpXG4gICAgfVxuXG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyPy5vYnNlcnZlKG5vZGUuY3VycmVudCwgTVVUQVRJT05fT0JTRVJWRVJfQ09ORklHKVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgY29uc3QgeyByZWNlaXZlZFVzZXJJbnB1dCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuY29udGV4dCFcblxuICAgIHRoaXMubWFuYWdlciA9IGNyZWF0ZVJlc3RvcmVEb21NYW5hZ2VyKGVkaXRvciwgcmVjZWl2ZWRVc2VySW5wdXQpXG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5tYW5hZ2VyLnJlZ2lzdGVyTXV0YXRpb25zKVxuXG4gICAgdGhpcy5vYnNlcnZlKClcbiAgfVxuXG4gIGdldFNuYXBzaG90QmVmb3JlVXBkYXRlKCkge1xuICAgIGNvbnN0IHBlbmRpbmdNdXRhdGlvbnMgPSB0aGlzLm11dGF0aW9uT2JzZXJ2ZXI/LnRha2VSZWNvcmRzKClcbiAgICBpZiAocGVuZGluZ011dGF0aW9ucz8ubGVuZ3RoKSB7XG4gICAgICB0aGlzLm1hbmFnZXI/LnJlZ2lzdGVyTXV0YXRpb25zKHBlbmRpbmdNdXRhdGlvbnMpXG4gICAgfVxuXG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KClcbiAgICB0aGlzLm1hbmFnZXI/LnJlc3RvcmVET00oKVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICB0aGlzLm1hbmFnZXI/LmNsZWFyKClcbiAgICB0aGlzLm9ic2VydmUoKVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KClcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlblxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBSZXN0b3JlRE9NOiBDb21wb25lbnRUeXBlPFJlc3RvcmVET01Qcm9wcz4gPSBJU19BTkRST0lEXG4gID8gUmVzdG9yZURPTUNvbXBvbmVudFxuICA6ICh7IGNoaWxkcmVuIH0pID0+IDw+e2NoaWxkcmVufTwvPlxuIiwgImltcG9ydCB7XG4gIEVkaXRvcixcbiAgTm9kZSxcbiAgT3BlcmF0aW9uLFxuICBQYXRoLFxuICBQb2ludCxcbiAgUmFuZ2UsXG4gIFRleHQsXG4gIEVsZW1lbnQsXG59IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgRURJVE9SX1RPX1BFTkRJTkdfRElGRlMgfSBmcm9tICcuL3dlYWstbWFwcydcblxuZXhwb3J0IHR5cGUgU3RyaW5nRGlmZiA9IHtcbiAgc3RhcnQ6IG51bWJlclxuICBlbmQ6IG51bWJlclxuICB0ZXh0OiBzdHJpbmdcbn1cblxuZXhwb3J0IHR5cGUgVGV4dERpZmYgPSB7XG4gIGlkOiBudW1iZXJcbiAgcGF0aDogUGF0aFxuICBkaWZmOiBTdHJpbmdEaWZmXG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciBhIHRleHQgZGlmZiB3YXMgYXBwbGllZCBpbiBhIHdheSB3ZSBjYW4gcGVyZm9ybSB0aGUgcGVuZGluZyBhY3Rpb24gb24gL1xuICogcmVjb3ZlciB0aGUgcGVuZGluZyBzZWxlY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlEaWZmU3RhdGUoZWRpdG9yOiBFZGl0b3IsIHRleHREaWZmOiBUZXh0RGlmZik6IGJvb2xlYW4ge1xuICBjb25zdCB7IHBhdGgsIGRpZmYgfSA9IHRleHREaWZmXG4gIGlmICghRWRpdG9yLmhhc1BhdGgoZWRpdG9yLCBwYXRoKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgY29uc3Qgbm9kZSA9IE5vZGUuZ2V0KGVkaXRvciwgcGF0aClcbiAgaWYgKCFUZXh0LmlzVGV4dChub2RlKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKGRpZmYuc3RhcnQgIT09IG5vZGUudGV4dC5sZW5ndGggfHwgZGlmZi50ZXh0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAoXG4gICAgICBub2RlLnRleHQuc2xpY2UoZGlmZi5zdGFydCwgZGlmZi5zdGFydCArIGRpZmYudGV4dC5sZW5ndGgpID09PSBkaWZmLnRleHRcbiAgICApXG4gIH1cblxuICBjb25zdCBuZXh0UGF0aCA9IFBhdGgubmV4dChwYXRoKVxuICBpZiAoIUVkaXRvci5oYXNQYXRoKGVkaXRvciwgbmV4dFBhdGgpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBjb25zdCBuZXh0Tm9kZSA9IE5vZGUuZ2V0KGVkaXRvciwgbmV4dFBhdGgpXG4gIHJldHVybiBUZXh0LmlzVGV4dChuZXh0Tm9kZSkgJiYgbmV4dE5vZGUudGV4dC5zdGFydHNXaXRoKGRpZmYudGV4dClcbn1cblxuZnVuY3Rpb24gYXBwbHlTdHJpbmdEaWZmKHRleHQ6IHN0cmluZywgLi4uZGlmZnM6IFN0cmluZ0RpZmZbXSkge1xuICByZXR1cm4gZGlmZnMucmVkdWNlKFxuICAgICh0ZXh0LCBkaWZmKSA9PlxuICAgICAgdGV4dC5zbGljZSgwLCBkaWZmLnN0YXJ0KSArIGRpZmYudGV4dCArIHRleHQuc2xpY2UoZGlmZi5lbmQpLFxuICAgIHRleHRcbiAgKVxufVxuXG5mdW5jdGlvbiBsb25nZXN0Q29tbW9uUHJlZml4TGVuZ3RoKHN0cjogc3RyaW5nLCBhbm90aGVyOiBzdHJpbmcpIHtcbiAgY29uc3QgbGVuZ3RoID0gTWF0aC5taW4oc3RyLmxlbmd0aCwgYW5vdGhlci5sZW5ndGgpXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHIuY2hhckF0KGkpICE9PSBhbm90aGVyLmNoYXJBdChpKSkge1xuICAgICAgcmV0dXJuIGlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbGVuZ3RoXG59XG5cbmZ1bmN0aW9uIGxvbmdlc3RDb21tb25TdWZmaXhMZW5ndGgoXG4gIHN0cjogc3RyaW5nLFxuICBhbm90aGVyOiBzdHJpbmcsXG4gIG1heDogbnVtYmVyXG4pOiBudW1iZXIge1xuICBjb25zdCBsZW5ndGggPSBNYXRoLm1pbihzdHIubGVuZ3RoLCBhbm90aGVyLmxlbmd0aCwgbWF4KVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoXG4gICAgICBzdHIuY2hhckF0KHN0ci5sZW5ndGggLSBpIC0gMSkgIT09IGFub3RoZXIuY2hhckF0KGFub3RoZXIubGVuZ3RoIC0gaSAtIDEpXG4gICAgKSB7XG4gICAgICByZXR1cm4gaVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBsZW5ndGhcbn1cblxuLyoqXG4gKiBSZW1vdmUgcmVkdW5kYW50IGNoYW5nZXMgZnJvbSB0aGUgZGlmZiBzbyB0aGF0IGl0IHNwYW5zIHRoZSBtaW5pbWFsIHBvc3NpYmxlIHJhbmdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVTdHJpbmdEaWZmKHRhcmdldFRleHQ6IHN0cmluZywgZGlmZjogU3RyaW5nRGlmZikge1xuICBjb25zdCB7IHN0YXJ0LCBlbmQsIHRleHQgfSA9IGRpZmZcbiAgY29uc3QgcmVtb3ZlZFRleHQgPSB0YXJnZXRUZXh0LnNsaWNlKHN0YXJ0LCBlbmQpXG5cbiAgY29uc3QgcHJlZml4TGVuZ3RoID0gbG9uZ2VzdENvbW1vblByZWZpeExlbmd0aChyZW1vdmVkVGV4dCwgdGV4dClcbiAgY29uc3QgbWF4ID0gTWF0aC5taW4oXG4gICAgcmVtb3ZlZFRleHQubGVuZ3RoIC0gcHJlZml4TGVuZ3RoLFxuICAgIHRleHQubGVuZ3RoIC0gcHJlZml4TGVuZ3RoXG4gIClcbiAgY29uc3Qgc3VmZml4TGVuZ3RoID0gbG9uZ2VzdENvbW1vblN1ZmZpeExlbmd0aChyZW1vdmVkVGV4dCwgdGV4dCwgbWF4KVxuXG4gIGNvbnN0IG5vcm1hbGl6ZWQ6IFN0cmluZ0RpZmYgPSB7XG4gICAgc3RhcnQ6IHN0YXJ0ICsgcHJlZml4TGVuZ3RoLFxuICAgIGVuZDogZW5kIC0gc3VmZml4TGVuZ3RoLFxuICAgIHRleHQ6IHRleHQuc2xpY2UocHJlZml4TGVuZ3RoLCB0ZXh0Lmxlbmd0aCAtIHN1ZmZpeExlbmd0aCksXG4gIH1cblxuICBpZiAobm9ybWFsaXplZC5zdGFydCA9PT0gbm9ybWFsaXplZC5lbmQgJiYgbm9ybWFsaXplZC50ZXh0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4gbm9ybWFsaXplZFxufVxuXG4vKipcbiAqIFJldHVybiBhIHN0cmluZyBkaWZmIHRoYXQgaXMgZXF1aXZhbGVudCB0byBhcHBseWluZyBiIGFmdGVyIGEgc3Bhbm5pbmcgdGhlIHJhbmdlIG9mXG4gKiBib3RoIGNoYW5nZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlU3RyaW5nRGlmZnMoXG4gIHRhcmdldFRleHQ6IHN0cmluZyxcbiAgYTogU3RyaW5nRGlmZixcbiAgYjogU3RyaW5nRGlmZlxuKTogU3RyaW5nRGlmZiB8IG51bGwge1xuICBjb25zdCBzdGFydCA9IE1hdGgubWluKGEuc3RhcnQsIGIuc3RhcnQpXG4gIGNvbnN0IG92ZXJsYXAgPSBNYXRoLm1heChcbiAgICAwLFxuICAgIE1hdGgubWluKGEuc3RhcnQgKyBhLnRleHQubGVuZ3RoLCBiLmVuZCkgLSBiLnN0YXJ0XG4gIClcblxuICBjb25zdCBhcHBsaWVkID0gYXBwbHlTdHJpbmdEaWZmKHRhcmdldFRleHQsIGEsIGIpXG4gIGNvbnN0IHNsaWNlRW5kID0gTWF0aC5tYXgoXG4gICAgYi5zdGFydCArIGIudGV4dC5sZW5ndGgsXG4gICAgYS5zdGFydCArXG4gICAgICBhLnRleHQubGVuZ3RoICtcbiAgICAgIChhLnN0YXJ0ICsgYS50ZXh0Lmxlbmd0aCA+IGIuc3RhcnQgPyBiLnRleHQubGVuZ3RoIDogMCkgLVxuICAgICAgb3ZlcmxhcFxuICApXG5cbiAgY29uc3QgdGV4dCA9IGFwcGxpZWQuc2xpY2Uoc3RhcnQsIHNsaWNlRW5kKVxuICBjb25zdCBlbmQgPSBNYXRoLm1heChhLmVuZCwgYi5lbmQgLSBhLnRleHQubGVuZ3RoICsgKGEuZW5kIC0gYS5zdGFydCkpXG4gIHJldHVybiBub3JtYWxpemVTdHJpbmdEaWZmKHRhcmdldFRleHQsIHsgc3RhcnQsIGVuZCwgdGV4dCB9KVxufVxuXG4vKipcbiAqIEdldCB0aGUgc2xhdGUgcmFuZ2UgdGhlIHRleHQgZGlmZiBzcGFucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRhcmdldFJhbmdlKHRleHREaWZmOiBUZXh0RGlmZik6IFJhbmdlIHtcbiAgY29uc3QgeyBwYXRoLCBkaWZmIH0gPSB0ZXh0RGlmZlxuICByZXR1cm4ge1xuICAgIGFuY2hvcjogeyBwYXRoLCBvZmZzZXQ6IGRpZmYuc3RhcnQgfSxcbiAgICBmb2N1czogeyBwYXRoLCBvZmZzZXQ6IGRpZmYuZW5kIH0sXG4gIH1cbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgYSAncGVuZGluZyBwb2ludCcgYS5rLmEgYSBwb2ludCBiYXNlZCBvbiB0aGUgZG9tIHN0YXRlIGJlZm9yZSBhcHBseWluZ1xuICogdGhlIHBlbmRpbmcgZGlmZnMuIFNpbmNlIHRoZSBwZW5kaW5nIGRpZmZzIG1pZ2h0IGhhdmUgYmVlbiBpbnNlcnRlZCB3aXRoIGRpZmZlcmVudFxuICogbWFya3Mgd2UgaGF2ZSB0byAnd2FsaycgdGhlIG9mZnNldCBmcm9tIHRoZSBzdGFydGluZyBwb3NpdGlvbiB0byBlbnN1cmUgd2Ugc3RpbGxcbiAqIGhhdmUgYSB2YWxpZCBwb2ludCBpbnNpZGUgdGhlIGRvY3VtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVQb2ludChlZGl0b3I6IEVkaXRvciwgcG9pbnQ6IFBvaW50KTogUG9pbnQgfCBudWxsIHtcbiAgbGV0IHsgcGF0aCwgb2Zmc2V0IH0gPSBwb2ludFxuICBpZiAoIUVkaXRvci5oYXNQYXRoKGVkaXRvciwgcGF0aCkpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgbGV0IGxlYWYgPSBOb2RlLmdldChlZGl0b3IsIHBhdGgpXG4gIGlmICghVGV4dC5pc1RleHQobGVhZikpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgY29uc3QgcGFyZW50QmxvY2sgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKSxcbiAgICBhdDogcGF0aCxcbiAgfSlcblxuICBpZiAoIXBhcmVudEJsb2NrKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHdoaWxlIChvZmZzZXQgPiBsZWFmLnRleHQubGVuZ3RoKSB7XG4gICAgY29uc3QgZW50cnkgPSBFZGl0b3IubmV4dChlZGl0b3IsIHsgYXQ6IHBhdGgsIG1hdGNoOiBUZXh0LmlzVGV4dCB9KVxuICAgIGlmICghZW50cnkgfHwgIVBhdGguaXNEZXNjZW5kYW50KGVudHJ5WzFdLCBwYXJlbnRCbG9ja1sxXSkpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgb2Zmc2V0IC09IGxlYWYudGV4dC5sZW5ndGhcbiAgICBsZWFmID0gZW50cnlbMF1cbiAgICBwYXRoID0gZW50cnlbMV1cbiAgfVxuXG4gIHJldHVybiB7IHBhdGgsIG9mZnNldCB9XG59XG5cbi8qKlxuICogTm9ybWFsaXplIGEgJ3BlbmRpbmcgc2VsZWN0aW9uJyB0byBlbnN1cmUgaXQncyB2YWxpZCBpbiB0aGUgY3VycmVudCBkb2N1bWVudCBzdGF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVJhbmdlKGVkaXRvcjogRWRpdG9yLCByYW5nZTogUmFuZ2UpOiBSYW5nZSB8IG51bGwge1xuICBjb25zdCBhbmNob3IgPSBub3JtYWxpemVQb2ludChlZGl0b3IsIHJhbmdlLmFuY2hvcilcbiAgaWYgKCFhbmNob3IpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgaWYgKFJhbmdlLmlzQ29sbGFwc2VkKHJhbmdlKSkge1xuICAgIHJldHVybiB7IGFuY2hvciwgZm9jdXM6IGFuY2hvciB9XG4gIH1cblxuICBjb25zdCBmb2N1cyA9IG5vcm1hbGl6ZVBvaW50KGVkaXRvciwgcmFuZ2UuZm9jdXMpXG4gIGlmICghZm9jdXMpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcmV0dXJuIHsgYW5jaG9yLCBmb2N1cyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1QZW5kaW5nUG9pbnQoXG4gIGVkaXRvcjogRWRpdG9yLFxuICBwb2ludDogUG9pbnQsXG4gIG9wOiBPcGVyYXRpb25cbik6IFBvaW50IHwgbnVsbCB7XG4gIGNvbnN0IHBlbmRpbmdEaWZmcyA9IEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLmdldChlZGl0b3IpXG4gIGNvbnN0IHRleHREaWZmID0gcGVuZGluZ0RpZmZzPy5maW5kKCh7IHBhdGggfSkgPT5cbiAgICBQYXRoLmVxdWFscyhwYXRoLCBwb2ludC5wYXRoKVxuICApXG5cbiAgaWYgKCF0ZXh0RGlmZiB8fCBwb2ludC5vZmZzZXQgPD0gdGV4dERpZmYuZGlmZi5zdGFydCkge1xuICAgIHJldHVybiBQb2ludC50cmFuc2Zvcm0ocG9pbnQsIG9wLCB7IGFmZmluaXR5OiAnYmFja3dhcmQnIH0pXG4gIH1cblxuICBjb25zdCB7IGRpZmYgfSA9IHRleHREaWZmXG4gIC8vIFBvaW50IHJlZmVyZW5jZXMgbG9jYXRpb24gaW5zaWRlIHRoZSBkaWZmID0+IHRyYW5zZm9ybSB0aGUgcG9pbnQgYmFzZWQgb24gdGhlIGxvY2F0aW9uXG4gIC8vIHRoZSBkaWZmIHdpbGwgYmUgYXBwbGllZCB0byBhbmQgYWRkIHRoZSBvZmZzZXQgaW5zaWRlIHRoZSBkaWZmLlxuICBpZiAocG9pbnQub2Zmc2V0IDw9IGRpZmYuc3RhcnQgKyBkaWZmLnRleHQubGVuZ3RoKSB7XG4gICAgY29uc3QgYW5jaG9yID0geyBwYXRoOiBwb2ludC5wYXRoLCBvZmZzZXQ6IGRpZmYuc3RhcnQgfVxuICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gUG9pbnQudHJhbnNmb3JtKGFuY2hvciwgb3AsIHtcbiAgICAgIGFmZmluaXR5OiAnYmFja3dhcmQnLFxuICAgIH0pXG5cbiAgICBpZiAoIXRyYW5zZm9ybWVkKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiB0cmFuc2Zvcm1lZC5wYXRoLFxuICAgICAgb2Zmc2V0OiB0cmFuc2Zvcm1lZC5vZmZzZXQgKyBwb2ludC5vZmZzZXQgLSBkaWZmLnN0YXJ0LFxuICAgIH1cbiAgfVxuXG4gIC8vIFBvaW50IHJlZmVyZW5jZXMgbG9jYXRpb24gYWZ0ZXIgdGhlIGRpZmZcbiAgY29uc3QgYW5jaG9yID0ge1xuICAgIHBhdGg6IHBvaW50LnBhdGgsXG4gICAgb2Zmc2V0OiBwb2ludC5vZmZzZXQgLSBkaWZmLnRleHQubGVuZ3RoICsgZGlmZi5lbmQgLSBkaWZmLnN0YXJ0LFxuICB9XG4gIGNvbnN0IHRyYW5zZm9ybWVkID0gUG9pbnQudHJhbnNmb3JtKGFuY2hvciwgb3AsIHtcbiAgICBhZmZpbml0eTogJ2JhY2t3YXJkJyxcbiAgfSlcbiAgaWYgKCF0cmFuc2Zvcm1lZCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBpZiAoXG4gICAgb3AudHlwZSA9PT0gJ3NwbGl0X25vZGUnICYmXG4gICAgUGF0aC5lcXVhbHMob3AucGF0aCwgcG9pbnQucGF0aCkgJiZcbiAgICBhbmNob3Iub2Zmc2V0IDwgb3AucG9zaXRpb24gJiZcbiAgICBkaWZmLnN0YXJ0IDwgb3AucG9zaXRpb25cbiAgKSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybWVkXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBhdGg6IHRyYW5zZm9ybWVkLnBhdGgsXG4gICAgb2Zmc2V0OiB0cmFuc2Zvcm1lZC5vZmZzZXQgKyBkaWZmLnRleHQubGVuZ3RoIC0gZGlmZi5lbmQgKyBkaWZmLnN0YXJ0LFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1QZW5kaW5nUmFuZ2UoXG4gIGVkaXRvcjogRWRpdG9yLFxuICByYW5nZTogUmFuZ2UsXG4gIG9wOiBPcGVyYXRpb25cbik6IFJhbmdlIHwgbnVsbCB7XG4gIGNvbnN0IGFuY2hvciA9IHRyYW5zZm9ybVBlbmRpbmdQb2ludChlZGl0b3IsIHJhbmdlLmFuY2hvciwgb3ApXG4gIGlmICghYW5jaG9yKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGlmIChSYW5nZS5pc0NvbGxhcHNlZChyYW5nZSkpIHtcbiAgICByZXR1cm4geyBhbmNob3IsIGZvY3VzOiBhbmNob3IgfVxuICB9XG5cbiAgY29uc3QgZm9jdXMgPSB0cmFuc2Zvcm1QZW5kaW5nUG9pbnQoZWRpdG9yLCByYW5nZS5mb2N1cywgb3ApXG4gIGlmICghZm9jdXMpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcmV0dXJuIHsgYW5jaG9yLCBmb2N1cyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1UZXh0RGlmZihcbiAgdGV4dERpZmY6IFRleHREaWZmLFxuICBvcDogT3BlcmF0aW9uXG4pOiBUZXh0RGlmZiB8IG51bGwge1xuICBjb25zdCB7IHBhdGgsIGRpZmYsIGlkIH0gPSB0ZXh0RGlmZlxuXG4gIHN3aXRjaCAob3AudHlwZSkge1xuICAgIGNhc2UgJ2luc2VydF90ZXh0Jzoge1xuICAgICAgaWYgKCFQYXRoLmVxdWFscyhvcC5wYXRoLCBwYXRoKSB8fCBvcC5vZmZzZXQgPj0gZGlmZi5lbmQpIHtcbiAgICAgICAgcmV0dXJuIHRleHREaWZmXG4gICAgICB9XG5cbiAgICAgIGlmIChvcC5vZmZzZXQgPD0gZGlmZi5zdGFydCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRpZmY6IHtcbiAgICAgICAgICAgIHN0YXJ0OiBvcC50ZXh0Lmxlbmd0aCArIGRpZmYuc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IG9wLnRleHQubGVuZ3RoICsgZGlmZi5lbmQsXG4gICAgICAgICAgICB0ZXh0OiBkaWZmLnRleHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwYXRoLFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRpZmY6IHtcbiAgICAgICAgICBzdGFydDogZGlmZi5zdGFydCxcbiAgICAgICAgICBlbmQ6IGRpZmYuZW5kICsgb3AudGV4dC5sZW5ndGgsXG4gICAgICAgICAgdGV4dDogZGlmZi50ZXh0LFxuICAgICAgICB9LFxuICAgICAgICBpZCxcbiAgICAgICAgcGF0aCxcbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlX3RleHQnOiB7XG4gICAgICBpZiAoIVBhdGguZXF1YWxzKG9wLnBhdGgsIHBhdGgpIHx8IG9wLm9mZnNldCA+PSBkaWZmLmVuZCkge1xuICAgICAgICByZXR1cm4gdGV4dERpZmZcbiAgICAgIH1cblxuICAgICAgaWYgKG9wLm9mZnNldCArIG9wLnRleHQubGVuZ3RoIDw9IGRpZmYuc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkaWZmOiB7XG4gICAgICAgICAgICBzdGFydDogZGlmZi5zdGFydCAtIG9wLnRleHQubGVuZ3RoLFxuICAgICAgICAgICAgZW5kOiBkaWZmLmVuZCAtIG9wLnRleHQubGVuZ3RoLFxuICAgICAgICAgICAgdGV4dDogZGlmZi50ZXh0LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkaWZmOiB7XG4gICAgICAgICAgc3RhcnQ6IGRpZmYuc3RhcnQsXG4gICAgICAgICAgZW5kOiBkaWZmLmVuZCAtIG9wLnRleHQubGVuZ3RoLFxuICAgICAgICAgIHRleHQ6IGRpZmYudGV4dCxcbiAgICAgICAgfSxcbiAgICAgICAgaWQsXG4gICAgICAgIHBhdGgsXG4gICAgICB9XG4gICAgfVxuICAgIGNhc2UgJ3NwbGl0X25vZGUnOiB7XG4gICAgICBpZiAoIVBhdGguZXF1YWxzKG9wLnBhdGgsIHBhdGgpIHx8IG9wLnBvc2l0aW9uID49IGRpZmYuZW5kKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGlmZixcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwYXRoOiBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcCwgeyBhZmZpbml0eTogJ2JhY2t3YXJkJyB9KSEsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG9wLnBvc2l0aW9uID4gZGlmZi5zdGFydCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRpZmY6IHtcbiAgICAgICAgICAgIHN0YXJ0OiBkaWZmLnN0YXJ0LFxuICAgICAgICAgICAgZW5kOiBNYXRoLm1pbihvcC5wb3NpdGlvbiwgZGlmZi5lbmQpLFxuICAgICAgICAgICAgdGV4dDogZGlmZi50ZXh0LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkaWZmOiB7XG4gICAgICAgICAgc3RhcnQ6IGRpZmYuc3RhcnQgLSBvcC5wb3NpdGlvbixcbiAgICAgICAgICBlbmQ6IGRpZmYuZW5kIC0gb3AucG9zaXRpb24sXG4gICAgICAgICAgdGV4dDogZGlmZi50ZXh0LFxuICAgICAgICB9LFxuICAgICAgICBpZCxcbiAgICAgICAgcGF0aDogUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3AsIHsgYWZmaW5pdHk6ICdmb3J3YXJkJyB9KSEsXG4gICAgICB9XG4gICAgfVxuICAgIGNhc2UgJ21lcmdlX25vZGUnOiB7XG4gICAgICBpZiAoIVBhdGguZXF1YWxzKG9wLnBhdGgsIHBhdGgpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGlmZixcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwYXRoOiBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcCkhLFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRpZmY6IHtcbiAgICAgICAgICBzdGFydDogZGlmZi5zdGFydCArIG9wLnBvc2l0aW9uLFxuICAgICAgICAgIGVuZDogZGlmZi5lbmQgKyBvcC5wb3NpdGlvbixcbiAgICAgICAgICB0ZXh0OiBkaWZmLnRleHQsXG4gICAgICAgIH0sXG4gICAgICAgIGlkLFxuICAgICAgICBwYXRoOiBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcCkhLFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG5ld1BhdGggPSBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcClcbiAgaWYgKCFuZXdQYXRoKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZGlmZixcbiAgICBwYXRoOiBuZXdQYXRoLFxuICAgIGlkLFxuICB9XG59XG4iLCAiaW1wb3J0IHsgRGVib3VuY2VkRnVuYyB9IGZyb20gJ2xvZGFzaCdcbmltcG9ydCB7IEVkaXRvciwgTm9kZSwgUGF0aCwgUG9pbnQsIFJhbmdlLCBUZXh0LCBUcmFuc2Zvcm1zIH0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4uLy4uL3BsdWdpbi9yZWFjdC1lZGl0b3InXG5pbXBvcnQge1xuICBtZXJnZVN0cmluZ0RpZmZzLFxuICBub3JtYWxpemVQb2ludCxcbiAgbm9ybWFsaXplUmFuZ2UsXG4gIG5vcm1hbGl6ZVN0cmluZ0RpZmYsXG4gIFN0cmluZ0RpZmYsXG4gIHRhcmdldFJhbmdlLFxuICBUZXh0RGlmZixcbiAgdmVyaWZ5RGlmZlN0YXRlLFxufSBmcm9tICcuLi8uLi91dGlscy9kaWZmLXRleHQnXG5pbXBvcnQgeyBpc0RPTVNlbGVjdGlvbiwgaXNUcmFja2VkTXV0YXRpb24gfSBmcm9tICcuLi8uLi91dGlscy9kb20nXG5pbXBvcnQge1xuICBFRElUT1JfVE9fRk9SQ0VfUkVOREVSLFxuICBFRElUT1JfVE9fUEVORElOR19BQ1RJT04sXG4gIEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLFxuICBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MsXG4gIEVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTixcbiAgRURJVE9SX1RPX1BMQUNFSE9MREVSX0VMRU1FTlQsXG4gIEVESVRPUl9UT19VU0VSX01BUktTLFxuICBJU19DT01QT1NJTkcsXG59IGZyb20gJy4uLy4uL3V0aWxzL3dlYWstbWFwcydcblxuZXhwb3J0IHR5cGUgQWN0aW9uID0geyBhdD86IFBvaW50IHwgUmFuZ2U7IHJ1bjogKCkgPT4gdm9pZCB9XG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9kcmFmdC1qcy9ibG9iL21haW4vc3JjL2NvbXBvbmVudC9oYW5kbGVycy9jb21wb3NpdGlvbi9EcmFmdEVkaXRvckNvbXBvc2l0aW9uSGFuZGxlci5qcyNMNDFcbi8vIFdoZW4gdXNpbmcga2V5Ym9hcmQgRW5nbGlzaCBhc3NvY2lhdGlvbiBmdW5jdGlvbiwgY29ucG9zaXRpb25FbmQgdHJpZ2dlcmVkIHRvbyBmYXN0LCByZXN1bHRpbmcgaW4gYWZ0ZXIgYGluc2VydFRleHRgIHN0aWxsIG1haW50YWluIGFzc29jaWF0aW9uIHN0YXRlLlxuY29uc3QgUkVTT0xWRV9ERUxBWSA9IDI1XG5cbi8vIFRpbWUgd2l0aCBubyB1c2VyIGludGVyYWN0aW9uIGJlZm9yZSB0aGUgY3VycmVudCB1c2VyIGFjdGlvbiBpcyBjb25zaWRlcmVkIGFzIGRvbmUuXG5jb25zdCBGTFVTSF9ERUxBWSA9IDIwMFxuXG4vLyBSZXBsYWNlIHdpdGggYGNvbnN0IGRlYnVnID0gY29uc29sZS5sb2dgIHRvIGRlYnVnXG5jb25zdCBkZWJ1ZyA9ICguLi5fOiB1bmtub3duW10pID0+IHt9XG5cbmV4cG9ydCB0eXBlIENyZWF0ZUFuZHJvaWRJbnB1dE1hbmFnZXJPcHRpb25zID0ge1xuICBlZGl0b3I6IFJlYWN0RWRpdG9yXG5cbiAgc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZTogRGVib3VuY2VkRnVuYzwoKSA9PiB2b2lkPlxuICBvbkRPTVNlbGVjdGlvbkNoYW5nZTogRGVib3VuY2VkRnVuYzwoKSA9PiB2b2lkPlxufVxuXG5leHBvcnQgdHlwZSBBbmRyb2lkSW5wdXRNYW5hZ2VyID0ge1xuICBmbHVzaDogKCkgPT4gdm9pZFxuICBzY2hlZHVsZUZsdXNoOiAoKSA9PiB2b2lkXG5cbiAgaGFzUGVuZGluZ0RpZmZzOiAoKSA9PiBib29sZWFuXG4gIGhhc1BlbmRpbmdBY3Rpb246ICgpID0+IGJvb2xlYW5cbiAgaGFzUGVuZGluZ0NoYW5nZXM6ICgpID0+IGJvb2xlYW5cbiAgaXNGbHVzaGluZzogKCkgPT4gYm9vbGVhbiB8ICdhY3Rpb24nXG5cbiAgaGFuZGxlVXNlclNlbGVjdDogKHJhbmdlOiBSYW5nZSB8IG51bGwpID0+IHZvaWRcbiAgaGFuZGxlQ29tcG9zaXRpb25FbmQ6IChldmVudDogUmVhY3QuQ29tcG9zaXRpb25FdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHZvaWRcbiAgaGFuZGxlQ29tcG9zaXRpb25TdGFydDogKFxuICAgIGV2ZW50OiBSZWFjdC5Db21wb3NpdGlvbkV2ZW50PEhUTUxEaXZFbGVtZW50PlxuICApID0+IHZvaWRcbiAgaGFuZGxlRE9NQmVmb3JlSW5wdXQ6IChldmVudDogSW5wdXRFdmVudCkgPT4gdm9pZFxuICBoYW5kbGVLZXlEb3duOiAoZXZlbnQ6IFJlYWN0LktleWJvYXJkRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB2b2lkXG5cbiAgaGFuZGxlRG9tTXV0YXRpb25zOiAobXV0YXRpb25zOiBNdXRhdGlvblJlY29yZFtdKSA9PiB2b2lkXG4gIGhhbmRsZUlucHV0OiAoKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBbmRyb2lkSW5wdXRNYW5hZ2VyKHtcbiAgZWRpdG9yLFxuICBzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlLFxuICBvbkRPTVNlbGVjdGlvbkNoYW5nZSxcbn06IENyZWF0ZUFuZHJvaWRJbnB1dE1hbmFnZXJPcHRpb25zKTogQW5kcm9pZElucHV0TWFuYWdlciB7XG4gIGxldCBmbHVzaGluZzogJ2FjdGlvbicgfCBib29sZWFuID0gZmFsc2VcbiAgbGV0IGNvbXBvc2l0aW9uRW5kVGltZW91dElkOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsXG4gIGxldCBmbHVzaFRpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbFxuICBsZXQgYWN0aW9uVGltZW91dElkOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsXG5cbiAgbGV0IGlkQ291bnRlciA9IDBcbiAgbGV0IGluc2VydFBvc2l0aW9uSGludDogU3RyaW5nRGlmZiB8IG51bGwgfCBmYWxzZSA9IGZhbHNlXG5cbiAgY29uc3QgYXBwbHlQZW5kaW5nU2VsZWN0aW9uID0gKCkgPT4ge1xuICAgIGNvbnN0IHBlbmRpbmdTZWxlY3Rpb24gPSBFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04uZ2V0KGVkaXRvcilcbiAgICBFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04uZGVsZXRlKGVkaXRvcilcblxuICAgIGlmIChwZW5kaW5nU2VsZWN0aW9uKSB7XG4gICAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplUmFuZ2UoZWRpdG9yLCBwZW5kaW5nU2VsZWN0aW9uKVxuXG4gICAgICBkZWJ1ZygnYXBwbHkgcGVuZGluZyBzZWxlY3Rpb24nLCBwZW5kaW5nU2VsZWN0aW9uLCBub3JtYWxpemVkKVxuXG4gICAgICBpZiAobm9ybWFsaXplZCAmJiAoIXNlbGVjdGlvbiB8fCAhUmFuZ2UuZXF1YWxzKG5vcm1hbGl6ZWQsIHNlbGVjdGlvbikpKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgbm9ybWFsaXplZClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBwZXJmb3JtQWN0aW9uID0gKCkgPT4ge1xuICAgIGNvbnN0IGFjdGlvbiA9IEVESVRPUl9UT19QRU5ESU5HX0FDVElPTi5nZXQoZWRpdG9yKVxuICAgIEVESVRPUl9UT19QRU5ESU5HX0FDVElPTi5kZWxldGUoZWRpdG9yKVxuICAgIGlmICghYWN0aW9uKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoYWN0aW9uLmF0KSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBQb2ludC5pc1BvaW50KGFjdGlvbi5hdClcbiAgICAgICAgPyBub3JtYWxpemVQb2ludChlZGl0b3IsIGFjdGlvbi5hdClcbiAgICAgICAgOiBub3JtYWxpemVSYW5nZShlZGl0b3IsIGFjdGlvbi5hdClcblxuICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhcmdldFJhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgdGFyZ2V0KVxuICAgICAgaWYgKCFlZGl0b3Iuc2VsZWN0aW9uIHx8ICFSYW5nZS5lcXVhbHMoZWRpdG9yLnNlbGVjdGlvbiwgdGFyZ2V0UmFuZ2UpKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgdGFyZ2V0KVxuICAgICAgfVxuICAgIH1cblxuICAgIGFjdGlvbi5ydW4oKVxuICB9XG5cbiAgY29uc3QgZmx1c2ggPSAoKSA9PiB7XG4gICAgaWYgKGZsdXNoVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQoZmx1c2hUaW1lb3V0SWQpXG4gICAgICBmbHVzaFRpbWVvdXRJZCA9IG51bGxcbiAgICB9XG5cbiAgICBpZiAoYWN0aW9uVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQoYWN0aW9uVGltZW91dElkKVxuICAgICAgYWN0aW9uVGltZW91dElkID0gbnVsbFxuICAgIH1cblxuICAgIGlmICghaGFzUGVuZGluZ0RpZmZzKCkgJiYgIWhhc1BlbmRpbmdBY3Rpb24oKSkge1xuICAgICAgYXBwbHlQZW5kaW5nU2VsZWN0aW9uKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICghZmx1c2hpbmcpIHtcbiAgICAgIGZsdXNoaW5nID0gdHJ1ZVxuICAgICAgc2V0VGltZW91dCgoKSA9PiAoZmx1c2hpbmcgPSBmYWxzZSkpXG4gICAgfVxuXG4gICAgaWYgKGhhc1BlbmRpbmdBY3Rpb24oKSkge1xuICAgICAgZmx1c2hpbmcgPSAnYWN0aW9uJ1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGlvblJlZiA9XG4gICAgICBlZGl0b3Iuc2VsZWN0aW9uICYmXG4gICAgICBFZGl0b3IucmFuZ2VSZWYoZWRpdG9yLCBlZGl0b3Iuc2VsZWN0aW9uLCB7IGFmZmluaXR5OiAnZm9yd2FyZCcgfSlcbiAgICBFRElUT1JfVE9fVVNFUl9NQVJLUy5zZXQoZWRpdG9yLCBlZGl0b3IubWFya3MpXG5cbiAgICBkZWJ1ZyhcbiAgICAgICdmbHVzaCcsXG4gICAgICBFRElUT1JfVE9fUEVORElOR19BQ1RJT04uZ2V0KGVkaXRvciksXG4gICAgICBFRElUT1JfVE9fUEVORElOR19ESUZGUy5nZXQoZWRpdG9yKVxuICAgIClcblxuICAgIGxldCBzY2hlZHVsZVNlbGVjdGlvbkNoYW5nZSA9ICEhRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuZ2V0KGVkaXRvcik/Lmxlbmd0aFxuXG4gICAgbGV0IGRpZmY6IFRleHREaWZmIHwgdW5kZWZpbmVkXG4gICAgd2hpbGUgKChkaWZmID0gRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuZ2V0KGVkaXRvcik/LlswXSkpIHtcbiAgICAgIGNvbnN0IHBlbmRpbmdNYXJrcyA9IEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUy5nZXQoZWRpdG9yKVxuXG4gICAgICBpZiAocGVuZGluZ01hcmtzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLmRlbGV0ZShlZGl0b3IpXG4gICAgICAgIGVkaXRvci5tYXJrcyA9IHBlbmRpbmdNYXJrc1xuICAgICAgfVxuXG4gICAgICBpZiAocGVuZGluZ01hcmtzICYmIGluc2VydFBvc2l0aW9uSGludCA9PT0gZmFsc2UpIHtcbiAgICAgICAgaW5zZXJ0UG9zaXRpb25IaW50ID0gbnVsbFxuICAgICAgICBkZWJ1ZygnaW5zZXJ0IGFmdGVyIG1hcmsgcGxhY2Vob2xkZXInKVxuICAgICAgfVxuXG4gICAgICBjb25zdCByYW5nZSA9IHRhcmdldFJhbmdlKGRpZmYpXG4gICAgICBpZiAoIWVkaXRvci5zZWxlY3Rpb24gfHwgIVJhbmdlLmVxdWFscyhlZGl0b3Iuc2VsZWN0aW9uLCByYW5nZSkpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCByYW5nZSlcbiAgICAgIH1cblxuICAgICAgaWYgKGRpZmYuZGlmZi50ZXh0KSB7XG4gICAgICAgIEVkaXRvci5pbnNlcnRUZXh0KGVkaXRvciwgZGlmZi5kaWZmLnRleHQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yKVxuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgZGlmZiBvbmx5IGFmdGVyIHdlIGhhdmUgYXBwbGllZCBpdCB0byBhY2NvdW50IGZvciBpdCB3aGVuIHRyYW5zZm9ybWluZ1xuICAgICAgLy8gcGVuZGluZyByYW5nZXMuXG4gICAgICBFRElUT1JfVE9fUEVORElOR19ESUZGUy5zZXQoXG4gICAgICAgIGVkaXRvcixcbiAgICAgICAgRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuZ2V0KGVkaXRvcik/LmZpbHRlcihcbiAgICAgICAgICAoeyBpZCB9KSA9PiBpZCAhPT0gZGlmZiEuaWRcbiAgICAgICAgKSFcbiAgICAgIClcblxuICAgICAgaWYgKCF2ZXJpZnlEaWZmU3RhdGUoZWRpdG9yLCBkaWZmKSkge1xuICAgICAgICBkZWJ1ZygnaW52YWxpZCBkaWZmIHN0YXRlJylcbiAgICAgICAgc2NoZWR1bGVTZWxlY3Rpb25DaGFuZ2UgPSBmYWxzZVxuICAgICAgICBFRElUT1JfVE9fUEVORElOR19BQ1RJT04uZGVsZXRlKGVkaXRvcilcbiAgICAgICAgRURJVE9SX1RPX1VTRVJfTUFSS1MuZGVsZXRlKGVkaXRvcilcbiAgICAgICAgZmx1c2hpbmcgPSAnYWN0aW9uJ1xuXG4gICAgICAgIC8vIEVuc3VyZSB3ZSBkb24ndCByZXN0b3JlIHRoZSBwZW5kaW5nIHVzZXIgKGRvbSkgc2VsZWN0aW9uXG4gICAgICAgIC8vIHNpbmNlIHRoZSBkb2N1bWVudCBhbmQgZG9tIHN0YXRlIGRvIG5vdCBtYXRjaC5cbiAgICAgICAgRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OLmRlbGV0ZShlZGl0b3IpXG4gICAgICAgIHNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2UuY2FuY2VsKClcbiAgICAgICAgb25ET01TZWxlY3Rpb25DaGFuZ2UuY2FuY2VsKClcbiAgICAgICAgc2VsZWN0aW9uUmVmPy51bnJlZigpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZWN0aW9uID0gc2VsZWN0aW9uUmVmPy51bnJlZigpXG4gICAgaWYgKFxuICAgICAgc2VsZWN0aW9uICYmXG4gICAgICAhRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OLmdldChlZGl0b3IpICYmXG4gICAgICAoIWVkaXRvci5zZWxlY3Rpb24gfHwgIVJhbmdlLmVxdWFscyhzZWxlY3Rpb24sIGVkaXRvci5zZWxlY3Rpb24pKVxuICAgICkge1xuICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBzZWxlY3Rpb24pXG4gICAgfVxuXG4gICAgaWYgKGhhc1BlbmRpbmdBY3Rpb24oKSkge1xuICAgICAgcGVyZm9ybUFjdGlvbigpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBDT01QQVQ6IFRoZSBzZWxlY3Rpb25DaGFuZ2UgZXZlbnQgaXMgZmlyZWQgYWZ0ZXIgdGhlIGFjdGlvbiBpcyBwZXJmb3JtZWQsXG4gICAgLy8gc28gd2UgaGF2ZSB0byBtYW51YWxseSBzY2hlZHVsZSBpdCB0byBlbnN1cmUgd2UgZG9uJ3QgJ3Rocm93IGF3YXknIHRoZSBzZWxlY3Rpb25cbiAgICAvLyB3aGlsZSByZW5kZXJpbmcgaWYgd2UgaGF2ZSBwZW5kaW5nIGNoYW5nZXMuXG4gICAgaWYgKHNjaGVkdWxlU2VsZWN0aW9uQ2hhbmdlKSB7XG4gICAgICBkZWJ1Zygnc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZSBwZW5kaW5nIGNoYW5nZXMnKVxuICAgICAgc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZSgpXG4gICAgfVxuXG4gICAgc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZS5mbHVzaCgpXG4gICAgb25ET01TZWxlY3Rpb25DaGFuZ2UuZmx1c2goKVxuXG4gICAgYXBwbHlQZW5kaW5nU2VsZWN0aW9uKClcblxuICAgIGNvbnN0IHVzZXJNYXJrcyA9IEVESVRPUl9UT19VU0VSX01BUktTLmdldChlZGl0b3IpXG4gICAgRURJVE9SX1RPX1VTRVJfTUFSS1MuZGVsZXRlKGVkaXRvcilcbiAgICBpZiAodXNlck1hcmtzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGVkaXRvci5tYXJrcyA9IHVzZXJNYXJrc1xuICAgICAgZWRpdG9yLm9uQ2hhbmdlKClcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVDb21wb3NpdGlvbkVuZCA9IChcbiAgICBfZXZlbnQ6IFJlYWN0LkNvbXBvc2l0aW9uRXZlbnQ8SFRNTERpdkVsZW1lbnQ+XG4gICkgPT4ge1xuICAgIGlmIChjb21wb3NpdGlvbkVuZFRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGNvbXBvc2l0aW9uRW5kVGltZW91dElkKVxuICAgIH1cblxuICAgIGNvbXBvc2l0aW9uRW5kVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBJU19DT01QT1NJTkcuc2V0KGVkaXRvciwgZmFsc2UpXG4gICAgICBmbHVzaCgpXG4gICAgfSwgUkVTT0xWRV9ERUxBWSlcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUNvbXBvc2l0aW9uU3RhcnQgPSAoXG4gICAgX2V2ZW50OiBSZWFjdC5Db21wb3NpdGlvbkV2ZW50PEhUTUxEaXZFbGVtZW50PlxuICApID0+IHtcbiAgICBkZWJ1ZygnY29tcG9zaXRpb24gc3RhcnQnKVxuXG4gICAgSVNfQ09NUE9TSU5HLnNldChlZGl0b3IsIHRydWUpXG5cbiAgICBpZiAoY29tcG9zaXRpb25FbmRUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChjb21wb3NpdGlvbkVuZFRpbWVvdXRJZClcbiAgICAgIGNvbXBvc2l0aW9uRW5kVGltZW91dElkID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHVwZGF0ZVBsYWNlaG9sZGVyVmlzaWJpbGl0eSA9IChmb3JjZUhpZGUgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHBsYWNlaG9sZGVyRWxlbWVudCA9IEVESVRPUl9UT19QTEFDRUhPTERFUl9FTEVNRU5ULmdldChlZGl0b3IpXG4gICAgaWYgKCFwbGFjZWhvbGRlckVsZW1lbnQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChoYXNQZW5kaW5nRGlmZnMoKSB8fCBmb3JjZUhpZGUpIHtcbiAgICAgIHBsYWNlaG9sZGVyRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBwbGFjZWhvbGRlckVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKVxuICB9XG5cbiAgY29uc3Qgc3RvcmVEaWZmID0gKHBhdGg6IFBhdGgsIGRpZmY6IFN0cmluZ0RpZmYpID0+IHtcbiAgICBkZWJ1Zygnc3RvcmVEaWZmJywgcGF0aCwgZGlmZilcblxuICAgIGNvbnN0IHBlbmRpbmdEaWZmcyA9IEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLmdldChlZGl0b3IpID8/IFtdXG4gICAgRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuc2V0KGVkaXRvciwgcGVuZGluZ0RpZmZzKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gTm9kZS5sZWFmKGVkaXRvciwgcGF0aClcbiAgICBjb25zdCBpZHggPSBwZW5kaW5nRGlmZnMuZmluZEluZGV4KGNoYW5nZSA9PiBQYXRoLmVxdWFscyhjaGFuZ2UucGF0aCwgcGF0aCkpXG4gICAgaWYgKGlkeCA8IDApIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVTdHJpbmdEaWZmKHRhcmdldC50ZXh0LCBkaWZmKVxuICAgICAgaWYgKG5vcm1hbGl6ZWQpIHtcbiAgICAgICAgcGVuZGluZ0RpZmZzLnB1c2goeyBwYXRoLCBkaWZmLCBpZDogaWRDb3VudGVyKysgfSlcbiAgICAgIH1cblxuICAgICAgdXBkYXRlUGxhY2Vob2xkZXJWaXNpYmlsaXR5KClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IG1lcmdlZCA9IG1lcmdlU3RyaW5nRGlmZnModGFyZ2V0LnRleHQsIHBlbmRpbmdEaWZmc1tpZHhdLmRpZmYsIGRpZmYpXG4gICAgaWYgKCFtZXJnZWQpIHtcbiAgICAgIHBlbmRpbmdEaWZmcy5zcGxpY2UoaWR4LCAxKVxuICAgICAgdXBkYXRlUGxhY2Vob2xkZXJWaXNpYmlsaXR5KClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHBlbmRpbmdEaWZmc1tpZHhdID0ge1xuICAgICAgLi4ucGVuZGluZ0RpZmZzW2lkeF0sXG4gICAgICBkaWZmOiBtZXJnZWQsXG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc2NoZWR1bGVBY3Rpb24gPSAoXG4gICAgcnVuOiAoKSA9PiB2b2lkLFxuICAgIHsgYXQgfTogeyBhdD86IFBvaW50IHwgUmFuZ2UgfSA9IHt9XG4gICk6IHZvaWQgPT4ge1xuICAgIGluc2VydFBvc2l0aW9uSGludCA9IGZhbHNlXG4gICAgZGVidWcoJ3NjaGVkdWxlQWN0aW9uJywgeyBhdCwgcnVuIH0pXG5cbiAgICBFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04uZGVsZXRlKGVkaXRvcilcbiAgICBzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlLmNhbmNlbCgpXG4gICAgb25ET01TZWxlY3Rpb25DaGFuZ2UuY2FuY2VsKClcblxuICAgIGlmIChoYXNQZW5kaW5nQWN0aW9uKCkpIHtcbiAgICAgIGZsdXNoKClcbiAgICB9XG5cbiAgICBFRElUT1JfVE9fUEVORElOR19BQ1RJT04uc2V0KGVkaXRvciwgeyBhdCwgcnVuIH0pXG5cbiAgICAvLyBDT01QQVQ6IFdoZW4gZGVsZXRpbmcgYmVmb3JlIGEgbm9uLWNvbnRlbnRlZGl0YWJsZSBlbGVtZW50IGNocm9tZSBvbmx5IGZpcmVzIGEgYmVmb3JlaW5wdXQsXG4gICAgLy8gKG5vIGlucHV0KSBhbmQgZG9lc24ndCBwZXJmb3JtIGFueSBkb20gbXV0YXRpb25zLiBXaXRob3V0IGEgZmx1c2ggdGltZW91dCB3ZSB3b3VsZCBuZXZlciBmbHVzaFxuICAgIC8vIGluIHRoaXMgY2FzZSBhbmQgdGh1cyBuZXZlciBhY3R1YWxseSBwZXJmb3JtIHRoZSBhY3Rpb24uXG4gICAgYWN0aW9uVGltZW91dElkID0gc2V0VGltZW91dChmbHVzaClcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZURPTUJlZm9yZUlucHV0ID0gKGV2ZW50OiBJbnB1dEV2ZW50KTogdm9pZCA9PiB7XG4gICAgaWYgKGZsdXNoVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQoZmx1c2hUaW1lb3V0SWQpXG4gICAgICBmbHVzaFRpbWVvdXRJZCA9IG51bGxcbiAgICB9XG5cbiAgICBjb25zdCB7IGlucHV0VHlwZTogdHlwZSB9ID0gZXZlbnRcbiAgICBsZXQgdGFyZ2V0UmFuZ2U6IFJhbmdlIHwgbnVsbCA9IG51bGxcbiAgICBjb25zdCBkYXRhID0gKGV2ZW50IGFzIGFueSkuZGF0YVRyYW5zZmVyIHx8IGV2ZW50LmRhdGEgfHwgdW5kZWZpbmVkXG5cbiAgICBpZiAoXG4gICAgICBpbnNlcnRQb3NpdGlvbkhpbnQgIT09IGZhbHNlICYmXG4gICAgICB0eXBlICE9PSAnaW5zZXJ0VGV4dCcgJiZcbiAgICAgIHR5cGUgIT09ICdpbnNlcnRDb21wb3NpdGlvblRleHQnXG4gICAgKSB7XG4gICAgICBpbnNlcnRQb3NpdGlvbkhpbnQgPSBmYWxzZVxuICAgIH1cblxuICAgIGxldCBbbmF0aXZlVGFyZ2V0UmFuZ2VdID0gKGV2ZW50IGFzIGFueSkuZ2V0VGFyZ2V0UmFuZ2VzKClcbiAgICBpZiAobmF0aXZlVGFyZ2V0UmFuZ2UpIHtcbiAgICAgIHRhcmdldFJhbmdlID0gUmVhY3RFZGl0b3IudG9TbGF0ZVJhbmdlKGVkaXRvciwgbmF0aXZlVGFyZ2V0UmFuZ2UsIHtcbiAgICAgICAgZXhhY3RNYXRjaDogZmFsc2UsXG4gICAgICAgIHN1cHByZXNzVGhyb3c6IHRydWUsXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIENPTVBBVDogU2VsZWN0aW9uQ2hhbmdlIGV2ZW50IGlzIGZpcmVkIGFmdGVyIHRoZSBhY3Rpb24gaXMgcGVyZm9ybWVkLCBzbyB3ZVxuICAgIC8vIGhhdmUgdG8gbWFudWFsbHkgZ2V0IHRoZSBzZWxlY3Rpb24gaGVyZSB0byBlbnN1cmUgaXQncyB1cC10by1kYXRlLlxuICAgIGNvbnN0IHdpbmRvdyA9IFJlYWN0RWRpdG9yLmdldFdpbmRvdyhlZGl0b3IpXG4gICAgY29uc3QgZG9tU2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpXG4gICAgaWYgKCF0YXJnZXRSYW5nZSAmJiBkb21TZWxlY3Rpb24pIHtcbiAgICAgIG5hdGl2ZVRhcmdldFJhbmdlID0gZG9tU2VsZWN0aW9uXG4gICAgICB0YXJnZXRSYW5nZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVSYW5nZShlZGl0b3IsIGRvbVNlbGVjdGlvbiwge1xuICAgICAgICBleGFjdE1hdGNoOiBmYWxzZSxcbiAgICAgICAgc3VwcHJlc3NUaHJvdzogdHJ1ZSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGFyZ2V0UmFuZ2UgPSB0YXJnZXRSYW5nZSA/PyBlZGl0b3Iuc2VsZWN0aW9uXG4gICAgaWYgKCF0YXJnZXRSYW5nZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKFJhbmdlLmlzRXhwYW5kZWQodGFyZ2V0UmFuZ2UpICYmIHR5cGUuc3RhcnRzV2l0aCgnZGVsZXRlJykpIHtcbiAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKHRhcmdldFJhbmdlKVxuICAgICAgY29uc3QgbGVhZiA9IE5vZGUubGVhZihlZGl0b3IsIHN0YXJ0LnBhdGgpXG5cbiAgICAgIGlmIChsZWFmLnRleHQubGVuZ3RoID09PSBzdGFydC5vZmZzZXQgJiYgZW5kLm9mZnNldCA9PT0gMCkge1xuICAgICAgICBjb25zdCBuZXh0ID0gRWRpdG9yLm5leHQoZWRpdG9yLCB7IGF0OiBzdGFydC5wYXRoLCBtYXRjaDogVGV4dC5pc1RleHQgfSlcbiAgICAgICAgaWYgKG5leHQgJiYgUGF0aC5lcXVhbHMobmV4dFsxXSwgZW5kLnBhdGgpKSB7XG4gICAgICAgICAgdGFyZ2V0UmFuZ2UgPSB7IGFuY2hvcjogZW5kLCBmb2N1czogZW5kIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChSYW5nZS5pc0V4cGFuZGVkKHRhcmdldFJhbmdlKSAmJiB0eXBlLnN0YXJ0c1dpdGgoJ2RlbGV0ZScpKSB7XG4gICAgICBpZiAoUGF0aC5lcXVhbHModGFyZ2V0UmFuZ2UuYW5jaG9yLnBhdGgsIHRhcmdldFJhbmdlLmZvY3VzLnBhdGgpKSB7XG4gICAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKHRhcmdldFJhbmdlKVxuICAgICAgICByZXR1cm4gc3RvcmVEaWZmKHRhcmdldFJhbmdlLmFuY2hvci5wYXRoLCB7XG4gICAgICAgICAgdGV4dDogJycsXG4gICAgICAgICAgZW5kOiBlbmQub2Zmc2V0LFxuICAgICAgICAgIHN0YXJ0OiBzdGFydC5vZmZzZXQsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHR5cGUuZW5kc1dpdGgoJ0JhY2t3YXJkJykgPyAnYmFja3dhcmQnIDogJ2ZvcndhcmQnXG4gICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oXG4gICAgICAgICgpID0+IEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IsIHsgZGlyZWN0aW9uIH0pLFxuICAgICAgICB7IGF0OiB0YXJnZXRSYW5nZSB9XG4gICAgICApXG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdkZWxldGVCeUNvbXBvc2l0aW9uJzpcbiAgICAgIGNhc2UgJ2RlbGV0ZUJ5Q3V0JzpcbiAgICAgIGNhc2UgJ2RlbGV0ZUJ5RHJhZyc6IHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKCgpID0+IEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IpLCB7XG4gICAgICAgICAgYXQ6IHRhcmdldFJhbmdlLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVDb250ZW50JzpcbiAgICAgIGNhc2UgJ2RlbGV0ZUNvbnRlbnRGb3J3YXJkJzoge1xuICAgICAgICBjb25zdCB7IGFuY2hvciB9ID0gdGFyZ2V0UmFuZ2VcbiAgICAgICAgaWYgKFJhbmdlLmlzQ29sbGFwc2VkKHRhcmdldFJhbmdlKSkge1xuICAgICAgICAgIGNvbnN0IHRhcmdldE5vZGUgPSBOb2RlLmxlYWYoZWRpdG9yLCBhbmNob3IucGF0aClcblxuICAgICAgICAgIGlmIChhbmNob3Iub2Zmc2V0IDwgdGFyZ2V0Tm9kZS50ZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0b3JlRGlmZihhbmNob3IucGF0aCwge1xuICAgICAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICAgICAgc3RhcnQ6IGFuY2hvci5vZmZzZXQsXG4gICAgICAgICAgICAgIGVuZDogYW5jaG9yLm9mZnNldCArIDEsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbigoKSA9PiBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IpLCB7XG4gICAgICAgICAgYXQ6IHRhcmdldFJhbmdlLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVDb250ZW50QmFja3dhcmQnOiB7XG4gICAgICAgIGNvbnN0IHsgYW5jaG9yIH0gPSB0YXJnZXRSYW5nZVxuXG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBtaXNtYXRjaCBiZXR3ZWVuIHRoZSBuYXRpdmUgYW5kIHNsYXRlIHNlbGVjdGlvbiBiZWluZyBjb2xsYXBzZWRcbiAgICAgICAgLy8gd2UgYXJlIG1vc3QgbGlrZWx5IGRlbGV0aW5nIGEgemVyby13aWR0aCBwbGFjZWhvbGRlciBhbmQgdGh1cyBzaG91bGQgcGVyZm9ybSBpdFxuICAgICAgICAvLyBhcyBhbiBhY3Rpb24gdG8gZW5zdXJlIGNvcnJlY3QgYmVoYXZpb3IgKG1vc3RseSBoYXBwZW5zIHdpdGggbWFyayBwbGFjZWhvbGRlcnMpXG4gICAgICAgIGNvbnN0IG5hdGl2ZUNvbGxhcHNlZCA9IGlzRE9NU2VsZWN0aW9uKG5hdGl2ZVRhcmdldFJhbmdlKVxuICAgICAgICAgID8gbmF0aXZlVGFyZ2V0UmFuZ2UuaXNDb2xsYXBzZWRcbiAgICAgICAgICA6ICEhbmF0aXZlVGFyZ2V0UmFuZ2U/LmNvbGxhcHNlZFxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBuYXRpdmVDb2xsYXBzZWQgJiZcbiAgICAgICAgICBSYW5nZS5pc0NvbGxhcHNlZCh0YXJnZXRSYW5nZSkgJiZcbiAgICAgICAgICBhbmNob3Iub2Zmc2V0ID4gMFxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gc3RvcmVEaWZmKGFuY2hvci5wYXRoLCB7XG4gICAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICAgIHN0YXJ0OiBhbmNob3Iub2Zmc2V0IC0gMSxcbiAgICAgICAgICAgIGVuZDogYW5jaG9yLm9mZnNldCxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKCgpID0+IEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IpLCB7XG4gICAgICAgICAgYXQ6IHRhcmdldFJhbmdlLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVFbnRpcmVTb2Z0TGluZSc6IHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IsIHsgdW5pdDogJ2xpbmUnIH0pXG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IsIHsgdW5pdDogJ2xpbmUnIH0pXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IGF0OiB0YXJnZXRSYW5nZSB9XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlSGFyZExpbmVCYWNrd2FyZCc6IHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKFxuICAgICAgICAgICgpID0+IEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IsIHsgdW5pdDogJ2Jsb2NrJyB9KSxcbiAgICAgICAgICB7IGF0OiB0YXJnZXRSYW5nZSB9XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlU29mdExpbmVCYWNrd2FyZCc6IHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKFxuICAgICAgICAgICgpID0+IEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IsIHsgdW5pdDogJ2xpbmUnIH0pLFxuICAgICAgICAgIHsgYXQ6IHRhcmdldFJhbmdlIH1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVIYXJkTGluZUZvcndhcmQnOiB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbihcbiAgICAgICAgICAoKSA9PiBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IsIHsgdW5pdDogJ2Jsb2NrJyB9KSxcbiAgICAgICAgICB7IGF0OiB0YXJnZXRSYW5nZSB9XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlU29mdExpbmVGb3J3YXJkJzoge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oXG4gICAgICAgICAgKCkgPT4gRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJyB9KSxcbiAgICAgICAgICB7IGF0OiB0YXJnZXRSYW5nZSB9XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlV29yZEJhY2t3YXJkJzoge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oXG4gICAgICAgICAgKCkgPT4gRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgeyB1bml0OiAnd29yZCcgfSksXG4gICAgICAgICAgeyBhdDogdGFyZ2V0UmFuZ2UgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZVdvcmRGb3J3YXJkJzoge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oXG4gICAgICAgICAgKCkgPT4gRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yLCB7IHVuaXQ6ICd3b3JkJyB9KSxcbiAgICAgICAgICB7IGF0OiB0YXJnZXRSYW5nZSB9XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5zZXJ0TGluZUJyZWFrJzoge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oKCkgPT4gRWRpdG9yLmluc2VydFNvZnRCcmVhayhlZGl0b3IpLCB7XG4gICAgICAgICAgYXQ6IHRhcmdldFJhbmdlLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBjYXNlICdpbnNlcnRQYXJhZ3JhcGgnOiB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbigoKSA9PiBFZGl0b3IuaW5zZXJ0QnJlYWsoZWRpdG9yKSwge1xuICAgICAgICAgIGF0OiB0YXJnZXRSYW5nZSxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2luc2VydENvbXBvc2l0aW9uVGV4dCc6XG4gICAgICBjYXNlICdkZWxldGVDb21wb3NpdGlvblRleHQnOlxuICAgICAgY2FzZSAnaW5zZXJ0RnJvbUNvbXBvc2l0aW9uJzpcbiAgICAgIGNhc2UgJ2luc2VydEZyb21Ecm9wJzpcbiAgICAgIGNhc2UgJ2luc2VydEZyb21QYXN0ZSc6XG4gICAgICBjYXNlICdpbnNlcnRGcm9tWWFuayc6XG4gICAgICBjYXNlICdpbnNlcnRSZXBsYWNlbWVudFRleHQnOlxuICAgICAgY2FzZSAnaW5zZXJ0VGV4dCc6IHtcbiAgICAgICAgaWYgKGRhdGE/LmNvbnN0cnVjdG9yLm5hbWUgPT09ICdEYXRhVHJhbnNmZXInKSB7XG4gICAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKCgpID0+IFJlYWN0RWRpdG9yLmluc2VydERhdGEoZWRpdG9yLCBkYXRhKSwge1xuICAgICAgICAgICAgYXQ6IHRhcmdldFJhbmdlLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnICYmIGRhdGEuaW5jbHVkZXMoJ1xcbicpKSB7XG4gICAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKCgpID0+IEVkaXRvci5pbnNlcnRTb2Z0QnJlYWsoZWRpdG9yKSwge1xuICAgICAgICAgICAgYXQ6IFJhbmdlLmVuZCh0YXJnZXRSYW5nZSksXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0ZXh0ID0gZGF0YSA/PyAnJ1xuXG4gICAgICAgIC8vIENPTVBBVDogSWYgd2UgYXJlIHdyaXRpbmcgaW5zaWRlIGEgcGxhY2Vob2xkZXIsIHRoZSBpbWUgaW5zZXJ0cyB0aGUgdGV4dCBpbnNpZGVcbiAgICAgICAgLy8gdGhlIHBsYWNlaG9sZGVyIGl0c2VsZiBhbmQgdGh1cyBpbmNsdWRlcyB0aGUgemVyby13aWR0aCBzcGFjZSBpbnNpZGUgZWRpdCBldmVudHMuXG4gICAgICAgIGlmIChFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MuZ2V0KGVkaXRvcikpIHtcbiAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCdcXHVGRUZGJywgJycpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoUGF0aC5lcXVhbHModGFyZ2V0UmFuZ2UuYW5jaG9yLnBhdGgsIHRhcmdldFJhbmdlLmZvY3VzLnBhdGgpKSB7XG4gICAgICAgICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXModGFyZ2V0UmFuZ2UpXG5cbiAgICAgICAgICBjb25zdCBkaWZmID0ge1xuICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0Lm9mZnNldCxcbiAgICAgICAgICAgIGVuZDogZW5kLm9mZnNldCxcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ09NUEFUOiBTd2lmdGtleSBoYXMgYSB3ZWlyZCBidWcgd2hlcmUgdGhlIHRhcmdldCByYW5nZSBvZiB0aGUgMm5kIHdvcmRcbiAgICAgICAgICAvLyBpbnNlcnRlZCBhZnRlciBhIG1hcmsgcGxhY2Vob2xkZXIgaXMgaW5zZXJ0ZWQgd2l0aCBhbiBhbmNob3Igb2Zmc2V0IG9mZiBieSAxLlxuICAgICAgICAgIC8vIFNvIHdyaXRpbmcgJ3NvbWUgdGV4dCcgd2lsbCByZXN1bHQgaW4gJ3NvbWUgdHRleHQnLiBMdWNraWx5IGFsbCAnbm9ybWFsJyBpbnNlcnRcbiAgICAgICAgICAvLyB0ZXh0IGV2ZW50cyBhcmUgZmlyZWQgd2l0aCB0aGUgY29ycmVjdCB0YXJnZXQgcmFuZ2VzLCBvbmx5IHRoZSBmaW5hbCAnaW5zZXJ0Q29tcG9zaXRpb24nXG4gICAgICAgICAgLy8gaXNuJ3QsIHNvIHdlIGNhbiBhZGp1c3QgdGhlIHRhcmdldCByYW5nZSBzdGFydCBvZmZzZXQgaWYgd2UgYXJlIGNvbmZpZGVudCB0aGlzIGlzIHRoZVxuICAgICAgICAgIC8vIHN3aWZ0a2V5IGluc2VydCBjYXVzaW5nIHRoZSBpc3N1ZS5cbiAgICAgICAgICBpZiAodGV4dCAmJiBpbnNlcnRQb3NpdGlvbkhpbnQgJiYgdHlwZSA9PT0gJ2luc2VydENvbXBvc2l0aW9uVGV4dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGhpbnRQb3NpdGlvbiA9XG4gICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uSGludC5zdGFydCArIGluc2VydFBvc2l0aW9uSGludC50ZXh0LnNlYXJjaCgvXFxTfCQvKVxuICAgICAgICAgICAgY29uc3QgZGlmZlBvc2l0aW9uID0gZGlmZi5zdGFydCArIGRpZmYudGV4dC5zZWFyY2goL1xcU3wkLylcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBkaWZmUG9zaXRpb24gPT09IGhpbnRQb3NpdGlvbiArIDEgJiZcbiAgICAgICAgICAgICAgZGlmZi5lbmQgPT09XG4gICAgICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb25IaW50LnN0YXJ0ICsgaW5zZXJ0UG9zaXRpb25IaW50LnRleHQubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZGVidWcoJ2FkanVzdGluZyBzd2lmdEtleSBpbnNlcnQgcG9zaXRpb24gdXNpbmcgaGludCcpXG4gICAgICAgICAgICAgIGRpZmYuc3RhcnQgLT0gMVxuICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbkhpbnQgPSBudWxsXG4gICAgICAgICAgICAgIHNjaGVkdWxlRmx1c2goKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb25IaW50ID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdpbnNlcnRUZXh0Jykge1xuICAgICAgICAgICAgaWYgKGluc2VydFBvc2l0aW9uSGludCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbkhpbnQgPSBkaWZmXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbkhpbnQgJiZcbiAgICAgICAgICAgICAgUmFuZ2UuaXNDb2xsYXBzZWQodGFyZ2V0UmFuZ2UpICYmXG4gICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uSGludC5lbmQgKyBpbnNlcnRQb3NpdGlvbkhpbnQudGV4dC5sZW5ndGggPT09XG4gICAgICAgICAgICAgICAgc3RhcnQub2Zmc2V0XG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb25IaW50ID0ge1xuICAgICAgICAgICAgICAgIC4uLmluc2VydFBvc2l0aW9uSGludCxcbiAgICAgICAgICAgICAgICB0ZXh0OiBpbnNlcnRQb3NpdGlvbkhpbnQudGV4dCArIHRleHQsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uSGludCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluc2VydFBvc2l0aW9uSGludCA9IGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc3RvcmVEaWZmKHN0YXJ0LnBhdGgsIGRpZmYpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oKCkgPT4gRWRpdG9yLmluc2VydFRleHQoZWRpdG9yLCB0ZXh0KSwge1xuICAgICAgICAgIGF0OiB0YXJnZXRSYW5nZSxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBoYXNQZW5kaW5nQWN0aW9uID0gKCkgPT4ge1xuICAgIHJldHVybiAhIUVESVRPUl9UT19QRU5ESU5HX0FDVElPTi5nZXQoZWRpdG9yKVxuICB9XG5cbiAgY29uc3QgaGFzUGVuZGluZ0RpZmZzID0gKCkgPT4ge1xuICAgIHJldHVybiAhIUVESVRPUl9UT19QRU5ESU5HX0RJRkZTLmdldChlZGl0b3IpPy5sZW5ndGhcbiAgfVxuXG4gIGNvbnN0IGhhc1BlbmRpbmdDaGFuZ2VzID0gKCkgPT4ge1xuICAgIHJldHVybiBoYXNQZW5kaW5nQWN0aW9uKCkgfHwgaGFzUGVuZGluZ0RpZmZzKClcbiAgfVxuXG4gIGNvbnN0IGlzRmx1c2hpbmcgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGZsdXNoaW5nXG4gIH1cblxuICBjb25zdCBoYW5kbGVVc2VyU2VsZWN0ID0gKHJhbmdlOiBSYW5nZSB8IG51bGwpID0+IHtcbiAgICBFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04uc2V0KGVkaXRvciwgcmFuZ2UpXG5cbiAgICBpZiAoZmx1c2hUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChmbHVzaFRpbWVvdXRJZClcbiAgICAgIGZsdXNoVGltZW91dElkID0gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgICBpZiAoIXJhbmdlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBwYXRoQ2hhbmdlZCA9XG4gICAgICAhc2VsZWN0aW9uIHx8ICFQYXRoLmVxdWFscyhzZWxlY3Rpb24uYW5jaG9yLnBhdGgsIHJhbmdlLmFuY2hvci5wYXRoKVxuICAgIGNvbnN0IHBhcmVudFBhdGhDaGFuZ2VkID1cbiAgICAgICFzZWxlY3Rpb24gfHxcbiAgICAgICFQYXRoLmVxdWFscyhcbiAgICAgICAgc2VsZWN0aW9uLmFuY2hvci5wYXRoLnNsaWNlKDAsIC0xKSxcbiAgICAgICAgcmFuZ2UuYW5jaG9yLnBhdGguc2xpY2UoMCwgLTEpXG4gICAgICApXG5cbiAgICBpZiAoKHBhdGhDaGFuZ2VkICYmIGluc2VydFBvc2l0aW9uSGludCkgfHwgcGFyZW50UGF0aENoYW5nZWQpIHtcbiAgICAgIGluc2VydFBvc2l0aW9uSGludCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHBhdGhDaGFuZ2VkIHx8ICFoYXNQZW5kaW5nRGlmZnMoKSkge1xuICAgICAgZmx1c2hUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZsdXNoLCBGTFVTSF9ERUxBWSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVJbnB1dCA9ICgpID0+IHtcbiAgICBpZiAoaGFzUGVuZGluZ0FjdGlvbigpIHx8ICFoYXNQZW5kaW5nRGlmZnMoKSkge1xuICAgICAgZGVidWcoJ2ZsdXNoIGlucHV0JylcbiAgICAgIGZsdXNoKClcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gKF86IFJlYWN0LktleWJvYXJkRXZlbnQpID0+IHtcbiAgICAvLyBDT01QQVQ6IFN3aWZ0a2V5IGNsb3NlcyB0aGUga2V5Ym9hcmQgd2hlbiB0eXBpbmcgaW5zaWRlIGEgZW1wdHkgbm9kZVxuICAgIC8vIGRpcmVjdGx5IG5leHQgdG8gYSBub24tY29udGVudGVkaXRhYmxlIGVsZW1lbnQgKD0gdGhlIHBsYWNlaG9sZGVyKS5cbiAgICAvLyBUaGUgb25seSBldmVudCBmaXJlZCBzb29uIGVub3VnaCBmb3IgdXMgdG8gYWxsb3cgaGlkaW5nIHRoZSBwbGFjZWhvbGRlclxuICAgIC8vIHdpdGhvdXQgc3dpZnRrZXkgcGlja2luZyBpdCB1cCBpcyB0aGUga2V5ZG93biBldmVudCwgc28gd2UgaGF2ZSB0byBoaWRlIGl0XG4gICAgLy8gaGVyZS4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9pYW5zdG9ybXRheWxvci9zbGF0ZS9wdWxsLzQ5ODgjaXNzdWVjb21tZW50LTEyMDEwNTA1MzVcbiAgICBpZiAoIWhhc1BlbmRpbmdEaWZmcygpKSB7XG4gICAgICB1cGRhdGVQbGFjZWhvbGRlclZpc2liaWxpdHkodHJ1ZSlcbiAgICAgIHNldFRpbWVvdXQodXBkYXRlUGxhY2Vob2xkZXJWaXNpYmlsaXR5KVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHNjaGVkdWxlRmx1c2ggPSAoKSA9PiB7XG4gICAgaWYgKCFoYXNQZW5kaW5nQWN0aW9uKCkpIHtcbiAgICAgIGFjdGlvblRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZmx1c2gpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlRG9tTXV0YXRpb25zID0gKG11dGF0aW9uczogTXV0YXRpb25SZWNvcmRbXSkgPT4ge1xuICAgIGlmIChoYXNQZW5kaW5nRGlmZnMoKSB8fCBoYXNQZW5kaW5nQWN0aW9uKCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIG11dGF0aW9ucy5zb21lKG11dGF0aW9uID0+IGlzVHJhY2tlZE11dGF0aW9uKGVkaXRvciwgbXV0YXRpb24sIG11dGF0aW9ucykpXG4gICAgKSB7XG4gICAgICAvLyBDYXVzZSBhIHJlLXJlbmRlciB0byByZXN0b3JlIHRoZSBkb20gc3RhdGUgaWYgd2UgZW5jb3VudGVyIHRyYWNrZWQgbXV0YXRpb25zIHdpdGhvdXRcbiAgICAgIC8vIGEgY29ycmVzcG9uZGluZyBwZW5kaW5nIGFjdGlvbi5cbiAgICAgIEVESVRPUl9UT19GT1JDRV9SRU5ERVIuZ2V0KGVkaXRvcik/LigpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmbHVzaCxcbiAgICBzY2hlZHVsZUZsdXNoLFxuXG4gICAgaGFzUGVuZGluZ0RpZmZzLFxuICAgIGhhc1BlbmRpbmdBY3Rpb24sXG4gICAgaGFzUGVuZGluZ0NoYW5nZXMsXG5cbiAgICBpc0ZsdXNoaW5nLFxuXG4gICAgaGFuZGxlVXNlclNlbGVjdCxcbiAgICBoYW5kbGVDb21wb3NpdGlvbkVuZCxcbiAgICBoYW5kbGVDb21wb3NpdGlvblN0YXJ0LFxuICAgIGhhbmRsZURPTUJlZm9yZUlucHV0LFxuICAgIGhhbmRsZUtleURvd24sXG5cbiAgICBoYW5kbGVEb21NdXRhdGlvbnMsXG4gICAgaGFuZGxlSW5wdXQsXG4gIH1cbn1cbiIsICJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlSXNNb3VudGVkKCkge1xuICBjb25zdCBpc01vdW50ZWRSZWYgPSB1c2VSZWYoZmFsc2UpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpc01vdW50ZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaXNNb3VudGVkUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIH1cbiAgfSwgW10pXG5cbiAgcmV0dXJuIGlzTW91bnRlZFJlZi5jdXJyZW50XG59XG4iLCAiaW1wb3J0IHsgUmVmT2JqZWN0LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IH0gZnJvbSAnLi91c2UtaXNvbW9ycGhpYy1sYXlvdXQtZWZmZWN0J1xuaW1wb3J0IHsgaXNET01FbGVtZW50IH0gZnJvbSAnLi4vdXRpbHMvZG9tJ1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuLi9wbHVnaW4vcmVhY3QtZWRpdG9yJ1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcihcbiAgbm9kZTogUmVmT2JqZWN0PEhUTUxFbGVtZW50PixcbiAgY2FsbGJhY2s6IE11dGF0aW9uQ2FsbGJhY2ssXG4gIG9wdGlvbnM6IE11dGF0aW9uT2JzZXJ2ZXJJbml0XG4pIHtcbiAgY29uc3QgW211dGF0aW9uT2JzZXJ2ZXJdID0gdXNlU3RhdGUoKCkgPT4gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoY2FsbGJhY2spKVxuXG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIC8vIERpc2NhcmQgbXV0YXRpb25zIGNhdXNlZCBkdXJpbmcgcmVuZGVyIHBoYXNlLiBUaGlzIHdvcmtzIGR1ZSB0byByZWFjdCBjYWxsaW5nXG4gICAgLy8gdXNlTGF5b3V0RWZmZWN0IHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIHJlbmRlciBwaGFzZSBiZWZvcmUgdGhlIG5leHQgdGljay5cbiAgICBtdXRhdGlvbk9ic2VydmVyLnRha2VSZWNvcmRzKClcbiAgfSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbm9kZS5jdXJyZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBhdHRhY2ggTXV0YXRpb25PYnNlcnZlciwgYG5vZGVgIGlzIHVuZGVmaW5lZCcpXG4gICAgfVxuXG4gICAgbXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKG5vZGUuY3VycmVudCwgb3B0aW9ucylcbiAgICByZXR1cm4gKCkgPT4gbXV0YXRpb25PYnNlcnZlci5kaXNjb25uZWN0KClcbiAgfSwgW10pXG59XG4iLCAiaW1wb3J0IHsgUmVmT2JqZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlU2xhdGVTdGF0aWMgfSBmcm9tICcuLi91c2Utc2xhdGUtc3RhdGljJ1xuaW1wb3J0IHsgSVNfQU5EUk9JRCB9IGZyb20gJy4uLy4uL3V0aWxzL2Vudmlyb25tZW50J1xuaW1wb3J0IHsgRURJVE9SX1RPX1NDSEVEVUxFX0ZMVVNIIH0gZnJvbSAnLi4vLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHtcbiAgY3JlYXRlQW5kcm9pZElucHV0TWFuYWdlcixcbiAgQ3JlYXRlQW5kcm9pZElucHV0TWFuYWdlck9wdGlvbnMsXG59IGZyb20gJy4vYW5kcm9pZC1pbnB1dC1tYW5hZ2VyJ1xuaW1wb3J0IHsgdXNlSXNNb3VudGVkIH0gZnJvbSAnLi4vdXNlLWlzLW1vdW50ZWQnXG5pbXBvcnQgeyB1c2VNdXRhdGlvbk9ic2VydmVyIH0gZnJvbSAnLi4vdXNlLW11dGF0aW9uLW9ic2VydmVyJ1xuXG50eXBlIFVzZUFuZHJvaWRJbnB1dE1hbmFnZXJPcHRpb25zID0ge1xuICBub2RlOiBSZWZPYmplY3Q8SFRNTEVsZW1lbnQ+XG59ICYgT21pdDxcbiAgQ3JlYXRlQW5kcm9pZElucHV0TWFuYWdlck9wdGlvbnMsXG4gICdlZGl0b3InIHwgJ29uVXNlcklucHV0JyB8ICdyZWNlaXZlZFVzZXJJbnB1dCdcbj5cblxuY29uc3QgTVVUQVRJT05fT0JTRVJWRVJfQ09ORklHOiBNdXRhdGlvbk9ic2VydmVySW5pdCA9IHtcbiAgc3VidHJlZTogdHJ1ZSxcbiAgY2hpbGRMaXN0OiB0cnVlLFxuICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlQW5kcm9pZElucHV0TWFuYWdlcih7XG4gIG5vZGUsXG4gIC4uLm9wdGlvbnNcbn06IFVzZUFuZHJvaWRJbnB1dE1hbmFnZXJPcHRpb25zKSB7XG4gIGlmICghSVNfQU5EUk9JRCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpXG4gIGNvbnN0IGlzTW91bnRlZCA9IHVzZUlzTW91bnRlZCgpXG5cbiAgY29uc3QgW2lucHV0TWFuYWdlcl0gPSB1c2VTdGF0ZSgoKSA9PlxuICAgIGNyZWF0ZUFuZHJvaWRJbnB1dE1hbmFnZXIoe1xuICAgICAgZWRpdG9yLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9KVxuICApXG5cbiAgdXNlTXV0YXRpb25PYnNlcnZlcihcbiAgICBub2RlLFxuICAgIGlucHV0TWFuYWdlci5oYW5kbGVEb21NdXRhdGlvbnMsXG4gICAgTVVUQVRJT05fT0JTRVJWRVJfQ09ORklHXG4gIClcblxuICBFRElUT1JfVE9fU0NIRURVTEVfRkxVU0guc2V0KGVkaXRvciwgaW5wdXRNYW5hZ2VyLnNjaGVkdWxlRmx1c2gpXG4gIGlmIChpc01vdW50ZWQpIHtcbiAgICBpbnB1dE1hbmFnZXIuZmx1c2goKVxuICB9XG5cbiAgcmV0dXJuIGlucHV0TWFuYWdlclxufVxuIiwgImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuLi9wbHVnaW4vcmVhY3QtZWRpdG9yJ1xuaW1wb3J0IHsgdXNlU2xhdGVTdGF0aWMgfSBmcm9tICcuL3VzZS1zbGF0ZS1zdGF0aWMnXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VUcmFja1VzZXJJbnB1dCgpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKVxuXG4gIGNvbnN0IHJlY2VpdmVkVXNlcklucHV0ID0gdXNlUmVmPGJvb2xlYW4+KGZhbHNlKVxuICBjb25zdCBhbmltYXRpb25GcmFtZUlkUmVmID0gdXNlUmVmPG51bWJlcj4oMClcblxuICBjb25zdCBvblVzZXJJbnB1dCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAocmVjZWl2ZWRVc2VySW5wdXQuY3VycmVudCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgcmVjZWl2ZWRVc2VySW5wdXQuY3VycmVudCA9IHRydWVcblxuICAgIGNvbnN0IHdpbmRvdyA9IFJlYWN0RWRpdG9yLmdldFdpbmRvdyhlZGl0b3IpXG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkZyYW1lSWRSZWYuY3VycmVudClcblxuICAgIGFuaW1hdGlvbkZyYW1lSWRSZWYuY3VycmVudCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgcmVjZWl2ZWRVc2VySW5wdXQuY3VycmVudCA9IGZhbHNlXG4gICAgfSlcbiAgfSwgW10pXG5cbiAgdXNlRWZmZWN0KCgpID0+ICgpID0+IGNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkZyYW1lSWRSZWYuY3VycmVudCksIFtdKVxuXG4gIHJldHVybiB7XG4gICAgcmVjZWl2ZWRVc2VySW5wdXQsXG4gICAgb25Vc2VySW5wdXQsXG4gIH1cbn1cbiIsICJpbXBvcnQgZ2V0RGlyZWN0aW9uIGZyb20gJ2RpcmVjdGlvbidcbmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnXG5pbXBvcnQgdGhyb3R0bGUgZnJvbSAnbG9kYXNoL3Rocm90dGxlJ1xuaW1wb3J0IFJlYWN0LCB7XG4gIHVzZUNhbGxiYWNrLFxuICB1c2VFZmZlY3QsXG4gIHVzZU1lbW8sXG4gIHVzZVJlZHVjZXIsXG4gIHVzZVJlZixcbiAgdXNlU3RhdGUsXG59IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHNjcm9sbEludG9WaWV3IGZyb20gJ3Njcm9sbC1pbnRvLXZpZXctaWYtbmVlZGVkJ1xuaW1wb3J0IHtcbiAgRWRpdG9yLFxuICBFbGVtZW50LFxuICBOb2RlLFxuICBOb2RlRW50cnksXG4gIFBhdGgsXG4gIFJhbmdlLFxuICBUZXh0LFxuICBUcmFuc2Zvcm1zLFxufSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi4vcGx1Z2luL3JlYWN0LWVkaXRvcidcbmltcG9ydCB1c2VDaGlsZHJlbiBmcm9tICcuLi9ob29rcy91c2UtY2hpbGRyZW4nXG5pbXBvcnQgeyBEZWNvcmF0ZUNvbnRleHQgfSBmcm9tICcuLi9ob29rcy91c2UtZGVjb3JhdGUnXG5pbXBvcnQgeyB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IH0gZnJvbSAnLi4vaG9va3MvdXNlLWlzb21vcnBoaWMtbGF5b3V0LWVmZmVjdCdcbmltcG9ydCB7IFJlYWRPbmx5Q29udGV4dCB9IGZyb20gJy4uL2hvb2tzL3VzZS1yZWFkLW9ubHknXG5pbXBvcnQgeyB1c2VTbGF0ZSB9IGZyb20gJy4uL2hvb2tzL3VzZS1zbGF0ZSdcbmltcG9ydCB7IFRSSVBMRV9DTElDSyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cydcbmltcG9ydCB7XG4gIERPTUVsZW1lbnQsXG4gIERPTU5vZGUsXG4gIERPTVJhbmdlLFxuICBET01UZXh0LFxuICBnZXREZWZhdWx0VmlldyxcbiAgaXNET01FbGVtZW50LFxuICBpc0RPTU5vZGUsXG4gIGlzUGxhaW5UZXh0T25seVBhc3RlLFxufSBmcm9tICcuLi91dGlscy9kb20nXG5pbXBvcnQge1xuICBDQU5fVVNFX0RPTSxcbiAgSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JULFxuICBJU19BTkRST0lELFxuICBJU19DSFJPTUUsXG4gIElTX0ZJUkVGT1gsXG4gIElTX0ZJUkVGT1hfTEVHQUNZLFxuICBJU19JT1MsXG4gIElTX1NBRkFSSSxcbiAgSVNfVUNfTU9CSUxFLFxuICBJU19XRUNIQVRCUk9XU0VSLFxufSBmcm9tICcuLi91dGlscy9lbnZpcm9ubWVudCdcbmltcG9ydCBIb3RrZXlzIGZyb20gJy4uL3V0aWxzL2hvdGtleXMnXG5pbXBvcnQge1xuICBFRElUT1JfVE9fRUxFTUVOVCxcbiAgRURJVE9SX1RPX0ZPUkNFX1JFTkRFUixcbiAgRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLFxuICBFRElUT1JfVE9fUExBQ0VIT0xERVJfRUxFTUVOVCxcbiAgRURJVE9SX1RPX1VTRVJfTUFSS1MsXG4gIEVESVRPUl9UT19VU0VSX1NFTEVDVElPTixcbiAgRURJVE9SX1RPX1dJTkRPVyxcbiAgRUxFTUVOVF9UT19OT0RFLFxuICBJU19DT01QT1NJTkcsXG4gIElTX0ZPQ1VTRUQsXG4gIElTX1JFQURfT05MWSxcbiAgTUFSS19QTEFDRUhPTERFUl9TWU1CT0wsXG4gIE5PREVfVE9fRUxFTUVOVCxcbiAgUExBQ0VIT0xERVJfU1lNQk9MLFxufSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQgeyBSZXN0b3JlRE9NIH0gZnJvbSAnLi9yZXN0b3JlLWRvbS9yZXN0b3JlLWRvbSdcbmltcG9ydCB7IHVzZUFuZHJvaWRJbnB1dE1hbmFnZXIgfSBmcm9tICcuLi9ob29rcy9hbmRyb2lkLWlucHV0LW1hbmFnZXIvdXNlLWFuZHJvaWQtaW5wdXQtbWFuYWdlcidcbmltcG9ydCB7IHVzZVRyYWNrVXNlcklucHV0IH0gZnJvbSAnLi4vaG9va3MvdXNlLXRyYWNrLXVzZXItaW5wdXQnXG5cbnR5cGUgRGVmZXJyZWRPcGVyYXRpb24gPSAoKSA9PiB2b2lkXG5cbmNvbnN0IENoaWxkcmVuID0gKHByb3BzOiBQYXJhbWV0ZXJzPHR5cGVvZiB1c2VDaGlsZHJlbj5bMF0pID0+IChcbiAgPFJlYWN0LkZyYWdtZW50Pnt1c2VDaGlsZHJlbihwcm9wcyl9PC9SZWFjdC5GcmFnbWVudD5cbilcblxuLyoqXG4gKiBgUmVuZGVyRWxlbWVudFByb3BzYCBhcmUgcGFzc2VkIHRvIHRoZSBgcmVuZGVyRWxlbWVudGAgaGFuZGxlci5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlckVsZW1lbnRQcm9wcyB7XG4gIGNoaWxkcmVuOiBhbnlcbiAgZWxlbWVudDogRWxlbWVudFxuICBhdHRyaWJ1dGVzOiB7XG4gICAgJ2RhdGEtc2xhdGUtbm9kZSc6ICdlbGVtZW50J1xuICAgICdkYXRhLXNsYXRlLWlubGluZSc/OiB0cnVlXG4gICAgJ2RhdGEtc2xhdGUtdm9pZCc/OiB0cnVlXG4gICAgZGlyPzogJ3J0bCdcbiAgICByZWY6IGFueVxuICB9XG59XG5cbi8qKlxuICogYFJlbmRlckxlYWZQcm9wc2AgYXJlIHBhc3NlZCB0byB0aGUgYHJlbmRlckxlYWZgIGhhbmRsZXIuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJMZWFmUHJvcHMge1xuICBjaGlsZHJlbjogYW55XG4gIGxlYWY6IFRleHRcbiAgdGV4dDogVGV4dFxuICBhdHRyaWJ1dGVzOiB7XG4gICAgJ2RhdGEtc2xhdGUtbGVhZic6IHRydWVcbiAgfVxufVxuXG4vKipcbiAqIGBFZGl0YWJsZVByb3BzYCBhcmUgcGFzc2VkIHRvIHRoZSBgPEVkaXRhYmxlPmAgY29tcG9uZW50LlxuICovXG5cbmV4cG9ydCB0eXBlIEVkaXRhYmxlUHJvcHMgPSB7XG4gIGRlY29yYXRlPzogKGVudHJ5OiBOb2RlRW50cnkpID0+IFJhbmdlW11cbiAgb25ET01CZWZvcmVJbnB1dD86IChldmVudDogSW5wdXRFdmVudCkgPT4gdm9pZFxuICBwbGFjZWhvbGRlcj86IHN0cmluZ1xuICByZWFkT25seT86IGJvb2xlYW5cbiAgcm9sZT86IHN0cmluZ1xuICBzdHlsZT86IFJlYWN0LkNTU1Byb3BlcnRpZXNcbiAgcmVuZGVyRWxlbWVudD86IChwcm9wczogUmVuZGVyRWxlbWVudFByb3BzKSA9PiBKU1guRWxlbWVudFxuICByZW5kZXJMZWFmPzogKHByb3BzOiBSZW5kZXJMZWFmUHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHJlbmRlclBsYWNlaG9sZGVyPzogKHByb3BzOiBSZW5kZXJQbGFjZWhvbGRlclByb3BzKSA9PiBKU1guRWxlbWVudFxuICBzY3JvbGxTZWxlY3Rpb25JbnRvVmlldz86IChlZGl0b3I6IFJlYWN0RWRpdG9yLCBkb21SYW5nZTogRE9NUmFuZ2UpID0+IHZvaWRcbiAgYXM/OiBSZWFjdC5FbGVtZW50VHlwZVxuICBkaXNhYmxlRGVmYXVsdFN0eWxlcz86IGJvb2xlYW5cbn0gJiBSZWFjdC5UZXh0YXJlYUhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50PlxuXG4vKipcbiAqIEVkaXRhYmxlLlxuICovXG5cbmV4cG9ydCBjb25zdCBFZGl0YWJsZSA9IChwcm9wczogRWRpdGFibGVQcm9wcykgPT4ge1xuICBjb25zdCB7XG4gICAgYXV0b0ZvY3VzLFxuICAgIGRlY29yYXRlID0gZGVmYXVsdERlY29yYXRlLFxuICAgIG9uRE9NQmVmb3JlSW5wdXQ6IHByb3BzT25ET01CZWZvcmVJbnB1dCxcbiAgICBwbGFjZWhvbGRlcixcbiAgICByZWFkT25seSA9IGZhbHNlLFxuICAgIHJlbmRlckVsZW1lbnQsXG4gICAgcmVuZGVyTGVhZixcbiAgICByZW5kZXJQbGFjZWhvbGRlciA9IHByb3BzID0+IDxEZWZhdWx0UGxhY2Vob2xkZXIgey4uLnByb3BzfSAvPixcbiAgICBzY3JvbGxTZWxlY3Rpb25JbnRvVmlldyA9IGRlZmF1bHRTY3JvbGxTZWxlY3Rpb25JbnRvVmlldyxcbiAgICBzdHlsZTogdXNlclN0eWxlID0ge30sXG4gICAgYXM6IENvbXBvbmVudCA9ICdkaXYnLFxuICAgIGRpc2FibGVEZWZhdWx0U3R5bGVzID0gZmFsc2UsXG4gICAgLi4uYXR0cmlidXRlc1xuICB9ID0gcHJvcHNcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGUoKVxuICAvLyBSZXJlbmRlciBlZGl0b3Igd2hlbiBjb21wb3NpdGlvbiBzdGF0dXMgY2hhbmdlZFxuICBjb25zdCBbaXNDb21wb3NpbmcsIHNldElzQ29tcG9zaW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCByZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IGRlZmVycmVkT3BlcmF0aW9ucyA9IHVzZVJlZjxEZWZlcnJlZE9wZXJhdGlvbltdPihbXSlcblxuICBjb25zdCB7IG9uVXNlcklucHV0LCByZWNlaXZlZFVzZXJJbnB1dCB9ID0gdXNlVHJhY2tVc2VySW5wdXQoKVxuXG4gIGNvbnN0IFssIGZvcmNlUmVuZGVyXSA9IHVzZVJlZHVjZXIocyA9PiBzICsgMSwgMClcbiAgRURJVE9SX1RPX0ZPUkNFX1JFTkRFUi5zZXQoZWRpdG9yLCBmb3JjZVJlbmRlcilcblxuICAvLyBVcGRhdGUgaW50ZXJuYWwgc3RhdGUgb24gZWFjaCByZW5kZXIuXG4gIElTX1JFQURfT05MWS5zZXQoZWRpdG9yLCByZWFkT25seSlcblxuICAvLyBLZWVwIHRyYWNrIG9mIHNvbWUgc3RhdGUgZm9yIHRoZSBldmVudCBoYW5kbGVyIGxvZ2ljLlxuICBjb25zdCBzdGF0ZSA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIGlzRHJhZ2dpbmdJbnRlcm5hbGx5OiBmYWxzZSxcbiAgICAgIGlzVXBkYXRpbmdTZWxlY3Rpb246IGZhbHNlLFxuICAgICAgbGF0ZXN0RWxlbWVudDogbnVsbCBhcyBET01FbGVtZW50IHwgbnVsbCxcbiAgICAgIGhhc01hcmtQbGFjZWhvbGRlcjogZmFsc2UsXG4gICAgfSksXG4gICAgW11cbiAgKVxuXG4gIC8vIFRoZSBhdXRvRm9jdXMgVGV4dGFyZWFIVE1MQXR0cmlidXRlIGRvZXNuJ3QgZG8gYW55dGhpbmcgb24gYSBkaXYsIHNvIGl0XG4gIC8vIG5lZWRzIHRvIGJlIG1hbnVhbGx5IGZvY3VzZWQuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlZi5jdXJyZW50ICYmIGF1dG9Gb2N1cykge1xuICAgICAgcmVmLmN1cnJlbnQuZm9jdXMoKVxuICAgIH1cbiAgfSwgW2F1dG9Gb2N1c10pXG5cbiAgLy8gTGlzdGVuIG9uIHRoZSBuYXRpdmUgYHNlbGVjdGlvbmNoYW5nZWAgZXZlbnQgdG8gYmUgYWJsZSB0byB1cGRhdGUgYW55IHRpbWVcbiAgLy8gdGhlIHNlbGVjdGlvbiBjaGFuZ2VzLiBUaGlzIGlzIHJlcXVpcmVkIGJlY2F1c2UgUmVhY3QncyBgb25TZWxlY3RgIGlzIGxlYWt5XG4gIC8vIGFuZCBub24tc3RhbmRhcmQgc28gaXQgZG9lc24ndCBmaXJlIHVudGlsIGFmdGVyIGEgc2VsZWN0aW9uIGhhcyBiZWVuXG4gIC8vIHJlbGVhc2VkLiBUaGlzIGNhdXNlcyBpc3N1ZXMgaW4gc2l0dWF0aW9ucyB3aGVyZSBhbm90aGVyIGNoYW5nZSBoYXBwZW5zXG4gIC8vIHdoaWxlIGEgc2VsZWN0aW9uIGlzIGJlaW5nIGRyYWdnZWQuXG4gIGNvbnN0IG9uRE9NU2VsZWN0aW9uQ2hhbmdlID0gdXNlQ2FsbGJhY2soXG4gICAgdGhyb3R0bGUoKCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAoSVNfQU5EUk9JRCB8fCAhUmVhY3RFZGl0b3IuaXNDb21wb3NpbmcoZWRpdG9yKSkgJiZcbiAgICAgICAgKCFzdGF0ZS5pc1VwZGF0aW5nU2VsZWN0aW9uIHx8IGFuZHJvaWRJbnB1dE1hbmFnZXI/LmlzRmx1c2hpbmcoKSkgJiZcbiAgICAgICAgIXN0YXRlLmlzRHJhZ2dpbmdJbnRlcm5hbGx5XG4gICAgICApIHtcbiAgICAgICAgY29uc3Qgcm9vdCA9IFJlYWN0RWRpdG9yLmZpbmREb2N1bWVudE9yU2hhZG93Um9vdChlZGl0b3IpXG4gICAgICAgIGNvbnN0IHsgYWN0aXZlRWxlbWVudCB9ID0gcm9vdFxuICAgICAgICBjb25zdCBlbCA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcilcbiAgICAgICAgY29uc3QgZG9tU2VsZWN0aW9uID0gcm9vdC5nZXRTZWxlY3Rpb24oKVxuXG4gICAgICAgIGlmIChhY3RpdmVFbGVtZW50ID09PSBlbCkge1xuICAgICAgICAgIHN0YXRlLmxhdGVzdEVsZW1lbnQgPSBhY3RpdmVFbGVtZW50XG4gICAgICAgICAgSVNfRk9DVVNFRC5zZXQoZWRpdG9yLCB0cnVlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIElTX0ZPQ1VTRUQuZGVsZXRlKGVkaXRvcilcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZG9tU2VsZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIFRyYW5zZm9ybXMuZGVzZWxlY3QoZWRpdG9yKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBhbmNob3JOb2RlLCBmb2N1c05vZGUgfSA9IGRvbVNlbGVjdGlvblxuXG4gICAgICAgIGNvbnN0IGFuY2hvck5vZGVTZWxlY3RhYmxlID1cbiAgICAgICAgICBSZWFjdEVkaXRvci5oYXNFZGl0YWJsZVRhcmdldChlZGl0b3IsIGFuY2hvck5vZGUpIHx8XG4gICAgICAgICAgUmVhY3RFZGl0b3IuaXNUYXJnZXRJbnNpZGVOb25SZWFkb25seVZvaWQoZWRpdG9yLCBhbmNob3JOb2RlKVxuXG4gICAgICAgIGNvbnN0IGZvY3VzTm9kZVNlbGVjdGFibGUgPVxuICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc0VkaXRhYmxlVGFyZ2V0KGVkaXRvciwgZm9jdXNOb2RlKSB8fFxuICAgICAgICAgIFJlYWN0RWRpdG9yLmlzVGFyZ2V0SW5zaWRlTm9uUmVhZG9ubHlWb2lkKGVkaXRvciwgZm9jdXNOb2RlKVxuXG4gICAgICAgIGlmIChhbmNob3JOb2RlU2VsZWN0YWJsZSAmJiBmb2N1c05vZGVTZWxlY3RhYmxlKSB7XG4gICAgICAgICAgY29uc3QgcmFuZ2UgPSBSZWFjdEVkaXRvci50b1NsYXRlUmFuZ2UoZWRpdG9yLCBkb21TZWxlY3Rpb24sIHtcbiAgICAgICAgICAgIGV4YWN0TWF0Y2g6IGZhbHNlLFxuICAgICAgICAgICAgc3VwcHJlc3NUaHJvdzogdHJ1ZSxcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgaWYgKHJhbmdlKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICFSZWFjdEVkaXRvci5pc0NvbXBvc2luZyhlZGl0b3IpICYmXG4gICAgICAgICAgICAgICFhbmRyb2lkSW5wdXRNYW5hZ2VyPy5oYXNQZW5kaW5nQ2hhbmdlcygpICYmXG4gICAgICAgICAgICAgICFhbmRyb2lkSW5wdXRNYW5hZ2VyPy5pc0ZsdXNoaW5nKClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHJhbmdlKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYW5kcm9pZElucHV0TWFuYWdlcj8uaGFuZGxlVXNlclNlbGVjdChyYW5nZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXNlbGVjdCB0aGUgZWRpdG9yIGlmIHRoZSBkb20gc2VsZWN0aW9uIGlzIG5vdCBzZWxlY3RhYmxlIGluIHJlYWRvbmx5IG1vZGVcbiAgICAgICAgaWYgKHJlYWRPbmx5ICYmICghYW5jaG9yTm9kZVNlbGVjdGFibGUgfHwgIWZvY3VzTm9kZVNlbGVjdGFibGUpKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5kZXNlbGVjdChlZGl0b3IpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAxMDApLFxuICAgIFtyZWFkT25seV1cbiAgKVxuXG4gIGNvbnN0IHNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2UgPSB1c2VNZW1vKFxuICAgICgpID0+IGRlYm91bmNlKG9uRE9NU2VsZWN0aW9uQ2hhbmdlLCAwKSxcbiAgICBbb25ET01TZWxlY3Rpb25DaGFuZ2VdXG4gIClcblxuICBjb25zdCBhbmRyb2lkSW5wdXRNYW5hZ2VyID0gdXNlQW5kcm9pZElucHV0TWFuYWdlcih7XG4gICAgbm9kZTogcmVmLFxuICAgIG9uRE9NU2VsZWN0aW9uQ2hhbmdlLFxuICAgIHNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2UsXG4gIH0pXG5cbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgLy8gVXBkYXRlIGVsZW1lbnQtcmVsYXRlZCB3ZWFrIG1hcHMgd2l0aCB0aGUgRE9NIGVsZW1lbnQgcmVmLlxuICAgIGxldCB3aW5kb3dcbiAgICBpZiAocmVmLmN1cnJlbnQgJiYgKHdpbmRvdyA9IGdldERlZmF1bHRWaWV3KHJlZi5jdXJyZW50KSkpIHtcbiAgICAgIEVESVRPUl9UT19XSU5ET1cuc2V0KGVkaXRvciwgd2luZG93KVxuICAgICAgRURJVE9SX1RPX0VMRU1FTlQuc2V0KGVkaXRvciwgcmVmLmN1cnJlbnQpXG4gICAgICBOT0RFX1RPX0VMRU1FTlQuc2V0KGVkaXRvciwgcmVmLmN1cnJlbnQpXG4gICAgICBFTEVNRU5UX1RPX05PREUuc2V0KHJlZi5jdXJyZW50LCBlZGl0b3IpXG4gICAgfSBlbHNlIHtcbiAgICAgIE5PREVfVE9fRUxFTUVOVC5kZWxldGUoZWRpdG9yKVxuICAgIH1cblxuICAgIC8vIE1ha2Ugc3VyZSB0aGUgRE9NIHNlbGVjdGlvbiBzdGF0ZSBpcyBpbiBzeW5jLlxuICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgICBjb25zdCByb290ID0gUmVhY3RFZGl0b3IuZmluZERvY3VtZW50T3JTaGFkb3dSb290KGVkaXRvcilcbiAgICBjb25zdCBkb21TZWxlY3Rpb24gPSByb290LmdldFNlbGVjdGlvbigpXG5cbiAgICBpZiAoXG4gICAgICAhZG9tU2VsZWN0aW9uIHx8XG4gICAgICAhUmVhY3RFZGl0b3IuaXNGb2N1c2VkKGVkaXRvcikgfHxcbiAgICAgIGFuZHJvaWRJbnB1dE1hbmFnZXI/Lmhhc1BlbmRpbmdBY3Rpb24oKVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3Qgc2V0RG9tU2VsZWN0aW9uID0gKGZvcmNlQ2hhbmdlPzogYm9vbGVhbikgPT4ge1xuICAgICAgY29uc3QgaGFzRG9tU2VsZWN0aW9uID0gZG9tU2VsZWN0aW9uLnR5cGUgIT09ICdOb25lJ1xuXG4gICAgICAvLyBJZiB0aGUgRE9NIHNlbGVjdGlvbiBpcyBwcm9wZXJseSB1bnNldCwgd2UncmUgZG9uZS5cbiAgICAgIGlmICghc2VsZWN0aW9uICYmICFoYXNEb21TZWxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIHZlcmlmeSB0aGF0IHRoZSBkb20gc2VsZWN0aW9uIGlzIGluIHRoZSBlZGl0b3JcbiAgICAgIGNvbnN0IGVkaXRvckVsZW1lbnQgPSBFRElUT1JfVE9fRUxFTUVOVC5nZXQoZWRpdG9yKSFcbiAgICAgIGxldCBoYXNEb21TZWxlY3Rpb25JbkVkaXRvciA9IGZhbHNlXG4gICAgICBpZiAoXG4gICAgICAgIGVkaXRvckVsZW1lbnQuY29udGFpbnMoZG9tU2VsZWN0aW9uLmFuY2hvck5vZGUpICYmXG4gICAgICAgIGVkaXRvckVsZW1lbnQuY29udGFpbnMoZG9tU2VsZWN0aW9uLmZvY3VzTm9kZSlcbiAgICAgICkge1xuICAgICAgICBoYXNEb21TZWxlY3Rpb25JbkVkaXRvciA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIERPTSBzZWxlY3Rpb24gaXMgaW4gdGhlIGVkaXRvciBhbmQgdGhlIGVkaXRvciBzZWxlY3Rpb24gaXMgYWxyZWFkeSBjb3JyZWN0LCB3ZSdyZSBkb25lLlxuICAgICAgaWYgKFxuICAgICAgICBoYXNEb21TZWxlY3Rpb24gJiZcbiAgICAgICAgaGFzRG9tU2VsZWN0aW9uSW5FZGl0b3IgJiZcbiAgICAgICAgc2VsZWN0aW9uICYmXG4gICAgICAgICFmb3JjZUNoYW5nZVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHNsYXRlUmFuZ2UgPSBSZWFjdEVkaXRvci50b1NsYXRlUmFuZ2UoZWRpdG9yLCBkb21TZWxlY3Rpb24sIHtcbiAgICAgICAgICBleGFjdE1hdGNoOiB0cnVlLFxuXG4gICAgICAgICAgLy8gZG9tU2VsZWN0aW9uIGlzIG5vdCBuZWNlc3NhcmlseSBhIHZhbGlkIFNsYXRlIHJhbmdlXG4gICAgICAgICAgLy8gKGUuZy4gd2hlbiBjbGlja2luZyBvbiBjb250ZW50RWRpdGFibGU6ZmFsc2UgZWxlbWVudClcbiAgICAgICAgICBzdXBwcmVzc1Rocm93OiB0cnVlLFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChzbGF0ZVJhbmdlICYmIFJhbmdlLmVxdWFscyhzbGF0ZVJhbmdlLCBzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgaWYgKCFzdGF0ZS5oYXNNYXJrUGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEVuc3VyZSBzZWxlY3Rpb24gaXMgaW5zaWRlIHRoZSBtYXJrIHBsYWNlaG9sZGVyXG4gICAgICAgICAgY29uc3QgeyBhbmNob3JOb2RlIH0gPSBkb21TZWxlY3Rpb25cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBhbmNob3JOb2RlPy5wYXJlbnRFbGVtZW50Py5oYXNBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICdkYXRhLXNsYXRlLW1hcmstcGxhY2Vob2xkZXInXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gd2hlbiA8RWRpdGFibGUvPiBpcyBiZWluZyBjb250cm9sbGVkIHRocm91Z2ggZXh0ZXJuYWwgdmFsdWVcbiAgICAgIC8vIHRoZW4gaXRzIGNoaWxkcmVuIG1pZ2h0IGp1c3QgY2hhbmdlIC0gRE9NIHJlc3BvbmRzIHRvIGl0IG9uIGl0cyBvd25cbiAgICAgIC8vIGJ1dCBTbGF0ZSdzIHZhbHVlIGlzIG5vdCBiZWluZyB1cGRhdGVkIHRocm91Z2ggYW55IG9wZXJhdGlvblxuICAgICAgLy8gYW5kIHRodXMgaXQgZG9lc24ndCB0cmFuc2Zvcm0gc2VsZWN0aW9uIG9uIGl0cyBvd25cbiAgICAgIGlmIChzZWxlY3Rpb24gJiYgIVJlYWN0RWRpdG9yLmhhc1JhbmdlKGVkaXRvciwgc2VsZWN0aW9uKSkge1xuICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uID0gUmVhY3RFZGl0b3IudG9TbGF0ZVJhbmdlKGVkaXRvciwgZG9tU2VsZWN0aW9uLCB7XG4gICAgICAgICAgZXhhY3RNYXRjaDogZmFsc2UsXG4gICAgICAgICAgc3VwcHJlc3NUaHJvdzogdHJ1ZSxcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIE90aGVyd2lzZSB0aGUgRE9NIHNlbGVjdGlvbiBpcyBvdXQgb2Ygc3luYywgc28gdXBkYXRlIGl0LlxuICAgICAgc3RhdGUuaXNVcGRhdGluZ1NlbGVjdGlvbiA9IHRydWVcblxuICAgICAgY29uc3QgbmV3RG9tUmFuZ2U6IERPTVJhbmdlIHwgbnVsbCA9XG4gICAgICAgIHNlbGVjdGlvbiAmJiBSZWFjdEVkaXRvci50b0RPTVJhbmdlKGVkaXRvciwgc2VsZWN0aW9uKVxuXG4gICAgICBpZiAobmV3RG9tUmFuZ2UpIHtcbiAgICAgICAgaWYgKFJhbmdlLmlzQmFja3dhcmQoc2VsZWN0aW9uISkpIHtcbiAgICAgICAgICBkb21TZWxlY3Rpb24uc2V0QmFzZUFuZEV4dGVudChcbiAgICAgICAgICAgIG5ld0RvbVJhbmdlLmVuZENvbnRhaW5lcixcbiAgICAgICAgICAgIG5ld0RvbVJhbmdlLmVuZE9mZnNldCxcbiAgICAgICAgICAgIG5ld0RvbVJhbmdlLnN0YXJ0Q29udGFpbmVyLFxuICAgICAgICAgICAgbmV3RG9tUmFuZ2Uuc3RhcnRPZmZzZXRcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG9tU2VsZWN0aW9uLnNldEJhc2VBbmRFeHRlbnQoXG4gICAgICAgICAgICBuZXdEb21SYW5nZS5zdGFydENvbnRhaW5lcixcbiAgICAgICAgICAgIG5ld0RvbVJhbmdlLnN0YXJ0T2Zmc2V0LFxuICAgICAgICAgICAgbmV3RG9tUmFuZ2UuZW5kQ29udGFpbmVyLFxuICAgICAgICAgICAgbmV3RG9tUmFuZ2UuZW5kT2Zmc2V0XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIHNjcm9sbFNlbGVjdGlvbkludG9WaWV3KGVkaXRvciwgbmV3RG9tUmFuZ2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb21TZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld0RvbVJhbmdlXG4gICAgfVxuXG4gICAgY29uc3QgbmV3RG9tUmFuZ2UgPSBzZXREb21TZWxlY3Rpb24oKVxuICAgIGNvbnN0IGVuc3VyZVNlbGVjdGlvbiA9IGFuZHJvaWRJbnB1dE1hbmFnZXI/LmlzRmx1c2hpbmcoKSA9PT0gJ2FjdGlvbidcblxuICAgIGlmICghSVNfQU5EUk9JRCB8fCAhZW5zdXJlU2VsZWN0aW9uKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgLy8gQ09NUEFUOiBJbiBGaXJlZm94LCBpdCdzIG5vdCBlbm91Z2ggdG8gY3JlYXRlIGEgcmFuZ2UsIHlvdSBhbHNvIG5lZWRcbiAgICAgICAgLy8gdG8gZm9jdXMgdGhlIGNvbnRlbnRlZGl0YWJsZSBlbGVtZW50IHRvby4gKDIwMTYvMTEvMTYpXG4gICAgICAgIGlmIChuZXdEb21SYW5nZSAmJiBJU19GSVJFRk9YKSB7XG4gICAgICAgICAgY29uc3QgZWwgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBlZGl0b3IpXG4gICAgICAgICAgZWwuZm9jdXMoKVxuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUuaXNVcGRhdGluZ1NlbGVjdGlvbiA9IGZhbHNlXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IHRpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbFxuICAgIGNvbnN0IGFuaW1hdGlvbkZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgaWYgKGVuc3VyZVNlbGVjdGlvbikge1xuICAgICAgICBjb25zdCBlbnN1cmVEb21TZWxlY3Rpb24gPSAoZm9yY2VDaGFuZ2U/OiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGVsID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKVxuICAgICAgICAgICAgZWwuZm9jdXMoKVxuXG4gICAgICAgICAgICBzZXREb21TZWxlY3Rpb24oZm9yY2VDaGFuZ2UpXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gSWdub3JlLCBkb20gYW5kIHN0YXRlIG1pZ2h0IGJlIG91dCBvZiBzeW5jXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29tcGF0OiBBbmRyb2lkIElNRXMgdHJ5IHRvIGZvcmNlIHRoZWlyIHNlbGVjdGlvbiBieSBtYW51YWxseSByZS1hcHBseWluZyBpdCBldmVuIGFmdGVyIHdlIHNldCBpdC5cbiAgICAgICAgLy8gVGhpcyBlc3NlbnRpYWxseSB3b3VsZCBtYWtlIHNldHRpbmcgdGhlIHNsYXRlIHNlbGVjdGlvbiBkdXJpbmcgYW4gdXBkYXRlIG1lYW5pbmdsZXNzLCBzbyB3ZSBmb3JjZSBpdFxuICAgICAgICAvLyBhZ2FpbiBoZXJlLiBXZSBjYW4ndCBvbmx5IGRvIGl0IGluIHRoZSBzZXRUaW1lb3V0IGFmdGVyIHRoZSBhbmltYXRpb24gZnJhbWUgc2luY2UgdGhhdCB3b3VsZCBjYXVzZSBhXG4gICAgICAgIC8vIHZpc2libGUgZmxpY2tlci5cbiAgICAgICAgZW5zdXJlRG9tU2VsZWN0aW9uKClcblxuICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAvLyBDT01QQVQ6IFdoaWxlIHNldHRpbmcgdGhlIHNlbGVjdGlvbiBpbiBhbiBhbmltYXRpb24gZnJhbWUgdmlzdWFsbHkgY29ycmVjdGx5IHNldHMgdGhlIHNlbGVjdGlvbixcbiAgICAgICAgICAvLyBpdCBkb2Vzbid0IHVwZGF0ZSBHQm9hcmRzIHNwZWxsY2hlY2tlciBzdGF0ZS4gV2UgaGF2ZSB0byBtYW51YWxseSB0cmlnZ2VyIGEgc2VsZWN0aW9uIGNoYW5nZSBhZnRlclxuICAgICAgICAgIC8vIHRoZSBhbmltYXRpb24gZnJhbWUgdG8gZW5zdXJlIGl0IGRpc3BsYXlzIHRoZSBjb3JyZWN0IHN0YXRlLlxuICAgICAgICAgIGVuc3VyZURvbVNlbGVjdGlvbih0cnVlKVxuICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmdTZWxlY3Rpb24gPSBmYWxzZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uRnJhbWVJZClcbiAgICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZClcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLy8gTGlzdGVuIG9uIHRoZSBuYXRpdmUgYGJlZm9yZWlucHV0YCBldmVudCB0byBnZXQgcmVhbCBcIkxldmVsIDJcIiBldmVudHMuIFRoaXNcbiAgLy8gaXMgcmVxdWlyZWQgYmVjYXVzZSBSZWFjdCdzIGBiZWZvcmVpbnB1dGAgaXMgZmFrZSBhbmQgbmV2ZXIgcmVhbGx5IGF0dGFjaGVzXG4gIC8vIHRvIHRoZSByZWFsIGV2ZW50IHNhZGx5LiAoMjAxOS8xMS8wMSlcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8xMTIxMVxuICBjb25zdCBvbkRPTUJlZm9yZUlucHV0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGV2ZW50OiBJbnB1dEV2ZW50KSA9PiB7XG4gICAgICBvblVzZXJJbnB1dCgpXG5cbiAgICAgIGlmIChcbiAgICAgICAgIXJlYWRPbmx5ICYmXG4gICAgICAgIFJlYWN0RWRpdG9yLmhhc0VkaXRhYmxlVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAhaXNET01FdmVudEhhbmRsZWQoZXZlbnQsIHByb3BzT25ET01CZWZvcmVJbnB1dClcbiAgICAgICkge1xuICAgICAgICAvLyBDT01QQVQ6IEJlZm9yZUlucHV0IGV2ZW50cyBhcmVuJ3QgY2FuY2VsYWJsZSBvbiBhbmRyb2lkLCBzbyB3ZSBoYXZlIHRvIGhhbmRsZSB0aGVtIGRpZmZlcmVudGx5IHVzaW5nIHRoZSBhbmRyb2lkIGlucHV0IG1hbmFnZXIuXG4gICAgICAgIGlmIChhbmRyb2lkSW5wdXRNYW5hZ2VyKSB7XG4gICAgICAgICAgcmV0dXJuIGFuZHJvaWRJbnB1dE1hbmFnZXIuaGFuZGxlRE9NQmVmb3JlSW5wdXQoZXZlbnQpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBTb21lIElNRXMvQ2hyb21lIGV4dGVuc2lvbnMgbGlrZSBlLmcuIEdyYW1tYXJseSBzZXQgdGhlIHNlbGVjdGlvbiBpbW1lZGlhdGVseSBiZWZvcmVcbiAgICAgICAgLy8gdHJpZ2dlcmluZyBhIGBiZWZvcmVpbnB1dGAgZXhwZWN0aW5nIHRoZSBjaGFuZ2UgdG8gYmUgYXBwbGllZCB0byB0aGUgaW1tZWRpYXRlbHkgYmVmb3JlXG4gICAgICAgIC8vIHNldCBzZWxlY3Rpb24uXG4gICAgICAgIHNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2UuZmx1c2goKVxuICAgICAgICBvbkRPTVNlbGVjdGlvbkNoYW5nZS5mbHVzaCgpXG5cbiAgICAgICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICAgICAgICBjb25zdCB7IGlucHV0VHlwZTogdHlwZSB9ID0gZXZlbnRcbiAgICAgICAgY29uc3QgZGF0YSA9IChldmVudCBhcyBhbnkpLmRhdGFUcmFuc2ZlciB8fCBldmVudC5kYXRhIHx8IHVuZGVmaW5lZFxuXG4gICAgICAgIGNvbnN0IGlzQ29tcG9zaXRpb25DaGFuZ2UgPVxuICAgICAgICAgIHR5cGUgPT09ICdpbnNlcnRDb21wb3NpdGlvblRleHQnIHx8IHR5cGUgPT09ICdkZWxldGVDb21wb3NpdGlvblRleHQnXG5cbiAgICAgICAgLy8gQ09NUEFUOiB1c2UgY29tcG9zaXRpb24gY2hhbmdlIGV2ZW50cyBhcyBhIGhpbnQgdG8gd2hlcmUgd2Ugc2hvdWxkIGluc2VydFxuICAgICAgICAvLyBjb21wb3NpdGlvbiB0ZXh0IGlmIHdlIGFyZW4ndCBjb21wb3NpbmcgdG8gd29yayBhcm91bmQgaHR0cHM6Ly9naXRodWIuY29tL2lhbnN0b3JtdGF5bG9yL3NsYXRlL2lzc3Vlcy81MDM4XG4gICAgICAgIGlmIChpc0NvbXBvc2l0aW9uQ2hhbmdlICYmIFJlYWN0RWRpdG9yLmlzQ29tcG9zaW5nKGVkaXRvcikpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBuYXRpdmUgPSBmYWxzZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZSA9PT0gJ2luc2VydFRleHQnICYmXG4gICAgICAgICAgc2VsZWN0aW9uICYmXG4gICAgICAgICAgUmFuZ2UuaXNDb2xsYXBzZWQoc2VsZWN0aW9uKSAmJlxuICAgICAgICAgIC8vIE9ubHkgdXNlIG5hdGl2ZSBjaGFyYWN0ZXIgaW5zZXJ0aW9uIGZvciBzaW5nbGUgY2hhcmFjdGVycyBhLXogb3Igc3BhY2UgZm9yIG5vdy5cbiAgICAgICAgICAvLyBMb25nLXByZXNzIGV2ZW50cyAoaG9sZCBhICsgcHJlc3MgNCA9IMOkKSB0byBjaG9vc2UgYSBzcGVjaWFsIGNoYXJhY3RlciBvdGhlcndpc2VcbiAgICAgICAgICAvLyBjYXVzZXMgZHVwbGljYXRlIGluc2VydHMuXG4gICAgICAgICAgZXZlbnQuZGF0YSAmJlxuICAgICAgICAgIGV2ZW50LmRhdGEubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgL1thLXogXS9pLnRlc3QoZXZlbnQuZGF0YSkgJiZcbiAgICAgICAgICAvLyBDaHJvbWUgaGFzIGlzc3VlcyBjb3JyZWN0bHkgZWRpdGluZyB0aGUgc3RhcnQgb2Ygbm9kZXM6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTEyNDk0MDVcbiAgICAgICAgICAvLyBXaGVuIHRoZXJlIGlzIGFuIGlubGluZSBlbGVtZW50LCBlLmcuIGEgbGluaywgYW5kIHlvdSBzZWxlY3RcbiAgICAgICAgICAvLyByaWdodCBhZnRlciBpdCAodGhlIHN0YXJ0IG9mIHRoZSBuZXh0IG5vZGUpLlxuICAgICAgICAgIHNlbGVjdGlvbi5hbmNob3Iub2Zmc2V0ICE9PSAwXG4gICAgICAgICkge1xuICAgICAgICAgIG5hdGl2ZSA9IHRydWVcblxuICAgICAgICAgIC8vIFNraXAgbmF0aXZlIGlmIHRoZXJlIGFyZSBtYXJrcywgYXNcbiAgICAgICAgICAvLyBgaW5zZXJ0VGV4dGAgd2lsbCBpbnNlcnQgYSBub2RlLCBub3QganVzdCB0ZXh0LlxuICAgICAgICAgIGlmIChlZGl0b3IubWFya3MpIHtcbiAgICAgICAgICAgIG5hdGl2ZSA9IGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ2hyb21lIGFsc28gaGFzIGlzc3VlcyBjb3JyZWN0bHkgZWRpdGluZyB0aGUgZW5kIG9mIGFuY2hvciBlbGVtZW50czogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTI1OTEwMFxuICAgICAgICAgIC8vIFRoZXJlZm9yZSB3ZSBkb24ndCBhbGxvdyBuYXRpdmUgZXZlbnRzIHRvIGluc2VydCB0ZXh0IGF0IHRoZSBlbmQgb2YgYW5jaG9yIG5vZGVzLlxuICAgICAgICAgIGNvbnN0IHsgYW5jaG9yIH0gPSBzZWxlY3Rpb25cblxuICAgICAgICAgIGNvbnN0IFtub2RlLCBvZmZzZXRdID0gUmVhY3RFZGl0b3IudG9ET01Qb2ludChlZGl0b3IsIGFuY2hvcilcbiAgICAgICAgICBjb25zdCBhbmNob3JOb2RlID0gbm9kZS5wYXJlbnRFbGVtZW50Py5jbG9zZXN0KCdhJylcblxuICAgICAgICAgIGNvbnN0IHdpbmRvdyA9IFJlYWN0RWRpdG9yLmdldFdpbmRvdyhlZGl0b3IpXG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBuYXRpdmUgJiZcbiAgICAgICAgICAgIGFuY2hvck5vZGUgJiZcbiAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc0RPTU5vZGUoZWRpdG9yLCBhbmNob3JOb2RlKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgbGFzdCB0ZXh0IG5vZGUgaW5zaWRlIHRoZSBhbmNob3IuXG4gICAgICAgICAgICBjb25zdCBsYXN0VGV4dCA9IHdpbmRvdz8uZG9jdW1lbnRcbiAgICAgICAgICAgICAgLmNyZWF0ZVRyZWVXYWxrZXIoYW5jaG9yTm9kZSwgTm9kZUZpbHRlci5TSE9XX1RFWFQpXG4gICAgICAgICAgICAgIC5sYXN0Q2hpbGQoKSBhcyBET01UZXh0IHwgbnVsbFxuXG4gICAgICAgICAgICBpZiAobGFzdFRleHQgPT09IG5vZGUgJiYgbGFzdFRleHQudGV4dENvbnRlbnQ/Lmxlbmd0aCA9PT0gb2Zmc2V0KSB7XG4gICAgICAgICAgICAgIG5hdGl2ZSA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ2hyb21lIGhhcyBpc3N1ZXMgd2l0aCB0aGUgcHJlc2VuY2Ugb2YgdGFiIGNoYXJhY3RlcnMgaW5zaWRlIGVsZW1lbnRzIHdpdGggd2hpdGVTcGFjZSA9ICdwcmUnXG4gICAgICAgICAgLy8gY2F1c2luZyBhYm5vcm1hbCBpbnNlcnQgYmVoYXZpb3I6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTEyMTkxMzlcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBuYXRpdmUgJiZcbiAgICAgICAgICAgIG5vZGUucGFyZW50RWxlbWVudCAmJlxuICAgICAgICAgICAgd2luZG93Py5nZXRDb21wdXRlZFN0eWxlKG5vZGUucGFyZW50RWxlbWVudCk/LndoaXRlU3BhY2UgPT09ICdwcmUnXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBibG9jayA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IGFuY2hvci5wYXRoLFxuICAgICAgICAgICAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pLFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKGJsb2NrICYmIE5vZGUuc3RyaW5nKGJsb2NrWzBdKS5pbmNsdWRlcygnXFx0JykpIHtcbiAgICAgICAgICAgICAgbmF0aXZlID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDT01QQVQ6IEZvciB0aGUgZGVsZXRpbmcgZm9yd2FyZC9iYWNrd2FyZCBpbnB1dCB0eXBlcyB3ZSBkb24ndCB3YW50XG4gICAgICAgIC8vIHRvIGNoYW5nZSB0aGUgc2VsZWN0aW9uIGJlY2F1c2UgaXQgaXMgdGhlIHJhbmdlIHRoYXQgd2lsbCBiZSBkZWxldGVkLFxuICAgICAgICAvLyBhbmQgdGhvc2UgY29tbWFuZHMgZGV0ZXJtaW5lIHRoYXQgZm9yIHRoZW1zZWx2ZXMuXG4gICAgICAgIGlmICghdHlwZS5zdGFydHNXaXRoKCdkZWxldGUnKSB8fCB0eXBlLnN0YXJ0c1dpdGgoJ2RlbGV0ZUJ5JykpIHtcbiAgICAgICAgICBjb25zdCBbdGFyZ2V0UmFuZ2VdID0gKGV2ZW50IGFzIGFueSkuZ2V0VGFyZ2V0UmFuZ2VzKClcblxuICAgICAgICAgIGlmICh0YXJnZXRSYW5nZSkge1xuICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBSZWFjdEVkaXRvci50b1NsYXRlUmFuZ2UoZWRpdG9yLCB0YXJnZXRSYW5nZSwge1xuICAgICAgICAgICAgICBleGFjdE1hdGNoOiBmYWxzZSxcbiAgICAgICAgICAgICAgc3VwcHJlc3NUaHJvdzogZmFsc2UsXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZiAoIXNlbGVjdGlvbiB8fCAhUmFuZ2UuZXF1YWxzKHNlbGVjdGlvbiwgcmFuZ2UpKSB7XG4gICAgICAgICAgICAgIG5hdGl2ZSA9IGZhbHNlXG5cbiAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uUmVmID1cbiAgICAgICAgICAgICAgICAhaXNDb21wb3NpdGlvbkNoYW5nZSAmJlxuICAgICAgICAgICAgICAgIGVkaXRvci5zZWxlY3Rpb24gJiZcbiAgICAgICAgICAgICAgICBFZGl0b3IucmFuZ2VSZWYoZWRpdG9yLCBlZGl0b3Iuc2VsZWN0aW9uKVxuXG4gICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgcmFuZ2UpXG5cbiAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblJlZikge1xuICAgICAgICAgICAgICAgIEVESVRPUl9UT19VU0VSX1NFTEVDVElPTi5zZXQoZWRpdG9yLCBzZWxlY3Rpb25SZWYpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb21wb3NpdGlvbiBjaGFuZ2UgdHlwZXMgb2NjdXIgd2hpbGUgYSB1c2VyIGlzIGNvbXBvc2luZyB0ZXh0IGFuZCBjYW4ndCBiZVxuICAgICAgICAvLyBjYW5jZWxsZWQuIExldCB0aGVtIHRocm91Z2ggYW5kIHdhaXQgZm9yIHRoZSBjb21wb3NpdGlvbiB0byBlbmQuXG4gICAgICAgIGlmIChpc0NvbXBvc2l0aW9uQ2hhbmdlKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW5hdGl2ZSkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENPTVBBVDogSWYgdGhlIHNlbGVjdGlvbiBpcyBleHBhbmRlZCwgZXZlbiBpZiB0aGUgY29tbWFuZCBzZWVtcyBsaWtlXG4gICAgICAgIC8vIGEgZGVsZXRlIGZvcndhcmQvYmFja3dhcmQgY29tbWFuZCBpdCBzaG91bGQgZGVsZXRlIHRoZSBzZWxlY3Rpb24uXG4gICAgICAgIGlmIChcbiAgICAgICAgICBzZWxlY3Rpb24gJiZcbiAgICAgICAgICBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikgJiZcbiAgICAgICAgICB0eXBlLnN0YXJ0c1dpdGgoJ2RlbGV0ZScpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHR5cGUuZW5kc1dpdGgoJ0JhY2t3YXJkJykgPyAnYmFja3dhcmQnIDogJ2ZvcndhcmQnXG4gICAgICAgICAgRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvciwgeyBkaXJlY3Rpb24gfSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2RlbGV0ZUJ5Q29tcG9zaXRpb24nOlxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZUJ5Q3V0JzpcbiAgICAgICAgICBjYXNlICdkZWxldGVCeURyYWcnOiB7XG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdkZWxldGVDb250ZW50JzpcbiAgICAgICAgICBjYXNlICdkZWxldGVDb250ZW50Rm9yd2FyZCc6IHtcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvcilcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnZGVsZXRlQ29udGVudEJhY2t3YXJkJzoge1xuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvcilcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnZGVsZXRlRW50aXJlU29mdExpbmUnOiB7XG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJyB9KVxuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJyB9KVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdkZWxldGVIYXJkTGluZUJhY2t3YXJkJzoge1xuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgeyB1bml0OiAnYmxvY2snIH0pXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZVNvZnRMaW5lQmFja3dhcmQnOiB7XG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJyB9KVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdkZWxldGVIYXJkTGluZUZvcndhcmQnOiB7XG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IsIHsgdW5pdDogJ2Jsb2NrJyB9KVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdkZWxldGVTb2Z0TGluZUZvcndhcmQnOiB7XG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IsIHsgdW5pdDogJ2xpbmUnIH0pXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZVdvcmRCYWNrd2FyZCc6IHtcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IsIHsgdW5pdDogJ3dvcmQnIH0pXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZVdvcmRGb3J3YXJkJzoge1xuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yLCB7IHVuaXQ6ICd3b3JkJyB9KVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdpbnNlcnRMaW5lQnJlYWsnOlxuICAgICAgICAgICAgRWRpdG9yLmluc2VydFNvZnRCcmVhayhlZGl0b3IpXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnaW5zZXJ0UGFyYWdyYXBoJzoge1xuICAgICAgICAgICAgRWRpdG9yLmluc2VydEJyZWFrKGVkaXRvcilcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnaW5zZXJ0RnJvbUNvbXBvc2l0aW9uJzpcbiAgICAgICAgICBjYXNlICdpbnNlcnRGcm9tRHJvcCc6XG4gICAgICAgICAgY2FzZSAnaW5zZXJ0RnJvbVBhc3RlJzpcbiAgICAgICAgICBjYXNlICdpbnNlcnRGcm9tWWFuayc6XG4gICAgICAgICAgY2FzZSAnaW5zZXJ0UmVwbGFjZW1lbnRUZXh0JzpcbiAgICAgICAgICBjYXNlICdpbnNlcnRUZXh0Jzoge1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdpbnNlcnRGcm9tQ29tcG9zaXRpb24nKSB7XG4gICAgICAgICAgICAgIC8vIENPTVBBVDogaW4gU2FmYXJpLCBgY29tcG9zaXRpb25lbmRgIGlzIGRpc3BhdGNoZWQgYWZ0ZXIgdGhlXG4gICAgICAgICAgICAgIC8vIGBiZWZvcmVpbnB1dGAgZm9yIFwiaW5zZXJ0RnJvbUNvbXBvc2l0aW9uXCIuIEJ1dCBpZiB3ZSB3YWl0IGZvciBpdFxuICAgICAgICAgICAgICAvLyB0aGVuIHdlIHdpbGwgYWJvcnQgYmVjYXVzZSB3ZSdyZSBzdGlsbCBjb21wb3NpbmcgYW5kIHRoZSBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgLy8gd29uJ3QgYmUgdXBkYXRlZCBwcm9wZXJseS5cbiAgICAgICAgICAgICAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL2lucHV0LWV2ZW50cy0yL1xuICAgICAgICAgICAgICBpZiAoUmVhY3RFZGl0b3IuaXNDb21wb3NpbmcoZWRpdG9yKSkge1xuICAgICAgICAgICAgICAgIHNldElzQ29tcG9zaW5nKGZhbHNlKVxuICAgICAgICAgICAgICAgIElTX0NPTVBPU0lORy5zZXQoZWRpdG9yLCBmYWxzZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB1c2UgYSB3ZWFrIGNvbXBhcmlzb24gaW5zdGVhZCBvZiAnaW5zdGFuY2VvZicgdG8gYWxsb3dcbiAgICAgICAgICAgIC8vIHByb2dyYW1tYXRpYyBhY2Nlc3Mgb2YgcGFzdGUgZXZlbnRzIGNvbWluZyBmcm9tIGV4dGVybmFsIHdpbmRvd3NcbiAgICAgICAgICAgIC8vIGxpa2UgY3lwcmVzcyB3aGVyZSBjeS53aW5kb3cgZG9lcyBub3Qgd29yayByZWFsaWJseVxuICAgICAgICAgICAgaWYgKGRhdGE/LmNvbnN0cnVjdG9yLm5hbWUgPT09ICdEYXRhVHJhbnNmZXInKSB7XG4gICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmluc2VydERhdGEoZWRpdG9yLCBkYXRhKVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgLy8gT25seSBpbnNlcnRUZXh0IG9wZXJhdGlvbnMgdXNlIHRoZSBuYXRpdmUgZnVuY3Rpb25hbGl0eSwgZm9yIG5vdy5cbiAgICAgICAgICAgICAgLy8gUG90ZW50aWFsbHkgZXhwYW5kIHRvIHNpbmdsZSBjaGFyYWN0ZXIgZGVsZXRlcywgYXMgd2VsbC5cbiAgICAgICAgICAgICAgaWYgKG5hdGl2ZSkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkT3BlcmF0aW9ucy5jdXJyZW50LnB1c2goKCkgPT5cbiAgICAgICAgICAgICAgICAgIEVkaXRvci5pbnNlcnRUZXh0KGVkaXRvciwgZGF0YSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgRWRpdG9yLmluc2VydFRleHQoZWRpdG9yLCBkYXRhKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVzdG9yZSB0aGUgYWN0dWFsIHVzZXIgc2VjdGlvbiBpZiBub3RoaW5nIG1hbnVhbGx5IHNldCBpdC5cbiAgICAgICAgY29uc3QgdG9SZXN0b3JlID0gRURJVE9SX1RPX1VTRVJfU0VMRUNUSU9OLmdldChlZGl0b3IpPy51bnJlZigpXG4gICAgICAgIEVESVRPUl9UT19VU0VSX1NFTEVDVElPTi5kZWxldGUoZWRpdG9yKVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0b1Jlc3RvcmUgJiZcbiAgICAgICAgICAoIWVkaXRvci5zZWxlY3Rpb24gfHwgIVJhbmdlLmVxdWFscyhlZGl0b3Iuc2VsZWN0aW9uLCB0b1Jlc3RvcmUpKVxuICAgICAgICApIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHRvUmVzdG9yZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgW3JlYWRPbmx5LCBwcm9wc09uRE9NQmVmb3JlSW5wdXRdXG4gIClcblxuICAvLyBBdHRhY2ggYSBuYXRpdmUgRE9NIGV2ZW50IGhhbmRsZXIgZm9yIGBiZWZvcmVpbnB1dGAgZXZlbnRzLCBiZWNhdXNlIFJlYWN0J3NcbiAgLy8gYnVpbHQtaW4gYG9uQmVmb3JlSW5wdXRgIGlzIGFjdHVhbGx5IGEgbGVha3kgcG9seWZpbGwgdGhhdCBkb2Vzbid0IGV4cG9zZVxuICAvLyByZWFsIGBiZWZvcmVpbnB1dGAgZXZlbnRzIHNhZGx5Li4uICgyMDE5LzExLzA0KVxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzExMjExXG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZWYuY3VycmVudCAmJiBIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQpIHtcbiAgICAgIC8vIEB0cy1pZ25vcmUgVGhlIGBiZWZvcmVpbnB1dGAgZXZlbnQgaXNuJ3QgcmVjb2duaXplZC5cbiAgICAgIHJlZi5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZWlucHV0Jywgb25ET01CZWZvcmVJbnB1dClcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHJlZi5jdXJyZW50ICYmIEhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlIFRoZSBgYmVmb3JlaW5wdXRgIGV2ZW50IGlzbid0IHJlY29nbml6ZWQuXG4gICAgICAgIHJlZi5jdXJyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZWlucHV0Jywgb25ET01CZWZvcmVJbnB1dClcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtvbkRPTUJlZm9yZUlucHV0XSlcblxuICAvLyBBdHRhY2ggYSBuYXRpdmUgRE9NIGV2ZW50IGhhbmRsZXIgZm9yIGBzZWxlY3Rpb25jaGFuZ2VgLCBiZWNhdXNlIFJlYWN0J3NcbiAgLy8gYnVpbHQtaW4gYG9uU2VsZWN0YCBoYW5kbGVyIGRvZXNuJ3QgZmlyZSBmb3IgYWxsIHNlbGVjdGlvbiBjaGFuZ2VzLiBJdCdzIGFcbiAgLy8gbGVha3kgcG9seWZpbGwgdGhhdCBvbmx5IGZpcmVzIG9uIGtleXByZXNzZXMgb3IgY2xpY2tzLiBJbnN0ZWFkLCB3ZSB3YW50IHRvXG4gIC8vIGZpcmUgZm9yIGFueSBjaGFuZ2UgdG8gdGhlIHNlbGVjdGlvbiBpbnNpZGUgdGhlIGVkaXRvci4gKDIwMTkvMTEvMDQpXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvNTc4NVxuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB3aW5kb3cgPSBSZWFjdEVkaXRvci5nZXRXaW5kb3coZWRpdG9yKVxuXG4gICAgd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnc2VsZWN0aW9uY2hhbmdlJyxcbiAgICAgIHNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2VcbiAgICApXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICdzZWxlY3Rpb25jaGFuZ2UnLFxuICAgICAgICBzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlXG4gICAgICApXG4gICAgfVxuICB9LCBbc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZV0pXG5cbiAgY29uc3QgZGVjb3JhdGlvbnMgPSBkZWNvcmF0ZShbZWRpdG9yLCBbXV0pXG5cbiAgaWYgKFxuICAgIHBsYWNlaG9sZGVyICYmXG4gICAgZWRpdG9yLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJlxuICAgIEFycmF5LmZyb20oTm9kZS50ZXh0cyhlZGl0b3IpKS5sZW5ndGggPT09IDEgJiZcbiAgICBOb2RlLnN0cmluZyhlZGl0b3IpID09PSAnJyAmJlxuICAgICFpc0NvbXBvc2luZ1xuICApIHtcbiAgICBjb25zdCBzdGFydCA9IEVkaXRvci5zdGFydChlZGl0b3IsIFtdKVxuICAgIGRlY29yYXRpb25zLnB1c2goe1xuICAgICAgW1BMQUNFSE9MREVSX1NZTUJPTF06IHRydWUsXG4gICAgICBwbGFjZWhvbGRlcixcbiAgICAgIGFuY2hvcjogc3RhcnQsXG4gICAgICBmb2N1czogc3RhcnQsXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHsgbWFya3MgfSA9IGVkaXRvclxuICBzdGF0ZS5oYXNNYXJrUGxhY2Vob2xkZXIgPSBmYWxzZVxuXG4gIGlmIChlZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pICYmIG1hcmtzKSB7XG4gICAgY29uc3QgeyBhbmNob3IgfSA9IGVkaXRvci5zZWxlY3Rpb25cbiAgICBjb25zdCBsZWFmID0gTm9kZS5sZWFmKGVkaXRvciwgYW5jaG9yLnBhdGgpXG4gICAgY29uc3QgeyB0ZXh0LCAuLi5yZXN0IH0gPSBsZWFmXG5cbiAgICAvLyBXaGlsZSBtYXJrcyBpc24ndCBhICdjb21wbGV0ZScgdGV4dCwgd2UgY2FuIHN0aWxsIHVzZSBsb29zZSBUZXh0LmVxdWFsc1xuICAgIC8vIGhlcmUgd2hpY2ggb25seSBjb21wYXJlcyBtYXJrcyBhbnl3YXkuXG4gICAgaWYgKCFUZXh0LmVxdWFscyhsZWFmLCBtYXJrcyBhcyBUZXh0LCB7IGxvb3NlOiB0cnVlIH0pKSB7XG4gICAgICBzdGF0ZS5oYXNNYXJrUGxhY2Vob2xkZXIgPSB0cnVlXG5cbiAgICAgIGNvbnN0IHVuc2V0ID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICBPYmplY3Qua2V5cyhyZXN0KS5tYXAobWFyayA9PiBbbWFyaywgbnVsbF0pXG4gICAgICApXG5cbiAgICAgIGRlY29yYXRpb25zLnB1c2goe1xuICAgICAgICBbTUFSS19QTEFDRUhPTERFUl9TWU1CT0xdOiB0cnVlLFxuICAgICAgICAuLi51bnNldCxcbiAgICAgICAgLi4ubWFya3MsXG5cbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBmb2N1czogYW5jaG9yLFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgRURJVE9SX1RPX01BUktfUExBQ0VIT0xERVJfTUFSS1MgaW4gc2V0VGltZW91dCB1c2VFZmZlY3QgdG8gZW5zdXJlIHdlIGRvbid0IHNldCBpdFxuICAvLyBiZWZvcmUgd2UgcmVjZWl2ZSB0aGUgY29tcG9zaXRpb24gZW5kIGV2ZW50LlxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICBjb25zdCB7IGFuY2hvciB9ID0gc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IHRleHQgPSBOb2RlLmxlYWYoZWRpdG9yLCBhbmNob3IucGF0aClcblxuICAgICAgICAvLyBXaGlsZSBtYXJrcyBpc24ndCBhICdjb21wbGV0ZScgdGV4dCwgd2UgY2FuIHN0aWxsIHVzZSBsb29zZSBUZXh0LmVxdWFsc1xuICAgICAgICAvLyBoZXJlIHdoaWNoIG9ubHkgY29tcGFyZXMgbWFya3MgYW55d2F5LlxuICAgICAgICBpZiAobWFya3MgJiYgIVRleHQuZXF1YWxzKHRleHQsIG1hcmtzIGFzIFRleHQsIHsgbG9vc2U6IHRydWUgfSkpIHtcbiAgICAgICAgICBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1Muc2V0KGVkaXRvciwgbWFya3MpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLmRlbGV0ZShlZGl0b3IpXG4gICAgfSlcbiAgfSlcblxuICBjb25zdCBwbGFjZWhvbGRlckhlaWdodCA9IEVESVRPUl9UT19QTEFDRUhPTERFUl9FTEVNRU5ULmdldChcbiAgICBlZGl0b3JcbiAgKT8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk/LmhlaWdodFxuXG4gIHJldHVybiAoXG4gICAgPFJlYWRPbmx5Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17cmVhZE9ubHl9PlxuICAgICAgPERlY29yYXRlQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17ZGVjb3JhdGV9PlxuICAgICAgICA8UmVzdG9yZURPTSBub2RlPXtyZWZ9IHJlY2VpdmVkVXNlcklucHV0PXtyZWNlaXZlZFVzZXJJbnB1dH0+XG4gICAgICAgICAgPENvbXBvbmVudFxuICAgICAgICAgICAgcm9sZT17cmVhZE9ubHkgPyB1bmRlZmluZWQgOiAndGV4dGJveCd9XG4gICAgICAgICAgICBhcmlhLW11bHRpbGluZT17cmVhZE9ubHkgPyB1bmRlZmluZWQgOiB0cnVlfVxuICAgICAgICAgICAgey4uLmF0dHJpYnV0ZXN9XG4gICAgICAgICAgICAvLyBDT01QQVQ6IENlcnRhaW4gYnJvd3NlcnMgZG9uJ3Qgc3VwcG9ydCB0aGUgYGJlZm9yZWlucHV0YCBldmVudCwgc28gd2UnZFxuICAgICAgICAgICAgLy8gaGF2ZSB0byB1c2UgaGFja3MgdG8gbWFrZSB0aGVzZSByZXBsYWNlbWVudC1iYXNlZCBmZWF0dXJlcyB3b3JrLlxuICAgICAgICAgICAgLy8gRm9yIFNTUiBzaXR1YXRpb25zIEhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCBpcyBmYWxzZSBhbmQgcmVzdWx0cyBpbiBwcm9wXG4gICAgICAgICAgICAvLyBtaXNtYXRjaCB3YXJuaW5nIGFwcCBtb3ZlcyB0byBicm93c2VyLiBQYXNzLXRocm91Z2ggY29uc3VtZXIgcHJvcHMgd2hlblxuICAgICAgICAgICAgLy8gbm90IENBTl9VU0VfRE9NIChTU1IpIGFuZCBkZWZhdWx0IHRvIGZhbHN5IHZhbHVlXG4gICAgICAgICAgICBzcGVsbENoZWNrPXtcbiAgICAgICAgICAgICAgSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUIHx8ICFDQU5fVVNFX0RPTVxuICAgICAgICAgICAgICAgID8gYXR0cmlidXRlcy5zcGVsbENoZWNrXG4gICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXV0b0NvcnJlY3Q9e1xuICAgICAgICAgICAgICBIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQgfHwgIUNBTl9VU0VfRE9NXG4gICAgICAgICAgICAgICAgPyBhdHRyaWJ1dGVzLmF1dG9Db3JyZWN0XG4gICAgICAgICAgICAgICAgOiAnZmFsc2UnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdXRvQ2FwaXRhbGl6ZT17XG4gICAgICAgICAgICAgIEhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCB8fCAhQ0FOX1VTRV9ET01cbiAgICAgICAgICAgICAgICA/IGF0dHJpYnV0ZXMuYXV0b0NhcGl0YWxpemVcbiAgICAgICAgICAgICAgICA6ICdmYWxzZSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGEtc2xhdGUtZWRpdG9yXG4gICAgICAgICAgICBkYXRhLXNsYXRlLW5vZGU9XCJ2YWx1ZVwiXG4gICAgICAgICAgICAvLyBleHBsaWNpdGx5IHNldCB0aGlzXG4gICAgICAgICAgICBjb250ZW50RWRpdGFibGU9eyFyZWFkT25seX1cbiAgICAgICAgICAgIC8vIGluIHNvbWUgY2FzZXMsIGEgZGVjb3JhdGlvbiBuZWVkcyBhY2Nlc3MgdG8gdGhlIHJhbmdlIC8gc2VsZWN0aW9uIHRvIGRlY29yYXRlIGEgdGV4dCBub2RlLFxuICAgICAgICAgICAgLy8gdGhlbiB5b3Ugd2lsbCBzZWxlY3QgdGhlIHdob2xlIHRleHQgbm9kZSB3aGVuIHlvdSBzZWxlY3QgcGFydCB0aGUgb2YgdGV4dFxuICAgICAgICAgICAgLy8gdGhpcyBtYWdpYyB6SW5kZXg9XCItMVwiIHdpbGwgZml4IGl0XG4gICAgICAgICAgICB6aW5kZXg9ey0xfVxuICAgICAgICAgICAgc3VwcHJlc3NDb250ZW50RWRpdGFibGVXYXJuaW5nXG4gICAgICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIC4uLihkaXNhYmxlRGVmYXVsdFN0eWxlc1xuICAgICAgICAgICAgICAgID8ge31cbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWxsb3cgcG9zaXRpb25pbmcgcmVsYXRpdmUgdG8gdGhlIGVkaXRhYmxlIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IHRoZSBkZWZhdWx0IG91dGxpbmUgc3R5bGVzLlxuICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgIC8vIFByZXNlcnZlIGFkamFjZW50IHdoaXRlc3BhY2UgYW5kIG5ldyBsaW5lcy5cbiAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogJ3ByZS13cmFwJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gQWxsb3cgd29yZHMgdG8gYnJlYWsgaWYgdGhleSBhcmUgdG9vIGxvbmcuXG4gICAgICAgICAgICAgICAgICAgIHdvcmRXcmFwOiAnYnJlYWstd29yZCcsXG4gICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgdGhlIG1pbmltdW0gaGVpZ2h0IHRoYXQgb2YgdGhlIHBsYWNlaG9sZGVyLlxuICAgICAgICAgICAgICAgICAgICAuLi4ocGxhY2Vob2xkZXJIZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICA/IHsgbWluSGVpZ2h0OiBwbGFjZWhvbGRlckhlaWdodCB9XG4gICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgLy8gQWxsb3cgZm9yIHBhc3NlZC1pbiBzdHlsZXMgdG8gb3ZlcnJpZGUgYW55dGhpbmcuXG4gICAgICAgICAgICAgIC4uLnVzZXJTdHlsZSxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbkJlZm9yZUlucHV0PXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5Gb3JtRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBDZXJ0YWluIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgdGhlIGBiZWZvcmVpbnB1dGAgZXZlbnQsIHNvIHdlXG4gICAgICAgICAgICAgICAgLy8gZmFsbCBiYWNrIHRvIFJlYWN0J3MgbGVha3kgcG9seWZpbGwgaW5zdGVhZCBqdXN0IGZvciBpdC4gSXRcbiAgICAgICAgICAgICAgICAvLyBvbmx5IHdvcmtzIGZvciB0aGUgYGluc2VydFRleHRgIGlucHV0IHR5cGUuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgIUhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCAmJlxuICAgICAgICAgICAgICAgICAgIXJlYWRPbmx5ICYmXG4gICAgICAgICAgICAgICAgICAhaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25CZWZvcmVJbnB1dCkgJiZcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc1NlbGVjdGFibGVUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICBpZiAoIVJlYWN0RWRpdG9yLmlzQ29tcG9zaW5nKGVkaXRvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IChldmVudCBhcyBhbnkpLmRhdGEgYXMgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgIEVkaXRvci5pbnNlcnRUZXh0KGVkaXRvciwgdGV4dClcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFtyZWFkT25seV1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbklucHV0PXt1c2VDYWxsYmFjaygoZXZlbnQ6IFJlYWN0LlN5bnRoZXRpY0V2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChhbmRyb2lkSW5wdXRNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgYW5kcm9pZElucHV0TWFuYWdlci5oYW5kbGVJbnB1dCgpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBGbHVzaCBuYXRpdmUgb3BlcmF0aW9ucywgYXMgbmF0aXZlIGV2ZW50cyB3aWxsIGhhdmUgcHJvcG9nYXRlZFxuICAgICAgICAgICAgICAvLyBhbmQgd2UgY2FuIGNvcnJlY3RseSBjb21wYXJlIERPTSB0ZXh0IHZhbHVlcyBpbiBjb21wb25lbnRzXG4gICAgICAgICAgICAgIC8vIHRvIHN0b3AgcmVuZGVyaW5nLCBzbyB0aGF0IGJyb3dzZXIgZnVuY3Rpb25zIGxpa2UgYXV0b2NvcnJlY3RcbiAgICAgICAgICAgICAgLy8gYW5kIHNwZWxsY2hlY2sgd29yayBhcyBleHBlY3RlZC5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBvcCBvZiBkZWZlcnJlZE9wZXJhdGlvbnMuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIG9wKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkZWZlcnJlZE9wZXJhdGlvbnMuY3VycmVudCA9IFtdXG4gICAgICAgICAgICB9LCBbXSl9XG4gICAgICAgICAgICBvbkJsdXI9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkZvY3VzRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgcmVhZE9ubHkgfHxcbiAgICAgICAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmdTZWxlY3Rpb24gfHxcbiAgICAgICAgICAgICAgICAgICFSZWFjdEVkaXRvci5oYXNTZWxlY3RhYmxlVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSB8fFxuICAgICAgICAgICAgICAgICAgaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25CbHVyKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBJZiB0aGUgY3VycmVudCBgYWN0aXZlRWxlbWVudGAgaXMgc3RpbGwgdGhlIHByZXZpb3VzXG4gICAgICAgICAgICAgICAgLy8gb25lLCB0aGlzIGlzIGR1ZSB0byB0aGUgd2luZG93IGJlaW5nIGJsdXJyZWQgd2hlbiB0aGUgdGFiXG4gICAgICAgICAgICAgICAgLy8gaXRzZWxmIGJlY29tZXMgdW5mb2N1c2VkLCBzbyB3ZSB3YW50IHRvIGFib3J0IGVhcmx5IHRvIGFsbG93IHRvXG4gICAgICAgICAgICAgICAgLy8gZWRpdG9yIHRvIHN0YXkgZm9jdXNlZCB3aGVuIHRoZSB0YWIgYmVjb21lcyBmb2N1c2VkIGFnYWluLlxuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3QgPSBSZWFjdEVkaXRvci5maW5kRG9jdW1lbnRPclNoYWRvd1Jvb3QoZWRpdG9yKVxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5sYXRlc3RFbGVtZW50ID09PSByb290LmFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcmVsYXRlZFRhcmdldCB9ID0gZXZlbnRcbiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcilcblxuICAgICAgICAgICAgICAgIC8vIENPTVBBVDogVGhlIGV2ZW50IHNob3VsZCBiZSBpZ25vcmVkIGlmIHRoZSBmb2N1cyBpcyByZXR1cm5pbmdcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgZWRpdG9yIGZyb20gYW4gZW1iZWRkZWQgZWRpdGFibGUgZWxlbWVudCAoZWcuIGFuIDxpbnB1dD5cbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50IGluc2lkZSBhIHZvaWQgbm9kZSkuXG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0ZWRUYXJnZXQgPT09IGVsKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IFRoZSBldmVudCBzaG91bGQgYmUgaWdub3JlZCBpZiB0aGUgZm9jdXMgaXMgbW92aW5nIGZyb21cbiAgICAgICAgICAgICAgICAvLyB0aGUgZWRpdG9yIHRvIGluc2lkZSBhIHZvaWQgbm9kZSdzIHNwYWNlciBlbGVtZW50LlxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGlzRE9NRWxlbWVudChyZWxhdGVkVGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtc3BhY2VyJylcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENPTVBBVDogVGhlIGV2ZW50IHNob3VsZCBiZSBpZ25vcmVkIGlmIHRoZSBmb2N1cyBpcyBtb3ZpbmcgdG8gYVxuICAgICAgICAgICAgICAgIC8vIG5vbi0gZWRpdGFibGUgc2VjdGlvbiBvZiBhbiBlbGVtZW50IHRoYXQgaXNuJ3QgYSB2b2lkIG5vZGUgKGVnLlxuICAgICAgICAgICAgICAgIC8vIGEgbGlzdCBpdGVtIG9mIHRoZSBjaGVjayBsaXN0IGV4YW1wbGUpLlxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIHJlbGF0ZWRUYXJnZXQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgaXNET01Ob2RlKHJlbGF0ZWRUYXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNET01Ob2RlKGVkaXRvciwgcmVsYXRlZFRhcmdldClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBSZWFjdEVkaXRvci50b1NsYXRlTm9kZShlZGl0b3IsIHJlbGF0ZWRUYXJnZXQpXG5cbiAgICAgICAgICAgICAgICAgIGlmIChFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJiAhZWRpdG9yLmlzVm9pZChub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IFNhZmFyaSBkb2Vzbid0IGFsd2F5cyByZW1vdmUgdGhlIHNlbGVjdGlvbiBldmVuIGlmIHRoZSBjb250ZW50LVxuICAgICAgICAgICAgICAgIC8vIGVkaXRhYmxlIGVsZW1lbnQgbm8gbG9uZ2VyIGhhcyBmb2N1cy4gUmVmZXIgdG86XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTIzNTMyNDcvZm9yY2UtY29udGVudGVkaXRhYmxlLWRpdi10by1zdG9wLWFjY2VwdGluZy1pbnB1dC1hZnRlci1pdC1sb3Nlcy1mb2N1cy11bmRlci13ZWJcbiAgICAgICAgICAgICAgICBpZiAoSVNfU0FGQVJJKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBkb21TZWxlY3Rpb24gPSByb290LmdldFNlbGVjdGlvbigpXG4gICAgICAgICAgICAgICAgICBkb21TZWxlY3Rpb24/LnJlbW92ZUFsbFJhbmdlcygpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgSVNfRk9DVVNFRC5kZWxldGUoZWRpdG9yKVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbcmVhZE9ubHksIGF0dHJpYnV0ZXMub25CbHVyXVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgIWlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uQ2xpY2spICYmXG4gICAgICAgICAgICAgICAgICBpc0RPTU5vZGUoZXZlbnQudGFyZ2V0KVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVOb2RlKGVkaXRvciwgZXZlbnQudGFyZ2V0KVxuICAgICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgbm9kZSlcblxuICAgICAgICAgICAgICAgICAgLy8gQXQgdGhpcyB0aW1lLCB0aGUgU2xhdGUgZG9jdW1lbnQgbWF5IGJlIGFyYml0cmFyaWx5IGRpZmZlcmVudCxcbiAgICAgICAgICAgICAgICAgIC8vIGJlY2F1c2Ugb25DbGljayBoYW5kbGVycyBjYW4gY2hhbmdlIHRoZSBkb2N1bWVudCBiZWZvcmUgd2UgZ2V0IGhlcmUuXG4gICAgICAgICAgICAgICAgICAvLyBUaGVyZWZvcmUgd2UgbXVzdCBjaGVjayB0aGF0IHRoaXMgcGF0aCBhY3R1YWxseSBleGlzdHMsXG4gICAgICAgICAgICAgICAgICAvLyBhbmQgdGhhdCBpdCBzdGlsbCByZWZlcnMgdG8gdGhlIHNhbWUgbm9kZS5cbiAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgIUVkaXRvci5oYXNQYXRoKGVkaXRvciwgcGF0aCkgfHxcbiAgICAgICAgICAgICAgICAgICAgTm9kZS5nZXQoZWRpdG9yLCBwYXRoKSAhPT0gbm9kZVxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGV0YWlsID09PSBUUklQTEVfQ0xJQ0sgJiYgcGF0aC5sZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmxvY2tQYXRoID0gcGF0aFxuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgIShFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG5vZGUpKVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9jayA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoOiBuID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbiksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdDogcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgYmxvY2tQYXRoID0gYmxvY2s/LlsxXSA/PyBwYXRoLnNsaWNlKDAsIDEpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIGJsb2NrUGF0aClcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCByYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChyZWFkT25seSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBwYXRoKVxuICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gRWRpdG9yLmVuZChlZGl0b3IsIHBhdGgpXG4gICAgICAgICAgICAgICAgICBjb25zdCBzdGFydFZvaWQgPSBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQ6IHN0YXJ0IH0pXG4gICAgICAgICAgICAgICAgICBjb25zdCBlbmRWb2lkID0gRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0OiBlbmQgfSlcblxuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBzdGFydFZvaWQgJiZcbiAgICAgICAgICAgICAgICAgICAgZW5kVm9pZCAmJlxuICAgICAgICAgICAgICAgICAgICBQYXRoLmVxdWFscyhzdGFydFZvaWRbMV0sIGVuZFZvaWRbMV0pXG4gICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBzdGFydClcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCByYW5nZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFtyZWFkT25seSwgYXR0cmlidXRlcy5vbkNsaWNrXVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uQ29tcG9zaXRpb25FbmQ9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkNvbXBvc2l0aW9uRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFJlYWN0RWRpdG9yLmhhc1NlbGVjdGFibGVUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoUmVhY3RFZGl0b3IuaXNDb21wb3NpbmcoZWRpdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRJc0NvbXBvc2luZyhmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgSVNfQ09NUE9TSU5HLnNldChlZGl0b3IsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBhbmRyb2lkSW5wdXRNYW5hZ2VyPy5oYW5kbGVDb21wb3NpdGlvbkVuZChldmVudClcblxuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkNvbXBvc2l0aW9uRW5kKSB8fFxuICAgICAgICAgICAgICAgICAgICBJU19BTkRST0lEXG4gICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIC8vIENPTVBBVDogSW4gQ2hyb21lLCBgYmVmb3JlaW5wdXRgIGV2ZW50cyBmb3IgY29tcG9zaXRpb25zXG4gICAgICAgICAgICAgICAgICAvLyBhcmVuJ3QgY29ycmVjdCBhbmQgbmV2ZXIgZmlyZSB0aGUgXCJpbnNlcnRGcm9tQ29tcG9zaXRpb25cIlxuICAgICAgICAgICAgICAgICAgLy8gdHlwZSB0aGF0IHdlIG5lZWQuIFNvIGluc3RlYWQsIGluc2VydCB3aGVuZXZlciBhIGNvbXBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAvLyBlbmRzIHNpbmNlIGl0IHdpbGwgYWxyZWFkeSBoYXZlIGJlZW4gY29tbWl0dGVkIHRvIHRoZSBET00uXG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICFJU19TQUZBUkkgJiZcbiAgICAgICAgICAgICAgICAgICAgIUlTX0ZJUkVGT1hfTEVHQUNZICYmXG4gICAgICAgICAgICAgICAgICAgICFJU19JT1MgJiZcbiAgICAgICAgICAgICAgICAgICAgIUlTX1dFQ0hBVEJST1dTRVIgJiZcbiAgICAgICAgICAgICAgICAgICAgIUlTX1VDX01PQklMRSAmJlxuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhXG4gICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXJNYXJrcyA9IEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUy5nZXQoXG4gICAgICAgICAgICAgICAgICAgICAgZWRpdG9yXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLmRlbGV0ZShlZGl0b3IpXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIHdlIGluc2VydCB0ZXh0IHdpdGggdGhlIG1hcmtzIHRoZSB1c2VyIHdhcyBhY3R1YWxseSBzZWVpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyTWFya3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgIEVESVRPUl9UT19VU0VSX01BUktTLnNldChlZGl0b3IsIGVkaXRvci5tYXJrcylcbiAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IubWFya3MgPSBwbGFjZWhvbGRlck1hcmtzXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBFZGl0b3IuaW5zZXJ0VGV4dChlZGl0b3IsIGV2ZW50LmRhdGEpXG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlck1hcmtzID0gRURJVE9SX1RPX1VTRVJfTUFSS1MuZ2V0KGVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgRURJVE9SX1RPX1VTRVJfTUFSS1MuZGVsZXRlKGVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJNYXJrcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLm1hcmtzID0gdXNlck1hcmtzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFthdHRyaWJ1dGVzLm9uQ29tcG9zaXRpb25FbmRdXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25Db21wb3NpdGlvblVwZGF0ZT17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuQ29tcG9zaXRpb25FdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNTZWxlY3RhYmxlVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgIWlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uQ29tcG9zaXRpb25VcGRhdGUpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoIVJlYWN0RWRpdG9yLmlzQ29tcG9zaW5nKGVkaXRvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNDb21wb3NpbmcodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgSVNfQ09NUE9TSU5HLnNldChlZGl0b3IsIHRydWUpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbYXR0cmlidXRlcy5vbkNvbXBvc2l0aW9uVXBkYXRlXVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uQ29tcG9zaXRpb25TdGFydD17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuQ29tcG9zaXRpb25FdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoUmVhY3RFZGl0b3IuaGFzU2VsZWN0YWJsZVRhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgIGFuZHJvaWRJbnB1dE1hbmFnZXI/LmhhbmRsZUNvbXBvc2l0aW9uU3RhcnQoZXZlbnQpXG5cbiAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25Db21wb3NpdGlvblN0YXJ0KSB8fFxuICAgICAgICAgICAgICAgICAgICBJU19BTkRST0lEXG4gICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIHNldElzQ29tcG9zaW5nKHRydWUpXG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5saW5lID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgICAgICAgICAgICAgICAgIG1hdGNoOiBuID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNJbmxpbmUoZWRpdG9yLCBuKSxcbiAgICAgICAgICAgICAgICAgICAgICBtb2RlOiAnaGlnaGVzdCcsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmxpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbLCBpbmxpbmVQYXRoXSA9IGlubGluZVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChFZGl0b3IuaXNFbmQoZWRpdG9yLCBzZWxlY3Rpb24uYW5jaG9yLCBpbmxpbmVQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9pbnQgPSBFZGl0b3IuYWZ0ZXIoZWRpdG9yLCBpbmxpbmVQYXRoKSFcbiAgICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2V0U2VsZWN0aW9uKGVkaXRvciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3I6IHBvaW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1czogcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW2F0dHJpYnV0ZXMub25Db21wb3NpdGlvblN0YXJ0XVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uQ29weT17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuQ2xpcGJvYXJkRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzU2VsZWN0YWJsZVRhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICFpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkNvcHkpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5zZXRGcmFnbWVudERhdGEoXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuY2xpcGJvYXJkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgJ2NvcHknXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbYXR0cmlidXRlcy5vbkNvcHldXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25DdXQ9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkNsaXBib2FyZEV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFyZWFkT25seSAmJlxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzU2VsZWN0YWJsZVRhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICFpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkN1dClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLnNldEZyYWdtZW50RGF0YShcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICBldmVudC5jbGlwYm9hcmREYXRhLFxuICAgICAgICAgICAgICAgICAgICAnY3V0J1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuXG4gICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBOb2RlLnBhcmVudChlZGl0b3IsIHNlbGVjdGlvbi5hbmNob3IucGF0aClcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoRWRpdG9yLmlzVm9pZChlZGl0b3IsIG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbcmVhZE9ubHksIGF0dHJpYnV0ZXMub25DdXRdXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25EcmFnT3Zlcj17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuRHJhZ0V2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc1RhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICFpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkRyYWdPdmVyKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZSB0YXJnZXQgaXMgdm9pZCwgY2FsbCBgcHJldmVudERlZmF1bHRgIHRvIHNpZ25hbFxuICAgICAgICAgICAgICAgICAgLy8gdGhhdCBkcm9wcyBhcmUgYWxsb3dlZC4gRWRpdGFibGUgY29udGVudCBpcyBkcm9wcGFibGUgYnlcbiAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQsIGFuZCBjYWxsaW5nIGBwcmV2ZW50RGVmYXVsdGAgaGlkZXMgdGhlIGN1cnNvci5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBSZWFjdEVkaXRvci50b1NsYXRlTm9kZShlZGl0b3IsIGV2ZW50LnRhcmdldClcblxuICAgICAgICAgICAgICAgICAgaWYgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmIEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbYXR0cmlidXRlcy5vbkRyYWdPdmVyXVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0PXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgIXJlYWRPbmx5ICYmXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICAhaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25EcmFnU3RhcnQpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gUmVhY3RFZGl0b3IudG9TbGF0ZU5vZGUoZWRpdG9yLCBldmVudC50YXJnZXQpXG4gICAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBub2RlKVxuICAgICAgICAgICAgICAgICAgY29uc3Qgdm9pZE1hdGNoID1cbiAgICAgICAgICAgICAgICAgICAgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmIEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBub2RlKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0OiBwYXRoLCB2b2lkczogdHJ1ZSB9KVxuXG4gICAgICAgICAgICAgICAgICAvLyBJZiBzdGFydGluZyBhIGRyYWcgb24gYSB2b2lkIG5vZGUsIG1ha2Ugc3VyZSBpdCBpcyBzZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgLy8gc28gdGhhdCBpdCBzaG93cyB1cCBpbiB0aGUgc2VsZWN0aW9uJ3MgZnJhZ21lbnQuXG4gICAgICAgICAgICAgICAgICBpZiAodm9pZE1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgcGF0aClcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCByYW5nZSlcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgc3RhdGUuaXNEcmFnZ2luZ0ludGVybmFsbHkgPSB0cnVlXG5cbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLnNldEZyYWdtZW50RGF0YShcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIsXG4gICAgICAgICAgICAgICAgICAgICdkcmFnJ1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW3JlYWRPbmx5LCBhdHRyaWJ1dGVzLm9uRHJhZ1N0YXJ0XVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uRHJvcD17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuRHJhZ0V2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFyZWFkT25seSAmJlxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgIWlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uRHJvcClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgLy8gS2VlcCBhIHJlZmVyZW5jZSB0byB0aGUgZHJhZ2dlZCByYW5nZSBiZWZvcmUgdXBkYXRpbmcgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICBjb25zdCBkcmFnZ2VkUmFuZ2UgPSBlZGl0b3Iuc2VsZWN0aW9uXG5cbiAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHJhbmdlIHdoZXJlIHRoZSBkcm9wIGhhcHBlbmVkXG4gICAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IFJlYWN0RWRpdG9yLmZpbmRFdmVudFJhbmdlKGVkaXRvciwgZXZlbnQpXG4gICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YVRyYW5zZmVyXG5cbiAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgcmFuZ2UpXG5cbiAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5pc0RyYWdnaW5nSW50ZXJuYWxseSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgZHJhZ2dlZFJhbmdlICYmXG4gICAgICAgICAgICAgICAgICAgICAgIVJhbmdlLmVxdWFscyhkcmFnZ2VkUmFuZ2UsIHJhbmdlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICFFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQ6IHJhbmdlLCB2b2lkczogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0OiBkcmFnZ2VkUmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5pbnNlcnREYXRhKGVkaXRvciwgZGF0YSlcblxuICAgICAgICAgICAgICAgICAgLy8gV2hlbiBkcmFnZ2luZyBmcm9tIGFub3RoZXIgc291cmNlIGludG8gdGhlIGVkaXRvciwgaXQncyBwb3NzaWJsZVxuICAgICAgICAgICAgICAgICAgLy8gdGhhdCB0aGUgY3VycmVudCBlZGl0b3IgZG9lcyBub3QgaGF2ZSBmb2N1cy5cbiAgICAgICAgICAgICAgICAgIGlmICghUmVhY3RFZGl0b3IuaXNGb2N1c2VkKGVkaXRvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuZm9jdXMoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHN0YXRlLmlzRHJhZ2dpbmdJbnRlcm5hbGx5ID0gZmFsc2VcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW3JlYWRPbmx5LCBhdHRyaWJ1dGVzLm9uRHJvcF1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbkRyYWdFbmQ9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkRyYWdFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhcmVhZE9ubHkgJiZcbiAgICAgICAgICAgICAgICAgIHN0YXRlLmlzRHJhZ2dpbmdJbnRlcm5hbGx5ICYmXG4gICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLm9uRHJhZ0VuZCAmJlxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5vbkRyYWdFbmQoZXZlbnQpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiBkcm9wcGluZyBvbiBhIGRpZmZlcmVudCBkcm9wcGFibGUgZWxlbWVudCB0aGFuIHRoZSBjdXJyZW50IGVkaXRvcixcbiAgICAgICAgICAgICAgICAvLyBgb25Ecm9wYCBpcyBub3QgY2FsbGVkLiBTbyB3ZSBuZWVkIHRvIGNsZWFuIHVwIGluIGBvbkRyYWdFbmRgIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogYG9uRHJhZ0VuZGAgaXMgb25seSBjYWxsZWQgd2hlbiBgb25Ecm9wYCBpcyBub3QgY2FsbGVkXG4gICAgICAgICAgICAgICAgc3RhdGUuaXNEcmFnZ2luZ0ludGVybmFsbHkgPSBmYWxzZVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbcmVhZE9ubHksIGF0dHJpYnV0ZXMub25EcmFnRW5kXVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uRm9jdXM9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkZvY3VzRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgIXJlYWRPbmx5ICYmXG4gICAgICAgICAgICAgICAgICAhc3RhdGUuaXNVcGRhdGluZ1NlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzRWRpdGFibGVUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICAhaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25Gb2N1cylcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgY29uc3Qgcm9vdCA9IFJlYWN0RWRpdG9yLmZpbmREb2N1bWVudE9yU2hhZG93Um9vdChlZGl0b3IpXG4gICAgICAgICAgICAgICAgICBzdGF0ZS5sYXRlc3RFbGVtZW50ID0gcm9vdC5hY3RpdmVFbGVtZW50XG5cbiAgICAgICAgICAgICAgICAgIC8vIENPTVBBVDogSWYgdGhlIGVkaXRvciBoYXMgbmVzdGVkIGVkaXRhYmxlIGVsZW1lbnRzLCB0aGUgZm9jdXNcbiAgICAgICAgICAgICAgICAgIC8vIGNhbiBnbyB0byB0aGVtLiBJbiBGaXJlZm94LCB0aGlzIG11c3QgYmUgcHJldmVudGVkIGJlY2F1c2UgaXRcbiAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdHMgaW4gaXNzdWVzIHdpdGgga2V5Ym9hcmQgbmF2aWdhdGlvbi4gKDIwMTcvMDMvMzApXG4gICAgICAgICAgICAgICAgICBpZiAoSVNfRklSRUZPWCAmJiBldmVudC50YXJnZXQgIT09IGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLmZvY3VzKClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIElTX0ZPQ1VTRUQuc2V0KGVkaXRvciwgdHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFtyZWFkT25seSwgYXR0cmlidXRlcy5vbkZvY3VzXVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uS2V5RG93bj17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuS2V5Ym9hcmRFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhcmVhZE9ubHkgJiZcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc0VkaXRhYmxlVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgYW5kcm9pZElucHV0TWFuYWdlcj8uaGFuZGxlS2V5RG93bihldmVudClcblxuICAgICAgICAgICAgICAgICAgY29uc3QgeyBuYXRpdmVFdmVudCB9ID0gZXZlbnRcblxuICAgICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBUaGUgY29tcG9zaXRpb24gZW5kIGV2ZW50IGlzbid0IGZpcmVkIHJlbGlhYmx5IGluIGFsbCBicm93c2VycyxcbiAgICAgICAgICAgICAgICAgIC8vIHNvIHdlIHNvbWV0aW1lcyBtaWdodCBlbmQgdXAgc3R1Y2sgaW4gYSBjb21wb3NpdGlvbiBzdGF0ZSBldmVuIHRob3VnaCB3ZVxuICAgICAgICAgICAgICAgICAgLy8gYXJlbid0IGNvbXBvc2luZyBhbnkgbW9yZS5cbiAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaXNDb21wb3NpbmcoZWRpdG9yKSAmJlxuICAgICAgICAgICAgICAgICAgICBuYXRpdmVFdmVudC5pc0NvbXBvc2luZyA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBJU19DT01QT1NJTkcuc2V0KGVkaXRvciwgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIHNldElzQ29tcG9zaW5nKGZhbHNlKVxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uS2V5RG93bikgfHxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaXNDb21wb3NpbmcoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID1cbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmNoaWxkcmVuW1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbiAhPT0gbnVsbCA/IHNlbGVjdGlvbi5mb2N1cy5wYXRoWzBdIDogMFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICBjb25zdCBpc1JUTCA9IGdldERpcmVjdGlvbihOb2RlLnN0cmluZyhlbGVtZW50KSkgPT09ICdydGwnXG5cbiAgICAgICAgICAgICAgICAgIC8vIENPTVBBVDogU2luY2Ugd2UgcHJldmVudCB0aGUgZGVmYXVsdCBiZWhhdmlvciBvblxuICAgICAgICAgICAgICAgICAgLy8gYGJlZm9yZWlucHV0YCBldmVudHMsIHRoZSBicm93c2VyIGRvZXNuJ3QgdGhpbmsgdGhlcmUncyBldmVyXG4gICAgICAgICAgICAgICAgICAvLyBhbnkgaGlzdG9yeSBzdGFjayB0byB1bmRvIG9yIHJlZG8sIHNvIHdlIGhhdmUgdG8gbWFuYWdlIHRoZXNlXG4gICAgICAgICAgICAgICAgICAvLyBob3RrZXlzIG91cnNlbHZlcy4gKDIwMTkvMTEvMDYpXG4gICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc1JlZG8obmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF5YmVIaXN0b3J5RWRpdG9yOiBhbnkgPSBlZGl0b3JcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1heWJlSGlzdG9yeUVkaXRvci5yZWRvID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgbWF5YmVIaXN0b3J5RWRpdG9yLnJlZG8oKVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzVW5kbyhuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXliZUhpc3RvcnlFZGl0b3I6IGFueSA9IGVkaXRvclxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF5YmVIaXN0b3J5RWRpdG9yLnVuZG8gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICBtYXliZUhpc3RvcnlFZGl0b3IudW5kbygpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBDZXJ0YWluIGJyb3dzZXJzIGRvbid0IGhhbmRsZSB0aGUgc2VsZWN0aW9uIHVwZGF0ZXNcbiAgICAgICAgICAgICAgICAgIC8vIHByb3Blcmx5LiBJbiBDaHJvbWUsIHRoZSBzZWxlY3Rpb24gaXNuJ3QgcHJvcGVybHkgZXh0ZW5kZWQuXG4gICAgICAgICAgICAgICAgICAvLyBBbmQgaW4gRmlyZWZveCwgdGhlIHNlbGVjdGlvbiBpc24ndCBwcm9wZXJseSBjb2xsYXBzZWQuXG4gICAgICAgICAgICAgICAgICAvLyAoMjAxNy8xMC8xNylcbiAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzTW92ZUxpbmVCYWNrd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmUoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJywgcmV2ZXJzZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNNb3ZlTGluZUZvcndhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlKGVkaXRvciwgeyB1bml0OiAnbGluZScgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzRXh0ZW5kTGluZUJhY2t3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZShlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgICB1bml0OiAnbGluZScsXG4gICAgICAgICAgICAgICAgICAgICAgZWRnZTogJ2ZvY3VzJyxcbiAgICAgICAgICAgICAgICAgICAgICByZXZlcnNlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNFeHRlbmRMaW5lRm9yd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmUoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJywgZWRnZTogJ2ZvY3VzJyB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBJZiBhIHZvaWQgbm9kZSBpcyBzZWxlY3RlZCwgb3IgYSB6ZXJvLXdpZHRoIHRleHQgbm9kZVxuICAgICAgICAgICAgICAgICAgLy8gYWRqYWNlbnQgdG8gYW4gaW5saW5lIGlzIHNlbGVjdGVkLCB3ZSBuZWVkIHRvIGhhbmRsZSB0aGVzZVxuICAgICAgICAgICAgICAgICAgLy8gaG90a2V5cyBtYW51YWxseSBiZWNhdXNlIGJyb3dzZXJzIHdvbid0IGJlIGFibGUgdG8gc2tpcCBvdmVyXG4gICAgICAgICAgICAgICAgICAvLyB0aGUgdm9pZCBub2RlIHdpdGggdGhlIHplcm8td2lkdGggc3BhY2Ugbm90IGJlaW5nIGFuIGVtcHR5XG4gICAgICAgICAgICAgICAgICAvLyBzdHJpbmcuXG4gICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc01vdmVCYWNrd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNDb2xsYXBzZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZShlZGl0b3IsIHsgcmV2ZXJzZTogIWlzUlRMIH0pXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5jb2xsYXBzZShlZGl0b3IsIHsgZWRnZTogJ3N0YXJ0JyB9KVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzTW92ZUZvcndhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmUoZWRpdG9yLCB7IHJldmVyc2U6IGlzUlRMIH0pXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5jb2xsYXBzZShlZGl0b3IsIHsgZWRnZTogJ2VuZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc01vdmVXb3JkQmFja3dhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuY29sbGFwc2UoZWRpdG9yLCB7IGVkZ2U6ICdmb2N1cycgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZShlZGl0b3IsIHsgdW5pdDogJ3dvcmQnLCByZXZlcnNlOiAhaXNSVEwgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzTW92ZVdvcmRGb3J3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLmNvbGxhcHNlKGVkaXRvciwgeyBlZGdlOiAnZm9jdXMnIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmUoZWRpdG9yLCB7IHVuaXQ6ICd3b3JkJywgcmV2ZXJzZTogaXNSVEwgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIC8vIENPTVBBVDogQ2VydGFpbiBicm93c2VycyBkb24ndCBzdXBwb3J0IHRoZSBgYmVmb3JlaW5wdXRgIGV2ZW50LCBzbyB3ZVxuICAgICAgICAgICAgICAgICAgLy8gZmFsbCBiYWNrIHRvIGd1ZXNzaW5nIGF0IHRoZSBpbnB1dCBpbnRlbnRpb24gZm9yIGhvdGtleXMuXG4gICAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IEluIGlPUywgc29tZSBvZiB0aGVzZSBob3RrZXlzIGFyZSBoYW5kbGVkIGluIHRoZVxuICAgICAgICAgICAgICAgICAgaWYgKCFIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgaGF2ZSBhIGNvcmUgYmVoYXZpb3IgZm9yIHRoZXNlLCBidXQgdGhleSBjaGFuZ2UgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIERPTSBpZiB3ZSBkb24ndCBwcmV2ZW50IHRoZW0sIHNvIHdlIGhhdmUgdG8uXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICBIb3RrZXlzLmlzQm9sZChuYXRpdmVFdmVudCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICBIb3RrZXlzLmlzSXRhbGljKG5hdGl2ZUV2ZW50KSB8fFxuICAgICAgICAgICAgICAgICAgICAgIEhvdGtleXMuaXNUcmFuc3Bvc2VDaGFyYWN0ZXIobmF0aXZlRXZlbnQpXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzU29mdEJyZWFrKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuaW5zZXJ0U29mdEJyZWFrKGVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzU3BsaXRCbG9jayhuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmluc2VydEJyZWFrKGVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzRGVsZXRlQmFja3dhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IsIHsgZGlyZWN0aW9uOiAnYmFja3dhcmQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc0RlbGV0ZUZvcndhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IsIHsgZGlyZWN0aW9uOiAnZm9yd2FyZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNEZWxldGVMaW5lQmFja3dhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IsIHsgZGlyZWN0aW9uOiAnYmFja3dhcmQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IsIHsgdW5pdDogJ2xpbmUnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc0RlbGV0ZUxpbmVGb3J3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yLCB7IGRpcmVjdGlvbjogJ2ZvcndhcmQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvciwgeyB1bml0OiAnbGluZScgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzRGVsZXRlV29yZEJhY2t3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yLCB7IGRpcmVjdGlvbjogJ2JhY2t3YXJkJyB9KVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yLCB7IHVuaXQ6ICd3b3JkJyB9KVxuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNEZWxldGVXb3JkRm9yd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvciwgeyBkaXJlY3Rpb246ICdmb3J3YXJkJyB9KVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IsIHsgdW5pdDogJ3dvcmQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChJU19DSFJPTUUgfHwgSVNfU0FGQVJJKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBDaHJvbWUgYW5kIFNhZmFyaSBzdXBwb3J0IGBiZWZvcmVpbnB1dGAgZXZlbnQgYnV0IGRvIG5vdCBmaXJlXG4gICAgICAgICAgICAgICAgICAgICAgLy8gYW4gZXZlbnQgd2hlbiBkZWxldGluZyBiYWNrd2FyZHMgaW4gYSBzZWxlY3RlZCB2b2lkIGlubGluZSBub2RlXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoSG90a2V5cy5pc0RlbGV0ZUJhY2t3YXJkKG5hdGl2ZUV2ZW50KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBIb3RrZXlzLmlzRGVsZXRlRm9yd2FyZChuYXRpdmVFdmVudCkpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBSYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Tm9kZSA9IE5vZGUucGFyZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5hbmNob3IucGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnQuaXNFbGVtZW50KGN1cnJlbnROb2RlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuaXNWb2lkKGVkaXRvciwgY3VycmVudE5vZGUpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChFZGl0b3IuaXNJbmxpbmUoZWRpdG9yLCBjdXJyZW50Tm9kZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIGN1cnJlbnROb2RlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IsIHsgdW5pdDogJ2Jsb2NrJyB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW3JlYWRPbmx5LCBhdHRyaWJ1dGVzLm9uS2V5RG93bl1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvblBhc3RlPXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5DbGlwYm9hcmRFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhcmVhZE9ubHkgJiZcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc1NlbGVjdGFibGVUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICAhaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25QYXN0ZSlcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIC8vIENPTVBBVDogQ2VydGFpbiBicm93c2VycyBkb24ndCBzdXBwb3J0IHRoZSBgYmVmb3JlaW5wdXRgIGV2ZW50LCBzbyB3ZVxuICAgICAgICAgICAgICAgICAgLy8gZmFsbCBiYWNrIHRvIFJlYWN0J3MgYG9uUGFzdGVgIGhlcmUgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICAgIC8vIENPTVBBVDogRmlyZWZveCwgQ2hyb21lIGFuZCBTYWZhcmkgZG9uJ3QgZW1pdCBgYmVmb3JlaW5wdXRgIGV2ZW50c1xuICAgICAgICAgICAgICAgICAgLy8gd2hlbiBcInBhc3RlIHdpdGhvdXQgZm9ybWF0dGluZ1wiIGlzIHVzZWQsIHNvIGZhbGxiYWNrLiAoMjAyMC8wMi8yMClcbiAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgIUhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCB8fFxuICAgICAgICAgICAgICAgICAgICBpc1BsYWluVGV4dE9ubHlQYXN0ZShldmVudC5uYXRpdmVFdmVudClcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmluc2VydERhdGEoZWRpdG9yLCBldmVudC5jbGlwYm9hcmREYXRhKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW3JlYWRPbmx5LCBhdHRyaWJ1dGVzLm9uUGFzdGVdXG4gICAgICAgICAgICApfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxDaGlsZHJlblxuICAgICAgICAgICAgICBkZWNvcmF0aW9ucz17ZGVjb3JhdGlvbnN9XG4gICAgICAgICAgICAgIG5vZGU9e2VkaXRvcn1cbiAgICAgICAgICAgICAgcmVuZGVyRWxlbWVudD17cmVuZGVyRWxlbWVudH1cbiAgICAgICAgICAgICAgcmVuZGVyUGxhY2Vob2xkZXI9e3JlbmRlclBsYWNlaG9sZGVyfVxuICAgICAgICAgICAgICByZW5kZXJMZWFmPXtyZW5kZXJMZWFmfVxuICAgICAgICAgICAgICBzZWxlY3Rpb249e2VkaXRvci5zZWxlY3Rpb259XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvQ29tcG9uZW50PlxuICAgICAgICA8L1Jlc3RvcmVET00+XG4gICAgICA8L0RlY29yYXRlQ29udGV4dC5Qcm92aWRlcj5cbiAgICA8L1JlYWRPbmx5Q29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuXG4vKipcbiAqIFRoZSBwcm9wcyB0aGF0IGdldCBwYXNzZWQgdG8gcmVuZGVyUGxhY2Vob2xkZXJcbiAqL1xuZXhwb3J0IHR5cGUgUmVuZGVyUGxhY2Vob2xkZXJQcm9wcyA9IHtcbiAgY2hpbGRyZW46IGFueVxuICBhdHRyaWJ1dGVzOiB7XG4gICAgJ2RhdGEtc2xhdGUtcGxhY2Vob2xkZXInOiBib29sZWFuXG4gICAgZGlyPzogJ3J0bCdcbiAgICBjb250ZW50RWRpdGFibGU6IGJvb2xlYW5cbiAgICByZWY6IFJlYWN0LlJlZk9iamVjdDxhbnk+XG4gICAgc3R5bGU6IFJlYWN0LkNTU1Byb3BlcnRpZXNcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBkZWZhdWx0IHBsYWNlaG9sZGVyIGVsZW1lbnRcbiAqL1xuXG5leHBvcnQgY29uc3QgRGVmYXVsdFBsYWNlaG9sZGVyID0gKHtcbiAgYXR0cmlidXRlcyxcbiAgY2hpbGRyZW4sXG59OiBSZW5kZXJQbGFjZWhvbGRlclByb3BzKSA9PiAoXG4gIC8vIENPTVBBVDogQXJ0aWZpY2lhbGx5IGFkZCBhIGxpbmUtYnJlYWsgdG8gdGhlIGVuZCBvbiB0aGUgcGxhY2Vob2xkZXIgZWxlbWVudFxuICAvLyB0byBwcmV2ZW50IEFuZHJvaWQgSU1FcyB0byBwaWNrIHVwIGl0cyBjb250ZW50IGluIGF1dG9jb3JyZWN0IGFuZCB0byBhdXRvLWNhcGl0YWxpemUgdGhlIGZpcnN0IGxldHRlclxuICA8c3BhbiB7Li4uYXR0cmlidXRlc30+XG4gICAge2NoaWxkcmVufVxuICAgIHtJU19BTkRST0lEICYmIDxiciAvPn1cbiAgPC9zcGFuPlxuKVxuXG4vKipcbiAqIEEgZGVmYXVsdCBtZW1vaXplZCBkZWNvcmF0ZSBmdW5jdGlvbi5cbiAqL1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdERlY29yYXRlOiAoZW50cnk6IE5vZGVFbnRyeSkgPT4gUmFuZ2VbXSA9ICgpID0+IFtdXG5cbi8qKlxuICogQSBkZWZhdWx0IGltcGxlbWVudCB0byBzY3JvbGwgZG9tIHJhbmdlIGludG8gdmlldy5cbiAqL1xuXG5jb25zdCBkZWZhdWx0U2Nyb2xsU2VsZWN0aW9uSW50b1ZpZXcgPSAoXG4gIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gIGRvbVJhbmdlOiBET01SYW5nZVxuKSA9PiB7XG4gIC8vIFRoaXMgd2FzIGFmZmVjdGluZyB0aGUgc2VsZWN0aW9uIG9mIG11bHRpcGxlIGJsb2NrcyBhbmQgZHJhZ2dpbmcgYmVoYXZpb3IsXG4gIC8vIHNvIGVuYWJsZWQgb25seSBpZiB0aGUgc2VsZWN0aW9uIGhhcyBiZWVuIGNvbGxhcHNlZC5cbiAgaWYgKFxuICAgIGRvbVJhbmdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAmJlxuICAgICghZWRpdG9yLnNlbGVjdGlvbiB8fFxuICAgICAgKGVkaXRvci5zZWxlY3Rpb24gJiYgUmFuZ2UuaXNDb2xsYXBzZWQoZWRpdG9yLnNlbGVjdGlvbikpKVxuICApIHtcbiAgICBjb25zdCBsZWFmRWwgPSBkb21SYW5nZS5zdGFydENvbnRhaW5lci5wYXJlbnRFbGVtZW50IVxuICAgIGxlYWZFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QgPSBkb21SYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QuYmluZChkb21SYW5nZSlcbiAgICBzY3JvbGxJbnRvVmlldyhsZWFmRWwsIHtcbiAgICAgIHNjcm9sbE1vZGU6ICdpZi1uZWVkZWQnLFxuICAgIH0pXG5cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGFuIHVub3J0aG9kb3ggZGVsZXRlIEQ6XG4gICAgZGVsZXRlIGxlYWZFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3RcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGV2ZW50IGlzIG92ZXJyaWRlZCBieSBhIGhhbmRsZXIuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGlzRXZlbnRIYW5kbGVkID0gPFxuICBFdmVudFR5cGUgZXh0ZW5kcyBSZWFjdC5TeW50aGV0aWNFdmVudDx1bmtub3duLCB1bmtub3duPlxuPihcbiAgZXZlbnQ6IEV2ZW50VHlwZSxcbiAgaGFuZGxlcj86IChldmVudDogRXZlbnRUeXBlKSA9PiB2b2lkIHwgYm9vbGVhblxuKSA9PiB7XG4gIGlmICghaGFuZGxlcikge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIC8vIFRoZSBjdXN0b20gZXZlbnQgaGFuZGxlciBtYXkgcmV0dXJuIGEgYm9vbGVhbiB0byBzcGVjaWZ5IHdoZXRoZXIgdGhlIGV2ZW50XG4gIC8vIHNoYWxsIGJlIHRyZWF0ZWQgYXMgYmVpbmcgaGFuZGxlZCBvciBub3QuXG4gIGNvbnN0IHNob3VsZFRyZWF0RXZlbnRBc0hhbmRsZWQgPSBoYW5kbGVyKGV2ZW50KVxuXG4gIGlmIChzaG91bGRUcmVhdEV2ZW50QXNIYW5kbGVkICE9IG51bGwpIHtcbiAgICByZXR1cm4gc2hvdWxkVHJlYXRFdmVudEFzSGFuZGxlZFxuICB9XG5cbiAgcmV0dXJuIGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8IGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKClcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIERPTSBldmVudCBpcyBvdmVycmlkZWQgYnkgYSBoYW5kbGVyLlxuICovXG5cbmV4cG9ydCBjb25zdCBpc0RPTUV2ZW50SGFuZGxlZCA9IDxFIGV4dGVuZHMgRXZlbnQ+KFxuICBldmVudDogRSxcbiAgaGFuZGxlcj86IChldmVudDogRSkgPT4gdm9pZCB8IGJvb2xlYW5cbikgPT4ge1xuICBpZiAoIWhhbmRsZXIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIFRoZSBjdXN0b20gZXZlbnQgaGFuZGxlciBtYXkgcmV0dXJuIGEgYm9vbGVhbiB0byBzcGVjaWZ5IHdoZXRoZXIgdGhlIGV2ZW50XG4gIC8vIHNoYWxsIGJlIHRyZWF0ZWQgYXMgYmVpbmcgaGFuZGxlZCBvciBub3QuXG4gIGNvbnN0IHNob3VsZFRyZWF0RXZlbnRBc0hhbmRsZWQgPSBoYW5kbGVyKGV2ZW50KVxuXG4gIGlmIChzaG91bGRUcmVhdEV2ZW50QXNIYW5kbGVkICE9IG51bGwpIHtcbiAgICByZXR1cm4gc2hvdWxkVHJlYXRFdmVudEFzSGFuZGxlZFxuICB9XG5cbiAgcmV0dXJuIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWRcbn1cbiIsICJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnXG5cbi8qKlxuICogQSBSZWFjdCBjb250ZXh0IGZvciBzaGFyaW5nIHRoZSBgZm9jdXNlZGAgc3RhdGUgb2YgdGhlIGVkaXRvci5cbiAqL1xuXG5leHBvcnQgY29uc3QgRm9jdXNlZENvbnRleHQgPSBjcmVhdGVDb250ZXh0KGZhbHNlKVxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBgZm9jdXNlZGAgc3RhdGUgb2YgdGhlIGVkaXRvci5cbiAqL1xuXG5leHBvcnQgY29uc3QgdXNlRm9jdXNlZCA9ICgpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoRm9jdXNlZENvbnRleHQpXG59XG4iLCAiaW1wb3J0IHtcbiAgY3JlYXRlQ29udGV4dCxcbiAgdXNlQ2FsbGJhY2ssXG4gIHVzZUNvbnRleHQsXG4gIHVzZU1lbW8sXG4gIHVzZVJlZHVjZXIsXG4gIHVzZVJlZixcbn0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgfSBmcm9tICcuL3VzZS1pc29tb3JwaGljLWxheW91dC1lZmZlY3QnXG5cbmZ1bmN0aW9uIGlzRXJyb3IoZXJyb3I6IGFueSk6IGVycm9yIGlzIEVycm9yIHtcbiAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgRXJyb3Jcbn1cblxudHlwZSBFZGl0b3JDaGFuZ2VIYW5kbGVyID0gKGVkaXRvcjogRWRpdG9yKSA9PiB2b2lkXG4vKipcbiAqIEEgUmVhY3QgY29udGV4dCBmb3Igc2hhcmluZyB0aGUgZWRpdG9yIHNlbGVjdG9yIGNvbnRleHQgaW4gYSB3YXkgdG8gY29udHJvbCByZXJlbmRlcnNcbiAqL1xuXG5leHBvcnQgY29uc3QgU2xhdGVTZWxlY3RvckNvbnRleHQgPSBjcmVhdGVDb250ZXh0PHtcbiAgZ2V0U2xhdGU6ICgpID0+IEVkaXRvclxuICBhZGRFdmVudExpc3RlbmVyOiAoY2FsbGJhY2s6IEVkaXRvckNoYW5nZUhhbmRsZXIpID0+ICgpID0+IHZvaWRcbn0+KHt9IGFzIGFueSlcblxuY29uc3QgcmVmRXF1YWxpdHkgPSAoYTogYW55LCBiOiBhbnkpID0+IGEgPT09IGJcblxuLyoqXG4gKiB1c2UgcmVkdXggc3R5bGUgc2VsZWN0b3JzIHRvIHByZXZlbnQgcmVyZW5kZXJpbmcgb24gZXZlcnkga2V5c3Ryb2tlLlxuICogQmVhciBpbiBtaW5kIHJlcmVuZGVyaW5nIGNhbiBvbmx5IHByZXZlbnRlZCBpZiB0aGUgcmV0dXJuZWQgdmFsdWUgaXMgYSB2YWx1ZSB0eXBlIG9yIGZvciByZWZlcmVuY2UgdHlwZXMgKGUuZy4gb2JqZWN0cyBhbmQgYXJyYXlzKSBhZGQgYSBjdXN0b20gZXF1YWxpdHkgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqIGBgYFxuICogIGNvbnN0IGlzU2VsZWN0aW9uQWN0aXZlID0gdXNlU2xhdGVTZWxlY3RvcihlZGl0b3IgPT4gQm9vbGVhbihlZGl0b3Iuc2VsZWN0aW9uKSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVNsYXRlU2VsZWN0b3I8VD4oXG4gIHNlbGVjdG9yOiAoZWRpdG9yOiBFZGl0b3IpID0+IFQsXG4gIGVxdWFsaXR5Rm46IChhOiBULCBiOiBUKSA9PiBib29sZWFuID0gcmVmRXF1YWxpdHlcbikge1xuICBjb25zdCBbLCBmb3JjZVJlbmRlcl0gPSB1c2VSZWR1Y2VyKHMgPT4gcyArIDEsIDApXG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KFNsYXRlU2VsZWN0b3JDb250ZXh0KVxuICBpZiAoIWNvbnRleHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVGhlIFxcYHVzZVNsYXRlU2VsZWN0b3JcXGAgaG9vayBtdXN0IGJlIHVzZWQgaW5zaWRlIHRoZSA8U2xhdGU+IGNvbXBvbmVudCdzIGNvbnRleHQuYFxuICAgIClcbiAgfVxuICBjb25zdCB7IGdldFNsYXRlLCBhZGRFdmVudExpc3RlbmVyIH0gPSBjb250ZXh0XG5cbiAgY29uc3QgbGF0ZXN0U3Vic2NyaXB0aW9uQ2FsbGJhY2tFcnJvciA9IHVzZVJlZjxFcnJvciB8IHVuZGVmaW5lZD4oKVxuICBjb25zdCBsYXRlc3RTZWxlY3RvciA9IHVzZVJlZjwoZWRpdG9yOiBFZGl0b3IpID0+IFQ+KCgpID0+IG51bGwgYXMgYW55KVxuICBjb25zdCBsYXRlc3RTZWxlY3RlZFN0YXRlID0gdXNlUmVmPFQ+KChudWxsIGFzIGFueSkgYXMgVClcbiAgbGV0IHNlbGVjdGVkU3RhdGU6IFRcblxuICB0cnkge1xuICAgIGlmIChcbiAgICAgIHNlbGVjdG9yICE9PSBsYXRlc3RTZWxlY3Rvci5jdXJyZW50IHx8XG4gICAgICBsYXRlc3RTdWJzY3JpcHRpb25DYWxsYmFja0Vycm9yLmN1cnJlbnRcbiAgICApIHtcbiAgICAgIHNlbGVjdGVkU3RhdGUgPSBzZWxlY3RvcihnZXRTbGF0ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBzZWxlY3RlZFN0YXRlID0gbGF0ZXN0U2VsZWN0ZWRTdGF0ZS5jdXJyZW50XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAobGF0ZXN0U3Vic2NyaXB0aW9uQ2FsbGJhY2tFcnJvci5jdXJyZW50ICYmIGlzRXJyb3IoZXJyKSkge1xuICAgICAgZXJyLm1lc3NhZ2UgKz0gYFxcblRoZSBlcnJvciBtYXkgYmUgY29ycmVsYXRlZCB3aXRoIHRoaXMgcHJldmlvdXMgZXJyb3I6XFxuJHtsYXRlc3RTdWJzY3JpcHRpb25DYWxsYmFja0Vycm9yLmN1cnJlbnQuc3RhY2t9XFxuXFxuYFxuICAgIH1cblxuICAgIHRocm93IGVyclxuICB9XG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGxhdGVzdFNlbGVjdG9yLmN1cnJlbnQgPSBzZWxlY3RvclxuICAgIGxhdGVzdFNlbGVjdGVkU3RhdGUuY3VycmVudCA9IHNlbGVjdGVkU3RhdGVcbiAgICBsYXRlc3RTdWJzY3JpcHRpb25DYWxsYmFja0Vycm9yLmN1cnJlbnQgPSB1bmRlZmluZWRcbiAgfSlcblxuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KFxuICAgICgpID0+IHtcbiAgICAgIGZ1bmN0aW9uIGNoZWNrRm9yVXBkYXRlcygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBuZXdTZWxlY3RlZFN0YXRlID0gbGF0ZXN0U2VsZWN0b3IuY3VycmVudChnZXRTbGF0ZSgpKVxuXG4gICAgICAgICAgaWYgKGVxdWFsaXR5Rm4obmV3U2VsZWN0ZWRTdGF0ZSwgbGF0ZXN0U2VsZWN0ZWRTdGF0ZS5jdXJyZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGF0ZXN0U2VsZWN0ZWRTdGF0ZS5jdXJyZW50ID0gbmV3U2VsZWN0ZWRTdGF0ZVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAvLyB3ZSBpZ25vcmUgYWxsIGVycm9ycyBoZXJlLCBzaW5jZSB3aGVuIHRoZSBjb21wb25lbnRcbiAgICAgICAgICAvLyBpcyByZS1yZW5kZXJlZCwgdGhlIHNlbGVjdG9ycyBhcmUgY2FsbGVkIGFnYWluLCBhbmRcbiAgICAgICAgICAvLyB3aWxsIHRocm93IGFnYWluLCBpZiBuZWl0aGVyIHByb3BzIG5vciBzdG9yZSBzdGF0ZVxuICAgICAgICAgIC8vIGNoYW5nZWRcbiAgICAgICAgICBsYXRlc3RTdWJzY3JpcHRpb25DYWxsYmFja0Vycm9yLmN1cnJlbnQgPSBlcnJcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcmNlUmVuZGVyKClcbiAgICAgIH1cblxuICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBhZGRFdmVudExpc3RlbmVyKGNoZWNrRm9yVXBkYXRlcylcblxuICAgICAgY2hlY2tGb3JVcGRhdGVzKClcblxuICAgICAgcmV0dXJuICgpID0+IHVuc3Vic2NyaWJlKClcbiAgICB9LFxuICAgIC8vIGRvbid0IHJlcmVuZGVyIG9uIGVxdWFsaXR5Rm4gY2hhbmdlIHNpbmNlIHdlIHdhbnQgdG8gYmUgYWJsZSB0byBkZWZpbmUgaXQgaW5saW5lXG4gICAgW2FkZEV2ZW50TGlzdGVuZXIsIGdldFNsYXRlXVxuICApXG5cbiAgcmV0dXJuIHNlbGVjdGVkU3RhdGVcbn1cblxuLyoqXG4gKiBDcmVhdGUgc2VsZWN0b3IgY29udGV4dCB3aXRoIGVkaXRvciB1cGRhdGluZyBvbiBldmVyeSBlZGl0b3IgY2hhbmdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZWxlY3RvckNvbnRleHQoZWRpdG9yOiBFZGl0b3IpIHtcbiAgY29uc3QgZXZlbnRMaXN0ZW5lcnMgPSB1c2VSZWY8RWRpdG9yQ2hhbmdlSGFuZGxlcltdPihbXSkuY3VycmVudFxuICBjb25zdCBzbGF0ZVJlZiA9IHVzZVJlZjx7XG4gICAgZWRpdG9yOiBFZGl0b3JcbiAgfT4oe1xuICAgIGVkaXRvcixcbiAgfSkuY3VycmVudFxuICBjb25zdCBvbkNoYW5nZSA9IHVzZUNhbGxiYWNrKChlZGl0b3I6IEVkaXRvcikgPT4ge1xuICAgIHNsYXRlUmVmLmVkaXRvciA9IGVkaXRvclxuICAgIGV2ZW50TGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyOiBFZGl0b3JDaGFuZ2VIYW5kbGVyKSA9PiBsaXN0ZW5lcihlZGl0b3IpKVxuICB9LCBbXSlcblxuICBjb25zdCBzZWxlY3RvckNvbnRleHQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0U2xhdGU6ICgpID0+IHNsYXRlUmVmLmVkaXRvcixcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IChjYWxsYmFjazogRWRpdG9yQ2hhbmdlSGFuZGxlcikgPT4ge1xuICAgICAgICBldmVudExpc3RlbmVycy5wdXNoKGNhbGxiYWNrKVxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIGV2ZW50TGlzdGVuZXJzLnNwbGljZShldmVudExpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKSwgMSlcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9XG4gIH0sIFtldmVudExpc3RlbmVycywgc2xhdGVSZWZdKVxuICByZXR1cm4geyBzZWxlY3RvckNvbnRleHQsIG9uQ2hhbmdlIH1cbn1cbiIsICJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRWRpdG9yLCBOb2RlLCBEZXNjZW5kYW50LCBTY3J1YmJlciB9IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuLi9wbHVnaW4vcmVhY3QtZWRpdG9yJ1xuaW1wb3J0IHsgRm9jdXNlZENvbnRleHQgfSBmcm9tICcuLi9ob29rcy91c2UtZm9jdXNlZCdcbmltcG9ydCB7IEVkaXRvckNvbnRleHQgfSBmcm9tICcuLi9ob29rcy91c2Utc2xhdGUtc3RhdGljJ1xuaW1wb3J0IHsgU2xhdGVDb250ZXh0LCBTbGF0ZUNvbnRleHRWYWx1ZSB9IGZyb20gJy4uL2hvb2tzL3VzZS1zbGF0ZSdcbmltcG9ydCB7XG4gIGdldFNlbGVjdG9yQ29udGV4dCxcbiAgU2xhdGVTZWxlY3RvckNvbnRleHQsXG59IGZyb20gJy4uL2hvb2tzL3VzZS1zbGF0ZS1zZWxlY3RvcidcbmltcG9ydCB7IEVESVRPUl9UT19PTl9DSEFOR0UgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQgeyBJU19SRUFDVF9WRVJTSU9OXzE3X09SX0FCT1ZFIH0gZnJvbSAnLi4vdXRpbHMvZW52aXJvbm1lbnQnXG5pbXBvcnQgeyB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IH0gZnJvbSAnLi4vaG9va3MvdXNlLWlzb21vcnBoaWMtbGF5b3V0LWVmZmVjdCdcblxuLyoqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIHRoZSBwcm92aWRlciB0byBoYW5kbGUgYG9uQ2hhbmdlYCBldmVudHMsIGJlY2F1c2UgdGhlIGVkaXRvclxuICogaXMgYSBtdXRhYmxlIHNpbmdsZXRvbiBzbyBpdCB3b24ndCBldmVyIHJlZ2lzdGVyIGFzIFwiY2hhbmdlZFwiIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgU2xhdGUgPSAocHJvcHM6IHtcbiAgZWRpdG9yOiBSZWFjdEVkaXRvclxuICB2YWx1ZTogRGVzY2VuZGFudFtdXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGVcbiAgb25DaGFuZ2U/OiAodmFsdWU6IERlc2NlbmRhbnRbXSkgPT4gdm9pZFxufSkgPT4ge1xuICBjb25zdCB7IGVkaXRvciwgY2hpbGRyZW4sIG9uQ2hhbmdlLCB2YWx1ZSwgLi4ucmVzdCB9ID0gcHJvcHNcbiAgY29uc3QgdW5tb3VudFJlZiA9IHVzZVJlZihmYWxzZSlcblxuICBjb25zdCBbY29udGV4dCwgc2V0Q29udGV4dF0gPSBSZWFjdC51c2VTdGF0ZTxTbGF0ZUNvbnRleHRWYWx1ZT4oKCkgPT4ge1xuICAgIGlmICghTm9kZS5pc05vZGVMaXN0KHZhbHVlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgW1NsYXRlXSB2YWx1ZSBpcyBpbnZhbGlkISBFeHBlY3RlZCBhIGxpc3Qgb2YgZWxlbWVudHMgYnV0IGdvdDogJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgKX1gXG4gICAgICApXG4gICAgfVxuICAgIGlmICghRWRpdG9yLmlzRWRpdG9yKGVkaXRvcikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFtTbGF0ZV0gZWRpdG9yIGlzIGludmFsaWQhIFlvdSBwYXNzZWQ6ICR7U2NydWJiZXIuc3RyaW5naWZ5KGVkaXRvcil9YFxuICAgICAgKVxuICAgIH1cbiAgICBlZGl0b3IuY2hpbGRyZW4gPSB2YWx1ZVxuICAgIE9iamVjdC5hc3NpZ24oZWRpdG9yLCByZXN0KVxuICAgIHJldHVybiB7IHY6IDAsIGVkaXRvciB9XG4gIH0pXG5cbiAgY29uc3Qge1xuICAgIHNlbGVjdG9yQ29udGV4dCxcbiAgICBvbkNoYW5nZTogaGFuZGxlU2VsZWN0b3JDaGFuZ2UsXG4gIH0gPSBnZXRTZWxlY3RvckNvbnRleHQoZWRpdG9yKVxuXG4gIGNvbnN0IG9uQ29udGV4dENoYW5nZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAob25DaGFuZ2UpIHtcbiAgICAgIG9uQ2hhbmdlKGVkaXRvci5jaGlsZHJlbilcbiAgICB9XG5cbiAgICBzZXRDb250ZXh0KHByZXZDb250ZXh0ID0+ICh7XG4gICAgICB2OiBwcmV2Q29udGV4dC52ICsgMSxcbiAgICAgIGVkaXRvcixcbiAgICB9KSlcbiAgICBoYW5kbGVTZWxlY3RvckNoYW5nZShlZGl0b3IpXG4gIH0sIFtvbkNoYW5nZV0pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBFRElUT1JfVE9fT05fQ0hBTkdFLnNldChlZGl0b3IsIG9uQ29udGV4dENoYW5nZSlcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBFRElUT1JfVE9fT05fQ0hBTkdFLnNldChlZGl0b3IsICgpID0+IHt9KVxuICAgICAgdW5tb3VudFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgIH1cbiAgfSwgW10pXG5cbiAgY29uc3QgW2lzRm9jdXNlZCwgc2V0SXNGb2N1c2VkXSA9IHVzZVN0YXRlKFJlYWN0RWRpdG9yLmlzRm9jdXNlZChlZGl0b3IpKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0SXNGb2N1c2VkKFJlYWN0RWRpdG9yLmlzRm9jdXNlZChlZGl0b3IpKVxuICB9KVxuXG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGZuID0gKCkgPT4gc2V0SXNGb2N1c2VkKFJlYWN0RWRpdG9yLmlzRm9jdXNlZChlZGl0b3IpKVxuICAgIGlmIChJU19SRUFDVF9WRVJTSU9OXzE3X09SX0FCT1ZFKSB7XG4gICAgICAvLyBJbiBSZWFjdCA+PSAxNyBvbkZvY3VzIGFuZCBvbkJsdXIgbGlzdGVuIHRvIHRoZSBmb2N1c2luIGFuZCBmb2N1c291dCBldmVudHMgZHVyaW5nIHRoZSBidWJibGluZyBwaGFzZS5cbiAgICAgIC8vIFRoZXJlZm9yZSBpbiBvcmRlciBmb3IgPEVkaXRhYmxlIC8+J3MgaGFuZGxlcnMgdG8gcnVuIGZpcnN0LCB3aGljaCBpcyBuZWNlc3NhcnkgZm9yIFJlYWN0RWRpdG9yLmlzRm9jdXNlZChlZGl0b3IpXG4gICAgICAvLyB0byByZXR1cm4gdGhlIGNvcnJlY3QgdmFsdWUsIHdlIGhhdmUgdG8gbGlzdGVuIHRvIHRoZSBmb2N1c2luIGFuZCBmb2N1c291dCBldmVudHMgd2l0aG91dCB1c2VDYXB0dXJlIGhlcmUuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgZm4pXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGZuKVxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGZuKVxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGZuKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZuLCB0cnVlKVxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZuLCB0cnVlKVxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmbiwgdHJ1ZSlcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIGZuLCB0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW10pXG5cbiAgcmV0dXJuIChcbiAgICA8U2xhdGVTZWxlY3RvckNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3NlbGVjdG9yQ29udGV4dH0+XG4gICAgICA8U2xhdGVDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0fT5cbiAgICAgICAgPEVkaXRvckNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHQuZWRpdG9yfT5cbiAgICAgICAgICA8Rm9jdXNlZENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2lzRm9jdXNlZH0+XG4gICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgPC9Gb2N1c2VkQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgPC9FZGl0b3JDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgPC9TbGF0ZUNvbnRleHQuUHJvdmlkZXI+XG4gICAgPC9TbGF0ZVNlbGVjdG9yQ29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuIiwgImltcG9ydCB7IHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCdcblxuaW1wb3J0IHsgRWRpdG9yQ29udGV4dCB9IGZyb20gJy4vdXNlLXNsYXRlLXN0YXRpYydcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgZWRpdG9yIG9iamVjdCBmcm9tIHRoZSBSZWFjdCBjb250ZXh0LlxuICogQGRlcHJlY2F0ZWQgVXNlIHVzZVNsYXRlU3RhdGljIGluc3RlYWQuXG4gKi9cblxuZXhwb3J0IGNvbnN0IHVzZUVkaXRvciA9ICgpID0+IHtcbiAgY29uc3QgZWRpdG9yID0gdXNlQ29udGV4dChFZGl0b3JDb250ZXh0KVxuXG4gIGlmICghZWRpdG9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFRoZSBcXGB1c2VFZGl0b3JcXGAgaG9vayBtdXN0IGJlIHVzZWQgaW5zaWRlIHRoZSA8U2xhdGU+IGNvbXBvbmVudCdzIGNvbnRleHQuYFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBlZGl0b3Jcbn1cbiIsICJpbXBvcnQgeyBCYXNlU2VsZWN0aW9uLCBSYW5nZSB9IGZyb20gJ3NsYXRlJ1xuXG5pbXBvcnQgeyB1c2VTbGF0ZVNlbGVjdG9yIH0gZnJvbSAnLi91c2Utc2xhdGUtc2VsZWN0b3InXG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IHNsYXRlIHNlbGVjdGlvbi5cbiAqIE9ubHkgdHJpZ2dlcnMgYSByZXJlbmRlciB3aGVuIHRoZSBzZWxlY3Rpb24gYWN0dWFsbHkgY2hhbmdlc1xuICovXG5leHBvcnQgY29uc3QgdXNlU2xhdGVTZWxlY3Rpb24gPSAoKSA9PiB7XG4gIHJldHVybiB1c2VTbGF0ZVNlbGVjdG9yKGVkaXRvciA9PiBlZGl0b3Iuc2VsZWN0aW9uLCBpc1NlbGVjdGlvbkVxdWFsKVxufVxuXG5jb25zdCBpc1NlbGVjdGlvbkVxdWFsID0gKGE6IEJhc2VTZWxlY3Rpb24sIGI6IEJhc2VTZWxlY3Rpb24pID0+IHtcbiAgaWYgKCFhICYmICFiKSByZXR1cm4gdHJ1ZVxuICBpZiAoIWEgfHwgIWIpIHJldHVybiBmYWxzZVxuICByZXR1cm4gUmFuZ2UuZXF1YWxzKGEsIGIpXG59XG4iLCAiLyoqXG4gKiBVdGlsaXRpZXMgZm9yIHNpbmdsZS1saW5lIGRlbGV0aW9uXG4gKi9cblxuaW1wb3J0IHsgUmFuZ2UsIEVkaXRvciB9IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuLi9wbHVnaW4vcmVhY3QtZWRpdG9yJ1xuXG5jb25zdCBkb1JlY3RzSW50ZXJzZWN0ID0gKHJlY3Q6IERPTVJlY3QsIGNvbXBhcmVSZWN0OiBET01SZWN0KSA9PiB7XG4gIGNvbnN0IG1pZGRsZSA9IChjb21wYXJlUmVjdC50b3AgKyBjb21wYXJlUmVjdC5ib3R0b20pIC8gMlxuXG4gIHJldHVybiByZWN0LnRvcCA8PSBtaWRkbGUgJiYgcmVjdC5ib3R0b20gPj0gbWlkZGxlXG59XG5cbmNvbnN0IGFyZVJhbmdlc1NhbWVMaW5lID0gKFxuICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICByYW5nZTE6IFJhbmdlLFxuICByYW5nZTI6IFJhbmdlXG4pID0+IHtcbiAgY29uc3QgcmVjdDEgPSBSZWFjdEVkaXRvci50b0RPTVJhbmdlKGVkaXRvciwgcmFuZ2UxKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICBjb25zdCByZWN0MiA9IFJlYWN0RWRpdG9yLnRvRE9NUmFuZ2UoZWRpdG9yLCByYW5nZTIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiAgcmV0dXJuIGRvUmVjdHNJbnRlcnNlY3QocmVjdDEsIHJlY3QyKSAmJiBkb1JlY3RzSW50ZXJzZWN0KHJlY3QyLCByZWN0MSlcbn1cblxuLyoqXG4gKiBBIGhlbHBlciB1dGlsaXR5IHRoYXQgcmV0dXJucyB0aGUgZW5kIHBvcnRpb24gb2YgYSBgUmFuZ2VgXG4gKiB3aGljaCBpcyBsb2NhdGVkIG9uIGEgc2luZ2xlIGxpbmUuXG4gKlxuICogQHBhcmFtIHtFZGl0b3J9IGVkaXRvciBUaGUgZWRpdG9yIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3RcbiAqIEBwYXJhbSB7UmFuZ2V9IHBhcmVudFJhbmdlIFRoZSBwYXJlbnQgcmFuZ2UgdG8gY29tcGFyZSBhZ2FpbnN0XG4gKiBAcmV0dXJucyB7UmFuZ2V9IEEgdmFsaWQgcG9ydGlvbiBvZiB0aGUgcGFyZW50UmFuZ2Ugd2hpY2ggaXMgb25lIGEgc2luZ2xlIGxpbmVcbiAqL1xuZXhwb3J0IGNvbnN0IGZpbmRDdXJyZW50TGluZVJhbmdlID0gKFxuICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICBwYXJlbnRSYW5nZTogUmFuZ2Vcbik6IFJhbmdlID0+IHtcbiAgY29uc3QgcGFyZW50UmFuZ2VCb3VuZGFyeSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIFJhbmdlLmVuZChwYXJlbnRSYW5nZSkpXG4gIGNvbnN0IHBvc2l0aW9ucyA9IEFycmF5LmZyb20oRWRpdG9yLnBvc2l0aW9ucyhlZGl0b3IsIHsgYXQ6IHBhcmVudFJhbmdlIH0pKVxuXG4gIGxldCBsZWZ0ID0gMFxuICBsZXQgcmlnaHQgPSBwb3NpdGlvbnMubGVuZ3RoXG4gIGxldCBtaWRkbGUgPSBNYXRoLmZsb29yKHJpZ2h0IC8gMilcblxuICBpZiAoXG4gICAgYXJlUmFuZ2VzU2FtZUxpbmUoXG4gICAgICBlZGl0b3IsXG4gICAgICBFZGl0b3IucmFuZ2UoZWRpdG9yLCBwb3NpdGlvbnNbbGVmdF0pLFxuICAgICAgcGFyZW50UmFuZ2VCb3VuZGFyeVxuICAgIClcbiAgKSB7XG4gICAgcmV0dXJuIEVkaXRvci5yYW5nZShlZGl0b3IsIHBvc2l0aW9uc1tsZWZ0XSwgcGFyZW50UmFuZ2VCb3VuZGFyeSlcbiAgfVxuXG4gIGlmIChwb3NpdGlvbnMubGVuZ3RoIDwgMikge1xuICAgIHJldHVybiBFZGl0b3IucmFuZ2UoXG4gICAgICBlZGl0b3IsXG4gICAgICBwb3NpdGlvbnNbcG9zaXRpb25zLmxlbmd0aCAtIDFdLFxuICAgICAgcGFyZW50UmFuZ2VCb3VuZGFyeVxuICAgIClcbiAgfVxuXG4gIHdoaWxlIChtaWRkbGUgIT09IHBvc2l0aW9ucy5sZW5ndGggJiYgbWlkZGxlICE9PSBsZWZ0KSB7XG4gICAgaWYgKFxuICAgICAgYXJlUmFuZ2VzU2FtZUxpbmUoXG4gICAgICAgIGVkaXRvcixcbiAgICAgICAgRWRpdG9yLnJhbmdlKGVkaXRvciwgcG9zaXRpb25zW21pZGRsZV0pLFxuICAgICAgICBwYXJlbnRSYW5nZUJvdW5kYXJ5XG4gICAgICApXG4gICAgKSB7XG4gICAgICByaWdodCA9IG1pZGRsZVxuICAgIH0gZWxzZSB7XG4gICAgICBsZWZ0ID0gbWlkZGxlXG4gICAgfVxuXG4gICAgbWlkZGxlID0gTWF0aC5mbG9vcigobGVmdCArIHJpZ2h0KSAvIDIpXG4gIH1cblxuICByZXR1cm4gRWRpdG9yLnJhbmdlKGVkaXRvciwgcG9zaXRpb25zW3JpZ2h0XSwgcGFyZW50UmFuZ2VCb3VuZGFyeSlcbn1cbiIsICJpbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJ1xuaW1wb3J0IHtcbiAgQmFzZUVkaXRvcixcbiAgRWRpdG9yLFxuICBOb2RlLFxuICBPcGVyYXRpb24sXG4gIFBhdGgsXG4gIFBvaW50LFxuICBSYW5nZSxcbiAgVHJhbnNmb3JtcyxcbiAgRWxlbWVudCxcbn0gZnJvbSAnc2xhdGUnXG5pbXBvcnQge1xuICBUZXh0RGlmZixcbiAgdHJhbnNmb3JtUGVuZGluZ1BvaW50LFxuICB0cmFuc2Zvcm1QZW5kaW5nUmFuZ2UsXG4gIHRyYW5zZm9ybVRleHREaWZmLFxufSBmcm9tICcuLi91dGlscy9kaWZmLXRleHQnXG5pbXBvcnQge1xuICBnZXRQbGFpblRleHQsXG4gIGdldFNsYXRlRnJhZ21lbnRBdHRyaWJ1dGUsXG4gIGlzRE9NVGV4dCxcbn0gZnJvbSAnLi4vdXRpbHMvZG9tJ1xuaW1wb3J0IHsgS2V5IH0gZnJvbSAnLi4vdXRpbHMva2V5J1xuaW1wb3J0IHsgZmluZEN1cnJlbnRMaW5lUmFuZ2UgfSBmcm9tICcuLi91dGlscy9saW5lcydcbmltcG9ydCB7XG4gIEVESVRPUl9UT19LRVlfVE9fRUxFTUVOVCxcbiAgRURJVE9SX1RPX09OX0NIQU5HRSxcbiAgRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OLFxuICBFRElUT1JfVE9fUEVORElOR19ESUZGUyxcbiAgRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OLFxuICBFRElUT1JfVE9fVVNFUl9NQVJLUyxcbiAgRURJVE9SX1RPX1VTRVJfU0VMRUNUSU9OLFxuICBOT0RFX1RPX0tFWSxcbiAgRURJVE9SX1RPX1NDSEVEVUxFX0ZMVVNILFxuICBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MsXG59IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi9yZWFjdC1lZGl0b3InXG4vKipcbiAqIGB3aXRoUmVhY3RgIGFkZHMgUmVhY3QgYW5kIERPTSBzcGVjaWZpYyBiZWhhdmlvcnMgdG8gdGhlIGVkaXRvci5cbiAqXG4gKiBJZiB5b3UgYXJlIHVzaW5nIFR5cGVTY3JpcHQsIHlvdSBtdXN0IGV4dGVuZCBTbGF0ZSdzIEN1c3RvbVR5cGVzIHRvIHVzZVxuICogdGhpcyBwbHVnaW4uXG4gKlxuICogU2VlIGh0dHBzOi8vZG9jcy5zbGF0ZWpzLm9yZy9jb25jZXB0cy8xMS10eXBlc2NyaXB0IHRvIGxlYXJuIGhvdy5cbiAqL1xuXG5leHBvcnQgY29uc3Qgd2l0aFJlYWN0ID0gPFQgZXh0ZW5kcyBCYXNlRWRpdG9yPihlZGl0b3I6IFQpOiBUICYgUmVhY3RFZGl0b3IgPT4ge1xuICBjb25zdCBlID0gZWRpdG9yIGFzIFQgJiBSZWFjdEVkaXRvclxuICBjb25zdCB7IGFwcGx5LCBvbkNoYW5nZSwgZGVsZXRlQmFja3dhcmQsIGFkZE1hcmssIHJlbW92ZU1hcmsgfSA9IGVcblxuICAvLyBUaGUgV2Vha01hcCB3aGljaCBtYXBzIGEga2V5IHRvIGEgc3BlY2lmaWMgSFRNTEVsZW1lbnQgbXVzdCBiZSBzY29wZWQgdG8gdGhlIGVkaXRvciBpbnN0YW5jZSB0b1xuICAvLyBhdm9pZCBjb2xsaXNpb25zIGJldHdlZW4gZWRpdG9ycyBpbiB0aGUgRE9NIHRoYXQgc2hhcmUgdGhlIHNhbWUgdmFsdWUuXG4gIEVESVRPUl9UT19LRVlfVE9fRUxFTUVOVC5zZXQoZSwgbmV3IFdlYWtNYXAoKSlcblxuICBlLmFkZE1hcmsgPSAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgIEVESVRPUl9UT19TQ0hFRFVMRV9GTFVTSC5nZXQoZSk/LigpXG5cbiAgICBpZiAoXG4gICAgICAhRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLmdldChlKSAmJlxuICAgICAgRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuZ2V0KGUpPy5sZW5ndGhcbiAgICApIHtcbiAgICAgIC8vIEVuc3VyZSB0aGUgY3VycmVudCBwZW5kaW5nIGRpZmZzIG9yaWdpbmF0aW5nIGZyb20gY2hhbmdlcyBiZWZvcmUgdGhlIGFkZE1hcmtcbiAgICAgIC8vIGFyZSBhcHBsaWVkIHdpdGggdGhlIGN1cnJlbnQgZm9ybWF0dGluZ1xuICAgICAgRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLnNldChlLCBudWxsKVxuICAgIH1cblxuICAgIEVESVRPUl9UT19VU0VSX01BUktTLmRlbGV0ZShlKVxuXG4gICAgYWRkTWFyayhrZXksIHZhbHVlKVxuICB9XG5cbiAgZS5yZW1vdmVNYXJrID0ga2V5ID0+IHtcbiAgICBpZiAoXG4gICAgICAhRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLmdldChlKSAmJlxuICAgICAgRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuZ2V0KGUpPy5sZW5ndGhcbiAgICApIHtcbiAgICAgIC8vIEVuc3VyZSB0aGUgY3VycmVudCBwZW5kaW5nIGRpZmZzIG9yaWdpbmF0aW5nIGZyb20gY2hhbmdlcyBiZWZvcmUgdGhlIGFkZE1hcmtcbiAgICAgIC8vIGFyZSBhcHBsaWVkIHdpdGggdGhlIGN1cnJlbnQgZm9ybWF0dGluZ1xuICAgICAgRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLnNldChlLCBudWxsKVxuICAgIH1cblxuICAgIEVESVRPUl9UT19VU0VSX01BUktTLmRlbGV0ZShlKVxuXG4gICAgcmVtb3ZlTWFyayhrZXkpXG4gIH1cblxuICBlLmRlbGV0ZUJhY2t3YXJkID0gdW5pdCA9PiB7XG4gICAgaWYgKHVuaXQgIT09ICdsaW5lJykge1xuICAgICAgcmV0dXJuIGRlbGV0ZUJhY2t3YXJkKHVuaXQpXG4gICAgfVxuXG4gICAgaWYgKGUuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGUuc2VsZWN0aW9uKSkge1xuICAgICAgY29uc3QgcGFyZW50QmxvY2tFbnRyeSA9IEVkaXRvci5hYm92ZShlLCB7XG4gICAgICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGUsIG4pLFxuICAgICAgICBhdDogZS5zZWxlY3Rpb24sXG4gICAgICB9KVxuXG4gICAgICBpZiAocGFyZW50QmxvY2tFbnRyeSkge1xuICAgICAgICBjb25zdCBbLCBwYXJlbnRCbG9ja1BhdGhdID0gcGFyZW50QmxvY2tFbnRyeVxuICAgICAgICBjb25zdCBwYXJlbnRFbGVtZW50UmFuZ2UgPSBFZGl0b3IucmFuZ2UoXG4gICAgICAgICAgZSxcbiAgICAgICAgICBwYXJlbnRCbG9ja1BhdGgsXG4gICAgICAgICAgZS5zZWxlY3Rpb24uYW5jaG9yXG4gICAgICAgIClcblxuICAgICAgICBjb25zdCBjdXJyZW50TGluZVJhbmdlID0gZmluZEN1cnJlbnRMaW5lUmFuZ2UoZSwgcGFyZW50RWxlbWVudFJhbmdlKVxuXG4gICAgICAgIGlmICghUmFuZ2UuaXNDb2xsYXBzZWQoY3VycmVudExpbmVSYW5nZSkpIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlLCB7IGF0OiBjdXJyZW50TGluZVJhbmdlIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIGF0dGVtcHRzIHRvIHJlc2V0IHRoZSBOT0RFX1RPX0tFWSBlbnRyeSB0byB0aGUgY29ycmVjdCB2YWx1ZVxuICAvLyBhcyBhcHBseSgpIGNoYW5nZXMgdGhlIG9iamVjdCByZWZlcmVuY2UgYW5kIGhlbmNlIGludmFsaWRhdGVzIHRoZSBOT0RFX1RPX0tFWSBlbnRyeVxuICBlLmFwcGx5ID0gKG9wOiBPcGVyYXRpb24pID0+IHtcbiAgICBjb25zdCBtYXRjaGVzOiBbUGF0aCwgS2V5XVtdID0gW11cblxuICAgIGNvbnN0IHBlbmRpbmdEaWZmcyA9IEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLmdldChlKVxuICAgIGlmIChwZW5kaW5nRGlmZnM/Lmxlbmd0aCkge1xuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBwZW5kaW5nRGlmZnNcbiAgICAgICAgLm1hcCh0ZXh0RGlmZiA9PiB0cmFuc2Zvcm1UZXh0RGlmZih0ZXh0RGlmZiwgb3ApKVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pIGFzIFRleHREaWZmW11cblxuICAgICAgRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuc2V0KGUsIHRyYW5zZm9ybWVkKVxuICAgIH1cblxuICAgIGNvbnN0IHBlbmRpbmdTZWxlY3Rpb24gPSBFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04uZ2V0KGUpXG4gICAgaWYgKHBlbmRpbmdTZWxlY3Rpb24pIHtcbiAgICAgIEVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTi5zZXQoXG4gICAgICAgIGUsXG4gICAgICAgIHRyYW5zZm9ybVBlbmRpbmdSYW5nZShlLCBwZW5kaW5nU2VsZWN0aW9uLCBvcClcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBwZW5kaW5nQWN0aW9uID0gRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OLmdldChlKVxuICAgIGlmIChwZW5kaW5nQWN0aW9uPy5hdCkge1xuICAgICAgY29uc3QgYXQgPSBQb2ludC5pc1BvaW50KHBlbmRpbmdBY3Rpb24/LmF0KVxuICAgICAgICA/IHRyYW5zZm9ybVBlbmRpbmdQb2ludChlLCBwZW5kaW5nQWN0aW9uLmF0LCBvcClcbiAgICAgICAgOiB0cmFuc2Zvcm1QZW5kaW5nUmFuZ2UoZSwgcGVuZGluZ0FjdGlvbi5hdCwgb3ApXG5cbiAgICAgIEVESVRPUl9UT19QRU5ESU5HX0FDVElPTi5zZXQoZSwgYXQgPyB7IC4uLnBlbmRpbmdBY3Rpb24sIGF0IH0gOiBudWxsKVxuICAgIH1cblxuICAgIHN3aXRjaCAob3AudHlwZSkge1xuICAgICAgY2FzZSAnaW5zZXJ0X3RleHQnOlxuICAgICAgY2FzZSAncmVtb3ZlX3RleHQnOlxuICAgICAgY2FzZSAnc2V0X25vZGUnOlxuICAgICAgY2FzZSAnc3BsaXRfbm9kZSc6IHtcbiAgICAgICAgbWF0Y2hlcy5wdXNoKC4uLmdldE1hdGNoZXMoZSwgb3AucGF0aCkpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3NldF9zZWxlY3Rpb24nOiB7XG4gICAgICAgIC8vIFNlbGVjdGlvbiB3YXMgbWFudWFsbHkgc2V0LCBkb24ndCByZXN0b3JlIHRoZSB1c2VyIHNlbGVjdGlvbiBhZnRlciB0aGUgY2hhbmdlLlxuICAgICAgICBFRElUT1JfVE9fVVNFUl9TRUxFQ1RJT04uZ2V0KGUpPy51bnJlZigpXG4gICAgICAgIEVESVRPUl9UT19VU0VSX1NFTEVDVElPTi5kZWxldGUoZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5zZXJ0X25vZGUnOlxuICAgICAgY2FzZSAncmVtb3ZlX25vZGUnOiB7XG4gICAgICAgIG1hdGNoZXMucHVzaCguLi5nZXRNYXRjaGVzKGUsIFBhdGgucGFyZW50KG9wLnBhdGgpKSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVyZ2Vfbm9kZSc6IHtcbiAgICAgICAgY29uc3QgcHJldlBhdGggPSBQYXRoLnByZXZpb3VzKG9wLnBhdGgpXG4gICAgICAgIG1hdGNoZXMucHVzaCguLi5nZXRNYXRjaGVzKGUsIHByZXZQYXRoKSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbW92ZV9ub2RlJzoge1xuICAgICAgICBjb25zdCBjb21tb25QYXRoID0gUGF0aC5jb21tb24oXG4gICAgICAgICAgUGF0aC5wYXJlbnQob3AucGF0aCksXG4gICAgICAgICAgUGF0aC5wYXJlbnQob3AubmV3UGF0aClcbiAgICAgICAgKVxuICAgICAgICBtYXRjaGVzLnB1c2goLi4uZ2V0TWF0Y2hlcyhlLCBjb21tb25QYXRoKSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhcHBseShvcClcblxuICAgIGZvciAoY29uc3QgW3BhdGgsIGtleV0gb2YgbWF0Y2hlcykge1xuICAgICAgY29uc3QgW25vZGVdID0gRWRpdG9yLm5vZGUoZSwgcGF0aClcbiAgICAgIE5PREVfVE9fS0VZLnNldChub2RlLCBrZXkpXG4gICAgfVxuICB9XG5cbiAgZS5zZXRGcmFnbWVudERhdGEgPSAoZGF0YTogUGljazxEYXRhVHJhbnNmZXIsICdnZXREYXRhJyB8ICdzZXREYXRhJz4pID0+IHtcbiAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZVxuXG4gICAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKHNlbGVjdGlvbilcbiAgICBjb25zdCBzdGFydFZvaWQgPSBFZGl0b3Iudm9pZChlLCB7IGF0OiBzdGFydC5wYXRoIH0pXG4gICAgY29uc3QgZW5kVm9pZCA9IEVkaXRvci52b2lkKGUsIHsgYXQ6IGVuZC5wYXRoIH0pXG5cbiAgICBpZiAoUmFuZ2UuaXNDb2xsYXBzZWQoc2VsZWN0aW9uKSAmJiAhc3RhcnRWb2lkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSBmYWtlIHNlbGVjdGlvbiBzbyB0aGF0IHdlIGNhbiBhZGQgYSBCYXNlNjQtZW5jb2RlZCBjb3B5IG9mIHRoZVxuICAgIC8vIGZyYWdtZW50IHRvIHRoZSBIVE1MLCB0byBkZWNvZGUgb24gZnV0dXJlIHBhc3Rlcy5cbiAgICBjb25zdCBkb21SYW5nZSA9IFJlYWN0RWRpdG9yLnRvRE9NUmFuZ2UoZSwgc2VsZWN0aW9uKVxuICAgIGxldCBjb250ZW50cyA9IGRvbVJhbmdlLmNsb25lQ29udGVudHMoKVxuICAgIGxldCBhdHRhY2ggPSBjb250ZW50cy5jaGlsZE5vZGVzWzBdIGFzIEhUTUxFbGVtZW50XG5cbiAgICAvLyBNYWtlIHN1cmUgYXR0YWNoIGlzIG5vbi1lbXB0eSwgc2luY2UgZW1wdHkgbm9kZXMgd2lsbCBub3QgZ2V0IGNvcGllZC5cbiAgICBjb250ZW50cy5jaGlsZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICBpZiAobm9kZS50ZXh0Q29udGVudCAmJiBub2RlLnRleHRDb250ZW50LnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgYXR0YWNoID0gbm9kZSBhcyBIVE1MRWxlbWVudFxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBDT01QQVQ6IElmIHRoZSBlbmQgbm9kZSBpcyBhIHZvaWQgbm9kZSwgd2UgbmVlZCB0byBtb3ZlIHRoZSBlbmQgb2YgdGhlXG4gICAgLy8gcmFuZ2UgZnJvbSB0aGUgdm9pZCBub2RlJ3Mgc3BhY2VyIHNwYW4sIHRvIHRoZSBlbmQgb2YgdGhlIHZvaWQgbm9kZSdzXG4gICAgLy8gY29udGVudCwgc2luY2UgdGhlIHNwYWNlciBpcyBiZWZvcmUgdm9pZCdzIGNvbnRlbnQgaW4gdGhlIERPTS5cbiAgICBpZiAoZW5kVm9pZCkge1xuICAgICAgY29uc3QgW3ZvaWROb2RlXSA9IGVuZFZvaWRcbiAgICAgIGNvbnN0IHIgPSBkb21SYW5nZS5jbG9uZVJhbmdlKClcbiAgICAgIGNvbnN0IGRvbU5vZGUgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZSwgdm9pZE5vZGUpXG4gICAgICByLnNldEVuZEFmdGVyKGRvbU5vZGUpXG4gICAgICBjb250ZW50cyA9IHIuY2xvbmVDb250ZW50cygpXG4gICAgfVxuXG4gICAgLy8gQ09NUEFUOiBJZiB0aGUgc3RhcnQgbm9kZSBpcyBhIHZvaWQgbm9kZSwgd2UgbmVlZCB0byBhdHRhY2ggdGhlIGVuY29kZWRcbiAgICAvLyBmcmFnbWVudCB0byB0aGUgdm9pZCBub2RlJ3MgY29udGVudCBub2RlIGluc3RlYWQgb2YgdGhlIHNwYWNlciwgYmVjYXVzZVxuICAgIC8vIGF0dGFjaGluZyBpdCB0byBlbXB0eSBgPGRpdj4vPHNwYW4+YCBub2RlcyB3aWxsIGVuZCB1cCBoYXZpbmcgaXQgZXJhc2VkIGJ5XG4gICAgLy8gbW9zdCBicm93c2Vycy4gKDIwMTgvMDQvMjcpXG4gICAgaWYgKHN0YXJ0Vm9pZCkge1xuICAgICAgYXR0YWNoID0gY29udGVudHMucXVlcnlTZWxlY3RvcignW2RhdGEtc2xhdGUtc3BhY2VyXScpISBhcyBIVE1MRWxlbWVudFxuICAgIH1cblxuICAgIC8vIFJlbW92ZSBhbnkgemVyby13aWR0aCBzcGFjZSBzcGFucyBmcm9tIHRoZSBjbG9uZWQgRE9NIHNvIHRoYXQgdGhleSBkb24ndFxuICAgIC8vIHNob3cgdXAgZWxzZXdoZXJlIHdoZW4gcGFzdGVkLlxuICAgIEFycmF5LmZyb20oY29udGVudHMucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2xhdGUtemVyby13aWR0aF0nKSkuZm9yRWFjaChcbiAgICAgIHp3ID0+IHtcbiAgICAgICAgY29uc3QgaXNOZXdsaW5lID0gencuZ2V0QXR0cmlidXRlKCdkYXRhLXNsYXRlLXplcm8td2lkdGgnKSA9PT0gJ24nXG4gICAgICAgIHp3LnRleHRDb250ZW50ID0gaXNOZXdsaW5lID8gJ1xcbicgOiAnJ1xuICAgICAgfVxuICAgIClcblxuICAgIC8vIFNldCBhIGBkYXRhLXNsYXRlLWZyYWdtZW50YCBhdHRyaWJ1dGUgb24gYSBub24tZW1wdHkgbm9kZSwgc28gaXQgc2hvd3MgdXBcbiAgICAvLyBpbiB0aGUgSFRNTCwgYW5kIGNhbiBiZSB1c2VkIGZvciBpbnRyYS1TbGF0ZSBwYXN0aW5nLiBJZiBpdCdzIGEgdGV4dFxuICAgIC8vIG5vZGUsIHdyYXAgaXQgaW4gYSBgPHNwYW4+YCBzbyB3ZSBoYXZlIHNvbWV0aGluZyB0byBzZXQgYW4gYXR0cmlidXRlIG9uLlxuICAgIGlmIChpc0RPTVRleHQoYXR0YWNoKSkge1xuICAgICAgY29uc3Qgc3BhbiA9IGF0dGFjaC5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgICAgLy8gQ09NUEFUOiBJbiBDaHJvbWUgYW5kIFNhZmFyaSwgaWYgd2UgZG9uJ3QgYWRkIHRoZSBgd2hpdGUtc3BhY2VgIHN0eWxlXG4gICAgICAvLyB0aGVuIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNwYWNlcyB3aWxsIGJlIGlnbm9yZWQuICgyMDE3LzA5LzIxKVxuICAgICAgc3Bhbi5zdHlsZS53aGl0ZVNwYWNlID0gJ3ByZSdcbiAgICAgIHNwYW4uYXBwZW5kQ2hpbGQoYXR0YWNoKVxuICAgICAgY29udGVudHMuYXBwZW5kQ2hpbGQoc3BhbilcbiAgICAgIGF0dGFjaCA9IHNwYW5cbiAgICB9XG5cbiAgICBjb25zdCBmcmFnbWVudCA9IGUuZ2V0RnJhZ21lbnQoKVxuICAgIGNvbnN0IHN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGZyYWdtZW50KVxuICAgIGNvbnN0IGVuY29kZWQgPSB3aW5kb3cuYnRvYShlbmNvZGVVUklDb21wb25lbnQoc3RyaW5nKSlcbiAgICBhdHRhY2guc2V0QXR0cmlidXRlKCdkYXRhLXNsYXRlLWZyYWdtZW50JywgZW5jb2RlZClcbiAgICBkYXRhLnNldERhdGEoJ2FwcGxpY2F0aW9uL3gtc2xhdGUtZnJhZ21lbnQnLCBlbmNvZGVkKVxuXG4gICAgLy8gQWRkIHRoZSBjb250ZW50IHRvIGEgPGRpdj4gc28gdGhhdCB3ZSBjYW4gZ2V0IGl0cyBpbm5lciBIVE1MLlxuICAgIGNvbnN0IGRpdiA9IGNvbnRlbnRzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBkaXYuYXBwZW5kQ2hpbGQoY29udGVudHMpXG4gICAgZGl2LnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJ3RydWUnKVxuICAgIGNvbnRlbnRzLm93bmVyRG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpXG4gICAgZGF0YS5zZXREYXRhKCd0ZXh0L2h0bWwnLCBkaXYuaW5uZXJIVE1MKVxuICAgIGRhdGEuc2V0RGF0YSgndGV4dC9wbGFpbicsIGdldFBsYWluVGV4dChkaXYpKVxuICAgIGNvbnRlbnRzLm93bmVyRG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkaXYpXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGUuaW5zZXJ0RGF0YSA9IChkYXRhOiBEYXRhVHJhbnNmZXIpID0+IHtcbiAgICBpZiAoIWUuaW5zZXJ0RnJhZ21lbnREYXRhKGRhdGEpKSB7XG4gICAgICBlLmluc2VydFRleHREYXRhKGRhdGEpXG4gICAgfVxuICB9XG5cbiAgZS5pbnNlcnRGcmFnbWVudERhdGEgPSAoZGF0YTogRGF0YVRyYW5zZmVyKTogYm9vbGVhbiA9PiB7XG4gICAgLyoqXG4gICAgICogQ2hlY2tpbmcgY29waWVkIGZyYWdtZW50IGZyb20gYXBwbGljYXRpb24veC1zbGF0ZS1mcmFnbWVudCBvciBkYXRhLXNsYXRlLWZyYWdtZW50XG4gICAgICovXG4gICAgY29uc3QgZnJhZ21lbnQgPVxuICAgICAgZGF0YS5nZXREYXRhKCdhcHBsaWNhdGlvbi94LXNsYXRlLWZyYWdtZW50JykgfHxcbiAgICAgIGdldFNsYXRlRnJhZ21lbnRBdHRyaWJ1dGUoZGF0YSlcblxuICAgIGlmIChmcmFnbWVudCkge1xuICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZVVSSUNvbXBvbmVudCh3aW5kb3cuYXRvYihmcmFnbWVudCkpXG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGRlY29kZWQpIGFzIE5vZGVbXVxuICAgICAgZS5pbnNlcnRGcmFnbWVudChwYXJzZWQpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGUuaW5zZXJ0VGV4dERhdGEgPSAoZGF0YTogRGF0YVRyYW5zZmVyKTogYm9vbGVhbiA9PiB7XG4gICAgY29uc3QgdGV4dCA9IGRhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG5cbiAgICBpZiAodGV4dCkge1xuICAgICAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KC9cXHJcXG58XFxyfFxcbi8pXG4gICAgICBsZXQgc3BsaXQgPSBmYWxzZVxuXG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgaWYgKHNwbGl0KSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGUsIHsgYWx3YXlzOiB0cnVlIH0pXG4gICAgICAgIH1cblxuICAgICAgICBlLmluc2VydFRleHQobGluZSlcbiAgICAgICAgc3BsaXQgPSB0cnVlXG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGUub25DaGFuZ2UgPSAoKSA9PiB7XG4gICAgLy8gQ09NUEFUOiBSZWFjdCBkb2Vzbid0IGJhdGNoIGBzZXRTdGF0ZWAgaG9vayBjYWxscywgd2hpY2ggbWVhbnMgdGhhdCB0aGVcbiAgICAvLyBjaGlsZHJlbiBhbmQgc2VsZWN0aW9uIGNhbiBnZXQgb3V0IG9mIHN5bmMgZm9yIG9uZSByZW5kZXIgcGFzcy4gU28gd2VcbiAgICAvLyBoYXZlIHRvIHVzZSB0aGlzIHVuc3RhYmxlIEFQSSB0byBlbnN1cmUgaXQgYmF0Y2hlcyB0aGVtLiAoMjAxOS8xMi8wMylcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzE0MjU5I2lzc3VlY29tbWVudC00Mzk3MDIzNjdcbiAgICBSZWFjdERPTS51bnN0YWJsZV9iYXRjaGVkVXBkYXRlcygoKSA9PiB7XG4gICAgICBjb25zdCBvbkNvbnRleHRDaGFuZ2UgPSBFRElUT1JfVE9fT05fQ0hBTkdFLmdldChlKVxuXG4gICAgICBpZiAob25Db250ZXh0Q2hhbmdlKSB7XG4gICAgICAgIG9uQ29udGV4dENoYW5nZSgpXG4gICAgICB9XG5cbiAgICAgIG9uQ2hhbmdlKClcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIGVcbn1cblxuY29uc3QgZ2V0TWF0Y2hlcyA9IChlOiBFZGl0b3IsIHBhdGg6IFBhdGgpID0+IHtcbiAgY29uc3QgbWF0Y2hlczogW1BhdGgsIEtleV1bXSA9IFtdXG4gIGZvciAoY29uc3QgW24sIHBdIG9mIEVkaXRvci5sZXZlbHMoZSwgeyBhdDogcGF0aCB9KSkge1xuICAgIGNvbnN0IGtleSA9IFJlYWN0RWRpdG9yLmZpbmRLZXkoZSwgbilcbiAgICBtYXRjaGVzLnB1c2goW3AsIGtleV0pXG4gIH1cbiAgcmV0dXJuIG1hdGNoZXNcbn1cbiIsICJpbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnaXMtcGxhaW4tb2JqZWN0J1xuaW1wb3J0IHsgT3BlcmF0aW9uLCBSYW5nZSB9IGZyb20gJ3NsYXRlJ1xuXG5pbnRlcmZhY2UgQmF0Y2gge1xuICBvcGVyYXRpb25zOiBPcGVyYXRpb25bXVxuICBzZWxlY3Rpb25CZWZvcmU6IFJhbmdlIHwgbnVsbFxufVxuXG4vKipcbiAqIGBIaXN0b3J5YCBvYmplY3RzIGhvbGQgYWxsIG9mIHRoZSBvcGVyYXRpb25zIHRoYXQgYXJlIGFwcGxpZWQgdG8gYSB2YWx1ZSwgc29cbiAqIHRoZXkgY2FuIGJlIHVuZG9uZSBvciByZWRvbmUgYXMgbmVjZXNzYXJ5LlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgSGlzdG9yeSB7XG4gIHJlZG9zOiBCYXRjaFtdXG4gIHVuZG9zOiBCYXRjaFtdXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBIaXN0b3J5ID0ge1xuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIGBIaXN0b3J5YCBvYmplY3QuXG4gICAqL1xuXG4gIGlzSGlzdG9yeSh2YWx1ZTogYW55KTogdmFsdWUgaXMgSGlzdG9yeSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGlzUGxhaW5PYmplY3QodmFsdWUpICYmXG4gICAgICBBcnJheS5pc0FycmF5KHZhbHVlLnJlZG9zKSAmJlxuICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZS51bmRvcykgJiZcbiAgICAgICh2YWx1ZS5yZWRvcy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgT3BlcmF0aW9uLmlzT3BlcmF0aW9uTGlzdCh2YWx1ZS5yZWRvc1swXS5vcGVyYXRpb25zKSkgJiZcbiAgICAgICh2YWx1ZS51bmRvcy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgT3BlcmF0aW9uLmlzT3BlcmF0aW9uTGlzdCh2YWx1ZS51bmRvc1swXS5vcGVyYXRpb25zKSlcbiAgICApXG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgQmFzZUVkaXRvciwgRWRpdG9yIH0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyBIaXN0b3J5IH0gZnJvbSAnLi9oaXN0b3J5J1xuXG4vKipcbiAqIFdlYWttYXBzIGZvciBhdHRhY2hpbmcgc3RhdGUgdG8gdGhlIGVkaXRvci5cbiAqL1xuXG5leHBvcnQgY29uc3QgSElTVE9SWSA9IG5ldyBXZWFrTWFwPEVkaXRvciwgSGlzdG9yeT4oKVxuZXhwb3J0IGNvbnN0IFNBVklORyA9IG5ldyBXZWFrTWFwPEVkaXRvciwgYm9vbGVhbiB8IHVuZGVmaW5lZD4oKVxuZXhwb3J0IGNvbnN0IE1FUkdJTkcgPSBuZXcgV2Vha01hcDxFZGl0b3IsIGJvb2xlYW4gfCB1bmRlZmluZWQ+KClcblxuLyoqXG4gKiBgSGlzdG9yeUVkaXRvcmAgY29udGFpbnMgaGVscGVycyBmb3IgaGlzdG9yeS1lbmFibGVkIGVkaXRvcnMuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBIaXN0b3J5RWRpdG9yIGV4dGVuZHMgQmFzZUVkaXRvciB7XG4gIGhpc3Rvcnk6IEhpc3RvcnlcbiAgdW5kbzogKCkgPT4gdm9pZFxuICByZWRvOiAoKSA9PiB2b2lkXG4gIHdyaXRlSGlzdG9yeTogKHN0YWNrOiAndW5kb3MnIHwgJ3JlZG9zJywgYmF0Y2g6IGFueSkgPT4gdm9pZFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgSGlzdG9yeUVkaXRvciA9IHtcbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBgSGlzdG9yeUVkaXRvcmAgb2JqZWN0LlxuICAgKi9cblxuICBpc0hpc3RvcnlFZGl0b3IodmFsdWU6IGFueSk6IHZhbHVlIGlzIEhpc3RvcnlFZGl0b3Ige1xuICAgIHJldHVybiBIaXN0b3J5LmlzSGlzdG9yeSh2YWx1ZS5oaXN0b3J5KSAmJiBFZGl0b3IuaXNFZGl0b3IodmFsdWUpXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWVyZ2UgZmxhZydzIGN1cnJlbnQgdmFsdWUuXG4gICAqL1xuXG4gIGlzTWVyZ2luZyhlZGl0b3I6IEhpc3RvcnlFZGl0b3IpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gTUVSR0lORy5nZXQoZWRpdG9yKVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNhdmluZyBmbGFnJ3MgY3VycmVudCB2YWx1ZS5cbiAgICovXG5cbiAgaXNTYXZpbmcoZWRpdG9yOiBIaXN0b3J5RWRpdG9yKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIFNBVklORy5nZXQoZWRpdG9yKVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZWRvIHRvIHRoZSBwcmV2aW91cyBzYXZlZCBzdGF0ZS5cbiAgICovXG5cbiAgcmVkbyhlZGl0b3I6IEhpc3RvcnlFZGl0b3IpOiB2b2lkIHtcbiAgICBlZGl0b3IucmVkbygpXG4gIH0sXG5cbiAgLyoqXG4gICAqIFVuZG8gdG8gdGhlIHByZXZpb3VzIHNhdmVkIHN0YXRlLlxuICAgKi9cblxuICB1bmRvKGVkaXRvcjogSGlzdG9yeUVkaXRvcik6IHZvaWQge1xuICAgIGVkaXRvci51bmRvKClcbiAgfSxcblxuICAvKipcbiAgICogQXBwbHkgYSBzZXJpZXMgb2YgY2hhbmdlcyBpbnNpZGUgYSBzeW5jaHJvbm91cyBgZm5gLCB3aXRob3V0IG1lcmdpbmcgYW55IG9mXG4gICAqIHRoZSBuZXcgb3BlcmF0aW9ucyBpbnRvIHByZXZpb3VzIHNhdmUgcG9pbnQgaW4gdGhlIGhpc3RvcnkuXG4gICAqL1xuXG4gIHdpdGhvdXRNZXJnaW5nKGVkaXRvcjogSGlzdG9yeUVkaXRvciwgZm46ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2ID0gSGlzdG9yeUVkaXRvci5pc01lcmdpbmcoZWRpdG9yKVxuICAgIE1FUkdJTkcuc2V0KGVkaXRvciwgZmFsc2UpXG4gICAgZm4oKVxuICAgIE1FUkdJTkcuc2V0KGVkaXRvciwgcHJldilcbiAgfSxcblxuICAvKipcbiAgICogQXBwbHkgYSBzZXJpZXMgb2YgY2hhbmdlcyBpbnNpZGUgYSBzeW5jaHJvbm91cyBgZm5gLCB3aXRob3V0IHNhdmluZyBhbnkgb2ZcbiAgICogdGhlaXIgb3BlcmF0aW9ucyBpbnRvIHRoZSBoaXN0b3J5LlxuICAgKi9cblxuICB3aXRob3V0U2F2aW5nKGVkaXRvcjogSGlzdG9yeUVkaXRvciwgZm46ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2ID0gSGlzdG9yeUVkaXRvci5pc1NhdmluZyhlZGl0b3IpXG4gICAgU0FWSU5HLnNldChlZGl0b3IsIGZhbHNlKVxuICAgIGZuKClcbiAgICBTQVZJTkcuc2V0KGVkaXRvciwgcHJldilcbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIE9wZXJhdGlvbiwgUGF0aCwgUmFuZ2UsIFRyYW5zZm9ybXMgfSBmcm9tICdzbGF0ZSdcblxuaW1wb3J0IHsgSGlzdG9yeUVkaXRvciB9IGZyb20gJy4vaGlzdG9yeS1lZGl0b3InXG5cbi8qKlxuICogVGhlIGB3aXRoSGlzdG9yeWAgcGx1Z2luIGtlZXBzIHRyYWNrIG9mIHRoZSBvcGVyYXRpb24gaGlzdG9yeSBvZiBhIFNsYXRlXG4gKiBlZGl0b3IgYXMgb3BlcmF0aW9ucyBhcmUgYXBwbGllZCB0byBpdCwgdXNpbmcgdW5kbyBhbmQgcmVkbyBzdGFja3MuXG4gKlxuICogSWYgeW91IGFyZSB1c2luZyBUeXBlU2NyaXB0LCB5b3UgbXVzdCBleHRlbmQgU2xhdGUncyBDdXN0b21UeXBlcyB0byB1c2VcbiAqIHRoaXMgcGx1Z2luLlxuICpcbiAqIFNlZSBodHRwczovL2RvY3Muc2xhdGVqcy5vcmcvY29uY2VwdHMvMTEtdHlwZXNjcmlwdCB0byBsZWFybiBob3cuXG4gKi9cblxuZXhwb3J0IGNvbnN0IHdpdGhIaXN0b3J5ID0gPFQgZXh0ZW5kcyBFZGl0b3I+KGVkaXRvcjogVCkgPT4ge1xuICBjb25zdCBlID0gZWRpdG9yIGFzIFQgJiBIaXN0b3J5RWRpdG9yXG4gIGNvbnN0IHsgYXBwbHkgfSA9IGVcbiAgZS5oaXN0b3J5ID0geyB1bmRvczogW10sIHJlZG9zOiBbXSB9XG5cbiAgZS5yZWRvID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaGlzdG9yeSB9ID0gZVxuICAgIGNvbnN0IHsgcmVkb3MgfSA9IGhpc3RvcnlcblxuICAgIGlmIChyZWRvcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBiYXRjaCA9IHJlZG9zW3JlZG9zLmxlbmd0aCAtIDFdXG5cbiAgICAgIGlmIChiYXRjaC5zZWxlY3Rpb25CZWZvcmUpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZXRTZWxlY3Rpb24oZSwgYmF0Y2guc2VsZWN0aW9uQmVmb3JlKVxuICAgICAgfVxuXG4gICAgICBIaXN0b3J5RWRpdG9yLndpdGhvdXRTYXZpbmcoZSwgKCkgPT4ge1xuICAgICAgICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGUsICgpID0+IHtcbiAgICAgICAgICBmb3IgKGNvbnN0IG9wIG9mIGJhdGNoLm9wZXJhdGlvbnMpIHtcbiAgICAgICAgICAgIGUuYXBwbHkob3ApXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcblxuICAgICAgaGlzdG9yeS5yZWRvcy5wb3AoKVxuICAgICAgZS53cml0ZUhpc3RvcnkoJ3VuZG9zJywgYmF0Y2gpXG4gICAgfVxuICB9XG5cbiAgZS51bmRvID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaGlzdG9yeSB9ID0gZVxuICAgIGNvbnN0IHsgdW5kb3MgfSA9IGhpc3RvcnlcblxuICAgIGlmICh1bmRvcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBiYXRjaCA9IHVuZG9zW3VuZG9zLmxlbmd0aCAtIDFdXG5cbiAgICAgIEhpc3RvcnlFZGl0b3Iud2l0aG91dFNhdmluZyhlLCAoKSA9PiB7XG4gICAgICAgIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZSwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGludmVyc2VPcHMgPSBiYXRjaC5vcGVyYXRpb25zLm1hcChPcGVyYXRpb24uaW52ZXJzZSkucmV2ZXJzZSgpXG5cbiAgICAgICAgICBmb3IgKGNvbnN0IG9wIG9mIGludmVyc2VPcHMpIHtcbiAgICAgICAgICAgIGUuYXBwbHkob3ApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChiYXRjaC5zZWxlY3Rpb25CZWZvcmUpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMuc2V0U2VsZWN0aW9uKGUsIGJhdGNoLnNlbGVjdGlvbkJlZm9yZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuXG4gICAgICBlLndyaXRlSGlzdG9yeSgncmVkb3MnLCBiYXRjaClcbiAgICAgIGhpc3RvcnkudW5kb3MucG9wKClcbiAgICB9XG4gIH1cblxuICBlLmFwcGx5ID0gKG9wOiBPcGVyYXRpb24pID0+IHtcbiAgICBjb25zdCB7IG9wZXJhdGlvbnMsIGhpc3RvcnkgfSA9IGVcbiAgICBjb25zdCB7IHVuZG9zIH0gPSBoaXN0b3J5XG4gICAgY29uc3QgbGFzdEJhdGNoID0gdW5kb3NbdW5kb3MubGVuZ3RoIC0gMV1cbiAgICBjb25zdCBsYXN0T3AgPVxuICAgICAgbGFzdEJhdGNoICYmIGxhc3RCYXRjaC5vcGVyYXRpb25zW2xhc3RCYXRjaC5vcGVyYXRpb25zLmxlbmd0aCAtIDFdXG4gICAgbGV0IHNhdmUgPSBIaXN0b3J5RWRpdG9yLmlzU2F2aW5nKGUpXG4gICAgbGV0IG1lcmdlID0gSGlzdG9yeUVkaXRvci5pc01lcmdpbmcoZSlcblxuICAgIGlmIChzYXZlID09IG51bGwpIHtcbiAgICAgIHNhdmUgPSBzaG91bGRTYXZlKG9wLCBsYXN0T3ApXG4gICAgfVxuXG4gICAgaWYgKHNhdmUpIHtcbiAgICAgIGlmIChtZXJnZSA9PSBudWxsKSB7XG4gICAgICAgIGlmIChsYXN0QmF0Y2ggPT0gbnVsbCkge1xuICAgICAgICAgIG1lcmdlID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIGlmIChvcGVyYXRpb25zLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgIG1lcmdlID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1lcmdlID0gc2hvdWxkTWVyZ2Uob3AsIGxhc3RPcClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobGFzdEJhdGNoICYmIG1lcmdlKSB7XG4gICAgICAgIGxhc3RCYXRjaC5vcGVyYXRpb25zLnB1c2gob3ApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBiYXRjaCA9IHtcbiAgICAgICAgICBvcGVyYXRpb25zOiBbb3BdLFxuICAgICAgICAgIHNlbGVjdGlvbkJlZm9yZTogZS5zZWxlY3Rpb24sXG4gICAgICAgIH1cbiAgICAgICAgZS53cml0ZUhpc3RvcnkoJ3VuZG9zJywgYmF0Y2gpXG4gICAgICB9XG5cbiAgICAgIHdoaWxlICh1bmRvcy5sZW5ndGggPiAxMDApIHtcbiAgICAgICAgdW5kb3Muc2hpZnQoKVxuICAgICAgfVxuXG4gICAgICBoaXN0b3J5LnJlZG9zID0gW11cbiAgICB9XG5cbiAgICBhcHBseShvcClcbiAgfVxuXG4gIGUud3JpdGVIaXN0b3J5ID0gKHN0YWNrOiAndW5kb3MnIHwgJ3JlZG9zJywgYmF0Y2g6IGFueSkgPT4ge1xuICAgIGUuaGlzdG9yeVtzdGFja10ucHVzaChiYXRjaClcbiAgfVxuXG4gIHJldHVybiBlXG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciB0byBtZXJnZSBhbiBvcGVyYXRpb24gaW50byB0aGUgcHJldmlvdXMgb3BlcmF0aW9uLlxuICovXG5cbmNvbnN0IHNob3VsZE1lcmdlID0gKG9wOiBPcGVyYXRpb24sIHByZXY6IE9wZXJhdGlvbiB8IHVuZGVmaW5lZCk6IGJvb2xlYW4gPT4ge1xuICBpZiAoXG4gICAgcHJldiAmJlxuICAgIG9wLnR5cGUgPT09ICdpbnNlcnRfdGV4dCcgJiZcbiAgICBwcmV2LnR5cGUgPT09ICdpbnNlcnRfdGV4dCcgJiZcbiAgICBvcC5vZmZzZXQgPT09IHByZXYub2Zmc2V0ICsgcHJldi50ZXh0Lmxlbmd0aCAmJlxuICAgIFBhdGguZXF1YWxzKG9wLnBhdGgsIHByZXYucGF0aClcbiAgKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGlmIChcbiAgICBwcmV2ICYmXG4gICAgb3AudHlwZSA9PT0gJ3JlbW92ZV90ZXh0JyAmJlxuICAgIHByZXYudHlwZSA9PT0gJ3JlbW92ZV90ZXh0JyAmJlxuICAgIG9wLm9mZnNldCArIG9wLnRleHQubGVuZ3RoID09PSBwcmV2Lm9mZnNldCAmJlxuICAgIFBhdGguZXF1YWxzKG9wLnBhdGgsIHByZXYucGF0aClcbiAgKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgYW4gb3BlcmF0aW9uIG5lZWRzIHRvIGJlIHNhdmVkIHRvIHRoZSBoaXN0b3J5LlxuICovXG5cbmNvbnN0IHNob3VsZFNhdmUgPSAob3A6IE9wZXJhdGlvbiwgcHJldjogT3BlcmF0aW9uIHwgdW5kZWZpbmVkKTogYm9vbGVhbiA9PiB7XG4gIGlmIChvcC50eXBlID09PSAnc2V0X3NlbGVjdGlvbicpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCAiY29uc3QgQllURV9VTklUUyA9IFtcblx0J0InLFxuXHQna0InLFxuXHQnTUInLFxuXHQnR0InLFxuXHQnVEInLFxuXHQnUEInLFxuXHQnRUInLFxuXHQnWkInLFxuXHQnWUInLFxuXTtcblxuY29uc3QgQklCWVRFX1VOSVRTID0gW1xuXHQnQicsXG5cdCdLaUInLFxuXHQnTWlCJyxcblx0J0dpQicsXG5cdCdUaUInLFxuXHQnUGlCJyxcblx0J0VpQicsXG5cdCdaaUInLFxuXHQnWWlCJyxcbl07XG5cbmNvbnN0IEJJVF9VTklUUyA9IFtcblx0J2InLFxuXHQna2JpdCcsXG5cdCdNYml0Jyxcblx0J0diaXQnLFxuXHQnVGJpdCcsXG5cdCdQYml0Jyxcblx0J0ViaXQnLFxuXHQnWmJpdCcsXG5cdCdZYml0Jyxcbl07XG5cbmNvbnN0IEJJQklUX1VOSVRTID0gW1xuXHQnYicsXG5cdCdraWJpdCcsXG5cdCdNaWJpdCcsXG5cdCdHaWJpdCcsXG5cdCdUaWJpdCcsXG5cdCdQaWJpdCcsXG5cdCdFaWJpdCcsXG5cdCdaaWJpdCcsXG5cdCdZaWJpdCcsXG5dO1xuXG4vKlxuRm9ybWF0cyB0aGUgZ2l2ZW4gbnVtYmVyIHVzaW5nIGBOdW1iZXIjdG9Mb2NhbGVTdHJpbmdgLlxuLSBJZiBsb2NhbGUgaXMgYSBzdHJpbmcsIHRoZSB2YWx1ZSBpcyBleHBlY3RlZCB0byBiZSBhIGxvY2FsZS1rZXkgKGZvciBleGFtcGxlOiBgZGVgKS5cbi0gSWYgbG9jYWxlIGlzIHRydWUsIHRoZSBzeXN0ZW0gZGVmYXVsdCBsb2NhbGUgaXMgdXNlZCBmb3IgdHJhbnNsYXRpb24uXG4tIElmIG5vIHZhbHVlIGZvciBsb2NhbGUgaXMgc3BlY2lmaWVkLCB0aGUgbnVtYmVyIGlzIHJldHVybmVkIHVubW9kaWZpZWQuXG4qL1xuY29uc3QgdG9Mb2NhbGVTdHJpbmcgPSAobnVtYmVyLCBsb2NhbGUsIG9wdGlvbnMpID0+IHtcblx0bGV0IHJlc3VsdCA9IG51bWJlcjtcblx0aWYgKHR5cGVvZiBsb2NhbGUgPT09ICdzdHJpbmcnIHx8IEFycmF5LmlzQXJyYXkobG9jYWxlKSkge1xuXHRcdHJlc3VsdCA9IG51bWJlci50b0xvY2FsZVN0cmluZyhsb2NhbGUsIG9wdGlvbnMpO1xuXHR9IGVsc2UgaWYgKGxvY2FsZSA9PT0gdHJ1ZSB8fCBvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXN1bHQgPSBudW1iZXIudG9Mb2NhbGVTdHJpbmcodW5kZWZpbmVkLCBvcHRpb25zKTtcblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwcmV0dHlCeXRlcyhudW1iZXIsIG9wdGlvbnMpIHtcblx0aWYgKCFOdW1iZXIuaXNGaW5pdGUobnVtYmVyKSkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIGEgZmluaXRlIG51bWJlciwgZ290ICR7dHlwZW9mIG51bWJlcn06ICR7bnVtYmVyfWApO1xuXHR9XG5cblx0b3B0aW9ucyA9IHtcblx0XHRiaXRzOiBmYWxzZSxcblx0XHRiaW5hcnk6IGZhbHNlLFxuXHRcdHNwYWNlOiB0cnVlLFxuXHRcdC4uLm9wdGlvbnMsXG5cdH07XG5cblx0Y29uc3QgVU5JVFMgPSBvcHRpb25zLmJpdHNcblx0XHQ/IChvcHRpb25zLmJpbmFyeSA/IEJJQklUX1VOSVRTIDogQklUX1VOSVRTKVxuXHRcdDogKG9wdGlvbnMuYmluYXJ5ID8gQklCWVRFX1VOSVRTIDogQllURV9VTklUUyk7XG5cblx0Y29uc3Qgc2VwYXJhdG9yID0gb3B0aW9ucy5zcGFjZSA/ICcgJyA6ICcnO1xuXG5cdGlmIChvcHRpb25zLnNpZ25lZCAmJiBudW1iZXIgPT09IDApIHtcblx0XHRyZXR1cm4gYCAwJHtzZXBhcmF0b3J9JHtVTklUU1swXX1gO1xuXHR9XG5cblx0Y29uc3QgaXNOZWdhdGl2ZSA9IG51bWJlciA8IDA7XG5cdGNvbnN0IHByZWZpeCA9IGlzTmVnYXRpdmUgPyAnLScgOiAob3B0aW9ucy5zaWduZWQgPyAnKycgOiAnJyk7XG5cblx0aWYgKGlzTmVnYXRpdmUpIHtcblx0XHRudW1iZXIgPSAtbnVtYmVyO1xuXHR9XG5cblx0bGV0IGxvY2FsZU9wdGlvbnM7XG5cblx0aWYgKG9wdGlvbnMubWluaW11bUZyYWN0aW9uRGlnaXRzICE9PSB1bmRlZmluZWQpIHtcblx0XHRsb2NhbGVPcHRpb25zID0ge21pbmltdW1GcmFjdGlvbkRpZ2l0czogb3B0aW9ucy5taW5pbXVtRnJhY3Rpb25EaWdpdHN9O1xuXHR9XG5cblx0aWYgKG9wdGlvbnMubWF4aW11bUZyYWN0aW9uRGlnaXRzICE9PSB1bmRlZmluZWQpIHtcblx0XHRsb2NhbGVPcHRpb25zID0ge21heGltdW1GcmFjdGlvbkRpZ2l0czogb3B0aW9ucy5tYXhpbXVtRnJhY3Rpb25EaWdpdHMsIC4uLmxvY2FsZU9wdGlvbnN9O1xuXHR9XG5cblx0aWYgKG51bWJlciA8IDEpIHtcblx0XHRjb25zdCBudW1iZXJTdHJpbmcgPSB0b0xvY2FsZVN0cmluZyhudW1iZXIsIG9wdGlvbnMubG9jYWxlLCBsb2NhbGVPcHRpb25zKTtcblx0XHRyZXR1cm4gcHJlZml4ICsgbnVtYmVyU3RyaW5nICsgc2VwYXJhdG9yICsgVU5JVFNbMF07XG5cdH1cblxuXHRjb25zdCBleHBvbmVudCA9IE1hdGgubWluKE1hdGguZmxvb3Iob3B0aW9ucy5iaW5hcnkgPyBNYXRoLmxvZyhudW1iZXIpIC8gTWF0aC5sb2coMTAyNCkgOiBNYXRoLmxvZzEwKG51bWJlcikgLyAzKSwgVU5JVFMubGVuZ3RoIC0gMSk7XG5cdG51bWJlciAvPSAob3B0aW9ucy5iaW5hcnkgPyAxMDI0IDogMTAwMCkgKiogZXhwb25lbnQ7XG5cblx0aWYgKCFsb2NhbGVPcHRpb25zKSB7XG5cdFx0bnVtYmVyID0gbnVtYmVyLnRvUHJlY2lzaW9uKDMpO1xuXHR9XG5cblx0Y29uc3QgbnVtYmVyU3RyaW5nID0gdG9Mb2NhbGVTdHJpbmcoTnVtYmVyKG51bWJlciksIG9wdGlvbnMubG9jYWxlLCBsb2NhbGVPcHRpb25zKTtcblxuXHRjb25zdCB1bml0ID0gVU5JVFNbZXhwb25lbnRdO1xuXG5cdHJldHVybiBwcmVmaXggKyBudW1iZXJTdHJpbmcgKyBzZXBhcmF0b3IgKyB1bml0O1xufVxuIiwgImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB0eXBlIHsgUmVuZGVyRWxlbWVudFByb3BzIH0gZnJvbSBcInNsYXRlLXJlYWN0XCI7XG5pbXBvcnQgeyBSaWNoRWxlbWVudCwgaXNCbG9jaywgaXNTdXBlckJsb2NrIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXJcIjtcblxuaW50ZXJmYWNlIElDdXJyZW50ZWxlbWVudFByb3ZpZGVyUHJvcHMge1xuICBibG9jazogUmljaEVsZW1lbnQ7XG4gIHN1cGVyYmxvY2tzOiBSaWNoRWxlbWVudFtdO1xuICBpbmxpbmU6IFJpY2hFbGVtZW50O1xufVxuXG5jb25zdCBDdXJyZW50RWxlbWVudENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PElDdXJyZW50ZWxlbWVudFByb3ZpZGVyUHJvcHM+KG51bGwpO1xuXG5leHBvcnQgY2xhc3MgQ3VycmVudEVsZW1lbnRQcm92aWRlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8SUN1cnJlbnRlbGVtZW50UHJvdmlkZXJQcm9wcz4ge1xuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8Q3VycmVudEVsZW1lbnRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt0aGlzLnByb3BzfT57dGhpcy5wcm9wcy5jaGlsZHJlbn08L0N1cnJlbnRFbGVtZW50Q29udGV4dC5Qcm92aWRlcj5cbiAgICApXG4gIH1cbn1cblxuaW50ZXJmYWNlIElDdXJyZW50RWxlbWVudFJldHJpZXZlclByb3BzIGV4dGVuZHMgUmVuZGVyRWxlbWVudFByb3BzIHtcbiAgZm46IChcbiAgICBwYXNzZWRQcm9wczogUmVuZGVyRWxlbWVudFByb3BzLFxuICAgIGlzU2VsZWN0ZWQ6IGJvb2xlYW4sXG4gICAgc2VsZWN0aW9uQ3JpdGVyaWE6IFwiYmxvY2tcIiB8IFwic3VwZXJibG9ja1wiIHwgXCJpbmxpbmVcIixcbiAgICBzZWxlY3Rpb25Jc1ByaW1hcnk6IGJvb2xlYW4sXG4gICkgPT4gUmVhY3QuUmVhY3ROb2RlO1xufVxuXG5pbnRlcmZhY2UgSUN1cnJlbnRFbGVtZW50UmV0cmlldmVyT3B0aW1pemVyUHJvcHMgZXh0ZW5kcyBJQ3VycmVudEVsZW1lbnRSZXRyaWV2ZXJQcm9wcyB7XG4gIGlzU2VsZWN0ZWQ6IGJvb2xlYW47XG4gIHNlbGVjdGlvbkNyaXRlcmlhOiBcImJsb2NrXCIgfCBcInN1cGVyYmxvY2tcIiB8IFwiaW5saW5lXCI7XG4gIHNlbGVjdGlvbklzUHJpbWFyeTogYm9vbGVhbjtcbn1cblxuY2xhc3MgQ3VycmVudEVsZW1lbnRSZXRyaWV2ZXJPcHRpbWl6ZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PElDdXJyZW50RWxlbWVudFJldHJpZXZlck9wdGltaXplclByb3BzPiB7XG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMucHJvcHMuZm4oe1xuICAgICAgICBhdHRyaWJ1dGVzOiB0aGlzLnByb3BzLmF0dHJpYnV0ZXMsXG4gICAgICAgIGNoaWxkcmVuOiB0aGlzLnByb3BzLmNoaWxkcmVuLFxuICAgICAgICBlbGVtZW50OiB0aGlzLnByb3BzLmVsZW1lbnQsXG4gICAgICB9LCB0aGlzLnByb3BzLmlzU2VsZWN0ZWQsIHRoaXMucHJvcHMuc2VsZWN0aW9uQ3JpdGVyaWEsIHRoaXMucHJvcHMuc2VsZWN0aW9uSXNQcmltYXJ5KVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEN1cnJlbnRFbGVtZW50UmV0cmlldmVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxJQ3VycmVudEVsZW1lbnRSZXRyaWV2ZXJQcm9wcz4ge1xuICBjb25zdHJ1Y3Rvcihwcm9wczogSUN1cnJlbnRFbGVtZW50UmV0cmlldmVyUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLmNvbnN1bWUgPSB0aGlzLmNvbnN1bWUuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBjb25zdW1lKHNlbGVjdGlvbjogSUN1cnJlbnRlbGVtZW50UHJvdmlkZXJQcm9wcykge1xuICAgIGNvbnN0IGVsZW1lbnRJblF1ZXN0aW9uID0gdGhpcy5wcm9wcy5lbGVtZW50O1xuICAgIGxldCBpc1NlbGVjdGVkID0gZmFsc2U7XG4gICAgbGV0IHNlbGVjdGlvbkNyaXRlcmlhOiBcImJsb2NrXCIgfCBcInN1cGVyYmxvY2tcIiB8IFwiaW5saW5lXCIgPSBudWxsO1xuICAgIGxldCBzZWxlY3Rpb25Jc1ByaW1hcnk6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBpZiAoaXNCbG9jayhlbGVtZW50SW5RdWVzdGlvbikpIHtcbiAgICAgIHNlbGVjdGlvbkNyaXRlcmlhID0gXCJibG9ja1wiO1xuICAgICAgaXNTZWxlY3RlZCA9IHNlbGVjdGlvbi5ibG9jayA9PT0gZWxlbWVudEluUXVlc3Rpb247XG4gICAgICBzZWxlY3Rpb25Jc1ByaW1hcnkgPSBpc1NlbGVjdGVkICYmICFzZWxlY3Rpb24uaW5saW5lO1xuICAgIH0gZWxzZSBpZiAoaXNTdXBlckJsb2NrKGVsZW1lbnRJblF1ZXN0aW9uKSkge1xuICAgICAgc2VsZWN0aW9uQ3JpdGVyaWEgPSBcInN1cGVyYmxvY2tcIjtcbiAgICAgIGNvbnN0IGluZGV4ID0gc2VsZWN0aW9uLnN1cGVyYmxvY2tzLmZpbmRJbmRleCgoZSkgPT4gZSA9PT0gZWxlbWVudEluUXVlc3Rpb24pO1xuICAgICAgaXNTZWxlY3RlZCA9IGluZGV4ICE9PSAtMTtcbiAgICAgIHNlbGVjdGlvbklzUHJpbWFyeSA9IGlzU2VsZWN0ZWQgJiYgIXNlbGVjdGlvbi5ibG9jayAmJiAhc2VsZWN0aW9uLmlubGluZSAmJiBpbmRleCA9PT0gc2VsZWN0aW9uLnN1cGVyYmxvY2tzLmxlbmd0aCAtIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGVjdGlvbkNyaXRlcmlhID0gXCJpbmxpbmVcIjtcbiAgICAgIGlzU2VsZWN0ZWQgPSBzZWxlY3Rpb24uaW5saW5lID09PSBlbGVtZW50SW5RdWVzdGlvbjtcbiAgICAgIHNlbGVjdGlvbklzUHJpbWFyeSA9IGlzU2VsZWN0ZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxDdXJyZW50RWxlbWVudFJldHJpZXZlck9wdGltaXplclxuICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgaXNTZWxlY3RlZD17aXNTZWxlY3RlZH1cbiAgICAgICAgc2VsZWN0aW9uQ3JpdGVyaWE9e3NlbGVjdGlvbkNyaXRlcmlhfVxuICAgICAgICBzZWxlY3Rpb25Jc1ByaW1hcnk9e3NlbGVjdGlvbklzUHJpbWFyeX1cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEN1cnJlbnRFbGVtZW50Q29udGV4dC5Db25zdW1lcj57dGhpcy5jb25zdW1lfTwvQ3VycmVudEVsZW1lbnRDb250ZXh0LkNvbnN1bWVyPlxuICAgIClcbiAgfVxufSIsICJpbXBvcnQgeyBJUm9vdExldmVsRG9jdW1lbnQsIFJpY2hFbGVtZW50LCBkZXNlcmlhbGl6ZSB9IGZyb20gXCIuLi9zZXJpYWxpemVyXCI7XG5pbXBvcnQgeyBJVGV4dCB9IGZyb20gXCIuLi9zZXJpYWxpemVyL3R5cGVzL3RleHRcIjtcbmltcG9ydCBlcXVhbHMgZnJvbSBcImRlZXAtZXF1YWxcIjtcblxuLyoqXG4gKiBDb3VudHMgdGhlIHNpemUgb2YgdGhlIGRvY3VtZW50XG4gKiBAcGFyYW0gcm9vdCBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvdW50U2l6ZShyb290OiBJUm9vdExldmVsRG9jdW1lbnQgfCBSaWNoRWxlbWVudCB8IElUZXh0KTogbnVtYmVyIHtcbiAgaWYgKHR5cGVvZiAocm9vdCBhcyBJVGV4dCkudGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiAocm9vdCBhcyBJVGV4dCkudGV4dC5sZW5ndGg7XG4gIH1cbiAgY29uc3QgY291bnRzID0gKHJvb3QgYXMgSVJvb3RMZXZlbERvY3VtZW50KS5jaGlsZHJlbi5tYXAoY291bnRTaXplKTtcbiAgaWYgKGNvdW50cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gMDtcbiAgfSBlbHNlIGlmIChjb3VudHMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGNvdW50c1swXTtcbiAgfVxuXG4gIHJldHVybiBjb3VudHMucmVkdWNlKChhLCBiKSA9PiBhICsgYik7XG59XG5cbi8qKlxuICogQ291bnRzIHRoZSB3b3JkcyBvZiB0aGUgZG9jdW1lbnRcbiAqIEBwYXJhbSByb290IFxuICovXG5jb25zdCBzcGFjZVJlZ2V4ID0gL15cXHMrJC87XG5leHBvcnQgZnVuY3Rpb24gY291bnRXb3Jkcyhyb290OiBJUm9vdExldmVsRG9jdW1lbnQgfCBSaWNoRWxlbWVudCB8IElUZXh0KTogbnVtYmVyIHtcbiAgaWYgKHR5cGVvZiAocm9vdCBhcyBJVGV4dCkudGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiAocm9vdCBhcyBJVGV4dCkudGV4dC5zcGxpdChcIiBcIikuZmlsdGVyKCh2KSA9PiB2ICE9PSBcIlwiICYmICFzcGFjZVJlZ2V4LnRlc3QodikpLmxlbmd0aDtcbiAgfVxuICBjb25zdCBjb3VudHMgPSAocm9vdCBhcyBJUm9vdExldmVsRG9jdW1lbnQpLmNoaWxkcmVuLm1hcChjb3VudFdvcmRzKTtcbiAgaWYgKGNvdW50cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gMDtcbiAgfSBlbHNlIGlmIChjb3VudHMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGNvdW50c1swXTtcbiAgfVxuXG4gIHJldHVybiBjb3VudHMucmVkdWNlKChhLCBiKSA9PiBhICsgYik7XG59XG5cbi8qKlxuICogQ291bnRzIHRoZSBzaXplIGFuZCB3b3JkcyBvZiB0aGUgZG9jdW1lbnRcbiAqIEBwYXJhbSByb290IFxuICovXG5leHBvcnQgZnVuY3Rpb24gY291bnRTaXplQW5kV29yZHMocm9vdDogSVJvb3RMZXZlbERvY3VtZW50IHwgUmljaEVsZW1lbnQgfCBJVGV4dCk6IFtudW1iZXIsIG51bWJlcl0ge1xuICBpZiAodHlwZW9mIChyb290IGFzIElUZXh0KS50ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIChyb290IGFzIElUZXh0KS50ZXh0Lmxlbmd0aCxcbiAgICAgIChyb290IGFzIElUZXh0KS50ZXh0LnNwbGl0KFwiIFwiKS5maWx0ZXIoKHYpID0+IHYgIT09IFwiXCIpLmxlbmd0aCxcbiAgICBdO1xuICB9XG4gIGNvbnN0IHJlc3VsdHMgPSAocm9vdCBhcyBJUm9vdExldmVsRG9jdW1lbnQpLmNoaWxkcmVuLm1hcChjb3VudFNpemVBbmRXb3Jkcyk7XG4gIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbMCwgMF07XG4gIH0gZWxzZSBpZiAocmVzdWx0cy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gcmVzdWx0c1swXTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHRzLnJlZHVjZSgoYSwgYikgPT4ge1xuICAgIHJldHVybiBbYVswXSArIGJbMF0sIGFbMV0gKyBiWzFdXTtcbiAgfSk7XG59XG5cbmNvbnN0IGludmFsaWRDb21wYXJhYmxlcyA9IFtcbiAgXCJzcmNTZXRcIixcbiAgXCJzcmNcIixcbiAgXCJzaXplc1wiLFxuXTtcblxuZnVuY3Rpb24gcmVtb3ZlSW52YWxpZENvbXBhcmFibGVzKGVsZW06IFJpY2hFbGVtZW50IHwgSVJvb3RMZXZlbERvY3VtZW50KSB7XG4gIGZvciAobGV0IGNvbXBhcmFibGUgb2YgaW52YWxpZENvbXBhcmFibGVzKSB7XG4gICAgaWYgKGVsZW1bY29tcGFyYWJsZV0pIHtcbiAgICAgIGVsZW1bY29tcGFyYWJsZV0gPSBudWxsO1xuICAgIH07XG4gIH1cblxuICBpZiAoZWxlbS5jaGlsZHJlbikge1xuICAgIGVsZW0uY2hpbGRyZW4uZm9yRWFjaChyZW1vdmVJbnZhbGlkQ29tcGFyYWJsZXMgYXMgYW55KTtcbiAgfVxuXG4gIHJldHVybiBlbGVtO1xufVxuXG4vKipcbiAqIGNvbXBhcmVzIHR3byB0ZXh0IGZvciBlcXVpdmFsZW5jZVxuICogQHBhcmFtIHRleHQxIFxuICogQHBhcmFtIHRleHQyIFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tFcXVhbGl0eSh0ZXh0MTogc3RyaW5nIHwgTm9kZVtdLCB0ZXh0Mjogc3RyaW5nIHwgTm9kZVtdKSB7XG4gIGlmICh0ZXh0MSA9PT0gdGV4dDIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICh0ZXh0MSA9PT0gbnVsbCB8fCB0ZXh0MiA9PT0gbnVsbCkge1xuICAgIHJldHVybiB0ZXh0MSA9PT0gdGV4dDI7XG4gIH1cblxuICBjb25zdCBkb2N1bWVudDEgPSByZW1vdmVJbnZhbGlkQ29tcGFyYWJsZXMoZGVzZXJpYWxpemUodGV4dDEpKTtcbiAgY29uc3QgZG9jdW1lbnQyID0gcmVtb3ZlSW52YWxpZENvbXBhcmFibGVzKGRlc2VyaWFsaXplKHRleHQyKSk7XG5cbiAgcmV0dXJuIGVxdWFscyhkb2N1bWVudDEuY2hpbGRyZW4sIGRvY3VtZW50Mi5jaGlsZHJlbik7XG59XG5cbi8qKlxuICogY29tcGFyZXMgdHdvIHBsYWluIHRleHQgZm9yIGVxdWl2YWxlbmNlXG4gKiBAcGFyYW0gdGV4dDEgXG4gKiBAcGFyYW0gdGV4dDIgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0VxdWFsaXR5UGxhaW4odGV4dDE6IHN0cmluZywgdGV4dDI6IHN0cmluZykge1xuICByZXR1cm4gdGV4dDEgPT09IHRleHQyO1xufVxuIiwgImltcG9ydCB7IElSb290TGV2ZWxEb2N1bWVudCwgUmljaEVsZW1lbnQgfSBmcm9tIFwiLi4vc2VyaWFsaXplclwiO1xuaW1wb3J0IHsgSVRleHQgfSBmcm9tIFwiLi4vc2VyaWFsaXplci90eXBlcy90ZXh0XCI7XG5pbXBvcnQgeyBJQmFzZUkxOG5SaWNoVGV4dEluZm8gfSBmcm9tIFwiLi9zbGF0ZVwiO1xuXG4vKipcbiAqIGxvY2FsZSByZXBsYWNlciBmdW5jdGlvbiB1c2VkIGhlcmUgc28gdGhhdCBpdGVtaXplIGlzIG5vdCBuZWVkZWQgdG8gYmUgaW1wb3J0ZWRcbiAqIHRoaXMgaXMgYSBjb3B5XG4gKiBcbiAqIEBwYXJhbSBzdHIgXG4gKiBAcGFyYW0gYXJncyBcbiAqIEByZXR1cm5zIFxuICovXG5leHBvcnQgZnVuY3Rpb24gbG9jYWxlUmVwbGFjZXIoc3RyOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXHsoXFxkKylcXH0vZywgKG1hdGNoLCBpbmRleE1hdGNoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBhcmdzW2luZGV4TWF0Y2hdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4gXCI/XCI7XG4gICAgfSBlbHNlIGlmIChhcmdzW2luZGV4TWF0Y2hdID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgcmV0dXJuIGFyZ3NbaW5kZXhNYXRjaF0udG9TdHJpbmcoKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBtaW1lRXh0ZW5zaW9ucyA9IHtcbiAgXCJhdWRpby9hYWNcIjogXCJhYWNcIixcbiAgXCJhcHBsaWNhdGlvbi94LWFiaXdvcmRcIjogXCJhYndcIixcbiAgXCJhcHBsaWNhdGlvbi94LWZyZWVhcmNcIjogXCJhcmNcIixcbiAgXCJ2aWRlby94LW1zdmlkZW9cIjogXCJhdmlcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQuYW1hem9uLmVib29rXCI6IFwiYXp3XCIsXG4gIFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI6IFwiYmluXCIsXG4gIFwiaW1hZ2UvYm1wXCI6IFwiYm1wXCIsXG4gIFwiYXBwbGljYXRpb24veC1iemlwXCI6IFwiYnpcIixcbiAgXCJhcHBsaWNhdGlvbi94LWJ6aXAyXCI6IFwiYnoyXCIsXG4gIFwiYXBwbGljYXRpb24veC1jc2hcIjogXCJjc2hcIixcbiAgXCJ0ZXh0L2Nzc1wiOiBcImNzc1wiLFxuICBcInRleHQvY3N2XCI6IFwiY3N2XCIsXG4gIFwiYXBwbGljYXRpb24vbXN3b3JkXCI6IFwiZG9jXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnRcIjogXCJkb2N4XCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm1zLWZvbnRvYmplY3RcIjogXCJlb3RcIixcbiAgXCJhcHBsaWNhdGlvbi9lcHViK3ppcFwiOiBcImVwdWJcIixcbiAgXCJpbWFnZS9naWZcIjogXCJnaWZcIixcbiAgXCJ0ZXh0L2h0bWxcIjogXCJodG1sXCIsXG4gIFwiaW1hZ2Uvdm5kLm1pY3Jvc29mdC5pY29uXCI6IFwiaWNvXCIsXG4gIFwidGV4dC9jYWxlbmRhclwiOiBcImljc1wiLFxuICBcImFwcGxpY2F0aW9uL2phdmEtYXJjaGl2ZVwiOiBcImphclwiLFxuICBcImltYWdlL2pwZWdcIjogXCJqcGdcIixcbiAgXCJ0ZXh0L2phdmFzY3JpcHRcIjogXCJqc1wiLFxuICBcImFwcGxpY2F0aW9uL2pzb25cIjogXCJqc29uXCIsXG4gIFwiYXBwbGljYXRpb24vbGQranNvblwiOiBcImpzb25sZFwiLFxuICBcImF1ZGlvL21pZGkgYXVkaW8veC1taWRpXCI6IFwibWlkXCIsXG4gIFwiYXVkaW8vbXBlZ1wiOiBcIm1wM1wiLFxuICBcInZpZGVvL21wZWdcIjogXCJtcGVnXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLmFwcGxlLmluc3RhbGxlcit4bWxcIjogXCJtcGtnXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm9hc2lzLm9wZW5kb2N1bWVudC5wcmVzZW50YXRpb25cIjogXCJvZHBcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQub2FzaXMub3BlbmRvY3VtZW50LnNwcmVhZHNoZWV0XCI6IFwib2RzXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm9hc2lzLm9wZW5kb2N1bWVudC50ZXh0XCI6IFwib2R0XCIsXG4gIFwiYXVkaW8vb2dnXCI6IFwib2dhXCIsXG4gIFwidmlkZW8vb2dnXCI6IFwib2d2XCIsXG4gIFwiYXBwbGljYXRpb24vb2dnXCI6IFwib2d4XCIsXG4gIFwiZm9udC9vdGZcIjogXCJvdGZcIixcbiAgXCJpbWFnZS9wbmdcIjogXCJwbmdcIixcbiAgXCJhcHBsaWNhdGlvbi9wZGZcIjogXCJwZGZcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQubXMtcG93ZXJwb2ludFwiOiBcInBwdFwiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5wcmVzZW50YXRpb25tbC5wcmVzZW50YXRpb25cIjogXCJwcHR4XCIsXG4gIFwiYXBwbGljYXRpb24veC1yYXItY29tcHJlc3NlZFwiOiBcInJhclwiLFxuICBcImFwcGxpY2F0aW9uL3J0ZlwiOiBcInJ0ZlwiLFxuICBcImFwcGxpY2F0aW9uL3gtc2hcIjogXCJzaFwiLFxuICBcImltYWdlL3N2Zyt4bWxcIjogXCJzdmdcIixcbiAgXCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiOiBcInN3ZlwiLFxuICBcImFwcGxpY2F0aW9uL3gtdGFyXCI6IFwidGFyXCIsXG4gIFwiaW1hZ2UvdGlmZlwiOiBcInRpZmZcIixcbiAgXCJmb250L3R0ZlwiOiBcInR0ZlwiLFxuICBcInRleHQvcGxhaW5cIjogXCJ0eHRcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQudmlzaW9cIjogXCJ2c2RcIixcbiAgXCJhdWRpby93YXZcIjogXCJ3YXZcIixcbiAgXCJhdWRpby93ZWJtXCI6IFwid2ViYVwiLFxuICBcInZpZGVvL3dlYm1cIjogXCJ3ZWJtXCIsXG4gIFwiaW1hZ2Uvd2VicFwiOiBcIndlYnBcIixcbiAgXCJmb250L3dvZmZcIjogXCJ3b2ZmXCIsXG4gIFwiZm9udC93b2ZmMlwiOiBcIndvZmYyXCIsXG4gIFwiYXBwbGljYXRpb24veGh0bWwreG1sXCI6IFwieGh0bWxcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWxcIjogXCJ4bHNcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldFwiOiBcInhsc3hcIixcbiAgXCJhcHBsaWNhdGlvbi94bWwgaWYgbm90IHJlYWRhYmxlIGZyb20gY2FzdWFsIHVzZXJzIChSRkMgMzAyMywgc2VjdGlvbiAzKVwiOiBcInhtbFwiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5tb3ppbGxhLnh1bCt4bWxcIjogXCJ4dWxcIixcbiAgXCJhcHBsaWNhdGlvbi96aXBcIjogXCJ6aXBcIixcbiAgXCJ2aWRlby8zZ3BwXCI6IFwiM2dwXCIsXG4gIFwidmlkZW8vM2dwcDJcIjogXCIzZzJcIixcbiAgXCJhcHBsaWNhdGlvbi94LTd6LWNvbXByZXNzZWRcIjogXCI3elwiLFxufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhIG1pbWUgdHlwZSB0byBhbiBleHRlbnNpb24gdXNpbmcgYSBrbm93biBleHRlbnNpb24gbGlzdFxuICogXG4gKiBDb3BpZWQgc28gdGhhdCBpdGVtaXplIGRvZXNuJ3QgbmVlZCB0byBiZSBpbXBvcnRlZCBhcyB3ZWxsXG4gKiBcbiAqIEBwYXJhbSBzdHIgdGhlIHN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIG1pbWUgdHlwZVxuICogQHJldHVybnMgYW4gZXh0ZW5zaW9uIG9yIHR4dCBpZiBpdCBkb2Vzbid0IGtub3dcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1pbWVUeXBlVG9FeHRlbnNpb24oc3RyOiBzdHJpbmcpIHtcbiAgY29uc3QgZXhwZWN0ZWRFeHQgPSBtaW1lRXh0ZW5zaW9uc1tzdHJdO1xuICBpZiAoZXhwZWN0ZWRFeHQpIHtcbiAgICByZXR1cm4gZXhwZWN0ZWRFeHQ7XG4gIH1cbiAgcmV0dXJuIChzdHIuc3BsaXQoXCIvXCIpWzFdIHx8IFwidHh0XCIpLnN1YnN0cigwLCAzKTtcbn1cblxuXG4vKipcbiAqIFRoZSBhdHRyaWJ1dGVzIHRoYXQgZXhpc3QgaW4gYSBnaXZlbiBlbGVtZW50IHRoYXQgbWFyayBzdWNoXG4gKiBhcyBhIHRlbXBsYXRlZCBlbGVtZW50XG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IHRlbXBsYXRlZEF0dHJpYnV0ZXMgPSBbXG4gIFwidGhyZWZcIixcbiAgXCJ0ZXh0Q29udGVudFwiLFxuICBcImh0bWxcIixcbiAgXCJmb3JFYWNoXCIsXG4gIFwiY29udGV4dFwiLFxuICBcInVpSGFuZGxlclwiLFxuXTtcblxuLyoqXG4gKiBUaGUgaW50ZXJhY3RpdmUgYWN0aW9ucyB0aGF0IGV4aXN0IHRoYXQgbWFya1xuICogc29tZXRoaW5nIGFzIGEgdGVtcGxhdGVkIGVsZW1lbnQgdGhhdCBpcyBpbnRlcmFjdGl2ZVxuICogQGlnbm9yZVxuICovXG5jb25zdCB0ZW1wbGF0ZWRJbnRlcmFjdGl2ZUFjdGlvbnMgPSBbXG4gIFwiY2xpY2tcIixcbiAgXCJibHVyXCIsXG4gIFwiZm9jdXNcIixcbiAgXCJpbnB1dFwiLFxuICBcImtleWRvd25cIixcbiAgXCJrZXlwcmVzc1wiLFxuICBcImtleXVwXCIsXG4gIFwibW91c2Vkb3duXCIsXG4gIFwibW91c2VlbnRlclwiLFxuICBcIm1vdXNlbGVhdmVcIixcbiAgXCJtb3VzZW1vdmVcIixcbiAgXCJtb3VzZW92ZXJcIixcbiAgXCJtb3VzZW91dFwiLFxuICBcIm1vdXNldXBcIixcbiAgXCJtb3VzZXdoZWVsXCIsXG4gIFwidG91Y2hzdGFydFwiLFxuICBcInRvdWNobW92ZVwiLFxuICBcInRvdWNoZW5kXCIsXG4gIFwidG91Y2hjYW5jZWxcIixcbiAgXCJ3aGVlbFwiLFxuXTtcblxuLyoqXG4gKiBUaGUgYXR0cmlidXRlcyB0aGF0IGV4aXN0IGluIGEgZ2l2ZW4gZWxlbWVudCB0aGF0IG1hcmsgc3VjaFxuICogYXMgYSB0ZW1wbGF0ZWQgc3R5bGVkIGVsZW1lbnRzXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IHRlbXBsYXRlZFN0eWxlZEF0dHJpYnV0ZXMgPSBbXG4gIFwic3R5bGVIb3ZlclwiLFxuICBcInN0eWxlQWN0aXZlXCIsXG5dO1xuXG5cbi8qKlxuICogVGhlIGxpc3Qgb2Ygc3BlY2lhbCB0eXBlcyB0byB1c2VcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3Qgc3BlY2lhbFR5cGVzID0ge1xuICBcInZvaWQtYmxvY2tcIjogXCJjb250YWluZXJcIixcbiAgXCJ2b2lkLXN1cGVyYmxvY2tcIjogXCJjb250YWluZXJcIixcbiAgXCJ2b2lkLWlubGluZVwiOiBcImlubGluZVwiLFxufTtcblxuLyoqXG4gKiBUaGUgbm9kZSBpbmZvcm1hdGlvbiB0aGF0IGlzIGV4dHJhY3RlZCBvZiBhIGdpdmVuIG5vZGUgdXNlZFxuICogdG8gYmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSU5vZGVJbmZvIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIHRoYXQgaXMgZ2l2ZW4sIGh1bWFuIHJlYWRhYmxlIGluIHRoZSBnaXZlbiBsYW5ndWFnZVxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogV2hldGhlciBpdCByZXByZXNlbnRzIGEgdGVtcGxhdGVkIG5vZGVcbiAgICovXG4gIGlzVGVtcGxhdGU6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBXaGV0aGVyIGl0IHJlcHJlc2VudHMgYSB0ZXh0IG5vZGVcbiAgICovXG4gIGlzVGV4dDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFNwZWNpZmllcyB3aGV0aGVyIGl0IGlzIGFuIGludGVyYWN0aXZlIGVsZW1lbnRcbiAgICovXG4gIGlzSW50ZXJhY3RpdmU6IGJvb2xlYW47XG59XG5cbi8qKlxuICogUHJvdmlkZXMgdGhlIG5vZGUgaW5mbyBvZiBhIGdpdmVuIG5vZGVcbiAqIEBwYXJhbSBub2RlIHRoZSBub2RlLCBlaXRoZXIgdGV4dCBvciByaWNoIGVsZW1lbnRcbiAqIEBwYXJhbSBpMThuRGF0YSB0aGUgaTE4biBpbmZvcm1hdGlvbiB0byBiZSB1c2VkIHRvIGNyZWF0ZSB0aGUgbmFtZVxuICogQHJldHVybnMgdGhlIG5vZGUgaW5mb3JtYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEluZm9Gb3IoXG4gIG5vZGU6IFJpY2hFbGVtZW50IHwgSVRleHQgfCBJUm9vdExldmVsRG9jdW1lbnQsXG4gIGkxOG5EYXRhOiBJQmFzZUkxOG5SaWNoVGV4dEluZm8sXG4pOiBJTm9kZUluZm8ge1xuICBpZiAoKG5vZGUgYXMgYW55KS50eXBlID09PSBcImRvY3VtZW50XCIpIHtcbiAgICByZXR1cm4gbnVsbCBhcyBhbnk7XG4gIH1cblxuICAvLyBjaGVjayBmb3Igd2hldGhlciBpcyBpbnRlcmFjdGl2ZSBhbmQgb3RoZXIgb3B0aW9uc1xuICBjb25zdCBpc0ludGVyYWN0aXZlID0gdGVtcGxhdGVkSW50ZXJhY3RpdmVBY3Rpb25zLnNvbWUoKGF0dHIpID0+IHR5cGVvZiBub2RlW2F0dHJdICE9PSBcInVuZGVmaW5lZFwiICYmIG5vZGVbYXR0cl0gIT09IG51bGwpO1xuICBjb25zdCBpc1RlbXBsYXRlU3R5bGVkID0gdGVtcGxhdGVkU3R5bGVkQXR0cmlidXRlcy5zb21lKChhdHRyKSA9PiB0eXBlb2Ygbm9kZVthdHRyXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBub2RlW2F0dHJdICE9PSBudWxsKTtcbiAgY29uc3QgaXNCYXNpY1N0eWxlZCA9ICEhKG5vZGUgYXMgUmljaEVsZW1lbnQpLnN0eWxlIHx8ICgobm9kZSBhcyBSaWNoRWxlbWVudCkucmljaENsYXNzTGlzdCAmJiAoKG5vZGUgYXMgUmljaEVsZW1lbnQpLnJpY2hDbGFzc0xpc3QgYXMgYW55KS5sZW5ndGgpO1xuICBjb25zdCBpc0Jhc2ljVGVtcGxhdGVkID0gdGVtcGxhdGVkQXR0cmlidXRlcy5zb21lKChhdHRyKSA9PiB0eXBlb2Ygbm9kZVthdHRyXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBub2RlW2F0dHJdICE9PSBudWxsKTtcbiAgY29uc3QgaXNUZW1wbGF0ZSA9IGlzSW50ZXJhY3RpdmUgfHwgaXNUZW1wbGF0ZVN0eWxlZCB8fCBpc0Jhc2ljVGVtcGxhdGVkO1xuXG4gIC8vIG5vdyBsZXQncyBidWlsZCB0aGUgbmFtZSBsYWJlbCBmb3IgdGhlIGdpdmVuIGxhbmd1YWdlXG4gIGNvbnN0IGZvdW5kQ3VzdG9tTmFtZSA9ICghKG5vZGUgYXMgUmljaEVsZW1lbnQpLmdpdmVuTmFtZSAmJiAobm9kZSBhcyBSaWNoRWxlbWVudCkudWlIYW5kbGVyKSA/XG4gICAgaTE4bkRhdGEucmljaFVJSGFuZGxlckVsZW1lbnRbKG5vZGUgYXMgUmljaEVsZW1lbnQgYXMgYW55KS51aUhhbmRsZXIucmVwbGFjZSgvLS9nLCBcIl9cIildIDogbnVsbDtcbiAgbGV0IG5hbWVMYWJlbDogc3RyaW5nID0gKG5vZGUgYXMgUmljaEVsZW1lbnQpLmdpdmVuTmFtZSA/IChub2RlIGFzIFJpY2hFbGVtZW50KS5naXZlbk5hbWUgOiAoXG4gICAgZm91bmRDdXN0b21OYW1lIHx8IChcbiAgICAgIChub2RlIGFzIFJpY2hFbGVtZW50KS50eXBlID9cbiAgICAgICAgKGkxOG5EYXRhW3NwZWNpYWxUeXBlc1sobm9kZSBhcyBSaWNoRWxlbWVudCkudHlwZV0gPyBzcGVjaWFsVHlwZXNbKG5vZGUgYXMgUmljaEVsZW1lbnQpLnR5cGVdIDogKG5vZGUgYXMgUmljaEVsZW1lbnQpLnR5cGUucmVwbGFjZSgvLS9nLCBcIl9cIildIHx8XG4gICAgICAgICAgKG5vZGUgYXMgUmljaEVsZW1lbnQpLnR5cGUpIDpcbiAgICAgICAgaTE4bkRhdGEudGV4dClcbiAgKTtcblxuICBpZiAoIShub2RlIGFzIFJpY2hFbGVtZW50KS5naXZlbk5hbWUgJiYgIWZvdW5kQ3VzdG9tTmFtZSkge1xuICAgIGlmIChpc0Jhc2ljU3R5bGVkIHx8IGlzVGVtcGxhdGVTdHlsZWQpIHtcbiAgICAgIG5hbWVMYWJlbCA9IGxvY2FsZVJlcGxhY2VyKGkxOG5EYXRhLnN0eWxlZCwgbmFtZUxhYmVsKTtcbiAgICB9XG4gICAgaWYgKGlzSW50ZXJhY3RpdmUpIHtcbiAgICAgIG5hbWVMYWJlbCA9IGxvY2FsZVJlcGxhY2VyKGkxOG5EYXRhLmludGVyYWN0aXZlLCBuYW1lTGFiZWwpO1xuICAgIH1cbiAgICBpZiAoaXNUZW1wbGF0ZSkge1xuICAgICAgbmFtZUxhYmVsID0gbG9jYWxlUmVwbGFjZXIoaTE4bkRhdGEudGVtcGxhdGUsIG5hbWVMYWJlbCk7XG4gICAgfVxuICB9XG5cbiAgLy8gYW5kIHdlIGNhbiByZXR1cm4gdGhlIGluZm9ybWF0aW9uIG5vd1xuICByZXR1cm4ge1xuICAgIGlzVGVtcGxhdGUsXG4gICAgaXNJbnRlcmFjdGl2ZSxcbiAgICBuYW1lOiBuYW1lTGFiZWwsXG4gICAgaXNUZXh0OiB0eXBlb2YgKG5vZGUgYXMgSVRleHQpLnRleHQgPT09IFwic3RyaW5nXCIsXG4gIH1cbn0iLCAiLyoqXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGZhc3QgcHJvdG90eXBpbmcgd3JhcHBlciB0aGF0IHVzZXMgdGhlIG1hdGVyaWFsIFVJIGVsZW1lbnRzXG4gKiBpbiBvcmRlciB0byBjcmVhdGUgdGhlIHNsYXRlIGVkaXRvciBmb3IgdGhlIFByb3BlcnR5Vmlld1RleHRcbiAqIFxuICogVGhlIHdyYXBwZXIgY29tcG9uZW50IGlzIGFkZGVkIGFzIGEgcHJvcGVydHkgdG8gdGhlIHNsYXRlIGVkaXRvciBpdHNlbGYgc28gb3RoZXIgd3JhcHBlcnNcbiAqIGNhbiBiZSBhZGRlZCBhcyByZXBsYWNlbWVudCwgeW91IGNhbiBhbHNvIGRlc2lnbiB5b3VyIG93biB3cmFwcGVyIGJhc2VkIG9uIHRoaXMgb25lXG4gKiBcbiAqIEBtb2R1bGVcbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSUhlbHBlckZ1bmN0aW9ucywgSVNsYXRlRWRpdG9ySW50ZXJuYWxTdGF0ZVR5cGUsIElTbGF0ZUVkaXRvcldyYXBwZXJCYXNlUHJvcHMgfSBmcm9tIFwiLlwiO1xuXG5pbXBvcnQgeyBQYXRoLCBSYW5nZSB9IGZyb20gXCJzbGF0ZVwiO1xuaW1wb3J0IHsgUmljaEVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplclwiO1xuaW1wb3J0IHsgV3JhcHBlckRyYXdlciB9IGZyb20gXCIuL2RyYXdlclwiO1xuaW1wb3J0IHsgRmlsZUxvYWRFcnJvckRpYWxvZywgSURpYWxvZ0NvbXBvbmVudFByb3BzIH0gZnJvbSBcIi4vZGlhbG9ncy9maWxlXCI7XG5pbXBvcnQgUmVhY3RET00gZnJvbSBcInJlYWN0LWRvbVwiO1xuaW1wb3J0IHsgY291bnRTaXplQW5kV29yZHMgfSBmcm9tIFwiLi4vLi4vdXRpbFwiO1xuaW1wb3J0IHsgU1RBTkRBUkRfVEVYVF9OT0RFIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvdGV4dFwiO1xuaW1wb3J0IHsgSUJhc2VJMThuUmljaFRleHRJbmZvLCBkZWZhdWx0QmFzZUkxOG5SaWNoSW5mb0VuZ2xpc2ggfSBmcm9tIFwiLlwiO1xuaW1wb3J0IHsgSVdyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVQcm9wcywgSVdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyUHJvcHMsIElXcmFwcGVyRHJhd2VyVGFic1Byb3BzIH0gZnJvbSBcIi4vZHJhd2VyXCI7XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0V3JhcHBlckkxOG5SaWNoSW5mb0VuZ2xpc2g6IElXcmFwcGVySTE4blJpY2hUZXh0SW5mbyA9IHtcbiAgLi4uZGVmYXVsdEJhc2VJMThuUmljaEluZm9FbmdsaXNoLFxuICBmb3JtYXRBZGRDb250YWluZXJMYWJlbDogXCJhZGQgY29udGFpbmVyXCIsXG4gIGFkZFRlbXBsYXRlSFRNTDoge1xuICAgIGxhYmVsOiBcInNlbGVjdCBhIHRlbXBsYXRlXCIsXG4gICAgcGxhY2Vob2xkZXI6IFwic2VsZWN0IGEgdGVtcGxhdGVcIixcbiAgICBzdWJtaXQ6IFwib2tcIixcbiAgICB0aXRsZTogXCJhZGQgdGVtcGxhdGUgaHRtbFwiLFxuICB9LFxuICBhZGRUZW1wbGF0ZVRleHQ6IHtcbiAgICBsYWJlbDogXCJzZWxlY3QgYSB0ZW1wbGF0ZVwiLFxuICAgIHBsYWNlaG9sZGVyOiBcInNlbGVjdCBhIHRlbXBsYXRlXCIsXG4gICAgc3VibWl0OiBcIm9rXCIsXG4gICAgdGl0bGU6IFwiYWRkIHRlbXBsYXRlIHRleHRcIixcbiAgfSxcbiAgZm9ybWF0QWRkQ3VzdG9tTGFiZWw6IFwiYWRkIGN1c3RvbVwiLFxuICBmb3JtYXRBZGRGaWxlTGFiZWw6IFwiYWRkIGZpbGVcIixcbiAgZm9ybWF0QWRkSW1hZ2VMYWJlbDogXCJhZGQgaW1hZ2VcIixcbiAgZm9ybWF0QWRkVGFibGVMYWJlbDogXCJhZGQgdGFibGVcIixcbiAgZm9ybWF0QWRkVGJvZHlMYWJlbDogXCJhZGQgdGFibGUgYm9keVwiLFxuICBmb3JtYXRBZGRUZExhYmVsOiBcImFkZCB0YWJsZSBjb2x1bW5cIixcbiAgZm9ybWF0QWRkVGVtcGxhdGVIVE1MOiBcImFkZCB0ZW1wbGF0ZSBodG1sXCIsXG4gIGZvcm1hdEFkZFRlbXBsYXRlVGV4dDogXCJhZGQgdGVtcGxhdGUgdGV4dFwiLFxuICBmb3JtYXRBZGRUZm9vdExhYmVsOiBcImFkZCB0YWJsZSBmb290XCIsXG4gIGZvcm1hdEFkZFRoZWFkTGFiZWw6IFwiYWRkIHRhYmxlIGhlYWRcIixcbiAgZm9ybWF0QWRkVGhMYWJlbDogXCJhZGQgdGFibGUgaGVhZGVyIGNvbHVtblwiLFxuICBmb3JtYXRBZGRUckxhYmVsOiBcImFkZCB0YWJsZSByb3dcIixcbiAgZm9ybWF0QWRkVmlkZW9MYWJlbDogXCJhZGQgdGFibGUgdmlkZW9cIixcbiAgZm9ybWF0Qm9sZExhYmVsOiBcImJvbGRcIixcbiAgZm9ybWF0RGVsZXRlRWxlbWVudDogXCJkZWxldGVcIixcbiAgZm9ybWF0RGVsVGRMYWJlbDogXCJkZWxldGUgdGFibGUgY29sdW1uXCIsXG4gIGZvcm1hdERlbFRoTGFiZWw6IFwiZGVsZXRlIHRhYmxlIGhlYWRlciBjb2x1bW5cIixcbiAgZm9ybWF0RGVsVHJMYWJlbDogXCJkZWxldGUgdGFibGUgcm93XCIsXG4gIGZvcm1hdEl0YWxpY0xhYmVsOiBcIml0YWxpY1wiLFxuICBmb3JtYXRMaW5rTGFiZWw6IFwibGlua1wiLFxuICBmb3JtYXRMaXN0QnVsbGV0ZWRMYWJlbDogXCJidWxsZXRlZCBsaXN0XCIsXG4gIGZvcm1hdExpc3ROdW1iZXJlZExhYmVsOiBcIm51bWJlcmVkIGxpc3RcIixcbiAgZm9ybWF0TWFrZUxvb3A6IFwibWFrZSBsb29wXCIsXG4gIGZvcm1hdE1vcmU6IFwibW9yZVwiLFxuICBmb3JtYXRRdW90ZUxhYmVsOiBcInF1b3RlXCIsXG4gIGZvcm1hdFNldEFjdGl2ZVN0eWxlTGFiZWw6IFwiYWN0aXZlIHN0eWxlXCIsXG4gIGZvcm1hdFNldENsYXNzTGFiZWw6IFwiY2xhc3MgbmFtZXNcIixcbiAgZm9ybWF0U2V0Q29udGV4dDogXCJzZXQgY29udGV4dFwiLFxuICBmb3JtYXRTZXRFdmVudEhhbmRsZXJzOiBcInNldCBldmVudCBoYW5kbGVyc1wiLFxuICBmb3JtYXRTZXRIb3ZlclN0eWxlTGFiZWw6IFwiaG92ZXIgc3R5bGVcIixcbiAgZm9ybWF0U2V0UmVuZGVyQ29uZGl0aW9uOiBcInNldCByZW5kZXIgY29uZGl0aW9uXCIsXG4gIGZvcm1hdFNldFN0eWxlTGFiZWw6IFwic2V0IHN0eWxlXCIsXG4gIGZvcm1hdFNldFVJSGFuZGxlckFyZ0xhYmVsOiBcInNldCB1aSBoYW5kbGVyIGFyZ1wiLFxuICBmb3JtYXRTZXRVSUhhbmRsZXJBcmdOYW1lOiBcInNldCB1aSBoYW5kbGVyIGFyZyBuYW1lXCIsXG4gIGZvcm1hdFNldFVJSGFuZGxlckFyZ1ZhbHVlOiBcInNldCB1aSBoYW5kbGVyIGFyZyB2YWx1ZVwiLFxuICBmb3JtYXRTZXRVSUhhbmRsZXJMYWJlbDogXCJzZXQgdWkgaGFuZGxlclwiLFxuICBmb3JtYXRUaXRsZUxhYmVsOiBcInRpdGxlXCIsXG4gIGZvcm1hdFVuZGVybGluZUxhYmVsOiBcInVuZGVybGluZVwiLFxuICBsb2FkVmlkZW86IHtcbiAgICBpbnZhbGlkOiBcImludmFsaWQgdXJsXCIsXG4gICAgbGFiZWw6IFwieW91dHViZSBhbmQgdmltZW8gb25seVwiLFxuICAgIHBsYWNlaG9sZGVyOiBcImh0dHBzOi8veW91dHViZS5jb20vLi4uXCIsXG4gICAgc3VibWl0OiBcImluc2VydFwiLFxuICAgIHRpdGxlOiBcImluc2VydCBhIHZpZGVvXCIsXG4gIH0sXG4gIHNldExpbms6IHtcbiAgICBpbnZhbGlkOiBcImludmFsaWQgbGlua1wiLFxuICAgIGxhYmVsOiBcInVybFwiLFxuICAgIHBsYWNlaG9sZGVyOiBcImh0dHBzOi8vdXJsXCIsXG4gICAgcGxhY2Vob2xkZXJMb2NhbE9ubHk6IFwiLi9sb2NhbC11cmwtb25seVwiLFxuICAgIHN1Ym1pdDogXCJva1wiLFxuICAgIHRlbXBsYXRlZDogXCJvciBzZWxlY3Qgb25lIG9mIHRoZXNlIHRlbXBsYXRlIHZhbHVlc1wiLFxuICAgIHRlbXBsYXRlZExhYmVsOiBcInRlbXBsYXRlIHZhbHVlXCIsXG4gICAgdGVtcGxhdGVkUGxhY2Vob2xkZXI6IFwidGVtcGxhdGUgdmFsdWVcIixcbiAgICB0ZW1wbGF0ZWRVbnNwZWNpZmllZDogXCJ1bnNwZWNpZmllZFwiLFxuICAgIHRpdGxlOiBcImluc2VydCBhIGxpbmssXCJcbiAgfSxcbiAgZ2VuZXJpY0Vycm9yOiBcImVycm9yXCIsXG4gIG9rOiBcIm9rXCIsXG59XG5cbi8qKlxuICogVGhlIHJpY2ggdGV4dCBpbmZvcm1hdGlvblxuICogdG8gYmUgdXNlZCB0byBidWlsZCBhbiBlZGl0b3IgYW5kIGRlc2NyaWJlXG4gKiBhIG5vZGVcbiAqIFxuICogY2hlY2sgYmFzaWNJMThuUmljaEluZm9FbmdsaXNoIHRvIHNlZSBob3cgaXQgaXMgZG9uZVxuICogc29tZSBvZiB0aGVzZSBlbGVtZW50cyBhcmUgc2V0dXAgd2l0aCBhIG51bWJlciB7MH1cbiAqIGR1ZSB0byBpdGVtaXplJ3MgbG9jYWxpemF0aW9uIGFuZCB0aGUgd2F5IGl0J3MgZG9uZVxuICogaW4gaXRzIGxvY2FsaXphdGlvbiBmaWxlcywgaGVyZSB5b3UgaGF2ZSB0byBkbyBieSBjb2RlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvIGV4dGVuZHMgSUJhc2VJMThuUmljaFRleHRJbmZvIHtcbiAgZm9ybWF0Qm9sZExhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEl0YWxpY0xhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFVuZGVybGluZUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdExpbmtMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRUaXRsZUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFF1b3RlTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0TGlzdE51bWJlcmVkTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0TGlzdEJ1bGxldGVkTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0QWRkSW1hZ2VMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRWaWRlb0xhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEFkZEZpbGVMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRDb250YWluZXJMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRUYWJsZUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEFkZFRoZWFkTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0QWRkVGJvZHlMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRUZm9vdExhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEFkZFRyTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0QWRkVGRMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRUaExhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdERlbFRyTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0RGVsVGRMYWJlbDogc3RyaW5nO1xuICBmb3JtYXREZWxUaExhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEFkZEN1c3RvbUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFNldFN0eWxlTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0U2V0SG92ZXJTdHlsZUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFNldEFjdGl2ZVN0eWxlTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0U2V0Q2xhc3NMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRTZXRFdmVudEhhbmRsZXJzOiBzdHJpbmc7XG4gIGZvcm1hdFNldENvbnRleHQ6IHN0cmluZztcbiAgZm9ybWF0U2V0UmVuZGVyQ29uZGl0aW9uOiBzdHJpbmc7XG4gIGZvcm1hdE1ha2VMb29wOiBzdHJpbmc7XG4gIGZvcm1hdFNldFVJSGFuZGxlckxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFNldFVJSGFuZGxlckFyZ0xhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFNldFVJSGFuZGxlckFyZ05hbWU6IHN0cmluZztcbiAgZm9ybWF0U2V0VUlIYW5kbGVyQXJnVmFsdWU6IHN0cmluZztcbiAgZm9ybWF0QWRkVGVtcGxhdGVUZXh0OiBzdHJpbmc7XG4gIGZvcm1hdEFkZFRlbXBsYXRlSFRNTDogc3RyaW5nO1xuICBmb3JtYXREZWxldGVFbGVtZW50OiBzdHJpbmc7XG4gIGZvcm1hdE1vcmU6IHN0cmluZztcblxuICBsb2FkVmlkZW86IHtcbiAgICBpbnZhbGlkOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBwbGFjZWhvbGRlcjogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgc3VibWl0OiBzdHJpbmc7XG4gIH07XG5cbiAgc2V0TGluazoge1xuICAgIGludmFsaWQ6IHN0cmluZztcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIHBsYWNlaG9sZGVyOiBzdHJpbmc7XG4gICAgcGxhY2Vob2xkZXJMb2NhbE9ubHk6IHN0cmluZztcbiAgICB0ZW1wbGF0ZWQ6IHN0cmluZztcbiAgICB0ZW1wbGF0ZWRMYWJlbDogc3RyaW5nO1xuICAgIHRlbXBsYXRlZFBsYWNlaG9sZGVyOiBzdHJpbmc7XG4gICAgdGVtcGxhdGVkVW5zcGVjaWZpZWQ6IHN0cmluZztcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIHN1Ym1pdDogc3RyaW5nO1xuICB9O1xuXG4gIGFkZFRlbXBsYXRlVGV4dDoge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBwbGFjZWhvbGRlcjogc3RyaW5nO1xuICAgIHN1Ym1pdDogc3RyaW5nO1xuICB9O1xuXG4gIGFkZFRlbXBsYXRlSFRNTDoge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBwbGFjZWhvbGRlcjogc3RyaW5nO1xuICAgIHN1Ym1pdDogc3RyaW5nO1xuICB9O1xuXG4gIGdlbmVyaWNFcnJvcjogc3RyaW5nO1xuICBvazogc3RyaW5nO1xufVxuXG50eXBlIFJpY2hFbGVtZW50Rm4gPSAoKSA9PiBSaWNoRWxlbWVudDtcblxuZnVuY3Rpb24gY2FsbEZuKGZvY3VzRm46IEZ1bmN0aW9uLCBhY3Rpb25GbjogRnVuY3Rpb24sIC4uLmFyZ3M6IGFueVtdKSB7XG4gIGZvY3VzRm4oKTtcbiAgYWN0aW9uRm4oLi4uYXJncyk7XG59XG5cbi8qKlxuICogUmVmZXJzIHRvIHRvb2xiYXIgcHJlc2NlbmNlIGVsZW1lbnRzIHRoYXQgYXJlIGFkZGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVRvb2xiYXJQcmVzY2Vuc2VFbGVtZW50IHtcbiAgLyoqXG4gICAqIFRoZSBleHRyYSBpZFxuICAgKi9cbiAgaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEEgdGl0bGUgdG8gdXNlXG4gICAqIGlmIGEgcmVhY3Qgbm9kZSBpcyBwcm92aWRlZCB0aGlzIG5vZGUgd2lsbCBiZSBtb2RpZmllZFxuICAgKiBhbmQgYWRkZWQgYSBjaGlsZHJlbiBhcyAoaTE4blZhbHVlOiBzdHJpbmcpID0+IFJlYWN0Lk5vZGVcbiAgICogZWcuIHRoZSBpMThuUmVhZCBlbGVtZW50XG4gICAqL1xuICB0aXRsZT86IHN0cmluZyB8IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IHRvIGJlIGFkZGVkXG4gICAqL1xuICBlbGVtZW50PzogUmljaEVsZW1lbnQgfCBSaWNoRWxlbWVudEZuO1xuICAvKipcbiAgICogQWx0ZXJuYXRpdmVseSBhbiBhY3Rpb25cbiAgICovXG4gIG9uQ2xpY2s/OiAoZGVmYXVsdEFjdGlvbjogKCkgPT4gUmljaEVsZW1lbnQsIGU6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEVsZW1lbnQ+KSA9PiB2b2lkO1xuICAvKipcbiAgICogSGFuZGxlIHJlZm9jdXMgYXR0ZW1wdHMgZHVyaW5nIHRoZSBjbGljayBldmVudFxuICAgKiBAcGFyYW0gZGVmYXVsdEFjdGlvbiBcbiAgICogQHBhcmFtIGUgXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgcmVmb2N1c0hhbmRsZXI/OiAoZGVmYXVsdEFjdGlvbjogKCkgPT4gdm9pZCwgZTogUmVhY3QuTW91c2VFdmVudDxIVE1MRWxlbWVudD4pID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBUcmlnZ2VyIG9uIGFueSBrZXlkb3duIGV2ZW50XG4gICAqIEBwYXJhbSBlIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIG9uQW55S2V5RG93bj86IChlOiBLZXlib2FyZEV2ZW50KSA9PiB2b2lkO1xuICAvKipcbiAgICogTWFudWFsbHkgc3BlY2lmeSB3aGV0aGVyIGl0J3MgZGlzYWJsZWRcbiAgICogaWYgbm90IHNwZWNpZmllZCBpdCB3aWxsIGNoZWNrIHdoZXRoZXIgYW4gZWxlbWVudFxuICAgKiBjYW4gYmUgaW5zZXJ0ZWQgYXMgaXQgYXNzdW1lcyBpdCdzIGFib3V0IHRoZSBpbnNlcnRpb25cbiAgICogb2YgdGhlIGVsZW1lbnRcbiAgICovXG4gIGRpc2FibGVkPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogd2hldGhlciBpdCBzaG91bGQgYmUgbWFya2VkIGFzIHNlbGVjdGVkXG4gICAqL1xuICBzZWxlY3RlZD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEEgZ2l2ZW4gY291bnQgZm9yIHRoZSBidXR0b25cbiAgICovXG4gIGNvdW50PzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBBZGRzIGEgY3VzdG9tIGNoaWxkcmVuIGF0IHRoZSBlbmQgb2YgdGhlIHRvb2xiYXJcbiAgICovXG4gIGN1c3RvbUNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogQXJiaXRyYXJ5IHByb3BzIHBhc3NlZCB0byB0aGUgVG9vbGJhckJ1dHRvbiBlbGVtZW50XG4gICAqIHVzZSBpZiB5b3VyIHRvb2xiYXIgaXMgYWJsZSB0byBjb25zdW1lIGZ1cnRoZXIgcHJvcHNcbiAgICovXG4gIHRvb2xiYXJCdXR0b25Qcm9wczogYW55O1xufVxuXG4vKipcbiAqIFNwZWNpZmllcyBhIGlucHV0IGNvbmZpZ3VyYXRpb24gZm9yIHRoZSB1aSBoYW5kbGVyIGFyZ3VtZW50XG4gKiBvZiB0eXBlIHNlbGVjdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3ZXJVSUhhbmRsZXJFbGVtZW50Q29uZmlnU2VsZWN0IHtcbiAgdHlwZTogXCJzZWxlY3RcIixcbiAgbGFiZWw6IHN0cmluZyB8IFJlYWN0LlJlYWN0Tm9kZTtcbiAgZmFzdEtleT86IHN0cmluZztcblxuICAvKipcbiAgICogQSBwbGFjZWhvbGRlciB0byB1c2VcbiAgICogaWYgYSByZWFjdCBub2RlIGlzIHByb3ZpZGVkIHRoaXMgbm9kZSB3aWxsIGJlIG1vZGlmaWVkXG4gICAqIGFuZCBhZGRlZCBhIGNoaWxkcmVuIGFzIChpMThuVmFsdWU6IHN0cmluZykgPT4gUmVhY3QuTm9kZVxuICAgKiBlZy4gdGhlIGkxOG5SZWFkIGVsZW1lbnRcbiAgICovXG4gIHBsYWNlaG9sZGVyOiBzdHJpbmcgfCBSZWFjdC5SZWFjdE5vZGU7XG4gIG9wdGlvbnM6IEFycmF5PHsgdmFsdWU6IHN0cmluZywgbGFiZWw6IHN0cmluZyB8IFJlYWN0LlJlYWN0Tm9kZSB9Pjtcbn1cblxuLyoqXG4gKiBTcGVjaWZpZXMgYW4gaW5wdXQgY29uZmlndXJhdGlvbiBmb3IgdGhlIHVpIGhhbmRsZXIgYXJndW1lbnRcbiAqIG9mIHR5cGUgaW5wdXRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRHJhd2VyVUlIYW5kbGVyRWxlbWVudENvbmZpZ0lucHV0IHtcbiAgdHlwZTogXCJpbnB1dFwiO1xuICBsYWJlbDogc3RyaW5nIHwgUmVhY3QuUmVhY3ROb2RlO1xuICBwYXR0ZXJuPzogc3RyaW5nO1xuICBzdWJ0eXBlPzogXCJ0ZXh0XCIgfCBcIm51bWJlclwiO1xuICBmYXN0S2V5Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIHBsYWNlaG9sZGVyIHRvIHVzZVxuICAgKiBpZiBhIHJlYWN0IG5vZGUgaXMgcHJvdmlkZWQgdGhpcyBub2RlIHdpbGwgYmUgbW9kaWZpZWRcbiAgICogYW5kIGFkZGVkIGEgY2hpbGRyZW4gYXMgKGkxOG5WYWx1ZTogc3RyaW5nKSA9PiBSZWFjdC5Ob2RlXG4gICAqIGVnLiB0aGUgaTE4blJlYWQgZWxlbWVudFxuICAgKi9cbiAgcGxhY2Vob2xkZXI6IHN0cmluZyB8IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuLyoqXG4gKiBTcGVjaWZpZXMgYSBpbnB1dCBjb25maWd1cmF0aW9uIGZvciB0aGUgdWkgaGFuZGxlciBhcmd1bWVudFxuICogb2YgdHlwZSBib29sZWFuLCBiZWNhdXNlIGFsbCB1aSBoYW5kbGVycyBhcmUgc3RyaW5nc1xuICogdGhpcyB1c2VzIHRoZSBzdHJpbmcgdHJ1ZSBvciBmYWxzZSByYXRoZXIgdGhhbiBhY3R1YWxcbiAqIGJvb2xlYW5zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlclVJSGFuZGxlckVsZW1lbnRDb25maWdCb29sZWFuIHtcbiAgdHlwZTogXCJib29sZWFuXCIsXG4gIGxhYmVsOiBzdHJpbmcgfCBSZWFjdC5SZWFjdE5vZGU7XG4gIGZhc3RLZXk/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlclVJSGFuZGxlckVsZW1lbnRDb25maWdDdXN0b21Qcm9wcyB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgb25EZWxheWVkQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgaGVscGVyczogSUhlbHBlckZ1bmN0aW9ucztcbiAgc3RhdGU6IElTbGF0ZUVkaXRvckludGVybmFsU3RhdGVUeXBlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3ZXJVSUhhbmRsZXJFbGVtZW50Q29uZmlnQ3VzdG9tIHtcbiAgdHlwZTogXCJjdXN0b21cIjtcbiAgY29tcG9uZW50OiBSZWFjdC5Db21wb25lbnRUeXBlPElEcmF3ZXJVSUhhbmRsZXJFbGVtZW50Q29uZmlnQ3VzdG9tUHJvcHM+O1xufVxuXG4vKipcbiAqIFNwZWNpZmllcyBhIGNvbmZpZ3VyYXRvciB0byBiZSBhZGRlZCB0byB0aGUgZHJhd2VyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlckNvbmZpZ3VyYXRvckVsZW1lbnQge1xuICBrZXk/OiBzdHJpbmcgfCBudW1iZXI7XG4gIENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJhd2VyQ29udGFpbmVyUHJvcHM+O1xufVxuXG5leHBvcnQgdHlwZSBTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFySWRlbnRpZmllZEVsZW1lbnQgPVxuICBcImJvbGRcIiB8XG4gIFwiaXRhbGljXCIgfFxuICBcInVuZGVybGluZVwiIHxcbiAgXCJsaW5rXCIgfFxuICBcInRpdGxlXCIgfFxuICBcImJ1bGxldGVkLWxpc3RcIiB8XG4gIFwibnVtYmVyZWQtbGlzdFwiIHxcbiAgXCJpbWFnZVwiIHxcbiAgXCJ2aWRlb1wiIHxcbiAgXCJmaWxlXCIgfFxuICBcInF1b3RlXCIgfFxuICBcImNvbnRhaW5lclwiIHxcbiAgXCJ0YWJsZVwiIHxcbiAgXCJ0ZW1wbGF0ZS10ZXh0XCIgfFxuICBcInRlbXBsYXRlLWh0bWxcIiB8XG4gIFwiZXh0cmFzXCIgfFxuICBcIm5vbmVcIiB8XG4gIFwiZGl2aWRlclwiIHxcbiAgXCJoZGl2aWRlclwiO1xuXG5leHBvcnQgdHlwZSBTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFyRWxlbWVudEJhc2VGb3JtID1cbiAgSVRvb2xiYXJQcmVzY2Vuc2VFbGVtZW50IHxcbiAgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhcklkZW50aWZpZWRFbGVtZW50O1xuXG5leHBvcnQgdHlwZSBTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFyRWxlbWVudEZuRm9ybSA9ICh0b29sYmFyUHJvcHM6IGFueSkgPT5cbiAgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhckVsZW1lbnRCYXNlRm9ybTtcblxuZXhwb3J0IHR5cGUgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhckVsZW1lbnQgPVxuICBTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFyRWxlbWVudEJhc2VGb3JtIHxcbiAgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhckVsZW1lbnRGbkZvcm07XG5cbi8qKlxuICogVGhlc2UgYXJlIHRoZSBiYXNlIHByb3BzIHRoYXQgdGhpcyB3cmFwcGVyIHVzZXMsIG5vdGUgaG93IHdlIGV4dGVuZCB0aGUgYmFzZSB3cmFwcGVyIHByb3BzIGFzIGRlZmluZWRcbiAqIGluIHRoZSBzbGF0ZSBlZGl0b3IgaXRzZWxmLCBhbmQgYWRkIHRoZSBzdHlsZXMgZm9yIHRoZSBjbGFzc2VzIGFuZCB0aGVzZSBpMThuIGluZm9cbiAqIFxuICogSWYgeW91IHdvbmRlciBob3cgdGhlIGkxOG4gaW5mb3JtYXRpb24gaXMgdG8gYmUgYWRkZWQsIGluIHRoZSBQcm9wZXJ0eUVudHJ5VGV4dCB3aGVuIGNyZWF0aW5nXG4gKiB0aGUgc2xhdGUgZWRpdG9yIGFzIGEgY29tcG9uZW50IHRoZSB3cmFwcGVyIGNhbiByZWNlaXZlIHdyYXBwZXJBcmdzIHNvIHRoZXNlIGFyZ3MgYXJlIHBhc3NlZFxuICogd2hlbiB0aGUgZWRpdG9yIGlzIGNyZWF0ZWQgd2l0aCB0aGUgd3JhcHBlciBpdHNlbGZcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRGVmYXVsdFNsYXRlV3JhcHBlclByb3BzIGV4dGVuZHMgSVNsYXRlRWRpdG9yV3JhcHBlckJhc2VQcm9wcyB7XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBzcGVjaWZpZWQgdG8gYXNzaWduIGV4dHJhIHRvb2xiYXIgZWxlbWVudHNcbiAgICogdG8gYmUgdXNlZCBlaXRoZXIgYnkgdWkgaGFuZGxlZCBjb21wb25lbnRzIGFuZCB3aGF0bm90XG4gICAqL1xuICB0b29sYmFyRXh0cmFzPzogSVRvb2xiYXJQcmVzY2Vuc2VFbGVtZW50W107XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBiZSB1c2VkIHRvIHNwZWNpZnkgYSB3aG9sZSBjdXN0b20gdG9vbGJhciBkb3duIHRvIHRoZSB2ZXJ5IGJhc2ljc1xuICAgKi9cbiAgY3VzdG9tVG9vbGJhcj86IFNsYXRlRWRpdG9yV3JhcHBlckN1c3RvbVRvb2xiYXJFbGVtZW50W107XG4gIC8qKlxuICAgKiBEcmF3ZXIgZXh0cmFzIGZvciB0aGUgdWkgaGFuZGxlZCB0eXBlc1xuICAgKi9cbiAgZHJhd2VyRXh0cmFzPzogSURyYXdlckNvbmZpZ3VyYXRvckVsZW1lbnRbXTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaGlkZSB0aGUgZHJhd2VyXG4gICAqL1xuICBoaWRlRHJhd2VyPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSBkaXNqb2ludGVkIG1vZGVcbiAgICovXG4gIGRpc2pvaW50ZWRNb2RlPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSB0b29sYmFyIGlzIHJldGFpbmVkIGV2ZW4gaWYgdGhlIHRleHQgaXNuJ3QgZm9jdXNlZFxuICAgKi9cbiAgZGlzam9pbnRlZE1vZGVLZWVwVG9vbGJhcj86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBBZGQgYSBjbGFzcyBuYW1lIHRvIHRoZSB0b29sYmFyIGluIHRoZSB3cmFwcGVyXG4gICAqL1xuICB0b29sYmFyQ2xhc3NOYW1lPzogc3RyaW5nO1xuICAvKipcbiAgICogQSBmdW5jdGlvbiB0byBkZWZpbmUgY3VzdG9tIGV4dHJhIGNoaWxkcmVuXG4gICAqL1xuICBjdXN0b21FeHRyYUNoaWxkcmVuPzogKGNoYXJhY3RlckNvdW50OiBudW1iZXIsIHdvcmRDb3VudDogbnVtYmVyKSA9PiBSZWFjdC5SZWFjdE5vZGU7XG5cbiAgLyoqXG4gICAqIEN1c3RvbWl6YXRpb24gZm9yIHRoZSBkcmF3ZXJcbiAgICogdGhlIGNvbnRhaW5lciBib3ggdGhhdCB3cmFwcyB0aGUgZW50aXJlIGRyYXdlclxuICAgKi9cbiAgRHJhd2VyQ29udGFpbmVyQm94PzogRHJhd2VyQ29udGFpbmVyQm94Q29tcG9uZW50O1xuXG4gIC8qKlxuICAgKiBDdXN0b21pemF0aW9uIGZvciB0aGUgZHJhd2VyXG4gICAqIHRoZSBzcGFjZXIgdGhhdCBpcyBhZGRlZCBvbiBkaXNqb2ludGVkIG1vZGUgb25seVxuICAgKi9cbiAgRHJhd2VyU3BhY2VyPzogRHJhd2VyU3BhY2VyQ29tcG9uZW50O1xuXG4gIC8qKlxuICAgKiBDdXN0b21pemF0aW9uIGZvciB0aGUgXG4gICAqL1xuICBEcmF3ZXJUZW1wbGF0aW5nQ29udGFpbmVyQm94PzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJhd2VyVGVtcGxhdGluZ0NvbnRhaW5lckJveFByb3BzPjtcblxuICAvKipcbiAgICogQ3VzdG9taXphdGlvbiBmb3IgdGhlIGRyYXdlclxuICAgKiB0aGUgYm9keSBvYmplY3QgY29udGFpbm1lbnQgaXRzZWxmXG4gICAqL1xuICBEcmF3ZXJCb2R5PzogRHJhd2VyQm9keUNvbXBvbmVudDtcblxuICAvKipcbiAgICogQ3VzdG9taXphdGlvbiBmb3IgdGhlIGJ1dHRvbiB3cmFwcGVyIHRoYXQgaXMgdXNlZFxuICAgKiBpbiB0aGUgdG9vbGJhclxuICAgKi9cbiAgVG9vbGJhckJ1dHRvbj86IFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG5cbiAgLyoqXG4gICAqIFRoZSBidXR0b24gdXNlZCB0byB0b2dnbGUgdGhlIGRyYXdlciBmcm9tIHRoZSB0b29sYmFyXG4gICAqL1xuICBUb29sYmFyRHJhd2VyQnV0dG9uPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJVG9vbGJhckRyYXdlckJ1dHRvblByb3BzPjtcblxuICAvKipcbiAgICogVXNlZCBmb3Igc2VwYXJhdGlvbiBpbiB0aGUgdG9vbGJhciAoaG9yaXpvbnRhbClcbiAgICovXG4gIFRvb2xiYXJIRGl2aWRlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8e30+O1xuXG4gIC8qKlxuICAgKiBVc2VkIGZvciBzZXBhcmF0aW9uIGluIHRoZSB0b29sYmFyICh2ZXJ0aWNhbClcbiAgICovXG4gIFRvb2xiYXJWRGl2aWRlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8e30+O1xuXG4gIC8qKlxuICAgKiBVc2VkIGZvciB0aGUgdG9vbGJhciBpdHNlbGZcbiAgICogdGhlIHRvb2xiYXIgc2hvdWxkIGFsc28gc3VwcG9ydCBhIHJlZlxuICAgKiBhcyBpdCdzIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBoZWlnaHQgb2YgdGhlIHRvb2xiYXJcbiAgICovXG4gIFRvb2xiYXI/OiBSZWFjdC5Db21wb25lbnRUeXBlPElUb29sYmFyUHJvcHM+O1xuXG4gIC8qKlxuICAgKiBXaGVuIHVzZWQgZGlzam9pbnRlZCBtb2RlIGEgY29udGFpbmVyIGlzIGdpdmVuIHRvIHRoZSBlZGl0b3JcbiAgICogdG8gd3JhcCBpdCB1c2UgdGhpcyB0byBzcGVjaWZ5IGl0LCByZW1lbWJlciB0byBhbGxvdyBpdCB0byBwYXNzXG4gICAqIGEgcmVmIGFzIGl0J3MgcmVxdWlyZWQgZm9yIHRoaXMgY29tcG9uZW50XG4gICAqL1xuICBEaXNqb2ludGVkRWRpdG9yQ29udGFpbmVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRWRpdG9yQ29udGFpbmVyUHJvcHM+O1xuICAvKipcbiAgICogVGhlIGRpc2pvaW50ZWQgZWRpdG9yIGl0c2VsZlxuICAgKi9cbiAgRGlzam9pbnRlZEVkaXRvcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUVkaXRvclByb3BzPjtcbiAgLyoqXG4gICAqIFRoZSBlZGl0b3IgaXRzZWxmLCBub3QgdXNlZCBpbiBkaXNqb2ludGVkIG1vZGVcbiAgICogdGhlIERpc2pvaW50ZWRFZGl0b3IgaXMgdXNlZCBpbnN0ZWFkXG4gICAqIGEgcmVmIGlzIHJlcXVpcmVkIGZvciB0aGlzIGNvbXBvbmVudCB0byBiZSBzdXBwb3J0ZWRcbiAgICovXG4gIEVkaXRvcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUVkaXRvclByb3BzPjtcbiAgLyoqXG4gICAqIFdoZW4gdXNpbmcgdGhlIHN0YW5kYXJkIG1vZGUsIGl0IGNvbnRhaW5zXG4gICAqIHRoZSBlZGl0b3IgaXRzZWxmXG4gICAqL1xuICBFZGl0b3JDb250YWluZXI/OiBSZWFjdC5Db21wb25lbnRUeXBlPElFZGl0b3JDb250YWluZXJQcm9wcz47XG5cbiAgLyoqXG4gICAqIEEgd3JhcHBlciBmb3IgdGhlIHRvb2xiYXIgY29tcG9uZW50XG4gICAqL1xuICBUb29sYmFyV3JhcHBlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUVkaXRvcldyYXBwZXJQcm9wcz47XG5cbiAgLyoqXG4gICAqIEEgd3JhcHBlciBmb3IgZXZlcnl0aGluZ1xuICAgKi9cbiAgRmluYWxXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRWRpdG9yV3JhcHBlclByb3BzPjtcblxuICAvKipcbiAgICogQSB3cmFwcGVyIGZvciB0aGUgZWRpdGluZyByZWdpb25cbiAgICovXG4gIEJhc2VXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRWRpdG9yV3JhcHBlclByb3BzPjtcblxuICAvKipcbiAgICogQSB3cmFwcGVyIGZvciB0aGUgZHJhd2VyXG4gICAqL1xuICBEcmF3ZXJXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRWRpdG9yV3JhcHBlclByb3BzPjtcblxuICAvKipcbiAgICogVGhlc2UgYXJlIHNlbGVjdCBlbGVtZW50cyBmb3Igb3B0aW9ucyB3aGVuIHVzaW5nIHRlbXBsYXRlIHNldHRpbmdzXG4gICAqL1xuICBEcmF3ZXJTaW5nbGVUZW1wbGF0aW5nRWxlbWVudD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SURyYXdlclNpbmdsZVRlbXBsYXRpbmdFbGVtZW50UHJvcHM+O1xuXG4gIC8qKlxuICAgKiBVc2VkIGZvciBkaXNwbGF5aW5nIGRpYWxvZ3Mgd2l0aCBlcnJvcnNcbiAgICovXG4gIERpYWxvZz86IFJlYWN0LkNvbXBvbmVudFR5cGU8SURpYWxvZ0NvbXBvbmVudFByb3BzPjtcblxuICAvKipcbiAgICogVXNlZCBmb3IgZ2VuZXJhdGluZyB0aGUgdGl0bGUgYW5kIGhpcmVhcmNoeSBvZiBlYWNoIGVsZW1lbnQgaW4gdGhlIGRyYXdlclxuICAgKi9cbiAgV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZT86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVQcm9wcz47XG5cbiAgLyoqXG4gICAqIFVzZWQgZm9yIHdyYXBwaW5nIGFsbCB0aGUgdGl0bGVzIGdlbmVyYXRlZFxuICAgKi9cbiAgV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVdyYXBwZXI/OiBSZWFjdC5Db21wb25lbnRUeXBlPHtjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlfT47XG5cbiAgLyoqXG4gICAqIFdyYXBzIHRoZSBpbmZvcm1hdGlvbiBwYW5lbCBmcm9tIHRoZSBkcmF3ZXIsIHdoYXRldmVyIGlzIHZpc2libGVcbiAgICovXG4gIFdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJV3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXJQcm9wcz47XG5cbiAgLyoqXG4gICAqIFVzZWQgZm9yIHRoZSB0YWJzIHN3aXRjaGVyIGNvbXBvbmVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIGRyYXdlclxuICAgKi9cbiAgV3JhcHBlckRyYXdlclRhYnM/OiBSZWFjdC5Db21wb25lbnRUeXBlPElXcmFwcGVyRHJhd2VyVGFic1Byb3BzPjtcblxuICAvKipcbiAgICogYWRkIGV4dHJhIGNoaWxkcmVuIHRvIHRoZSBkcmF3ZXJcbiAgICovXG4gIGRyYXdlckV4dHJhQ2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmZ1bmN0aW9uIERlZmF1bHRFZGl0b3JDb250YWluZXIocHJvcHM6IElFZGl0b3JDb250YWluZXJQcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JEZWZhdWx0RWRpdG9yQ29udGFpbmVyXCI+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlclRlbXBsYXRpbmdDb250YWluZXJCb3hQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbi8qKlxuICogQW4gdXRpbGl0eSB0byBkZWZpbmUgYSBzaW5nbGUgdGVtcGxhdGluZyBvcHRpb25cbiAqIGZvciB1c2FnZSBpbiBhIHNlbGVjdCBmaWVsZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElTaW5nbGVUZW1wbGF0aW5nRWxlbWVudE9wdGlvbiB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmcgfCBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlclNpbmdsZVRlbXBsYXRpbmdFbGVtZW50UHJvcHMge1xuICBpMThuTmFtZTogc3RyaW5nO1xuICB2YWx1ZTogc3RyaW5nO1xuICBvbkNoYW5nZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uQ2hhbmdlQnlFdmVudDogKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MU2VsZWN0RWxlbWVudD4pID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBjYXVzZXMgdGhlIHdob2xlIHRleHQgZWRpdG9yIHRvIGJlIHVuYWJsZSB0byBibHVyIGlmIGl0J3Mgb3V0IG9mIGZvY3VzXG4gICAqIGFuZCBrZWVwIHRoZSBmb2N1c1xuICAgKi9cbiAgdW5ibHVyOiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogcmVzZXRzIHRoZSBibHVyIHN0YXR1c1xuICAgKi9cbiAgcmVzZXRCbHVyOiAoKSA9PiB2b2lkO1xuICBvcHRpb25zOiBJU2luZ2xlVGVtcGxhdGluZ0VsZW1lbnRPcHRpb25bXTtcbn1cblxuXG5leHBvcnQgaW50ZXJmYWNlIElFZGl0b3JXcmFwcGVyUHJvcHMgZXh0ZW5kcyBJRGVmYXVsdFNsYXRlV3JhcHBlclByb3BzIHtcbiAgZHJhd2VyT3BlbjogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRWRpdG9yQ29udGFpbmVyUHJvcHMge1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElFZGl0b3JQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gIGNsYXNzTmFtZTogc3RyaW5nO1xufVxuXG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRvb2xiYXJQcm9wcyB7XG4gIC8qKlxuICAgKiB0b29sYmFyIGNvbnRlbnRzIHdpdGggYWxsIHRoZSBidXR0b25zIGFuZCBzZXBhcmF0b3JzXG4gICAqIGFzIGRldGVybWluZWRcbiAgICovXG4gIHRvb2xiYXJDb250ZW50czogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogQ3VzdG9tIGNoaWxkcmVuIGZvciB0aGUgdG9vbGJhciB0aGF0IGFyZSBhZGRlZFxuICAgKiBieSB0aGUgYWN0aXZlIHRvb2xiYXIgZWxlbWVudHNcbiAgICovXG4gIGN1c3RvbUNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gIC8qKlxuICAgKiBTaW5nbGUgZHJhd2VyIGJ1dHRvbiB0byBvcGVuIGFuZCBjbG9zZSB0aGUgZHJhd2VyXG4gICAqL1xuICBkcmF3ZXJCdXR0b246IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIFRoZXNlIHByb3BzIHNob3VsZCBiZSBhcHBsaWVkIHRvIHRoZSB0b3Agb2YgdGhlIHRvb2xiYXJcbiAgICovXG4gIHByb3BzOiBhbnk7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHdvcmtpbmcgaW4gZGlzam9pbnRlZCBtb2RlXG4gICAqL1xuICBkaXNqb2ludGVkTW9kZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGRyYXdlciBpcyBvcGVuXG4gICAqL1xuICBkcmF3ZXJPcGVuOiBib29sZWFuO1xufVxuXG5jb25zdCBEZWZhdWx0VG9vbGJhciA9IFJlYWN0LmZvcndhcmRSZWYoKHByb3BzOiBJVG9vbGJhclByb3BzLCByZWY6IFJlYWN0LkZvcndhcmRlZFJlZjxIVE1MRWxlbWVudD4pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yVG9vbGJhclwiIHsuLi5wcm9wcy5wcm9wc30gcmVmPXtyZWZ9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvclRvb2xiYXJJbnRlcm5hbFwiPlxuICAgICAgICB7cHJvcHMudG9vbGJhckNvbnRlbnRzfVxuICAgICAgICB7cHJvcHMuY3VzdG9tQ2hpbGRyZW59XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JUb29sYmFySW50ZXJuYWxTcGFjZXJcIiAvPlxuICAgICAgICB7cHJvcHMuZHJhd2VyQnV0dG9ufVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn0pO1xuXG4vKipcbiAqIFRoZXNlIGFyZSB0aGUgcmljaCB0ZXh0IGVkaXRvciB0b29sYmFyIHByb3BlcnRpZXMgdGhleSBiYXNpY2FsbHkgdGFrZSB0aGUgc2FtZVxuICogdGhhdCB0aGUgZW50aXJlIHdyYXBwZXIgZG9lcywgYnV0IGFkZGluZyB0aGVzZSBmdW5jdGlvbnMgYW5kIGZsYWdzIHRha2VuIGZyb21cbiAqIHRoZSBzdGF0ZSBvZiB0aGUgd3JhcHBlciBvciBvdGhlciBmdW5jdGlvbnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSaWNoVGV4dEVkaXRvclRvb2xiYXJQcm9wcyBleHRlbmRzIElEZWZhdWx0U2xhdGVXcmFwcGVyUHJvcHMge1xuICAvKipcbiAgICogV2hldGhlciB0aGUgZHJhd2VyIGlzIG9wZW4sIHRoZSBkcmF3ZXIgaXMgdGhlIHNpZGUgZHJhd2VyIHRoYXQgY29udGFpbnNcbiAgICogYSBsb3Qgb2YgZnVuY3Rpb25hbGl0eSB0byBlZGl0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgZWxlbWVudFxuICAgKi9cbiAgZHJhd2VyT3BlbjogYm9vbGVhbjtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgc3RhdGVcbiAgICovXG4gIHN0YXRlOiBJU2xhdGVFZGl0b3JJbnRlcm5hbFN0YXRlVHlwZTtcblxuICAvKipcbiAgICogQSBjdXN0b20gdG9vbGJhciBzdGF0ZVxuICAgKi9cbiAgdG9vbGJhclN0YXRlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSB0b29sYmFyIGhlaWdodFxuICAgKi9cbiAgdG9vbGJhckhlaWdodDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBjYWxsIHRvIHJlcXVlc3QgYW4gaW1hZ2UsIG9wZW5zIGEgZGlhbG9nIHNvIHJlcXVpcmVzIGEgc3RhdGVcbiAgICovXG4gIHJlcXVlc3RJbWFnZTogKCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogQ2FsbCB0byByZXF1ZXN0IGEgZmlsZSwgb3BlbnMgYSBkaWFsb2cgc28gcmVxdWlyZXMgYSBzdGF0ZVxuICAgKi9cbiAgcmVxdWVzdEZpbGU6ICgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIHNldHMgdGhlIHRvb2xiYXIgc3RhdGVcbiAgICovXG4gIHNldFRvb2xiYXJTdGF0ZTogKHN0YXRlOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRoYXQgc3BlY2lmaWVzIHdoZXRoZXIgdGhlIGRyYXdlciBzaG91bGRcbiAgICogZXhpc3RcbiAgICogQHJldHVybnMgYSBib29sZWFuIGFzIHRoZSBhbnN3ZXJcbiAgICovXG4gIHNob3VsZEhhdmVEcmF3ZXI6ICgpID0+IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgZHJhd2VyIG9wZW4gb3IgY2xvc2VcbiAgICovXG4gIHRvZ2dsZURyYXdlcjogKCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gdGhlIGhlaWdodCBjaGFuZ2VzXG4gICAqL1xuICBvbkhlaWdodENoYW5nZTogKG5ld0hlaWdodDogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgUmljaFRleHRFZGl0b3JUb29sYmFyU3RhdGUge1xuICBpc1JlYWR5OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzIGV4dGVuZHMgUmljaFRleHRFZGl0b3JUb29sYmFyU3RhdGUsIFJpY2hUZXh0RWRpdG9yVG9vbGJhclByb3BzIHtcbn1cblxuLy8gZnVuY3Rpb24gZWxlbWVudEZhc3RLZXlSZXR1cm4oXG4vLyAgIHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMsXG4vLyAgIGVsZW1lbnQ6IFJlYWN0LlJlYWN0Tm9kZSxcbi8vICAgYWx0QmFkZ2VkQ2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSxcbi8vICAgcHJpb3JpdHk6IG51bWJlcixcbi8vICAgZGlzYWJsZWQ6IGJvb2xlYW4sXG4vLyAgIHVzZVN0eWxlVHJhbnNmb3JtPzogYm9vbGVhbixcbi8vICAgdXNlVHJpZ2dlckFsdEFmdGVyQWN0aW9uPzogYm9vbGVhbixcbi8vICAgZmFzdEtleU92ZXJyaWRlPzogc3RyaW5nLFxuLy8gKTogYW55IHtcbi8vICAgY29uc3QgZmFzdEtleSA9IGZhc3RLZXlPdmVycmlkZSB8fCBwcm9wcy5mYXN0S2V5O1xuXG4vLyAgIGlmICghZmFzdEtleSkge1xuLy8gICAgIHJldHVybiBlbGVtZW50O1xuLy8gICB9XG5cbi8vICAgcmV0dXJuIChcbi8vICAgICA8QWx0QmFkZ2VSZWFjdGlvbmVyXG4vLyAgICAgICByZWFjdGlvbktleT17ZmFzdEtleX1cbi8vICAgICAgIHByaW9yaXR5PXtwcmlvcml0eX1cbi8vICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZCB8fCAhcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudH1cbi8vICAgICAgIGFsdEJhZGdlZENoaWxkcmVuPXthbHRCYWRnZWRDaGlsZHJlbn1cbi8vICAgICAgIGxhYmVsPXtmYXN0S2V5ID09PSBcImVzY2FwZVwiID8gXCJlc2NcIiA6IG51bGx9XG4vLyAgICAgICB0YWJiYWJsZT17ZmFzdEtleSAhPT0gXCJlc2NhcGVcIn1cbi8vICAgICAgIHVzZVRyYW5zZm9ybT17dXNlU3R5bGVUcmFuc2Zvcm0gPyBcImNsb3NlXCIgOiBudWxsfVxuLy8gICAgICAgdHJpZ2dlckFsdEFmdGVyQWN0aW9uPXt1c2VUcmlnZ2VyQWx0QWZ0ZXJBY3Rpb259XG4vLyAgICAgICBzZWxlY3Rvcj1cImJ1dHRvblwiXG4vLyAgICAgICBvblRhYk91dFRyaWdnZXI9XCJlc2NhcGVcIlxuLy8gICAgID5cbi8vICAgICAgIHtlbGVtZW50fVxuLy8gICAgIDwvQWx0QmFkZ2VSZWFjdGlvbmVyPlxuLy8gICApO1xuLy8gfVxuXG5leHBvcnQgaW50ZXJmYWNlIElUb29sYmFyQnV0dG9uUHJvcHMge1xuICB0aXRsZTogc3RyaW5nO1xuICB0eXBlOiBTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFySWRlbnRpZmllZEVsZW1lbnQgfCBcImV4dHJhXCI7XG4gIGV4dHJhSWQ/OiBzdHJpbmc7XG4gIHNlbGVjdGVkOiBib29sZWFuO1xuICBkaXNhYmxlZDogYm9vbGVhbjtcbiAgaHRtbEVudGl0eTogc3RyaW5nO1xuICBvbkNsaWNrOiAoKSA9PiB2b2lkO1xuICBjb3VudD86IG51bWJlcjtcbiAgZGlzam9pbnRlZE1vZGU6IGJvb2xlYW47XG59XG5cbnR5cGUgVG9vbGJhckJ1dHRvbkNvbXBvbmVudCA9IFJlYWN0LkNvbXBvbmVudFR5cGU8SVRvb2xiYXJCdXR0b25Qcm9wcz47XG5cbmZ1bmN0aW9uIERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50KHByb3BzOiBJVG9vbGJhckJ1dHRvblByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPGJ1dHRvblxuICAgICAgY2xhc3NOYW1lPXtcInNsYXRlRWRpdG9yVG9vbGJhckJ1dHRvbiBcIiArIChwcm9wcy5zZWxlY3RlZCA/IFwiIHNlbGVjdGVkXCIgOiBcIlwiKX1cbiAgICAgIHRpdGxlPXtwcm9wcy50aXRsZX1cbiAgICAgIGRpc2FibGVkPXtwcm9wcy5kaXNhYmxlZH1cbiAgICAgIG9uQ2xpY2s9e3Byb3BzLm9uQ2xpY2t9XG4gICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IHByb3BzLmh0bWxFbnRpdHkgKyAodHlwZW9mIHByb3BzLmNvdW50ID09PSBcIm51bWJlclwiID8gKFwiIChcIiArIHByb3BzLmNvdW50ICsgXCIpXCIpIDogXCJcIikgfX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBCb2xkKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHQgfHwgIXByb3BzLnN0YXRlLmFsbG93c1RleHQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRCb2xkTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17cHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dCAmJiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0LmJvbGR9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLmZvcm1hdFRvZ2dsZSwgXCJib2xkXCIpfVxuICAgICAgaHRtbEVudGl0eT1cIiYjeDFkNDAxO1wiXG4gICAgICB0eXBlPVwiYm9sZFwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gSXRhbGljKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHQgfHwgIXByb3BzLnN0YXRlLmFsbG93c1RleHQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRJdGFsaWNMYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0ICYmIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHQuaXRhbGljfVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy5mb3JtYXRUb2dnbGUsIFwiaXRhbGljXCIpfVxuICAgICAgaHRtbEVudGl0eT1cIiYjeDFkNDcwO1wiXG4gICAgICB0eXBlPVwiaXRhbGljXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBVbmRlcmxpbmUocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dCB8fCAhcHJvcHMuc3RhdGUuYWxsb3dzVGV4dDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdFVuZGVybGluZUxhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e3Byb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHQgJiYgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dC51bmRlcmxpbmV9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLmZvcm1hdFRvZ2dsZSwgXCJ1bmRlcmxpbmVcIil9XG4gICAgICBodG1sRW50aXR5PVwiJiN4MWU0ODtcIlxuICAgICAgdHlwZT1cInVuZGVybGluZVwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVkRpdmlkZXIocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAocHJvcHMuVG9vbGJhclZEaXZpZGVyKSB7XG4gICAgY29uc3QgUmVhbERpdmlkZXIgPSBwcm9wcy5Ub29sYmFyVkRpdmlkZXI7XG4gICAgcmV0dXJuICg8UmVhbERpdmlkZXIgLz4pO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yVmRpdmlkZXJcIiAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBIRGl2aWRlcihwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmIChwcm9wcy5Ub29sYmFySERpdmlkZXIpIHtcbiAgICBjb25zdCBSZWFsRGl2aWRlciA9IHByb3BzLlRvb2xiYXJIRGl2aWRlcjtcbiAgICByZXR1cm4gKDxSZWFsRGl2aWRlciAvPik7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9ySGRpdmlkZXJzcGFjZXJcIiAvPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckhkaXZpZGVyXCIgLz5cbiAgICA8Lz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gTGluayhwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmICghcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNMaW5rcyB8fCAhcHJvcHMuaXNSZWFkeSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbGV0IHRlbXBsYXRlTGlua0Ftb3VudCA9IDA7XG5cbiAgaWYgKHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGVtcGxhdGluZyAmJiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQpIHtcbiAgICBPYmplY3Qua2V5cyhwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQucHJvcGVydGllcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dC5wcm9wZXJ0aWVzW2tleV07XG5cbiAgICAgIC8vIGJ1dCB0aGV5IG11c3QgYmUgdGhlIGdpdmVuIGVsZW1lbnQgdHlwZVxuICAgICAgaWYgKHByb3BlcnR5LnR5cGUgPT09IFwibGlua1wiKSB7XG4gICAgICAgIHRlbXBsYXRlTGlua0Ftb3VudCsrO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKFxuICAgIHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGVtcGxhdGluZyAmJlxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCAmJlxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCAhPT0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0XG4gICkge1xuICAgIE9iamVjdC5rZXlzKHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dC5wcm9wZXJ0aWVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0gcHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LnByb3BlcnRpZXNba2V5XTtcbiAgICAgIGlmIChwcm9wZXJ0eS5ub25Sb290SW5oZXJpdGFibGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBidXQgdGhleSBtdXN0IGJlIHRoZSBnaXZlbiBlbGVtZW50IHR5cGVcbiAgICAgIGlmIChwcm9wZXJ0eS50eXBlID09PSBcImxpbmtcIikge1xuICAgICAgICB0ZW1wbGF0ZUxpbmtBbW91bnQrKztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoeyB0eXBlOiBcImxpbmtcIiwgaHJlZjogXCJcIiwgY2hpbGRyZW46IFtdLCB0aHJlZjogbnVsbCB9KTtcblxuICBjb25zdCBzZWxlY3RlZCA9IHByb3BzLmhlbHBlcnMuZWRpdG9yLnNlbGVjdGlvbiAmJlxuICAgIHByb3BzLmhlbHBlcnMuUmFuZ2UuaXNDb2xsYXBzZWQocHJvcHMuaGVscGVycy5lZGl0b3Iuc2VsZWN0aW9uKSAmJlxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQgJiZcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50LnR5cGUgPT09IFwibGlua1wiO1xuXG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuXG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRMaW5rTGFiZWx9XG4gICAgICBzZWxlY3RlZD17c2VsZWN0ZWR9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLnRvZ2dsZUxpbmssIG51bGwsIG51bGwpfVxuICAgICAgY291bnQ9e3RlbXBsYXRlTGlua0Ftb3VudCA9PT0gMCA/IG51bGwgOiB0ZW1wbGF0ZUxpbmtBbW91bnR9XG4gICAgICBodG1sRW50aXR5PVwiJiN4MWY1MTc7XCJcbiAgICAgIHR5cGU9XCJsaW5rXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBUaXRsZShwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmICghcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUaXRsZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudCh7IHR5cGU6IFwidGl0bGVcIiwgdGl0bGVUeXBlOiBcImgxXCIsIGNoaWxkcmVuOiBbXSB9LCB7IGNvbGxhcHNlZDogdHJ1ZSB9KTtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRUaXRsZUxhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e3Byb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCAmJiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQudHlwZSA9PT0gXCJ0aXRsZVwifVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy50b2dnbGVUaXRsZSwgXCJoMVwiKX1cbiAgICAgIGh0bWxFbnRpdHk9XCImI3gxZDQxMztcIlxuICAgICAgdHlwZT1cInRpdGxlXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBRdW90ZShwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmICghcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNRdW90ZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudCh7IHR5cGU6IFwicXVvdGVcIiwgY2hpbGRyZW46IFtdIH0sIHsgY29sbGFwc2VkOiB0cnVlIH0pO1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdFF1b3RlTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17cHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50ICYmIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudC50eXBlID09PSBcInF1b3RlXCJ9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLnRvZ2dsZVF1b3RlKX1cbiAgICAgIGh0bWxFbnRpdHk9XCImcXVvdDtcIlxuICAgICAgdHlwZT1cInF1b3RlXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5cbmZ1bmN0aW9uIE51bWJlcmVkTGlzdChwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmICghcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNMaXN0cykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudCh7IHR5cGU6IFwibGlzdFwiLCBsaXN0VHlwZTogXCJudW1iZXJlZFwiLCBjaGlsZHJlbjogW10gfSk7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0TGlzdE51bWJlcmVkTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17ZmFsc2V9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLmluc2VydExpc3QsIFwibnVtYmVyZWRcIil9XG4gICAgICBodG1sRW50aXR5PVwiMTIzXCJcbiAgICAgIHR5cGU9XCJudW1iZXJlZC1saXN0XCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBCdWxsZXRlZExpc3QocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzTGlzdHMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoeyB0eXBlOiBcImxpc3RcIiwgbGlzdFR5cGU6IFwiYnVsbGV0ZWRcIiwgY2hpbGRyZW46IFtdIH0pO1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdExpc3RCdWxsZXRlZExhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e2ZhbHNlfVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy5pbnNlcnRMaXN0LCBcImJ1bGxldGVkXCIpfVxuICAgICAgaHRtbEVudGl0eT1cIi4uLlwiXG4gICAgICB0eXBlPVwiYnVsbGV0ZWQtbGlzdFwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuY29uc3QgaW1nRXhhbXBsZSA9IHtcbiAgdHlwZTogXCJpbWFnZVwiIGFzIFwiaW1hZ2VcIixcbiAgY2hpbGRyZW46IFtTVEFOREFSRF9URVhUX05PREUoKV0gYXMgYW55LFxuICB3aWR0aDogMCxcbiAgaGVpZ2h0OiAwLFxuICBhbHQ6IFwiXCIsXG4gIHNyYzogXCJcIixcbiAgc3JjU2V0OiBcIlwiLFxuICBzcmNJZDogXCJcIixcbiAgc3RhbmRhbG9uZTogZmFsc2UsXG4gIHNpemVzOiBcIlwiLFxufTtcblxuZnVuY3Rpb24gSW1hZ2UocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoXG4gICAgIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzSW1hZ2VzXG4gICkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudChpbWdFeGFtcGxlLCB7IHNlbGVjdGVkOiB0cnVlIH0pO1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdEFkZEltYWdlTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17ZmFsc2V9XG4gICAgICBvbkNsaWNrPXtwcm9wcy5yZXF1ZXN0SW1hZ2V9XG4gICAgICBodG1sRW50aXR5PVwiJiMxMjgyNDc7XCJcbiAgICAgIHR5cGU9XCJpbWFnZVwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuY29uc3QgdmlkZW9FeGFtcGxlID0ge1xuICB0eXBlOiBcInZpZGVvXCIgYXMgXCJ2aWRlb1wiLFxuICBvcmlnaW46IFwieW91dHViZVwiIGFzIFwieW91dHViZVwiLFxuICBzcmM6IFwiXCIsXG4gIGNoaWxkcmVuOiBbU1RBTkRBUkRfVEVYVF9OT0RFKCldIGFzIGFueSxcbn1cblxuZnVuY3Rpb24gVmlkZW8ocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoXG4gICAgIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVmlkZW9zXG4gICkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudCh2aWRlb0V4YW1wbGUsIHsgc2VsZWN0ZWQ6IHRydWUgfSk7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0QWRkVmlkZW9MYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtmYWxzZX1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMuaW5zZXJ0VmlkZW8sIG51bGwpfVxuICAgICAgaHRtbEVudGl0eT1cIiYjMTI3OTA5O1wiXG4gICAgICB0eXBlPVwidmlkZW9cIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmNvbnN0IGZpbGVFeGFtcGxlID0ge1xuICB0eXBlOiBcImZpbGVcIiBhcyBcImZpbGVcIixcbiAgY2hpbGRyZW46IFtTVEFOREFSRF9URVhUX05PREUoKV0gYXMgYW55LFxuICBleHRlbnNpb246IFwiXCIsXG4gIGZpbGVOYW1lOiBcIlwiLFxuICBzaXplOiBcIlwiLFxuICBzcmM6IFwiXCIsXG4gIHNyY0lkOiBcIlwiLFxufTtcblxuZnVuY3Rpb24gRmlsZShwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmIChcbiAgICAhcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNGaWxlc1xuICApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoZmlsZUV4YW1wbGUsIHsgc2VsZWN0ZWQ6IHRydWUgfSk7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0QWRkRmlsZUxhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e2ZhbHNlfVxuICAgICAgb25DbGljaz17cHJvcHMucmVxdWVzdEZpbGV9XG4gICAgICBodG1sRW50aXR5PVwiJiMxMjg0NDE7XCJcbiAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBDb250YWluZXIocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoXG4gICAgIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzQ29udGFpbmVyc1xuICApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoeyB0eXBlOiBcImNvbnRhaW5lclwiLCBjb250YWluZXJUeXBlOiBudWxsLCBjaGlsZHJlbjogW10gfSk7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0QWRkQ29udGFpbmVyTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17ZmFsc2V9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLmluc2VydENvbnRhaW5lciwgbnVsbCl9XG4gICAgICBodG1sRW50aXR5PVwiJiM5OTc0O1wiXG4gICAgICB0eXBlPVwiY29udGFpbmVyXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBUYWJsZShwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmIChcbiAgICAhcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUYWJsZXNcbiAgKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KHsgdHlwZTogXCJ0YWJsZVwiLCB0YWJsZVR5cGU6IG51bGwsIGNoaWxkcmVuOiBbXSB9KTtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRBZGRUYWJsZUxhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e2ZhbHNlfVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy5pbnNlcnRUYWJsZSwgbnVsbCl9XG4gICAgICBodG1sRW50aXR5PVwiJiM1Nzg1O1wiXG4gICAgICB0eXBlPVwidGFibGVcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFRlbXBsYXRlVGV4dChwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmIChcbiAgICAhcHJvcHMuaXNSZWFkeSB8fFxuICAgICFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmdcbiAgKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZXQgdGVtcGxhdGVUZXh0QW1vdW50ID0gMDtcblxuICBpZiAocHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0KSB7XG4gICAgT2JqZWN0LmtleXMocHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQucHJvcGVydGllc1trZXldO1xuXG4gICAgICAvLyBidXQgdGhleSBtdXN0IGJlIHRoZSBnaXZlbiBlbGVtZW50IHR5cGVcbiAgICAgIGlmIChwcm9wZXJ0eS50eXBlID09PSBcInRleHRcIikge1xuICAgICAgICB0ZW1wbGF0ZVRleHRBbW91bnQrKztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChcbiAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmcgJiZcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQgJiZcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQgIT09IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dFxuICApIHtcbiAgICBPYmplY3Qua2V5cyhwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQucHJvcGVydGllcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dC5wcm9wZXJ0aWVzW2tleV07XG4gICAgICBpZiAocHJvcGVydHkubm9uUm9vdEluaGVyaXRhYmxlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gYnV0IHRoZXkgbXVzdCBiZSB0aGUgZ2l2ZW4gZWxlbWVudCB0eXBlXG4gICAgICBpZiAocHJvcGVydHkudHlwZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgdGVtcGxhdGVUZXh0QW1vdW50Kys7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAodGVtcGxhdGVUZXh0QW1vdW50ID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KHsgdHlwZTogXCJpbmxpbmVcIiwgY2hpbGRyZW46IFtdLCB0ZXh0Q29udGVudDogXCJ0ZXh0XCIgfSk7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0QWRkVGVtcGxhdGVUZXh0fVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e2ZhbHNlfVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy5pbnNlcnRUZW1wbGF0ZVRleHQsIG51bGwsIG51bGwpfVxuICAgICAgaHRtbEVudGl0eT1cInRleHRcIlxuICAgICAgdHlwZT1cInRhYmxlXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAgIGNvdW50PXt0ZW1wbGF0ZVRleHRBbW91bnR9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVGVtcGxhdGVIVE1MKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKFxuICAgICFwcm9wcy5pc1JlYWR5IHx8XG4gICAgIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGVtcGxhdGluZ1xuICApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxldCB0ZW1wbGF0ZUhUTUxBbW91bnQgPSAwO1xuXG4gIGNvbnN0IGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50ID0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzICYmXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzW1xuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cy5sZW5ndGggLSAxXG4gICAgXTtcblxuICBpZiAoXG4gICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnQgJiZcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHRcbiAgKSB7XG4gICAgT2JqZWN0LmtleXMocHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHQucHJvcGVydGllc1trZXldO1xuXG4gICAgICAvLyBidXQgdGhleSBtdXN0IGJlIHRoZSBnaXZlbiBlbGVtZW50IHR5cGVcbiAgICAgIGlmIChwcm9wZXJ0eS50eXBlID09PSBcImh0bWxcIikge1xuICAgICAgICB0ZW1wbGF0ZUhUTUxBbW91bnQrKztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChcbiAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmcgJiZcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQgJiZcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQgIT09IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dFxuICApIHtcbiAgICBPYmplY3Qua2V5cyhwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQucHJvcGVydGllcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dC5wcm9wZXJ0aWVzW2tleV07XG4gICAgICBpZiAocHJvcGVydHkubm9uUm9vdEluaGVyaXRhYmxlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gYnV0IHRoZXkgbXVzdCBiZSB0aGUgZ2l2ZW4gZWxlbWVudCB0eXBlXG4gICAgICBpZiAocHJvcGVydHkudHlwZSA9PT0gXCJodG1sXCIpIHtcbiAgICAgICAgdGVtcGxhdGVIVE1MQW1vdW50Kys7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAodGVtcGxhdGVIVE1MQW1vdW50ID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KHsgdHlwZTogXCJ2b2lkLWJsb2NrXCIsIGNoaWxkcmVuOiBbXSwgaHRtbDogXCJodG1sXCIgfSk7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0QWRkVGVtcGxhdGVIVE1MfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e2ZhbHNlfVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy5pbnNlcnRUZW1wbGF0ZUhUTUwsIG51bGwsIG51bGwpfVxuICAgICAgaHRtbEVudGl0eT1cImh0bWxcIlxuICAgICAgdHlwZT1cInRhYmxlXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAgIGNvdW50PXt0ZW1wbGF0ZUhUTUxBbW91bnR9XG4gICAgLz5cbiAgKTtcbn1cblxuaW50ZXJmYWNlIElUb29sYmFyRXh0cmFQcm9wcyBleHRlbmRzIFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcyB7XG4gIGV4dHJhOiBJVG9vbGJhclByZXNjZW5zZUVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIFRvb2xiYXJFeHRyYShwcm9wczogSVRvb2xiYXJFeHRyYVByb3BzKSB7XG4gIGNvbnN0IGVsZW1lbnRSZWZlcmVuY2UgPSB0eXBlb2YgcHJvcHMuZXh0cmEuZWxlbWVudCA9PT0gXCJmdW5jdGlvblwiID8gcHJvcHMuZXh0cmEuZWxlbWVudCgpIDogcHJvcHMuZXh0cmEuZWxlbWVudDtcbiAgY29uc3QgZGVmYXVsdEFjdGlvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gdHlwZW9mIHByb3BzLmV4dHJhLmVsZW1lbnQgPT09IFwiZnVuY3Rpb25cIiA/IHByb3BzLmV4dHJhLmVsZW1lbnQoKSA6IHByb3BzLmV4dHJhLmVsZW1lbnQ7XG4gICAgcHJvcHMuaGVscGVycy5pbnNlcnRFbGVtZW50KGVsZW1lbnQpO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9LCBbcHJvcHMuZXh0cmEuZWxlbWVudCwgcHJvcHMuaGVscGVycy5pbnNlcnRFbGVtZW50XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocHJvcHMuZXh0cmEub25BbnlLZXlEb3duKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHByb3BzLmV4dHJhLm9uQW55S2V5RG93bik7XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgcHJvcHMuZXh0cmEub25BbnlLZXlEb3duKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH0sIFtwcm9wcy5leHRyYS5vbkFueUtleURvd25dKVxuXG4gIGNvbnN0IG9uQ2xpY2sgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuTW91c2VFdmVudDxIVE1MQnV0dG9uRWxlbWVudD4pID0+IHtcbiAgICBpZiAocHJvcHMuZXh0cmEucmVmb2N1c0hhbmRsZXIpIHtcbiAgICAgIHByb3BzLmV4dHJhLnJlZm9jdXNIYW5kbGVyKHByb3BzLmhlbHBlcnMuZm9jdXMsIGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9wcy5oZWxwZXJzLmZvY3VzKCk7XG4gICAgfVxuICAgIHByb3BzLmV4dHJhLm9uQ2xpY2sgPyBwcm9wcy5leHRyYS5vbkNsaWNrKGRlZmF1bHRBY3Rpb24sIGUpIDogZGVmYXVsdEFjdGlvbigpO1xuICB9LCBbXSk7XG5cbiAgbGV0IGRpc2FibGVkID0gZmFsc2U7XG4gIGlmIChlbGVtZW50UmVmZXJlbmNlKSB7XG4gICAgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudChlbGVtZW50UmVmZXJlbmNlKTtcbiAgfVxuXG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICBpZiAodHlwZW9mIHByb3BzLmV4dHJhLnRpdGxlID09PSBcInN0cmluZ1wiIHx8ICFwcm9wcy5leHRyYS50aXRsZSkge1xuICAgIHJldHVybiAoXG4gICAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgICB0aXRsZT17cHJvcHMuZXh0cmEudGl0bGUgYXMgc3RyaW5nfVxuICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgIHNlbGVjdGVkPXtwcm9wcy5leHRyYS5zZWxlY3RlZH1cbiAgICAgICAgY291bnQ9e3Byb3BzLmV4dHJhLmNvdW50fVxuICAgICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgICAgIGh0bWxFbnRpdHk9XCI/XCJcbiAgICAgICAgdHlwZT1cImV4dHJhXCJcbiAgICAgICAgZXh0cmFJZD17cHJvcHMuZXh0cmEuaWR9XG4gICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XG4gICAgICAgIHsuLi5wcm9wcy5leHRyYS50b29sYmFyQnV0dG9uUHJvcHN9XG4gICAgICAvPlxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZWxlbWVudDogUmVhY3QuUmVhY3RFbGVtZW50ID0gcHJvcHMuZXh0cmEudGl0bGUgYXMgYW55O1xuICAgIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQoZWxlbWVudCwge1xuICAgICAgY2hpbGRyZW46IChpMThuVGl0bGU6IHN0cmluZykgPT4gKFxuICAgICAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgICAgIHRpdGxlPXtpMThuVGl0bGV9XG4gICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgIHNlbGVjdGVkPXtwcm9wcy5leHRyYS5zZWxlY3RlZH1cbiAgICAgICAgICBjb3VudD17cHJvcHMuZXh0cmEuY291bnR9XG4gICAgICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgICAgICAgIGh0bWxFbnRpdHk9XCI/XCJcbiAgICAgICAgICB0eXBlPVwiZXh0cmFcIlxuICAgICAgICAgIGV4dHJhSWQ9e3Byb3BzLmV4dHJhLmlkfVxuICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XG4gICAgICAgICAgey4uLnByb3BzLmV4dHJhLnRvb2xiYXJCdXR0b25Qcm9wc31cbiAgICAgICAgLz5cbiAgICAgIClcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBUb29sYmFyRXh0cmFzKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKHByb3BzLnRvb2xiYXJFeHRyYXMgJiYgcHJvcHMudG9vbGJhckV4dHJhcy5sZW5ndGgpIHtcbiAgICBjb25zdCB0b29sYmFyRXh0cmFzID0gcHJvcHMudG9vbGJhckV4dHJhcy5tYXAoKHgsIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8VG9vbGJhckV4dHJhIHsuLi5wcm9wc30gZXh0cmE9e3h9IGtleT17aW5kZXh9IC8+XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY3VzdG9tcyA9IHByb3BzLnRvb2xiYXJFeHRyYXMubWFwKCh4LCBpKSA9PiAoXG4gICAgICB4LmN1c3RvbUNoaWxkcmVuID8gPFJlYWN0LkZyYWdtZW50IGtleT17aX0+e3guY3VzdG9tQ2hpbGRyZW59PC9SZWFjdC5GcmFnbWVudD4gOiBudWxsXG4gICAgKSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPD5cbiAgICAgICAge3Rvb2xiYXJFeHRyYXN9XG4gICAgICAgIHtjdXN0b21zfVxuICAgICAgPC8+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBOb25lKCk6IGFueSB7XG4gIHJldHVybiBudWxsO1xufVxuXG5jb25zdCB0b29sYmFyUmVnaXN0cnk6IFJlY29yZDxTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFySWRlbnRpZmllZEVsZW1lbnQsIFJlYWN0LkVsZW1lbnRUeXBlPFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcz4+ID0ge1xuICBub25lOiBOb25lLFxuICBpdGFsaWM6IEl0YWxpYyxcbiAgYm9sZDogQm9sZCxcbiAgdW5kZXJsaW5lOiBVbmRlcmxpbmUsXG4gIFwiYnVsbGV0ZWQtbGlzdFwiOiBCdWxsZXRlZExpc3QsXG4gIFwibnVtYmVyZWQtbGlzdFwiOiBOdW1iZXJlZExpc3QsXG4gIFwidGVtcGxhdGUtaHRtbFwiOiBUZW1wbGF0ZUhUTUwsXG4gIFwidGVtcGxhdGUtdGV4dFwiOiBUZW1wbGF0ZVRleHQsXG4gIHRpdGxlOiBUaXRsZSxcbiAgY29udGFpbmVyOiBDb250YWluZXIsXG4gIGRpdmlkZXI6IFZEaXZpZGVyLFxuICBoZGl2aWRlcjogSERpdmlkZXIsXG4gIGV4dHJhczogVG9vbGJhckV4dHJhcyxcbiAgZmlsZTogRmlsZSxcbiAgaW1hZ2U6IEltYWdlLFxuICBsaW5rOiBMaW5rLFxuICBxdW90ZTogUXVvdGUsXG4gIHZpZGVvOiBWaWRlbyxcbiAgdGFibGU6IFRhYmxlLFxufVxuXG5pbnRlcmZhY2UgSVRvb2xiYXJEcmF3ZXJCdXR0b25Qcm9wcyB7XG4gIGRyYXdlck9wZW46IGJvb2xlYW47XG4gIHRvZ2dsZURyYXdlcjogKCkgPT4gdm9pZDtcbiAgZGlzam9pbnRlZE1vZGU6IGJvb2xlYW47XG59O1xuXG5mdW5jdGlvbiBEZWZhdWx0VG9vbGJhckRyYXdlclRvZ2dsZUJ1dHRvbihwcm9wczogSVRvb2xiYXJEcmF3ZXJCdXR0b25Qcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxidXR0b25cbiAgICAgIG9uQ2xpY2s9e3Byb3BzLnRvZ2dsZURyYXdlcn1cbiAgICAgIGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yVG9vbGJhckJ1dHRvblwiXG4gICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IHByb3BzLmRyYXdlck9wZW4gPyBcIiYjMTEwMTQ7XCIgOiBcIiYjMTEwMTU7XCIgfX1cbiAgICAvPlxuICApO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGZ1bmN0aW9uIGNvbXBvbmVudCB0aGF0IHJlcHJlc2VudHMgdGhlIHRvb2xiYXIgZm9yIHRoZSB3cmFwcGVyXG4gKiBAcGFyYW0gcHJvcHMgdGhlIGVudGlyZSByaWNoIHRleHQgZWRpdG9yIHRvb2xiYXIgcHJvcHMgd2l0aCBhbGwgdGhlIGFkZGVkIGZ1bmN0aW9uc1xuICovXG5jbGFzcyBSaWNoVGV4dEVkaXRvclRvb2xiYXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UmljaFRleHRFZGl0b3JUb29sYmFyUHJvcHMsIFJpY2hUZXh0RWRpdG9yVG9vbGJhclN0YXRlPiB7XG5cbiAgcHJpdmF0ZSBhcHBCYXJIZWFkZXJSZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRWxlbWVudD47XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhclByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIC8vIGlzc3VlcyB3aXRoIHRoZSBiYWRnZSBhbmQgU1NSXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzUmVhZHk6IGZhbHNlLFxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNSZWFkeTogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHRoaXMucHJvcHMub25IZWlnaHRDaGFuZ2UodGhpcy5nZXRIZWlnaHQoKSk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgdGhpcy5wcm9wcy5vbkhlaWdodENoYW5nZSh0aGlzLmdldEhlaWdodCgpKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRIZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwQmFySGVhZGVyUmVmPy5jdXJyZW50Py5vZmZzZXRIZWlnaHQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0QXBwYmFySGVhZGVyKCkge1xuICAgIHJldHVybiB0aGlzLmFwcEJhckhlYWRlclJlZj8uY3VycmVudDtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgLy8gbm8gcmljaCB0ZXh0XG4gICAgaWYgKCF0aGlzLnByb3BzLnN0YXRlLmlzUmljaFRleHQpIHtcbiAgICAgIC8vIG5vIHRvb2xiYXJcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlICYmICF0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlS2VlcFRvb2xiYXIgJiYgIXRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgdG9vbGJhckZvcm06IFNsYXRlRWRpdG9yV3JhcHBlckN1c3RvbVRvb2xiYXJFbGVtZW50W10gPSAoXG4gICAgICB0aGlzLnByb3BzLmN1c3RvbVRvb2xiYXIgfHwgW1xuICAgICAgICBcImJvbGRcIixcbiAgICAgICAgXCJpdGFsaWNcIixcbiAgICAgICAgXCJ1bmRlcmxpbmVcIixcbiAgICAgICAgKFxuICAgICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUaXRsZSB8fFxuICAgICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNRdW90ZSB8fFxuICAgICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNMaW5rcyB8fFxuICAgICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNMaXN0c1xuICAgICAgICApID8gXCJkaXZpZGVyXCIgOiBcIm5vbmVcIixcbiAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0xpbmtzID8gXCJsaW5rXCIgOiBcIm5vbmVcIixcbiAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RpdGxlID8gXCJ0aXRsZVwiIDogXCJub25lXCIsXG4gICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNRdW90ZSA/IFwicXVvdGVcIiA6IFwibm9uZVwiLFxuICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzTGlzdHMgPyBcImJ1bGxldGVkLWxpc3RcIiA6IFwibm9uZVwiLFxuICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzTGlzdHMgPyBcIm51bWJlcmVkLWxpc3RcIiA6IFwibm9uZVwiLFxuICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGFibGVzID8gXCJ0YWJsZVwiIDogXCJub25lXCIsXG4gICAgICAgIChcbiAgICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzSW1hZ2VzIHx8XG4gICAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ZpbGVzIHx8XG4gICAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1ZpZGVvc1xuICAgICAgICApID8gXCJkaXZpZGVyXCIgOiBcIm5vbmVcIixcbiAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ltYWdlcyA/IFwiaW1hZ2VcIiA6IFwibm9uZVwiLFxuICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzRmlsZXMgPyBcImZpbGVcIiA6IFwibm9uZVwiLFxuICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVmlkZW9zID8gXCJ2aWRlb1wiIDogXCJub25lXCIsXG4gICAgICAgIFwiZGl2aWRlclwiLFxuICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzQ29udGFpbmVycyA/IFwiY29udGFpbmVyXCIgOiBcIm5vbmVcIixcbiAgICAgICAgXCJ0ZW1wbGF0ZS10ZXh0XCIsXG4gICAgICAgIFwidGVtcGxhdGUtaHRtbFwiLFxuICAgICAgICB0aGlzLnByb3BzLnRvb2xiYXJFeHRyYXMgJiYgdGhpcy5wcm9wcy50b29sYmFyRXh0cmFzLmxlbmd0aCA/IFwiZXh0cmFzXCIgOiBcIm5vbmVcIixcbiAgICAgIF1cbiAgICApLm1hcCgodikgPT4ge1xuICAgICAgaWYgKHR5cGVvZiAodikgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gdih0aGlzLnByb3BzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHY7XG4gICAgfSk7XG5cbiAgICBjb25zdCBEcmF3ZXJUb2dnbGVDb21wb25lbnQgPSB0aGlzLnByb3BzLlRvb2xiYXJEcmF3ZXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJEcmF3ZXJUb2dnbGVCdXR0b247XG5cbiAgICBsZXQgZHJhd2VyQnV0dG9uID0gKFxuICAgICAgdGhpcy5wcm9wcy5zaG91bGRIYXZlRHJhd2VyKCkgP1xuICAgICAgICA8RHJhd2VyVG9nZ2xlQ29tcG9uZW50XG4gICAgICAgICAgZHJhd2VyT3Blbj17dGhpcy5wcm9wcy5kcmF3ZXJPcGVufVxuICAgICAgICAgIHRvZ2dsZURyYXdlcj17dGhpcy5wcm9wcy50b2dnbGVEcmF3ZXJ9XG4gICAgICAgICAgZGlzam9pbnRlZE1vZGU9e3RoaXMucHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgICAgIC8+IDpcbiAgICAgICAgbnVsbFxuICAgICk7XG5cbiAgICBjb25zdCBjdXN0b21DaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlW10gPSBbXTtcbiAgICBjb25zdCB0b29sYmFyRm9ybU1hcHBlZCA9IChcbiAgICAgIHRvb2xiYXJGb3JtLm1hcCgoZWxlLCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGVsZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IEVsZW1lbnQgPSB0b29sYmFyUmVnaXN0cnlbZWxlXTtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPEVsZW1lbnRcbiAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgICAgICAgIGlzUmVhZHk9e3RoaXMuc3RhdGUuaXNSZWFkeX1cbiAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBleHRyYVZhbHVlID0gdHlwZW9mIGVsZSA9PT0gXCJmdW5jdGlvblwiID8gZWxlKHRoaXMucHJvcHMpIDogZWxlO1xuXG4gICAgICAgICAgaWYgKChleHRyYVZhbHVlIGFzIElUb29sYmFyUHJlc2NlbnNlRWxlbWVudCkuY3VzdG9tQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGN1c3RvbUNoaWxkcmVuLnB1c2goXG4gICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudCBrZXk9e2luZGV4fT5cbiAgICAgICAgICAgICAgICB7KGV4dHJhVmFsdWUgYXMgSVRvb2xiYXJQcmVzY2Vuc2VFbGVtZW50KS5jdXN0b21DaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxUb29sYmFyRXh0cmFcbiAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgICAgICAgIGlzUmVhZHk9e3RoaXMuc3RhdGUuaXNSZWFkeX1cbiAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgZXh0cmE9e2V4dHJhVmFsdWUgYXMgSVRvb2xiYXJQcmVzY2Vuc2VFbGVtZW50fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG5cbiAgICBjb25zdCBUb29sYmFyID0gdGhpcy5wcm9wcy5Ub29sYmFyIHx8IERlZmF1bHRUb29sYmFyO1xuXG4gICAgLy8gbm93IHdlIGNhbiBjcmVhdGUgdGhlIGNvbXBvbmVudCBpdHNlbGZcbiAgICAvLyB0aGVyZSBpcyBub3QgbXVjaCB0byBzYXkgb24gaG93IHRoaXMgYWxsIHdvcmtzXG4gICAgY29uc3QgdG9SZXR1cm4gPSAoXG4gICAgICA8VG9vbGJhclxuICAgICAgICBjdXN0b21DaGlsZHJlbj17Y3VzdG9tQ2hpbGRyZW59XG4gICAgICAgIGRpc2pvaW50ZWRNb2RlPXt0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgICAgICBkcmF3ZXJCdXR0b249e2RyYXdlckJ1dHRvbn1cbiAgICAgICAgZHJhd2VyT3Blbj17dGhpcy5wcm9wcy5kcmF3ZXJPcGVufVxuICAgICAgICBwcm9wcz17e1xuICAgICAgICAgIFtcImRhdGEtdW5ibHVyXCJdOiB0cnVlLFxuICAgICAgICB9fVxuICAgICAgICB0b29sYmFyQ29udGVudHM9e3Rvb2xiYXJGb3JtTWFwcGVkfVxuICAgICAgICByZWY9e3RoaXMuYXBwQmFySGVhZGVyUmVmfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuZGlzam9pbnRlZE1vZGUgJiYgdGhpcy5zdGF0ZS5pc1JlYWR5KSB7XG4gICAgICByZXR1cm4gUmVhY3RET00uY3JlYXRlUG9ydGFsKHRvUmV0dXJuLCBkb2N1bWVudC5ib2R5KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuZGlzam9pbnRlZE1vZGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdG9SZXR1cm47XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgc3RhdGUgZm9yIHRoZSB3cmFwcGVyXG4gKiB0aGUgc3RhdGUgaXMgbmVjZXNzYXJ5IGFzIHRoZSB3cmFwcGVyIGNhbiBob2xkIGRpYWxvZ3Mgb3BlblxuICogYW5kIHRoZSBkcmF3ZXIgaXRzZWxmXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRGVmYXVsdFNsYXRlV3JhcHBlclN0YXRlIHtcbiAgLyoqXG4gICAqIFNwZWNpZmllcyB0aGUgc3RhdGUgb2YgdGhlIGRyYXdlclxuICAgKi9cbiAgZHJhd2VyT3BlbjogYm9vbGVhbjtcblxuICAvKipcbiAgICogU3BlY2lmaWVzIHRoZSBoZWlnaHQgb2YgdGhlIHRvb2xiYXIgZm9yIHVzZVxuICAgKiB3aGVuIHRoZSBkcmF3ZXIgaXMgb3BlbiBpbiBkaXNqb2ludGVkIG1vZGVcbiAgICovXG4gIHRvb2xiYXJIZWlnaHQ6IG51bWJlcjtcblxuICAvKipcbiAgICogQSBjdXN0b20gdG9vbGJhciBzdGF0ZVxuICAgKi9cbiAgdG9vbGJhclN0YXRlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBkcmF3ZXIgYmVpbmcgb3BlbiBvciBjbG9zZWQgaXMgc3RvcmVkIGluIGxvY2FsIHN0b3JhZ2UsIHdoaWNoIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIHNlcnZlclxuICAgKiBzaWRlLCBhbmQgdGhlIGRyYXdlciBhbmltYXRlcyB3aGVuIGl0J3Mgb3BlbmVkIGFuZCBjbG9zZWQsIHNvIHRoaXMgdmFyaWFibGUgaXMgYWx3YXlzIGZhbHNlIGF0IHRoZVxuICAgKiBzdGFydCwgdGhlIGRyYXdlciBpcyBhbHdheXMgY2xvc2VkIGF0IHRoZSBzdGFydCwgaG93ZXZlciwgaWYgd2UgbmVlZCB0byBvcGVuIHRoZSBkcmF3ZXIgYXQgdGhlIHN0YXJ0XG4gICAqIG9uIG1vdW50IHdlIGRvbid0IHdhbnQgYW55IGFuaW1hdGlvbiBzbyB3ZSB0b2dnbGUgdGhpcyBmbGFnIHRlbXBvcmFyaWx5LCBpdCBkb2Vzbid0IG5lZWQgdG8gYmUgcGFydFxuICAgKiBvZiB0aGUgc3RhdGUgYXMgaXQncyBvbmx5IHVzZWQgdGhlcmVcbiAgICovXG4gIG5vQW5pbWF0ZTogYm9vbGVhbjtcblxuICAvKipcbiAgICogV2hlbiBvcGVuaW5nIGEgZGlhbG9nIGFuZCBsb3NpbmcgZm9jdXMgdG8gdGhlIHNsYXRlIHJpY2ggdGV4dCBlZGl0b3IgY29udGVudCBlZGl0YWJsZVxuICAgKiB3ZSBsb3NlIGFjY2VzcyB0byB0aGUgYW5jaG9ycyBhbmQgY3VycmVudCBlbGVtZW50cyBub3cgdGhhdCB3ZSBhcmUgaW4gZm9jdXMgb2Ygc29tZXRoaW5nXG4gICAqIGVsc2Ugc28gd2UgbmVlZCB0byBzdG9yZSB0aGUgZWxlbWVudCB0aGF0IHdhcyB0aGUgY3VycmVudCBlbGVtZW50IHRoYXQgd2FzIGluIGZvY3VzXG4gICAqIGJlZm9yZSB0aGF0IGhhcHBlbmVkXG4gICAqL1xuICBpbmxpbmVFbGVtZW50VGhhdFdhc0N1cnJlbnRCZWZvcmVMb3NpbmdGb2N1czogUmljaEVsZW1lbnQ7XG59XG5cbi8qKlxuICogVGhpcyByZXByZXNlbnRzIHRoZSB1bndyYXBwZWQgY2xhc3MgdGhhdCBpcyB1c2VkIGZvciB0aGUgd3JhcHBlciwgaXQgaXMgbm90XG4gKiB0aGUgZXhwb3J0ZWQgb25lIGJlY2F1c2UgaXQgbmVlZHMgdG8gYmUgd2l0aFN0eWxlcyBmb3Igc3R5bGl6YXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIERlZmF1bHRTbGF0ZVdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PElEZWZhdWx0U2xhdGVXcmFwcGVyUHJvcHMsIERlZmF1bHRTbGF0ZVdyYXBwZXJTdGF0ZT4ge1xuICAvKipcbiAgICogVGhlIHJlZiBvYmplY3QgZm9yIHRoZSBpbnB1dCBvYmplY3QgZm9yIGltYWdlIGlucHV0XG4gICAqL1xuICBwcml2YXRlIGlucHV0SW1hZ2VSZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MSW5wdXRFbGVtZW50PjtcblxuICAvKipcbiAgICogVGhlIHJlZiBvYmplY3QgZm9yIHRoZSBpbnB1dCBvYmplY3QgZm9yIGFueSBmaWxlIGlucHV0XG4gICAqL1xuICBwcml2YXRlIGlucHV0RmlsZVJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxJbnB1dEVsZW1lbnQ+O1xuXG4gIC8qKlxuICAgKiBBIHJlZiB0byB0aGUgY29udGFpbmVyXG4gICAqL1xuICBwcml2YXRlIERyYXdlckNvbnRhaW5lclJlZjogUmVhY3QuUmVmT2JqZWN0PERyYXdlckNvbnRhaW5lcj47XG5cbiAgLyoqXG4gICAqIGEgcmVmIHRvIHRoZSBlZGl0b3JcbiAgICovXG4gIHByaXZhdGUgZWRpdG9yUmVmOiBSZWFjdC5SZWZPYmplY3Q8SFRNTEVsZW1lbnQ+O1xuXG4gIC8qKlxuICAgKiBBIHJlZiBmb3IgdGhlIHRvb2xiYXJcbiAgICovXG4gIHByaXZhdGUgdG9vbGJhclJlZjogUmVhY3QuUmVmT2JqZWN0PFJpY2hUZXh0RWRpdG9yVG9vbGJhcj47XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHJhbmdlIHRoYXQgd2FzIGluIHBsYWNlIGJlZm9yZSBsb3NpbmcgZm9jdXMsIGl0IGlzIHVzZWQgYmVjYXVzZVxuICAgKiB3aGVuIG9wZW5pbmcgc29tZSBkaWFsb2csIHRoZSBpbnNlcnRpb24gb3IgY2hhbmdlIG5lZWRzIHRvIGhhcHBlbiBhdCBhIGdpdmVuXG4gICAqIHNlbGVjdGlvbiByYW5nZSwgYnV0IHRoYXQgaXMgbG9zdCB3aGVuIGxvc2luZyBmb2N1cywgc28gd2UgbmVlZCB0byByZW1lbWJlciBpdFxuICAgKi9cbiAgcHJpdmF0ZSBvcmlnaW5hbFNlbGVjdGlvbkFyZWE6IFJhbmdlO1xuICAvKipcbiAgICogSWYgaW5zdGVhZCBvZiBoYXZpbmcgYSBzZWxlY3Rpb24gYXJlYSB3ZSBoYWQgYSBzZWxlY3Rpb24gcGF0aCBhcyBhIHNlbGVjdGVkIGVsZW1lbnRcbiAgICogYmVjYXVzZSB3ZSB3ZXJlIHdvcmtpZ24gaW4gdGhlIHJhbmdlXG4gICAqL1xuICBwcml2YXRlIG9yaWdpbmFsU2VsZWN0aW9uUGF0aDogUGF0aDtcblxuICAvKipcbiAgICogdGhpcyBpcyB1c2VkIHRvIGVuc3VyZSBhIHJlZm9jdXMgYWZ0ZXIgdGhlIG5hdGl2ZSBkaWFsb2dzIGZvciBmaWxlIGFuZCBmb3IgaW1hZ2UgdGhhdFxuICAgKiBhcmUgdXNlZCB0byBnZXQgYSBmaWxlIGFyZSBjbG9zZWQ7IHdoaWxlIHdlIG5lZWQgdG8gd2FpdCBmb3IgdGhlIGlucHV0IGV2ZW50IHRvIHRyaWdnZXJcbiAgICogd2UgZG9uJ3Qga25vdyBpZiB0aGF0IGhhcHBlbnMgZmlyc3QgYXMgdGhlcmUgYXJlIG5vIGd1YXJhbnRlZXMgc28gd2UgZGVsYXkgaXQgYSBsaXR0bGUgYml0XG4gICAqIGFuZCB0aGUgY2hhbmdlIGV2ZW50IG1pZ2h0IG5vdCBldmVuIHRyaWdnZXJcbiAgICovXG4gIHByaXZhdGUgcmVmb2N1c1RpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0O1xuXG4gIHByaXZhdGUgaXNVbm1vdW50ZWQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgbWF0ZXJpYWwgdWkgYmFzZWQgd3JhcHBlciBmb3IgdGhlIHNsYXRlIGVkaXRvclxuICAgKiBAcGFyYW0gcHJvcHMgdGhlIGJhc2UgcHJvcGVydGllcyB0aGF0IGV2ZXJ5IHdyYXBwZXIgZ2V0cyBleHRlbmRlZCBmb3IgdGhpcyBzcGVjaWZpYyB3cmFwcGVyXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcm9wczogSURlZmF1bHRTbGF0ZVdyYXBwZXJQcm9wcykge1xuXG4gICAgLy8gc3VwZXIgY2FsbGluZ1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIC8vIHNldHVwIHRoZSBpbml0aWFsIHN0YXRlXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlubGluZUVsZW1lbnRUaGF0V2FzQ3VycmVudEJlZm9yZUxvc2luZ0ZvY3VzOiBudWxsLFxuXG4gICAgICAvLyBrZWVwIFNTUiBjb21wYXRpYmlsaXR5IGJ5IGtlZXBpbmcgdGhlIGRyYXdlciBjbG9zZWQgYXQgdGhlIHN0YXJ0XG4gICAgICAvLyBhcyB3ZSBjYW5ub3QgcmVhZCBsb2NhbCBzdG9yYWdlIGluIHRoZSBzZXJ2ZXIgc2lkZVxuICAgICAgZHJhd2VyT3BlbjogZmFsc2UsXG4gICAgICB0b29sYmFySGVpZ2h0OiAwLFxuICAgICAgbm9BbmltYXRlOiB0cnVlLFxuICAgICAgdG9vbGJhclN0YXRlOiBudWxsLFxuICAgIH1cblxuICAgIHRoaXMuaXNVbm1vdW50ZWQgPSBmYWxzZTtcblxuICAgIC8vIGNyZWF0ZSB0aGUgcmVmc1xuICAgIHRoaXMuaW5wdXRJbWFnZVJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuICAgIHRoaXMuaW5wdXRGaWxlUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gICAgdGhpcy5EcmF3ZXJDb250YWluZXJSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgICB0aGlzLnRvb2xiYXJSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgICB0aGlzLmVkaXRvclJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuXG4gICAgLy8gYmluZCBhbGwgdGhlIGZ1bmN0aW9uc1xuICAgIHRoaXMub25IZWlnaHRDaGFuZ2UgPSB0aGlzLm9uSGVpZ2h0Q2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkltYWdlTG9hZCA9IHRoaXMub25JbWFnZUxvYWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uRmlsZUxvYWQgPSB0aGlzLm9uRmlsZUxvYWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlcXVlc3RJbWFnZSA9IHRoaXMucmVxdWVzdEltYWdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZXF1ZXN0RmlsZSA9IHRoaXMucmVxdWVzdEZpbGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uRmlsZUV2ZW50ZWRSZUZvY3VzID0gdGhpcy5vbkZpbGVFdmVudGVkUmVGb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVmb2N1cyA9IHRoaXMucmVmb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2hvdWxkSGF2ZURyYXdlciA9IHRoaXMuc2hvdWxkSGF2ZURyYXdlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMudG9nZ2xlRHJhd2VyID0gdGhpcy50b2dnbGVEcmF3ZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldFRvb2xiYXJTdGF0ZSA9IHRoaXMuc2V0VG9vbGJhclN0YXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZWxlY3RpdmVIYXJkQmx1ciA9IHRoaXMuc2VsZWN0aXZlSGFyZEJsdXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLmtleVVwTGlzdGVuZXIgPSB0aGlzLmtleVVwTGlzdGVuZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQWx0QWN0aW9uVHJpZ2dlcmVkID0gdGhpcy5vbkFsdEFjdGlvblRyaWdnZXJlZC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgcHVibGljIG9uQWx0QWN0aW9uVHJpZ2dlcmVkKHRhYk5hdjogYm9vbGVhbiwgYWN0aW9uOiBcImNsaWNrXCIgfCBcImZvY3VzXCIgfCBcImJsdXJcIikge1xuICAgIGlmIChhY3Rpb24gPT09IFwiYmx1clwiKSB7XG4gICAgICB0aGlzLnByb3BzLmhlbHBlcnMuaGFyZEJsdXIoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25IZWlnaHRDaGFuZ2UobmV3SGVpZ2h0OiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS50b29sYmFySGVpZ2h0ICE9PSBuZXdIZWlnaHQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICB0b29sYmFySGVpZ2h0OiBuZXdIZWlnaHQsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRHVyaW5nIHRoZSBtb3VudCBldmVudFxuICAgKi9cbiAgcHVibGljIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vIGlmIHdlIHNob3VsZCBoYXZlIGEgZHJhd2VyXG4gICAgaWYgKHRoaXMuc2hvdWxkSGF2ZURyYXdlcigpKSB7XG4gICAgICAvLyBhbmQgc2V0IHRoZSBzdGF0ZSBvZiB0aGUgZHJhd2VyIGJhc2VkIG9uIHRoZSBsb2NhbCBzdG9yYWdlIHZhbHVlXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZHJhd2VyT3BlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJTTEFURV9EUkFXRVJfT1BFTlwiKSA9PT0gXCJ0cnVlXCIsXG4gICAgICAgIG5vQW5pbWF0ZTogdHJ1ZSxcbiAgICAgIH0sICgpID0+IHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byB3YWl0IDMwMCBzZWNvbmRzIGJlY2F1c2UgYXMgdXN1YWxcbiAgICAgICAgLy8gc29tZSBidWcgaW4gcmVhY3QgY2F1c2VzIHN0YXRlcyB0byBzdGFja1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAvLyBhbmQgcmUtZW5hYmxlIHRoZSBhbmltYXRpb25cbiAgICAgICAgICAvLyBpZiB0aGUgZHJhd2VyIG9wZW5lZCBpdCB3b24ndCBhbmltYXRlXG4gICAgICAgICAgLy8gdGhpcyBrZWVwcyBTU1IgY29tcGF0aWJpbGl0eVxuICAgICAgICAgICF0aGlzLmlzVW5tb3VudGVkICYmIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbm9BbmltYXRlOiBmYWxzZSxcbiAgICAgICAgICB9KVxuICAgICAgICB9LCAzMDApO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG90aGVyd2lzZSBhbmltYXRpb24gaXMgZW5hYmxlZFxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIG5vQW5pbWF0ZTogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5zZWxlY3RpdmVIYXJkQmx1cik7XG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLnNlbGVjdGl2ZUhhcmRCbHVyKTtcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmtleVVwTGlzdGVuZXIpO1xuICB9XG5cbiAgcHVibGljIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLnNlbGVjdGl2ZUhhcmRCbHVyKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuc2VsZWN0aXZlSGFyZEJsdXIpO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMua2V5VXBMaXN0ZW5lcik7XG4gICAgdGhpcy5pc1VubW91bnRlZCA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMga2V5VXBMaXN0ZW5lcihlOiBLZXlib2FyZEV2ZW50KSB7XG4gICAgaWYgKGUua2V5ID09PSBcIlRhYlwiKSB7XG4gICAgICB0aGlzLnNlbGVjdGl2ZUhhcmRCbHVyKGUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzZWxlY3RpdmVIYXJkQmx1cihlOiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCwgYWx0VGFyZ2V0PzogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBhbHRUYXJnZXQgfHwgKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KTtcbiAgICAvLyB3ZSBhcmUgY3VycmVudGx5IGluIGZvY3VzXG4gICAgaWYgKHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dCkge1xuICAgICAgLy8gaWYgaXQncyBhbiB1bmJsdXJyZWQgdGFyZ2V0LCBzdWNoIGFzIHRoZSB0b29sYmFyXG4gICAgICAvLyBvciB0aGUgZHJhd2VyXG4gICAgICBpZiAodGhpcy5pc1VuYmx1cnJlZCh0YXJnZXQpKSB7XG4gICAgICAgIGlmICh0YXJnZXQudGFnTmFtZSAhPT0gXCJJTlBVVFwiKSB7XG4gICAgICAgICAgLy8gc3RvcCBmcm9tIGxvc2luZyBmb2N1c1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghdGhpcy5pc0luRWRpdG9yKHRhcmdldCkpIHtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGlmIHdlIGFyZSBub3QgaW4gdGhlIGVkaXRvclxuICAgICAgICAvLyBqdXN0IGxvc2UgYWxsIHRoZSBmb2N1c1xuICAgICAgICB0aGlzLnByb3BzLmhlbHBlcnMuaGFyZEJsdXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaXNVbmJsdXJyZWQoZWxlOiBIVE1MRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgIGlmIChcbiAgICAgIGVsZSA9PT0gdGhpcy50b29sYmFyUmVmLmN1cnJlbnQuZ2V0QXBwYmFySGVhZGVyKCkgfHxcbiAgICAgIGVsZSA9PT0gdGhpcy5EcmF3ZXJDb250YWluZXJSZWYuY3VycmVudC5nZXREcmF3ZXJCb2R5KCkgfHxcbiAgICAgIGVsZS5kYXRhc2V0LnVuYmx1clxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGVsZS5wYXJlbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1VuYmx1cnJlZChlbGUucGFyZW50RWxlbWVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGlzSW5FZGl0b3IoZWxlOiBIVE1MRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgIGlmIChcbiAgICAgIGVsZS5kYXRhc2V0Lm5vdEVkaXRvclxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBlbGUgPT09IHRoaXMuZWRpdG9yUmVmLmN1cnJlbnRcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChlbGUucGFyZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNJbkVkaXRvcihlbGUucGFyZW50RWxlbWVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwZWNpZmllcyBvbiB3aGV0aGVyIGl0IHNob3VsZCBoYXZlIGEgZHJhd2VyXG4gICAqIEByZXR1cm5zIGEgYm9vbGVhbiBvbiB0aGlzIGZhY3RcbiAgICovXG4gIHB1YmxpYyBzaG91bGRIYXZlRHJhd2VyKCkge1xuICAgIC8vIGJhc2ljYWxseSBub3QgcmljaCB0ZXh0XG4gICAgaWYgKCF0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0IHx8IHRoaXMucHJvcHMuaGlkZURyYXdlcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBhIGRyYXdlciBpcyBvbmx5IG5lY2Vzc2FyeSBpZiB3ZSBzdXBwb3J0IGFsbCBvZiB0aGVzZVxuICAgIC8vIGJlYXVzZSB0aGF0J3Mgd2hhdCB3ZSBjb25maWd1cmUgaW4gdGhlIGRyYXdlclxuICAgIHJldHVybiAhIShcbiAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUZW1wbGF0aW5nIHx8XG4gICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzQ3VzdG9tU3R5bGVzIHx8XG4gICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzQ29udGFpbmVycyB8fFxuICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0ZWRDdXN0b21zIHx8XG4gICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzUmljaENsYXNzZXMgfHxcbiAgICAgIHRoaXMucHJvcHMuZHJhd2VyRXh0cmFzXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlcyBpbiBvcmRlciB0byBvcGVuIHRoZSBkaWFsb2cgaW4gb3JkZXIgdG8gcmVxdWVzdCBhbiBpbWFnZVxuICAgKiB2aWEgdGhpcyBmaWxlIHVwbG9hZCBkaWFsb2dcbiAgICovXG4gIHB1YmxpYyByZXF1ZXN0SW1hZ2UoKSB7XG4gICAgLy8gd2UgYWRkIHRoZSBmb2N1cyBsaXN0ZW5lciBmb3IgdGhlIHJlZm9jdXMgd2hlbiB0aGUgZGlhbG9nIGNsb3Nlc1xuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMub25GaWxlRXZlbnRlZFJlRm9jdXMsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAvLyBnZXQgdGhlIG9yaWdpbmFsIHNlbGVjdGlvbiBhcmVhXG4gICAgdGhpcy5vcmlnaW5hbFNlbGVjdGlvbkFyZWEgPSB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRUZXh0ID8gdGhpcy5wcm9wcy5oZWxwZXJzLmVkaXRvci5zZWxlY3Rpb24gOiBudWxsO1xuICAgIHRoaXMub3JpZ2luYWxTZWxlY3Rpb25QYXRoID0gdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yIHx8XG4gICAgICB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvciB8fFxuICAgICAgKFxuICAgICAgICB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycyAmJlxuICAgICAgICB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1tcbiAgICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMubGVuZ3RoIC0gMVxuICAgICAgICBdXG4gICAgICApO1xuICAgIC8vIHRyaWdnZXIgYSBjbGlja1xuICAgIHRoaXMuaW5wdXRJbWFnZVJlZi5jdXJyZW50LmNsaWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZXMgaW4gb3JkZXIgdG8gb3BlbiB0aGUgZGlhbG9nIGluIG9yZGVyIHRvIHJlcXVlc3QgYW4gZmlsZVxuICAgKiB2aWEgdGhpcyBmaWxlIHVwbG9hZCBkaWFsb2dcbiAgICovXG4gIHB1YmxpYyByZXF1ZXN0RmlsZSgpIHtcbiAgICAvLyB3ZSBhZGQgdGhlIGZvY3VzIGxpc3RlbmVyIGZvciB0aGUgcmVmb2N1cyB3aGVuIHRoZSBkaWFsb2cgY2xvc2VzXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgdGhpcy5vbkZpbGVFdmVudGVkUmVGb2N1cywgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgIC8vIGdldCB0aGUgb3JpZ2luYWwgc2VsZWN0aW9uIGFyZWFcbiAgICB0aGlzLm9yaWdpbmFsU2VsZWN0aW9uQXJlYSA9IHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFRleHQgPyB0aGlzLnByb3BzLmhlbHBlcnMuZWRpdG9yLnNlbGVjdGlvbiA6IG51bGw7XG4gICAgdGhpcy5vcmlnaW5hbFNlbGVjdGlvblBhdGggPSB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IgfHxcbiAgICAgIHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yIHx8XG4gICAgICAoXG4gICAgICAgIHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzICYmXG4gICAgICAgIHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW1xuICAgICAgICB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycy5sZW5ndGggLSAxXG4gICAgICAgIF1cbiAgICAgICk7XG4gICAgLy8gdHJpZ2dlciBhIGNsaWNrXG4gICAgdGhpcy5pbnB1dEZpbGVSZWYuY3VycmVudC5jbGljaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zL2Nsb3NlcyB0aGUgZHJhd2VyXG4gICAqL1xuICBwdWJsaWMgdG9nZ2xlRHJhd2VyKCkge1xuICAgIC8vIHdlIHRha2UgdGhlIG5ldyBzdGF0ZSB0aGF0IHdlIHdpbGwgYmUgdXNpbmcgYXMgdGhlIG9wcG9zaXRlIG9mICB0aGUgY3VycmVudFxuICAgIGNvbnN0IG5ld1N0YXRlID0gIXRoaXMuc3RhdGUuZHJhd2VyT3BlbjtcblxuICAgIC8vIHB1dCBpdCBpbiB0aGUgc3RhdGVcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRyYXdlck9wZW46IG5ld1N0YXRlLFxuICAgIH0pO1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlKSB7XG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJTTEFURV9EUkFXRVJfT1BFTlwiKSk7XG4gICAgfVxuXG4gICAgLy8gYW5kIHB1dCBpdCBpbiBsb2NhbCBzdG9yYWdlXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJTTEFURV9EUkFXRVJfT1BFTlwiLCBKU09OLnN0cmluZ2lmeShuZXdTdGF0ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZm9jdXNlcyBhcyB0aGUgb3JpZ2luYWwgc2VsZWN0aW9uIGFyZWEgdGhhdCB3YXMgZm9jdXNlZFxuICAgKiBtYWlubHkgdXNlZCBieSBkaWFsb2dzIG9uY2UgdGhleSBoYWF2ZSBjbG9zZWRcbiAgICovXG4gIHB1YmxpYyByZWZvY3VzKCkge1xuICAgIGlmICh0aGlzLmlzVW5tb3VudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3JpZ2luYWxTZWxlY3Rpb25BcmVhKSB7XG4gICAgICB0aGlzLnByb3BzLmhlbHBlcnMuZm9jdXNBdCh0aGlzLm9yaWdpbmFsU2VsZWN0aW9uQXJlYSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9yaWdpbmFsU2VsZWN0aW9uUGF0aCkge1xuICAgICAgdGhpcy5wcm9wcy5oZWxwZXJzLnNlbGVjdFBhdGgodGhpcy5vcmlnaW5hbFNlbGVjdGlvblBhdGgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBvbmNlIHRoZSBkb2N1bWVudCBoYXMgcmVjb3ZlcmVkIGZvY3VzIGZyb20gdGhlIGZpbGVcbiAgICogZGlhbG9nIHRoYXQgaXMgbmF0aXZlIGZvciB0aGUgZmlsZSB1cGxvYWRcbiAgICovXG4gIHB1YmxpYyBvbkZpbGVFdmVudGVkUmVGb2N1cygpIHtcbiAgICAvLyByZW1vdmUgdGhlIG9sZCBsaXN0ZW5lciBmcm9tIHRoZSBib2R5XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgdGhpcy5vbkZpbGVFdmVudGVkUmVGb2N1cywgeyBjYXB0dXJlOiB0cnVlIH0pO1xuXG4gICAgLy8gd2UgZG8gaXQgdGhpcyB3YXkgYmVjYXVzZSB0aGlzIGlzIGEgaGFja3kgd2F5IGFuZCB3ZSBhcmUgbm90IHN1cmVcbiAgICAvLyBvbiB3aGV0aGVyIHRoZSBmb2N1cyBldmVudCB3aWxsIHRyaWdnZXIgYmVmb3JlIHRoZSBpbnB1dCBldmVudCxcbiAgICAvLyB0aGF0IGNvbWVzIGZyb20gdGhlIGZpbGUgaW5wdXQgZGlhbG9nLCB0aGUgaW5wdXQgc2hvdWxkIGNvbWUgZmlyc3RcbiAgICAvLyBhcyB0aGUgZmlsZSBpcyB0byB1cGxvYWQsIGJ1dCB3ZSBtYWtlIG5vIGFzc3VtcHRpb25zXG4gICAgdGhpcy5yZWZvY3VzVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5yZWZvY3VzLCAzMCk7XG4gIH1cblxuICBwdWJsaWMgc2V0VG9vbGJhclN0YXRlKHN0YXRlOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUudG9vbGJhclN0YXRlICE9PSBzdGF0ZSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRvb2xiYXJTdGF0ZTogc3RhdGUgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgb25jZSB0aGUgaW1hZ2UgaW5wdXQgY2FsbHMgdGhlIG9uIGNoYW5nZSBldmVudFxuICAgKiB3aGljaCBtZWFucyBpdCBoYXMgYmVlbiBsb2FkZWQgYnkgdGhlIGlucHV0IGl0c2VsZiBhbmQgaXQncyBhdmFpbGFibGUgZm9yXG4gICAqIHJlYWRpbmdcbiAgICogQHBhcmFtIGUgdGhlIGNoYW5nZSBldmVudCB0aGF0IGNvbnRhaW5zIHRoZSBmaWxlIFxuICAgKi9cbiAgcHVibGljIGFzeW5jIG9uSW1hZ2VMb2FkKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSB7XG4gICAgLy8gcmVtb3ZlIHRoZSBsaXN0ZW5lciBmb3IgdGhlIHdob2xlIGlucHV0IGZvciB0aGUgcmVmb2N1cyBiYWNrIGludG8gdGhlIGZpZWxkXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgdGhpcy5vbkZpbGVFdmVudGVkUmVGb2N1cywgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgIC8vIGNsZWFyIGEgdGltZW91dCBpbiBjYXNlIHRoZXJlIGlzIG9uZSBmb3IgdGhpcyByZWZvY3VzLCBzaW5jZSB0aGUgZXZlbnRcbiAgICAvLyBtaWdodCByZWZlciB0byBhIGNhbmNlbCwgdGhlbiB3ZSBuZWVkIHRvIGVuc3VyZSBpdCBpcyBjYW5jZWxsZWRcbiAgICAvLyBhcyB0aGlzIGZ1bmN0aW9uIGl0c2VsZiB3aWxsIHJlZm9jdXMgYWZ0ZXIgdGhlIGltYWdlIGlzIGluc2VydGVkXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVmb2N1c1RpbWVvdXQpO1xuICAgIC8vIG5vdyB3ZSBwaWNrIHRoZSBpbWFnZVxuICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTtcbiAgICBlLnRhcmdldC52YWx1ZSA9IFwiXCI7XG4gICAgLy8gYW5kIGluc2VydCBpdFxuICAgIGF3YWl0IHRoaXMucHJvcHMuaGVscGVycy5mb2N1c0F0KHRoaXMub3JpZ2luYWxTZWxlY3Rpb25BcmVhIHx8IHRoaXMub3JpZ2luYWxTZWxlY3Rpb25QYXRoKTtcbiAgICB0aGlzLnByb3BzLmhlbHBlcnMuaW5zZXJ0SW1hZ2UoZmlsZSwgZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgb25jZSB0aGUgZmlsZSBpbnB1dCBjYWxscyB0aGUgb24gY2hhbmdlIGV2ZW50XG4gICAqIHdoaWNoIG1lYW5zIGl0IGhhcyBiZWVuIGxvYWRlZCBieSB0aGUgaW5wdXQgaXRzZWxmIGFuZCBpdCdzIGF2YWlsYWJsZSBmb3JcbiAgICogcmVhZGluZ1xuICAgKiBAcGFyYW0gZSB0aGUgY2hhbmdlIGV2ZW50IHRoYXQgY29udGFpbnMgdGhlIGZpbGVcbiAgICovXG4gIHB1YmxpYyBhc3luYyBvbkZpbGVMb2FkKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSB7XG4gICAgLy8gcmVtb3ZlIHRoZSBsaXN0ZW5lciBmb3IgdGhlIHdob2xlIGlucHV0IGZvciB0aGUgcmVmb2N1cyBiYWNrIGludG8gdGhlIGZpZWxkXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgdGhpcy5vbkZpbGVFdmVudGVkUmVGb2N1cywgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgIC8vIGNsZWFyIGEgdGltZW91dCBpbiBjYXNlIHRoZXJlIGlzIG9uZSBmb3IgdGhpcyByZWZvY3VzLCBzaW5jZSB0aGUgZXZlbnRcbiAgICAvLyBtaWdodCByZWZlciB0byBhIGNhbmNlbCwgdGhlbiB3ZSBuZWVkIHRvIGVuc3VyZSBpdCBpcyBjYW5jZWxsZWRcbiAgICAvLyBhcyB0aGlzIGZ1bmN0aW9uIGl0c2VsZiB3aWxsIHJlZm9jdXMgYWZ0ZXIgdGhlIGltYWdlIGlzIGluc2VydGVkXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVmb2N1c1RpbWVvdXQpO1xuICAgIC8vIG5vdyB3ZSBwaWNrIHRoZSBmaWxlXG4gICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdO1xuICAgIGUudGFyZ2V0LnZhbHVlID0gXCJcIjtcbiAgICAvLyBhbmQgaW5zZXJ0IGl0XG4gICAgYXdhaXQgdGhpcy5wcm9wcy5oZWxwZXJzLmZvY3VzQXQodGhpcy5vcmlnaW5hbFNlbGVjdGlvbkFyZWEgfHwgdGhpcy5vcmlnaW5hbFNlbGVjdGlvblBhdGgpO1xuICAgIHRoaXMucHJvcHMuaGVscGVycy5pbnNlcnRGaWxlKGZpbGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YW5kYXJkIHJlbmRlciBmdW5jdGlvbiBmcm9tIHRoZSB3cmFwcGVyXG4gICAqL1xuICBwdWJsaWMgcmVuZGVyKCkge1xuXG4gICAgLy8gZmlyc3Qgd2UgYnVpbGQgdGhlIGlhbWdlIGlucHV0IGlmIHdlIHN1cHBvcnQgaXRcbiAgICBjb25zdCBpbWFnZUlucHV0ID0gdGhpcy5wcm9wcy5zdGF0ZS5pc1JpY2hUZXh0ICYmIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNJbWFnZXMgPyAoXG4gICAgICA8aW5wdXRcbiAgICAgICAgcmVmPXt0aGlzLmlucHV0SW1hZ2VSZWZ9XG4gICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgYWNjZXB0PXt0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzSW1hZ2VzQWNjZXB0fVxuICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiBcIm5vbmVcIiB9fVxuICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkltYWdlTG9hZH1cbiAgICAgIC8+XG4gICAgKSA6IG51bGw7XG5cbiAgICAvLyBub3cgdGhlIGdlbmVyYWwgZmlsZSBpbnB1dFxuICAgIGNvbnN0IGZpbGVJbnB1dCA9IHRoaXMucHJvcHMuc3RhdGUuaXNSaWNoVGV4dCAmJiB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzRmlsZXMgPyAoXG4gICAgICA8aW5wdXRcbiAgICAgICAgcmVmPXt0aGlzLmlucHV0RmlsZVJlZn1cbiAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICBhY2NlcHQ9e3RoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNGaWxlc0FjY2VwdH1cbiAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogXCJub25lXCIgfX1cbiAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgb25DaGFuZ2U9e3RoaXMub25GaWxlTG9hZH1cbiAgICAgIC8+XG4gICAgKSA6IG51bGw7XG5cbiAgICAvLyB0aGUgZmlsZSBsb2FkIGVycm9yIGRpYWxvZyB0aGF0IHNob3dzIGFuIGVycm9yXG4gICAgLy8gYmFzZWQgb24gdGhlIGN1cnJlbnQgbG9hZCBlcnJvclxuICAgIGNvbnN0IGZpbGVMb2FkRXJyb3JEaWFsb2cgPVxuICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5pc1JpY2hUZXh0ICYmXG4gICAgICAgIChcbiAgICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzSW1hZ2VzIHx8XG4gICAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ZpbGVzXG4gICAgICAgICkgP1xuICAgICAgICAoXG4gICAgICAgICAgPEZpbGVMb2FkRXJyb3JEaWFsb2dcbiAgICAgICAgICAgIGN1cnJlbnRMb2FkRXJyb3I9e3RoaXMucHJvcHMuY3VycmVudExvYWRFcnJvcn1cbiAgICAgICAgICAgIGRpc21pc3NDdXJyZW50TG9hZEVycm9yPXt0aGlzLnByb3BzLmRpc21pc3NDdXJyZW50TG9hZEVycm9yfVxuICAgICAgICAgICAgaTE4bkdlbmVyaWNFcnJvcj17KHRoaXMucHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5nZW5lcmljRXJyb3J9XG4gICAgICAgICAgICBpMThuT2s9eyh0aGlzLnByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykub2t9XG4gICAgICAgICAgICBEaWFsb2c9e3RoaXMucHJvcHMuRGlhbG9nfVxuICAgICAgICAgIC8+XG4gICAgICAgICkgOiBudWxsO1xuXG4gICAgbGV0IHRvb2xiYXIgPSAoXG4gICAgICA8UmljaFRleHRFZGl0b3JUb29sYmFyXG4gICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICB0b29sYmFyU3RhdGU9e3RoaXMuc3RhdGUudG9vbGJhclN0YXRlfVxuICAgICAgICB0b29sYmFySGVpZ2h0PXt0aGlzLnN0YXRlLnRvb2xiYXJIZWlnaHR9XG4gICAgICAgIHJlZj17dGhpcy50b29sYmFyUmVmfVxuICAgICAgICBvbkhlaWdodENoYW5nZT17dGhpcy5vbkhlaWdodENoYW5nZX1cbiAgICAgICAgcmVxdWVzdEltYWdlPXt0aGlzLnJlcXVlc3RJbWFnZX1cbiAgICAgICAgcmVxdWVzdEZpbGU9e3RoaXMucmVxdWVzdEZpbGV9XG4gICAgICAgIHNob3VsZEhhdmVEcmF3ZXI9e3RoaXMuc2hvdWxkSGF2ZURyYXdlcn1cbiAgICAgICAgZHJhd2VyT3Blbj17dGhpcy5zdGF0ZS5kcmF3ZXJPcGVufVxuICAgICAgICB0b2dnbGVEcmF3ZXI9e3RoaXMudG9nZ2xlRHJhd2VyfVxuICAgICAgICBzZXRUb29sYmFyU3RhdGU9e3RoaXMuc2V0VG9vbGJhclN0YXRlfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgbGV0IGV4dHJhQ2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSA9IG51bGw7XG4gICAgaWYgKHRoaXMucHJvcHMuY3VzdG9tRXh0cmFDaGlsZHJlbikge1xuICAgICAgY29uc3QgW2NoYXJhY3RlckNvdW50LCB3b3JkQ291bnRdID0gY291bnRTaXplQW5kV29yZHModGhpcy5wcm9wcy5zdGF0ZS50cmVlVmFsdWUpO1xuICAgICAgZXh0cmFDaGlsZHJlbiA9IHRoaXMucHJvcHMuY3VzdG9tRXh0cmFDaGlsZHJlbihjaGFyYWN0ZXJDb3VudCwgd29yZENvdW50KTtcbiAgICB9XG5cbiAgICBsZXQgZHJhd2VyQ29udGFpbmVyID0gKFxuICAgICAgPERyYXdlckNvbnRhaW5lclxuICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgcmVmPXt0aGlzLkRyYXdlckNvbnRhaW5lclJlZn1cbiAgICAgICAgZHJhd2VyT3Blbj17dGhpcy5zdGF0ZS5kcmF3ZXJPcGVufVxuICAgICAgICBub0FuaW1hdGU9e3RoaXMuc3RhdGUubm9BbmltYXRlfVxuICAgICAgICB0b29sYmFySGVpZ2h0PXt0aGlzLnN0YXRlLnRvb2xiYXJIZWlnaHR9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBEaXNqb2ludGVkRWRpdG9yQ29udGFpbmVyID0gdGhpcy5wcm9wcy5EaXNqb2ludGVkRWRpdG9yQ29udGFpbmVyIHx8IFwiZGl2XCI7XG4gICAgY29uc3QgRWRpdG9yQ29udGFpbmVyID0gdGhpcy5wcm9wcy5FZGl0b3JDb250YWluZXIgfHwgRGVmYXVsdEVkaXRvckNvbnRhaW5lcjtcbiAgICBjb25zdCBEaXNqb2ludGVkRWRpdG9yID0gdGhpcy5wcm9wcy5EaXNqb2ludGVkRWRpdG9yIHx8IFwiZGl2XCI7XG4gICAgY29uc3QgRWRpdG9yID0gdGhpcy5wcm9wcy5FZGl0b3IgfHwgXCJkaXZcIjtcblxuICAgIGNvbnN0IGJhc2ljQ2xhc3NOYW1lID0gXCJyaWNoLXRleHQgZWRpdG9yIFwiICtcbiAgICAgICh0aGlzLnByb3BzLnN0YXRlLmlzUmljaFRleHQgPyBcInJpY2gtdGV4dC1tb2RlXCIgOiBcInBsYWluLXRleHQtbW9kZVwiKSArXG4gICAgICAodGhpcy5wcm9wcy5zdGF0ZS5mb2N1c2VkID8gXCIgZm9jdXNlZFwiIDogXCJcIikgK1xuICAgICAgKHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFZhbGlkID8gXCIgdmFsaWRcIiA6IFwiIGludmFsaWRcIikgK1xuICAgICAgKHRoaXMucHJvcHMuZGlzYWJsZWQgPyBcIiBkaXNhYmxlZFwiIDogXCIgZW5hYmxlZFwiKTtcblxuICAgIGxldCBib3g6IFJlYWN0LlJlYWN0Tm9kZSA9IG51bGw7XG4gICAgaWYgKHRoaXMucHJvcHMuZGlzam9pbnRlZE1vZGUpIHtcbiAgICAgIGJveCA9IChcbiAgICAgICAgPERpc2pvaW50ZWRFZGl0b3JDb250YWluZXIgcmVmPXt0aGlzLmVkaXRvclJlZiBhcyBhbnl9IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yRGlzam9pbnRlZEVkaXRvckNvbnRhaW5lclwiPlxuICAgICAgICAgIDxEaXNqb2ludGVkRWRpdG9yIGNsYXNzTmFtZT17YmFzaWNDbGFzc05hbWV9PlxuICAgICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgICAgPC9EaXNqb2ludGVkRWRpdG9yPlxuICAgICAgICAgIDxkaXYgZGF0YS1ub3QtZWRpdG9yPXt0cnVlfSBzdHlsZT17eyB3aWR0aDogXCIxMDAlXCIgfX0+XG4gICAgICAgICAgICB7ZXh0cmFDaGlsZHJlbn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9EaXNqb2ludGVkRWRpdG9yQ29udGFpbmVyPlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYm94ID0gKFxuICAgICAgICA8PlxuICAgICAgICAgIDxFZGl0b3JcbiAgICAgICAgICAgIHJlZj17dGhpcy5lZGl0b3JSZWYgYXMgYW55fVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtiYXNpY0NsYXNzTmFtZX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICA8L0VkaXRvcj5cbiAgICAgICAgICB7ZXh0cmFDaGlsZHJlbn1cbiAgICAgICAgPC8+XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIHdlIGhhdmUgcmVhY3Rpb25lciBzcGVjaWZpY2F0aW9uc1xuICAgIGlmICh0aGlzLnByb3BzLkJhc2VXcmFwcGVyKSB7XG4gICAgICBjb25zdCBCYXNlV3JhcHBlciA9IHRoaXMucHJvcHMuQmFzZVdyYXBwZXI7XG4gICAgICBib3ggPSAoXG4gICAgICAgIDxCYXNlV3JhcHBlclxuICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgIGRyYXdlck9wZW49e3RoaXMuc3RhdGUuZHJhd2VyT3Blbn1cbiAgICAgICAgPlxuICAgICAgICAgIHtib3h9XG4gICAgICAgIDwvQmFzZVdyYXBwZXI+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLlRvb2xiYXJXcmFwcGVyKSB7XG4gICAgICBjb25zdCBUb29sYmFyV3JhcHBlciA9IHRoaXMucHJvcHMuVG9vbGJhcldyYXBwZXI7XG5cbiAgICAgIHRvb2xiYXIgPSAoXG4gICAgICAgIDxUb29sYmFyV3JhcHBlciB7Li4udGhpcy5wcm9wc30gZHJhd2VyT3Blbj17dGhpcy5zdGF0ZS5kcmF3ZXJPcGVufT5cbiAgICAgICAgICB7dG9vbGJhcn1cbiAgICAgICAgPC9Ub29sYmFyV3JhcHBlcj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuRHJhd2VyV3JhcHBlcikge1xuICAgICAgY29uc3QgRHJhd2VyV3JhcHBlciA9IHRoaXMucHJvcHMuRHJhd2VyV3JhcHBlcjtcblxuICAgICAgZHJhd2VyQ29udGFpbmVyID0gKFxuICAgICAgICA8RHJhd2VyV3JhcHBlciB7Li4udGhpcy5wcm9wc30gZHJhd2VyT3Blbj17dGhpcy5zdGF0ZS5kcmF3ZXJPcGVufT5cbiAgICAgICAgICB7ZHJhd2VyQ29udGFpbmVyfVxuICAgICAgICA8L0RyYXdlcldyYXBwZXI+XG4gICAgICApO1xuICAgIH1cblxuICAgIGxldCB0b1JldHVybjogUmVhY3QuUmVhY3ROb2RlO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuZGlzam9pbnRlZE1vZGUpIHtcbiAgICAgIHRvUmV0dXJuID0gKFxuICAgICAgICA8PlxuICAgICAgICAgIHt0b29sYmFyfVxuICAgICAgICAgIHtib3h9XG4gICAgICAgICAge2RyYXdlckNvbnRhaW5lcn1cbiAgICAgICAgICB7Lyoge2ZpbGVMb2FkRXJyb3JEaWFsb2dUT0RPfSAqL31cbiAgICAgICAgICB7aW1hZ2VJbnB1dH1cbiAgICAgICAgICB7ZmlsZUlucHV0fVxuICAgICAgICA8Lz5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvUmV0dXJuID0gKFxuICAgICAgICA8PlxuICAgICAgICAgIHt0b29sYmFyfVxuICAgICAgICAgIDxFZGl0b3JDb250YWluZXI+XG4gICAgICAgICAgICB7Ym94fVxuICAgICAgICAgICAge2RyYXdlckNvbnRhaW5lcn1cbiAgICAgICAgICA8L0VkaXRvckNvbnRhaW5lcj5cbiAgICAgICAgICB7Lyoge2ZpbGVMb2FkRXJyb3JEaWFsb2dUT0RPfSAqL31cbiAgICAgICAgICB7aW1hZ2VJbnB1dH1cbiAgICAgICAgICB7ZmlsZUlucHV0fVxuICAgICAgICA8Lz5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuRmluYWxXcmFwcGVyKSB7XG4gICAgICBjb25zdCBGaW5hbFdyYXBwZXIgPSB0aGlzLnByb3BzLkZpbmFsV3JhcHBlcjtcblxuICAgICAgdG9SZXR1cm4gPSAoXG4gICAgICAgIDxGaW5hbFdyYXBwZXIgey4uLnRoaXMucHJvcHN9IGRyYXdlck9wZW49e3RoaXMuc3RhdGUuZHJhd2VyT3Blbn0+XG4gICAgICAgICAge3RvUmV0dXJufVxuICAgICAgICA8L0ZpbmFsV3JhcHBlcj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvUmV0dXJuO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlckNvbnRhaW5lclByb3BzIGV4dGVuZHMgSURlZmF1bHRTbGF0ZVdyYXBwZXJQcm9wcyB7XG4gIGRyYXdlck9wZW46IGJvb2xlYW47XG4gIHRvb2xiYXJIZWlnaHQ6IG51bWJlcjtcbiAgbm9BbmltYXRlOiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgSURyYXdlckNvbnRhaW5lclN0YXRlIHtcbiAgaXNSZWFkeTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRHJhd2VyQ29udGFpbmVyQm94UHJvcHMge1xuICAvKipcbiAgICogVGhlIGhlaWdodCBvZiB0aGUgdG9vbGJhciB0aGF0XG4gICAqIGlzIGN1cnJlbnRseSBiZWluZyBvbiB1c2VcbiAgICovXG4gIHRvb2xiYXJIZWlnaHQ6IG51bWJlcjtcbiAgLyoqXG4gICAqIFdoZXRoZXIgZGlzam9pbnRlZCBtb2RlIGlzIGJlaW5nIHVzZWRcbiAgICovXG4gIGRpc2pvaW50ZWRNb2RlOiBib29sZWFuO1xuICAvKipcbiAgICogSWYgdGhlIGRyYXdlciBpcyBhbHJlYWR5IGNvbmZpcm1lZCB0byBiZSBvcGVuXG4gICAqIGRvIG5vdCBwZXJmb3JtIGFueSBvcGVuIG9yIGNsb3NlIGFuaW1hdGlvblxuICAgKi9cbiAgbm9BbmltYXRlOiBib29sZWFuO1xuICAvKipcbiAgICogVGhlIGNoaWxkcmVuIHJlcHJlc2VudCBhbGwgb2Ygd2hhdFxuICAgKiB0aGUgZHJhd2VyIGJveCBjb250YWluc1xuICAgKi9cbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGRyYXdlciBzaG91bGQgYmUgb3BlblxuICAgKiBhY2NvcmRpbmcgdG8gYSB0b29sYmFyIGFjdGlvblxuICAgKi9cbiAgZHJhd2VyT3BlbjogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBBIHNwYWNlciBpcyBiYXNpY2FsbHkgYSBzbWFsbCBjaGVycnkgb24gdG9wXG4gKiBhZGRlZCB0byBmaXQgdGhlIHRvb2xiYXJoZWlnaHQgYXJvdW5kIHRoZSBkcmF3ZXIgY29udGFpbmVyXG4gKiBpZiBuZWNlc3NhcnksIG9ubHkgdXNlZnVsIG9uIGRpc2pvaW50ZWQgbW9kZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3ZXJTcGFjZXJQcm9wcyB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIGRpc2pvaW50ZWQgbW9kZSBpcyBiZWluZyB1c2VkXG4gICAqL1xuICBkaXNqb2ludGVkTW9kZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSBoZWlnaHQgb2YgdGhlIHRvb2xiYXIgdGhhdFxuICAgKiBpcyBjdXJyZW50bHkgYmVpbmcgb24gdXNlXG4gICAqL1xuICB0b29sYmFySGVpZ2h0OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlckJvZHlQcm9wcyB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIGRpc2pvaW50ZWQgbW9kZSBpcyBiZWluZyB1c2VkXG4gICAqL1xuICBkaXNqb2ludGVkTW9kZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSBoZWlnaHQgb2YgdGhlIHRvb2xiYXIgdGhhdFxuICAgKiBpcyBjdXJyZW50bHkgYmVpbmcgb24gdXNlXG4gICAqL1xuICB0b29sYmFySGVpZ2h0OiBudW1iZXI7XG4gIC8qKlxuICAgKiBUaGUgY29udGVudCBvZiB0aGUgZHJhd2VyIGl0c2VsZlxuICAgKi9cbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGRyYXdlciBpcyBvcGVuIG9yIG5vdFxuICAgKi9cbiAgZHJhd2VyT3BlbjogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgRHJhd2VyQ29udGFpbmVyQm94Q29tcG9uZW50ID0gUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJhd2VyQ29udGFpbmVyQm94UHJvcHM+O1xuZXhwb3J0IHR5cGUgRHJhd2VyU3BhY2VyQ29tcG9uZW50ID0gUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJhd2VyU3BhY2VyUHJvcHM+O1xuZXhwb3J0IHR5cGUgRHJhd2VyQm9keUNvbXBvbmVudCA9IFJlYWN0LkNvbXBvbmVudFR5cGU8SURyYXdlckJvZHlQcm9wcz47XG5cbmNvbnN0IERlZmF1bHREcmF3ZXJCb2R5ID0gUmVhY3QuZm9yd2FyZFJlZigocHJvcHM6IElEcmF3ZXJCb2R5UHJvcHMsIHJlZjogUmVhY3QuRm9yd2FyZGVkUmVmPEhUTUxFbGVtZW50PikgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXYgcmVmPXtyZWYgYXMgYW55fSBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckRyYXdlckJvZHlcIj5cbiAgICAgIHtwcm9wcy5kcmF3ZXJPcGVuID8gcHJvcHMuY2hpbGRyZW4gOiBudWxsfVxuICAgIDwvZGl2PlxuICApO1xufSlcblxuZnVuY3Rpb24gRGVmYXVsdERyYXdlclNwYWNlcihwcm9wczogSURyYXdlclNwYWNlclByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JEcmF3ZXJBcHBiYXJTcGFjZXJcIlxuICAgICAgc3R5bGU9e3sgaGVpZ2h0OiBwcm9wcy50b29sYmFySGVpZ2h0LCBmbGV4OiBcIjAgMCBcIiArIHByb3BzLnRvb2xiYXJIZWlnaHQgKyBcInB4XCIgfX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBEZWZhdWx0RHJhd2VyQ29udGFpbmVyQm94KHByb3BzOiBJRHJhd2VyQ29udGFpbmVyQm94UHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e1xuICAgICAgICAocHJvcHMuZHJhd2VyT3BlbiA/IFwib3BlbiBcIiA6IFwiXCIpICtcbiAgICAgICAgKHByb3BzLmRpc2pvaW50ZWRNb2RlID8gXCJzbGF0ZUVkaXRvckRyYXdlckZpeGVkXCIgOiBcInNsYXRlRWRpdG9yRHJhd2VyXCIpICtcbiAgICAgICAgKHByb3BzLm5vQW5pbWF0ZSA/IFwiIHNsYXRlRWRpdG9yRHJhd2VyTm9BbmltYXRlXCIgOiBcIlwiKVxuICAgICAgfVxuICAgID5cbiAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuY2xhc3MgRHJhd2VyQ29udGFpbmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElEcmF3ZXJDb250YWluZXJQcm9wcywgSURyYXdlckNvbnRhaW5lclN0YXRlPiB7XG4gIHByaXZhdGUgZWRpdG9yRHJhd2VyQm9keVJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50PjtcbiAgY29uc3RydWN0b3IocHJvcHM6IElEcmF3ZXJDb250YWluZXJQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpc1JlYWR5OiBmYWxzZSxcbiAgICB9XG5cbiAgICB0aGlzLmVkaXRvckRyYXdlckJvZHlSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgfVxuICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpc1JlYWR5OiB0cnVlLFxuICAgIH0pO1xuICB9XG4gIHB1YmxpYyBnZXREcmF3ZXJCb2R5KCkge1xuICAgIHJldHVybiB0aGlzLmVkaXRvckRyYXdlckJvZHlSZWYuY3VycmVudDtcbiAgfVxuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlICYmICF0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IERyYXdlckNvbnRhaW5lckJveCA9IHRoaXMucHJvcHMuRHJhd2VyQ29udGFpbmVyQm94IHx8IERlZmF1bHREcmF3ZXJDb250YWluZXJCb3g7XG4gICAgY29uc3QgRHJhd2VyU3BhY2VyID0gdGhpcy5wcm9wcy5EcmF3ZXJTcGFjZXIgfHwgRGVmYXVsdERyYXdlclNwYWNlcjtcbiAgICBjb25zdCBEcmF3ZXJCb2R5ID0gdGhpcy5wcm9wcy5EcmF3ZXJCb2R5IHx8IERlZmF1bHREcmF3ZXJCb2R5O1xuXG4gICAgY29uc3QgdG9SZXR1cm4gPSAoXG4gICAgICA8RHJhd2VyQ29udGFpbmVyQm94XG4gICAgICAgIGRpc2pvaW50ZWRNb2RlPXt0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgICAgICBkcmF3ZXJPcGVuPXt0aGlzLnByb3BzLmRyYXdlck9wZW59XG4gICAgICAgIG5vQW5pbWF0ZT17dGhpcy5wcm9wcy5ub0FuaW1hdGV9XG4gICAgICAgIHRvb2xiYXJIZWlnaHQ9e3RoaXMucHJvcHMudG9vbGJhckhlaWdodH1cbiAgICAgID5cbiAgICAgICAge1xuICAgICAgICAgIHRoaXMucHJvcHMuZGlzam9pbnRlZE1vZGUgJiYgdGhpcy5wcm9wcy5kcmF3ZXJPcGVuID9cbiAgICAgICAgICAgIDxEcmF3ZXJTcGFjZXJcbiAgICAgICAgICAgICAgZGlzam9pbnRlZE1vZGU9e3RoaXMucHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgICAgICAgICAgIHRvb2xiYXJIZWlnaHQ9e3RoaXMucHJvcHMudG9vbGJhckhlaWdodH1cbiAgICAgICAgICAgIC8+IDpcbiAgICAgICAgICAgIG51bGxcbiAgICAgICAgfVxuICAgICAgICA8RHJhd2VyQm9keVxuICAgICAgICAgIHJlZj17dGhpcy5lZGl0b3JEcmF3ZXJCb2R5UmVmfVxuICAgICAgICAgIGRpc2pvaW50ZWRNb2RlPXt0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgICAgICAgIHRvb2xiYXJIZWlnaHQ9e3RoaXMucHJvcHMudG9vbGJhckhlaWdodH1cbiAgICAgICAgICBkcmF3ZXJPcGVuPXt0aGlzLnByb3BzLmRyYXdlck9wZW59XG4gICAgICAgID5cbiAgICAgICAgICA8V3JhcHBlckRyYXdlciB7Li4udGhpcy5wcm9wc30vPlxuICAgICAgICA8L0RyYXdlckJvZHk+XG4gICAgICA8L0RyYXdlckNvbnRhaW5lckJveD5cbiAgICApO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuZGlzam9pbnRlZE1vZGUpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmlzUmVhZHkpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0RE9NLmNyZWF0ZVBvcnRhbCh0b1JldHVybiwgZG9jdW1lbnQuYm9keSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRvUmV0dXJuO1xuICAgIH1cbiAgfVxufVxuIiwgIi8qKlxuICogVGhpcyBmaWxlIHByb3ZpZGVzIHRoZSBkcmF3ZXIgY29udGVudCB0aGF0IGV4aXN0cyBzaWRlIHRvIHRoZSByaWNoIHRleHQgZWRpdG9yXG4gKiB3aGVuIGl0IGlzIGFsbG93ZWQgdG8gaG9sZCBhIGRyYXdlciwgdGhlIGRyYXdlciBjb250YWlucyBhIHJhbmdlIG9mIG9wdGlvbnMgdG8gZW5hYmxlXG4gKiB0ZW1wbGF0aW5nIG9yIGN1c3RvbSBzdHlsaW5nXG4gKiBAbW9kdWxlXG4gKi9cblxuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJRHJhd2VyQ29udGFpbmVyUHJvcHMgfSBmcm9tIFwiLi4vd3JhcHBlclwiO1xuLy8gaW1wb3J0IHsgR2VuZXJhbE9wdGlvbnMgfSBmcm9tIFwiLi9nZW5lcmFsXCI7XG4vLyBpbXBvcnQgeyBTdHlsZXNPcHRpb25zIH0gZnJvbSBcIi4vc3R5bGVzXCI7XG4vLyBpbXBvcnQgeyBBY3Rpb25zT3B0aW9ucyB9IGZyb20gXCIuL2FjdGlvbnNcIjtcbi8vIGltcG9ydCB7IFRlbXBsYXRpbmdPcHRpb25zIH0gZnJvbSBcIi4vdGVtcGxhdGluZ1wiO1xuaW1wb3J0IHsgSU5vZGVJbmZvLCBnZXRJbmZvRm9yIH0gZnJvbSBcIi4uLy4uXCI7XG5cblxuZXhwb3J0IGludGVyZmFjZSBJV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVByb3BzIHtcbiAgaW5mbzogSU5vZGVJbmZvO1xuICBlbnRpcmVQYXRoOiBBcnJheTx7IGluZm86IElOb2RlSW5mbzsgcGF0aDogc3RyaW5nW10gfT47XG4gIGlzQ3VycmVudDogYm9vbGVhbjtcbiAgaW5kZXg6IG51bWJlcjtcbiAgb25TZWxlY3Q6ICgpID0+IHZvaWQ7XG59XG5cbmZ1bmN0aW9uIERlZmF1bHRXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlKHByb3BzOiBJV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPGg2PlxuICAgICAge1xuICAgICAgICBwcm9wcy5pbmZvLmlzSW50ZXJhY3RpdmUgPyAoXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlSWNvblJ0bE9ubHlcIj57U3RyaW5nLmZyb21DaGFyQ29kZSg5MDk0KX08L3NwYW4+XG4gICAgICAgICkgOiBudWxsXG4gICAgICB9XG4gICAgICA8c3BhblxuICAgICAgICBjbGFzc05hbWU9e3Byb3BzLmlzQ3VycmVudCA/IFwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlU2VsZWN0ZWRcIiA6IFwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlXCJ9XG4gICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICBhcmlhLWN1cnJlbnQ9e3Byb3BzLmlzQ3VycmVudH1cbiAgICAgICAgb25DbGljaz17cHJvcHMub25TZWxlY3R9XG4gICAgICA+XG4gICAgICAgIHtwcm9wcy5pbmZvLm5hbWV9XG4gICAgICA8L3NwYW4+XG4gICAgICB7XG4gICAgICAgIHByb3BzLmluZm8uaXNJbnRlcmFjdGl2ZSA/IChcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVJY29uTHRyT25seVwiPntTdHJpbmcuZnJvbUNoYXJDb2RlKDkwOTQpfTwvc3Bhbj5cbiAgICAgICAgKSA6IG51bGxcbiAgICAgIH1cbiAgICAgIHtcbiAgICAgICAgcHJvcHMuaXNDdXJyZW50ID8gbnVsbCA6IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlSWNvbkx0ck9ubHlcIj57U3RyaW5nLmZyb21DaGFyQ29kZSgxMTEwNil9PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlSWNvblJ0bE9ubHlcIj57U3RyaW5nLmZyb21DaGFyQ29kZSgxMTEwNil9PC9zcGFuPlxuICAgICAgICAgIDwvPlxuICAgICAgICApXG4gICAgICB9XG4gICAgPC9oNj5cbiAgKVxufVxuXG5mdW5jdGlvbiBEZWZhdWx0V3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVdyYXBwZXIocHJvcHM6IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVXcmFwcGVyXCI+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbnR5cGUgSU9wdGlvblR5cGUgPSBcIk1BSU5cIiB8IFwiU1RZTEVTXCIgfCBcIkFDVElPTlNcIiB8IFwiVEVNUExBVElOR1wiO1xudHlwZSBTZXRPcHRpb25UeXBlRm4gPSAodjogSU9wdGlvblR5cGUpID0+IHZvaWQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyUHJvcHMge1xuICBhY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb246IElPcHRpb25UeXBlO1xuICBzZWxlY3RlZE9wdGlvbjogSU9wdGlvblR5cGU7XG4gIHNldFNlbGVjdGVkT3B0aW9uOiBTZXRPcHRpb25UeXBlRm47XG4gIHNldEFjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbjogU2V0T3B0aW9uVHlwZUZuO1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElXcmFwcGVyRHJhd2VyVGFic1Byb3BzIHtcbiAgYWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uOiBJT3B0aW9uVHlwZTtcbiAgc2VsZWN0ZWRPcHRpb246IElPcHRpb25UeXBlO1xuICBzZXRTZWxlY3RlZE9wdGlvbjogU2V0T3B0aW9uVHlwZUZuO1xuICBzZXRBY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb246IFNldE9wdGlvblR5cGVGbjtcbiAgb3B0aW9uczogQXJyYXk8eyBpZDogc3RyaW5nOyBsYWJlbDogc3RyaW5nOyB9PlxufVxuXG5leHBvcnQgZnVuY3Rpb24gRGVmYXVsdFdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyKHByb3BzOiBJV3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXJQcm9wcykge1xuICByZXR1cm4gcHJvcHMuY2hpbGRyZW4gYXMgYW55O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRGVmYXVsdFdyYXBwZXJEcmF3ZXJUYWJzKHByb3BzOiBJV3JhcHBlckRyYXdlclRhYnNQcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyVGFic1wiPlxuICAgICAge3Byb3BzLm9wdGlvbnMubWFwKCh2KSA9PiAoXG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5zZXRTZWxlY3RlZE9wdGlvbi5iaW5kKG51bGwsIHYuaWQpfVxuICAgICAgICAgIGtleT17di5pZH1cbiAgICAgICAgICBjbGFzc05hbWU9e3Byb3BzLnNlbGVjdGVkT3B0aW9uID09PSB2LmlkID8gXCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJUYWJTZWxlY3RlZFwiIDogXCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJUYWJcIn1cbiAgICAgICAgPlxuICAgICAgICAgIHt2LmxhYmVsfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICkpfVxuICAgIDwvZGl2PlxuICApO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHdyYXBwZXIgZHJhd2VyIGl0c2VsZlxuICogQHBhcmFtIHByb3BzIGl0IHRha2VzIHRoZSBlbnRpcmUgd3JhcHBlciBwcm9wcyB3aXRoIHRoZSBzdHlsZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFdyYXBwZXJEcmF3ZXIocHJvcHM6IElEcmF3ZXJDb250YWluZXJQcm9wcykge1xuICAvLyB3ZSBncmFiIHRoaXMgZnJvbSBsb2NhbCBzdG9yYWdlLCB0aGlzIHdvbid0IGFmZmVjdCBTU1IgYmVjYXVzZSB0aGUgZHJhd2VyIHdvbid0XG4gIC8vIGV2ZXIgcmVuZGVyIGluIHRoZSBzZXJ2ZXIgc2lkZSwgaXQncyBjbGllbnQgc2lkZSBvbmx5LCBpdCdzIGFsd2F5cyB0ZWNobmljYWxseSBjbG9zZWRcbiAgLy8gb24gdGhlIHNlcnZlciBzaWRlXG4gIGNvbnN0IFtsb2NhdGlvbiwgc2V0TG9jYXRpb25dID0gdXNlU3RhdGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJTTEFURV9EUkFXRVJfTEFTVF9MT0NBVElPTlwiKSB8fCBcIk1BSU5cIiBhcyBJT3B0aW9uVHlwZSk7XG4gIGNvbnN0IFthY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb24sIHVzZUFjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbl0gPSB1c2VTdGF0ZShudWxsIGFzIElPcHRpb25UeXBlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghcHJvcHMuZHJhd2VyT3Blbikge1xuICAgICAgdXNlQWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uKG51bGwpO1xuICAgIH1cbiAgfSwgW3Byb3BzLmRyYXdlck9wZW5dKTtcblxuICAvLyB1cGRhdGUgdGhlIGdpdmVuIGxvY2F0aW9uXG4gIGNvbnN0IHNldExvY2F0aW9uQ2FsbGJhY2sgPSB1c2VDYWxsYmFjaygodmFsdWU6IElPcHRpb25UeXBlKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJTTEFURV9EUkFXRVJfTEFTVF9MT0NBVElPTlwiLCB2YWx1ZSk7XG4gICAgdXNlQWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uKHZhbHVlKTtcbiAgICBzZXRMb2NhdGlvbih2YWx1ZSk7XG4gIH0sIFtdKTtcblxuICAvLyBub3cgd2UgbmVlZCB0byBidWlsZCB0aGUgc2V0dGluZ3NcbiAgbGV0IHNldHRpbmdzRm9yTm9kZTogUmVhY3QuUmVhY3ROb2RlID0gbnVsbDtcbiAgbGV0IHRpdGxlRm9yTm9kZTogUmVhY3QuUmVhY3ROb2RlID0gbnVsbDtcblxuICAvLyBhbmQgdGhhdCdzIGRvbmUgYmFzZWQgb24gdGhlIHNlbGVjdGVkIG5vZGVcbiAgaWYgKHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQpIHtcbiAgICAvLyBhbmQgYWNjb3JkaW5nIHRvIHRoYXQgZGVjaWRlIHdoaWNoIHBhbmVsIHRvIHJlbmRlclxuICAgIGxldCBpbmZvUGFuZWw6IFJlYWN0LlJlYWN0Tm9kZSA9IG51bGw7XG4gICAgLy8gc3dpdGNoIChsb2NhdGlvbikge1xuICAgIC8vICAgY2FzZSBcIk1BSU5cIjpcbiAgICAvLyAgICAgaW5mb1BhbmVsID0gPEdlbmVyYWxPcHRpb25zIHsuLi5wcm9wc30gLz47XG4gICAgLy8gICAgIGJyZWFrO1xuICAgIC8vICAgY2FzZSBcIlNUWUxFU1wiOlxuICAgIC8vICAgICBpbmZvUGFuZWwgPSA8U3R5bGVzT3B0aW9ucyB7Li4ucHJvcHN9IC8+O1xuICAgIC8vICAgICBicmVhaztcbiAgICAvLyAgIGNhc2UgXCJBQ1RJT05TXCI6XG4gICAgLy8gICAgIGluZm9QYW5lbCA9IDxBY3Rpb25zT3B0aW9ucyB7Li4ucHJvcHN9IC8+O1xuICAgIC8vICAgICBicmVhaztcbiAgICAvLyAgIGNhc2UgXCJURU1QTEFUSU5HXCI6XG4gICAgLy8gICAgIGluZm9QYW5lbCA9IDxUZW1wbGF0aW5nT3B0aW9ucyB7Li4ucHJvcHN9IC8+O1xuICAgIC8vICAgICBicmVhaztcbiAgICAvL31cblxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZUluZm8gPSBnZXRJbmZvRm9yKFxuICAgICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCxcbiAgICAgIHByb3BzLmJhc2VJMThuLFxuICAgICk7XG5cbiAgICBjb25zdCBwb3RlbnRpYWxCbG9ja1BhcmVudCA9IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQgPT09IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQgP1xuICAgICAgZ2V0SW5mb0ZvcihcbiAgICAgICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50LFxuICAgICAgICBwcm9wcy5iYXNlSTE4bixcbiAgICAgICkgOiBudWxsO1xuXG4gICAgY29uc3Qgc3VwZXJCbG9ja1BhdGhzID0gKHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyB8fCBbXSkuZmlsdGVyKChlKSA9PiBlICE9PSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50KS5tYXAoKHYsIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbmZvOiBnZXRJbmZvRm9yKHYsIHByb3BzLmJhc2VJMThuKSxcbiAgICAgICAgcGF0aDogcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW2luZGV4XSxcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGVudGlyZVBhdGggPSBzdXBlckJsb2NrUGF0aHM7XG5cbiAgICBpZiAocG90ZW50aWFsQmxvY2tQYXJlbnQpIHtcbiAgICAgIGVudGlyZVBhdGgucHVzaCh7XG4gICAgICAgIGluZm86IHBvdGVudGlhbEJsb2NrUGFyZW50LFxuICAgICAgICBwYXRoOiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBlbnRpcmVQYXRoLnB1c2goe1xuICAgICAgaW5mbzogc2VsZWN0ZWROb2RlSW5mbyxcbiAgICAgIHBhdGg6IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgfSk7XG5cbiAgICBjb25zdCBXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlID0gcHJvcHMuV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZSB8fCBEZWZhdWx0V3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZTtcblxuICAgIHRpdGxlRm9yTm9kZSA9IGVudGlyZVBhdGgubWFwKCh2LCBpKSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8V3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVxuICAgICAgICAgIGVudGlyZVBhdGg9e2VudGlyZVBhdGggYXMgYW55fVxuICAgICAgICAgIGluZm89e3YuaW5mb31cbiAgICAgICAgICBpc0N1cnJlbnQ9e2kgPT09IGVudGlyZVBhdGgubGVuZ3RoIC0gMX1cbiAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgaW5kZXg9e2l9XG4gICAgICAgICAgb25TZWxlY3Q9e2kgPT09IGVudGlyZVBhdGgubGVuZ3RoIC0gMSA/IG51bGwgOiBwcm9wcy5oZWxwZXJzLnNlbGVjdFBhdGguYmluZChudWxsLCB2LnBhdGgpfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IFdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyID0gcHJvcHMuV3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXIgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyO1xuXG4gICAgY29uc3QgV3JhcHBlckRyYXdlclRhYnMgPSBwcm9wcy5XcmFwcGVyRHJhd2VyVGFicyB8fCBEZWZhdWx0V3JhcHBlckRyYXdlclRhYnM7XG5cbiAgICAvLyBhbmQgbm93IHdlIGNhbiBidWlsZCB0aGVzZSBzZXR0aW5nc1xuICAgIC8vIGJhc2ljYWxseSBoZXJlIHdlIGFyZSBidWlsZGluZyB0aGUgZGl2aWRlciBhbmQgdGhlblxuICAgIC8vIGFkZGluZyB0aGUgcGFuZWwsIHdoZXJlIHRoZSB0YWJzIGFsbG93IHVzIHRvIHN3aXRjaFxuICAgIC8vIGZyb20gZWFjaCBwYW5lbFxuICAgIHNldHRpbmdzRm9yTm9kZSA9IChcbiAgICAgIDw+XG4gICAgICAgIHtcbiAgICAgICAgICAhc2VsZWN0ZWROb2RlSW5mby5pc1RleHQgP1xuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICA8V3JhcHBlckRyYXdlclRhYnNcbiAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb249e2FjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbiBhcyBhbnl9XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb249e2xvY2F0aW9uIGFzIGFueX1cbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZE9wdGlvbj17c2V0TG9jYXRpb25DYWxsYmFja31cbiAgICAgICAgICAgICAgICBzZXRBY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb249e3VzZUFjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbn1cbiAgICAgICAgICAgICAgICBvcHRpb25zPXtbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBcIk1BSU5cIixcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHByb3BzLmJhc2VJMThuLnNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzQ3VzdG9tU3R5bGVzIHx8IHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzUmljaENsYXNzZXMgPyAoXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZDogXCJTVFlMRVNcIixcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogcHJvcHMuYmFzZUkxOG4uc3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgIHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGVtcGxhdGluZyA/IChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGlkOiBcIlRFTVBMQVRJTkdcIixcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogcHJvcHMuYmFzZUkxOG4udGVtcGxhdGluZyxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmcgPyAoXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZDogXCJBQ1RJT05TXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHByb3BzLmJhc2VJMThuLmFjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgIF0uZmlsdGVyKCh2KSA9PiAhIXYpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IG51bGxcbiAgICAgICAgfVxuICAgICAgICA8V3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXJcbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb249e2FjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbiBhcyBhbnl9XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb249e2xvY2F0aW9uIGFzIGFueX1cbiAgICAgICAgICBzZXRTZWxlY3RlZE9wdGlvbj17c2V0TG9jYXRpb25DYWxsYmFja31cbiAgICAgICAgICBzZXRBY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb249e3VzZUFjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbn1cbiAgICAgICAgPlxuICAgICAgICAgIHtpbmZvUGFuZWx9XG4gICAgICAgIDwvV3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXI+XG4gICAgICA8Lz5cbiAgICApO1xuICB9XG5cbiAgY29uc3QgV3JhcHBlckZvclRpdGxlID0gcHJvcHMuV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVdyYXBwZXIgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVXcmFwcGVyO1xuXG4gIC8vIG5vdyB3ZSByZXR1cm5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPFdyYXBwZXJGb3JUaXRsZT5cbiAgICAgICAge3RpdGxlRm9yTm9kZX1cbiAgICAgIDwvV3JhcHBlckZvclRpdGxlPlxuICAgICAge3NldHRpbmdzRm9yTm9kZX1cbiAgICAgIHtwcm9wcy5kcmF3ZXJFeHRyYUNoaWxkcmVufVxuICAgIDwvPlxuICApO1xufVxuIiwgIi8qKlxuICogUHJvdmlkZXMgdGhlIGRpYWxvZ3MgdGhhdCBhcmUgdXNlZCBmb3IgdGhlIGZpbGVcbiAqIEBtb2R1bGVcbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgUmVhY3RET00gZnJvbSBcInJlYWN0LWRvbVwiO1xuXG4vKipcbiAqIFRoZSBlcnJvciBkaWFsb2cgcHJvcHNcbiAqL1xuaW50ZXJmYWNlIElGaWxlTG9hZEVycm9yRGlhbG9nUHJvcHMge1xuICAvKipcbiAgICogVGhlIGN1cnJlbnQgZXJyb3IsIGl0IGFsc28gcmVwcmVzZW50c1xuICAgKiB0aGUgZmFjdCBvZiB0aGUgZGlhbG9nIGJlaW5nIG9wZW4gaWYgb25lXG4gICAqIGlzIGF2YWlsYWJsZVxuICAgKi9cbiAgY3VycmVudExvYWRFcnJvcjogc3RyaW5nO1xuICAvKipcbiAgICogZGlzbWlzcyBzdWNoIGVycm9yXG4gICAqL1xuICBkaXNtaXNzQ3VycmVudExvYWRFcnJvcjogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIEdlbmVyaWMgZXJyb3IgbWVzc2FnZVxuICAgKi9cbiAgaTE4bkdlbmVyaWNFcnJvcjogc3RyaW5nO1xuICAvKipcbiAgICogT2tcbiAgICovXG4gIGkxOG5Pazogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGNvbXBvbmVudCBmb3IgdGhlIGRpYWxvZ1xuICAgKi9cbiAgRGlhbG9nPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRGlhbG9nQ29tcG9uZW50UHJvcHM+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEaWFsb2dDb21wb25lbnRQcm9wcyB7XG4gIGNoaWxkcmVuOiBzdHJpbmc7XG4gIG9wZW46IGJvb2xlYW47XG4gIG9uQ2xvc2U6ICgpID0+IHZvaWQ7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGJ1dHRvbnM6IEFycmF5PHtcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIG9uQ2xpY2s6ICgpID0+IHZvaWQ7XG4gICAgYWN0aW9uOiBcInByaW1hcnlcIiB8IFwic2Vjb25kYXJ5XCI7XG4gIH0+O1xufVxuXG5mdW5jdGlvbiBEZWZhdWx0RGlhbG9nKHByb3BzOiBJRGlhbG9nQ29tcG9uZW50UHJvcHMpIHtcbiAgaWYgKCFwcm9wcy5vcGVuKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaWFsb2cgPSAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckRpYWxvZ0JhY2tkcm9wXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yRGlhbG9nXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JEaWFsb2dUaXRsZVwiPntwcm9wcy50aXRsZX08L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckRpYWxvZ0NvbnRlbnRcIj57cHJvcHMuY2hpbGRyZW59PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JCdXR0b25zXCI+XG4gICAgICAgICAge3Byb3BzLmJ1dHRvbnMubWFwKCh2KSA9PiAoXG4gICAgICAgICAgICA8YnV0dG9uIGtleT17di5hY3Rpb259IG9uQ2xpY2s9e3Yub25DbGlja30+e3YubGFiZWx9PC9idXR0b24+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG5cbiAgcmV0dXJuIFJlYWN0RE9NLmNyZWF0ZVBvcnRhbChkaWFsb2csIGRvY3VtZW50LmJvZHkpO1xufVxuXG4vKipcbiAqIFRoaXMgZGlhbG9nIHByb3ZpZGVzIGEgY29udmVuaWVudCBlcnJvciBtZXNzYWdlIHRvIGRpc3BsYXkgYW5kIGNsb3NlXG4gKiBmb3Igd2hlbiB0aGUgZmlsZSBmYWlsZWQgdG8gbG9hZFxuICovXG5leHBvcnQgY2xhc3MgRmlsZUxvYWRFcnJvckRpYWxvZyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8SUZpbGVMb2FkRXJyb3JEaWFsb2dQcm9wcz4ge1xuICBjb25zdHJ1Y3Rvcihwcm9wczogSUZpbGVMb2FkRXJyb3JEaWFsb2dQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMub25DbG9zZSA9IHRoaXMub25DbG9zZS5iaW5kKHRoaXMpO1xuICB9XG4gIHB1YmxpYyBvbkNsb3NlKCkge1xuICAgIHRoaXMucHJvcHMuZGlzbWlzc0N1cnJlbnRMb2FkRXJyb3IoKTtcbiAgfVxuICAvKipcbiAgICogVGhlIHJlbmRlciBmdW5jdGlvblxuICAgKi9cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICBjb25zdCBEaWFsb2cgPSB0aGlzLnByb3BzLkRpYWxvZyB8fCBEZWZhdWx0RGlhbG9nO1xuICAgIHJldHVybiAoXG4gICAgICA8RGlhbG9nXG4gICAgICAgIG9wZW49eyEhdGhpcy5wcm9wcy5jdXJyZW50TG9hZEVycm9yfVxuICAgICAgICBvbkNsb3NlPXt0aGlzLm9uQ2xvc2V9XG4gICAgICAgIHRpdGxlPXt0aGlzLnByb3BzLmkxOG5HZW5lcmljRXJyb3J9XG4gICAgICAgIGJ1dHRvbnM9e1xuICAgICAgICAgIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGFiZWw6IHRoaXMucHJvcHMuaTE4bk9rLFxuICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnByb3BzLmRpc21pc3NDdXJyZW50TG9hZEVycm9yLFxuICAgICAgICAgICAgICBhY3Rpb246IFwicHJpbWFyeVwiLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgPlxuICAgICAgICB7dGhpcy5wcm9wcy5jdXJyZW50TG9hZEVycm9yfVxuICAgICAgPC9EaWFsb2c+XG4gICAgKTtcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUVBLFdBQU8sVUFBVTtBQUVqQixRQUFJLE1BQU07QUFDVixRQUFJLE1BQ0Y7QUFJRixRQUFJLE1BQU0sSUFBSSxPQUFPLFFBQVEsTUFBTSxRQUFRLE1BQU0sR0FBRztBQUNwRCxRQUFJLE1BQU0sSUFBSSxPQUFPLFFBQVEsTUFBTSxRQUFRLE1BQU0sR0FBRztBQUVwRCxhQUFTLFVBQVUsT0FBTztBQUN4QixjQUFRLE9BQU8sU0FBUyxFQUFFO0FBRTFCLFVBQUksSUFBSSxLQUFLLEtBQUssR0FBRztBQUNuQixlQUFPO0FBQUEsTUFDVDtBQUVBLFVBQUksSUFBSSxLQUFLLEtBQUssR0FBRztBQUNuQixlQUFPO0FBQUEsTUFDVDtBQUVBLGFBQU87QUFBQSxJQUNUO0FBQUE7QUFBQTs7O0FDekJBO0FBQUE7QUF5QkEsYUFBU0EsVUFBUyxPQUFPO0FBQ3ZCLFVBQUksT0FBTyxPQUFPO0FBQ2xCLGFBQU8sU0FBUyxTQUFTLFFBQVEsWUFBWSxRQUFRO0FBQUEsSUFDdkQ7QUFFQSxXQUFPLFVBQVVBO0FBQUE7QUFBQTs7O0FDOUJqQjtBQUFBO0FBQ0EsUUFBSSxhQUFhLE9BQU8sVUFBVSxZQUFZLFVBQVUsT0FBTyxXQUFXLFVBQVU7QUFFcEYsV0FBTyxVQUFVO0FBQUE7QUFBQTs7O0FDSGpCO0FBQUE7QUFBQSxRQUFJLGFBQWE7QUFHakIsUUFBSSxXQUFXLE9BQU8sUUFBUSxZQUFZLFFBQVEsS0FBSyxXQUFXLFVBQVU7QUFHNUUsUUFBSSxPQUFPLGNBQWMsWUFBWSxTQUFTLGFBQWEsRUFBRTtBQUU3RCxXQUFPLFVBQVU7QUFBQTtBQUFBOzs7QUNSakI7QUFBQTtBQUFBLFFBQUksT0FBTztBQWtCWCxRQUFJLE1BQU0sV0FBVztBQUNuQixhQUFPLEtBQUssS0FBSyxJQUFJO0FBQUEsSUFDdkI7QUFFQSxXQUFPLFVBQVU7QUFBQTtBQUFBOzs7QUN0QmpCO0FBQUE7QUFDQSxRQUFJLGVBQWU7QUFVbkIsYUFBUyxnQkFBZ0JDLFNBQVE7QUFDL0IsVUFBSSxRQUFRQSxRQUFPO0FBRW5CLGFBQU8sV0FBVyxhQUFhLEtBQUtBLFFBQU8sT0FBTyxLQUFLLENBQUMsR0FBRztBQUFBLE1BQUM7QUFDNUQsYUFBTztBQUFBLElBQ1Q7QUFFQSxXQUFPLFVBQVU7QUFBQTtBQUFBOzs7QUNsQmpCO0FBQUE7QUFBQSxRQUFJLGtCQUFrQjtBQUd0QixRQUFJLGNBQWM7QUFTbEIsYUFBUyxTQUFTQyxTQUFRO0FBQ3hCLGFBQU9BLFVBQ0hBLFFBQU8sTUFBTSxHQUFHLGdCQUFnQkEsT0FBTSxJQUFJLENBQUMsRUFBRSxRQUFRLGFBQWEsRUFBRSxJQUNwRUE7QUFBQSxJQUNOO0FBRUEsV0FBTyxVQUFVO0FBQUE7QUFBQTs7O0FDbEJqQjtBQUFBO0FBQUEsUUFBSSxPQUFPO0FBR1gsUUFBSUMsVUFBUyxLQUFLO0FBRWxCLFdBQU8sVUFBVUE7QUFBQTtBQUFBOzs7QUNMakI7QUFBQTtBQUFBLFFBQUlDLFVBQVM7QUFHYixRQUFJLGNBQWMsT0FBTztBQUd6QixRQUFJLGlCQUFpQixZQUFZO0FBT2pDLFFBQUksdUJBQXVCLFlBQVk7QUFHdkMsUUFBSSxpQkFBaUJBLFVBQVNBLFFBQU8sY0FBYztBQVNuRCxhQUFTLFVBQVUsT0FBTztBQUN4QixVQUFJLFFBQVEsZUFBZSxLQUFLLE9BQU8sY0FBYyxHQUNqRCxNQUFNLE1BQU0sY0FBYztBQUU5QixVQUFJO0FBQ0YsY0FBTSxjQUFjLElBQUk7QUFDeEIsWUFBSSxXQUFXO0FBQUEsTUFDakIsU0FBU0MsSUFBRztBQUFBLE1BQUM7QUFFYixVQUFJLFNBQVMscUJBQXFCLEtBQUssS0FBSztBQUM1QyxVQUFJLFVBQVU7QUFDWixZQUFJLE9BQU87QUFDVCxnQkFBTSxjQUFjLElBQUk7QUFBQSxRQUMxQixPQUFPO0FBQ0wsaUJBQU8sTUFBTSxjQUFjO0FBQUEsUUFDN0I7QUFBQSxNQUNGO0FBQ0EsYUFBTztBQUFBLElBQ1Q7QUFFQSxXQUFPLFVBQVU7QUFBQTtBQUFBOzs7QUM3Q2pCO0FBQUE7QUFDQSxRQUFJLGNBQWMsT0FBTztBQU96QixRQUFJLHVCQUF1QixZQUFZO0FBU3ZDLGFBQVMsZUFBZSxPQUFPO0FBQzdCLGFBQU8scUJBQXFCLEtBQUssS0FBSztBQUFBLElBQ3hDO0FBRUEsV0FBTyxVQUFVO0FBQUE7QUFBQTs7O0FDckJqQjtBQUFBO0FBQUEsUUFBSUMsVUFBUztBQUFiLFFBQ0ksWUFBWTtBQURoQixRQUVJLGlCQUFpQjtBQUdyQixRQUFJLFVBQVU7QUFBZCxRQUNJLGVBQWU7QUFHbkIsUUFBSSxpQkFBaUJBLFVBQVNBLFFBQU8sY0FBYztBQVNuRCxhQUFTLFdBQVcsT0FBTztBQUN6QixVQUFJLFNBQVMsTUFBTTtBQUNqQixlQUFPLFVBQVUsU0FBWSxlQUFlO0FBQUEsTUFDOUM7QUFDQSxhQUFRLGtCQUFrQixrQkFBa0IsT0FBTyxLQUFLLElBQ3BELFVBQVUsS0FBSyxJQUNmLGVBQWUsS0FBSztBQUFBLElBQzFCO0FBRUEsV0FBTyxVQUFVO0FBQUE7QUFBQTs7O0FDM0JqQjtBQUFBO0FBd0JBLGFBQVMsYUFBYSxPQUFPO0FBQzNCLGFBQU8sU0FBUyxRQUFRLE9BQU8sU0FBUztBQUFBLElBQzFDO0FBRUEsV0FBTyxVQUFVO0FBQUE7QUFBQTs7O0FDNUJqQjtBQUFBO0FBQUEsUUFBSSxhQUFhO0FBQWpCLFFBQ0ksZUFBZTtBQUduQixRQUFJLFlBQVk7QUFtQmhCLGFBQVMsU0FBUyxPQUFPO0FBQ3ZCLGFBQU8sT0FBTyxTQUFTLFlBQ3BCLGFBQWEsS0FBSyxLQUFLLFdBQVcsS0FBSyxLQUFLO0FBQUEsSUFDakQ7QUFFQSxXQUFPLFVBQVU7QUFBQTtBQUFBOzs7QUM1QmpCO0FBQUE7QUFBQSxRQUFJLFdBQVc7QUFBZixRQUNJQyxZQUFXO0FBRGYsUUFFSSxXQUFXO0FBR2YsUUFBSSxNQUFNLElBQUk7QUFHZCxRQUFJLGFBQWE7QUFHakIsUUFBSSxhQUFhO0FBR2pCLFFBQUksWUFBWTtBQUdoQixRQUFJLGVBQWU7QUF5Qm5CLGFBQVMsU0FBUyxPQUFPO0FBQ3ZCLFVBQUksT0FBTyxTQUFTLFVBQVU7QUFDNUIsZUFBTztBQUFBLE1BQ1Q7QUFDQSxVQUFJLFNBQVMsS0FBSyxHQUFHO0FBQ25CLGVBQU87QUFBQSxNQUNUO0FBQ0EsVUFBSUEsVUFBUyxLQUFLLEdBQUc7QUFDbkIsWUFBSSxRQUFRLE9BQU8sTUFBTSxXQUFXLGFBQWEsTUFBTSxRQUFRLElBQUk7QUFDbkUsZ0JBQVFBLFVBQVMsS0FBSyxJQUFLLFFBQVEsS0FBTTtBQUFBLE1BQzNDO0FBQ0EsVUFBSSxPQUFPLFNBQVMsVUFBVTtBQUM1QixlQUFPLFVBQVUsSUFBSSxRQUFRLENBQUM7QUFBQSxNQUNoQztBQUNBLGNBQVEsU0FBUyxLQUFLO0FBQ3RCLFVBQUksV0FBVyxXQUFXLEtBQUssS0FBSztBQUNwQyxhQUFRLFlBQVksVUFBVSxLQUFLLEtBQUssSUFDcEMsYUFBYSxNQUFNLE1BQU0sQ0FBQyxHQUFHLFdBQVcsSUFBSSxDQUFDLElBQzVDLFdBQVcsS0FBSyxLQUFLLElBQUksTUFBTSxDQUFDO0FBQUEsSUFDdkM7QUFFQSxXQUFPLFVBQVU7QUFBQTtBQUFBOzs7QUMvRGpCO0FBQUE7QUFBQSxRQUFJQyxZQUFXO0FBQWYsUUFDSSxNQUFNO0FBRFYsUUFFSSxXQUFXO0FBR2YsUUFBSSxrQkFBa0I7QUFHdEIsUUFBSSxZQUFZLEtBQUs7QUFBckIsUUFDSSxZQUFZLEtBQUs7QUF3RHJCLGFBQVNDLFVBQVMsTUFBTSxNQUFNLFNBQVM7QUFDckMsVUFBSSxVQUNBLFVBQ0EsU0FDQSxRQUNBLFNBQ0EsY0FDQSxpQkFBaUIsR0FDakIsVUFBVSxPQUNWLFNBQVMsT0FDVCxXQUFXO0FBRWYsVUFBSSxPQUFPLFFBQVEsWUFBWTtBQUM3QixjQUFNLElBQUksVUFBVSxlQUFlO0FBQUEsTUFDckM7QUFDQSxhQUFPLFNBQVMsSUFBSSxLQUFLO0FBQ3pCLFVBQUlELFVBQVMsT0FBTyxHQUFHO0FBQ3JCLGtCQUFVLENBQUMsQ0FBQyxRQUFRO0FBQ3BCLGlCQUFTLGFBQWE7QUFDdEIsa0JBQVUsU0FBUyxVQUFVLFNBQVMsUUFBUSxPQUFPLEtBQUssR0FBRyxJQUFJLElBQUk7QUFDckUsbUJBQVcsY0FBYyxVQUFVLENBQUMsQ0FBQyxRQUFRLFdBQVc7QUFBQSxNQUMxRDtBQUVBLGVBQVMsV0FBV0UsT0FBTTtBQUN4QixZQUFJLE9BQU8sVUFDUCxVQUFVO0FBRWQsbUJBQVcsV0FBVztBQUN0Qix5QkFBaUJBO0FBQ2pCLGlCQUFTLEtBQUssTUFBTSxTQUFTLElBQUk7QUFDakMsZUFBTztBQUFBLE1BQ1Q7QUFFQSxlQUFTLFlBQVlBLE9BQU07QUFFekIseUJBQWlCQTtBQUVqQixrQkFBVSxXQUFXLGNBQWMsSUFBSTtBQUV2QyxlQUFPLFVBQVUsV0FBV0EsS0FBSSxJQUFJO0FBQUEsTUFDdEM7QUFFQSxlQUFTLGNBQWNBLE9BQU07QUFDM0IsWUFBSSxvQkFBb0JBLFFBQU8sY0FDM0Isc0JBQXNCQSxRQUFPLGdCQUM3QixjQUFjLE9BQU87QUFFekIsZUFBTyxTQUNILFVBQVUsYUFBYSxVQUFVLG1CQUFtQixJQUNwRDtBQUFBLE1BQ047QUFFQSxlQUFTLGFBQWFBLE9BQU07QUFDMUIsWUFBSSxvQkFBb0JBLFFBQU8sY0FDM0Isc0JBQXNCQSxRQUFPO0FBS2pDLGVBQVEsaUJBQWlCLFVBQWMscUJBQXFCLFFBQ3pELG9CQUFvQixLQUFPLFVBQVUsdUJBQXVCO0FBQUEsTUFDakU7QUFFQSxlQUFTLGVBQWU7QUFDdEIsWUFBSUEsUUFBTyxJQUFJO0FBQ2YsWUFBSSxhQUFhQSxLQUFJLEdBQUc7QUFDdEIsaUJBQU8sYUFBYUEsS0FBSTtBQUFBLFFBQzFCO0FBRUEsa0JBQVUsV0FBVyxjQUFjLGNBQWNBLEtBQUksQ0FBQztBQUFBLE1BQ3hEO0FBRUEsZUFBUyxhQUFhQSxPQUFNO0FBQzFCLGtCQUFVO0FBSVYsWUFBSSxZQUFZLFVBQVU7QUFDeEIsaUJBQU8sV0FBV0EsS0FBSTtBQUFBLFFBQ3hCO0FBQ0EsbUJBQVcsV0FBVztBQUN0QixlQUFPO0FBQUEsTUFDVDtBQUVBLGVBQVMsU0FBUztBQUNoQixZQUFJLFlBQVksUUFBVztBQUN6Qix1QkFBYSxPQUFPO0FBQUEsUUFDdEI7QUFDQSx5QkFBaUI7QUFDakIsbUJBQVcsZUFBZSxXQUFXLFVBQVU7QUFBQSxNQUNqRDtBQUVBLGVBQVMsUUFBUTtBQUNmLGVBQU8sWUFBWSxTQUFZLFNBQVMsYUFBYSxJQUFJLENBQUM7QUFBQSxNQUM1RDtBQUVBLGVBQVMsWUFBWTtBQUNuQixZQUFJQSxRQUFPLElBQUksR0FDWCxhQUFhLGFBQWFBLEtBQUk7QUFFbEMsbUJBQVc7QUFDWCxtQkFBVztBQUNYLHVCQUFlQTtBQUVmLFlBQUksWUFBWTtBQUNkLGNBQUksWUFBWSxRQUFXO0FBQ3pCLG1CQUFPLFlBQVksWUFBWTtBQUFBLFVBQ2pDO0FBQ0EsY0FBSSxRQUFRO0FBRVYseUJBQWEsT0FBTztBQUNwQixzQkFBVSxXQUFXLGNBQWMsSUFBSTtBQUN2QyxtQkFBTyxXQUFXLFlBQVk7QUFBQSxVQUNoQztBQUFBLFFBQ0Y7QUFDQSxZQUFJLFlBQVksUUFBVztBQUN6QixvQkFBVSxXQUFXLGNBQWMsSUFBSTtBQUFBLFFBQ3pDO0FBQ0EsZUFBTztBQUFBLE1BQ1Q7QUFDQSxnQkFBVSxTQUFTO0FBQ25CLGdCQUFVLFFBQVE7QUFDbEIsYUFBTztBQUFBLElBQ1Q7QUFFQSxXQUFPLFVBQVVEO0FBQUE7QUFBQTs7O0FDOUxqQjtBQUFBO0FBQUEsUUFBSUUsWUFBVztBQUFmLFFBQ0lDLFlBQVc7QUFHZixRQUFJLGtCQUFrQjtBQThDdEIsYUFBU0MsVUFBUyxNQUFNLE1BQU0sU0FBUztBQUNyQyxVQUFJLFVBQVUsTUFDVixXQUFXO0FBRWYsVUFBSSxPQUFPLFFBQVEsWUFBWTtBQUM3QixjQUFNLElBQUksVUFBVSxlQUFlO0FBQUEsTUFDckM7QUFDQSxVQUFJRCxVQUFTLE9BQU8sR0FBRztBQUNyQixrQkFBVSxhQUFhLFVBQVUsQ0FBQyxDQUFDLFFBQVEsVUFBVTtBQUNyRCxtQkFBVyxjQUFjLFVBQVUsQ0FBQyxDQUFDLFFBQVEsV0FBVztBQUFBLE1BQzFEO0FBQ0EsYUFBT0QsVUFBUyxNQUFNLE1BQU07QUFBQSxRQUMxQixXQUFXO0FBQUEsUUFDWCxXQUFXO0FBQUEsUUFDWCxZQUFZO0FBQUEsTUFDZCxDQUFDO0FBQUEsSUFDSDtBQUVBLFdBQU8sVUFBVUU7QUFBQTtBQUFBOzs7QUNwRWpCO0FBQUE7QUFBQTtBQUVBLFdBQU8sZUFBZSxTQUFTLGNBQWM7QUFBQSxNQUMzQyxPQUFPO0FBQUEsSUFDVCxDQUFDO0FBTUQsUUFBSSxTQUFTLE9BQU8sVUFBVSxlQUFlLHVCQUF1QixLQUFLLE9BQU8sVUFBVSxRQUFRO0FBRWxHLFFBQUksWUFBWTtBQUFBLE1BQ2QsS0FBSztBQUFBLE1BQ0wsU0FBUztBQUFBLE1BQ1QsTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFBLElBQ1Q7QUFFQSxRQUFJLFVBQVU7QUFBQSxNQUNaLEtBQUs7QUFBQSxNQUNMLE9BQU87QUFBQSxNQUNQLEtBQUs7QUFBQSxNQUNMLFNBQVM7QUFBQSxNQUNULEtBQUs7QUFBQSxNQUNMLE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxNQUNMLE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLE1BQU07QUFBQSxNQUNOLEtBQUssU0FBUyxTQUFTO0FBQUEsTUFDdkIsS0FBSztBQUFBLE1BQ0wsUUFBUTtBQUFBLE1BQ1IsUUFBUTtBQUFBLE1BQ1IsT0FBTztBQUFBLE1BQ1AsT0FBTztBQUFBLE1BQ1AsVUFBVTtBQUFBLE1BQ1YsSUFBSTtBQUFBLE1BQ0osS0FBSztBQUFBLE1BQ0wsU0FBUztBQUFBLElBQ1g7QUFFQSxRQUFJLFFBQVE7QUFBQSxNQUNWLFdBQVc7QUFBQSxNQUNYLEtBQUs7QUFBQSxNQUNMLE9BQU87QUFBQSxNQUNQLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxNQUNULEtBQUs7QUFBQSxNQUNMLE9BQU87QUFBQSxNQUNQLFVBQVU7QUFBQSxNQUNWLFFBQVE7QUFBQSxNQUNSLEtBQUs7QUFBQSxNQUNMLFFBQVE7QUFBQSxNQUNSLFVBQVU7QUFBQSxNQUNWLEtBQUs7QUFBQSxNQUNMLE1BQU07QUFBQSxNQUNOLFdBQVc7QUFBQSxNQUNYLFNBQVM7QUFBQSxNQUNULFlBQVk7QUFBQSxNQUNaLFdBQVc7QUFBQSxNQUNYLFFBQVE7QUFBQSxNQUNSLFFBQVE7QUFBQSxNQUNSLE1BQU07QUFBQSxNQUNOLFNBQVM7QUFBQSxNQUNULFlBQVk7QUFBQSxNQUNaLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxNQUNMLEtBQU07QUFBQSxJQUNS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YyxNQUFNLENBQUM7IiwKICAibmFtZXMiOiBbImlzT2JqZWN0IiwgInN0cmluZyIsICJzdHJpbmciLCAiU3ltYm9sIiwgIlN5bWJvbCIsICJlIiwgIlN5bWJvbCIsICJpc09iamVjdCIsICJpc09iamVjdCIsICJkZWJvdW5jZSIsICJ0aW1lIiwgImRlYm91bmNlIiwgImlzT2JqZWN0IiwgInRocm90dGxlIiwgInN0cmluZyIsICJjaGVjayIsICJlIiwgImlzS2V5SG90a2V5IiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfcmVhY3RfZG9tIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfZGVlcF9lcXVhbCIsICJlIiwgIm1zZyIsICJpc1BsYWluT2JqZWN0IiwgInQiLCAiaXNQbGFpbk9iamVjdCIsICJpIiwgImltbWVyIiwgInBhdGgiLCAiaXNTZXQiLCAicGFyZW50IiwgImN1cnJlbnQiLCAiSW1tZXIiLCAic2VsZiIsICJiYXNlIiwgImkiLCAiSW1tZXIiLCAiUGF0aFJlZiIsICJ0cmFuc2Zvcm0iLCAicmVmIiwgIm9wIiwgImN1cnJlbnQiLCAiYWZmaW5pdHkiLCAicGF0aCIsICJQYXRoIiwgInVucmVmIiwgIlBvaW50UmVmIiwgInBvaW50IiwgIlBvaW50IiwgIlJhbmdlUmVmIiwgIlJhbmdlIiwgIkRJUlRZX1BBVEhTIiwgIldlYWtNYXAiLCAiRElSVFlfUEFUSF9LRVlTIiwgIkZMVVNISU5HIiwgIk5PUk1BTElaSU5HIiwgIlBBVEhfUkVGUyIsICJQT0lOVF9SRUZTIiwgIlJBTkdFX1JFRlMiLCAiYW5jZXN0b3JzIiwgIm9wdGlvbnMiLCAiYXJndW1lbnRzIiwgImxlbmd0aCIsICJ1bmRlZmluZWQiLCAicmV2ZXJzZSIsICJwYXRocyIsICJsZXZlbHMiLCAic2xpY2UiLCAiY29tbW9uIiwgImFub3RoZXIiLCAiaSIsICJhdiIsICJidiIsICJwdXNoIiwgImNvbXBhcmUiLCAibWluIiwgIk1hdGgiLCAiZW5kc0FmdGVyIiwgImFzIiwgImJzIiwgImVxdWFscyIsICJlbmRzQXQiLCAiZW5kc0JlZm9yZSIsICJldmVyeSIsICJuIiwgImhhc1ByZXZpb3VzIiwgImlzQWZ0ZXIiLCAiaXNBbmNlc3RvciIsICJpc0JlZm9yZSIsICJpc0NoaWxkIiwgImlzQ29tbW9uIiwgImlzRGVzY2VuZGFudCIsICJpc1BhcmVudCIsICJpc1BhdGgiLCAidmFsdWUiLCAiQXJyYXkiLCAiaXNBcnJheSIsICJpc1NpYmxpbmciLCAiYWwiLCAiYmwiLCAibGlzdCIsICJuZXh0IiwgIkVycm9yIiwgImNvbmNhdCIsICJsYXN0IiwgIm9wZXJhdGlvbkNhblRyYW5zZm9ybVBhdGgiLCAib3BlcmF0aW9uIiwgInR5cGUiLCAicGFyZW50IiwgInByZXZpb3VzIiwgInJlbGF0aXZlIiwgImFuY2VzdG9yIiwgInAiLCAicG9zaXRpb24iLCAibmV3UGF0aCIsICJvbnAiLCAiY29weSIsICJvIiwgInRvUHJpbWl0aXZlIiwgInRvUHJvcGVydHlLZXkiLCAiYXBwbHlUb0RyYWZ0IiwgImVkaXRvciIsICJzZWxlY3Rpb24iLCAibm9kZSIsICJOb2RlIiwgImluZGV4IiwgImNoaWxkcmVuIiwgInNwbGljZSIsICJrZXkiLCAicG9pbnRzIiwgIm9mZnNldCIsICJ0ZXh0IiwgImxlYWYiLCAiYmVmb3JlIiwgImFmdGVyIiwgImdldCIsICJwcmV2UGF0aCIsICJwcmV2IiwgIlRleHQiLCAiaXNUZXh0IiwgIlNjcnViYmVyIiwgInN0cmluZ2lmeSIsICJ0cnVlUGF0aCIsICJuZXdQYXJlbnQiLCAibmV3SW5kZXgiLCAicmVzdWx0IiwgInRleHRzIiwgInByZWZlck5leHQiLCAicHJvcGVydGllcyIsICJuZXdQcm9wZXJ0aWVzIiwgImhhc093blByb3BlcnR5IiwgImlzUmFuZ2UiLCAiX29iamVjdFNwcmVhZCIsICJuZXdOb2RlIiwgIkdlbmVyYWxUcmFuc2Zvcm1zIiwgImNyZWF0ZURyYWZ0IiwgImZpbmlzaERyYWZ0IiwgImlzRHJhZnQiLCAiTm9kZVRyYW5zZm9ybXMiLCAiaW5zZXJ0Tm9kZXMiLCAibm9kZXMiLCAibGlmdE5vZGVzIiwgIm1lcmdlTm9kZXMiLCAibW92ZU5vZGVzIiwgInJlbW92ZU5vZGVzIiwgInNldE5vZGVzIiwgInByb3BzIiwgInNwbGl0Tm9kZXMiLCAidW5zZXROb2RlcyIsICJ1bndyYXBOb2RlcyIsICJ3cmFwTm9kZXMiLCAiZWxlbWVudCIsICJTZWxlY3Rpb25UcmFuc2Zvcm1zIiwgImNvbGxhcHNlIiwgImRlc2VsZWN0IiwgIm1vdmUiLCAic2VsZWN0IiwgInRhcmdldCIsICJzZXRQb2ludCIsICJzZXRTZWxlY3Rpb24iLCAiaXNEZWVwRXF1YWwiLCAiYSIsICJiIiwgImlzUGxhaW5PYmplY3QiLCAib2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSIsICJlZGdlcyIsICJyYW5nZSIsICJhbmNob3IiLCAiZm9jdXMiLCAiaXNCYWNrd2FyZCIsICJlbmQiLCAiaW5jbHVkZXMiLCAicnMiLCAicmUiLCAidHMiLCAidGUiLCAic3RhcnQiLCAiaXNBZnRlclN0YXJ0IiwgImlzQmVmb3JlRW5kIiwgImlzUG9pbnQiLCAiaW50ZXJzZWN0aW9uIiwgInJlc3QiLCAiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwgIl9leGNsdWRlZCIsICJzMSIsICJlMSIsICJzMiIsICJlMiIsICJpc0NvbGxhcHNlZCIsICJpc0V4cGFuZGVkIiwgImlzRm9yd2FyZCIsICJwcm9kdWNlIiwgInIiLCAiYWZmaW5pdHlBbmNob3IiLCAiYWZmaW5pdHlGb2N1cyIsICJpc0VsZW1lbnQiLCAiaXNOb2RlTGlzdCIsICJFZGl0b3IiLCAiaXNFZGl0b3IiLCAiRWxlbWVudCIsICJpc0VsZW1lbnRMaXN0IiwgInZhbCIsICJpc0VsZW1lbnRQcm9wcyIsICJpc0VsZW1lbnRUeXBlIiwgImVsZW1lbnRWYWwiLCAiZWxlbWVudEtleSIsICJtYXRjaGVzIiwgIklTX05PREVfTElTVF9DQUNIRSIsICJyb290IiwgImVudHJ5IiwgImNoaWxkIiwgImMiLCAiY2hpbGRQYXRoIiwgImRlc2NlbmRhbnQiLCAiZGVzY2VuZGFudHMiLCAiZWxlbWVudHMiLCAiZXh0cmFjdFByb3BzIiwgIl9leGNsdWRlZDIiLCAiZmlyc3QiLCAiZnJhZ21lbnQiLCAibmV3Um9vdCIsICJub2RlRW50cmllcyIsICJwYXNzIiwgIl9yZWYiLCAiaGFzIiwgImlzTm9kZSIsICJjYWNoZWRSZXN1bHQiLCAic2V0IiwgImlzVGV4dFByb3BzIiwgImZyb20iLCAidG8iLCAidmlzaXRlZCIsICJTZXQiLCAiYWRkIiwgIm5leHRJbmRleCIsICJwYXJlbnRQYXRoIiwgInN0cmluZyIsICJtYXAiLCAiam9pbiIsICJPcGVyYXRpb24iLCAiaXNOb2RlT3BlcmF0aW9uIiwgImlzT3BlcmF0aW9uIiwgImVuZHNXaXRoIiwgImlzT3BlcmF0aW9uTGlzdCIsICJpc1NlbGVjdGlvbk9wZXJhdGlvbiIsICJpc1RleHRPcGVyYXRpb24iLCAiaW52ZXJzZSIsICJpbnZlcnNlUGF0aCIsICJpbnZlcnNlTmV3UGF0aCIsICJJU19FRElUT1JfQ0FDSEUiLCAiY2FjaGVkSXNFZGl0b3IiLCAiYWRkTWFyayIsICJhcHBseSIsICJkZWxldGVGcmFnbWVudCIsICJpbnNlcnRCcmVhayIsICJpbnNlcnRTb2Z0QnJlYWsiLCAiaW5zZXJ0RnJhZ21lbnQiLCAiaW5zZXJ0Tm9kZSIsICJpbnNlcnRUZXh0IiwgImlzRWxlbWVudFJlYWRPbmx5IiwgImlzSW5saW5lIiwgImlzU2VsZWN0YWJsZSIsICJpc1ZvaWQiLCAibm9ybWFsaXplTm9kZSIsICJvbkNoYW5nZSIsICJyZW1vdmVNYXJrIiwgImdldERpcnR5UGF0aHMiLCAibWFya3MiLCAib3BlcmF0aW9ucyIsICJhYm92ZSIsICJhdCIsICJkZWxldGVCYWNrd2FyZCIsICJ1bml0IiwgImRlbGV0ZUZvcndhcmQiLCAiZWxlbWVudFJlYWRPbmx5IiwgImhhc0Jsb2NrcyIsICJoYXNJbmxpbmVzIiwgImhhc1BhdGgiLCAiaGFzVGV4dHMiLCAiaXNCbG9jayIsICJpc0VkZ2UiLCAiaXNFbXB0eSIsICJpc0VuZCIsICJpc05vcm1hbGl6aW5nIiwgImlzU3RhcnQiLCAiZ2V0TWFya3MiLCAibm9ybWFsaXplIiwgInBhdGhSZWYiLCAicGF0aFJlZnMiLCAicG9pbnRSZWYiLCAicG9pbnRSZWZzIiwgInBvc2l0aW9ucyIsICJyYW5nZVJlZiIsICJyYW5nZVJlZnMiLCAic2V0Tm9ybWFsaXppbmciLCAidW5oYW5nUmFuZ2UiLCAidm9pZCIsICJ3aXRob3V0Tm9ybWFsaXppbmciLCAiZm4iLCAiU3BhbiIsICJpc1NwYW4iLCAidmFsdWUiLCAiQXJyYXkiLCAiaXNBcnJheSIsICJsZW5ndGgiLCAiZXZlcnkiLCAiUGF0aCIsICJpc1BhdGgiLCAiUG9pbnQiLCAiY29tcGFyZSIsICJwb2ludCIsICJhbm90aGVyIiwgInJlc3VsdCIsICJwYXRoIiwgIm9mZnNldCIsICJpc0FmdGVyIiwgImlzQmVmb3JlIiwgImVxdWFscyIsICJpc1BvaW50IiwgImlzUGxhaW5PYmplY3QiLCAidHJhbnNmb3JtIiwgIm9wIiwgIm9wdGlvbnMiLCAicHJvZHVjZSIsICJwIiwgImFmZmluaXR5IiwgInR5cGUiLCAidGV4dCIsICJwb3NpdGlvbiIsICJNYXRoIiwgIm1pbiIsICJpc0FuY2VzdG9yIiwgIl9vYmplY3RTcHJlYWQiLCAiX3NjcnViYmVyIiwgInVuZGVmaW5lZCIsICJTY3J1YmJlciIsICJzZXRTY3J1YmJlciIsICJzY3J1YmJlciIsICJzdHJpbmdpZnkiLCAiSlNPTiIsICJUZXh0IiwgImxvb3NlIiwgIm9taXRUZXh0IiwgIm9iaiIsICJyZXN0IiwgIl9vYmplY3RXaXRob3V0UHJvcGVydGllcyIsICJfZXhjbHVkZWQiLCAiaXNEZWVwRXF1YWwiLCAiaXNUZXh0IiwgImlzVGV4dExpc3QiLCAidmFsIiwgImlzVGV4dFByb3BzIiwgInByb3BzIiwgIm1hdGNoZXMiLCAia2V5IiwgImhhc093blByb3BlcnR5IiwgImRlY29yYXRpb25zIiwgIm5vZGUiLCAibGVhdmVzIiwgImRlYyIsICJfZXhjbHVkZWQyIiwgInN0YXJ0IiwgImVuZCIsICJSYW5nZSIsICJlZGdlcyIsICJuZXh0IiwgImxlYWZFbmQiLCAiZGVjb3JhdGlvblN0YXJ0IiwgImRlY29yYXRpb25FbmQiLCAibGVhZiIsICJsZWFmU3RhcnQiLCAiT2JqZWN0IiwgImFzc2lnbiIsICJwdXNoIiwgIm1pZGRsZSIsICJiZWZvcmUiLCAiYWZ0ZXIiLCAib2ZmIiwgInNsaWNlIiwgImdldERlZmF1bHRJbnNlcnRMb2NhdGlvbiIsICJlZGl0b3IiLCAic2VsZWN0aW9uIiwgImNoaWxkcmVuIiwgIkVkaXRvciIsICJtYXRjaFBhdGgiLCAibiIsICJnZXRDaGFyYWN0ZXJEaXN0YW5jZSIsICJzdHIiLCAiaXNSVEwiLCAiYXJndW1lbnRzIiwgImlzTFRSIiwgImNvZGVwb2ludHMiLCAiY29kZXBvaW50c0l0ZXJhdG9yUlRMIiwgImxlZnQiLCAiQ29kZXBvaW50VHlwZSIsICJOb25lIiwgInJpZ2h0IiwgImRpc3RhbmNlIiwgImdiMTEiLCAiZ2IxMk9yMTMiLCAiY2hhciIsICJjb2RlIiwgImNvZGVQb2ludEF0IiwgImdldENvZGVwb2ludFR5cGUiLCAiaW50ZXJzZWN0cyIsICJaV0oiLCAiRXh0UGljdCIsICJlbmRzV2l0aEVtb2ppWldKIiwgInN1YnN0cmluZyIsICJSSSIsICJlbmRzV2l0aE9kZE51bWJlck9mUklzIiwgImlzQm91bmRhcnlQYWlyIiwgIlNQQUNFIiwgIlBVTkNUVUFUSU9OIiwgIkNIQU1FTEVPTiIsICJnZXRXb3JkRGlzdGFuY2UiLCAiZGlzdCIsICJzdGFydGVkIiwgImNoYXJEaXN0IiwgInJlbWFpbmluZyIsICJzcGxpdEJ5Q2hhcmFjdGVyRGlzdGFuY2UiLCAiaXNXb3JkQ2hhcmFjdGVyIiwgImF0IiwgInRlc3QiLCAibmV4dENoYXIiLCAibmV4dFJlbWFpbmluZyIsICJpIiwgImNoYXIxIiwgImNoYXJBdCIsICJpc0xvd1N1cnJvZ2F0ZSIsICJjaGFyQ29kZUF0IiwgImNoYXIyIiwgImlzSGlnaFN1cnJvZ2F0ZSIsICJjaGFyQ29kZSIsICJyZUV4dGVuZCIsICJyZVByZXBlbmQiLCAicmVTcGFjaW5nTWFyayIsICJyZUwiLCAicmVWIiwgInJlVCIsICJyZUxWIiwgInJlTFZUIiwgInJlRXh0UGljdCIsICJBbnkiLCAic2VhcmNoIiwgIkV4dGVuZCIsICJQcmVwZW5kIiwgIlNwYWNpbmdNYXJrIiwgIkwiLCAiViIsICJUIiwgIkxWIiwgIkxWVCIsICJ4IiwgInkiLCAiTm9uQm91bmRhcnlQYWlycyIsICJmaW5kSW5kZXgiLCAiciIsICJlbmRpbmdFbW9qaVpXSiIsICJlbmRpbmdSSXMiLCAibWF0Y2giLCAibnVtUklzIiwgIlRleHRUcmFuc2Zvcm1zIiwgImRlbGV0ZSIsICJpbnNlcnRGcmFnbWVudCIsICJmcmFnbWVudCIsICJpbnNlcnRUZXh0IiwgIndpdGhvdXROb3JtYWxpemluZyIsICJ2b2lkcyIsICJyYW5nZSIsICJpc1JhbmdlIiwgImlzQ29sbGFwc2VkIiwgImFuY2hvciIsICJ2b2lkIiwgInN0YXJ0UmVmIiwgInBvaW50UmVmIiwgImVuZFJlZiIsICJUcmFuc2Zvcm1zIiwgInN0YXJ0UG9pbnQiLCAidW5yZWYiLCAiZW5kUG9pbnQiLCAic2V0U2VsZWN0aW9uIiwgImZvY3VzIiwgImVsZW1lbnRSZWFkT25seSIsICJhcHBseSIsICJHZW5lcmFsVHJhbnNmb3JtcyIsICJOb2RlVHJhbnNmb3JtcyIsICJTZWxlY3Rpb25UcmFuc2Zvcm1zIiwgInJlZiIsICJwYXRoUmVmcyIsICJQYXRoUmVmIiwgInBvaW50UmVmcyIsICJQb2ludFJlZiIsICJyYW5nZVJlZnMiLCAiUmFuZ2VSZWYiLCAib2xkRGlydHlQYXRocyIsICJESVJUWV9QQVRIUyIsICJnZXQiLCAib2xkRGlydHlQYXRoS2V5cyIsICJESVJUWV9QQVRIX0tFWVMiLCAiU2V0IiwgImRpcnR5UGF0aHMiLCAiZGlydHlQYXRoS2V5cyIsICJhZGQiLCAiam9pbiIsICJoYXMiLCAib3BlcmF0aW9uQ2FuVHJhbnNmb3JtUGF0aCIsICJuZXdQYXRoIiwgIm5ld0RpcnR5UGF0aHMiLCAiZ2V0RGlydHlQYXRocyIsICJzZXQiLCAib3BlcmF0aW9ucyIsICJub3JtYWxpemUiLCAib3BlcmF0aW9uIiwgIm1hcmtzIiwgIkZMVVNISU5HIiwgIlByb21pc2UiLCAicmVzb2x2ZSIsICJ0aGVuIiwgIm9uQ2hhbmdlIiwgImxldmVscyIsICJkZXNjZW5kYW50cyIsICJmcm9tIiwgIk5vZGUiLCAibm9kZXMiLCAiX3JlZiIsICJjb25jYXQiLCAiYW5jZXN0b3JzIiwgInByZXZpb3VzUGF0aCIsICJwcmV2aW91cyIsICJvbGRBbmNlc3RvcnMiLCAibmV3QW5jZXN0b3JzIiwgImFuY2VzdG9yIiwgIm5ld1BhcmVudCIsICJuZXdJbmRleCIsICJyZXN1bHRQYXRoIiwgIm5leHRQYXRoIiwgImdldEZyYWdtZW50IiwgIm5vcm1hbGl6ZU5vZGUiLCAiZW50cnkiLCAiRWxlbWVudCIsICJpc0VsZW1lbnQiLCAiY2hpbGQiLCAiaW5zZXJ0Tm9kZXMiLCAic2hvdWxkSGF2ZUlubGluZXMiLCAiaXNFZGl0b3IiLCAiaXNJbmxpbmUiLCAiY3VycmVudE5vZGUiLCAicHJldiIsICJpc0xhc3QiLCAiaXNJbmxpbmVPclRleHQiLCAicmVtb3ZlTm9kZXMiLCAibmV3Q2hpbGQiLCAibWVyZ2VOb2RlcyIsICJzaG91bGROb3JtYWxpemUiLCAiaXRlcmF0aW9uIiwgImluaXRpYWxEaXJ0eVBhdGhzTGVuZ3RoIiwgIm1heEl0ZXJhdGlvbnMiLCAiRXJyb3IiLCAiYWJvdmUiLCAibW9kZSIsICJyZXZlcnNlIiwgImFkZE1hcmsiLCAicGFyZW50Tm9kZSIsICJwYXJlbnRQYXRoIiwgInBhcmVudCIsICJpc1ZvaWQiLCAibWFya2FibGVWb2lkIiwgImV4cGFuZGVkU2VsZWN0aW9uIiwgImlzRXhwYW5kZWQiLCAibWFya0FjY2VwdGluZ1ZvaWRTZWxlY3RlZCIsICJzZWxlY3RlZE5vZGUiLCAic2VsZWN0ZWRQYXRoIiwgInNldE5vZGVzIiwgInNwbGl0IiwgImVkZ2UiLCAiZCIsICJ0YXJnZXQiLCAicG9zaXRpb25zIiwgImRlbGV0ZUJhY2t3YXJkIiwgInVuaXQiLCAiZGVsZXRlRm9yd2FyZCIsICJkZWxldGVGcmFnbWVudCIsICJkaXJlY3Rpb24iLCAiaXNFbGVtZW50UmVhZE9ubHkiLCAiZmlyc3QiLCAiZ2V0Vm9pZCIsICJoYXNCbG9ja3MiLCAiZWxlbWVudCIsICJzb21lIiwgImlzQmxvY2siLCAiaGFzSW5saW5lcyIsICJoYXNQYXRoIiwgImhhc1RleHRzIiwgImluc2VydEJyZWFrIiwgInNwbGl0Tm9kZXMiLCAiYWx3YXlzIiwgImluc2VydE5vZGUiLCAiaW5zZXJ0U29mdEJyZWFrIiwgImlzRWRnZSIsICJpc1N0YXJ0IiwgImlzRW5kIiwgImlzRW1wdHkiLCAiaXNOb3JtYWxpemluZyIsICJOT1JNQUxJWklORyIsICJsYXN0IiwgIm1hcmtlZFZvaWQiLCAiYmxvY2siLCAicHJldk5vZGUiLCAicHJldlBhdGgiLCAiYmxvY2tQYXRoIiwgInBvaW50QWZ0ZXJMb2NhdGlvbiIsICJ0byIsICJzcGFuIiwgImluY2x1ZGVzIiwgInVuaXZlcnNhbCIsICJpZ25vcmVOb25TZWxlY3RhYmxlIiwgIm5vZGVFbnRyaWVzIiwgInBhc3MiLCAiaXNTZWxlY3RhYmxlIiwgImhpdCIsICJpc0xvd2VyIiwgImVtaXQiLCAiZm9yY2UiLCAiZ2V0RGlydHlQYXRoS2V5cyIsICJwb3BEaXJ0eVBhdGgiLCAicG9wIiwgImFsbFBhdGhzIiwgImFsbFBhdGhLZXlzIiwgIm1hcCIsICJkaXJ0eVBhdGgiLCAiXyIsICJwYXRoUmVmIiwgImN1cnJlbnQiLCAicmVmcyIsICJQQVRIX1JFRlMiLCAiZGVwdGgiLCAiZmlyc3RQYXRoIiwgImxhc3RQYXRoIiwgImNvbW1vbiIsICJQT0lOVF9SRUZTIiwgImlzTmV3QmxvY2siLCAiYmxvY2tUZXh0IiwgImxlYWZUZXh0UmVtYWluaW5nIiwgImxlYWZUZXh0T2Zmc2V0IiwgImUiLCAicyIsICJzdHJpbmciLCAiaXNGaXJzdCIsICJjYWxjRGlzdGFuY2UiLCAicG9pbnRCZWZvcmVMb2NhdGlvbiIsICJyYW5nZVJlZiIsICJSQU5HRV9SRUZTIiwgInJlbW92ZU1hcmsiLCAidW5zZXROb2RlcyIsICJzZXROb3JtYWxpemluZyIsICJ0IiwgInVuaGFuZ1JhbmdlIiwgImhhc1ByZXZpb3VzIiwgImVuZEJsb2NrIiwgInNraXAiLCAiZm4iLCAiZGVsZXRlVGV4dCIsICJfRWRpdG9yJHZvaWQiLCAiX0VkaXRvciR2b2lkMiIsICJoYW5naW5nIiwgImZ1cnRoZXN0Vm9pZCIsICJ2b2lkUGF0aCIsICJvcHRzIiwgImVuZE9mRG9jIiwgInN0YXJ0QmxvY2siLCAiaXNBY3Jvc3NCbG9ja3MiLCAiaXNTaW5nbGVUZXh0IiwgInN0YXJ0Tm9uRWRpdGFibGUiLCAiZW5kTm9uRWRpdGFibGUiLCAiaXNDb21tb24iLCAicmVtb3ZlZFRleHQiLCAiZmlsdGVyIiwgImZvckVhY2giLCAic3RhcnRVbnJlZiIsICJlbmRVbnJlZiIsICJzZWxlY3QiLCAiaW5saW5lRWxlbWVudE1hdGNoIiwgImlubGluZVBhdGgiLCAiYmxvY2tNYXRjaCIsICJpc0Jsb2NrU3RhcnQiLCAiaXNCbG9ja0VuZCIsICJpc0Jsb2NrRW1wdHkiLCAibWVyZ2VTdGFydCIsICJtZXJnZUVuZCIsICJtYXRjaGVyIiwgImlzUm9vdCIsICJzdGFydHMiLCAibWlkZGxlcyIsICJlbmRzIiwgInN0YXJ0aW5nIiwgImlubGluZU1hdGNoIiwgImlzSW5saW5lU3RhcnQiLCAiaXNJbmxpbmVFbmQiLCAibWlkZGxlUmVmIiwgImNvbGxhcHNlIiwgImRlc2VsZWN0IiwgInByb3BlcnRpZXMiLCAibmV3UHJvcGVydGllcyIsICJtb3ZlIiwgImlzQmFja3dhcmQiLCAic2V0UG9pbnQiLCAib2xkUHJvcHMiLCAibmV3UHJvcHMiLCAiayIsICJrZXlzIiwgImlzTm9kZSIsICJpc0F0RW5kIiwgImluZGV4IiwgImxpZnROb2RlcyIsICJwYXJlbnROb2RlRW50cnkiLCAidG9QYXRoIiwgIm1vdmVOb2RlcyIsICJzcGxpdFBhdGgiLCAiaGFzU2luZ2xlQ2hpbGROZXN0IiwgImNvbW1vblBhdGgiLCAiaXNQcmV2aW91c1NpYmxpbmciLCAiaXNTaWJsaW5nIiwgImVtcHR5QW5jZXN0b3IiLCAiZW1wdHlSZWYiLCAidG9SZWYiLCAidGFyZ2V0cyIsICJkZXB0aHMiLCAibWVyZ2UiLCAic3BsaXRNb2RlIiwgImVuZEF0RW5kT2ZOb2RlIiwgInN0YXJ0QXRTdGFydE9mTm9kZSIsICJwcm9wIiwgIm5vZGVQcm9wIiwgImhhc0NoYW5nZXMiLCAiZGVsZXRlUmFuZ2UiLCAiaGVpZ2h0IiwgImJlZm9yZVJlZiIsICJhZnRlclJlZiIsICJoaWdoZXN0IiwgInZvaWRNYXRjaCIsICJudWRnZSIsICJ2b2lkTm9kZSIsICJhZnRlclBhdGgiLCAic2libGluZ0hlaWdodCIsICJoaWdoZXN0UGF0aCIsICJsb3dlc3RQYXRoIiwgImV4dHJhY3RQcm9wcyIsICJfYWZ0ZXJSZWYiLCAidW53cmFwTm9kZXMiLCAiX2xvb3AiLCAiaW50ZXJzZWN0aW9uIiwgIndyYXBOb2RlcyIsICJyb290cyIsICJhIiwgInJvb3RQYXRoIiwgImNvbW1vbk5vZGVFbnRyeSIsICJjb21tb25Ob2RlIiwgIndyYXBwZXJQYXRoIiwgIndyYXBwZXIiLCAiX3JldCIsICJjcmVhdGVFZGl0b3IiLCAiX2xlbiIsICJhcmdzIiwgIl9rZXkiLCAiX2xlbjIiLCAiX2tleTIiLCAiX2xlbjMiLCAiX2tleTMiLCAiX2xlbjQiLCAiX2tleTQiLCAiX2xlbjUiLCAiX2tleTUiLCAiX2xlbjYiLCAiX2tleTYiLCAiX2xlbjciLCAiX2tleTciLCAiX2xlbjgiLCAiX2tleTgiLCAiX2xlbjkiLCAiX2tleTkiLCAiX2xlbjEwIiwgIl9rZXkxMCIsICJfbGVuMTEiLCAiX2tleTExIiwgIl9sZW4xMiIsICJfa2V5MTIiLCAiX2xlbjEzIiwgIl9rZXkxMyIsICJfbGVuMTQiLCAiX2tleTE0IiwgIl9sZW4xNSIsICJfa2V5MTUiLCAiX2xlbjE2IiwgIl9rZXkxNiIsICJfbGVuMTciLCAiX2tleTE3IiwgIl9sZW4xOCIsICJfa2V5MTgiLCAiX2xlbjE5IiwgIl9rZXkxOSIsICJfZGVsZXRlIiwgIl9sZW4yMCIsICJfa2V5MjAiLCAiX2xlbjIxIiwgIl9rZXkyMSIsICJfbGVuMjIiLCAiX2tleTIyIiwgIl9sZW4yMyIsICJfa2V5MjMiLCAiX2xlbjI0IiwgIl9rZXkyNCIsICJfbGVuMjUiLCAiX2tleTI1IiwgIl9sZW4yNiIsICJfa2V5MjYiLCAiZ2V0TWFya3MiLCAiX2xlbjI3IiwgIl9rZXkyNyIsICJfbGVuMjgiLCAiX2tleTI4IiwgIl9sZW4yOSIsICJfa2V5MjkiLCAiX2xlbjMwIiwgIl9rZXkzMCIsICJfbGVuMzEiLCAiX2tleTMxIiwgIl9sZW4zMiIsICJfa2V5MzIiLCAiX2xlbjMzIiwgIl9rZXkzMyIsICJfbGVuMzQiLCAiX2tleTM0IiwgIl9sZW4zNSIsICJfa2V5MzUiLCAiX2xlbjM2IiwgIl9rZXkzNiIsICJfbGVuMzciLCAiX2tleTM3IiwgIl9sZW4zOCIsICJfa2V5MzgiLCAiX2xlbjM5IiwgIl9rZXkzOSIsICJfbGVuNDAiLCAiX2tleTQwIiwgIl9sZW40MSIsICJfa2V5NDEiLCAiX2xlbjQyIiwgIl9rZXk0MiIsICJfbGVuNDMiLCAiX2tleTQzIiwgIl9sZW40NCIsICJfa2V5NDQiLCAiX2xlbjQ1IiwgIl9rZXk0NSIsICJfbGVuNDYiLCAiX2tleTQ2IiwgIl9sZW40NyIsICJfa2V5NDciLCAiX2xlbjQ4IiwgIl9rZXk0OCIsICJfbGVuNDkiLCAiX2tleTQ5IiwgIl9sZW41MCIsICJfa2V5NTAiLCAiX2xlbjUxIiwgIl9rZXk1MSIsICJfbGVuNTIiLCAiX2tleTUyIiwgIl9sZW41MyIsICJfa2V5NTMiLCAiX2xlbjU0IiwgIl9rZXk1NCIsICJfbGVuNTUiLCAiX2tleTU1IiwgIl9sZW41NiIsICJfa2V5NTYiLCAiX2xlbjU3IiwgIl9rZXk1NyIsICJfbGVuNTgiLCAiX2tleTU4IiwgIl9sZW41OSIsICJfa2V5NTkiLCAiX2xlbjYwIiwgIl9rZXk2MCIsICJfbGVuNjEiLCAiX2tleTYxIiwgIl9sZW42MiIsICJfa2V5NjIiLCAiX2xlbjYzIiwgIl9rZXk2MyIsICJfbGVuNjQiLCAiX2tleTY0IiwgIl9sZW42NSIsICJfa2V5NjUiLCAiX2xlbjY2IiwgIl9rZXk2NiIsICJfbGVuNjciLCAiX2tleTY3IiwgIl9sZW42OCIsICJfa2V5NjgiLCAiX2xlbjY5IiwgIl9rZXk2OSIsICJfbGVuNzAiLCAiX2tleTcwIiwgIl9sZW43MSIsICJfa2V5NzEiLCAiX2xlbjcyIiwgIl9rZXk3MiIsICJfbGVuNzMiLCAiX2tleTczIiwgIl92b2lkIiwgIl9sZW43NCIsICJfa2V5NzQiLCAiX2xlbjc1IiwgIl9rZXk3NSIsICJfbGVuNzYiLCAiX2tleTc2IiwgImVsIiwgIm5vZGVUeXBlIiwgImNhbk92ZXJmbG93IiwgIm92ZXJmbG93IiwgInNraXBPdmVyZmxvd0hpZGRlbkVsZW1lbnRzIiwgInQiLCAiaXNTY3JvbGxhYmxlIiwgImNsaWVudEhlaWdodCIsICJzY3JvbGxIZWlnaHQiLCAiY2xpZW50V2lkdGgiLCAic2Nyb2xsV2lkdGgiLCAic3R5bGUiLCAiZ2V0Q29tcHV0ZWRTdHlsZSIsICJvdmVyZmxvd1kiLCAib3ZlcmZsb3dYIiwgImZyYW1lIiwgIm93bmVyRG9jdW1lbnQiLCAiZGVmYXVsdFZpZXciLCAiZnJhbWVFbGVtZW50IiwgImUiLCAic2Nyb2xsaW5nRWRnZVN0YXJ0IiwgInNjcm9sbGluZ0VkZ2VFbmQiLCAic2Nyb2xsaW5nU2l6ZSIsICJzY3JvbGxpbmdCb3JkZXJTdGFydCIsICJzY3JvbGxpbmdCb3JkZXJFbmQiLCAiZWxlbWVudEVkZ2VTdGFydCIsICJlbGVtZW50RWRnZUVuZCIsICJlbGVtZW50U2l6ZSIsICJ0YXJnZXQiLCAib3B0aW9ucyIsICJ3aW5kb3dXaXRoVmlld3BvcnQiLCAid2luZG93IiwgInNjcm9sbE1vZGUiLCAiYmxvY2siLCAiaW5saW5lIiwgImJvdW5kYXJ5IiwgImNoZWNrQm91bmRhcnkiLCAibm9kZSIsICJpc0VsZW1lbnQiLCAiZWxlbWVudCIsICJwYXJlbnQiLCAic2Nyb2xsaW5nRWxlbWVudCIsICJkb2N1bWVudCIsICJkb2N1bWVudEVsZW1lbnQiLCAiZnJhbWVzIiwgImN1cnNvciIsICJwYXJlbnRFbGVtZW50IiwgImdldFJvb3ROb2RlIiwgImhvc3QiLCAicHVzaCIsICJib2R5IiwgInZpZXdwb3J0V2lkdGgiLCAidmlzdWFsVmlld3BvcnQiLCAid2lkdGgiLCAiaW5uZXJXaWR0aCIsICJ2aWV3cG9ydEhlaWdodCIsICJoZWlnaHQiLCAiaW5uZXJIZWlnaHQiLCAic2Nyb2xsWCIsICJwYWdlWE9mZnNldCIsICJ2aWV3cG9ydFkiLCAic2Nyb2xsWSIsICJwYWdlWU9mZnNldCIsICJfdGFyZ2V0JGdldEJvdW5kaW5nQ2wiLCAiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwgInRhcmdldEhlaWdodCIsICJ0YXJnZXRXaWR0aCIsICJ0YXJnZXRUb3AiLCAidG9wIiwgInRhcmdldFJpZ2h0IiwgInJpZ2h0IiwgInRhcmdldEJvdHRvbSIsICJib3R0b20iLCAidGFyZ2V0TGVmdCIsICJsZWZ0IiwgInRhcmdldEJsb2NrIiwgInRhcmdldElubGluZSIsICJjb21wdXRhdGlvbnMiLCAiaW5kZXgiLCAibGVuZ3RoIiwgIl9mcmFtZSRnZXRCb3VuZGluZ0NsaSIsICJmcmFtZVN0eWxlIiwgImJvcmRlckxlZnQiLCAicGFyc2VJbnQiLCAiYm9yZGVyTGVmdFdpZHRoIiwgImJvcmRlclRvcCIsICJib3JkZXJUb3BXaWR0aCIsICJib3JkZXJSaWdodFdpZHRoIiwgImJvcmRlckJvdHRvbSIsICJib3JkZXJCb3R0b21XaWR0aCIsICJibG9ja1Njcm9sbCIsICJpbmxpbmVTY3JvbGwiLCAic2Nyb2xsYmFyV2lkdGgiLCAib2Zmc2V0V2lkdGgiLCAiYm9yZGVyUmlnaHQiLCAic2Nyb2xsYmFySGVpZ2h0IiwgIm9mZnNldEhlaWdodCIsICJzY2FsZVgiLCAic2NhbGVZIiwgImFsaWduTmVhcmVzdCIsICJ2aWV3cG9ydFgiLCAiTWF0aCIsICJtYXgiLCAic2Nyb2xsTGVmdCIsICJzY3JvbGxUb3AiLCAibWluIiwgIlJlc2l6ZU9ic2VydmVyQm94T3B0aW9ucyIsICJmcmVlemUiLCAiUmVzaXplT2JzZXJ2ZXJTaXplIiwgImZyZWV6ZSIsICJET01SZWN0UmVhZE9ubHkiLCAiZnJlZXplIiwgImlzRWxlbWVudCIsICJnbG9iYWwiLCAiZ2xvYmFsIiwgImZyZWV6ZSIsICJSZXNpemVPYnNlcnZlckVudHJ5IiwgImZyZWV6ZSIsICJub2RlIiwgInBhcmVudCIsICJjYWxsYmFja3MiLCAicHJvY2VzcyIsICJSZXNpemVPYnNlcnZlciIsICJTY2hlZHVsZXIiLCAicHJvY2VzcyIsICJnbG9iYWwiLCAibiIsICJSZXNpemVPYnNlcnZhdGlvbiIsICJzaXplIiwgIlJlc2l6ZU9ic2VydmVyRGV0YWlsIiwgImkiLCAiUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyIiwgIlJlc2l6ZU9ic2VydmVyIiwgImlzRWxlbWVudCIsICJfZGVmaW5lUHJvcGVydHkiLCAiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UiLCAiaSIsICJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCAib2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSIsICJuIiwgIktleSIsICJjb25zdHJ1Y3RvciIsICJpZCIsICJOT0RFX1RPX0lOREVYIiwgIldlYWtNYXAiLCAiTk9ERV9UT19QQVJFTlQiLCAiRURJVE9SX1RPX1dJTkRPVyIsICJFRElUT1JfVE9fRUxFTUVOVCIsICJFRElUT1JfVE9fUExBQ0VIT0xERVJfRUxFTUVOVCIsICJFTEVNRU5UX1RPX05PREUiLCAiTk9ERV9UT19FTEVNRU5UIiwgIk5PREVfVE9fS0VZIiwgIkVESVRPUl9UT19LRVlfVE9fRUxFTUVOVCIsICJJU19SRUFEX09OTFkiLCAiSVNfRk9DVVNFRCIsICJJU19DT01QT1NJTkciLCAiRURJVE9SX1RPX1VTRVJfU0VMRUNUSU9OIiwgIkVESVRPUl9UT19PTl9DSEFOR0UiLCAiRURJVE9SX1RPX1NDSEVEVUxFX0ZMVVNIIiwgIkVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUyIsICJFRElUT1JfVE9fVVNFUl9NQVJLUyIsICJFRElUT1JfVE9fUEVORElOR19ESUZGUyIsICJFRElUT1JfVE9fUEVORElOR19BQ1RJT04iLCAiRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OIiwgIkVESVRPUl9UT19GT1JDRV9SRU5ERVIiLCAiUExBQ0VIT0xERVJfU1lNQk9MIiwgIlN5bWJvbCIsICJNQVJLX1BMQUNFSE9MREVSX1NZTUJPTCIsICJET01UZXh0IiwgImdsb2JhbFRoaXMiLCAiVGV4dCIsICJnZXREZWZhdWx0VmlldyIsICJ2YWx1ZSIsICJvd25lckRvY3VtZW50IiwgImRlZmF1bHRWaWV3IiwgImlzRE9NQ29tbWVudCIsICJpc0RPTU5vZGUiLCAibm9kZVR5cGUiLCAiaXNET01FbGVtZW50IiwgIndpbmRvdyIsICJOb2RlIiwgImlzRE9NU2VsZWN0aW9uIiwgImFuY2hvck5vZGUiLCAiU2VsZWN0aW9uIiwgImlzRE9NVGV4dCIsICJpc1BsYWluVGV4dE9ubHlQYXN0ZSIsICJldmVudCIsICJjbGlwYm9hcmREYXRhIiwgImdldERhdGEiLCAidHlwZXMiLCAibGVuZ3RoIiwgIm5vcm1hbGl6ZURPTVBvaW50IiwgImRvbVBvaW50IiwgIm5vZGUiLCAib2Zmc2V0IiwgImNoaWxkTm9kZXMiLCAiaXNMYXN0IiwgImluZGV4IiwgImdldEVkaXRhYmxlQ2hpbGRBbmRJbmRleCIsICJnZXRFZGl0YWJsZUNoaWxkIiwgInRleHRDb250ZW50IiwgImhhc1NoYWRvd1Jvb3QiLCAicGFyZW50IiwgInBhcmVudE5vZGUiLCAidG9TdHJpbmciLCAiZGlyZWN0aW9uIiwgImNoaWxkIiwgInRyaWVkRm9yd2FyZCIsICJ0cmllZEJhY2t3YXJkIiwgImdldEF0dHJpYnV0ZSIsICJnZXRQbGFpblRleHQiLCAiZG9tTm9kZSIsICJ0ZXh0IiwgIm5vZGVWYWx1ZSIsICJjaGlsZE5vZGUiLCAiQXJyYXkiLCAiZnJvbSIsICJkaXNwbGF5IiwgImdldENvbXB1dGVkU3R5bGUiLCAiZ2V0UHJvcGVydHlWYWx1ZSIsICJ0YWdOYW1lIiwgImNhdGNoU2xhdGVGcmFnbWVudCIsICJnZXRTbGF0ZUZyYWdtZW50QXR0cmlidXRlIiwgImRhdGFUcmFuc2ZlciIsICJodG1sRGF0YSIsICJmcmFnbWVudCIsICJtYXRjaCIsICJpc1RyYWNrZWRNdXRhdGlvbiIsICJlZGl0b3IiLCAibXV0YXRpb24iLCAiYmF0Y2giLCAidGFyZ2V0IiwgIm1hdGNoZXMiLCAiZG9jdW1lbnQiLCAiUmVhY3RFZGl0b3IiLCAiZ2V0V2luZG93IiwgImNvbnRhaW5zIiwgImhhc0RPTU5vZGUiLCAiZWRpdGFibGUiLCAicGFyZW50TXV0YXRpb24iLCAiZmluZCIsICJhZGRlZE5vZGVzIiwgInJlbW92ZWROb2RlcyIsICJJU19SRUFDVF9WRVJTSU9OXzE3X09SX0FCT1ZFIiwgInBhcnNlSW50IiwgIlJlYWN0IiwgInZlcnNpb24iLCAic3BsaXQiLCAiSVNfSU9TIiwgIm5hdmlnYXRvciIsICJ0ZXN0IiwgInVzZXJBZ2VudCIsICJNU1N0cmVhbSIsICJJU19BUFBMRSIsICJJU19BTkRST0lEIiwgIklTX0ZJUkVGT1giLCAiSVNfU0FGQVJJIiwgIklTX0VER0VfTEVHQUNZIiwgIklTX0NIUk9NRSIsICJJU19DSFJPTUVfTEVHQUNZIiwgIklTX0ZJUkVGT1hfTEVHQUNZIiwgIklTX1VDX01PQklMRSIsICJJU19XRUNIQVRCUk9XU0VSIiwgIkNBTl9VU0VfRE9NIiwgImNyZWF0ZUVsZW1lbnQiLCAiSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUIiwgIklucHV0RXZlbnQiLCAicHJvdG90eXBlIiwgImdldFRhcmdldFJhbmdlcyIsICJpc0NvbXBvc2luZyIsICJnZXQiLCAiRXJyb3IiLCAiZmluZEtleSIsICJrZXkiLCAic2V0IiwgImZpbmRQYXRoIiwgInBhdGgiLCAiRWRpdG9yIiwgImlzRWRpdG9yIiwgInVuc2hpZnQiLCAiU2NydWJiZXIiLCAic3RyaW5naWZ5IiwgImZpbmREb2N1bWVudE9yU2hhZG93Um9vdCIsICJlbCIsICJ0b0RPTU5vZGUiLCAicm9vdCIsICJnZXRSb290Tm9kZSIsICJEb2N1bWVudCIsICJTaGFkb3dSb290IiwgImdldFNlbGVjdGlvbiIsICJpc0ZvY3VzZWQiLCAiaXNSZWFkT25seSIsICJibHVyIiwgImFjdGl2ZUVsZW1lbnQiLCAiZm9jdXMiLCAicHJldmVudFNjcm9sbCIsICJkZXNlbGVjdCIsICJzZWxlY3Rpb24iLCAiZG9tU2VsZWN0aW9uIiwgInJhbmdlQ291bnQiLCAicmVtb3ZlQWxsUmFuZ2VzIiwgIlRyYW5zZm9ybXMiLCAib3B0aW9ucyIsICJlZGl0b3JFbCIsICJ0YXJnZXRFbCIsICJwYXJlbnRFbGVtZW50IiwgImVyciIsICJtZXNzYWdlIiwgImluY2x1ZGVzIiwgImNsb3Nlc3QiLCAiaXNDb250ZW50RWRpdGFibGUiLCAiaW5zZXJ0RGF0YSIsICJkYXRhIiwgImluc2VydEZyYWdtZW50RGF0YSIsICJpbnNlcnRUZXh0RGF0YSIsICJzZXRGcmFnbWVudERhdGEiLCAib3JpZ2luRXZlbnQiLCAiS0VZX1RPX0VMRU1FTlQiLCAidG9ET01Qb2ludCIsICJwb2ludCIsICJ2b2lkIiwgImF0IiwgInNlbGVjdG9yIiwgInRleHRzIiwgInF1ZXJ5U2VsZWN0b3JBbGwiLCAic3RhcnQiLCAiYXR0ciIsICJ0cnVlTGVuZ3RoIiwgImVuZCIsICJuZXh0VGV4dCIsICJoYXNBdHRyaWJ1dGUiLCAiZG9tVGV4dCIsICJzdGFydHNXaXRoIiwgIk1hdGgiLCAibWluIiwgIm1heCIsICJ0b0RPTVJhbmdlIiwgInJhbmdlIiwgImFuY2hvciIsICJpc0JhY2t3YXJkIiwgIlJhbmdlIiwgImRvbUFuY2hvciIsICJkb21Gb2N1cyIsICJpc0NvbGxhcHNlZCIsICJkb21SYW5nZSIsICJjcmVhdGVSYW5nZSIsICJzdGFydE5vZGUiLCAic3RhcnRPZmZzZXQiLCAiZW5kTm9kZSIsICJlbmRPZmZzZXQiLCAic3RhcnRFbCIsICJpc1N0YXJ0QXRaZXJvV2lkdGgiLCAiZW5kRWwiLCAiaXNFbmRBdFplcm9XaWR0aCIsICJzZXRTdGFydCIsICJzZXRFbmQiLCAidG9TbGF0ZU5vZGUiLCAiZG9tRWwiLCAiZmluZEV2ZW50UmFuZ2UiLCAibmF0aXZlRXZlbnQiLCAiY2xpZW50WCIsICJ4IiwgImNsaWVudFkiLCAieSIsICJFbGVtZW50IiwgImlzRWxlbWVudCIsICJpc1ZvaWQiLCAicmVjdCIsICJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCAiaXNQcmV2IiwgImlzSW5saW5lIiwgImxlZnQiLCAid2lkdGgiLCAidG9wIiwgImhlaWdodCIsICJlZGdlIiwgImJlZm9yZSIsICJhZnRlciIsICJjYXJldFJhbmdlRnJvbVBvaW50IiwgInBvc2l0aW9uIiwgImNhcmV0UG9zaXRpb25Gcm9tUG9pbnQiLCAib2Zmc2V0Tm9kZSIsICJ0b1NsYXRlUmFuZ2UiLCAiZXhhY3RNYXRjaCIsICJzdXBwcmVzc1Rocm93IiwgInRvU2xhdGVQb2ludCIsICJuZWFyZXN0Tm9kZSIsICJuZWFyZXN0T2Zmc2V0IiwgInRleHROb2RlIiwgInBvdGVudGlhbFZvaWROb2RlIiwgInZvaWROb2RlIiwgImxlYWZOb2RlIiwgImNvbnRlbnRzIiwgImNsb25lQ29udGVudHMiLCAicmVtb3ZhbHMiLCAic2xpY2UiLCAiY2FsbCIsICJmb3JFYWNoIiwgInRleHRDb250ZXh0IiwgInJlbW92ZUNoaWxkIiwgImxlYWZOb2RlcyIsICJjdXJyZW50IiwgImVuZHNXaXRoIiwgInNsYXRlTm9kZSIsICJxdWVyeVNlbGVjdG9yIiwgInN0YXJ0Q29udGFpbmVyIiwgImFuY2hvck9mZnNldCIsICJmb2N1c05vZGUiLCAiZm9jdXNPZmZzZXQiLCAiZW5kQ29udGFpbmVyIiwgImNvbGxhcHNlZCIsICJpc0VuZCIsICJpc1N0YXJ0IiwgImlzRXhwYW5kZWQiLCAiaXNGb3J3YXJkIiwgIm1vZGUiLCAidW5oYW5nUmFuZ2UiLCAidm9pZHMiLCAiaGFzUmFuZ2UiLCAiaGFzUGF0aCIsICJoYXNUYXJnZXQiLCAiaGFzRWRpdGFibGVUYXJnZXQiLCAiaGFzU2VsZWN0YWJsZVRhcmdldCIsICJpc1RhcmdldEluc2lkZU5vblJlYWRvbmx5Vm9pZCIsICJhbmRyb2lkU2NoZWR1bGVGbHVzaCIsICJhbmRyb2lkUGVuZGluZ0RpZmZzIiwgInVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QiLCAidXNlTGF5b3V0RWZmZWN0IiwgInVzZUVmZmVjdCIsICJzaGFsbG93Q29tcGFyZSIsICJvYmoxIiwgIm9iajIiLCAiT2JqZWN0IiwgImtleXMiLCAiZXZlcnkiLCAiaGFzT3duUHJvcGVydHkiLCAiaXNEZWNvcmF0b3JSYW5nZUxpc3RFcXVhbCIsICJsaXN0IiwgImFub3RoZXIiLCAib3RoZXIiLCAicmFuZ2VPd25Qcm9wcyIsICJfZXhjbHVkZWQkMyIsICJvdGhlck93blByb3BzIiwgIl9leGNsdWRlZDIkMSIsICJlcXVhbHMiLCAiU3RyaW5nIiwgInByb3BzIiwgImxlYWYiLCAidXNlU2xhdGVTdGF0aWMiLCAicGFyZW50UGF0aCIsICJQYXRoIiwgImlzTWFya1BsYWNlaG9sZGVyIiwgIlplcm9XaWR0aFN0cmluZyIsICJzdHJpbmciLCAiY2hpbGRyZW4iLCAiaXNMaW5lQnJlYWsiLCAiVGV4dFN0cmluZyIsICJpc1RyYWlsaW5nIiwgInJlZiIsICJ1c2VSZWYiLCAiZ2V0VGV4dENvbnRlbnQiLCAidGV4dFdpdGhUcmFpbGluZyIsICJhdHRyaWJ1dGVzIiwgIkVkaXRvckNvbnRleHQiLCAiY3JlYXRlQ29udGV4dCIsICJ1c2VDb250ZXh0IiwgIkxlYWYiLCAicmVuZGVyUGxhY2Vob2xkZXIiLCAicmVuZGVyTGVhZiIsICJEZWZhdWx0TGVhZiIsICJsYXN0UGxhY2Vob2xkZXJSZWYiLCAicGxhY2Vob2xkZXJSZWYiLCAicGxhY2Vob2xkZXJSZXNpemVPYnNlcnZlciIsICJkaXNjb25uZWN0IiwgInBsYWNlaG9sZGVyRWwiLCAiZGVsZXRlIiwgIm9ic2VydmUiLCAiUmVzaXplT2JzZXJ2ZXIiLCAiUmVzaXplT2JzZXJ2ZXJQb2x5ZmlsbCIsICJmb3JjZVJlbmRlciIsICJwbGFjZWhvbGRlclByb3BzIiwgInBsYWNlaG9sZGVyIiwgInN0eWxlIiwgInBvaW50ZXJFdmVudHMiLCAibWF4V2lkdGgiLCAib3BhY2l0eSIsICJ1c2VyU2VsZWN0IiwgInRleHREZWNvcmF0aW9uIiwgImNvbnRlbnRFZGl0YWJsZSIsICJGcmFnbWVudCIsICJNZW1vaXplZExlYWYiLCAibWVtbyIsICJwcmV2IiwgIm5leHQiLCAiZGVjb3JhdGlvbnMiLCAibGVhdmVzIiwgIlNsYXRlVGV4dCIsICJwdXNoIiwgIk1lbW9pemVkVGV4dCIsICJlbGVtZW50IiwgInJlbmRlckVsZW1lbnQiLCAicCIsICJEZWZhdWx0RWxlbWVudCIsICJyZWFkT25seSIsICJ1c2VSZWFkT25seSIsICJ1c2VDYWxsYmFjayIsICJ1c2VDaGlsZHJlbiIsICJoYXNJbmxpbmVzIiwgImRpciIsICJnZXREaXJlY3Rpb24iLCAiVGFnIiwgImNvbG9yIiwgIm91dGxpbmUiLCAiTWVtb2l6ZWRFbGVtZW50IiwgIkRlY29yYXRlQ29udGV4dCIsICJ1c2VEZWNvcmF0ZSIsICJTZWxlY3RlZENvbnRleHQiLCAidXNlQ2hpbGRyZW4iLCAicHJvcHMiLCAiZGVjb3JhdGlvbnMiLCAibm9kZSIsICJyZW5kZXJFbGVtZW50IiwgInJlbmRlclBsYWNlaG9sZGVyIiwgInJlbmRlckxlYWYiLCAic2VsZWN0aW9uIiwgImRlY29yYXRlIiwgInVzZURlY29yYXRlIiwgImVkaXRvciIsICJ1c2VTbGF0ZVN0YXRpYyIsICJwYXRoIiwgIlJlYWN0RWRpdG9yIiwgImZpbmRQYXRoIiwgImNoaWxkcmVuIiwgImlzTGVhZkJsb2NrIiwgIkVsZW1lbnQiLCAiaXNFbGVtZW50IiwgImlzSW5saW5lIiwgIkVkaXRvciIsICJoYXNJbmxpbmVzIiwgImkiLCAibGVuZ3RoIiwgInAiLCAiY29uY2F0IiwgIm4iLCAia2V5IiwgImZpbmRLZXkiLCAicmFuZ2UiLCAic2VsIiwgIlJhbmdlIiwgImludGVyc2VjdGlvbiIsICJkcyIsICJkZWMiLCAiZCIsICJwdXNoIiwgIlJlYWN0IiwgIlNlbGVjdGVkQ29udGV4dCIsICJQcm92aWRlciIsICJpZCIsICJ2YWx1ZSIsICJFbGVtZW50Q29tcG9uZW50IiwgImVsZW1lbnQiLCAiVGV4dENvbXBvbmVudCIsICJpc0xhc3QiLCAicGFyZW50IiwgInRleHQiLCAiTk9ERV9UT19JTkRFWCIsICJzZXQiLCAiTk9ERV9UT19QQVJFTlQiLCAiUmVhZE9ubHlDb250ZXh0IiwgImNyZWF0ZUNvbnRleHQiLCAidXNlUmVhZE9ubHkiLCAidXNlQ29udGV4dCIsICJTbGF0ZUNvbnRleHQiLCAidXNlU2xhdGUiLCAiY29udGV4dCIsICJFcnJvciIsICJUUklQTEVfQ0xJQ0siLCAiSE9US0VZUyIsICJib2xkIiwgImNvbXBvc2UiLCAibW92ZUJhY2t3YXJkIiwgIm1vdmVGb3J3YXJkIiwgIm1vdmVXb3JkQmFja3dhcmQiLCAibW92ZVdvcmRGb3J3YXJkIiwgImRlbGV0ZUJhY2t3YXJkIiwgImRlbGV0ZUZvcndhcmQiLCAiZXh0ZW5kQmFja3dhcmQiLCAiZXh0ZW5kRm9yd2FyZCIsICJpdGFsaWMiLCAiaW5zZXJ0U29mdEJyZWFrIiwgInNwbGl0QmxvY2siLCAidW5kbyIsICJBUFBMRV9IT1RLRVlTIiwgIm1vdmVMaW5lQmFja3dhcmQiLCAibW92ZUxpbmVGb3J3YXJkIiwgImRlbGV0ZUxpbmVCYWNrd2FyZCIsICJkZWxldGVMaW5lRm9yd2FyZCIsICJkZWxldGVXb3JkQmFja3dhcmQiLCAiZGVsZXRlV29yZEZvcndhcmQiLCAiZXh0ZW5kTGluZUJhY2t3YXJkIiwgImV4dGVuZExpbmVGb3J3YXJkIiwgInJlZG8iLCAidHJhbnNwb3NlQ2hhcmFjdGVyIiwgIldJTkRPV1NfSE9US0VZUyIsICJjcmVhdGUiLCAia2V5IiwgImdlbmVyaWMiLCAiYXBwbGUiLCAid2luZG93cyIsICJpc0dlbmVyaWMiLCAiaXNLZXlIb3RrZXkiLCAiaXNBcHBsZSIsICJpc1dpbmRvd3MiLCAiZXZlbnQiLCAiSVNfQVBQTEUiLCAiaXNCb2xkIiwgImlzQ29tcG9zZSIsICJpc01vdmVCYWNrd2FyZCIsICJpc01vdmVGb3J3YXJkIiwgImlzRGVsZXRlQmFja3dhcmQiLCAiaXNEZWxldGVGb3J3YXJkIiwgImlzRGVsZXRlTGluZUJhY2t3YXJkIiwgImlzRGVsZXRlTGluZUZvcndhcmQiLCAiaXNEZWxldGVXb3JkQmFja3dhcmQiLCAiaXNEZWxldGVXb3JkRm9yd2FyZCIsICJpc0V4dGVuZEJhY2t3YXJkIiwgImlzRXh0ZW5kRm9yd2FyZCIsICJpc0V4dGVuZExpbmVCYWNrd2FyZCIsICJpc0V4dGVuZExpbmVGb3J3YXJkIiwgImlzSXRhbGljIiwgImlzTW92ZUxpbmVCYWNrd2FyZCIsICJpc01vdmVMaW5lRm9yd2FyZCIsICJpc01vdmVXb3JkQmFja3dhcmQiLCAiaXNNb3ZlV29yZEZvcndhcmQiLCAiaXNSZWRvIiwgImlzU29mdEJyZWFrIiwgImlzU3BsaXRCbG9jayIsICJpc1RyYW5zcG9zZUNoYXJhY3RlciIsICJpc1VuZG8iLCAiY3JlYXRlUmVzdG9yZURvbU1hbmFnZXIiLCAiZWRpdG9yIiwgInJlY2VpdmVkVXNlcklucHV0IiwgImJ1ZmZlcmVkTXV0YXRpb25zIiwgImNsZWFyIiwgInJlZ2lzdGVyTXV0YXRpb25zIiwgIm11dGF0aW9ucyIsICJjdXJyZW50IiwgInRyYWNrZWRNdXRhdGlvbnMiLCAiZmlsdGVyIiwgIm11dGF0aW9uIiwgImlzVHJhY2tlZE11dGF0aW9uIiwgInB1c2giLCAicmVzdG9yZURPTSIsICJyZXZlcnNlIiwgImZvckVhY2giLCAidHlwZSIsICJ0YXJnZXQiLCAidGV4dENvbnRlbnQiLCAib2xkVmFsdWUiLCAicmVtb3ZlZE5vZGVzIiwgIm5vZGUiLCAiaW5zZXJ0QmVmb3JlIiwgIm5leHRTaWJsaW5nIiwgImFkZGVkTm9kZXMiLCAicmVtb3ZlQ2hpbGQiLCAiTVVUQVRJT05fT0JTRVJWRVJfQ09ORklHIiwgInN1YnRyZWUiLCAiY2hpbGRMaXN0IiwgImNoYXJhY3RlckRhdGEiLCAiY2hhcmFjdGVyRGF0YU9sZFZhbHVlIiwgIlJlc3RvcmVET01Db21wb25lbnQiLCAiQ29tcG9uZW50IiwgImNvbnN0cnVjdG9yIiwgIm9ic2VydmUiLCAicHJvcHMiLCAiRXJyb3IiLCAibXV0YXRpb25PYnNlcnZlciIsICJjb21wb25lbnREaWRNb3VudCIsICJjb250ZXh0IiwgIm1hbmFnZXIiLCAiTXV0YXRpb25PYnNlcnZlciIsICJnZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSIsICJwZW5kaW5nTXV0YXRpb25zIiwgInRha2VSZWNvcmRzIiwgImxlbmd0aCIsICJkaXNjb25uZWN0IiwgImNvbXBvbmVudERpZFVwZGF0ZSIsICJjb21wb25lbnRXaWxsVW5tb3VudCIsICJyZW5kZXIiLCAiY2hpbGRyZW4iLCAiRWRpdG9yQ29udGV4dCIsICJSZXN0b3JlRE9NIiwgIklTX0FORFJPSUQiLCAiUmVhY3QiLCAidmVyaWZ5RGlmZlN0YXRlIiwgInRleHREaWZmIiwgInBhdGgiLCAiZGlmZiIsICJFZGl0b3IiLCAiaGFzUGF0aCIsICJOb2RlIiwgImdldCIsICJUZXh0IiwgImlzVGV4dCIsICJzdGFydCIsICJ0ZXh0IiwgInNsaWNlIiwgIm5leHRQYXRoIiwgIlBhdGgiLCAibmV4dCIsICJuZXh0Tm9kZSIsICJzdGFydHNXaXRoIiwgImFwcGx5U3RyaW5nRGlmZiIsICJkaWZmcyIsICJyZWR1Y2UiLCAiZW5kIiwgImxvbmdlc3RDb21tb25QcmVmaXhMZW5ndGgiLCAic3RyIiwgImFub3RoZXIiLCAiTWF0aCIsICJtaW4iLCAiaSIsICJjaGFyQXQiLCAibG9uZ2VzdENvbW1vblN1ZmZpeExlbmd0aCIsICJtYXgiLCAibm9ybWFsaXplU3RyaW5nRGlmZiIsICJ0YXJnZXRUZXh0IiwgInJlbW92ZWRUZXh0IiwgInByZWZpeExlbmd0aCIsICJzdWZmaXhMZW5ndGgiLCAibm9ybWFsaXplZCIsICJtZXJnZVN0cmluZ0RpZmZzIiwgImEiLCAiYiIsICJvdmVybGFwIiwgImFwcGxpZWQiLCAic2xpY2VFbmQiLCAidGFyZ2V0UmFuZ2UiLCAiYW5jaG9yIiwgIm9mZnNldCIsICJmb2N1cyIsICJub3JtYWxpemVQb2ludCIsICJwb2ludCIsICJsZWFmIiwgInBhcmVudEJsb2NrIiwgImFib3ZlIiwgIm1hdGNoIiwgIm4iLCAiRWxlbWVudCIsICJpc0VsZW1lbnQiLCAiaXNCbG9jayIsICJhdCIsICJlbnRyeSIsICJpc0Rlc2NlbmRhbnQiLCAibm9ybWFsaXplUmFuZ2UiLCAicmFuZ2UiLCAiUmFuZ2UiLCAiaXNDb2xsYXBzZWQiLCAidHJhbnNmb3JtUGVuZGluZ1BvaW50IiwgIm9wIiwgInBlbmRpbmdEaWZmcyIsICJFRElUT1JfVE9fUEVORElOR19ESUZGUyIsICJmaW5kIiwgImVxdWFscyIsICJQb2ludCIsICJ0cmFuc2Zvcm0iLCAiYWZmaW5pdHkiLCAidHJhbnNmb3JtZWQiLCAicG9zaXRpb24iLCAidHJhbnNmb3JtUGVuZGluZ1JhbmdlIiwgInRyYW5zZm9ybVRleHREaWZmIiwgImlkIiwgIm5ld1BhdGgiLCAiUkVTT0xWRV9ERUxBWSIsICJGTFVTSF9ERUxBWSIsICJkZWJ1ZyIsICJjcmVhdGVBbmRyb2lkSW5wdXRNYW5hZ2VyIiwgInNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2UiLCAib25ET01TZWxlY3Rpb25DaGFuZ2UiLCAiZmx1c2hpbmciLCAiY29tcG9zaXRpb25FbmRUaW1lb3V0SWQiLCAiZmx1c2hUaW1lb3V0SWQiLCAiYWN0aW9uVGltZW91dElkIiwgImlkQ291bnRlciIsICJpbnNlcnRQb3NpdGlvbkhpbnQiLCAiYXBwbHlQZW5kaW5nU2VsZWN0aW9uIiwgInBlbmRpbmdTZWxlY3Rpb24iLCAiRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OIiwgImRlbGV0ZSIsICJzZWxlY3Rpb24iLCAiVHJhbnNmb3JtcyIsICJzZWxlY3QiLCAicGVyZm9ybUFjdGlvbiIsICJhY3Rpb24iLCAiRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OIiwgImlzUG9pbnQiLCAicnVuIiwgImZsdXNoIiwgImNsZWFyVGltZW91dCIsICJoYXNQZW5kaW5nRGlmZnMiLCAiaGFzUGVuZGluZ0FjdGlvbiIsICJzZXRUaW1lb3V0IiwgInNlbGVjdGlvblJlZiIsICJyYW5nZVJlZiIsICJFRElUT1JfVE9fVVNFUl9NQVJLUyIsICJzZXQiLCAibWFya3MiLCAic2NoZWR1bGVTZWxlY3Rpb25DaGFuZ2UiLCAicGVuZGluZ01hcmtzIiwgIkVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUyIsICJ1bmRlZmluZWQiLCAiaW5zZXJ0VGV4dCIsICJkZWxldGVGcmFnbWVudCIsICJjYW5jZWwiLCAidW5yZWYiLCAidXNlck1hcmtzIiwgIm9uQ2hhbmdlIiwgImhhbmRsZUNvbXBvc2l0aW9uRW5kIiwgIl9ldmVudCIsICJJU19DT01QT1NJTkciLCAiaGFuZGxlQ29tcG9zaXRpb25TdGFydCIsICJ1cGRhdGVQbGFjZWhvbGRlclZpc2liaWxpdHkiLCAiZm9yY2VIaWRlIiwgInBsYWNlaG9sZGVyRWxlbWVudCIsICJFRElUT1JfVE9fUExBQ0VIT0xERVJfRUxFTUVOVCIsICJzdHlsZSIsICJkaXNwbGF5IiwgInJlbW92ZVByb3BlcnR5IiwgInN0b3JlRGlmZiIsICJpZHgiLCAiZmluZEluZGV4IiwgImNoYW5nZSIsICJtZXJnZWQiLCAic3BsaWNlIiwgIl9vYmplY3RTcHJlYWQkMyIsICJzY2hlZHVsZUFjdGlvbiIsICJoYW5kbGVET01CZWZvcmVJbnB1dCIsICJpbnB1dFR5cGUiLCAiZGF0YSIsICJkYXRhVHJhbnNmZXIiLCAibmF0aXZlVGFyZ2V0UmFuZ2UiLCAiZ2V0VGFyZ2V0UmFuZ2VzIiwgIlJlYWN0RWRpdG9yIiwgInRvU2xhdGVSYW5nZSIsICJleGFjdE1hdGNoIiwgInN1cHByZXNzVGhyb3ciLCAid2luZG93IiwgImdldFdpbmRvdyIsICJkb21TZWxlY3Rpb24iLCAiZ2V0U2VsZWN0aW9uIiwgImlzRXhwYW5kZWQiLCAiZWRnZXMiLCAiZGlyZWN0aW9uIiwgImVuZHNXaXRoIiwgInRhcmdldE5vZGUiLCAibmF0aXZlQ29sbGFwc2VkIiwgImlzRE9NU2VsZWN0aW9uIiwgImNvbGxhcHNlZCIsICJ1bml0IiwgImluc2VydEJyZWFrIiwgIm5hbWUiLCAiaW5zZXJ0RGF0YSIsICJpbmNsdWRlcyIsICJyZXBsYWNlIiwgImhpbnRQb3NpdGlvbiIsICJzZWFyY2giLCAiZGlmZlBvc2l0aW9uIiwgInNjaGVkdWxlRmx1c2giLCAiaGFzUGVuZGluZ0NoYW5nZXMiLCAiaXNGbHVzaGluZyIsICJoYW5kbGVVc2VyU2VsZWN0IiwgInBhdGhDaGFuZ2VkIiwgInBhcmVudFBhdGhDaGFuZ2VkIiwgImhhbmRsZUlucHV0IiwgImhhbmRsZUtleURvd24iLCAiXyIsICJoYW5kbGVEb21NdXRhdGlvbnMiLCAic29tZSIsICJFRElUT1JfVE9fRk9SQ0VfUkVOREVSIiwgInVzZUlzTW91bnRlZCIsICJpc01vdW50ZWRSZWYiLCAidXNlUmVmIiwgInVzZUVmZmVjdCIsICJ1c2VNdXRhdGlvbk9ic2VydmVyIiwgImNhbGxiYWNrIiwgIm9wdGlvbnMiLCAidXNlU3RhdGUiLCAidXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCIsICJ1c2VBbmRyb2lkSW5wdXRNYW5hZ2VyIiwgInVzZVNsYXRlU3RhdGljIiwgImlzTW91bnRlZCIsICJpbnB1dE1hbmFnZXIiLCAiX29iamVjdFNwcmVhZCQyIiwgIkVESVRPUl9UT19TQ0hFRFVMRV9GTFVTSCIsICJ1c2VUcmFja1VzZXJJbnB1dCIsICJhbmltYXRpb25GcmFtZUlkUmVmIiwgIm9uVXNlcklucHV0IiwgInVzZUNhbGxiYWNrIiwgImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwgInJlcXVlc3RBbmltYXRpb25GcmFtZSIsICJDaGlsZHJlbiIsICJGcmFnbWVudCIsICJ1c2VDaGlsZHJlbiIsICJFZGl0YWJsZSIsICJhdXRvRm9jdXMiLCAiZGVjb3JhdGUiLCAiZGVmYXVsdERlY29yYXRlIiwgIm9uRE9NQmVmb3JlSW5wdXQiLCAicHJvcHNPbkRPTUJlZm9yZUlucHV0IiwgInBsYWNlaG9sZGVyIiwgInJlYWRPbmx5IiwgInJlbmRlckVsZW1lbnQiLCAicmVuZGVyTGVhZiIsICJyZW5kZXJQbGFjZWhvbGRlciIsICJEZWZhdWx0UGxhY2Vob2xkZXIiLCAic2Nyb2xsU2VsZWN0aW9uSW50b1ZpZXciLCAiZGVmYXVsdFNjcm9sbFNlbGVjdGlvbkludG9WaWV3IiwgInVzZXJTdHlsZSIsICJhcyIsICJkaXNhYmxlRGVmYXVsdFN0eWxlcyIsICJhdHRyaWJ1dGVzIiwgIl9vYmplY3RXaXRob3V0UHJvcGVydGllcyIsICJfZXhjbHVkZWQkMSIsICJ1c2VTbGF0ZSIsICJpc0NvbXBvc2luZyIsICJzZXRJc0NvbXBvc2luZyIsICJyZWYiLCAiZGVmZXJyZWRPcGVyYXRpb25zIiwgImZvcmNlUmVuZGVyIiwgInVzZVJlZHVjZXIiLCAicyIsICJJU19SRUFEX09OTFkiLCAic3RhdGUiLCAidXNlTWVtbyIsICJpc0RyYWdnaW5nSW50ZXJuYWxseSIsICJpc1VwZGF0aW5nU2VsZWN0aW9uIiwgImxhdGVzdEVsZW1lbnQiLCAiaGFzTWFya1BsYWNlaG9sZGVyIiwgInRocm90dGxlIiwgImFuZHJvaWRJbnB1dE1hbmFnZXIiLCAicm9vdCIsICJmaW5kRG9jdW1lbnRPclNoYWRvd1Jvb3QiLCAiYWN0aXZlRWxlbWVudCIsICJlbCIsICJ0b0RPTU5vZGUiLCAiSVNfRk9DVVNFRCIsICJkZXNlbGVjdCIsICJhbmNob3JOb2RlIiwgImZvY3VzTm9kZSIsICJhbmNob3JOb2RlU2VsZWN0YWJsZSIsICJoYXNFZGl0YWJsZVRhcmdldCIsICJpc1RhcmdldEluc2lkZU5vblJlYWRvbmx5Vm9pZCIsICJmb2N1c05vZGVTZWxlY3RhYmxlIiwgImRlYm91bmNlIiwgImdldERlZmF1bHRWaWV3IiwgIkVESVRPUl9UT19XSU5ET1ciLCAiRURJVE9SX1RPX0VMRU1FTlQiLCAiTk9ERV9UT19FTEVNRU5UIiwgIkVMRU1FTlRfVE9fTk9ERSIsICJpc0ZvY3VzZWQiLCAic2V0RG9tU2VsZWN0aW9uIiwgImZvcmNlQ2hhbmdlIiwgImhhc0RvbVNlbGVjdGlvbiIsICJlZGl0b3JFbGVtZW50IiwgImhhc0RvbVNlbGVjdGlvbkluRWRpdG9yIiwgImNvbnRhaW5zIiwgInNsYXRlUmFuZ2UiLCAicGFyZW50RWxlbWVudCIsICJoYXNBdHRyaWJ1dGUiLCAiaGFzUmFuZ2UiLCAibmV3RG9tUmFuZ2UiLCAidG9ET01SYW5nZSIsICJpc0JhY2t3YXJkIiwgInNldEJhc2VBbmRFeHRlbnQiLCAiZW5kQ29udGFpbmVyIiwgImVuZE9mZnNldCIsICJzdGFydENvbnRhaW5lciIsICJzdGFydE9mZnNldCIsICJyZW1vdmVBbGxSYW5nZXMiLCAiZW5zdXJlU2VsZWN0aW9uIiwgIklTX0ZJUkVGT1giLCAidGltZW91dElkIiwgImFuaW1hdGlvbkZyYW1lSWQiLCAiZW5zdXJlRG9tU2VsZWN0aW9uIiwgImUiLCAiaXNET01FdmVudEhhbmRsZWQiLCAiaXNDb21wb3NpdGlvbkNoYW5nZSIsICJuYXRpdmUiLCAidGVzdCIsICJ0b0RPTVBvaW50IiwgImNsb3Nlc3QiLCAiaGFzRE9NTm9kZSIsICJsYXN0VGV4dCIsICJkb2N1bWVudCIsICJjcmVhdGVUcmVlV2Fsa2VyIiwgIk5vZGVGaWx0ZXIiLCAiU0hPV19URVhUIiwgImxhc3RDaGlsZCIsICJnZXRDb21wdXRlZFN0eWxlIiwgIndoaXRlU3BhY2UiLCAiYmxvY2siLCAic3RyaW5nIiwgIkVESVRPUl9UT19VU0VSX1NFTEVDVElPTiIsICJwcmV2ZW50RGVmYXVsdCIsICJ0b1Jlc3RvcmUiLCAiSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUIiwgImFkZEV2ZW50TGlzdGVuZXIiLCAicmVtb3ZlRXZlbnRMaXN0ZW5lciIsICJkZWNvcmF0aW9ucyIsICJBcnJheSIsICJmcm9tIiwgInRleHRzIiwgIlBMQUNFSE9MREVSX1NZTUJPTCIsICJyZXN0IiwgIl9leGNsdWRlZDIiLCAibG9vc2UiLCAidW5zZXQiLCAiT2JqZWN0IiwgImZyb21FbnRyaWVzIiwgImtleXMiLCAibWFwIiwgIm1hcmsiLCAiX29iamVjdFNwcmVhZCQxIiwgIk1BUktfUExBQ0VIT0xERVJfU1lNQk9MIiwgInBsYWNlaG9sZGVySGVpZ2h0IiwgImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsICJoZWlnaHQiLCAiUmVhZE9ubHlDb250ZXh0IiwgIlByb3ZpZGVyIiwgInZhbHVlIiwgIkRlY29yYXRlQ29udGV4dCIsICJyb2xlIiwgInNwZWxsQ2hlY2siLCAiQ0FOX1VTRV9ET00iLCAiYXV0b0NvcnJlY3QiLCAiYXV0b0NhcGl0YWxpemUiLCAiY29udGVudEVkaXRhYmxlIiwgInppbmRleCIsICJzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmciLCAib3V0bGluZSIsICJ3b3JkV3JhcCIsICJtaW5IZWlnaHQiLCAib25CZWZvcmVJbnB1dCIsICJpc0V2ZW50SGFuZGxlZCIsICJoYXNTZWxlY3RhYmxlVGFyZ2V0IiwgIm9uSW5wdXQiLCAib25CbHVyIiwgInJlbGF0ZWRUYXJnZXQiLCAiaXNET01FbGVtZW50IiwgImlzRE9NTm9kZSIsICJ0b1NsYXRlTm9kZSIsICJpc1ZvaWQiLCAiSVNfU0FGQVJJIiwgIm9uQ2xpY2siLCAiaGFzVGFyZ2V0IiwgImZpbmRQYXRoIiwgImRldGFpbCIsICJibG9ja1BhdGgiLCAic3RhcnRWb2lkIiwgInZvaWQiLCAiZW5kVm9pZCIsICJvbkNvbXBvc2l0aW9uRW5kIiwgIklTX0ZJUkVGT1hfTEVHQUNZIiwgIklTX0lPUyIsICJJU19XRUNIQVRCUk9XU0VSIiwgIklTX1VDX01PQklMRSIsICJwbGFjZWhvbGRlck1hcmtzIiwgIm9uQ29tcG9zaXRpb25VcGRhdGUiLCAib25Db21wb3NpdGlvblN0YXJ0IiwgImlubGluZSIsICJpc0lubGluZSIsICJtb2RlIiwgImlubGluZVBhdGgiLCAiaXNFbmQiLCAiYWZ0ZXIiLCAic2V0U2VsZWN0aW9uIiwgIm9uQ29weSIsICJzZXRGcmFnbWVudERhdGEiLCAiY2xpcGJvYXJkRGF0YSIsICJvbkN1dCIsICJwYXJlbnQiLCAib25EcmFnT3ZlciIsICJvbkRyYWdTdGFydCIsICJ2b2lkTWF0Y2giLCAidm9pZHMiLCAib25Ecm9wIiwgImRyYWdnZWRSYW5nZSIsICJmaW5kRXZlbnRSYW5nZSIsICJvbkRyYWdFbmQiLCAib25Gb2N1cyIsICJvbktleURvd24iLCAibmF0aXZlRXZlbnQiLCAiZWxlbWVudCIsICJpc1JUTCIsICJnZXREaXJlY3Rpb24iLCAiSG90a2V5cyIsICJtYXliZUhpc3RvcnlFZGl0b3IiLCAibW92ZSIsICJlZGdlIiwgImNvbGxhcHNlIiwgIklTX0NIUk9NRSIsICJjdXJyZW50Tm9kZSIsICJvblBhc3RlIiwgImlzUGxhaW5UZXh0T25seVBhc3RlIiwgImRvbVJhbmdlIiwgImxlYWZFbCIsICJiaW5kIiwgInNjcm9sbEludG9WaWV3IiwgInNjcm9sbE1vZGUiLCAiaGFuZGxlciIsICJzaG91bGRUcmVhdEV2ZW50QXNIYW5kbGVkIiwgImlzRGVmYXVsdFByZXZlbnRlZCIsICJpc1Byb3BhZ2F0aW9uU3RvcHBlZCIsICJkZWZhdWx0UHJldmVudGVkIiwgIkZvY3VzZWRDb250ZXh0IiwgImNyZWF0ZUNvbnRleHQiLCAiU2xhdGVTZWxlY3RvckNvbnRleHQiLCAiY3JlYXRlQ29udGV4dCIsICJnZXRTZWxlY3RvckNvbnRleHQiLCAiZWRpdG9yIiwgImV2ZW50TGlzdGVuZXJzIiwgInVzZVJlZiIsICJjdXJyZW50IiwgInNsYXRlUmVmIiwgIm9uQ2hhbmdlIiwgInVzZUNhbGxiYWNrIiwgImZvckVhY2giLCAibGlzdGVuZXIiLCAic2VsZWN0b3JDb250ZXh0IiwgInVzZU1lbW8iLCAiZ2V0U2xhdGUiLCAiYWRkRXZlbnRMaXN0ZW5lciIsICJjYWxsYmFjayIsICJwdXNoIiwgInNwbGljZSIsICJpbmRleE9mIiwgIlNsYXRlIiwgInByb3BzIiwgImNoaWxkcmVuIiwgInZhbHVlIiwgInJlc3QiLCAiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwgIl9leGNsdWRlZCIsICJ1bm1vdW50UmVmIiwgImNvbnRleHQiLCAic2V0Q29udGV4dCIsICJSZWFjdCIsICJ1c2VTdGF0ZSIsICJOb2RlIiwgImlzTm9kZUxpc3QiLCAiRXJyb3IiLCAiU2NydWJiZXIiLCAic3RyaW5naWZ5IiwgIkVkaXRvciIsICJpc0VkaXRvciIsICJPYmplY3QiLCAiYXNzaWduIiwgInYiLCAiaGFuZGxlU2VsZWN0b3JDaGFuZ2UiLCAib25Db250ZXh0Q2hhbmdlIiwgInByZXZDb250ZXh0IiwgInVzZUVmZmVjdCIsICJFRElUT1JfVE9fT05fQ0hBTkdFIiwgInNldCIsICJpc0ZvY3VzZWQiLCAic2V0SXNGb2N1c2VkIiwgIlJlYWN0RWRpdG9yIiwgInVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QiLCAiZm4iLCAiSVNfUkVBQ1RfVkVSU0lPTl8xN19PUl9BQk9WRSIsICJkb2N1bWVudCIsICJyZW1vdmVFdmVudExpc3RlbmVyIiwgIlNsYXRlU2VsZWN0b3JDb250ZXh0IiwgIlByb3ZpZGVyIiwgIlNsYXRlQ29udGV4dCIsICJFZGl0b3JDb250ZXh0IiwgIkZvY3VzZWRDb250ZXh0IiwgImRvUmVjdHNJbnRlcnNlY3QiLCAicmVjdCIsICJjb21wYXJlUmVjdCIsICJtaWRkbGUiLCAidG9wIiwgImJvdHRvbSIsICJhcmVSYW5nZXNTYW1lTGluZSIsICJlZGl0b3IiLCAicmFuZ2UxIiwgInJhbmdlMiIsICJyZWN0MSIsICJSZWFjdEVkaXRvciIsICJ0b0RPTVJhbmdlIiwgImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsICJyZWN0MiIsICJmaW5kQ3VycmVudExpbmVSYW5nZSIsICJwYXJlbnRSYW5nZSIsICJwYXJlbnRSYW5nZUJvdW5kYXJ5IiwgIkVkaXRvciIsICJyYW5nZSIsICJSYW5nZSIsICJlbmQiLCAicG9zaXRpb25zIiwgIkFycmF5IiwgImZyb20iLCAiYXQiLCAibGVmdCIsICJyaWdodCIsICJsZW5ndGgiLCAiTWF0aCIsICJmbG9vciIsICJ3aXRoUmVhY3QiLCAiZSIsICJhcHBseSIsICJvbkNoYW5nZSIsICJkZWxldGVCYWNrd2FyZCIsICJhZGRNYXJrIiwgInJlbW92ZU1hcmsiLCAiRURJVE9SX1RPX0tFWV9UT19FTEVNRU5UIiwgInNldCIsICJXZWFrTWFwIiwgImtleSIsICJ2YWx1ZSIsICJFRElUT1JfVE9fU0NIRURVTEVfRkxVU0giLCAiZ2V0IiwgIkVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUyIsICJFRElUT1JfVE9fUEVORElOR19ESUZGUyIsICJFRElUT1JfVE9fVVNFUl9NQVJLUyIsICJkZWxldGUiLCAidW5pdCIsICJzZWxlY3Rpb24iLCAiaXNDb2xsYXBzZWQiLCAicGFyZW50QmxvY2tFbnRyeSIsICJhYm92ZSIsICJtYXRjaCIsICJuIiwgIkVsZW1lbnQiLCAiaXNFbGVtZW50IiwgImlzQmxvY2siLCAicGFyZW50QmxvY2tQYXRoIiwgInBhcmVudEVsZW1lbnRSYW5nZSIsICJhbmNob3IiLCAiY3VycmVudExpbmVSYW5nZSIsICJUcmFuc2Zvcm1zIiwgIm9wIiwgIm1hdGNoZXMiLCAicGVuZGluZ0RpZmZzIiwgInRyYW5zZm9ybWVkIiwgIm1hcCIsICJ0ZXh0RGlmZiIsICJ0cmFuc2Zvcm1UZXh0RGlmZiIsICJmaWx0ZXIiLCAiQm9vbGVhbiIsICJwZW5kaW5nU2VsZWN0aW9uIiwgIkVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTiIsICJ0cmFuc2Zvcm1QZW5kaW5nUmFuZ2UiLCAicGVuZGluZ0FjdGlvbiIsICJFRElUT1JfVE9fUEVORElOR19BQ1RJT04iLCAiUG9pbnQiLCAiaXNQb2ludCIsICJ0cmFuc2Zvcm1QZW5kaW5nUG9pbnQiLCAiX29iamVjdFNwcmVhZCIsICJ0eXBlIiwgInB1c2giLCAiZ2V0TWF0Y2hlcyIsICJwYXRoIiwgIkVESVRPUl9UT19VU0VSX1NFTEVDVElPTiIsICJ1bnJlZiIsICJQYXRoIiwgInBhcmVudCIsICJwcmV2UGF0aCIsICJwcmV2aW91cyIsICJjb21tb25QYXRoIiwgImNvbW1vbiIsICJuZXdQYXRoIiwgIm5vZGUiLCAiTk9ERV9UT19LRVkiLCAic2V0RnJhZ21lbnREYXRhIiwgImRhdGEiLCAic3RhcnQiLCAiZWRnZXMiLCAic3RhcnRWb2lkIiwgInZvaWQiLCAiZW5kVm9pZCIsICJkb21SYW5nZSIsICJjb250ZW50cyIsICJjbG9uZUNvbnRlbnRzIiwgImF0dGFjaCIsICJjaGlsZE5vZGVzIiwgImZvckVhY2giLCAidGV4dENvbnRlbnQiLCAidHJpbSIsICJ2b2lkTm9kZSIsICJyIiwgImNsb25lUmFuZ2UiLCAiZG9tTm9kZSIsICJ0b0RPTU5vZGUiLCAic2V0RW5kQWZ0ZXIiLCAicXVlcnlTZWxlY3RvciIsICJxdWVyeVNlbGVjdG9yQWxsIiwgInp3IiwgImlzTmV3bGluZSIsICJnZXRBdHRyaWJ1dGUiLCAiaXNET01UZXh0IiwgInNwYW4iLCAib3duZXJEb2N1bWVudCIsICJjcmVhdGVFbGVtZW50IiwgInN0eWxlIiwgIndoaXRlU3BhY2UiLCAiYXBwZW5kQ2hpbGQiLCAiZnJhZ21lbnQiLCAiZ2V0RnJhZ21lbnQiLCAic3RyaW5nIiwgIkpTT04iLCAic3RyaW5naWZ5IiwgImVuY29kZWQiLCAid2luZG93IiwgImJ0b2EiLCAiZW5jb2RlVVJJQ29tcG9uZW50IiwgInNldEF0dHJpYnV0ZSIsICJzZXREYXRhIiwgImRpdiIsICJib2R5IiwgImlubmVySFRNTCIsICJnZXRQbGFpblRleHQiLCAicmVtb3ZlQ2hpbGQiLCAiaW5zZXJ0RGF0YSIsICJpbnNlcnRGcmFnbWVudERhdGEiLCAiaW5zZXJ0VGV4dERhdGEiLCAiZ2V0RGF0YSIsICJnZXRTbGF0ZUZyYWdtZW50QXR0cmlidXRlIiwgImRlY29kZWQiLCAiZGVjb2RlVVJJQ29tcG9uZW50IiwgImF0b2IiLCAicGFyc2VkIiwgInBhcnNlIiwgImluc2VydEZyYWdtZW50IiwgInRleHQiLCAibGluZXMiLCAic3BsaXQiLCAibGluZSIsICJzcGxpdE5vZGVzIiwgImFsd2F5cyIsICJpbnNlcnRUZXh0IiwgIlJlYWN0RE9NIiwgInVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzIiwgIm9uQ29udGV4dENoYW5nZSIsICJFRElUT1JfVE9fT05fQ0hBTkdFIiwgInAiLCAibGV2ZWxzIiwgImZpbmRLZXkiLCAiSGlzdG9yeSIsICJpc0hpc3RvcnkiLCAidmFsdWUiLCAiaXNQbGFpbk9iamVjdCIsICJBcnJheSIsICJpc0FycmF5IiwgInJlZG9zIiwgInVuZG9zIiwgImxlbmd0aCIsICJPcGVyYXRpb24iLCAiaXNPcGVyYXRpb25MaXN0IiwgIm9wZXJhdGlvbnMiLCAiU0FWSU5HIiwgIldlYWtNYXAiLCAiTUVSR0lORyIsICJIaXN0b3J5RWRpdG9yIiwgImlzSGlzdG9yeUVkaXRvciIsICJ2YWx1ZSIsICJIaXN0b3J5IiwgImlzSGlzdG9yeSIsICJoaXN0b3J5IiwgIkVkaXRvciIsICJpc0VkaXRvciIsICJpc01lcmdpbmciLCAiZWRpdG9yIiwgImdldCIsICJpc1NhdmluZyIsICJyZWRvIiwgInVuZG8iLCAid2l0aG91dE1lcmdpbmciLCAiZm4iLCAicHJldiIsICJzZXQiLCAid2l0aG91dFNhdmluZyIsICJ3aXRoSGlzdG9yeSIsICJlIiwgImFwcGx5IiwgInVuZG9zIiwgInJlZG9zIiwgImxlbmd0aCIsICJiYXRjaCIsICJzZWxlY3Rpb25CZWZvcmUiLCAiVHJhbnNmb3JtcyIsICJzZXRTZWxlY3Rpb24iLCAid2l0aG91dE5vcm1hbGl6aW5nIiwgIm9wIiwgIm9wZXJhdGlvbnMiLCAicG9wIiwgIndyaXRlSGlzdG9yeSIsICJpbnZlcnNlT3BzIiwgIm1hcCIsICJPcGVyYXRpb24iLCAiaW52ZXJzZSIsICJyZXZlcnNlIiwgImxhc3RCYXRjaCIsICJsYXN0T3AiLCAic2F2ZSIsICJtZXJnZSIsICJzaG91bGRTYXZlIiwgInNob3VsZE1lcmdlIiwgInB1c2giLCAic2VsZWN0aW9uIiwgInNoaWZ0IiwgInN0YWNrIiwgInR5cGUiLCAib2Zmc2V0IiwgInRleHQiLCAiUGF0aCIsICJlcXVhbHMiLCAicGF0aCIsICJudW1iZXJTdHJpbmciLCAiaW1wb3J0X3JlYWN0IiwgIlJlYWN0IiwgImUiLCAibm9kZSIsICJSZWFjdCIsICJlIiwgInIiLCAiUmVhY3QiLCAiZSIsICJmcmFnbWVudCIsICJkb2N1bWVudCIsICJuIiwgInBhdGgiLCAibm9kZSIsICJlbmQiLCAiRWxlbWVudCIsICJlcXVhbHMiLCAiaSIsICJsZWFmIiwgInIiLCAidGJvZHkiLCAiY3VycmVudCIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X3JlYWN0IiwgIlJlYWN0IiwgImxvY2F0aW9uIiwgImUiLCAiaSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X3JlYWN0X2RvbSIsICJSZWFjdCIsICJSZWFjdERPTSIsICJpbXBvcnRfcmVhY3RfZG9tIiwgIlJlYWN0IiwgImUiLCAiaSIsICJSZWFjdCIsICJFbGVtZW50IiwgIlJlYWN0RE9NIiwgImUiLCAiRWRpdG9yIiwgIlJlYWN0IiwgIlJlYWN0RE9NIl0KfQo=
