import {
  CONTAINER_CLASS_PREFIX,
  CUSTOM_CLASS_PREFIX,
  RICH_TEXT_CLASS_PREFIX,
  SERIALIZATION_REGISTRY,
  STANDARD_PARAGRAPH,
  STANDARD_TEXT_NODE,
  TABLE_CLASS_PREFIX,
  __commonJS,
  __spreadProps,
  __spreadValues,
  __toESM,
  __yieldStar,
  convertStyleStringToReactObject,
  deserialize,
  deserializePlain,
  getAllowedChildrenTypes,
  getContextFor,
  getUIHandlerValueWithKnownContextFor,
  getUUIDFor,
  isBlock,
  isInline,
  isSuperBlock,
  isVoid,
  normalizeElement,
  require_deep_equal,
  require_react,
  require_react_dom,
  sanitize,
  serialize,
  serializeString
} from "/dist/commons-2PRWFEI7.js";

// ../node_modules/direction/index.js
var require_direction = __commonJS({
  "../node_modules/direction/index.js"(exports, module) {
    "use strict";
    module.exports = direction;
    var RTL = "\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC";
    var LTR = "A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";
    var rtl = new RegExp("^[^" + LTR + "]*[" + RTL + "]");
    var ltr = new RegExp("^[^" + RTL + "]*[" + LTR + "]");
    function direction(value) {
      value = String(value || "");
      if (rtl.test(value)) {
        return "rtl";
      }
      if (ltr.test(value)) {
        return "ltr";
      }
      return "neutral";
    }
  }
});

// ../node_modules/lodash/isObject.js
var require_isObject = __commonJS({
  "../node_modules/lodash/isObject.js"(exports, module) {
    function isObject2(value) {
      var type = typeof value;
      return value != null && (type == "object" || type == "function");
    }
    module.exports = isObject2;
  }
});

// ../node_modules/lodash/_freeGlobal.js
var require_freeGlobal = __commonJS({
  "../node_modules/lodash/_freeGlobal.js"(exports, module) {
    var freeGlobal = typeof global == "object" && global && global.Object === Object && global;
    module.exports = freeGlobal;
  }
});

// ../node_modules/lodash/_root.js
var require_root = __commonJS({
  "../node_modules/lodash/_root.js"(exports, module) {
    var freeGlobal = require_freeGlobal();
    var freeSelf = typeof self == "object" && self && self.Object === Object && self;
    var root = freeGlobal || freeSelf || Function("return this")();
    module.exports = root;
  }
});

// ../node_modules/lodash/now.js
var require_now = __commonJS({
  "../node_modules/lodash/now.js"(exports, module) {
    var root = require_root();
    var now = function() {
      return root.Date.now();
    };
    module.exports = now;
  }
});

// ../node_modules/lodash/_trimmedEndIndex.js
var require_trimmedEndIndex = __commonJS({
  "../node_modules/lodash/_trimmedEndIndex.js"(exports, module) {
    var reWhitespace = /\s/;
    function trimmedEndIndex(string3) {
      var index = string3.length;
      while (index-- && reWhitespace.test(string3.charAt(index))) {
      }
      return index;
    }
    module.exports = trimmedEndIndex;
  }
});

// ../node_modules/lodash/_baseTrim.js
var require_baseTrim = __commonJS({
  "../node_modules/lodash/_baseTrim.js"(exports, module) {
    var trimmedEndIndex = require_trimmedEndIndex();
    var reTrimStart = /^\s+/;
    function baseTrim(string3) {
      return string3 ? string3.slice(0, trimmedEndIndex(string3) + 1).replace(reTrimStart, "") : string3;
    }
    module.exports = baseTrim;
  }
});

// ../node_modules/lodash/_Symbol.js
var require_Symbol = __commonJS({
  "../node_modules/lodash/_Symbol.js"(exports, module) {
    var root = require_root();
    var Symbol2 = root.Symbol;
    module.exports = Symbol2;
  }
});

// ../node_modules/lodash/_getRawTag.js
var require_getRawTag = __commonJS({
  "../node_modules/lodash/_getRawTag.js"(exports, module) {
    var Symbol2 = require_Symbol();
    var objectProto = Object.prototype;
    var hasOwnProperty = objectProto.hasOwnProperty;
    var nativeObjectToString = objectProto.toString;
    var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
    function getRawTag(value) {
      var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];
      try {
        value[symToStringTag] = void 0;
        var unmasked = true;
      } catch (e2) {
      }
      var result = nativeObjectToString.call(value);
      if (unmasked) {
        if (isOwn) {
          value[symToStringTag] = tag;
        } else {
          delete value[symToStringTag];
        }
      }
      return result;
    }
    module.exports = getRawTag;
  }
});

// ../node_modules/lodash/_objectToString.js
var require_objectToString = __commonJS({
  "../node_modules/lodash/_objectToString.js"(exports, module) {
    var objectProto = Object.prototype;
    var nativeObjectToString = objectProto.toString;
    function objectToString(value) {
      return nativeObjectToString.call(value);
    }
    module.exports = objectToString;
  }
});

// ../node_modules/lodash/_baseGetTag.js
var require_baseGetTag = __commonJS({
  "../node_modules/lodash/_baseGetTag.js"(exports, module) {
    var Symbol2 = require_Symbol();
    var getRawTag = require_getRawTag();
    var objectToString = require_objectToString();
    var nullTag = "[object Null]";
    var undefinedTag = "[object Undefined]";
    var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
    function baseGetTag(value) {
      if (value == null) {
        return value === void 0 ? undefinedTag : nullTag;
      }
      return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);
    }
    module.exports = baseGetTag;
  }
});

// ../node_modules/lodash/isObjectLike.js
var require_isObjectLike = __commonJS({
  "../node_modules/lodash/isObjectLike.js"(exports, module) {
    function isObjectLike(value) {
      return value != null && typeof value == "object";
    }
    module.exports = isObjectLike;
  }
});

// ../node_modules/lodash/isSymbol.js
var require_isSymbol = __commonJS({
  "../node_modules/lodash/isSymbol.js"(exports, module) {
    var baseGetTag = require_baseGetTag();
    var isObjectLike = require_isObjectLike();
    var symbolTag = "[object Symbol]";
    function isSymbol(value) {
      return typeof value == "symbol" || isObjectLike(value) && baseGetTag(value) == symbolTag;
    }
    module.exports = isSymbol;
  }
});

// ../node_modules/lodash/toNumber.js
var require_toNumber = __commonJS({
  "../node_modules/lodash/toNumber.js"(exports, module) {
    var baseTrim = require_baseTrim();
    var isObject2 = require_isObject();
    var isSymbol = require_isSymbol();
    var NAN = 0 / 0;
    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
    var reIsBinary = /^0b[01]+$/i;
    var reIsOctal = /^0o[0-7]+$/i;
    var freeParseInt = parseInt;
    function toNumber(value) {
      if (typeof value == "number") {
        return value;
      }
      if (isSymbol(value)) {
        return NAN;
      }
      if (isObject2(value)) {
        var other = typeof value.valueOf == "function" ? value.valueOf() : value;
        value = isObject2(other) ? other + "" : other;
      }
      if (typeof value != "string") {
        return value === 0 ? value : +value;
      }
      value = baseTrim(value);
      var isBinary = reIsBinary.test(value);
      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
    }
    module.exports = toNumber;
  }
});

// ../node_modules/lodash/debounce.js
var require_debounce = __commonJS({
  "../node_modules/lodash/debounce.js"(exports, module) {
    var isObject2 = require_isObject();
    var now = require_now();
    var toNumber = require_toNumber();
    var FUNC_ERROR_TEXT = "Expected a function";
    var nativeMax = Math.max;
    var nativeMin = Math.min;
    function debounce2(func, wait, options) {
      var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;
      if (typeof func != "function") {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      wait = toNumber(wait) || 0;
      if (isObject2(options)) {
        leading = !!options.leading;
        maxing = "maxWait" in options;
        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
        trailing = "trailing" in options ? !!options.trailing : trailing;
      }
      function invokeFunc(time2) {
        var args = lastArgs, thisArg = lastThis;
        lastArgs = lastThis = void 0;
        lastInvokeTime = time2;
        result = func.apply(thisArg, args);
        return result;
      }
      function leadingEdge(time2) {
        lastInvokeTime = time2;
        timerId = setTimeout(timerExpired, wait);
        return leading ? invokeFunc(time2) : result;
      }
      function remainingWait(time2) {
        var timeSinceLastCall = time2 - lastCallTime, timeSinceLastInvoke = time2 - lastInvokeTime, timeWaiting = wait - timeSinceLastCall;
        return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
      }
      function shouldInvoke(time2) {
        var timeSinceLastCall = time2 - lastCallTime, timeSinceLastInvoke = time2 - lastInvokeTime;
        return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
      }
      function timerExpired() {
        var time2 = now();
        if (shouldInvoke(time2)) {
          return trailingEdge(time2);
        }
        timerId = setTimeout(timerExpired, remainingWait(time2));
      }
      function trailingEdge(time2) {
        timerId = void 0;
        if (trailing && lastArgs) {
          return invokeFunc(time2);
        }
        lastArgs = lastThis = void 0;
        return result;
      }
      function cancel() {
        if (timerId !== void 0) {
          clearTimeout(timerId);
        }
        lastInvokeTime = 0;
        lastArgs = lastCallTime = lastThis = timerId = void 0;
      }
      function flush() {
        return timerId === void 0 ? result : trailingEdge(now());
      }
      function debounced() {
        var time2 = now(), isInvoking = shouldInvoke(time2);
        lastArgs = arguments;
        lastThis = this;
        lastCallTime = time2;
        if (isInvoking) {
          if (timerId === void 0) {
            return leadingEdge(lastCallTime);
          }
          if (maxing) {
            clearTimeout(timerId);
            timerId = setTimeout(timerExpired, wait);
            return invokeFunc(lastCallTime);
          }
        }
        if (timerId === void 0) {
          timerId = setTimeout(timerExpired, wait);
        }
        return result;
      }
      debounced.cancel = cancel;
      debounced.flush = flush;
      return debounced;
    }
    module.exports = debounce2;
  }
});

// ../node_modules/lodash/throttle.js
var require_throttle = __commonJS({
  "../node_modules/lodash/throttle.js"(exports, module) {
    var debounce2 = require_debounce();
    var isObject2 = require_isObject();
    var FUNC_ERROR_TEXT = "Expected a function";
    function throttle2(func, wait, options) {
      var leading = true, trailing = true;
      if (typeof func != "function") {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      if (isObject2(options)) {
        leading = "leading" in options ? !!options.leading : leading;
        trailing = "trailing" in options ? !!options.trailing : trailing;
      }
      return debounce2(func, wait, {
        "leading": leading,
        "maxWait": wait,
        "trailing": trailing
      });
    }
    module.exports = throttle2;
  }
});

// ../node_modules/is-hotkey/lib/index.js
var require_lib = __commonJS({
  "../node_modules/is-hotkey/lib/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    var IS_MAC = typeof window != "undefined" && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);
    var MODIFIERS = {
      alt: "altKey",
      control: "ctrlKey",
      meta: "metaKey",
      shift: "shiftKey"
    };
    var ALIASES = {
      add: "+",
      break: "pause",
      cmd: "meta",
      command: "meta",
      ctl: "control",
      ctrl: "control",
      del: "delete",
      down: "arrowdown",
      esc: "escape",
      ins: "insert",
      left: "arrowleft",
      mod: IS_MAC ? "meta" : "control",
      opt: "alt",
      option: "alt",
      return: "enter",
      right: "arrowright",
      space: " ",
      spacebar: " ",
      up: "arrowup",
      win: "meta",
      windows: "meta"
    };
    var CODES = {
      backspace: 8,
      tab: 9,
      enter: 13,
      shift: 16,
      control: 17,
      alt: 18,
      pause: 19,
      capslock: 20,
      escape: 27,
      " ": 32,
      pageup: 33,
      pagedown: 34,
      end: 35,
      home: 36,
      arrowleft: 37,
      arrowup: 38,
      arrowright: 39,
      arrowdown: 40,
      insert: 45,
      delete: 46,
      meta: 91,
      numlock: 144,
      scrolllock: 145,
      ";": 186,
      "=": 187,
      ",": 188,
      "-": 189,
      ".": 190,
      "/": 191,
      "`": 192,
      "[": 219,
      "\\": 220,
      "]": 221,
      "'": 222
    };
    for (f = 1; f < 20; f++) {
      CODES["f" + f] = 111 + f;
    }
    var f;
    function isHotkey(hotkey, options, event) {
      if (options && !("byKey" in options)) {
        event = options;
        options = null;
      }
      if (!Array.isArray(hotkey)) {
        hotkey = [hotkey];
      }
      var array = hotkey.map(function(string3) {
        return parseHotkey(string3, options);
      });
      var check = function check2(e2) {
        return array.some(function(object) {
          return compareHotkey(object, e2);
        });
      };
      var ret = event == null ? check : check(event);
      return ret;
    }
    function isCodeHotkey(hotkey, event) {
      return isHotkey(hotkey, event);
    }
    function isKeyHotkey2(hotkey, event) {
      return isHotkey(hotkey, { byKey: true }, event);
    }
    function parseHotkey(hotkey, options) {
      var byKey = options && options.byKey;
      var ret = {};
      hotkey = hotkey.replace("++", "+add");
      var values = hotkey.split("+");
      var length = values.length;
      for (var k in MODIFIERS) {
        ret[MODIFIERS[k]] = false;
      }
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = void 0;
      try {
        for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var value = _step.value;
          var optional = value.endsWith("?") && value.length > 1;
          if (optional) {
            value = value.slice(0, -1);
          }
          var name = toKeyName(value);
          var modifier = MODIFIERS[name];
          if (length === 1 || !modifier) {
            if (byKey) {
              ret.key = name;
            } else {
              ret.which = toKeyCode(value);
            }
          }
          if (modifier) {
            ret[modifier] = optional ? null : true;
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }
      return ret;
    }
    function compareHotkey(object, event) {
      for (var key in object) {
        var expected = object[key];
        var actual = void 0;
        if (expected == null) {
          continue;
        }
        if (key === "key" && event.key != null) {
          actual = event.key.toLowerCase();
        } else if (key === "which") {
          actual = expected === 91 && event.which === 93 ? 91 : event.which;
        } else {
          actual = event[key];
        }
        if (actual == null && expected === false) {
          continue;
        }
        if (actual !== expected) {
          return false;
        }
      }
      return true;
    }
    function toKeyCode(name) {
      name = toKeyName(name);
      var code = CODES[name] || name.toUpperCase().charCodeAt(0);
      return code;
    }
    function toKeyName(name) {
      name = name.toLowerCase();
      name = ALIASES[name] || name;
      return name;
    }
    exports.default = isHotkey;
    exports.isHotkey = isHotkey;
    exports.isCodeHotkey = isCodeHotkey;
    exports.isKeyHotkey = isKeyHotkey2;
    exports.parseHotkey = parseHotkey;
    exports.compareHotkey = compareHotkey;
    exports.toKeyCode = toKeyCode;
    exports.toKeyName = toKeyName;
  }
});

// example4.tsx
var import_react13 = __toESM(require_react());
var import_react_dom5 = __toESM(require_react_dom());

// ../editor/slate/index.tsx
var import_react3 = __toESM(require_react());
var import_deep_equal2 = __toESM(require_deep_equal());

// ../node_modules/is-plain-object/dist/is-plain-object.mjs
function isObject(o) {
  return Object.prototype.toString.call(o) === "[object Object]";
}
function isPlainObject(o) {
  var ctor, prot;
  if (isObject(o) === false)
    return false;
  ctor = o.constructor;
  if (ctor === void 0)
    return true;
  prot = ctor.prototype;
  if (isObject(prot) === false)
    return false;
  if (prot.hasOwnProperty("isPrototypeOf") === false) {
    return false;
  }
  return true;
}

// ../node_modules/immer/dist/immer.mjs
var NOTHING = Symbol.for("immer-nothing");
var DRAFTABLE = Symbol.for("immer-draftable");
var DRAFT_STATE = Symbol.for("immer-state");
var errors = true ? [
  // All error codes, starting by 0:
  function(plugin) {
    return "The plugin for '".concat(plugin, "' has not been loaded into Immer. To enable the plugin, import and call `enable").concat(plugin, "()` when initializing your application.");
  },
  function(thing) {
    return "produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '".concat(thing, "'");
  },
  "This object has been frozen and should not be mutated",
  function(data) {
    return "Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? " + data;
  },
  "An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",
  "Immer forbids circular references",
  "The first or second argument to `produce` must be a function",
  "The third argument to `produce` must be a function or undefined",
  "First argument to `createDraft` must be a plain object, an array, or an immerable object",
  "First argument to `finishDraft` must be a draft returned by `createDraft`",
  function(thing) {
    return "'current' expects a draft, got: ".concat(thing);
  },
  "Object.defineProperty() cannot be used on an Immer draft",
  "Object.setPrototypeOf() cannot be used on an Immer draft",
  "Immer only supports deleting array indices",
  "Immer only supports setting array indices and the 'length' property",
  function(thing) {
    return "'original' expects a draft, got: ".concat(thing);
  }
  // Note: if more errors are added, the errorOffset in Patches.ts should be increased
  // See Patches.ts for additional errors
] : [];
function die(error, ...args) {
  if (true) {
    const e2 = errors[error];
    const msg2 = typeof e2 === "function" ? e2.apply(null, args) : e2;
    throw new Error("[Immer] ".concat(msg2));
  }
  throw new Error(
    "[Immer] minified error nr: ".concat(error, ". Full error at: https://bit.ly/3cXEKWf")
  );
}
var getPrototypeOf = Object.getPrototypeOf;
function isDraft(value) {
  return !!value && !!value[DRAFT_STATE];
}
function isDraftable(value) {
  var _a;
  if (!value)
    return false;
  return isPlainObject2(value) || Array.isArray(value) || !!value[DRAFTABLE] || !!((_a = value.constructor) == null ? void 0 : _a[DRAFTABLE]) || isMap(value) || isSet(value);
}
var objectCtorString = Object.prototype.constructor.toString();
function isPlainObject2(value) {
  if (!value || typeof value !== "object")
    return false;
  const proto = getPrototypeOf(value);
  if (proto === null) {
    return true;
  }
  const Ctor = Object.hasOwnProperty.call(proto, "constructor") && proto.constructor;
  if (Ctor === Object)
    return true;
  return typeof Ctor == "function" && Function.toString.call(Ctor) === objectCtorString;
}
function each(obj, iter) {
  if (getArchtype(obj) === 0) {
    Object.entries(obj).forEach(([key, value]) => {
      iter(key, value, obj);
    });
  } else {
    obj.forEach((entry, index) => iter(index, entry, obj));
  }
}
function getArchtype(thing) {
  const state = thing[DRAFT_STATE];
  return state ? state.type_ : Array.isArray(thing) ? 1 : isMap(thing) ? 2 : isSet(thing) ? 3 : 0;
}
function has(thing, prop) {
  return getArchtype(thing) === 2 ? thing.has(prop) : Object.prototype.hasOwnProperty.call(thing, prop);
}
function set(thing, propOrOldValue, value) {
  const t2 = getArchtype(thing);
  if (t2 === 2)
    thing.set(propOrOldValue, value);
  else if (t2 === 3) {
    thing.add(value);
  } else
    thing[propOrOldValue] = value;
}
function is(x, y) {
  if (x === y) {
    return x !== 0 || 1 / x === 1 / y;
  } else {
    return x !== x && y !== y;
  }
}
function isMap(target) {
  return target instanceof Map;
}
function isSet(target) {
  return target instanceof Set;
}
function latest(state) {
  return state.copy_ || state.base_;
}
function shallowCopy(base, strict) {
  if (isMap(base)) {
    return new Map(base);
  }
  if (isSet(base)) {
    return new Set(base);
  }
  if (Array.isArray(base))
    return Array.prototype.slice.call(base);
  if (!strict && isPlainObject2(base)) {
    if (!getPrototypeOf(base)) {
      const obj = /* @__PURE__ */ Object.create(null);
      return Object.assign(obj, base);
    }
    return __spreadValues({}, base);
  }
  const descriptors = Object.getOwnPropertyDescriptors(base);
  delete descriptors[DRAFT_STATE];
  let keys = Reflect.ownKeys(descriptors);
  for (let i2 = 0; i2 < keys.length; i2++) {
    const key = keys[i2];
    const desc = descriptors[key];
    if (desc.writable === false) {
      desc.writable = true;
      desc.configurable = true;
    }
    if (desc.get || desc.set)
      descriptors[key] = {
        configurable: true,
        writable: true,
        // could live with !!desc.set as well here...
        enumerable: desc.enumerable,
        value: base[key]
      };
  }
  return Object.create(getPrototypeOf(base), descriptors);
}
function freeze(obj, deep = false) {
  if (isFrozen(obj) || isDraft(obj) || !isDraftable(obj))
    return obj;
  if (getArchtype(obj) > 1) {
    obj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections;
  }
  Object.freeze(obj);
  if (deep)
    each(obj, (_key, value) => freeze(value, true), true);
  return obj;
}
function dontMutateFrozenCollections() {
  die(2);
}
function isFrozen(obj) {
  return Object.isFrozen(obj);
}
var plugins = {};
function getPlugin(pluginKey) {
  const plugin = plugins[pluginKey];
  if (!plugin) {
    die(0, pluginKey);
  }
  return plugin;
}
var currentScope;
function getCurrentScope() {
  return currentScope;
}
function createScope(parent_, immer_) {
  return {
    drafts_: [],
    parent_,
    immer_,
    // Whenever the modified draft contains a draft from another scope, we
    // need to prevent auto-freezing so the unowned draft can be finalized.
    canAutoFreeze_: true,
    unfinalizedDrafts_: 0
  };
}
function usePatchesInScope(scope, patchListener) {
  if (patchListener) {
    getPlugin("Patches");
    scope.patches_ = [];
    scope.inversePatches_ = [];
    scope.patchListener_ = patchListener;
  }
}
function revokeScope(scope) {
  leaveScope(scope);
  scope.drafts_.forEach(revokeDraft);
  scope.drafts_ = null;
}
function leaveScope(scope) {
  if (scope === currentScope) {
    currentScope = scope.parent_;
  }
}
function enterScope(immer2) {
  return currentScope = createScope(currentScope, immer2);
}
function revokeDraft(draft) {
  const state = draft[DRAFT_STATE];
  if (state.type_ === 0 || state.type_ === 1)
    state.revoke_();
  else
    state.revoked_ = true;
}
function processResult(result, scope) {
  scope.unfinalizedDrafts_ = scope.drafts_.length;
  const baseDraft = scope.drafts_[0];
  const isReplaced = result !== void 0 && result !== baseDraft;
  if (isReplaced) {
    if (baseDraft[DRAFT_STATE].modified_) {
      revokeScope(scope);
      die(4);
    }
    if (isDraftable(result)) {
      result = finalize(scope, result);
      if (!scope.parent_)
        maybeFreeze(scope, result);
    }
    if (scope.patches_) {
      getPlugin("Patches").generateReplacementPatches_(
        baseDraft[DRAFT_STATE].base_,
        result,
        scope.patches_,
        scope.inversePatches_
      );
    }
  } else {
    result = finalize(scope, baseDraft, []);
  }
  revokeScope(scope);
  if (scope.patches_) {
    scope.patchListener_(scope.patches_, scope.inversePatches_);
  }
  return result !== NOTHING ? result : void 0;
}
function finalize(rootScope, value, path3) {
  if (isFrozen(value))
    return value;
  const state = value[DRAFT_STATE];
  if (!state) {
    each(
      value,
      (key, childValue) => finalizeProperty(rootScope, state, value, key, childValue, path3),
      true
      // See #590, don't recurse into non-enumerable of non drafted objects
    );
    return value;
  }
  if (state.scope_ !== rootScope)
    return value;
  if (!state.modified_) {
    maybeFreeze(rootScope, state.base_, true);
    return state.base_;
  }
  if (!state.finalized_) {
    state.finalized_ = true;
    state.scope_.unfinalizedDrafts_--;
    const result = state.copy_;
    let resultEach = result;
    let isSet2 = false;
    if (state.type_ === 3) {
      resultEach = new Set(result);
      result.clear();
      isSet2 = true;
    }
    each(
      resultEach,
      (key, childValue) => finalizeProperty(rootScope, state, result, key, childValue, path3, isSet2)
    );
    maybeFreeze(rootScope, result, false);
    if (path3 && rootScope.patches_) {
      getPlugin("Patches").generatePatches_(
        state,
        path3,
        rootScope.patches_,
        rootScope.inversePatches_
      );
    }
  }
  return state.copy_;
}
function finalizeProperty(rootScope, parentState, targetObject, prop, childValue, rootPath, targetIsSet) {
  if (childValue === targetObject)
    die(5);
  if (isDraft(childValue)) {
    const path3 = rootPath && parentState && parentState.type_ !== 3 && // Set objects are atomic since they have no keys.
    !has(parentState.assigned_, prop) ? rootPath.concat(prop) : void 0;
    const res = finalize(rootScope, childValue, path3);
    set(targetObject, prop, res);
    if (isDraft(res)) {
      rootScope.canAutoFreeze_ = false;
    } else
      return;
  } else if (targetIsSet) {
    targetObject.add(childValue);
  }
  if (isDraftable(childValue) && !isFrozen(childValue)) {
    if (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {
      return;
    }
    finalize(rootScope, childValue);
    if (!parentState || !parentState.scope_.parent_)
      maybeFreeze(rootScope, childValue);
  }
}
function maybeFreeze(scope, value, deep = false) {
  if (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {
    freeze(value, deep);
  }
}
function createProxyProxy(base, parent3) {
  const isArray = Array.isArray(base);
  const state = {
    type_: isArray ? 1 : 0,
    // Track which produce call this is associated with.
    scope_: parent3 ? parent3.scope_ : getCurrentScope(),
    // True for both shallow and deep changes.
    modified_: false,
    // Used during finalization.
    finalized_: false,
    // Track which properties have been assigned (true) or deleted (false).
    assigned_: {},
    // The parent draft state.
    parent_: parent3,
    // The base state.
    base_: base,
    // The base proxy.
    draft_: null,
    // set below
    // The base copy with any updated values.
    copy_: null,
    // Called by the `produce` function.
    revoke_: null,
    isManual_: false
  };
  let target = state;
  let traps = objectTraps;
  if (isArray) {
    target = [state];
    traps = arrayTraps;
  }
  const { revoke, proxy } = Proxy.revocable(target, traps);
  state.draft_ = proxy;
  state.revoke_ = revoke;
  return proxy;
}
var objectTraps = {
  get(state, prop) {
    if (prop === DRAFT_STATE)
      return state;
    const source = latest(state);
    if (!has(source, prop)) {
      return readPropFromProto(state, source, prop);
    }
    const value = source[prop];
    if (state.finalized_ || !isDraftable(value)) {
      return value;
    }
    if (value === peek(state.base_, prop)) {
      prepareCopy(state);
      return state.copy_[prop] = createProxy(value, state);
    }
    return value;
  },
  has(state, prop) {
    return prop in latest(state);
  },
  ownKeys(state) {
    return Reflect.ownKeys(latest(state));
  },
  set(state, prop, value) {
    const desc = getDescriptorFromProto(latest(state), prop);
    if (desc == null ? void 0 : desc.set) {
      desc.set.call(state.draft_, value);
      return true;
    }
    if (!state.modified_) {
      const current2 = peek(latest(state), prop);
      const currentState = current2 == null ? void 0 : current2[DRAFT_STATE];
      if (currentState && currentState.base_ === value) {
        state.copy_[prop] = value;
        state.assigned_[prop] = false;
        return true;
      }
      if (is(value, current2) && (value !== void 0 || has(state.base_, prop)))
        return true;
      prepareCopy(state);
      markChanged(state);
    }
    if (state.copy_[prop] === value && // special case: handle new props with value 'undefined'
    (value !== void 0 || prop in state.copy_) || // special case: NaN
    Number.isNaN(value) && Number.isNaN(state.copy_[prop]))
      return true;
    state.copy_[prop] = value;
    state.assigned_[prop] = true;
    return true;
  },
  deleteProperty(state, prop) {
    if (peek(state.base_, prop) !== void 0 || prop in state.base_) {
      state.assigned_[prop] = false;
      prepareCopy(state);
      markChanged(state);
    } else {
      delete state.assigned_[prop];
    }
    if (state.copy_) {
      delete state.copy_[prop];
    }
    return true;
  },
  // Note: We never coerce `desc.value` into an Immer draft, because we can't make
  // the same guarantee in ES5 mode.
  getOwnPropertyDescriptor(state, prop) {
    const owner = latest(state);
    const desc = Reflect.getOwnPropertyDescriptor(owner, prop);
    if (!desc)
      return desc;
    return {
      writable: true,
      configurable: state.type_ !== 1 || prop !== "length",
      enumerable: desc.enumerable,
      value: owner[prop]
    };
  },
  defineProperty() {
    die(11);
  },
  getPrototypeOf(state) {
    return getPrototypeOf(state.base_);
  },
  setPrototypeOf() {
    die(12);
  }
};
var arrayTraps = {};
each(objectTraps, (key, fn) => {
  arrayTraps[key] = function() {
    arguments[0] = arguments[0][0];
    return fn.apply(this, arguments);
  };
});
arrayTraps.deleteProperty = function(state, prop) {
  if (isNaN(parseInt(prop)))
    die(13);
  return arrayTraps.set.call(this, state, prop, void 0);
};
arrayTraps.set = function(state, prop, value) {
  if (prop !== "length" && isNaN(parseInt(prop)))
    die(14);
  return objectTraps.set.call(this, state[0], prop, value, state[0]);
};
function peek(draft, prop) {
  const state = draft[DRAFT_STATE];
  const source = state ? latest(state) : draft;
  return source[prop];
}
function readPropFromProto(state, source, prop) {
  var _a;
  const desc = getDescriptorFromProto(source, prop);
  return desc ? "value" in desc ? desc.value : (
    // This is a very special case, if the prop is a getter defined by the
    // prototype, we should invoke it with the draft as context!
    (_a = desc.get) == null ? void 0 : _a.call(state.draft_)
  ) : void 0;
}
function getDescriptorFromProto(source, prop) {
  if (!(prop in source))
    return void 0;
  let proto = getPrototypeOf(source);
  while (proto) {
    const desc = Object.getOwnPropertyDescriptor(proto, prop);
    if (desc)
      return desc;
    proto = getPrototypeOf(proto);
  }
  return void 0;
}
function markChanged(state) {
  if (!state.modified_) {
    state.modified_ = true;
    if (state.parent_) {
      markChanged(state.parent_);
    }
  }
}
function prepareCopy(state) {
  if (!state.copy_) {
    state.copy_ = shallowCopy(
      state.base_,
      state.scope_.immer_.useStrictShallowCopy_
    );
  }
}
var Immer2 = class {
  constructor(config) {
    this.autoFreeze_ = true;
    this.useStrictShallowCopy_ = false;
    this.produce = (base, recipe, patchListener) => {
      if (typeof base === "function" && typeof recipe !== "function") {
        const defaultBase = recipe;
        recipe = base;
        const self2 = this;
        return function curriedProduce(base2 = defaultBase, ...args) {
          return self2.produce(base2, (draft) => recipe.call(this, draft, ...args));
        };
      }
      if (typeof recipe !== "function")
        die(6);
      if (patchListener !== void 0 && typeof patchListener !== "function")
        die(7);
      let result;
      if (isDraftable(base)) {
        const scope = enterScope(this);
        const proxy = createProxy(base, void 0);
        let hasError = true;
        try {
          result = recipe(proxy);
          hasError = false;
        } finally {
          if (hasError)
            revokeScope(scope);
          else
            leaveScope(scope);
        }
        usePatchesInScope(scope, patchListener);
        return processResult(result, scope);
      } else if (!base || typeof base !== "object") {
        result = recipe(base);
        if (result === void 0)
          result = base;
        if (result === NOTHING)
          result = void 0;
        if (this.autoFreeze_)
          freeze(result, true);
        if (patchListener) {
          const p = [];
          const ip = [];
          getPlugin("Patches").generateReplacementPatches_(base, result, p, ip);
          patchListener(p, ip);
        }
        return result;
      } else
        die(1, base);
    };
    this.produceWithPatches = (base, recipe) => {
      if (typeof base === "function") {
        return (state, ...args) => this.produceWithPatches(state, (draft) => base(draft, ...args));
      }
      let patches, inversePatches;
      const result = this.produce(base, recipe, (p, ip) => {
        patches = p;
        inversePatches = ip;
      });
      return [result, patches, inversePatches];
    };
    if (typeof (config == null ? void 0 : config.autoFreeze) === "boolean")
      this.setAutoFreeze(config.autoFreeze);
    if (typeof (config == null ? void 0 : config.useStrictShallowCopy) === "boolean")
      this.setUseStrictShallowCopy(config.useStrictShallowCopy);
  }
  createDraft(base) {
    if (!isDraftable(base))
      die(8);
    if (isDraft(base))
      base = current(base);
    const scope = enterScope(this);
    const proxy = createProxy(base, void 0);
    proxy[DRAFT_STATE].isManual_ = true;
    leaveScope(scope);
    return proxy;
  }
  finishDraft(draft, patchListener) {
    const state = draft && draft[DRAFT_STATE];
    if (!state || !state.isManual_)
      die(9);
    const { scope_: scope } = state;
    usePatchesInScope(scope, patchListener);
    return processResult(void 0, scope);
  }
  /**
   * Pass true to automatically freeze all copies created by Immer.
   *
   * By default, auto-freezing is enabled.
   */
  setAutoFreeze(value) {
    this.autoFreeze_ = value;
  }
  /**
   * Pass true to enable strict shallow copy.
   *
   * By default, immer does not copy the object descriptors such as getter, setter and non-enumrable properties.
   */
  setUseStrictShallowCopy(value) {
    this.useStrictShallowCopy_ = value;
  }
  applyPatches(base, patches) {
    let i2;
    for (i2 = patches.length - 1; i2 >= 0; i2--) {
      const patch = patches[i2];
      if (patch.path.length === 0 && patch.op === "replace") {
        base = patch.value;
        break;
      }
    }
    if (i2 > -1) {
      patches = patches.slice(i2 + 1);
    }
    const applyPatchesImpl = getPlugin("Patches").applyPatches_;
    if (isDraft(base)) {
      return applyPatchesImpl(base, patches);
    }
    return this.produce(
      base,
      (draft) => applyPatchesImpl(draft, patches)
    );
  }
};
function createProxy(value, parent3) {
  const draft = isMap(value) ? getPlugin("MapSet").proxyMap_(value, parent3) : isSet(value) ? getPlugin("MapSet").proxySet_(value, parent3) : createProxyProxy(value, parent3);
  const scope = parent3 ? parent3.scope_ : getCurrentScope();
  scope.drafts_.push(draft);
  return draft;
}
function current(value) {
  if (!isDraft(value))
    die(10, value);
  return currentImpl(value);
}
function currentImpl(value) {
  if (!isDraftable(value) || isFrozen(value))
    return value;
  const state = value[DRAFT_STATE];
  let copy;
  if (state) {
    if (!state.modified_)
      return state.base_;
    state.finalized_ = true;
    copy = shallowCopy(value, state.scope_.immer_.useStrictShallowCopy_);
  } else {
    copy = shallowCopy(value, true);
  }
  each(copy, (key, childValue) => {
    set(copy, key, currentImpl(childValue));
  });
  if (state) {
    state.finalized_ = false;
  }
  return copy;
}
var immer = new Immer2();
var produce = immer.produce;
var produceWithPatches = immer.produceWithPatches.bind(
  immer
);
var setAutoFreeze = immer.setAutoFreeze.bind(immer);
var setUseStrictShallowCopy = immer.setUseStrictShallowCopy.bind(immer);
var applyPatches = immer.applyPatches.bind(immer);
var createDraft = immer.createDraft.bind(immer);
var finishDraft = immer.finishDraft.bind(immer);

// ../node_modules/slate/dist/index.es.js
var PathRef = {
  transform(ref, op) {
    var {
      current: current2,
      affinity
    } = ref;
    if (current2 == null) {
      return;
    }
    var path3 = Path.transform(current2, op, {
      affinity
    });
    ref.current = path3;
    if (path3 == null) {
      ref.unref();
    }
  }
};
var PointRef = {
  transform(ref, op) {
    var {
      current: current2,
      affinity
    } = ref;
    if (current2 == null) {
      return;
    }
    var point3 = Point.transform(current2, op, {
      affinity
    });
    ref.current = point3;
    if (point3 == null) {
      ref.unref();
    }
  }
};
var RangeRef = {
  transform(ref, op) {
    var {
      current: current2,
      affinity
    } = ref;
    if (current2 == null) {
      return;
    }
    var path3 = Range.transform(current2, op, {
      affinity
    });
    ref.current = path3;
    if (path3 == null) {
      ref.unref();
    }
  }
};
var DIRTY_PATHS = /* @__PURE__ */ new WeakMap();
var DIRTY_PATH_KEYS = /* @__PURE__ */ new WeakMap();
var FLUSHING = /* @__PURE__ */ new WeakMap();
var NORMALIZING = /* @__PURE__ */ new WeakMap();
var PATH_REFS = /* @__PURE__ */ new WeakMap();
var POINT_REFS = /* @__PURE__ */ new WeakMap();
var RANGE_REFS = /* @__PURE__ */ new WeakMap();
var Path = {
  ancestors(path3) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      reverse = false
    } = options;
    var paths = Path.levels(path3, options);
    if (reverse) {
      paths = paths.slice(1);
    } else {
      paths = paths.slice(0, -1);
    }
    return paths;
  },
  common(path3, another) {
    var common = [];
    for (var i2 = 0; i2 < path3.length && i2 < another.length; i2++) {
      var av = path3[i2];
      var bv = another[i2];
      if (av !== bv) {
        break;
      }
      common.push(av);
    }
    return common;
  },
  compare(path3, another) {
    var min = Math.min(path3.length, another.length);
    for (var i2 = 0; i2 < min; i2++) {
      if (path3[i2] < another[i2])
        return -1;
      if (path3[i2] > another[i2])
        return 1;
    }
    return 0;
  },
  endsAfter(path3, another) {
    var i2 = path3.length - 1;
    var as = path3.slice(0, i2);
    var bs = another.slice(0, i2);
    var av = path3[i2];
    var bv = another[i2];
    return Path.equals(as, bs) && av > bv;
  },
  endsAt(path3, another) {
    var i2 = path3.length;
    var as = path3.slice(0, i2);
    var bs = another.slice(0, i2);
    return Path.equals(as, bs);
  },
  endsBefore(path3, another) {
    var i2 = path3.length - 1;
    var as = path3.slice(0, i2);
    var bs = another.slice(0, i2);
    var av = path3[i2];
    var bv = another[i2];
    return Path.equals(as, bs) && av < bv;
  },
  equals(path3, another) {
    return path3.length === another.length && path3.every((n3, i2) => n3 === another[i2]);
  },
  hasPrevious(path3) {
    return path3[path3.length - 1] > 0;
  },
  isAfter(path3, another) {
    return Path.compare(path3, another) === 1;
  },
  isAncestor(path3, another) {
    return path3.length < another.length && Path.compare(path3, another) === 0;
  },
  isBefore(path3, another) {
    return Path.compare(path3, another) === -1;
  },
  isChild(path3, another) {
    return path3.length === another.length + 1 && Path.compare(path3, another) === 0;
  },
  isCommon(path3, another) {
    return path3.length <= another.length && Path.compare(path3, another) === 0;
  },
  isDescendant(path3, another) {
    return path3.length > another.length && Path.compare(path3, another) === 0;
  },
  isParent(path3, another) {
    return path3.length + 1 === another.length && Path.compare(path3, another) === 0;
  },
  isPath(value) {
    return Array.isArray(value) && (value.length === 0 || typeof value[0] === "number");
  },
  isSibling(path3, another) {
    if (path3.length !== another.length) {
      return false;
    }
    var as = path3.slice(0, -1);
    var bs = another.slice(0, -1);
    var al = path3[path3.length - 1];
    var bl = another[another.length - 1];
    return al !== bl && Path.equals(as, bs);
  },
  levels(path3) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      reverse = false
    } = options;
    var list = [];
    for (var i2 = 0; i2 <= path3.length; i2++) {
      list.push(path3.slice(0, i2));
    }
    if (reverse) {
      list.reverse();
    }
    return list;
  },
  next(path3) {
    if (path3.length === 0) {
      throw new Error("Cannot get the next path of a root path [".concat(path3, "], because it has no next index."));
    }
    var last2 = path3[path3.length - 1];
    return path3.slice(0, -1).concat(last2 + 1);
  },
  operationCanTransformPath(operation) {
    switch (operation.type) {
      case "insert_node":
      case "remove_node":
      case "merge_node":
      case "split_node":
      case "move_node":
        return true;
      default:
        return false;
    }
  },
  parent(path3) {
    if (path3.length === 0) {
      throw new Error("Cannot get the parent path of the root path [".concat(path3, "]."));
    }
    return path3.slice(0, -1);
  },
  previous(path3) {
    if (path3.length === 0) {
      throw new Error("Cannot get the previous path of a root path [".concat(path3, "], because it has no previous index."));
    }
    var last2 = path3[path3.length - 1];
    if (last2 <= 0) {
      throw new Error("Cannot get the previous path of a first child path [".concat(path3, "] because it would result in a negative index."));
    }
    return path3.slice(0, -1).concat(last2 - 1);
  },
  relative(path3, ancestor) {
    if (!Path.isAncestor(ancestor, path3) && !Path.equals(path3, ancestor)) {
      throw new Error("Cannot get the relative path of [".concat(path3, "] inside ancestor [").concat(ancestor, "], because it is not above or equal to the path."));
    }
    return path3.slice(ancestor.length);
  },
  transform(path3, operation) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    if (!path3)
      return null;
    var p = [...path3];
    var {
      affinity = "forward"
    } = options;
    if (path3.length === 0) {
      return p;
    }
    switch (operation.type) {
      case "insert_node": {
        var {
          path: op
        } = operation;
        if (Path.equals(op, p) || Path.endsBefore(op, p) || Path.isAncestor(op, p)) {
          p[op.length - 1] += 1;
        }
        break;
      }
      case "remove_node": {
        var {
          path: _op
        } = operation;
        if (Path.equals(_op, p) || Path.isAncestor(_op, p)) {
          return null;
        } else if (Path.endsBefore(_op, p)) {
          p[_op.length - 1] -= 1;
        }
        break;
      }
      case "merge_node": {
        var {
          path: _op2,
          position
        } = operation;
        if (Path.equals(_op2, p) || Path.endsBefore(_op2, p)) {
          p[_op2.length - 1] -= 1;
        } else if (Path.isAncestor(_op2, p)) {
          p[_op2.length - 1] -= 1;
          p[_op2.length] += position;
        }
        break;
      }
      case "split_node": {
        var {
          path: _op3,
          position: _position
        } = operation;
        if (Path.equals(_op3, p)) {
          if (affinity === "forward") {
            p[p.length - 1] += 1;
          } else if (affinity === "backward")
            ;
          else {
            return null;
          }
        } else if (Path.endsBefore(_op3, p)) {
          p[_op3.length - 1] += 1;
        } else if (Path.isAncestor(_op3, p) && path3[_op3.length] >= _position) {
          p[_op3.length - 1] += 1;
          p[_op3.length] -= _position;
        }
        break;
      }
      case "move_node": {
        var {
          path: _op4,
          newPath: onp
        } = operation;
        if (Path.equals(_op4, onp)) {
          return p;
        }
        if (Path.isAncestor(_op4, p) || Path.equals(_op4, p)) {
          var copy = onp.slice();
          if (Path.endsBefore(_op4, onp) && _op4.length < onp.length) {
            copy[_op4.length - 1] -= 1;
          }
          return copy.concat(p.slice(_op4.length));
        } else if (Path.isSibling(_op4, onp) && (Path.isAncestor(onp, p) || Path.equals(onp, p))) {
          if (Path.endsBefore(_op4, p)) {
            p[_op4.length - 1] -= 1;
          } else {
            p[_op4.length - 1] += 1;
          }
        } else if (Path.endsBefore(onp, p) || Path.equals(onp, p) || Path.isAncestor(onp, p)) {
          if (Path.endsBefore(_op4, p)) {
            p[_op4.length - 1] -= 1;
          }
          p[onp.length - 1] += 1;
        } else if (Path.endsBefore(_op4, p)) {
          if (Path.equals(onp, p)) {
            p[onp.length - 1] += 1;
          }
          p[_op4.length - 1] -= 1;
        }
        break;
      }
    }
    return p;
  }
};
function _typeof(o) {
  "@babel/helpers - typeof";
  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o2) {
    return typeof o2;
  } : function(o2) {
    return o2 && "function" == typeof Symbol && o2.constructor === Symbol && o2 !== Symbol.prototype ? "symbol" : typeof o2;
  }, _typeof(o);
}
function _toPrimitive(input, hint) {
  if (_typeof(input) !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (_typeof(res) !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toPropertyKey(arg) {
  var key = _toPrimitive(arg, "string");
  return _typeof(key) === "symbol" ? key : String(key);
}
function _defineProperty(obj, key, value) {
  key = _toPropertyKey(key);
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function ownKeys$e(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$e(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$e(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$e(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var applyToDraft = (editor, selection, op) => {
  switch (op.type) {
    case "insert_node": {
      var {
        path: path3,
        node: node3
      } = op;
      var parent3 = Node.parent(editor, path3);
      var index = path3[path3.length - 1];
      if (index > parent3.children.length) {
        throw new Error('Cannot apply an "insert_node" operation at path ['.concat(path3, "] because the destination is past the end of the node."));
      }
      parent3.children.splice(index, 0, node3);
      if (selection) {
        for (var [point3, key] of Range.points(selection)) {
          selection[key] = Point.transform(point3, op);
        }
      }
      break;
    }
    case "insert_text": {
      var {
        path: _path,
        offset,
        text
      } = op;
      if (text.length === 0)
        break;
      var _node = Node.leaf(editor, _path);
      var before3 = _node.text.slice(0, offset);
      var after3 = _node.text.slice(offset);
      _node.text = before3 + text + after3;
      if (selection) {
        for (var [_point, _key] of Range.points(selection)) {
          selection[_key] = Point.transform(_point, op);
        }
      }
      break;
    }
    case "merge_node": {
      var {
        path: _path2
      } = op;
      var _node2 = Node.get(editor, _path2);
      var prevPath = Path.previous(_path2);
      var prev = Node.get(editor, prevPath);
      var _parent = Node.parent(editor, _path2);
      var _index = _path2[_path2.length - 1];
      if (Text.isText(_node2) && Text.isText(prev)) {
        prev.text += _node2.text;
      } else if (!Text.isText(_node2) && !Text.isText(prev)) {
        prev.children.push(..._node2.children);
      } else {
        throw new Error('Cannot apply a "merge_node" operation at path ['.concat(_path2, "] to nodes of different interfaces: ").concat(Scrubber.stringify(_node2), " ").concat(Scrubber.stringify(prev)));
      }
      _parent.children.splice(_index, 1);
      if (selection) {
        for (var [_point2, _key2] of Range.points(selection)) {
          selection[_key2] = Point.transform(_point2, op);
        }
      }
      break;
    }
    case "move_node": {
      var {
        path: _path3,
        newPath
      } = op;
      if (Path.isAncestor(_path3, newPath)) {
        throw new Error("Cannot move a path [".concat(_path3, "] to new path [").concat(newPath, "] because the destination is inside itself."));
      }
      var _node3 = Node.get(editor, _path3);
      var _parent2 = Node.parent(editor, _path3);
      var _index2 = _path3[_path3.length - 1];
      _parent2.children.splice(_index2, 1);
      var truePath = Path.transform(_path3, op);
      var newParent = Node.get(editor, Path.parent(truePath));
      var newIndex = truePath[truePath.length - 1];
      newParent.children.splice(newIndex, 0, _node3);
      if (selection) {
        for (var [_point3, _key3] of Range.points(selection)) {
          selection[_key3] = Point.transform(_point3, op);
        }
      }
      break;
    }
    case "remove_node": {
      var {
        path: _path4
      } = op;
      var _index3 = _path4[_path4.length - 1];
      var _parent3 = Node.parent(editor, _path4);
      _parent3.children.splice(_index3, 1);
      if (selection) {
        for (var [_point4, _key4] of Range.points(selection)) {
          var result = Point.transform(_point4, op);
          if (selection != null && result != null) {
            selection[_key4] = result;
          } else {
            var _prev = void 0;
            var next3 = void 0;
            for (var [n3, p] of Node.texts(editor)) {
              if (Path.compare(p, _path4) === -1) {
                _prev = [n3, p];
              } else {
                next3 = [n3, p];
                break;
              }
            }
            var preferNext = false;
            if (_prev && next3) {
              if (Path.equals(next3[1], _path4)) {
                preferNext = !Path.hasPrevious(next3[1]);
              } else {
                preferNext = Path.common(_prev[1], _path4).length < Path.common(next3[1], _path4).length;
              }
            }
            if (_prev && !preferNext) {
              _point4.path = _prev[1];
              _point4.offset = _prev[0].text.length;
            } else if (next3) {
              _point4.path = next3[1];
              _point4.offset = 0;
            } else {
              selection = null;
            }
          }
        }
      }
      break;
    }
    case "remove_text": {
      var {
        path: _path5,
        offset: _offset,
        text: _text
      } = op;
      if (_text.length === 0)
        break;
      var _node4 = Node.leaf(editor, _path5);
      var _before = _node4.text.slice(0, _offset);
      var _after = _node4.text.slice(_offset + _text.length);
      _node4.text = _before + _after;
      if (selection) {
        for (var [_point5, _key5] of Range.points(selection)) {
          selection[_key5] = Point.transform(_point5, op);
        }
      }
      break;
    }
    case "set_node": {
      var {
        path: _path6,
        properties,
        newProperties
      } = op;
      if (_path6.length === 0) {
        throw new Error("Cannot set properties on the root node!");
      }
      var _node5 = Node.get(editor, _path6);
      for (var _key6 in newProperties) {
        if (_key6 === "children" || _key6 === "text") {
          throw new Error('Cannot set the "'.concat(_key6, '" property of nodes!'));
        }
        var value = newProperties[_key6];
        if (value == null) {
          delete _node5[_key6];
        } else {
          _node5[_key6] = value;
        }
      }
      for (var _key7 in properties) {
        if (!newProperties.hasOwnProperty(_key7)) {
          delete _node5[_key7];
        }
      }
      break;
    }
    case "set_selection": {
      var {
        newProperties: _newProperties
      } = op;
      if (_newProperties == null) {
        selection = _newProperties;
      } else {
        if (selection == null) {
          if (!Range.isRange(_newProperties)) {
            throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Scrubber.stringify(_newProperties), " when there is no current selection."));
          }
          selection = _objectSpread$e({}, _newProperties);
        }
        for (var _key8 in _newProperties) {
          var _value = _newProperties[_key8];
          if (_value == null) {
            if (_key8 === "anchor" || _key8 === "focus") {
              throw new Error('Cannot remove the "'.concat(_key8, '" selection property'));
            }
            delete selection[_key8];
          } else {
            selection[_key8] = _value;
          }
        }
      }
      break;
    }
    case "split_node": {
      var {
        path: _path7,
        position,
        properties: _properties
      } = op;
      if (_path7.length === 0) {
        throw new Error('Cannot apply a "split_node" operation at path ['.concat(_path7, "] because the root node cannot be split."));
      }
      var _node6 = Node.get(editor, _path7);
      var _parent4 = Node.parent(editor, _path7);
      var _index4 = _path7[_path7.length - 1];
      var newNode;
      if (Text.isText(_node6)) {
        var _before2 = _node6.text.slice(0, position);
        var _after2 = _node6.text.slice(position);
        _node6.text = _before2;
        newNode = _objectSpread$e(_objectSpread$e({}, _properties), {}, {
          text: _after2
        });
      } else {
        var _before3 = _node6.children.slice(0, position);
        var _after3 = _node6.children.slice(position);
        _node6.children = _before3;
        newNode = _objectSpread$e(_objectSpread$e({}, _properties), {}, {
          children: _after3
        });
      }
      _parent4.children.splice(_index4 + 1, 0, newNode);
      if (selection) {
        for (var [_point6, _key9] of Range.points(selection)) {
          selection[_key9] = Point.transform(_point6, op);
        }
      }
      break;
    }
  }
  return selection;
};
var GeneralTransforms = {
  transform(editor, op) {
    editor.children = createDraft(editor.children);
    var selection = editor.selection && createDraft(editor.selection);
    try {
      selection = applyToDraft(editor, selection, op);
    } finally {
      editor.children = finishDraft(editor.children);
      if (selection) {
        editor.selection = isDraft(selection) ? finishDraft(selection) : selection;
      } else {
        editor.selection = null;
      }
    }
  }
};
var NodeTransforms = {
  insertNodes(editor, nodes2, options) {
    editor.insertNodes(nodes2, options);
  },
  liftNodes(editor, options) {
    editor.liftNodes(options);
  },
  mergeNodes(editor, options) {
    editor.mergeNodes(options);
  },
  moveNodes(editor, options) {
    editor.moveNodes(options);
  },
  removeNodes(editor, options) {
    editor.removeNodes(options);
  },
  setNodes(editor, props, options) {
    editor.setNodes(props, options);
  },
  splitNodes(editor, options) {
    editor.splitNodes(options);
  },
  unsetNodes(editor, props, options) {
    editor.unsetNodes(props, options);
  },
  unwrapNodes(editor, options) {
    editor.unwrapNodes(options);
  },
  wrapNodes(editor, element, options) {
    editor.wrapNodes(element, options);
  }
};
var SelectionTransforms = {
  collapse(editor, options) {
    editor.collapse(options);
  },
  deselect(editor) {
    editor.deselect();
  },
  move(editor, options) {
    editor.move(options);
  },
  select(editor, target) {
    editor.select(target);
  },
  setPoint(editor, props, options) {
    editor.setPoint(props, options);
  },
  setSelection(editor, props) {
    editor.setSelection(props);
  }
};
var isDeepEqual = (node3, another) => {
  for (var key in node3) {
    var a = node3[key];
    var b = another[key];
    if (isPlainObject(a) && isPlainObject(b)) {
      if (!isDeepEqual(a, b))
        return false;
    } else if (Array.isArray(a) && Array.isArray(b)) {
      if (a.length !== b.length)
        return false;
      for (var i2 = 0; i2 < a.length; i2++) {
        if (a[i2] !== b[i2])
          return false;
      }
    } else if (a !== b) {
      return false;
    }
  }
  for (var _key in another) {
    if (node3[_key] === void 0 && another[_key] !== void 0) {
      return false;
    }
  }
  return true;
};
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null)
    return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i2;
  for (i2 = 0; i2 < sourceKeys.length; i2++) {
    key = sourceKeys[i2];
    if (excluded.indexOf(key) >= 0)
      continue;
    target[key] = source[key];
  }
  return target;
}
function _objectWithoutProperties(source, excluded) {
  if (source == null)
    return {};
  var target = _objectWithoutPropertiesLoose(source, excluded);
  var key, i2;
  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
    for (i2 = 0; i2 < sourceSymbolKeys.length; i2++) {
      key = sourceSymbolKeys[i2];
      if (excluded.indexOf(key) >= 0)
        continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key))
        continue;
      target[key] = source[key];
    }
  }
  return target;
}
var _excluded$4 = ["anchor", "focus"];
function ownKeys$d(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$d(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$d(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$d(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Range = {
  edges(range2) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      reverse = false
    } = options;
    var {
      anchor,
      focus
    } = range2;
    return Range.isBackward(range2) === reverse ? [anchor, focus] : [focus, anchor];
  },
  end(range2) {
    var [, end2] = Range.edges(range2);
    return end2;
  },
  equals(range2, another) {
    return Point.equals(range2.anchor, another.anchor) && Point.equals(range2.focus, another.focus);
  },
  includes(range2, target) {
    if (Range.isRange(target)) {
      if (Range.includes(range2, target.anchor) || Range.includes(range2, target.focus)) {
        return true;
      }
      var [rs, re] = Range.edges(range2);
      var [ts, te] = Range.edges(target);
      return Point.isBefore(rs, ts) && Point.isAfter(re, te);
    }
    var [start2, end2] = Range.edges(range2);
    var isAfterStart = false;
    var isBeforeEnd = false;
    if (Point.isPoint(target)) {
      isAfterStart = Point.compare(target, start2) >= 0;
      isBeforeEnd = Point.compare(target, end2) <= 0;
    } else {
      isAfterStart = Path.compare(target, start2.path) >= 0;
      isBeforeEnd = Path.compare(target, end2.path) <= 0;
    }
    return isAfterStart && isBeforeEnd;
  },
  intersection(range2, another) {
    var rest = _objectWithoutProperties(range2, _excluded$4);
    var [s1, e1] = Range.edges(range2);
    var [s2, e2] = Range.edges(another);
    var start2 = Point.isBefore(s1, s2) ? s2 : s1;
    var end2 = Point.isBefore(e1, e2) ? e1 : e2;
    if (Point.isBefore(end2, start2)) {
      return null;
    } else {
      return _objectSpread$d({
        anchor: start2,
        focus: end2
      }, rest);
    }
  },
  isBackward(range2) {
    var {
      anchor,
      focus
    } = range2;
    return Point.isAfter(anchor, focus);
  },
  isCollapsed(range2) {
    var {
      anchor,
      focus
    } = range2;
    return Point.equals(anchor, focus);
  },
  isExpanded(range2) {
    return !Range.isCollapsed(range2);
  },
  isForward(range2) {
    return !Range.isBackward(range2);
  },
  isRange(value) {
    return isPlainObject(value) && Point.isPoint(value.anchor) && Point.isPoint(value.focus);
  },
  *points(range2) {
    yield [range2.anchor, "anchor"];
    yield [range2.focus, "focus"];
  },
  start(range2) {
    var [start2] = Range.edges(range2);
    return start2;
  },
  transform(range2, op) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return produce(range2, (r2) => {
      if (r2 === null) {
        return null;
      }
      var {
        affinity = "inward"
      } = options;
      var affinityAnchor;
      var affinityFocus;
      if (affinity === "inward") {
        var isCollapsed = Range.isCollapsed(r2);
        if (Range.isForward(r2)) {
          affinityAnchor = "forward";
          affinityFocus = isCollapsed ? affinityAnchor : "backward";
        } else {
          affinityAnchor = "backward";
          affinityFocus = isCollapsed ? affinityAnchor : "forward";
        }
      } else if (affinity === "outward") {
        if (Range.isForward(r2)) {
          affinityAnchor = "backward";
          affinityFocus = "forward";
        } else {
          affinityAnchor = "forward";
          affinityFocus = "backward";
        }
      } else {
        affinityAnchor = affinity;
        affinityFocus = affinity;
      }
      var anchor = Point.transform(r2.anchor, op, {
        affinity: affinityAnchor
      });
      var focus = Point.transform(r2.focus, op, {
        affinity: affinityFocus
      });
      if (!anchor || !focus) {
        return null;
      }
      r2.anchor = anchor;
      r2.focus = focus;
    });
  }
};
var isElement = (value) => {
  return isPlainObject(value) && Node.isNodeList(value.children) && !Editor.isEditor(value);
};
var Element2 = {
  isAncestor(value) {
    return isPlainObject(value) && Node.isNodeList(value.children);
  },
  isElement,
  isElementList(value) {
    return Array.isArray(value) && value.every((val) => Element2.isElement(val));
  },
  isElementProps(props) {
    return props.children !== void 0;
  },
  isElementType: function isElementType(value, elementVal) {
    var elementKey = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "type";
    return isElement(value) && value[elementKey] === elementVal;
  },
  matches(element, props) {
    for (var key in props) {
      if (key === "children") {
        continue;
      }
      if (element[key] !== props[key]) {
        return false;
      }
    }
    return true;
  }
};
var _excluded$3 = ["children"];
var _excluded2$3 = ["text"];
var IS_NODE_LIST_CACHE = /* @__PURE__ */ new WeakMap();
var Node = {
  ancestor(root, path3) {
    var node3 = Node.get(root, path3);
    if (Text.isText(node3)) {
      throw new Error("Cannot get the ancestor node at path [".concat(path3, "] because it refers to a text node instead: ").concat(Scrubber.stringify(node3)));
    }
    return node3;
  },
  ancestors(root, path3) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return function* () {
      for (var p of Path.ancestors(path3, options)) {
        var n3 = Node.ancestor(root, p);
        var entry = [n3, p];
        yield entry;
      }
    }();
  },
  child(root, index) {
    if (Text.isText(root)) {
      throw new Error("Cannot get the child of a text node: ".concat(Scrubber.stringify(root)));
    }
    var c = root.children[index];
    if (c == null) {
      throw new Error("Cannot get child at index `".concat(index, "` in node: ").concat(Scrubber.stringify(root)));
    }
    return c;
  },
  children(root, path3) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return function* () {
      var {
        reverse = false
      } = options;
      var ancestor = Node.ancestor(root, path3);
      var {
        children
      } = ancestor;
      var index = reverse ? children.length - 1 : 0;
      while (reverse ? index >= 0 : index < children.length) {
        var child = Node.child(ancestor, index);
        var childPath = path3.concat(index);
        yield [child, childPath];
        index = reverse ? index - 1 : index + 1;
      }
    }();
  },
  common(root, path3, another) {
    var p = Path.common(path3, another);
    var n3 = Node.get(root, p);
    return [n3, p];
  },
  descendant(root, path3) {
    var node3 = Node.get(root, path3);
    if (Editor.isEditor(node3)) {
      throw new Error("Cannot get the descendant node at path [".concat(path3, "] because it refers to the root editor node instead: ").concat(Scrubber.stringify(node3)));
    }
    return node3;
  },
  descendants(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      for (var [node3, path3] of Node.nodes(root, options)) {
        if (path3.length !== 0) {
          yield [node3, path3];
        }
      }
    }();
  },
  elements(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      for (var [node3, path3] of Node.nodes(root, options)) {
        if (Element2.isElement(node3)) {
          yield [node3, path3];
        }
      }
    }();
  },
  extractProps(node3) {
    if (Element2.isAncestor(node3)) {
      var properties = _objectWithoutProperties(node3, _excluded$3);
      return properties;
    } else {
      var properties = _objectWithoutProperties(node3, _excluded2$3);
      return properties;
    }
  },
  first(root, path3) {
    var p = path3.slice();
    var n3 = Node.get(root, p);
    while (n3) {
      if (Text.isText(n3) || n3.children.length === 0) {
        break;
      } else {
        n3 = n3.children[0];
        p.push(0);
      }
    }
    return [n3, p];
  },
  fragment(root, range2) {
    if (Text.isText(root)) {
      throw new Error("Cannot get a fragment starting from a root text node: ".concat(Scrubber.stringify(root)));
    }
    var newRoot = produce({
      children: root.children
    }, (r2) => {
      var [start2, end2] = Range.edges(range2);
      var nodeEntries = Node.nodes(r2, {
        reverse: true,
        pass: (_ref) => {
          var [, path4] = _ref;
          return !Range.includes(range2, path4);
        }
      });
      for (var [, path3] of nodeEntries) {
        if (!Range.includes(range2, path3)) {
          var parent3 = Node.parent(r2, path3);
          var index = path3[path3.length - 1];
          parent3.children.splice(index, 1);
        }
        if (Path.equals(path3, end2.path)) {
          var leaf3 = Node.leaf(r2, path3);
          leaf3.text = leaf3.text.slice(0, end2.offset);
        }
        if (Path.equals(path3, start2.path)) {
          var _leaf = Node.leaf(r2, path3);
          _leaf.text = _leaf.text.slice(start2.offset);
        }
      }
      if (Editor.isEditor(r2)) {
        r2.selection = null;
      }
    });
    return newRoot.children;
  },
  get(root, path3) {
    var node3 = root;
    for (var i2 = 0; i2 < path3.length; i2++) {
      var p = path3[i2];
      if (Text.isText(node3) || !node3.children[p]) {
        throw new Error("Cannot find a descendant at path [".concat(path3, "] in node: ").concat(Scrubber.stringify(root)));
      }
      node3 = node3.children[p];
    }
    return node3;
  },
  has(root, path3) {
    var node3 = root;
    for (var i2 = 0; i2 < path3.length; i2++) {
      var p = path3[i2];
      if (Text.isText(node3) || !node3.children[p]) {
        return false;
      }
      node3 = node3.children[p];
    }
    return true;
  },
  isNode(value) {
    return Text.isText(value) || Element2.isElement(value) || Editor.isEditor(value);
  },
  isNodeList(value) {
    if (!Array.isArray(value)) {
      return false;
    }
    var cachedResult = IS_NODE_LIST_CACHE.get(value);
    if (cachedResult !== void 0) {
      return cachedResult;
    }
    var isNodeList = value.every((val) => Node.isNode(val));
    IS_NODE_LIST_CACHE.set(value, isNodeList);
    return isNodeList;
  },
  last(root, path3) {
    var p = path3.slice();
    var n3 = Node.get(root, p);
    while (n3) {
      if (Text.isText(n3) || n3.children.length === 0) {
        break;
      } else {
        var i2 = n3.children.length - 1;
        n3 = n3.children[i2];
        p.push(i2);
      }
    }
    return [n3, p];
  },
  leaf(root, path3) {
    var node3 = Node.get(root, path3);
    if (!Text.isText(node3)) {
      throw new Error("Cannot get the leaf node at path [".concat(path3, "] because it refers to a non-leaf node: ").concat(Scrubber.stringify(node3)));
    }
    return node3;
  },
  levels(root, path3) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return function* () {
      for (var p of Path.levels(path3, options)) {
        var n3 = Node.get(root, p);
        yield [n3, p];
      }
    }();
  },
  matches(node3, props) {
    return Element2.isElement(node3) && Element2.isElementProps(props) && Element2.matches(node3, props) || Text.isText(node3) && Text.isTextProps(props) && Text.matches(node3, props);
  },
  nodes(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      var {
        pass,
        reverse = false
      } = options;
      var {
        from = [],
        to
      } = options;
      var visited = /* @__PURE__ */ new Set();
      var p = [];
      var n3 = root;
      while (true) {
        if (to && (reverse ? Path.isBefore(p, to) : Path.isAfter(p, to))) {
          break;
        }
        if (!visited.has(n3)) {
          yield [n3, p];
        }
        if (!visited.has(n3) && !Text.isText(n3) && n3.children.length !== 0 && (pass == null || pass([n3, p]) === false)) {
          visited.add(n3);
          var nextIndex = reverse ? n3.children.length - 1 : 0;
          if (Path.isAncestor(p, from)) {
            nextIndex = from[p.length];
          }
          p = p.concat(nextIndex);
          n3 = Node.get(root, p);
          continue;
        }
        if (p.length === 0) {
          break;
        }
        if (!reverse) {
          var newPath = Path.next(p);
          if (Node.has(root, newPath)) {
            p = newPath;
            n3 = Node.get(root, p);
            continue;
          }
        }
        if (reverse && p[p.length - 1] !== 0) {
          var _newPath = Path.previous(p);
          p = _newPath;
          n3 = Node.get(root, p);
          continue;
        }
        p = Path.parent(p);
        n3 = Node.get(root, p);
        visited.add(n3);
      }
    }();
  },
  parent(root, path3) {
    var parentPath = Path.parent(path3);
    var p = Node.get(root, parentPath);
    if (Text.isText(p)) {
      throw new Error("Cannot get the parent of path [".concat(path3, "] because it does not exist in the root."));
    }
    return p;
  },
  string(node3) {
    if (Text.isText(node3)) {
      return node3.text;
    } else {
      return node3.children.map(Node.string).join("");
    }
  },
  texts(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      for (var [node3, path3] of Node.nodes(root, options)) {
        if (Text.isText(node3)) {
          yield [node3, path3];
        }
      }
    }();
  }
};
function ownKeys$c(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$c(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$c(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$c(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Operation = {
  isNodeOperation(value) {
    return Operation.isOperation(value) && value.type.endsWith("_node");
  },
  isOperation(value) {
    if (!isPlainObject(value)) {
      return false;
    }
    switch (value.type) {
      case "insert_node":
        return Path.isPath(value.path) && Node.isNode(value.node);
      case "insert_text":
        return typeof value.offset === "number" && typeof value.text === "string" && Path.isPath(value.path);
      case "merge_node":
        return typeof value.position === "number" && Path.isPath(value.path) && isPlainObject(value.properties);
      case "move_node":
        return Path.isPath(value.path) && Path.isPath(value.newPath);
      case "remove_node":
        return Path.isPath(value.path) && Node.isNode(value.node);
      case "remove_text":
        return typeof value.offset === "number" && typeof value.text === "string" && Path.isPath(value.path);
      case "set_node":
        return Path.isPath(value.path) && isPlainObject(value.properties) && isPlainObject(value.newProperties);
      case "set_selection":
        return value.properties === null && Range.isRange(value.newProperties) || value.newProperties === null && Range.isRange(value.properties) || isPlainObject(value.properties) && isPlainObject(value.newProperties);
      case "split_node":
        return Path.isPath(value.path) && typeof value.position === "number" && isPlainObject(value.properties);
      default:
        return false;
    }
  },
  isOperationList(value) {
    return Array.isArray(value) && value.every((val) => Operation.isOperation(val));
  },
  isSelectionOperation(value) {
    return Operation.isOperation(value) && value.type.endsWith("_selection");
  },
  isTextOperation(value) {
    return Operation.isOperation(value) && value.type.endsWith("_text");
  },
  inverse(op) {
    switch (op.type) {
      case "insert_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "remove_node"
        });
      }
      case "insert_text": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "remove_text"
        });
      }
      case "merge_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "split_node",
          path: Path.previous(op.path)
        });
      }
      case "move_node": {
        var {
          newPath,
          path: path3
        } = op;
        if (Path.equals(newPath, path3)) {
          return op;
        }
        if (Path.isSibling(path3, newPath)) {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            path: newPath,
            newPath: path3
          });
        }
        var inversePath = Path.transform(path3, op);
        var inverseNewPath = Path.transform(Path.next(path3), op);
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          path: inversePath,
          newPath: inverseNewPath
        });
      }
      case "remove_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "insert_node"
        });
      }
      case "remove_text": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "insert_text"
        });
      }
      case "set_node": {
        var {
          properties,
          newProperties
        } = op;
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          properties: newProperties,
          newProperties: properties
        });
      }
      case "set_selection": {
        var {
          properties: _properties,
          newProperties: _newProperties
        } = op;
        if (_properties == null) {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            properties: _newProperties,
            newProperties: null
          });
        } else if (_newProperties == null) {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            properties: null,
            newProperties: _properties
          });
        } else {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            properties: _newProperties,
            newProperties: _properties
          });
        }
      }
      case "split_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "merge_node",
          path: Path.next(op.path)
        });
      }
    }
  }
};
var IS_EDITOR_CACHE = /* @__PURE__ */ new WeakMap();
var isEditor = (value) => {
  var cachedIsEditor = IS_EDITOR_CACHE.get(value);
  if (cachedIsEditor !== void 0) {
    return cachedIsEditor;
  }
  if (!isPlainObject(value)) {
    return false;
  }
  var isEditor2 = typeof value.addMark === "function" && typeof value.apply === "function" && typeof value.deleteFragment === "function" && typeof value.insertBreak === "function" && typeof value.insertSoftBreak === "function" && typeof value.insertFragment === "function" && typeof value.insertNode === "function" && typeof value.insertText === "function" && typeof value.isElementReadOnly === "function" && typeof value.isInline === "function" && typeof value.isSelectable === "function" && typeof value.isVoid === "function" && typeof value.normalizeNode === "function" && typeof value.onChange === "function" && typeof value.removeMark === "function" && typeof value.getDirtyPaths === "function" && (value.marks === null || isPlainObject(value.marks)) && (value.selection === null || Range.isRange(value.selection)) && Node.isNodeList(value.children) && Operation.isOperationList(value.operations);
  IS_EDITOR_CACHE.set(value, isEditor2);
  return isEditor2;
};
var Editor = {
  above(editor, options) {
    return editor.above(options);
  },
  addMark(editor, key, value) {
    editor.addMark(key, value);
  },
  after(editor, at, options) {
    return editor.after(at, options);
  },
  before(editor, at, options) {
    return editor.before(at, options);
  },
  deleteBackward(editor) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      unit = "character"
    } = options;
    editor.deleteBackward(unit);
  },
  deleteForward(editor) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      unit = "character"
    } = options;
    editor.deleteForward(unit);
  },
  deleteFragment(editor, options) {
    editor.deleteFragment(options);
  },
  edges(editor, at) {
    return editor.edges(at);
  },
  elementReadOnly(editor) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return editor.elementReadOnly(options);
  },
  end(editor, at) {
    return editor.end(at);
  },
  first(editor, at) {
    return editor.first(at);
  },
  fragment(editor, at) {
    return editor.fragment(at);
  },
  hasBlocks(editor, element) {
    return editor.hasBlocks(element);
  },
  hasInlines(editor, element) {
    return editor.hasInlines(element);
  },
  hasPath(editor, path3) {
    return editor.hasPath(path3);
  },
  hasTexts(editor, element) {
    return editor.hasTexts(element);
  },
  insertBreak(editor) {
    editor.insertBreak();
  },
  insertFragment(editor, fragment2, options) {
    editor.insertFragment(fragment2, options);
  },
  insertNode(editor, node3) {
    editor.insertNode(node3);
  },
  insertSoftBreak(editor) {
    editor.insertSoftBreak();
  },
  insertText(editor, text) {
    editor.insertText(text);
  },
  isBlock(editor, value) {
    return editor.isBlock(value);
  },
  isEdge(editor, point3, at) {
    return editor.isEdge(point3, at);
  },
  isEditor(value) {
    return isEditor(value);
  },
  isElementReadOnly(editor, element) {
    return editor.isElementReadOnly(element);
  },
  isEmpty(editor, element) {
    return editor.isEmpty(element);
  },
  isEnd(editor, point3, at) {
    return editor.isEnd(point3, at);
  },
  isInline(editor, value) {
    return editor.isInline(value);
  },
  isNormalizing(editor) {
    return editor.isNormalizing();
  },
  isSelectable(editor, value) {
    return editor.isSelectable(value);
  },
  isStart(editor, point3, at) {
    return editor.isStart(point3, at);
  },
  isVoid(editor, value) {
    return editor.isVoid(value);
  },
  last(editor, at) {
    return editor.last(at);
  },
  leaf(editor, at, options) {
    return editor.leaf(at, options);
  },
  levels(editor, options) {
    return editor.levels(options);
  },
  marks(editor) {
    return editor.getMarks();
  },
  next(editor, options) {
    return editor.next(options);
  },
  node(editor, at, options) {
    return editor.node(at, options);
  },
  nodes(editor, options) {
    return editor.nodes(options);
  },
  normalize(editor, options) {
    editor.normalize(options);
  },
  parent(editor, at, options) {
    return editor.parent(at, options);
  },
  path(editor, at, options) {
    return editor.path(at, options);
  },
  pathRef(editor, path3, options) {
    return editor.pathRef(path3, options);
  },
  pathRefs(editor) {
    return editor.pathRefs();
  },
  point(editor, at, options) {
    return editor.point(at, options);
  },
  pointRef(editor, point3, options) {
    return editor.pointRef(point3, options);
  },
  pointRefs(editor) {
    return editor.pointRefs();
  },
  positions(editor, options) {
    return editor.positions(options);
  },
  previous(editor, options) {
    return editor.previous(options);
  },
  range(editor, at, to) {
    return editor.range(at, to);
  },
  rangeRef(editor, range2, options) {
    return editor.rangeRef(range2, options);
  },
  rangeRefs(editor) {
    return editor.rangeRefs();
  },
  removeMark(editor, key) {
    editor.removeMark(key);
  },
  setNormalizing(editor, isNormalizing2) {
    editor.setNormalizing(isNormalizing2);
  },
  start(editor, at) {
    return editor.start(at);
  },
  string(editor, at, options) {
    return editor.string(at, options);
  },
  unhangRange(editor, range2, options) {
    return editor.unhangRange(range2, options);
  },
  void(editor, options) {
    return editor.void(options);
  },
  withoutNormalizing(editor, fn) {
    editor.withoutNormalizing(fn);
  }
};
var Span = {
  isSpan(value) {
    return Array.isArray(value) && value.length === 2 && value.every(Path.isPath);
  }
};
function ownKeys$b(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$b(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$b(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$b(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Point = {
  compare(point3, another) {
    var result = Path.compare(point3.path, another.path);
    if (result === 0) {
      if (point3.offset < another.offset)
        return -1;
      if (point3.offset > another.offset)
        return 1;
      return 0;
    }
    return result;
  },
  isAfter(point3, another) {
    return Point.compare(point3, another) === 1;
  },
  isBefore(point3, another) {
    return Point.compare(point3, another) === -1;
  },
  equals(point3, another) {
    return point3.offset === another.offset && Path.equals(point3.path, another.path);
  },
  isPoint(value) {
    return isPlainObject(value) && typeof value.offset === "number" && Path.isPath(value.path);
  },
  transform(point3, op) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return produce(point3, (p) => {
      if (p === null) {
        return null;
      }
      var {
        affinity = "forward"
      } = options;
      var {
        path: path3,
        offset
      } = p;
      switch (op.type) {
        case "insert_node":
        case "move_node": {
          p.path = Path.transform(path3, op, options);
          break;
        }
        case "insert_text": {
          if (Path.equals(op.path, path3) && (op.offset < offset || op.offset === offset && affinity === "forward")) {
            p.offset += op.text.length;
          }
          break;
        }
        case "merge_node": {
          if (Path.equals(op.path, path3)) {
            p.offset += op.position;
          }
          p.path = Path.transform(path3, op, options);
          break;
        }
        case "remove_text": {
          if (Path.equals(op.path, path3) && op.offset <= offset) {
            p.offset -= Math.min(offset - op.offset, op.text.length);
          }
          break;
        }
        case "remove_node": {
          if (Path.equals(op.path, path3) || Path.isAncestor(op.path, path3)) {
            return null;
          }
          p.path = Path.transform(path3, op, options);
          break;
        }
        case "split_node": {
          if (Path.equals(op.path, path3)) {
            if (op.position === offset && affinity == null) {
              return null;
            } else if (op.position < offset || op.position === offset && affinity === "forward") {
              p.offset -= op.position;
              p.path = Path.transform(path3, op, _objectSpread$b(_objectSpread$b({}, options), {}, {
                affinity: "forward"
              }));
            }
          } else {
            p.path = Path.transform(path3, op, options);
          }
          break;
        }
      }
    });
  }
};
var _scrubber = void 0;
var Scrubber = {
  setScrubber(scrubber) {
    _scrubber = scrubber;
  },
  stringify(value) {
    return JSON.stringify(value, _scrubber);
  }
};
var _excluded$2 = ["text"];
var _excluded2$2 = ["anchor", "focus"];
function ownKeys$a(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$a(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$a(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$a(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Text = {
  equals(text, another) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    var {
      loose = false
    } = options;
    function omitText(obj) {
      var rest = _objectWithoutProperties(obj, _excluded$2);
      return rest;
    }
    return isDeepEqual(loose ? omitText(text) : text, loose ? omitText(another) : another);
  },
  isText(value) {
    return isPlainObject(value) && typeof value.text === "string";
  },
  isTextList(value) {
    return Array.isArray(value) && value.every((val) => Text.isText(val));
  },
  isTextProps(props) {
    return props.text !== void 0;
  },
  matches(text, props) {
    for (var key in props) {
      if (key === "text") {
        continue;
      }
      if (!text.hasOwnProperty(key) || text[key] !== props[key]) {
        return false;
      }
    }
    return true;
  },
  decorations(node3, decorations) {
    var leaves = [_objectSpread$a({}, node3)];
    for (var dec of decorations) {
      var rest = _objectWithoutProperties(dec, _excluded2$2);
      var [start2, end2] = Range.edges(dec);
      var next3 = [];
      var leafEnd = 0;
      var decorationStart = start2.offset;
      var decorationEnd = end2.offset;
      for (var leaf3 of leaves) {
        var {
          length
        } = leaf3.text;
        var leafStart = leafEnd;
        leafEnd += length;
        if (decorationStart <= leafStart && leafEnd <= decorationEnd) {
          Object.assign(leaf3, rest);
          next3.push(leaf3);
          continue;
        }
        if (decorationStart !== decorationEnd && (decorationStart === leafEnd || decorationEnd === leafStart) || decorationStart > leafEnd || decorationEnd < leafStart || decorationEnd === leafStart && leafStart !== 0) {
          next3.push(leaf3);
          continue;
        }
        var middle = leaf3;
        var before3 = void 0;
        var after3 = void 0;
        if (decorationEnd < leafEnd) {
          var off = decorationEnd - leafStart;
          after3 = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(off)
          });
          middle = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(0, off)
          });
        }
        if (decorationStart > leafStart) {
          var _off = decorationStart - leafStart;
          before3 = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(0, _off)
          });
          middle = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(_off)
          });
        }
        Object.assign(middle, rest);
        if (before3) {
          next3.push(before3);
        }
        next3.push(middle);
        if (after3) {
          next3.push(after3);
        }
      }
      leaves = next3;
    }
    return leaves;
  }
};
var getDefaultInsertLocation = (editor) => {
  if (editor.selection) {
    return editor.selection;
  } else if (editor.children.length > 0) {
    return Editor.end(editor, []);
  } else {
    return [0];
  }
};
var matchPath = (editor, path3) => {
  var [node3] = Editor.node(editor, path3);
  return (n3) => n3 === node3;
};
var getCharacterDistance = function getCharacterDistance2(str) {
  var isRTL = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
  var isLTR = !isRTL;
  var codepoints = isRTL ? codepointsIteratorRTL(str) : str;
  var left = CodepointType.None;
  var right = CodepointType.None;
  var distance = 0;
  var gb11 = null;
  var gb12Or13 = null;
  for (var char of codepoints) {
    var code = char.codePointAt(0);
    if (!code)
      break;
    var type = getCodepointType(char, code);
    [left, right] = isLTR ? [right, type] : [type, left];
    if (intersects(left, CodepointType.ZWJ) && intersects(right, CodepointType.ExtPict)) {
      if (isLTR) {
        gb11 = endsWithEmojiZWJ(str.substring(0, distance));
      } else {
        gb11 = endsWithEmojiZWJ(str.substring(0, str.length - distance));
      }
      if (!gb11)
        break;
    }
    if (intersects(left, CodepointType.RI) && intersects(right, CodepointType.RI)) {
      if (gb12Or13 !== null) {
        gb12Or13 = !gb12Or13;
      } else {
        if (isLTR) {
          gb12Or13 = true;
        } else {
          gb12Or13 = endsWithOddNumberOfRIs(str.substring(0, str.length - distance));
        }
      }
      if (!gb12Or13)
        break;
    }
    if (left !== CodepointType.None && right !== CodepointType.None && isBoundaryPair(left, right)) {
      break;
    }
    distance += char.length;
  }
  return distance || 1;
};
var SPACE = /\s/;
var PUNCTUATION = /[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;
var CHAMELEON = /['\u2018\u2019]/;
var getWordDistance = function getWordDistance2(text) {
  var isRTL = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
  var dist = 0;
  var started = false;
  while (text.length > 0) {
    var charDist = getCharacterDistance(text, isRTL);
    var [char, remaining] = splitByCharacterDistance(text, charDist, isRTL);
    if (isWordCharacter(char, remaining, isRTL)) {
      started = true;
      dist += charDist;
    } else if (!started) {
      dist += charDist;
    } else {
      break;
    }
    text = remaining;
  }
  return dist;
};
var splitByCharacterDistance = (str, dist, isRTL) => {
  if (isRTL) {
    var at = str.length - dist;
    return [str.slice(at, str.length), str.slice(0, at)];
  }
  return [str.slice(0, dist), str.slice(dist)];
};
var isWordCharacter = function isWordCharacter2(char, remaining) {
  var isRTL = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
  if (SPACE.test(char)) {
    return false;
  }
  if (CHAMELEON.test(char)) {
    var charDist = getCharacterDistance(remaining, isRTL);
    var [nextChar, nextRemaining] = splitByCharacterDistance(remaining, charDist, isRTL);
    if (isWordCharacter2(nextChar, nextRemaining, isRTL)) {
      return true;
    }
  }
  if (PUNCTUATION.test(char)) {
    return false;
  }
  return true;
};
var codepointsIteratorRTL = function* codepointsIteratorRTL2(str) {
  var end2 = str.length - 1;
  for (var i2 = 0; i2 < str.length; i2++) {
    var char1 = str.charAt(end2 - i2);
    if (isLowSurrogate(char1.charCodeAt(0))) {
      var char2 = str.charAt(end2 - i2 - 1);
      if (isHighSurrogate(char2.charCodeAt(0))) {
        yield char2 + char1;
        i2++;
        continue;
      }
    }
    yield char1;
  }
};
var isHighSurrogate = (charCode) => {
  return charCode >= 55296 && charCode <= 56319;
};
var isLowSurrogate = (charCode) => {
  return charCode >= 56320 && charCode <= 57343;
};
var CodepointType;
(function(CodepointType2) {
  CodepointType2[CodepointType2["None"] = 0] = "None";
  CodepointType2[CodepointType2["Extend"] = 1] = "Extend";
  CodepointType2[CodepointType2["ZWJ"] = 2] = "ZWJ";
  CodepointType2[CodepointType2["RI"] = 4] = "RI";
  CodepointType2[CodepointType2["Prepend"] = 8] = "Prepend";
  CodepointType2[CodepointType2["SpacingMark"] = 16] = "SpacingMark";
  CodepointType2[CodepointType2["L"] = 32] = "L";
  CodepointType2[CodepointType2["V"] = 64] = "V";
  CodepointType2[CodepointType2["T"] = 128] = "T";
  CodepointType2[CodepointType2["LV"] = 256] = "LV";
  CodepointType2[CodepointType2["LVT"] = 512] = "LVT";
  CodepointType2[CodepointType2["ExtPict"] = 1024] = "ExtPict";
  CodepointType2[CodepointType2["Any"] = 2048] = "Any";
})(CodepointType || (CodepointType = {}));
var reExtend = /^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/;
var rePrepend = /^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/;
var reSpacingMark = /^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/;
var reL = /^[\u1100-\u115F\uA960-\uA97C]$/;
var reV = /^[\u1160-\u11A7\uD7B0-\uD7C6]$/;
var reT = /^[\u11A8-\u11FF\uD7CB-\uD7FB]$/;
var reLV = /^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/;
var reLVT = /^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/;
var reExtPict = /^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/;
var getCodepointType = (char, code) => {
  var type = CodepointType.Any;
  if (char.search(reExtend) !== -1) {
    type |= CodepointType.Extend;
  }
  if (code === 8205) {
    type |= CodepointType.ZWJ;
  }
  if (code >= 127462 && code <= 127487) {
    type |= CodepointType.RI;
  }
  if (char.search(rePrepend) !== -1) {
    type |= CodepointType.Prepend;
  }
  if (char.search(reSpacingMark) !== -1) {
    type |= CodepointType.SpacingMark;
  }
  if (char.search(reL) !== -1) {
    type |= CodepointType.L;
  }
  if (char.search(reV) !== -1) {
    type |= CodepointType.V;
  }
  if (char.search(reT) !== -1) {
    type |= CodepointType.T;
  }
  if (char.search(reLV) !== -1) {
    type |= CodepointType.LV;
  }
  if (char.search(reLVT) !== -1) {
    type |= CodepointType.LVT;
  }
  if (char.search(reExtPict) !== -1) {
    type |= CodepointType.ExtPict;
  }
  return type;
};
function intersects(x, y) {
  return (x & y) !== 0;
}
var NonBoundaryPairs = [
  // GB6
  [CodepointType.L, CodepointType.L | CodepointType.V | CodepointType.LV | CodepointType.LVT],
  // GB7
  [CodepointType.LV | CodepointType.V, CodepointType.V | CodepointType.T],
  // GB8
  [CodepointType.LVT | CodepointType.T, CodepointType.T],
  // GB9
  [CodepointType.Any, CodepointType.Extend | CodepointType.ZWJ],
  // GB9a
  [CodepointType.Any, CodepointType.SpacingMark],
  // GB9b
  [CodepointType.Prepend, CodepointType.Any],
  // GB11
  [CodepointType.ZWJ, CodepointType.ExtPict],
  // GB12 and GB13
  [CodepointType.RI, CodepointType.RI]
];
function isBoundaryPair(left, right) {
  return NonBoundaryPairs.findIndex((r2) => intersects(left, r2[0]) && intersects(right, r2[1])) === -1;
}
var endingEmojiZWJ = /(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/;
var endsWithEmojiZWJ = (str) => {
  return str.search(endingEmojiZWJ) !== -1;
};
var endingRIs = /(?:\uD83C[\uDDE6-\uDDFF])+$/g;
var endsWithOddNumberOfRIs = (str) => {
  var match = str.match(endingRIs);
  if (match === null) {
    return false;
  } else {
    var numRIs = match[0].length / 2;
    return numRIs % 2 === 1;
  }
};
var TextTransforms = {
  delete(editor, options) {
    editor.delete(options);
  },
  insertFragment(editor, fragment2, options) {
    editor.insertFragment(fragment2, options);
  },
  insertText(editor, text) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    Editor.withoutNormalizing(editor, () => {
      var {
        voids = false
      } = options;
      var {
        at = getDefaultInsertLocation(editor)
      } = options;
      if (Path.isPath(at)) {
        at = Editor.range(editor, at);
      }
      if (Range.isRange(at)) {
        if (Range.isCollapsed(at)) {
          at = at.anchor;
        } else {
          var end2 = Range.end(at);
          if (!voids && Editor.void(editor, {
            at: end2
          })) {
            return;
          }
          var start2 = Range.start(at);
          var startRef = Editor.pointRef(editor, start2);
          var endRef = Editor.pointRef(editor, end2);
          Transforms.delete(editor, {
            at,
            voids
          });
          var startPoint = startRef.unref();
          var endPoint = endRef.unref();
          at = startPoint || endPoint;
          Transforms.setSelection(editor, {
            anchor: at,
            focus: at
          });
        }
      }
      if (!voids && Editor.void(editor, {
        at
      }) || Editor.elementReadOnly(editor, {
        at
      })) {
        return;
      }
      var {
        path: path3,
        offset
      } = at;
      if (text.length > 0)
        editor.apply({
          type: "insert_text",
          path: path3,
          offset,
          text
        });
    });
  }
};
function ownKeys$9(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$9(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$9(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$9(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Transforms = _objectSpread$9(_objectSpread$9(_objectSpread$9(_objectSpread$9({}, GeneralTransforms), NodeTransforms), SelectionTransforms), TextTransforms);
var apply = (editor, op) => {
  for (var ref of Editor.pathRefs(editor)) {
    PathRef.transform(ref, op);
  }
  for (var _ref of Editor.pointRefs(editor)) {
    PointRef.transform(_ref, op);
  }
  for (var _ref2 of Editor.rangeRefs(editor)) {
    RangeRef.transform(_ref2, op);
  }
  var oldDirtyPaths = DIRTY_PATHS.get(editor) || [];
  var oldDirtyPathKeys = DIRTY_PATH_KEYS.get(editor) || /* @__PURE__ */ new Set();
  var dirtyPaths;
  var dirtyPathKeys;
  var add = (path4) => {
    if (path4) {
      var key = path4.join(",");
      if (!dirtyPathKeys.has(key)) {
        dirtyPathKeys.add(key);
        dirtyPaths.push(path4);
      }
    }
  };
  if (Path.operationCanTransformPath(op)) {
    dirtyPaths = [];
    dirtyPathKeys = /* @__PURE__ */ new Set();
    for (var path3 of oldDirtyPaths) {
      var newPath = Path.transform(path3, op);
      add(newPath);
    }
  } else {
    dirtyPaths = oldDirtyPaths;
    dirtyPathKeys = oldDirtyPathKeys;
  }
  var newDirtyPaths = editor.getDirtyPaths(op);
  for (var _path of newDirtyPaths) {
    add(_path);
  }
  DIRTY_PATHS.set(editor, dirtyPaths);
  DIRTY_PATH_KEYS.set(editor, dirtyPathKeys);
  Transforms.transform(editor, op);
  editor.operations.push(op);
  Editor.normalize(editor, {
    operation: op
  });
  if (op.type === "set_selection") {
    editor.marks = null;
  }
  if (!FLUSHING.get(editor)) {
    FLUSHING.set(editor, true);
    Promise.resolve().then(() => {
      FLUSHING.set(editor, false);
      editor.onChange({
        operation: op
      });
      editor.operations = [];
    });
  }
};
var getDirtyPaths = (editor, op) => {
  switch (op.type) {
    case "insert_text":
    case "remove_text":
    case "set_node": {
      var {
        path: path3
      } = op;
      return Path.levels(path3);
    }
    case "insert_node": {
      var {
        node: node3,
        path: _path
      } = op;
      var levels2 = Path.levels(_path);
      var descendants = Text.isText(node3) ? [] : Array.from(Node.nodes(node3), (_ref) => {
        var [, p2] = _ref;
        return _path.concat(p2);
      });
      return [...levels2, ...descendants];
    }
    case "merge_node": {
      var {
        path: _path2
      } = op;
      var ancestors = Path.ancestors(_path2);
      var previousPath = Path.previous(_path2);
      return [...ancestors, previousPath];
    }
    case "move_node": {
      var {
        path: _path3,
        newPath
      } = op;
      if (Path.equals(_path3, newPath)) {
        return [];
      }
      var oldAncestors = [];
      var newAncestors = [];
      for (var ancestor of Path.ancestors(_path3)) {
        var p = Path.transform(ancestor, op);
        oldAncestors.push(p);
      }
      for (var _ancestor of Path.ancestors(newPath)) {
        var _p = Path.transform(_ancestor, op);
        newAncestors.push(_p);
      }
      var newParent = newAncestors[newAncestors.length - 1];
      var newIndex = newPath[newPath.length - 1];
      var resultPath = newParent.concat(newIndex);
      return [...oldAncestors, ...newAncestors, resultPath];
    }
    case "remove_node": {
      var {
        path: _path4
      } = op;
      var _ancestors = Path.ancestors(_path4);
      return [..._ancestors];
    }
    case "split_node": {
      var {
        path: _path5
      } = op;
      var _levels = Path.levels(_path5);
      var nextPath = Path.next(_path5);
      return [..._levels, nextPath];
    }
    default: {
      return [];
    }
  }
};
var getFragment = (editor) => {
  var {
    selection
  } = editor;
  if (selection) {
    return Node.fragment(editor, selection);
  }
  return [];
};
var normalizeNode = (editor, entry) => {
  var [node3, path3] = entry;
  if (Text.isText(node3)) {
    return;
  }
  if (Element2.isElement(node3) && node3.children.length === 0) {
    var child = {
      text: ""
    };
    Transforms.insertNodes(editor, child, {
      at: path3.concat(0),
      voids: true
    });
    return;
  }
  var shouldHaveInlines = Editor.isEditor(node3) ? false : Element2.isElement(node3) && (editor.isInline(node3) || node3.children.length === 0 || Text.isText(node3.children[0]) || editor.isInline(node3.children[0]));
  var n3 = 0;
  for (var i2 = 0; i2 < node3.children.length; i2++, n3++) {
    var currentNode = Node.get(editor, path3);
    if (Text.isText(currentNode))
      continue;
    var _child = currentNode.children[n3];
    var prev = currentNode.children[n3 - 1];
    var isLast = i2 === node3.children.length - 1;
    var isInlineOrText = Text.isText(_child) || Element2.isElement(_child) && editor.isInline(_child);
    if (isInlineOrText !== shouldHaveInlines) {
      Transforms.removeNodes(editor, {
        at: path3.concat(n3),
        voids: true
      });
      n3--;
    } else if (Element2.isElement(_child)) {
      if (editor.isInline(_child)) {
        if (prev == null || !Text.isText(prev)) {
          var newChild = {
            text: ""
          };
          Transforms.insertNodes(editor, newChild, {
            at: path3.concat(n3),
            voids: true
          });
          n3++;
        } else if (isLast) {
          var _newChild = {
            text: ""
          };
          Transforms.insertNodes(editor, _newChild, {
            at: path3.concat(n3 + 1),
            voids: true
          });
          n3++;
        }
      }
    } else {
      if (prev != null && Text.isText(prev)) {
        if (Text.equals(_child, prev, {
          loose: true
        })) {
          Transforms.mergeNodes(editor, {
            at: path3.concat(n3),
            voids: true
          });
          n3--;
        } else if (prev.text === "") {
          Transforms.removeNodes(editor, {
            at: path3.concat(n3 - 1),
            voids: true
          });
          n3--;
        } else if (_child.text === "") {
          Transforms.removeNodes(editor, {
            at: path3.concat(n3),
            voids: true
          });
          n3--;
        }
      }
    }
  }
};
var shouldNormalize = (editor, _ref) => {
  var {
    iteration,
    initialDirtyPathsLength
  } = _ref;
  var maxIterations = initialDirtyPathsLength * 42;
  if (iteration > maxIterations) {
    throw new Error("Could not completely normalize the editor after ".concat(maxIterations, " iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));
  }
  return true;
};
var above = function above2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    voids = false,
    mode = "lowest",
    at = editor.selection,
    match
  } = options;
  if (!at) {
    return;
  }
  var path3 = Editor.path(editor, at);
  var reverse = mode === "lowest";
  for (var [n3, p] of Editor.levels(editor, {
    at: path3,
    voids,
    match,
    reverse
  })) {
    if (Text.isText(n3))
      continue;
    if (Range.isRange(at)) {
      if (Path.isAncestor(p, at.anchor.path) && Path.isAncestor(p, at.focus.path)) {
        return [n3, p];
      }
    } else {
      if (!Path.equals(path3, p)) {
        return [n3, p];
      }
    }
  }
};
function ownKeys$8(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$8(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$8(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$8(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var addMark = (editor, key, value) => {
  var {
    selection
  } = editor;
  if (selection) {
    var match = (node3, path3) => {
      if (!Text.isText(node3)) {
        return false;
      }
      var [parentNode2, parentPath] = Editor.parent(editor, path3);
      return !editor.isVoid(parentNode2) || editor.markableVoid(parentNode2);
    };
    var expandedSelection = Range.isExpanded(selection);
    var markAcceptingVoidSelected = false;
    if (!expandedSelection) {
      var [selectedNode, selectedPath] = Editor.node(editor, selection);
      if (selectedNode && match(selectedNode, selectedPath)) {
        var [parentNode] = Editor.parent(editor, selectedPath);
        markAcceptingVoidSelected = parentNode && editor.markableVoid(parentNode);
      }
    }
    if (expandedSelection || markAcceptingVoidSelected) {
      Transforms.setNodes(editor, {
        [key]: value
      }, {
        match,
        split: true,
        voids: true
      });
    } else {
      var marks3 = _objectSpread$8(_objectSpread$8({}, Editor.marks(editor) || {}), {}, {
        [key]: value
      });
      editor.marks = marks3;
      if (!FLUSHING.get(editor)) {
        editor.onChange();
      }
    }
  }
};
function ownKeys$7(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$7(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$7(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$7(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var after = function after2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var anchor = Editor.point(editor, at, {
    edge: "end"
  });
  var focus = Editor.end(editor, []);
  var range2 = {
    anchor,
    focus
  };
  var {
    distance = 1
  } = options;
  var d = 0;
  var target;
  for (var p of Editor.positions(editor, _objectSpread$7(_objectSpread$7({}, options), {}, {
    at: range2
  }))) {
    if (d > distance) {
      break;
    }
    if (d !== 0) {
      target = p;
    }
    d++;
  }
  return target;
};
function ownKeys$6(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$6(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$6(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$6(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var before = function before2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var anchor = Editor.start(editor, []);
  var focus = Editor.point(editor, at, {
    edge: "start"
  });
  var range2 = {
    anchor,
    focus
  };
  var {
    distance = 1
  } = options;
  var d = 0;
  var target;
  for (var p of Editor.positions(editor, _objectSpread$6(_objectSpread$6({}, options), {}, {
    at: range2,
    reverse: true
  }))) {
    if (d > distance) {
      break;
    }
    if (d !== 0) {
      target = p;
    }
    d++;
  }
  return target;
};
var deleteBackward = (editor, unit) => {
  var {
    selection
  } = editor;
  if (selection && Range.isCollapsed(selection)) {
    Transforms.delete(editor, {
      unit,
      reverse: true
    });
  }
};
var deleteForward = (editor, unit) => {
  var {
    selection
  } = editor;
  if (selection && Range.isCollapsed(selection)) {
    Transforms.delete(editor, {
      unit
    });
  }
};
var deleteFragment = function deleteFragment2(editor) {
  var {
    direction = "forward"
  } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    selection
  } = editor;
  if (selection && Range.isExpanded(selection)) {
    Transforms.delete(editor, {
      reverse: direction === "backward"
    });
  }
};
var edges = (editor, at) => {
  return [Editor.start(editor, at), Editor.end(editor, at)];
};
function ownKeys$5(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$5(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$5(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$5(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var elementReadOnly = function elementReadOnly2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return Editor.above(editor, _objectSpread$5(_objectSpread$5({}, options), {}, {
    match: (n3) => Element2.isElement(n3) && Editor.isElementReadOnly(editor, n3)
  }));
};
var end = (editor, at) => {
  return Editor.point(editor, at, {
    edge: "end"
  });
};
var first = (editor, at) => {
  var path3 = Editor.path(editor, at, {
    edge: "start"
  });
  return Editor.node(editor, path3);
};
var fragment = (editor, at) => {
  var range2 = Editor.range(editor, at);
  return Node.fragment(editor, range2);
};
function ownKeys$4(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$4(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$4(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$4(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var getVoid = function getVoid2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return Editor.above(editor, _objectSpread$4(_objectSpread$4({}, options), {}, {
    match: (n3) => Element2.isElement(n3) && Editor.isVoid(editor, n3)
  }));
};
var hasBlocks = (editor, element) => {
  return element.children.some((n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3));
};
var hasInlines = (editor, element) => {
  return element.children.some((n3) => Text.isText(n3) || Editor.isInline(editor, n3));
};
var hasPath = (editor, path3) => {
  return Node.has(editor, path3);
};
var hasTexts = (editor, element) => {
  return element.children.every((n3) => Text.isText(n3));
};
var insertBreak = (editor) => {
  Transforms.splitNodes(editor, {
    always: true
  });
};
var insertNode = (editor, node3, options) => {
  Transforms.insertNodes(editor, node3, options);
};
var insertSoftBreak = (editor) => {
  Transforms.splitNodes(editor, {
    always: true
  });
};
function ownKeys$3(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$3(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$3(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$3(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var insertText = function insertText2(editor, text) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    selection,
    marks: marks3
  } = editor;
  if (selection) {
    if (marks3) {
      var node3 = _objectSpread$3({
        text
      }, marks3);
      Transforms.insertNodes(editor, node3, {
        at: options.at,
        voids: options.voids
      });
    } else {
      Transforms.insertText(editor, text, options);
    }
    editor.marks = null;
  }
};
var isBlock2 = (editor, value) => {
  return !editor.isInline(value);
};
var isEdge = (editor, point3, at) => {
  return Editor.isStart(editor, point3, at) || Editor.isEnd(editor, point3, at);
};
var isEmpty = (editor, element) => {
  var {
    children
  } = element;
  var [first2] = children;
  return children.length === 0 || children.length === 1 && Text.isText(first2) && first2.text === "" && !editor.isVoid(element);
};
var isEnd = (editor, point3, at) => {
  var end2 = Editor.end(editor, at);
  return Point.equals(point3, end2);
};
var isNormalizing = (editor) => {
  var isNormalizing2 = NORMALIZING.get(editor);
  return isNormalizing2 === void 0 ? true : isNormalizing2;
};
var isStart = (editor, point3, at) => {
  if (point3.offset !== 0) {
    return false;
  }
  var start2 = Editor.start(editor, at);
  return Point.equals(point3, start2);
};
var last = (editor, at) => {
  var path3 = Editor.path(editor, at, {
    edge: "end"
  });
  return Editor.node(editor, path3);
};
var leaf = function leaf2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var path3 = Editor.path(editor, at, options);
  var node3 = Node.leaf(editor, path3);
  return [node3, path3];
};
function levels(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return function* () {
    var {
      at = editor.selection,
      reverse = false,
      voids = false
    } = options;
    var {
      match
    } = options;
    if (match == null) {
      match = () => true;
    }
    if (!at) {
      return;
    }
    var levels2 = [];
    var path3 = Editor.path(editor, at);
    for (var [n3, p] of Node.levels(editor, path3)) {
      if (!match(n3, p)) {
        continue;
      }
      levels2.push([n3, p]);
      if (!voids && Element2.isElement(n3) && Editor.isVoid(editor, n3)) {
        break;
      }
    }
    if (reverse) {
      levels2.reverse();
    }
    yield* __yieldStar(levels2);
  }();
}
var _excluded$1 = ["text"];
var _excluded2$1 = ["text"];
var marks = function marks2(editor) {
  var {
    marks: marks3,
    selection
  } = editor;
  if (!selection) {
    return null;
  }
  var {
    anchor,
    focus
  } = selection;
  if (marks3) {
    return marks3;
  }
  if (Range.isExpanded(selection)) {
    var isEnd2 = Editor.isEnd(editor, anchor, anchor.path);
    if (isEnd2) {
      var after3 = Editor.after(editor, anchor);
      if (after3) {
        anchor = after3;
      }
    }
    var [match] = Editor.nodes(editor, {
      match: Text.isText,
      at: {
        anchor,
        focus
      }
    });
    if (match) {
      var [_node] = match;
      var _rest = _objectWithoutProperties(_node, _excluded$1);
      return _rest;
    } else {
      return {};
    }
  }
  var {
    path: path3
  } = anchor;
  var [node3] = Editor.leaf(editor, path3);
  if (anchor.offset === 0) {
    var prev = Editor.previous(editor, {
      at: path3,
      match: Text.isText
    });
    var markedVoid = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isVoid(editor, n3) && editor.markableVoid(n3)
    });
    if (!markedVoid) {
      var block = Editor.above(editor, {
        match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3)
      });
      if (prev && block) {
        var [prevNode, prevPath] = prev;
        var [, blockPath] = block;
        if (Path.isAncestor(blockPath, prevPath)) {
          node3 = prevNode;
        }
      }
    }
  }
  var rest = _objectWithoutProperties(node3, _excluded2$1);
  return rest;
};
var next = function next2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    mode = "lowest",
    voids = false
  } = options;
  var {
    match,
    at = editor.selection
  } = options;
  if (!at) {
    return;
  }
  var pointAfterLocation = Editor.after(editor, at, {
    voids
  });
  if (!pointAfterLocation)
    return;
  var [, to] = Editor.last(editor, []);
  var span = [pointAfterLocation.path, to];
  if (Path.isPath(at) && at.length === 0) {
    throw new Error("Cannot get the next node from the root node!");
  }
  if (match == null) {
    if (Path.isPath(at)) {
      var [parent3] = Editor.parent(editor, at);
      match = (n3) => parent3.children.includes(n3);
    } else {
      match = () => true;
    }
  }
  var [next3] = Editor.nodes(editor, {
    at: span,
    match,
    mode,
    voids
  });
  return next3;
};
var node = function node2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var path3 = Editor.path(editor, at, options);
  var node3 = Node.get(editor, path3);
  return [node3, path3];
};
function nodes(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return function* () {
    var {
      at = editor.selection,
      mode = "all",
      universal = false,
      reverse = false,
      voids = false,
      ignoreNonSelectable = false
    } = options;
    var {
      match
    } = options;
    if (!match) {
      match = () => true;
    }
    if (!at) {
      return;
    }
    var from;
    var to;
    if (Span.isSpan(at)) {
      from = at[0];
      to = at[1];
    } else {
      var first2 = Editor.path(editor, at, {
        edge: "start"
      });
      var last2 = Editor.path(editor, at, {
        edge: "end"
      });
      from = reverse ? last2 : first2;
      to = reverse ? first2 : last2;
    }
    var nodeEntries = Node.nodes(editor, {
      reverse,
      from,
      to,
      pass: (_ref) => {
        var [node4] = _ref;
        if (!Element2.isElement(node4))
          return false;
        if (!voids && (Editor.isVoid(editor, node4) || Editor.isElementReadOnly(editor, node4)))
          return true;
        if (ignoreNonSelectable && !Editor.isSelectable(editor, node4))
          return true;
        return false;
      }
    });
    var matches = [];
    var hit;
    for (var [node3, path3] of nodeEntries) {
      if (ignoreNonSelectable && Element2.isElement(node3) && !Editor.isSelectable(editor, node3)) {
        continue;
      }
      var isLower = hit && Path.compare(path3, hit[1]) === 0;
      if (mode === "highest" && isLower) {
        continue;
      }
      if (!match(node3, path3)) {
        if (universal && !isLower && Text.isText(node3)) {
          return;
        } else {
          continue;
        }
      }
      if (mode === "lowest" && isLower) {
        hit = [node3, path3];
        continue;
      }
      var emit = mode === "lowest" ? hit : [node3, path3];
      if (emit) {
        if (universal) {
          matches.push(emit);
        } else {
          yield emit;
        }
      }
      hit = [node3, path3];
    }
    if (mode === "lowest" && hit) {
      if (universal) {
        matches.push(hit);
      } else {
        yield hit;
      }
    }
    if (universal) {
      yield* __yieldStar(matches);
    }
  }();
}
var normalize = function normalize2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    force = false,
    operation
  } = options;
  var getDirtyPaths2 = (editor2) => {
    return DIRTY_PATHS.get(editor2) || [];
  };
  var getDirtyPathKeys = (editor2) => {
    return DIRTY_PATH_KEYS.get(editor2) || /* @__PURE__ */ new Set();
  };
  var popDirtyPath = (editor2) => {
    var path3 = getDirtyPaths2(editor2).pop();
    var key = path3.join(",");
    getDirtyPathKeys(editor2).delete(key);
    return path3;
  };
  if (!Editor.isNormalizing(editor)) {
    return;
  }
  if (force) {
    var allPaths = Array.from(Node.nodes(editor), (_ref) => {
      var [, p] = _ref;
      return p;
    });
    var allPathKeys = new Set(allPaths.map((p) => p.join(",")));
    DIRTY_PATHS.set(editor, allPaths);
    DIRTY_PATH_KEYS.set(editor, allPathKeys);
  }
  if (getDirtyPaths2(editor).length === 0) {
    return;
  }
  Editor.withoutNormalizing(editor, () => {
    for (var dirtyPath of getDirtyPaths2(editor)) {
      if (Node.has(editor, dirtyPath)) {
        var entry = Editor.node(editor, dirtyPath);
        var [node3, _] = entry;
        if (Element2.isElement(node3) && node3.children.length === 0) {
          editor.normalizeNode(entry, {
            operation
          });
        }
      }
    }
    var dirtyPaths = getDirtyPaths2(editor);
    var initialDirtyPathsLength = dirtyPaths.length;
    var iteration = 0;
    while (dirtyPaths.length !== 0) {
      if (!editor.shouldNormalize({
        dirtyPaths,
        iteration,
        initialDirtyPathsLength,
        operation
      })) {
        return;
      }
      var _dirtyPath = popDirtyPath(editor);
      if (Node.has(editor, _dirtyPath)) {
        var _entry = Editor.node(editor, _dirtyPath);
        editor.normalizeNode(_entry, {
          operation
        });
      }
      iteration++;
      dirtyPaths = getDirtyPaths2(editor);
    }
  });
};
var parent = function parent2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var path3 = Editor.path(editor, at, options);
  var parentPath = Path.parent(path3);
  var entry = Editor.node(editor, parentPath);
  return entry;
};
var pathRef = function pathRef2(editor, path3) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    affinity = "forward"
  } = options;
  var ref = {
    current: path3,
    affinity,
    unref() {
      var {
        current: current2
      } = ref;
      var pathRefs2 = Editor.pathRefs(editor);
      pathRefs2.delete(ref);
      ref.current = null;
      return current2;
    }
  };
  var refs = Editor.pathRefs(editor);
  refs.add(ref);
  return ref;
};
var pathRefs = (editor) => {
  var refs = PATH_REFS.get(editor);
  if (!refs) {
    refs = /* @__PURE__ */ new Set();
    PATH_REFS.set(editor, refs);
  }
  return refs;
};
var path = function path2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    depth,
    edge
  } = options;
  if (Path.isPath(at)) {
    if (edge === "start") {
      var [, firstPath] = Node.first(editor, at);
      at = firstPath;
    } else if (edge === "end") {
      var [, lastPath] = Node.last(editor, at);
      at = lastPath;
    }
  }
  if (Range.isRange(at)) {
    if (edge === "start") {
      at = Range.start(at);
    } else if (edge === "end") {
      at = Range.end(at);
    } else {
      at = Path.common(at.anchor.path, at.focus.path);
    }
  }
  if (Point.isPoint(at)) {
    at = at.path;
  }
  if (depth != null) {
    at = at.slice(0, depth);
  }
  return at;
};
var pointRef = function pointRef2(editor, point3) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    affinity = "forward"
  } = options;
  var ref = {
    current: point3,
    affinity,
    unref() {
      var {
        current: current2
      } = ref;
      var pointRefs2 = Editor.pointRefs(editor);
      pointRefs2.delete(ref);
      ref.current = null;
      return current2;
    }
  };
  var refs = Editor.pointRefs(editor);
  refs.add(ref);
  return ref;
};
var pointRefs = (editor) => {
  var refs = POINT_REFS.get(editor);
  if (!refs) {
    refs = /* @__PURE__ */ new Set();
    POINT_REFS.set(editor, refs);
  }
  return refs;
};
var point = function point2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    edge = "start"
  } = options;
  if (Path.isPath(at)) {
    var path3;
    if (edge === "end") {
      var [, lastPath] = Node.last(editor, at);
      path3 = lastPath;
    } else {
      var [, firstPath] = Node.first(editor, at);
      path3 = firstPath;
    }
    var node3 = Node.get(editor, path3);
    if (!Text.isText(node3)) {
      throw new Error("Cannot get the ".concat(edge, " point in the node at path [").concat(at, "] because it has no ").concat(edge, " text node."));
    }
    return {
      path: path3,
      offset: edge === "end" ? node3.text.length : 0
    };
  }
  if (Range.isRange(at)) {
    var [start2, end2] = Range.edges(at);
    return edge === "start" ? start2 : end2;
  }
  return at;
};
function positions(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return function* () {
    var {
      at = editor.selection,
      unit = "offset",
      reverse = false,
      voids = false,
      ignoreNonSelectable = false
    } = options;
    if (!at) {
      return;
    }
    var range2 = Editor.range(editor, at);
    var [start2, end2] = Range.edges(range2);
    var first2 = reverse ? end2 : start2;
    var isNewBlock = false;
    var blockText = "";
    var distance = 0;
    var leafTextRemaining = 0;
    var leafTextOffset = 0;
    for (var [node3, path3] of Editor.nodes(editor, {
      at,
      reverse,
      voids,
      ignoreNonSelectable
    })) {
      if (Element2.isElement(node3)) {
        if (!voids && (editor.isVoid(node3) || editor.isElementReadOnly(node3))) {
          yield Editor.start(editor, path3);
          continue;
        }
        if (editor.isInline(node3))
          continue;
        if (Editor.hasInlines(editor, node3)) {
          var e2 = Path.isAncestor(path3, end2.path) ? end2 : Editor.end(editor, path3);
          var s = Path.isAncestor(path3, start2.path) ? start2 : Editor.start(editor, path3);
          blockText = Editor.string(editor, {
            anchor: s,
            focus: e2
          }, {
            voids
          });
          isNewBlock = true;
        }
      }
      if (Text.isText(node3)) {
        var isFirst = Path.equals(path3, first2.path);
        if (isFirst) {
          leafTextRemaining = reverse ? first2.offset : node3.text.length - first2.offset;
          leafTextOffset = first2.offset;
        } else {
          leafTextRemaining = node3.text.length;
          leafTextOffset = reverse ? leafTextRemaining : 0;
        }
        if (isFirst || isNewBlock || unit === "offset") {
          yield {
            path: path3,
            offset: leafTextOffset
          };
          isNewBlock = false;
        }
        while (true) {
          if (distance === 0) {
            if (blockText === "")
              break;
            distance = calcDistance(blockText, unit, reverse);
            blockText = splitByCharacterDistance(blockText, distance, reverse)[1];
          }
          leafTextOffset = reverse ? leafTextOffset - distance : leafTextOffset + distance;
          leafTextRemaining = leafTextRemaining - distance;
          if (leafTextRemaining < 0) {
            distance = -leafTextRemaining;
            break;
          }
          distance = 0;
          yield {
            path: path3,
            offset: leafTextOffset
          };
        }
      }
    }
    function calcDistance(text, unit2, reverse2) {
      if (unit2 === "character") {
        return getCharacterDistance(text, reverse2);
      } else if (unit2 === "word") {
        return getWordDistance(text, reverse2);
      } else if (unit2 === "line" || unit2 === "block") {
        return text.length;
      }
      return 1;
    }
  }();
}
var previous = function previous2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    mode = "lowest",
    voids = false
  } = options;
  var {
    match,
    at = editor.selection
  } = options;
  if (!at) {
    return;
  }
  var pointBeforeLocation = Editor.before(editor, at, {
    voids
  });
  if (!pointBeforeLocation) {
    return;
  }
  var [, to] = Editor.first(editor, []);
  var span = [pointBeforeLocation.path, to];
  if (Path.isPath(at) && at.length === 0) {
    throw new Error("Cannot get the previous node from the root node!");
  }
  if (match == null) {
    if (Path.isPath(at)) {
      var [parent3] = Editor.parent(editor, at);
      match = (n3) => parent3.children.includes(n3);
    } else {
      match = () => true;
    }
  }
  var [previous3] = Editor.nodes(editor, {
    reverse: true,
    at: span,
    match,
    mode,
    voids
  });
  return previous3;
};
var rangeRef = function rangeRef2(editor, range2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    affinity = "forward"
  } = options;
  var ref = {
    current: range2,
    affinity,
    unref() {
      var {
        current: current2
      } = ref;
      var rangeRefs2 = Editor.rangeRefs(editor);
      rangeRefs2.delete(ref);
      ref.current = null;
      return current2;
    }
  };
  var refs = Editor.rangeRefs(editor);
  refs.add(ref);
  return ref;
};
var rangeRefs = (editor) => {
  var refs = RANGE_REFS.get(editor);
  if (!refs) {
    refs = /* @__PURE__ */ new Set();
    RANGE_REFS.set(editor, refs);
  }
  return refs;
};
var range = (editor, at, to) => {
  if (Range.isRange(at) && !to) {
    return at;
  }
  var start2 = Editor.start(editor, at);
  var end2 = Editor.end(editor, to || at);
  return {
    anchor: start2,
    focus: end2
  };
};
function ownKeys$2(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$2(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$2(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$2(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var removeMark = (editor, key) => {
  var {
    selection
  } = editor;
  if (selection) {
    var match = (node3, path3) => {
      if (!Text.isText(node3)) {
        return false;
      }
      var [parentNode2, parentPath] = Editor.parent(editor, path3);
      return !editor.isVoid(parentNode2) || editor.markableVoid(parentNode2);
    };
    var expandedSelection = Range.isExpanded(selection);
    var markAcceptingVoidSelected = false;
    if (!expandedSelection) {
      var [selectedNode, selectedPath] = Editor.node(editor, selection);
      if (selectedNode && match(selectedNode, selectedPath)) {
        var [parentNode] = Editor.parent(editor, selectedPath);
        markAcceptingVoidSelected = parentNode && editor.markableVoid(parentNode);
      }
    }
    if (expandedSelection || markAcceptingVoidSelected) {
      Transforms.unsetNodes(editor, key, {
        match,
        split: true,
        voids: true
      });
    } else {
      var marks3 = _objectSpread$2({}, Editor.marks(editor) || {});
      delete marks3[key];
      editor.marks = marks3;
      if (!FLUSHING.get(editor)) {
        editor.onChange();
      }
    }
  }
};
var setNormalizing = (editor, isNormalizing2) => {
  NORMALIZING.set(editor, isNormalizing2);
};
var start = (editor, at) => {
  return Editor.point(editor, at, {
    edge: "start"
  });
};
var string = function string2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    voids = false
  } = options;
  var range2 = Editor.range(editor, at);
  var [start2, end2] = Range.edges(range2);
  var text = "";
  for (var [node3, path3] of Editor.nodes(editor, {
    at: range2,
    match: Text.isText,
    voids
  })) {
    var t2 = node3.text;
    if (Path.equals(path3, end2.path)) {
      t2 = t2.slice(0, end2.offset);
    }
    if (Path.equals(path3, start2.path)) {
      t2 = t2.slice(start2.offset);
    }
    text += t2;
  }
  return text;
};
var unhangRange = function unhangRange2(editor, range2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    voids = false
  } = options;
  var [start2, end2] = Range.edges(range2);
  if (start2.offset !== 0 || end2.offset !== 0 || Range.isCollapsed(range2) || Path.hasPrevious(end2.path)) {
    return range2;
  }
  var endBlock = Editor.above(editor, {
    at: end2,
    match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
    voids
  });
  var blockPath = endBlock ? endBlock[1] : [];
  var first2 = Editor.start(editor, start2);
  var before3 = {
    anchor: first2,
    focus: end2
  };
  var skip = true;
  for (var [node3, path3] of Editor.nodes(editor, {
    at: before3,
    match: Text.isText,
    reverse: true,
    voids
  })) {
    if (skip) {
      skip = false;
      continue;
    }
    if (node3.text !== "" || Path.isBefore(path3, blockPath)) {
      end2 = {
        path: path3,
        offset: node3.text.length
      };
      break;
    }
  }
  return {
    anchor: start2,
    focus: end2
  };
};
var withoutNormalizing = (editor, fn) => {
  var value = Editor.isNormalizing(editor);
  Editor.setNormalizing(editor, false);
  try {
    fn();
  } finally {
    Editor.setNormalizing(editor, value);
  }
  Editor.normalize(editor);
};
var deleteText = function deleteText2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var _Editor$void, _Editor$void2;
    var {
      reverse = false,
      unit = "character",
      distance = 1,
      voids = false
    } = options;
    var {
      at = editor.selection,
      hanging = false
    } = options;
    if (!at) {
      return;
    }
    var isCollapsed = false;
    if (Range.isRange(at) && Range.isCollapsed(at)) {
      isCollapsed = true;
      at = at.anchor;
    }
    if (Point.isPoint(at)) {
      var furthestVoid = Editor.void(editor, {
        at,
        mode: "highest"
      });
      if (!voids && furthestVoid) {
        var [, voidPath] = furthestVoid;
        at = voidPath;
      } else {
        var opts = {
          unit,
          distance
        };
        var target = reverse ? Editor.before(editor, at, opts) || Editor.start(editor, []) : Editor.after(editor, at, opts) || Editor.end(editor, []);
        at = {
          anchor: at,
          focus: target
        };
        hanging = true;
      }
    }
    if (Path.isPath(at)) {
      Transforms.removeNodes(editor, {
        at,
        voids
      });
      return;
    }
    if (Range.isCollapsed(at)) {
      return;
    }
    if (!hanging) {
      var [, _end] = Range.edges(at);
      var endOfDoc = Editor.end(editor, []);
      if (!Point.equals(_end, endOfDoc)) {
        at = Editor.unhangRange(editor, at, {
          voids
        });
      }
    }
    var [start2, end2] = Range.edges(at);
    var startBlock = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      at: start2,
      voids
    });
    var endBlock = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      at: end2,
      voids
    });
    var isAcrossBlocks = startBlock && endBlock && !Path.equals(startBlock[1], endBlock[1]);
    var isSingleText = Path.equals(start2.path, end2.path);
    var startNonEditable = voids ? null : (_Editor$void = Editor.void(editor, {
      at: start2,
      mode: "highest"
    })) !== null && _Editor$void !== void 0 ? _Editor$void : Editor.elementReadOnly(editor, {
      at: start2,
      mode: "highest"
    });
    var endNonEditable = voids ? null : (_Editor$void2 = Editor.void(editor, {
      at: end2,
      mode: "highest"
    })) !== null && _Editor$void2 !== void 0 ? _Editor$void2 : Editor.elementReadOnly(editor, {
      at: end2,
      mode: "highest"
    });
    if (startNonEditable) {
      var before3 = Editor.before(editor, start2);
      if (before3 && startBlock && Path.isAncestor(startBlock[1], before3.path)) {
        start2 = before3;
      }
    }
    if (endNonEditable) {
      var after3 = Editor.after(editor, end2);
      if (after3 && endBlock && Path.isAncestor(endBlock[1], after3.path)) {
        end2 = after3;
      }
    }
    var matches = [];
    var lastPath;
    for (var entry of Editor.nodes(editor, {
      at,
      voids
    })) {
      var [node3, path3] = entry;
      if (lastPath && Path.compare(path3, lastPath) === 0) {
        continue;
      }
      if (!voids && Element2.isElement(node3) && (Editor.isVoid(editor, node3) || Editor.isElementReadOnly(editor, node3)) || !Path.isCommon(path3, start2.path) && !Path.isCommon(path3, end2.path)) {
        matches.push(entry);
        lastPath = path3;
      }
    }
    var pathRefs2 = Array.from(matches, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    var startRef = Editor.pointRef(editor, start2);
    var endRef = Editor.pointRef(editor, end2);
    var removedText = "";
    if (!isSingleText && !startNonEditable) {
      var _point = startRef.current;
      var [_node] = Editor.leaf(editor, _point);
      var {
        path: _path
      } = _point;
      var {
        offset
      } = start2;
      var text = _node.text.slice(offset);
      if (text.length > 0) {
        editor.apply({
          type: "remove_text",
          path: _path,
          offset,
          text
        });
        removedText = text;
      }
    }
    pathRefs2.reverse().map((r2) => r2.unref()).filter((r2) => r2 !== null).forEach((p) => Transforms.removeNodes(editor, {
      at: p,
      voids
    }));
    if (!endNonEditable) {
      var _point2 = endRef.current;
      var [_node2] = Editor.leaf(editor, _point2);
      var {
        path: _path2
      } = _point2;
      var _offset = isSingleText ? start2.offset : 0;
      var _text = _node2.text.slice(_offset, end2.offset);
      if (_text.length > 0) {
        editor.apply({
          type: "remove_text",
          path: _path2,
          offset: _offset,
          text: _text
        });
        removedText = _text;
      }
    }
    if (!isSingleText && isAcrossBlocks && endRef.current && startRef.current) {
      Transforms.mergeNodes(editor, {
        at: endRef.current,
        hanging: true,
        voids
      });
    }
    if (isCollapsed && reverse && unit === "character" && removedText.length > 1 && removedText.match(/[\u0E00-\u0E7F]+/)) {
      Transforms.insertText(editor, removedText.slice(0, removedText.length - distance));
    }
    var startUnref = startRef.unref();
    var endUnref = endRef.unref();
    var point3 = reverse ? startUnref || endUnref : endUnref || startUnref;
    if (options.at == null && point3) {
      Transforms.select(editor, point3);
    }
  });
};
var insertFragment = function insertFragment2(editor, fragment2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      hanging = false,
      voids = false
    } = options;
    var {
      at = getDefaultInsertLocation(editor)
    } = options;
    if (!fragment2.length) {
      return;
    }
    if (Range.isRange(at)) {
      if (!hanging) {
        at = Editor.unhangRange(editor, at, {
          voids
        });
      }
      if (Range.isCollapsed(at)) {
        at = at.anchor;
      } else {
        var [, end2] = Range.edges(at);
        if (!voids && Editor.void(editor, {
          at: end2
        })) {
          return;
        }
        var pointRef3 = Editor.pointRef(editor, end2);
        Transforms.delete(editor, {
          at
        });
        at = pointRef3.unref();
      }
    } else if (Path.isPath(at)) {
      at = Editor.start(editor, at);
    }
    if (!voids && Editor.void(editor, {
      at
    })) {
      return;
    }
    var inlineElementMatch = Editor.above(editor, {
      at,
      match: (n3) => Element2.isElement(n3) && Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    if (inlineElementMatch) {
      var [, _inlinePath] = inlineElementMatch;
      if (Editor.isEnd(editor, at, _inlinePath)) {
        var after3 = Editor.after(editor, _inlinePath);
        at = after3;
      } else if (Editor.isStart(editor, at, _inlinePath)) {
        var before3 = Editor.before(editor, _inlinePath);
        at = before3;
      }
    }
    var blockMatch = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      at,
      voids
    });
    var [, blockPath] = blockMatch;
    var isBlockStart = Editor.isStart(editor, at, blockPath);
    var isBlockEnd = Editor.isEnd(editor, at, blockPath);
    var isBlockEmpty = isBlockStart && isBlockEnd;
    var mergeStart = !isBlockStart || isBlockStart && isBlockEnd;
    var mergeEnd = !isBlockEnd;
    var [, firstPath] = Node.first({
      children: fragment2
    }, []);
    var [, lastPath] = Node.last({
      children: fragment2
    }, []);
    var matches = [];
    var matcher = (_ref) => {
      var [n3, p] = _ref;
      var isRoot = p.length === 0;
      if (isRoot) {
        return false;
      }
      if (isBlockEmpty) {
        return true;
      }
      if (mergeStart && Path.isAncestor(p, firstPath) && Element2.isElement(n3) && !editor.isVoid(n3) && !editor.isInline(n3)) {
        return false;
      }
      if (mergeEnd && Path.isAncestor(p, lastPath) && Element2.isElement(n3) && !editor.isVoid(n3) && !editor.isInline(n3)) {
        return false;
      }
      return true;
    };
    for (var entry of Node.nodes({
      children: fragment2
    }, {
      pass: matcher
    })) {
      if (matcher(entry)) {
        matches.push(entry);
      }
    }
    var starts = [];
    var middles = [];
    var ends = [];
    var starting = true;
    var hasBlocks2 = false;
    for (var [node3] of matches) {
      if (Element2.isElement(node3) && !editor.isInline(node3)) {
        starting = false;
        hasBlocks2 = true;
        middles.push(node3);
      } else if (starting) {
        starts.push(node3);
      } else {
        ends.push(node3);
      }
    }
    var [inlineMatch] = Editor.nodes(editor, {
      at,
      match: (n3) => Text.isText(n3) || Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    var [, inlinePath] = inlineMatch;
    var isInlineStart = Editor.isStart(editor, at, inlinePath);
    var isInlineEnd = Editor.isEnd(editor, at, inlinePath);
    var middleRef = Editor.pathRef(editor, isBlockEnd && !ends.length ? Path.next(blockPath) : blockPath);
    var endRef = Editor.pathRef(editor, isInlineEnd ? Path.next(inlinePath) : inlinePath);
    Transforms.splitNodes(editor, {
      at,
      match: (n3) => hasBlocks2 ? Element2.isElement(n3) && Editor.isBlock(editor, n3) : Text.isText(n3) || Editor.isInline(editor, n3),
      mode: hasBlocks2 ? "lowest" : "highest",
      always: hasBlocks2 && (!isBlockStart || starts.length > 0) && (!isBlockEnd || ends.length > 0),
      voids
    });
    var startRef = Editor.pathRef(editor, !isInlineStart || isInlineStart && isInlineEnd ? Path.next(inlinePath) : inlinePath);
    Transforms.insertNodes(editor, starts, {
      at: startRef.current,
      match: (n3) => Text.isText(n3) || Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    if (isBlockEmpty && !starts.length && middles.length && !ends.length) {
      Transforms.delete(editor, {
        at: blockPath,
        voids
      });
    }
    Transforms.insertNodes(editor, middles, {
      at: middleRef.current,
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      mode: "lowest",
      voids
    });
    Transforms.insertNodes(editor, ends, {
      at: endRef.current,
      match: (n3) => Text.isText(n3) || Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    if (!options.at) {
      var path3;
      if (ends.length > 0 && endRef.current) {
        path3 = Path.previous(endRef.current);
      } else if (middles.length > 0 && middleRef.current) {
        path3 = Path.previous(middleRef.current);
      } else if (startRef.current) {
        path3 = Path.previous(startRef.current);
      }
      if (path3) {
        var _end = Editor.end(editor, path3);
        Transforms.select(editor, _end);
      }
    }
    startRef.unref();
    middleRef.unref();
    endRef.unref();
  });
};
var collapse = function collapse2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    edge = "anchor"
  } = options;
  var {
    selection
  } = editor;
  if (!selection) {
    return;
  } else if (edge === "anchor") {
    Transforms.select(editor, selection.anchor);
  } else if (edge === "focus") {
    Transforms.select(editor, selection.focus);
  } else if (edge === "start") {
    var [start2] = Range.edges(selection);
    Transforms.select(editor, start2);
  } else if (edge === "end") {
    var [, end2] = Range.edges(selection);
    Transforms.select(editor, end2);
  }
};
var deselect = (editor) => {
  var {
    selection
  } = editor;
  if (selection) {
    editor.apply({
      type: "set_selection",
      properties: selection,
      newProperties: null
    });
  }
};
var move = function move2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    selection
  } = editor;
  var {
    distance = 1,
    unit = "character",
    reverse = false
  } = options;
  var {
    edge = null
  } = options;
  if (!selection) {
    return;
  }
  if (edge === "start") {
    edge = Range.isBackward(selection) ? "focus" : "anchor";
  }
  if (edge === "end") {
    edge = Range.isBackward(selection) ? "anchor" : "focus";
  }
  var {
    anchor,
    focus
  } = selection;
  var opts = {
    distance,
    unit,
    ignoreNonSelectable: true
  };
  var props = {};
  if (edge == null || edge === "anchor") {
    var point3 = reverse ? Editor.before(editor, anchor, opts) : Editor.after(editor, anchor, opts);
    if (point3) {
      props.anchor = point3;
    }
  }
  if (edge == null || edge === "focus") {
    var _point = reverse ? Editor.before(editor, focus, opts) : Editor.after(editor, focus, opts);
    if (_point) {
      props.focus = _point;
    }
  }
  Transforms.setSelection(editor, props);
};
var select = (editor, target) => {
  var {
    selection
  } = editor;
  target = Editor.range(editor, target);
  if (selection) {
    Transforms.setSelection(editor, target);
    return;
  }
  if (!Range.isRange(target)) {
    throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Scrubber.stringify(target)));
  }
  editor.apply({
    type: "set_selection",
    properties: selection,
    newProperties: target
  });
};
function ownKeys$1(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$1(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$1(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$1(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var setPoint = function setPoint2(editor, props) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    selection
  } = editor;
  var {
    edge = "both"
  } = options;
  if (!selection) {
    return;
  }
  if (edge === "start") {
    edge = Range.isBackward(selection) ? "focus" : "anchor";
  }
  if (edge === "end") {
    edge = Range.isBackward(selection) ? "anchor" : "focus";
  }
  var {
    anchor,
    focus
  } = selection;
  var point3 = edge === "anchor" ? anchor : focus;
  Transforms.setSelection(editor, {
    [edge === "anchor" ? "anchor" : "focus"]: _objectSpread$1(_objectSpread$1({}, point3), props)
  });
};
var setSelection = (editor, props) => {
  var {
    selection
  } = editor;
  var oldProps = {};
  var newProps = {};
  if (!selection) {
    return;
  }
  for (var k in props) {
    if (k === "anchor" && props.anchor != null && !Point.equals(props.anchor, selection.anchor) || k === "focus" && props.focus != null && !Point.equals(props.focus, selection.focus) || k !== "anchor" && k !== "focus" && props[k] !== selection[k]) {
      oldProps[k] = selection[k];
      newProps[k] = props[k];
    }
  }
  if (Object.keys(oldProps).length > 0) {
    editor.apply({
      type: "set_selection",
      properties: oldProps,
      newProperties: newProps
    });
  }
};
var insertNodes = function insertNodes2(editor, nodes2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      hanging = false,
      voids = false,
      mode = "lowest"
    } = options;
    var {
      at,
      match,
      select: select2
    } = options;
    if (Node.isNode(nodes2)) {
      nodes2 = [nodes2];
    }
    if (nodes2.length === 0) {
      return;
    }
    var [node3] = nodes2;
    if (!at) {
      at = getDefaultInsertLocation(editor);
      if (select2 !== false) {
        select2 = true;
      }
    }
    if (select2 == null) {
      select2 = false;
    }
    if (Range.isRange(at)) {
      if (!hanging) {
        at = Editor.unhangRange(editor, at, {
          voids
        });
      }
      if (Range.isCollapsed(at)) {
        at = at.anchor;
      } else {
        var [, end2] = Range.edges(at);
        var pointRef3 = Editor.pointRef(editor, end2);
        Transforms.delete(editor, {
          at
        });
        at = pointRef3.unref();
      }
    }
    if (Point.isPoint(at)) {
      if (match == null) {
        if (Text.isText(node3)) {
          match = (n3) => Text.isText(n3);
        } else if (editor.isInline(node3)) {
          match = (n3) => Text.isText(n3) || Editor.isInline(editor, n3);
        } else {
          match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
        }
      }
      var [entry] = Editor.nodes(editor, {
        at: at.path,
        match,
        mode,
        voids
      });
      if (entry) {
        var [, matchPath2] = entry;
        var pathRef3 = Editor.pathRef(editor, matchPath2);
        var isAtEnd = Editor.isEnd(editor, at, matchPath2);
        Transforms.splitNodes(editor, {
          at,
          match,
          mode,
          voids
        });
        var path3 = pathRef3.unref();
        at = isAtEnd ? Path.next(path3) : path3;
      } else {
        return;
      }
    }
    var parentPath = Path.parent(at);
    var index = at[at.length - 1];
    if (!voids && Editor.void(editor, {
      at: parentPath
    })) {
      return;
    }
    for (var _node of nodes2) {
      var _path = parentPath.concat(index);
      index++;
      editor.apply({
        type: "insert_node",
        path: _path,
        node: _node
      });
      at = Path.next(at);
    }
    at = Path.previous(at);
    if (select2) {
      var point3 = Editor.end(editor, at);
      if (point3) {
        Transforms.select(editor, point3);
      }
    }
  });
};
var liftNodes = function liftNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      at = editor.selection,
      mode = "lowest",
      voids = false
    } = options;
    var {
      match
    } = options;
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (!at) {
      return;
    }
    var matches = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(matches, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    for (var pathRef3 of pathRefs2) {
      var path3 = pathRef3.unref();
      if (path3.length < 2) {
        throw new Error("Cannot lift node at a path [".concat(path3, "] because it has a depth of less than `2`."));
      }
      var parentNodeEntry = Editor.node(editor, Path.parent(path3));
      var [parent3, parentPath] = parentNodeEntry;
      var index = path3[path3.length - 1];
      var {
        length
      } = parent3.children;
      if (length === 1) {
        var toPath = Path.next(parentPath);
        Transforms.moveNodes(editor, {
          at: path3,
          to: toPath,
          voids
        });
        Transforms.removeNodes(editor, {
          at: parentPath,
          voids
        });
      } else if (index === 0) {
        Transforms.moveNodes(editor, {
          at: path3,
          to: parentPath,
          voids
        });
      } else if (index === length - 1) {
        var _toPath = Path.next(parentPath);
        Transforms.moveNodes(editor, {
          at: path3,
          to: _toPath,
          voids
        });
      } else {
        var splitPath = Path.next(path3);
        var _toPath2 = Path.next(parentPath);
        Transforms.splitNodes(editor, {
          at: splitPath,
          voids
        });
        Transforms.moveNodes(editor, {
          at: path3,
          to: _toPath2,
          voids
        });
      }
    }
  });
};
var _excluded = ["text"];
var _excluded2 = ["children"];
var hasSingleChildNest = (editor, node3) => {
  if (Element2.isElement(node3)) {
    var element = node3;
    if (Editor.isVoid(editor, node3)) {
      return true;
    } else if (element.children.length === 1) {
      return hasSingleChildNest(editor, element.children[0]);
    } else {
      return false;
    }
  } else if (Editor.isEditor(node3)) {
    return false;
  } else {
    return true;
  }
};
var mergeNodes = function mergeNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      match,
      at = editor.selection
    } = options;
    var {
      hanging = false,
      voids = false,
      mode = "lowest"
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      if (Path.isPath(at)) {
        var [parent3] = Editor.parent(editor, at);
        match = (n3) => parent3.children.includes(n3);
      } else {
        match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
      }
    }
    if (!hanging && Range.isRange(at)) {
      at = Editor.unhangRange(editor, at, {
        voids
      });
    }
    if (Range.isRange(at)) {
      if (Range.isCollapsed(at)) {
        at = at.anchor;
      } else {
        var [, end2] = Range.edges(at);
        var pointRef3 = Editor.pointRef(editor, end2);
        Transforms.delete(editor, {
          at
        });
        at = pointRef3.unref();
        if (options.at == null) {
          Transforms.select(editor, at);
        }
      }
    }
    var [current2] = Editor.nodes(editor, {
      at,
      match,
      voids,
      mode
    });
    var prev = Editor.previous(editor, {
      at,
      match,
      voids,
      mode
    });
    if (!current2 || !prev) {
      return;
    }
    var [node3, path3] = current2;
    var [prevNode, prevPath] = prev;
    if (path3.length === 0 || prevPath.length === 0) {
      return;
    }
    var newPath = Path.next(prevPath);
    var commonPath = Path.common(path3, prevPath);
    var isPreviousSibling = Path.isSibling(path3, prevPath);
    var levels2 = Array.from(Editor.levels(editor, {
      at: path3
    }), (_ref) => {
      var [n3] = _ref;
      return n3;
    }).slice(commonPath.length).slice(0, -1);
    var emptyAncestor = Editor.above(editor, {
      at: path3,
      mode: "highest",
      match: (n3) => levels2.includes(n3) && hasSingleChildNest(editor, n3)
    });
    var emptyRef = emptyAncestor && Editor.pathRef(editor, emptyAncestor[1]);
    var properties;
    var position;
    if (Text.isText(node3) && Text.isText(prevNode)) {
      var rest = _objectWithoutProperties(node3, _excluded);
      position = prevNode.text.length;
      properties = rest;
    } else if (Element2.isElement(node3) && Element2.isElement(prevNode)) {
      var rest = _objectWithoutProperties(node3, _excluded2);
      position = prevNode.children.length;
      properties = rest;
    } else {
      throw new Error("Cannot merge the node at path [".concat(path3, "] with the previous sibling because it is not the same kind: ").concat(Scrubber.stringify(node3), " ").concat(Scrubber.stringify(prevNode)));
    }
    if (!isPreviousSibling) {
      Transforms.moveNodes(editor, {
        at: path3,
        to: newPath,
        voids
      });
    }
    if (emptyRef) {
      Transforms.removeNodes(editor, {
        at: emptyRef.current,
        voids
      });
    }
    if (Element2.isElement(prevNode) && Editor.isEmpty(editor, prevNode) || Text.isText(prevNode) && prevNode.text === "" && prevPath[prevPath.length - 1] !== 0) {
      Transforms.removeNodes(editor, {
        at: prevPath,
        voids
      });
    } else {
      editor.apply({
        type: "merge_node",
        path: newPath,
        position,
        properties
      });
    }
    if (emptyRef) {
      emptyRef.unref();
    }
  });
};
var moveNodes = (editor, options) => {
  Editor.withoutNormalizing(editor, () => {
    var {
      to,
      at = editor.selection,
      mode = "lowest",
      voids = false
    } = options;
    var {
      match
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    var toRef = Editor.pathRef(editor, to);
    var targets = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(targets, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    for (var pathRef3 of pathRefs2) {
      var path3 = pathRef3.unref();
      var newPath = toRef.current;
      if (path3.length !== 0) {
        editor.apply({
          type: "move_node",
          path: path3,
          newPath
        });
      }
      if (toRef.current && Path.isSibling(newPath, path3) && Path.isAfter(newPath, path3)) {
        toRef.current = Path.next(toRef.current);
      }
    }
    toRef.unref();
  });
};
var removeNodes = function removeNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      hanging = false,
      voids = false,
      mode = "lowest"
    } = options;
    var {
      at = editor.selection,
      match
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (!hanging && Range.isRange(at)) {
      at = Editor.unhangRange(editor, at, {
        voids
      });
    }
    var depths = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(depths, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    for (var pathRef3 of pathRefs2) {
      var path3 = pathRef3.unref();
      if (path3) {
        var [node3] = Editor.node(editor, path3);
        editor.apply({
          type: "remove_node",
          path: path3,
          node: node3
        });
      }
    }
  });
};
var setNodes = function setNodes2(editor, props) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      match,
      at = editor.selection,
      compare,
      merge
    } = options;
    var {
      hanging = false,
      mode = "lowest",
      split = false,
      voids = false
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (!hanging && Range.isRange(at)) {
      at = Editor.unhangRange(editor, at, {
        voids
      });
    }
    if (split && Range.isRange(at)) {
      if (Range.isCollapsed(at) && Editor.leaf(editor, at.anchor)[0].text.length > 0) {
        return;
      }
      var rangeRef3 = Editor.rangeRef(editor, at, {
        affinity: "inward"
      });
      var [start2, end2] = Range.edges(at);
      var splitMode = mode === "lowest" ? "lowest" : "highest";
      var endAtEndOfNode = Editor.isEnd(editor, end2, end2.path);
      Transforms.splitNodes(editor, {
        at: end2,
        match,
        mode: splitMode,
        voids,
        always: !endAtEndOfNode
      });
      var startAtStartOfNode = Editor.isStart(editor, start2, start2.path);
      Transforms.splitNodes(editor, {
        at: start2,
        match,
        mode: splitMode,
        voids,
        always: !startAtStartOfNode
      });
      at = rangeRef3.unref();
      if (options.at == null) {
        Transforms.select(editor, at);
      }
    }
    if (!compare) {
      compare = (prop, nodeProp) => prop !== nodeProp;
    }
    for (var [node3, path3] of Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    })) {
      var properties = {};
      var newProperties = {};
      if (path3.length === 0) {
        continue;
      }
      var hasChanges = false;
      for (var k in props) {
        if (k === "children" || k === "text") {
          continue;
        }
        if (compare(props[k], node3[k])) {
          hasChanges = true;
          if (node3.hasOwnProperty(k))
            properties[k] = node3[k];
          if (merge) {
            if (props[k] != null)
              newProperties[k] = merge(node3[k], props[k]);
          } else {
            if (props[k] != null)
              newProperties[k] = props[k];
          }
        }
      }
      if (hasChanges) {
        editor.apply({
          type: "set_node",
          path: path3,
          properties,
          newProperties
        });
      }
    }
  });
};
var deleteRange = (editor, range2) => {
  if (Range.isCollapsed(range2)) {
    return range2.anchor;
  } else {
    var [, end2] = Range.edges(range2);
    var pointRef3 = Editor.pointRef(editor, end2);
    Transforms.delete(editor, {
      at: range2
    });
    return pointRef3.unref();
  }
};
var splitNodes = function splitNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      mode = "lowest",
      voids = false
    } = options;
    var {
      match,
      at = editor.selection,
      height = 0,
      always = false
    } = options;
    if (match == null) {
      match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (Range.isRange(at)) {
      at = deleteRange(editor, at);
    }
    if (Path.isPath(at)) {
      var path3 = at;
      var point3 = Editor.point(editor, path3);
      var [parent3] = Editor.parent(editor, path3);
      match = (n3) => n3 === parent3;
      height = point3.path.length - path3.length + 1;
      at = point3;
      always = true;
    }
    if (!at) {
      return;
    }
    var beforeRef = Editor.pointRef(editor, at, {
      affinity: "backward"
    });
    var afterRef;
    try {
      var [highest] = Editor.nodes(editor, {
        at,
        match,
        mode,
        voids
      });
      if (!highest) {
        return;
      }
      var voidMatch = Editor.void(editor, {
        at,
        mode: "highest"
      });
      var nudge = 0;
      if (!voids && voidMatch) {
        var [voidNode, voidPath] = voidMatch;
        if (Element2.isElement(voidNode) && editor.isInline(voidNode)) {
          var after3 = Editor.after(editor, voidPath);
          if (!after3) {
            var text = {
              text: ""
            };
            var afterPath = Path.next(voidPath);
            Transforms.insertNodes(editor, text, {
              at: afterPath,
              voids
            });
            after3 = Editor.point(editor, afterPath);
          }
          at = after3;
          always = true;
        }
        var siblingHeight = at.path.length - voidPath.length;
        height = siblingHeight + 1;
        always = true;
      }
      afterRef = Editor.pointRef(editor, at);
      var depth = at.path.length - height;
      var [, highestPath] = highest;
      var lowestPath = at.path.slice(0, depth);
      var position = height === 0 ? at.offset : at.path[depth] + nudge;
      for (var [node3, _path] of Editor.levels(editor, {
        at: lowestPath,
        reverse: true,
        voids
      })) {
        var split = false;
        if (_path.length < highestPath.length || _path.length === 0 || !voids && Element2.isElement(node3) && Editor.isVoid(editor, node3)) {
          break;
        }
        var _point = beforeRef.current;
        var isEnd2 = Editor.isEnd(editor, _point, _path);
        if (always || !beforeRef || !Editor.isEdge(editor, _point, _path)) {
          split = true;
          var properties = Node.extractProps(node3);
          editor.apply({
            type: "split_node",
            path: _path,
            position,
            properties
          });
        }
        position = _path[_path.length - 1] + (split || isEnd2 ? 1 : 0);
      }
      if (options.at == null) {
        var _point2 = afterRef.current || Editor.end(editor, []);
        Transforms.select(editor, _point2);
      }
    } finally {
      var _afterRef;
      beforeRef.unref();
      (_afterRef = afterRef) === null || _afterRef === void 0 || _afterRef.unref();
    }
  });
};
var unsetNodes = function unsetNodes2(editor, props) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  if (!Array.isArray(props)) {
    props = [props];
  }
  var obj = {};
  for (var key of props) {
    obj[key] = null;
  }
  Transforms.setNodes(editor, obj, options);
};
var unwrapNodes = function unwrapNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      mode = "lowest",
      split = false,
      voids = false
    } = options;
    var {
      at = editor.selection,
      match
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (Path.isPath(at)) {
      at = Editor.range(editor, at);
    }
    var rangeRef3 = Range.isRange(at) ? Editor.rangeRef(editor, at) : null;
    var matches = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(
      matches,
      (_ref) => {
        var [, p] = _ref;
        return Editor.pathRef(editor, p);
      }
      // unwrapNode will call liftNode which does not support splitting the node when nested.
      // If we do not reverse the order and call it from top to the bottom, it will remove all blocks
      // that wrap target node. So we reverse the order.
    ).reverse();
    var _loop = function _loop2() {
      var path3 = pathRef3.unref();
      var [node3] = Editor.node(editor, path3);
      var range2 = Editor.range(editor, path3);
      if (split && rangeRef3) {
        range2 = Range.intersection(rangeRef3.current, range2);
      }
      Transforms.liftNodes(editor, {
        at: range2,
        match: (n3) => Element2.isAncestor(node3) && node3.children.includes(n3),
        voids
      });
    };
    for (var pathRef3 of pathRefs2) {
      _loop();
    }
    if (rangeRef3) {
      rangeRef3.unref();
    }
  });
};
function ownKeys(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var wrapNodes = function wrapNodes2(editor, element) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      mode = "lowest",
      split = false,
      voids = false
    } = options;
    var {
      match,
      at = editor.selection
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      if (Path.isPath(at)) {
        match = matchPath(editor, at);
      } else if (editor.isInline(element)) {
        match = (n3) => Element2.isElement(n3) && Editor.isInline(editor, n3) || Text.isText(n3);
      } else {
        match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
      }
    }
    if (split && Range.isRange(at)) {
      var [start2, end2] = Range.edges(at);
      var rangeRef3 = Editor.rangeRef(editor, at, {
        affinity: "inward"
      });
      Transforms.splitNodes(editor, {
        at: end2,
        match,
        voids
      });
      Transforms.splitNodes(editor, {
        at: start2,
        match,
        voids
      });
      at = rangeRef3.unref();
      if (options.at == null) {
        Transforms.select(editor, at);
      }
    }
    var roots = Array.from(Editor.nodes(editor, {
      at,
      match: editor.isInline(element) ? (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3) : (n3) => Editor.isEditor(n3),
      mode: "lowest",
      voids
    }));
    var _loop = function _loop2() {
      var a = Range.isRange(at) ? Range.intersection(at, Editor.range(editor, rootPath)) : at;
      if (!a) {
        return 0;
      }
      var matches = Array.from(Editor.nodes(editor, {
        at: a,
        match,
        mode,
        voids
      }));
      if (matches.length > 0) {
        var [first2] = matches;
        var last2 = matches[matches.length - 1];
        var [, firstPath] = first2;
        var [, lastPath] = last2;
        if (firstPath.length === 0 && lastPath.length === 0) {
          return 0;
        }
        var commonPath = Path.equals(firstPath, lastPath) ? Path.parent(firstPath) : Path.common(firstPath, lastPath);
        var range2 = Editor.range(editor, firstPath, lastPath);
        var commonNodeEntry = Editor.node(editor, commonPath);
        var [commonNode] = commonNodeEntry;
        var depth = commonPath.length + 1;
        var wrapperPath = Path.next(lastPath.slice(0, depth));
        var wrapper = _objectSpread(_objectSpread({}, element), {}, {
          children: []
        });
        Transforms.insertNodes(editor, wrapper, {
          at: wrapperPath,
          voids
        });
        Transforms.moveNodes(editor, {
          at: range2,
          match: (n3) => Element2.isAncestor(commonNode) && commonNode.children.includes(n3),
          to: wrapperPath.concat(0),
          voids
        });
      }
    }, _ret;
    for (var [, rootPath] of roots) {
      _ret = _loop();
      if (_ret === 0)
        continue;
    }
  });
};
var createEditor = () => {
  var editor = {
    children: [],
    operations: [],
    selection: null,
    marks: null,
    isElementReadOnly: () => false,
    isInline: () => false,
    isSelectable: () => true,
    isVoid: () => false,
    markableVoid: () => false,
    onChange: () => {
    },
    // Core
    apply: function apply$1() {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      return apply(editor, ...args);
    },
    // Editor
    addMark: function addMark$1() {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }
      return addMark(editor, ...args);
    },
    deleteBackward: function deleteBackward$1() {
      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        args[_key3] = arguments[_key3];
      }
      return deleteBackward(editor, ...args);
    },
    deleteForward: function deleteForward$1() {
      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
        args[_key4] = arguments[_key4];
      }
      return deleteForward(editor, ...args);
    },
    deleteFragment: function deleteFragment$1() {
      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
        args[_key5] = arguments[_key5];
      }
      return deleteFragment(editor, ...args);
    },
    getFragment: function getFragment$1() {
      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
        args[_key6] = arguments[_key6];
      }
      return getFragment(editor, ...args);
    },
    insertBreak: function insertBreak$1() {
      for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
        args[_key7] = arguments[_key7];
      }
      return insertBreak(editor, ...args);
    },
    insertSoftBreak: function insertSoftBreak$1() {
      for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
        args[_key8] = arguments[_key8];
      }
      return insertSoftBreak(editor, ...args);
    },
    insertFragment: function insertFragment$1() {
      for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
        args[_key9] = arguments[_key9];
      }
      return insertFragment(editor, ...args);
    },
    insertNode: function insertNode$1() {
      for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
        args[_key10] = arguments[_key10];
      }
      return insertNode(editor, ...args);
    },
    insertText: function insertText$1() {
      for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {
        args[_key11] = arguments[_key11];
      }
      return insertText(editor, ...args);
    },
    normalizeNode: function normalizeNode$1() {
      for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {
        args[_key12] = arguments[_key12];
      }
      return normalizeNode(editor, ...args);
    },
    removeMark: function removeMark$1() {
      for (var _len13 = arguments.length, args = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {
        args[_key13] = arguments[_key13];
      }
      return removeMark(editor, ...args);
    },
    getDirtyPaths: function getDirtyPaths$1() {
      for (var _len14 = arguments.length, args = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {
        args[_key14] = arguments[_key14];
      }
      return getDirtyPaths(editor, ...args);
    },
    shouldNormalize: function shouldNormalize$1() {
      for (var _len15 = arguments.length, args = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {
        args[_key15] = arguments[_key15];
      }
      return shouldNormalize(editor, ...args);
    },
    // Editor interface
    above: function above$1() {
      for (var _len16 = arguments.length, args = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {
        args[_key16] = arguments[_key16];
      }
      return above(editor, ...args);
    },
    after: function after$1() {
      for (var _len17 = arguments.length, args = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {
        args[_key17] = arguments[_key17];
      }
      return after(editor, ...args);
    },
    before: function before$1() {
      for (var _len18 = arguments.length, args = new Array(_len18), _key18 = 0; _key18 < _len18; _key18++) {
        args[_key18] = arguments[_key18];
      }
      return before(editor, ...args);
    },
    collapse: function collapse$1() {
      for (var _len19 = arguments.length, args = new Array(_len19), _key19 = 0; _key19 < _len19; _key19++) {
        args[_key19] = arguments[_key19];
      }
      return collapse(editor, ...args);
    },
    delete: function _delete() {
      for (var _len20 = arguments.length, args = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {
        args[_key20] = arguments[_key20];
      }
      return deleteText(editor, ...args);
    },
    deselect: function deselect$1() {
      for (var _len21 = arguments.length, args = new Array(_len21), _key21 = 0; _key21 < _len21; _key21++) {
        args[_key21] = arguments[_key21];
      }
      return deselect(editor, ...args);
    },
    edges: function edges$1() {
      for (var _len22 = arguments.length, args = new Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {
        args[_key22] = arguments[_key22];
      }
      return edges(editor, ...args);
    },
    elementReadOnly: function elementReadOnly$1() {
      for (var _len23 = arguments.length, args = new Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {
        args[_key23] = arguments[_key23];
      }
      return elementReadOnly(editor, ...args);
    },
    end: function end$1() {
      for (var _len24 = arguments.length, args = new Array(_len24), _key24 = 0; _key24 < _len24; _key24++) {
        args[_key24] = arguments[_key24];
      }
      return end(editor, ...args);
    },
    first: function first$1() {
      for (var _len25 = arguments.length, args = new Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {
        args[_key25] = arguments[_key25];
      }
      return first(editor, ...args);
    },
    fragment: function fragment$1() {
      for (var _len26 = arguments.length, args = new Array(_len26), _key26 = 0; _key26 < _len26; _key26++) {
        args[_key26] = arguments[_key26];
      }
      return fragment(editor, ...args);
    },
    getMarks: function getMarks() {
      for (var _len27 = arguments.length, args = new Array(_len27), _key27 = 0; _key27 < _len27; _key27++) {
        args[_key27] = arguments[_key27];
      }
      return marks(editor, ...args);
    },
    hasBlocks: function hasBlocks$1() {
      for (var _len28 = arguments.length, args = new Array(_len28), _key28 = 0; _key28 < _len28; _key28++) {
        args[_key28] = arguments[_key28];
      }
      return hasBlocks(editor, ...args);
    },
    hasInlines: function hasInlines$1() {
      for (var _len29 = arguments.length, args = new Array(_len29), _key29 = 0; _key29 < _len29; _key29++) {
        args[_key29] = arguments[_key29];
      }
      return hasInlines(editor, ...args);
    },
    hasPath: function hasPath$1() {
      for (var _len30 = arguments.length, args = new Array(_len30), _key30 = 0; _key30 < _len30; _key30++) {
        args[_key30] = arguments[_key30];
      }
      return hasPath(editor, ...args);
    },
    hasTexts: function hasTexts$1() {
      for (var _len31 = arguments.length, args = new Array(_len31), _key31 = 0; _key31 < _len31; _key31++) {
        args[_key31] = arguments[_key31];
      }
      return hasTexts(editor, ...args);
    },
    insertNodes: function insertNodes$1() {
      for (var _len32 = arguments.length, args = new Array(_len32), _key32 = 0; _key32 < _len32; _key32++) {
        args[_key32] = arguments[_key32];
      }
      return insertNodes(editor, ...args);
    },
    isBlock: function isBlock$1() {
      for (var _len33 = arguments.length, args = new Array(_len33), _key33 = 0; _key33 < _len33; _key33++) {
        args[_key33] = arguments[_key33];
      }
      return isBlock2(editor, ...args);
    },
    isEdge: function isEdge$1() {
      for (var _len34 = arguments.length, args = new Array(_len34), _key34 = 0; _key34 < _len34; _key34++) {
        args[_key34] = arguments[_key34];
      }
      return isEdge(editor, ...args);
    },
    isEmpty: function isEmpty$1() {
      for (var _len35 = arguments.length, args = new Array(_len35), _key35 = 0; _key35 < _len35; _key35++) {
        args[_key35] = arguments[_key35];
      }
      return isEmpty(editor, ...args);
    },
    isEnd: function isEnd$1() {
      for (var _len36 = arguments.length, args = new Array(_len36), _key36 = 0; _key36 < _len36; _key36++) {
        args[_key36] = arguments[_key36];
      }
      return isEnd(editor, ...args);
    },
    isNormalizing: function isNormalizing$1() {
      for (var _len37 = arguments.length, args = new Array(_len37), _key37 = 0; _key37 < _len37; _key37++) {
        args[_key37] = arguments[_key37];
      }
      return isNormalizing(editor, ...args);
    },
    isStart: function isStart$1() {
      for (var _len38 = arguments.length, args = new Array(_len38), _key38 = 0; _key38 < _len38; _key38++) {
        args[_key38] = arguments[_key38];
      }
      return isStart(editor, ...args);
    },
    last: function last$1() {
      for (var _len39 = arguments.length, args = new Array(_len39), _key39 = 0; _key39 < _len39; _key39++) {
        args[_key39] = arguments[_key39];
      }
      return last(editor, ...args);
    },
    leaf: function leaf$1() {
      for (var _len40 = arguments.length, args = new Array(_len40), _key40 = 0; _key40 < _len40; _key40++) {
        args[_key40] = arguments[_key40];
      }
      return leaf(editor, ...args);
    },
    levels: function levels$1() {
      for (var _len41 = arguments.length, args = new Array(_len41), _key41 = 0; _key41 < _len41; _key41++) {
        args[_key41] = arguments[_key41];
      }
      return levels(editor, ...args);
    },
    liftNodes: function liftNodes$1() {
      for (var _len42 = arguments.length, args = new Array(_len42), _key42 = 0; _key42 < _len42; _key42++) {
        args[_key42] = arguments[_key42];
      }
      return liftNodes(editor, ...args);
    },
    mergeNodes: function mergeNodes$1() {
      for (var _len43 = arguments.length, args = new Array(_len43), _key43 = 0; _key43 < _len43; _key43++) {
        args[_key43] = arguments[_key43];
      }
      return mergeNodes(editor, ...args);
    },
    move: function move$1() {
      for (var _len44 = arguments.length, args = new Array(_len44), _key44 = 0; _key44 < _len44; _key44++) {
        args[_key44] = arguments[_key44];
      }
      return move(editor, ...args);
    },
    moveNodes: function moveNodes$1() {
      for (var _len45 = arguments.length, args = new Array(_len45), _key45 = 0; _key45 < _len45; _key45++) {
        args[_key45] = arguments[_key45];
      }
      return moveNodes(editor, ...args);
    },
    next: function next$1() {
      for (var _len46 = arguments.length, args = new Array(_len46), _key46 = 0; _key46 < _len46; _key46++) {
        args[_key46] = arguments[_key46];
      }
      return next(editor, ...args);
    },
    node: function node$1() {
      for (var _len47 = arguments.length, args = new Array(_len47), _key47 = 0; _key47 < _len47; _key47++) {
        args[_key47] = arguments[_key47];
      }
      return node(editor, ...args);
    },
    nodes: function nodes$1() {
      for (var _len48 = arguments.length, args = new Array(_len48), _key48 = 0; _key48 < _len48; _key48++) {
        args[_key48] = arguments[_key48];
      }
      return nodes(editor, ...args);
    },
    normalize: function normalize$1() {
      for (var _len49 = arguments.length, args = new Array(_len49), _key49 = 0; _key49 < _len49; _key49++) {
        args[_key49] = arguments[_key49];
      }
      return normalize(editor, ...args);
    },
    parent: function parent$1() {
      for (var _len50 = arguments.length, args = new Array(_len50), _key50 = 0; _key50 < _len50; _key50++) {
        args[_key50] = arguments[_key50];
      }
      return parent(editor, ...args);
    },
    path: function path$1() {
      for (var _len51 = arguments.length, args = new Array(_len51), _key51 = 0; _key51 < _len51; _key51++) {
        args[_key51] = arguments[_key51];
      }
      return path(editor, ...args);
    },
    pathRef: function pathRef$1() {
      for (var _len52 = arguments.length, args = new Array(_len52), _key52 = 0; _key52 < _len52; _key52++) {
        args[_key52] = arguments[_key52];
      }
      return pathRef(editor, ...args);
    },
    pathRefs: function pathRefs$1() {
      for (var _len53 = arguments.length, args = new Array(_len53), _key53 = 0; _key53 < _len53; _key53++) {
        args[_key53] = arguments[_key53];
      }
      return pathRefs(editor, ...args);
    },
    point: function point$1() {
      for (var _len54 = arguments.length, args = new Array(_len54), _key54 = 0; _key54 < _len54; _key54++) {
        args[_key54] = arguments[_key54];
      }
      return point(editor, ...args);
    },
    pointRef: function pointRef$1() {
      for (var _len55 = arguments.length, args = new Array(_len55), _key55 = 0; _key55 < _len55; _key55++) {
        args[_key55] = arguments[_key55];
      }
      return pointRef(editor, ...args);
    },
    pointRefs: function pointRefs$1() {
      for (var _len56 = arguments.length, args = new Array(_len56), _key56 = 0; _key56 < _len56; _key56++) {
        args[_key56] = arguments[_key56];
      }
      return pointRefs(editor, ...args);
    },
    positions: function positions$1() {
      for (var _len57 = arguments.length, args = new Array(_len57), _key57 = 0; _key57 < _len57; _key57++) {
        args[_key57] = arguments[_key57];
      }
      return positions(editor, ...args);
    },
    previous: function previous$1() {
      for (var _len58 = arguments.length, args = new Array(_len58), _key58 = 0; _key58 < _len58; _key58++) {
        args[_key58] = arguments[_key58];
      }
      return previous(editor, ...args);
    },
    range: function range$1() {
      for (var _len59 = arguments.length, args = new Array(_len59), _key59 = 0; _key59 < _len59; _key59++) {
        args[_key59] = arguments[_key59];
      }
      return range(editor, ...args);
    },
    rangeRef: function rangeRef$1() {
      for (var _len60 = arguments.length, args = new Array(_len60), _key60 = 0; _key60 < _len60; _key60++) {
        args[_key60] = arguments[_key60];
      }
      return rangeRef(editor, ...args);
    },
    rangeRefs: function rangeRefs$1() {
      for (var _len61 = arguments.length, args = new Array(_len61), _key61 = 0; _key61 < _len61; _key61++) {
        args[_key61] = arguments[_key61];
      }
      return rangeRefs(editor, ...args);
    },
    removeNodes: function removeNodes$1() {
      for (var _len62 = arguments.length, args = new Array(_len62), _key62 = 0; _key62 < _len62; _key62++) {
        args[_key62] = arguments[_key62];
      }
      return removeNodes(editor, ...args);
    },
    select: function select$1() {
      for (var _len63 = arguments.length, args = new Array(_len63), _key63 = 0; _key63 < _len63; _key63++) {
        args[_key63] = arguments[_key63];
      }
      return select(editor, ...args);
    },
    setNodes: function setNodes$1() {
      for (var _len64 = arguments.length, args = new Array(_len64), _key64 = 0; _key64 < _len64; _key64++) {
        args[_key64] = arguments[_key64];
      }
      return setNodes(editor, ...args);
    },
    setNormalizing: function setNormalizing$1() {
      for (var _len65 = arguments.length, args = new Array(_len65), _key65 = 0; _key65 < _len65; _key65++) {
        args[_key65] = arguments[_key65];
      }
      return setNormalizing(editor, ...args);
    },
    setPoint: function setPoint$1() {
      for (var _len66 = arguments.length, args = new Array(_len66), _key66 = 0; _key66 < _len66; _key66++) {
        args[_key66] = arguments[_key66];
      }
      return setPoint(editor, ...args);
    },
    setSelection: function setSelection$1() {
      for (var _len67 = arguments.length, args = new Array(_len67), _key67 = 0; _key67 < _len67; _key67++) {
        args[_key67] = arguments[_key67];
      }
      return setSelection(editor, ...args);
    },
    splitNodes: function splitNodes$1() {
      for (var _len68 = arguments.length, args = new Array(_len68), _key68 = 0; _key68 < _len68; _key68++) {
        args[_key68] = arguments[_key68];
      }
      return splitNodes(editor, ...args);
    },
    start: function start$1() {
      for (var _len69 = arguments.length, args = new Array(_len69), _key69 = 0; _key69 < _len69; _key69++) {
        args[_key69] = arguments[_key69];
      }
      return start(editor, ...args);
    },
    string: function string$1() {
      for (var _len70 = arguments.length, args = new Array(_len70), _key70 = 0; _key70 < _len70; _key70++) {
        args[_key70] = arguments[_key70];
      }
      return string(editor, ...args);
    },
    unhangRange: function unhangRange$1() {
      for (var _len71 = arguments.length, args = new Array(_len71), _key71 = 0; _key71 < _len71; _key71++) {
        args[_key71] = arguments[_key71];
      }
      return unhangRange(editor, ...args);
    },
    unsetNodes: function unsetNodes$1() {
      for (var _len72 = arguments.length, args = new Array(_len72), _key72 = 0; _key72 < _len72; _key72++) {
        args[_key72] = arguments[_key72];
      }
      return unsetNodes(editor, ...args);
    },
    unwrapNodes: function unwrapNodes$1() {
      for (var _len73 = arguments.length, args = new Array(_len73), _key73 = 0; _key73 < _len73; _key73++) {
        args[_key73] = arguments[_key73];
      }
      return unwrapNodes(editor, ...args);
    },
    void: function _void() {
      for (var _len74 = arguments.length, args = new Array(_len74), _key74 = 0; _key74 < _len74; _key74++) {
        args[_key74] = arguments[_key74];
      }
      return getVoid(editor, ...args);
    },
    withoutNormalizing: function withoutNormalizing$1() {
      for (var _len75 = arguments.length, args = new Array(_len75), _key75 = 0; _key75 < _len75; _key75++) {
        args[_key75] = arguments[_key75];
      }
      return withoutNormalizing(editor, ...args);
    },
    wrapNodes: function wrapNodes$1() {
      for (var _len76 = arguments.length, args = new Array(_len76), _key76 = 0; _key76 < _len76; _key76++) {
        args[_key76] = arguments[_key76];
      }
      return wrapNodes(editor, ...args);
    }
  };
  return editor;
};

// ../node_modules/slate-react/dist/index.es.js
var import_direction = __toESM(require_direction());
var import_debounce = __toESM(require_debounce());
var import_throttle = __toESM(require_throttle());
var import_react = __toESM(require_react());

// ../node_modules/compute-scroll-into-view/dist/index.mjs
function t(t2) {
  return "object" == typeof t2 && null != t2 && 1 === t2.nodeType;
}
function e(t2, e2) {
  return (!e2 || "hidden" !== t2) && "visible" !== t2 && "clip" !== t2;
}
function n(t2, n3) {
  if (t2.clientHeight < t2.scrollHeight || t2.clientWidth < t2.scrollWidth) {
    var r2 = getComputedStyle(t2, null);
    return e(r2.overflowY, n3) || e(r2.overflowX, n3) || function(t3) {
      var e2 = function(t4) {
        if (!t4.ownerDocument || !t4.ownerDocument.defaultView)
          return null;
        try {
          return t4.ownerDocument.defaultView.frameElement;
        } catch (t5) {
          return null;
        }
      }(t3);
      return !!e2 && (e2.clientHeight < t3.scrollHeight || e2.clientWidth < t3.scrollWidth);
    }(t2);
  }
  return false;
}
function r(t2, e2, n3, r2, i2, o, l, d) {
  return o < t2 && l > e2 || o > t2 && l < e2 ? 0 : o <= t2 && d <= n3 || l >= e2 && d >= n3 ? o - t2 - r2 : l > e2 && d < n3 || o < t2 && d > n3 ? l - e2 + i2 : 0;
}
var i = function(e2, i2) {
  var o = window, l = i2.scrollMode, d = i2.block, f = i2.inline, h = i2.boundary, u = i2.skipOverflowHiddenElements, s = "function" == typeof h ? h : function(t2) {
    return t2 !== h;
  };
  if (!t(e2))
    throw new TypeError("Invalid target");
  for (var a, c, g = document.scrollingElement || document.documentElement, p = [], m = e2; t(m) && s(m); ) {
    if ((m = null == (c = (a = m).parentElement) ? a.getRootNode().host || null : c) === g) {
      p.push(m);
      break;
    }
    null != m && m === document.body && n(m) && !n(document.documentElement) || null != m && n(m, u) && p.push(m);
  }
  for (var w = o.visualViewport ? o.visualViewport.width : innerWidth, v = o.visualViewport ? o.visualViewport.height : innerHeight, W = window.scrollX || pageXOffset, H = window.scrollY || pageYOffset, b = e2.getBoundingClientRect(), y = b.height, E = b.width, M = b.top, V = b.right, x = b.bottom, I = b.left, C = "start" === d || "nearest" === d ? M : "end" === d ? x : M + y / 2, R = "center" === f ? I + E / 2 : "end" === f ? V : I, T = [], k = 0; k < p.length; k++) {
    var B = p[k], D = B.getBoundingClientRect(), O = D.height, X = D.width, Y = D.top, L = D.right, S = D.bottom, j = D.left;
    if ("if-needed" === l && M >= 0 && I >= 0 && x <= v && V <= w && M >= Y && x <= S && I >= j && V <= L)
      return T;
    var N = getComputedStyle(B), q = parseInt(N.borderLeftWidth, 10), z = parseInt(N.borderTopWidth, 10), A = parseInt(N.borderRightWidth, 10), F = parseInt(N.borderBottomWidth, 10), G = 0, J = 0, K = "offsetWidth" in B ? B.offsetWidth - B.clientWidth - q - A : 0, P = "offsetHeight" in B ? B.offsetHeight - B.clientHeight - z - F : 0, Q = "offsetWidth" in B ? 0 === B.offsetWidth ? 0 : X / B.offsetWidth : 0, U = "offsetHeight" in B ? 0 === B.offsetHeight ? 0 : O / B.offsetHeight : 0;
    if (g === B)
      G = "start" === d ? C : "end" === d ? C - v : "nearest" === d ? r(H, H + v, v, z, F, H + C, H + C + y, y) : C - v / 2, J = "start" === f ? R : "center" === f ? R - w / 2 : "end" === f ? R - w : r(W, W + w, w, q, A, W + R, W + R + E, E), G = Math.max(0, G + H), J = Math.max(0, J + W);
    else {
      G = "start" === d ? C - Y - z : "end" === d ? C - S + F + P : "nearest" === d ? r(Y, S, O, z, F + P, C, C + y, y) : C - (Y + O / 2) + P / 2, J = "start" === f ? R - j - q : "center" === f ? R - (j + X / 2) + K / 2 : "end" === f ? R - L + A + K : r(j, L, X, q, A + K, R, R + E, E);
      var Z = B.scrollLeft, $ = B.scrollTop;
      C += $ - (G = Math.max(0, Math.min($ + G / U, B.scrollHeight - O / U + P))), R += Z - (J = Math.max(0, Math.min(Z + J / Q, B.scrollWidth - X / Q + K)));
    }
    T.push({ el: B, top: G, left: J });
  }
  return T;
};

// ../node_modules/scroll-into-view-if-needed/es/index.js
function isOptionsObject(options) {
  return options === Object(options) && Object.keys(options).length !== 0;
}
function defaultBehavior(actions, behavior) {
  if (behavior === void 0) {
    behavior = "auto";
  }
  var canSmoothScroll = "scrollBehavior" in document.body.style;
  actions.forEach(function(_ref) {
    var el = _ref.el, top = _ref.top, left = _ref.left;
    if (el.scroll && canSmoothScroll) {
      el.scroll({
        top,
        left,
        behavior
      });
    } else {
      el.scrollTop = top;
      el.scrollLeft = left;
    }
  });
}
function getOptions(options) {
  if (options === false) {
    return {
      block: "end",
      inline: "nearest"
    };
  }
  if (isOptionsObject(options)) {
    return options;
  }
  return {
    block: "start",
    inline: "nearest"
  };
}
function scrollIntoView(target, options) {
  var isTargetAttached = target.isConnected || target.ownerDocument.documentElement.contains(target);
  if (isOptionsObject(options) && typeof options.behavior === "function") {
    return options.behavior(isTargetAttached ? i(target, options) : []);
  }
  if (!isTargetAttached) {
    return;
  }
  var computeOptions = getOptions(options);
  return defaultBehavior(i(target, computeOptions), computeOptions.behavior);
}
var es_default = scrollIntoView;

// ../node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js
var resizeObservers = [];

// ../node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js
var hasActiveObservations = function() {
  return resizeObservers.some(function(ro) {
    return ro.activeTargets.length > 0;
  });
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js
var hasSkippedObservations = function() {
  return resizeObservers.some(function(ro) {
    return ro.skippedTargets.length > 0;
  });
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js
var msg = "ResizeObserver loop completed with undelivered notifications.";
var deliverResizeLoopError = function() {
  var event;
  if (typeof ErrorEvent === "function") {
    event = new ErrorEvent("error", {
      message: msg
    });
  } else {
    event = document.createEvent("Event");
    event.initEvent("error", false, false);
    event.message = msg;
  }
  window.dispatchEvent(event);
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js
var ResizeObserverBoxOptions;
(function(ResizeObserverBoxOptions2) {
  ResizeObserverBoxOptions2["BORDER_BOX"] = "border-box";
  ResizeObserverBoxOptions2["CONTENT_BOX"] = "content-box";
  ResizeObserverBoxOptions2["DEVICE_PIXEL_CONTENT_BOX"] = "device-pixel-content-box";
})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));

// ../node_modules/@juggle/resize-observer/lib/utils/freeze.js
var freeze2 = function(obj) {
  return Object.freeze(obj);
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js
var ResizeObserverSize = /* @__PURE__ */ function() {
  function ResizeObserverSize2(inlineSize, blockSize) {
    this.inlineSize = inlineSize;
    this.blockSize = blockSize;
    freeze2(this);
  }
  return ResizeObserverSize2;
}();

// ../node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js
var DOMRectReadOnly = function() {
  function DOMRectReadOnly2(x, y, width, height) {
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.top = this.y;
    this.left = this.x;
    this.bottom = this.top + this.height;
    this.right = this.left + this.width;
    return freeze2(this);
  }
  DOMRectReadOnly2.prototype.toJSON = function() {
    var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;
    return { x, y, top, right, bottom, left, width, height };
  };
  DOMRectReadOnly2.fromRect = function(rectangle) {
    return new DOMRectReadOnly2(rectangle.x, rectangle.y, rectangle.width, rectangle.height);
  };
  return DOMRectReadOnly2;
}();

// ../node_modules/@juggle/resize-observer/lib/utils/element.js
var isSVG = function(target) {
  return target instanceof SVGElement && "getBBox" in target;
};
var isHidden = function(target) {
  if (isSVG(target)) {
    var _a = target.getBBox(), width = _a.width, height = _a.height;
    return !width && !height;
  }
  var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;
  return !(offsetWidth || offsetHeight || target.getClientRects().length);
};
var isElement2 = function(obj) {
  var _a;
  if (obj instanceof Element) {
    return true;
  }
  var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;
  return !!(scope && obj instanceof scope.Element);
};
var isReplacedElement = function(target) {
  switch (target.tagName) {
    case "INPUT":
      if (target.type !== "image") {
        break;
      }
    case "VIDEO":
    case "AUDIO":
    case "EMBED":
    case "OBJECT":
    case "CANVAS":
    case "IFRAME":
    case "IMG":
      return true;
  }
  return false;
};

// ../node_modules/@juggle/resize-observer/lib/utils/global.js
var global2 = typeof window !== "undefined" ? window : {};

// ../node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js
var cache = /* @__PURE__ */ new WeakMap();
var scrollRegexp = /auto|scroll/;
var verticalRegexp = /^tb|vertical/;
var IE = /msie|trident/i.test(global2.navigator && global2.navigator.userAgent);
var parseDimension = function(pixel) {
  return parseFloat(pixel || "0");
};
var size = function(inlineSize, blockSize, switchSizes) {
  if (inlineSize === void 0) {
    inlineSize = 0;
  }
  if (blockSize === void 0) {
    blockSize = 0;
  }
  if (switchSizes === void 0) {
    switchSizes = false;
  }
  return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);
};
var zeroBoxes = freeze2({
  devicePixelContentBoxSize: size(),
  borderBoxSize: size(),
  contentBoxSize: size(),
  contentRect: new DOMRectReadOnly(0, 0, 0, 0)
});
var calculateBoxSizes = function(target, forceRecalculation) {
  if (forceRecalculation === void 0) {
    forceRecalculation = false;
  }
  if (cache.has(target) && !forceRecalculation) {
    return cache.get(target);
  }
  if (isHidden(target)) {
    cache.set(target, zeroBoxes);
    return zeroBoxes;
  }
  var cs = getComputedStyle(target);
  var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();
  var removePadding = !IE && cs.boxSizing === "border-box";
  var switchSizes = verticalRegexp.test(cs.writingMode || "");
  var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || "");
  var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || "");
  var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);
  var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);
  var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);
  var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);
  var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);
  var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);
  var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);
  var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);
  var horizontalPadding = paddingLeft + paddingRight;
  var verticalPadding = paddingTop + paddingBottom;
  var horizontalBorderArea = borderLeft + borderRight;
  var verticalBorderArea = borderTop + borderBottom;
  var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;
  var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;
  var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;
  var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;
  var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;
  var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;
  var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;
  var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;
  var boxes = freeze2({
    devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),
    borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),
    contentBoxSize: size(contentWidth, contentHeight, switchSizes),
    contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)
  });
  cache.set(target, boxes);
  return boxes;
};
var calculateBoxSize = function(target, observedBox, forceRecalculation) {
  var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;
  switch (observedBox) {
    case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:
      return devicePixelContentBoxSize;
    case ResizeObserverBoxOptions.BORDER_BOX:
      return borderBoxSize;
    default:
      return contentBoxSize;
  }
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js
var ResizeObserverEntry = /* @__PURE__ */ function() {
  function ResizeObserverEntry2(target) {
    var boxes = calculateBoxSizes(target);
    this.target = target;
    this.contentRect = boxes.contentRect;
    this.borderBoxSize = freeze2([boxes.borderBoxSize]);
    this.contentBoxSize = freeze2([boxes.contentBoxSize]);
    this.devicePixelContentBoxSize = freeze2([boxes.devicePixelContentBoxSize]);
  }
  return ResizeObserverEntry2;
}();

// ../node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js
var calculateDepthForNode = function(node3) {
  if (isHidden(node3)) {
    return Infinity;
  }
  var depth = 0;
  var parent3 = node3.parentNode;
  while (parent3) {
    depth += 1;
    parent3 = parent3.parentNode;
  }
  return depth;
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js
var broadcastActiveObservations = function() {
  var shallowestDepth = Infinity;
  var callbacks2 = [];
  resizeObservers.forEach(function processObserver(ro) {
    if (ro.activeTargets.length === 0) {
      return;
    }
    var entries = [];
    ro.activeTargets.forEach(function processTarget(ot) {
      var entry = new ResizeObserverEntry(ot.target);
      var targetDepth = calculateDepthForNode(ot.target);
      entries.push(entry);
      ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);
      if (targetDepth < shallowestDepth) {
        shallowestDepth = targetDepth;
      }
    });
    callbacks2.push(function resizeObserverCallback() {
      ro.callback.call(ro.observer, entries, ro.observer);
    });
    ro.activeTargets.splice(0, ro.activeTargets.length);
  });
  for (var _i = 0, callbacks_1 = callbacks2; _i < callbacks_1.length; _i++) {
    var callback = callbacks_1[_i];
    callback();
  }
  return shallowestDepth;
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js
var gatherActiveObservationsAtDepth = function(depth) {
  resizeObservers.forEach(function processObserver(ro) {
    ro.activeTargets.splice(0, ro.activeTargets.length);
    ro.skippedTargets.splice(0, ro.skippedTargets.length);
    ro.observationTargets.forEach(function processTarget(ot) {
      if (ot.isActive()) {
        if (calculateDepthForNode(ot.target) > depth) {
          ro.activeTargets.push(ot);
        } else {
          ro.skippedTargets.push(ot);
        }
      }
    });
  });
};

// ../node_modules/@juggle/resize-observer/lib/utils/process.js
var process2 = function() {
  var depth = 0;
  gatherActiveObservationsAtDepth(depth);
  while (hasActiveObservations()) {
    depth = broadcastActiveObservations();
    gatherActiveObservationsAtDepth(depth);
  }
  if (hasSkippedObservations()) {
    deliverResizeLoopError();
  }
  return depth > 0;
};

// ../node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js
var trigger;
var callbacks = [];
var notify = function() {
  return callbacks.splice(0).forEach(function(cb) {
    return cb();
  });
};
var queueMicroTask = function(callback) {
  if (!trigger) {
    var toggle_1 = 0;
    var el_1 = document.createTextNode("");
    var config = { characterData: true };
    new MutationObserver(function() {
      return notify();
    }).observe(el_1, config);
    trigger = function() {
      el_1.textContent = "".concat(toggle_1 ? toggle_1-- : toggle_1++);
    };
  }
  callbacks.push(callback);
  trigger();
};

// ../node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js
var queueResizeObserver = function(cb) {
  queueMicroTask(function ResizeObserver2() {
    requestAnimationFrame(cb);
  });
};

// ../node_modules/@juggle/resize-observer/lib/utils/scheduler.js
var watching = 0;
var isWatching = function() {
  return !!watching;
};
var CATCH_PERIOD = 250;
var observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };
var events = [
  "resize",
  "load",
  "transitionend",
  "animationend",
  "animationstart",
  "animationiteration",
  "keyup",
  "keydown",
  "mouseup",
  "mousedown",
  "mouseover",
  "mouseout",
  "blur",
  "focus"
];
var time = function(timeout) {
  if (timeout === void 0) {
    timeout = 0;
  }
  return Date.now() + timeout;
};
var scheduled = false;
var Scheduler = function() {
  function Scheduler2() {
    var _this = this;
    this.stopped = true;
    this.listener = function() {
      return _this.schedule();
    };
  }
  Scheduler2.prototype.run = function(timeout) {
    var _this = this;
    if (timeout === void 0) {
      timeout = CATCH_PERIOD;
    }
    if (scheduled) {
      return;
    }
    scheduled = true;
    var until = time(timeout);
    queueResizeObserver(function() {
      var elementsHaveResized = false;
      try {
        elementsHaveResized = process2();
      } finally {
        scheduled = false;
        timeout = until - time();
        if (!isWatching()) {
          return;
        }
        if (elementsHaveResized) {
          _this.run(1e3);
        } else if (timeout > 0) {
          _this.run(timeout);
        } else {
          _this.start();
        }
      }
    });
  };
  Scheduler2.prototype.schedule = function() {
    this.stop();
    this.run();
  };
  Scheduler2.prototype.observe = function() {
    var _this = this;
    var cb = function() {
      return _this.observer && _this.observer.observe(document.body, observerConfig);
    };
    document.body ? cb() : global2.addEventListener("DOMContentLoaded", cb);
  };
  Scheduler2.prototype.start = function() {
    var _this = this;
    if (this.stopped) {
      this.stopped = false;
      this.observer = new MutationObserver(this.listener);
      this.observe();
      events.forEach(function(name) {
        return global2.addEventListener(name, _this.listener, true);
      });
    }
  };
  Scheduler2.prototype.stop = function() {
    var _this = this;
    if (!this.stopped) {
      this.observer && this.observer.disconnect();
      events.forEach(function(name) {
        return global2.removeEventListener(name, _this.listener, true);
      });
      this.stopped = true;
    }
  };
  return Scheduler2;
}();
var scheduler = new Scheduler();
var updateCount = function(n3) {
  !watching && n3 > 0 && scheduler.start();
  watching += n3;
  !watching && scheduler.stop();
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObservation.js
var skipNotifyOnElement = function(target) {
  return !isSVG(target) && !isReplacedElement(target) && getComputedStyle(target).display === "inline";
};
var ResizeObservation = function() {
  function ResizeObservation2(target, observedBox) {
    this.target = target;
    this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;
    this.lastReportedSize = {
      inlineSize: 0,
      blockSize: 0
    };
  }
  ResizeObservation2.prototype.isActive = function() {
    var size2 = calculateBoxSize(this.target, this.observedBox, true);
    if (skipNotifyOnElement(this.target)) {
      this.lastReportedSize = size2;
    }
    if (this.lastReportedSize.inlineSize !== size2.inlineSize || this.lastReportedSize.blockSize !== size2.blockSize) {
      return true;
    }
    return false;
  };
  return ResizeObservation2;
}();

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js
var ResizeObserverDetail = /* @__PURE__ */ function() {
  function ResizeObserverDetail2(resizeObserver, callback) {
    this.activeTargets = [];
    this.skippedTargets = [];
    this.observationTargets = [];
    this.observer = resizeObserver;
    this.callback = callback;
  }
  return ResizeObserverDetail2;
}();

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverController.js
var observerMap = /* @__PURE__ */ new WeakMap();
var getObservationIndex = function(observationTargets, target) {
  for (var i2 = 0; i2 < observationTargets.length; i2 += 1) {
    if (observationTargets[i2].target === target) {
      return i2;
    }
  }
  return -1;
};
var ResizeObserverController = function() {
  function ResizeObserverController2() {
  }
  ResizeObserverController2.connect = function(resizeObserver, callback) {
    var detail = new ResizeObserverDetail(resizeObserver, callback);
    observerMap.set(resizeObserver, detail);
  };
  ResizeObserverController2.observe = function(resizeObserver, target, options) {
    var detail = observerMap.get(resizeObserver);
    var firstObservation = detail.observationTargets.length === 0;
    if (getObservationIndex(detail.observationTargets, target) < 0) {
      firstObservation && resizeObservers.push(detail);
      detail.observationTargets.push(new ResizeObservation(target, options && options.box));
      updateCount(1);
      scheduler.schedule();
    }
  };
  ResizeObserverController2.unobserve = function(resizeObserver, target) {
    var detail = observerMap.get(resizeObserver);
    var index = getObservationIndex(detail.observationTargets, target);
    var lastObservation = detail.observationTargets.length === 1;
    if (index >= 0) {
      lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);
      detail.observationTargets.splice(index, 1);
      updateCount(-1);
    }
  };
  ResizeObserverController2.disconnect = function(resizeObserver) {
    var _this = this;
    var detail = observerMap.get(resizeObserver);
    detail.observationTargets.slice().forEach(function(ot) {
      return _this.unobserve(resizeObserver, ot.target);
    });
    detail.activeTargets.splice(0, detail.activeTargets.length);
  };
  return ResizeObserverController2;
}();

// ../node_modules/@juggle/resize-observer/lib/ResizeObserver.js
var ResizeObserver = function() {
  function ResizeObserver2(callback) {
    if (arguments.length === 0) {
      throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");
    }
    if (typeof callback !== "function") {
      throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");
    }
    ResizeObserverController.connect(this, callback);
  }
  ResizeObserver2.prototype.observe = function(target, options) {
    if (arguments.length === 0) {
      throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");
    }
    if (!isElement2(target)) {
      throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");
    }
    ResizeObserverController.observe(this, target, options);
  };
  ResizeObserver2.prototype.unobserve = function(target) {
    if (arguments.length === 0) {
      throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");
    }
    if (!isElement2(target)) {
      throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");
    }
    ResizeObserverController.unobserve(this, target);
  };
  ResizeObserver2.prototype.disconnect = function() {
    ResizeObserverController.disconnect(this);
  };
  ResizeObserver2.toString = function() {
    return "function ResizeObserver () { [polyfill code] }";
  };
  return ResizeObserver2;
}();

// ../node_modules/slate-react/dist/index.es.js
var import_is_hotkey = __toESM(require_lib());
var import_react_dom = __toESM(require_react_dom());
function _defineProperty2(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _objectWithoutPropertiesLoose2(source, excluded) {
  if (source == null)
    return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i2;
  for (i2 = 0; i2 < sourceKeys.length; i2++) {
    key = sourceKeys[i2];
    if (excluded.indexOf(key) >= 0)
      continue;
    target[key] = source[key];
  }
  return target;
}
function _objectWithoutProperties2(source, excluded) {
  if (source == null)
    return {};
  var target = _objectWithoutPropertiesLoose2(source, excluded);
  var key, i2;
  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
    for (i2 = 0; i2 < sourceSymbolKeys.length; i2++) {
      key = sourceSymbolKeys[i2];
      if (excluded.indexOf(key) >= 0)
        continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key))
        continue;
      target[key] = source[key];
    }
  }
  return target;
}
var n2 = 0;
var Key = class {
  constructor() {
    this.id = "".concat(n2++);
  }
};
var NODE_TO_INDEX = /* @__PURE__ */ new WeakMap();
var NODE_TO_PARENT = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_WINDOW = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_ELEMENT = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PLACEHOLDER_ELEMENT = /* @__PURE__ */ new WeakMap();
var ELEMENT_TO_NODE = /* @__PURE__ */ new WeakMap();
var NODE_TO_ELEMENT = /* @__PURE__ */ new WeakMap();
var NODE_TO_KEY = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_KEY_TO_ELEMENT = /* @__PURE__ */ new WeakMap();
var IS_READ_ONLY = /* @__PURE__ */ new WeakMap();
var IS_FOCUSED = /* @__PURE__ */ new WeakMap();
var IS_COMPOSING = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_USER_SELECTION = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_ON_CHANGE = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_SCHEDULE_FLUSH = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_INSERTION_MARKS = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_USER_MARKS = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_DIFFS = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_ACTION = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_SELECTION = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_FORCE_RENDER = /* @__PURE__ */ new WeakMap();
var PLACEHOLDER_SYMBOL = Symbol("placeholder");
var MARK_PLACEHOLDER_SYMBOL = Symbol("mark-placeholder");
var DOMText = globalThis.Text;
var getDefaultView = (value) => {
  return value && value.ownerDocument && value.ownerDocument.defaultView || null;
};
var isDOMComment = (value) => {
  return isDOMNode(value) && value.nodeType === 8;
};
var isDOMElement = (value) => {
  return isDOMNode(value) && value.nodeType === 1;
};
var isDOMNode = (value) => {
  var window2 = getDefaultView(value);
  return !!window2 && value instanceof window2.Node;
};
var isDOMSelection = (value) => {
  var window2 = value && value.anchorNode && getDefaultView(value.anchorNode);
  return !!window2 && value instanceof window2.Selection;
};
var isDOMText = (value) => {
  return isDOMNode(value) && value.nodeType === 3;
};
var isPlainTextOnlyPaste = (event) => {
  return event.clipboardData && event.clipboardData.getData("text/plain") !== "" && event.clipboardData.types.length === 1;
};
var normalizeDOMPoint = (domPoint) => {
  var [node3, offset] = domPoint;
  if (isDOMElement(node3) && node3.childNodes.length) {
    var isLast = offset === node3.childNodes.length;
    var index = isLast ? offset - 1 : offset;
    [node3, index] = getEditableChildAndIndex(node3, index, isLast ? "backward" : "forward");
    isLast = index < offset;
    while (isDOMElement(node3) && node3.childNodes.length) {
      var i2 = isLast ? node3.childNodes.length - 1 : 0;
      node3 = getEditableChild(node3, i2, isLast ? "backward" : "forward");
    }
    offset = isLast && node3.textContent != null ? node3.textContent.length : 0;
  }
  return [node3, offset];
};
var hasShadowRoot = (node3) => {
  var parent3 = node3 && node3.parentNode;
  while (parent3) {
    if (parent3.toString() === "[object ShadowRoot]") {
      return true;
    }
    parent3 = parent3.parentNode;
  }
  return false;
};
var getEditableChildAndIndex = (parent3, index, direction) => {
  var {
    childNodes
  } = parent3;
  var child = childNodes[index];
  var i2 = index;
  var triedForward = false;
  var triedBackward = false;
  while (isDOMComment(child) || isDOMElement(child) && child.childNodes.length === 0 || isDOMElement(child) && child.getAttribute("contenteditable") === "false") {
    if (triedForward && triedBackward) {
      break;
    }
    if (i2 >= childNodes.length) {
      triedForward = true;
      i2 = index - 1;
      direction = "backward";
      continue;
    }
    if (i2 < 0) {
      triedBackward = true;
      i2 = index + 1;
      direction = "forward";
      continue;
    }
    child = childNodes[i2];
    index = i2;
    i2 += direction === "forward" ? 1 : -1;
  }
  return [child, index];
};
var getEditableChild = (parent3, index, direction) => {
  var [child] = getEditableChildAndIndex(parent3, index, direction);
  return child;
};
var getPlainText = (domNode) => {
  var text = "";
  if (isDOMText(domNode) && domNode.nodeValue) {
    return domNode.nodeValue;
  }
  if (isDOMElement(domNode)) {
    for (var childNode of Array.from(domNode.childNodes)) {
      text += getPlainText(childNode);
    }
    var display = getComputedStyle(domNode).getPropertyValue("display");
    if (display === "block" || display === "list" || domNode.tagName === "BR") {
      text += "\n";
    }
  }
  return text;
};
var catchSlateFragment = /data-slate-fragment="(.+?)"/m;
var getSlateFragmentAttribute = (dataTransfer) => {
  var htmlData = dataTransfer.getData("text/html");
  var [, fragment2] = htmlData.match(catchSlateFragment) || [];
  return fragment2;
};
var isTrackedMutation = (editor, mutation, batch) => {
  var {
    target
  } = mutation;
  if (isDOMElement(target) && target.matches('[contentEditable="false"]')) {
    return false;
  }
  var {
    document: document2
  } = ReactEditor.getWindow(editor);
  if (document2.contains(target)) {
    return ReactEditor.hasDOMNode(editor, target, {
      editable: true
    });
  }
  var parentMutation = batch.find((_ref) => {
    var {
      addedNodes,
      removedNodes
    } = _ref;
    for (var node3 of addedNodes) {
      if (node3 === target || node3.contains(target)) {
        return true;
      }
    }
    for (var _node of removedNodes) {
      if (_node === target || _node.contains(target)) {
        return true;
      }
    }
  });
  if (!parentMutation || parentMutation === mutation) {
    return false;
  }
  return isTrackedMutation(editor, parentMutation, batch);
};
var IS_REACT_VERSION_17_OR_ABOVE = parseInt(import_react.default.version.split(".")[0], 10) >= 17;
var IS_IOS = typeof navigator !== "undefined" && typeof window !== "undefined" && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
var IS_APPLE = typeof navigator !== "undefined" && /Mac OS X/.test(navigator.userAgent);
var IS_ANDROID = typeof navigator !== "undefined" && /Android/.test(navigator.userAgent);
var IS_FIREFOX = typeof navigator !== "undefined" && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);
var IS_SAFARI = typeof navigator !== "undefined" && /Version\/[\d\.]+.*Safari/.test(navigator.userAgent);
var IS_EDGE_LEGACY = typeof navigator !== "undefined" && /Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent);
var IS_CHROME = typeof navigator !== "undefined" && /Chrome/i.test(navigator.userAgent);
var IS_CHROME_LEGACY = typeof navigator !== "undefined" && /Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent);
var IS_FIREFOX_LEGACY = typeof navigator !== "undefined" && /^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent);
var IS_UC_MOBILE = typeof navigator !== "undefined" && /.*UCBrowser/.test(navigator.userAgent);
var IS_WECHATBROWSER = typeof navigator !== "undefined" && /.*Wechat/.test(navigator.userAgent);
var CAN_USE_DOM = !!(typeof window !== "undefined" && typeof window.document !== "undefined" && typeof window.document.createElement !== "undefined");
var HAS_BEFORE_INPUT_SUPPORT = !IS_CHROME_LEGACY && !IS_EDGE_LEGACY && // globalThis is undefined in older browsers
typeof globalThis !== "undefined" && globalThis.InputEvent && // @ts-ignore The `getTargetRanges` property isn't recognized.
typeof globalThis.InputEvent.prototype.getTargetRanges === "function";
var ReactEditor = {
  /**
   * Check if the user is currently composing inside the editor.
   */
  isComposing(editor) {
    return !!IS_COMPOSING.get(editor);
  },
  /**
   * Return the host window of the current editor.
   */
  getWindow(editor) {
    var window2 = EDITOR_TO_WINDOW.get(editor);
    if (!window2) {
      throw new Error("Unable to find a host window element for this editor");
    }
    return window2;
  },
  /**
   * Find a key for a Slate node.
   */
  findKey(editor, node3) {
    var key = NODE_TO_KEY.get(node3);
    if (!key) {
      key = new Key();
      NODE_TO_KEY.set(node3, key);
    }
    return key;
  },
  /**
   * Find the path of Slate node.
   */
  findPath(editor, node3) {
    var path3 = [];
    var child = node3;
    while (true) {
      var parent3 = NODE_TO_PARENT.get(child);
      if (parent3 == null) {
        if (Editor.isEditor(child)) {
          return path3;
        } else {
          break;
        }
      }
      var i2 = NODE_TO_INDEX.get(child);
      if (i2 == null) {
        break;
      }
      path3.unshift(i2);
      child = parent3;
    }
    throw new Error("Unable to find the path for Slate node: ".concat(Scrubber.stringify(node3)));
  },
  /**
   * Find the DOM node that implements DocumentOrShadowRoot for the editor.
   */
  findDocumentOrShadowRoot(editor) {
    var el = ReactEditor.toDOMNode(editor, editor);
    var root = el.getRootNode();
    if ((root instanceof Document || root instanceof ShadowRoot) && root.getSelection != null) {
      return root;
    }
    return el.ownerDocument;
  },
  /**
   * Check if the editor is focused.
   */
  isFocused(editor) {
    return !!IS_FOCUSED.get(editor);
  },
  /**
   * Check if the editor is in read-only mode.
   */
  isReadOnly(editor) {
    return !!IS_READ_ONLY.get(editor);
  },
  /**
   * Blur the editor.
   */
  blur(editor) {
    var el = ReactEditor.toDOMNode(editor, editor);
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    IS_FOCUSED.set(editor, false);
    if (root.activeElement === el) {
      el.blur();
    }
  },
  /**
   * Focus the editor.
   */
  focus(editor) {
    var el = ReactEditor.toDOMNode(editor, editor);
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    IS_FOCUSED.set(editor, true);
    if (root.activeElement !== el) {
      el.focus({
        preventScroll: true
      });
    }
  },
  /**
   * Deselect the editor.
   */
  deselect(editor) {
    var {
      selection
    } = editor;
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    var domSelection = root.getSelection();
    if (domSelection && domSelection.rangeCount > 0) {
      domSelection.removeAllRanges();
    }
    if (selection) {
      Transforms.deselect(editor);
    }
  },
  /**
   * Check if a DOM node is within the editor.
   */
  hasDOMNode(editor, target) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    var {
      editable = false
    } = options;
    var editorEl = ReactEditor.toDOMNode(editor, editor);
    var targetEl;
    try {
      targetEl = isDOMElement(target) ? target : target.parentElement;
    } catch (err) {
      if (!err.message.includes('Permission denied to access property "nodeType"')) {
        throw err;
      }
    }
    if (!targetEl) {
      return false;
    }
    return targetEl.closest("[data-slate-editor]") === editorEl && (!editable || targetEl.isContentEditable ? true : typeof targetEl.isContentEditable === "boolean" && // isContentEditable exists only on HTMLElement, and on other nodes it will be undefined
    // this is the core logic that lets you know you got the right editor.selection instead of null when editor is contenteditable="false"(readOnly)
    targetEl.closest('[contenteditable="false"]') === editorEl || !!targetEl.getAttribute("data-slate-zero-width"));
  },
  /**
   * Insert data from a `DataTransfer` into the editor.
   */
  insertData(editor, data) {
    editor.insertData(data);
  },
  /**
   * Insert fragment data from a `DataTransfer` into the editor.
   */
  insertFragmentData(editor, data) {
    return editor.insertFragmentData(data);
  },
  /**
   * Insert text data from a `DataTransfer` into the editor.
   */
  insertTextData(editor, data) {
    return editor.insertTextData(data);
  },
  /**
   * Sets data from the currently selected fragment on a `DataTransfer`.
   */
  setFragmentData(editor, data, originEvent) {
    editor.setFragmentData(data, originEvent);
  },
  /**
   * Find the native DOM element from a Slate node.
   */
  toDOMNode(editor, node3) {
    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);
    var domNode = Editor.isEditor(node3) ? EDITOR_TO_ELEMENT.get(editor) : KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.get(ReactEditor.findKey(editor, node3));
    if (!domNode) {
      throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Scrubber.stringify(node3)));
    }
    return domNode;
  },
  /**
   * Find a native DOM selection point from a Slate point.
   */
  toDOMPoint(editor, point3) {
    var [node3] = Editor.node(editor, point3.path);
    var el = ReactEditor.toDOMNode(editor, node3);
    var domPoint;
    if (Editor.void(editor, {
      at: point3
    })) {
      point3 = {
        path: point3.path,
        offset: 0
      };
    }
    var selector = "[data-slate-string], [data-slate-zero-width]";
    var texts = Array.from(el.querySelectorAll(selector));
    var start2 = 0;
    for (var i2 = 0; i2 < texts.length; i2++) {
      var text = texts[i2];
      var domNode = text.childNodes[0];
      if (domNode == null || domNode.textContent == null) {
        continue;
      }
      var {
        length
      } = domNode.textContent;
      var attr = text.getAttribute("data-slate-length");
      var trueLength = attr == null ? length : parseInt(attr, 10);
      var end2 = start2 + trueLength;
      var nextText = texts[i2 + 1];
      if (point3.offset === end2 && nextText !== null && nextText !== void 0 && nextText.hasAttribute("data-slate-mark-placeholder")) {
        var _nextText$textContent;
        var domText = nextText.childNodes[0];
        domPoint = [
          // COMPAT: If we don't explicity set the dom point to be on the actual
          // dom text element, chrome will put the selection behind the actual dom
          // text element, causing domRange.getBoundingClientRect() calls on a collapsed
          // selection to return incorrect zero values (https://bugs.chromium.org/p/chromium/issues/detail?id=435438)
          // which will cause issues when scrolling to it.
          domText instanceof DOMText ? domText : nextText,
          (_nextText$textContent = nextText.textContent) !== null && _nextText$textContent !== void 0 && _nextText$textContent.startsWith("\uFEFF") ? 1 : 0
        ];
        break;
      }
      if (point3.offset <= end2) {
        var offset = Math.min(length, Math.max(0, point3.offset - start2));
        domPoint = [domNode, offset];
        break;
      }
      start2 = end2;
    }
    if (!domPoint) {
      throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Scrubber.stringify(point3)));
    }
    return domPoint;
  },
  /**
   * Find a native DOM range from a Slate `range`.
   *
   * Notice: the returned range will always be ordinal regardless of the direction of Slate `range` due to DOM API limit.
   *
   * there is no way to create a reverse DOM Range using Range.setStart/setEnd
   * according to https://dom.spec.whatwg.org/#concept-range-bp-set.
   */
  toDOMRange(editor, range2) {
    var {
      anchor,
      focus
    } = range2;
    var isBackward = Range.isBackward(range2);
    var domAnchor = ReactEditor.toDOMPoint(editor, anchor);
    var domFocus = Range.isCollapsed(range2) ? domAnchor : ReactEditor.toDOMPoint(editor, focus);
    var window2 = ReactEditor.getWindow(editor);
    var domRange = window2.document.createRange();
    var [startNode, startOffset] = isBackward ? domFocus : domAnchor;
    var [endNode, endOffset] = isBackward ? domAnchor : domFocus;
    var startEl = isDOMElement(startNode) ? startNode : startNode.parentElement;
    var isStartAtZeroWidth = !!startEl.getAttribute("data-slate-zero-width");
    var endEl = isDOMElement(endNode) ? endNode : endNode.parentElement;
    var isEndAtZeroWidth = !!endEl.getAttribute("data-slate-zero-width");
    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset);
    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset);
    return domRange;
  },
  /**
   * Find a Slate node from a native DOM `element`.
   */
  toSlateNode(editor, domNode) {
    var domEl = isDOMElement(domNode) ? domNode : domNode.parentElement;
    if (domEl && !domEl.hasAttribute("data-slate-node")) {
      domEl = domEl.closest("[data-slate-node]");
    }
    var node3 = domEl ? ELEMENT_TO_NODE.get(domEl) : null;
    if (!node3) {
      throw new Error("Cannot resolve a Slate node from DOM node: ".concat(domEl));
    }
    return node3;
  },
  /**
   * Get the target range from a DOM `event`.
   */
  findEventRange(editor, event) {
    if ("nativeEvent" in event) {
      event = event.nativeEvent;
    }
    var {
      clientX: x,
      clientY: y,
      target
    } = event;
    if (x == null || y == null) {
      throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(event));
    }
    var node3 = ReactEditor.toSlateNode(editor, event.target);
    var path3 = ReactEditor.findPath(editor, node3);
    if (Element2.isElement(node3) && Editor.isVoid(editor, node3)) {
      var rect = target.getBoundingClientRect();
      var isPrev = editor.isInline(node3) ? x - rect.left < rect.left + rect.width - x : y - rect.top < rect.top + rect.height - y;
      var edge = Editor.point(editor, path3, {
        edge: isPrev ? "start" : "end"
      });
      var point3 = isPrev ? Editor.before(editor, edge) : Editor.after(editor, edge);
      if (point3) {
        var _range = Editor.range(editor, point3);
        return _range;
      }
    }
    var domRange;
    var {
      document: document2
    } = ReactEditor.getWindow(editor);
    if (document2.caretRangeFromPoint) {
      domRange = document2.caretRangeFromPoint(x, y);
    } else {
      var position = document2.caretPositionFromPoint(x, y);
      if (position) {
        domRange = document2.createRange();
        domRange.setStart(position.offsetNode, position.offset);
        domRange.setEnd(position.offsetNode, position.offset);
      }
    }
    if (!domRange) {
      throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(event));
    }
    var range2 = ReactEditor.toSlateRange(editor, domRange, {
      exactMatch: false,
      suppressThrow: false
    });
    return range2;
  },
  /**
   * Find a Slate point from a DOM selection's `domNode` and `domOffset`.
   */
  toSlatePoint(editor, domPoint, options) {
    var {
      exactMatch,
      suppressThrow
    } = options;
    var [nearestNode, nearestOffset] = exactMatch ? domPoint : normalizeDOMPoint(domPoint);
    var parentNode = nearestNode.parentNode;
    var textNode = null;
    var offset = 0;
    if (parentNode) {
      var _domNode$textContent, _domNode$textContent2;
      var editorEl = ReactEditor.toDOMNode(editor, editor);
      var potentialVoidNode = parentNode.closest('[data-slate-void="true"]');
      var voidNode = potentialVoidNode && editorEl.contains(potentialVoidNode) ? potentialVoidNode : null;
      var leafNode = parentNode.closest("[data-slate-leaf]");
      var domNode = null;
      if (leafNode) {
        textNode = leafNode.closest('[data-slate-node="text"]');
        if (textNode) {
          var window2 = ReactEditor.getWindow(editor);
          var range2 = window2.document.createRange();
          range2.setStart(textNode, 0);
          range2.setEnd(nearestNode, nearestOffset);
          var contents = range2.cloneContents();
          var removals = [...Array.prototype.slice.call(contents.querySelectorAll("[data-slate-zero-width]")), ...Array.prototype.slice.call(contents.querySelectorAll("[contenteditable=false]"))];
          removals.forEach((el) => {
            if (IS_ANDROID && !exactMatch && el.hasAttribute("data-slate-zero-width") && el.textContent.length > 0 && el.textContext !== "\uFEFF") {
              if (el.textContent.startsWith("\uFEFF")) {
                el.textContent = el.textContent.slice(1);
              }
              return;
            }
            el.parentNode.removeChild(el);
          });
          offset = contents.textContent.length;
          domNode = textNode;
        }
      } else if (voidNode) {
        var leafNodes = voidNode.querySelectorAll("[data-slate-leaf]");
        for (var index = 0; index < leafNodes.length; index++) {
          var current2 = leafNodes[index];
          if (ReactEditor.hasDOMNode(editor, current2)) {
            leafNode = current2;
            break;
          }
        }
        if (!leafNode) {
          offset = 1;
        } else {
          textNode = leafNode.closest('[data-slate-node="text"]');
          domNode = leafNode;
          offset = domNode.textContent.length;
          domNode.querySelectorAll("[data-slate-zero-width]").forEach((el) => {
            offset -= el.textContent.length;
          });
        }
      }
      if (domNode && offset === domNode.textContent.length && // COMPAT: Android IMEs might remove the zero width space while composing,
      // and we don't add it for line-breaks.
      IS_ANDROID && domNode.getAttribute("data-slate-zero-width") === "z" && (_domNode$textContent = domNode.textContent) !== null && _domNode$textContent !== void 0 && _domNode$textContent.startsWith("\uFEFF") && (parentNode.hasAttribute("data-slate-zero-width") || IS_FIREFOX && (_domNode$textContent2 = domNode.textContent) !== null && _domNode$textContent2 !== void 0 && _domNode$textContent2.endsWith("\n\n"))) {
        offset--;
      }
    }
    if (IS_ANDROID && !textNode && !exactMatch) {
      var node3 = parentNode.hasAttribute("data-slate-node") ? parentNode : parentNode.closest("[data-slate-node]");
      if (node3 && ReactEditor.hasDOMNode(editor, node3, {
        editable: true
      })) {
        var _slateNode = ReactEditor.toSlateNode(editor, node3);
        var {
          path: _path,
          offset: _offset
        } = Editor.start(editor, ReactEditor.findPath(editor, _slateNode));
        if (!node3.querySelector("[data-slate-leaf]")) {
          _offset = nearestOffset;
        }
        return {
          path: _path,
          offset: _offset
        };
      }
    }
    if (!textNode) {
      if (suppressThrow) {
        return null;
      }
      throw new Error("Cannot resolve a Slate point from DOM point: ".concat(domPoint));
    }
    var slateNode = ReactEditor.toSlateNode(editor, textNode);
    var path3 = ReactEditor.findPath(editor, slateNode);
    return {
      path: path3,
      offset
    };
  },
  /**
   * Find a Slate range from a DOM range or selection.
   */
  toSlateRange(editor, domRange, options) {
    var {
      exactMatch,
      suppressThrow
    } = options;
    var el = isDOMSelection(domRange) ? domRange.anchorNode : domRange.startContainer;
    var anchorNode;
    var anchorOffset;
    var focusNode;
    var focusOffset;
    var isCollapsed;
    if (el) {
      if (isDOMSelection(domRange)) {
        anchorNode = domRange.anchorNode;
        anchorOffset = domRange.anchorOffset;
        focusNode = domRange.focusNode;
        focusOffset = domRange.focusOffset;
        if (IS_CHROME && hasShadowRoot(anchorNode)) {
          isCollapsed = domRange.anchorNode === domRange.focusNode && domRange.anchorOffset === domRange.focusOffset;
        } else {
          isCollapsed = domRange.isCollapsed;
        }
      } else {
        anchorNode = domRange.startContainer;
        anchorOffset = domRange.startOffset;
        focusNode = domRange.endContainer;
        focusOffset = domRange.endOffset;
        isCollapsed = domRange.collapsed;
      }
    }
    if (anchorNode == null || focusNode == null || anchorOffset == null || focusOffset == null) {
      throw new Error("Cannot resolve a Slate range from DOM range: ".concat(domRange));
    }
    var anchor = ReactEditor.toSlatePoint(editor, [anchorNode, anchorOffset], {
      exactMatch,
      suppressThrow
    });
    if (!anchor) {
      return null;
    }
    var focus = isCollapsed ? anchor : ReactEditor.toSlatePoint(editor, [focusNode, focusOffset], {
      exactMatch,
      suppressThrow
    });
    if (!focus) {
      return null;
    }
    if (IS_FIREFOX && !isCollapsed && anchorNode !== focusNode) {
      var isEnd2 = Editor.isEnd(editor, anchor, anchor.path);
      var isStart2 = Editor.isStart(editor, focus, focus.path);
      if (isEnd2) {
        var after3 = Editor.after(editor, anchor);
        anchor = after3 || anchor;
      }
      if (isStart2) {
        var before3 = Editor.before(editor, focus);
        focus = before3 || focus;
      }
    }
    var range2 = {
      anchor,
      focus
    };
    if (Range.isExpanded(range2) && Range.isForward(range2) && isDOMElement(focusNode) && Editor.void(editor, {
      at: range2.focus,
      mode: "highest"
    })) {
      range2 = Editor.unhangRange(editor, range2, {
        voids: true
      });
    }
    return range2;
  },
  hasRange(editor, range2) {
    var {
      anchor,
      focus
    } = range2;
    return Editor.hasPath(editor, anchor.path) && Editor.hasPath(editor, focus.path);
  },
  /**
   * Check if the target is in the editor.
   */
  hasTarget(editor, target) {
    return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target);
  },
  /**
   * Check if the target is editable and in the editor.
   */
  hasEditableTarget(editor, target) {
    return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target, {
      editable: true
    });
  },
  /**
   * Check if the target can be selectable
   */
  hasSelectableTarget(editor, target) {
    return ReactEditor.hasEditableTarget(editor, target) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, target);
  },
  /**
   * Check if the target is inside void and in an non-readonly editor.
   */
  isTargetInsideNonReadonlyVoid(editor, target) {
    if (IS_READ_ONLY.get(editor))
      return false;
    var slateNode = ReactEditor.hasTarget(editor, target) && ReactEditor.toSlateNode(editor, target);
    return Element2.isElement(slateNode) && Editor.isVoid(editor, slateNode);
  },
  /**
   * Experimental and android specific: Flush all pending diffs and cancel composition at the next possible time.
   */
  androidScheduleFlush(editor) {
    var _EDITOR_TO_SCHEDULE_F;
    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(editor)) === null || _EDITOR_TO_SCHEDULE_F === void 0 ? void 0 : _EDITOR_TO_SCHEDULE_F();
  },
  /**
   * Experimental and android specific: Get pending diffs
   */
  androidPendingDiffs(editor) {
    return EDITOR_TO_PENDING_DIFFS.get(editor);
  }
};
var useIsomorphicLayoutEffect = CAN_USE_DOM ? import_react.useLayoutEffect : import_react.useEffect;
var _excluded$32 = ["anchor", "focus"];
var _excluded2$12 = ["anchor", "focus"];
var shallowCompare = (obj1, obj2) => Object.keys(obj1).length === Object.keys(obj2).length && Object.keys(obj1).every((key) => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]);
var isDecoratorRangeListEqual = (list, another) => {
  if (list.length !== another.length) {
    return false;
  }
  for (var i2 = 0; i2 < list.length; i2++) {
    var range2 = list[i2];
    var other = another[i2];
    var rangeOwnProps = _objectWithoutProperties2(range2, _excluded$32);
    var otherOwnProps = _objectWithoutProperties2(other, _excluded2$12);
    if (!Range.equals(range2, other) || range2[PLACEHOLDER_SYMBOL] !== other[PLACEHOLDER_SYMBOL] || !shallowCompare(rangeOwnProps, otherOwnProps)) {
      return false;
    }
  }
  return true;
};
var String2 = (props) => {
  var {
    isLast,
    leaf: leaf3,
    parent: parent3,
    text
  } = props;
  var editor = useSlateStatic();
  var path3 = ReactEditor.findPath(editor, text);
  var parentPath = Path.parent(path3);
  var isMarkPlaceholder = leaf3[MARK_PLACEHOLDER_SYMBOL] === true;
  if (editor.isVoid(parent3)) {
    return /* @__PURE__ */ import_react.default.createElement(ZeroWidthString, {
      length: Node.string(parent3).length
    });
  }
  if (leaf3.text === "" && parent3.children[parent3.children.length - 1] === text && !editor.isInline(parent3) && Editor.string(editor, parentPath) === "") {
    return /* @__PURE__ */ import_react.default.createElement(ZeroWidthString, {
      isLineBreak: true,
      isMarkPlaceholder
    });
  }
  if (leaf3.text === "") {
    return /* @__PURE__ */ import_react.default.createElement(ZeroWidthString, {
      isMarkPlaceholder
    });
  }
  if (isLast && leaf3.text.slice(-1) === "\n") {
    return /* @__PURE__ */ import_react.default.createElement(TextString, {
      isTrailing: true,
      text: leaf3.text
    });
  }
  return /* @__PURE__ */ import_react.default.createElement(TextString, {
    text: leaf3.text
  });
};
var TextString = (props) => {
  var {
    text,
    isTrailing = false
  } = props;
  var ref = (0, import_react.useRef)(null);
  var getTextContent = () => {
    return "".concat(text !== null && text !== void 0 ? text : "").concat(isTrailing ? "\n" : "");
  };
  useIsomorphicLayoutEffect(() => {
    var textWithTrailing = getTextContent();
    if (ref.current && ref.current.textContent !== textWithTrailing) {
      ref.current.textContent = textWithTrailing;
    }
  });
  if (!ref.current) {
    return /* @__PURE__ */ import_react.default.createElement("span", {
      "data-slate-string": true,
      ref
    }, getTextContent());
  }
  return /* @__PURE__ */ import_react.default.createElement("span", {
    "data-slate-string": true,
    ref
  });
};
var ZeroWidthString = (props) => {
  var {
    length = 0,
    isLineBreak = false,
    isMarkPlaceholder = false
  } = props;
  var attributes = {
    "data-slate-zero-width": isLineBreak ? "n" : "z",
    "data-slate-length": length
  };
  if (isMarkPlaceholder) {
    attributes["data-slate-mark-placeholder"] = true;
  }
  return /* @__PURE__ */ import_react.default.createElement("span", Object.assign({}, attributes), !IS_ANDROID || !isLineBreak ? "\uFEFF" : null, isLineBreak ? /* @__PURE__ */ import_react.default.createElement("br", null) : null);
};
var EditorContext = /* @__PURE__ */ (0, import_react.createContext)(null);
var useSlateStatic = () => {
  var editor = (0, import_react.useContext)(EditorContext);
  if (!editor) {
    throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");
  }
  return editor;
};
var Leaf = (props) => {
  var {
    leaf: leaf3,
    isLast,
    text,
    parent: parent3,
    renderPlaceholder,
    renderLeaf = (props2) => /* @__PURE__ */ import_react.default.createElement(DefaultLeaf, Object.assign({}, props2))
  } = props;
  var lastPlaceholderRef = (0, import_react.useRef)(null);
  var placeholderRef = (0, import_react.useRef)(null);
  var editor = useSlateStatic();
  var placeholderResizeObserver = (0, import_react.useRef)(null);
  (0, import_react.useEffect)(() => {
    return () => {
      if (placeholderResizeObserver.current) {
        placeholderResizeObserver.current.disconnect();
      }
    };
  }, []);
  (0, import_react.useEffect)(() => {
    var placeholderEl = placeholderRef === null || placeholderRef === void 0 ? void 0 : placeholderRef.current;
    if (placeholderEl) {
      EDITOR_TO_PLACEHOLDER_ELEMENT.set(editor, placeholderEl);
    } else {
      EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor);
    }
    if (placeholderResizeObserver.current) {
      placeholderResizeObserver.current.disconnect();
      if (placeholderEl)
        placeholderResizeObserver.current.observe(placeholderEl);
    } else if (placeholderEl) {
      var ResizeObserver$1 = window.ResizeObserver || ResizeObserver;
      placeholderResizeObserver.current = new ResizeObserver$1(() => {
        var forceRender2 = EDITOR_TO_FORCE_RENDER.get(editor);
        forceRender2 === null || forceRender2 === void 0 ? void 0 : forceRender2();
      });
      placeholderResizeObserver.current.observe(placeholderEl);
    }
    if (!placeholderEl && lastPlaceholderRef.current) {
      var forceRender = EDITOR_TO_FORCE_RENDER.get(editor);
      forceRender === null || forceRender === void 0 ? void 0 : forceRender();
    }
    lastPlaceholderRef.current = placeholderRef.current;
    return () => {
      EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor);
    };
  }, [placeholderRef, leaf3]);
  var children = /* @__PURE__ */ import_react.default.createElement(String2, {
    isLast,
    leaf: leaf3,
    parent: parent3,
    text
  });
  if (leaf3[PLACEHOLDER_SYMBOL]) {
    var placeholderProps = {
      children: leaf3.placeholder,
      attributes: {
        "data-slate-placeholder": true,
        style: {
          position: "absolute",
          pointerEvents: "none",
          width: "100%",
          maxWidth: "100%",
          display: "block",
          opacity: "0.333",
          userSelect: "none",
          textDecoration: "none"
        },
        contentEditable: false,
        ref: placeholderRef
      }
    };
    children = /* @__PURE__ */ import_react.default.createElement(import_react.default.Fragment, null, renderPlaceholder(placeholderProps), children);
  }
  var attributes = {
    "data-slate-leaf": true
  };
  return renderLeaf({
    attributes,
    children,
    leaf: leaf3,
    text
  });
};
var MemoizedLeaf = /* @__PURE__ */ import_react.default.memo(Leaf, (prev, next3) => {
  return next3.parent === prev.parent && next3.isLast === prev.isLast && next3.renderLeaf === prev.renderLeaf && next3.renderPlaceholder === prev.renderPlaceholder && next3.text === prev.text && Text.equals(next3.leaf, prev.leaf) && next3.leaf[PLACEHOLDER_SYMBOL] === prev.leaf[PLACEHOLDER_SYMBOL];
});
var DefaultLeaf = (props) => {
  var {
    attributes,
    children
  } = props;
  return /* @__PURE__ */ import_react.default.createElement("span", Object.assign({}, attributes), children);
};
var Text2 = (props) => {
  var {
    decorations,
    isLast,
    parent: parent3,
    renderPlaceholder,
    renderLeaf,
    text
  } = props;
  var editor = useSlateStatic();
  var ref = (0, import_react.useRef)(null);
  var leaves = Text.decorations(text, decorations);
  var key = ReactEditor.findKey(editor, text);
  var children = [];
  for (var i2 = 0; i2 < leaves.length; i2++) {
    var leaf3 = leaves[i2];
    children.push(/* @__PURE__ */ import_react.default.createElement(MemoizedLeaf, {
      isLast: isLast && i2 === leaves.length - 1,
      key: "".concat(key.id, "-").concat(i2),
      renderPlaceholder,
      leaf: leaf3,
      text,
      parent: parent3,
      renderLeaf
    }));
  }
  useIsomorphicLayoutEffect(() => {
    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);
    if (ref.current) {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.set(key, ref.current);
      NODE_TO_ELEMENT.set(text, ref.current);
      ELEMENT_TO_NODE.set(ref.current, text);
    } else {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.delete(key);
      NODE_TO_ELEMENT.delete(text);
    }
  });
  return /* @__PURE__ */ import_react.default.createElement("span", {
    "data-slate-node": "text",
    ref
  }, children);
};
var MemoizedText = /* @__PURE__ */ import_react.default.memo(Text2, (prev, next3) => {
  return next3.parent === prev.parent && next3.isLast === prev.isLast && next3.renderLeaf === prev.renderLeaf && next3.text === prev.text && isDecoratorRangeListEqual(next3.decorations, prev.decorations);
});
var Element3 = (props) => {
  var {
    decorations,
    element,
    renderElement = (p) => /* @__PURE__ */ import_react.default.createElement(DefaultElement, Object.assign({}, p)),
    renderPlaceholder,
    renderLeaf,
    selection
  } = props;
  var editor = useSlateStatic();
  var readOnly = useReadOnly();
  var isInline2 = editor.isInline(element);
  var key = ReactEditor.findKey(editor, element);
  var ref = (0, import_react.useCallback)((ref2) => {
    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);
    if (ref2) {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.set(key, ref2);
      NODE_TO_ELEMENT.set(element, ref2);
      ELEMENT_TO_NODE.set(ref2, element);
    } else {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.delete(key);
      NODE_TO_ELEMENT.delete(element);
    }
  }, [editor, key, element]);
  var children = useChildren({
    decorations,
    node: element,
    renderElement,
    renderPlaceholder,
    renderLeaf,
    selection
  });
  var attributes = {
    "data-slate-node": "element",
    ref
  };
  if (isInline2) {
    attributes["data-slate-inline"] = true;
  }
  if (!isInline2 && Editor.hasInlines(editor, element)) {
    var text = Node.string(element);
    var dir = (0, import_direction.default)(text);
    if (dir === "rtl") {
      attributes.dir = dir;
    }
  }
  if (Editor.isVoid(editor, element)) {
    attributes["data-slate-void"] = true;
    if (!readOnly && isInline2) {
      attributes.contentEditable = false;
    }
    var Tag = isInline2 ? "span" : "div";
    var [[_text]] = Node.texts(element);
    children = /* @__PURE__ */ import_react.default.createElement(Tag, {
      "data-slate-spacer": true,
      style: {
        height: "0",
        color: "transparent",
        outline: "none",
        position: "absolute"
      }
    }, /* @__PURE__ */ import_react.default.createElement(MemoizedText, {
      renderPlaceholder,
      decorations: [],
      isLast: false,
      parent: element,
      text: _text
    }));
    NODE_TO_INDEX.set(_text, 0);
    NODE_TO_PARENT.set(_text, element);
  }
  return renderElement({
    attributes,
    children,
    element
  });
};
var MemoizedElement = /* @__PURE__ */ import_react.default.memo(Element3, (prev, next3) => {
  return prev.element === next3.element && prev.renderElement === next3.renderElement && prev.renderLeaf === next3.renderLeaf && isDecoratorRangeListEqual(prev.decorations, next3.decorations) && (prev.selection === next3.selection || !!prev.selection && !!next3.selection && Range.equals(prev.selection, next3.selection));
});
var DefaultElement = (props) => {
  var {
    attributes,
    children,
    element
  } = props;
  var editor = useSlateStatic();
  var Tag = editor.isInline(element) ? "span" : "div";
  return /* @__PURE__ */ import_react.default.createElement(Tag, Object.assign({}, attributes, {
    style: {
      position: "relative"
    }
  }), children);
};
var DecorateContext = /* @__PURE__ */ (0, import_react.createContext)(() => []);
var useDecorate = () => {
  return (0, import_react.useContext)(DecorateContext);
};
var SelectedContext = /* @__PURE__ */ (0, import_react.createContext)(false);
var useChildren = (props) => {
  var {
    decorations,
    node: node3,
    renderElement,
    renderPlaceholder,
    renderLeaf,
    selection
  } = props;
  var decorate = useDecorate();
  var editor = useSlateStatic();
  var path3 = ReactEditor.findPath(editor, node3);
  var children = [];
  var isLeafBlock = Element2.isElement(node3) && !editor.isInline(node3) && Editor.hasInlines(editor, node3);
  for (var i2 = 0; i2 < node3.children.length; i2++) {
    var p = path3.concat(i2);
    var n3 = node3.children[i2];
    var key = ReactEditor.findKey(editor, n3);
    var range2 = Editor.range(editor, p);
    var sel = selection && Range.intersection(range2, selection);
    var ds = decorate([n3, p]);
    for (var dec of decorations) {
      var d = Range.intersection(dec, range2);
      if (d) {
        ds.push(d);
      }
    }
    if (Element2.isElement(n3)) {
      children.push(/* @__PURE__ */ import_react.default.createElement(SelectedContext.Provider, {
        key: "provider-".concat(key.id),
        value: !!sel
      }, /* @__PURE__ */ import_react.default.createElement(MemoizedElement, {
        decorations: ds,
        element: n3,
        key: key.id,
        renderElement,
        renderPlaceholder,
        renderLeaf,
        selection: sel
      })));
    } else {
      children.push(/* @__PURE__ */ import_react.default.createElement(MemoizedText, {
        decorations: ds,
        key: key.id,
        isLast: isLeafBlock && i2 === node3.children.length - 1,
        parent: node3,
        renderPlaceholder,
        renderLeaf,
        text: n3
      }));
    }
    NODE_TO_INDEX.set(n3, i2);
    NODE_TO_PARENT.set(n3, node3);
  }
  return children;
};
var ReadOnlyContext = /* @__PURE__ */ (0, import_react.createContext)(false);
var useReadOnly = () => {
  return (0, import_react.useContext)(ReadOnlyContext);
};
var SlateContext = /* @__PURE__ */ (0, import_react.createContext)(null);
var useSlate = () => {
  var context = (0, import_react.useContext)(SlateContext);
  if (!context) {
    throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");
  }
  var {
    editor
  } = context;
  return editor;
};
var TRIPLE_CLICK = 3;
var HOTKEYS = {
  bold: "mod+b",
  compose: ["down", "left", "right", "up", "backspace", "enter"],
  moveBackward: "left",
  moveForward: "right",
  moveWordBackward: "ctrl+left",
  moveWordForward: "ctrl+right",
  deleteBackward: "shift?+backspace",
  deleteForward: "shift?+delete",
  extendBackward: "shift+left",
  extendForward: "shift+right",
  italic: "mod+i",
  insertSoftBreak: "shift+enter",
  splitBlock: "enter",
  undo: "mod+z"
};
var APPLE_HOTKEYS = {
  moveLineBackward: "opt+up",
  moveLineForward: "opt+down",
  moveWordBackward: "opt+left",
  moveWordForward: "opt+right",
  deleteBackward: ["ctrl+backspace", "ctrl+h"],
  deleteForward: ["ctrl+delete", "ctrl+d"],
  deleteLineBackward: "cmd+shift?+backspace",
  deleteLineForward: ["cmd+shift?+delete", "ctrl+k"],
  deleteWordBackward: "opt+shift?+backspace",
  deleteWordForward: "opt+shift?+delete",
  extendLineBackward: "opt+shift+up",
  extendLineForward: "opt+shift+down",
  redo: "cmd+shift+z",
  transposeCharacter: "ctrl+t"
};
var WINDOWS_HOTKEYS = {
  deleteWordBackward: "ctrl+shift?+backspace",
  deleteWordForward: "ctrl+shift?+delete",
  redo: ["ctrl+y", "ctrl+shift+z"]
};
var create = (key) => {
  var generic = HOTKEYS[key];
  var apple = APPLE_HOTKEYS[key];
  var windows = WINDOWS_HOTKEYS[key];
  var isGeneric = generic && (0, import_is_hotkey.isKeyHotkey)(generic);
  var isApple = apple && (0, import_is_hotkey.isKeyHotkey)(apple);
  var isWindows = windows && (0, import_is_hotkey.isKeyHotkey)(windows);
  return (event) => {
    if (isGeneric && isGeneric(event))
      return true;
    if (IS_APPLE && isApple && isApple(event))
      return true;
    if (!IS_APPLE && isWindows && isWindows(event))
      return true;
    return false;
  };
};
var Hotkeys = {
  isBold: create("bold"),
  isCompose: create("compose"),
  isMoveBackward: create("moveBackward"),
  isMoveForward: create("moveForward"),
  isDeleteBackward: create("deleteBackward"),
  isDeleteForward: create("deleteForward"),
  isDeleteLineBackward: create("deleteLineBackward"),
  isDeleteLineForward: create("deleteLineForward"),
  isDeleteWordBackward: create("deleteWordBackward"),
  isDeleteWordForward: create("deleteWordForward"),
  isExtendBackward: create("extendBackward"),
  isExtendForward: create("extendForward"),
  isExtendLineBackward: create("extendLineBackward"),
  isExtendLineForward: create("extendLineForward"),
  isItalic: create("italic"),
  isMoveLineBackward: create("moveLineBackward"),
  isMoveLineForward: create("moveLineForward"),
  isMoveWordBackward: create("moveWordBackward"),
  isMoveWordForward: create("moveWordForward"),
  isRedo: create("redo"),
  isSoftBreak: create("insertSoftBreak"),
  isSplitBlock: create("splitBlock"),
  isTransposeCharacter: create("transposeCharacter"),
  isUndo: create("undo")
};
var createRestoreDomManager = (editor, receivedUserInput) => {
  var bufferedMutations = [];
  var clear = () => {
    bufferedMutations = [];
  };
  var registerMutations = (mutations) => {
    if (!receivedUserInput.current) {
      return;
    }
    var trackedMutations = mutations.filter((mutation) => isTrackedMutation(editor, mutation, mutations));
    bufferedMutations.push(...trackedMutations);
  };
  function restoreDOM() {
    bufferedMutations.reverse().forEach((mutation) => {
      if (mutation.type === "characterData") {
        mutation.target.textContent = mutation.oldValue;
        return;
      }
      mutation.removedNodes.forEach((node3) => {
        mutation.target.insertBefore(node3, mutation.nextSibling);
      });
      mutation.addedNodes.forEach((node3) => {
        mutation.target.removeChild(node3);
      });
    });
    clear();
  }
  return {
    registerMutations,
    restoreDOM,
    clear
  };
};
var MUTATION_OBSERVER_CONFIG$1 = {
  subtree: true,
  childList: true,
  characterData: true,
  characterDataOldValue: true
};
var RestoreDOMComponent = class extends import_react.Component {
  constructor() {
    super(...arguments);
    this.context = null;
    this.manager = null;
    this.mutationObserver = null;
  }
  observe() {
    var _this$mutationObserve;
    var {
      node: node3
    } = this.props;
    if (!node3.current) {
      throw new Error("Failed to attach MutationObserver, `node` is undefined");
    }
    (_this$mutationObserve = this.mutationObserver) === null || _this$mutationObserve === void 0 ? void 0 : _this$mutationObserve.observe(node3.current, MUTATION_OBSERVER_CONFIG$1);
  }
  componentDidMount() {
    var {
      receivedUserInput
    } = this.props;
    var editor = this.context;
    this.manager = createRestoreDomManager(editor, receivedUserInput);
    this.mutationObserver = new MutationObserver(this.manager.registerMutations);
    this.observe();
  }
  getSnapshotBeforeUpdate() {
    var _this$mutationObserve2, _this$mutationObserve3, _this$manager2;
    var pendingMutations = (_this$mutationObserve2 = this.mutationObserver) === null || _this$mutationObserve2 === void 0 ? void 0 : _this$mutationObserve2.takeRecords();
    if (pendingMutations !== null && pendingMutations !== void 0 && pendingMutations.length) {
      var _this$manager;
      (_this$manager = this.manager) === null || _this$manager === void 0 ? void 0 : _this$manager.registerMutations(pendingMutations);
    }
    (_this$mutationObserve3 = this.mutationObserver) === null || _this$mutationObserve3 === void 0 ? void 0 : _this$mutationObserve3.disconnect();
    (_this$manager2 = this.manager) === null || _this$manager2 === void 0 ? void 0 : _this$manager2.restoreDOM();
    return null;
  }
  componentDidUpdate() {
    var _this$manager3;
    (_this$manager3 = this.manager) === null || _this$manager3 === void 0 ? void 0 : _this$manager3.clear();
    this.observe();
  }
  componentWillUnmount() {
    var _this$mutationObserve4;
    (_this$mutationObserve4 = this.mutationObserver) === null || _this$mutationObserve4 === void 0 ? void 0 : _this$mutationObserve4.disconnect();
  }
  render() {
    return this.props.children;
  }
};
RestoreDOMComponent.contextType = EditorContext;
var RestoreDOM = IS_ANDROID ? RestoreDOMComponent : (_ref) => {
  var {
    children
  } = _ref;
  return /* @__PURE__ */ import_react.default.createElement(import_react.default.Fragment, null, children);
};
function verifyDiffState(editor, textDiff) {
  var {
    path: path3,
    diff
  } = textDiff;
  if (!Editor.hasPath(editor, path3)) {
    return false;
  }
  var node3 = Node.get(editor, path3);
  if (!Text.isText(node3)) {
    return false;
  }
  if (diff.start !== node3.text.length || diff.text.length === 0) {
    return node3.text.slice(diff.start, diff.start + diff.text.length) === diff.text;
  }
  var nextPath = Path.next(path3);
  if (!Editor.hasPath(editor, nextPath)) {
    return false;
  }
  var nextNode = Node.get(editor, nextPath);
  return Text.isText(nextNode) && nextNode.text.startsWith(diff.text);
}
function applyStringDiff(text) {
  for (var _len = arguments.length, diffs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    diffs[_key - 1] = arguments[_key];
  }
  return diffs.reduce((text2, diff) => text2.slice(0, diff.start) + diff.text + text2.slice(diff.end), text);
}
function longestCommonPrefixLength(str, another) {
  var length = Math.min(str.length, another.length);
  for (var i2 = 0; i2 < length; i2++) {
    if (str.charAt(i2) !== another.charAt(i2)) {
      return i2;
    }
  }
  return length;
}
function longestCommonSuffixLength(str, another, max) {
  var length = Math.min(str.length, another.length, max);
  for (var i2 = 0; i2 < length; i2++) {
    if (str.charAt(str.length - i2 - 1) !== another.charAt(another.length - i2 - 1)) {
      return i2;
    }
  }
  return length;
}
function normalizeStringDiff(targetText, diff) {
  var {
    start: start2,
    end: end2,
    text
  } = diff;
  var removedText = targetText.slice(start2, end2);
  var prefixLength = longestCommonPrefixLength(removedText, text);
  var max = Math.min(removedText.length - prefixLength, text.length - prefixLength);
  var suffixLength = longestCommonSuffixLength(removedText, text, max);
  var normalized = {
    start: start2 + prefixLength,
    end: end2 - suffixLength,
    text: text.slice(prefixLength, text.length - suffixLength)
  };
  if (normalized.start === normalized.end && normalized.text.length === 0) {
    return null;
  }
  return normalized;
}
function mergeStringDiffs(targetText, a, b) {
  var start2 = Math.min(a.start, b.start);
  var overlap = Math.max(0, Math.min(a.start + a.text.length, b.end) - b.start);
  var applied = applyStringDiff(targetText, a, b);
  var sliceEnd = Math.max(b.start + b.text.length, a.start + a.text.length + (a.start + a.text.length > b.start ? b.text.length : 0) - overlap);
  var text = applied.slice(start2, sliceEnd);
  var end2 = Math.max(a.end, b.end - a.text.length + (a.end - a.start));
  return normalizeStringDiff(targetText, {
    start: start2,
    end: end2,
    text
  });
}
function targetRange(textDiff) {
  var {
    path: path3,
    diff
  } = textDiff;
  return {
    anchor: {
      path: path3,
      offset: diff.start
    },
    focus: {
      path: path3,
      offset: diff.end
    }
  };
}
function normalizePoint(editor, point3) {
  var {
    path: path3,
    offset
  } = point3;
  if (!Editor.hasPath(editor, path3)) {
    return null;
  }
  var leaf3 = Node.get(editor, path3);
  if (!Text.isText(leaf3)) {
    return null;
  }
  var parentBlock = Editor.above(editor, {
    match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
    at: path3
  });
  if (!parentBlock) {
    return null;
  }
  while (offset > leaf3.text.length) {
    var entry = Editor.next(editor, {
      at: path3,
      match: Text.isText
    });
    if (!entry || !Path.isDescendant(entry[1], parentBlock[1])) {
      return null;
    }
    offset -= leaf3.text.length;
    leaf3 = entry[0];
    path3 = entry[1];
  }
  return {
    path: path3,
    offset
  };
}
function normalizeRange(editor, range2) {
  var anchor = normalizePoint(editor, range2.anchor);
  if (!anchor) {
    return null;
  }
  if (Range.isCollapsed(range2)) {
    return {
      anchor,
      focus: anchor
    };
  }
  var focus = normalizePoint(editor, range2.focus);
  if (!focus) {
    return null;
  }
  return {
    anchor,
    focus
  };
}
function transformPendingPoint(editor, point3, op) {
  var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor);
  var textDiff = pendingDiffs === null || pendingDiffs === void 0 ? void 0 : pendingDiffs.find((_ref) => {
    var {
      path: path3
    } = _ref;
    return Path.equals(path3, point3.path);
  });
  if (!textDiff || point3.offset <= textDiff.diff.start) {
    return Point.transform(point3, op, {
      affinity: "backward"
    });
  }
  var {
    diff
  } = textDiff;
  if (point3.offset <= diff.start + diff.text.length) {
    var _anchor = {
      path: point3.path,
      offset: diff.start
    };
    var _transformed = Point.transform(_anchor, op, {
      affinity: "backward"
    });
    if (!_transformed) {
      return null;
    }
    return {
      path: _transformed.path,
      offset: _transformed.offset + point3.offset - diff.start
    };
  }
  var anchor = {
    path: point3.path,
    offset: point3.offset - diff.text.length + diff.end - diff.start
  };
  var transformed = Point.transform(anchor, op, {
    affinity: "backward"
  });
  if (!transformed) {
    return null;
  }
  if (op.type === "split_node" && Path.equals(op.path, point3.path) && anchor.offset < op.position && diff.start < op.position) {
    return transformed;
  }
  return {
    path: transformed.path,
    offset: transformed.offset + diff.text.length - diff.end + diff.start
  };
}
function transformPendingRange(editor, range2, op) {
  var anchor = transformPendingPoint(editor, range2.anchor, op);
  if (!anchor) {
    return null;
  }
  if (Range.isCollapsed(range2)) {
    return {
      anchor,
      focus: anchor
    };
  }
  var focus = transformPendingPoint(editor, range2.focus, op);
  if (!focus) {
    return null;
  }
  return {
    anchor,
    focus
  };
}
function transformTextDiff(textDiff, op) {
  var {
    path: path3,
    diff,
    id
  } = textDiff;
  switch (op.type) {
    case "insert_text": {
      if (!Path.equals(op.path, path3) || op.offset >= diff.end) {
        return textDiff;
      }
      if (op.offset <= diff.start) {
        return {
          diff: {
            start: op.text.length + diff.start,
            end: op.text.length + diff.end,
            text: diff.text
          },
          id,
          path: path3
        };
      }
      return {
        diff: {
          start: diff.start,
          end: diff.end + op.text.length,
          text: diff.text
        },
        id,
        path: path3
      };
    }
    case "remove_text": {
      if (!Path.equals(op.path, path3) || op.offset >= diff.end) {
        return textDiff;
      }
      if (op.offset + op.text.length <= diff.start) {
        return {
          diff: {
            start: diff.start - op.text.length,
            end: diff.end - op.text.length,
            text: diff.text
          },
          id,
          path: path3
        };
      }
      return {
        diff: {
          start: diff.start,
          end: diff.end - op.text.length,
          text: diff.text
        },
        id,
        path: path3
      };
    }
    case "split_node": {
      if (!Path.equals(op.path, path3) || op.position >= diff.end) {
        return {
          diff,
          id,
          path: Path.transform(path3, op, {
            affinity: "backward"
          })
        };
      }
      if (op.position > diff.start) {
        return {
          diff: {
            start: diff.start,
            end: Math.min(op.position, diff.end),
            text: diff.text
          },
          id,
          path: path3
        };
      }
      return {
        diff: {
          start: diff.start - op.position,
          end: diff.end - op.position,
          text: diff.text
        },
        id,
        path: Path.transform(path3, op, {
          affinity: "forward"
        })
      };
    }
    case "merge_node": {
      if (!Path.equals(op.path, path3)) {
        return {
          diff,
          id,
          path: Path.transform(path3, op)
        };
      }
      return {
        diff: {
          start: diff.start + op.position,
          end: diff.end + op.position,
          text: diff.text
        },
        id,
        path: Path.transform(path3, op)
      };
    }
  }
  var newPath = Path.transform(path3, op);
  if (!newPath) {
    return null;
  }
  return {
    diff,
    path: newPath,
    id
  };
}
function ownKeys$32(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread$32(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys$32(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys$32(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var RESOLVE_DELAY = 25;
var FLUSH_DELAY = 200;
var debug = function debug2() {
};
function createAndroidInputManager(_ref) {
  var {
    editor,
    scheduleOnDOMSelectionChange,
    onDOMSelectionChange
  } = _ref;
  var flushing = false;
  var compositionEndTimeoutId = null;
  var flushTimeoutId = null;
  var actionTimeoutId = null;
  var idCounter = 0;
  var insertPositionHint = false;
  var applyPendingSelection = () => {
    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(editor);
    EDITOR_TO_PENDING_SELECTION.delete(editor);
    if (pendingSelection) {
      var {
        selection
      } = editor;
      var normalized = normalizeRange(editor, pendingSelection);
      if (normalized && (!selection || !Range.equals(normalized, selection))) {
        Transforms.select(editor, normalized);
      }
    }
  };
  var performAction = () => {
    var action = EDITOR_TO_PENDING_ACTION.get(editor);
    EDITOR_TO_PENDING_ACTION.delete(editor);
    if (!action) {
      return;
    }
    if (action.at) {
      var target = Point.isPoint(action.at) ? normalizePoint(editor, action.at) : normalizeRange(editor, action.at);
      if (!target) {
        return;
      }
      var _targetRange = Editor.range(editor, target);
      if (!editor.selection || !Range.equals(editor.selection, _targetRange)) {
        Transforms.select(editor, target);
      }
    }
    action.run();
  };
  var flush = () => {
    var _EDITOR_TO_PENDING_DI;
    if (flushTimeoutId) {
      clearTimeout(flushTimeoutId);
      flushTimeoutId = null;
    }
    if (actionTimeoutId) {
      clearTimeout(actionTimeoutId);
      actionTimeoutId = null;
    }
    if (!hasPendingDiffs() && !hasPendingAction()) {
      applyPendingSelection();
      return;
    }
    if (!flushing) {
      flushing = true;
      setTimeout(() => flushing = false);
    }
    if (hasPendingAction()) {
      flushing = "action";
    }
    var selectionRef = editor.selection && Editor.rangeRef(editor, editor.selection, {
      affinity: "forward"
    });
    EDITOR_TO_USER_MARKS.set(editor, editor.marks);
    debug("flush", EDITOR_TO_PENDING_ACTION.get(editor), EDITOR_TO_PENDING_DIFFS.get(editor));
    var scheduleSelectionChange = !!((_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI !== void 0 && _EDITOR_TO_PENDING_DI.length);
    var diff;
    while (diff = (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI2 === void 0 ? void 0 : _EDITOR_TO_PENDING_DI2[0]) {
      var _EDITOR_TO_PENDING_DI2, _EDITOR_TO_PENDING_DI3;
      var pendingMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);
      if (pendingMarks !== void 0) {
        EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);
        editor.marks = pendingMarks;
      }
      if (pendingMarks && insertPositionHint === false) {
        insertPositionHint = null;
      }
      var range2 = targetRange(diff);
      if (!editor.selection || !Range.equals(editor.selection, range2)) {
        Transforms.select(editor, range2);
      }
      if (diff.diff.text) {
        Editor.insertText(editor, diff.diff.text);
      } else {
        Editor.deleteFragment(editor);
      }
      EDITOR_TO_PENDING_DIFFS.set(editor, (_EDITOR_TO_PENDING_DI3 = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI3 === void 0 ? void 0 : _EDITOR_TO_PENDING_DI3.filter((_ref2) => {
        var {
          id
        } = _ref2;
        return id !== diff.id;
      }));
      if (!verifyDiffState(editor, diff)) {
        scheduleSelectionChange = false;
        EDITOR_TO_PENDING_ACTION.delete(editor);
        EDITOR_TO_USER_MARKS.delete(editor);
        flushing = "action";
        EDITOR_TO_PENDING_SELECTION.delete(editor);
        scheduleOnDOMSelectionChange.cancel();
        onDOMSelectionChange.cancel();
        selectionRef === null || selectionRef === void 0 ? void 0 : selectionRef.unref();
      }
    }
    var selection = selectionRef === null || selectionRef === void 0 ? void 0 : selectionRef.unref();
    if (selection && !EDITOR_TO_PENDING_SELECTION.get(editor) && (!editor.selection || !Range.equals(selection, editor.selection))) {
      Transforms.select(editor, selection);
    }
    if (hasPendingAction()) {
      performAction();
      return;
    }
    if (scheduleSelectionChange) {
      scheduleOnDOMSelectionChange();
    }
    scheduleOnDOMSelectionChange.flush();
    onDOMSelectionChange.flush();
    applyPendingSelection();
    var userMarks = EDITOR_TO_USER_MARKS.get(editor);
    EDITOR_TO_USER_MARKS.delete(editor);
    if (userMarks !== void 0) {
      editor.marks = userMarks;
      editor.onChange();
    }
  };
  var handleCompositionEnd = (_event) => {
    if (compositionEndTimeoutId) {
      clearTimeout(compositionEndTimeoutId);
    }
    compositionEndTimeoutId = setTimeout(() => {
      IS_COMPOSING.set(editor, false);
      flush();
    }, RESOLVE_DELAY);
  };
  var handleCompositionStart = (_event) => {
    IS_COMPOSING.set(editor, true);
    if (compositionEndTimeoutId) {
      clearTimeout(compositionEndTimeoutId);
      compositionEndTimeoutId = null;
    }
  };
  var updatePlaceholderVisibility = function updatePlaceholderVisibility2() {
    var forceHide = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
    var placeholderElement = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor);
    if (!placeholderElement) {
      return;
    }
    if (hasPendingDiffs() || forceHide) {
      placeholderElement.style.display = "none";
      return;
    }
    placeholderElement.style.removeProperty("display");
  };
  var storeDiff = (path3, diff) => {
    var _EDITOR_TO_PENDING_DI4;
    var pendingDiffs = (_EDITOR_TO_PENDING_DI4 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI4 !== void 0 ? _EDITOR_TO_PENDING_DI4 : [];
    EDITOR_TO_PENDING_DIFFS.set(editor, pendingDiffs);
    var target = Node.leaf(editor, path3);
    var idx = pendingDiffs.findIndex((change) => Path.equals(change.path, path3));
    if (idx < 0) {
      var normalized = normalizeStringDiff(target.text, diff);
      if (normalized) {
        pendingDiffs.push({
          path: path3,
          diff,
          id: idCounter++
        });
      }
      updatePlaceholderVisibility();
      return;
    }
    var merged = mergeStringDiffs(target.text, pendingDiffs[idx].diff, diff);
    if (!merged) {
      pendingDiffs.splice(idx, 1);
      updatePlaceholderVisibility();
      return;
    }
    pendingDiffs[idx] = _objectSpread$32(_objectSpread$32({}, pendingDiffs[idx]), {}, {
      diff: merged
    });
  };
  var scheduleAction = function scheduleAction2(run) {
    var {
      at
    } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    insertPositionHint = false;
    EDITOR_TO_PENDING_SELECTION.delete(editor);
    scheduleOnDOMSelectionChange.cancel();
    onDOMSelectionChange.cancel();
    if (hasPendingAction()) {
      flush();
    }
    EDITOR_TO_PENDING_ACTION.set(editor, {
      at,
      run
    });
    actionTimeoutId = setTimeout(flush);
  };
  var handleDOMBeforeInput = (event) => {
    var _targetRange2;
    if (flushTimeoutId) {
      clearTimeout(flushTimeoutId);
      flushTimeoutId = null;
    }
    var {
      inputType: type
    } = event;
    var targetRange2 = null;
    var data = event.dataTransfer || event.data || void 0;
    if (insertPositionHint !== false && type !== "insertText" && type !== "insertCompositionText") {
      insertPositionHint = false;
    }
    var [nativeTargetRange] = event.getTargetRanges();
    if (nativeTargetRange) {
      targetRange2 = ReactEditor.toSlateRange(editor, nativeTargetRange, {
        exactMatch: false,
        suppressThrow: true
      });
    }
    var window2 = ReactEditor.getWindow(editor);
    var domSelection = window2.getSelection();
    if (!targetRange2 && domSelection) {
      nativeTargetRange = domSelection;
      targetRange2 = ReactEditor.toSlateRange(editor, domSelection, {
        exactMatch: false,
        suppressThrow: true
      });
    }
    targetRange2 = (_targetRange2 = targetRange2) !== null && _targetRange2 !== void 0 ? _targetRange2 : editor.selection;
    if (!targetRange2) {
      return;
    }
    if (Range.isExpanded(targetRange2) && type.startsWith("delete")) {
      var [start2, end2] = Range.edges(targetRange2);
      var leaf3 = Node.leaf(editor, start2.path);
      if (leaf3.text.length === start2.offset && end2.offset === 0) {
        var next3 = Editor.next(editor, {
          at: start2.path,
          match: Text.isText
        });
        if (next3 && Path.equals(next3[1], end2.path)) {
          targetRange2 = {
            anchor: end2,
            focus: end2
          };
        }
      }
    }
    if (Range.isExpanded(targetRange2) && type.startsWith("delete")) {
      if (Path.equals(targetRange2.anchor.path, targetRange2.focus.path)) {
        var [_start, _end] = Range.edges(targetRange2);
        return storeDiff(targetRange2.anchor.path, {
          text: "",
          end: _end.offset,
          start: _start.offset
        });
      }
      var direction = type.endsWith("Backward") ? "backward" : "forward";
      return scheduleAction(() => Editor.deleteFragment(editor, {
        direction
      }), {
        at: targetRange2
      });
    }
    switch (type) {
      case "deleteByComposition":
      case "deleteByCut":
      case "deleteByDrag": {
        return scheduleAction(() => Editor.deleteFragment(editor), {
          at: targetRange2
        });
      }
      case "deleteContent":
      case "deleteContentForward": {
        var {
          anchor
        } = targetRange2;
        if (Range.isCollapsed(targetRange2)) {
          var targetNode = Node.leaf(editor, anchor.path);
          if (anchor.offset < targetNode.text.length) {
            return storeDiff(anchor.path, {
              text: "",
              start: anchor.offset,
              end: anchor.offset + 1
            });
          }
        }
        return scheduleAction(() => Editor.deleteForward(editor), {
          at: targetRange2
        });
      }
      case "deleteContentBackward": {
        var _nativeTargetRange;
        var {
          anchor: _anchor
        } = targetRange2;
        var nativeCollapsed = isDOMSelection(nativeTargetRange) ? nativeTargetRange.isCollapsed : !!((_nativeTargetRange = nativeTargetRange) !== null && _nativeTargetRange !== void 0 && _nativeTargetRange.collapsed);
        if (nativeCollapsed && Range.isCollapsed(targetRange2) && _anchor.offset > 0) {
          return storeDiff(_anchor.path, {
            text: "",
            start: _anchor.offset - 1,
            end: _anchor.offset
          });
        }
        return scheduleAction(() => Editor.deleteBackward(editor), {
          at: targetRange2
        });
      }
      case "deleteEntireSoftLine": {
        return scheduleAction(() => {
          Editor.deleteBackward(editor, {
            unit: "line"
          });
          Editor.deleteForward(editor, {
            unit: "line"
          });
        }, {
          at: targetRange2
        });
      }
      case "deleteHardLineBackward": {
        return scheduleAction(() => Editor.deleteBackward(editor, {
          unit: "block"
        }), {
          at: targetRange2
        });
      }
      case "deleteSoftLineBackward": {
        return scheduleAction(() => Editor.deleteBackward(editor, {
          unit: "line"
        }), {
          at: targetRange2
        });
      }
      case "deleteHardLineForward": {
        return scheduleAction(() => Editor.deleteForward(editor, {
          unit: "block"
        }), {
          at: targetRange2
        });
      }
      case "deleteSoftLineForward": {
        return scheduleAction(() => Editor.deleteForward(editor, {
          unit: "line"
        }), {
          at: targetRange2
        });
      }
      case "deleteWordBackward": {
        return scheduleAction(() => Editor.deleteBackward(editor, {
          unit: "word"
        }), {
          at: targetRange2
        });
      }
      case "deleteWordForward": {
        return scheduleAction(() => Editor.deleteForward(editor, {
          unit: "word"
        }), {
          at: targetRange2
        });
      }
      case "insertLineBreak": {
        return scheduleAction(() => Editor.insertSoftBreak(editor), {
          at: targetRange2
        });
      }
      case "insertParagraph": {
        return scheduleAction(() => Editor.insertBreak(editor), {
          at: targetRange2
        });
      }
      case "insertCompositionText":
      case "deleteCompositionText":
      case "insertFromComposition":
      case "insertFromDrop":
      case "insertFromPaste":
      case "insertFromYank":
      case "insertReplacementText":
      case "insertText": {
        if ((data === null || data === void 0 ? void 0 : data.constructor.name) === "DataTransfer") {
          return scheduleAction(() => ReactEditor.insertData(editor, data), {
            at: targetRange2
          });
        }
        if (typeof data === "string" && data.includes("\n")) {
          return scheduleAction(() => Editor.insertSoftBreak(editor), {
            at: Range.end(targetRange2)
          });
        }
        var text = data !== null && data !== void 0 ? data : "";
        if (EDITOR_TO_PENDING_INSERTION_MARKS.get(editor)) {
          text = text.replace("\uFEFF", "");
        }
        if (Path.equals(targetRange2.anchor.path, targetRange2.focus.path)) {
          var [_start2, _end2] = Range.edges(targetRange2);
          var diff = {
            start: _start2.offset,
            end: _end2.offset,
            text
          };
          if (text && insertPositionHint && type === "insertCompositionText") {
            var hintPosition = insertPositionHint.start + insertPositionHint.text.search(/\S|$/);
            var diffPosition = diff.start + diff.text.search(/\S|$/);
            if (diffPosition === hintPosition + 1 && diff.end === insertPositionHint.start + insertPositionHint.text.length) {
              diff.start -= 1;
              insertPositionHint = null;
              scheduleFlush();
            } else {
              insertPositionHint = false;
            }
          } else if (type === "insertText") {
            if (insertPositionHint === null) {
              insertPositionHint = diff;
            } else if (insertPositionHint && Range.isCollapsed(targetRange2) && insertPositionHint.end + insertPositionHint.text.length === _start2.offset) {
              insertPositionHint = _objectSpread$32(_objectSpread$32({}, insertPositionHint), {}, {
                text: insertPositionHint.text + text
              });
            } else {
              insertPositionHint = false;
            }
          } else {
            insertPositionHint = false;
          }
          storeDiff(_start2.path, diff);
          return;
        }
        return scheduleAction(() => Editor.insertText(editor, text), {
          at: targetRange2
        });
      }
    }
  };
  var hasPendingAction = () => {
    return !!EDITOR_TO_PENDING_ACTION.get(editor);
  };
  var hasPendingDiffs = () => {
    var _EDITOR_TO_PENDING_DI5;
    return !!((_EDITOR_TO_PENDING_DI5 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI5 !== void 0 && _EDITOR_TO_PENDING_DI5.length);
  };
  var hasPendingChanges = () => {
    return hasPendingAction() || hasPendingDiffs();
  };
  var isFlushing = () => {
    return flushing;
  };
  var handleUserSelect = (range2) => {
    EDITOR_TO_PENDING_SELECTION.set(editor, range2);
    if (flushTimeoutId) {
      clearTimeout(flushTimeoutId);
      flushTimeoutId = null;
    }
    var {
      selection
    } = editor;
    if (!range2) {
      return;
    }
    var pathChanged = !selection || !Path.equals(selection.anchor.path, range2.anchor.path);
    var parentPathChanged = !selection || !Path.equals(selection.anchor.path.slice(0, -1), range2.anchor.path.slice(0, -1));
    if (pathChanged && insertPositionHint || parentPathChanged) {
      insertPositionHint = false;
    }
    if (pathChanged || !hasPendingDiffs()) {
      flushTimeoutId = setTimeout(flush, FLUSH_DELAY);
    }
  };
  var handleInput = () => {
    if (hasPendingAction() || !hasPendingDiffs()) {
      flush();
    }
  };
  var handleKeyDown = (_) => {
    if (!hasPendingDiffs()) {
      updatePlaceholderVisibility(true);
      setTimeout(updatePlaceholderVisibility);
    }
  };
  var scheduleFlush = () => {
    if (!hasPendingAction()) {
      actionTimeoutId = setTimeout(flush);
    }
  };
  var handleDomMutations = (mutations) => {
    if (hasPendingDiffs() || hasPendingAction()) {
      return;
    }
    if (mutations.some((mutation) => isTrackedMutation(editor, mutation, mutations))) {
      var _EDITOR_TO_FORCE_REND;
      (_EDITOR_TO_FORCE_REND = EDITOR_TO_FORCE_RENDER.get(editor)) === null || _EDITOR_TO_FORCE_REND === void 0 ? void 0 : _EDITOR_TO_FORCE_REND();
    }
  };
  return {
    flush,
    scheduleFlush,
    hasPendingDiffs,
    hasPendingAction,
    hasPendingChanges,
    isFlushing,
    handleUserSelect,
    handleCompositionEnd,
    handleCompositionStart,
    handleDOMBeforeInput,
    handleKeyDown,
    handleDomMutations,
    handleInput
  };
}
function useIsMounted() {
  var isMountedRef = (0, import_react.useRef)(false);
  (0, import_react.useEffect)(() => {
    isMountedRef.current = true;
    return () => {
      isMountedRef.current = false;
    };
  }, []);
  return isMountedRef.current;
}
function useMutationObserver(node3, callback, options) {
  var [mutationObserver] = (0, import_react.useState)(() => new MutationObserver(callback));
  useIsomorphicLayoutEffect(() => {
    mutationObserver.takeRecords();
  });
  (0, import_react.useEffect)(() => {
    if (!node3.current) {
      throw new Error("Failed to attach MutationObserver, `node` is undefined");
    }
    mutationObserver.observe(node3.current, options);
    return () => mutationObserver.disconnect();
  }, []);
}
var _excluded$22 = ["node"];
function ownKeys$22(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread$22(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys$22(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys$22(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var MUTATION_OBSERVER_CONFIG = {
  subtree: true,
  childList: true,
  characterData: true
};
function useAndroidInputManager(_ref) {
  var {
    node: node3
  } = _ref, options = _objectWithoutProperties2(_ref, _excluded$22);
  if (!IS_ANDROID) {
    return null;
  }
  var editor = useSlateStatic();
  var isMounted = useIsMounted();
  var [inputManager] = (0, import_react.useState)(() => createAndroidInputManager(_objectSpread$22({
    editor
  }, options)));
  useMutationObserver(node3, inputManager.handleDomMutations, MUTATION_OBSERVER_CONFIG);
  EDITOR_TO_SCHEDULE_FLUSH.set(editor, inputManager.scheduleFlush);
  if (isMounted) {
    inputManager.flush();
  }
  return inputManager;
}
function useTrackUserInput() {
  var editor = useSlateStatic();
  var receivedUserInput = (0, import_react.useRef)(false);
  var animationFrameIdRef = (0, import_react.useRef)(0);
  var onUserInput = (0, import_react.useCallback)(() => {
    if (receivedUserInput.current) {
      return;
    }
    receivedUserInput.current = true;
    var window2 = ReactEditor.getWindow(editor);
    window2.cancelAnimationFrame(animationFrameIdRef.current);
    animationFrameIdRef.current = window2.requestAnimationFrame(() => {
      receivedUserInput.current = false;
    });
  }, []);
  (0, import_react.useEffect)(() => () => cancelAnimationFrame(animationFrameIdRef.current), []);
  return {
    receivedUserInput,
    onUserInput
  };
}
var _excluded$12 = ["autoFocus", "decorate", "onDOMBeforeInput", "placeholder", "readOnly", "renderElement", "renderLeaf", "renderPlaceholder", "scrollSelectionIntoView", "style", "as", "disableDefaultStyles"];
var _excluded22 = ["text"];
function ownKeys$12(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread$12(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys$12(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys$12(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var Children = (props) => /* @__PURE__ */ import_react.default.createElement(import_react.default.Fragment, null, useChildren(props));
var Editable = (props) => {
  var _EDITOR_TO_PLACEHOLDE, _EDITOR_TO_PLACEHOLDE2;
  var {
    autoFocus,
    decorate = defaultDecorate,
    onDOMBeforeInput: propsOnDOMBeforeInput,
    placeholder,
    readOnly = false,
    renderElement,
    renderLeaf,
    renderPlaceholder = (props2) => /* @__PURE__ */ import_react.default.createElement(DefaultPlaceholder, Object.assign({}, props2)),
    scrollSelectionIntoView = defaultScrollSelectionIntoView,
    style: userStyle = {},
    as: Component2 = "div",
    disableDefaultStyles = false
  } = props, attributes = _objectWithoutProperties2(props, _excluded$12);
  var editor = useSlate();
  var [isComposing, setIsComposing] = (0, import_react.useState)(false);
  var ref = (0, import_react.useRef)(null);
  var deferredOperations = (0, import_react.useRef)([]);
  var {
    onUserInput,
    receivedUserInput
  } = useTrackUserInput();
  var [, forceRender] = (0, import_react.useReducer)((s) => s + 1, 0);
  EDITOR_TO_FORCE_RENDER.set(editor, forceRender);
  IS_READ_ONLY.set(editor, readOnly);
  var state = (0, import_react.useMemo)(() => ({
    isDraggingInternally: false,
    isUpdatingSelection: false,
    latestElement: null,
    hasMarkPlaceholder: false
  }), []);
  (0, import_react.useEffect)(() => {
    if (ref.current && autoFocus) {
      ref.current.focus();
    }
  }, [autoFocus]);
  var onDOMSelectionChange = (0, import_react.useCallback)((0, import_throttle.default)(() => {
    if ((IS_ANDROID || !ReactEditor.isComposing(editor)) && (!state.isUpdatingSelection || androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing()) && !state.isDraggingInternally) {
      var root = ReactEditor.findDocumentOrShadowRoot(editor);
      var {
        activeElement
      } = root;
      var el = ReactEditor.toDOMNode(editor, editor);
      var domSelection = root.getSelection();
      if (activeElement === el) {
        state.latestElement = activeElement;
        IS_FOCUSED.set(editor, true);
      } else {
        IS_FOCUSED.delete(editor);
      }
      if (!domSelection) {
        return Transforms.deselect(editor);
      }
      var {
        anchorNode,
        focusNode
      } = domSelection;
      var anchorNodeSelectable = ReactEditor.hasEditableTarget(editor, anchorNode) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, anchorNode);
      var focusNodeSelectable = ReactEditor.hasEditableTarget(editor, focusNode) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, focusNode);
      if (anchorNodeSelectable && focusNodeSelectable) {
        var range2 = ReactEditor.toSlateRange(editor, domSelection, {
          exactMatch: false,
          suppressThrow: true
        });
        if (range2) {
          if (!ReactEditor.isComposing(editor) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.hasPendingChanges()) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing())) {
            Transforms.select(editor, range2);
          } else {
            androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleUserSelect(range2);
          }
        }
      }
      if (readOnly && (!anchorNodeSelectable || !focusNodeSelectable)) {
        Transforms.deselect(editor);
      }
    }
  }, 100), [readOnly]);
  var scheduleOnDOMSelectionChange = (0, import_react.useMemo)(() => (0, import_debounce.default)(onDOMSelectionChange, 0), [onDOMSelectionChange]);
  var androidInputManager = useAndroidInputManager({
    node: ref,
    onDOMSelectionChange,
    scheduleOnDOMSelectionChange
  });
  useIsomorphicLayoutEffect(() => {
    var window2;
    if (ref.current && (window2 = getDefaultView(ref.current))) {
      EDITOR_TO_WINDOW.set(editor, window2);
      EDITOR_TO_ELEMENT.set(editor, ref.current);
      NODE_TO_ELEMENT.set(editor, ref.current);
      ELEMENT_TO_NODE.set(ref.current, editor);
    } else {
      NODE_TO_ELEMENT.delete(editor);
    }
    var {
      selection
    } = editor;
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    var domSelection = root.getSelection();
    if (!domSelection || !ReactEditor.isFocused(editor) || androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.hasPendingAction()) {
      return;
    }
    var setDomSelection = (forceChange) => {
      var hasDomSelection = domSelection.type !== "None";
      if (!selection && !hasDomSelection) {
        return;
      }
      var editorElement = EDITOR_TO_ELEMENT.get(editor);
      var hasDomSelectionInEditor = false;
      if (editorElement.contains(domSelection.anchorNode) && editorElement.contains(domSelection.focusNode)) {
        hasDomSelectionInEditor = true;
      }
      if (hasDomSelection && hasDomSelectionInEditor && selection && !forceChange) {
        var slateRange = ReactEditor.toSlateRange(editor, domSelection, {
          exactMatch: true,
          // domSelection is not necessarily a valid Slate range
          // (e.g. when clicking on contentEditable:false element)
          suppressThrow: true
        });
        if (slateRange && Range.equals(slateRange, selection)) {
          var _anchorNode$parentEle;
          if (!state.hasMarkPlaceholder) {
            return;
          }
          var {
            anchorNode
          } = domSelection;
          if (anchorNode !== null && anchorNode !== void 0 && (_anchorNode$parentEle = anchorNode.parentElement) !== null && _anchorNode$parentEle !== void 0 && _anchorNode$parentEle.hasAttribute("data-slate-mark-placeholder")) {
            return;
          }
        }
      }
      if (selection && !ReactEditor.hasRange(editor, selection)) {
        editor.selection = ReactEditor.toSlateRange(editor, domSelection, {
          exactMatch: false,
          suppressThrow: true
        });
        return;
      }
      state.isUpdatingSelection = true;
      var newDomRange2 = selection && ReactEditor.toDOMRange(editor, selection);
      if (newDomRange2) {
        if (Range.isBackward(selection)) {
          domSelection.setBaseAndExtent(newDomRange2.endContainer, newDomRange2.endOffset, newDomRange2.startContainer, newDomRange2.startOffset);
        } else {
          domSelection.setBaseAndExtent(newDomRange2.startContainer, newDomRange2.startOffset, newDomRange2.endContainer, newDomRange2.endOffset);
        }
        scrollSelectionIntoView(editor, newDomRange2);
      } else {
        domSelection.removeAllRanges();
      }
      return newDomRange2;
    };
    var newDomRange = setDomSelection();
    var ensureSelection = (androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.isFlushing()) === "action";
    if (!IS_ANDROID || !ensureSelection) {
      setTimeout(() => {
        if (newDomRange && IS_FIREFOX) {
          var el = ReactEditor.toDOMNode(editor, editor);
          el.focus();
        }
        state.isUpdatingSelection = false;
      });
      return;
    }
    var timeoutId = null;
    var animationFrameId = requestAnimationFrame(() => {
      if (ensureSelection) {
        var ensureDomSelection = (forceChange) => {
          try {
            var el = ReactEditor.toDOMNode(editor, editor);
            el.focus();
            setDomSelection(forceChange);
          } catch (e2) {
          }
        };
        ensureDomSelection();
        timeoutId = setTimeout(() => {
          ensureDomSelection(true);
          state.isUpdatingSelection = false;
        });
      }
    });
    return () => {
      cancelAnimationFrame(animationFrameId);
      if (timeoutId) {
        clearTimeout(timeoutId);
      }
    };
  });
  var onDOMBeforeInput = (0, import_react.useCallback)((event) => {
    onUserInput();
    if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target) && !isDOMEventHandled(event, propsOnDOMBeforeInput)) {
      var _EDITOR_TO_USER_SELEC;
      if (androidInputManager) {
        return androidInputManager.handleDOMBeforeInput(event);
      }
      scheduleOnDOMSelectionChange.flush();
      onDOMSelectionChange.flush();
      var {
        selection
      } = editor;
      var {
        inputType: type
      } = event;
      var data = event.dataTransfer || event.data || void 0;
      var isCompositionChange = type === "insertCompositionText" || type === "deleteCompositionText";
      if (isCompositionChange && ReactEditor.isComposing(editor)) {
        return;
      }
      var native = false;
      if (type === "insertText" && selection && Range.isCollapsed(selection) && // Only use native character insertion for single characters a-z or space for now.
      // Long-press events (hold a + press 4 = ) to choose a special character otherwise
      // causes duplicate inserts.
      event.data && event.data.length === 1 && /[a-z ]/i.test(event.data) && // Chrome has issues correctly editing the start of nodes: https://bugs.chromium.org/p/chromium/issues/detail?id=1249405
      // When there is an inline element, e.g. a link, and you select
      // right after it (the start of the next node).
      selection.anchor.offset !== 0) {
        var _node$parentElement, _window$getComputedSt;
        native = true;
        if (editor.marks) {
          native = false;
        }
        var {
          anchor: anchor2
        } = selection;
        var [node3, offset] = ReactEditor.toDOMPoint(editor, anchor2);
        var anchorNode = (_node$parentElement = node3.parentElement) === null || _node$parentElement === void 0 ? void 0 : _node$parentElement.closest("a");
        var window2 = ReactEditor.getWindow(editor);
        if (native && anchorNode && ReactEditor.hasDOMNode(editor, anchorNode)) {
          var _lastText$textContent;
          var lastText = window2 === null || window2 === void 0 ? void 0 : window2.document.createTreeWalker(anchorNode, NodeFilter.SHOW_TEXT).lastChild();
          if (lastText === node3 && ((_lastText$textContent = lastText.textContent) === null || _lastText$textContent === void 0 ? void 0 : _lastText$textContent.length) === offset) {
            native = false;
          }
        }
        if (native && node3.parentElement && (window2 === null || window2 === void 0 ? void 0 : (_window$getComputedSt = window2.getComputedStyle(node3.parentElement)) === null || _window$getComputedSt === void 0 ? void 0 : _window$getComputedSt.whiteSpace) === "pre") {
          var block = Editor.above(editor, {
            at: anchor2.path,
            match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3)
          });
          if (block && Node.string(block[0]).includes("	")) {
            native = false;
          }
        }
      }
      if (!type.startsWith("delete") || type.startsWith("deleteBy")) {
        var [targetRange2] = event.getTargetRanges();
        if (targetRange2) {
          var range2 = ReactEditor.toSlateRange(editor, targetRange2, {
            exactMatch: false,
            suppressThrow: false
          });
          if (!selection || !Range.equals(selection, range2)) {
            native = false;
            var selectionRef = !isCompositionChange && editor.selection && Editor.rangeRef(editor, editor.selection);
            Transforms.select(editor, range2);
            if (selectionRef) {
              EDITOR_TO_USER_SELECTION.set(editor, selectionRef);
            }
          }
        }
      }
      if (isCompositionChange) {
        return;
      }
      if (!native) {
        event.preventDefault();
      }
      if (selection && Range.isExpanded(selection) && type.startsWith("delete")) {
        var direction = type.endsWith("Backward") ? "backward" : "forward";
        Editor.deleteFragment(editor, {
          direction
        });
        return;
      }
      switch (type) {
        case "deleteByComposition":
        case "deleteByCut":
        case "deleteByDrag": {
          Editor.deleteFragment(editor);
          break;
        }
        case "deleteContent":
        case "deleteContentForward": {
          Editor.deleteForward(editor);
          break;
        }
        case "deleteContentBackward": {
          Editor.deleteBackward(editor);
          break;
        }
        case "deleteEntireSoftLine": {
          Editor.deleteBackward(editor, {
            unit: "line"
          });
          Editor.deleteForward(editor, {
            unit: "line"
          });
          break;
        }
        case "deleteHardLineBackward": {
          Editor.deleteBackward(editor, {
            unit: "block"
          });
          break;
        }
        case "deleteSoftLineBackward": {
          Editor.deleteBackward(editor, {
            unit: "line"
          });
          break;
        }
        case "deleteHardLineForward": {
          Editor.deleteForward(editor, {
            unit: "block"
          });
          break;
        }
        case "deleteSoftLineForward": {
          Editor.deleteForward(editor, {
            unit: "line"
          });
          break;
        }
        case "deleteWordBackward": {
          Editor.deleteBackward(editor, {
            unit: "word"
          });
          break;
        }
        case "deleteWordForward": {
          Editor.deleteForward(editor, {
            unit: "word"
          });
          break;
        }
        case "insertLineBreak":
          Editor.insertSoftBreak(editor);
          break;
        case "insertParagraph": {
          Editor.insertBreak(editor);
          break;
        }
        case "insertFromComposition":
        case "insertFromDrop":
        case "insertFromPaste":
        case "insertFromYank":
        case "insertReplacementText":
        case "insertText": {
          if (type === "insertFromComposition") {
            if (ReactEditor.isComposing(editor)) {
              setIsComposing(false);
              IS_COMPOSING.set(editor, false);
            }
          }
          if ((data === null || data === void 0 ? void 0 : data.constructor.name) === "DataTransfer") {
            ReactEditor.insertData(editor, data);
          } else if (typeof data === "string") {
            if (native) {
              deferredOperations.current.push(() => Editor.insertText(editor, data));
            } else {
              Editor.insertText(editor, data);
            }
          }
          break;
        }
      }
      var toRestore = (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(editor)) === null || _EDITOR_TO_USER_SELEC === void 0 ? void 0 : _EDITOR_TO_USER_SELEC.unref();
      EDITOR_TO_USER_SELECTION.delete(editor);
      if (toRestore && (!editor.selection || !Range.equals(editor.selection, toRestore))) {
        Transforms.select(editor, toRestore);
      }
    }
  }, [readOnly, propsOnDOMBeforeInput]);
  useIsomorphicLayoutEffect(() => {
    if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {
      ref.current.addEventListener("beforeinput", onDOMBeforeInput);
    }
    return () => {
      if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {
        ref.current.removeEventListener("beforeinput", onDOMBeforeInput);
      }
    };
  }, [onDOMBeforeInput]);
  useIsomorphicLayoutEffect(() => {
    var window2 = ReactEditor.getWindow(editor);
    window2.document.addEventListener("selectionchange", scheduleOnDOMSelectionChange);
    return () => {
      window2.document.removeEventListener("selectionchange", scheduleOnDOMSelectionChange);
    };
  }, [scheduleOnDOMSelectionChange]);
  var decorations = decorate([editor, []]);
  if (placeholder && editor.children.length === 1 && Array.from(Node.texts(editor)).length === 1 && Node.string(editor) === "" && !isComposing) {
    var start2 = Editor.start(editor, []);
    decorations.push({
      [PLACEHOLDER_SYMBOL]: true,
      placeholder,
      anchor: start2,
      focus: start2
    });
  }
  var {
    marks: marks3
  } = editor;
  state.hasMarkPlaceholder = false;
  if (editor.selection && Range.isCollapsed(editor.selection) && marks3) {
    var {
      anchor
    } = editor.selection;
    var leaf3 = Node.leaf(editor, anchor.path);
    var rest = _objectWithoutProperties2(leaf3, _excluded22);
    if (!Text.equals(leaf3, marks3, {
      loose: true
    })) {
      state.hasMarkPlaceholder = true;
      var unset = Object.fromEntries(Object.keys(rest).map((mark) => [mark, null]));
      decorations.push(_objectSpread$12(_objectSpread$12(_objectSpread$12({
        [MARK_PLACEHOLDER_SYMBOL]: true
      }, unset), marks3), {}, {
        anchor,
        focus: anchor
      }));
    }
  }
  (0, import_react.useEffect)(() => {
    setTimeout(() => {
      var {
        selection
      } = editor;
      if (selection) {
        var {
          anchor: _anchor
        } = selection;
        var _text = Node.leaf(editor, _anchor.path);
        if (marks3 && !Text.equals(_text, marks3, {
          loose: true
        })) {
          EDITOR_TO_PENDING_INSERTION_MARKS.set(editor, marks3);
          return;
        }
      }
      EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);
    });
  });
  var placeholderHeight = (_EDITOR_TO_PLACEHOLDE = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor)) === null || _EDITOR_TO_PLACEHOLDE === void 0 ? void 0 : (_EDITOR_TO_PLACEHOLDE2 = _EDITOR_TO_PLACEHOLDE.getBoundingClientRect()) === null || _EDITOR_TO_PLACEHOLDE2 === void 0 ? void 0 : _EDITOR_TO_PLACEHOLDE2.height;
  return /* @__PURE__ */ import_react.default.createElement(ReadOnlyContext.Provider, {
    value: readOnly
  }, /* @__PURE__ */ import_react.default.createElement(DecorateContext.Provider, {
    value: decorate
  }, /* @__PURE__ */ import_react.default.createElement(RestoreDOM, {
    node: ref,
    receivedUserInput
  }, /* @__PURE__ */ import_react.default.createElement(Component2, Object.assign({
    role: readOnly ? void 0 : "textbox",
    "aria-multiline": readOnly ? void 0 : true
  }, attributes, {
    // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd
    // have to use hacks to make these replacement-based features work.
    // For SSR situations HAS_BEFORE_INPUT_SUPPORT is false and results in prop
    // mismatch warning app moves to browser. Pass-through consumer props when
    // not CAN_USE_DOM (SSR) and default to falsy value
    spellCheck: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.spellCheck : false,
    autoCorrect: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCorrect : "false",
    autoCapitalize: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCapitalize : "false",
    "data-slate-editor": true,
    "data-slate-node": "value",
    // explicitly set this
    contentEditable: !readOnly,
    // in some cases, a decoration needs access to the range / selection to decorate a text node,
    // then you will select the whole text node when you select part the of text
    // this magic zIndex="-1" will fix it
    zindex: -1,
    suppressContentEditableWarning: true,
    ref,
    style: _objectSpread$12(_objectSpread$12({}, disableDefaultStyles ? {} : _objectSpread$12({
      // Allow positioning relative to the editable element.
      position: "relative",
      // Prevent the default outline styles.
      outline: "none",
      // Preserve adjacent whitespace and new lines.
      whiteSpace: "pre-wrap",
      // Allow words to break if they are too long.
      wordWrap: "break-word"
    }, placeholderHeight ? {
      minHeight: placeholderHeight
    } : {})), userStyle),
    onBeforeInput: (0, import_react.useCallback)((event) => {
      if (!HAS_BEFORE_INPUT_SUPPORT && !readOnly && !isEventHandled(event, attributes.onBeforeInput) && ReactEditor.hasSelectableTarget(editor, event.target)) {
        event.preventDefault();
        if (!ReactEditor.isComposing(editor)) {
          var _text2 = event.data;
          Editor.insertText(editor, _text2);
        }
      }
    }, [readOnly]),
    onInput: (0, import_react.useCallback)((event) => {
      if (androidInputManager) {
        androidInputManager.handleInput();
        return;
      }
      for (var op of deferredOperations.current) {
        op();
      }
      deferredOperations.current = [];
    }, []),
    onBlur: (0, import_react.useCallback)((event) => {
      if (readOnly || state.isUpdatingSelection || !ReactEditor.hasSelectableTarget(editor, event.target) || isEventHandled(event, attributes.onBlur)) {
        return;
      }
      var root = ReactEditor.findDocumentOrShadowRoot(editor);
      if (state.latestElement === root.activeElement) {
        return;
      }
      var {
        relatedTarget
      } = event;
      var el = ReactEditor.toDOMNode(editor, editor);
      if (relatedTarget === el) {
        return;
      }
      if (isDOMElement(relatedTarget) && relatedTarget.hasAttribute("data-slate-spacer")) {
        return;
      }
      if (relatedTarget != null && isDOMNode(relatedTarget) && ReactEditor.hasDOMNode(editor, relatedTarget)) {
        var node3 = ReactEditor.toSlateNode(editor, relatedTarget);
        if (Element2.isElement(node3) && !editor.isVoid(node3)) {
          return;
        }
      }
      if (IS_SAFARI) {
        var domSelection = root.getSelection();
        domSelection === null || domSelection === void 0 ? void 0 : domSelection.removeAllRanges();
      }
      IS_FOCUSED.delete(editor);
    }, [readOnly, attributes.onBlur]),
    onClick: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onClick) && isDOMNode(event.target)) {
        var node3 = ReactEditor.toSlateNode(editor, event.target);
        var path3 = ReactEditor.findPath(editor, node3);
        if (!Editor.hasPath(editor, path3) || Node.get(editor, path3) !== node3) {
          return;
        }
        if (event.detail === TRIPLE_CLICK && path3.length >= 1) {
          var blockPath = path3;
          if (!(Element2.isElement(node3) && Editor.isBlock(editor, node3))) {
            var _block$;
            var block = Editor.above(editor, {
              match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
              at: path3
            });
            blockPath = (_block$ = block === null || block === void 0 ? void 0 : block[1]) !== null && _block$ !== void 0 ? _block$ : path3.slice(0, 1);
          }
          var range2 = Editor.range(editor, blockPath);
          Transforms.select(editor, range2);
          return;
        }
        if (readOnly) {
          return;
        }
        var _start = Editor.start(editor, path3);
        var end2 = Editor.end(editor, path3);
        var startVoid = Editor.void(editor, {
          at: _start
        });
        var endVoid = Editor.void(editor, {
          at: end2
        });
        if (startVoid && endVoid && Path.equals(startVoid[1], endVoid[1])) {
          var _range = Editor.range(editor, _start);
          Transforms.select(editor, _range);
        }
      }
    }, [readOnly, attributes.onClick]),
    onCompositionEnd: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target)) {
        if (ReactEditor.isComposing(editor)) {
          setIsComposing(false);
          IS_COMPOSING.set(editor, false);
        }
        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleCompositionEnd(event);
        if (isEventHandled(event, attributes.onCompositionEnd) || IS_ANDROID) {
          return;
        }
        if (!IS_SAFARI && !IS_FIREFOX_LEGACY && !IS_IOS && !IS_WECHATBROWSER && !IS_UC_MOBILE && event.data) {
          var placeholderMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);
          EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);
          if (placeholderMarks !== void 0) {
            EDITOR_TO_USER_MARKS.set(editor, editor.marks);
            editor.marks = placeholderMarks;
          }
          Editor.insertText(editor, event.data);
          var userMarks = EDITOR_TO_USER_MARKS.get(editor);
          EDITOR_TO_USER_MARKS.delete(editor);
          if (userMarks !== void 0) {
            editor.marks = userMarks;
          }
        }
      }
    }, [attributes.onCompositionEnd]),
    onCompositionUpdate: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionUpdate)) {
        if (!ReactEditor.isComposing(editor)) {
          setIsComposing(true);
          IS_COMPOSING.set(editor, true);
        }
      }
    }, [attributes.onCompositionUpdate]),
    onCompositionStart: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target)) {
        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleCompositionStart(event);
        if (isEventHandled(event, attributes.onCompositionStart) || IS_ANDROID) {
          return;
        }
        setIsComposing(true);
        var {
          selection
        } = editor;
        if (selection) {
          if (Range.isExpanded(selection)) {
            Editor.deleteFragment(editor);
            return;
          }
          var inline = Editor.above(editor, {
            match: (n3) => Element2.isElement(n3) && Editor.isInline(editor, n3),
            mode: "highest"
          });
          if (inline) {
            var [, inlinePath] = inline;
            if (Editor.isEnd(editor, selection.anchor, inlinePath)) {
              var point3 = Editor.after(editor, inlinePath);
              Transforms.setSelection(editor, {
                anchor: point3,
                focus: point3
              });
            }
          }
        }
      }
    }, [attributes.onCompositionStart]),
    onCopy: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCopy)) {
        event.preventDefault();
        ReactEditor.setFragmentData(editor, event.clipboardData, "copy");
      }
    }, [attributes.onCopy]),
    onCut: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCut)) {
        event.preventDefault();
        ReactEditor.setFragmentData(editor, event.clipboardData, "cut");
        var {
          selection
        } = editor;
        if (selection) {
          if (Range.isExpanded(selection)) {
            Editor.deleteFragment(editor);
          } else {
            var node3 = Node.parent(editor, selection.anchor.path);
            if (Editor.isVoid(editor, node3)) {
              Transforms.delete(editor);
            }
          }
        }
      }
    }, [readOnly, attributes.onCut]),
    onDragOver: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragOver)) {
        var node3 = ReactEditor.toSlateNode(editor, event.target);
        if (Element2.isElement(node3) && Editor.isVoid(editor, node3)) {
          event.preventDefault();
        }
      }
    }, [attributes.onDragOver]),
    onDragStart: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragStart)) {
        var node3 = ReactEditor.toSlateNode(editor, event.target);
        var path3 = ReactEditor.findPath(editor, node3);
        var voidMatch = Element2.isElement(node3) && Editor.isVoid(editor, node3) || Editor.void(editor, {
          at: path3,
          voids: true
        });
        if (voidMatch) {
          var range2 = Editor.range(editor, path3);
          Transforms.select(editor, range2);
        }
        state.isDraggingInternally = true;
        ReactEditor.setFragmentData(editor, event.dataTransfer, "drag");
      }
    }, [readOnly, attributes.onDragStart]),
    onDrop: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDrop)) {
        event.preventDefault();
        var draggedRange = editor.selection;
        var range2 = ReactEditor.findEventRange(editor, event);
        var data = event.dataTransfer;
        Transforms.select(editor, range2);
        if (state.isDraggingInternally) {
          if (draggedRange && !Range.equals(draggedRange, range2) && !Editor.void(editor, {
            at: range2,
            voids: true
          })) {
            Transforms.delete(editor, {
              at: draggedRange
            });
          }
        }
        ReactEditor.insertData(editor, data);
        if (!ReactEditor.isFocused(editor)) {
          ReactEditor.focus(editor);
        }
      }
      state.isDraggingInternally = false;
    }, [readOnly, attributes.onDrop]),
    onDragEnd: (0, import_react.useCallback)((event) => {
      if (!readOnly && state.isDraggingInternally && attributes.onDragEnd && ReactEditor.hasTarget(editor, event.target)) {
        attributes.onDragEnd(event);
      }
      state.isDraggingInternally = false;
    }, [readOnly, attributes.onDragEnd]),
    onFocus: (0, import_react.useCallback)((event) => {
      if (!readOnly && !state.isUpdatingSelection && ReactEditor.hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onFocus)) {
        var el = ReactEditor.toDOMNode(editor, editor);
        var root = ReactEditor.findDocumentOrShadowRoot(editor);
        state.latestElement = root.activeElement;
        if (IS_FIREFOX && event.target !== el) {
          el.focus();
          return;
        }
        IS_FOCUSED.set(editor, true);
      }
    }, [readOnly, attributes.onFocus]),
    onKeyDown: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target)) {
        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleKeyDown(event);
        var {
          nativeEvent
        } = event;
        if (ReactEditor.isComposing(editor) && nativeEvent.isComposing === false) {
          IS_COMPOSING.set(editor, false);
          setIsComposing(false);
        }
        if (isEventHandled(event, attributes.onKeyDown) || ReactEditor.isComposing(editor)) {
          return;
        }
        var {
          selection
        } = editor;
        var element = editor.children[selection !== null ? selection.focus.path[0] : 0];
        var isRTL = (0, import_direction.default)(Node.string(element)) === "rtl";
        if (Hotkeys.isRedo(nativeEvent)) {
          event.preventDefault();
          var maybeHistoryEditor = editor;
          if (typeof maybeHistoryEditor.redo === "function") {
            maybeHistoryEditor.redo();
          }
          return;
        }
        if (Hotkeys.isUndo(nativeEvent)) {
          event.preventDefault();
          var _maybeHistoryEditor = editor;
          if (typeof _maybeHistoryEditor.undo === "function") {
            _maybeHistoryEditor.undo();
          }
          return;
        }
        if (Hotkeys.isMoveLineBackward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line",
            reverse: true
          });
          return;
        }
        if (Hotkeys.isMoveLineForward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line"
          });
          return;
        }
        if (Hotkeys.isExtendLineBackward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line",
            edge: "focus",
            reverse: true
          });
          return;
        }
        if (Hotkeys.isExtendLineForward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line",
            edge: "focus"
          });
          return;
        }
        if (Hotkeys.isMoveBackward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isCollapsed(selection)) {
            Transforms.move(editor, {
              reverse: !isRTL
            });
          } else {
            Transforms.collapse(editor, {
              edge: "start"
            });
          }
          return;
        }
        if (Hotkeys.isMoveForward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isCollapsed(selection)) {
            Transforms.move(editor, {
              reverse: isRTL
            });
          } else {
            Transforms.collapse(editor, {
              edge: "end"
            });
          }
          return;
        }
        if (Hotkeys.isMoveWordBackward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isExpanded(selection)) {
            Transforms.collapse(editor, {
              edge: "focus"
            });
          }
          Transforms.move(editor, {
            unit: "word",
            reverse: !isRTL
          });
          return;
        }
        if (Hotkeys.isMoveWordForward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isExpanded(selection)) {
            Transforms.collapse(editor, {
              edge: "focus"
            });
          }
          Transforms.move(editor, {
            unit: "word",
            reverse: isRTL
          });
          return;
        }
        if (!HAS_BEFORE_INPUT_SUPPORT) {
          if (Hotkeys.isBold(nativeEvent) || Hotkeys.isItalic(nativeEvent) || Hotkeys.isTransposeCharacter(nativeEvent)) {
            event.preventDefault();
            return;
          }
          if (Hotkeys.isSoftBreak(nativeEvent)) {
            event.preventDefault();
            Editor.insertSoftBreak(editor);
            return;
          }
          if (Hotkeys.isSplitBlock(nativeEvent)) {
            event.preventDefault();
            Editor.insertBreak(editor);
            return;
          }
          if (Hotkeys.isDeleteBackward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "backward"
              });
            } else {
              Editor.deleteBackward(editor);
            }
            return;
          }
          if (Hotkeys.isDeleteForward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "forward"
              });
            } else {
              Editor.deleteForward(editor);
            }
            return;
          }
          if (Hotkeys.isDeleteLineBackward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "backward"
              });
            } else {
              Editor.deleteBackward(editor, {
                unit: "line"
              });
            }
            return;
          }
          if (Hotkeys.isDeleteLineForward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "forward"
              });
            } else {
              Editor.deleteForward(editor, {
                unit: "line"
              });
            }
            return;
          }
          if (Hotkeys.isDeleteWordBackward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "backward"
              });
            } else {
              Editor.deleteBackward(editor, {
                unit: "word"
              });
            }
            return;
          }
          if (Hotkeys.isDeleteWordForward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "forward"
              });
            } else {
              Editor.deleteForward(editor, {
                unit: "word"
              });
            }
            return;
          }
        } else {
          if (IS_CHROME || IS_SAFARI) {
            if (selection && (Hotkeys.isDeleteBackward(nativeEvent) || Hotkeys.isDeleteForward(nativeEvent)) && Range.isCollapsed(selection)) {
              var currentNode = Node.parent(editor, selection.anchor.path);
              if (Element2.isElement(currentNode) && Editor.isVoid(editor, currentNode) && (Editor.isInline(editor, currentNode) || Editor.isBlock(editor, currentNode))) {
                event.preventDefault();
                Editor.deleteBackward(editor, {
                  unit: "block"
                });
                return;
              }
            }
          }
        }
      }
    }, [readOnly, attributes.onKeyDown]),
    onPaste: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onPaste)) {
        if (!HAS_BEFORE_INPUT_SUPPORT || isPlainTextOnlyPaste(event.nativeEvent)) {
          event.preventDefault();
          ReactEditor.insertData(editor, event.clipboardData);
        }
      }
    }, [readOnly, attributes.onPaste])
  }), /* @__PURE__ */ import_react.default.createElement(Children, {
    decorations,
    node: editor,
    renderElement,
    renderPlaceholder,
    renderLeaf,
    selection: editor.selection
  })))));
};
var DefaultPlaceholder = (_ref) => {
  var {
    attributes,
    children
  } = _ref;
  return (
    // COMPAT: Artificially add a line-break to the end on the placeholder element
    // to prevent Android IMEs to pick up its content in autocorrect and to auto-capitalize the first letter
    /* @__PURE__ */ import_react.default.createElement("span", Object.assign({}, attributes), children, IS_ANDROID && /* @__PURE__ */ import_react.default.createElement("br", null))
  );
};
var defaultDecorate = () => [];
var defaultScrollSelectionIntoView = (editor, domRange) => {
  if (domRange.getBoundingClientRect && (!editor.selection || editor.selection && Range.isCollapsed(editor.selection))) {
    var leafEl = domRange.startContainer.parentElement;
    leafEl.getBoundingClientRect = domRange.getBoundingClientRect.bind(domRange);
    es_default(leafEl, {
      scrollMode: "if-needed"
    });
    delete leafEl.getBoundingClientRect;
  }
};
var isEventHandled = (event, handler) => {
  if (!handler) {
    return false;
  }
  var shouldTreatEventAsHandled = handler(event);
  if (shouldTreatEventAsHandled != null) {
    return shouldTreatEventAsHandled;
  }
  return event.isDefaultPrevented() || event.isPropagationStopped();
};
var isDOMEventHandled = (event, handler) => {
  if (!handler) {
    return false;
  }
  var shouldTreatEventAsHandled = handler(event);
  if (shouldTreatEventAsHandled != null) {
    return shouldTreatEventAsHandled;
  }
  return event.defaultPrevented;
};
var FocusedContext = /* @__PURE__ */ (0, import_react.createContext)(false);
var SlateSelectorContext = /* @__PURE__ */ (0, import_react.createContext)({});
function getSelectorContext(editor) {
  var eventListeners = (0, import_react.useRef)([]).current;
  var slateRef = (0, import_react.useRef)({
    editor
  }).current;
  var onChange = (0, import_react.useCallback)((editor2) => {
    slateRef.editor = editor2;
    eventListeners.forEach((listener) => listener(editor2));
  }, []);
  var selectorContext = (0, import_react.useMemo)(() => {
    return {
      getSlate: () => slateRef.editor,
      addEventListener: (callback) => {
        eventListeners.push(callback);
        return () => {
          eventListeners.splice(eventListeners.indexOf(callback), 1);
        };
      }
    };
  }, [eventListeners, slateRef]);
  return {
    selectorContext,
    onChange
  };
}
var _excluded3 = ["editor", "children", "onChange", "value"];
var Slate = (props) => {
  var {
    editor,
    children,
    onChange,
    value
  } = props, rest = _objectWithoutProperties2(props, _excluded3);
  var unmountRef = (0, import_react.useRef)(false);
  var [context, setContext] = import_react.default.useState(() => {
    if (!Node.isNodeList(value)) {
      throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(Scrubber.stringify(value)));
    }
    if (!Editor.isEditor(editor)) {
      throw new Error("[Slate] editor is invalid! You passed: ".concat(Scrubber.stringify(editor)));
    }
    editor.children = value;
    Object.assign(editor, rest);
    return {
      v: 0,
      editor
    };
  });
  var {
    selectorContext,
    onChange: handleSelectorChange
  } = getSelectorContext(editor);
  var onContextChange = (0, import_react.useCallback)(() => {
    if (onChange) {
      onChange(editor.children);
    }
    setContext((prevContext) => ({
      v: prevContext.v + 1,
      editor
    }));
    handleSelectorChange(editor);
  }, [onChange]);
  (0, import_react.useEffect)(() => {
    EDITOR_TO_ON_CHANGE.set(editor, onContextChange);
    return () => {
      EDITOR_TO_ON_CHANGE.set(editor, () => {
      });
      unmountRef.current = true;
    };
  }, []);
  var [isFocused, setIsFocused] = (0, import_react.useState)(ReactEditor.isFocused(editor));
  (0, import_react.useEffect)(() => {
    setIsFocused(ReactEditor.isFocused(editor));
  });
  useIsomorphicLayoutEffect(() => {
    var fn = () => setIsFocused(ReactEditor.isFocused(editor));
    if (IS_REACT_VERSION_17_OR_ABOVE) {
      document.addEventListener("focusin", fn);
      document.addEventListener("focusout", fn);
      return () => {
        document.removeEventListener("focusin", fn);
        document.removeEventListener("focusout", fn);
      };
    } else {
      document.addEventListener("focus", fn, true);
      document.addEventListener("blur", fn, true);
      return () => {
        document.removeEventListener("focus", fn, true);
        document.removeEventListener("blur", fn, true);
      };
    }
  }, []);
  return /* @__PURE__ */ import_react.default.createElement(SlateSelectorContext.Provider, {
    value: selectorContext
  }, /* @__PURE__ */ import_react.default.createElement(SlateContext.Provider, {
    value: context
  }, /* @__PURE__ */ import_react.default.createElement(EditorContext.Provider, {
    value: context.editor
  }, /* @__PURE__ */ import_react.default.createElement(FocusedContext.Provider, {
    value: isFocused
  }, children))));
};
var doRectsIntersect = (rect, compareRect) => {
  var middle = (compareRect.top + compareRect.bottom) / 2;
  return rect.top <= middle && rect.bottom >= middle;
};
var areRangesSameLine = (editor, range1, range2) => {
  var rect1 = ReactEditor.toDOMRange(editor, range1).getBoundingClientRect();
  var rect2 = ReactEditor.toDOMRange(editor, range2).getBoundingClientRect();
  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1);
};
var findCurrentLineRange = (editor, parentRange) => {
  var parentRangeBoundary = Editor.range(editor, Range.end(parentRange));
  var positions2 = Array.from(Editor.positions(editor, {
    at: parentRange
  }));
  var left = 0;
  var right = positions2.length;
  var middle = Math.floor(right / 2);
  if (areRangesSameLine(editor, Editor.range(editor, positions2[left]), parentRangeBoundary)) {
    return Editor.range(editor, positions2[left], parentRangeBoundary);
  }
  if (positions2.length < 2) {
    return Editor.range(editor, positions2[positions2.length - 1], parentRangeBoundary);
  }
  while (middle !== positions2.length && middle !== left) {
    if (areRangesSameLine(editor, Editor.range(editor, positions2[middle]), parentRangeBoundary)) {
      right = middle;
    } else {
      left = middle;
    }
    middle = Math.floor((left + right) / 2);
  }
  return Editor.range(editor, positions2[right], parentRangeBoundary);
};
function ownKeys2(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread2(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys2(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys2(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var withReact = (editor) => {
  var e2 = editor;
  var {
    apply: apply2,
    onChange,
    deleteBackward: deleteBackward2,
    addMark: addMark2,
    removeMark: removeMark2
  } = e2;
  EDITOR_TO_KEY_TO_ELEMENT.set(e2, /* @__PURE__ */ new WeakMap());
  e2.addMark = (key, value) => {
    var _EDITOR_TO_SCHEDULE_F, _EDITOR_TO_PENDING_DI;
    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(e2)) === null || _EDITOR_TO_SCHEDULE_F === void 0 ? void 0 : _EDITOR_TO_SCHEDULE_F();
    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e2) && (_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(e2)) !== null && _EDITOR_TO_PENDING_DI !== void 0 && _EDITOR_TO_PENDING_DI.length) {
      EDITOR_TO_PENDING_INSERTION_MARKS.set(e2, null);
    }
    EDITOR_TO_USER_MARKS.delete(e2);
    addMark2(key, value);
  };
  e2.removeMark = (key) => {
    var _EDITOR_TO_PENDING_DI2;
    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e2) && (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(e2)) !== null && _EDITOR_TO_PENDING_DI2 !== void 0 && _EDITOR_TO_PENDING_DI2.length) {
      EDITOR_TO_PENDING_INSERTION_MARKS.set(e2, null);
    }
    EDITOR_TO_USER_MARKS.delete(e2);
    removeMark2(key);
  };
  e2.deleteBackward = (unit) => {
    if (unit !== "line") {
      return deleteBackward2(unit);
    }
    if (e2.selection && Range.isCollapsed(e2.selection)) {
      var parentBlockEntry = Editor.above(e2, {
        match: (n3) => Element2.isElement(n3) && Editor.isBlock(e2, n3),
        at: e2.selection
      });
      if (parentBlockEntry) {
        var [, parentBlockPath] = parentBlockEntry;
        var parentElementRange = Editor.range(e2, parentBlockPath, e2.selection.anchor);
        var currentLineRange = findCurrentLineRange(e2, parentElementRange);
        if (!Range.isCollapsed(currentLineRange)) {
          Transforms.delete(e2, {
            at: currentLineRange
          });
        }
      }
    }
  };
  e2.apply = (op) => {
    var matches = [];
    var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(e2);
    if (pendingDiffs !== null && pendingDiffs !== void 0 && pendingDiffs.length) {
      var transformed = pendingDiffs.map((textDiff) => transformTextDiff(textDiff, op)).filter(Boolean);
      EDITOR_TO_PENDING_DIFFS.set(e2, transformed);
    }
    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(e2);
    if (pendingSelection) {
      EDITOR_TO_PENDING_SELECTION.set(e2, transformPendingRange(e2, pendingSelection, op));
    }
    var pendingAction = EDITOR_TO_PENDING_ACTION.get(e2);
    if (pendingAction !== null && pendingAction !== void 0 && pendingAction.at) {
      var at = Point.isPoint(pendingAction === null || pendingAction === void 0 ? void 0 : pendingAction.at) ? transformPendingPoint(e2, pendingAction.at, op) : transformPendingRange(e2, pendingAction.at, op);
      EDITOR_TO_PENDING_ACTION.set(e2, at ? _objectSpread2(_objectSpread2({}, pendingAction), {}, {
        at
      }) : null);
    }
    switch (op.type) {
      case "insert_text":
      case "remove_text":
      case "set_node":
      case "split_node": {
        matches.push(...getMatches(e2, op.path));
        break;
      }
      case "set_selection": {
        var _EDITOR_TO_USER_SELEC;
        (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(e2)) === null || _EDITOR_TO_USER_SELEC === void 0 ? void 0 : _EDITOR_TO_USER_SELEC.unref();
        EDITOR_TO_USER_SELECTION.delete(e2);
        break;
      }
      case "insert_node":
      case "remove_node": {
        matches.push(...getMatches(e2, Path.parent(op.path)));
        break;
      }
      case "merge_node": {
        var prevPath = Path.previous(op.path);
        matches.push(...getMatches(e2, prevPath));
        break;
      }
      case "move_node": {
        var commonPath = Path.common(Path.parent(op.path), Path.parent(op.newPath));
        matches.push(...getMatches(e2, commonPath));
        break;
      }
    }
    apply2(op);
    for (var [path3, key] of matches) {
      var [node3] = Editor.node(e2, path3);
      NODE_TO_KEY.set(node3, key);
    }
  };
  e2.setFragmentData = (data) => {
    var {
      selection
    } = e2;
    if (!selection) {
      return;
    }
    var [start2, end2] = Range.edges(selection);
    var startVoid = Editor.void(e2, {
      at: start2.path
    });
    var endVoid = Editor.void(e2, {
      at: end2.path
    });
    if (Range.isCollapsed(selection) && !startVoid) {
      return;
    }
    var domRange = ReactEditor.toDOMRange(e2, selection);
    var contents = domRange.cloneContents();
    var attach = contents.childNodes[0];
    contents.childNodes.forEach((node3) => {
      if (node3.textContent && node3.textContent.trim() !== "") {
        attach = node3;
      }
    });
    if (endVoid) {
      var [voidNode] = endVoid;
      var r2 = domRange.cloneRange();
      var domNode = ReactEditor.toDOMNode(e2, voidNode);
      r2.setEndAfter(domNode);
      contents = r2.cloneContents();
    }
    if (startVoid) {
      attach = contents.querySelector("[data-slate-spacer]");
    }
    Array.from(contents.querySelectorAll("[data-slate-zero-width]")).forEach((zw) => {
      var isNewline = zw.getAttribute("data-slate-zero-width") === "n";
      zw.textContent = isNewline ? "\n" : "";
    });
    if (isDOMText(attach)) {
      var span = attach.ownerDocument.createElement("span");
      span.style.whiteSpace = "pre";
      span.appendChild(attach);
      contents.appendChild(span);
      attach = span;
    }
    var fragment2 = e2.getFragment();
    var string3 = JSON.stringify(fragment2);
    var encoded = window.btoa(encodeURIComponent(string3));
    attach.setAttribute("data-slate-fragment", encoded);
    data.setData("application/x-slate-fragment", encoded);
    var div = contents.ownerDocument.createElement("div");
    div.appendChild(contents);
    div.setAttribute("hidden", "true");
    contents.ownerDocument.body.appendChild(div);
    data.setData("text/html", div.innerHTML);
    data.setData("text/plain", getPlainText(div));
    contents.ownerDocument.body.removeChild(div);
    return data;
  };
  e2.insertData = (data) => {
    if (!e2.insertFragmentData(data)) {
      e2.insertTextData(data);
    }
  };
  e2.insertFragmentData = (data) => {
    var fragment2 = data.getData("application/x-slate-fragment") || getSlateFragmentAttribute(data);
    if (fragment2) {
      var decoded = decodeURIComponent(window.atob(fragment2));
      var parsed = JSON.parse(decoded);
      e2.insertFragment(parsed);
      return true;
    }
    return false;
  };
  e2.insertTextData = (data) => {
    var text = data.getData("text/plain");
    if (text) {
      var lines = text.split(/\r\n|\r|\n/);
      var split = false;
      for (var line of lines) {
        if (split) {
          Transforms.splitNodes(e2, {
            always: true
          });
        }
        e2.insertText(line);
        split = true;
      }
      return true;
    }
    return false;
  };
  e2.onChange = () => {
    import_react_dom.default.unstable_batchedUpdates(() => {
      var onContextChange = EDITOR_TO_ON_CHANGE.get(e2);
      if (onContextChange) {
        onContextChange();
      }
      onChange();
    });
  };
  return e2;
};
var getMatches = (e2, path3) => {
  var matches = [];
  for (var [n3, p] of Editor.levels(e2, {
    at: path3
  })) {
    var key = ReactEditor.findKey(e2, n3);
    matches.push([p, key]);
  }
  return matches;
};

// ../node_modules/slate-history/dist/index.es.js
var History = {
  /**
   * Check if a value is a `History` object.
   */
  isHistory(value) {
    return isPlainObject(value) && Array.isArray(value.redos) && Array.isArray(value.undos) && (value.redos.length === 0 || Operation.isOperationList(value.redos[0].operations)) && (value.undos.length === 0 || Operation.isOperationList(value.undos[0].operations));
  }
};
var SAVING = /* @__PURE__ */ new WeakMap();
var MERGING = /* @__PURE__ */ new WeakMap();
var HistoryEditor = {
  /**
   * Check if a value is a `HistoryEditor` object.
   */
  isHistoryEditor(value) {
    return History.isHistory(value.history) && Editor.isEditor(value);
  },
  /**
   * Get the merge flag's current value.
   */
  isMerging(editor) {
    return MERGING.get(editor);
  },
  /**
   * Get the saving flag's current value.
   */
  isSaving(editor) {
    return SAVING.get(editor);
  },
  /**
   * Redo to the previous saved state.
   */
  redo(editor) {
    editor.redo();
  },
  /**
   * Undo to the previous saved state.
   */
  undo(editor) {
    editor.undo();
  },
  /**
   * Apply a series of changes inside a synchronous `fn`, without merging any of
   * the new operations into previous save point in the history.
   */
  withoutMerging(editor, fn) {
    var prev = HistoryEditor.isMerging(editor);
    MERGING.set(editor, false);
    fn();
    MERGING.set(editor, prev);
  },
  /**
   * Apply a series of changes inside a synchronous `fn`, without saving any of
   * their operations into the history.
   */
  withoutSaving(editor, fn) {
    var prev = HistoryEditor.isSaving(editor);
    SAVING.set(editor, false);
    fn();
    SAVING.set(editor, prev);
  }
};
var withHistory = (editor) => {
  var e2 = editor;
  var {
    apply: apply2
  } = e2;
  e2.history = {
    undos: [],
    redos: []
  };
  e2.redo = () => {
    var {
      history
    } = e2;
    var {
      redos
    } = history;
    if (redos.length > 0) {
      var batch = redos[redos.length - 1];
      if (batch.selectionBefore) {
        Transforms.setSelection(e2, batch.selectionBefore);
      }
      HistoryEditor.withoutSaving(e2, () => {
        Editor.withoutNormalizing(e2, () => {
          for (var op of batch.operations) {
            e2.apply(op);
          }
        });
      });
      history.redos.pop();
      e2.writeHistory("undos", batch);
    }
  };
  e2.undo = () => {
    var {
      history
    } = e2;
    var {
      undos
    } = history;
    if (undos.length > 0) {
      var batch = undos[undos.length - 1];
      HistoryEditor.withoutSaving(e2, () => {
        Editor.withoutNormalizing(e2, () => {
          var inverseOps = batch.operations.map(Operation.inverse).reverse();
          for (var op of inverseOps) {
            e2.apply(op);
          }
          if (batch.selectionBefore) {
            Transforms.setSelection(e2, batch.selectionBefore);
          }
        });
      });
      e2.writeHistory("redos", batch);
      history.undos.pop();
    }
  };
  e2.apply = (op) => {
    var {
      operations,
      history
    } = e2;
    var {
      undos
    } = history;
    var lastBatch = undos[undos.length - 1];
    var lastOp = lastBatch && lastBatch.operations[lastBatch.operations.length - 1];
    var save = HistoryEditor.isSaving(e2);
    var merge = HistoryEditor.isMerging(e2);
    if (save == null) {
      save = shouldSave(op);
    }
    if (save) {
      if (merge == null) {
        if (lastBatch == null) {
          merge = false;
        } else if (operations.length !== 0) {
          merge = true;
        } else {
          merge = shouldMerge(op, lastOp);
        }
      }
      if (lastBatch && merge) {
        lastBatch.operations.push(op);
      } else {
        var batch = {
          operations: [op],
          selectionBefore: e2.selection
        };
        e2.writeHistory("undos", batch);
      }
      while (undos.length > 100) {
        undos.shift();
      }
      history.redos = [];
    }
    apply2(op);
  };
  e2.writeHistory = (stack, batch) => {
    e2.history[stack].push(batch);
  };
  return e2;
};
var shouldMerge = (op, prev) => {
  if (prev && op.type === "insert_text" && prev.type === "insert_text" && op.offset === prev.offset + prev.text.length && Path.equals(op.path, prev.path)) {
    return true;
  }
  if (prev && op.type === "remove_text" && prev.type === "remove_text" && op.offset + op.text.length === prev.offset && Path.equals(op.path, prev.path)) {
    return true;
  }
  return false;
};
var shouldSave = (op, prev) => {
  if (op.type === "set_selection") {
    return false;
  }
  return true;
};

// ../node_modules/pretty-bytes/index.js
var BYTE_UNITS = [
  "B",
  "kB",
  "MB",
  "GB",
  "TB",
  "PB",
  "EB",
  "ZB",
  "YB"
];
var BIBYTE_UNITS = [
  "B",
  "KiB",
  "MiB",
  "GiB",
  "TiB",
  "PiB",
  "EiB",
  "ZiB",
  "YiB"
];
var BIT_UNITS = [
  "b",
  "kbit",
  "Mbit",
  "Gbit",
  "Tbit",
  "Pbit",
  "Ebit",
  "Zbit",
  "Ybit"
];
var BIBIT_UNITS = [
  "b",
  "kibit",
  "Mibit",
  "Gibit",
  "Tibit",
  "Pibit",
  "Eibit",
  "Zibit",
  "Yibit"
];
var toLocaleString = (number, locale, options) => {
  let result = number;
  if (typeof locale === "string" || Array.isArray(locale)) {
    result = number.toLocaleString(locale, options);
  } else if (locale === true || options !== void 0) {
    result = number.toLocaleString(void 0, options);
  }
  return result;
};
function prettyBytes(number, options) {
  if (!Number.isFinite(number)) {
    throw new TypeError("Expected a finite number, got ".concat(typeof number, ": ").concat(number));
  }
  options = __spreadValues({
    bits: false,
    binary: false,
    space: true
  }, options);
  const UNITS = options.bits ? options.binary ? BIBIT_UNITS : BIT_UNITS : options.binary ? BIBYTE_UNITS : BYTE_UNITS;
  const separator = options.space ? " " : "";
  if (options.signed && number === 0) {
    return " 0".concat(separator).concat(UNITS[0]);
  }
  const isNegative = number < 0;
  const prefix = isNegative ? "-" : options.signed ? "+" : "";
  if (isNegative) {
    number = -number;
  }
  let localeOptions;
  if (options.minimumFractionDigits !== void 0) {
    localeOptions = { minimumFractionDigits: options.minimumFractionDigits };
  }
  if (options.maximumFractionDigits !== void 0) {
    localeOptions = __spreadValues({ maximumFractionDigits: options.maximumFractionDigits }, localeOptions);
  }
  if (number < 1) {
    const numberString2 = toLocaleString(number, options.locale, localeOptions);
    return prefix + numberString2 + separator + UNITS[0];
  }
  const exponent = Math.min(Math.floor(options.binary ? Math.log(number) / Math.log(1024) : Math.log10(number) / 3), UNITS.length - 1);
  number /= (options.binary ? 1024 : 1e3) ** exponent;
  if (!localeOptions) {
    number = number.toPrecision(3);
  }
  const numberString = toLocaleString(Number(number), options.locale, localeOptions);
  const unit = UNITS[exponent];
  return prefix + numberString + separator + unit;
}

// ../editor/slate/current-element.tsx
var import_react2 = __toESM(require_react());
var CurrentElementContext = import_react2.default.createContext(null);
var CurrentElementProvider = class extends import_react2.default.PureComponent {
  render() {
    return /* @__PURE__ */ import_react2.default.createElement(CurrentElementContext.Provider, { value: this.props }, this.props.children);
  }
};
var CurrentElementRetrieverOptimizer = class extends import_react2.default.PureComponent {
  render() {
    return this.props.fn({
      attributes: this.props.attributes,
      children: this.props.children,
      element: this.props.element
    }, this.props.isSelected, this.props.selectionCriteria, this.props.selectionIsPrimary);
  }
};
var CurrentElementRetriever = class extends import_react2.default.PureComponent {
  constructor(props) {
    super(props);
    this.consume = this.consume.bind(this);
  }
  consume(selection) {
    const elementInQuestion = this.props.element;
    let isSelected = false;
    let selectionCriteria = null;
    let selectionIsPrimary = false;
    if (isBlock(elementInQuestion)) {
      selectionCriteria = "block";
      isSelected = selection.block === elementInQuestion;
      selectionIsPrimary = isSelected && !selection.inline;
    } else if (isSuperBlock(elementInQuestion)) {
      selectionCriteria = "superblock";
      const index = selection.superblocks.findIndex((e2) => e2 === elementInQuestion);
      isSelected = index !== -1;
      selectionIsPrimary = isSelected && !selection.block && !selection.inline && index === selection.superblocks.length - 1;
    } else {
      selectionCriteria = "inline";
      isSelected = selection.inline === elementInQuestion;
      selectionIsPrimary = isSelected;
    }
    return /* @__PURE__ */ import_react2.default.createElement(
      CurrentElementRetrieverOptimizer,
      __spreadProps(__spreadValues({}, this.props), {
        isSelected,
        selectionCriteria,
        selectionIsPrimary
      })
    );
  }
  render() {
    return /* @__PURE__ */ import_react2.default.createElement(CurrentElementContext.Consumer, null, this.consume);
  }
};

// ../util/index.ts
var import_deep_equal = __toESM(require_deep_equal());
function countSize(root) {
  if (typeof root.text === "string") {
    return root.text.length;
  }
  const counts = root.children.map(countSize);
  if (counts.length === 0) {
    return 0;
  } else if (counts.length === 1) {
    return counts[0];
  }
  return counts.reduce((a, b) => a + b);
}
function countSizeAndWords(root) {
  if (typeof root.text === "string") {
    return [
      root.text.length,
      root.text.split(" ").filter((v) => v !== "").length
    ];
  }
  const results = root.children.map(countSizeAndWords);
  if (results.length === 0) {
    return [0, 0];
  } else if (results.length === 1) {
    return results[0];
  }
  return results.reduce((a, b) => {
    return [a[0] + b[0], a[1] + b[1]];
  });
}

// ../editor/index.ts
function localeReplacer(str, ...args) {
  return str.replace(/\{(\d+)\}/g, (match, indexMatch) => {
    if (typeof args[indexMatch] === "undefined") {
      return "?";
    } else if (args[indexMatch] === null) {
      return "";
    }
    return args[indexMatch].toString();
  });
}
var mimeExtensions = {
  "audio/aac": "aac",
  "application/x-abiword": "abw",
  "application/x-freearc": "arc",
  "video/x-msvideo": "avi",
  "application/vnd.amazon.ebook": "azw",
  "application/octet-stream": "bin",
  "image/bmp": "bmp",
  "application/x-bzip": "bz",
  "application/x-bzip2": "bz2",
  "application/x-csh": "csh",
  "text/css": "css",
  "text/csv": "csv",
  "application/msword": "doc",
  "application/vnd.openxmlformats-officedocument.wordprocessingml.document": "docx",
  "application/vnd.ms-fontobject": "eot",
  "application/epub+zip": "epub",
  "image/gif": "gif",
  "text/html": "html",
  "image/vnd.microsoft.icon": "ico",
  "text/calendar": "ics",
  "application/java-archive": "jar",
  "image/jpeg": "jpg",
  "text/javascript": "js",
  "application/json": "json",
  "application/ld+json": "jsonld",
  "audio/midi audio/x-midi": "mid",
  "audio/mpeg": "mp3",
  "video/mpeg": "mpeg",
  "application/vnd.apple.installer+xml": "mpkg",
  "application/vnd.oasis.opendocument.presentation": "odp",
  "application/vnd.oasis.opendocument.spreadsheet": "ods",
  "application/vnd.oasis.opendocument.text": "odt",
  "audio/ogg": "oga",
  "video/ogg": "ogv",
  "application/ogg": "ogx",
  "font/otf": "otf",
  "image/png": "png",
  "application/pdf": "pdf",
  "application/vnd.ms-powerpoint": "ppt",
  "application/vnd.openxmlformats-officedocument.presentationml.presentation": "pptx",
  "application/x-rar-compressed": "rar",
  "application/rtf": "rtf",
  "application/x-sh": "sh",
  "image/svg+xml": "svg",
  "application/x-shockwave-flash": "swf",
  "application/x-tar": "tar",
  "image/tiff": "tiff",
  "font/ttf": "ttf",
  "text/plain": "txt",
  "application/vnd.visio": "vsd",
  "audio/wav": "wav",
  "audio/webm": "weba",
  "video/webm": "webm",
  "image/webp": "webp",
  "font/woff": "woff",
  "font/woff2": "woff2",
  "application/xhtml+xml": "xhtml",
  "application/vnd.ms-excel": "xls",
  "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": "xlsx",
  "application/xml if not readable from casual users (RFC 3023, section 3)": "xml",
  "application/vnd.mozilla.xul+xml": "xul",
  "application/zip": "zip",
  "video/3gpp": "3gp",
  "video/3gpp2": "3g2",
  "application/x-7z-compressed": "7z"
};
function mimeTypeToExtension(str) {
  const expectedExt = mimeExtensions[str];
  if (expectedExt) {
    return expectedExt;
  }
  return (str.split("/")[1] || "txt").substr(0, 3);
}
var templatedAttributes = [
  "thref",
  "textContent",
  "html",
  "forEach",
  "context",
  "uiHandler"
];
var templatedInteractiveActions = [
  "click",
  "blur",
  "focus",
  "input",
  "keydown",
  "keypress",
  "keyup",
  "mousedown",
  "mouseenter",
  "mouseleave",
  "mousemove",
  "mouseover",
  "mouseout",
  "mouseup",
  "mousewheel",
  "touchstart",
  "touchmove",
  "touchend",
  "touchcancel",
  "wheel"
];
var templatedStyledAttributes = [
  "styleHover",
  "styleActive"
];
var specialTypes = {
  "void-block": "container",
  "void-superblock": "container",
  "void-inline": "inline"
};
function getInfoFor(node3, i18nData) {
  if (node3.type === "document") {
    return null;
  }
  const isInteractive = templatedInteractiveActions.some((attr) => typeof node3[attr] !== "undefined" && node3[attr] !== null);
  const isTemplateStyled = templatedStyledAttributes.some((attr) => typeof node3[attr] !== "undefined" && node3[attr] !== null);
  const isBasicStyled = !!node3.style || node3.richClassList && node3.richClassList.length;
  const isBasicTemplated = templatedAttributes.some((attr) => typeof node3[attr] !== "undefined" && node3[attr] !== null);
  const isTemplate = isInteractive || isTemplateStyled || isBasicTemplated;
  const foundCustomName = !node3.givenName && node3.uiHandler ? i18nData.richUIHandlerElement[node3.uiHandler.replace(/-/g, "_")] : null;
  let nameLabel = node3.givenName ? node3.givenName : foundCustomName || (node3.type ? i18nData[specialTypes[node3.type] ? specialTypes[node3.type] : node3.type.replace(/-/g, "_")] || node3.type : i18nData.text);
  if (!node3.givenName && !foundCustomName) {
    if (isBasicStyled || isTemplateStyled) {
      nameLabel = localeReplacer(i18nData.styled, nameLabel);
    }
    if (isInteractive) {
      nameLabel = localeReplacer(i18nData.interactive, nameLabel);
    }
    if (isTemplate) {
      nameLabel = localeReplacer(i18nData.template, nameLabel);
    }
  }
  return {
    isTemplate,
    isInteractive,
    name: nameLabel,
    isText: typeof node3.text === "string"
  };
}

// ../editor/slate/index.tsx
var defaultBaseI18nRichInfoEnglish = {
  actions: "actions",
  alt: "alt",
  classes: "classes",
  container: "container",
  context: "context",
  custom: "custom",
  each: "loop for each",
  file: "file",
  image: "image",
  inline: "inline",
  interactive: "interactive {0}",
  link: "link",
  list: "list",
  listItem: "list item",
  name: "name",
  paragraph: "paragraph",
  quote: "quote",
  renderCondition: "render condition",
  richClasses: {},
  richContainers: {},
  richCustoms: {},
  richTables: {},
  richUIHandlerElement: {},
  settings: "settings",
  sizes: "sizes",
  standalone: "standalone",
  style: "style",
  styleActive: "style active",
  styleHover: "style hover",
  styled: "styled {0}",
  styles: "styles",
  table: "table",
  tbody: "table body",
  td: "table column",
  template: "template {0}",
  templating: "templating",
  text: "text",
  tfoot: "table footer",
  th: "table column",
  thead: "table head",
  title: "title",
  tr: "table row",
  type: "type",
  uiHandler: "ui handler",
  video: "video"
};
var ElementWrapperDisabler = import_react3.default.createContext(false);
function findLastIndex(arr, fn) {
  let currentIndex = arr.length;
  while (currentIndex--) {
    if (fn(arr[currentIndex])) {
      return currentIndex;
    }
  }
  return -1;
}
var EDITOR_POOL = /* @__PURE__ */ new Map();
function onAnyTab(ev) {
  setTimeout(() => {
    const editorElement = EDITOR_POOL.get(document.activeElement);
    EDITOR_POOL.forEach((e2) => e2 !== editorElement && e2.selectiveHardBlurIfHasSelectedElement(ev, document.activeElement instanceof HTMLElement ? document.activeElement : null));
    if (editorElement) {
      editorElement.forceFocus();
    }
  }, 70);
}
if (typeof document !== "undefined") {
  document.addEventListener("keydown", (e2) => {
    if (e2.key === "Tab") {
      onAnyTab(e2);
    }
  });
}
var ALL_CONTAINERS = [];
var ALL_TABLES = [];
var ALL_CUSTOM = [];
var ALL_RICH_CLASSES = [];
var ALL_IS_LOADED = false;
function calculateStylesheet(stylesheet) {
  Array.from(stylesheet.cssRules).forEach((r2) => {
    if (r2 instanceof CSSMediaRule || r2.cssRules) {
      calculateStylesheet(r2);
      return;
    }
    const selectorSplitted = (r2.selectorText || r2.cssText.split("{")[0].trim()).split(" ");
    selectorSplitted.forEach((sbase) => {
      let internalSelectorSplitted = sbase.split(".");
      internalSelectorSplitted.shift();
      internalSelectorSplitted.forEach((s) => {
        let className = s;
        if (className.includes(":")) {
          className = className.split(":")[0];
        }
        if (className.endsWith(",")) {
          className = className.substr(0, className.length - 1);
        }
        if (className.startsWith(CONTAINER_CLASS_PREFIX)) {
          const toPush = className.substr(CONTAINER_CLASS_PREFIX.length);
          if (!ALL_CONTAINERS.includes(toPush)) {
            ALL_CONTAINERS.push(toPush);
          }
        } else if (className.startsWith(TABLE_CLASS_PREFIX)) {
          const toPush = className.substr(TABLE_CLASS_PREFIX.length);
          if (!ALL_TABLES.includes(toPush)) {
            ALL_TABLES.push(toPush);
          }
        } else if (className.startsWith(CUSTOM_CLASS_PREFIX)) {
          const toPush = className.substr(CUSTOM_CLASS_PREFIX.length);
          if (!ALL_CUSTOM.includes(toPush)) {
            ALL_CUSTOM.push(toPush);
          }
        } else if (className.startsWith(RICH_TEXT_CLASS_PREFIX)) {
          const toPush = className.substr(RICH_TEXT_CLASS_PREFIX.length);
          if (!ALL_RICH_CLASSES.includes(toPush)) {
            ALL_RICH_CLASSES.push(toPush);
          }
        }
      });
    });
  });
}
var ALL_PROMISE = new Promise(async (resolve) => {
  if (ALL_IS_LOADED) {
    resolve();
    return;
  }
  if (typeof document !== "undefined") {
    const stylesheetHrefPrefix = location.protocol + "//" + location.host + "/rest/resource/build";
    const foundPreloadedStylesheet = document.styleSheets && Array.from(document.styleSheets).find((s) => s.href && s.href.startsWith(stylesheetHrefPrefix));
    if (foundPreloadedStylesheet) {
      ALL_IS_LOADED = true;
      calculateStylesheet(foundPreloadedStylesheet);
      resolve();
    } else {
      const allLinks = document.head.querySelectorAll("link");
      const foundStylesheetNode = Array.from(allLinks).find((s) => s.href.startsWith(stylesheetHrefPrefix));
      if (!foundStylesheetNode) {
        ALL_IS_LOADED = true;
        resolve();
      } else {
        foundStylesheetNode.addEventListener("load", () => {
          const foundLoadedStyleSheet = document.styleSheets && Array.from(document.styleSheets).find((s) => s.href && s.href.startsWith(stylesheetHrefPrefix));
          ALL_IS_LOADED = true;
          if (foundLoadedStyleSheet) {
            calculateStylesheet(foundLoadedStyleSheet);
          }
          resolve();
        });
      }
    }
  }
});
var falseFn = () => false;
var SlateEditor = class extends import_react3.default.Component {
  /**
   * Constructs a new instance of the slate editor component
   * @param props the props
   */
  constructor(props) {
    super(props);
    this.isInNormalization = false;
    this.preventNormalize = false;
    /**
     * When a call to delete the current selected node is done, the selection anchors as they have been set
     * need to be removed and reset because otherwise they will be pointing to invalid nodes, this internal
     * flag allows to keep track of that so.
     * 
     * 1. the delete function gets called, the flag gets set to true
     * 2. slate is internally asked to delete at the selected and given path
     * 3. this triggers the change function which will try to recalculate anchors, but the old anchors are invalid
     * 4. because of the flag the change function knows the last change was a selected delete and tells the anchor
     * recalculation not to reuse old anchors
     */
    this.lastChangeWasSelectedDelete = false;
    this.editableRef = import_react3.default.createRef();
    this.wrapperRef = import_react3.default.createRef();
    this.state = {
      // setting up the internal value from the property
      // first we pick the internal value if available
      // or otherwise we parse one
      treeValue: props.treeValue || (props.isRichText ? deserialize(props.value, null, {
        useContextRulesOf: props.rootContext
      }) : deserializePlain(props.value)),
      // we are synced
      synced: true,
      // focused
      focused: false,
      // set up the anchors
      currentText: null,
      currentInlineElement: null,
      currentBlockElement: null,
      currentSuperBlockElements: null,
      currentTextAnchor: null,
      currentInlineElementAnchor: null,
      currentBlockElementAnchor: null,
      currentSuperBlockElementAnchors: null,
      currentSelectedText: null,
      currentSelectedInlineElement: null,
      currentSelectedBlockElement: null,
      currentSelectedSuperBlockElements: null,
      currentSelectedTextAnchor: null,
      currentSelectedInlineElementAnchor: null,
      currentSelectedBlockElementAnchor: null,
      currentSelectedSuperBlockElementAnchors: null,
      currentSelectedElement: null,
      currentSelectedElementAnchor: null,
      previousSelectedElementAnchor: null,
      previousTextAnchor: null,
      isRichText: props.isRichText,
      currentRootContext: props.rootContext || null,
      currentSelectedBlockContext: null,
      currentSelectedInlineContext: null,
      currentSelectedTopmostSuperBlockContext: null,
      currentSelectedElementContext: null,
      currentValid: props.currentValid,
      // ensure SSR compatibility
      // since we cannot read the CSS file on the server side
      // as we have no access to stylesheets
      allContainers: [],
      allCustom: [],
      allRichClasses: [],
      allTables: [],
      allowsInsertElement: falseFn,
      allowsText: false,
      inlineIsVoid: false,
      blockIsVoid: false,
      topmostSuperblockIsVoid: false,
      superBlockUIHandler: null,
      blockUIHandler: null,
      inlineUIHandler: null
    };
    this.isUnmounted = false;
    const rawEditor = createEditor();
    this.editor = withReact(withHistory(rawEditor));
    this.forceFocus = this.forceFocus.bind(this);
    this.forceBlur = this.forceBlur.bind(this);
    this.normalizeNode = this.normalizeNode.bind(this);
    this.insertBreak = this.insertBreak.bind(this);
    this.insertSuperbreak = this.insertSuperbreak.bind(this);
    this.deleteBackward = this.deleteBackward.bind(this);
    this.deleteForward = this.deleteForward.bind(this);
    this.setFragmentData = this.setFragmentData.bind(this);
    this.findAndAppendFilesToDataTransfer = this.findAndAppendFilesToDataTransfer.bind(this);
    this.insertData = this.insertData.bind(this);
    this.findAndInsertFilesFromDataTransfer = this.findAndInsertFilesFromDataTransfer.bind(this);
    this.isVoid = this.isVoid.bind(this);
    this.getContextFor = this.getContextFor.bind(this);
    this.getRootContext = this.getRootContext.bind(this);
    this.originalSetFragmentData = this.editor.setFragmentData;
    this.originalInsertData = this.editor.insertData;
    this.editor.isInline = this.isInline;
    this.editor.isVoid = this.isVoid;
    this.editor.normalizeNode = this.normalizeNode;
    this.editor.insertBreak = this.insertBreak;
    this.editor.deleteBackward = this.deleteBackward;
    this.editor.deleteForward = this.deleteForward;
    this.editor.setFragmentData = this.setFragmentData;
    this.editor.insertData = this.insertData;
    this.getPreviousSelectedElementAnchor = this.getPreviousSelectedElementAnchor.bind(this);
    this.getPreviousTextAnchor = this.getPreviousTextAnchor.bind(this);
    this.deleteSelectedNode = this.deleteSelectedNode.bind(this);
    this.deletePath = this.deletePath.bind(this);
    this.setValue = this.setValue.bind(this);
    this.renderElement = this.renderElement.bind(this);
    this.actuallyRenderElement = this.actuallyRenderElement.bind(this);
    this.onChange = this.onChange.bind(this);
    this.renderText = this.renderText.bind(this);
    this.onFocusedChange = this.onFocusedChange.bind(this);
    this.onBlurredChange = this.onBlurredChange.bind(this);
    this.onKeyDown = this.onKeyDown.bind(this);
    this.deleteTableColumn = this.deleteTableColumn.bind(this);
    this.deleteTableRow = this.deleteTableRow.bind(this);
    this.selectPath = this.selectPath.bind(this);
    this.movePaths = this.movePaths.bind(this);
    this.focus = this.focus.bind(this);
    this.insertImage = this.insertImage.bind(this);
    this.insertVideo = this.insertVideo.bind(this);
    this.updateVideo = this.updateVideo.bind(this);
    this.insertFile = this.insertFile.bind(this);
    this.insertTemplateText = this.insertTemplateText.bind(this);
    this.updateTemplateText = this.updateTemplateText.bind(this);
    this.insertTemplateHTML = this.insertTemplateHTML.bind(this);
    this.updateTemplateHTML = this.updateTemplateHTML.bind(this);
    this.insertTable = this.insertTable.bind(this);
    this.insertTableColumn = this.insertTableColumn.bind(this);
    this.insertTableRow = this.insertTableRow.bind(this);
    this.toggleTable = this.toggleTable.bind(this);
    this.canToggleTable = this.canToggleTable.bind(this);
    this.insertContainer = this.insertContainer.bind(this);
    this.insertCustom = this.insertCustom.bind(this);
    this.toggleQuote = this.toggleQuote.bind(this);
    this.toggleTitle = this.toggleTitle.bind(this);
    this.insertList = this.insertList.bind(this);
    this.toggleLink = this.toggleLink.bind(this);
    this.updateLink = this.updateLink.bind(this);
    this.setStyle = this.setStyle.bind(this);
    this.set = this.set.bind(this);
    this.setHoverStyle = this.setHoverStyle.bind(this);
    this.setActiveStyle = this.setActiveStyle.bind(this);
    this.setRichClasses = this.setRichClasses.bind(this);
    this.setContext = this.setContext.bind(this);
    this.setIfCondition = this.setIfCondition.bind(this);
    this.setForEach = this.setForEach.bind(this);
    this.formatToggle = this.formatToggle.bind(this);
    this.setAction = this.setAction.bind(this);
    this.insertElement = this.insertElement.bind(this);
    this.getState = this.getState.bind(this);
    this.setUIHandler = this.setUIHandler.bind(this);
    this.setUIHandlerArg = this.setUIHandlerArg.bind(this);
    this.availableFilteringFunction = this.availableFilteringFunction.bind(this);
    this.calculateAnchors = this.calculateAnchors.bind(this);
    this.updateNodeAt = this.updateNodeAt.bind(this);
    this.insertNodeAt = this.insertNodeAt.bind(this);
    this.deleteNodeAt = this.deleteNodeAt.bind(this);
    this.mergeNodesAt = this.mergeNodesAt.bind(this);
    this.splitElementAndEscapeChildIntoParentAt = this.splitElementAndEscapeChildIntoParentAt.bind(this);
    this.wrapNodeAt = this.wrapNodeAt.bind(this);
    this.getNodeAt = this.getNodeAt.bind(this);
    this.cloneElementAt = this.cloneElementAt.bind(this);
    this.moveNodeAt = this.moveNodeAt.bind(this);
    this.hardBlur = this.hardBlur.bind(this);
    this.selectiveHardBlurIfHasSelectedElement = this.selectiveHardBlurIfHasSelectedElement.bind(this);
    this.softBlur = this.softBlur.bind(this);
  }
  /**
   * The standard derived state function is used in order to set the state in an effective way
   * it is used because the behaviour of this editor is rather complex
   * @param props the current props
   * @param state the current state
   * @returns a partial of the new state or null
   */
  static getDerivedStateFromProps(props, state) {
    if (state.synced) {
      if (props.treeValue) {
        if (!state.treeValue || props.treeValue.id !== state.treeValue.id) {
          return {
            treeValue: props.treeValue,
            isRichText: props.isRichText,
            currentRootContext: props.rootContext || null,
            currentValid: props.currentValid,
            currentText: null,
            currentInlineElement: null,
            currentBlockElement: null,
            currentSuperBlockElements: null,
            currentTextAnchor: null,
            currentInlineElementAnchor: null,
            currentBlockElementAnchor: null,
            currentSuperBlockElementAnchors: null,
            currentSelectedText: null,
            currentSelectedInlineElement: null,
            currentSelectedBlockElement: null,
            currentSelectedSuperBlockElements: null,
            currentSelectedTextAnchor: null,
            currentSelectedInlineElementAnchor: null,
            currentSelectedBlockElementAnchor: null,
            currentSelectedSuperBlockElementAnchors: null,
            currentSelectedBlockContext: null,
            currentSelectedInlineContext: null,
            currentSelectedTopmostSuperBlockContext: null,
            currentSelectedElement: null,
            currentSelectedElementAnchor: null,
            currentSelectedElementContext: null,
            previousSelectedElementAnchor: null,
            previousTextAnchor: null,
            allowsInsertElement: falseFn,
            allowsText: false,
            inlineIsVoid: false,
            blockIsVoid: false,
            topmostSuperblockIsVoid: false,
            superBlockUIHandler: null,
            blockUIHandler: null,
            inlineUIHandler: null
          };
        }
      } else {
        const newtreeValue = props.isRichText ? deserialize(props.value, state.treeValue, {
          useContextRulesOf: state.currentRootContext
        }) : deserializePlain(props.value, state.treeValue);
        if (!state.treeValue || newtreeValue.id !== state.treeValue.id) {
          return {
            treeValue: newtreeValue,
            isRichText: props.isRichText,
            currentRootContext: props.rootContext || null,
            currentValid: props.currentValid,
            currentText: null,
            currentInlineElement: null,
            currentBlockElement: null,
            currentSuperBlockElements: null,
            currentTextAnchor: null,
            currentInlineElementAnchor: null,
            currentBlockElementAnchor: null,
            currentSuperBlockElementAnchors: null,
            currentSelectedText: null,
            currentSelectedInlineElement: null,
            currentSelectedBlockElement: null,
            currentSelectedSuperBlockElements: null,
            currentSelectedTextAnchor: null,
            currentSelectedInlineElementAnchor: null,
            currentSelectedBlockElementAnchor: null,
            currentSelectedSuperBlockElementAnchors: null,
            currentSelectedElement: null,
            currentSelectedElementAnchor: null,
            previousSelectedElementAnchor: null,
            previousTextAnchor: null,
            allowsInsertElement: falseFn,
            allowsText: false,
            inlineIsVoid: false,
            blockIsVoid: false,
            topmostSuperblockIsVoid: false,
            superBlockUIHandler: null,
            blockUIHandler: null,
            inlineUIHandler: null
          };
        }
      }
    }
    return null;
  }
  /**
   * This function runs and prepares the tree that is to be inserted into the
   * pasted content
   * @param data the data transfer of the clipboard
   * @param blobs an object that contains the blob transfer object
   * @param element the element we are currently processing
   */
  async findAndInsertFilesFromDataTransfer(data, element) {
    let newElement = element;
    let wasOverwritten = false;
    if (newElement.type === "image" || newElement.type === "file") {
      const idSpecified = newElement.srcId;
      const urlToReadFrom = newElement.src;
      const existantFile = newElement.type === "image" ? this.props.onRetrieveImage(idSpecified) : this.props.onRetrieveFile(idSpecified);
      if (existantFile) {
        if (newElement.type === "image") {
          const newImageNode = __spreadProps(__spreadValues({}, newElement), {
            type: "image",
            children: [
              {
                bold: false,
                italic: false,
                text: "",
                underline: false
              }
            ],
            src: existantFile.file.url,
            srcSet: existantFile.srcset,
            sizes: "70vw"
          });
          newElement = newImageNode;
          wasOverwritten = true;
        } else {
          const newFileNode = __spreadProps(__spreadValues({}, newElement), {
            type: "file",
            children: [
              {
                bold: false,
                italic: false,
                text: "",
                underline: false
              }
            ],
            src: existantFile.url
          });
          newElement = newFileNode;
          wasOverwritten = true;
        }
      } else {
        const infoFromInsert = await this.props.onInsertFileFromURL(
          urlToReadFrom,
          newElement.fileName || newElement.alt || idSpecified,
          newElement.type === "image"
        );
        if (infoFromInsert) {
          if (newElement.type === "image") {
            const imageNode = __spreadProps(__spreadValues({}, newElement), {
              type: "image",
              children: [
                {
                  bold: false,
                  italic: false,
                  text: "",
                  underline: false
                }
              ],
              height: infoFromInsert.height,
              width: infoFromInsert.width,
              src: infoFromInsert.result.url,
              srcId: infoFromInsert.result.id,
              srcSet: null
            });
            newElement = imageNode;
            wasOverwritten = true;
          } else {
            const fileNode = __spreadProps(__spreadValues({}, newElement), {
              type: "file",
              children: [
                {
                  bold: false,
                  italic: false,
                  text: "",
                  underline: false
                }
              ],
              size: prettyBytes(infoFromInsert.result.size),
              src: infoFromInsert.result.url,
              srcId: infoFromInsert.result.id
            });
            newElement = fileNode;
            wasOverwritten = true;
          }
        } else {
          newElement = null;
          wasOverwritten = true;
        }
      }
    }
    if (newElement && newElement.children && !wasOverwritten) {
      newElement = __spreadValues({}, newElement);
      newElement.children = (await Promise.all(newElement.children.map(this.findAndInsertFilesFromDataTransfer.bind(this, data)))).filter((e2) => !!e2);
    }
    return newElement;
  }
  /**
   * This function runs when we are inserting using the slate clipboard
   * @param data the data transfer
   */
  async insertData(data) {
    const fragment2 = data.getData("application/x-slate-fragment");
    if (fragment2) {
      console.warn("The editor used the fallback clipboard mechanism rather than the new clipboard, files may fail to load");
      const decoded = decodeURIComponent(window.atob(fragment2));
      const parsed = (await Promise.all(JSON.parse(decoded).map(this.findAndInsertFilesFromDataTransfer.bind(this, data)))).filter((e2) => !!e2);
      if (!parsed || !parsed.length) {
        console.warn("Failed to find children to add");
        return;
      }
      const shouldUseInsertFragment = !isSuperBlock(parsed[0]);
      if (shouldUseInsertFragment) {
        Transforms.insertFragment(this.editor, parsed);
      } else if (this.state.currentBlockElementAnchor) {
        Transforms.insertNodes(this.editor, parsed);
      }
      return;
    }
    if (data.files.length) {
      Array.from(data.files).forEach((f) => {
        if (this.props.supportedImageTypes.includes(f.type)) {
          this.insertImage(f, false);
        } else {
          this.insertFile(f);
        }
      });
      return;
    }
    const htmlData = data.getData("text/html");
    if (htmlData) {
      const deserialized = deserialize(htmlData, null, {
        dontNormalize: true
      });
      const parsed = (await Promise.all(deserialized.children.map(this.findAndInsertFilesFromDataTransfer.bind(this, data)))).filter((e2) => !!e2);
      if (!parsed || !parsed.length) {
        console.warn("Failed to find children to add");
        return;
      }
      const shouldUseInsertFragment = !isSuperBlock(parsed[0]);
      if (shouldUseInsertFragment) {
        Transforms.insertFragment(this.editor, parsed);
      } else if (this.state.currentBlockElementAnchor) {
        Transforms.insertNodes(this.editor, parsed);
      }
      return;
    } else {
      this.originalInsertData(data);
      return;
    }
  }
  getDataURI(blob) {
    const reader = new FileReader();
    reader.readAsDataURL(blob);
    return new Promise((resolve, reject) => {
      reader.addEventListener(
        "load",
        () => {
          resolve(reader.result);
        },
        false
      );
      reader.addEventListener("error", () => {
        reject();
      });
    });
  }
  /**
   * Runs per each rich element that has just been copied to the clipboard
   * @param data the data transfer
   * @param element the rich element we have just copied
   */
  async findAndAppendFilesToDataTransfer(data, element) {
    if (element.type === "image" || element.type === "file") {
      const urlToReadFrom = element.src;
      try {
        const blob = await (await fetch(urlToReadFrom)).blob();
        const dataURI = await this.getDataURI(blob);
        element.src = dataURI;
        delete element.srcSet;
      } catch (err) {
      }
    }
    if (element.children) {
      await Promise.all(element.children.map(this.findAndAppendFilesToDataTransfer.bind(this, data)));
    }
  }
  /**
   * This function runs when we are preparing the slate clipboard
   * @param data the data transfer
   */
  async setFragmentData(data) {
    this.originalSetFragmentData(data);
    const fragment64 = data.getData("application/x-slate-fragment");
    if (fragment64 && navigator.clipboard) {
      const copyDataTree = JSON.parse(decodeURIComponent(atob(fragment64)));
      await Promise.all(copyDataTree.map(this.findAndAppendFilesToDataTransfer.bind(this, data)));
      const document2 = {
        children: copyDataTree,
        id: "COPY_ELEMENT",
        rich: true,
        type: "document"
      };
      const html = serialize(document2);
      const htmlStr = html.map((n3) => n3.outerHTML).join("");
      const text = serializeString(document2);
      const textPlain = new Blob([text], { type: "text/plain" });
      const htmlBody = new Blob([htmlStr], { type: "text/html" });
      const item = new ClipboardItem({
        "text/plain": textPlain,
        "text/html": htmlBody
      });
      await navigator.clipboard.write([item]);
    }
  }
  updateNodeAt(path3, v) {
    Transforms.setNodes(this.editor, v, {
      at: path3
    });
  }
  deleteNodeAt(path3) {
    Transforms.delete(this.editor, {
      at: path3
    });
  }
  insertNodeAt(path3, node3, targetIndex) {
    Transforms.insertNodes(this.editor, node3, {
      at: [...path3, targetIndex]
    });
  }
  mergeNodesAt(basePath, referencePath) {
    const parentPath = [...basePath];
    parentPath.pop();
    Transforms.mergeNodes(this.editor, {
      at: referencePath,
      voids: true
    });
  }
  splitElementAndEscapeChildIntoParentAt(path3, escapingChildIndex) {
    Transforms.liftNodes(this.editor, {
      at: [...path3, escapingChildIndex]
    });
  }
  wrapNodeAt(path3, wrappers) {
    wrappers.forEach((wrapper) => {
      Transforms.wrapNodes(this.editor, wrapper, {
        at: path3
      });
    });
  }
  getNodeAt(path3) {
    return Node.get(this.editor, path3);
  }
  cloneElementAt(fromPath, toPath) {
    const toCopyNode = this.getNodeAt(fromPath);
    const copy = __spreadValues({}, toCopyNode);
    copy.children = [];
    Transforms.insertNodes(this.editor, copy, {
      at: toPath
    });
  }
  moveNodeAt(fromPath, toPath) {
    Transforms.moveNodes(this.editor, {
      at: fromPath,
      to: toPath
    });
  }
  /**
   * Normalization funciton that overrides the normalization
   * of the standard editor
   * @param entry the entry we are normalizing
   */
  normalizeNode(entry) {
    if (this.isInNormalization || this.preventNormalize) {
      return;
    }
    const [node3, path3] = entry;
    if (Editor.isEditor(node3)) {
      this.isInNormalization = true;
      if (node3.children.length === 0) {
        Transforms.insertNodes(
          this.editor,
          { type: "paragraph", children: [STANDARD_TEXT_NODE()] },
          { at: path3.concat(0) }
        );
      } else {
        const pseudoDocument = {
          type: "document",
          children: node3.children,
          id: this.state.treeValue.id,
          rich: this.state.treeValue.rich
        };
        const nodeAtSelection = this.editor.selection ? this.getNodeAt(this.editor.selection.anchor.path) : null;
        const nodeIgnore = [];
        if (Text.isText(nodeAtSelection) && nodeAtSelection.text === "") {
          nodeIgnore.push(this.editor.selection.anchor.path);
        }
        try {
          normalizeElement(
            pseudoDocument,
            [],
            pseudoDocument,
            {
              workOnOriginal: false,
              updateNodeAt: this.updateNodeAt,
              deleteNodeAt: this.deleteNodeAt,
              insertNodeAt: this.insertNodeAt,
              mergeNodesAt: this.mergeNodesAt,
              splitElementAndEscapeChildIntoParentAt: this.splitElementAndEscapeChildIntoParentAt,
              wrapNodeAt: this.wrapNodeAt,
              getNodeAt: this.getNodeAt,
              cloneElementAt: this.cloneElementAt,
              moveNodeAt: this.moveNodeAt
            },
            {
              ignoreNodesAt: nodeIgnore,
              useContextRulesOf: this.state.currentRootContext
            }
          );
        } catch (err) {
          console.error(err.stack);
        }
      }
      this.isInNormalization = false;
    }
  }
  /**
   * Override for the default editor inline function
   * @param element the element that is to be considered
   * @returns a boolean on whether it represents an inline element
   */
  isInline(element) {
    return isInline(element);
  }
  /**
   * Override for the default editor void function
   * @param element the element that is to be considered
   * @returns a boolean on whether it represents a void element
   */
  isVoid(element) {
    return isVoid(element);
  }
  /**
   * Override for the default editor insert break function
   */
  insertBreak() {
    const currentSuperBlockElement = this.state.currentSuperBlockElements && this.state.currentSuperBlockElements[this.state.currentSuperBlockElements.length - 1];
    const isListItemBreak = currentSuperBlockElement && // and we are within a list and a list item
    currentSuperBlockElement.type === "list-item";
    if (
      // if we are simply collapsed
      Range.isCollapsed(this.editor.selection) && // and we have a list item
      isListItemBreak && // and that first children is an empty paragraph
      // there may be a second list
      currentSuperBlockElement.children[0].type === "paragraph" && // with one empty text node
      currentSuperBlockElement.children[0].children.length === 1 && Text.isText(currentSuperBlockElement.children[0].children[0]) && currentSuperBlockElement.children[0].children[0].text === ""
    ) {
      this.breakList();
      return;
    }
    if (!this.state.currentBlockElement) {
      Transforms.splitNodes(this.editor, { always: true });
      return;
    }
    if (this.editor.isVoid(this.state.currentBlockElement)) {
      Transforms.insertNodes(this.editor, {
        type: "paragraph",
        children: [
          __spreadProps(__spreadValues({}, this.state.currentText), {
            text: ""
          })
        ]
      });
      return;
    }
    const end2 = Range.end(this.editor.selection);
    const finalBlockPath = [...this.state.currentBlockElementAnchor];
    let lastChild = this.state.currentBlockElement;
    if (lastChild && Element2.isElement(lastChild)) {
      do {
        const lastPoint = lastChild.children.length - 1;
        lastChild = lastChild.children[lastPoint];
        finalBlockPath.push(lastPoint);
      } while (Element2.isElement(lastChild));
    }
    const finalBlockOffset = lastChild ? lastChild.text.length : null;
    const isEndOfLine = end2.offset === finalBlockOffset && Path.equals(finalBlockPath, end2.path);
    if (isListItemBreak) {
      Transforms.splitNodes(this.editor, { always: true, match: (n3) => n3.type === "list-item" });
    } else {
      Transforms.splitNodes(this.editor, { always: true });
    }
    if (isEndOfLine) {
      Transforms.setNodes(this.editor, {
        uiHandler: null,
        html: null,
        uiHandlerArgs: null,
        textContent: null
      }, {
        match: (n3) => {
          return isBlock(n3);
        },
        mode: "lowest",
        at: this.editor.selection.anchor.path
      });
    }
  }
  /**
   * Override function to perform a forward delete
   * backwards event
   * @param unit the unit we are dealing with
   */
  deleteForward(unit) {
    const { selection } = this.editor;
    if (selection && Range.isCollapsed(selection)) {
      if (this.state.currentBlockElement && this.state.currentBlockElement.children.length === 1 && Text.isText(this.state.currentBlockElement.children[0]) && this.state.currentBlockElement.children[0].text === "") {
        Transforms.delete(this.editor, { at: this.state.currentBlockElementAnchor });
      } else {
        Transforms.delete(this.editor, { unit });
      }
    }
  }
  /**
   * Override function to perform a standard delete
   * backwards event
   * @param unit the unit we are dealing with
   */
  deleteBackward(unit) {
    const { selection } = this.editor;
    const currentSuperBlockElement = this.state.currentSuperBlockElements && this.state.currentSuperBlockElements[this.state.currentSuperBlockElements.length - 1];
    if (selection && // and it's collapsed
    Range.isCollapsed(selection) && currentSuperBlockElement && currentSuperBlockElement.type === "list-item" && // and we are deleting a character of a word
    ((unit === "character" || unit === "word") && // and we are at the start of the block
    selection.anchor.offset === 0 || // or we are removing a line or block
    (unit === "line" || unit == "block"))) {
      this.breakList();
    } else if (selection && Range.isCollapsed(selection)) {
      Transforms.delete(this.editor, { unit, reverse: true });
    }
  }
  /**
   * Breaks the list based on the current selection
   * we must be in a list currently, this function is called
   * by the delete backwards functionality as well as the toggle
   * list one
   */
  breakList() {
    this.preventNormalize = true;
    Transforms.unwrapNodes(
      this.editor,
      {
        match: (n3) => {
          return n3.type === "list";
        },
        mode: "lowest",
        split: true
      }
    );
    this.preventNormalize = false;
    Transforms.unwrapNodes(
      this.editor,
      {
        match: (n3) => {
          return n3.type === "list-item";
        },
        mode: "lowest",
        split: true
      }
    );
  }
  /**
   * Inserts a superblock break, since you might not be able to escape
   * superblocks, eg. such as a single container, you will use a superblock break
   * alt+enter in order to escape the superblock
   * 
   * @param at the path of the superblock to insert a break at
   * @param reverse whether to insert it before or after, by default it will be after, use this flag for before
   */
  insertSuperbreak(at, reverse) {
    let currentElementToBreakFromAnchor = at || this.state.currentBlockElement && isVoid(this.state.currentBlockElement) && this.state.currentBlockElementAnchor || this.state.currentSuperBlockElements && this.state.currentSuperBlockElementAnchors[this.state.currentSuperBlockElementAnchors.length - 1];
    if (!currentElementToBreakFromAnchor) {
      return;
    }
    let currentElementToBreakFrom = Node.get(this.editor, currentElementToBreakFromAnchor);
    currentElementToBreakFromAnchor = [...currentElementToBreakFromAnchor];
    let parentSuperBlockElementAnchor = [...currentElementToBreakFromAnchor];
    parentSuperBlockElementAnchor.pop();
    let parentSuperBlockElement = null;
    while (true) {
      parentSuperBlockElement = Node.get(this.editor, parentSuperBlockElementAnchor);
      const allowsChildren = SERIALIZATION_REGISTRY.ALLOWS_CHILDREN[parentSuperBlockElement.type];
      const canParentHaveParagraphAsChildren = !allowsChildren || allowsChildren.includes("paragraph");
      const isASoloEscapableType = currentElementToBreakFrom.type === "list";
      if (
        // list and list items can be escaped by
        // standard entering so we don't allow that as a break point
        !isASoloEscapableType && canParentHaveParagraphAsChildren || !parentSuperBlockElementAnchor.length
      ) {
        break;
      }
      parentSuperBlockElementAnchor.pop();
      currentElementToBreakFromAnchor.pop();
      currentElementToBreakFrom = Node.get(this.editor, currentElementToBreakFromAnchor);
    }
    ;
    if (currentElementToBreakFrom.type === "list") {
      return;
    }
    const nextAnchor = currentElementToBreakFromAnchor;
    if (!reverse) {
      nextAnchor[nextAnchor.length - 1]++;
    }
    Transforms.insertNodes(this.editor, {
      type: "paragraph",
      children: [
        {
          text: ""
        }
      ]
    }, { at: nextAnchor });
    const nextAnchorText = nextAnchor.concat([0]);
    this.focusAt({
      anchor: {
        offset: 0,
        path: nextAnchorText
      },
      focus: {
        offset: 0,
        path: nextAnchorText
      }
    });
  }
  /**
   * Calculates the anchors and the context based on a given value
   * (or the current value of the editor) and the selection nodes
   * that are currently selected (or it will override with the defaults)
   * @param anchor the anchor that is currently deemed to be selected at
   * @param value the value that we are working with, if not provided it will take it from the state
   * @param currentGivenSelectedNodeAnchor the selected node anchor, and text anchor if not provided
   * it will use the default values based on the logic of the calculated anchors
   */
  calculateAnchors(anchor, value, currentGivenSelectedNodeAnchor) {
    let currentInlineElement = null;
    let currentInlineElementAnchor = null;
    let currentBlockElement = null;
    let currentBlockElementAnchor = null;
    let currentSuperBlockElements = null;
    let currentSuperBlockElementAnchors = null;
    let currentText = null;
    let currentTextAnchor = null;
    let previousSelectedElementAnchor = this.state.currentSelectedElementAnchor;
    let previousTextAnchor = this.state.currentTextAnchor;
    if (anchor) {
      let currentLoopingElement = value ? {
        children: value
      } : this.state.treeValue;
      const loopingAnchor = [];
      anchor.forEach((n3, index) => {
        loopingAnchor.push(n3);
        currentLoopingElement = currentLoopingElement && currentLoopingElement.children[n3];
        if (currentLoopingElement && SERIALIZATION_REGISTRY.INLINES[currentLoopingElement.type]) {
          currentInlineElement = currentLoopingElement;
          currentInlineElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.BLOCKS[currentLoopingElement.type]) {
          currentBlockElement = currentLoopingElement;
          currentBlockElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.SUPERBLOCKS[currentLoopingElement.type]) {
          if (!currentSuperBlockElements) {
            currentSuperBlockElements = [];
            currentSuperBlockElementAnchors = [];
          }
          currentSuperBlockElements.push(currentLoopingElement);
          currentSuperBlockElementAnchors.push([...loopingAnchor]);
        }
        if (currentLoopingElement && Text.isText(currentLoopingElement)) {
          currentText = currentLoopingElement;
          currentTextAnchor = [...loopingAnchor];
        }
      });
    }
    let currentSelectedInlineElementAnchor = null;
    let currentSelectedInlineElement = null;
    let currentSelectedBlockElement = null;
    let currentSelectedSuperBlockElements = null;
    let currentSelectedBlockElementAnchor = null;
    let currentSelectedSuperBlockElementAnchors = null;
    let currentSelectedText = null;
    let currentSelectedTextAnchor = null;
    let givenSelectedNodeAnchorIsCorrupted = false;
    if (currentGivenSelectedNodeAnchor) {
      let currentSelectedElementCorruptionTest = value ? {
        children: value
      } : this.state.treeValue;
      givenSelectedNodeAnchorIsCorrupted = currentGivenSelectedNodeAnchor.some((n3, index) => {
        if (!currentSelectedElementCorruptionTest || !currentSelectedElementCorruptionTest.children || !currentSelectedElementCorruptionTest.children[n3]) {
          return true;
        }
        currentSelectedElementCorruptionTest = currentSelectedElementCorruptionTest.children[n3];
      });
    }
    if (!currentGivenSelectedNodeAnchor || givenSelectedNodeAnchorIsCorrupted) {
      currentSelectedInlineElementAnchor = currentInlineElementAnchor;
      currentSelectedInlineElement = currentInlineElement;
      currentSelectedBlockElement = currentBlockElement;
      currentSelectedBlockElementAnchor = currentBlockElementAnchor;
      currentSelectedSuperBlockElements = currentSuperBlockElements;
      currentSelectedSuperBlockElementAnchors = currentSuperBlockElementAnchors;
      currentSelectedText = currentText;
      currentSelectedTextAnchor = currentTextAnchor;
    } else {
      const loopingAnchor = [];
      let currentLoopingElement = value ? {
        children: value
      } : this.state.treeValue;
      currentGivenSelectedNodeAnchor.forEach((n3, index) => {
        currentLoopingElement = currentLoopingElement && currentLoopingElement.children[n3];
        loopingAnchor.push(n3);
        if (currentLoopingElement && SERIALIZATION_REGISTRY.INLINES[currentLoopingElement.type]) {
          currentSelectedInlineElement = currentLoopingElement;
          currentSelectedInlineElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.BLOCKS[currentLoopingElement.type]) {
          currentSelectedBlockElement = currentLoopingElement;
          currentSelectedBlockElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.SUPERBLOCKS[currentLoopingElement.type]) {
          if (!currentSelectedSuperBlockElements) {
            currentSelectedSuperBlockElements = [];
            currentSelectedSuperBlockElementAnchors = [];
          }
          currentSelectedSuperBlockElements.push(currentLoopingElement);
          currentSelectedSuperBlockElementAnchors.push([...loopingAnchor]);
        }
        if (currentLoopingElement && Text.isText(currentLoopingElement)) {
          currentSelectedText = currentLoopingElement;
          currentSelectedTextAnchor = [...loopingAnchor];
        }
      });
    }
    const pseudoDocument = {
      type: "document",
      children: value,
      id: this.state.treeValue.id,
      rich: this.state.treeValue.rich
    };
    const currentSelectedTopmostSuperBlockContext = getContextFor(
      currentSelectedSuperBlockElementAnchors && currentSelectedSuperBlockElementAnchors[currentSelectedSuperBlockElementAnchors.length - 1],
      "final",
      pseudoDocument,
      this.state.currentRootContext
    );
    const currentSelectedBlockContext = getContextFor(
      currentSelectedBlockElementAnchor,
      "final",
      pseudoDocument,
      this.state.currentRootContext
    );
    const currentSelectedInlineContext = getContextFor(
      currentSelectedInlineElementAnchor,
      "final",
      pseudoDocument,
      this.state.currentRootContext
    );
    const baseSuperBlock = currentSelectedSuperBlockElements && currentSelectedSuperBlockElements[currentSelectedSuperBlockElements.length - 1] || pseudoDocument;
    const baseAllowedChildreOfSuperBlock = baseSuperBlock ? getAllowedChildrenTypes(baseSuperBlock) : [];
    const superBlockUIHandler = getUIHandlerValueWithKnownContextFor(
      baseSuperBlock,
      currentSelectedTopmostSuperBlockContext || this.state.currentRootContext,
      this.state.currentRootContext
    );
    const baseBlock = currentSelectedBlockElement;
    const baseAllowedChildrenOfBlock = baseBlock ? getAllowedChildrenTypes(baseBlock) : [];
    const blockUIHandler = getUIHandlerValueWithKnownContextFor(
      baseBlock,
      currentSelectedBlockContext,
      this.state.currentRootContext
    );
    const inlineUIHandler = getUIHandlerValueWithKnownContextFor(
      currentSelectedInlineElement,
      currentSelectedInlineContext,
      this.state.currentRootContext
    );
    const allowsInsertElement = (element, opts = {}) => {
      if (opts.collapsed || opts.extended || opts.selected) {
        if (opts.selected && !this.editor.selection) {
          return false;
        }
        const isCollapsed = this.editor.selection && Range.isCollapsed(this.editor.selection);
        if (!isCollapsed && opts.collapsed) {
          return false;
        } else if (isCollapsed && opts.extended) {
          return false;
        }
      }
      if (isSuperBlock(element) || isBlock(element)) {
        if (!baseAllowedChildreOfSuperBlock.includes(element.type)) {
          return false;
        }
        return superBlockUIHandler && superBlockUIHandler.allowsChildren ? superBlockUIHandler.allowsChildren(element, baseSuperBlock) : true;
      } else if (isInline(element)) {
        if (!baseAllowedChildrenOfBlock.includes(element.type)) {
          return false;
        }
        return blockUIHandler && blockUIHandler.allowsChildren ? blockUIHandler.allowsChildren(element, baseBlock) : true;
      } else {
        return false;
      }
    };
    const topmostSuperblock = currentSelectedSuperBlockElements && currentSelectedSuperBlockElements[currentSelectedSuperBlockElements.length - 1];
    const topmostSuperblockAnchor = currentSelectedSuperBlockElementAnchors && currentSelectedSuperBlockElementAnchors[currentSelectedSuperBlockElementAnchors.length - 1];
    const inlineIsVoid = currentSelectedInlineElement ? isVoid(currentSelectedInlineElement) : false;
    const blockIsVoid = currentSelectedBlockElement ? isVoid(currentSelectedBlockElement) : false;
    const topmostSuperblockIsVoid = topmostSuperblock ? isVoid(topmostSuperblock) : false;
    const voidElement = inlineIsVoid || blockIsVoid || topmostSuperblockIsVoid;
    const allowsText = !voidElement;
    const currentSelectedElement = currentSelectedInlineElement || currentSelectedBlockElement || topmostSuperblock || null;
    const currentSelectedElementAnchor = currentSelectedInlineElementAnchor || currentSelectedBlockElementAnchor || topmostSuperblockAnchor || null;
    return {
      currentTextAnchor,
      currentText,
      currentBlockElement,
      currentBlockElementAnchor,
      currentInlineElement,
      currentInlineElementAnchor,
      currentSuperBlockElements,
      currentSuperBlockElementAnchors,
      currentSelectedText,
      currentSelectedTextAnchor,
      currentSelectedBlockElement,
      currentSelectedBlockElementAnchor,
      currentSelectedInlineElement,
      currentSelectedInlineElementAnchor,
      currentSelectedSuperBlockElements,
      currentSelectedSuperBlockElementAnchors,
      currentSelectedElement,
      currentSelectedElementAnchor,
      currentSelectedTopmostSuperBlockContext,
      currentSelectedBlockContext,
      currentSelectedInlineContext,
      currentSelectedElementContext: currentSelectedInlineContext || currentSelectedBlockContext || currentSelectedTopmostSuperBlockContext,
      allowsInsertElement,
      allowsText,
      inlineIsVoid,
      blockIsVoid,
      topmostSuperblockIsVoid,
      superBlockUIHandler,
      blockUIHandler,
      inlineUIHandler,
      previousSelectedElementAnchor,
      previousTextAnchor
    };
  }
  /**
   * Triggers on change when the field is focused
   * and has changed
   * @param anchor the anchor that we are at
   * @param value the value that we got
   */
  onFocusedChange(anchor, value) {
    if (this.isUnmounted) {
      return;
    }
    this.setState(this.calculateAnchors(anchor, value));
    if (!this.state.focused) {
      this.props.onFocus && this.props.onFocus();
      this.setState({
        focused: true
      });
    }
  }
  /**
   * Triggers on an on change whent he field is blurred
   * @param value the value that we are working with
   */
  onBlurredChange(value) {
    if (this.isUnmounted) {
      return;
    }
    if (this.state.focused) {
      this.props.onBlur && this.props.onBlur();
    }
    const currentSelectedSuperBlockElementAnchor = this.state.currentSelectedSuperBlockElementAnchors && this.state.currentSelectedSuperBlockElementAnchors[this.state.currentSelectedSuperBlockElementAnchors.length - 1];
    const currentSelectedAnchor = this.state.currentSelectedTextAnchor || this.state.currentSelectedInlineElementAnchor || this.state.currentSelectedBlockElementAnchor || currentSelectedSuperBlockElementAnchor;
    const anchorData = this.calculateAnchors(
      // no anchor as it is not known
      null,
      // the value
      value,
      // and we pass the selected node anchor as it
      // remains even after the selection only if
      // we have not just deleted that node
      currentSelectedAnchor && !this.lastChangeWasSelectedDelete ? currentSelectedAnchor : null
    );
    this.setState(__spreadValues({
      focused: false
    }, anchorData));
  }
  /**
   * An optimization so that the component updates only when it's necessary
   * @param nextProps the next properties
   * @param nextState the next state
   */
  shouldComponentUpdate(nextProps, nextState) {
    const standardUpdate = nextProps.id !== this.props.id || nextProps.lang !== this.props.lang || nextProps.currentValid !== this.props.currentValid || nextState.focused !== this.state.focused || nextProps.Wrapper !== this.props.Wrapper || nextProps.isRichText !== this.props.isRichText || nextProps.rootContext !== this.props.rootContext || nextProps.baseI18n !== this.props.baseI18n || !(0, import_deep_equal2.default)(nextState.currentTextAnchor, this.state.currentTextAnchor, { strict: true }) || !(0, import_deep_equal2.default)(nextState.currentSelectedTextAnchor !== this.state.currentSelectedTextAnchor, { strict: true }) || nextState.currentRootContext !== this.state.currentRootContext || nextProps.currentLoadError !== this.props.currentLoadError || nextProps.elementWrappers !== this.props.elementWrappers || !(0, import_deep_equal2.default)(this.state.allContainers, nextState.allContainers, { strict: true }) || !(0, import_deep_equal2.default)(this.state.allTables, nextState.allTables, { strict: true }) || !(0, import_deep_equal2.default)(this.state.allCustom, nextState.allCustom, { strict: true }) || !(0, import_deep_equal2.default)(this.state.allRichClasses, nextState.allRichClasses, { strict: true }) || !(0, import_deep_equal2.default)(nextProps.wrapperArgs, this.props.wrapperArgs, { strict: true }) || !(0, import_deep_equal2.default)(nextProps.elementWrappersArgs, this.props.elementWrappersArgs, { strict: true }) || !(0, import_deep_equal2.default)(nextProps.features, this.props.features, { strict: true });
    if (standardUpdate) {
      return true;
    }
    if (nextProps.treeValue && nextState.synced) {
      return nextProps.treeValue.id !== this.state.treeValue.id;
    }
    return true;
  }
  /**
   * Sets the value off the rich text
   * @param v the value to set
   */
  setValue(v) {
    if (this.isUnmounted || this.props.disabled) {
      return;
    }
    const newRootDocument = {
      // we don't know the id yet
      id: null,
      type: "document",
      rich: this.state.treeValue.rich,
      children: v
    };
    const serialized = serializeString(newRootDocument);
    newRootDocument.id = getUUIDFor(serialized);
    clearTimeout(this.updateTimeout);
    const isEqual = (serialized || null) === (this.props.value || null);
    if (isEqual) {
      this.setState({
        treeValue: newRootDocument,
        synced: true
      });
    } else {
      this.setState({
        treeValue: newRootDocument,
        synced: false
      });
      this.updateTimeout = setTimeout(() => {
        if (this.state.treeValue.rich) {
          if (this.props.cacheStoreCountGlobal) {
            const count = countSize(this.state.treeValue);
            window[this.props.cacheStoreCountGlobal] = count;
          }
        }
        this.props.onChange(serializeString(this.state.treeValue), this.state.treeValue);
        this.updateTimeout = setTimeout(() => {
          if (!this.isUnmounted) {
            this.setState({
              synced: true
            });
          }
        }, 30);
      }, 300);
    }
  }
  /**
   * Provides the context a given node is sitting in
   * @param n the node in question
   * @param onlySwichingContext provides the context only if it was set
   * by the given node otherwise it will return null
   */
  getContextFor(n3, level, onlySwichingContext) {
    if (onlySwichingContext) {
      const nodeAsRichElement = Path.isPath(n3) ? Node.get(this.editor, n3) : n3;
      if (!nodeAsRichElement.context && !nodeAsRichElement.forEach) {
        return null;
      }
    }
    const pathOfNode = Path.isPath(n3) ? n3 : ReactEditor.findPath(this.editor, n3);
    return getContextFor(
      pathOfNode,
      level || "final",
      this.state.treeValue,
      this.state.currentRootContext
    );
  }
  getRootContext() {
    return this.state.currentRootContext;
  }
  renderElement(props) {
    return /* @__PURE__ */ import_react3.default.createElement(
      CurrentElementRetriever,
      __spreadProps(__spreadValues({}, props), {
        fn: this.actuallyRenderElement
      })
    );
  }
  /**
   * the render element function to be used in slate editor
   * @param props the properties that slate provides to render the component
   */
  actuallyRenderElement(props, isSelected, selectionCriteria, isPrimary) {
    const { attributes, children, element } = props;
    const uiHandler = element.uiHandler;
    let toReturn = null;
    let wasUIHandled = false;
    if (uiHandler) {
      const handlerContext = this.getContextFor(element);
      const uiHandlerArgs = element.uiHandlerArgs;
      let propertiesFromContext = handlerContext && handlerContext.properties && handlerContext.properties[uiHandler];
      if (!propertiesFromContext) {
        propertiesFromContext = this.props.rootContext && this.props.rootContext.properties[uiHandler];
        if (propertiesFromContext && propertiesFromContext.nonRootInheritable) {
          propertiesFromContext = null;
        }
      }
      if (propertiesFromContext && propertiesFromContext.type === "ui-handler" && propertiesFromContext.editorHandler) {
        const HandlerComponent = propertiesFromContext.editorHandler.Component;
        const handlerExtraArgs = propertiesFromContext.editorHandler.extraArgs;
        const passExtraInfo = propertiesFromContext.editorHandler.passSlateInfo;
        const extraInfo = passExtraInfo ? {
          helpers: this.getHelpers(),
          selected: isSelected && isPrimary
        } : {};
        let className = null;
        element.richClassList && element.richClassList.forEach((c) => {
          className = (className || "") + " rich-text--" + c;
        });
        const style = convertStyleStringToReactObject(element.style);
        const styleActive = convertStyleStringToReactObject(element.styleActive);
        const styleHover = convertStyleStringToReactObject(element.styleHover);
        toReturn = /* @__PURE__ */ import_react3.default.createElement(
          HandlerComponent,
          __spreadValues({
            args: __spreadValues(__spreadValues({}, uiHandlerArgs), handlerExtraArgs),
            isSlate: true,
            attributes,
            element,
            style,
            styleActive,
            styleHover,
            className,
            events: null
          }, extraInfo),
          children
        );
        const contextSwichContext = this.getContextFor(element, "final", true);
        if (contextSwichContext && contextSwichContext.loopable && contextSwichContext.editorArgs && contextSwichContext.editorArgs.loopEmulation && contextSwichContext.editorArgs.loopEmulation >= 1) {
          const arr = [];
          for (let i2 = 0; i2 < contextSwichContext.editorArgs.loopEmulation; i2++) {
            const shouldDisableElementWrappers = i2 !== contextSwichContext.editorArgs.loopEmulation - 1;
            if (contextSwichContext.editorArgs.wrapper) {
              if (shouldDisableElementWrappers) {
                arr.push(
                  /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2))
                );
              } else {
                arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2)));
              }
            } else {
              if (shouldDisableElementWrappers) {
                arr.push(
                  /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, toReturn)
                );
              } else {
                arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, toReturn));
              }
            }
          }
          toReturn = arr;
        } else if (contextSwichContext && contextSwichContext.editorArgs && contextSwichContext.editorArgs.wrapper) {
          toReturn = contextSwichContext.editorArgs.wrapper(toReturn);
        }
        wasUIHandled = true;
      }
    }
    if (!wasUIHandled) {
      const customProps = __spreadProps(__spreadValues({}, attributes), { children });
      const html = element.html;
      if (typeof html === "string") {
        const htmlContext = this.getContextFor(element);
        let propertiesFromContext = htmlContext && htmlContext.properties && htmlContext.properties[html];
        if (!propertiesFromContext) {
          propertiesFromContext = this.props.rootContext && this.props.rootContext.properties && this.props.rootContext.properties[html];
          if (propertiesFromContext && propertiesFromContext.nonRootInheritable) {
            propertiesFromContext = null;
          }
        }
        if (propertiesFromContext && propertiesFromContext.type === "html" && typeof propertiesFromContext.editorDisplay !== "undefined") {
          const toDisplay = propertiesFromContext.editorDisplay;
          if (typeof toDisplay === "string") {
            customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, /* @__PURE__ */ import_react3.default.createElement("div", { contentEditable: false, dangerouslySetInnerHTML: { __html: toDisplay }, style: { display: "contents" } }), children);
          } else {
            customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, /* @__PURE__ */ import_react3.default.createElement("div", { contentEditable: false, style: { display: "contents" } }, toDisplay), children);
          }
        } else {
          customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, propertiesFromContext && propertiesFromContext.label || element.children[0].text, children);
        }
      }
      const text = element.textContent;
      if (typeof text === "string") {
        const textContext = this.getContextFor(element);
        let propertiesFromContext = textContext && textContext.properties && textContext.properties[text];
        if (!propertiesFromContext) {
          propertiesFromContext = this.props.rootContext && this.props.rootContext.properties && this.props.rootContext.properties[text];
          if (propertiesFromContext && propertiesFromContext.nonRootInheritable) {
            propertiesFromContext = null;
          }
        }
        customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, propertiesFromContext && propertiesFromContext.type === "text" && (propertiesFromContext.editorDisplay || propertiesFromContext.label) || element.children[0].text, children);
      }
      toReturn = SERIALIZATION_REGISTRY.REACTIFY[element.type]({
        active: false,
        selected: isSelected && isPrimary,
        element,
        asTemplate: false,
        customProps,
        // we don't care as we are not using the onCustom function
        parent: null,
        tree: null
      });
      const contextSwichContext = this.getContextFor(element, "final", true);
      if (contextSwichContext && contextSwichContext.loopable && contextSwichContext.editorArgs && contextSwichContext.editorArgs.loopEmulation && contextSwichContext.editorArgs.loopEmulation >= 1) {
        const arr = [];
        for (let i2 = 0; i2 < contextSwichContext.editorArgs.loopEmulation; i2++) {
          const shouldDisableElementWrappers = i2 !== contextSwichContext.editorArgs.loopEmulation - 1;
          if (contextSwichContext.editorArgs.wrapper) {
            if (shouldDisableElementWrappers) {
              arr.push(
                /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2))
              );
            } else {
              arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2)));
            }
          } else {
            if (shouldDisableElementWrappers) {
              arr.push(
                /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, toReturn)
              );
            } else {
              arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, toReturn));
            }
          }
        }
        toReturn = arr;
      } else if (contextSwichContext && contextSwichContext.editorArgs && contextSwichContext.editorArgs.wrapper) {
        toReturn = contextSwichContext.editorArgs.wrapper(toReturn);
      }
    }
    if (this.props.elementWrappers && (!wasUIHandled && this.props.elementWrappers.components && this.props.elementWrappers.components[element.type] || this.props.elementWrappers.uiHandler && this.props.elementWrappers.uiHandler[element.uiHandler])) {
      const ElementWrapper = this.props.elementWrappers.uiHandler && this.props.elementWrappers.uiHandler[element.uiHandler] || this.props.elementWrappers.components[element.type];
      if (ElementWrapper) {
        return /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Consumer, null, (disabled) => disabled ? toReturn : /* @__PURE__ */ import_react3.default.createElement(
          ElementWrapper,
          __spreadValues({
            element,
            helpers: this.getHelpers(),
            primarySelection: isPrimary,
            isSelected,
            featureSupport: this.getFeatureSupport(),
            baseI18n: this.props.baseI18n
          }, this.props.elementWrappersArgs),
          toReturn
        ));
      }
    }
    return toReturn;
  }
  /**
   * the function that is called by slate to render text
   * @param props the properties given by slate to render a text leaf
   */
  renderText(props) {
    const { attributes, children, leaf: leaf3 } = props;
    return SERIALIZATION_REGISTRY.REACTIFY.text({
      active: false,
      selected: false,
      element: leaf3,
      asTemplate: false,
      customProps: __spreadProps(__spreadValues({}, attributes), { children }),
      // we don't care as we are not using the onCustom function
      // this will prevent normalization but that's fine
      parent: null,
      tree: null
    });
  }
  /**
   * The change function that is called via slate when a change occurs
   * this function hits every time on every change of the rich text
   * @param newValue the new value of the children of the document
   */
  onChange(newValue) {
    if (this.isUnmounted) {
      return;
    }
    if (this.editor.selection && ReactEditor.isFocused(this.editor)) {
      this.onFocusedChange(this.editor.selection.anchor.path, newValue);
    } else {
      this.onBlurredChange(newValue);
    }
    this.lastChangeWasSelectedDelete = false;
    this.setValue(newValue);
  }
  /**
   * Performs a hard blur event and the paths are cleared out
   */
  hardBlur() {
    if (this.isUnmounted) {
      return;
    }
    this.setState({
      currentSelectedInlineElementAnchor: null,
      currentSelectedInlineElement: null,
      currentSelectedText: null,
      currentSelectedTextAnchor: null,
      currentSelectedBlockElement: null,
      currentSelectedBlockElementAnchor: null,
      currentSelectedSuperBlockElements: null,
      currentSelectedSuperBlockElementAnchors: null,
      currentSelectedInlineContext: null,
      currentSelectedBlockContext: null,
      currentSelectedTopmostSuperBlockContext: null,
      currentSelectedElement: null,
      currentSelectedElementAnchor: null,
      currentSelectedElementContext: null,
      previousSelectedElementAnchor: this.state.currentSelectedElementAnchor,
      previousTextAnchor: this.state.currentTextAnchor
    });
    Transforms.deselect(this.editor);
    ReactEditor.blur(this.editor);
  }
  selectiveHardBlurIfHasSelectedElement(e2, ele) {
    var _a, _b, _c, _d;
    if (this.state.currentSelectedElement) {
      if (ele && ((_b = (_a = this.wrapperRef) == null ? void 0 : _a.current) == null ? void 0 : _b.selectiveHardBlur)) {
        (_d = (_c = this.wrapperRef) == null ? void 0 : _c.current) == null ? void 0 : _d.selectiveHardBlur(e2, ele);
      } else {
        this.hardBlur();
      }
    }
  }
  /**
   * Performs a soft blur event
   */
  softBlur() {
    ReactEditor.blur(this.editor);
    Transforms.deselect(this.editor);
  }
  deletePath(p) {
    const currentSelectedElementAnchor = this.state.currentSelectedElementAnchor;
    if (Path.equals(p, currentSelectedElementAnchor) || Path.isAncestor(p, currentSelectedElementAnchor)) {
      this.lastChangeWasSelectedDelete = true;
    }
    Transforms.delete(this.editor, {
      at: p
    });
    if (this.state.currentText) {
      ReactEditor.focus(this.editor);
    } else {
      ReactEditor.blur(this.editor);
    }
  }
  /**
   * given a node path, that should represent either an element or a text node
   * this allows such a path to be selected and be marked into the selection
   * @param p the path to select
   */
  selectPath(p) {
    if (this.isUnmounted) {
      return;
    }
    this.setState(
      this.calculateAnchors(
        this.editor.selection && this.editor.selection.anchor.path,
        this.state.treeValue.children,
        p
      )
    );
  }
  /**
   * Allows to move between two paths as it moves elements to one place to another
   * @param p the path to select
   */
  movePaths(from, to) {
    if (this.isUnmounted) {
      return;
    }
    const selectedElement = this.state.currentSelectedElement;
    const toCropped = [...to];
    const toLast = toCropped.pop();
    const fromCropped = [...from];
    const fromLast = fromCropped.pop();
    const actualTo = [...to];
    if (Path.equals(fromCropped, toCropped) && toLast > fromLast) {
      actualTo[actualTo.length - 1]--;
    }
    Transforms.moveNodes(
      this.editor,
      {
        at: from,
        to: actualTo
      }
    );
    setTimeout(() => {
      const newSelectedAnchor = selectedElement ? ReactEditor.findPath(this.editor, selectedElement) : null;
      this.setState(this.calculateAnchors(this.editor.selection && this.editor.selection.anchor.path, null, newSelectedAnchor));
    }, 0);
  }
  getPreviousSelectedElementAnchor() {
    return this.state.previousSelectedElementAnchor;
  }
  getPreviousTextAnchor() {
    return this.state.previousTextAnchor;
  }
  /**
   * Deletes the selected node that has been selected, either the current default
   * or one that has been manually selected using selectPath
   */
  deleteSelectedNode() {
    this.lastChangeWasSelectedDelete = true;
    const selectedElementAnchor = this.state.currentSelectedElementAnchor;
    Transforms.delete(this.editor, {
      at: selectedElementAnchor
    });
    if (this.state.currentText) {
      ReactEditor.focus(this.editor);
    } else {
      ReactEditor.blur(this.editor);
    }
  }
  /**
   * A helper function to call react focus back into the editor
   */
  focus() {
    ReactEditor.focus(this.editor);
  }
  /**
   * An async function that is a bit of a hack to focus at a given
   * range, because of the way slate works it needs to be async
   * @param at the range to focus at
   * @returns a void promise once it's done
   */
  async focusAt(at) {
    if (Range.isRange(at)) {
      return new Promise((r2) => {
        setTimeout(() => {
          ReactEditor.focus(this.editor);
          setTimeout(() => {
            Transforms.select(this.editor, at);
            setTimeout(r2, 0);
          }, 0);
        }, 0);
      });
    } else {
      this.selectPath(at);
    }
  }
  /**
   * Provides a fallback for insert when no insert region is found
   * @param type 
   * @returns 
   */
  getFallbackInsertPath() {
    if (this.state.currentSelectedInlineElement) {
      return [...this.state.currentSelectedInlineElementAnchor, this.state.currentSelectedInlineElement.children.length];
    } else if (this.state.currentSelectedBlockElement) {
      return [...this.state.currentSelectedBlockElementAnchor, this.state.currentSelectedBlockElement.children.length];
    } else if (this.state.currentSelectedSuperBlockElements) {
      const currentSelectedSuperBlockElementAnchor = this.state.currentSelectedSuperBlockElementAnchors[this.state.currentSelectedSuperBlockElementAnchors.length - 1];
      const currentSelectedSuperBlockElement = this.state.currentSelectedSuperBlockElements[this.state.currentSelectedSuperBlockElements.length - 1];
      return [...currentSelectedSuperBlockElementAnchor, currentSelectedSuperBlockElement.children.length];
    } else {
      return [this.state.treeValue.children.length];
    }
  }
  /**
   * Will insert an image based on a given file that has
   * been taken as an input
   * 
   * Note that there is an insert file function that should be given
   * as prop and that's what this function will call, if an error occurred
   * it should have been fed as a prop as well, so this function always
   * returns a void promise
   * 
   * @param file the file
   * @param standalone whether to make it a standalone image
   * @returns a void promise once it's done
   */
  async insertImage(file, standalone) {
    try {
      const data = await this.props.onInsertFile(file, true);
      if (!data) {
        return;
      }
      const imageNode = {
        type: "image",
        alt: null,
        children: [
          {
            bold: false,
            italic: false,
            text: "",
            underline: false
          }
        ],
        height: data.height,
        width: data.width,
        sizes: "70vw",
        src: data.result.url,
        srcId: data.result.id,
        srcSet: null,
        standalone
      };
      if (!this.editor.selection) {
        Transforms.insertNodes(this.editor, imageNode, { at: this.getFallbackInsertPath() });
      } else {
        Transforms.insertNodes(this.editor, imageNode);
      }
    } catch (err) {
    }
  }
  updateTemplateText(label, value) {
    if (this.state.currentSelectedInlineElement) {
      Transforms.setNodes(this.editor, {
        textContent: value || ""
      }, { at: this.state.currentSelectedInlineElementAnchor });
      Transforms.setNodes(this.editor, {
        text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.text)
      }, { at: this.state.currentSelectedTextAnchor });
    }
  }
  /**
   * Will insert a bit of template text that is used for templating purposes
   * 
   * @param label the label to give it
   * @param value the value that it gets
   * @param at at which range to insert it (optional)
   * @returns a void promise
   */
  insertTemplateText(label, value) {
    const textNode = {
      bold: false,
      italic: false,
      underline: false,
      text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.text)
    };
    const inlineNode = {
      children: [textNode],
      type: "inline",
      textContent: value || ""
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, inlineNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, inlineNode);
    }
  }
  updateTemplateHTML(label, value) {
    if (this.state.currentSelectedBlockElement) {
      Transforms.setNodes(this.editor, {
        html: value || ""
      }, { at: this.state.currentSelectedBlockElementAnchor });
      Transforms.setNodes(this.editor, {
        text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.container)
      }, { at: this.state.currentSelectedTextAnchor });
    }
  }
  /**
   * Will insert a bit of template html that is used for templating purposes, work similar
   * to template text, except it uses html content instead to replace the inner html
   * 
   * @param label the label to be given to the element to be added
   * @param value the value that will be used from the context
   * @param at an optional range where to be inserted
   */
  insertTemplateHTML(label, value) {
    const textNode = {
      bold: false,
      italic: false,
      underline: false,
      text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.container)
    };
    const voidBlock = {
      children: [textNode],
      type: "void-block",
      html: value || ""
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, voidBlock, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, voidBlock);
    }
  }
  /**
   * Inserts a table at the given location
   * @param type the type of the table
   */
  insertTable(type) {
    const tableNode = {
      type: "table",
      children: [
        {
          type: "tbody",
          children: [
            {
              type: "tr",
              children: [
                {
                  type: "td",
                  children: [
                    STANDARD_PARAGRAPH()
                  ]
                }
              ]
            }
          ]
        }
      ],
      tableType: type || null
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, tableNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, tableNode);
    }
  }
  insertTableColumn() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentColumnIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    if (currentColumnIndex === -1) {
      return;
    }
    const currentColumn = this.state.currentSelectedSuperBlockElements[currentColumnIndex];
    const currentColumnAnchor = this.state.currentSelectedSuperBlockElementAnchors[currentColumnIndex];
    const targetColumnAnchor = [...currentColumnAnchor];
    targetColumnAnchor[targetColumnAnchor.length - 1]++;
    const targetIndex = targetColumnAnchor[targetColumnAnchor.length - 1];
    const tableAnchor = [...currentColumnAnchor];
    tableAnchor.pop();
    tableAnchor.pop();
    tableAnchor.pop();
    try {
      const tableElement = this.getNodeAt(tableAnchor);
      if (tableElement.type === "table") {
        tableElement.children.forEach((theadOrTbodyOrTfoot, theadOrTbodyOrTFootIndex) => {
          const isLastElementInTableBody = theadOrTbodyOrTFootIndex === tableElement.children.length - 1;
          theadOrTbodyOrTfoot.children.forEach((row, rowIndex) => {
            const column = {
              type: "td",
              children: [
                STANDARD_PARAGRAPH()
              ]
            };
            let actualTargetIndex = targetIndex;
            if (actualTargetIndex > row.children.length) {
              actualTargetIndex = row.children.length;
            }
            const insertPoint = [...tableAnchor, theadOrTbodyOrTFootIndex, rowIndex, actualTargetIndex];
            this.preventNormalize = isLastElementInTableBody ? rowIndex !== theadOrTbodyOrTfoot.children.length - 1 : true;
            Transforms.insertNodes(this.editor, column, { at: insertPoint });
            this.preventNormalize = false;
          });
        });
        const textAnchorOfColumn = targetColumnAnchor;
        textAnchorOfColumn.push(0);
        textAnchorOfColumn.push(0);
        this.focusAt({
          anchor: {
            offset: 0,
            path: targetColumnAnchor
          },
          focus: {
            offset: 0,
            path: targetColumnAnchor
          }
        });
      }
    } catch (e2) {
    }
  }
  deleteTableColumn() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentColumnIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    if (currentColumnIndex === -1) {
      return;
    }
    const currentColumn = this.state.currentSelectedSuperBlockElements[currentColumnIndex];
    const currentColumnAnchor = this.state.currentSelectedSuperBlockElementAnchors[currentColumnIndex];
    const targetIndex = currentColumnAnchor[currentColumnAnchor.length - 1];
    const tableAnchor = [...currentColumnAnchor];
    tableAnchor.pop();
    tableAnchor.pop();
    tableAnchor.pop();
    try {
      const tableElement = this.getNodeAt(tableAnchor);
      if (tableElement.type === "table") {
        tableElement.children.forEach((theadOrTbodyOrTfoot, theadOrTbodyOrTFootIndex) => {
          const isLastElementInTableBody = theadOrTbodyOrTFootIndex === tableElement.children.length - 1;
          theadOrTbodyOrTfoot.children.forEach((row, rowIndex) => {
            const deletePoint = [...tableAnchor, theadOrTbodyOrTFootIndex, rowIndex, targetIndex];
            this.preventNormalize = isLastElementInTableBody ? rowIndex !== theadOrTbodyOrTfoot.children.length - 1 : true;
            Transforms.delete(this.editor, { at: deletePoint });
            this.preventNormalize = false;
          });
        });
      }
    } catch (e2) {
    }
  }
  insertTableRow() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentRowIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "tr");
    if (currentRowIndex === -1) {
      return;
    }
    const currentRow = this.state.currentSelectedSuperBlockElements[currentRowIndex];
    const currentRowAnchor = this.state.currentSelectedSuperBlockElementAnchors[currentRowIndex];
    const row = {
      type: "tr",
      children: currentRow.children.map((v) => ({
        type: "td",
        children: [
          STANDARD_PARAGRAPH()
        ]
      }))
    };
    const parentTbodyOrTheadOrTfootAnchor = [...currentRowAnchor];
    parentTbodyOrTheadOrTfootAnchor.pop();
    const parentTbodyOrTheadOrTfoot = this.getNodeAt(parentTbodyOrTheadOrTfootAnchor);
    if (parentTbodyOrTheadOrTfoot.type === "tbody") {
      const targetRowAnchor = currentRowAnchor;
      targetRowAnchor[targetRowAnchor.length - 1]++;
      Transforms.insertNodes(this.editor, row, { at: targetRowAnchor });
      const targetRowAnchorFirstText = targetRowAnchor;
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      this.focusAt({
        anchor: {
          offset: 0,
          path: targetRowAnchorFirstText
        },
        focus: {
          offset: 0,
          path: targetRowAnchorFirstText
        }
      });
    } else if (parentTbodyOrTheadOrTfoot.type === "thead") {
      const tbodyAnchor = [...parentTbodyOrTheadOrTfootAnchor];
      tbodyAnchor[tbodyAnchor.length - 1]++;
      let tbody = null;
      try {
        tbody = this.getNodeAt(tbodyAnchor);
      } catch (e2) {
      }
      if (tbody && tbody.type === "tbody") {
        const targetRowAnchor = tbodyAnchor;
        targetRowAnchor.push(0);
        Transforms.insertNodes(this.editor, row, { at: targetRowAnchor });
        const targetRowAnchorFirstText = targetRowAnchor;
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        this.focusAt({
          anchor: {
            offset: 0,
            path: targetRowAnchorFirstText
          },
          focus: {
            offset: 0,
            path: targetRowAnchorFirstText
          }
        });
      } else {
        const tbody2 = {
          type: "tbody",
          children: [row]
        };
        Transforms.insertNodes(this.editor, tbody2, { at: tbodyAnchor });
        const targetRowAnchorFirstText = tbodyAnchor;
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        this.focusAt({
          anchor: {
            offset: 0,
            path: targetRowAnchorFirstText
          },
          focus: {
            offset: 0,
            path: targetRowAnchorFirstText
          }
        });
      }
    } else if (parentTbodyOrTheadOrTfoot.type === "tfoot") {
      const tbodyAnchor = [...parentTbodyOrTheadOrTfootAnchor];
      tbodyAnchor[tbodyAnchor.length - 1]--;
      let tbody = null;
      try {
        tbody = this.getNodeAt(tbodyAnchor);
      } catch (e2) {
      }
      const tfootClone = __spreadValues({}, parentTbodyOrTheadOrTfoot);
      tfootClone.children = tfootClone.children.map((v) => {
        return {
          type: "tr",
          children: v.children.map((v2) => ({
            type: "td",
            children: [
              STANDARD_PARAGRAPH()
            ]
          }))
        };
      });
      this.preventNormalize = true;
      if (tbody && tbody.type === "tbody") {
        const currentTBodyPropsCopy = __spreadValues({}, tbody);
        delete currentTBodyPropsCopy.children;
        Transforms.setNodes(
          this.editor,
          currentTBodyPropsCopy,
          {
            at: parentTbodyOrTheadOrTfootAnchor
          }
        );
      } else {
        Transforms.setNodes(
          this.editor,
          {
            type: "tbody"
          },
          {
            at: parentTbodyOrTheadOrTfootAnchor
          }
        );
      }
      this.preventNormalize = false;
      const nextAnchorForTfoot = [...parentTbodyOrTheadOrTfootAnchor];
      nextAnchorForTfoot[nextAnchorForTfoot.length - 1]++;
      Transforms.insertNodes(this.editor, tfootClone, { at: nextAnchorForTfoot });
      const targetRowAnchorFirstText = tbody ? parentTbodyOrTheadOrTfootAnchor : nextAnchorForTfoot;
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      this.focusAt({
        anchor: {
          offset: 0,
          path: targetRowAnchorFirstText
        },
        focus: {
          offset: 0,
          path: targetRowAnchorFirstText
        }
      });
    }
  }
  deleteTableRow() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentRowIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "tr");
    if (currentRowIndex === -1) {
      return;
    }
    try {
      Transforms.delete(this.editor, { at: this.state.currentSelectedSuperBlockElementAnchors[currentRowIndex] });
    } catch (e2) {
    }
  }
  /**
   * Tells whether the current table row can
   * be toggled in the environment it is
   */
  canToggleTable(element) {
    if (!this.state.currentSelectedSuperBlockElements) {
      return false;
    }
    const potentialTdIndex = findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    if (potentialTdIndex === -1) {
      return false;
    }
    const tdAnchor = this.state.currentSelectedSuperBlockElementAnchors[potentialTdIndex];
    const rowPath = [...tdAnchor];
    rowPath.pop();
    const theadOrTbodyOrTfootPath = [...rowPath];
    theadOrTbodyOrTfootPath.pop();
    const tablePath = [...theadOrTbodyOrTfootPath];
    tablePath.pop();
    try {
      const potentialRow = this.getNodeAt(rowPath);
      if (potentialRow.type !== "tr") {
        return false;
      }
      const theadOrTbodyOrTfoot = this.getNodeAt(theadOrTbodyOrTfootPath);
      if (theadOrTbodyOrTfoot.type === element) {
        return true;
      } else if (theadOrTbodyOrTfoot.type === "tfoot" || theadOrTbodyOrTfoot.type === "thead") {
        return false;
      }
      const tableParent = this.getNodeAt(tablePath);
      if (tableParent.type !== "table") {
        return false;
      }
      const theadOrTfootAlreadyExists = tableParent.children.find((c) => c.type === element);
      if (theadOrTfootAlreadyExists) {
        return false;
      } else {
        if (element === "thead") {
          return rowPath[rowPath.length - 1] === 0;
        } else if (element === "tfoot") {
          return rowPath[rowPath.length - 1] === theadOrTbodyOrTfoot.children.length - 1;
        }
        return false;
      }
    } catch (e2) {
      return false;
    }
  }
  /**
   * Only works when the first element of the table
   * is selected, aka the first row
   */
  toggleTable(element) {
    if (!this.canToggleTable(element)) {
      return;
    }
    const potentialTdIndex = findLastIndex(this.state.currentSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    const tdAnchor = this.state.currentSelectedSuperBlockElementAnchors[potentialTdIndex];
    const rowPath = [...tdAnchor];
    rowPath.pop();
    const theadOrTbodyPath = [...rowPath];
    theadOrTbodyPath.pop();
    const tablePath = [...theadOrTbodyPath];
    tablePath.pop();
    const tableParent = this.getNodeAt(tablePath);
    const position = tableParent.children.findIndex((e2) => e2.type === element);
    const bodyPosition = tableParent.children.findIndex((e2) => e2.type === "tbody");
    if (position !== -1) {
      const currentTBody = tableParent.children[bodyPosition];
      if (!currentTBody) {
        Transforms.setNodes(
          this.editor,
          {
            type: "tbody"
          },
          {
            at: [...tablePath, position]
          }
        );
      } else {
        const currentTBodyPropsCopy = __spreadValues({}, currentTBody);
        delete currentTBodyPropsCopy.children;
        Transforms.setNodes(
          this.editor,
          currentTBodyPropsCopy,
          {
            at: [...tablePath, position]
          }
        );
      }
    } else {
      const currentTBody = tableParent.children[bodyPosition];
      if (!currentTBody) {
        return;
      }
      if (currentTBody.children.length === 1) {
        Transforms.setNodes(
          this.editor,
          {
            type: element
          },
          {
            at: [...tablePath, bodyPosition]
          }
        );
      } else {
        const currentTBodyPropsCopy = __spreadValues({}, currentTBody);
        currentTBodyPropsCopy.children = [];
        currentTBodyPropsCopy.type = element;
        this.preventNormalize = true;
        Transforms.insertNodes(
          this.editor,
          currentTBodyPropsCopy,
          {
            at: [...tablePath, element === "thead" ? 0 : bodyPosition + 1]
          }
        );
        this.preventNormalize = false;
        if (element === "thead") {
          Transforms.moveNodes(
            this.editor,
            {
              // tbody is now in 1 ahead
              // zero for the first row
              at: [...tablePath, bodyPosition + 1, 0],
              // this is our new thead
              to: [...tablePath, 0, 0]
            }
          );
        } else {
          Transforms.moveNodes(
            this.editor,
            {
              // tbody is at the same place as before
              // we pick the last row
              at: [...tablePath, bodyPosition, currentTBody.children.length - 1],
              // this is our new tfoot which is after our body
              to: [...tablePath, bodyPosition + 1, 0]
            }
          );
        }
      }
    }
  }
  _getVideoSrcOriginAndStatus(url) {
    let src = null;
    let origin = null;
    let status = true;
    let parsedURL = null;
    if (url) {
      try {
        parsedURL = new URL(url);
      } catch (e2) {
        status = false;
      }
    }
    if (parsedURL) {
      if (parsedURL.hostname === "youtube.com" || parsedURL.hostname === "www.youtube.com" || parsedURL.hostname === "youtu.be") {
        origin = "youtube";
        const isClassicYTUrl = parsedURL.hostname === "youtube.com" || parsedURL.hostname === "www.youtube.com";
        if (isClassicYTUrl && parsedURL.pathname.startsWith("/embed/")) {
          src = parsedURL.pathname.split("/")[2];
        } else if (isClassicYTUrl && parsedURL.pathname.startsWith("/watch")) {
          let search = parsedURL.search;
          if (search[0] === "?") {
            search = search.substr(1);
          }
          search.split("&").forEach((v) => {
            if (v.startsWith("v=")) {
              src = v.substr(2);
            }
          });
        } else if (parsedURL.hostname === "youtu.be") {
          src = parsedURL.pathname.split("/")[1];
        }
        status = true;
      } else if (parsedURL.host === "player.vimeo.com") {
        origin = "vimeo";
        src = parsedURL.pathname.split("/")[2];
        status = true;
      } else {
        status = false;
      }
    }
    return {
      src,
      origin,
      status
    };
  }
  updateVideo(url) {
    const data = this._getVideoSrcOriginAndStatus(url);
    if (data.status && this.state.currentSelectedBlockElement && this.state.currentSelectedBlockElement.type === "video") {
      Transforms.setNodes(this.editor, {
        origin: data.origin,
        src: data.src
      }, {
        at: this.state.currentSelectedBlockElementAnchor
      });
    }
    return data.status;
  }
  /**
   * Will insert a video given the information
   * @param url the url of the video
   * @param at a partial range to insert at
   * @returns a boolean on whether it succeeded
   */
  insertVideo(url) {
    const data = this._getVideoSrcOriginAndStatus(url);
    const videoNode = {
      type: "video",
      children: [
        {
          bold: false,
          italic: false,
          text: "",
          underline: false
        }
      ],
      origin: data.origin,
      src: data.src
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, videoNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, videoNode);
    }
    return data.status;
  }
  /**
   * Will insert a file based on the information given it uses
   * the standard on insert file function in order to perfom it
   *
   * @param file the file to insert
   * @param at a partial range to insert at
   */
  async insertFile(file) {
    try {
      const data = await this.props.onInsertFile(file, false);
      if (!data) {
        return;
      }
      const fileNode = {
        type: "file",
        children: [
          {
            bold: false,
            italic: false,
            text: "",
            underline: false
          }
        ],
        extension: mimeTypeToExtension(file.type),
        fileName: data.result.name,
        size: prettyBytes(data.result.size),
        src: data.result.url,
        srcId: data.result.id
      };
      if (!this.editor.selection) {
        Transforms.insertNodes(this.editor, fileNode, { at: this.getFallbackInsertPath() });
      } else {
        Transforms.insertNodes(this.editor, fileNode);
      }
    } catch (err) {
    }
  }
  /**
   * Will insert a container at the given location
   * @param type optional, the container type, otherwise will insert a standard container
   * @param at an optional range
   */
  async insertContainer(type) {
    const containerNode = {
      type: "container",
      children: [
        {
          type: "paragraph",
          children: [
            {
              bold: false,
              italic: false,
              underline: false,
              text: ""
            }
          ]
        }
      ],
      containerType: type || null
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, containerNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, containerNode);
    }
  }
  /**
   * Inserts a custom element
   * @param type the type for the custom element
   * @param at an optional at range to insert the custom at
   */
  async insertCustom(type) {
    const customNode = {
      type: "custom",
      children: [
        {
          type: "paragraph",
          children: [
            {
              bold: false,
              italic: false,
              underline: false,
              text: ""
            }
          ]
        }
      ],
      customType: type
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, customNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, customNode);
    }
  }
  /**
   * Makes a quote out of the current element
   * @param at toggle at the given range, this will cause a focus
   */
  async toggleQuote() {
    const isCollapsed = Range.isCollapsed(this.editor.selection);
    if (isCollapsed && this.state.currentSelectedBlockElement) {
      if (this.state.currentSelectedBlockElement.type === "quote") {
        Transforms.setNodes(
          this.editor,
          {
            type: "paragraph"
          }
        );
      } else {
        Transforms.setNodes(
          this.editor,
          {
            type: "quote"
          }
        );
      }
    }
  }
  /**
   * Makes a title out of the current element
   * @param type the title type
   * @param at an optional range
   */
  async toggleTitle(type) {
    const isCollapsed = Range.isCollapsed(this.editor.selection);
    if (isCollapsed && this.state.currentSelectedBlockElement) {
      if (this.state.currentSelectedBlockElement.type === "title") {
        Transforms.setNodes(
          this.editor,
          {
            type: "paragraph"
          }
        );
      } else {
        Transforms.setNodes(
          this.editor,
          {
            type: "title",
            titleType: type
          }
        );
      }
    }
  }
  /**
   * Makes a list out of the current element
   * @param type the type of the list that is to be toggled, either bulleted or number
   * @param at an optional range
   */
  async insertList(type) {
    const listNode = {
      type: "list",
      listType: type,
      children: [
        {
          type: "list-item",
          children: [
            STANDARD_PARAGRAPH()
          ]
        }
      ]
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, listNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, listNode);
    }
  }
  updateLink(url, tvalue) {
    let validState = true;
    if (url) {
      try {
        const urlParsed = new URL(url);
        const isLocal = urlParsed.hostname === location.hostname;
        const onlyLocal = !this.props.features.supportsExternalLinks;
        if (onlyLocal && !isLocal) {
          validState = false;
        }
      } catch (e2) {
        validState = false;
      }
    }
    if (this.state.currentSelectedInlineElement && this.state.currentSelectedInlineElement.type === "link") {
      const link = {
        href: url,
        thref: tvalue
      };
      Transforms.setNodes(this.editor, link, {
        at: this.state.currentSelectedInlineElementAnchor
      });
    }
    return validState;
  }
  /**
   * Makes a link out of the current element
   * @param url the url that we are using (null if using tvalue)
   * @param tvalue the template value to use (null if providing url)
   * @param at an optional range to pass
   * @returns a boolean if the link was valid and toggleLink
   */
  toggleLink(url, tvalue) {
    let validState = true;
    if (url) {
      try {
        const urlParsed = new URL(url);
        const isLocal = urlParsed.hostname === location.hostname;
        const onlyLocal = !this.props.features.supportsExternalLinks;
        if (onlyLocal && !isLocal) {
          validState = false;
        }
      } catch (e2) {
        validState = false;
      }
    }
    const link = {
      type: "link",
      href: url,
      thref: tvalue,
      children: [
        STANDARD_TEXT_NODE(this.props.baseI18n.link)
      ]
    };
    if (this.editor.selection && Range.isCollapsed(this.editor.selection)) {
      if (this.state.currentSelectedInlineElement && this.state.currentSelectedInlineElement.type === "link") {
        Transforms.unwrapNodes(this.editor, {
          at: this.state.currentSelectedInlineElementAnchor
        });
      } else {
        Transforms.insertNodes(this.editor, link);
      }
    } else if (this.editor.selection) {
      Transforms.wrapNodes(this.editor, link, {
        match: (v) => Text.isText(v),
        split: true
      });
    } else {
      Transforms.insertNodes(this.editor, link, {
        at: this.getFallbackInsertPath()
      });
    }
    return validState;
  }
  /**
   * Abitrary update, does an arbitrary update for an element or node
   * at the given path
   * @param args an object to update that should be partial of the element rich properties
   * @param anchor the node anchor to update
   */
  set(args, anchor) {
    Transforms.setNodes(this.editor, args, { at: anchor });
  }
  /**
   * Sets the current style for the element
   * @param style the style to be set, this should be a style string
   * @param anchor the element anchor to update
   */
  setStyle(style, anchor) {
    Transforms.setNodes(this.editor, {
      style
    }, { at: anchor });
  }
  /**
   * Sets the template hover style for the element
   * @param style the style to be set, this should be a style string
   * @param anchor the element anchor to update
   */
  setHoverStyle(style, anchor) {
    Transforms.setNodes(this.editor, {
      styleHover: style
    }, { at: anchor });
  }
  /**
   * Sets the active style for the element
   * @param style the style to be set, this should be a style string
   * @param anchor the element anchor to update
   */
  setActiveStyle(style, anchor) {
    Transforms.setNodes(this.editor, {
      styleActive: style
    }, { at: anchor });
  }
  /**
   * Sets the rich classes of the element
   * @param classes an array of string that represent the rich classes
   * @param anchor the element anchor
   */
  setRichClasses(classes, anchor) {
    Transforms.setNodes(this.editor, {
      richClassList: classes
    }, { at: anchor });
  }
  /**
   * Sets a given action for usage within templating
   * as an event listener
   * 
   * Note that using this function is risky if the structure to provide a given
   * key is not understood properly, keys should be valid
   * 
   * @param key the key for the action, should be something like, click, mouseenter, etc...
   * @param value the value for the property
   * @param anchor the anchor for the element that is to be assigned the listener to turn interactive
   */
  setAction(key, value, anchor) {
    Transforms.setNodes(this.editor, {
      [key]: value
    }, { at: anchor });
  }
  /**
   * Sets an UI handler to a given element so that it is ui handled
   * 
   * This is an avanced option for ui handling
   * 
   * normally you would use this function for updating an already inserted
   * ui handled component
   * 
   * @param value the value for the ui handler that should be taken out of the context
   * @param args the args for the ui handler
   * @param anchor the anchor where to insert at
   */
  setUIHandler(value, args, anchor) {
    Transforms.setNodes(this.editor, {
      uiHandler: value,
      uiHandlerArgs: args
    }, { at: anchor });
  }
  /**
   * Sets ui handler args to a given element
   * @param key the ui handler arg key
   * @param value the ui handler arg value
   * @param anchor the anchor in question
   */
  setUIHandlerArg(key, value, anchor) {
    const nodeAtPath = Node.get(this.editor, anchor);
    let newValue = __spreadProps(__spreadValues({}, nodeAtPath.uiHandlerArgs), {
      [key]: value
    });
    if (value === null || value === void 0) {
      delete newValue[key];
    }
    Transforms.setNodes(this.editor, {
      uiHandlerArgs: newValue
    }, { at: anchor });
  }
  /**
   * Inserts an element at a given position
   * @param element the element 
   * @param at an optional position to do it at
   */
  insertElement(element) {
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, element, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, element);
    }
  }
  /**
   * Sets the context key
   * @param value the value for the new context key
   * @param anchor the anchor where to set the context key at
   */
  setContext(value, anchor) {
    Transforms.setNodes(this.editor, {
      context: value
    }, { at: anchor });
  }
  /**
   * Sets the context key
   * @param value the value for the new if condition key
   * @param anchor the anchor where to set the context key at
   */
  setIfCondition(value, anchor) {
    Transforms.setNodes(this.editor, {
      ifCondition: value
    }, { at: anchor });
  }
  /**
  * Sets the for-each loop key
  * @param value the value for the new context key
  * @param anchor the anchor where to set the context key at
  */
  setForEach(value, anchor) {
    Transforms.setNodes(this.editor, {
      forEach: value
    }, { at: anchor });
  }
  /**
   * Formats the current text as bold
   */
  formatToggle(key) {
    if (this.state.currentText && this.editor.selection && Point.equals(this.editor.selection.anchor, this.editor.selection.focus)) {
      Transforms.insertNodes(
        this.editor,
        __spreadProps(__spreadValues({}, this.state.currentText), {
          text: "",
          [key]: !this.state.currentText[key]
        })
      );
    } else {
      if (this.state.currentText) {
        Transforms.setNodes(
          this.editor,
          { [key]: !this.state.currentText[key] },
          { match: (n3) => Text.isText(n3), split: true }
        );
      } else if (this.state.currentSelectedText) {
        Transforms.setNodes(
          this.editor,
          { [key]: !this.state.currentSelectedText[key] },
          { match: (n3) => Text.isText(n3), at: this.state.currentSelectedBlockElementAnchor, mode: "all" }
        );
      }
    }
  }
  /**
   * This is a helper function that is used in order to extract the available
   * classes that we have for usage within rich classes, container, and customs
   * considering what we have found in the all promise for all what is available
   * because there might be filters for them, and we need to find the labels and whatnot
   * of what we can actually use
   * 
   * @param feature the feature we are searching for basically, supportsCustom, supportsRichClasses and supportsContainers
   * that we decide on whether we support that feature
   * @param featureAll the all name for the feature in the state and where it is located in the state that we are meant to await
   * basically allCustoms, allRichClasses and allContainers
   * @param featureList the list of supported that is given in the feature support of the property so basically
   * supportedCustoms, supportedRichClasses and supportedContainers
   * @param i18nLocation the location for the i18n data in the i18n root, basically custom, containers and rich
   */
  availableFilteringFunction(feature, featureAll, featureList, i18nLocation) {
    return (
      // we pick the feature of the eg. supportsCustom, supportsRichClasses out of the feature support to see
      // if we support that feature at all
      (this.props.features[feature] ? (
        // if we do we pick from the state what we have found in the stylesheet
        // of the classes for that feature as we have awaited
        this.state[featureAll].filter(
          (c) => (
            // and we filter based on our feature list, if we have one of course, otherwise all pass
            this.props.features[featureList] ? this.props.features[featureList].includes(c) : true
          )
        )
      ) : []).map((c) => {
        return {
          value: c,
          label: this.props.baseI18n && this.props.baseI18n[i18nLocation] && // both the default and by replacing
          (this.props.baseI18n[i18nLocation][c] || this.props.baseI18n[i18nLocation][c.replace(/-/g, "_")]) || c
          // and if we find nothing we use the value itself
        };
      })
    );
  }
  /**
   * Triggers on the keydown of the slate editor itself
   * @param e the event
   */
  onKeyDown(e2) {
    if (e2.key === "Enter" && e2.altKey) {
      this.insertSuperbreak(null, e2.shiftKey);
    } else if (e2.key === "z" && e2.ctrlKey && !e2.shiftKey) {
      this.editor.undo();
    } else if (e2.key === "y" && e2.ctrlKey || e2.key === "z" && e2.ctrlKey && e2.shiftKey) {
      this.editor.redo();
    }
  }
  /**
   * Basic old school component did mount
   */
  async componentDidMount() {
    await ALL_PROMISE;
    if (!this.isUnmounted) {
      this.setState({
        allContainers: ALL_CONTAINERS,
        allTables: ALL_TABLES,
        allCustom: ALL_CUSTOM,
        allRichClasses: ALL_RICH_CLASSES
      });
    }
    if (this.props.autoFocus) {
      ReactEditor.focus(this.editor);
      this.forceFocus();
    }
    const editableHTMLElement = this.editableRef.current.childNodes[0];
    EDITOR_POOL.set(editableHTMLElement, this);
  }
  componentDidUpdate(prevProps, prevState, snapshot) {
    if (prevState.currentText && prevState.currentText.text === "") {
      const anchorInCurrent = ReactEditor.findPath(this.editor, prevState.currentText);
      if (anchorInCurrent) {
        try {
          const elementInCurrent = Node.get(this.editor, anchorInCurrent);
          if (elementInCurrent.text === "" && elementInCurrent !== this.state.currentText) {
            this.normalizeNode([this.editor, []]);
          }
        } catch (e2) {
        }
      }
    }
  }
  getState() {
    return this.state;
  }
  /**
   * Sometimes slate leaves a selection behind we need to unselect if such
   * is the case
   */
  componentWillUnmount() {
    this.isUnmounted = true;
    ReactEditor.deselect(this.editor);
    const editableHTMLElement = this.editableRef.current.childNodes[0];
    EDITOR_POOL.delete(editableHTMLElement);
  }
  /**
   * Provides the helpers that are used by the editor
   * to construct rich text data
   */
  getHelpers() {
    const helpers = {
      editor: this.editor,
      Transforms,
      Range,
      ReactEditor,
      HistoryEditor,
      Node,
      Path,
      getContextFor: this.getContextFor,
      getRootContext: this.getRootContext,
      getState: this.getState,
      selectPath: this.selectPath,
      deletePath: this.deletePath,
      movePaths: this.movePaths,
      deleteSelectedNode: this.deleteSelectedNode,
      getPreviousSelectedElementAnchor: this.getPreviousSelectedElementAnchor,
      getPreviousTextAnchor: this.getPreviousTextAnchor,
      focus: this.focus,
      focusAt: this.focusAt,
      insertSuperbreak: this.insertSuperbreak,
      formatToggle: this.formatToggle,
      insertContainer: this.insertContainer,
      insertCustom: this.insertCustom,
      insertFile: this.insertFile,
      insertImage: this.insertImage,
      insertVideo: this.insertVideo,
      updateVideo: this.updateVideo,
      insertTemplateText: this.insertTemplateText,
      updateTemplateText: this.updateTemplateText,
      insertTemplateHTML: this.insertTemplateHTML,
      updateTemplateHTML: this.updateTemplateHTML,
      insertTable: this.insertTable,
      insertTableColumn: this.insertTableColumn,
      insertTableRow: this.insertTableRow,
      toggleTable: this.toggleTable,
      canToggleTable: this.canToggleTable,
      toggleLink: this.toggleLink,
      updateLink: this.updateLink,
      insertList: this.insertList,
      toggleQuote: this.toggleQuote,
      toggleTitle: this.toggleTitle,
      setActiveStyle: this.setActiveStyle,
      setContext: this.setContext,
      setIfCondition: this.setIfCondition,
      setForEach: this.setForEach,
      setHoverStyle: this.setHoverStyle,
      setStyle: this.setStyle,
      set: this.set,
      setRichClasses: this.setRichClasses,
      setAction: this.setAction,
      setUIHandler: this.setUIHandler,
      setUIHandlerArg: this.setUIHandlerArg,
      insertElement: this.insertElement,
      deleteTableColumn: this.deleteTableColumn,
      deleteTableRow: this.deleteTableRow,
      hardBlur: this.hardBlur,
      softBlur: this.softBlur
    };
    return helpers;
  }
  /**
   * Provides the feature support information that is used by the editor
   * to know what it can and can't do
   */
  getFeatureSupport() {
    if (this.props.features === null) {
      return null;
    }
    const availableCustoms = this.availableFilteringFunction("supportsCustom", "allCustom", "supportedCustoms", "richCustoms");
    const availableRichClasses = this.availableFilteringFunction("supportsRichClasses", "allRichClasses", "supportedRichClasses", "richClasses");
    const availableContainers = this.availableFilteringFunction("supportsContainers", "allContainers", "supportedContainers", "richContainers");
    const availableTables = this.availableFilteringFunction("supportsTables", "allTables", "supportedTables", "richTables");
    const newFeatureSupport = __spreadProps(__spreadValues({}, this.props.features), {
      availableContainers,
      availableCustoms,
      availableRichClasses,
      availableTables
    });
    return newFeatureSupport;
  }
  forceFocus() {
    if (!this.state.focused) {
      const path3 = [];
      let current2 = this.editor.children && this.editor.children[0];
      while (current2) {
        path3.push(0);
        current2 = current2.children && current2.children[0];
      }
      this.focusAt({
        anchor: {
          offset: 0,
          path: path3
        },
        focus: {
          offset: 0,
          path: path3
        }
      });
      setTimeout(() => {
        if (!this.state.focused) {
          this.onFocusedChange(path3, this.editor.children);
        }
      }, 20);
    }
  }
  forceBlur() {
    setTimeout(() => {
      if (this.state.focused) {
        this.onBlurredChange(this.editor.children);
      }
    }, 20);
  }
  /**
   * Render function
   */
  render() {
    let children = /* @__PURE__ */ import_react3.default.createElement(
      CurrentElementProvider,
      {
        block: this.state.currentSelectedBlockElement,
        superblocks: this.state.currentSelectedSuperBlockElements || [],
        inline: this.state.currentSelectedInlineElement
      },
      /* @__PURE__ */ import_react3.default.createElement("div", { ref: this.editableRef, style: { display: "contents" }, "data-slate-bug": "true" }, /* @__PURE__ */ import_react3.default.createElement(
        Editable,
        {
          id: this.props.id,
          lang: this.props.lang,
          onKeyDown: this.onKeyDown,
          renderElement: this.renderElement,
          renderLeaf: this.renderText,
          placeholder: this.props.placeholder,
          readOnly: this.props.disabled,
          disabled: this.props.disabled,
          style: { scrollMarginTop: this.props.scrollMarginTop },
          onBlur: this.forceBlur,
          "aria-invalid": !this.props.currentValid,
          "aria-errormessage": this.props.currentValid ? null : this.props.currentGeneralErrorElementId,
          "aria-describedby": this.props.currentDescribedBy,
          "aria-placeholder": this.props.placeholder
        }
      ))
    );
    const Wrapper = this.props.Wrapper;
    if (Wrapper) {
      children = /* @__PURE__ */ import_react3.default.createElement(
        Wrapper,
        __spreadProps(__spreadValues({}, this.props.wrapperArgs), {
          disabled: this.props.disabled,
          state: this.state,
          helpers: this.getHelpers(),
          featureSupport: this.getFeatureSupport(),
          currentLoadError: this.props.currentLoadError,
          dismissCurrentLoadError: this.props.dismissCurrentLoadError,
          ref: this.wrapperRef,
          baseI18n: this.props.baseI18n
        }),
        children
      );
    }
    if (this.props.rootContext && this.props.rootContext.editorArgs && this.props.rootContext.editorArgs.wrapper) {
      children = this.props.rootContext.editorArgs.wrapper(children);
    }
    if (this.state.treeValue.children !== this.editor.children) {
      this.editor.children = this.state.treeValue.children;
    }
    return /* @__PURE__ */ import_react3.default.createElement(
      Slate,
      {
        editor: this.editor,
        value: this.state.treeValue.children,
        onChange: this.onChange
      },
      children
    );
  }
};

// ../editor/slate/wrapper.tsx
var import_react10 = __toESM(require_react());

// ../editor/slate/drawer/index.tsx
var import_react8 = __toESM(require_react());

// ../editor/slate/drawer/general.tsx
var import_react4 = __toESM(require_react());
function DefaultWrapperDrawerInternalPanelWrapper(props) {
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerInternalPanelWrapper" }, props.children);
}
function DefaultWrapperDrawerTextField(props) {
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerTextField" }, /* @__PURE__ */ import_react4.default.createElement("label", null, props.label), /* @__PURE__ */ import_react4.default.createElement(
    "input",
    {
      value: props.value,
      placeholder: props.placeholder || props.label,
      onChange: props.onChangeByEvent,
      disabled: props.disabled
    }
  ));
}
function DefaultWrapperDrawerSelectField(props) {
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerSelectField" }, /* @__PURE__ */ import_react4.default.createElement("label", null, props.label), /* @__PURE__ */ import_react4.default.createElement(
    "select",
    {
      value: props.value,
      onChange: props.onChangeByEvent,
      disabled: props.disabled,
      placeholder: props.placeholder
    },
    props.options.map((option) => /* @__PURE__ */ import_react4.default.createElement("option", { key: option.value, value: option.value }, typeof option.label === "string" ? option.label : option.value))
  ));
}
function DefaultWrapperDrawerMultiSelectField(props) {
  const handleSelectChange = (0, import_react4.useCallback)((e2) => {
    const selectedOptions = Array.from(e2.target.selectedOptions, (option) => option.value);
    props.onChange(selectedOptions);
  }, []);
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerMultiSelectField" }, /* @__PURE__ */ import_react4.default.createElement("label", null, props.label), /* @__PURE__ */ import_react4.default.createElement(
    "select",
    {
      multiple: true,
      value: props.values,
      onChange: handleSelectChange,
      disabled: props.disabled
    },
    props.options.map((option) => /* @__PURE__ */ import_react4.default.createElement("option", { key: option.value, value: option.value }, typeof option.label === "string" ? option.label : option.value))
  ));
}
function DefaultWrapperDrawerCheckBoxField(props) {
  const handleChange = (event) => {
    const newValue = event.target.checked;
    props.onChange(newValue);
  };
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerCheckBoxField" }, /* @__PURE__ */ import_react4.default.createElement(
    "input",
    {
      type: "checkbox",
      checked: props.value,
      onChange: handleChange,
      disabled: props.disabled
    }
  ), /* @__PURE__ */ import_react4.default.createElement("label", null, props.label));
}
function GeneralOptions(props) {
  const [name, setName] = (0, import_react4.useState)(props.state.currentSelectedElement && props.state.currentSelectedElement.givenName || "");
  (0, import_react4.useEffect)(() => {
    setName(props.state.currentSelectedElement && props.state.currentSelectedElement.givenName || "");
  }, [props.state.currentSelectedElement]);
  const lastUpdateRef = (0, import_react4.useRef)();
  const updateNameB = (0, import_react4.useCallback)((v) => {
    setName(v);
    clearTimeout(lastUpdateRef.current);
    lastUpdateRef.current = setTimeout(() => {
      props.helpers.set({
        givenName: v
      }, props.state.currentSelectedElementAnchor);
    }, 600);
  }, [props.state.currentSelectedElement]);
  const updateName = (0, import_react4.useCallback)((e2) => {
    updateNameB(e2.target.value);
  }, [updateNameB]);
  if (!props.state.currentSelectedElement) {
    return null;
  }
  const WrapperDrawerInternalPanelWrapper = props.WrapperDrawerInternalPanelWrapper || DefaultWrapperDrawerInternalPanelWrapper;
  const WrapperDrawerTextField = props.WrapperDrawerTextField || DefaultWrapperDrawerTextField;
  return /* @__PURE__ */ import_react4.default.createElement(WrapperDrawerInternalPanelWrapper, null, /* @__PURE__ */ import_react4.default.createElement(
    WrapperDrawerTextField,
    {
      value: name,
      label: props.baseI18n.name,
      onChangeByEvent: updateName,
      onChangeByValue: updateNameB,
      id: "name"
    }
  ), props.drawerExtras ? props.drawerExtras.map((v, i2) => {
    const Element4 = v.Component;
    return /* @__PURE__ */ import_react4.default.createElement(Element4, __spreadValues({ key: v.key || i2 }, props));
  }) : null);
}

// ../editor/slate/drawer/styles.tsx
var import_react5 = __toESM(require_react());
var import_deep_equal3 = __toESM(require_deep_equal());
var SingleStyle = class extends import_react5.default.PureComponent {
  /**
   * We need the derived function in order to be able to update the value of the
   * selector in case, this is the more efficient way in these cases where things
   * are slightly out of sync
   */
  static getDerivedStateFromProps(props, state) {
    if ((props.styleValue || "") !== state.value && !Path.equals(props.anchor, state.valueForAnchor)) {
      return {
        value: props.styleValue || "",
        valueForAnchor: props.anchor
      };
    }
    return null;
  }
  /**
   * Constructs the element that provides an input for active, hover and the standard
   * @param props 
   */
  constructor(props) {
    super(props);
    this.onStyleChange = this.onStyleChange.bind(this);
    this.onStyleChangeB = this.onStyleChangeB.bind(this);
    this.state = {
      value: props.styleValue || "",
      valueForAnchor: props.anchor
    };
  }
  /**
   * Triggers each time the input for the style changes
   * @param e the change event in question
   */
  onStyleChange(e2) {
    this.onStyleChangeB(e2.target.value);
  }
  /**
   * Triggers each time the input for the style changes
   * @param e the change event in question
   */
  onStyleChangeB(newValue = null) {
    this.setState({
      value: newValue || "",
      valueForAnchor: this.props.anchor
    });
    this.props.onChange(newValue, this.props.anchor);
  }
  /**
   * The standard render function
   */
  render() {
    const TextField = this.props.TextField || DefaultWrapperDrawerTextField;
    return /* @__PURE__ */ import_react5.default.createElement(
      TextField,
      {
        value: this.state.value,
        onChangeByValue: this.onStyleChangeB,
        onChangeByEvent: this.onStyleChange,
        label: this.props.name,
        id: this.props.id
      }
    );
  }
};
var ClassesOptionSelector = class extends import_react5.default.PureComponent {
  /**
   * We need the derived function in order to be able to update the value of the
   * selector in case, this is the more efficient way in these cases where things
   * are slightly out of sync
   */
  static getDerivedStateFromProps(props, state) {
    const selectedNode = props.state.currentSelectedElement;
    const time2 = (/* @__PURE__ */ new Date()).getTime();
    if (!(0, import_deep_equal3.default)(selectedNode.richClassList || [], state.value, { strict: true }) && (!Path.equals(props.state.currentSelectedElementAnchor, state.valueForAnchor) || time2 - state.valueLastTimeRequestedUpdate > 300)) {
      return {
        value: selectedNode.richClassList || [],
        valueForAnchor: props.state.currentSelectedElementAnchor
      };
    }
    return null;
  }
  /**
   * constructs a new class selector for rich classes
   * @param props the entire material ui slate wrapper props that the wrapper takes
   */
  constructor(props) {
    super(props);
    const selectedNode = props.state.currentSelectedElement;
    this.state = {
      value: selectedNode.richClassList || [],
      valueForAnchor: props.state.currentSelectedElementAnchor,
      valueLastTimeRequestedUpdate: 0
    };
    this.onRichClassListChange = this.onRichClassListChange.bind(this);
  }
  /**
   * Triggers when the select field changes and receives a new value
   * @param e the change event
   */
  onRichClassListChange(newValue = []) {
    this.setState({
      value: newValue,
      valueForAnchor: this.props.state.currentSelectedElementAnchor,
      valueLastTimeRequestedUpdate: (/* @__PURE__ */ new Date()).getTime()
    }, () => {
      if (newValue.length === 0) {
        newValue = null;
      }
      this.props.helpers.setRichClasses(newValue, this.props.state.currentSelectedElementAnchor);
    });
  }
  unblur() {
    document.body.dataset.unblur = "true";
  }
  resetBlur() {
    delete document.body.dataset.unblur;
  }
  /**
   * The render function that creates the multiselect
   */
  render() {
    const MultiSelector = this.props.WrapperDrawerMultiSelectField || DefaultWrapperDrawerMultiSelectField;
    return /* @__PURE__ */ import_react5.default.createElement(
      MultiSelector,
      {
        id: "rich-class",
        label: this.props.baseI18n.classes,
        onChange: this.onRichClassListChange,
        options: this.props.featureSupport.availableRichClasses.map((element) => ({
          label: element.label,
          value: element.value
        })),
        resetBlur: this.resetBlur,
        unblur: this.unblur,
        values: this.state.value
      }
    );
  }
};
function StylesOptions(props) {
  const setStandalone = (0, import_react5.useCallback)((v) => {
    props.helpers.set({
      standalone: v
    }, props.state.currentSelectedElementAnchor);
  }, []);
  if (!props.state.currentSelectedElement) {
    return null;
  }
  const CheckboxField = props.WrapperDrawerCheckboxField || DefaultWrapperDrawerCheckBoxField;
  const imgStandalone = props.state.currentSelectedElement.type === "image" ? /* @__PURE__ */ import_react5.default.createElement(
    CheckboxField,
    {
      onChange: setStandalone,
      id: "image-standalone",
      label: props.baseI18n.standalone,
      value: props.state.currentSelectedElement.standalone
    }
  ) : null;
  const currentNode = props.state.currentSelectedElement;
  const WrapperDrawerInternalPanelWrapper = props.WrapperDrawerInternalPanelWrapper || DefaultWrapperDrawerInternalPanelWrapper;
  return /* @__PURE__ */ import_react5.default.createElement(WrapperDrawerInternalPanelWrapper, null, imgStandalone, props.featureSupport.supportsRichClasses ? /* @__PURE__ */ import_react5.default.createElement(
    ClassesOptionSelector,
    __spreadValues({}, props)
  ) : null, props.featureSupport.supportsCustomStyles ? /* @__PURE__ */ import_react5.default.createElement(
    SingleStyle,
    {
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setStyle,
      name: props.baseI18n.style,
      styleValue: currentNode.style,
      TextField: props.WrapperDrawerTextField,
      id: "style"
    }
  ) : null, props.featureSupport.supportsCustomStyles && props.featureSupport.supportsTemplating ? /* @__PURE__ */ import_react5.default.createElement(
    SingleStyle,
    {
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setHoverStyle,
      name: props.baseI18n.styleHover,
      styleValue: currentNode.styleHover,
      TextField: props.WrapperDrawerTextField,
      id: "style-hover"
    }
  ) : null, props.featureSupport.supportsCustomStyles && props.featureSupport.supportsTemplating ? /* @__PURE__ */ import_react5.default.createElement(
    SingleStyle,
    {
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setActiveStyle,
      name: props.baseI18n.styleActive,
      styleValue: currentNode.styleActive,
      TextField: props.WrapperDrawerTextField,
      id: "style-active"
    }
  ) : null);
}

// ../editor/slate/drawer/actions.tsx
var import_react6 = __toESM(require_react());
var EVENTS = [
  "click",
  "blur",
  "focus",
  "input",
  "keydown",
  "keypress",
  "keyup",
  "mousedown",
  "mouseenter",
  "mouseleave",
  "mousemove",
  "mouseover",
  "mouseout",
  "mouseup",
  "mousewheel",
  "touchstart",
  "touchmove",
  "touchend",
  "touchcancel",
  "wheel"
];
var SingleAction = class extends import_react6.default.PureComponent {
  /**
   * We need the derived function in order to be able to update the value of the
   * selector in case, this is the more efficient way in these cases where things
   * are slightly out of sync
   */
  static getDerivedStateFromProps(props, state) {
    const time2 = (/* @__PURE__ */ new Date()).getTime();
    if ((props.actionValue || "") !== state.value && (!Path.equals(props.anchor, state.valueForAnchor) || time2 - state.valueLastTimeRequestedUpdate > 300)) {
      return {
        value: props.actionValue || "",
        valueForAnchor: props.anchor
      };
    }
    return null;
  }
  /**
   * constructs a new SingleAction instance
   * @param props the props
   */
  constructor(props) {
    super(props);
    this.onActionValueChange = this.onActionValueChange.bind(this);
    this.onDirectChange = this.onDirectChange.bind(this);
    this.state = {
      value: props.actionValue || "",
      valueForAnchor: props.anchor,
      valueLastTimeRequestedUpdate: 0
    };
  }
  /**
   * Triggers when the selector value has changed to something else
   * @param e the change event
   */
  onActionValueChange(e2) {
    this.onDirectChange(e2.target.value);
  }
  onDirectChange(newValue = null) {
    this.setState({
      value: newValue || "",
      valueForAnchor: this.props.anchor,
      valueLastTimeRequestedUpdate: (/* @__PURE__ */ new Date()).getTime()
    });
    this.props.onChange(this.props.name, newValue, this.props.anchor);
  }
  unblur() {
    document.body.dataset.unblur = "true";
  }
  resetBlur() {
    delete document.body.dataset.unblur;
  }
  /**
   * The render function for the component
   */
  render() {
    const SelectField = this.props.SelectField || DefaultWrapperDrawerSelectField;
    return /* @__PURE__ */ import_react6.default.createElement(
      SelectField,
      {
        id: this.props.id,
        label: this.props.name,
        onChangeByEvent: this.onActionValueChange,
        onChangeByValue: this.onDirectChange,
        options: this.props.options,
        resetBlur: this.resetBlur,
        unblur: this.unblur,
        value: this.state.value,
        displayEmpty: true
      }
    );
  }
};
function ActionsOptions(props) {
  const currentNode = props.state.currentSelectedInlineElement || props.state.currentSelectedBlockElement || props.state.currentSelectedSuperBlockElements && props.state.currentSelectedSuperBlockElements[props.state.currentSelectedSuperBlockElements.length - 1];
  const currentNodeContext = props.state.currentSelectedInlineContext || props.state.currentSelectedBlockContext || props.state.currentSelectedTopmostSuperBlockContext;
  const currentNodeAnchor = props.state.currentSelectedInlineElementAnchor || props.state.currentSelectedBlockElementAnchor || props.state.currentSelectedSuperBlockElementAnchors && props.state.currentSelectedSuperBlockElementAnchors[props.state.currentSelectedSuperBlockElementAnchors.length - 1];
  let allOptions = currentNodeContext ? Object.keys(currentNodeContext.properties).map((p) => {
    const value = currentNodeContext.properties[p];
    if (value.type !== "function") {
      return null;
    }
    return {
      value: p,
      label: typeof value.label === "function" ? value.label() : value.label,
      primary: props.state.currentRootContext !== currentNodeContext
    };
  }).filter((v) => !!v) : [];
  if (props.state.currentRootContext !== currentNodeContext) {
    allOptions = allOptions.concat(Object.keys(props.state.currentRootContext.properties).map((p) => {
      const value = props.state.currentRootContext.properties[p];
      if (value.nonRootInheritable) {
        return null;
      }
      if (value.type !== "function") {
        return null;
      }
      return {
        value: p,
        label: typeof value.label === "function" ? value.label() : value.label,
        primary: false
      };
    }).filter((v) => !!v));
  }
  if (allOptions) {
    allOptions = [{
      value: "",
      label: " - ",
      primary: false
    }].concat(allOptions);
  }
  ;
  const WrapperDrawerInternalPanelWrapper = props.WrapperDrawerInternalPanelWrapper || DefaultWrapperDrawerInternalPanelWrapper;
  return /* @__PURE__ */ import_react6.default.createElement(WrapperDrawerInternalPanelWrapper, null, EVENTS.map((v, index) => /* @__PURE__ */ import_react6.default.createElement(
    SingleAction,
    {
      key: v,
      name: v,
      actionValue: currentNode[v] || null,
      options: allOptions,
      anchor: currentNodeAnchor,
      onChange: props.helpers.setAction,
      groupIndex: index,
      id: "action-" + v,
      SelectField: props.WrapperDrawerSelectField
    }
  )));
}

// ../editor/slate/drawer/templating.tsx
var import_react7 = __toESM(require_react());
var SingleTemplatingElement = class extends import_react7.default.PureComponent {
  /**
   * We need the derived function in order to be able to update the value of the
   * selector in case, this is the more efficient way in these cases where things
   * are slightly out of sync
   */
  static getDerivedStateFromProps(props, state) {
    const time2 = (/* @__PURE__ */ new Date()).getTime();
    if ((props.value || "") !== state.value && (!Path.equals(props.anchor, state.valueForAnchor) || time2 - state.valueLastTimeRequestedUpdate > 300)) {
      return {
        value: props.value || "",
        valueForAnchor: props.anchor
      };
    }
    return null;
  }
  /**
   * Construct a brand new templating element that provides a selector
   * @param props the props
   */
  constructor(props) {
    super(props);
    this.onChange = this.onChange.bind(this);
    this.onChangeByEvent = this.onChangeByEvent.bind(this);
    this.state = {
      value: props.value || "",
      valueForAnchor: props.anchor,
      valueLastTimeRequestedUpdate: 0
    };
  }
  /**
   * This function triggers once the selection has changed
   * in the field
   * @param e the change event
   */
  onChange(newValue) {
    this.setState({
      value: newValue || "",
      valueForAnchor: this.props.anchor,
      valueLastTimeRequestedUpdate: (/* @__PURE__ */ new Date()).getTime()
    });
    this.props.onChange(newValue, this.props.anchor);
  }
  /**
  * This function triggers once the selection has changed
  * in the field
  * @param e the change event
  */
  onChangeByEvent(e2) {
    const newValue = e2.target.value || null;
    this.onChange(newValue);
  }
  unblur() {
    document.body.dataset.unblur = "true";
  }
  resetBlur() {
    delete document.body.dataset.unblur;
  }
  /**
   * The render function
   */
  render() {
    const SelectField = this.props.SelectField || DefaultWrapperDrawerSelectField;
    return /* @__PURE__ */ import_react7.default.createElement(
      SelectField,
      {
        label: this.props.i18nName,
        onChangeByEvent: this.onChangeByEvent,
        onChangeByValue: this.onChange,
        options: this.props.options,
        resetBlur: this.resetBlur,
        unblur: this.unblur,
        value: this.state.value,
        id: this.props.id,
        displayEmpty: true
      }
    );
  }
};
function DefaultDrawerTemplatingContainerBox(props) {
  return /* @__PURE__ */ import_react7.default.createElement("div", { className: "staleEditorDrawerTemplatingContainerBox" }, props.children);
}
function TemplatingOptions(props) {
  const currentNode = props.state.currentSelectedElement;
  const allEachContexts = [
    {
      label: " - ",
      value: ""
    }
  ];
  const allContexts = [
    {
      label: " - ",
      value: ""
    }
  ];
  const allIfConditions = [
    {
      label: " - ",
      value: ""
    }
  ];
  const currentSelectElementForSelectContext = getContextFor(
    props.state.currentSelectedElementAnchor,
    "select-context",
    props.state.treeValue,
    props.state.currentRootContext
  );
  if (currentSelectElementForSelectContext) {
    Object.keys(currentSelectElementForSelectContext.properties).forEach((p) => {
      const value = currentSelectElementForSelectContext.properties[p];
      if (value.type !== "context" || value.loopable) {
        return null;
      }
      const option = {
        value: p,
        label: typeof value.label === "function" ? value.label() : value.label
      };
      allContexts.push(option);
    });
  }
  const currentSelectElementForEachContext = getContextFor(
    props.state.currentSelectedElementAnchor,
    "select-loop",
    props.state.treeValue,
    props.state.currentRootContext
  );
  if (currentSelectElementForEachContext) {
    Object.keys(currentSelectElementForEachContext.properties).forEach((p) => {
      const value = currentSelectElementForEachContext.properties[p];
      const isValidForBoolean = value.type === "boolean";
      const isValidForLoop = value.type === "context" && value.loopable;
      if (!isValidForBoolean && !isValidForLoop) {
        return null;
      }
      const option = {
        value: p,
        label: typeof value.label === "function" ? value.label() : value.label
      };
      if (isValidForBoolean) {
        allIfConditions.push(option);
      } else {
        allEachContexts.push(option);
      }
    });
  }
  if (currentNode.forEach) {
    const eachFound = allEachContexts.find((v) => v.value === currentNode.forEach);
    if (!eachFound) {
      allEachContexts.push({
        value: currentNode.forEach,
        label: currentNode.forEach
      });
    }
  }
  if (currentNode.context) {
    const contextFound = allContexts.find((v) => v.value === currentNode.context);
    if (!contextFound) {
      allContexts.push({
        value: currentNode.context,
        label: currentNode.context
      });
    }
  }
  if (currentNode.ifCondition) {
    const ifConditionFound = allIfConditions.find((v) => v.value === currentNode.ifCondition);
    if (!ifConditionFound) {
      allEachContexts.push({
        value: currentNode.ifCondition,
        label: currentNode.ifCondition
      });
    }
  }
  const DrawerTemplatingContainerBox = props.DrawerTemplatingContainerBox || DefaultDrawerTemplatingContainerBox;
  return /* @__PURE__ */ import_react7.default.createElement(DrawerTemplatingContainerBox, null, /* @__PURE__ */ import_react7.default.createElement(
    SingleTemplatingElement,
    {
      name: "context",
      i18nName: props.baseI18n.context,
      value: currentNode.context || null,
      options: allContexts,
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setContext,
      SelectField: props.WrapperDrawerSelectField,
      id: "render-context"
    }
  ), /* @__PURE__ */ import_react7.default.createElement(
    SingleTemplatingElement,
    {
      name: "if",
      i18nName: props.baseI18n.renderCondition,
      value: currentNode.ifCondition || null,
      options: allIfConditions,
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setIfCondition,
      SelectField: props.WrapperDrawerSelectField,
      id: "render-if"
    }
  ), /* @__PURE__ */ import_react7.default.createElement(
    SingleTemplatingElement,
    {
      name: "each",
      i18nName: props.baseI18n.each,
      value: currentNode.forEach || null,
      options: allEachContexts,
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setForEach,
      SelectField: props.WrapperDrawerSelectField,
      id: "render-for-each"
    }
  ));
}

// ../editor/slate/drawer/index.tsx
function DefaultWrapperDrawerElementTitle(props) {
  return /* @__PURE__ */ import_react8.default.createElement("h6", null, props.info.isInteractive ? /* @__PURE__ */ import_react8.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconRtlOnly" }, String.fromCharCode(9094)) : null, /* @__PURE__ */ import_react8.default.createElement(
    "span",
    {
      className: props.isCurrent ? "slateEditorWrapperDrawerElementTitleSelected" : "slateEditorWrapperDrawerElementTitle",
      role: "button",
      "aria-current": props.isCurrent,
      onClick: props.onSelect
    },
    props.info.name
  ), props.info.isInteractive ? /* @__PURE__ */ import_react8.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconLtrOnly" }, String.fromCharCode(9094)) : null, props.isCurrent ? null : /* @__PURE__ */ import_react8.default.createElement(import_react8.default.Fragment, null, /* @__PURE__ */ import_react8.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconLtrOnly" }, String.fromCharCode(11106)), /* @__PURE__ */ import_react8.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconRtlOnly" }, String.fromCharCode(11106))));
}
function DefaultWrapperDrawerElementTitleWrapper(props) {
  return /* @__PURE__ */ import_react8.default.createElement("div", { className: "slateEditorWrapperDrawerElementTitleWrapper" }, props.children);
}
function DefaultWrapperDrawerInfoPanelWrapper(props) {
  return props.children;
}
function DefaultWrapperDrawerTabs(props) {
  return /* @__PURE__ */ import_react8.default.createElement("div", { className: "slateEditorWrapperDrawerTabs" }, props.options.map((v) => /* @__PURE__ */ import_react8.default.createElement(
    "button",
    {
      onClick: props.setSelectedOption.bind(null, v.id),
      key: v.id,
      className: props.selectedOption === v.id ? "slateEditorWrapperDrawerTabSelected" : "slateEditorWrapperDrawerTab"
    },
    v.label
  )));
}
function WrapperDrawer(props) {
  const [location2, setLocation] = (0, import_react8.useState)(localStorage.getItem("SLATE_DRAWER_LAST_LOCATION") || "MAIN");
  const [accessibilitySelectedOption, useAccessibilitySelectedOption] = (0, import_react8.useState)(null);
  (0, import_react8.useEffect)(() => {
    if (!props.drawerOpen) {
      useAccessibilitySelectedOption(null);
    }
  }, [props.drawerOpen]);
  const setLocationCallback = (0, import_react8.useCallback)((value) => {
    localStorage.setItem("SLATE_DRAWER_LAST_LOCATION", value);
    useAccessibilitySelectedOption(value);
    setLocation(value);
  }, []);
  let settingsForNode = null;
  let titleForNode = null;
  if (props.state.currentSelectedElement) {
    let infoPanel = null;
    switch (location2) {
      case "MAIN":
        infoPanel = /* @__PURE__ */ import_react8.default.createElement(GeneralOptions, __spreadValues({}, props));
        break;
      case "STYLES":
        infoPanel = /* @__PURE__ */ import_react8.default.createElement(StylesOptions, __spreadValues({}, props));
        break;
      case "ACTIONS":
        infoPanel = /* @__PURE__ */ import_react8.default.createElement(ActionsOptions, __spreadValues({}, props));
        break;
      case "TEMPLATING":
        infoPanel = /* @__PURE__ */ import_react8.default.createElement(TemplatingOptions, __spreadValues({}, props));
        break;
    }
    const selectedNodeInfo = getInfoFor(
      props.state.currentSelectedElement,
      props.baseI18n
    );
    const potentialBlockParent = props.state.currentSelectedElement === props.state.currentSelectedInlineElement ? getInfoFor(
      props.state.currentSelectedBlockElement,
      props.baseI18n
    ) : null;
    const superBlockPaths = (props.state.currentSelectedSuperBlockElements || []).filter((e2) => e2 !== props.state.currentSelectedElement).map((v, index) => {
      return {
        info: getInfoFor(v, props.baseI18n),
        path: props.state.currentSelectedSuperBlockElementAnchors[index]
      };
    });
    const entirePath = superBlockPaths;
    if (potentialBlockParent) {
      entirePath.push({
        info: potentialBlockParent,
        path: props.state.currentSelectedBlockElementAnchor
      });
    }
    entirePath.push({
      info: selectedNodeInfo,
      path: props.state.currentSelectedElementAnchor
    });
    const WrapperDrawerElementTitle = props.WrapperDrawerElementTitle || DefaultWrapperDrawerElementTitle;
    titleForNode = entirePath.map((v, i2) => {
      return /* @__PURE__ */ import_react8.default.createElement(
        WrapperDrawerElementTitle,
        {
          entirePath,
          info: v.info,
          isCurrent: i2 === entirePath.length - 1,
          key: i2,
          index: i2,
          onSelect: i2 === entirePath.length - 1 ? null : props.helpers.selectPath.bind(null, v.path)
        }
      );
    });
    const WrapperDrawerInfoPanelWrapper = props.WrapperDrawerInfoPanelWrapper || DefaultWrapperDrawerInfoPanelWrapper;
    const WrapperDrawerTabs = props.WrapperDrawerTabs || DefaultWrapperDrawerTabs;
    settingsForNode = /* @__PURE__ */ import_react8.default.createElement(import_react8.default.Fragment, null, !selectedNodeInfo.isText ? /* @__PURE__ */ import_react8.default.createElement(
      WrapperDrawerTabs,
      {
        accessibilitySelectedOption,
        selectedOption: location2,
        setSelectedOption: setLocationCallback,
        setAccessibilitySelectedOption: useAccessibilitySelectedOption,
        options: [
          {
            id: "MAIN",
            label: props.baseI18n.settings
          },
          props.featureSupport.supportsCustomStyles || props.featureSupport.supportsRichClasses ? {
            id: "STYLES",
            label: props.baseI18n.styles
          } : null,
          props.featureSupport.supportsTemplating ? {
            id: "TEMPLATING",
            label: props.baseI18n.templating
          } : null,
          props.featureSupport.supportsTemplating ? {
            id: "ACTIONS",
            label: props.baseI18n.actions
          } : null
        ].filter((v) => !!v)
      }
    ) : null, /* @__PURE__ */ import_react8.default.createElement(
      WrapperDrawerInfoPanelWrapper,
      {
        accessibilitySelectedOption,
        selectedOption: location2,
        setSelectedOption: setLocationCallback,
        setAccessibilitySelectedOption: useAccessibilitySelectedOption
      },
      infoPanel
    ));
  }
  const WrapperForTitle = props.WrapperDrawerElementTitleWrapper || DefaultWrapperDrawerElementTitleWrapper;
  return /* @__PURE__ */ import_react8.default.createElement(import_react8.default.Fragment, null, /* @__PURE__ */ import_react8.default.createElement(WrapperForTitle, null, titleForNode), settingsForNode, props.drawerExtraChildren);
}

// ../editor/slate/dialogs/file.tsx
var import_react9 = __toESM(require_react());
var import_react_dom2 = __toESM(require_react_dom());
function DefaultDialog(props) {
  if (!props.open) {
    return null;
  }
  const dialog = /* @__PURE__ */ import_react9.default.createElement("div", { className: "slateEditorDialogBackdrop" }, /* @__PURE__ */ import_react9.default.createElement("div", { className: "slateEditorDialog" }, /* @__PURE__ */ import_react9.default.createElement("div", { className: "slateEditorDialogTitle" }, props.title), /* @__PURE__ */ import_react9.default.createElement("div", { className: "slateEditorDialogContent" }, props.children), /* @__PURE__ */ import_react9.default.createElement("div", { className: "slateEditorButtons" }, props.buttons.map((v) => /* @__PURE__ */ import_react9.default.createElement("button", { key: v.action, onClick: v.onClick }, v.label)))));
  return import_react_dom2.default.createPortal(dialog, document.body);
}
var FileLoadErrorDialog = class extends import_react9.default.PureComponent {
  constructor(props) {
    super(props);
    this.onClose = this.onClose.bind(this);
  }
  onClose() {
    this.props.dismissCurrentLoadError();
  }
  /**
   * The render function
   */
  render() {
    const Dialog = this.props.Dialog || DefaultDialog;
    return /* @__PURE__ */ import_react9.default.createElement(
      Dialog,
      {
        open: !!this.props.currentLoadError,
        onClose: this.onClose,
        title: this.props.i18nGenericError,
        buttons: [
          {
            label: this.props.i18nOk,
            onClick: this.props.dismissCurrentLoadError,
            action: "primary"
          }
        ]
      },
      this.props.currentLoadError
    );
  }
};

// ../editor/slate/wrapper.tsx
var import_react_dom3 = __toESM(require_react_dom());
var defaultWrapperI18nRichInfoEnglish = __spreadProps(__spreadValues({}, defaultBaseI18nRichInfoEnglish), {
  formatAddContainerLabel: "add container",
  addTemplateHTML: {
    label: "select a template",
    placeholder: "select a template",
    submit: "ok",
    title: "add template html"
  },
  addTemplateText: {
    label: "select a template",
    placeholder: "select a template",
    submit: "ok",
    title: "add template text"
  },
  formatAddCustomLabel: "add custom",
  formatAddFileLabel: "add file",
  formatAddImageLabel: "add image",
  formatAddTableLabel: "add table",
  formatAddTbodyLabel: "add table body",
  formatAddTdLabel: "add table column",
  formatAddTemplateHTML: "add template html",
  formatAddTemplateText: "add template text",
  formatAddTfootLabel: "toggle table foot",
  formatAddTheadLabel: "add table head",
  formatAddThLabel: "toggle table header",
  formatAddTrLabel: "add table row",
  formatAddVideoLabel: "add table video",
  formatBoldLabel: "bold",
  formatDeleteElement: "delete",
  formatDelTdLabel: "delete table column",
  formatDelThLabel: "delete table header column",
  formatDelTrLabel: "delete table row",
  formatItalicLabel: "italic",
  formatLinkLabel: "link",
  formatListBulletedLabel: "bulleted list",
  formatListNumberedLabel: "numbered list",
  formatMakeLoop: "make loop",
  formatMore: "more",
  formatQuoteLabel: "quote",
  formatSetActiveStyleLabel: "active style",
  formatSetClassLabel: "class names",
  formatSetContext: "set context",
  formatSetEventHandlers: "set event handlers",
  formatSetHoverStyleLabel: "hover style",
  formatSetRenderCondition: "set render condition",
  formatSetStyleLabel: "set style",
  formatSetUIHandlerArgLabel: "set ui handler arg",
  formatSetUIHandlerArgName: "set ui handler arg name",
  formatSetUIHandlerArgValue: "set ui handler arg value",
  formatSetUIHandlerLabel: "set ui handler",
  formatTitleLabel: "title",
  formatUnderlineLabel: "underline",
  loadVideo: {
    invalid: "invalid url",
    label: "youtube and vimeo only",
    placeholder: "https://youtube.com/...",
    submit: "insert",
    title: "insert a video"
  },
  setLink: {
    invalid: "invalid link",
    label: "url",
    placeholder: "https://url",
    placeholderLocalOnly: "./local-url-only",
    submit: "ok",
    templated: "or select one of these template values",
    templatedLabel: "template value",
    templatedPlaceholder: "template value",
    templatedUnspecified: "unspecified",
    title: "insert a link,"
  },
  genericError: "error",
  ok: "ok"
});
function callFn(focusFn, actionFn, ...args) {
  focusFn();
  actionFn(...args);
}
function DefaultEditorContainer(props) {
  return /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorDefaultEditorContainer" }, props.children);
}
var DefaultToolbar = import_react10.default.forwardRef((props, ref) => {
  return /* @__PURE__ */ import_react10.default.createElement("div", __spreadProps(__spreadValues({ className: "slateEditorToolbar" }, props.props), { ref }), /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorToolbarInternal" }, props.toolbarContents, props.customChildren, /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorToolbarInternalSpacer" }), props.drawerButton));
});
function DefaultToolbarButtonComponent(props) {
  return /* @__PURE__ */ import_react10.default.createElement(
    "button",
    {
      className: "slateEditorToolbarButton " + (props.selected ? " selected" : ""),
      title: props.title,
      disabled: props.disabled,
      onClick: props.onClick,
      dangerouslySetInnerHTML: { __html: props.htmlEntity + (typeof props.count === "number" ? " (" + props.count + ")" : "") }
    }
  );
}
function Bold(props) {
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  const disabled = !props.state.currentSelectedText || !props.state.allowsText;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatBoldLabel,
      disabled,
      selected: props.state.currentSelectedText && props.state.currentSelectedText.bold,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.formatToggle, "bold"),
      htmlEntity: "\u{1D401}",
      type: "bold",
      disjointedMode: props.disjointedMode
    }
  );
}
function Italic(props) {
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  const disabled = !props.state.currentSelectedText || !props.state.allowsText;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatItalicLabel,
      disabled,
      selected: props.state.currentSelectedText && props.state.currentSelectedText.italic,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.formatToggle, "italic"),
      htmlEntity: "\u{1D470}",
      type: "italic",
      disjointedMode: props.disjointedMode
    }
  );
}
function Underline(props) {
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  const disabled = !props.state.currentSelectedText || !props.state.allowsText;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatUnderlineLabel,
      disabled,
      selected: props.state.currentSelectedText && props.state.currentSelectedText.underline,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.formatToggle, "underline"),
      htmlEntity: "\u1E48",
      type: "underline",
      disjointedMode: props.disjointedMode
    }
  );
}
function VDivider(props) {
  if (props.ToolbarVDivider) {
    const RealDivider = props.ToolbarVDivider;
    return /* @__PURE__ */ import_react10.default.createElement(RealDivider, null);
  }
  return /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorVdivider" });
}
function HDivider(props) {
  if (props.ToolbarHDivider) {
    const RealDivider = props.ToolbarHDivider;
    return /* @__PURE__ */ import_react10.default.createElement(RealDivider, null);
  }
  return /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, null, /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorHdividerspacer" }), /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorHdivider" }));
}
function Link(props) {
  if (!props.featureSupport.supportsLinks || !props.isReady) {
    return null;
  }
  let templateLinkAmount = 0;
  if (props.featureSupport.supportsTemplating && props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentSelectedBlockContext.properties).forEach((key) => {
      const property = props.state.currentSelectedBlockContext.properties[key];
      if (property.type === "link") {
        templateLinkAmount++;
      }
    });
  }
  if (props.featureSupport.supportsTemplating && props.state.currentRootContext && props.state.currentRootContext !== props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentRootContext.properties).forEach((key) => {
      const property = props.state.currentRootContext.properties[key];
      if (property.nonRootInheritable) {
        return;
      }
      if (property.type === "link") {
        templateLinkAmount++;
      }
    });
  }
  const disabled = !props.state.allowsInsertElement({ type: "link", href: "", children: [], thref: null });
  const selected = props.helpers.editor.selection && props.helpers.Range.isCollapsed(props.helpers.editor.selection) && props.state.currentSelectedInlineElement && props.state.currentSelectedInlineElement.type === "link";
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatLinkLabel,
      selected,
      disabled,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.toggleLink, null, null),
      count: templateLinkAmount === 0 ? null : templateLinkAmount,
      htmlEntity: "\u{1F517}",
      type: "link",
      disjointedMode: props.disjointedMode
    }
  );
}
function Title(props) {
  if (!props.featureSupport.supportsTitle) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "title", titleType: "h1", children: [] }, { collapsed: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatTitleLabel,
      disabled,
      selected: props.state.currentSelectedBlockElement && props.state.currentSelectedBlockElement.type === "title",
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.toggleTitle, "h1"),
      htmlEntity: "\u{1D413}",
      type: "title",
      disjointedMode: props.disjointedMode
    }
  );
}
function Quote(props) {
  if (!props.featureSupport.supportsQuote) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "quote", children: [] }, { collapsed: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatQuoteLabel,
      disabled,
      selected: props.state.currentSelectedBlockElement && props.state.currentSelectedBlockElement.type === "quote",
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.toggleQuote),
      htmlEntity: '"',
      type: "quote",
      disjointedMode: props.disjointedMode
    }
  );
}
function NumberedList(props) {
  if (!props.featureSupport.supportsLists) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "list", listType: "numbered", children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatListNumberedLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertList, "numbered"),
      htmlEntity: "123",
      type: "numbered-list",
      disjointedMode: props.disjointedMode
    }
  );
}
function BulletedList(props) {
  if (!props.featureSupport.supportsLists) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "list", listType: "bulleted", children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatListBulletedLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertList, "bulleted"),
      htmlEntity: "...",
      type: "bulleted-list",
      disjointedMode: props.disjointedMode
    }
  );
}
var imgExample = {
  type: "image",
  children: [STANDARD_TEXT_NODE()],
  width: 0,
  height: 0,
  alt: "",
  src: "",
  srcSet: "",
  srcId: "",
  standalone: false,
  sizes: ""
};
function Image2(props) {
  if (!props.featureSupport.supportsImages) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement(imgExample, { selected: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddImageLabel,
      disabled,
      selected: false,
      onClick: props.requestImage,
      htmlEntity: "\u{1F4F7}",
      type: "image",
      disjointedMode: props.disjointedMode
    }
  );
}
var videoExample = {
  type: "video",
  origin: "youtube",
  src: "",
  children: [STANDARD_TEXT_NODE()]
};
function Video(props) {
  if (!props.featureSupport.supportsVideos) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement(videoExample, { selected: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddVideoLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertVideo, null),
      htmlEntity: "\u{1F3A5}",
      type: "video",
      disjointedMode: props.disjointedMode
    }
  );
}
var fileExample = {
  type: "file",
  children: [STANDARD_TEXT_NODE()],
  extension: "",
  fileName: "",
  size: "",
  src: "",
  srcId: ""
};
function File(props) {
  if (!props.featureSupport.supportsFiles) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement(fileExample, { selected: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddFileLabel,
      disabled,
      selected: false,
      onClick: props.requestFile,
      htmlEntity: "\u{1F5B9}",
      type: "file",
      disjointedMode: props.disjointedMode
    }
  );
}
function Container(props) {
  if (!props.featureSupport.supportsContainers) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "container", containerType: null, children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddContainerLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertContainer, null),
      htmlEntity: "\u26F6",
      type: "container",
      disjointedMode: props.disjointedMode
    }
  );
}
function Table(props) {
  if (!props.featureSupport.supportsTables) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "table", tableType: null, children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddTableLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertTable, null),
      htmlEntity: "\u1699",
      type: "table",
      disjointedMode: props.disjointedMode
    }
  );
}
function TemplateText(props) {
  if (!props.isReady || !props.featureSupport.supportsTemplating) {
    return null;
  }
  let templateTextAmount = 0;
  if (props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentSelectedBlockContext.properties).forEach((key) => {
      const property = props.state.currentSelectedBlockContext.properties[key];
      if (property.type === "text") {
        templateTextAmount++;
      }
    });
  }
  if (props.featureSupport.supportsTemplating && props.state.currentRootContext && props.state.currentRootContext !== props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentRootContext.properties).forEach((key) => {
      const property = props.state.currentRootContext.properties[key];
      if (property.nonRootInheritable) {
        return;
      }
      if (property.type === "text") {
        templateTextAmount++;
      }
    });
  }
  if (templateTextAmount === 0) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "inline", children: [], textContent: "text" });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddTemplateText,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertTemplateText, null, null),
      htmlEntity: "text",
      type: "table",
      disjointedMode: props.disjointedMode,
      count: templateTextAmount
    }
  );
}
function TemplateHTML(props) {
  if (!props.isReady || !props.featureSupport.supportsTemplating) {
    return null;
  }
  let templateHTMLAmount = 0;
  const currentSelectedSuperBlockElement = props.state.currentSelectedSuperBlockElements && props.state.currentSelectedSuperBlockElements[props.state.currentSelectedSuperBlockElements.length - 1];
  if (currentSelectedSuperBlockElement && props.state.currentSelectedTopmostSuperBlockContext) {
    Object.keys(props.state.currentSelectedTopmostSuperBlockContext.properties).forEach((key) => {
      const property = props.state.currentSelectedTopmostSuperBlockContext.properties[key];
      if (property.type === "html") {
        templateHTMLAmount++;
      }
    });
  }
  if (props.featureSupport.supportsTemplating && props.state.currentRootContext && props.state.currentRootContext !== props.state.currentSelectedTopmostSuperBlockContext) {
    Object.keys(props.state.currentRootContext.properties).forEach((key) => {
      const property = props.state.currentRootContext.properties[key];
      if (property.nonRootInheritable) {
        return;
      }
      if (property.type === "html") {
        templateHTMLAmount++;
      }
    });
  }
  if (templateHTMLAmount === 0) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "void-block", children: [], html: "html" });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddTemplateHTML,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertTemplateHTML, null, null),
      htmlEntity: "html",
      type: "table",
      disjointedMode: props.disjointedMode,
      count: templateHTMLAmount
    }
  );
}
function ToolbarExtra(props) {
  const elementReference = typeof props.extra.element === "function" ? props.extra.element() : props.extra.element;
  const defaultAction = (0, import_react10.useCallback)(() => {
    const element = typeof props.extra.element === "function" ? props.extra.element() : props.extra.element;
    props.helpers.insertElement(element);
    return element;
  }, [props.extra.element, props.helpers.insertElement]);
  (0, import_react10.useEffect)(() => {
    if (props.extra.onAnyKeyDown) {
      document.body.addEventListener("keydown", props.extra.onAnyKeyDown);
      return () => {
        document.body.removeEventListener("keydown", props.extra.onAnyKeyDown);
      };
    }
    return;
  }, [props.extra.onAnyKeyDown]);
  const onClick = (0, import_react10.useCallback)((e2) => {
    if (props.extra.refocusHandler) {
      props.extra.refocusHandler(props.helpers.focus, e2);
    } else {
      props.helpers.focus();
    }
    props.extra.onClick ? props.extra.onClick(defaultAction, e2) : defaultAction();
  }, []);
  let disabled = false;
  if (elementReference) {
    disabled = !props.state.allowsInsertElement(elementReference);
  }
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  if (typeof props.extra.title === "string" || !props.extra.title) {
    return /* @__PURE__ */ import_react10.default.createElement(
      ToolbarButton,
      __spreadValues({
        title: props.extra.title,
        disabled,
        selected: props.extra.selected,
        count: props.extra.count,
        disjointedMode: props.disjointedMode,
        htmlEntity: "?",
        type: "extra",
        extraId: props.extra.id,
        onClick
      }, props.extra.toolbarButtonProps)
    );
  } else {
    const element = props.extra.title;
    return import_react10.default.cloneElement(element, {
      children: (i18nTitle) => /* @__PURE__ */ import_react10.default.createElement(
        ToolbarButton,
        __spreadValues({
          title: i18nTitle,
          disabled,
          selected: props.extra.selected,
          count: props.extra.count,
          disjointedMode: props.disjointedMode,
          htmlEntity: "?",
          type: "extra",
          extraId: props.extra.id,
          onClick
        }, props.extra.toolbarButtonProps)
      )
    });
  }
}
function ToolbarExtras(props) {
  if (props.toolbarExtras && props.toolbarExtras.length) {
    const toolbarExtras = props.toolbarExtras.map((x, index) => {
      return /* @__PURE__ */ import_react10.default.createElement(ToolbarExtra, __spreadProps(__spreadValues({}, props), { extra: x, key: index }));
    });
    const customs = props.toolbarExtras.map((x, i2) => x.customChildren ? /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, { key: i2 }, x.customChildren) : null);
    return /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, null, toolbarExtras, customs);
  }
  return null;
}
function None() {
  return null;
}
var toolbarRegistry = {
  none: None,
  italic: Italic,
  bold: Bold,
  underline: Underline,
  "bulleted-list": BulletedList,
  "numbered-list": NumberedList,
  "template-html": TemplateHTML,
  "template-text": TemplateText,
  title: Title,
  container: Container,
  divider: VDivider,
  hdivider: HDivider,
  extras: ToolbarExtras,
  file: File,
  image: Image2,
  link: Link,
  quote: Quote,
  video: Video,
  table: Table
};
function DefaultToolbarDrawerToggleButton(props) {
  return /* @__PURE__ */ import_react10.default.createElement(
    "button",
    {
      onClick: props.toggleDrawer,
      className: "slateEditorToolbarButton",
      dangerouslySetInnerHTML: { __html: props.drawerOpen ? "&#11014;" : "&#11015;" }
    }
  );
}
var RichTextEditorToolbar = class extends import_react10.default.Component {
  constructor(props) {
    super(props);
    this.state = {
      isReady: false
    };
  }
  componentDidMount() {
    this.setState({
      isReady: true
    });
    this.props.onHeightChange(this.getHeight());
  }
  componentDidUpdate() {
    this.props.onHeightChange(this.getHeight());
  }
  getHeight() {
    var _a, _b;
    return (_b = (_a = this.appBarHeaderRef) == null ? void 0 : _a.current) == null ? void 0 : _b.offsetHeight;
  }
  getAppbarHeader() {
    var _a;
    return (_a = this.appBarHeaderRef) == null ? void 0 : _a.current;
  }
  render() {
    if (!this.props.state.isRichText) {
      return null;
    }
    if (this.props.disjointedMode && !this.props.disjointedModeKeepToolbar && !this.props.state.currentSelectedElement) {
      return null;
    }
    const toolbarForm = (this.props.customToolbar || [
      "bold",
      "italic",
      "underline",
      this.props.featureSupport.supportsTitle || this.props.featureSupport.supportsQuote || this.props.featureSupport.supportsLinks || this.props.featureSupport.supportsLists ? "divider" : "none",
      this.props.featureSupport.supportsLinks ? "link" : "none",
      this.props.featureSupport.supportsTitle ? "title" : "none",
      this.props.featureSupport.supportsQuote ? "quote" : "none",
      this.props.featureSupport.supportsLists ? "bulleted-list" : "none",
      this.props.featureSupport.supportsLists ? "numbered-list" : "none",
      this.props.featureSupport.supportsTables ? "table" : "none",
      this.props.featureSupport.supportsImages || this.props.featureSupport.supportsFiles || this.props.featureSupport.supportsVideos ? "divider" : "none",
      this.props.featureSupport.supportsImages ? "image" : "none",
      this.props.featureSupport.supportsFiles ? "file" : "none",
      this.props.featureSupport.supportsVideos ? "video" : "none",
      "divider",
      this.props.featureSupport.supportsContainers ? "container" : "none",
      "template-text",
      "template-html",
      this.props.toolbarExtras && this.props.toolbarExtras.length ? "extras" : "none"
    ]).map((v) => {
      if (typeof v === "function") {
        return v(this.props);
      }
      return v;
    });
    const DrawerToggleComponent = this.props.ToolbarDrawerButton || DefaultToolbarDrawerToggleButton;
    let drawerButton = this.props.shouldHaveDrawer() ? /* @__PURE__ */ import_react10.default.createElement(
      DrawerToggleComponent,
      {
        drawerOpen: this.props.drawerOpen,
        toggleDrawer: this.props.toggleDrawer,
        disjointedMode: this.props.disjointedMode
      }
    ) : null;
    const customChildren = [];
    const toolbarFormMapped = toolbarForm.map((ele, index) => {
      if (typeof ele === "string") {
        const Element4 = toolbarRegistry[ele];
        return /* @__PURE__ */ import_react10.default.createElement(
          Element4,
          __spreadProps(__spreadValues({}, this.props), {
            isReady: this.state.isReady,
            key: index
          })
        );
      } else {
        const extraValue = typeof ele === "function" ? ele(this.props) : ele;
        if (extraValue.customChildren) {
          customChildren.push(
            /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, { key: index }, extraValue.customChildren)
          );
        }
        return /* @__PURE__ */ import_react10.default.createElement(
          ToolbarExtra,
          __spreadProps(__spreadValues({}, this.props), {
            isReady: this.state.isReady,
            key: index,
            extra: extraValue
          })
        );
      }
    });
    const Toolbar = this.props.Toolbar || DefaultToolbar;
    const toReturn = /* @__PURE__ */ import_react10.default.createElement(
      Toolbar,
      {
        customChildren,
        disjointedMode: this.props.disjointedMode,
        drawerButton,
        drawerOpen: this.props.drawerOpen,
        props: {
          ["data-unblur"]: true
        },
        toolbarContents: toolbarFormMapped,
        ref: this.appBarHeaderRef
      }
    );
    if (this.props.disjointedMode && this.state.isReady) {
      return import_react_dom3.default.createPortal(toReturn, document.body);
    } else if (this.props.disjointedMode) {
      return null;
    } else {
      return toReturn;
    }
  }
};
var DefaultSlateWrapper = class extends import_react10.default.PureComponent {
  /**
   * Constructs a new material ui based wrapper for the slate editor
   * @param props the base properties that every wrapper gets extended for this specific wrapper
   */
  constructor(props) {
    super(props);
    this.state = {
      inlineElementThatWasCurrentBeforeLosingFocus: null,
      // keep SSR compatibility by keeping the drawer closed at the start
      // as we cannot read local storage in the server side
      drawerOpen: false,
      toolbarHeight: 0,
      noAnimate: true,
      toolbarState: null
    };
    this.isUnmounted = false;
    this.inputImageRef = import_react10.default.createRef();
    this.inputFileRef = import_react10.default.createRef();
    this.DrawerContainerRef = import_react10.default.createRef();
    this.toolbarRef = import_react10.default.createRef();
    this.editorRef = import_react10.default.createRef();
    this.onHeightChange = this.onHeightChange.bind(this);
    this.onImageLoad = this.onImageLoad.bind(this);
    this.onFileLoad = this.onFileLoad.bind(this);
    this.requestImage = this.requestImage.bind(this);
    this.requestFile = this.requestFile.bind(this);
    this.onFileEventedReFocus = this.onFileEventedReFocus.bind(this);
    this.refocus = this.refocus.bind(this);
    this.shouldHaveDrawer = this.shouldHaveDrawer.bind(this);
    this.toggleDrawer = this.toggleDrawer.bind(this);
    this.setToolbarState = this.setToolbarState.bind(this);
    this.selectiveHardBlur = this.selectiveHardBlur.bind(this);
    this.keyUpListener = this.keyUpListener.bind(this);
    this.onAltActionTriggered = this.onAltActionTriggered.bind(this);
  }
  onAltActionTriggered(tabNav, action) {
    if (action === "blur") {
      this.props.helpers.hardBlur();
    }
  }
  onHeightChange(newHeight) {
    if (this.state.toolbarHeight !== newHeight) {
      this.setState({
        toolbarHeight: newHeight
      });
    }
  }
  /**
   * During the mount event
   */
  componentDidMount() {
    if (this.shouldHaveDrawer()) {
      this.setState({
        drawerOpen: localStorage.getItem("SLATE_DRAWER_OPEN") === "true",
        noAnimate: true
      }, () => {
        setTimeout(() => {
          !this.isUnmounted && this.setState({
            noAnimate: false
          });
        }, 300);
      });
    } else {
      this.setState({
        noAnimate: false
      });
    }
    document.body.addEventListener("mousedown", this.selectiveHardBlur);
    document.body.addEventListener("touchstart", this.selectiveHardBlur);
    document.body.addEventListener("keyup", this.keyUpListener);
  }
  componentWillUnmount() {
    document.body.removeEventListener("mousedown", this.selectiveHardBlur);
    document.body.removeEventListener("touchstart", this.selectiveHardBlur);
    document.body.removeEventListener("keyup", this.keyUpListener);
    this.isUnmounted = true;
  }
  keyUpListener(e2) {
    if (e2.key === "Tab") {
      this.selectiveHardBlur(e2);
    }
  }
  selectiveHardBlur(e2, altTarget) {
    const target = altTarget || e2.target;
    if (this.props.state.currentSelectedText) {
      if (this.isUnblurred(target)) {
        if (target.tagName !== "INPUT" && target.tagName !== "SELECT") {
          e2.preventDefault();
        }
      } else if (!this.isInEditor(target)) {
        this.props.helpers.hardBlur();
      }
    }
  }
  isUnblurred(ele) {
    if (ele === this.toolbarRef.current.getAppbarHeader() || ele === this.DrawerContainerRef.current.getDrawerBody() || ele.dataset.unblur) {
      return true;
    }
    if (ele.parentElement) {
      return this.isUnblurred(ele.parentElement);
    }
    return false;
  }
  isInEditor(ele) {
    if (ele.dataset.notEditor) {
      return false;
    }
    if (ele === this.editorRef.current) {
      return true;
    }
    if (ele.parentElement) {
      return this.isInEditor(ele.parentElement);
    }
    return false;
  }
  /**
   * Specifies on whether it should have a drawer
   * @returns a boolean on this fact
   */
  shouldHaveDrawer() {
    if (!this.props.featureSupport || this.props.hideDrawer) {
      return false;
    }
    return !!(this.props.featureSupport.supportsTemplating || this.props.featureSupport.supportsCustomStyles || this.props.featureSupport.supportsContainers || this.props.featureSupport.supportedCustoms || this.props.featureSupport.supportsRichClasses || this.props.drawerExtras);
  }
  /**
   * Executes in order to open the dialog in order to request an image
   * via this file upload dialog
   */
  requestImage() {
    document.body.addEventListener("focus", this.onFileEventedReFocus, { capture: true });
    this.originalSelectionArea = this.props.state.currentText ? this.props.helpers.editor.selection : null;
    this.originalSelectionPath = this.props.state.currentSelectedInlineElementAnchor || this.props.state.currentSelectedBlockElementAnchor || this.props.state.currentSelectedSuperBlockElementAnchors && this.props.state.currentSelectedSuperBlockElementAnchors[this.props.state.currentSelectedSuperBlockElementAnchors.length - 1];
    this.inputImageRef.current.click();
  }
  /**
   * Executes in order to open the dialog in order to request an file
   * via this file upload dialog
   */
  requestFile() {
    document.body.addEventListener("focus", this.onFileEventedReFocus, { capture: true });
    this.originalSelectionArea = this.props.state.currentText ? this.props.helpers.editor.selection : null;
    this.originalSelectionPath = this.props.state.currentSelectedInlineElementAnchor || this.props.state.currentSelectedBlockElementAnchor || this.props.state.currentSelectedSuperBlockElementAnchors && this.props.state.currentSelectedSuperBlockElementAnchors[this.props.state.currentSelectedSuperBlockElementAnchors.length - 1];
    this.inputFileRef.current.click();
  }
  /**
   * Opens/closes the drawer
   */
  toggleDrawer() {
    const newState = !this.state.drawerOpen;
    this.setState({
      drawerOpen: newState
    });
    if (!this.props.disjointedMode) {
      window.dispatchEvent(new Event("SLATE_DRAWER_OPEN"));
    }
    localStorage.setItem("SLATE_DRAWER_OPEN", JSON.stringify(newState));
  }
  /**
   * Refocuses as the original selection area that was focused
   * mainly used by dialogs once they haave closed
   */
  refocus() {
    if (this.isUnmounted) {
      return;
    }
    if (this.originalSelectionArea) {
      this.props.helpers.focusAt(this.originalSelectionArea);
    } else if (this.originalSelectionPath) {
      this.props.helpers.selectPath(this.originalSelectionPath);
    }
  }
  /**
   * Triggers once the document has recovered focus from the file
   * dialog that is native for the file upload
   */
  onFileEventedReFocus() {
    document.body.removeEventListener("focus", this.onFileEventedReFocus, { capture: true });
    this.refocusTimeout = setTimeout(this.refocus, 30);
  }
  setToolbarState(state) {
    if (this.state.toolbarState !== state) {
      this.setState({ toolbarState: state });
    }
  }
  /**
   * This function gets called once the image input calls the on change event
   * which means it has been loaded by the input itself and it's available for
   * reading
   * @param e the change event that contains the file 
   */
  async onImageLoad(e2) {
    document.body.removeEventListener("focus", this.onFileEventedReFocus, { capture: true });
    clearTimeout(this.refocusTimeout);
    const file = e2.target.files[0];
    e2.target.value = "";
    await this.props.helpers.focusAt(this.originalSelectionArea || this.originalSelectionPath);
    this.props.helpers.insertImage(file, false);
  }
  /**
   * This function gets called once the file input calls the on change event
   * which means it has been loaded by the input itself and it's available for
   * reading
   * @param e the change event that contains the file
   */
  async onFileLoad(e2) {
    document.body.removeEventListener("focus", this.onFileEventedReFocus, { capture: true });
    clearTimeout(this.refocusTimeout);
    const file = e2.target.files[0];
    e2.target.value = "";
    await this.props.helpers.focusAt(this.originalSelectionArea || this.originalSelectionPath);
    this.props.helpers.insertFile(file);
  }
  /**
   * Standard render function from the wrapper
   */
  render() {
    const imageInput = this.props.state.isRichText && this.props.featureSupport.supportsImages ? /* @__PURE__ */ import_react10.default.createElement(
      "input",
      {
        ref: this.inputImageRef,
        type: "file",
        accept: this.props.featureSupport.supportsImagesAccept,
        style: { display: "none" },
        autoComplete: "off",
        onChange: this.onImageLoad
      }
    ) : null;
    const fileInput = this.props.state.isRichText && this.props.featureSupport.supportsFiles ? /* @__PURE__ */ import_react10.default.createElement(
      "input",
      {
        ref: this.inputFileRef,
        type: "file",
        accept: this.props.featureSupport.supportsFilesAccept,
        style: { display: "none" },
        autoComplete: "off",
        onChange: this.onFileLoad
      }
    ) : null;
    const fileLoadErrorDialog = this.props.state.isRichText && (this.props.featureSupport.supportsImages || this.props.featureSupport.supportsFiles) ? /* @__PURE__ */ import_react10.default.createElement(
      FileLoadErrorDialog,
      {
        currentLoadError: this.props.currentLoadError,
        dismissCurrentLoadError: this.props.dismissCurrentLoadError,
        i18nGenericError: this.props.baseI18n.genericError,
        i18nOk: this.props.baseI18n.ok,
        Dialog: this.props.Dialog
      }
    ) : null;
    let toolbar = /* @__PURE__ */ import_react10.default.createElement(
      RichTextEditorToolbar,
      __spreadProps(__spreadValues({}, this.props), {
        toolbarState: this.state.toolbarState,
        toolbarHeight: this.state.toolbarHeight,
        ref: this.toolbarRef,
        onHeightChange: this.onHeightChange,
        requestImage: this.requestImage,
        requestFile: this.requestFile,
        shouldHaveDrawer: this.shouldHaveDrawer,
        drawerOpen: this.state.drawerOpen,
        toggleDrawer: this.toggleDrawer,
        setToolbarState: this.setToolbarState
      })
    );
    let extraChildren = null;
    if (this.props.customExtraChildren) {
      const [characterCount, wordCount] = countSizeAndWords(this.props.state.treeValue);
      extraChildren = this.props.customExtraChildren(characterCount, wordCount);
    }
    let drawerContainer = /* @__PURE__ */ import_react10.default.createElement(
      DrawerContainer,
      __spreadProps(__spreadValues({}, this.props), {
        ref: this.DrawerContainerRef,
        drawerOpen: this.state.drawerOpen,
        noAnimate: this.state.noAnimate,
        toolbarHeight: this.state.toolbarHeight
      })
    );
    const DisjointedEditorContainer = this.props.DisjointedEditorContainer || "div";
    const EditorContainer = this.props.EditorContainer || DefaultEditorContainer;
    const DisjointedEditor = this.props.DisjointedEditor || "div";
    const Editor2 = this.props.Editor || "div";
    const basicClassName = "rich-text editor " + (this.props.state.isRichText ? "rich-text-mode" : "plain-text-mode") + (this.props.state.focused ? " focused" : "") + (this.props.state.currentValid ? " valid" : " invalid") + (this.props.disabled ? " disabled" : " enabled");
    let box = null;
    if (this.props.disjointedMode) {
      box = /* @__PURE__ */ import_react10.default.createElement(DisjointedEditorContainer, { ref: this.editorRef, className: "slateEditorDisjointedEditorContainer" }, /* @__PURE__ */ import_react10.default.createElement(DisjointedEditor, { className: basicClassName }, this.props.children), /* @__PURE__ */ import_react10.default.createElement("div", { "data-not-editor": true, style: { width: "100%" } }, extraChildren));
    } else {
      box = /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, null, /* @__PURE__ */ import_react10.default.createElement(
        Editor2,
        {
          ref: this.editorRef,
          className: basicClassName
        },
        this.props.children
      ), extraChildren);
    }
    if (this.props.BaseWrapper) {
      const BaseWrapper = this.props.BaseWrapper;
      box = /* @__PURE__ */ import_react10.default.createElement(
        BaseWrapper,
        __spreadProps(__spreadValues({}, this.props), {
          drawerOpen: this.state.drawerOpen
        }),
        box
      );
    }
    if (this.props.ToolbarWrapper) {
      const ToolbarWrapper = this.props.ToolbarWrapper;
      toolbar = /* @__PURE__ */ import_react10.default.createElement(ToolbarWrapper, __spreadProps(__spreadValues({}, this.props), { drawerOpen: this.state.drawerOpen }), toolbar);
    }
    if (this.props.DrawerWrapper) {
      const DrawerWrapper = this.props.DrawerWrapper;
      drawerContainer = /* @__PURE__ */ import_react10.default.createElement(DrawerWrapper, __spreadProps(__spreadValues({}, this.props), { drawerOpen: this.state.drawerOpen }), drawerContainer);
    }
    let toReturn;
    if (this.props.disjointedMode) {
      toReturn = /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, null, toolbar, box, drawerContainer, imageInput, fileInput);
    } else {
      toReturn = /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, null, toolbar, /* @__PURE__ */ import_react10.default.createElement(EditorContainer, null, box, drawerContainer), imageInput, fileInput);
    }
    if (this.props.FinalWrapper) {
      const FinalWrapper = this.props.FinalWrapper;
      toReturn = /* @__PURE__ */ import_react10.default.createElement(FinalWrapper, __spreadProps(__spreadValues({}, this.props), { drawerOpen: this.state.drawerOpen }), toReturn);
    }
    return toReturn;
  }
};
var DefaultDrawerBody = import_react10.default.forwardRef((props, ref) => {
  return /* @__PURE__ */ import_react10.default.createElement("div", { ref, className: "slateEditorDrawerBody" }, props.drawerOpen ? props.children : null);
});
function DefaultDrawerSpacer(props) {
  return /* @__PURE__ */ import_react10.default.createElement(
    "div",
    {
      className: "slateEditorDrawerAppbarSpacer",
      style: { height: props.toolbarHeight, flex: "0 0 " + props.toolbarHeight + "px" }
    }
  );
}
function DefaultDrawerContainerBox(props) {
  return /* @__PURE__ */ import_react10.default.createElement(
    "div",
    {
      className: (props.drawerOpen ? "open " : "") + (props.disjointedMode ? "slateEditorDrawerFixed" : "slateEditorDrawer") + (props.noAnimate ? " slateEditorDrawerNoAnimate" : "")
    },
    props.children
  );
}
var DrawerContainer = class extends import_react10.default.Component {
  constructor(props) {
    super(props);
    this.state = {
      isReady: false
    };
    this.editorDrawerBodyRef = import_react10.default.createRef();
  }
  componentDidMount() {
    this.setState({
      isReady: true
    });
  }
  getDrawerBody() {
    return this.editorDrawerBodyRef.current;
  }
  render() {
    if (this.props.disjointedMode && !this.props.state.currentSelectedElement) {
      return null;
    }
    const DrawerContainerBox = this.props.DrawerContainerBox || DefaultDrawerContainerBox;
    const DrawerSpacer = this.props.DrawerSpacer || DefaultDrawerSpacer;
    const DrawerBody = this.props.DrawerBody || DefaultDrawerBody;
    const toReturn = /* @__PURE__ */ import_react10.default.createElement(
      DrawerContainerBox,
      {
        disjointedMode: this.props.disjointedMode,
        drawerOpen: this.props.drawerOpen,
        noAnimate: this.props.noAnimate,
        toolbarHeight: this.props.toolbarHeight
      },
      this.props.disjointedMode && this.props.drawerOpen ? /* @__PURE__ */ import_react10.default.createElement(
        DrawerSpacer,
        {
          disjointedMode: this.props.disjointedMode,
          toolbarHeight: this.props.toolbarHeight
        }
      ) : null,
      /* @__PURE__ */ import_react10.default.createElement(
        DrawerBody,
        {
          ref: this.editorDrawerBodyRef,
          disjointedMode: this.props.disjointedMode,
          toolbarHeight: this.props.toolbarHeight,
          drawerOpen: this.props.drawerOpen
        },
        /* @__PURE__ */ import_react10.default.createElement(WrapperDrawer, __spreadValues({}, this.props))
      )
    );
    if (this.props.disjointedMode) {
      if (this.state.isReady) {
        return import_react_dom3.default.createPortal(toReturn, document.body);
      } else {
        return null;
      }
    } else {
      return toReturn;
    }
  }
};

// ../editor/slate/element-wrappers.tsx
var import_react12 = __toESM(require_react());

// ../editor/editor-dropdown.tsx
var import_react_dom4 = __toESM(require_react_dom());
var import_react11 = __toESM(require_react());
var DefaultDropdownComponentWrapper = import_react11.default.forwardRef((props, ref) => {
  const Element4 = props.tag;
  return /* @__PURE__ */ import_react11.default.createElement(
    Element4,
    __spreadProps(__spreadValues({
      className: "slateEditorDropdownContentWrapper"
    }, props.props), {
      ref
    }),
    props.children
  );
});
var DefaultDropdownComponent = import_react11.default.forwardRef((props, ref) => {
  return /* @__PURE__ */ import_react11.default.createElement(
    "div",
    __spreadProps(__spreadValues({
      className: props.containedWithinBox ? "slateEditorDropdownComponentContained" : "slateEditorDropdownComponent"
    }, props.props), {
      ref
    }),
    props.children
  );
});
var DefaultDropdownComponentBox = import_react11.default.forwardRef((props, ref) => {
  return /* @__PURE__ */ import_react11.default.createElement(
    "div",
    __spreadProps(__spreadValues({
      className: "slateEditorDropdownComponentContainerBox"
    }, props.props), {
      ref
    }),
    props.children
  );
});
function defaultPortalElementOverflowCalculator(top, height) {
  const reference = document.body.parentElement;
  const positionTopOverall = top + reference.scrollTop;
  const availableHeight = reference.scrollHeight;
  const spaceRemaining = availableHeight - positionTopOverall;
  return height - spaceRemaining;
}
function defaultPortalElementOverflowSpacerHeightCalculator(overflow) {
  const reference = document.body.parentElement;
  return reference.scrollHeight - window.innerHeight + overflow;
}
function defaultPortalElementOverflowSpacerGenerator(height, ref) {
  return /* @__PURE__ */ import_react11.default.createElement("div", { ref, style: { height, backgroundColor: "#eee" } });
}
function isInDropdownOrWrapper(ele, dropdownItself, wrapperContainer) {
  if (ele === dropdownItself || ele === wrapperContainer) {
    return true;
  }
  if (ele.parentElement) {
    return isInDropdownOrWrapper(ele.parentElement, dropdownItself, wrapperContainer);
  }
  return false;
}
function EditorDropdown(props) {
  var _a;
  const boxRef = (0, import_react11.useRef)();
  const dropdownRef = (0, import_react11.useRef)();
  const overflowElement = (0, import_react11.useRef)();
  const [pos, setPos] = (0, import_react11.useState)(null);
  const [overflowSpacerHeight, setOverflowSpacerHeight] = (0, import_react11.useState)(0);
  const [currentOverflow, setCurrentOverflow] = (0, import_react11.useState)(0);
  const congruentTimer = (0, import_react11.useRef)(null);
  const recalculateOverflow = (0, import_react11.useCallback)((top, height) => {
    if (!overflowElement.current || !overflowElement.current.offsetHeight) {
      const newOverflow = props.portalElementOverflowCalculator ? props.portalElementOverflowCalculator(top, height) : defaultPortalElementOverflowCalculator(top, height);
      if (newOverflow > 0) {
        const newHeight = (props.portalElementOverflowSpacerHeightCalculator ? props.portalElementOverflowSpacerHeightCalculator(newOverflow) : defaultPortalElementOverflowSpacerHeightCalculator(newOverflow)) + 25;
        setOverflowSpacerHeight(newHeight);
        setCurrentOverflow(newOverflow);
      } else {
        setOverflowSpacerHeight(0);
        setCurrentOverflow(0);
      }
    }
  }, [props.portalElementOverflowCalculator, props.portalElementOverflowSpacerHeightCalculator]);
  const congruentTimerExec = (0, import_react11.useCallback)(() => {
    if (dropdownRef.current && overflowElement.current) {
      const clientRect = dropdownRef.current.getBoundingClientRect();
      const currentHeight = clientRect.height;
      const currentTop = clientRect.top;
      const moreOverflow = props.portalElementOverflowCalculator ? props.portalElementOverflowCalculator(currentTop, currentHeight) : defaultPortalElementOverflowCalculator(currentTop, currentHeight);
      if (moreOverflow > 0) {
        const newOverflow = currentOverflow + moreOverflow;
        setCurrentOverflow(newOverflow);
        const overflowElementHeight = overflowElement.current.offsetHeight;
        const newHeight = overflowElementHeight + moreOverflow + 25;
        setOverflowSpacerHeight(newHeight);
      }
    }
  }, [currentOverflow]);
  const updatePos = (0, import_react11.useCallback)(() => {
    if (!boxRef.current) {
      return;
    }
    const children = Array.from(boxRef.current.childNodes);
    let firstNode = children[0];
    let lastNode = children[children.length - 1];
    if (props.goIntoTreeDepth) {
      const goTowardsParent = props.goIntoTreeDepth < 0;
      for (let i2 = 0; i2 < Math.abs(props.goIntoTreeDepth); i2++) {
        if (!goTowardsParent) {
          firstNode = firstNode.childNodes[0];
          lastNode = lastNode.childNodes[lastNode.childNodes.length - 1];
        } else {
          firstNode = firstNode.parentElement;
          lastNode = lastNode.parentElement;
        }
      }
    }
    const firstNodeBoundingRect = firstNode.getBoundingClientRect();
    const lastNodeBoundingRect = lastNode.getBoundingClientRect();
    const lowermostNodeClientRect = firstNodeBoundingRect.bottom > lastNodeBoundingRect.bottom ? firstNodeBoundingRect : lastNodeBoundingRect;
    const leftMostPosition = lowermostNodeClientRect.left;
    const rightMostPosition = lowermostNodeClientRect.right;
    let left = null;
    let right = null;
    const widthToCompareAgainst = document.body.parentElement.getBoundingClientRect().width;
    if (leftMostPosition > widthToCompareAgainst / 2) {
      right = widthToCompareAgainst - rightMostPosition;
    } else {
      left = leftMostPosition;
    }
    const top = lowermostNodeClientRect.top + lowermostNodeClientRect.height;
    setPos([top, left, right]);
    if (dropdownRef.current) {
      const height = dropdownRef.current.getBoundingClientRect().height;
      recalculateOverflow(top, height);
    }
  }, [recalculateOverflow]);
  const callCloseable = (0, import_react11.useCallback)((e2) => {
    if (props.closeable) {
      let wrapperRef = boxRef.current;
      if (props.goIntoTreeDepth) {
        const goTowardsParent = props.goIntoTreeDepth < 0;
        if (goTowardsParent) {
          wrapperRef = wrapperRef.parentElement;
        }
      }
      if (!isInDropdownOrWrapper(e2.target, dropdownRef.current, wrapperRef)) {
        props.onClose();
      }
    }
  }, []);
  const updatePosDelayed = (0, import_react11.useCallback)(() => {
    setTimeout(updatePos, 50);
  }, []);
  const posMassTrigger = (0, import_react11.useCallback)(() => {
    const posInternal = setInterval(updatePos, 10);
    setTimeout(() => {
      clearInterval(posInternal);
    }, 600);
  }, []);
  (0, import_react11.useEffect)(() => {
    if (props.isOpen) {
      updatePos();
      congruentTimer.current = setInterval(congruentTimerExec, 1e3);
      window.addEventListener("SLATE_DRAWER_OPEN", posMassTrigger);
      window.addEventListener("keyup", updatePos);
      window.addEventListener("resize", updatePos);
      window.addEventListener("mouseup", updatePosDelayed);
      window.addEventListener("touchend", updatePosDelayed);
      window.addEventListener("scroll", updatePos, true);
      window.addEventListener("mousedown", callCloseable);
      window.addEventListener("touchstart", callCloseable);
      return () => {
        window.removeEventListener("SLATE_DRAWER_OPEN", posMassTrigger);
        window.removeEventListener("keyup", updatePos);
        window.removeEventListener("resize", updatePos);
        window.removeEventListener("mouseup", updatePosDelayed);
        window.removeEventListener("touchend", updatePosDelayed);
        window.removeEventListener("scroll", updatePos, true);
        window.removeEventListener("mousedown", callCloseable);
        window.removeEventListener("touchstart", callCloseable);
        clearInterval(congruentTimer.current);
      };
    } else {
      setCurrentOverflow(0);
      setOverflowSpacerHeight(0);
    }
  }, [props.isOpen, updatePos, updatePosDelayed, posMassTrigger, callCloseable, congruentTimerExec]);
  let portal = null;
  let overflowPortal = null;
  if (props.isOpen) {
    const style = pos ? { position: "fixed", top: pos[0], left: pos[1], right: pos[2], zIndex: typeof props.zIndex !== "undefined" ? props.zIndex : 500 } : { position: "fixed", top: 0, left: 0, visibility: "hidden", zIndex: typeof props.zIndex !== "undefined" ? props.zIndex : 500 };
    const DropdownComponent = props.DropdownComponent || DefaultDropdownComponent;
    let elementInsidePortal = /* @__PURE__ */ import_react11.default.createElement(
      DropdownComponent,
      {
        containedWithinBox: props.containWithinBox,
        props: {
          ["data-unblur"]: true,
          style: props.containWithinBox ? null : style
        },
        sizable: !!props.dropdownSizable,
        ref: props.containWithinBox ? null : dropdownRef
      },
      props.dropdown
    );
    if (props.containWithinBox) {
      const DropdownComponentBox = props.DropdownComponentBox || DefaultDropdownComponentBox;
      elementInsidePortal = /* @__PURE__ */ import_react11.default.createElement(
        DropdownComponentBox,
        {
          props: {
            ["data-unblur"]: true,
            style
          },
          sizable: props.dropdownSizable,
          ref: dropdownRef
        },
        elementInsidePortal
      );
    }
    portal = import_react_dom4.default.createPortal(
      elementInsidePortal,
      props.portalElement || document.body
    );
    overflowPortal = import_react_dom4.default.createPortal(props.portalElementOverflowSpacerGenerator ? props.portalElementOverflowSpacerGenerator(overflowSpacerHeight, overflowElement) : defaultPortalElementOverflowSpacerGenerator(overflowSpacerHeight, overflowElement), props.portalElement || document.body);
  }
  const Wrapper = props.DropdownComponentWrapper || DefaultDropdownComponentWrapper;
  return /* @__PURE__ */ import_react11.default.createElement(import_react11.default.Fragment, null, /* @__PURE__ */ import_react11.default.createElement(
    Wrapper,
    {
      tag: props.dropdownComponentWrapperTag,
      props: __spreadProps(__spreadValues({}, props.dropdownComponentWrapperProps), {
        style: __spreadValues({
          display: props.dropdownComponentWrapperHidden ? "none" : "contents"
        }, ((_a = props.dropdownComponentWrapperProps) == null ? void 0 : _a.style) || {})
      }),
      ref: boxRef
    },
    props.children
  ), portal, overflowPortal);
}

// ../editor/slate/element-wrappers.tsx
function DefaultElementWrapperButtonComponent(props) {
  return /* @__PURE__ */ import_react12.default.createElement(
    "button",
    {
      className: "slateEditorElementWrapperButton " + (props.selected ? " selected" : ""),
      disabled: props.disabled,
      onClick: props.onClick
    },
    props.label
  );
}
function DefaultFieldWrapperForMoreOptions(props) {
  return /* @__PURE__ */ import_react12.default.createElement("div", { className: "slateEditorFieldWrapperForMoreOptions" }, /* @__PURE__ */ import_react12.default.createElement("div", { className: "slateEditorFieldWrapperForMoreOptionsLabel" }, props.label), /* @__PURE__ */ import_react12.default.createElement("div", { className: "slateEditorFieldWrapperForMoreOptionsChildren" }, props.children));
}
function getVideoURL(v) {
  if (v.origin === "youtube") {
    return "https://youtube.com/watch?v=" + v.src;
  } else if (v.origin === "vimeo") {
    return "https://vimeo.com/" + v.src;
  } else {
    return "";
  }
}
function HTMLWrapper(props) {
  const [htmlOptions, setHTMLOptions] = (0, import_react12.useState)([]);
  const updateHTMLB = (0, import_react12.useCallback)((newV) => {
    const label = htmlOptions.find((o) => o.value === newV);
    props.helpers.updateTemplateHTML(typeof label.label === "string" ? label.label : label.label(), newV);
  }, [htmlOptions]);
  const updateHTML = (0, import_react12.useCallback)((e2) => {
    updateHTMLB(e2.target.value);
  }, [updateHTMLB]);
  (0, import_react12.useEffect)(() => {
    if (!props.isSelected) {
      return;
    }
    const context = props.helpers.getContextFor(props.element);
    const rootContext = props.helpers.getRootContext();
    const htmlPropertiesToUse = [];
    context && Object.keys(context.properties).forEach((key) => {
      const property = context.properties[key];
      if (property.type !== "html") {
        return;
      }
      htmlPropertiesToUse.push({
        value: key,
        label: property.label || key,
        primary: context !== rootContext
      });
    });
    if (rootContext && rootContext !== context) {
      Object.keys(rootContext.properties).forEach((key) => {
        const property = rootContext.properties[key];
        if (property.nonRootInheritable) {
          return;
        }
        if (property.type !== "html") {
          return;
        }
        htmlPropertiesToUse.push({
          value: key,
          label: property.label || key,
          primary: false
        });
      });
    }
    if (props.element.html && !htmlPropertiesToUse.some((p) => p.value === props.element.html)) {
      htmlPropertiesToUse.push({
        value: props.element.html,
        label: props.element.children[0].text,
        primary: false
      });
    }
    setHTMLOptions(htmlPropertiesToUse);
  }, [props.element, props.isSelected]);
  const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
  return /* @__PURE__ */ import_react12.default.createElement(
    EditorDropdown,
    {
      DropdownComponent: props.DropdownComponent,
      DropdownComponentBox: props.DropdownComponentBox,
      DropdownComponentWrapper: props.DropdownComponentWrapper,
      dropdownComponentWrapperTag: "span",
      isOpen: props.isSelected,
      dropdown: /* @__PURE__ */ import_react12.default.createElement(
        SelectField,
        {
          id: "template-html",
          label: props.baseI18n.addTemplateHTML.label,
          onChangeByEvent: updateHTML,
          onChangeByValue: updateHTMLB,
          options: htmlOptions.map((v) => ({
            label: typeof v.label === "function" ? v.label() : v.label,
            value: v.value,
            primary: v.primary
          })),
          resetBlur: null,
          unblur: null,
          value: props.element.html
        }
      )
    },
    props.children
  );
}
function TextWrapper(props) {
  const [textOptions, setTextOptions] = (0, import_react12.useState)([]);
  const updateTextContentB = (0, import_react12.useCallback)((newV) => {
    const label = textOptions.find((o) => o.value === newV);
    props.helpers.updateTemplateText(typeof label.label === "string" ? label.label : label.label(), newV);
  }, [textOptions]);
  const updateTextContent = (0, import_react12.useCallback)((e2) => {
    updateTextContentB(e2.target.value);
  }, [updateTextContentB]);
  (0, import_react12.useEffect)(() => {
    if (!props.isSelected) {
      return;
    }
    const context = props.helpers.getContextFor(props.element);
    const rootContext = props.helpers.getRootContext();
    const textPropertiesToUse = [];
    context && Object.keys(context.properties).forEach((key) => {
      const property = context.properties[key];
      if (property.type !== "text") {
        return;
      }
      textPropertiesToUse.push({
        value: key,
        label: property.label || key,
        primary: context !== rootContext
      });
    });
    if (rootContext && rootContext !== context) {
      Object.keys(rootContext.properties).forEach((key) => {
        const property = rootContext.properties[key];
        if (property.nonRootInheritable) {
          return;
        }
        if (property.type !== "text") {
          return;
        }
        textPropertiesToUse.push({
          value: key,
          label: property.label || key,
          primary: false
        });
      });
    }
    if (props.element.textContent && !textPropertiesToUse.some((p) => p.value === props.element.textContent)) {
      textPropertiesToUse.push({
        value: props.element.textContent,
        label: props.element.children[0].text,
        primary: false
      });
    }
    setTextOptions(textPropertiesToUse);
  }, [props.element, props.isSelected]);
  const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
  return /* @__PURE__ */ import_react12.default.createElement(
    EditorDropdown,
    {
      DropdownComponent: props.DropdownComponent,
      DropdownComponentBox: props.DropdownComponentBox,
      DropdownComponentWrapper: props.DropdownComponentWrapper,
      dropdownComponentWrapperTag: "span",
      isOpen: props.isSelected,
      dropdown: /* @__PURE__ */ import_react12.default.createElement(
        SelectField,
        {
          id: "template-text",
          label: props.baseI18n.addTemplateText.label,
          onChangeByEvent: updateTextContent,
          onChangeByValue: updateTextContentB,
          options: textOptions.map((v) => ({
            label: typeof v.label === "function" ? v.label() : v.label,
            value: v.value,
            primary: v.primary
          })),
          resetBlur: null,
          unblur: null,
          value: props.element.html
        }
      )
    },
    props.children
  );
}
function TdAndTh(props) {
  const path3 = props.helpers.ReactEditor.findPath(props.helpers.editor, props.element);
  const parentPath = [...path3];
  parentPath.pop();
  parentPath.pop();
  const parentTheadOrTbodyOrTfoot = props.helpers.Node.get(props.helpers.editor, parentPath);
  parentPath.pop();
  const tableElement = props.helpers.Node.get(props.helpers.editor, parentPath);
  const [tableType, setTableType] = (0, import_react12.useState)(tableElement.tableType || "");
  (0, import_react12.useEffect)(() => {
    setTableType(tableElement.tableType || "");
  }, [tableElement.tableType]);
  const updateTableTypeB = (0, import_react12.useCallback)((newValue) => {
    const path4 = props.helpers.ReactEditor.findPath(props.helpers.editor, props.element);
    const tablePath = [...path4];
    tablePath.pop();
    tablePath.pop();
    tablePath.pop();
    props.helpers.set({
      tableType: newValue || null
    }, tablePath);
    setTableType(newValue || "");
  }, []);
  const updateTableType = (0, import_react12.useCallback)((e2) => {
    updateTableTypeB(e2.target.value);
  }, [updateTableTypeB]);
  const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
  const Button = props.ElementWrapperButton || DefaultElementWrapperButtonComponent;
  return /* @__PURE__ */ import_react12.default.createElement(import_react12.default.Fragment, null, props.children, /* @__PURE__ */ import_react12.default.createElement(
    EditorDropdown,
    {
      DropdownComponent: props.DropdownComponent,
      DropdownComponentBox: props.DropdownComponentBox,
      DropdownComponentWrapper: props.DropdownComponentWrapper,
      dropdownComponentWrapperTag: "td",
      dropdownComponentWrapperHidden: true,
      dropdownComponentWrapperProps: { contentEditable: false },
      dropdownSizable: true,
      dropdown: /* @__PURE__ */ import_react12.default.createElement(import_react12.default.Fragment, null, props.featureSupport.availableTables.length ? /* @__PURE__ */ import_react12.default.createElement(
        SelectField,
        {
          value: tableType,
          onChangeByEvent: updateTableType,
          displayEmpty: true,
          label: props.baseI18n.type,
          id: "table-type",
          onChangeByValue: updateTableTypeB,
          options: [{
            label: " - ",
            value: ""
          }].concat(props.featureSupport.availableTables),
          resetBlur: null,
          unblur: null
        }
      ) : null, /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-add-td",
          label: props.baseI18n.formatAddTdLabel,
          onClick: props.helpers.insertTableColumn,
          disabled: false
        }
      ), /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-add-tr",
          label: props.baseI18n.formatAddTrLabel,
          onClick: props.helpers.insertTableRow,
          disabled: false
        }
      ), /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-del-td",
          label: props.baseI18n.formatDelTdLabel,
          onClick: props.helpers.deleteTableColumn,
          disabled: false
        }
      ), /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-del-tr",
          label: props.baseI18n.formatDelTrLabel,
          onClick: props.helpers.deleteTableRow,
          disabled: false
        }
      ), /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-toggle-th",
          label: props.baseI18n.formatAddThLabel,
          onClick: props.helpers.toggleTable.bind(null, "thead"),
          disabled: !props.helpers.canToggleTable("thead"),
          selected: props.element.type === "th"
        }
      ), /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-toggle-tfoot",
          label: props.baseI18n.formatAddTfootLabel,
          onClick: props.helpers.toggleTable.bind(null, "tfoot"),
          disabled: !props.helpers.canToggleTable("tfoot"),
          selected: parentTheadOrTbodyOrTfoot.type === "tfoot"
        }
      )),
      isOpen: props.isSelected,
      goIntoTreeDepth: -4
    },
    /* @__PURE__ */ import_react12.default.createElement("p", null)
  ));
}
var defaultElementWrappers = {
  components: {
    link: (props) => {
      const [valid, setValid] = (0, import_react12.useState)(true);
      const [linkOptions, setLinkOptions] = (0, import_react12.useState)([]);
      const [elementHref, setElementHref] = (0, import_react12.useState)(props.element.href || "");
      const updateElementHrefB = (0, import_react12.useCallback)((newV) => {
        const valid2 = props.helpers.updateLink(newV, props.element.thref || null);
        setElementHref(newV);
        setValid(valid2);
      }, [props.element]);
      const updateElementTHrefB = (0, import_react12.useCallback)((newV) => {
        const valid2 = props.helpers.updateLink(props.element.href || null, newV);
        setValid(valid2);
      }, [props.element]);
      const updateElementHref = (0, import_react12.useCallback)((e2) => {
        updateElementHrefB(e2.target.value);
      }, [updateElementHrefB]);
      const updateElementTHref = (0, import_react12.useCallback)((e2) => {
        updateElementTHrefB(e2.target.value);
      }, []);
      (0, import_react12.useEffect)(() => {
        if (!props.isSelected) {
          return;
        }
        const context = props.helpers.getContextFor(props.element);
        const rootContext = props.helpers.getRootContext();
        const linkPropertiesToUse = [];
        context && Object.keys(context.properties).forEach((key) => {
          const property = context.properties[key];
          if (property.type !== "link") {
            return;
          }
          linkPropertiesToUse.push({
            value: key,
            label: property.label || key,
            primary: context !== rootContext
          });
        });
        if (rootContext && rootContext !== context) {
          Object.keys(rootContext.properties).forEach((key) => {
            const property = rootContext.properties[key];
            if (property.nonRootInheritable) {
              return;
            }
            if (property.type !== "link") {
              return;
            }
            linkPropertiesToUse.push({
              value: key,
              label: property.label || key,
              primary: false
            });
          });
        }
        if (props.element.thref && !linkPropertiesToUse.some((p) => p.value === props.element.thref)) {
          linkPropertiesToUse.push({
            value: props.element.thref,
            label: props.element.thref,
            primary: false
          });
        }
        setElementHref(props.element.href || "");
        setLinkOptions(linkPropertiesToUse);
      }, [props.element, props.isSelected]);
      const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
      const TextField = props.ElementWrapperTextField || DefaultWrapperDrawerTextField;
      const FieldWrapperForMoreOptions = props.FieldWrapperForMoreOptions || DefaultFieldWrapperForMoreOptions;
      return /* @__PURE__ */ import_react12.default.createElement(
        EditorDropdown,
        {
          DropdownComponent: props.DropdownComponent,
          DropdownComponentBox: props.DropdownComponentBox,
          DropdownComponentWrapper: props.DropdownComponentWrapper,
          dropdownComponentWrapperTag: "span",
          isOpen: props.isSelected,
          dropdown: /* @__PURE__ */ import_react12.default.createElement(import_react12.default.Fragment, null, /* @__PURE__ */ import_react12.default.createElement(
            TextField,
            {
              value: elementHref,
              onChangeByEvent: updateElementHref,
              onChangeByValue: updateElementHrefB,
              label: props.baseI18n.setLink.label,
              disabled: !!props.element.thref,
              placeholder: props.featureSupport.supportsExternalLinks ? props.baseI18n.setLink.placeholder : props.baseI18n.setLink.placeholderLocalOnly,
              id: "link-href"
            }
          ), linkOptions.length ? /* @__PURE__ */ import_react12.default.createElement(FieldWrapperForMoreOptions, { label: props.baseI18n.setLink.templated }, /* @__PURE__ */ import_react12.default.createElement(
            SelectField,
            {
              id: "link-thref",
              value: props.element.thref || "",
              label: props.baseI18n.setLink.templatedLabel,
              placeholder: props.baseI18n.setLink.templatedPlaceholder,
              onChangeByEvent: updateElementTHref,
              onChangeByValue: updateElementTHrefB,
              displayEmpty: true,
              options: [{
                label: props.baseI18n.setLink.templatedUnspecified,
                value: ""
              }].concat(linkOptions.map((v) => ({
                label: typeof v.label === "function" ? v.label() : v.label,
                value: v.value,
                primary: v.primary
              }))),
              resetBlur: null,
              unblur: null
            }
          )) : null)
        },
        props.children
      );
    },
    video: (props) => {
      const [value, setValue] = (0, import_react12.useState)(getVideoURL(props.element));
      const [valid, setValid] = (0, import_react12.useState)(true);
      const updateVideoURLB = (0, import_react12.useCallback)((newV) => {
        setValue(newV);
        setValid(props.helpers.updateVideo(newV));
      }, []);
      const updateVideoURL = (0, import_react12.useCallback)((e2) => {
        updateVideoURLB(e2.target.value);
      }, [updateVideoURLB]);
      (0, import_react12.useEffect)(() => {
        setValue(getVideoURL(props.element));
      }, [props.element]);
      const TextField = props.ElementWrapperTextField || DefaultWrapperDrawerTextField;
      return /* @__PURE__ */ import_react12.default.createElement(
        EditorDropdown,
        {
          DropdownComponent: props.DropdownComponent,
          DropdownComponentBox: props.DropdownComponentBox,
          DropdownComponentWrapper: props.DropdownComponentWrapper,
          dropdown: /* @__PURE__ */ import_react12.default.createElement(
            TextField,
            {
              value,
              onChangeByEvent: updateVideoURL,
              onChangeByValue: updateVideoURLB,
              label: props.baseI18n.loadVideo.label,
              placeholder: props.baseI18n.loadVideo.placeholder,
              id: "video-url"
            }
          ),
          dropdownComponentWrapperTag: "div",
          goIntoTreeDepth: 1,
          isOpen: props.isSelected
        },
        props.children
      );
    },
    image: (props) => {
      const [alt, setAlt] = (0, import_react12.useState)(props.element.alt || "");
      (0, import_react12.useEffect)(() => {
        setAlt(props.element.alt || "");
      }, [props.element]);
      const updateAltB = (0, import_react12.useCallback)((newValue) => {
        const path3 = props.helpers.ReactEditor.findPath(props.helpers.editor, props.element);
        props.helpers.set({
          alt: newValue || null
        }, path3);
        setAlt(newValue);
      }, []);
      const updateAlt = (0, import_react12.useCallback)((e2) => {
        updateAltB(e2.target.value);
      }, [updateAltB]);
      const TextField = props.ElementWrapperTextField || DefaultWrapperDrawerTextField;
      return /* @__PURE__ */ import_react12.default.createElement(
        EditorDropdown,
        {
          DropdownComponent: props.DropdownComponent,
          DropdownComponentBox: props.DropdownComponentBox,
          DropdownComponentWrapper: props.DropdownComponentWrapper,
          dropdown: /* @__PURE__ */ import_react12.default.createElement(
            TextField,
            {
              value: alt,
              onChangeByEvent: updateAlt,
              onChangeByValue: updateAltB,
              label: props.baseI18n.alt,
              id: "image-alt"
            }
          ),
          dropdownComponentWrapperTag: "div",
          goIntoTreeDepth: props.element.standalone ? null : 1,
          isOpen: props.isSelected
        },
        props.children
      );
    },
    td: TdAndTh,
    th: TdAndTh,
    title: (props) => {
      const updateTitleTypeB = (0, import_react12.useCallback)((newV) => {
        const path3 = props.helpers.ReactEditor.findPath(props.helpers.editor, props.element);
        props.helpers.set({
          titleType: newV || null
        }, path3);
      }, []);
      const updateTitleType = (0, import_react12.useCallback)((e2) => {
        updateTitleTypeB(e2.target.value);
      }, [updateTitleTypeB]);
      const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
      return /* @__PURE__ */ import_react12.default.createElement(
        EditorDropdown,
        {
          DropdownComponent: props.DropdownComponent,
          DropdownComponentBox: props.DropdownComponentBox,
          DropdownComponentWrapper: props.DropdownComponentWrapper,
          dropdownComponentWrapperTag: "div",
          isOpen: props.isSelected,
          dropdown: /* @__PURE__ */ import_react12.default.createElement(
            SelectField,
            {
              id: "title-type",
              label: props.baseI18n.type,
              onChangeByEvent: updateTitleType,
              onChangeByValue: updateTitleTypeB,
              options: ["h1", "h2", "h3", "h4", "h5", "h6"].map((Element4) => {
                return {
                  label: /* @__PURE__ */ import_react12.default.createElement(Element4, null, props.baseI18n.title),
                  value: Element4 ? Element4 : " - "
                };
              }),
              resetBlur: null,
              unblur: null,
              value: props.element.titleType || "h1"
            }
          )
        },
        props.children
      );
    },
    inline: (props) => {
      if (typeof props.element.textContent !== "string") {
        return props.children;
      }
      return /* @__PURE__ */ import_react12.default.createElement(TextWrapper, __spreadValues({}, props));
    },
    "void-block": (props) => {
      if (typeof props.element.html === "undefined") {
        return props.children;
      }
      return /* @__PURE__ */ import_react12.default.createElement(HTMLWrapper, __spreadValues({}, props));
    },
    container: (props) => {
      const updateContainerTypeB = (0, import_react12.useCallback)((newV) => {
        const path3 = props.helpers.ReactEditor.findPath(props.helpers.editor, props.element);
        props.helpers.set({
          containerType: newV || null
        }, path3);
      }, []);
      const updateContainerType = (0, import_react12.useCallback)((e2) => {
        updateContainerTypeB(e2.target.value);
      }, [updateContainerTypeB]);
      if (!props.featureSupport.availableContainers.length) {
        return props.children;
      }
      const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
      return /* @__PURE__ */ import_react12.default.createElement(
        EditorDropdown,
        {
          DropdownComponent: props.DropdownComponent,
          DropdownComponentBox: props.DropdownComponentBox,
          DropdownComponentWrapper: props.DropdownComponentWrapper,
          dropdownComponentWrapperTag: "span",
          isOpen: props.isSelected,
          dropdown: /* @__PURE__ */ import_react12.default.createElement(
            SelectField,
            {
              id: "container-type",
              label: props.baseI18n.type,
              onChangeByEvent: updateContainerType,
              onChangeByValue: updateContainerTypeB,
              options: [{
                label: " - ",
                value: ""
              }].concat(props.featureSupport.availableContainers),
              resetBlur: null,
              unblur: null,
              value: props.element.containerType || "",
              displayEmpty: true
            }
          )
        },
        props.children
      );
    }
  }
};

// example4.tsx
var featureSupportBasic = {
  supportedContainers: [],
  supportedCustoms: [],
  supportedRichClasses: [],
  supportedTables: [],
  supportsContainers: true,
  supportsCustom: true,
  supportsCustomStyles: true,
  supportsExternalLinks: true,
  supportsFiles: true,
  supportsFilesAccept: "*",
  supportsImages: true,
  supportsImagesAccept: "image/*",
  supportsLinks: true,
  supportsLists: true,
  supportsQuote: true,
  supportsRichClasses: true,
  supportsTables: true,
  supportsTemplating: true,
  supportsTitle: true,
  supportsVideos: true
};
var TEXT_FROM_SERVER_1 = "";
var sanitized1 = sanitize({
  fileResolver: null
}, featureSupportBasic, TEXT_FROM_SERVER_1);
var textTree1 = deserialize(sanitized1);
function Example() {
  const [htmlValue, setHtmlValue] = (0, import_react13.useState)(sanitized1);
  const [treeValue, setTreeValue] = (0, import_react13.useState)(textTree1);
  const [files, setFiles] = (0, import_react13.useState)([]);
  const onInsertFile = (0, import_react13.useCallback)(async (file, isExpectingImage) => {
    const fileData = {
      // you should probably use some uuid instead of this
      id: "FILE" + Math.random().toString().substring(2),
      metadata: null,
      name: file.name,
      size: file.size,
      type: file.type,
      url: URL.createObjectURL(file),
      src: file
    };
    if (isExpectingImage) {
      return await new Promise(async (resolve) => {
        const img = new Image();
        img.onload = () => {
          fileData.metadata = img.width + "x" + img.height;
          setFiles([...files, {
            file: fileData,
            isImage: true
          }]);
          resolve({
            result: fileData,
            width: img.width,
            height: img.height,
            isImage: true
          });
        };
        img.onerror = () => {
          resolve(null);
        };
        img.src = fileData.url;
      });
    }
    setFiles([...files, {
      file: fileData,
      isImage: true
    }]);
    return {
      result: fileData,
      width: null,
      height: null,
      isImage: false
    };
  }, [files]);
  const onInsertFileFromURL = (0, import_react13.useCallback)(async (url, name, isExpectingImage) => {
    let blob;
    try {
      const fileData = await fetch(url);
      blob = await fileData.blob();
      blob.name = name;
    } catch (err) {
      return null;
    }
    return this.onInsertFile(blob, isExpectingImage);
  }, [onInsertFile]);
  const onRetrieveFile = (0, import_react13.useCallback)((fileId) => {
    const file = files.find((f) => f.file.id === fileId) || null;
    return (file == null ? void 0 : file.file) || null;
  }, [files]);
  const onRetrieveImage = (0, import_react13.useCallback)((fileId) => {
    const file = onRetrieveFile(fileId);
    if (file) {
      return {
        file,
        srcset: null
      };
    }
    return null;
  }, [onRetrieveFile]);
  return /* @__PURE__ */ import_react13.default.createElement("div", null, /* @__PURE__ */ import_react13.default.createElement("h1", null, "Basic Editing"), /* @__PURE__ */ import_react13.default.createElement("section", null, /* @__PURE__ */ import_react13.default.createElement("h4", null, "This editor has some wrappers, and element wrappers and they add all the missing functionality as well as allow to it to function correctly The content are styled with the use of `dist.css` and the file `editor.css` gives some very basic styles so that's usable but you are expected not to need to use `editor.css` and style yourself with your own solution that fits your app"), /* @__PURE__ */ import_react13.default.createElement("h4", null, "The wrapper wraps the editor (gives toolbar and drawer), and the element wrappers wrap the element (gives options for a specific element, for example try inserting a title)"), /* @__PURE__ */ import_react13.default.createElement("h4", null, "Basic Editor (Unstyled)"), /* @__PURE__ */ import_react13.default.createElement("div", { style: { border: "solid 1px #ccc" } }, /* @__PURE__ */ import_react13.default.createElement(
    SlateEditor,
    {
      id: "my-editor",
      currentLoadError: null,
      dismissCurrentLoadError: null,
      onInsertFile,
      onInsertFileFromURL,
      onRetrieveFile,
      onRetrieveImage,
      supportedImageTypes: "image/*",
      currentValid: true,
      treeValue,
      value: htmlValue,
      features: featureSupportBasic,
      isRichText: textTree1.rich,
      lang: "en",
      onChange: (value, textTreeValue) => {
        setHtmlValue(value);
        setTreeValue(textTreeValue);
      },
      rootContext: null,
      Wrapper: DefaultSlateWrapper,
      elementWrappers: defaultElementWrappers,
      baseI18n: defaultWrapperI18nRichInfoEnglish
    }
  ))), /* @__PURE__ */ import_react13.default.createElement("section", null, /* @__PURE__ */ import_react13.default.createElement("code", null, htmlValue), /* @__PURE__ */ import_react13.default.createElement("code", null, JSON.stringify(treeValue, null, 2))));
}
import_react_dom5.default.render(/* @__PURE__ */ import_react13.default.createElement(Example, null), document.querySelector("#app"));
/*! Bundled license information:

is-plain-object/dist/is-plain-object.mjs:
  (*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL2RpcmVjdGlvbi9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL2lzT2JqZWN0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvX2ZyZWVHbG9iYWwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC9fcm9vdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL25vdy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL190cmltbWVkRW5kSW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC9fYmFzZVRyaW0uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC9fU3ltYm9sLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvX2dldFJhd1RhZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL19vYmplY3RUb1N0cmluZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL19iYXNlR2V0VGFnLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvaXNPYmplY3RMaWtlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvaXNTeW1ib2wuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC90b051bWJlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL2RlYm91bmNlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvdGhyb3R0bGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2lzLWhvdGtleS9saWIvaW5kZXguanMiLCAiLi4vZXhhbXBsZTQudHN4IiwgIi4uLy4uL2VkaXRvci9zbGF0ZS9pbmRleC50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2lzLXBsYWluLW9iamVjdC9kaXN0L2lzLXBsYWluLW9iamVjdC5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy91dGlscy9lbnYudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy91dGlscy9lcnJvcnMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy91dGlscy9jb21tb24udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy91dGlscy9wbHVnaW5zLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9pbW1lci9zcmMvY29yZS9zY29wZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvaW1tZXIvc3JjL2NvcmUvZmluYWxpemUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy9jb3JlL3Byb3h5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9pbW1lci9zcmMvY29yZS9pbW1lckNsYXNzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9pbW1lci9zcmMvY29yZS9jdXJyZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9pbW1lci9zcmMvcGx1Z2lucy9wYXRjaGVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9pbW1lci9zcmMvcGx1Z2lucy9tYXBzZXQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy9pbW1lci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvcGF0aC1yZWYudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3BvaW50LXJlZi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvcmFuZ2UtcmVmLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdXRpbHMvd2Vhay1tYXBzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9wYXRoLnRzIiwgIi4uLy4uLy4uLy4uLy4uLy55YXJuL2JlcnJ5L2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjIzLjItZDAxM2Q2Y2Y3ZS0xMC56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyIsICIuLi8uLi8uLi8uLi8uLi8ueWFybi9iZXJyeS9jYWNoZS9AYmFiZWwtcnVudGltZS1ucG0tNy4yMy4yLWQwMTNkNmNmN2UtMTAuemlwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b1ByaW1pdGl2ZS5qcyIsICIuLi8uLi8uLi8uLi8uLi8ueWFybi9iZXJyeS9jYWNoZS9AYmFiZWwtcnVudGltZS1ucG0tNy4yMy4yLWQwMTNkNmNmN2UtMTAuemlwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b1Byb3BlcnR5S2V5LmpzIiwgIi4uLy4uLy4uLy4uLy4uLy55YXJuL2JlcnJ5L2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjIzLjItZDAxM2Q2Y2Y3ZS0xMC56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy90cmFuc2Zvcm1zL2dlbmVyYWwudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9zZWxlY3Rpb24udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy91dGlscy9kZWVwLWVxdWFsLnRzIiwgIi4uLy4uLy4uLy4uLy4uLy55YXJuL2JlcnJ5L2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjIzLjItZDAxM2Q2Y2Y3ZS0xMC56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UuanMiLCAiLi4vLi4vLi4vLi4vLi4vLnlhcm4vYmVycnkvY2FjaGUvQGJhYmVsLXJ1bnRpbWUtbnBtLTcuMjMuMi1kMDEzZDZjZjdlLTEwLnppcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3JhbmdlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9lbGVtZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9ub2RlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9vcGVyYXRpb24udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaXMtZWRpdG9yLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9lZGl0b3IudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL2xvY2F0aW9uLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9wb2ludC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvc2NydWJiZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3RleHQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy91dGlscy9nZXQtZGVmYXVsdC1pbnNlcnQtbG9jYXRpb24udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy91dGlscy9tYXRjaC1wYXRoLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdXRpbHMvc3RyaW5nLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy90cmFuc2Zvcm1zL3RleHQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvaW5kZXgudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9jb3JlL2FwcGx5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvY29yZS9nZXQtZGlydHktcGF0aHMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9jb3JlL2dldC1mcmFnbWVudC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2NvcmUvbm9ybWFsaXplLW5vZGUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9jb3JlL3Nob3VsZC1ub3JtYWxpemUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvYWJvdmUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvYWRkLW1hcmsudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvYWZ0ZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvYmVmb3JlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2RlbGV0ZS1iYWNrd2FyZC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9kZWxldGUtZm9yd2FyZC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9kZWxldGUtZnJhZ21lbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvZWRnZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvZWxlbWVudC1yZWFkLW9ubHkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvZW5kLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2ZpcnN0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2ZyYWdtZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2dldC12b2lkLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2hhcy1ibG9ja3MudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaGFzLWlubGluZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaGFzLXBhdGgudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaGFzLXRleHRzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2luc2VydC1icmVhay50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pbnNlcnQtbm9kZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pbnNlcnQtc29mdC1icmVhay50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pbnNlcnQtdGV4dC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pcy1ibG9jay50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pcy1lZGdlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2lzLWVtcHR5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2lzLWVuZC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pcy1ub3JtYWxpemluZy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pcy1zdGFydC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9sYXN0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2xlYWYudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvbGV2ZWxzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL21hcmtzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL25leHQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3Ivbm9kZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9ub3JtYWxpemUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvcGFyZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3BhdGgtcmVmLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3BhdGgtcmVmcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9wYXRoLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3BvaW50LXJlZi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9wb2ludC1yZWZzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3BvaW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3Bvc2l0aW9ucy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9wcmV2aW91cy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9yYW5nZS1yZWYudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvcmFuZ2UtcmVmcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9yYW5nZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9yZW1vdmUtbWFyay50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9zZXQtbm9ybWFsaXppbmcudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3Ivc3RhcnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3Ivc3RyaW5nLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3VuaGFuZy1yYW5nZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci93aXRob3V0LW5vcm1hbGl6aW5nLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy10ZXh0L2RlbGV0ZS10ZXh0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy10ZXh0L2luc2VydC1mcmFnbWVudC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtc2VsZWN0aW9uL2NvbGxhcHNlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1zZWxlY3Rpb24vZGVzZWxlY3QudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLXNlbGVjdGlvbi9tb3ZlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1zZWxlY3Rpb24vc2VsZWN0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1zZWxlY3Rpb24vc2V0LXBvaW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1zZWxlY3Rpb24vc2V0LXNlbGVjdGlvbi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS9pbnNlcnQtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLW5vZGUvbGlmdC1ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS9tZXJnZS1ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS9tb3ZlLW5vZGVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1ub2RlL3JlbW92ZS1ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS9zZXQtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLW5vZGUvc3BsaXQtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLW5vZGUvdW5zZXQtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLW5vZGUvdW53cmFwLW5vZGVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1ub2RlL3dyYXAtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9jcmVhdGUtZWRpdG9yLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9jb21wdXRlLXNjcm9sbC1pbnRvLXZpZXcvc3JjL2luZGV4LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zY3JvbGwtaW50by12aWV3LWlmLW5lZWRlZC9lcy9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL3V0aWxzL3Jlc2l6ZU9ic2VydmVycy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL2FsZ29yaXRobXMvaGFzQWN0aXZlT2JzZXJ2YXRpb25zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvYWxnb3JpdGhtcy9oYXNTa2lwcGVkT2JzZXJ2YXRpb25zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvYWxnb3JpdGhtcy9kZWxpdmVyUmVzaXplTG9vcEVycm9yLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvZnJlZXplLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvUmVzaXplT2JzZXJ2ZXJTaXplLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvRE9NUmVjdFJlYWRPbmx5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvZWxlbWVudC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL3V0aWxzL2dsb2JhbC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL2FsZ29yaXRobXMvY2FsY3VsYXRlQm94U2l6ZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL1Jlc2l6ZU9ic2VydmVyRW50cnkuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9hbGdvcml0aG1zL2NhbGN1bGF0ZURlcHRoRm9yTm9kZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL2FsZ29yaXRobXMvYnJvYWRjYXN0QWN0aXZlT2JzZXJ2YXRpb25zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvYWxnb3JpdGhtcy9nYXRoZXJBY3RpdmVPYnNlcnZhdGlvbnNBdERlcHRoLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvcHJvY2Vzcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL3V0aWxzL3F1ZXVlTWljcm9UYXNrLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvcXVldWVSZXNpemVPYnNlcnZlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL3V0aWxzL3NjaGVkdWxlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL1Jlc2l6ZU9ic2VydmF0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvUmVzaXplT2JzZXJ2ZXJEZXRhaWwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9SZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9SZXNpemVPYnNlcnZlci5qcyIsICIuLi8uLi8ueWFybi9jYWNoZS9AYmFiZWwtcnVudGltZS1ucG0tNy4xNS4zLTYzMzNjNzEzNjItMmYwYjhkMmQ0ZS56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIiwgIi4uLy4uLy55YXJuL2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjE1LjMtNjMzM2M3MTM2Mi0yZjBiOGQyZDRlLnppcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qcyIsICIuLi8uLi8ueWFybi9jYWNoZS9AYmFiZWwtcnVudGltZS1ucG0tNy4xNS4zLTYzMzNjNzEzNjItMmYwYjhkMmQ0ZS56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMva2V5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMvd2Vhay1tYXBzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMvZG9tLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMvZW52aXJvbm1lbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9wbHVnaW4vcmVhY3QtZWRpdG9yLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLWlzb21vcnBoaWMtbGF5b3V0LWVmZmVjdC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3V0aWxzL3JhbmdlLWxpc3QudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL3N0cmluZy50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2Utc2xhdGUtc3RhdGljLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2NvbXBvbmVudHMvbGVhZi50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL3RleHQudHN4IiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvY29tcG9uZW50cy9lbGVtZW50LnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1kZWNvcmF0ZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1zZWxlY3RlZC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1jaGlsZHJlbi50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2UtcmVhZC1vbmx5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLXNsYXRlLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3V0aWxzL2NvbnN0YW50cy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3V0aWxzL2hvdGtleXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL3Jlc3RvcmUtZG9tL3Jlc3RvcmUtZG9tLW1hbmFnZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL3Jlc3RvcmUtZG9tL3Jlc3RvcmUtZG9tLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3V0aWxzL2RpZmYtdGV4dC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL2FuZHJvaWQtaW5wdXQtbWFuYWdlci9hbmRyb2lkLWlucHV0LW1hbmFnZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2UtaXMtbW91bnRlZC50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2UtbXV0YXRpb24tb2JzZXJ2ZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy9hbmRyb2lkLWlucHV0LW1hbmFnZXIvdXNlLWFuZHJvaWQtaW5wdXQtbWFuYWdlci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS10cmFjay11c2VyLWlucHV0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvY29tcG9uZW50cy9lZGl0YWJsZS50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2UtZm9jdXNlZC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1zbGF0ZS1zZWxlY3Rvci50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL3NsYXRlLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1lZGl0b3IudHN4IiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLXNsYXRlLXNlbGVjdGlvbi50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy91dGlscy9saW5lcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3BsdWdpbi93aXRoLXJlYWN0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1oaXN0b3J5L3NyYy9oaXN0b3J5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1oaXN0b3J5L3NyYy9oaXN0b3J5LWVkaXRvci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtaGlzdG9yeS9zcmMvd2l0aC1oaXN0b3J5LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9wcmV0dHktYnl0ZXMvaW5kZXguanMiLCAiLi4vLi4vZWRpdG9yL3NsYXRlL2N1cnJlbnQtZWxlbWVudC50c3giLCAiLi4vLi4vdXRpbC9pbmRleC50cyIsICIuLi8uLi9lZGl0b3IvaW5kZXgudHMiLCAiLi4vLi4vZWRpdG9yL3NsYXRlL3dyYXBwZXIudHN4IiwgIi4uLy4uL2VkaXRvci9zbGF0ZS9kcmF3ZXIvaW5kZXgudHN4IiwgIi4uLy4uL2VkaXRvci9zbGF0ZS9kcmF3ZXIvZ2VuZXJhbC50c3giLCAiLi4vLi4vZWRpdG9yL3NsYXRlL2RyYXdlci9zdHlsZXMudHN4IiwgIi4uLy4uL2VkaXRvci9zbGF0ZS9kcmF3ZXIvYWN0aW9ucy50c3giLCAiLi4vLi4vZWRpdG9yL3NsYXRlL2RyYXdlci90ZW1wbGF0aW5nLnRzeCIsICIuLi8uLi9lZGl0b3Ivc2xhdGUvZGlhbG9ncy9maWxlLnRzeCIsICIuLi8uLi9lZGl0b3Ivc2xhdGUvZWxlbWVudC13cmFwcGVycy50c3giLCAiLi4vLi4vZWRpdG9yL2VkaXRvci1kcm9wZG93bi50c3giXSwKICAic291cmNlc0NvbnRlbnQiOiBbIid1c2Ugc3RyaWN0J1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRpcmVjdGlvblxuXG52YXIgUlRMID0gJ1xcdTA1OTEtXFx1MDdGRlxcdUZCMUQtXFx1RkRGRFxcdUZFNzAtXFx1RkVGQydcbnZhciBMVFIgPVxuICAnQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2JyArXG4gICdcXHUwMEY4LVxcdTAyQjhcXHUwMzAwLVxcdTA1OTBcXHUwODAwLVxcdTFGRkZcXHUyMDBFXFx1MkMwMC1cXHVGQjFDJyArXG4gICdcXHVGRTAwLVxcdUZFNkZcXHVGRUZELVxcdUZGRkYnXG5cbnZhciBydGwgPSBuZXcgUmVnRXhwKCdeW14nICsgTFRSICsgJ10qWycgKyBSVEwgKyAnXScpXG52YXIgbHRyID0gbmV3IFJlZ0V4cCgnXlteJyArIFJUTCArICddKlsnICsgTFRSICsgJ10nKVxuXG5mdW5jdGlvbiBkaXJlY3Rpb24odmFsdWUpIHtcbiAgdmFsdWUgPSBTdHJpbmcodmFsdWUgfHwgJycpXG5cbiAgaWYgKHJ0bC50ZXN0KHZhbHVlKSkge1xuICAgIHJldHVybiAncnRsJ1xuICB9XG5cbiAgaWYgKGx0ci50ZXN0KHZhbHVlKSkge1xuICAgIHJldHVybiAnbHRyJ1xuICB9XG5cbiAgcmV0dXJuICduZXV0cmFsJ1xufVxuIiwgIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0O1xuIiwgIi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbm1vZHVsZS5leHBvcnRzID0gZnJlZUdsb2JhbDtcbiIsICJ2YXIgZnJlZUdsb2JhbCA9IHJlcXVpcmUoJy4vX2ZyZWVHbG9iYWwnKTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvb3Q7XG4iLCAidmFyIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qKlxuICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG4gKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDIuNC4wXG4gKiBAY2F0ZWdvcnkgRGF0ZVxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG4gKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG4gKiB9LCBfLm5vdygpKTtcbiAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG4gKi9cbnZhciBub3cgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gbm93O1xuIiwgIi8qKiBVc2VkIHRvIG1hdGNoIGEgc2luZ2xlIHdoaXRlc3BhY2UgY2hhcmFjdGVyLiAqL1xudmFyIHJlV2hpdGVzcGFjZSA9IC9cXHMvO1xuXG4vKipcbiAqIFVzZWQgYnkgYF8udHJpbWAgYW5kIGBfLnRyaW1FbmRgIHRvIGdldCB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgbm9uLXdoaXRlc3BhY2VcbiAqIGNoYXJhY3RlciBvZiBgc3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXIuXG4gKi9cbmZ1bmN0aW9uIHRyaW1tZWRFbmRJbmRleChzdHJpbmcpIHtcbiAgdmFyIGluZGV4ID0gc3RyaW5nLmxlbmd0aDtcblxuICB3aGlsZSAoaW5kZXgtLSAmJiByZVdoaXRlc3BhY2UudGVzdChzdHJpbmcuY2hhckF0KGluZGV4KSkpIHt9XG4gIHJldHVybiBpbmRleDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmltbWVkRW5kSW5kZXg7XG4iLCAidmFyIHRyaW1tZWRFbmRJbmRleCA9IHJlcXVpcmUoJy4vX3RyaW1tZWRFbmRJbmRleCcpO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltU3RhcnQgPSAvXlxccysvO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRyaW1gLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gdHJpbS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHRyaW1tZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVHJpbShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZ1xuICAgID8gc3RyaW5nLnNsaWNlKDAsIHRyaW1tZWRFbmRJbmRleChzdHJpbmcpICsgMSkucmVwbGFjZShyZVRyaW1TdGFydCwgJycpXG4gICAgOiBzdHJpbmc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVRyaW07XG4iLCAidmFyIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bWJvbDtcbiIsICJ2YXIgU3ltYm9sID0gcmVxdWlyZSgnLi9fU3ltYm9sJyk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1Ub1N0cmluZ1RhZyA9IFN5bWJvbCA/IFN5bWJvbC50b1N0cmluZ1RhZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VHZXRUYWdgIHdoaWNoIGlnbm9yZXMgYFN5bWJvbC50b1N0cmluZ1RhZ2AgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHJhdyBgdG9TdHJpbmdUYWdgLlxuICovXG5mdW5jdGlvbiBnZXRSYXdUYWcodmFsdWUpIHtcbiAgdmFyIGlzT3duID0gaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgc3ltVG9TdHJpbmdUYWcpLFxuICAgICAgdGFnID0gdmFsdWVbc3ltVG9TdHJpbmdUYWddO1xuXG4gIHRyeSB7XG4gICAgdmFsdWVbc3ltVG9TdHJpbmdUYWddID0gdW5kZWZpbmVkO1xuICAgIHZhciB1bm1hc2tlZCA9IHRydWU7XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgdmFyIHJlc3VsdCA9IG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICBpZiAodW5tYXNrZWQpIHtcbiAgICBpZiAoaXNPd24pIHtcbiAgICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHRhZztcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRSYXdUYWc7XG4iLCAiLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG5hdGl2ZU9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyB1c2luZyBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gbmF0aXZlT2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb2JqZWN0VG9TdHJpbmc7XG4iLCAidmFyIFN5bWJvbCA9IHJlcXVpcmUoJy4vX1N5bWJvbCcpLFxuICAgIGdldFJhd1RhZyA9IHJlcXVpcmUoJy4vX2dldFJhd1RhZycpLFxuICAgIG9iamVjdFRvU3RyaW5nID0gcmVxdWlyZSgnLi9fb2JqZWN0VG9TdHJpbmcnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG51bGxUYWcgPSAnW29iamVjdCBOdWxsXScsXG4gICAgdW5kZWZpbmVkVGFnID0gJ1tvYmplY3QgVW5kZWZpbmVkXSc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIHN5bVRvU3RyaW5nVGFnID0gU3ltYm9sID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogdW5kZWZpbmVkO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRUYWdgIHdpdGhvdXQgZmFsbGJhY2tzIGZvciBidWdneSBlbnZpcm9ubWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUdldFRhZyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkVGFnIDogbnVsbFRhZztcbiAgfVxuICByZXR1cm4gKHN5bVRvU3RyaW5nVGFnICYmIHN5bVRvU3RyaW5nVGFnIGluIE9iamVjdCh2YWx1ZSkpXG4gICAgPyBnZXRSYXdUYWcodmFsdWUpXG4gICAgOiBvYmplY3RUb1N0cmluZyh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUdldFRhZztcbiIsICIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdExpa2U7XG4iLCAidmFyIGJhc2VHZXRUYWcgPSByZXF1aXJlKCcuL19iYXNlR2V0VGFnJyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBiYXNlR2V0VGFnKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzU3ltYm9sO1xuIiwgInZhciBiYXNlVHJpbSA9IHJlcXVpcmUoJy4vX2Jhc2VUcmltJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0JyksXG4gICAgaXNTeW1ib2wgPSByZXF1aXJlKCcuL2lzU3ltYm9sJyk7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b051bWJlcigzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gSW5maW5pdHlcbiAqXG4gKiBfLnRvTnVtYmVyKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gIH1cbiAgdmFsdWUgPSBiYXNlVHJpbSh2YWx1ZSk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvTnVtYmVyO1xuIiwgInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKSxcbiAgICBub3cgPSByZXF1aXJlKCcuL25vdycpLFxuICAgIHRvTnVtYmVyID0gcmVxdWlyZSgnLi90b051bWJlcicpO1xuXG4vKiogRXJyb3IgbWVzc2FnZSBjb25zdGFudHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcbiAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG4gKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG4gKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50XG4gKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuICogaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG4gKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG4gKlxuICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG4gKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG4gKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsYXN0QXJncyxcbiAgICAgIGxhc3RUaGlzLFxuICAgICAgbWF4V2FpdCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHRpbWVySWQsXG4gICAgICBsYXN0Q2FsbFRpbWUsXG4gICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG4gICAgICBsZWFkaW5nID0gZmFsc2UsXG4gICAgICBtYXhpbmcgPSBmYWxzZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcbiAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG4gICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcblxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcbiAgICAvLyBSZXNldCBhbnkgYG1heFdhaXRgIHRpbWVyLlxuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG4gICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcbiAgICAgICAgdGltZVdhaXRpbmcgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICByZXR1cm4gbWF4aW5nXG4gICAgICA/IG5hdGl2ZU1pbih0aW1lV2FpdGluZywgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpXG4gICAgICA6IHRpbWVXYWl0aW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXG4gICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcbiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cbiAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG4gICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICB9XG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICB9XG4gICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKSxcbiAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXG4gICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcbiIsICJ2YXIgZGVib3VuY2UgPSByZXF1aXJlKCcuL2RlYm91bmNlJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0Jyk7XG5cbi8qKiBFcnJvciBtZXNzYWdlIGNvbnN0YW50cy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRocm90dGxlZCBmdW5jdGlvbiB0aGF0IG9ubHkgaW52b2tlcyBgZnVuY2AgYXQgbW9zdCBvbmNlIHBlclxuICogZXZlcnkgYHdhaXRgIG1pbGxpc2Vjb25kcy4gVGhlIHRocm90dGxlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGBcbiAqIG1ldGhvZCB0byBjYW5jZWwgZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG9cbiAqIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYFxuICogc2hvdWxkIGJlIGludm9rZWQgb24gdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YFxuICogdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZVxuICogdGhyb3R0bGVkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gcmV0dXJuIHRoZVxuICogcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLnRocm90dGxlYCBhbmQgYF8uZGVib3VuY2VgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhyb3R0bGUgaW52b2NhdGlvbnMgdG8uXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgdGhyb3R0bGVkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBleGNlc3NpdmVseSB1cGRhdGluZyB0aGUgcG9zaXRpb24gd2hpbGUgc2Nyb2xsaW5nLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Njcm9sbCcsIF8udGhyb3R0bGUodXBkYXRlUG9zaXRpb24sIDEwMCkpO1xuICpcbiAqIC8vIEludm9rZSBgcmVuZXdUb2tlbmAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGJ1dCBub3QgbW9yZSB0aGFuIG9uY2UgZXZlcnkgNSBtaW51dGVzLlxuICogdmFyIHRocm90dGxlZCA9IF8udGhyb3R0bGUocmVuZXdUb2tlbiwgMzAwMDAwLCB7ICd0cmFpbGluZyc6IGZhbHNlIH0pO1xuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIHRocm90dGxlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyB0aHJvdHRsZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIHRocm90dGxlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsZWFkaW5nID0gdHJ1ZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gJ2xlYWRpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMubGVhZGluZyA6IGxlYWRpbmc7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuICByZXR1cm4gZGVib3VuY2UoZnVuYywgd2FpdCwge1xuICAgICdsZWFkaW5nJzogbGVhZGluZyxcbiAgICAnbWF4V2FpdCc6IHdhaXQsXG4gICAgJ3RyYWlsaW5nJzogdHJhaWxpbmdcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdGhyb3R0bGU7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG4vKipcbiAqIENvbnN0YW50cy5cbiAqL1xuXG52YXIgSVNfTUFDID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiAvTWFjfGlQb2R8aVBob25lfGlQYWQvLnRlc3Qod2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybSk7XG5cbnZhciBNT0RJRklFUlMgPSB7XG4gIGFsdDogJ2FsdEtleScsXG4gIGNvbnRyb2w6ICdjdHJsS2V5JyxcbiAgbWV0YTogJ21ldGFLZXknLFxuICBzaGlmdDogJ3NoaWZ0S2V5J1xufTtcblxudmFyIEFMSUFTRVMgPSB7XG4gIGFkZDogJysnLFxuICBicmVhazogJ3BhdXNlJyxcbiAgY21kOiAnbWV0YScsXG4gIGNvbW1hbmQ6ICdtZXRhJyxcbiAgY3RsOiAnY29udHJvbCcsXG4gIGN0cmw6ICdjb250cm9sJyxcbiAgZGVsOiAnZGVsZXRlJyxcbiAgZG93bjogJ2Fycm93ZG93bicsXG4gIGVzYzogJ2VzY2FwZScsXG4gIGluczogJ2luc2VydCcsXG4gIGxlZnQ6ICdhcnJvd2xlZnQnLFxuICBtb2Q6IElTX01BQyA/ICdtZXRhJyA6ICdjb250cm9sJyxcbiAgb3B0OiAnYWx0JyxcbiAgb3B0aW9uOiAnYWx0JyxcbiAgcmV0dXJuOiAnZW50ZXInLFxuICByaWdodDogJ2Fycm93cmlnaHQnLFxuICBzcGFjZTogJyAnLFxuICBzcGFjZWJhcjogJyAnLFxuICB1cDogJ2Fycm93dXAnLFxuICB3aW46ICdtZXRhJyxcbiAgd2luZG93czogJ21ldGEnXG59O1xuXG52YXIgQ09ERVMgPSB7XG4gIGJhY2tzcGFjZTogOCxcbiAgdGFiOiA5LFxuICBlbnRlcjogMTMsXG4gIHNoaWZ0OiAxNixcbiAgY29udHJvbDogMTcsXG4gIGFsdDogMTgsXG4gIHBhdXNlOiAxOSxcbiAgY2Fwc2xvY2s6IDIwLFxuICBlc2NhcGU6IDI3LFxuICAnICc6IDMyLFxuICBwYWdldXA6IDMzLFxuICBwYWdlZG93bjogMzQsXG4gIGVuZDogMzUsXG4gIGhvbWU6IDM2LFxuICBhcnJvd2xlZnQ6IDM3LFxuICBhcnJvd3VwOiAzOCxcbiAgYXJyb3dyaWdodDogMzksXG4gIGFycm93ZG93bjogNDAsXG4gIGluc2VydDogNDUsXG4gIGRlbGV0ZTogNDYsXG4gIG1ldGE6IDkxLFxuICBudW1sb2NrOiAxNDQsXG4gIHNjcm9sbGxvY2s6IDE0NSxcbiAgJzsnOiAxODYsXG4gICc9JzogMTg3LFxuICAnLCc6IDE4OCxcbiAgJy0nOiAxODksXG4gICcuJzogMTkwLFxuICAnLyc6IDE5MSxcbiAgJ2AnOiAxOTIsXG4gICdbJzogMjE5LFxuICAnXFxcXCc6IDIyMCxcbiAgJ10nOiAyMjEsXG4gICdcXCcnOiAyMjJcbn07XG5cbmZvciAodmFyIGYgPSAxOyBmIDwgMjA7IGYrKykge1xuICBDT0RFU1snZicgKyBmXSA9IDExMSArIGY7XG59XG5cbi8qKlxuICogSXMgaG90a2V5P1xuICovXG5cbmZ1bmN0aW9uIGlzSG90a2V5KGhvdGtleSwgb3B0aW9ucywgZXZlbnQpIHtcbiAgaWYgKG9wdGlvbnMgJiYgISgnYnlLZXknIGluIG9wdGlvbnMpKSB7XG4gICAgZXZlbnQgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSBudWxsO1xuICB9XG5cbiAgaWYgKCFBcnJheS5pc0FycmF5KGhvdGtleSkpIHtcbiAgICBob3RrZXkgPSBbaG90a2V5XTtcbiAgfVxuXG4gIHZhciBhcnJheSA9IGhvdGtleS5tYXAoZnVuY3Rpb24gKHN0cmluZykge1xuICAgIHJldHVybiBwYXJzZUhvdGtleShzdHJpbmcsIG9wdGlvbnMpO1xuICB9KTtcbiAgdmFyIGNoZWNrID0gZnVuY3Rpb24gY2hlY2soZSkge1xuICAgIHJldHVybiBhcnJheS5zb21lKGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgIHJldHVybiBjb21wYXJlSG90a2V5KG9iamVjdCwgZSk7XG4gICAgfSk7XG4gIH07XG4gIHZhciByZXQgPSBldmVudCA9PSBudWxsID8gY2hlY2sgOiBjaGVjayhldmVudCk7XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGlzQ29kZUhvdGtleShob3RrZXksIGV2ZW50KSB7XG4gIHJldHVybiBpc0hvdGtleShob3RrZXksIGV2ZW50KTtcbn1cblxuZnVuY3Rpb24gaXNLZXlIb3RrZXkoaG90a2V5LCBldmVudCkge1xuICByZXR1cm4gaXNIb3RrZXkoaG90a2V5LCB7IGJ5S2V5OiB0cnVlIH0sIGV2ZW50KTtcbn1cblxuLyoqXG4gKiBQYXJzZS5cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZUhvdGtleShob3RrZXksIG9wdGlvbnMpIHtcbiAgdmFyIGJ5S2V5ID0gb3B0aW9ucyAmJiBvcHRpb25zLmJ5S2V5O1xuICB2YXIgcmV0ID0ge307XG5cbiAgLy8gU3BlY2lhbCBjYXNlIHRvIGhhbmRsZSB0aGUgYCtgIGtleSBzaW5jZSB3ZSB1c2UgaXQgYXMgYSBzZXBhcmF0b3IuXG4gIGhvdGtleSA9IGhvdGtleS5yZXBsYWNlKCcrKycsICcrYWRkJyk7XG4gIHZhciB2YWx1ZXMgPSBob3RrZXkuc3BsaXQoJysnKTtcbiAgdmFyIGxlbmd0aCA9IHZhbHVlcy5sZW5ndGg7XG5cbiAgLy8gRW5zdXJlIHRoYXQgYWxsIHRoZSBtb2RpZmllcnMgYXJlIHNldCB0byBmYWxzZSB1bmxlc3MgdGhlIGhvdGtleSBoYXMgdGhlbS5cblxuICBmb3IgKHZhciBrIGluIE1PRElGSUVSUykge1xuICAgIHJldFtNT0RJRklFUlNba11dID0gZmFsc2U7XG4gIH1cblxuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB2YWx1ZXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICB2YXIgdmFsdWUgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgdmFyIG9wdGlvbmFsID0gdmFsdWUuZW5kc1dpdGgoJz8nKSAmJiB2YWx1ZS5sZW5ndGggPiAxO1xuXG4gICAgICBpZiAob3B0aW9uYWwpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAtMSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBuYW1lID0gdG9LZXlOYW1lKHZhbHVlKTtcbiAgICAgIHZhciBtb2RpZmllciA9IE1PRElGSUVSU1tuYW1lXTtcblxuICAgICAgaWYgKGxlbmd0aCA9PT0gMSB8fCAhbW9kaWZpZXIpIHtcbiAgICAgICAgaWYgKGJ5S2V5KSB7XG4gICAgICAgICAgcmV0LmtleSA9IG5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0LndoaWNoID0gdG9LZXlDb2RlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobW9kaWZpZXIpIHtcbiAgICAgICAgcmV0W21vZGlmaWVyXSA9IG9wdGlvbmFsID8gbnVsbCA6IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogQ29tcGFyZS5cbiAqL1xuXG5mdW5jdGlvbiBjb21wYXJlSG90a2V5KG9iamVjdCwgZXZlbnQpIHtcbiAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgIHZhciBleHBlY3RlZCA9IG9iamVjdFtrZXldO1xuICAgIHZhciBhY3R1YWwgPSB2b2lkIDA7XG5cbiAgICBpZiAoZXhwZWN0ZWQgPT0gbnVsbCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGtleSA9PT0gJ2tleScgJiYgZXZlbnQua2V5ICE9IG51bGwpIHtcbiAgICAgIGFjdHVhbCA9IGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnd2hpY2gnKSB7XG4gICAgICBhY3R1YWwgPSBleHBlY3RlZCA9PT0gOTEgJiYgZXZlbnQud2hpY2ggPT09IDkzID8gOTEgOiBldmVudC53aGljaDtcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0dWFsID0gZXZlbnRba2V5XTtcbiAgICB9XG5cbiAgICBpZiAoYWN0dWFsID09IG51bGwgJiYgZXhwZWN0ZWQgPT09IGZhbHNlKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFV0aWxzLlxuICovXG5cbmZ1bmN0aW9uIHRvS2V5Q29kZShuYW1lKSB7XG4gIG5hbWUgPSB0b0tleU5hbWUobmFtZSk7XG4gIHZhciBjb2RlID0gQ09ERVNbbmFtZV0gfHwgbmFtZS50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCk7XG4gIHJldHVybiBjb2RlO1xufVxuXG5mdW5jdGlvbiB0b0tleU5hbWUobmFtZSkge1xuICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICBuYW1lID0gQUxJQVNFU1tuYW1lXSB8fCBuYW1lO1xuICByZXR1cm4gbmFtZTtcbn1cblxuLyoqXG4gKiBFeHBvcnQuXG4gKi9cblxuZXhwb3J0cy5kZWZhdWx0ID0gaXNIb3RrZXk7XG5leHBvcnRzLmlzSG90a2V5ID0gaXNIb3RrZXk7XG5leHBvcnRzLmlzQ29kZUhvdGtleSA9IGlzQ29kZUhvdGtleTtcbmV4cG9ydHMuaXNLZXlIb3RrZXkgPSBpc0tleUhvdGtleTtcbmV4cG9ydHMucGFyc2VIb3RrZXkgPSBwYXJzZUhvdGtleTtcbmV4cG9ydHMuY29tcGFyZUhvdGtleSA9IGNvbXBhcmVIb3RrZXk7XG5leHBvcnRzLnRvS2V5Q29kZSA9IHRvS2V5Q29kZTtcbmV4cG9ydHMudG9LZXlOYW1lID0gdG9LZXlOYW1lOyIsICJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgUmVhY3RET00gZnJvbSBcInJlYWN0LWRvbVwiO1xuaW1wb3J0IHsgZGVzZXJpYWxpemUgfSBmcm9tIFwiLi4vc2VyaWFsaXplclwiO1xuaW1wb3J0IHsgSUZlYXR1cmVTdXBwb3J0T3B0aW9ucywgc2FuaXRpemUgfSBmcm9tIFwiLi4vc2FuaXRpemVyXCI7XG5pbXBvcnQgeyBJU2xhdGVGaWxlLCBJU2xhdGVJbnNlcnRlZEZpbGVJbmZvcm1hdGlvblR5cGUsIFNsYXRlRWRpdG9yLCBkZWZhdWx0QmFzZUkxOG5SaWNoSW5mb0VuZ2xpc2ggfSBmcm9tIFwiLi4vZWRpdG9yL3NsYXRlXCI7XG5pbXBvcnQgeyBEZWZhdWx0U2xhdGVXcmFwcGVyLCBkZWZhdWx0V3JhcHBlckkxOG5SaWNoSW5mb0VuZ2xpc2ggfSBmcm9tIFwiLi4vZWRpdG9yL3NsYXRlL3dyYXBwZXJcIjtcbmltcG9ydCB7IGRlZmF1bHRFbGVtZW50V3JhcHBlcnMgfSBmcm9tIFwiLi4vZWRpdG9yL3NsYXRlL2VsZW1lbnQtd3JhcHBlcnNcIjtcblxuY29uc3QgZmVhdHVyZVN1cHBvcnRCYXNpYzogSUZlYXR1cmVTdXBwb3J0T3B0aW9ucyA9IHtcbiAgc3VwcG9ydGVkQ29udGFpbmVyczogW10sXG4gIHN1cHBvcnRlZEN1c3RvbXM6IFtdLFxuICBzdXBwb3J0ZWRSaWNoQ2xhc3NlczogW10sXG4gIHN1cHBvcnRlZFRhYmxlczogW10sXG4gIHN1cHBvcnRzQ29udGFpbmVyczogdHJ1ZSxcbiAgc3VwcG9ydHNDdXN0b206IHRydWUsXG4gIHN1cHBvcnRzQ3VzdG9tU3R5bGVzOiB0cnVlLFxuICBzdXBwb3J0c0V4dGVybmFsTGlua3M6IHRydWUsXG4gIHN1cHBvcnRzRmlsZXM6IHRydWUsXG4gIHN1cHBvcnRzRmlsZXNBY2NlcHQ6IFwiKlwiLFxuICBzdXBwb3J0c0ltYWdlczogdHJ1ZSxcbiAgc3VwcG9ydHNJbWFnZXNBY2NlcHQ6IFwiaW1hZ2UvKlwiLFxuICBzdXBwb3J0c0xpbmtzOiB0cnVlLFxuICBzdXBwb3J0c0xpc3RzOiB0cnVlLFxuICBzdXBwb3J0c1F1b3RlOiB0cnVlLFxuICBzdXBwb3J0c1JpY2hDbGFzc2VzOiB0cnVlLFxuICBzdXBwb3J0c1RhYmxlczogdHJ1ZSxcbiAgc3VwcG9ydHNUZW1wbGF0aW5nOiB0cnVlLFxuICBzdXBwb3J0c1RpdGxlOiB0cnVlLFxuICBzdXBwb3J0c1ZpZGVvczogdHJ1ZSxcbn07XG5cbi8vIFdlIHdpbGwgc3RhcnQgd2l0aCBhbiBlbXB0eSB2YWx1ZVxuY29uc3QgVEVYVF9GUk9NX1NFUlZFUl8xID0gJyc7XG5cbi8vIHdlIHNhbml0aXplLCBpdCB3aWxsIGRvIG5vdGhpbmcgaW4gdGhpc1xuLy8gY2FzZVxuY29uc3Qgc2FuaXRpemVkMSA9IHNhbml0aXplKHtcbiAgZmlsZVJlc29sdmVyOiBudWxsLFxufSwgZmVhdHVyZVN1cHBvcnRCYXNpYywgVEVYVF9GUk9NX1NFUlZFUl8xKTtcblxuY29uc3QgdGV4dFRyZWUxID0gZGVzZXJpYWxpemUoc2FuaXRpemVkMSk7XG5cbmZ1bmN0aW9uIEV4YW1wbGUoKSB7XG4gIC8vIG91ciBpbml0aWFsIHZhbHVlIGlzIHRoZSBzYW1lIGFzIHRoZSBzYW5pdGl6ZWRcbiAgLy8gdGhpcyB2YWx1ZSBpcyBmb3IgY29udmVuaWVuY2UgaXMgbm90IHdoYXQgaXMgdXNlZFxuICAvLyBmb3IgdGhlIHN0YXRlIG9mIHRoZSBlZGl0b3IgYnV0IHRoZSB0cmVlIGlzXG4gIGNvbnN0IFtodG1sVmFsdWUsIHNldEh0bWxWYWx1ZV0gPSB1c2VTdGF0ZShzYW5pdGl6ZWQxKTtcbiAgY29uc3QgW3RyZWVWYWx1ZSwgc2V0VHJlZVZhbHVlXSA9IHVzZVN0YXRlKHRleHRUcmVlMSk7XG5cbiAgY29uc3QgW2ZpbGVzLCBzZXRGaWxlc10gPSB1c2VTdGF0ZShbXSBhcyBBcnJheTx7XG4gICAgZmlsZTogSVNsYXRlRmlsZTtcbiAgICBpc0ltYWdlOiBib29sZWFuO1xuICB9Pik7XG5cbiAgY29uc3Qgb25JbnNlcnRGaWxlID0gdXNlQ2FsbGJhY2soYXN5bmMgKGZpbGU6IEZpbGUsIGlzRXhwZWN0aW5nSW1hZ2U/OiBib29sZWFuKSA9PiB7XG4gICAgLy8gaWYgeW91IHdhbnQgdG8gcmVqZWN0IGhlcmUgeW91IHNob3VsZCBzZXQgYW4gZXJyb3IgYW5kIHBhc3MgaXQgdG8gY3VycmVudExvYWRFcnJvclxuICAgIC8vIGhvd2V2ZXIgd2UgYXJlIG5vdCBoYW5kbGluZyB0aGVzZSBlcnJvcnMgcmlnaHQgbm93IHdlIHdpbGwgYWNjZXB0IHdoYXRldmVyXG4gICAgLy8gYnV0IHlvdSBzaG91bGQgdmFsaWRhdGUgeW91ciBmaWxlXG5cblxuICAgIC8vIGZvciB0aGlzIHR1dG9yaWFsIHdlIGFyZSBnb2luZyB0byBibGluZGx5IHRydXN0XG5cbiAgICBjb25zdCBmaWxlRGF0YTogSVNsYXRlRmlsZSA9IHtcbiAgICAgIC8vIHlvdSBzaG91bGQgcHJvYmFibHkgdXNlIHNvbWUgdXVpZCBpbnN0ZWFkIG9mIHRoaXNcbiAgICAgIGlkOiBcIkZJTEVcIiArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5zdWJzdHJpbmcoMiksXG4gICAgICBtZXRhZGF0YTogbnVsbCxcbiAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgIHVybDogVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKSxcbiAgICAgIHNyYzogZmlsZSxcbiAgICB9O1xuXG4gICAgaWYgKGlzRXhwZWN0aW5nSW1hZ2UpIHtcbiAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTxJU2xhdGVJbnNlcnRlZEZpbGVJbmZvcm1hdGlvblR5cGU+KGFzeW5jIChyZXNvbHZlKSA9PiB7XG4gICAgICAgIC8vIHNvIHdlIGNyZWF0ZSBhbiBpbWFnZVxuICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgLy8gb24gbG9hZFxuICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgIC8vIHdlIGJ1aWxkIHRoZSBtZXRhZGF0YVxuICAgICAgICAgIGZpbGVEYXRhLm1ldGFkYXRhID0gaW1nLndpZHRoICsgXCJ4XCIgKyBpbWcuaGVpZ2h0O1xuXG4gICAgICAgICAgLy8gYW5kIHJlc29sdmVcbiAgICAgICAgICBzZXRGaWxlcyhbLi4uZmlsZXMsIHtcbiAgICAgICAgICAgIGZpbGU6IGZpbGVEYXRhLFxuICAgICAgICAgICAgaXNJbWFnZTogdHJ1ZSxcbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICByZXN1bHQ6IGZpbGVEYXRhLFxuICAgICAgICAgICAgd2lkdGg6IGltZy53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogaW1nLmhlaWdodCxcbiAgICAgICAgICAgIGlzSW1hZ2U6IHRydWUsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaW1nLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgLy8gb24gZXJyb3Igc2hvdWxkIHByb2JhYmx5IGRvIHNvbWV0aGluZ1xuICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYW5kIHRoaXMgaXMgYXNzaWduZWQgdGhlIHVybCBvZiB0aGUgaW1hZ2VcbiAgICAgICAgaW1nLnNyYyA9IGZpbGVEYXRhLnVybDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldEZpbGVzKFsuLi5maWxlcywge1xuICAgICAgZmlsZTogZmlsZURhdGEsXG4gICAgICBpc0ltYWdlOiB0cnVlLFxuICAgIH1dKTtcblxuICAgIHJldHVybiB7XG4gICAgICByZXN1bHQ6IGZpbGVEYXRhLFxuICAgICAgd2lkdGg6IG51bGwsXG4gICAgICBoZWlnaHQ6IG51bGwsXG4gICAgICBpc0ltYWdlOiBmYWxzZSxcbiAgICB9XG4gIH0sIFtmaWxlc10pO1xuXG4gIGNvbnN0IG9uSW5zZXJ0RmlsZUZyb21VUkwgPSB1c2VDYWxsYmFjayhhc3luYyAodXJsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgaXNFeHBlY3RpbmdJbWFnZTogYm9vbGVhbikgPT4ge1xuICAgIGxldCBibG9iOiBhbnk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGVEYXRhID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICAgIGJsb2IgPSBhd2FpdCBmaWxlRGF0YS5ibG9iKCk7XG5cbiAgICAgIC8vIHdlIGFyZSBnb2luZyB0byB1c2UgYSB0cmljaywgd2UgY291bGQgdXNlIHRoZSBGaWxlIGNvbnN0cnVjdG9yXG4gICAgICAvLyBidXQgdGhlcmUgd2VyZSBhIGxvdCBvZiBjb21wbGFpbnMgcmVnYXJkaW5nIHRoZSBjb25zdHJ1Y3RvciBvbiBzdGFja292ZXJmbG93XG4gICAgICAvLyB3aGlsZSBhcyBhIG1hdHRlciBvZiBmYWN0IHRoZSBzcmMgYWxsb3dzIGZvciBibG9icyBzb1xuICAgICAgYmxvYi5uYW1lID0gbmFtZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIGZhaWxlZCB0byBmZXRjaFxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gdGhlcmUsIGl0IHdpbGwgd29ya1xuICAgIC8vIG5vdyB0aGlzIGlzIGEgZnVubnkgdGhpbmcgc2luY2UgdGhlIGRhdGEgdXJpIG1pZ2h0XG4gICAgLy8gYmUgYSByZW1vdGUgVVJMIGFzIHdlbGwsIGRlcGVuZHMgb24gd2hhdCB3ZSB1c2VkIHRvIGxvYWRcbiAgICAvLyBmcm9tXG4gICAgcmV0dXJuIHRoaXMub25JbnNlcnRGaWxlKGJsb2IsIGlzRXhwZWN0aW5nSW1hZ2UpO1xuICB9LCBbb25JbnNlcnRGaWxlXSk7XG5cbiAgY29uc3Qgb25SZXRyaWV2ZUZpbGUgPSB1c2VDYWxsYmFjaygoZmlsZUlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBmaWxlID0gZmlsZXMuZmluZCgoZikgPT4gZi5maWxlLmlkID09PSBmaWxlSWQpIHx8IG51bGw7XG4gICAgcmV0dXJuICBmaWxlPy5maWxlIHx8IG51bGw7XG4gIH0sIFtmaWxlc10pO1xuXG4gIGNvbnN0IG9uUmV0cmlldmVJbWFnZSA9IHVzZUNhbGxiYWNrKChmaWxlSWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGZpbGUgPSBvblJldHJpZXZlRmlsZShmaWxlSWQpO1xuICAgIGlmIChmaWxlKSB7XG4gICAgICAvLyB3ZSBkb24ndCBrbm93IGEgc3Jjc2V0XG4gICAgICByZXR1cm4gIHtcbiAgICAgICAgZmlsZSxcbiAgICAgICAgc3Jjc2V0OiBudWxsLFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9LCBbb25SZXRyaWV2ZUZpbGVdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8aDE+QmFzaWMgRWRpdGluZzwvaDE+XG4gICAgICA8c2VjdGlvbj5cbiAgICAgICAgPGg0PlxuICAgICAgICAgIFRoaXMgZWRpdG9yIGhhcyBzb21lIHdyYXBwZXJzLCBhbmQgZWxlbWVudCB3cmFwcGVycyBhbmQgdGhleSBhZGQgYWxsIHRoZSBtaXNzaW5nXG4gICAgICAgICAgZnVuY3Rpb25hbGl0eSBhcyB3ZWxsIGFzIGFsbG93IHRvIGl0IHRvIGZ1bmN0aW9uIGNvcnJlY3RseVxuXG4gICAgICAgICAgVGhlIGNvbnRlbnQgYXJlIHN0eWxlZCB3aXRoIHRoZSB1c2Ugb2YgYGRpc3QuY3NzYCBhbmQgdGhlIGZpbGUgYGVkaXRvci5jc3NgIGdpdmVzIHNvbWUgdmVyeSBiYXNpYyBzdHlsZXNcbiAgICAgICAgICBzbyB0aGF0J3MgdXNhYmxlIGJ1dCB5b3UgYXJlIGV4cGVjdGVkIG5vdCB0byBuZWVkIHRvIHVzZSBgZWRpdG9yLmNzc2AgYW5kIHN0eWxlIHlvdXJzZWxmIHdpdGggeW91ciBvd25cbiAgICAgICAgICBzb2x1dGlvbiB0aGF0IGZpdHMgeW91ciBhcHBcbiAgICAgICAgPC9oND5cbiAgICAgICAgPGg0PlxuICAgICAgICAgIFRoZSB3cmFwcGVyIHdyYXBzIHRoZSBlZGl0b3IgKGdpdmVzIHRvb2xiYXIgYW5kIGRyYXdlciksIGFuZCB0aGUgZWxlbWVudCB3cmFwcGVycyB3cmFwIHRoZSBlbGVtZW50IChnaXZlcyBvcHRpb25zIGZvciBhIHNwZWNpZmljXG4gICAgICAgICAgZWxlbWVudCwgZm9yIGV4YW1wbGUgdHJ5IGluc2VydGluZyBhIHRpdGxlKVxuICAgICAgICA8L2g0PlxuICAgICAgICA8aDQ+XG4gICAgICAgICAgQmFzaWMgRWRpdG9yIChVbnN0eWxlZClcbiAgICAgICAgPC9oND5cbiAgICAgICAgPGRpdiBzdHlsZT17eyBib3JkZXI6IFwic29saWQgMXB4ICNjY2NcIiB9fT5cbiAgICAgICAgICA8U2xhdGVFZGl0b3JcbiAgICAgICAgICAgIGlkPVwibXktZWRpdG9yXCJcblxuICAgICAgICAgICAgLy8gdGhpcyBpcyByZWdhcmdpbmcgZmlsZSBsb2FkaW5nXG4gICAgICAgICAgICAvLyB3ZSBoYXZlIGRpc2FibGVkIGZpbGVzIGFuZCBpbWFnZXMgc28gdGhpcyBzaG91bGRuJ3QgaGFwcGVuXG4gICAgICAgICAgICBjdXJyZW50TG9hZEVycm9yPXtudWxsfVxuICAgICAgICAgICAgZGlzbWlzc0N1cnJlbnRMb2FkRXJyb3I9e251bGx9XG4gICAgICAgICAgICBvbkluc2VydEZpbGU9e29uSW5zZXJ0RmlsZX1cbiAgICAgICAgICAgIG9uSW5zZXJ0RmlsZUZyb21VUkw9e29uSW5zZXJ0RmlsZUZyb21VUkx9XG4gICAgICAgICAgICBvblJldHJpZXZlRmlsZT17b25SZXRyaWV2ZUZpbGV9XG4gICAgICAgICAgICBvblJldHJpZXZlSW1hZ2U9e29uUmV0cmlldmVJbWFnZX1cbiAgICAgICAgICAgIHN1cHBvcnRlZEltYWdlVHlwZXM9XCJpbWFnZS8qXCJcblxuICAgICAgICAgICAgLy8gdGhpcyB2YWxpZGl0eSBpcyBkb25lIHZpYSBhbm90aGVyIGNyaXRlcmlhXG4gICAgICAgICAgICAvLyBvZiB5b3VyIGNob29zaW5nXG4gICAgICAgICAgICBjdXJyZW50VmFsaWQ9e3RydWV9XG4gICAgICAgICAgICB0cmVlVmFsdWU9e3RyZWVWYWx1ZX1cbiAgICAgICAgICAgIHZhbHVlPXtodG1sVmFsdWV9XG5cbiAgICAgICAgICAgIC8vIHdlIGZlZWQgaXQgdGhlIHNhbWUgZmVhdHVyZSBzdXBwb3J0IHdlIHVzZWRcbiAgICAgICAgICAgIGZlYXR1cmVzPXtmZWF0dXJlU3VwcG9ydEJhc2ljfVxuICAgICAgICAgICAgaXNSaWNoVGV4dD17dGV4dFRyZWUxLnJpY2h9XG4gICAgICAgICAgICAvLyB0aGUgZ2l2ZW4gbGFuZ3VhZ2VcbiAgICAgICAgICAgIGxhbmc9XCJlblwiXG5cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUsIHRleHRUcmVlVmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgc2V0SHRtbFZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgICAgc2V0VHJlZVZhbHVlKHRleHRUcmVlVmFsdWUpO1xuICAgICAgICAgICAgfX1cblxuICAgICAgICAgICAgLy8gdGhpcyBpcyB1c2VkIHRvIGRlZmluZSBhIHJvb3QgY29udGV4dFxuICAgICAgICAgICAgLy8gdXNlZCBmb3IgdGVtcGxhdGluZywgdG8gZGV0ZXJtaW5lXG4gICAgICAgICAgICAvLyB0aGUgc2hhcGUgb2YgdGhlIGNvbnRleHQgdGhhdCB3aWxsIGJlIGZlZWRcbiAgICAgICAgICAgIHJvb3RDb250ZXh0PXtudWxsfVxuXG4gICAgICAgICAgICAvLyBUaGUgd3JhcHBlciB3cmFwcyB0aGUgZWRpdG9yIGFuZCBicmluZ3MgZXh0cmEgZnVuY3Rpb25hbGl0eVxuICAgICAgICAgICAgLy8gdGhlIGRlZmF1bHQgd3JhcHBlciBicmluZ3MgYSB0b29sYmFyIGFuZCBhIGNvbmZpZyBkcmF3ZXJcbiAgICAgICAgICAgIC8vIHdoaWNoIGlzIGhpZ2hseSBjdXN0b21pemFibGUsXG4gICAgICAgICAgICAvLyB0aGUgY29uZmlndXJhdGlvbiBpcyBkb25lIHZpYSB3cmFwcGVyQXJncyBwcm9wXG4gICAgICAgICAgICAvLyBhbmQgaXMgcGFzc2VkIGFzIHByb3BzIHRvIHRoZSBkZWZhdWx0IHdyYXBwZXJcbiAgICAgICAgICAgIC8vIHNhZGx5IHRoZXNlIHByb3BzIGFyZSBhcmJpdHJhcnkgYW5kIGFzIGEgcmVzdWx0XG4gICAgICAgICAgICAvLyB0aGVyZSdzIG5vIHR5cGVzY3JpcHQgYXV0b2NvbXBsZXRpdGlvbiwgYXMgYW55b25lIGNhbiB3cml0ZSBhIHdyYXBwZXJcbiAgICAgICAgICAgIC8vIHRoZSBkZWZhdWx0IGlzbid0IHByZXR0eSBhdCBhbGwsIGFuZCB5b3Ugc2hvdWxkIHRyeSB0byBjb25maWd1cmUgaXQgdG8gaGF2ZSB0aGUgc2FtZVxuICAgICAgICAgICAgLy8gbG9vayBhbmQgZmVlbCBhcyB5b3VyIGFwcCwgaW4gaXRlbWl6ZSBmYXN0IHByb3RvdHlwaW5nIGl0IGlzIHJlY29uZmlndXJlZCB0byB1c2UgbWF0ZXJpYWwgVUlcbiAgICAgICAgICAgIFdyYXBwZXI9e0RlZmF1bHRTbGF0ZVdyYXBwZXJ9XG4gICAgICAgICAgICBlbGVtZW50V3JhcHBlcnM9e2RlZmF1bHRFbGVtZW50V3JhcHBlcnN9XG4gICAgICAgICAgICAvLyBub3RlIGhvdyB3ZSBjaGFuZ2VkIHRoaXMgdG8gdXNlIHRoZSBvbmUgdGhhdCBoYXMgbW9yZSBkZXRhaWxzXG4gICAgICAgICAgICAvLyB3aGljaCBhcmUgbmVjZXNzYXJ5IGZvciB0aGUgd3JhcHBlciB0byBmdW5jdGlvblxuICAgICAgICAgICAgYmFzZUkxOG49e2RlZmF1bHRXcmFwcGVySTE4blJpY2hJbmZvRW5nbGlzaH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc2VjdGlvbj5cblxuICAgICAgPHNlY3Rpb24+XG4gICAgICAgIDxjb2RlPntodG1sVmFsdWV9PC9jb2RlPlxuICAgICAgICA8Y29kZT57SlNPTi5zdHJpbmdpZnkodHJlZVZhbHVlLCBudWxsLCAyKX08L2NvZGU+XG4gICAgICA8L3NlY3Rpb24+XG4gICAgPC9kaXYgPlxuICApO1xufVxuXG5SZWFjdERPTS5yZW5kZXIoPEV4YW1wbGUgLz4sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXBwXCIpKTsiLCAiLyoqXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIHNsYXRlIGVsZW1lbnQsIHRoZSBzbGF0ZSBlbGVtZW50IGlzIHVzZWQgdG8gY3JlYXRlXG4gKiByaWNoIHRleHQgZWRpdG9ycyBhbmQgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoIHRoZSBQcm9wZXJ0eUVudHJ5VGV4dCB0eXBlXG4gKiBldmVuIGlmIGl0IGNhbiBhbHNvIGJlIHVzZWQgaW4gYSBzdGFuZGFsb25lIHdheVxuICogXG4gKiBAbW9kdWxlXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IGVxdWFscyBmcm9tIFwiZGVlcC1lcXVhbFwiO1xuaW1wb3J0IHsgQmFzZUVkaXRvciwgY3JlYXRlRWRpdG9yLCBUcmFuc2Zvcm1zLCBSYW5nZSwgRWRpdG9yLCBFbGVtZW50LCBOb2RlLCBQYXRoLCBUZXh0LCBOb2RlRW50cnksIFBvaW50IH0gZnJvbSBcInNsYXRlXCI7XG5pbXBvcnQgeyBTbGF0ZSwgRWRpdGFibGUsIHdpdGhSZWFjdCwgUmVhY3RFZGl0b3IsIFJlbmRlckVsZW1lbnRQcm9wcywgUmVuZGVyTGVhZlByb3BzIH0gZnJvbSBcInNsYXRlLXJlYWN0XCI7XG5pbXBvcnQgeyB3aXRoSGlzdG9yeSwgSGlzdG9yeUVkaXRvciB9IGZyb20gXCJzbGF0ZS1oaXN0b3J5XCI7XG5pbXBvcnQge1xuICBJUm9vdExldmVsRG9jdW1lbnQsIGRlc2VyaWFsaXplLCBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLCBSaWNoRWxlbWVudCwgZGVzZXJpYWxpemVQbGFpbixcbiAgZ2V0Q29udGV4dEZvciwgbm9ybWFsaXplRWxlbWVudCwgZ2V0QWxsb3dlZENoaWxkcmVuVHlwZXMsIGdldFVJSGFuZGxlclZhbHVlV2l0aEtub3duQ29udGV4dEZvciwgaXNJbmxpbmUsIGlzVm9pZCwgaXNTdXBlckJsb2NrLCBpc0Jsb2NrLCBnZXRVVUlERm9yLFxuICBzZXJpYWxpemUsIHNlcmlhbGl6ZVN0cmluZyxcbn0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXJcIjtcbmltcG9ydCB7IGNvbnZlcnRTdHlsZVN0cmluZ1RvUmVhY3RPYmplY3QsIElVSUhhbmRsZXJQcm9wcyB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL2Jhc2VcIjtcbmltcG9ydCB7IElWaWRlbyB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL3ZpZGVvXCI7XG5pbXBvcnQgcHJldHR5Qnl0ZXMgZnJvbSBcInByZXR0eS1ieXRlc1wiO1xuaW1wb3J0IHsgSUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL2NvbnRhaW5lclwiO1xuaW1wb3J0IHsgSUZpbGUgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9maWxlXCI7XG5pbXBvcnQgeyBJSW1hZ2UgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9pbWFnZVwiO1xuaW1wb3J0IHsgSVRleHQsIFNUQU5EQVJEX1RFWFRfTk9ERSB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL3RleHRcIjtcbmltcG9ydCB7IElDdXN0b20gfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9jdXN0b21cIjtcbmltcG9ydCB7IElJbmxpbmUgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9pbmxpbmVcIjtcbmltcG9ydCB7IEN1cnJlbnRFbGVtZW50UHJvdmlkZXIsIEN1cnJlbnRFbGVtZW50UmV0cmlldmVyIH0gZnJvbSBcIi4vY3VycmVudC1lbGVtZW50XCI7XG5pbXBvcnQgeyBJVm9pZEJsb2NrIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvdm9pZC1ibG9ja1wiO1xuaW1wb3J0IHsgSUxpc3QgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9saXN0XCI7XG5pbXBvcnQgeyBTVEFOREFSRF9QQVJBR1JBUEggfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9wYXJhZ3JhcGhcIjtcbmltcG9ydCB7IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uLCBJVGVtcGxhdGVBcmdIVE1MRGVmaW5pdGlvbiwgSVRlbXBsYXRlQXJnVGV4dERlZmluaXRpb24sIElUZW1wbGF0ZUFyZ1VJSGFuZGxlckRlZmluaXRpb24gfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90ZW1wbGF0ZS1hcmdzXCI7XG5pbXBvcnQgeyBJTGluayB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL2xpbmtcIjtcbmltcG9ydCB7IElUYWJsZSwgSVRib2R5LCBJVGQsIElUZm9vdCwgSVRyIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvdGFibGVcIjtcbmltcG9ydCB7IENPTlRBSU5FUl9DTEFTU19QUkVGSVgsIENVU1RPTV9DTEFTU19QUkVGSVgsIElGZWF0dXJlU3VwcG9ydE9wdGlvbnMsIFJJQ0hfVEVYVF9DTEFTU19QUkVGSVgsIFRBQkxFX0NMQVNTX1BSRUZJWCB9IGZyb20gXCIuLi8uLi9zYW5pdGl6ZXJcIjtcbmltcG9ydCB7IGNvdW50U2l6ZSB9IGZyb20gXCIuLi8uLi91dGlsXCI7XG5pbXBvcnQgeyBsb2NhbGVSZXBsYWNlciwgbWltZVR5cGVUb0V4dGVuc2lvbiB9IGZyb20gXCIuLlwiO1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdEJhc2VJMThuUmljaEluZm9FbmdsaXNoOiBJQmFzZUkxOG5SaWNoVGV4dEluZm8gPSB7XG4gIGFjdGlvbnM6IFwiYWN0aW9uc1wiLFxuICBhbHQ6IFwiYWx0XCIsXG4gIGNsYXNzZXM6IFwiY2xhc3Nlc1wiLFxuICBjb250YWluZXI6IFwiY29udGFpbmVyXCIsXG4gIGNvbnRleHQ6IFwiY29udGV4dFwiLFxuICBjdXN0b206IFwiY3VzdG9tXCIsXG4gIGVhY2g6IFwibG9vcCBmb3IgZWFjaFwiLFxuICBmaWxlOiBcImZpbGVcIixcbiAgaW1hZ2U6IFwiaW1hZ2VcIixcbiAgaW5saW5lOiBcImlubGluZVwiLFxuICBpbnRlcmFjdGl2ZTogXCJpbnRlcmFjdGl2ZSB7MH1cIixcbiAgbGluazogXCJsaW5rXCIsXG4gIGxpc3Q6IFwibGlzdFwiLFxuICBsaXN0SXRlbTogXCJsaXN0IGl0ZW1cIixcbiAgbmFtZTogXCJuYW1lXCIsXG4gIHBhcmFncmFwaDogXCJwYXJhZ3JhcGhcIixcbiAgcXVvdGU6IFwicXVvdGVcIixcbiAgcmVuZGVyQ29uZGl0aW9uOiBcInJlbmRlciBjb25kaXRpb25cIixcbiAgcmljaENsYXNzZXM6IHt9LFxuICByaWNoQ29udGFpbmVyczoge30sXG4gIHJpY2hDdXN0b21zOiB7fSxcbiAgcmljaFRhYmxlczoge30sXG4gIHJpY2hVSUhhbmRsZXJFbGVtZW50OiB7fSxcbiAgc2V0dGluZ3M6IFwic2V0dGluZ3NcIixcbiAgc2l6ZXM6IFwic2l6ZXNcIixcbiAgc3RhbmRhbG9uZTogXCJzdGFuZGFsb25lXCIsXG4gIHN0eWxlOiBcInN0eWxlXCIsXG4gIHN0eWxlQWN0aXZlOiBcInN0eWxlIGFjdGl2ZVwiLFxuICBzdHlsZUhvdmVyOiBcInN0eWxlIGhvdmVyXCIsXG4gIHN0eWxlZDogXCJzdHlsZWQgezB9XCIsXG4gIHN0eWxlczogXCJzdHlsZXNcIixcbiAgdGFibGU6IFwidGFibGVcIixcbiAgdGJvZHk6IFwidGFibGUgYm9keVwiLFxuICB0ZDogXCJ0YWJsZSBjb2x1bW5cIixcbiAgdGVtcGxhdGU6IFwidGVtcGxhdGUgezB9XCIsXG4gIHRlbXBsYXRpbmc6IFwidGVtcGxhdGluZ1wiLFxuICB0ZXh0OiBcInRleHRcIixcbiAgdGZvb3Q6IFwidGFibGUgZm9vdGVyXCIsXG4gIHRoOiBcInRhYmxlIGNvbHVtblwiLFxuICB0aGVhZDogXCJ0YWJsZSBoZWFkXCIsXG4gIHRpdGxlOiBcInRpdGxlXCIsXG4gIHRyOiBcInRhYmxlIHJvd1wiLFxuICB0eXBlOiBcInR5cGVcIixcbiAgdWlIYW5kbGVyOiBcInVpIGhhbmRsZXJcIixcbiAgdmlkZW86IFwidmlkZW9cIixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQmFzZUkxOG5SaWNoVGV4dEluZm8ge1xuICBuYW1lOiBzdHJpbmc7XG4gIGFsdDogc3RyaW5nO1xuICBzaXplczogc3RyaW5nO1xuICBjb250YWluZXI6IHN0cmluZztcbiAgaW5saW5lOiBzdHJpbmc7XG4gIHRleHQ6IHN0cmluZztcbiAgY3VzdG9tOiBzdHJpbmc7XG4gIGZpbGU6IHN0cmluZztcbiAgaW1hZ2U6IHN0cmluZztcbiAgbGluazogc3RyaW5nO1xuICBsaXN0OiBzdHJpbmc7XG4gIGxpc3RJdGVtOiBzdHJpbmc7XG4gIHBhcmFncmFwaDogc3RyaW5nO1xuICBxdW90ZTogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICB0YWJsZTogc3RyaW5nO1xuICB0aGVhZDogc3RyaW5nO1xuICB0Ym9keTogc3RyaW5nO1xuICB0Zm9vdDogc3RyaW5nO1xuICB0cjogc3RyaW5nO1xuICB0ZDogc3RyaW5nO1xuICB0aDogc3RyaW5nO1xuICB2aWRlbzogc3RyaW5nO1xuICBzdHlsZWQ6IHN0cmluZztcbiAgdGVtcGxhdGU6IHN0cmluZztcbiAgaW50ZXJhY3RpdmU6IHN0cmluZztcbiAgc3R5bGU6IHN0cmluZztcbiAgc3R5bGVBY3RpdmU6IHN0cmluZztcbiAgc3R5bGVIb3Zlcjogc3RyaW5nO1xuICBjbGFzc2VzOiBzdHJpbmc7XG4gIHNldHRpbmdzOiBzdHJpbmc7XG4gIHN0eWxlczogc3RyaW5nO1xuICB0ZW1wbGF0aW5nOiBzdHJpbmc7XG4gIGFjdGlvbnM6IHN0cmluZztcbiAgZWFjaDogc3RyaW5nO1xuICBjb250ZXh0OiBzdHJpbmc7XG4gIHJlbmRlckNvbmRpdGlvbjogc3RyaW5nO1xuICB1aUhhbmRsZXI6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBzdGFuZGFsb25lOiBzdHJpbmc7XG5cbiAgcmljaFVJSGFuZGxlckVsZW1lbnQ6IHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG4gIH07XG4gIHJpY2hUYWJsZXM6IHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG4gIH07XG4gIHJpY2hDb250YWluZXJzOiB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xuICB9O1xuICByaWNoQ2xhc3Nlczoge1xuICAgIFtrZXk6IHN0cmluZ106IHN0cmluZztcbiAgfTtcbiAgcmljaEN1c3RvbXM6IHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG4gIH07XG59XG5cbmRlY2xhcmUgbW9kdWxlICdzbGF0ZScge1xuICBpbnRlcmZhY2UgQ3VzdG9tVHlwZXMge1xuICAgIEVkaXRvcjogQmFzZUVkaXRvciAmIFJlYWN0RWRpdG9yO1xuICAgIEVsZW1lbnQ6IFJpY2hFbGVtZW50O1xuICAgIFRleHQ6IElUZXh0O1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNsYXRlRmlsZSB7XG4gIC8qKlxuICogdGhlIG5hbWUgb2YgdGhlIGZpbGVcbiAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgbWltZSB0eXBlXG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBhbiB1bmlxdWUgaWRcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiB0aGUgdXJsIHdoZXJlIGl0IGlzIHN0b3JlZFxuICAgKi9cbiAgdXJsOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgc2l6ZSBvZiB0aGUgZmlsZSBpbiBieXRlc1xuICAgKi9cbiAgc2l6ZTogbnVtYmVyO1xuICAvKipcbiAgICogb3B0aW9uYWwgbWV0YWRhdGEsIG1pZ2h0IGJlIG51bGwsIHVzdWFsbHkgY29uc3RhaW5zIHdpZHRoIGFuZFxuICAgKiBoZWlnaHQsIHNldCBieSB0aGUgY2xpZW50LCBpcyBsaW1pdGVkIHRvIDEyOCBjaGFyYWN0ZXJzXG4gICAqIFxuICAgKiBlbmNvZGluZyBpcyBXeEg7bmFtZSxuYW1lLG5hbWUgYXMgbWFueSBuYW1lcyBhcyB0aGVyZSBhcmUgc3BlY2lhbFxuICAgKiBkaW1lbnNpb25zLCBsYXJnZSwgc21hbGwgYW5kIG1lZGl1bSBkbyBub3QgY291bnRcbiAgICovXG4gIG1ldGFkYXRhOiBzdHJpbmcsXG4gIC8qKlxuICAgKiBBIHNvdXJjZSwgZWl0aGVyIGEgRmlsZSBvciBCbG9iXG4gICAqL1xuICBzcmM/OiBGaWxlIHwgQmxvYjtcbn07XG5cbi8qKlxuICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIGZpbGUgdGhhdCBoYXMganVzdCBiZWVuIGluc2VydGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVNsYXRlSW5zZXJ0ZWRGaWxlSW5mb3JtYXRpb25UeXBlIHtcbiAgLyoqXG4gICAqIFRoZSBmaWxlIGl0c2VsZlxuICAgKi9cbiAgcmVzdWx0OiBJU2xhdGVGaWxlO1xuICAvKipcbiAgICogd2lkdGggb2YgdGhlIGZpbGUsIG9ubHkgYXZhaWxhYmxlIGlmIGl0J3MgYW4gaW1hZ2VcbiAgICovXG4gIHdpZHRoOiBudW1iZXI7XG4gIC8qKlxuICAgKiBoZWlnaHQgb2YgdGhlIGZpbGUsIG9ubHkgYXZhaWxhYmxlIGlmIGl0J3MgYW4gaW1hZ2VcbiAgICovXG4gIGhlaWdodDogbnVtYmVyO1xuICAvKipcbiAgICogd2hldGhlciBpdCBpcyBhbiBpbWFnZVxuICAgKi9cbiAgaXNJbWFnZTogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBVc2VkIHdpdGhpbiBjb250ZXh0cyB3aXRoIGxvb3AgZW11bGF0aW9uIHRvIGRpc2FibGUgdGhlIGVsZW1lbnQgd3JhcHBlciB0byBkaXNwbGF5IGluIGFsbFxuICogYnV0IHRoZSBsYXN0IGVsZW1lbnRcbiAqL1xuY29uc3QgRWxlbWVudFdyYXBwZXJEaXNhYmxlciA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoZmFsc2UpO1xuXG5mdW5jdGlvbiBmaW5kTGFzdEluZGV4KGFycjogYW55W10sIGZuOiAoZWxlOiBhbnkpID0+IGJvb2xlYW4pIHtcbiAgbGV0IGN1cnJlbnRJbmRleCA9IGFyci5sZW5ndGg7XG4gIHdoaWxlIChjdXJyZW50SW5kZXgtLSkge1xuICAgIGlmIChmbihhcnJbY3VycmVudEluZGV4XSkpIHtcbiAgICAgIHJldHVybiBjdXJyZW50SW5kZXg7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xO1xufVxuXG4vLyBmb3Igc29tZSByZWFzb24gZGVzcGl0ZSB0aGVyZSBiZWluZyBhIHNpbmdsZSBjbGFzcyBhbmQgd2l0aCBjZXJ0YWludHlcbi8vIHdoZW4gdGhlIGZvY3VzQXQgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgdGhlIG9uRm9jdXMgZnVuY3Rpb24gZ2V0cyBleGVjdXRlZCB3aXRoXG4vLyB0aGUgcHJldmlvdXMgdmFsdWVzIGZvciB0aGUgaW5zdGFuY2UgaW4gYSB3YXkgdGhhdCBtYWtlcyB6ZXJvIHNlbnNlXG4vLyBzb21lIG9wdGltaXphdGlvbiB0aGluZ3MgYXJlIGdvaW5nIG9uIGZyb20gdGhlIGJyb3dzZXJcbi8vIFRoaXMgb25seSBvY2N1cnMgaW4gQ2hyb21lLi4uLiBzbyBpdCBpcyByZWxhdGVkIHRvIGNocm9tZVxuLy8gbGV0IHByZXZlbnROZXh0Rm9jdXMgPSBmYWxzZTtcblxuLy8gZnVuY3Rpb24gcHJldmVudEZvY3VzKCkge1xuLy8gICBwcmV2ZW50TmV4dEZvY3VzID0gdHJ1ZTtcbi8vICAgc2V0VGltZW91dCgoKSA9PiB7XG4vLyAgICAgcHJldmVudE5leHRGb2N1cyA9IGZhbHNlO1xuLy8gICB9LCAzMDApO1xuLy8gfVxuXG4vLyBTbGF0ZSBpcyBidWdneSByZWdhcmRpbmcgc2hpZnQrdGFiXG4vLyByZW1vdmUgd2hlbiBzaGlmdCt0YWIgaXMgZml4ZWRcbmNvbnN0IEVESVRPUl9QT09MID0gbmV3IE1hcDxIVE1MRWxlbWVudCwgU2xhdGVFZGl0b3I+KCk7XG5cbi8vIGJ1Z2d5IHRvIHJlcGFpciBpdCBub3QgZm9jdXNpbmcgd2hlbiBpdCBzaG91bGQgYW5kIGtlZXBpbmcgZm9jdXMgd2hlbiBpdCBzaG91bGRuJ3Rcbi8vIGZvciBib3RoIHRhYiBhbmQgc2hpZnQgdGFiXG5mdW5jdGlvbiBvbkFueVRhYihldjogS2V5Ym9hcmRFdmVudCkge1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBjb25zdCBlZGl0b3JFbGVtZW50ID0gRURJVE9SX1BPT0wuZ2V0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgYW55KTtcbiAgICBFRElUT1JfUE9PTC5mb3JFYWNoKChlKSA9PiBlICE9PSBlZGl0b3JFbGVtZW50ICYmIGUuc2VsZWN0aXZlSGFyZEJsdXJJZkhhc1NlbGVjdGVkRWxlbWVudChldiwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ID9cbiAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgOiBudWxsKSk7XG4gICAgaWYgKGVkaXRvckVsZW1lbnQpIHtcbiAgICAgIC8vIG1heWJlIGEgd2F5IHRvIGtlZXAgdGhlIGN1cnNvciB3aGVyZSBpdCB3YXM/Li4uLlxuICAgICAgLy8gaXQncyBraW5kIG9mIGFubm95aW5nIHRoYXQgdGhlIGN1cnNvciBtb3Zlc1xuICAgICAgZWRpdG9yRWxlbWVudC5mb3JjZUZvY3VzKCk7XG4gICAgfVxuICB9LCA3MCk7XG59XG5cbi8vIHdoYXQncyB3b3JzZSBzb21ldGltZXMgaXQgcmV0YWlucyBmb2N1cyB3aGVuIGl0IHNob3VsZG4ndFxuXG5pZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIlRhYlwiKSB7XG4gICAgICBvbkFueVRhYihlKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIENvbWJpbmUgYm90aCBpbnRlcmZhY2VzXG4gKi9cbmludGVyZmFjZSBJdGVtaXplRWRpdG9yIGV4dGVuZHMgUmVhY3RFZGl0b3IsIEhpc3RvcnlFZGl0b3IgeyB9O1xuXG4vKipcbiAqIFRoZSB1aSBoYW5kbGVyIHByb3BzIHRoYXQgYW4gdWkgaGFuZGxlciB0YWtlc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElTbGF0ZVRlbXBsYXRlVUlIYW5kbGVyUHJvcHMgZXh0ZW5kcyBJVUlIYW5kbGVyUHJvcHMge1xuICAvKipcbiAgICogV2hldGhlciBpdCBpcyBjdXJyZW50bHkgaW50byBhbiBzbGF0ZSBpbnN0YW5jZVxuICAgKi9cbiAgaXNTbGF0ZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSBhdHRyaWJ1dGVzIHRoYXQgc2xhdGUgcHJvdmlkZXNcbiAgICovXG4gIGF0dHJpYnV0ZXM6IGFueTtcbiAgLyoqXG4gICAqIFRoZSBoZWxwZXJzIHRoYXQgbWlnaHQgYmUgcHJvdmlkZWQgaWYgdGhlIGhhbmRsZXJcbiAgICogcmVxdWVzdHMgZXh0cmEgaW5mb1xuICAgKi9cbiAgaGVscGVycz86IElIZWxwZXJGdW5jdGlvbnM7XG4gIC8qKlxuICAgKiBUaGUgc2VsZWN0ZWQgc3RhdGUgdGhhdCBtaWdodCBiZSBwcm92aWRlZCBpZiB0aGUgaGFuZGxlclxuICAgKiByZXF1ZXN0cyBleHRyYSBpbmZvXG4gICAqL1xuICBzZWxlY3RlZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhbiBhdmFpbGFibGUgZWxlbWVudCwgdXNlZCBpbnRlcm5hbGx5XG4gKiBmb3IgdGhlIGNsYXNzZXMgdGhhdCBhcmUgYXZhaWxhYmxlIGZvciB1c2FnZSBvbiByaWNoXG4gKiBjbGFzc2VzLCBjb250YWluZXIsIGFuZCBzbyBvbi4uLlxuICovXG5pbnRlcmZhY2UgSUF2YWlsYWJsZUVsZW1lbnRDU1NDbGFzc05hbWUge1xuICAvKipcbiAgICogVGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBhdmFpbGFibGUgZWxlbWVudFxuICAgKi9cbiAgdmFsdWU6IHN0cmluZztcbiAgLyoqXG4gICAqIEEgaHVtYW4gcmVhZGFibGUgdmFsdWUsIGV4dHJhY3RlZCBmcm9tIHRoZSByb290XG4gICAqIGkxOG4gZGF0YSB3aXRoIHRoZSBzYW1lIGNsYXNzIG5hbWVcbiAgICogZm9yIHRoZSBnaXZlbiBjdXJyZW50IGxhbmd1YWdlLCBpdCBpcyB1c3VhbGx5IHN1YmNsYXNzZWRcbiAgICogaW50byBzZXZlcmFsIHN1YmNvbnRhaW5lcnMgaW4gdGhlIHJvb3QgaW5mb3JtYXRpb24gZ2l2ZW5cbiAgICogXG4gICAqIHJpY2g6IGZvciByaWNoIHRleHQgY2xhc3Nlc1xuICAgKiBjb250YWluZXJzOiBmb3IgY29udGFpbmVyc1xuICAgKiBjdXN0b206IGZvciBjdXN0b21cbiAgICogXG4gICAqIGVnLiBjb250YWluZXItbWF4aW11bSBhcyBhIGNsYXNzIG5hbWUsIGlzIHJlZmVycmVkIGFzXG4gICAqIG1heGltdW0gYXMgdGhlIGNvbnRhbmVyIHR5cGUsIHNvIGl0IHdpbGwgbG9vayBmb3IgY29udGFpbmVycy5tYXhpbXVtXG4gICAqIGluIHRoZSBwcm9wZXJ0aWVzIGZpbGUgb24gdGhlIGdpdmVuIGxhbmd1YWdlIGZvciBhIGdpdmVuIGxhYmVsXG4gICAqIFxuICAgKiBlZy4gcmljaC10ZXh0LS11bHRyYS1tZWdhLWJvbGQgaXMgcmVmZXJyZWQgYXMgdGhlIHVsdHJhLW1lZ2EtYm9sZFxuICAgKiByaWNoIGNsYXNzLCBzbyBpdCB3aWxsIGxvb2sgZm9yIHJpY2gudWx0cmEtbWVnYS1ib2xkIG9yIHJpY2gudWx0cmFfbWVnYV9ib2xkXG4gICAqIGluIHRoZSBwcm9wZXJ0aWVzIGZpbGVcbiAgICovXG4gIGxhYmVsOiBzdHJpbmc7XG59XG5cbi8vIFdlIG5lZWQgdG8gZmluZCBhbGwgdGhlIGNvbnRhaW5lcnMsIGN1c3RvbSBjbGFzc2VzIGFuZCByaWNoIGNsYXNzZXNcbi8vIHdlIGhhdmUgYXZhaWxhYmxlIGJ5IGRlZmF1bHQgYW5kIHRoYXQgY2FuIGJlIHVzZWQgaW5zaWRlIHRoZSBpdGVtaXplXG4vLyBhcHBsaWNhdGlvbiwgc28gd2UgdXNlIHRoZXNlIGhlbHBlciB2YXJpYWJsZXNcbi8vIHRoYXQgZXhpc3RzIG9ubHkgaGVyZSBpbnNpZGUgdGhpcyBtb2R1bGVcblxuLyoqXG4gKiBBbGwgdGhlIGNvbnRhaW5lcnMgdGhhdCB3ZSBjb3VsZCBmaW5kIHNvIGZhclxuICogQGlnbm9yZVxuICovXG5sZXQgQUxMX0NPTlRBSU5FUlM6IHN0cmluZ1tdID0gW107XG4vKipcbiAqIEFsbCB0aGUgdGFibGVzIHRoYXQgd2UgY291bGQgZmluZCBzbyBmYXJcbiAqIEBpZ25vcmVcbiAqL1xubGV0IEFMTF9UQUJMRVM6IHN0cmluZ1tdID0gW107XG4vKipcbiAqIEFsbCB0aGUgY3VzdG9tIGNsYXNzZXMgdGhhdCB3ZSBjb3VsZCBmaW5kIHNvIGZhclxuICogQGlnbm9yZVxuICovXG5sZXQgQUxMX0NVU1RPTTogc3RyaW5nW10gPSBbXTtcbi8qKlxuICogQWxsIHRoZSByaWNoIGNsYXNzZXMgdGhhdCB3ZSBjb3VsZCBmaW5kIHNvIGZhclxuICogQGlnbm9yZVxuICovXG5sZXQgQUxMX1JJQ0hfQ0xBU1NFUzogc3RyaW5nW10gPSBbXTtcbi8qKlxuICogV2hldGhlciB3ZSBoYXZlIGxvYWRlZCBhbGwgdGhlc2UgdmFyaWFibGVzXG4gKiBAaWdub3JlXG4gKi9cbmxldCBBTExfSVNfTE9BREVEOiBib29sZWFuID0gZmFsc2U7XG5cbi8qKlxuICogV2l0aCBhIGdpdmVuIHN0eWxlc2hlZXQgdGhhdCBpcyBwYXNzZWQgaW5zaWRlIHRoZSBzdHlsZXNoZWV0IHZhcmlhYmxlXG4gKiBzZXQsIGl0IHdpbGwgdXNlIGl0IHRvIGZpbmQgdGhlIGdpdmVuIGNsYXNzIG5hbWVzIHRoYXQgYXJlIGF2YWlsYWJsZVxuICogZm9yIHVzYWdlIHdpdGhpbiB0aGUgcmljaCB0ZXh0IGVkaXRvciBhbmQgYWRkIGl0IHRvIHRoZSByZWdpc3RyeVxuICogQHBhcmFtIHN0eWxlc2hlZXQgdGhlIHN0eWxlc2hlZXQgdG8gY2FsY3VsYXRlXG4gKiBAaWdub3JlXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZVN0eWxlc2hlZXQoc3R5bGVzaGVldDogQ1NTU3R5bGVTaGVldCB8IENTU01lZGlhUnVsZSkge1xuICAvLyBzbyBmaXJzdCB3ZSBzcGxpdCB3aXRoaW4gdGhlIHJ1bGVzXG4gIEFycmF5LmZyb20oc3R5bGVzaGVldC5jc3NSdWxlcykuZm9yRWFjaCgocikgPT4ge1xuICAgIGlmIChyIGluc3RhbmNlb2YgQ1NTTWVkaWFSdWxlIHx8IChyIGFzIGFueSkuY3NzUnVsZXMpIHtcbiAgICAgIGNhbGN1bGF0ZVN0eWxlc2hlZXQociBhcyBDU1NNZWRpYVJ1bGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFuZCBub3cgd2UgbmVlZCB0aGUgc2VsZWN0b3IgcGFydCB0aGF0IHNlbGVjdHMsIGFuZCBzcGxpdCBpdCBzbyB3ZSBoYXZlXG4gICAgLy8gc29tZXRoaW5nIGxpa2UgW1wiLnRydXN0ZWRcIiwgXCIucmljaC10ZXh0LS1zb21ldGhpbmdcIl1cbiAgICAvLyBzZWxlY3RvclRleHQgaXMgc3VwcG9ydGVkIGluIGNocm9taXVtIGJhc2VkIGJyb3dzZXJzIGJ1dCBub3QgYWxsLCBzbyB3ZSBoYXZlIGEgbW9yZSBleHBlbnNpdmVcbiAgICAvLyBmYWxsYmFjayBpbiBwbGFjZSBmb3IgdGhhdFxuICAgIGNvbnN0IHNlbGVjdG9yU3BsaXR0ZWQgPSAoKHIgYXMgYW55KS5zZWxlY3RvclRleHQgYXMgc3RyaW5nIHx8IHIuY3NzVGV4dC5zcGxpdChcIntcIilbMF0udHJpbSgpKS5zcGxpdChcIiBcIik7XG5cbiAgICAvLyBub3cgd2UgdGFrZSB0aGF0IHNlbGVjdGlvbiwgd2UgYXJlIG9ubHkgY29uY2VybmVkIHdpdGggdGhlIGNsYXNzZXNcbiAgICAvLyB0aGF0IG1hdGNoIG91ciBwcmVmaXhlZCB0aGluZ3NcbiAgICBzZWxlY3RvclNwbGl0dGVkLmZvckVhY2goKHNiYXNlKSA9PiB7XG4gICAgICBsZXQgaW50ZXJuYWxTZWxlY3RvclNwbGl0dGVkID0gc2Jhc2Uuc3BsaXQoXCIuXCIpO1xuICAgICAgaW50ZXJuYWxTZWxlY3RvclNwbGl0dGVkLnNoaWZ0KCk7XG5cbiAgICAgIGludGVybmFsU2VsZWN0b3JTcGxpdHRlZC5mb3JFYWNoKChzKSA9PiB7XG4gICAgICAgIC8vIG5vdyB3ZSB0YWtlIHRoZSBjbGFzcyBuYW1lXG4gICAgICAgIGxldCBjbGFzc05hbWUgPSBzO1xuICAgICAgICBpZiAoY2xhc3NOYW1lLmluY2x1ZGVzKFwiOlwiKSkge1xuICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zcGxpdChcIjpcIilbMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsYXNzTmFtZS5lbmRzV2l0aChcIixcIikpIHtcbiAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3Vic3RyKDAsIGNsYXNzTmFtZS5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFuZCB3ZSBjaGVjayB3aGV0aGVyIGl0IG1hdGNoZXMgYW55IG9mIG91ciBwcmVmaXhlcyB0aGF0XG4gICAgICAgIC8vIG1ha2UgaXQgYSB2YWxpZCBjbGFzcyBvZiB0aGUgZ2l2ZW4gdHlwZVxuICAgICAgICBpZiAoY2xhc3NOYW1lLnN0YXJ0c1dpdGgoQ09OVEFJTkVSX0NMQVNTX1BSRUZJWCkpIHtcbiAgICAgICAgICBjb25zdCB0b1B1c2ggPSBjbGFzc05hbWUuc3Vic3RyKENPTlRBSU5FUl9DTEFTU19QUkVGSVgubGVuZ3RoKTtcbiAgICAgICAgICBpZiAoIUFMTF9DT05UQUlORVJTLmluY2x1ZGVzKHRvUHVzaCkpIHtcbiAgICAgICAgICAgIEFMTF9DT05UQUlORVJTLnB1c2godG9QdXNoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lLnN0YXJ0c1dpdGgoVEFCTEVfQ0xBU1NfUFJFRklYKSkge1xuICAgICAgICAgIGNvbnN0IHRvUHVzaCA9IGNsYXNzTmFtZS5zdWJzdHIoVEFCTEVfQ0xBU1NfUFJFRklYLmxlbmd0aCk7XG4gICAgICAgICAgaWYgKCFBTExfVEFCTEVTLmluY2x1ZGVzKHRvUHVzaCkpIHtcbiAgICAgICAgICAgIEFMTF9UQUJMRVMucHVzaCh0b1B1c2gpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChjbGFzc05hbWUuc3RhcnRzV2l0aChDVVNUT01fQ0xBU1NfUFJFRklYKSkge1xuICAgICAgICAgIGNvbnN0IHRvUHVzaCA9IGNsYXNzTmFtZS5zdWJzdHIoQ1VTVE9NX0NMQVNTX1BSRUZJWC5sZW5ndGgpO1xuICAgICAgICAgIGlmICghQUxMX0NVU1RPTS5pbmNsdWRlcyh0b1B1c2gpKSB7XG4gICAgICAgICAgICBBTExfQ1VTVE9NLnB1c2godG9QdXNoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lLnN0YXJ0c1dpdGgoUklDSF9URVhUX0NMQVNTX1BSRUZJWCkpIHtcbiAgICAgICAgICBjb25zdCB0b1B1c2ggPSBjbGFzc05hbWUuc3Vic3RyKFJJQ0hfVEVYVF9DTEFTU19QUkVGSVgubGVuZ3RoKTtcbiAgICAgICAgICBpZiAoIUFMTF9SSUNIX0NMQVNTRVMuaW5jbHVkZXModG9QdXNoKSkge1xuICAgICAgICAgICAgQUxMX1JJQ0hfQ0xBU1NFUy5wdXNoKHRvUHVzaCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogd2UgYXJlIGdvaW5nIHRvIGJ1aWxkIGEgcHJvbWlzZVxuICogZm9yIHJldHJpZXZpbmcgdGhlIGF2YWlsYWJsZSBjbGFzc2VzIGZvciB0aGUgcmljaFxuICogdGV4dCBlZGl0b3JcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgQUxMX1BST01JU0UgPSBuZXcgUHJvbWlzZTx2b2lkPihhc3luYyAocmVzb2x2ZSkgPT4ge1xuICAvLyBpZiB3ZSBhcmUgYWxyZWFkeSBsb2FkZWQgdGhlbiB3ZSBhcmUgZG9uZVxuICBpZiAoQUxMX0lTX0xPQURFRCkge1xuICAgIHJlc29sdmUoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNvbnN0IHN0eWxlc2hlZXRIcmVmUHJlZml4ID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0ICsgXCIvcmVzdC9yZXNvdXJjZS9idWlsZFwiO1xuICAgIC8vIG5vdyB3ZSBnb3QgdG8gc2VlIGlmIGJ5IHRoZSB0aW1lIHRoaXMgcHJvbWlzZSBpcyBydW5uaW5nXG4gICAgLy8gaXQgaXMgYWxyZWFkeSBkb25lIGxvYWRpbmdcbiAgICBjb25zdCBmb3VuZFByZWxvYWRlZFN0eWxlc2hlZXQgPVxuICAgICAgZG9jdW1lbnQuc3R5bGVTaGVldHMgJiYgQXJyYXkuZnJvbShkb2N1bWVudC5zdHlsZVNoZWV0cykuZmluZCgocykgPT4gcy5ocmVmICYmIHMuaHJlZi5zdGFydHNXaXRoKHN0eWxlc2hlZXRIcmVmUHJlZml4KSk7XG5cbiAgICAvLyBpZiB3ZSBmaW5kIGl0IGFuZCB1c2UgaXQgdG8gY2FsY3VsYXRlIGl0XG4gICAgaWYgKGZvdW5kUHJlbG9hZGVkU3R5bGVzaGVldCkge1xuICAgICAgQUxMX0lTX0xPQURFRCA9IHRydWU7XG4gICAgICBjYWxjdWxhdGVTdHlsZXNoZWV0KGZvdW5kUHJlbG9hZGVkU3R5bGVzaGVldCk7XG4gICAgICByZXNvbHZlKCk7XG5cbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBsaW5rIHRvIGxvYWRcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYWxsTGlua3MgPSBkb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaW5rXCIpO1xuICAgICAgY29uc3QgZm91bmRTdHlsZXNoZWV0Tm9kZSA9IEFycmF5LmZyb20oYWxsTGlua3MpLmZpbmQoKHMpID0+IHMuaHJlZi5zdGFydHNXaXRoKHN0eWxlc2hlZXRIcmVmUHJlZml4KSk7XG5cbiAgICAgIC8vIGlmIHdlIGRvbid0IGZpbmQgYSBiYXNlIGNzcyBidWlsZCwgdGhlbiB3ZSBtYXJrIGl0IGFzIGRvbmVcbiAgICAgIGlmICghZm91bmRTdHlsZXNoZWV0Tm9kZSkge1xuICAgICAgICBBTExfSVNfTE9BREVEID0gdHJ1ZTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIHNldCB1cCBhIG9ubG9hZCBjYWxsYmFja1xuICAgICAgICBmb3VuZFN0eWxlc2hlZXROb2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgICAgICAgICAvLyBhbmQgb25jZSB3ZSBhcmUgbG9hZGVkIHdlIHdhbnQgdG8gZ3JhYiB0aGUgY3NzIHN0eWxlc2hlZXRcbiAgICAgICAgICBjb25zdCBmb3VuZExvYWRlZFN0eWxlU2hlZXQgPVxuICAgICAgICAgICAgZG9jdW1lbnQuc3R5bGVTaGVldHMgJiZcbiAgICAgICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQuc3R5bGVTaGVldHMpLmZpbmQoKHMpID0+IHMuaHJlZiAmJiBzLmhyZWYuc3RhcnRzV2l0aChzdHlsZXNoZWV0SHJlZlByZWZpeCkpO1xuICAgICAgICAgIC8vIG1hcmsgaXQgYXMgbG9hZGVkXG4gICAgICAgICAgQUxMX0lTX0xPQURFRCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBwcm9jZXNzIGl0XG4gICAgICAgICAgaWYgKGZvdW5kTG9hZGVkU3R5bGVTaGVldCkge1xuICAgICAgICAgICAgY2FsY3VsYXRlU3R5bGVzaGVldChmb3VuZExvYWRlZFN0eWxlU2hlZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBhbmQgcmVzb2x2ZVxuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGV4dGVuZGVkIHNldCBvZiB0aGUgZmVhdHVyZXMgdGhhdCB0aGUgZWRpdG9yIHN1cHBvcnRzXG4gKiB3aXRoIGEgbG90IG1vcmUgb2YgY29udGV4dHVhbCBpbmZvcm1hdGlvbiBvbiB3aGF0IGl0IGhhcyBpbiBwbGFjZVxuICogZm9yIHN1Y2hcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQWNjZXNzaWJsZUZlYXR1cmVTdXBwb3J0T3B0aW9ucyBleHRlbmRzIElGZWF0dXJlU3VwcG9ydE9wdGlvbnMge1xuICAvKipcbiAgICogVGhlIGNsYXNzZXMgdGhhdCBhcmUgYXZhaWxhYmxlIGJ5IHRoZSByaWNoIHRleHRcbiAgICogbm9uIHByZWZpeGVkXG4gICAqL1xuICBhdmFpbGFibGVSaWNoQ2xhc3NlczogSUF2YWlsYWJsZUVsZW1lbnRDU1NDbGFzc05hbWVbXTtcbiAgLyoqXG4gICAqIFRoZSBjdXN0b21zIHRoYXQgYXJlIGF2YWlsYWJsZVxuICAgKi9cbiAgYXZhaWxhYmxlQ3VzdG9tczogSUF2YWlsYWJsZUVsZW1lbnRDU1NDbGFzc05hbWVbXTtcbiAgLyoqXG4gICAqIFRoZSBjbGFzc2VzIHRoYXQgYXJlIGF2YWlsYWJsZSBmb3IgdGhlIGNvbnRhaW5lcnNcbiAgICovXG4gIGF2YWlsYWJsZUNvbnRhaW5lcnM6IElBdmFpbGFibGVFbGVtZW50Q1NTQ2xhc3NOYW1lW107XG4gIC8qKlxuICAgKiBUaGUgY2xhc3NlcyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHRoZSBjb250YWluZXJzXG4gICAqL1xuICBhdmFpbGFibGVUYWJsZXM6IElBdmFpbGFibGVFbGVtZW50Q1NTQ2xhc3NOYW1lW107XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGJ1bmNoIG9mIGhlbHBlcnMgdGhhdCB3aWxsIGhlbHAgb3V0IGJ1aWxkaW5nXG4gKiB0aGluZ3MgbGlrZSB0b29sYmFycyBvciBhbnl0aGluZyBlbHNlIChha2EuIHRoZSB3cmFwcGVyKVxuICogYXJvdW5kIHRoZSBlZGl0b3JcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJSGVscGVyRnVuY3Rpb25zIHtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIGVkaXRvciBpbnN0YW5jZSBvZiB0aGUgZ2l2ZW5cbiAgICogZWRpdG9yXG4gICAqL1xuICBlZGl0b3I6IEl0ZW1pemVFZGl0b3I7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSByZWFjdCBlZGl0b3IgY2xhc3MgaXRzZWxmXG4gICAqIHByb3ZpZGVkIGJ5IHNsYXRlXG4gICAqL1xuICBSZWFjdEVkaXRvcjogdHlwZW9mIFJlYWN0RWRpdG9yO1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgaGlzdG9yeSBlZGl0b3IgY2xhc3MgaXRzZWxmXG4gICAqIHByb3ZpZGVkIGJ5IHNsYXRlXG4gICAqL1xuICBIaXN0b3J5RWRpdG9yOiB0eXBlb2YgSGlzdG9yeUVkaXRvcjtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHRyYW5zZm9ybXMgY2xhc3MgaXRzZWxmXG4gICAqIHByb3ZpZGVkIGJ5IHNsYXRlXG4gICAqL1xuICBUcmFuc2Zvcm1zOiB0eXBlb2YgVHJhbnNmb3JtcztcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHJhbmdlIGNsYXNzIGl0c2VsZlxuICAgKiBwcm92aWRlZCBieSBzbGF0ZVxuICAgKi9cbiAgUmFuZ2U6IHR5cGVvZiBSYW5nZTtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIG5vZGUgY2xhc3MgaXRzZWxmXG4gICAqL1xuICBOb2RlOiB0eXBlb2YgTm9kZTtcbiAgLyoqXG4gICAqIFRoZSBwYXRoIHR5cGVcbiAgICovXG4gIFBhdGg6IHR5cGVvZiBQYXRoO1xuXG4gIC8qKlxuICAgKiBQcm92aWVzIHRoZSBjb250ZXh0IGZvciB0aGUgZ2l2ZW4gcGF0aFxuICAgKi9cbiAgZ2V0Q29udGV4dEZvcjogKGVsZW1lbnQ6IFJpY2hFbGVtZW50IHwgSVRleHQgfCBQYXRoLCBsZXZlbD86IFwiZmluYWxcIiB8IFwic2VsZWN0LWNvbnRleHRcIiB8IFwic2VsZWN0LWxvb3BcIiwgb25seVN3aWNoaW5nQ29udGV4dD86IGJvb2xlYW4pID0+IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uO1xuICBnZXRSb290Q29udGV4dDogKCkgPT4gSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb247XG4gIGdldFN0YXRlOiAoKSA9PiBJU2xhdGVFZGl0b3JJbnRlcm5hbFN0YXRlVHlwZTtcblxuICAvKipcbiAgICogcGVyZm9ybXMgYSBwc2V1ZG8gc2VsZWN0aW9uIGF0IGEgZ2l2ZW4gcGF0aFxuICAgKiB0aGlzIHNlbGVjdGlvbiBpcyBzaWxlbnQgYW5kIGRvZXMgbm90IGFmZmVjdCBvdGhlciB0aGFuIHRoZSBjdXJyZW50XG4gICAqIHNlbGVjdGVkIHBhdGggYmFzZWQgb24gdGhlIGluZm9ybWF0aW9uLCBpdCBkb2VzIG5vdCBjYXVzZSBhIGNhcmV0XG4gICAqIGNoYW5nZSBvciBhbnl0aGluZyBvZiB0aGUgc29ydHNcbiAgICogQHBhcmFtIHBhdGggdGhlIHBhdGggdG8gc2VsZWN0XG4gICAqL1xuICBzZWxlY3RQYXRoOiAocGF0aDogUGF0aCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogU3dpdGNoZXMgYSBwYXRoIGZyb20gb25lIHBsYWNlIHRvIGFub3RoZXJcbiAgICovXG4gIG1vdmVQYXRoczogKGZyb206IFBhdGgsIHRvOiBQYXRoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBEZWxldGVzIGdpdmVuIGEgcGF0aFxuICAgKi9cbiAgZGVsZXRlUGF0aDogKHBhdGg6IFBhdGgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgdGhlIG5vZGUgYXQgdGhlIHNlbGVjdGVkIHBhdGhcbiAgICovXG4gIGRlbGV0ZVNlbGVjdGVkTm9kZTogKCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogQWxsb3dzIHRvIGtubyB3aGF0IHRoZSBwcmV2aW91cyBzZWxlY3RlZCBlbGVtZW50IHdhc1xuICAgKiBiZWZvcmUgdGhpcyBvbmUgd2FzIHNlbGVjdGVkXG4gICAqL1xuICBnZXRQcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcjogKCkgPT4gUGF0aDtcbiAgLyoqXG4gICAqIEFsbG93cyB0byBrbm8gd2hhdCB0aGUgcHJldmlvdXMgc2VsZWN0ZWQgZWxlbWVudCB3YXNcbiAgICogYmVmb3JlIHRoaXMgb25lIHdhcyBzZWxlY3RlZFxuICAgKi9cbiAgZ2V0UHJldmlvdXNUZXh0QW5jaG9yOiAoKSA9PiBQYXRoO1xuXG4gIC8qKlxuICAgKiBmb2N1c2VzIHRoZSB0ZXh0IGVkaXRvclxuICAgKi9cbiAgZm9jdXM6ICgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBGb2N1c2VzIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uXG4gICAqIEBwYXJhbSBhdCB0aGUgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqL1xuICBmb2N1c0F0OiAoYXQ6IFJhbmdlIHwgUGF0aCkgPT4gUHJvbWlzZTx2b2lkPjtcblxuICAvKipcbiAgICogaW5zZXJ0cyBhIHN1cGVyIGJyZWFrIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiBpbiBvcmRlclxuICAgKiB0byBhZGQgYSBwYXJhZ3JhcGhcbiAgICovXG4gIGluc2VydFN1cGVyYnJlYWs6IChhdD86IFBhdGgsIHJldmVyc2U/OiBib29sZWFuKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBXaWxsIGluc2VydCBhbiBpbWFnZSBiYXNlZCBvbiBhIGdpdmVuIGZpbGUgdGhhdCBoYXNcbiAgICogYmVlbiB0YWtlbiBhcyBhbiBpbnB1dFxuICAgKiBAcGFyYW0gZmlsZSB0aGUgZmlsZVxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqIEBwYXJhbSBzdGFuZGFsb25lIHdoZXRoZXIgdG8gbWFrZSBpdCBhIHN0YW5kYWxvbmUgaW1hZ2VcbiAgICovXG4gIGluc2VydEltYWdlOiAoZmlsZTogRmlsZSwgc3RhbmRhbG9uZTogYm9vbGVhbikgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGEgdmlkZW8gZ2l2ZW4gdGhlIGluZm9ybWF0aW9uXG4gICAqIEBwYXJhbSB1cmwgdGhlIHVybCBvZiB0aGUgdmlkZW8sIG9ubHkgeW91dHViZSBhbmQgdmltZW8gc3VwcG9ydGVkIGFzIG9yaWdpblxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqIEByZXR1cm5zIGEgYm9vbGVhbiB0cnVlIGlmIHRoZSB2aWRlbyB3YXMgcHJvcGVybHkgaW5zZXJ0ZWQsIGZhbHNlIGlmIHRoZSB2aWRlbyB1cmwgd2FzIGludmFsaWRcbiAgICovXG4gIGluc2VydFZpZGVvOiAodXJsOiBzdHJpbmcpID0+IGJvb2xlYW47XG4gIHVwZGF0ZVZpZGVvOiAodXJsOiBzdHJpbmcpID0+IGJvb2xlYW47XG4gIC8qKlxuICAgKiBXaWxsIGluc2VydCBhIGZpbGUgYmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIGdpdmVuXG4gICAqIEBwYXJhbSBmaWxlIHRoZSBmaWxlIHRvIGluc2VydFxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqL1xuICBpbnNlcnRGaWxlOiAoZmlsZTogRmlsZSkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGEgY29udGFpbmVyIGF0IHRoZSBnaXZlbiBsb2NhdGlvblxuICAgKiBAcGFyYW0gdHlwZSBvcHRpb25hbCwgdGhlIGNvbnRhaW5lciB0eXBlLCBvdGhlcndpc2Ugd2lsbFxuICAgKiBpbnNlcnQgYSBzdGFuZGFyZCBjb250YWluZXJcbiAgICogdGhpcyBpcyBjYXJldCBiYXNlZCB1bmxlc3MgeW91IHNwZWNpZnkgeW91ciBvd24gY3VzdG9tIHJhbmdlXG4gICAqIG5vdGUgdGhhdCBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2lsbCBjYXVzZSBhIHJlZm9jdXNcbiAgICogQHBhcmFtIHR5cGUgdGhlIGNvbnRhaW5lciB0eXBlXG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZSB0byBpbnNlcnQgYXRcbiAgICovXG4gIGluc2VydENvbnRhaW5lcjogKHR5cGU/OiBzdHJpbmcpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgY3VzdG9tIGVsZW1lbnRcbiAgICogdGhpcyBpcyBjYXJldCBiYXNlZCB1bmxlc3MgeW91IHNwZWNpZnkgeW91ciBvd24gY3VzdG9tIHJhbmdlXG4gICAqIG5vdGUgdGhhdCBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2lsbCBjYXVzZSBhIHJlZm9jdXNcbiAgICogQHBhcmFtIHR5cGUgdGhlIGN1c3RvbSB0eXBlXG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZSB0byBpbnNlcnQgYXRcbiAgICovXG4gIGluc2VydEN1c3RvbTogKHR5cGU6IHN0cmluZykgPT4gdm9pZDtcbiAgLyoqXG4gICAqIEluc2VydHMgYSB0ZW1wbGF0ZSB0ZXh0XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqIEBwYXJhbSBsYWJlbCB0aGUgbGFiZWwgdG8gdXNlIGZvciB0aGUgdGVtcGxhdGUgdGV4dFxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIGFjdHVhbCB2YWx1ZSBmb3IgdGhlIHRlbXBsYXRlIHRleHQgdG8gYmUgdXNlZCBvZmYgdGhlIGNvbnRleHRcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKi9cbiAgaW5zZXJ0VGVtcGxhdGVUZXh0OiAobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgdXBkYXRlVGVtcGxhdGVUZXh0OiAobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgLyoqXG4gICAqIEluc2VydHMgYSB0ZW1wbGF0ZSBodG1sIGZyYWdtZW50XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqIEBwYXJhbSBsYWJlbCB0aGUgbGFiZWwgdG8gdXNlIGZvciB0aGUgdGVtcGxhdGUgaHRtbFxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIGFjdHVhbCB2YWx1ZSBmb3IgdGhlIHRlbXBsYXRlIGh0bWwgdG8gYmUgdXNlZCBvZmYgdGhlIGNvbnRleHRcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKi9cbiAgaW5zZXJ0VGVtcGxhdGVIVE1MOiAobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgdXBkYXRlVGVtcGxhdGVIVE1MOiAobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4gdm9pZDtcblxuICAvKipcbiAgICogSW5zZXJ0cyBhbiBlbGVtZW50IGF0IHRoZSBnaXZlbiBwb3NpdGlvblxuICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgZWxlbWVudCB0byBpbnNlcnRcbiAgICogQHBhcmFtIGF0IG9wdGlvbmFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKi9cbiAgaW5zZXJ0RWxlbWVudDogKGVsZW1lbnQ6IFJpY2hFbGVtZW50KSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgdGFibGUgYXQgdGhlIGdpdmVuIGxvY2F0aW9uXG4gICAqL1xuICBpbnNlcnRUYWJsZTogKHRhYmxlVHlwZTogc3RyaW5nKSA9PiB2b2lkO1xuICBpbnNlcnRUYWJsZUNvbHVtbjogKCkgPT4gdm9pZDtcbiAgaW5zZXJ0VGFibGVSb3c6ICgpID0+IHZvaWQ7XG4gIGRlbGV0ZVRhYmxlQ29sdW1uOiAoKSA9PiB2b2lkO1xuICBkZWxldGVUYWJsZVJvdzogKCkgPT4gdm9pZDtcbiAgdG9nZ2xlVGFibGU6IChlbGVtZW50OiBcInRoZWFkXCIgfCBcInRmb290XCIpID0+IHZvaWQ7XG4gIGNhblRvZ2dsZVRhYmxlOiAoZWxlbWVudDogXCJ0aGVhZFwiIHwgXCJ0Zm9vdFwiKSA9PiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBNYWtlcyBhIHF1b3RlIG91dCBvZiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqL1xuICB0b2dnbGVRdW90ZTogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIE1ha2VzIGEgdGl0bGUgb3V0IG9mIHRoZSBjdXJyZW50IGVsZW1lbnRcbiAgICogdGhpcyBpcyBjYXJldCBiYXNlZCB1bmxlc3MgeW91IHNwZWNpZnkgeW91ciBvd24gY3VzdG9tIHJhbmdlXG4gICAqIG5vdGUgdGhhdCBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2lsbCBjYXVzZSBhIHJlZm9jdXNcbiAgICovXG4gIHRvZ2dsZVRpdGxlOiAodHlwZTogXCJoMVwiIHwgXCJoMlwiIHwgXCJoM1wiIHwgXCJoNFwiIHwgXCJoNVwiIHwgXCJoNlwiKSA9PiB2b2lkO1xuICAvKipcbiAgICogTWFrZXMgYSBsaXN0IG91dCBvZiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqL1xuICBpbnNlcnRMaXN0OiAodHlwZTogXCJidWxsZXRlZFwiIHwgXCJudW1iZXJlZFwiKSA9PiB2b2lkO1xuICAvKipcbiAgICogTWFrZXMgYSBsaW5rIG91dCBvZiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqIEByZXR1cm5zIGEgYm9vbGVhbiBzcGVjaWZ5aW5nIHdoZXRoZXIgdGhlIHRvZ2dsaW5nIHdhcyBzdWNjZXNmdWwgb3IgaXQgZmFpbGVkXG4gICAqIGZvciBzb21lIHJlYXNvbiwgZWcuIGludmFsaWQgbGluaywgbGlua3MgYXJlIG5vdCBzdXBwb3J0ZWRcbiAgICovXG4gIHRvZ2dsZUxpbms6ICh1cmw6IHN0cmluZywgdGVtcGxhdGVWYWx1ZTogc3RyaW5nKSA9PiBib29sZWFuO1xuICB1cGRhdGVMaW5rOiAodXJsOiBzdHJpbmcsIHRlbXBsYXRlVmFsdWU6IHN0cmluZykgPT4gYm9vbGVhbjtcblxuICAvKipcbiAgICogRm9ybWF0cyB0aGUgY3VycmVudCB0ZXh0IGFzIGJvbGRcbiAgICogdGhpcyBpcyBhbHdheXMgY2FyZXQgYmFzZWQgYW5kIGRvZXMgbm90IGFsbG93IGZvciBjdXN0b21cbiAgICogcmFuZ2VzXG4gICAqIEl0IHdpbGwgcmVmb2N1cyBvbmNlIGRvbmVcbiAgICovXG4gIGZvcm1hdFRvZ2dsZTogKHR5cGU6IFwiYm9sZFwiIHwgXCJpdGFsaWNcIiB8IFwidW5kZXJsaW5lXCIpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIGRvZXMgYW4gYXJiaXRyYXJ5IHVwZGF0ZSBvZiBhcmJpdHJhcnkgYXJndW1lbnRzIG9mZiB0aGUgY3VycmVudFxuICAgKiBlbGVtZW50IHZhbHVlLCB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICogQHBhcmFtIGFyZ3MgdGhlIGFyYml0cmFyeSBhcmd1bWVudHMgKHBhcnRpYWwgdmFsdWUpXG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGFuY2hvciB3aGVyZSB0aGUgdXBkYXRlIHNob3VsZCB0YWtlIHBsYWNlIChzaG91bGQgcG9pbnQgYXQgYW4gZWxlbWVudClcbiAgICovXG4gIHNldDogKGFyZ3M6IFBhcnRpYWw8UmljaEVsZW1lbnQ+IHwgUGFydGlhbDxJVGV4dD4sIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCBzdHlsZSBmb3IgdGhlIGVsZW1lbnRcbiAgICogdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWZvY3VzIGFuZCBpdCdzIHNpbGVudCBhbmQgbWVhbnRcbiAgICogZm9yIGluZGlyZWN0IHVzYWdlXG4gICAqL1xuICBzZXRTdHlsZTogKHN0eWxlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFNldHMgdGhlIHRlbXBsYXRlIGhvdmVyIHN0eWxlIGZvciB0aGUgZWxlbWVudFxuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldEhvdmVyU3R5bGU6IChzdHlsZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhY3RpdmUgc3R5bGUgZm9yIHRoZSBlbGVtZW50XG4gICAqIHRoaXMgZnVuY3Rpb24gZG9lcyBub3QgcmVmb2N1cyBhbmQgaXQncyBzaWxlbnQgYW5kIG1lYW50XG4gICAqIGZvciBpbmRpcmVjdCB1c2FnZVxuICAgKi9cbiAgc2V0QWN0aXZlU3R5bGU6IChzdHlsZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb250ZXh0IGtleVxuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldENvbnRleHQ6IChrZXk6IHN0cmluZywgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuICAvKipcbiAgICogU2V0cyB0aGUgaWYgcmVuZGVyIGNvbmRpdGlvblxuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldElmQ29uZGl0aW9uOiAoa2V5OiBzdHJpbmcsIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFNldHMgYW4gVUkgaGFuZGxlciBpbiB0aGUgZ2l2ZW4gYW5jaG9yIHdpdGggdGhlIGdpdmVuIGFyZ3NcbiAgICogdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWZvY3VzIGFuZCBpdCdzIHNpbGVudCBhbmQgbWVhbnRcbiAgICogZm9yIGluZGlyZWN0IHVzYWdlXG4gICAqL1xuICBzZXRVSUhhbmRsZXI6IChrZXk6IHN0cmluZywgYXJnczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSwgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuICAvKipcbiAgICogQWxsb3dzIHRvIHNldCBVSSBoYW5kbGVyIGFyZ3MgaW4gdGhlIHVpIGhhbmRsZXJcbiAgICovXG4gIHNldFVJSGFuZGxlckFyZzogKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBmb3ItZWFjaCBsb29wIGtleVxuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldEZvckVhY2g6IChrZXk6IHN0cmluZywgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuICAvKipcbiAgICogU2V0cyBhbGwgdGhlIHJpY2ggY2xhc3Nlc1xuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldFJpY2hDbGFzc2VzOiAobGlzdDogc3RyaW5nW10sIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFNldHMgYW4gYWN0aW9uIGtleVxuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldEFjdGlvbjogKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgaGFyZCBibHVyLCBhbmQgZXZlbiB0aGUgc2VsZWN0ZWQgcGF0aHMgYXJlIGxvc3RcbiAgICovXG4gIGhhcmRCbHVyOiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogUGVyZm9ybXMgYSBzb2Z0IGJsdXIgZXZlbnRcbiAgICovXG4gIHNvZnRCbHVyOiAoKSA9PiB2b2lkO1xufVxuXG4vKipcbiAqIENvbnRhaW5zIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGVcbiAqIHN0YXRlIG9mIHRoZSBlZGl0b3IgYXMgaXQgaXMgcmlnaHRcbiAqIG5vd1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElTbGF0ZUVkaXRvckludGVybmFsU3RhdGVUeXBlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgaXQgaXMgY3VyZW50bHkgZm9jdXNlZFxuICAgKiB0aGlzIGlzIGEgc3RhdGUgaW5oZXJlbnQgb2YgdGhlXG4gICAqIHN0YXRlIG9mIHRoZSBlZGl0b3JcbiAgICovXG4gIGZvY3VzZWQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgaXQgaXMgcmljaCB0ZXh0XG4gICAqIHRoZSBzbGF0ZSBlZGl0b3IgaXMgYWJsZSB0byBjb250YWluXG4gICAqIG5vbi1yaWNoIHRleHQsIHdoZW4gaXQncyBhcyBhIHBsYWluXG4gICAqIHRleHQgZm9ybVxuICAgKiBcbiAgICogeW91IHNob3VsZCB1c2UgdGhpcyB0byBjaGFuZ2UvcmVtb3ZlXG4gICAqIHRoZSB0b29sYmFycyBhbmQgd3JhcHBlcnMgYW5kIHVzZVxuICAgKiBvbmx5IHBhcmFncmFwaHNcbiAgICogXG4gICAqIHRoaXMgaXMgcGFzc2VkIGRpcmVjdGx5IGZyb21cbiAgICogdGhlIHByb3BzIG9mIHRoZSBlZGl0b3JcbiAgICovXG4gIGlzUmljaFRleHQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGN1cnJlbnQgdmFsdWUgaXMgdmFsaWRcbiAgICogdGhpcyBpcyBwYXNzZWQgZGlyZWN0bHkgZnJvbSB0aGUgcHJvcHNcbiAgICogYW5kIGl0J3MgdXNlZCBmb3Igc3R5bGlzdGljIHB1cnBvc2VzXG4gICAqL1xuICBjdXJyZW50VmFsaWQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHRleHQgYmVpbmcgd29ya2VkIHdpdGgsIHJlcHJlc2VudHNcbiAgICogYSB0ZXh0IG5vZGUgd2hlcmUgdGhlIGNhcmV0IGlzIGN1cnJlbnRseSBwbGFjZWRcbiAgICovXG4gIGN1cnJlbnRUZXh0OiBJVGV4dDtcbiAgY3VycmVudElubGluZUVsZW1lbnQ6IFJpY2hFbGVtZW50O1xuICBjdXJyZW50QmxvY2tFbGVtZW50OiBSaWNoRWxlbWVudDtcbiAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50czogUmljaEVsZW1lbnRbXTtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgcGF0aCBmb2xsb3dlZCwgdGV4dCBwYXRoIGZvciB0aGUgY3VycmVudCB0ZXh0XG4gICAqL1xuICBjdXJyZW50VGV4dEFuY2hvcjogUGF0aDtcbiAgY3VycmVudElubGluZUVsZW1lbnRBbmNob3I6IFBhdGg7XG4gIGN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3I6IFBhdGg7XG4gIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IFBhdGhbXTtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgc2VsZWN0ZWQgbm9kZSB0aGF0IGlzIGJlaW5nIHdvcmtlZCB3aXRoXG4gICAqIHRoaXMgaXMgbm9ybWFsbHkgYXV0b21hdGljYWxseSBzZWxlY3RlZCB0byBiZSB0aGVcbiAgICogY3VycmVudCBlbGVtZW50XG4gICAqL1xuICBjdXJyZW50U2VsZWN0ZWRUZXh0OiBJVGV4dDtcbiAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudDogUmljaEVsZW1lbnQ7XG4gIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudDogUmljaEVsZW1lbnQ7XG4gIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50czogUmljaEVsZW1lbnRbXTtcbiAgY3VycmVudFNlbGVjdGVkRWxlbWVudDogUmljaEVsZW1lbnQ7XG5cbiAgY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvcjogUGF0aDtcbiAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvcjogUGF0aDtcbiAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yOiBQYXRoO1xuICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IFBhdGhbXTtcblxuICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yOiBQYXRoO1xuICBwcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcjogUGF0aDtcbiAgcHJldmlvdXNUZXh0QW5jaG9yOiBQYXRoO1xuXG4gIGN1cnJlbnRSb290Q29udGV4dDogSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb247XG4gIGN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dDogSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb247XG4gIGN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dDogSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb247XG4gIGN1cnJlbnRTZWxlY3RlZElubGluZUNvbnRleHQ6IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uO1xuICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29udGV4dDogSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb247XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHZhbHVlIGZyb20gdGhlIGRvY3VtZW50IHRoYXQgaXMgdXNlZFxuICAgKiBpbiB0aGUgc2xhdGUgcmljaCB0ZXh0IGVkaXRvclxuICAgKi9cbiAgdHJlZVZhbHVlOiBJUm9vdExldmVsRG9jdW1lbnQ7XG5cbiAgLyoqXG4gICAqIENvbnRleHR1YWwsIHZlcnkgc3BlY2lmaWMgdG8gdGhlIGN1cnJlbnQgY29udGV4dFxuICAgKiB3aGVyZSB0aGUgY3Vyc29yIGlzIGxvY2F0ZWRcbiAgICovXG4gIGFsbG93c0luc2VydEVsZW1lbnQ6IChlbGVtZW50OiBSaWNoRWxlbWVudCwgb3B0cz86IHsgY29sbGFwc2VkPzogYm9vbGVhbjsgZXh0ZW5kZWQ/OiBib29sZWFuOyBzZWxlY3RlZD86IGJvb2xlYW4gfSkgPT4gYm9vbGVhbjtcbiAgYWxsb3dzVGV4dDogYm9vbGVhbjtcbiAgaW5saW5lSXNWb2lkOiBib29sZWFuO1xuICBibG9ja0lzVm9pZDogYm9vbGVhbjtcbiAgdG9wbW9zdFN1cGVyYmxvY2tJc1ZvaWQ6IGJvb2xlYW47XG4gIHN1cGVyQmxvY2tVSUhhbmRsZXI6IElUZW1wbGF0ZUFyZ1VJSGFuZGxlckRlZmluaXRpb247XG4gIGJsb2NrVUlIYW5kbGVyOiBJVGVtcGxhdGVBcmdVSUhhbmRsZXJEZWZpbml0aW9uO1xuICBpbmxpbmVVSUhhbmRsZXI6IElUZW1wbGF0ZUFyZ1VJSGFuZGxlckRlZmluaXRpb247XG59XG5cbi8qKlxuICogVGhlIHByb3BzIHRoYXQgZXZlcnkgZWxlbWVudCB3cmFwcGVyIGlzIGdvaW5nIHRvIGdldFxuICogYmFzZWQgb24gdGhlIHN0YW5kYXJkIHRoYXQgaXMgcGFzZWQgYnkgZWFjaCBlbGVtZW50XG4gKiBvbmNlIHN1Y2ggZWxlbWVudCBpcyBzZWxlY3RlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElTbGF0ZUVkaXRvcldyYXBwZXJFbGVtZW50UHJvcHMge1xuICAvKipcbiAgICogVGhlIGVsZW1lbnQgYmVpbmcgc2VsZWN0ZWRcbiAgICovXG4gIGVsZW1lbnQ6IFJpY2hFbGVtZW50O1xuICAvKipcbiAgICogV2hldGhlciB0aGUgc2VsZWN0aW9uIGlzIHByaW1hcnlcbiAgICovXG4gIHByaW1hcnlTZWxlY3Rpb246IGJvb2xlYW47XG4gIC8qKlxuICAgKiB3ZXRoZXIgaXMgc2VsZWN0ZWRcbiAgICovXG4gIGlzU2VsZWN0ZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUaGUgaGVscGVycyBmdW5jdGlvbnNcbiAgICovXG4gIGhlbHBlcnM6IElIZWxwZXJGdW5jdGlvbnM7XG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBjb21wb25lbnQgaXRzZWxmIHRoYXQgc2hvdWxkXG4gICAqIGJlIHJldHVybmVkXG4gICAqL1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogVGhlIGZlYXR1cmUgc3VwcG9ydFxuICAgKi9cbiAgZmVhdHVyZVN1cHBvcnQ6IElBY2Nlc3NpYmxlRmVhdHVyZVN1cHBvcnRPcHRpb25zO1xuICAvKipcbiAgICogdGhlIGJhc2UgaTE4biBnaXZlblxuICAgKi9cbiAgYmFzZUkxOG46IElCYXNlSTE4blJpY2hUZXh0SW5mbztcbn1cblxuLyoqXG4gKiBUaGUgZWxlbWVudCB3cmFwcGVyc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElTbGF0ZUVkaXRvckVsZW1lbnRXcmFwcGVycyB7XG4gIGNvbXBvbmVudHM/OiB7XG4gICAgW2tleTogc3RyaW5nXTogUmVhY3QuQ29tcG9uZW50VHlwZTxJU2xhdGVFZGl0b3JXcmFwcGVyRWxlbWVudFByb3BzPjtcbiAgfSxcbiAgdWlIYW5kbGVyPzoge1xuICAgIFtrZXk6IHN0cmluZ106IFJlYWN0LkNvbXBvbmVudFR5cGU8SVNsYXRlRWRpdG9yV3JhcHBlckVsZW1lbnRQcm9wcz47XG4gIH0sXG59O1xuXG4vKipcbiAqIFRoZSBiYXNlIHByb3BzIHRoYXQgZXZlcnkgd3JhcHBlciBpcyBnb2luZyB0byBnZXRcbiAqIGJhc2VkIG9uIHRoZSBzdGFuZGFyZCB0aGF0IGlzIHBhc3NlZCBieSB0aGUgY29tcG9uZW50XG4gKiB0aGF0IGNvbnRhaW5zIHRoZSBiYXNlIHJpY2ggdGV4dCBlZGl0b3JcbiAqIFxuICogWW91IG1pZ2h0IGV4dGVuZCB0aGlzIGNsYXNzIGFuZCByZXF1aXJlIGV4dHJhIHByb3BzLCB0aGVzZVxuICogcHJvcHMgbWlnaHQgYmUgcGFzc2VkIGJ5IHVzaW5nIHRoZSB3cmFwcGVyQXJncyBmcm9tXG4gKiB0aGUgbWFpbiBjb21wb25lbnQgd2hpY2ggd2lsbCBwYXNzIHRoZW0gdG8gdGhlIHdyYXBwZXJcbiAqIFxuICogV2hlbiBpbXBsZW1lbnRpbmcgdGhlIHdyYXBwZXIgeW91IG1heSBhZGQgYSBzZWxlY3RpdmVIYXJkQmx1ciBmdW5jdGlvblxuICogZm9yIHdoaWNoIHRyaWdnZXJzIHdoZW4gdGhlIGVsZW1lbnQgaXMgYmx1cnJlZCB0byBwcmV2ZW50IHJlYWwgYmx1cnJpbmcgKGFrYSBleGVjdXRpbmcgaGFyZEJsdXIpXG4gKiBkZXBlbmRpbmcgb24gaWYgc29tZXRoaW5nIGlzIHNlbGVjdGVkIGluIHRoZSB3cmFwcGVyXG4gKiBcbiAqIFRoZSBzZWxlY3RpdmVIYXJkQmx1ciBzaG91bGQgdGFrZSBhIChldjogS2V5Ym9hcmRFdmVudCwgdGFyZ2V0OiBIVE1MRWxlbWVudCkgaWYgeW91IHdpc2ggdG8gcHJldmVudFxuICogdGhlIGJsdXIgZnJvbSBoYXBwZW5pbmdcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJU2xhdGVFZGl0b3JXcmFwcGVyQmFzZVByb3BzIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgaXQgaXMgZGlzYWJsZWRcbiAgICovXG4gIGRpc2FibGVkOiBib29sZWFuO1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgc2xhdGUgZWRpdG9yIGN1cnJlbnQgc3RhdGVcbiAgICogdGhhdCBpcyBwYXNzZWQgdG8gdGhlIHdyYXBwZXIgaW4gb3JkZXJcbiAgICogc28gaXQgY2FuIGdldCBzdGF0ZSBpbmZvcm1hdGlvblxuICAgKi9cbiAgc3RhdGU6IElTbGF0ZUVkaXRvckludGVybmFsU3RhdGVUeXBlO1xuICAvKipcbiAgICogVGhpcyBpcyBhIGxpc3Qgb2YgZXh0ZW5kZWQgZmVhdHVyZXMgdGhhdCBhcmUgYXZhaWxhYmxlXG4gICAqIHRvIHRoZSBlZGl0b3IsIGFuZCB0aGUgd3JhcHBlciBjYW4gcmVuZGVyIGJ1dHRvbnNcbiAgICogYW5kIHdoYXRub3QgZnJvbSBpdFxuICAgKi9cbiAgZmVhdHVyZVN1cHBvcnQ6IElBY2Nlc3NpYmxlRmVhdHVyZVN1cHBvcnRPcHRpb25zO1xuICAvKipcbiAgICogVGhlc2UgYXJlIGhlbHBlciBmdW5jdGlvbnMgdGhhdCBhcmUgdXNlZCB0byBpbnNlcnQgZWxlbWVudHNcbiAgICogYW5kIG1vZGlmeSBub2Rlc1xuICAgKi9cbiAgaGVscGVyczogSUhlbHBlckZ1bmN0aW9ucztcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHRoaW5nIHRvIHdyYXAsIGl0IGlzIHRoZSByZWFjdFxuICAgKiByaWNoIHRleHQgZWRpdG9yIGl0c2VsZiBhcyBpdCBjb21lcyBmcm9tIHNsYXRlXG4gICAqIGFuZCBpdCBzaG91bGQgYmUgcmVuZGVyZWRcbiAgICogd2hlcmUgaXQgaXMgZXhwZWN0ZWQgdG8gYmUgdXNlZFxuICAgKi9cbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIEEgY3VycmVudCBlcnJvciwgdHJhbnNsYXRlZFxuICAgKiBpdCBpcyBnaXZlbiBkaXJlY3RseSBhcyBhIHByb3AgdG8gdGhlIGVkaXRvciBjbGFzc1xuICAgKiBhcyBpdCdzIGp1c3QgcGFzc2VkIHJpZ2h0IGhlcmUgYXMgd2VsbCB0byB0aGUgd3JhcHBlclxuICAgKiB0aGlzIGlzIHVzZWQgdmlhIHRoZSBQcm9wZXJ0eUVudHJ5VGV4dCBhcyBpdCBkb2VzXG4gICAqIGluZGVlZCBwcm92aWRlIHRoaXMgYXMgYSBwcm9wIGZvciB0aGUgcmVuZGVyXG4gICAqL1xuICBjdXJyZW50TG9hZEVycm9yOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEaXNtaXNzIHRoZSBjdXJyZW50IGxvYWQgZXJyb3IgZm9sbG93cyB0aGUgc2FtZSBsb2dpY1xuICAgKiBhcyB0aGUgY3VycmVudExvYWRFcnJvclxuICAgKi9cbiAgZGlzbWlzc0N1cnJlbnRMb2FkRXJyb3I6ICgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiB0aGUgYmFzZSBpMThuIGdpdmVuXG4gICAqL1xuICBiYXNlSTE4bjogSUJhc2VJMThuUmljaFRleHRJbmZvO1xufVxuXG4vKipcbiAqIFRoZXNlIGFyZSB0aGUgcHJvcHMgdGhhdCB0aGUgZWRpdG9yIGl0c2VsZiByZXF1aXJlc1xuICogaW4gb3JkZXIgdG8gZnVuY3Rpb24sIGFuZCB0aGV5IGFyZSBkZXNpZ25lZCBpbiBtaW5kIHRvIG1ha2VcbiAqIGl0c2VsZiBzdWl0YWJsZSB0byBiZSBhbiBlbnRyeSB0eXBlIGZvciBpdGVtaXplIHRleHQgdHlwZXMsIGJvdGhcbiAqIHBsYWluIGFuZCBodG1sXG4gKi9cbmludGVyZmFjZSBJU2xhdGVFZGl0b3JQcm9wcyB7XG4gIC8qKlxuICAgKiBBbiBpZCBmb3IgdGhlIGNvbnRlbnQgZWRpdGFibGUgYXJlYVxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIHN1cHBvcnRlZCB0eXBlcyB0aGF0IGFyZSBhbGxvd2VkIGZvciB0aGUgaW1hZ2VcbiAgICogaW5wdXRcbiAgICovXG4gIHN1cHBvcnRlZEltYWdlVHlwZXM6IHN0cmluZztcblxuICAvKipcbiAgICogVXNlZCBieSBpdGVtaXplIGludGVybmFsbHksIGZvciBzZXR0aW5nIHRoZSBsYXN0IHRleHQgY2hhbmdlXG4gICAqIHZhbHVlIGNvdW50IGZvciB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgaW4gYW4gZWZmaWNpZW50IHdheVxuICAgKiBzaW5jZSB0aGUgZWRpdG9yIGNhbiBjb3VudCBiZXR0ZXJcbiAgICogXG4gICAqIHRoaXMgd2lsbCBzZXQgYSBnbG9iYWwgdmFsdWUgd2l0aCB0aGUgY291bnQgb2YgdGhlIGxhc3QgZWRpdGVkXG4gICAqIHJpY2ggdGV4dCwgaWYgYSB2YWxpZGF0aW9uIG9jY3VycyBpbW1lZGlhdGVseSBhZnRlciB0aGlzIHZhbHVlXG4gICAqIGNhbiBiZSByZXRyaWV2ZWQgcmlnaHQgYXdheSBmcm9tIHRoZSBnbG9iYWxcbiAgICogXG4gICAqIHdoaWxlIHRoaXMgaXMgYSBoYWNrLCBpdCdzIGEgaGFjayBkb25lIGZvciBlZmZpY2llbmN5LCBzaW5jZSBjb25zaXN0ZW5jeVxuICAgKiBub3cgaXMgZXhwZW5zaXZlXG4gICAqL1xuICBjYWNoZVN0b3JlQ291bnRHbG9iYWw/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFZhbHVlIGZvciB0aGUgbGFuZyBwcm9wZXJ0eVxuICAgKi9cbiAgbGFuZzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIHJlYWN0IGNvbXBvbmVudCB0aGF0IGlzIHRvIHdyYXAgdGhlIGVkaXRvclxuICAgKiBub3JtYWxseSB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIHRvb2xiYXJzIGFuZCBhZGQgdG8gdGhlIGZ1bmN0aW9uYWxpdHlcbiAgICogdGhhdCB3aXNoZXMgdG8gYmUgYWRkZWQgaW4gb3JkZXIgdG8gbWFrZSBpdCBmdWxseSBjdXN0b21pemFibGVcbiAgICogVGhlIHdyYXBwZXIgd2lsbCByZWNlaXZlIHRoZSByaWNoIHRleHQgZWRpdG9yIGNvbXBvbmVudCBpdHNlbGYgYXMgYSBjaGlsZHJlblxuICAgKiB0aGUgcmF3IGVkaXRvciB0byBsYXVuY2ggY29tbWFuZHMgYW5kIHNvbWUgdXRpbGl0eSBmdW5jdGlvbnNcbiAgICogXG4gICAqIFdoZW4gYnVpbGRpbmcgeW91ciBvd24gY3VzdG9tIHJlbmRlcmVycyBhbmQgeW91IHN0aWxsIHdpbGwgdXNlIHRoZSBmYXN0IHByb3RvdHlpbmdcbiAgICogc2xhdGUgcmVuZGVyZXIgYXMgeW91ciByaWNoIHRleHQgZWRpdG9yIG9mIGNob2ljZSwgaXQgaXMgdGhlIHdyYXBwZXIgdGhhdCB5b3Ugd2lsbFxuICAgKiB1c2UgdG8gY3VzdG9taXplIHlvdXIgdG9vbGJhciBhbmQgb3RoZXIgZnVuY3Rpb25hbGl0eSB5b3Ugd2FudCB0byBhZGQ7IHdoaWxlIHRoZSBzdGFuZGFyZFxuICAgKiBpdGVtaXplIGZhc3QgcHJvdG90eXBpbmcgZWRpdG9yIGFuZCBpdHMgd3JhcHBlciBjYW4gZG8gd29uZGVycyBpdCBtaWdodCBub3QgY292ZXJcbiAgICogYWxsIHlvdXIgdXNlIGNhc2VzIGFuZCB5b3UgbWlnaHQgd2FudCB0byBjcmVhdGUgeW91ciBvd24gY3Vzb20gcmVuZGVyZXJzXG4gICAqL1xuICBXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJU2xhdGVFZGl0b3JXcmFwcGVyQmFzZVByb3BzPjtcbiAgLyoqXG4gICAqIEV4dHJhIHdyYXBwZXIgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIHdyYXBwZXIsIHRoZSBjb21wb25lbnQgZm9yIHRoZSB3cmFwcGVyXG4gICAqIGFsd2F5cyBtdXN0IGhhdmUgdGhlIGJhc2Ugd3JhcHBlciBwcm9wcywgYnV0IGl0IGNhbiBoYXZlIGV4dHJhIGFyZ3VtZW50c1xuICAgKiBhbmQgdGhleSBjYW4gYmUgcHJvdmlkZWQgdmlhIHRoaXMgYXJndW1lbnRcbiAgICovXG4gIHdyYXBwZXJBcmdzPzogYW55O1xuXG4gIC8qKlxuICAgKiBXcmFwcGVycyBmb3Igc3BlY2lmaWMgZWxlbWVudHMgYXMgdGhleSBhcmUgc2VsZWN0ZWQgYW5kIG9ubHkgaWYgdGhleSBhcmUgc2VsZWN0ZWRcbiAgICovXG4gIGVsZW1lbnRXcmFwcGVycz86IElTbGF0ZUVkaXRvckVsZW1lbnRXcmFwcGVycztcblxuICAvKipcbiAgICogQXJncyBwYXNzZWQgdG8gYWxsIHRoZSBlbGVtZW50IHdyYXBwZXJzXG4gICAqL1xuICBlbGVtZW50V3JhcHBlcnNBcmdzPzogYW55O1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBzdGFuZGFyZCBmZWF0dXJlcyB0aGF0IGFyZSBzdXBwb3J0ZWRcbiAgICogYWNjb3JkaW5nIHRvIHRoZSBkZWZpbml0aW9uLCB0aGUgcHJvcGVydHkgZW50cnkgaGFuZGxlclxuICAgKiBwcm92aWRlcyB0aGlzIHJpZ2h0IGF3YXkgdG8gdGhlIHJlbmRlcmVyXG4gICAqL1xuICBmZWF0dXJlczogSUZlYXR1cmVTdXBwb3J0T3B0aW9ucztcbiAgLyoqXG4gICAqIFRoZSB2YWx1ZSBhcyBodG1sIG9yIHBsYWluIHRleHQsIGxvb2sgYXQgdGhlXG4gICAqIGlzUmljaFRleHQgcHJvcCBpbiB0aGlzIHNhbWUgc3RydWN0dXJlIGluIG9yZGVyXG4gICAqIHRvIG1hcmsgaXQgYXMgaHRtbCBvciBwbGFpblxuICAgKi9cbiAgdmFsdWU6IHN0cmluZztcbiAgLyoqXG4gICAqIHdoZXRoZXIgdGhlIGN1cnJlbnQgdmFsdWUgaXMgdmFsaWQsIHRoZSBoYW5kbGVyXG4gICAqIGNhbiBkZWNpZGUgd2hldGhlciB0aGUgdmFsdWUgaXMgdmFsaWQsIGVnLiB0b28gbG9uZ1xuICAgKiBhbmQgbWFyayBpdCBoZXJlIGFzIGludmFsaWRcbiAgICovXG4gIGN1cnJlbnRWYWxpZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEEgY3VycmVudCBsb2FkaW5nIGVycm9yLCB0cmFuc2xhdGVkLCB0aGlzIGlzIGFsc28gZ2l2ZW4gYnlcbiAgICogdGhlIGhhbmRsZXI7IGl0IGlzIHVzZWQgd2hlbiBhIGZhaWx1cmUgb2NjdXJyZWQgdG8gaW5zZXJ0XG4gICAqIGZpbGVzIGFuZCBvdGhlciBmb3JtcyBvZiBtZWRpYSBjb250ZW50XG4gICAqL1xuICBjdXJyZW50TG9hZEVycm9yOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBVc2VkIHRvIHNldCBhcmlhIHZhbHVlcyBmb3IgcGVvcGxlIHdobyB1c2Ugc2NyZWVuIHJlYWRlcnNcbiAgICogXG4gICAqIGFmZmVjdHMgYm90aCBhcmlhLWludmFsaWQgYW5kIGFyaWEtZXJyb3JtZXNzYWdlXG4gICAqL1xuICBjdXJyZW50R2VuZXJhbEVycm9yRWxlbWVudElkPzogc3RyaW5nO1xuICAvKipcbiAgICogYWZmZWN0cyBhcmlhLWRlc2NyaWJlZGJ5XG4gICAqL1xuICBjdXJyZW50RGVzY3JpYmVkQnk/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEaXNtaXNzIHRoZSBjdXJyZW50IGxvYWQgZXJyb3JcbiAgICovXG4gIGRpc21pc3NDdXJyZW50TG9hZEVycm9yOiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogVGhlIHJvb3QgY29udGV4dCwgY2FuIGJlIG51bGwgaWYgbm8gY29udGV4dDsgZ2l2ZW4gdGhpcyBpcyBhIHRleHQgdHlwZVxuICAgKiBhbmQgdGhlIGNvbnRleHQgaXMgYW4gc3BlY2lhbCBzb3J0IG9mIGFyZ3VtZW50IHRoZSByZW5kZXJlciBtdXN0IGJlIHRoZSBvbmVcbiAgICogdGhhdCBkZWNpZGVzIGhvdyB0byByZWNlaXZlIHRoZXNlIGFuZCBob3cgdG8gdGFrZSB0aGVtLCB1c2luZyB0aGVcbiAgICogcmVuZGVyZXJBcmdzIHByb3BlcnR5IGl0IG1pZ2h0IGJlIHBhc3NlZCB0aGVyZSwgYXMgdGhpcyBpcyBhIHJlbmRlcmluZ1xuICAgKiBlbGVtZW50XG4gICAqL1xuICByb290Q29udGV4dDogSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb247XG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpMThuLCB0aGlzIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSB3cmFwcGVyXG4gICAqIHRoZSB3cmFwcGVyIG1heSByZXF1aXJlIG1vcmUgaW5mb3JtYXRpb25cbiAgICogc28gaXQgaXMgcmVjb21tZW5kZWQgdGhhdCB5b3UgY2hlY2sgaG93IHRoZSB3cmFwcGVyIGhhbmRsZXMgaXRzXG4gICAqIG5lZWRzXG4gICAqL1xuICBiYXNlSTE4bjogSUJhc2VJMThuUmljaFRleHRJbmZvO1xuICAvKipcbiAgICogV2hldGhlciB0aGUgdmFsdWUgcmVwcmVzZW50cyByaWNoIHRleHQsIGdpdmVuIHRoZSB2YWx1ZSBpc1xuICAgKiBhIHN0cmluZywgdGhpcyBlZGl0b3IgbXVzdCBrbm93IGhvdyB0byBwYXJzZSBpdFxuICAgKi9cbiAgaXNSaWNoVGV4dDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEFuIGludGVybmFsIHZhbHVlIHByb3ZpZGVkXG4gICAqIHRoYXQgcmVwcmVzZW50cyBhIHNsYXRlIGRvY3VtZW50XG4gICAqIGl0IG1pZ2h0IGJlIG51bGwgaWYgdGhpcyB2YWx1ZVxuICAgKiBpcyB1bmtub3duXG4gICAqL1xuICB0cmVlVmFsdWU6IElSb290TGV2ZWxEb2N1bWVudDtcbiAgLyoqXG4gICAqIFRyaWdnZXJzIG9uIGNoYW5nZSwgaXQgaXMgbWVhbnQgdG8ga2VlcCB0aGUgc2FtZSBzaGFwZVxuICAgKiBhcyB0aGUgaGFuZGxlciBleHBlY3RzIGl0XG4gICAqL1xuICBvbkNoYW5nZTogKHZhbHVlOiBzdHJpbmcsIHRyZWVWYWx1ZTogSVJvb3RMZXZlbERvY3VtZW50KSA9PiB2b2lkO1xuICAvKipcbiAgICogVHJpZ2dlcnMgb24gZm9jdXMsIGl0IGNhbiBiZSB1c2VkIHRvIGN1c3RvbWl6ZSB0aGUgcmVuZGVyZXIgdGhhdCBpcyBjcmVhdGVkXG4gICAqIHVzaW5nIGl0XG4gICAqL1xuICBvbkZvY3VzPzogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFRyaWdnZXJzIG9uIGJsdXIsIGl0IGNhbiBiZSB1c2VkIHRvIGN1c3RvbWl6ZSB0aGUgcmVuZGVyZXIgdGhhdCBpcyBjcmVhdGVkXG4gICAqIHVzaW5nIGl0XG4gICAqL1xuICBvbkJsdXI/OiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogRnVuY3Rpb24gdGhhdCB1c3VhbGx5IGNvbWVzIGZyb20gdGhlIGhhbmRsZXIgYW5kIGlzIHByb3ZpZGVkIHZpYSB0aGUgcmVuZGVyZXJcbiAgICogZGlyZWN0bHkgdG8gdGhpcyBpbiBvcmRlciB0byBoYW5kbGUgZmlsZSBpbnNlcnRpb25zIGludG8gdGhlIG1lZGlhIHByb3BlcnR5XG4gICAqIHRoaXMgZnVuY3Rpb24gaXMgZ2l2ZW4gYnkgdGhlIGhhbmRsZXIgaW4gdGhpcyB3YXkgdG8gdGhlIHJlbmRlcmVyXG4gICAqL1xuICBvbkluc2VydEZpbGU6IChmaWxlOiBGaWxlLCBpc0V4cGVjdGluZ0ltYWdlPzogYm9vbGVhbikgPT4gUHJvbWlzZTxJU2xhdGVJbnNlcnRlZEZpbGVJbmZvcm1hdGlvblR5cGU+IHwgSVNsYXRlSW5zZXJ0ZWRGaWxlSW5mb3JtYXRpb25UeXBlO1xuICAvKipcbiAgICogRnVuY3Rpb24gdGhhdCB1c3VhbGx5IGNvbWVzIGZyb20gdGhlIGhhbmRsZXIgYW5kIGlzIHByb3ZpZGVkIHZpYSB0aGUgcmVuZGVyZXJcbiAgICogZGlyZWN0bHkgdG8gdGhpcyBpbiBvcmRlciB0byBoYW5kbGUgZmlsZSBpbnNlcnRpb25zIGludG8gdGhlIG1lZGlhIHByb3BlcnR5XG4gICAqIHRoaXMgZnVuY3Rpb24gaXMgZ2l2ZW4gYnkgdGhlIGhhbmRsZXIgaW4gdGhpcyB3YXkgdG8gdGhlIHJlbmRlcmVyXG4gICAqL1xuICBvbkluc2VydEZpbGVGcm9tVVJMOiAodXJsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgaXNFeHBlY3RpbmdJbWFnZT86IGJvb2xlYW4pID0+IFByb21pc2U8SVNsYXRlSW5zZXJ0ZWRGaWxlSW5mb3JtYXRpb25UeXBlPiB8IElTbGF0ZUluc2VydGVkRmlsZUluZm9ybWF0aW9uVHlwZTtcbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIHNwZWNpZmllZCB0byBpbmZvcm0gd2hldGhlciBhIGZpbGUgaXMgaW5jbHVkZWRcbiAgICogaW4gdGhlIGN1cnJlbnQgaW50ZXJuYWwgaW5mb3JtYXRpb25cbiAgICovXG4gIG9uUmV0cmlldmVGaWxlOiAoZmlsZUlkOiBzdHJpbmcpID0+IElTbGF0ZUZpbGU7XG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIHNwZWNpZmllZCB0byByZXRyaWV2ZSBhbiBpbWFnZVxuICAgKiBAcGFyYW0gZmlsZUlkIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIG9uUmV0cmlldmVJbWFnZTogKGZpbGVJZDogc3RyaW5nKSA9PiAoeyBmaWxlOiBJU2xhdGVGaWxlLCBzcmNzZXQ6IHN0cmluZyB9KVxuICAvKipcbiAgICogRnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgc3BlY2lmaWVkIHRvIHJldHJpZXZlIGRhdGEgdXJpcyBmcm9tIGJsb2IgdXJscyBnaXZlblxuICAgKiBhIGZpbGUgaWRcbiAgICovXG4gIC8vIG9uUmV0cmlldmVEYXRhVVJJOiAoZmlsZUlkOiBzdHJpbmcpID0+IHN0cmluZztcbiAgLyoqXG4gICAqIEEgcGxhY2Vob2xkZXIgdG8gYmUgdXNlZCB0byBiZSBkaXNwbGF5ZWQsIGl0IG9ubHkgZGlzcGxheXMgd2hlbiB0aGUgdmFsdWVcbiAgICogaXMgY29uc2lkZXJlZCB0byBiZSB0aGUgbnVsbCBkb2N1bWVudFxuICAgKi9cbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGF1dG8gZm9jdXMgb24gbW91bnRcbiAgICovXG4gIGF1dG9Gb2N1cz86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBmaWVsZCBpcyBkaXNhYmxlZFxuICAgKi9cbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICAvKipcbiAgICogQW4gc3BlY2lmaWMgc2Nyb2xsIG1hcmdpbiB0b3AgdG8gYmUgdXNlZCB3aGVuIHNjcm9sbCBpbnRvIHZpZXcgaXMgdXNlZFxuICAgKiBhZ2FpbnN0IHRoaXMgZWxlbWVudFxuICAgKi9cbiAgc2Nyb2xsTWFyZ2luVG9wPzogc3RyaW5nIHwgbnVtYmVyO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGludGVybmFsIHN0YXRlIG9mIHRoaXMgZWRpdG9yIGFuZCBpdCBpcyB1c2VkIG9ubHlcbiAqIGludGVybmFsbHkgaW4gdGhlIGVkaXRvciBzdGF0ZSwgdGhlIHdyYXBwZXIgbWlnaHQgYWNjZXNzIHNvbWUgcGFydHMgb2YgaXRcbiAqIG5ldmVydGhlbGVzcyB2aWEgdGhlIGhlbHBlcnMsIGZlYXR1cmUgc3VwcG9ydCBhbmQgd2hhdG5vdFxuICovXG5pbnRlcmZhY2UgSVNsYXRlRWRpdG9yU3RhdGUgZXh0ZW5kcyBJU2xhdGVFZGl0b3JJbnRlcm5hbFN0YXRlVHlwZSB7XG4gIC8qKlxuICAgKiBUaGUgYWN0dWFsIGludGVybmFsIHZhbHVlIHRoYXQgc2xhdGUgaXNcbiAgICogdXNpbmcsIHNsYXRlIGV4cGVjdHMgYW4gaW1tdXRhYmxlIG9iamVjdCBoZXJlLCBhbmQgdGhpcyBpcyB3aGF0IGl0IGlzXG4gICAqIHVzaW5nIHRoZSBzZXJpYWxpemVyIGZ1bmN0aW9ucyBpbiB0aGUgdXRpbGl0aWVzIGluIG9yZGVyXG4gICAqIHRvIG9idGFpbiB0aGlzIGludGVybmFsIHZhbHVlXG4gICAqL1xuICB0cmVlVmFsdWU6IElSb290TGV2ZWxEb2N1bWVudDtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGludGVybmFsIHZhbHVlIGlzIHN5bmNlZCBvciBzaG91bGQgYmUgc3luY2VkLCBiZWNhdXNlIHRoZSByaWNoXG4gICAqIHRleHQgZWRpdG9yIGlzIHJhdGhlciBjb21wbGV4LCBzZW5kaW5nIHVwZGF0ZXMgYWxsIHRoZSB0aW1lIGFuZCByZWZldGNoaW5nIGZyb21cbiAgICogdGhlIHN0cmluZyB0aGF0IGlzIGN1cnJlbnQgdmFsdWUgdG8gcmVwYXJzZSBpcyBleHBlbnNpdmUsIHdlIGRvIHRoZSBmb2xsb3dpbmdcbiAgICogXG4gICAqIDEuIG9uY2Ugc29tZXRoaW5nIGhhcyBjaGFuZ2VkIGluIHNsYXRlLCB0aGUgc3luY2VkIHN0YXRlIHdpbGwgYmUgc2V0IHRvIGZhbHNlLCBhbmQgYSB0aW1lciB3aWxsIGJlIHNldCBhc1xuICAgKiBhIHRpbWVvdXQgaW4gb3JkZXIgdG8gYWN0dWFsbHkgY2FsbCBvbkNoYW5nZSwgc28gaXRlbWl6ZSBpbnRlcm5hbCBoYW5kbGluZyAod2hpY2ggaXMgZXhwZW5zaXZlKSwgd29uJ3QgdHJpZ2dlclxuICAgKiBvbiBldmVyeSBzaW5nbGUga2V5cHJlc3MsIG9uY2UgdGhlIHVzZXIgc3RvcHMgdHlwaW5nLCB0aGUgZW50aXJlIGNoYWluIG9mIGV2ZW50cyBnZXRzIHJlbGVhc2VkXG4gICAqIDIuIHdoaWxlIHRoZSBmbGFnIGlzIGZhbHNlIHRoZSBzdHJpbmcgdmFsdWUgY2Fubm90IGFmZmVjdCB0aGUgaW50ZXJuYWxseSBzZXQgdmFsdWUgYW5kIGl0IHdpbGwgbm90IG92ZXJyaWRlLCBzb1xuICAgKiB0aGUgdmFsdWUgdGhhdCBpcyBzaG93biBpcyBvbmx5IGRlcGVuZGFudCBvbiB0aGUgaW50ZXJuYWwgc3RhdGUgdGhhdCBpcyBoZXJlLCBhbmQgb25jZSB0aGUgZmxhZyBpcyBzZXQgdG8gdHJ1ZVxuICAgKiB0aGVuIGl0IHdpbGwgYmUgcmVjaGVja2VkXG4gICAqIDMuIHdoZW4gdGhlIGZsYWcgaXMgc2V0IHRvIHRydWUgKHVzaW5nIGdldERlcml2ZWQgaW4gb3JkZXIgbyBiZSBjaGVhcGVyIGFuZCBhdm9pZCAxIGV4dHJhIHJlbmRlciBjeWNsZSkgd2Ugd2lsbFxuICAgKiAzLjEuIENoZWNrIHRoZSBpbnRlcm5hbCB2YWx1ZSwgaWYgb25lIHByb3ZpZGVkLCBhbmQgaWYgdGhleSBib3RoIGFyZSB0aGUgc2FtZSBhbmQgbWF0Y2ggdGhlIHV1aWQgc2lnbmF0dXJlLCB0aGVuIHdlXG4gICAqIGNvbnNpZGVyIHdlIGFyZSBob2xkaW5nIHRoZSBzYW1lIHZhbHVlOyBpZiB0aGF0J3Mgbm90IHRoZSBjYXNlLCBubyBpbnRlcm5hbCB2YWx1ZSwgb3IgaW50ZXJuYWwgdmFsdWUgZG9lc24ndCBtYXRjaFxuICAgKiB3ZSByZXNldCB0byB0aGUgbmV3IGludGVybmFsIHZhbHVlIGFuZCBkaXNhYmxlIGFsbCBjdXJyZW50IHNlbGVjdGlvbnMgYW5kIGFuY2hvcnNcbiAgICogMy4yLiBDaGVjayB0aGUgc3RyaW5nIHZhbHVlIGFuZCBzZXJpYWxpemUgaXQsIGJhc2VkIG9uIHRoZSBpc1JpY2hUZXh0IHByb3BlcnR5IHRvIGRlZmluZSBob3cgaXQgd2lsbCBiZSBwYXJzZWRcbiAgICogdG8gY3JlYXRlIGEgZG9jdW1lbnQsIGNoZWNrIHRoZSBzaWduYXR1cmUgb2YgdGhlIHJlc3VsdCwgaWYgdGhlIHNpZ25hdHVyZSBkb2Vzbid0IG1hdGNoLCB0aGlzIG1lYW5zIHRoZXkgYXJlIGRpZmZlcmVudFxuICAgKiBkb2N1bWVudHMgc28gd2UgZG8gdGhlIHNhbWUsIGFuZCB1cGRhdGUgd2l0aCB0aGUgbmV3IHZhbHVlXG4gICAqL1xuICBzeW5jZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBhbGwgY29udGFpbmVycyB0aGF0IGV4aXN0IHdpdGhpbiB0aGUgZGVmaW5pdGlvbnNcbiAgICogZm9yIHRoZSBjc3MgY2xhc3Nlc1xuICAgKiBcbiAgICogVGhleSBleGlzdCBhcyBzdGF0ZSBiZWNhdXNlIG9mIFNTUlxuICAgKiBUaGUgc2VydmVyIHNpZGUgaXMgbm90IGFibGUgdG8gYWNjZXNzIHRoZXNlIG5vciByZWFkIHRoZSBDU1MgZmlsZVxuICAgKiBmcm9tIHRoZSBzdHlsZXNoZWV0cyBkZWZpbml0aW9uXG4gICAqL1xuICBhbGxDb250YWluZXJzOiBzdHJpbmdbXTtcbiAgLyoqXG4gICAqIGF2YWlsYWJsZSBjdXN0b20gdGhhdCBleGlzdCB3aXRoaW4gdGhlIGRlZmluaXRpb25zXG4gICAqIGZvciB0aGUgY3NzIGNsYXNzZXNcbiAgICogXG4gICAqIFRoZXkgZXhpc3QgYXMgc3RhdGUgYmVjYXVzZSBvZiBTU1JcbiAgICogVGhlIHNlcnZlciBzaWRlIGlzIG5vdCBhYmxlIHRvIGFjY2VzcyB0aGVzZSBub3IgcmVhZCB0aGUgQ1NTIGZpbGVcbiAgICogZnJvbSB0aGUgc3R5bGVzaGVldHMgZGVmaW5pdGlvblxuICAgKi9cbiAgYWxsQ3VzdG9tOiBzdHJpbmdbXTtcbiAgLyoqXG4gICAqIGF2YWlsYWJsZSByaWNoIGNsYXNzIHRoYXQgZXhpc3Qgd2l0aGluIHRoZSBkZWZpbml0aW9uc1xuICAgKiBmb3IgdGhlIGNzcyBjbGFzc2VzXG4gICAqIFxuICAgKiBUaGV5IGV4aXN0IGFzIHN0YXRlIGJlY2F1c2Ugb2YgU1NSXG4gICAqIFRoZSBzZXJ2ZXIgc2lkZSBpcyBub3QgYWJsZSB0byBhY2Nlc3MgdGhlc2Ugbm9yIHJlYWQgdGhlIENTUyBmaWxlXG4gICAqIGZyb20gdGhlIHN0eWxlc2hlZXRzIGRlZmluaXRpb25cbiAgICovXG4gIGFsbFJpY2hDbGFzc2VzOiBzdHJpbmdbXTtcbiAgLyoqXG4gICAqIGFsbCB0YWJsZXMgdGhhdCBleGlzdCB3aXRoaW4gdGhlIGRlZmluaXRpb25zXG4gICAqIGZvciB0aGUgY3NzIGNsYXNzZXNcbiAgICogXG4gICAqIFRoZXkgZXhpc3QgYXMgc3RhdGUgYmVjYXVzZSBvZiBTU1JcbiAgICogVGhlIHNlcnZlciBzaWRlIGlzIG5vdCBhYmxlIHRvIGFjY2VzcyB0aGVzZSBub3IgcmVhZCB0aGUgQ1NTIGZpbGVcbiAgICogZnJvbSB0aGUgc3R5bGVzaGVldHMgZGVmaW5pdGlvblxuICAgKi9cbiAgYWxsVGFibGVzOiBzdHJpbmdbXTtcbn1cblxuY29uc3QgZmFsc2VGbiA9ICgpID0+IGZhbHNlO1xuXG4vKipcbiAqIEJlaG9sZCB0aGUgY29tcG9uZW50IHRoYXQgZG9lcyBhIGxvdCBvZiB0aGUgbWFnaWNcbiAqIGZvciByaWNoIHRleHQgaGFuZGxpbmcsIHRoaXMgY29tcG9uZW50IGRvZXMgbm90IGhhdmUgYW55IGRlZmluaXRpb25cbiAqIG9uIGhvdyBpdCBpcyBzdXBwb3NlZCB0byByZW5kZXIgdGhpbmdzIGxpa2UgdGhlIHRvb2xiYXIgYW5kIHdoYXQgZnVuY3Rpb25zXG4gKiBzdWNoIHByb3ZpZGVzIGluIG9yZGVyIHRvIGJlIGFibGUgdG8gY29uc3RydWN0IHRoZSByaWNoIHRleHRcbiAqIGFuZCBpdCdzIHRoZSBqb2Igb2YgdGhlIGRldmVsb3BlciB0byBkZWNpZGUgaG93IHRvIGRvIHNvLCBieSBkZWZhdWx0IHRoZXJlXG4gKiBpcyBhIHdyYXBwZXIgdGhhdCBpcyB1c2VkIGZvciBmYXN0IHByb3RvdHlwaW5nLCBidXQgaXQncyBhIHJhdGhlciBnZW5lcmljXG4gKiBvbmUsIGFuZCBkZXZlbG9wZXJzIHVzaW5nIGl0ZW1pemUgc2hvdWxkIHVzZSB0aGlzIHNsYXRlIGVkaXRvciBjbGFzcyBhbmQgYXJlXG4gKiBjb21tZW5kZWQgdG8sIGJlY2F1c2UgaXQncyBlYXN5LCBidXQgdGhleSBzaG91bGQgcHJlZmVyIHRvIHVzZSB0aGVpciBvd25cbiAqIGN1c3RvbWl6ZWQgd3JhcHBlciB0byBwcm92aWRlIHRoZSBmdW5jdGlvbmFsaXR5IHRoZXkgd2FudCBhbmQgaG93IHRoZXkgd2FudCBpdFxuICogc28gdGhleSBjYW4gZGVmaW5lIGV2ZW4gdGhlaXIgb3duIGN1c3RvbSB1aS1oYW5kbGVyIGJhc2VkIGVsZW1lbnRzLCBzdWNoIGFzLCBlZy5cbiAqIG1hdGggY29tcG9uZW50c1xuICogXG4gKiBpdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgeW91ciBvd24gY3VzdG9tIHJlbmRlcmVyIGFuZCBpbXBvcnQgdGhpcyBjbGFzcywgY29weWluZyBvZmZcbiAqIHRoZSBQcm9wZXJ0eUVudHJ5VGV4dCBiZWNhdXNlIGl0IHdpbGwgbm90IGluY2x1ZGUgYW55IG1hdGVyaWFsIFVJIGZhc3QgcHJvdG90eXBpbmcgcmVzb3VyY2VzXG4gKiBvdGhlcndpc2UgaWYgeW91IGFyZSBhbHNvIHVzaW5nIG1hdGVyaWFsIFVJIGFzIGluY2x1ZGVkIGluIGl0ZW1pemUgeW91IG1pZ2h0IHVzZVxuICogV3JhcHBlciBhbmQgd3JhcHBlckFyZ3MgaW4gdGhlIHJlbmRlcmVyQXJncyBidXQgdGhpcyBpcyByYXRoZXIgYWR2YW5jZWQsIHRoZSBtb3N0XG4gKiBhZHZhbmNlZCBzdHVmZiBvZmYgaXRlbWl6ZSBhbmQgb25lIHRoYXQgc2hvdWxkIGJlIHNpbXBsaWZpZWRcbiAqL1xuZXhwb3J0IGNsYXNzIFNsYXRlRWRpdG9yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElTbGF0ZUVkaXRvclByb3BzLCBJU2xhdGVFZGl0b3JTdGF0ZT4ge1xuICAvKipcbiAgICogUmVwcmVzZW50cyB0aGUgcmVhY3QgZWRpdG9yIGVsZW1lbnQgdGhhdCBpcyBjcmVhdGVkXG4gICAqIHVzaW5nIHNsYXRlXG4gICAqL1xuICBwcml2YXRlIGVkaXRvcjogSXRlbWl6ZUVkaXRvcjtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHVwZGF0ZSB0aW1lb3V0IHRoYXQgaXMgdXNlZCBpbiBvcmRlciB0byBydW4gb25DaGFuZ2UgZXZlbnRzIHdoZW5cbiAgICogdGhlIHVzZXIgc3RvcHMgdHlwaW5nIGFuZCBub3Qgb24gZXZlcnkga2V5c3Ryb2tlLCBiZWNhdXNlIHJpY2ggdGV4dCBpcyBleHBlbnNpdmVcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlVGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XG4gIHByaXZhdGUgaXNJbk5vcm1hbGl6YXRpb246IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBwcmV2ZW50Tm9ybWFsaXplOiBib29sZWFuID0gZmFsc2U7XG4gIC8qKlxuICAgKiBXaGVuIGEgY2FsbCB0byBkZWxldGUgdGhlIGN1cnJlbnQgc2VsZWN0ZWQgbm9kZSBpcyBkb25lLCB0aGUgc2VsZWN0aW9uIGFuY2hvcnMgYXMgdGhleSBoYXZlIGJlZW4gc2V0XG4gICAqIG5lZWQgdG8gYmUgcmVtb3ZlZCBhbmQgcmVzZXQgYmVjYXVzZSBvdGhlcndpc2UgdGhleSB3aWxsIGJlIHBvaW50aW5nIHRvIGludmFsaWQgbm9kZXMsIHRoaXMgaW50ZXJuYWxcbiAgICogZmxhZyBhbGxvd3MgdG8ga2VlcCB0cmFjayBvZiB0aGF0IHNvLlxuICAgKiBcbiAgICogMS4gdGhlIGRlbGV0ZSBmdW5jdGlvbiBnZXRzIGNhbGxlZCwgdGhlIGZsYWcgZ2V0cyBzZXQgdG8gdHJ1ZVxuICAgKiAyLiBzbGF0ZSBpcyBpbnRlcm5hbGx5IGFza2VkIHRvIGRlbGV0ZSBhdCB0aGUgc2VsZWN0ZWQgYW5kIGdpdmVuIHBhdGhcbiAgICogMy4gdGhpcyB0cmlnZ2VycyB0aGUgY2hhbmdlIGZ1bmN0aW9uIHdoaWNoIHdpbGwgdHJ5IHRvIHJlY2FsY3VsYXRlIGFuY2hvcnMsIGJ1dCB0aGUgb2xkIGFuY2hvcnMgYXJlIGludmFsaWRcbiAgICogNC4gYmVjYXVzZSBvZiB0aGUgZmxhZyB0aGUgY2hhbmdlIGZ1bmN0aW9uIGtub3dzIHRoZSBsXHUwMEY2YXN0IGNoYW5nZSB3YXMgYSBzZWxlY3RlZCBkZWxldGUgYW5kIHRlbGxzIHRoZSBhbmNob3JcbiAgICogcmVjYWxjdWxhdGlvbiBub3QgdG8gcmV1c2Ugb2xkIGFuY2hvcnNcbiAgICovXG4gIHByaXZhdGUgbGFzdENoYW5nZVdhc1NlbGVjdGVkRGVsZXRlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBvcmlnaW5hbFNldEZyYWdtZW50RGF0YTogYW55O1xuICBwcml2YXRlIG9yaWdpbmFsSW5zZXJ0RGF0YTogYW55O1xuICBwcml2YXRlIGlzVW5tb3VudGVkOiBib29sZWFuO1xuXG4gIHByaXZhdGUgZWRpdGFibGVSZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD4gPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgcHJpdmF0ZSB3cmFwcGVyUmVmOiBSZWFjdC5SZWZPYmplY3Q8YW55PiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuXG4gIC8qKlxuICAgKiBUaGUgc3RhbmRhcmQgZGVyaXZlZCBzdGF0ZSBmdW5jdGlvbiBpcyB1c2VkIGluIG9yZGVyIHRvIHNldCB0aGUgc3RhdGUgaW4gYW4gZWZmZWN0aXZlIHdheVxuICAgKiBpdCBpcyB1c2VkIGJlY2F1c2UgdGhlIGJlaGF2aW91ciBvZiB0aGlzIGVkaXRvciBpcyByYXRoZXIgY29tcGxleFxuICAgKiBAcGFyYW0gcHJvcHMgdGhlIGN1cnJlbnQgcHJvcHNcbiAgICogQHBhcmFtIHN0YXRlIHRoZSBjdXJyZW50IHN0YXRlXG4gICAqIEByZXR1cm5zIGEgcGFydGlhbCBvZiB0aGUgbmV3IHN0YXRlIG9yIG51bGxcbiAgICovXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMocHJvcHM6IElTbGF0ZUVkaXRvclByb3BzLCBzdGF0ZTogSVNsYXRlRWRpdG9yU3RhdGUpOiBQYXJ0aWFsPElTbGF0ZUVkaXRvclN0YXRlPiB7XG4gICAgLy8gd2Ugb25seSBtZXNzIHdpdGggdGhlIHN0YXRlIGlmIHdlIGFyZSBzeW5jZWRcbiAgICAvLyBpZiB3ZSBkaWQgbm90IG91ciBzdGF0ZSB3b3VsZCBiYXNpY2FsbHkgYmUgaW1tdXRhYmxlXG4gICAgLy8gYXMgaXQgd291bGQgcmVzdG9yZSBmcm9tIHRoZSBwcm9wIG9uIGVhY2ggcmVuZGVyIGN5Y2xlXG4gICAgaWYgKHN0YXRlLnN5bmNlZCkge1xuICAgICAgLy8gbm93IGlmIHdlIGhhdmUgYW4gaW50ZXJuYWwgdmFsdWUgdGhhdCBpcyBnaXZlbiB2aWEgdGhlIHByb3BzXG4gICAgICAvLyB0aGlzIG1lYW5zIHRoYXQgdGhpcyBpcyB0aGUgaW50ZXJuYWwgdmFsdWUgdGhhdCByZWZlcnMgdG8gdGhlIHZhbHVlXG4gICAgICAvLyBpdHNlbGZcbiAgICAgIGlmIChwcm9wcy50cmVlVmFsdWUpIHtcblxuICAgICAgICAvLyB3ZSBjaGVjaywgaWYgd2UgZG9uJ3QgaGF2ZSBhbiBpbnRlcm5hbCB2YWx1ZSB0aGVuIGNlcnRhaW5seVxuICAgICAgICAvLyB0aGlzIG5ldyBpbnRlcm5hbCB2YWx1ZSBhcHBsaWVzLCBhbmQgYWxzbyB3ZSBvbmx5IGNhcmUgYWJvdXQgY2hhbmdpbmdcbiAgICAgICAgLy8gdG8gdGhlIGludGVybmFsIHZhbHVlIG5ldyB2YWx1ZSBpZiB0aGUgaWRzIGFyZSBtaXN0bWF0Y2hpbmcgYXMgdGhpcyBpZFxuICAgICAgICAvLyByZXByZXNlbnRzIHRoZSB1bmlxdWUgc2lnbmF0dXJlIG9mIHRoYXQgdmFsdWVcbiAgICAgICAgaWYgKCFzdGF0ZS50cmVlVmFsdWUgfHwgcHJvcHMudHJlZVZhbHVlLmlkICE9PSBzdGF0ZS50cmVlVmFsdWUuaWQpIHtcblxuICAgICAgICAgIC8vIHNvIGlmIHRoZSBjcml0ZXJpYSBwYXNzZXMsIGFuZCB0aGUgc2lnbmF0dXJlcyBkb24ndCBtYXRjaCBvciB0aGVyZSdzIG5vIGludGVybmFsXG4gICAgICAgICAgLy8gdmFsdWUgdG8gY29tcGFyZSBhZ2FpbnN0IHdlIHdpbGwgdXBkYXRlIHRoZSBpbnRlcm5hbCB2YWx1ZSBhbmQgY2xlYXIgYWxsIHRoZSBhbmNob3JzXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRyZWVWYWx1ZTogcHJvcHMudHJlZVZhbHVlLFxuICAgICAgICAgICAgaXNSaWNoVGV4dDogcHJvcHMuaXNSaWNoVGV4dCxcbiAgICAgICAgICAgIGN1cnJlbnRSb290Q29udGV4dDogcHJvcHMucm9vdENvbnRleHQgfHwgbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRWYWxpZDogcHJvcHMuY3VycmVudFZhbGlkLFxuXG4gICAgICAgICAgICBjdXJyZW50VGV4dDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRJbmxpbmVFbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudEJsb2NrRWxlbWVudDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHM6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50VGV4dEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRJbmxpbmVFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudEJsb2NrRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IG51bGwsXG5cbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVDb250ZXh0OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29udGV4dDogbnVsbCxcbiAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgcHJldmlvdXNUZXh0QW5jaG9yOiBudWxsLFxuXG4gICAgICAgICAgICBhbGxvd3NJbnNlcnRFbGVtZW50OiBmYWxzZUZuLFxuICAgICAgICAgICAgYWxsb3dzVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBpbmxpbmVJc1ZvaWQ6IGZhbHNlLFxuICAgICAgICAgICAgYmxvY2tJc1ZvaWQ6IGZhbHNlLFxuICAgICAgICAgICAgdG9wbW9zdFN1cGVyYmxvY2tJc1ZvaWQ6IGZhbHNlLFxuICAgICAgICAgICAgc3VwZXJCbG9ja1VJSGFuZGxlcjogbnVsbCxcbiAgICAgICAgICAgIGJsb2NrVUlIYW5kbGVyOiBudWxsLFxuICAgICAgICAgICAgaW5saW5lVUlIYW5kbGVyOiBudWxsLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB3ZSBkb24ndCBoYXZlIGFuIGludGVybmFsIHZhbHVlIHdlIG5lZWQgdG8gdXNlIHRoZSBnaXZlblxuICAgICAgICAvLyBzdHJpbmdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGFuZCBkZXNlcmlhbGl6ZSBpdCBiYXNlZCBvbiB0aGUgcHJvcHNcbiAgICAgICAgY29uc3QgbmV3dHJlZVZhbHVlID0gcHJvcHMuaXNSaWNoVGV4dCA/XG4gICAgICAgICAgZGVzZXJpYWxpemUocHJvcHMudmFsdWUsIHN0YXRlLnRyZWVWYWx1ZSwge1xuICAgICAgICAgICAgdXNlQ29udGV4dFJ1bGVzT2Y6IHN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgICAgICAgICB9KSA6XG4gICAgICAgICAgZGVzZXJpYWxpemVQbGFpbihwcm9wcy52YWx1ZSwgc3RhdGUudHJlZVZhbHVlKTtcblxuICAgICAgICAvLyBpZiB0aGVyZSdzIG5vIGludGVybmFsIHZhbHVlIHRvIGNvbXBhcmUsIG9yIHRoZSBuZXcgaW50ZXJuYWwgdmFsdWUgZG9lc24ndFxuICAgICAgICAvLyBtYXRjaCB3aXRoIHRoZSBjdXJyZW50LCBub3RlIHRoYXQgdGhlIHNpZ25hdHVyZSB3aWxsIG1hdGNoIHdpdGggcGFyc2VkIHZhbHVlc1xuICAgICAgICAvLyBhcyBpdCB1c2VzIGEgbmFtZXNwYWNlZCB1dWlkIHRoYXQgd2lsbCBnaXZlIHRoZSBzYW1lIHZhbHVlIGZvciB0aGUgc2FtZSBzdHJpbmdcbiAgICAgICAgaWYgKCFzdGF0ZS50cmVlVmFsdWUgfHwgbmV3dHJlZVZhbHVlLmlkICE9PSBzdGF0ZS50cmVlVmFsdWUuaWQpIHtcblxuICAgICAgICAgIC8vIHRoZW4gd2UgZG8gdGhlIHNhbWUgYW5kIHNldCB0aGUgbmV3IGludGVybmFsIHZhbHVlXG4gICAgICAgICAgLy8gYW5kIGNsZWFyIGFsbCB0aGUgYW5jaG9yc1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0cmVlVmFsdWU6IG5ld3RyZWVWYWx1ZSxcbiAgICAgICAgICAgIGlzUmljaFRleHQ6IHByb3BzLmlzUmljaFRleHQsXG4gICAgICAgICAgICBjdXJyZW50Um9vdENvbnRleHQ6IHByb3BzLnJvb3RDb250ZXh0IHx8IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50VmFsaWQ6IHByb3BzLmN1cnJlbnRWYWxpZCxcblxuICAgICAgICAgICAgY3VycmVudFRleHQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50SW5saW5lRWxlbWVudDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRCbG9ja0VsZW1lbnQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFRleHRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50SW5saW5lRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzOiBudWxsLFxuXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50czogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIHByZXZpb3VzVGV4dEFuY2hvcjogbnVsbCxcblxuICAgICAgICAgICAgYWxsb3dzSW5zZXJ0RWxlbWVudDogZmFsc2VGbixcbiAgICAgICAgICAgIGFsbG93c1RleHQ6IGZhbHNlLFxuICAgICAgICAgICAgaW5saW5lSXNWb2lkOiBmYWxzZSxcbiAgICAgICAgICAgIGJsb2NrSXNWb2lkOiBmYWxzZSxcbiAgICAgICAgICAgIHRvcG1vc3RTdXBlcmJsb2NrSXNWb2lkOiBmYWxzZSxcbiAgICAgICAgICAgIHN1cGVyQmxvY2tVSUhhbmRsZXI6IG51bGwsXG4gICAgICAgICAgICBibG9ja1VJSGFuZGxlcjogbnVsbCxcbiAgICAgICAgICAgIGlubGluZVVJSGFuZGxlcjogbnVsbCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgc2xhdGUgZWRpdG9yIGNvbXBvbmVudFxuICAgKiBAcGFyYW0gcHJvcHMgdGhlIHByb3BzXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcm9wczogSVNsYXRlRWRpdG9yUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgLy8gc2V0dGluZyB1cCB0aGUgaW50ZXJuYWwgdmFsdWUgZnJvbSB0aGUgcHJvcGVydHlcbiAgICAgIC8vIGZpcnN0IHdlIHBpY2sgdGhlIGludGVybmFsIHZhbHVlIGlmIGF2YWlsYWJsZVxuICAgICAgLy8gb3Igb3RoZXJ3aXNlIHdlIHBhcnNlIG9uZVxuICAgICAgdHJlZVZhbHVlOiBwcm9wcy50cmVlVmFsdWUgfHwgKHByb3BzLmlzUmljaFRleHQgPyBkZXNlcmlhbGl6ZShwcm9wcy52YWx1ZSwgbnVsbCwge1xuICAgICAgICB1c2VDb250ZXh0UnVsZXNPZjogcHJvcHMucm9vdENvbnRleHQsXG4gICAgICB9KSA6IGRlc2VyaWFsaXplUGxhaW4ocHJvcHMudmFsdWUpKSxcblxuICAgICAgLy8gd2UgYXJlIHN5bmNlZFxuICAgICAgc3luY2VkOiB0cnVlLFxuICAgICAgLy8gZm9jdXNlZFxuICAgICAgZm9jdXNlZDogZmFsc2UsXG5cbiAgICAgIC8vIHNldCB1cCB0aGUgYW5jaG9yc1xuICAgICAgY3VycmVudFRleHQ6IG51bGwsXG4gICAgICBjdXJyZW50SW5saW5lRWxlbWVudDogbnVsbCxcbiAgICAgIGN1cnJlbnRCbG9ja0VsZW1lbnQ6IG51bGwsXG4gICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzOiBudWxsLFxuICAgICAgY3VycmVudFRleHRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50SW5saW5lRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgIGN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzOiBudWxsLFxuXG4gICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50czogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzOiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBwcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgIHByZXZpb3VzVGV4dEFuY2hvcjogbnVsbCxcblxuICAgICAgaXNSaWNoVGV4dDogcHJvcHMuaXNSaWNoVGV4dCxcbiAgICAgIGN1cnJlbnRSb290Q29udGV4dDogcHJvcHMucm9vdENvbnRleHQgfHwgbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUNvbnRleHQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29udGV4dDogbnVsbCxcbiAgICAgIGN1cnJlbnRWYWxpZDogcHJvcHMuY3VycmVudFZhbGlkLFxuXG4gICAgICAvLyBlbnN1cmUgU1NSIGNvbXBhdGliaWxpdHlcbiAgICAgIC8vIHNpbmNlIHdlIGNhbm5vdCByZWFkIHRoZSBDU1MgZmlsZSBvbiB0aGUgc2VydmVyIHNpZGVcbiAgICAgIC8vIGFzIHdlIGhhdmUgbm8gYWNjZXNzIHRvIHN0eWxlc2hlZXRzXG4gICAgICBhbGxDb250YWluZXJzOiBbXSxcbiAgICAgIGFsbEN1c3RvbTogW10sXG4gICAgICBhbGxSaWNoQ2xhc3NlczogW10sXG4gICAgICBhbGxUYWJsZXM6IFtdLFxuXG4gICAgICBhbGxvd3NJbnNlcnRFbGVtZW50OiBmYWxzZUZuLFxuICAgICAgYWxsb3dzVGV4dDogZmFsc2UsXG4gICAgICBpbmxpbmVJc1ZvaWQ6IGZhbHNlLFxuICAgICAgYmxvY2tJc1ZvaWQ6IGZhbHNlLFxuICAgICAgdG9wbW9zdFN1cGVyYmxvY2tJc1ZvaWQ6IGZhbHNlLFxuICAgICAgc3VwZXJCbG9ja1VJSGFuZGxlcjogbnVsbCxcbiAgICAgIGJsb2NrVUlIYW5kbGVyOiBudWxsLFxuICAgICAgaW5saW5lVUlIYW5kbGVyOiBudWxsLFxuICAgIH1cblxuICAgIHRoaXMuaXNVbm1vdW50ZWQgPSBmYWxzZTtcblxuICAgIC8vIG5vdyB3ZSBidWlsZCB0aGUgc2xhdGUgZWRpdG9yXG4gICAgY29uc3QgcmF3RWRpdG9yID0gY3JlYXRlRWRpdG9yKCk7XG4gICAgLy8gd2l0aCByZWFjdCBvZiBjb3Vyc2UgOylcbiAgICB0aGlzLmVkaXRvciA9IHdpdGhSZWFjdCh3aXRoSGlzdG9yeShyYXdFZGl0b3IpKTtcblxuICAgIHRoaXMuZm9yY2VGb2N1cyA9IHRoaXMuZm9yY2VGb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZm9yY2VCbHVyID0gdGhpcy5mb3JjZUJsdXIuYmluZCh0aGlzKTtcblxuICAgIC8vIHNldHRpbmcgdXAgdGhlIGZ1bmN0aW9ucyB0byBvdmVycmlkZVxuICAgIC8vIHRoZSBkZWZhdWx0c1xuICAgIHRoaXMubm9ybWFsaXplTm9kZSA9IHRoaXMubm9ybWFsaXplTm9kZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0QnJlYWsgPSB0aGlzLmluc2VydEJyZWFrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRTdXBlcmJyZWFrID0gdGhpcy5pbnNlcnRTdXBlcmJyZWFrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZWxldGVCYWNrd2FyZCA9IHRoaXMuZGVsZXRlQmFja3dhcmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZUZvcndhcmQgPSB0aGlzLmRlbGV0ZUZvcndhcmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldEZyYWdtZW50RGF0YSA9IHRoaXMuc2V0RnJhZ21lbnREYXRhLmJpbmQodGhpcyk7XG4gICAgdGhpcy5maW5kQW5kQXBwZW5kRmlsZXNUb0RhdGFUcmFuc2ZlciA9IHRoaXMuZmluZEFuZEFwcGVuZEZpbGVzVG9EYXRhVHJhbnNmZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydERhdGEgPSB0aGlzLmluc2VydERhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLmZpbmRBbmRJbnNlcnRGaWxlc0Zyb21EYXRhVHJhbnNmZXIgPSB0aGlzLmZpbmRBbmRJbnNlcnRGaWxlc0Zyb21EYXRhVHJhbnNmZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLmlzVm9pZCA9IHRoaXMuaXNWb2lkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZXRDb250ZXh0Rm9yID0gdGhpcy5nZXRDb250ZXh0Rm9yLmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZXRSb290Q29udGV4dCA9IHRoaXMuZ2V0Um9vdENvbnRleHQuYmluZCh0aGlzKTtcblxuICAgIHRoaXMub3JpZ2luYWxTZXRGcmFnbWVudERhdGEgPSB0aGlzLmVkaXRvci5zZXRGcmFnbWVudERhdGE7XG4gICAgdGhpcy5vcmlnaW5hbEluc2VydERhdGEgPSB0aGlzLmVkaXRvci5pbnNlcnREYXRhO1xuXG4gICAgLy8gYW5kIHNvIHdlIG92ZXJyaWRlXG4gICAgdGhpcy5lZGl0b3IuaXNJbmxpbmUgPSB0aGlzLmlzSW5saW5lIGFzIGFueTtcbiAgICB0aGlzLmVkaXRvci5pc1ZvaWQgPSB0aGlzLmlzVm9pZCBhcyBhbnk7XG4gICAgdGhpcy5lZGl0b3Iubm9ybWFsaXplTm9kZSA9IHRoaXMubm9ybWFsaXplTm9kZTtcbiAgICB0aGlzLmVkaXRvci5pbnNlcnRCcmVhayA9IHRoaXMuaW5zZXJ0QnJlYWs7XG4gICAgdGhpcy5lZGl0b3IuZGVsZXRlQmFja3dhcmQgPSB0aGlzLmRlbGV0ZUJhY2t3YXJkO1xuICAgIHRoaXMuZWRpdG9yLmRlbGV0ZUZvcndhcmQgPSB0aGlzLmRlbGV0ZUZvcndhcmQ7XG4gICAgdGhpcy5lZGl0b3Iuc2V0RnJhZ21lbnREYXRhID0gdGhpcy5zZXRGcmFnbWVudERhdGE7XG4gICAgdGhpcy5lZGl0b3IuaW5zZXJ0RGF0YSA9IHRoaXMuaW5zZXJ0RGF0YTtcblxuICAgIHRoaXMuZ2V0UHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3IgPSB0aGlzLmdldFByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yLmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZXRQcmV2aW91c1RleHRBbmNob3IgPSB0aGlzLmdldFByZXZpb3VzVGV4dEFuY2hvci5iaW5kKHRoaXMpO1xuXG4gICAgLy8gb3RoZXIgZnVuY3Rpb25zIGFuZCBoZWxlciB1dGlsaXRpZXNcbiAgICB0aGlzLmRlbGV0ZVNlbGVjdGVkTm9kZSA9IHRoaXMuZGVsZXRlU2VsZWN0ZWROb2RlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZWxldGVQYXRoID0gdGhpcy5kZWxldGVQYXRoLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRWYWx1ZSA9IHRoaXMuc2V0VmFsdWUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlbmRlckVsZW1lbnQgPSB0aGlzLnJlbmRlckVsZW1lbnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmFjdHVhbGx5UmVuZGVyRWxlbWVudCA9IHRoaXMuYWN0dWFsbHlSZW5kZXJFbGVtZW50LmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlbmRlclRleHQgPSB0aGlzLnJlbmRlclRleHQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uRm9jdXNlZENoYW5nZSA9IHRoaXMub25Gb2N1c2VkQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkJsdXJyZWRDaGFuZ2UgPSB0aGlzLm9uQmx1cnJlZENoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25LZXlEb3duID0gdGhpcy5vbktleURvd24uYmluZCh0aGlzKTtcblxuICAgIHRoaXMuZGVsZXRlVGFibGVDb2x1bW4gPSB0aGlzLmRlbGV0ZVRhYmxlQ29sdW1uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZWxldGVUYWJsZVJvdyA9IHRoaXMuZGVsZXRlVGFibGVSb3cuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNlbGVjdFBhdGggPSB0aGlzLnNlbGVjdFBhdGguYmluZCh0aGlzKTtcbiAgICB0aGlzLm1vdmVQYXRocyA9IHRoaXMubW92ZVBhdGhzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5mb2N1cyA9IHRoaXMuZm9jdXMuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydEltYWdlID0gdGhpcy5pbnNlcnRJbWFnZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0VmlkZW8gPSB0aGlzLmluc2VydFZpZGVvLmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGVWaWRlbyA9IHRoaXMudXBkYXRlVmlkZW8uYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydEZpbGUgPSB0aGlzLmluc2VydEZpbGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydFRlbXBsYXRlVGV4dCA9IHRoaXMuaW5zZXJ0VGVtcGxhdGVUZXh0LmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGVUZW1wbGF0ZVRleHQgPSB0aGlzLnVwZGF0ZVRlbXBsYXRlVGV4dC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0VGVtcGxhdGVIVE1MID0gdGhpcy5pbnNlcnRUZW1wbGF0ZUhUTUwuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZVRlbXBsYXRlSFRNTCA9IHRoaXMudXBkYXRlVGVtcGxhdGVIVE1MLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRUYWJsZSA9IHRoaXMuaW5zZXJ0VGFibGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydFRhYmxlQ29sdW1uID0gdGhpcy5pbnNlcnRUYWJsZUNvbHVtbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0VGFibGVSb3cgPSB0aGlzLmluc2VydFRhYmxlUm93LmJpbmQodGhpcyk7XG4gICAgdGhpcy50b2dnbGVUYWJsZSA9IHRoaXMudG9nZ2xlVGFibGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNhblRvZ2dsZVRhYmxlID0gdGhpcy5jYW5Ub2dnbGVUYWJsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0Q29udGFpbmVyID0gdGhpcy5pbnNlcnRDb250YWluZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydEN1c3RvbSA9IHRoaXMuaW5zZXJ0Q3VzdG9tLmJpbmQodGhpcyk7XG4gICAgdGhpcy50b2dnbGVRdW90ZSA9IHRoaXMudG9nZ2xlUXVvdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnRvZ2dsZVRpdGxlID0gdGhpcy50b2dnbGVUaXRsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0TGlzdCA9IHRoaXMuaW5zZXJ0TGlzdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudG9nZ2xlTGluayA9IHRoaXMudG9nZ2xlTGluay5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlTGluayA9IHRoaXMudXBkYXRlTGluay5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0U3R5bGUgPSB0aGlzLnNldFN0eWxlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXQgPSB0aGlzLnNldC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0SG92ZXJTdHlsZSA9IHRoaXMuc2V0SG92ZXJTdHlsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0QWN0aXZlU3R5bGUgPSB0aGlzLnNldEFjdGl2ZVN0eWxlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRSaWNoQ2xhc3NlcyA9IHRoaXMuc2V0UmljaENsYXNzZXMuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldENvbnRleHQgPSB0aGlzLnNldENvbnRleHQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldElmQ29uZGl0aW9uID0gdGhpcy5zZXRJZkNvbmRpdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0Rm9yRWFjaCA9IHRoaXMuc2V0Rm9yRWFjaC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZm9ybWF0VG9nZ2xlID0gdGhpcy5mb3JtYXRUb2dnbGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldEFjdGlvbiA9IHRoaXMuc2V0QWN0aW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRFbGVtZW50ID0gdGhpcy5pbnNlcnRFbGVtZW50LmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZXRTdGF0ZSA9IHRoaXMuZ2V0U3RhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldFVJSGFuZGxlciA9IHRoaXMuc2V0VUlIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRVSUhhbmRsZXJBcmcgPSB0aGlzLnNldFVJSGFuZGxlckFyZy5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5hdmFpbGFibGVGaWx0ZXJpbmdGdW5jdGlvbiA9IHRoaXMuYXZhaWxhYmxlRmlsdGVyaW5nRnVuY3Rpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmNhbGN1bGF0ZUFuY2hvcnMgPSB0aGlzLmNhbGN1bGF0ZUFuY2hvcnMuYmluZCh0aGlzKTtcblxuICAgIHRoaXMudXBkYXRlTm9kZUF0ID0gdGhpcy51cGRhdGVOb2RlQXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydE5vZGVBdCA9IHRoaXMuaW5zZXJ0Tm9kZUF0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZWxldGVOb2RlQXQgPSB0aGlzLmRlbGV0ZU5vZGVBdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMubWVyZ2VOb2Rlc0F0ID0gdGhpcy5tZXJnZU5vZGVzQXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNwbGl0RWxlbWVudEFuZEVzY2FwZUNoaWxkSW50b1BhcmVudEF0ID0gdGhpcy5zcGxpdEVsZW1lbnRBbmRFc2NhcGVDaGlsZEludG9QYXJlbnRBdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMud3JhcE5vZGVBdCA9IHRoaXMud3JhcE5vZGVBdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0Tm9kZUF0ID0gdGhpcy5nZXROb2RlQXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNsb25lRWxlbWVudEF0ID0gdGhpcy5jbG9uZUVsZW1lbnRBdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMubW92ZU5vZGVBdCA9IHRoaXMubW92ZU5vZGVBdC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5oYXJkQmx1ciA9IHRoaXMuaGFyZEJsdXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNlbGVjdGl2ZUhhcmRCbHVySWZIYXNTZWxlY3RlZEVsZW1lbnQgPSB0aGlzLnNlbGVjdGl2ZUhhcmRCbHVySWZIYXNTZWxlY3RlZEVsZW1lbnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNvZnRCbHVyID0gdGhpcy5zb2Z0Qmx1ci5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gcnVucyBhbmQgcHJlcGFyZXMgdGhlIHRyZWUgdGhhdCBpcyB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZVxuICAgKiBwYXN0ZWQgY29udGVudFxuICAgKiBAcGFyYW0gZGF0YSB0aGUgZGF0YSB0cmFuc2ZlciBvZiB0aGUgY2xpcGJvYXJkXG4gICAqIEBwYXJhbSBibG9icyBhbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgYmxvYiB0cmFuc2ZlciBvYmplY3RcbiAgICogQHBhcmFtIGVsZW1lbnQgdGhlIGVsZW1lbnQgd2UgYXJlIGN1cnJlbnRseSBwcm9jZXNzaW5nXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZmluZEFuZEluc2VydEZpbGVzRnJvbURhdGFUcmFuc2ZlcihkYXRhOiBEYXRhVHJhbnNmZXIsIGVsZW1lbnQ6IFJpY2hFbGVtZW50KTogUHJvbWlzZTxSaWNoRWxlbWVudD4ge1xuICAgIC8vIGJ5IGRlZmF1bHQgdGhlIG5ldyBlbGVtZW50IGlzIGl0c2VsZlxuICAgIGxldCBuZXdFbGVtZW50ID0gZWxlbWVudDtcbiAgICBsZXQgd2FzT3ZlcndyaXR0ZW4gPSBmYWxzZTtcblxuICAgIC8vIGhvd2V2ZXIgd2UgbWlnaHQgaGF2ZSB0aGVzZSB0eXBlcyB3ZSBuZWVkIHRvIHByb2Nlc3NcbiAgICBpZiAobmV3RWxlbWVudC50eXBlID09PSBcImltYWdlXCIgfHwgbmV3RWxlbWVudC50eXBlID09PSBcImZpbGVcIikge1xuICAgICAgY29uc3QgaWRTcGVjaWZpZWQgPSBuZXdFbGVtZW50LnNyY0lkO1xuICAgICAgY29uc3QgdXJsVG9SZWFkRnJvbSA9IG5ld0VsZW1lbnQuc3JjO1xuXG4gICAgICBjb25zdCBleGlzdGFudEZpbGUgPSBuZXdFbGVtZW50LnR5cGUgPT09IFwiaW1hZ2VcIiA/XG4gICAgICAgIHRoaXMucHJvcHMub25SZXRyaWV2ZUltYWdlKGlkU3BlY2lmaWVkKSA6XG4gICAgICAgIHRoaXMucHJvcHMub25SZXRyaWV2ZUZpbGUoaWRTcGVjaWZpZWQpO1xuXG4gICAgICBpZiAoZXhpc3RhbnRGaWxlKSB7XG4gICAgICAgIC8vIEZpbGUgYmVsb25ncyB0byB0aGlzIGVkaXRvciwgbm90aGluZyB0byBkb1xuICAgICAgICBpZiAobmV3RWxlbWVudC50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgICAgICBjb25zdCBuZXdJbWFnZU5vZGU6IElJbWFnZSA9IHtcbiAgICAgICAgICAgIC4uLm5ld0VsZW1lbnQsXG4gICAgICAgICAgICB0eXBlOiBcImltYWdlXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYm9sZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXRhbGljOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzcmM6IChleGlzdGFudEZpbGUgYXMgYW55KS5maWxlLnVybCxcbiAgICAgICAgICAgIHNyY1NldDogKGV4aXN0YW50RmlsZSBhcyBhbnkpLnNyY3NldCxcbiAgICAgICAgICAgIHNpemVzOiBcIjcwdndcIixcbiAgICAgICAgICB9O1xuICAgICAgICAgIG5ld0VsZW1lbnQgPSBuZXdJbWFnZU5vZGU7XG4gICAgICAgICAgd2FzT3ZlcndyaXR0ZW4gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG5ld0ZpbGVOb2RlOiBJRmlsZSA9IHtcbiAgICAgICAgICAgIC4uLm5ld0VsZW1lbnQsXG4gICAgICAgICAgICB0eXBlOiBcImZpbGVcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBib2xkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgdW5kZXJsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHNyYzogKGV4aXN0YW50RmlsZSBhcyBhbnkpLnVybCxcbiAgICAgICAgICB9O1xuICAgICAgICAgIG5ld0VsZW1lbnQgPSBuZXdGaWxlTm9kZTtcbiAgICAgICAgICB3YXNPdmVyd3JpdHRlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbGUgYmVsb25ncyB0byBhIGRpZmZlcmVudCBlZGl0b3IsIGNsb25pbmcgdGhlIGNvbnRlbnRcbiAgICAgICAgY29uc3QgaW5mb0Zyb21JbnNlcnQgPSBhd2FpdCB0aGlzLnByb3BzLm9uSW5zZXJ0RmlsZUZyb21VUkwoXG4gICAgICAgICAgdXJsVG9SZWFkRnJvbSxcbiAgICAgICAgICAobmV3RWxlbWVudCBhcyBhbnkpLmZpbGVOYW1lIHx8IChuZXdFbGVtZW50IGFzIGFueSkuYWx0IHx8IGlkU3BlY2lmaWVkLFxuICAgICAgICAgIG5ld0VsZW1lbnQudHlwZSA9PT0gXCJpbWFnZVwiLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChpbmZvRnJvbUluc2VydCkge1xuICAgICAgICAgIGlmIChuZXdFbGVtZW50LnR5cGUgPT09IFwiaW1hZ2VcIikge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VOb2RlOiBJSW1hZ2UgPSB7XG4gICAgICAgICAgICAgIC4uLm5ld0VsZW1lbnQsXG4gICAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBib2xkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgdW5kZXJsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIGhlaWdodDogaW5mb0Zyb21JbnNlcnQuaGVpZ2h0LFxuICAgICAgICAgICAgICB3aWR0aDogaW5mb0Zyb21JbnNlcnQud2lkdGgsXG4gICAgICAgICAgICAgIHNyYzogaW5mb0Zyb21JbnNlcnQucmVzdWx0LnVybCxcbiAgICAgICAgICAgICAgc3JjSWQ6IGluZm9Gcm9tSW5zZXJ0LnJlc3VsdC5pZCxcbiAgICAgICAgICAgICAgc3JjU2V0OiBudWxsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG5ld0VsZW1lbnQgPSBpbWFnZU5vZGU7XG4gICAgICAgICAgICB3YXNPdmVyd3JpdHRlbiA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOb2RlOiBJRmlsZSA9IHtcbiAgICAgICAgICAgICAgLi4ubmV3RWxlbWVudCxcbiAgICAgICAgICAgICAgdHlwZTogXCJmaWxlXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYm9sZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzaXplOiBwcmV0dHlCeXRlcyhpbmZvRnJvbUluc2VydC5yZXN1bHQuc2l6ZSksXG4gICAgICAgICAgICAgIHNyYzogaW5mb0Zyb21JbnNlcnQucmVzdWx0LnVybCxcbiAgICAgICAgICAgICAgc3JjSWQ6IGluZm9Gcm9tSW5zZXJ0LnJlc3VsdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBuZXdFbGVtZW50ID0gZmlsZU5vZGU7XG4gICAgICAgICAgICB3YXNPdmVyd3JpdHRlbiA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0VsZW1lbnQgPSBudWxsO1xuICAgICAgICAgIHdhc092ZXJ3cml0dGVuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGlmIHdlIHN0aWxsIGhhdmUgdGhlIGVsZW1lbnQgYW5kIGl0IGhhcyBjaGlsZHJlblxuICAgIC8vIHdlIG5lZWQgdG8gcHJvY2VzcyB0aG9zZSB0b29cbiAgICBpZiAobmV3RWxlbWVudCAmJiBuZXdFbGVtZW50LmNoaWxkcmVuICYmICF3YXNPdmVyd3JpdHRlbikge1xuICAgICAgbmV3RWxlbWVudCA9IHsgLi4ubmV3RWxlbWVudCB9O1xuICAgICAgbmV3RWxlbWVudC5jaGlsZHJlbiA9IChcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoKG5ld0VsZW1lbnQuY2hpbGRyZW4gYXMgYW55KS5tYXAodGhpcy5maW5kQW5kSW5zZXJ0RmlsZXNGcm9tRGF0YVRyYW5zZmVyLmJpbmQodGhpcywgZGF0YSkpKVxuICAgICAgKS5maWx0ZXIoZSA9PiAhIWUpIGFzIGFueTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3RWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHJ1bnMgd2hlbiB3ZSBhcmUgaW5zZXJ0aW5nIHVzaW5nIHRoZSBzbGF0ZSBjbGlwYm9hcmRcbiAgICogQHBhcmFtIGRhdGEgdGhlIGRhdGEgdHJhbnNmZXJcbiAgICovXG4gIHB1YmxpYyBhc3luYyBpbnNlcnREYXRhKGRhdGE6IERhdGFUcmFuc2Zlcikge1xuICAgIC8vIHdlIGdyYWIgdGhlIGZyYWdtZW50IGRhdGEgZm9yIHNsYXRlXG4gICAgY29uc3QgZnJhZ21lbnQgPSBkYXRhLmdldERhdGEoJ2FwcGxpY2F0aW9uL3gtc2xhdGUtZnJhZ21lbnQnKTtcblxuICAgIC8vIGlmIHdlIGhhdmUgaXQgdGhpcyBpcyB0aGUgZGVmYXVsdCBjbGlwYm9hcmRcbiAgICAvLyB0aGlzIHNob3VsZCBub3QgaGFwcGVuIGJ5IGRlZmF1bHQgdGhpcyBtZWFucyBpdCBpcyB1c2luZyB0aGUgZmFsbGJhY2tcbiAgICAvLyBjbGlwYm9hcmQgbWVjaGFuaXNtXG4gICAgaWYgKGZyYWdtZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJUaGUgZWRpdG9yIHVzZWQgdGhlIGZhbGxiYWNrIGNsaXBib2FyZCBtZWNoYW5pc20gcmF0aGVyIHRoYW4gdGhlIG5ldyBjbGlwYm9hcmQsIGZpbGVzIG1heSBmYWlsIHRvIGxvYWRcIik7XG4gICAgICAvLyB0aGVuIHdlIGRlY29kZSBhbmQgcGFyc2VcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGVVUklDb21wb25lbnQod2luZG93LmF0b2IoZnJhZ21lbnQpKTtcbiAgICAgIC8vIG5vdGUgaG93IHdlIGZpbHRlciBpbiBjYXNlIGJpdHMgZmFpbCB0byBsb2FkIChha2EgaW1hZ2VzIGFuZCBmaWxlcylcbiAgICAgIGNvbnN0IHBhcnNlZCA9IChcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoSlNPTi5wYXJzZShkZWNvZGVkKS5tYXAodGhpcy5maW5kQW5kSW5zZXJ0RmlsZXNGcm9tRGF0YVRyYW5zZmVyLmJpbmQodGhpcywgZGF0YSkpKSBhcyBOb2RlW11cbiAgICAgICkuZmlsdGVyKGUgPT4gISFlKSBhcyBhbnk7XG5cbiAgICAgIGlmICghcGFyc2VkIHx8ICFwYXJzZWQubGVuZ3RoKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBmaW5kIGNoaWxkcmVuIHRvIGFkZFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBub3cgd2UgY2FuIGluc2VydCB0aGF0IGZyYWdtZW50IG9uY2Ugd2UgYXJlIGRvbmVcbiAgICAgIGNvbnN0IHNob3VsZFVzZUluc2VydEZyYWdtZW50ID0gIWlzU3VwZXJCbG9jayhwYXJzZWRbMF0pO1xuICAgICAgaWYgKHNob3VsZFVzZUluc2VydEZyYWdtZW50KSB7XG4gICAgICAgIC8vIGluc2VydGluZyBhIGZyYWdtZW50IGFsbG93cyBtZXJnaW5nIG9mIGJsb2Nrc1xuICAgICAgICAvLyB3aXRoIHRoaXMgd2UgZW5zdXJlIHRoYXQgZm9yIGV4YW1wbGUsIGEgdGl0bGUgY2FuIGJlIHBhc3RlZFxuICAgICAgICAvLyBpbnNpZGUgYSBwYXJhZ3JhcGhcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnRGcmFnbWVudCh0aGlzLmVkaXRvciwgcGFyc2VkKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yKSB7XG4gICAgICAgIC8vIHRoZSBuZXh0IG9uZSBpcyBhIHN1cGVyYmxvY2sgd2UgYXJlIHRyeWluZyB0byBwdXNoXG4gICAgICAgIC8vIHdlIGRvIG5vdCBhbGxvdyBpdCBhdHRlbXB0aW5nIHRvIG1lcmdlIHdpdGggb3VyIGN1cnJlbnRcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgcGFyc2VkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5maWxlcy5sZW5ndGgpIHtcbiAgICAgIEFycmF5LmZyb20oZGF0YS5maWxlcykuZm9yRWFjaCgoZikgPT4ge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5zdXBwb3J0ZWRJbWFnZVR5cGVzLmluY2x1ZGVzKGYudHlwZSkpIHtcbiAgICAgICAgICB0aGlzLmluc2VydEltYWdlKGYsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmluc2VydEZpbGUoZik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIG5ldyB3YXkgdGhhdCBvZmZlcnMgc3VwZXIgY29tcGFiaWxpdHkgd2l0aCBldmVyeXRoaW5nXG4gICAgY29uc3QgaHRtbERhdGEgPSBkYXRhLmdldERhdGEoXCJ0ZXh0L2h0bWxcIik7XG4gICAgaWYgKGh0bWxEYXRhKSB7XG4gICAgICAvLyB3ZSBkZXNlcmlhbGl6ZSBhbmQgcHJvY2VzcyBhIHJhdyBodG1sXG4gICAgICBjb25zdCBkZXNlcmlhbGl6ZWQgPSBkZXNlcmlhbGl6ZShodG1sRGF0YSwgbnVsbCwge1xuICAgICAgICBkb250Tm9ybWFsaXplOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIHRoZW4gc2VuZCBpdCBmb3IgZmlsZSBwcm9jZXNzaW5nXG4gICAgICBjb25zdCBwYXJzZWQgPSAoXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGRlc2VyaWFsaXplZC5jaGlsZHJlbi5tYXAodGhpcy5maW5kQW5kSW5zZXJ0RmlsZXNGcm9tRGF0YVRyYW5zZmVyLmJpbmQodGhpcywgZGF0YSkpKSBhcyBOb2RlW11cbiAgICAgICkuZmlsdGVyKGUgPT4gISFlKSBhcyBhbnk7XG5cbiAgICAgIGlmICghcGFyc2VkIHx8ICFwYXJzZWQubGVuZ3RoKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBmaW5kIGNoaWxkcmVuIHRvIGFkZFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBub3cgd2UgY2FuIGluc2VydCB0aGF0IGZyYWdtZW50IG9uY2Ugd2UgYXJlIGRvbmVcbiAgICAgIGNvbnN0IHNob3VsZFVzZUluc2VydEZyYWdtZW50ID0gIWlzU3VwZXJCbG9jayhwYXJzZWRbMF0pO1xuICAgICAgaWYgKHNob3VsZFVzZUluc2VydEZyYWdtZW50KSB7XG4gICAgICAgIC8vIGluc2VydGluZyBhIGZyYWdtZW50IGFsbG93cyBtZXJnaW5nIG9mIGJsb2Nrc1xuICAgICAgICAvLyB3aXRoIHRoaXMgd2UgZW5zdXJlIHRoYXQgZm9yIGV4YW1wbGUsIGEgdGl0bGUgY2FuIGJlIHBhc3RlZFxuICAgICAgICAvLyBpbnNpZGUgYSBwYXJhZ3JhcGhcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnRGcmFnbWVudCh0aGlzLmVkaXRvciwgcGFyc2VkKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yKSB7XG4gICAgICAgIC8vIHRoZSBuZXh0IG9uZSBpcyBhIHN1cGVyYmxvY2sgd2UgYXJlIHRyeWluZyB0byBwdXNoXG4gICAgICAgIC8vIHdlIGRvIG5vdCBhbGxvdyBpdCBhdHRlbXB0aW5nIHRvIG1lcmdlIHdpdGggb3VyIGN1cnJlbnRcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgcGFyc2VkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vcmlnaW5hbEluc2VydERhdGEoZGF0YSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldERhdGFVUkkoYmxvYjogQmxvYik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJsb2FkXCIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICAvLyBjb252ZXJ0IGltYWdlIGZpbGUgdG8gYmFzZTY0IHN0cmluZ1xuICAgICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCBhcyBhbnkpO1xuICAgICAgICB9LFxuICAgICAgICBmYWxzZVxuICAgICAgKTtcbiAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKCkgPT4ge1xuICAgICAgICByZWplY3QoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1bnMgcGVyIGVhY2ggcmljaCBlbGVtZW50IHRoYXQgaGFzIGp1c3QgYmVlbiBjb3BpZWQgdG8gdGhlIGNsaXBib2FyZFxuICAgKiBAcGFyYW0gZGF0YSB0aGUgZGF0YSB0cmFuc2ZlclxuICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgcmljaCBlbGVtZW50IHdlIGhhdmUganVzdCBjb3BpZWRcbiAgICovXG4gIHB1YmxpYyBhc3luYyBmaW5kQW5kQXBwZW5kRmlsZXNUb0RhdGFUcmFuc2ZlcihkYXRhOiBEYXRhVHJhbnNmZXIsIGVsZW1lbnQ6IFJpY2hFbGVtZW50KTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyB3ZSB3YW50IHRvIHNwb3QgaW1hZ2VzIGFuZCBmaWxlc1xuICAgIGlmIChlbGVtZW50LnR5cGUgPT09IFwiaW1hZ2VcIiB8fCBlbGVtZW50LnR5cGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAvLyBnZXQgdGhlIHVybFxuICAgICAgY29uc3QgdXJsVG9SZWFkRnJvbSA9IGVsZW1lbnQuc3JjO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgKChhd2FpdCBmZXRjaCh1cmxUb1JlYWRGcm9tKSkuYmxvYigpKTtcbiAgICAgICAgY29uc3QgZGF0YVVSSSA9IGF3YWl0IHRoaXMuZ2V0RGF0YVVSSShibG9iKTtcblxuICAgICAgICAvLyAvLyBpZiBpdCdzIGEgYmxvYlxuICAgICAgICAvLyBjb25zdCBpc0Jsb2IgPSB1cmxUb1JlYWRGcm9tLnN0YXJ0c1dpdGgoXCJibG9iOlwiKTtcblxuICAgICAgICAvLyAvLyB0aGVuIHdlIHNob3VsZCB0aGluayBhYm91dCBjb3B5aW5nIGl0IHJpZ2h0IGludG8gdGhlIGRhdGEgdHJhbnNmZXJcbiAgICAgICAgLy8gLy8gc2luY2UgYmxvYnMgYXJlIHRlbXBvcmFyeVxuICAgICAgICAvLyBpZiAoaXNCbG9iKSB7XG4gICAgICAgIC8vICAgY29uc3QgdXJsRGF0YSA9IHRoaXMucHJvcHMub25SZXRyaWV2ZURhdGFVUkkoZWxlbWVudC5zcmNJZCk7XG4gICAgICAgIC8vICAgaWYgKHVybERhdGEpIHtcbiAgICAgICAgLy8gICAgIGdhdGhlcmVkRmlsZXNbZWxlbWVudC5zcmNJZF0gPSB1cmxEYXRhO1xuICAgICAgICAvLyAgIH1cbiAgICAgICAgLy8gfVxuXG4gICAgICAgIGVsZW1lbnQuc3JjID0gZGF0YVVSSTtcbiAgICAgICAgZGVsZXRlIChlbGVtZW50IGFzIElJbWFnZSkuc3JjU2V0O1xuICAgICAgfSBjYXRjaCAoZXJyKSB7IH1cbiAgICB9XG5cbiAgICAvLyBub3cgd2UgcnVuIHBlciBlYWNoIGNoaWxkcmVuXG4gICAgaWYgKGVsZW1lbnQuY2hpbGRyZW4pIHtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKChlbGVtZW50LmNoaWxkcmVuIGFzIGFueSkubWFwKHRoaXMuZmluZEFuZEFwcGVuZEZpbGVzVG9EYXRhVHJhbnNmZXIuYmluZCh0aGlzLCBkYXRhKSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHJ1bnMgd2hlbiB3ZSBhcmUgcHJlcGFyaW5nIHRoZSBzbGF0ZSBjbGlwYm9hcmRcbiAgICogQHBhcmFtIGRhdGEgdGhlIGRhdGEgdHJhbnNmZXJcbiAgICovXG4gIHB1YmxpYyBhc3luYyBzZXRGcmFnbWVudERhdGEoZGF0YTogRGF0YVRyYW5zZmVyKSB7XG4gICAgLy8gd2UgcnVuIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB0byBwcmVwYXJlIHRoZSBjbGlwYm9hcmRcbiAgICB0aGlzLm9yaWdpbmFsU2V0RnJhZ21lbnREYXRhKGRhdGEpO1xuXG4gICAgLy8gbmVlZCB0byBmaW5kIHRoZSBmaWxlcyB0aGF0IGFyZSBpbmNsdWRlZCBpbiB0aGUgY29weVxuICAgIGNvbnN0IGZyYWdtZW50NjQgPSBkYXRhLmdldERhdGEoXCJhcHBsaWNhdGlvbi94LXNsYXRlLWZyYWdtZW50XCIpO1xuICAgIGlmIChmcmFnbWVudDY0ICYmIG5hdmlnYXRvci5jbGlwYm9hcmQpIHtcbiAgICAgIC8vIHdlIGFyZSBkb2luZyB0aGUgcmVhbCBjb3B5aW5nIGhlcmUgc2luY2UgdGhlIGNvcHlpbmcgbWVjaGFuaXNtXG4gICAgICAvLyB0aGF0IGNvbWVzIGJ5IGRlZmF1bHQgaXMgbm90IHZlcnkgZ29vZFxuICAgICAgY29uc3QgY29weURhdGFUcmVlOiBSaWNoRWxlbWVudFtdID0gSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoYXRvYihmcmFnbWVudDY0KSkpO1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY29weURhdGFUcmVlLm1hcCh0aGlzLmZpbmRBbmRBcHBlbmRGaWxlc1RvRGF0YVRyYW5zZmVyLmJpbmQodGhpcywgZGF0YSkpKTtcblxuICAgICAgY29uc3QgZG9jdW1lbnQgPSAoe1xuICAgICAgICBjaGlsZHJlbjogY29weURhdGFUcmVlIGFzIGFueSxcbiAgICAgICAgaWQ6IFwiQ09QWV9FTEVNRU5UXCIsXG4gICAgICAgIHJpY2g6IHRydWUsXG4gICAgICAgIHR5cGU6IFwiZG9jdW1lbnRcIiBhcyBcImRvY3VtZW50XCIsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgaHRtbCA9IHNlcmlhbGl6ZShkb2N1bWVudCkgYXMgSFRNTEVsZW1lbnRbXTtcbiAgICAgIGNvbnN0IGh0bWxTdHIgPSBodG1sLm1hcCgobikgPT4gbi5vdXRlckhUTUwpLmpvaW4oXCJcIik7XG4gICAgICBjb25zdCB0ZXh0ID0gc2VyaWFsaXplU3RyaW5nKGRvY3VtZW50KTtcblxuICAgICAgY29uc3QgdGV4dFBsYWluID0gbmV3IEJsb2IoW3RleHRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTtcbiAgICAgIGNvbnN0IGh0bWxCb2R5ID0gbmV3IEJsb2IoW2h0bWxTdHJdLCB7IHR5cGU6ICd0ZXh0L2h0bWwnIH0pO1xuICAgICAgY29uc3QgaXRlbSA9IG5ldyBDbGlwYm9hcmRJdGVtKHtcbiAgICAgICAgJ3RleHQvcGxhaW4nOiB0ZXh0UGxhaW4sXG4gICAgICAgIFwidGV4dC9odG1sXCI6IGh0bWxCb2R5LFxuICAgICAgfSk7XG4gICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlKFtpdGVtXSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVOb2RlQXQocGF0aDogUGF0aCwgdjogUGFydGlhbDxSaWNoRWxlbWVudCB8IElUZXh0Pikge1xuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHYsIHtcbiAgICAgIGF0OiBwYXRoLFxuICAgIH0pO1xuICB9XG4gIHByaXZhdGUgZGVsZXRlTm9kZUF0KHBhdGg6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLmRlbGV0ZSh0aGlzLmVkaXRvciwge1xuICAgICAgYXQ6IHBhdGgsXG4gICAgfSk7XG4gIH1cbiAgcHJpdmF0ZSBpbnNlcnROb2RlQXQocGF0aDogUGF0aCwgbm9kZTogUmljaEVsZW1lbnQgfCBJVGV4dCwgdGFyZ2V0SW5kZXg6IG51bWJlcikge1xuICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIG5vZGUsIHtcbiAgICAgIGF0OiBbLi4ucGF0aCwgdGFyZ2V0SW5kZXhdLFxuICAgIH0pO1xuICB9XG4gIHByaXZhdGUgbWVyZ2VOb2Rlc0F0KGJhc2VQYXRoOiBQYXRoLCByZWZlcmVuY2VQYXRoOiBQYXRoKSB7XG4gICAgY29uc3QgcGFyZW50UGF0aCA9IFsuLi5iYXNlUGF0aF07XG4gICAgcGFyZW50UGF0aC5wb3AoKTtcblxuICAgIC8vIGR1ZSB0byBhIHNsYXRlIGJ1ZyBtZXJnaW5nIGRvZXNuJ3QgcXVpdGUgd29ya1xuICAgIC8vIGl0IGp1c3QgZG9lcyBub3RoaW5nLCBkZXNwaXRlIHRoZSBzcGVjaWZpY2F0aW9uXG4gICAgLy8gdGhlIHNlY29uZCBhcmd1bWVudCBkb2Vzbid0IHBhc3MgZWl0aGVyXG4gICAgVHJhbnNmb3Jtcy5tZXJnZU5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICBhdDogcmVmZXJlbmNlUGF0aCxcbiAgICAgIHZvaWRzOiB0cnVlLFxuICAgIH0pO1xuICB9XG4gIHByaXZhdGUgc3BsaXRFbGVtZW50QW5kRXNjYXBlQ2hpbGRJbnRvUGFyZW50QXQocGF0aDogUGF0aCwgZXNjYXBpbmdDaGlsZEluZGV4OiBudW1iZXIpIHtcbiAgICBUcmFuc2Zvcm1zLmxpZnROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgYXQ6IFsuLi5wYXRoLCBlc2NhcGluZ0NoaWxkSW5kZXhdLFxuICAgIH0pXG4gIH1cbiAgcHJpdmF0ZSB3cmFwTm9kZUF0KHBhdGg6IFBhdGgsIHdyYXBwZXJzOiBSaWNoRWxlbWVudFtdKSB7XG4gICAgd3JhcHBlcnMuZm9yRWFjaCgod3JhcHBlcikgPT4ge1xuICAgICAgVHJhbnNmb3Jtcy53cmFwTm9kZXModGhpcy5lZGl0b3IsIHdyYXBwZXIsIHtcbiAgICAgICAgYXQ6IHBhdGgsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBwcml2YXRlIGdldE5vZGVBdChwYXRoOiBQYXRoKSB7XG4gICAgcmV0dXJuIE5vZGUuZ2V0KHRoaXMuZWRpdG9yLCBwYXRoKSBhcyBSaWNoRWxlbWVudCB8IElUZXh0O1xuICB9XG4gIHByaXZhdGUgY2xvbmVFbGVtZW50QXQoZnJvbVBhdGg6IFBhdGgsIHRvUGF0aDogUGF0aCkge1xuICAgIGNvbnN0IHRvQ29weU5vZGUgPSB0aGlzLmdldE5vZGVBdChmcm9tUGF0aCkgYXMgUmljaEVsZW1lbnQ7XG4gICAgY29uc3QgY29weSA9IHtcbiAgICAgIC4uLnRvQ29weU5vZGUsXG4gICAgfVxuICAgIGNvcHkuY2hpbGRyZW4gPSBbXTtcblxuICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGNvcHksIHtcbiAgICAgIGF0OiB0b1BhdGgsXG4gICAgfSk7XG4gIH1cbiAgcHJpdmF0ZSBtb3ZlTm9kZUF0KGZyb21QYXRoOiBQYXRoLCB0b1BhdGg6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLm1vdmVOb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgYXQ6IGZyb21QYXRoLFxuICAgICAgdG86IHRvUGF0aCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3JtYWxpemF0aW9uIGZ1bmNpdG9uIHRoYXQgb3ZlcnJpZGVzIHRoZSBub3JtYWxpemF0aW9uXG4gICAqIG9mIHRoZSBzdGFuZGFyZCBlZGl0b3JcbiAgICogQHBhcmFtIGVudHJ5IHRoZSBlbnRyeSB3ZSBhcmUgbm9ybWFsaXppbmdcbiAgICovXG4gIHB1YmxpYyBub3JtYWxpemVOb2RlKGVudHJ5OiBOb2RlRW50cnk8Tm9kZT4pIHtcbiAgICAvLyB0aGUgbm9ybWFsaXphdGlvbiBmdW5jdGlvbiB0aGF0IGNvbWVzXG4gICAgLy8gZnJvbSB0aGUgc2VyaWFsaXplciB0YWtlcyBjYXJlIG9mIHRoZVxuICAgIC8vIGVudGlyZSBzZXJpYWxpemF0aW9uIG1lY2hhbmlzbSBhbmQgc2hhbGwgbm90XG4gICAgLy8gYmUgcmVjYWxsZWQgd2hlbiBpdCdzIGRvaW5nIGl0cyBqb2JcbiAgICBpZiAodGhpcy5pc0luTm9ybWFsaXphdGlvbiB8fCB0aGlzLnByZXZlbnROb3JtYWxpemUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBbbm9kZSwgcGF0aF0gPSBlbnRyeTtcblxuICAgIC8vIGlmIGl0J3MgdGhlIGVkaXRvciBpdHNlbGYsIHRoaXMgaXMgdGhlIG9ubHkgY2FzZVxuICAgIC8vIHdlIHdhbnQgdG8gbm9ybWFsaXplXG4gICAgLy8gd2Ugd2FudCB0byBhdm9pZCBvdGhlcnMgYXMgdGhleSBhcmUgdmVyYm9zZVxuICAgIGlmIChFZGl0b3IuaXNFZGl0b3Iobm9kZSkpIHtcbiAgICAgIHRoaXMuaXNJbk5vcm1hbGl6YXRpb24gPSB0cnVlO1xuXG4gICAgICAvLyB0aGlzIHdpbGwgYmFzaWNhbGx5IGJlIHRydWUgZXZlcnkgdGltZVxuICAgICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIHdlIGluc2VydCBhIHBhcmFncmFwaFxuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLFxuICAgICAgICAgIHsgdHlwZTogXCJwYXJhZ3JhcGhcIiwgY2hpbGRyZW46IFtTVEFOREFSRF9URVhUX05PREUoKSBhcyBhbnldIH0sXG4gICAgICAgICAgeyBhdDogcGF0aC5jb25jYXQoMCkgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcHNldWRvRG9jdW1lbnQ6IElSb290TGV2ZWxEb2N1bWVudCA9IHtcbiAgICAgICAgICB0eXBlOiBcImRvY3VtZW50XCIsXG4gICAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4gYXMgYW55LFxuICAgICAgICAgIGlkOiB0aGlzLnN0YXRlLnRyZWVWYWx1ZS5pZCxcbiAgICAgICAgICByaWNoOiB0aGlzLnN0YXRlLnRyZWVWYWx1ZS5yaWNoLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG5vZGVBdFNlbGVjdGlvbiA9IHRoaXMuZWRpdG9yLnNlbGVjdGlvbiA/IHRoaXMuZ2V0Tm9kZUF0KHRoaXMuZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IucGF0aCkgOiBudWxsO1xuICAgICAgICBjb25zdCBub2RlSWdub3JlOiBQYXRoW10gPSBbXTtcbiAgICAgICAgaWYgKFRleHQuaXNUZXh0KG5vZGVBdFNlbGVjdGlvbikgJiYgbm9kZUF0U2VsZWN0aW9uLnRleHQgPT09IFwiXCIpIHtcbiAgICAgICAgICBub2RlSWdub3JlLnB1c2godGhpcy5lZGl0b3Iuc2VsZWN0aW9uLmFuY2hvci5wYXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbm9ybWFsaXplRWxlbWVudChcbiAgICAgICAgICAgIHBzZXVkb0RvY3VtZW50LFxuICAgICAgICAgICAgW10sXG4gICAgICAgICAgICBwc2V1ZG9Eb2N1bWVudCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgd29ya09uT3JpZ2luYWw6IGZhbHNlLFxuICAgICAgICAgICAgICB1cGRhdGVOb2RlQXQ6IHRoaXMudXBkYXRlTm9kZUF0LFxuICAgICAgICAgICAgICBkZWxldGVOb2RlQXQ6IHRoaXMuZGVsZXRlTm9kZUF0LFxuICAgICAgICAgICAgICBpbnNlcnROb2RlQXQ6IHRoaXMuaW5zZXJ0Tm9kZUF0LFxuICAgICAgICAgICAgICBtZXJnZU5vZGVzQXQ6IHRoaXMubWVyZ2VOb2Rlc0F0LFxuICAgICAgICAgICAgICBzcGxpdEVsZW1lbnRBbmRFc2NhcGVDaGlsZEludG9QYXJlbnRBdDogdGhpcy5zcGxpdEVsZW1lbnRBbmRFc2NhcGVDaGlsZEludG9QYXJlbnRBdCxcbiAgICAgICAgICAgICAgd3JhcE5vZGVBdDogdGhpcy53cmFwTm9kZUF0LFxuICAgICAgICAgICAgICBnZXROb2RlQXQ6IHRoaXMuZ2V0Tm9kZUF0LFxuICAgICAgICAgICAgICBjbG9uZUVsZW1lbnRBdDogdGhpcy5jbG9uZUVsZW1lbnRBdCxcbiAgICAgICAgICAgICAgbW92ZU5vZGVBdDogdGhpcy5tb3ZlTm9kZUF0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWdub3JlTm9kZXNBdDogbm9kZUlnbm9yZSxcbiAgICAgICAgICAgICAgdXNlQ29udGV4dFJ1bGVzT2Y6IHRoaXMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LFxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLnN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmlzSW5Ob3JtYWxpemF0aW9uID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIGZvciB0aGUgZGVmYXVsdCBlZGl0b3IgaW5saW5lIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgaXMgdG8gYmUgY29uc2lkZXJlZFxuICAgKiBAcmV0dXJucyBhIGJvb2xlYW4gb24gd2hldGhlciBpdCByZXByZXNlbnRzIGFuIGlubGluZSBlbGVtZW50XG4gICAqL1xuICBwdWJsaWMgaXNJbmxpbmUoZWxlbWVudDogUmljaEVsZW1lbnQpIHtcbiAgICByZXR1cm4gaXNJbmxpbmUoZWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgZm9yIHRoZSBkZWZhdWx0IGVkaXRvciB2b2lkIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgaXMgdG8gYmUgY29uc2lkZXJlZFxuICAgKiBAcmV0dXJucyBhIGJvb2xlYW4gb24gd2hldGhlciBpdCByZXByZXNlbnRzIGEgdm9pZCBlbGVtZW50XG4gICAqL1xuICBwdWJsaWMgaXNWb2lkKGVsZW1lbnQ6IFJpY2hFbGVtZW50KSB7XG4gICAgcmV0dXJuIGlzVm9pZChlbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSBmb3IgdGhlIGRlZmF1bHQgZWRpdG9yIGluc2VydCBicmVhayBmdW5jdGlvblxuICAgKi9cbiAgcHVibGljIGluc2VydEJyZWFrKCkge1xuICAgIGNvbnN0IGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudCA9IHRoaXMuc3RhdGUuY3VycmVudFN1cGVyQmxvY2tFbGVtZW50cyAmJlxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzW3RoaXMuc3RhdGUuY3VycmVudFN1cGVyQmxvY2tFbGVtZW50cy5sZW5ndGggLSAxXTtcblxuICAgIGNvbnN0IGlzTGlzdEl0ZW1CcmVhayA9IChcbiAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudCAmJlxuICAgICAgLy8gYW5kIHdlIGFyZSB3aXRoaW4gYSBsaXN0IGFuZCBhIGxpc3QgaXRlbVxuICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50LnR5cGUgPT09IFwibGlzdC1pdGVtXCJcbiAgICApO1xuICAgIGlmIChcbiAgICAgIC8vIGlmIHdlIGFyZSBzaW1wbHkgY29sbGFwc2VkXG4gICAgICBSYW5nZS5pc0NvbGxhcHNlZCh0aGlzLmVkaXRvci5zZWxlY3Rpb24pICYmXG4gICAgICAvLyBhbmQgd2UgaGF2ZSBhIGxpc3QgaXRlbVxuICAgICAgaXNMaXN0SXRlbUJyZWFrICYmXG4gICAgICAvLyBhbmQgdGhhdCBmaXJzdCBjaGlsZHJlbiBpcyBhbiBlbXB0eSBwYXJhZ3JhcGhcbiAgICAgIC8vIHRoZXJlIG1heSBiZSBhIHNlY29uZCBsaXN0XG4gICAgICAoY3VycmVudFN1cGVyQmxvY2tFbGVtZW50LmNoaWxkcmVuWzBdIGFzIGFueSkudHlwZSA9PT0gXCJwYXJhZ3JhcGhcIiAmJlxuICAgICAgLy8gd2l0aCBvbmUgZW1wdHkgdGV4dCBub2RlXG4gICAgICAoY3VycmVudFN1cGVyQmxvY2tFbGVtZW50LmNoaWxkcmVuWzBdIGFzIGFueSkuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmXG4gICAgICBUZXh0LmlzVGV4dCgoY3VycmVudFN1cGVyQmxvY2tFbGVtZW50LmNoaWxkcmVuWzBdIGFzIGFueSkuY2hpbGRyZW5bMF0pICYmXG4gICAgICAoY3VycmVudFN1cGVyQmxvY2tFbGVtZW50LmNoaWxkcmVuWzBdIGFzIGFueSkuY2hpbGRyZW5bMF0udGV4dCA9PT0gXCJcIlxuICAgICAgLy8gYW5kIHRoYXQgdGV4dCBub2RlIGlzIGVtcHR5XG4gICAgICAvLyBiYXNpY2FsbHlcbiAgICAgIC8vIDEuIGxpc3QgaXRlbSAxXG4gICAgICAvLyAyLiB8XG4gICAgICAvLyAzLiBsaXN0IGl0ZW0gM1xuICAgICAgLy8gYW5kIHdlIGFyZSBwcmVzc2luZyBlbnRlciB0aGVyZSB3aGVyZSB8IHJlcHJlc2VudHMgdGhlIGNhcmV0XG4gICAgKSB7XG4gICAgICAvLyB3ZSBuZWVkIHRvIGJyZWFrIHRoZSBsaXN0XG4gICAgICB0aGlzLmJyZWFrTGlzdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50KSB7XG4gICAgICAvLyBzdHJhbmdlXG4gICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXModGhpcy5lZGl0b3IsIHsgYWx3YXlzOiB0cnVlIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGlmIHdlIGFyZSBkZWFsaW5nIHdpdGggYSB2b2lkIGVsZW1lbnQgbGlrZSBhbiBpbWFnZVxuICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gY2xvbmUgaXRcbiAgICBpZiAodGhpcy5lZGl0b3IuaXNWb2lkKHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudCBhcyBhbnkpKSB7XG4gICAgICAvLyB0aGVuIHdlIHdhbnQgdG8gaW5zZXJ0IGFuIGVtcHR5IHBhcmFncmFwaFxuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgICB0eXBlOiBcInBhcmFncmFwaFwiLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLnRoaXMuc3RhdGUuY3VycmVudFRleHQsXG4gICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gbm93IHdlIGdldCB0aGUgZW5kIG9mIHRoZSBnaXZlbiByYW5nZVxuICAgIGNvbnN0IGVuZCA9IFJhbmdlLmVuZCh0aGlzLmVkaXRvci5zZWxlY3Rpb24pO1xuICAgIC8vIGFuZCBtYWtlIGEgY29weSBvZiB0aGUgYmxvY2sgZWxlbWVudCBhbmNob3JcbiAgICBjb25zdCBmaW5hbEJsb2NrUGF0aDogUGF0aCA9IFsuLi50aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3JdO1xuXG4gICAgLy8gYW5kIGxldCdzIGZpbmQgdGhlIGxhc3QgY2hpbGQgdGhhdCBzaG91bGQgYmUgYW4gdGV4dCBub2RlXG4gICAgLy8gYXMgd2UgZ28gZGVlcCBpbnNpZGUgdGhlIHN0cnVjdHVyZVxuICAgIGxldCBsYXN0Q2hpbGQ6IE5vZGUgPSB0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnQgYXMgYW55O1xuICAgIGlmIChsYXN0Q2hpbGQgJiYgRWxlbWVudC5pc0VsZW1lbnQobGFzdENoaWxkKSkge1xuICAgICAgZG8ge1xuICAgICAgICBjb25zdCBsYXN0UG9pbnQgPSBsYXN0Q2hpbGQuY2hpbGRyZW4ubGVuZ3RoIC0gMTtcbiAgICAgICAgbGFzdENoaWxkID0gbGFzdENoaWxkLmNoaWxkcmVuW2xhc3RQb2ludF0gYXMgYW55IGFzIE5vZGU7XG4gICAgICAgIGZpbmFsQmxvY2tQYXRoLnB1c2gobGFzdFBvaW50KTtcbiAgICAgIH0gd2hpbGUgKEVsZW1lbnQuaXNFbGVtZW50KGxhc3RDaGlsZCkpO1xuICAgIH1cblxuICAgIC8vIHVudGlsIHdlIGZpbmQgdGhlIHRleHQgbm9kZSwgdGhlIGxhc3QgdGV4dCBub2RlIGluIHRoZSBsYXN0IHBhcnRcbiAgICAvLyBvZiB0aGVzZSBcbiAgICBjb25zdCBmaW5hbEJsb2NrT2Zmc2V0ID0gbGFzdENoaWxkID8gKGxhc3RDaGlsZCBhcyBUZXh0KS50ZXh0Lmxlbmd0aCA6IG51bGw7XG5cbiAgICBjb25zdCBpc0VuZE9mTGluZSA9IChcbiAgICAgIGVuZC5vZmZzZXQgPT09IGZpbmFsQmxvY2tPZmZzZXQgJiZcbiAgICAgIFBhdGguZXF1YWxzKGZpbmFsQmxvY2tQYXRoLCBlbmQucGF0aClcbiAgICApO1xuXG4gICAgaWYgKGlzTGlzdEl0ZW1CcmVhaykge1xuICAgICAgLy8gb3RoZXJ3aXNlIHdlIGRvIGEgc2ltcGxlIHNwbGl0IG5vZGVcbiAgICAgIFRyYW5zZm9ybXMuc3BsaXROb2Rlcyh0aGlzLmVkaXRvciwgeyBhbHdheXM6IHRydWUsIG1hdGNoOiAobjogYW55KSA9PiBuLnR5cGUgPT09IFwibGlzdC1pdGVtXCIgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBkbyBhIHNpbXBsZSBzcGxpdCBub2RlXG4gICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXModGhpcy5lZGl0b3IsIHsgYWx3YXlzOiB0cnVlIH0pXG4gICAgfVxuXG4gICAgLy8gZ290dGEgY2xlYXIgdWkgaGFuZGxlcnMgYW5kIHdoYXRub3RcbiAgICBpZiAoaXNFbmRPZkxpbmUpIHtcbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgICAgdWlIYW5kbGVyOiBudWxsLFxuICAgICAgICBodG1sOiBudWxsLFxuICAgICAgICB1aUhhbmRsZXJBcmdzOiBudWxsLFxuICAgICAgICB0ZXh0Q29udGVudDogbnVsbCxcbiAgICAgIH0sIHtcbiAgICAgICAgbWF0Y2g6IChuKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGlzQmxvY2sobiBhcyBhbnkpO1xuICAgICAgICB9LFxuICAgICAgICBtb2RlOiBcImxvd2VzdFwiLFxuICAgICAgICBhdDogdGhpcy5lZGl0b3Iuc2VsZWN0aW9uLmFuY2hvci5wYXRoLFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgZnVuY3Rpb24gdG8gcGVyZm9ybSBhIGZvcndhcmQgZGVsZXRlXG4gICAqIGJhY2t3YXJkcyBldmVudFxuICAgKiBAcGFyYW0gdW5pdCB0aGUgdW5pdCB3ZSBhcmUgZGVhbGluZyB3aXRoXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlRm9yd2FyZCh1bml0OiBcImNoYXJhY3RlclwiIHwgXCJ3b3JkXCIgfCBcImxpbmVcIiB8IFwiYmxvY2tcIikge1xuICAgIC8vIGZpcnN0IHdlIHBpY2sgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IHRoaXMuZWRpdG9yXG5cbiAgICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKHNlbGVjdGlvbikpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50ICYmXG4gICAgICAgIHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudC5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgVGV4dC5pc1RleHQodGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50LmNoaWxkcmVuWzBdKSAmJlxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnQuY2hpbGRyZW5bMF0udGV4dCA9PT0gXCJcIlxuICAgICAgKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKHRoaXMuZWRpdG9yLCB7IGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3IgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZSh0aGlzLmVkaXRvciwgeyB1bml0IH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSBmdW5jdGlvbiB0byBwZXJmb3JtIGEgc3RhbmRhcmQgZGVsZXRlXG4gICAqIGJhY2t3YXJkcyBldmVudFxuICAgKiBAcGFyYW0gdW5pdCB0aGUgdW5pdCB3ZSBhcmUgZGVhbGluZyB3aXRoXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlQmFja3dhcmQodW5pdDogXCJjaGFyYWN0ZXJcIiB8IFwid29yZFwiIHwgXCJsaW5lXCIgfCBcImJsb2NrXCIpIHtcbiAgICAvLyBmaXJzdCB3ZSBwaWNrIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSB0aGlzLmVkaXRvcjtcblxuICAgIGNvbnN0IGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudCA9IHRoaXMuc3RhdGUuY3VycmVudFN1cGVyQmxvY2tFbGVtZW50cyAmJlxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzW3RoaXMuc3RhdGUuY3VycmVudFN1cGVyQmxvY2tFbGVtZW50cy5sZW5ndGggLSAxXTtcblxuICAgIC8vIGlmIHdlIGhhdmUgb25lIG9mIGFueSBraW5kXG4gICAgaWYgKFxuICAgICAgc2VsZWN0aW9uICYmXG4gICAgICAvLyBhbmQgaXQncyBjb2xsYXBzZWRcbiAgICAgIFJhbmdlLmlzQ29sbGFwc2VkKHNlbGVjdGlvbikgJiZcbiAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudCAmJlxuICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50LnR5cGUgPT09IFwibGlzdC1pdGVtXCIgJiZcbiAgICAgIChcbiAgICAgICAgLy8gYW5kIHdlIGFyZSBkZWxldGluZyBhIGNoYXJhY3RlciBvZiBhIHdvcmRcbiAgICAgICAgKFxuICAgICAgICAgICh1bml0ID09PSBcImNoYXJhY3RlclwiIHx8IHVuaXQgPT09IFwid29yZFwiKSAmJlxuICAgICAgICAgIC8vIGFuZCB3ZSBhcmUgYXQgdGhlIHN0YXJ0IG9mIHRoZSBibG9ja1xuICAgICAgICAgIHNlbGVjdGlvbi5hbmNob3Iub2Zmc2V0ID09PSAwXG4gICAgICAgICkgfHxcbiAgICAgICAgLy8gb3Igd2UgYXJlIHJlbW92aW5nIGEgbGluZSBvciBibG9ja1xuICAgICAgICAoXG4gICAgICAgICAgdW5pdCA9PT0gXCJsaW5lXCIgfHwgdW5pdCA9PSBcImJsb2NrXCJcbiAgICAgICAgKVxuICAgICAgKVxuICAgICkge1xuICAgICAgLy8gd2UgbmVlZCB0byBicmVhayB0aGUgbGlzdCwgYnJlYWtpbmcgdGhlIGxpc3QgY29uc2lzdCBvZiBzcGxpdHRpbmdcbiAgICAgIC8vIG9uZSBsaXN0IGludG8gdHdvLCByZW1vdmluZyB0aGUgZmlyc3Qgb3IgdGhlIGxhc3QgZWxlbWVudCBiYWNrIHRvIGEgcGFyYWdyYXBoXG4gICAgICAvLyBvciB3aGF0bm90LCBldGMuLi5cbiAgICAgIHRoaXMuYnJlYWtMaXN0KCk7XG5cbiAgICAgIC8vIG90aGVyd2lzZSBpZiB3ZSBoYXZlIGEgc2VsZWN0aW9uLCBhbmQgdGhlIHNlbGVjdGlvbiBpcyBjb2xsYXBzZWRcbiAgICB9IGVsc2UgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pKSB7XG4gICAgICAvLyB3ZSBtdXN0IGF2b2lkIHJlbW92aW5nIGN1cnJlbnQgbG9jYXRpb24gaWYgc3VjaCBpcyBlbXB0eVxuICAgICAgLy8gdGhpcyBpcyBiZWNhdXNlIGVnLiBpZiB3ZSBoYXZlIGEgYm9sZCB0ZXh0XG4gICAgICAvLyB0aGVuIHdlIHdhbnQgdG8gZW5zdXJlIHRoYXQgc3VjaCBpcyBub3QgcmVtb3ZlZFxuICAgICAgLy8gdGhlcmUgYXJlIGhvd2V2ZXIgaW4gbW9zdCBjaXJjdW1zdGFuY2VzIHdlIHdhbnQgdG8gZW5zdXJlXG4gICAgICAvLyBhbnkgZW1wdHkgdGV4dCBpcyByZW1vdmVkIGV2ZW4gaW4gdGhlIGN1cnJlbnQgY2FyZXRcbiAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKHRoaXMuZWRpdG9yLCB7IHVuaXQsIHJldmVyc2U6IHRydWUgfSk7XG4gICAgICAvLyBvdGhlcndpc2VcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQnJlYWtzIHRoZSBsaXN0IGJhc2VkIG9uIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgKiB3ZSBtdXN0IGJlIGluIGEgbGlzdCBjdXJyZW50bHksIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkXG4gICAqIGJ5IHRoZSBkZWxldGUgYmFja3dhcmRzIGZ1bmN0aW9uYWxpdHkgYXMgd2VsbCBhcyB0aGUgdG9nZ2xlXG4gICAqIGxpc3Qgb25lXG4gICAqL1xuICBwdWJsaWMgYnJlYWtMaXN0KCkge1xuICAgIHRoaXMucHJldmVudE5vcm1hbGl6ZSA9IHRydWU7XG5cbiAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKFxuICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICB7XG4gICAgICAgIG1hdGNoOiAobjogYW55KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG4udHlwZSA9PT0gXCJsaXN0XCI7XG4gICAgICAgIH0sXG4gICAgICAgIG1vZGU6IFwibG93ZXN0XCIsXG4gICAgICAgIHNwbGl0OiB0cnVlLFxuICAgICAgfVxuICAgICk7XG5cbiAgICB0aGlzLnByZXZlbnROb3JtYWxpemUgPSBmYWxzZTtcblxuICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoXG4gICAgICB0aGlzLmVkaXRvcixcbiAgICAgIHtcbiAgICAgICAgbWF0Y2g6IChuOiBhbnkpID0+IHtcbiAgICAgICAgICByZXR1cm4gbi50eXBlID09PSBcImxpc3QtaXRlbVwiO1xuICAgICAgICB9LFxuICAgICAgICBtb2RlOiBcImxvd2VzdFwiLFxuICAgICAgICBzcGxpdDogdHJ1ZSxcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEluc2VydHMgYSBzdXBlcmJsb2NrIGJyZWFrLCBzaW5jZSB5b3UgbWlnaHQgbm90IGJlIGFibGUgdG8gZXNjYXBlXG4gICAqIHN1cGVyYmxvY2tzLCBlZy4gc3VjaCBhcyBhIHNpbmdsZSBjb250YWluZXIsIHlvdSB3aWxsIHVzZSBhIHN1cGVyYmxvY2sgYnJlYWtcbiAgICogYWx0K2VudGVyIGluIG9yZGVyIHRvIGVzY2FwZSB0aGUgc3VwZXJibG9ja1xuICAgKiBcbiAgICogQHBhcmFtIGF0IHRoZSBwYXRoIG9mIHRoZSBzdXBlcmJsb2NrIHRvIGluc2VydCBhIGJyZWFrIGF0XG4gICAqIEBwYXJhbSByZXZlcnNlIHdoZXRoZXIgdG8gaW5zZXJ0IGl0IGJlZm9yZSBvciBhZnRlciwgYnkgZGVmYXVsdCBpdCB3aWxsIGJlIGFmdGVyLCB1c2UgdGhpcyBmbGFnIGZvciBiZWZvcmVcbiAgICovXG4gIHB1YmxpYyBpbnNlcnRTdXBlcmJyZWFrKGF0PzogUGF0aCwgcmV2ZXJzZT86IGJvb2xlYW4pIHtcbiAgICBsZXQgY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbUFuY2hvciA9IGF0IHx8IChcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudCAmJiBpc1ZvaWQodGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50KSAmJiB0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3JcbiAgICApIHx8IChcbiAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzICYmXG4gICAgICAgIHRoaXMuc3RhdGUuY3VycmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1t0aGlzLnN0YXRlLmN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMubGVuZ3RoIC0gMV1cbiAgICAgICk7XG5cbiAgICBpZiAoIWN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb21BbmNob3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbSA9IE5vZGUuZ2V0KHRoaXMuZWRpdG9yLCBjdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tQW5jaG9yKSBhcyBSaWNoRWxlbWVudDtcbiAgICAvLyBtYWtlIGEgY29weVxuICAgIGN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb21BbmNob3IgPSBbLi4uY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbUFuY2hvcl07XG4gICAgLy8gc28gd2UgZ2V0IHRoaXMgYW5jaG9yIGZvciB0aGUgcGFyZW50XG4gICAgbGV0IHBhcmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yID0gWy4uLmN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb21BbmNob3JdO1xuICAgIHBhcmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yLnBvcCgpO1xuICAgIGxldCBwYXJlbnRTdXBlckJsb2NrRWxlbWVudDogUmljaEVsZW1lbnQgPSBudWxsO1xuXG4gICAgLy8gYW5kIG5vdyBsb29wXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIC8vIGdldCB0aGUgcGFyZW50IGVsZW1lbnQgYW5kIGNoZWNrIHRoYXQgcGFyYWdyYXBocyBjYW4gYmUgYWRkZWQgdG8gaXRcbiAgICAgIHBhcmVudFN1cGVyQmxvY2tFbGVtZW50ID0gTm9kZS5nZXQodGhpcy5lZGl0b3IsIHBhcmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yKSBhcyBSaWNoRWxlbWVudDtcbiAgICAgIGNvbnN0IGFsbG93c0NoaWxkcmVuID0gU0VSSUFMSVpBVElPTl9SRUdJU1RSWS5BTExPV1NfQ0hJTERSRU5bcGFyZW50U3VwZXJCbG9ja0VsZW1lbnQudHlwZV07XG4gICAgICBjb25zdCBjYW5QYXJlbnRIYXZlUGFyYWdyYXBoQXNDaGlsZHJlbiA9ICFhbGxvd3NDaGlsZHJlbiB8fCBhbGxvd3NDaGlsZHJlbi5pbmNsdWRlcyhcInBhcmFncmFwaFwiKTtcbiAgICAgIGNvbnN0IGlzQVNvbG9Fc2NhcGFibGVUeXBlID0gY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbS50eXBlID09PSBcImxpc3RcIjtcblxuICAgICAgLy8gY291bGQgYmUgdGhlIGVkaXRvciwgc28gd2Ugc3RvcFxuICAgICAgaWYgKFxuICAgICAgICAoXG4gICAgICAgICAgLy8gbGlzdCBhbmQgbGlzdCBpdGVtcyBjYW4gYmUgZXNjYXBlZCBieVxuICAgICAgICAgIC8vIHN0YW5kYXJkIGVudGVyaW5nIHNvIHdlIGRvbid0IGFsbG93IHRoYXQgYXMgYSBicmVhayBwb2ludFxuICAgICAgICAgICFpc0FTb2xvRXNjYXBhYmxlVHlwZSAmJlxuICAgICAgICAgIGNhblBhcmVudEhhdmVQYXJhZ3JhcGhBc0NoaWxkcmVuXG4gICAgICAgICkgfHxcbiAgICAgICAgIXBhcmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yLmxlbmd0aFxuICAgICAgKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBvdGhlcndpc2Ugd2UgZ28gb25lIGxldmVsIHVwIGZvciBib3RoXG4gICAgICBwYXJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvci5wb3AoKTtcbiAgICAgIGN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb21BbmNob3IucG9wKCk7XG4gICAgICBjdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tID0gTm9kZS5nZXQodGhpcy5lZGl0b3IsIGN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb21BbmNob3IpIGFzIFJpY2hFbGVtZW50O1xuICAgIH07XG5cbiAgICAvLyBjYW5ub3QgYnJlYWsgYXMgaXQncyBhIHNvbG8gZXNjYXBhYmxlIHR5cGVcbiAgICBpZiAoY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbS50eXBlID09PSBcImxpc3RcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFuZCBub3cgd2UgbmVlZCB0byBnZXQgdGhlIG5leHQgYW5jaG9yIHRoYXQgaXMgbmV4dCB0byBzdWNoIGJsb2NrXG4gICAgY29uc3QgbmV4dEFuY2hvciA9IGN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb21BbmNob3I7XG4gICAgaWYgKCFyZXZlcnNlKSB7XG4gICAgICAvLyBpZiBpdCdzIGluIHJldmVyc2Ugd2UgYWN0dWFsbHkganVzdCBpbnNlcnQgcmlnaHQgaW4gdGhlIHNhbWUgc3BvdFxuICAgICAgLy8gd2hpY2ggd2lsbCBwdXNoIHRoZSBnaXZlbiBzdXBlcmJsb2NrIGZvcndhcmRzXG4gICAgICBuZXh0QW5jaG9yW25leHRBbmNob3IubGVuZ3RoIC0gMV0rKztcbiAgICB9XG5cbiAgICAvLyBhbmQgd2UgaW5zZXJ0IGEgY2xvbmUgYmFzZWQgb24gdGhlIGJsb2NrIGl0c2VsZlxuICAgIC8vIHdpdGggbm8gdGV4dFxuICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIHR5cGU6IFwicGFyYWdyYXBoXCIgYXMgYW55LFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgIH0gYXMgYW55XG4gICAgICBdXG4gICAgfSwgeyBhdDogbmV4dEFuY2hvciB9KTtcblxuICAgIC8vIGFuZCB3ZSB3YW50IHRvIGZvY3VzIG9uIHN1Y2ggdGV4dFxuICAgIGNvbnN0IG5leHRBbmNob3JUZXh0ID0gbmV4dEFuY2hvci5jb25jYXQoWzBdKTtcblxuICAgIHRoaXMuZm9jdXNBdCh7XG4gICAgICBhbmNob3I6IHtcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICBwYXRoOiBuZXh0QW5jaG9yVGV4dCxcbiAgICAgIH0sXG4gICAgICBmb2N1czoge1xuICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgIHBhdGg6IG5leHRBbmNob3JUZXh0LFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBhbmNob3JzIGFuZCB0aGUgY29udGV4dCBiYXNlZCBvbiBhIGdpdmVuIHZhbHVlXG4gICAqIChvciB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgZWRpdG9yKSBhbmQgdGhlIHNlbGVjdGlvbiBub2Rlc1xuICAgKiB0aGF0IGFyZSBjdXJyZW50bHkgc2VsZWN0ZWQgKG9yIGl0IHdpbGwgb3ZlcnJpZGUgd2l0aCB0aGUgZGVmYXVsdHMpXG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGFuY2hvciB0aGF0IGlzIGN1cnJlbnRseSBkZWVtZWQgdG8gYmUgc2VsZWN0ZWQgYXRcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0aGF0IHdlIGFyZSB3b3JraW5nIHdpdGgsIGlmIG5vdCBwcm92aWRlZCBpdCB3aWxsIHRha2UgaXQgZnJvbSB0aGUgc3RhdGVcbiAgICogQHBhcmFtIGN1cnJlbnRHaXZlblNlbGVjdGVkTm9kZUFuY2hvciB0aGUgc2VsZWN0ZWQgbm9kZSBhbmNob3IsIGFuZCB0ZXh0IGFuY2hvciBpZiBub3QgcHJvdmlkZWRcbiAgICogaXQgd2lsbCB1c2UgdGhlIGRlZmF1bHQgdmFsdWVzIGJhc2VkIG9uIHRoZSBsb2dpYyBvZiB0aGUgY2FsY3VsYXRlZCBhbmNob3JzXG4gICAqL1xuICBwdWJsaWMgY2FsY3VsYXRlQW5jaG9ycyhcbiAgICBhbmNob3I6IFBhdGgsXG4gICAgdmFsdWU/OiBOb2RlW10sXG4gICAgY3VycmVudEdpdmVuU2VsZWN0ZWROb2RlQW5jaG9yPzogUGF0aCxcbiAgKSB7XG4gICAgLy8gZmlyc3Qgd2Ugc2V0IHVwIGFsbCB0aGUgYmFzaWNzIHRvIHRoZWlyIG51bGwgdmFsdWVcbiAgICBsZXQgY3VycmVudElubGluZUVsZW1lbnQ6IFJpY2hFbGVtZW50ID0gbnVsbDtcbiAgICBsZXQgY3VycmVudElubGluZUVsZW1lbnRBbmNob3I6IFBhdGggPSBudWxsO1xuICAgIGxldCBjdXJyZW50QmxvY2tFbGVtZW50OiBSaWNoRWxlbWVudCA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3I6IFBhdGggPSBudWxsO1xuICAgIGxldCBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzOiBSaWNoRWxlbWVudFtdID0gbnVsbDtcbiAgICBsZXQgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yczogUGF0aFtdID0gbnVsbDtcbiAgICBsZXQgY3VycmVudFRleHQ6IElUZXh0ID0gbnVsbDtcbiAgICBsZXQgY3VycmVudFRleHRBbmNob3I6IFBhdGggPSBudWxsO1xuXG4gICAgbGV0IHByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yOiBQYXRoID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yO1xuICAgIGxldCBwcmV2aW91c1RleHRBbmNob3I6IFBhdGggPSB0aGlzLnN0YXRlLmN1cnJlbnRUZXh0QW5jaG9yO1xuXG4gICAgLy8gbm93IHdlIGRvIG5lZWQgdG8gc2V0dXAgdGhlIGFuY2hvciBpZiB3ZSBoYXZlIGFuIGFuY2hvclxuICAgIC8vIGluIHRoYXQgY2FzZSB3ZSBuZWVkIHRvIHBvcHVsYXRlIHRoZXNlIGZpZWxkc1xuICAgIGlmIChhbmNob3IpIHtcbiAgICAgIC8vIHRoZSBjdXJyZW50IGVsZW1lbnRcbiAgICAgIGxldCBjdXJyZW50TG9vcGluZ0VsZW1lbnQgPSB2YWx1ZSA/IHtcbiAgICAgICAgY2hpbGRyZW46IHZhbHVlLFxuICAgICAgfSBhcyBhbnkgOiB0aGlzLnN0YXRlLnRyZWVWYWx1ZTtcbiAgICAgIGNvbnN0IGxvb3BpbmdBbmNob3I6IFBhdGggPSBbXTtcblxuICAgICAgLy8gd2UgbG9vcCBpbiBvdXIgdGV4dCBhbmNob3JcbiAgICAgIGFuY2hvci5mb3JFYWNoKChuOiBudW1iZXIsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgbG9vcGluZ0FuY2hvci5wdXNoKG4pO1xuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhbiBlbGVtZW50XG4gICAgICAgIGN1cnJlbnRMb29waW5nRWxlbWVudCA9IGN1cnJlbnRMb29waW5nRWxlbWVudCAmJiBjdXJyZW50TG9vcGluZ0VsZW1lbnQuY2hpbGRyZW5bbl0gYXMgUmljaEVsZW1lbnQ7XG5cbiAgICAgICAgLy8gaWYgaXQncyBhIG5vbiBpbmxpbmUgdGhlbiB3ZSBhcmUgaW50byBvdXIgY3VycmVudCBibG9ja1xuICAgICAgICBpZiAoY3VycmVudExvb3BpbmdFbGVtZW50ICYmIFNFUklBTElaQVRJT05fUkVHSVNUUlkuSU5MSU5FU1tjdXJyZW50TG9vcGluZ0VsZW1lbnQudHlwZV0pIHtcbiAgICAgICAgICBjdXJyZW50SW5saW5lRWxlbWVudCA9IGN1cnJlbnRMb29waW5nRWxlbWVudDtcbiAgICAgICAgICBjdXJyZW50SW5saW5lRWxlbWVudEFuY2hvciA9IFsuLi5sb29waW5nQW5jaG9yXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHdlIGhhdmUgYSBzdXBlcmJsb2NrIG9yIGxpc3QtaXRlbSBlbGVtZW50IHRoYXQgY29udGFpbnMgbGlzdHNcbiAgICAgICAgaWYgKGN1cnJlbnRMb29waW5nRWxlbWVudCAmJiBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLkJMT0NLU1tjdXJyZW50TG9vcGluZ0VsZW1lbnQudHlwZV0pIHtcbiAgICAgICAgICBjdXJyZW50QmxvY2tFbGVtZW50ID0gY3VycmVudExvb3BpbmdFbGVtZW50O1xuICAgICAgICAgIGN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3IgPSBbLi4ubG9vcGluZ0FuY2hvcl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgc3VwZXJibG9jayBvciBsaXN0LWl0ZW0gZWxlbWVudCB0aGF0IGNvbnRhaW5zIGxpc3RzXG4gICAgICAgIGlmIChjdXJyZW50TG9vcGluZ0VsZW1lbnQgJiYgU0VSSUFMSVpBVElPTl9SRUdJU1RSWS5TVVBFUkJMT0NLU1tjdXJyZW50TG9vcGluZ0VsZW1lbnQudHlwZV0pIHtcbiAgICAgICAgICBpZiAoIWN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHMpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHMgPSBbXTtcbiAgICAgICAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50cy5wdXNoKGN1cnJlbnRMb29waW5nRWxlbWVudCk7XG4gICAgICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycy5wdXNoKFsuLi5sb29waW5nQW5jaG9yXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VycmVudExvb3BpbmdFbGVtZW50ICYmIFRleHQuaXNUZXh0KGN1cnJlbnRMb29waW5nRWxlbWVudCkpIHtcbiAgICAgICAgICBjdXJyZW50VGV4dCA9IGN1cnJlbnRMb29waW5nRWxlbWVudDtcbiAgICAgICAgICBjdXJyZW50VGV4dEFuY2hvciA9IFsuLi5sb29waW5nQW5jaG9yXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gbm93IGZvciBvdXIgc2VsZWN0aW9uLCBieSBkZWZhdWx0IGl0J3MgYWxsIG51bGxcbiAgICBsZXQgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvcjogUGF0aCA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQ6IFJpY2hFbGVtZW50ID0gbnVsbDtcbiAgICBsZXQgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50OiBSaWNoRWxlbWVudCA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50czogUmljaEVsZW1lbnRbXSA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvcjogUGF0aCA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yczogUGF0aFtdID0gbnVsbDtcbiAgICBsZXQgY3VycmVudFNlbGVjdGVkVGV4dDogSVRleHQgPSBudWxsO1xuICAgIGxldCBjdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yOiBQYXRoID0gbnVsbDtcblxuICAgIGxldCBnaXZlblNlbGVjdGVkTm9kZUFuY2hvcklzQ29ycnVwdGVkID0gZmFsc2U7XG5cbiAgICBpZiAoY3VycmVudEdpdmVuU2VsZWN0ZWROb2RlQW5jaG9yKSB7XG4gICAgICBsZXQgY3VycmVudFNlbGVjdGVkRWxlbWVudENvcnJ1cHRpb25UZXN0ID0gdmFsdWUgPyB7XG4gICAgICAgIGNoaWxkcmVuOiB2YWx1ZSxcbiAgICAgIH0gYXMgYW55IDogdGhpcy5zdGF0ZS50cmVlVmFsdWU7XG4gICAgICBnaXZlblNlbGVjdGVkTm9kZUFuY2hvcklzQ29ycnVwdGVkID0gY3VycmVudEdpdmVuU2VsZWN0ZWROb2RlQW5jaG9yLnNvbWUoKG46IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIWN1cnJlbnRTZWxlY3RlZEVsZW1lbnRDb3JydXB0aW9uVGVzdCB8fFxuICAgICAgICAgICFjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29ycnVwdGlvblRlc3QuY2hpbGRyZW4gfHxcbiAgICAgICAgICAhY3VycmVudFNlbGVjdGVkRWxlbWVudENvcnJ1cHRpb25UZXN0LmNoaWxkcmVuW25dXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRDb3JydXB0aW9uVGVzdCA9IGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRDb3JydXB0aW9uVGVzdC5jaGlsZHJlbltuXTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBzZWxlY3RlZCBhbmNob3IgYW5kIG9yaWdpblxuICAgIC8vIHdlIGhhdmUgcHVycG9zZWx5IHNldCB0aGVuIHdlIHNob3VsZFxuICAgIC8vIGRlZmF1bHQgdG8gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YWx1ZXMsIGlmIGFueVxuICAgIGlmICghY3VycmVudEdpdmVuU2VsZWN0ZWROb2RlQW5jaG9yIHx8IGdpdmVuU2VsZWN0ZWROb2RlQW5jaG9ySXNDb3JydXB0ZWQpIHtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IgPSBjdXJyZW50SW5saW5lRWxlbWVudEFuY2hvcjtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQgPSBjdXJyZW50SW5saW5lRWxlbWVudDtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCA9IGN1cnJlbnRCbG9ja0VsZW1lbnQ7XG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IgPSBjdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yO1xuICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzID0gY3VycmVudFN1cGVyQmxvY2tFbGVtZW50cztcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycyA9IGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM7XG4gICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0ID0gY3VycmVudFRleHQ7XG4gICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yID0gY3VycmVudFRleHRBbmNob3I7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGxvb3BpbmdBbmNob3I6IFBhdGggPSBbXTtcblxuICAgICAgLy8gbm93IHdlIG5lZWQgdG8gcHJlcGFyZSBhbmQgZmluZCB0aGUgdGV4dCBvcmlnaW4sIGFuZCBjb250ZXh0XG4gICAgICAvLyBhcyB3ZWxsIGFzIHRoZSBzZWxlY3RlZCBlbGVtZW50XG4gICAgICBsZXQgY3VycmVudExvb3BpbmdFbGVtZW50ID0gdmFsdWUgPyB7XG4gICAgICAgIGNoaWxkcmVuOiB2YWx1ZSxcbiAgICAgIH0gYXMgYW55IDogdGhpcy5zdGF0ZS50cmVlVmFsdWU7XG5cbiAgICAgIC8vIHNvIHdlIGxvb3AgaW4gdGhlIG9yaWdpbiBhbmNob3JcbiAgICAgIGN1cnJlbnRHaXZlblNlbGVjdGVkTm9kZUFuY2hvci5mb3JFYWNoKChuOiBudW1iZXIsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgLy8gYW5kIHVwZGF0ZSB0aGUgbm9kZSBvcmlnaW5cbiAgICAgICAgY3VycmVudExvb3BpbmdFbGVtZW50ID0gY3VycmVudExvb3BpbmdFbGVtZW50ICYmIGN1cnJlbnRMb29waW5nRWxlbWVudC5jaGlsZHJlbltuXTtcbiAgICAgICAgbG9vcGluZ0FuY2hvci5wdXNoKG4pO1xuXG4gICAgICAgIGlmIChjdXJyZW50TG9vcGluZ0VsZW1lbnQgJiYgU0VSSUFMSVpBVElPTl9SRUdJU1RSWS5JTkxJTkVTW2N1cnJlbnRMb29waW5nRWxlbWVudC50eXBlXSkge1xuICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQgPSBjdXJyZW50TG9vcGluZ0VsZW1lbnQ7XG4gICAgICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvciA9IFsuLi5sb29waW5nQW5jaG9yXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHdlIGhhdmUgYSBzdXBlcmJsb2NrIG9yIGxpc3QtaXRlbSBlbGVtZW50IHRoYXQgY29udGFpbnMgbGlzdHNcbiAgICAgICAgaWYgKGN1cnJlbnRMb29waW5nRWxlbWVudCAmJiBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLkJMT0NLU1tjdXJyZW50TG9vcGluZ0VsZW1lbnQudHlwZV0pIHtcbiAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQgPSBjdXJyZW50TG9vcGluZ0VsZW1lbnQ7XG4gICAgICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yID0gWy4uLmxvb3BpbmdBbmNob3JdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHN1cGVyYmxvY2sgb3IgbGlzdC1pdGVtIGVsZW1lbnQgdGhhdCBjb250YWlucyBsaXN0c1xuICAgICAgICBpZiAoY3VycmVudExvb3BpbmdFbGVtZW50ICYmIFNFUklBTElaQVRJT05fUkVHSVNUUlkuU1VQRVJCTE9DS1NbY3VycmVudExvb3BpbmdFbGVtZW50LnR5cGVdKSB7XG4gICAgICAgICAgaWYgKCFjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyA9IFtdO1xuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cy5wdXNoKGN1cnJlbnRMb29waW5nRWxlbWVudCk7XG4gICAgICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLnB1c2goWy4uLmxvb3BpbmdBbmNob3JdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXJyZW50TG9vcGluZ0VsZW1lbnQgJiYgVGV4dC5pc1RleHQoY3VycmVudExvb3BpbmdFbGVtZW50KSkge1xuICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHQgPSBjdXJyZW50TG9vcGluZ0VsZW1lbnQ7XG4gICAgICAgICAgY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvciA9IFsuLi5sb29waW5nQW5jaG9yXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcHNldWRvRG9jdW1lbnQ6IElSb290TGV2ZWxEb2N1bWVudCA9IHtcbiAgICAgIHR5cGU6IFwiZG9jdW1lbnRcIixcbiAgICAgIGNoaWxkcmVuOiB2YWx1ZSBhcyBhbnksXG4gICAgICBpZDogdGhpcy5zdGF0ZS50cmVlVmFsdWUuaWQsXG4gICAgICByaWNoOiB0aGlzLnN0YXRlLnRyZWVWYWx1ZS5yaWNoLFxuICAgIH07XG5cbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHQgPSBnZXRDb250ZXh0Rm9yKFxuICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzICYmIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1tjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMubGVuZ3RoIC0gMV0sXG4gICAgICBcImZpbmFsXCIsXG4gICAgICBwc2V1ZG9Eb2N1bWVudCxcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LFxuICAgICk7XG4gICAgY29uc3QgY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0ID0gZ2V0Q29udGV4dEZvcihcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvcixcbiAgICAgIFwiZmluYWxcIixcbiAgICAgIHBzZXVkb0RvY3VtZW50LFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICAgKTtcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJbmxpbmVDb250ZXh0ID0gZ2V0Q29udGV4dEZvcihcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IsXG4gICAgICBcImZpbmFsXCIsXG4gICAgICBwc2V1ZG9Eb2N1bWVudCxcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LFxuICAgICk7XG5cbiAgICAvLyBDYWxjdWxhdGlvbiBvZiBvdGhlciBjb250ZXh0dWFsIGluZm9ybWF0aW9uXG4gICAgY29uc3QgYmFzZVN1cGVyQmxvY2sgPSAoXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgJiYgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzW2N1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cy5sZW5ndGggLSAxXVxuICAgICkgfHwgcHNldWRvRG9jdW1lbnQ7XG4gICAgY29uc3QgYmFzZUFsbG93ZWRDaGlsZHJlT2ZTdXBlckJsb2NrID0gYmFzZVN1cGVyQmxvY2sgPyBnZXRBbGxvd2VkQ2hpbGRyZW5UeXBlcyhiYXNlU3VwZXJCbG9jaykgOiBbXTtcblxuICAgIGNvbnN0IHN1cGVyQmxvY2tVSUhhbmRsZXIgPSBnZXRVSUhhbmRsZXJWYWx1ZVdpdGhLbm93bkNvbnRleHRGb3IoXG4gICAgICBiYXNlU3VwZXJCbG9jayBhcyBSaWNoRWxlbWVudCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dCB8fCB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LFxuICAgICk7XG5cbiAgICBjb25zdCBiYXNlQmxvY2sgPSBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQ7XG4gICAgY29uc3QgYmFzZUFsbG93ZWRDaGlsZHJlbk9mQmxvY2sgPSBiYXNlQmxvY2sgPyBnZXRBbGxvd2VkQ2hpbGRyZW5UeXBlcyhiYXNlQmxvY2spIDogW107XG5cbiAgICBjb25zdCBibG9ja1VJSGFuZGxlciA9IGdldFVJSGFuZGxlclZhbHVlV2l0aEtub3duQ29udGV4dEZvcihcbiAgICAgIGJhc2VCbG9jayxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dCxcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LFxuICAgICk7XG5cbiAgICBjb25zdCBpbmxpbmVVSUhhbmRsZXIgPSBnZXRVSUhhbmRsZXJWYWx1ZVdpdGhLbm93bkNvbnRleHRGb3IoXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50LFxuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lQ29udGV4dCxcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LFxuICAgICk7XG5cbiAgICBjb25zdCBhbGxvd3NJbnNlcnRFbGVtZW50ID0gKGVsZW1lbnQ6IFJpY2hFbGVtZW50LCBvcHRzOiB7IGNvbGxhcHNlZD86IGJvb2xlYW47IGV4dGVuZGVkPzogYm9vbGVhbjsgc2VsZWN0ZWQ/OiBib29sZWFuIH0gPSB7fSkgPT4ge1xuICAgICAgaWYgKG9wdHMuY29sbGFwc2VkIHx8IG9wdHMuZXh0ZW5kZWQgfHwgb3B0cy5zZWxlY3RlZCkge1xuICAgICAgICBpZiAob3B0cy5zZWxlY3RlZCAmJiAhdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gdGhpcy5lZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKHRoaXMuZWRpdG9yLnNlbGVjdGlvbik7XG4gICAgICAgIGlmICghaXNDb2xsYXBzZWQgJiYgb3B0cy5jb2xsYXBzZWQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNDb2xsYXBzZWQgJiYgb3B0cy5leHRlbmRlZCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB3ZSBmaXJzdCBuZWVkIHRvIGNoZWNrIHdoZXJlIGl0IGdvZXNcbiAgICAgIGlmIChpc1N1cGVyQmxvY2soZWxlbWVudCkgfHwgaXNCbG9jayhlbGVtZW50KSkge1xuICAgICAgICBpZiAoIWJhc2VBbGxvd2VkQ2hpbGRyZU9mU3VwZXJCbG9jay5pbmNsdWRlcyhlbGVtZW50LnR5cGUpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyQmxvY2tVSUhhbmRsZXIgJiYgc3VwZXJCbG9ja1VJSGFuZGxlci5hbGxvd3NDaGlsZHJlbiA/XG4gICAgICAgICAgc3VwZXJCbG9ja1VJSGFuZGxlci5hbGxvd3NDaGlsZHJlbihlbGVtZW50LCBiYXNlU3VwZXJCbG9jayBhcyBSaWNoRWxlbWVudCkgOlxuICAgICAgICAgIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGlzSW5saW5lKGVsZW1lbnQpKSB7XG4gICAgICAgIGlmICghYmFzZUFsbG93ZWRDaGlsZHJlbk9mQmxvY2suaW5jbHVkZXMoZWxlbWVudC50eXBlKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBibG9ja1VJSGFuZGxlciAmJiBibG9ja1VJSGFuZGxlci5hbGxvd3NDaGlsZHJlbiA/XG4gICAgICAgICAgYmxvY2tVSUhhbmRsZXIuYWxsb3dzQ2hpbGRyZW4oZWxlbWVudCwgYmFzZUJsb2NrKSA6XG4gICAgICAgICAgdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0b3Btb3N0U3VwZXJibG9jayA9IGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyAmJlxuICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzW2N1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cy5sZW5ndGggLSAxXTtcbiAgICBjb25zdCB0b3Btb3N0U3VwZXJibG9ja0FuY2hvciA9IGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycyAmJlxuICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW2N1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycy5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBpbmxpbmVJc1ZvaWQgPSBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50ID8gaXNWb2lkKGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQpIDogZmFsc2U7XG4gICAgY29uc3QgYmxvY2tJc1ZvaWQgPSBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQgPyBpc1ZvaWQoY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50KSA6IGZhbHNlO1xuICAgIGNvbnN0IHRvcG1vc3RTdXBlcmJsb2NrSXNWb2lkID0gdG9wbW9zdFN1cGVyYmxvY2sgPyBpc1ZvaWQodG9wbW9zdFN1cGVyYmxvY2spIDogZmFsc2U7XG4gICAgY29uc3Qgdm9pZEVsZW1lbnQgPSBpbmxpbmVJc1ZvaWQgfHwgYmxvY2tJc1ZvaWQgfHwgdG9wbW9zdFN1cGVyYmxvY2tJc1ZvaWQ7XG4gICAgY29uc3QgYWxsb3dzVGV4dCA9ICF2b2lkRWxlbWVudDtcblxuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZEVsZW1lbnQgPSBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50IHx8IGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCB8fCB0b3Btb3N0U3VwZXJibG9jayB8fCBudWxsO1xuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IgPSBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yIHx8IGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvciB8fCB0b3Btb3N0U3VwZXJibG9ja0FuY2hvciB8fCBudWxsO1xuXG4gICAgLy8gbm93IHdlIGNhbiByZXR1cm5cbiAgICByZXR1cm4ge1xuICAgICAgY3VycmVudFRleHRBbmNob3IsXG4gICAgICBjdXJyZW50VGV4dCxcbiAgICAgIGN1cnJlbnRCbG9ja0VsZW1lbnQsXG4gICAgICBjdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yLFxuICAgICAgY3VycmVudElubGluZUVsZW1lbnQsXG4gICAgICBjdXJyZW50SW5saW5lRWxlbWVudEFuY2hvcixcbiAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHMsXG4gICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLFxuICAgICAgY3VycmVudFNlbGVjdGVkVGV4dCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3IsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50LFxuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvcixcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycyxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnQsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yLFxuXG4gICAgICBjdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHQsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVDb250ZXh0LFxuICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudENvbnRleHQ6IGN1cnJlbnRTZWxlY3RlZElubGluZUNvbnRleHQgfHwgY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0IHx8IGN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dCxcblxuICAgICAgYWxsb3dzSW5zZXJ0RWxlbWVudCxcbiAgICAgIGFsbG93c1RleHQsXG4gICAgICBpbmxpbmVJc1ZvaWQsXG4gICAgICBibG9ja0lzVm9pZCxcbiAgICAgIHRvcG1vc3RTdXBlcmJsb2NrSXNWb2lkLFxuICAgICAgc3VwZXJCbG9ja1VJSGFuZGxlcixcbiAgICAgIGJsb2NrVUlIYW5kbGVyLFxuICAgICAgaW5saW5lVUlIYW5kbGVyLFxuXG4gICAgICBwcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcixcbiAgICAgIHByZXZpb3VzVGV4dEFuY2hvcixcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgb24gY2hhbmdlIHdoZW4gdGhlIGZpZWxkIGlzIGZvY3VzZWRcbiAgICogYW5kIGhhcyBjaGFuZ2VkXG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGFuY2hvciB0aGF0IHdlIGFyZSBhdFxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRoYXQgd2UgZ290XG4gICAqL1xuICBwdWJsaWMgb25Gb2N1c2VkQ2hhbmdlKGFuY2hvcjogUGF0aCwgdmFsdWU6IE5vZGVbXSkge1xuICAgIGlmICh0aGlzLmlzVW5tb3VudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIG5vdyB3ZSBjYW4gY2FsY3VsYXRlIHRoZSBhbmNob3JzIGFuZCBjb250ZXh0XG4gICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmNhbGN1bGF0ZUFuY2hvcnMoYW5jaG9yLCB2YWx1ZSkpO1xuXG4gICAgLy8gaWYgd2UgYXJlIG5vdCBjb25zaWRlcmVkIGFzIGN1cnJlbnRseSBmb2N1c2VkXG4gICAgaWYgKCF0aGlzLnN0YXRlLmZvY3VzZWQpIHtcbiAgICAgIC8vIHdlIGNhbGwgdGhpc1xuICAgICAgdGhpcy5wcm9wcy5vbkZvY3VzICYmIHRoaXMucHJvcHMub25Gb2N1cygpO1xuICAgICAgLy8gYW5kIHNldCB0aGUgc3RhdGVcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBmb2N1c2VkOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIG9uIGFuIG9uIGNoYW5nZSB3aGVudCBoZSBmaWVsZCBpcyBibHVycmVkXG4gICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgdGhhdCB3ZSBhcmUgd29ya2luZyB3aXRoXG4gICAqL1xuICBwdWJsaWMgb25CbHVycmVkQ2hhbmdlKHZhbHVlPzogTm9kZVtdKSB7XG4gICAgaWYgKHRoaXMuaXNVbm1vdW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gaWYgd2UgYXJlIGNvbnNpZGVyZWQgYXMgZm9jdXNlZFxuICAgIGlmICh0aGlzLnN0YXRlLmZvY3VzZWQpIHtcbiAgICAgIC8vIHdlbGwgbm90IGFueW1vcmVcbiAgICAgIHRoaXMucHJvcHMub25CbHVyICYmIHRoaXMucHJvcHMub25CbHVyKCk7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3IgPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycyAmJlxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMubGVuZ3RoIC0gMV07XG5cbiAgICAvLyB3ZSBwaWNrIHRoZSBhbmNob3IgYmFzZWQgb24gc3BlY2lmaWNpdHlcbiAgICAvLyB0aGUgb25lIHdlIGdvdCB0aGUgbW9zdCBzcGVjaWZpYyB3ZSBwYXNzIHRoYXRcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRBbmNob3IgPVxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yIHx8XG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IgfHxcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yIHx8XG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcjtcblxuICAgIC8vIG5vdyB3ZSBjYW4gY2FsbCB0aGlzXG4gICAgY29uc3QgYW5jaG9yRGF0YSA9IHRoaXMuY2FsY3VsYXRlQW5jaG9ycyhcbiAgICAgIC8vIG5vIGFuY2hvciBhcyBpdCBpcyBub3Qga25vd25cbiAgICAgIG51bGwsXG4gICAgICAvLyB0aGUgdmFsdWVcbiAgICAgIHZhbHVlLFxuICAgICAgLy8gYW5kIHdlIHBhc3MgdGhlIHNlbGVjdGVkIG5vZGUgYW5jaG9yIGFzIGl0XG4gICAgICAvLyByZW1haW5zIGV2ZW4gYWZ0ZXIgdGhlIHNlbGVjdGlvbiBvbmx5IGlmXG4gICAgICAvLyB3ZSBoYXZlIG5vdCBqdXN0IGRlbGV0ZWQgdGhhdCBub2RlXG4gICAgICBjdXJyZW50U2VsZWN0ZWRBbmNob3IgJiZcbiAgICAgICAgIXRoaXMubGFzdENoYW5nZVdhc1NlbGVjdGVkRGVsZXRlID8gY3VycmVudFNlbGVjdGVkQW5jaG9yIDogbnVsbCxcbiAgICApO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZm9jdXNlZDogZmFsc2UsXG4gICAgICAuLi5hbmNob3JEYXRhLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuIG9wdGltaXphdGlvbiBzbyB0aGF0IHRoZSBjb21wb25lbnQgdXBkYXRlcyBvbmx5IHdoZW4gaXQncyBuZWNlc3NhcnlcbiAgICogQHBhcmFtIG5leHRQcm9wcyB0aGUgbmV4dCBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSBuZXh0U3RhdGUgdGhlIG5leHQgc3RhdGVcbiAgICovXG4gIHB1YmxpYyBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzOiBJU2xhdGVFZGl0b3JQcm9wcywgbmV4dFN0YXRlOiBJU2xhdGVFZGl0b3JTdGF0ZSkge1xuICAgIGNvbnN0IHN0YW5kYXJkVXBkYXRlID0gKFxuICAgICAgbmV4dFByb3BzLmlkICE9PSB0aGlzLnByb3BzLmlkIHx8XG4gICAgICBuZXh0UHJvcHMubGFuZyAhPT0gdGhpcy5wcm9wcy5sYW5nIHx8XG4gICAgICBuZXh0UHJvcHMuY3VycmVudFZhbGlkICE9PSB0aGlzLnByb3BzLmN1cnJlbnRWYWxpZCB8fFxuICAgICAgbmV4dFN0YXRlLmZvY3VzZWQgIT09IHRoaXMuc3RhdGUuZm9jdXNlZCB8fFxuICAgICAgbmV4dFByb3BzLldyYXBwZXIgIT09IHRoaXMucHJvcHMuV3JhcHBlciB8fFxuICAgICAgbmV4dFByb3BzLmlzUmljaFRleHQgIT09IHRoaXMucHJvcHMuaXNSaWNoVGV4dCB8fFxuICAgICAgbmV4dFByb3BzLnJvb3RDb250ZXh0ICE9PSB0aGlzLnByb3BzLnJvb3RDb250ZXh0IHx8XG4gICAgICBuZXh0UHJvcHMuYmFzZUkxOG4gIT09IHRoaXMucHJvcHMuYmFzZUkxOG4gfHxcbiAgICAgICFlcXVhbHMobmV4dFN0YXRlLmN1cnJlbnRUZXh0QW5jaG9yLCB0aGlzLnN0YXRlLmN1cnJlbnRUZXh0QW5jaG9yLCB7c3RyaWN0OiB0cnVlfSkgfHxcbiAgICAgICFlcXVhbHMobmV4dFN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3IgIT09IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvciwge3N0cmljdDogdHJ1ZX0pIHx8XG4gICAgICBuZXh0U3RhdGUuY3VycmVudFJvb3RDb250ZXh0ICE9PSB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCB8fFxuICAgICAgbmV4dFByb3BzLmN1cnJlbnRMb2FkRXJyb3IgIT09IHRoaXMucHJvcHMuY3VycmVudExvYWRFcnJvciB8fFxuICAgICAgbmV4dFByb3BzLmVsZW1lbnRXcmFwcGVycyAhPT0gdGhpcy5wcm9wcy5lbGVtZW50V3JhcHBlcnMgfHxcbiAgICAgICFlcXVhbHModGhpcy5zdGF0ZS5hbGxDb250YWluZXJzLCBuZXh0U3RhdGUuYWxsQ29udGFpbmVycywgeyBzdHJpY3Q6IHRydWUgfSkgfHxcbiAgICAgICFlcXVhbHModGhpcy5zdGF0ZS5hbGxUYWJsZXMsIG5leHRTdGF0ZS5hbGxUYWJsZXMsIHsgc3RyaWN0OiB0cnVlIH0pIHx8XG4gICAgICAhZXF1YWxzKHRoaXMuc3RhdGUuYWxsQ3VzdG9tLCBuZXh0U3RhdGUuYWxsQ3VzdG9tLCB7IHN0cmljdDogdHJ1ZSB9KSB8fFxuICAgICAgIWVxdWFscyh0aGlzLnN0YXRlLmFsbFJpY2hDbGFzc2VzLCBuZXh0U3RhdGUuYWxsUmljaENsYXNzZXMsIHsgc3RyaWN0OiB0cnVlIH0pIHx8XG4gICAgICAhZXF1YWxzKG5leHRQcm9wcy53cmFwcGVyQXJncywgdGhpcy5wcm9wcy53cmFwcGVyQXJncywgeyBzdHJpY3Q6IHRydWUgfSkgfHxcbiAgICAgICFlcXVhbHMobmV4dFByb3BzLmVsZW1lbnRXcmFwcGVyc0FyZ3MsIHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzQXJncywgeyBzdHJpY3Q6IHRydWUgfSkgfHxcbiAgICAgICFlcXVhbHMobmV4dFByb3BzLmZlYXR1cmVzLCB0aGlzLnByb3BzLmZlYXR1cmVzLCB7IHN0cmljdDogdHJ1ZSB9KVxuICAgIClcblxuICAgIC8vIGlmIGl0J3MgYSBzdGFuZGFyZCB1cGRhdGUgbWF0Y2hcbiAgICBpZiAoc3RhbmRhcmRVcGRhdGUpIHtcbiAgICAgIC8vIHllcFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gb3RoZXJ3aXNlIGxldCdzIGNoZWNrIGZvciBpbnRlcm5hbCB2YWx1ZXMgc2lnbmF0dXJlIGRpZmZlcmVuY2VzXG4gICAgaWYgKG5leHRQcm9wcy50cmVlVmFsdWUgJiYgbmV4dFN0YXRlLnN5bmNlZCkge1xuICAgICAgcmV0dXJuIG5leHRQcm9wcy50cmVlVmFsdWUuaWQgIT09IHRoaXMuc3RhdGUudHJlZVZhbHVlLmlkO1xuICAgIH1cblxuICAgIC8vIG90aGVyd2lzZSB3ZSBkbyBhbGxvdyBmb3IgdGhlIHVwZGF0ZVxuICAgIC8vIGFzIHdpdGhvdXQgYW4gaW50ZXJuYWwgdmFsdWUgb3IgaW4gYSBub24tc3luY2VkIHN0YXRlXG4gICAgLy8gd2UgYXJlIGxpc3RlbmluZyBmb3IgZXZlcnkgY2hhbmdlXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgb2ZmIHRoZSByaWNoIHRleHRcbiAgICogQHBhcmFtIHYgdGhlIHZhbHVlIHRvIHNldFxuICAgKi9cbiAgcHVibGljIHNldFZhbHVlKHY6IGFueSkge1xuICAgIC8vIGZvciBzb21lIHJlYXNvbiBzbGF0ZSBrZWVwcyB0cmlnZ2VyaW5nXG4gICAgLy8gYSB2YWx1ZSBjaGFuZ2Ugd2hlbiBpdCdzIGRpc2FibGVkXG4gICAgLy8gYmVjYXVzZSBzbGF0ZSBjYW4gYmUgYnVnZ3lcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCB8fCB0aGlzLnByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYnVpbGQgYSBuZXcgZG9jdW1lbnRcbiAgICBjb25zdCBuZXdSb290RG9jdW1lbnQ6IElSb290TGV2ZWxEb2N1bWVudCA9IHtcbiAgICAgIC8vIHdlIGRvbid0IGtub3cgdGhlIGlkIHlldFxuICAgICAgaWQ6IG51bGwsXG4gICAgICB0eXBlOiBcImRvY3VtZW50XCIsXG4gICAgICByaWNoOiB0aGlzLnN0YXRlLnRyZWVWYWx1ZS5yaWNoLFxuICAgICAgY2hpbGRyZW46IHYsXG4gICAgfTtcblxuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBzZXJpYWxpemVTdHJpbmcobmV3Um9vdERvY3VtZW50KTtcbiAgICBuZXdSb290RG9jdW1lbnQuaWQgPSBnZXRVVUlERm9yKHNlcmlhbGl6ZWQpO1xuXG4gICAgLy8gd2UgZG8gbm90IHVwZGF0ZSBpbW1lZGlhdGVseSxcbiAgICAvLyBmb3IgdGhhdCB3ZSBmaXJzdCBjbGVhciB0aGUgdXBkYXRlIHRpbWVvdXRcbiAgICAvLyB0aGUgdXBkYXRlIHRpbWVvdXQgY29udGFpbnMgdXBkYXRlIGluc3RydWN0aW9uc1xuICAgIC8vIDIgb2YgdGhlbVxuICAgIC8vIHdlIHdhbnQgdG8gaGFsdCBzdWNoIGFzeW5jIGV4ZWN1dGlvblxuICAgIGNsZWFyVGltZW91dCh0aGlzLnVwZGF0ZVRpbWVvdXQpO1xuXG4gICAgY29uc3QgaXNFcXVhbCA9IChzZXJpYWxpemVkIHx8IG51bGwpID09PSAodGhpcy5wcm9wcy52YWx1ZSB8fCBudWxsKTtcblxuICAgIGlmIChpc0VxdWFsKSB7XG4gICAgICAvLyBhbmQgc2V0IHRoZSBzdGF0ZSB0byB0aGF0XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdHJlZVZhbHVlOiBuZXdSb290RG9jdW1lbnQsXG4gICAgICAgIHN5bmNlZDogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdHJlZVZhbHVlOiBuZXdSb290RG9jdW1lbnQsXG4gICAgICAgIHN5bmNlZDogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgLy8gbm93IHdlIGNhbiBzZXQgaXRcbiAgICAgIHRoaXMudXBkYXRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS50cmVlVmFsdWUucmljaCkge1xuICAgICAgICAgIGlmICh0aGlzLnByb3BzLmNhY2hlU3RvcmVDb3VudEdsb2JhbCkge1xuICAgICAgICAgICAgLy8gd2hhdCB3ZSBkbyBpcyB0aGF0IHdlIGNvdW50IHRoZSBjaGFyYWN0ZXJzXG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IGNvdW50U2l6ZSh0aGlzLnN0YXRlLnRyZWVWYWx1ZSk7XG4gICAgICAgICAgICAvLyBhbmQgc2V0IGl0IGluIHRoZSBsYXN0IHJpY2ggdGV4dCBjaGFuZ2UgY2hlYXQgdmFyaWFibGVcbiAgICAgICAgICAgICh3aW5kb3cgYXMgYW55KVt0aGlzLnByb3BzLmNhY2hlU3RvcmVDb3VudEdsb2JhbF0gPSBjb3VudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhbmQgbm93IHdlIGNhbiB0cmlnZ2VyIHRoZSBvbiBjaGFuZ2UgZXZlbnRcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZShzZXJpYWxpemVTdHJpbmcodGhpcy5zdGF0ZS50cmVlVmFsdWUpLCB0aGlzLnN0YXRlLnRyZWVWYWx1ZSk7XG4gICAgICAgIC8vIGFuZCBub3cgd2UgYXJlIGdvaW5nIHRvIHdhaXQgYSBsaXR0bGUgYml0IG1vcmVcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgLy8gdG8gdGVsbCBpdCB0aGF0IGl0IHNob3VsZCBzeW5jXG4gICAgICAgICAgaWYgKCF0aGlzLmlzVW5tb3VudGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgc3luY2VkOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAzMCk7XG4gICAgICB9LCAzMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyB0aGUgY29udGV4dCBhIGdpdmVuIG5vZGUgaXMgc2l0dGluZyBpblxuICAgKiBAcGFyYW0gbiB0aGUgbm9kZSBpbiBxdWVzdGlvblxuICAgKiBAcGFyYW0gb25seVN3aWNoaW5nQ29udGV4dCBwcm92aWRlcyB0aGUgY29udGV4dCBvbmx5IGlmIGl0IHdhcyBzZXRcbiAgICogYnkgdGhlIGdpdmVuIG5vZGUgb3RoZXJ3aXNlIGl0IHdpbGwgcmV0dXJuIG51bGxcbiAgICovXG4gIHB1YmxpYyBnZXRDb250ZXh0Rm9yKG46IE5vZGUgfCBQYXRoLCBsZXZlbD86IFwiZmluYWxcIiB8IFwic2VsZWN0LWNvbnRleHRcIiB8IFwic2VsZWN0LWxvb3BcIiwgb25seVN3aWNoaW5nQ29udGV4dD86IGJvb2xlYW4pOiBJVGVtcGxhdGVBcmdDb250ZXh0RGVmaW5pdGlvbiB7XG4gICAgaWYgKG9ubHlTd2ljaGluZ0NvbnRleHQpIHtcbiAgICAgIGNvbnN0IG5vZGVBc1JpY2hFbGVtZW50OiBSaWNoRWxlbWVudCA9IChQYXRoLmlzUGF0aChuKSA/IE5vZGUuZ2V0KHRoaXMuZWRpdG9yLCBuKSA6IG4pIGFzIFJpY2hFbGVtZW50O1xuICAgICAgaWYgKCFub2RlQXNSaWNoRWxlbWVudC5jb250ZXh0ICYmICFub2RlQXNSaWNoRWxlbWVudC5mb3JFYWNoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHBhdGhPZk5vZGUgPSBQYXRoLmlzUGF0aChuKSA/IG4gOiBSZWFjdEVkaXRvci5maW5kUGF0aCh0aGlzLmVkaXRvciwgbik7XG4gICAgcmV0dXJuIGdldENvbnRleHRGb3IoXG4gICAgICBwYXRoT2ZOb2RlLFxuICAgICAgbGV2ZWwgfHwgXCJmaW5hbFwiLFxuICAgICAgdGhpcy5zdGF0ZS50cmVlVmFsdWUsXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGdldFJvb3RDb250ZXh0KCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dDtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXJFbGVtZW50KHByb3BzOiBSZW5kZXJFbGVtZW50UHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEN1cnJlbnRFbGVtZW50UmV0cmlldmVyXG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgZm49e3RoaXMuYWN0dWFsbHlSZW5kZXJFbGVtZW50fVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICAvKipcbiAgICogdGhlIHJlbmRlciBlbGVtZW50IGZ1bmN0aW9uIHRvIGJlIHVzZWQgaW4gc2xhdGUgZWRpdG9yXG4gICAqIEBwYXJhbSBwcm9wcyB0aGUgcHJvcGVydGllcyB0aGF0IHNsYXRlIHByb3ZpZGVzIHRvIHJlbmRlciB0aGUgY29tcG9uZW50XG4gICAqL1xuICBwdWJsaWMgYWN0dWFsbHlSZW5kZXJFbGVtZW50KFxuICAgIHByb3BzOiBSZW5kZXJFbGVtZW50UHJvcHMsXG4gICAgaXNTZWxlY3RlZDogYm9vbGVhbixcbiAgICBzZWxlY3Rpb25Dcml0ZXJpYTogXCJibG9ja1wiIHwgXCJzdXBlcmJsb2NrXCIgfCBcImlubGluZVwiLFxuICAgIGlzUHJpbWFyeTogYm9vbGVhbixcbiAgKSB7XG4gICAgLy8gZmlyc3Qgd2UgZXh0cmFjdCBhbGwgdGhlc2Ugc3R1ZmZzXG4gICAgY29uc3QgeyBhdHRyaWJ1dGVzLCBjaGlsZHJlbiwgZWxlbWVudCB9ID0gcHJvcHM7XG5cbiAgICAvLyBsZXQncyBjaGVjayBmb3IgYSB1aSBoYW5kbGVyXG4gICAgY29uc3QgdWlIYW5kbGVyID0gKGVsZW1lbnQgYXMgYW55IGFzIFJpY2hFbGVtZW50KS51aUhhbmRsZXI7XG4gICAgbGV0IHRvUmV0dXJuOiBSZWFjdC5SZWFjdE5vZGUgPSBudWxsO1xuICAgIGxldCB3YXNVSUhhbmRsZWQgPSBmYWxzZTtcblxuICAgIC8vIGlmIHdlIGhhdmUgb25lXG4gICAgaWYgKHVpSGFuZGxlcikge1xuICAgICAgY29uc3QgaGFuZGxlckNvbnRleHQgPSB0aGlzLmdldENvbnRleHRGb3IoZWxlbWVudCBhcyBhbnkpO1xuXG4gICAgICAvLyB3ZSBleHRyYWN0IHRoZSBhcmd1bWVudHMgZm9yIHRoZSB1aSBoYW5kbGVyIHRoYXQgYXJlIGluIHRoZSByaWNoIGVsZW1lbnRcbiAgICAgIGNvbnN0IHVpSGFuZGxlckFyZ3MgPSAoZWxlbWVudCBhcyBhbnkgYXMgUmljaEVsZW1lbnQpLnVpSGFuZGxlckFyZ3M7XG5cbiAgICAgIC8vIGFuZCBub3cgd2UgdHJ5IHRvIGdldCB0aGUgdWkgaGFuZGxlciBmcm9tIHRoZSBjb250ZXh0IGl0c2VsZlxuICAgICAgLy8gZWl0aGVyIHRoZSByb290IG9yIHRoZSBvbmUgaW4gdGhlIHByb3BlcnR5IGl0c2VsZlxuICAgICAgbGV0IHByb3BlcnRpZXNGcm9tQ29udGV4dDogSVRlbXBsYXRlQXJnVUlIYW5kbGVyRGVmaW5pdGlvbiA9XG4gICAgICAgIChoYW5kbGVyQ29udGV4dCAmJiBoYW5kbGVyQ29udGV4dC5wcm9wZXJ0aWVzICYmIGhhbmRsZXJDb250ZXh0LnByb3BlcnRpZXNbdWlIYW5kbGVyXSkgYXMgSVRlbXBsYXRlQXJnVUlIYW5kbGVyRGVmaW5pdGlvbjtcblxuICAgICAgaWYgKCFwcm9wZXJ0aWVzRnJvbUNvbnRleHQpIHtcbiAgICAgICAgcHJvcGVydGllc0Zyb21Db250ZXh0ID0gKHRoaXMucHJvcHMucm9vdENvbnRleHQgJiYgdGhpcy5wcm9wcy5yb290Q29udGV4dC5wcm9wZXJ0aWVzW3VpSGFuZGxlcl0pIGFzIElUZW1wbGF0ZUFyZ1VJSGFuZGxlckRlZmluaXRpb247XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzRnJvbUNvbnRleHQgJiYgcHJvcGVydGllc0Zyb21Db250ZXh0Lm5vblJvb3RJbmhlcml0YWJsZSkge1xuICAgICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gaWYgd2UgZG9uJ3QgZmluZCBhIFVJIGhhbmRsZXJcbiAgICAgIC8vIGxldCdzIHB1dCBhIG1lc3NhZ2UgYWJvdXQgaXRcbiAgICAgIGlmIChcbiAgICAgICAgcHJvcGVydGllc0Zyb21Db250ZXh0ICYmXG4gICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dC50eXBlID09PSBcInVpLWhhbmRsZXJcIiAmJlxuICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQuZWRpdG9ySGFuZGxlclxuICAgICAgKSB7XG4gICAgICAgIC8vIG5vdyB3ZSBjYW4gZ2V0IHRoZSBjb21wb25lbnQsIGV4dHJhIGFyZ3MgYW5kIHdoYXRub3RcbiAgICAgICAgY29uc3QgSGFuZGxlckNvbXBvbmVudCA9IHByb3BlcnRpZXNGcm9tQ29udGV4dC5lZGl0b3JIYW5kbGVyLkNvbXBvbmVudDtcbiAgICAgICAgY29uc3QgaGFuZGxlckV4dHJhQXJncyA9IHByb3BlcnRpZXNGcm9tQ29udGV4dC5lZGl0b3JIYW5kbGVyLmV4dHJhQXJncztcbiAgICAgICAgY29uc3QgcGFzc0V4dHJhSW5mbyA9IHByb3BlcnRpZXNGcm9tQ29udGV4dC5lZGl0b3JIYW5kbGVyLnBhc3NTbGF0ZUluZm87XG5cbiAgICAgICAgLy8gdGhlIGV4dHJhIGluZm8gdGhhdCBzaG91bGQgYmUgcGFzc2VkIGlmIG5lY2Vzc2FyeVxuICAgICAgICBjb25zdCBleHRyYUluZm8gPSBwYXNzRXh0cmFJbmZvID9cbiAgICAgICAgICB7XG4gICAgICAgICAgICBoZWxwZXJzOiB0aGlzLmdldEhlbHBlcnMoKSxcbiAgICAgICAgICAgIHNlbGVjdGVkOiBpc1NlbGVjdGVkICYmIGlzUHJpbWFyeSxcbiAgICAgICAgICB9IDoge307XG5cbiAgICAgICAgbGV0IGNsYXNzTmFtZTogc3RyaW5nID0gbnVsbDtcbiAgICAgICAgKGVsZW1lbnQgYXMgYW55IGFzIFJpY2hFbGVtZW50KS5yaWNoQ2xhc3NMaXN0ICYmIChlbGVtZW50IGFzIGFueSBhcyBSaWNoRWxlbWVudCkucmljaENsYXNzTGlzdC5mb3JFYWNoKChjKSA9PiB7XG4gICAgICAgICAgY2xhc3NOYW1lID0gKGNsYXNzTmFtZSB8fCBcIlwiKSArIFwiIHJpY2gtdGV4dC0tXCIgKyBjO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBjb252ZXJ0U3R5bGVTdHJpbmdUb1JlYWN0T2JqZWN0KChlbGVtZW50IGFzIGFueSBhcyBSaWNoRWxlbWVudCkuc3R5bGUpO1xuICAgICAgICBjb25zdCBzdHlsZUFjdGl2ZSA9IGNvbnZlcnRTdHlsZVN0cmluZ1RvUmVhY3RPYmplY3QoKGVsZW1lbnQgYXMgYW55IGFzIFJpY2hFbGVtZW50KS5zdHlsZUFjdGl2ZSk7XG4gICAgICAgIGNvbnN0IHN0eWxlSG92ZXIgPSBjb252ZXJ0U3R5bGVTdHJpbmdUb1JlYWN0T2JqZWN0KChlbGVtZW50IGFzIGFueSBhcyBSaWNoRWxlbWVudCkuc3R5bGVIb3Zlcik7XG5cbiAgICAgICAgLy8gbm93IHdlIGNhbiB1c2UgdGhlIGhhbmRsZXIgY29tcG9uZW50IHRoYXQgaXMgZ2l2ZW4gdmlhIHRoZSB1aSBoYW5kbGVyXG4gICAgICAgIHRvUmV0dXJuID0gPEhhbmRsZXJDb21wb25lbnRcbiAgICAgICAgICBhcmdzPXt7XG4gICAgICAgICAgICAuLi51aUhhbmRsZXJBcmdzLFxuICAgICAgICAgICAgLi4uaGFuZGxlckV4dHJhQXJncyxcbiAgICAgICAgICB9IGFzIGFueX1cbiAgICAgICAgICBpc1NsYXRlPXt0cnVlfVxuICAgICAgICAgIGF0dHJpYnV0ZXM9e2F0dHJpYnV0ZXN9XG4gICAgICAgICAgZWxlbWVudD17ZWxlbWVudCBhcyBhbnl9XG4gICAgICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgICAgIHN0eWxlQWN0aXZlPXtzdHlsZUFjdGl2ZX1cbiAgICAgICAgICBzdHlsZUhvdmVyPXtzdHlsZUhvdmVyfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICAgIGV2ZW50cz17bnVsbH1cbiAgICAgICAgICB7Li4uZXh0cmFJbmZvfVxuICAgICAgICA+XG4gICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L0hhbmRsZXJDb21wb25lbnQ+O1xuXG4gICAgICAgIGNvbnN0IGNvbnRleHRTd2ljaENvbnRleHQgPSB0aGlzLmdldENvbnRleHRGb3IoZWxlbWVudCBhcyBhbnksIFwiZmluYWxcIiwgdHJ1ZSk7XG5cbiAgICAgICAgLy8gaWYgd2UgYXJlIGluIGEgdWkgaGFuZGxlciB0aGF0IGlzIGN1cnJlbnRseSBsb29waW5nXG4gICAgICAgIC8vIGFzIHdlIGhhdmUgZW50ZXJlZCBhIGxvb3BhYmxlIGNvbnRleHRcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbnRleHRTd2ljaENvbnRleHQgJiZcbiAgICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0Lmxvb3BhYmxlICYmXG4gICAgICAgICAgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzICYmXG4gICAgICAgICAgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLmxvb3BFbXVsYXRpb24gJiZcbiAgICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3MubG9vcEVtdWxhdGlvbiA+PSAxXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIGFuZCBub3cgd2UgaGF2ZSBlbnRlcmVkIGxvb3AgZW11bGF0aW9uXG4gICAgICAgICAgY29uc3QgYXJyOiBSZWFjdC5SZWFjdE5vZGVbXSA9IFtdO1xuICAgICAgICAgIC8vIHdlIGFyZSBnb2luZyB0byB1c2UgdGhlIHdyYXBwZXIgaW4gZWFjaCBjYXNlIHRvIGNoYW5nZSB0aGUgY29udGV4dFxuICAgICAgICAgIC8vIHdoaWNoIGhvcGVmdWxseSB3aWxsIGNoYW5nZSB0aGluZ3MgZG93biB0aGUgbGluZVxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLmxvb3BFbXVsYXRpb247IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkRGlzYWJsZUVsZW1lbnRXcmFwcGVycyA9IGkgIT09IGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy5sb29wRW11bGF0aW9uIC0gMTtcbiAgICAgICAgICAgIGlmIChjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcikge1xuICAgICAgICAgICAgICBpZiAoc2hvdWxkRGlzYWJsZUVsZW1lbnRXcmFwcGVycykge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKFxuICAgICAgICAgICAgICAgICAgPEVsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXIgdmFsdWU9e3RydWV9IGtleT17aX0+XG4gICAgICAgICAgICAgICAgICAgIHtjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcih0b1JldHVybiwgaSl9XG4gICAgICAgICAgICAgICAgICA8L0VsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaCg8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT57Y29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIodG9SZXR1cm4sIGkpfTwvUmVhY3QuRnJhZ21lbnQ+KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKHNob3VsZERpc2FibGVFbGVtZW50V3JhcHBlcnMpIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaChcbiAgICAgICAgICAgICAgICAgIDxFbGVtZW50V3JhcHBlckRpc2FibGVyLlByb3ZpZGVyIHZhbHVlPXt0cnVlfSBrZXk9e2l9PlxuICAgICAgICAgICAgICAgICAgICB7dG9SZXR1cm59XG4gICAgICAgICAgICAgICAgICA8L0VsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaCg8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT57dG9SZXR1cm59PC9SZWFjdC5GcmFnbWVudD4pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRvUmV0dXJuID0gYXJyO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHRTd2ljaENvbnRleHQgJiYgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzICYmIGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy53cmFwcGVyKSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGlmIHdlIGdvdCBhIHN0YW5kYXJkIGNvbnRleHQsIHdpdGggYSB3cmFwcGVyLCB0aGVuIHdlIHVzZSBpdFxuICAgICAgICAgIHRvUmV0dXJuID0gY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIodG9SZXR1cm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgd2FzVUlIYW5kbGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXdhc1VJSGFuZGxlZCkge1xuICAgICAgY29uc3QgY3VzdG9tUHJvcHM6IGFueSA9IHsgLi4uYXR0cmlidXRlcywgY2hpbGRyZW4gfTtcblxuICAgICAgY29uc3QgaHRtbCA9IChlbGVtZW50IGFzIGFueSBhcyBSaWNoRWxlbWVudCkuaHRtbDtcbiAgICAgIGlmICh0eXBlb2YgaHRtbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBodG1sQ29udGV4dCA9IHRoaXMuZ2V0Q29udGV4dEZvcihlbGVtZW50IGFzIGFueSk7XG4gICAgICAgIGxldCBwcm9wZXJ0aWVzRnJvbUNvbnRleHQ6IElUZW1wbGF0ZUFyZ0hUTUxEZWZpbml0aW9uID0gaHRtbENvbnRleHQgJiYgaHRtbENvbnRleHQucHJvcGVydGllcyAmJiBodG1sQ29udGV4dC5wcm9wZXJ0aWVzW2h0bWxdIGFzIElUZW1wbGF0ZUFyZ0hUTUxEZWZpbml0aW9uO1xuICAgICAgICBpZiAoIXByb3BlcnRpZXNGcm9tQ29udGV4dCkge1xuICAgICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCA9IHRoaXMucHJvcHMucm9vdENvbnRleHQgJiYgdGhpcy5wcm9wcy5yb290Q29udGV4dC5wcm9wZXJ0aWVzICYmIHRoaXMucHJvcHMucm9vdENvbnRleHQucHJvcGVydGllc1todG1sXSBhcyBJVGVtcGxhdGVBcmdIVE1MRGVmaW5pdGlvbjtcbiAgICAgICAgICBpZiAocHJvcGVydGllc0Zyb21Db250ZXh0ICYmIHByb3BlcnRpZXNGcm9tQ29udGV4dC5ub25Sb290SW5oZXJpdGFibGUpIHtcbiAgICAgICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb3BlcnRpZXNGcm9tQ29udGV4dCAmJiBwcm9wZXJ0aWVzRnJvbUNvbnRleHQudHlwZSA9PT0gXCJodG1sXCIgJiYgdHlwZW9mIHByb3BlcnRpZXNGcm9tQ29udGV4dC5lZGl0b3JEaXNwbGF5ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3QgdG9EaXNwbGF5ID0gcHJvcGVydGllc0Zyb21Db250ZXh0LmVkaXRvckRpc3BsYXk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0b0Rpc3BsYXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGN1c3RvbVByb3BzLmNoaWxkcmVuID0gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxkaXYgY29udGVudEVkaXRhYmxlPXtmYWxzZX0gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiB0b0Rpc3BsYXkgfX0gc3R5bGU9e3sgZGlzcGxheTogXCJjb250ZW50c1wiIH19IC8+XG4gICAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1c3RvbVByb3BzLmNoaWxkcmVuID0gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxkaXYgY29udGVudEVkaXRhYmxlPXtmYWxzZX0gc3R5bGU9e3sgZGlzcGxheTogXCJjb250ZW50c1wiIH19PlxuICAgICAgICAgICAgICAgICAge3RvRGlzcGxheX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VzdG9tUHJvcHMuY2hpbGRyZW4gPSAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7KHByb3BlcnRpZXNGcm9tQ29udGV4dCAmJiBwcm9wZXJ0aWVzRnJvbUNvbnRleHQubGFiZWwpIHx8IChlbGVtZW50IGFzIGFueSkuY2hpbGRyZW5bMF0udGV4dH1cbiAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0ZXh0ID0gZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgIGlmICh0eXBlb2YgdGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCB0ZXh0Q29udGV4dCA9IHRoaXMuZ2V0Q29udGV4dEZvcihlbGVtZW50IGFzIGFueSk7XG4gICAgICAgIGxldCBwcm9wZXJ0aWVzRnJvbUNvbnRleHQ6IElUZW1wbGF0ZUFyZ1RleHREZWZpbml0aW9uID0gdGV4dENvbnRleHQgJiZcbiAgICAgICAgICB0ZXh0Q29udGV4dC5wcm9wZXJ0aWVzICYmXG4gICAgICAgICAgdGV4dENvbnRleHQucHJvcGVydGllc1t0ZXh0XSBhcyBJVGVtcGxhdGVBcmdUZXh0RGVmaW5pdGlvbjtcbiAgICAgICAgaWYgKCFwcm9wZXJ0aWVzRnJvbUNvbnRleHQpIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQgPSB0aGlzLnByb3BzLnJvb3RDb250ZXh0ICYmXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJvb3RDb250ZXh0LnByb3BlcnRpZXMgJiZcbiAgICAgICAgICAgIHRoaXMucHJvcHMucm9vdENvbnRleHQucHJvcGVydGllc1t0ZXh0XSBhcyBJVGVtcGxhdGVBcmdUZXh0RGVmaW5pdGlvbjtcbiAgICAgICAgICBpZiAocHJvcGVydGllc0Zyb21Db250ZXh0ICYmIHByb3BlcnRpZXNGcm9tQ29udGV4dC5ub25Sb290SW5oZXJpdGFibGUpIHtcbiAgICAgICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY3VzdG9tUHJvcHMuY2hpbGRyZW4gPSAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHsoXG4gICAgICAgICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCAmJlxuICAgICAgICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQudHlwZSA9PT0gXCJ0ZXh0XCIgJiZcbiAgICAgICAgICAgICAgKHByb3BlcnRpZXNGcm9tQ29udGV4dC5lZGl0b3JEaXNwbGF5IHx8IHByb3BlcnRpZXNGcm9tQ29udGV4dC5sYWJlbClcbiAgICAgICAgICAgICkgfHwgKGVsZW1lbnQgYXMgYW55KS5jaGlsZHJlblswXS50ZXh0fVxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgIDwvPlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBhbmQgbm93IHdlIGNhbGwgdGhlIHJlYWN0aWZpY2F0aW9uXG4gICAgICB0b1JldHVybiA9IFNFUklBTElaQVRJT05fUkVHSVNUUlkuUkVBQ1RJRllbZWxlbWVudC50eXBlIGFzIHN0cmluZ10oe1xuICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgICBzZWxlY3RlZDogaXNTZWxlY3RlZCAmJiBpc1ByaW1hcnksXG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQgYXMgYW55LFxuICAgICAgICBhc1RlbXBsYXRlOiBmYWxzZSxcbiAgICAgICAgY3VzdG9tUHJvcHMsXG5cbiAgICAgICAgLy8gd2UgZG9uJ3QgY2FyZSBhcyB3ZSBhcmUgbm90IHVzaW5nIHRoZSBvbkN1c3RvbSBmdW5jdGlvblxuICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgIHRyZWU6IG51bGwsXG4gICAgICB9KSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IGNvbnRleHRTd2ljaENvbnRleHQgPSB0aGlzLmdldENvbnRleHRGb3IoZWxlbWVudCBhcyBhbnksIFwiZmluYWxcIiwgdHJ1ZSk7XG5cbiAgICAgIC8vIGlmIHdlIGZpbmQgb3Vyc2VsdmVzIGluIGEgbG9vcGFibGUgY29udGV4dCBhcyB3ZSBhcmUgY3VycmVudGx5IGxvb3BpbmdcbiAgICAgIGlmIChcbiAgICAgICAgY29udGV4dFN3aWNoQ29udGV4dCAmJlxuICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0Lmxvb3BhYmxlICYmXG4gICAgICAgIGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncyAmJlxuICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3MubG9vcEVtdWxhdGlvbiAmJlxuICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3MubG9vcEVtdWxhdGlvbiA+PSAxXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgYXJyOiBSZWFjdC5SZWFjdE5vZGVbXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy5sb29wRW11bGF0aW9uOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBzaG91bGREaXNhYmxlRWxlbWVudFdyYXBwZXJzID0gaSAhPT0gY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLmxvb3BFbXVsYXRpb24gLSAxO1xuICAgICAgICAgIGlmIChjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcikge1xuICAgICAgICAgICAgaWYgKHNob3VsZERpc2FibGVFbGVtZW50V3JhcHBlcnMpIHtcbiAgICAgICAgICAgICAgYXJyLnB1c2goXG4gICAgICAgICAgICAgICAgPEVsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXIgdmFsdWU9e3RydWV9IGtleT17aX0+XG4gICAgICAgICAgICAgICAgICB7Y29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIodG9SZXR1cm4sIGkpfVxuICAgICAgICAgICAgICAgIDwvRWxlbWVudFdyYXBwZXJEaXNhYmxlci5Qcm92aWRlcj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFyci5wdXNoKDxSZWFjdC5GcmFnbWVudCBrZXk9e2l9Pntjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcih0b1JldHVybiwgaSl9PC9SZWFjdC5GcmFnbWVudD4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoc2hvdWxkRGlzYWJsZUVsZW1lbnRXcmFwcGVycykge1xuICAgICAgICAgICAgICBhcnIucHVzaChcbiAgICAgICAgICAgICAgICA8RWxlbWVudFdyYXBwZXJEaXNhYmxlci5Qcm92aWRlciB2YWx1ZT17dHJ1ZX0ga2V5PXtpfT5cbiAgICAgICAgICAgICAgICAgIHt0b1JldHVybn1cbiAgICAgICAgICAgICAgICA8L0VsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXI+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhcnIucHVzaCg8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT57dG9SZXR1cm59PC9SZWFjdC5GcmFnbWVudD4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0b1JldHVybiA9IGFycjtcbiAgICAgIH0gZWxzZSBpZiAoY29udGV4dFN3aWNoQ29udGV4dCAmJiBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3MgJiYgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIpIHtcbiAgICAgICAgdG9SZXR1cm4gPSBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcih0b1JldHVybik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5wcm9wcy5lbGVtZW50V3JhcHBlcnMgJiZcbiAgICAgIChcbiAgICAgICAgKFxuICAgICAgICAgICF3YXNVSUhhbmRsZWQgJiZcbiAgICAgICAgICB0aGlzLnByb3BzLmVsZW1lbnRXcmFwcGVycy5jb21wb25lbnRzICYmXG4gICAgICAgICAgdGhpcy5wcm9wcy5lbGVtZW50V3JhcHBlcnMuY29tcG9uZW50c1tlbGVtZW50LnR5cGVdXG4gICAgICAgICkgfHwgKFxuICAgICAgICAgIHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzLnVpSGFuZGxlciAmJlxuICAgICAgICAgIHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzLnVpSGFuZGxlcltlbGVtZW50LnVpSGFuZGxlcl1cbiAgICAgICAgKVxuICAgICAgKVxuICAgICkge1xuICAgICAgY29uc3QgRWxlbWVudFdyYXBwZXIgPVxuICAgICAgICAoXG4gICAgICAgICAgdGhpcy5wcm9wcy5lbGVtZW50V3JhcHBlcnMudWlIYW5kbGVyICYmXG4gICAgICAgICAgdGhpcy5wcm9wcy5lbGVtZW50V3JhcHBlcnMudWlIYW5kbGVyW2VsZW1lbnQudWlIYW5kbGVyXVxuICAgICAgICApIHx8IHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzLmNvbXBvbmVudHNbZWxlbWVudC50eXBlXTtcblxuICAgICAgaWYgKEVsZW1lbnRXcmFwcGVyKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPEVsZW1lbnRXcmFwcGVyRGlzYWJsZXIuQ29uc3VtZXI+XG4gICAgICAgICAgICB7KGRpc2FibGVkKSA9PiAoXG4gICAgICAgICAgICAgIGRpc2FibGVkID8gdG9SZXR1cm4gOiAoXG4gICAgICAgICAgICAgICAgPEVsZW1lbnRXcmFwcGVyXG4gICAgICAgICAgICAgICAgICBlbGVtZW50PXtlbGVtZW50fVxuICAgICAgICAgICAgICAgICAgaGVscGVycz17dGhpcy5nZXRIZWxwZXJzKCl9XG4gICAgICAgICAgICAgICAgICBwcmltYXJ5U2VsZWN0aW9uPXtpc1ByaW1hcnl9XG4gICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXtpc1NlbGVjdGVkfVxuICAgICAgICAgICAgICAgICAgZmVhdHVyZVN1cHBvcnQ9e3RoaXMuZ2V0RmVhdHVyZVN1cHBvcnQoKX1cbiAgICAgICAgICAgICAgICAgIGJhc2VJMThuPXt0aGlzLnByb3BzLmJhc2VJMThufVxuICAgICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzQXJnc31cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7dG9SZXR1cm59XG4gICAgICAgICAgICAgICAgPC9FbGVtZW50V3JhcHBlcj5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L0VsZW1lbnRXcmFwcGVyRGlzYWJsZXIuQ29uc3VtZXI+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvUmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIHRoZSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBieSBzbGF0ZSB0byByZW5kZXIgdGV4dFxuICAgKiBAcGFyYW0gcHJvcHMgdGhlIHByb3BlcnRpZXMgZ2l2ZW4gYnkgc2xhdGUgdG8gcmVuZGVyIGEgdGV4dCBsZWFmXG4gICAqL1xuICBwdWJsaWMgcmVuZGVyVGV4dChwcm9wczogUmVuZGVyTGVhZlByb3BzKSB7XG4gICAgLy8gZmlyc3Qgd2UgZXh0cmFjdCB0aGUgYXR0cmlidXRlc1xuICAgIGNvbnN0IHsgYXR0cmlidXRlcywgY2hpbGRyZW4sIGxlYWYgfSA9IHByb3BzO1xuXG4gICAgLy8gbm93IHdlIHVzZSB0aGUgc2VyaWFsaXphdGlvbiByZWdpc3RyeSBpbiBvcmRlclxuICAgIC8vIHRvIG1ha2UgdGhlIGNhbGxzXG4gICAgcmV0dXJuIFNFUklBTElaQVRJT05fUkVHSVNUUlkuUkVBQ1RJRlkudGV4dCh7XG4gICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgZWxlbWVudDogbGVhZiBhcyBhbnksXG4gICAgICBhc1RlbXBsYXRlOiBmYWxzZSxcbiAgICAgIGN1c3RvbVByb3BzOiB7IC4uLmF0dHJpYnV0ZXMsIGNoaWxkcmVuIH0sXG5cbiAgICAgIC8vIHdlIGRvbid0IGNhcmUgYXMgd2UgYXJlIG5vdCB1c2luZyB0aGUgb25DdXN0b20gZnVuY3Rpb25cbiAgICAgIC8vIHRoaXMgd2lsbCBwcmV2ZW50IG5vcm1hbGl6YXRpb24gYnV0IHRoYXQncyBmaW5lXG4gICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICB0cmVlOiBudWxsLFxuICAgIH0pIGFzIGFueTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY2hhbmdlIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHZpYSBzbGF0ZSB3aGVuIGEgY2hhbmdlIG9jY3Vyc1xuICAgKiB0aGlzIGZ1bmN0aW9uIGhpdHMgZXZlcnkgdGltZSBvbiBldmVyeSBjaGFuZ2Ugb2YgdGhlIHJpY2ggdGV4dFxuICAgKiBAcGFyYW0gbmV3VmFsdWUgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgY2hpbGRyZW4gb2YgdGhlIGRvY3VtZW50XG4gICAqL1xuICBwdWJsaWMgb25DaGFuZ2UobmV3VmFsdWU6IE5vZGVbXSkge1xuICAgIGlmICh0aGlzLmlzVW5tb3VudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaWYgdGhlcmUncyBhIHNlbGVjdGlvblxuICAgIGlmICh0aGlzLmVkaXRvci5zZWxlY3Rpb24gJiYgUmVhY3RFZGl0b3IuaXNGb2N1c2VkKHRoaXMuZWRpdG9yKSkge1xuICAgICAgLy8gd2UgYXJlIG9uIGZvY3VzXG4gICAgICB0aGlzLm9uRm9jdXNlZENoYW5nZSh0aGlzLmVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLnBhdGgsIG5ld1ZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gb3RoZXJ3aXNlIHdlIGFyZSBibHVycmVkXG4gICAgICB0aGlzLm9uQmx1cnJlZENoYW5nZShuZXdWYWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gYWx3YXlzIHJlbWFyayB0aGUgZmxhZyBhcyBmYWxzZSBhcyB0aGlzIGNoYW5nZSBpcyBhIG5vcm1hbCBjaGFuZ2VcbiAgICB0aGlzLmxhc3RDaGFuZ2VXYXNTZWxlY3RlZERlbGV0ZSA9IGZhbHNlO1xuXG4gICAgLy8gYW5kIGlmIHRoZSBuZXcgdmFsdWUgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBvbGQgY2hpbGRyZW4gb2YgdGhlIGRvY3VtZW50XG4gICAgLy8gYXMgdGhlc2UgdmFsdWVzIGFyZSBpbW11dGFibGUgYW5kIHdlIGp1c3Qgb3ZlcnJpZGUgdGhlbVxuICAgIC8vIE5PVyBpdCBtYXR0ZXJzIGFzIHNsYXRlIGRpZCBhIHdlaXJkIHVwZGF0ZSB3aGVyZSBpdCBjaGFuZ2VzIHRoZSBpbW11dGFibGVcbiAgICAvLyBzdGF0ZSBiZWNhdXNlIG5vdyB0aGUgc3RhdGUgaXMgbXV0YWJsZVxuICAgIC8vaWYgKG5ld1ZhbHVlICE9PSB0aGlzLnN0YXRlLnRyZWVWYWx1ZS5jaGlsZHJlbiBhcyBhbnkpIHtcbiAgICAvLyB3ZSB1cGRhdGUsIHRoZSByZWFzb24gdGhlIHZhbHVlIG1pZ2h0IGJlIGVxdWFsIGlzIGJlY2F1c2UgdGhlIGNoYW5nZVxuICAgIC8vIHRyaWdnZXJzIGZvciBjaGFuZ2VzIGluIHRoZSBzZWxlY3Rpb25cbiAgICB0aGlzLnNldFZhbHVlKG5ld1ZhbHVlKTtcbiAgICAvL31cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIGhhcmQgYmx1ciBldmVudCBhbmQgdGhlIHBhdGhzIGFyZSBjbGVhcmVkIG91dFxuICAgKi9cbiAgcHVibGljIGhhcmRCbHVyKCkge1xuICAgIGlmICh0aGlzLmlzVW5tb3VudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvcjogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50czogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yczogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUNvbnRleHQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRDb250ZXh0OiBudWxsLFxuICAgICAgcHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3I6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcixcbiAgICAgIHByZXZpb3VzVGV4dEFuY2hvcjogdGhpcy5zdGF0ZS5jdXJyZW50VGV4dEFuY2hvcixcbiAgICB9KTtcbiAgICBUcmFuc2Zvcm1zLmRlc2VsZWN0KHRoaXMuZWRpdG9yKTtcbiAgICBSZWFjdEVkaXRvci5ibHVyKHRoaXMuZWRpdG9yKTtcbiAgfVxuXG4gIHB1YmxpYyBzZWxlY3RpdmVIYXJkQmx1cklmSGFzU2VsZWN0ZWRFbGVtZW50KGU6IEtleWJvYXJkRXZlbnQsIGVsZTogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50KSB7XG4gICAgICBpZiAoZWxlICYmIHRoaXMud3JhcHBlclJlZj8uY3VycmVudD8uc2VsZWN0aXZlSGFyZEJsdXIpIHtcbiAgICAgICAgdGhpcy53cmFwcGVyUmVmPy5jdXJyZW50Py5zZWxlY3RpdmVIYXJkQmx1cihlLCBlbGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5oYXJkQmx1cigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIHNvZnQgYmx1ciBldmVudFxuICAgKi9cbiAgcHVibGljIHNvZnRCbHVyKCkge1xuICAgIFJlYWN0RWRpdG9yLmJsdXIodGhpcy5lZGl0b3IpO1xuICAgIFRyYW5zZm9ybXMuZGVzZWxlY3QodGhpcy5lZGl0b3IpO1xuICB9XG5cbiAgcHVibGljIGRlbGV0ZVBhdGgocDogUGF0aCkge1xuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IgPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3I7XG5cbiAgICBpZiAoXG4gICAgICBQYXRoLmVxdWFscyhwLCBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yKSB8fFxuICAgICAgUGF0aC5pc0FuY2VzdG9yKHAsIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IpXG4gICAgKSB7XG4gICAgICB0aGlzLmxhc3RDaGFuZ2VXYXNTZWxlY3RlZERlbGV0ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgVHJhbnNmb3Jtcy5kZWxldGUodGhpcy5lZGl0b3IsIHtcbiAgICAgIGF0OiBwLFxuICAgIH0pO1xuXG4gICAgLy8gYW5kIG5vdyB3ZSBjYW4gcmVmb2N1c1xuICAgIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRUZXh0KSB7XG4gICAgICAvLyBub3cgd2UgbmVlZCB0byByZWZvY3VzXG4gICAgICBSZWFjdEVkaXRvci5mb2N1cyh0aGlzLmVkaXRvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlYWN0RWRpdG9yLmJsdXIodGhpcy5lZGl0b3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBnaXZlbiBhIG5vZGUgcGF0aCwgdGhhdCBzaG91bGQgcmVwcmVzZW50IGVpdGhlciBhbiBlbGVtZW50IG9yIGEgdGV4dCBub2RlXG4gICAqIHRoaXMgYWxsb3dzIHN1Y2ggYSBwYXRoIHRvIGJlIHNlbGVjdGVkIGFuZCBiZSBtYXJrZWQgaW50byB0aGUgc2VsZWN0aW9uXG4gICAqIEBwYXJhbSBwIHRoZSBwYXRoIHRvIHNlbGVjdFxuICAgKi9cbiAgcHVibGljIHNlbGVjdFBhdGgocDogUGF0aCkge1xuICAgIGlmICh0aGlzLmlzVW5tb3VudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gbm93IHdlIGNhbiB1cGRhdGUgdGhlIHN0YXRlXG4gICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgIHRoaXMuY2FsY3VsYXRlQW5jaG9ycyhcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2VsZWN0aW9uICYmIHRoaXMuZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IucGF0aCxcbiAgICAgICAgdGhpcy5zdGF0ZS50cmVlVmFsdWUuY2hpbGRyZW4gYXMgYW55LFxuICAgICAgICBwLFxuICAgICAgKSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsbG93cyB0byBtb3ZlIGJldHdlZW4gdHdvIHBhdGhzIGFzIGl0IG1vdmVzIGVsZW1lbnRzIHRvIG9uZSBwbGFjZSB0byBhbm90aGVyXG4gICAqIEBwYXJhbSBwIHRoZSBwYXRoIHRvIHNlbGVjdFxuICAgKi9cbiAgcHVibGljIG1vdmVQYXRocyhmcm9tOiBQYXRoLCB0bzogUGF0aCkge1xuICAgIGlmICh0aGlzLmlzVW5tb3VudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50ID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50O1xuXG4gICAgLy8gZHVlIHRvIGEgYnVnIGluIHRoZSB3YXkgdGhlIG5vZGVzIGFyZSBtb3ZlZCBhY3R1YWxseVxuICAgIC8vIGl0IGhhcyB0byBiZSBkb25lIHRoaXMgd2F5IHNvIGZpcnN0IHdlIG5lZWQgdG8gZmluZFxuICAgIC8vIGlmIHdlIGFyZSBqdXN0IHNvcnRpbmcsIHNvcnRpbmcgaW4gdGhlIHNhbWUgbGV2ZWxcbiAgICBjb25zdCB0b0Nyb3BwZWQgPSBbLi4udG9dO1xuICAgIGNvbnN0IHRvTGFzdCA9IHRvQ3JvcHBlZC5wb3AoKTtcblxuICAgIGNvbnN0IGZyb21Dcm9wcGVkID0gWy4uLmZyb21dO1xuICAgIGNvbnN0IGZyb21MYXN0ID0gZnJvbUNyb3BwZWQucG9wKCk7XG5cbiAgICAvLyB0aGlzIHdpbGwgd29yayBhcyB3aGVyZSB3ZSBhcmUgYWN0dWFsbHkgbW92aW5nIHRvXG4gICAgY29uc3QgYWN0dWFsVG8gPSBbLi4udG9dO1xuXG4gICAgLy8gaWYgd2UgYXJlIGF0IHRoZSBzYW1lIGxldmVsLCBhbmQgd2UgYXJlIG1vdmluZyB1bmRlciBvdXIgZnJvbVxuICAgIGlmIChQYXRoLmVxdWFscyhmcm9tQ3JvcHBlZCwgdG9Dcm9wcGVkKSAmJiB0b0xhc3QgPiBmcm9tTGFzdCkge1xuICAgICAgLy8gdGhlbiB3ZSBzdWJzdHJhY3Qgb25lXG4gICAgICBhY3R1YWxUb1thY3R1YWxUby5sZW5ndGggLSAxXS0tO1xuICAgIH1cblxuICAgIC8vIHRoZSByZWFzb24gd2UgZG8gdGhhdCBpcyBiZWNhdXNlIGZvciBzb21lIHdlaXJkIG1lc3NlZCB1cCByZWFzb24gc2xhdGVcbiAgICAvLyBpcyBnb2luZyB0byBtb3ZlIHRoaW5ncyBhdCB0aGUgc2FtZSBsZXZlbCBvbmUgcG9zaXRpb24gZnVydGhlciBiZWNhdXNlXG4gICAgLy8gd2UgYXJlIHRha2luZyBvbmUgZWxlbWVudCBhd2F5IChpdCBkb2VzIHRoYXQpIGFuZCB0aGVuIGl0IG1vdmVzIGl0IHRvIHRoZSB3cm9uZ1xuICAgIC8vIHBsYWNlIG9uZSBmdXJ0aGVyIGJlY2F1c2UgdGhlbiBpdCBpcyBub3QgdGhlcmUgYW55bW9yZSwgd2VpcmRseSB0aGlzIGRvZXNuJ3RcbiAgICAvLyBoYXBwZW4gd2hlbiB0aGVyZSBhcmUgbWFueSBsZXZlbHMgaW52b2x2ZWRcblxuICAgIC8vIGFuZCB3ZSBjYW4gbW92ZSBpdCBub3dcbiAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhcbiAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAge1xuICAgICAgICBhdDogZnJvbSxcbiAgICAgICAgdG86IGFjdHVhbFRvLFxuICAgICAgfVxuICAgICk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIGFuZCBub3cgd2UgbmVlZCB0byBmaW5kIG91dCB0aGUgcGF0aCB0byBzZWxlY3RcbiAgICAgIGNvbnN0IG5ld1NlbGVjdGVkQW5jaG9yID0gc2VsZWN0ZWRFbGVtZW50ID8gUmVhY3RFZGl0b3IuZmluZFBhdGgodGhpcy5lZGl0b3IsIHNlbGVjdGVkRWxlbWVudCkgOiBudWxsO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmNhbGN1bGF0ZUFuY2hvcnModGhpcy5lZGl0b3Iuc2VsZWN0aW9uICYmIHRoaXMuZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IucGF0aCwgbnVsbCwgbmV3U2VsZWN0ZWRBbmNob3IpKVxuICAgIH0sIDApO1xuICB9XG5cbiAgcHVibGljIGdldFByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLnByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yO1xuICB9XG5cbiAgcHVibGljIGdldFByZXZpb3VzVGV4dEFuY2hvcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5wcmV2aW91c1RleHRBbmNob3I7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyB0aGUgc2VsZWN0ZWQgbm9kZSB0aGF0IGhhcyBiZWVuIHNlbGVjdGVkLCBlaXRoZXIgdGhlIGN1cnJlbnQgZGVmYXVsdFxuICAgKiBvciBvbmUgdGhhdCBoYXMgYmVlbiBtYW51YWxseSBzZWxlY3RlZCB1c2luZyBzZWxlY3RQYXRoXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlU2VsZWN0ZWROb2RlKCkge1xuICAgIC8vIGZpcnN0IHdlIG1hcmsgdG8gc2F5IHRoYXQgdGhlIGxhc3Qgd2FzIHNlbGVjdGVkIGRlbGV0ZSwgcmVtZW1iZXIgYXMgZGVmaW5lZFxuICAgIC8vIHRoaXMgaXMgdXNlZCBiZWNhdXNlIGR1cmluZyB0aGUgbm9ybWFsaXphdGlvbiB0aGUgYW5jaG9ycyBtaWdodCBjb3JydXB0IGR1cmluZyB0aGVcbiAgICAvLyBjYWxsIHRvIG9uY2hhbmdlIGFzIHRoZSBzZWxlY3RlZCBhbmNob3JzIGFyZSBub3cgbWVzc2VkIHVwLCBzbyB0aGlzIGZsYWdcbiAgICAvLyBlbnN1cmVzIHRvIGNsZWFyIHVwIHRoZSBhbmNob3JzIGp1c3QgYWZ0ZXIgdGhlIHRyYW5zZm9ybVxuICAgIHRoaXMubGFzdENoYW5nZVdhc1NlbGVjdGVkRGVsZXRlID0gdHJ1ZTtcblxuICAgIGNvbnN0IHNlbGVjdGVkRWxlbWVudEFuY2hvciA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcjtcblxuICAgIC8vIHNvIHdlIGRlbGV0ZSB3aGljaCB3aWxsIGNhbGwgb25jaGFuZ2UgYW5kIG5vcm1hbGl6YXRpb25cbiAgICBUcmFuc2Zvcm1zLmRlbGV0ZSh0aGlzLmVkaXRvciwge1xuICAgICAgYXQ6IHNlbGVjdGVkRWxlbWVudEFuY2hvcixcbiAgICB9KTtcblxuICAgIC8vIGFuZCBub3cgd2UgY2FuIHJlZm9jdXNcbiAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50VGV4dCkge1xuICAgICAgLy8gbm93IHdlIG5lZWQgdG8gcmVmb2N1c1xuICAgICAgUmVhY3RFZGl0b3IuZm9jdXModGhpcy5lZGl0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBSZWFjdEVkaXRvci5ibHVyKHRoaXMuZWRpdG9yKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgaGVscGVyIGZ1bmN0aW9uIHRvIGNhbGwgcmVhY3QgZm9jdXMgYmFjayBpbnRvIHRoZSBlZGl0b3JcbiAgICovXG4gIHB1YmxpYyBmb2N1cygpIHtcbiAgICAvL3ByZXZlbnRGb2N1cygpO1xuICAgIC8vIG5vdyB3ZSBuZWVkIHRvIHJlZm9jdXNcbiAgICBSZWFjdEVkaXRvci5mb2N1cyh0aGlzLmVkaXRvcik7XG4gIH1cblxuICAvKipcbiAgICogQW4gYXN5bmMgZnVuY3Rpb24gdGhhdCBpcyBhIGJpdCBvZiBhIGhhY2sgdG8gZm9jdXMgYXQgYSBnaXZlblxuICAgKiByYW5nZSwgYmVjYXVzZSBvZiB0aGUgd2F5IHNsYXRlIHdvcmtzIGl0IG5lZWRzIHRvIGJlIGFzeW5jXG4gICAqIEBwYXJhbSBhdCB0aGUgcmFuZ2UgdG8gZm9jdXMgYXRcbiAgICogQHJldHVybnMgYSB2b2lkIHByb21pc2Ugb25jZSBpdCdzIGRvbmVcbiAgICovXG4gIHB1YmxpYyBhc3luYyBmb2N1c0F0KGF0OiBSYW5nZSB8IFBhdGgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvL3ByZXZlbnRGb2N1cygpO1xuXG4gICAgaWYgKFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHIpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgUmVhY3RFZGl0b3IuZm9jdXModGhpcy5lZGl0b3IpO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QodGhpcy5lZGl0b3IsIGF0KTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQociwgMCk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH0sIDApO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0UGF0aChhdCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGEgZmFsbGJhY2sgZm9yIGluc2VydCB3aGVuIG5vIGluc2VydCByZWdpb24gaXMgZm91bmRcbiAgICogQHBhcmFtIHR5cGUgXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgcHVibGljIGdldEZhbGxiYWNrSW5zZXJ0UGF0aCgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50KSB7XG4gICAgICByZXR1cm4gWy4uLnRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvciwgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50LmNoaWxkcmVuLmxlbmd0aF07XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCkge1xuICAgICAgcmV0dXJuIFsuLi50aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvciwgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoXTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzKSB7XG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvciA9XG4gICAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW3RoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLmxlbmd0aCAtIDFdO1xuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnQgPVxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50c1t0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cy5sZW5ndGggLSAxXTtcbiAgICAgIHJldHVybiBbLi4uY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3IsIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50LmNoaWxkcmVuLmxlbmd0aF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbdGhpcy5zdGF0ZS50cmVlVmFsdWUuY2hpbGRyZW4ubGVuZ3RoXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBpbnNlcnQgYW4gaW1hZ2UgYmFzZWQgb24gYSBnaXZlbiBmaWxlIHRoYXQgaGFzXG4gICAqIGJlZW4gdGFrZW4gYXMgYW4gaW5wdXRcbiAgICogXG4gICAqIE5vdGUgdGhhdCB0aGVyZSBpcyBhbiBpbnNlcnQgZmlsZSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBnaXZlblxuICAgKiBhcyBwcm9wIGFuZCB0aGF0J3Mgd2hhdCB0aGlzIGZ1bmN0aW9uIHdpbGwgY2FsbCwgaWYgYW4gZXJyb3Igb2NjdXJyZWRcbiAgICogaXQgc2hvdWxkIGhhdmUgYmVlbiBmZWQgYXMgYSBwcm9wIGFzIHdlbGwsIHNvIHRoaXMgZnVuY3Rpb24gYWx3YXlzXG4gICAqIHJldHVybnMgYSB2b2lkIHByb21pc2VcbiAgICogXG4gICAqIEBwYXJhbSBmaWxlIHRoZSBmaWxlXG4gICAqIEBwYXJhbSBzdGFuZGFsb25lIHdoZXRoZXIgdG8gbWFrZSBpdCBhIHN0YW5kYWxvbmUgaW1hZ2VcbiAgICogQHJldHVybnMgYSB2b2lkIHByb21pc2Ugb25jZSBpdCdzIGRvbmVcbiAgICovXG4gIHB1YmxpYyBhc3luYyBpbnNlcnRJbWFnZShmaWxlOiBGaWxlLCBzdGFuZGFsb25lOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gd2UgdHJ5XG4gICAgdHJ5IHtcbiAgICAgIC8vIG5vdyBsZXQncyBzZWUgd2hhdCB3ZSBnZXRcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnByb3BzLm9uSW5zZXJ0RmlsZShmaWxlLCB0cnVlKTtcbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZyB0aGVyZSBzaG91bGQgYmUgYW4gZXJyb3IgaW4gdGhlIHByb3BzXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gbm93IHdlIGNhbiBidWlsZCB0aGUgaW1hZ2Ugbm9kZSB0aGF0IHdlIHNob3VsZCBhZGQgaW4gdGhlIHRyZWVcbiAgICAgIGNvbnN0IGltYWdlTm9kZTogSUltYWdlID0ge1xuICAgICAgICB0eXBlOiBcImltYWdlXCIsXG4gICAgICAgIGFsdDogbnVsbCxcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBib2xkOiBmYWxzZSxcbiAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgdW5kZXJsaW5lOiBmYWxzZSxcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIGhlaWdodDogZGF0YS5oZWlnaHQsXG4gICAgICAgIHdpZHRoOiBkYXRhLndpZHRoLFxuICAgICAgICBzaXplczogXCI3MHZ3XCIsXG4gICAgICAgIHNyYzogZGF0YS5yZXN1bHQudXJsLFxuICAgICAgICBzcmNJZDogZGF0YS5yZXN1bHQuaWQsXG4gICAgICAgIHNyY1NldDogbnVsbCxcbiAgICAgICAgc3RhbmRhbG9uZSxcbiAgICAgIH07XG5cbiAgICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgaW1hZ2VOb2RlIGFzIGFueSwgeyBhdDogdGhpcy5nZXRGYWxsYmFja0luc2VydFBhdGgoKSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGltYWdlTm9kZSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZVRlbXBsYXRlVGV4dChsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCkge1xuICAgICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgICB0ZXh0Q29udGVudDogdmFsdWUgfHwgXCJcIixcbiAgICAgIH0sIHsgYXQ6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvciB9KTtcbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgICAgdGV4dDogbGFiZWwgfHwgbG9jYWxlUmVwbGFjZXIodGhpcy5wcm9wcy5iYXNlSTE4bi50ZW1wbGF0ZSwgdGhpcy5wcm9wcy5iYXNlSTE4bi50ZXh0KSxcbiAgICAgIH0sIHsgYXQ6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvciB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBpbnNlcnQgYSBiaXQgb2YgdGVtcGxhdGUgdGV4dCB0aGF0IGlzIHVzZWQgZm9yIHRlbXBsYXRpbmcgcHVycG9zZXNcbiAgICogXG4gICAqIEBwYXJhbSBsYWJlbCB0aGUgbGFiZWwgdG8gZ2l2ZSBpdFxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRoYXQgaXQgZ2V0c1xuICAgKiBAcGFyYW0gYXQgYXQgd2hpY2ggcmFuZ2UgdG8gaW5zZXJ0IGl0IChvcHRpb25hbClcbiAgICogQHJldHVybnMgYSB2b2lkIHByb21pc2VcbiAgICovXG4gIHB1YmxpYyBpbnNlcnRUZW1wbGF0ZVRleHQobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xuICAgIC8vIG5vdyB3ZSBtYWtlIHRoZSB0ZXh0IG5vZGVcbiAgICBjb25zdCB0ZXh0Tm9kZTogSVRleHQgPSB7XG4gICAgICBib2xkOiBmYWxzZSxcbiAgICAgIGl0YWxpYzogZmFsc2UsXG4gICAgICB1bmRlcmxpbmU6IGZhbHNlLFxuICAgICAgdGV4dDogbGFiZWwgfHwgbG9jYWxlUmVwbGFjZXIodGhpcy5wcm9wcy5iYXNlSTE4bi50ZW1wbGF0ZSwgdGhpcy5wcm9wcy5iYXNlSTE4bi50ZXh0KSxcbiAgICB9O1xuXG4gICAgLy8gYW5kIG5vdyB3ZSBidWlsZCBhIHBhcmFncmFwaCBub2RlIHRvIHB1dCB0aGUgdGV4dCB0aGVyZVxuICAgIGNvbnN0IGlubGluZU5vZGU6IElJbmxpbmUgPSB7XG4gICAgICBjaGlsZHJlbjogW3RleHROb2RlXSxcbiAgICAgIHR5cGU6IFwiaW5saW5lXCIsXG4gICAgICB0ZXh0Q29udGVudDogdmFsdWUgfHwgXCJcIixcbiAgICB9O1xuXG4gICAgLy8gYW5kIHdlIGNhbGwgdGhlIGluc2VydCBub2RlXG4gICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGlubGluZU5vZGUgYXMgYW55LCB7IGF0OiB0aGlzLmdldEZhbGxiYWNrSW5zZXJ0UGF0aCgpIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBpbmxpbmVOb2RlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlVGVtcGxhdGVIVE1MKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQpIHtcbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgICAgaHRtbDogdmFsdWUgfHwgXCJcIixcbiAgICAgIH0sIHsgYXQ6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yIH0pO1xuICAgICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgICB0ZXh0OiBsYWJlbCB8fCBsb2NhbGVSZXBsYWNlcih0aGlzLnByb3BzLmJhc2VJMThuLnRlbXBsYXRlLCB0aGlzLnByb3BzLmJhc2VJMThuLmNvbnRhaW5lciksXG4gICAgICB9LCB7IGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3IgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGEgYml0IG9mIHRlbXBsYXRlIGh0bWwgdGhhdCBpcyB1c2VkIGZvciB0ZW1wbGF0aW5nIHB1cnBvc2VzLCB3b3JrIHNpbWlsYXJcbiAgICogdG8gdGVtcGxhdGUgdGV4dCwgZXhjZXB0IGl0IHVzZXMgaHRtbCBjb250ZW50IGluc3RlYWQgdG8gcmVwbGFjZSB0aGUgaW5uZXIgaHRtbFxuICAgKiBcbiAgICogQHBhcmFtIGxhYmVsIHRoZSBsYWJlbCB0byBiZSBnaXZlbiB0byB0aGUgZWxlbWVudCB0byBiZSBhZGRlZFxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRoYXQgd2lsbCBiZSB1c2VkIGZyb20gdGhlIGNvbnRleHRcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlIHdoZXJlIHRvIGJlIGluc2VydGVkXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0VGVtcGxhdGVIVE1MKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICAvLyBhbmQgY3JlYXRlIGEgdGV4dCBub2RlIGJhc2VkIG9uIHRoYXRcbiAgICAvLyB3aGljaCBpcyB3aGVyZSB3ZSBwdXQgdGhlIGxhYmVsXG4gICAgY29uc3QgdGV4dE5vZGU6IElUZXh0ID0ge1xuICAgICAgYm9sZDogZmFsc2UsXG4gICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgdW5kZXJsaW5lOiBmYWxzZSxcbiAgICAgIHRleHQ6IGxhYmVsIHx8IGxvY2FsZVJlcGxhY2VyKHRoaXMucHJvcHMuYmFzZUkxOG4udGVtcGxhdGUsIHRoaXMucHJvcHMuYmFzZUkxOG4uY29udGFpbmVyKSxcbiAgICB9XG5cbiAgICAvLyBhbmQgYSBjb250YWluZXIgdG8gbWFrZSBpdCBiZSB0aGUgaW5uZXIgaHRtbFxuICAgIC8vIGNvbnRhaW5lclxuICAgIGNvbnN0IHZvaWRCbG9jazogSVZvaWRCbG9jayA9IHtcbiAgICAgIGNoaWxkcmVuOiBbdGV4dE5vZGVdLFxuICAgICAgdHlwZTogXCJ2b2lkLWJsb2NrXCIsXG4gICAgICBodG1sOiB2YWx1ZSB8fCBcIlwiLFxuICAgIH1cblxuICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgIGlmICghdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCB2b2lkQmxvY2ssIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHZvaWRCbG9jayk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluc2VydHMgYSB0YWJsZSBhdCB0aGUgZ2l2ZW4gbG9jYXRpb25cbiAgICogQHBhcmFtIHR5cGUgdGhlIHR5cGUgb2YgdGhlIHRhYmxlXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0VGFibGUodHlwZT86IHN0cmluZykge1xuICAgIC8vIG5vdyB3ZSBjYW4gbWFrZSB0aGUgY29udGFpbmVyXG4gICAgY29uc3QgdGFibGVOb2RlOiBJVGFibGUgPSB7XG4gICAgICB0eXBlOiBcInRhYmxlXCIsXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogXCJ0Ym9keVwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwidHJcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRkXCIsXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICBTVEFOREFSRF9QQVJBR1JBUEgoKSxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHRhYmxlVHlwZTogdHlwZSB8fCBudWxsLFxuICAgIH07XG5cbiAgICAvLyBhbmQgd2UgY2FsbCB0aGUgaW5zZXJ0IG5vZGVcbiAgICBpZiAoIXRoaXMuZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgdGFibGVOb2RlLCB7IGF0OiB0aGlzLmdldEZhbGxiYWNrSW5zZXJ0UGF0aCgpIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCB0YWJsZU5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpbnNlcnRUYWJsZUNvbHVtbigpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudENvbHVtbkluZGV4ID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgJiZcbiAgICAgIGZpbmRMYXN0SW5kZXgodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMsIChlKSA9PiBlLnR5cGUgPT09IFwidGRcIiB8fCBlLnR5cGUgPT09IFwidGhcIik7XG5cbiAgICBpZiAoY3VycmVudENvbHVtbkluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRDb2x1bW4gPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50c1tjdXJyZW50Q29sdW1uSW5kZXhdO1xuICAgIGNvbnN0IGN1cnJlbnRDb2x1bW5BbmNob3IgPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1tjdXJyZW50Q29sdW1uSW5kZXhdO1xuXG4gICAgLy8gdGhpcyBpcyB3aGVyZSB3ZSBlbmQgdG8gZm9jdXMgYXMgdGhhdCdzIHdoZXJlIHdlIGFkZCB0aGUgbmV3IHJvdyBhdFxuICAgIC8vIGhvd2V2ZXIgd2UgZG8gbmVlZCB0byBhZGQgYSBuZXcgY29sdW1uIGF0IHRoZSBzYW1lIGluZGV4IGluIGV2ZXJ5XG4gICAgLy8gcm93XG4gICAgY29uc3QgdGFyZ2V0Q29sdW1uQW5jaG9yID0gWy4uLmN1cnJlbnRDb2x1bW5BbmNob3JdO1xuICAgIHRhcmdldENvbHVtbkFuY2hvclt0YXJnZXRDb2x1bW5BbmNob3IubGVuZ3RoIC0gMV0rKztcblxuICAgIGNvbnN0IHRhcmdldEluZGV4ID0gdGFyZ2V0Q29sdW1uQW5jaG9yW3RhcmdldENvbHVtbkFuY2hvci5sZW5ndGggLSAxXTtcblxuICAgIGNvbnN0IHRhYmxlQW5jaG9yID0gWy4uLmN1cnJlbnRDb2x1bW5BbmNob3JdO1xuICAgIC8vIHRyXG4gICAgdGFibGVBbmNob3IucG9wKCk7XG4gICAgLy8gdGhlYWQgb3IgdGJvZHlcbiAgICB0YWJsZUFuY2hvci5wb3AoKTtcbiAgICAvLyB0YWJsZVxuICAgIHRhYmxlQW5jaG9yLnBvcCgpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRhYmxlRWxlbWVudCA9IHRoaXMuZ2V0Tm9kZUF0KHRhYmxlQW5jaG9yKSBhcyBSaWNoRWxlbWVudDtcblxuICAgICAgaWYgKHRhYmxlRWxlbWVudC50eXBlID09PSBcInRhYmxlXCIpIHtcbiAgICAgICAgdGFibGVFbGVtZW50LmNoaWxkcmVuLmZvckVhY2goKHRoZWFkT3JUYm9keU9yVGZvb3QsIHRoZWFkT3JUYm9keU9yVEZvb3RJbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlzTGFzdEVsZW1lbnRJblRhYmxlQm9keSA9IHRoZWFkT3JUYm9keU9yVEZvb3RJbmRleCA9PT0gdGFibGVFbGVtZW50LmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgICAgdGhlYWRPclRib2R5T3JUZm9vdC5jaGlsZHJlbi5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb2x1bW46IElUZCA9IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ0ZFwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIFNUQU5EQVJEX1BBUkFHUkFQSCgpLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IGFjdHVhbFRhcmdldEluZGV4OiBudW1iZXIgPSB0YXJnZXRJbmRleDtcbiAgICAgICAgICAgIGlmIChhY3R1YWxUYXJnZXRJbmRleCA+IHJvdy5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgYWN0dWFsVGFyZ2V0SW5kZXggPSByb3cuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBpbnNlcnRQb2ludCA9IFsuLi50YWJsZUFuY2hvciwgdGhlYWRPclRib2R5T3JURm9vdEluZGV4LCByb3dJbmRleCwgYWN0dWFsVGFyZ2V0SW5kZXhdO1xuXG4gICAgICAgICAgICAvLyBvbmx5IGFsbG93IHRvIG5vcm1hbGl6ZSBhdCBvdXIgbGFzdCBpbnNlcnRcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSB0aGUgbm9ybWFsaXplciB3aWxsIGdldCBjcmF6eVxuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gaXNMYXN0RWxlbWVudEluVGFibGVCb2R5ID8gcm93SW5kZXggIT09IHRoZWFkT3JUYm9keU9yVGZvb3QuY2hpbGRyZW4ubGVuZ3RoIC0gMSA6IHRydWU7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBjb2x1bW4sIHsgYXQ6IGluc2VydFBvaW50IH0pO1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRleHRBbmNob3JPZkNvbHVtbiA9IHRhcmdldENvbHVtbkFuY2hvcjtcbiAgICAgICAgLy8gcGFyYWdyYXBoXG4gICAgICAgIHRleHRBbmNob3JPZkNvbHVtbi5wdXNoKDApO1xuICAgICAgICAvLyB0ZXh0XG4gICAgICAgIHRleHRBbmNob3JPZkNvbHVtbi5wdXNoKDApO1xuXG4gICAgICAgIHRoaXMuZm9jdXNBdCh7XG4gICAgICAgICAgYW5jaG9yOiB7XG4gICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICBwYXRoOiB0YXJnZXRDb2x1bW5BbmNob3IsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb2N1czoge1xuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgcGF0aDogdGFyZ2V0Q29sdW1uQW5jaG9yLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRlbGV0ZVRhYmxlQ29sdW1uKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50Q29sdW1uSW5kZXggPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyAmJlxuICAgICAgZmluZExhc3RJbmRleCh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cywgKGUpID0+IGUudHlwZSA9PT0gXCJ0ZFwiIHx8IGUudHlwZSA9PT0gXCJ0aFwiKTtcblxuICAgIGlmIChjdXJyZW50Q29sdW1uSW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudENvbHVtbiA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzW2N1cnJlbnRDb2x1bW5JbmRleF07XG4gICAgY29uc3QgY3VycmVudENvbHVtbkFuY2hvciA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW2N1cnJlbnRDb2x1bW5JbmRleF07XG5cbiAgICAvLyB0aGlzIGlzIHRoZSBpbmRleCB3ZSBhcmUgcmVtb3ZpbmcgaW4gZWFjaCByb3dcbiAgICBjb25zdCB0YXJnZXRJbmRleCA9IGN1cnJlbnRDb2x1bW5BbmNob3JbY3VycmVudENvbHVtbkFuY2hvci5sZW5ndGggLSAxXTtcblxuICAgIGNvbnN0IHRhYmxlQW5jaG9yID0gWy4uLmN1cnJlbnRDb2x1bW5BbmNob3JdO1xuICAgIC8vIHRyXG4gICAgdGFibGVBbmNob3IucG9wKCk7XG4gICAgLy8gdGhlYWQgb3IgdGJvZHlcbiAgICB0YWJsZUFuY2hvci5wb3AoKTtcbiAgICAvLyB0YWJsZVxuICAgIHRhYmxlQW5jaG9yLnBvcCgpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRhYmxlRWxlbWVudCA9IHRoaXMuZ2V0Tm9kZUF0KHRhYmxlQW5jaG9yKSBhcyBSaWNoRWxlbWVudDtcblxuICAgICAgaWYgKHRhYmxlRWxlbWVudC50eXBlID09PSBcInRhYmxlXCIpIHtcbiAgICAgICAgdGFibGVFbGVtZW50LmNoaWxkcmVuLmZvckVhY2goKHRoZWFkT3JUYm9keU9yVGZvb3QsIHRoZWFkT3JUYm9keU9yVEZvb3RJbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlzTGFzdEVsZW1lbnRJblRhYmxlQm9keSA9IHRoZWFkT3JUYm9keU9yVEZvb3RJbmRleCA9PT0gdGFibGVFbGVtZW50LmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgICAgdGhlYWRPclRib2R5T3JUZm9vdC5jaGlsZHJlbi5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZWxldGVQb2ludCA9IFsuLi50YWJsZUFuY2hvciwgdGhlYWRPclRib2R5T3JURm9vdEluZGV4LCByb3dJbmRleCwgdGFyZ2V0SW5kZXhdO1xuXG4gICAgICAgICAgICAvLyBvbmx5IGFsbG93IHRvIG5vcm1hbGl6ZSBhdCBvdXIgbGFzdCBpbnNlcnRcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSB0aGUgbm9ybWFsaXplciB3aWxsIGdldCBjcmF6eVxuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gaXNMYXN0RWxlbWVudEluVGFibGVCb2R5ID8gcm93SW5kZXggIT09IHRoZWFkT3JUYm9keU9yVGZvb3QuY2hpbGRyZW4ubGVuZ3RoIC0gMSA6IHRydWU7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZSh0aGlzLmVkaXRvciwgeyBhdDogZGVsZXRlUG9pbnQgfSk7XG4gICAgICAgICAgICB0aGlzLnByZXZlbnROb3JtYWxpemUgPSBmYWxzZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG5cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaW5zZXJ0VGFibGVSb3coKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRSb3dJbmRleCA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzICYmXG4gICAgICBmaW5kTGFzdEluZGV4KHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzLCAoZSkgPT4gZS50eXBlID09PSBcInRyXCIpO1xuXG4gICAgaWYgKGN1cnJlbnRSb3dJbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50Um93ID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHNbY3VycmVudFJvd0luZGV4XTtcbiAgICBjb25zdCBjdXJyZW50Um93QW5jaG9yID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbY3VycmVudFJvd0luZGV4XTtcblxuICAgIGNvbnN0IHJvdzogSVRyID0ge1xuICAgICAgdHlwZTogXCJ0clwiLFxuICAgICAgY2hpbGRyZW46IGN1cnJlbnRSb3cuY2hpbGRyZW4ubWFwKCh2KSA9PiAoXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcInRkXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIFNUQU5EQVJEX1BBUkFHUkFQSCgpLFxuICAgICAgICAgIF0sXG4gICAgICAgIH1cbiAgICAgICkpLFxuICAgIH07XG5cbiAgICAvLyBhbmQgbm93IGxldCdzIGdldCB0aGUgdGhlYWQgb3IgdGJvZHkgaW4gcXVlc3Rpb25cbiAgICBjb25zdCBwYXJlbnRUYm9keU9yVGhlYWRPclRmb290QW5jaG9yID0gWy4uLmN1cnJlbnRSb3dBbmNob3JdO1xuICAgIHBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3RBbmNob3IucG9wKCk7XG4gICAgY29uc3QgcGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdCA9IHRoaXMuZ2V0Tm9kZUF0KHBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3RBbmNob3IpIGFzIFJpY2hFbGVtZW50O1xuXG4gICAgLy8gaWYgaXQncyBhIHRib2R5XG4gICAgaWYgKHBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3QudHlwZSA9PT0gXCJ0Ym9keVwiKSB7XG4gICAgICAvLyB3ZSBzaW1wbHkgYWRkIHRoZSByb3cgbmV4dCB0byB0aGUgY3VycmVudFxuICAgICAgY29uc3QgdGFyZ2V0Um93QW5jaG9yID0gY3VycmVudFJvd0FuY2hvcjtcbiAgICAgIHRhcmdldFJvd0FuY2hvclt0YXJnZXRSb3dBbmNob3IubGVuZ3RoIC0gMV0rKztcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHJvdywgeyBhdDogdGFyZ2V0Um93QW5jaG9yIH0pO1xuXG4gICAgICBjb25zdCB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQgPSB0YXJnZXRSb3dBbmNob3I7XG4gICAgICAvLyBmaXJzdCB0ZFxuICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG4gICAgICAvLyBmaXJzdCBwYXJhZ3JhcGhcbiAgICAgIHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dC5wdXNoKDApO1xuICAgICAgLy8gZmlyc3QgdGV4dCBpbiBwYXJhZ3JhcGhcbiAgICAgIHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dC5wdXNoKDApO1xuXG4gICAgICB0aGlzLmZvY3VzQXQoe1xuICAgICAgICBhbmNob3I6IHtcbiAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgcGF0aDogdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LFxuICAgICAgICB9LFxuICAgICAgICBmb2N1czoge1xuICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICBwYXRoOiB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3QudHlwZSA9PT0gXCJ0aGVhZFwiKSB7XG4gICAgICAvLyBvdGhlcndpc2Ugd2UgbmVlZCB0byBhZGQgdGhlIHJvdyBpbiB0aGUgdGJvZHksIHRoYXQgaXMgbmV4dFxuICAgICAgLy8gdG8gdGhlIHRoZWFkXG4gICAgICBjb25zdCB0Ym9keUFuY2hvciA9IFsuLi5wYXJlbnRUYm9keU9yVGhlYWRPclRmb290QW5jaG9yXTtcbiAgICAgIHRib2R5QW5jaG9yW3Rib2R5QW5jaG9yLmxlbmd0aCAtIDFdKys7XG5cbiAgICAgIC8vIGxldCdzIGdldCB0aGUgdGJvZHlcbiAgICAgIGxldCB0Ym9keTogUmljaEVsZW1lbnQgPSBudWxsO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGJvZHkgPSB0aGlzLmdldE5vZGVBdCh0Ym9keUFuY2hvcikgYXMgUmljaEVsZW1lbnQ7XG4gICAgICB9IGNhdGNoIHtcblxuICAgICAgfVxuXG4gICAgICAvLyBpZiB3ZSBoYXZlIGEgdGJvZHlcbiAgICAgIGlmICh0Ym9keSAmJiB0Ym9keS50eXBlID09PSBcInRib2R5XCIpIHtcbiAgICAgICAgLy8gbmV3IHJvdyBhdCB0aGUgc3RhcnQgb2YgdGhlIHRib2R5XG4gICAgICAgIGNvbnN0IHRhcmdldFJvd0FuY2hvciA9IHRib2R5QW5jaG9yO1xuICAgICAgICB0YXJnZXRSb3dBbmNob3IucHVzaCgwKTtcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgcm93LCB7IGF0OiB0YXJnZXRSb3dBbmNob3IgfSk7XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0ID0gdGFyZ2V0Um93QW5jaG9yO1xuICAgICAgICAvLyBmaXJzdCB0ZFxuICAgICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgICAgLy8gZmlyc3QgcGFyYWdyYXBoXG4gICAgICAgIHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dC5wdXNoKDApO1xuICAgICAgICAvLyBmaXJzdCB0ZXh0IGluIHBhcmFncmFwaFxuICAgICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcblxuICAgICAgICB0aGlzLmZvY3VzQXQoe1xuICAgICAgICAgIGFuY2hvcjoge1xuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgcGF0aDogdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9jdXM6IHtcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIHBhdGg6IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5vIHRib2R5LCB3ZSBuZWVkIHRvIGFkZCBhIG5ldyB0Ym9keSB3aGVyZSBpdCBzaG91bGQgYmVcbiAgICAgICAgLy8gY291bGQgYmUgYSB0Zm9vdCBvciBkb3ducmlnaHQgbWlzc2luZ1xuICAgICAgICBjb25zdCB0Ym9keTogSVRib2R5ID0ge1xuICAgICAgICAgIHR5cGU6IFwidGJvZHlcIixcbiAgICAgICAgICBjaGlsZHJlbjogW3Jvd10sXG4gICAgICAgIH07XG5cbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgdGJvZHksIHsgYXQ6IHRib2R5QW5jaG9yIH0pO1xuXG4gICAgICAgIGNvbnN0IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCA9IHRib2R5QW5jaG9yO1xuICAgICAgICAvLyBmaXJzdCB0clxuICAgICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgICAgLy8gZmlyc3QgdGRcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG4gICAgICAgIC8vIGZpcnN0IHBhcmFncmFwaFxuICAgICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgICAgLy8gZmlyc3QgdGV4dCBpbiBwYXJhZ3JhcGhcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG5cbiAgICAgICAgdGhpcy5mb2N1c0F0KHtcbiAgICAgICAgICBhbmNob3I6IHtcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIHBhdGg6IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvY3VzOiB7XG4gICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICBwYXRoOiB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJlbnRUYm9keU9yVGhlYWRPclRmb290LnR5cGUgPT09IFwidGZvb3RcIikge1xuICAgICAgLy8gb3RoZXJ3aXNlIHdlIG5lZWQgdG8gYWRkIHRoZSByb3cgaW4gdGhlIHRib2R5LCB0aGF0IGlzIG5leHRcbiAgICAgIC8vIHRvIHRoZSB0aGVhZFxuICAgICAgY29uc3QgdGJvZHlBbmNob3IgPSBbLi4ucGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdEFuY2hvcl07XG4gICAgICB0Ym9keUFuY2hvclt0Ym9keUFuY2hvci5sZW5ndGggLSAxXS0tO1xuXG4gICAgICAvLyBsZXQncyBnZXQgdGhlIHRib2R5XG4gICAgICBsZXQgdGJvZHk6IFJpY2hFbGVtZW50ID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRib2R5ID0gdGhpcy5nZXROb2RlQXQodGJvZHlBbmNob3IpIGFzIFJpY2hFbGVtZW50O1xuICAgICAgfSBjYXRjaCB7XG5cbiAgICAgIH1cblxuICAgICAgY29uc3QgdGZvb3RDbG9uZSA9IHsgLi4ucGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdCB9IGFzIElUZm9vdDtcbiAgICAgIHRmb290Q2xvbmUuY2hpbGRyZW4gPSB0Zm9vdENsb25lLmNoaWxkcmVuLm1hcCgodikgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IFwidHJcIixcbiAgICAgICAgICBjaGlsZHJlbjogdi5jaGlsZHJlbi5tYXAodjIgPT4gKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiBcInRkXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgU1RBTkRBUkRfUEFSQUdSQVBIKCksXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICApKSxcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGlmIHdlIGhhdmUgYSB0Ym9keVxuICAgICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gdHJ1ZTtcbiAgICAgIGlmICh0Ym9keSAmJiB0Ym9keS50eXBlID09PSBcInRib2R5XCIpIHtcbiAgICAgICAgLy8gd2UgdXBkYXRlIG91ciB0Zm9vdCB0byBiZSB0Ym9keSBzbyB0aGF0IGl0IG1lcmdlc1xuICAgICAgICBjb25zdCBjdXJyZW50VEJvZHlQcm9wc0NvcHkgPSB7IC4uLnRib2R5IH07XG4gICAgICAgIGRlbGV0ZSBjdXJyZW50VEJvZHlQcm9wc0NvcHkuY2hpbGRyZW47XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAgY3VycmVudFRCb2R5UHJvcHNDb3B5IGFzIGFueSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhdDogcGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdEFuY2hvcixcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB3ZSBzaW1wbHkgbWFrZSBpdCBpbnRvIGEgdGJvZHlcbiAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhcbiAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBcInRib2R5XCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhdDogcGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdEFuY2hvcixcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aGlzLnByZXZlbnROb3JtYWxpemUgPSBmYWxzZTtcblxuICAgICAgY29uc3QgbmV4dEFuY2hvckZvclRmb290ID0gWy4uLnBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3RBbmNob3JdO1xuICAgICAgbmV4dEFuY2hvckZvclRmb290W25leHRBbmNob3JGb3JUZm9vdC5sZW5ndGggLSAxXSsrO1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgdGZvb3RDbG9uZSwgeyBhdDogbmV4dEFuY2hvckZvclRmb290IH0pO1xuXG4gICAgICAvLyBpZiB0aGVyZSB3YXMgYSB0Ym9keSB0aGUgbWVyZ2luZyByZWFjdGlvbiBjYXVzZWQgdGhhdCB0aGUgbmV4dCBhbmNob3IgaXMgbm90XG4gICAgICAvLyBhbnltb3JlIHdoZXJlIG91ciBub2RlIGlzIHNvIHdlIGNhbiB1c2UgdGhpcyBvbmUsIG90aGVyd2lzZSBpdCBpcyB0aGUgc2FtZSBhcyB0aGUgbmV4dFxuICAgICAgY29uc3QgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0ID0gdGJvZHkgPyBwYXJlbnRUYm9keU9yVGhlYWRPclRmb290QW5jaG9yIDogbmV4dEFuY2hvckZvclRmb290O1xuICAgICAgLy8gZmlyc3QgdHJcbiAgICAgIHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dC5wdXNoKDApO1xuICAgICAgLy8gZmlyc3QgdGRcbiAgICAgIHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dC5wdXNoKDApO1xuICAgICAgLy8gZmlyc3QgcGFyYWdyYXBoXG4gICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgIC8vIGZpcnN0IHRleHQgaW4gcGFyYWdyYXBoXG4gICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcblxuICAgICAgdGhpcy5mb2N1c0F0KHtcbiAgICAgICAgYW5jaG9yOiB7XG4gICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgIHBhdGg6IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCxcbiAgICAgICAgfSxcbiAgICAgICAgZm9jdXM6IHtcbiAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgcGF0aDogdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRlbGV0ZVRhYmxlUm93KCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50Um93SW5kZXggPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyAmJlxuICAgICAgZmluZExhc3RJbmRleCh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cywgKGUpID0+IGUudHlwZSA9PT0gXCJ0clwiKTtcblxuICAgIGlmIChjdXJyZW50Um93SW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKHRoaXMuZWRpdG9yLCB7IGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1tjdXJyZW50Um93SW5kZXhdIH0pO1xuICAgIH0gY2F0Y2gge1xuXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRlbGxzIHdoZXRoZXIgdGhlIGN1cnJlbnQgdGFibGUgcm93IGNhblxuICAgKiBiZSB0b2dnbGVkIGluIHRoZSBlbnZpcm9ubWVudCBpdCBpc1xuICAgKi9cbiAgcHVibGljIGNhblRvZ2dsZVRhYmxlKGVsZW1lbnQ6IFwidGhlYWRcIiB8IFwidGZvb3RcIikge1xuICAgIGlmICghdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBwb3RlbnRpYWxUZEluZGV4ID0gZmluZExhc3RJbmRleCh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cywgKGUpID0+IGUudHlwZSA9PT0gXCJ0ZFwiIHx8IGUudHlwZSA9PT0gXCJ0aFwiKTtcblxuICAgIGlmIChwb3RlbnRpYWxUZEluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHRkQW5jaG9yID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbcG90ZW50aWFsVGRJbmRleF07XG5cbiAgICBjb25zdCByb3dQYXRoID0gWy4uLnRkQW5jaG9yXTtcbiAgICByb3dQYXRoLnBvcCgpO1xuXG4gICAgY29uc3QgdGhlYWRPclRib2R5T3JUZm9vdFBhdGggPSBbLi4ucm93UGF0aF07XG4gICAgdGhlYWRPclRib2R5T3JUZm9vdFBhdGgucG9wKCk7XG5cbiAgICBjb25zdCB0YWJsZVBhdGggPSBbLi4udGhlYWRPclRib2R5T3JUZm9vdFBhdGhdO1xuICAgIHRhYmxlUGF0aC5wb3AoKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwb3RlbnRpYWxSb3cgPSB0aGlzLmdldE5vZGVBdChyb3dQYXRoKSBhcyBSaWNoRWxlbWVudDtcbiAgICAgIGlmIChwb3RlbnRpYWxSb3cudHlwZSAhPT0gXCJ0clwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGhlYWRPclRib2R5T3JUZm9vdCA9IHRoaXMuZ2V0Tm9kZUF0KHRoZWFkT3JUYm9keU9yVGZvb3RQYXRoKSBhcyBSaWNoRWxlbWVudDtcbiAgICAgIGlmICh0aGVhZE9yVGJvZHlPclRmb290LnR5cGUgPT09IGVsZW1lbnQpIHtcbiAgICAgICAgLy8gaWYgd2UgYXJlIGFscmVhZHkgaW4gYSB0aGVhZCBvZiBjb3Vyc2Ugd2UgY2FuIHRvZ2dsZSBpdCBpbnRvIGEgdGJvZHlcbiAgICAgICAgLy8gcm93IGVsZW1lbnRcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRoZWFkT3JUYm9keU9yVGZvb3QudHlwZSA9PT0gXCJ0Zm9vdFwiIHx8IHRoZWFkT3JUYm9keU9yVGZvb3QudHlwZSA9PT0gXCJ0aGVhZFwiKSB7XG4gICAgICAgIC8vIHdlIGNhbid0IGNvbnZlcnQgdGhlIHNhbWUgdGhpbmcgYXMgd2UgYXJlIG5vdCBpbiB0aGUgcmlnaHQgcGxhY2VcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0YWJsZVBhcmVudCA9IHRoaXMuZ2V0Tm9kZUF0KHRhYmxlUGF0aCkgYXMgUmljaEVsZW1lbnQ7XG4gICAgICBpZiAodGFibGVQYXJlbnQudHlwZSAhPT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gd2UgY2Fubm90IHRvZ2dsZSBpZiB3ZSBhbHJlYWR5IGhhdmUgYSB0aGVhZFxuICAgICAgY29uc3QgdGhlYWRPclRmb290QWxyZWFkeUV4aXN0cyA9IHRhYmxlUGFyZW50LmNoaWxkcmVuLmZpbmQoKGMpID0+IGMudHlwZSA9PT0gZWxlbWVudCk7XG4gICAgICBpZiAodGhlYWRPclRmb290QWxyZWFkeUV4aXN0cykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZWxlbWVudCA9PT0gXCJ0aGVhZFwiKSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIGNhbiBvbmx5IHRvZ2dsZSBpZiB0aGlzIGlzIHRoZSBmaXJzdCByb3cgb2YgdGhlIHRhYmxlXG4gICAgICAgICAgcmV0dXJuIHJvd1BhdGhbcm93UGF0aC5sZW5ndGggLSAxXSA9PT0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50ID09PSBcInRmb290XCIpIHtcbiAgICAgICAgICAvLyBvdGhlcndpc2Ugd2UgY2FuIG9ubHkgdG9nZ2xlIGlmIHRoaXMgaXMgdGhlIGxhc3Qgcm93IG9mIHRoZSB0YWJsZVxuICAgICAgICAgIHJldHVybiByb3dQYXRoW3Jvd1BhdGgubGVuZ3RoIC0gMV0gPT09IHRoZWFkT3JUYm9keU9yVGZvb3QuY2hpbGRyZW4ubGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT25seSB3b3JrcyB3aGVuIHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSB0YWJsZVxuICAgKiBpcyBzZWxlY3RlZCwgYWthIHRoZSBmaXJzdCByb3dcbiAgICovXG4gIHB1YmxpYyB0b2dnbGVUYWJsZShlbGVtZW50OiBcInRoZWFkXCIgfCBcInRmb290XCIpIHtcbiAgICBpZiAoIXRoaXMuY2FuVG9nZ2xlVGFibGUoZWxlbWVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwb3RlbnRpYWxUZEluZGV4ID0gZmluZExhc3RJbmRleCh0aGlzLnN0YXRlLmN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHMsIChlKSA9PiBlLnR5cGUgPT09IFwidGRcIiB8fCBlLnR5cGUgPT09IFwidGhcIik7XG4gICAgY29uc3QgdGRBbmNob3IgPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1twb3RlbnRpYWxUZEluZGV4XTtcblxuICAgIGNvbnN0IHJvd1BhdGggPSBbLi4udGRBbmNob3JdO1xuICAgIHJvd1BhdGgucG9wKCk7XG5cbiAgICBjb25zdCB0aGVhZE9yVGJvZHlQYXRoID0gWy4uLnJvd1BhdGhdO1xuICAgIHRoZWFkT3JUYm9keVBhdGgucG9wKCk7XG5cbiAgICBjb25zdCB0YWJsZVBhdGggPSBbLi4udGhlYWRPclRib2R5UGF0aF07XG4gICAgdGFibGVQYXRoLnBvcCgpO1xuXG4gICAgY29uc3QgdGFibGVQYXJlbnQgPSB0aGlzLmdldE5vZGVBdCh0YWJsZVBhdGgpIGFzIElUYWJsZTtcblxuICAgIC8vIG1vdmUgYWxsIHRoZSB0aGVhZCBlbGVtZW50cyBpbnRvIHRoZSB0Ym9keVxuICAgIGNvbnN0IHBvc2l0aW9uID0gdGFibGVQYXJlbnQuY2hpbGRyZW4uZmluZEluZGV4KChlKSA9PiBlLnR5cGUgPT09IGVsZW1lbnQpO1xuICAgIGNvbnN0IGJvZHlQb3NpdGlvbiA9IHRhYmxlUGFyZW50LmNoaWxkcmVuLmZpbmRJbmRleCgoZSkgPT4gZS50eXBlID09PSBcInRib2R5XCIpO1xuICAgIGlmIChwb3NpdGlvbiAhPT0gLTEpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRUQm9keSA9IHRhYmxlUGFyZW50LmNoaWxkcmVuW2JvZHlQb3NpdGlvbl07XG5cbiAgICAgIGlmICghY3VycmVudFRCb2R5KSB7XG4gICAgICAgIC8vIG5vIGJvZHkgbGV0J3MgbWFrZSB0aGUgd2hvbGUgdGhpbmcgdGhlIGJvZHlcbiAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhcbiAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBcInRib2R5XCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgcG9zaXRpb25dLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGVuc3VyZSB0aGV5IHdpbGwgbWVyZ2UgYW5kIGJlY29tZSAxIHNpbmdsZSBib2R5XG4gICAgICAgIC8vIGFzIHRoZXkgYXJlIG1lcmdhYmxlXG4gICAgICAgIGNvbnN0IGN1cnJlbnRUQm9keVByb3BzQ29weSA9IHsgLi4uY3VycmVudFRCb2R5IH07XG4gICAgICAgIGRlbGV0ZSBjdXJyZW50VEJvZHlQcm9wc0NvcHkuY2hpbGRyZW47XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAgY3VycmVudFRCb2R5UHJvcHNDb3B5IGFzIGFueSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgcG9zaXRpb25dLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbW92ZSB0aGUgZmlyc3Qgcm93IG9mIHRoZSB0Ym9keSBhcyBhIHRoZWFkXG4gICAgICBjb25zdCBjdXJyZW50VEJvZHkgPSB0YWJsZVBhcmVudC5jaGlsZHJlbltib2R5UG9zaXRpb25dO1xuXG4gICAgICBpZiAoIWN1cnJlbnRUQm9keSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIG9ubHkgdGhhdCBvbmUgcm93XG4gICAgICBpZiAoY3VycmVudFRCb2R5LmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBubyBvdGhlciB0aGFuIG9uZSByb3cgbGV0J3MgbWFrZSB0aGUgd2hvbGUgdGhpbmcgdGhlIHRoZWFkXG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogZWxlbWVudCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGF0OiBbLi4udGFibGVQYXRoLCBib2R5UG9zaXRpb25dLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUQm9keVByb3BzQ29weSA9IHsgLi4uY3VycmVudFRCb2R5IH07XG4gICAgICAgIGN1cnJlbnRUQm9keVByb3BzQ29weS5jaGlsZHJlbiA9IFtdO1xuICAgICAgICBjdXJyZW50VEJvZHlQcm9wc0NvcHkudHlwZSA9IGVsZW1lbnQ7XG5cbiAgICAgICAgLy8gaW5zZXJ0aW5nIGVtcHR5IGVsZW1lbnRcbiAgICAgICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gdHJ1ZTtcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhcbiAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICBjdXJyZW50VEJvZHlQcm9wc0NvcHkgYXMgYW55LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGF0OiBbLi4udGFibGVQYXRoLCBlbGVtZW50ID09PSBcInRoZWFkXCIgPyAwIDogYm9keVBvc2l0aW9uICsgMV0sXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICB0aGlzLnByZXZlbnROb3JtYWxpemUgPSBmYWxzZTtcblxuICAgICAgICBpZiAoZWxlbWVudCA9PT0gXCJ0aGVhZFwiKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoXG4gICAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgLy8gdGJvZHkgaXMgbm93IGluIDEgYWhlYWRcbiAgICAgICAgICAgICAgLy8gemVybyBmb3IgdGhlIGZpcnN0IHJvd1xuICAgICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgYm9keVBvc2l0aW9uICsgMSwgMF0sXG4gICAgICAgICAgICAgIC8vIHRoaXMgaXMgb3VyIG5ldyB0aGVhZFxuICAgICAgICAgICAgICB0bzogWy4uLnRhYmxlUGF0aCwgMCwgMF0sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyB0Ym9keSBpcyBhdCB0aGUgc2FtZSBwbGFjZSBhcyBiZWZvcmVcbiAgICAgICAgICAgICAgLy8gd2UgcGljayB0aGUgbGFzdCByb3dcbiAgICAgICAgICAgICAgYXQ6IFsuLi50YWJsZVBhdGgsIGJvZHlQb3NpdGlvbiwgY3VycmVudFRCb2R5LmNoaWxkcmVuLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgICAvLyB0aGlzIGlzIG91ciBuZXcgdGZvb3Qgd2hpY2ggaXMgYWZ0ZXIgb3VyIGJvZHlcbiAgICAgICAgICAgICAgdG86IFsuLi50YWJsZVBhdGgsIGJvZHlQb3NpdGlvbiArIDEsIDBdLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRWaWRlb1NyY09yaWdpbkFuZFN0YXR1cyh1cmw6IHN0cmluZykge1xuICAgIC8vIGZpcnN0IHdlIHBhcnNlIHRoZSB1cmwsIHdlIG9ubHkgc3VwcG9ydCB5b3V0dWJlIG9yIHZpbWVvXG4gICAgLy8gdXJscyBmb3IgdGhlIHZpZGVvXG4gICAgbGV0IHNyYzogc3RyaW5nID0gbnVsbDtcbiAgICBsZXQgb3JpZ2luOiBzdHJpbmcgPSBudWxsO1xuICAgIGxldCBzdGF0dXM6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgbGV0IHBhcnNlZFVSTDogVVJMID0gbnVsbDtcbiAgICBpZiAodXJsKSB7XG4gICAgICB0cnkge1xuICAgICAgICBwYXJzZWRVUkwgPSBuZXcgVVJMKHVybCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgc3RhdHVzID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZmlyc3Qgd2UgYXJlIGdvaW5nIHRvIGNoZWNrIGZvciB5b3V0dWJlXG4gICAgLy8gdXJsc1xuICAgIGlmIChwYXJzZWRVUkwpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcGFyc2VkVVJMLmhvc3RuYW1lID09PSBcInlvdXR1YmUuY29tXCIgfHxcbiAgICAgICAgcGFyc2VkVVJMLmhvc3RuYW1lID09PSBcInd3dy55b3V0dWJlLmNvbVwiIHx8XG4gICAgICAgIHBhcnNlZFVSTC5ob3N0bmFtZSA9PT0gXCJ5b3V0dS5iZVwiXG4gICAgICApIHtcbiAgICAgICAgLy8gc2V0IGl0IGFzIHlvdXR1YmUgaW4gdGhlIG9yaWdpblxuICAgICAgICBvcmlnaW4gPSBcInlvdXR1YmVcIjtcblxuICAgICAgICAvLyBjaGVjayBmb3IgY2xhc3NpYyB5b3V0dWJlIHVybHNcbiAgICAgICAgY29uc3QgaXNDbGFzc2ljWVRVcmwgPSAoXG4gICAgICAgICAgcGFyc2VkVVJMLmhvc3RuYW1lID09PSBcInlvdXR1YmUuY29tXCIgfHxcbiAgICAgICAgICBwYXJzZWRVUkwuaG9zdG5hbWUgPT09IFwid3d3LnlvdXR1YmUuY29tXCJcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBhbmQgdGhlbiB3ZSBjYW4gY2hlY2sgZm9yIHRoZXNlIGFzIHdlIHRyeVxuICAgICAgICAvLyB0byBnZXQgdGhlIHNvdXJjZSBpZFxuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNDbGFzc2ljWVRVcmwgJiZcbiAgICAgICAgICBwYXJzZWRVUkwucGF0aG5hbWUuc3RhcnRzV2l0aChcIi9lbWJlZC9cIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgc3JjID0gcGFyc2VkVVJMLnBhdGhuYW1lLnNwbGl0KFwiL1wiKVsyXTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBpc0NsYXNzaWNZVFVybCAmJlxuICAgICAgICAgIHBhcnNlZFVSTC5wYXRobmFtZS5zdGFydHNXaXRoKFwiL3dhdGNoXCIpXG4gICAgICAgICkge1xuICAgICAgICAgIGxldCBzZWFyY2ggPSBwYXJzZWRVUkwuc2VhcmNoO1xuICAgICAgICAgIGlmIChzZWFyY2hbMF0gPT09IFwiP1wiKSB7XG4gICAgICAgICAgICBzZWFyY2ggPSBzZWFyY2guc3Vic3RyKDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWFyY2guc3BsaXQoXCImXCIpLmZvckVhY2goKHYpID0+IHtcbiAgICAgICAgICAgIGlmICh2LnN0YXJ0c1dpdGgoXCJ2PVwiKSkge1xuICAgICAgICAgICAgICBzcmMgPSB2LnN1YnN0cigyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBwYXJzZWRVUkwuaG9zdG5hbWUgPT09IFwieW91dHUuYmVcIlxuICAgICAgICApIHtcbiAgICAgICAgICBzcmMgPSBwYXJzZWRVUkwucGF0aG5hbWUuc3BsaXQoXCIvXCIpWzFdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2UgaGF2ZSBzdWNjZWRlZFxuICAgICAgICBzdGF0dXMgPSB0cnVlO1xuXG4gICAgICAgIC8vIG5vdyBmb3IgdmltZW9cbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHBhcnNlZFVSTC5ob3N0ID09PSBcInBsYXllci52aW1lby5jb21cIlxuICAgICAgKSB7XG4gICAgICAgIC8vIG11Y2ggc2ltcGxlclxuICAgICAgICBvcmlnaW4gPSBcInZpbWVvXCI7XG4gICAgICAgIHNyYyA9IHBhcnNlZFVSTC5wYXRobmFtZS5zcGxpdChcIi9cIilbMl07XG4gICAgICAgIHN0YXR1cyA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXR1cyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzcmMsXG4gICAgICBvcmlnaW4sXG4gICAgICBzdGF0dXMsXG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZVZpZGVvKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuX2dldFZpZGVvU3JjT3JpZ2luQW5kU3RhdHVzKHVybCk7XG5cbiAgICBpZiAoXG4gICAgICBkYXRhLnN0YXR1cyAmJlxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQgJiZcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50LnR5cGUgPT09IFwidmlkZW9cIlxuICAgICkge1xuICAgICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgICBvcmlnaW46IGRhdGEub3JpZ2luLFxuICAgICAgICBzcmM6IGRhdGEuc3JjLFxuICAgICAgfSBhcyBhbnksIHtcbiAgICAgICAgYXQ6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhLnN0YXR1cztcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIGluc2VydCBhIHZpZGVvIGdpdmVuIHRoZSBpbmZvcm1hdGlvblxuICAgKiBAcGFyYW0gdXJsIHRoZSB1cmwgb2YgdGhlIHZpZGVvXG4gICAqIEBwYXJhbSBhdCBhIHBhcnRpYWwgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqIEByZXR1cm5zIGEgYm9vbGVhbiBvbiB3aGV0aGVyIGl0IHN1Y2NlZWRlZFxuICAgKi9cbiAgcHVibGljIGluc2VydFZpZGVvKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuX2dldFZpZGVvU3JjT3JpZ2luQW5kU3RhdHVzKHVybCk7XG5cblxuICAgIC8vIGFuZCBpbnNlcnQgdGhlIHZpZGVvIGlmIHdlIGhhdmUgYmVlblxuICAgIC8vIGNvbnNpZGVyZWQgc3VjY2VzZnVsXG4gICAgY29uc3QgdmlkZW9Ob2RlOiBJVmlkZW8gPSB7XG4gICAgICB0eXBlOiBcInZpZGVvXCIsXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICB7XG4gICAgICAgICAgYm9sZDogZmFsc2UsXG4gICAgICAgICAgaXRhbGljOiBmYWxzZSxcbiAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBvcmlnaW46IGRhdGEub3JpZ2luIGFzIGFueSxcbiAgICAgIHNyYzogZGF0YS5zcmMsXG4gICAgfVxuXG4gICAgLy8gYW5kIHdlIGNhbGwgdGhlIGluc2VydCBub2RlXG4gICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHZpZGVvTm9kZSwgeyBhdDogdGhpcy5nZXRGYWxsYmFja0luc2VydFBhdGgoKSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgdmlkZW9Ob2RlKTtcbiAgICB9XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICAvLyB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcblxuICAgIC8vIHJldHVybiB0aGUgc3RhdHVzXG4gICAgcmV0dXJuIGRhdGEuc3RhdHVzO1xuICB9O1xuICAvKipcbiAgICogV2lsbCBpbnNlcnQgYSBmaWxlIGJhc2VkIG9uIHRoZSBpbmZvcm1hdGlvbiBnaXZlbiBpdCB1c2VzXG4gICAqIHRoZSBzdGFuZGFyZCBvbiBpbnNlcnQgZmlsZSBmdW5jdGlvbiBpbiBvcmRlciB0byBwZXJmb20gaXRcbiAgICpcbiAgICogQHBhcmFtIGZpbGUgdGhlIGZpbGUgdG8gaW5zZXJ0XG4gICAqIEBwYXJhbSBhdCBhIHBhcnRpYWwgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5zZXJ0RmlsZShmaWxlOiBGaWxlKSB7XG4gICAgLy8gc28gd2UgdHJ5XG4gICAgdHJ5IHtcbiAgICAgIC8vIHdlIGNhbGwgdGhlIGluc2VydCBmaWxlIGZ1bmN0aW9uLCBhbmQgcGFzcyBmYWxzZSBiZWNhdXNlXG4gICAgICAvLyB3ZSBhcmUgbm90IGRlYWxpbmcgd2l0aCBhbiBpbWFnZVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucHJvcHMub25JbnNlcnRGaWxlKGZpbGUsIGZhbHNlKTtcblxuICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nIHRoZXJlIHNob3VsZCBiZSBhbiBlcnJvciBpbiB0aGUgc3RhdGVcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBub3cgd2UgY2FuIGJ1aWxkIHRoZSBmaWxlIG5vZGVcbiAgICAgIGNvbnN0IGZpbGVOb2RlOiBJRmlsZSA9IHtcbiAgICAgICAgdHlwZTogXCJmaWxlXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgYm9sZDogZmFsc2UsXG4gICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBleHRlbnNpb246IG1pbWVUeXBlVG9FeHRlbnNpb24oZmlsZS50eXBlKSxcbiAgICAgICAgZmlsZU5hbWU6IGRhdGEucmVzdWx0Lm5hbWUsXG4gICAgICAgIHNpemU6IHByZXR0eUJ5dGVzKGRhdGEucmVzdWx0LnNpemUpLFxuICAgICAgICBzcmM6IGRhdGEucmVzdWx0LnVybCxcbiAgICAgICAgc3JjSWQ6IGRhdGEucmVzdWx0LmlkLFxuICAgICAgfTtcblxuICAgICAgLy8gYW5kIHdlIGNhbGwgdGhlIGluc2VydCBub2RlXG4gICAgICBpZiAoIXRoaXMuZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBmaWxlTm9kZSwgeyBhdDogdGhpcy5nZXRGYWxsYmFja0luc2VydFBhdGgoKSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGZpbGVOb2RlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGEgY29udGFpbmVyIGF0IHRoZSBnaXZlbiBsb2NhdGlvblxuICAgKiBAcGFyYW0gdHlwZSBvcHRpb25hbCwgdGhlIGNvbnRhaW5lciB0eXBlLCBvdGhlcndpc2Ugd2lsbCBpbnNlcnQgYSBzdGFuZGFyZCBjb250YWluZXJcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5zZXJ0Q29udGFpbmVyKHR5cGU/OiBzdHJpbmcpIHtcbiAgICAvLyBub3cgd2UgY2FuIG1ha2UgdGhlIGNvbnRhaW5lclxuICAgIGNvbnN0IGNvbnRhaW5lck5vZGU6IElDb250YWluZXIgPSB7XG4gICAgICB0eXBlOiBcImNvbnRhaW5lclwiLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYm9sZDogZmFsc2UsXG4gICAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gICAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGNvbnRhaW5lclR5cGU6IHR5cGUgfHwgbnVsbCxcbiAgICB9O1xuXG4gICAgLy8gYW5kIHdlIGNhbGwgdGhlIGluc2VydCBub2RlXG4gICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGNvbnRhaW5lck5vZGUsIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGNvbnRhaW5lck5vZGUpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSW5zZXJ0cyBhIGN1c3RvbSBlbGVtZW50XG4gICAqIEBwYXJhbSB0eXBlIHRoZSB0eXBlIGZvciB0aGUgY3VzdG9tIGVsZW1lbnRcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIGF0IHJhbmdlIHRvIGluc2VydCB0aGUgY3VzdG9tIGF0XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5zZXJ0Q3VzdG9tKHR5cGU6IHN0cmluZykge1xuICAgIC8vIG5vdyB3ZSBjYW4gbWFrZSB0aGUgY3VzdG9tXG4gICAgY29uc3QgY3VzdG9tTm9kZTogSUN1c3RvbSA9IHtcbiAgICAgIHR5cGU6IFwiY3VzdG9tXCIsXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBib2xkOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXRhbGljOiBmYWxzZSxcbiAgICAgICAgICAgICAgdW5kZXJsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0gYXMgYW55XG4gICAgICBdLFxuICAgICAgY3VzdG9tVHlwZTogdHlwZSxcbiAgICB9O1xuXG4gICAgLy8gYW5kIHdlIGNhbGwgdGhlIGluc2VydCBub2RlXG4gICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGN1c3RvbU5vZGUsIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGN1c3RvbU5vZGUpO1xuICAgIH1cblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIC8vIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNYWtlcyBhIHF1b3RlIG91dCBvZiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAqIEBwYXJhbSBhdCB0b2dnbGUgYXQgdGhlIGdpdmVuIHJhbmdlLCB0aGlzIHdpbGwgY2F1c2UgYSBmb2N1c1xuICAgKi9cbiAgcHVibGljIGFzeW5jIHRvZ2dsZVF1b3RlKCkge1xuICAgIC8vIG5vdyB3ZSBnb3QgdG8gY2hlY2sgaWYgd2UgYXJlIGNvbGxhcHNlZFxuICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gUmFuZ2UuaXNDb2xsYXBzZWQodGhpcy5lZGl0b3Iuc2VsZWN0aW9uKTtcblxuICAgIGlmIChpc0NvbGxhcHNlZCAmJiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCkge1xuICAgICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50LnR5cGUgPT09IFwicXVvdGVcIikge1xuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhcbiAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBcInF1b3RlXCIsXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIC8vIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNYWtlcyBhIHRpdGxlIG91dCBvZiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAqIEBwYXJhbSB0eXBlIHRoZSB0aXRsZSB0eXBlXG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZVxuICAgKi9cbiAgcHVibGljIGFzeW5jIHRvZ2dsZVRpdGxlKHR5cGU6IFwiaDFcIiB8IFwiaDJcIiB8IFwiaDNcIiB8IFwiaDRcIiB8IFwiaDVcIiB8IFwiaDZcIikge1xuICAgIC8vIG5vdyB3ZSBnb3QgdG8gY2hlY2sgaWYgd2UgYXJlIGNvbGxhcHNlZFxuICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gUmFuZ2UuaXNDb2xsYXBzZWQodGhpcy5lZGl0b3Iuc2VsZWN0aW9uKTtcblxuICAgIGlmIChpc0NvbGxhcHNlZCAmJiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCkge1xuICAgICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50LnR5cGUgPT09IFwidGl0bGVcIikge1xuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhcbiAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBcInRpdGxlXCIsXG4gICAgICAgICAgICB0aXRsZVR5cGU6IHR5cGUsXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIC8vIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNYWtlcyBhIGxpc3Qgb3V0IG9mIHRoZSBjdXJyZW50IGVsZW1lbnRcbiAgICogQHBhcmFtIHR5cGUgdGhlIHR5cGUgb2YgdGhlIGxpc3QgdGhhdCBpcyB0byBiZSB0b2dnbGVkLCBlaXRoZXIgYnVsbGV0ZWQgb3IgbnVtYmVyXG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZVxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluc2VydExpc3QodHlwZTogXCJidWxsZXRlZFwiIHwgXCJudW1iZXJlZFwiKSB7XG4gICAgLy8gbm93IHdlIGNhbiBtYWtlIHRoZSBsdXN0XG4gICAgY29uc3QgbGlzdE5vZGU6IElMaXN0ID0ge1xuICAgICAgdHlwZTogXCJsaXN0XCIsXG4gICAgICBsaXN0VHlwZTogdHlwZSxcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcImxpc3QtaXRlbVwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICBTVEFOREFSRF9QQVJBR1JBUEgoKSxcbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH07XG5cbiAgICAvLyBhbmQgd2UgY2FsbCB0aGUgaW5zZXJ0IG5vZGVcbiAgICBpZiAoIXRoaXMuZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgbGlzdE5vZGUsIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGxpc3ROb2RlKTtcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHVwZGF0ZUxpbmsodXJsOiBzdHJpbmcsIHR2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgLy8gb3RoZXJ3aXNlIGxldCdzIGZpbmQgd2hhdCB1cmwgd2UgYXJlIHVzaW5nXG4gICAgbGV0IHZhbGlkU3RhdGU6IGJvb2xlYW4gPSB0cnVlO1xuICAgIC8vIGlmIHRoZXJlIGFyZSBubyB0dmFsdWUncyBnaXZlblxuICAgIGlmICh1cmwpIHtcbiAgICAgIC8vIHdlIGF0dGVtcHQgdG8gcGFyc2UgaXRcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIGFuZCBzbyB3ZSBkbyBpbiBvcmRlciB0byBjaGVjayBsb2NhbGl0eVxuICAgICAgICBjb25zdCB1cmxQYXJzZWQgPSBuZXcgVVJMKHVybCk7XG4gICAgICAgIGNvbnN0IGlzTG9jYWwgPSB1cmxQYXJzZWQuaG9zdG5hbWUgPT09IGxvY2F0aW9uLmhvc3RuYW1lO1xuXG4gICAgICAgIC8vIG5vdyBhcyBmZWF0dXJlIHN1cHBvcnQgbWF5YmUgb25seSBsb2NhbCB1cmxzIGJlIGFsbG93ZWRcbiAgICAgICAgY29uc3Qgb25seUxvY2FsID0gIXRoaXMucHJvcHMuZmVhdHVyZXMuc3VwcG9ydHNFeHRlcm5hbExpbmtzO1xuICAgICAgICAvLyBpZiBpdCdzIHN1Y2ggdGhlIGNhc2UgYWRuIGl0J3Mgbm90IGEgbG9jYWwgdXJsXG4gICAgICAgIGlmIChvbmx5TG9jYWwgJiYgIWlzTG9jYWwpIHtcbiAgICAgICAgICAvLyB3ZSBoYXZlIGZhaWxlZFxuICAgICAgICAgIHZhbGlkU3RhdGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHZhbGlkU3RhdGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQgJiZcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudC50eXBlID09PSBcImxpbmtcIlxuICAgICkge1xuICAgICAgY29uc3QgbGluazogUGFydGlhbDxJTGluaz4gPSB7XG4gICAgICAgIGhyZWY6IHVybCxcbiAgICAgICAgdGhyZWY6IHR2YWx1ZSxcbiAgICAgIH1cbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIGxpbmssIHtcbiAgICAgICAgYXQ6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvcixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIC8vIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuXG4gICAgcmV0dXJuIHZhbGlkU3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogTWFrZXMgYSBsaW5rIG91dCBvZiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAqIEBwYXJhbSB1cmwgdGhlIHVybCB0aGF0IHdlIGFyZSB1c2luZyAobnVsbCBpZiB1c2luZyB0dmFsdWUpXG4gICAqIEBwYXJhbSB0dmFsdWUgdGhlIHRlbXBsYXRlIHZhbHVlIHRvIHVzZSAobnVsbCBpZiBwcm92aWRpbmcgdXJsKVxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcmFuZ2UgdG8gcGFzc1xuICAgKiBAcmV0dXJucyBhIGJvb2xlYW4gaWYgdGhlIGxpbmsgd2FzIHZhbGlkIGFuZCB0b2dnbGVMaW5rXG4gICAqL1xuICBwdWJsaWMgdG9nZ2xlTGluayh1cmw6IHN0cmluZywgdHZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBvdGhlcndpc2UgbGV0J3MgZmluZCB3aGF0IHVybCB3ZSBhcmUgdXNpbmdcbiAgICBsZXQgdmFsaWRTdGF0ZTogYm9vbGVhbiA9IHRydWU7XG4gICAgLy8gaWYgdGhlcmUgYXJlIG5vIHR2YWx1ZSdzIGdpdmVuXG4gICAgaWYgKHVybCkge1xuICAgICAgLy8gd2UgYXR0ZW1wdCB0byBwYXJzZSBpdFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gYW5kIHNvIHdlIGRvIGluIG9yZGVyIHRvIGNoZWNrIGxvY2FsaXR5XG4gICAgICAgIGNvbnN0IHVybFBhcnNlZCA9IG5ldyBVUkwodXJsKTtcbiAgICAgICAgY29uc3QgaXNMb2NhbCA9IHVybFBhcnNlZC5ob3N0bmFtZSA9PT0gbG9jYXRpb24uaG9zdG5hbWU7XG5cbiAgICAgICAgLy8gbm93IGFzIGZlYXR1cmUgc3VwcG9ydCBtYXliZSBvbmx5IGxvY2FsIHVybHMgYmUgYWxsb3dlZFxuICAgICAgICBjb25zdCBvbmx5TG9jYWwgPSAhdGhpcy5wcm9wcy5mZWF0dXJlcy5zdXBwb3J0c0V4dGVybmFsTGlua3M7XG4gICAgICAgIC8vIGlmIGl0J3Mgc3VjaCB0aGUgY2FzZSBhZG4gaXQncyBub3QgYSBsb2NhbCB1cmxcbiAgICAgICAgaWYgKG9ubHlMb2NhbCAmJiAhaXNMb2NhbCkge1xuICAgICAgICAgIC8vIHdlIGhhdmUgZmFpbGVkXG4gICAgICAgICAgdmFsaWRTdGF0ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgdmFsaWRTdGF0ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGxpbms6IElMaW5rID0ge1xuICAgICAgdHlwZTogXCJsaW5rXCIsXG4gICAgICBocmVmOiB1cmwsXG4gICAgICB0aHJlZjogdHZhbHVlLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgU1RBTkRBUkRfVEVYVF9OT0RFKHRoaXMucHJvcHMuYmFzZUkxOG4ubGluaylcbiAgICAgIF1cbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLmVkaXRvci5zZWxlY3Rpb24gJiZcbiAgICAgIFJhbmdlLmlzQ29sbGFwc2VkKHRoaXMuZWRpdG9yLnNlbGVjdGlvbilcbiAgICApIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50ICYmXG4gICAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudC50eXBlID09PSBcImxpbmtcIlxuICAgICAgKSB7XG4gICAgICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgICAgICBhdDogdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgbGluayk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIFRyYW5zZm9ybXMud3JhcE5vZGVzKHRoaXMuZWRpdG9yLCBsaW5rLCB7XG4gICAgICAgIG1hdGNoOiAodikgPT4gVGV4dC5pc1RleHQodiksXG4gICAgICAgIHNwbGl0OiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGxpbmssIHtcbiAgICAgICAgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICAvLyB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcblxuICAgIC8vIHdlIGhhdmUgc3VjY2VlZGVkXG4gICAgcmV0dXJuIHZhbGlkU3RhdGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFiaXRyYXJ5IHVwZGF0ZSwgZG9lcyBhbiBhcmJpdHJhcnkgdXBkYXRlIGZvciBhbiBlbGVtZW50IG9yIG5vZGVcbiAgICogYXQgdGhlIGdpdmVuIHBhdGhcbiAgICogQHBhcmFtIGFyZ3MgYW4gb2JqZWN0IHRvIHVwZGF0ZSB0aGF0IHNob3VsZCBiZSBwYXJ0aWFsIG9mIHRoZSBlbGVtZW50IHJpY2ggcHJvcGVydGllc1xuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBub2RlIGFuY2hvciB0byB1cGRhdGVcbiAgICovXG4gIHB1YmxpYyBzZXQoYXJnczogYW55LCBhbmNob3I6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCBhcmdzLCB7IGF0OiBhbmNob3IgfSk7XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICAvLyB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCBzdHlsZSBmb3IgdGhlIGVsZW1lbnRcbiAgICogQHBhcmFtIHN0eWxlIHRoZSBzdHlsZSB0byBiZSBzZXQsIHRoaXMgc2hvdWxkIGJlIGEgc3R5bGUgc3RyaW5nXG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGVsZW1lbnQgYW5jaG9yIHRvIHVwZGF0ZVxuICAgKi9cbiAgcHVibGljIHNldFN0eWxlKHN0eWxlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIHN0eWxlLFxuICAgIH0sIHsgYXQ6IGFuY2hvciB9KTtcblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIC8vIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0ZW1wbGF0ZSBob3ZlciBzdHlsZSBmb3IgdGhlIGVsZW1lbnRcbiAgICogQHBhcmFtIHN0eWxlIHRoZSBzdHlsZSB0byBiZSBzZXQsIHRoaXMgc2hvdWxkIGJlIGEgc3R5bGUgc3RyaW5nXG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGVsZW1lbnQgYW5jaG9yIHRvIHVwZGF0ZVxuICAgKi9cbiAgcHVibGljIHNldEhvdmVyU3R5bGUoc3R5bGU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgc3R5bGVIb3Zlcjogc3R5bGUsXG4gICAgfSwgeyBhdDogYW5jaG9yIH0pO1xuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgLy8gdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGFjdGl2ZSBzdHlsZSBmb3IgdGhlIGVsZW1lbnRcbiAgICogQHBhcmFtIHN0eWxlIHRoZSBzdHlsZSB0byBiZSBzZXQsIHRoaXMgc2hvdWxkIGJlIGEgc3R5bGUgc3RyaW5nXG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGVsZW1lbnQgYW5jaG9yIHRvIHVwZGF0ZVxuICAgKi9cbiAgcHVibGljIHNldEFjdGl2ZVN0eWxlKHN0eWxlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIHN0eWxlQWN0aXZlOiBzdHlsZSxcbiAgICB9LCB7IGF0OiBhbmNob3IgfSk7XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICAvLyB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgcmljaCBjbGFzc2VzIG9mIHRoZSBlbGVtZW50XG4gICAqIEBwYXJhbSBjbGFzc2VzIGFuIGFycmF5IG9mIHN0cmluZyB0aGF0IHJlcHJlc2VudCB0aGUgcmljaCBjbGFzc2VzXG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGVsZW1lbnQgYW5jaG9yXG4gICAqL1xuICBwdWJsaWMgc2V0UmljaENsYXNzZXMoY2xhc3Nlczogc3RyaW5nW10sIGFuY2hvcjogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIHJpY2hDbGFzc0xpc3Q6IGNsYXNzZXMsXG4gICAgfSwgeyBhdDogYW5jaG9yIH0pO1xuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgLy8gdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgYSBnaXZlbiBhY3Rpb24gZm9yIHVzYWdlIHdpdGhpbiB0ZW1wbGF0aW5nXG4gICAqIGFzIGFuIGV2ZW50IGxpc3RlbmVyXG4gICAqIFxuICAgKiBOb3RlIHRoYXQgdXNpbmcgdGhpcyBmdW5jdGlvbiBpcyByaXNreSBpZiB0aGUgc3RydWN0dXJlIHRvIHByb3ZpZGUgYSBnaXZlblxuICAgKiBrZXkgaXMgbm90IHVuZGVyc3Rvb2QgcHJvcGVybHksIGtleXMgc2hvdWxkIGJlIHZhbGlkXG4gICAqIFxuICAgKiBAcGFyYW0ga2V5IHRoZSBrZXkgZm9yIHRoZSBhY3Rpb24sIHNob3VsZCBiZSBzb21ldGhpbmcgbGlrZSwgY2xpY2ssIG1vdXNlZW50ZXIsIGV0Yy4uLlxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIGZvciB0aGUgcHJvcGVydHlcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgYW5jaG9yIGZvciB0aGUgZWxlbWVudCB0aGF0IGlzIHRvIGJlIGFzc2lnbmVkIHRoZSBsaXN0ZW5lciB0byB0dXJuIGludGVyYWN0aXZlXG4gICAqL1xuICBwdWJsaWMgc2V0QWN0aW9uKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICBba2V5XTogdmFsdWUsXG4gICAgfSwgeyBhdDogYW5jaG9yIH0pO1xuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgLy8gdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhbiBVSSBoYW5kbGVyIHRvIGEgZ2l2ZW4gZWxlbWVudCBzbyB0aGF0IGl0IGlzIHVpIGhhbmRsZWRcbiAgICogXG4gICAqIFRoaXMgaXMgYW4gYXZhbmNlZCBvcHRpb24gZm9yIHVpIGhhbmRsaW5nXG4gICAqIFxuICAgKiBub3JtYWxseSB5b3Ugd291bGQgdXNlIHRoaXMgZnVuY3Rpb24gZm9yIHVwZGF0aW5nIGFuIGFscmVhZHkgaW5zZXJ0ZWRcbiAgICogdWkgaGFuZGxlZCBjb21wb25lbnRcbiAgICogXG4gICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgZm9yIHRoZSB1aSBoYW5kbGVyIHRoYXQgc2hvdWxkIGJlIHRha2VuIG91dCBvZiB0aGUgY29udGV4dFxuICAgKiBAcGFyYW0gYXJncyB0aGUgYXJncyBmb3IgdGhlIHVpIGhhbmRsZXJcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgYW5jaG9yIHdoZXJlIHRvIGluc2VydCBhdFxuICAgKi9cbiAgcHVibGljIHNldFVJSGFuZGxlcih2YWx1ZTogc3RyaW5nLCBhcmdzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9LCBhbmNob3I6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICB1aUhhbmRsZXI6IHZhbHVlLFxuICAgICAgdWlIYW5kbGVyQXJnczogYXJncyxcbiAgICB9LCB7IGF0OiBhbmNob3IgfSk7XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICAvLyB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVpIGhhbmRsZXIgYXJncyB0byBhIGdpdmVuIGVsZW1lbnRcbiAgICogQHBhcmFtIGtleSB0aGUgdWkgaGFuZGxlciBhcmcga2V5XG4gICAqIEBwYXJhbSB2YWx1ZSB0aGUgdWkgaGFuZGxlciBhcmcgdmFsdWVcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgYW5jaG9yIGluIHF1ZXN0aW9uXG4gICAqL1xuICBwdWJsaWMgc2V0VUlIYW5kbGVyQXJnKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpIHtcbiAgICBjb25zdCBub2RlQXRQYXRoID0gTm9kZS5nZXQodGhpcy5lZGl0b3IsIGFuY2hvcik7XG4gICAgbGV0IG5ld1ZhbHVlOiBhbnkgPSB7XG4gICAgICAuLi4obm9kZUF0UGF0aCBhcyBhbnkgYXMgUmljaEVsZW1lbnQpLnVpSGFuZGxlckFyZ3MsXG4gICAgICBba2V5XTogdmFsdWUsXG4gICAgfTtcblxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZWxldGUgbmV3VmFsdWVba2V5XTtcbiAgICB9XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgdWlIYW5kbGVyQXJnczogbmV3VmFsdWUsXG4gICAgfSwgeyBhdDogYW5jaG9yIH0pO1xuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgLy8gdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0cyBhbiBlbGVtZW50IGF0IGEgZ2l2ZW4gcG9zaXRpb25cbiAgICogQHBhcmFtIGVsZW1lbnQgdGhlIGVsZW1lbnQgXG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCBwb3NpdGlvbiB0byBkbyBpdCBhdFxuICAgKi9cbiAgcHVibGljIGluc2VydEVsZW1lbnQoZWxlbWVudDogUmljaEVsZW1lbnQpIHtcbiAgICAvLyBhbmQgd2UgY2FsbCB0aGUgaW5zZXJ0IG5vZGVcbiAgICBpZiAoIXRoaXMuZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgZWxlbWVudCwgeyBhdDogdGhpcy5nZXRGYWxsYmFja0luc2VydFBhdGgoKSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGNvbnRleHQga2V5XG4gICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgZm9yIHRoZSBuZXcgY29udGV4dCBrZXlcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgYW5jaG9yIHdoZXJlIHRvIHNldCB0aGUgY29udGV4dCBrZXkgYXRcbiAgICovXG4gIHB1YmxpYyBzZXRDb250ZXh0KHZhbHVlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIGNvbnRleHQ6IHZhbHVlLFxuICAgIH0sIHsgYXQ6IGFuY2hvciB9KTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgY29udGV4dCBrZXlcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSBmb3IgdGhlIG5ldyBpZiBjb25kaXRpb24ga2V5XG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGFuY2hvciB3aGVyZSB0byBzZXQgdGhlIGNvbnRleHQga2V5IGF0XG4gICAqL1xuICBwdWJsaWMgc2V0SWZDb25kaXRpb24odmFsdWU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgaWZDb25kaXRpb246IHZhbHVlLFxuICAgIH0sIHsgYXQ6IGFuY2hvciB9KTtcbiAgfTtcblxuXG4gIC8qKlxuICAqIFNldHMgdGhlIGZvci1lYWNoIGxvb3Aga2V5XG4gICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSBmb3IgdGhlIG5ldyBjb250ZXh0IGtleVxuICAqIEBwYXJhbSBhbmNob3IgdGhlIGFuY2hvciB3aGVyZSB0byBzZXQgdGhlIGNvbnRleHQga2V5IGF0XG4gICovXG4gIHB1YmxpYyBzZXRGb3JFYWNoKHZhbHVlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIGZvckVhY2g6IHZhbHVlLFxuICAgIH0sIHsgYXQ6IGFuY2hvciB9KTtcbiAgfTtcblxuICAvKipcbiAgICogRm9ybWF0cyB0aGUgY3VycmVudCB0ZXh0IGFzIGJvbGRcbiAgICovXG4gIHB1YmxpYyBmb3JtYXRUb2dnbGUoa2V5OiBcImJvbGRcIiB8IFwiaXRhbGljXCIgfCBcInVuZGVybGluZVwiKSB7XG4gICAgLy8gaWYgd2UgaGF2ZSBhIHNlbGVjdGlvbiBhbmQgdGhlIHBvaW50cyBhcmUgZXF1YWxcbiAgICAvLyBiYXNpY2FsbHkgdGhlIHNhbWUgYXMgYSBjb2xsYXBzZWQgc2VsZWN0aW9uXG4gICAgaWYgKFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50VGV4dCAmJlxuICAgICAgdGhpcy5lZGl0b3Iuc2VsZWN0aW9uICYmXG4gICAgICBQb2ludC5lcXVhbHModGhpcy5lZGl0b3Iuc2VsZWN0aW9uLmFuY2hvciwgdGhpcy5lZGl0b3Iuc2VsZWN0aW9uLmZvY3VzKVxuICAgICkge1xuICAgICAgLy8gdGhlbiB3ZSBpbnNlcnQgYW4gZW1wdHkgdGV4dCBub2RlLCBpdCB3aWxsIHJlbWFpbiBhbGl2ZVxuICAgICAgLy8gYnkgdmlydHVlIG9mIGl0IGJlaW5nIHRoZSBzYW1lIGxvY2F0aW9uIGFzIG91ciBjdXJzb3Igc29cbiAgICAgIC8vIG5vcm1hbGl6YXRpb24gd29uJ3QgcmVtb3ZlIGl0XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKFxuICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAge1xuICAgICAgICAgIC4uLnRoaXMuc3RhdGUuY3VycmVudFRleHQsXG4gICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICBba2V5XTogIXRoaXMuc3RhdGUuY3VycmVudFRleHRba2V5XSxcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBqdXN0IHRvZ2dsZVxuICAgICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFRleHQpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhcbiAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICB7IFtrZXldOiAhdGhpcy5zdGF0ZS5jdXJyZW50VGV4dFtrZXldIH0sXG4gICAgICAgICAgeyBtYXRjaDogbiA9PiBUZXh0LmlzVGV4dChuKSwgc3BsaXQ6IHRydWUgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHQpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhcbiAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICB7IFtrZXldOiAhdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0W2tleV0gfSxcbiAgICAgICAgICB7IG1hdGNoOiBuID0+IFRleHQuaXNUZXh0KG4pLCBhdDogdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IsIG1vZGU6IFwiYWxsXCIgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIGEgaGVscGVyIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCBpbiBvcmRlciB0byBleHRyYWN0IHRoZSBhdmFpbGFibGVcbiAgICogY2xhc3NlcyB0aGF0IHdlIGhhdmUgZm9yIHVzYWdlIHdpdGhpbiByaWNoIGNsYXNzZXMsIGNvbnRhaW5lciwgYW5kIGN1c3RvbXNcbiAgICogY29uc2lkZXJpbmcgd2hhdCB3ZSBoYXZlIGZvdW5kIGluIHRoZSBhbGwgcHJvbWlzZSBmb3IgYWxsIHdoYXQgaXMgYXZhaWxhYmxlXG4gICAqIGJlY2F1c2UgdGhlcmUgbWlnaHQgYmUgZmlsdGVycyBmb3IgdGhlbSwgYW5kIHdlIG5lZWQgdG8gZmluZCB0aGUgbGFiZWxzIGFuZCB3aGF0bm90XG4gICAqIG9mIHdoYXQgd2UgY2FuIGFjdHVhbGx5IHVzZVxuICAgKiBcbiAgICogQHBhcmFtIGZlYXR1cmUgdGhlIGZlYXR1cmUgd2UgYXJlIHNlYXJjaGluZyBmb3IgYmFzaWNhbGx5LCBzdXBwb3J0c0N1c3RvbSwgc3VwcG9ydHNSaWNoQ2xhc3NlcyBhbmQgc3VwcG9ydHNDb250YWluZXJzXG4gICAqIHRoYXQgd2UgZGVjaWRlIG9uIHdoZXRoZXIgd2Ugc3VwcG9ydCB0aGF0IGZlYXR1cmVcbiAgICogQHBhcmFtIGZlYXR1cmVBbGwgdGhlIGFsbCBuYW1lIGZvciB0aGUgZmVhdHVyZSBpbiB0aGUgc3RhdGUgYW5kIHdoZXJlIGl0IGlzIGxvY2F0ZWQgaW4gdGhlIHN0YXRlIHRoYXQgd2UgYXJlIG1lYW50IHRvIGF3YWl0XG4gICAqIGJhc2ljYWxseSBhbGxDdXN0b21zLCBhbGxSaWNoQ2xhc3NlcyBhbmQgYWxsQ29udGFpbmVyc1xuICAgKiBAcGFyYW0gZmVhdHVyZUxpc3QgdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIHRoYXQgaXMgZ2l2ZW4gaW4gdGhlIGZlYXR1cmUgc3VwcG9ydCBvZiB0aGUgcHJvcGVydHkgc28gYmFzaWNhbGx5XG4gICAqIHN1cHBvcnRlZEN1c3RvbXMsIHN1cHBvcnRlZFJpY2hDbGFzc2VzIGFuZCBzdXBwb3J0ZWRDb250YWluZXJzXG4gICAqIEBwYXJhbSBpMThuTG9jYXRpb24gdGhlIGxvY2F0aW9uIGZvciB0aGUgaTE4biBkYXRhIGluIHRoZSBpMThuIHJvb3QsIGJhc2ljYWxseSBjdXN0b20sIGNvbnRhaW5lcnMgYW5kIHJpY2hcbiAgICovXG4gIHByaXZhdGUgYXZhaWxhYmxlRmlsdGVyaW5nRnVuY3Rpb24oXG4gICAgZmVhdHVyZTogc3RyaW5nLFxuICAgIGZlYXR1cmVBbGw6IHN0cmluZyxcbiAgICBmZWF0dXJlTGlzdDogc3RyaW5nLFxuICAgIGkxOG5Mb2NhdGlvbjogc3RyaW5nLFxuICApOiBJQXZhaWxhYmxlRWxlbWVudENTU0NsYXNzTmFtZVtdIHtcblxuICAgIC8vIHNvIHdlIGRvIGl0IGluIG9uZSBsaW5lIGJlY2F1c2UgYXBwYXJlbnRseSB3ZSBkb24ndCBjYXJlIGFib3V0IHJlYWRhYmlsaXR5XG4gICAgLy8gYW5kIHdpbGwgZml4IGl0IHdpdGggY29tbWVudHNcbiAgICByZXR1cm4gKFxuICAgICAgLy8gd2UgcGljayB0aGUgZmVhdHVyZSBvZiB0aGUgZWcuIHN1cHBvcnRzQ3VzdG9tLCBzdXBwb3J0c1JpY2hDbGFzc2VzIG91dCBvZiB0aGUgZmVhdHVyZSBzdXBwb3J0IHRvIHNlZVxuICAgICAgLy8gaWYgd2Ugc3VwcG9ydCB0aGF0IGZlYXR1cmUgYXQgYWxsXG4gICAgICB0aGlzLnByb3BzLmZlYXR1cmVzW2ZlYXR1cmVdID9cbiAgICAgICAgLy8gaWYgd2UgZG8gd2UgcGljayBmcm9tIHRoZSBzdGF0ZSB3aGF0IHdlIGhhdmUgZm91bmQgaW4gdGhlIHN0eWxlc2hlZXRcbiAgICAgICAgLy8gb2YgdGhlIGNsYXNzZXMgZm9yIHRoYXQgZmVhdHVyZSBhcyB3ZSBoYXZlIGF3YWl0ZWRcbiAgICAgICAgKHRoaXMuc3RhdGVbZmVhdHVyZUFsbF0gYXMgc3RyaW5nW10pLmZpbHRlcigoYykgPT5cbiAgICAgICAgICAvLyBhbmQgd2UgZmlsdGVyIGJhc2VkIG9uIG91ciBmZWF0dXJlIGxpc3QsIGlmIHdlIGhhdmUgb25lIG9mIGNvdXJzZSwgb3RoZXJ3aXNlIGFsbCBwYXNzXG4gICAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlc1tmZWF0dXJlTGlzdF0gPyB0aGlzLnByb3BzLmZlYXR1cmVzW2ZlYXR1cmVMaXN0XS5pbmNsdWRlcyhjKSA6IHRydWVcbiAgICAgICAgKSA6XG4gICAgICAgIFtdXG4gICAgKS5tYXAoKGMpID0+IHtcbiAgICAgIC8vIGFuZCBub3cgd2UgbWFwIGluIG9yZGVyIHRvIGdpdmUgaXQgYSBsYWJlbCBiYXNlZCBvbiB0aGUgcm9vdCBpMThuIGRhdGFcbiAgICAgIC8vIGFzIHdlIGhhdmUgZGVzY3JpYmVkIGJlZm9yZSwgYW5kIHRoZXkgYXJlIGZvdW5kIGluIHRoZSBpMThuIGxvY2F0aW9uIHRoYXRcbiAgICAgIC8vIHRoZXkgaGF2ZSBiZWVuIGRlZmluZWQgYnkgZGVmYXVsdCBieSB0aGlzIHRleHQgZWRpdG9yIGVsZW1lbnRcbiAgICAgIC8vIGFuZCB3ZSBzZWFyY2ggaW50byB0aGUgaTE4biByb290XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogYyxcbiAgICAgICAgbGFiZWw6IChcbiAgICAgICAgICB0aGlzLnByb3BzLmJhc2VJMThuICYmXG4gICAgICAgICAgdGhpcy5wcm9wcy5iYXNlSTE4bltpMThuTG9jYXRpb25dICYmXG4gICAgICAgICAgKFxuICAgICAgICAgICAgLy8gYm90aCB0aGUgZGVmYXVsdCBhbmQgYnkgcmVwbGFjaW5nXG4gICAgICAgICAgICB0aGlzLnByb3BzLmJhc2VJMThuW2kxOG5Mb2NhdGlvbl1bY10gfHxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYmFzZUkxOG5baTE4bkxvY2F0aW9uXVtjLnJlcGxhY2UoLy0vZywgXCJfXCIpXVxuICAgICAgICAgIClcbiAgICAgICAgKSB8fCBjXG4gICAgICAgIC8vIGFuZCBpZiB3ZSBmaW5kIG5vdGhpbmcgd2UgdXNlIHRoZSB2YWx1ZSBpdHNlbGZcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgb24gdGhlIGtleWRvd24gb2YgdGhlIHNsYXRlIGVkaXRvciBpdHNlbGZcbiAgICogQHBhcmFtIGUgdGhlIGV2ZW50XG4gICAqL1xuICBwdWJsaWMgb25LZXlEb3duKGU6IFJlYWN0LktleWJvYXJkRXZlbnQpIHtcbiAgICAvLyBvbiBhbHQrZW50ZXIgd2Ugd2FudCB0byBpbnNlcnQgYSBzdXBlciBibG9jayBicmVha1xuICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiICYmIGUuYWx0S2V5KSB7XG4gICAgICB0aGlzLmluc2VydFN1cGVyYnJlYWsobnVsbCwgZS5zaGlmdEtleSk7XG4gICAgfSBlbHNlIGlmIChlLmtleSA9PT0gXCJ6XCIgJiYgZS5jdHJsS2V5ICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICB0aGlzLmVkaXRvci51bmRvKCk7XG4gICAgfSBlbHNlIGlmICgoZS5rZXkgPT09IFwieVwiICYmIGUuY3RybEtleSkgfHwgKGUua2V5ID09PSBcInpcIiAmJiBlLmN0cmxLZXkgJiYgZS5zaGlmdEtleSkpIHtcbiAgICAgIHRoaXMuZWRpdG9yLnJlZG8oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQmFzaWMgb2xkIHNjaG9vbCBjb21wb25lbnQgZGlkIG1vdW50XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLy8gbm93IHdlIGNhbiBhd2FpdCBmb3Igb3VyIGFsbCBwcm9taXNlIGhlcmVcbiAgICBhd2FpdCBBTExfUFJPTUlTRTtcbiAgICAvLyBhbmQgZml0IHRoZSBpbmZvcm1hdGlvbiB0aGVyZSBhcyB3ZSBoYXZlIGdvdHRlblxuICAgIC8vIG91ciBhcnJheXMgZmlsbGVkIGZyb20gdGhlIHN0eWxlc2hlZXRcbiAgICBpZiAoIXRoaXMuaXNVbm1vdW50ZWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBhbGxDb250YWluZXJzOiBBTExfQ09OVEFJTkVSUyxcbiAgICAgICAgYWxsVGFibGVzOiBBTExfVEFCTEVTLFxuICAgICAgICBhbGxDdXN0b206IEFMTF9DVVNUT00sXG4gICAgICAgIGFsbFJpY2hDbGFzc2VzOiBBTExfUklDSF9DTEFTU0VTLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuYXV0b0ZvY3VzKSB7XG4gICAgICBSZWFjdEVkaXRvci5mb2N1cyh0aGlzLmVkaXRvcik7XG4gICAgICAvLyBidWcgc29tZXRpbWVzIGl0IHdpbGwgbm90IGZvY3VzXG4gICAgICAvLyBGb2N1cyBnb2QgZGFtbiBpdFxuICAgICAgdGhpcy5mb3JjZUZvY3VzKCk7XG4gICAgfVxuXG4gICAgY29uc3QgZWRpdGFibGVIVE1MRWxlbWVudCA9IHRoaXMuZWRpdGFibGVSZWYuY3VycmVudC5jaGlsZE5vZGVzWzBdIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgIEVESVRPUl9QT09MLnNldChlZGl0YWJsZUhUTUxFbGVtZW50LCB0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBSZWFkb25seTxJU2xhdGVFZGl0b3JQcm9wcz4sIHByZXZTdGF0ZTogUmVhZG9ubHk8SVNsYXRlRWRpdG9yU3RhdGU+LCBzbmFwc2hvdD86IGFueSk6IHZvaWQge1xuICAgIC8vIGlmIG91ciBwcmV2IHNlbGVjdGVkIHRleHQgaXMgZW1wdHlcbiAgICBpZiAocHJldlN0YXRlLmN1cnJlbnRUZXh0ICYmIHByZXZTdGF0ZS5jdXJyZW50VGV4dC50ZXh0ID09PSBcIlwiKSB7XG4gICAgICAvLyBsZXQncyBmaW5kIHdoZXJlIGl0IGlzIG5vd1xuICAgICAgY29uc3QgYW5jaG9ySW5DdXJyZW50ID0gUmVhY3RFZGl0b3IuZmluZFBhdGgodGhpcy5lZGl0b3IsIHByZXZTdGF0ZS5jdXJyZW50VGV4dCk7XG4gICAgICBpZiAoYW5jaG9ySW5DdXJyZW50KSB7XG4gICAgICAgIC8vIGxldCdzIGZpbmQgd2hhdCBpdCBpcyBub3dcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBlbGVtZW50SW5DdXJyZW50ID0gTm9kZS5nZXQodGhpcy5lZGl0b3IsIGFuY2hvckluQ3VycmVudCkgYXMgSVRleHQ7XG4gICAgICAgICAgLy8gaWYgaXQncyBzdGlsbCBlbXB0eSBhbmQgd2UgYXJlIG5vdCBvdmVyIGl0LCB0aGVuIHdlIG1heSB3YW50IHRvIGRlbGV0ZSBpdFxuICAgICAgICAgIGlmIChlbGVtZW50SW5DdXJyZW50LnRleHQgPT09IFwiXCIgJiYgZWxlbWVudEluQ3VycmVudCAhPT0gdGhpcy5zdGF0ZS5jdXJyZW50VGV4dCkge1xuICAgICAgICAgICAgLy8gbm93IHdlIG5lZWQgdG8ga25vdyBpZiBpdCdzIGFuIGlubGluZSBzcGFjZXIsIHZvaWQsIGV0Yy4uLlxuICAgICAgICAgICAgLy8gc28gd2UganVzdCBjYWxsIG5vcm1hbGl6YXRpb25cbiAgICAgICAgICAgIHRoaXMubm9ybWFsaXplTm9kZShbdGhpcy5lZGl0b3IsIFtdXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAvLyBub2RlIGlzIG1pc3NpbmcgYW5kIHNsYXRlIHNvbWVob3cgcmVwb3J0cyBpdCBhdCBzdGlsbCBiZWluZyB0aGVyZVxuICAgICAgICAgIC8vIGNhdXNlcyBhbiBlcnJvciwgbm90aGlnbiB0byBkbywgdGhlIG5vZGUgaGFzIGJlZW4gZGVsZXRlZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldFN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNvbWV0aW1lcyBzbGF0ZSBsZWF2ZXMgYSBzZWxlY3Rpb24gYmVoaW5kIHdlIG5lZWQgdG8gdW5zZWxlY3QgaWYgc3VjaFxuICAgKiBpcyB0aGUgY2FzZVxuICAgKi9cbiAgcHVibGljIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIC8vIHdlIG5lZWQgdG8gc2V0IHRoaXMgdG8gcHJldmVudCB0aGUgc2V0IHZhbHVlXG4gICAgLy8gZnJvbSBiZWluZyBjYWxsZWQgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudFxuICAgIHRoaXMuaXNVbm1vdW50ZWQgPSB0cnVlO1xuICAgIFJlYWN0RWRpdG9yLmRlc2VsZWN0KHRoaXMuZWRpdG9yKTtcblxuICAgIGNvbnN0IGVkaXRhYmxlSFRNTEVsZW1lbnQgPSB0aGlzLmVkaXRhYmxlUmVmLmN1cnJlbnQuY2hpbGROb2Rlc1swXSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICBFRElUT1JfUE9PTC5kZWxldGUoZWRpdGFibGVIVE1MRWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZXMgdGhlIGhlbHBlcnMgdGhhdCBhcmUgdXNlZCBieSB0aGUgZWRpdG9yXG4gICAqIHRvIGNvbnN0cnVjdCByaWNoIHRleHQgZGF0YVxuICAgKi9cbiAgcHVibGljIGdldEhlbHBlcnMoKSB7XG4gICAgY29uc3QgaGVscGVyczogSUhlbHBlckZ1bmN0aW9ucyA9IHtcbiAgICAgIGVkaXRvcjogdGhpcy5lZGl0b3IsXG4gICAgICBUcmFuc2Zvcm1zLFxuICAgICAgUmFuZ2UsXG4gICAgICBSZWFjdEVkaXRvcixcbiAgICAgIEhpc3RvcnlFZGl0b3IsXG4gICAgICBOb2RlLFxuICAgICAgUGF0aCxcblxuICAgICAgZ2V0Q29udGV4dEZvcjogdGhpcy5nZXRDb250ZXh0Rm9yLFxuICAgICAgZ2V0Um9vdENvbnRleHQ6IHRoaXMuZ2V0Um9vdENvbnRleHQsXG4gICAgICBnZXRTdGF0ZTogdGhpcy5nZXRTdGF0ZSxcblxuICAgICAgc2VsZWN0UGF0aDogdGhpcy5zZWxlY3RQYXRoLFxuICAgICAgZGVsZXRlUGF0aDogdGhpcy5kZWxldGVQYXRoLFxuICAgICAgbW92ZVBhdGhzOiB0aGlzLm1vdmVQYXRocyxcblxuICAgICAgZGVsZXRlU2VsZWN0ZWROb2RlOiB0aGlzLmRlbGV0ZVNlbGVjdGVkTm9kZSxcblxuICAgICAgZ2V0UHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3I6IHRoaXMuZ2V0UHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgICBnZXRQcmV2aW91c1RleHRBbmNob3I6IHRoaXMuZ2V0UHJldmlvdXNUZXh0QW5jaG9yLFxuXG4gICAgICBmb2N1czogdGhpcy5mb2N1cyxcbiAgICAgIGZvY3VzQXQ6IHRoaXMuZm9jdXNBdCxcblxuICAgICAgaW5zZXJ0U3VwZXJicmVhazogdGhpcy5pbnNlcnRTdXBlcmJyZWFrLFxuXG4gICAgICBmb3JtYXRUb2dnbGU6IHRoaXMuZm9ybWF0VG9nZ2xlLFxuICAgICAgaW5zZXJ0Q29udGFpbmVyOiB0aGlzLmluc2VydENvbnRhaW5lcixcbiAgICAgIGluc2VydEN1c3RvbTogdGhpcy5pbnNlcnRDdXN0b20sXG4gICAgICBpbnNlcnRGaWxlOiB0aGlzLmluc2VydEZpbGUsXG4gICAgICBpbnNlcnRJbWFnZTogdGhpcy5pbnNlcnRJbWFnZSxcbiAgICAgIGluc2VydFZpZGVvOiB0aGlzLmluc2VydFZpZGVvLFxuICAgICAgdXBkYXRlVmlkZW86IHRoaXMudXBkYXRlVmlkZW8sXG4gICAgICBpbnNlcnRUZW1wbGF0ZVRleHQ6IHRoaXMuaW5zZXJ0VGVtcGxhdGVUZXh0LFxuICAgICAgdXBkYXRlVGVtcGxhdGVUZXh0OiB0aGlzLnVwZGF0ZVRlbXBsYXRlVGV4dCxcbiAgICAgIGluc2VydFRlbXBsYXRlSFRNTDogdGhpcy5pbnNlcnRUZW1wbGF0ZUhUTUwsXG4gICAgICB1cGRhdGVUZW1wbGF0ZUhUTUw6IHRoaXMudXBkYXRlVGVtcGxhdGVIVE1MLFxuICAgICAgaW5zZXJ0VGFibGU6IHRoaXMuaW5zZXJ0VGFibGUsXG4gICAgICBpbnNlcnRUYWJsZUNvbHVtbjogdGhpcy5pbnNlcnRUYWJsZUNvbHVtbixcbiAgICAgIGluc2VydFRhYmxlUm93OiB0aGlzLmluc2VydFRhYmxlUm93LFxuICAgICAgdG9nZ2xlVGFibGU6IHRoaXMudG9nZ2xlVGFibGUsXG4gICAgICBjYW5Ub2dnbGVUYWJsZTogdGhpcy5jYW5Ub2dnbGVUYWJsZSxcbiAgICAgIHRvZ2dsZUxpbms6IHRoaXMudG9nZ2xlTGluayxcbiAgICAgIHVwZGF0ZUxpbms6IHRoaXMudXBkYXRlTGluayxcbiAgICAgIGluc2VydExpc3Q6IHRoaXMuaW5zZXJ0TGlzdCxcbiAgICAgIHRvZ2dsZVF1b3RlOiB0aGlzLnRvZ2dsZVF1b3RlLFxuICAgICAgdG9nZ2xlVGl0bGU6IHRoaXMudG9nZ2xlVGl0bGUsXG4gICAgICBzZXRBY3RpdmVTdHlsZTogdGhpcy5zZXRBY3RpdmVTdHlsZSxcbiAgICAgIHNldENvbnRleHQ6IHRoaXMuc2V0Q29udGV4dCxcbiAgICAgIHNldElmQ29uZGl0aW9uOiB0aGlzLnNldElmQ29uZGl0aW9uLFxuICAgICAgc2V0Rm9yRWFjaDogdGhpcy5zZXRGb3JFYWNoLFxuICAgICAgc2V0SG92ZXJTdHlsZTogdGhpcy5zZXRIb3ZlclN0eWxlLFxuICAgICAgc2V0U3R5bGU6IHRoaXMuc2V0U3R5bGUsXG4gICAgICBzZXQ6IHRoaXMuc2V0LFxuICAgICAgc2V0UmljaENsYXNzZXM6IHRoaXMuc2V0UmljaENsYXNzZXMsXG4gICAgICBzZXRBY3Rpb246IHRoaXMuc2V0QWN0aW9uLFxuICAgICAgc2V0VUlIYW5kbGVyOiB0aGlzLnNldFVJSGFuZGxlcixcbiAgICAgIHNldFVJSGFuZGxlckFyZzogdGhpcy5zZXRVSUhhbmRsZXJBcmcsXG4gICAgICBpbnNlcnRFbGVtZW50OiB0aGlzLmluc2VydEVsZW1lbnQsXG4gICAgICBkZWxldGVUYWJsZUNvbHVtbjogdGhpcy5kZWxldGVUYWJsZUNvbHVtbixcbiAgICAgIGRlbGV0ZVRhYmxlUm93OiB0aGlzLmRlbGV0ZVRhYmxlUm93LFxuXG4gICAgICBoYXJkQmx1cjogdGhpcy5oYXJkQmx1cixcbiAgICAgIHNvZnRCbHVyOiB0aGlzLnNvZnRCbHVyLFxuICAgIH1cblxuICAgIHJldHVybiBoZWxwZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIHRoZSBmZWF0dXJlIHN1cHBvcnQgaW5mb3JtYXRpb24gdGhhdCBpcyB1c2VkIGJ5IHRoZSBlZGl0b3JcbiAgICogdG8ga25vdyB3aGF0IGl0IGNhbiBhbmQgY2FuJ3QgZG9cbiAgICovXG4gIHB1YmxpYyBnZXRGZWF0dXJlU3VwcG9ydCgpIHtcbiAgICAvLyBIYXBwZW5zIGZvciBwbGFpbnRleHQgd2hpY2ggaGFzIG5vIGZlYXR1cmVzXG4gICAgLy8gc2luY2UgaXQgZG9lc24ndCBzdXBwb3J0IGFueVxuICAgIGlmICh0aGlzLnByb3BzLmZlYXR1cmVzID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyB3ZSBnZXQgdGhlc2UgZnJvbSB0aGUgYXZhaWxhYmxlIGZpbHRlcmluZyBmdW5jdGlvbnNcbiAgICBjb25zdCBhdmFpbGFibGVDdXN0b21zID0gdGhpcy5hdmFpbGFibGVGaWx0ZXJpbmdGdW5jdGlvbihcInN1cHBvcnRzQ3VzdG9tXCIsIFwiYWxsQ3VzdG9tXCIsIFwic3VwcG9ydGVkQ3VzdG9tc1wiLCBcInJpY2hDdXN0b21zXCIpO1xuICAgIGNvbnN0IGF2YWlsYWJsZVJpY2hDbGFzc2VzID0gdGhpcy5hdmFpbGFibGVGaWx0ZXJpbmdGdW5jdGlvbihcInN1cHBvcnRzUmljaENsYXNzZXNcIiwgXCJhbGxSaWNoQ2xhc3Nlc1wiLCBcInN1cHBvcnRlZFJpY2hDbGFzc2VzXCIsIFwicmljaENsYXNzZXNcIik7XG4gICAgY29uc3QgYXZhaWxhYmxlQ29udGFpbmVycyA9IHRoaXMuYXZhaWxhYmxlRmlsdGVyaW5nRnVuY3Rpb24oXCJzdXBwb3J0c0NvbnRhaW5lcnNcIiwgXCJhbGxDb250YWluZXJzXCIsIFwic3VwcG9ydGVkQ29udGFpbmVyc1wiLCBcInJpY2hDb250YWluZXJzXCIpO1xuICAgIGNvbnN0IGF2YWlsYWJsZVRhYmxlcyA9IHRoaXMuYXZhaWxhYmxlRmlsdGVyaW5nRnVuY3Rpb24oXCJzdXBwb3J0c1RhYmxlc1wiLCBcImFsbFRhYmxlc1wiLCBcInN1cHBvcnRlZFRhYmxlc1wiLCBcInJpY2hUYWJsZXNcIik7XG5cbiAgICAvLyBhbmQgZXh0ZW5kIGJhc2VkIG9uIHRoZSBmZWF0dXJlc1xuICAgIGNvbnN0IG5ld0ZlYXR1cmVTdXBwb3J0OiBJQWNjZXNzaWJsZUZlYXR1cmVTdXBwb3J0T3B0aW9ucyA9IHtcbiAgICAgIC4uLnRoaXMucHJvcHMuZmVhdHVyZXMsXG5cbiAgICAgIGF2YWlsYWJsZUNvbnRhaW5lcnMsXG4gICAgICBhdmFpbGFibGVDdXN0b21zLFxuICAgICAgYXZhaWxhYmxlUmljaENsYXNzZXMsXG4gICAgICBhdmFpbGFibGVUYWJsZXMsXG4gICAgfTtcblxuICAgIHJldHVybiBuZXdGZWF0dXJlU3VwcG9ydDtcbiAgfVxuXG4gIHB1YmxpYyBmb3JjZUZvY3VzKCkge1xuICAgIC8vIHdpdGggdGhpcyBjb25kaXRpb24gd2UgYXZvaWQgaXQgYXBwbHlpbmcgd2l0aCBjaGlsZHJlblxuICAgIC8vIHRoYXQgYXJlIG5lc3RlZCwgc3VjaCBhcyBpbnRlcm5hbCB0ZXh0YXJlYXNcbiAgICAvLyBpZiAoXG4gICAgLy8gICAvLyFwcmV2ZW50TmV4dEZvY3VzICYmXG4gICAgLy8gICBlLnRhcmdldCAmJlxuICAgIC8vICAgKGUudGFyZ2V0IGFzIEhUTUxEaXZFbGVtZW50KS5kYXRhc2V0ICYmXG4gICAgLy8gICAoZS50YXJnZXQgYXMgSFRNTERpdkVsZW1lbnQpLmRhdGFzZXQuc2xhdGVFZGl0b3IgPT09IFwidHJ1ZVwiXG4gICAgLy8gKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmZvY3VzZWQpIHtcbiAgICAgIGNvbnN0IHBhdGg6IFBhdGggPSBbXTtcbiAgICAgIGxldCBjdXJyZW50OiBhbnkgPSB0aGlzLmVkaXRvci5jaGlsZHJlbiAmJiB0aGlzLmVkaXRvci5jaGlsZHJlblswXTtcbiAgICAgIHdoaWxlIChjdXJyZW50KSB7XG4gICAgICAgIHBhdGgucHVzaCgwKTtcbiAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuY2hpbGRyZW4gJiYgY3VycmVudC5jaGlsZHJlblswXTtcbiAgICAgIH1cbiAgICAgIC8vIGJ1ZyBpbiBzbGF0ZSBzb21ldGltZXMgaXQganVzdCByZWplY3RzIHRvIGZvY3VzXG4gICAgICAvLyB3aGVuIHVzaW5nIHRhYiwgc3BlY2lmaWNhbGx5IHNoaWZ0K3RhYlxuICAgICAgLy8gbmFoIGl0IGRvZXMgaXQgYWxzbyB3aXRoIHRhYiBzb21ldGltZXNcbiAgICAgIHRoaXMuZm9jdXNBdCh7XG4gICAgICAgIGFuY2hvcjoge1xuICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICBwYXRoLFxuICAgICAgICB9LFxuICAgICAgICBmb2N1czoge1xuICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICBwYXRoLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIE1vcmUgYnVncyBpbiBzbGF0ZSBzdGlsbCBtYXkgcmVqZWN0IHRvIGZvY3VzIGJlY2F1c2Ugc2xhdGVcbiAgICAgIC8vIGNhbiBiZSB2ZXJ5IGJ1Z2d5XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmZvY3VzZWQpIHtcbiAgICAgICAgICB0aGlzLm9uRm9jdXNlZENoYW5nZShwYXRoLCB0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gICAgICAgIH1cbiAgICAgIH0sIDIwKTtcbiAgICB9XG4gICAgLy8gfVxuICB9XG5cbiAgcHVibGljIGZvcmNlQmx1cigpIHtcbiAgICAvLyBidWcgaW4gc2xhdGUgc29tZXRpbWVzIGl0IHdpbGwgbm90IGJsdXIgYW5kIGp1c3QgcmVqZWN0cyB0byBibHVyXG4gICAgLy8gd2hlbiBhbm90aGVyIGVsZW1lbnQgaGFzIGJlZW4gYmx1cnJlZFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuc3RhdGUuZm9jdXNlZCkge1xuICAgICAgICB0aGlzLm9uQmx1cnJlZENoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gICAgICB9XG4gICAgfSwgMjApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciBmdW5jdGlvblxuICAgKi9cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICAvLyBtYWtlIHRoZSBlZGl0YWJsZVxuICAgIGxldCBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlID0gKFxuICAgICAgPEN1cnJlbnRFbGVtZW50UHJvdmlkZXJcbiAgICAgICAgYmxvY2s9e3RoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50fVxuICAgICAgICBzdXBlcmJsb2Nrcz17dGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgfHwgW119XG4gICAgICAgIGlubGluZT17dGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50fVxuICAgICAgPlxuICAgICAgICA8ZGl2IHJlZj17dGhpcy5lZGl0YWJsZVJlZn0gc3R5bGU9e3sgZGlzcGxheTogXCJjb250ZW50c1wiIH19IGRhdGEtc2xhdGUtYnVnPVwidHJ1ZVwiPlxuICAgICAgICAgIDxFZGl0YWJsZVxuICAgICAgICAgICAgaWQ9e3RoaXMucHJvcHMuaWR9XG4gICAgICAgICAgICBsYW5nPXt0aGlzLnByb3BzLmxhbmd9XG4gICAgICAgICAgICBvbktleURvd249e3RoaXMub25LZXlEb3dufVxuICAgICAgICAgICAgcmVuZGVyRWxlbWVudD17dGhpcy5yZW5kZXJFbGVtZW50fVxuICAgICAgICAgICAgcmVuZGVyTGVhZj17dGhpcy5yZW5kZXJUZXh0fVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICByZWFkT25seT17dGhpcy5wcm9wcy5kaXNhYmxlZH1cbiAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnByb3BzLmRpc2FibGVkfVxuICAgICAgICAgICAgc3R5bGU9e3sgc2Nyb2xsTWFyZ2luVG9wOiB0aGlzLnByb3BzLnNjcm9sbE1hcmdpblRvcCB9fVxuICAgICAgICAgICAgLy8gb25Gb2N1cz17dGhpcy5mb3JjZUZvY3VzfVxuICAgICAgICAgICAgb25CbHVyPXt0aGlzLmZvcmNlQmx1cn1cbiAgICAgICAgICAgIC8vIG9uQ2xpY2s9e3ByZXZlbnRGb2N1c31cbiAgICAgICAgICAgIGFyaWEtaW52YWxpZD17IXRoaXMucHJvcHMuY3VycmVudFZhbGlkfVxuICAgICAgICAgICAgYXJpYS1lcnJvcm1lc3NhZ2U9e3RoaXMucHJvcHMuY3VycmVudFZhbGlkID8gbnVsbCA6IHRoaXMucHJvcHMuY3VycmVudEdlbmVyYWxFcnJvckVsZW1lbnRJZH1cbiAgICAgICAgICAgIGFyaWEtZGVzY3JpYmVkYnk9e3RoaXMucHJvcHMuY3VycmVudERlc2NyaWJlZEJ5fVxuICAgICAgICAgICAgYXJpYS1wbGFjZWhvbGRlcj17dGhpcy5wcm9wcy5wbGFjZWhvbGRlcn1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvQ3VycmVudEVsZW1lbnRQcm92aWRlcj5cbiAgICApO1xuXG4gICAgLy8gYW5kIHBpY2sgb24gdGhlIHdyYXBwZXIsIGhvcGVmdWxseSB3ZSBoYXZlIG9uZVxuICAgIC8vIGl0J2QgYmUgd2VpcmQgbm90IHRvIGhhdmUgb25lXG4gICAgY29uc3QgV3JhcHBlciA9IHRoaXMucHJvcHMuV3JhcHBlcjtcblxuICAgIC8vIGlmIHdlIGhhdmUgYSB3cmFwcGVyXG4gICAgaWYgKFdyYXBwZXIpIHtcbiAgICAgIC8vIGFuZCB3ZSBmZWVkIHRoZSB0aGluZyBpbiB0aGUgd3JhcHBlciBhcyB0aGUgbmV3IGNoaWxkcmVuXG4gICAgICAvLyB0aGF0IGlzIG5vdyB3cmFwcGVyIGluc2lkZSB0aGUgd3JhcHBlclxuICAgICAgY2hpbGRyZW4gPSAoXG4gICAgICAgIDxXcmFwcGVyXG4gICAgICAgICAgey4uLnRoaXMucHJvcHMud3JhcHBlckFyZ3N9XG4gICAgICAgICAgZGlzYWJsZWQ9e3RoaXMucHJvcHMuZGlzYWJsZWR9XG4gICAgICAgICAgc3RhdGU9e3RoaXMuc3RhdGV9XG4gICAgICAgICAgaGVscGVycz17dGhpcy5nZXRIZWxwZXJzKCl9XG4gICAgICAgICAgZmVhdHVyZVN1cHBvcnQ9e3RoaXMuZ2V0RmVhdHVyZVN1cHBvcnQoKX1cbiAgICAgICAgICBjdXJyZW50TG9hZEVycm9yPXt0aGlzLnByb3BzLmN1cnJlbnRMb2FkRXJyb3J9XG4gICAgICAgICAgZGlzbWlzc0N1cnJlbnRMb2FkRXJyb3I9e3RoaXMucHJvcHMuZGlzbWlzc0N1cnJlbnRMb2FkRXJyb3J9XG4gICAgICAgICAgcmVmPXt0aGlzLndyYXBwZXJSZWZ9XG4gICAgICAgICAgYmFzZUkxOG49e3RoaXMucHJvcHMuYmFzZUkxOG59XG4gICAgICAgID5cbiAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDwvV3JhcHBlcj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gd3JhcHBpbmcgYmFzZWQgb24gdGhlIHJvb3QgY29udGV4dFxuICAgIGlmICh0aGlzLnByb3BzLnJvb3RDb250ZXh0ICYmIHRoaXMucHJvcHMucm9vdENvbnRleHQuZWRpdG9yQXJncyAmJiB0aGlzLnByb3BzLnJvb3RDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcikge1xuICAgICAgY2hpbGRyZW4gPSB0aGlzLnByb3BzLnJvb3RDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcihjaGlsZHJlbik7XG4gICAgfVxuXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2lhbnN0b3JtdGF5bG9yL3NsYXRlL3B1bGwvNDU0MFxuICAgIGlmICh0aGlzLnN0YXRlLnRyZWVWYWx1ZS5jaGlsZHJlbiAhPT0gdGhpcy5lZGl0b3IuY2hpbGRyZW4pIHtcbiAgICAgIHRoaXMuZWRpdG9yLmNoaWxkcmVuID0gdGhpcy5zdGF0ZS50cmVlVmFsdWUuY2hpbGRyZW47XG4gICAgfVxuXG4gICAgLy8gbm93IHdlIGNhbiByZXR1cm5cbiAgICByZXR1cm4gKFxuICAgICAgPFNsYXRlXG4gICAgICAgIGVkaXRvcj17dGhpcy5lZGl0b3J9XG4gICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnRyZWVWYWx1ZS5jaGlsZHJlbn1cbiAgICAgICAgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2V9XG4gICAgICA+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvU2xhdGU+XG4gICAgKTtcbiAgfVxufVxuIiwgIi8qIVxuICogaXMtcGxhaW4tb2JqZWN0IDxodHRwczovL2dpdGh1Yi5jb20vam9uc2NobGlua2VydC9pcy1wbGFpbi1vYmplY3Q+XG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTcsIEpvbiBTY2hsaW5rZXJ0LlxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmZ1bmN0aW9uIGlzT2JqZWN0KG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG59XG5cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qobykge1xuICB2YXIgY3Rvcixwcm90O1xuXG4gIGlmIChpc09iamVjdChvKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiBoYXMgbW9kaWZpZWQgY29uc3RydWN0b3JcbiAgY3RvciA9IG8uY29uc3RydWN0b3I7XG4gIGlmIChjdG9yID09PSB1bmRlZmluZWQpIHJldHVybiB0cnVlO1xuXG4gIC8vIElmIGhhcyBtb2RpZmllZCBwcm90b3R5cGVcbiAgcHJvdCA9IGN0b3IucHJvdG90eXBlO1xuICBpZiAoaXNPYmplY3QocHJvdCkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG5cbiAgLy8gSWYgY29uc3RydWN0b3IgZG9lcyBub3QgaGF2ZSBhbiBPYmplY3Qtc3BlY2lmaWMgbWV0aG9kXG4gIGlmIChwcm90Lmhhc093blByb3BlcnR5KCdpc1Byb3RvdHlwZU9mJykgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gTW9zdCBsaWtlbHkgYSBwbGFpbiBPYmplY3RcbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCB7IGlzUGxhaW5PYmplY3QgfTtcbiIsICIvLyBTaG91bGQgYmUgbm8gaW1wb3J0cyBoZXJlIVxuXG4vKipcbiAqIFRoZSBzZW50aW5lbCB2YWx1ZSByZXR1cm5lZCBieSBwcm9kdWNlcnMgdG8gcmVwbGFjZSB0aGUgZHJhZnQgd2l0aCB1bmRlZmluZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBOT1RISU5HOiB1bmlxdWUgc3ltYm9sID0gU3ltYm9sLmZvcihcImltbWVyLW5vdGhpbmdcIilcblxuLyoqXG4gKiBUbyBsZXQgSW1tZXIgdHJlYXQgeW91ciBjbGFzcyBpbnN0YW5jZXMgYXMgcGxhaW4gaW1tdXRhYmxlIG9iamVjdHNcbiAqIChhbGJlaXQgd2l0aCBhIGN1c3RvbSBwcm90b3R5cGUpLCB5b3UgbXVzdCBkZWZpbmUgZWl0aGVyIGFuIGluc3RhbmNlIHByb3BlcnR5XG4gKiBvciBhIHN0YXRpYyBwcm9wZXJ0eSBvbiBlYWNoIG9mIHlvdXIgY3VzdG9tIGNsYXNzZXMuXG4gKlxuICogT3RoZXJ3aXNlLCB5b3VyIGNsYXNzIGluc3RhbmNlIHdpbGwgbmV2ZXIgYmUgZHJhZnRlZCwgd2hpY2ggbWVhbnMgaXQgd29uJ3QgYmVcbiAqIHNhZmUgdG8gbXV0YXRlIGluIGEgcHJvZHVjZSBjYWxsYmFjay5cbiAqL1xuZXhwb3J0IGNvbnN0IERSQUZUQUJMRTogdW5pcXVlIHN5bWJvbCA9IFN5bWJvbC5mb3IoXCJpbW1lci1kcmFmdGFibGVcIilcblxuZXhwb3J0IGNvbnN0IERSQUZUX1NUQVRFOiB1bmlxdWUgc3ltYm9sID0gU3ltYm9sLmZvcihcImltbWVyLXN0YXRlXCIpXG4iLCAiZXhwb3J0IGNvbnN0IGVycm9ycyA9XG5cdHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIlxuXHRcdD8gW1xuXHRcdFx0XHQvLyBBbGwgZXJyb3IgY29kZXMsIHN0YXJ0aW5nIGJ5IDA6XG5cdFx0XHRcdGZ1bmN0aW9uKHBsdWdpbjogc3RyaW5nKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGBUaGUgcGx1Z2luIGZvciAnJHtwbHVnaW59JyBoYXMgbm90IGJlZW4gbG9hZGVkIGludG8gSW1tZXIuIFRvIGVuYWJsZSB0aGUgcGx1Z2luLCBpbXBvcnQgYW5kIGNhbGwgXFxgZW5hYmxlJHtwbHVnaW59KClcXGAgd2hlbiBpbml0aWFsaXppbmcgeW91ciBhcHBsaWNhdGlvbi5gXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uKHRoaW5nOiBzdHJpbmcpIHtcblx0XHRcdFx0XHRyZXR1cm4gYHByb2R1Y2UgY2FuIG9ubHkgYmUgY2FsbGVkIG9uIHRoaW5ncyB0aGF0IGFyZSBkcmFmdGFibGU6IHBsYWluIG9iamVjdHMsIGFycmF5cywgTWFwLCBTZXQgb3IgY2xhc3NlcyB0aGF0IGFyZSBtYXJrZWQgd2l0aCAnW2ltbWVyYWJsZV06IHRydWUnLiBHb3QgJyR7dGhpbmd9J2Bcblx0XHRcdFx0fSxcblx0XHRcdFx0XCJUaGlzIG9iamVjdCBoYXMgYmVlbiBmcm96ZW4gYW5kIHNob3VsZCBub3QgYmUgbXV0YXRlZFwiLFxuXHRcdFx0XHRmdW5jdGlvbihkYXRhOiBhbnkpIHtcblx0XHRcdFx0XHRyZXR1cm4gKFxuXHRcdFx0XHRcdFx0XCJDYW5ub3QgdXNlIGEgcHJveHkgdGhhdCBoYXMgYmVlbiByZXZva2VkLiBEaWQgeW91IHBhc3MgYW4gb2JqZWN0IGZyb20gaW5zaWRlIGFuIGltbWVyIGZ1bmN0aW9uIHRvIGFuIGFzeW5jIHByb2Nlc3M/IFwiICtcblx0XHRcdFx0XHRcdGRhdGFcblx0XHRcdFx0XHQpXG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwiQW4gaW1tZXIgcHJvZHVjZXIgcmV0dXJuZWQgYSBuZXcgdmFsdWUgKmFuZCogbW9kaWZpZWQgaXRzIGRyYWZ0LiBFaXRoZXIgcmV0dXJuIGEgbmV3IHZhbHVlICpvciogbW9kaWZ5IHRoZSBkcmFmdC5cIixcblx0XHRcdFx0XCJJbW1lciBmb3JiaWRzIGNpcmN1bGFyIHJlZmVyZW5jZXNcIixcblx0XHRcdFx0XCJUaGUgZmlyc3Qgb3Igc2Vjb25kIGFyZ3VtZW50IHRvIGBwcm9kdWNlYCBtdXN0IGJlIGEgZnVuY3Rpb25cIixcblx0XHRcdFx0XCJUaGUgdGhpcmQgYXJndW1lbnQgdG8gYHByb2R1Y2VgIG11c3QgYmUgYSBmdW5jdGlvbiBvciB1bmRlZmluZWRcIixcblx0XHRcdFx0XCJGaXJzdCBhcmd1bWVudCB0byBgY3JlYXRlRHJhZnRgIG11c3QgYmUgYSBwbGFpbiBvYmplY3QsIGFuIGFycmF5LCBvciBhbiBpbW1lcmFibGUgb2JqZWN0XCIsXG5cdFx0XHRcdFwiRmlyc3QgYXJndW1lbnQgdG8gYGZpbmlzaERyYWZ0YCBtdXN0IGJlIGEgZHJhZnQgcmV0dXJuZWQgYnkgYGNyZWF0ZURyYWZ0YFwiLFxuXHRcdFx0XHRmdW5jdGlvbih0aGluZzogc3RyaW5nKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGAnY3VycmVudCcgZXhwZWN0cyBhIGRyYWZ0LCBnb3Q6ICR7dGhpbmd9YFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcIk9iamVjdC5kZWZpbmVQcm9wZXJ0eSgpIGNhbm5vdCBiZSB1c2VkIG9uIGFuIEltbWVyIGRyYWZ0XCIsXG5cdFx0XHRcdFwiT2JqZWN0LnNldFByb3RvdHlwZU9mKCkgY2Fubm90IGJlIHVzZWQgb24gYW4gSW1tZXIgZHJhZnRcIixcblx0XHRcdFx0XCJJbW1lciBvbmx5IHN1cHBvcnRzIGRlbGV0aW5nIGFycmF5IGluZGljZXNcIixcblx0XHRcdFx0XCJJbW1lciBvbmx5IHN1cHBvcnRzIHNldHRpbmcgYXJyYXkgaW5kaWNlcyBhbmQgdGhlICdsZW5ndGgnIHByb3BlcnR5XCIsXG5cdFx0XHRcdGZ1bmN0aW9uKHRoaW5nOiBzdHJpbmcpIHtcblx0XHRcdFx0XHRyZXR1cm4gYCdvcmlnaW5hbCcgZXhwZWN0cyBhIGRyYWZ0LCBnb3Q6ICR7dGhpbmd9YFxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIE5vdGU6IGlmIG1vcmUgZXJyb3JzIGFyZSBhZGRlZCwgdGhlIGVycm9yT2Zmc2V0IGluIFBhdGNoZXMudHMgc2hvdWxkIGJlIGluY3JlYXNlZFxuXHRcdFx0XHQvLyBTZWUgUGF0Y2hlcy50cyBmb3IgYWRkaXRpb25hbCBlcnJvcnNcblx0XHQgIF1cblx0XHQ6IFtdXG5cbmV4cG9ydCBmdW5jdGlvbiBkaWUoZXJyb3I6IG51bWJlciwgLi4uYXJnczogYW55W10pOiBuZXZlciB7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcblx0XHRjb25zdCBlID0gZXJyb3JzW2Vycm9yXVxuXHRcdGNvbnN0IG1zZyA9IHR5cGVvZiBlID09PSBcImZ1bmN0aW9uXCIgPyBlLmFwcGx5KG51bGwsIGFyZ3MgYXMgYW55KSA6IGVcblx0XHR0aHJvdyBuZXcgRXJyb3IoYFtJbW1lcl0gJHttc2d9YClcblx0fVxuXHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0YFtJbW1lcl0gbWluaWZpZWQgZXJyb3IgbnI6ICR7ZXJyb3J9LiBGdWxsIGVycm9yIGF0OiBodHRwczovL2JpdC5seS8zY1hFS1dmYFxuXHQpXG59XG4iLCAiaW1wb3J0IHtcblx0RFJBRlRfU1RBVEUsXG5cdERSQUZUQUJMRSxcblx0T2JqZWN0aXNoLFxuXHREcmFmdGVkLFxuXHRBbnlPYmplY3QsXG5cdEFueU1hcCxcblx0QW55U2V0LFxuXHRJbW1lclN0YXRlLFxuXHRBcmNoVHlwZSxcblx0ZGllXG59IGZyb20gXCIuLi9pbnRlcm5hbFwiXG5cbmV4cG9ydCBjb25zdCBnZXRQcm90b3R5cGVPZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZlxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhbiBJbW1lciBkcmFmdCAqL1xuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRHJhZnQodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gISF2YWx1ZSAmJiAhIXZhbHVlW0RSQUZUX1NUQVRFXVxufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiB2YWx1ZSBjYW4gYmUgZHJhZnRlZCBieSBJbW1lciAqL1xuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRHJhZnRhYmxlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcblx0aWYgKCF2YWx1ZSkgcmV0dXJuIGZhbHNlXG5cdHJldHVybiAoXG5cdFx0aXNQbGFpbk9iamVjdCh2YWx1ZSkgfHxcblx0XHRBcnJheS5pc0FycmF5KHZhbHVlKSB8fFxuXHRcdCEhdmFsdWVbRFJBRlRBQkxFXSB8fFxuXHRcdCEhdmFsdWUuY29uc3RydWN0b3I/LltEUkFGVEFCTEVdIHx8XG5cdFx0aXNNYXAodmFsdWUpIHx8XG5cdFx0aXNTZXQodmFsdWUpXG5cdClcbn1cblxuY29uc3Qgb2JqZWN0Q3RvclN0cmluZyA9IE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IudG9TdHJpbmcoKVxuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuXHRpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIGZhbHNlXG5cdGNvbnN0IHByb3RvID0gZ2V0UHJvdG90eXBlT2YodmFsdWUpXG5cdGlmIChwcm90byA9PT0gbnVsbCkge1xuXHRcdHJldHVybiB0cnVlXG5cdH1cblx0Y29uc3QgQ3RvciA9XG5cdFx0T2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwocHJvdG8sIFwiY29uc3RydWN0b3JcIikgJiYgcHJvdG8uY29uc3RydWN0b3JcblxuXHRpZiAoQ3RvciA9PT0gT2JqZWN0KSByZXR1cm4gdHJ1ZVxuXG5cdHJldHVybiAoXG5cdFx0dHlwZW9mIEN0b3IgPT0gXCJmdW5jdGlvblwiICYmXG5cdFx0RnVuY3Rpb24udG9TdHJpbmcuY2FsbChDdG9yKSA9PT0gb2JqZWN0Q3RvclN0cmluZ1xuXHQpXG59XG5cbi8qKiBHZXQgdGhlIHVuZGVybHlpbmcgb2JqZWN0IHRoYXQgaXMgcmVwcmVzZW50ZWQgYnkgdGhlIGdpdmVuIGRyYWZ0ICovXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gb3JpZ2luYWw8VD4odmFsdWU6IFQpOiBUIHwgdW5kZWZpbmVkXG5leHBvcnQgZnVuY3Rpb24gb3JpZ2luYWwodmFsdWU6IERyYWZ0ZWQ8YW55Pik6IGFueSB7XG5cdGlmICghaXNEcmFmdCh2YWx1ZSkpIGRpZSgxNSwgdmFsdWUpXG5cdHJldHVybiB2YWx1ZVtEUkFGVF9TVEFURV0uYmFzZV9cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVhY2g8VCBleHRlbmRzIE9iamVjdGlzaD4oXG5cdG9iajogVCxcblx0aXRlcjogKGtleTogc3RyaW5nIHwgbnVtYmVyLCB2YWx1ZTogYW55LCBzb3VyY2U6IFQpID0+IHZvaWQsXG5cdGVudW1lcmFibGVPbmx5PzogYm9vbGVhblxuKTogdm9pZFxuZXhwb3J0IGZ1bmN0aW9uIGVhY2gob2JqOiBhbnksIGl0ZXI6IGFueSkge1xuXHRpZiAoZ2V0QXJjaHR5cGUob2JqKSA9PT0gQXJjaFR5cGUuT2JqZWN0KSB7XG5cdFx0T2JqZWN0LmVudHJpZXMob2JqKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcblx0XHRcdGl0ZXIoa2V5LCB2YWx1ZSwgb2JqKVxuXHRcdH0pXG5cdH0gZWxzZSB7XG5cdFx0b2JqLmZvckVhY2goKGVudHJ5OiBhbnksIGluZGV4OiBhbnkpID0+IGl0ZXIoaW5kZXgsIGVudHJ5LCBvYmopKVxuXHR9XG59XG5cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmNodHlwZSh0aGluZzogYW55KTogQXJjaFR5cGUge1xuXHRjb25zdCBzdGF0ZTogdW5kZWZpbmVkIHwgSW1tZXJTdGF0ZSA9IHRoaW5nW0RSQUZUX1NUQVRFXVxuXHRyZXR1cm4gc3RhdGVcblx0XHQ/IHN0YXRlLnR5cGVfXG5cdFx0OiBBcnJheS5pc0FycmF5KHRoaW5nKVxuXHRcdD8gQXJjaFR5cGUuQXJyYXlcblx0XHQ6IGlzTWFwKHRoaW5nKVxuXHRcdD8gQXJjaFR5cGUuTWFwXG5cdFx0OiBpc1NldCh0aGluZylcblx0XHQ/IEFyY2hUeXBlLlNldFxuXHRcdDogQXJjaFR5cGUuT2JqZWN0XG59XG5cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXModGhpbmc6IGFueSwgcHJvcDogUHJvcGVydHlLZXkpOiBib29sZWFuIHtcblx0cmV0dXJuIGdldEFyY2h0eXBlKHRoaW5nKSA9PT0gQXJjaFR5cGUuTWFwXG5cdFx0PyB0aGluZy5oYXMocHJvcClcblx0XHQ6IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGluZywgcHJvcClcbn1cblxuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIGdldCh0aGluZzogQW55TWFwIHwgQW55T2JqZWN0LCBwcm9wOiBQcm9wZXJ0eUtleSk6IGFueSB7XG5cdC8vIEB0cy1pZ25vcmVcblx0cmV0dXJuIGdldEFyY2h0eXBlKHRoaW5nKSA9PT0gQXJjaFR5cGUuTWFwID8gdGhpbmcuZ2V0KHByb3ApIDogdGhpbmdbcHJvcF1cbn1cblxuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIHNldCh0aGluZzogYW55LCBwcm9wT3JPbGRWYWx1ZTogUHJvcGVydHlLZXksIHZhbHVlOiBhbnkpIHtcblx0Y29uc3QgdCA9IGdldEFyY2h0eXBlKHRoaW5nKVxuXHRpZiAodCA9PT0gQXJjaFR5cGUuTWFwKSB0aGluZy5zZXQocHJvcE9yT2xkVmFsdWUsIHZhbHVlKVxuXHRlbHNlIGlmICh0ID09PSBBcmNoVHlwZS5TZXQpIHtcblx0XHR0aGluZy5hZGQodmFsdWUpXG5cdH0gZWxzZSB0aGluZ1twcm9wT3JPbGRWYWx1ZV0gPSB2YWx1ZVxufVxuXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gaXMoeDogYW55LCB5OiBhbnkpOiBib29sZWFuIHtcblx0Ly8gRnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2ZianMvYmxvYi9jNjk5MDRhNTExYjkwMDI2NjkzNTE2ODIyMzA2M2RkODc3MmRmYzQwL3BhY2thZ2VzL2ZianMvc3JjL2NvcmUvc2hhbGxvd0VxdWFsLmpzXG5cdGlmICh4ID09PSB5KSB7XG5cdFx0cmV0dXJuIHggIT09IDAgfHwgMSAvIHggPT09IDEgLyB5XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHggIT09IHggJiYgeSAhPT0geVxuXHR9XG59XG5cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBpc01hcCh0YXJnZXQ6IGFueSk6IHRhcmdldCBpcyBBbnlNYXAge1xuXHRyZXR1cm4gdGFyZ2V0IGluc3RhbmNlb2YgTWFwXG59XG5cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NldCh0YXJnZXQ6IGFueSk6IHRhcmdldCBpcyBBbnlTZXQge1xuXHRyZXR1cm4gdGFyZ2V0IGluc3RhbmNlb2YgU2V0XG59XG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gbGF0ZXN0KHN0YXRlOiBJbW1lclN0YXRlKTogYW55IHtcblx0cmV0dXJuIHN0YXRlLmNvcHlfIHx8IHN0YXRlLmJhc2VfXG59XG5cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBzaGFsbG93Q29weShiYXNlOiBhbnksIHN0cmljdDogYm9vbGVhbikge1xuXHRpZiAoaXNNYXAoYmFzZSkpIHtcblx0XHRyZXR1cm4gbmV3IE1hcChiYXNlKVxuXHR9XG5cdGlmIChpc1NldChiYXNlKSkge1xuXHRcdHJldHVybiBuZXcgU2V0KGJhc2UpXG5cdH1cblx0aWYgKEFycmF5LmlzQXJyYXkoYmFzZSkpIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChiYXNlKVxuXG5cdGlmICghc3RyaWN0ICYmIGlzUGxhaW5PYmplY3QoYmFzZSkpIHtcblx0XHRpZiAoIWdldFByb3RvdHlwZU9mKGJhc2UpKSB7XG5cdFx0XHRjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cdFx0XHRyZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIGJhc2UpXG5cdFx0fVxuXHRcdHJldHVybiB7Li4uYmFzZX1cblx0fVxuXG5cdGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoYmFzZSlcblx0ZGVsZXRlIGRlc2NyaXB0b3JzW0RSQUZUX1NUQVRFIGFzIGFueV1cblx0bGV0IGtleXMgPSBSZWZsZWN0Lm93bktleXMoZGVzY3JpcHRvcnMpXG5cdGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuXHRcdGNvbnN0IGtleTogYW55ID0ga2V5c1tpXVxuXHRcdGNvbnN0IGRlc2MgPSBkZXNjcmlwdG9yc1trZXldXG5cdFx0aWYgKGRlc2Mud3JpdGFibGUgPT09IGZhbHNlKSB7XG5cdFx0XHRkZXNjLndyaXRhYmxlID0gdHJ1ZVxuXHRcdFx0ZGVzYy5jb25maWd1cmFibGUgPSB0cnVlXG5cdFx0fVxuXHRcdC8vIGxpa2Ugb2JqZWN0LmFzc2lnbiwgd2Ugd2lsbCByZWFkIGFueSBfb3duXywgZ2V0L3NldCBhY2Nlc3NvcnMuIFRoaXMgaGVscHMgaW4gZGVhbGluZ1xuXHRcdC8vIHdpdGggbGlicmFyaWVzIHRoYXQgdHJhcCB2YWx1ZXMsIGxpa2UgbW9ieCBvciB2dWVcblx0XHQvLyB1bmxpa2Ugb2JqZWN0LmFzc2lnbiwgbm9uLWVudW1lcmFibGVzIHdpbGwgYmUgY29waWVkIGFzIHdlbGxcblx0XHRpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpXG5cdFx0XHRkZXNjcmlwdG9yc1trZXldID0ge1xuXHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0XHRcdHdyaXRhYmxlOiB0cnVlLCAvLyBjb3VsZCBsaXZlIHdpdGggISFkZXNjLnNldCBhcyB3ZWxsIGhlcmUuLi5cblx0XHRcdFx0ZW51bWVyYWJsZTogZGVzYy5lbnVtZXJhYmxlLFxuXHRcdFx0XHR2YWx1ZTogYmFzZVtrZXldXG5cdFx0XHR9XG5cdH1cblx0cmV0dXJuIE9iamVjdC5jcmVhdGUoZ2V0UHJvdG90eXBlT2YoYmFzZSksIGRlc2NyaXB0b3JzKVxufVxuXG4vKipcbiAqIEZyZWV6ZXMgZHJhZnRhYmxlIG9iamVjdHMuIFJldHVybnMgdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAqIEJ5IGRlZmF1bHQgZnJlZXplcyBzaGFsbG93bHksIGJ1dCBpZiB0aGUgc2Vjb25kIGFyZ3VtZW50IGlzIGB0cnVlYCBpdCB3aWxsIGZyZWV6ZSByZWN1cnNpdmVseS5cbiAqXG4gKiBAcGFyYW0gb2JqXG4gKiBAcGFyYW0gZGVlcFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJlZXplPFQ+KG9iajogVCwgZGVlcD86IGJvb2xlYW4pOiBUXG5leHBvcnQgZnVuY3Rpb24gZnJlZXplPFQ+KG9iajogYW55LCBkZWVwOiBib29sZWFuID0gZmFsc2UpOiBUIHtcblx0aWYgKGlzRnJvemVuKG9iaikgfHwgaXNEcmFmdChvYmopIHx8ICFpc0RyYWZ0YWJsZShvYmopKSByZXR1cm4gb2JqXG5cdGlmIChnZXRBcmNodHlwZShvYmopID4gMSAvKiBNYXAgb3IgU2V0ICovKSB7XG5cdFx0b2JqLnNldCA9IG9iai5hZGQgPSBvYmouY2xlYXIgPSBvYmouZGVsZXRlID0gZG9udE11dGF0ZUZyb3plbkNvbGxlY3Rpb25zIGFzIGFueVxuXHR9XG5cdE9iamVjdC5mcmVlemUob2JqKVxuXHRpZiAoZGVlcCkgZWFjaChvYmosIChfa2V5LCB2YWx1ZSkgPT4gZnJlZXplKHZhbHVlLCB0cnVlKSwgdHJ1ZSlcblx0cmV0dXJuIG9ialxufVxuXG5mdW5jdGlvbiBkb250TXV0YXRlRnJvemVuQ29sbGVjdGlvbnMoKSB7XG5cdGRpZSgyKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGcm96ZW4ob2JqOiBhbnkpOiBib29sZWFuIHtcblx0cmV0dXJuIE9iamVjdC5pc0Zyb3plbihvYmopXG59XG4iLCAiaW1wb3J0IHtcblx0SW1tZXJTdGF0ZSxcblx0UGF0Y2gsXG5cdERyYWZ0ZWQsXG5cdEltbWVyQmFzZVN0YXRlLFxuXHRBbnlNYXAsXG5cdEFueVNldCxcblx0QXJjaFR5cGUsXG5cdGRpZVxufSBmcm9tIFwiLi4vaW50ZXJuYWxcIlxuXG4vKiogUGx1Z2luIHV0aWxpdGllcyAqL1xuY29uc3QgcGx1Z2luczoge1xuXHRQYXRjaGVzPzoge1xuXHRcdGdlbmVyYXRlUGF0Y2hlc18oXG5cdFx0XHRzdGF0ZTogSW1tZXJTdGF0ZSxcblx0XHRcdGJhc2VQYXRoOiBQYXRjaFBhdGgsXG5cdFx0XHRwYXRjaGVzOiBQYXRjaFtdLFxuXHRcdFx0aW52ZXJzZVBhdGNoZXM6IFBhdGNoW11cblx0XHQpOiB2b2lkXG5cdFx0Z2VuZXJhdGVSZXBsYWNlbWVudFBhdGNoZXNfKFxuXHRcdFx0YmFzZTogYW55LFxuXHRcdFx0cmVwbGFjZW1lbnQ6IGFueSxcblx0XHRcdHBhdGNoZXM6IFBhdGNoW10sXG5cdFx0XHRpbnZlcnNlUGF0Y2hlczogUGF0Y2hbXVxuXHRcdCk6IHZvaWRcblx0XHRhcHBseVBhdGNoZXNfPFQ+KGRyYWZ0OiBULCBwYXRjaGVzOiBQYXRjaFtdKTogVFxuXHR9XG5cdE1hcFNldD86IHtcblx0XHRwcm94eU1hcF88VCBleHRlbmRzIEFueU1hcD4odGFyZ2V0OiBULCBwYXJlbnQ/OiBJbW1lclN0YXRlKTogVFxuXHRcdHByb3h5U2V0XzxUIGV4dGVuZHMgQW55U2V0Pih0YXJnZXQ6IFQsIHBhcmVudD86IEltbWVyU3RhdGUpOiBUXG5cdH1cbn0gPSB7fVxuXG50eXBlIFBsdWdpbnMgPSB0eXBlb2YgcGx1Z2luc1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGx1Z2luPEsgZXh0ZW5kcyBrZXlvZiBQbHVnaW5zPihcblx0cGx1Z2luS2V5OiBLXG4pOiBFeGNsdWRlPFBsdWdpbnNbS10sIHVuZGVmaW5lZD4ge1xuXHRjb25zdCBwbHVnaW4gPSBwbHVnaW5zW3BsdWdpbktleV1cblx0aWYgKCFwbHVnaW4pIHtcblx0XHRkaWUoMCwgcGx1Z2luS2V5KVxuXHR9XG5cdC8vIEB0cy1pZ25vcmVcblx0cmV0dXJuIHBsdWdpblxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZFBsdWdpbjxLIGV4dGVuZHMga2V5b2YgUGx1Z2lucz4oXG5cdHBsdWdpbktleTogSyxcblx0aW1wbGVtZW50YXRpb246IFBsdWdpbnNbS11cbik6IHZvaWQge1xuXHRpZiAoIXBsdWdpbnNbcGx1Z2luS2V5XSkgcGx1Z2luc1twbHVnaW5LZXldID0gaW1wbGVtZW50YXRpb25cbn1cbi8qKiBNYXAgLyBTZXQgcGx1Z2luICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFwU3RhdGUgZXh0ZW5kcyBJbW1lckJhc2VTdGF0ZSB7XG5cdHR5cGVfOiBBcmNoVHlwZS5NYXBcblx0Y29weV86IEFueU1hcCB8IHVuZGVmaW5lZFxuXHRhc3NpZ25lZF86IE1hcDxhbnksIGJvb2xlYW4+IHwgdW5kZWZpbmVkXG5cdGJhc2VfOiBBbnlNYXBcblx0cmV2b2tlZF86IGJvb2xlYW5cblx0ZHJhZnRfOiBEcmFmdGVkPEFueU1hcCwgTWFwU3RhdGU+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2V0U3RhdGUgZXh0ZW5kcyBJbW1lckJhc2VTdGF0ZSB7XG5cdHR5cGVfOiBBcmNoVHlwZS5TZXRcblx0Y29weV86IEFueVNldCB8IHVuZGVmaW5lZFxuXHRiYXNlXzogQW55U2V0XG5cdGRyYWZ0c186IE1hcDxhbnksIERyYWZ0ZWQ+IC8vIG1hcHMgdGhlIG9yaWdpbmFsIHZhbHVlIHRvIHRoZSBkcmFmdCB2YWx1ZSBpbiB0aGUgbmV3IHNldFxuXHRyZXZva2VkXzogYm9vbGVhblxuXHRkcmFmdF86IERyYWZ0ZWQ8QW55U2V0LCBTZXRTdGF0ZT5cbn1cblxuLyoqIFBhdGNoZXMgcGx1Z2luICovXG5cbmV4cG9ydCB0eXBlIFBhdGNoUGF0aCA9IChzdHJpbmcgfCBudW1iZXIpW11cbiIsICJpbXBvcnQge1xuXHRQYXRjaCxcblx0UGF0Y2hMaXN0ZW5lcixcblx0RHJhZnRlZCxcblx0SW1tZXIsXG5cdERSQUZUX1NUQVRFLFxuXHRJbW1lclN0YXRlLFxuXHRBcmNoVHlwZSxcblx0Z2V0UGx1Z2luXG59IGZyb20gXCIuLi9pbnRlcm5hbFwiXG5cbi8qKiBFYWNoIHNjb3BlIHJlcHJlc2VudHMgYSBgcHJvZHVjZWAgY2FsbC4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBJbW1lclNjb3BlIHtcblx0cGF0Y2hlc18/OiBQYXRjaFtdXG5cdGludmVyc2VQYXRjaGVzXz86IFBhdGNoW11cblx0Y2FuQXV0b0ZyZWV6ZV86IGJvb2xlYW5cblx0ZHJhZnRzXzogYW55W11cblx0cGFyZW50Xz86IEltbWVyU2NvcGVcblx0cGF0Y2hMaXN0ZW5lcl8/OiBQYXRjaExpc3RlbmVyXG5cdGltbWVyXzogSW1tZXJcblx0dW5maW5hbGl6ZWREcmFmdHNfOiBudW1iZXJcbn1cblxubGV0IGN1cnJlbnRTY29wZTogSW1tZXJTY29wZSB8IHVuZGVmaW5lZFxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFNjb3BlKCkge1xuXHRyZXR1cm4gY3VycmVudFNjb3BlIVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTY29wZShcblx0cGFyZW50XzogSW1tZXJTY29wZSB8IHVuZGVmaW5lZCxcblx0aW1tZXJfOiBJbW1lclxuKTogSW1tZXJTY29wZSB7XG5cdHJldHVybiB7XG5cdFx0ZHJhZnRzXzogW10sXG5cdFx0cGFyZW50Xyxcblx0XHRpbW1lcl8sXG5cdFx0Ly8gV2hlbmV2ZXIgdGhlIG1vZGlmaWVkIGRyYWZ0IGNvbnRhaW5zIGEgZHJhZnQgZnJvbSBhbm90aGVyIHNjb3BlLCB3ZVxuXHRcdC8vIG5lZWQgdG8gcHJldmVudCBhdXRvLWZyZWV6aW5nIHNvIHRoZSB1bm93bmVkIGRyYWZ0IGNhbiBiZSBmaW5hbGl6ZWQuXG5cdFx0Y2FuQXV0b0ZyZWV6ZV86IHRydWUsXG5cdFx0dW5maW5hbGl6ZWREcmFmdHNfOiAwXG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVBhdGNoZXNJblNjb3BlKFxuXHRzY29wZTogSW1tZXJTY29wZSxcblx0cGF0Y2hMaXN0ZW5lcj86IFBhdGNoTGlzdGVuZXJcbikge1xuXHRpZiAocGF0Y2hMaXN0ZW5lcikge1xuXHRcdGdldFBsdWdpbihcIlBhdGNoZXNcIikgLy8gYXNzZXJ0IHdlIGhhdmUgdGhlIHBsdWdpblxuXHRcdHNjb3BlLnBhdGNoZXNfID0gW11cblx0XHRzY29wZS5pbnZlcnNlUGF0Y2hlc18gPSBbXVxuXHRcdHNjb3BlLnBhdGNoTGlzdGVuZXJfID0gcGF0Y2hMaXN0ZW5lclxuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXZva2VTY29wZShzY29wZTogSW1tZXJTY29wZSkge1xuXHRsZWF2ZVNjb3BlKHNjb3BlKVxuXHRzY29wZS5kcmFmdHNfLmZvckVhY2gocmV2b2tlRHJhZnQpXG5cdC8vIEB0cy1pZ25vcmVcblx0c2NvcGUuZHJhZnRzXyA9IG51bGxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxlYXZlU2NvcGUoc2NvcGU6IEltbWVyU2NvcGUpIHtcblx0aWYgKHNjb3BlID09PSBjdXJyZW50U2NvcGUpIHtcblx0XHRjdXJyZW50U2NvcGUgPSBzY29wZS5wYXJlbnRfXG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVudGVyU2NvcGUoaW1tZXI6IEltbWVyKSB7XG5cdHJldHVybiAoY3VycmVudFNjb3BlID0gY3JlYXRlU2NvcGUoY3VycmVudFNjb3BlLCBpbW1lcikpXG59XG5cbmZ1bmN0aW9uIHJldm9rZURyYWZ0KGRyYWZ0OiBEcmFmdGVkKSB7XG5cdGNvbnN0IHN0YXRlOiBJbW1lclN0YXRlID0gZHJhZnRbRFJBRlRfU1RBVEVdXG5cdGlmIChzdGF0ZS50eXBlXyA9PT0gQXJjaFR5cGUuT2JqZWN0IHx8IHN0YXRlLnR5cGVfID09PSBBcmNoVHlwZS5BcnJheSlcblx0XHRzdGF0ZS5yZXZva2VfKClcblx0ZWxzZSBzdGF0ZS5yZXZva2VkXyA9IHRydWVcbn1cbiIsICJpbXBvcnQge1xuXHRJbW1lclNjb3BlLFxuXHREUkFGVF9TVEFURSxcblx0aXNEcmFmdGFibGUsXG5cdE5PVEhJTkcsXG5cdFBhdGNoUGF0aCxcblx0ZWFjaCxcblx0aGFzLFxuXHRmcmVlemUsXG5cdEltbWVyU3RhdGUsXG5cdGlzRHJhZnQsXG5cdFNldFN0YXRlLFxuXHRzZXQsXG5cdEFyY2hUeXBlLFxuXHRnZXRQbHVnaW4sXG5cdGRpZSxcblx0cmV2b2tlU2NvcGUsXG5cdGlzRnJvemVuXG59IGZyb20gXCIuLi9pbnRlcm5hbFwiXG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzUmVzdWx0KHJlc3VsdDogYW55LCBzY29wZTogSW1tZXJTY29wZSkge1xuXHRzY29wZS51bmZpbmFsaXplZERyYWZ0c18gPSBzY29wZS5kcmFmdHNfLmxlbmd0aFxuXHRjb25zdCBiYXNlRHJhZnQgPSBzY29wZS5kcmFmdHNfIVswXVxuXHRjb25zdCBpc1JlcGxhY2VkID0gcmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgcmVzdWx0ICE9PSBiYXNlRHJhZnRcblx0aWYgKGlzUmVwbGFjZWQpIHtcblx0XHRpZiAoYmFzZURyYWZ0W0RSQUZUX1NUQVRFXS5tb2RpZmllZF8pIHtcblx0XHRcdHJldm9rZVNjb3BlKHNjb3BlKVxuXHRcdFx0ZGllKDQpXG5cdFx0fVxuXHRcdGlmIChpc0RyYWZ0YWJsZShyZXN1bHQpKSB7XG5cdFx0XHQvLyBGaW5hbGl6ZSB0aGUgcmVzdWx0IGluIGNhc2UgaXQgY29udGFpbnMgKG9yIGlzKSBhIHN1YnNldCBvZiB0aGUgZHJhZnQuXG5cdFx0XHRyZXN1bHQgPSBmaW5hbGl6ZShzY29wZSwgcmVzdWx0KVxuXHRcdFx0aWYgKCFzY29wZS5wYXJlbnRfKSBtYXliZUZyZWV6ZShzY29wZSwgcmVzdWx0KVxuXHRcdH1cblx0XHRpZiAoc2NvcGUucGF0Y2hlc18pIHtcblx0XHRcdGdldFBsdWdpbihcIlBhdGNoZXNcIikuZ2VuZXJhdGVSZXBsYWNlbWVudFBhdGNoZXNfKFxuXHRcdFx0XHRiYXNlRHJhZnRbRFJBRlRfU1RBVEVdLmJhc2VfLFxuXHRcdFx0XHRyZXN1bHQsXG5cdFx0XHRcdHNjb3BlLnBhdGNoZXNfLFxuXHRcdFx0XHRzY29wZS5pbnZlcnNlUGF0Y2hlc18hXG5cdFx0XHQpXG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdC8vIEZpbmFsaXplIHRoZSBiYXNlIGRyYWZ0LlxuXHRcdHJlc3VsdCA9IGZpbmFsaXplKHNjb3BlLCBiYXNlRHJhZnQsIFtdKVxuXHR9XG5cdHJldm9rZVNjb3BlKHNjb3BlKVxuXHRpZiAoc2NvcGUucGF0Y2hlc18pIHtcblx0XHRzY29wZS5wYXRjaExpc3RlbmVyXyEoc2NvcGUucGF0Y2hlc18sIHNjb3BlLmludmVyc2VQYXRjaGVzXyEpXG5cdH1cblx0cmV0dXJuIHJlc3VsdCAhPT0gTk9USElORyA/IHJlc3VsdCA6IHVuZGVmaW5lZFxufVxuXG5mdW5jdGlvbiBmaW5hbGl6ZShyb290U2NvcGU6IEltbWVyU2NvcGUsIHZhbHVlOiBhbnksIHBhdGg/OiBQYXRjaFBhdGgpIHtcblx0Ly8gRG9uJ3QgcmVjdXJzZSBpbiB0aG8gcmVjdXJzaXZlIGRhdGEgc3RydWN0dXJlc1xuXHRpZiAoaXNGcm96ZW4odmFsdWUpKSByZXR1cm4gdmFsdWVcblxuXHRjb25zdCBzdGF0ZTogSW1tZXJTdGF0ZSA9IHZhbHVlW0RSQUZUX1NUQVRFXVxuXHQvLyBBIHBsYWluIG9iamVjdCwgbWlnaHQgbmVlZCBmcmVlemluZywgbWlnaHQgY29udGFpbiBkcmFmdHNcblx0aWYgKCFzdGF0ZSkge1xuXHRcdGVhY2goXG5cdFx0XHR2YWx1ZSxcblx0XHRcdChrZXksIGNoaWxkVmFsdWUpID0+XG5cdFx0XHRcdGZpbmFsaXplUHJvcGVydHkocm9vdFNjb3BlLCBzdGF0ZSwgdmFsdWUsIGtleSwgY2hpbGRWYWx1ZSwgcGF0aCksXG5cdFx0XHR0cnVlIC8vIFNlZSAjNTkwLCBkb24ndCByZWN1cnNlIGludG8gbm9uLWVudW1lcmFibGUgb2Ygbm9uIGRyYWZ0ZWQgb2JqZWN0c1xuXHRcdClcblx0XHRyZXR1cm4gdmFsdWVcblx0fVxuXHQvLyBOZXZlciBmaW5hbGl6ZSBkcmFmdHMgb3duZWQgYnkgYW5vdGhlciBzY29wZS5cblx0aWYgKHN0YXRlLnNjb3BlXyAhPT0gcm9vdFNjb3BlKSByZXR1cm4gdmFsdWVcblx0Ly8gVW5tb2RpZmllZCBkcmFmdCwgcmV0dXJuIHRoZSAoZnJvemVuKSBvcmlnaW5hbFxuXHRpZiAoIXN0YXRlLm1vZGlmaWVkXykge1xuXHRcdG1heWJlRnJlZXplKHJvb3RTY29wZSwgc3RhdGUuYmFzZV8sIHRydWUpXG5cdFx0cmV0dXJuIHN0YXRlLmJhc2VfXG5cdH1cblx0Ly8gTm90IGZpbmFsaXplZCB5ZXQsIGxldCdzIGRvIHRoYXQgbm93XG5cdGlmICghc3RhdGUuZmluYWxpemVkXykge1xuXHRcdHN0YXRlLmZpbmFsaXplZF8gPSB0cnVlXG5cdFx0c3RhdGUuc2NvcGVfLnVuZmluYWxpemVkRHJhZnRzXy0tXG5cdFx0Y29uc3QgcmVzdWx0ID0gc3RhdGUuY29weV9cblx0XHQvLyBGaW5hbGl6ZSBhbGwgY2hpbGRyZW4gb2YgdGhlIGNvcHlcblx0XHQvLyBGb3Igc2V0cyB3ZSBjbG9uZSBiZWZvcmUgaXRlcmF0aW5nLCBvdGhlcndpc2Ugd2UgY2FuIGdldCBpbiBlbmRsZXNzIGxvb3AgZHVlIHRvIG1vZGlmeWluZyBkdXJpbmcgaXRlcmF0aW9uLCBzZWUgIzYyOFxuXHRcdC8vIFRvIHByZXNlcnZlIGluc2VydGlvbiBvcmRlciBpbiBhbGwgY2FzZXMgd2UgdGhlbiBjbGVhciB0aGUgc2V0XG5cdFx0Ly8gQW5kIHdlIGxldCBmaW5hbGl6ZVByb3BlcnR5IGtub3cgaXQgbmVlZHMgdG8gcmUtYWRkIG5vbi1kcmFmdCBjaGlsZHJlbiBiYWNrIHRvIHRoZSB0YXJnZXRcblx0XHRsZXQgcmVzdWx0RWFjaCA9IHJlc3VsdFxuXHRcdGxldCBpc1NldCA9IGZhbHNlXG5cdFx0aWYgKHN0YXRlLnR5cGVfID09PSBBcmNoVHlwZS5TZXQpIHtcblx0XHRcdHJlc3VsdEVhY2ggPSBuZXcgU2V0KHJlc3VsdClcblx0XHRcdHJlc3VsdC5jbGVhcigpXG5cdFx0XHRpc1NldCA9IHRydWVcblx0XHR9XG5cdFx0ZWFjaChyZXN1bHRFYWNoLCAoa2V5LCBjaGlsZFZhbHVlKSA9PlxuXHRcdFx0ZmluYWxpemVQcm9wZXJ0eShyb290U2NvcGUsIHN0YXRlLCByZXN1bHQsIGtleSwgY2hpbGRWYWx1ZSwgcGF0aCwgaXNTZXQpXG5cdFx0KVxuXHRcdC8vIGV2ZXJ5dGhpbmcgaW5zaWRlIGlzIGZyb3plbiwgd2UgY2FuIGZyZWV6ZSBoZXJlXG5cdFx0bWF5YmVGcmVlemUocm9vdFNjb3BlLCByZXN1bHQsIGZhbHNlKVxuXHRcdC8vIGZpcnN0IHRpbWUgZmluYWxpemluZywgbGV0J3MgY3JlYXRlIHRob3NlIHBhdGNoZXNcblx0XHRpZiAocGF0aCAmJiByb290U2NvcGUucGF0Y2hlc18pIHtcblx0XHRcdGdldFBsdWdpbihcIlBhdGNoZXNcIikuZ2VuZXJhdGVQYXRjaGVzXyhcblx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdHBhdGgsXG5cdFx0XHRcdHJvb3RTY29wZS5wYXRjaGVzXyxcblx0XHRcdFx0cm9vdFNjb3BlLmludmVyc2VQYXRjaGVzXyFcblx0XHRcdClcblx0XHR9XG5cdH1cblx0cmV0dXJuIHN0YXRlLmNvcHlfXG59XG5cbmZ1bmN0aW9uIGZpbmFsaXplUHJvcGVydHkoXG5cdHJvb3RTY29wZTogSW1tZXJTY29wZSxcblx0cGFyZW50U3RhdGU6IHVuZGVmaW5lZCB8IEltbWVyU3RhdGUsXG5cdHRhcmdldE9iamVjdDogYW55LFxuXHRwcm9wOiBzdHJpbmcgfCBudW1iZXIsXG5cdGNoaWxkVmFsdWU6IGFueSxcblx0cm9vdFBhdGg/OiBQYXRjaFBhdGgsXG5cdHRhcmdldElzU2V0PzogYm9vbGVhblxuKSB7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgY2hpbGRWYWx1ZSA9PT0gdGFyZ2V0T2JqZWN0KVxuXHRcdGRpZSg1KVxuXHRpZiAoaXNEcmFmdChjaGlsZFZhbHVlKSkge1xuXHRcdGNvbnN0IHBhdGggPVxuXHRcdFx0cm9vdFBhdGggJiZcblx0XHRcdHBhcmVudFN0YXRlICYmXG5cdFx0XHRwYXJlbnRTdGF0ZSEudHlwZV8gIT09IEFyY2hUeXBlLlNldCAmJiAvLyBTZXQgb2JqZWN0cyBhcmUgYXRvbWljIHNpbmNlIHRoZXkgaGF2ZSBubyBrZXlzLlxuXHRcdFx0IWhhcygocGFyZW50U3RhdGUgYXMgRXhjbHVkZTxJbW1lclN0YXRlLCBTZXRTdGF0ZT4pLmFzc2lnbmVkXyEsIHByb3ApIC8vIFNraXAgZGVlcCBwYXRjaGVzIGZvciBhc3NpZ25lZCBrZXlzLlxuXHRcdFx0XHQ/IHJvb3RQYXRoIS5jb25jYXQocHJvcClcblx0XHRcdFx0OiB1bmRlZmluZWRcblx0XHQvLyBEcmFmdHMgb3duZWQgYnkgYHNjb3BlYCBhcmUgZmluYWxpemVkIGhlcmUuXG5cdFx0Y29uc3QgcmVzID0gZmluYWxpemUocm9vdFNjb3BlLCBjaGlsZFZhbHVlLCBwYXRoKVxuXHRcdHNldCh0YXJnZXRPYmplY3QsIHByb3AsIHJlcylcblx0XHQvLyBEcmFmdHMgZnJvbSBhbm90aGVyIHNjb3BlIG11c3QgcHJldmVudGVkIHRvIGJlIGZyb3plblxuXHRcdC8vIGlmIHdlIGdvdCBhIGRyYWZ0IGJhY2sgZnJvbSBmaW5hbGl6ZSwgd2UncmUgaW4gYSBuZXN0ZWQgcHJvZHVjZSBhbmQgc2hvdWxkbid0IGZyZWV6ZVxuXHRcdGlmIChpc0RyYWZ0KHJlcykpIHtcblx0XHRcdHJvb3RTY29wZS5jYW5BdXRvRnJlZXplXyA9IGZhbHNlXG5cdFx0fSBlbHNlIHJldHVyblxuXHR9IGVsc2UgaWYgKHRhcmdldElzU2V0KSB7XG5cdFx0dGFyZ2V0T2JqZWN0LmFkZChjaGlsZFZhbHVlKVxuXHR9XG5cdC8vIFNlYXJjaCBuZXcgb2JqZWN0cyBmb3IgdW5maW5hbGl6ZWQgZHJhZnRzLiBGcm96ZW4gb2JqZWN0cyBzaG91bGQgbmV2ZXIgY29udGFpbiBkcmFmdHMuXG5cdGlmIChpc0RyYWZ0YWJsZShjaGlsZFZhbHVlKSAmJiAhaXNGcm96ZW4oY2hpbGRWYWx1ZSkpIHtcblx0XHRpZiAoIXJvb3RTY29wZS5pbW1lcl8uYXV0b0ZyZWV6ZV8gJiYgcm9vdFNjb3BlLnVuZmluYWxpemVkRHJhZnRzXyA8IDEpIHtcblx0XHRcdC8vIG9wdGltaXphdGlvbjogaWYgYW4gb2JqZWN0IGlzIG5vdCBhIGRyYWZ0LCBhbmQgd2UgZG9uJ3QgaGF2ZSB0b1xuXHRcdFx0Ly8gZGVlcGZyZWV6ZSBldmVyeXRoaW5nLCBhbmQgd2UgYXJlIHN1cmUgdGhhdCBubyBkcmFmdHMgYXJlIGxlZnQgaW4gdGhlIHJlbWFpbmluZyBvYmplY3Rcblx0XHRcdC8vIGNhdXNlIHdlIHNhdyBhbmQgZmluYWxpemVkIGFsbCBkcmFmdHMgYWxyZWFkeTsgd2UgY2FuIHN0b3AgdmlzaXRpbmcgdGhlIHJlc3Qgb2YgdGhlIHRyZWUuXG5cdFx0XHQvLyBUaGlzIGJlbmVmaXRzIGVzcGVjaWFsbHkgYWRkaW5nIGxhcmdlIGRhdGEgdHJlZSdzIHdpdGhvdXQgZnVydGhlciBwcm9jZXNzaW5nLlxuXHRcdFx0Ly8gU2VlIGFkZC1kYXRhLmpzIHBlcmYgdGVzdFxuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXHRcdGZpbmFsaXplKHJvb3RTY29wZSwgY2hpbGRWYWx1ZSlcblx0XHQvLyBpbW1lciBkZWVwIGZyZWV6ZXMgcGxhaW4gb2JqZWN0cywgc28gaWYgdGhlcmUgaXMgbm8gcGFyZW50IHN0YXRlLCB3ZSBmcmVlemUgYXMgd2VsbFxuXHRcdGlmICghcGFyZW50U3RhdGUgfHwgIXBhcmVudFN0YXRlLnNjb3BlXy5wYXJlbnRfKVxuXHRcdFx0bWF5YmVGcmVlemUocm9vdFNjb3BlLCBjaGlsZFZhbHVlKVxuXHR9XG59XG5cbmZ1bmN0aW9uIG1heWJlRnJlZXplKHNjb3BlOiBJbW1lclNjb3BlLCB2YWx1ZTogYW55LCBkZWVwID0gZmFsc2UpIHtcblx0Ly8gd2UgbmV2ZXIgZnJlZXplIGZvciBhIG5vbi1yb290IHNjb3BlOyBhcyBpdCB3b3VsZCBwcmV2ZW50IHBydW5pbmcgZm9yIGRyYWZ0cyBpbnNpZGUgd3JhcHBpbmcgb2JqZWN0c1xuXHRpZiAoIXNjb3BlLnBhcmVudF8gJiYgc2NvcGUuaW1tZXJfLmF1dG9GcmVlemVfICYmIHNjb3BlLmNhbkF1dG9GcmVlemVfKSB7XG5cdFx0ZnJlZXplKHZhbHVlLCBkZWVwKVxuXHR9XG59XG4iLCAiaW1wb3J0IHtcblx0ZWFjaCxcblx0aGFzLFxuXHRpcyxcblx0aXNEcmFmdGFibGUsXG5cdHNoYWxsb3dDb3B5LFxuXHRsYXRlc3QsXG5cdEltbWVyQmFzZVN0YXRlLFxuXHRJbW1lclN0YXRlLFxuXHREcmFmdGVkLFxuXHRBbnlPYmplY3QsXG5cdEFueUFycmF5LFxuXHRPYmplY3Rpc2gsXG5cdGdldEN1cnJlbnRTY29wZSxcblx0Z2V0UHJvdG90eXBlT2YsXG5cdERSQUZUX1NUQVRFLFxuXHRkaWUsXG5cdGNyZWF0ZVByb3h5LFxuXHRBcmNoVHlwZSxcblx0SW1tZXJTY29wZVxufSBmcm9tIFwiLi4vaW50ZXJuYWxcIlxuXG5pbnRlcmZhY2UgUHJveHlCYXNlU3RhdGUgZXh0ZW5kcyBJbW1lckJhc2VTdGF0ZSB7XG5cdGFzc2lnbmVkXzoge1xuXHRcdFtwcm9wZXJ0eTogc3RyaW5nXTogYm9vbGVhblxuXHR9XG5cdHBhcmVudF8/OiBJbW1lclN0YXRlXG5cdHJldm9rZV8oKTogdm9pZFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb3h5T2JqZWN0U3RhdGUgZXh0ZW5kcyBQcm94eUJhc2VTdGF0ZSB7XG5cdHR5cGVfOiBBcmNoVHlwZS5PYmplY3Rcblx0YmFzZV86IGFueVxuXHRjb3B5XzogYW55XG5cdGRyYWZ0XzogRHJhZnRlZDxBbnlPYmplY3QsIFByb3h5T2JqZWN0U3RhdGU+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJveHlBcnJheVN0YXRlIGV4dGVuZHMgUHJveHlCYXNlU3RhdGUge1xuXHR0eXBlXzogQXJjaFR5cGUuQXJyYXlcblx0YmFzZV86IEFueUFycmF5XG5cdGNvcHlfOiBBbnlBcnJheSB8IG51bGxcblx0ZHJhZnRfOiBEcmFmdGVkPEFueUFycmF5LCBQcm94eUFycmF5U3RhdGU+XG59XG5cbnR5cGUgUHJveHlTdGF0ZSA9IFByb3h5T2JqZWN0U3RhdGUgfCBQcm94eUFycmF5U3RhdGVcblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGRyYWZ0IG9mIHRoZSBgYmFzZWAgb2JqZWN0LlxuICpcbiAqIFRoZSBzZWNvbmQgYXJndW1lbnQgaXMgdGhlIHBhcmVudCBkcmFmdC1zdGF0ZSAodXNlZCBpbnRlcm5hbGx5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb3h5UHJveHk8VCBleHRlbmRzIE9iamVjdGlzaD4oXG5cdGJhc2U6IFQsXG5cdHBhcmVudD86IEltbWVyU3RhdGVcbik6IERyYWZ0ZWQ8VCwgUHJveHlTdGF0ZT4ge1xuXHRjb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheShiYXNlKVxuXHRjb25zdCBzdGF0ZTogUHJveHlTdGF0ZSA9IHtcblx0XHR0eXBlXzogaXNBcnJheSA/IEFyY2hUeXBlLkFycmF5IDogKEFyY2hUeXBlLk9iamVjdCBhcyBhbnkpLFxuXHRcdC8vIFRyYWNrIHdoaWNoIHByb2R1Y2UgY2FsbCB0aGlzIGlzIGFzc29jaWF0ZWQgd2l0aC5cblx0XHRzY29wZV86IHBhcmVudCA/IHBhcmVudC5zY29wZV8gOiBnZXRDdXJyZW50U2NvcGUoKSEsXG5cdFx0Ly8gVHJ1ZSBmb3IgYm90aCBzaGFsbG93IGFuZCBkZWVwIGNoYW5nZXMuXG5cdFx0bW9kaWZpZWRfOiBmYWxzZSxcblx0XHQvLyBVc2VkIGR1cmluZyBmaW5hbGl6YXRpb24uXG5cdFx0ZmluYWxpemVkXzogZmFsc2UsXG5cdFx0Ly8gVHJhY2sgd2hpY2ggcHJvcGVydGllcyBoYXZlIGJlZW4gYXNzaWduZWQgKHRydWUpIG9yIGRlbGV0ZWQgKGZhbHNlKS5cblx0XHRhc3NpZ25lZF86IHt9LFxuXHRcdC8vIFRoZSBwYXJlbnQgZHJhZnQgc3RhdGUuXG5cdFx0cGFyZW50XzogcGFyZW50LFxuXHRcdC8vIFRoZSBiYXNlIHN0YXRlLlxuXHRcdGJhc2VfOiBiYXNlLFxuXHRcdC8vIFRoZSBiYXNlIHByb3h5LlxuXHRcdGRyYWZ0XzogbnVsbCBhcyBhbnksIC8vIHNldCBiZWxvd1xuXHRcdC8vIFRoZSBiYXNlIGNvcHkgd2l0aCBhbnkgdXBkYXRlZCB2YWx1ZXMuXG5cdFx0Y29weV86IG51bGwsXG5cdFx0Ly8gQ2FsbGVkIGJ5IHRoZSBgcHJvZHVjZWAgZnVuY3Rpb24uXG5cdFx0cmV2b2tlXzogbnVsbCBhcyBhbnksXG5cdFx0aXNNYW51YWxfOiBmYWxzZVxuXHR9XG5cblx0Ly8gdGhlIHRyYXBzIG11c3QgdGFyZ2V0IHNvbWV0aGluZywgYSBiaXQgbGlrZSB0aGUgJ3JlYWwnIGJhc2UuXG5cdC8vIGJ1dCBhbHNvLCB3ZSBuZWVkIHRvIGJlIGFibGUgdG8gZGV0ZXJtaW5lIGZyb20gdGhlIHRhcmdldCB3aGF0IHRoZSByZWxldmFudCBzdGF0ZSBpc1xuXHQvLyAodG8gYXZvaWQgY3JlYXRpbmcgdHJhcHMgcGVyIGluc3RhbmNlIHRvIGNhcHR1cmUgdGhlIHN0YXRlIGluIGNsb3N1cmUsXG5cdC8vIGFuZCB0byBhdm9pZCBjcmVhdGluZyB3ZWlyZCBoaWRkZW4gcHJvcGVydGllcyBhcyB3ZWxsKVxuXHQvLyBTbyB0aGUgdHJpY2sgaXMgdG8gdXNlICdzdGF0ZScgYXMgdGhlIGFjdHVhbCAndGFyZ2V0JyEgKGFuZCBtYWtlIHN1cmUgd2UgaW50ZXJjZXB0IGV2ZXJ5dGhpbmcpXG5cdC8vIE5vdGUgdGhhdCBpbiB0aGUgY2FzZSBvZiBhbiBhcnJheSwgd2UgcHV0IHRoZSBzdGF0ZSBpbiBhbiBhcnJheSB0byBoYXZlIGJldHRlciBSZWZsZWN0IGRlZmF1bHRzIG9vdGJcblx0bGV0IHRhcmdldDogVCA9IHN0YXRlIGFzIGFueVxuXHRsZXQgdHJhcHM6IFByb3h5SGFuZGxlcjxvYmplY3QgfCBBcnJheTxhbnk+PiA9IG9iamVjdFRyYXBzXG5cdGlmIChpc0FycmF5KSB7XG5cdFx0dGFyZ2V0ID0gW3N0YXRlXSBhcyBhbnlcblx0XHR0cmFwcyA9IGFycmF5VHJhcHNcblx0fVxuXG5cdGNvbnN0IHtyZXZva2UsIHByb3h5fSA9IFByb3h5LnJldm9jYWJsZSh0YXJnZXQsIHRyYXBzKVxuXHRzdGF0ZS5kcmFmdF8gPSBwcm94eSBhcyBhbnlcblx0c3RhdGUucmV2b2tlXyA9IHJldm9rZVxuXHRyZXR1cm4gcHJveHkgYXMgYW55XG59XG5cbi8qKlxuICogT2JqZWN0IGRyYWZ0c1xuICovXG5leHBvcnQgY29uc3Qgb2JqZWN0VHJhcHM6IFByb3h5SGFuZGxlcjxQcm94eVN0YXRlPiA9IHtcblx0Z2V0KHN0YXRlLCBwcm9wKSB7XG5cdFx0aWYgKHByb3AgPT09IERSQUZUX1NUQVRFKSByZXR1cm4gc3RhdGVcblxuXHRcdGNvbnN0IHNvdXJjZSA9IGxhdGVzdChzdGF0ZSlcblx0XHRpZiAoIWhhcyhzb3VyY2UsIHByb3ApKSB7XG5cdFx0XHQvLyBub24tZXhpc3Rpbmcgb3Igbm9uLW93biBwcm9wZXJ0eS4uLlxuXHRcdFx0cmV0dXJuIHJlYWRQcm9wRnJvbVByb3RvKHN0YXRlLCBzb3VyY2UsIHByb3ApXG5cdFx0fVxuXHRcdGNvbnN0IHZhbHVlID0gc291cmNlW3Byb3BdXG5cdFx0aWYgKHN0YXRlLmZpbmFsaXplZF8gfHwgIWlzRHJhZnRhYmxlKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuIHZhbHVlXG5cdFx0fVxuXHRcdC8vIENoZWNrIGZvciBleGlzdGluZyBkcmFmdCBpbiBtb2RpZmllZCBzdGF0ZS5cblx0XHQvLyBBc3NpZ25lZCB2YWx1ZXMgYXJlIG5ldmVyIGRyYWZ0ZWQuIFRoaXMgY2F0Y2hlcyBhbnkgZHJhZnRzIHdlIGNyZWF0ZWQsIHRvby5cblx0XHRpZiAodmFsdWUgPT09IHBlZWsoc3RhdGUuYmFzZV8sIHByb3ApKSB7XG5cdFx0XHRwcmVwYXJlQ29weShzdGF0ZSlcblx0XHRcdHJldHVybiAoc3RhdGUuY29weV8hW3Byb3AgYXMgYW55XSA9IGNyZWF0ZVByb3h5KHZhbHVlLCBzdGF0ZSkpXG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZVxuXHR9LFxuXHRoYXMoc3RhdGUsIHByb3ApIHtcblx0XHRyZXR1cm4gcHJvcCBpbiBsYXRlc3Qoc3RhdGUpXG5cdH0sXG5cdG93bktleXMoc3RhdGUpIHtcblx0XHRyZXR1cm4gUmVmbGVjdC5vd25LZXlzKGxhdGVzdChzdGF0ZSkpXG5cdH0sXG5cdHNldChcblx0XHRzdGF0ZTogUHJveHlPYmplY3RTdGF0ZSxcblx0XHRwcm9wOiBzdHJpbmcgLyogc3RyaWN0bHkgbm90LCBidXQgaGVscHMgVFMgKi8sXG5cdFx0dmFsdWVcblx0KSB7XG5cdFx0Y29uc3QgZGVzYyA9IGdldERlc2NyaXB0b3JGcm9tUHJvdG8obGF0ZXN0KHN0YXRlKSwgcHJvcClcblx0XHRpZiAoZGVzYz8uc2V0KSB7XG5cdFx0XHQvLyBzcGVjaWFsIGNhc2U6IGlmIHRoaXMgd3JpdGUgaXMgY2FwdHVyZWQgYnkgYSBzZXR0ZXIsIHdlIGhhdmVcblx0XHRcdC8vIHRvIHRyaWdnZXIgaXQgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG5cdFx0XHRkZXNjLnNldC5jYWxsKHN0YXRlLmRyYWZ0XywgdmFsdWUpXG5cdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdH1cblx0XHRpZiAoIXN0YXRlLm1vZGlmaWVkXykge1xuXHRcdFx0Ly8gdGhlIGxhc3QgY2hlY2sgaXMgYmVjYXVzZSB3ZSBuZWVkIHRvIGJlIGFibGUgdG8gZGlzdGluZ3Vpc2ggc2V0dGluZyBhIG5vbi1leGlzdGluZyB0byB1bmRlZmluZWQgKHdoaWNoIGlzIGEgY2hhbmdlKVxuXHRcdFx0Ly8gZnJvbSBzZXR0aW5nIGFuIGV4aXN0aW5nIHByb3BlcnR5IHdpdGggdmFsdWUgdW5kZWZpbmVkIHRvIHVuZGVmaW5lZCAod2hpY2ggaXMgbm90IGEgY2hhbmdlKVxuXHRcdFx0Y29uc3QgY3VycmVudCA9IHBlZWsobGF0ZXN0KHN0YXRlKSwgcHJvcClcblx0XHRcdC8vIHNwZWNpYWwgY2FzZSwgaWYgd2UgYXNzaWduaW5nIHRoZSBvcmlnaW5hbCB2YWx1ZSB0byBhIGRyYWZ0LCB3ZSBjYW4gaWdub3JlIHRoZSBhc3NpZ25tZW50XG5cdFx0XHRjb25zdCBjdXJyZW50U3RhdGU6IFByb3h5T2JqZWN0U3RhdGUgPSBjdXJyZW50Py5bRFJBRlRfU1RBVEVdXG5cdFx0XHRpZiAoY3VycmVudFN0YXRlICYmIGN1cnJlbnRTdGF0ZS5iYXNlXyA9PT0gdmFsdWUpIHtcblx0XHRcdFx0c3RhdGUuY29weV8hW3Byb3BdID0gdmFsdWVcblx0XHRcdFx0c3RhdGUuYXNzaWduZWRfW3Byb3BdID0gZmFsc2Vcblx0XHRcdFx0cmV0dXJuIHRydWVcblx0XHRcdH1cblx0XHRcdGlmIChpcyh2YWx1ZSwgY3VycmVudCkgJiYgKHZhbHVlICE9PSB1bmRlZmluZWQgfHwgaGFzKHN0YXRlLmJhc2VfLCBwcm9wKSkpXG5cdFx0XHRcdHJldHVybiB0cnVlXG5cdFx0XHRwcmVwYXJlQ29weShzdGF0ZSlcblx0XHRcdG1hcmtDaGFuZ2VkKHN0YXRlKVxuXHRcdH1cblxuXHRcdGlmIChcblx0XHRcdChzdGF0ZS5jb3B5XyFbcHJvcF0gPT09IHZhbHVlICYmXG5cdFx0XHRcdC8vIHNwZWNpYWwgY2FzZTogaGFuZGxlIG5ldyBwcm9wcyB3aXRoIHZhbHVlICd1bmRlZmluZWQnXG5cdFx0XHRcdCh2YWx1ZSAhPT0gdW5kZWZpbmVkIHx8IHByb3AgaW4gc3RhdGUuY29weV8pKSB8fFxuXHRcdFx0Ly8gc3BlY2lhbCBjYXNlOiBOYU5cblx0XHRcdChOdW1iZXIuaXNOYU4odmFsdWUpICYmIE51bWJlci5pc05hTihzdGF0ZS5jb3B5XyFbcHJvcF0pKVxuXHRcdClcblx0XHRcdHJldHVybiB0cnVlXG5cblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0c3RhdGUuY29weV8hW3Byb3BdID0gdmFsdWVcblx0XHRzdGF0ZS5hc3NpZ25lZF9bcHJvcF0gPSB0cnVlXG5cdFx0cmV0dXJuIHRydWVcblx0fSxcblx0ZGVsZXRlUHJvcGVydHkoc3RhdGUsIHByb3A6IHN0cmluZykge1xuXHRcdC8vIFRoZSBgdW5kZWZpbmVkYCBjaGVjayBpcyBhIGZhc3QgcGF0aCBmb3IgcHJlLWV4aXN0aW5nIGtleXMuXG5cdFx0aWYgKHBlZWsoc3RhdGUuYmFzZV8sIHByb3ApICE9PSB1bmRlZmluZWQgfHwgcHJvcCBpbiBzdGF0ZS5iYXNlXykge1xuXHRcdFx0c3RhdGUuYXNzaWduZWRfW3Byb3BdID0gZmFsc2Vcblx0XHRcdHByZXBhcmVDb3B5KHN0YXRlKVxuXHRcdFx0bWFya0NoYW5nZWQoc3RhdGUpXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIGlmIGFuIG9yaWdpbmFsbHkgbm90IGFzc2lnbmVkIHByb3BlcnR5IHdhcyBkZWxldGVkXG5cdFx0XHRkZWxldGUgc3RhdGUuYXNzaWduZWRfW3Byb3BdXG5cdFx0fVxuXHRcdGlmIChzdGF0ZS5jb3B5Xykge1xuXHRcdFx0ZGVsZXRlIHN0YXRlLmNvcHlfW3Byb3BdXG5cdFx0fVxuXHRcdHJldHVybiB0cnVlXG5cdH0sXG5cdC8vIE5vdGU6IFdlIG5ldmVyIGNvZXJjZSBgZGVzYy52YWx1ZWAgaW50byBhbiBJbW1lciBkcmFmdCwgYmVjYXVzZSB3ZSBjYW4ndCBtYWtlXG5cdC8vIHRoZSBzYW1lIGd1YXJhbnRlZSBpbiBFUzUgbW9kZS5cblx0Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHN0YXRlLCBwcm9wKSB7XG5cdFx0Y29uc3Qgb3duZXIgPSBsYXRlc3Qoc3RhdGUpXG5cdFx0Y29uc3QgZGVzYyA9IFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG93bmVyLCBwcm9wKVxuXHRcdGlmICghZGVzYykgcmV0dXJuIGRlc2Ncblx0XHRyZXR1cm4ge1xuXHRcdFx0d3JpdGFibGU6IHRydWUsXG5cdFx0XHRjb25maWd1cmFibGU6IHN0YXRlLnR5cGVfICE9PSBBcmNoVHlwZS5BcnJheSB8fCBwcm9wICE9PSBcImxlbmd0aFwiLFxuXHRcdFx0ZW51bWVyYWJsZTogZGVzYy5lbnVtZXJhYmxlLFxuXHRcdFx0dmFsdWU6IG93bmVyW3Byb3BdXG5cdFx0fVxuXHR9LFxuXHRkZWZpbmVQcm9wZXJ0eSgpIHtcblx0XHRkaWUoMTEpXG5cdH0sXG5cdGdldFByb3RvdHlwZU9mKHN0YXRlKSB7XG5cdFx0cmV0dXJuIGdldFByb3RvdHlwZU9mKHN0YXRlLmJhc2VfKVxuXHR9LFxuXHRzZXRQcm90b3R5cGVPZigpIHtcblx0XHRkaWUoMTIpXG5cdH1cbn1cblxuLyoqXG4gKiBBcnJheSBkcmFmdHNcbiAqL1xuXG5jb25zdCBhcnJheVRyYXBzOiBQcm94eUhhbmRsZXI8W1Byb3h5QXJyYXlTdGF0ZV0+ID0ge31cbmVhY2gob2JqZWN0VHJhcHMsIChrZXksIGZuKSA9PiB7XG5cdC8vIEB0cy1pZ25vcmVcblx0YXJyYXlUcmFwc1trZXldID0gZnVuY3Rpb24oKSB7XG5cdFx0YXJndW1lbnRzWzBdID0gYXJndW1lbnRzWzBdWzBdXG5cdFx0cmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcblx0fVxufSlcbmFycmF5VHJhcHMuZGVsZXRlUHJvcGVydHkgPSBmdW5jdGlvbihzdGF0ZSwgcHJvcCkge1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmIGlzTmFOKHBhcnNlSW50KHByb3AgYXMgYW55KSkpXG5cdFx0ZGllKDEzKVxuXHQvLyBAdHMtaWdub3JlXG5cdHJldHVybiBhcnJheVRyYXBzLnNldCEuY2FsbCh0aGlzLCBzdGF0ZSwgcHJvcCwgdW5kZWZpbmVkKVxufVxuYXJyYXlUcmFwcy5zZXQgPSBmdW5jdGlvbihzdGF0ZSwgcHJvcCwgdmFsdWUpIHtcblx0aWYgKFxuXHRcdHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJlxuXHRcdHByb3AgIT09IFwibGVuZ3RoXCIgJiZcblx0XHRpc05hTihwYXJzZUludChwcm9wIGFzIGFueSkpXG5cdClcblx0XHRkaWUoMTQpXG5cdHJldHVybiBvYmplY3RUcmFwcy5zZXQhLmNhbGwodGhpcywgc3RhdGVbMF0sIHByb3AsIHZhbHVlLCBzdGF0ZVswXSlcbn1cblxuLy8gQWNjZXNzIGEgcHJvcGVydHkgd2l0aG91dCBjcmVhdGluZyBhbiBJbW1lciBkcmFmdC5cbmZ1bmN0aW9uIHBlZWsoZHJhZnQ6IERyYWZ0ZWQsIHByb3A6IFByb3BlcnR5S2V5KSB7XG5cdGNvbnN0IHN0YXRlID0gZHJhZnRbRFJBRlRfU1RBVEVdXG5cdGNvbnN0IHNvdXJjZSA9IHN0YXRlID8gbGF0ZXN0KHN0YXRlKSA6IGRyYWZ0XG5cdHJldHVybiBzb3VyY2VbcHJvcF1cbn1cblxuZnVuY3Rpb24gcmVhZFByb3BGcm9tUHJvdG8oc3RhdGU6IEltbWVyU3RhdGUsIHNvdXJjZTogYW55LCBwcm9wOiBQcm9wZXJ0eUtleSkge1xuXHRjb25zdCBkZXNjID0gZ2V0RGVzY3JpcHRvckZyb21Qcm90byhzb3VyY2UsIHByb3ApXG5cdHJldHVybiBkZXNjXG5cdFx0PyBgdmFsdWVgIGluIGRlc2Ncblx0XHRcdD8gZGVzYy52YWx1ZVxuXHRcdFx0OiAvLyBUaGlzIGlzIGEgdmVyeSBzcGVjaWFsIGNhc2UsIGlmIHRoZSBwcm9wIGlzIGEgZ2V0dGVyIGRlZmluZWQgYnkgdGhlXG5cdFx0XHQgIC8vIHByb3RvdHlwZSwgd2Ugc2hvdWxkIGludm9rZSBpdCB3aXRoIHRoZSBkcmFmdCBhcyBjb250ZXh0IVxuXHRcdFx0ICBkZXNjLmdldD8uY2FsbChzdGF0ZS5kcmFmdF8pXG5cdFx0OiB1bmRlZmluZWRcbn1cblxuZnVuY3Rpb24gZ2V0RGVzY3JpcHRvckZyb21Qcm90byhcblx0c291cmNlOiBhbnksXG5cdHByb3A6IFByb3BlcnR5S2V5XG4pOiBQcm9wZXJ0eURlc2NyaXB0b3IgfCB1bmRlZmluZWQge1xuXHQvLyAnaW4nIGNoZWNrcyBwcm90byFcblx0aWYgKCEocHJvcCBpbiBzb3VyY2UpKSByZXR1cm4gdW5kZWZpbmVkXG5cdGxldCBwcm90byA9IGdldFByb3RvdHlwZU9mKHNvdXJjZSlcblx0d2hpbGUgKHByb3RvKSB7XG5cdFx0Y29uc3QgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvdG8sIHByb3ApXG5cdFx0aWYgKGRlc2MpIHJldHVybiBkZXNjXG5cdFx0cHJvdG8gPSBnZXRQcm90b3R5cGVPZihwcm90bylcblx0fVxuXHRyZXR1cm4gdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXJrQ2hhbmdlZChzdGF0ZTogSW1tZXJTdGF0ZSkge1xuXHRpZiAoIXN0YXRlLm1vZGlmaWVkXykge1xuXHRcdHN0YXRlLm1vZGlmaWVkXyA9IHRydWVcblx0XHRpZiAoc3RhdGUucGFyZW50Xykge1xuXHRcdFx0bWFya0NoYW5nZWQoc3RhdGUucGFyZW50Xylcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmVDb3B5KHN0YXRlOiB7XG5cdGJhc2VfOiBhbnlcblx0Y29weV86IGFueVxuXHRzY29wZV86IEltbWVyU2NvcGVcbn0pIHtcblx0aWYgKCFzdGF0ZS5jb3B5Xykge1xuXHRcdHN0YXRlLmNvcHlfID0gc2hhbGxvd0NvcHkoXG5cdFx0XHRzdGF0ZS5iYXNlXyxcblx0XHRcdHN0YXRlLnNjb3BlXy5pbW1lcl8udXNlU3RyaWN0U2hhbGxvd0NvcHlfXG5cdFx0KVxuXHR9XG59XG4iLCAiaW1wb3J0IHtcblx0SVByb2R1Y2VXaXRoUGF0Y2hlcyxcblx0SVByb2R1Y2UsXG5cdEltbWVyU3RhdGUsXG5cdERyYWZ0ZWQsXG5cdGlzRHJhZnRhYmxlLFxuXHRwcm9jZXNzUmVzdWx0LFxuXHRQYXRjaCxcblx0T2JqZWN0aXNoLFxuXHREUkFGVF9TVEFURSxcblx0RHJhZnQsXG5cdFBhdGNoTGlzdGVuZXIsXG5cdGlzRHJhZnQsXG5cdGlzTWFwLFxuXHRpc1NldCxcblx0Y3JlYXRlUHJveHlQcm94eSxcblx0Z2V0UGx1Z2luLFxuXHRkaWUsXG5cdGVudGVyU2NvcGUsXG5cdHJldm9rZVNjb3BlLFxuXHRsZWF2ZVNjb3BlLFxuXHR1c2VQYXRjaGVzSW5TY29wZSxcblx0Z2V0Q3VycmVudFNjb3BlLFxuXHROT1RISU5HLFxuXHRmcmVlemUsXG5cdGN1cnJlbnRcbn0gZnJvbSBcIi4uL2ludGVybmFsXCJcblxuaW50ZXJmYWNlIFByb2R1Y2Vyc0ZucyB7XG5cdHByb2R1Y2U6IElQcm9kdWNlXG5cdHByb2R1Y2VXaXRoUGF0Y2hlczogSVByb2R1Y2VXaXRoUGF0Y2hlc1xufVxuXG5leHBvcnQgY2xhc3MgSW1tZXIgaW1wbGVtZW50cyBQcm9kdWNlcnNGbnMge1xuXHRhdXRvRnJlZXplXzogYm9vbGVhbiA9IHRydWVcblx0dXNlU3RyaWN0U2hhbGxvd0NvcHlfOiBib29sZWFuID0gZmFsc2VcblxuXHRjb25zdHJ1Y3Rvcihjb25maWc/OiB7YXV0b0ZyZWV6ZT86IGJvb2xlYW47IHVzZVN0cmljdFNoYWxsb3dDb3B5PzogYm9vbGVhbn0pIHtcblx0XHRpZiAodHlwZW9mIGNvbmZpZz8uYXV0b0ZyZWV6ZSA9PT0gXCJib29sZWFuXCIpXG5cdFx0XHR0aGlzLnNldEF1dG9GcmVlemUoY29uZmlnIS5hdXRvRnJlZXplKVxuXHRcdGlmICh0eXBlb2YgY29uZmlnPy51c2VTdHJpY3RTaGFsbG93Q29weSA9PT0gXCJib29sZWFuXCIpXG5cdFx0XHR0aGlzLnNldFVzZVN0cmljdFNoYWxsb3dDb3B5KGNvbmZpZyEudXNlU3RyaWN0U2hhbGxvd0NvcHkpXG5cdH1cblxuXHQvKipcblx0ICogVGhlIGBwcm9kdWNlYCBmdW5jdGlvbiB0YWtlcyBhIHZhbHVlIGFuZCBhIFwicmVjaXBlIGZ1bmN0aW9uXCIgKHdob3NlXG5cdCAqIHJldHVybiB2YWx1ZSBvZnRlbiBkZXBlbmRzIG9uIHRoZSBiYXNlIHN0YXRlKS4gVGhlIHJlY2lwZSBmdW5jdGlvbiBpc1xuXHQgKiBmcmVlIHRvIG11dGF0ZSBpdHMgZmlyc3QgYXJndW1lbnQgaG93ZXZlciBpdCB3YW50cy4gQWxsIG11dGF0aW9ucyBhcmVcblx0ICogb25seSBldmVyIGFwcGxpZWQgdG8gYSBfX2NvcHlfXyBvZiB0aGUgYmFzZSBzdGF0ZS5cblx0ICpcblx0ICogUGFzcyBvbmx5IGEgZnVuY3Rpb24gdG8gY3JlYXRlIGEgXCJjdXJyaWVkIHByb2R1Y2VyXCIgd2hpY2ggcmVsaWV2ZXMgeW91XG5cdCAqIGZyb20gcGFzc2luZyB0aGUgcmVjaXBlIGZ1bmN0aW9uIGV2ZXJ5IHRpbWUuXG5cdCAqXG5cdCAqIE9ubHkgcGxhaW4gb2JqZWN0cyBhbmQgYXJyYXlzIGFyZSBtYWRlIG11dGFibGUuIEFsbCBvdGhlciBvYmplY3RzIGFyZVxuXHQgKiBjb25zaWRlcmVkIHVuY29weWFibGUuXG5cdCAqXG5cdCAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gaXMgX19ib3VuZF9fIHRvIGl0cyBgSW1tZXJgIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge2FueX0gYmFzZSAtIHRoZSBpbml0aWFsIHN0YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHJlY2lwZSAtIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSBwcm94eSBvZiB0aGUgYmFzZSBzdGF0ZSBhcyBmaXJzdCBhcmd1bWVudCBhbmQgd2hpY2ggY2FuIGJlIGZyZWVseSBtb2RpZmllZFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwYXRjaExpc3RlbmVyIC0gb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aXRoIGFsbCB0aGUgcGF0Y2hlcyBwcm9kdWNlZCBoZXJlXG5cdCAqIEByZXR1cm5zIHthbnl9IGEgbmV3IHN0YXRlLCBvciB0aGUgaW5pdGlhbCBzdGF0ZSBpZiBub3RoaW5nIHdhcyBtb2RpZmllZFxuXHQgKi9cblx0cHJvZHVjZTogSVByb2R1Y2UgPSAoYmFzZTogYW55LCByZWNpcGU/OiBhbnksIHBhdGNoTGlzdGVuZXI/OiBhbnkpID0+IHtcblx0XHQvLyBjdXJyaWVkIGludm9jYXRpb25cblx0XHRpZiAodHlwZW9mIGJhc2UgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgcmVjaXBlICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdGNvbnN0IGRlZmF1bHRCYXNlID0gcmVjaXBlXG5cdFx0XHRyZWNpcGUgPSBiYXNlXG5cblx0XHRcdGNvbnN0IHNlbGYgPSB0aGlzXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gY3VycmllZFByb2R1Y2UoXG5cdFx0XHRcdHRoaXM6IGFueSxcblx0XHRcdFx0YmFzZSA9IGRlZmF1bHRCYXNlLFxuXHRcdFx0XHQuLi5hcmdzOiBhbnlbXVxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybiBzZWxmLnByb2R1Y2UoYmFzZSwgKGRyYWZ0OiBEcmFmdGVkKSA9PiByZWNpcGUuY2FsbCh0aGlzLCBkcmFmdCwgLi4uYXJncykpIC8vIHByZXR0aWVyLWlnbm9yZVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0eXBlb2YgcmVjaXBlICE9PSBcImZ1bmN0aW9uXCIpIGRpZSg2KVxuXHRcdGlmIChwYXRjaExpc3RlbmVyICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHBhdGNoTGlzdGVuZXIgIT09IFwiZnVuY3Rpb25cIilcblx0XHRcdGRpZSg3KVxuXG5cdFx0bGV0IHJlc3VsdFxuXG5cdFx0Ly8gT25seSBwbGFpbiBvYmplY3RzLCBhcnJheXMsIGFuZCBcImltbWVyYWJsZSBjbGFzc2VzXCIgYXJlIGRyYWZ0ZWQuXG5cdFx0aWYgKGlzRHJhZnRhYmxlKGJhc2UpKSB7XG5cdFx0XHRjb25zdCBzY29wZSA9IGVudGVyU2NvcGUodGhpcylcblx0XHRcdGNvbnN0IHByb3h5ID0gY3JlYXRlUHJveHkoYmFzZSwgdW5kZWZpbmVkKVxuXHRcdFx0bGV0IGhhc0Vycm9yID0gdHJ1ZVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cmVzdWx0ID0gcmVjaXBlKHByb3h5KVxuXHRcdFx0XHRoYXNFcnJvciA9IGZhbHNlXG5cdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHQvLyBmaW5hbGx5IGluc3RlYWQgb2YgY2F0Y2ggKyByZXRocm93IGJldHRlciBwcmVzZXJ2ZXMgb3JpZ2luYWwgc3RhY2tcblx0XHRcdFx0aWYgKGhhc0Vycm9yKSByZXZva2VTY29wZShzY29wZSlcblx0XHRcdFx0ZWxzZSBsZWF2ZVNjb3BlKHNjb3BlKVxuXHRcdFx0fVxuXHRcdFx0dXNlUGF0Y2hlc0luU2NvcGUoc2NvcGUsIHBhdGNoTGlzdGVuZXIpXG5cdFx0XHRyZXR1cm4gcHJvY2Vzc1Jlc3VsdChyZXN1bHQsIHNjb3BlKVxuXHRcdH0gZWxzZSBpZiAoIWJhc2UgfHwgdHlwZW9mIGJhc2UgIT09IFwib2JqZWN0XCIpIHtcblx0XHRcdHJlc3VsdCA9IHJlY2lwZShiYXNlKVxuXHRcdFx0aWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSByZXN1bHQgPSBiYXNlXG5cdFx0XHRpZiAocmVzdWx0ID09PSBOT1RISU5HKSByZXN1bHQgPSB1bmRlZmluZWRcblx0XHRcdGlmICh0aGlzLmF1dG9GcmVlemVfKSBmcmVlemUocmVzdWx0LCB0cnVlKVxuXHRcdFx0aWYgKHBhdGNoTGlzdGVuZXIpIHtcblx0XHRcdFx0Y29uc3QgcDogUGF0Y2hbXSA9IFtdXG5cdFx0XHRcdGNvbnN0IGlwOiBQYXRjaFtdID0gW11cblx0XHRcdFx0Z2V0UGx1Z2luKFwiUGF0Y2hlc1wiKS5nZW5lcmF0ZVJlcGxhY2VtZW50UGF0Y2hlc18oYmFzZSwgcmVzdWx0LCBwLCBpcClcblx0XHRcdFx0cGF0Y2hMaXN0ZW5lcihwLCBpcClcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHRcblx0XHR9IGVsc2UgZGllKDEsIGJhc2UpXG5cdH1cblxuXHRwcm9kdWNlV2l0aFBhdGNoZXM6IElQcm9kdWNlV2l0aFBhdGNoZXMgPSAoYmFzZTogYW55LCByZWNpcGU/OiBhbnkpOiBhbnkgPT4ge1xuXHRcdC8vIGN1cnJpZWQgaW52b2NhdGlvblxuXHRcdGlmICh0eXBlb2YgYmFzZSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRyZXR1cm4gKHN0YXRlOiBhbnksIC4uLmFyZ3M6IGFueVtdKSA9PlxuXHRcdFx0XHR0aGlzLnByb2R1Y2VXaXRoUGF0Y2hlcyhzdGF0ZSwgKGRyYWZ0OiBhbnkpID0+IGJhc2UoZHJhZnQsIC4uLmFyZ3MpKVxuXHRcdH1cblxuXHRcdGxldCBwYXRjaGVzOiBQYXRjaFtdLCBpbnZlcnNlUGF0Y2hlczogUGF0Y2hbXVxuXHRcdGNvbnN0IHJlc3VsdCA9IHRoaXMucHJvZHVjZShiYXNlLCByZWNpcGUsIChwOiBQYXRjaFtdLCBpcDogUGF0Y2hbXSkgPT4ge1xuXHRcdFx0cGF0Y2hlcyA9IHBcblx0XHRcdGludmVyc2VQYXRjaGVzID0gaXBcblx0XHR9KVxuXHRcdHJldHVybiBbcmVzdWx0LCBwYXRjaGVzISwgaW52ZXJzZVBhdGNoZXMhXVxuXHR9XG5cblx0Y3JlYXRlRHJhZnQ8VCBleHRlbmRzIE9iamVjdGlzaD4oYmFzZTogVCk6IERyYWZ0PFQ+IHtcblx0XHRpZiAoIWlzRHJhZnRhYmxlKGJhc2UpKSBkaWUoOClcblx0XHRpZiAoaXNEcmFmdChiYXNlKSkgYmFzZSA9IGN1cnJlbnQoYmFzZSlcblx0XHRjb25zdCBzY29wZSA9IGVudGVyU2NvcGUodGhpcylcblx0XHRjb25zdCBwcm94eSA9IGNyZWF0ZVByb3h5KGJhc2UsIHVuZGVmaW5lZClcblx0XHRwcm94eVtEUkFGVF9TVEFURV0uaXNNYW51YWxfID0gdHJ1ZVxuXHRcdGxlYXZlU2NvcGUoc2NvcGUpXG5cdFx0cmV0dXJuIHByb3h5IGFzIGFueVxuXHR9XG5cblx0ZmluaXNoRHJhZnQ8RCBleHRlbmRzIERyYWZ0PGFueT4+KFxuXHRcdGRyYWZ0OiBELFxuXHRcdHBhdGNoTGlzdGVuZXI/OiBQYXRjaExpc3RlbmVyXG5cdCk6IEQgZXh0ZW5kcyBEcmFmdDxpbmZlciBUPiA/IFQgOiBuZXZlciB7XG5cdFx0Y29uc3Qgc3RhdGU6IEltbWVyU3RhdGUgPSBkcmFmdCAmJiAoZHJhZnQgYXMgYW55KVtEUkFGVF9TVEFURV1cblx0XHRpZiAoIXN0YXRlIHx8ICFzdGF0ZS5pc01hbnVhbF8pIGRpZSg5KVxuXHRcdGNvbnN0IHtzY29wZV86IHNjb3BlfSA9IHN0YXRlXG5cdFx0dXNlUGF0Y2hlc0luU2NvcGUoc2NvcGUsIHBhdGNoTGlzdGVuZXIpXG5cdFx0cmV0dXJuIHByb2Nlc3NSZXN1bHQodW5kZWZpbmVkLCBzY29wZSlcblx0fVxuXG5cdC8qKlxuXHQgKiBQYXNzIHRydWUgdG8gYXV0b21hdGljYWxseSBmcmVlemUgYWxsIGNvcGllcyBjcmVhdGVkIGJ5IEltbWVyLlxuXHQgKlxuXHQgKiBCeSBkZWZhdWx0LCBhdXRvLWZyZWV6aW5nIGlzIGVuYWJsZWQuXG5cdCAqL1xuXHRzZXRBdXRvRnJlZXplKHZhbHVlOiBib29sZWFuKSB7XG5cdFx0dGhpcy5hdXRvRnJlZXplXyA9IHZhbHVlXG5cdH1cblxuXHQvKipcblx0ICogUGFzcyB0cnVlIHRvIGVuYWJsZSBzdHJpY3Qgc2hhbGxvdyBjb3B5LlxuXHQgKlxuXHQgKiBCeSBkZWZhdWx0LCBpbW1lciBkb2VzIG5vdCBjb3B5IHRoZSBvYmplY3QgZGVzY3JpcHRvcnMgc3VjaCBhcyBnZXR0ZXIsIHNldHRlciBhbmQgbm9uLWVudW1yYWJsZSBwcm9wZXJ0aWVzLlxuXHQgKi9cblx0c2V0VXNlU3RyaWN0U2hhbGxvd0NvcHkodmFsdWU6IGJvb2xlYW4pIHtcblx0XHR0aGlzLnVzZVN0cmljdFNoYWxsb3dDb3B5XyA9IHZhbHVlXG5cdH1cblxuXHRhcHBseVBhdGNoZXM8VCBleHRlbmRzIE9iamVjdGlzaD4oYmFzZTogVCwgcGF0Y2hlczogUGF0Y2hbXSk6IFQge1xuXHRcdC8vIElmIGEgcGF0Y2ggcmVwbGFjZXMgdGhlIGVudGlyZSBzdGF0ZSwgdGFrZSB0aGF0IHJlcGxhY2VtZW50IGFzIGJhc2Vcblx0XHQvLyBiZWZvcmUgYXBwbHlpbmcgcGF0Y2hlc1xuXHRcdGxldCBpOiBudW1iZXJcblx0XHRmb3IgKGkgPSBwYXRjaGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRjb25zdCBwYXRjaCA9IHBhdGNoZXNbaV1cblx0XHRcdGlmIChwYXRjaC5wYXRoLmxlbmd0aCA9PT0gMCAmJiBwYXRjaC5vcCA9PT0gXCJyZXBsYWNlXCIpIHtcblx0XHRcdFx0YmFzZSA9IHBhdGNoLnZhbHVlXG5cdFx0XHRcdGJyZWFrXG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIElmIHRoZXJlIHdhcyBhIHBhdGNoIHRoYXQgcmVwbGFjZWQgdGhlIGVudGlyZSBzdGF0ZSwgc3RhcnQgZnJvbSB0aGVcblx0XHQvLyBwYXRjaCBhZnRlciB0aGF0LlxuXHRcdGlmIChpID4gLTEpIHtcblx0XHRcdHBhdGNoZXMgPSBwYXRjaGVzLnNsaWNlKGkgKyAxKVxuXHRcdH1cblxuXHRcdGNvbnN0IGFwcGx5UGF0Y2hlc0ltcGwgPSBnZXRQbHVnaW4oXCJQYXRjaGVzXCIpLmFwcGx5UGF0Y2hlc19cblx0XHRpZiAoaXNEcmFmdChiYXNlKSkge1xuXHRcdFx0Ly8gTi5COiBuZXZlciBoaXRzIGlmIHNvbWUgcGF0Y2ggYSByZXBsYWNlbWVudCwgcGF0Y2hlcyBhcmUgbmV2ZXIgZHJhZnRzXG5cdFx0XHRyZXR1cm4gYXBwbHlQYXRjaGVzSW1wbChiYXNlLCBwYXRjaGVzKVxuXHRcdH1cblx0XHQvLyBPdGhlcndpc2UsIHByb2R1Y2UgYSBjb3B5IG9mIHRoZSBiYXNlIHN0YXRlLlxuXHRcdHJldHVybiB0aGlzLnByb2R1Y2UoYmFzZSwgKGRyYWZ0OiBEcmFmdGVkKSA9PlxuXHRcdFx0YXBwbHlQYXRjaGVzSW1wbChkcmFmdCwgcGF0Y2hlcylcblx0XHQpXG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb3h5PFQgZXh0ZW5kcyBPYmplY3Rpc2g+KFxuXHR2YWx1ZTogVCxcblx0cGFyZW50PzogSW1tZXJTdGF0ZVxuKTogRHJhZnRlZDxULCBJbW1lclN0YXRlPiB7XG5cdC8vIHByZWNvbmRpdGlvbjogY3JlYXRlUHJveHkgc2hvdWxkIGJlIGd1YXJkZWQgYnkgaXNEcmFmdGFibGUsIHNvIHdlIGtub3cgd2UgY2FuIHNhZmVseSBkcmFmdFxuXHRjb25zdCBkcmFmdDogRHJhZnRlZCA9IGlzTWFwKHZhbHVlKVxuXHRcdD8gZ2V0UGx1Z2luKFwiTWFwU2V0XCIpLnByb3h5TWFwXyh2YWx1ZSwgcGFyZW50KVxuXHRcdDogaXNTZXQodmFsdWUpXG5cdFx0PyBnZXRQbHVnaW4oXCJNYXBTZXRcIikucHJveHlTZXRfKHZhbHVlLCBwYXJlbnQpXG5cdFx0OiBjcmVhdGVQcm94eVByb3h5KHZhbHVlLCBwYXJlbnQpXG5cblx0Y29uc3Qgc2NvcGUgPSBwYXJlbnQgPyBwYXJlbnQuc2NvcGVfIDogZ2V0Q3VycmVudFNjb3BlKClcblx0c2NvcGUuZHJhZnRzXy5wdXNoKGRyYWZ0KVxuXHRyZXR1cm4gZHJhZnRcbn1cbiIsICJpbXBvcnQge1xuXHRkaWUsXG5cdGlzRHJhZnQsXG5cdHNoYWxsb3dDb3B5LFxuXHRlYWNoLFxuXHREUkFGVF9TVEFURSxcblx0c2V0LFxuXHRJbW1lclN0YXRlLFxuXHRpc0RyYWZ0YWJsZSxcblx0aXNGcm96ZW5cbn0gZnJvbSBcIi4uL2ludGVybmFsXCJcblxuLyoqIFRha2VzIGEgc25hcHNob3Qgb2YgdGhlIGN1cnJlbnQgc3RhdGUgb2YgYSBkcmFmdCBhbmQgZmluYWxpemVzIGl0IChidXQgd2l0aG91dCBmcmVlemluZykuIFRoaXMgaXMgYSBncmVhdCB1dGlsaXR5IHRvIHByaW50IHRoZSBjdXJyZW50IHN0YXRlIGR1cmluZyBkZWJ1Z2dpbmcgKG5vIFByb3hpZXMgaW4gdGhlIHdheSkuIFRoZSBvdXRwdXQgb2YgY3VycmVudCBjYW4gYWxzbyBiZSBzYWZlbHkgbGVha2VkIG91dHNpZGUgdGhlIHByb2R1Y2VyLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGN1cnJlbnQ8VD4odmFsdWU6IFQpOiBUXG5leHBvcnQgZnVuY3Rpb24gY3VycmVudCh2YWx1ZTogYW55KTogYW55IHtcblx0aWYgKCFpc0RyYWZ0KHZhbHVlKSkgZGllKDEwLCB2YWx1ZSlcblx0cmV0dXJuIGN1cnJlbnRJbXBsKHZhbHVlKVxufVxuXG5mdW5jdGlvbiBjdXJyZW50SW1wbCh2YWx1ZTogYW55KTogYW55IHtcblx0aWYgKCFpc0RyYWZ0YWJsZSh2YWx1ZSkgfHwgaXNGcm96ZW4odmFsdWUpKSByZXR1cm4gdmFsdWVcblx0Y29uc3Qgc3RhdGU6IEltbWVyU3RhdGUgfCB1bmRlZmluZWQgPSB2YWx1ZVtEUkFGVF9TVEFURV1cblx0bGV0IGNvcHk6IGFueVxuXHRpZiAoc3RhdGUpIHtcblx0XHRpZiAoIXN0YXRlLm1vZGlmaWVkXykgcmV0dXJuIHN0YXRlLmJhc2VfXG5cdFx0Ly8gT3B0aW1pemF0aW9uOiBhdm9pZCBnZW5lcmF0aW5nIG5ldyBkcmFmdHMgZHVyaW5nIGNvcHlpbmdcblx0XHRzdGF0ZS5maW5hbGl6ZWRfID0gdHJ1ZVxuXHRcdGNvcHkgPSBzaGFsbG93Q29weSh2YWx1ZSwgc3RhdGUuc2NvcGVfLmltbWVyXy51c2VTdHJpY3RTaGFsbG93Q29weV8pXG5cdH0gZWxzZSB7XG5cdFx0Y29weSA9IHNoYWxsb3dDb3B5KHZhbHVlLCB0cnVlKVxuXHR9XG5cdC8vIHJlY3Vyc2Vcblx0ZWFjaChjb3B5LCAoa2V5LCBjaGlsZFZhbHVlKSA9PiB7XG5cdFx0c2V0KGNvcHksIGtleSwgY3VycmVudEltcGwoY2hpbGRWYWx1ZSkpXG5cdH0pXG5cdGlmIChzdGF0ZSkge1xuXHRcdHN0YXRlLmZpbmFsaXplZF8gPSBmYWxzZVxuXHR9XG5cdHJldHVybiBjb3B5XG59XG4iLCAiaW1wb3J0IHtpbW1lcmFibGV9IGZyb20gXCIuLi9pbW1lclwiXG5pbXBvcnQge1xuXHRJbW1lclN0YXRlLFxuXHRQYXRjaCxcblx0U2V0U3RhdGUsXG5cdFByb3h5QXJyYXlTdGF0ZSxcblx0TWFwU3RhdGUsXG5cdFByb3h5T2JqZWN0U3RhdGUsXG5cdFBhdGNoUGF0aCxcblx0Z2V0LFxuXHRlYWNoLFxuXHRoYXMsXG5cdGdldEFyY2h0eXBlLFxuXHRnZXRQcm90b3R5cGVPZixcblx0aXNTZXQsXG5cdGlzTWFwLFxuXHRsb2FkUGx1Z2luLFxuXHRBcmNoVHlwZSxcblx0ZGllLFxuXHRpc0RyYWZ0LFxuXHRpc0RyYWZ0YWJsZSxcblx0Tk9USElORyxcblx0ZXJyb3JzXG59IGZyb20gXCIuLi9pbnRlcm5hbFwiXG5cbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVQYXRjaGVzKCkge1xuXHRjb25zdCBlcnJvck9mZnNldCA9IDE2XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcblx0XHRlcnJvcnMucHVzaChcblx0XHRcdCdTZXRzIGNhbm5vdCBoYXZlIFwicmVwbGFjZVwiIHBhdGNoZXMuJyxcblx0XHRcdGZ1bmN0aW9uKG9wOiBzdHJpbmcpIHtcblx0XHRcdFx0cmV0dXJuIFwiVW5zdXBwb3J0ZWQgcGF0Y2ggb3BlcmF0aW9uOiBcIiArIG9wXG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24ocGF0aDogc3RyaW5nKSB7XG5cdFx0XHRcdHJldHVybiBcIkNhbm5vdCBhcHBseSBwYXRjaCwgcGF0aCBkb2Vzbid0IHJlc29sdmU6IFwiICsgcGF0aFxuXHRcdFx0fSxcblx0XHRcdFwiUGF0Y2hpbmcgcmVzZXJ2ZWQgYXR0cmlidXRlcyBsaWtlIF9fcHJvdG9fXywgcHJvdG90eXBlIGFuZCBjb25zdHJ1Y3RvciBpcyBub3QgYWxsb3dlZFwiXG5cdFx0KVxuXHR9XG5cblx0Y29uc3QgUkVQTEFDRSA9IFwicmVwbGFjZVwiXG5cdGNvbnN0IEFERCA9IFwiYWRkXCJcblx0Y29uc3QgUkVNT1ZFID0gXCJyZW1vdmVcIlxuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlUGF0Y2hlc18oXG5cdFx0c3RhdGU6IEltbWVyU3RhdGUsXG5cdFx0YmFzZVBhdGg6IFBhdGNoUGF0aCxcblx0XHRwYXRjaGVzOiBQYXRjaFtdLFxuXHRcdGludmVyc2VQYXRjaGVzOiBQYXRjaFtdXG5cdCk6IHZvaWQge1xuXHRcdHN3aXRjaCAoc3RhdGUudHlwZV8pIHtcblx0XHRcdGNhc2UgQXJjaFR5cGUuT2JqZWN0OlxuXHRcdFx0Y2FzZSBBcmNoVHlwZS5NYXA6XG5cdFx0XHRcdHJldHVybiBnZW5lcmF0ZVBhdGNoZXNGcm9tQXNzaWduZWQoXG5cdFx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdFx0YmFzZVBhdGgsXG5cdFx0XHRcdFx0cGF0Y2hlcyxcblx0XHRcdFx0XHRpbnZlcnNlUGF0Y2hlc1xuXHRcdFx0XHQpXG5cdFx0XHRjYXNlIEFyY2hUeXBlLkFycmF5OlxuXHRcdFx0XHRyZXR1cm4gZ2VuZXJhdGVBcnJheVBhdGNoZXMoc3RhdGUsIGJhc2VQYXRoLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcylcblx0XHRcdGNhc2UgQXJjaFR5cGUuU2V0OlxuXHRcdFx0XHRyZXR1cm4gZ2VuZXJhdGVTZXRQYXRjaGVzKFxuXHRcdFx0XHRcdChzdGF0ZSBhcyBhbnkpIGFzIFNldFN0YXRlLFxuXHRcdFx0XHRcdGJhc2VQYXRoLFxuXHRcdFx0XHRcdHBhdGNoZXMsXG5cdFx0XHRcdFx0aW52ZXJzZVBhdGNoZXNcblx0XHRcdFx0KVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlQXJyYXlQYXRjaGVzKFxuXHRcdHN0YXRlOiBQcm94eUFycmF5U3RhdGUsXG5cdFx0YmFzZVBhdGg6IFBhdGNoUGF0aCxcblx0XHRwYXRjaGVzOiBQYXRjaFtdLFxuXHRcdGludmVyc2VQYXRjaGVzOiBQYXRjaFtdXG5cdCkge1xuXHRcdGxldCB7YmFzZV8sIGFzc2lnbmVkX30gPSBzdGF0ZVxuXHRcdGxldCBjb3B5XyA9IHN0YXRlLmNvcHlfIVxuXG5cdFx0Ly8gUmVkdWNlIGNvbXBsZXhpdHkgYnkgZW5zdXJpbmcgYGJhc2VgIGlzIG5ldmVyIGxvbmdlci5cblx0XHRpZiAoY29weV8ubGVuZ3RoIDwgYmFzZV8ubGVuZ3RoKSB7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHQ7W2Jhc2VfLCBjb3B5X10gPSBbY29weV8sIGJhc2VfXVxuXHRcdFx0O1twYXRjaGVzLCBpbnZlcnNlUGF0Y2hlc10gPSBbaW52ZXJzZVBhdGNoZXMsIHBhdGNoZXNdXG5cdFx0fVxuXG5cdFx0Ly8gUHJvY2VzcyByZXBsYWNlZCBpbmRpY2VzLlxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYmFzZV8ubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChhc3NpZ25lZF9baV0gJiYgY29weV9baV0gIT09IGJhc2VfW2ldKSB7XG5cdFx0XHRcdGNvbnN0IHBhdGggPSBiYXNlUGF0aC5jb25jYXQoW2ldKVxuXHRcdFx0XHRwYXRjaGVzLnB1c2goe1xuXHRcdFx0XHRcdG9wOiBSRVBMQUNFLFxuXHRcdFx0XHRcdHBhdGgsXG5cdFx0XHRcdFx0Ly8gTmVlZCB0byBtYXliZSBjbG9uZSBpdCwgYXMgaXQgY2FuIGluIGZhY3QgYmUgdGhlIG9yaWdpbmFsIHZhbHVlXG5cdFx0XHRcdFx0Ly8gZHVlIHRvIHRoZSBiYXNlL2NvcHkgaW52ZXJzaW9uIGF0IHRoZSBzdGFydCBvZiB0aGlzIGZ1bmN0aW9uXG5cdFx0XHRcdFx0dmFsdWU6IGNsb25lUGF0Y2hWYWx1ZUlmTmVlZGVkKGNvcHlfW2ldKVxuXHRcdFx0XHR9KVxuXHRcdFx0XHRpbnZlcnNlUGF0Y2hlcy5wdXNoKHtcblx0XHRcdFx0XHRvcDogUkVQTEFDRSxcblx0XHRcdFx0XHRwYXRoLFxuXHRcdFx0XHRcdHZhbHVlOiBjbG9uZVBhdGNoVmFsdWVJZk5lZWRlZChiYXNlX1tpXSlcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBQcm9jZXNzIGFkZGVkIGluZGljZXMuXG5cdFx0Zm9yIChsZXQgaSA9IGJhc2VfLmxlbmd0aDsgaSA8IGNvcHlfLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBwYXRoID0gYmFzZVBhdGguY29uY2F0KFtpXSlcblx0XHRcdHBhdGNoZXMucHVzaCh7XG5cdFx0XHRcdG9wOiBBREQsXG5cdFx0XHRcdHBhdGgsXG5cdFx0XHRcdC8vIE5lZWQgdG8gbWF5YmUgY2xvbmUgaXQsIGFzIGl0IGNhbiBpbiBmYWN0IGJlIHRoZSBvcmlnaW5hbCB2YWx1ZVxuXHRcdFx0XHQvLyBkdWUgdG8gdGhlIGJhc2UvY29weSBpbnZlcnNpb24gYXQgdGhlIHN0YXJ0IG9mIHRoaXMgZnVuY3Rpb25cblx0XHRcdFx0dmFsdWU6IGNsb25lUGF0Y2hWYWx1ZUlmTmVlZGVkKGNvcHlfW2ldKVxuXHRcdFx0fSlcblx0XHR9XG5cdFx0Zm9yIChsZXQgaSA9IGNvcHlfLmxlbmd0aCAtIDE7IGJhc2VfLmxlbmd0aCA8PSBpOyAtLWkpIHtcblx0XHRcdGNvbnN0IHBhdGggPSBiYXNlUGF0aC5jb25jYXQoW2ldKVxuXHRcdFx0aW52ZXJzZVBhdGNoZXMucHVzaCh7XG5cdFx0XHRcdG9wOiBSRU1PVkUsXG5cdFx0XHRcdHBhdGhcblx0XHRcdH0pXG5cdFx0fVxuXHR9XG5cblx0Ly8gVGhpcyBpcyB1c2VkIGZvciBib3RoIE1hcCBvYmplY3RzIGFuZCBub3JtYWwgb2JqZWN0cy5cblx0ZnVuY3Rpb24gZ2VuZXJhdGVQYXRjaGVzRnJvbUFzc2lnbmVkKFxuXHRcdHN0YXRlOiBNYXBTdGF0ZSB8IFByb3h5T2JqZWN0U3RhdGUsXG5cdFx0YmFzZVBhdGg6IFBhdGNoUGF0aCxcblx0XHRwYXRjaGVzOiBQYXRjaFtdLFxuXHRcdGludmVyc2VQYXRjaGVzOiBQYXRjaFtdXG5cdCkge1xuXHRcdGNvbnN0IHtiYXNlXywgY29weV99ID0gc3RhdGVcblx0XHRlYWNoKHN0YXRlLmFzc2lnbmVkXyEsIChrZXksIGFzc2lnbmVkVmFsdWUpID0+IHtcblx0XHRcdGNvbnN0IG9yaWdWYWx1ZSA9IGdldChiYXNlXywga2V5KVxuXHRcdFx0Y29uc3QgdmFsdWUgPSBnZXQoY29weV8hLCBrZXkpXG5cdFx0XHRjb25zdCBvcCA9ICFhc3NpZ25lZFZhbHVlID8gUkVNT1ZFIDogaGFzKGJhc2VfLCBrZXkpID8gUkVQTEFDRSA6IEFERFxuXHRcdFx0aWYgKG9yaWdWYWx1ZSA9PT0gdmFsdWUgJiYgb3AgPT09IFJFUExBQ0UpIHJldHVyblxuXHRcdFx0Y29uc3QgcGF0aCA9IGJhc2VQYXRoLmNvbmNhdChrZXkgYXMgYW55KVxuXHRcdFx0cGF0Y2hlcy5wdXNoKG9wID09PSBSRU1PVkUgPyB7b3AsIHBhdGh9IDoge29wLCBwYXRoLCB2YWx1ZX0pXG5cdFx0XHRpbnZlcnNlUGF0Y2hlcy5wdXNoKFxuXHRcdFx0XHRvcCA9PT0gQUREXG5cdFx0XHRcdFx0PyB7b3A6IFJFTU9WRSwgcGF0aH1cblx0XHRcdFx0XHQ6IG9wID09PSBSRU1PVkVcblx0XHRcdFx0XHQ/IHtvcDogQURELCBwYXRoLCB2YWx1ZTogY2xvbmVQYXRjaFZhbHVlSWZOZWVkZWQob3JpZ1ZhbHVlKX1cblx0XHRcdFx0XHQ6IHtvcDogUkVQTEFDRSwgcGF0aCwgdmFsdWU6IGNsb25lUGF0Y2hWYWx1ZUlmTmVlZGVkKG9yaWdWYWx1ZSl9XG5cdFx0XHQpXG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlU2V0UGF0Y2hlcyhcblx0XHRzdGF0ZTogU2V0U3RhdGUsXG5cdFx0YmFzZVBhdGg6IFBhdGNoUGF0aCxcblx0XHRwYXRjaGVzOiBQYXRjaFtdLFxuXHRcdGludmVyc2VQYXRjaGVzOiBQYXRjaFtdXG5cdCkge1xuXHRcdGxldCB7YmFzZV8sIGNvcHlffSA9IHN0YXRlXG5cblx0XHRsZXQgaSA9IDBcblx0XHRiYXNlXy5mb3JFYWNoKCh2YWx1ZTogYW55KSA9PiB7XG5cdFx0XHRpZiAoIWNvcHlfIS5oYXModmFsdWUpKSB7XG5cdFx0XHRcdGNvbnN0IHBhdGggPSBiYXNlUGF0aC5jb25jYXQoW2ldKVxuXHRcdFx0XHRwYXRjaGVzLnB1c2goe1xuXHRcdFx0XHRcdG9wOiBSRU1PVkUsXG5cdFx0XHRcdFx0cGF0aCxcblx0XHRcdFx0XHR2YWx1ZVxuXHRcdFx0XHR9KVxuXHRcdFx0XHRpbnZlcnNlUGF0Y2hlcy51bnNoaWZ0KHtcblx0XHRcdFx0XHRvcDogQURELFxuXHRcdFx0XHRcdHBhdGgsXG5cdFx0XHRcdFx0dmFsdWVcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHRcdGkrK1xuXHRcdH0pXG5cdFx0aSA9IDBcblx0XHRjb3B5XyEuZm9yRWFjaCgodmFsdWU6IGFueSkgPT4ge1xuXHRcdFx0aWYgKCFiYXNlXy5oYXModmFsdWUpKSB7XG5cdFx0XHRcdGNvbnN0IHBhdGggPSBiYXNlUGF0aC5jb25jYXQoW2ldKVxuXHRcdFx0XHRwYXRjaGVzLnB1c2goe1xuXHRcdFx0XHRcdG9wOiBBREQsXG5cdFx0XHRcdFx0cGF0aCxcblx0XHRcdFx0XHR2YWx1ZVxuXHRcdFx0XHR9KVxuXHRcdFx0XHRpbnZlcnNlUGF0Y2hlcy51bnNoaWZ0KHtcblx0XHRcdFx0XHRvcDogUkVNT1ZFLFxuXHRcdFx0XHRcdHBhdGgsXG5cdFx0XHRcdFx0dmFsdWVcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHRcdGkrK1xuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZVJlcGxhY2VtZW50UGF0Y2hlc18oXG5cdFx0YmFzZVZhbHVlOiBhbnksXG5cdFx0cmVwbGFjZW1lbnQ6IGFueSxcblx0XHRwYXRjaGVzOiBQYXRjaFtdLFxuXHRcdGludmVyc2VQYXRjaGVzOiBQYXRjaFtdXG5cdCk6IHZvaWQge1xuXHRcdHBhdGNoZXMucHVzaCh7XG5cdFx0XHRvcDogUkVQTEFDRSxcblx0XHRcdHBhdGg6IFtdLFxuXHRcdFx0dmFsdWU6IHJlcGxhY2VtZW50ID09PSBOT1RISU5HID8gdW5kZWZpbmVkIDogcmVwbGFjZW1lbnRcblx0XHR9KVxuXHRcdGludmVyc2VQYXRjaGVzLnB1c2goe1xuXHRcdFx0b3A6IFJFUExBQ0UsXG5cdFx0XHRwYXRoOiBbXSxcblx0XHRcdHZhbHVlOiBiYXNlVmFsdWVcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gYXBwbHlQYXRjaGVzXzxUPihkcmFmdDogVCwgcGF0Y2hlczogUGF0Y2hbXSk6IFQge1xuXHRcdHBhdGNoZXMuZm9yRWFjaChwYXRjaCA9PiB7XG5cdFx0XHRjb25zdCB7cGF0aCwgb3B9ID0gcGF0Y2hcblxuXHRcdFx0bGV0IGJhc2U6IGFueSA9IGRyYWZ0XG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoIC0gMTsgaSsrKSB7XG5cdFx0XHRcdGNvbnN0IHBhcmVudFR5cGUgPSBnZXRBcmNodHlwZShiYXNlKVxuXHRcdFx0XHRsZXQgcCA9IHBhdGhbaV1cblx0XHRcdFx0aWYgKHR5cGVvZiBwICE9PSBcInN0cmluZ1wiICYmIHR5cGVvZiBwICE9PSBcIm51bWJlclwiKSB7XG5cdFx0XHRcdFx0cCA9IFwiXCIgKyBwXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTZWUgIzczOCwgYXZvaWQgcHJvdG90eXBlIHBvbGx1dGlvblxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0KHBhcmVudFR5cGUgPT09IEFyY2hUeXBlLk9iamVjdCB8fCBwYXJlbnRUeXBlID09PSBBcmNoVHlwZS5BcnJheSkgJiZcblx0XHRcdFx0XHQocCA9PT0gXCJfX3Byb3RvX19cIiB8fCBwID09PSBcImNvbnN0cnVjdG9yXCIpXG5cdFx0XHRcdClcblx0XHRcdFx0XHRkaWUoZXJyb3JPZmZzZXQgKyAzKVxuXHRcdFx0XHRpZiAodHlwZW9mIGJhc2UgPT09IFwiZnVuY3Rpb25cIiAmJiBwID09PSBcInByb3RvdHlwZVwiKVxuXHRcdFx0XHRcdGRpZShlcnJvck9mZnNldCArIDMpXG5cdFx0XHRcdGJhc2UgPSBnZXQoYmFzZSwgcClcblx0XHRcdFx0aWYgKHR5cGVvZiBiYXNlICE9PSBcIm9iamVjdFwiKSBkaWUoZXJyb3JPZmZzZXQgKyAyLCBwYXRoLmpvaW4oXCIvXCIpKVxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCB0eXBlID0gZ2V0QXJjaHR5cGUoYmFzZSlcblx0XHRcdGNvbnN0IHZhbHVlID0gZGVlcENsb25lUGF0Y2hWYWx1ZShwYXRjaC52YWx1ZSkgLy8gdXNlZCB0byBjbG9uZSBwYXRjaCB0byBlbnN1cmUgb3JpZ2luYWwgcGF0Y2ggaXMgbm90IG1vZGlmaWVkLCBzZWUgIzQxMVxuXHRcdFx0Y29uc3Qga2V5ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG5cdFx0XHRzd2l0Y2ggKG9wKSB7XG5cdFx0XHRcdGNhc2UgUkVQTEFDRTpcblx0XHRcdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0XHRcdGNhc2UgQXJjaFR5cGUuTWFwOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYmFzZS5zZXQoa2V5LCB2YWx1ZSlcblx0XHRcdFx0XHRcdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdFx0XHRcdFx0XHRjYXNlIEFyY2hUeXBlLlNldDpcblx0XHRcdFx0XHRcdFx0ZGllKGVycm9yT2Zmc2V0KVxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Ly8gaWYgdmFsdWUgaXMgYW4gb2JqZWN0LCB0aGVuIGl0J3MgYXNzaWduZWQgYnkgcmVmZXJlbmNlXG5cdFx0XHRcdFx0XHRcdC8vIGluIHRoZSBmb2xsb3dpbmcgYWRkIG9yIHJlbW92ZSBvcHMsIHRoZSB2YWx1ZSBmaWVsZCBpbnNpZGUgdGhlIHBhdGNoIHdpbGwgYWxzbyBiZSBtb2RpZnllZFxuXHRcdFx0XHRcdFx0XHQvLyBzbyB3ZSB1c2UgdmFsdWUgZnJvbSB0aGUgY2xvbmVkIHBhdGNoXG5cdFx0XHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0XHRcdFx0cmV0dXJuIChiYXNlW2tleV0gPSB2YWx1ZSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdGNhc2UgQUREOlxuXHRcdFx0XHRcdHN3aXRjaCAodHlwZSkge1xuXHRcdFx0XHRcdFx0Y2FzZSBBcmNoVHlwZS5BcnJheTpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGtleSA9PT0gXCItXCJcblx0XHRcdFx0XHRcdFx0XHQ/IGJhc2UucHVzaCh2YWx1ZSlcblx0XHRcdFx0XHRcdFx0XHQ6IGJhc2Uuc3BsaWNlKGtleSBhcyBhbnksIDAsIHZhbHVlKVxuXHRcdFx0XHRcdFx0Y2FzZSBBcmNoVHlwZS5NYXA6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBiYXNlLnNldChrZXksIHZhbHVlKVxuXHRcdFx0XHRcdFx0Y2FzZSBBcmNoVHlwZS5TZXQ6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBiYXNlLmFkZCh2YWx1ZSlcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdHJldHVybiAoYmFzZVtrZXldID0gdmFsdWUpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRjYXNlIFJFTU9WRTpcblx0XHRcdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0XHRcdGNhc2UgQXJjaFR5cGUuQXJyYXk6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBiYXNlLnNwbGljZShrZXkgYXMgYW55LCAxKVxuXHRcdFx0XHRcdFx0Y2FzZSBBcmNoVHlwZS5NYXA6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBiYXNlLmRlbGV0ZShrZXkpXG5cdFx0XHRcdFx0XHRjYXNlIEFyY2hUeXBlLlNldDpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJhc2UuZGVsZXRlKHBhdGNoLnZhbHVlKVxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGRlbGV0ZSBiYXNlW2tleV1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0ZGllKGVycm9yT2Zmc2V0ICsgMSwgb3ApXG5cdFx0XHR9XG5cdFx0fSlcblxuXHRcdHJldHVybiBkcmFmdFxuXHR9XG5cblx0Ly8gb3B0aW1pemU6IHRoaXMgaXMgcXVpdGUgYSBwZXJmb3JtYW5jZSBoaXQsIGNhbiB3ZSBkZXRlY3QgaW50ZWxsaWdlbnRseSB3aGVuIGl0IGlzIG5lZWRlZD9cblx0Ly8gRS5nLiBhdXRvLWRyYWZ0IHdoZW4gbmV3IG9iamVjdHMgZnJvbSBvdXRzaWRlIGFyZSBhc3NpZ25lZCBhbmQgbW9kaWZpZWQ/XG5cdC8vIChTZWUgZmFpbGluZyB0ZXN0IHdoZW4gZGVlcENsb25lIGp1c3QgcmV0dXJucyBvYmopXG5cdGZ1bmN0aW9uIGRlZXBDbG9uZVBhdGNoVmFsdWU8VD4ob2JqOiBUKTogVFxuXHRmdW5jdGlvbiBkZWVwQ2xvbmVQYXRjaFZhbHVlKG9iajogYW55KSB7XG5cdFx0aWYgKCFpc0RyYWZ0YWJsZShvYmopKSByZXR1cm4gb2JqXG5cdFx0aWYgKEFycmF5LmlzQXJyYXkob2JqKSkgcmV0dXJuIG9iai5tYXAoZGVlcENsb25lUGF0Y2hWYWx1ZSlcblx0XHRpZiAoaXNNYXAob2JqKSlcblx0XHRcdHJldHVybiBuZXcgTWFwKFxuXHRcdFx0XHRBcnJheS5mcm9tKG9iai5lbnRyaWVzKCkpLm1hcCgoW2ssIHZdKSA9PiBbaywgZGVlcENsb25lUGF0Y2hWYWx1ZSh2KV0pXG5cdFx0XHQpXG5cdFx0aWYgKGlzU2V0KG9iaikpIHJldHVybiBuZXcgU2V0KEFycmF5LmZyb20ob2JqKS5tYXAoZGVlcENsb25lUGF0Y2hWYWx1ZSkpXG5cdFx0Y29uc3QgY2xvbmVkID0gT2JqZWN0LmNyZWF0ZShnZXRQcm90b3R5cGVPZihvYmopKVxuXHRcdGZvciAoY29uc3Qga2V5IGluIG9iaikgY2xvbmVkW2tleV0gPSBkZWVwQ2xvbmVQYXRjaFZhbHVlKG9ialtrZXldKVxuXHRcdGlmIChoYXMob2JqLCBpbW1lcmFibGUpKSBjbG9uZWRbaW1tZXJhYmxlXSA9IG9ialtpbW1lcmFibGVdXG5cdFx0cmV0dXJuIGNsb25lZFxuXHR9XG5cblx0ZnVuY3Rpb24gY2xvbmVQYXRjaFZhbHVlSWZOZWVkZWQ8VD4ob2JqOiBUKTogVCB7XG5cdFx0aWYgKGlzRHJhZnQob2JqKSkge1xuXHRcdFx0cmV0dXJuIGRlZXBDbG9uZVBhdGNoVmFsdWUob2JqKVxuXHRcdH0gZWxzZSByZXR1cm4gb2JqXG5cdH1cblxuXHRsb2FkUGx1Z2luKFwiUGF0Y2hlc1wiLCB7XG5cdFx0YXBwbHlQYXRjaGVzXyxcblx0XHRnZW5lcmF0ZVBhdGNoZXNfLFxuXHRcdGdlbmVyYXRlUmVwbGFjZW1lbnRQYXRjaGVzX1xuXHR9KVxufVxuIiwgIi8vIHR5cGVzIG9ubHkhXG5pbXBvcnQge1xuXHRJbW1lclN0YXRlLFxuXHRBbnlNYXAsXG5cdEFueVNldCxcblx0TWFwU3RhdGUsXG5cdFNldFN0YXRlLFxuXHREUkFGVF9TVEFURSxcblx0Z2V0Q3VycmVudFNjb3BlLFxuXHRsYXRlc3QsXG5cdGlzRHJhZnRhYmxlLFxuXHRjcmVhdGVQcm94eSxcblx0bG9hZFBsdWdpbixcblx0bWFya0NoYW5nZWQsXG5cdGRpZSxcblx0QXJjaFR5cGUsXG5cdGVhY2hcbn0gZnJvbSBcIi4uL2ludGVybmFsXCJcblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZU1hcFNldCgpIHtcblx0Y2xhc3MgRHJhZnRNYXAgZXh0ZW5kcyBNYXAge1xuXHRcdFtEUkFGVF9TVEFURV06IE1hcFN0YXRlXG5cblx0XHRjb25zdHJ1Y3Rvcih0YXJnZXQ6IEFueU1hcCwgcGFyZW50PzogSW1tZXJTdGF0ZSkge1xuXHRcdFx0c3VwZXIoKVxuXHRcdFx0dGhpc1tEUkFGVF9TVEFURV0gPSB7XG5cdFx0XHRcdHR5cGVfOiBBcmNoVHlwZS5NYXAsXG5cdFx0XHRcdHBhcmVudF86IHBhcmVudCxcblx0XHRcdFx0c2NvcGVfOiBwYXJlbnQgPyBwYXJlbnQuc2NvcGVfIDogZ2V0Q3VycmVudFNjb3BlKCkhLFxuXHRcdFx0XHRtb2RpZmllZF86IGZhbHNlLFxuXHRcdFx0XHRmaW5hbGl6ZWRfOiBmYWxzZSxcblx0XHRcdFx0Y29weV86IHVuZGVmaW5lZCxcblx0XHRcdFx0YXNzaWduZWRfOiB1bmRlZmluZWQsXG5cdFx0XHRcdGJhc2VfOiB0YXJnZXQsXG5cdFx0XHRcdGRyYWZ0XzogdGhpcyBhcyBhbnksXG5cdFx0XHRcdGlzTWFudWFsXzogZmFsc2UsXG5cdFx0XHRcdHJldm9rZWRfOiBmYWxzZVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGdldCBzaXplKCk6IG51bWJlciB7XG5cdFx0XHRyZXR1cm4gbGF0ZXN0KHRoaXNbRFJBRlRfU1RBVEVdKS5zaXplXG5cdFx0fVxuXG5cdFx0aGFzKGtleTogYW55KTogYm9vbGVhbiB7XG5cdFx0XHRyZXR1cm4gbGF0ZXN0KHRoaXNbRFJBRlRfU1RBVEVdKS5oYXMoa2V5KVxuXHRcdH1cblxuXHRcdHNldChrZXk6IGFueSwgdmFsdWU6IGFueSkge1xuXHRcdFx0Y29uc3Qgc3RhdGU6IE1hcFN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV1cblx0XHRcdGFzc2VydFVucmV2b2tlZChzdGF0ZSlcblx0XHRcdGlmICghbGF0ZXN0KHN0YXRlKS5oYXMoa2V5KSB8fCBsYXRlc3Qoc3RhdGUpLmdldChrZXkpICE9PSB2YWx1ZSkge1xuXHRcdFx0XHRwcmVwYXJlTWFwQ29weShzdGF0ZSlcblx0XHRcdFx0bWFya0NoYW5nZWQoc3RhdGUpXG5cdFx0XHRcdHN0YXRlLmFzc2lnbmVkXyEuc2V0KGtleSwgdHJ1ZSlcblx0XHRcdFx0c3RhdGUuY29weV8hLnNldChrZXksIHZhbHVlKVxuXHRcdFx0XHRzdGF0ZS5hc3NpZ25lZF8hLnNldChrZXksIHRydWUpXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpc1xuXHRcdH1cblxuXHRcdGRlbGV0ZShrZXk6IGFueSk6IGJvb2xlYW4ge1xuXHRcdFx0aWYgKCF0aGlzLmhhcyhrZXkpKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZVxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzdGF0ZTogTWFwU3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXVxuXHRcdFx0YXNzZXJ0VW5yZXZva2VkKHN0YXRlKVxuXHRcdFx0cHJlcGFyZU1hcENvcHkoc3RhdGUpXG5cdFx0XHRtYXJrQ2hhbmdlZChzdGF0ZSlcblx0XHRcdGlmIChzdGF0ZS5iYXNlXy5oYXMoa2V5KSkge1xuXHRcdFx0XHRzdGF0ZS5hc3NpZ25lZF8hLnNldChrZXksIGZhbHNlKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3RhdGUuYXNzaWduZWRfIS5kZWxldGUoa2V5KVxuXHRcdFx0fVxuXHRcdFx0c3RhdGUuY29weV8hLmRlbGV0ZShrZXkpXG5cdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdH1cblxuXHRcdGNsZWFyKCkge1xuXHRcdFx0Y29uc3Qgc3RhdGU6IE1hcFN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV1cblx0XHRcdGFzc2VydFVucmV2b2tlZChzdGF0ZSlcblx0XHRcdGlmIChsYXRlc3Qoc3RhdGUpLnNpemUpIHtcblx0XHRcdFx0cHJlcGFyZU1hcENvcHkoc3RhdGUpXG5cdFx0XHRcdG1hcmtDaGFuZ2VkKHN0YXRlKVxuXHRcdFx0XHRzdGF0ZS5hc3NpZ25lZF8gPSBuZXcgTWFwKClcblx0XHRcdFx0ZWFjaChzdGF0ZS5iYXNlXywga2V5ID0+IHtcblx0XHRcdFx0XHRzdGF0ZS5hc3NpZ25lZF8hLnNldChrZXksIGZhbHNlKVxuXHRcdFx0XHR9KVxuXHRcdFx0XHRzdGF0ZS5jb3B5XyEuY2xlYXIoKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvckVhY2goY2I6ICh2YWx1ZTogYW55LCBrZXk6IGFueSwgc2VsZjogYW55KSA9PiB2b2lkLCB0aGlzQXJnPzogYW55KSB7XG5cdFx0XHRjb25zdCBzdGF0ZTogTWFwU3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXVxuXHRcdFx0bGF0ZXN0KHN0YXRlKS5mb3JFYWNoKChfdmFsdWU6IGFueSwga2V5OiBhbnksIF9tYXA6IGFueSkgPT4ge1xuXHRcdFx0XHRjYi5jYWxsKHRoaXNBcmcsIHRoaXMuZ2V0KGtleSksIGtleSwgdGhpcylcblx0XHRcdH0pXG5cdFx0fVxuXG5cdFx0Z2V0KGtleTogYW55KTogYW55IHtcblx0XHRcdGNvbnN0IHN0YXRlOiBNYXBTdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdXG5cdFx0XHRhc3NlcnRVbnJldm9rZWQoc3RhdGUpXG5cdFx0XHRjb25zdCB2YWx1ZSA9IGxhdGVzdChzdGF0ZSkuZ2V0KGtleSlcblx0XHRcdGlmIChzdGF0ZS5maW5hbGl6ZWRfIHx8ICFpc0RyYWZ0YWJsZSh2YWx1ZSkpIHtcblx0XHRcdFx0cmV0dXJuIHZhbHVlXG5cdFx0XHR9XG5cdFx0XHRpZiAodmFsdWUgIT09IHN0YXRlLmJhc2VfLmdldChrZXkpKSB7XG5cdFx0XHRcdHJldHVybiB2YWx1ZSAvLyBlaXRoZXIgYWxyZWFkeSBkcmFmdGVkIG9yIHJlYXNzaWduZWRcblx0XHRcdH1cblx0XHRcdC8vIGRlc3BpdGUgd2hhdCBpdCBsb29rcywgdGhpcyBjcmVhdGVzIGEgZHJhZnQgb25seSBvbmNlLCBzZWUgYWJvdmUgY29uZGl0aW9uXG5cdFx0XHRjb25zdCBkcmFmdCA9IGNyZWF0ZVByb3h5KHZhbHVlLCBzdGF0ZSlcblx0XHRcdHByZXBhcmVNYXBDb3B5KHN0YXRlKVxuXHRcdFx0c3RhdGUuY29weV8hLnNldChrZXksIGRyYWZ0KVxuXHRcdFx0cmV0dXJuIGRyYWZ0XG5cdFx0fVxuXG5cdFx0a2V5cygpOiBJdGVyYWJsZUl0ZXJhdG9yPGFueT4ge1xuXHRcdFx0cmV0dXJuIGxhdGVzdCh0aGlzW0RSQUZUX1NUQVRFXSkua2V5cygpXG5cdFx0fVxuXG5cdFx0dmFsdWVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8YW55PiB7XG5cdFx0XHRjb25zdCBpdGVyYXRvciA9IHRoaXMua2V5cygpXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRbU3ltYm9sLml0ZXJhdG9yXTogKCkgPT4gdGhpcy52YWx1ZXMoKSxcblx0XHRcdFx0bmV4dDogKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHIgPSBpdGVyYXRvci5uZXh0KClcblx0XHRcdFx0XHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRcdFx0XHRcdGlmIChyLmRvbmUpIHJldHVybiByXG5cdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSB0aGlzLmdldChyLnZhbHVlKVxuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRkb25lOiBmYWxzZSxcblx0XHRcdFx0XHRcdHZhbHVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGFzIGFueVxuXHRcdH1cblxuXHRcdGVudHJpZXMoKTogSXRlcmFibGVJdGVyYXRvcjxbYW55LCBhbnldPiB7XG5cdFx0XHRjb25zdCBpdGVyYXRvciA9IHRoaXMua2V5cygpXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRbU3ltYm9sLml0ZXJhdG9yXTogKCkgPT4gdGhpcy5lbnRyaWVzKCksXG5cdFx0XHRcdG5leHQ6ICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCByID0gaXRlcmF0b3IubmV4dCgpXG5cdFx0XHRcdFx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0XHRcdFx0XHRpZiAoci5kb25lKSByZXR1cm4gclxuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gdGhpcy5nZXQoci52YWx1ZSlcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0ZG9uZTogZmFsc2UsXG5cdFx0XHRcdFx0XHR2YWx1ZTogW3IudmFsdWUsIHZhbHVlXVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBhcyBhbnlcblx0XHR9XG5cblx0XHRbU3ltYm9sLml0ZXJhdG9yXSgpIHtcblx0XHRcdHJldHVybiB0aGlzLmVudHJpZXMoKVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHByb3h5TWFwXzxUIGV4dGVuZHMgQW55TWFwPih0YXJnZXQ6IFQsIHBhcmVudD86IEltbWVyU3RhdGUpOiBUIHtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0cmV0dXJuIG5ldyBEcmFmdE1hcCh0YXJnZXQsIHBhcmVudClcblx0fVxuXG5cdGZ1bmN0aW9uIHByZXBhcmVNYXBDb3B5KHN0YXRlOiBNYXBTdGF0ZSkge1xuXHRcdGlmICghc3RhdGUuY29weV8pIHtcblx0XHRcdHN0YXRlLmFzc2lnbmVkXyA9IG5ldyBNYXAoKVxuXHRcdFx0c3RhdGUuY29weV8gPSBuZXcgTWFwKHN0YXRlLmJhc2VfKVxuXHRcdH1cblx0fVxuXG5cdGNsYXNzIERyYWZ0U2V0IGV4dGVuZHMgU2V0IHtcblx0XHRbRFJBRlRfU1RBVEVdOiBTZXRTdGF0ZVxuXHRcdGNvbnN0cnVjdG9yKHRhcmdldDogQW55U2V0LCBwYXJlbnQ/OiBJbW1lclN0YXRlKSB7XG5cdFx0XHRzdXBlcigpXG5cdFx0XHR0aGlzW0RSQUZUX1NUQVRFXSA9IHtcblx0XHRcdFx0dHlwZV86IEFyY2hUeXBlLlNldCxcblx0XHRcdFx0cGFyZW50XzogcGFyZW50LFxuXHRcdFx0XHRzY29wZV86IHBhcmVudCA/IHBhcmVudC5zY29wZV8gOiBnZXRDdXJyZW50U2NvcGUoKSEsXG5cdFx0XHRcdG1vZGlmaWVkXzogZmFsc2UsXG5cdFx0XHRcdGZpbmFsaXplZF86IGZhbHNlLFxuXHRcdFx0XHRjb3B5XzogdW5kZWZpbmVkLFxuXHRcdFx0XHRiYXNlXzogdGFyZ2V0LFxuXHRcdFx0XHRkcmFmdF86IHRoaXMsXG5cdFx0XHRcdGRyYWZ0c186IG5ldyBNYXAoKSxcblx0XHRcdFx0cmV2b2tlZF86IGZhbHNlLFxuXHRcdFx0XHRpc01hbnVhbF86IGZhbHNlXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Z2V0IHNpemUoKTogbnVtYmVyIHtcblx0XHRcdHJldHVybiBsYXRlc3QodGhpc1tEUkFGVF9TVEFURV0pLnNpemVcblx0XHR9XG5cblx0XHRoYXModmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuXHRcdFx0Y29uc3Qgc3RhdGU6IFNldFN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV1cblx0XHRcdGFzc2VydFVucmV2b2tlZChzdGF0ZSlcblx0XHRcdC8vIGJpdCBvZiB0cmlja2VyeSBoZXJlLCB0byBiZSBhYmxlIHRvIHJlY29nbml6ZSBib3RoIHRoZSB2YWx1ZSwgYW5kIHRoZSBkcmFmdCBvZiBpdHMgdmFsdWVcblx0XHRcdGlmICghc3RhdGUuY29weV8pIHtcblx0XHRcdFx0cmV0dXJuIHN0YXRlLmJhc2VfLmhhcyh2YWx1ZSlcblx0XHRcdH1cblx0XHRcdGlmIChzdGF0ZS5jb3B5Xy5oYXModmFsdWUpKSByZXR1cm4gdHJ1ZVxuXHRcdFx0aWYgKHN0YXRlLmRyYWZ0c18uaGFzKHZhbHVlKSAmJiBzdGF0ZS5jb3B5Xy5oYXMoc3RhdGUuZHJhZnRzXy5nZXQodmFsdWUpKSlcblx0XHRcdFx0cmV0dXJuIHRydWVcblx0XHRcdHJldHVybiBmYWxzZVxuXHRcdH1cblxuXHRcdGFkZCh2YWx1ZTogYW55KTogYW55IHtcblx0XHRcdGNvbnN0IHN0YXRlOiBTZXRTdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdXG5cdFx0XHRhc3NlcnRVbnJldm9rZWQoc3RhdGUpXG5cdFx0XHRpZiAoIXRoaXMuaGFzKHZhbHVlKSkge1xuXHRcdFx0XHRwcmVwYXJlU2V0Q29weShzdGF0ZSlcblx0XHRcdFx0bWFya0NoYW5nZWQoc3RhdGUpXG5cdFx0XHRcdHN0YXRlLmNvcHlfIS5hZGQodmFsdWUpXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpc1xuXHRcdH1cblxuXHRcdGRlbGV0ZSh2YWx1ZTogYW55KTogYW55IHtcblx0XHRcdGlmICghdGhpcy5oYXModmFsdWUpKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZVxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzdGF0ZTogU2V0U3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXVxuXHRcdFx0YXNzZXJ0VW5yZXZva2VkKHN0YXRlKVxuXHRcdFx0cHJlcGFyZVNldENvcHkoc3RhdGUpXG5cdFx0XHRtYXJrQ2hhbmdlZChzdGF0ZSlcblx0XHRcdHJldHVybiAoXG5cdFx0XHRcdHN0YXRlLmNvcHlfIS5kZWxldGUodmFsdWUpIHx8XG5cdFx0XHRcdChzdGF0ZS5kcmFmdHNfLmhhcyh2YWx1ZSlcblx0XHRcdFx0XHQ/IHN0YXRlLmNvcHlfIS5kZWxldGUoc3RhdGUuZHJhZnRzXy5nZXQodmFsdWUpKVxuXHRcdFx0XHRcdDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZmFsc2UpXG5cdFx0XHQpXG5cdFx0fVxuXG5cdFx0Y2xlYXIoKSB7XG5cdFx0XHRjb25zdCBzdGF0ZTogU2V0U3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXVxuXHRcdFx0YXNzZXJ0VW5yZXZva2VkKHN0YXRlKVxuXHRcdFx0aWYgKGxhdGVzdChzdGF0ZSkuc2l6ZSkge1xuXHRcdFx0XHRwcmVwYXJlU2V0Q29weShzdGF0ZSlcblx0XHRcdFx0bWFya0NoYW5nZWQoc3RhdGUpXG5cdFx0XHRcdHN0YXRlLmNvcHlfIS5jbGVhcigpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dmFsdWVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8YW55PiB7XG5cdFx0XHRjb25zdCBzdGF0ZTogU2V0U3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXVxuXHRcdFx0YXNzZXJ0VW5yZXZva2VkKHN0YXRlKVxuXHRcdFx0cHJlcGFyZVNldENvcHkoc3RhdGUpXG5cdFx0XHRyZXR1cm4gc3RhdGUuY29weV8hLnZhbHVlcygpXG5cdFx0fVxuXG5cdFx0ZW50cmllcygpOiBJdGVyYWJsZUl0ZXJhdG9yPFthbnksIGFueV0+IHtcblx0XHRcdGNvbnN0IHN0YXRlOiBTZXRTdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdXG5cdFx0XHRhc3NlcnRVbnJldm9rZWQoc3RhdGUpXG5cdFx0XHRwcmVwYXJlU2V0Q29weShzdGF0ZSlcblx0XHRcdHJldHVybiBzdGF0ZS5jb3B5XyEuZW50cmllcygpXG5cdFx0fVxuXG5cdFx0a2V5cygpOiBJdGVyYWJsZUl0ZXJhdG9yPGFueT4ge1xuXHRcdFx0cmV0dXJuIHRoaXMudmFsdWVzKClcblx0XHR9XG5cblx0XHRbU3ltYm9sLml0ZXJhdG9yXSgpIHtcblx0XHRcdHJldHVybiB0aGlzLnZhbHVlcygpXG5cdFx0fVxuXG5cdFx0Zm9yRWFjaChjYjogYW55LCB0aGlzQXJnPzogYW55KSB7XG5cdFx0XHRjb25zdCBpdGVyYXRvciA9IHRoaXMudmFsdWVzKClcblx0XHRcdGxldCByZXN1bHQgPSBpdGVyYXRvci5uZXh0KClcblx0XHRcdHdoaWxlICghcmVzdWx0LmRvbmUpIHtcblx0XHRcdFx0Y2IuY2FsbCh0aGlzQXJnLCByZXN1bHQudmFsdWUsIHJlc3VsdC52YWx1ZSwgdGhpcylcblx0XHRcdFx0cmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGZ1bmN0aW9uIHByb3h5U2V0XzxUIGV4dGVuZHMgQW55U2V0Pih0YXJnZXQ6IFQsIHBhcmVudD86IEltbWVyU3RhdGUpOiBUIHtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0cmV0dXJuIG5ldyBEcmFmdFNldCh0YXJnZXQsIHBhcmVudClcblx0fVxuXG5cdGZ1bmN0aW9uIHByZXBhcmVTZXRDb3B5KHN0YXRlOiBTZXRTdGF0ZSkge1xuXHRcdGlmICghc3RhdGUuY29weV8pIHtcblx0XHRcdC8vIGNyZWF0ZSBkcmFmdHMgZm9yIGFsbCBlbnRyaWVzIHRvIHByZXNlcnZlIGluc2VydGlvbiBvcmRlclxuXHRcdFx0c3RhdGUuY29weV8gPSBuZXcgU2V0KClcblx0XHRcdHN0YXRlLmJhc2VfLmZvckVhY2godmFsdWUgPT4ge1xuXHRcdFx0XHRpZiAoaXNEcmFmdGFibGUodmFsdWUpKSB7XG5cdFx0XHRcdFx0Y29uc3QgZHJhZnQgPSBjcmVhdGVQcm94eSh2YWx1ZSwgc3RhdGUpXG5cdFx0XHRcdFx0c3RhdGUuZHJhZnRzXy5zZXQodmFsdWUsIGRyYWZ0KVxuXHRcdFx0XHRcdHN0YXRlLmNvcHlfIS5hZGQoZHJhZnQpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3RhdGUuY29weV8hLmFkZCh2YWx1ZSlcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBhc3NlcnRVbnJldm9rZWQoc3RhdGU6IGFueSAvKkVTNVN0YXRlIHwgTWFwU3RhdGUgfCBTZXRTdGF0ZSovKSB7XG5cdFx0aWYgKHN0YXRlLnJldm9rZWRfKSBkaWUoMywgSlNPTi5zdHJpbmdpZnkobGF0ZXN0KHN0YXRlKSkpXG5cdH1cblxuXHRsb2FkUGx1Z2luKFwiTWFwU2V0XCIsIHtwcm94eU1hcF8sIHByb3h5U2V0X30pXG59XG4iLCAiaW1wb3J0IHtcblx0SVByb2R1Y2UsXG5cdElQcm9kdWNlV2l0aFBhdGNoZXMsXG5cdEltbWVyLFxuXHREcmFmdCxcblx0SW1tdXRhYmxlXG59IGZyb20gXCIuL2ludGVybmFsXCJcblxuZXhwb3J0IHtcblx0RHJhZnQsXG5cdEltbXV0YWJsZSxcblx0UGF0Y2gsXG5cdFBhdGNoTGlzdGVuZXIsXG5cdG9yaWdpbmFsLFxuXHRjdXJyZW50LFxuXHRpc0RyYWZ0LFxuXHRpc0RyYWZ0YWJsZSxcblx0Tk9USElORyBhcyBub3RoaW5nLFxuXHREUkFGVEFCTEUgYXMgaW1tZXJhYmxlLFxuXHRmcmVlemUsXG5cdE9iamVjdGlzaFxufSBmcm9tIFwiLi9pbnRlcm5hbFwiXG5cbmNvbnN0IGltbWVyID0gbmV3IEltbWVyKClcblxuLyoqXG4gKiBUaGUgYHByb2R1Y2VgIGZ1bmN0aW9uIHRha2VzIGEgdmFsdWUgYW5kIGEgXCJyZWNpcGUgZnVuY3Rpb25cIiAod2hvc2VcbiAqIHJldHVybiB2YWx1ZSBvZnRlbiBkZXBlbmRzIG9uIHRoZSBiYXNlIHN0YXRlKS4gVGhlIHJlY2lwZSBmdW5jdGlvbiBpc1xuICogZnJlZSB0byBtdXRhdGUgaXRzIGZpcnN0IGFyZ3VtZW50IGhvd2V2ZXIgaXQgd2FudHMuIEFsbCBtdXRhdGlvbnMgYXJlXG4gKiBvbmx5IGV2ZXIgYXBwbGllZCB0byBhIF9fY29weV9fIG9mIHRoZSBiYXNlIHN0YXRlLlxuICpcbiAqIFBhc3Mgb25seSBhIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIFwiY3VycmllZCBwcm9kdWNlclwiIHdoaWNoIHJlbGlldmVzIHlvdVxuICogZnJvbSBwYXNzaW5nIHRoZSByZWNpcGUgZnVuY3Rpb24gZXZlcnkgdGltZS5cbiAqXG4gKiBPbmx5IHBsYWluIG9iamVjdHMgYW5kIGFycmF5cyBhcmUgbWFkZSBtdXRhYmxlLiBBbGwgb3RoZXIgb2JqZWN0cyBhcmVcbiAqIGNvbnNpZGVyZWQgdW5jb3B5YWJsZS5cbiAqXG4gKiBOb3RlOiBUaGlzIGZ1bmN0aW9uIGlzIF9fYm91bmRfXyB0byBpdHMgYEltbWVyYCBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge2FueX0gYmFzZSAtIHRoZSBpbml0aWFsIHN0YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9kdWNlciAtIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSBwcm94eSBvZiB0aGUgYmFzZSBzdGF0ZSBhcyBmaXJzdCBhcmd1bWVudCBhbmQgd2hpY2ggY2FuIGJlIGZyZWVseSBtb2RpZmllZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcGF0Y2hMaXN0ZW5lciAtIG9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2l0aCBhbGwgdGhlIHBhdGNoZXMgcHJvZHVjZWQgaGVyZVxuICogQHJldHVybnMge2FueX0gYSBuZXcgc3RhdGUsIG9yIHRoZSBpbml0aWFsIHN0YXRlIGlmIG5vdGhpbmcgd2FzIG1vZGlmaWVkXG4gKi9cbmV4cG9ydCBjb25zdCBwcm9kdWNlOiBJUHJvZHVjZSA9IGltbWVyLnByb2R1Y2VcblxuLyoqXG4gKiBMaWtlIGBwcm9kdWNlYCwgYnV0IGBwcm9kdWNlV2l0aFBhdGNoZXNgIGFsd2F5cyByZXR1cm5zIGEgdHVwbGVcbiAqIFtuZXh0U3RhdGUsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzXSAoaW5zdGVhZCBvZiBqdXN0IHRoZSBuZXh0IHN0YXRlKVxuICovXG5leHBvcnQgY29uc3QgcHJvZHVjZVdpdGhQYXRjaGVzOiBJUHJvZHVjZVdpdGhQYXRjaGVzID0gaW1tZXIucHJvZHVjZVdpdGhQYXRjaGVzLmJpbmQoXG5cdGltbWVyXG4pXG5cbi8qKlxuICogUGFzcyB0cnVlIHRvIGF1dG9tYXRpY2FsbHkgZnJlZXplIGFsbCBjb3BpZXMgY3JlYXRlZCBieSBJbW1lci5cbiAqXG4gKiBBbHdheXMgZnJlZXplIGJ5IGRlZmF1bHQsIGV2ZW4gaW4gcHJvZHVjdGlvbiBtb2RlXG4gKi9cbmV4cG9ydCBjb25zdCBzZXRBdXRvRnJlZXplID0gaW1tZXIuc2V0QXV0b0ZyZWV6ZS5iaW5kKGltbWVyKVxuXG4vKipcbiAqIFBhc3MgdHJ1ZSB0byBlbmFibGUgc3RyaWN0IHNoYWxsb3cgY29weS5cbiAqXG4gKiBCeSBkZWZhdWx0LCBpbW1lciBkb2VzIG5vdCBjb3B5IHRoZSBvYmplY3QgZGVzY3JpcHRvcnMgc3VjaCBhcyBnZXR0ZXIsIHNldHRlciBhbmQgbm9uLWVudW1yYWJsZSBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgY29uc3Qgc2V0VXNlU3RyaWN0U2hhbGxvd0NvcHkgPSBpbW1lci5zZXRVc2VTdHJpY3RTaGFsbG93Q29weS5iaW5kKGltbWVyKVxuXG4vKipcbiAqIEFwcGx5IGFuIGFycmF5IG9mIEltbWVyIHBhdGNoZXMgdG8gdGhlIGZpcnN0IGFyZ3VtZW50LlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgYSBwcm9kdWNlciwgd2hpY2ggbWVhbnMgY29weS1vbi13cml0ZSBpcyBpbiBlZmZlY3QuXG4gKi9cbmV4cG9ydCBjb25zdCBhcHBseVBhdGNoZXMgPSBpbW1lci5hcHBseVBhdGNoZXMuYmluZChpbW1lcilcblxuLyoqXG4gKiBDcmVhdGUgYW4gSW1tZXIgZHJhZnQgZnJvbSB0aGUgZ2l2ZW4gYmFzZSBzdGF0ZSwgd2hpY2ggbWF5IGJlIGEgZHJhZnQgaXRzZWxmLlxuICogVGhlIGRyYWZ0IGNhbiBiZSBtb2RpZmllZCB1bnRpbCB5b3UgZmluYWxpemUgaXQgd2l0aCB0aGUgYGZpbmlzaERyYWZ0YCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZURyYWZ0ID0gaW1tZXIuY3JlYXRlRHJhZnQuYmluZChpbW1lcilcblxuLyoqXG4gKiBGaW5hbGl6ZSBhbiBJbW1lciBkcmFmdCBmcm9tIGEgYGNyZWF0ZURyYWZ0YCBjYWxsLCByZXR1cm5pbmcgdGhlIGJhc2Ugc3RhdGVcbiAqIChpZiBubyBjaGFuZ2VzIHdlcmUgbWFkZSkgb3IgYSBtb2RpZmllZCBjb3B5LiBUaGUgZHJhZnQgbXVzdCAqbm90KiBiZVxuICogbXV0YXRlZCBhZnRlcndhcmRzLlxuICpcbiAqIFBhc3MgYSBmdW5jdGlvbiBhcyB0aGUgMm5kIGFyZ3VtZW50IHRvIGdlbmVyYXRlIEltbWVyIHBhdGNoZXMgYmFzZWQgb24gdGhlXG4gKiBjaGFuZ2VzIHRoYXQgd2VyZSBtYWRlLlxuICovXG5leHBvcnQgY29uc3QgZmluaXNoRHJhZnQgPSBpbW1lci5maW5pc2hEcmFmdC5iaW5kKGltbWVyKVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaXMgYWN0dWFsbHkgYSBuby1vcCwgYnV0IGNhbiBiZSB1c2VkIHRvIGNhc3QgYW4gaW1tdXRhYmxlIHR5cGVcbiAqIHRvIGFuIGRyYWZ0IHR5cGUgYW5kIG1ha2UgVHlwZVNjcmlwdCBoYXBweVxuICpcbiAqIEBwYXJhbSB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FzdERyYWZ0PFQ+KHZhbHVlOiBUKTogRHJhZnQ8VD4ge1xuXHRyZXR1cm4gdmFsdWUgYXMgYW55XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyBhY3R1YWxseSBhIG5vLW9wLCBidXQgY2FuIGJlIHVzZWQgdG8gY2FzdCBhIG11dGFibGUgdHlwZVxuICogdG8gYW4gaW1tdXRhYmxlIHR5cGUgYW5kIG1ha2UgVHlwZVNjcmlwdCBoYXBweVxuICogQHBhcmFtIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYXN0SW1tdXRhYmxlPFQ+KHZhbHVlOiBUKTogSW1tdXRhYmxlPFQ+IHtcblx0cmV0dXJuIHZhbHVlIGFzIGFueVxufVxuXG5leHBvcnQge0ltbWVyfVxuXG5leHBvcnQge2VuYWJsZVBhdGNoZXN9IGZyb20gXCIuL3BsdWdpbnMvcGF0Y2hlc1wiXG5leHBvcnQge2VuYWJsZU1hcFNldH0gZnJvbSBcIi4vcGx1Z2lucy9tYXBzZXRcIlxuIiwgImltcG9ydCB7IE9wZXJhdGlvbiwgUGF0aCB9IGZyb20gJy4uJ1xuXG4vKipcbiAqIGBQYXRoUmVmYCBvYmplY3RzIGtlZXAgYSBzcGVjaWZpYyBwYXRoIGluIGEgZG9jdW1lbnQgc3luY2VkIG92ZXIgdGltZSBhcyBuZXdcbiAqIG9wZXJhdGlvbnMgYXJlIGFwcGxpZWQgdG8gdGhlIGVkaXRvci4gWW91IGNhbiBhY2Nlc3MgdGhlaXIgYGN1cnJlbnRgIHByb3BlcnR5XG4gKiBhdCBhbnkgdGltZSBmb3IgdGhlIHVwLXRvLWRhdGUgcGF0aCB2YWx1ZS5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFBhdGhSZWYge1xuICBjdXJyZW50OiBQYXRoIHwgbnVsbFxuICBhZmZpbml0eTogJ2ZvcndhcmQnIHwgJ2JhY2t3YXJkJyB8IG51bGxcbiAgdW5yZWYoKTogUGF0aCB8IG51bGxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXRoUmVmSW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIFRyYW5zZm9ybSB0aGUgcGF0aCByZWYncyBjdXJyZW50IHZhbHVlIGJ5IGFuIG9wZXJhdGlvbi5cbiAgICovXG4gIHRyYW5zZm9ybTogKHJlZjogUGF0aFJlZiwgb3A6IE9wZXJhdGlvbikgPT4gdm9pZFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgUGF0aFJlZjogUGF0aFJlZkludGVyZmFjZSA9IHtcbiAgdHJhbnNmb3JtKHJlZjogUGF0aFJlZiwgb3A6IE9wZXJhdGlvbik6IHZvaWQge1xuICAgIGNvbnN0IHsgY3VycmVudCwgYWZmaW5pdHkgfSA9IHJlZlxuXG4gICAgaWYgKGN1cnJlbnQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcGF0aCA9IFBhdGgudHJhbnNmb3JtKGN1cnJlbnQsIG9wLCB7IGFmZmluaXR5IH0pXG4gICAgcmVmLmN1cnJlbnQgPSBwYXRoXG5cbiAgICBpZiAocGF0aCA9PSBudWxsKSB7XG4gICAgICByZWYudW5yZWYoKVxuICAgIH1cbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBPcGVyYXRpb24sIFBvaW50IH0gZnJvbSAnLi4nXG5pbXBvcnQgeyBUZXh0RGlyZWN0aW9uIH0gZnJvbSAnLi4vdHlwZXMvdHlwZXMnXG5cbi8qKlxuICogYFBvaW50UmVmYCBvYmplY3RzIGtlZXAgYSBzcGVjaWZpYyBwb2ludCBpbiBhIGRvY3VtZW50IHN5bmNlZCBvdmVyIHRpbWUgYXMgbmV3XG4gKiBvcGVyYXRpb25zIGFyZSBhcHBsaWVkIHRvIHRoZSBlZGl0b3IuIFlvdSBjYW4gYWNjZXNzIHRoZWlyIGBjdXJyZW50YCBwcm9wZXJ0eVxuICogYXQgYW55IHRpbWUgZm9yIHRoZSB1cC10by1kYXRlIHBvaW50IHZhbHVlLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9pbnRSZWYge1xuICBjdXJyZW50OiBQb2ludCB8IG51bGxcbiAgYWZmaW5pdHk6IFRleHREaXJlY3Rpb24gfCBudWxsXG4gIHVucmVmKCk6IFBvaW50IHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvaW50UmVmSW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIFRyYW5zZm9ybSB0aGUgcG9pbnQgcmVmJ3MgY3VycmVudCB2YWx1ZSBieSBhbiBvcGVyYXRpb24uXG4gICAqL1xuICB0cmFuc2Zvcm06IChyZWY6IFBvaW50UmVmLCBvcDogT3BlcmF0aW9uKSA9PiB2b2lkXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBQb2ludFJlZjogUG9pbnRSZWZJbnRlcmZhY2UgPSB7XG4gIHRyYW5zZm9ybShyZWY6IFBvaW50UmVmLCBvcDogT3BlcmF0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgeyBjdXJyZW50LCBhZmZpbml0eSB9ID0gcmVmXG5cbiAgICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBwb2ludCA9IFBvaW50LnRyYW5zZm9ybShjdXJyZW50LCBvcCwgeyBhZmZpbml0eSB9KVxuICAgIHJlZi5jdXJyZW50ID0gcG9pbnRcblxuICAgIGlmIChwb2ludCA9PSBudWxsKSB7XG4gICAgICByZWYudW5yZWYoKVxuICAgIH1cbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBPcGVyYXRpb24sIFJhbmdlIH0gZnJvbSAnLi4nXG5cbi8qKlxuICogYFJhbmdlUmVmYCBvYmplY3RzIGtlZXAgYSBzcGVjaWZpYyByYW5nZSBpbiBhIGRvY3VtZW50IHN5bmNlZCBvdmVyIHRpbWUgYXMgbmV3XG4gKiBvcGVyYXRpb25zIGFyZSBhcHBsaWVkIHRvIHRoZSBlZGl0b3IuIFlvdSBjYW4gYWNjZXNzIHRoZWlyIGBjdXJyZW50YCBwcm9wZXJ0eVxuICogYXQgYW55IHRpbWUgZm9yIHRoZSB1cC10by1kYXRlIHJhbmdlIHZhbHVlLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmFuZ2VSZWYge1xuICBjdXJyZW50OiBSYW5nZSB8IG51bGxcbiAgYWZmaW5pdHk6ICdmb3J3YXJkJyB8ICdiYWNrd2FyZCcgfCAnb3V0d2FyZCcgfCAnaW53YXJkJyB8IG51bGxcbiAgdW5yZWYoKTogUmFuZ2UgfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmFuZ2VSZWZJbnRlcmZhY2Uge1xuICAvKipcbiAgICogVHJhbnNmb3JtIHRoZSByYW5nZSByZWYncyBjdXJyZW50IHZhbHVlIGJ5IGFuIG9wZXJhdGlvbi5cbiAgICovXG4gIHRyYW5zZm9ybTogKHJlZjogUmFuZ2VSZWYsIG9wOiBPcGVyYXRpb24pID0+IHZvaWRcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFJhbmdlUmVmOiBSYW5nZVJlZkludGVyZmFjZSA9IHtcbiAgdHJhbnNmb3JtKHJlZjogUmFuZ2VSZWYsIG9wOiBPcGVyYXRpb24pOiB2b2lkIHtcbiAgICBjb25zdCB7IGN1cnJlbnQsIGFmZmluaXR5IH0gPSByZWZcblxuICAgIGlmIChjdXJyZW50ID09IG51bGwpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHBhdGggPSBSYW5nZS50cmFuc2Zvcm0oY3VycmVudCwgb3AsIHsgYWZmaW5pdHkgfSlcbiAgICByZWYuY3VycmVudCA9IHBhdGhcblxuICAgIGlmIChwYXRoID09IG51bGwpIHtcbiAgICAgIHJlZi51bnJlZigpXG4gICAgfVxuICB9LFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgUGF0aCwgUGF0aFJlZiwgUG9pbnRSZWYsIFJhbmdlUmVmIH0gZnJvbSAnLi4nXG5cbmV4cG9ydCBjb25zdCBESVJUWV9QQVRIUzogV2Vha01hcDxFZGl0b3IsIFBhdGhbXT4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgRElSVFlfUEFUSF9LRVlTOiBXZWFrTWFwPEVkaXRvciwgU2V0PHN0cmluZz4+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IEZMVVNISU5HOiBXZWFrTWFwPEVkaXRvciwgYm9vbGVhbj4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgTk9STUFMSVpJTkc6IFdlYWtNYXA8RWRpdG9yLCBib29sZWFuPiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBQQVRIX1JFRlM6IFdlYWtNYXA8RWRpdG9yLCBTZXQ8UGF0aFJlZj4+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IFBPSU5UX1JFRlM6IFdlYWtNYXA8RWRpdG9yLCBTZXQ8UG9pbnRSZWY+PiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBSQU5HRV9SRUZTOiBXZWFrTWFwPEVkaXRvciwgU2V0PFJhbmdlUmVmPj4gPSBuZXcgV2Vha01hcCgpXG4iLCAiaW1wb3J0IHtcbiAgSW5zZXJ0Tm9kZU9wZXJhdGlvbixcbiAgTWVyZ2VOb2RlT3BlcmF0aW9uLFxuICBNb3ZlTm9kZU9wZXJhdGlvbixcbiAgT3BlcmF0aW9uLFxuICBSZW1vdmVOb2RlT3BlcmF0aW9uLFxuICBTcGxpdE5vZGVPcGVyYXRpb24sXG59IGZyb20gJy4uJ1xuaW1wb3J0IHsgVGV4dERpcmVjdGlvbiB9IGZyb20gJy4uL3R5cGVzL3R5cGVzJ1xuXG4vKipcbiAqIGBQYXRoYCBhcnJheXMgYXJlIGEgbGlzdCBvZiBpbmRleGVzIHRoYXQgZGVzY3JpYmUgYSBub2RlJ3MgZXhhY3QgcG9zaXRpb24gaW5cbiAqIGEgU2xhdGUgbm9kZSB0cmVlLiBBbHRob3VnaCB0aGV5IGFyZSB1c3VhbGx5IHJlbGF0aXZlIHRvIHRoZSByb290IGBFZGl0b3JgXG4gKiBvYmplY3QsIHRoZXkgY2FuIGJlIHJlbGF0aXZlIHRvIGFueSBgTm9kZWAgb2JqZWN0LlxuICovXG5cbmV4cG9ydCB0eXBlIFBhdGggPSBudW1iZXJbXVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhdGhBbmNlc3RvcnNPcHRpb25zIHtcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXRoTGV2ZWxzT3B0aW9ucyB7XG4gIHJldmVyc2U/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aFRyYW5zZm9ybU9wdGlvbnMge1xuICBhZmZpbml0eT86IFRleHREaXJlY3Rpb24gfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aEludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGFuY2VzdG9yIHBhdGhzIGZvciBhIGdpdmVuIHBhdGguXG4gICAqXG4gICAqIFRoZSBwYXRocyBhcmUgc29ydGVkIGZyb20gc2hhbGxvd2VzdCB0byBkZWVwZXN0IGFuY2VzdG9yLiBIb3dldmVyLCBpZiB0aGVcbiAgICogYHJldmVyc2U6IHRydWVgIG9wdGlvbiBpcyBwYXNzZWQsIHRoZXkgYXJlIHJldmVyc2VkLlxuICAgKi9cbiAgYW5jZXN0b3JzOiAocGF0aDogUGF0aCwgb3B0aW9ucz86IFBhdGhBbmNlc3RvcnNPcHRpb25zKSA9PiBQYXRoW11cblxuICAvKipcbiAgICogR2V0IHRoZSBjb21tb24gYW5jZXN0b3IgcGF0aCBvZiB0d28gcGF0aHMuXG4gICAqL1xuICBjb21tb246IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBQYXRoXG5cbiAgLyoqXG4gICAqIENvbXBhcmUgYSBwYXRoIHRvIGFub3RoZXIsIHJldHVybmluZyBhbiBpbnRlZ2VyIGluZGljYXRpbmcgd2hldGhlciB0aGUgcGF0aFxuICAgKiB3YXMgYmVmb3JlLCBhdCwgb3IgYWZ0ZXIgdGhlIG90aGVyLlxuICAgKlxuICAgKiBOb3RlOiBUd28gcGF0aHMgb2YgdW5lcXVhbCBsZW5ndGggY2FuIHN0aWxsIHJlY2VpdmUgYSBgMGAgcmVzdWx0IGlmIG9uZSBpc1xuICAgKiBkaXJlY3RseSBhYm92ZSBvciBiZWxvdyB0aGUgb3RoZXIuIElmIHlvdSB3YW50IGV4YWN0IG1hdGNoaW5nLCB1c2VcbiAgICogW1tQYXRoLmVxdWFsc11dIGluc3RlYWQuXG4gICAqL1xuICBjb21wYXJlOiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gLTEgfCAwIHwgMVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggZW5kcyBhZnRlciBvbmUgb2YgdGhlIGluZGV4ZXMgaW4gYW5vdGhlci5cbiAgICovXG4gIGVuZHNBZnRlcjogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGVuZHMgYXQgb25lIG9mIHRoZSBpbmRleGVzIGluIGFub3RoZXIuXG4gICAqL1xuICBlbmRzQXQ6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBlbmRzIGJlZm9yZSBvbmUgb2YgdGhlIGluZGV4ZXMgaW4gYW5vdGhlci5cbiAgICovXG4gIGVuZHNCZWZvcmU6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBpcyBleGFjdGx5IGVxdWFsIHRvIGFub3RoZXIuXG4gICAqL1xuICBlcXVhbHM6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBwYXRoIG9mIHByZXZpb3VzIHNpYmxpbmcgbm9kZSBleGlzdHNcbiAgICovXG4gIGhhc1ByZXZpb3VzOiAocGF0aDogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggaXMgYWZ0ZXIgYW5vdGhlci5cbiAgICovXG4gIGlzQWZ0ZXI6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBpcyBhbiBhbmNlc3RvciBvZiBhbm90aGVyLlxuICAgKi9cbiAgaXNBbmNlc3RvcjogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGlzIGJlZm9yZSBhbm90aGVyLlxuICAgKi9cbiAgaXNCZWZvcmU6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBpcyBhIGNoaWxkIG9mIGFub3RoZXIuXG4gICAqL1xuICBpc0NoaWxkOiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggaXMgZXF1YWwgdG8gb3IgYW4gYW5jZXN0b3Igb2YgYW5vdGhlci5cbiAgICovXG4gIGlzQ29tbW9uOiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggaXMgYSBkZXNjZW5kYW50IG9mIGFub3RoZXIuXG4gICAqL1xuICBpc0Rlc2NlbmRhbnQ6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBpcyB0aGUgcGFyZW50IG9mIGFub3RoZXIuXG4gICAqL1xuICBpc1BhcmVudDogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaXMgYSB2YWx1ZSBpbXBsZW1lbnRzIHRoZSBgUGF0aGAgaW50ZXJmYWNlLlxuICAgKi9cbiAgaXNQYXRoOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgUGF0aFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggaXMgYSBzaWJsaW5nIG9mIGFub3RoZXIuXG4gICAqL1xuICBpc1NpYmxpbmc6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIEdldCBhIGxpc3Qgb2YgcGF0aHMgYXQgZXZlcnkgbGV2ZWwgZG93biB0byBhIHBhdGguIE5vdGU6IHRoaXMgaXMgdGhlIHNhbWVcbiAgICogYXMgYFBhdGguYW5jZXN0b3JzYCwgYnV0IGluY2x1ZGluZyB0aGUgcGF0aCBpdHNlbGYuXG4gICAqXG4gICAqIFRoZSBwYXRocyBhcmUgc29ydGVkIGZyb20gc2hhbGxvd2VzdCB0byBkZWVwZXN0LiBIb3dldmVyLCBpZiB0aGUgYHJldmVyc2U6XG4gICAqIHRydWVgIG9wdGlvbiBpcyBwYXNzZWQsIHRoZXkgYXJlIHJldmVyc2VkLlxuICAgKi9cbiAgbGV2ZWxzOiAocGF0aDogUGF0aCwgb3B0aW9ucz86IFBhdGhMZXZlbHNPcHRpb25zKSA9PiBQYXRoW11cblxuICAvKipcbiAgICogR2l2ZW4gYSBwYXRoLCBnZXQgdGhlIHBhdGggdG8gdGhlIG5leHQgc2libGluZyBub2RlLlxuICAgKi9cbiAgbmV4dDogKHBhdGg6IFBhdGgpID0+IFBhdGhcblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgb3BlcmF0aW9uIGNhbiBhZmZlY3QgcGF0aHMgb3Igbm90LiBVc2VkIGFzIGFuXG4gICAqIG9wdGltaXphdGlvbiB3aGVuIHVwZGF0aW5nIGRpcnR5IHBhdGhzIGR1cmluZyBub3JtYWxpemF0aW9uXG4gICAqXG4gICAqIE5PVEU6IFRoaXMgKm11c3QqIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAndHJhbnNmb3JtJ1xuICAgKiBiZWxvd1xuICAgKi9cbiAgb3BlcmF0aW9uQ2FuVHJhbnNmb3JtUGF0aDogKFxuICAgIG9wZXJhdGlvbjogT3BlcmF0aW9uXG4gICkgPT4gb3BlcmF0aW9uIGlzXG4gICAgfCBJbnNlcnROb2RlT3BlcmF0aW9uXG4gICAgfCBSZW1vdmVOb2RlT3BlcmF0aW9uXG4gICAgfCBNZXJnZU5vZGVPcGVyYXRpb25cbiAgICB8IFNwbGl0Tm9kZU9wZXJhdGlvblxuICAgIHwgTW92ZU5vZGVPcGVyYXRpb25cblxuICAvKipcbiAgICogR2l2ZW4gYSBwYXRoLCByZXR1cm4gYSBuZXcgcGF0aCByZWZlcnJpbmcgdG8gdGhlIHBhcmVudCBub2RlIGFib3ZlIGl0LlxuICAgKi9cbiAgcGFyZW50OiAocGF0aDogUGF0aCkgPT4gUGF0aFxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHBhdGgsIGdldCB0aGUgcGF0aCB0byB0aGUgcHJldmlvdXMgc2libGluZyBub2RlLlxuICAgKi9cbiAgcHJldmlvdXM6IChwYXRoOiBQYXRoKSA9PiBQYXRoXG5cbiAgLyoqXG4gICAqIEdldCBhIHBhdGggcmVsYXRpdmUgdG8gYW4gYW5jZXN0b3IuXG4gICAqL1xuICByZWxhdGl2ZTogKHBhdGg6IFBhdGgsIGFuY2VzdG9yOiBQYXRoKSA9PiBQYXRoXG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybSBhIHBhdGggYnkgYW4gb3BlcmF0aW9uLlxuICAgKi9cbiAgdHJhbnNmb3JtOiAoXG4gICAgcGF0aDogUGF0aCxcbiAgICBvcGVyYXRpb246IE9wZXJhdGlvbixcbiAgICBvcHRpb25zPzogUGF0aFRyYW5zZm9ybU9wdGlvbnNcbiAgKSA9PiBQYXRoIHwgbnVsbFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgUGF0aDogUGF0aEludGVyZmFjZSA9IHtcbiAgYW5jZXN0b3JzKHBhdGg6IFBhdGgsIG9wdGlvbnM6IFBhdGhBbmNlc3RvcnNPcHRpb25zID0ge30pOiBQYXRoW10ge1xuICAgIGNvbnN0IHsgcmV2ZXJzZSA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgbGV0IHBhdGhzID0gUGF0aC5sZXZlbHMocGF0aCwgb3B0aW9ucylcblxuICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICBwYXRocyA9IHBhdGhzLnNsaWNlKDEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdGhzID0gcGF0aHMuc2xpY2UoMCwgLTEpXG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdGhzXG4gIH0sXG5cbiAgY29tbW9uKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBQYXRoIHtcbiAgICBjb25zdCBjb21tb246IFBhdGggPSBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aCAmJiBpIDwgYW5vdGhlci5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXYgPSBwYXRoW2ldXG4gICAgICBjb25zdCBidiA9IGFub3RoZXJbaV1cblxuICAgICAgaWYgKGF2ICE9PSBidikge1xuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjb21tb24ucHVzaChhdilcbiAgICB9XG5cbiAgICByZXR1cm4gY29tbW9uXG4gIH0sXG5cbiAgY29tcGFyZShwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogLTEgfCAwIHwgMSB7XG4gICAgY29uc3QgbWluID0gTWF0aC5taW4ocGF0aC5sZW5ndGgsIGFub3RoZXIubGVuZ3RoKVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtaW47IGkrKykge1xuICAgICAgaWYgKHBhdGhbaV0gPCBhbm90aGVyW2ldKSByZXR1cm4gLTFcbiAgICAgIGlmIChwYXRoW2ldID4gYW5vdGhlcltpXSkgcmV0dXJuIDFcbiAgICB9XG5cbiAgICByZXR1cm4gMFxuICB9LFxuXG4gIGVuZHNBZnRlcihwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaSA9IHBhdGgubGVuZ3RoIC0gMVxuICAgIGNvbnN0IGFzID0gcGF0aC5zbGljZSgwLCBpKVxuICAgIGNvbnN0IGJzID0gYW5vdGhlci5zbGljZSgwLCBpKVxuICAgIGNvbnN0IGF2ID0gcGF0aFtpXVxuICAgIGNvbnN0IGJ2ID0gYW5vdGhlcltpXVxuICAgIHJldHVybiBQYXRoLmVxdWFscyhhcywgYnMpICYmIGF2ID4gYnZcbiAgfSxcblxuICBlbmRzQXQocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGkgPSBwYXRoLmxlbmd0aFxuICAgIGNvbnN0IGFzID0gcGF0aC5zbGljZSgwLCBpKVxuICAgIGNvbnN0IGJzID0gYW5vdGhlci5zbGljZSgwLCBpKVxuICAgIHJldHVybiBQYXRoLmVxdWFscyhhcywgYnMpXG4gIH0sXG5cbiAgZW5kc0JlZm9yZShwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaSA9IHBhdGgubGVuZ3RoIC0gMVxuICAgIGNvbnN0IGFzID0gcGF0aC5zbGljZSgwLCBpKVxuICAgIGNvbnN0IGJzID0gYW5vdGhlci5zbGljZSgwLCBpKVxuICAgIGNvbnN0IGF2ID0gcGF0aFtpXVxuICAgIGNvbnN0IGJ2ID0gYW5vdGhlcltpXVxuICAgIHJldHVybiBQYXRoLmVxdWFscyhhcywgYnMpICYmIGF2IDwgYnZcbiAgfSxcblxuICBlcXVhbHMocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICBwYXRoLmxlbmd0aCA9PT0gYW5vdGhlci5sZW5ndGggJiYgcGF0aC5ldmVyeSgobiwgaSkgPT4gbiA9PT0gYW5vdGhlcltpXSlcbiAgICApXG4gIH0sXG5cbiAgaGFzUHJldmlvdXMocGF0aDogUGF0aCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwYXRoW3BhdGgubGVuZ3RoIC0gMV0gPiAwXG4gIH0sXG5cbiAgaXNBZnRlcihwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFBhdGguY29tcGFyZShwYXRoLCBhbm90aGVyKSA9PT0gMVxuICB9LFxuXG4gIGlzQW5jZXN0b3IocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwYXRoLmxlbmd0aCA8IGFub3RoZXIubGVuZ3RoICYmIFBhdGguY29tcGFyZShwYXRoLCBhbm90aGVyKSA9PT0gMFxuICB9LFxuXG4gIGlzQmVmb3JlKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gUGF0aC5jb21wYXJlKHBhdGgsIGFub3RoZXIpID09PSAtMVxuICB9LFxuXG4gIGlzQ2hpbGQocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICBwYXRoLmxlbmd0aCA9PT0gYW5vdGhlci5sZW5ndGggKyAxICYmIFBhdGguY29tcGFyZShwYXRoLCBhbm90aGVyKSA9PT0gMFxuICAgIClcbiAgfSxcblxuICBpc0NvbW1vbihwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHBhdGgubGVuZ3RoIDw9IGFub3RoZXIubGVuZ3RoICYmIFBhdGguY29tcGFyZShwYXRoLCBhbm90aGVyKSA9PT0gMFxuICB9LFxuXG4gIGlzRGVzY2VuZGFudChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHBhdGgubGVuZ3RoID4gYW5vdGhlci5sZW5ndGggJiYgUGF0aC5jb21wYXJlKHBhdGgsIGFub3RoZXIpID09PSAwXG4gIH0sXG5cbiAgaXNQYXJlbnQocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICBwYXRoLmxlbmd0aCArIDEgPT09IGFub3RoZXIubGVuZ3RoICYmIFBhdGguY29tcGFyZShwYXRoLCBhbm90aGVyKSA9PT0gMFxuICAgIClcbiAgfSxcblxuICBpc1BhdGgodmFsdWU6IGFueSk6IHZhbHVlIGlzIFBhdGgge1xuICAgIHJldHVybiAoXG4gICAgICBBcnJheS5pc0FycmF5KHZhbHVlKSAmJlxuICAgICAgKHZhbHVlLmxlbmd0aCA9PT0gMCB8fCB0eXBlb2YgdmFsdWVbMF0gPT09ICdudW1iZXInKVxuICAgIClcbiAgfSxcblxuICBpc1NpYmxpbmcocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIGlmIChwYXRoLmxlbmd0aCAhPT0gYW5vdGhlci5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IGFzID0gcGF0aC5zbGljZSgwLCAtMSlcbiAgICBjb25zdCBicyA9IGFub3RoZXIuc2xpY2UoMCwgLTEpXG4gICAgY29uc3QgYWwgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cbiAgICBjb25zdCBibCA9IGFub3RoZXJbYW5vdGhlci5sZW5ndGggLSAxXVxuICAgIHJldHVybiBhbCAhPT0gYmwgJiYgUGF0aC5lcXVhbHMoYXMsIGJzKVxuICB9LFxuXG4gIGxldmVscyhwYXRoOiBQYXRoLCBvcHRpb25zOiBQYXRoTGV2ZWxzT3B0aW9ucyA9IHt9KTogUGF0aFtdIHtcbiAgICBjb25zdCB7IHJldmVyc2UgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgIGNvbnN0IGxpc3Q6IFBhdGhbXSA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBwYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsaXN0LnB1c2gocGF0aC5zbGljZSgwLCBpKSlcbiAgICB9XG5cbiAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgbGlzdC5yZXZlcnNlKClcbiAgICB9XG5cbiAgICByZXR1cm4gbGlzdFxuICB9LFxuXG4gIG5leHQocGF0aDogUGF0aCk6IFBhdGgge1xuICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCB0aGUgbmV4dCBwYXRoIG9mIGEgcm9vdCBwYXRoIFske3BhdGh9XSwgYmVjYXVzZSBpdCBoYXMgbm8gbmV4dCBpbmRleC5gXG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgbGFzdCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXVxuICAgIHJldHVybiBwYXRoLnNsaWNlKDAsIC0xKS5jb25jYXQobGFzdCArIDEpXG4gIH0sXG5cbiAgb3BlcmF0aW9uQ2FuVHJhbnNmb3JtUGF0aChcbiAgICBvcGVyYXRpb246IE9wZXJhdGlvblxuICApOiBvcGVyYXRpb24gaXNcbiAgICB8IEluc2VydE5vZGVPcGVyYXRpb25cbiAgICB8IFJlbW92ZU5vZGVPcGVyYXRpb25cbiAgICB8IE1lcmdlTm9kZU9wZXJhdGlvblxuICAgIHwgU3BsaXROb2RlT3BlcmF0aW9uXG4gICAgfCBNb3ZlTm9kZU9wZXJhdGlvbiB7XG4gICAgc3dpdGNoIChvcGVyYXRpb24udHlwZSkge1xuICAgICAgY2FzZSAnaW5zZXJ0X25vZGUnOlxuICAgICAgY2FzZSAncmVtb3ZlX25vZGUnOlxuICAgICAgY2FzZSAnbWVyZ2Vfbm9kZSc6XG4gICAgICBjYXNlICdzcGxpdF9ub2RlJzpcbiAgICAgIGNhc2UgJ21vdmVfbm9kZSc6XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0sXG5cbiAgcGFyZW50KHBhdGg6IFBhdGgpOiBQYXRoIHtcbiAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGdldCB0aGUgcGFyZW50IHBhdGggb2YgdGhlIHJvb3QgcGF0aCBbJHtwYXRofV0uYClcbiAgICB9XG5cbiAgICByZXR1cm4gcGF0aC5zbGljZSgwLCAtMSlcbiAgfSxcblxuICBwcmV2aW91cyhwYXRoOiBQYXRoKTogUGF0aCB7XG4gICAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IHRoZSBwcmV2aW91cyBwYXRoIG9mIGEgcm9vdCBwYXRoIFske3BhdGh9XSwgYmVjYXVzZSBpdCBoYXMgbm8gcHJldmlvdXMgaW5kZXguYFxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IGxhc3QgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cblxuICAgIGlmIChsYXN0IDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgdGhlIHByZXZpb3VzIHBhdGggb2YgYSBmaXJzdCBjaGlsZCBwYXRoIFske3BhdGh9XSBiZWNhdXNlIGl0IHdvdWxkIHJlc3VsdCBpbiBhIG5lZ2F0aXZlIGluZGV4LmBcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gcGF0aC5zbGljZSgwLCAtMSkuY29uY2F0KGxhc3QgLSAxKVxuICB9LFxuXG4gIHJlbGF0aXZlKHBhdGg6IFBhdGgsIGFuY2VzdG9yOiBQYXRoKTogUGF0aCB7XG4gICAgaWYgKCFQYXRoLmlzQW5jZXN0b3IoYW5jZXN0b3IsIHBhdGgpICYmICFQYXRoLmVxdWFscyhwYXRoLCBhbmNlc3RvcikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgdGhlIHJlbGF0aXZlIHBhdGggb2YgWyR7cGF0aH1dIGluc2lkZSBhbmNlc3RvciBbJHthbmNlc3Rvcn1dLCBiZWNhdXNlIGl0IGlzIG5vdCBhYm92ZSBvciBlcXVhbCB0byB0aGUgcGF0aC5gXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdGguc2xpY2UoYW5jZXN0b3IubGVuZ3RoKVxuICB9LFxuXG4gIHRyYW5zZm9ybShcbiAgICBwYXRoOiBQYXRoIHwgbnVsbCxcbiAgICBvcGVyYXRpb246IE9wZXJhdGlvbixcbiAgICBvcHRpb25zOiBQYXRoVHJhbnNmb3JtT3B0aW9ucyA9IHt9XG4gICk6IFBhdGggfCBudWxsIHtcbiAgICBpZiAoIXBhdGgpIHJldHVybiBudWxsXG5cbiAgICAvLyBQRVJGOiB1c2UgZGVzdHJ1Y3RpbmcgaW5zdGVhZCBvZiBpbW1lclxuICAgIGNvbnN0IHAgPSBbLi4ucGF0aF1cbiAgICBjb25zdCB7IGFmZmluaXR5ID0gJ2ZvcndhcmQnIH0gPSBvcHRpb25zXG5cbiAgICAvLyBQRVJGOiBFeGl0IGVhcmx5IGlmIHRoZSBvcGVyYXRpb24gaXMgZ3VhcmFudGVlZCBub3QgdG8gaGF2ZSBhbiBlZmZlY3QuXG4gICAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcFxuICAgIH1cblxuICAgIHN3aXRjaCAob3BlcmF0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2luc2VydF9ub2RlJzoge1xuICAgICAgICBjb25zdCB7IHBhdGg6IG9wIH0gPSBvcGVyYXRpb25cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgUGF0aC5lcXVhbHMob3AsIHApIHx8XG4gICAgICAgICAgUGF0aC5lbmRzQmVmb3JlKG9wLCBwKSB8fFxuICAgICAgICAgIFBhdGguaXNBbmNlc3RvcihvcCwgcClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcFtvcC5sZW5ndGggLSAxXSArPSAxXG4gICAgICAgIH1cblxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZW1vdmVfbm9kZSc6IHtcbiAgICAgICAgY29uc3QgeyBwYXRoOiBvcCB9ID0gb3BlcmF0aW9uXG5cbiAgICAgICAgaWYgKFBhdGguZXF1YWxzKG9wLCBwKSB8fCBQYXRoLmlzQW5jZXN0b3Iob3AsIHApKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfSBlbHNlIGlmIChQYXRoLmVuZHNCZWZvcmUob3AsIHApKSB7XG4gICAgICAgICAgcFtvcC5sZW5ndGggLSAxXSAtPSAxXG4gICAgICAgIH1cblxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtZXJnZV9ub2RlJzoge1xuICAgICAgICBjb25zdCB7IHBhdGg6IG9wLCBwb3NpdGlvbiB9ID0gb3BlcmF0aW9uXG5cbiAgICAgICAgaWYgKFBhdGguZXF1YWxzKG9wLCBwKSB8fCBQYXRoLmVuZHNCZWZvcmUob3AsIHApKSB7XG4gICAgICAgICAgcFtvcC5sZW5ndGggLSAxXSAtPSAxXG4gICAgICAgIH0gZWxzZSBpZiAoUGF0aC5pc0FuY2VzdG9yKG9wLCBwKSkge1xuICAgICAgICAgIHBbb3AubGVuZ3RoIC0gMV0gLT0gMVxuICAgICAgICAgIHBbb3AubGVuZ3RoXSArPSBwb3NpdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnc3BsaXRfbm9kZSc6IHtcbiAgICAgICAgY29uc3QgeyBwYXRoOiBvcCwgcG9zaXRpb24gfSA9IG9wZXJhdGlvblxuXG4gICAgICAgIGlmIChQYXRoLmVxdWFscyhvcCwgcCkpIHtcbiAgICAgICAgICBpZiAoYWZmaW5pdHkgPT09ICdmb3J3YXJkJykge1xuICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDFdICs9IDFcbiAgICAgICAgICB9IGVsc2UgaWYgKGFmZmluaXR5ID09PSAnYmFja3dhcmQnKSB7XG4gICAgICAgICAgICAvLyBOb3RoaW5nLCBiZWNhdXNlIGl0IHN0aWxsIHJlZmVycyB0byB0aGUgcmlnaHQgcGF0aC5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoUGF0aC5lbmRzQmVmb3JlKG9wLCBwKSkge1xuICAgICAgICAgIHBbb3AubGVuZ3RoIC0gMV0gKz0gMVxuICAgICAgICB9IGVsc2UgaWYgKFBhdGguaXNBbmNlc3RvcihvcCwgcCkgJiYgcGF0aFtvcC5sZW5ndGhdID49IHBvc2l0aW9uKSB7XG4gICAgICAgICAgcFtvcC5sZW5ndGggLSAxXSArPSAxXG4gICAgICAgICAgcFtvcC5sZW5ndGhdIC09IHBvc2l0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtb3ZlX25vZGUnOiB7XG4gICAgICAgIGNvbnN0IHsgcGF0aDogb3AsIG5ld1BhdGg6IG9ucCB9ID0gb3BlcmF0aW9uXG5cbiAgICAgICAgLy8gSWYgdGhlIG9sZCBhbmQgbmV3IHBhdGggYXJlIHRoZSBzYW1lLCBpdCdzIGEgbm8tb3AuXG4gICAgICAgIGlmIChQYXRoLmVxdWFscyhvcCwgb25wKSkge1xuICAgICAgICAgIHJldHVybiBwXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoUGF0aC5pc0FuY2VzdG9yKG9wLCBwKSB8fCBQYXRoLmVxdWFscyhvcCwgcCkpIHtcbiAgICAgICAgICBjb25zdCBjb3B5ID0gb25wLnNsaWNlKClcblxuICAgICAgICAgIGlmIChQYXRoLmVuZHNCZWZvcmUob3AsIG9ucCkgJiYgb3AubGVuZ3RoIDwgb25wLmxlbmd0aCkge1xuICAgICAgICAgICAgY29weVtvcC5sZW5ndGggLSAxXSAtPSAxXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGNvcHkuY29uY2F0KHAuc2xpY2Uob3AubGVuZ3RoKSlcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBQYXRoLmlzU2libGluZyhvcCwgb25wKSAmJlxuICAgICAgICAgIChQYXRoLmlzQW5jZXN0b3Iob25wLCBwKSB8fCBQYXRoLmVxdWFscyhvbnAsIHApKVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoUGF0aC5lbmRzQmVmb3JlKG9wLCBwKSkge1xuICAgICAgICAgICAgcFtvcC5sZW5ndGggLSAxXSAtPSAxXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBbb3AubGVuZ3RoIC0gMV0gKz0gMVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBQYXRoLmVuZHNCZWZvcmUob25wLCBwKSB8fFxuICAgICAgICAgIFBhdGguZXF1YWxzKG9ucCwgcCkgfHxcbiAgICAgICAgICBQYXRoLmlzQW5jZXN0b3Iob25wLCBwKVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoUGF0aC5lbmRzQmVmb3JlKG9wLCBwKSkge1xuICAgICAgICAgICAgcFtvcC5sZW5ndGggLSAxXSAtPSAxXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcFtvbnAubGVuZ3RoIC0gMV0gKz0gMVxuICAgICAgICB9IGVsc2UgaWYgKFBhdGguZW5kc0JlZm9yZShvcCwgcCkpIHtcbiAgICAgICAgICBpZiAoUGF0aC5lcXVhbHMob25wLCBwKSkge1xuICAgICAgICAgICAgcFtvbnAubGVuZ3RoIC0gMV0gKz0gMVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHBbb3AubGVuZ3RoIC0gMV0gLT0gMVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcFxuICB9LFxufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90eXBlb2Yobykge1xuICBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7XG5cbiAgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykge1xuICAgIHJldHVybiB0eXBlb2YgbztcbiAgfSA6IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87XG4gIH0sIF90eXBlb2Yobyk7XG59IiwgImltcG9ydCBfdHlwZW9mIGZyb20gXCIuL3R5cGVvZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3RvUHJpbWl0aXZlKGlucHV0LCBoaW50KSB7XG4gIGlmIChfdHlwZW9mKGlucHV0KSAhPT0gXCJvYmplY3RcIiB8fCBpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIGlucHV0O1xuICB2YXIgcHJpbSA9IGlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07XG4gIGlmIChwcmltICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8IFwiZGVmYXVsdFwiKTtcbiAgICBpZiAoX3R5cGVvZihyZXMpICE9PSBcIm9iamVjdFwiKSByZXR1cm4gcmVzO1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTtcbiAgfVxuICByZXR1cm4gKGhpbnQgPT09IFwic3RyaW5nXCIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTtcbn0iLCAiaW1wb3J0IF90eXBlb2YgZnJvbSBcIi4vdHlwZW9mLmpzXCI7XG5pbXBvcnQgdG9QcmltaXRpdmUgZnJvbSBcIi4vdG9QcmltaXRpdmUuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykge1xuICB2YXIga2V5ID0gdG9QcmltaXRpdmUoYXJnLCBcInN0cmluZ1wiKTtcbiAgcmV0dXJuIF90eXBlb2Yoa2V5KSA9PT0gXCJzeW1ib2xcIiA/IGtleSA6IFN0cmluZyhrZXkpO1xufSIsICJpbXBvcnQgdG9Qcm9wZXJ0eUtleSBmcm9tIFwiLi90b1Byb3BlcnR5S2V5LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGtleSA9IHRvUHJvcGVydHlLZXkoa2V5KTtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn0iLCAiaW1wb3J0IHsgY3JlYXRlRHJhZnQsIGZpbmlzaERyYWZ0LCBpc0RyYWZ0IH0gZnJvbSAnaW1tZXInXG5pbXBvcnQge1xuICBBbmNlc3RvcixcbiAgRGVzY2VuZGFudCxcbiAgRWRpdG9yLFxuICBFbGVtZW50LFxuICBOb2RlLFxuICBOb2RlRW50cnksXG4gIE9wZXJhdGlvbixcbiAgUGF0aCxcbiAgUG9pbnQsXG4gIFJhbmdlLFxuICBTY3J1YmJlcixcbiAgU2VsZWN0aW9uLFxuICBUZXh0LFxufSBmcm9tICcuLi8uLi9pbmRleCdcblxuZXhwb3J0IGludGVyZmFjZSBHZW5lcmFsVHJhbnNmb3JtcyB7XG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gdGhlIGVkaXRvciBieSBhbiBvcGVyYXRpb24uXG4gICAqL1xuICB0cmFuc2Zvcm06IChlZGl0b3I6IEVkaXRvciwgb3A6IE9wZXJhdGlvbikgPT4gdm9pZFxufVxuXG5jb25zdCBhcHBseVRvRHJhZnQgPSAoZWRpdG9yOiBFZGl0b3IsIHNlbGVjdGlvbjogU2VsZWN0aW9uLCBvcDogT3BlcmF0aW9uKSA9PiB7XG4gIHN3aXRjaCAob3AudHlwZSkge1xuICAgIGNhc2UgJ2luc2VydF9ub2RlJzoge1xuICAgICAgY29uc3QgeyBwYXRoLCBub2RlIH0gPSBvcFxuICAgICAgY29uc3QgcGFyZW50ID0gTm9kZS5wYXJlbnQoZWRpdG9yLCBwYXRoKVxuICAgICAgY29uc3QgaW5kZXggPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cblxuICAgICAgaWYgKGluZGV4ID4gcGFyZW50LmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYENhbm5vdCBhcHBseSBhbiBcImluc2VydF9ub2RlXCIgb3BlcmF0aW9uIGF0IHBhdGggWyR7cGF0aH1dIGJlY2F1c2UgdGhlIGRlc3RpbmF0aW9uIGlzIHBhc3QgdGhlIGVuZCBvZiB0aGUgbm9kZS5gXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgcGFyZW50LmNoaWxkcmVuLnNwbGljZShpbmRleCwgMCwgbm9kZSlcblxuICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICBmb3IgKGNvbnN0IFtwb2ludCwga2V5XSBvZiBSYW5nZS5wb2ludHMoc2VsZWN0aW9uKSkge1xuICAgICAgICAgIHNlbGVjdGlvbltrZXldID0gUG9pbnQudHJhbnNmb3JtKHBvaW50LCBvcCkhXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjYXNlICdpbnNlcnRfdGV4dCc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCwgb2Zmc2V0LCB0ZXh0IH0gPSBvcFxuICAgICAgaWYgKHRleHQubGVuZ3RoID09PSAwKSBicmVha1xuICAgICAgY29uc3Qgbm9kZSA9IE5vZGUubGVhZihlZGl0b3IsIHBhdGgpXG4gICAgICBjb25zdCBiZWZvcmUgPSBub2RlLnRleHQuc2xpY2UoMCwgb2Zmc2V0KVxuICAgICAgY29uc3QgYWZ0ZXIgPSBub2RlLnRleHQuc2xpY2Uob2Zmc2V0KVxuICAgICAgbm9kZS50ZXh0ID0gYmVmb3JlICsgdGV4dCArIGFmdGVyXG5cbiAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgZm9yIChjb25zdCBbcG9pbnQsIGtleV0gb2YgUmFuZ2UucG9pbnRzKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICBzZWxlY3Rpb25ba2V5XSA9IFBvaW50LnRyYW5zZm9ybShwb2ludCwgb3ApIVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY2FzZSAnbWVyZ2Vfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCB9ID0gb3BcbiAgICAgIGNvbnN0IG5vZGUgPSBOb2RlLmdldChlZGl0b3IsIHBhdGgpXG4gICAgICBjb25zdCBwcmV2UGF0aCA9IFBhdGgucHJldmlvdXMocGF0aClcbiAgICAgIGNvbnN0IHByZXYgPSBOb2RlLmdldChlZGl0b3IsIHByZXZQYXRoKVxuICAgICAgY29uc3QgcGFyZW50ID0gTm9kZS5wYXJlbnQoZWRpdG9yLCBwYXRoKVxuICAgICAgY29uc3QgaW5kZXggPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cblxuICAgICAgaWYgKFRleHQuaXNUZXh0KG5vZGUpICYmIFRleHQuaXNUZXh0KHByZXYpKSB7XG4gICAgICAgIHByZXYudGV4dCArPSBub2RlLnRleHRcbiAgICAgIH0gZWxzZSBpZiAoIVRleHQuaXNUZXh0KG5vZGUpICYmICFUZXh0LmlzVGV4dChwcmV2KSkge1xuICAgICAgICBwcmV2LmNoaWxkcmVuLnB1c2goLi4ubm9kZS5jaGlsZHJlbilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgQ2Fubm90IGFwcGx5IGEgXCJtZXJnZV9ub2RlXCIgb3BlcmF0aW9uIGF0IHBhdGggWyR7cGF0aH1dIHRvIG5vZGVzIG9mIGRpZmZlcmVudCBpbnRlcmZhY2VzOiAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICApfSAke1NjcnViYmVyLnN0cmluZ2lmeShwcmV2KX1gXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgcGFyZW50LmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSlcblxuICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICBmb3IgKGNvbnN0IFtwb2ludCwga2V5XSBvZiBSYW5nZS5wb2ludHMoc2VsZWN0aW9uKSkge1xuICAgICAgICAgIHNlbGVjdGlvbltrZXldID0gUG9pbnQudHJhbnNmb3JtKHBvaW50LCBvcCkhXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjYXNlICdtb3ZlX25vZGUnOiB7XG4gICAgICBjb25zdCB7IHBhdGgsIG5ld1BhdGggfSA9IG9wXG5cbiAgICAgIGlmIChQYXRoLmlzQW5jZXN0b3IocGF0aCwgbmV3UGF0aCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBDYW5ub3QgbW92ZSBhIHBhdGggWyR7cGF0aH1dIHRvIG5ldyBwYXRoIFske25ld1BhdGh9XSBiZWNhdXNlIHRoZSBkZXN0aW5hdGlvbiBpcyBpbnNpZGUgaXRzZWxmLmBcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBub2RlID0gTm9kZS5nZXQoZWRpdG9yLCBwYXRoKVxuICAgICAgY29uc3QgcGFyZW50ID0gTm9kZS5wYXJlbnQoZWRpdG9yLCBwYXRoKVxuICAgICAgY29uc3QgaW5kZXggPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cblxuICAgICAgLy8gVGhpcyBpcyB0cmlja3ksIGJ1dCBzaW5jZSB0aGUgYHBhdGhgIGFuZCBgbmV3UGF0aGAgYm90aCByZWZlciB0b1xuICAgICAgLy8gdGhlIHNhbWUgc25hcHNob3QgaW4gdGltZSwgdGhlcmUncyBhIG1pc21hdGNoLiBBZnRlciBlaXRoZXJcbiAgICAgIC8vIHJlbW92aW5nIHRoZSBvcmlnaW5hbCBwb3NpdGlvbiwgdGhlIHNlY29uZCBzdGVwJ3MgcGF0aCBjYW4gYmUgb3V0XG4gICAgICAvLyBvZiBkYXRlLiBTbyBpbnN0ZWFkIG9mIHVzaW5nIHRoZSBgb3AubmV3UGF0aGAgZGlyZWN0bHksIHdlXG4gICAgICAvLyB0cmFuc2Zvcm0gYG9wLnBhdGhgIHRvIGFzY2VydGFpbiB3aGF0IHRoZSBgbmV3UGF0aGAgd291bGQgYmUgYWZ0ZXJcbiAgICAgIC8vIHRoZSBvcGVyYXRpb24gd2FzIGFwcGxpZWQuXG4gICAgICBwYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKVxuICAgICAgY29uc3QgdHJ1ZVBhdGggPSBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcCkhXG4gICAgICBjb25zdCBuZXdQYXJlbnQgPSBOb2RlLmdldChlZGl0b3IsIFBhdGgucGFyZW50KHRydWVQYXRoKSkgYXMgQW5jZXN0b3JcbiAgICAgIGNvbnN0IG5ld0luZGV4ID0gdHJ1ZVBhdGhbdHJ1ZVBhdGgubGVuZ3RoIC0gMV1cblxuICAgICAgbmV3UGFyZW50LmNoaWxkcmVuLnNwbGljZShuZXdJbmRleCwgMCwgbm9kZSlcblxuICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICBmb3IgKGNvbnN0IFtwb2ludCwga2V5XSBvZiBSYW5nZS5wb2ludHMoc2VsZWN0aW9uKSkge1xuICAgICAgICAgIHNlbGVjdGlvbltrZXldID0gUG9pbnQudHJhbnNmb3JtKHBvaW50LCBvcCkhXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjYXNlICdyZW1vdmVfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCB9ID0gb3BcbiAgICAgIGNvbnN0IGluZGV4ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG4gICAgICBjb25zdCBwYXJlbnQgPSBOb2RlLnBhcmVudChlZGl0b3IsIHBhdGgpXG4gICAgICBwYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKVxuXG4gICAgICAvLyBUcmFuc2Zvcm0gYWxsIHRoZSBwb2ludHMgaW4gdGhlIHZhbHVlLCBidXQgaWYgdGhlIHBvaW50IHdhcyBpbiB0aGVcbiAgICAgIC8vIG5vZGUgdGhhdCB3YXMgcmVtb3ZlZCB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgcmFuZ2Ugb3IgcmVtb3ZlIGl0LlxuICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICBmb3IgKGNvbnN0IFtwb2ludCwga2V5XSBvZiBSYW5nZS5wb2ludHMoc2VsZWN0aW9uKSkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFBvaW50LnRyYW5zZm9ybShwb2ludCwgb3ApXG5cbiAgICAgICAgICBpZiAoc2VsZWN0aW9uICE9IG51bGwgJiYgcmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNlbGVjdGlvbltrZXldID0gcmVzdWx0XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwcmV2OiBOb2RlRW50cnk8VGV4dD4gfCB1bmRlZmluZWRcbiAgICAgICAgICAgIGxldCBuZXh0OiBOb2RlRW50cnk8VGV4dD4gfCB1bmRlZmluZWRcblxuICAgICAgICAgICAgZm9yIChjb25zdCBbbiwgcF0gb2YgTm9kZS50ZXh0cyhlZGl0b3IpKSB7XG4gICAgICAgICAgICAgIGlmIChQYXRoLmNvbXBhcmUocCwgcGF0aCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcHJldiA9IFtuLCBwXVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5leHQgPSBbbiwgcF1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwcmVmZXJOZXh0ID0gZmFsc2VcbiAgICAgICAgICAgIGlmIChwcmV2ICYmIG5leHQpIHtcbiAgICAgICAgICAgICAgaWYgKFBhdGguZXF1YWxzKG5leHRbMV0sIHBhdGgpKSB7XG4gICAgICAgICAgICAgICAgcHJlZmVyTmV4dCA9ICFQYXRoLmhhc1ByZXZpb3VzKG5leHRbMV0pXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJlZmVyTmV4dCA9XG4gICAgICAgICAgICAgICAgICBQYXRoLmNvbW1vbihwcmV2WzFdLCBwYXRoKS5sZW5ndGggPFxuICAgICAgICAgICAgICAgICAgUGF0aC5jb21tb24obmV4dFsxXSwgcGF0aCkubGVuZ3RoXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHByZXYgJiYgIXByZWZlck5leHQpIHtcbiAgICAgICAgICAgICAgcG9pbnQucGF0aCA9IHByZXZbMV1cbiAgICAgICAgICAgICAgcG9pbnQub2Zmc2V0ID0gcHJldlswXS50ZXh0Lmxlbmd0aFxuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXh0KSB7XG4gICAgICAgICAgICAgIHBvaW50LnBhdGggPSBuZXh0WzFdXG4gICAgICAgICAgICAgIHBvaW50Lm9mZnNldCA9IDBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNlbGVjdGlvbiA9IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjYXNlICdyZW1vdmVfdGV4dCc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCwgb2Zmc2V0LCB0ZXh0IH0gPSBvcFxuICAgICAgaWYgKHRleHQubGVuZ3RoID09PSAwKSBicmVha1xuICAgICAgY29uc3Qgbm9kZSA9IE5vZGUubGVhZihlZGl0b3IsIHBhdGgpXG4gICAgICBjb25zdCBiZWZvcmUgPSBub2RlLnRleHQuc2xpY2UoMCwgb2Zmc2V0KVxuICAgICAgY29uc3QgYWZ0ZXIgPSBub2RlLnRleHQuc2xpY2Uob2Zmc2V0ICsgdGV4dC5sZW5ndGgpXG4gICAgICBub2RlLnRleHQgPSBiZWZvcmUgKyBhZnRlclxuXG4gICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgIGZvciAoY29uc3QgW3BvaW50LCBrZXldIG9mIFJhbmdlLnBvaW50cyhzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgc2VsZWN0aW9uW2tleV0gPSBQb2ludC50cmFuc2Zvcm0ocG9pbnQsIG9wKSFcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGNhc2UgJ3NldF9ub2RlJzoge1xuICAgICAgY29uc3QgeyBwYXRoLCBwcm9wZXJ0aWVzLCBuZXdQcm9wZXJ0aWVzIH0gPSBvcFxuXG4gICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3Qgc2V0IHByb3BlcnRpZXMgb24gdGhlIHJvb3Qgbm9kZSFgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBub2RlID0gTm9kZS5nZXQoZWRpdG9yLCBwYXRoKVxuXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBuZXdQcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmIChrZXkgPT09ICdjaGlsZHJlbicgfHwga2V5ID09PSAndGV4dCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBzZXQgdGhlIFwiJHtrZXl9XCIgcHJvcGVydHkgb2Ygbm9kZXMhYClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZhbHVlID0gbmV3UHJvcGVydGllc1s8a2V5b2YgTm9kZT5rZXldXG5cbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICBkZWxldGUgbm9kZVs8a2V5b2YgTm9kZT5rZXldXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZVs8a2V5b2YgTm9kZT5rZXldID0gdmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBwcm9wZXJ0aWVzIHRoYXQgd2VyZSBwcmV2aW91c2x5IGRlZmluZWQsIGJ1dCBhcmUgbm93IG1pc3NpbmcsIG11c3QgYmUgZGVsZXRlZFxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgICBpZiAoIW5ld1Byb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGRlbGV0ZSBub2RlWzxrZXlvZiBOb2RlPmtleV1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGNhc2UgJ3NldF9zZWxlY3Rpb24nOiB7XG4gICAgICBjb25zdCB7IG5ld1Byb3BlcnRpZXMgfSA9IG9wXG5cbiAgICAgIGlmIChuZXdQcm9wZXJ0aWVzID09IG51bGwpIHtcbiAgICAgICAgc2VsZWN0aW9uID0gbmV3UHJvcGVydGllc1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHNlbGVjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKCFSYW5nZS5pc1JhbmdlKG5ld1Byb3BlcnRpZXMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBDYW5ub3QgYXBwbHkgYW4gaW5jb21wbGV0ZSBcInNldF9zZWxlY3Rpb25cIiBvcGVyYXRpb24gcHJvcGVydGllcyAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgICAgICAgICBuZXdQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICl9IHdoZW4gdGhlcmUgaXMgbm8gY3VycmVudCBzZWxlY3Rpb24uYFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGVjdGlvbiA9IHsgLi4ubmV3UHJvcGVydGllcyB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBuZXdQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBuZXdQcm9wZXJ0aWVzWzxrZXlvZiBSYW5nZT5rZXldXG5cbiAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2FuY2hvcicgfHwga2V5ID09PSAnZm9jdXMnKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJlbW92ZSB0aGUgXCIke2tleX1cIiBzZWxlY3Rpb24gcHJvcGVydHlgKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkZWxldGUgc2VsZWN0aW9uWzxrZXlvZiBSYW5nZT5rZXldXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGVjdGlvbls8a2V5b2YgUmFuZ2U+a2V5XSA9IHZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY2FzZSAnc3BsaXRfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCwgcG9zaXRpb24sIHByb3BlcnRpZXMgfSA9IG9wXG5cbiAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYENhbm5vdCBhcHBseSBhIFwic3BsaXRfbm9kZVwiIG9wZXJhdGlvbiBhdCBwYXRoIFske3BhdGh9XSBiZWNhdXNlIHRoZSByb290IG5vZGUgY2Fubm90IGJlIHNwbGl0LmBcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBub2RlID0gTm9kZS5nZXQoZWRpdG9yLCBwYXRoKVxuICAgICAgY29uc3QgcGFyZW50ID0gTm9kZS5wYXJlbnQoZWRpdG9yLCBwYXRoKVxuICAgICAgY29uc3QgaW5kZXggPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cbiAgICAgIGxldCBuZXdOb2RlOiBEZXNjZW5kYW50XG5cbiAgICAgIGlmIChUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgICBjb25zdCBiZWZvcmUgPSBub2RlLnRleHQuc2xpY2UoMCwgcG9zaXRpb24pXG4gICAgICAgIGNvbnN0IGFmdGVyID0gbm9kZS50ZXh0LnNsaWNlKHBvc2l0aW9uKVxuICAgICAgICBub2RlLnRleHQgPSBiZWZvcmVcbiAgICAgICAgbmV3Tm9kZSA9IHtcbiAgICAgICAgICAuLi4ocHJvcGVydGllcyBhcyBQYXJ0aWFsPFRleHQ+KSxcbiAgICAgICAgICB0ZXh0OiBhZnRlcixcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgYmVmb3JlID0gbm9kZS5jaGlsZHJlbi5zbGljZSgwLCBwb3NpdGlvbilcbiAgICAgICAgY29uc3QgYWZ0ZXIgPSBub2RlLmNoaWxkcmVuLnNsaWNlKHBvc2l0aW9uKVxuICAgICAgICBub2RlLmNoaWxkcmVuID0gYmVmb3JlXG5cbiAgICAgICAgbmV3Tm9kZSA9IHtcbiAgICAgICAgICAuLi4ocHJvcGVydGllcyBhcyBQYXJ0aWFsPEVsZW1lbnQ+KSxcbiAgICAgICAgICBjaGlsZHJlbjogYWZ0ZXIsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcGFyZW50LmNoaWxkcmVuLnNwbGljZShpbmRleCArIDEsIDAsIG5ld05vZGUpXG5cbiAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgZm9yIChjb25zdCBbcG9pbnQsIGtleV0gb2YgUmFuZ2UucG9pbnRzKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICBzZWxlY3Rpb25ba2V5XSA9IFBvaW50LnRyYW5zZm9ybShwb2ludCwgb3ApIVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG4gIHJldHVybiBzZWxlY3Rpb25cbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IEdlbmVyYWxUcmFuc2Zvcm1zOiBHZW5lcmFsVHJhbnNmb3JtcyA9IHtcbiAgdHJhbnNmb3JtKGVkaXRvcjogRWRpdG9yLCBvcDogT3BlcmF0aW9uKTogdm9pZCB7XG4gICAgZWRpdG9yLmNoaWxkcmVuID0gY3JlYXRlRHJhZnQoZWRpdG9yLmNoaWxkcmVuKVxuICAgIGxldCBzZWxlY3Rpb24gPSBlZGl0b3Iuc2VsZWN0aW9uICYmIGNyZWF0ZURyYWZ0KGVkaXRvci5zZWxlY3Rpb24pXG5cbiAgICB0cnkge1xuICAgICAgc2VsZWN0aW9uID0gYXBwbHlUb0RyYWZ0KGVkaXRvciwgc2VsZWN0aW9uLCBvcClcbiAgICB9IGZpbmFsbHkge1xuICAgICAgZWRpdG9yLmNoaWxkcmVuID0gZmluaXNoRHJhZnQoZWRpdG9yLmNoaWxkcmVuKVxuXG4gICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgIGVkaXRvci5zZWxlY3Rpb24gPSBpc0RyYWZ0KHNlbGVjdGlvbilcbiAgICAgICAgICA/IChmaW5pc2hEcmFmdChzZWxlY3Rpb24pIGFzIFJhbmdlKVxuICAgICAgICAgIDogc2VsZWN0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uID0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVsZW1lbnQsIExvY2F0aW9uLCBOb2RlLCBQYXRoIH0gZnJvbSAnLi4vLi4vaW5kZXgnXG5pbXBvcnQgeyBOb2RlTWF0Y2gsIFByb3BzQ29tcGFyZSwgUHJvcHNNZXJnZSB9IGZyb20gJy4uL2VkaXRvcidcbmltcG9ydCB7IE1heGltaXplTW9kZSwgUmFuZ2VNb2RlIH0gZnJvbSAnLi4vLi4vdHlwZXMvdHlwZXMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZUluc2VydE5vZGVzT3B0aW9uczxUIGV4dGVuZHMgTm9kZT4ge1xuICBhdD86IExvY2F0aW9uXG4gIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gIG1vZGU/OiBSYW5nZU1vZGVcbiAgaGFuZ2luZz86IGJvb2xlYW5cbiAgc2VsZWN0PzogYm9vbGVhblxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb2RlVHJhbnNmb3JtcyB7XG4gIC8qKlxuICAgKiBJbnNlcnQgbm9kZXMgaW4gdGhlIGVkaXRvclxuICAgKiBhdCB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBpbnNlcnROb2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBub2RlczogTm9kZSB8IE5vZGVbXSxcbiAgICBvcHRpb25zPzogTm9kZUluc2VydE5vZGVzT3B0aW9uczxUPlxuICApID0+IHZvaWRcblxuICAvKipcbiAgICogTGlmdCBub2RlcyBhdCBhIHNwZWNpZmljIGxvY2F0aW9uIHVwd2FyZHMgaW4gdGhlIGRvY3VtZW50IHRyZWUsIHNwbGl0dGluZ1xuICAgKiB0aGVpciBwYXJlbnQgaW4gdHdvIGlmIG5lY2Vzc2FyeS5cbiAgICovXG4gIGxpZnROb2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzoge1xuICAgICAgYXQ/OiBMb2NhdGlvblxuICAgICAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgICAgIG1vZGU/OiBNYXhpbWl6ZU1vZGVcbiAgICAgIHZvaWRzPzogYm9vbGVhblxuICAgIH1cbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIE1lcmdlIGEgbm9kZSBhdCBhIGxvY2F0aW9uIHdpdGggdGhlIHByZXZpb3VzIG5vZGUgb2YgdGhlIHNhbWUgZGVwdGgsXG4gICAqIHJlbW92aW5nIGFueSBlbXB0eSBjb250YWluaW5nIG5vZGVzIGFmdGVyIHRoZSBtZXJnZSBpZiBuZWNlc3NhcnkuXG4gICAqL1xuICBtZXJnZU5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBhdD86IExvY2F0aW9uXG4gICAgICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICAgICAgbW9kZT86IFJhbmdlTW9kZVxuICAgICAgaGFuZ2luZz86IGJvb2xlYW5cbiAgICAgIHZvaWRzPzogYm9vbGVhblxuICAgIH1cbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIG5vZGVzIGF0IGEgbG9jYXRpb24gdG8gYSBuZXcgbG9jYXRpb24uXG4gICAqL1xuICBtb3ZlTm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9uczoge1xuICAgICAgYXQ/OiBMb2NhdGlvblxuICAgICAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgICAgIG1vZGU/OiBNYXhpbWl6ZU1vZGVcbiAgICAgIHRvOiBQYXRoXG4gICAgICB2b2lkcz86IGJvb2xlYW5cbiAgICB9XG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIG5vZGVzIGF0IGEgc3BlY2lmaWMgbG9jYXRpb24gaW4gdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgcmVtb3ZlTm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGF0PzogTG9jYXRpb25cbiAgICAgIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gICAgICBtb2RlPzogUmFuZ2VNb2RlXG4gICAgICBoYW5naW5nPzogYm9vbGVhblxuICAgICAgdm9pZHM/OiBib29sZWFuXG4gICAgfVxuICApID0+IHZvaWRcblxuICAvKipcbiAgICogU2V0IG5ldyBwcm9wZXJ0aWVzIG9uIHRoZSBub2RlcyBhdCBhIGxvY2F0aW9uLlxuICAgKi9cbiAgc2V0Tm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgcHJvcHM6IFBhcnRpYWw8VD4sXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGF0PzogTG9jYXRpb25cbiAgICAgIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gICAgICBtb2RlPzogTWF4aW1pemVNb2RlXG4gICAgICBoYW5naW5nPzogYm9vbGVhblxuICAgICAgc3BsaXQ/OiBib29sZWFuXG4gICAgICB2b2lkcz86IGJvb2xlYW5cbiAgICAgIGNvbXBhcmU/OiBQcm9wc0NvbXBhcmVcbiAgICAgIG1lcmdlPzogUHJvcHNNZXJnZVxuICAgIH1cbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIFNwbGl0IHRoZSBub2RlcyBhdCBhIHNwZWNpZmljIGxvY2F0aW9uLlxuICAgKi9cbiAgc3BsaXROb2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzoge1xuICAgICAgYXQ/OiBMb2NhdGlvblxuICAgICAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgICAgIG1vZGU/OiBSYW5nZU1vZGVcbiAgICAgIGFsd2F5cz86IGJvb2xlYW5cbiAgICAgIGhlaWdodD86IG51bWJlclxuICAgICAgdm9pZHM/OiBib29sZWFuXG4gICAgfVxuICApID0+IHZvaWRcblxuICAvKipcbiAgICogVW5zZXQgcHJvcGVydGllcyBvbiB0aGUgbm9kZXMgYXQgYSBsb2NhdGlvbi5cbiAgICovXG4gIHVuc2V0Tm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgcHJvcHM6IHN0cmluZyB8IHN0cmluZ1tdLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBhdD86IExvY2F0aW9uXG4gICAgICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICAgICAgbW9kZT86IE1heGltaXplTW9kZVxuICAgICAgaGFuZ2luZz86IGJvb2xlYW5cbiAgICAgIHNwbGl0PzogYm9vbGVhblxuICAgICAgdm9pZHM/OiBib29sZWFuXG4gICAgfVxuICApID0+IHZvaWRcblxuICAvKipcbiAgICogVW53cmFwIHRoZSBub2RlcyBhdCBhIGxvY2F0aW9uIGZyb20gYSBwYXJlbnQgbm9kZSwgc3BsaXR0aW5nIHRoZSBwYXJlbnQgaWZcbiAgICogbmVjZXNzYXJ5IHRvIGVuc3VyZSB0aGF0IG9ubHkgdGhlIGNvbnRlbnQgaW4gdGhlIHJhbmdlIGlzIHVud3JhcHBlZC5cbiAgICovXG4gIHVud3JhcE5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBhdD86IExvY2F0aW9uXG4gICAgICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICAgICAgbW9kZT86IE1heGltaXplTW9kZVxuICAgICAgc3BsaXQ/OiBib29sZWFuXG4gICAgICB2b2lkcz86IGJvb2xlYW5cbiAgICB9XG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBXcmFwIHRoZSBub2RlcyBhdCBhIGxvY2F0aW9uIGluIGEgbmV3IGNvbnRhaW5lciBub2RlLCBzcGxpdHRpbmcgdGhlIGVkZ2VzXG4gICAqIG9mIHRoZSByYW5nZSBmaXJzdCB0byBlbnN1cmUgdGhhdCBvbmx5IHRoZSBjb250ZW50IGluIHRoZSByYW5nZSBpcyB3cmFwcGVkLlxuICAgKi9cbiAgd3JhcE5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIGVsZW1lbnQ6IEVsZW1lbnQsXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGF0PzogTG9jYXRpb25cbiAgICAgIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gICAgICBtb2RlPzogTWF4aW1pemVNb2RlXG4gICAgICBzcGxpdD86IGJvb2xlYW5cbiAgICAgIHZvaWRzPzogYm9vbGVhblxuICAgIH1cbiAgKSA9PiB2b2lkXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBOb2RlVHJhbnNmb3JtczogTm9kZVRyYW5zZm9ybXMgPSB7XG4gIGluc2VydE5vZGVzKGVkaXRvciwgbm9kZXMsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IuaW5zZXJ0Tm9kZXMobm9kZXMsIG9wdGlvbnMpXG4gIH0sXG4gIGxpZnROb2RlcyhlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IubGlmdE5vZGVzKG9wdGlvbnMpXG4gIH0sXG4gIG1lcmdlTm9kZXMoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLm1lcmdlTm9kZXMob3B0aW9ucylcbiAgfSxcbiAgbW92ZU5vZGVzKGVkaXRvciwgb3B0aW9ucykge1xuICAgIGVkaXRvci5tb3ZlTm9kZXMob3B0aW9ucylcbiAgfSxcbiAgcmVtb3ZlTm9kZXMoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLnJlbW92ZU5vZGVzKG9wdGlvbnMpXG4gIH0sXG4gIHNldE5vZGVzKGVkaXRvciwgcHJvcHMsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3Iuc2V0Tm9kZXMocHJvcHMsIG9wdGlvbnMpXG4gIH0sXG4gIHNwbGl0Tm9kZXMoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLnNwbGl0Tm9kZXMob3B0aW9ucylcbiAgfSxcbiAgdW5zZXROb2RlcyhlZGl0b3IsIHByb3BzLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLnVuc2V0Tm9kZXMocHJvcHMsIG9wdGlvbnMpXG4gIH0sXG4gIHVud3JhcE5vZGVzKGVkaXRvciwgb3B0aW9ucykge1xuICAgIGVkaXRvci51bndyYXBOb2RlcyhvcHRpb25zKVxuICB9LFxuICB3cmFwTm9kZXMoZWRpdG9yLCBlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLndyYXBOb2RlcyhlbGVtZW50LCBvcHRpb25zKVxuICB9LFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgTG9jYXRpb24sIFBvaW50LCBSYW5nZSB9IGZyb20gJy4uLy4uL2luZGV4J1xuaW1wb3J0IHsgTW92ZVVuaXQsIFNlbGVjdGlvbkVkZ2UgfSBmcm9tICcuLi8uLi90eXBlcy90eXBlcydcblxuZXhwb3J0IGludGVyZmFjZSBTZWxlY3Rpb25Db2xsYXBzZU9wdGlvbnMge1xuICBlZGdlPzogU2VsZWN0aW9uRWRnZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdGlvbk1vdmVPcHRpb25zIHtcbiAgZGlzdGFuY2U/OiBudW1iZXJcbiAgdW5pdD86IE1vdmVVbml0XG4gIHJldmVyc2U/OiBib29sZWFuXG4gIGVkZ2U/OiBTZWxlY3Rpb25FZGdlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0aW9uU2V0UG9pbnRPcHRpb25zIHtcbiAgZWRnZT86IFNlbGVjdGlvbkVkZ2Vcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWxlY3Rpb25UcmFuc2Zvcm1zIHtcbiAgLyoqXG4gICAqIENvbGxhcHNlIHRoZSBzZWxlY3Rpb24uXG4gICAqL1xuICBjb2xsYXBzZTogKGVkaXRvcjogRWRpdG9yLCBvcHRpb25zPzogU2VsZWN0aW9uQ29sbGFwc2VPcHRpb25zKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIFVuc2V0IHRoZSBzZWxlY3Rpb24uXG4gICAqL1xuICBkZXNlbGVjdDogKGVkaXRvcjogRWRpdG9yKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIHNlbGVjdGlvbidzIHBvaW50IGZvcndhcmQgb3IgYmFja3dhcmQuXG4gICAqL1xuICBtb3ZlOiAoZWRpdG9yOiBFZGl0b3IsIG9wdGlvbnM/OiBTZWxlY3Rpb25Nb3ZlT3B0aW9ucykgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHNlbGVjdGlvbiB0byBhIG5ldyB2YWx1ZS5cbiAgICovXG4gIHNlbGVjdDogKGVkaXRvcjogRWRpdG9yLCB0YXJnZXQ6IExvY2F0aW9uKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIFNldCBuZXcgcHJvcGVydGllcyBvbiBvbmUgb2YgdGhlIHNlbGVjdGlvbidzIHBvaW50cy5cbiAgICovXG4gIHNldFBvaW50OiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgcHJvcHM6IFBhcnRpYWw8UG9pbnQ+LFxuICAgIG9wdGlvbnM/OiBTZWxlY3Rpb25TZXRQb2ludE9wdGlvbnNcbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIFNldCBuZXcgcHJvcGVydGllcyBvbiB0aGUgc2VsZWN0aW9uLlxuICAgKi9cbiAgc2V0U2VsZWN0aW9uOiAoZWRpdG9yOiBFZGl0b3IsIHByb3BzOiBQYXJ0aWFsPFJhbmdlPikgPT4gdm9pZFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgU2VsZWN0aW9uVHJhbnNmb3JtczogU2VsZWN0aW9uVHJhbnNmb3JtcyA9IHtcbiAgY29sbGFwc2UoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLmNvbGxhcHNlKG9wdGlvbnMpXG4gIH0sXG4gIGRlc2VsZWN0KGVkaXRvcikge1xuICAgIGVkaXRvci5kZXNlbGVjdCgpXG4gIH0sXG4gIG1vdmUoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLm1vdmUob3B0aW9ucylcbiAgfSxcbiAgc2VsZWN0KGVkaXRvciwgdGFyZ2V0KSB7XG4gICAgZWRpdG9yLnNlbGVjdCh0YXJnZXQpXG4gIH0sXG4gIHNldFBvaW50KGVkaXRvciwgcHJvcHMsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3Iuc2V0UG9pbnQocHJvcHMsIG9wdGlvbnMpXG4gIH0sXG4gIHNldFNlbGVjdGlvbihlZGl0b3IsIHByb3BzKSB7XG4gICAgZWRpdG9yLnNldFNlbGVjdGlvbihwcm9wcylcbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnaXMtcGxhaW4tb2JqZWN0J1xuXG4vKlxuICBDdXN0b20gZGVlcCBlcXVhbCBjb21wYXJpc29uIGZvciBTbGF0ZSBub2Rlcy5cblxuICBXZSBkb24ndCBuZWVkIGdlbmVyYWwgcHVycG9zZSBkZWVwIGVxdWFsaXR5O1xuICBTbGF0ZSBvbmx5IHN1cHBvcnRzIHBsYWluIHZhbHVlcywgQXJyYXlzLCBhbmQgbmVzdGVkIG9iamVjdHMuXG4gIENvbXBsZXggdmFsdWVzIG5lc3RlZCBpbnNpZGUgQXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkLlxuXG4gIFNsYXRlIG9iamVjdHMgYXJlIGRlc2lnbmVkIHRvIGJlIHNlcmlhbGlzZWQsIHNvXG4gIG1pc3Npbmcga2V5cyBhcmUgZGVsaWJlcmF0ZWx5IG5vcm1hbGlzZWQgdG8gdW5kZWZpbmVkLlxuICovXG5leHBvcnQgY29uc3QgaXNEZWVwRXF1YWwgPSAoXG4gIG5vZGU6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gIGFub3RoZXI6IFJlY29yZDxzdHJpbmcsIGFueT5cbik6IGJvb2xlYW4gPT4ge1xuICBmb3IgKGNvbnN0IGtleSBpbiBub2RlKSB7XG4gICAgY29uc3QgYSA9IG5vZGVba2V5XVxuICAgIGNvbnN0IGIgPSBhbm90aGVyW2tleV1cbiAgICBpZiAoaXNQbGFpbk9iamVjdChhKSAmJiBpc1BsYWluT2JqZWN0KGIpKSB7XG4gICAgICBpZiAoIWlzRGVlcEVxdWFsKGEsIGIpKSByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYSkgJiYgQXJyYXkuaXNBcnJheShiKSkge1xuICAgICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYSAhPT0gYikge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgLypcbiAgICBEZWVwIG9iamVjdCBlcXVhbGl0eSBpcyBvbmx5IG5lY2Vzc2FyeSBpbiBvbmUgZGlyZWN0aW9uOyBpbiB0aGUgcmV2ZXJzZSBkaXJlY3Rpb25cbiAgICB3ZSBhcmUgb25seSBsb29raW5nIGZvciBrZXlzIHRoYXQgYXJlIG1pc3NpbmcuXG4gICAgQXMgYWJvdmUsIHVuZGVmaW5lZCBrZXlzIGFyZSBub3JtYWxpc2VkIHRvIG1pc3NpbmcuXG4gICovXG5cbiAgZm9yIChjb25zdCBrZXkgaW4gYW5vdGhlcikge1xuICAgIGlmIChub2RlW2tleV0gPT09IHVuZGVmaW5lZCAmJiBhbm90aGVyW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7XG4gIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9O1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgdmFyIGtleSwgaTtcbiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldO1xuICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufSIsICJpbXBvcnQgb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSBmcm9tIFwiLi9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7XG4gIHZhciBrZXksIGk7XG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7XG4gICAgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaV07XG4gICAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTtcbiAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59IiwgImltcG9ydCB7IHByb2R1Y2UgfSBmcm9tICdpbW1lcidcbmltcG9ydCB7IGlzUGxhaW5PYmplY3QgfSBmcm9tICdpcy1wbGFpbi1vYmplY3QnXG5pbXBvcnQgeyBFeHRlbmRlZFR5cGUsIE9wZXJhdGlvbiwgUGF0aCwgUG9pbnQsIFBvaW50RW50cnkgfSBmcm9tICcuLidcbmltcG9ydCB7IFJhbmdlRGlyZWN0aW9uIH0gZnJvbSAnLi4vdHlwZXMvdHlwZXMnXG5cbi8qKlxuICogYFJhbmdlYCBvYmplY3RzIGFyZSBhIHNldCBvZiBwb2ludHMgdGhhdCByZWZlciB0byBhIHNwZWNpZmljIHNwYW4gb2YgYSBTbGF0ZVxuICogZG9jdW1lbnQuIFRoZXkgY2FuIGRlZmluZSBhIHNwYW4gaW5zaWRlIGEgc2luZ2xlIG5vZGUgb3IgYSBjYW4gc3BhbiBhY3Jvc3NcbiAqIG11bHRpcGxlIG5vZGVzLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVJhbmdlIHtcbiAgYW5jaG9yOiBQb2ludFxuICBmb2N1czogUG9pbnRcbn1cblxuZXhwb3J0IHR5cGUgUmFuZ2UgPSBFeHRlbmRlZFR5cGU8J1JhbmdlJywgQmFzZVJhbmdlPlxuXG5leHBvcnQgaW50ZXJmYWNlIFJhbmdlRWRnZXNPcHRpb25zIHtcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYW5nZVRyYW5zZm9ybU9wdGlvbnMge1xuICBhZmZpbml0eT86IFJhbmdlRGlyZWN0aW9uIHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhbmdlSW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludHMgb2YgYSByYW5nZSwgaW4gdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgYXBwZWFyXG4gICAqIGluIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIGVkZ2VzOiAocmFuZ2U6IFJhbmdlLCBvcHRpb25zPzogUmFuZ2VFZGdlc09wdGlvbnMpID0+IFtQb2ludCwgUG9pbnRdXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZW5kIHBvaW50IG9mIGEgcmFuZ2UuXG4gICAqL1xuICBlbmQ6IChyYW5nZTogUmFuZ2UpID0+IFBvaW50XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcmFuZ2UgaXMgZXhhY3RseSBlcXVhbCB0byBhbm90aGVyLlxuICAgKi9cbiAgZXF1YWxzOiAocmFuZ2U6IFJhbmdlLCBhbm90aGVyOiBSYW5nZSkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHJhbmdlIGluY2x1ZGVzIGEgcGF0aCwgYSBwb2ludCBvciBwYXJ0IG9mIGFub3RoZXIgcmFuZ2UuXG4gICAqL1xuICBpbmNsdWRlczogKHJhbmdlOiBSYW5nZSwgdGFyZ2V0OiBQYXRoIHwgUG9pbnQgfCBSYW5nZSkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGludGVyc2VjdGlvbiBvZiBhIHJhbmdlIHdpdGggYW5vdGhlci5cbiAgICovXG4gIGludGVyc2VjdGlvbjogKHJhbmdlOiBSYW5nZSwgYW5vdGhlcjogUmFuZ2UpID0+IFJhbmdlIHwgbnVsbFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHJhbmdlIGlzIGJhY2t3YXJkLCBtZWFuaW5nIHRoYXQgaXRzIGFuY2hvciBwb2ludCBhcHBlYXJzIGluIHRoZVxuICAgKiBkb2N1bWVudCBfYWZ0ZXJfIGl0cyBmb2N1cyBwb2ludC5cbiAgICovXG4gIGlzQmFja3dhcmQ6IChyYW5nZTogUmFuZ2UpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSByYW5nZSBpcyBjb2xsYXBzZWQsIG1lYW5pbmcgdGhhdCBib3RoIGl0cyBhbmNob3IgYW5kIGZvY3VzXG4gICAqIHBvaW50cyByZWZlciB0byB0aGUgZXhhY3Qgc2FtZSBwb3NpdGlvbiBpbiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBpc0NvbGxhcHNlZDogKHJhbmdlOiBSYW5nZSkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHJhbmdlIGlzIGV4cGFuZGVkLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBvcHBvc2l0ZSBvZiBbW1JhbmdlLmlzQ29sbGFwc2VkXV0gYW5kIGlzIHByb3ZpZGVkIGZvciBsZWdpYmlsaXR5LlxuICAgKi9cbiAgaXNFeHBhbmRlZDogKHJhbmdlOiBSYW5nZSkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHJhbmdlIGlzIGZvcndhcmQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG9wcG9zaXRlIG9mIFtbUmFuZ2UuaXNCYWNrd2FyZF1dIGFuZCBpcyBwcm92aWRlZCBmb3IgbGVnaWJpbGl0eS5cbiAgICovXG4gIGlzRm9yd2FyZDogKHJhbmdlOiBSYW5nZSkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGltcGxlbWVudHMgdGhlIFtbUmFuZ2VdXSBpbnRlcmZhY2UuXG4gICAqL1xuICBpc1JhbmdlOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgUmFuZ2VcblxuICAvKipcbiAgICogSXRlcmF0ZSB0aHJvdWdoIGFsbCBvZiB0aGUgcG9pbnQgZW50cmllcyBpbiBhIHJhbmdlLlxuICAgKi9cbiAgcG9pbnRzOiAocmFuZ2U6IFJhbmdlKSA9PiBHZW5lcmF0b3I8UG9pbnRFbnRyeSwgdm9pZCwgdW5kZWZpbmVkPlxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0YXJ0IHBvaW50IG9mIGEgcmFuZ2UuXG4gICAqL1xuICBzdGFydDogKHJhbmdlOiBSYW5nZSkgPT4gUG9pbnRcblxuICAvKipcbiAgICogVHJhbnNmb3JtIGEgcmFuZ2UgYnkgYW4gb3BlcmF0aW9uLlxuICAgKi9cbiAgdHJhbnNmb3JtOiAoXG4gICAgcmFuZ2U6IFJhbmdlLFxuICAgIG9wOiBPcGVyYXRpb24sXG4gICAgb3B0aW9ucz86IFJhbmdlVHJhbnNmb3JtT3B0aW9uc1xuICApID0+IFJhbmdlIHwgbnVsbFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgUmFuZ2U6IFJhbmdlSW50ZXJmYWNlID0ge1xuICBlZGdlcyhyYW5nZTogUmFuZ2UsIG9wdGlvbnM6IFJhbmdlRWRnZXNPcHRpb25zID0ge30pOiBbUG9pbnQsIFBvaW50XSB7XG4gICAgY29uc3QgeyByZXZlcnNlID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICBjb25zdCB7IGFuY2hvciwgZm9jdXMgfSA9IHJhbmdlXG4gICAgcmV0dXJuIFJhbmdlLmlzQmFja3dhcmQocmFuZ2UpID09PSByZXZlcnNlXG4gICAgICA/IFthbmNob3IsIGZvY3VzXVxuICAgICAgOiBbZm9jdXMsIGFuY2hvcl1cbiAgfSxcblxuICBlbmQocmFuZ2U6IFJhbmdlKTogUG9pbnQge1xuICAgIGNvbnN0IFssIGVuZF0gPSBSYW5nZS5lZGdlcyhyYW5nZSlcbiAgICByZXR1cm4gZW5kXG4gIH0sXG5cbiAgZXF1YWxzKHJhbmdlOiBSYW5nZSwgYW5vdGhlcjogUmFuZ2UpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgUG9pbnQuZXF1YWxzKHJhbmdlLmFuY2hvciwgYW5vdGhlci5hbmNob3IpICYmXG4gICAgICBQb2ludC5lcXVhbHMocmFuZ2UuZm9jdXMsIGFub3RoZXIuZm9jdXMpXG4gICAgKVxuICB9LFxuXG4gIGluY2x1ZGVzKHJhbmdlOiBSYW5nZSwgdGFyZ2V0OiBQYXRoIHwgUG9pbnQgfCBSYW5nZSk6IGJvb2xlYW4ge1xuICAgIGlmIChSYW5nZS5pc1JhbmdlKHRhcmdldCkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgUmFuZ2UuaW5jbHVkZXMocmFuZ2UsIHRhcmdldC5hbmNob3IpIHx8XG4gICAgICAgIFJhbmdlLmluY2x1ZGVzKHJhbmdlLCB0YXJnZXQuZm9jdXMpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cblxuICAgICAgY29uc3QgW3JzLCByZV0gPSBSYW5nZS5lZGdlcyhyYW5nZSlcbiAgICAgIGNvbnN0IFt0cywgdGVdID0gUmFuZ2UuZWRnZXModGFyZ2V0KVxuICAgICAgcmV0dXJuIFBvaW50LmlzQmVmb3JlKHJzLCB0cykgJiYgUG9pbnQuaXNBZnRlcihyZSwgdGUpXG4gICAgfVxuXG4gICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXMocmFuZ2UpXG4gICAgbGV0IGlzQWZ0ZXJTdGFydCA9IGZhbHNlXG4gICAgbGV0IGlzQmVmb3JlRW5kID0gZmFsc2VcblxuICAgIGlmIChQb2ludC5pc1BvaW50KHRhcmdldCkpIHtcbiAgICAgIGlzQWZ0ZXJTdGFydCA9IFBvaW50LmNvbXBhcmUodGFyZ2V0LCBzdGFydCkgPj0gMFxuICAgICAgaXNCZWZvcmVFbmQgPSBQb2ludC5jb21wYXJlKHRhcmdldCwgZW5kKSA8PSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIGlzQWZ0ZXJTdGFydCA9IFBhdGguY29tcGFyZSh0YXJnZXQsIHN0YXJ0LnBhdGgpID49IDBcbiAgICAgIGlzQmVmb3JlRW5kID0gUGF0aC5jb21wYXJlKHRhcmdldCwgZW5kLnBhdGgpIDw9IDBcbiAgICB9XG5cbiAgICByZXR1cm4gaXNBZnRlclN0YXJ0ICYmIGlzQmVmb3JlRW5kXG4gIH0sXG5cbiAgaW50ZXJzZWN0aW9uKHJhbmdlOiBSYW5nZSwgYW5vdGhlcjogUmFuZ2UpOiBSYW5nZSB8IG51bGwge1xuICAgIGNvbnN0IHsgYW5jaG9yLCBmb2N1cywgLi4ucmVzdCB9ID0gcmFuZ2VcbiAgICBjb25zdCBbczEsIGUxXSA9IFJhbmdlLmVkZ2VzKHJhbmdlKVxuICAgIGNvbnN0IFtzMiwgZTJdID0gUmFuZ2UuZWRnZXMoYW5vdGhlcilcbiAgICBjb25zdCBzdGFydCA9IFBvaW50LmlzQmVmb3JlKHMxLCBzMikgPyBzMiA6IHMxXG4gICAgY29uc3QgZW5kID0gUG9pbnQuaXNCZWZvcmUoZTEsIGUyKSA/IGUxIDogZTJcblxuICAgIGlmIChQb2ludC5pc0JlZm9yZShlbmQsIHN0YXJ0KSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHsgYW5jaG9yOiBzdGFydCwgZm9jdXM6IGVuZCwgLi4ucmVzdCB9XG4gICAgfVxuICB9LFxuXG4gIGlzQmFja3dhcmQocmFuZ2U6IFJhbmdlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgeyBhbmNob3IsIGZvY3VzIH0gPSByYW5nZVxuICAgIHJldHVybiBQb2ludC5pc0FmdGVyKGFuY2hvciwgZm9jdXMpXG4gIH0sXG5cbiAgaXNDb2xsYXBzZWQocmFuZ2U6IFJhbmdlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgeyBhbmNob3IsIGZvY3VzIH0gPSByYW5nZVxuICAgIHJldHVybiBQb2ludC5lcXVhbHMoYW5jaG9yLCBmb2N1cylcbiAgfSxcblxuICBpc0V4cGFuZGVkKHJhbmdlOiBSYW5nZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhUmFuZ2UuaXNDb2xsYXBzZWQocmFuZ2UpXG4gIH0sXG5cbiAgaXNGb3J3YXJkKHJhbmdlOiBSYW5nZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhUmFuZ2UuaXNCYWNrd2FyZChyYW5nZSlcbiAgfSxcblxuICBpc1JhbmdlKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBSYW5nZSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGlzUGxhaW5PYmplY3QodmFsdWUpICYmXG4gICAgICBQb2ludC5pc1BvaW50KHZhbHVlLmFuY2hvcikgJiZcbiAgICAgIFBvaW50LmlzUG9pbnQodmFsdWUuZm9jdXMpXG4gICAgKVxuICB9LFxuXG4gICpwb2ludHMocmFuZ2U6IFJhbmdlKTogR2VuZXJhdG9yPFBvaW50RW50cnksIHZvaWQsIHVuZGVmaW5lZD4ge1xuICAgIHlpZWxkIFtyYW5nZS5hbmNob3IsICdhbmNob3InXVxuICAgIHlpZWxkIFtyYW5nZS5mb2N1cywgJ2ZvY3VzJ11cbiAgfSxcblxuICBzdGFydChyYW5nZTogUmFuZ2UpOiBQb2ludCB7XG4gICAgY29uc3QgW3N0YXJ0XSA9IFJhbmdlLmVkZ2VzKHJhbmdlKVxuICAgIHJldHVybiBzdGFydFxuICB9LFxuXG4gIHRyYW5zZm9ybShcbiAgICByYW5nZTogUmFuZ2UgfCBudWxsLFxuICAgIG9wOiBPcGVyYXRpb24sXG4gICAgb3B0aW9uczogUmFuZ2VUcmFuc2Zvcm1PcHRpb25zID0ge31cbiAgKTogUmFuZ2UgfCBudWxsIHtcbiAgICByZXR1cm4gcHJvZHVjZShyYW5nZSwgciA9PiB7XG4gICAgICBpZiAociA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgICAgY29uc3QgeyBhZmZpbml0eSA9ICdpbndhcmQnIH0gPSBvcHRpb25zXG4gICAgICBsZXQgYWZmaW5pdHlBbmNob3I6ICdmb3J3YXJkJyB8ICdiYWNrd2FyZCcgfCBudWxsXG4gICAgICBsZXQgYWZmaW5pdHlGb2N1czogJ2ZvcndhcmQnIHwgJ2JhY2t3YXJkJyB8IG51bGxcblxuICAgICAgaWYgKGFmZmluaXR5ID09PSAnaW53YXJkJykge1xuICAgICAgICAvLyBJZiB0aGUgcmFuZ2UgaXMgY29sbGFwc2VkLCBtYWtlIHN1cmUgdG8gdXNlIHRoZSBzYW1lIGFmZmluaXR5IHRvXG4gICAgICAgIC8vIGF2b2lkIHRoZSB0d28gcG9pbnRzIHBhc3NpbmcgZWFjaCBvdGhlciBhbmQgZXhwYW5kaW5nIGluIHRoZSBvcHBvc2l0ZVxuICAgICAgICAvLyBkaXJlY3Rpb25cbiAgICAgICAgY29uc3QgaXNDb2xsYXBzZWQgPSBSYW5nZS5pc0NvbGxhcHNlZChyKVxuICAgICAgICBpZiAoUmFuZ2UuaXNGb3J3YXJkKHIpKSB7XG4gICAgICAgICAgYWZmaW5pdHlBbmNob3IgPSAnZm9yd2FyZCdcbiAgICAgICAgICBhZmZpbml0eUZvY3VzID0gaXNDb2xsYXBzZWQgPyBhZmZpbml0eUFuY2hvciA6ICdiYWNrd2FyZCdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZmZpbml0eUFuY2hvciA9ICdiYWNrd2FyZCdcbiAgICAgICAgICBhZmZpbml0eUZvY3VzID0gaXNDb2xsYXBzZWQgPyBhZmZpbml0eUFuY2hvciA6ICdmb3J3YXJkJ1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFmZmluaXR5ID09PSAnb3V0d2FyZCcpIHtcbiAgICAgICAgaWYgKFJhbmdlLmlzRm9yd2FyZChyKSkge1xuICAgICAgICAgIGFmZmluaXR5QW5jaG9yID0gJ2JhY2t3YXJkJ1xuICAgICAgICAgIGFmZmluaXR5Rm9jdXMgPSAnZm9yd2FyZCdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZmZpbml0eUFuY2hvciA9ICdmb3J3YXJkJ1xuICAgICAgICAgIGFmZmluaXR5Rm9jdXMgPSAnYmFja3dhcmQnXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFmZmluaXR5QW5jaG9yID0gYWZmaW5pdHlcbiAgICAgICAgYWZmaW5pdHlGb2N1cyA9IGFmZmluaXR5XG4gICAgICB9XG4gICAgICBjb25zdCBhbmNob3IgPSBQb2ludC50cmFuc2Zvcm0oci5hbmNob3IsIG9wLCB7IGFmZmluaXR5OiBhZmZpbml0eUFuY2hvciB9KVxuICAgICAgY29uc3QgZm9jdXMgPSBQb2ludC50cmFuc2Zvcm0oci5mb2N1cywgb3AsIHsgYWZmaW5pdHk6IGFmZmluaXR5Rm9jdXMgfSlcblxuICAgICAgaWYgKCFhbmNob3IgfHwgIWZvY3VzKSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG5cbiAgICAgIHIuYW5jaG9yID0gYW5jaG9yXG4gICAgICByLmZvY3VzID0gZm9jdXNcbiAgICB9KVxuICB9LFxufVxuIiwgImltcG9ydCB7IGlzUGxhaW5PYmplY3QgfSBmcm9tICdpcy1wbGFpbi1vYmplY3QnXG5pbXBvcnQgeyBBbmNlc3RvciwgRGVzY2VuZGFudCwgRWRpdG9yLCBFeHRlbmRlZFR5cGUsIE5vZGUsIFBhdGggfSBmcm9tICcuLidcblxuLyoqXG4gKiBgRWxlbWVudGAgb2JqZWN0cyBhcmUgYSB0eXBlIG9mIG5vZGUgaW4gYSBTbGF0ZSBkb2N1bWVudCB0aGF0IGNvbnRhaW4gb3RoZXJcbiAqIGVsZW1lbnQgbm9kZXMgb3IgdGV4dCBub2Rlcy4gVGhleSBjYW4gYmUgZWl0aGVyIFwiYmxvY2tzXCIgb3IgXCJpbmxpbmVzXCJcbiAqIGRlcGVuZGluZyBvbiB0aGUgU2xhdGUgZWRpdG9yJ3MgY29uZmlndXJhdGlvbi5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VFbGVtZW50IHtcbiAgY2hpbGRyZW46IERlc2NlbmRhbnRbXVxufVxuXG5leHBvcnQgdHlwZSBFbGVtZW50ID0gRXh0ZW5kZWRUeXBlPCdFbGVtZW50JywgQmFzZUVsZW1lbnQ+XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWxlbWVudEludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGltcGxlbWVudHMgdGhlICdBbmNlc3RvcicgaW50ZXJmYWNlLlxuICAgKi9cbiAgaXNBbmNlc3RvcjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIEFuY2VzdG9yXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaW1wbGVtZW50cyB0aGUgYEVsZW1lbnRgIGludGVyZmFjZS5cbiAgICovXG4gIGlzRWxlbWVudDogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIEVsZW1lbnRcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhbiBhcnJheSBvZiBgRWxlbWVudGAgb2JqZWN0cy5cbiAgICovXG4gIGlzRWxlbWVudExpc3Q6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBFbGVtZW50W11cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBzZXQgb2YgcHJvcHMgaXMgYSBwYXJ0aWFsIG9mIEVsZW1lbnQuXG4gICAqL1xuICBpc0VsZW1lbnRQcm9wczogKHByb3BzOiBhbnkpID0+IHByb3BzIGlzIFBhcnRpYWw8RWxlbWVudD5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpbXBsZW1lbnRzIHRoZSBgRWxlbWVudGAgaW50ZXJmYWNlIGFuZCBoYXMgZWxlbWVudEtleSB3aXRoIHNlbGVjdGVkIHZhbHVlLlxuICAgKiBEZWZhdWx0IGl0IGNoZWNrIHRvIGB0eXBlYCBrZXkgdmFsdWVcbiAgICovXG4gIGlzRWxlbWVudFR5cGU6IDxUIGV4dGVuZHMgRWxlbWVudD4oXG4gICAgdmFsdWU6IGFueSxcbiAgICBlbGVtZW50VmFsOiBzdHJpbmcsXG4gICAgZWxlbWVudEtleT86IHN0cmluZ1xuICApID0+IHZhbHVlIGlzIFRcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gZWxlbWVudCBtYXRjaGVzIHNldCBvZiBwcm9wZXJ0aWVzLlxuICAgKlxuICAgKiBOb3RlOiB0aGlzIGNoZWNrcyBjdXN0b20gcHJvcGVydGllcywgYW5kIGl0IGRvZXMgbm90IGVuc3VyZSB0aGF0IGFueVxuICAgKiBjaGlsZHJlbiBhcmUgZXF1aXZhbGVudC5cbiAgICovXG4gIG1hdGNoZXM6IChlbGVtZW50OiBFbGVtZW50LCBwcm9wczogUGFydGlhbDxFbGVtZW50PikgPT4gYm9vbGVhblxufVxuXG4vKipcbiAqIFNoYXJlZCB0aGUgZnVuY3Rpb24gd2l0aCBpc0VsZW1lbnRUeXBlIHV0aWxpdHlcbiAqL1xuY29uc3QgaXNFbGVtZW50ID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBFbGVtZW50ID0+IHtcbiAgcmV0dXJuIChcbiAgICBpc1BsYWluT2JqZWN0KHZhbHVlKSAmJlxuICAgIE5vZGUuaXNOb2RlTGlzdCh2YWx1ZS5jaGlsZHJlbikgJiZcbiAgICAhRWRpdG9yLmlzRWRpdG9yKHZhbHVlKVxuICApXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBFbGVtZW50OiBFbGVtZW50SW50ZXJmYWNlID0ge1xuICBpc0FuY2VzdG9yKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBBbmNlc3RvciB7XG4gICAgcmV0dXJuIGlzUGxhaW5PYmplY3QodmFsdWUpICYmIE5vZGUuaXNOb2RlTGlzdCh2YWx1ZS5jaGlsZHJlbilcbiAgfSxcblxuICBpc0VsZW1lbnQsXG5cbiAgaXNFbGVtZW50TGlzdCh2YWx1ZTogYW55KTogdmFsdWUgaXMgRWxlbWVudFtdIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUuZXZlcnkodmFsID0+IEVsZW1lbnQuaXNFbGVtZW50KHZhbCkpXG4gIH0sXG5cbiAgaXNFbGVtZW50UHJvcHMocHJvcHM6IGFueSk6IHByb3BzIGlzIFBhcnRpYWw8RWxlbWVudD4ge1xuICAgIHJldHVybiAocHJvcHMgYXMgUGFydGlhbDxFbGVtZW50PikuY2hpbGRyZW4gIT09IHVuZGVmaW5lZFxuICB9LFxuXG4gIGlzRWxlbWVudFR5cGU6IDxUIGV4dGVuZHMgRWxlbWVudD4oXG4gICAgdmFsdWU6IGFueSxcbiAgICBlbGVtZW50VmFsOiBzdHJpbmcsXG4gICAgZWxlbWVudEtleTogc3RyaW5nID0gJ3R5cGUnXG4gICk6IHZhbHVlIGlzIFQgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICBpc0VsZW1lbnQodmFsdWUpICYmIHZhbHVlWzxrZXlvZiBEZXNjZW5kYW50PmVsZW1lbnRLZXldID09PSBlbGVtZW50VmFsXG4gICAgKVxuICB9LFxuXG4gIG1hdGNoZXMoZWxlbWVudDogRWxlbWVudCwgcHJvcHM6IFBhcnRpYWw8RWxlbWVudD4pOiBib29sZWFuIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgaWYgKGtleSA9PT0gJ2NoaWxkcmVuJykge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAoZWxlbWVudFs8a2V5b2YgRGVzY2VuZGFudD5rZXldICE9PSBwcm9wc1s8a2V5b2YgRGVzY2VuZGFudD5rZXldKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH0sXG59XG5cbi8qKlxuICogYEVsZW1lbnRFbnRyeWAgb2JqZWN0cyByZWZlciB0byBhbiBgRWxlbWVudGAgYW5kIHRoZSBgUGF0aGAgd2hlcmUgaXQgY2FuIGJlXG4gKiBmb3VuZCBpbnNpZGUgYSByb290IG5vZGUuXG4gKi9cbmV4cG9ydCB0eXBlIEVsZW1lbnRFbnRyeSA9IFtFbGVtZW50LCBQYXRoXVxuIiwgImltcG9ydCB7IHByb2R1Y2UgfSBmcm9tICdpbW1lcidcbmltcG9ydCB7IEVkaXRvciwgUGF0aCwgUmFuZ2UsIFNjcnViYmVyLCBUZXh0IH0gZnJvbSAnLi4nXG5pbXBvcnQgeyBFbGVtZW50LCBFbGVtZW50RW50cnkgfSBmcm9tICcuL2VsZW1lbnQnXG5cbi8qKlxuICogVGhlIGBOb2RlYCB1bmlvbiB0eXBlIHJlcHJlc2VudHMgYWxsIG9mIHRoZSBkaWZmZXJlbnQgdHlwZXMgb2Ygbm9kZXMgdGhhdFxuICogb2NjdXIgaW4gYSBTbGF0ZSBkb2N1bWVudCB0cmVlLlxuICovXG5cbmV4cG9ydCB0eXBlIEJhc2VOb2RlID0gRWRpdG9yIHwgRWxlbWVudCB8IFRleHRcbmV4cG9ydCB0eXBlIE5vZGUgPSBFZGl0b3IgfCBFbGVtZW50IHwgVGV4dFxuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVBbmNlc3RvcnNPcHRpb25zIHtcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb2RlQ2hpbGRyZW5PcHRpb25zIHtcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb2RlRGVzY2VuZGFudHNPcHRpb25zIHtcbiAgZnJvbT86IFBhdGhcbiAgdG8/OiBQYXRoXG4gIHJldmVyc2U/OiBib29sZWFuXG4gIHBhc3M/OiAobm9kZTogTm9kZUVudHJ5KSA9PiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZUVsZW1lbnRzT3B0aW9ucyB7XG4gIGZyb20/OiBQYXRoXG4gIHRvPzogUGF0aFxuICByZXZlcnNlPzogYm9vbGVhblxuICBwYXNzPzogKG5vZGU6IE5vZGVFbnRyeSkgPT4gYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVMZXZlbHNPcHRpb25zIHtcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb2RlTm9kZXNPcHRpb25zIHtcbiAgZnJvbT86IFBhdGhcbiAgdG8/OiBQYXRoXG4gIHJldmVyc2U/OiBib29sZWFuXG4gIHBhc3M/OiAoZW50cnk6IE5vZGVFbnRyeSkgPT4gYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVUZXh0c09wdGlvbnMge1xuICBmcm9tPzogUGF0aFxuICB0bz86IFBhdGhcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbiAgcGFzcz86IChub2RlOiBOb2RlRW50cnkpID0+IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb2RlSW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIEdldCB0aGUgbm9kZSBhdCBhIHNwZWNpZmljIHBhdGgsIGFzc2VydGluZyB0aGF0IGl0J3MgYW4gYW5jZXN0b3Igbm9kZS5cbiAgICovXG4gIGFuY2VzdG9yOiAocm9vdDogTm9kZSwgcGF0aDogUGF0aCkgPT4gQW5jZXN0b3JcblxuICAvKipcbiAgICogUmV0dXJuIGEgZ2VuZXJhdG9yIG9mIGFsbCB0aGUgYW5jZXN0b3Igbm9kZXMgYWJvdmUgYSBzcGVjaWZpYyBwYXRoLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0IHRoZSBvcmRlciBpcyB0b3AtZG93biwgZnJvbSBoaWdoZXN0IHRvIGxvd2VzdCBhbmNlc3RvciBpblxuICAgKiB0aGUgdHJlZSwgYnV0IHlvdSBjYW4gcGFzcyB0aGUgYHJldmVyc2U6IHRydWVgIG9wdGlvbiB0byBnbyBib3R0b20tdXAuXG4gICAqL1xuICBhbmNlc3RvcnM6IChcbiAgICByb290OiBOb2RlLFxuICAgIHBhdGg6IFBhdGgsXG4gICAgb3B0aW9ucz86IE5vZGVBbmNlc3RvcnNPcHRpb25zXG4gICkgPT4gR2VuZXJhdG9yPE5vZGVFbnRyeTxBbmNlc3Rvcj4sIHZvaWQsIHVuZGVmaW5lZD5cblxuICAvKipcbiAgICogR2V0IHRoZSBjaGlsZCBvZiBhIG5vZGUgYXQgYSBzcGVjaWZpYyBpbmRleC5cbiAgICovXG4gIGNoaWxkOiAocm9vdDogTm9kZSwgaW5kZXg6IG51bWJlcikgPT4gRGVzY2VuZGFudFxuXG4gIC8qKlxuICAgKiBJdGVyYXRlIG92ZXIgdGhlIGNoaWxkcmVuIG9mIGEgbm9kZSBhdCBhIHNwZWNpZmljIHBhdGguXG4gICAqL1xuICBjaGlsZHJlbjogKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgcGF0aDogUGF0aCxcbiAgICBvcHRpb25zPzogTm9kZUNoaWxkcmVuT3B0aW9uc1xuICApID0+IEdlbmVyYXRvcjxOb2RlRW50cnk8RGVzY2VuZGFudD4sIHZvaWQsIHVuZGVmaW5lZD5cblxuICAvKipcbiAgICogR2V0IGFuIGVudHJ5IGZvciB0aGUgY29tbW9uIGFuY2VzZXRvciBub2RlIG9mIHR3byBwYXRocy5cbiAgICovXG4gIGNvbW1vbjogKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IE5vZGVFbnRyeVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5vZGUgYXQgYSBzcGVjaWZpYyBwYXRoLCBhc3NlcnRpbmcgdGhhdCBpdCdzIGEgZGVzY2VuZGFudCBub2RlLlxuICAgKi9cbiAgZGVzY2VuZGFudDogKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpID0+IERlc2NlbmRhbnRcblxuICAvKipcbiAgICogUmV0dXJuIGEgZ2VuZXJhdG9yIG9mIGFsbCB0aGUgZGVzY2VuZGFudCBub2RlIGVudHJpZXMgaW5zaWRlIGEgcm9vdCBub2RlLlxuICAgKi9cbiAgZGVzY2VuZGFudHM6IChcbiAgICByb290OiBOb2RlLFxuICAgIG9wdGlvbnM/OiBOb2RlRGVzY2VuZGFudHNPcHRpb25zXG4gICkgPT4gR2VuZXJhdG9yPE5vZGVFbnRyeTxEZXNjZW5kYW50Piwgdm9pZCwgdW5kZWZpbmVkPlxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBnZW5lcmF0b3Igb2YgYWxsIHRoZSBlbGVtZW50IG5vZGVzIGluc2lkZSBhIHJvb3Qgbm9kZS4gRWFjaCBpdGVyYXRpb25cbiAgICogd2lsbCByZXR1cm4gYW4gYEVsZW1lbnRFbnRyeWAgdHVwbGUgY29uc2lzdGluZyBvZiBgW0VsZW1lbnQsIFBhdGhdYC4gSWYgdGhlXG4gICAqIHJvb3Qgbm9kZSBpcyBhbiBlbGVtZW50IGl0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIGl0ZXJhdGlvbiBhcyB3ZWxsLlxuICAgKi9cbiAgZWxlbWVudHM6IChcbiAgICByb290OiBOb2RlLFxuICAgIG9wdGlvbnM/OiBOb2RlRWxlbWVudHNPcHRpb25zXG4gICkgPT4gR2VuZXJhdG9yPEVsZW1lbnRFbnRyeSwgdm9pZCwgdW5kZWZpbmVkPlxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IHByb3BzIGZyb20gYSBOb2RlLlxuICAgKi9cbiAgZXh0cmFjdFByb3BzOiAobm9kZTogTm9kZSkgPT4gTm9kZVByb3BzXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZmlyc3Qgbm9kZSBlbnRyeSBpbiBhIHJvb3Qgbm9kZSBmcm9tIGEgcGF0aC5cbiAgICovXG4gIGZpcnN0OiAocm9vdDogTm9kZSwgcGF0aDogUGF0aCkgPT4gTm9kZUVudHJ5XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2xpY2VkIGZyYWdtZW50IHJlcHJlc2VudGVkIGJ5IGEgcmFuZ2UgaW5zaWRlIGEgcm9vdCBub2RlLlxuICAgKi9cbiAgZnJhZ21lbnQ6IChyb290OiBOb2RlLCByYW5nZTogUmFuZ2UpID0+IERlc2NlbmRhbnRbXVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlc2NlbmRhbnQgbm9kZSByZWZlcnJlZCB0byBieSBhIHNwZWNpZmljIHBhdGguIElmIHRoZSBwYXRoIGlzIGFuXG4gICAqIGVtcHR5IGFycmF5LCBpdCByZWZlcnMgdG8gdGhlIHJvb3Qgbm9kZSBpdHNlbGYuXG4gICAqL1xuICBnZXQ6IChyb290OiBOb2RlLCBwYXRoOiBQYXRoKSA9PiBOb2RlXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgZGVzY2VuZGFudCBub2RlIGV4aXN0cyBhdCBhIHNwZWNpZmljIHBhdGguXG4gICAqL1xuICBoYXM6IChyb290OiBOb2RlLCBwYXRoOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaW1wbGVtZW50cyB0aGUgYE5vZGVgIGludGVyZmFjZS5cbiAgICovXG4gIGlzTm9kZTogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIE5vZGVcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIGxpc3Qgb2YgYE5vZGVgIG9iamVjdHMuXG4gICAqL1xuICBpc05vZGVMaXN0OiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgTm9kZVtdXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGFzdCBub2RlIGVudHJ5IGluIGEgcm9vdCBub2RlIGZyb20gYSBwYXRoLlxuICAgKi9cbiAgbGFzdDogKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpID0+IE5vZGVFbnRyeVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5vZGUgYXQgYSBzcGVjaWZpYyBwYXRoLCBlbnN1cmluZyBpdCdzIGEgbGVhZiB0ZXh0IG5vZGUuXG4gICAqL1xuICBsZWFmOiAocm9vdDogTm9kZSwgcGF0aDogUGF0aCkgPT4gVGV4dFxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBnZW5lcmF0b3Igb2YgdGhlIGluIGEgYnJhbmNoIG9mIHRoZSB0cmVlLCBmcm9tIGEgc3BlY2lmaWMgcGF0aC5cbiAgICpcbiAgICogQnkgZGVmYXVsdCB0aGUgb3JkZXIgaXMgdG9wLWRvd24sIGZyb20gaGlnaGVzdCB0byBsb3dlc3Qgbm9kZSBpbiB0aGUgdHJlZSxcbiAgICogYnV0IHlvdSBjYW4gcGFzcyB0aGUgYHJldmVyc2U6IHRydWVgIG9wdGlvbiB0byBnbyBib3R0b20tdXAuXG4gICAqL1xuICBsZXZlbHM6IChcbiAgICByb290OiBOb2RlLFxuICAgIHBhdGg6IFBhdGgsXG4gICAgb3B0aW9ucz86IE5vZGVMZXZlbHNPcHRpb25zXG4gICkgPT4gR2VuZXJhdG9yPE5vZGVFbnRyeSwgdm9pZCwgdW5kZWZpbmVkPlxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIG5vZGUgbWF0Y2hlcyBhIHNldCBvZiBwcm9wcy5cbiAgICovXG4gIG1hdGNoZXM6IChub2RlOiBOb2RlLCBwcm9wczogUGFydGlhbDxOb2RlPikgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBnZW5lcmF0b3Igb2YgYWxsIHRoZSBub2RlIGVudHJpZXMgb2YgYSByb290IG5vZGUuIEVhY2ggZW50cnkgaXNcbiAgICogcmV0dXJuZWQgYXMgYSBgW05vZGUsIFBhdGhdYCB0dXBsZSwgd2l0aCB0aGUgcGF0aCByZWZlcnJpbmcgdG8gdGhlIG5vZGUnc1xuICAgKiBwb3NpdGlvbiBpbnNpZGUgdGhlIHJvb3Qgbm9kZS5cbiAgICovXG4gIG5vZGVzOiAoXG4gICAgcm9vdDogTm9kZSxcbiAgICBvcHRpb25zPzogTm9kZU5vZGVzT3B0aW9uc1xuICApID0+IEdlbmVyYXRvcjxOb2RlRW50cnksIHZvaWQsIHVuZGVmaW5lZD5cblxuICAvKipcbiAgICogR2V0IHRoZSBwYXJlbnQgb2YgYSBub2RlIGF0IGEgc3BlY2lmaWMgcGF0aC5cbiAgICovXG4gIHBhcmVudDogKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpID0+IEFuY2VzdG9yXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29uY2F0ZW5hdGVkIHRleHQgc3RyaW5nIG9mIGEgbm9kZSdzIGNvbnRlbnQuXG4gICAqXG4gICAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgbm90IGluY2x1ZGUgc3BhY2VzIG9yIGxpbmUgYnJlYWtzIGJldHdlZW4gYmxvY2sgbm9kZXMuXG4gICAqIEl0IGlzIG5vdCBhIHVzZXItZmFjaW5nIHN0cmluZywgYnV0IGEgc3RyaW5nIGZvciBwZXJmb3JtaW5nIG9mZnNldC1yZWxhdGVkXG4gICAqIGNvbXB1dGF0aW9ucyBmb3IgYSBub2RlLlxuICAgKi9cbiAgc3RyaW5nOiAobm9kZTogTm9kZSkgPT4gc3RyaW5nXG5cbiAgLyoqXG4gICAqIFJldHVybiBhIGdlbmVyYXRvciBvZiBhbGwgbGVhZiB0ZXh0IG5vZGVzIGluIGEgcm9vdCBub2RlLlxuICAgKi9cbiAgdGV4dHM6IChcbiAgICByb290OiBOb2RlLFxuICAgIG9wdGlvbnM/OiBOb2RlVGV4dHNPcHRpb25zXG4gICkgPT4gR2VuZXJhdG9yPE5vZGVFbnRyeTxUZXh0Piwgdm9pZCwgdW5kZWZpbmVkPlxufVxuXG5jb25zdCBJU19OT0RFX0xJU1RfQ0FDSEUgPSBuZXcgV2Vha01hcDxhbnlbXSwgYm9vbGVhbj4oKVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgTm9kZTogTm9kZUludGVyZmFjZSA9IHtcbiAgYW5jZXN0b3Iocm9vdDogTm9kZSwgcGF0aDogUGF0aCk6IEFuY2VzdG9yIHtcbiAgICBjb25zdCBub2RlID0gTm9kZS5nZXQocm9vdCwgcGF0aClcblxuICAgIGlmIChUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCB0aGUgYW5jZXN0b3Igbm9kZSBhdCBwYXRoIFske3BhdGh9XSBiZWNhdXNlIGl0IHJlZmVycyB0byBhIHRleHQgbm9kZSBpbnN0ZWFkOiAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgICBub2RlXG4gICAgICAgICl9YFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBub2RlXG4gIH0sXG5cbiAgKmFuY2VzdG9ycyhcbiAgICByb290OiBOb2RlLFxuICAgIHBhdGg6IFBhdGgsXG4gICAgb3B0aW9uczogTm9kZUFuY2VzdG9yc09wdGlvbnMgPSB7fVxuICApOiBHZW5lcmF0b3I8Tm9kZUVudHJ5PEFuY2VzdG9yPiwgdm9pZCwgdW5kZWZpbmVkPiB7XG4gICAgZm9yIChjb25zdCBwIG9mIFBhdGguYW5jZXN0b3JzKHBhdGgsIG9wdGlvbnMpKSB7XG4gICAgICBjb25zdCBuID0gTm9kZS5hbmNlc3Rvcihyb290LCBwKVxuICAgICAgY29uc3QgZW50cnk6IE5vZGVFbnRyeTxBbmNlc3Rvcj4gPSBbbiwgcF1cbiAgICAgIHlpZWxkIGVudHJ5XG4gICAgfVxuICB9LFxuXG4gIGNoaWxkKHJvb3Q6IE5vZGUsIGluZGV4OiBudW1iZXIpOiBEZXNjZW5kYW50IHtcbiAgICBpZiAoVGV4dC5pc1RleHQocm9vdCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgdGhlIGNoaWxkIG9mIGEgdGV4dCBub2RlOiAke1NjcnViYmVyLnN0cmluZ2lmeShyb290KX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgYyA9IHJvb3QuY2hpbGRyZW5baW5kZXhdIGFzIERlc2NlbmRhbnRcblxuICAgIGlmIChjID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgY2hpbGQgYXQgaW5kZXggXFxgJHtpbmRleH1cXGAgaW4gbm9kZTogJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgICAgcm9vdFxuICAgICAgICApfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gY1xuICB9LFxuXG4gICpjaGlsZHJlbihcbiAgICByb290OiBOb2RlLFxuICAgIHBhdGg6IFBhdGgsXG4gICAgb3B0aW9uczogTm9kZUNoaWxkcmVuT3B0aW9ucyA9IHt9XG4gICk6IEdlbmVyYXRvcjxOb2RlRW50cnk8RGVzY2VuZGFudD4sIHZvaWQsIHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IHsgcmV2ZXJzZSA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgY29uc3QgYW5jZXN0b3IgPSBOb2RlLmFuY2VzdG9yKHJvb3QsIHBhdGgpXG4gICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gYW5jZXN0b3JcbiAgICBsZXQgaW5kZXggPSByZXZlcnNlID8gY2hpbGRyZW4ubGVuZ3RoIC0gMSA6IDBcblxuICAgIHdoaWxlIChyZXZlcnNlID8gaW5kZXggPj0gMCA6IGluZGV4IDwgY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IE5vZGUuY2hpbGQoYW5jZXN0b3IsIGluZGV4KVxuICAgICAgY29uc3QgY2hpbGRQYXRoID0gcGF0aC5jb25jYXQoaW5kZXgpXG4gICAgICB5aWVsZCBbY2hpbGQsIGNoaWxkUGF0aF1cbiAgICAgIGluZGV4ID0gcmV2ZXJzZSA/IGluZGV4IC0gMSA6IGluZGV4ICsgMVxuICAgIH1cbiAgfSxcblxuICBjb21tb24ocm9vdDogTm9kZSwgcGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IE5vZGVFbnRyeSB7XG4gICAgY29uc3QgcCA9IFBhdGguY29tbW9uKHBhdGgsIGFub3RoZXIpXG4gICAgY29uc3QgbiA9IE5vZGUuZ2V0KHJvb3QsIHApXG4gICAgcmV0dXJuIFtuLCBwXVxuICB9LFxuXG4gIGRlc2NlbmRhbnQocm9vdDogTm9kZSwgcGF0aDogUGF0aCk6IERlc2NlbmRhbnQge1xuICAgIGNvbnN0IG5vZGUgPSBOb2RlLmdldChyb290LCBwYXRoKVxuXG4gICAgaWYgKEVkaXRvci5pc0VkaXRvcihub2RlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCB0aGUgZGVzY2VuZGFudCBub2RlIGF0IHBhdGggWyR7cGF0aH1dIGJlY2F1c2UgaXQgcmVmZXJzIHRvIHRoZSByb290IGVkaXRvciBub2RlIGluc3RlYWQ6ICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICAgIG5vZGVcbiAgICAgICAgKX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVcbiAgfSxcblxuICAqZGVzY2VuZGFudHMoXG4gICAgcm9vdDogTm9kZSxcbiAgICBvcHRpb25zOiBOb2RlRGVzY2VuZGFudHNPcHRpb25zID0ge31cbiAgKTogR2VuZXJhdG9yPE5vZGVFbnRyeTxEZXNjZW5kYW50Piwgdm9pZCwgdW5kZWZpbmVkPiB7XG4gICAgZm9yIChjb25zdCBbbm9kZSwgcGF0aF0gb2YgTm9kZS5ub2Rlcyhyb290LCBvcHRpb25zKSkge1xuICAgICAgaWYgKHBhdGgubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIC8vIE5PVEU6IHdlIGhhdmUgdG8gY29lcmNlIGhlcmUgYmVjYXVzZSBjaGVja2luZyB0aGUgcGF0aCdzIGxlbmd0aCBkb2VzXG4gICAgICAgIC8vIGd1YXJhbnRlZSB0aGF0IGBub2RlYCBpcyBub3QgYSBgRWRpdG9yYCwgYnV0IFR5cGVTY3JpcHQgZG9lc24ndCBrbm93LlxuICAgICAgICB5aWVsZCBbbm9kZSwgcGF0aF0gYXMgTm9kZUVudHJ5PERlc2NlbmRhbnQ+XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gICplbGVtZW50cyhcbiAgICByb290OiBOb2RlLFxuICAgIG9wdGlvbnM6IE5vZGVFbGVtZW50c09wdGlvbnMgPSB7fVxuICApOiBHZW5lcmF0b3I8RWxlbWVudEVudHJ5LCB2b2lkLCB1bmRlZmluZWQ+IHtcbiAgICBmb3IgKGNvbnN0IFtub2RlLCBwYXRoXSBvZiBOb2RlLm5vZGVzKHJvb3QsIG9wdGlvbnMpKSB7XG4gICAgICBpZiAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkpIHtcbiAgICAgICAgeWllbGQgW25vZGUsIHBhdGhdXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGV4dHJhY3RQcm9wcyhub2RlOiBOb2RlKTogTm9kZVByb3BzIHtcbiAgICBpZiAoRWxlbWVudC5pc0FuY2VzdG9yKG5vZGUpKSB7XG4gICAgICBjb25zdCB7IGNoaWxkcmVuLCAuLi5wcm9wZXJ0aWVzIH0gPSBub2RlXG5cbiAgICAgIHJldHVybiBwcm9wZXJ0aWVzXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHsgdGV4dCwgLi4ucHJvcGVydGllcyB9ID0gbm9kZVxuXG4gICAgICByZXR1cm4gcHJvcGVydGllc1xuICAgIH1cbiAgfSxcblxuICBmaXJzdChyb290OiBOb2RlLCBwYXRoOiBQYXRoKTogTm9kZUVudHJ5IHtcbiAgICBjb25zdCBwID0gcGF0aC5zbGljZSgpXG4gICAgbGV0IG4gPSBOb2RlLmdldChyb290LCBwKVxuXG4gICAgd2hpbGUgKG4pIHtcbiAgICAgIGlmIChUZXh0LmlzVGV4dChuKSB8fCBuLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBicmVha1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbiA9IG4uY2hpbGRyZW5bMF1cbiAgICAgICAgcC5wdXNoKDApXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFtuLCBwXVxuICB9LFxuXG4gIGZyYWdtZW50KHJvb3Q6IE5vZGUsIHJhbmdlOiBSYW5nZSk6IERlc2NlbmRhbnRbXSB7XG4gICAgaWYgKFRleHQuaXNUZXh0KHJvb3QpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IGEgZnJhZ21lbnQgc3RhcnRpbmcgZnJvbSBhIHJvb3QgdGV4dCBub2RlOiAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgICByb290XG4gICAgICAgICl9YFxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IG5ld1Jvb3QgPSBwcm9kdWNlKHsgY2hpbGRyZW46IHJvb3QuY2hpbGRyZW4gfSwgciA9PiB7XG4gICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyhyYW5nZSlcbiAgICAgIGNvbnN0IG5vZGVFbnRyaWVzID0gTm9kZS5ub2RlcyhyLCB7XG4gICAgICAgIHJldmVyc2U6IHRydWUsXG4gICAgICAgIHBhc3M6IChbLCBwYXRoXSkgPT4gIVJhbmdlLmluY2x1ZGVzKHJhbmdlLCBwYXRoKSxcbiAgICAgIH0pXG5cbiAgICAgIGZvciAoY29uc3QgWywgcGF0aF0gb2Ygbm9kZUVudHJpZXMpIHtcbiAgICAgICAgaWYgKCFSYW5nZS5pbmNsdWRlcyhyYW5nZSwgcGF0aCkpIHtcbiAgICAgICAgICBjb25zdCBwYXJlbnQgPSBOb2RlLnBhcmVudChyLCBwYXRoKVxuICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG4gICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChQYXRoLmVxdWFscyhwYXRoLCBlbmQucGF0aCkpIHtcbiAgICAgICAgICBjb25zdCBsZWFmID0gTm9kZS5sZWFmKHIsIHBhdGgpXG4gICAgICAgICAgbGVhZi50ZXh0ID0gbGVhZi50ZXh0LnNsaWNlKDAsIGVuZC5vZmZzZXQpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoUGF0aC5lcXVhbHMocGF0aCwgc3RhcnQucGF0aCkpIHtcbiAgICAgICAgICBjb25zdCBsZWFmID0gTm9kZS5sZWFmKHIsIHBhdGgpXG4gICAgICAgICAgbGVhZi50ZXh0ID0gbGVhZi50ZXh0LnNsaWNlKHN0YXJ0Lm9mZnNldClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoRWRpdG9yLmlzRWRpdG9yKHIpKSB7XG4gICAgICAgIHIuc2VsZWN0aW9uID0gbnVsbFxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gbmV3Um9vdC5jaGlsZHJlblxuICB9LFxuXG4gIGdldChyb290OiBOb2RlLCBwYXRoOiBQYXRoKTogTm9kZSB7XG4gICAgbGV0IG5vZGUgPSByb290XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHAgPSBwYXRoW2ldXG5cbiAgICAgIGlmIChUZXh0LmlzVGV4dChub2RlKSB8fCAhbm9kZS5jaGlsZHJlbltwXSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYENhbm5vdCBmaW5kIGEgZGVzY2VuZGFudCBhdCBwYXRoIFske3BhdGh9XSBpbiBub2RlOiAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgICAgIHJvb3RcbiAgICAgICAgICApfWBcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBub2RlID0gbm9kZS5jaGlsZHJlbltwXVxuICAgIH1cblxuICAgIHJldHVybiBub2RlXG4gIH0sXG5cbiAgaGFzKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpOiBib29sZWFuIHtcbiAgICBsZXQgbm9kZSA9IHJvb3RcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcCA9IHBhdGhbaV1cblxuICAgICAgaWYgKFRleHQuaXNUZXh0KG5vZGUpIHx8ICFub2RlLmNoaWxkcmVuW3BdKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBub2RlID0gbm9kZS5jaGlsZHJlbltwXVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH0sXG5cbiAgaXNOb2RlKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBOb2RlIHtcbiAgICByZXR1cm4gKFxuICAgICAgVGV4dC5pc1RleHQodmFsdWUpIHx8IEVsZW1lbnQuaXNFbGVtZW50KHZhbHVlKSB8fCBFZGl0b3IuaXNFZGl0b3IodmFsdWUpXG4gICAgKVxuICB9LFxuXG4gIGlzTm9kZUxpc3QodmFsdWU6IGFueSk6IHZhbHVlIGlzIE5vZGVbXSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGNhY2hlZFJlc3VsdCA9IElTX05PREVfTElTVF9DQUNIRS5nZXQodmFsdWUpXG4gICAgaWYgKGNhY2hlZFJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gY2FjaGVkUmVzdWx0XG4gICAgfVxuICAgIGNvbnN0IGlzTm9kZUxpc3QgPSB2YWx1ZS5ldmVyeSh2YWwgPT4gTm9kZS5pc05vZGUodmFsKSlcbiAgICBJU19OT0RFX0xJU1RfQ0FDSEUuc2V0KHZhbHVlLCBpc05vZGVMaXN0KVxuICAgIHJldHVybiBpc05vZGVMaXN0XG4gIH0sXG5cbiAgbGFzdChyb290OiBOb2RlLCBwYXRoOiBQYXRoKTogTm9kZUVudHJ5IHtcbiAgICBjb25zdCBwID0gcGF0aC5zbGljZSgpXG4gICAgbGV0IG4gPSBOb2RlLmdldChyb290LCBwKVxuXG4gICAgd2hpbGUgKG4pIHtcbiAgICAgIGlmIChUZXh0LmlzVGV4dChuKSB8fCBuLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBicmVha1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaSA9IG4uY2hpbGRyZW4ubGVuZ3RoIC0gMVxuICAgICAgICBuID0gbi5jaGlsZHJlbltpXVxuICAgICAgICBwLnB1c2goaSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW24sIHBdXG4gIH0sXG5cbiAgbGVhZihyb290OiBOb2RlLCBwYXRoOiBQYXRoKTogVGV4dCB7XG4gICAgY29uc3Qgbm9kZSA9IE5vZGUuZ2V0KHJvb3QsIHBhdGgpXG5cbiAgICBpZiAoIVRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IHRoZSBsZWFmIG5vZGUgYXQgcGF0aCBbJHtwYXRofV0gYmVjYXVzZSBpdCByZWZlcnMgdG8gYSBub24tbGVhZiBub2RlOiAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgICBub2RlXG4gICAgICAgICl9YFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBub2RlXG4gIH0sXG5cbiAgKmxldmVscyhcbiAgICByb290OiBOb2RlLFxuICAgIHBhdGg6IFBhdGgsXG4gICAgb3B0aW9uczogTm9kZUxldmVsc09wdGlvbnMgPSB7fVxuICApOiBHZW5lcmF0b3I8Tm9kZUVudHJ5LCB2b2lkLCB1bmRlZmluZWQ+IHtcbiAgICBmb3IgKGNvbnN0IHAgb2YgUGF0aC5sZXZlbHMocGF0aCwgb3B0aW9ucykpIHtcbiAgICAgIGNvbnN0IG4gPSBOb2RlLmdldChyb290LCBwKVxuICAgICAgeWllbGQgW24sIHBdXG4gICAgfVxuICB9LFxuXG4gIG1hdGNoZXMobm9kZTogTm9kZSwgcHJvcHM6IFBhcnRpYWw8Tm9kZT4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmXG4gICAgICAgIEVsZW1lbnQuaXNFbGVtZW50UHJvcHMocHJvcHMpICYmXG4gICAgICAgIEVsZW1lbnQubWF0Y2hlcyhub2RlLCBwcm9wcykpIHx8XG4gICAgICAoVGV4dC5pc1RleHQobm9kZSkgJiZcbiAgICAgICAgVGV4dC5pc1RleHRQcm9wcyhwcm9wcykgJiZcbiAgICAgICAgVGV4dC5tYXRjaGVzKG5vZGUsIHByb3BzKSlcbiAgICApXG4gIH0sXG5cbiAgKm5vZGVzKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgb3B0aW9uczogTm9kZU5vZGVzT3B0aW9ucyA9IHt9XG4gICk6IEdlbmVyYXRvcjxOb2RlRW50cnksIHZvaWQsIHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IHsgcGFzcywgcmV2ZXJzZSA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgY29uc3QgeyBmcm9tID0gW10sIHRvIH0gPSBvcHRpb25zXG4gICAgY29uc3QgdmlzaXRlZCA9IG5ldyBTZXQoKVxuICAgIGxldCBwOiBQYXRoID0gW11cbiAgICBsZXQgbiA9IHJvb3RcblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBpZiAodG8gJiYgKHJldmVyc2UgPyBQYXRoLmlzQmVmb3JlKHAsIHRvKSA6IFBhdGguaXNBZnRlcihwLCB0bykpKSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGlmICghdmlzaXRlZC5oYXMobikpIHtcbiAgICAgICAgeWllbGQgW24sIHBdXG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlJ3JlIGFsbG93ZWQgdG8gZ28gZG93bndhcmQgYW5kIHdlIGhhdmVuJ3QgZGVzY2VuZGVkIHlldCwgZG8uXG4gICAgICBpZiAoXG4gICAgICAgICF2aXNpdGVkLmhhcyhuKSAmJlxuICAgICAgICAhVGV4dC5pc1RleHQobikgJiZcbiAgICAgICAgbi5jaGlsZHJlbi5sZW5ndGggIT09IDAgJiZcbiAgICAgICAgKHBhc3MgPT0gbnVsbCB8fCBwYXNzKFtuLCBwXSkgPT09IGZhbHNlKVxuICAgICAgKSB7XG4gICAgICAgIHZpc2l0ZWQuYWRkKG4pXG4gICAgICAgIGxldCBuZXh0SW5kZXggPSByZXZlcnNlID8gbi5jaGlsZHJlbi5sZW5ndGggLSAxIDogMFxuXG4gICAgICAgIGlmIChQYXRoLmlzQW5jZXN0b3IocCwgZnJvbSkpIHtcbiAgICAgICAgICBuZXh0SW5kZXggPSBmcm9tW3AubGVuZ3RoXVxuICAgICAgICB9XG5cbiAgICAgICAgcCA9IHAuY29uY2F0KG5leHRJbmRleClcbiAgICAgICAgbiA9IE5vZGUuZ2V0KHJvb3QsIHApXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlJ3JlIGF0IHRoZSByb290IGFuZCB3ZSBjYW4ndCBnbyBkb3duLCB3ZSdyZSBkb25lLlxuICAgICAgaWYgKHAubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlJ3JlIGdvaW5nIGZvcndhcmQuLi5cbiAgICAgIGlmICghcmV2ZXJzZSkge1xuICAgICAgICBjb25zdCBuZXdQYXRoID0gUGF0aC5uZXh0KHApXG5cbiAgICAgICAgaWYgKE5vZGUuaGFzKHJvb3QsIG5ld1BhdGgpKSB7XG4gICAgICAgICAgcCA9IG5ld1BhdGhcbiAgICAgICAgICBuID0gTm9kZS5nZXQocm9vdCwgcClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlJ3JlIGdvaW5nIGJhY2t3YXJkLi4uXG4gICAgICBpZiAocmV2ZXJzZSAmJiBwW3AubGVuZ3RoIC0gMV0gIT09IDApIHtcbiAgICAgICAgY29uc3QgbmV3UGF0aCA9IFBhdGgucHJldmlvdXMocClcbiAgICAgICAgcCA9IG5ld1BhdGhcbiAgICAgICAgbiA9IE5vZGUuZ2V0KHJvb3QsIHApXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIE90aGVyd2lzZSB3ZSdyZSBnb2luZyB1cHdhcmQuLi5cbiAgICAgIHAgPSBQYXRoLnBhcmVudChwKVxuICAgICAgbiA9IE5vZGUuZ2V0KHJvb3QsIHApXG4gICAgICB2aXNpdGVkLmFkZChuKVxuICAgIH1cbiAgfSxcblxuICBwYXJlbnQocm9vdDogTm9kZSwgcGF0aDogUGF0aCk6IEFuY2VzdG9yIHtcbiAgICBjb25zdCBwYXJlbnRQYXRoID0gUGF0aC5wYXJlbnQocGF0aClcbiAgICBjb25zdCBwID0gTm9kZS5nZXQocm9vdCwgcGFyZW50UGF0aClcblxuICAgIGlmIChUZXh0LmlzVGV4dChwKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCB0aGUgcGFyZW50IG9mIHBhdGggWyR7cGF0aH1dIGJlY2F1c2UgaXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIHJvb3QuYFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBwXG4gIH0sXG5cbiAgc3RyaW5nKG5vZGU6IE5vZGUpOiBzdHJpbmcge1xuICAgIGlmIChUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgcmV0dXJuIG5vZGUudGV4dFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbm9kZS5jaGlsZHJlbi5tYXAoTm9kZS5zdHJpbmcpLmpvaW4oJycpXG4gICAgfVxuICB9LFxuXG4gICp0ZXh0cyhcbiAgICByb290OiBOb2RlLFxuICAgIG9wdGlvbnM6IE5vZGVUZXh0c09wdGlvbnMgPSB7fVxuICApOiBHZW5lcmF0b3I8Tm9kZUVudHJ5PFRleHQ+LCB2b2lkLCB1bmRlZmluZWQ+IHtcbiAgICBmb3IgKGNvbnN0IFtub2RlLCBwYXRoXSBvZiBOb2RlLm5vZGVzKHJvb3QsIG9wdGlvbnMpKSB7XG4gICAgICBpZiAoVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICAgICAgeWllbGQgW25vZGUsIHBhdGhdXG4gICAgICB9XG4gICAgfVxuICB9LFxufVxuXG4vKipcbiAqIFRoZSBgRGVzY2VuZGFudGAgdW5pb24gdHlwZSByZXByZXNlbnRzIG5vZGVzIHRoYXQgYXJlIGRlc2NlbmRhbnRzIGluIHRoZVxuICogdHJlZS4gSXQgaXMgcmV0dXJuZWQgYXMgYSBjb252ZW5pZW5jZSBpbiBjZXJ0YWluIGNhc2VzIHRvIG5hcnJvdyBhIHZhbHVlXG4gKiBmdXJ0aGVyIHRoYW4gdGhlIG1vcmUgZ2VuZXJpYyBgTm9kZWAgdW5pb24uXG4gKi9cblxuZXhwb3J0IHR5cGUgRGVzY2VuZGFudCA9IEVsZW1lbnQgfCBUZXh0XG5cbi8qKlxuICogVGhlIGBBbmNlc3RvcmAgdW5pb24gdHlwZSByZXByZXNlbnRzIG5vZGVzIHRoYXQgYXJlIGFuY2VzdG9ycyBpbiB0aGUgdHJlZS5cbiAqIEl0IGlzIHJldHVybmVkIGFzIGEgY29udmVuaWVuY2UgaW4gY2VydGFpbiBjYXNlcyB0byBuYXJyb3cgYSB2YWx1ZSBmdXJ0aGVyXG4gKiB0aGFuIHRoZSBtb3JlIGdlbmVyaWMgYE5vZGVgIHVuaW9uLlxuICovXG5cbmV4cG9ydCB0eXBlIEFuY2VzdG9yID0gRWRpdG9yIHwgRWxlbWVudFxuXG4vKipcbiAqIGBOb2RlRW50cnlgIG9iamVjdHMgYXJlIHJldHVybmVkIHdoZW4gaXRlcmF0aW5nIG92ZXIgdGhlIG5vZGVzIGluIGEgU2xhdGVcbiAqIGRvY3VtZW50IHRyZWUuIFRoZXkgY29uc2lzdCBvZiB0aGUgbm9kZSBhbmQgaXRzIGBQYXRoYCByZWxhdGl2ZSB0byB0aGUgcm9vdFxuICogbm9kZSBpbiB0aGUgZG9jdW1lbnQuXG4gKi9cblxuZXhwb3J0IHR5cGUgTm9kZUVudHJ5PFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4gPSBbVCwgUGF0aF1cblxuLyoqXG4gKiBDb252ZW5pZW5jZSB0eXBlIGZvciByZXR1cm5pbmcgdGhlIHByb3BzIG9mIGEgbm9kZS5cbiAqL1xuZXhwb3J0IHR5cGUgTm9kZVByb3BzID1cbiAgfCBPbWl0PEVkaXRvciwgJ2NoaWxkcmVuJz5cbiAgfCBPbWl0PEVsZW1lbnQsICdjaGlsZHJlbic+XG4gIHwgT21pdDxUZXh0LCAndGV4dCc+XG4iLCAiaW1wb3J0IHsgRXh0ZW5kZWRUeXBlLCBOb2RlLCBQYXRoLCBSYW5nZSB9IGZyb20gJy4uJ1xuaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ2lzLXBsYWluLW9iamVjdCdcblxuZXhwb3J0IHR5cGUgQmFzZUluc2VydE5vZGVPcGVyYXRpb24gPSB7XG4gIHR5cGU6ICdpbnNlcnRfbm9kZSdcbiAgcGF0aDogUGF0aFxuICBub2RlOiBOb2RlXG59XG5cbmV4cG9ydCB0eXBlIEluc2VydE5vZGVPcGVyYXRpb24gPSBFeHRlbmRlZFR5cGU8XG4gICdJbnNlcnROb2RlT3BlcmF0aW9uJyxcbiAgQmFzZUluc2VydE5vZGVPcGVyYXRpb25cbj5cblxuZXhwb3J0IHR5cGUgQmFzZUluc2VydFRleHRPcGVyYXRpb24gPSB7XG4gIHR5cGU6ICdpbnNlcnRfdGV4dCdcbiAgcGF0aDogUGF0aFxuICBvZmZzZXQ6IG51bWJlclxuICB0ZXh0OiBzdHJpbmdcbn1cblxuZXhwb3J0IHR5cGUgSW5zZXJ0VGV4dE9wZXJhdGlvbiA9IEV4dGVuZGVkVHlwZTxcbiAgJ0luc2VydFRleHRPcGVyYXRpb24nLFxuICBCYXNlSW5zZXJ0VGV4dE9wZXJhdGlvblxuPlxuXG5leHBvcnQgdHlwZSBCYXNlTWVyZ2VOb2RlT3BlcmF0aW9uID0ge1xuICB0eXBlOiAnbWVyZ2Vfbm9kZSdcbiAgcGF0aDogUGF0aFxuICBwb3NpdGlvbjogbnVtYmVyXG4gIHByb3BlcnRpZXM6IFBhcnRpYWw8Tm9kZT5cbn1cblxuZXhwb3J0IHR5cGUgTWVyZ2VOb2RlT3BlcmF0aW9uID0gRXh0ZW5kZWRUeXBlPFxuICAnTWVyZ2VOb2RlT3BlcmF0aW9uJyxcbiAgQmFzZU1lcmdlTm9kZU9wZXJhdGlvblxuPlxuXG5leHBvcnQgdHlwZSBCYXNlTW92ZU5vZGVPcGVyYXRpb24gPSB7XG4gIHR5cGU6ICdtb3ZlX25vZGUnXG4gIHBhdGg6IFBhdGhcbiAgbmV3UGF0aDogUGF0aFxufVxuXG5leHBvcnQgdHlwZSBNb3ZlTm9kZU9wZXJhdGlvbiA9IEV4dGVuZGVkVHlwZTxcbiAgJ01vdmVOb2RlT3BlcmF0aW9uJyxcbiAgQmFzZU1vdmVOb2RlT3BlcmF0aW9uXG4+XG5cbmV4cG9ydCB0eXBlIEJhc2VSZW1vdmVOb2RlT3BlcmF0aW9uID0ge1xuICB0eXBlOiAncmVtb3ZlX25vZGUnXG4gIHBhdGg6IFBhdGhcbiAgbm9kZTogTm9kZVxufVxuXG5leHBvcnQgdHlwZSBSZW1vdmVOb2RlT3BlcmF0aW9uID0gRXh0ZW5kZWRUeXBlPFxuICAnUmVtb3ZlTm9kZU9wZXJhdGlvbicsXG4gIEJhc2VSZW1vdmVOb2RlT3BlcmF0aW9uXG4+XG5cbmV4cG9ydCB0eXBlIEJhc2VSZW1vdmVUZXh0T3BlcmF0aW9uID0ge1xuICB0eXBlOiAncmVtb3ZlX3RleHQnXG4gIHBhdGg6IFBhdGhcbiAgb2Zmc2V0OiBudW1iZXJcbiAgdGV4dDogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIFJlbW92ZVRleHRPcGVyYXRpb24gPSBFeHRlbmRlZFR5cGU8XG4gICdSZW1vdmVUZXh0T3BlcmF0aW9uJyxcbiAgQmFzZVJlbW92ZVRleHRPcGVyYXRpb25cbj5cblxuZXhwb3J0IHR5cGUgQmFzZVNldE5vZGVPcGVyYXRpb24gPSB7XG4gIHR5cGU6ICdzZXRfbm9kZSdcbiAgcGF0aDogUGF0aFxuICBwcm9wZXJ0aWVzOiBQYXJ0aWFsPE5vZGU+XG4gIG5ld1Byb3BlcnRpZXM6IFBhcnRpYWw8Tm9kZT5cbn1cblxuZXhwb3J0IHR5cGUgU2V0Tm9kZU9wZXJhdGlvbiA9IEV4dGVuZGVkVHlwZTxcbiAgJ1NldE5vZGVPcGVyYXRpb24nLFxuICBCYXNlU2V0Tm9kZU9wZXJhdGlvblxuPlxuXG5leHBvcnQgdHlwZSBCYXNlU2V0U2VsZWN0aW9uT3BlcmF0aW9uID1cbiAgfCB7XG4gICAgICB0eXBlOiAnc2V0X3NlbGVjdGlvbidcbiAgICAgIHByb3BlcnRpZXM6IG51bGxcbiAgICAgIG5ld1Byb3BlcnRpZXM6IFJhbmdlXG4gICAgfVxuICB8IHtcbiAgICAgIHR5cGU6ICdzZXRfc2VsZWN0aW9uJ1xuICAgICAgcHJvcGVydGllczogUGFydGlhbDxSYW5nZT5cbiAgICAgIG5ld1Byb3BlcnRpZXM6IFBhcnRpYWw8UmFuZ2U+XG4gICAgfVxuICB8IHtcbiAgICAgIHR5cGU6ICdzZXRfc2VsZWN0aW9uJ1xuICAgICAgcHJvcGVydGllczogUmFuZ2VcbiAgICAgIG5ld1Byb3BlcnRpZXM6IG51bGxcbiAgICB9XG5cbmV4cG9ydCB0eXBlIFNldFNlbGVjdGlvbk9wZXJhdGlvbiA9IEV4dGVuZGVkVHlwZTxcbiAgJ1NldFNlbGVjdGlvbk9wZXJhdGlvbicsXG4gIEJhc2VTZXRTZWxlY3Rpb25PcGVyYXRpb25cbj5cblxuZXhwb3J0IHR5cGUgQmFzZVNwbGl0Tm9kZU9wZXJhdGlvbiA9IHtcbiAgdHlwZTogJ3NwbGl0X25vZGUnXG4gIHBhdGg6IFBhdGhcbiAgcG9zaXRpb246IG51bWJlclxuICBwcm9wZXJ0aWVzOiBQYXJ0aWFsPE5vZGU+XG59XG5cbmV4cG9ydCB0eXBlIFNwbGl0Tm9kZU9wZXJhdGlvbiA9IEV4dGVuZGVkVHlwZTxcbiAgJ1NwbGl0Tm9kZU9wZXJhdGlvbicsXG4gIEJhc2VTcGxpdE5vZGVPcGVyYXRpb25cbj5cblxuZXhwb3J0IHR5cGUgTm9kZU9wZXJhdGlvbiA9XG4gIHwgSW5zZXJ0Tm9kZU9wZXJhdGlvblxuICB8IE1lcmdlTm9kZU9wZXJhdGlvblxuICB8IE1vdmVOb2RlT3BlcmF0aW9uXG4gIHwgUmVtb3ZlTm9kZU9wZXJhdGlvblxuICB8IFNldE5vZGVPcGVyYXRpb25cbiAgfCBTcGxpdE5vZGVPcGVyYXRpb25cblxuZXhwb3J0IHR5cGUgU2VsZWN0aW9uT3BlcmF0aW9uID0gU2V0U2VsZWN0aW9uT3BlcmF0aW9uXG5cbmV4cG9ydCB0eXBlIFRleHRPcGVyYXRpb24gPSBJbnNlcnRUZXh0T3BlcmF0aW9uIHwgUmVtb3ZlVGV4dE9wZXJhdGlvblxuXG4vKipcbiAqIGBPcGVyYXRpb25gIG9iamVjdHMgZGVmaW5lIHRoZSBsb3ctbGV2ZWwgaW5zdHJ1Y3Rpb25zIHRoYXQgU2xhdGUgZWRpdG9ycyB1c2VcbiAqIHRvIGFwcGx5IGNoYW5nZXMgdG8gdGhlaXIgaW50ZXJuYWwgc3RhdGUuIFJlcHJlc2VudGluZyBhbGwgY2hhbmdlcyBhc1xuICogb3BlcmF0aW9ucyBpcyB3aGF0IGFsbG93cyBTbGF0ZSBlZGl0b3JzIHRvIGVhc2lseSBpbXBsZW1lbnQgaGlzdG9yeSxcbiAqIGNvbGxhYm9yYXRpb24sIGFuZCBvdGhlciBmZWF0dXJlcy5cbiAqL1xuXG5leHBvcnQgdHlwZSBCYXNlT3BlcmF0aW9uID0gTm9kZU9wZXJhdGlvbiB8IFNlbGVjdGlvbk9wZXJhdGlvbiB8IFRleHRPcGVyYXRpb25cbmV4cG9ydCB0eXBlIE9wZXJhdGlvbiA9IEV4dGVuZGVkVHlwZTwnT3BlcmF0aW9uJywgQmFzZU9wZXJhdGlvbj5cblxuZXhwb3J0IGludGVyZmFjZSBPcGVyYXRpb25JbnRlcmZhY2Uge1xuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIGBOb2RlT3BlcmF0aW9uYCBvYmplY3QuXG4gICAqL1xuICBpc05vZGVPcGVyYXRpb246ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBOb2RlT3BlcmF0aW9uXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYW4gYE9wZXJhdGlvbmAgb2JqZWN0LlxuICAgKi9cbiAgaXNPcGVyYXRpb246ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBPcGVyYXRpb25cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIGxpc3Qgb2YgYE9wZXJhdGlvbmAgb2JqZWN0cy5cbiAgICovXG4gIGlzT3BlcmF0aW9uTGlzdDogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIE9wZXJhdGlvbltdXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBgU2VsZWN0aW9uT3BlcmF0aW9uYCBvYmplY3QuXG4gICAqL1xuICBpc1NlbGVjdGlvbk9wZXJhdGlvbjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIFNlbGVjdGlvbk9wZXJhdGlvblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgYFRleHRPcGVyYXRpb25gIG9iamVjdC5cbiAgICovXG4gIGlzVGV4dE9wZXJhdGlvbjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIFRleHRPcGVyYXRpb25cblxuICAvKipcbiAgICogSW52ZXJ0IGFuIG9wZXJhdGlvbiwgcmV0dXJuaW5nIGEgbmV3IG9wZXJhdGlvbiB0aGF0IHdpbGwgZXhhY3RseSB1bmRvIHRoZVxuICAgKiBvcmlnaW5hbCB3aGVuIGFwcGxpZWQuXG4gICAqL1xuICBpbnZlcnNlOiAob3A6IE9wZXJhdGlvbikgPT4gT3BlcmF0aW9uXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBPcGVyYXRpb246IE9wZXJhdGlvbkludGVyZmFjZSA9IHtcbiAgaXNOb2RlT3BlcmF0aW9uKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBOb2RlT3BlcmF0aW9uIHtcbiAgICByZXR1cm4gT3BlcmF0aW9uLmlzT3BlcmF0aW9uKHZhbHVlKSAmJiB2YWx1ZS50eXBlLmVuZHNXaXRoKCdfbm9kZScpXG4gIH0sXG5cbiAgaXNPcGVyYXRpb24odmFsdWU6IGFueSk6IHZhbHVlIGlzIE9wZXJhdGlvbiB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgc3dpdGNoICh2YWx1ZS50eXBlKSB7XG4gICAgICBjYXNlICdpbnNlcnRfbm9kZSc6XG4gICAgICAgIHJldHVybiBQYXRoLmlzUGF0aCh2YWx1ZS5wYXRoKSAmJiBOb2RlLmlzTm9kZSh2YWx1ZS5ub2RlKVxuICAgICAgY2FzZSAnaW5zZXJ0X3RleHQnOlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHR5cGVvZiB2YWx1ZS5vZmZzZXQgPT09ICdudW1iZXInICYmXG4gICAgICAgICAgdHlwZW9mIHZhbHVlLnRleHQgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgUGF0aC5pc1BhdGgodmFsdWUucGF0aClcbiAgICAgICAgKVxuICAgICAgY2FzZSAnbWVyZ2Vfbm9kZSc6XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgdHlwZW9mIHZhbHVlLnBvc2l0aW9uID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgIFBhdGguaXNQYXRoKHZhbHVlLnBhdGgpICYmXG4gICAgICAgICAgaXNQbGFpbk9iamVjdCh2YWx1ZS5wcm9wZXJ0aWVzKVxuICAgICAgICApXG4gICAgICBjYXNlICdtb3ZlX25vZGUnOlxuICAgICAgICByZXR1cm4gUGF0aC5pc1BhdGgodmFsdWUucGF0aCkgJiYgUGF0aC5pc1BhdGgodmFsdWUubmV3UGF0aClcbiAgICAgIGNhc2UgJ3JlbW92ZV9ub2RlJzpcbiAgICAgICAgcmV0dXJuIFBhdGguaXNQYXRoKHZhbHVlLnBhdGgpICYmIE5vZGUuaXNOb2RlKHZhbHVlLm5vZGUpXG4gICAgICBjYXNlICdyZW1vdmVfdGV4dCc6XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgdHlwZW9mIHZhbHVlLm9mZnNldCA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICB0eXBlb2YgdmFsdWUudGV4dCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICBQYXRoLmlzUGF0aCh2YWx1ZS5wYXRoKVxuICAgICAgICApXG4gICAgICBjYXNlICdzZXRfbm9kZSc6XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgUGF0aC5pc1BhdGgodmFsdWUucGF0aCkgJiZcbiAgICAgICAgICBpc1BsYWluT2JqZWN0KHZhbHVlLnByb3BlcnRpZXMpICYmXG4gICAgICAgICAgaXNQbGFpbk9iamVjdCh2YWx1ZS5uZXdQcm9wZXJ0aWVzKVxuICAgICAgICApXG4gICAgICBjYXNlICdzZXRfc2VsZWN0aW9uJzpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAodmFsdWUucHJvcGVydGllcyA9PT0gbnVsbCAmJiBSYW5nZS5pc1JhbmdlKHZhbHVlLm5ld1Byb3BlcnRpZXMpKSB8fFxuICAgICAgICAgICh2YWx1ZS5uZXdQcm9wZXJ0aWVzID09PSBudWxsICYmIFJhbmdlLmlzUmFuZ2UodmFsdWUucHJvcGVydGllcykpIHx8XG4gICAgICAgICAgKGlzUGxhaW5PYmplY3QodmFsdWUucHJvcGVydGllcykgJiZcbiAgICAgICAgICAgIGlzUGxhaW5PYmplY3QodmFsdWUubmV3UHJvcGVydGllcykpXG4gICAgICAgIClcbiAgICAgIGNhc2UgJ3NwbGl0X25vZGUnOlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIFBhdGguaXNQYXRoKHZhbHVlLnBhdGgpICYmXG4gICAgICAgICAgdHlwZW9mIHZhbHVlLnBvc2l0aW9uID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgIGlzUGxhaW5PYmplY3QodmFsdWUucHJvcGVydGllcylcbiAgICAgICAgKVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9LFxuXG4gIGlzT3BlcmF0aW9uTGlzdCh2YWx1ZTogYW55KTogdmFsdWUgaXMgT3BlcmF0aW9uW10ge1xuICAgIHJldHVybiAoXG4gICAgICBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5ldmVyeSh2YWwgPT4gT3BlcmF0aW9uLmlzT3BlcmF0aW9uKHZhbCkpXG4gICAgKVxuICB9LFxuXG4gIGlzU2VsZWN0aW9uT3BlcmF0aW9uKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBTZWxlY3Rpb25PcGVyYXRpb24ge1xuICAgIHJldHVybiBPcGVyYXRpb24uaXNPcGVyYXRpb24odmFsdWUpICYmIHZhbHVlLnR5cGUuZW5kc1dpdGgoJ19zZWxlY3Rpb24nKVxuICB9LFxuXG4gIGlzVGV4dE9wZXJhdGlvbih2YWx1ZTogYW55KTogdmFsdWUgaXMgVGV4dE9wZXJhdGlvbiB7XG4gICAgcmV0dXJuIE9wZXJhdGlvbi5pc09wZXJhdGlvbih2YWx1ZSkgJiYgdmFsdWUudHlwZS5lbmRzV2l0aCgnX3RleHQnKVxuICB9LFxuXG4gIGludmVyc2Uob3A6IE9wZXJhdGlvbik6IE9wZXJhdGlvbiB7XG4gICAgc3dpdGNoIChvcC50eXBlKSB7XG4gICAgICBjYXNlICdpbnNlcnRfbm9kZSc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4ub3AsIHR5cGU6ICdyZW1vdmVfbm9kZScgfVxuICAgICAgfVxuXG4gICAgICBjYXNlICdpbnNlcnRfdGV4dCc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4ub3AsIHR5cGU6ICdyZW1vdmVfdGV4dCcgfVxuICAgICAgfVxuXG4gICAgICBjYXNlICdtZXJnZV9ub2RlJzoge1xuICAgICAgICByZXR1cm4geyAuLi5vcCwgdHlwZTogJ3NwbGl0X25vZGUnLCBwYXRoOiBQYXRoLnByZXZpb3VzKG9wLnBhdGgpIH1cbiAgICAgIH1cblxuICAgICAgY2FzZSAnbW92ZV9ub2RlJzoge1xuICAgICAgICBjb25zdCB7IG5ld1BhdGgsIHBhdGggfSA9IG9wXG5cbiAgICAgICAgLy8gUEVSRjogaW4gdGhpcyBjYXNlIHRoZSBtb3ZlIG9wZXJhdGlvbiBpcyBhIG5vLW9wIGFueXdheXMuXG4gICAgICAgIGlmIChQYXRoLmVxdWFscyhuZXdQYXRoLCBwYXRoKSkge1xuICAgICAgICAgIHJldHVybiBvcFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlIG1vdmUgaGFwcGVucyBjb21wbGV0ZWx5IHdpdGhpbiBhIHNpbmdsZSBwYXJlbnQgdGhlIHBhdGggYW5kXG4gICAgICAgIC8vIG5ld1BhdGggYXJlIHN0YWJsZSB3aXRoIHJlc3BlY3QgdG8gZWFjaCBvdGhlci5cbiAgICAgICAgaWYgKFBhdGguaXNTaWJsaW5nKHBhdGgsIG5ld1BhdGgpKSB7XG4gICAgICAgICAgcmV0dXJuIHsgLi4ub3AsIHBhdGg6IG5ld1BhdGgsIG5ld1BhdGg6IHBhdGggfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlIG1vdmUgZG9lcyBub3QgaGFwcGVuIHdpdGhpbiBhIHNpbmdsZSBwYXJlbnQgaXQgaXMgcG9zc2libGVcbiAgICAgICAgLy8gZm9yIHRoZSBtb3ZlIHRvIGltcGFjdCB0aGUgdHJ1ZSBwYXRoIHRvIHRoZSBsb2NhdGlvbiB3aGVyZSB0aGUgbm9kZVxuICAgICAgICAvLyB3YXMgcmVtb3ZlZCBmcm9tIGFuZCB3aGVyZSBpdCB3YXMgaW5zZXJ0ZWQuIFdlIGhhdmUgdG8gYWRqdXN0IGZvciB0aGlzXG4gICAgICAgIC8vIGFuZCBmaW5kIHRoZSBvcmlnaW5hbCBwYXRoLiBXZSBjYW4gYWNjb21wbGlzaCB0aGlzIChvbmx5IGluIG5vbi1zaWJsaW5nKVxuICAgICAgICAvLyBtb3ZlcyBieSBsb29raW5nIGF0IHRoZSBpbXBhY3Qgb2YgdGhlIG1vdmUgb3BlcmF0aW9uIG9uIHRoZSBub2RlXG4gICAgICAgIC8vIGFmdGVyIHRoZSBvcmlnaW5hbCBtb3ZlIHBhdGguXG4gICAgICAgIGNvbnN0IGludmVyc2VQYXRoID0gUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3ApIVxuICAgICAgICBjb25zdCBpbnZlcnNlTmV3UGF0aCA9IFBhdGgudHJhbnNmb3JtKFBhdGgubmV4dChwYXRoKSwgb3ApIVxuICAgICAgICByZXR1cm4geyAuLi5vcCwgcGF0aDogaW52ZXJzZVBhdGgsIG5ld1BhdGg6IGludmVyc2VOZXdQYXRoIH1cbiAgICAgIH1cblxuICAgICAgY2FzZSAncmVtb3ZlX25vZGUnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLm9wLCB0eXBlOiAnaW5zZXJ0X25vZGUnIH1cbiAgICAgIH1cblxuICAgICAgY2FzZSAncmVtb3ZlX3RleHQnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLm9wLCB0eXBlOiAnaW5zZXJ0X3RleHQnIH1cbiAgICAgIH1cblxuICAgICAgY2FzZSAnc2V0X25vZGUnOiB7XG4gICAgICAgIGNvbnN0IHsgcHJvcGVydGllcywgbmV3UHJvcGVydGllcyB9ID0gb3BcbiAgICAgICAgcmV0dXJuIHsgLi4ub3AsIHByb3BlcnRpZXM6IG5ld1Byb3BlcnRpZXMsIG5ld1Byb3BlcnRpZXM6IHByb3BlcnRpZXMgfVxuICAgICAgfVxuXG4gICAgICBjYXNlICdzZXRfc2VsZWN0aW9uJzoge1xuICAgICAgICBjb25zdCB7IHByb3BlcnRpZXMsIG5ld1Byb3BlcnRpZXMgfSA9IG9wXG5cbiAgICAgICAgaWYgKHByb3BlcnRpZXMgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5vcCxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IG5ld1Byb3BlcnRpZXMgYXMgUmFuZ2UsXG4gICAgICAgICAgICBuZXdQcm9wZXJ0aWVzOiBudWxsLFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChuZXdQcm9wZXJ0aWVzID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ub3AsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBudWxsLFxuICAgICAgICAgICAgbmV3UHJvcGVydGllczogcHJvcGVydGllcyBhcyBSYW5nZSxcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHsgLi4ub3AsIHByb3BlcnRpZXM6IG5ld1Byb3BlcnRpZXMsIG5ld1Byb3BlcnRpZXM6IHByb3BlcnRpZXMgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3NwbGl0X25vZGUnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLm9wLCB0eXBlOiAnbWVyZ2Vfbm9kZScsIHBhdGg6IFBhdGgubmV4dChvcC5wYXRoKSB9XG4gICAgICB9XG4gICAgfVxuICB9LFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnaXMtcGxhaW4tb2JqZWN0J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IE9wZXJhdGlvbiB9IGZyb20gJy4uL2ludGVyZmFjZXMvb3BlcmF0aW9uJ1xuXG5jb25zdCBJU19FRElUT1JfQ0FDSEUgPSBuZXcgV2Vha01hcDxvYmplY3QsIGJvb2xlYW4+KClcblxuZXhwb3J0IGNvbnN0IGlzRWRpdG9yOiBFZGl0b3JJbnRlcmZhY2VbJ2lzRWRpdG9yJ10gPSAoXG4gIHZhbHVlOiBhbnlcbik6IHZhbHVlIGlzIEVkaXRvciA9PiB7XG4gIGNvbnN0IGNhY2hlZElzRWRpdG9yID0gSVNfRURJVE9SX0NBQ0hFLmdldCh2YWx1ZSlcbiAgaWYgKGNhY2hlZElzRWRpdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gY2FjaGVkSXNFZGl0b3JcbiAgfVxuXG4gIGlmICghaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGNvbnN0IGlzRWRpdG9yID1cbiAgICB0eXBlb2YgdmFsdWUuYWRkTWFyayA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5hcHBseSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5kZWxldGVGcmFnbWVudCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5pbnNlcnRCcmVhayA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5pbnNlcnRTb2Z0QnJlYWsgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuaW5zZXJ0RnJhZ21lbnQgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuaW5zZXJ0Tm9kZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5pbnNlcnRUZXh0ID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmlzRWxlbWVudFJlYWRPbmx5ID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmlzSW5saW5lID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmlzU2VsZWN0YWJsZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5pc1ZvaWQgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUubm9ybWFsaXplTm9kZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5vbkNoYW5nZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5yZW1vdmVNYXJrID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmdldERpcnR5UGF0aHMgPT09ICdmdW5jdGlvbicgJiZcbiAgICAodmFsdWUubWFya3MgPT09IG51bGwgfHwgaXNQbGFpbk9iamVjdCh2YWx1ZS5tYXJrcykpICYmXG4gICAgKHZhbHVlLnNlbGVjdGlvbiA9PT0gbnVsbCB8fCBSYW5nZS5pc1JhbmdlKHZhbHVlLnNlbGVjdGlvbikpICYmXG4gICAgTm9kZS5pc05vZGVMaXN0KHZhbHVlLmNoaWxkcmVuKSAmJlxuICAgIE9wZXJhdGlvbi5pc09wZXJhdGlvbkxpc3QodmFsdWUub3BlcmF0aW9ucylcbiAgSVNfRURJVE9SX0NBQ0hFLnNldCh2YWx1ZSwgaXNFZGl0b3IpXG4gIHJldHVybiBpc0VkaXRvclxufVxuIiwgImltcG9ydCB7XG4gIEFuY2VzdG9yLFxuICBEZXNjZW5kYW50LFxuICBFbGVtZW50LFxuICBFeHRlbmRlZFR5cGUsXG4gIExvY2F0aW9uLFxuICBOb2RlLFxuICBOb2RlRW50cnksXG4gIE9wZXJhdGlvbixcbiAgUGF0aCxcbiAgUGF0aFJlZixcbiAgUG9pbnQsXG4gIFBvaW50UmVmLFxuICBSYW5nZSxcbiAgUmFuZ2VSZWYsXG4gIFNwYW4sXG4gIFRleHQsXG4gIFRyYW5zZm9ybXMsXG59IGZyb20gJy4uJ1xuaW1wb3J0IHtcbiAgTGVhZkVkZ2UsXG4gIE1heGltaXplTW9kZSxcbiAgUmFuZ2VEaXJlY3Rpb24sXG4gIFNlbGVjdGlvbk1vZGUsXG4gIFRleHREaXJlY3Rpb24sXG4gIFRleHRVbml0LFxuICBUZXh0VW5pdEFkanVzdG1lbnQsXG59IGZyb20gJy4uL3R5cGVzL3R5cGVzJ1xuaW1wb3J0IHsgT21pdEZpcnN0QXJnIH0gZnJvbSAnLi4vdXRpbHMvdHlwZXMnXG5pbXBvcnQgeyBpc0VkaXRvciB9IGZyb20gJy4uL2VkaXRvci9pcy1lZGl0b3InXG5pbXBvcnQge1xuICBUZXh0SW5zZXJ0RnJhZ21lbnRPcHRpb25zLFxuICBUZXh0SW5zZXJ0VGV4dE9wdGlvbnMsXG59IGZyb20gJy4vdHJhbnNmb3Jtcy90ZXh0J1xuaW1wb3J0IHsgTm9kZUluc2VydE5vZGVzT3B0aW9ucyB9IGZyb20gJy4vdHJhbnNmb3Jtcy9ub2RlJ1xuXG4vKipcbiAqIFRoZSBgRWRpdG9yYCBpbnRlcmZhY2Ugc3RvcmVzIGFsbCB0aGUgc3RhdGUgb2YgYSBTbGF0ZSBlZGl0b3IuIEl0IGlzIGV4dGVuZGVkXG4gKiBieSBwbHVnaW5zIHRoYXQgd2lzaCB0byBhZGQgdGhlaXIgb3duIGhlbHBlcnMgYW5kIGltcGxlbWVudCBuZXcgYmVoYXZpb3JzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VFZGl0b3Ige1xuICAvLyBDb3JlIHN0YXRlLlxuXG4gIGNoaWxkcmVuOiBEZXNjZW5kYW50W11cbiAgc2VsZWN0aW9uOiBTZWxlY3Rpb25cbiAgb3BlcmF0aW9uczogT3BlcmF0aW9uW11cbiAgbWFya3M6IEVkaXRvck1hcmtzIHwgbnVsbFxuXG4gIC8vIE92ZXJyaWRlYWJsZSBjb3JlIG1ldGhvZHMuXG5cbiAgYXBwbHk6IChvcGVyYXRpb246IE9wZXJhdGlvbikgPT4gdm9pZFxuICBnZXREaXJ0eVBhdGhzOiAob3BlcmF0aW9uOiBPcGVyYXRpb24pID0+IFBhdGhbXVxuICBnZXRGcmFnbWVudDogKCkgPT4gRGVzY2VuZGFudFtdXG4gIGlzRWxlbWVudFJlYWRPbmx5OiAoZWxlbWVudDogRWxlbWVudCkgPT4gYm9vbGVhblxuICBpc1NlbGVjdGFibGU6IChlbGVtZW50OiBFbGVtZW50KSA9PiBib29sZWFuXG4gIG1hcmthYmxlVm9pZDogKGVsZW1lbnQ6IEVsZW1lbnQpID0+IGJvb2xlYW5cbiAgbm9ybWFsaXplTm9kZTogKGVudHJ5OiBOb2RlRW50cnksIG9wdGlvbnM/OiB7IG9wZXJhdGlvbj86IE9wZXJhdGlvbiB9KSA9PiB2b2lkXG4gIG9uQ2hhbmdlOiAob3B0aW9ucz86IHsgb3BlcmF0aW9uPzogT3BlcmF0aW9uIH0pID0+IHZvaWRcbiAgc2hvdWxkTm9ybWFsaXplOiAoe1xuICAgIGl0ZXJhdGlvbixcbiAgICBkaXJ0eVBhdGhzLFxuICAgIG9wZXJhdGlvbixcbiAgfToge1xuICAgIGl0ZXJhdGlvbjogbnVtYmVyXG4gICAgaW5pdGlhbERpcnR5UGF0aHNMZW5ndGg6IG51bWJlclxuICAgIGRpcnR5UGF0aHM6IFBhdGhbXVxuICAgIG9wZXJhdGlvbj86IE9wZXJhdGlvblxuICB9KSA9PiBib29sZWFuXG5cbiAgLy8gT3ZlcnJpZGVhYmxlIGNvcmUgdHJhbnNmb3Jtcy5cblxuICBhZGRNYXJrOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5hZGRNYXJrPlxuICBjb2xsYXBzZTogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLmNvbGxhcHNlPlxuICBkZWxldGU6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5kZWxldGU+XG4gIGRlbGV0ZUJhY2t3YXJkOiAodW5pdDogVGV4dFVuaXQpID0+IHZvaWRcbiAgZGVsZXRlRm9yd2FyZDogKHVuaXQ6IFRleHRVbml0KSA9PiB2b2lkXG4gIGRlbGV0ZUZyYWdtZW50OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5kZWxldGVGcmFnbWVudD5cbiAgZGVzZWxlY3Q6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5kZXNlbGVjdD5cbiAgaW5zZXJ0QnJlYWs6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmluc2VydEJyZWFrPlxuICBpbnNlcnRGcmFnbWVudDogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLmluc2VydEZyYWdtZW50PlxuICBpbnNlcnROb2RlOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5pbnNlcnROb2RlPlxuICBpbnNlcnROb2RlczogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLmluc2VydE5vZGVzPlxuICBpbnNlcnRTb2Z0QnJlYWs6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmluc2VydFNvZnRCcmVhaz5cbiAgaW5zZXJ0VGV4dDogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLmluc2VydFRleHQ+XG4gIGxpZnROb2RlczogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLmxpZnROb2Rlcz5cbiAgbWVyZ2VOb2RlczogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLm1lcmdlTm9kZXM+XG4gIG1vdmU6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5tb3ZlPlxuICBtb3ZlTm9kZXM6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5tb3ZlTm9kZXM+XG4gIG5vcm1hbGl6ZTogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3Iubm9ybWFsaXplPlxuICByZW1vdmVNYXJrOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5yZW1vdmVNYXJrPlxuICByZW1vdmVOb2RlczogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzPlxuICBzZWxlY3Q6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5zZWxlY3Q+XG4gIHNldE5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIHByb3BzOiBQYXJ0aWFsPFQ+LFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBhdD86IExvY2F0aW9uXG4gICAgICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICAgICAgbW9kZT86IE1heGltaXplTW9kZVxuICAgICAgaGFuZ2luZz86IGJvb2xlYW5cbiAgICAgIHNwbGl0PzogYm9vbGVhblxuICAgICAgdm9pZHM/OiBib29sZWFuXG4gICAgICBjb21wYXJlPzogUHJvcHNDb21wYXJlXG4gICAgICBtZXJnZT86IFByb3BzTWVyZ2VcbiAgICB9XG4gICkgPT4gdm9pZFxuICBzZXROb3JtYWxpemluZzogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3Iuc2V0Tm9ybWFsaXppbmc+XG4gIHNldFBvaW50OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMuc2V0UG9pbnQ+XG4gIHNldFNlbGVjdGlvbjogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLnNldFNlbGVjdGlvbj5cbiAgc3BsaXROb2RlczogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXM+XG4gIHVuc2V0Tm9kZXM6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy51bnNldE5vZGVzPlxuICB1bndyYXBOb2RlczogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzPlxuICB3aXRob3V0Tm9ybWFsaXppbmc6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZz5cbiAgd3JhcE5vZGVzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMud3JhcE5vZGVzPlxuXG4gIC8vIE92ZXJyaWRlYWJsZSBjb3JlIHF1ZXJpZXMuXG5cbiAgYWJvdmU6IDxUIGV4dGVuZHMgQW5jZXN0b3I+KFxuICAgIG9wdGlvbnM/OiBFZGl0b3JBYm92ZU9wdGlvbnM8VD5cbiAgKSA9PiBOb2RlRW50cnk8VD4gfCB1bmRlZmluZWRcbiAgYWZ0ZXI6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmFmdGVyPlxuICBiZWZvcmU6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmJlZm9yZT5cbiAgZWRnZXM6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmVkZ2VzPlxuICBlbGVtZW50UmVhZE9ubHk6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmVsZW1lbnRSZWFkT25seT5cbiAgZW5kOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5lbmQ+XG4gIGZpcnN0OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5maXJzdD5cbiAgZnJhZ21lbnQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmZyYWdtZW50PlxuICBnZXRNYXJrczogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IubWFya3M+XG4gIGhhc0Jsb2NrczogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaGFzQmxvY2tzPlxuICBoYXNJbmxpbmVzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5oYXNJbmxpbmVzPlxuICBoYXNQYXRoOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5oYXNQYXRoPlxuICBoYXNUZXh0czogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaGFzVGV4dHM+XG4gIGlzQmxvY2s6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmlzQmxvY2s+XG4gIGlzRWRnZTogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaXNFZGdlPlxuICBpc0VtcHR5OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5pc0VtcHR5PlxuICBpc0VuZDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaXNFbmQ+XG4gIGlzSW5saW5lOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5pc0lubGluZT5cbiAgaXNOb3JtYWxpemluZzogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaXNOb3JtYWxpemluZz5cbiAgaXNTdGFydDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaXNTdGFydD5cbiAgaXNWb2lkOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5pc1ZvaWQ+XG4gIGxhc3Q6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmxhc3Q+XG4gIGxlYWY6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmxlYWY+XG4gIGxldmVsczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBvcHRpb25zPzogRWRpdG9yTGV2ZWxzT3B0aW9uczxUPlxuICApID0+IEdlbmVyYXRvcjxOb2RlRW50cnk8VD4sIHZvaWQsIHVuZGVmaW5lZD5cbiAgbmV4dDogPFQgZXh0ZW5kcyBEZXNjZW5kYW50PihcbiAgICBvcHRpb25zPzogRWRpdG9yTmV4dE9wdGlvbnM8VD5cbiAgKSA9PiBOb2RlRW50cnk8VD4gfCB1bmRlZmluZWRcbiAgbm9kZTogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3Iubm9kZT5cbiAgbm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgb3B0aW9ucz86IEVkaXRvck5vZGVzT3B0aW9uczxUPlxuICApID0+IEdlbmVyYXRvcjxOb2RlRW50cnk8VD4sIHZvaWQsIHVuZGVmaW5lZD5cbiAgcGFyZW50OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5wYXJlbnQ+XG4gIHBhdGg6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnBhdGg+XG4gIHBhdGhSZWY6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnBhdGhSZWY+XG4gIHBhdGhSZWZzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5wYXRoUmVmcz5cbiAgcG9pbnQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnBvaW50PlxuICBwb2ludFJlZjogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucG9pbnRSZWY+XG4gIHBvaW50UmVmczogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucG9pbnRSZWZzPlxuICBwb3NpdGlvbnM6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnBvc2l0aW9ucz5cbiAgcHJldmlvdXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgb3B0aW9ucz86IEVkaXRvclByZXZpb3VzT3B0aW9uczxUPlxuICApID0+IE5vZGVFbnRyeTxUPiB8IHVuZGVmaW5lZFxuICByYW5nZTogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucmFuZ2U+XG4gIHJhbmdlUmVmOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5yYW5nZVJlZj5cbiAgcmFuZ2VSZWZzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5yYW5nZVJlZnM+XG4gIHN0YXJ0OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5zdGFydD5cbiAgc3RyaW5nOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5zdHJpbmc+XG4gIHVuaGFuZ1JhbmdlOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci51bmhhbmdSYW5nZT5cbiAgdm9pZDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3Iudm9pZD5cbn1cblxuZXhwb3J0IHR5cGUgRWRpdG9yID0gRXh0ZW5kZWRUeXBlPCdFZGl0b3InLCBCYXNlRWRpdG9yPlxuXG5leHBvcnQgdHlwZSBCYXNlU2VsZWN0aW9uID0gUmFuZ2UgfCBudWxsXG5cbmV4cG9ydCB0eXBlIFNlbGVjdGlvbiA9IEV4dGVuZGVkVHlwZTwnU2VsZWN0aW9uJywgQmFzZVNlbGVjdGlvbj5cblxuZXhwb3J0IHR5cGUgRWRpdG9yTWFya3MgPSBPbWl0PFRleHQsICd0ZXh0Jz5cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JBYm92ZU9wdGlvbnM8VCBleHRlbmRzIEFuY2VzdG9yPiB7XG4gIGF0PzogTG9jYXRpb25cbiAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgbW9kZT86IE1heGltaXplTW9kZVxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JBZnRlck9wdGlvbnMge1xuICBkaXN0YW5jZT86IG51bWJlclxuICB1bml0PzogVGV4dFVuaXRBZGp1c3RtZW50XG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvckJlZm9yZU9wdGlvbnMge1xuICBkaXN0YW5jZT86IG51bWJlclxuICB1bml0PzogVGV4dFVuaXRBZGp1c3RtZW50XG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvckRpcmVjdGVkRGVsZXRpb25PcHRpb25zIHtcbiAgdW5pdD86IFRleHRVbml0XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yRWxlbWVudFJlYWRPbmx5T3B0aW9ucyB7XG4gIGF0PzogTG9jYXRpb25cbiAgbW9kZT86IE1heGltaXplTW9kZVxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JGcmFnbWVudERlbGV0aW9uT3B0aW9ucyB7XG4gIGRpcmVjdGlvbj86IFRleHREaXJlY3Rpb25cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JMZWFmT3B0aW9ucyB7XG4gIGRlcHRoPzogbnVtYmVyXG4gIGVkZ2U/OiBMZWFmRWRnZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvckxldmVsc09wdGlvbnM8VCBleHRlbmRzIE5vZGU+IHtcbiAgYXQ/OiBMb2NhdGlvblxuICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICByZXZlcnNlPzogYm9vbGVhblxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JOZXh0T3B0aW9uczxUIGV4dGVuZHMgRGVzY2VuZGFudD4ge1xuICBhdD86IExvY2F0aW9uXG4gIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gIG1vZGU/OiBTZWxlY3Rpb25Nb2RlXG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvck5vZGVPcHRpb25zIHtcbiAgZGVwdGg/OiBudW1iZXJcbiAgZWRnZT86IExlYWZFZGdlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yTm9kZXNPcHRpb25zPFQgZXh0ZW5kcyBOb2RlPiB7XG4gIGF0PzogTG9jYXRpb24gfCBTcGFuXG4gIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gIG1vZGU/OiBTZWxlY3Rpb25Nb2RlXG4gIHVuaXZlcnNhbD86IGJvb2xlYW5cbiAgcmV2ZXJzZT86IGJvb2xlYW5cbiAgdm9pZHM/OiBib29sZWFuXG4gIGlnbm9yZU5vblNlbGVjdGFibGU/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yTm9ybWFsaXplT3B0aW9ucyB7XG4gIGZvcmNlPzogYm9vbGVhblxuICBvcGVyYXRpb24/OiBPcGVyYXRpb25cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JQYXJlbnRPcHRpb25zIHtcbiAgZGVwdGg/OiBudW1iZXJcbiAgZWRnZT86IExlYWZFZGdlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yUGF0aE9wdGlvbnMge1xuICBkZXB0aD86IG51bWJlclxuICBlZGdlPzogTGVhZkVkZ2Vcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JQYXRoUmVmT3B0aW9ucyB7XG4gIGFmZmluaXR5PzogVGV4dERpcmVjdGlvbiB8IG51bGxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JQb2ludE9wdGlvbnMge1xuICBlZGdlPzogTGVhZkVkZ2Vcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JQb2ludFJlZk9wdGlvbnMge1xuICBhZmZpbml0eT86IFRleHREaXJlY3Rpb24gfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yUG9zaXRpb25zT3B0aW9ucyB7XG4gIGF0PzogTG9jYXRpb25cbiAgdW5pdD86IFRleHRVbml0QWRqdXN0bWVudFxuICByZXZlcnNlPzogYm9vbGVhblxuICB2b2lkcz86IGJvb2xlYW5cbiAgaWdub3JlTm9uU2VsZWN0YWJsZT86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JQcmV2aW91c09wdGlvbnM8VCBleHRlbmRzIE5vZGU+IHtcbiAgYXQ/OiBMb2NhdGlvblxuICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICBtb2RlPzogU2VsZWN0aW9uTW9kZVxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JSYW5nZVJlZk9wdGlvbnMge1xuICBhZmZpbml0eT86IFJhbmdlRGlyZWN0aW9uIHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvclN0cmluZ09wdGlvbnMge1xuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JVbmhhbmdSYW5nZU9wdGlvbnMge1xuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JWb2lkT3B0aW9ucyB7XG4gIGF0PzogTG9jYXRpb25cbiAgbW9kZT86IE1heGltaXplTW9kZVxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JJbnRlcmZhY2Uge1xuICAvKipcbiAgICogR2V0IHRoZSBhbmNlc3RvciBhYm92ZSBhIGxvY2F0aW9uIGluIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIGFib3ZlOiA8VCBleHRlbmRzIEFuY2VzdG9yPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yQWJvdmVPcHRpb25zPFQ+XG4gICkgPT4gTm9kZUVudHJ5PFQ+IHwgdW5kZWZpbmVkXG5cbiAgLyoqXG4gICAqIEFkZCBhIGN1c3RvbSBwcm9wZXJ0eSB0byB0aGUgbGVhZiB0ZXh0IG5vZGVzIGluIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICpcbiAgICogSWYgdGhlIHNlbGVjdGlvbiBpcyBjdXJyZW50bHkgY29sbGFwc2VkLCB0aGUgbWFya3Mgd2lsbCBiZSBhZGRlZCB0byB0aGVcbiAgICogYGVkaXRvci5tYXJrc2AgcHJvcGVydHkgaW5zdGVhZCwgYW5kIGFwcGxpZWQgd2hlbiB0ZXh0IGlzIGluc2VydGVkIG5leHQuXG4gICAqL1xuICBhZGRNYXJrOiAoZWRpdG9yOiBFZGl0b3IsIGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcG9pbnQgYWZ0ZXIgYSBsb2NhdGlvbi5cbiAgICovXG4gIGFmdGVyOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgYXQ6IExvY2F0aW9uLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JBZnRlck9wdGlvbnNcbiAgKSA9PiBQb2ludCB8IHVuZGVmaW5lZFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBvaW50IGJlZm9yZSBhIGxvY2F0aW9uLlxuICAgKi9cbiAgYmVmb3JlOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgYXQ6IExvY2F0aW9uLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JCZWZvcmVPcHRpb25zXG4gICkgPT4gUG9pbnQgfCB1bmRlZmluZWRcblxuICAvKipcbiAgICogRGVsZXRlIGNvbnRlbnQgaW4gdGhlIGVkaXRvciBiYWNrd2FyZCBmcm9tIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICovXG4gIGRlbGV0ZUJhY2t3YXJkOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvckRpcmVjdGVkRGVsZXRpb25PcHRpb25zXG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBEZWxldGUgY29udGVudCBpbiB0aGUgZWRpdG9yIGZvcndhcmQgZnJvbSB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAqL1xuICBkZWxldGVGb3J3YXJkOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvckRpcmVjdGVkRGVsZXRpb25PcHRpb25zXG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBEZWxldGUgdGhlIGNvbnRlbnQgaW4gdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKi9cbiAgZGVsZXRlRnJhZ21lbnQ6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yRnJhZ21lbnREZWxldGlvbk9wdGlvbnNcbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludHMgb2YgYSBsb2NhdGlvbi5cbiAgICovXG4gIGVkZ2VzOiAoZWRpdG9yOiBFZGl0b3IsIGF0OiBMb2NhdGlvbikgPT4gW1BvaW50LCBQb2ludF1cblxuICAvKipcbiAgICogTWF0Y2ggYSByZWFkLW9ubHkgZWxlbWVudCBpbiB0aGUgY3VycmVudCBicmFuY2ggb2YgdGhlIGVkaXRvci5cbiAgICovXG4gIGVsZW1lbnRSZWFkT25seTogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JFbGVtZW50UmVhZE9ubHlPcHRpb25zXG4gICkgPT4gTm9kZUVudHJ5PEVsZW1lbnQ+IHwgdW5kZWZpbmVkXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZW5kIHBvaW50IG9mIGEgbG9jYXRpb24uXG4gICAqL1xuICBlbmQ6IChlZGl0b3I6IEVkaXRvciwgYXQ6IExvY2F0aW9uKSA9PiBQb2ludFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGZpcnN0IG5vZGUgYXQgYSBsb2NhdGlvbi5cbiAgICovXG4gIGZpcnN0OiAoZWRpdG9yOiBFZGl0b3IsIGF0OiBMb2NhdGlvbikgPT4gTm9kZUVudHJ5XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZnJhZ21lbnQgYXQgYSBsb2NhdGlvbi5cbiAgICovXG4gIGZyYWdtZW50OiAoZWRpdG9yOiBFZGl0b3IsIGF0OiBMb2NhdGlvbikgPT4gRGVzY2VuZGFudFtdXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgbm9kZSBoYXMgYmxvY2sgY2hpbGRyZW4uXG4gICAqL1xuICBoYXNCbG9ja3M6IChlZGl0b3I6IEVkaXRvciwgZWxlbWVudDogRWxlbWVudCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIG5vZGUgaGFzIGlubGluZSBhbmQgdGV4dCBjaGlsZHJlbi5cbiAgICovXG4gIGhhc0lubGluZXM6IChlZGl0b3I6IEVkaXRvciwgZWxlbWVudDogRWxlbWVudCkgPT4gYm9vbGVhblxuXG4gIGhhc1BhdGg6IChlZGl0b3I6IEVkaXRvciwgcGF0aDogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIG5vZGUgaGFzIHRleHQgY2hpbGRyZW4uXG4gICAqL1xuICBoYXNUZXh0czogKGVkaXRvcjogRWRpdG9yLCBlbGVtZW50OiBFbGVtZW50KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIEluc2VydCBhIGJsb2NrIGJyZWFrIGF0IHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICpcbiAgICogSWYgdGhlIHNlbGVjdGlvbiBpcyBjdXJyZW50bHkgZXhwYW5kZWQsIGl0IHdpbGwgYmUgZGVsZXRlZCBmaXJzdC5cbiAgICovXG4gIGluc2VydEJyZWFrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHZvaWRcblxuICAvKipcbiAgICogSW5zZXJ0cyBhIGZyYWdtZW50XG4gICAqIGF0IHRoZSBzcGVjaWZpZWQgbG9jYXRpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgY3VycmVudCBzZWxlY3Rpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIGluc2VydEZyYWdtZW50OiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgZnJhZ21lbnQ6IE5vZGVbXSxcbiAgICBvcHRpb25zPzogVGV4dEluc2VydEZyYWdtZW50T3B0aW9uc1xuICApID0+IHZvaWRcblxuICAvKipcbiAgICogQXRvbWljYWxseSBpbnNlcnRzIGBub2Rlc2BcbiAgICogYXQgdGhlIHNwZWNpZmllZCBsb2NhdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgaW5zZXJ0Tm9kZTogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBub2RlOiBOb2RlLFxuICAgIG9wdGlvbnM/OiBOb2RlSW5zZXJ0Tm9kZXNPcHRpb25zPFQ+XG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBJbnNlcnQgYSBzb2Z0IGJyZWFrIGF0IHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICpcbiAgICogSWYgdGhlIHNlbGVjdGlvbiBpcyBjdXJyZW50bHkgZXhwYW5kZWQsIGl0IHdpbGwgYmUgZGVsZXRlZCBmaXJzdC5cbiAgICovXG4gIGluc2VydFNvZnRCcmVhazogKGVkaXRvcjogRWRpdG9yKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIEluc2VydCBhIHN0cmluZyBvZiB0ZXh0XG4gICAqIGF0IHRoZSBzcGVjaWZpZWQgbG9jYXRpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgY3VycmVudCBzZWxlY3Rpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIGluc2VydFRleHQ6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICB0ZXh0OiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IFRleHRJbnNlcnRUZXh0T3B0aW9uc1xuICApID0+IHZvaWRcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIGJsb2NrIGBFbGVtZW50YCBvYmplY3QuXG4gICAqL1xuICBpc0Jsb2NrOiAoZWRpdG9yOiBFZGl0b3IsIHZhbHVlOiBFbGVtZW50KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcG9pbnQgaXMgYW4gZWRnZSBvZiBhIGxvY2F0aW9uLlxuICAgKi9cbiAgaXNFZGdlOiAoZWRpdG9yOiBFZGl0b3IsIHBvaW50OiBQb2ludCwgYXQ6IExvY2F0aW9uKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYW4gYEVkaXRvcmAgb2JqZWN0LlxuICAgKi9cbiAgaXNFZGl0b3I6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBFZGl0b3JcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIHJlYWQtb25seSBgRWxlbWVudGAgb2JqZWN0LlxuICAgKi9cbiAgaXNFbGVtZW50UmVhZE9ubHk6IChlZGl0b3I6IEVkaXRvciwgZWxlbWVudDogRWxlbWVudCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGVtcHR5LCBhY2NvdW50aW5nIGZvciB2b2lkIG5vZGVzLlxuICAgKi9cbiAgaXNFbXB0eTogKGVkaXRvcjogRWRpdG9yLCBlbGVtZW50OiBFbGVtZW50KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcG9pbnQgaXMgdGhlIGVuZCBwb2ludCBvZiBhIGxvY2F0aW9uLlxuICAgKi9cbiAgaXNFbmQ6IChlZGl0b3I6IEVkaXRvciwgcG9pbnQ6IFBvaW50LCBhdDogTG9jYXRpb24pID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhbiBpbmxpbmUgYEVsZW1lbnRgIG9iamVjdC5cbiAgICovXG4gIGlzSW5saW5lOiAoZWRpdG9yOiBFZGl0b3IsIHZhbHVlOiBFbGVtZW50KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBlZGl0b3IgaXMgY3VycmVudGx5IG5vcm1hbGl6aW5nIGFmdGVyIGVhY2ggb3BlcmF0aW9uLlxuICAgKi9cbiAgaXNOb3JtYWxpemluZzogKGVkaXRvcjogRWRpdG9yKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBzZWxlY3RhYmxlIGBFbGVtZW50YCBvYmplY3QuXG4gICAqL1xuICBpc1NlbGVjdGFibGU6IChlZGl0b3I6IEVkaXRvciwgZWxlbWVudDogRWxlbWVudCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBvaW50IGlzIHRoZSBzdGFydCBwb2ludCBvZiBhIGxvY2F0aW9uLlxuICAgKi9cbiAgaXNTdGFydDogKGVkaXRvcjogRWRpdG9yLCBwb2ludDogUG9pbnQsIGF0OiBMb2NhdGlvbikgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgdm9pZCBgRWxlbWVudGAgb2JqZWN0LlxuICAgKi9cbiAgaXNWb2lkOiAoZWRpdG9yOiBFZGl0b3IsIHZhbHVlOiBFbGVtZW50KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGFzdCBub2RlIGF0IGEgbG9jYXRpb24uXG4gICAqL1xuICBsYXN0OiAoZWRpdG9yOiBFZGl0b3IsIGF0OiBMb2NhdGlvbikgPT4gTm9kZUVudHJ5XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGVhZiB0ZXh0IG5vZGUgYXQgYSBsb2NhdGlvbi5cbiAgICovXG4gIGxlYWY6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBhdDogTG9jYXRpb24sXG4gICAgb3B0aW9ucz86IEVkaXRvckxlYWZPcHRpb25zXG4gICkgPT4gTm9kZUVudHJ5PFRleHQ+XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgdGhyb3VnaCBhbGwgb2YgdGhlIGxldmVscyBhdCBhIGxvY2F0aW9uLlxuICAgKi9cbiAgbGV2ZWxzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JMZXZlbHNPcHRpb25zPFQ+XG4gICkgPT4gR2VuZXJhdG9yPE5vZGVFbnRyeTxUPiwgdm9pZCwgdW5kZWZpbmVkPlxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1hcmtzIHRoYXQgd291bGQgYmUgYWRkZWQgdG8gdGV4dCBhdCB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAqL1xuICBtYXJrczogKGVkaXRvcjogRWRpdG9yKSA9PiBPbWl0PFRleHQsICd0ZXh0Jz4gfCBudWxsXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWF0Y2hpbmcgbm9kZSBpbiB0aGUgYnJhbmNoIG9mIHRoZSBkb2N1bWVudCBhZnRlciBhIGxvY2F0aW9uLlxuICAgKi9cbiAgbmV4dDogPFQgZXh0ZW5kcyBEZXNjZW5kYW50PihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yTmV4dE9wdGlvbnM8VD5cbiAgKSA9PiBOb2RlRW50cnk8VD4gfCB1bmRlZmluZWRcblxuICAvKipcbiAgICogR2V0IHRoZSBub2RlIGF0IGEgbG9jYXRpb24uXG4gICAqL1xuICBub2RlOiAoZWRpdG9yOiBFZGl0b3IsIGF0OiBMb2NhdGlvbiwgb3B0aW9ucz86IEVkaXRvck5vZGVPcHRpb25zKSA9PiBOb2RlRW50cnlcblxuICAvKipcbiAgICogSXRlcmF0ZSB0aHJvdWdoIGFsbCBvZiB0aGUgbm9kZXMgaW4gdGhlIEVkaXRvci5cbiAgICovXG4gIG5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JOb2Rlc09wdGlvbnM8VD5cbiAgKSA9PiBHZW5lcmF0b3I8Tm9kZUVudHJ5PFQ+LCB2b2lkLCB1bmRlZmluZWQ+XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSBhbnkgZGlydHkgb2JqZWN0cyBpbiB0aGUgZWRpdG9yLlxuICAgKi9cbiAgbm9ybWFsaXplOiAoZWRpdG9yOiBFZGl0b3IsIG9wdGlvbnM/OiBFZGl0b3JOb3JtYWxpemVPcHRpb25zKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcGFyZW50IG5vZGUgb2YgYSBsb2NhdGlvbi5cbiAgICovXG4gIHBhcmVudDogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIGF0OiBMb2NhdGlvbixcbiAgICBvcHRpb25zPzogRWRpdG9yUGFyZW50T3B0aW9uc1xuICApID0+IE5vZGVFbnRyeTxBbmNlc3Rvcj5cblxuICAvKipcbiAgICogR2V0IHRoZSBwYXRoIG9mIGEgbG9jYXRpb24uXG4gICAqL1xuICBwYXRoOiAoZWRpdG9yOiBFZGl0b3IsIGF0OiBMb2NhdGlvbiwgb3B0aW9ucz86IEVkaXRvclBhdGhPcHRpb25zKSA9PiBQYXRoXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG11dGFibGUgcmVmIGZvciBhIGBQYXRoYCBvYmplY3QsIHdoaWNoIHdpbGwgc3RheSBpbiBzeW5jIGFzIG5ld1xuICAgKiBvcGVyYXRpb25zIGFyZSBhcHBsaWVkIHRvIHRoZSBlZGl0b3IuXG4gICAqL1xuICBwYXRoUmVmOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgcGF0aDogUGF0aCxcbiAgICBvcHRpb25zPzogRWRpdG9yUGF0aFJlZk9wdGlvbnNcbiAgKSA9PiBQYXRoUmVmXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2V0IG9mIGN1cnJlbnRseSB0cmFja2VkIHBhdGggcmVmcyBvZiB0aGUgZWRpdG9yLlxuICAgKi9cbiAgcGF0aFJlZnM6IChlZGl0b3I6IEVkaXRvcikgPT4gU2V0PFBhdGhSZWY+XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhcnQgb3IgZW5kIHBvaW50IG9mIGEgbG9jYXRpb24uXG4gICAqL1xuICBwb2ludDogKGVkaXRvcjogRWRpdG9yLCBhdDogTG9jYXRpb24sIG9wdGlvbnM/OiBFZGl0b3JQb2ludE9wdGlvbnMpID0+IFBvaW50XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG11dGFibGUgcmVmIGZvciBhIGBQb2ludGAgb2JqZWN0LCB3aGljaCB3aWxsIHN0YXkgaW4gc3luYyBhcyBuZXdcbiAgICogb3BlcmF0aW9ucyBhcmUgYXBwbGllZCB0byB0aGUgZWRpdG9yLlxuICAgKi9cbiAgcG9pbnRSZWY6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBwb2ludDogUG9pbnQsXG4gICAgb3B0aW9ucz86IEVkaXRvclBvaW50UmVmT3B0aW9uc1xuICApID0+IFBvaW50UmVmXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2V0IG9mIGN1cnJlbnRseSB0cmFja2VkIHBvaW50IHJlZnMgb2YgdGhlIGVkaXRvci5cbiAgICovXG4gIHBvaW50UmVmczogKGVkaXRvcjogRWRpdG9yKSA9PiBTZXQ8UG9pbnRSZWY+XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbGwgdGhlIHBvc2l0aW9ucyBpbiBgYXRgIHJhbmdlIHdoZXJlIGEgYFBvaW50YCBjYW4gYmUgcGxhY2VkLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCBtb3ZlcyBmb3J3YXJkIGJ5IGluZGl2aWR1YWwgb2Zmc2V0cyBhdCBhIHRpbWUsIGJ1dFxuICAgKiB0aGUgYHVuaXRgIG9wdGlvbiBjYW4gYmUgdXNlZCB0byB0byBtb3ZlIGJ5IGNoYXJhY3Rlciwgd29yZCwgbGluZSwgb3IgYmxvY2suXG4gICAqXG4gICAqIFRoZSBgcmV2ZXJzZWAgb3B0aW9uIGNhbiBiZSB1c2VkIHRvIGNoYW5nZSBpdGVyYXRpb24gZGlyZWN0aW9uLlxuICAgKlxuICAgKiBOb3RlOiBCeSBkZWZhdWx0IHZvaWQgbm9kZXMgYXJlIHRyZWF0ZWQgYXMgYSBzaW5nbGUgcG9pbnQgYW5kIGl0ZXJhdGlvblxuICAgKiB3aWxsIG5vdCBoYXBwZW4gaW5zaWRlIHRoZWlyIGNvbnRlbnQgdW5sZXNzIHlvdSBwYXNzIGluIHRydWUgZm9yIHRoZVxuICAgKiBgdm9pZHNgIG9wdGlvbiwgdGhlbiBpdGVyYXRpb24gd2lsbCBvY2N1ci5cbiAgICovXG4gIHBvc2l0aW9uczogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JQb3NpdGlvbnNPcHRpb25zXG4gICkgPT4gR2VuZXJhdG9yPFBvaW50LCB2b2lkLCB1bmRlZmluZWQ+XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWF0Y2hpbmcgbm9kZSBpbiB0aGUgYnJhbmNoIG9mIHRoZSBkb2N1bWVudCBiZWZvcmUgYSBsb2NhdGlvbi5cbiAgICovXG4gIHByZXZpb3VzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JQcmV2aW91c09wdGlvbnM8VD5cbiAgKSA9PiBOb2RlRW50cnk8VD4gfCB1bmRlZmluZWRcblxuICAvKipcbiAgICogR2V0IGEgcmFuZ2Ugb2YgYSBsb2NhdGlvbi5cbiAgICovXG4gIHJhbmdlOiAoZWRpdG9yOiBFZGl0b3IsIGF0OiBMb2NhdGlvbiwgdG8/OiBMb2NhdGlvbikgPT4gUmFuZ2VcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbXV0YWJsZSByZWYgZm9yIGEgYFJhbmdlYCBvYmplY3QsIHdoaWNoIHdpbGwgc3RheSBpbiBzeW5jIGFzIG5ld1xuICAgKiBvcGVyYXRpb25zIGFyZSBhcHBsaWVkIHRvIHRoZSBlZGl0b3IuXG4gICAqL1xuICByYW5nZVJlZjogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIHJhbmdlOiBSYW5nZSxcbiAgICBvcHRpb25zPzogRWRpdG9yUmFuZ2VSZWZPcHRpb25zXG4gICkgPT4gUmFuZ2VSZWZcblxuICAvKipcbiAgICogR2V0IHRoZSBzZXQgb2YgY3VycmVudGx5IHRyYWNrZWQgcmFuZ2UgcmVmcyBvZiB0aGUgZWRpdG9yLlxuICAgKi9cbiAgcmFuZ2VSZWZzOiAoZWRpdG9yOiBFZGl0b3IpID0+IFNldDxSYW5nZVJlZj5cblxuICAvKipcbiAgICogUmVtb3ZlIGEgY3VzdG9tIHByb3BlcnR5IGZyb20gYWxsIG9mIHRoZSBsZWFmIHRleHQgbm9kZXMgaW4gdGhlIGN1cnJlbnRcbiAgICogc2VsZWN0aW9uLlxuICAgKlxuICAgKiBJZiB0aGUgc2VsZWN0aW9uIGlzIGN1cnJlbnRseSBjb2xsYXBzZWQsIHRoZSByZW1vdmFsIHdpbGwgYmUgc3RvcmVkIG9uXG4gICAqIGBlZGl0b3IubWFya3NgIGFuZCBhcHBsaWVkIHRvIHRoZSB0ZXh0IGluc2VydGVkIG5leHQuXG4gICAqL1xuICByZW1vdmVNYXJrOiAoZWRpdG9yOiBFZGl0b3IsIGtleTogc3RyaW5nKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIE1hbnVhbGx5IHNldCBpZiB0aGUgZWRpdG9yIHNob3VsZCBjdXJyZW50bHkgYmUgbm9ybWFsaXppbmcuXG4gICAqXG4gICAqIE5vdGU6IFVzaW5nIHRoaXMgaW5jb3JyZWN0bHkgY2FuIGxlYXZlIHRoZSBlZGl0b3IgaW4gYW4gaW52YWxpZCBzdGF0ZS5cbiAgICpcbiAgICovXG4gIHNldE5vcm1hbGl6aW5nOiAoZWRpdG9yOiBFZGl0b3IsIGlzTm9ybWFsaXppbmc6IGJvb2xlYW4pID0+IHZvaWRcblxuICAvKipcbiAgICogR2V0IHRoZSBzdGFydCBwb2ludCBvZiBhIGxvY2F0aW9uLlxuICAgKi9cbiAgc3RhcnQ6IChlZGl0b3I6IEVkaXRvciwgYXQ6IExvY2F0aW9uKSA9PiBQb2ludFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRleHQgc3RyaW5nIGNvbnRlbnQgb2YgYSBsb2NhdGlvbi5cbiAgICpcbiAgICogTm90ZTogYnkgZGVmYXVsdCB0aGUgdGV4dCBvZiB2b2lkIG5vZGVzIGlzIGNvbnNpZGVyZWQgdG8gYmUgYW4gZW1wdHlcbiAgICogc3RyaW5nLCByZWdhcmRsZXNzIG9mIGNvbnRlbnQsIHVubGVzcyB5b3UgcGFzcyBpbiB0cnVlIGZvciB0aGUgdm9pZHMgb3B0aW9uXG4gICAqL1xuICBzdHJpbmc6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBhdDogTG9jYXRpb24sXG4gICAgb3B0aW9ucz86IEVkaXRvclN0cmluZ09wdGlvbnNcbiAgKSA9PiBzdHJpbmdcblxuICAvKipcbiAgICogQ29udmVydCBhIHJhbmdlIGludG8gYSBub24taGFuZ2luZyBvbmUuXG4gICAqL1xuICB1bmhhbmdSYW5nZTogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIHJhbmdlOiBSYW5nZSxcbiAgICBvcHRpb25zPzogRWRpdG9yVW5oYW5nUmFuZ2VPcHRpb25zXG4gICkgPT4gUmFuZ2VcblxuICAvKipcbiAgICogTWF0Y2ggYSB2b2lkIG5vZGUgaW4gdGhlIGN1cnJlbnQgYnJhbmNoIG9mIHRoZSBlZGl0b3IuXG4gICAqL1xuICB2b2lkOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvclZvaWRPcHRpb25zXG4gICkgPT4gTm9kZUVudHJ5PEVsZW1lbnQ+IHwgdW5kZWZpbmVkXG5cbiAgLyoqXG4gICAqIENhbGwgYSBmdW5jdGlvbiwgZGVmZXJyaW5nIG5vcm1hbGl6YXRpb24gdW50aWwgYWZ0ZXIgaXQgY29tcGxldGVzLlxuICAgKi9cbiAgd2l0aG91dE5vcm1hbGl6aW5nOiAoZWRpdG9yOiBFZGl0b3IsIGZuOiAoKSA9PiB2b2lkKSA9PiB2b2lkXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBFZGl0b3I6IEVkaXRvckludGVyZmFjZSA9IHtcbiAgYWJvdmUoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5hYm92ZShvcHRpb25zKVxuICB9LFxuXG4gIGFkZE1hcmsoZWRpdG9yLCBrZXksIHZhbHVlKSB7XG4gICAgZWRpdG9yLmFkZE1hcmsoa2V5LCB2YWx1ZSlcbiAgfSxcblxuICBhZnRlcihlZGl0b3IsIGF0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5hZnRlcihhdCwgb3B0aW9ucylcbiAgfSxcblxuICBiZWZvcmUoZWRpdG9yLCBhdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IuYmVmb3JlKGF0LCBvcHRpb25zKVxuICB9LFxuXG4gIGRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgeyB1bml0ID0gJ2NoYXJhY3RlcicgfSA9IG9wdGlvbnNcbiAgICBlZGl0b3IuZGVsZXRlQmFja3dhcmQodW5pdClcbiAgfSxcblxuICBkZWxldGVGb3J3YXJkKGVkaXRvciwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgeyB1bml0ID0gJ2NoYXJhY3RlcicgfSA9IG9wdGlvbnNcbiAgICBlZGl0b3IuZGVsZXRlRm9yd2FyZCh1bml0KVxuICB9LFxuXG4gIGRlbGV0ZUZyYWdtZW50KGVkaXRvciwgb3B0aW9ucykge1xuICAgIGVkaXRvci5kZWxldGVGcmFnbWVudChvcHRpb25zKVxuICB9LFxuXG4gIGVkZ2VzKGVkaXRvciwgYXQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmVkZ2VzKGF0KVxuICB9LFxuXG4gIGVsZW1lbnRSZWFkT25seShlZGl0b3I6IEVkaXRvciwgb3B0aW9uczogRWRpdG9yRWxlbWVudFJlYWRPbmx5T3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIGVkaXRvci5lbGVtZW50UmVhZE9ubHkob3B0aW9ucylcbiAgfSxcblxuICBlbmQoZWRpdG9yLCBhdCkge1xuICAgIHJldHVybiBlZGl0b3IuZW5kKGF0KVxuICB9LFxuXG4gIGZpcnN0KGVkaXRvciwgYXQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmZpcnN0KGF0KVxuICB9LFxuXG4gIGZyYWdtZW50KGVkaXRvciwgYXQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmZyYWdtZW50KGF0KVxuICB9LFxuXG4gIGhhc0Jsb2NrcyhlZGl0b3IsIGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmhhc0Jsb2NrcyhlbGVtZW50KVxuICB9LFxuXG4gIGhhc0lubGluZXMoZWRpdG9yLCBlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVkaXRvci5oYXNJbmxpbmVzKGVsZW1lbnQpXG4gIH0sXG5cbiAgaGFzUGF0aChlZGl0b3IsIHBhdGgpIHtcbiAgICByZXR1cm4gZWRpdG9yLmhhc1BhdGgocGF0aClcbiAgfSxcblxuICBoYXNUZXh0cyhlZGl0b3IsIGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmhhc1RleHRzKGVsZW1lbnQpXG4gIH0sXG5cbiAgaW5zZXJ0QnJlYWsoZWRpdG9yKSB7XG4gICAgZWRpdG9yLmluc2VydEJyZWFrKClcbiAgfSxcblxuICBpbnNlcnRGcmFnbWVudChlZGl0b3IsIGZyYWdtZW50LCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLmluc2VydEZyYWdtZW50KGZyYWdtZW50LCBvcHRpb25zKVxuICB9LFxuXG4gIGluc2VydE5vZGUoZWRpdG9yLCBub2RlKSB7XG4gICAgZWRpdG9yLmluc2VydE5vZGUobm9kZSlcbiAgfSxcblxuICBpbnNlcnRTb2Z0QnJlYWsoZWRpdG9yKSB7XG4gICAgZWRpdG9yLmluc2VydFNvZnRCcmVhaygpXG4gIH0sXG5cbiAgaW5zZXJ0VGV4dChlZGl0b3IsIHRleHQpIHtcbiAgICBlZGl0b3IuaW5zZXJ0VGV4dCh0ZXh0KVxuICB9LFxuXG4gIGlzQmxvY2soZWRpdG9yLCB2YWx1ZSkge1xuICAgIHJldHVybiBlZGl0b3IuaXNCbG9jayh2YWx1ZSlcbiAgfSxcblxuICBpc0VkZ2UoZWRpdG9yLCBwb2ludCwgYXQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmlzRWRnZShwb2ludCwgYXQpXG4gIH0sXG5cbiAgaXNFZGl0b3IodmFsdWU6IGFueSk6IHZhbHVlIGlzIEVkaXRvciB7XG4gICAgcmV0dXJuIGlzRWRpdG9yKHZhbHVlKVxuICB9LFxuXG4gIGlzRWxlbWVudFJlYWRPbmx5KGVkaXRvciwgZWxlbWVudCkge1xuICAgIHJldHVybiBlZGl0b3IuaXNFbGVtZW50UmVhZE9ubHkoZWxlbWVudClcbiAgfSxcblxuICBpc0VtcHR5KGVkaXRvciwgZWxlbWVudCkge1xuICAgIHJldHVybiBlZGl0b3IuaXNFbXB0eShlbGVtZW50KVxuICB9LFxuXG4gIGlzRW5kKGVkaXRvciwgcG9pbnQsIGF0KSB7XG4gICAgcmV0dXJuIGVkaXRvci5pc0VuZChwb2ludCwgYXQpXG4gIH0sXG5cbiAgaXNJbmxpbmUoZWRpdG9yLCB2YWx1ZSkge1xuICAgIHJldHVybiBlZGl0b3IuaXNJbmxpbmUodmFsdWUpXG4gIH0sXG5cbiAgaXNOb3JtYWxpemluZyhlZGl0b3IpIHtcbiAgICByZXR1cm4gZWRpdG9yLmlzTm9ybWFsaXppbmcoKVxuICB9LFxuXG4gIGlzU2VsZWN0YWJsZShlZGl0b3I6IEVkaXRvciwgdmFsdWU6IEVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmlzU2VsZWN0YWJsZSh2YWx1ZSlcbiAgfSxcblxuICBpc1N0YXJ0KGVkaXRvciwgcG9pbnQsIGF0KSB7XG4gICAgcmV0dXJuIGVkaXRvci5pc1N0YXJ0KHBvaW50LCBhdClcbiAgfSxcblxuICBpc1ZvaWQoZWRpdG9yLCB2YWx1ZSkge1xuICAgIHJldHVybiBlZGl0b3IuaXNWb2lkKHZhbHVlKVxuICB9LFxuXG4gIGxhc3QoZWRpdG9yLCBhdCkge1xuICAgIHJldHVybiBlZGl0b3IubGFzdChhdClcbiAgfSxcblxuICBsZWFmKGVkaXRvciwgYXQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLmxlYWYoYXQsIG9wdGlvbnMpXG4gIH0sXG5cbiAgbGV2ZWxzKGVkaXRvciwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IubGV2ZWxzKG9wdGlvbnMpXG4gIH0sXG5cbiAgbWFya3MoZWRpdG9yKSB7XG4gICAgcmV0dXJuIGVkaXRvci5nZXRNYXJrcygpXG4gIH0sXG5cbiAgbmV4dDxUIGV4dGVuZHMgRGVzY2VuZGFudD4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvck5leHRPcHRpb25zPFQ+XG4gICk6IE5vZGVFbnRyeTxUPiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIGVkaXRvci5uZXh0KG9wdGlvbnMpXG4gIH0sXG5cbiAgbm9kZShlZGl0b3IsIGF0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5ub2RlKGF0LCBvcHRpb25zKVxuICB9LFxuXG4gIG5vZGVzKGVkaXRvciwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3Iubm9kZXMob3B0aW9ucylcbiAgfSxcblxuICBub3JtYWxpemUoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLm5vcm1hbGl6ZShvcHRpb25zKVxuICB9LFxuXG4gIHBhcmVudChlZGl0b3IsIGF0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5wYXJlbnQoYXQsIG9wdGlvbnMpXG4gIH0sXG5cbiAgcGF0aChlZGl0b3IsIGF0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5wYXRoKGF0LCBvcHRpb25zKVxuICB9LFxuXG4gIHBhdGhSZWYoZWRpdG9yLCBwYXRoLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5wYXRoUmVmKHBhdGgsIG9wdGlvbnMpXG4gIH0sXG5cbiAgcGF0aFJlZnMoZWRpdG9yKSB7XG4gICAgcmV0dXJuIGVkaXRvci5wYXRoUmVmcygpXG4gIH0sXG5cbiAgcG9pbnQoZWRpdG9yLCBhdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IucG9pbnQoYXQsIG9wdGlvbnMpXG4gIH0sXG5cbiAgcG9pbnRSZWYoZWRpdG9yLCBwb2ludCwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IucG9pbnRSZWYocG9pbnQsIG9wdGlvbnMpXG4gIH0sXG5cbiAgcG9pbnRSZWZzKGVkaXRvcikge1xuICAgIHJldHVybiBlZGl0b3IucG9pbnRSZWZzKClcbiAgfSxcblxuICBwb3NpdGlvbnMoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5wb3NpdGlvbnMob3B0aW9ucylcbiAgfSxcblxuICBwcmV2aW91cyhlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLnByZXZpb3VzKG9wdGlvbnMpXG4gIH0sXG5cbiAgcmFuZ2UoZWRpdG9yLCBhdCwgdG8pIHtcbiAgICByZXR1cm4gZWRpdG9yLnJhbmdlKGF0LCB0bylcbiAgfSxcblxuICByYW5nZVJlZihlZGl0b3IsIHJhbmdlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5yYW5nZVJlZihyYW5nZSwgb3B0aW9ucylcbiAgfSxcblxuICByYW5nZVJlZnMoZWRpdG9yKSB7XG4gICAgcmV0dXJuIGVkaXRvci5yYW5nZVJlZnMoKVxuICB9LFxuXG4gIHJlbW92ZU1hcmsoZWRpdG9yLCBrZXkpIHtcbiAgICBlZGl0b3IucmVtb3ZlTWFyayhrZXkpXG4gIH0sXG5cbiAgc2V0Tm9ybWFsaXppbmcoZWRpdG9yLCBpc05vcm1hbGl6aW5nKSB7XG4gICAgZWRpdG9yLnNldE5vcm1hbGl6aW5nKGlzTm9ybWFsaXppbmcpXG4gIH0sXG5cbiAgc3RhcnQoZWRpdG9yLCBhdCkge1xuICAgIHJldHVybiBlZGl0b3Iuc3RhcnQoYXQpXG4gIH0sXG5cbiAgc3RyaW5nKGVkaXRvciwgYXQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLnN0cmluZyhhdCwgb3B0aW9ucylcbiAgfSxcblxuICB1bmhhbmdSYW5nZShlZGl0b3IsIHJhbmdlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci51bmhhbmdSYW5nZShyYW5nZSwgb3B0aW9ucylcbiAgfSxcblxuICB2b2lkKGVkaXRvciwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3Iudm9pZChvcHRpb25zKVxuICB9LFxuXG4gIHdpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsIGZuOiAoKSA9PiB2b2lkKSB7XG4gICAgZWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhmbilcbiAgfSxcbn1cblxuLyoqXG4gKiBBIGhlbHBlciB0eXBlIGZvciBuYXJyb3dpbmcgbWF0Y2hlZCBub2RlcyB3aXRoIGEgcHJlZGljYXRlLlxuICovXG5cbmV4cG9ydCB0eXBlIE5vZGVNYXRjaDxUIGV4dGVuZHMgTm9kZT4gPVxuICB8ICgobm9kZTogTm9kZSwgcGF0aDogUGF0aCkgPT4gbm9kZSBpcyBUKVxuICB8ICgobm9kZTogTm9kZSwgcGF0aDogUGF0aCkgPT4gYm9vbGVhbilcblxuZXhwb3J0IHR5cGUgUHJvcHNDb21wYXJlID0gKHByb3A6IFBhcnRpYWw8Tm9kZT4sIG5vZGU6IFBhcnRpYWw8Tm9kZT4pID0+IGJvb2xlYW5cbmV4cG9ydCB0eXBlIFByb3BzTWVyZ2UgPSAocHJvcDogUGFydGlhbDxOb2RlPiwgbm9kZTogUGFydGlhbDxOb2RlPikgPT4gb2JqZWN0XG4iLCAiaW1wb3J0IHsgUGF0aCwgUG9pbnQsIFJhbmdlIH0gZnJvbSAnLi4nXG5cbi8qKlxuICogVGhlIGBMb2NhdGlvbmAgaW50ZXJmYWNlIGlzIGEgdW5pb24gb2YgdGhlIHdheXMgdG8gcmVmZXIgdG8gYSBzcGVjaWZpY1xuICogbG9jYXRpb24gaW4gYSBTbGF0ZSBkb2N1bWVudDogcGF0aHMsIHBvaW50cyBvciByYW5nZXMuXG4gKlxuICogTWV0aG9kcyB3aWxsIG9mdGVuIGFjY2VwdCBhIGBMb2NhdGlvbmAgaW5zdGVhZCBvZiByZXF1aXJpbmcgb25seSBhIGBQYXRoYCxcbiAqIGBQb2ludGAgb3IgYFJhbmdlYC4gVGhpcyBlbGltaW5hdGVzIHRoZSBuZWVkIGZvciBkZXZlbG9wZXJzIHRvIG1hbmFnZVxuICogY29udmVydGluZyBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgaW50ZXJmYWNlcyBpbiB0aGVpciBvd24gY29kZSBiYXNlLlxuICovXG5cbmV4cG9ydCB0eXBlIExvY2F0aW9uID0gUGF0aCB8IFBvaW50IHwgUmFuZ2VcblxuZXhwb3J0IGludGVyZmFjZSBMb2NhdGlvbkludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGltcGxlbWVudHMgdGhlIGBMb2NhdGlvbmAgaW50ZXJmYWNlLlxuICAgKi9cbiAgaXNMb2NhdGlvbjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIExvY2F0aW9uXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBMb2NhdGlvbjogTG9jYXRpb25JbnRlcmZhY2UgPSB7XG4gIGlzTG9jYXRpb24odmFsdWU6IGFueSk6IHZhbHVlIGlzIExvY2F0aW9uIHtcbiAgICByZXR1cm4gUGF0aC5pc1BhdGgodmFsdWUpIHx8IFBvaW50LmlzUG9pbnQodmFsdWUpIHx8IFJhbmdlLmlzUmFuZ2UodmFsdWUpXG4gIH0sXG59XG5cbi8qKlxuICogVGhlIGBTcGFuYCBpbnRlcmZhY2UgaXMgYSBsb3ctbGV2ZWwgd2F5IHRvIHJlZmVyIHRvIGxvY2F0aW9ucyBpbiBub2Rlc1xuICogd2l0aG91dCB1c2luZyBgUG9pbnRgIHdoaWNoIHJlcXVpcmVzIGxlYWYgdGV4dCBub2RlcyB0byBiZSBwcmVzZW50LlxuICovXG5cbmV4cG9ydCB0eXBlIFNwYW4gPSBbUGF0aCwgUGF0aF1cblxuZXhwb3J0IGludGVyZmFjZSBTcGFuSW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaW1wbGVtZW50cyB0aGUgYFNwYW5gIGludGVyZmFjZS5cbiAgICovXG4gIGlzU3BhbjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIFNwYW5cbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFNwYW46IFNwYW5JbnRlcmZhY2UgPSB7XG4gIGlzU3Bhbih2YWx1ZTogYW55KTogdmFsdWUgaXMgU3BhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMiAmJiB2YWx1ZS5ldmVyeShQYXRoLmlzUGF0aClcbiAgICApXG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ2lzLXBsYWluLW9iamVjdCdcbmltcG9ydCB7IHByb2R1Y2UgfSBmcm9tICdpbW1lcidcbmltcG9ydCB7IEV4dGVuZGVkVHlwZSwgT3BlcmF0aW9uLCBQYXRoIH0gZnJvbSAnLi4nXG5pbXBvcnQgeyBUZXh0RGlyZWN0aW9uIH0gZnJvbSAnLi4vdHlwZXMvdHlwZXMnXG5cbi8qKlxuICogYFBvaW50YCBvYmplY3RzIHJlZmVyIHRvIGEgc3BlY2lmaWMgbG9jYXRpb24gaW4gYSB0ZXh0IG5vZGUgaW4gYSBTbGF0ZVxuICogZG9jdW1lbnQuIEl0cyBwYXRoIHJlZmVycyB0byB0aGUgbG9jYXRpb24gb2YgdGhlIG5vZGUgaW4gdGhlIHRyZWUsIGFuZCBpdHNcbiAqIG9mZnNldCByZWZlcnMgdG8gdGhlIGRpc3RhbmNlIGludG8gdGhlIG5vZGUncyBzdHJpbmcgb2YgdGV4dC4gUG9pbnRzIGNhblxuICogb25seSByZWZlciB0byBgVGV4dGAgbm9kZXMuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBCYXNlUG9pbnQge1xuICBwYXRoOiBQYXRoXG4gIG9mZnNldDogbnVtYmVyXG59XG5cbmV4cG9ydCB0eXBlIFBvaW50ID0gRXh0ZW5kZWRUeXBlPCdQb2ludCcsIEJhc2VQb2ludD5cblxuZXhwb3J0IGludGVyZmFjZSBQb2ludFRyYW5zZm9ybU9wdGlvbnMge1xuICBhZmZpbml0eT86IFRleHREaXJlY3Rpb24gfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9pbnRJbnRlcmZhY2Uge1xuICAvKipcbiAgICogQ29tcGFyZSBhIHBvaW50IHRvIGFub3RoZXIsIHJldHVybmluZyBhbiBpbnRlZ2VyIGluZGljYXRpbmcgd2hldGhlciB0aGVcbiAgICogcG9pbnQgd2FzIGJlZm9yZSwgYXQsIG9yIGFmdGVyIHRoZSBvdGhlci5cbiAgICovXG4gIGNvbXBhcmU6IChwb2ludDogUG9pbnQsIGFub3RoZXI6IFBvaW50KSA9PiAtMSB8IDAgfCAxXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcG9pbnQgaXMgYWZ0ZXIgYW5vdGhlci5cbiAgICovXG4gIGlzQWZ0ZXI6IChwb2ludDogUG9pbnQsIGFub3RoZXI6IFBvaW50KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcG9pbnQgaXMgYmVmb3JlIGFub3RoZXIuXG4gICAqL1xuICBpc0JlZm9yZTogKHBvaW50OiBQb2ludCwgYW5vdGhlcjogUG9pbnQpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwb2ludCBpcyBleGFjdGx5IGVxdWFsIHRvIGFub3RoZXIuXG4gICAqL1xuICBlcXVhbHM6IChwb2ludDogUG9pbnQsIGFub3RoZXI6IFBvaW50KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaW1wbGVtZW50cyB0aGUgYFBvaW50YCBpbnRlcmZhY2UuXG4gICAqL1xuICBpc1BvaW50OiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgUG9pbnRcblxuICAvKipcbiAgICogVHJhbnNmb3JtIGEgcG9pbnQgYnkgYW4gb3BlcmF0aW9uLlxuICAgKi9cbiAgdHJhbnNmb3JtOiAoXG4gICAgcG9pbnQ6IFBvaW50LFxuICAgIG9wOiBPcGVyYXRpb24sXG4gICAgb3B0aW9ucz86IFBvaW50VHJhbnNmb3JtT3B0aW9uc1xuICApID0+IFBvaW50IHwgbnVsbFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgUG9pbnQ6IFBvaW50SW50ZXJmYWNlID0ge1xuICBjb21wYXJlKHBvaW50OiBQb2ludCwgYW5vdGhlcjogUG9pbnQpOiAtMSB8IDAgfCAxIHtcbiAgICBjb25zdCByZXN1bHQgPSBQYXRoLmNvbXBhcmUocG9pbnQucGF0aCwgYW5vdGhlci5wYXRoKVxuXG4gICAgaWYgKHJlc3VsdCA9PT0gMCkge1xuICAgICAgaWYgKHBvaW50Lm9mZnNldCA8IGFub3RoZXIub2Zmc2V0KSByZXR1cm4gLTFcbiAgICAgIGlmIChwb2ludC5vZmZzZXQgPiBhbm90aGVyLm9mZnNldCkgcmV0dXJuIDFcbiAgICAgIHJldHVybiAwXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9LFxuXG4gIGlzQWZ0ZXIocG9pbnQ6IFBvaW50LCBhbm90aGVyOiBQb2ludCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBQb2ludC5jb21wYXJlKHBvaW50LCBhbm90aGVyKSA9PT0gMVxuICB9LFxuXG4gIGlzQmVmb3JlKHBvaW50OiBQb2ludCwgYW5vdGhlcjogUG9pbnQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gUG9pbnQuY29tcGFyZShwb2ludCwgYW5vdGhlcikgPT09IC0xXG4gIH0sXG5cbiAgZXF1YWxzKHBvaW50OiBQb2ludCwgYW5vdGhlcjogUG9pbnQpOiBib29sZWFuIHtcbiAgICAvLyBQRVJGOiBlbnN1cmUgdGhlIG9mZnNldHMgYXJlIGVxdWFsIGZpcnN0IHNpbmNlIHRoZXkgYXJlIGNoZWFwZXIgdG8gY2hlY2suXG4gICAgcmV0dXJuIChcbiAgICAgIHBvaW50Lm9mZnNldCA9PT0gYW5vdGhlci5vZmZzZXQgJiYgUGF0aC5lcXVhbHMocG9pbnQucGF0aCwgYW5vdGhlci5wYXRoKVxuICAgIClcbiAgfSxcblxuICBpc1BvaW50KHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBQb2ludCB7XG4gICAgcmV0dXJuIChcbiAgICAgIGlzUGxhaW5PYmplY3QodmFsdWUpICYmXG4gICAgICB0eXBlb2YgdmFsdWUub2Zmc2V0ID09PSAnbnVtYmVyJyAmJlxuICAgICAgUGF0aC5pc1BhdGgodmFsdWUucGF0aClcbiAgICApXG4gIH0sXG5cbiAgdHJhbnNmb3JtKFxuICAgIHBvaW50OiBQb2ludCB8IG51bGwsXG4gICAgb3A6IE9wZXJhdGlvbixcbiAgICBvcHRpb25zOiBQb2ludFRyYW5zZm9ybU9wdGlvbnMgPSB7fVxuICApOiBQb2ludCB8IG51bGwge1xuICAgIHJldHVybiBwcm9kdWNlKHBvaW50LCBwID0+IHtcbiAgICAgIGlmIChwID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG4gICAgICBjb25zdCB7IGFmZmluaXR5ID0gJ2ZvcndhcmQnIH0gPSBvcHRpb25zXG4gICAgICBjb25zdCB7IHBhdGgsIG9mZnNldCB9ID0gcFxuXG4gICAgICBzd2l0Y2ggKG9wLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnaW5zZXJ0X25vZGUnOlxuICAgICAgICBjYXNlICdtb3ZlX25vZGUnOiB7XG4gICAgICAgICAgcC5wYXRoID0gUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3AsIG9wdGlvbnMpIVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBjYXNlICdpbnNlcnRfdGV4dCc6IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBQYXRoLmVxdWFscyhvcC5wYXRoLCBwYXRoKSAmJlxuICAgICAgICAgICAgKG9wLm9mZnNldCA8IG9mZnNldCB8fFxuICAgICAgICAgICAgICAob3Aub2Zmc2V0ID09PSBvZmZzZXQgJiYgYWZmaW5pdHkgPT09ICdmb3J3YXJkJykpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBwLm9mZnNldCArPSBvcC50ZXh0Lmxlbmd0aFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBjYXNlICdtZXJnZV9ub2RlJzoge1xuICAgICAgICAgIGlmIChQYXRoLmVxdWFscyhvcC5wYXRoLCBwYXRoKSkge1xuICAgICAgICAgICAgcC5vZmZzZXQgKz0gb3AucG9zaXRpb25cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwLnBhdGggPSBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcCwgb3B0aW9ucykhXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3JlbW92ZV90ZXh0Jzoge1xuICAgICAgICAgIGlmIChQYXRoLmVxdWFscyhvcC5wYXRoLCBwYXRoKSAmJiBvcC5vZmZzZXQgPD0gb2Zmc2V0KSB7XG4gICAgICAgICAgICBwLm9mZnNldCAtPSBNYXRoLm1pbihvZmZzZXQgLSBvcC5vZmZzZXQsIG9wLnRleHQubGVuZ3RoKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBjYXNlICdyZW1vdmVfbm9kZSc6IHtcbiAgICAgICAgICBpZiAoUGF0aC5lcXVhbHMob3AucGF0aCwgcGF0aCkgfHwgUGF0aC5pc0FuY2VzdG9yKG9wLnBhdGgsIHBhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIHAucGF0aCA9IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wLCBvcHRpb25zKSFcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAnc3BsaXRfbm9kZSc6IHtcbiAgICAgICAgICBpZiAoUGF0aC5lcXVhbHMob3AucGF0aCwgcGF0aCkpIHtcbiAgICAgICAgICAgIGlmIChvcC5wb3NpdGlvbiA9PT0gb2Zmc2V0ICYmIGFmZmluaXR5ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIG9wLnBvc2l0aW9uIDwgb2Zmc2V0IHx8XG4gICAgICAgICAgICAgIChvcC5wb3NpdGlvbiA9PT0gb2Zmc2V0ICYmIGFmZmluaXR5ID09PSAnZm9yd2FyZCcpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcC5vZmZzZXQgLT0gb3AucG9zaXRpb25cblxuICAgICAgICAgICAgICBwLnBhdGggPSBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcCwge1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYWZmaW5pdHk6ICdmb3J3YXJkJyxcbiAgICAgICAgICAgICAgfSkhXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHAucGF0aCA9IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wLCBvcHRpb25zKSFcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfSxcbn1cblxuLyoqXG4gKiBgUG9pbnRFbnRyeWAgb2JqZWN0cyBhcmUgcmV0dXJuZWQgd2hlbiBpdGVyYXRpbmcgb3ZlciBgUG9pbnRgIG9iamVjdHMgdGhhdFxuICogYmVsb25nIHRvIGEgcmFuZ2UuXG4gKi9cblxuZXhwb3J0IHR5cGUgUG9pbnRFbnRyeSA9IFtQb2ludCwgJ2FuY2hvcicgfCAnZm9jdXMnXVxuIiwgImV4cG9ydCB0eXBlIFNjcnViYmVyID0gKGtleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikgPT4gdW5rbm93blxuXG5leHBvcnQgaW50ZXJmYWNlIFNjcnViYmVySW50ZXJmYWNlIHtcbiAgc2V0U2NydWJiZXIoc2NydWJiZXI6IFNjcnViYmVyIHwgdW5kZWZpbmVkKTogdm9pZFxuICBzdHJpbmdpZnkodmFsdWU6IGFueSk6IHN0cmluZ1xufVxuXG5sZXQgX3NjcnViYmVyOiBTY3J1YmJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxuXG4vKipcbiAqIFRoaXMgaW50ZXJmYWNlIGltcGxlbWVudHMgYSBzdHJpbmdpZnkoKSBmdW5jdGlvbiwgd2hpY2ggaXMgdXNlZCBieSBTbGF0ZVxuICogaW50ZXJuYWxseSB3aGVuIGdlbmVyYXRpbmcgZXhjZXB0aW9ucyBjb250YWluaW5nIGVuZCB1c2VyIGRhdGEuIERldmVsb3BlcnNcbiAqIHVzaW5nIFNsYXRlIG1heSBjYWxsIFNjcnViYmVyLnNldFNjcnViYmVyKCkgdG8gYWx0ZXIgdGhlIGJlaGF2aW9yIG9mIHRoaXNcbiAqIHN0cmluZ2lmeSgpIGZ1bmN0aW9uLlxuICpcbiAqIEZvciBleGFtcGxlLCB0byBwcmV2ZW50IHRoZSBjbGVhcnRleHQgbG9nZ2luZyBvZiAndGV4dCcgZmllbGRzIHdpdGhpbiBOb2RlczpcbiAqXG4gKiAgICBpbXBvcnQgeyBTY3J1YmJlciB9IGZyb20gJ3NsYXRlJztcbiAqICAgIFNjcnViYmVyLnNldFNjcnViYmVyKChrZXksIHZhbCkgPT4ge1xuICogICAgICBpZiAoa2V5ID09PSAndGV4dCcpIHJldHVybiAnLi4uc2NydWJiZWQuLi4nXG4gKiAgICAgIHJldHVybiB2YWxcbiAqICAgIH0pO1xuICpcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFNjcnViYmVyOiBTY3J1YmJlckludGVyZmFjZSA9IHtcbiAgc2V0U2NydWJiZXIoc2NydWJiZXI6IFNjcnViYmVyIHwgdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgX3NjcnViYmVyID0gc2NydWJiZXJcbiAgfSxcblxuICBzdHJpbmdpZnkodmFsdWU6IGFueSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlLCBfc2NydWJiZXIpXG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ2lzLXBsYWluLW9iamVjdCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4nXG5pbXBvcnQgeyBFeHRlbmRlZFR5cGUgfSBmcm9tICcuLi90eXBlcy9jdXN0b20tdHlwZXMnXG5pbXBvcnQgeyBpc0RlZXBFcXVhbCB9IGZyb20gJy4uL3V0aWxzL2RlZXAtZXF1YWwnXG5cbi8qKlxuICogYFRleHRgIG9iamVjdHMgcmVwcmVzZW50IHRoZSBub2RlcyB0aGF0IGNvbnRhaW4gdGhlIGFjdHVhbCB0ZXh0IGNvbnRlbnQgb2YgYVxuICogU2xhdGUgZG9jdW1lbnQgYWxvbmcgd2l0aCBhbnkgZm9ybWF0dGluZyBwcm9wZXJ0aWVzLiBUaGV5IGFyZSBhbHdheXMgbGVhZlxuICogbm9kZXMgaW4gdGhlIGRvY3VtZW50IHRyZWUgYXMgdGhleSBjYW5ub3QgY29udGFpbiBhbnkgY2hpbGRyZW4uXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBCYXNlVGV4dCB7XG4gIHRleHQ6IHN0cmluZ1xufVxuXG5leHBvcnQgdHlwZSBUZXh0ID0gRXh0ZW5kZWRUeXBlPCdUZXh0JywgQmFzZVRleHQ+XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEVxdWFsc09wdGlvbnMge1xuICBsb29zZT86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXh0SW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIENoZWNrIGlmIHR3byB0ZXh0IG5vZGVzIGFyZSBlcXVhbC5cbiAgICpcbiAgICogV2hlbiBsb29zZSBpcyBzZXQsIHRoZSB0ZXh0IGlzIG5vdCBjb21wYXJlZC4gVGhpcyBpc1xuICAgKiB1c2VkIHRvIGNoZWNrIHdoZXRoZXIgc2libGluZyB0ZXh0IG5vZGVzIGNhbiBiZSBtZXJnZWQuXG4gICAqL1xuICBlcXVhbHM6ICh0ZXh0OiBUZXh0LCBhbm90aGVyOiBUZXh0LCBvcHRpb25zPzogVGV4dEVxdWFsc09wdGlvbnMpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpbXBsZW1lbnRzIHRoZSBgVGV4dGAgaW50ZXJmYWNlLlxuICAgKi9cbiAgaXNUZXh0OiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgVGV4dFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgbGlzdCBvZiBgVGV4dGAgb2JqZWN0cy5cbiAgICovXG4gIGlzVGV4dExpc3Q6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBUZXh0W11cblxuICAvKipcbiAgICogQ2hlY2sgaWYgc29tZSBwcm9wcyBhcmUgYSBwYXJ0aWFsIG9mIFRleHQuXG4gICAqL1xuICBpc1RleHRQcm9wczogKHByb3BzOiBhbnkpID0+IHByb3BzIGlzIFBhcnRpYWw8VGV4dD5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gdGV4dCBtYXRjaGVzIHNldCBvZiBwcm9wZXJ0aWVzLlxuICAgKlxuICAgKiBOb3RlOiB0aGlzIGlzIGZvciBtYXRjaGluZyBjdXN0b20gcHJvcGVydGllcywgYW5kIGl0IGRvZXMgbm90IGVuc3VyZSB0aGF0XG4gICAqIHRoZSBgdGV4dGAgcHJvcGVydHkgYXJlIHR3byBub2RlcyBlcXVhbC5cbiAgICovXG4gIG1hdGNoZXM6ICh0ZXh0OiBUZXh0LCBwcm9wczogUGFydGlhbDxUZXh0PikgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxlYXZlcyBmb3IgYSB0ZXh0IG5vZGUgZ2l2ZW4gZGVjb3JhdGlvbnMuXG4gICAqL1xuICBkZWNvcmF0aW9uczogKG5vZGU6IFRleHQsIGRlY29yYXRpb25zOiBSYW5nZVtdKSA9PiBUZXh0W11cbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFRleHQ6IFRleHRJbnRlcmZhY2UgPSB7XG4gIGVxdWFscyh0ZXh0OiBUZXh0LCBhbm90aGVyOiBUZXh0LCBvcHRpb25zOiBUZXh0RXF1YWxzT3B0aW9ucyA9IHt9KTogYm9vbGVhbiB7XG4gICAgY29uc3QgeyBsb29zZSA9IGZhbHNlIH0gPSBvcHRpb25zXG5cbiAgICBmdW5jdGlvbiBvbWl0VGV4dChvYmo6IFJlY29yZDxhbnksIGFueT4pIHtcbiAgICAgIGNvbnN0IHsgdGV4dCwgLi4ucmVzdCB9ID0gb2JqXG5cbiAgICAgIHJldHVybiByZXN0XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzRGVlcEVxdWFsKFxuICAgICAgbG9vc2UgPyBvbWl0VGV4dCh0ZXh0KSA6IHRleHQsXG4gICAgICBsb29zZSA/IG9taXRUZXh0KGFub3RoZXIpIDogYW5vdGhlclxuICAgIClcbiAgfSxcblxuICBpc1RleHQodmFsdWU6IGFueSk6IHZhbHVlIGlzIFRleHQge1xuICAgIHJldHVybiBpc1BsYWluT2JqZWN0KHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUudGV4dCA9PT0gJ3N0cmluZydcbiAgfSxcblxuICBpc1RleHRMaXN0KHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBUZXh0W10ge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5ldmVyeSh2YWwgPT4gVGV4dC5pc1RleHQodmFsKSlcbiAgfSxcblxuICBpc1RleHRQcm9wcyhwcm9wczogYW55KTogcHJvcHMgaXMgUGFydGlhbDxUZXh0PiB7XG4gICAgcmV0dXJuIChwcm9wcyBhcyBQYXJ0aWFsPFRleHQ+KS50ZXh0ICE9PSB1bmRlZmluZWRcbiAgfSxcblxuICBtYXRjaGVzKHRleHQ6IFRleHQsIHByb3BzOiBQYXJ0aWFsPFRleHQ+KTogYm9vbGVhbiB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgIGlmIChrZXkgPT09ICd0ZXh0Jykge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgICF0ZXh0Lmhhc093blByb3BlcnR5KGtleSkgfHxcbiAgICAgICAgdGV4dFs8a2V5b2YgVGV4dD5rZXldICE9PSBwcm9wc1s8a2V5b2YgVGV4dD5rZXldXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfSxcblxuICBkZWNvcmF0aW9ucyhub2RlOiBUZXh0LCBkZWNvcmF0aW9uczogUmFuZ2VbXSk6IFRleHRbXSB7XG4gICAgbGV0IGxlYXZlczogVGV4dFtdID0gW3sgLi4ubm9kZSB9XVxuXG4gICAgZm9yIChjb25zdCBkZWMgb2YgZGVjb3JhdGlvbnMpIHtcbiAgICAgIGNvbnN0IHsgYW5jaG9yLCBmb2N1cywgLi4ucmVzdCB9ID0gZGVjXG4gICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyhkZWMpXG4gICAgICBjb25zdCBuZXh0ID0gW11cbiAgICAgIGxldCBsZWFmRW5kID0gMFxuICAgICAgY29uc3QgZGVjb3JhdGlvblN0YXJ0ID0gc3RhcnQub2Zmc2V0XG4gICAgICBjb25zdCBkZWNvcmF0aW9uRW5kID0gZW5kLm9mZnNldFxuXG4gICAgICBmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XG4gICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBsZWFmLnRleHRcbiAgICAgICAgY29uc3QgbGVhZlN0YXJ0ID0gbGVhZkVuZFxuICAgICAgICBsZWFmRW5kICs9IGxlbmd0aFxuXG4gICAgICAgIC8vIElmIHRoZSByYW5nZSBlbmNvbXBhc3NlcyB0aGUgZW50aXJlIGxlYWYsIGFkZCB0aGUgcmFuZ2UuXG4gICAgICAgIGlmIChkZWNvcmF0aW9uU3RhcnQgPD0gbGVhZlN0YXJ0ICYmIGxlYWZFbmQgPD0gZGVjb3JhdGlvbkVuZCkge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24obGVhZiwgcmVzdClcbiAgICAgICAgICBuZXh0LnB1c2gobGVhZilcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlIHJhbmdlIGV4cGFuZGVkIGFuZCBtYXRjaCB0aGUgbGVhZiwgb3Igc3RhcnRzIGFmdGVyLCBvciBlbmRzIGJlZm9yZSBpdCwgY29udGludWUuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAoZGVjb3JhdGlvblN0YXJ0ICE9PSBkZWNvcmF0aW9uRW5kICYmXG4gICAgICAgICAgICAoZGVjb3JhdGlvblN0YXJ0ID09PSBsZWFmRW5kIHx8IGRlY29yYXRpb25FbmQgPT09IGxlYWZTdGFydCkpIHx8XG4gICAgICAgICAgZGVjb3JhdGlvblN0YXJ0ID4gbGVhZkVuZCB8fFxuICAgICAgICAgIGRlY29yYXRpb25FbmQgPCBsZWFmU3RhcnQgfHxcbiAgICAgICAgICAoZGVjb3JhdGlvbkVuZCA9PT0gbGVhZlN0YXJ0ICYmIGxlYWZTdGFydCAhPT0gMClcbiAgICAgICAgKSB7XG4gICAgICAgICAgbmV4dC5wdXNoKGxlYWYpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE90aGVyd2lzZSB3ZSBuZWVkIHRvIHNwbGl0IHRoZSBsZWFmLCBhdCB0aGUgc3RhcnQsIGVuZCwgb3IgYm90aCxcbiAgICAgICAgLy8gYW5kIGFkZCB0aGUgcmFuZ2UgdG8gdGhlIG1pZGRsZSBpbnRlcnNlY3Rpbmcgc2VjdGlvbi4gRG8gdGhlIGVuZFxuICAgICAgICAvLyBzcGxpdCBmaXJzdCBzaW5jZSB3ZSBkb24ndCBuZWVkIHRvIHVwZGF0ZSB0aGUgb2Zmc2V0IHRoYXQgd2F5LlxuICAgICAgICBsZXQgbWlkZGxlID0gbGVhZlxuICAgICAgICBsZXQgYmVmb3JlXG4gICAgICAgIGxldCBhZnRlclxuXG4gICAgICAgIGlmIChkZWNvcmF0aW9uRW5kIDwgbGVhZkVuZCkge1xuICAgICAgICAgIGNvbnN0IG9mZiA9IGRlY29yYXRpb25FbmQgLSBsZWFmU3RhcnRcbiAgICAgICAgICBhZnRlciA9IHsgLi4ubWlkZGxlLCB0ZXh0OiBtaWRkbGUudGV4dC5zbGljZShvZmYpIH1cbiAgICAgICAgICBtaWRkbGUgPSB7IC4uLm1pZGRsZSwgdGV4dDogbWlkZGxlLnRleHQuc2xpY2UoMCwgb2ZmKSB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGVjb3JhdGlvblN0YXJ0ID4gbGVhZlN0YXJ0KSB7XG4gICAgICAgICAgY29uc3Qgb2ZmID0gZGVjb3JhdGlvblN0YXJ0IC0gbGVhZlN0YXJ0XG4gICAgICAgICAgYmVmb3JlID0geyAuLi5taWRkbGUsIHRleHQ6IG1pZGRsZS50ZXh0LnNsaWNlKDAsIG9mZikgfVxuICAgICAgICAgIG1pZGRsZSA9IHsgLi4ubWlkZGxlLCB0ZXh0OiBtaWRkbGUudGV4dC5zbGljZShvZmYpIH1cbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5hc3NpZ24obWlkZGxlLCByZXN0KVxuXG4gICAgICAgIGlmIChiZWZvcmUpIHtcbiAgICAgICAgICBuZXh0LnB1c2goYmVmb3JlKVxuICAgICAgICB9XG5cbiAgICAgICAgbmV4dC5wdXNoKG1pZGRsZSlcblxuICAgICAgICBpZiAoYWZ0ZXIpIHtcbiAgICAgICAgICBuZXh0LnB1c2goYWZ0ZXIpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGVhdmVzID0gbmV4dFxuICAgIH1cblxuICAgIHJldHVybiBsZWF2ZXNcbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIExvY2F0aW9uIH0gZnJvbSAnLi4vaW50ZXJmYWNlcydcblxuLyoqXG4gKiBHZXQgdGhlIGRlZmF1bHQgbG9jYXRpb24gdG8gaW5zZXJ0IGNvbnRlbnQgaW50byB0aGUgZWRpdG9yLlxuICogQnkgZGVmYXVsdCwgdXNlIHRoZSBzZWxlY3Rpb24gYXMgdGhlIHRhcmdldCBsb2NhdGlvbi4gQnV0IGlmIHRoZXJlIGlzXG4gKiBubyBzZWxlY3Rpb24sIGluc2VydCBhdCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCBzaW5jZSB0aGF0IGlzIHN1Y2ggYVxuICogY29tbW9uIHVzZSBjYXNlIHdoZW4gaW5zZXJ0aW5nIGZyb20gYSBub24tc2VsZWN0ZWQgc3RhdGUuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0SW5zZXJ0TG9jYXRpb24gPSAoZWRpdG9yOiBFZGl0b3IpOiBMb2NhdGlvbiA9PiB7XG4gIGlmIChlZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuIGVkaXRvci5zZWxlY3Rpb25cbiAgfSBlbHNlIGlmIChlZGl0b3IuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBFZGl0b3IuZW5kKGVkaXRvciwgW10pXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFswXVxuICB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcblxuZXhwb3J0IGNvbnN0IG1hdGNoUGF0aCA9IChcbiAgZWRpdG9yOiBFZGl0b3IsXG4gIHBhdGg6IFBhdGhcbik6ICgobm9kZTogTm9kZSkgPT4gYm9vbGVhbikgPT4ge1xuICBjb25zdCBbbm9kZV0gPSBFZGl0b3Iubm9kZShlZGl0b3IsIHBhdGgpXG4gIHJldHVybiBuID0+IG4gPT09IG5vZGVcbn1cbiIsICIvLyBDaGFyYWN0ZXIgKGdyYXBoZW1lIGNsdXN0ZXIpIGJvdW5kYXJpZXMgYXJlIGRldGVybWluZWQgYWNjb3JkaW5nIHRvXG4vLyB0aGUgZGVmYXVsdCBncmFwaGVtZSBjbHVzdGVyIGJvdW5kYXJ5IHNwZWNpZmljYXRpb24sIGV4dGVuZGVkIGdyYXBoZW1lIGNsdXN0ZXJzIHZhcmlhbnRbMV0uXG4vL1xuLy8gUmVmZXJlbmNlczpcbi8vXG4vLyBbMV0gaHR0cHM6Ly93d3cudW5pY29kZS5vcmcvcmVwb3J0cy90cjI5LyNEZWZhdWx0X0dyYXBoZW1lX0NsdXN0ZXJfVGFibGVcbi8vIFsyXSBodHRwczovL3d3dy51bmljb2RlLm9yZy9QdWJsaWMvVUNEL2xhdGVzdC91Y2QvYXV4aWxpYXJ5L0dyYXBoZW1lQnJlYWtQcm9wZXJ0eS50eHRcbi8vIFszXSBodHRwczovL3d3dy51bmljb2RlLm9yZy9QdWJsaWMvVUNEL2xhdGVzdC91Y2QvYXV4aWxpYXJ5L0dyYXBoZW1lQnJlYWtUZXN0Lmh0bWxcbi8vIFs0XSBodHRwczovL3d3dy51bmljb2RlLm9yZy9QdWJsaWMvVUNEL2xhdGVzdC91Y2QvYXV4aWxpYXJ5L0dyYXBoZW1lQnJlYWtUZXN0LnR4dFxuXG4vKipcbiAqIEdldCB0aGUgZGlzdGFuY2UgdG8gdGhlIGVuZCBvZiB0aGUgZmlyc3QgY2hhcmFjdGVyIGluIGEgc3RyaW5nIG9mIHRleHQuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGdldENoYXJhY3RlckRpc3RhbmNlID0gKHN0cjogc3RyaW5nLCBpc1JUTCA9IGZhbHNlKTogbnVtYmVyID0+IHtcbiAgY29uc3QgaXNMVFIgPSAhaXNSVExcbiAgY29uc3QgY29kZXBvaW50cyA9IGlzUlRMID8gY29kZXBvaW50c0l0ZXJhdG9yUlRMKHN0cikgOiBzdHJcblxuICBsZXQgbGVmdDogQ29kZXBvaW50VHlwZSA9IENvZGVwb2ludFR5cGUuTm9uZVxuICBsZXQgcmlnaHQ6IENvZGVwb2ludFR5cGUgPSBDb2RlcG9pbnRUeXBlLk5vbmVcbiAgbGV0IGRpc3RhbmNlID0gMFxuICAvLyBFdmFsdWF0aW9uIG9mIHRoZXNlIGNvbmRpdGlvbnMgYXJlIGRlZmVycmVkLlxuICBsZXQgZ2IxMTogYm9vbGVhbiB8IG51bGwgPSBudWxsIC8vIElzIEdCMTEgYXBwbGljYWJsZT9cbiAgbGV0IGdiMTJPcjEzOiBib29sZWFuIHwgbnVsbCA9IG51bGwgLy8gSXMgR0IxMiBvciBHQjEzIGFwcGxpY2FibGU/XG5cbiAgZm9yIChjb25zdCBjaGFyIG9mIGNvZGVwb2ludHMpIHtcbiAgICBjb25zdCBjb2RlID0gY2hhci5jb2RlUG9pbnRBdCgwKVxuICAgIGlmICghY29kZSkgYnJlYWtcblxuICAgIGNvbnN0IHR5cGUgPSBnZXRDb2RlcG9pbnRUeXBlKGNoYXIsIGNvZGUpXG4gICAgO1tsZWZ0LCByaWdodF0gPSBpc0xUUiA/IFtyaWdodCwgdHlwZV0gOiBbdHlwZSwgbGVmdF1cblxuICAgIGlmIChcbiAgICAgIGludGVyc2VjdHMobGVmdCwgQ29kZXBvaW50VHlwZS5aV0opICYmXG4gICAgICBpbnRlcnNlY3RzKHJpZ2h0LCBDb2RlcG9pbnRUeXBlLkV4dFBpY3QpXG4gICAgKSB7XG4gICAgICBpZiAoaXNMVFIpIHtcbiAgICAgICAgZ2IxMSA9IGVuZHNXaXRoRW1vamlaV0ooc3RyLnN1YnN0cmluZygwLCBkaXN0YW5jZSkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnYjExID0gZW5kc1dpdGhFbW9qaVpXSihzdHIuc3Vic3RyaW5nKDAsIHN0ci5sZW5ndGggLSBkaXN0YW5jZSkpXG4gICAgICB9XG4gICAgICBpZiAoIWdiMTEpIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgaW50ZXJzZWN0cyhsZWZ0LCBDb2RlcG9pbnRUeXBlLlJJKSAmJlxuICAgICAgaW50ZXJzZWN0cyhyaWdodCwgQ29kZXBvaW50VHlwZS5SSSlcbiAgICApIHtcbiAgICAgIGlmIChnYjEyT3IxMyAhPT0gbnVsbCkge1xuICAgICAgICBnYjEyT3IxMyA9ICFnYjEyT3IxM1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzTFRSKSB7XG4gICAgICAgICAgZ2IxMk9yMTMgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ2IxMk9yMTMgPSBlbmRzV2l0aE9kZE51bWJlck9mUklzKFxuICAgICAgICAgICAgc3RyLnN1YnN0cmluZygwLCBzdHIubGVuZ3RoIC0gZGlzdGFuY2UpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWdiMTJPcjEzKSBicmVha1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGxlZnQgIT09IENvZGVwb2ludFR5cGUuTm9uZSAmJlxuICAgICAgcmlnaHQgIT09IENvZGVwb2ludFR5cGUuTm9uZSAmJlxuICAgICAgaXNCb3VuZGFyeVBhaXIobGVmdCwgcmlnaHQpXG4gICAgKSB7XG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGRpc3RhbmNlICs9IGNoYXIubGVuZ3RoXG4gIH1cblxuICByZXR1cm4gZGlzdGFuY2UgfHwgMVxufVxuXG5jb25zdCBTUEFDRSA9IC9cXHMvXG5jb25zdCBQVU5DVFVBVElPTiA9XG4gIC9bXFx1MDAyQlxcdTAwMjEtXFx1MDAyM1xcdTAwMjUtXFx1MDAyQVxcdTAwMkMtXFx1MDAyRlxcdTAwM0FcXHUwMDNCXFx1MDAzRlxcdTAwNDBcXHUwMDVCLVxcdTAwNURcXHUwMDVGXFx1MDA3QlxcdTAwN0RcXHUwMEExXFx1MDBBN1xcdTAwQUJcXHUwMEI2XFx1MDBCN1xcdTAwQkJcXHUwMEJGXFx1MDM3RVxcdTAzODdcXHUwNTVBLVxcdTA1NUZcXHUwNTg5XFx1MDU4QVxcdTA1QkVcXHUwNUMwXFx1MDVDM1xcdTA1QzZcXHUwNUYzXFx1MDVGNFxcdTA2MDlcXHUwNjBBXFx1MDYwQ1xcdTA2MERcXHUwNjFCXFx1MDYxRVxcdTA2MUZcXHUwNjZBLVxcdTA2NkRcXHUwNkQ0XFx1MDcwMC1cXHUwNzBEXFx1MDdGNy1cXHUwN0Y5XFx1MDgzMC1cXHUwODNFXFx1MDg1RVxcdTA5NjRcXHUwOTY1XFx1MDk3MFxcdTBBRjBcXHUwREY0XFx1MEU0RlxcdTBFNUFcXHUwRTVCXFx1MEYwNC1cXHUwRjEyXFx1MEYxNFxcdTBGM0EtXFx1MEYzRFxcdTBGODVcXHUwRkQwLVxcdTBGRDRcXHUwRkQ5XFx1MEZEQVxcdTEwNEEtXFx1MTA0RlxcdTEwRkJcXHUxMzYwLVxcdTEzNjhcXHUxNDAwXFx1MTY2RFxcdTE2NkVcXHUxNjlCXFx1MTY5Q1xcdTE2RUItXFx1MTZFRFxcdTE3MzVcXHUxNzM2XFx1MTdENC1cXHUxN0Q2XFx1MTdEOC1cXHUxN0RBXFx1MTgwMC1cXHUxODBBXFx1MTk0NFxcdTE5NDVcXHUxQTFFXFx1MUExRlxcdTFBQTAtXFx1MUFBNlxcdTFBQTgtXFx1MUFBRFxcdTFCNUEtXFx1MUI2MFxcdTFCRkMtXFx1MUJGRlxcdTFDM0ItXFx1MUMzRlxcdTFDN0VcXHUxQzdGXFx1MUNDMC1cXHUxQ0M3XFx1MUNEM1xcdTIwMTAtXFx1MjAyN1xcdTIwMzAtXFx1MjA0M1xcdTIwNDUtXFx1MjA1MVxcdTIwNTMtXFx1MjA1RVxcdTIwN0RcXHUyMDdFXFx1MjA4RFxcdTIwOEVcXHUyMzI5XFx1MjMyQVxcdTI3NjgtXFx1Mjc3NVxcdTI3QzVcXHUyN0M2XFx1MjdFNi1cXHUyN0VGXFx1Mjk4My1cXHUyOTk4XFx1MjlEOC1cXHUyOURCXFx1MjlGQ1xcdTI5RkRcXHUyQ0Y5LVxcdTJDRkNcXHUyQ0ZFXFx1MkNGRlxcdTJENzBcXHUyRTAwLVxcdTJFMkVcXHUyRTMwLVxcdTJFM0JcXHUzMDAxLVxcdTMwMDNcXHUzMDA4LVxcdTMwMTFcXHUzMDE0LVxcdTMwMUZcXHUzMDMwXFx1MzAzRFxcdTMwQTBcXHUzMEZCXFx1QTRGRVxcdUE0RkZcXHVBNjBELVxcdUE2MEZcXHVBNjczXFx1QTY3RVxcdUE2RjItXFx1QTZGN1xcdUE4NzQtXFx1QTg3N1xcdUE4Q0VcXHVBOENGXFx1QThGOC1cXHVBOEZBXFx1QTkyRVxcdUE5MkZcXHVBOTVGXFx1QTlDMS1cXHVBOUNEXFx1QTlERVxcdUE5REZcXHVBQTVDLVxcdUFBNUZcXHVBQURFXFx1QUFERlxcdUFBRjBcXHVBQUYxXFx1QUJFQlxcdUZEM0VcXHVGRDNGXFx1RkUxMC1cXHVGRTE5XFx1RkUzMC1cXHVGRTUyXFx1RkU1NC1cXHVGRTYxXFx1RkU2M1xcdUZFNjhcXHVGRTZBXFx1RkU2QlxcdUZGMDEtXFx1RkYwM1xcdUZGMDUtXFx1RkYwQVxcdUZGMEMtXFx1RkYwRlxcdUZGMUFcXHVGRjFCXFx1RkYxRlxcdUZGMjBcXHVGRjNCLVxcdUZGM0RcXHVGRjNGXFx1RkY1QlxcdUZGNURcXHVGRjVGLVxcdUZGNjVdL1xuY29uc3QgQ0hBTUVMRU9OID0gL1snXFx1MjAxOFxcdTIwMTldL1xuXG4vKipcbiAqIEdldCB0aGUgZGlzdGFuY2UgdG8gdGhlIGVuZCBvZiB0aGUgZmlyc3Qgd29yZCBpbiBhIHN0cmluZyBvZiB0ZXh0LlxuICovXG5cbmV4cG9ydCBjb25zdCBnZXRXb3JkRGlzdGFuY2UgPSAodGV4dDogc3RyaW5nLCBpc1JUTCA9IGZhbHNlKTogbnVtYmVyID0+IHtcbiAgbGV0IGRpc3QgPSAwXG4gIGxldCBzdGFydGVkID0gZmFsc2VcblxuICB3aGlsZSAodGV4dC5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgY2hhckRpc3QgPSBnZXRDaGFyYWN0ZXJEaXN0YW5jZSh0ZXh0LCBpc1JUTClcbiAgICBjb25zdCBbY2hhciwgcmVtYWluaW5nXSA9IHNwbGl0QnlDaGFyYWN0ZXJEaXN0YW5jZSh0ZXh0LCBjaGFyRGlzdCwgaXNSVEwpXG5cbiAgICBpZiAoaXNXb3JkQ2hhcmFjdGVyKGNoYXIsIHJlbWFpbmluZywgaXNSVEwpKSB7XG4gICAgICBzdGFydGVkID0gdHJ1ZVxuICAgICAgZGlzdCArPSBjaGFyRGlzdFxuICAgIH0gZWxzZSBpZiAoIXN0YXJ0ZWQpIHtcbiAgICAgIGRpc3QgKz0gY2hhckRpc3RcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICB0ZXh0ID0gcmVtYWluaW5nXG4gIH1cblxuICByZXR1cm4gZGlzdFxufVxuXG4vKipcbiAqIFNwbGl0IGEgc3RyaW5nIGluIHR3byBwYXJ0cyBhdCBhIGdpdmVuIGRpc3RhbmNlIHN0YXJ0aW5nIGZyb20gdGhlIGVuZCB3aGVuXG4gKiBgaXNSVExgIGlzIHNldCB0byBgdHJ1ZWAuXG4gKi9cblxuZXhwb3J0IGNvbnN0IHNwbGl0QnlDaGFyYWN0ZXJEaXN0YW5jZSA9IChcbiAgc3RyOiBzdHJpbmcsXG4gIGRpc3Q6IG51bWJlcixcbiAgaXNSVEw/OiBib29sZWFuXG4pOiBbc3RyaW5nLCBzdHJpbmddID0+IHtcbiAgaWYgKGlzUlRMKSB7XG4gICAgY29uc3QgYXQgPSBzdHIubGVuZ3RoIC0gZGlzdFxuICAgIHJldHVybiBbc3RyLnNsaWNlKGF0LCBzdHIubGVuZ3RoKSwgc3RyLnNsaWNlKDAsIGF0KV1cbiAgfVxuXG4gIHJldHVybiBbc3RyLnNsaWNlKDAsIGRpc3QpLCBzdHIuc2xpY2UoZGlzdCldXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBjaGFyYWN0ZXIgaXMgYSB3b3JkIGNoYXJhY3Rlci4gVGhlIGByZW1haW5pbmdgIGFyZ3VtZW50IGlzIHVzZWRcbiAqIGJlY2F1c2Ugc29tZXRpbWVzIHlvdSBtdXN0IHJlYWQgc3Vic2VxdWVudCBjaGFyYWN0ZXJzIHRvIHRydWx5IGRldGVybWluZSBpdC5cbiAqL1xuXG5jb25zdCBpc1dvcmRDaGFyYWN0ZXIgPSAoXG4gIGNoYXI6IHN0cmluZyxcbiAgcmVtYWluaW5nOiBzdHJpbmcsXG4gIGlzUlRMID0gZmFsc2Vcbik6IGJvb2xlYW4gPT4ge1xuICBpZiAoU1BBQ0UudGVzdChjaGFyKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLy8gQ2hhbWVsZW9ucyBjb3VudCBhcyB3b3JkIGNoYXJhY3RlcnMgYXMgbG9uZyBhcyB0aGV5J3JlIGluIGEgd29yZCwgc29cbiAgLy8gcmVjdXJzZSB0byBzZWUgaWYgdGhlIG5leHQgb25lIGlzIGEgd29yZCBjaGFyYWN0ZXIgb3Igbm90LlxuICBpZiAoQ0hBTUVMRU9OLnRlc3QoY2hhcikpIHtcbiAgICBjb25zdCBjaGFyRGlzdCA9IGdldENoYXJhY3RlckRpc3RhbmNlKHJlbWFpbmluZywgaXNSVEwpXG4gICAgY29uc3QgW25leHRDaGFyLCBuZXh0UmVtYWluaW5nXSA9IHNwbGl0QnlDaGFyYWN0ZXJEaXN0YW5jZShcbiAgICAgIHJlbWFpbmluZyxcbiAgICAgIGNoYXJEaXN0LFxuICAgICAgaXNSVExcbiAgICApXG5cbiAgICBpZiAoaXNXb3JkQ2hhcmFjdGVyKG5leHRDaGFyLCBuZXh0UmVtYWluaW5nLCBpc1JUTCkpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgaWYgKFBVTkNUVUFUSU9OLnRlc3QoY2hhcikpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbi8qKlxuICogSXRlcmF0ZSBvbiBjb2RlcG9pbnRzIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAqL1xuXG5leHBvcnQgY29uc3QgY29kZXBvaW50c0l0ZXJhdG9yUlRMID0gZnVuY3Rpb24qIChzdHI6IHN0cmluZykge1xuICBjb25zdCBlbmQgPSBzdHIubGVuZ3RoIC0gMVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2hhcjEgPSBzdHIuY2hhckF0KGVuZCAtIGkpXG5cbiAgICBpZiAoaXNMb3dTdXJyb2dhdGUoY2hhcjEuY2hhckNvZGVBdCgwKSkpIHtcbiAgICAgIGNvbnN0IGNoYXIyID0gc3RyLmNoYXJBdChlbmQgLSBpIC0gMSlcbiAgICAgIGlmIChpc0hpZ2hTdXJyb2dhdGUoY2hhcjIuY2hhckNvZGVBdCgwKSkpIHtcbiAgICAgICAgeWllbGQgY2hhcjIgKyBjaGFyMVxuXG4gICAgICAgIGkrK1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgIH1cblxuICAgIHlpZWxkIGNoYXIxXG4gIH1cbn1cblxuLyoqXG4gKiBJcyBgY2hhckNvZGVgIGEgaGlnaCBzdXJyb2dhdGUuXG4gKlxuICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVW5pdmVyc2FsX0NoYXJhY3Rlcl9TZXRfY2hhcmFjdGVycyNTdXJyb2dhdGVzXG4gKi9cblxuY29uc3QgaXNIaWdoU3Vycm9nYXRlID0gKGNoYXJDb2RlOiBudW1iZXIpID0+IHtcbiAgcmV0dXJuIGNoYXJDb2RlID49IDB4ZDgwMCAmJiBjaGFyQ29kZSA8PSAweGRiZmZcbn1cblxuLyoqXG4gKiBJcyBgY2hhckNvZGVgIGEgbG93IHN1cnJvZ2F0ZS5cbiAqXG4gKiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Vbml2ZXJzYWxfQ2hhcmFjdGVyX1NldF9jaGFyYWN0ZXJzI1N1cnJvZ2F0ZXNcbiAqL1xuXG5jb25zdCBpc0xvd1N1cnJvZ2F0ZSA9IChjaGFyQ29kZTogbnVtYmVyKSA9PiB7XG4gIHJldHVybiBjaGFyQ29kZSA+PSAweGRjMDAgJiYgY2hhckNvZGUgPD0gMHhkZmZmXG59XG5cbmVudW0gQ29kZXBvaW50VHlwZSB7XG4gIE5vbmUgPSAwLFxuICBFeHRlbmQgPSAxIDw8IDAsXG4gIFpXSiA9IDEgPDwgMSxcbiAgUkkgPSAxIDw8IDIsXG4gIFByZXBlbmQgPSAxIDw8IDMsXG4gIFNwYWNpbmdNYXJrID0gMSA8PCA0LFxuICBMID0gMSA8PCA1LFxuICBWID0gMSA8PCA2LFxuICBUID0gMSA8PCA3LFxuICBMViA9IDEgPDwgOCxcbiAgTFZUID0gMSA8PCA5LFxuICBFeHRQaWN0ID0gMSA8PCAxMCxcbiAgQW55ID0gMSA8PCAxMSxcbn1cblxuY29uc3QgcmVFeHRlbmQgPSAvXltcXHB7R3JfRXh0fVxccHtFTW9kfV0kL3VcbmNvbnN0IHJlUHJlcGVuZCA9XG4gIC9eW1xcdTA2MDAtXFx1MDYwNVxcdTA2RERcXHUwNzBGXFx1MDg5MC1cXHUwODkxXFx1MDhFMlxcdTBENEVcXHV7MTEwQkR9XFx1ezExMENEfVxcdXsxMTFDMn0tXFx1ezExMUMzfVxcdXsxMTkzRn1cXHV7MTE5NDF9XFx1ezExQTNBfVxcdXsxMUE4NH0tXFx1ezExQTg5fVxcdXsxMUQ0Nn1dJC91XG5jb25zdCByZVNwYWNpbmdNYXJrID1cbiAgL15bXFx1MDkwM1xcdTA5M0JcXHUwOTNFLVxcdTA5NDBcXHUwOTQ5LVxcdTA5NENcXHUwOTRFLVxcdTA5NEZcXHUwOTgyLVxcdTA5ODNcXHUwOUJGLVxcdTA5QzBcXHUwOUM3LVxcdTA5QzhcXHUwOUNCLVxcdTA5Q0NcXHUwQTAzXFx1MEEzRS1cXHUwQTQwXFx1MEE4M1xcdTBBQkUtXFx1MEFDMFxcdTBBQzlcXHUwQUNCLVxcdTBBQ0NcXHUwQjAyLVxcdTBCMDNcXHUwQjQwXFx1MEI0Ny1cXHUwQjQ4XFx1MEI0Qi1cXHUwQjRDXFx1MEJCRlxcdTBCQzEtXFx1MEJDMlxcdTBCQzYtXFx1MEJDOFxcdTBCQ0EtXFx1MEJDQ1xcdTBDMDEtXFx1MEMwM1xcdTBDNDEtXFx1MEM0NFxcdTBDODItXFx1MEM4M1xcdTBDQkVcXHUwQ0MwLVxcdTBDQzFcXHUwQ0MzLVxcdTBDQzRcXHUwQ0M3LVxcdTBDQzhcXHUwQ0NBLVxcdTBDQ0JcXHUwRDAyLVxcdTBEMDNcXHUwRDNGLVxcdTBENDBcXHUwRDQ2LVxcdTBENDhcXHUwRDRBLVxcdTBENENcXHUwRDgyLVxcdTBEODNcXHUwREQwLVxcdTBERDFcXHUwREQ4LVxcdTBEREVcXHUwREYyLVxcdTBERjNcXHUwRTMzXFx1MEVCM1xcdTBGM0UtXFx1MEYzRlxcdTBGN0ZcXHUxMDMxXFx1MTAzQi1cXHUxMDNDXFx1MTA1Ni1cXHUxMDU3XFx1MTA4NFxcdTE3MTVcXHUxNzM0XFx1MTdCNlxcdTE3QkUtXFx1MTdDNVxcdTE3QzctXFx1MTdDOFxcdTE5MjMtXFx1MTkyNlxcdTE5MjktXFx1MTkyQlxcdTE5MzAtXFx1MTkzMVxcdTE5MzMtXFx1MTkzOFxcdTFBMTktXFx1MUExQVxcdTFBNTVcXHUxQTU3XFx1MUE2RC1cXHUxQTcyXFx1MUIwNFxcdTFCM0JcXHUxQjNELVxcdTFCNDFcXHUxQjQzLVxcdTFCNDRcXHUxQjgyXFx1MUJBMVxcdTFCQTYtXFx1MUJBN1xcdTFCQUFcXHUxQkU3XFx1MUJFQS1cXHUxQkVDXFx1MUJFRVxcdTFCRjItXFx1MUJGM1xcdTFDMjQtXFx1MUMyQlxcdTFDMzQtXFx1MUMzNVxcdTFDRTFcXHUxQ0Y3XFx1QTgyMy1cXHVBODI0XFx1QTgyN1xcdUE4ODAtXFx1QTg4MVxcdUE4QjQtXFx1QThDM1xcdUE5NTItXFx1QTk1M1xcdUE5ODNcXHVBOUI0LVxcdUE5QjVcXHVBOUJBLVxcdUE5QkJcXHVBOUJFLVxcdUE5QzBcXHVBQTJGLVxcdUFBMzBcXHVBQTMzLVxcdUFBMzRcXHVBQTREXFx1QUFFQlxcdUFBRUUtXFx1QUFFRlxcdUFBRjVcXHVBQkUzLVxcdUFCRTRcXHVBQkU2LVxcdUFCRTdcXHVBQkU5LVxcdUFCRUFcXHVBQkVDXFx1ezExMDAwfVxcdXsxMTAwMn1cXHV7MTEwODJ9XFx1ezExMEIwfS1cXHV7MTEwQjJ9XFx1ezExMEI3fS1cXHV7MTEwQjh9XFx1ezExMTJDfVxcdXsxMTE0NX0tXFx1ezExMTQ2fVxcdXsxMTE4Mn1cXHV7MTExQjN9LVxcdXsxMTFCNX1cXHV7MTExQkZ9LVxcdXsxMTFDMH1cXHV7MTExQ0V9XFx1ezExMjJDfS1cXHV7MTEyMkV9XFx1ezExMjMyfS1cXHV7MTEyMzN9XFx1ezExMjM1fVxcdXsxMTJFMH0tXFx1ezExMkUyfVxcdXsxMTMwMn0tXFx1ezExMzAzfVxcdXsxMTMzRn1cXHV7MTEzNDF9LVxcdXsxMTM0NH1cXHV7MTEzNDd9LVxcdXsxMTM0OH1cXHV7MTEzNEJ9LVxcdXsxMTM0RH1cXHV7MTEzNjJ9LVxcdXsxMTM2M31cXHV7MTE0MzV9LVxcdXsxMTQzN31cXHV7MTE0NDB9LVxcdXsxMTQ0MX1cXHV7MTE0NDV9XFx1ezExNEIxfS1cXHV7MTE0QjJ9XFx1ezExNEI5fVxcdXsxMTRCQn0tXFx1ezExNEJDfVxcdXsxMTRCRX1cXHV7MTE0QzF9XFx1ezExNUIwfS1cXHV7MTE1QjF9XFx1ezExNUI4fS1cXHV7MTE1QkJ9XFx1ezExNUJFfVxcdXsxMTYzMH0tXFx1ezExNjMyfVxcdXsxMTYzQn0tXFx1ezExNjNDfVxcdXsxMTYzRX1cXHV7MTE2QUN9XFx1ezExNkFFfS1cXHV7MTE2QUZ9XFx1ezExNkI2fVxcdXsxMTcyNn1cXHV7MTE4MkN9LVxcdXsxMTgyRX1cXHV7MTE4Mzh9XFx1ezExOTMxfS1cXHV7MTE5MzV9XFx1ezExOTM3fS1cXHV7MTE5Mzh9XFx1ezExOTNEfVxcdXsxMTk0MH1cXHV7MTE5NDJ9XFx1ezExOUQxfS1cXHV7MTE5RDN9XFx1ezExOURDfS1cXHV7MTE5REZ9XFx1ezExOUU0fVxcdXsxMUEzOX1cXHV7MTFBNTd9LVxcdXsxMUE1OH1cXHV7MTFBOTd9XFx1ezExQzJGfVxcdXsxMUMzRX1cXHV7MTFDQTl9XFx1ezExQ0IxfVxcdXsxMUNCNH1cXHV7MTFEOEF9LVxcdXsxMUQ4RX1cXHV7MTFEOTN9LVxcdXsxMUQ5NH1cXHV7MTFEOTZ9XFx1ezExRUY1fS1cXHV7MTFFRjZ9XFx1ezE2RjUxfS1cXHV7MTZGODd9XFx1ezE2RkYwfS1cXHV7MTZGRjF9XFx1ezFEMTY2fVxcdXsxRDE2RH1dJC91XG5jb25zdCByZUwgPSAvXltcXHUxMTAwLVxcdTExNUZcXHVBOTYwLVxcdUE5N0NdJC91XG5jb25zdCByZVYgPSAvXltcXHUxMTYwLVxcdTExQTdcXHVEN0IwLVxcdUQ3QzZdJC91XG5jb25zdCByZVQgPSAvXltcXHUxMUE4LVxcdTExRkZcXHVEN0NCLVxcdUQ3RkJdJC91XG5jb25zdCByZUxWID1cbiAgL15bXFx1QUMwMFxcdUFDMUNcXHVBQzM4XFx1QUM1NFxcdUFDNzBcXHVBQzhDXFx1QUNBOFxcdUFDQzRcXHVBQ0UwXFx1QUNGQ1xcdUFEMThcXHVBRDM0XFx1QUQ1MFxcdUFENkNcXHVBRDg4XFx1QURBNFxcdUFEQzBcXHVBRERDXFx1QURGOFxcdUFFMTRcXHVBRTMwXFx1QUU0Q1xcdUFFNjhcXHVBRTg0XFx1QUVBMFxcdUFFQkNcXHVBRUQ4XFx1QUVGNFxcdUFGMTBcXHVBRjJDXFx1QUY0OFxcdUFGNjRcXHVBRjgwXFx1QUY5Q1xcdUFGQjhcXHVBRkQ0XFx1QUZGMFxcdUIwMENcXHVCMDI4XFx1QjA0NFxcdUIwNjBcXHVCMDdDXFx1QjA5OFxcdUIwQjRcXHVCMEQwXFx1QjBFQ1xcdUIxMDhcXHVCMTI0XFx1QjE0MFxcdUIxNUNcXHVCMTc4XFx1QjE5NFxcdUIxQjBcXHVCMUNDXFx1QjFFOFxcdUIyMDRcXHVCMjIwXFx1QjIzQ1xcdUIyNThcXHVCMjc0XFx1QjI5MFxcdUIyQUNcXHVCMkM4XFx1QjJFNFxcdUIzMDBcXHVCMzFDXFx1QjMzOFxcdUIzNTRcXHVCMzcwXFx1QjM4Q1xcdUIzQThcXHVCM0M0XFx1QjNFMFxcdUIzRkNcXHVCNDE4XFx1QjQzNFxcdUI0NTBcXHVCNDZDXFx1QjQ4OFxcdUI0QTRcXHVCNEMwXFx1QjREQ1xcdUI0RjhcXHVCNTE0XFx1QjUzMFxcdUI1NENcXHVCNTY4XFx1QjU4NFxcdUI1QTBcXHVCNUJDXFx1QjVEOFxcdUI1RjRcXHVCNjEwXFx1QjYyQ1xcdUI2NDhcXHVCNjY0XFx1QjY4MFxcdUI2OUNcXHVCNkI4XFx1QjZENFxcdUI2RjBcXHVCNzBDXFx1QjcyOFxcdUI3NDRcXHVCNzYwXFx1Qjc3Q1xcdUI3OThcXHVCN0I0XFx1QjdEMFxcdUI3RUNcXHVCODA4XFx1QjgyNFxcdUI4NDBcXHVCODVDXFx1Qjg3OFxcdUI4OTRcXHVCOEIwXFx1QjhDQ1xcdUI4RThcXHVCOTA0XFx1QjkyMFxcdUI5M0NcXHVCOTU4XFx1Qjk3NFxcdUI5OTBcXHVCOUFDXFx1QjlDOFxcdUI5RTRcXHVCQTAwXFx1QkExQ1xcdUJBMzhcXHVCQTU0XFx1QkE3MFxcdUJBOENcXHVCQUE4XFx1QkFDNFxcdUJBRTBcXHVCQUZDXFx1QkIxOFxcdUJCMzRcXHVCQjUwXFx1QkI2Q1xcdUJCODhcXHVCQkE0XFx1QkJDMFxcdUJCRENcXHVCQkY4XFx1QkMxNFxcdUJDMzBcXHVCQzRDXFx1QkM2OFxcdUJDODRcXHVCQ0EwXFx1QkNCQ1xcdUJDRDhcXHVCQ0Y0XFx1QkQxMFxcdUJEMkNcXHVCRDQ4XFx1QkQ2NFxcdUJEODBcXHVCRDlDXFx1QkRCOFxcdUJERDRcXHVCREYwXFx1QkUwQ1xcdUJFMjhcXHVCRTQ0XFx1QkU2MFxcdUJFN0NcXHVCRTk4XFx1QkVCNFxcdUJFRDBcXHVCRUVDXFx1QkYwOFxcdUJGMjRcXHVCRjQwXFx1QkY1Q1xcdUJGNzhcXHVCRjk0XFx1QkZCMFxcdUJGQ0NcXHVCRkU4XFx1QzAwNFxcdUMwMjBcXHVDMDNDXFx1QzA1OFxcdUMwNzRcXHVDMDkwXFx1QzBBQ1xcdUMwQzhcXHVDMEU0XFx1QzEwMFxcdUMxMUNcXHVDMTM4XFx1QzE1NFxcdUMxNzBcXHVDMThDXFx1QzFBOFxcdUMxQzRcXHVDMUUwXFx1QzFGQ1xcdUMyMThcXHVDMjM0XFx1QzI1MFxcdUMyNkNcXHVDMjg4XFx1QzJBNFxcdUMyQzBcXHVDMkRDXFx1QzJGOFxcdUMzMTRcXHVDMzMwXFx1QzM0Q1xcdUMzNjhcXHVDMzg0XFx1QzNBMFxcdUMzQkNcXHVDM0Q4XFx1QzNGNFxcdUM0MTBcXHVDNDJDXFx1QzQ0OFxcdUM0NjRcXHVDNDgwXFx1QzQ5Q1xcdUM0QjhcXHVDNEQ0XFx1QzRGMFxcdUM1MENcXHVDNTI4XFx1QzU0NFxcdUM1NjBcXHVDNTdDXFx1QzU5OFxcdUM1QjRcXHVDNUQwXFx1QzVFQ1xcdUM2MDhcXHVDNjI0XFx1QzY0MFxcdUM2NUNcXHVDNjc4XFx1QzY5NFxcdUM2QjBcXHVDNkNDXFx1QzZFOFxcdUM3MDRcXHVDNzIwXFx1QzczQ1xcdUM3NThcXHVDNzc0XFx1Qzc5MFxcdUM3QUNcXHVDN0M4XFx1QzdFNFxcdUM4MDBcXHVDODFDXFx1QzgzOFxcdUM4NTRcXHVDODcwXFx1Qzg4Q1xcdUM4QThcXHVDOEM0XFx1QzhFMFxcdUM4RkNcXHVDOTE4XFx1QzkzNFxcdUM5NTBcXHVDOTZDXFx1Qzk4OFxcdUM5QTRcXHVDOUMwXFx1QzlEQ1xcdUM5RjhcXHVDQTE0XFx1Q0EzMFxcdUNBNENcXHVDQTY4XFx1Q0E4NFxcdUNBQTBcXHVDQUJDXFx1Q0FEOFxcdUNBRjRcXHVDQjEwXFx1Q0IyQ1xcdUNCNDhcXHVDQjY0XFx1Q0I4MFxcdUNCOUNcXHVDQkI4XFx1Q0JENFxcdUNCRjBcXHVDQzBDXFx1Q0MyOFxcdUNDNDRcXHVDQzYwXFx1Q0M3Q1xcdUNDOThcXHVDQ0I0XFx1Q0NEMFxcdUNDRUNcXHVDRDA4XFx1Q0QyNFxcdUNENDBcXHVDRDVDXFx1Q0Q3OFxcdUNEOTRcXHVDREIwXFx1Q0RDQ1xcdUNERThcXHVDRTA0XFx1Q0UyMFxcdUNFM0NcXHVDRTU4XFx1Q0U3NFxcdUNFOTBcXHVDRUFDXFx1Q0VDOFxcdUNFRTRcXHVDRjAwXFx1Q0YxQ1xcdUNGMzhcXHVDRjU0XFx1Q0Y3MFxcdUNGOENcXHVDRkE4XFx1Q0ZDNFxcdUNGRTBcXHVDRkZDXFx1RDAxOFxcdUQwMzRcXHVEMDUwXFx1RDA2Q1xcdUQwODhcXHVEMEE0XFx1RDBDMFxcdUQwRENcXHVEMEY4XFx1RDExNFxcdUQxMzBcXHVEMTRDXFx1RDE2OFxcdUQxODRcXHVEMUEwXFx1RDFCQ1xcdUQxRDhcXHVEMUY0XFx1RDIxMFxcdUQyMkNcXHVEMjQ4XFx1RDI2NFxcdUQyODBcXHVEMjlDXFx1RDJCOFxcdUQyRDRcXHVEMkYwXFx1RDMwQ1xcdUQzMjhcXHVEMzQ0XFx1RDM2MFxcdUQzN0NcXHVEMzk4XFx1RDNCNFxcdUQzRDBcXHVEM0VDXFx1RDQwOFxcdUQ0MjRcXHVENDQwXFx1RDQ1Q1xcdUQ0NzhcXHVENDk0XFx1RDRCMFxcdUQ0Q0NcXHVENEU4XFx1RDUwNFxcdUQ1MjBcXHVENTNDXFx1RDU1OFxcdUQ1NzRcXHVENTkwXFx1RDVBQ1xcdUQ1QzhcXHVENUU0XFx1RDYwMFxcdUQ2MUNcXHVENjM4XFx1RDY1NFxcdUQ2NzBcXHVENjhDXFx1RDZBOFxcdUQ2QzRcXHVENkUwXFx1RDZGQ1xcdUQ3MThcXHVENzM0XFx1RDc1MFxcdUQ3NkNcXHVENzg4XSQvdVxuY29uc3QgcmVMVlQgPVxuICAvXltcXHVBQzAxLVxcdUFDMUJcXHVBQzFELVxcdUFDMzdcXHVBQzM5LVxcdUFDNTNcXHVBQzU1LVxcdUFDNkZcXHVBQzcxLVxcdUFDOEJcXHVBQzhELVxcdUFDQTdcXHVBQ0E5LVxcdUFDQzNcXHVBQ0M1LVxcdUFDREZcXHVBQ0UxLVxcdUFDRkJcXHVBQ0ZELVxcdUFEMTdcXHVBRDE5LVxcdUFEMzNcXHVBRDM1LVxcdUFENEZcXHVBRDUxLVxcdUFENkJcXHVBRDZELVxcdUFEODdcXHVBRDg5LVxcdUFEQTNcXHVBREE1LVxcdUFEQkZcXHVBREMxLVxcdUFEREJcXHVBRERELVxcdUFERjdcXHVBREY5LVxcdUFFMTNcXHVBRTE1LVxcdUFFMkZcXHVBRTMxLVxcdUFFNEJcXHVBRTRELVxcdUFFNjdcXHVBRTY5LVxcdUFFODNcXHVBRTg1LVxcdUFFOUZcXHVBRUExLVxcdUFFQkJcXHVBRUJELVxcdUFFRDdcXHVBRUQ5LVxcdUFFRjNcXHVBRUY1LVxcdUFGMEZcXHVBRjExLVxcdUFGMkJcXHVBRjJELVxcdUFGNDdcXHVBRjQ5LVxcdUFGNjNcXHVBRjY1LVxcdUFGN0ZcXHVBRjgxLVxcdUFGOUJcXHVBRjlELVxcdUFGQjdcXHVBRkI5LVxcdUFGRDNcXHVBRkQ1LVxcdUFGRUZcXHVBRkYxLVxcdUIwMEJcXHVCMDBELVxcdUIwMjdcXHVCMDI5LVxcdUIwNDNcXHVCMDQ1LVxcdUIwNUZcXHVCMDYxLVxcdUIwN0JcXHVCMDdELVxcdUIwOTdcXHVCMDk5LVxcdUIwQjNcXHVCMEI1LVxcdUIwQ0ZcXHVCMEQxLVxcdUIwRUJcXHVCMEVELVxcdUIxMDdcXHVCMTA5LVxcdUIxMjNcXHVCMTI1LVxcdUIxM0ZcXHVCMTQxLVxcdUIxNUJcXHVCMTVELVxcdUIxNzdcXHVCMTc5LVxcdUIxOTNcXHVCMTk1LVxcdUIxQUZcXHVCMUIxLVxcdUIxQ0JcXHVCMUNELVxcdUIxRTdcXHVCMUU5LVxcdUIyMDNcXHVCMjA1LVxcdUIyMUZcXHVCMjIxLVxcdUIyM0JcXHVCMjNELVxcdUIyNTdcXHVCMjU5LVxcdUIyNzNcXHVCMjc1LVxcdUIyOEZcXHVCMjkxLVxcdUIyQUJcXHVCMkFELVxcdUIyQzdcXHVCMkM5LVxcdUIyRTNcXHVCMkU1LVxcdUIyRkZcXHVCMzAxLVxcdUIzMUJcXHVCMzFELVxcdUIzMzdcXHVCMzM5LVxcdUIzNTNcXHVCMzU1LVxcdUIzNkZcXHVCMzcxLVxcdUIzOEJcXHVCMzhELVxcdUIzQTdcXHVCM0E5LVxcdUIzQzNcXHVCM0M1LVxcdUIzREZcXHVCM0UxLVxcdUIzRkJcXHVCM0ZELVxcdUI0MTdcXHVCNDE5LVxcdUI0MzNcXHVCNDM1LVxcdUI0NEZcXHVCNDUxLVxcdUI0NkJcXHVCNDZELVxcdUI0ODdcXHVCNDg5LVxcdUI0QTNcXHVCNEE1LVxcdUI0QkZcXHVCNEMxLVxcdUI0REJcXHVCNERELVxcdUI0RjdcXHVCNEY5LVxcdUI1MTNcXHVCNTE1LVxcdUI1MkZcXHVCNTMxLVxcdUI1NEJcXHVCNTRELVxcdUI1NjdcXHVCNTY5LVxcdUI1ODNcXHVCNTg1LVxcdUI1OUZcXHVCNUExLVxcdUI1QkJcXHVCNUJELVxcdUI1RDdcXHVCNUQ5LVxcdUI1RjNcXHVCNUY1LVxcdUI2MEZcXHVCNjExLVxcdUI2MkJcXHVCNjJELVxcdUI2NDdcXHVCNjQ5LVxcdUI2NjNcXHVCNjY1LVxcdUI2N0ZcXHVCNjgxLVxcdUI2OUJcXHVCNjlELVxcdUI2QjdcXHVCNkI5LVxcdUI2RDNcXHVCNkQ1LVxcdUI2RUZcXHVCNkYxLVxcdUI3MEJcXHVCNzBELVxcdUI3MjdcXHVCNzI5LVxcdUI3NDNcXHVCNzQ1LVxcdUI3NUZcXHVCNzYxLVxcdUI3N0JcXHVCNzdELVxcdUI3OTdcXHVCNzk5LVxcdUI3QjNcXHVCN0I1LVxcdUI3Q0ZcXHVCN0QxLVxcdUI3RUJcXHVCN0VELVxcdUI4MDdcXHVCODA5LVxcdUI4MjNcXHVCODI1LVxcdUI4M0ZcXHVCODQxLVxcdUI4NUJcXHVCODVELVxcdUI4NzdcXHVCODc5LVxcdUI4OTNcXHVCODk1LVxcdUI4QUZcXHVCOEIxLVxcdUI4Q0JcXHVCOENELVxcdUI4RTdcXHVCOEU5LVxcdUI5MDNcXHVCOTA1LVxcdUI5MUZcXHVCOTIxLVxcdUI5M0JcXHVCOTNELVxcdUI5NTdcXHVCOTU5LVxcdUI5NzNcXHVCOTc1LVxcdUI5OEZcXHVCOTkxLVxcdUI5QUJcXHVCOUFELVxcdUI5QzdcXHVCOUM5LVxcdUI5RTNcXHVCOUU1LVxcdUI5RkZcXHVCQTAxLVxcdUJBMUJcXHVCQTFELVxcdUJBMzdcXHVCQTM5LVxcdUJBNTNcXHVCQTU1LVxcdUJBNkZcXHVCQTcxLVxcdUJBOEJcXHVCQThELVxcdUJBQTdcXHVCQUE5LVxcdUJBQzNcXHVCQUM1LVxcdUJBREZcXHVCQUUxLVxcdUJBRkJcXHVCQUZELVxcdUJCMTdcXHVCQjE5LVxcdUJCMzNcXHVCQjM1LVxcdUJCNEZcXHVCQjUxLVxcdUJCNkJcXHVCQjZELVxcdUJCODdcXHVCQjg5LVxcdUJCQTNcXHVCQkE1LVxcdUJCQkZcXHVCQkMxLVxcdUJCREJcXHVCQkRELVxcdUJCRjdcXHVCQkY5LVxcdUJDMTNcXHVCQzE1LVxcdUJDMkZcXHVCQzMxLVxcdUJDNEJcXHVCQzRELVxcdUJDNjdcXHVCQzY5LVxcdUJDODNcXHVCQzg1LVxcdUJDOUZcXHVCQ0ExLVxcdUJDQkJcXHVCQ0JELVxcdUJDRDdcXHVCQ0Q5LVxcdUJDRjNcXHVCQ0Y1LVxcdUJEMEZcXHVCRDExLVxcdUJEMkJcXHVCRDJELVxcdUJENDdcXHVCRDQ5LVxcdUJENjNcXHVCRDY1LVxcdUJEN0ZcXHVCRDgxLVxcdUJEOUJcXHVCRDlELVxcdUJEQjdcXHVCREI5LVxcdUJERDNcXHVCREQ1LVxcdUJERUZcXHVCREYxLVxcdUJFMEJcXHVCRTBELVxcdUJFMjdcXHVCRTI5LVxcdUJFNDNcXHVCRTQ1LVxcdUJFNUZcXHVCRTYxLVxcdUJFN0JcXHVCRTdELVxcdUJFOTdcXHVCRTk5LVxcdUJFQjNcXHVCRUI1LVxcdUJFQ0ZcXHVCRUQxLVxcdUJFRUJcXHVCRUVELVxcdUJGMDdcXHVCRjA5LVxcdUJGMjNcXHVCRjI1LVxcdUJGM0ZcXHVCRjQxLVxcdUJGNUJcXHVCRjVELVxcdUJGNzdcXHVCRjc5LVxcdUJGOTNcXHVCRjk1LVxcdUJGQUZcXHVCRkIxLVxcdUJGQ0JcXHVCRkNELVxcdUJGRTdcXHVCRkU5LVxcdUMwMDNcXHVDMDA1LVxcdUMwMUZcXHVDMDIxLVxcdUMwM0JcXHVDMDNELVxcdUMwNTdcXHVDMDU5LVxcdUMwNzNcXHVDMDc1LVxcdUMwOEZcXHVDMDkxLVxcdUMwQUJcXHVDMEFELVxcdUMwQzdcXHVDMEM5LVxcdUMwRTNcXHVDMEU1LVxcdUMwRkZcXHVDMTAxLVxcdUMxMUJcXHVDMTFELVxcdUMxMzdcXHVDMTM5LVxcdUMxNTNcXHVDMTU1LVxcdUMxNkZcXHVDMTcxLVxcdUMxOEJcXHVDMThELVxcdUMxQTdcXHVDMUE5LVxcdUMxQzNcXHVDMUM1LVxcdUMxREZcXHVDMUUxLVxcdUMxRkJcXHVDMUZELVxcdUMyMTdcXHVDMjE5LVxcdUMyMzNcXHVDMjM1LVxcdUMyNEZcXHVDMjUxLVxcdUMyNkJcXHVDMjZELVxcdUMyODdcXHVDMjg5LVxcdUMyQTNcXHVDMkE1LVxcdUMyQkZcXHVDMkMxLVxcdUMyREJcXHVDMkRELVxcdUMyRjdcXHVDMkY5LVxcdUMzMTNcXHVDMzE1LVxcdUMzMkZcXHVDMzMxLVxcdUMzNEJcXHVDMzRELVxcdUMzNjdcXHVDMzY5LVxcdUMzODNcXHVDMzg1LVxcdUMzOUZcXHVDM0ExLVxcdUMzQkJcXHVDM0JELVxcdUMzRDdcXHVDM0Q5LVxcdUMzRjNcXHVDM0Y1LVxcdUM0MEZcXHVDNDExLVxcdUM0MkJcXHVDNDJELVxcdUM0NDdcXHVDNDQ5LVxcdUM0NjNcXHVDNDY1LVxcdUM0N0ZcXHVDNDgxLVxcdUM0OUJcXHVDNDlELVxcdUM0QjdcXHVDNEI5LVxcdUM0RDNcXHVDNEQ1LVxcdUM0RUZcXHVDNEYxLVxcdUM1MEJcXHVDNTBELVxcdUM1MjdcXHVDNTI5LVxcdUM1NDNcXHVDNTQ1LVxcdUM1NUZcXHVDNTYxLVxcdUM1N0JcXHVDNTdELVxcdUM1OTdcXHVDNTk5LVxcdUM1QjNcXHVDNUI1LVxcdUM1Q0ZcXHVDNUQxLVxcdUM1RUJcXHVDNUVELVxcdUM2MDdcXHVDNjA5LVxcdUM2MjNcXHVDNjI1LVxcdUM2M0ZcXHVDNjQxLVxcdUM2NUJcXHVDNjVELVxcdUM2NzdcXHVDNjc5LVxcdUM2OTNcXHVDNjk1LVxcdUM2QUZcXHVDNkIxLVxcdUM2Q0JcXHVDNkNELVxcdUM2RTdcXHVDNkU5LVxcdUM3MDNcXHVDNzA1LVxcdUM3MUZcXHVDNzIxLVxcdUM3M0JcXHVDNzNELVxcdUM3NTdcXHVDNzU5LVxcdUM3NzNcXHVDNzc1LVxcdUM3OEZcXHVDNzkxLVxcdUM3QUJcXHVDN0FELVxcdUM3QzdcXHVDN0M5LVxcdUM3RTNcXHVDN0U1LVxcdUM3RkZcXHVDODAxLVxcdUM4MUJcXHVDODFELVxcdUM4MzdcXHVDODM5LVxcdUM4NTNcXHVDODU1LVxcdUM4NkZcXHVDODcxLVxcdUM4OEJcXHVDODhELVxcdUM4QTdcXHVDOEE5LVxcdUM4QzNcXHVDOEM1LVxcdUM4REZcXHVDOEUxLVxcdUM4RkJcXHVDOEZELVxcdUM5MTdcXHVDOTE5LVxcdUM5MzNcXHVDOTM1LVxcdUM5NEZcXHVDOTUxLVxcdUM5NkJcXHVDOTZELVxcdUM5ODdcXHVDOTg5LVxcdUM5QTNcXHVDOUE1LVxcdUM5QkZcXHVDOUMxLVxcdUM5REJcXHVDOURELVxcdUM5RjdcXHVDOUY5LVxcdUNBMTNcXHVDQTE1LVxcdUNBMkZcXHVDQTMxLVxcdUNBNEJcXHVDQTRELVxcdUNBNjdcXHVDQTY5LVxcdUNBODNcXHVDQTg1LVxcdUNBOUZcXHVDQUExLVxcdUNBQkJcXHVDQUJELVxcdUNBRDdcXHVDQUQ5LVxcdUNBRjNcXHVDQUY1LVxcdUNCMEZcXHVDQjExLVxcdUNCMkJcXHVDQjJELVxcdUNCNDdcXHVDQjQ5LVxcdUNCNjNcXHVDQjY1LVxcdUNCN0ZcXHVDQjgxLVxcdUNCOUJcXHVDQjlELVxcdUNCQjdcXHVDQkI5LVxcdUNCRDNcXHVDQkQ1LVxcdUNCRUZcXHVDQkYxLVxcdUNDMEJcXHVDQzBELVxcdUNDMjdcXHVDQzI5LVxcdUNDNDNcXHVDQzQ1LVxcdUNDNUZcXHVDQzYxLVxcdUNDN0JcXHVDQzdELVxcdUNDOTdcXHVDQzk5LVxcdUNDQjNcXHVDQ0I1LVxcdUNDQ0ZcXHVDQ0QxLVxcdUNDRUJcXHVDQ0VELVxcdUNEMDdcXHVDRDA5LVxcdUNEMjNcXHVDRDI1LVxcdUNEM0ZcXHVDRDQxLVxcdUNENUJcXHVDRDVELVxcdUNENzdcXHVDRDc5LVxcdUNEOTNcXHVDRDk1LVxcdUNEQUZcXHVDREIxLVxcdUNEQ0JcXHVDRENELVxcdUNERTdcXHVDREU5LVxcdUNFMDNcXHVDRTA1LVxcdUNFMUZcXHVDRTIxLVxcdUNFM0JcXHVDRTNELVxcdUNFNTdcXHVDRTU5LVxcdUNFNzNcXHVDRTc1LVxcdUNFOEZcXHVDRTkxLVxcdUNFQUJcXHVDRUFELVxcdUNFQzdcXHVDRUM5LVxcdUNFRTNcXHVDRUU1LVxcdUNFRkZcXHVDRjAxLVxcdUNGMUJcXHVDRjFELVxcdUNGMzdcXHVDRjM5LVxcdUNGNTNcXHVDRjU1LVxcdUNGNkZcXHVDRjcxLVxcdUNGOEJcXHVDRjhELVxcdUNGQTdcXHVDRkE5LVxcdUNGQzNcXHVDRkM1LVxcdUNGREZcXHVDRkUxLVxcdUNGRkJcXHVDRkZELVxcdUQwMTdcXHVEMDE5LVxcdUQwMzNcXHVEMDM1LVxcdUQwNEZcXHVEMDUxLVxcdUQwNkJcXHVEMDZELVxcdUQwODdcXHVEMDg5LVxcdUQwQTNcXHVEMEE1LVxcdUQwQkZcXHVEMEMxLVxcdUQwREJcXHVEMERELVxcdUQwRjdcXHVEMEY5LVxcdUQxMTNcXHVEMTE1LVxcdUQxMkZcXHVEMTMxLVxcdUQxNEJcXHVEMTRELVxcdUQxNjdcXHVEMTY5LVxcdUQxODNcXHVEMTg1LVxcdUQxOUZcXHVEMUExLVxcdUQxQkJcXHVEMUJELVxcdUQxRDdcXHVEMUQ5LVxcdUQxRjNcXHVEMUY1LVxcdUQyMEZcXHVEMjExLVxcdUQyMkJcXHVEMjJELVxcdUQyNDdcXHVEMjQ5LVxcdUQyNjNcXHVEMjY1LVxcdUQyN0ZcXHVEMjgxLVxcdUQyOUJcXHVEMjlELVxcdUQyQjdcXHVEMkI5LVxcdUQyRDNcXHVEMkQ1LVxcdUQyRUZcXHVEMkYxLVxcdUQzMEJcXHVEMzBELVxcdUQzMjdcXHVEMzI5LVxcdUQzNDNcXHVEMzQ1LVxcdUQzNUZcXHVEMzYxLVxcdUQzN0JcXHVEMzdELVxcdUQzOTdcXHVEMzk5LVxcdUQzQjNcXHVEM0I1LVxcdUQzQ0ZcXHVEM0QxLVxcdUQzRUJcXHVEM0VELVxcdUQ0MDdcXHVENDA5LVxcdUQ0MjNcXHVENDI1LVxcdUQ0M0ZcXHVENDQxLVxcdUQ0NUJcXHVENDVELVxcdUQ0NzdcXHVENDc5LVxcdUQ0OTNcXHVENDk1LVxcdUQ0QUZcXHVENEIxLVxcdUQ0Q0JcXHVENENELVxcdUQ0RTdcXHVENEU5LVxcdUQ1MDNcXHVENTA1LVxcdUQ1MUZcXHVENTIxLVxcdUQ1M0JcXHVENTNELVxcdUQ1NTdcXHVENTU5LVxcdUQ1NzNcXHVENTc1LVxcdUQ1OEZcXHVENTkxLVxcdUQ1QUJcXHVENUFELVxcdUQ1QzdcXHVENUM5LVxcdUQ1RTNcXHVENUU1LVxcdUQ1RkZcXHVENjAxLVxcdUQ2MUJcXHVENjFELVxcdUQ2MzdcXHVENjM5LVxcdUQ2NTNcXHVENjU1LVxcdUQ2NkZcXHVENjcxLVxcdUQ2OEJcXHVENjhELVxcdUQ2QTdcXHVENkE5LVxcdUQ2QzNcXHVENkM1LVxcdUQ2REZcXHVENkUxLVxcdUQ2RkJcXHVENkZELVxcdUQ3MTdcXHVENzE5LVxcdUQ3MzNcXHVENzM1LVxcdUQ3NEZcXHVENzUxLVxcdUQ3NkJcXHVENzZELVxcdUQ3ODdcXHVENzg5LVxcdUQ3QTNdJC91XG5jb25zdCByZUV4dFBpY3QgPSAvXlxccHtFeHRQaWN0fSQvdVxuXG5jb25zdCBnZXRDb2RlcG9pbnRUeXBlID0gKGNoYXI6IHN0cmluZywgY29kZTogbnVtYmVyKTogQ29kZXBvaW50VHlwZSA9PiB7XG4gIGxldCB0eXBlID0gQ29kZXBvaW50VHlwZS5BbnlcbiAgaWYgKGNoYXIuc2VhcmNoKHJlRXh0ZW5kKSAhPT0gLTEpIHtcbiAgICB0eXBlIHw9IENvZGVwb2ludFR5cGUuRXh0ZW5kXG4gIH1cbiAgaWYgKGNvZGUgPT09IDB4MjAwZCkge1xuICAgIHR5cGUgfD0gQ29kZXBvaW50VHlwZS5aV0pcbiAgfVxuICBpZiAoY29kZSA+PSAweDFmMWU2ICYmIGNvZGUgPD0gMHgxZjFmZikge1xuICAgIHR5cGUgfD0gQ29kZXBvaW50VHlwZS5SSVxuICB9XG4gIGlmIChjaGFyLnNlYXJjaChyZVByZXBlbmQpICE9PSAtMSkge1xuICAgIHR5cGUgfD0gQ29kZXBvaW50VHlwZS5QcmVwZW5kXG4gIH1cbiAgaWYgKGNoYXIuc2VhcmNoKHJlU3BhY2luZ01hcmspICE9PSAtMSkge1xuICAgIHR5cGUgfD0gQ29kZXBvaW50VHlwZS5TcGFjaW5nTWFya1xuICB9XG4gIGlmIChjaGFyLnNlYXJjaChyZUwpICE9PSAtMSkge1xuICAgIHR5cGUgfD0gQ29kZXBvaW50VHlwZS5MXG4gIH1cbiAgaWYgKGNoYXIuc2VhcmNoKHJlVikgIT09IC0xKSB7XG4gICAgdHlwZSB8PSBDb2RlcG9pbnRUeXBlLlZcbiAgfVxuICBpZiAoY2hhci5zZWFyY2gocmVUKSAhPT0gLTEpIHtcbiAgICB0eXBlIHw9IENvZGVwb2ludFR5cGUuVFxuICB9XG4gIGlmIChjaGFyLnNlYXJjaChyZUxWKSAhPT0gLTEpIHtcbiAgICB0eXBlIHw9IENvZGVwb2ludFR5cGUuTFZcbiAgfVxuICBpZiAoY2hhci5zZWFyY2gocmVMVlQpICE9PSAtMSkge1xuICAgIHR5cGUgfD0gQ29kZXBvaW50VHlwZS5MVlRcbiAgfVxuICBpZiAoY2hhci5zZWFyY2gocmVFeHRQaWN0KSAhPT0gLTEpIHtcbiAgICB0eXBlIHw9IENvZGVwb2ludFR5cGUuRXh0UGljdFxuICB9XG5cbiAgcmV0dXJuIHR5cGVcbn1cblxuZnVuY3Rpb24gaW50ZXJzZWN0cyh4OiBDb2RlcG9pbnRUeXBlLCB5OiBDb2RlcG9pbnRUeXBlKSB7XG4gIHJldHVybiAoeCAmIHkpICE9PSAwXG59XG5cbmNvbnN0IE5vbkJvdW5kYXJ5UGFpcnM6IFtDb2RlcG9pbnRUeXBlLCBDb2RlcG9pbnRUeXBlXVtdID0gW1xuICAvLyBHQjZcbiAgW1xuICAgIENvZGVwb2ludFR5cGUuTCxcbiAgICBDb2RlcG9pbnRUeXBlLkwgfCBDb2RlcG9pbnRUeXBlLlYgfCBDb2RlcG9pbnRUeXBlLkxWIHwgQ29kZXBvaW50VHlwZS5MVlQsXG4gIF0sXG4gIC8vIEdCN1xuICBbQ29kZXBvaW50VHlwZS5MViB8IENvZGVwb2ludFR5cGUuViwgQ29kZXBvaW50VHlwZS5WIHwgQ29kZXBvaW50VHlwZS5UXSxcbiAgLy8gR0I4XG4gIFtDb2RlcG9pbnRUeXBlLkxWVCB8IENvZGVwb2ludFR5cGUuVCwgQ29kZXBvaW50VHlwZS5UXSxcbiAgLy8gR0I5XG4gIFtDb2RlcG9pbnRUeXBlLkFueSwgQ29kZXBvaW50VHlwZS5FeHRlbmQgfCBDb2RlcG9pbnRUeXBlLlpXSl0sXG4gIC8vIEdCOWFcbiAgW0NvZGVwb2ludFR5cGUuQW55LCBDb2RlcG9pbnRUeXBlLlNwYWNpbmdNYXJrXSxcbiAgLy8gR0I5YlxuICBbQ29kZXBvaW50VHlwZS5QcmVwZW5kLCBDb2RlcG9pbnRUeXBlLkFueV0sXG4gIC8vIEdCMTFcbiAgW0NvZGVwb2ludFR5cGUuWldKLCBDb2RlcG9pbnRUeXBlLkV4dFBpY3RdLFxuICAvLyBHQjEyIGFuZCBHQjEzXG4gIFtDb2RlcG9pbnRUeXBlLlJJLCBDb2RlcG9pbnRUeXBlLlJJXSxcbl1cblxuZnVuY3Rpb24gaXNCb3VuZGFyeVBhaXIobGVmdDogQ29kZXBvaW50VHlwZSwgcmlnaHQ6IENvZGVwb2ludFR5cGUpIHtcbiAgcmV0dXJuIChcbiAgICBOb25Cb3VuZGFyeVBhaXJzLmZpbmRJbmRleChcbiAgICAgIHIgPT4gaW50ZXJzZWN0cyhsZWZ0LCByWzBdKSAmJiBpbnRlcnNlY3RzKHJpZ2h0LCByWzFdKVxuICAgICkgPT09IC0xXG4gIClcbn1cblxuY29uc3QgZW5kaW5nRW1vamlaV0ogPSAvXFxwe0V4dFBpY3R9W1xccHtHcl9FeHR9XFxwe0VNb2R9XSpcXHUyMDBEJC91XG5jb25zdCBlbmRzV2l0aEVtb2ppWldKID0gKHN0cjogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBzdHIuc2VhcmNoKGVuZGluZ0Vtb2ppWldKKSAhPT0gLTFcbn1cblxuY29uc3QgZW5kaW5nUklzID0gL1xccHtSSX0rJC9ndVxuY29uc3QgZW5kc1dpdGhPZGROdW1iZXJPZlJJcyA9IChzdHI6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBtYXRjaCA9IHN0ci5tYXRjaChlbmRpbmdSSXMpXG4gIGlmIChtYXRjaCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9IGVsc2Uge1xuICAgIC8vIEEgUkkgaXMgcmVwcmVzZW50ZWQgYnkgYSBzdXJyb2dhdGUgcGFpci5cbiAgICBjb25zdCBudW1SSXMgPSBtYXRjaFswXS5sZW5ndGggLyAyXG4gICAgcmV0dXJuIG51bVJJcyAlIDIgPT09IDFcbiAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgTG9jYXRpb24sIE5vZGUsIFBhdGgsIFJhbmdlLCBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vLi4vaW5kZXgnXG5pbXBvcnQgeyBUZXh0VW5pdCB9IGZyb20gJy4uLy4uL3R5cGVzL3R5cGVzJ1xuaW1wb3J0IHsgZ2V0RGVmYXVsdEluc2VydExvY2F0aW9uIH0gZnJvbSAnLi4vLi4vdXRpbHMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dERlbGV0ZU9wdGlvbnMge1xuICBhdD86IExvY2F0aW9uXG4gIGRpc3RhbmNlPzogbnVtYmVyXG4gIHVuaXQ/OiBUZXh0VW5pdFxuICByZXZlcnNlPzogYm9vbGVhblxuICBoYW5naW5nPzogYm9vbGVhblxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXh0SW5zZXJ0RnJhZ21lbnRPcHRpb25zIHtcbiAgYXQ/OiBMb2NhdGlvblxuICBoYW5naW5nPzogYm9vbGVhblxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXh0SW5zZXJ0VGV4dE9wdGlvbnMge1xuICBhdD86IExvY2F0aW9uXG4gIHZvaWRzPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRUcmFuc2Zvcm1zIHtcbiAgLyoqXG4gICAqIERlbGV0ZSBjb250ZW50IGluIHRoZSBlZGl0b3IuXG4gICAqL1xuICBkZWxldGU6IChlZGl0b3I6IEVkaXRvciwgb3B0aW9ucz86IFRleHREZWxldGVPcHRpb25zKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIEluc2VydCBhIGZyYWdtZW50IGluIHRoZSBlZGl0b3JcbiAgICogYXQgdGhlIHNwZWNpZmllZCBsb2NhdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgaW5zZXJ0RnJhZ21lbnQ6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBmcmFnbWVudDogTm9kZVtdLFxuICAgIG9wdGlvbnM/OiBUZXh0SW5zZXJ0RnJhZ21lbnRPcHRpb25zXG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBJbnNlcnQgYSBzdHJpbmcgb2YgdGV4dCBpbiB0aGUgZWRpdG9yXG4gICAqIGF0IHRoZSBzcGVjaWZpZWQgbG9jYXRpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgY3VycmVudCBzZWxlY3Rpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIGluc2VydFRleHQ6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICB0ZXh0OiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IFRleHRJbnNlcnRUZXh0T3B0aW9uc1xuICApID0+IHZvaWRcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFRleHRUcmFuc2Zvcm1zOiBUZXh0VHJhbnNmb3JtcyA9IHtcbiAgZGVsZXRlKGVkaXRvciwgb3B0aW9ucykge1xuICAgIGVkaXRvci5kZWxldGUob3B0aW9ucylcbiAgfSxcbiAgaW5zZXJ0RnJhZ21lbnQoZWRpdG9yLCBmcmFnbWVudCwgb3B0aW9ucykge1xuICAgIGVkaXRvci5pbnNlcnRGcmFnbWVudChmcmFnbWVudCwgb3B0aW9ucylcbiAgfSxcbiAgaW5zZXJ0VGV4dChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICB0ZXh0OiBzdHJpbmcsXG4gICAgb3B0aW9uczogVGV4dEluc2VydFRleHRPcHRpb25zID0ge31cbiAgKTogdm9pZCB7XG4gICAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgdm9pZHMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgICAgbGV0IHsgYXQgPSBnZXREZWZhdWx0SW5zZXJ0TG9jYXRpb24oZWRpdG9yKSB9ID0gb3B0aW9uc1xuXG4gICAgICBpZiAoUGF0aC5pc1BhdGgoYXQpKSB7XG4gICAgICAgIGF0ID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgYXQpXG4gICAgICB9XG5cbiAgICAgIGlmIChSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgICBpZiAoUmFuZ2UuaXNDb2xsYXBzZWQoYXQpKSB7XG4gICAgICAgICAgYXQgPSBhdC5hbmNob3JcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBlbmQgPSBSYW5nZS5lbmQoYXQpXG4gICAgICAgICAgaWYgKCF2b2lkcyAmJiBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQ6IGVuZCB9KSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gUmFuZ2Uuc3RhcnQoYXQpXG4gICAgICAgICAgY29uc3Qgc3RhcnRSZWYgPSBFZGl0b3IucG9pbnRSZWYoZWRpdG9yLCBzdGFydClcbiAgICAgICAgICBjb25zdCBlbmRSZWYgPSBFZGl0b3IucG9pbnRSZWYoZWRpdG9yLCBlbmQpXG4gICAgICAgICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7IGF0LCB2b2lkcyB9KVxuICAgICAgICAgIGNvbnN0IHN0YXJ0UG9pbnQgPSBzdGFydFJlZi51bnJlZigpXG4gICAgICAgICAgY29uc3QgZW5kUG9pbnQgPSBlbmRSZWYudW5yZWYoKVxuXG4gICAgICAgICAgYXQgPSBzdGFydFBvaW50IHx8IGVuZFBvaW50IVxuICAgICAgICAgIFRyYW5zZm9ybXMuc2V0U2VsZWN0aW9uKGVkaXRvciwgeyBhbmNob3I6IGF0LCBmb2N1czogYXQgfSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgICghdm9pZHMgJiYgRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0IH0pKSB8fFxuICAgICAgICBFZGl0b3IuZWxlbWVudFJlYWRPbmx5KGVkaXRvciwgeyBhdCB9KVxuICAgICAgKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCB7IHBhdGgsIG9mZnNldCB9ID0gYXRcbiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDApXG4gICAgICAgIGVkaXRvci5hcHBseSh7IHR5cGU6ICdpbnNlcnRfdGV4dCcsIHBhdGgsIG9mZnNldCwgdGV4dCB9KVxuICAgIH0pXG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgR2VuZXJhbFRyYW5zZm9ybXMgfSBmcm9tICcuL2dlbmVyYWwnXG5pbXBvcnQgeyBOb2RlVHJhbnNmb3JtcyB9IGZyb20gJy4vbm9kZSdcbmltcG9ydCB7IFNlbGVjdGlvblRyYW5zZm9ybXMgfSBmcm9tICcuL3NlbGVjdGlvbidcbmltcG9ydCB7IFRleHRUcmFuc2Zvcm1zIH0gZnJvbSAnLi90ZXh0J1xuXG5leHBvcnQgY29uc3QgVHJhbnNmb3JtczogR2VuZXJhbFRyYW5zZm9ybXMgJlxuICBOb2RlVHJhbnNmb3JtcyAmXG4gIFNlbGVjdGlvblRyYW5zZm9ybXMgJlxuICBUZXh0VHJhbnNmb3JtcyA9IHtcbiAgLi4uR2VuZXJhbFRyYW5zZm9ybXMsXG4gIC4uLk5vZGVUcmFuc2Zvcm1zLFxuICAuLi5TZWxlY3Rpb25UcmFuc2Zvcm1zLFxuICAuLi5UZXh0VHJhbnNmb3Jtcyxcbn1cbiIsICJpbXBvcnQgeyBQYXRoUmVmIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoLXJlZidcbmltcG9ydCB7IFBvaW50UmVmIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wb2ludC1yZWYnXG5pbXBvcnQgeyBSYW5nZVJlZiB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UtcmVmJ1xuaW1wb3J0IHsgRElSVFlfUEFUSF9LRVlTLCBESVJUWV9QQVRIUywgRkxVU0hJTkcgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IFdpdGhFZGl0b3JGaXJzdEFyZyB9IGZyb20gJy4uL3V0aWxzL3R5cGVzJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBhcHBseTogV2l0aEVkaXRvckZpcnN0QXJnPEVkaXRvclsnYXBwbHknXT4gPSAoZWRpdG9yLCBvcCkgPT4ge1xuICBmb3IgKGNvbnN0IHJlZiBvZiBFZGl0b3IucGF0aFJlZnMoZWRpdG9yKSkge1xuICAgIFBhdGhSZWYudHJhbnNmb3JtKHJlZiwgb3ApXG4gIH1cblxuICBmb3IgKGNvbnN0IHJlZiBvZiBFZGl0b3IucG9pbnRSZWZzKGVkaXRvcikpIHtcbiAgICBQb2ludFJlZi50cmFuc2Zvcm0ocmVmLCBvcClcbiAgfVxuXG4gIGZvciAoY29uc3QgcmVmIG9mIEVkaXRvci5yYW5nZVJlZnMoZWRpdG9yKSkge1xuICAgIFJhbmdlUmVmLnRyYW5zZm9ybShyZWYsIG9wKVxuICB9XG5cbiAgY29uc3Qgb2xkRGlydHlQYXRocyA9IERJUlRZX1BBVEhTLmdldChlZGl0b3IpIHx8IFtdXG4gIGNvbnN0IG9sZERpcnR5UGF0aEtleXMgPSBESVJUWV9QQVRIX0tFWVMuZ2V0KGVkaXRvcikgfHwgbmV3IFNldCgpXG4gIGxldCBkaXJ0eVBhdGhzOiBQYXRoW11cbiAgbGV0IGRpcnR5UGF0aEtleXM6IFNldDxzdHJpbmc+XG5cbiAgY29uc3QgYWRkID0gKHBhdGg6IFBhdGggfCBudWxsKSA9PiB7XG4gICAgaWYgKHBhdGgpIHtcbiAgICAgIGNvbnN0IGtleSA9IHBhdGguam9pbignLCcpXG5cbiAgICAgIGlmICghZGlydHlQYXRoS2V5cy5oYXMoa2V5KSkge1xuICAgICAgICBkaXJ0eVBhdGhLZXlzLmFkZChrZXkpXG4gICAgICAgIGRpcnR5UGF0aHMucHVzaChwYXRoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChQYXRoLm9wZXJhdGlvbkNhblRyYW5zZm9ybVBhdGgob3ApKSB7XG4gICAgZGlydHlQYXRocyA9IFtdXG4gICAgZGlydHlQYXRoS2V5cyA9IG5ldyBTZXQoKVxuICAgIGZvciAoY29uc3QgcGF0aCBvZiBvbGREaXJ0eVBhdGhzKSB7XG4gICAgICBjb25zdCBuZXdQYXRoID0gUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3ApXG4gICAgICBhZGQobmV3UGF0aClcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZGlydHlQYXRocyA9IG9sZERpcnR5UGF0aHNcbiAgICBkaXJ0eVBhdGhLZXlzID0gb2xkRGlydHlQYXRoS2V5c1xuICB9XG5cbiAgY29uc3QgbmV3RGlydHlQYXRocyA9IGVkaXRvci5nZXREaXJ0eVBhdGhzKG9wKVxuICBmb3IgKGNvbnN0IHBhdGggb2YgbmV3RGlydHlQYXRocykge1xuICAgIGFkZChwYXRoKVxuICB9XG5cbiAgRElSVFlfUEFUSFMuc2V0KGVkaXRvciwgZGlydHlQYXRocylcbiAgRElSVFlfUEFUSF9LRVlTLnNldChlZGl0b3IsIGRpcnR5UGF0aEtleXMpXG4gIFRyYW5zZm9ybXMudHJhbnNmb3JtKGVkaXRvciwgb3ApXG4gIGVkaXRvci5vcGVyYXRpb25zLnB1c2gob3ApXG4gIEVkaXRvci5ub3JtYWxpemUoZWRpdG9yLCB7XG4gICAgb3BlcmF0aW9uOiBvcCxcbiAgfSlcblxuICAvLyBDbGVhciBhbnkgZm9ybWF0cyBhcHBsaWVkIHRvIHRoZSBjdXJzb3IgaWYgdGhlIHNlbGVjdGlvbiBjaGFuZ2VzLlxuICBpZiAob3AudHlwZSA9PT0gJ3NldF9zZWxlY3Rpb24nKSB7XG4gICAgZWRpdG9yLm1hcmtzID0gbnVsbFxuICB9XG5cbiAgaWYgKCFGTFVTSElORy5nZXQoZWRpdG9yKSkge1xuICAgIEZMVVNISU5HLnNldChlZGl0b3IsIHRydWUpXG5cbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgIEZMVVNISU5HLnNldChlZGl0b3IsIGZhbHNlKVxuICAgICAgZWRpdG9yLm9uQ2hhbmdlKHsgb3BlcmF0aW9uOiBvcCB9KVxuICAgICAgZWRpdG9yLm9wZXJhdGlvbnMgPSBbXVxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBXaXRoRWRpdG9yRmlyc3RBcmcgfSBmcm9tICcuLi91dGlscy90eXBlcydcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG4vKipcbiAqIEdldCB0aGUgXCJkaXJ0eVwiIHBhdGhzIGdlbmVyYXRlZCBmcm9tIGFuIG9wZXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldERpcnR5UGF0aHM6IFdpdGhFZGl0b3JGaXJzdEFyZzxFZGl0b3JbJ2dldERpcnR5UGF0aHMnXT4gPSAoXG4gIGVkaXRvcixcbiAgb3BcbikgPT4ge1xuICBzd2l0Y2ggKG9wLnR5cGUpIHtcbiAgICBjYXNlICdpbnNlcnRfdGV4dCc6XG4gICAgY2FzZSAncmVtb3ZlX3RleHQnOlxuICAgIGNhc2UgJ3NldF9ub2RlJzoge1xuICAgICAgY29uc3QgeyBwYXRoIH0gPSBvcFxuICAgICAgcmV0dXJuIFBhdGgubGV2ZWxzKHBhdGgpXG4gICAgfVxuXG4gICAgY2FzZSAnaW5zZXJ0X25vZGUnOiB7XG4gICAgICBjb25zdCB7IG5vZGUsIHBhdGggfSA9IG9wXG4gICAgICBjb25zdCBsZXZlbHMgPSBQYXRoLmxldmVscyhwYXRoKVxuICAgICAgY29uc3QgZGVzY2VuZGFudHMgPSBUZXh0LmlzVGV4dChub2RlKVxuICAgICAgICA/IFtdXG4gICAgICAgIDogQXJyYXkuZnJvbShOb2RlLm5vZGVzKG5vZGUpLCAoWywgcF0pID0+IHBhdGguY29uY2F0KHApKVxuXG4gICAgICByZXR1cm4gWy4uLmxldmVscywgLi4uZGVzY2VuZGFudHNdXG4gICAgfVxuXG4gICAgY2FzZSAnbWVyZ2Vfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCB9ID0gb3BcbiAgICAgIGNvbnN0IGFuY2VzdG9ycyA9IFBhdGguYW5jZXN0b3JzKHBhdGgpXG4gICAgICBjb25zdCBwcmV2aW91c1BhdGggPSBQYXRoLnByZXZpb3VzKHBhdGgpXG4gICAgICByZXR1cm4gWy4uLmFuY2VzdG9ycywgcHJldmlvdXNQYXRoXVxuICAgIH1cblxuICAgIGNhc2UgJ21vdmVfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCwgbmV3UGF0aCB9ID0gb3BcblxuICAgICAgaWYgKFBhdGguZXF1YWxzKHBhdGgsIG5ld1BhdGgpKSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuXG4gICAgICBjb25zdCBvbGRBbmNlc3RvcnM6IFBhdGhbXSA9IFtdXG4gICAgICBjb25zdCBuZXdBbmNlc3RvcnM6IFBhdGhbXSA9IFtdXG5cbiAgICAgIGZvciAoY29uc3QgYW5jZXN0b3Igb2YgUGF0aC5hbmNlc3RvcnMocGF0aCkpIHtcbiAgICAgICAgY29uc3QgcCA9IFBhdGgudHJhbnNmb3JtKGFuY2VzdG9yLCBvcClcbiAgICAgICAgb2xkQW5jZXN0b3JzLnB1c2gocCEpXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgYW5jZXN0b3Igb2YgUGF0aC5hbmNlc3RvcnMobmV3UGF0aCkpIHtcbiAgICAgICAgY29uc3QgcCA9IFBhdGgudHJhbnNmb3JtKGFuY2VzdG9yLCBvcClcbiAgICAgICAgbmV3QW5jZXN0b3JzLnB1c2gocCEpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld1BhcmVudCA9IG5ld0FuY2VzdG9yc1tuZXdBbmNlc3RvcnMubGVuZ3RoIC0gMV1cbiAgICAgIGNvbnN0IG5ld0luZGV4ID0gbmV3UGF0aFtuZXdQYXRoLmxlbmd0aCAtIDFdXG4gICAgICBjb25zdCByZXN1bHRQYXRoID0gbmV3UGFyZW50LmNvbmNhdChuZXdJbmRleClcblxuICAgICAgcmV0dXJuIFsuLi5vbGRBbmNlc3RvcnMsIC4uLm5ld0FuY2VzdG9ycywgcmVzdWx0UGF0aF1cbiAgICB9XG5cbiAgICBjYXNlICdyZW1vdmVfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCB9ID0gb3BcbiAgICAgIGNvbnN0IGFuY2VzdG9ycyA9IFBhdGguYW5jZXN0b3JzKHBhdGgpXG4gICAgICByZXR1cm4gWy4uLmFuY2VzdG9yc11cbiAgICB9XG5cbiAgICBjYXNlICdzcGxpdF9ub2RlJzoge1xuICAgICAgY29uc3QgeyBwYXRoIH0gPSBvcFxuICAgICAgY29uc3QgbGV2ZWxzID0gUGF0aC5sZXZlbHMocGF0aClcbiAgICAgIGNvbnN0IG5leHRQYXRoID0gUGF0aC5uZXh0KHBhdGgpXG4gICAgICByZXR1cm4gWy4uLmxldmVscywgbmV4dFBhdGhdXG4gICAgfVxuXG4gICAgZGVmYXVsdDoge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcydcbmltcG9ydCB7IFdpdGhFZGl0b3JGaXJzdEFyZyB9IGZyb20gJy4uL3V0aWxzJ1xuXG5leHBvcnQgY29uc3QgZ2V0RnJhZ21lbnQ6IFdpdGhFZGl0b3JGaXJzdEFyZzxcbiAgRWRpdG9yWydnZXRGcmFnbWVudCddXG4+ID0gZWRpdG9yID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuXG4gIGlmIChzZWxlY3Rpb24pIHtcbiAgICByZXR1cm4gTm9kZS5mcmFnbWVudChlZGl0b3IsIHNlbGVjdGlvbilcbiAgfVxuICByZXR1cm4gW11cbn1cbiIsICJpbXBvcnQgeyBXaXRoRWRpdG9yRmlyc3RBcmcgfSBmcm9tICcuLi91dGlscy90eXBlcydcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IERlc2NlbmRhbnQsIE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZU5vZGU6IFdpdGhFZGl0b3JGaXJzdEFyZzxFZGl0b3JbJ25vcm1hbGl6ZU5vZGUnXT4gPSAoXG4gIGVkaXRvcixcbiAgZW50cnlcbikgPT4ge1xuICBjb25zdCBbbm9kZSwgcGF0aF0gPSBlbnRyeVxuXG4gIC8vIFRoZXJlIGFyZSBubyBjb3JlIG5vcm1hbGl6YXRpb25zIGZvciB0ZXh0IG5vZGVzLlxuICBpZiAoVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIEVuc3VyZSB0aGF0IGJsb2NrIGFuZCBpbmxpbmUgbm9kZXMgaGF2ZSBhdCBsZWFzdCBvbmUgdGV4dCBjaGlsZC5cbiAgaWYgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc3QgY2hpbGQgPSB7IHRleHQ6ICcnIH1cbiAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgY2hpbGQsIHtcbiAgICAgIGF0OiBwYXRoLmNvbmNhdCgwKSxcbiAgICAgIHZvaWRzOiB0cnVlLFxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBEZXRlcm1pbmUgd2hldGhlciB0aGUgbm9kZSBzaG91bGQgaGF2ZSBibG9jayBvciBpbmxpbmUgY2hpbGRyZW4uXG4gIGNvbnN0IHNob3VsZEhhdmVJbmxpbmVzID0gRWRpdG9yLmlzRWRpdG9yKG5vZGUpXG4gICAgPyBmYWxzZVxuICAgIDogRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiZcbiAgICAgIChlZGl0b3IuaXNJbmxpbmUobm9kZSkgfHxcbiAgICAgICAgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgVGV4dC5pc1RleHQobm9kZS5jaGlsZHJlblswXSkgfHxcbiAgICAgICAgZWRpdG9yLmlzSW5saW5lKG5vZGUuY2hpbGRyZW5bMF0pKVxuXG4gIC8vIFNpbmNlIHdlJ2xsIGJlIGFwcGx5aW5nIG9wZXJhdGlvbnMgd2hpbGUgaXRlcmF0aW5nLCBrZWVwIHRyYWNrIG9mIGFuXG4gIC8vIGluZGV4IHRoYXQgYWNjb3VudHMgZm9yIGFueSBhZGRlZC9yZW1vdmVkIG5vZGVzLlxuICBsZXQgbiA9IDBcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyssIG4rKykge1xuICAgIGNvbnN0IGN1cnJlbnROb2RlID0gTm9kZS5nZXQoZWRpdG9yLCBwYXRoKVxuICAgIGlmIChUZXh0LmlzVGV4dChjdXJyZW50Tm9kZSkpIGNvbnRpbnVlXG4gICAgY29uc3QgY2hpbGQgPSBjdXJyZW50Tm9kZS5jaGlsZHJlbltuXSBhcyBEZXNjZW5kYW50XG4gICAgY29uc3QgcHJldiA9IGN1cnJlbnROb2RlLmNoaWxkcmVuW24gLSAxXSBhcyBEZXNjZW5kYW50XG4gICAgY29uc3QgaXNMYXN0ID0gaSA9PT0gbm9kZS5jaGlsZHJlbi5sZW5ndGggLSAxXG4gICAgY29uc3QgaXNJbmxpbmVPclRleHQgPVxuICAgICAgVGV4dC5pc1RleHQoY2hpbGQpIHx8IChFbGVtZW50LmlzRWxlbWVudChjaGlsZCkgJiYgZWRpdG9yLmlzSW5saW5lKGNoaWxkKSlcblxuICAgIC8vIE9ubHkgYWxsb3cgYmxvY2sgbm9kZXMgaW4gdGhlIHRvcC1sZXZlbCBjaGlsZHJlbiBhbmQgcGFyZW50IGJsb2Nrc1xuICAgIC8vIHRoYXQgb25seSBjb250YWluIGJsb2NrIG5vZGVzLiBTaW1pbGFybHksIG9ubHkgYWxsb3cgaW5saW5lIG5vZGVzIGluXG4gICAgLy8gb3RoZXIgaW5saW5lIG5vZGVzLCBvciBwYXJlbnQgYmxvY2tzIHRoYXQgb25seSBjb250YWluIGlubGluZXMgYW5kXG4gICAgLy8gdGV4dC5cbiAgICBpZiAoaXNJbmxpbmVPclRleHQgIT09IHNob3VsZEhhdmVJbmxpbmVzKSB7XG4gICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwgeyBhdDogcGF0aC5jb25jYXQobiksIHZvaWRzOiB0cnVlIH0pXG4gICAgICBuLS1cbiAgICB9IGVsc2UgaWYgKEVsZW1lbnQuaXNFbGVtZW50KGNoaWxkKSkge1xuICAgICAgLy8gRW5zdXJlIHRoYXQgaW5saW5lIG5vZGVzIGFyZSBzdXJyb3VuZGVkIGJ5IHRleHQgbm9kZXMuXG4gICAgICBpZiAoZWRpdG9yLmlzSW5saW5lKGNoaWxkKSkge1xuICAgICAgICBpZiAocHJldiA9PSBudWxsIHx8ICFUZXh0LmlzVGV4dChwcmV2KSkge1xuICAgICAgICAgIGNvbnN0IG5ld0NoaWxkID0geyB0ZXh0OiAnJyB9XG4gICAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIG5ld0NoaWxkLCB7XG4gICAgICAgICAgICBhdDogcGF0aC5jb25jYXQobiksXG4gICAgICAgICAgICB2b2lkczogdHJ1ZSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIG4rK1xuICAgICAgICB9IGVsc2UgaWYgKGlzTGFzdCkge1xuICAgICAgICAgIGNvbnN0IG5ld0NoaWxkID0geyB0ZXh0OiAnJyB9XG4gICAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIG5ld0NoaWxkLCB7XG4gICAgICAgICAgICBhdDogcGF0aC5jb25jYXQobiArIDEpLFxuICAgICAgICAgICAgdm9pZHM6IHRydWUsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBuKytcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNZXJnZSBhZGphY2VudCB0ZXh0IG5vZGVzIHRoYXQgYXJlIGVtcHR5IG9yIG1hdGNoLlxuICAgICAgaWYgKHByZXYgIT0gbnVsbCAmJiBUZXh0LmlzVGV4dChwcmV2KSkge1xuICAgICAgICBpZiAoVGV4dC5lcXVhbHMoY2hpbGQsIHByZXYsIHsgbG9vc2U6IHRydWUgfSkpIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLm1lcmdlTm9kZXMoZWRpdG9yLCB7IGF0OiBwYXRoLmNvbmNhdChuKSwgdm9pZHM6IHRydWUgfSlcbiAgICAgICAgICBuLS1cbiAgICAgICAgfSBlbHNlIGlmIChwcmV2LnRleHQgPT09ICcnKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgIGF0OiBwYXRoLmNvbmNhdChuIC0gMSksXG4gICAgICAgICAgICB2b2lkczogdHJ1ZSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIG4tLVxuICAgICAgICB9IGVsc2UgaWYgKGNoaWxkLnRleHQgPT09ICcnKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgIGF0OiBwYXRoLmNvbmNhdChuKSxcbiAgICAgICAgICAgIHZvaWRzOiB0cnVlLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgbi0tXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBXaXRoRWRpdG9yRmlyc3RBcmcgfSBmcm9tICcuLi91dGlscy90eXBlcydcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3Qgc2hvdWxkTm9ybWFsaXplOiBXaXRoRWRpdG9yRmlyc3RBcmc8RWRpdG9yWydzaG91bGROb3JtYWxpemUnXT4gPSAoXG4gIGVkaXRvcixcbiAgeyBpdGVyYXRpb24sIGluaXRpYWxEaXJ0eVBhdGhzTGVuZ3RoIH1cbikgPT4ge1xuICBjb25zdCBtYXhJdGVyYXRpb25zID0gaW5pdGlhbERpcnR5UGF0aHNMZW5ndGggKiA0MiAvLyBIQUNLOiBiZXR0ZXIgd2F5P1xuXG4gIGlmIChpdGVyYXRpb24gPiBtYXhJdGVyYXRpb25zKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYENvdWxkIG5vdCBjb21wbGV0ZWx5IG5vcm1hbGl6ZSB0aGUgZWRpdG9yIGFmdGVyICR7bWF4SXRlcmF0aW9uc30gaXRlcmF0aW9ucyEgVGhpcyBpcyB1c3VhbGx5IGR1ZSB0byBpbmNvcnJlY3Qgbm9ybWFsaXphdGlvbiBsb2dpYyB0aGF0IGxlYXZlcyBhIG5vZGUgaW4gYW4gaW52YWxpZCBzdGF0ZS5gXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5cbmV4cG9ydCBjb25zdCBhYm92ZTogRWRpdG9ySW50ZXJmYWNlWydhYm92ZSddID0gKGVkaXRvciwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHtcbiAgICB2b2lkcyA9IGZhbHNlLFxuICAgIG1vZGUgPSAnbG93ZXN0JyxcbiAgICBhdCA9IGVkaXRvci5zZWxlY3Rpb24sXG4gICAgbWF0Y2gsXG4gIH0gPSBvcHRpb25zXG5cbiAgaWYgKCFhdCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgcGF0aCA9IEVkaXRvci5wYXRoKGVkaXRvciwgYXQpXG4gIGNvbnN0IHJldmVyc2UgPSBtb2RlID09PSAnbG93ZXN0J1xuXG4gIGZvciAoY29uc3QgW24sIHBdIG9mIEVkaXRvci5sZXZlbHMoZWRpdG9yLCB7XG4gICAgYXQ6IHBhdGgsXG4gICAgdm9pZHMsXG4gICAgbWF0Y2gsXG4gICAgcmV2ZXJzZSxcbiAgfSkpIHtcbiAgICBpZiAoVGV4dC5pc1RleHQobikpIGNvbnRpbnVlXG4gICAgaWYgKFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICBpZiAoXG4gICAgICAgIFBhdGguaXNBbmNlc3RvcihwLCBhdC5hbmNob3IucGF0aCkgJiZcbiAgICAgICAgUGF0aC5pc0FuY2VzdG9yKHAsIGF0LmZvY3VzLnBhdGgpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIFtuLCBwXVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIVBhdGguZXF1YWxzKHBhdGgsIHApKSB7XG4gICAgICAgIHJldHVybiBbbiwgcF1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgRkxVU0hJTkcgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgYWRkTWFyazogRWRpdG9ySW50ZXJmYWNlWydhZGRNYXJrJ10gPSAoZWRpdG9yLCBrZXksIHZhbHVlKSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcblxuICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgY29uc3QgbWF0Y2ggPSAobm9kZTogTm9kZSwgcGF0aDogUGF0aCkgPT4ge1xuICAgICAgaWYgKCFUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2UgLy8gbWFya3MgY2FuIG9ubHkgYmUgYXBwbGllZCB0byB0ZXh0XG4gICAgICB9XG4gICAgICBjb25zdCBbcGFyZW50Tm9kZSwgcGFyZW50UGF0aF0gPSBFZGl0b3IucGFyZW50KGVkaXRvciwgcGF0aClcbiAgICAgIHJldHVybiAhZWRpdG9yLmlzVm9pZChwYXJlbnROb2RlKSB8fCBlZGl0b3IubWFya2FibGVWb2lkKHBhcmVudE5vZGUpXG4gICAgfVxuICAgIGNvbnN0IGV4cGFuZGVkU2VsZWN0aW9uID0gUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pXG4gICAgbGV0IG1hcmtBY2NlcHRpbmdWb2lkU2VsZWN0ZWQgPSBmYWxzZVxuICAgIGlmICghZXhwYW5kZWRTZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0IFtzZWxlY3RlZE5vZGUsIHNlbGVjdGVkUGF0aF0gPSBFZGl0b3Iubm9kZShlZGl0b3IsIHNlbGVjdGlvbilcbiAgICAgIGlmIChzZWxlY3RlZE5vZGUgJiYgbWF0Y2goc2VsZWN0ZWROb2RlLCBzZWxlY3RlZFBhdGgpKSB7XG4gICAgICAgIGNvbnN0IFtwYXJlbnROb2RlXSA9IEVkaXRvci5wYXJlbnQoZWRpdG9yLCBzZWxlY3RlZFBhdGgpXG4gICAgICAgIG1hcmtBY2NlcHRpbmdWb2lkU2VsZWN0ZWQgPVxuICAgICAgICAgIHBhcmVudE5vZGUgJiYgZWRpdG9yLm1hcmthYmxlVm9pZChwYXJlbnROb2RlKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXhwYW5kZWRTZWxlY3Rpb24gfHwgbWFya0FjY2VwdGluZ1ZvaWRTZWxlY3RlZCkge1xuICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhcbiAgICAgICAgZWRpdG9yLFxuICAgICAgICB7IFtrZXldOiB2YWx1ZSB9LFxuICAgICAgICB7XG4gICAgICAgICAgbWF0Y2gsXG4gICAgICAgICAgc3BsaXQ6IHRydWUsXG4gICAgICAgICAgdm9pZHM6IHRydWUsXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWFya3MgPSB7XG4gICAgICAgIC4uLihFZGl0b3IubWFya3MoZWRpdG9yKSB8fCB7fSksXG4gICAgICAgIFtrZXldOiB2YWx1ZSxcbiAgICAgIH1cblxuICAgICAgZWRpdG9yLm1hcmtzID0gbWFya3NcbiAgICAgIGlmICghRkxVU0hJTkcuZ2V0KGVkaXRvcikpIHtcbiAgICAgICAgZWRpdG9yLm9uQ2hhbmdlKClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgYWZ0ZXI6IEVkaXRvckludGVyZmFjZVsnYWZ0ZXInXSA9IChlZGl0b3IsIGF0LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgYW5jaG9yID0gRWRpdG9yLnBvaW50KGVkaXRvciwgYXQsIHsgZWRnZTogJ2VuZCcgfSlcbiAgY29uc3QgZm9jdXMgPSBFZGl0b3IuZW5kKGVkaXRvciwgW10pXG4gIGNvbnN0IHJhbmdlID0geyBhbmNob3IsIGZvY3VzIH1cbiAgY29uc3QgeyBkaXN0YW5jZSA9IDEgfSA9IG9wdGlvbnNcbiAgbGV0IGQgPSAwXG4gIGxldCB0YXJnZXRcblxuICBmb3IgKGNvbnN0IHAgb2YgRWRpdG9yLnBvc2l0aW9ucyhlZGl0b3IsIHtcbiAgICAuLi5vcHRpb25zLFxuICAgIGF0OiByYW5nZSxcbiAgfSkpIHtcbiAgICBpZiAoZCA+IGRpc3RhbmNlKSB7XG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGlmIChkICE9PSAwKSB7XG4gICAgICB0YXJnZXQgPSBwXG4gICAgfVxuXG4gICAgZCsrXG4gIH1cblxuICByZXR1cm4gdGFyZ2V0XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGJlZm9yZTogRWRpdG9ySW50ZXJmYWNlWydiZWZvcmUnXSA9IChlZGl0b3IsIGF0LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgYW5jaG9yID0gRWRpdG9yLnN0YXJ0KGVkaXRvciwgW10pXG4gIGNvbnN0IGZvY3VzID0gRWRpdG9yLnBvaW50KGVkaXRvciwgYXQsIHsgZWRnZTogJ3N0YXJ0JyB9KVxuICBjb25zdCByYW5nZSA9IHsgYW5jaG9yLCBmb2N1cyB9XG4gIGNvbnN0IHsgZGlzdGFuY2UgPSAxIH0gPSBvcHRpb25zXG4gIGxldCBkID0gMFxuICBsZXQgdGFyZ2V0XG5cbiAgZm9yIChjb25zdCBwIG9mIEVkaXRvci5wb3NpdGlvbnMoZWRpdG9yLCB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBhdDogcmFuZ2UsXG4gICAgcmV2ZXJzZTogdHJ1ZSxcbiAgfSkpIHtcbiAgICBpZiAoZCA+IGRpc3RhbmNlKSB7XG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGlmIChkICE9PSAwKSB7XG4gICAgICB0YXJnZXQgPSBwXG4gICAgfVxuXG4gICAgZCsrXG4gIH1cblxuICByZXR1cm4gdGFyZ2V0XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgV2l0aEVkaXRvckZpcnN0QXJnIH0gZnJvbSAnLi4vdXRpbHMvdHlwZXMnXG5cbmV4cG9ydCBjb25zdCBkZWxldGVCYWNrd2FyZDogV2l0aEVkaXRvckZpcnN0QXJnPEVkaXRvclsnZGVsZXRlQmFja3dhcmQnXT4gPSAoXG4gIGVkaXRvcixcbiAgdW5pdFxuKSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcblxuICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKHNlbGVjdGlvbikpIHtcbiAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHsgdW5pdCwgcmV2ZXJzZTogdHJ1ZSB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgV2l0aEVkaXRvckZpcnN0QXJnIH0gZnJvbSAnLi4vdXRpbHMvdHlwZXMnXG5cbmV4cG9ydCBjb25zdCBkZWxldGVGb3J3YXJkOiBXaXRoRWRpdG9yRmlyc3RBcmc8RWRpdG9yWydkZWxldGVGb3J3YXJkJ10+ID0gKFxuICBlZGl0b3IsXG4gIHVuaXRcbikgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG5cbiAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pKSB7XG4gICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7IHVuaXQgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZUZyYWdtZW50OiBFZGl0b3JJbnRlcmZhY2VbJ2RlbGV0ZUZyYWdtZW50J10gPSAoXG4gIGVkaXRvcixcbiAgeyBkaXJlY3Rpb24gPSAnZm9yd2FyZCcgfSA9IHt9XG4pID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuXG4gIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7IHJldmVyc2U6IGRpcmVjdGlvbiA9PT0gJ2JhY2t3YXJkJyB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGVkZ2VzOiBFZGl0b3JJbnRlcmZhY2VbJ2VkZ2VzJ10gPSAoZWRpdG9yLCBhdCkgPT4ge1xuICByZXR1cm4gW0VkaXRvci5zdGFydChlZGl0b3IsIGF0KSwgRWRpdG9yLmVuZChlZGl0b3IsIGF0KV1cbn1cbiIsICJpbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGVsZW1lbnRSZWFkT25seTogRWRpdG9ySW50ZXJmYWNlWydlbGVtZW50UmVhZE9ubHknXSA9IChcbiAgZWRpdG9yLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICByZXR1cm4gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIC4uLm9wdGlvbnMsXG4gICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzRWxlbWVudFJlYWRPbmx5KGVkaXRvciwgbiksXG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGVuZDogRWRpdG9ySW50ZXJmYWNlWydlbmQnXSA9IChlZGl0b3IsIGF0KSA9PiB7XG4gIHJldHVybiBFZGl0b3IucG9pbnQoZWRpdG9yLCBhdCwgeyBlZGdlOiAnZW5kJyB9KVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBmaXJzdDogRWRpdG9ySW50ZXJmYWNlWydmaXJzdCddID0gKGVkaXRvciwgYXQpID0+IHtcbiAgY29uc3QgcGF0aCA9IEVkaXRvci5wYXRoKGVkaXRvciwgYXQsIHsgZWRnZTogJ3N0YXJ0JyB9KVxuICByZXR1cm4gRWRpdG9yLm5vZGUoZWRpdG9yLCBwYXRoKVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuXG5leHBvcnQgY29uc3QgZnJhZ21lbnQ6IEVkaXRvckludGVyZmFjZVsnZnJhZ21lbnQnXSA9IChlZGl0b3IsIGF0KSA9PiB7XG4gIGNvbnN0IHJhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgYXQpXG4gIHJldHVybiBOb2RlLmZyYWdtZW50KGVkaXRvciwgcmFuZ2UpXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5cbmV4cG9ydCBjb25zdCBnZXRWb2lkOiBFZGl0b3JJbnRlcmZhY2VbJ3ZvaWQnXSA9IChlZGl0b3IsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICByZXR1cm4gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIC4uLm9wdGlvbnMsXG4gICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzVm9pZChlZGl0b3IsIG4pLFxuICB9KVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuXG5leHBvcnQgY29uc3QgaGFzQmxvY2tzOiBFZGl0b3JJbnRlcmZhY2VbJ2hhc0Jsb2NrcyddID0gKGVkaXRvciwgZWxlbWVudCkgPT4ge1xuICByZXR1cm4gZWxlbWVudC5jaGlsZHJlbi5zb21lKFxuICAgIG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICApXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5cbmV4cG9ydCBjb25zdCBoYXNJbmxpbmVzOiBFZGl0b3JJbnRlcmZhY2VbJ2hhc0lubGluZXMnXSA9IChlZGl0b3IsIGVsZW1lbnQpID0+IHtcbiAgcmV0dXJuIGVsZW1lbnQuY2hpbGRyZW4uc29tZShcbiAgICBuID0+IFRleHQuaXNUZXh0KG4pIHx8IEVkaXRvci5pc0lubGluZShlZGl0b3IsIG4pXG4gIClcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5cbmV4cG9ydCBjb25zdCBoYXNQYXRoOiBFZGl0b3JJbnRlcmZhY2VbJ2hhc1BhdGgnXSA9IChlZGl0b3IsIHBhdGgpID0+IHtcbiAgcmV0dXJuIE5vZGUuaGFzKGVkaXRvciwgcGF0aClcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5cbmV4cG9ydCBjb25zdCBoYXNUZXh0czogRWRpdG9ySW50ZXJmYWNlWydoYXNUZXh0cyddID0gKGVkaXRvciwgZWxlbWVudCkgPT4ge1xuICByZXR1cm4gZWxlbWVudC5jaGlsZHJlbi5ldmVyeShuID0+IFRleHQuaXNUZXh0KG4pKVxufVxuIiwgImltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGluc2VydEJyZWFrOiBFZGl0b3JJbnRlcmZhY2VbJ2luc2VydEJyZWFrJ10gPSBlZGl0b3IgPT4ge1xuICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7IGFsd2F5czogdHJ1ZSB9KVxufVxuIiwgImltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGluc2VydE5vZGU6IEVkaXRvckludGVyZmFjZVsnaW5zZXJ0Tm9kZSddID0gKFxuICBlZGl0b3IsXG4gIG5vZGUsXG4gIG9wdGlvbnNcbikgPT4ge1xuICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgbm9kZSwgb3B0aW9ucylcbn1cbiIsICJpbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBpbnNlcnRTb2Z0QnJlYWs6IEVkaXRvckludGVyZmFjZVsnaW5zZXJ0U29mdEJyZWFrJ10gPSBlZGl0b3IgPT4ge1xuICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7IGFsd2F5czogdHJ1ZSB9KVxufVxuIiwgImltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGluc2VydFRleHQ6IEVkaXRvckludGVyZmFjZVsnaW5zZXJ0VGV4dCddID0gKFxuICBlZGl0b3IsXG4gIHRleHQsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uLCBtYXJrcyB9ID0gZWRpdG9yXG5cbiAgaWYgKHNlbGVjdGlvbikge1xuICAgIGlmIChtYXJrcykge1xuICAgICAgY29uc3Qgbm9kZSA9IHsgdGV4dCwgLi4ubWFya3MgfVxuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIG5vZGUsIHtcbiAgICAgICAgYXQ6IG9wdGlvbnMuYXQsXG4gICAgICAgIHZvaWRzOiBvcHRpb25zLnZvaWRzLFxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnRUZXh0KGVkaXRvciwgdGV4dCwgb3B0aW9ucylcbiAgICB9XG5cbiAgICBlZGl0b3IubWFya3MgPSBudWxsXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGlzQmxvY2s6IEVkaXRvckludGVyZmFjZVsnaXNCbG9jayddID0gKGVkaXRvciwgdmFsdWUpID0+IHtcbiAgcmV0dXJuICFlZGl0b3IuaXNJbmxpbmUodmFsdWUpXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGlzRWRnZTogRWRpdG9ySW50ZXJmYWNlWydpc0VkZ2UnXSA9IChlZGl0b3IsIHBvaW50LCBhdCkgPT4ge1xuICByZXR1cm4gRWRpdG9yLmlzU3RhcnQoZWRpdG9yLCBwb2ludCwgYXQpIHx8IEVkaXRvci5pc0VuZChlZGl0b3IsIHBvaW50LCBhdClcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5cbmV4cG9ydCBjb25zdCBpc0VtcHR5OiBFZGl0b3JJbnRlcmZhY2VbJ2lzRW1wdHknXSA9IChlZGl0b3IsIGVsZW1lbnQpID0+IHtcbiAgY29uc3QgeyBjaGlsZHJlbiB9ID0gZWxlbWVudFxuICBjb25zdCBbZmlyc3RdID0gY2hpbGRyZW5cbiAgcmV0dXJuIChcbiAgICBjaGlsZHJlbi5sZW5ndGggPT09IDAgfHxcbiAgICAoY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmXG4gICAgICBUZXh0LmlzVGV4dChmaXJzdCkgJiZcbiAgICAgIGZpcnN0LnRleHQgPT09ICcnICYmXG4gICAgICAhZWRpdG9yLmlzVm9pZChlbGVtZW50KSlcbiAgKVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcG9pbnQnXG5cbmV4cG9ydCBjb25zdCBpc0VuZDogRWRpdG9ySW50ZXJmYWNlWydpc0VuZCddID0gKGVkaXRvciwgcG9pbnQsIGF0KSA9PiB7XG4gIGNvbnN0IGVuZCA9IEVkaXRvci5lbmQoZWRpdG9yLCBhdClcbiAgcmV0dXJuIFBvaW50LmVxdWFscyhwb2ludCwgZW5kKVxufVxuIiwgImltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgTk9STUFMSVpJTkcgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5cbmV4cG9ydCBjb25zdCBpc05vcm1hbGl6aW5nOiBFZGl0b3JJbnRlcmZhY2VbJ2lzTm9ybWFsaXppbmcnXSA9IGVkaXRvciA9PiB7XG4gIGNvbnN0IGlzTm9ybWFsaXppbmcgPSBOT1JNQUxJWklORy5nZXQoZWRpdG9yKVxuICByZXR1cm4gaXNOb3JtYWxpemluZyA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGlzTm9ybWFsaXppbmdcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BvaW50J1xuXG5leHBvcnQgY29uc3QgaXNTdGFydDogRWRpdG9ySW50ZXJmYWNlWydpc1N0YXJ0J10gPSAoZWRpdG9yLCBwb2ludCwgYXQpID0+IHtcbiAgLy8gUEVSRjogSWYgdGhlIG9mZnNldCBpc24ndCBgMGAgd2Uga25vdyBpdCdzIG5vdCB0aGUgc3RhcnQuXG4gIGlmIChwb2ludC5vZmZzZXQgIT09IDApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGNvbnN0IHN0YXJ0ID0gRWRpdG9yLnN0YXJ0KGVkaXRvciwgYXQpXG4gIHJldHVybiBQb2ludC5lcXVhbHMocG9pbnQsIHN0YXJ0KVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBsYXN0OiBFZGl0b3JJbnRlcmZhY2VbJ2xhc3QnXSA9IChlZGl0b3IsIGF0KSA9PiB7XG4gIGNvbnN0IHBhdGggPSBFZGl0b3IucGF0aChlZGl0b3IsIGF0LCB7IGVkZ2U6ICdlbmQnIH0pXG4gIHJldHVybiBFZGl0b3Iubm9kZShlZGl0b3IsIHBhdGgpXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5cbmV4cG9ydCBjb25zdCBsZWFmOiBFZGl0b3JJbnRlcmZhY2VbJ2xlYWYnXSA9IChlZGl0b3IsIGF0LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgcGF0aCA9IEVkaXRvci5wYXRoKGVkaXRvciwgYXQsIG9wdGlvbnMpXG4gIGNvbnN0IG5vZGUgPSBOb2RlLmxlYWYoZWRpdG9yLCBwYXRoKVxuICByZXR1cm4gW25vZGUsIHBhdGhdXG59XG4iLCAiaW1wb3J0IHsgTm9kZSwgTm9kZUVudHJ5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JMZXZlbHNPcHRpb25zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuXG5leHBvcnQgZnVuY3Rpb24qIGxldmVsczxUIGV4dGVuZHMgTm9kZT4oXG4gIGVkaXRvcjogRWRpdG9yLFxuICBvcHRpb25zOiBFZGl0b3JMZXZlbHNPcHRpb25zPFQ+ID0ge31cbik6IEdlbmVyYXRvcjxOb2RlRW50cnk8VD4sIHZvaWQsIHVuZGVmaW5lZD4ge1xuICBjb25zdCB7IGF0ID0gZWRpdG9yLnNlbGVjdGlvbiwgcmV2ZXJzZSA9IGZhbHNlLCB2b2lkcyA9IGZhbHNlIH0gPSBvcHRpb25zXG4gIGxldCB7IG1hdGNoIH0gPSBvcHRpb25zXG5cbiAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICBtYXRjaCA9ICgpID0+IHRydWVcbiAgfVxuXG4gIGlmICghYXQpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IGxldmVsczogTm9kZUVudHJ5PFQ+W10gPSBbXVxuICBjb25zdCBwYXRoID0gRWRpdG9yLnBhdGgoZWRpdG9yLCBhdClcblxuICBmb3IgKGNvbnN0IFtuLCBwXSBvZiBOb2RlLmxldmVscyhlZGl0b3IsIHBhdGgpKSB7XG4gICAgaWYgKCFtYXRjaChuLCBwKSkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBsZXZlbHMucHVzaChbbiwgcF0gYXMgTm9kZUVudHJ5PFQ+KVxuXG4gICAgaWYgKCF2b2lkcyAmJiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNWb2lkKGVkaXRvciwgbikpIHtcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHJldmVyc2UpIHtcbiAgICBsZXZlbHMucmV2ZXJzZSgpXG4gIH1cblxuICB5aWVsZCogbGV2ZWxzXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IE5vZGVFbnRyeSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcydcblxuZXhwb3J0IGNvbnN0IG1hcmtzOiBFZGl0b3JJbnRlcmZhY2VbJ21hcmtzJ10gPSAoZWRpdG9yLCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyBtYXJrcywgc2VsZWN0aW9uIH0gPSBlZGl0b3JcblxuICBpZiAoIXNlbGVjdGlvbikge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgbGV0IHsgYW5jaG9yLCBmb2N1cyB9ID0gc2VsZWN0aW9uXG5cbiAgaWYgKG1hcmtzKSB7XG4gICAgcmV0dXJuIG1hcmtzXG4gIH1cblxuICBpZiAoUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgLyoqXG4gICAgICogQ09NUEFUOiBNYWtlIHN1cmUgaGFuZ2luZyByYW5nZXMgKGNhdXNlZCBieSBkb3VibGUgY2xpY2tpbmcgaW4gRmlyZWZveClcbiAgICAgKiBkbyBub3QgYWR2ZXJzZWx5IGFmZmVjdCB0aGUgcmV0dXJuZWQgbWFya3MuXG4gICAgICovXG4gICAgY29uc3QgaXNFbmQgPSBFZGl0b3IuaXNFbmQoZWRpdG9yLCBhbmNob3IsIGFuY2hvci5wYXRoKVxuICAgIGlmIChpc0VuZCkge1xuICAgICAgY29uc3QgYWZ0ZXIgPSBFZGl0b3IuYWZ0ZXIoZWRpdG9yLCBhbmNob3IgYXMgUG9pbnQpXG4gICAgICBpZiAoYWZ0ZXIpIHtcbiAgICAgICAgYW5jaG9yID0gYWZ0ZXJcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBbbWF0Y2hdID0gRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IFRleHQuaXNUZXh0LFxuICAgICAgYXQ6IHtcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBmb2N1cyxcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIGlmIChtYXRjaCkge1xuICAgICAgY29uc3QgW25vZGVdID0gbWF0Y2ggYXMgTm9kZUVudHJ5PFRleHQ+XG4gICAgICBjb25zdCB7IHRleHQsIC4uLnJlc3QgfSA9IG5vZGVcbiAgICAgIHJldHVybiByZXN0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7fVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHsgcGF0aCB9ID0gYW5jaG9yXG5cbiAgbGV0IFtub2RlXSA9IEVkaXRvci5sZWFmKGVkaXRvciwgcGF0aClcblxuICBpZiAoYW5jaG9yLm9mZnNldCA9PT0gMCkge1xuICAgIGNvbnN0IHByZXYgPSBFZGl0b3IucHJldmlvdXMoZWRpdG9yLCB7IGF0OiBwYXRoLCBtYXRjaDogVGV4dC5pc1RleHQgfSlcbiAgICBjb25zdCBtYXJrZWRWb2lkID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG4gPT5cbiAgICAgICAgRWxlbWVudC5pc0VsZW1lbnQobikgJiZcbiAgICAgICAgRWRpdG9yLmlzVm9pZChlZGl0b3IsIG4pICYmXG4gICAgICAgIGVkaXRvci5tYXJrYWJsZVZvaWQobiksXG4gICAgfSlcbiAgICBpZiAoIW1hcmtlZFZvaWQpIHtcbiAgICAgIGNvbnN0IGJsb2NrID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pLFxuICAgICAgfSlcblxuICAgICAgaWYgKHByZXYgJiYgYmxvY2spIHtcbiAgICAgICAgY29uc3QgW3ByZXZOb2RlLCBwcmV2UGF0aF0gPSBwcmV2XG4gICAgICAgIGNvbnN0IFssIGJsb2NrUGF0aF0gPSBibG9ja1xuXG4gICAgICAgIGlmIChQYXRoLmlzQW5jZXN0b3IoYmxvY2tQYXRoLCBwcmV2UGF0aCkpIHtcbiAgICAgICAgICBub2RlID0gcHJldk5vZGUgYXMgVGV4dFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgeyB0ZXh0LCAuLi5yZXN0IH0gPSBub2RlXG4gIHJldHVybiByZXN0XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFNwYW4gfSBmcm9tICcuLi9pbnRlcmZhY2VzL2xvY2F0aW9uJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcblxuZXhwb3J0IGNvbnN0IG5leHQ6IEVkaXRvckludGVyZmFjZVsnbmV4dCddID0gKGVkaXRvciwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgbW9kZSA9ICdsb3dlc3QnLCB2b2lkcyA9IGZhbHNlIH0gPSBvcHRpb25zXG4gIGxldCB7IG1hdGNoLCBhdCA9IGVkaXRvci5zZWxlY3Rpb24gfSA9IG9wdGlvbnNcblxuICBpZiAoIWF0KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBwb2ludEFmdGVyTG9jYXRpb24gPSBFZGl0b3IuYWZ0ZXIoZWRpdG9yLCBhdCwgeyB2b2lkcyB9KVxuXG4gIGlmICghcG9pbnRBZnRlckxvY2F0aW9uKSByZXR1cm5cblxuICBjb25zdCBbLCB0b10gPSBFZGl0b3IubGFzdChlZGl0b3IsIFtdKVxuXG4gIGNvbnN0IHNwYW46IFNwYW4gPSBbcG9pbnRBZnRlckxvY2F0aW9uLnBhdGgsIHRvXVxuXG4gIGlmIChQYXRoLmlzUGF0aChhdCkgJiYgYXQubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZ2V0IHRoZSBuZXh0IG5vZGUgZnJvbSB0aGUgcm9vdCBub2RlIWApXG4gIH1cblxuICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgIGlmIChQYXRoLmlzUGF0aChhdCkpIHtcbiAgICAgIGNvbnN0IFtwYXJlbnRdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIGF0KVxuICAgICAgbWF0Y2ggPSBuID0+IHBhcmVudC5jaGlsZHJlbi5pbmNsdWRlcyhuKVxuICAgIH0gZWxzZSB7XG4gICAgICBtYXRjaCA9ICgpID0+IHRydWVcbiAgICB9XG4gIH1cblxuICBjb25zdCBbbmV4dF0gPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7IGF0OiBzcGFuLCBtYXRjaCwgbW9kZSwgdm9pZHMgfSlcbiAgcmV0dXJuIG5leHRcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcblxuZXhwb3J0IGNvbnN0IG5vZGU6IEVkaXRvckludGVyZmFjZVsnbm9kZSddID0gKGVkaXRvciwgYXQsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCBwYXRoID0gRWRpdG9yLnBhdGgoZWRpdG9yLCBhdCwgb3B0aW9ucylcbiAgY29uc3Qgbm9kZSA9IE5vZGUuZ2V0KGVkaXRvciwgcGF0aClcbiAgcmV0dXJuIFtub2RlLCBwYXRoXVxufVxuIiwgImltcG9ydCB7IE5vZGUsIE5vZGVFbnRyeSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciwgRWRpdG9yTm9kZXNPcHRpb25zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBTcGFuIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9sb2NhdGlvbidcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcblxuZXhwb3J0IGZ1bmN0aW9uKiBub2RlczxUIGV4dGVuZHMgTm9kZT4oXG4gIGVkaXRvcjogRWRpdG9yLFxuICBvcHRpb25zOiBFZGl0b3JOb2Rlc09wdGlvbnM8VD4gPSB7fVxuKTogR2VuZXJhdG9yPE5vZGVFbnRyeTxUPiwgdm9pZCwgdW5kZWZpbmVkPiB7XG4gIGNvbnN0IHtcbiAgICBhdCA9IGVkaXRvci5zZWxlY3Rpb24sXG4gICAgbW9kZSA9ICdhbGwnLFxuICAgIHVuaXZlcnNhbCA9IGZhbHNlLFxuICAgIHJldmVyc2UgPSBmYWxzZSxcbiAgICB2b2lkcyA9IGZhbHNlLFxuICAgIGlnbm9yZU5vblNlbGVjdGFibGUgPSBmYWxzZSxcbiAgfSA9IG9wdGlvbnNcbiAgbGV0IHsgbWF0Y2ggfSA9IG9wdGlvbnNcblxuICBpZiAoIW1hdGNoKSB7XG4gICAgbWF0Y2ggPSAoKSA9PiB0cnVlXG4gIH1cblxuICBpZiAoIWF0KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBsZXQgZnJvbVxuICBsZXQgdG9cblxuICBpZiAoU3Bhbi5pc1NwYW4oYXQpKSB7XG4gICAgZnJvbSA9IGF0WzBdXG4gICAgdG8gPSBhdFsxXVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IGZpcnN0ID0gRWRpdG9yLnBhdGgoZWRpdG9yLCBhdCwgeyBlZGdlOiAnc3RhcnQnIH0pXG4gICAgY29uc3QgbGFzdCA9IEVkaXRvci5wYXRoKGVkaXRvciwgYXQsIHsgZWRnZTogJ2VuZCcgfSlcbiAgICBmcm9tID0gcmV2ZXJzZSA/IGxhc3QgOiBmaXJzdFxuICAgIHRvID0gcmV2ZXJzZSA/IGZpcnN0IDogbGFzdFxuICB9XG5cbiAgY29uc3Qgbm9kZUVudHJpZXMgPSBOb2RlLm5vZGVzKGVkaXRvciwge1xuICAgIHJldmVyc2UsXG4gICAgZnJvbSxcbiAgICB0byxcbiAgICBwYXNzOiAoW25vZGVdKSA9PiB7XG4gICAgICBpZiAoIUVsZW1lbnQuaXNFbGVtZW50KG5vZGUpKSByZXR1cm4gZmFsc2VcbiAgICAgIGlmIChcbiAgICAgICAgIXZvaWRzICYmXG4gICAgICAgIChFZGl0b3IuaXNWb2lkKGVkaXRvciwgbm9kZSkgfHwgRWRpdG9yLmlzRWxlbWVudFJlYWRPbmx5KGVkaXRvciwgbm9kZSkpXG4gICAgICApXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICBpZiAoaWdub3JlTm9uU2VsZWN0YWJsZSAmJiAhRWRpdG9yLmlzU2VsZWN0YWJsZShlZGl0b3IsIG5vZGUpKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSxcbiAgfSlcblxuICBjb25zdCBtYXRjaGVzOiBOb2RlRW50cnk8VD5bXSA9IFtdXG4gIGxldCBoaXQ6IE5vZGVFbnRyeTxUPiB8IHVuZGVmaW5lZFxuXG4gIGZvciAoY29uc3QgW25vZGUsIHBhdGhdIG9mIG5vZGVFbnRyaWVzKSB7XG4gICAgaWYgKFxuICAgICAgaWdub3JlTm9uU2VsZWN0YWJsZSAmJlxuICAgICAgRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiZcbiAgICAgICFFZGl0b3IuaXNTZWxlY3RhYmxlKGVkaXRvciwgbm9kZSlcbiAgICApIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgY29uc3QgaXNMb3dlciA9IGhpdCAmJiBQYXRoLmNvbXBhcmUocGF0aCwgaGl0WzFdKSA9PT0gMFxuXG4gICAgLy8gSW4gaGlnaGVzdCBtb2RlIGFueSBub2RlIGxvd2VyIHRoYW4gdGhlIGxhc3QgaGl0IGlzIG5vdCBhIG1hdGNoLlxuICAgIGlmIChtb2RlID09PSAnaGlnaGVzdCcgJiYgaXNMb3dlcikge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBpZiAoIW1hdGNoKG5vZGUsIHBhdGgpKSB7XG4gICAgICAvLyBJZiB3ZSd2ZSBhcnJpdmVkIGF0IGEgbGVhZiB0ZXh0IG5vZGUgdGhhdCBpcyBub3QgbG93ZXIgdGhhbiB0aGUgbGFzdFxuICAgICAgLy8gaGl0LCB0aGVuIHdlJ3ZlIGZvdW5kIGEgYnJhbmNoIHRoYXQgZG9lc24ndCBpbmNsdWRlIGEgbWF0Y2gsIHdoaWNoXG4gICAgICAvLyBtZWFucyB0aGUgbWF0Y2ggaXMgbm90IHVuaXZlcnNhbC5cbiAgICAgIGlmICh1bml2ZXJzYWwgJiYgIWlzTG93ZXIgJiYgVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHRoZXJlJ3MgYSBtYXRjaCBhbmQgaXQncyBsb3dlciB0aGFuIHRoZSBsYXN0LCB1cGRhdGUgdGhlIGhpdC5cbiAgICBpZiAobW9kZSA9PT0gJ2xvd2VzdCcgJiYgaXNMb3dlcikge1xuICAgICAgaGl0ID0gW25vZGUsIHBhdGhdIGFzIE5vZGVFbnRyeTxUPlxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICAvLyBJbiBsb3dlc3QgbW9kZSB3ZSBlbWl0IHRoZSBsYXN0IGhpdCwgb25jZSBpdCdzIGd1YXJhbnRlZWQgbG93ZXN0LlxuICAgIGNvbnN0IGVtaXQ6IE5vZGVFbnRyeTxUPiB8IHVuZGVmaW5lZCA9XG4gICAgICBtb2RlID09PSAnbG93ZXN0JyA/IGhpdCA6IChbbm9kZSwgcGF0aF0gYXMgTm9kZUVudHJ5PFQ+KVxuXG4gICAgaWYgKGVtaXQpIHtcbiAgICAgIGlmICh1bml2ZXJzYWwpIHtcbiAgICAgICAgbWF0Y2hlcy5wdXNoKGVtaXQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB5aWVsZCBlbWl0XG4gICAgICB9XG4gICAgfVxuXG4gICAgaGl0ID0gW25vZGUsIHBhdGhdIGFzIE5vZGVFbnRyeTxUPlxuICB9XG5cbiAgLy8gU2luY2UgbG93ZXN0IGlzIGFsd2F5cyBlbWl0dGluZyBvbmUgYmVoaW5kLCBjYXRjaCB1cCBhdCB0aGUgZW5kLlxuICBpZiAobW9kZSA9PT0gJ2xvd2VzdCcgJiYgaGl0KSB7XG4gICAgaWYgKHVuaXZlcnNhbCkge1xuICAgICAgbWF0Y2hlcy5wdXNoKGhpdClcbiAgICB9IGVsc2Uge1xuICAgICAgeWllbGQgaGl0XG4gICAgfVxuICB9XG5cbiAgLy8gVW5pdmVyc2FsIGRlZmVycyB0byBlbnN1cmUgdGhhdCB0aGUgbWF0Y2ggb2NjdXJzIGluIGV2ZXJ5IGJyYW5jaCwgc28gd2VcbiAgLy8geWllbGQgYWxsIG9mIHRoZSBtYXRjaGVzIGFmdGVyIGl0ZXJhdGluZy5cbiAgaWYgKHVuaXZlcnNhbCkge1xuICAgIHlpZWxkKiBtYXRjaGVzXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgRElSVFlfUEFUSF9LRVlTLCBESVJUWV9QQVRIUyB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcblxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZTogRWRpdG9ySW50ZXJmYWNlWydub3JtYWxpemUnXSA9IChcbiAgZWRpdG9yLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBjb25zdCB7IGZvcmNlID0gZmFsc2UsIG9wZXJhdGlvbiB9ID0gb3B0aW9uc1xuICBjb25zdCBnZXREaXJ0eVBhdGhzID0gKGVkaXRvcjogRWRpdG9yKSA9PiB7XG4gICAgcmV0dXJuIERJUlRZX1BBVEhTLmdldChlZGl0b3IpIHx8IFtdXG4gIH1cblxuICBjb25zdCBnZXREaXJ0eVBhdGhLZXlzID0gKGVkaXRvcjogRWRpdG9yKSA9PiB7XG4gICAgcmV0dXJuIERJUlRZX1BBVEhfS0VZUy5nZXQoZWRpdG9yKSB8fCBuZXcgU2V0KClcbiAgfVxuXG4gIGNvbnN0IHBvcERpcnR5UGF0aCA9IChlZGl0b3I6IEVkaXRvcik6IFBhdGggPT4ge1xuICAgIGNvbnN0IHBhdGggPSBnZXREaXJ0eVBhdGhzKGVkaXRvcikucG9wKCkhXG4gICAgY29uc3Qga2V5ID0gcGF0aC5qb2luKCcsJylcbiAgICBnZXREaXJ0eVBhdGhLZXlzKGVkaXRvcikuZGVsZXRlKGtleSlcbiAgICByZXR1cm4gcGF0aFxuICB9XG5cbiAgaWYgKCFFZGl0b3IuaXNOb3JtYWxpemluZyhlZGl0b3IpKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAoZm9yY2UpIHtcbiAgICBjb25zdCBhbGxQYXRocyA9IEFycmF5LmZyb20oTm9kZS5ub2RlcyhlZGl0b3IpLCAoWywgcF0pID0+IHApXG4gICAgY29uc3QgYWxsUGF0aEtleXMgPSBuZXcgU2V0KGFsbFBhdGhzLm1hcChwID0+IHAuam9pbignLCcpKSlcbiAgICBESVJUWV9QQVRIUy5zZXQoZWRpdG9yLCBhbGxQYXRocylcbiAgICBESVJUWV9QQVRIX0tFWVMuc2V0KGVkaXRvciwgYWxsUGF0aEtleXMpXG4gIH1cblxuICBpZiAoZ2V0RGlydHlQYXRocyhlZGl0b3IpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICAvKlxuICAgICAgRml4IGRpcnR5IGVsZW1lbnRzIHdpdGggbm8gY2hpbGRyZW4uXG4gICAgICBlZGl0b3Iubm9ybWFsaXplTm9kZSgpIGRvZXMgZml4IHRoaXMsIGJ1dCBzb21lIG5vcm1hbGl6YXRpb24gZml4ZXMgYWxzbyByZXF1aXJlIGl0IHRvIHdvcmsuXG4gICAgICBSdW5uaW5nIGFuIGluaXRpYWwgcGFzcyBhdm9pZHMgdGhlIGNhdGNoLTIyIHJhY2UgY29uZGl0aW9uLlxuICAgICovXG4gICAgZm9yIChjb25zdCBkaXJ0eVBhdGggb2YgZ2V0RGlydHlQYXRocyhlZGl0b3IpKSB7XG4gICAgICBpZiAoTm9kZS5oYXMoZWRpdG9yLCBkaXJ0eVBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gRWRpdG9yLm5vZGUoZWRpdG9yLCBkaXJ0eVBhdGgpXG4gICAgICAgIGNvbnN0IFtub2RlLCBfXSA9IGVudHJ5XG5cbiAgICAgICAgLypcbiAgICAgICAgICBUaGUgZGVmYXVsdCBub3JtYWxpemVyIGluc2VydHMgYW4gZW1wdHkgdGV4dCBub2RlIGluIHRoaXMgc2NlbmFyaW8sIGJ1dCBpdCBjYW4gYmUgY3VzdG9taXNlZC5cbiAgICAgICAgICBTbyB0aGVyZSBpcyBzb21lIHJpc2sgaGVyZS5cblxuICAgICAgICAgIEFzIGxvbmcgYXMgdGhlIG5vcm1hbGl6ZXIgb25seSBpbnNlcnRzIGNoaWxkIG5vZGVzIGZvciB0aGlzIGNhc2UgaXQgaXMgc2FmZSB0byBkbyBpbiBhbnkgb3JkZXI7XG4gICAgICAgICAgYnkgZGVmaW5pdGlvbiBhZGRpbmcgY2hpbGRyZW4gdG8gYW4gZW1wdHkgbm9kZSBjYW4ndCBjYXVzZSBvdGhlciBwYXRocyB0byBjaGFuZ2UuXG4gICAgICAgICovXG4gICAgICAgIGlmIChFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGVkaXRvci5ub3JtYWxpemVOb2RlKGVudHJ5LCB7IG9wZXJhdGlvbiB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGRpcnR5UGF0aHMgPSBnZXREaXJ0eVBhdGhzKGVkaXRvcilcbiAgICBjb25zdCBpbml0aWFsRGlydHlQYXRoc0xlbmd0aCA9IGRpcnR5UGF0aHMubGVuZ3RoXG4gICAgbGV0IGl0ZXJhdGlvbiA9IDBcblxuICAgIHdoaWxlIChkaXJ0eVBhdGhzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgaWYgKFxuICAgICAgICAhZWRpdG9yLnNob3VsZE5vcm1hbGl6ZSh7XG4gICAgICAgICAgZGlydHlQYXRocyxcbiAgICAgICAgICBpdGVyYXRpb24sXG4gICAgICAgICAgaW5pdGlhbERpcnR5UGF0aHNMZW5ndGgsXG4gICAgICAgICAgb3BlcmF0aW9uLFxuICAgICAgICB9KVxuICAgICAgKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBkaXJ0eVBhdGggPSBwb3BEaXJ0eVBhdGgoZWRpdG9yKVxuXG4gICAgICAvLyBJZiB0aGUgbm9kZSBkb2Vzbid0IGV4aXN0IGluIHRoZSB0cmVlLCBpdCBkb2VzIG5vdCBuZWVkIHRvIGJlIG5vcm1hbGl6ZWQuXG4gICAgICBpZiAoTm9kZS5oYXMoZWRpdG9yLCBkaXJ0eVBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gRWRpdG9yLm5vZGUoZWRpdG9yLCBkaXJ0eVBhdGgpXG4gICAgICAgIGVkaXRvci5ub3JtYWxpemVOb2RlKGVudHJ5LCB7IG9wZXJhdGlvbiB9KVxuICAgICAgfVxuICAgICAgaXRlcmF0aW9uKytcbiAgICAgIGRpcnR5UGF0aHMgPSBnZXREaXJ0eVBhdGhzKGVkaXRvcilcbiAgICB9XG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBBbmNlc3RvciwgTm9kZUVudHJ5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuXG5leHBvcnQgY29uc3QgcGFyZW50OiBFZGl0b3JJbnRlcmZhY2VbJ3BhcmVudCddID0gKGVkaXRvciwgYXQsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCBwYXRoID0gRWRpdG9yLnBhdGgoZWRpdG9yLCBhdCwgb3B0aW9ucylcbiAgY29uc3QgcGFyZW50UGF0aCA9IFBhdGgucGFyZW50KHBhdGgpXG4gIGNvbnN0IGVudHJ5ID0gRWRpdG9yLm5vZGUoZWRpdG9yLCBwYXJlbnRQYXRoKVxuICByZXR1cm4gZW50cnkgYXMgTm9kZUVudHJ5PEFuY2VzdG9yPlxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQYXRoUmVmIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoLXJlZidcblxuZXhwb3J0IGNvbnN0IHBhdGhSZWY6IEVkaXRvckludGVyZmFjZVsncGF0aFJlZiddID0gKFxuICBlZGl0b3IsXG4gIHBhdGgsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIGNvbnN0IHsgYWZmaW5pdHkgPSAnZm9yd2FyZCcgfSA9IG9wdGlvbnNcbiAgY29uc3QgcmVmOiBQYXRoUmVmID0ge1xuICAgIGN1cnJlbnQ6IHBhdGgsXG4gICAgYWZmaW5pdHksXG4gICAgdW5yZWYoKSB7XG4gICAgICBjb25zdCB7IGN1cnJlbnQgfSA9IHJlZlxuICAgICAgY29uc3QgcGF0aFJlZnMgPSBFZGl0b3IucGF0aFJlZnMoZWRpdG9yKVxuICAgICAgcGF0aFJlZnMuZGVsZXRlKHJlZilcbiAgICAgIHJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgcmV0dXJuIGN1cnJlbnRcbiAgICB9LFxuICB9XG5cbiAgY29uc3QgcmVmcyA9IEVkaXRvci5wYXRoUmVmcyhlZGl0b3IpXG4gIHJlZnMuYWRkKHJlZilcbiAgcmV0dXJuIHJlZlxufVxuIiwgImltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUEFUSF9SRUZTIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuXG5leHBvcnQgY29uc3QgcGF0aFJlZnM6IEVkaXRvckludGVyZmFjZVsncGF0aFJlZnMnXSA9IGVkaXRvciA9PiB7XG4gIGxldCByZWZzID0gUEFUSF9SRUZTLmdldChlZGl0b3IpXG5cbiAgaWYgKCFyZWZzKSB7XG4gICAgcmVmcyA9IG5ldyBTZXQoKVxuICAgIFBBVEhfUkVGUy5zZXQoZWRpdG9yLCByZWZzKVxuICB9XG5cbiAgcmV0dXJuIHJlZnNcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UsIE5vZGUsIFBhdGgsIFBvaW50LCBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMnXG5cbmV4cG9ydCBjb25zdCBwYXRoOiBFZGl0b3JJbnRlcmZhY2VbJ3BhdGgnXSA9IChlZGl0b3IsIGF0LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyBkZXB0aCwgZWRnZSB9ID0gb3B0aW9uc1xuXG4gIGlmIChQYXRoLmlzUGF0aChhdCkpIHtcbiAgICBpZiAoZWRnZSA9PT0gJ3N0YXJ0Jykge1xuICAgICAgY29uc3QgWywgZmlyc3RQYXRoXSA9IE5vZGUuZmlyc3QoZWRpdG9yLCBhdClcbiAgICAgIGF0ID0gZmlyc3RQYXRoXG4gICAgfSBlbHNlIGlmIChlZGdlID09PSAnZW5kJykge1xuICAgICAgY29uc3QgWywgbGFzdFBhdGhdID0gTm9kZS5sYXN0KGVkaXRvciwgYXQpXG4gICAgICBhdCA9IGxhc3RQYXRoXG4gICAgfVxuICB9XG5cbiAgaWYgKFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgaWYgKGVkZ2UgPT09ICdzdGFydCcpIHtcbiAgICAgIGF0ID0gUmFuZ2Uuc3RhcnQoYXQpXG4gICAgfSBlbHNlIGlmIChlZGdlID09PSAnZW5kJykge1xuICAgICAgYXQgPSBSYW5nZS5lbmQoYXQpXG4gICAgfSBlbHNlIHtcbiAgICAgIGF0ID0gUGF0aC5jb21tb24oYXQuYW5jaG9yLnBhdGgsIGF0LmZvY3VzLnBhdGgpXG4gICAgfVxuICB9XG5cbiAgaWYgKFBvaW50LmlzUG9pbnQoYXQpKSB7XG4gICAgYXQgPSBhdC5wYXRoXG4gIH1cblxuICBpZiAoZGVwdGggIT0gbnVsbCkge1xuICAgIGF0ID0gYXQuc2xpY2UoMCwgZGVwdGgpXG4gIH1cblxuICByZXR1cm4gYXRcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUG9pbnRSZWYgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BvaW50LXJlZidcblxuZXhwb3J0IGNvbnN0IHBvaW50UmVmOiBFZGl0b3JJbnRlcmZhY2VbJ3BvaW50UmVmJ10gPSAoXG4gIGVkaXRvcixcbiAgcG9pbnQsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIGNvbnN0IHsgYWZmaW5pdHkgPSAnZm9yd2FyZCcgfSA9IG9wdGlvbnNcbiAgY29uc3QgcmVmOiBQb2ludFJlZiA9IHtcbiAgICBjdXJyZW50OiBwb2ludCxcbiAgICBhZmZpbml0eSxcbiAgICB1bnJlZigpIHtcbiAgICAgIGNvbnN0IHsgY3VycmVudCB9ID0gcmVmXG4gICAgICBjb25zdCBwb2ludFJlZnMgPSBFZGl0b3IucG9pbnRSZWZzKGVkaXRvcilcbiAgICAgIHBvaW50UmVmcy5kZWxldGUocmVmKVxuICAgICAgcmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICByZXR1cm4gY3VycmVudFxuICAgIH0sXG4gIH1cblxuICBjb25zdCByZWZzID0gRWRpdG9yLnBvaW50UmVmcyhlZGl0b3IpXG4gIHJlZnMuYWRkKHJlZilcbiAgcmV0dXJuIHJlZlxufVxuIiwgImltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUE9JTlRfUkVGUyB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcblxuZXhwb3J0IGNvbnN0IHBvaW50UmVmczogRWRpdG9ySW50ZXJmYWNlWydwb2ludFJlZnMnXSA9IGVkaXRvciA9PiB7XG4gIGxldCByZWZzID0gUE9JTlRfUkVGUy5nZXQoZWRpdG9yKVxuXG4gIGlmICghcmVmcykge1xuICAgIHJlZnMgPSBuZXcgU2V0KClcbiAgICBQT0lOVF9SRUZTLnNldChlZGl0b3IsIHJlZnMpXG4gIH1cblxuICByZXR1cm4gcmVmc1xufVxuIiwgImltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuXG5leHBvcnQgY29uc3QgcG9pbnQ6IEVkaXRvckludGVyZmFjZVsncG9pbnQnXSA9IChlZGl0b3IsIGF0LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyBlZGdlID0gJ3N0YXJ0JyB9ID0gb3B0aW9uc1xuXG4gIGlmIChQYXRoLmlzUGF0aChhdCkpIHtcbiAgICBsZXQgcGF0aFxuXG4gICAgaWYgKGVkZ2UgPT09ICdlbmQnKSB7XG4gICAgICBjb25zdCBbLCBsYXN0UGF0aF0gPSBOb2RlLmxhc3QoZWRpdG9yLCBhdClcbiAgICAgIHBhdGggPSBsYXN0UGF0aFxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBbLCBmaXJzdFBhdGhdID0gTm9kZS5maXJzdChlZGl0b3IsIGF0KVxuICAgICAgcGF0aCA9IGZpcnN0UGF0aFxuICAgIH1cblxuICAgIGNvbnN0IG5vZGUgPSBOb2RlLmdldChlZGl0b3IsIHBhdGgpXG5cbiAgICBpZiAoIVRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IHRoZSAke2VkZ2V9IHBvaW50IGluIHRoZSBub2RlIGF0IHBhdGggWyR7YXR9XSBiZWNhdXNlIGl0IGhhcyBubyAke2VkZ2V9IHRleHQgbm9kZS5gXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcGF0aCwgb2Zmc2V0OiBlZGdlID09PSAnZW5kJyA/IG5vZGUudGV4dC5sZW5ndGggOiAwIH1cbiAgfVxuXG4gIGlmIChSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKGF0KVxuICAgIHJldHVybiBlZGdlID09PSAnc3RhcnQnID8gc3RhcnQgOiBlbmRcbiAgfVxuXG4gIHJldHVybiBhdFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9yUG9zaXRpb25zT3B0aW9ucyB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BvaW50J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHtcbiAgZ2V0Q2hhcmFjdGVyRGlzdGFuY2UsXG4gIGdldFdvcmREaXN0YW5jZSxcbiAgc3BsaXRCeUNoYXJhY3RlckRpc3RhbmNlLFxufSBmcm9tICcuLi91dGlscy9zdHJpbmcnXG5cbmV4cG9ydCBmdW5jdGlvbiogcG9zaXRpb25zKFxuICBlZGl0b3I6IEVkaXRvcixcbiAgb3B0aW9uczogRWRpdG9yUG9zaXRpb25zT3B0aW9ucyA9IHt9XG4pOiBHZW5lcmF0b3I8UG9pbnQsIHZvaWQsIHVuZGVmaW5lZD4ge1xuICBjb25zdCB7XG4gICAgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uLFxuICAgIHVuaXQgPSAnb2Zmc2V0JyxcbiAgICByZXZlcnNlID0gZmFsc2UsXG4gICAgdm9pZHMgPSBmYWxzZSxcbiAgICBpZ25vcmVOb25TZWxlY3RhYmxlID0gZmFsc2UsXG4gIH0gPSBvcHRpb25zXG5cbiAgaWYgKCFhdCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgLyoqXG4gICAqIEFsZ29yaXRobSBub3RlczpcbiAgICpcbiAgICogRWFjaCBzdGVwIGBkaXN0YW5jZWAgaXMgZHluYW1pYyBkZXBlbmRpbmcgb24gdGhlIHVuZGVybHlpbmcgdGV4dFxuICAgKiBhbmQgdGhlIGB1bml0YCBzcGVjaWZpZWQuICBFYWNoIHN0ZXAsIGUuZy4sIGEgbGluZSBvciB3b3JkLCBtYXlcbiAgICogc3BhbiBtdWx0aXBsZSB0ZXh0IG5vZGVzLCBzbyB3ZSBpdGVyYXRlIHRocm91Z2ggdGhlIHRleHQgYm90aCBvblxuICAgKiB0d28gbGV2ZWxzIGluIHN0ZXAtc3luYzpcbiAgICpcbiAgICogYGxlYWZUZXh0YCBzdG9yZXMgdGhlIHRleHQgb24gYSB0ZXh0IGxlYWYgbGV2ZWwsIGFuZCBpcyBhZHZhbmNlZFxuICAgKiB0aHJvdWdoIHVzaW5nIHRoZSBjb3VudGVycyBgbGVhZlRleHRPZmZzZXRgIGFuZCBgbGVhZlRleHRSZW1haW5pbmdgLlxuICAgKlxuICAgKiBgYmxvY2tUZXh0YCBzdG9yZXMgdGhlIHRleHQgb24gYSBibG9jayBsZXZlbCwgYW5kIGlzIHNob3J0ZW5lZFxuICAgKiBieSBgZGlzdGFuY2VgIGV2ZXJ5IHRpbWUgaXQgaXMgYWR2YW5jZWQuXG4gICAqXG4gICAqIFdlIG9ubHkgbWFpbnRhaW4gYSB3aW5kb3cgb2Ygb25lIGJsb2NrVGV4dCBhbmQgb25lIGxlYWZUZXh0IGJlY2F1c2VcbiAgICogYSBibG9jayBub2RlIGFsd2F5cyBhcHBlYXJzIGJlZm9yZSBhbGwgb2YgaXRzIGxlYWYgbm9kZXMuXG4gICAqL1xuXG4gIGNvbnN0IHJhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgYXQpXG4gIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKHJhbmdlKVxuICBjb25zdCBmaXJzdCA9IHJldmVyc2UgPyBlbmQgOiBzdGFydFxuICBsZXQgaXNOZXdCbG9jayA9IGZhbHNlXG4gIGxldCBibG9ja1RleHQgPSAnJ1xuICBsZXQgZGlzdGFuY2UgPSAwIC8vIERpc3RhbmNlIGZvciBsZWFmVGV4dCB0byBjYXRjaCB1cCB0byBibG9ja1RleHQuXG4gIGxldCBsZWFmVGV4dFJlbWFpbmluZyA9IDBcbiAgbGV0IGxlYWZUZXh0T2Zmc2V0ID0gMFxuXG4gIC8vIEl0ZXJhdGUgdGhyb3VnaCBhbGwgbm9kZXMgaW4gcmFuZ2UsIGdyYWJiaW5nIGVudGlyZSB0ZXh0dWFsIGNvbnRlbnRcbiAgLy8gb2YgYmxvY2sgbm9kZXMgaW4gYmxvY2tUZXh0LCBhbmQgdGV4dCBub2RlcyBpbiBsZWFmVGV4dC5cbiAgLy8gRXhwbG9pdHMgdGhlIGZhY3QgdGhhdCBub2RlcyBhcmUgc2VxdWVuY2VkIGluIHN1Y2ggYSB3YXkgdGhhdCB3ZSBmaXJzdFxuICAvLyBlbmNvdW50ZXIgdGhlIGJsb2NrIG5vZGUsIHRoZW4gYWxsIG9mIGl0cyB0ZXh0IG5vZGVzLCBzbyB3aGVuIGl0ZXJhdGluZ1xuICAvLyB0aHJvdWdoIHRoZSBibG9ja1RleHQgYW5kIGxlYWZUZXh0IHdlIGp1c3QgbmVlZCB0byByZW1lbWJlciBhIHdpbmRvdyBvZlxuICAvLyBvbmUgYmxvY2sgbm9kZSBhbmQgbGVhZiBub2RlLCByZXNwZWN0aXZlbHkuXG4gIGZvciAoY29uc3QgW25vZGUsIHBhdGhdIG9mIEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICBhdCxcbiAgICByZXZlcnNlLFxuICAgIHZvaWRzLFxuICAgIGlnbm9yZU5vblNlbGVjdGFibGUsXG4gIH0pKSB7XG4gICAgLypcbiAgICAgKiBFTEVNRU5UIE5PREUgLSBZaWVsZCBwb3NpdGlvbihzKSBmb3Igdm9pZHMsIGNvbGxlY3QgYmxvY2tUZXh0IGZvciBibG9ja3NcbiAgICAgKi9cbiAgICBpZiAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkpIHtcbiAgICAgIC8vIFZvaWQgbm9kZXMgYXJlIGEgc3BlY2lhbCBjYXNlLCBzbyBieSBkZWZhdWx0IHdlIHdpbGwgYWx3YXlzXG4gICAgICAvLyB5aWVsZCB0aGVpciBmaXJzdCBwb2ludC4gSWYgdGhlIGB2b2lkc2Agb3B0aW9uIGlzIHNldCB0byB0cnVlLFxuICAgICAgLy8gdGhlbiB3ZSB3aWxsIGl0ZXJhdGUgb3ZlciB0aGVpciBjb250ZW50LlxuICAgICAgaWYgKCF2b2lkcyAmJiAoZWRpdG9yLmlzVm9pZChub2RlKSB8fCBlZGl0b3IuaXNFbGVtZW50UmVhZE9ubHkobm9kZSkpKSB7XG4gICAgICAgIHlpZWxkIEVkaXRvci5zdGFydChlZGl0b3IsIHBhdGgpXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIElubGluZSBlbGVtZW50IG5vZGVzIGFyZSBpZ25vcmVkIGFzIHRoZXkgZG9uJ3QgdGhlbXNlbHZlc1xuICAgICAgLy8gY29udHJpYnV0ZSB0byBgYmxvY2tUZXh0YCBvciBgbGVhZlRleHRgIC0gdGhlaXIgcGFyZW50IGFuZFxuICAgICAgLy8gY2hpbGRyZW4gZG8uXG4gICAgICBpZiAoZWRpdG9yLmlzSW5saW5lKG5vZGUpKSBjb250aW51ZVxuXG4gICAgICAvLyBCbG9jayBlbGVtZW50IG5vZGUgLSBzZXQgYGJsb2NrVGV4dGAgdG8gaXRzIHRleHQgY29udGVudC5cbiAgICAgIGlmIChFZGl0b3IuaGFzSW5saW5lcyhlZGl0b3IsIG5vZGUpKSB7XG4gICAgICAgIC8vIFdlIGFsd2F5cyBleGhhdXN0IGJsb2NrIG5vZGVzIGJlZm9yZSBlbmNvdW50ZXJpbmcgYSBuZXcgb25lOlxuICAgICAgICAvLyAgIGNvbnNvbGUuYXNzZXJ0KGJsb2NrVGV4dCA9PT0gJycsXG4gICAgICAgIC8vICAgICBgYmxvY2tUZXh0PScke2Jsb2NrVGV4dH0nIC0gYCtcbiAgICAgICAgLy8gICAgIGBub3QgZXhoYXVzdGVkIGJlZm9yZSBuZXcgYmxvY2sgbm9kZWAsIHBhdGgpXG5cbiAgICAgICAgLy8gRW5zdXJlIHJhbmdlIGNvbnNpZGVyZWQgaXMgY2FwcGVkIHRvIGByYW5nZWAsIGluIHRoZVxuICAgICAgICAvLyBzdGFydC9lbmQgZWRnZSBjYXNlcyB3aGVyZSBibG9jayBleHRlbmRzIGJleW9uZCByYW5nZS5cbiAgICAgICAgLy8gRXF1aXZhbGVudCB0byB0aGlzLCBidXQgcHJlc3VtYWJseSBtb3JlIHBlcmZvcm1hbnQ6XG4gICAgICAgIC8vICAgYmxvY2tSYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIC4uLkVkaXRvci5lZGdlcyhlZGl0b3IsIHBhdGgpKVxuICAgICAgICAvLyAgIGJsb2NrUmFuZ2UgPSBSYW5nZS5pbnRlcnNlY3Rpb24ocmFuZ2UsIGJsb2NrUmFuZ2UpIC8vIGludGVyc2VjdFxuICAgICAgICAvLyAgIGJsb2NrVGV4dCA9IEVkaXRvci5zdHJpbmcoZWRpdG9yLCBibG9ja1JhbmdlLCB7IHZvaWRzIH0pXG4gICAgICAgIGNvbnN0IGUgPSBQYXRoLmlzQW5jZXN0b3IocGF0aCwgZW5kLnBhdGgpXG4gICAgICAgICAgPyBlbmRcbiAgICAgICAgICA6IEVkaXRvci5lbmQoZWRpdG9yLCBwYXRoKVxuICAgICAgICBjb25zdCBzID0gUGF0aC5pc0FuY2VzdG9yKHBhdGgsIHN0YXJ0LnBhdGgpXG4gICAgICAgICAgPyBzdGFydFxuICAgICAgICAgIDogRWRpdG9yLnN0YXJ0KGVkaXRvciwgcGF0aClcblxuICAgICAgICBibG9ja1RleHQgPSBFZGl0b3Iuc3RyaW5nKGVkaXRvciwgeyBhbmNob3I6IHMsIGZvY3VzOiBlIH0sIHsgdm9pZHMgfSlcbiAgICAgICAgaXNOZXdCbG9jayA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFRFWFQgTEVBRiBOT0RFIC0gSXRlcmF0ZSB0aHJvdWdoIHRleHQgY29udGVudCwgeWllbGRpbmdcbiAgICAgKiBwb3NpdGlvbnMgZXZlcnkgYGRpc3RhbmNlYCBvZmZzZXQgYWNjb3JkaW5nIHRvIGB1bml0YC5cbiAgICAgKi9cbiAgICBpZiAoVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICAgIGNvbnN0IGlzRmlyc3QgPSBQYXRoLmVxdWFscyhwYXRoLCBmaXJzdC5wYXRoKVxuXG4gICAgICAvLyBQcm9vZiB0aGF0IHdlIGFsd2F5cyBleGhhdXN0IHRleHQgbm9kZXMgYmVmb3JlIGVuY291bnRlcmluZyBhIG5ldyBvbmU6XG4gICAgICAvLyAgIGNvbnNvbGUuYXNzZXJ0KGxlYWZUZXh0UmVtYWluaW5nIDw9IDAsXG4gICAgICAvLyAgICAgYGxlYWZUZXh0UmVtYWluaW5nPSR7bGVhZlRleHRSZW1haW5pbmd9IC0gYCtcbiAgICAgIC8vICAgICBgbm90IGV4aGF1c3RlZCBiZWZvcmUgbmV3IGxlYWYgdGV4dCBub2RlYCwgcGF0aClcblxuICAgICAgLy8gUmVzZXQgYGxlYWZUZXh0YCBjb3VudGVycyBmb3IgbmV3IHRleHQgbm9kZS5cbiAgICAgIGlmIChpc0ZpcnN0KSB7XG4gICAgICAgIGxlYWZUZXh0UmVtYWluaW5nID0gcmV2ZXJzZVxuICAgICAgICAgID8gZmlyc3Qub2Zmc2V0XG4gICAgICAgICAgOiBub2RlLnRleHQubGVuZ3RoIC0gZmlyc3Qub2Zmc2V0XG4gICAgICAgIGxlYWZUZXh0T2Zmc2V0ID0gZmlyc3Qub2Zmc2V0IC8vIFdvcmtzIGZvciByZXZlcnNlIHRvby5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxlYWZUZXh0UmVtYWluaW5nID0gbm9kZS50ZXh0Lmxlbmd0aFxuICAgICAgICBsZWFmVGV4dE9mZnNldCA9IHJldmVyc2UgPyBsZWFmVGV4dFJlbWFpbmluZyA6IDBcbiAgICAgIH1cblxuICAgICAgLy8gWWllbGQgcG9zaXRpb24gYXQgdGhlIHN0YXJ0IG9mIG5vZGUgKHBvdGVudGlhbGx5KS5cbiAgICAgIGlmIChpc0ZpcnN0IHx8IGlzTmV3QmxvY2sgfHwgdW5pdCA9PT0gJ29mZnNldCcpIHtcbiAgICAgICAgeWllbGQgeyBwYXRoLCBvZmZzZXQ6IGxlYWZUZXh0T2Zmc2V0IH1cbiAgICAgICAgaXNOZXdCbG9jayA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIC8vIFlpZWxkIHBvc2l0aW9ucyBldmVyeSAoZHluYW1pY2FsbHkgY2FsY3VsYXRlZCkgYGRpc3RhbmNlYCBvZmZzZXQuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAvLyBJZiBgbGVhZlRleHRgIGhhcyBjYXVnaHQgdXAgd2l0aCBgYmxvY2tUZXh0YCAoZGlzdGFuY2U9MCksXG4gICAgICAgIC8vIGFuZCBpZiBibG9ja1RleHQgaXMgZXhoYXVzdGVkLCBicmVhayB0byBnZXQgYW5vdGhlciBibG9jayBub2RlLFxuICAgICAgICAvLyBvdGhlcndpc2UgYWR2YW5jZSBibG9ja1RleHQgZm9yd2FyZCBieSB0aGUgbmV3IGBkaXN0YW5jZWAuXG4gICAgICAgIGlmIChkaXN0YW5jZSA9PT0gMCkge1xuICAgICAgICAgIGlmIChibG9ja1RleHQgPT09ICcnKSBicmVha1xuICAgICAgICAgIGRpc3RhbmNlID0gY2FsY0Rpc3RhbmNlKGJsb2NrVGV4dCwgdW5pdCwgcmV2ZXJzZSlcbiAgICAgICAgICAvLyBTcGxpdCB0aGUgc3RyaW5nIGF0IHRoZSBwcmV2aW91c2x5IGZvdW5kIGRpc3RhbmNlIGFuZCB1c2UgdGhlXG4gICAgICAgICAgLy8gcmVtYWluaW5nIHN0cmluZyBmb3IgdGhlIG5leHQgaXRlcmF0aW9uLlxuICAgICAgICAgIGJsb2NrVGV4dCA9IHNwbGl0QnlDaGFyYWN0ZXJEaXN0YW5jZShibG9ja1RleHQsIGRpc3RhbmNlLCByZXZlcnNlKVsxXVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWR2YW5jZSBgbGVhZlRleHRgIGJ5IHRoZSBjdXJyZW50IGBkaXN0YW5jZWAuXG4gICAgICAgIGxlYWZUZXh0T2Zmc2V0ID0gcmV2ZXJzZVxuICAgICAgICAgID8gbGVhZlRleHRPZmZzZXQgLSBkaXN0YW5jZVxuICAgICAgICAgIDogbGVhZlRleHRPZmZzZXQgKyBkaXN0YW5jZVxuICAgICAgICBsZWFmVGV4dFJlbWFpbmluZyA9IGxlYWZUZXh0UmVtYWluaW5nIC0gZGlzdGFuY2VcblxuICAgICAgICAvLyBJZiBgbGVhZlRleHRgIGlzIGV4aGF1c3RlZCwgYnJlYWsgdG8gZ2V0IGEgbmV3IGxlYWYgbm9kZVxuICAgICAgICAvLyBhbmQgc2V0IGRpc3RhbmNlIHRvIHRoZSBvdmVyZmxvdyBhbW91bnQsIHNvIHdlJ2xsIChtYXliZSlcbiAgICAgICAgLy8gY2F0Y2ggdXAgdG8gYmxvY2tUZXh0IGluIHRoZSBuZXh0IGxlYWYgdGV4dCBub2RlLlxuICAgICAgICBpZiAobGVhZlRleHRSZW1haW5pbmcgPCAwKSB7XG4gICAgICAgICAgZGlzdGFuY2UgPSAtbGVhZlRleHRSZW1haW5pbmdcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3VjY2Vzc2Z1bGx5IHdhbGtlZCBgZGlzdGFuY2VgIG9mZnNldHMgdGhyb3VnaCBgbGVhZlRleHRgXG4gICAgICAgIC8vIHRvIGNhdGNoIHVwIHdpdGggYGJsb2NrVGV4dGAsIHNvIHdlIGNhbiByZXNldCBgZGlzdGFuY2VgXG4gICAgICAgIC8vIGFuZCB5aWVsZCB0aGlzIHBvc2l0aW9uIGluIHRoaXMgbm9kZS5cbiAgICAgICAgZGlzdGFuY2UgPSAwXG4gICAgICAgIHlpZWxkIHsgcGF0aCwgb2Zmc2V0OiBsZWFmVGV4dE9mZnNldCB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIFByb29mIHRoYXQgdXBvbiBjb21wbGV0aW9uLCB3ZSd2ZSBleGFodXN0ZWQgYm90aCBsZWFmIGFuZCBibG9jayB0ZXh0OlxuICAvLyAgIGNvbnNvbGUuYXNzZXJ0KGxlYWZUZXh0UmVtYWluaW5nIDw9IDAsIFwibGVhZlRleHQgd2Fzbid0IGV4aGF1c3RlZFwiKVxuICAvLyAgIGNvbnNvbGUuYXNzZXJ0KGJsb2NrVGV4dCA9PT0gJycsIFwiYmxvY2tUZXh0IHdhc24ndCBleGhhdXN0ZWRcIilcblxuICAvLyBIZWxwZXI6XG4gIC8vIFJldHVybiB0aGUgZGlzdGFuY2UgaW4gb2Zmc2V0cyBmb3IgYSBzdGVwIG9mIHNpemUgYHVuaXRgIG9uIGdpdmVuIHN0cmluZy5cbiAgZnVuY3Rpb24gY2FsY0Rpc3RhbmNlKHRleHQ6IHN0cmluZywgdW5pdDogc3RyaW5nLCByZXZlcnNlPzogYm9vbGVhbikge1xuICAgIGlmICh1bml0ID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgcmV0dXJuIGdldENoYXJhY3RlckRpc3RhbmNlKHRleHQsIHJldmVyc2UpXG4gICAgfSBlbHNlIGlmICh1bml0ID09PSAnd29yZCcpIHtcbiAgICAgIHJldHVybiBnZXRXb3JkRGlzdGFuY2UodGV4dCwgcmV2ZXJzZSlcbiAgICB9IGVsc2UgaWYgKHVuaXQgPT09ICdsaW5lJyB8fCB1bml0ID09PSAnYmxvY2snKSB7XG4gICAgICByZXR1cm4gdGV4dC5sZW5ndGhcbiAgICB9XG4gICAgcmV0dXJuIDFcbiAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBTcGFuIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9sb2NhdGlvbidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5cbmV4cG9ydCBjb25zdCBwcmV2aW91czogRWRpdG9ySW50ZXJmYWNlWydwcmV2aW91cyddID0gKGVkaXRvciwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgbW9kZSA9ICdsb3dlc3QnLCB2b2lkcyA9IGZhbHNlIH0gPSBvcHRpb25zXG4gIGxldCB7IG1hdGNoLCBhdCA9IGVkaXRvci5zZWxlY3Rpb24gfSA9IG9wdGlvbnNcblxuICBpZiAoIWF0KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBwb2ludEJlZm9yZUxvY2F0aW9uID0gRWRpdG9yLmJlZm9yZShlZGl0b3IsIGF0LCB7IHZvaWRzIH0pXG5cbiAgaWYgKCFwb2ludEJlZm9yZUxvY2F0aW9uKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBbLCB0b10gPSBFZGl0b3IuZmlyc3QoZWRpdG9yLCBbXSlcblxuICAvLyBUaGUgc2VhcmNoIGxvY2F0aW9uIGlzIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBkb2N1bWVudCB0byB0aGUgcGF0aCBvZlxuICAvLyB0aGUgcG9pbnQgYmVmb3JlIHRoZSBsb2NhdGlvbiBwYXNzZWQgaW5cbiAgY29uc3Qgc3BhbjogU3BhbiA9IFtwb2ludEJlZm9yZUxvY2F0aW9uLnBhdGgsIHRvXVxuXG4gIGlmIChQYXRoLmlzUGF0aChhdCkgJiYgYXQubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZ2V0IHRoZSBwcmV2aW91cyBub2RlIGZyb20gdGhlIHJvb3Qgbm9kZSFgKVxuICB9XG5cbiAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICBpZiAoUGF0aC5pc1BhdGgoYXQpKSB7XG4gICAgICBjb25zdCBbcGFyZW50XSA9IEVkaXRvci5wYXJlbnQoZWRpdG9yLCBhdClcbiAgICAgIG1hdGNoID0gbiA9PiBwYXJlbnQuY2hpbGRyZW4uaW5jbHVkZXMobilcbiAgICB9IGVsc2Uge1xuICAgICAgbWF0Y2ggPSAoKSA9PiB0cnVlXG4gICAgfVxuICB9XG5cbiAgY29uc3QgW3ByZXZpb3VzXSA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICByZXZlcnNlOiB0cnVlLFxuICAgIGF0OiBzcGFuLFxuICAgIG1hdGNoLFxuICAgIG1vZGUsXG4gICAgdm9pZHMsXG4gIH0pXG5cbiAgcmV0dXJuIHByZXZpb3VzXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFJhbmdlUmVmIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZS1yZWYnXG5cbmV4cG9ydCBjb25zdCByYW5nZVJlZjogRWRpdG9ySW50ZXJmYWNlWydyYW5nZVJlZiddID0gKFxuICBlZGl0b3IsXG4gIHJhbmdlLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBjb25zdCB7IGFmZmluaXR5ID0gJ2ZvcndhcmQnIH0gPSBvcHRpb25zXG4gIGNvbnN0IHJlZjogUmFuZ2VSZWYgPSB7XG4gICAgY3VycmVudDogcmFuZ2UsXG4gICAgYWZmaW5pdHksXG4gICAgdW5yZWYoKSB7XG4gICAgICBjb25zdCB7IGN1cnJlbnQgfSA9IHJlZlxuICAgICAgY29uc3QgcmFuZ2VSZWZzID0gRWRpdG9yLnJhbmdlUmVmcyhlZGl0b3IpXG4gICAgICByYW5nZVJlZnMuZGVsZXRlKHJlZilcbiAgICAgIHJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgcmV0dXJuIGN1cnJlbnRcbiAgICB9LFxuICB9XG5cbiAgY29uc3QgcmVmcyA9IEVkaXRvci5yYW5nZVJlZnMoZWRpdG9yKVxuICByZWZzLmFkZChyZWYpXG4gIHJldHVybiByZWZcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFJBTkdFX1JFRlMgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5cbmV4cG9ydCBjb25zdCByYW5nZVJlZnM6IEVkaXRvckludGVyZmFjZVsncmFuZ2VSZWZzJ10gPSBlZGl0b3IgPT4ge1xuICBsZXQgcmVmcyA9IFJBTkdFX1JFRlMuZ2V0KGVkaXRvcilcblxuICBpZiAoIXJlZnMpIHtcbiAgICByZWZzID0gbmV3IFNldCgpXG4gICAgUkFOR0VfUkVGUy5zZXQoZWRpdG9yLCByZWZzKVxuICB9XG5cbiAgcmV0dXJuIHJlZnNcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuXG5leHBvcnQgY29uc3QgcmFuZ2U6IEVkaXRvckludGVyZmFjZVsncmFuZ2UnXSA9IChlZGl0b3IsIGF0LCB0bykgPT4ge1xuICBpZiAoUmFuZ2UuaXNSYW5nZShhdCkgJiYgIXRvKSB7XG4gICAgcmV0dXJuIGF0XG4gIH1cblxuICBjb25zdCBzdGFydCA9IEVkaXRvci5zdGFydChlZGl0b3IsIGF0KVxuICBjb25zdCBlbmQgPSBFZGl0b3IuZW5kKGVkaXRvciwgdG8gfHwgYXQpXG4gIHJldHVybiB7IGFuY2hvcjogc3RhcnQsIGZvY3VzOiBlbmQgfVxufVxuIiwgImltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBGTFVTSElORyB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCByZW1vdmVNYXJrOiBFZGl0b3JJbnRlcmZhY2VbJ3JlbW92ZU1hcmsnXSA9IChlZGl0b3IsIGtleSkgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG5cbiAgaWYgKHNlbGVjdGlvbikge1xuICAgIGNvbnN0IG1hdGNoID0gKG5vZGU6IE5vZGUsIHBhdGg6IFBhdGgpID0+IHtcbiAgICAgIGlmICghVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlIC8vIG1hcmtzIGNhbiBvbmx5IGJlIGFwcGxpZWQgdG8gdGV4dFxuICAgICAgfVxuICAgICAgY29uc3QgW3BhcmVudE5vZGUsIHBhcmVudFBhdGhdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIHBhdGgpXG4gICAgICByZXR1cm4gIWVkaXRvci5pc1ZvaWQocGFyZW50Tm9kZSkgfHwgZWRpdG9yLm1hcmthYmxlVm9pZChwYXJlbnROb2RlKVxuICAgIH1cbiAgICBjb25zdCBleHBhbmRlZFNlbGVjdGlvbiA9IFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKVxuICAgIGxldCBtYXJrQWNjZXB0aW5nVm9pZFNlbGVjdGVkID0gZmFsc2VcbiAgICBpZiAoIWV4cGFuZGVkU2VsZWN0aW9uKSB7XG4gICAgICBjb25zdCBbc2VsZWN0ZWROb2RlLCBzZWxlY3RlZFBhdGhdID0gRWRpdG9yLm5vZGUoZWRpdG9yLCBzZWxlY3Rpb24pXG4gICAgICBpZiAoc2VsZWN0ZWROb2RlICYmIG1hdGNoKHNlbGVjdGVkTm9kZSwgc2VsZWN0ZWRQYXRoKSkge1xuICAgICAgICBjb25zdCBbcGFyZW50Tm9kZV0gPSBFZGl0b3IucGFyZW50KGVkaXRvciwgc2VsZWN0ZWRQYXRoKVxuICAgICAgICBtYXJrQWNjZXB0aW5nVm9pZFNlbGVjdGVkID1cbiAgICAgICAgICBwYXJlbnROb2RlICYmIGVkaXRvci5tYXJrYWJsZVZvaWQocGFyZW50Tm9kZSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGV4cGFuZGVkU2VsZWN0aW9uIHx8IG1hcmtBY2NlcHRpbmdWb2lkU2VsZWN0ZWQpIHtcbiAgICAgIFRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsIGtleSwge1xuICAgICAgICBtYXRjaCxcbiAgICAgICAgc3BsaXQ6IHRydWUsXG4gICAgICAgIHZvaWRzOiB0cnVlLFxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWFya3MgPSB7IC4uLihFZGl0b3IubWFya3MoZWRpdG9yKSB8fCB7fSkgfVxuICAgICAgZGVsZXRlIG1hcmtzWzxrZXlvZiBOb2RlPmtleV1cbiAgICAgIGVkaXRvci5tYXJrcyA9IG1hcmtzXG4gICAgICBpZiAoIUZMVVNISU5HLmdldChlZGl0b3IpKSB7XG4gICAgICAgIGVkaXRvci5vbkNoYW5nZSgpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBOT1JNQUxJWklORyB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcblxuZXhwb3J0IGNvbnN0IHNldE5vcm1hbGl6aW5nOiBFZGl0b3JJbnRlcmZhY2VbJ3NldE5vcm1hbGl6aW5nJ10gPSAoXG4gIGVkaXRvcixcbiAgaXNOb3JtYWxpemluZ1xuKSA9PiB7XG4gIE5PUk1BTElaSU5HLnNldChlZGl0b3IsIGlzTm9ybWFsaXppbmcpXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IHN0YXJ0OiBFZGl0b3JJbnRlcmZhY2VbJ3N0YXJ0J10gPSAoZWRpdG9yLCBhdCkgPT4ge1xuICByZXR1cm4gRWRpdG9yLnBvaW50KGVkaXRvciwgYXQsIHsgZWRnZTogJ3N0YXJ0JyB9KVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcblxuZXhwb3J0IGNvbnN0IHN0cmluZzogRWRpdG9ySW50ZXJmYWNlWydzdHJpbmcnXSA9IChlZGl0b3IsIGF0LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyB2b2lkcyA9IGZhbHNlIH0gPSBvcHRpb25zXG4gIGNvbnN0IHJhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgYXQpXG4gIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKHJhbmdlKVxuICBsZXQgdGV4dCA9ICcnXG5cbiAgZm9yIChjb25zdCBbbm9kZSwgcGF0aF0gb2YgRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgIGF0OiByYW5nZSxcbiAgICBtYXRjaDogVGV4dC5pc1RleHQsXG4gICAgdm9pZHMsXG4gIH0pKSB7XG4gICAgbGV0IHQgPSBub2RlLnRleHRcblxuICAgIGlmIChQYXRoLmVxdWFscyhwYXRoLCBlbmQucGF0aCkpIHtcbiAgICAgIHQgPSB0LnNsaWNlKDAsIGVuZC5vZmZzZXQpXG4gICAgfVxuXG4gICAgaWYgKFBhdGguZXF1YWxzKHBhdGgsIHN0YXJ0LnBhdGgpKSB7XG4gICAgICB0ID0gdC5zbGljZShzdGFydC5vZmZzZXQpXG4gICAgfVxuXG4gICAgdGV4dCArPSB0XG4gIH1cblxuICByZXR1cm4gdGV4dFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5cbmV4cG9ydCBjb25zdCB1bmhhbmdSYW5nZTogRWRpdG9ySW50ZXJmYWNlWyd1bmhhbmdSYW5nZSddID0gKFxuICBlZGl0b3IsXG4gIHJhbmdlLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBjb25zdCB7IHZvaWRzID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgbGV0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKHJhbmdlKVxuXG4gIC8vIFBFUkY6IGV4aXQgZWFybHkgaWYgd2UgY2FuIGd1YXJhbnRlZSB0aGF0IHRoZSByYW5nZSBpc24ndCBoYW5naW5nLlxuICBpZiAoXG4gICAgc3RhcnQub2Zmc2V0ICE9PSAwIHx8XG4gICAgZW5kLm9mZnNldCAhPT0gMCB8fFxuICAgIFJhbmdlLmlzQ29sbGFwc2VkKHJhbmdlKSB8fFxuICAgIFBhdGguaGFzUHJldmlvdXMoZW5kLnBhdGgpXG4gICkge1xuICAgIHJldHVybiByYW5nZVxuICB9XG5cbiAgY29uc3QgZW5kQmxvY2sgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgYXQ6IGVuZCxcbiAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pLFxuICAgIHZvaWRzLFxuICB9KVxuICBjb25zdCBibG9ja1BhdGggPSBlbmRCbG9jayA/IGVuZEJsb2NrWzFdIDogW11cbiAgY29uc3QgZmlyc3QgPSBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBzdGFydClcbiAgY29uc3QgYmVmb3JlID0geyBhbmNob3I6IGZpcnN0LCBmb2N1czogZW5kIH1cbiAgbGV0IHNraXAgPSB0cnVlXG5cbiAgZm9yIChjb25zdCBbbm9kZSwgcGF0aF0gb2YgRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgIGF0OiBiZWZvcmUsXG4gICAgbWF0Y2g6IFRleHQuaXNUZXh0LFxuICAgIHJldmVyc2U6IHRydWUsXG4gICAgdm9pZHMsXG4gIH0pKSB7XG4gICAgaWYgKHNraXApIHtcbiAgICAgIHNraXAgPSBmYWxzZVxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBpZiAobm9kZS50ZXh0ICE9PSAnJyB8fCBQYXRoLmlzQmVmb3JlKHBhdGgsIGJsb2NrUGF0aCkpIHtcbiAgICAgIGVuZCA9IHsgcGF0aCwgb2Zmc2V0OiBub2RlLnRleHQubGVuZ3RoIH1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgYW5jaG9yOiBzdGFydCwgZm9jdXM6IGVuZCB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IHdpdGhvdXROb3JtYWxpemluZzogRWRpdG9ySW50ZXJmYWNlWyd3aXRob3V0Tm9ybWFsaXppbmcnXSA9IChcbiAgZWRpdG9yLFxuICBmblxuKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gRWRpdG9yLmlzTm9ybWFsaXppbmcoZWRpdG9yKVxuICBFZGl0b3Iuc2V0Tm9ybWFsaXppbmcoZWRpdG9yLCBmYWxzZSlcbiAgdHJ5IHtcbiAgICBmbigpXG4gIH0gZmluYWxseSB7XG4gICAgRWRpdG9yLnNldE5vcm1hbGl6aW5nKGVkaXRvciwgdmFsdWUpXG4gIH1cbiAgRWRpdG9yLm5vcm1hbGl6ZShlZGl0b3IpXG59XG4iLCAiaW1wb3J0IHsgVGV4dFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvdGV4dCdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BvaW50J1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgTm9kZUVudHJ5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuXG5leHBvcnQgY29uc3QgZGVsZXRlVGV4dDogVGV4dFRyYW5zZm9ybXNbJ2RlbGV0ZSddID0gKGVkaXRvciwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgcmV2ZXJzZSA9IGZhbHNlLFxuICAgICAgdW5pdCA9ICdjaGFyYWN0ZXInLFxuICAgICAgZGlzdGFuY2UgPSAxLFxuICAgICAgdm9pZHMgPSBmYWxzZSxcbiAgICB9ID0gb3B0aW9uc1xuICAgIGxldCB7IGF0ID0gZWRpdG9yLnNlbGVjdGlvbiwgaGFuZ2luZyA9IGZhbHNlIH0gPSBvcHRpb25zXG5cbiAgICBpZiAoIWF0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBsZXQgaXNDb2xsYXBzZWQgPSBmYWxzZVxuICAgIGlmIChSYW5nZS5pc1JhbmdlKGF0KSAmJiBSYW5nZS5pc0NvbGxhcHNlZChhdCkpIHtcbiAgICAgIGlzQ29sbGFwc2VkID0gdHJ1ZVxuICAgICAgYXQgPSBhdC5hbmNob3JcbiAgICB9XG5cbiAgICBpZiAoUG9pbnQuaXNQb2ludChhdCkpIHtcbiAgICAgIGNvbnN0IGZ1cnRoZXN0Vm9pZCA9IEVkaXRvci52b2lkKGVkaXRvciwgeyBhdCwgbW9kZTogJ2hpZ2hlc3QnIH0pXG5cbiAgICAgIGlmICghdm9pZHMgJiYgZnVydGhlc3RWb2lkKSB7XG4gICAgICAgIGNvbnN0IFssIHZvaWRQYXRoXSA9IGZ1cnRoZXN0Vm9pZFxuICAgICAgICBhdCA9IHZvaWRQYXRoXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBvcHRzID0geyB1bml0LCBkaXN0YW5jZSB9XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHJldmVyc2VcbiAgICAgICAgICA/IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBhdCwgb3B0cykgfHwgRWRpdG9yLnN0YXJ0KGVkaXRvciwgW10pXG4gICAgICAgICAgOiBFZGl0b3IuYWZ0ZXIoZWRpdG9yLCBhdCwgb3B0cykgfHwgRWRpdG9yLmVuZChlZGl0b3IsIFtdKVxuICAgICAgICBhdCA9IHsgYW5jaG9yOiBhdCwgZm9jdXM6IHRhcmdldCB9XG4gICAgICAgIGhhbmdpbmcgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFBhdGguaXNQYXRoKGF0KSkge1xuICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHsgYXQsIHZvaWRzIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoUmFuZ2UuaXNDb2xsYXBzZWQoYXQpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIWhhbmdpbmcpIHtcbiAgICAgIGNvbnN0IFssIGVuZF0gPSBSYW5nZS5lZGdlcyhhdClcbiAgICAgIGNvbnN0IGVuZE9mRG9jID0gRWRpdG9yLmVuZChlZGl0b3IsIFtdKVxuXG4gICAgICBpZiAoIVBvaW50LmVxdWFscyhlbmQsIGVuZE9mRG9jKSkge1xuICAgICAgICBhdCA9IEVkaXRvci51bmhhbmdSYW5nZShlZGl0b3IsIGF0LCB7IHZvaWRzIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKGF0KVxuICAgIGNvbnN0IHN0YXJ0QmxvY2sgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pLFxuICAgICAgYXQ6IHN0YXJ0LFxuICAgICAgdm9pZHMsXG4gICAgfSlcbiAgICBjb25zdCBlbmRCbG9jayA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbiksXG4gICAgICBhdDogZW5kLFxuICAgICAgdm9pZHMsXG4gICAgfSlcbiAgICBjb25zdCBpc0Fjcm9zc0Jsb2NrcyA9XG4gICAgICBzdGFydEJsb2NrICYmIGVuZEJsb2NrICYmICFQYXRoLmVxdWFscyhzdGFydEJsb2NrWzFdLCBlbmRCbG9ja1sxXSlcbiAgICBjb25zdCBpc1NpbmdsZVRleHQgPSBQYXRoLmVxdWFscyhzdGFydC5wYXRoLCBlbmQucGF0aClcbiAgICBjb25zdCBzdGFydE5vbkVkaXRhYmxlID0gdm9pZHNcbiAgICAgID8gbnVsbFxuICAgICAgOiBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQ6IHN0YXJ0LCBtb2RlOiAnaGlnaGVzdCcgfSkgPz9cbiAgICAgICAgRWRpdG9yLmVsZW1lbnRSZWFkT25seShlZGl0b3IsIHsgYXQ6IHN0YXJ0LCBtb2RlOiAnaGlnaGVzdCcgfSlcbiAgICBjb25zdCBlbmROb25FZGl0YWJsZSA9IHZvaWRzXG4gICAgICA/IG51bGxcbiAgICAgIDogRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0OiBlbmQsIG1vZGU6ICdoaWdoZXN0JyB9KSA/P1xuICAgICAgICBFZGl0b3IuZWxlbWVudFJlYWRPbmx5KGVkaXRvciwgeyBhdDogZW5kLCBtb2RlOiAnaGlnaGVzdCcgfSlcblxuICAgIC8vIElmIHRoZSBzdGFydCBvciBlbmQgcG9pbnRzIGFyZSBpbnNpZGUgYW4gaW5saW5lIHZvaWQsIG51ZGdlIHRoZW0gb3V0LlxuICAgIGlmIChzdGFydE5vbkVkaXRhYmxlKSB7XG4gICAgICBjb25zdCBiZWZvcmUgPSBFZGl0b3IuYmVmb3JlKGVkaXRvciwgc3RhcnQpXG5cbiAgICAgIGlmIChiZWZvcmUgJiYgc3RhcnRCbG9jayAmJiBQYXRoLmlzQW5jZXN0b3Ioc3RhcnRCbG9ja1sxXSwgYmVmb3JlLnBhdGgpKSB7XG4gICAgICAgIHN0YXJ0ID0gYmVmb3JlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGVuZE5vbkVkaXRhYmxlKSB7XG4gICAgICBjb25zdCBhZnRlciA9IEVkaXRvci5hZnRlcihlZGl0b3IsIGVuZClcblxuICAgICAgaWYgKGFmdGVyICYmIGVuZEJsb2NrICYmIFBhdGguaXNBbmNlc3RvcihlbmRCbG9ja1sxXSwgYWZ0ZXIucGF0aCkpIHtcbiAgICAgICAgZW5kID0gYWZ0ZXJcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGhpZ2hlc3Qgbm9kZXMgdGhhdCBhcmUgY29tcGxldGVseSBpbnNpZGUgdGhlIHJhbmdlLCBhcyB3ZWxsIGFzXG4gICAgLy8gdGhlIHN0YXJ0IGFuZCBlbmQgbm9kZXMuXG4gICAgY29uc3QgbWF0Y2hlczogTm9kZUVudHJ5W10gPSBbXVxuICAgIGxldCBsYXN0UGF0aDogUGF0aCB8IHVuZGVmaW5lZFxuXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7IGF0LCB2b2lkcyB9KSkge1xuICAgICAgY29uc3QgW25vZGUsIHBhdGhdID0gZW50cnlcblxuICAgICAgaWYgKGxhc3RQYXRoICYmIFBhdGguY29tcGFyZShwYXRoLCBsYXN0UGF0aCkgPT09IDApIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAoIXZvaWRzICYmXG4gICAgICAgICAgRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiZcbiAgICAgICAgICAoRWRpdG9yLmlzVm9pZChlZGl0b3IsIG5vZGUpIHx8XG4gICAgICAgICAgICBFZGl0b3IuaXNFbGVtZW50UmVhZE9ubHkoZWRpdG9yLCBub2RlKSkpIHx8XG4gICAgICAgICghUGF0aC5pc0NvbW1vbihwYXRoLCBzdGFydC5wYXRoKSAmJiAhUGF0aC5pc0NvbW1vbihwYXRoLCBlbmQucGF0aCkpXG4gICAgICApIHtcbiAgICAgICAgbWF0Y2hlcy5wdXNoKGVudHJ5KVxuICAgICAgICBsYXN0UGF0aCA9IHBhdGhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwYXRoUmVmcyA9IEFycmF5LmZyb20obWF0Y2hlcywgKFssIHBdKSA9PiBFZGl0b3IucGF0aFJlZihlZGl0b3IsIHApKVxuICAgIGNvbnN0IHN0YXJ0UmVmID0gRWRpdG9yLnBvaW50UmVmKGVkaXRvciwgc3RhcnQpXG4gICAgY29uc3QgZW5kUmVmID0gRWRpdG9yLnBvaW50UmVmKGVkaXRvciwgZW5kKVxuXG4gICAgbGV0IHJlbW92ZWRUZXh0ID0gJydcblxuICAgIGlmICghaXNTaW5nbGVUZXh0ICYmICFzdGFydE5vbkVkaXRhYmxlKSB7XG4gICAgICBjb25zdCBwb2ludCA9IHN0YXJ0UmVmLmN1cnJlbnQhXG4gICAgICBjb25zdCBbbm9kZV0gPSBFZGl0b3IubGVhZihlZGl0b3IsIHBvaW50KVxuICAgICAgY29uc3QgeyBwYXRoIH0gPSBwb2ludFxuICAgICAgY29uc3QgeyBvZmZzZXQgfSA9IHN0YXJ0XG4gICAgICBjb25zdCB0ZXh0ID0gbm9kZS50ZXh0LnNsaWNlKG9mZnNldClcbiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgZWRpdG9yLmFwcGx5KHsgdHlwZTogJ3JlbW92ZV90ZXh0JywgcGF0aCwgb2Zmc2V0LCB0ZXh0IH0pXG4gICAgICAgIHJlbW92ZWRUZXh0ID0gdGV4dFxuICAgICAgfVxuICAgIH1cblxuICAgIHBhdGhSZWZzXG4gICAgICAucmV2ZXJzZSgpXG4gICAgICAubWFwKHIgPT4gci51bnJlZigpKVxuICAgICAgLmZpbHRlcigocik6IHIgaXMgUGF0aCA9PiByICE9PSBudWxsKVxuICAgICAgLmZvckVhY2gocCA9PiBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwgeyBhdDogcCwgdm9pZHMgfSkpXG5cbiAgICBpZiAoIWVuZE5vbkVkaXRhYmxlKSB7XG4gICAgICBjb25zdCBwb2ludCA9IGVuZFJlZi5jdXJyZW50IVxuICAgICAgY29uc3QgW25vZGVdID0gRWRpdG9yLmxlYWYoZWRpdG9yLCBwb2ludClcbiAgICAgIGNvbnN0IHsgcGF0aCB9ID0gcG9pbnRcbiAgICAgIGNvbnN0IG9mZnNldCA9IGlzU2luZ2xlVGV4dCA/IHN0YXJ0Lm9mZnNldCA6IDBcbiAgICAgIGNvbnN0IHRleHQgPSBub2RlLnRleHQuc2xpY2Uob2Zmc2V0LCBlbmQub2Zmc2V0KVxuICAgICAgaWYgKHRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICBlZGl0b3IuYXBwbHkoeyB0eXBlOiAncmVtb3ZlX3RleHQnLCBwYXRoLCBvZmZzZXQsIHRleHQgfSlcbiAgICAgICAgcmVtb3ZlZFRleHQgPSB0ZXh0XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFpc1NpbmdsZVRleHQgJiYgaXNBY3Jvc3NCbG9ja3MgJiYgZW5kUmVmLmN1cnJlbnQgJiYgc3RhcnRSZWYuY3VycmVudCkge1xuICAgICAgVHJhbnNmb3Jtcy5tZXJnZU5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdDogZW5kUmVmLmN1cnJlbnQsXG4gICAgICAgIGhhbmdpbmc6IHRydWUsXG4gICAgICAgIHZvaWRzLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBGb3IgVGhhaSBzY3JpcHQsIGRlbGV0aW5nIE4gY2hhcmFjdGVyKHMpIGJhY2t3YXJkIHNob3VsZCBkZWxldGVcbiAgICAvLyBOIGNvZGUgcG9pbnQocykgaW5zdGVhZCBvZiBhbiBlbnRpcmUgZ3JhcGhlbWUgY2x1c3Rlci5cbiAgICAvLyBUaGVyZWZvcmUsIHRoZSByZW1haW5pbmcgY29kZSBwb2ludHMgc2hvdWxkIGJlIGluc2VydGVkIGJhY2suXG4gICAgaWYgKFxuICAgICAgaXNDb2xsYXBzZWQgJiZcbiAgICAgIHJldmVyc2UgJiZcbiAgICAgIHVuaXQgPT09ICdjaGFyYWN0ZXInICYmXG4gICAgICByZW1vdmVkVGV4dC5sZW5ndGggPiAxICYmXG4gICAgICByZW1vdmVkVGV4dC5tYXRjaCgvW1xcdTBFMDAtXFx1MEU3Rl0rLylcbiAgICApIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0VGV4dChcbiAgICAgICAgZWRpdG9yLFxuICAgICAgICByZW1vdmVkVGV4dC5zbGljZSgwLCByZW1vdmVkVGV4dC5sZW5ndGggLSBkaXN0YW5jZSlcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydFVucmVmID0gc3RhcnRSZWYudW5yZWYoKVxuICAgIGNvbnN0IGVuZFVucmVmID0gZW5kUmVmLnVucmVmKClcbiAgICBjb25zdCBwb2ludCA9IHJldmVyc2UgPyBzdGFydFVucmVmIHx8IGVuZFVucmVmIDogZW5kVW5yZWYgfHwgc3RhcnRVbnJlZlxuXG4gICAgaWYgKG9wdGlvbnMuYXQgPT0gbnVsbCAmJiBwb2ludCkge1xuICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBwb2ludClcbiAgICB9XG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBOb2RlLCBOb2RlRW50cnkgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgVGV4dFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvdGV4dCdcbmltcG9ydCB7IGdldERlZmF1bHRJbnNlcnRMb2NhdGlvbiB9IGZyb20gJy4uL3V0aWxzJ1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0RnJhZ21lbnQ6IFRleHRUcmFuc2Zvcm1zWydpbnNlcnRGcmFnbWVudCddID0gKFxuICBlZGl0b3IsXG4gIGZyYWdtZW50LFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IHsgaGFuZ2luZyA9IGZhbHNlLCB2b2lkcyA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgbGV0IHsgYXQgPSBnZXREZWZhdWx0SW5zZXJ0TG9jYXRpb24oZWRpdG9yKSB9ID0gb3B0aW9uc1xuXG4gICAgaWYgKCFmcmFnbWVudC5sZW5ndGgpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgaWYgKCFoYW5naW5nKSB7XG4gICAgICAgIGF0ID0gRWRpdG9yLnVuaGFuZ1JhbmdlKGVkaXRvciwgYXQsIHsgdm9pZHMgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKFJhbmdlLmlzQ29sbGFwc2VkKGF0KSkge1xuICAgICAgICBhdCA9IGF0LmFuY2hvclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgWywgZW5kXSA9IFJhbmdlLmVkZ2VzKGF0KVxuXG4gICAgICAgIGlmICghdm9pZHMgJiYgRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0OiBlbmQgfSkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBvaW50UmVmID0gRWRpdG9yLnBvaW50UmVmKGVkaXRvciwgZW5kKVxuICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHsgYXQgfSlcbiAgICAgICAgYXQgPSBwb2ludFJlZi51bnJlZigpIVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoUGF0aC5pc1BhdGgoYXQpKSB7XG4gICAgICBhdCA9IEVkaXRvci5zdGFydChlZGl0b3IsIGF0KVxuICAgIH1cblxuICAgIGlmICghdm9pZHMgJiYgRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0IH0pKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgaW5zZXJ0IHBvaW50IGlzIGF0IHRoZSBlZGdlIG9mIGFuIGlubGluZSBub2RlLCBtb3ZlIGl0IG91dHNpZGVcbiAgICAvLyBpbnN0ZWFkIHNpbmNlIGl0IHdpbGwgbmVlZCB0byBiZSBzcGxpdCBvdGhlcndpc2UuXG4gICAgY29uc3QgaW5saW5lRWxlbWVudE1hdGNoID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgYXQsXG4gICAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNJbmxpbmUoZWRpdG9yLCBuKSxcbiAgICAgIG1vZGU6ICdoaWdoZXN0JyxcbiAgICAgIHZvaWRzLFxuICAgIH0pXG5cbiAgICBpZiAoaW5saW5lRWxlbWVudE1hdGNoKSB7XG4gICAgICBjb25zdCBbLCBpbmxpbmVQYXRoXSA9IGlubGluZUVsZW1lbnRNYXRjaFxuXG4gICAgICBpZiAoRWRpdG9yLmlzRW5kKGVkaXRvciwgYXQsIGlubGluZVBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGFmdGVyID0gRWRpdG9yLmFmdGVyKGVkaXRvciwgaW5saW5lUGF0aCkhXG4gICAgICAgIGF0ID0gYWZ0ZXJcbiAgICAgIH0gZWxzZSBpZiAoRWRpdG9yLmlzU3RhcnQoZWRpdG9yLCBhdCwgaW5saW5lUGF0aCkpIHtcbiAgICAgICAgY29uc3QgYmVmb3JlID0gRWRpdG9yLmJlZm9yZShlZGl0b3IsIGlubGluZVBhdGgpIVxuICAgICAgICBhdCA9IGJlZm9yZVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGJsb2NrTWF0Y2ggPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pLFxuICAgICAgYXQsXG4gICAgICB2b2lkcyxcbiAgICB9KSFcbiAgICBjb25zdCBbLCBibG9ja1BhdGhdID0gYmxvY2tNYXRjaFxuICAgIGNvbnN0IGlzQmxvY2tTdGFydCA9IEVkaXRvci5pc1N0YXJ0KGVkaXRvciwgYXQsIGJsb2NrUGF0aClcbiAgICBjb25zdCBpc0Jsb2NrRW5kID0gRWRpdG9yLmlzRW5kKGVkaXRvciwgYXQsIGJsb2NrUGF0aClcbiAgICBjb25zdCBpc0Jsb2NrRW1wdHkgPSBpc0Jsb2NrU3RhcnQgJiYgaXNCbG9ja0VuZFxuICAgIGNvbnN0IG1lcmdlU3RhcnQgPSAhaXNCbG9ja1N0YXJ0IHx8IChpc0Jsb2NrU3RhcnQgJiYgaXNCbG9ja0VuZClcbiAgICBjb25zdCBtZXJnZUVuZCA9ICFpc0Jsb2NrRW5kXG4gICAgY29uc3QgWywgZmlyc3RQYXRoXSA9IE5vZGUuZmlyc3QoeyBjaGlsZHJlbjogZnJhZ21lbnQgfSwgW10pXG4gICAgY29uc3QgWywgbGFzdFBhdGhdID0gTm9kZS5sYXN0KHsgY2hpbGRyZW46IGZyYWdtZW50IH0sIFtdKVxuXG4gICAgY29uc3QgbWF0Y2hlczogTm9kZUVudHJ5W10gPSBbXVxuICAgIGNvbnN0IG1hdGNoZXIgPSAoW24sIHBdOiBOb2RlRW50cnkpID0+IHtcbiAgICAgIGNvbnN0IGlzUm9vdCA9IHAubGVuZ3RoID09PSAwXG4gICAgICBpZiAoaXNSb290KSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBpZiAoaXNCbG9ja0VtcHR5KSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgbWVyZ2VTdGFydCAmJlxuICAgICAgICBQYXRoLmlzQW5jZXN0b3IocCwgZmlyc3RQYXRoKSAmJlxuICAgICAgICBFbGVtZW50LmlzRWxlbWVudChuKSAmJlxuICAgICAgICAhZWRpdG9yLmlzVm9pZChuKSAmJlxuICAgICAgICAhZWRpdG9yLmlzSW5saW5lKG4pXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgbWVyZ2VFbmQgJiZcbiAgICAgICAgUGF0aC5pc0FuY2VzdG9yKHAsIGxhc3RQYXRoKSAmJlxuICAgICAgICBFbGVtZW50LmlzRWxlbWVudChuKSAmJlxuICAgICAgICAhZWRpdG9yLmlzVm9pZChuKSAmJlxuICAgICAgICAhZWRpdG9yLmlzSW5saW5lKG4pXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBOb2RlLm5vZGVzKHsgY2hpbGRyZW46IGZyYWdtZW50IH0sIHsgcGFzczogbWF0Y2hlciB9KSkge1xuICAgICAgaWYgKG1hdGNoZXIoZW50cnkpKSB7XG4gICAgICAgIG1hdGNoZXMucHVzaChlbnRyeSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzdGFydHMgPSBbXVxuICAgIGNvbnN0IG1pZGRsZXMgPSBbXVxuICAgIGNvbnN0IGVuZHMgPSBbXVxuICAgIGxldCBzdGFydGluZyA9IHRydWVcbiAgICBsZXQgaGFzQmxvY2tzID0gZmFsc2VcblxuICAgIGZvciAoY29uc3QgW25vZGVdIG9mIG1hdGNoZXMpIHtcbiAgICAgIGlmIChFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJiAhZWRpdG9yLmlzSW5saW5lKG5vZGUpKSB7XG4gICAgICAgIHN0YXJ0aW5nID0gZmFsc2VcbiAgICAgICAgaGFzQmxvY2tzID0gdHJ1ZVxuICAgICAgICBtaWRkbGVzLnB1c2gobm9kZSlcbiAgICAgIH0gZWxzZSBpZiAoc3RhcnRpbmcpIHtcbiAgICAgICAgc3RhcnRzLnB1c2gobm9kZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuZHMucHVzaChub2RlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IFtpbmxpbmVNYXRjaF0gPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdCxcbiAgICAgIG1hdGNoOiBuID0+IFRleHQuaXNUZXh0KG4pIHx8IEVkaXRvci5pc0lubGluZShlZGl0b3IsIG4pLFxuICAgICAgbW9kZTogJ2hpZ2hlc3QnLFxuICAgICAgdm9pZHMsXG4gICAgfSkhXG5cbiAgICBjb25zdCBbLCBpbmxpbmVQYXRoXSA9IGlubGluZU1hdGNoXG4gICAgY29uc3QgaXNJbmxpbmVTdGFydCA9IEVkaXRvci5pc1N0YXJ0KGVkaXRvciwgYXQsIGlubGluZVBhdGgpXG4gICAgY29uc3QgaXNJbmxpbmVFbmQgPSBFZGl0b3IuaXNFbmQoZWRpdG9yLCBhdCwgaW5saW5lUGF0aClcblxuICAgIGNvbnN0IG1pZGRsZVJlZiA9IEVkaXRvci5wYXRoUmVmKFxuICAgICAgZWRpdG9yLFxuICAgICAgaXNCbG9ja0VuZCAmJiAhZW5kcy5sZW5ndGggPyBQYXRoLm5leHQoYmxvY2tQYXRoKSA6IGJsb2NrUGF0aFxuICAgIClcblxuICAgIGNvbnN0IGVuZFJlZiA9IEVkaXRvci5wYXRoUmVmKFxuICAgICAgZWRpdG9yLFxuICAgICAgaXNJbmxpbmVFbmQgPyBQYXRoLm5leHQoaW5saW5lUGF0aCkgOiBpbmxpbmVQYXRoXG4gICAgKVxuXG4gICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGVkaXRvciwge1xuICAgICAgYXQsXG4gICAgICBtYXRjaDogbiA9PlxuICAgICAgICBoYXNCbG9ja3NcbiAgICAgICAgICA/IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICAgICAgICA6IFRleHQuaXNUZXh0KG4pIHx8IEVkaXRvci5pc0lubGluZShlZGl0b3IsIG4pLFxuICAgICAgbW9kZTogaGFzQmxvY2tzID8gJ2xvd2VzdCcgOiAnaGlnaGVzdCcsXG4gICAgICBhbHdheXM6XG4gICAgICAgIGhhc0Jsb2NrcyAmJlxuICAgICAgICAoIWlzQmxvY2tTdGFydCB8fCBzdGFydHMubGVuZ3RoID4gMCkgJiZcbiAgICAgICAgKCFpc0Jsb2NrRW5kIHx8IGVuZHMubGVuZ3RoID4gMCksXG4gICAgICB2b2lkcyxcbiAgICB9KVxuXG4gICAgY29uc3Qgc3RhcnRSZWYgPSBFZGl0b3IucGF0aFJlZihcbiAgICAgIGVkaXRvcixcbiAgICAgICFpc0lubGluZVN0YXJ0IHx8IChpc0lubGluZVN0YXJ0ICYmIGlzSW5saW5lRW5kKVxuICAgICAgICA/IFBhdGgubmV4dChpbmxpbmVQYXRoKVxuICAgICAgICA6IGlubGluZVBhdGhcbiAgICApXG5cbiAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgc3RhcnRzLCB7XG4gICAgICBhdDogc3RhcnRSZWYuY3VycmVudCEsXG4gICAgICBtYXRjaDogbiA9PiBUZXh0LmlzVGV4dChuKSB8fCBFZGl0b3IuaXNJbmxpbmUoZWRpdG9yLCBuKSxcbiAgICAgIG1vZGU6ICdoaWdoZXN0JyxcbiAgICAgIHZvaWRzLFxuICAgIH0pXG5cbiAgICBpZiAoaXNCbG9ja0VtcHR5ICYmICFzdGFydHMubGVuZ3RoICYmIG1pZGRsZXMubGVuZ3RoICYmICFlbmRzLmxlbmd0aCkge1xuICAgICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7IGF0OiBibG9ja1BhdGgsIHZvaWRzIH0pXG4gICAgfVxuXG4gICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIG1pZGRsZXMsIHtcbiAgICAgIGF0OiBtaWRkbGVSZWYuY3VycmVudCEsXG4gICAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pLFxuICAgICAgbW9kZTogJ2xvd2VzdCcsXG4gICAgICB2b2lkcyxcbiAgICB9KVxuXG4gICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIGVuZHMsIHtcbiAgICAgIGF0OiBlbmRSZWYuY3VycmVudCEsXG4gICAgICBtYXRjaDogbiA9PiBUZXh0LmlzVGV4dChuKSB8fCBFZGl0b3IuaXNJbmxpbmUoZWRpdG9yLCBuKSxcbiAgICAgIG1vZGU6ICdoaWdoZXN0JyxcbiAgICAgIHZvaWRzLFxuICAgIH0pXG5cbiAgICBpZiAoIW9wdGlvbnMuYXQpIHtcbiAgICAgIGxldCBwYXRoXG5cbiAgICAgIGlmIChlbmRzLmxlbmd0aCA+IDAgJiYgZW5kUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcGF0aCA9IFBhdGgucHJldmlvdXMoZW5kUmVmLmN1cnJlbnQpXG4gICAgICB9IGVsc2UgaWYgKG1pZGRsZXMubGVuZ3RoID4gMCAmJiBtaWRkbGVSZWYuY3VycmVudCkge1xuICAgICAgICBwYXRoID0gUGF0aC5wcmV2aW91cyhtaWRkbGVSZWYuY3VycmVudClcbiAgICAgIH0gZWxzZSBpZiAoc3RhcnRSZWYuY3VycmVudCkge1xuICAgICAgICBwYXRoID0gUGF0aC5wcmV2aW91cyhzdGFydFJlZi5jdXJyZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAocGF0aCkge1xuICAgICAgICBjb25zdCBlbmQgPSBFZGl0b3IuZW5kKGVkaXRvciwgcGF0aClcbiAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBlbmQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc3RhcnRSZWYudW5yZWYoKVxuICAgIG1pZGRsZVJlZi51bnJlZigpXG4gICAgZW5kUmVmLnVucmVmKClcbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBTZWxlY3Rpb25UcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL3NlbGVjdGlvbidcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5cbmV4cG9ydCBjb25zdCBjb2xsYXBzZTogU2VsZWN0aW9uVHJhbnNmb3Jtc1snY29sbGFwc2UnXSA9IChcbiAgZWRpdG9yLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBjb25zdCB7IGVkZ2UgPSAnYW5jaG9yJyB9ID0gb3B0aW9uc1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG5cbiAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICByZXR1cm5cbiAgfSBlbHNlIGlmIChlZGdlID09PSAnYW5jaG9yJykge1xuICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgc2VsZWN0aW9uLmFuY2hvcilcbiAgfSBlbHNlIGlmIChlZGdlID09PSAnZm9jdXMnKSB7XG4gICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBzZWxlY3Rpb24uZm9jdXMpXG4gIH0gZWxzZSBpZiAoZWRnZSA9PT0gJ3N0YXJ0Jykge1xuICAgIGNvbnN0IFtzdGFydF0gPSBSYW5nZS5lZGdlcyhzZWxlY3Rpb24pXG4gICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBzdGFydClcbiAgfSBlbHNlIGlmIChlZGdlID09PSAnZW5kJykge1xuICAgIGNvbnN0IFssIGVuZF0gPSBSYW5nZS5lZGdlcyhzZWxlY3Rpb24pXG4gICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBlbmQpXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBTZWxlY3Rpb25UcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL3NlbGVjdGlvbidcblxuZXhwb3J0IGNvbnN0IGRlc2VsZWN0OiBTZWxlY3Rpb25UcmFuc2Zvcm1zWydkZXNlbGVjdCddID0gZWRpdG9yID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuXG4gIGlmIChzZWxlY3Rpb24pIHtcbiAgICBlZGl0b3IuYXBwbHkoe1xuICAgICAgdHlwZTogJ3NldF9zZWxlY3Rpb24nLFxuICAgICAgcHJvcGVydGllczogc2VsZWN0aW9uLFxuICAgICAgbmV3UHJvcGVydGllczogbnVsbCxcbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgU2VsZWN0aW9uVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9zZWxlY3Rpb24nXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5cbmV4cG9ydCBjb25zdCBtb3ZlOiBTZWxlY3Rpb25UcmFuc2Zvcm1zWydtb3ZlJ10gPSAoZWRpdG9yLCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICBjb25zdCB7IGRpc3RhbmNlID0gMSwgdW5pdCA9ICdjaGFyYWN0ZXInLCByZXZlcnNlID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgbGV0IHsgZWRnZSA9IG51bGwgfSA9IG9wdGlvbnNcblxuICBpZiAoIXNlbGVjdGlvbikge1xuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKGVkZ2UgPT09ICdzdGFydCcpIHtcbiAgICBlZGdlID0gUmFuZ2UuaXNCYWNrd2FyZChzZWxlY3Rpb24pID8gJ2ZvY3VzJyA6ICdhbmNob3InXG4gIH1cblxuICBpZiAoZWRnZSA9PT0gJ2VuZCcpIHtcbiAgICBlZGdlID0gUmFuZ2UuaXNCYWNrd2FyZChzZWxlY3Rpb24pID8gJ2FuY2hvcicgOiAnZm9jdXMnXG4gIH1cblxuICBjb25zdCB7IGFuY2hvciwgZm9jdXMgfSA9IHNlbGVjdGlvblxuICBjb25zdCBvcHRzID0geyBkaXN0YW5jZSwgdW5pdCwgaWdub3JlTm9uU2VsZWN0YWJsZTogdHJ1ZSB9XG4gIGNvbnN0IHByb3BzOiBQYXJ0aWFsPFJhbmdlPiA9IHt9XG5cbiAgaWYgKGVkZ2UgPT0gbnVsbCB8fCBlZGdlID09PSAnYW5jaG9yJykge1xuICAgIGNvbnN0IHBvaW50ID0gcmV2ZXJzZVxuICAgICAgPyBFZGl0b3IuYmVmb3JlKGVkaXRvciwgYW5jaG9yLCBvcHRzKVxuICAgICAgOiBFZGl0b3IuYWZ0ZXIoZWRpdG9yLCBhbmNob3IsIG9wdHMpXG5cbiAgICBpZiAocG9pbnQpIHtcbiAgICAgIHByb3BzLmFuY2hvciA9IHBvaW50XG4gICAgfVxuICB9XG5cbiAgaWYgKGVkZ2UgPT0gbnVsbCB8fCBlZGdlID09PSAnZm9jdXMnKSB7XG4gICAgY29uc3QgcG9pbnQgPSByZXZlcnNlXG4gICAgICA/IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBmb2N1cywgb3B0cylcbiAgICAgIDogRWRpdG9yLmFmdGVyKGVkaXRvciwgZm9jdXMsIG9wdHMpXG5cbiAgICBpZiAocG9pbnQpIHtcbiAgICAgIHByb3BzLmZvY3VzID0gcG9pbnRcbiAgICB9XG4gIH1cblxuICBUcmFuc2Zvcm1zLnNldFNlbGVjdGlvbihlZGl0b3IsIHByb3BzKVxufVxuIiwgImltcG9ydCB7IFNlbGVjdGlvblRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvc2VsZWN0aW9uJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgU2NydWJiZXIgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3NjcnViYmVyJ1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0OiBTZWxlY3Rpb25UcmFuc2Zvcm1zWydzZWxlY3QnXSA9IChlZGl0b3IsIHRhcmdldCkgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gIHRhcmdldCA9IEVkaXRvci5yYW5nZShlZGl0b3IsIHRhcmdldClcblxuICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgVHJhbnNmb3Jtcy5zZXRTZWxlY3Rpb24oZWRpdG9yLCB0YXJnZXQpXG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAoIVJhbmdlLmlzUmFuZ2UodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBXaGVuIHNldHRpbmcgdGhlIHNlbGVjdGlvbiBhbmQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIGlzIFxcYG51bGxcXGAgeW91IG11c3QgcHJvdmlkZSBhdCBsZWFzdCBhbiBcXGBhbmNob3JcXGAgYW5kIFxcYGZvY3VzXFxgLCBidXQgeW91IHBhc3NlZDogJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgIHRhcmdldFxuICAgICAgKX1gXG4gICAgKVxuICB9XG5cbiAgZWRpdG9yLmFwcGx5KHtcbiAgICB0eXBlOiAnc2V0X3NlbGVjdGlvbicsXG4gICAgcHJvcGVydGllczogc2VsZWN0aW9uLFxuICAgIG5ld1Byb3BlcnRpZXM6IHRhcmdldCxcbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBTZWxlY3Rpb25UcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL3NlbGVjdGlvbidcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5cbmV4cG9ydCBjb25zdCBzZXRQb2ludDogU2VsZWN0aW9uVHJhbnNmb3Jtc1snc2V0UG9pbnQnXSA9IChcbiAgZWRpdG9yLFxuICBwcm9wcyxcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICBsZXQgeyBlZGdlID0gJ2JvdGgnIH0gPSBvcHRpb25zXG5cbiAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGlmIChlZGdlID09PSAnc3RhcnQnKSB7XG4gICAgZWRnZSA9IFJhbmdlLmlzQmFja3dhcmQoc2VsZWN0aW9uKSA/ICdmb2N1cycgOiAnYW5jaG9yJ1xuICB9XG5cbiAgaWYgKGVkZ2UgPT09ICdlbmQnKSB7XG4gICAgZWRnZSA9IFJhbmdlLmlzQmFja3dhcmQoc2VsZWN0aW9uKSA/ICdhbmNob3InIDogJ2ZvY3VzJ1xuICB9XG5cbiAgY29uc3QgeyBhbmNob3IsIGZvY3VzIH0gPSBzZWxlY3Rpb25cbiAgY29uc3QgcG9pbnQgPSBlZGdlID09PSAnYW5jaG9yJyA/IGFuY2hvciA6IGZvY3VzXG5cbiAgVHJhbnNmb3Jtcy5zZXRTZWxlY3Rpb24oZWRpdG9yLCB7XG4gICAgW2VkZ2UgPT09ICdhbmNob3InID8gJ2FuY2hvcicgOiAnZm9jdXMnXTogeyAuLi5wb2ludCwgLi4ucHJvcHMgfSxcbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBTZWxlY3Rpb25UcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL3NlbGVjdGlvbidcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wb2ludCdcblxuZXhwb3J0IGNvbnN0IHNldFNlbGVjdGlvbjogU2VsZWN0aW9uVHJhbnNmb3Jtc1snc2V0U2VsZWN0aW9uJ10gPSAoXG4gIGVkaXRvcixcbiAgcHJvcHNcbikgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gIGNvbnN0IG9sZFByb3BzOiBQYXJ0aWFsPFJhbmdlPiB8IG51bGwgPSB7fVxuICBjb25zdCBuZXdQcm9wczogUGFydGlhbDxSYW5nZT4gPSB7fVxuXG4gIGlmICghc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpIHtcbiAgICBpZiAoXG4gICAgICAoayA9PT0gJ2FuY2hvcicgJiZcbiAgICAgICAgcHJvcHMuYW5jaG9yICE9IG51bGwgJiZcbiAgICAgICAgIVBvaW50LmVxdWFscyhwcm9wcy5hbmNob3IsIHNlbGVjdGlvbi5hbmNob3IpKSB8fFxuICAgICAgKGsgPT09ICdmb2N1cycgJiZcbiAgICAgICAgcHJvcHMuZm9jdXMgIT0gbnVsbCAmJlxuICAgICAgICAhUG9pbnQuZXF1YWxzKHByb3BzLmZvY3VzLCBzZWxlY3Rpb24uZm9jdXMpKSB8fFxuICAgICAgKGsgIT09ICdhbmNob3InICYmXG4gICAgICAgIGsgIT09ICdmb2N1cycgJiZcbiAgICAgICAgcHJvcHNbPGtleW9mIFJhbmdlPmtdICE9PSBzZWxlY3Rpb25bPGtleW9mIFJhbmdlPmtdKVxuICAgICkge1xuICAgICAgb2xkUHJvcHNbPGtleW9mIFJhbmdlPmtdID0gc2VsZWN0aW9uWzxrZXlvZiBSYW5nZT5rXVxuICAgICAgbmV3UHJvcHNbPGtleW9mIFJhbmdlPmtdID0gcHJvcHNbPGtleW9mIFJhbmdlPmtdXG4gICAgfVxuICB9XG5cbiAgaWYgKE9iamVjdC5rZXlzKG9sZFByb3BzKS5sZW5ndGggPiAwKSB7XG4gICAgZWRpdG9yLmFwcGx5KHtcbiAgICAgIHR5cGU6ICdzZXRfc2VsZWN0aW9uJyxcbiAgICAgIHByb3BlcnRpZXM6IG9sZFByb3BzLFxuICAgICAgbmV3UHJvcGVydGllczogbmV3UHJvcHMsXG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IE5vZGVUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BvaW50J1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgZ2V0RGVmYXVsdEluc2VydExvY2F0aW9uIH0gZnJvbSAnLi4vdXRpbHMnXG5cbmV4cG9ydCBjb25zdCBpbnNlcnROb2RlczogTm9kZVRyYW5zZm9ybXNbJ2luc2VydE5vZGVzJ10gPSAoXG4gIGVkaXRvcixcbiAgbm9kZXMsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3QgeyBoYW5naW5nID0gZmFsc2UsIHZvaWRzID0gZmFsc2UsIG1vZGUgPSAnbG93ZXN0JyB9ID0gb3B0aW9uc1xuICAgIGxldCB7IGF0LCBtYXRjaCwgc2VsZWN0IH0gPSBvcHRpb25zXG5cbiAgICBpZiAoTm9kZS5pc05vZGUobm9kZXMpKSB7XG4gICAgICBub2RlcyA9IFtub2Rlc11cbiAgICB9XG5cbiAgICBpZiAobm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBbbm9kZV0gPSBub2Rlc1xuXG4gICAgaWYgKCFhdCkge1xuICAgICAgYXQgPSBnZXREZWZhdWx0SW5zZXJ0TG9jYXRpb24oZWRpdG9yKVxuICAgICAgaWYgKHNlbGVjdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgc2VsZWN0ID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzZWxlY3QgPT0gbnVsbCkge1xuICAgICAgc2VsZWN0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICAgIGlmICghaGFuZ2luZykge1xuICAgICAgICBhdCA9IEVkaXRvci51bmhhbmdSYW5nZShlZGl0b3IsIGF0LCB7IHZvaWRzIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChSYW5nZS5pc0NvbGxhcHNlZChhdCkpIHtcbiAgICAgICAgYXQgPSBhdC5hbmNob3JcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IFssIGVuZF0gPSBSYW5nZS5lZGdlcyhhdClcbiAgICAgICAgY29uc3QgcG9pbnRSZWYgPSBFZGl0b3IucG9pbnRSZWYoZWRpdG9yLCBlbmQpXG4gICAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwgeyBhdCB9KVxuICAgICAgICBhdCA9IHBvaW50UmVmLnVucmVmKCkhXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFBvaW50LmlzUG9pbnQoYXQpKSB7XG4gICAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgICAgICBpZiAoVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICAgICAgICBtYXRjaCA9IG4gPT4gVGV4dC5pc1RleHQobilcbiAgICAgICAgfSBlbHNlIGlmIChlZGl0b3IuaXNJbmxpbmUobm9kZSkpIHtcbiAgICAgICAgICBtYXRjaCA9IG4gPT4gVGV4dC5pc1RleHQobikgfHwgRWRpdG9yLmlzSW5saW5lKGVkaXRvciwgbilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXRjaCA9IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFtlbnRyeV0gPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiBhdC5wYXRoLFxuICAgICAgICBtYXRjaCxcbiAgICAgICAgbW9kZSxcbiAgICAgICAgdm9pZHMsXG4gICAgICB9KVxuXG4gICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgY29uc3QgWywgbWF0Y2hQYXRoXSA9IGVudHJ5XG4gICAgICAgIGNvbnN0IHBhdGhSZWYgPSBFZGl0b3IucGF0aFJlZihlZGl0b3IsIG1hdGNoUGF0aClcbiAgICAgICAgY29uc3QgaXNBdEVuZCA9IEVkaXRvci5pc0VuZChlZGl0b3IsIGF0LCBtYXRjaFBhdGgpXG4gICAgICAgIFRyYW5zZm9ybXMuc3BsaXROb2RlcyhlZGl0b3IsIHsgYXQsIG1hdGNoLCBtb2RlLCB2b2lkcyB9KVxuICAgICAgICBjb25zdCBwYXRoID0gcGF0aFJlZi51bnJlZigpIVxuICAgICAgICBhdCA9IGlzQXRFbmQgPyBQYXRoLm5leHQocGF0aCkgOiBwYXRoXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwYXJlbnRQYXRoID0gUGF0aC5wYXJlbnQoYXQpXG4gICAgbGV0IGluZGV4ID0gYXRbYXQubGVuZ3RoIC0gMV1cblxuICAgIGlmICghdm9pZHMgJiYgRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0OiBwYXJlbnRQYXRoIH0pKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZXMpIHtcbiAgICAgIGNvbnN0IHBhdGggPSBwYXJlbnRQYXRoLmNvbmNhdChpbmRleClcbiAgICAgIGluZGV4KytcbiAgICAgIGVkaXRvci5hcHBseSh7IHR5cGU6ICdpbnNlcnRfbm9kZScsIHBhdGgsIG5vZGUgfSlcbiAgICAgIGF0ID0gUGF0aC5uZXh0KGF0KVxuICAgIH1cbiAgICBhdCA9IFBhdGgucHJldmlvdXMoYXQpXG5cbiAgICBpZiAoc2VsZWN0KSB7XG4gICAgICBjb25zdCBwb2ludCA9IEVkaXRvci5lbmQoZWRpdG9yLCBhdClcblxuICAgICAgaWYgKHBvaW50KSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgcG9pbnQpXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwgImltcG9ydCB7IE5vZGVUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBtYXRjaFBhdGggfSBmcm9tICcuLi91dGlscy9tYXRjaC1wYXRoJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IEFuY2VzdG9yLCBOb2RlRW50cnkgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuXG5leHBvcnQgY29uc3QgbGlmdE5vZGVzOiBOb2RlVHJhbnNmb3Jtc1snbGlmdE5vZGVzJ10gPSAoXG4gIGVkaXRvcixcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCB7IGF0ID0gZWRpdG9yLnNlbGVjdGlvbiwgbW9kZSA9ICdsb3dlc3QnLCB2b2lkcyA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgbGV0IHsgbWF0Y2ggfSA9IG9wdGlvbnNcblxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICBtYXRjaCA9IFBhdGguaXNQYXRoKGF0KVxuICAgICAgICA/IG1hdGNoUGF0aChlZGl0b3IsIGF0KVxuICAgICAgICA6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICAgIH1cblxuICAgIGlmICghYXQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IG1hdGNoZXMgPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7IGF0LCBtYXRjaCwgbW9kZSwgdm9pZHMgfSlcbiAgICBjb25zdCBwYXRoUmVmcyA9IEFycmF5LmZyb20obWF0Y2hlcywgKFssIHBdKSA9PiBFZGl0b3IucGF0aFJlZihlZGl0b3IsIHApKVxuXG4gICAgZm9yIChjb25zdCBwYXRoUmVmIG9mIHBhdGhSZWZzKSB7XG4gICAgICBjb25zdCBwYXRoID0gcGF0aFJlZi51bnJlZigpIVxuXG4gICAgICBpZiAocGF0aC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgQ2Fubm90IGxpZnQgbm9kZSBhdCBhIHBhdGggWyR7cGF0aH1dIGJlY2F1c2UgaXQgaGFzIGEgZGVwdGggb2YgbGVzcyB0aGFuIFxcYDJcXGAuYFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhcmVudE5vZGVFbnRyeSA9IEVkaXRvci5ub2RlKGVkaXRvciwgUGF0aC5wYXJlbnQocGF0aCkpXG4gICAgICBjb25zdCBbcGFyZW50LCBwYXJlbnRQYXRoXSA9IHBhcmVudE5vZGVFbnRyeSBhcyBOb2RlRW50cnk8QW5jZXN0b3I+XG4gICAgICBjb25zdCBpbmRleCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXVxuICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHBhcmVudC5jaGlsZHJlblxuXG4gICAgICBpZiAobGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvbnN0IHRvUGF0aCA9IFBhdGgubmV4dChwYXJlbnRQYXRoKVxuICAgICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHsgYXQ6IHBhdGgsIHRvOiB0b1BhdGgsIHZvaWRzIH0pXG4gICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7IGF0OiBwYXJlbnRQYXRoLCB2b2lkcyB9KVxuICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHsgYXQ6IHBhdGgsIHRvOiBwYXJlbnRQYXRoLCB2b2lkcyB9KVxuICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gbGVuZ3RoIC0gMSkge1xuICAgICAgICBjb25zdCB0b1BhdGggPSBQYXRoLm5leHQocGFyZW50UGF0aClcbiAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7IGF0OiBwYXRoLCB0bzogdG9QYXRoLCB2b2lkcyB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc3BsaXRQYXRoID0gUGF0aC5uZXh0KHBhdGgpXG4gICAgICAgIGNvbnN0IHRvUGF0aCA9IFBhdGgubmV4dChwYXJlbnRQYXRoKVxuICAgICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7IGF0OiBzcGxpdFBhdGgsIHZvaWRzIH0pXG4gICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwgeyBhdDogcGF0aCwgdG86IHRvUGF0aCwgdm9pZHMgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgTm9kZVRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IFNjcnViYmVyIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9zY3J1YmJlcidcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5cbmNvbnN0IGhhc1NpbmdsZUNoaWxkTmVzdCA9IChlZGl0b3I6IEVkaXRvciwgbm9kZTogTm9kZSk6IGJvb2xlYW4gPT4ge1xuICBpZiAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gbm9kZSBhcyBFbGVtZW50XG4gICAgaWYgKEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBub2RlKSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGVsc2UgaWYgKGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gaGFzU2luZ2xlQ2hpbGROZXN0KGVkaXRvciwgZWxlbWVudC5jaGlsZHJlblswXSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9IGVsc2UgaWYgKEVkaXRvci5pc0VkaXRvcihub2RlKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9IGVsc2Uge1xuICAgIHJldHVybiB0cnVlXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IG1lcmdlTm9kZXM6IE5vZGVUcmFuc2Zvcm1zWydtZXJnZU5vZGVzJ10gPSAoXG4gIGVkaXRvcixcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBsZXQgeyBtYXRjaCwgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uIH0gPSBvcHRpb25zXG4gICAgY29uc3QgeyBoYW5naW5nID0gZmFsc2UsIHZvaWRzID0gZmFsc2UsIG1vZGUgPSAnbG93ZXN0JyB9ID0gb3B0aW9uc1xuXG4gICAgaWYgKCFhdCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICAgIGlmIChQYXRoLmlzUGF0aChhdCkpIHtcbiAgICAgICAgY29uc3QgW3BhcmVudF0gPSBFZGl0b3IucGFyZW50KGVkaXRvciwgYXQpXG4gICAgICAgIG1hdGNoID0gbiA9PiBwYXJlbnQuY2hpbGRyZW4uaW5jbHVkZXMobilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hdGNoID0gbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFoYW5naW5nICYmIFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICBhdCA9IEVkaXRvci51bmhhbmdSYW5nZShlZGl0b3IsIGF0LCB7IHZvaWRzIH0pXG4gICAgfVxuXG4gICAgaWYgKFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICBpZiAoUmFuZ2UuaXNDb2xsYXBzZWQoYXQpKSB7XG4gICAgICAgIGF0ID0gYXQuYW5jaG9yXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBbLCBlbmRdID0gUmFuZ2UuZWRnZXMoYXQpXG4gICAgICAgIGNvbnN0IHBvaW50UmVmID0gRWRpdG9yLnBvaW50UmVmKGVkaXRvciwgZW5kKVxuICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHsgYXQgfSlcbiAgICAgICAgYXQgPSBwb2ludFJlZi51bnJlZigpIVxuXG4gICAgICAgIGlmIChvcHRpb25zLmF0ID09IG51bGwpIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIGF0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgW2N1cnJlbnRdID0gRWRpdG9yLm5vZGVzKGVkaXRvciwgeyBhdCwgbWF0Y2gsIHZvaWRzLCBtb2RlIH0pXG4gICAgY29uc3QgcHJldiA9IEVkaXRvci5wcmV2aW91cyhlZGl0b3IsIHsgYXQsIG1hdGNoLCB2b2lkcywgbW9kZSB9KVxuXG4gICAgaWYgKCFjdXJyZW50IHx8ICFwcmV2KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBbbm9kZSwgcGF0aF0gPSBjdXJyZW50XG4gICAgY29uc3QgW3ByZXZOb2RlLCBwcmV2UGF0aF0gPSBwcmV2XG5cbiAgICBpZiAocGF0aC5sZW5ndGggPT09IDAgfHwgcHJldlBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBuZXdQYXRoID0gUGF0aC5uZXh0KHByZXZQYXRoKVxuICAgIGNvbnN0IGNvbW1vblBhdGggPSBQYXRoLmNvbW1vbihwYXRoLCBwcmV2UGF0aClcbiAgICBjb25zdCBpc1ByZXZpb3VzU2libGluZyA9IFBhdGguaXNTaWJsaW5nKHBhdGgsIHByZXZQYXRoKVxuICAgIGNvbnN0IGxldmVscyA9IEFycmF5LmZyb20oRWRpdG9yLmxldmVscyhlZGl0b3IsIHsgYXQ6IHBhdGggfSksIChbbl0pID0+IG4pXG4gICAgICAuc2xpY2UoY29tbW9uUGF0aC5sZW5ndGgpXG4gICAgICAuc2xpY2UoMCwgLTEpXG5cbiAgICAvLyBEZXRlcm1pbmUgaWYgdGhlIG1lcmdlIHdpbGwgbGVhdmUgYW4gYW5jZXN0b3Igb2YgdGhlIHBhdGggZW1wdHkgYXMgYVxuICAgIC8vIHJlc3VsdCwgaW4gd2hpY2ggY2FzZSB3ZSdsbCB3YW50IHRvIHJlbW92ZSBpdCBhZnRlciBtZXJnaW5nLlxuICAgIGNvbnN0IGVtcHR5QW5jZXN0b3IgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICBhdDogcGF0aCxcbiAgICAgIG1vZGU6ICdoaWdoZXN0JyxcbiAgICAgIG1hdGNoOiBuID0+IGxldmVscy5pbmNsdWRlcyhuKSAmJiBoYXNTaW5nbGVDaGlsZE5lc3QoZWRpdG9yLCBuKSxcbiAgICB9KVxuXG4gICAgY29uc3QgZW1wdHlSZWYgPSBlbXB0eUFuY2VzdG9yICYmIEVkaXRvci5wYXRoUmVmKGVkaXRvciwgZW1wdHlBbmNlc3RvclsxXSlcbiAgICBsZXQgcHJvcGVydGllc1xuICAgIGxldCBwb3NpdGlvblxuXG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIG5vZGVzIGFyZSBlcXVpdmFsZW50LCBhbmQgZmlndXJlIG91dCB3aGF0IHRoZSBwb3NpdGlvblxuICAgIC8vIGFuZCBleHRyYSBwcm9wZXJ0aWVzIG9mIHRoZSBtZXJnZSB3aWxsIGJlLlxuICAgIGlmIChUZXh0LmlzVGV4dChub2RlKSAmJiBUZXh0LmlzVGV4dChwcmV2Tm9kZSkpIHtcbiAgICAgIGNvbnN0IHsgdGV4dCwgLi4ucmVzdCB9ID0gbm9kZVxuICAgICAgcG9zaXRpb24gPSBwcmV2Tm9kZS50ZXh0Lmxlbmd0aFxuICAgICAgcHJvcGVydGllcyA9IHJlc3QgYXMgUGFydGlhbDxUZXh0PlxuICAgIH0gZWxzZSBpZiAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiYgRWxlbWVudC5pc0VsZW1lbnQocHJldk5vZGUpKSB7XG4gICAgICBjb25zdCB7IGNoaWxkcmVuLCAuLi5yZXN0IH0gPSBub2RlXG4gICAgICBwb3NpdGlvbiA9IHByZXZOb2RlLmNoaWxkcmVuLmxlbmd0aFxuICAgICAgcHJvcGVydGllcyA9IHJlc3QgYXMgUGFydGlhbDxFbGVtZW50PlxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgbWVyZ2UgdGhlIG5vZGUgYXQgcGF0aCBbJHtwYXRofV0gd2l0aCB0aGUgcHJldmlvdXMgc2libGluZyBiZWNhdXNlIGl0IGlzIG5vdCB0aGUgc2FtZSBraW5kOiAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgICBub2RlXG4gICAgICAgICl9ICR7U2NydWJiZXIuc3RyaW5naWZ5KHByZXZOb2RlKX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIG5vZGUgaXNuJ3QgYWxyZWFkeSB0aGUgbmV4dCBzaWJsaW5nIG9mIHRoZSBwcmV2aW91cyBub2RlLCBtb3ZlXG4gICAgLy8gaXQgc28gdGhhdCBpdCBpcyBiZWZvcmUgbWVyZ2luZy5cbiAgICBpZiAoIWlzUHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHsgYXQ6IHBhdGgsIHRvOiBuZXdQYXRoLCB2b2lkcyB9KVxuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIHdhcyBnb2luZyB0byBiZSBhbiBlbXB0eSBhbmNlc3RvciBvZiB0aGUgbm9kZSB0aGF0IHdhcyBtZXJnZWQsXG4gICAgLy8gd2UgcmVtb3ZlIGl0IGZyb20gdGhlIHRyZWUuXG4gICAgaWYgKGVtcHR5UmVmKSB7XG4gICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwgeyBhdDogZW1wdHlSZWYuY3VycmVudCEsIHZvaWRzIH0pXG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHRhcmdldCBub2RlIHRoYXQgd2UncmUgbWVyZ2luZyB3aXRoIGlzIGVtcHR5LCByZW1vdmUgaXQgaW5zdGVhZFxuICAgIC8vIG9mIG1lcmdpbmcgdGhlIHR3by4gVGhpcyBpcyBhIGNvbW1vbiByaWNoIHRleHQgZWRpdG9yIGJlaGF2aW9yIHRvXG4gICAgLy8gcHJldmVudCBsb3NpbmcgZm9ybWF0dGluZyB3aGVuIGRlbGV0aW5nIGVudGlyZSBub2RlcyB3aGVuIHlvdSBoYXZlIGFcbiAgICAvLyBoYW5naW5nIHNlbGVjdGlvbi5cbiAgICAvLyBpZiBwcmV2Tm9kZSBpcyBmaXJzdCBjaGlsZCBpbiBwYXJlbnQsZG9uJ3QgcmVtb3ZlIGl0LlxuICAgIGlmIChcbiAgICAgIChFbGVtZW50LmlzRWxlbWVudChwcmV2Tm9kZSkgJiYgRWRpdG9yLmlzRW1wdHkoZWRpdG9yLCBwcmV2Tm9kZSkpIHx8XG4gICAgICAoVGV4dC5pc1RleHQocHJldk5vZGUpICYmXG4gICAgICAgIHByZXZOb2RlLnRleHQgPT09ICcnICYmXG4gICAgICAgIHByZXZQYXRoW3ByZXZQYXRoLmxlbmd0aCAtIDFdICE9PSAwKVxuICAgICkge1xuICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHsgYXQ6IHByZXZQYXRoLCB2b2lkcyB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBlZGl0b3IuYXBwbHkoe1xuICAgICAgICB0eXBlOiAnbWVyZ2Vfbm9kZScsXG4gICAgICAgIHBhdGg6IG5ld1BhdGgsXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgICBwcm9wZXJ0aWVzLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZW1wdHlSZWYpIHtcbiAgICAgIGVtcHR5UmVmLnVucmVmKClcbiAgICB9XG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgTm9kZVRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IG1hdGNoUGF0aCB9IGZyb20gJy4uL3V0aWxzL21hdGNoLXBhdGgnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuXG5leHBvcnQgY29uc3QgbW92ZU5vZGVzOiBOb2RlVHJhbnNmb3Jtc1snbW92ZU5vZGVzJ10gPSAoZWRpdG9yLCBvcHRpb25zKSA9PiB7XG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgdG8sXG4gICAgICBhdCA9IGVkaXRvci5zZWxlY3Rpb24sXG4gICAgICBtb2RlID0gJ2xvd2VzdCcsXG4gICAgICB2b2lkcyA9IGZhbHNlLFxuICAgIH0gPSBvcHRpb25zXG4gICAgbGV0IHsgbWF0Y2ggfSA9IG9wdGlvbnNcblxuICAgIGlmICghYXQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICBtYXRjaCA9IFBhdGguaXNQYXRoKGF0KVxuICAgICAgICA/IG1hdGNoUGF0aChlZGl0b3IsIGF0KVxuICAgICAgICA6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICAgIH1cblxuICAgIGNvbnN0IHRvUmVmID0gRWRpdG9yLnBhdGhSZWYoZWRpdG9yLCB0bylcbiAgICBjb25zdCB0YXJnZXRzID0gRWRpdG9yLm5vZGVzKGVkaXRvciwgeyBhdCwgbWF0Y2gsIG1vZGUsIHZvaWRzIH0pXG4gICAgY29uc3QgcGF0aFJlZnMgPSBBcnJheS5mcm9tKHRhcmdldHMsIChbLCBwXSkgPT4gRWRpdG9yLnBhdGhSZWYoZWRpdG9yLCBwKSlcblxuICAgIGZvciAoY29uc3QgcGF0aFJlZiBvZiBwYXRoUmVmcykge1xuICAgICAgY29uc3QgcGF0aCA9IHBhdGhSZWYudW5yZWYoKSFcbiAgICAgIGNvbnN0IG5ld1BhdGggPSB0b1JlZi5jdXJyZW50IVxuXG4gICAgICBpZiAocGF0aC5sZW5ndGggIT09IDApIHtcbiAgICAgICAgZWRpdG9yLmFwcGx5KHsgdHlwZTogJ21vdmVfbm9kZScsIHBhdGgsIG5ld1BhdGggfSlcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICB0b1JlZi5jdXJyZW50ICYmXG4gICAgICAgIFBhdGguaXNTaWJsaW5nKG5ld1BhdGgsIHBhdGgpICYmXG4gICAgICAgIFBhdGguaXNBZnRlcihuZXdQYXRoLCBwYXRoKVxuICAgICAgKSB7XG4gICAgICAgIC8vIFdoZW4gcGVyZm9ybWluZyBhIHNpYmxpbmcgbW92ZSB0byBhIGxhdGVyIGluZGV4LCB0aGUgcGF0aCBhdCB0aGUgZGVzdGluYXRpb24gaXMgc2hpZnRlZFxuICAgICAgICAvLyB0byBiZWZvcmUgdGhlIGluc2VydGlvbiBwb2ludCBpbnN0ZWFkIG9mIGFmdGVyLiBUbyBlbnN1cmUgb3VyIGdyb3VwIG9mIG5vZGVzIGFyZSBpbnNlcnRlZFxuICAgICAgICAvLyBpbiB0aGUgY29ycmVjdCBvcmRlciB3ZSBpbmNyZW1lbnQgdG9SZWYgdG8gYWNjb3VudCBmb3IgdGhhdFxuICAgICAgICB0b1JlZi5jdXJyZW50ID0gUGF0aC5uZXh0KHRvUmVmLmN1cnJlbnQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdG9SZWYudW5yZWYoKVxuICB9KVxufVxuIiwgImltcG9ydCB7IE5vZGVUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBtYXRjaFBhdGggfSBmcm9tICcuLi91dGlscy9tYXRjaC1wYXRoJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcblxuZXhwb3J0IGNvbnN0IHJlbW92ZU5vZGVzOiBOb2RlVHJhbnNmb3Jtc1sncmVtb3ZlTm9kZXMnXSA9IChcbiAgZWRpdG9yLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IHsgaGFuZ2luZyA9IGZhbHNlLCB2b2lkcyA9IGZhbHNlLCBtb2RlID0gJ2xvd2VzdCcgfSA9IG9wdGlvbnNcbiAgICBsZXQgeyBhdCA9IGVkaXRvci5zZWxlY3Rpb24sIG1hdGNoIH0gPSBvcHRpb25zXG5cbiAgICBpZiAoIWF0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgICAgbWF0Y2ggPSBQYXRoLmlzUGF0aChhdClcbiAgICAgICAgPyBtYXRjaFBhdGgoZWRpdG9yLCBhdClcbiAgICAgICAgOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICB9XG5cbiAgICBpZiAoIWhhbmdpbmcgJiYgUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICAgIGF0ID0gRWRpdG9yLnVuaGFuZ1JhbmdlKGVkaXRvciwgYXQsIHsgdm9pZHMgfSlcbiAgICB9XG5cbiAgICBjb25zdCBkZXB0aHMgPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7IGF0LCBtYXRjaCwgbW9kZSwgdm9pZHMgfSlcbiAgICBjb25zdCBwYXRoUmVmcyA9IEFycmF5LmZyb20oZGVwdGhzLCAoWywgcF0pID0+IEVkaXRvci5wYXRoUmVmKGVkaXRvciwgcCkpXG5cbiAgICBmb3IgKGNvbnN0IHBhdGhSZWYgb2YgcGF0aFJlZnMpIHtcbiAgICAgIGNvbnN0IHBhdGggPSBwYXRoUmVmLnVucmVmKCkhXG5cbiAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgIGNvbnN0IFtub2RlXSA9IEVkaXRvci5ub2RlKGVkaXRvciwgcGF0aClcbiAgICAgICAgZWRpdG9yLmFwcGx5KHsgdHlwZTogJ3JlbW92ZV9ub2RlJywgcGF0aCwgbm9kZSB9KVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBOb2RlVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgbWF0Y2hQYXRoIH0gZnJvbSAnLi4vdXRpbHMvbWF0Y2gtcGF0aCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcblxuZXhwb3J0IGNvbnN0IHNldE5vZGVzOiBOb2RlVHJhbnNmb3Jtc1snc2V0Tm9kZXMnXSA9IChcbiAgZWRpdG9yLFxuICBwcm9wczogUGFydGlhbDxOb2RlPixcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBsZXQgeyBtYXRjaCwgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uLCBjb21wYXJlLCBtZXJnZSB9ID0gb3B0aW9uc1xuICAgIGNvbnN0IHtcbiAgICAgIGhhbmdpbmcgPSBmYWxzZSxcbiAgICAgIG1vZGUgPSAnbG93ZXN0JyxcbiAgICAgIHNwbGl0ID0gZmFsc2UsXG4gICAgICB2b2lkcyA9IGZhbHNlLFxuICAgIH0gPSBvcHRpb25zXG5cbiAgICBpZiAoIWF0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgICAgbWF0Y2ggPSBQYXRoLmlzUGF0aChhdClcbiAgICAgICAgPyBtYXRjaFBhdGgoZWRpdG9yLCBhdClcbiAgICAgICAgOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICB9XG5cbiAgICBpZiAoIWhhbmdpbmcgJiYgUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICAgIGF0ID0gRWRpdG9yLnVuaGFuZ1JhbmdlKGVkaXRvciwgYXQsIHsgdm9pZHMgfSlcbiAgICB9XG5cbiAgICBpZiAoc3BsaXQgJiYgUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgUmFuZ2UuaXNDb2xsYXBzZWQoYXQpICYmXG4gICAgICAgIEVkaXRvci5sZWFmKGVkaXRvciwgYXQuYW5jaG9yKVswXS50ZXh0Lmxlbmd0aCA+IDBcbiAgICAgICkge1xuICAgICAgICAvLyBJZiB0aGUgcmFuZ2UgaXMgY29sbGFwc2VkIGluIGEgbm9uLWVtcHR5IG5vZGUgYW5kICdzcGxpdCcgaXMgdHJ1ZSwgdGhlcmUncyBub3RoaW5nIHRvXG4gICAgICAgIC8vIHNldCB0aGF0IHdvbid0IGdldCBub3JtYWxpemVkIGF3YXlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCByYW5nZVJlZiA9IEVkaXRvci5yYW5nZVJlZihlZGl0b3IsIGF0LCB7IGFmZmluaXR5OiAnaW53YXJkJyB9KVxuICAgICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXMoYXQpXG4gICAgICBjb25zdCBzcGxpdE1vZGUgPSBtb2RlID09PSAnbG93ZXN0JyA/ICdsb3dlc3QnIDogJ2hpZ2hlc3QnXG4gICAgICBjb25zdCBlbmRBdEVuZE9mTm9kZSA9IEVkaXRvci5pc0VuZChlZGl0b3IsIGVuZCwgZW5kLnBhdGgpXG4gICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiBlbmQsXG4gICAgICAgIG1hdGNoLFxuICAgICAgICBtb2RlOiBzcGxpdE1vZGUsXG4gICAgICAgIHZvaWRzLFxuICAgICAgICBhbHdheXM6ICFlbmRBdEVuZE9mTm9kZSxcbiAgICAgIH0pXG4gICAgICBjb25zdCBzdGFydEF0U3RhcnRPZk5vZGUgPSBFZGl0b3IuaXNTdGFydChlZGl0b3IsIHN0YXJ0LCBzdGFydC5wYXRoKVxuICAgICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdDogc3RhcnQsXG4gICAgICAgIG1hdGNoLFxuICAgICAgICBtb2RlOiBzcGxpdE1vZGUsXG4gICAgICAgIHZvaWRzLFxuICAgICAgICBhbHdheXM6ICFzdGFydEF0U3RhcnRPZk5vZGUsXG4gICAgICB9KVxuICAgICAgYXQgPSByYW5nZVJlZi51bnJlZigpIVxuXG4gICAgICBpZiAob3B0aW9ucy5hdCA9PSBudWxsKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgYXQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjb21wYXJlKSB7XG4gICAgICBjb21wYXJlID0gKHByb3AsIG5vZGVQcm9wKSA9PiBwcm9wICE9PSBub2RlUHJvcFxuICAgIH1cblxuICAgIGZvciAoY29uc3QgW25vZGUsIHBhdGhdIG9mIEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICAgIGF0LFxuICAgICAgbWF0Y2gsXG4gICAgICBtb2RlLFxuICAgICAgdm9pZHMsXG4gICAgfSkpIHtcbiAgICAgIGNvbnN0IHByb3BlcnRpZXM6IFBhcnRpYWw8Tm9kZT4gPSB7fVxuICAgICAgLy8gRklYTUU6IGlzIHRoaXMgY29ycmVjdD9cbiAgICAgIGNvbnN0IG5ld1Byb3BlcnRpZXM6IFBhcnRpYWw8Tm9kZT4gJiB7IFtrZXk6IHN0cmluZ106IHVua25vd24gfSA9IHt9XG5cbiAgICAgIC8vIFlvdSBjYW4ndCBzZXQgcHJvcGVydGllcyBvbiB0aGUgZWRpdG9yIG5vZGUuXG4gICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgbGV0IGhhc0NoYW5nZXMgPSBmYWxzZVxuXG4gICAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpIHtcbiAgICAgICAgaWYgKGsgPT09ICdjaGlsZHJlbicgfHwgayA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb21wYXJlKHByb3BzWzxrZXlvZiBOb2RlPmtdLCBub2RlWzxrZXlvZiBOb2RlPmtdKSkge1xuICAgICAgICAgIGhhc0NoYW5nZXMgPSB0cnVlXG4gICAgICAgICAgLy8gT21pdCBuZXcgcHJvcGVydGllcyBmcm9tIHRoZSBvbGQgcHJvcGVydGllcyBsaXN0XG4gICAgICAgICAgaWYgKG5vZGUuaGFzT3duUHJvcGVydHkoaykpXG4gICAgICAgICAgICBwcm9wZXJ0aWVzWzxrZXlvZiBOb2RlPmtdID0gbm9kZVs8a2V5b2YgTm9kZT5rXVxuICAgICAgICAgIC8vIE9taXQgcHJvcGVydGllcyB0aGF0IGhhdmUgYmVlbiByZW1vdmVkIGZyb20gdGhlIG5ldyBwcm9wZXJ0aWVzIGxpc3RcbiAgICAgICAgICBpZiAobWVyZ2UpIHtcbiAgICAgICAgICAgIGlmIChwcm9wc1s8a2V5b2YgTm9kZT5rXSAhPSBudWxsKVxuICAgICAgICAgICAgICBuZXdQcm9wZXJ0aWVzWzxrZXlvZiBOb2RlPmtdID0gbWVyZ2UoXG4gICAgICAgICAgICAgICAgbm9kZVs8a2V5b2YgTm9kZT5rXSxcbiAgICAgICAgICAgICAgICBwcm9wc1s8a2V5b2YgTm9kZT5rXVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcm9wc1s8a2V5b2YgTm9kZT5rXSAhPSBudWxsKVxuICAgICAgICAgICAgICBuZXdQcm9wZXJ0aWVzWzxrZXlvZiBOb2RlPmtdID0gcHJvcHNbPGtleW9mIE5vZGU+a11cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGhhc0NoYW5nZXMpIHtcbiAgICAgICAgZWRpdG9yLmFwcGx5KHtcbiAgICAgICAgICB0eXBlOiAnc2V0X25vZGUnLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgcHJvcGVydGllcyxcbiAgICAgICAgICBuZXdQcm9wZXJ0aWVzLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBOb2RlVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IFBvaW50UmVmIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wb2ludC1yZWYnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wb2ludCdcblxuLyoqXG4gKiBDb252ZXJ0IGEgcmFuZ2UgaW50byBhIHBvaW50IGJ5IGRlbGV0aW5nIGl0J3MgY29udGVudC5cbiAqL1xuY29uc3QgZGVsZXRlUmFuZ2UgPSAoZWRpdG9yOiBFZGl0b3IsIHJhbmdlOiBSYW5nZSk6IFBvaW50IHwgbnVsbCA9PiB7XG4gIGlmIChSYW5nZS5pc0NvbGxhcHNlZChyYW5nZSkpIHtcbiAgICByZXR1cm4gcmFuZ2UuYW5jaG9yXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgWywgZW5kXSA9IFJhbmdlLmVkZ2VzKHJhbmdlKVxuICAgIGNvbnN0IHBvaW50UmVmID0gRWRpdG9yLnBvaW50UmVmKGVkaXRvciwgZW5kKVxuICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwgeyBhdDogcmFuZ2UgfSlcbiAgICByZXR1cm4gcG9pbnRSZWYudW5yZWYoKVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzcGxpdE5vZGVzOiBOb2RlVHJhbnNmb3Jtc1snc3BsaXROb2RlcyddID0gKFxuICBlZGl0b3IsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3QgeyBtb2RlID0gJ2xvd2VzdCcsIHZvaWRzID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICBsZXQgeyBtYXRjaCwgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uLCBoZWlnaHQgPSAwLCBhbHdheXMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICAgIG1hdGNoID0gbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgfVxuXG4gICAgaWYgKFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICBhdCA9IGRlbGV0ZVJhbmdlKGVkaXRvciwgYXQpXG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHRhcmdldCBpcyBhIHBhdGgsIHRoZSBkZWZhdWx0IGhlaWdodC1za2lwcGluZyBhbmQgcG9zaXRpb25cbiAgICAvLyBjb3VudGVycyBuZWVkIHRvIGFjY291bnQgZm9yIHVzIHBvdGVudGlhbGx5IHNwbGl0dGluZyBhdCBhIG5vbi1sZWFmLlxuICAgIGlmIChQYXRoLmlzUGF0aChhdCkpIHtcbiAgICAgIGNvbnN0IHBhdGggPSBhdFxuICAgICAgY29uc3QgcG9pbnQgPSBFZGl0b3IucG9pbnQoZWRpdG9yLCBwYXRoKVxuICAgICAgY29uc3QgW3BhcmVudF0gPSBFZGl0b3IucGFyZW50KGVkaXRvciwgcGF0aClcbiAgICAgIG1hdGNoID0gbiA9PiBuID09PSBwYXJlbnRcbiAgICAgIGhlaWdodCA9IHBvaW50LnBhdGgubGVuZ3RoIC0gcGF0aC5sZW5ndGggKyAxXG4gICAgICBhdCA9IHBvaW50XG4gICAgICBhbHdheXMgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKCFhdCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgYmVmb3JlUmVmID0gRWRpdG9yLnBvaW50UmVmKGVkaXRvciwgYXQsIHtcbiAgICAgIGFmZmluaXR5OiAnYmFja3dhcmQnLFxuICAgIH0pXG4gICAgbGV0IGFmdGVyUmVmOiBQb2ludFJlZiB8IHVuZGVmaW5lZFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBbaGlnaGVzdF0gPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7IGF0LCBtYXRjaCwgbW9kZSwgdm9pZHMgfSlcblxuICAgICAgaWYgKCFoaWdoZXN0KSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCB2b2lkTWF0Y2ggPSBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQsIG1vZGU6ICdoaWdoZXN0JyB9KVxuICAgICAgY29uc3QgbnVkZ2UgPSAwXG5cbiAgICAgIGlmICghdm9pZHMgJiYgdm9pZE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IFt2b2lkTm9kZSwgdm9pZFBhdGhdID0gdm9pZE1hdGNoXG5cbiAgICAgICAgaWYgKEVsZW1lbnQuaXNFbGVtZW50KHZvaWROb2RlKSAmJiBlZGl0b3IuaXNJbmxpbmUodm9pZE5vZGUpKSB7XG4gICAgICAgICAgbGV0IGFmdGVyID0gRWRpdG9yLmFmdGVyKGVkaXRvciwgdm9pZFBhdGgpXG5cbiAgICAgICAgICBpZiAoIWFmdGVyKSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0geyB0ZXh0OiAnJyB9XG4gICAgICAgICAgICBjb25zdCBhZnRlclBhdGggPSBQYXRoLm5leHQodm9pZFBhdGgpXG4gICAgICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgdGV4dCwgeyBhdDogYWZ0ZXJQYXRoLCB2b2lkcyB9KVxuICAgICAgICAgICAgYWZ0ZXIgPSBFZGl0b3IucG9pbnQoZWRpdG9yLCBhZnRlclBhdGgpIVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGF0ID0gYWZ0ZXJcbiAgICAgICAgICBhbHdheXMgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaWJsaW5nSGVpZ2h0ID0gYXQucGF0aC5sZW5ndGggLSB2b2lkUGF0aC5sZW5ndGhcbiAgICAgICAgaGVpZ2h0ID0gc2libGluZ0hlaWdodCArIDFcbiAgICAgICAgYWx3YXlzID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBhZnRlclJlZiA9IEVkaXRvci5wb2ludFJlZihlZGl0b3IsIGF0KVxuICAgICAgY29uc3QgZGVwdGggPSBhdC5wYXRoLmxlbmd0aCAtIGhlaWdodFxuICAgICAgY29uc3QgWywgaGlnaGVzdFBhdGhdID0gaGlnaGVzdFxuICAgICAgY29uc3QgbG93ZXN0UGF0aCA9IGF0LnBhdGguc2xpY2UoMCwgZGVwdGgpXG4gICAgICBsZXQgcG9zaXRpb24gPSBoZWlnaHQgPT09IDAgPyBhdC5vZmZzZXQgOiBhdC5wYXRoW2RlcHRoXSArIG51ZGdlXG5cbiAgICAgIGZvciAoY29uc3QgW25vZGUsIHBhdGhdIG9mIEVkaXRvci5sZXZlbHMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiBsb3dlc3RQYXRoLFxuICAgICAgICByZXZlcnNlOiB0cnVlLFxuICAgICAgICB2b2lkcyxcbiAgICAgIH0pKSB7XG4gICAgICAgIGxldCBzcGxpdCA9IGZhbHNlXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHBhdGgubGVuZ3RoIDwgaGlnaGVzdFBhdGgubGVuZ3RoIHx8XG4gICAgICAgICAgcGF0aC5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAoIXZvaWRzICYmIEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmIEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBub2RlKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBvaW50ID0gYmVmb3JlUmVmLmN1cnJlbnQhXG4gICAgICAgIGNvbnN0IGlzRW5kID0gRWRpdG9yLmlzRW5kKGVkaXRvciwgcG9pbnQsIHBhdGgpXG5cbiAgICAgICAgaWYgKGFsd2F5cyB8fCAhYmVmb3JlUmVmIHx8ICFFZGl0b3IuaXNFZGdlKGVkaXRvciwgcG9pbnQsIHBhdGgpKSB7XG4gICAgICAgICAgc3BsaXQgPSB0cnVlXG4gICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IE5vZGUuZXh0cmFjdFByb3BzKG5vZGUpXG4gICAgICAgICAgZWRpdG9yLmFwcGx5KHtcbiAgICAgICAgICAgIHR5cGU6ICdzcGxpdF9ub2RlJyxcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgICAgIHByb3BlcnRpZXMsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHBvc2l0aW9uID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdICsgKHNwbGl0IHx8IGlzRW5kID8gMSA6IDApXG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLmF0ID09IG51bGwpIHtcbiAgICAgICAgY29uc3QgcG9pbnQgPSBhZnRlclJlZi5jdXJyZW50IHx8IEVkaXRvci5lbmQoZWRpdG9yLCBbXSlcbiAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBwb2ludClcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgYmVmb3JlUmVmLnVucmVmKClcbiAgICAgIGFmdGVyUmVmPy51bnJlZigpXG4gICAgfVxuICB9KVxufVxuIiwgImltcG9ydCB7IE5vZGVUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL25vZGUnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuXG5leHBvcnQgY29uc3QgdW5zZXROb2RlczogTm9kZVRyYW5zZm9ybXNbJ3Vuc2V0Tm9kZXMnXSA9IChcbiAgZWRpdG9yLFxuICBwcm9wcyxcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHByb3BzKSkge1xuICAgIHByb3BzID0gW3Byb3BzXVxuICB9XG5cbiAgY29uc3Qgb2JqOiBhbnkgPSB7fVxuXG4gIGZvciAoY29uc3Qga2V5IG9mIHByb3BzKSB7XG4gICAgb2JqW2tleV0gPSBudWxsXG4gIH1cblxuICBUcmFuc2Zvcm1zLnNldE5vZGVzKGVkaXRvciwgb2JqLCBvcHRpb25zKVxufVxuIiwgImltcG9ydCB7IE5vZGVUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBtYXRjaFBhdGggfSBmcm9tICcuLi91dGlscy9tYXRjaC1wYXRoJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5cbmV4cG9ydCBjb25zdCB1bndyYXBOb2RlczogTm9kZVRyYW5zZm9ybXNbJ3Vud3JhcE5vZGVzJ10gPSAoXG4gIGVkaXRvcixcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCB7IG1vZGUgPSAnbG93ZXN0Jywgc3BsaXQgPSBmYWxzZSwgdm9pZHMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgIGxldCB7IGF0ID0gZWRpdG9yLnNlbGVjdGlvbiwgbWF0Y2ggfSA9IG9wdGlvbnNcblxuICAgIGlmICghYXQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICBtYXRjaCA9IFBhdGguaXNQYXRoKGF0KVxuICAgICAgICA/IG1hdGNoUGF0aChlZGl0b3IsIGF0KVxuICAgICAgICA6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICAgIH1cblxuICAgIGlmIChQYXRoLmlzUGF0aChhdCkpIHtcbiAgICAgIGF0ID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgYXQpXG4gICAgfVxuXG4gICAgY29uc3QgcmFuZ2VSZWYgPSBSYW5nZS5pc1JhbmdlKGF0KSA/IEVkaXRvci5yYW5nZVJlZihlZGl0b3IsIGF0KSA6IG51bGxcbiAgICBjb25zdCBtYXRjaGVzID0gRWRpdG9yLm5vZGVzKGVkaXRvciwgeyBhdCwgbWF0Y2gsIG1vZGUsIHZvaWRzIH0pXG4gICAgY29uc3QgcGF0aFJlZnMgPSBBcnJheS5mcm9tKFxuICAgICAgbWF0Y2hlcyxcbiAgICAgIChbLCBwXSkgPT4gRWRpdG9yLnBhdGhSZWYoZWRpdG9yLCBwKVxuICAgICAgLy8gdW53cmFwTm9kZSB3aWxsIGNhbGwgbGlmdE5vZGUgd2hpY2ggZG9lcyBub3Qgc3VwcG9ydCBzcGxpdHRpbmcgdGhlIG5vZGUgd2hlbiBuZXN0ZWQuXG4gICAgICAvLyBJZiB3ZSBkbyBub3QgcmV2ZXJzZSB0aGUgb3JkZXIgYW5kIGNhbGwgaXQgZnJvbSB0b3AgdG8gdGhlIGJvdHRvbSwgaXQgd2lsbCByZW1vdmUgYWxsIGJsb2Nrc1xuICAgICAgLy8gdGhhdCB3cmFwIHRhcmdldCBub2RlLiBTbyB3ZSByZXZlcnNlIHRoZSBvcmRlci5cbiAgICApLnJldmVyc2UoKVxuXG4gICAgZm9yIChjb25zdCBwYXRoUmVmIG9mIHBhdGhSZWZzKSB7XG4gICAgICBjb25zdCBwYXRoID0gcGF0aFJlZi51bnJlZigpIVxuICAgICAgY29uc3QgW25vZGVdID0gRWRpdG9yLm5vZGUoZWRpdG9yLCBwYXRoKVxuICAgICAgbGV0IHJhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgcGF0aClcblxuICAgICAgaWYgKHNwbGl0ICYmIHJhbmdlUmVmKSB7XG4gICAgICAgIHJhbmdlID0gUmFuZ2UuaW50ZXJzZWN0aW9uKHJhbmdlUmVmLmN1cnJlbnQhLCByYW5nZSkhXG4gICAgICB9XG5cbiAgICAgIFRyYW5zZm9ybXMubGlmdE5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdDogcmFuZ2UsXG4gICAgICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNBbmNlc3Rvcihub2RlKSAmJiBub2RlLmNoaWxkcmVuLmluY2x1ZGVzKG4pLFxuICAgICAgICB2b2lkcyxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHJhbmdlUmVmKSB7XG4gICAgICByYW5nZVJlZi51bnJlZigpXG4gICAgfVxuICB9KVxufVxuIiwgImltcG9ydCB7IE5vZGVUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBtYXRjaFBhdGggfSBmcm9tICcuLi91dGlscy9tYXRjaC1wYXRoJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuXG5leHBvcnQgY29uc3Qgd3JhcE5vZGVzOiBOb2RlVHJhbnNmb3Jtc1snd3JhcE5vZGVzJ10gPSAoXG4gIGVkaXRvcixcbiAgZWxlbWVudCxcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCB7IG1vZGUgPSAnbG93ZXN0Jywgc3BsaXQgPSBmYWxzZSwgdm9pZHMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgIGxldCB7IG1hdGNoLCBhdCA9IGVkaXRvci5zZWxlY3Rpb24gfSA9IG9wdGlvbnNcblxuICAgIGlmICghYXQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICBpZiAoUGF0aC5pc1BhdGgoYXQpKSB7XG4gICAgICAgIG1hdGNoID0gbWF0Y2hQYXRoKGVkaXRvciwgYXQpXG4gICAgICB9IGVsc2UgaWYgKGVkaXRvci5pc0lubGluZShlbGVtZW50KSkge1xuICAgICAgICBtYXRjaCA9IG4gPT5cbiAgICAgICAgICAoRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzSW5saW5lKGVkaXRvciwgbikpIHx8IFRleHQuaXNUZXh0KG4pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRjaCA9IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzcGxpdCAmJiBSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXMoYXQpXG4gICAgICBjb25zdCByYW5nZVJlZiA9IEVkaXRvci5yYW5nZVJlZihlZGl0b3IsIGF0LCB7XG4gICAgICAgIGFmZmluaXR5OiAnaW53YXJkJyxcbiAgICAgIH0pXG4gICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7IGF0OiBlbmQsIG1hdGNoLCB2b2lkcyB9KVxuICAgICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGVkaXRvciwgeyBhdDogc3RhcnQsIG1hdGNoLCB2b2lkcyB9KVxuICAgICAgYXQgPSByYW5nZVJlZi51bnJlZigpIVxuXG4gICAgICBpZiAob3B0aW9ucy5hdCA9PSBudWxsKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgYXQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgcm9vdHMgPSBBcnJheS5mcm9tKFxuICAgICAgRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdCxcbiAgICAgICAgbWF0Y2g6IGVkaXRvci5pc0lubGluZShlbGVtZW50KVxuICAgICAgICAgID8gbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgICAgICAgOiBuID0+IEVkaXRvci5pc0VkaXRvcihuKSxcbiAgICAgICAgbW9kZTogJ2xvd2VzdCcsXG4gICAgICAgIHZvaWRzLFxuICAgICAgfSlcbiAgICApXG5cbiAgICBmb3IgKGNvbnN0IFssIHJvb3RQYXRoXSBvZiByb290cykge1xuICAgICAgY29uc3QgYSA9IFJhbmdlLmlzUmFuZ2UoYXQpXG4gICAgICAgID8gUmFuZ2UuaW50ZXJzZWN0aW9uKGF0LCBFZGl0b3IucmFuZ2UoZWRpdG9yLCByb290UGF0aCkpXG4gICAgICAgIDogYXRcblxuICAgICAgaWYgKCFhKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBBcnJheS5mcm9tKFxuICAgICAgICBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7IGF0OiBhLCBtYXRjaCwgbW9kZSwgdm9pZHMgfSlcbiAgICAgIClcblxuICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBbZmlyc3RdID0gbWF0Y2hlc1xuICAgICAgICBjb25zdCBsYXN0ID0gbWF0Y2hlc1ttYXRjaGVzLmxlbmd0aCAtIDFdXG4gICAgICAgIGNvbnN0IFssIGZpcnN0UGF0aF0gPSBmaXJzdFxuICAgICAgICBjb25zdCBbLCBsYXN0UGF0aF0gPSBsYXN0XG5cbiAgICAgICAgaWYgKGZpcnN0UGF0aC5sZW5ndGggPT09IDAgJiYgbGFzdFBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgLy8gaWYgdGhlcmUncyBubyBtYXRjaGluZyBwYXJlbnQgLSB1c3VhbGx5IG1lYW5zIHRoZSBub2RlIGlzIGFuIGVkaXRvciAtIGRvbid0IGRvIGFueXRoaW5nXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbW1vblBhdGggPSBQYXRoLmVxdWFscyhmaXJzdFBhdGgsIGxhc3RQYXRoKVxuICAgICAgICAgID8gUGF0aC5wYXJlbnQoZmlyc3RQYXRoKVxuICAgICAgICAgIDogUGF0aC5jb21tb24oZmlyc3RQYXRoLCBsYXN0UGF0aClcblxuICAgICAgICBjb25zdCByYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIGZpcnN0UGF0aCwgbGFzdFBhdGgpXG4gICAgICAgIGNvbnN0IGNvbW1vbk5vZGVFbnRyeSA9IEVkaXRvci5ub2RlKGVkaXRvciwgY29tbW9uUGF0aClcbiAgICAgICAgY29uc3QgW2NvbW1vbk5vZGVdID0gY29tbW9uTm9kZUVudHJ5XG4gICAgICAgIGNvbnN0IGRlcHRoID0gY29tbW9uUGF0aC5sZW5ndGggKyAxXG4gICAgICAgIGNvbnN0IHdyYXBwZXJQYXRoID0gUGF0aC5uZXh0KGxhc3RQYXRoLnNsaWNlKDAsIGRlcHRoKSlcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IHsgLi4uZWxlbWVudCwgY2hpbGRyZW46IFtdIH1cbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIHdyYXBwZXIsIHsgYXQ6IHdyYXBwZXJQYXRoLCB2b2lkcyB9KVxuXG4gICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIGF0OiByYW5nZSxcbiAgICAgICAgICBtYXRjaDogbiA9PlxuICAgICAgICAgICAgRWxlbWVudC5pc0FuY2VzdG9yKGNvbW1vbk5vZGUpICYmIGNvbW1vbk5vZGUuY2hpbGRyZW4uaW5jbHVkZXMobiksXG4gICAgICAgICAgdG86IHdyYXBwZXJQYXRoLmNvbmNhdCgwKSxcbiAgICAgICAgICB2b2lkcyxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCAiaW1wb3J0IHtcbiAgYWRkTWFyayxcbiAgZGVsZXRlRnJhZ21lbnQsXG4gIEVkaXRvcixcbiAgZ2V0RGlydHlQYXRocyxcbiAgZ2V0RnJhZ21lbnQsXG4gIGluc2VydEJyZWFrLFxuICBpbnNlcnRGcmFnbWVudCxcbiAgaW5zZXJ0Tm9kZSxcbiAgaW5zZXJ0U29mdEJyZWFrLFxuICBpbnNlcnRUZXh0LFxuICBub3JtYWxpemVOb2RlLFxuICByZW1vdmVNYXJrLFxuICBzaG91bGROb3JtYWxpemUsXG59IGZyb20gJy4vJ1xuaW1wb3J0IHsgYXBwbHkgfSBmcm9tICcuL2NvcmUnXG5pbXBvcnQge1xuICBhYm92ZSxcbiAgYWZ0ZXIsXG4gIGJlZm9yZSxcbiAgZGVsZXRlQmFja3dhcmQsXG4gIGRlbGV0ZUZvcndhcmQsXG4gIGVkZ2VzLFxuICBlbGVtZW50UmVhZE9ubHksXG4gIGVuZCxcbiAgZmlyc3QsXG4gIGZyYWdtZW50LFxuICBnZXRWb2lkLFxuICBoYXNCbG9ja3MsXG4gIGhhc0lubGluZXMsXG4gIGhhc1BhdGgsXG4gIGhhc1RleHRzLFxuICBpc0Jsb2NrLFxuICBpc0VkZ2UsXG4gIGlzRW1wdHksXG4gIGlzRW5kLFxuICBpc05vcm1hbGl6aW5nLFxuICBpc1N0YXJ0LFxuICBsYXN0LFxuICBsZWFmLFxuICBsZXZlbHMsXG4gIG1hcmtzLFxuICBuZXh0LFxuICBub2RlLFxuICBub2RlcyxcbiAgbm9ybWFsaXplLFxuICBwYXJlbnQsXG4gIHBhdGgsXG4gIHBhdGhSZWYsXG4gIHBhdGhSZWZzLFxuICBwb2ludCxcbiAgcG9pbnRSZWYsXG4gIHBvaW50UmVmcyxcbiAgcG9zaXRpb25zLFxuICBwcmV2aW91cyxcbiAgcmFuZ2UsXG4gIHJhbmdlUmVmLFxuICByYW5nZVJlZnMsXG4gIHNldE5vcm1hbGl6aW5nLFxuICBzdGFydCxcbiAgc3RyaW5nLFxuICB1bmhhbmdSYW5nZSxcbiAgd2l0aG91dE5vcm1hbGl6aW5nLFxufSBmcm9tICcuL2VkaXRvcidcbmltcG9ydCB7IGRlbGV0ZVRleHQgfSBmcm9tICcuL3RyYW5zZm9ybXMtdGV4dCdcbmltcG9ydCB7XG4gIGNvbGxhcHNlLFxuICBkZXNlbGVjdCxcbiAgbW92ZSxcbiAgc2VsZWN0LFxuICBzZXRQb2ludCxcbiAgc2V0U2VsZWN0aW9uLFxufSBmcm9tICcuL3RyYW5zZm9ybXMtc2VsZWN0aW9uJ1xuaW1wb3J0IHtcbiAgaW5zZXJ0Tm9kZXMsXG4gIGxpZnROb2RlcyxcbiAgbWVyZ2VOb2RlcyxcbiAgbW92ZU5vZGVzLFxuICByZW1vdmVOb2RlcyxcbiAgc2V0Tm9kZXMsXG4gIHNwbGl0Tm9kZXMsXG4gIHVuc2V0Tm9kZXMsXG4gIHVud3JhcE5vZGVzLFxuICB3cmFwTm9kZXMsXG59IGZyb20gJy4vdHJhbnNmb3Jtcy1ub2RlJ1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBTbGF0ZSBgRWRpdG9yYCBvYmplY3QuXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVFZGl0b3IgPSAoKTogRWRpdG9yID0+IHtcbiAgY29uc3QgZWRpdG9yOiBFZGl0b3IgPSB7XG4gICAgY2hpbGRyZW46IFtdLFxuICAgIG9wZXJhdGlvbnM6IFtdLFxuICAgIHNlbGVjdGlvbjogbnVsbCxcbiAgICBtYXJrczogbnVsbCxcbiAgICBpc0VsZW1lbnRSZWFkT25seTogKCkgPT4gZmFsc2UsXG4gICAgaXNJbmxpbmU6ICgpID0+IGZhbHNlLFxuICAgIGlzU2VsZWN0YWJsZTogKCkgPT4gdHJ1ZSxcbiAgICBpc1ZvaWQ6ICgpID0+IGZhbHNlLFxuICAgIG1hcmthYmxlVm9pZDogKCkgPT4gZmFsc2UsXG4gICAgb25DaGFuZ2U6ICgpID0+IHt9LFxuXG4gICAgLy8gQ29yZVxuICAgIGFwcGx5OiAoLi4uYXJncykgPT4gYXBwbHkoZWRpdG9yLCAuLi5hcmdzKSxcblxuICAgIC8vIEVkaXRvclxuICAgIGFkZE1hcms6ICguLi5hcmdzKSA9PiBhZGRNYXJrKGVkaXRvciwgLi4uYXJncyksXG4gICAgZGVsZXRlQmFja3dhcmQ6ICguLi5hcmdzKSA9PiBkZWxldGVCYWNrd2FyZChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGRlbGV0ZUZvcndhcmQ6ICguLi5hcmdzKSA9PiBkZWxldGVGb3J3YXJkKGVkaXRvciwgLi4uYXJncyksXG4gICAgZGVsZXRlRnJhZ21lbnQ6ICguLi5hcmdzKSA9PiBkZWxldGVGcmFnbWVudChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGdldEZyYWdtZW50OiAoLi4uYXJncykgPT4gZ2V0RnJhZ21lbnQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpbnNlcnRCcmVhazogKC4uLmFyZ3MpID0+IGluc2VydEJyZWFrKGVkaXRvciwgLi4uYXJncyksXG4gICAgaW5zZXJ0U29mdEJyZWFrOiAoLi4uYXJncykgPT4gaW5zZXJ0U29mdEJyZWFrKGVkaXRvciwgLi4uYXJncyksXG4gICAgaW5zZXJ0RnJhZ21lbnQ6ICguLi5hcmdzKSA9PiBpbnNlcnRGcmFnbWVudChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGluc2VydE5vZGU6ICguLi5hcmdzKSA9PiBpbnNlcnROb2RlKGVkaXRvciwgLi4uYXJncyksXG4gICAgaW5zZXJ0VGV4dDogKC4uLmFyZ3MpID0+IGluc2VydFRleHQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBub3JtYWxpemVOb2RlOiAoLi4uYXJncykgPT4gbm9ybWFsaXplTm9kZShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHJlbW92ZU1hcms6ICguLi5hcmdzKSA9PiByZW1vdmVNYXJrKGVkaXRvciwgLi4uYXJncyksXG4gICAgZ2V0RGlydHlQYXRoczogKC4uLmFyZ3MpID0+IGdldERpcnR5UGF0aHMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBzaG91bGROb3JtYWxpemU6ICguLi5hcmdzKSA9PiBzaG91bGROb3JtYWxpemUoZWRpdG9yLCAuLi5hcmdzKSxcblxuICAgIC8vIEVkaXRvciBpbnRlcmZhY2VcbiAgICBhYm92ZTogKC4uLmFyZ3MpID0+IGFib3ZlKGVkaXRvciwgLi4uYXJncyksXG4gICAgYWZ0ZXI6ICguLi5hcmdzKSA9PiBhZnRlcihlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGJlZm9yZTogKC4uLmFyZ3MpID0+IGJlZm9yZShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGNvbGxhcHNlOiAoLi4uYXJncykgPT4gY29sbGFwc2UoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBkZWxldGU6ICguLi5hcmdzKSA9PiBkZWxldGVUZXh0KGVkaXRvciwgLi4uYXJncyksXG4gICAgZGVzZWxlY3Q6ICguLi5hcmdzKSA9PiBkZXNlbGVjdChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGVkZ2VzOiAoLi4uYXJncykgPT4gZWRnZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBlbGVtZW50UmVhZE9ubHk6ICguLi5hcmdzKSA9PiBlbGVtZW50UmVhZE9ubHkoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBlbmQ6ICguLi5hcmdzKSA9PiBlbmQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBmaXJzdDogKC4uLmFyZ3MpID0+IGZpcnN0KGVkaXRvciwgLi4uYXJncyksXG4gICAgZnJhZ21lbnQ6ICguLi5hcmdzKSA9PiBmcmFnbWVudChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGdldE1hcmtzOiAoLi4uYXJncykgPT4gbWFya3MoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBoYXNCbG9ja3M6ICguLi5hcmdzKSA9PiBoYXNCbG9ja3MoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBoYXNJbmxpbmVzOiAoLi4uYXJncykgPT4gaGFzSW5saW5lcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGhhc1BhdGg6ICguLi5hcmdzKSA9PiBoYXNQYXRoKGVkaXRvciwgLi4uYXJncyksXG4gICAgaGFzVGV4dHM6ICguLi5hcmdzKSA9PiBoYXNUZXh0cyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGluc2VydE5vZGVzOiAoLi4uYXJncykgPT4gaW5zZXJ0Tm9kZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpc0Jsb2NrOiAoLi4uYXJncykgPT4gaXNCbG9jayhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGlzRWRnZTogKC4uLmFyZ3MpID0+IGlzRWRnZShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGlzRW1wdHk6ICguLi5hcmdzKSA9PiBpc0VtcHR5KGVkaXRvciwgLi4uYXJncyksXG4gICAgaXNFbmQ6ICguLi5hcmdzKSA9PiBpc0VuZChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGlzTm9ybWFsaXppbmc6ICguLi5hcmdzKSA9PiBpc05vcm1hbGl6aW5nKGVkaXRvciwgLi4uYXJncyksXG4gICAgaXNTdGFydDogKC4uLmFyZ3MpID0+IGlzU3RhcnQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBsYXN0OiAoLi4uYXJncykgPT4gbGFzdChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGxlYWY6ICguLi5hcmdzKSA9PiBsZWFmKGVkaXRvciwgLi4uYXJncyksXG4gICAgbGV2ZWxzOiAoLi4uYXJncykgPT4gbGV2ZWxzKGVkaXRvciwgLi4uYXJncyksXG4gICAgbGlmdE5vZGVzOiAoLi4uYXJncykgPT4gbGlmdE5vZGVzKGVkaXRvciwgLi4uYXJncyksXG4gICAgbWVyZ2VOb2RlczogKC4uLmFyZ3MpID0+IG1lcmdlTm9kZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBtb3ZlOiAoLi4uYXJncykgPT4gbW92ZShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIG1vdmVOb2RlczogKC4uLmFyZ3MpID0+IG1vdmVOb2RlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIG5leHQ6ICguLi5hcmdzKSA9PiBuZXh0KGVkaXRvciwgLi4uYXJncyksXG4gICAgbm9kZTogKC4uLmFyZ3MpID0+IG5vZGUoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBub2RlczogKC4uLmFyZ3MpID0+IG5vZGVzKGVkaXRvciwgLi4uYXJncyksXG4gICAgbm9ybWFsaXplOiAoLi4uYXJncykgPT4gbm9ybWFsaXplKGVkaXRvciwgLi4uYXJncyksXG4gICAgcGFyZW50OiAoLi4uYXJncykgPT4gcGFyZW50KGVkaXRvciwgLi4uYXJncyksXG4gICAgcGF0aDogKC4uLmFyZ3MpID0+IHBhdGgoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBwYXRoUmVmOiAoLi4uYXJncykgPT4gcGF0aFJlZihlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHBhdGhSZWZzOiAoLi4uYXJncykgPT4gcGF0aFJlZnMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBwb2ludDogKC4uLmFyZ3MpID0+IHBvaW50KGVkaXRvciwgLi4uYXJncyksXG4gICAgcG9pbnRSZWY6ICguLi5hcmdzKSA9PiBwb2ludFJlZihlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHBvaW50UmVmczogKC4uLmFyZ3MpID0+IHBvaW50UmVmcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHBvc2l0aW9uczogKC4uLmFyZ3MpID0+IHBvc2l0aW9ucyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHByZXZpb3VzOiAoLi4uYXJncykgPT4gcHJldmlvdXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICByYW5nZTogKC4uLmFyZ3MpID0+IHJhbmdlKGVkaXRvciwgLi4uYXJncyksXG4gICAgcmFuZ2VSZWY6ICguLi5hcmdzKSA9PiByYW5nZVJlZihlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHJhbmdlUmVmczogKC4uLmFyZ3MpID0+IHJhbmdlUmVmcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHJlbW92ZU5vZGVzOiAoLi4uYXJncykgPT4gcmVtb3ZlTm9kZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBzZWxlY3Q6ICguLi5hcmdzKSA9PiBzZWxlY3QoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBzZXROb2RlczogKC4uLmFyZ3MpID0+IHNldE5vZGVzKGVkaXRvciwgLi4uYXJncyksXG4gICAgc2V0Tm9ybWFsaXppbmc6ICguLi5hcmdzKSA9PiBzZXROb3JtYWxpemluZyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHNldFBvaW50OiAoLi4uYXJncykgPT4gc2V0UG9pbnQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBzZXRTZWxlY3Rpb246ICguLi5hcmdzKSA9PiBzZXRTZWxlY3Rpb24oZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBzcGxpdE5vZGVzOiAoLi4uYXJncykgPT4gc3BsaXROb2RlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHN0YXJ0OiAoLi4uYXJncykgPT4gc3RhcnQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBzdHJpbmc6ICguLi5hcmdzKSA9PiBzdHJpbmcoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICB1bmhhbmdSYW5nZTogKC4uLmFyZ3MpID0+IHVuaGFuZ1JhbmdlKGVkaXRvciwgLi4uYXJncyksXG4gICAgdW5zZXROb2RlczogKC4uLmFyZ3MpID0+IHVuc2V0Tm9kZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICB1bndyYXBOb2RlczogKC4uLmFyZ3MpID0+IHVud3JhcE5vZGVzKGVkaXRvciwgLi4uYXJncyksXG4gICAgdm9pZDogKC4uLmFyZ3MpID0+IGdldFZvaWQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICB3aXRob3V0Tm9ybWFsaXppbmc6ICguLi5hcmdzKSA9PiB3aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICB3cmFwTm9kZXM6ICguLi5hcmdzKSA9PiB3cmFwTm9kZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgfVxuXG4gIHJldHVybiBlZGl0b3Jcbn1cbiIsICIvLyBDb21wdXRlIHdoYXQgc2Nyb2xsaW5nIG5lZWRzIHRvIGJlIGRvbmUgb24gcmVxdWlyZWQgc2Nyb2xsaW5nIGJveGVzIGZvciB0YXJnZXQgdG8gYmUgaW4gdmlld1xuXG4vLyBUaGUgdHlwZSBuYW1lcyBoZXJlIGFyZSBuYW1lZCBhZnRlciB0aGUgc3BlYyB0byBtYWtlIGl0IGVhc2llciB0byBmaW5kIG1vcmUgaW5mb3JtYXRpb24gYXJvdW5kIHdoYXQgdGhleSBtZWFuOlxuLy8gVG8gcmVkdWNlIGNodXJuIGFuZCByZWR1Y2UgdGhpbmdzIHRoYXQgbmVlZCBiZSBtYWludGFpbmVkIHRoaW5ncyBmcm9tIHRoZSBvZmZpY2lhbCBUUyBET00gbGlicmFyeSBpcyB1c2VkIGhlcmVcbi8vIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS12aWV3L1xuXG4vLyBGb3IgYSBkZWZpbml0aW9uIG9uIHdoYXQgaXMgXCJibG9jayBmbG93IGRpcmVjdGlvblwiIGV4YWN0bHksIGNoZWNrIHRoaXM6IGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3Mtd3JpdGluZy1tb2Rlcy00LyNibG9jay1mbG93LWRpcmVjdGlvblxuXG4vLyBhZGQgc3VwcG9ydCBmb3IgdmlzdWFsVmlld3BvcnQgb2JqZWN0IGN1cnJlbnRseSBpbXBsZW1lbnRlZCBpbiBjaHJvbWVcbmludGVyZmFjZSB2aXN1YWxWaWV3cG9ydCB7XG4gIGhlaWdodDogbnVtYmVyXG4gIHdpZHRoOiBudW1iZXJcbn1cblxudHlwZSBTY3JvbGxMb2dpY2FsUG9zaXRpb24gPSAnc3RhcnQnIHwgJ2NlbnRlcicgfCAnZW5kJyB8ICduZWFyZXN0J1xuLy8gVGhpcyBuZXcgb3B0aW9uIGlzIHRyYWNrZWQgaW4gdGhpcyBQUiwgd2hpY2ggaXMgdGhlIG1vc3QgbGlrZWx5IGNhbmRpZGF0ZSBhdCB0aGUgdGltZTogaHR0cHM6Ly9naXRodWIuY29tL3czYy9jc3N3Zy1kcmFmdHMvcHVsbC8xODA1XG50eXBlIFNjcm9sbE1vZGUgPSAnYWx3YXlzJyB8ICdpZi1uZWVkZWQnXG4vLyBOZXcgb3B0aW9uIHRoYXQgc2tpcHMgYXV0by1zY3JvbGxpbmcgYWxsIG5vZGVzIHdpdGggb3ZlcmZsb3c6IGhpZGRlbiBzZXRcbi8vIFNlZSBGRiBpbXBsZW1lbnRhdGlvbjogaHR0cHM6Ly9oZy5tb3ppbGxhLm9yZy9pbnRlZ3JhdGlvbi9meC10ZWFtL3Jldi9jNDhjM2VjMDUwMTIjbDcuMThcbnR5cGUgU2tpcE92ZXJmbG93SGlkZGVuRWxlbWVudHMgPSBib29sZWFuXG5cbmludGVyZmFjZSBPcHRpb25zIHtcbiAgYmxvY2s/OiBTY3JvbGxMb2dpY2FsUG9zaXRpb25cbiAgaW5saW5lPzogU2Nyb2xsTG9naWNhbFBvc2l0aW9uXG4gIHNjcm9sbE1vZGU/OiBTY3JvbGxNb2RlXG4gIGJvdW5kYXJ5PzogQ3VzdG9tU2Nyb2xsQm91bmRhcnlcbiAgc2tpcE92ZXJmbG93SGlkZGVuRWxlbWVudHM/OiBTa2lwT3ZlcmZsb3dIaWRkZW5FbGVtZW50c1xufVxuXG4vLyBDdXN0b20gYmVoYXZpb3IsIG5vdCBpbiBhbnkgc3BlY1xudHlwZSBDdXN0b21TY3JvbGxCb3VuZGFyeUNhbGxiYWNrID0gKHBhcmVudDogRWxlbWVudCkgPT4gYm9vbGVhblxudHlwZSBDdXN0b21TY3JvbGxCb3VuZGFyeSA9IEVsZW1lbnQgfCBDdXN0b21TY3JvbGxCb3VuZGFyeUNhbGxiYWNrIHwgbnVsbFxuaW50ZXJmYWNlIEN1c3RvbVNjcm9sbEFjdGlvbiB7XG4gIGVsOiBFbGVtZW50XG4gIHRvcDogbnVtYmVyXG4gIGxlZnQ6IG51bWJlclxufVxuXG4vLyBAVE9ETyBiZXR0ZXIgc2hhZG93ZG9tIHRlc3QsIDExID0gZG9jdW1lbnQgZnJhZ21lbnRcbmZ1bmN0aW9uIGlzRWxlbWVudChlbDogYW55KTogZWwgaXMgRWxlbWVudCB7XG4gIHJldHVybiB0eXBlb2YgZWwgPT09ICdvYmplY3QnICYmIGVsICE9IG51bGwgJiYgZWwubm9kZVR5cGUgPT09IDFcbn1cblxuZnVuY3Rpb24gY2FuT3ZlcmZsb3coXG4gIG92ZXJmbG93OiBzdHJpbmcgfCBudWxsLFxuICBza2lwT3ZlcmZsb3dIaWRkZW5FbGVtZW50cz86IGJvb2xlYW5cbikge1xuICBpZiAoc2tpcE92ZXJmbG93SGlkZGVuRWxlbWVudHMgJiYgb3ZlcmZsb3cgPT09ICdoaWRkZW4nKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gb3ZlcmZsb3cgIT09ICd2aXNpYmxlJyAmJiBvdmVyZmxvdyAhPT0gJ2NsaXAnXG59XG5cbmZ1bmN0aW9uIGdldEZyYW1lRWxlbWVudChlbDogRWxlbWVudCkge1xuICBpZiAoIWVsLm93bmVyRG9jdW1lbnQgfHwgIWVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gZWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5mcmFtZUVsZW1lbnRcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuZnVuY3Rpb24gaXNIaWRkZW5CeUZyYW1lKGVsOiBFbGVtZW50KTogYm9vbGVhbiB7XG4gIGNvbnN0IGZyYW1lID0gZ2V0RnJhbWVFbGVtZW50KGVsKVxuICBpZiAoIWZyYW1lKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gKFxuICAgIGZyYW1lLmNsaWVudEhlaWdodCA8IGVsLnNjcm9sbEhlaWdodCB8fCBmcmFtZS5jbGllbnRXaWR0aCA8IGVsLnNjcm9sbFdpZHRoXG4gIClcbn1cblxuZnVuY3Rpb24gaXNTY3JvbGxhYmxlKGVsOiBFbGVtZW50LCBza2lwT3ZlcmZsb3dIaWRkZW5FbGVtZW50cz86IGJvb2xlYW4pIHtcbiAgaWYgKGVsLmNsaWVudEhlaWdodCA8IGVsLnNjcm9sbEhlaWdodCB8fCBlbC5jbGllbnRXaWR0aCA8IGVsLnNjcm9sbFdpZHRoKSB7XG4gICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsLCBudWxsKVxuICAgIHJldHVybiAoXG4gICAgICBjYW5PdmVyZmxvdyhzdHlsZS5vdmVyZmxvd1ksIHNraXBPdmVyZmxvd0hpZGRlbkVsZW1lbnRzKSB8fFxuICAgICAgY2FuT3ZlcmZsb3coc3R5bGUub3ZlcmZsb3dYLCBza2lwT3ZlcmZsb3dIaWRkZW5FbGVtZW50cykgfHxcbiAgICAgIGlzSGlkZGVuQnlGcmFtZShlbClcbiAgICApXG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cbi8qKlxuICogRmluZCBvdXQgd2hpY2ggZWRnZSB0byBhbGlnbiBhZ2FpbnN0IHdoZW4gbG9naWNhbCBzY3JvbGwgcG9zaXRpb24gaXMgXCJuZWFyZXN0XCJcbiAqIEludGVyZXN0aW5nIGZhY3Q6IFwibmVhcmVzdFwiIHdvcmtzIHNpbWlsYXJpbHkgdG8gXCJpZi1uZWVkZWRcIiwgaWYgdGhlIGVsZW1lbnQgaXMgZnVsbHkgdmlzaWJsZSBpdCB3aWxsIG5vdCBzY3JvbGwgaXRcbiAqXG4gKiBMZWdlbmRzOlxuICog4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQIOKUjyDilIEg4pSBIOKUgSDilJNcbiAqIOKUgiB0YXJnZXQg4pSCICAgZnJhbWVcbiAqIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCDilJcg4pSBIOKUgSDilIEg4pSbXG4gKi9cbmZ1bmN0aW9uIGFsaWduTmVhcmVzdChcbiAgc2Nyb2xsaW5nRWRnZVN0YXJ0OiBudW1iZXIsXG4gIHNjcm9sbGluZ0VkZ2VFbmQ6IG51bWJlcixcbiAgc2Nyb2xsaW5nU2l6ZTogbnVtYmVyLFxuICBzY3JvbGxpbmdCb3JkZXJTdGFydDogbnVtYmVyLFxuICBzY3JvbGxpbmdCb3JkZXJFbmQ6IG51bWJlcixcbiAgZWxlbWVudEVkZ2VTdGFydDogbnVtYmVyLFxuICBlbGVtZW50RWRnZUVuZDogbnVtYmVyLFxuICBlbGVtZW50U2l6ZTogbnVtYmVyXG4pIHtcbiAgLyoqXG4gICAqIElmIGVsZW1lbnQgZWRnZSBBIGFuZCBlbGVtZW50IGVkZ2UgQiBhcmUgYm90aCBvdXRzaWRlIHNjcm9sbGluZyBib3ggZWRnZSBBIGFuZCBzY3JvbGxpbmcgYm94IGVkZ2UgQlxuICAgKlxuICAgKiAgICAgICAgICDilIzilIDilIDilJBcbiAgICogICAgICAgIOKUj+KUgeKUguKUgeKUgeKUguKUgeKUk1xuICAgKiAgICAgICAgICDilIIgIOKUglxuICAgKiAgICAgICAg4pSDIOKUgiAg4pSCIOKUgyAgICAgICAgZG8gbm90aGluZ1xuICAgKiAgICAgICAgICDilIIgIOKUglxuICAgKiAgICAgICAg4pSX4pSB4pSC4pSB4pSB4pSC4pSB4pSbXG4gICAqICAgICAgICAgIOKUlOKUgOKUgOKUmFxuICAgKlxuICAgKiAgSWYgZWxlbWVudCBlZGdlIEMgYW5kIGVsZW1lbnQgZWRnZSBEIGFyZSBib3RoIG91dHNpZGUgc2Nyb2xsaW5nIGJveCBlZGdlIEMgYW5kIHNjcm9sbGluZyBib3ggZWRnZSBEXG4gICAqXG4gICAqICAgIOKUjyDilIEg4pSBIOKUgSDilIEg4pSTXG4gICAqICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQXG4gICAqICAg4pSC4pSDICAgICAgICAg4pSD4pSCICAgICAgICBkbyBub3RoaW5nXG4gICAqICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYXG4gICAqICAgIOKUlyDilIEg4pSBIOKUgSDilIEg4pSbXG4gICAqL1xuICBpZiAoXG4gICAgKGVsZW1lbnRFZGdlU3RhcnQgPCBzY3JvbGxpbmdFZGdlU3RhcnQgJiZcbiAgICAgIGVsZW1lbnRFZGdlRW5kID4gc2Nyb2xsaW5nRWRnZUVuZCkgfHxcbiAgICAoZWxlbWVudEVkZ2VTdGFydCA+IHNjcm9sbGluZ0VkZ2VTdGFydCAmJiBlbGVtZW50RWRnZUVuZCA8IHNjcm9sbGluZ0VkZ2VFbmQpXG4gICkge1xuICAgIHJldHVybiAwXG4gIH1cblxuICAvKipcbiAgICogSWYgZWxlbWVudCBlZGdlIEEgaXMgb3V0c2lkZSBzY3JvbGxpbmcgYm94IGVkZ2UgQSBhbmQgZWxlbWVudCBoZWlnaHQgaXMgbGVzcyB0aGFuIHNjcm9sbGluZyBib3ggaGVpZ2h0XG4gICAqXG4gICAqICAgICAgICAgIOKUjOKUgOKUgOKUkFxuICAgKiAgICAgICAg4pSP4pSB4pSC4pSB4pSB4pSC4pSB4pSTICAgICAgICAg4pSP4pSB4pSM4pSB4pSB4pSQ4pSB4pSTXG4gICAqICAgICAgICAgIOKUlOKUgOKUgOKUmCAgICAgICAgICAgICDilIIgIOKUglxuICAgKiAgZnJvbSAg4pSDICAgICAg4pSDICAgICB0byAg4pSDIOKUlOKUgOKUgOKUmCDilINcbiAgICpcbiAgICogICAgICAgIOKUl+KUgSDilIHilIEg4pSB4pSbICAgICAgICAg4pSX4pSBIOKUgeKUgSDilIHilJtcbiAgICpcbiAgICogSWYgZWxlbWVudCBlZGdlIEIgaXMgb3V0c2lkZSBzY3JvbGxpbmcgYm94IGVkZ2UgQiBhbmQgZWxlbWVudCBoZWlnaHQgaXMgZ3JlYXRlciB0aGFuIHNjcm9sbGluZyBib3ggaGVpZ2h0XG4gICAqXG4gICAqICAgICAgICDilI/ilIEg4pSB4pSBIOKUgeKUkyAgICAgICAgIOKUj+KUgeKUjOKUgeKUgeKUkOKUgeKUk1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUgiAg4pSCXG4gICAqICBmcm9tICDilIMg4pSM4pSA4pSA4pSQIOKUgyAgICAgdG8gIOKUgyDilIIgIOKUgiDilINcbiAgICogICAgICAgICAg4pSCICDilIIgICAgICAgICAgICAg4pSCICDilIJcbiAgICogICAgICAgIOKUl+KUgeKUguKUgeKUgeKUguKUgeKUmyAgICAgICAgIOKUl+KUgeKUguKUgeKUgeKUguKUgeKUm1xuICAgKiAgICAgICAgICDilIIgIOKUgiAgICAgICAgICAgICDilJTilIDilIDilJhcbiAgICogICAgICAgICAg4pSCICDilIJcbiAgICogICAgICAgICAg4pSU4pSA4pSA4pSYXG4gICAqXG4gICAqIElmIGVsZW1lbnQgZWRnZSBDIGlzIG91dHNpZGUgc2Nyb2xsaW5nIGJveCBlZGdlIEMgYW5kIGVsZW1lbnQgd2lkdGggaXMgbGVzcyB0aGFuIHNjcm9sbGluZyBib3ggd2lkdGhcbiAgICpcbiAgICogICAgICAgZnJvbSAgICAgICAgICAgICAgICAgdG9cbiAgICogICAg4pSPIOKUgSDilIEg4pSBIOKUgSDilJMgICAgICAgICDilI8g4pSBIOKUgSDilIEg4pSBIOKUk1xuICAgKiAg4pSM4pSA4pSA4pSA4pSQICAgICAgICAgICAgICAgICDilIzilIDilIDilIDilJBcbiAgICogIOKUgiDilIMg4pSCICAgICAgIOKUgyAgICAgICAgIOKUgyAgIOKUgiAgICAg4pSDXG4gICAqICDilJTilIDilIDilIDilJggICAgICAgICAgICAgICAgIOKUlOKUgOKUgOKUgOKUmFxuICAgKiAgICDilJcg4pSBIOKUgSDilIEg4pSBIOKUmyAgICAgICAgIOKUlyDilIEg4pSBIOKUgSDilIEg4pSbXG4gICAqXG4gICAqIElmIGVsZW1lbnQgZWRnZSBEIGlzIG91dHNpZGUgc2Nyb2xsaW5nIGJveCBlZGdlIEQgYW5kIGVsZW1lbnQgd2lkdGggaXMgZ3JlYXRlciB0aGFuIHNjcm9sbGluZyBib3ggd2lkdGhcbiAgICpcbiAgICogICAgICAgZnJvbSAgICAgICAgICAgICAgICAgdG9cbiAgICogICAg4pSPIOKUgSDilIEg4pSBIOKUgSDilJMgICAgICAgICDilI8g4pSBIOKUgSDilIEg4pSBIOKUk1xuICAgKiAgICAgICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQXG4gICAqICAgIOKUgyAgIOKUgiAgICAg4pSDICAgICDilIIgICDilIMgICAgICAgICDilIMg4pSCXG4gICAqICAgICAgICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJggICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJhcbiAgICogICAg4pSXIOKUgSDilIEg4pSBIOKUgSDilJsgICAgICAgICDilJcg4pSBIOKUgSDilIEg4pSBIOKUm1xuICAgKi9cbiAgaWYgKFxuICAgIChlbGVtZW50RWRnZVN0YXJ0IDw9IHNjcm9sbGluZ0VkZ2VTdGFydCAmJiBlbGVtZW50U2l6ZSA8PSBzY3JvbGxpbmdTaXplKSB8fFxuICAgIChlbGVtZW50RWRnZUVuZCA+PSBzY3JvbGxpbmdFZGdlRW5kICYmIGVsZW1lbnRTaXplID49IHNjcm9sbGluZ1NpemUpXG4gICkge1xuICAgIHJldHVybiBlbGVtZW50RWRnZVN0YXJ0IC0gc2Nyb2xsaW5nRWRnZVN0YXJ0IC0gc2Nyb2xsaW5nQm9yZGVyU3RhcnRcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBlbGVtZW50IGVkZ2UgQiBpcyBvdXRzaWRlIHNjcm9sbGluZyBib3ggZWRnZSBCIGFuZCBlbGVtZW50IGhlaWdodCBpcyBsZXNzIHRoYW4gc2Nyb2xsaW5nIGJveCBoZWlnaHRcbiAgICpcbiAgICogICAgICAgIOKUj+KUgSDilIHilIEg4pSB4pSTICAgICAgICAg4pSP4pSBIOKUgeKUgSDilIHilJNcbiAgICpcbiAgICogIGZyb20gIOKUgyAgICAgIOKUgyAgICAgdG8gIOKUgyDilIzilIDilIDilJAg4pSDXG4gICAqICAgICAgICAgIOKUjOKUgOKUgOKUkCAgICAgICAgICAgICDilIIgIOKUglxuICAgKiAgICAgICAg4pSX4pSB4pSC4pSB4pSB4pSC4pSB4pSbICAgICAgICAg4pSX4pSB4pSU4pSB4pSB4pSY4pSB4pSbXG4gICAqICAgICAgICAgIOKUlOKUgOKUgOKUmFxuICAgKlxuICAgKiBJZiBlbGVtZW50IGVkZ2UgQSBpcyBvdXRzaWRlIHNjcm9sbGluZyBib3ggZWRnZSBBIGFuZCBlbGVtZW50IGhlaWdodCBpcyBncmVhdGVyIHRoYW4gc2Nyb2xsaW5nIGJveCBoZWlnaHRcbiAgICpcbiAgICogICAgICAgICAg4pSM4pSA4pSA4pSQXG4gICAqICAgICAgICAgIOKUgiAg4pSCXG4gICAqICAgICAgICAgIOKUgiAg4pSCICAgICAgICAgICAgIOKUjOKUgOKUgOKUkFxuICAgKiAgICAgICAg4pSP4pSB4pSC4pSB4pSB4pSC4pSB4pSTICAgICAgICAg4pSP4pSB4pSC4pSB4pSB4pSC4pSB4pSTXG4gICAqICAgICAgICAgIOKUgiAg4pSCICAgICAgICAgICAgIOKUgiAg4pSCXG4gICAqICBmcm9tICDilIMg4pSU4pSA4pSA4pSYIOKUgyAgICAgdG8gIOKUgyDilIIgIOKUgiDilINcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICDilIIgIOKUglxuICAgKiAgICAgICAg4pSX4pSBIOKUgeKUgSDilIHilJsgICAgICAgICDilJfilIHilJTilIHilIHilJjilIHilJtcbiAgICpcbiAgICogSWYgZWxlbWVudCBlZGdlIEMgaXMgb3V0c2lkZSBzY3JvbGxpbmcgYm94IGVkZ2UgQyBhbmQgZWxlbWVudCB3aWR0aCBpcyBncmVhdGVyIHRoYW4gc2Nyb2xsaW5nIGJveCB3aWR0aFxuICAgKlxuICAgKiAgICAgICAgICAgZnJvbSAgICAgICAgICAgICAgICAgdG9cbiAgICogICAgICAgIOKUjyDilIEg4pSBIOKUgSDilIEg4pSTICAgICAgICAg4pSPIOKUgSDilIEg4pSBIOKUgSDilJNcbiAgICogIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQXG4gICAqICDilIIgICAgIOKUgyAgICAg4pSCICAg4pSDICAgICAgIOKUgiDilIMgICAgICAgICDilINcbiAgICogIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCAgICAgICAgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYXG4gICAqICAgICAgICDilJcg4pSBIOKUgSDilIEg4pSBIOKUmyAgICAgICAgIOKUlyDilIEg4pSBIOKUgSDilIEg4pSbXG4gICAqXG4gICAqIElmIGVsZW1lbnQgZWRnZSBEIGlzIG91dHNpZGUgc2Nyb2xsaW5nIGJveCBlZGdlIEQgYW5kIGVsZW1lbnQgd2lkdGggaXMgbGVzcyB0aGFuIHNjcm9sbGluZyBib3ggd2lkdGhcbiAgICpcbiAgICogICAgICAgICAgIGZyb20gICAgICAgICAgICAgICAgIHRvXG4gICAqICAgICAgICDilI8g4pSBIOKUgSDilIEg4pSBIOKUkyAgICAgICAgIOKUjyDilIEg4pSBIOKUgSDilIEg4pSTXG4gICAqICAgICAgICAgICAgICAgIOKUjOKUgOKUgOKUgOKUkCAgICAgICAgICAgICDilIzilIDilIDilIDilJBcbiAgICogICAgICAgIOKUgyAgICAgICDilIIg4pSDIOKUgiAgICAgICDilIMgICAgIOKUgiAgIOKUg1xuICAgKiAgICAgICAgICAgICAgICDilJTilIDilIDilIDilJggICAgICAgICAgICAg4pSU4pSA4pSA4pSA4pSYXG4gICAqICAgICAgICDilJcg4pSBIOKUgSDilIEg4pSBIOKUmyAgICAgICAgIOKUlyDilIEg4pSBIOKUgSDilIEg4pSbXG4gICAqXG4gICAqL1xuICBpZiAoXG4gICAgKGVsZW1lbnRFZGdlRW5kID4gc2Nyb2xsaW5nRWRnZUVuZCAmJiBlbGVtZW50U2l6ZSA8IHNjcm9sbGluZ1NpemUpIHx8XG4gICAgKGVsZW1lbnRFZGdlU3RhcnQgPCBzY3JvbGxpbmdFZGdlU3RhcnQgJiYgZWxlbWVudFNpemUgPiBzY3JvbGxpbmdTaXplKVxuICApIHtcbiAgICByZXR1cm4gZWxlbWVudEVkZ2VFbmQgLSBzY3JvbGxpbmdFZGdlRW5kICsgc2Nyb2xsaW5nQm9yZGVyRW5kXG4gIH1cblxuICByZXR1cm4gMFxufVxuXG5mdW5jdGlvbiBnZXRQYXJlbnRFbGVtZW50KGVsZW1lbnQ6IE5vZGUpOiBFbGVtZW50IHwgbnVsbCB7XG4gIGNvbnN0IHBhcmVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudFxuICBpZiAocGFyZW50ID09IG51bGwpIHtcbiAgICByZXR1cm4gKGVsZW1lbnQuZ2V0Um9vdE5vZGUoKSBhcyBTaGFkb3dSb290KS5ob3N0IHx8IG51bGxcbiAgfVxuICByZXR1cm4gcGFyZW50XG59XG5cbmV4cG9ydCBkZWZhdWx0ICh0YXJnZXQ6IEVsZW1lbnQsIG9wdGlvbnM6IE9wdGlvbnMpOiBDdXN0b21TY3JvbGxBY3Rpb25bXSA9PiB7XG4gIC8vVE9ETzogcmVtb3ZlIHRoaXMgaGFjayB3aGVuIG1pY3JvYnVuZGxlIHdpbGwgc3VwcG9ydCB0eXBlc2NyaXB0ID49IDQuMFxuICBjb25zdCB3aW5kb3dXaXRoVmlld3BvcnQgPSB3aW5kb3cgYXMgdW5rbm93biBhcyBXaW5kb3cgJiB7XG4gICAgdmlzdWFsVmlld3BvcnQ6IHZpc3VhbFZpZXdwb3J0XG4gIH1cblxuICBjb25zdCB7IHNjcm9sbE1vZGUsIGJsb2NrLCBpbmxpbmUsIGJvdW5kYXJ5LCBza2lwT3ZlcmZsb3dIaWRkZW5FbGVtZW50cyB9ID1cbiAgICBvcHRpb25zXG4gIC8vIEFsbG93IHVzaW5nIGEgY2FsbGJhY2sgdG8gY2hlY2sgdGhlIGJvdW5kYXJ5XG4gIC8vIFRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHRvIGNoZWNrIGlmIHRoZSBjdXJyZW50IHRhcmdldCBtYXRjaGVzIHRoZSBib3VuZGFyeSBlbGVtZW50IG9yIG5vdFxuICAvLyBJZiB1bmRlZmluZWQgaXQnbGwgY2hlY2sgdGhhdCB0YXJnZXQgaXMgbmV2ZXIgdW5kZWZpbmVkIChjYW4gaGFwcGVuIGFzIHdlIHJlY3Vyc2UgdXAgdGhlIHRyZWUpXG4gIGNvbnN0IGNoZWNrQm91bmRhcnkgPVxuICAgIHR5cGVvZiBib3VuZGFyeSA9PT0gJ2Z1bmN0aW9uJyA/IGJvdW5kYXJ5IDogKG5vZGU6IGFueSkgPT4gbm9kZSAhPT0gYm91bmRhcnlcblxuICBpZiAoIWlzRWxlbWVudCh0YXJnZXQpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB0YXJnZXQnKVxuICB9XG5cbiAgLy8gVXNlZCB0byBoYW5kbGUgdGhlIHRvcCBtb3N0IGVsZW1lbnQgdGhhdCBjYW4gYmUgc2Nyb2xsZWRcbiAgY29uc3Qgc2Nyb2xsaW5nRWxlbWVudCA9IGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XG5cbiAgLy8gQ29sbGVjdCBhbGwgdGhlIHNjcm9sbGluZyBib3hlcywgYXMgZGVmaW5lZCBpbiB0aGUgc3BlYzogaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzc29tLXZpZXcvI3Njcm9sbGluZy1ib3hcbiAgY29uc3QgZnJhbWVzOiBFbGVtZW50W10gPSBbXVxuICBsZXQgY3Vyc29yOiBFbGVtZW50IHwgbnVsbCA9IHRhcmdldFxuICB3aGlsZSAoaXNFbGVtZW50KGN1cnNvcikgJiYgY2hlY2tCb3VuZGFyeShjdXJzb3IpKSB7XG4gICAgLy8gTW92ZSBjdXJzb3IgdG8gcGFyZW50XG4gICAgY3Vyc29yID0gZ2V0UGFyZW50RWxlbWVudChjdXJzb3IpXG5cbiAgICAvLyBTdG9wIHdoZW4gd2UgcmVhY2ggdGhlIHZpZXdwb3J0XG4gICAgaWYgKGN1cnNvciA9PT0gc2Nyb2xsaW5nRWxlbWVudCkge1xuICAgICAgZnJhbWVzLnB1c2goY3Vyc29yKVxuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICAvLyBTa2lwIGRvY3VtZW50LmJvZHkgaWYgaXQncyBub3QgdGhlIHNjcm9sbGluZ0VsZW1lbnQgYW5kIGRvY3VtZW50RWxlbWVudCBpc24ndCBpbmRlcGVuZGVudGx5IHNjcm9sbGFibGVcbiAgICBpZiAoXG4gICAgICBjdXJzb3IgIT0gbnVsbCAmJlxuICAgICAgY3Vyc29yID09PSBkb2N1bWVudC5ib2R5ICYmXG4gICAgICBpc1Njcm9sbGFibGUoY3Vyc29yKSAmJlxuICAgICAgIWlzU2Nyb2xsYWJsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpXG4gICAgKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIC8vIE5vdyB3ZSBjaGVjayBpZiB0aGUgZWxlbWVudCBpcyBzY3JvbGxhYmxlLCB0aGlzIGNvZGUgb25seSBydW5zIGlmIHRoZSBsb29wIGhhdmVuJ3QgYWxyZWFkeSBoaXQgdGhlIHZpZXdwb3J0IG9yIGEgY3VzdG9tIGJvdW5kYXJ5XG4gICAgaWYgKGN1cnNvciAhPSBudWxsICYmIGlzU2Nyb2xsYWJsZShjdXJzb3IsIHNraXBPdmVyZmxvd0hpZGRlbkVsZW1lbnRzKSkge1xuICAgICAgZnJhbWVzLnB1c2goY3Vyc29yKVxuICAgIH1cbiAgfVxuXG4gIC8vIFN1cHBvcnQgcGluY2gtem9vbWluZyBwcm9wZXJseSwgbWFraW5nIHN1cmUgZWxlbWVudHMgc2Nyb2xsIGludG8gdGhlIHZpc3VhbCB2aWV3cG9ydFxuICAvLyBCcm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgdmlzdWFsVmlld3BvcnQgd2lsbCByZXBvcnQgdGhlIGxheW91dCB2aWV3cG9ydCBkaW1lbnNpb25zIG9uIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC9IZWlnaHRcbiAgLy8gYW5kIHZpZXdwb3J0IGRpbWVuc2lvbnMgb24gd2luZG93LmlubmVyV2lkdGgvSGVpZ2h0XG4gIC8vIGh0dHBzOi8vd3d3LnF1aXJrc21vZGUub3JnL21vYmlsZS92aWV3cG9ydHMyLmh0bWxcbiAgLy8gaHR0cHM6Ly9ib2thbmQuZ2l0aHViLmlvL3ZpZXdwb3J0L2luZGV4Lmh0bWxcbiAgY29uc3Qgdmlld3BvcnRXaWR0aCA9IHdpbmRvd1dpdGhWaWV3cG9ydC52aXN1YWxWaWV3cG9ydFxuICAgID8gd2luZG93V2l0aFZpZXdwb3J0LnZpc3VhbFZpZXdwb3J0LndpZHRoXG4gICAgOiBpbm5lcldpZHRoXG4gIGNvbnN0IHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93V2l0aFZpZXdwb3J0LnZpc3VhbFZpZXdwb3J0XG4gICAgPyB3aW5kb3dXaXRoVmlld3BvcnQudmlzdWFsVmlld3BvcnQuaGVpZ2h0XG4gICAgOiBpbm5lckhlaWdodFxuXG4gIC8vIE5ld2VyIGJyb3dzZXJzIHN1cHBvcnRzIHNjcm9sbFtYfFldLCBwYWdlW1h8WV1PZmZzZXQgaXNcbiAgY29uc3Qgdmlld3BvcnRYID0gd2luZG93LnNjcm9sbFggfHwgcGFnZVhPZmZzZXRcbiAgY29uc3Qgdmlld3BvcnRZID0gd2luZG93LnNjcm9sbFkgfHwgcGFnZVlPZmZzZXRcblxuICBjb25zdCB7XG4gICAgaGVpZ2h0OiB0YXJnZXRIZWlnaHQsXG4gICAgd2lkdGg6IHRhcmdldFdpZHRoLFxuICAgIHRvcDogdGFyZ2V0VG9wLFxuICAgIHJpZ2h0OiB0YXJnZXRSaWdodCxcbiAgICBib3R0b206IHRhcmdldEJvdHRvbSxcbiAgICBsZWZ0OiB0YXJnZXRMZWZ0LFxuICB9ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiAgLy8gVGhlc2UgdmFsdWVzIG11dGF0ZSBhcyB3ZSBsb29wIHRocm91Z2ggYW5kIGdlbmVyYXRlIHNjcm9sbCBjb29yZGluYXRlc1xuICBsZXQgdGFyZ2V0QmxvY2s6IG51bWJlciA9XG4gICAgYmxvY2sgPT09ICdzdGFydCcgfHwgYmxvY2sgPT09ICduZWFyZXN0J1xuICAgICAgPyB0YXJnZXRUb3BcbiAgICAgIDogYmxvY2sgPT09ICdlbmQnXG4gICAgICA/IHRhcmdldEJvdHRvbVxuICAgICAgOiB0YXJnZXRUb3AgKyB0YXJnZXRIZWlnaHQgLyAyIC8vIGJsb2NrID09PSAnY2VudGVyXG4gIGxldCB0YXJnZXRJbmxpbmU6IG51bWJlciA9XG4gICAgaW5saW5lID09PSAnY2VudGVyJ1xuICAgICAgPyB0YXJnZXRMZWZ0ICsgdGFyZ2V0V2lkdGggLyAyXG4gICAgICA6IGlubGluZSA9PT0gJ2VuZCdcbiAgICAgID8gdGFyZ2V0UmlnaHRcbiAgICAgIDogdGFyZ2V0TGVmdCAvLyBpbmxpbmUgPT09ICdzdGFydCB8fCBpbmxpbmUgPT09ICduZWFyZXN0XG5cbiAgLy8gQ29sbGVjdCBuZXcgc2Nyb2xsIHBvc2l0aW9uc1xuICBjb25zdCBjb21wdXRhdGlvbnM6IEN1c3RvbVNjcm9sbEFjdGlvbltdID0gW11cbiAgLy8gSW4gY2hyb21lIHRoZXJlJ3Mgbm8gbG9uZ2VyIGEgZGlmZmVyZW5jZSBiZXR3ZWVuIGNhY2hpbmcgdGhlIGBmcmFtZXMubGVuZ3RoYCB0byBhIHZhciBvciBub3QsIHNvIHdlIGRvbid0IGluIHRoaXMgY2FzZSAoc2l6ZSA+IHNwZWVkIGFueXdheXMpXG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBmcmFtZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgY29uc3QgZnJhbWUgPSBmcmFtZXNbaW5kZXhdXG5cbiAgICAvLyBAVE9ETyBhZGQgYSBzaG91bGRTY3JvbGwgaG9vayBoZXJlIHRoYXQgYWxsb3dzIHVzZXJsYW5kIGNvZGUgdG8gdGFrZSBjb250cm9sXG5cbiAgICBjb25zdCB7IGhlaWdodCwgd2lkdGgsIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCB9ID1cbiAgICAgIGZyYW1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiAgICAvLyBJZiB0aGUgZWxlbWVudCBpcyBhbHJlYWR5IHZpc2libGUgd2UgY2FuIGVuZCBpdCBoZXJlXG4gICAgLy8gQFRPRE8gdGFyZ2V0QmxvY2sgYW5kIHRhcmdldElubGluZSBzaG91bGQgYmUgdGFrZW4gaW50byBhY2NvdW50IHRvIGJlIGNvbXBsaWFudCB3aXRoIGh0dHBzOi8vZ2l0aHViLmNvbS93M2MvY3Nzd2ctZHJhZnRzL3B1bGwvMTgwNS9maWxlcyNkaWZmLTNjMTdmMGU0M2MyMGY4ZWNmODk0MTlkNDllN2VmNWUwUjEzMzNcbiAgICBpZiAoXG4gICAgICBzY3JvbGxNb2RlID09PSAnaWYtbmVlZGVkJyAmJlxuICAgICAgdGFyZ2V0VG9wID49IDAgJiZcbiAgICAgIHRhcmdldExlZnQgPj0gMCAmJlxuICAgICAgdGFyZ2V0Qm90dG9tIDw9IHZpZXdwb3J0SGVpZ2h0ICYmXG4gICAgICB0YXJnZXRSaWdodCA8PSB2aWV3cG9ydFdpZHRoICYmXG4gICAgICB0YXJnZXRUb3AgPj0gdG9wICYmXG4gICAgICB0YXJnZXRCb3R0b20gPD0gYm90dG9tICYmXG4gICAgICB0YXJnZXRMZWZ0ID49IGxlZnQgJiZcbiAgICAgIHRhcmdldFJpZ2h0IDw9IHJpZ2h0XG4gICAgKSB7XG4gICAgICAvLyBCcmVhayB0aGUgbG9vcCBhbmQgcmV0dXJuIHRoZSBjb21wdXRhdGlvbnMgZm9yIHRoaW5ncyB0aGF0IGFyZSBub3QgZnVsbHkgdmlzaWJsZVxuICAgICAgcmV0dXJuIGNvbXB1dGF0aW9uc1xuICAgIH1cblxuICAgIGNvbnN0IGZyYW1lU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGZyYW1lKVxuICAgIGNvbnN0IGJvcmRlckxlZnQgPSBwYXJzZUludChmcmFtZVN0eWxlLmJvcmRlckxlZnRXaWR0aCBhcyBzdHJpbmcsIDEwKVxuICAgIGNvbnN0IGJvcmRlclRvcCA9IHBhcnNlSW50KGZyYW1lU3R5bGUuYm9yZGVyVG9wV2lkdGggYXMgc3RyaW5nLCAxMClcbiAgICBjb25zdCBib3JkZXJSaWdodCA9IHBhcnNlSW50KGZyYW1lU3R5bGUuYm9yZGVyUmlnaHRXaWR0aCBhcyBzdHJpbmcsIDEwKVxuICAgIGNvbnN0IGJvcmRlckJvdHRvbSA9IHBhcnNlSW50KGZyYW1lU3R5bGUuYm9yZGVyQm90dG9tV2lkdGggYXMgc3RyaW5nLCAxMClcblxuICAgIGxldCBibG9ja1Njcm9sbDogbnVtYmVyID0gMFxuICAgIGxldCBpbmxpbmVTY3JvbGw6IG51bWJlciA9IDBcblxuICAgIC8vIFRoZSBwcm9wZXJ0eSBleGlzdGFuY2UgY2hlY2tzIGZvciBvZmZmc2V0W1dpZHRofEhlaWdodF0gaXMgYmVjYXVzZSBvbmx5IEhUTUxFbGVtZW50IG9iamVjdHMgaGF2ZSB0aGVtLCBidXQgYW55IEVsZW1lbnQgbWlnaHQgcGFzcyBieSBoZXJlXG4gICAgLy8gQFRPRE8gZmluZCBvdXQgaWYgdGhlIFwiYXMgSFRNTEVsZW1lbnRcIiBvdmVycmlkZXMgY2FuIGJlIGRyb3BwZWRcbiAgICBjb25zdCBzY3JvbGxiYXJXaWR0aCA9XG4gICAgICAnb2Zmc2V0V2lkdGgnIGluIGZyYW1lXG4gICAgICAgID8gKGZyYW1lIGFzIEhUTUxFbGVtZW50KS5vZmZzZXRXaWR0aCAtXG4gICAgICAgICAgKGZyYW1lIGFzIEhUTUxFbGVtZW50KS5jbGllbnRXaWR0aCAtXG4gICAgICAgICAgYm9yZGVyTGVmdCAtXG4gICAgICAgICAgYm9yZGVyUmlnaHRcbiAgICAgICAgOiAwXG4gICAgY29uc3Qgc2Nyb2xsYmFySGVpZ2h0ID1cbiAgICAgICdvZmZzZXRIZWlnaHQnIGluIGZyYW1lXG4gICAgICAgID8gKGZyYW1lIGFzIEhUTUxFbGVtZW50KS5vZmZzZXRIZWlnaHQgLVxuICAgICAgICAgIChmcmFtZSBhcyBIVE1MRWxlbWVudCkuY2xpZW50SGVpZ2h0IC1cbiAgICAgICAgICBib3JkZXJUb3AgLVxuICAgICAgICAgIGJvcmRlckJvdHRvbVxuICAgICAgICA6IDBcblxuICAgIGNvbnN0IHNjYWxlWCA9XG4gICAgICAnb2Zmc2V0V2lkdGgnIGluIGZyYW1lXG4gICAgICAgID8gKGZyYW1lIGFzIEhUTUxFbGVtZW50KS5vZmZzZXRXaWR0aCA9PT0gMFxuICAgICAgICAgID8gMFxuICAgICAgICAgIDogd2lkdGggLyAoZnJhbWUgYXMgSFRNTEVsZW1lbnQpLm9mZnNldFdpZHRoXG4gICAgICAgIDogMFxuICAgIGNvbnN0IHNjYWxlWSA9XG4gICAgICAnb2Zmc2V0SGVpZ2h0JyBpbiBmcmFtZVxuICAgICAgICA/IChmcmFtZSBhcyBIVE1MRWxlbWVudCkub2Zmc2V0SGVpZ2h0ID09PSAwXG4gICAgICAgICAgPyAwXG4gICAgICAgICAgOiBoZWlnaHQgLyAoZnJhbWUgYXMgSFRNTEVsZW1lbnQpLm9mZnNldEhlaWdodFxuICAgICAgICA6IDBcblxuICAgIGlmIChzY3JvbGxpbmdFbGVtZW50ID09PSBmcmFtZSkge1xuICAgICAgLy8gSGFuZGxlIHZpZXdwb3J0IGxvZ2ljIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgb3IgZG9jdW1lbnQuYm9keSlcblxuICAgICAgaWYgKGJsb2NrID09PSAnc3RhcnQnKSB7XG4gICAgICAgIGJsb2NrU2Nyb2xsID0gdGFyZ2V0QmxvY2tcbiAgICAgIH0gZWxzZSBpZiAoYmxvY2sgPT09ICdlbmQnKSB7XG4gICAgICAgIGJsb2NrU2Nyb2xsID0gdGFyZ2V0QmxvY2sgLSB2aWV3cG9ydEhlaWdodFxuICAgICAgfSBlbHNlIGlmIChibG9jayA9PT0gJ25lYXJlc3QnKSB7XG4gICAgICAgIGJsb2NrU2Nyb2xsID0gYWxpZ25OZWFyZXN0KFxuICAgICAgICAgIHZpZXdwb3J0WSxcbiAgICAgICAgICB2aWV3cG9ydFkgKyB2aWV3cG9ydEhlaWdodCxcbiAgICAgICAgICB2aWV3cG9ydEhlaWdodCxcbiAgICAgICAgICBib3JkZXJUb3AsXG4gICAgICAgICAgYm9yZGVyQm90dG9tLFxuICAgICAgICAgIHZpZXdwb3J0WSArIHRhcmdldEJsb2NrLFxuICAgICAgICAgIHZpZXdwb3J0WSArIHRhcmdldEJsb2NrICsgdGFyZ2V0SGVpZ2h0LFxuICAgICAgICAgIHRhcmdldEhlaWdodFxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBibG9jayA9PT0gJ2NlbnRlcicgaXMgdGhlIGRlZmF1bHRcbiAgICAgICAgYmxvY2tTY3JvbGwgPSB0YXJnZXRCbG9jayAtIHZpZXdwb3J0SGVpZ2h0IC8gMlxuICAgICAgfVxuXG4gICAgICBpZiAoaW5saW5lID09PSAnc3RhcnQnKSB7XG4gICAgICAgIGlubGluZVNjcm9sbCA9IHRhcmdldElubGluZVxuICAgICAgfSBlbHNlIGlmIChpbmxpbmUgPT09ICdjZW50ZXInKSB7XG4gICAgICAgIGlubGluZVNjcm9sbCA9IHRhcmdldElubGluZSAtIHZpZXdwb3J0V2lkdGggLyAyXG4gICAgICB9IGVsc2UgaWYgKGlubGluZSA9PT0gJ2VuZCcpIHtcbiAgICAgICAgaW5saW5lU2Nyb2xsID0gdGFyZ2V0SW5saW5lIC0gdmlld3BvcnRXaWR0aFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaW5saW5lID09PSAnbmVhcmVzdCcgaXMgdGhlIGRlZmF1bHRcbiAgICAgICAgaW5saW5lU2Nyb2xsID0gYWxpZ25OZWFyZXN0KFxuICAgICAgICAgIHZpZXdwb3J0WCxcbiAgICAgICAgICB2aWV3cG9ydFggKyB2aWV3cG9ydFdpZHRoLFxuICAgICAgICAgIHZpZXdwb3J0V2lkdGgsXG4gICAgICAgICAgYm9yZGVyTGVmdCxcbiAgICAgICAgICBib3JkZXJSaWdodCxcbiAgICAgICAgICB2aWV3cG9ydFggKyB0YXJnZXRJbmxpbmUsXG4gICAgICAgICAgdmlld3BvcnRYICsgdGFyZ2V0SW5saW5lICsgdGFyZ2V0V2lkdGgsXG4gICAgICAgICAgdGFyZ2V0V2lkdGhcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICAvLyBBcHBseSBzY3JvbGwgcG9zaXRpb24gb2Zmc2V0cyBhbmQgZW5zdXJlIHRoZXkgYXJlIHdpdGhpbiBib3VuZHNcbiAgICAgIC8vIEBUT0RPIGFkZCBtb3JlIHRlc3QgY2FzZXMgdG8gY292ZXIgdGhpcyAxMDAlXG4gICAgICBibG9ja1Njcm9sbCA9IE1hdGgubWF4KDAsIGJsb2NrU2Nyb2xsICsgdmlld3BvcnRZKVxuICAgICAgaW5saW5lU2Nyb2xsID0gTWF0aC5tYXgoMCwgaW5saW5lU2Nyb2xsICsgdmlld3BvcnRYKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBIYW5kbGUgZWFjaCBzY3JvbGxpbmcgZnJhbWUgdGhhdCBtaWdodCBleGlzdCBiZXR3ZWVuIHRoZSB0YXJnZXQgYW5kIHRoZSB2aWV3cG9ydFxuXG4gICAgICBpZiAoYmxvY2sgPT09ICdzdGFydCcpIHtcbiAgICAgICAgYmxvY2tTY3JvbGwgPSB0YXJnZXRCbG9jayAtIHRvcCAtIGJvcmRlclRvcFxuICAgICAgfSBlbHNlIGlmIChibG9jayA9PT0gJ2VuZCcpIHtcbiAgICAgICAgYmxvY2tTY3JvbGwgPSB0YXJnZXRCbG9jayAtIGJvdHRvbSArIGJvcmRlckJvdHRvbSArIHNjcm9sbGJhckhlaWdodFxuICAgICAgfSBlbHNlIGlmIChibG9jayA9PT0gJ25lYXJlc3QnKSB7XG4gICAgICAgIGJsb2NrU2Nyb2xsID0gYWxpZ25OZWFyZXN0KFxuICAgICAgICAgIHRvcCxcbiAgICAgICAgICBib3R0b20sXG4gICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgIGJvcmRlclRvcCxcbiAgICAgICAgICBib3JkZXJCb3R0b20gKyBzY3JvbGxiYXJIZWlnaHQsXG4gICAgICAgICAgdGFyZ2V0QmxvY2ssXG4gICAgICAgICAgdGFyZ2V0QmxvY2sgKyB0YXJnZXRIZWlnaHQsXG4gICAgICAgICAgdGFyZ2V0SGVpZ2h0XG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGJsb2NrID09PSAnY2VudGVyJyBpcyB0aGUgZGVmYXVsdFxuICAgICAgICBibG9ja1Njcm9sbCA9IHRhcmdldEJsb2NrIC0gKHRvcCArIGhlaWdodCAvIDIpICsgc2Nyb2xsYmFySGVpZ2h0IC8gMlxuICAgICAgfVxuXG4gICAgICBpZiAoaW5saW5lID09PSAnc3RhcnQnKSB7XG4gICAgICAgIGlubGluZVNjcm9sbCA9IHRhcmdldElubGluZSAtIGxlZnQgLSBib3JkZXJMZWZ0XG4gICAgICB9IGVsc2UgaWYgKGlubGluZSA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgaW5saW5lU2Nyb2xsID0gdGFyZ2V0SW5saW5lIC0gKGxlZnQgKyB3aWR0aCAvIDIpICsgc2Nyb2xsYmFyV2lkdGggLyAyXG4gICAgICB9IGVsc2UgaWYgKGlubGluZSA9PT0gJ2VuZCcpIHtcbiAgICAgICAgaW5saW5lU2Nyb2xsID0gdGFyZ2V0SW5saW5lIC0gcmlnaHQgKyBib3JkZXJSaWdodCArIHNjcm9sbGJhcldpZHRoXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpbmxpbmUgPT09ICduZWFyZXN0JyBpcyB0aGUgZGVmYXVsdFxuICAgICAgICBpbmxpbmVTY3JvbGwgPSBhbGlnbk5lYXJlc3QoXG4gICAgICAgICAgbGVmdCxcbiAgICAgICAgICByaWdodCxcbiAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICBib3JkZXJMZWZ0LFxuICAgICAgICAgIGJvcmRlclJpZ2h0ICsgc2Nyb2xsYmFyV2lkdGgsXG4gICAgICAgICAgdGFyZ2V0SW5saW5lLFxuICAgICAgICAgIHRhcmdldElubGluZSArIHRhcmdldFdpZHRoLFxuICAgICAgICAgIHRhcmdldFdpZHRoXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBzY3JvbGxMZWZ0LCBzY3JvbGxUb3AgfSA9IGZyYW1lXG4gICAgICAvLyBFbnN1cmUgc2Nyb2xsIGNvb3JkaW5hdGVzIGFyZSBub3Qgb3V0IG9mIGJvdW5kcyB3aGlsZSBhcHBseWluZyBzY3JvbGwgb2Zmc2V0c1xuICAgICAgYmxvY2tTY3JvbGwgPSBNYXRoLm1heChcbiAgICAgICAgMCxcbiAgICAgICAgTWF0aC5taW4oXG4gICAgICAgICAgc2Nyb2xsVG9wICsgYmxvY2tTY3JvbGwgLyBzY2FsZVksXG4gICAgICAgICAgZnJhbWUuc2Nyb2xsSGVpZ2h0IC0gaGVpZ2h0IC8gc2NhbGVZICsgc2Nyb2xsYmFySGVpZ2h0XG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIGlubGluZVNjcm9sbCA9IE1hdGgubWF4KFxuICAgICAgICAwLFxuICAgICAgICBNYXRoLm1pbihcbiAgICAgICAgICBzY3JvbGxMZWZ0ICsgaW5saW5lU2Nyb2xsIC8gc2NhbGVYLFxuICAgICAgICAgIGZyYW1lLnNjcm9sbFdpZHRoIC0gd2lkdGggLyBzY2FsZVggKyBzY3JvbGxiYXJXaWR0aFxuICAgICAgICApXG4gICAgICApXG5cbiAgICAgIC8vIENhY2hlIHRoZSBvZmZzZXQgc28gdGhhdCBwYXJlbnQgZnJhbWVzIGNhbiBzY3JvbGwgdGhpcyBpbnRvIHZpZXcgY29ycmVjdGx5XG4gICAgICB0YXJnZXRCbG9jayArPSBzY3JvbGxUb3AgLSBibG9ja1Njcm9sbFxuICAgICAgdGFyZ2V0SW5saW5lICs9IHNjcm9sbExlZnQgLSBpbmxpbmVTY3JvbGxcbiAgICB9XG5cbiAgICBjb21wdXRhdGlvbnMucHVzaCh7IGVsOiBmcmFtZSwgdG9wOiBibG9ja1Njcm9sbCwgbGVmdDogaW5saW5lU2Nyb2xsIH0pXG4gIH1cblxuICByZXR1cm4gY29tcHV0YXRpb25zXG59XG4iLCAiaW1wb3J0IGNvbXB1dGUgZnJvbSAnY29tcHV0ZS1zY3JvbGwtaW50by12aWV3JztcbmZ1bmN0aW9uIGlzT3B0aW9uc09iamVjdChvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zID09PSBPYmplY3Qob3B0aW9ucykgJiYgT2JqZWN0LmtleXMob3B0aW9ucykubGVuZ3RoICE9PSAwO1xufVxuZnVuY3Rpb24gZGVmYXVsdEJlaGF2aW9yKGFjdGlvbnMsIGJlaGF2aW9yKSB7XG4gIGlmIChiZWhhdmlvciA9PT0gdm9pZCAwKSB7XG4gICAgYmVoYXZpb3IgPSAnYXV0byc7XG4gIH1cbiAgdmFyIGNhblNtb290aFNjcm9sbCA9ICgnc2Nyb2xsQmVoYXZpb3InIGluIGRvY3VtZW50LmJvZHkuc3R5bGUpO1xuICBhY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZWwgPSBfcmVmLmVsLFxuICAgICAgdG9wID0gX3JlZi50b3AsXG4gICAgICBsZWZ0ID0gX3JlZi5sZWZ0O1xuICAgIGlmIChlbC5zY3JvbGwgJiYgY2FuU21vb3RoU2Nyb2xsKSB7XG4gICAgICBlbC5zY3JvbGwoe1xuICAgICAgICB0b3A6IHRvcCxcbiAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgYmVoYXZpb3I6IGJlaGF2aW9yXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuc2Nyb2xsVG9wID0gdG9wO1xuICAgICAgZWwuc2Nyb2xsTGVmdCA9IGxlZnQ7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldE9wdGlvbnMob3B0aW9ucykge1xuICBpZiAob3B0aW9ucyA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYmxvY2s6ICdlbmQnLFxuICAgICAgaW5saW5lOiAnbmVhcmVzdCdcbiAgICB9O1xuICB9XG4gIGlmIChpc09wdGlvbnNPYmplY3Qob3B0aW9ucykpIHtcbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuICByZXR1cm4ge1xuICAgIGJsb2NrOiAnc3RhcnQnLFxuICAgIGlubGluZTogJ25lYXJlc3QnXG4gIH07XG59XG5mdW5jdGlvbiBzY3JvbGxJbnRvVmlldyh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgdmFyIGlzVGFyZ2V0QXR0YWNoZWQgPSB0YXJnZXQuaXNDb25uZWN0ZWQgfHwgdGFyZ2V0Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKHRhcmdldCk7XG4gIGlmIChpc09wdGlvbnNPYmplY3Qob3B0aW9ucykgJiYgdHlwZW9mIG9wdGlvbnMuYmVoYXZpb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5iZWhhdmlvcihpc1RhcmdldEF0dGFjaGVkID8gY29tcHV0ZSh0YXJnZXQsIG9wdGlvbnMpIDogW10pO1xuICB9XG4gIGlmICghaXNUYXJnZXRBdHRhY2hlZCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgY29tcHV0ZU9wdGlvbnMgPSBnZXRPcHRpb25zKG9wdGlvbnMpO1xuICByZXR1cm4gZGVmYXVsdEJlaGF2aW9yKGNvbXB1dGUodGFyZ2V0LCBjb21wdXRlT3B0aW9ucyksIGNvbXB1dGVPcHRpb25zLmJlaGF2aW9yKTtcbn1cbmV4cG9ydCBkZWZhdWx0IHNjcm9sbEludG9WaWV3OyIsICJ2YXIgcmVzaXplT2JzZXJ2ZXJzID0gW107XG5leHBvcnQgeyByZXNpemVPYnNlcnZlcnMgfTtcbiIsICJpbXBvcnQgeyByZXNpemVPYnNlcnZlcnMgfSBmcm9tICcuLi91dGlscy9yZXNpemVPYnNlcnZlcnMnO1xudmFyIGhhc0FjdGl2ZU9ic2VydmF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcmVzaXplT2JzZXJ2ZXJzLnNvbWUoZnVuY3Rpb24gKHJvKSB7IHJldHVybiByby5hY3RpdmVUYXJnZXRzLmxlbmd0aCA+IDA7IH0pO1xufTtcbmV4cG9ydCB7IGhhc0FjdGl2ZU9ic2VydmF0aW9ucyB9O1xuIiwgImltcG9ydCB7IHJlc2l6ZU9ic2VydmVycyB9IGZyb20gJy4uL3V0aWxzL3Jlc2l6ZU9ic2VydmVycyc7XG52YXIgaGFzU2tpcHBlZE9ic2VydmF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcmVzaXplT2JzZXJ2ZXJzLnNvbWUoZnVuY3Rpb24gKHJvKSB7IHJldHVybiByby5za2lwcGVkVGFyZ2V0cy5sZW5ndGggPiAwOyB9KTtcbn07XG5leHBvcnQgeyBoYXNTa2lwcGVkT2JzZXJ2YXRpb25zIH07XG4iLCAidmFyIG1zZyA9ICdSZXNpemVPYnNlcnZlciBsb29wIGNvbXBsZXRlZCB3aXRoIHVuZGVsaXZlcmVkIG5vdGlmaWNhdGlvbnMuJztcbnZhciBkZWxpdmVyUmVzaXplTG9vcEVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBldmVudDtcbiAgICBpZiAodHlwZW9mIEVycm9yRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZXZlbnQgPSBuZXcgRXJyb3JFdmVudCgnZXJyb3InLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBtc2dcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgICBldmVudC5pbml0RXZlbnQoJ2Vycm9yJywgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgZXZlbnQubWVzc2FnZSA9IG1zZztcbiAgICB9XG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xufTtcbmV4cG9ydCB7IGRlbGl2ZXJSZXNpemVMb29wRXJyb3IgfTtcbiIsICJ2YXIgUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zO1xuKGZ1bmN0aW9uIChSZXNpemVPYnNlcnZlckJveE9wdGlvbnMpIHtcbiAgICBSZXNpemVPYnNlcnZlckJveE9wdGlvbnNbXCJCT1JERVJfQk9YXCJdID0gXCJib3JkZXItYm94XCI7XG4gICAgUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zW1wiQ09OVEVOVF9CT1hcIl0gPSBcImNvbnRlbnQtYm94XCI7XG4gICAgUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zW1wiREVWSUNFX1BJWEVMX0NPTlRFTlRfQk9YXCJdID0gXCJkZXZpY2UtcGl4ZWwtY29udGVudC1ib3hcIjtcbn0pKFJlc2l6ZU9ic2VydmVyQm94T3B0aW9ucyB8fCAoUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zID0ge30pKTtcbmV4cG9ydCB7IFJlc2l6ZU9ic2VydmVyQm94T3B0aW9ucyB9O1xuIiwgImV4cG9ydCB2YXIgZnJlZXplID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gT2JqZWN0LmZyZWV6ZShvYmopOyB9O1xuIiwgImltcG9ydCB7IGZyZWV6ZSB9IGZyb20gJy4vdXRpbHMvZnJlZXplJztcbnZhciBSZXNpemVPYnNlcnZlclNpemUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc2l6ZU9ic2VydmVyU2l6ZShpbmxpbmVTaXplLCBibG9ja1NpemUpIHtcbiAgICAgICAgdGhpcy5pbmxpbmVTaXplID0gaW5saW5lU2l6ZTtcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSBibG9ja1NpemU7XG4gICAgICAgIGZyZWV6ZSh0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmVyU2l6ZTtcbn0oKSk7XG5leHBvcnQgeyBSZXNpemVPYnNlcnZlclNpemUgfTtcbiIsICJpbXBvcnQgeyBmcmVlemUgfSBmcm9tICcuL3V0aWxzL2ZyZWV6ZSc7XG52YXIgRE9NUmVjdFJlYWRPbmx5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBET01SZWN0UmVhZE9ubHkoeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLnRvcCA9IHRoaXMueTtcbiAgICAgICAgdGhpcy5sZWZ0ID0gdGhpcy54O1xuICAgICAgICB0aGlzLmJvdHRvbSA9IHRoaXMudG9wICsgdGhpcy5oZWlnaHQ7XG4gICAgICAgIHRoaXMucmlnaHQgPSB0aGlzLmxlZnQgKyB0aGlzLndpZHRoO1xuICAgICAgICByZXR1cm4gZnJlZXplKHRoaXMpO1xuICAgIH1cbiAgICBET01SZWN0UmVhZE9ubHkucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgeCA9IF9hLngsIHkgPSBfYS55LCB0b3AgPSBfYS50b3AsIHJpZ2h0ID0gX2EucmlnaHQsIGJvdHRvbSA9IF9hLmJvdHRvbSwgbGVmdCA9IF9hLmxlZnQsIHdpZHRoID0gX2Eud2lkdGgsIGhlaWdodCA9IF9hLmhlaWdodDtcbiAgICAgICAgcmV0dXJuIHsgeDogeCwgeTogeSwgdG9wOiB0b3AsIHJpZ2h0OiByaWdodCwgYm90dG9tOiBib3R0b20sIGxlZnQ6IGxlZnQsIHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfTtcbiAgICB9O1xuICAgIERPTVJlY3RSZWFkT25seS5mcm9tUmVjdCA9IGZ1bmN0aW9uIChyZWN0YW5nbGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBET01SZWN0UmVhZE9ubHkocmVjdGFuZ2xlLngsIHJlY3RhbmdsZS55LCByZWN0YW5nbGUud2lkdGgsIHJlY3RhbmdsZS5oZWlnaHQpO1xuICAgIH07XG4gICAgcmV0dXJuIERPTVJlY3RSZWFkT25seTtcbn0oKSk7XG5leHBvcnQgeyBET01SZWN0UmVhZE9ubHkgfTtcbiIsICJ2YXIgaXNTVkcgPSBmdW5jdGlvbiAodGFyZ2V0KSB7IHJldHVybiB0YXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50ICYmICdnZXRCQm94JyBpbiB0YXJnZXQ7IH07XG52YXIgaXNIaWRkZW4gPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgaWYgKGlzU1ZHKHRhcmdldCkpIHtcbiAgICAgICAgdmFyIF9hID0gdGFyZ2V0LmdldEJCb3goKSwgd2lkdGggPSBfYS53aWR0aCwgaGVpZ2h0ID0gX2EuaGVpZ2h0O1xuICAgICAgICByZXR1cm4gIXdpZHRoICYmICFoZWlnaHQ7XG4gICAgfVxuICAgIHZhciBfYiA9IHRhcmdldCwgb2Zmc2V0V2lkdGggPSBfYi5vZmZzZXRXaWR0aCwgb2Zmc2V0SGVpZ2h0ID0gX2Iub2Zmc2V0SGVpZ2h0O1xuICAgIHJldHVybiAhKG9mZnNldFdpZHRoIHx8IG9mZnNldEhlaWdodCB8fCB0YXJnZXQuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpO1xufTtcbnZhciBpc0VsZW1lbnQgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChvYmogaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB2YXIgc2NvcGUgPSAoX2EgPSBvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmoub3duZXJEb2N1bWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRlZmF1bHRWaWV3O1xuICAgIHJldHVybiAhIShzY29wZSAmJiBvYmogaW5zdGFuY2VvZiBzY29wZS5FbGVtZW50KTtcbn07XG52YXIgaXNSZXBsYWNlZEVsZW1lbnQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgc3dpdGNoICh0YXJnZXQudGFnTmFtZSkge1xuICAgICAgICBjYXNlICdJTlBVVCc6XG4gICAgICAgICAgICBpZiAodGFyZ2V0LnR5cGUgIT09ICdpbWFnZScpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgY2FzZSAnVklERU8nOlxuICAgICAgICBjYXNlICdBVURJTyc6XG4gICAgICAgIGNhc2UgJ0VNQkVEJzpcbiAgICAgICAgY2FzZSAnT0JKRUNUJzpcbiAgICAgICAgY2FzZSAnQ0FOVkFTJzpcbiAgICAgICAgY2FzZSAnSUZSQU1FJzpcbiAgICAgICAgY2FzZSAnSU1HJzpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuZXhwb3J0IHsgaXNTVkcsIGlzSGlkZGVuLCBpc0VsZW1lbnQsIGlzUmVwbGFjZWRFbGVtZW50IH07XG4iLCAiZXhwb3J0IHZhciBnbG9iYWwgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHt9O1xuIiwgImltcG9ydCB7IFJlc2l6ZU9ic2VydmVyQm94T3B0aW9ucyB9IGZyb20gJy4uL1Jlc2l6ZU9ic2VydmVyQm94T3B0aW9ucyc7XG5pbXBvcnQgeyBSZXNpemVPYnNlcnZlclNpemUgfSBmcm9tICcuLi9SZXNpemVPYnNlcnZlclNpemUnO1xuaW1wb3J0IHsgRE9NUmVjdFJlYWRPbmx5IH0gZnJvbSAnLi4vRE9NUmVjdFJlYWRPbmx5JztcbmltcG9ydCB7IGlzU1ZHLCBpc0hpZGRlbiB9IGZyb20gJy4uL3V0aWxzL2VsZW1lbnQnO1xuaW1wb3J0IHsgZnJlZXplIH0gZnJvbSAnLi4vdXRpbHMvZnJlZXplJztcbmltcG9ydCB7IGdsb2JhbCB9IGZyb20gJy4uL3V0aWxzL2dsb2JhbCc7XG52YXIgY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xudmFyIHNjcm9sbFJlZ2V4cCA9IC9hdXRvfHNjcm9sbC87XG52YXIgdmVydGljYWxSZWdleHAgPSAvXnRifHZlcnRpY2FsLztcbnZhciBJRSA9ICgvbXNpZXx0cmlkZW50L2kpLnRlc3QoZ2xvYmFsLm5hdmlnYXRvciAmJiBnbG9iYWwubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG52YXIgcGFyc2VEaW1lbnNpb24gPSBmdW5jdGlvbiAocGl4ZWwpIHsgcmV0dXJuIHBhcnNlRmxvYXQocGl4ZWwgfHwgJzAnKTsgfTtcbnZhciBzaXplID0gZnVuY3Rpb24gKGlubGluZVNpemUsIGJsb2NrU2l6ZSwgc3dpdGNoU2l6ZXMpIHtcbiAgICBpZiAoaW5saW5lU2l6ZSA9PT0gdm9pZCAwKSB7IGlubGluZVNpemUgPSAwOyB9XG4gICAgaWYgKGJsb2NrU2l6ZSA9PT0gdm9pZCAwKSB7IGJsb2NrU2l6ZSA9IDA7IH1cbiAgICBpZiAoc3dpdGNoU2l6ZXMgPT09IHZvaWQgMCkgeyBzd2l0Y2hTaXplcyA9IGZhbHNlOyB9XG4gICAgcmV0dXJuIG5ldyBSZXNpemVPYnNlcnZlclNpemUoKHN3aXRjaFNpemVzID8gYmxvY2tTaXplIDogaW5saW5lU2l6ZSkgfHwgMCwgKHN3aXRjaFNpemVzID8gaW5saW5lU2l6ZSA6IGJsb2NrU2l6ZSkgfHwgMCk7XG59O1xudmFyIHplcm9Cb3hlcyA9IGZyZWV6ZSh7XG4gICAgZGV2aWNlUGl4ZWxDb250ZW50Qm94U2l6ZTogc2l6ZSgpLFxuICAgIGJvcmRlckJveFNpemU6IHNpemUoKSxcbiAgICBjb250ZW50Qm94U2l6ZTogc2l6ZSgpLFxuICAgIGNvbnRlbnRSZWN0OiBuZXcgRE9NUmVjdFJlYWRPbmx5KDAsIDAsIDAsIDApXG59KTtcbnZhciBjYWxjdWxhdGVCb3hTaXplcyA9IGZ1bmN0aW9uICh0YXJnZXQsIGZvcmNlUmVjYWxjdWxhdGlvbikge1xuICAgIGlmIChmb3JjZVJlY2FsY3VsYXRpb24gPT09IHZvaWQgMCkgeyBmb3JjZVJlY2FsY3VsYXRpb24gPSBmYWxzZTsgfVxuICAgIGlmIChjYWNoZS5oYXModGFyZ2V0KSAmJiAhZm9yY2VSZWNhbGN1bGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBjYWNoZS5nZXQodGFyZ2V0KTtcbiAgICB9XG4gICAgaWYgKGlzSGlkZGVuKHRhcmdldCkpIHtcbiAgICAgICAgY2FjaGUuc2V0KHRhcmdldCwgemVyb0JveGVzKTtcbiAgICAgICAgcmV0dXJuIHplcm9Cb3hlcztcbiAgICB9XG4gICAgdmFyIGNzID0gZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpO1xuICAgIHZhciBzdmcgPSBpc1NWRyh0YXJnZXQpICYmIHRhcmdldC5vd25lclNWR0VsZW1lbnQgJiYgdGFyZ2V0LmdldEJCb3goKTtcbiAgICB2YXIgcmVtb3ZlUGFkZGluZyA9ICFJRSAmJiBjcy5ib3hTaXppbmcgPT09ICdib3JkZXItYm94JztcbiAgICB2YXIgc3dpdGNoU2l6ZXMgPSB2ZXJ0aWNhbFJlZ2V4cC50ZXN0KGNzLndyaXRpbmdNb2RlIHx8ICcnKTtcbiAgICB2YXIgY2FuU2Nyb2xsVmVydGljYWxseSA9ICFzdmcgJiYgc2Nyb2xsUmVnZXhwLnRlc3QoY3Mub3ZlcmZsb3dZIHx8ICcnKTtcbiAgICB2YXIgY2FuU2Nyb2xsSG9yaXpvbnRhbGx5ID0gIXN2ZyAmJiBzY3JvbGxSZWdleHAudGVzdChjcy5vdmVyZmxvd1ggfHwgJycpO1xuICAgIHZhciBwYWRkaW5nVG9wID0gc3ZnID8gMCA6IHBhcnNlRGltZW5zaW9uKGNzLnBhZGRpbmdUb3ApO1xuICAgIHZhciBwYWRkaW5nUmlnaHQgPSBzdmcgPyAwIDogcGFyc2VEaW1lbnNpb24oY3MucGFkZGluZ1JpZ2h0KTtcbiAgICB2YXIgcGFkZGluZ0JvdHRvbSA9IHN2ZyA/IDAgOiBwYXJzZURpbWVuc2lvbihjcy5wYWRkaW5nQm90dG9tKTtcbiAgICB2YXIgcGFkZGluZ0xlZnQgPSBzdmcgPyAwIDogcGFyc2VEaW1lbnNpb24oY3MucGFkZGluZ0xlZnQpO1xuICAgIHZhciBib3JkZXJUb3AgPSBzdmcgPyAwIDogcGFyc2VEaW1lbnNpb24oY3MuYm9yZGVyVG9wV2lkdGgpO1xuICAgIHZhciBib3JkZXJSaWdodCA9IHN2ZyA/IDAgOiBwYXJzZURpbWVuc2lvbihjcy5ib3JkZXJSaWdodFdpZHRoKTtcbiAgICB2YXIgYm9yZGVyQm90dG9tID0gc3ZnID8gMCA6IHBhcnNlRGltZW5zaW9uKGNzLmJvcmRlckJvdHRvbVdpZHRoKTtcbiAgICB2YXIgYm9yZGVyTGVmdCA9IHN2ZyA/IDAgOiBwYXJzZURpbWVuc2lvbihjcy5ib3JkZXJMZWZ0V2lkdGgpO1xuICAgIHZhciBob3Jpem9udGFsUGFkZGluZyA9IHBhZGRpbmdMZWZ0ICsgcGFkZGluZ1JpZ2h0O1xuICAgIHZhciB2ZXJ0aWNhbFBhZGRpbmcgPSBwYWRkaW5nVG9wICsgcGFkZGluZ0JvdHRvbTtcbiAgICB2YXIgaG9yaXpvbnRhbEJvcmRlckFyZWEgPSBib3JkZXJMZWZ0ICsgYm9yZGVyUmlnaHQ7XG4gICAgdmFyIHZlcnRpY2FsQm9yZGVyQXJlYSA9IGJvcmRlclRvcCArIGJvcmRlckJvdHRvbTtcbiAgICB2YXIgaG9yaXpvbnRhbFNjcm9sbGJhclRoaWNrbmVzcyA9ICFjYW5TY3JvbGxIb3Jpem9udGFsbHkgPyAwIDogdGFyZ2V0Lm9mZnNldEhlaWdodCAtIHZlcnRpY2FsQm9yZGVyQXJlYSAtIHRhcmdldC5jbGllbnRIZWlnaHQ7XG4gICAgdmFyIHZlcnRpY2FsU2Nyb2xsYmFyVGhpY2tuZXNzID0gIWNhblNjcm9sbFZlcnRpY2FsbHkgPyAwIDogdGFyZ2V0Lm9mZnNldFdpZHRoIC0gaG9yaXpvbnRhbEJvcmRlckFyZWEgLSB0YXJnZXQuY2xpZW50V2lkdGg7XG4gICAgdmFyIHdpZHRoUmVkdWN0aW9uID0gcmVtb3ZlUGFkZGluZyA/IGhvcml6b250YWxQYWRkaW5nICsgaG9yaXpvbnRhbEJvcmRlckFyZWEgOiAwO1xuICAgIHZhciBoZWlnaHRSZWR1Y3Rpb24gPSByZW1vdmVQYWRkaW5nID8gdmVydGljYWxQYWRkaW5nICsgdmVydGljYWxCb3JkZXJBcmVhIDogMDtcbiAgICB2YXIgY29udGVudFdpZHRoID0gc3ZnID8gc3ZnLndpZHRoIDogcGFyc2VEaW1lbnNpb24oY3Mud2lkdGgpIC0gd2lkdGhSZWR1Y3Rpb24gLSB2ZXJ0aWNhbFNjcm9sbGJhclRoaWNrbmVzcztcbiAgICB2YXIgY29udGVudEhlaWdodCA9IHN2ZyA/IHN2Zy5oZWlnaHQgOiBwYXJzZURpbWVuc2lvbihjcy5oZWlnaHQpIC0gaGVpZ2h0UmVkdWN0aW9uIC0gaG9yaXpvbnRhbFNjcm9sbGJhclRoaWNrbmVzcztcbiAgICB2YXIgYm9yZGVyQm94V2lkdGggPSBjb250ZW50V2lkdGggKyBob3Jpem9udGFsUGFkZGluZyArIHZlcnRpY2FsU2Nyb2xsYmFyVGhpY2tuZXNzICsgaG9yaXpvbnRhbEJvcmRlckFyZWE7XG4gICAgdmFyIGJvcmRlckJveEhlaWdodCA9IGNvbnRlbnRIZWlnaHQgKyB2ZXJ0aWNhbFBhZGRpbmcgKyBob3Jpem9udGFsU2Nyb2xsYmFyVGhpY2tuZXNzICsgdmVydGljYWxCb3JkZXJBcmVhO1xuICAgIHZhciBib3hlcyA9IGZyZWV6ZSh7XG4gICAgICAgIGRldmljZVBpeGVsQ29udGVudEJveFNpemU6IHNpemUoTWF0aC5yb3VuZChjb250ZW50V2lkdGggKiBkZXZpY2VQaXhlbFJhdGlvKSwgTWF0aC5yb3VuZChjb250ZW50SGVpZ2h0ICogZGV2aWNlUGl4ZWxSYXRpbyksIHN3aXRjaFNpemVzKSxcbiAgICAgICAgYm9yZGVyQm94U2l6ZTogc2l6ZShib3JkZXJCb3hXaWR0aCwgYm9yZGVyQm94SGVpZ2h0LCBzd2l0Y2hTaXplcyksXG4gICAgICAgIGNvbnRlbnRCb3hTaXplOiBzaXplKGNvbnRlbnRXaWR0aCwgY29udGVudEhlaWdodCwgc3dpdGNoU2l6ZXMpLFxuICAgICAgICBjb250ZW50UmVjdDogbmV3IERPTVJlY3RSZWFkT25seShwYWRkaW5nTGVmdCwgcGFkZGluZ1RvcCwgY29udGVudFdpZHRoLCBjb250ZW50SGVpZ2h0KVxuICAgIH0pO1xuICAgIGNhY2hlLnNldCh0YXJnZXQsIGJveGVzKTtcbiAgICByZXR1cm4gYm94ZXM7XG59O1xudmFyIGNhbGN1bGF0ZUJveFNpemUgPSBmdW5jdGlvbiAodGFyZ2V0LCBvYnNlcnZlZEJveCwgZm9yY2VSZWNhbGN1bGF0aW9uKSB7XG4gICAgdmFyIF9hID0gY2FsY3VsYXRlQm94U2l6ZXModGFyZ2V0LCBmb3JjZVJlY2FsY3VsYXRpb24pLCBib3JkZXJCb3hTaXplID0gX2EuYm9yZGVyQm94U2l6ZSwgY29udGVudEJveFNpemUgPSBfYS5jb250ZW50Qm94U2l6ZSwgZGV2aWNlUGl4ZWxDb250ZW50Qm94U2l6ZSA9IF9hLmRldmljZVBpeGVsQ29udGVudEJveFNpemU7XG4gICAgc3dpdGNoIChvYnNlcnZlZEJveCkge1xuICAgICAgICBjYXNlIFJlc2l6ZU9ic2VydmVyQm94T3B0aW9ucy5ERVZJQ0VfUElYRUxfQ09OVEVOVF9CT1g6XG4gICAgICAgICAgICByZXR1cm4gZGV2aWNlUGl4ZWxDb250ZW50Qm94U2l6ZTtcbiAgICAgICAgY2FzZSBSZXNpemVPYnNlcnZlckJveE9wdGlvbnMuQk9SREVSX0JPWDpcbiAgICAgICAgICAgIHJldHVybiBib3JkZXJCb3hTaXplO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnRCb3hTaXplO1xuICAgIH1cbn07XG5leHBvcnQgeyBjYWxjdWxhdGVCb3hTaXplLCBjYWxjdWxhdGVCb3hTaXplcyB9O1xuIiwgImltcG9ydCB7IGNhbGN1bGF0ZUJveFNpemVzIH0gZnJvbSAnLi9hbGdvcml0aG1zL2NhbGN1bGF0ZUJveFNpemUnO1xuaW1wb3J0IHsgZnJlZXplIH0gZnJvbSAnLi91dGlscy9mcmVlemUnO1xudmFyIFJlc2l6ZU9ic2VydmVyRW50cnkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc2l6ZU9ic2VydmVyRW50cnkodGFyZ2V0KSB7XG4gICAgICAgIHZhciBib3hlcyA9IGNhbGN1bGF0ZUJveFNpemVzKHRhcmdldCk7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLmNvbnRlbnRSZWN0ID0gYm94ZXMuY29udGVudFJlY3Q7XG4gICAgICAgIHRoaXMuYm9yZGVyQm94U2l6ZSA9IGZyZWV6ZShbYm94ZXMuYm9yZGVyQm94U2l6ZV0pO1xuICAgICAgICB0aGlzLmNvbnRlbnRCb3hTaXplID0gZnJlZXplKFtib3hlcy5jb250ZW50Qm94U2l6ZV0pO1xuICAgICAgICB0aGlzLmRldmljZVBpeGVsQ29udGVudEJveFNpemUgPSBmcmVlemUoW2JveGVzLmRldmljZVBpeGVsQ29udGVudEJveFNpemVdKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmVyRW50cnk7XG59KCkpO1xuZXhwb3J0IHsgUmVzaXplT2JzZXJ2ZXJFbnRyeSB9O1xuIiwgImltcG9ydCB7IGlzSGlkZGVuIH0gZnJvbSAnLi4vdXRpbHMvZWxlbWVudCc7XG52YXIgY2FsY3VsYXRlRGVwdGhGb3JOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBpZiAoaXNIaWRkZW4obm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIEluZmluaXR5O1xuICAgIH1cbiAgICB2YXIgZGVwdGggPSAwO1xuICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICBkZXB0aCArPSAxO1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGRlcHRoO1xufTtcbmV4cG9ydCB7IGNhbGN1bGF0ZURlcHRoRm9yTm9kZSB9O1xuIiwgImltcG9ydCB7IHJlc2l6ZU9ic2VydmVycyB9IGZyb20gJy4uL3V0aWxzL3Jlc2l6ZU9ic2VydmVycyc7XG5pbXBvcnQgeyBSZXNpemVPYnNlcnZlckVudHJ5IH0gZnJvbSAnLi4vUmVzaXplT2JzZXJ2ZXJFbnRyeSc7XG5pbXBvcnQgeyBjYWxjdWxhdGVEZXB0aEZvck5vZGUgfSBmcm9tICcuL2NhbGN1bGF0ZURlcHRoRm9yTm9kZSc7XG5pbXBvcnQgeyBjYWxjdWxhdGVCb3hTaXplIH0gZnJvbSAnLi9jYWxjdWxhdGVCb3hTaXplJztcbnZhciBicm9hZGNhc3RBY3RpdmVPYnNlcnZhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNoYWxsb3dlc3REZXB0aCA9IEluZmluaXR5O1xuICAgIHZhciBjYWxsYmFja3MgPSBbXTtcbiAgICByZXNpemVPYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiBwcm9jZXNzT2JzZXJ2ZXIocm8pIHtcbiAgICAgICAgaWYgKHJvLmFjdGl2ZVRhcmdldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVudHJpZXMgPSBbXTtcbiAgICAgICAgcm8uYWN0aXZlVGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uIHByb2Nlc3NUYXJnZXQob3QpIHtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IG5ldyBSZXNpemVPYnNlcnZlckVudHJ5KG90LnRhcmdldCk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0RGVwdGggPSBjYWxjdWxhdGVEZXB0aEZvck5vZGUob3QudGFyZ2V0KTtcbiAgICAgICAgICAgIGVudHJpZXMucHVzaChlbnRyeSk7XG4gICAgICAgICAgICBvdC5sYXN0UmVwb3J0ZWRTaXplID0gY2FsY3VsYXRlQm94U2l6ZShvdC50YXJnZXQsIG90Lm9ic2VydmVkQm94KTtcbiAgICAgICAgICAgIGlmICh0YXJnZXREZXB0aCA8IHNoYWxsb3dlc3REZXB0aCkge1xuICAgICAgICAgICAgICAgIHNoYWxsb3dlc3REZXB0aCA9IHRhcmdldERlcHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY2FsbGJhY2tzLnB1c2goZnVuY3Rpb24gcmVzaXplT2JzZXJ2ZXJDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHJvLmNhbGxiYWNrLmNhbGwocm8ub2JzZXJ2ZXIsIGVudHJpZXMsIHJvLm9ic2VydmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJvLmFjdGl2ZVRhcmdldHMuc3BsaWNlKDAsIHJvLmFjdGl2ZVRhcmdldHMubGVuZ3RoKTtcbiAgICB9KTtcbiAgICBmb3IgKHZhciBfaSA9IDAsIGNhbGxiYWNrc18xID0gY2FsbGJhY2tzOyBfaSA8IGNhbGxiYWNrc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBjYWxsYmFja3NfMVtfaV07XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIHJldHVybiBzaGFsbG93ZXN0RGVwdGg7XG59O1xuZXhwb3J0IHsgYnJvYWRjYXN0QWN0aXZlT2JzZXJ2YXRpb25zIH07XG4iLCAiaW1wb3J0IHsgcmVzaXplT2JzZXJ2ZXJzIH0gZnJvbSAnLi4vdXRpbHMvcmVzaXplT2JzZXJ2ZXJzJztcbmltcG9ydCB7IGNhbGN1bGF0ZURlcHRoRm9yTm9kZSB9IGZyb20gJy4vY2FsY3VsYXRlRGVwdGhGb3JOb2RlJztcbnZhciBnYXRoZXJBY3RpdmVPYnNlcnZhdGlvbnNBdERlcHRoID0gZnVuY3Rpb24gKGRlcHRoKSB7XG4gICAgcmVzaXplT2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gcHJvY2Vzc09ic2VydmVyKHJvKSB7XG4gICAgICAgIHJvLmFjdGl2ZVRhcmdldHMuc3BsaWNlKDAsIHJvLmFjdGl2ZVRhcmdldHMubGVuZ3RoKTtcbiAgICAgICAgcm8uc2tpcHBlZFRhcmdldHMuc3BsaWNlKDAsIHJvLnNraXBwZWRUYXJnZXRzLmxlbmd0aCk7XG4gICAgICAgIHJvLm9ic2VydmF0aW9uVGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uIHByb2Nlc3NUYXJnZXQob3QpIHtcbiAgICAgICAgICAgIGlmIChvdC5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGN1bGF0ZURlcHRoRm9yTm9kZShvdC50YXJnZXQpID4gZGVwdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcm8uYWN0aXZlVGFyZ2V0cy5wdXNoKG90KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJvLnNraXBwZWRUYXJnZXRzLnB1c2gob3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuZXhwb3J0IHsgZ2F0aGVyQWN0aXZlT2JzZXJ2YXRpb25zQXREZXB0aCB9O1xuIiwgImltcG9ydCB7IGhhc0FjdGl2ZU9ic2VydmF0aW9ucyB9IGZyb20gJy4uL2FsZ29yaXRobXMvaGFzQWN0aXZlT2JzZXJ2YXRpb25zJztcbmltcG9ydCB7IGhhc1NraXBwZWRPYnNlcnZhdGlvbnMgfSBmcm9tICcuLi9hbGdvcml0aG1zL2hhc1NraXBwZWRPYnNlcnZhdGlvbnMnO1xuaW1wb3J0IHsgZGVsaXZlclJlc2l6ZUxvb3BFcnJvciB9IGZyb20gJy4uL2FsZ29yaXRobXMvZGVsaXZlclJlc2l6ZUxvb3BFcnJvcic7XG5pbXBvcnQgeyBicm9hZGNhc3RBY3RpdmVPYnNlcnZhdGlvbnMgfSBmcm9tICcuLi9hbGdvcml0aG1zL2Jyb2FkY2FzdEFjdGl2ZU9ic2VydmF0aW9ucyc7XG5pbXBvcnQgeyBnYXRoZXJBY3RpdmVPYnNlcnZhdGlvbnNBdERlcHRoIH0gZnJvbSAnLi4vYWxnb3JpdGhtcy9nYXRoZXJBY3RpdmVPYnNlcnZhdGlvbnNBdERlcHRoJztcbnZhciBwcm9jZXNzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkZXB0aCA9IDA7XG4gICAgZ2F0aGVyQWN0aXZlT2JzZXJ2YXRpb25zQXREZXB0aChkZXB0aCk7XG4gICAgd2hpbGUgKGhhc0FjdGl2ZU9ic2VydmF0aW9ucygpKSB7XG4gICAgICAgIGRlcHRoID0gYnJvYWRjYXN0QWN0aXZlT2JzZXJ2YXRpb25zKCk7XG4gICAgICAgIGdhdGhlckFjdGl2ZU9ic2VydmF0aW9uc0F0RGVwdGgoZGVwdGgpO1xuICAgIH1cbiAgICBpZiAoaGFzU2tpcHBlZE9ic2VydmF0aW9ucygpKSB7XG4gICAgICAgIGRlbGl2ZXJSZXNpemVMb29wRXJyb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlcHRoID4gMDtcbn07XG5leHBvcnQgeyBwcm9jZXNzIH07XG4iLCAidmFyIHRyaWdnZXI7XG52YXIgY2FsbGJhY2tzID0gW107XG52YXIgbm90aWZ5ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gY2FsbGJhY2tzLnNwbGljZSgwKS5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyByZXR1cm4gY2IoKTsgfSk7IH07XG52YXIgcXVldWVNaWNyb1Rhc2sgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICBpZiAoIXRyaWdnZXIpIHtcbiAgICAgICAgdmFyIHRvZ2dsZV8xID0gMDtcbiAgICAgICAgdmFyIGVsXzEgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gICAgICAgIHZhciBjb25maWcgPSB7IGNoYXJhY3RlckRhdGE6IHRydWUgfTtcbiAgICAgICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gbm90aWZ5KCk7IH0pLm9ic2VydmUoZWxfMSwgY29uZmlnKTtcbiAgICAgICAgdHJpZ2dlciA9IGZ1bmN0aW9uICgpIHsgZWxfMS50ZXh0Q29udGVudCA9IFwiXCIuY29uY2F0KHRvZ2dsZV8xID8gdG9nZ2xlXzEtLSA6IHRvZ2dsZV8xKyspOyB9O1xuICAgIH1cbiAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgdHJpZ2dlcigpO1xufTtcbmV4cG9ydCB7IHF1ZXVlTWljcm9UYXNrIH07XG4iLCAiaW1wb3J0IHsgcXVldWVNaWNyb1Rhc2sgfSBmcm9tICcuL3F1ZXVlTWljcm9UYXNrJztcbnZhciBxdWV1ZVJlc2l6ZU9ic2VydmVyID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgcXVldWVNaWNyb1Rhc2soZnVuY3Rpb24gUmVzaXplT2JzZXJ2ZXIoKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYik7XG4gICAgfSk7XG59O1xuZXhwb3J0IHsgcXVldWVSZXNpemVPYnNlcnZlciB9O1xuIiwgImltcG9ydCB7IHByb2Nlc3MgfSBmcm9tICcuL3Byb2Nlc3MnO1xuaW1wb3J0IHsgZ2xvYmFsIH0gZnJvbSAnLi9nbG9iYWwnO1xuaW1wb3J0IHsgcXVldWVSZXNpemVPYnNlcnZlciB9IGZyb20gJy4vcXVldWVSZXNpemVPYnNlcnZlcic7XG52YXIgd2F0Y2hpbmcgPSAwO1xudmFyIGlzV2F0Y2hpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAhIXdhdGNoaW5nOyB9O1xudmFyIENBVENIX1BFUklPRCA9IDI1MDtcbnZhciBvYnNlcnZlckNvbmZpZyA9IHsgYXR0cmlidXRlczogdHJ1ZSwgY2hhcmFjdGVyRGF0YTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH07XG52YXIgZXZlbnRzID0gW1xuICAgICdyZXNpemUnLFxuICAgICdsb2FkJyxcbiAgICAndHJhbnNpdGlvbmVuZCcsXG4gICAgJ2FuaW1hdGlvbmVuZCcsXG4gICAgJ2FuaW1hdGlvbnN0YXJ0JyxcbiAgICAnYW5pbWF0aW9uaXRlcmF0aW9uJyxcbiAgICAna2V5dXAnLFxuICAgICdrZXlkb3duJyxcbiAgICAnbW91c2V1cCcsXG4gICAgJ21vdXNlZG93bicsXG4gICAgJ21vdXNlb3ZlcicsXG4gICAgJ21vdXNlb3V0JyxcbiAgICAnYmx1cicsXG4gICAgJ2ZvY3VzJ1xuXTtcbnZhciB0aW1lID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcbiAgICBpZiAodGltZW91dCA9PT0gdm9pZCAwKSB7IHRpbWVvdXQgPSAwOyB9XG4gICAgcmV0dXJuIERhdGUubm93KCkgKyB0aW1lb3V0O1xufTtcbnZhciBzY2hlZHVsZWQgPSBmYWxzZTtcbnZhciBTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNjaGVkdWxlcigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNjaGVkdWxlKCk7IH07XG4gICAgfVxuICAgIFNjaGVkdWxlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRpbWVvdXQgPT09IHZvaWQgMCkgeyB0aW1lb3V0ID0gQ0FUQ0hfUEVSSU9EOyB9XG4gICAgICAgIGlmIChzY2hlZHVsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICB2YXIgdW50aWwgPSB0aW1lKHRpbWVvdXQpO1xuICAgICAgICBxdWV1ZVJlc2l6ZU9ic2VydmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50c0hhdmVSZXNpemVkID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzSGF2ZVJlc2l6ZWQgPSBwcm9jZXNzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gdW50aWwgLSB0aW1lKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1dhdGNoaW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHNIYXZlUmVzaXplZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5ydW4oMTAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRpbWVvdXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJ1bih0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICB0aGlzLnJ1bigpO1xuICAgIH07XG4gICAgU2NoZWR1bGVyLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY2IgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5vYnNlcnZlciAmJiBfdGhpcy5vYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIG9ic2VydmVyQ29uZmlnKTsgfTtcbiAgICAgICAgZG9jdW1lbnQuYm9keSA/IGNiKCkgOiBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGNiKTtcbiAgICB9O1xuICAgIFNjaGVkdWxlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMubGlzdGVuZXIpO1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlKCk7XG4gICAgICAgICAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgX3RoaXMubGlzdGVuZXIsIHRydWUpOyB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2NoZWR1bGVyLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuc3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlciAmJiB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIGV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBnbG9iYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBfdGhpcy5saXN0ZW5lciwgdHJ1ZSk7IH0pO1xuICAgICAgICAgICAgdGhpcy5zdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNjaGVkdWxlcjtcbn0oKSk7XG52YXIgc2NoZWR1bGVyID0gbmV3IFNjaGVkdWxlcigpO1xudmFyIHVwZGF0ZUNvdW50ID0gZnVuY3Rpb24gKG4pIHtcbiAgICAhd2F0Y2hpbmcgJiYgbiA+IDAgJiYgc2NoZWR1bGVyLnN0YXJ0KCk7XG4gICAgd2F0Y2hpbmcgKz0gbjtcbiAgICAhd2F0Y2hpbmcgJiYgc2NoZWR1bGVyLnN0b3AoKTtcbn07XG5leHBvcnQgeyBzY2hlZHVsZXIsIHVwZGF0ZUNvdW50IH07XG4iLCAiaW1wb3J0IHsgUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zIH0gZnJvbSAnLi9SZXNpemVPYnNlcnZlckJveE9wdGlvbnMnO1xuaW1wb3J0IHsgY2FsY3VsYXRlQm94U2l6ZSB9IGZyb20gJy4vYWxnb3JpdGhtcy9jYWxjdWxhdGVCb3hTaXplJztcbmltcG9ydCB7IGlzU1ZHLCBpc1JlcGxhY2VkRWxlbWVudCB9IGZyb20gJy4vdXRpbHMvZWxlbWVudCc7XG52YXIgc2tpcE5vdGlmeU9uRWxlbWVudCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICByZXR1cm4gIWlzU1ZHKHRhcmdldClcbiAgICAgICAgJiYgIWlzUmVwbGFjZWRFbGVtZW50KHRhcmdldClcbiAgICAgICAgJiYgZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmRpc3BsYXkgPT09ICdpbmxpbmUnO1xufTtcbnZhciBSZXNpemVPYnNlcnZhdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVzaXplT2JzZXJ2YXRpb24odGFyZ2V0LCBvYnNlcnZlZEJveCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5vYnNlcnZlZEJveCA9IG9ic2VydmVkQm94IHx8IFJlc2l6ZU9ic2VydmVyQm94T3B0aW9ucy5DT05URU5UX0JPWDtcbiAgICAgICAgdGhpcy5sYXN0UmVwb3J0ZWRTaXplID0ge1xuICAgICAgICAgICAgaW5saW5lU2l6ZTogMCxcbiAgICAgICAgICAgIGJsb2NrU2l6ZTogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICBSZXNpemVPYnNlcnZhdGlvbi5wcm90b3R5cGUuaXNBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzaXplID0gY2FsY3VsYXRlQm94U2l6ZSh0aGlzLnRhcmdldCwgdGhpcy5vYnNlcnZlZEJveCwgdHJ1ZSk7XG4gICAgICAgIGlmIChza2lwTm90aWZ5T25FbGVtZW50KHRoaXMudGFyZ2V0KSkge1xuICAgICAgICAgICAgdGhpcy5sYXN0UmVwb3J0ZWRTaXplID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5sYXN0UmVwb3J0ZWRTaXplLmlubGluZVNpemUgIT09IHNpemUuaW5saW5lU2l6ZVxuICAgICAgICAgICAgfHwgdGhpcy5sYXN0UmVwb3J0ZWRTaXplLmJsb2NrU2l6ZSAhPT0gc2l6ZS5ibG9ja1NpemUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIHJldHVybiBSZXNpemVPYnNlcnZhdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBSZXNpemVPYnNlcnZhdGlvbiB9O1xuIiwgInZhciBSZXNpemVPYnNlcnZlckRldGFpbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVzaXplT2JzZXJ2ZXJEZXRhaWwocmVzaXplT2JzZXJ2ZXIsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0cyA9IFtdO1xuICAgICAgICB0aGlzLnNraXBwZWRUYXJnZXRzID0gW107XG4gICAgICAgIHRoaXMub2JzZXJ2YXRpb25UYXJnZXRzID0gW107XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSByZXNpemVPYnNlcnZlcjtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICByZXR1cm4gUmVzaXplT2JzZXJ2ZXJEZXRhaWw7XG59KCkpO1xuZXhwb3J0IHsgUmVzaXplT2JzZXJ2ZXJEZXRhaWwgfTtcbiIsICJpbXBvcnQgeyBzY2hlZHVsZXIsIHVwZGF0ZUNvdW50IH0gZnJvbSAnLi91dGlscy9zY2hlZHVsZXInO1xuaW1wb3J0IHsgUmVzaXplT2JzZXJ2YXRpb24gfSBmcm9tICcuL1Jlc2l6ZU9ic2VydmF0aW9uJztcbmltcG9ydCB7IFJlc2l6ZU9ic2VydmVyRGV0YWlsIH0gZnJvbSAnLi9SZXNpemVPYnNlcnZlckRldGFpbCc7XG5pbXBvcnQgeyByZXNpemVPYnNlcnZlcnMgfSBmcm9tICcuL3V0aWxzL3Jlc2l6ZU9ic2VydmVycyc7XG52YXIgb2JzZXJ2ZXJNYXAgPSBuZXcgV2Vha01hcCgpO1xudmFyIGdldE9ic2VydmF0aW9uSW5kZXggPSBmdW5jdGlvbiAob2JzZXJ2YXRpb25UYXJnZXRzLCB0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9ic2VydmF0aW9uVGFyZ2V0cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAob2JzZXJ2YXRpb25UYXJnZXRzW2ldLnRhcmdldCA9PT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG59O1xudmFyIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyKCkge1xuICAgIH1cbiAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuY29ubmVjdCA9IGZ1bmN0aW9uIChyZXNpemVPYnNlcnZlciwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRldGFpbCA9IG5ldyBSZXNpemVPYnNlcnZlckRldGFpbChyZXNpemVPYnNlcnZlciwgY2FsbGJhY2spO1xuICAgICAgICBvYnNlcnZlck1hcC5zZXQocmVzaXplT2JzZXJ2ZXIsIGRldGFpbCk7XG4gICAgfTtcbiAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIub2JzZXJ2ZSA9IGZ1bmN0aW9uIChyZXNpemVPYnNlcnZlciwgdGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBkZXRhaWwgPSBvYnNlcnZlck1hcC5nZXQocmVzaXplT2JzZXJ2ZXIpO1xuICAgICAgICB2YXIgZmlyc3RPYnNlcnZhdGlvbiA9IGRldGFpbC5vYnNlcnZhdGlvblRhcmdldHMubGVuZ3RoID09PSAwO1xuICAgICAgICBpZiAoZ2V0T2JzZXJ2YXRpb25JbmRleChkZXRhaWwub2JzZXJ2YXRpb25UYXJnZXRzLCB0YXJnZXQpIDwgMCkge1xuICAgICAgICAgICAgZmlyc3RPYnNlcnZhdGlvbiAmJiByZXNpemVPYnNlcnZlcnMucHVzaChkZXRhaWwpO1xuICAgICAgICAgICAgZGV0YWlsLm9ic2VydmF0aW9uVGFyZ2V0cy5wdXNoKG5ldyBSZXNpemVPYnNlcnZhdGlvbih0YXJnZXQsIG9wdGlvbnMgJiYgb3B0aW9ucy5ib3gpKTtcbiAgICAgICAgICAgIHVwZGF0ZUNvdW50KDEpO1xuICAgICAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci51bm9ic2VydmUgPSBmdW5jdGlvbiAocmVzaXplT2JzZXJ2ZXIsIHRhcmdldCkge1xuICAgICAgICB2YXIgZGV0YWlsID0gb2JzZXJ2ZXJNYXAuZ2V0KHJlc2l6ZU9ic2VydmVyKTtcbiAgICAgICAgdmFyIGluZGV4ID0gZ2V0T2JzZXJ2YXRpb25JbmRleChkZXRhaWwub2JzZXJ2YXRpb25UYXJnZXRzLCB0YXJnZXQpO1xuICAgICAgICB2YXIgbGFzdE9ic2VydmF0aW9uID0gZGV0YWlsLm9ic2VydmF0aW9uVGFyZ2V0cy5sZW5ndGggPT09IDE7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICBsYXN0T2JzZXJ2YXRpb24gJiYgcmVzaXplT2JzZXJ2ZXJzLnNwbGljZShyZXNpemVPYnNlcnZlcnMuaW5kZXhPZihkZXRhaWwpLCAxKTtcbiAgICAgICAgICAgIGRldGFpbC5vYnNlcnZhdGlvblRhcmdldHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHVwZGF0ZUNvdW50KC0xKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbiAocmVzaXplT2JzZXJ2ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGRldGFpbCA9IG9ic2VydmVyTWFwLmdldChyZXNpemVPYnNlcnZlcik7XG4gICAgICAgIGRldGFpbC5vYnNlcnZhdGlvblRhcmdldHMuc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChvdCkgeyByZXR1cm4gX3RoaXMudW5vYnNlcnZlKHJlc2l6ZU9ic2VydmVyLCBvdC50YXJnZXQpOyB9KTtcbiAgICAgICAgZGV0YWlsLmFjdGl2ZVRhcmdldHMuc3BsaWNlKDAsIGRldGFpbC5hY3RpdmVUYXJnZXRzLmxlbmd0aCk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyO1xufSgpKTtcbmV4cG9ydCB7IFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlciB9O1xuIiwgImltcG9ydCB7IFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlciB9IGZyb20gJy4vUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyJztcbmltcG9ydCB7IGlzRWxlbWVudCB9IGZyb20gJy4vdXRpbHMvZWxlbWVudCc7XG52YXIgUmVzaXplT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc2l6ZU9ic2VydmVyKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUmVzaXplT2JzZXJ2ZXInOiAxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAwIHByZXNlbnQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdSZXNpemVPYnNlcnZlcic6IFRoZSBjYWxsYmFjayBwcm92aWRlZCBhcyBwYXJhbWV0ZXIgMSBpcyBub3QgYSBmdW5jdGlvbi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLmNvbm5lY3QodGhpcywgY2FsbGJhY2spO1xuICAgIH1cbiAgICBSZXNpemVPYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZSA9IGZ1bmN0aW9uICh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gZXhlY3V0ZSAnb2JzZXJ2ZScgb24gJ1Jlc2l6ZU9ic2VydmVyJzogMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50LlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzRWxlbWVudCh0YXJnZXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ29ic2VydmUnIG9uICdSZXNpemVPYnNlcnZlcic6IHBhcmFtZXRlciAxIGlzIG5vdCBvZiB0eXBlICdFbGVtZW50XCIpO1xuICAgICAgICB9XG4gICAgICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5vYnNlcnZlKHRoaXMsIHRhcmdldCwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBSZXNpemVPYnNlcnZlci5wcm90b3R5cGUudW5vYnNlcnZlID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBleGVjdXRlICd1bm9ic2VydmUnIG9uICdSZXNpemVPYnNlcnZlcic6IDEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0VsZW1lbnQodGFyZ2V0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBleGVjdXRlICd1bm9ic2VydmUnIG9uICdSZXNpemVPYnNlcnZlcic6IHBhcmFtZXRlciAxIGlzIG5vdCBvZiB0eXBlICdFbGVtZW50XCIpO1xuICAgICAgICB9XG4gICAgICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci51bm9ic2VydmUodGhpcywgdGFyZ2V0KTtcbiAgICB9O1xuICAgIFJlc2l6ZU9ic2VydmVyLnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuZGlzY29ubmVjdCh0aGlzKTtcbiAgICB9O1xuICAgIFJlc2l6ZU9ic2VydmVyLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uIFJlc2l6ZU9ic2VydmVyICgpIHsgW3BvbHlmaWxsIGNvZGVdIH0nO1xuICAgIH07XG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmVyO1xufSgpKTtcbmV4cG9ydCB7IFJlc2l6ZU9ic2VydmVyIH07XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufSIsICJpbXBvcnQgb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSBmcm9tIFwiLi9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7XG4gIHZhciBrZXksIGk7XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldO1xuICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59IiwgIi8qKlxuICogQW4gYXV0by1pbmNyZW1lbnRpbmcgaWRlbnRpZmllciBmb3Iga2V5cy5cbiAqL1xuXG5sZXQgbiA9IDBcblxuLyoqXG4gKiBBIGNsYXNzIHRoYXQga2VlcHMgdHJhY2sgb2YgYSBrZXkgc3RyaW5nLiBXZSB1c2UgYSBmdWxsIGNsYXNzIGhlcmUgYmVjYXVzZSB3ZVxuICogd2FudCB0byBiZSBhYmxlIHRvIHVzZSB0aGVtIGFzIGtleXMgaW4gYFdlYWtNYXBgIG9iamVjdHMuXG4gKi9cblxuZXhwb3J0IGNsYXNzIEtleSB7XG4gIGlkOiBzdHJpbmdcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmlkID0gYCR7bisrfWBcbiAgfVxufVxuIiwgImltcG9ydCB7IEFuY2VzdG9yLCBFZGl0b3IsIE5vZGUsIFJhbmdlLCBSYW5nZVJlZiwgVGV4dCB9IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnLi4vaG9va3MvYW5kcm9pZC1pbnB1dC1tYW5hZ2VyL2FuZHJvaWQtaW5wdXQtbWFuYWdlcidcbmltcG9ydCB7IFRleHREaWZmIH0gZnJvbSAnLi9kaWZmLXRleHQnXG5pbXBvcnQgeyBLZXkgfSBmcm9tICcuL2tleSdcblxuLyoqXG4gKiBUd28gd2VhayBtYXBzIHRoYXQgYWxsb3cgdXMgcmVidWlsZCBhIHBhdGggZ2l2ZW4gYSBub2RlLiBUaGV5IGFyZSBwb3B1bGF0ZWRcbiAqIGF0IHJlbmRlciB0aW1lIHN1Y2ggdGhhdCBhZnRlciBhIHJlbmRlciBvY2N1cnMgd2UgY2FuIGFsd2F5cyBiYWNrdHJhY2suXG4gKi9cblxuZXhwb3J0IGNvbnN0IE5PREVfVE9fSU5ERVg6IFdlYWtNYXA8Tm9kZSwgbnVtYmVyPiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBOT0RFX1RPX1BBUkVOVDogV2Vha01hcDxOb2RlLCBBbmNlc3Rvcj4gPSBuZXcgV2Vha01hcCgpXG5cbi8qKlxuICogV2VhayBtYXBzIHRoYXQgYWxsb3cgdXMgdG8gZ28gYmV0d2VlbiBTbGF0ZSBub2RlcyBhbmQgRE9NIG5vZGVzLiBUaGVzZVxuICogYXJlIHVzZWQgdG8gcmVzb2x2ZSBET00gZXZlbnQtcmVsYXRlZCBsb2dpYyBpbnRvIFNsYXRlIGFjdGlvbnMuXG4gKi9cbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fV0lORE9XOiBXZWFrTWFwPEVkaXRvciwgV2luZG93PiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fRUxFTUVOVDogV2Vha01hcDxFZGl0b3IsIEhUTUxFbGVtZW50PiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fUExBQ0VIT0xERVI6IFdlYWtNYXA8RWRpdG9yLCBzdHJpbmc+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19QTEFDRUhPTERFUl9FTEVNRU5UOiBXZWFrTWFwPFxuICBFZGl0b3IsXG4gIEhUTUxFbGVtZW50XG4+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IEVMRU1FTlRfVE9fTk9ERTogV2Vha01hcDxIVE1MRWxlbWVudCwgTm9kZT4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgTk9ERV9UT19FTEVNRU5UOiBXZWFrTWFwPE5vZGUsIEhUTUxFbGVtZW50PiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBOT0RFX1RPX0tFWTogV2Vha01hcDxOb2RlLCBLZXk+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19LRVlfVE9fRUxFTUVOVDogV2Vha01hcDxcbiAgRWRpdG9yLFxuICBXZWFrTWFwPEtleSwgSFRNTEVsZW1lbnQ+XG4+ID0gbmV3IFdlYWtNYXAoKVxuXG4vKipcbiAqIFdlYWsgbWFwcyBmb3Igc3RvcmluZyBlZGl0b3ItcmVsYXRlZCBzdGF0ZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgSVNfUkVBRF9PTkxZOiBXZWFrTWFwPEVkaXRvciwgYm9vbGVhbj4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgSVNfRk9DVVNFRDogV2Vha01hcDxFZGl0b3IsIGJvb2xlYW4+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IElTX0RSQUdHSU5HOiBXZWFrTWFwPEVkaXRvciwgYm9vbGVhbj4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgSVNfQ0xJQ0tJTkc6IFdlYWtNYXA8RWRpdG9yLCBib29sZWFuPiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBJU19DT01QT1NJTkc6IFdlYWtNYXA8RWRpdG9yLCBib29sZWFuPiA9IG5ldyBXZWFrTWFwKClcblxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19VU0VSX1NFTEVDVElPTjogV2Vha01hcDxcbiAgRWRpdG9yLFxuICBSYW5nZVJlZiB8IG51bGxcbj4gPSBuZXcgV2Vha01hcCgpXG5cbi8qKlxuICogV2VhayBtYXAgZm9yIGFzc29jaWF0aW5nIHRoZSBjb250ZXh0IGBvbkNoYW5nZWAgY29udGV4dCB3aXRoIHRoZSBwbHVnaW4uXG4gKi9cblxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19PTl9DSEFOR0UgPSBuZXcgV2Vha01hcDxFZGl0b3IsICgpID0+IHZvaWQ+KClcblxuLyoqXG4gKiBXZWFrIG1hcHMgZm9yIHNhdmluZyBwZW5kaW5nIHN0YXRlIG9uIGNvbXBvc2l0aW9uIHN0YWdlLlxuICovXG5cbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fU0NIRURVTEVfRkxVU0g6IFdlYWtNYXA8XG4gIEVkaXRvcixcbiAgKCkgPT4gdm9pZFxuPiA9IG5ldyBXZWFrTWFwKClcblxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUzogV2Vha01hcDxcbiAgRWRpdG9yLFxuICBQYXJ0aWFsPFRleHQ+IHwgbnVsbFxuPiA9IG5ldyBXZWFrTWFwKClcblxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19VU0VSX01BUktTOiBXZWFrTWFwPFxuICBFZGl0b3IsXG4gIFBhcnRpYWw8VGV4dD4gfCBudWxsXG4+ID0gbmV3IFdlYWtNYXAoKVxuXG4vKipcbiAqIEFuZHJvaWQgaW5wdXQgaGFuZGxpbmcgc3BlY2lmaWMgd2Vhay1tYXBzXG4gKi9cblxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19QRU5ESU5HX0RJRkZTOiBXZWFrTWFwPFxuICBFZGl0b3IsXG4gIFRleHREaWZmW11cbj4gPSBuZXcgV2Vha01hcCgpXG5cbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fUEVORElOR19BQ1RJT046IFdlYWtNYXA8XG4gIEVkaXRvcixcbiAgQWN0aW9uIHwgbnVsbFxuPiA9IG5ldyBXZWFrTWFwKClcblxuZXhwb3J0IGNvbnN0IEVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTjogV2Vha01hcDxcbiAgRWRpdG9yLFxuICBSYW5nZSB8IG51bGxcbj4gPSBuZXcgV2Vha01hcCgpXG5cbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fRk9SQ0VfUkVOREVSOiBXZWFrTWFwPEVkaXRvciwgKCkgPT4gdm9pZD4gPSBuZXcgV2Vha01hcCgpXG5cbi8qKlxuICogU3ltYm9scy5cbiAqL1xuXG5leHBvcnQgY29uc3QgUExBQ0VIT0xERVJfU1lNQk9MID0gKFN5bWJvbCgncGxhY2Vob2xkZXInKSBhcyB1bmtub3duKSBhcyBzdHJpbmdcbmV4cG9ydCBjb25zdCBNQVJLX1BMQUNFSE9MREVSX1NZTUJPTCA9IChTeW1ib2woXG4gICdtYXJrLXBsYWNlaG9sZGVyJ1xuKSBhcyB1bmtub3duKSBhcyBzdHJpbmdcbiIsICIvKipcbiAqIFR5cGVzLlxuICovXG5cbi8vIENPTVBBVDogVGhpcyBpcyByZXF1aXJlZCB0byBwcmV2ZW50IFR5cGVTY3JpcHQgYWxpYXNlcyBmcm9tIGRvaW5nIHNvbWUgdmVyeVxuLy8gd2VpcmQgdGhpbmdzIGZvciBTbGF0ZSdzIHR5cGVzIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBnbG9iYWxzLiAoMjAxOS8xMS8yNylcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMzUwMDJcbmltcG9ydCBET01Ob2RlID0gZ2xvYmFsVGhpcy5Ob2RlXG5pbXBvcnQgRE9NQ29tbWVudCA9IGdsb2JhbFRoaXMuQ29tbWVudFxuaW1wb3J0IERPTUVsZW1lbnQgPSBnbG9iYWxUaGlzLkVsZW1lbnRcbmltcG9ydCBET01UZXh0ID0gZ2xvYmFsVGhpcy5UZXh0XG5pbXBvcnQgRE9NUmFuZ2UgPSBnbG9iYWxUaGlzLlJhbmdlXG5pbXBvcnQgRE9NU2VsZWN0aW9uID0gZ2xvYmFsVGhpcy5TZWxlY3Rpb25cbmltcG9ydCBET01TdGF0aWNSYW5nZSA9IGdsb2JhbFRoaXMuU3RhdGljUmFuZ2VcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi4vcGx1Z2luL3JlYWN0LWVkaXRvcidcblxuZXhwb3J0IHtcbiAgRE9NTm9kZSxcbiAgRE9NQ29tbWVudCxcbiAgRE9NRWxlbWVudCxcbiAgRE9NVGV4dCxcbiAgRE9NUmFuZ2UsXG4gIERPTVNlbGVjdGlvbixcbiAgRE9NU3RhdGljUmFuZ2UsXG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgU2VsZWN0aW9uOiB0eXBlb2YgU2VsZWN0aW9uWydjb25zdHJ1Y3RvciddXG4gICAgRGF0YVRyYW5zZmVyOiB0eXBlb2YgRGF0YVRyYW5zZmVyWydjb25zdHJ1Y3RvciddXG4gICAgTm9kZTogdHlwZW9mIE5vZGVbJ2NvbnN0cnVjdG9yJ11cbiAgfVxufVxuXG5leHBvcnQgdHlwZSBET01Qb2ludCA9IFtOb2RlLCBudW1iZXJdXG5cbi8qKlxuICogUmV0dXJucyB0aGUgaG9zdCB3aW5kb3cgb2YgYSBET00gbm9kZVxuICovXG5cbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0VmlldyA9ICh2YWx1ZTogYW55KTogV2luZG93IHwgbnVsbCA9PiB7XG4gIHJldHVybiAoXG4gICAgKHZhbHVlICYmIHZhbHVlLm93bmVyRG9jdW1lbnQgJiYgdmFsdWUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldykgfHwgbnVsbFxuICApXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBET00gbm9kZSBpcyBhIGNvbW1lbnQgbm9kZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgaXNET01Db21tZW50ID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBET01Db21tZW50ID0+IHtcbiAgcmV0dXJuIGlzRE9NTm9kZSh2YWx1ZSkgJiYgdmFsdWUubm9kZVR5cGUgPT09IDhcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIERPTSBub2RlIGlzIGFuIGVsZW1lbnQgbm9kZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgaXNET01FbGVtZW50ID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBET01FbGVtZW50ID0+IHtcbiAgcmV0dXJuIGlzRE9NTm9kZSh2YWx1ZSkgJiYgdmFsdWUubm9kZVR5cGUgPT09IDFcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgRE9NIG5vZGUuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGlzRE9NTm9kZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgRE9NTm9kZSA9PiB7XG4gIGNvbnN0IHdpbmRvdyA9IGdldERlZmF1bHRWaWV3KHZhbHVlKVxuICByZXR1cm4gISF3aW5kb3cgJiYgdmFsdWUgaW5zdGFuY2VvZiB3aW5kb3cuTm9kZVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBET00gc2VsZWN0aW9uLlxuICovXG5cbmV4cG9ydCBjb25zdCBpc0RPTVNlbGVjdGlvbiA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgRE9NU2VsZWN0aW9uID0+IHtcbiAgY29uc3Qgd2luZG93ID0gdmFsdWUgJiYgdmFsdWUuYW5jaG9yTm9kZSAmJiBnZXREZWZhdWx0Vmlldyh2YWx1ZS5hbmNob3JOb2RlKVxuICByZXR1cm4gISF3aW5kb3cgJiYgdmFsdWUgaW5zdGFuY2VvZiB3aW5kb3cuU2VsZWN0aW9uXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBET00gbm9kZSBpcyBhbiBlbGVtZW50IG5vZGUuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGlzRE9NVGV4dCA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgRE9NVGV4dCA9PiB7XG4gIHJldHVybiBpc0RPTU5vZGUodmFsdWUpICYmIHZhbHVlLm5vZGVUeXBlID09PSAzXG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYSBwYXN0ZSBldmVudCBpcyBhIHBsYWludGV4dC1vbmx5IGV2ZW50LlxuICovXG5cbmV4cG9ydCBjb25zdCBpc1BsYWluVGV4dE9ubHlQYXN0ZSA9IChldmVudDogQ2xpcGJvYXJkRXZlbnQpID0+IHtcbiAgcmV0dXJuIChcbiAgICBldmVudC5jbGlwYm9hcmREYXRhICYmXG4gICAgZXZlbnQuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0L3BsYWluJykgIT09ICcnICYmXG4gICAgZXZlbnQuY2xpcGJvYXJkRGF0YS50eXBlcy5sZW5ndGggPT09IDFcbiAgKVxufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSBhIERPTSBwb2ludCBzbyB0aGF0IGl0IGFsd2F5cyByZWZlcnMgdG8gYSB0ZXh0IG5vZGUuXG4gKi9cblxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZURPTVBvaW50ID0gKGRvbVBvaW50OiBET01Qb2ludCk6IERPTVBvaW50ID0+IHtcbiAgbGV0IFtub2RlLCBvZmZzZXRdID0gZG9tUG9pbnRcblxuICAvLyBJZiBpdCdzIGFuIGVsZW1lbnQgbm9kZSwgaXRzIG9mZnNldCByZWZlcnMgdG8gdGhlIGluZGV4IG9mIGl0cyBjaGlsZHJlblxuICAvLyBpbmNsdWRpbmcgY29tbWVudCBub2Rlcywgc28gdHJ5IHRvIGZpbmQgdGhlIHJpZ2h0IHRleHQgY2hpbGQgbm9kZS5cbiAgaWYgKGlzRE9NRWxlbWVudChub2RlKSAmJiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgbGV0IGlzTGFzdCA9IG9mZnNldCA9PT0gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aFxuICAgIGxldCBpbmRleCA9IGlzTGFzdCA/IG9mZnNldCAtIDEgOiBvZmZzZXRcbiAgICA7W25vZGUsIGluZGV4XSA9IGdldEVkaXRhYmxlQ2hpbGRBbmRJbmRleChcbiAgICAgIG5vZGUsXG4gICAgICBpbmRleCxcbiAgICAgIGlzTGFzdCA/ICdiYWNrd2FyZCcgOiAnZm9yd2FyZCdcbiAgICApXG4gICAgLy8gSWYgdGhlIGVkaXRhYmxlIGNoaWxkIGZvdW5kIGlzIGluIGZyb250IG9mIGlucHV0IG9mZnNldCwgd2UgaW5zdGVhZCBzZWVrIHRvIGl0cyBlbmRcbiAgICBpc0xhc3QgPSBpbmRleCA8IG9mZnNldFxuXG4gICAgLy8gSWYgdGhlIG5vZGUgaGFzIGNoaWxkcmVuLCB0cmF2ZXJzZSB1bnRpbCB3ZSBoYXZlIGEgbGVhZiBub2RlLiBMZWFmIG5vZGVzXG4gICAgLy8gY2FuIGJlIGVpdGhlciB0ZXh0IG5vZGVzLCBvciBvdGhlciB2b2lkIERPTSBub2Rlcy5cbiAgICB3aGlsZSAoaXNET01FbGVtZW50KG5vZGUpICYmIG5vZGUuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGkgPSBpc0xhc3QgPyBub2RlLmNoaWxkTm9kZXMubGVuZ3RoIC0gMSA6IDBcbiAgICAgIG5vZGUgPSBnZXRFZGl0YWJsZUNoaWxkKG5vZGUsIGksIGlzTGFzdCA/ICdiYWNrd2FyZCcgOiAnZm9yd2FyZCcpXG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSBuZXcgb2Zmc2V0IGluc2lkZSB0aGUgdGV4dCBub2RlLlxuICAgIG9mZnNldCA9IGlzTGFzdCAmJiBub2RlLnRleHRDb250ZW50ICE9IG51bGwgPyBub2RlLnRleHRDb250ZW50Lmxlbmd0aCA6IDBcbiAgfVxuXG4gIC8vIFJldHVybiB0aGUgbm9kZSBhbmQgb2Zmc2V0LlxuICByZXR1cm4gW25vZGUsIG9mZnNldF1cbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdldGhlciB0aGUgYWN0aXZlIGVsZW1lbnQgaXMgbmVzdGVkIHdpdGhpbiBhIHNoYWRvd1Jvb3RcbiAqL1xuXG5leHBvcnQgY29uc3QgaGFzU2hhZG93Um9vdCA9IChub2RlOiBOb2RlIHwgbnVsbCkgPT4ge1xuICBsZXQgcGFyZW50ID0gbm9kZSAmJiBub2RlLnBhcmVudE5vZGVcbiAgd2hpbGUgKHBhcmVudCkge1xuICAgIGlmIChwYXJlbnQudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgU2hhZG93Um9vdF0nKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZVxuICB9XG4gIHJldHVybiBmYWxzZVxufVxuXG4vKipcbiAqIEdldCB0aGUgbmVhcmVzdCBlZGl0YWJsZSBjaGlsZCBhbmQgaW5kZXggYXQgYGluZGV4YCBpbiBhIGBwYXJlbnRgLCBwcmVmZXJyaW5nXG4gKiBgZGlyZWN0aW9uYC5cbiAqL1xuXG5leHBvcnQgY29uc3QgZ2V0RWRpdGFibGVDaGlsZEFuZEluZGV4ID0gKFxuICBwYXJlbnQ6IERPTUVsZW1lbnQsXG4gIGluZGV4OiBudW1iZXIsXG4gIGRpcmVjdGlvbjogJ2ZvcndhcmQnIHwgJ2JhY2t3YXJkJ1xuKTogW0RPTU5vZGUsIG51bWJlcl0gPT4ge1xuICBjb25zdCB7IGNoaWxkTm9kZXMgfSA9IHBhcmVudFxuICBsZXQgY2hpbGQgPSBjaGlsZE5vZGVzW2luZGV4XVxuICBsZXQgaSA9IGluZGV4XG4gIGxldCB0cmllZEZvcndhcmQgPSBmYWxzZVxuICBsZXQgdHJpZWRCYWNrd2FyZCA9IGZhbHNlXG5cbiAgLy8gV2hpbGUgdGhlIGNoaWxkIGlzIGEgY29tbWVudCBub2RlLCBvciBhbiBlbGVtZW50IG5vZGUgd2l0aCBubyBjaGlsZHJlbixcbiAgLy8ga2VlcCBpdGVyYXRpbmcgdG8gZmluZCBhIHNpYmxpbmcgbm9uLXZvaWQsIG5vbi1jb21tZW50IG5vZGUuXG4gIHdoaWxlIChcbiAgICBpc0RPTUNvbW1lbnQoY2hpbGQpIHx8XG4gICAgKGlzRE9NRWxlbWVudChjaGlsZCkgJiYgY2hpbGQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDApIHx8XG4gICAgKGlzRE9NRWxlbWVudChjaGlsZCkgJiYgY2hpbGQuZ2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKSA9PT0gJ2ZhbHNlJylcbiAgKSB7XG4gICAgaWYgKHRyaWVkRm9yd2FyZCAmJiB0cmllZEJhY2t3YXJkKSB7XG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGlmIChpID49IGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICB0cmllZEZvcndhcmQgPSB0cnVlXG4gICAgICBpID0gaW5kZXggLSAxXG4gICAgICBkaXJlY3Rpb24gPSAnYmFja3dhcmQnXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGlmIChpIDwgMCkge1xuICAgICAgdHJpZWRCYWNrd2FyZCA9IHRydWVcbiAgICAgIGkgPSBpbmRleCArIDFcbiAgICAgIGRpcmVjdGlvbiA9ICdmb3J3YXJkJ1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjaGlsZCA9IGNoaWxkTm9kZXNbaV1cbiAgICBpbmRleCA9IGlcbiAgICBpICs9IGRpcmVjdGlvbiA9PT0gJ2ZvcndhcmQnID8gMSA6IC0xXG4gIH1cblxuICByZXR1cm4gW2NoaWxkLCBpbmRleF1cbn1cblxuLyoqXG4gKiBHZXQgdGhlIG5lYXJlc3QgZWRpdGFibGUgY2hpbGQgYXQgYGluZGV4YCBpbiBhIGBwYXJlbnRgLCBwcmVmZXJyaW5nXG4gKiBgZGlyZWN0aW9uYC5cbiAqL1xuXG5leHBvcnQgY29uc3QgZ2V0RWRpdGFibGVDaGlsZCA9IChcbiAgcGFyZW50OiBET01FbGVtZW50LFxuICBpbmRleDogbnVtYmVyLFxuICBkaXJlY3Rpb246ICdmb3J3YXJkJyB8ICdiYWNrd2FyZCdcbik6IERPTU5vZGUgPT4ge1xuICBjb25zdCBbY2hpbGRdID0gZ2V0RWRpdGFibGVDaGlsZEFuZEluZGV4KHBhcmVudCwgaW5kZXgsIGRpcmVjdGlvbilcbiAgcmV0dXJuIGNoaWxkXG59XG5cbi8qKlxuICogR2V0IGEgcGxhaW50ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb250ZW50IG9mIGEgbm9kZSwgYWNjb3VudGluZyBmb3IgYmxvY2tcbiAqIGVsZW1lbnRzIHdoaWNoIGdldCBhIG5ld2xpbmUgYXBwZW5kZWQuXG4gKlxuICogVGhlIGRvbU5vZGUgbXVzdCBiZSBhdHRhY2hlZCB0byB0aGUgRE9NLlxuICovXG5cbmV4cG9ydCBjb25zdCBnZXRQbGFpblRleHQgPSAoZG9tTm9kZTogRE9NTm9kZSkgPT4ge1xuICBsZXQgdGV4dCA9ICcnXG5cbiAgaWYgKGlzRE9NVGV4dChkb21Ob2RlKSAmJiBkb21Ob2RlLm5vZGVWYWx1ZSkge1xuICAgIHJldHVybiBkb21Ob2RlLm5vZGVWYWx1ZVxuICB9XG5cbiAgaWYgKGlzRE9NRWxlbWVudChkb21Ob2RlKSkge1xuICAgIGZvciAoY29uc3QgY2hpbGROb2RlIG9mIEFycmF5LmZyb20oZG9tTm9kZS5jaGlsZE5vZGVzKSkge1xuICAgICAgdGV4dCArPSBnZXRQbGFpblRleHQoY2hpbGROb2RlKVxuICAgIH1cblxuICAgIGNvbnN0IGRpc3BsYXkgPSBnZXRDb21wdXRlZFN0eWxlKGRvbU5vZGUpLmdldFByb3BlcnR5VmFsdWUoJ2Rpc3BsYXknKVxuXG4gICAgaWYgKGRpc3BsYXkgPT09ICdibG9jaycgfHwgZGlzcGxheSA9PT0gJ2xpc3QnIHx8IGRvbU5vZGUudGFnTmFtZSA9PT0gJ0JSJykge1xuICAgICAgdGV4dCArPSAnXFxuJ1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0ZXh0XG59XG5cbi8qKlxuICogR2V0IHgtc2xhdGUtZnJhZ21lbnQgYXR0cmlidXRlIGZyb20gZGF0YS1zbGF0ZS1mcmFnbWVudFxuICovXG5jb25zdCBjYXRjaFNsYXRlRnJhZ21lbnQgPSAvZGF0YS1zbGF0ZS1mcmFnbWVudD1cIiguKz8pXCIvbVxuZXhwb3J0IGNvbnN0IGdldFNsYXRlRnJhZ21lbnRBdHRyaWJ1dGUgPSAoXG4gIGRhdGFUcmFuc2ZlcjogRGF0YVRyYW5zZmVyXG4pOiBzdHJpbmcgfCB2b2lkID0+IHtcbiAgY29uc3QgaHRtbERhdGEgPSBkYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9odG1sJylcbiAgY29uc3QgWywgZnJhZ21lbnRdID0gaHRtbERhdGEubWF0Y2goY2F0Y2hTbGF0ZUZyYWdtZW50KSB8fCBbXVxuICByZXR1cm4gZnJhZ21lbnRcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHgtc2xhdGUtZnJhZ21lbnQgYXR0cmlidXRlIHRoYXQgZXhpc3QgaW4gdGV4dC9odG1sIGRhdGFcbiAqIGFuZCBhcHBlbmQgaXQgdG8gdGhlIERhdGFUcmFuc2ZlciBvYmplY3RcbiAqL1xuZXhwb3J0IGNvbnN0IGdldENsaXBib2FyZERhdGEgPSAoZGF0YVRyYW5zZmVyOiBEYXRhVHJhbnNmZXIpOiBEYXRhVHJhbnNmZXIgPT4ge1xuICBpZiAoIWRhdGFUcmFuc2Zlci5nZXREYXRhKCdhcHBsaWNhdGlvbi94LXNsYXRlLWZyYWdtZW50JykpIHtcbiAgICBjb25zdCBmcmFnbWVudCA9IGdldFNsYXRlRnJhZ21lbnRBdHRyaWJ1dGUoZGF0YVRyYW5zZmVyKVxuICAgIGlmIChmcmFnbWVudCkge1xuICAgICAgY29uc3QgY2xpcGJvYXJkRGF0YSA9IG5ldyBEYXRhVHJhbnNmZXIoKVxuICAgICAgZGF0YVRyYW5zZmVyLnR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICAgIGNsaXBib2FyZERhdGEuc2V0RGF0YSh0eXBlLCBkYXRhVHJhbnNmZXIuZ2V0RGF0YSh0eXBlKSlcbiAgICAgIH0pXG4gICAgICBjbGlwYm9hcmREYXRhLnNldERhdGEoJ2FwcGxpY2F0aW9uL3gtc2xhdGUtZnJhZ21lbnQnLCBmcmFnbWVudClcbiAgICAgIHJldHVybiBjbGlwYm9hcmREYXRhXG4gICAgfVxuICB9XG4gIHJldHVybiBkYXRhVHJhbnNmZXJcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGEgbXV0YXRpb24gb3JpZ2luYXRlcyBmcm9tIGEgZWRpdGFibGUgZWxlbWVudCBpbnNpZGUgdGhlIGVkaXRvci5cbiAqL1xuXG5leHBvcnQgY29uc3QgaXNUcmFja2VkTXV0YXRpb24gPSAoXG4gIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gIG11dGF0aW9uOiBNdXRhdGlvblJlY29yZCxcbiAgYmF0Y2g6IE11dGF0aW9uUmVjb3JkW11cbik6IGJvb2xlYW4gPT4ge1xuICBjb25zdCB7IHRhcmdldCB9ID0gbXV0YXRpb25cbiAgaWYgKGlzRE9NRWxlbWVudCh0YXJnZXQpICYmIHRhcmdldC5tYXRjaGVzKCdbY29udGVudEVkaXRhYmxlPVwiZmFsc2VcIl0nKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgY29uc3QgeyBkb2N1bWVudCB9ID0gUmVhY3RFZGl0b3IuZ2V0V2luZG93KGVkaXRvcilcbiAgaWYgKGRvY3VtZW50LmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICByZXR1cm4gUmVhY3RFZGl0b3IuaGFzRE9NTm9kZShlZGl0b3IsIHRhcmdldCwgeyBlZGl0YWJsZTogdHJ1ZSB9KVxuICB9XG5cbiAgY29uc3QgcGFyZW50TXV0YXRpb24gPSBiYXRjaC5maW5kKCh7IGFkZGVkTm9kZXMsIHJlbW92ZWROb2RlcyB9KSA9PiB7XG4gICAgZm9yIChjb25zdCBub2RlIG9mIGFkZGVkTm9kZXMpIHtcbiAgICAgIGlmIChub2RlID09PSB0YXJnZXQgfHwgbm9kZS5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBub2RlIG9mIHJlbW92ZWROb2Rlcykge1xuICAgICAgaWYgKG5vZGUgPT09IHRhcmdldCB8fCBub2RlLmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgaWYgKCFwYXJlbnRNdXRhdGlvbiB8fCBwYXJlbnRNdXRhdGlvbiA9PT0gbXV0YXRpb24pIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIFRhcmdldCBhZGQvcmVtb3ZlIGlzIHRyYWNrZWQuIFRyYWNrIHRoZSBtdXRhdGlvbiBpZiB3ZSB0cmFjayB0aGUgcGFyZW50IG11dGF0aW9uLlxuICByZXR1cm4gaXNUcmFja2VkTXV0YXRpb24oZWRpdG9yLCBwYXJlbnRNdXRhdGlvbiwgYmF0Y2gpXG59XG4iLCAiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuXG5leHBvcnQgY29uc3QgSVNfUkVBQ1RfVkVSU0lPTl8xN19PUl9BQk9WRSA9XG4gIHBhcnNlSW50KFJlYWN0LnZlcnNpb24uc3BsaXQoJy4nKVswXSwgMTApID49IDE3XG5cbmV4cG9ydCBjb25zdCBJU19JT1MgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAhd2luZG93Lk1TU3RyZWFtXG5cbmV4cG9ydCBjb25zdCBJU19BUFBMRSA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC9NYWMgT1MgWC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG5leHBvcnQgY29uc3QgSVNfQU5EUk9JRCA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC9BbmRyb2lkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbmV4cG9ydCBjb25zdCBJU19GSVJFRk9YID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgL14oPyEuKlNlYW1vbmtleSkoPz0uKkZpcmVmb3gpLiovaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbmV4cG9ydCBjb25zdCBJU19TQUZBUkkgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAvVmVyc2lvblxcL1tcXGRcXC5dKy4qU2FmYXJpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbi8vIFwibW9kZXJuXCIgRWRnZSB3YXMgcmVsZWFzZWQgYXQgNzkueFxuZXhwb3J0IGNvbnN0IElTX0VER0VfTEVHQUNZID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgL0VkZ2U/XFwvKD86WzAtNl1bMC05XXxbMC03XVswLThdKSg/OlxcLikvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbmV4cG9ydCBjb25zdCBJU19DSFJPTUUgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAvQ2hyb21lL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG4vLyBOYXRpdmUgYGJlZm9yZUlucHV0YCBldmVudHMgZG9uJ3Qgd29yayB3ZWxsIHdpdGggcmVhY3Qgb24gQ2hyb21lIDc1XG4vLyBhbmQgb2xkZXIsIENocm9tZSA3NisgY2FuIHVzZSBgYmVmb3JlSW5wdXRgIHRob3VnaC5cbmV4cG9ydCBjb25zdCBJU19DSFJPTUVfTEVHQUNZID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgL0Nocm9tZT9cXC8oPzpbMC03XVswLTVdfFswLTZdWzAtOV0pKD86XFwuKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcblxuLy8gRmlyZWZveCBkaWQgbm90IHN1cHBvcnQgYGJlZm9yZUlucHV0YCB1bnRpbCBgdjg3YC5cbmV4cG9ydCBjb25zdCBJU19GSVJFRk9YX0xFR0FDWSA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gIC9eKD8hLipTZWFtb25rZXkpKD89LipGaXJlZm94XFwvKD86WzAtN11bMC05XXxbMC04XVswLTZdKSg/OlxcLikpLiovaS50ZXN0KFxuICAgIG5hdmlnYXRvci51c2VyQWdlbnRcbiAgKVxuXG4vLyBVQyBtb2JpbGUgYnJvd3NlclxuZXhwb3J0IGNvbnN0IElTX1VDX01PQklMRSA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC8uKlVDQnJvd3Nlci8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG4vLyBXZWNoYXQgYnJvd3NlclxuZXhwb3J0IGNvbnN0IElTX1dFQ0hBVEJST1dTRVIgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAvLipXZWNoYXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcblxuLy8gQ2hlY2sgaWYgRE9NIGlzIGF2YWlsYWJsZSBhcyBSZWFjdCBkb2VzIGludGVybmFsbHkuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvYmxvYi9tYXN0ZXIvcGFja2FnZXMvc2hhcmVkL0V4ZWN1dGlvbkVudmlyb25tZW50LmpzXG5leHBvcnQgY29uc3QgQ0FOX1VTRV9ET00gPSAhIShcbiAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgdHlwZW9mIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50ICE9PSAndW5kZWZpbmVkJ1xuKVxuXG4vLyBDT01QQVQ6IEZpcmVmb3gvRWRnZSBMZWdhY3kgZG9uJ3Qgc3VwcG9ydCB0aGUgYGJlZm9yZWlucHV0YCBldmVudFxuLy8gQ2hyb21lIExlZ2FjeSBkb2Vzbid0IHN1cHBvcnQgYGJlZm9yZWlucHV0YCBjb3JyZWN0bHlcbmV4cG9ydCBjb25zdCBIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQgPVxuICAhSVNfQ0hST01FX0xFR0FDWSAmJlxuICAhSVNfRURHRV9MRUdBQ1kgJiZcbiAgLy8gZ2xvYmFsVGhpcyBpcyB1bmRlZmluZWQgaW4gb2xkZXIgYnJvd3NlcnNcbiAgdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnICYmXG4gIGdsb2JhbFRoaXMuSW5wdXRFdmVudCAmJlxuICAvLyBAdHMtaWdub3JlIFRoZSBgZ2V0VGFyZ2V0UmFuZ2VzYCBwcm9wZXJ0eSBpc24ndCByZWNvZ25pemVkLlxuICB0eXBlb2YgZ2xvYmFsVGhpcy5JbnB1dEV2ZW50LnByb3RvdHlwZS5nZXRUYXJnZXRSYW5nZXMgPT09ICdmdW5jdGlvbidcbiIsICJpbXBvcnQge1xuICBCYXNlRWRpdG9yLFxuICBFZGl0b3IsXG4gIE5vZGUsXG4gIFBhdGgsXG4gIFBvaW50LFxuICBSYW5nZSxcbiAgU2NydWJiZXIsXG4gIFRyYW5zZm9ybXMsXG4gIEVsZW1lbnQsXG59IGZyb20gJ3NsYXRlJ1xuXG5pbXBvcnQgeyBLZXkgfSBmcm9tICcuLi91dGlscy9rZXknXG5pbXBvcnQge1xuICBFRElUT1JfVE9fRUxFTUVOVCxcbiAgRUxFTUVOVF9UT19OT0RFLFxuICBJU19GT0NVU0VELFxuICBJU19SRUFEX09OTFksXG4gIE5PREVfVE9fSU5ERVgsXG4gIE5PREVfVE9fS0VZLFxuICBOT0RFX1RPX1BBUkVOVCxcbiAgRURJVE9SX1RPX1dJTkRPVyxcbiAgRURJVE9SX1RPX0tFWV9UT19FTEVNRU5ULFxuICBJU19DT01QT1NJTkcsXG4gIEVESVRPUl9UT19TQ0hFRFVMRV9GTFVTSCxcbiAgRURJVE9SX1RPX1BFTkRJTkdfRElGRlMsXG59IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7XG4gIERPTUVsZW1lbnQsXG4gIERPTU5vZGUsXG4gIERPTVBvaW50LFxuICBET01SYW5nZSxcbiAgRE9NU2VsZWN0aW9uLFxuICBET01TdGF0aWNSYW5nZSxcbiAgaXNET01FbGVtZW50LFxuICBpc0RPTVNlbGVjdGlvbixcbiAgaXNET01Ob2RlLFxuICBub3JtYWxpemVET01Qb2ludCxcbiAgaGFzU2hhZG93Um9vdCxcbiAgRE9NVGV4dCxcbn0gZnJvbSAnLi4vdXRpbHMvZG9tJ1xuaW1wb3J0IHsgSVNfQ0hST01FLCBJU19GSVJFRk9YLCBJU19BTkRST0lEIH0gZnJvbSAnLi4vdXRpbHMvZW52aXJvbm1lbnQnXG5cbi8qKlxuICogQSBSZWFjdCBhbmQgRE9NLXNwZWNpZmljIHZlcnNpb24gb2YgdGhlIGBFZGl0b3JgIGludGVyZmFjZS5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlYWN0RWRpdG9yIGV4dGVuZHMgQmFzZUVkaXRvciB7XG4gIGluc2VydERhdGE6IChkYXRhOiBEYXRhVHJhbnNmZXIpID0+IHZvaWRcbiAgaW5zZXJ0RnJhZ21lbnREYXRhOiAoZGF0YTogRGF0YVRyYW5zZmVyKSA9PiBib29sZWFuXG4gIGluc2VydFRleHREYXRhOiAoZGF0YTogRGF0YVRyYW5zZmVyKSA9PiBib29sZWFuXG4gIHNldEZyYWdtZW50RGF0YTogKFxuICAgIGRhdGE6IERhdGFUcmFuc2ZlcixcbiAgICBvcmlnaW5FdmVudD86ICdkcmFnJyB8ICdjb3B5JyB8ICdjdXQnXG4gICkgPT4gdm9pZFxuICBoYXNSYW5nZTogKGVkaXRvcjogUmVhY3RFZGl0b3IsIHJhbmdlOiBSYW5nZSkgPT4gYm9vbGVhblxuICBoYXNUYXJnZXQ6IChcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIHRhcmdldDogRXZlbnRUYXJnZXQgfCBudWxsXG4gICkgPT4gdGFyZ2V0IGlzIERPTU5vZGVcbiAgaGFzRWRpdGFibGVUYXJnZXQ6IChcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIHRhcmdldDogRXZlbnRUYXJnZXQgfCBudWxsXG4gICkgPT4gdGFyZ2V0IGlzIERPTU5vZGVcbiAgaGFzU2VsZWN0YWJsZVRhcmdldDogKFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgdGFyZ2V0OiBFdmVudFRhcmdldCB8IG51bGxcbiAgKSA9PiBib29sZWFuXG4gIGlzVGFyZ2V0SW5zaWRlTm9uUmVhZG9ubHlWb2lkOiAoXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICB0YXJnZXQ6IEV2ZW50VGFyZ2V0IHwgbnVsbFxuICApID0+IGJvb2xlYW5cbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFJlYWN0RWRpdG9yID0ge1xuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHVzZXIgaXMgY3VycmVudGx5IGNvbXBvc2luZyBpbnNpZGUgdGhlIGVkaXRvci5cbiAgICovXG5cbiAgaXNDb21wb3NpbmcoZWRpdG9yOiBSZWFjdEVkaXRvcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIUlTX0NPTVBPU0lORy5nZXQoZWRpdG9yKVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGhvc3Qgd2luZG93IG9mIHRoZSBjdXJyZW50IGVkaXRvci5cbiAgICovXG5cbiAgZ2V0V2luZG93KGVkaXRvcjogUmVhY3RFZGl0b3IpOiBXaW5kb3cge1xuICAgIGNvbnN0IHdpbmRvdyA9IEVESVRPUl9UT19XSU5ET1cuZ2V0KGVkaXRvcilcbiAgICBpZiAoIXdpbmRvdykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZmluZCBhIGhvc3Qgd2luZG93IGVsZW1lbnQgZm9yIHRoaXMgZWRpdG9yJylcbiAgICB9XG4gICAgcmV0dXJuIHdpbmRvd1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kIGEga2V5IGZvciBhIFNsYXRlIG5vZGUuXG4gICAqL1xuXG4gIGZpbmRLZXkoZWRpdG9yOiBSZWFjdEVkaXRvciwgbm9kZTogTm9kZSk6IEtleSB7XG4gICAgbGV0IGtleSA9IE5PREVfVE9fS0VZLmdldChub2RlKVxuXG4gICAgaWYgKCFrZXkpIHtcbiAgICAgIGtleSA9IG5ldyBLZXkoKVxuICAgICAgTk9ERV9UT19LRVkuc2V0KG5vZGUsIGtleSlcbiAgICB9XG5cbiAgICByZXR1cm4ga2V5XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIHBhdGggb2YgU2xhdGUgbm9kZS5cbiAgICovXG5cbiAgZmluZFBhdGgoZWRpdG9yOiBSZWFjdEVkaXRvciwgbm9kZTogTm9kZSk6IFBhdGgge1xuICAgIGNvbnN0IHBhdGg6IFBhdGggPSBbXVxuICAgIGxldCBjaGlsZCA9IG5vZGVcblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSBOT0RFX1RPX1BBUkVOVC5nZXQoY2hpbGQpXG5cbiAgICAgIGlmIChwYXJlbnQgPT0gbnVsbCkge1xuICAgICAgICBpZiAoRWRpdG9yLmlzRWRpdG9yKGNoaWxkKSkge1xuICAgICAgICAgIHJldHVybiBwYXRoXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBpID0gTk9ERV9UT19JTkRFWC5nZXQoY2hpbGQpXG5cbiAgICAgIGlmIChpID09IG51bGwpIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgcGF0aC51bnNoaWZ0KGkpXG4gICAgICBjaGlsZCA9IHBhcmVudFxuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBVbmFibGUgdG8gZmluZCB0aGUgcGF0aCBmb3IgU2xhdGUgbm9kZTogJHtTY3J1YmJlci5zdHJpbmdpZnkobm9kZSl9YFxuICAgIClcbiAgfSxcblxuICAvKipcbiAgICogRmluZCB0aGUgRE9NIG5vZGUgdGhhdCBpbXBsZW1lbnRzIERvY3VtZW50T3JTaGFkb3dSb290IGZvciB0aGUgZWRpdG9yLlxuICAgKi9cblxuICBmaW5kRG9jdW1lbnRPclNoYWRvd1Jvb3QoZWRpdG9yOiBSZWFjdEVkaXRvcik6IERvY3VtZW50IHwgU2hhZG93Um9vdCB7XG4gICAgY29uc3QgZWwgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBlZGl0b3IpXG4gICAgY29uc3Qgcm9vdCA9IGVsLmdldFJvb3ROb2RlKClcblxuICAgIGlmIChcbiAgICAgIChyb290IGluc3RhbmNlb2YgRG9jdW1lbnQgfHwgcm9vdCBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QpICYmXG4gICAgICByb290LmdldFNlbGVjdGlvbiAhPSBudWxsXG4gICAgKSB7XG4gICAgICByZXR1cm4gcm9vdFxuICAgIH1cblxuICAgIHJldHVybiBlbC5vd25lckRvY3VtZW50XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBlZGl0b3IgaXMgZm9jdXNlZC5cbiAgICovXG5cbiAgaXNGb2N1c2VkKGVkaXRvcjogUmVhY3RFZGl0b3IpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISFJU19GT0NVU0VELmdldChlZGl0b3IpXG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBlZGl0b3IgaXMgaW4gcmVhZC1vbmx5IG1vZGUuXG4gICAqL1xuXG4gIGlzUmVhZE9ubHkoZWRpdG9yOiBSZWFjdEVkaXRvcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIUlTX1JFQURfT05MWS5nZXQoZWRpdG9yKVxuICB9LFxuXG4gIC8qKlxuICAgKiBCbHVyIHRoZSBlZGl0b3IuXG4gICAqL1xuXG4gIGJsdXIoZWRpdG9yOiBSZWFjdEVkaXRvcik6IHZvaWQge1xuICAgIGNvbnN0IGVsID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKVxuICAgIGNvbnN0IHJvb3QgPSBSZWFjdEVkaXRvci5maW5kRG9jdW1lbnRPclNoYWRvd1Jvb3QoZWRpdG9yKVxuICAgIElTX0ZPQ1VTRUQuc2V0KGVkaXRvciwgZmFsc2UpXG5cbiAgICBpZiAocm9vdC5hY3RpdmVFbGVtZW50ID09PSBlbCkge1xuICAgICAgZWwuYmx1cigpXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBGb2N1cyB0aGUgZWRpdG9yLlxuICAgKi9cblxuICBmb2N1cyhlZGl0b3I6IFJlYWN0RWRpdG9yKTogdm9pZCB7XG4gICAgY29uc3QgZWwgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBlZGl0b3IpXG4gICAgY29uc3Qgcm9vdCA9IFJlYWN0RWRpdG9yLmZpbmREb2N1bWVudE9yU2hhZG93Um9vdChlZGl0b3IpXG4gICAgSVNfRk9DVVNFRC5zZXQoZWRpdG9yLCB0cnVlKVxuXG4gICAgaWYgKHJvb3QuYWN0aXZlRWxlbWVudCAhPT0gZWwpIHtcbiAgICAgIGVsLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVzZWxlY3QgdGhlIGVkaXRvci5cbiAgICovXG5cbiAgZGVzZWxlY3QoZWRpdG9yOiBSZWFjdEVkaXRvcik6IHZvaWQge1xuICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgICBjb25zdCByb290ID0gUmVhY3RFZGl0b3IuZmluZERvY3VtZW50T3JTaGFkb3dSb290KGVkaXRvcilcbiAgICBjb25zdCBkb21TZWxlY3Rpb24gPSByb290LmdldFNlbGVjdGlvbigpXG5cbiAgICBpZiAoZG9tU2VsZWN0aW9uICYmIGRvbVNlbGVjdGlvbi5yYW5nZUNvdW50ID4gMCkge1xuICAgICAgZG9tU2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpXG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgVHJhbnNmb3Jtcy5kZXNlbGVjdChlZGl0b3IpXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIERPTSBub2RlIGlzIHdpdGhpbiB0aGUgZWRpdG9yLlxuICAgKi9cblxuICBoYXNET01Ob2RlKFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgdGFyZ2V0OiBET01Ob2RlLFxuICAgIG9wdGlvbnM6IHsgZWRpdGFibGU/OiBib29sZWFuIH0gPSB7fVxuICApOiBib29sZWFuIHtcbiAgICBjb25zdCB7IGVkaXRhYmxlID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICBjb25zdCBlZGl0b3JFbCA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcilcbiAgICBsZXQgdGFyZ2V0RWxcblxuICAgIC8vIENPTVBBVDogSW4gRmlyZWZveCwgcmVhZGluZyBgdGFyZ2V0Lm5vZGVUeXBlYCB3aWxsIHRocm93IGFuIGVycm9yIGlmXG4gICAgLy8gdGFyZ2V0IGlzIG9yaWdpbmF0aW5nIGZyb20gYW4gaW50ZXJuYWwgXCJyZXN0cmljdGVkXCIgZWxlbWVudCAoZS5nLiBhXG4gICAgLy8gc3RlcHBlciBhcnJvdyBvbiBhIG51bWJlciBpbnB1dCkuICgyMDE4LzA1LzA0KVxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9pYW5zdG9ybXRheWxvci9zbGF0ZS9pc3N1ZXMvMTgxOVxuICAgIHRyeSB7XG4gICAgICB0YXJnZXRFbCA9IChpc0RPTUVsZW1lbnQodGFyZ2V0KVxuICAgICAgICA/IHRhcmdldFxuICAgICAgICA6IHRhcmdldC5wYXJlbnRFbGVtZW50KSBhcyBIVE1MRWxlbWVudFxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKFxuICAgICAgICAhZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ1Blcm1pc3Npb24gZGVuaWVkIHRvIGFjY2VzcyBwcm9wZXJ0eSBcIm5vZGVUeXBlXCInKVxuICAgICAgKSB7XG4gICAgICAgIHRocm93IGVyclxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGFyZ2V0RWwpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICB0YXJnZXRFbC5jbG9zZXN0KGBbZGF0YS1zbGF0ZS1lZGl0b3JdYCkgPT09IGVkaXRvckVsICYmXG4gICAgICAoIWVkaXRhYmxlIHx8IHRhcmdldEVsLmlzQ29udGVudEVkaXRhYmxlXG4gICAgICAgID8gdHJ1ZVxuICAgICAgICA6ICh0eXBlb2YgdGFyZ2V0RWwuaXNDb250ZW50RWRpdGFibGUgPT09ICdib29sZWFuJyAmJiAvLyBpc0NvbnRlbnRFZGl0YWJsZSBleGlzdHMgb25seSBvbiBIVE1MRWxlbWVudCwgYW5kIG9uIG90aGVyIG5vZGVzIGl0IHdpbGwgYmUgdW5kZWZpbmVkXG4gICAgICAgICAgICAvLyB0aGlzIGlzIHRoZSBjb3JlIGxvZ2ljIHRoYXQgbGV0cyB5b3Uga25vdyB5b3UgZ290IHRoZSByaWdodCBlZGl0b3Iuc2VsZWN0aW9uIGluc3RlYWQgb2YgbnVsbCB3aGVuIGVkaXRvciBpcyBjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiKHJlYWRPbmx5KVxuICAgICAgICAgICAgdGFyZ2V0RWwuY2xvc2VzdCgnW2NvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCJdJykgPT09IGVkaXRvckVsKSB8fFxuICAgICAgICAgICEhdGFyZ2V0RWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNsYXRlLXplcm8td2lkdGgnKSlcbiAgICApXG4gIH0sXG5cbiAgLyoqXG4gICAqIEluc2VydCBkYXRhIGZyb20gYSBgRGF0YVRyYW5zZmVyYCBpbnRvIHRoZSBlZGl0b3IuXG4gICAqL1xuXG4gIGluc2VydERhdGEoZWRpdG9yOiBSZWFjdEVkaXRvciwgZGF0YTogRGF0YVRyYW5zZmVyKTogdm9pZCB7XG4gICAgZWRpdG9yLmluc2VydERhdGEoZGF0YSlcbiAgfSxcblxuICAvKipcbiAgICogSW5zZXJ0IGZyYWdtZW50IGRhdGEgZnJvbSBhIGBEYXRhVHJhbnNmZXJgIGludG8gdGhlIGVkaXRvci5cbiAgICovXG5cbiAgaW5zZXJ0RnJhZ21lbnREYXRhKGVkaXRvcjogUmVhY3RFZGl0b3IsIGRhdGE6IERhdGFUcmFuc2Zlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBlZGl0b3IuaW5zZXJ0RnJhZ21lbnREYXRhKGRhdGEpXG4gIH0sXG5cbiAgLyoqXG4gICAqIEluc2VydCB0ZXh0IGRhdGEgZnJvbSBhIGBEYXRhVHJhbnNmZXJgIGludG8gdGhlIGVkaXRvci5cbiAgICovXG5cbiAgaW5zZXJ0VGV4dERhdGEoZWRpdG9yOiBSZWFjdEVkaXRvciwgZGF0YTogRGF0YVRyYW5zZmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGVkaXRvci5pbnNlcnRUZXh0RGF0YShkYXRhKVxuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGRhdGEgZnJvbSB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGZyYWdtZW50IG9uIGEgYERhdGFUcmFuc2ZlcmAuXG4gICAqL1xuXG4gIHNldEZyYWdtZW50RGF0YShcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIGRhdGE6IERhdGFUcmFuc2ZlcixcbiAgICBvcmlnaW5FdmVudD86ICdkcmFnJyB8ICdjb3B5JyB8ICdjdXQnXG4gICk6IHZvaWQge1xuICAgIGVkaXRvci5zZXRGcmFnbWVudERhdGEoZGF0YSwgb3JpZ2luRXZlbnQpXG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIG5hdGl2ZSBET00gZWxlbWVudCBmcm9tIGEgU2xhdGUgbm9kZS5cbiAgICovXG5cbiAgdG9ET01Ob2RlKGVkaXRvcjogUmVhY3RFZGl0b3IsIG5vZGU6IE5vZGUpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgS0VZX1RPX0VMRU1FTlQgPSBFRElUT1JfVE9fS0VZX1RPX0VMRU1FTlQuZ2V0KGVkaXRvcilcbiAgICBjb25zdCBkb21Ob2RlID0gRWRpdG9yLmlzRWRpdG9yKG5vZGUpXG4gICAgICA/IEVESVRPUl9UT19FTEVNRU5ULmdldChlZGl0b3IpXG4gICAgICA6IEtFWV9UT19FTEVNRU5UPy5nZXQoUmVhY3RFZGl0b3IuZmluZEtleShlZGl0b3IsIG5vZGUpKVxuXG4gICAgaWYgKCFkb21Ob2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgcmVzb2x2ZSBhIERPTSBub2RlIGZyb20gU2xhdGUgbm9kZTogJHtTY3J1YmJlci5zdHJpbmdpZnkobm9kZSl9YFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBkb21Ob2RlXG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmQgYSBuYXRpdmUgRE9NIHNlbGVjdGlvbiBwb2ludCBmcm9tIGEgU2xhdGUgcG9pbnQuXG4gICAqL1xuXG4gIHRvRE9NUG9pbnQoZWRpdG9yOiBSZWFjdEVkaXRvciwgcG9pbnQ6IFBvaW50KTogRE9NUG9pbnQge1xuICAgIGNvbnN0IFtub2RlXSA9IEVkaXRvci5ub2RlKGVkaXRvciwgcG9pbnQucGF0aClcbiAgICBjb25zdCBlbCA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIG5vZGUpXG4gICAgbGV0IGRvbVBvaW50OiBET01Qb2ludCB8IHVuZGVmaW5lZFxuXG4gICAgLy8gSWYgd2UncmUgaW5zaWRlIGEgdm9pZCBub2RlLCBmb3JjZSB0aGUgb2Zmc2V0IHRvIDAsIG90aGVyd2lzZSB0aGUgemVyb1xuICAgIC8vIHdpZHRoIHNwYWNpbmcgY2hhcmFjdGVyIHdpbGwgcmVzdWx0IGluIGFuIGluY29ycmVjdCBvZmZzZXQgb2YgMVxuICAgIGlmIChFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQ6IHBvaW50IH0pKSB7XG4gICAgICBwb2ludCA9IHsgcGF0aDogcG9pbnQucGF0aCwgb2Zmc2V0OiAwIH1cbiAgICB9XG5cbiAgICAvLyBGb3IgZWFjaCBsZWFmLCB3ZSBuZWVkIHRvIGlzb2xhdGUgaXRzIGNvbnRlbnQsIHdoaWNoIG1lYW5zIGZpbHRlcmluZ1xuICAgIC8vIHRvIGl0cyBkaXJlY3QgdGV4dCBhbmQgemVyby13aWR0aCBzcGFucy4gKFdlIGhhdmUgdG8gZmlsdGVyIG91dCBhbnlcbiAgICAvLyBvdGhlciBzaWJsaW5ncyB0aGF0IG1heSBoYXZlIGJlZW4gcmVuZGVyZWQgYWxvbmdzaWRlIHRoZW0uKVxuICAgIGNvbnN0IHNlbGVjdG9yID0gYFtkYXRhLXNsYXRlLXN0cmluZ10sIFtkYXRhLXNsYXRlLXplcm8td2lkdGhdYFxuICAgIGNvbnN0IHRleHRzID0gQXJyYXkuZnJvbShlbC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSlcbiAgICBsZXQgc3RhcnQgPSAwXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB0ZXh0ID0gdGV4dHNbaV1cbiAgICAgIGNvbnN0IGRvbU5vZGUgPSB0ZXh0LmNoaWxkTm9kZXNbMF0gYXMgSFRNTEVsZW1lbnRcblxuICAgICAgaWYgKGRvbU5vZGUgPT0gbnVsbCB8fCBkb21Ob2RlLnRleHRDb250ZW50ID09IG51bGwpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBsZW5ndGggfSA9IGRvbU5vZGUudGV4dENvbnRlbnRcbiAgICAgIGNvbnN0IGF0dHIgPSB0ZXh0LmdldEF0dHJpYnV0ZSgnZGF0YS1zbGF0ZS1sZW5ndGgnKVxuICAgICAgY29uc3QgdHJ1ZUxlbmd0aCA9IGF0dHIgPT0gbnVsbCA/IGxlbmd0aCA6IHBhcnNlSW50KGF0dHIsIDEwKVxuICAgICAgY29uc3QgZW5kID0gc3RhcnQgKyB0cnVlTGVuZ3RoXG5cbiAgICAgIC8vIFByZWZlciBwdXR0aW5nIHRoZSBzZWxlY3Rpb24gaW5zaWRlIHRoZSBtYXJrIHBsYWNlaG9sZGVyIHRvIGVuc3VyZVxuICAgICAgLy8gY29tcG9zZWQgdGV4dCBpcyBkaXNwbGF5ZWQgd2l0aCB0aGUgY29ycmVjdCBtYXJrcy5cbiAgICAgIGNvbnN0IG5leHRUZXh0ID0gdGV4dHNbaSArIDFdXG4gICAgICBpZiAoXG4gICAgICAgIHBvaW50Lm9mZnNldCA9PT0gZW5kICYmXG4gICAgICAgIG5leHRUZXh0Py5oYXNBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtbWFyay1wbGFjZWhvbGRlcicpXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgZG9tVGV4dCA9IG5leHRUZXh0LmNoaWxkTm9kZXNbMF1cblxuICAgICAgICBkb21Qb2ludCA9IFtcbiAgICAgICAgICAvLyBDT01QQVQ6IElmIHdlIGRvbid0IGV4cGxpY2l0eSBzZXQgdGhlIGRvbSBwb2ludCB0byBiZSBvbiB0aGUgYWN0dWFsXG4gICAgICAgICAgLy8gZG9tIHRleHQgZWxlbWVudCwgY2hyb21lIHdpbGwgcHV0IHRoZSBzZWxlY3Rpb24gYmVoaW5kIHRoZSBhY3R1YWwgZG9tXG4gICAgICAgICAgLy8gdGV4dCBlbGVtZW50LCBjYXVzaW5nIGRvbVJhbmdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIGNhbGxzIG9uIGEgY29sbGFwc2VkXG4gICAgICAgICAgLy8gc2VsZWN0aW9uIHRvIHJldHVybiBpbmNvcnJlY3QgemVybyB2YWx1ZXMgKGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQzNTQzOClcbiAgICAgICAgICAvLyB3aGljaCB3aWxsIGNhdXNlIGlzc3VlcyB3aGVuIHNjcm9sbGluZyB0byBpdC5cbiAgICAgICAgICBkb21UZXh0IGluc3RhbmNlb2YgRE9NVGV4dCA/IGRvbVRleHQgOiBuZXh0VGV4dCxcbiAgICAgICAgICBuZXh0VGV4dC50ZXh0Q29udGVudD8uc3RhcnRzV2l0aCgnXFx1RkVGRicpID8gMSA6IDAsXG4gICAgICAgIF1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgaWYgKHBvaW50Lm9mZnNldCA8PSBlbmQpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gTWF0aC5taW4obGVuZ3RoLCBNYXRoLm1heCgwLCBwb2ludC5vZmZzZXQgLSBzdGFydCkpXG4gICAgICAgIGRvbVBvaW50ID0gW2RvbU5vZGUsIG9mZnNldF1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgc3RhcnQgPSBlbmRcbiAgICB9XG5cbiAgICBpZiAoIWRvbVBvaW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgcmVzb2x2ZSBhIERPTSBwb2ludCBmcm9tIFNsYXRlIHBvaW50OiAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgICBwb2ludFxuICAgICAgICApfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tUG9pbnRcbiAgfSxcblxuICAvKipcbiAgICogRmluZCBhIG5hdGl2ZSBET00gcmFuZ2UgZnJvbSBhIFNsYXRlIGByYW5nZWAuXG4gICAqXG4gICAqIE5vdGljZTogdGhlIHJldHVybmVkIHJhbmdlIHdpbGwgYWx3YXlzIGJlIG9yZGluYWwgcmVnYXJkbGVzcyBvZiB0aGUgZGlyZWN0aW9uIG9mIFNsYXRlIGByYW5nZWAgZHVlIHRvIERPTSBBUEkgbGltaXQuXG4gICAqXG4gICAqIHRoZXJlIGlzIG5vIHdheSB0byBjcmVhdGUgYSByZXZlcnNlIERPTSBSYW5nZSB1c2luZyBSYW5nZS5zZXRTdGFydC9zZXRFbmRcbiAgICogYWNjb3JkaW5nIHRvIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1yYW5nZS1icC1zZXQuXG4gICAqL1xuXG4gIHRvRE9NUmFuZ2UoZWRpdG9yOiBSZWFjdEVkaXRvciwgcmFuZ2U6IFJhbmdlKTogRE9NUmFuZ2Uge1xuICAgIGNvbnN0IHsgYW5jaG9yLCBmb2N1cyB9ID0gcmFuZ2VcbiAgICBjb25zdCBpc0JhY2t3YXJkID0gUmFuZ2UuaXNCYWNrd2FyZChyYW5nZSlcbiAgICBjb25zdCBkb21BbmNob3IgPSBSZWFjdEVkaXRvci50b0RPTVBvaW50KGVkaXRvciwgYW5jaG9yKVxuICAgIGNvbnN0IGRvbUZvY3VzID0gUmFuZ2UuaXNDb2xsYXBzZWQocmFuZ2UpXG4gICAgICA/IGRvbUFuY2hvclxuICAgICAgOiBSZWFjdEVkaXRvci50b0RPTVBvaW50KGVkaXRvciwgZm9jdXMpXG5cbiAgICBjb25zdCB3aW5kb3cgPSBSZWFjdEVkaXRvci5nZXRXaW5kb3coZWRpdG9yKVxuICAgIGNvbnN0IGRvbVJhbmdlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZVJhbmdlKClcbiAgICBjb25zdCBbc3RhcnROb2RlLCBzdGFydE9mZnNldF0gPSBpc0JhY2t3YXJkID8gZG9tRm9jdXMgOiBkb21BbmNob3JcbiAgICBjb25zdCBbZW5kTm9kZSwgZW5kT2Zmc2V0XSA9IGlzQmFja3dhcmQgPyBkb21BbmNob3IgOiBkb21Gb2N1c1xuXG4gICAgLy8gQSBzbGF0ZSBQb2ludCBhdCB6ZXJvLXdpZHRoIExlYWYgYWx3YXlzIGhhcyBhbiBvZmZzZXQgb2YgMCBidXQgYSBuYXRpdmUgRE9NIHNlbGVjdGlvbiBhdFxuICAgIC8vIHplcm8td2lkdGggbm9kZSBoYXMgYW4gb2Zmc2V0IG9mIDEgc28gd2UgaGF2ZSB0byBjaGVjayBpZiB3ZSBhcmUgaW4gYSB6ZXJvLXdpZHRoIG5vZGUgYW5kXG4gICAgLy8gYWRqdXN0IHRoZSBvZmZzZXQgYWNjb3JkaW5nbHkuXG4gICAgY29uc3Qgc3RhcnRFbCA9IChpc0RPTUVsZW1lbnQoc3RhcnROb2RlKVxuICAgICAgPyBzdGFydE5vZGVcbiAgICAgIDogc3RhcnROb2RlLnBhcmVudEVsZW1lbnQpIGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgaXNTdGFydEF0WmVyb1dpZHRoID0gISFzdGFydEVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zbGF0ZS16ZXJvLXdpZHRoJylcbiAgICBjb25zdCBlbmRFbCA9IChpc0RPTUVsZW1lbnQoZW5kTm9kZSlcbiAgICAgID8gZW5kTm9kZVxuICAgICAgOiBlbmROb2RlLnBhcmVudEVsZW1lbnQpIGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgaXNFbmRBdFplcm9XaWR0aCA9ICEhZW5kRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNsYXRlLXplcm8td2lkdGgnKVxuXG4gICAgZG9tUmFuZ2Uuc2V0U3RhcnQoc3RhcnROb2RlLCBpc1N0YXJ0QXRaZXJvV2lkdGggPyAxIDogc3RhcnRPZmZzZXQpXG4gICAgZG9tUmFuZ2Uuc2V0RW5kKGVuZE5vZGUsIGlzRW5kQXRaZXJvV2lkdGggPyAxIDogZW5kT2Zmc2V0KVxuICAgIHJldHVybiBkb21SYW5nZVxuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kIGEgU2xhdGUgbm9kZSBmcm9tIGEgbmF0aXZlIERPTSBgZWxlbWVudGAuXG4gICAqL1xuXG4gIHRvU2xhdGVOb2RlKGVkaXRvcjogUmVhY3RFZGl0b3IsIGRvbU5vZGU6IERPTU5vZGUpOiBOb2RlIHtcbiAgICBsZXQgZG9tRWwgPSBpc0RPTUVsZW1lbnQoZG9tTm9kZSkgPyBkb21Ob2RlIDogZG9tTm9kZS5wYXJlbnRFbGVtZW50XG5cbiAgICBpZiAoZG9tRWwgJiYgIWRvbUVsLmhhc0F0dHJpYnV0ZSgnZGF0YS1zbGF0ZS1ub2RlJykpIHtcbiAgICAgIGRvbUVsID0gZG9tRWwuY2xvc2VzdChgW2RhdGEtc2xhdGUtbm9kZV1gKVxuICAgIH1cblxuICAgIGNvbnN0IG5vZGUgPSBkb21FbCA/IEVMRU1FTlRfVE9fTk9ERS5nZXQoZG9tRWwgYXMgSFRNTEVsZW1lbnQpIDogbnVsbFxuXG4gICAgaWYgKCFub2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCByZXNvbHZlIGEgU2xhdGUgbm9kZSBmcm9tIERPTSBub2RlOiAke2RvbUVsfWApXG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSB0YXJnZXQgcmFuZ2UgZnJvbSBhIERPTSBgZXZlbnRgLlxuICAgKi9cblxuICBmaW5kRXZlbnRSYW5nZShlZGl0b3I6IFJlYWN0RWRpdG9yLCBldmVudDogYW55KTogUmFuZ2Uge1xuICAgIGlmICgnbmF0aXZlRXZlbnQnIGluIGV2ZW50KSB7XG4gICAgICBldmVudCA9IGV2ZW50Lm5hdGl2ZUV2ZW50XG4gICAgfVxuXG4gICAgY29uc3QgeyBjbGllbnRYOiB4LCBjbGllbnRZOiB5LCB0YXJnZXQgfSA9IGV2ZW50XG5cbiAgICBpZiAoeCA9PSBudWxsIHx8IHkgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVzb2x2ZSBhIFNsYXRlIHJhbmdlIGZyb20gYSBET00gZXZlbnQ6ICR7ZXZlbnR9YClcbiAgICB9XG5cbiAgICBjb25zdCBub2RlID0gUmVhY3RFZGl0b3IudG9TbGF0ZU5vZGUoZWRpdG9yLCBldmVudC50YXJnZXQpXG4gICAgY29uc3QgcGF0aCA9IFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgbm9kZSlcblxuICAgIC8vIElmIHRoZSBkcm9wIHRhcmdldCBpcyBpbnNpZGUgYSB2b2lkIG5vZGUsIG1vdmUgaXQgaW50byBlaXRoZXIgdGhlXG4gICAgLy8gbmV4dCBvciBwcmV2aW91cyBub2RlLCBkZXBlbmRpbmcgb24gd2hpY2ggc2lkZSB0aGUgYHhgIGFuZCBgeWBcbiAgICAvLyBjb29yZGluYXRlcyBhcmUgY2xvc2VzdCB0by5cbiAgICBpZiAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiYgRWRpdG9yLmlzVm9pZChlZGl0b3IsIG5vZGUpKSB7XG4gICAgICBjb25zdCByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICBjb25zdCBpc1ByZXYgPSBlZGl0b3IuaXNJbmxpbmUobm9kZSlcbiAgICAgICAgPyB4IC0gcmVjdC5sZWZ0IDwgcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAtIHhcbiAgICAgICAgOiB5IC0gcmVjdC50b3AgPCByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC0geVxuXG4gICAgICBjb25zdCBlZGdlID0gRWRpdG9yLnBvaW50KGVkaXRvciwgcGF0aCwge1xuICAgICAgICBlZGdlOiBpc1ByZXYgPyAnc3RhcnQnIDogJ2VuZCcsXG4gICAgICB9KVxuICAgICAgY29uc3QgcG9pbnQgPSBpc1ByZXZcbiAgICAgICAgPyBFZGl0b3IuYmVmb3JlKGVkaXRvciwgZWRnZSlcbiAgICAgICAgOiBFZGl0b3IuYWZ0ZXIoZWRpdG9yLCBlZGdlKVxuXG4gICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBwb2ludClcbiAgICAgICAgcmV0dXJuIHJhbmdlXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRWxzZSByZXNvbHZlIGEgcmFuZ2UgZnJvbSB0aGUgY2FyZXQgcG9zaXRpb24gd2hlcmUgdGhlIGRyb3Agb2NjdXJlZC5cbiAgICBsZXQgZG9tUmFuZ2VcbiAgICBjb25zdCB7IGRvY3VtZW50IH0gPSBSZWFjdEVkaXRvci5nZXRXaW5kb3coZWRpdG9yKVxuXG4gICAgLy8gQ09NUEFUOiBJbiBGaXJlZm94LCBgY2FyZXRSYW5nZUZyb21Qb2ludGAgZG9lc24ndCBleGlzdC4gKDIwMTYvMDcvMjUpXG4gICAgaWYgKGRvY3VtZW50LmNhcmV0UmFuZ2VGcm9tUG9pbnQpIHtcbiAgICAgIGRvbVJhbmdlID0gZG9jdW1lbnQuY2FyZXRSYW5nZUZyb21Qb2ludCh4LCB5KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IGRvY3VtZW50LmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQoeCwgeSlcblxuICAgICAgaWYgKHBvc2l0aW9uKSB7XG4gICAgICAgIGRvbVJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKVxuICAgICAgICBkb21SYW5nZS5zZXRTdGFydChwb3NpdGlvbi5vZmZzZXROb2RlLCBwb3NpdGlvbi5vZmZzZXQpXG4gICAgICAgIGRvbVJhbmdlLnNldEVuZChwb3NpdGlvbi5vZmZzZXROb2RlLCBwb3NpdGlvbi5vZmZzZXQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFkb21SYW5nZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVzb2x2ZSBhIFNsYXRlIHJhbmdlIGZyb20gYSBET00gZXZlbnQ6ICR7ZXZlbnR9YClcbiAgICB9XG5cbiAgICAvLyBSZXNvbHZlIGEgU2xhdGUgcmFuZ2UgZnJvbSB0aGUgRE9NIHJhbmdlLlxuICAgIGNvbnN0IHJhbmdlID0gUmVhY3RFZGl0b3IudG9TbGF0ZVJhbmdlKGVkaXRvciwgZG9tUmFuZ2UsIHtcbiAgICAgIGV4YWN0TWF0Y2g6IGZhbHNlLFxuICAgICAgc3VwcHJlc3NUaHJvdzogZmFsc2UsXG4gICAgfSlcbiAgICByZXR1cm4gcmFuZ2VcbiAgfSxcblxuICAvKipcbiAgICogRmluZCBhIFNsYXRlIHBvaW50IGZyb20gYSBET00gc2VsZWN0aW9uJ3MgYGRvbU5vZGVgIGFuZCBgZG9tT2Zmc2V0YC5cbiAgICovXG5cbiAgdG9TbGF0ZVBvaW50PFQgZXh0ZW5kcyBib29sZWFuPihcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIGRvbVBvaW50OiBET01Qb2ludCxcbiAgICBvcHRpb25zOiB7XG4gICAgICBleGFjdE1hdGNoOiBib29sZWFuXG4gICAgICBzdXBwcmVzc1Rocm93OiBUXG4gICAgfVxuICApOiBUIGV4dGVuZHMgdHJ1ZSA/IFBvaW50IHwgbnVsbCA6IFBvaW50IHtcbiAgICBjb25zdCB7IGV4YWN0TWF0Y2gsIHN1cHByZXNzVGhyb3cgfSA9IG9wdGlvbnNcbiAgICBjb25zdCBbbmVhcmVzdE5vZGUsIG5lYXJlc3RPZmZzZXRdID0gZXhhY3RNYXRjaFxuICAgICAgPyBkb21Qb2ludFxuICAgICAgOiBub3JtYWxpemVET01Qb2ludChkb21Qb2ludClcbiAgICBjb25zdCBwYXJlbnROb2RlID0gbmVhcmVzdE5vZGUucGFyZW50Tm9kZSBhcyBET01FbGVtZW50XG4gICAgbGV0IHRleHROb2RlOiBET01FbGVtZW50IHwgbnVsbCA9IG51bGxcbiAgICBsZXQgb2Zmc2V0ID0gMFxuXG4gICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgIGNvbnN0IGVkaXRvckVsID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKVxuICAgICAgY29uc3QgcG90ZW50aWFsVm9pZE5vZGUgPSBwYXJlbnROb2RlLmNsb3Nlc3QoJ1tkYXRhLXNsYXRlLXZvaWQ9XCJ0cnVlXCJdJylcbiAgICAgIC8vIE5lZWQgdG8gZW5zdXJlIHRoYXQgdGhlIGNsb3Nlc3Qgdm9pZCBub2RlIGlzIGFjdHVhbGx5IGEgdm9pZCBub2RlXG4gICAgICAvLyB3aXRoaW4gdGhpcyBlZGl0b3IsIGFuZCBub3QgYSB2b2lkIG5vZGUgd2l0aGluIHNvbWUgcGFyZW50IGVkaXRvci4gVGhpcyBjYW4gaGFwcGVuXG4gICAgICAvLyBpZiB0aGlzIGVkaXRvciBpcyB3aXRoaW4gYSB2b2lkIG5vZGUgb2YgYW5vdGhlciBlZGl0b3IgKFwibmVzdGVkIGVkaXRvcnNcIiwgbGlrZSBpblxuICAgICAgLy8gdGhlIFwiRWRpdGFibGUgVm9pZHNcIiBleGFtcGxlIG9uIHRoZSBkb2NzIHNpdGUpLlxuICAgICAgY29uc3Qgdm9pZE5vZGUgPVxuICAgICAgICBwb3RlbnRpYWxWb2lkTm9kZSAmJiBlZGl0b3JFbC5jb250YWlucyhwb3RlbnRpYWxWb2lkTm9kZSlcbiAgICAgICAgICA/IHBvdGVudGlhbFZvaWROb2RlXG4gICAgICAgICAgOiBudWxsXG4gICAgICBsZXQgbGVhZk5vZGUgPSBwYXJlbnROb2RlLmNsb3Nlc3QoJ1tkYXRhLXNsYXRlLWxlYWZdJylcbiAgICAgIGxldCBkb21Ob2RlOiBET01FbGVtZW50IHwgbnVsbCA9IG51bGxcblxuICAgICAgLy8gQ2FsY3VsYXRlIGhvdyBmYXIgaW50byB0aGUgdGV4dCBub2RlIHRoZSBgbmVhcmVzdE5vZGVgIGlzLCBzbyB0aGF0IHdlXG4gICAgICAvLyBjYW4gZGV0ZXJtaW5lIHdoYXQgdGhlIG9mZnNldCByZWxhdGl2ZSB0byB0aGUgdGV4dCBub2RlIGlzLlxuICAgICAgaWYgKGxlYWZOb2RlKSB7XG4gICAgICAgIHRleHROb2RlID0gbGVhZk5vZGUuY2xvc2VzdCgnW2RhdGEtc2xhdGUtbm9kZT1cInRleHRcIl0nKVxuXG4gICAgICAgIGlmICh0ZXh0Tm9kZSkge1xuICAgICAgICAgIGNvbnN0IHdpbmRvdyA9IFJlYWN0RWRpdG9yLmdldFdpbmRvdyhlZGl0b3IpXG4gICAgICAgICAgY29uc3QgcmFuZ2UgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKVxuICAgICAgICAgIHJhbmdlLnNldFN0YXJ0KHRleHROb2RlLCAwKVxuICAgICAgICAgIHJhbmdlLnNldEVuZChuZWFyZXN0Tm9kZSwgbmVhcmVzdE9mZnNldClcblxuICAgICAgICAgIGNvbnN0IGNvbnRlbnRzID0gcmFuZ2UuY2xvbmVDb250ZW50cygpXG4gICAgICAgICAgY29uc3QgcmVtb3ZhbHMgPSBbXG4gICAgICAgICAgICAuLi5BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChcbiAgICAgICAgICAgICAgY29udGVudHMucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2xhdGUtemVyby13aWR0aF0nKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIC4uLkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKFxuICAgICAgICAgICAgICBjb250ZW50cy5xdWVyeVNlbGVjdG9yQWxsKCdbY29udGVudGVkaXRhYmxlPWZhbHNlXScpXG4gICAgICAgICAgICApLFxuICAgICAgICAgIF1cblxuICAgICAgICAgIHJlbW92YWxzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgLy8gQ09NUEFUOiBXaGlsZSBjb21wb3NpbmcgYXQgdGhlIHN0YXJ0IG9mIGEgdGV4dCBub2RlLCBzb21lIGtleWJvYXJkcyBwdXRcbiAgICAgICAgICAgIC8vIHRoZSB0ZXh0IGNvbnRlbnQgaW5zaWRlIHRoZSB6ZXJvIHdpZHRoIHNwYWNlLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBJU19BTkRST0lEICYmXG4gICAgICAgICAgICAgICFleGFjdE1hdGNoICYmXG4gICAgICAgICAgICAgIGVsLmhhc0F0dHJpYnV0ZSgnZGF0YS1zbGF0ZS16ZXJvLXdpZHRoJykgJiZcbiAgICAgICAgICAgICAgZWwudGV4dENvbnRlbnQubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICBlbC50ZXh0Q29udGV4dCAhPT0gJ1xcdUZFRkYnXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKGVsLnRleHRDb250ZW50LnN0YXJ0c1dpdGgoJ1xcdUZFRkYnKSkge1xuICAgICAgICAgICAgICAgIGVsLnRleHRDb250ZW50ID0gZWwudGV4dENvbnRlbnQuc2xpY2UoMSlcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbCEucGFyZW50Tm9kZSEucmVtb3ZlQ2hpbGQoZWwpXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIENPTVBBVDogRWRnZSBoYXMgYSBidWcgd2hlcmUgUmFuZ2UucHJvdG90eXBlLnRvU3RyaW5nKCkgd2lsbFxuICAgICAgICAgIC8vIGNvbnZlcnQgXFxuIGludG8gXFxyXFxuLiBUaGUgYnVnIGNhdXNlcyBhIGxvb3Agd2hlbiBzbGF0ZS1yZWFjdFxuICAgICAgICAgIC8vIGF0dGVtcHRzIHRvIHJlcG9zaXRpb24gaXRzIGN1cnNvciB0byBtYXRjaCB0aGUgbmF0aXZlIHBvc2l0aW9uLiBVc2VcbiAgICAgICAgICAvLyB0ZXh0Q29udGVudC5sZW5ndGggaW5zdGVhZC5cbiAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL2lzc3Vlcy8xMDI5MTExNi9cbiAgICAgICAgICBvZmZzZXQgPSBjb250ZW50cy50ZXh0Q29udGVudCEubGVuZ3RoXG4gICAgICAgICAgZG9tTm9kZSA9IHRleHROb2RlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodm9pZE5vZGUpIHtcbiAgICAgICAgLy8gRm9yIHZvaWQgbm9kZXMsIHRoZSBlbGVtZW50IHdpdGggdGhlIG9mZnNldCBrZXkgd2lsbCBiZSBhIGNvdXNpbiwgbm90IGFuXG4gICAgICAgIC8vIGFuY2VzdG9yLCBzbyBmaW5kIGl0IGJ5IGdvaW5nIGRvd24gZnJvbSB0aGUgbmVhcmVzdCB2b2lkIHBhcmVudCBhbmQgdGFraW5nIHRoZVxuICAgICAgICAvLyBmaXJzdCBvbmUgdGhhdCBpc24ndCBpbnNpZGUgYSBuZXN0ZWQgZWRpdG9yLlxuICAgICAgICBjb25zdCBsZWFmTm9kZXMgPSB2b2lkTm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zbGF0ZS1sZWFmXScpXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsZWFmTm9kZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgY29uc3QgY3VycmVudCA9IGxlYWZOb2Rlc1tpbmRleF1cbiAgICAgICAgICBpZiAoUmVhY3RFZGl0b3IuaGFzRE9NTm9kZShlZGl0b3IsIGN1cnJlbnQpKSB7XG4gICAgICAgICAgICBsZWFmTm9kZSA9IGN1cnJlbnRcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ09NUEFUOiBJbiByZWFkLW9ubHkgZWRpdG9ycyB0aGUgbGVhZiBpcyBub3QgcmVuZGVyZWQuXG4gICAgICAgIGlmICghbGVhZk5vZGUpIHtcbiAgICAgICAgICBvZmZzZXQgPSAxXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGV4dE5vZGUgPSBsZWFmTm9kZS5jbG9zZXN0KCdbZGF0YS1zbGF0ZS1ub2RlPVwidGV4dFwiXScpIVxuICAgICAgICAgIGRvbU5vZGUgPSBsZWFmTm9kZVxuICAgICAgICAgIG9mZnNldCA9IGRvbU5vZGUudGV4dENvbnRlbnQhLmxlbmd0aFxuICAgICAgICAgIGRvbU5vZGUucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2xhdGUtemVyby13aWR0aF0nKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIG9mZnNldCAtPSBlbC50ZXh0Q29udGVudCEubGVuZ3RoXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGRvbU5vZGUgJiZcbiAgICAgICAgb2Zmc2V0ID09PSBkb21Ob2RlLnRleHRDb250ZW50IS5sZW5ndGggJiZcbiAgICAgICAgLy8gQ09NUEFUOiBBbmRyb2lkIElNRXMgbWlnaHQgcmVtb3ZlIHRoZSB6ZXJvIHdpZHRoIHNwYWNlIHdoaWxlIGNvbXBvc2luZyxcbiAgICAgICAgLy8gYW5kIHdlIGRvbid0IGFkZCBpdCBmb3IgbGluZS1icmVha3MuXG4gICAgICAgIElTX0FORFJPSUQgJiZcbiAgICAgICAgZG9tTm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtemVyby13aWR0aCcpID09PSAneicgJiZcbiAgICAgICAgZG9tTm9kZS50ZXh0Q29udGVudD8uc3RhcnRzV2l0aCgnXFx1RkVGRicpICYmXG4gICAgICAgIC8vIENPTVBBVDogSWYgdGhlIHBhcmVudCBub2RlIGlzIGEgU2xhdGUgemVyby13aWR0aCBzcGFjZSwgZWRpdG9yIGlzXG4gICAgICAgIC8vIGJlY2F1c2UgdGhlIHRleHQgbm9kZSBzaG91bGQgaGF2ZSBubyBjaGFyYWN0ZXJzLiBIb3dldmVyLCBkdXJpbmcgSU1FXG4gICAgICAgIC8vIGNvbXBvc2l0aW9uIHRoZSBBU0NJSSBjaGFyYWN0ZXJzIHdpbGwgYmUgcHJlcGVuZGVkIHRvIHRoZSB6ZXJvLXdpZHRoXG4gICAgICAgIC8vIHNwYWNlLCBzbyBzdWJ0cmFjdCAxIGZyb20gdGhlIG9mZnNldCB0byBhY2NvdW50IGZvciB0aGUgemVyby13aWR0aFxuICAgICAgICAvLyBzcGFjZSBjaGFyYWN0ZXIuXG4gICAgICAgIChwYXJlbnROb2RlLmhhc0F0dHJpYnV0ZSgnZGF0YS1zbGF0ZS16ZXJvLXdpZHRoJykgfHxcbiAgICAgICAgICAvLyBDT01QQVQ6IEluIEZpcmVmb3gsIGByYW5nZS5jbG9uZUNvbnRlbnRzKClgIHJldHVybnMgYW4gZXh0cmEgdHJhaWxpbmcgJ1xcbidcbiAgICAgICAgICAvLyB3aGVuIHRoZSBkb2N1bWVudCBlbmRzIHdpdGggYSBuZXctbGluZSBjaGFyYWN0ZXIuIFRoaXMgcmVzdWx0cyBpbiB0aGUgb2Zmc2V0XG4gICAgICAgICAgLy8gbGVuZ3RoIGJlaW5nIG9mZiBieSBvbmUsIHNvIHdlIG5lZWQgdG8gc3VidHJhY3Qgb25lIHRvIGFjY291bnQgZm9yIHRoaXMuXG4gICAgICAgICAgKElTX0ZJUkVGT1ggJiYgZG9tTm9kZS50ZXh0Q29udGVudD8uZW5kc1dpdGgoJ1xcblxcbicpKSlcbiAgICAgICkge1xuICAgICAgICBvZmZzZXQtLVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChJU19BTkRST0lEICYmICF0ZXh0Tm9kZSAmJiAhZXhhY3RNYXRjaCkge1xuICAgICAgY29uc3Qgbm9kZSA9IHBhcmVudE5vZGUuaGFzQXR0cmlidXRlKCdkYXRhLXNsYXRlLW5vZGUnKVxuICAgICAgICA/IHBhcmVudE5vZGVcbiAgICAgICAgOiBwYXJlbnROb2RlLmNsb3Nlc3QoJ1tkYXRhLXNsYXRlLW5vZGVdJylcblxuICAgICAgaWYgKG5vZGUgJiYgUmVhY3RFZGl0b3IuaGFzRE9NTm9kZShlZGl0b3IsIG5vZGUsIHsgZWRpdGFibGU6IHRydWUgfSkpIHtcbiAgICAgICAgY29uc3Qgc2xhdGVOb2RlID0gUmVhY3RFZGl0b3IudG9TbGF0ZU5vZGUoZWRpdG9yLCBub2RlKVxuICAgICAgICBsZXQgeyBwYXRoLCBvZmZzZXQgfSA9IEVkaXRvci5zdGFydChcbiAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBzbGF0ZU5vZGUpXG4gICAgICAgIClcblxuICAgICAgICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvcignW2RhdGEtc2xhdGUtbGVhZl0nKSkge1xuICAgICAgICAgIG9mZnNldCA9IG5lYXJlc3RPZmZzZXRcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHBhdGgsIG9mZnNldCB9IGFzIFQgZXh0ZW5kcyB0cnVlID8gUG9pbnQgfCBudWxsIDogUG9pbnRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXRleHROb2RlKSB7XG4gICAgICBpZiAoc3VwcHJlc3NUaHJvdykge1xuICAgICAgICByZXR1cm4gbnVsbCBhcyBUIGV4dGVuZHMgdHJ1ZSA/IFBvaW50IHwgbnVsbCA6IFBvaW50XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgcmVzb2x2ZSBhIFNsYXRlIHBvaW50IGZyb20gRE9NIHBvaW50OiAke2RvbVBvaW50fWBcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBDT01QQVQ6IElmIHNvbWVvbmUgaXMgY2xpY2tpbmcgZnJvbSBvbmUgU2xhdGUgZWRpdG9yIGludG8gYW5vdGhlcixcbiAgICAvLyB0aGUgc2VsZWN0IGV2ZW50IGZpcmVzIHR3aWNlLCBvbmNlIGZvciB0aGUgb2xkIGVkaXRvcidzIGBlbGVtZW50YFxuICAgIC8vIGZpcnN0LCBhbmQgdGhlbiBhZnRlcndhcmRzIGZvciB0aGUgY29ycmVjdCBgZWxlbWVudGAuICgyMDE3LzAzLzAzKVxuICAgIGNvbnN0IHNsYXRlTm9kZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVOb2RlKGVkaXRvciwgdGV4dE5vZGUhKVxuICAgIGNvbnN0IHBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIHNsYXRlTm9kZSlcbiAgICByZXR1cm4geyBwYXRoLCBvZmZzZXQgfSBhcyBUIGV4dGVuZHMgdHJ1ZSA/IFBvaW50IHwgbnVsbCA6IFBvaW50XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmQgYSBTbGF0ZSByYW5nZSBmcm9tIGEgRE9NIHJhbmdlIG9yIHNlbGVjdGlvbi5cbiAgICovXG5cbiAgdG9TbGF0ZVJhbmdlPFQgZXh0ZW5kcyBib29sZWFuPihcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIGRvbVJhbmdlOiBET01SYW5nZSB8IERPTVN0YXRpY1JhbmdlIHwgRE9NU2VsZWN0aW9uLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGV4YWN0TWF0Y2g6IGJvb2xlYW5cbiAgICAgIHN1cHByZXNzVGhyb3c6IFRcbiAgICB9XG4gICk6IFQgZXh0ZW5kcyB0cnVlID8gUmFuZ2UgfCBudWxsIDogUmFuZ2Uge1xuICAgIGNvbnN0IHsgZXhhY3RNYXRjaCwgc3VwcHJlc3NUaHJvdyB9ID0gb3B0aW9uc1xuICAgIGNvbnN0IGVsID0gaXNET01TZWxlY3Rpb24oZG9tUmFuZ2UpXG4gICAgICA/IGRvbVJhbmdlLmFuY2hvck5vZGVcbiAgICAgIDogZG9tUmFuZ2Uuc3RhcnRDb250YWluZXJcbiAgICBsZXQgYW5jaG9yTm9kZVxuICAgIGxldCBhbmNob3JPZmZzZXRcbiAgICBsZXQgZm9jdXNOb2RlXG4gICAgbGV0IGZvY3VzT2Zmc2V0XG4gICAgbGV0IGlzQ29sbGFwc2VkXG5cbiAgICBpZiAoZWwpIHtcbiAgICAgIGlmIChpc0RPTVNlbGVjdGlvbihkb21SYW5nZSkpIHtcbiAgICAgICAgYW5jaG9yTm9kZSA9IGRvbVJhbmdlLmFuY2hvck5vZGVcbiAgICAgICAgYW5jaG9yT2Zmc2V0ID0gZG9tUmFuZ2UuYW5jaG9yT2Zmc2V0XG4gICAgICAgIGZvY3VzTm9kZSA9IGRvbVJhbmdlLmZvY3VzTm9kZVxuICAgICAgICBmb2N1c09mZnNldCA9IGRvbVJhbmdlLmZvY3VzT2Zmc2V0XG4gICAgICAgIC8vIENPTVBBVDogVGhlcmUncyBhIGJ1ZyBpbiBjaHJvbWUgdGhhdCBhbHdheXMgcmV0dXJucyBgdHJ1ZWAgZm9yXG4gICAgICAgIC8vIGBpc0NvbGxhcHNlZGAgZm9yIGEgU2VsZWN0aW9uIHRoYXQgY29tZXMgZnJvbSBhIFNoYWRvd1Jvb3QuXG4gICAgICAgIC8vICgyMDIwLzA4LzA4KVxuICAgICAgICAvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NDc1MjNcbiAgICAgICAgaWYgKElTX0NIUk9NRSAmJiBoYXNTaGFkb3dSb290KGFuY2hvck5vZGUpKSB7XG4gICAgICAgICAgaXNDb2xsYXBzZWQgPVxuICAgICAgICAgICAgZG9tUmFuZ2UuYW5jaG9yTm9kZSA9PT0gZG9tUmFuZ2UuZm9jdXNOb2RlICYmXG4gICAgICAgICAgICBkb21SYW5nZS5hbmNob3JPZmZzZXQgPT09IGRvbVJhbmdlLmZvY3VzT2Zmc2V0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXNDb2xsYXBzZWQgPSBkb21SYW5nZS5pc0NvbGxhcHNlZFxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbmNob3JOb2RlID0gZG9tUmFuZ2Uuc3RhcnRDb250YWluZXJcbiAgICAgICAgYW5jaG9yT2Zmc2V0ID0gZG9tUmFuZ2Uuc3RhcnRPZmZzZXRcbiAgICAgICAgZm9jdXNOb2RlID0gZG9tUmFuZ2UuZW5kQ29udGFpbmVyXG4gICAgICAgIGZvY3VzT2Zmc2V0ID0gZG9tUmFuZ2UuZW5kT2Zmc2V0XG4gICAgICAgIGlzQ29sbGFwc2VkID0gZG9tUmFuZ2UuY29sbGFwc2VkXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgYW5jaG9yTm9kZSA9PSBudWxsIHx8XG4gICAgICBmb2N1c05vZGUgPT0gbnVsbCB8fFxuICAgICAgYW5jaG9yT2Zmc2V0ID09IG51bGwgfHxcbiAgICAgIGZvY3VzT2Zmc2V0ID09IG51bGxcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCByZXNvbHZlIGEgU2xhdGUgcmFuZ2UgZnJvbSBET00gcmFuZ2U6ICR7ZG9tUmFuZ2V9YFxuICAgICAgKVxuICAgIH1cblxuICAgIGxldCBhbmNob3IgPSBSZWFjdEVkaXRvci50b1NsYXRlUG9pbnQoZWRpdG9yLCBbYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0XSwge1xuICAgICAgZXhhY3RNYXRjaCxcbiAgICAgIHN1cHByZXNzVGhyb3csXG4gICAgfSlcbiAgICBpZiAoIWFuY2hvcikge1xuICAgICAgcmV0dXJuIG51bGwgYXMgVCBleHRlbmRzIHRydWUgPyBSYW5nZSB8IG51bGwgOiBSYW5nZVxuICAgIH1cblxuICAgIGxldCBmb2N1cyA9IGlzQ29sbGFwc2VkXG4gICAgICA/IGFuY2hvclxuICAgICAgOiBSZWFjdEVkaXRvci50b1NsYXRlUG9pbnQoZWRpdG9yLCBbZm9jdXNOb2RlLCBmb2N1c09mZnNldF0sIHtcbiAgICAgICAgICBleGFjdE1hdGNoLFxuICAgICAgICAgIHN1cHByZXNzVGhyb3csXG4gICAgICAgIH0pXG4gICAgaWYgKCFmb2N1cykge1xuICAgICAgcmV0dXJuIG51bGwgYXMgVCBleHRlbmRzIHRydWUgPyBSYW5nZSB8IG51bGwgOiBSYW5nZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHN1cHBvc2Ugd2UgaGF2ZSB0aGlzIGRvY3VtZW50OlxuICAgICAqXG4gICAgICogeyB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgKiAgIGNoaWxkcmVuOiBbXG4gICAgICogICAgIHsgdGV4dDogJ2ZvbyAnIH0sXG4gICAgICogICAgIHsgdGV4dDogJ2JhcicgfSxcbiAgICAgKiAgICAgeyB0ZXh0OiAnIGJheicgfVxuICAgICAqICAgXVxuICAgICAqIH1cbiAgICAgKlxuICAgICAqIGEgZG91YmxlIGNsaWNrIG9uIFwiYmFyXCIgb24gY2hyb21lIHdpbGwgY3JlYXRlIHRoaXMgcmFuZ2U6XG4gICAgICpcbiAgICAgKiBhbmNob3IgLT4gWzAsMV0gb2Zmc2V0IDBcbiAgICAgKiBmb2N1cyAgLT4gWzAsMV0gb2Zmc2V0IDNcbiAgICAgKlxuICAgICAqIHdoaWxlIG9uIGZpcmVmb3ggd2lsbCBjcmVhdGUgdGhpcyByYW5nZTpcbiAgICAgKlxuICAgICAqIGFuY2hvciAtPiBbMCwwXSBvZmZzZXQgNFxuICAgICAqIGZvY3VzICAtPiBbMCwyXSBvZmZzZXQgMFxuICAgICAqXG4gICAgICogbGV0J3MgdHJ5IHRvIGZpeCBpdC4uLlxuICAgICAqL1xuXG4gICAgaWYgKElTX0ZJUkVGT1ggJiYgIWlzQ29sbGFwc2VkICYmIGFuY2hvck5vZGUgIT09IGZvY3VzTm9kZSkge1xuICAgICAgY29uc3QgaXNFbmQgPSBFZGl0b3IuaXNFbmQoZWRpdG9yLCBhbmNob3IhLCBhbmNob3IucGF0aClcbiAgICAgIGNvbnN0IGlzU3RhcnQgPSBFZGl0b3IuaXNTdGFydChlZGl0b3IsIGZvY3VzISwgZm9jdXMucGF0aClcblxuICAgICAgaWYgKGlzRW5kKSB7XG4gICAgICAgIGNvbnN0IGFmdGVyID0gRWRpdG9yLmFmdGVyKGVkaXRvciwgYW5jaG9yIGFzIFBvaW50KVxuICAgICAgICAvLyBFZGl0b3IuYWZ0ZXIoKSBtaWdodCByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgIGFuY2hvciA9IChhZnRlciB8fCBhbmNob3IhKSBhcyBUIGV4dGVuZHMgdHJ1ZSA/IFBvaW50IHwgbnVsbCA6IFBvaW50XG4gICAgICB9XG5cbiAgICAgIGlmIChpc1N0YXJ0KSB7XG4gICAgICAgIGNvbnN0IGJlZm9yZSA9IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBmb2N1cyBhcyBQb2ludClcbiAgICAgICAgZm9jdXMgPSAoYmVmb3JlIHx8IGZvY3VzISkgYXMgVCBleHRlbmRzIHRydWUgPyBQb2ludCB8IG51bGwgOiBQb2ludFxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCByYW5nZTogUmFuZ2UgPSB7IGFuY2hvcjogYW5jaG9yIGFzIFBvaW50LCBmb2N1czogZm9jdXMgYXMgUG9pbnQgfVxuICAgIC8vIGlmIHRoZSBzZWxlY3Rpb24gaXMgYSBoYW5naW5nIHJhbmdlIHRoYXQgZW5kcyBpbiBhIHZvaWRcbiAgICAvLyBhbmQgdGhlIERPTSBmb2N1cyBpcyBhbiBFbGVtZW50XG4gICAgLy8gKG1lYW5pbmcgdGhhdCB0aGUgc2VsZWN0aW9uIGVuZHMgYmVmb3JlIHRoZSBlbGVtZW50KVxuICAgIC8vIHVuaGFuZyB0aGUgcmFuZ2UgdG8gYXZvaWQgbWlzdGFrZW5seSBpbmNsdWRpbmcgdGhlIHZvaWRcbiAgICBpZiAoXG4gICAgICBSYW5nZS5pc0V4cGFuZGVkKHJhbmdlKSAmJlxuICAgICAgUmFuZ2UuaXNGb3J3YXJkKHJhbmdlKSAmJlxuICAgICAgaXNET01FbGVtZW50KGZvY3VzTm9kZSkgJiZcbiAgICAgIEVkaXRvci52b2lkKGVkaXRvciwgeyBhdDogcmFuZ2UuZm9jdXMsIG1vZGU6ICdoaWdoZXN0JyB9KVxuICAgICkge1xuICAgICAgcmFuZ2UgPSBFZGl0b3IudW5oYW5nUmFuZ2UoZWRpdG9yLCByYW5nZSwgeyB2b2lkczogdHJ1ZSB9KVxuICAgIH1cblxuICAgIHJldHVybiAocmFuZ2UgYXMgdW5rbm93bikgYXMgVCBleHRlbmRzIHRydWUgPyBSYW5nZSB8IG51bGwgOiBSYW5nZVxuICB9LFxuXG4gIGhhc1JhbmdlKGVkaXRvcjogUmVhY3RFZGl0b3IsIHJhbmdlOiBSYW5nZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgYW5jaG9yLCBmb2N1cyB9ID0gcmFuZ2VcbiAgICByZXR1cm4gKFxuICAgICAgRWRpdG9yLmhhc1BhdGgoZWRpdG9yLCBhbmNob3IucGF0aCkgJiYgRWRpdG9yLmhhc1BhdGgoZWRpdG9yLCBmb2N1cy5wYXRoKVxuICAgIClcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHRhcmdldCBpcyBpbiB0aGUgZWRpdG9yLlxuICAgKi9cbiAgaGFzVGFyZ2V0KFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgdGFyZ2V0OiBFdmVudFRhcmdldCB8IG51bGxcbiAgKTogdGFyZ2V0IGlzIERPTU5vZGUge1xuICAgIHJldHVybiBpc0RPTU5vZGUodGFyZ2V0KSAmJiBSZWFjdEVkaXRvci5oYXNET01Ob2RlKGVkaXRvciwgdGFyZ2V0KVxuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdGFyZ2V0IGlzIGVkaXRhYmxlIGFuZCBpbiB0aGUgZWRpdG9yLlxuICAgKi9cbiAgaGFzRWRpdGFibGVUYXJnZXQoXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICB0YXJnZXQ6IEV2ZW50VGFyZ2V0IHwgbnVsbFxuICApOiB0YXJnZXQgaXMgRE9NTm9kZSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGlzRE9NTm9kZSh0YXJnZXQpICYmXG4gICAgICBSZWFjdEVkaXRvci5oYXNET01Ob2RlKGVkaXRvciwgdGFyZ2V0LCB7IGVkaXRhYmxlOiB0cnVlIH0pXG4gICAgKVxuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdGFyZ2V0IGNhbiBiZSBzZWxlY3RhYmxlXG4gICAqL1xuICBoYXNTZWxlY3RhYmxlVGFyZ2V0KFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgdGFyZ2V0OiBFdmVudFRhcmdldCB8IG51bGxcbiAgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0RWRpdG9yLmhhc0VkaXRhYmxlVGFyZ2V0KGVkaXRvciwgdGFyZ2V0KSB8fFxuICAgICAgUmVhY3RFZGl0b3IuaXNUYXJnZXRJbnNpZGVOb25SZWFkb25seVZvaWQoZWRpdG9yLCB0YXJnZXQpXG4gICAgKVxuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdGFyZ2V0IGlzIGluc2lkZSB2b2lkIGFuZCBpbiBhbiBub24tcmVhZG9ubHkgZWRpdG9yLlxuICAgKi9cbiAgaXNUYXJnZXRJbnNpZGVOb25SZWFkb25seVZvaWQoXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICB0YXJnZXQ6IEV2ZW50VGFyZ2V0IHwgbnVsbFxuICApOiBib29sZWFuIHtcbiAgICBpZiAoSVNfUkVBRF9PTkxZLmdldChlZGl0b3IpKSByZXR1cm4gZmFsc2VcblxuICAgIGNvbnN0IHNsYXRlTm9kZSA9XG4gICAgICBSZWFjdEVkaXRvci5oYXNUYXJnZXQoZWRpdG9yLCB0YXJnZXQpICYmXG4gICAgICBSZWFjdEVkaXRvci50b1NsYXRlTm9kZShlZGl0b3IsIHRhcmdldClcbiAgICByZXR1cm4gRWxlbWVudC5pc0VsZW1lbnQoc2xhdGVOb2RlKSAmJiBFZGl0b3IuaXNWb2lkKGVkaXRvciwgc2xhdGVOb2RlKVxuICB9LFxuXG4gIC8qKlxuICAgKiBFeHBlcmltZW50YWwgYW5kIGFuZHJvaWQgc3BlY2lmaWM6IEZsdXNoIGFsbCBwZW5kaW5nIGRpZmZzIGFuZCBjYW5jZWwgY29tcG9zaXRpb24gYXQgdGhlIG5leHQgcG9zc2libGUgdGltZS5cbiAgICovXG4gIGFuZHJvaWRTY2hlZHVsZUZsdXNoKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgRURJVE9SX1RPX1NDSEVEVUxFX0ZMVVNILmdldChlZGl0b3IpPy4oKVxuICB9LFxuXG4gIC8qKlxuICAgKiBFeHBlcmltZW50YWwgYW5kIGFuZHJvaWQgc3BlY2lmaWM6IEdldCBwZW5kaW5nIGRpZmZzXG4gICAqL1xuICBhbmRyb2lkUGVuZGluZ0RpZmZzKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgcmV0dXJuIEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLmdldChlZGl0b3IpXG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgdXNlTGF5b3V0RWZmZWN0LCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IENBTl9VU0VfRE9NIH0gZnJvbSAnLi4vdXRpbHMvZW52aXJvbm1lbnQnXG5cbi8qKlxuICogUHJldmVudCB3YXJuaW5nIG9uIFNTUiBieSBmYWxsaW5nIGJhY2sgdG8gdXNlRWZmZWN0IHdoZW4gRE9NIGlzbid0IGF2YWlsYWJsZVxuICovXG5cbmV4cG9ydCBjb25zdCB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0ID0gQ0FOX1VTRV9ET01cbiAgPyB1c2VMYXlvdXRFZmZlY3RcbiAgOiB1c2VFZmZlY3RcbiIsICJpbXBvcnQgeyBSYW5nZSB9IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgUExBQ0VIT0xERVJfU1lNQk9MIH0gZnJvbSAnLi93ZWFrLW1hcHMnXG5cbmV4cG9ydCBjb25zdCBzaGFsbG93Q29tcGFyZSA9IChvYmoxOiB7fSwgb2JqMjoge30pID0+XG4gIE9iamVjdC5rZXlzKG9iajEpLmxlbmd0aCA9PT0gT2JqZWN0LmtleXMob2JqMikubGVuZ3RoICYmXG4gIE9iamVjdC5rZXlzKG9iajEpLmV2ZXJ5KFxuICAgIGtleSA9PiBvYmoyLmhhc093blByb3BlcnR5KGtleSkgJiYgb2JqMVtrZXldID09PSBvYmoyW2tleV1cbiAgKVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbGlzdCBvZiBkZWNvcmF0b3IgcmFuZ2VzIGFyZSBlcXVhbCB0byBhbm90aGVyLlxuICpcbiAqIFBFUkY6IHRoaXMgcmVxdWlyZXMgdGhlIHR3byBsaXN0cyB0byBhbHNvIGhhdmUgdGhlIHJhbmdlcyBpbnNpZGUgdGhlbSBpbiB0aGVcbiAqIHNhbWUgb3JkZXIsIGJ1dCB0aGlzIGlzIGFuIG9rYXkgY29uc3RyYWludCBmb3IgdXMgc2luY2UgZGVjb3JhdGlvbnMgYXJlXG4gKiBrZXB0IGluIG9yZGVyLCBhbmQgdGhlIG9kZCBjYXNlIHdoZXJlIHRoZXkgYXJlbid0IGlzIG9rYXkgdG8gcmUtcmVuZGVyIGZvci5cbiAqL1xuXG5leHBvcnQgY29uc3QgaXNEZWNvcmF0b3JSYW5nZUxpc3RFcXVhbCA9IChcbiAgbGlzdDogUmFuZ2VbXSxcbiAgYW5vdGhlcjogUmFuZ2VbXVxuKTogYm9vbGVhbiA9PiB7XG4gIGlmIChsaXN0Lmxlbmd0aCAhPT0gYW5vdGhlci5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHJhbmdlID0gbGlzdFtpXVxuICAgIGNvbnN0IG90aGVyID0gYW5vdGhlcltpXVxuXG4gICAgY29uc3QgeyBhbmNob3I6IHJhbmdlQW5jaG9yLCBmb2N1czogcmFuZ2VGb2N1cywgLi4ucmFuZ2VPd25Qcm9wcyB9ID0gcmFuZ2VcbiAgICBjb25zdCB7IGFuY2hvcjogb3RoZXJBbmNob3IsIGZvY3VzOiBvdGhlckZvY3VzLCAuLi5vdGhlck93blByb3BzIH0gPSBvdGhlclxuXG4gICAgaWYgKFxuICAgICAgIVJhbmdlLmVxdWFscyhyYW5nZSwgb3RoZXIpIHx8XG4gICAgICByYW5nZVtQTEFDRUhPTERFUl9TWU1CT0xdICE9PSBvdGhlcltQTEFDRUhPTERFUl9TWU1CT0xdIHx8XG4gICAgICAhc2hhbGxvd0NvbXBhcmUocmFuZ2VPd25Qcm9wcywgb3RoZXJPd25Qcm9wcylcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCAiaW1wb3J0IFJlYWN0LCB7IHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRWRpdG9yLCBUZXh0LCBQYXRoLCBFbGVtZW50LCBOb2RlIH0gZnJvbSAnc2xhdGUnXG5cbmltcG9ydCB7IFJlYWN0RWRpdG9yLCB1c2VTbGF0ZVN0YXRpYyB9IGZyb20gJy4uJ1xuaW1wb3J0IHsgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCB9IGZyb20gJy4uL2hvb2tzL3VzZS1pc29tb3JwaGljLWxheW91dC1lZmZlY3QnXG5pbXBvcnQgeyBJU19BTkRST0lEIH0gZnJvbSAnLi4vdXRpbHMvZW52aXJvbm1lbnQnXG5pbXBvcnQgeyBNQVJLX1BMQUNFSE9MREVSX1NZTUJPTCB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcblxuLyoqXG4gKiBMZWFmIGNvbnRlbnQgc3RyaW5ncy5cbiAqL1xuXG5jb25zdCBTdHJpbmcgPSAocHJvcHM6IHtcbiAgaXNMYXN0OiBib29sZWFuXG4gIGxlYWY6IFRleHRcbiAgcGFyZW50OiBFbGVtZW50XG4gIHRleHQ6IFRleHRcbn0pID0+IHtcbiAgY29uc3QgeyBpc0xhc3QsIGxlYWYsIHBhcmVudCwgdGV4dCB9ID0gcHJvcHNcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKVxuICBjb25zdCBwYXRoID0gUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCB0ZXh0KVxuICBjb25zdCBwYXJlbnRQYXRoID0gUGF0aC5wYXJlbnQocGF0aClcbiAgY29uc3QgaXNNYXJrUGxhY2Vob2xkZXIgPSBsZWFmW01BUktfUExBQ0VIT0xERVJfU1lNQk9MXSA9PT0gdHJ1ZVxuXG4gIC8vIENPTVBBVDogUmVuZGVyIHRleHQgaW5zaWRlIHZvaWQgbm9kZXMgd2l0aCBhIHplcm8td2lkdGggc3BhY2UuXG4gIC8vIFNvIHRoZSBub2RlIGNhbiBjb250YWluIHNlbGVjdGlvbiBidXQgdGhlIHRleHQgaXMgbm90IHZpc2libGUuXG4gIGlmIChlZGl0b3IuaXNWb2lkKHBhcmVudCkpIHtcbiAgICByZXR1cm4gPFplcm9XaWR0aFN0cmluZyBsZW5ndGg9e05vZGUuc3RyaW5nKHBhcmVudCkubGVuZ3RofSAvPlxuICB9XG5cbiAgLy8gQ09NUEFUOiBJZiB0aGlzIGlzIHRoZSBsYXN0IHRleHQgbm9kZSBpbiBhbiBlbXB0eSBibG9jaywgcmVuZGVyIGEgemVyby1cbiAgLy8gd2lkdGggc3BhY2UgdGhhdCB3aWxsIGNvbnZlcnQgaW50byBhIGxpbmUgYnJlYWsgd2hlbiBjb3B5aW5nIGFuZCBwYXN0aW5nXG4gIC8vIHRvIHN1cHBvcnQgZXhwZWN0ZWQgcGxhaW4gdGV4dC5cbiAgaWYgKFxuICAgIGxlYWYudGV4dCA9PT0gJycgJiZcbiAgICBwYXJlbnQuY2hpbGRyZW5bcGFyZW50LmNoaWxkcmVuLmxlbmd0aCAtIDFdID09PSB0ZXh0ICYmXG4gICAgIWVkaXRvci5pc0lubGluZShwYXJlbnQpICYmXG4gICAgRWRpdG9yLnN0cmluZyhlZGl0b3IsIHBhcmVudFBhdGgpID09PSAnJ1xuICApIHtcbiAgICByZXR1cm4gPFplcm9XaWR0aFN0cmluZyBpc0xpbmVCcmVhayBpc01hcmtQbGFjZWhvbGRlcj17aXNNYXJrUGxhY2Vob2xkZXJ9IC8+XG4gIH1cblxuICAvLyBDT01QQVQ6IElmIHRoZSB0ZXh0IGlzIGVtcHR5LCBpdCdzIGJlY2F1c2UgaXQncyBvbiB0aGUgZWRnZSBvZiBhbiBpbmxpbmVcbiAgLy8gbm9kZSwgc28gd2UgcmVuZGVyIGEgemVyby13aWR0aCBzcGFjZSBzbyB0aGF0IHRoZSBzZWxlY3Rpb24gY2FuIGJlXG4gIC8vIGluc2VydGVkIG5leHQgdG8gaXQgc3RpbGwuXG4gIGlmIChsZWFmLnRleHQgPT09ICcnKSB7XG4gICAgcmV0dXJuIDxaZXJvV2lkdGhTdHJpbmcgaXNNYXJrUGxhY2Vob2xkZXI9e2lzTWFya1BsYWNlaG9sZGVyfSAvPlxuICB9XG5cbiAgLy8gQ09NUEFUOiBCcm93c2VycyB3aWxsIGNvbGxhcHNlIHRyYWlsaW5nIG5ldyBsaW5lcyBhdCB0aGUgZW5kIG9mIGJsb2NrcyxcbiAgLy8gc28gd2UgbmVlZCB0byBhZGQgYW4gZXh0cmEgdHJhaWxpbmcgbmV3IGxpbmVzIHRvIHByZXZlbnQgdGhhdC5cbiAgaWYgKGlzTGFzdCAmJiBsZWFmLnRleHQuc2xpY2UoLTEpID09PSAnXFxuJykge1xuICAgIHJldHVybiA8VGV4dFN0cmluZyBpc1RyYWlsaW5nIHRleHQ9e2xlYWYudGV4dH0gLz5cbiAgfVxuXG4gIHJldHVybiA8VGV4dFN0cmluZyB0ZXh0PXtsZWFmLnRleHR9IC8+XG59XG5cbi8qKlxuICogTGVhZiBzdHJpbmdzIHdpdGggdGV4dCBpbiB0aGVtLlxuICovXG5jb25zdCBUZXh0U3RyaW5nID0gKHByb3BzOiB7IHRleHQ6IHN0cmluZzsgaXNUcmFpbGluZz86IGJvb2xlYW4gfSkgPT4ge1xuICBjb25zdCB7IHRleHQsIGlzVHJhaWxpbmcgPSBmYWxzZSB9ID0gcHJvcHNcblxuICBjb25zdCByZWYgPSB1c2VSZWY8SFRNTFNwYW5FbGVtZW50PihudWxsKVxuXG4gIGNvbnN0IGdldFRleHRDb250ZW50ID0gKCkgPT4ge1xuICAgIHJldHVybiBgJHt0ZXh0ID8/ICcnfSR7aXNUcmFpbGluZyA/ICdcXG4nIDogJyd9YFxuICB9XG5cbiAgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHRleHQgcmVuZGVyaW5nIGJvdW5kYXJ5IHdoZXJlIHdlIGludGVyZmFjZSB3aXRoIHRoZSBET01cbiAgLy8gVGhlIHRleHQgaXMgbm90IHJlbmRlcmVkIGFzIHBhcnQgb2YgdGhlIHZpcnR1YWwgRE9NLCBhcyBzaW5jZSB3ZSBoYW5kbGUgYmFzaWMgY2hhcmFjdGVyIGluc2VydGlvbnMgbmF0aXZlbHksXG4gIC8vIHVwZGF0aW5nIHRoZSBET00gaXMgbm90IGEgb25lIHdheSBkYXRhZmxvdyBhbnltb3JlLiBXaGF0IHdlIG5lZWQgaGVyZSBpcyBub3QgcmVjb25jaWxpYXRpb24gYW5kIGRpZmZpbmdcbiAgLy8gd2l0aCBwcmV2aW91cyB2ZXJzaW9uIG9mIHRoZSB2aXJ0dWFsIERPTSwgYnV0IHJhdGhlciBkaWZmaW5nIHdpdGggdGhlIGFjdHVhbCBET00gZWxlbWVudCwgYW5kIHJlcGxhY2UgdGhlIERPTSA8c3Bhbj4gY29udGVudFxuICAvLyBleGFjdGx5IGlmIGFuZCBvbmx5IGlmIGl0cyBjdXJyZW50IGNvbnRlbnQgZG9lcyBub3QgbWF0Y2ggb3VyIGN1cnJlbnQgdmlydHVhbCBET00uXG4gIC8vIE90aGVyd2lzZSB0aGUgRE9NIFRleHROb2RlIHdvdWxkIGFsd2F5cyBiZSByZXBsYWNlZCBieSBSZWFjdCBhcyB0aGUgdXNlciB0eXBlcywgd2hpY2ggaW50ZXJmZXJlcyB3aXRoIG5hdGl2ZSB0ZXh0IGZlYXR1cmVzLFxuICAvLyBlZyBtYWtlcyBuYXRpdmUgc3BlbGxjaGVjayBvcHQgb3V0IGZyb20gY2hlY2tpbmcgdGhlIHRleHQgbm9kZS5cblxuICAvLyB1c2VMYXlvdXRFZmZlY3Q6IHVwZGF0aW5nIG91ciBzcGFuIGJlZm9yZSBicm93c2VyIHBhaW50XG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIC8vIG51bGwgY29hbGVzY2luZyB0ZXh0IHRvIG1ha2Ugc3VyZSB3ZSdyZSBub3Qgb3V0cHV0aW5nIFwibnVsbFwiIGFzIGEgc3RyaW5nIGluIHRoZSBleHRyZW1lIGNhc2UgaXQgaXMgbnVsbGlzaCBhdCBydW50aW1lXG4gICAgY29uc3QgdGV4dFdpdGhUcmFpbGluZyA9IGdldFRleHRDb250ZW50KClcblxuICAgIGlmIChyZWYuY3VycmVudCAmJiByZWYuY3VycmVudC50ZXh0Q29udGVudCAhPT0gdGV4dFdpdGhUcmFpbGluZykge1xuICAgICAgcmVmLmN1cnJlbnQudGV4dENvbnRlbnQgPSB0ZXh0V2l0aFRyYWlsaW5nXG4gICAgfVxuXG4gICAgLy8gaW50ZW50aW9uYWxseSBub3Qgc3BlY2lmeWluZyBkZXBlbmRlbmNpZXMsIHNvIHRoYXQgdGhpcyBlZmZlY3QgcnVucyBvbiBldmVyeSByZW5kZXJcbiAgICAvLyBhcyB0aGlzIGVmZmVjdGl2ZWx5IHJlcGxhY2VzIFwic3BlY2lmeWluZyB0aGUgdGV4dCBpbiB0aGUgdmlydHVhbCBET00gdW5kZXIgdGhlIDxzcGFuPiBiZWxvd1wiIG9uIGVhY2ggcmVuZGVyXG4gIH0pXG5cbiAgLy8gUmVuZGVyIHRleHQgY29udGVudCBpbW1lZGlhdGVseSBpZiBpdCdzIHRoZSBmaXJzdC10aW1lIHJlbmRlclxuICAvLyBFbnN1cmUgdGhhdCB0ZXh0IGNvbnRlbnQgaXMgcmVuZGVyZWQgb24gc2VydmVyLXNpZGUgcmVuZGVyaW5nXG4gIGlmICghcmVmLmN1cnJlbnQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPHNwYW4gZGF0YS1zbGF0ZS1zdHJpbmcgcmVmPXtyZWZ9PlxuICAgICAgICB7Z2V0VGV4dENvbnRlbnQoKX1cbiAgICAgIDwvc3Bhbj5cbiAgICApXG4gIH1cblxuICAvLyB0aGUgc3BhbiBpcyBpbnRlbnRpb25hbGx5IHNhbWUgb24gZXZlcnkgcmVuZGVyIGluIHZpcnR1YWwgRE9NLCBhY3R1YWwgcmVuZGVyaW5nIGhhcHBlbnMgaW4gdGhlIGxheW91dCBlZmZlY3QgYWJvdmVcbiAgcmV0dXJuIDxzcGFuIGRhdGEtc2xhdGUtc3RyaW5nIHJlZj17cmVmfSAvPlxufVxuXG4vKipcbiAqIExlYWYgc3RyaW5ncyB3aXRob3V0IHRleHQsIHJlbmRlciBhcyB6ZXJvLXdpZHRoIHN0cmluZ3MuXG4gKi9cblxuZXhwb3J0IGNvbnN0IFplcm9XaWR0aFN0cmluZyA9IChwcm9wczoge1xuICBsZW5ndGg/OiBudW1iZXJcbiAgaXNMaW5lQnJlYWs/OiBib29sZWFuXG4gIGlzTWFya1BsYWNlaG9sZGVyPzogYm9vbGVhblxufSkgPT4ge1xuICBjb25zdCB7IGxlbmd0aCA9IDAsIGlzTGluZUJyZWFrID0gZmFsc2UsIGlzTWFya1BsYWNlaG9sZGVyID0gZmFsc2UgfSA9IHByb3BzXG5cbiAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICAnZGF0YS1zbGF0ZS16ZXJvLXdpZHRoJzogaXNMaW5lQnJlYWsgPyAnbicgOiAneicsXG4gICAgJ2RhdGEtc2xhdGUtbGVuZ3RoJzogbGVuZ3RoLFxuICB9XG5cbiAgaWYgKGlzTWFya1BsYWNlaG9sZGVyKSB7XG4gICAgYXR0cmlidXRlc1snZGF0YS1zbGF0ZS1tYXJrLXBsYWNlaG9sZGVyJ10gPSB0cnVlXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxzcGFuIHsuLi5hdHRyaWJ1dGVzfT5cbiAgICAgIHshSVNfQU5EUk9JRCB8fCAhaXNMaW5lQnJlYWsgPyAnXFx1RkVGRicgOiBudWxsfVxuICAgICAge2lzTGluZUJyZWFrID8gPGJyIC8+IDogbnVsbH1cbiAgICA8L3NwYW4+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RyaW5nXG4iLCAiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuLi9wbHVnaW4vcmVhY3QtZWRpdG9yJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnc2xhdGUnXG5cbi8qKlxuICogQSBSZWFjdCBjb250ZXh0IGZvciBzaGFyaW5nIHRoZSBlZGl0b3Igb2JqZWN0LlxuICovXG5cbmV4cG9ydCBjb25zdCBFZGl0b3JDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxSZWFjdEVkaXRvciB8IG51bGw+KG51bGwpXG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGVkaXRvciBvYmplY3QgZnJvbSB0aGUgUmVhY3QgY29udGV4dC5cbiAqL1xuXG5leHBvcnQgY29uc3QgdXNlU2xhdGVTdGF0aWMgPSAoKTogRWRpdG9yID0+IHtcbiAgY29uc3QgZWRpdG9yID0gdXNlQ29udGV4dChFZGl0b3JDb250ZXh0KVxuXG4gIGlmICghZWRpdG9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFRoZSBcXGB1c2VTbGF0ZVN0YXRpY1xcYCBob29rIG11c3QgYmUgdXNlZCBpbnNpZGUgdGhlIDxTbGF0ZT4gY29tcG9uZW50J3MgY29udGV4dC5gXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGVkaXRvclxufVxuIiwgImltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRWxlbWVudCwgVGV4dCB9IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgUmVzaXplT2JzZXJ2ZXIgYXMgUmVzaXplT2JzZXJ2ZXJQb2x5ZmlsbCB9IGZyb20gJ0BqdWdnbGUvcmVzaXplLW9ic2VydmVyJ1xuaW1wb3J0IFN0cmluZyBmcm9tICcuL3N0cmluZydcbmltcG9ydCB7XG4gIFBMQUNFSE9MREVSX1NZTUJPTCxcbiAgRURJVE9SX1RPX1BMQUNFSE9MREVSX0VMRU1FTlQsXG4gIEVESVRPUl9UT19GT1JDRV9SRU5ERVIsXG59IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7IFJlbmRlckxlYWZQcm9wcywgUmVuZGVyUGxhY2Vob2xkZXJQcm9wcyB9IGZyb20gJy4vZWRpdGFibGUnXG5pbXBvcnQgeyB1c2VTbGF0ZVN0YXRpYyB9IGZyb20gJy4uL2hvb2tzL3VzZS1zbGF0ZS1zdGF0aWMnXG5cbi8qKlxuICogSW5kaXZpZHVhbCBsZWF2ZXMgaW4gYSB0ZXh0IG5vZGUgd2l0aCB1bmlxdWUgZm9ybWF0dGluZy5cbiAqL1xuXG5jb25zdCBMZWFmID0gKHByb3BzOiB7XG4gIGlzTGFzdDogYm9vbGVhblxuICBsZWFmOiBUZXh0XG4gIHBhcmVudDogRWxlbWVudFxuICByZW5kZXJQbGFjZWhvbGRlcjogKHByb3BzOiBSZW5kZXJQbGFjZWhvbGRlclByb3BzKSA9PiBKU1guRWxlbWVudFxuICByZW5kZXJMZWFmPzogKHByb3BzOiBSZW5kZXJMZWFmUHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHRleHQ6IFRleHRcbn0pID0+IHtcbiAgY29uc3Qge1xuICAgIGxlYWYsXG4gICAgaXNMYXN0LFxuICAgIHRleHQsXG4gICAgcGFyZW50LFxuICAgIHJlbmRlclBsYWNlaG9sZGVyLFxuICAgIHJlbmRlckxlYWYgPSAocHJvcHM6IFJlbmRlckxlYWZQcm9wcykgPT4gPERlZmF1bHRMZWFmIHsuLi5wcm9wc30gLz4sXG4gIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGxhc3RQbGFjZWhvbGRlclJlZiA9IHVzZVJlZjxIVE1MU3BhbkVsZW1lbnQgfCBudWxsPihudWxsKVxuICBjb25zdCBwbGFjZWhvbGRlclJlZiA9IHVzZVJlZjxIVE1MU3BhbkVsZW1lbnQgfCBudWxsPihudWxsKVxuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpXG5cbiAgY29uc3QgcGxhY2Vob2xkZXJSZXNpemVPYnNlcnZlciA9IHVzZVJlZjxSZXNpemVPYnNlcnZlciB8IG51bGw+KG51bGwpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHBsYWNlaG9sZGVyUmVzaXplT2JzZXJ2ZXIuY3VycmVudCkge1xuICAgICAgICBwbGFjZWhvbGRlclJlc2l6ZU9ic2VydmVyLmN1cnJlbnQuZGlzY29ubmVjdCgpXG4gICAgICB9XG4gICAgfVxuICB9LCBbXSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHBsYWNlaG9sZGVyRWwgPSBwbGFjZWhvbGRlclJlZj8uY3VycmVudFxuXG4gICAgaWYgKHBsYWNlaG9sZGVyRWwpIHtcbiAgICAgIEVESVRPUl9UT19QTEFDRUhPTERFUl9FTEVNRU5ULnNldChlZGl0b3IsIHBsYWNlaG9sZGVyRWwpXG4gICAgfSBlbHNlIHtcbiAgICAgIEVESVRPUl9UT19QTEFDRUhPTERFUl9FTEVNRU5ULmRlbGV0ZShlZGl0b3IpXG4gICAgfVxuXG4gICAgaWYgKHBsYWNlaG9sZGVyUmVzaXplT2JzZXJ2ZXIuY3VycmVudCkge1xuICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIG9ic2VydmVyLlxuICAgICAgcGxhY2Vob2xkZXJSZXNpemVPYnNlcnZlci5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgICAgaWYgKHBsYWNlaG9sZGVyRWwpXG4gICAgICAgIHBsYWNlaG9sZGVyUmVzaXplT2JzZXJ2ZXIuY3VycmVudC5vYnNlcnZlKHBsYWNlaG9sZGVyRWwpXG4gICAgfSBlbHNlIGlmIChwbGFjZWhvbGRlckVsKSB7XG4gICAgICAvLyBDcmVhdGUgYSBuZXcgb2JzZXJ2ZXIgYW5kIG9ic2VydmUgdGhlIHBsYWNlaG9sZGVyIGVsZW1lbnQuXG4gICAgICBjb25zdCBSZXNpemVPYnNlcnZlciA9IHdpbmRvdy5SZXNpemVPYnNlcnZlciB8fCBSZXNpemVPYnNlcnZlclBvbHlmaWxsXG4gICAgICBwbGFjZWhvbGRlclJlc2l6ZU9ic2VydmVyLmN1cnJlbnQgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgICAvLyBGb3JjZSBhIHJlLXJlbmRlciBvZiB0aGUgZWRpdG9yIHNvIGl0cyBtaW4taGVpZ2h0IGNhbiBiZSB1cGRhdGVkXG4gICAgICAgIC8vIHRvIHRoZSBuZXcgaGVpZ2h0IG9mIHRoZSBwbGFjZWhvbGRlci5cbiAgICAgICAgY29uc3QgZm9yY2VSZW5kZXIgPSBFRElUT1JfVE9fRk9SQ0VfUkVOREVSLmdldChlZGl0b3IpXG4gICAgICAgIGZvcmNlUmVuZGVyPy4oKVxuICAgICAgfSlcbiAgICAgIHBsYWNlaG9sZGVyUmVzaXplT2JzZXJ2ZXIuY3VycmVudC5vYnNlcnZlKHBsYWNlaG9sZGVyRWwpXG4gICAgfVxuXG4gICAgaWYgKCFwbGFjZWhvbGRlckVsICYmIGxhc3RQbGFjZWhvbGRlclJlZi5jdXJyZW50KSB7XG4gICAgICAvLyBObyBwbGFjZWhvbGRlciBlbGVtZW50LCBzbyBubyBuZWVkIGZvciBhIHJlc2l6ZSBvYnNlcnZlci5cbiAgICAgIC8vIEZvcmNlIGEgcmUtcmVuZGVyIG9mIHRoZSBlZGl0b3Igc28gaXRzIG1pbi1oZWlnaHQgY2FuIGJlIHJlc2V0LlxuICAgICAgY29uc3QgZm9yY2VSZW5kZXIgPSBFRElUT1JfVE9fRk9SQ0VfUkVOREVSLmdldChlZGl0b3IpXG4gICAgICBmb3JjZVJlbmRlcj8uKClcbiAgICB9XG5cbiAgICBsYXN0UGxhY2Vob2xkZXJSZWYuY3VycmVudCA9IHBsYWNlaG9sZGVyUmVmLmN1cnJlbnRcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBFRElUT1JfVE9fUExBQ0VIT0xERVJfRUxFTUVOVC5kZWxldGUoZWRpdG9yKVxuICAgIH1cbiAgfSwgW3BsYWNlaG9sZGVyUmVmLCBsZWFmXSlcblxuICBsZXQgY2hpbGRyZW4gPSAoXG4gICAgPFN0cmluZyBpc0xhc3Q9e2lzTGFzdH0gbGVhZj17bGVhZn0gcGFyZW50PXtwYXJlbnR9IHRleHQ9e3RleHR9IC8+XG4gIClcblxuICBpZiAobGVhZltQTEFDRUhPTERFUl9TWU1CT0xdKSB7XG4gICAgY29uc3QgcGxhY2Vob2xkZXJQcm9wczogUmVuZGVyUGxhY2Vob2xkZXJQcm9wcyA9IHtcbiAgICAgIGNoaWxkcmVuOiBsZWFmLnBsYWNlaG9sZGVyLFxuICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAnZGF0YS1zbGF0ZS1wbGFjZWhvbGRlcic6IHRydWUsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgbWF4V2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICAgIG9wYWNpdHk6ICcwLjMzMycsXG4gICAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgICAgIHRleHREZWNvcmF0aW9uOiAnbm9uZScsXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRlbnRFZGl0YWJsZTogZmFsc2UsXG4gICAgICAgIHJlZjogcGxhY2Vob2xkZXJSZWYsXG4gICAgICB9LFxuICAgIH1cblxuICAgIGNoaWxkcmVuID0gKFxuICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICB7cmVuZGVyUGxhY2Vob2xkZXIocGxhY2Vob2xkZXJQcm9wcyl9XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgKVxuICB9XG5cbiAgLy8gQ09NUEFUOiBIYXZpbmcgdGhlIGBkYXRhLWAgYXR0cmlidXRlcyBvbiB0aGVzZSBsZWFmIGVsZW1lbnRzIGVuc3VyZXMgdGhhdFxuICAvLyBpbiBjZXJ0YWluIG1pc2JlaGF2aW5nIGJyb3dzZXJzIHRoZXkgYXJlbid0IHdlaXJkbHkgY2xvbmVkL2Rlc3Ryb3llZCBieVxuICAvLyBjb250ZW50ZWRpdGFibGUgYmVoYXZpb3JzLiAoMjAxOS8wNS8wOClcbiAgY29uc3QgYXR0cmlidXRlczoge1xuICAgICdkYXRhLXNsYXRlLWxlYWYnOiB0cnVlXG4gIH0gPSB7XG4gICAgJ2RhdGEtc2xhdGUtbGVhZic6IHRydWUsXG4gIH1cblxuICByZXR1cm4gcmVuZGVyTGVhZih7IGF0dHJpYnV0ZXMsIGNoaWxkcmVuLCBsZWFmLCB0ZXh0IH0pXG59XG5cbmNvbnN0IE1lbW9pemVkTGVhZiA9IFJlYWN0Lm1lbW8oTGVhZiwgKHByZXYsIG5leHQpID0+IHtcbiAgcmV0dXJuIChcbiAgICBuZXh0LnBhcmVudCA9PT0gcHJldi5wYXJlbnQgJiZcbiAgICBuZXh0LmlzTGFzdCA9PT0gcHJldi5pc0xhc3QgJiZcbiAgICBuZXh0LnJlbmRlckxlYWYgPT09IHByZXYucmVuZGVyTGVhZiAmJlxuICAgIG5leHQucmVuZGVyUGxhY2Vob2xkZXIgPT09IHByZXYucmVuZGVyUGxhY2Vob2xkZXIgJiZcbiAgICBuZXh0LnRleHQgPT09IHByZXYudGV4dCAmJlxuICAgIFRleHQuZXF1YWxzKG5leHQubGVhZiwgcHJldi5sZWFmKSAmJlxuICAgIG5leHQubGVhZltQTEFDRUhPTERFUl9TWU1CT0xdID09PSBwcmV2LmxlYWZbUExBQ0VIT0xERVJfU1lNQk9MXVxuICApXG59KVxuXG5leHBvcnQgY29uc3QgRGVmYXVsdExlYWYgPSAocHJvcHM6IFJlbmRlckxlYWZQcm9wcykgPT4ge1xuICBjb25zdCB7IGF0dHJpYnV0ZXMsIGNoaWxkcmVuIH0gPSBwcm9wc1xuICByZXR1cm4gPHNwYW4gey4uLmF0dHJpYnV0ZXN9PntjaGlsZHJlbn08L3NwYW4+XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1lbW9pemVkTGVhZlxuIiwgImltcG9ydCBSZWFjdCwgeyB1c2VSZWYgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEVsZW1lbnQsIFJhbmdlLCBUZXh0IGFzIFNsYXRlVGV4dCB9IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IsIHVzZVNsYXRlU3RhdGljIH0gZnJvbSAnLi4nXG5pbXBvcnQgeyB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IH0gZnJvbSAnLi4vaG9va3MvdXNlLWlzb21vcnBoaWMtbGF5b3V0LWVmZmVjdCdcbmltcG9ydCB7IGlzRGVjb3JhdG9yUmFuZ2VMaXN0RXF1YWwgfSBmcm9tICcuLi91dGlscy9yYW5nZS1saXN0J1xuaW1wb3J0IHtcbiAgRURJVE9SX1RPX0tFWV9UT19FTEVNRU5ULFxuICBFTEVNRU5UX1RPX05PREUsXG4gIE5PREVfVE9fRUxFTUVOVCxcbn0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHsgUmVuZGVyTGVhZlByb3BzLCBSZW5kZXJQbGFjZWhvbGRlclByb3BzIH0gZnJvbSAnLi9lZGl0YWJsZSdcbmltcG9ydCBMZWFmIGZyb20gJy4vbGVhZidcblxuLyoqXG4gKiBUZXh0LlxuICovXG5cbmNvbnN0IFRleHQgPSAocHJvcHM6IHtcbiAgZGVjb3JhdGlvbnM6IFJhbmdlW11cbiAgaXNMYXN0OiBib29sZWFuXG4gIHBhcmVudDogRWxlbWVudFxuICByZW5kZXJQbGFjZWhvbGRlcjogKHByb3BzOiBSZW5kZXJQbGFjZWhvbGRlclByb3BzKSA9PiBKU1guRWxlbWVudFxuICByZW5kZXJMZWFmPzogKHByb3BzOiBSZW5kZXJMZWFmUHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHRleHQ6IFNsYXRlVGV4dFxufSkgPT4ge1xuICBjb25zdCB7XG4gICAgZGVjb3JhdGlvbnMsXG4gICAgaXNMYXN0LFxuICAgIHBhcmVudCxcbiAgICByZW5kZXJQbGFjZWhvbGRlcixcbiAgICByZW5kZXJMZWFmLFxuICAgIHRleHQsXG4gIH0gPSBwcm9wc1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpXG4gIGNvbnN0IHJlZiA9IHVzZVJlZjxIVE1MU3BhbkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IGxlYXZlcyA9IFNsYXRlVGV4dC5kZWNvcmF0aW9ucyh0ZXh0LCBkZWNvcmF0aW9ucylcbiAgY29uc3Qga2V5ID0gUmVhY3RFZGl0b3IuZmluZEtleShlZGl0b3IsIHRleHQpXG4gIGNvbnN0IGNoaWxkcmVuID0gW11cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlYXZlcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGxlYWYgPSBsZWF2ZXNbaV1cblxuICAgIGNoaWxkcmVuLnB1c2goXG4gICAgICA8TGVhZlxuICAgICAgICBpc0xhc3Q9e2lzTGFzdCAmJiBpID09PSBsZWF2ZXMubGVuZ3RoIC0gMX1cbiAgICAgICAga2V5PXtgJHtrZXkuaWR9LSR7aX1gfVxuICAgICAgICByZW5kZXJQbGFjZWhvbGRlcj17cmVuZGVyUGxhY2Vob2xkZXJ9XG4gICAgICAgIGxlYWY9e2xlYWZ9XG4gICAgICAgIHRleHQ9e3RleHR9XG4gICAgICAgIHBhcmVudD17cGFyZW50fVxuICAgICAgICByZW5kZXJMZWFmPXtyZW5kZXJMZWFmfVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICAvLyBVcGRhdGUgZWxlbWVudC1yZWxhdGVkIHdlYWsgbWFwcyB3aXRoIHRoZSBET00gZWxlbWVudCByZWYuXG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IEtFWV9UT19FTEVNRU5UID0gRURJVE9SX1RPX0tFWV9UT19FTEVNRU5ULmdldChlZGl0b3IpXG4gICAgaWYgKHJlZi5jdXJyZW50KSB7XG4gICAgICBLRVlfVE9fRUxFTUVOVD8uc2V0KGtleSwgcmVmLmN1cnJlbnQpXG4gICAgICBOT0RFX1RPX0VMRU1FTlQuc2V0KHRleHQsIHJlZi5jdXJyZW50KVxuICAgICAgRUxFTUVOVF9UT19OT0RFLnNldChyZWYuY3VycmVudCwgdGV4dClcbiAgICB9IGVsc2Uge1xuICAgICAgS0VZX1RPX0VMRU1FTlQ/LmRlbGV0ZShrZXkpXG4gICAgICBOT0RFX1RPX0VMRU1FTlQuZGVsZXRlKHRleHQpXG4gICAgfVxuICB9KVxuXG4gIHJldHVybiAoXG4gICAgPHNwYW4gZGF0YS1zbGF0ZS1ub2RlPVwidGV4dFwiIHJlZj17cmVmfT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L3NwYW4+XG4gIClcbn1cblxuY29uc3QgTWVtb2l6ZWRUZXh0ID0gUmVhY3QubWVtbyhUZXh0LCAocHJldiwgbmV4dCkgPT4ge1xuICByZXR1cm4gKFxuICAgIG5leHQucGFyZW50ID09PSBwcmV2LnBhcmVudCAmJlxuICAgIG5leHQuaXNMYXN0ID09PSBwcmV2LmlzTGFzdCAmJlxuICAgIG5leHQucmVuZGVyTGVhZiA9PT0gcHJldi5yZW5kZXJMZWFmICYmXG4gICAgbmV4dC50ZXh0ID09PSBwcmV2LnRleHQgJiZcbiAgICBpc0RlY29yYXRvclJhbmdlTGlzdEVxdWFsKG5leHQuZGVjb3JhdGlvbnMsIHByZXYuZGVjb3JhdGlvbnMpXG4gIClcbn0pXG5cbmV4cG9ydCBkZWZhdWx0IE1lbW9pemVkVGV4dFxuIiwgImltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IGdldERpcmVjdGlvbiBmcm9tICdkaXJlY3Rpb24nXG5pbXBvcnQgeyBFZGl0b3IsIE5vZGUsIFJhbmdlLCBFbGVtZW50IGFzIFNsYXRlRWxlbWVudCB9IGZyb20gJ3NsYXRlJ1xuXG5pbXBvcnQgVGV4dCBmcm9tICcuL3RleHQnXG5pbXBvcnQgdXNlQ2hpbGRyZW4gZnJvbSAnLi4vaG9va3MvdXNlLWNoaWxkcmVuJ1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IsIHVzZVNsYXRlU3RhdGljLCB1c2VSZWFkT25seSB9IGZyb20gJy4uJ1xuaW1wb3J0IHtcbiAgTk9ERV9UT19FTEVNRU5ULFxuICBFTEVNRU5UX1RPX05PREUsXG4gIE5PREVfVE9fUEFSRU5ULFxuICBOT0RFX1RPX0lOREVYLFxuICBFRElUT1JfVE9fS0VZX1RPX0VMRU1FTlQsXG59IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7IGlzRGVjb3JhdG9yUmFuZ2VMaXN0RXF1YWwgfSBmcm9tICcuLi91dGlscy9yYW5nZS1saXN0J1xuaW1wb3J0IHtcbiAgUmVuZGVyRWxlbWVudFByb3BzLFxuICBSZW5kZXJMZWFmUHJvcHMsXG4gIFJlbmRlclBsYWNlaG9sZGVyUHJvcHMsXG59IGZyb20gJy4vZWRpdGFibGUnXG5cbi8qKlxuICogRWxlbWVudC5cbiAqL1xuXG5jb25zdCBFbGVtZW50ID0gKHByb3BzOiB7XG4gIGRlY29yYXRpb25zOiBSYW5nZVtdXG4gIGVsZW1lbnQ6IFNsYXRlRWxlbWVudFxuICByZW5kZXJFbGVtZW50PzogKHByb3BzOiBSZW5kZXJFbGVtZW50UHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHJlbmRlclBsYWNlaG9sZGVyOiAocHJvcHM6IFJlbmRlclBsYWNlaG9sZGVyUHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHJlbmRlckxlYWY/OiAocHJvcHM6IFJlbmRlckxlYWZQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgc2VsZWN0aW9uOiBSYW5nZSB8IG51bGxcbn0pID0+IHtcbiAgY29uc3Qge1xuICAgIGRlY29yYXRpb25zLFxuICAgIGVsZW1lbnQsXG4gICAgcmVuZGVyRWxlbWVudCA9IChwOiBSZW5kZXJFbGVtZW50UHJvcHMpID0+IDxEZWZhdWx0RWxlbWVudCB7Li4ucH0gLz4sXG4gICAgcmVuZGVyUGxhY2Vob2xkZXIsXG4gICAgcmVuZGVyTGVhZixcbiAgICBzZWxlY3Rpb24sXG4gIH0gPSBwcm9wc1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpXG4gIGNvbnN0IHJlYWRPbmx5ID0gdXNlUmVhZE9ubHkoKVxuICBjb25zdCBpc0lubGluZSA9IGVkaXRvci5pc0lubGluZShlbGVtZW50KVxuICBjb25zdCBrZXkgPSBSZWFjdEVkaXRvci5maW5kS2V5KGVkaXRvciwgZWxlbWVudClcbiAgY29uc3QgcmVmID0gdXNlQ2FsbGJhY2soXG4gICAgKHJlZjogSFRNTEVsZW1lbnQgfCBudWxsKSA9PiB7XG4gICAgICAvLyBVcGRhdGUgZWxlbWVudC1yZWxhdGVkIHdlYWsgbWFwcyB3aXRoIHRoZSBET00gZWxlbWVudCByZWYuXG4gICAgICBjb25zdCBLRVlfVE9fRUxFTUVOVCA9IEVESVRPUl9UT19LRVlfVE9fRUxFTUVOVC5nZXQoZWRpdG9yKVxuICAgICAgaWYgKHJlZikge1xuICAgICAgICBLRVlfVE9fRUxFTUVOVD8uc2V0KGtleSwgcmVmKVxuICAgICAgICBOT0RFX1RPX0VMRU1FTlQuc2V0KGVsZW1lbnQsIHJlZilcbiAgICAgICAgRUxFTUVOVF9UT19OT0RFLnNldChyZWYsIGVsZW1lbnQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBLRVlfVE9fRUxFTUVOVD8uZGVsZXRlKGtleSlcbiAgICAgICAgTk9ERV9UT19FTEVNRU5ULmRlbGV0ZShlbGVtZW50KVxuICAgICAgfVxuICAgIH0sXG4gICAgW2VkaXRvciwga2V5LCBlbGVtZW50XVxuICApXG4gIGxldCBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlID0gdXNlQ2hpbGRyZW4oe1xuICAgIGRlY29yYXRpb25zLFxuICAgIG5vZGU6IGVsZW1lbnQsXG4gICAgcmVuZGVyRWxlbWVudCxcbiAgICByZW5kZXJQbGFjZWhvbGRlcixcbiAgICByZW5kZXJMZWFmLFxuICAgIHNlbGVjdGlvbixcbiAgfSlcblxuICAvLyBBdHRyaWJ1dGVzIHRoYXQgdGhlIGRldmVsb3BlciBtdXN0IG1peCBpbnRvIHRoZSBlbGVtZW50IGluIHRoZWlyXG4gIC8vIGN1c3RvbSBub2RlIHJlbmRlcmVyIGNvbXBvbmVudC5cbiAgY29uc3QgYXR0cmlidXRlczoge1xuICAgICdkYXRhLXNsYXRlLW5vZGUnOiAnZWxlbWVudCdcbiAgICAnZGF0YS1zbGF0ZS12b2lkJz86IHRydWVcbiAgICAnZGF0YS1zbGF0ZS1pbmxpbmUnPzogdHJ1ZVxuICAgIGNvbnRlbnRFZGl0YWJsZT86IGZhbHNlXG4gICAgZGlyPzogJ3J0bCdcbiAgICByZWY6IGFueVxuICB9ID0ge1xuICAgICdkYXRhLXNsYXRlLW5vZGUnOiAnZWxlbWVudCcsXG4gICAgcmVmLFxuICB9XG5cbiAgaWYgKGlzSW5saW5lKSB7XG4gICAgYXR0cmlidXRlc1snZGF0YS1zbGF0ZS1pbmxpbmUnXSA9IHRydWVcbiAgfVxuXG4gIC8vIElmIGl0J3MgYSBibG9jayBub2RlIHdpdGggaW5saW5lIGNoaWxkcmVuLCBhZGQgdGhlIHByb3BlciBgZGlyYCBhdHRyaWJ1dGVcbiAgLy8gZm9yIHRleHQgZGlyZWN0aW9uLlxuICBpZiAoIWlzSW5saW5lICYmIEVkaXRvci5oYXNJbmxpbmVzKGVkaXRvciwgZWxlbWVudCkpIHtcbiAgICBjb25zdCB0ZXh0ID0gTm9kZS5zdHJpbmcoZWxlbWVudClcbiAgICBjb25zdCBkaXIgPSBnZXREaXJlY3Rpb24odGV4dClcblxuICAgIGlmIChkaXIgPT09ICdydGwnKSB7XG4gICAgICBhdHRyaWJ1dGVzLmRpciA9IGRpclxuICAgIH1cbiAgfVxuXG4gIC8vIElmIGl0J3MgYSB2b2lkIG5vZGUsIHdyYXAgdGhlIGNoaWxkcmVuIGluIGV4dHJhIHZvaWQtc3BlY2lmaWMgZWxlbWVudHMuXG4gIGlmIChFZGl0b3IuaXNWb2lkKGVkaXRvciwgZWxlbWVudCkpIHtcbiAgICBhdHRyaWJ1dGVzWydkYXRhLXNsYXRlLXZvaWQnXSA9IHRydWVcblxuICAgIGlmICghcmVhZE9ubHkgJiYgaXNJbmxpbmUpIHtcbiAgICAgIGF0dHJpYnV0ZXMuY29udGVudEVkaXRhYmxlID0gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBUYWcgPSBpc0lubGluZSA/ICdzcGFuJyA6ICdkaXYnXG4gICAgY29uc3QgW1t0ZXh0XV0gPSBOb2RlLnRleHRzKGVsZW1lbnQpXG5cbiAgICBjaGlsZHJlbiA9IChcbiAgICAgIDxUYWdcbiAgICAgICAgZGF0YS1zbGF0ZS1zcGFjZXJcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBoZWlnaHQ6ICcwJyxcbiAgICAgICAgICBjb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxUZXh0XG4gICAgICAgICAgcmVuZGVyUGxhY2Vob2xkZXI9e3JlbmRlclBsYWNlaG9sZGVyfVxuICAgICAgICAgIGRlY29yYXRpb25zPXtbXX1cbiAgICAgICAgICBpc0xhc3Q9e2ZhbHNlfVxuICAgICAgICAgIHBhcmVudD17ZWxlbWVudH1cbiAgICAgICAgICB0ZXh0PXt0ZXh0fVxuICAgICAgICAvPlxuICAgICAgPC9UYWc+XG4gICAgKVxuXG4gICAgTk9ERV9UT19JTkRFWC5zZXQodGV4dCwgMClcbiAgICBOT0RFX1RPX1BBUkVOVC5zZXQodGV4dCwgZWxlbWVudClcbiAgfVxuXG4gIHJldHVybiByZW5kZXJFbGVtZW50KHsgYXR0cmlidXRlcywgY2hpbGRyZW4sIGVsZW1lbnQgfSlcbn1cblxuY29uc3QgTWVtb2l6ZWRFbGVtZW50ID0gUmVhY3QubWVtbyhFbGVtZW50LCAocHJldiwgbmV4dCkgPT4ge1xuICByZXR1cm4gKFxuICAgIHByZXYuZWxlbWVudCA9PT0gbmV4dC5lbGVtZW50ICYmXG4gICAgcHJldi5yZW5kZXJFbGVtZW50ID09PSBuZXh0LnJlbmRlckVsZW1lbnQgJiZcbiAgICBwcmV2LnJlbmRlckxlYWYgPT09IG5leHQucmVuZGVyTGVhZiAmJlxuICAgIGlzRGVjb3JhdG9yUmFuZ2VMaXN0RXF1YWwocHJldi5kZWNvcmF0aW9ucywgbmV4dC5kZWNvcmF0aW9ucykgJiZcbiAgICAocHJldi5zZWxlY3Rpb24gPT09IG5leHQuc2VsZWN0aW9uIHx8XG4gICAgICAoISFwcmV2LnNlbGVjdGlvbiAmJlxuICAgICAgICAhIW5leHQuc2VsZWN0aW9uICYmXG4gICAgICAgIFJhbmdlLmVxdWFscyhwcmV2LnNlbGVjdGlvbiwgbmV4dC5zZWxlY3Rpb24pKSlcbiAgKVxufSlcblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBlbGVtZW50IHJlbmRlcmVyLlxuICovXG5cbmV4cG9ydCBjb25zdCBEZWZhdWx0RWxlbWVudCA9IChwcm9wczogUmVuZGVyRWxlbWVudFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgYXR0cmlidXRlcywgY2hpbGRyZW4sIGVsZW1lbnQgfSA9IHByb3BzXG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlU3RhdGljKClcbiAgY29uc3QgVGFnID0gZWRpdG9yLmlzSW5saW5lKGVsZW1lbnQpID8gJ3NwYW4nIDogJ2RpdidcbiAgcmV0dXJuIChcbiAgICA8VGFnIHsuLi5hdHRyaWJ1dGVzfSBzdHlsZT17eyBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9fT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L1RhZz5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBNZW1vaXplZEVsZW1lbnRcbiIsICJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBSYW5nZSwgTm9kZUVudHJ5IH0gZnJvbSAnc2xhdGUnXG5cbi8qKlxuICogQSBSZWFjdCBjb250ZXh0IGZvciBzaGFyaW5nIHRoZSBgZGVjb3JhdGVgIHByb3Agb2YgdGhlIGVkaXRhYmxlLlxuICovXG5cbmV4cG9ydCBjb25zdCBEZWNvcmF0ZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0PChlbnRyeTogTm9kZUVudHJ5KSA9PiBSYW5nZVtdPihcbiAgKCkgPT4gW11cbilcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgYGRlY29yYXRlYCBwcm9wIG9mIHRoZSBlZGl0YWJsZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgdXNlRGVjb3JhdGUgPSAoKTogKChlbnRyeTogTm9kZUVudHJ5KSA9PiBSYW5nZVtdKSA9PiB7XG4gIHJldHVybiB1c2VDb250ZXh0KERlY29yYXRlQ29udGV4dClcbn1cbiIsICJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnXG5cbi8qKlxuICogQSBSZWFjdCBjb250ZXh0IGZvciBzaGFyaW5nIHRoZSBgc2VsZWN0ZWRgIHN0YXRlIG9mIGFuIGVsZW1lbnQuXG4gKi9cblxuZXhwb3J0IGNvbnN0IFNlbGVjdGVkQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoZmFsc2UpXG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGBzZWxlY3RlZGAgc3RhdGUgb2YgYW4gZWxlbWVudC5cbiAqL1xuXG5leHBvcnQgY29uc3QgdXNlU2VsZWN0ZWQgPSAoKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiB1c2VDb250ZXh0KFNlbGVjdGVkQ29udGV4dClcbn1cbiIsICJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBFZGl0b3IsIFJhbmdlLCBFbGVtZW50LCBBbmNlc3RvciwgRGVzY2VuZGFudCB9IGZyb20gJ3NsYXRlJ1xuXG5pbXBvcnQgRWxlbWVudENvbXBvbmVudCBmcm9tICcuLi9jb21wb25lbnRzL2VsZW1lbnQnXG5pbXBvcnQgVGV4dENvbXBvbmVudCBmcm9tICcuLi9jb21wb25lbnRzL3RleHQnXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4uL3BsdWdpbi9yZWFjdC1lZGl0b3InXG5pbXBvcnQgeyB1c2VTbGF0ZVN0YXRpYyB9IGZyb20gJy4vdXNlLXNsYXRlLXN0YXRpYydcbmltcG9ydCB7IHVzZURlY29yYXRlIH0gZnJvbSAnLi91c2UtZGVjb3JhdGUnXG5pbXBvcnQgeyBOT0RFX1RPX0lOREVYLCBOT0RFX1RPX1BBUkVOVCB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7XG4gIFJlbmRlckVsZW1lbnRQcm9wcyxcbiAgUmVuZGVyTGVhZlByb3BzLFxuICBSZW5kZXJQbGFjZWhvbGRlclByb3BzLFxufSBmcm9tICcuLi9jb21wb25lbnRzL2VkaXRhYmxlJ1xuaW1wb3J0IHsgU2VsZWN0ZWRDb250ZXh0IH0gZnJvbSAnLi91c2Utc2VsZWN0ZWQnXG5cbi8qKlxuICogQ2hpbGRyZW4uXG4gKi9cblxuY29uc3QgdXNlQ2hpbGRyZW4gPSAocHJvcHM6IHtcbiAgZGVjb3JhdGlvbnM6IFJhbmdlW11cbiAgbm9kZTogQW5jZXN0b3JcbiAgcmVuZGVyRWxlbWVudD86IChwcm9wczogUmVuZGVyRWxlbWVudFByb3BzKSA9PiBKU1guRWxlbWVudFxuICByZW5kZXJQbGFjZWhvbGRlcjogKHByb3BzOiBSZW5kZXJQbGFjZWhvbGRlclByb3BzKSA9PiBKU1guRWxlbWVudFxuICByZW5kZXJMZWFmPzogKHByb3BzOiBSZW5kZXJMZWFmUHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHNlbGVjdGlvbjogUmFuZ2UgfCBudWxsXG59KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBkZWNvcmF0aW9ucyxcbiAgICBub2RlLFxuICAgIHJlbmRlckVsZW1lbnQsXG4gICAgcmVuZGVyUGxhY2Vob2xkZXIsXG4gICAgcmVuZGVyTGVhZixcbiAgICBzZWxlY3Rpb24sXG4gIH0gPSBwcm9wc1xuICBjb25zdCBkZWNvcmF0ZSA9IHVzZURlY29yYXRlKClcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKVxuICBjb25zdCBwYXRoID0gUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBub2RlKVxuICBjb25zdCBjaGlsZHJlbiA9IFtdXG4gIGNvbnN0IGlzTGVhZkJsb2NrID1cbiAgICBFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJlxuICAgICFlZGl0b3IuaXNJbmxpbmUobm9kZSkgJiZcbiAgICBFZGl0b3IuaGFzSW5saW5lcyhlZGl0b3IsIG5vZGUpXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcCA9IHBhdGguY29uY2F0KGkpXG4gICAgY29uc3QgbiA9IG5vZGUuY2hpbGRyZW5baV0gYXMgRGVzY2VuZGFudFxuICAgIGNvbnN0IGtleSA9IFJlYWN0RWRpdG9yLmZpbmRLZXkoZWRpdG9yLCBuKVxuICAgIGNvbnN0IHJhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgcClcbiAgICBjb25zdCBzZWwgPSBzZWxlY3Rpb24gJiYgUmFuZ2UuaW50ZXJzZWN0aW9uKHJhbmdlLCBzZWxlY3Rpb24pXG4gICAgY29uc3QgZHMgPSBkZWNvcmF0ZShbbiwgcF0pXG5cbiAgICBmb3IgKGNvbnN0IGRlYyBvZiBkZWNvcmF0aW9ucykge1xuICAgICAgY29uc3QgZCA9IFJhbmdlLmludGVyc2VjdGlvbihkZWMsIHJhbmdlKVxuXG4gICAgICBpZiAoZCkge1xuICAgICAgICBkcy5wdXNoKGQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKEVsZW1lbnQuaXNFbGVtZW50KG4pKSB7XG4gICAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgICA8U2VsZWN0ZWRDb250ZXh0LlByb3ZpZGVyIGtleT17YHByb3ZpZGVyLSR7a2V5LmlkfWB9IHZhbHVlPXshIXNlbH0+XG4gICAgICAgICAgPEVsZW1lbnRDb21wb25lbnRcbiAgICAgICAgICAgIGRlY29yYXRpb25zPXtkc31cbiAgICAgICAgICAgIGVsZW1lbnQ9e259XG4gICAgICAgICAgICBrZXk9e2tleS5pZH1cbiAgICAgICAgICAgIHJlbmRlckVsZW1lbnQ9e3JlbmRlckVsZW1lbnR9XG4gICAgICAgICAgICByZW5kZXJQbGFjZWhvbGRlcj17cmVuZGVyUGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICByZW5kZXJMZWFmPXtyZW5kZXJMZWFmfVxuICAgICAgICAgICAgc2VsZWN0aW9uPXtzZWx9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9TZWxlY3RlZENvbnRleHQuUHJvdmlkZXI+XG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIGNoaWxkcmVuLnB1c2goXG4gICAgICAgIDxUZXh0Q29tcG9uZW50XG4gICAgICAgICAgZGVjb3JhdGlvbnM9e2RzfVxuICAgICAgICAgIGtleT17a2V5LmlkfVxuICAgICAgICAgIGlzTGFzdD17aXNMZWFmQmxvY2sgJiYgaSA9PT0gbm9kZS5jaGlsZHJlbi5sZW5ndGggLSAxfVxuICAgICAgICAgIHBhcmVudD17bm9kZX1cbiAgICAgICAgICByZW5kZXJQbGFjZWhvbGRlcj17cmVuZGVyUGxhY2Vob2xkZXJ9XG4gICAgICAgICAgcmVuZGVyTGVhZj17cmVuZGVyTGVhZn1cbiAgICAgICAgICB0ZXh0PXtufVxuICAgICAgICAvPlxuICAgICAgKVxuICAgIH1cblxuICAgIE5PREVfVE9fSU5ERVguc2V0KG4sIGkpXG4gICAgTk9ERV9UT19QQVJFTlQuc2V0KG4sIG5vZGUpXG4gIH1cblxuICByZXR1cm4gY2hpbGRyZW5cbn1cblxuZXhwb3J0IGRlZmF1bHQgdXNlQ2hpbGRyZW5cbiIsICJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnXG5cbi8qKlxuICogQSBSZWFjdCBjb250ZXh0IGZvciBzaGFyaW5nIHRoZSBgcmVhZE9ubHlgIHN0YXRlIG9mIHRoZSBlZGl0b3IuXG4gKi9cblxuZXhwb3J0IGNvbnN0IFJlYWRPbmx5Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQoZmFsc2UpXG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGByZWFkT25seWAgc3RhdGUgb2YgdGhlIGVkaXRvci5cbiAqL1xuXG5leHBvcnQgY29uc3QgdXNlUmVhZE9ubHkgPSAoKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiB1c2VDb250ZXh0KFJlYWRPbmx5Q29udGV4dClcbn1cbiIsICJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi4vcGx1Z2luL3JlYWN0LWVkaXRvcidcblxuLyoqXG4gKiBBIFJlYWN0IGNvbnRleHQgZm9yIHNoYXJpbmcgdGhlIGVkaXRvciBvYmplY3QsIGluIGEgd2F5IHRoYXQgcmUtcmVuZGVycyB0aGVcbiAqIGNvbnRleHQgd2hlbmV2ZXIgY2hhbmdlcyBvY2N1ci5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFNsYXRlQ29udGV4dFZhbHVlIHtcbiAgdjogbnVtYmVyXG4gIGVkaXRvcjogUmVhY3RFZGl0b3Jcbn1cblxuZXhwb3J0IGNvbnN0IFNsYXRlQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8e1xuICB2OiBudW1iZXJcbiAgZWRpdG9yOiBSZWFjdEVkaXRvclxufSB8IG51bGw+KG51bGwpXG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGVkaXRvciBvYmplY3QgZnJvbSB0aGUgUmVhY3QgY29udGV4dC5cbiAqL1xuXG5leHBvcnQgY29uc3QgdXNlU2xhdGUgPSAoKTogRWRpdG9yID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoU2xhdGVDb250ZXh0KVxuXG4gIGlmICghY29udGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgXFxgdXNlU2xhdGVcXGAgaG9vayBtdXN0IGJlIHVzZWQgaW5zaWRlIHRoZSA8U2xhdGU+IGNvbXBvbmVudCdzIGNvbnRleHQuYFxuICAgIClcbiAgfVxuXG4gIGNvbnN0IHsgZWRpdG9yIH0gPSBjb250ZXh0XG4gIHJldHVybiBlZGl0b3Jcbn1cblxuZXhwb3J0IGNvbnN0IHVzZVNsYXRlV2l0aFYgPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KFNsYXRlQ29udGV4dClcblxuICBpZiAoIWNvbnRleHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVGhlIFxcYHVzZVNsYXRlXFxgIGhvb2sgbXVzdCBiZSB1c2VkIGluc2lkZSB0aGUgPFNsYXRlPiBjb21wb25lbnQncyBjb250ZXh0LmBcbiAgICApXG4gIH1cblxuICByZXR1cm4gY29udGV4dFxufVxuIiwgImV4cG9ydCBjb25zdCBUUklQTEVfQ0xJQ0sgPSAzXG4iLCAiaW1wb3J0IHsgaXNLZXlIb3RrZXkgfSBmcm9tICdpcy1ob3RrZXknXG5pbXBvcnQgeyBJU19BUFBMRSB9IGZyb20gJy4vZW52aXJvbm1lbnQnXG5cbi8qKlxuICogSG90a2V5IG1hcHBpbmdzIGZvciBlYWNoIHBsYXRmb3JtLlxuICovXG5cbmNvbnN0IEhPVEtFWVMgPSB7XG4gIGJvbGQ6ICdtb2QrYicsXG4gIGNvbXBvc2U6IFsnZG93bicsICdsZWZ0JywgJ3JpZ2h0JywgJ3VwJywgJ2JhY2tzcGFjZScsICdlbnRlciddLFxuICBtb3ZlQmFja3dhcmQ6ICdsZWZ0JyxcbiAgbW92ZUZvcndhcmQ6ICdyaWdodCcsXG4gIG1vdmVXb3JkQmFja3dhcmQ6ICdjdHJsK2xlZnQnLFxuICBtb3ZlV29yZEZvcndhcmQ6ICdjdHJsK3JpZ2h0JyxcbiAgZGVsZXRlQmFja3dhcmQ6ICdzaGlmdD8rYmFja3NwYWNlJyxcbiAgZGVsZXRlRm9yd2FyZDogJ3NoaWZ0PytkZWxldGUnLFxuICBleHRlbmRCYWNrd2FyZDogJ3NoaWZ0K2xlZnQnLFxuICBleHRlbmRGb3J3YXJkOiAnc2hpZnQrcmlnaHQnLFxuICBpdGFsaWM6ICdtb2QraScsXG4gIGluc2VydFNvZnRCcmVhazogJ3NoaWZ0K2VudGVyJyxcbiAgc3BsaXRCbG9jazogJ2VudGVyJyxcbiAgdW5kbzogJ21vZCt6Jyxcbn1cblxuY29uc3QgQVBQTEVfSE9US0VZUyA9IHtcbiAgbW92ZUxpbmVCYWNrd2FyZDogJ29wdCt1cCcsXG4gIG1vdmVMaW5lRm9yd2FyZDogJ29wdCtkb3duJyxcbiAgbW92ZVdvcmRCYWNrd2FyZDogJ29wdCtsZWZ0JyxcbiAgbW92ZVdvcmRGb3J3YXJkOiAnb3B0K3JpZ2h0JyxcbiAgZGVsZXRlQmFja3dhcmQ6IFsnY3RybCtiYWNrc3BhY2UnLCAnY3RybCtoJ10sXG4gIGRlbGV0ZUZvcndhcmQ6IFsnY3RybCtkZWxldGUnLCAnY3RybCtkJ10sXG4gIGRlbGV0ZUxpbmVCYWNrd2FyZDogJ2NtZCtzaGlmdD8rYmFja3NwYWNlJyxcbiAgZGVsZXRlTGluZUZvcndhcmQ6IFsnY21kK3NoaWZ0PytkZWxldGUnLCAnY3RybCtrJ10sXG4gIGRlbGV0ZVdvcmRCYWNrd2FyZDogJ29wdCtzaGlmdD8rYmFja3NwYWNlJyxcbiAgZGVsZXRlV29yZEZvcndhcmQ6ICdvcHQrc2hpZnQ/K2RlbGV0ZScsXG4gIGV4dGVuZExpbmVCYWNrd2FyZDogJ29wdCtzaGlmdCt1cCcsXG4gIGV4dGVuZExpbmVGb3J3YXJkOiAnb3B0K3NoaWZ0K2Rvd24nLFxuICByZWRvOiAnY21kK3NoaWZ0K3onLFxuICB0cmFuc3Bvc2VDaGFyYWN0ZXI6ICdjdHJsK3QnLFxufVxuXG5jb25zdCBXSU5ET1dTX0hPVEtFWVMgPSB7XG4gIGRlbGV0ZVdvcmRCYWNrd2FyZDogJ2N0cmwrc2hpZnQ/K2JhY2tzcGFjZScsXG4gIGRlbGV0ZVdvcmRGb3J3YXJkOiAnY3RybCtzaGlmdD8rZGVsZXRlJyxcbiAgcmVkbzogWydjdHJsK3knLCAnY3RybCtzaGlmdCt6J10sXG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcGxhdGZvcm0tYXdhcmUgaG90a2V5IGNoZWNrZXIuXG4gKi9cblxuY29uc3QgY3JlYXRlID0gKGtleTogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGdlbmVyaWMgPSBIT1RLRVlTW2tleV1cbiAgY29uc3QgYXBwbGUgPSBBUFBMRV9IT1RLRVlTW2tleV1cbiAgY29uc3Qgd2luZG93cyA9IFdJTkRPV1NfSE9US0VZU1trZXldXG4gIGNvbnN0IGlzR2VuZXJpYyA9IGdlbmVyaWMgJiYgaXNLZXlIb3RrZXkoZ2VuZXJpYylcbiAgY29uc3QgaXNBcHBsZSA9IGFwcGxlICYmIGlzS2V5SG90a2V5KGFwcGxlKVxuICBjb25zdCBpc1dpbmRvd3MgPSB3aW5kb3dzICYmIGlzS2V5SG90a2V5KHdpbmRvd3MpXG5cbiAgcmV0dXJuIChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIGlmIChpc0dlbmVyaWMgJiYgaXNHZW5lcmljKGV2ZW50KSkgcmV0dXJuIHRydWVcbiAgICBpZiAoSVNfQVBQTEUgJiYgaXNBcHBsZSAmJiBpc0FwcGxlKGV2ZW50KSkgcmV0dXJuIHRydWVcbiAgICBpZiAoIUlTX0FQUExFICYmIGlzV2luZG93cyAmJiBpc1dpbmRvd3MoZXZlbnQpKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbi8qKlxuICogSG90a2V5cy5cbiAqL1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGlzQm9sZDogY3JlYXRlKCdib2xkJyksXG4gIGlzQ29tcG9zZTogY3JlYXRlKCdjb21wb3NlJyksXG4gIGlzTW92ZUJhY2t3YXJkOiBjcmVhdGUoJ21vdmVCYWNrd2FyZCcpLFxuICBpc01vdmVGb3J3YXJkOiBjcmVhdGUoJ21vdmVGb3J3YXJkJyksXG4gIGlzRGVsZXRlQmFja3dhcmQ6IGNyZWF0ZSgnZGVsZXRlQmFja3dhcmQnKSxcbiAgaXNEZWxldGVGb3J3YXJkOiBjcmVhdGUoJ2RlbGV0ZUZvcndhcmQnKSxcbiAgaXNEZWxldGVMaW5lQmFja3dhcmQ6IGNyZWF0ZSgnZGVsZXRlTGluZUJhY2t3YXJkJyksXG4gIGlzRGVsZXRlTGluZUZvcndhcmQ6IGNyZWF0ZSgnZGVsZXRlTGluZUZvcndhcmQnKSxcbiAgaXNEZWxldGVXb3JkQmFja3dhcmQ6IGNyZWF0ZSgnZGVsZXRlV29yZEJhY2t3YXJkJyksXG4gIGlzRGVsZXRlV29yZEZvcndhcmQ6IGNyZWF0ZSgnZGVsZXRlV29yZEZvcndhcmQnKSxcbiAgaXNFeHRlbmRCYWNrd2FyZDogY3JlYXRlKCdleHRlbmRCYWNrd2FyZCcpLFxuICBpc0V4dGVuZEZvcndhcmQ6IGNyZWF0ZSgnZXh0ZW5kRm9yd2FyZCcpLFxuICBpc0V4dGVuZExpbmVCYWNrd2FyZDogY3JlYXRlKCdleHRlbmRMaW5lQmFja3dhcmQnKSxcbiAgaXNFeHRlbmRMaW5lRm9yd2FyZDogY3JlYXRlKCdleHRlbmRMaW5lRm9yd2FyZCcpLFxuICBpc0l0YWxpYzogY3JlYXRlKCdpdGFsaWMnKSxcbiAgaXNNb3ZlTGluZUJhY2t3YXJkOiBjcmVhdGUoJ21vdmVMaW5lQmFja3dhcmQnKSxcbiAgaXNNb3ZlTGluZUZvcndhcmQ6IGNyZWF0ZSgnbW92ZUxpbmVGb3J3YXJkJyksXG4gIGlzTW92ZVdvcmRCYWNrd2FyZDogY3JlYXRlKCdtb3ZlV29yZEJhY2t3YXJkJyksXG4gIGlzTW92ZVdvcmRGb3J3YXJkOiBjcmVhdGUoJ21vdmVXb3JkRm9yd2FyZCcpLFxuICBpc1JlZG86IGNyZWF0ZSgncmVkbycpLFxuICBpc1NvZnRCcmVhazogY3JlYXRlKCdpbnNlcnRTb2Z0QnJlYWsnKSxcbiAgaXNTcGxpdEJsb2NrOiBjcmVhdGUoJ3NwbGl0QmxvY2snKSxcbiAgaXNUcmFuc3Bvc2VDaGFyYWN0ZXI6IGNyZWF0ZSgndHJhbnNwb3NlQ2hhcmFjdGVyJyksXG4gIGlzVW5kbzogY3JlYXRlKCd1bmRvJyksXG59XG4iLCAiaW1wb3J0IHsgUmVmT2JqZWN0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4uLy4uL3BsdWdpbi9yZWFjdC1lZGl0b3InXG5pbXBvcnQgeyBpc1RyYWNrZWRNdXRhdGlvbiB9IGZyb20gJy4uLy4uL3V0aWxzL2RvbSdcblxuZXhwb3J0IHR5cGUgUmVzdG9yZURPTU1hbmFnZXIgPSB7XG4gIHJlZ2lzdGVyTXV0YXRpb25zOiAobXV0YXRpb25zOiBNdXRhdGlvblJlY29yZFtdKSA9PiB2b2lkXG4gIHJlc3RvcmVET006ICgpID0+IHZvaWRcbiAgY2xlYXI6ICgpID0+IHZvaWRcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJlc3RvcmVEb21NYW5hZ2VyID0gKFxuICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICByZWNlaXZlZFVzZXJJbnB1dDogUmVmT2JqZWN0PGJvb2xlYW4+XG4pOiBSZXN0b3JlRE9NTWFuYWdlciA9PiB7XG4gIGxldCBidWZmZXJlZE11dGF0aW9uczogTXV0YXRpb25SZWNvcmRbXSA9IFtdXG5cbiAgY29uc3QgY2xlYXIgPSAoKSA9PiB7XG4gICAgYnVmZmVyZWRNdXRhdGlvbnMgPSBbXVxuICB9XG5cbiAgY29uc3QgcmVnaXN0ZXJNdXRhdGlvbnMgPSAobXV0YXRpb25zOiBNdXRhdGlvblJlY29yZFtdKSA9PiB7XG4gICAgaWYgKCFyZWNlaXZlZFVzZXJJbnB1dC5jdXJyZW50KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB0cmFja2VkTXV0YXRpb25zID0gbXV0YXRpb25zLmZpbHRlcihtdXRhdGlvbiA9PlxuICAgICAgaXNUcmFja2VkTXV0YXRpb24oZWRpdG9yLCBtdXRhdGlvbiwgbXV0YXRpb25zKVxuICAgIClcblxuICAgIGJ1ZmZlcmVkTXV0YXRpb25zLnB1c2goLi4udHJhY2tlZE11dGF0aW9ucylcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc3RvcmVET00oKSB7XG4gICAgYnVmZmVyZWRNdXRhdGlvbnMucmV2ZXJzZSgpLmZvckVhY2gobXV0YXRpb24gPT4ge1xuICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGFyYWN0ZXJEYXRhJykge1xuICAgICAgICBtdXRhdGlvbi50YXJnZXQudGV4dENvbnRlbnQgPSBtdXRhdGlvbi5vbGRWYWx1ZVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgbXV0YXRpb24ucmVtb3ZlZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICAgIG11dGF0aW9uLnRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgbXV0YXRpb24ubmV4dFNpYmxpbmcpXG4gICAgICB9KVxuXG4gICAgICBtdXRhdGlvbi5hZGRlZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICAgIG11dGF0aW9uLnRhcmdldC5yZW1vdmVDaGlsZChub2RlKVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8gQ2xlYXIgYnVmZmVyZWQgbXV0YXRpb25zIHRvIGVuc3VyZSB3ZSBkb24ndCB1bmRvIHRoZW0gdHdpY2VcbiAgICBjbGVhcigpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJlZ2lzdGVyTXV0YXRpb25zLFxuICAgIHJlc3RvcmVET00sXG4gICAgY2xlYXIsXG4gIH1cbn1cbiIsICJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50LCBDb21wb25lbnRUeXBlLCBDb250ZXh0VHlwZSwgUmVmT2JqZWN0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBFZGl0b3JDb250ZXh0IH0gZnJvbSAnLi4vLi4vaG9va3MvdXNlLXNsYXRlLXN0YXRpYydcbmltcG9ydCB7IElTX0FORFJPSUQgfSBmcm9tICcuLi8uLi91dGlscy9lbnZpcm9ubWVudCdcbmltcG9ydCB7XG4gIGNyZWF0ZVJlc3RvcmVEb21NYW5hZ2VyLFxuICBSZXN0b3JlRE9NTWFuYWdlcixcbn0gZnJvbSAnLi9yZXN0b3JlLWRvbS1tYW5hZ2VyJ1xuXG5jb25zdCBNVVRBVElPTl9PQlNFUlZFUl9DT05GSUc6IE11dGF0aW9uT2JzZXJ2ZXJJbml0ID0ge1xuICBzdWJ0cmVlOiB0cnVlLFxuICBjaGlsZExpc3Q6IHRydWUsXG4gIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gIGNoYXJhY3RlckRhdGFPbGRWYWx1ZTogdHJ1ZSxcbn1cblxudHlwZSBSZXN0b3JlRE9NUHJvcHMgPSB7XG4gIHJlY2VpdmVkVXNlcklucHV0OiBSZWZPYmplY3Q8Ym9vbGVhbj5cbiAgbm9kZTogUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50PlxufVxuXG4vLyBXZSBoYXZlIHRvIHVzZSBhIGNsYXNzIGNvbXBvbmVudCBoZXJlIHNpbmNlIHdlIHJlbHkgb24gYGdldFNuYXBzaG90QmVmb3JlVXBkYXRlYCB3aGljaCBoYXMgbm8gRkMgZXF1aXZhbGVudFxuLy8gdG8gcnVuIGNvZGUgc3luY2hyb25vdXNseSBpbW1lZGlhdGVseSBiZWZvcmUgcmVhY3QgY29tbWl0cyB0aGUgY29tcG9uZW50IHVwZGF0ZSB0byB0aGUgRE9NLlxuY2xhc3MgUmVzdG9yZURPTUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudDxSZXN0b3JlRE9NUHJvcHM+IHtcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gRWRpdG9yQ29udGV4dFxuICBjb250ZXh0OiBDb250ZXh0VHlwZTx0eXBlb2YgRWRpdG9yQ29udGV4dD4gPSBudWxsXG5cbiAgcHJpdmF0ZSBtYW5hZ2VyOiBSZXN0b3JlRE9NTWFuYWdlciB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgbXV0YXRpb25PYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsXG5cbiAgb2JzZXJ2ZSgpIHtcbiAgICBjb25zdCB7IG5vZGUgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAoIW5vZGUuY3VycmVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gYXR0YWNoIE11dGF0aW9uT2JzZXJ2ZXIsIGBub2RlYCBpcyB1bmRlZmluZWQnKVxuICAgIH1cblxuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlcj8ub2JzZXJ2ZShub2RlLmN1cnJlbnQsIE1VVEFUSU9OX09CU0VSVkVSX0NPTkZJRylcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IHsgcmVjZWl2ZWRVc2VySW5wdXQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBlZGl0b3IgPSB0aGlzLmNvbnRleHQhXG5cbiAgICB0aGlzLm1hbmFnZXIgPSBjcmVhdGVSZXN0b3JlRG9tTWFuYWdlcihlZGl0b3IsIHJlY2VpdmVkVXNlcklucHV0KVxuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMubWFuYWdlci5yZWdpc3Rlck11dGF0aW9ucylcblxuICAgIHRoaXMub2JzZXJ2ZSgpXG4gIH1cblxuICBnZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSgpIHtcbiAgICBjb25zdCBwZW5kaW5nTXV0YXRpb25zID0gdGhpcy5tdXRhdGlvbk9ic2VydmVyPy50YWtlUmVjb3JkcygpXG4gICAgaWYgKHBlbmRpbmdNdXRhdGlvbnM/Lmxlbmd0aCkge1xuICAgICAgdGhpcy5tYW5hZ2VyPy5yZWdpc3Rlck11dGF0aW9ucyhwZW5kaW5nTXV0YXRpb25zKVxuICAgIH1cblxuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlcj8uZGlzY29ubmVjdCgpXG4gICAgdGhpcy5tYW5hZ2VyPy5yZXN0b3JlRE9NKClcblxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgdGhpcy5tYW5hZ2VyPy5jbGVhcigpXG4gICAgdGhpcy5vYnNlcnZlKClcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlcj8uZGlzY29ubmVjdCgpXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgUmVzdG9yZURPTTogQ29tcG9uZW50VHlwZTxSZXN0b3JlRE9NUHJvcHM+ID0gSVNfQU5EUk9JRFxuICA/IFJlc3RvcmVET01Db21wb25lbnRcbiAgOiAoeyBjaGlsZHJlbiB9KSA9PiA8PntjaGlsZHJlbn08Lz5cbiIsICJpbXBvcnQge1xuICBFZGl0b3IsXG4gIE5vZGUsXG4gIE9wZXJhdGlvbixcbiAgUGF0aCxcbiAgUG9pbnQsXG4gIFJhbmdlLFxuICBUZXh0LFxuICBFbGVtZW50LFxufSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IEVESVRPUl9UT19QRU5ESU5HX0RJRkZTIH0gZnJvbSAnLi93ZWFrLW1hcHMnXG5cbmV4cG9ydCB0eXBlIFN0cmluZ0RpZmYgPSB7XG4gIHN0YXJ0OiBudW1iZXJcbiAgZW5kOiBudW1iZXJcbiAgdGV4dDogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIFRleHREaWZmID0ge1xuICBpZDogbnVtYmVyXG4gIHBhdGg6IFBhdGhcbiAgZGlmZjogU3RyaW5nRGlmZlxufVxuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgYSB0ZXh0IGRpZmYgd2FzIGFwcGxpZWQgaW4gYSB3YXkgd2UgY2FuIHBlcmZvcm0gdGhlIHBlbmRpbmcgYWN0aW9uIG9uIC9cbiAqIHJlY292ZXIgdGhlIHBlbmRpbmcgc2VsZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5RGlmZlN0YXRlKGVkaXRvcjogRWRpdG9yLCB0ZXh0RGlmZjogVGV4dERpZmYpOiBib29sZWFuIHtcbiAgY29uc3QgeyBwYXRoLCBkaWZmIH0gPSB0ZXh0RGlmZlxuICBpZiAoIUVkaXRvci5oYXNQYXRoKGVkaXRvciwgcGF0aCkpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGNvbnN0IG5vZGUgPSBOb2RlLmdldChlZGl0b3IsIHBhdGgpXG4gIGlmICghVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGlmIChkaWZmLnN0YXJ0ICE9PSBub2RlLnRleHQubGVuZ3RoIHx8IGRpZmYudGV4dC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gKFxuICAgICAgbm9kZS50ZXh0LnNsaWNlKGRpZmYuc3RhcnQsIGRpZmYuc3RhcnQgKyBkaWZmLnRleHQubGVuZ3RoKSA9PT0gZGlmZi50ZXh0XG4gICAgKVxuICB9XG5cbiAgY29uc3QgbmV4dFBhdGggPSBQYXRoLm5leHQocGF0aClcbiAgaWYgKCFFZGl0b3IuaGFzUGF0aChlZGl0b3IsIG5leHRQYXRoKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgY29uc3QgbmV4dE5vZGUgPSBOb2RlLmdldChlZGl0b3IsIG5leHRQYXRoKVxuICByZXR1cm4gVGV4dC5pc1RleHQobmV4dE5vZGUpICYmIG5leHROb2RlLnRleHQuc3RhcnRzV2l0aChkaWZmLnRleHQpXG59XG5cbmZ1bmN0aW9uIGFwcGx5U3RyaW5nRGlmZih0ZXh0OiBzdHJpbmcsIC4uLmRpZmZzOiBTdHJpbmdEaWZmW10pIHtcbiAgcmV0dXJuIGRpZmZzLnJlZHVjZShcbiAgICAodGV4dCwgZGlmZikgPT5cbiAgICAgIHRleHQuc2xpY2UoMCwgZGlmZi5zdGFydCkgKyBkaWZmLnRleHQgKyB0ZXh0LnNsaWNlKGRpZmYuZW5kKSxcbiAgICB0ZXh0XG4gIClcbn1cblxuZnVuY3Rpb24gbG9uZ2VzdENvbW1vblByZWZpeExlbmd0aChzdHI6IHN0cmluZywgYW5vdGhlcjogc3RyaW5nKSB7XG4gIGNvbnN0IGxlbmd0aCA9IE1hdGgubWluKHN0ci5sZW5ndGgsIGFub3RoZXIubGVuZ3RoKVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3RyLmNoYXJBdChpKSAhPT0gYW5vdGhlci5jaGFyQXQoaSkpIHtcbiAgICAgIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGxlbmd0aFxufVxuXG5mdW5jdGlvbiBsb25nZXN0Q29tbW9uU3VmZml4TGVuZ3RoKFxuICBzdHI6IHN0cmluZyxcbiAgYW5vdGhlcjogc3RyaW5nLFxuICBtYXg6IG51bWJlclxuKTogbnVtYmVyIHtcbiAgY29uc3QgbGVuZ3RoID0gTWF0aC5taW4oc3RyLmxlbmd0aCwgYW5vdGhlci5sZW5ndGgsIG1heClcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKFxuICAgICAgc3RyLmNoYXJBdChzdHIubGVuZ3RoIC0gaSAtIDEpICE9PSBhbm90aGVyLmNoYXJBdChhbm90aGVyLmxlbmd0aCAtIGkgLSAxKVxuICAgICkge1xuICAgICAgcmV0dXJuIGlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbGVuZ3RoXG59XG5cbi8qKlxuICogUmVtb3ZlIHJlZHVuZGFudCBjaGFuZ2VzIGZyb20gdGhlIGRpZmYgc28gdGhhdCBpdCBzcGFucyB0aGUgbWluaW1hbCBwb3NzaWJsZSByYW5nZVxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplU3RyaW5nRGlmZih0YXJnZXRUZXh0OiBzdHJpbmcsIGRpZmY6IFN0cmluZ0RpZmYpIHtcbiAgY29uc3QgeyBzdGFydCwgZW5kLCB0ZXh0IH0gPSBkaWZmXG4gIGNvbnN0IHJlbW92ZWRUZXh0ID0gdGFyZ2V0VGV4dC5zbGljZShzdGFydCwgZW5kKVxuXG4gIGNvbnN0IHByZWZpeExlbmd0aCA9IGxvbmdlc3RDb21tb25QcmVmaXhMZW5ndGgocmVtb3ZlZFRleHQsIHRleHQpXG4gIGNvbnN0IG1heCA9IE1hdGgubWluKFxuICAgIHJlbW92ZWRUZXh0Lmxlbmd0aCAtIHByZWZpeExlbmd0aCxcbiAgICB0ZXh0Lmxlbmd0aCAtIHByZWZpeExlbmd0aFxuICApXG4gIGNvbnN0IHN1ZmZpeExlbmd0aCA9IGxvbmdlc3RDb21tb25TdWZmaXhMZW5ndGgocmVtb3ZlZFRleHQsIHRleHQsIG1heClcblxuICBjb25zdCBub3JtYWxpemVkOiBTdHJpbmdEaWZmID0ge1xuICAgIHN0YXJ0OiBzdGFydCArIHByZWZpeExlbmd0aCxcbiAgICBlbmQ6IGVuZCAtIHN1ZmZpeExlbmd0aCxcbiAgICB0ZXh0OiB0ZXh0LnNsaWNlKHByZWZpeExlbmd0aCwgdGV4dC5sZW5ndGggLSBzdWZmaXhMZW5ndGgpLFxuICB9XG5cbiAgaWYgKG5vcm1hbGl6ZWQuc3RhcnQgPT09IG5vcm1hbGl6ZWQuZW5kICYmIG5vcm1hbGl6ZWQudGV4dC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcmV0dXJuIG5vcm1hbGl6ZWRcbn1cblxuLyoqXG4gKiBSZXR1cm4gYSBzdHJpbmcgZGlmZiB0aGF0IGlzIGVxdWl2YWxlbnQgdG8gYXBwbHlpbmcgYiBhZnRlciBhIHNwYW5uaW5nIHRoZSByYW5nZSBvZlxuICogYm90aCBjaGFuZ2VzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVN0cmluZ0RpZmZzKFxuICB0YXJnZXRUZXh0OiBzdHJpbmcsXG4gIGE6IFN0cmluZ0RpZmYsXG4gIGI6IFN0cmluZ0RpZmZcbik6IFN0cmluZ0RpZmYgfCBudWxsIHtcbiAgY29uc3Qgc3RhcnQgPSBNYXRoLm1pbihhLnN0YXJ0LCBiLnN0YXJ0KVxuICBjb25zdCBvdmVybGFwID0gTWF0aC5tYXgoXG4gICAgMCxcbiAgICBNYXRoLm1pbihhLnN0YXJ0ICsgYS50ZXh0Lmxlbmd0aCwgYi5lbmQpIC0gYi5zdGFydFxuICApXG5cbiAgY29uc3QgYXBwbGllZCA9IGFwcGx5U3RyaW5nRGlmZih0YXJnZXRUZXh0LCBhLCBiKVxuICBjb25zdCBzbGljZUVuZCA9IE1hdGgubWF4KFxuICAgIGIuc3RhcnQgKyBiLnRleHQubGVuZ3RoLFxuICAgIGEuc3RhcnQgK1xuICAgICAgYS50ZXh0Lmxlbmd0aCArXG4gICAgICAoYS5zdGFydCArIGEudGV4dC5sZW5ndGggPiBiLnN0YXJ0ID8gYi50ZXh0Lmxlbmd0aCA6IDApIC1cbiAgICAgIG92ZXJsYXBcbiAgKVxuXG4gIGNvbnN0IHRleHQgPSBhcHBsaWVkLnNsaWNlKHN0YXJ0LCBzbGljZUVuZClcbiAgY29uc3QgZW5kID0gTWF0aC5tYXgoYS5lbmQsIGIuZW5kIC0gYS50ZXh0Lmxlbmd0aCArIChhLmVuZCAtIGEuc3RhcnQpKVxuICByZXR1cm4gbm9ybWFsaXplU3RyaW5nRGlmZih0YXJnZXRUZXh0LCB7IHN0YXJ0LCBlbmQsIHRleHQgfSlcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHNsYXRlIHJhbmdlIHRoZSB0ZXh0IGRpZmYgc3BhbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0YXJnZXRSYW5nZSh0ZXh0RGlmZjogVGV4dERpZmYpOiBSYW5nZSB7XG4gIGNvbnN0IHsgcGF0aCwgZGlmZiB9ID0gdGV4dERpZmZcbiAgcmV0dXJuIHtcbiAgICBhbmNob3I6IHsgcGF0aCwgb2Zmc2V0OiBkaWZmLnN0YXJ0IH0sXG4gICAgZm9jdXM6IHsgcGF0aCwgb2Zmc2V0OiBkaWZmLmVuZCB9LFxuICB9XG59XG5cbi8qKlxuICogTm9ybWFsaXplIGEgJ3BlbmRpbmcgcG9pbnQnIGEuay5hIGEgcG9pbnQgYmFzZWQgb24gdGhlIGRvbSBzdGF0ZSBiZWZvcmUgYXBwbHlpbmdcbiAqIHRoZSBwZW5kaW5nIGRpZmZzLiBTaW5jZSB0aGUgcGVuZGluZyBkaWZmcyBtaWdodCBoYXZlIGJlZW4gaW5zZXJ0ZWQgd2l0aCBkaWZmZXJlbnRcbiAqIG1hcmtzIHdlIGhhdmUgdG8gJ3dhbGsnIHRoZSBvZmZzZXQgZnJvbSB0aGUgc3RhcnRpbmcgcG9zaXRpb24gdG8gZW5zdXJlIHdlIHN0aWxsXG4gKiBoYXZlIGEgdmFsaWQgcG9pbnQgaW5zaWRlIHRoZSBkb2N1bWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUG9pbnQoZWRpdG9yOiBFZGl0b3IsIHBvaW50OiBQb2ludCk6IFBvaW50IHwgbnVsbCB7XG4gIGxldCB7IHBhdGgsIG9mZnNldCB9ID0gcG9pbnRcbiAgaWYgKCFFZGl0b3IuaGFzUGF0aChlZGl0b3IsIHBhdGgpKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGxldCBsZWFmID0gTm9kZS5nZXQoZWRpdG9yLCBwYXRoKVxuICBpZiAoIVRleHQuaXNUZXh0KGxlYWYpKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbnN0IHBhcmVudEJsb2NrID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbiksXG4gICAgYXQ6IHBhdGgsXG4gIH0pXG5cbiAgaWYgKCFwYXJlbnRCbG9jaykge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICB3aGlsZSAob2Zmc2V0ID4gbGVhZi50ZXh0Lmxlbmd0aCkge1xuICAgIGNvbnN0IGVudHJ5ID0gRWRpdG9yLm5leHQoZWRpdG9yLCB7IGF0OiBwYXRoLCBtYXRjaDogVGV4dC5pc1RleHQgfSlcbiAgICBpZiAoIWVudHJ5IHx8ICFQYXRoLmlzRGVzY2VuZGFudChlbnRyeVsxXSwgcGFyZW50QmxvY2tbMV0pKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIG9mZnNldCAtPSBsZWFmLnRleHQubGVuZ3RoXG4gICAgbGVhZiA9IGVudHJ5WzBdXG4gICAgcGF0aCA9IGVudHJ5WzFdXG4gIH1cblxuICByZXR1cm4geyBwYXRoLCBvZmZzZXQgfVxufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSBhICdwZW5kaW5nIHNlbGVjdGlvbicgdG8gZW5zdXJlIGl0J3MgdmFsaWQgaW4gdGhlIGN1cnJlbnQgZG9jdW1lbnQgc3RhdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVSYW5nZShlZGl0b3I6IEVkaXRvciwgcmFuZ2U6IFJhbmdlKTogUmFuZ2UgfCBudWxsIHtcbiAgY29uc3QgYW5jaG9yID0gbm9ybWFsaXplUG9pbnQoZWRpdG9yLCByYW5nZS5hbmNob3IpXG4gIGlmICghYW5jaG9yKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGlmIChSYW5nZS5pc0NvbGxhcHNlZChyYW5nZSkpIHtcbiAgICByZXR1cm4geyBhbmNob3IsIGZvY3VzOiBhbmNob3IgfVxuICB9XG5cbiAgY29uc3QgZm9jdXMgPSBub3JtYWxpemVQb2ludChlZGl0b3IsIHJhbmdlLmZvY3VzKVxuICBpZiAoIWZvY3VzKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiB7IGFuY2hvciwgZm9jdXMgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtUGVuZGluZ1BvaW50KFxuICBlZGl0b3I6IEVkaXRvcixcbiAgcG9pbnQ6IFBvaW50LFxuICBvcDogT3BlcmF0aW9uXG4pOiBQb2ludCB8IG51bGwge1xuICBjb25zdCBwZW5kaW5nRGlmZnMgPSBFRElUT1JfVE9fUEVORElOR19ESUZGUy5nZXQoZWRpdG9yKVxuICBjb25zdCB0ZXh0RGlmZiA9IHBlbmRpbmdEaWZmcz8uZmluZCgoeyBwYXRoIH0pID0+XG4gICAgUGF0aC5lcXVhbHMocGF0aCwgcG9pbnQucGF0aClcbiAgKVxuXG4gIGlmICghdGV4dERpZmYgfHwgcG9pbnQub2Zmc2V0IDw9IHRleHREaWZmLmRpZmYuc3RhcnQpIHtcbiAgICByZXR1cm4gUG9pbnQudHJhbnNmb3JtKHBvaW50LCBvcCwgeyBhZmZpbml0eTogJ2JhY2t3YXJkJyB9KVxuICB9XG5cbiAgY29uc3QgeyBkaWZmIH0gPSB0ZXh0RGlmZlxuICAvLyBQb2ludCByZWZlcmVuY2VzIGxvY2F0aW9uIGluc2lkZSB0aGUgZGlmZiA9PiB0cmFuc2Zvcm0gdGhlIHBvaW50IGJhc2VkIG9uIHRoZSBsb2NhdGlvblxuICAvLyB0aGUgZGlmZiB3aWxsIGJlIGFwcGxpZWQgdG8gYW5kIGFkZCB0aGUgb2Zmc2V0IGluc2lkZSB0aGUgZGlmZi5cbiAgaWYgKHBvaW50Lm9mZnNldCA8PSBkaWZmLnN0YXJ0ICsgZGlmZi50ZXh0Lmxlbmd0aCkge1xuICAgIGNvbnN0IGFuY2hvciA9IHsgcGF0aDogcG9pbnQucGF0aCwgb2Zmc2V0OiBkaWZmLnN0YXJ0IH1cbiAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IFBvaW50LnRyYW5zZm9ybShhbmNob3IsIG9wLCB7XG4gICAgICBhZmZpbml0eTogJ2JhY2t3YXJkJyxcbiAgICB9KVxuXG4gICAgaWYgKCF0cmFuc2Zvcm1lZCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogdHJhbnNmb3JtZWQucGF0aCxcbiAgICAgIG9mZnNldDogdHJhbnNmb3JtZWQub2Zmc2V0ICsgcG9pbnQub2Zmc2V0IC0gZGlmZi5zdGFydCxcbiAgICB9XG4gIH1cblxuICAvLyBQb2ludCByZWZlcmVuY2VzIGxvY2F0aW9uIGFmdGVyIHRoZSBkaWZmXG4gIGNvbnN0IGFuY2hvciA9IHtcbiAgICBwYXRoOiBwb2ludC5wYXRoLFxuICAgIG9mZnNldDogcG9pbnQub2Zmc2V0IC0gZGlmZi50ZXh0Lmxlbmd0aCArIGRpZmYuZW5kIC0gZGlmZi5zdGFydCxcbiAgfVxuICBjb25zdCB0cmFuc2Zvcm1lZCA9IFBvaW50LnRyYW5zZm9ybShhbmNob3IsIG9wLCB7XG4gICAgYWZmaW5pdHk6ICdiYWNrd2FyZCcsXG4gIH0pXG4gIGlmICghdHJhbnNmb3JtZWQpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgaWYgKFxuICAgIG9wLnR5cGUgPT09ICdzcGxpdF9ub2RlJyAmJlxuICAgIFBhdGguZXF1YWxzKG9wLnBhdGgsIHBvaW50LnBhdGgpICYmXG4gICAgYW5jaG9yLm9mZnNldCA8IG9wLnBvc2l0aW9uICYmXG4gICAgZGlmZi5zdGFydCA8IG9wLnBvc2l0aW9uXG4gICkge1xuICAgIHJldHVybiB0cmFuc2Zvcm1lZFxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwYXRoOiB0cmFuc2Zvcm1lZC5wYXRoLFxuICAgIG9mZnNldDogdHJhbnNmb3JtZWQub2Zmc2V0ICsgZGlmZi50ZXh0Lmxlbmd0aCAtIGRpZmYuZW5kICsgZGlmZi5zdGFydCxcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtUGVuZGluZ1JhbmdlKFxuICBlZGl0b3I6IEVkaXRvcixcbiAgcmFuZ2U6IFJhbmdlLFxuICBvcDogT3BlcmF0aW9uXG4pOiBSYW5nZSB8IG51bGwge1xuICBjb25zdCBhbmNob3IgPSB0cmFuc2Zvcm1QZW5kaW5nUG9pbnQoZWRpdG9yLCByYW5nZS5hbmNob3IsIG9wKVxuICBpZiAoIWFuY2hvcikge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBpZiAoUmFuZ2UuaXNDb2xsYXBzZWQocmFuZ2UpKSB7XG4gICAgcmV0dXJuIHsgYW5jaG9yLCBmb2N1czogYW5jaG9yIH1cbiAgfVxuXG4gIGNvbnN0IGZvY3VzID0gdHJhbnNmb3JtUGVuZGluZ1BvaW50KGVkaXRvciwgcmFuZ2UuZm9jdXMsIG9wKVxuICBpZiAoIWZvY3VzKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiB7IGFuY2hvciwgZm9jdXMgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtVGV4dERpZmYoXG4gIHRleHREaWZmOiBUZXh0RGlmZixcbiAgb3A6IE9wZXJhdGlvblxuKTogVGV4dERpZmYgfCBudWxsIHtcbiAgY29uc3QgeyBwYXRoLCBkaWZmLCBpZCB9ID0gdGV4dERpZmZcblxuICBzd2l0Y2ggKG9wLnR5cGUpIHtcbiAgICBjYXNlICdpbnNlcnRfdGV4dCc6IHtcbiAgICAgIGlmICghUGF0aC5lcXVhbHMob3AucGF0aCwgcGF0aCkgfHwgb3Aub2Zmc2V0ID49IGRpZmYuZW5kKSB7XG4gICAgICAgIHJldHVybiB0ZXh0RGlmZlxuICAgICAgfVxuXG4gICAgICBpZiAob3Aub2Zmc2V0IDw9IGRpZmYuc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkaWZmOiB7XG4gICAgICAgICAgICBzdGFydDogb3AudGV4dC5sZW5ndGggKyBkaWZmLnN0YXJ0LFxuICAgICAgICAgICAgZW5kOiBvcC50ZXh0Lmxlbmd0aCArIGRpZmYuZW5kLFxuICAgICAgICAgICAgdGV4dDogZGlmZi50ZXh0LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkaWZmOiB7XG4gICAgICAgICAgc3RhcnQ6IGRpZmYuc3RhcnQsXG4gICAgICAgICAgZW5kOiBkaWZmLmVuZCArIG9wLnRleHQubGVuZ3RoLFxuICAgICAgICAgIHRleHQ6IGRpZmYudGV4dCxcbiAgICAgICAgfSxcbiAgICAgICAgaWQsXG4gICAgICAgIHBhdGgsXG4gICAgICB9XG4gICAgfVxuICAgIGNhc2UgJ3JlbW92ZV90ZXh0Jzoge1xuICAgICAgaWYgKCFQYXRoLmVxdWFscyhvcC5wYXRoLCBwYXRoKSB8fCBvcC5vZmZzZXQgPj0gZGlmZi5lbmQpIHtcbiAgICAgICAgcmV0dXJuIHRleHREaWZmXG4gICAgICB9XG5cbiAgICAgIGlmIChvcC5vZmZzZXQgKyBvcC50ZXh0Lmxlbmd0aCA8PSBkaWZmLnN0YXJ0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGlmZjoge1xuICAgICAgICAgICAgc3RhcnQ6IGRpZmYuc3RhcnQgLSBvcC50ZXh0Lmxlbmd0aCxcbiAgICAgICAgICAgIGVuZDogZGlmZi5lbmQgLSBvcC50ZXh0Lmxlbmd0aCxcbiAgICAgICAgICAgIHRleHQ6IGRpZmYudGV4dCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGlmZjoge1xuICAgICAgICAgIHN0YXJ0OiBkaWZmLnN0YXJ0LFxuICAgICAgICAgIGVuZDogZGlmZi5lbmQgLSBvcC50ZXh0Lmxlbmd0aCxcbiAgICAgICAgICB0ZXh0OiBkaWZmLnRleHQsXG4gICAgICAgIH0sXG4gICAgICAgIGlkLFxuICAgICAgICBwYXRoLFxuICAgICAgfVxuICAgIH1cbiAgICBjYXNlICdzcGxpdF9ub2RlJzoge1xuICAgICAgaWYgKCFQYXRoLmVxdWFscyhvcC5wYXRoLCBwYXRoKSB8fCBvcC5wb3NpdGlvbiA+PSBkaWZmLmVuZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRpZmYsXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgcGF0aDogUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3AsIHsgYWZmaW5pdHk6ICdiYWNrd2FyZCcgfSkhLFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChvcC5wb3NpdGlvbiA+IGRpZmYuc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkaWZmOiB7XG4gICAgICAgICAgICBzdGFydDogZGlmZi5zdGFydCxcbiAgICAgICAgICAgIGVuZDogTWF0aC5taW4ob3AucG9zaXRpb24sIGRpZmYuZW5kKSxcbiAgICAgICAgICAgIHRleHQ6IGRpZmYudGV4dCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGlmZjoge1xuICAgICAgICAgIHN0YXJ0OiBkaWZmLnN0YXJ0IC0gb3AucG9zaXRpb24sXG4gICAgICAgICAgZW5kOiBkaWZmLmVuZCAtIG9wLnBvc2l0aW9uLFxuICAgICAgICAgIHRleHQ6IGRpZmYudGV4dCxcbiAgICAgICAgfSxcbiAgICAgICAgaWQsXG4gICAgICAgIHBhdGg6IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wLCB7IGFmZmluaXR5OiAnZm9yd2FyZCcgfSkhLFxuICAgICAgfVxuICAgIH1cbiAgICBjYXNlICdtZXJnZV9ub2RlJzoge1xuICAgICAgaWYgKCFQYXRoLmVxdWFscyhvcC5wYXRoLCBwYXRoKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRpZmYsXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgcGF0aDogUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3ApISxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkaWZmOiB7XG4gICAgICAgICAgc3RhcnQ6IGRpZmYuc3RhcnQgKyBvcC5wb3NpdGlvbixcbiAgICAgICAgICBlbmQ6IGRpZmYuZW5kICsgb3AucG9zaXRpb24sXG4gICAgICAgICAgdGV4dDogZGlmZi50ZXh0LFxuICAgICAgICB9LFxuICAgICAgICBpZCxcbiAgICAgICAgcGF0aDogUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3ApISxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBuZXdQYXRoID0gUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3ApXG4gIGlmICghbmV3UGF0aCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGRpZmYsXG4gICAgcGF0aDogbmV3UGF0aCxcbiAgICBpZCxcbiAgfVxufVxuIiwgImltcG9ydCB7IERlYm91bmNlZEZ1bmMgfSBmcm9tICdsb2Rhc2gnXG5pbXBvcnQgeyBFZGl0b3IsIE5vZGUsIFBhdGgsIFBvaW50LCBSYW5nZSwgVGV4dCwgVHJhbnNmb3JtcyB9IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuLi8uLi9wbHVnaW4vcmVhY3QtZWRpdG9yJ1xuaW1wb3J0IHtcbiAgbWVyZ2VTdHJpbmdEaWZmcyxcbiAgbm9ybWFsaXplUG9pbnQsXG4gIG5vcm1hbGl6ZVJhbmdlLFxuICBub3JtYWxpemVTdHJpbmdEaWZmLFxuICBTdHJpbmdEaWZmLFxuICB0YXJnZXRSYW5nZSxcbiAgVGV4dERpZmYsXG4gIHZlcmlmeURpZmZTdGF0ZSxcbn0gZnJvbSAnLi4vLi4vdXRpbHMvZGlmZi10ZXh0J1xuaW1wb3J0IHsgaXNET01TZWxlY3Rpb24sIGlzVHJhY2tlZE11dGF0aW9uIH0gZnJvbSAnLi4vLi4vdXRpbHMvZG9tJ1xuaW1wb3J0IHtcbiAgRURJVE9SX1RPX0ZPUkNFX1JFTkRFUixcbiAgRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OLFxuICBFRElUT1JfVE9fUEVORElOR19ESUZGUyxcbiAgRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLFxuICBFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04sXG4gIEVESVRPUl9UT19QTEFDRUhPTERFUl9FTEVNRU5ULFxuICBFRElUT1JfVE9fVVNFUl9NQVJLUyxcbiAgSVNfQ09NUE9TSU5HLFxufSBmcm9tICcuLi8uLi91dGlscy93ZWFrLW1hcHMnXG5cbmV4cG9ydCB0eXBlIEFjdGlvbiA9IHsgYXQ/OiBQb2ludCB8IFJhbmdlOyBydW46ICgpID0+IHZvaWQgfVxuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZHJhZnQtanMvYmxvYi9tYWluL3NyYy9jb21wb25lbnQvaGFuZGxlcnMvY29tcG9zaXRpb24vRHJhZnRFZGl0b3JDb21wb3NpdGlvbkhhbmRsZXIuanMjTDQxXG4vLyBXaGVuIHVzaW5nIGtleWJvYXJkIEVuZ2xpc2ggYXNzb2NpYXRpb24gZnVuY3Rpb24sIGNvbnBvc2l0aW9uRW5kIHRyaWdnZXJlZCB0b28gZmFzdCwgcmVzdWx0aW5nIGluIGFmdGVyIGBpbnNlcnRUZXh0YCBzdGlsbCBtYWludGFpbiBhc3NvY2lhdGlvbiBzdGF0ZS5cbmNvbnN0IFJFU09MVkVfREVMQVkgPSAyNVxuXG4vLyBUaW1lIHdpdGggbm8gdXNlciBpbnRlcmFjdGlvbiBiZWZvcmUgdGhlIGN1cnJlbnQgdXNlciBhY3Rpb24gaXMgY29uc2lkZXJlZCBhcyBkb25lLlxuY29uc3QgRkxVU0hfREVMQVkgPSAyMDBcblxuLy8gUmVwbGFjZSB3aXRoIGBjb25zdCBkZWJ1ZyA9IGNvbnNvbGUubG9nYCB0byBkZWJ1Z1xuY29uc3QgZGVidWcgPSAoLi4uXzogdW5rbm93bltdKSA9PiB7fVxuXG5leHBvcnQgdHlwZSBDcmVhdGVBbmRyb2lkSW5wdXRNYW5hZ2VyT3B0aW9ucyA9IHtcbiAgZWRpdG9yOiBSZWFjdEVkaXRvclxuXG4gIHNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2U6IERlYm91bmNlZEZ1bmM8KCkgPT4gdm9pZD5cbiAgb25ET01TZWxlY3Rpb25DaGFuZ2U6IERlYm91bmNlZEZ1bmM8KCkgPT4gdm9pZD5cbn1cblxuZXhwb3J0IHR5cGUgQW5kcm9pZElucHV0TWFuYWdlciA9IHtcbiAgZmx1c2g6ICgpID0+IHZvaWRcbiAgc2NoZWR1bGVGbHVzaDogKCkgPT4gdm9pZFxuXG4gIGhhc1BlbmRpbmdEaWZmczogKCkgPT4gYm9vbGVhblxuICBoYXNQZW5kaW5nQWN0aW9uOiAoKSA9PiBib29sZWFuXG4gIGhhc1BlbmRpbmdDaGFuZ2VzOiAoKSA9PiBib29sZWFuXG4gIGlzRmx1c2hpbmc6ICgpID0+IGJvb2xlYW4gfCAnYWN0aW9uJ1xuXG4gIGhhbmRsZVVzZXJTZWxlY3Q6IChyYW5nZTogUmFuZ2UgfCBudWxsKSA9PiB2b2lkXG4gIGhhbmRsZUNvbXBvc2l0aW9uRW5kOiAoZXZlbnQ6IFJlYWN0LkNvbXBvc2l0aW9uRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB2b2lkXG4gIGhhbmRsZUNvbXBvc2l0aW9uU3RhcnQ6IChcbiAgICBldmVudDogUmVhY3QuQ29tcG9zaXRpb25FdmVudDxIVE1MRGl2RWxlbWVudD5cbiAgKSA9PiB2b2lkXG4gIGhhbmRsZURPTUJlZm9yZUlucHV0OiAoZXZlbnQ6IElucHV0RXZlbnQpID0+IHZvaWRcbiAgaGFuZGxlS2V5RG93bjogKGV2ZW50OiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4gdm9pZFxuXG4gIGhhbmRsZURvbU11dGF0aW9uczogKG11dGF0aW9uczogTXV0YXRpb25SZWNvcmRbXSkgPT4gdm9pZFxuICBoYW5kbGVJbnB1dDogKCkgPT4gdm9pZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQW5kcm9pZElucHV0TWFuYWdlcih7XG4gIGVkaXRvcixcbiAgc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZSxcbiAgb25ET01TZWxlY3Rpb25DaGFuZ2UsXG59OiBDcmVhdGVBbmRyb2lkSW5wdXRNYW5hZ2VyT3B0aW9ucyk6IEFuZHJvaWRJbnB1dE1hbmFnZXIge1xuICBsZXQgZmx1c2hpbmc6ICdhY3Rpb24nIHwgYm9vbGVhbiA9IGZhbHNlXG4gIGxldCBjb21wb3NpdGlvbkVuZFRpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbFxuICBsZXQgZmx1c2hUaW1lb3V0SWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbCA9IG51bGxcbiAgbGV0IGFjdGlvblRpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbFxuXG4gIGxldCBpZENvdW50ZXIgPSAwXG4gIGxldCBpbnNlcnRQb3NpdGlvbkhpbnQ6IFN0cmluZ0RpZmYgfCBudWxsIHwgZmFsc2UgPSBmYWxzZVxuXG4gIGNvbnN0IGFwcGx5UGVuZGluZ1NlbGVjdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCBwZW5kaW5nU2VsZWN0aW9uID0gRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OLmdldChlZGl0b3IpXG4gICAgRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OLmRlbGV0ZShlZGl0b3IpXG5cbiAgICBpZiAocGVuZGluZ1NlbGVjdGlvbikge1xuICAgICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVJhbmdlKGVkaXRvciwgcGVuZGluZ1NlbGVjdGlvbilcblxuICAgICAgZGVidWcoJ2FwcGx5IHBlbmRpbmcgc2VsZWN0aW9uJywgcGVuZGluZ1NlbGVjdGlvbiwgbm9ybWFsaXplZClcblxuICAgICAgaWYgKG5vcm1hbGl6ZWQgJiYgKCFzZWxlY3Rpb24gfHwgIVJhbmdlLmVxdWFscyhub3JtYWxpemVkLCBzZWxlY3Rpb24pKSkge1xuICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIG5vcm1hbGl6ZWQpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcGVyZm9ybUFjdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCBhY3Rpb24gPSBFRElUT1JfVE9fUEVORElOR19BQ1RJT04uZ2V0KGVkaXRvcilcbiAgICBFRElUT1JfVE9fUEVORElOR19BQ1RJT04uZGVsZXRlKGVkaXRvcilcbiAgICBpZiAoIWFjdGlvbikge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGFjdGlvbi5hdCkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gUG9pbnQuaXNQb2ludChhY3Rpb24uYXQpXG4gICAgICAgID8gbm9ybWFsaXplUG9pbnQoZWRpdG9yLCBhY3Rpb24uYXQpXG4gICAgICAgIDogbm9ybWFsaXplUmFuZ2UoZWRpdG9yLCBhY3Rpb24uYXQpXG5cbiAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCB0YXJnZXRSYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIHRhcmdldClcbiAgICAgIGlmICghZWRpdG9yLnNlbGVjdGlvbiB8fCAhUmFuZ2UuZXF1YWxzKGVkaXRvci5zZWxlY3Rpb24sIHRhcmdldFJhbmdlKSkge1xuICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHRhcmdldClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhY3Rpb24ucnVuKClcbiAgfVxuXG4gIGNvbnN0IGZsdXNoID0gKCkgPT4ge1xuICAgIGlmIChmbHVzaFRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGZsdXNoVGltZW91dElkKVxuICAgICAgZmx1c2hUaW1lb3V0SWQgPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKGFjdGlvblRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGFjdGlvblRpbWVvdXRJZClcbiAgICAgIGFjdGlvblRpbWVvdXRJZCA9IG51bGxcbiAgICB9XG5cbiAgICBpZiAoIWhhc1BlbmRpbmdEaWZmcygpICYmICFoYXNQZW5kaW5nQWN0aW9uKCkpIHtcbiAgICAgIGFwcGx5UGVuZGluZ1NlbGVjdGlvbigpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIWZsdXNoaW5nKSB7XG4gICAgICBmbHVzaGluZyA9IHRydWVcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gKGZsdXNoaW5nID0gZmFsc2UpKVxuICAgIH1cblxuICAgIGlmIChoYXNQZW5kaW5nQWN0aW9uKCkpIHtcbiAgICAgIGZsdXNoaW5nID0gJ2FjdGlvbidcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3Rpb25SZWYgPVxuICAgICAgZWRpdG9yLnNlbGVjdGlvbiAmJlxuICAgICAgRWRpdG9yLnJhbmdlUmVmKGVkaXRvciwgZWRpdG9yLnNlbGVjdGlvbiwgeyBhZmZpbml0eTogJ2ZvcndhcmQnIH0pXG4gICAgRURJVE9SX1RPX1VTRVJfTUFSS1Muc2V0KGVkaXRvciwgZWRpdG9yLm1hcmtzKVxuXG4gICAgZGVidWcoXG4gICAgICAnZmx1c2gnLFxuICAgICAgRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OLmdldChlZGl0b3IpLFxuICAgICAgRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuZ2V0KGVkaXRvcilcbiAgICApXG5cbiAgICBsZXQgc2NoZWR1bGVTZWxlY3Rpb25DaGFuZ2UgPSAhIUVESVRPUl9UT19QRU5ESU5HX0RJRkZTLmdldChlZGl0b3IpPy5sZW5ndGhcblxuICAgIGxldCBkaWZmOiBUZXh0RGlmZiB8IHVuZGVmaW5lZFxuICAgIHdoaWxlICgoZGlmZiA9IEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLmdldChlZGl0b3IpPy5bMF0pKSB7XG4gICAgICBjb25zdCBwZW5kaW5nTWFya3MgPSBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MuZ2V0KGVkaXRvcilcblxuICAgICAgaWYgKHBlbmRpbmdNYXJrcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUy5kZWxldGUoZWRpdG9yKVxuICAgICAgICBlZGl0b3IubWFya3MgPSBwZW5kaW5nTWFya3NcbiAgICAgIH1cblxuICAgICAgaWYgKHBlbmRpbmdNYXJrcyAmJiBpbnNlcnRQb3NpdGlvbkhpbnQgPT09IGZhbHNlKSB7XG4gICAgICAgIGluc2VydFBvc2l0aW9uSGludCA9IG51bGxcbiAgICAgICAgZGVidWcoJ2luc2VydCBhZnRlciBtYXJrIHBsYWNlaG9sZGVyJylcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmFuZ2UgPSB0YXJnZXRSYW5nZShkaWZmKVxuICAgICAgaWYgKCFlZGl0b3Iuc2VsZWN0aW9uIHx8ICFSYW5nZS5lcXVhbHMoZWRpdG9yLnNlbGVjdGlvbiwgcmFuZ2UpKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgcmFuZ2UpXG4gICAgICB9XG5cbiAgICAgIGlmIChkaWZmLmRpZmYudGV4dCkge1xuICAgICAgICBFZGl0b3IuaW5zZXJ0VGV4dChlZGl0b3IsIGRpZmYuZGlmZi50ZXh0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvcilcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGRpZmYgb25seSBhZnRlciB3ZSBoYXZlIGFwcGxpZWQgaXQgdG8gYWNjb3VudCBmb3IgaXQgd2hlbiB0cmFuc2Zvcm1pbmdcbiAgICAgIC8vIHBlbmRpbmcgcmFuZ2VzLlxuICAgICAgRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuc2V0KFxuICAgICAgICBlZGl0b3IsXG4gICAgICAgIEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLmdldChlZGl0b3IpPy5maWx0ZXIoXG4gICAgICAgICAgKHsgaWQgfSkgPT4gaWQgIT09IGRpZmYhLmlkXG4gICAgICAgICkhXG4gICAgICApXG5cbiAgICAgIGlmICghdmVyaWZ5RGlmZlN0YXRlKGVkaXRvciwgZGlmZikpIHtcbiAgICAgICAgZGVidWcoJ2ludmFsaWQgZGlmZiBzdGF0ZScpXG4gICAgICAgIHNjaGVkdWxlU2VsZWN0aW9uQ2hhbmdlID0gZmFsc2VcbiAgICAgICAgRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OLmRlbGV0ZShlZGl0b3IpXG4gICAgICAgIEVESVRPUl9UT19VU0VSX01BUktTLmRlbGV0ZShlZGl0b3IpXG4gICAgICAgIGZsdXNoaW5nID0gJ2FjdGlvbidcblxuICAgICAgICAvLyBFbnN1cmUgd2UgZG9uJ3QgcmVzdG9yZSB0aGUgcGVuZGluZyB1c2VyIChkb20pIHNlbGVjdGlvblxuICAgICAgICAvLyBzaW5jZSB0aGUgZG9jdW1lbnQgYW5kIGRvbSBzdGF0ZSBkbyBub3QgbWF0Y2guXG4gICAgICAgIEVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTi5kZWxldGUoZWRpdG9yKVxuICAgICAgICBzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlLmNhbmNlbCgpXG4gICAgICAgIG9uRE9NU2VsZWN0aW9uQ2hhbmdlLmNhbmNlbCgpXG4gICAgICAgIHNlbGVjdGlvblJlZj8udW5yZWYoKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGlvbiA9IHNlbGVjdGlvblJlZj8udW5yZWYoKVxuICAgIGlmIChcbiAgICAgIHNlbGVjdGlvbiAmJlxuICAgICAgIUVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTi5nZXQoZWRpdG9yKSAmJlxuICAgICAgKCFlZGl0b3Iuc2VsZWN0aW9uIHx8ICFSYW5nZS5lcXVhbHMoc2VsZWN0aW9uLCBlZGl0b3Iuc2VsZWN0aW9uKSlcbiAgICApIHtcbiAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgc2VsZWN0aW9uKVxuICAgIH1cblxuICAgIGlmIChoYXNQZW5kaW5nQWN0aW9uKCkpIHtcbiAgICAgIHBlcmZvcm1BY3Rpb24oKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gQ09NUEFUOiBUaGUgc2VsZWN0aW9uQ2hhbmdlIGV2ZW50IGlzIGZpcmVkIGFmdGVyIHRoZSBhY3Rpb24gaXMgcGVyZm9ybWVkLFxuICAgIC8vIHNvIHdlIGhhdmUgdG8gbWFudWFsbHkgc2NoZWR1bGUgaXQgdG8gZW5zdXJlIHdlIGRvbid0ICd0aHJvdyBhd2F5JyB0aGUgc2VsZWN0aW9uXG4gICAgLy8gd2hpbGUgcmVuZGVyaW5nIGlmIHdlIGhhdmUgcGVuZGluZyBjaGFuZ2VzLlxuICAgIGlmIChzY2hlZHVsZVNlbGVjdGlvbkNoYW5nZSkge1xuICAgICAgZGVidWcoJ3NjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2UgcGVuZGluZyBjaGFuZ2VzJylcbiAgICAgIHNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2UoKVxuICAgIH1cblxuICAgIHNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2UuZmx1c2goKVxuICAgIG9uRE9NU2VsZWN0aW9uQ2hhbmdlLmZsdXNoKClcblxuICAgIGFwcGx5UGVuZGluZ1NlbGVjdGlvbigpXG5cbiAgICBjb25zdCB1c2VyTWFya3MgPSBFRElUT1JfVE9fVVNFUl9NQVJLUy5nZXQoZWRpdG9yKVxuICAgIEVESVRPUl9UT19VU0VSX01BUktTLmRlbGV0ZShlZGl0b3IpXG4gICAgaWYgKHVzZXJNYXJrcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBlZGl0b3IubWFya3MgPSB1c2VyTWFya3NcbiAgICAgIGVkaXRvci5vbkNoYW5nZSgpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlQ29tcG9zaXRpb25FbmQgPSAoXG4gICAgX2V2ZW50OiBSZWFjdC5Db21wb3NpdGlvbkV2ZW50PEhUTUxEaXZFbGVtZW50PlxuICApID0+IHtcbiAgICBpZiAoY29tcG9zaXRpb25FbmRUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChjb21wb3NpdGlvbkVuZFRpbWVvdXRJZClcbiAgICB9XG5cbiAgICBjb21wb3NpdGlvbkVuZFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgSVNfQ09NUE9TSU5HLnNldChlZGl0b3IsIGZhbHNlKVxuICAgICAgZmx1c2goKVxuICAgIH0sIFJFU09MVkVfREVMQVkpXG4gIH1cblxuICBjb25zdCBoYW5kbGVDb21wb3NpdGlvblN0YXJ0ID0gKFxuICAgIF9ldmVudDogUmVhY3QuQ29tcG9zaXRpb25FdmVudDxIVE1MRGl2RWxlbWVudD5cbiAgKSA9PiB7XG4gICAgZGVidWcoJ2NvbXBvc2l0aW9uIHN0YXJ0JylcblxuICAgIElTX0NPTVBPU0lORy5zZXQoZWRpdG9yLCB0cnVlKVxuXG4gICAgaWYgKGNvbXBvc2l0aW9uRW5kVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQoY29tcG9zaXRpb25FbmRUaW1lb3V0SWQpXG4gICAgICBjb21wb3NpdGlvbkVuZFRpbWVvdXRJZCA9IG51bGxcbiAgICB9XG4gIH1cblxuICBjb25zdCB1cGRhdGVQbGFjZWhvbGRlclZpc2liaWxpdHkgPSAoZm9yY2VIaWRlID0gZmFsc2UpID0+IHtcbiAgICBjb25zdCBwbGFjZWhvbGRlckVsZW1lbnQgPSBFRElUT1JfVE9fUExBQ0VIT0xERVJfRUxFTUVOVC5nZXQoZWRpdG9yKVxuICAgIGlmICghcGxhY2Vob2xkZXJFbGVtZW50KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoaGFzUGVuZGluZ0RpZmZzKCkgfHwgZm9yY2VIaWRlKSB7XG4gICAgICBwbGFjZWhvbGRlckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgcGxhY2Vob2xkZXJFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5JylcbiAgfVxuXG4gIGNvbnN0IHN0b3JlRGlmZiA9IChwYXRoOiBQYXRoLCBkaWZmOiBTdHJpbmdEaWZmKSA9PiB7XG4gICAgZGVidWcoJ3N0b3JlRGlmZicsIHBhdGgsIGRpZmYpXG5cbiAgICBjb25zdCBwZW5kaW5nRGlmZnMgPSBFRElUT1JfVE9fUEVORElOR19ESUZGUy5nZXQoZWRpdG9yKSA/PyBbXVxuICAgIEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLnNldChlZGl0b3IsIHBlbmRpbmdEaWZmcylcblxuICAgIGNvbnN0IHRhcmdldCA9IE5vZGUubGVhZihlZGl0b3IsIHBhdGgpXG4gICAgY29uc3QgaWR4ID0gcGVuZGluZ0RpZmZzLmZpbmRJbmRleChjaGFuZ2UgPT4gUGF0aC5lcXVhbHMoY2hhbmdlLnBhdGgsIHBhdGgpKVxuICAgIGlmIChpZHggPCAwKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU3RyaW5nRGlmZih0YXJnZXQudGV4dCwgZGlmZilcbiAgICAgIGlmIChub3JtYWxpemVkKSB7XG4gICAgICAgIHBlbmRpbmdEaWZmcy5wdXNoKHsgcGF0aCwgZGlmZiwgaWQ6IGlkQ291bnRlcisrIH0pXG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZVBsYWNlaG9sZGVyVmlzaWJpbGl0eSgpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBtZXJnZWQgPSBtZXJnZVN0cmluZ0RpZmZzKHRhcmdldC50ZXh0LCBwZW5kaW5nRGlmZnNbaWR4XS5kaWZmLCBkaWZmKVxuICAgIGlmICghbWVyZ2VkKSB7XG4gICAgICBwZW5kaW5nRGlmZnMuc3BsaWNlKGlkeCwgMSlcbiAgICAgIHVwZGF0ZVBsYWNlaG9sZGVyVmlzaWJpbGl0eSgpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBwZW5kaW5nRGlmZnNbaWR4XSA9IHtcbiAgICAgIC4uLnBlbmRpbmdEaWZmc1tpZHhdLFxuICAgICAgZGlmZjogbWVyZ2VkLFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHNjaGVkdWxlQWN0aW9uID0gKFxuICAgIHJ1bjogKCkgPT4gdm9pZCxcbiAgICB7IGF0IH06IHsgYXQ/OiBQb2ludCB8IFJhbmdlIH0gPSB7fVxuICApOiB2b2lkID0+IHtcbiAgICBpbnNlcnRQb3NpdGlvbkhpbnQgPSBmYWxzZVxuICAgIGRlYnVnKCdzY2hlZHVsZUFjdGlvbicsIHsgYXQsIHJ1biB9KVxuXG4gICAgRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OLmRlbGV0ZShlZGl0b3IpXG4gICAgc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZS5jYW5jZWwoKVxuICAgIG9uRE9NU2VsZWN0aW9uQ2hhbmdlLmNhbmNlbCgpXG5cbiAgICBpZiAoaGFzUGVuZGluZ0FjdGlvbigpKSB7XG4gICAgICBmbHVzaCgpXG4gICAgfVxuXG4gICAgRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OLnNldChlZGl0b3IsIHsgYXQsIHJ1biB9KVxuXG4gICAgLy8gQ09NUEFUOiBXaGVuIGRlbGV0aW5nIGJlZm9yZSBhIG5vbi1jb250ZW50ZWRpdGFibGUgZWxlbWVudCBjaHJvbWUgb25seSBmaXJlcyBhIGJlZm9yZWlucHV0LFxuICAgIC8vIChubyBpbnB1dCkgYW5kIGRvZXNuJ3QgcGVyZm9ybSBhbnkgZG9tIG11dGF0aW9ucy4gV2l0aG91dCBhIGZsdXNoIHRpbWVvdXQgd2Ugd291bGQgbmV2ZXIgZmx1c2hcbiAgICAvLyBpbiB0aGlzIGNhc2UgYW5kIHRodXMgbmV2ZXIgYWN0dWFsbHkgcGVyZm9ybSB0aGUgYWN0aW9uLlxuICAgIGFjdGlvblRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZmx1c2gpXG4gIH1cblxuICBjb25zdCBoYW5kbGVET01CZWZvcmVJbnB1dCA9IChldmVudDogSW5wdXRFdmVudCk6IHZvaWQgPT4ge1xuICAgIGlmIChmbHVzaFRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGZsdXNoVGltZW91dElkKVxuICAgICAgZmx1c2hUaW1lb3V0SWQgPSBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgeyBpbnB1dFR5cGU6IHR5cGUgfSA9IGV2ZW50XG4gICAgbGV0IHRhcmdldFJhbmdlOiBSYW5nZSB8IG51bGwgPSBudWxsXG4gICAgY29uc3QgZGF0YSA9IChldmVudCBhcyBhbnkpLmRhdGFUcmFuc2ZlciB8fCBldmVudC5kYXRhIHx8IHVuZGVmaW5lZFxuXG4gICAgaWYgKFxuICAgICAgaW5zZXJ0UG9zaXRpb25IaW50ICE9PSBmYWxzZSAmJlxuICAgICAgdHlwZSAhPT0gJ2luc2VydFRleHQnICYmXG4gICAgICB0eXBlICE9PSAnaW5zZXJ0Q29tcG9zaXRpb25UZXh0J1xuICAgICkge1xuICAgICAgaW5zZXJ0UG9zaXRpb25IaW50ID0gZmFsc2VcbiAgICB9XG5cbiAgICBsZXQgW25hdGl2ZVRhcmdldFJhbmdlXSA9IChldmVudCBhcyBhbnkpLmdldFRhcmdldFJhbmdlcygpXG4gICAgaWYgKG5hdGl2ZVRhcmdldFJhbmdlKSB7XG4gICAgICB0YXJnZXRSYW5nZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVSYW5nZShlZGl0b3IsIG5hdGl2ZVRhcmdldFJhbmdlLCB7XG4gICAgICAgIGV4YWN0TWF0Y2g6IGZhbHNlLFxuICAgICAgICBzdXBwcmVzc1Rocm93OiB0cnVlLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBDT01QQVQ6IFNlbGVjdGlvbkNoYW5nZSBldmVudCBpcyBmaXJlZCBhZnRlciB0aGUgYWN0aW9uIGlzIHBlcmZvcm1lZCwgc28gd2VcbiAgICAvLyBoYXZlIHRvIG1hbnVhbGx5IGdldCB0aGUgc2VsZWN0aW9uIGhlcmUgdG8gZW5zdXJlIGl0J3MgdXAtdG8tZGF0ZS5cbiAgICBjb25zdCB3aW5kb3cgPSBSZWFjdEVkaXRvci5nZXRXaW5kb3coZWRpdG9yKVxuICAgIGNvbnN0IGRvbVNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKVxuICAgIGlmICghdGFyZ2V0UmFuZ2UgJiYgZG9tU2VsZWN0aW9uKSB7XG4gICAgICBuYXRpdmVUYXJnZXRSYW5nZSA9IGRvbVNlbGVjdGlvblxuICAgICAgdGFyZ2V0UmFuZ2UgPSBSZWFjdEVkaXRvci50b1NsYXRlUmFuZ2UoZWRpdG9yLCBkb21TZWxlY3Rpb24sIHtcbiAgICAgICAgZXhhY3RNYXRjaDogZmFsc2UsXG4gICAgICAgIHN1cHByZXNzVGhyb3c6IHRydWUsXG4gICAgICB9KVxuICAgIH1cblxuICAgIHRhcmdldFJhbmdlID0gdGFyZ2V0UmFuZ2UgPz8gZWRpdG9yLnNlbGVjdGlvblxuICAgIGlmICghdGFyZ2V0UmFuZ2UpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChSYW5nZS5pc0V4cGFuZGVkKHRhcmdldFJhbmdlKSAmJiB0eXBlLnN0YXJ0c1dpdGgoJ2RlbGV0ZScpKSB7XG4gICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyh0YXJnZXRSYW5nZSlcbiAgICAgIGNvbnN0IGxlYWYgPSBOb2RlLmxlYWYoZWRpdG9yLCBzdGFydC5wYXRoKVxuXG4gICAgICBpZiAobGVhZi50ZXh0Lmxlbmd0aCA9PT0gc3RhcnQub2Zmc2V0ICYmIGVuZC5vZmZzZXQgPT09IDApIHtcbiAgICAgICAgY29uc3QgbmV4dCA9IEVkaXRvci5uZXh0KGVkaXRvciwgeyBhdDogc3RhcnQucGF0aCwgbWF0Y2g6IFRleHQuaXNUZXh0IH0pXG4gICAgICAgIGlmIChuZXh0ICYmIFBhdGguZXF1YWxzKG5leHRbMV0sIGVuZC5wYXRoKSkge1xuICAgICAgICAgIHRhcmdldFJhbmdlID0geyBhbmNob3I6IGVuZCwgZm9jdXM6IGVuZCB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoUmFuZ2UuaXNFeHBhbmRlZCh0YXJnZXRSYW5nZSkgJiYgdHlwZS5zdGFydHNXaXRoKCdkZWxldGUnKSkge1xuICAgICAgaWYgKFBhdGguZXF1YWxzKHRhcmdldFJhbmdlLmFuY2hvci5wYXRoLCB0YXJnZXRSYW5nZS5mb2N1cy5wYXRoKSkge1xuICAgICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyh0YXJnZXRSYW5nZSlcbiAgICAgICAgcmV0dXJuIHN0b3JlRGlmZih0YXJnZXRSYW5nZS5hbmNob3IucGF0aCwge1xuICAgICAgICAgIHRleHQ6ICcnLFxuICAgICAgICAgIGVuZDogZW5kLm9mZnNldCxcbiAgICAgICAgICBzdGFydDogc3RhcnQub2Zmc2V0LFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSB0eXBlLmVuZHNXaXRoKCdCYWNrd2FyZCcpID8gJ2JhY2t3YXJkJyA6ICdmb3J3YXJkJ1xuICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKFxuICAgICAgICAoKSA9PiBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yLCB7IGRpcmVjdGlvbiB9KSxcbiAgICAgICAgeyBhdDogdGFyZ2V0UmFuZ2UgfVxuICAgICAgKVxuICAgIH1cblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnZGVsZXRlQnlDb21wb3NpdGlvbic6XG4gICAgICBjYXNlICdkZWxldGVCeUN1dCc6XG4gICAgICBjYXNlICdkZWxldGVCeURyYWcnOiB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbigoKSA9PiBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yKSwge1xuICAgICAgICAgIGF0OiB0YXJnZXRSYW5nZSxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlQ29udGVudCc6XG4gICAgICBjYXNlICdkZWxldGVDb250ZW50Rm9yd2FyZCc6IHtcbiAgICAgICAgY29uc3QgeyBhbmNob3IgfSA9IHRhcmdldFJhbmdlXG4gICAgICAgIGlmIChSYW5nZS5pc0NvbGxhcHNlZCh0YXJnZXRSYW5nZSkpIHtcbiAgICAgICAgICBjb25zdCB0YXJnZXROb2RlID0gTm9kZS5sZWFmKGVkaXRvciwgYW5jaG9yLnBhdGgpXG5cbiAgICAgICAgICBpZiAoYW5jaG9yLm9mZnNldCA8IHRhcmdldE5vZGUudGV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdG9yZURpZmYoYW5jaG9yLnBhdGgsIHtcbiAgICAgICAgICAgICAgdGV4dDogJycsXG4gICAgICAgICAgICAgIHN0YXJ0OiBhbmNob3Iub2Zmc2V0LFxuICAgICAgICAgICAgICBlbmQ6IGFuY2hvci5vZmZzZXQgKyAxLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oKCkgPT4gRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yKSwge1xuICAgICAgICAgIGF0OiB0YXJnZXRSYW5nZSxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlQ29udGVudEJhY2t3YXJkJzoge1xuICAgICAgICBjb25zdCB7IGFuY2hvciB9ID0gdGFyZ2V0UmFuZ2VcblxuICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgbWlzbWF0Y2ggYmV0d2VlbiB0aGUgbmF0aXZlIGFuZCBzbGF0ZSBzZWxlY3Rpb24gYmVpbmcgY29sbGFwc2VkXG4gICAgICAgIC8vIHdlIGFyZSBtb3N0IGxpa2VseSBkZWxldGluZyBhIHplcm8td2lkdGggcGxhY2Vob2xkZXIgYW5kIHRodXMgc2hvdWxkIHBlcmZvcm0gaXRcbiAgICAgICAgLy8gYXMgYW4gYWN0aW9uIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yIChtb3N0bHkgaGFwcGVucyB3aXRoIG1hcmsgcGxhY2Vob2xkZXJzKVxuICAgICAgICBjb25zdCBuYXRpdmVDb2xsYXBzZWQgPSBpc0RPTVNlbGVjdGlvbihuYXRpdmVUYXJnZXRSYW5nZSlcbiAgICAgICAgICA/IG5hdGl2ZVRhcmdldFJhbmdlLmlzQ29sbGFwc2VkXG4gICAgICAgICAgOiAhIW5hdGl2ZVRhcmdldFJhbmdlPy5jb2xsYXBzZWRcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgbmF0aXZlQ29sbGFwc2VkICYmXG4gICAgICAgICAgUmFuZ2UuaXNDb2xsYXBzZWQodGFyZ2V0UmFuZ2UpICYmXG4gICAgICAgICAgYW5jaG9yLm9mZnNldCA+IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHN0b3JlRGlmZihhbmNob3IucGF0aCwge1xuICAgICAgICAgICAgdGV4dDogJycsXG4gICAgICAgICAgICBzdGFydDogYW5jaG9yLm9mZnNldCAtIDEsXG4gICAgICAgICAgICBlbmQ6IGFuY2hvci5vZmZzZXQsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbigoKSA9PiBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yKSwge1xuICAgICAgICAgIGF0OiB0YXJnZXRSYW5nZSxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlRW50aXJlU29mdExpbmUnOiB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbihcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJyB9KVxuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJyB9KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBhdDogdGFyZ2V0UmFuZ2UgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZUhhcmRMaW5lQmFja3dhcmQnOiB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbihcbiAgICAgICAgICAoKSA9PiBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yLCB7IHVuaXQ6ICdibG9jaycgfSksXG4gICAgICAgICAgeyBhdDogdGFyZ2V0UmFuZ2UgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZVNvZnRMaW5lQmFja3dhcmQnOiB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbihcbiAgICAgICAgICAoKSA9PiBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJyB9KSxcbiAgICAgICAgICB7IGF0OiB0YXJnZXRSYW5nZSB9XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlSGFyZExpbmVGb3J3YXJkJzoge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oXG4gICAgICAgICAgKCkgPT4gRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yLCB7IHVuaXQ6ICdibG9jaycgfSksXG4gICAgICAgICAgeyBhdDogdGFyZ2V0UmFuZ2UgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZVNvZnRMaW5lRm9yd2FyZCc6IHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKFxuICAgICAgICAgICgpID0+IEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvciwgeyB1bml0OiAnbGluZScgfSksXG4gICAgICAgICAgeyBhdDogdGFyZ2V0UmFuZ2UgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZVdvcmRCYWNrd2FyZCc6IHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKFxuICAgICAgICAgICgpID0+IEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IsIHsgdW5pdDogJ3dvcmQnIH0pLFxuICAgICAgICAgIHsgYXQ6IHRhcmdldFJhbmdlIH1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVXb3JkRm9yd2FyZCc6IHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKFxuICAgICAgICAgICgpID0+IEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvciwgeyB1bml0OiAnd29yZCcgfSksXG4gICAgICAgICAgeyBhdDogdGFyZ2V0UmFuZ2UgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2luc2VydExpbmVCcmVhayc6IHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKCgpID0+IEVkaXRvci5pbnNlcnRTb2Z0QnJlYWsoZWRpdG9yKSwge1xuICAgICAgICAgIGF0OiB0YXJnZXRSYW5nZSxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5zZXJ0UGFyYWdyYXBoJzoge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oKCkgPT4gRWRpdG9yLmluc2VydEJyZWFrKGVkaXRvciksIHtcbiAgICAgICAgICBhdDogdGFyZ2V0UmFuZ2UsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjYXNlICdpbnNlcnRDb21wb3NpdGlvblRleHQnOlxuICAgICAgY2FzZSAnZGVsZXRlQ29tcG9zaXRpb25UZXh0JzpcbiAgICAgIGNhc2UgJ2luc2VydEZyb21Db21wb3NpdGlvbic6XG4gICAgICBjYXNlICdpbnNlcnRGcm9tRHJvcCc6XG4gICAgICBjYXNlICdpbnNlcnRGcm9tUGFzdGUnOlxuICAgICAgY2FzZSAnaW5zZXJ0RnJvbVlhbmsnOlxuICAgICAgY2FzZSAnaW5zZXJ0UmVwbGFjZW1lbnRUZXh0JzpcbiAgICAgIGNhc2UgJ2luc2VydFRleHQnOiB7XG4gICAgICAgIGlmIChkYXRhPy5jb25zdHJ1Y3Rvci5uYW1lID09PSAnRGF0YVRyYW5zZmVyJykge1xuICAgICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbigoKSA9PiBSZWFjdEVkaXRvci5pbnNlcnREYXRhKGVkaXRvciwgZGF0YSksIHtcbiAgICAgICAgICAgIGF0OiB0YXJnZXRSYW5nZSxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyAmJiBkYXRhLmluY2x1ZGVzKCdcXG4nKSkge1xuICAgICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbigoKSA9PiBFZGl0b3IuaW5zZXJ0U29mdEJyZWFrKGVkaXRvciksIHtcbiAgICAgICAgICAgIGF0OiBSYW5nZS5lbmQodGFyZ2V0UmFuZ2UpLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGV4dCA9IGRhdGEgPz8gJydcblxuICAgICAgICAvLyBDT01QQVQ6IElmIHdlIGFyZSB3cml0aW5nIGluc2lkZSBhIHBsYWNlaG9sZGVyLCB0aGUgaW1lIGluc2VydHMgdGhlIHRleHQgaW5zaWRlXG4gICAgICAgIC8vIHRoZSBwbGFjZWhvbGRlciBpdHNlbGYgYW5kIHRodXMgaW5jbHVkZXMgdGhlIHplcm8td2lkdGggc3BhY2UgaW5zaWRlIGVkaXQgZXZlbnRzLlxuICAgICAgICBpZiAoRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLmdldChlZGl0b3IpKSB7XG4gICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgnXFx1RkVGRicsICcnKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFBhdGguZXF1YWxzKHRhcmdldFJhbmdlLmFuY2hvci5wYXRoLCB0YXJnZXRSYW5nZS5mb2N1cy5wYXRoKSkge1xuICAgICAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKHRhcmdldFJhbmdlKVxuXG4gICAgICAgICAgY29uc3QgZGlmZiA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiBzdGFydC5vZmZzZXQsXG4gICAgICAgICAgICBlbmQ6IGVuZC5vZmZzZXQsXG4gICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENPTVBBVDogU3dpZnRrZXkgaGFzIGEgd2VpcmQgYnVnIHdoZXJlIHRoZSB0YXJnZXQgcmFuZ2Ugb2YgdGhlIDJuZCB3b3JkXG4gICAgICAgICAgLy8gaW5zZXJ0ZWQgYWZ0ZXIgYSBtYXJrIHBsYWNlaG9sZGVyIGlzIGluc2VydGVkIHdpdGggYW4gYW5jaG9yIG9mZnNldCBvZmYgYnkgMS5cbiAgICAgICAgICAvLyBTbyB3cml0aW5nICdzb21lIHRleHQnIHdpbGwgcmVzdWx0IGluICdzb21lIHR0ZXh0Jy4gTHVja2lseSBhbGwgJ25vcm1hbCcgaW5zZXJ0XG4gICAgICAgICAgLy8gdGV4dCBldmVudHMgYXJlIGZpcmVkIHdpdGggdGhlIGNvcnJlY3QgdGFyZ2V0IHJhbmdlcywgb25seSB0aGUgZmluYWwgJ2luc2VydENvbXBvc2l0aW9uJ1xuICAgICAgICAgIC8vIGlzbid0LCBzbyB3ZSBjYW4gYWRqdXN0IHRoZSB0YXJnZXQgcmFuZ2Ugc3RhcnQgb2Zmc2V0IGlmIHdlIGFyZSBjb25maWRlbnQgdGhpcyBpcyB0aGVcbiAgICAgICAgICAvLyBzd2lmdGtleSBpbnNlcnQgY2F1c2luZyB0aGUgaXNzdWUuXG4gICAgICAgICAgaWYgKHRleHQgJiYgaW5zZXJ0UG9zaXRpb25IaW50ICYmIHR5cGUgPT09ICdpbnNlcnRDb21wb3NpdGlvblRleHQnKSB7XG4gICAgICAgICAgICBjb25zdCBoaW50UG9zaXRpb24gPVxuICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbkhpbnQuc3RhcnQgKyBpbnNlcnRQb3NpdGlvbkhpbnQudGV4dC5zZWFyY2goL1xcU3wkLylcbiAgICAgICAgICAgIGNvbnN0IGRpZmZQb3NpdGlvbiA9IGRpZmYuc3RhcnQgKyBkaWZmLnRleHQuc2VhcmNoKC9cXFN8JC8pXG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgZGlmZlBvc2l0aW9uID09PSBoaW50UG9zaXRpb24gKyAxICYmXG4gICAgICAgICAgICAgIGRpZmYuZW5kID09PVxuICAgICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uSGludC5zdGFydCArIGluc2VydFBvc2l0aW9uSGludC50ZXh0Lmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGRlYnVnKCdhZGp1c3Rpbmcgc3dpZnRLZXkgaW5zZXJ0IHBvc2l0aW9uIHVzaW5nIGhpbnQnKVxuICAgICAgICAgICAgICBkaWZmLnN0YXJ0IC09IDFcbiAgICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb25IaW50ID0gbnVsbFxuICAgICAgICAgICAgICBzY2hlZHVsZUZsdXNoKClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uSGludCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnaW5zZXJ0VGV4dCcpIHtcbiAgICAgICAgICAgIGlmIChpbnNlcnRQb3NpdGlvbkhpbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb25IaW50ID0gZGlmZlxuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb25IaW50ICYmXG4gICAgICAgICAgICAgIFJhbmdlLmlzQ29sbGFwc2VkKHRhcmdldFJhbmdlKSAmJlxuICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbkhpbnQuZW5kICsgaW5zZXJ0UG9zaXRpb25IaW50LnRleHQubGVuZ3RoID09PVxuICAgICAgICAgICAgICAgIHN0YXJ0Lm9mZnNldFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uSGludCA9IHtcbiAgICAgICAgICAgICAgICAuLi5pbnNlcnRQb3NpdGlvbkhpbnQsXG4gICAgICAgICAgICAgICAgdGV4dDogaW5zZXJ0UG9zaXRpb25IaW50LnRleHQgKyB0ZXh0LFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbkhpbnQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnNlcnRQb3NpdGlvbkhpbnQgPSBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHN0b3JlRGlmZihzdGFydC5wYXRoLCBkaWZmKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKCgpID0+IEVkaXRvci5pbnNlcnRUZXh0KGVkaXRvciwgdGV4dCksIHtcbiAgICAgICAgICBhdDogdGFyZ2V0UmFuZ2UsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFzUGVuZGluZ0FjdGlvbiA9ICgpID0+IHtcbiAgICByZXR1cm4gISFFRElUT1JfVE9fUEVORElOR19BQ1RJT04uZ2V0KGVkaXRvcilcbiAgfVxuXG4gIGNvbnN0IGhhc1BlbmRpbmdEaWZmcyA9ICgpID0+IHtcbiAgICByZXR1cm4gISFFRElUT1JfVE9fUEVORElOR19ESUZGUy5nZXQoZWRpdG9yKT8ubGVuZ3RoXG4gIH1cblxuICBjb25zdCBoYXNQZW5kaW5nQ2hhbmdlcyA9ICgpID0+IHtcbiAgICByZXR1cm4gaGFzUGVuZGluZ0FjdGlvbigpIHx8IGhhc1BlbmRpbmdEaWZmcygpXG4gIH1cblxuICBjb25zdCBpc0ZsdXNoaW5nID0gKCkgPT4ge1xuICAgIHJldHVybiBmbHVzaGluZ1xuICB9XG5cbiAgY29uc3QgaGFuZGxlVXNlclNlbGVjdCA9IChyYW5nZTogUmFuZ2UgfCBudWxsKSA9PiB7XG4gICAgRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OLnNldChlZGl0b3IsIHJhbmdlKVxuXG4gICAgaWYgKGZsdXNoVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQoZmx1c2hUaW1lb3V0SWQpXG4gICAgICBmbHVzaFRpbWVvdXRJZCA9IG51bGxcbiAgICB9XG5cbiAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gICAgaWYgKCFyYW5nZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcGF0aENoYW5nZWQgPVxuICAgICAgIXNlbGVjdGlvbiB8fCAhUGF0aC5lcXVhbHMoc2VsZWN0aW9uLmFuY2hvci5wYXRoLCByYW5nZS5hbmNob3IucGF0aClcbiAgICBjb25zdCBwYXJlbnRQYXRoQ2hhbmdlZCA9XG4gICAgICAhc2VsZWN0aW9uIHx8XG4gICAgICAhUGF0aC5lcXVhbHMoXG4gICAgICAgIHNlbGVjdGlvbi5hbmNob3IucGF0aC5zbGljZSgwLCAtMSksXG4gICAgICAgIHJhbmdlLmFuY2hvci5wYXRoLnNsaWNlKDAsIC0xKVxuICAgICAgKVxuXG4gICAgaWYgKChwYXRoQ2hhbmdlZCAmJiBpbnNlcnRQb3NpdGlvbkhpbnQpIHx8IHBhcmVudFBhdGhDaGFuZ2VkKSB7XG4gICAgICBpbnNlcnRQb3NpdGlvbkhpbnQgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmIChwYXRoQ2hhbmdlZCB8fCAhaGFzUGVuZGluZ0RpZmZzKCkpIHtcbiAgICAgIGZsdXNoVGltZW91dElkID0gc2V0VGltZW91dChmbHVzaCwgRkxVU0hfREVMQVkpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlSW5wdXQgPSAoKSA9PiB7XG4gICAgaWYgKGhhc1BlbmRpbmdBY3Rpb24oKSB8fCAhaGFzUGVuZGluZ0RpZmZzKCkpIHtcbiAgICAgIGRlYnVnKCdmbHVzaCBpbnB1dCcpXG4gICAgICBmbHVzaCgpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IChfOiBSZWFjdC5LZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgLy8gQ09NUEFUOiBTd2lmdGtleSBjbG9zZXMgdGhlIGtleWJvYXJkIHdoZW4gdHlwaW5nIGluc2lkZSBhIGVtcHR5IG5vZGVcbiAgICAvLyBkaXJlY3RseSBuZXh0IHRvIGEgbm9uLWNvbnRlbnRlZGl0YWJsZSBlbGVtZW50ICg9IHRoZSBwbGFjZWhvbGRlcikuXG4gICAgLy8gVGhlIG9ubHkgZXZlbnQgZmlyZWQgc29vbiBlbm91Z2ggZm9yIHVzIHRvIGFsbG93IGhpZGluZyB0aGUgcGxhY2Vob2xkZXJcbiAgICAvLyB3aXRob3V0IHN3aWZ0a2V5IHBpY2tpbmcgaXQgdXAgaXMgdGhlIGtleWRvd24gZXZlbnQsIHNvIHdlIGhhdmUgdG8gaGlkZSBpdFxuICAgIC8vIGhlcmUuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vaWFuc3Rvcm10YXlsb3Ivc2xhdGUvcHVsbC80OTg4I2lzc3VlY29tbWVudC0xMjAxMDUwNTM1XG4gICAgaWYgKCFoYXNQZW5kaW5nRGlmZnMoKSkge1xuICAgICAgdXBkYXRlUGxhY2Vob2xkZXJWaXNpYmlsaXR5KHRydWUpXG4gICAgICBzZXRUaW1lb3V0KHVwZGF0ZVBsYWNlaG9sZGVyVmlzaWJpbGl0eSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBzY2hlZHVsZUZsdXNoID0gKCkgPT4ge1xuICAgIGlmICghaGFzUGVuZGluZ0FjdGlvbigpKSB7XG4gICAgICBhY3Rpb25UaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZsdXNoKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZURvbU11dGF0aW9ucyA9IChtdXRhdGlvbnM6IE11dGF0aW9uUmVjb3JkW10pID0+IHtcbiAgICBpZiAoaGFzUGVuZGluZ0RpZmZzKCkgfHwgaGFzUGVuZGluZ0FjdGlvbigpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBtdXRhdGlvbnMuc29tZShtdXRhdGlvbiA9PiBpc1RyYWNrZWRNdXRhdGlvbihlZGl0b3IsIG11dGF0aW9uLCBtdXRhdGlvbnMpKVxuICAgICkge1xuICAgICAgLy8gQ2F1c2UgYSByZS1yZW5kZXIgdG8gcmVzdG9yZSB0aGUgZG9tIHN0YXRlIGlmIHdlIGVuY291bnRlciB0cmFja2VkIG11dGF0aW9ucyB3aXRob3V0XG4gICAgICAvLyBhIGNvcnJlc3BvbmRpbmcgcGVuZGluZyBhY3Rpb24uXG4gICAgICBFRElUT1JfVE9fRk9SQ0VfUkVOREVSLmdldChlZGl0b3IpPy4oKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZmx1c2gsXG4gICAgc2NoZWR1bGVGbHVzaCxcblxuICAgIGhhc1BlbmRpbmdEaWZmcyxcbiAgICBoYXNQZW5kaW5nQWN0aW9uLFxuICAgIGhhc1BlbmRpbmdDaGFuZ2VzLFxuXG4gICAgaXNGbHVzaGluZyxcblxuICAgIGhhbmRsZVVzZXJTZWxlY3QsXG4gICAgaGFuZGxlQ29tcG9zaXRpb25FbmQsXG4gICAgaGFuZGxlQ29tcG9zaXRpb25TdGFydCxcbiAgICBoYW5kbGVET01CZWZvcmVJbnB1dCxcbiAgICBoYW5kbGVLZXlEb3duLFxuXG4gICAgaGFuZGxlRG9tTXV0YXRpb25zLFxuICAgIGhhbmRsZUlucHV0LFxuICB9XG59XG4iLCAiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCdcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUlzTW91bnRlZCgpIHtcbiAgY29uc3QgaXNNb3VudGVkUmVmID0gdXNlUmVmKGZhbHNlKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaXNNb3VudGVkUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzTW91bnRlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICB9XG4gIH0sIFtdKVxuXG4gIHJldHVybiBpc01vdW50ZWRSZWYuY3VycmVudFxufVxuIiwgImltcG9ydCB7IFJlZk9iamVjdCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCB9IGZyb20gJy4vdXNlLWlzb21vcnBoaWMtbGF5b3V0LWVmZmVjdCdcbmltcG9ydCB7IGlzRE9NRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzL2RvbSdcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi4vcGx1Z2luL3JlYWN0LWVkaXRvcidcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoXG4gIG5vZGU6IFJlZk9iamVjdDxIVE1MRWxlbWVudD4sXG4gIGNhbGxiYWNrOiBNdXRhdGlvbkNhbGxiYWNrLFxuICBvcHRpb25zOiBNdXRhdGlvbk9ic2VydmVySW5pdFxuKSB7XG4gIGNvbnN0IFttdXRhdGlvbk9ic2VydmVyXSA9IHVzZVN0YXRlKCgpID0+IG5ldyBNdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKSlcblxuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAvLyBEaXNjYXJkIG11dGF0aW9ucyBjYXVzZWQgZHVyaW5nIHJlbmRlciBwaGFzZS4gVGhpcyB3b3JrcyBkdWUgdG8gcmVhY3QgY2FsbGluZ1xuICAgIC8vIHVzZUxheW91dEVmZmVjdCBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSByZW5kZXIgcGhhc2UgYmVmb3JlIHRoZSBuZXh0IHRpY2suXG4gICAgbXV0YXRpb25PYnNlcnZlci50YWtlUmVjb3JkcygpXG4gIH0pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW5vZGUuY3VycmVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gYXR0YWNoIE11dGF0aW9uT2JzZXJ2ZXIsIGBub2RlYCBpcyB1bmRlZmluZWQnKVxuICAgIH1cblxuICAgIG11dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZShub2RlLmN1cnJlbnQsIG9wdGlvbnMpXG4gICAgcmV0dXJuICgpID0+IG11dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gIH0sIFtdKVxufVxuIiwgImltcG9ydCB7IFJlZk9iamVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHVzZVNsYXRlU3RhdGljIH0gZnJvbSAnLi4vdXNlLXNsYXRlLXN0YXRpYydcbmltcG9ydCB7IElTX0FORFJPSUQgfSBmcm9tICcuLi8uLi91dGlscy9lbnZpcm9ubWVudCdcbmltcG9ydCB7IEVESVRPUl9UT19TQ0hFRFVMRV9GTFVTSCB9IGZyb20gJy4uLy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7XG4gIGNyZWF0ZUFuZHJvaWRJbnB1dE1hbmFnZXIsXG4gIENyZWF0ZUFuZHJvaWRJbnB1dE1hbmFnZXJPcHRpb25zLFxufSBmcm9tICcuL2FuZHJvaWQtaW5wdXQtbWFuYWdlcidcbmltcG9ydCB7IHVzZUlzTW91bnRlZCB9IGZyb20gJy4uL3VzZS1pcy1tb3VudGVkJ1xuaW1wb3J0IHsgdXNlTXV0YXRpb25PYnNlcnZlciB9IGZyb20gJy4uL3VzZS1tdXRhdGlvbi1vYnNlcnZlcidcblxudHlwZSBVc2VBbmRyb2lkSW5wdXRNYW5hZ2VyT3B0aW9ucyA9IHtcbiAgbm9kZTogUmVmT2JqZWN0PEhUTUxFbGVtZW50PlxufSAmIE9taXQ8XG4gIENyZWF0ZUFuZHJvaWRJbnB1dE1hbmFnZXJPcHRpb25zLFxuICAnZWRpdG9yJyB8ICdvblVzZXJJbnB1dCcgfCAncmVjZWl2ZWRVc2VySW5wdXQnXG4+XG5cbmNvbnN0IE1VVEFUSU9OX09CU0VSVkVSX0NPTkZJRzogTXV0YXRpb25PYnNlcnZlckluaXQgPSB7XG4gIHN1YnRyZWU6IHRydWUsXG4gIGNoaWxkTGlzdDogdHJ1ZSxcbiAgY2hhcmFjdGVyRGF0YTogdHJ1ZSxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUFuZHJvaWRJbnB1dE1hbmFnZXIoe1xuICBub2RlLFxuICAuLi5vcHRpb25zXG59OiBVc2VBbmRyb2lkSW5wdXRNYW5hZ2VyT3B0aW9ucykge1xuICBpZiAoIUlTX0FORFJPSUQpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKVxuICBjb25zdCBpc01vdW50ZWQgPSB1c2VJc01vdW50ZWQoKVxuXG4gIGNvbnN0IFtpbnB1dE1hbmFnZXJdID0gdXNlU3RhdGUoKCkgPT5cbiAgICBjcmVhdGVBbmRyb2lkSW5wdXRNYW5hZ2VyKHtcbiAgICAgIGVkaXRvcixcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfSlcbiAgKVxuXG4gIHVzZU11dGF0aW9uT2JzZXJ2ZXIoXG4gICAgbm9kZSxcbiAgICBpbnB1dE1hbmFnZXIuaGFuZGxlRG9tTXV0YXRpb25zLFxuICAgIE1VVEFUSU9OX09CU0VSVkVSX0NPTkZJR1xuICApXG5cbiAgRURJVE9SX1RPX1NDSEVEVUxFX0ZMVVNILnNldChlZGl0b3IsIGlucHV0TWFuYWdlci5zY2hlZHVsZUZsdXNoKVxuICBpZiAoaXNNb3VudGVkKSB7XG4gICAgaW5wdXRNYW5hZ2VyLmZsdXNoKClcbiAgfVxuXG4gIHJldHVybiBpbnB1dE1hbmFnZXJcbn1cbiIsICJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi4vcGx1Z2luL3JlYWN0LWVkaXRvcidcbmltcG9ydCB7IHVzZVNsYXRlU3RhdGljIH0gZnJvbSAnLi91c2Utc2xhdGUtc3RhdGljJ1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlVHJhY2tVc2VySW5wdXQoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlU3RhdGljKClcblxuICBjb25zdCByZWNlaXZlZFVzZXJJbnB1dCA9IHVzZVJlZjxib29sZWFuPihmYWxzZSlcbiAgY29uc3QgYW5pbWF0aW9uRnJhbWVJZFJlZiA9IHVzZVJlZjxudW1iZXI+KDApXG5cbiAgY29uc3Qgb25Vc2VySW5wdXQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHJlY2VpdmVkVXNlcklucHV0LmN1cnJlbnQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHJlY2VpdmVkVXNlcklucHV0LmN1cnJlbnQgPSB0cnVlXG5cbiAgICBjb25zdCB3aW5kb3cgPSBSZWFjdEVkaXRvci5nZXRXaW5kb3coZWRpdG9yKVxuICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25GcmFtZUlkUmVmLmN1cnJlbnQpXG5cbiAgICBhbmltYXRpb25GcmFtZUlkUmVmLmN1cnJlbnQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHJlY2VpdmVkVXNlcklucHV0LmN1cnJlbnQgPSBmYWxzZVxuICAgIH0pXG4gIH0sIFtdKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiAoKSA9PiBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25GcmFtZUlkUmVmLmN1cnJlbnQpLCBbXSlcblxuICByZXR1cm4ge1xuICAgIHJlY2VpdmVkVXNlcklucHV0LFxuICAgIG9uVXNlcklucHV0LFxuICB9XG59XG4iLCAiaW1wb3J0IGdldERpcmVjdGlvbiBmcm9tICdkaXJlY3Rpb24nXG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoL2RlYm91bmNlJ1xuaW1wb3J0IHRocm90dGxlIGZyb20gJ2xvZGFzaC90aHJvdHRsZSdcbmltcG9ydCBSZWFjdCwge1xuICB1c2VDYWxsYmFjayxcbiAgdXNlRWZmZWN0LFxuICB1c2VNZW1vLFxuICB1c2VSZWR1Y2VyLFxuICB1c2VSZWYsXG4gIHVzZVN0YXRlLFxufSBmcm9tICdyZWFjdCdcbmltcG9ydCBzY3JvbGxJbnRvVmlldyBmcm9tICdzY3JvbGwtaW50by12aWV3LWlmLW5lZWRlZCdcbmltcG9ydCB7XG4gIEVkaXRvcixcbiAgRWxlbWVudCxcbiAgTm9kZSxcbiAgTm9kZUVudHJ5LFxuICBQYXRoLFxuICBSYW5nZSxcbiAgVGV4dCxcbiAgVHJhbnNmb3Jtcyxcbn0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4uL3BsdWdpbi9yZWFjdC1lZGl0b3InXG5pbXBvcnQgdXNlQ2hpbGRyZW4gZnJvbSAnLi4vaG9va3MvdXNlLWNoaWxkcmVuJ1xuaW1wb3J0IHsgRGVjb3JhdGVDb250ZXh0IH0gZnJvbSAnLi4vaG9va3MvdXNlLWRlY29yYXRlJ1xuaW1wb3J0IHsgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCB9IGZyb20gJy4uL2hvb2tzL3VzZS1pc29tb3JwaGljLWxheW91dC1lZmZlY3QnXG5pbXBvcnQgeyBSZWFkT25seUNvbnRleHQgfSBmcm9tICcuLi9ob29rcy91c2UtcmVhZC1vbmx5J1xuaW1wb3J0IHsgdXNlU2xhdGUgfSBmcm9tICcuLi9ob29rcy91c2Utc2xhdGUnXG5pbXBvcnQgeyBUUklQTEVfQ0xJQ0sgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMnXG5pbXBvcnQge1xuICBET01FbGVtZW50LFxuICBET01Ob2RlLFxuICBET01SYW5nZSxcbiAgRE9NVGV4dCxcbiAgZ2V0RGVmYXVsdFZpZXcsXG4gIGlzRE9NRWxlbWVudCxcbiAgaXNET01Ob2RlLFxuICBpc1BsYWluVGV4dE9ubHlQYXN0ZSxcbn0gZnJvbSAnLi4vdXRpbHMvZG9tJ1xuaW1wb3J0IHtcbiAgQ0FOX1VTRV9ET00sXG4gIEhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCxcbiAgSVNfQU5EUk9JRCxcbiAgSVNfQ0hST01FLFxuICBJU19GSVJFRk9YLFxuICBJU19GSVJFRk9YX0xFR0FDWSxcbiAgSVNfSU9TLFxuICBJU19TQUZBUkksXG4gIElTX1VDX01PQklMRSxcbiAgSVNfV0VDSEFUQlJPV1NFUixcbn0gZnJvbSAnLi4vdXRpbHMvZW52aXJvbm1lbnQnXG5pbXBvcnQgSG90a2V5cyBmcm9tICcuLi91dGlscy9ob3RrZXlzJ1xuaW1wb3J0IHtcbiAgRURJVE9SX1RPX0VMRU1FTlQsXG4gIEVESVRPUl9UT19GT1JDRV9SRU5ERVIsXG4gIEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUyxcbiAgRURJVE9SX1RPX1BMQUNFSE9MREVSX0VMRU1FTlQsXG4gIEVESVRPUl9UT19VU0VSX01BUktTLFxuICBFRElUT1JfVE9fVVNFUl9TRUxFQ1RJT04sXG4gIEVESVRPUl9UT19XSU5ET1csXG4gIEVMRU1FTlRfVE9fTk9ERSxcbiAgSVNfQ09NUE9TSU5HLFxuICBJU19GT0NVU0VELFxuICBJU19SRUFEX09OTFksXG4gIE1BUktfUExBQ0VIT0xERVJfU1lNQk9MLFxuICBOT0RFX1RPX0VMRU1FTlQsXG4gIFBMQUNFSE9MREVSX1NZTUJPTCxcbn0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHsgUmVzdG9yZURPTSB9IGZyb20gJy4vcmVzdG9yZS1kb20vcmVzdG9yZS1kb20nXG5pbXBvcnQgeyB1c2VBbmRyb2lkSW5wdXRNYW5hZ2VyIH0gZnJvbSAnLi4vaG9va3MvYW5kcm9pZC1pbnB1dC1tYW5hZ2VyL3VzZS1hbmRyb2lkLWlucHV0LW1hbmFnZXInXG5pbXBvcnQgeyB1c2VUcmFja1VzZXJJbnB1dCB9IGZyb20gJy4uL2hvb2tzL3VzZS10cmFjay11c2VyLWlucHV0J1xuXG50eXBlIERlZmVycmVkT3BlcmF0aW9uID0gKCkgPT4gdm9pZFxuXG5jb25zdCBDaGlsZHJlbiA9IChwcm9wczogUGFyYW1ldGVyczx0eXBlb2YgdXNlQ2hpbGRyZW4+WzBdKSA9PiAoXG4gIDxSZWFjdC5GcmFnbWVudD57dXNlQ2hpbGRyZW4ocHJvcHMpfTwvUmVhY3QuRnJhZ21lbnQ+XG4pXG5cbi8qKlxuICogYFJlbmRlckVsZW1lbnRQcm9wc2AgYXJlIHBhc3NlZCB0byB0aGUgYHJlbmRlckVsZW1lbnRgIGhhbmRsZXIuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJFbGVtZW50UHJvcHMge1xuICBjaGlsZHJlbjogYW55XG4gIGVsZW1lbnQ6IEVsZW1lbnRcbiAgYXR0cmlidXRlczoge1xuICAgICdkYXRhLXNsYXRlLW5vZGUnOiAnZWxlbWVudCdcbiAgICAnZGF0YS1zbGF0ZS1pbmxpbmUnPzogdHJ1ZVxuICAgICdkYXRhLXNsYXRlLXZvaWQnPzogdHJ1ZVxuICAgIGRpcj86ICdydGwnXG4gICAgcmVmOiBhbnlcbiAgfVxufVxuXG4vKipcbiAqIGBSZW5kZXJMZWFmUHJvcHNgIGFyZSBwYXNzZWQgdG8gdGhlIGByZW5kZXJMZWFmYCBoYW5kbGVyLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyTGVhZlByb3BzIHtcbiAgY2hpbGRyZW46IGFueVxuICBsZWFmOiBUZXh0XG4gIHRleHQ6IFRleHRcbiAgYXR0cmlidXRlczoge1xuICAgICdkYXRhLXNsYXRlLWxlYWYnOiB0cnVlXG4gIH1cbn1cblxuLyoqXG4gKiBgRWRpdGFibGVQcm9wc2AgYXJlIHBhc3NlZCB0byB0aGUgYDxFZGl0YWJsZT5gIGNvbXBvbmVudC5cbiAqL1xuXG5leHBvcnQgdHlwZSBFZGl0YWJsZVByb3BzID0ge1xuICBkZWNvcmF0ZT86IChlbnRyeTogTm9kZUVudHJ5KSA9PiBSYW5nZVtdXG4gIG9uRE9NQmVmb3JlSW5wdXQ/OiAoZXZlbnQ6IElucHV0RXZlbnQpID0+IHZvaWRcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmdcbiAgcmVhZE9ubHk/OiBib29sZWFuXG4gIHJvbGU/OiBzdHJpbmdcbiAgc3R5bGU/OiBSZWFjdC5DU1NQcm9wZXJ0aWVzXG4gIHJlbmRlckVsZW1lbnQ/OiAocHJvcHM6IFJlbmRlckVsZW1lbnRQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgcmVuZGVyTGVhZj86IChwcm9wczogUmVuZGVyTGVhZlByb3BzKSA9PiBKU1guRWxlbWVudFxuICByZW5kZXJQbGFjZWhvbGRlcj86IChwcm9wczogUmVuZGVyUGxhY2Vob2xkZXJQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgc2Nyb2xsU2VsZWN0aW9uSW50b1ZpZXc/OiAoZWRpdG9yOiBSZWFjdEVkaXRvciwgZG9tUmFuZ2U6IERPTVJhbmdlKSA9PiB2b2lkXG4gIGFzPzogUmVhY3QuRWxlbWVudFR5cGVcbiAgZGlzYWJsZURlZmF1bHRTdHlsZXM/OiBib29sZWFuXG59ICYgUmVhY3QuVGV4dGFyZWFIVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD5cblxuLyoqXG4gKiBFZGl0YWJsZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgRWRpdGFibGUgPSAocHJvcHM6IEVkaXRhYmxlUHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIGF1dG9Gb2N1cyxcbiAgICBkZWNvcmF0ZSA9IGRlZmF1bHREZWNvcmF0ZSxcbiAgICBvbkRPTUJlZm9yZUlucHV0OiBwcm9wc09uRE9NQmVmb3JlSW5wdXQsXG4gICAgcGxhY2Vob2xkZXIsXG4gICAgcmVhZE9ubHkgPSBmYWxzZSxcbiAgICByZW5kZXJFbGVtZW50LFxuICAgIHJlbmRlckxlYWYsXG4gICAgcmVuZGVyUGxhY2Vob2xkZXIgPSBwcm9wcyA9PiA8RGVmYXVsdFBsYWNlaG9sZGVyIHsuLi5wcm9wc30gLz4sXG4gICAgc2Nyb2xsU2VsZWN0aW9uSW50b1ZpZXcgPSBkZWZhdWx0U2Nyb2xsU2VsZWN0aW9uSW50b1ZpZXcsXG4gICAgc3R5bGU6IHVzZXJTdHlsZSA9IHt9LFxuICAgIGFzOiBDb21wb25lbnQgPSAnZGl2JyxcbiAgICBkaXNhYmxlRGVmYXVsdFN0eWxlcyA9IGZhbHNlLFxuICAgIC4uLmF0dHJpYnV0ZXNcbiAgfSA9IHByb3BzXG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlKClcbiAgLy8gUmVyZW5kZXIgZWRpdG9yIHdoZW4gY29tcG9zaXRpb24gc3RhdHVzIGNoYW5nZWRcbiAgY29uc3QgW2lzQ29tcG9zaW5nLCBzZXRJc0NvbXBvc2luZ10gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgcmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICBjb25zdCBkZWZlcnJlZE9wZXJhdGlvbnMgPSB1c2VSZWY8RGVmZXJyZWRPcGVyYXRpb25bXT4oW10pXG5cbiAgY29uc3QgeyBvblVzZXJJbnB1dCwgcmVjZWl2ZWRVc2VySW5wdXQgfSA9IHVzZVRyYWNrVXNlcklucHV0KClcblxuICBjb25zdCBbLCBmb3JjZVJlbmRlcl0gPSB1c2VSZWR1Y2VyKHMgPT4gcyArIDEsIDApXG4gIEVESVRPUl9UT19GT1JDRV9SRU5ERVIuc2V0KGVkaXRvciwgZm9yY2VSZW5kZXIpXG5cbiAgLy8gVXBkYXRlIGludGVybmFsIHN0YXRlIG9uIGVhY2ggcmVuZGVyLlxuICBJU19SRUFEX09OTFkuc2V0KGVkaXRvciwgcmVhZE9ubHkpXG5cbiAgLy8gS2VlcCB0cmFjayBvZiBzb21lIHN0YXRlIGZvciB0aGUgZXZlbnQgaGFuZGxlciBsb2dpYy5cbiAgY29uc3Qgc3RhdGUgPSB1c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICBpc0RyYWdnaW5nSW50ZXJuYWxseTogZmFsc2UsXG4gICAgICBpc1VwZGF0aW5nU2VsZWN0aW9uOiBmYWxzZSxcbiAgICAgIGxhdGVzdEVsZW1lbnQ6IG51bGwgYXMgRE9NRWxlbWVudCB8IG51bGwsXG4gICAgICBoYXNNYXJrUGxhY2Vob2xkZXI6IGZhbHNlLFxuICAgIH0pLFxuICAgIFtdXG4gIClcblxuICAvLyBUaGUgYXV0b0ZvY3VzIFRleHRhcmVhSFRNTEF0dHJpYnV0ZSBkb2Vzbid0IGRvIGFueXRoaW5nIG9uIGEgZGl2LCBzbyBpdFxuICAvLyBuZWVkcyB0byBiZSBtYW51YWxseSBmb2N1c2VkLlxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZWYuY3VycmVudCAmJiBhdXRvRm9jdXMpIHtcbiAgICAgIHJlZi5jdXJyZW50LmZvY3VzKClcbiAgICB9XG4gIH0sIFthdXRvRm9jdXNdKVxuXG4gIC8vIExpc3RlbiBvbiB0aGUgbmF0aXZlIGBzZWxlY3Rpb25jaGFuZ2VgIGV2ZW50IHRvIGJlIGFibGUgdG8gdXBkYXRlIGFueSB0aW1lXG4gIC8vIHRoZSBzZWxlY3Rpb24gY2hhbmdlcy4gVGhpcyBpcyByZXF1aXJlZCBiZWNhdXNlIFJlYWN0J3MgYG9uU2VsZWN0YCBpcyBsZWFreVxuICAvLyBhbmQgbm9uLXN0YW5kYXJkIHNvIGl0IGRvZXNuJ3QgZmlyZSB1bnRpbCBhZnRlciBhIHNlbGVjdGlvbiBoYXMgYmVlblxuICAvLyByZWxlYXNlZC4gVGhpcyBjYXVzZXMgaXNzdWVzIGluIHNpdHVhdGlvbnMgd2hlcmUgYW5vdGhlciBjaGFuZ2UgaGFwcGVuc1xuICAvLyB3aGlsZSBhIHNlbGVjdGlvbiBpcyBiZWluZyBkcmFnZ2VkLlxuICBjb25zdCBvbkRPTVNlbGVjdGlvbkNoYW5nZSA9IHVzZUNhbGxiYWNrKFxuICAgIHRocm90dGxlKCgpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgKElTX0FORFJPSUQgfHwgIVJlYWN0RWRpdG9yLmlzQ29tcG9zaW5nKGVkaXRvcikpICYmXG4gICAgICAgICghc3RhdGUuaXNVcGRhdGluZ1NlbGVjdGlvbiB8fCBhbmRyb2lkSW5wdXRNYW5hZ2VyPy5pc0ZsdXNoaW5nKCkpICYmXG4gICAgICAgICFzdGF0ZS5pc0RyYWdnaW5nSW50ZXJuYWxseVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSBSZWFjdEVkaXRvci5maW5kRG9jdW1lbnRPclNoYWRvd1Jvb3QoZWRpdG9yKVxuICAgICAgICBjb25zdCB7IGFjdGl2ZUVsZW1lbnQgfSA9IHJvb3RcbiAgICAgICAgY29uc3QgZWwgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBlZGl0b3IpXG4gICAgICAgIGNvbnN0IGRvbVNlbGVjdGlvbiA9IHJvb3QuZ2V0U2VsZWN0aW9uKClcblxuICAgICAgICBpZiAoYWN0aXZlRWxlbWVudCA9PT0gZWwpIHtcbiAgICAgICAgICBzdGF0ZS5sYXRlc3RFbGVtZW50ID0gYWN0aXZlRWxlbWVudFxuICAgICAgICAgIElTX0ZPQ1VTRUQuc2V0KGVkaXRvciwgdHJ1ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBJU19GT0NVU0VELmRlbGV0ZShlZGl0b3IpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRvbVNlbGVjdGlvbikge1xuICAgICAgICAgIHJldHVybiBUcmFuc2Zvcm1zLmRlc2VsZWN0KGVkaXRvcilcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgYW5jaG9yTm9kZSwgZm9jdXNOb2RlIH0gPSBkb21TZWxlY3Rpb25cblxuICAgICAgICBjb25zdCBhbmNob3JOb2RlU2VsZWN0YWJsZSA9XG4gICAgICAgICAgUmVhY3RFZGl0b3IuaGFzRWRpdGFibGVUYXJnZXQoZWRpdG9yLCBhbmNob3JOb2RlKSB8fFxuICAgICAgICAgIFJlYWN0RWRpdG9yLmlzVGFyZ2V0SW5zaWRlTm9uUmVhZG9ubHlWb2lkKGVkaXRvciwgYW5jaG9yTm9kZSlcblxuICAgICAgICBjb25zdCBmb2N1c05vZGVTZWxlY3RhYmxlID1cbiAgICAgICAgICBSZWFjdEVkaXRvci5oYXNFZGl0YWJsZVRhcmdldChlZGl0b3IsIGZvY3VzTm9kZSkgfHxcbiAgICAgICAgICBSZWFjdEVkaXRvci5pc1RhcmdldEluc2lkZU5vblJlYWRvbmx5Vm9pZChlZGl0b3IsIGZvY3VzTm9kZSlcblxuICAgICAgICBpZiAoYW5jaG9yTm9kZVNlbGVjdGFibGUgJiYgZm9jdXNOb2RlU2VsZWN0YWJsZSkge1xuICAgICAgICAgIGNvbnN0IHJhbmdlID0gUmVhY3RFZGl0b3IudG9TbGF0ZVJhbmdlKGVkaXRvciwgZG9tU2VsZWN0aW9uLCB7XG4gICAgICAgICAgICBleGFjdE1hdGNoOiBmYWxzZSxcbiAgICAgICAgICAgIHN1cHByZXNzVGhyb3c6IHRydWUsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhUmVhY3RFZGl0b3IuaXNDb21wb3NpbmcoZWRpdG9yKSAmJlxuICAgICAgICAgICAgICAhYW5kcm9pZElucHV0TWFuYWdlcj8uaGFzUGVuZGluZ0NoYW5nZXMoKSAmJlxuICAgICAgICAgICAgICAhYW5kcm9pZElucHV0TWFuYWdlcj8uaXNGbHVzaGluZygpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCByYW5nZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFuZHJvaWRJbnB1dE1hbmFnZXI/LmhhbmRsZVVzZXJTZWxlY3QocmFuZ2UpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVzZWxlY3QgdGhlIGVkaXRvciBpZiB0aGUgZG9tIHNlbGVjdGlvbiBpcyBub3Qgc2VsZWN0YWJsZSBpbiByZWFkb25seSBtb2RlXG4gICAgICAgIGlmIChyZWFkT25seSAmJiAoIWFuY2hvck5vZGVTZWxlY3RhYmxlIHx8ICFmb2N1c05vZGVTZWxlY3RhYmxlKSkge1xuICAgICAgICAgIFRyYW5zZm9ybXMuZGVzZWxlY3QoZWRpdG9yKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMTAwKSxcbiAgICBbcmVhZE9ubHldXG4gIClcblxuICBjb25zdCBzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlID0gdXNlTWVtbyhcbiAgICAoKSA9PiBkZWJvdW5jZShvbkRPTVNlbGVjdGlvbkNoYW5nZSwgMCksXG4gICAgW29uRE9NU2VsZWN0aW9uQ2hhbmdlXVxuICApXG5cbiAgY29uc3QgYW5kcm9pZElucHV0TWFuYWdlciA9IHVzZUFuZHJvaWRJbnB1dE1hbmFnZXIoe1xuICAgIG5vZGU6IHJlZixcbiAgICBvbkRPTVNlbGVjdGlvbkNoYW5nZSxcbiAgICBzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlLFxuICB9KVxuXG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFVwZGF0ZSBlbGVtZW50LXJlbGF0ZWQgd2VhayBtYXBzIHdpdGggdGhlIERPTSBlbGVtZW50IHJlZi5cbiAgICBsZXQgd2luZG93XG4gICAgaWYgKHJlZi5jdXJyZW50ICYmICh3aW5kb3cgPSBnZXREZWZhdWx0VmlldyhyZWYuY3VycmVudCkpKSB7XG4gICAgICBFRElUT1JfVE9fV0lORE9XLnNldChlZGl0b3IsIHdpbmRvdylcbiAgICAgIEVESVRPUl9UT19FTEVNRU5ULnNldChlZGl0b3IsIHJlZi5jdXJyZW50KVxuICAgICAgTk9ERV9UT19FTEVNRU5ULnNldChlZGl0b3IsIHJlZi5jdXJyZW50KVxuICAgICAgRUxFTUVOVF9UT19OT0RFLnNldChyZWYuY3VycmVudCwgZWRpdG9yKVxuICAgIH0gZWxzZSB7XG4gICAgICBOT0RFX1RPX0VMRU1FTlQuZGVsZXRlKGVkaXRvcilcbiAgICB9XG5cbiAgICAvLyBNYWtlIHN1cmUgdGhlIERPTSBzZWxlY3Rpb24gc3RhdGUgaXMgaW4gc3luYy5cbiAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gICAgY29uc3Qgcm9vdCA9IFJlYWN0RWRpdG9yLmZpbmREb2N1bWVudE9yU2hhZG93Um9vdChlZGl0b3IpXG4gICAgY29uc3QgZG9tU2VsZWN0aW9uID0gcm9vdC5nZXRTZWxlY3Rpb24oKVxuXG4gICAgaWYgKFxuICAgICAgIWRvbVNlbGVjdGlvbiB8fFxuICAgICAgIVJlYWN0RWRpdG9yLmlzRm9jdXNlZChlZGl0b3IpIHx8XG4gICAgICBhbmRyb2lkSW5wdXRNYW5hZ2VyPy5oYXNQZW5kaW5nQWN0aW9uKClcbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHNldERvbVNlbGVjdGlvbiA9IChmb3JjZUNoYW5nZT86IGJvb2xlYW4pID0+IHtcbiAgICAgIGNvbnN0IGhhc0RvbVNlbGVjdGlvbiA9IGRvbVNlbGVjdGlvbi50eXBlICE9PSAnTm9uZSdcblxuICAgICAgLy8gSWYgdGhlIERPTSBzZWxlY3Rpb24gaXMgcHJvcGVybHkgdW5zZXQsIHdlJ3JlIGRvbmUuXG4gICAgICBpZiAoIXNlbGVjdGlvbiAmJiAhaGFzRG9tU2VsZWN0aW9uKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyB2ZXJpZnkgdGhhdCB0aGUgZG9tIHNlbGVjdGlvbiBpcyBpbiB0aGUgZWRpdG9yXG4gICAgICBjb25zdCBlZGl0b3JFbGVtZW50ID0gRURJVE9SX1RPX0VMRU1FTlQuZ2V0KGVkaXRvcikhXG4gICAgICBsZXQgaGFzRG9tU2VsZWN0aW9uSW5FZGl0b3IgPSBmYWxzZVxuICAgICAgaWYgKFxuICAgICAgICBlZGl0b3JFbGVtZW50LmNvbnRhaW5zKGRvbVNlbGVjdGlvbi5hbmNob3JOb2RlKSAmJlxuICAgICAgICBlZGl0b3JFbGVtZW50LmNvbnRhaW5zKGRvbVNlbGVjdGlvbi5mb2N1c05vZGUpXG4gICAgICApIHtcbiAgICAgICAgaGFzRG9tU2VsZWN0aW9uSW5FZGl0b3IgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBET00gc2VsZWN0aW9uIGlzIGluIHRoZSBlZGl0b3IgYW5kIHRoZSBlZGl0b3Igc2VsZWN0aW9uIGlzIGFscmVhZHkgY29ycmVjdCwgd2UncmUgZG9uZS5cbiAgICAgIGlmIChcbiAgICAgICAgaGFzRG9tU2VsZWN0aW9uICYmXG4gICAgICAgIGhhc0RvbVNlbGVjdGlvbkluRWRpdG9yICYmXG4gICAgICAgIHNlbGVjdGlvbiAmJlxuICAgICAgICAhZm9yY2VDaGFuZ2VcbiAgICAgICkge1xuICAgICAgICBjb25zdCBzbGF0ZVJhbmdlID0gUmVhY3RFZGl0b3IudG9TbGF0ZVJhbmdlKGVkaXRvciwgZG9tU2VsZWN0aW9uLCB7XG4gICAgICAgICAgZXhhY3RNYXRjaDogdHJ1ZSxcblxuICAgICAgICAgIC8vIGRvbVNlbGVjdGlvbiBpcyBub3QgbmVjZXNzYXJpbHkgYSB2YWxpZCBTbGF0ZSByYW5nZVxuICAgICAgICAgIC8vIChlLmcuIHdoZW4gY2xpY2tpbmcgb24gY29udGVudEVkaXRhYmxlOmZhbHNlIGVsZW1lbnQpXG4gICAgICAgICAgc3VwcHJlc3NUaHJvdzogdHJ1ZSxcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAoc2xhdGVSYW5nZSAmJiBSYW5nZS5lcXVhbHMoc2xhdGVSYW5nZSwgc2VsZWN0aW9uKSkge1xuICAgICAgICAgIGlmICghc3RhdGUuaGFzTWFya1BsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFbnN1cmUgc2VsZWN0aW9uIGlzIGluc2lkZSB0aGUgbWFyayBwbGFjZWhvbGRlclxuICAgICAgICAgIGNvbnN0IHsgYW5jaG9yTm9kZSB9ID0gZG9tU2VsZWN0aW9uXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgYW5jaG9yTm9kZT8ucGFyZW50RWxlbWVudD8uaGFzQXR0cmlidXRlKFxuICAgICAgICAgICAgICAnZGF0YS1zbGF0ZS1tYXJrLXBsYWNlaG9sZGVyJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHdoZW4gPEVkaXRhYmxlLz4gaXMgYmVpbmcgY29udHJvbGxlZCB0aHJvdWdoIGV4dGVybmFsIHZhbHVlXG4gICAgICAvLyB0aGVuIGl0cyBjaGlsZHJlbiBtaWdodCBqdXN0IGNoYW5nZSAtIERPTSByZXNwb25kcyB0byBpdCBvbiBpdHMgb3duXG4gICAgICAvLyBidXQgU2xhdGUncyB2YWx1ZSBpcyBub3QgYmVpbmcgdXBkYXRlZCB0aHJvdWdoIGFueSBvcGVyYXRpb25cbiAgICAgIC8vIGFuZCB0aHVzIGl0IGRvZXNuJ3QgdHJhbnNmb3JtIHNlbGVjdGlvbiBvbiBpdHMgb3duXG4gICAgICBpZiAoc2VsZWN0aW9uICYmICFSZWFjdEVkaXRvci5oYXNSYW5nZShlZGl0b3IsIHNlbGVjdGlvbikpIHtcbiAgICAgICAgZWRpdG9yLnNlbGVjdGlvbiA9IFJlYWN0RWRpdG9yLnRvU2xhdGVSYW5nZShlZGl0b3IsIGRvbVNlbGVjdGlvbiwge1xuICAgICAgICAgIGV4YWN0TWF0Y2g6IGZhbHNlLFxuICAgICAgICAgIHN1cHByZXNzVGhyb3c6IHRydWUsXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBPdGhlcndpc2UgdGhlIERPTSBzZWxlY3Rpb24gaXMgb3V0IG9mIHN5bmMsIHNvIHVwZGF0ZSBpdC5cbiAgICAgIHN0YXRlLmlzVXBkYXRpbmdTZWxlY3Rpb24gPSB0cnVlXG5cbiAgICAgIGNvbnN0IG5ld0RvbVJhbmdlOiBET01SYW5nZSB8IG51bGwgPVxuICAgICAgICBzZWxlY3Rpb24gJiYgUmVhY3RFZGl0b3IudG9ET01SYW5nZShlZGl0b3IsIHNlbGVjdGlvbilcblxuICAgICAgaWYgKG5ld0RvbVJhbmdlKSB7XG4gICAgICAgIGlmIChSYW5nZS5pc0JhY2t3YXJkKHNlbGVjdGlvbiEpKSB7XG4gICAgICAgICAgZG9tU2VsZWN0aW9uLnNldEJhc2VBbmRFeHRlbnQoXG4gICAgICAgICAgICBuZXdEb21SYW5nZS5lbmRDb250YWluZXIsXG4gICAgICAgICAgICBuZXdEb21SYW5nZS5lbmRPZmZzZXQsXG4gICAgICAgICAgICBuZXdEb21SYW5nZS5zdGFydENvbnRhaW5lcixcbiAgICAgICAgICAgIG5ld0RvbVJhbmdlLnN0YXJ0T2Zmc2V0XG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRvbVNlbGVjdGlvbi5zZXRCYXNlQW5kRXh0ZW50KFxuICAgICAgICAgICAgbmV3RG9tUmFuZ2Uuc3RhcnRDb250YWluZXIsXG4gICAgICAgICAgICBuZXdEb21SYW5nZS5zdGFydE9mZnNldCxcbiAgICAgICAgICAgIG5ld0RvbVJhbmdlLmVuZENvbnRhaW5lcixcbiAgICAgICAgICAgIG5ld0RvbVJhbmdlLmVuZE9mZnNldFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBzY3JvbGxTZWxlY3Rpb25JbnRvVmlldyhlZGl0b3IsIG5ld0RvbVJhbmdlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9tU2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXdEb21SYW5nZVxuICAgIH1cblxuICAgIGNvbnN0IG5ld0RvbVJhbmdlID0gc2V0RG9tU2VsZWN0aW9uKClcbiAgICBjb25zdCBlbnN1cmVTZWxlY3Rpb24gPSBhbmRyb2lkSW5wdXRNYW5hZ2VyPy5pc0ZsdXNoaW5nKCkgPT09ICdhY3Rpb24nXG5cbiAgICBpZiAoIUlTX0FORFJPSUQgfHwgIWVuc3VyZVNlbGVjdGlvbikge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIC8vIENPTVBBVDogSW4gRmlyZWZveCwgaXQncyBub3QgZW5vdWdoIHRvIGNyZWF0ZSBhIHJhbmdlLCB5b3UgYWxzbyBuZWVkXG4gICAgICAgIC8vIHRvIGZvY3VzIHRoZSBjb250ZW50ZWRpdGFibGUgZWxlbWVudCB0b28uICgyMDE2LzExLzE2KVxuICAgICAgICBpZiAobmV3RG9tUmFuZ2UgJiYgSVNfRklSRUZPWCkge1xuICAgICAgICAgIGNvbnN0IGVsID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKVxuICAgICAgICAgIGVsLmZvY3VzKClcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlLmlzVXBkYXRpbmdTZWxlY3Rpb24gPSBmYWxzZVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCB0aW1lb3V0SWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbCA9IG51bGxcbiAgICBjb25zdCBhbmltYXRpb25GcmFtZUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGlmIChlbnN1cmVTZWxlY3Rpb24pIHtcbiAgICAgICAgY29uc3QgZW5zdXJlRG9tU2VsZWN0aW9uID0gKGZvcmNlQ2hhbmdlPzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlbCA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcilcbiAgICAgICAgICAgIGVsLmZvY3VzKClcblxuICAgICAgICAgICAgc2V0RG9tU2VsZWN0aW9uKGZvcmNlQ2hhbmdlKVxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZSwgZG9tIGFuZCBzdGF0ZSBtaWdodCBiZSBvdXQgb2Ygc3luY1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbXBhdDogQW5kcm9pZCBJTUVzIHRyeSB0byBmb3JjZSB0aGVpciBzZWxlY3Rpb24gYnkgbWFudWFsbHkgcmUtYXBwbHlpbmcgaXQgZXZlbiBhZnRlciB3ZSBzZXQgaXQuXG4gICAgICAgIC8vIFRoaXMgZXNzZW50aWFsbHkgd291bGQgbWFrZSBzZXR0aW5nIHRoZSBzbGF0ZSBzZWxlY3Rpb24gZHVyaW5nIGFuIHVwZGF0ZSBtZWFuaW5nbGVzcywgc28gd2UgZm9yY2UgaXRcbiAgICAgICAgLy8gYWdhaW4gaGVyZS4gV2UgY2FuJ3Qgb25seSBkbyBpdCBpbiB0aGUgc2V0VGltZW91dCBhZnRlciB0aGUgYW5pbWF0aW9uIGZyYW1lIHNpbmNlIHRoYXQgd291bGQgY2F1c2UgYVxuICAgICAgICAvLyB2aXNpYmxlIGZsaWNrZXIuXG4gICAgICAgIGVuc3VyZURvbVNlbGVjdGlvbigpXG5cbiAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgLy8gQ09NUEFUOiBXaGlsZSBzZXR0aW5nIHRoZSBzZWxlY3Rpb24gaW4gYW4gYW5pbWF0aW9uIGZyYW1lIHZpc3VhbGx5IGNvcnJlY3RseSBzZXRzIHRoZSBzZWxlY3Rpb24sXG4gICAgICAgICAgLy8gaXQgZG9lc24ndCB1cGRhdGUgR0JvYXJkcyBzcGVsbGNoZWNrZXIgc3RhdGUuIFdlIGhhdmUgdG8gbWFudWFsbHkgdHJpZ2dlciBhIHNlbGVjdGlvbiBjaGFuZ2UgYWZ0ZXJcbiAgICAgICAgICAvLyB0aGUgYW5pbWF0aW9uIGZyYW1lIHRvIGVuc3VyZSBpdCBkaXNwbGF5cyB0aGUgY29ycmVjdCBzdGF0ZS5cbiAgICAgICAgICBlbnN1cmVEb21TZWxlY3Rpb24odHJ1ZSlcbiAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nU2VsZWN0aW9uID0gZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkZyYW1lSWQpXG4gICAgICBpZiAodGltZW91dElkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIC8vIExpc3RlbiBvbiB0aGUgbmF0aXZlIGBiZWZvcmVpbnB1dGAgZXZlbnQgdG8gZ2V0IHJlYWwgXCJMZXZlbCAyXCIgZXZlbnRzLiBUaGlzXG4gIC8vIGlzIHJlcXVpcmVkIGJlY2F1c2UgUmVhY3QncyBgYmVmb3JlaW5wdXRgIGlzIGZha2UgYW5kIG5ldmVyIHJlYWxseSBhdHRhY2hlc1xuICAvLyB0byB0aGUgcmVhbCBldmVudCBzYWRseS4gKDIwMTkvMTEvMDEpXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMTEyMTFcbiAgY29uc3Qgb25ET01CZWZvcmVJbnB1dCA9IHVzZUNhbGxiYWNrKFxuICAgIChldmVudDogSW5wdXRFdmVudCkgPT4ge1xuICAgICAgb25Vc2VySW5wdXQoKVxuXG4gICAgICBpZiAoXG4gICAgICAgICFyZWFkT25seSAmJlxuICAgICAgICBSZWFjdEVkaXRvci5oYXNFZGl0YWJsZVRhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgIWlzRE9NRXZlbnRIYW5kbGVkKGV2ZW50LCBwcm9wc09uRE9NQmVmb3JlSW5wdXQpXG4gICAgICApIHtcbiAgICAgICAgLy8gQ09NUEFUOiBCZWZvcmVJbnB1dCBldmVudHMgYXJlbid0IGNhbmNlbGFibGUgb24gYW5kcm9pZCwgc28gd2UgaGF2ZSB0byBoYW5kbGUgdGhlbSBkaWZmZXJlbnRseSB1c2luZyB0aGUgYW5kcm9pZCBpbnB1dCBtYW5hZ2VyLlxuICAgICAgICBpZiAoYW5kcm9pZElucHV0TWFuYWdlcikge1xuICAgICAgICAgIHJldHVybiBhbmRyb2lkSW5wdXRNYW5hZ2VyLmhhbmRsZURPTUJlZm9yZUlucHV0KGV2ZW50KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU29tZSBJTUVzL0Nocm9tZSBleHRlbnNpb25zIGxpa2UgZS5nLiBHcmFtbWFybHkgc2V0IHRoZSBzZWxlY3Rpb24gaW1tZWRpYXRlbHkgYmVmb3JlXG4gICAgICAgIC8vIHRyaWdnZXJpbmcgYSBgYmVmb3JlaW5wdXRgIGV4cGVjdGluZyB0aGUgY2hhbmdlIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGltbWVkaWF0ZWx5IGJlZm9yZVxuICAgICAgICAvLyBzZXQgc2VsZWN0aW9uLlxuICAgICAgICBzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlLmZsdXNoKClcbiAgICAgICAgb25ET01TZWxlY3Rpb25DaGFuZ2UuZmx1c2goKVxuXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgICAgICAgY29uc3QgeyBpbnB1dFR5cGU6IHR5cGUgfSA9IGV2ZW50XG4gICAgICAgIGNvbnN0IGRhdGEgPSAoZXZlbnQgYXMgYW55KS5kYXRhVHJhbnNmZXIgfHwgZXZlbnQuZGF0YSB8fCB1bmRlZmluZWRcblxuICAgICAgICBjb25zdCBpc0NvbXBvc2l0aW9uQ2hhbmdlID1cbiAgICAgICAgICB0eXBlID09PSAnaW5zZXJ0Q29tcG9zaXRpb25UZXh0JyB8fCB0eXBlID09PSAnZGVsZXRlQ29tcG9zaXRpb25UZXh0J1xuXG4gICAgICAgIC8vIENPTVBBVDogdXNlIGNvbXBvc2l0aW9uIGNoYW5nZSBldmVudHMgYXMgYSBoaW50IHRvIHdoZXJlIHdlIHNob3VsZCBpbnNlcnRcbiAgICAgICAgLy8gY29tcG9zaXRpb24gdGV4dCBpZiB3ZSBhcmVuJ3QgY29tcG9zaW5nIHRvIHdvcmsgYXJvdW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9pYW5zdG9ybXRheWxvci9zbGF0ZS9pc3N1ZXMvNTAzOFxuICAgICAgICBpZiAoaXNDb21wb3NpdGlvbkNoYW5nZSAmJiBSZWFjdEVkaXRvci5pc0NvbXBvc2luZyhlZGl0b3IpKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbmF0aXZlID0gZmFsc2VcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGUgPT09ICdpbnNlcnRUZXh0JyAmJlxuICAgICAgICAgIHNlbGVjdGlvbiAmJlxuICAgICAgICAgIFJhbmdlLmlzQ29sbGFwc2VkKHNlbGVjdGlvbikgJiZcbiAgICAgICAgICAvLyBPbmx5IHVzZSBuYXRpdmUgY2hhcmFjdGVyIGluc2VydGlvbiBmb3Igc2luZ2xlIGNoYXJhY3RlcnMgYS16IG9yIHNwYWNlIGZvciBub3cuXG4gICAgICAgICAgLy8gTG9uZy1wcmVzcyBldmVudHMgKGhvbGQgYSArIHByZXNzIDQgPSDDpCkgdG8gY2hvb3NlIGEgc3BlY2lhbCBjaGFyYWN0ZXIgb3RoZXJ3aXNlXG4gICAgICAgICAgLy8gY2F1c2VzIGR1cGxpY2F0ZSBpbnNlcnRzLlxuICAgICAgICAgIGV2ZW50LmRhdGEgJiZcbiAgICAgICAgICBldmVudC5kYXRhLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICAgIC9bYS16IF0vaS50ZXN0KGV2ZW50LmRhdGEpICYmXG4gICAgICAgICAgLy8gQ2hyb21lIGhhcyBpc3N1ZXMgY29ycmVjdGx5IGVkaXRpbmcgdGhlIHN0YXJ0IG9mIG5vZGVzOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xMjQ5NDA1XG4gICAgICAgICAgLy8gV2hlbiB0aGVyZSBpcyBhbiBpbmxpbmUgZWxlbWVudCwgZS5nLiBhIGxpbmssIGFuZCB5b3Ugc2VsZWN0XG4gICAgICAgICAgLy8gcmlnaHQgYWZ0ZXIgaXQgKHRoZSBzdGFydCBvZiB0aGUgbmV4dCBub2RlKS5cbiAgICAgICAgICBzZWxlY3Rpb24uYW5jaG9yLm9mZnNldCAhPT0gMFxuICAgICAgICApIHtcbiAgICAgICAgICBuYXRpdmUgPSB0cnVlXG5cbiAgICAgICAgICAvLyBTa2lwIG5hdGl2ZSBpZiB0aGVyZSBhcmUgbWFya3MsIGFzXG4gICAgICAgICAgLy8gYGluc2VydFRleHRgIHdpbGwgaW5zZXJ0IGEgbm9kZSwgbm90IGp1c3QgdGV4dC5cbiAgICAgICAgICBpZiAoZWRpdG9yLm1hcmtzKSB7XG4gICAgICAgICAgICBuYXRpdmUgPSBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENocm9tZSBhbHNvIGhhcyBpc3N1ZXMgY29ycmVjdGx5IGVkaXRpbmcgdGhlIGVuZCBvZiBhbmNob3IgZWxlbWVudHM6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTEyNTkxMDBcbiAgICAgICAgICAvLyBUaGVyZWZvcmUgd2UgZG9uJ3QgYWxsb3cgbmF0aXZlIGV2ZW50cyB0byBpbnNlcnQgdGV4dCBhdCB0aGUgZW5kIG9mIGFuY2hvciBub2Rlcy5cbiAgICAgICAgICBjb25zdCB7IGFuY2hvciB9ID0gc2VsZWN0aW9uXG5cbiAgICAgICAgICBjb25zdCBbbm9kZSwgb2Zmc2V0XSA9IFJlYWN0RWRpdG9yLnRvRE9NUG9pbnQoZWRpdG9yLCBhbmNob3IpXG4gICAgICAgICAgY29uc3QgYW5jaG9yTm9kZSA9IG5vZGUucGFyZW50RWxlbWVudD8uY2xvc2VzdCgnYScpXG5cbiAgICAgICAgICBjb25zdCB3aW5kb3cgPSBSZWFjdEVkaXRvci5nZXRXaW5kb3coZWRpdG9yKVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbmF0aXZlICYmXG4gICAgICAgICAgICBhbmNob3JOb2RlICYmXG4gICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNET01Ob2RlKGVkaXRvciwgYW5jaG9yTm9kZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIGxhc3QgdGV4dCBub2RlIGluc2lkZSB0aGUgYW5jaG9yLlxuICAgICAgICAgICAgY29uc3QgbGFzdFRleHQgPSB3aW5kb3c/LmRvY3VtZW50XG4gICAgICAgICAgICAgIC5jcmVhdGVUcmVlV2Fsa2VyKGFuY2hvck5vZGUsIE5vZGVGaWx0ZXIuU0hPV19URVhUKVxuICAgICAgICAgICAgICAubGFzdENoaWxkKCkgYXMgRE9NVGV4dCB8IG51bGxcblxuICAgICAgICAgICAgaWYgKGxhc3RUZXh0ID09PSBub2RlICYmIGxhc3RUZXh0LnRleHRDb250ZW50Py5sZW5ndGggPT09IG9mZnNldCkge1xuICAgICAgICAgICAgICBuYXRpdmUgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENocm9tZSBoYXMgaXNzdWVzIHdpdGggdGhlIHByZXNlbmNlIG9mIHRhYiBjaGFyYWN0ZXJzIGluc2lkZSBlbGVtZW50cyB3aXRoIHdoaXRlU3BhY2UgPSAncHJlJ1xuICAgICAgICAgIC8vIGNhdXNpbmcgYWJub3JtYWwgaW5zZXJ0IGJlaGF2aW9yOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xMjE5MTM5XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbmF0aXZlICYmXG4gICAgICAgICAgICBub2RlLnBhcmVudEVsZW1lbnQgJiZcbiAgICAgICAgICAgIHdpbmRvdz8uZ2V0Q29tcHV0ZWRTdHlsZShub2RlLnBhcmVudEVsZW1lbnQpPy53aGl0ZVNwYWNlID09PSAncHJlJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgYmxvY2sgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBhbmNob3IucGF0aCxcbiAgICAgICAgICAgICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKSxcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGlmIChibG9jayAmJiBOb2RlLnN0cmluZyhibG9ja1swXSkuaW5jbHVkZXMoJ1xcdCcpKSB7XG4gICAgICAgICAgICAgIG5hdGl2ZSA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ09NUEFUOiBGb3IgdGhlIGRlbGV0aW5nIGZvcndhcmQvYmFja3dhcmQgaW5wdXQgdHlwZXMgd2UgZG9uJ3Qgd2FudFxuICAgICAgICAvLyB0byBjaGFuZ2UgdGhlIHNlbGVjdGlvbiBiZWNhdXNlIGl0IGlzIHRoZSByYW5nZSB0aGF0IHdpbGwgYmUgZGVsZXRlZCxcbiAgICAgICAgLy8gYW5kIHRob3NlIGNvbW1hbmRzIGRldGVybWluZSB0aGF0IGZvciB0aGVtc2VsdmVzLlxuICAgICAgICBpZiAoIXR5cGUuc3RhcnRzV2l0aCgnZGVsZXRlJykgfHwgdHlwZS5zdGFydHNXaXRoKCdkZWxldGVCeScpKSB7XG4gICAgICAgICAgY29uc3QgW3RhcmdldFJhbmdlXSA9IChldmVudCBhcyBhbnkpLmdldFRhcmdldFJhbmdlcygpXG5cbiAgICAgICAgICBpZiAodGFyZ2V0UmFuZ2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gUmVhY3RFZGl0b3IudG9TbGF0ZVJhbmdlKGVkaXRvciwgdGFyZ2V0UmFuZ2UsIHtcbiAgICAgICAgICAgICAgZXhhY3RNYXRjaDogZmFsc2UsXG4gICAgICAgICAgICAgIHN1cHByZXNzVGhyb3c6IGZhbHNlLFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKCFzZWxlY3Rpb24gfHwgIVJhbmdlLmVxdWFscyhzZWxlY3Rpb24sIHJhbmdlKSkge1xuICAgICAgICAgICAgICBuYXRpdmUgPSBmYWxzZVxuXG4gICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvblJlZiA9XG4gICAgICAgICAgICAgICAgIWlzQ29tcG9zaXRpb25DaGFuZ2UgJiZcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uICYmXG4gICAgICAgICAgICAgICAgRWRpdG9yLnJhbmdlUmVmKGVkaXRvciwgZWRpdG9yLnNlbGVjdGlvbilcblxuICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHJhbmdlKVxuXG4gICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25SZWYpIHtcbiAgICAgICAgICAgICAgICBFRElUT1JfVE9fVVNFUl9TRUxFQ1RJT04uc2V0KGVkaXRvciwgc2VsZWN0aW9uUmVmKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29tcG9zaXRpb24gY2hhbmdlIHR5cGVzIG9jY3VyIHdoaWxlIGEgdXNlciBpcyBjb21wb3NpbmcgdGV4dCBhbmQgY2FuJ3QgYmVcbiAgICAgICAgLy8gY2FuY2VsbGVkLiBMZXQgdGhlbSB0aHJvdWdoIGFuZCB3YWl0IGZvciB0aGUgY29tcG9zaXRpb24gdG8gZW5kLlxuICAgICAgICBpZiAoaXNDb21wb3NpdGlvbkNoYW5nZSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFuYXRpdmUpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBDT01QQVQ6IElmIHRoZSBzZWxlY3Rpb24gaXMgZXhwYW5kZWQsIGV2ZW4gaWYgdGhlIGNvbW1hbmQgc2VlbXMgbGlrZVxuICAgICAgICAvLyBhIGRlbGV0ZSBmb3J3YXJkL2JhY2t3YXJkIGNvbW1hbmQgaXQgc2hvdWxkIGRlbGV0ZSB0aGUgc2VsZWN0aW9uLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgc2VsZWN0aW9uICYmXG4gICAgICAgICAgUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pICYmXG4gICAgICAgICAgdHlwZS5zdGFydHNXaXRoKCdkZWxldGUnKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSB0eXBlLmVuZHNXaXRoKCdCYWNrd2FyZCcpID8gJ2JhY2t3YXJkJyA6ICdmb3J3YXJkJ1xuICAgICAgICAgIEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IsIHsgZGlyZWN0aW9uIH0pXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICBjYXNlICdkZWxldGVCeUNvbXBvc2l0aW9uJzpcbiAgICAgICAgICBjYXNlICdkZWxldGVCeUN1dCc6XG4gICAgICAgICAgY2FzZSAnZGVsZXRlQnlEcmFnJzoge1xuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvcilcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnZGVsZXRlQ29udGVudCc6XG4gICAgICAgICAgY2FzZSAnZGVsZXRlQ29udGVudEZvcndhcmQnOiB7XG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZUNvbnRlbnRCYWNrd2FyZCc6IHtcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZUVudGlyZVNvZnRMaW5lJzoge1xuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgeyB1bml0OiAnbGluZScgfSlcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvciwgeyB1bml0OiAnbGluZScgfSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnZGVsZXRlSGFyZExpbmVCYWNrd2FyZCc6IHtcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IsIHsgdW5pdDogJ2Jsb2NrJyB9KVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdkZWxldGVTb2Z0TGluZUJhY2t3YXJkJzoge1xuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgeyB1bml0OiAnbGluZScgfSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnZGVsZXRlSGFyZExpbmVGb3J3YXJkJzoge1xuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yLCB7IHVuaXQ6ICdibG9jaycgfSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnZGVsZXRlU29mdExpbmVGb3J3YXJkJzoge1xuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJyB9KVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdkZWxldGVXb3JkQmFja3dhcmQnOiB7XG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yLCB7IHVuaXQ6ICd3b3JkJyB9KVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdkZWxldGVXb3JkRm9yd2FyZCc6IHtcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvciwgeyB1bml0OiAnd29yZCcgfSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnaW5zZXJ0TGluZUJyZWFrJzpcbiAgICAgICAgICAgIEVkaXRvci5pbnNlcnRTb2Z0QnJlYWsoZWRpdG9yKVxuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ2luc2VydFBhcmFncmFwaCc6IHtcbiAgICAgICAgICAgIEVkaXRvci5pbnNlcnRCcmVhayhlZGl0b3IpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2luc2VydEZyb21Db21wb3NpdGlvbic6XG4gICAgICAgICAgY2FzZSAnaW5zZXJ0RnJvbURyb3AnOlxuICAgICAgICAgIGNhc2UgJ2luc2VydEZyb21QYXN0ZSc6XG4gICAgICAgICAgY2FzZSAnaW5zZXJ0RnJvbVlhbmsnOlxuICAgICAgICAgIGNhc2UgJ2luc2VydFJlcGxhY2VtZW50VGV4dCc6XG4gICAgICAgICAgY2FzZSAnaW5zZXJ0VGV4dCc6IHtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnaW5zZXJ0RnJvbUNvbXBvc2l0aW9uJykge1xuICAgICAgICAgICAgICAvLyBDT01QQVQ6IGluIFNhZmFyaSwgYGNvbXBvc2l0aW9uZW5kYCBpcyBkaXNwYXRjaGVkIGFmdGVyIHRoZVxuICAgICAgICAgICAgICAvLyBgYmVmb3JlaW5wdXRgIGZvciBcImluc2VydEZyb21Db21wb3NpdGlvblwiLiBCdXQgaWYgd2Ugd2FpdCBmb3IgaXRcbiAgICAgICAgICAgICAgLy8gdGhlbiB3ZSB3aWxsIGFib3J0IGJlY2F1c2Ugd2UncmUgc3RpbGwgY29tcG9zaW5nIGFuZCB0aGUgc2VsZWN0aW9uXG4gICAgICAgICAgICAgIC8vIHdvbid0IGJlIHVwZGF0ZWQgcHJvcGVybHkuXG4gICAgICAgICAgICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9pbnB1dC1ldmVudHMtMi9cbiAgICAgICAgICAgICAgaWYgKFJlYWN0RWRpdG9yLmlzQ29tcG9zaW5nKGVkaXRvcikpIHtcbiAgICAgICAgICAgICAgICBzZXRJc0NvbXBvc2luZyhmYWxzZSlcbiAgICAgICAgICAgICAgICBJU19DT01QT1NJTkcuc2V0KGVkaXRvciwgZmFsc2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdXNlIGEgd2VhayBjb21wYXJpc29uIGluc3RlYWQgb2YgJ2luc3RhbmNlb2YnIHRvIGFsbG93XG4gICAgICAgICAgICAvLyBwcm9ncmFtbWF0aWMgYWNjZXNzIG9mIHBhc3RlIGV2ZW50cyBjb21pbmcgZnJvbSBleHRlcm5hbCB3aW5kb3dzXG4gICAgICAgICAgICAvLyBsaWtlIGN5cHJlc3Mgd2hlcmUgY3kud2luZG93IGRvZXMgbm90IHdvcmsgcmVhbGlibHlcbiAgICAgICAgICAgIGlmIChkYXRhPy5jb25zdHJ1Y3Rvci5uYW1lID09PSAnRGF0YVRyYW5zZmVyJykge1xuICAgICAgICAgICAgICBSZWFjdEVkaXRvci5pbnNlcnREYXRhKGVkaXRvciwgZGF0YSlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIC8vIE9ubHkgaW5zZXJ0VGV4dCBvcGVyYXRpb25zIHVzZSB0aGUgbmF0aXZlIGZ1bmN0aW9uYWxpdHksIGZvciBub3cuXG4gICAgICAgICAgICAgIC8vIFBvdGVudGlhbGx5IGV4cGFuZCB0byBzaW5nbGUgY2hhcmFjdGVyIGRlbGV0ZXMsIGFzIHdlbGwuXG4gICAgICAgICAgICAgIGlmIChuYXRpdmUpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZE9wZXJhdGlvbnMuY3VycmVudC5wdXNoKCgpID0+XG4gICAgICAgICAgICAgICAgICBFZGl0b3IuaW5zZXJ0VGV4dChlZGl0b3IsIGRhdGEpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEVkaXRvci5pbnNlcnRUZXh0KGVkaXRvciwgZGF0YSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlc3RvcmUgdGhlIGFjdHVhbCB1c2VyIHNlY3Rpb24gaWYgbm90aGluZyBtYW51YWxseSBzZXQgaXQuXG4gICAgICAgIGNvbnN0IHRvUmVzdG9yZSA9IEVESVRPUl9UT19VU0VSX1NFTEVDVElPTi5nZXQoZWRpdG9yKT8udW5yZWYoKVxuICAgICAgICBFRElUT1JfVE9fVVNFUl9TRUxFQ1RJT04uZGVsZXRlKGVkaXRvcilcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgdG9SZXN0b3JlICYmXG4gICAgICAgICAgKCFlZGl0b3Iuc2VsZWN0aW9uIHx8ICFSYW5nZS5lcXVhbHMoZWRpdG9yLnNlbGVjdGlvbiwgdG9SZXN0b3JlKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCB0b1Jlc3RvcmUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFtyZWFkT25seSwgcHJvcHNPbkRPTUJlZm9yZUlucHV0XVxuICApXG5cbiAgLy8gQXR0YWNoIGEgbmF0aXZlIERPTSBldmVudCBoYW5kbGVyIGZvciBgYmVmb3JlaW5wdXRgIGV2ZW50cywgYmVjYXVzZSBSZWFjdCdzXG4gIC8vIGJ1aWx0LWluIGBvbkJlZm9yZUlucHV0YCBpcyBhY3R1YWxseSBhIGxlYWt5IHBvbHlmaWxsIHRoYXQgZG9lc24ndCBleHBvc2VcbiAgLy8gcmVhbCBgYmVmb3JlaW5wdXRgIGV2ZW50cyBzYWRseS4uLiAoMjAxOS8xMS8wNClcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8xMTIxMVxuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBpZiAocmVmLmN1cnJlbnQgJiYgSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUKSB7XG4gICAgICAvLyBAdHMtaWdub3JlIFRoZSBgYmVmb3JlaW5wdXRgIGV2ZW50IGlzbid0IHJlY29nbml6ZWQuXG4gICAgICByZWYuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmVpbnB1dCcsIG9uRE9NQmVmb3JlSW5wdXQpXG4gICAgfVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChyZWYuY3VycmVudCAmJiBIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBUaGUgYGJlZm9yZWlucHV0YCBldmVudCBpc24ndCByZWNvZ25pemVkLlxuICAgICAgICByZWYuY3VycmVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdiZWZvcmVpbnB1dCcsIG9uRE9NQmVmb3JlSW5wdXQpXG4gICAgICB9XG4gICAgfVxuICB9LCBbb25ET01CZWZvcmVJbnB1dF0pXG5cbiAgLy8gQXR0YWNoIGEgbmF0aXZlIERPTSBldmVudCBoYW5kbGVyIGZvciBgc2VsZWN0aW9uY2hhbmdlYCwgYmVjYXVzZSBSZWFjdCdzXG4gIC8vIGJ1aWx0LWluIGBvblNlbGVjdGAgaGFuZGxlciBkb2Vzbid0IGZpcmUgZm9yIGFsbCBzZWxlY3Rpb24gY2hhbmdlcy4gSXQncyBhXG4gIC8vIGxlYWt5IHBvbHlmaWxsIHRoYXQgb25seSBmaXJlcyBvbiBrZXlwcmVzc2VzIG9yIGNsaWNrcy4gSW5zdGVhZCwgd2Ugd2FudCB0b1xuICAvLyBmaXJlIGZvciBhbnkgY2hhbmdlIHRvIHRoZSBzZWxlY3Rpb24gaW5zaWRlIHRoZSBlZGl0b3IuICgyMDE5LzExLzA0KVxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzU3ODVcbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgd2luZG93ID0gUmVhY3RFZGl0b3IuZ2V0V2luZG93KGVkaXRvcilcblxuICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ3NlbGVjdGlvbmNoYW5nZScsXG4gICAgICBzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlXG4gICAgKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAnc2VsZWN0aW9uY2hhbmdlJyxcbiAgICAgICAgc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZVxuICAgICAgKVxuICAgIH1cbiAgfSwgW3NjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2VdKVxuXG4gIGNvbnN0IGRlY29yYXRpb25zID0gZGVjb3JhdGUoW2VkaXRvciwgW11dKVxuXG4gIGlmIChcbiAgICBwbGFjZWhvbGRlciAmJlxuICAgIGVkaXRvci5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiZcbiAgICBBcnJheS5mcm9tKE5vZGUudGV4dHMoZWRpdG9yKSkubGVuZ3RoID09PSAxICYmXG4gICAgTm9kZS5zdHJpbmcoZWRpdG9yKSA9PT0gJycgJiZcbiAgICAhaXNDb21wb3NpbmdcbiAgKSB7XG4gICAgY29uc3Qgc3RhcnQgPSBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBbXSlcbiAgICBkZWNvcmF0aW9ucy5wdXNoKHtcbiAgICAgIFtQTEFDRUhPTERFUl9TWU1CT0xdOiB0cnVlLFxuICAgICAgcGxhY2Vob2xkZXIsXG4gICAgICBhbmNob3I6IHN0YXJ0LFxuICAgICAgZm9jdXM6IHN0YXJ0LFxuICAgIH0pXG4gIH1cblxuICBjb25zdCB7IG1hcmtzIH0gPSBlZGl0b3JcbiAgc3RhdGUuaGFzTWFya1BsYWNlaG9sZGVyID0gZmFsc2VcblxuICBpZiAoZWRpdG9yLnNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChlZGl0b3Iuc2VsZWN0aW9uKSAmJiBtYXJrcykge1xuICAgIGNvbnN0IHsgYW5jaG9yIH0gPSBlZGl0b3Iuc2VsZWN0aW9uXG4gICAgY29uc3QgbGVhZiA9IE5vZGUubGVhZihlZGl0b3IsIGFuY2hvci5wYXRoKVxuICAgIGNvbnN0IHsgdGV4dCwgLi4ucmVzdCB9ID0gbGVhZlxuXG4gICAgLy8gV2hpbGUgbWFya3MgaXNuJ3QgYSAnY29tcGxldGUnIHRleHQsIHdlIGNhbiBzdGlsbCB1c2UgbG9vc2UgVGV4dC5lcXVhbHNcbiAgICAvLyBoZXJlIHdoaWNoIG9ubHkgY29tcGFyZXMgbWFya3MgYW55d2F5LlxuICAgIGlmICghVGV4dC5lcXVhbHMobGVhZiwgbWFya3MgYXMgVGV4dCwgeyBsb29zZTogdHJ1ZSB9KSkge1xuICAgICAgc3RhdGUuaGFzTWFya1BsYWNlaG9sZGVyID0gdHJ1ZVxuXG4gICAgICBjb25zdCB1bnNldCA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgT2JqZWN0LmtleXMocmVzdCkubWFwKG1hcmsgPT4gW21hcmssIG51bGxdKVxuICAgICAgKVxuXG4gICAgICBkZWNvcmF0aW9ucy5wdXNoKHtcbiAgICAgICAgW01BUktfUExBQ0VIT0xERVJfU1lNQk9MXTogdHJ1ZSxcbiAgICAgICAgLi4udW5zZXQsXG4gICAgICAgIC4uLm1hcmtzLFxuXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgZm9jdXM6IGFuY2hvcixcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIEVESVRPUl9UT19NQVJLX1BMQUNFSE9MREVSX01BUktTIGluIHNldFRpbWVvdXQgdXNlRWZmZWN0IHRvIGVuc3VyZSB3ZSBkb24ndCBzZXQgaXRcbiAgLy8gYmVmb3JlIHdlIHJlY2VpdmUgdGhlIGNvbXBvc2l0aW9uIGVuZCBldmVudC5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgY29uc3QgeyBhbmNob3IgfSA9IHNlbGVjdGlvblxuICAgICAgICBjb25zdCB0ZXh0ID0gTm9kZS5sZWFmKGVkaXRvciwgYW5jaG9yLnBhdGgpXG5cbiAgICAgICAgLy8gV2hpbGUgbWFya3MgaXNuJ3QgYSAnY29tcGxldGUnIHRleHQsIHdlIGNhbiBzdGlsbCB1c2UgbG9vc2UgVGV4dC5lcXVhbHNcbiAgICAgICAgLy8gaGVyZSB3aGljaCBvbmx5IGNvbXBhcmVzIG1hcmtzIGFueXdheS5cbiAgICAgICAgaWYgKG1hcmtzICYmICFUZXh0LmVxdWFscyh0ZXh0LCBtYXJrcyBhcyBUZXh0LCB7IGxvb3NlOiB0cnVlIH0pKSB7XG4gICAgICAgICAgRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLnNldChlZGl0b3IsIG1hcmtzKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUy5kZWxldGUoZWRpdG9yKVxuICAgIH0pXG4gIH0pXG5cbiAgY29uc3QgcGxhY2Vob2xkZXJIZWlnaHQgPSBFRElUT1JfVE9fUExBQ0VIT0xERVJfRUxFTUVOVC5nZXQoXG4gICAgZWRpdG9yXG4gICk/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpPy5oZWlnaHRcblxuICByZXR1cm4gKFxuICAgIDxSZWFkT25seUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3JlYWRPbmx5fT5cbiAgICAgIDxEZWNvcmF0ZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2RlY29yYXRlfT5cbiAgICAgICAgPFJlc3RvcmVET00gbm9kZT17cmVmfSByZWNlaXZlZFVzZXJJbnB1dD17cmVjZWl2ZWRVc2VySW5wdXR9PlxuICAgICAgICAgIDxDb21wb25lbnRcbiAgICAgICAgICAgIHJvbGU9e3JlYWRPbmx5ID8gdW5kZWZpbmVkIDogJ3RleHRib3gnfVxuICAgICAgICAgICAgYXJpYS1tdWx0aWxpbmU9e3JlYWRPbmx5ID8gdW5kZWZpbmVkIDogdHJ1ZX1cbiAgICAgICAgICAgIHsuLi5hdHRyaWJ1dGVzfVxuICAgICAgICAgICAgLy8gQ09NUEFUOiBDZXJ0YWluIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgdGhlIGBiZWZvcmVpbnB1dGAgZXZlbnQsIHNvIHdlJ2RcbiAgICAgICAgICAgIC8vIGhhdmUgdG8gdXNlIGhhY2tzIHRvIG1ha2UgdGhlc2UgcmVwbGFjZW1lbnQtYmFzZWQgZmVhdHVyZXMgd29yay5cbiAgICAgICAgICAgIC8vIEZvciBTU1Igc2l0dWF0aW9ucyBIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQgaXMgZmFsc2UgYW5kIHJlc3VsdHMgaW4gcHJvcFxuICAgICAgICAgICAgLy8gbWlzbWF0Y2ggd2FybmluZyBhcHAgbW92ZXMgdG8gYnJvd3Nlci4gUGFzcy10aHJvdWdoIGNvbnN1bWVyIHByb3BzIHdoZW5cbiAgICAgICAgICAgIC8vIG5vdCBDQU5fVVNFX0RPTSAoU1NSKSBhbmQgZGVmYXVsdCB0byBmYWxzeSB2YWx1ZVxuICAgICAgICAgICAgc3BlbGxDaGVjaz17XG4gICAgICAgICAgICAgIEhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCB8fCAhQ0FOX1VTRV9ET01cbiAgICAgICAgICAgICAgICA/IGF0dHJpYnV0ZXMuc3BlbGxDaGVja1xuICAgICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF1dG9Db3JyZWN0PXtcbiAgICAgICAgICAgICAgSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUIHx8ICFDQU5fVVNFX0RPTVxuICAgICAgICAgICAgICAgID8gYXR0cmlidXRlcy5hdXRvQ29ycmVjdFxuICAgICAgICAgICAgICAgIDogJ2ZhbHNlJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXV0b0NhcGl0YWxpemU9e1xuICAgICAgICAgICAgICBIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQgfHwgIUNBTl9VU0VfRE9NXG4gICAgICAgICAgICAgICAgPyBhdHRyaWJ1dGVzLmF1dG9DYXBpdGFsaXplXG4gICAgICAgICAgICAgICAgOiAnZmFsc2UnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLXNsYXRlLWVkaXRvclxuICAgICAgICAgICAgZGF0YS1zbGF0ZS1ub2RlPVwidmFsdWVcIlxuICAgICAgICAgICAgLy8gZXhwbGljaXRseSBzZXQgdGhpc1xuICAgICAgICAgICAgY29udGVudEVkaXRhYmxlPXshcmVhZE9ubHl9XG4gICAgICAgICAgICAvLyBpbiBzb21lIGNhc2VzLCBhIGRlY29yYXRpb24gbmVlZHMgYWNjZXNzIHRvIHRoZSByYW5nZSAvIHNlbGVjdGlvbiB0byBkZWNvcmF0ZSBhIHRleHQgbm9kZSxcbiAgICAgICAgICAgIC8vIHRoZW4geW91IHdpbGwgc2VsZWN0IHRoZSB3aG9sZSB0ZXh0IG5vZGUgd2hlbiB5b3Ugc2VsZWN0IHBhcnQgdGhlIG9mIHRleHRcbiAgICAgICAgICAgIC8vIHRoaXMgbWFnaWMgekluZGV4PVwiLTFcIiB3aWxsIGZpeCBpdFxuICAgICAgICAgICAgemluZGV4PXstMX1cbiAgICAgICAgICAgIHN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZ1xuICAgICAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAuLi4oZGlzYWJsZURlZmF1bHRTdHlsZXNcbiAgICAgICAgICAgICAgICA/IHt9XG4gICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFsbG93IHBvc2l0aW9uaW5nIHJlbGF0aXZlIHRvIHRoZSBlZGl0YWJsZSBlbGVtZW50LlxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBvdXRsaW5lIHN0eWxlcy5cbiAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgICAgICAgICAgICAgICAvLyBQcmVzZXJ2ZSBhZGphY2VudCB3aGl0ZXNwYWNlIGFuZCBuZXcgbGluZXMuXG4gICAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6ICdwcmUtd3JhcCcsXG4gICAgICAgICAgICAgICAgICAgIC8vIEFsbG93IHdvcmRzIHRvIGJyZWFrIGlmIHRoZXkgYXJlIHRvbyBsb25nLlxuICAgICAgICAgICAgICAgICAgICB3b3JkV3JhcDogJ2JyZWFrLXdvcmQnLFxuICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHRoZSBtaW5pbXVtIGhlaWdodCB0aGF0IG9mIHRoZSBwbGFjZWhvbGRlci5cbiAgICAgICAgICAgICAgICAgICAgLi4uKHBsYWNlaG9sZGVySGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgPyB7IG1pbkhlaWdodDogcGxhY2Vob2xkZXJIZWlnaHQgfVxuICAgICAgICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIC8vIEFsbG93IGZvciBwYXNzZWQtaW4gc3R5bGVzIHRvIG92ZXJyaWRlIGFueXRoaW5nLlxuICAgICAgICAgICAgICAuLi51c2VyU3R5bGUsXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25CZWZvcmVJbnB1dD17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuRm9ybUV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIENPTVBBVDogQ2VydGFpbiBicm93c2VycyBkb24ndCBzdXBwb3J0IHRoZSBgYmVmb3JlaW5wdXRgIGV2ZW50LCBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBSZWFjdCdzIGxlYWt5IHBvbHlmaWxsIGluc3RlYWQganVzdCBmb3IgaXQuIEl0XG4gICAgICAgICAgICAgICAgLy8gb25seSB3b3JrcyBmb3IgdGhlIGBpbnNlcnRUZXh0YCBpbnB1dCB0eXBlLlxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQgJiZcbiAgICAgICAgICAgICAgICAgICFyZWFkT25seSAmJlxuICAgICAgICAgICAgICAgICAgIWlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uQmVmb3JlSW5wdXQpICYmXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNTZWxlY3RhYmxlVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgaWYgKCFSZWFjdEVkaXRvci5pc0NvbXBvc2luZyhlZGl0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSAoZXZlbnQgYXMgYW55KS5kYXRhIGFzIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICBFZGl0b3IuaW5zZXJ0VGV4dChlZGl0b3IsIHRleHQpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbcmVhZE9ubHldXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25JbnB1dD17dXNlQ2FsbGJhY2soKGV2ZW50OiBSZWFjdC5TeW50aGV0aWNFdmVudCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoYW5kcm9pZElucHV0TWFuYWdlcikge1xuICAgICAgICAgICAgICAgIGFuZHJvaWRJbnB1dE1hbmFnZXIuaGFuZGxlSW5wdXQoKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gRmx1c2ggbmF0aXZlIG9wZXJhdGlvbnMsIGFzIG5hdGl2ZSBldmVudHMgd2lsbCBoYXZlIHByb3BvZ2F0ZWRcbiAgICAgICAgICAgICAgLy8gYW5kIHdlIGNhbiBjb3JyZWN0bHkgY29tcGFyZSBET00gdGV4dCB2YWx1ZXMgaW4gY29tcG9uZW50c1xuICAgICAgICAgICAgICAvLyB0byBzdG9wIHJlbmRlcmluZywgc28gdGhhdCBicm93c2VyIGZ1bmN0aW9ucyBsaWtlIGF1dG9jb3JyZWN0XG4gICAgICAgICAgICAgIC8vIGFuZCBzcGVsbGNoZWNrIHdvcmsgYXMgZXhwZWN0ZWQuXG4gICAgICAgICAgICAgIGZvciAoY29uc3Qgb3Agb2YgZGVmZXJyZWRPcGVyYXRpb25zLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBvcCgpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVmZXJyZWRPcGVyYXRpb25zLmN1cnJlbnQgPSBbXVxuICAgICAgICAgICAgfSwgW10pfVxuICAgICAgICAgICAgb25CbHVyPXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5Gb2N1c0V2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIHJlYWRPbmx5IHx8XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nU2VsZWN0aW9uIHx8XG4gICAgICAgICAgICAgICAgICAhUmVhY3RFZGl0b3IuaGFzU2VsZWN0YWJsZVRhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkgfHxcbiAgICAgICAgICAgICAgICAgIGlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uQmx1cilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENPTVBBVDogSWYgdGhlIGN1cnJlbnQgYGFjdGl2ZUVsZW1lbnRgIGlzIHN0aWxsIHRoZSBwcmV2aW91c1xuICAgICAgICAgICAgICAgIC8vIG9uZSwgdGhpcyBpcyBkdWUgdG8gdGhlIHdpbmRvdyBiZWluZyBibHVycmVkIHdoZW4gdGhlIHRhYlxuICAgICAgICAgICAgICAgIC8vIGl0c2VsZiBiZWNvbWVzIHVuZm9jdXNlZCwgc28gd2Ugd2FudCB0byBhYm9ydCBlYXJseSB0byBhbGxvdyB0b1xuICAgICAgICAgICAgICAgIC8vIGVkaXRvciB0byBzdGF5IGZvY3VzZWQgd2hlbiB0aGUgdGFiIGJlY29tZXMgZm9jdXNlZCBhZ2Fpbi5cbiAgICAgICAgICAgICAgICBjb25zdCByb290ID0gUmVhY3RFZGl0b3IuZmluZERvY3VtZW50T3JTaGFkb3dSb290KGVkaXRvcilcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUubGF0ZXN0RWxlbWVudCA9PT0gcm9vdC5hY3RpdmVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB7IHJlbGF0ZWRUYXJnZXQgfSA9IGV2ZW50XG4gICAgICAgICAgICAgICAgY29uc3QgZWwgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBlZGl0b3IpXG5cbiAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IFRoZSBldmVudCBzaG91bGQgYmUgaWdub3JlZCBpZiB0aGUgZm9jdXMgaXMgcmV0dXJuaW5nXG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIGVkaXRvciBmcm9tIGFuIGVtYmVkZGVkIGVkaXRhYmxlIGVsZW1lbnQgKGVnLiBhbiA8aW5wdXQ+XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCBpbnNpZGUgYSB2b2lkIG5vZGUpLlxuICAgICAgICAgICAgICAgIGlmIChyZWxhdGVkVGFyZ2V0ID09PSBlbCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBUaGUgZXZlbnQgc2hvdWxkIGJlIGlnbm9yZWQgaWYgdGhlIGZvY3VzIGlzIG1vdmluZyBmcm9tXG4gICAgICAgICAgICAgICAgLy8gdGhlIGVkaXRvciB0byBpbnNpZGUgYSB2b2lkIG5vZGUncyBzcGFjZXIgZWxlbWVudC5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBpc0RPTUVsZW1lbnQocmVsYXRlZFRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgIHJlbGF0ZWRUYXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLXNsYXRlLXNwYWNlcicpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IFRoZSBldmVudCBzaG91bGQgYmUgaWdub3JlZCBpZiB0aGUgZm9jdXMgaXMgbW92aW5nIHRvIGFcbiAgICAgICAgICAgICAgICAvLyBub24tIGVkaXRhYmxlIHNlY3Rpb24gb2YgYW4gZWxlbWVudCB0aGF0IGlzbid0IGEgdm9pZCBub2RlIChlZy5cbiAgICAgICAgICAgICAgICAvLyBhIGxpc3QgaXRlbSBvZiB0aGUgY2hlY2sgbGlzdCBleGFtcGxlKS5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICByZWxhdGVkVGFyZ2V0ICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgIGlzRE9NTm9kZShyZWxhdGVkVGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzRE9NTm9kZShlZGl0b3IsIHJlbGF0ZWRUYXJnZXQpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gUmVhY3RFZGl0b3IudG9TbGF0ZU5vZGUoZWRpdG9yLCByZWxhdGVkVGFyZ2V0KVxuXG4gICAgICAgICAgICAgICAgICBpZiAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiYgIWVkaXRvci5pc1ZvaWQobm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBTYWZhcmkgZG9lc24ndCBhbHdheXMgcmVtb3ZlIHRoZSBzZWxlY3Rpb24gZXZlbiBpZiB0aGUgY29udGVudC1cbiAgICAgICAgICAgICAgICAvLyBlZGl0YWJsZSBlbGVtZW50IG5vIGxvbmdlciBoYXMgZm9jdXMuIFJlZmVyIHRvOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEyMzUzMjQ3L2ZvcmNlLWNvbnRlbnRlZGl0YWJsZS1kaXYtdG8tc3RvcC1hY2NlcHRpbmctaW5wdXQtYWZ0ZXItaXQtbG9zZXMtZm9jdXMtdW5kZXItd2ViXG4gICAgICAgICAgICAgICAgaWYgKElTX1NBRkFSSSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZG9tU2VsZWN0aW9uID0gcm9vdC5nZXRTZWxlY3Rpb24oKVxuICAgICAgICAgICAgICAgICAgZG9tU2VsZWN0aW9uPy5yZW1vdmVBbGxSYW5nZXMoKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIElTX0ZPQ1VTRUQuZGVsZXRlKGVkaXRvcilcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW3JlYWRPbmx5LCBhdHRyaWJ1dGVzLm9uQmx1cl1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbkNsaWNrPXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc1RhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICFpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkNsaWNrKSAmJlxuICAgICAgICAgICAgICAgICAgaXNET01Ob2RlKGV2ZW50LnRhcmdldClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBSZWFjdEVkaXRvci50b1NsYXRlTm9kZShlZGl0b3IsIGV2ZW50LnRhcmdldClcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIG5vZGUpXG5cbiAgICAgICAgICAgICAgICAgIC8vIEF0IHRoaXMgdGltZSwgdGhlIFNsYXRlIGRvY3VtZW50IG1heSBiZSBhcmJpdHJhcmlseSBkaWZmZXJlbnQsXG4gICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIG9uQ2xpY2sgaGFuZGxlcnMgY2FuIGNoYW5nZSB0aGUgZG9jdW1lbnQgYmVmb3JlIHdlIGdldCBoZXJlLlxuICAgICAgICAgICAgICAgICAgLy8gVGhlcmVmb3JlIHdlIG11c3QgY2hlY2sgdGhhdCB0aGlzIHBhdGggYWN0dWFsbHkgZXhpc3RzLFxuICAgICAgICAgICAgICAgICAgLy8gYW5kIHRoYXQgaXQgc3RpbGwgcmVmZXJzIHRvIHRoZSBzYW1lIG5vZGUuXG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICFFZGl0b3IuaGFzUGF0aChlZGl0b3IsIHBhdGgpIHx8XG4gICAgICAgICAgICAgICAgICAgIE5vZGUuZ2V0KGVkaXRvciwgcGF0aCkgIT09IG5vZGVcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRldGFpbCA9PT0gVFJJUExFX0NMSUNLICYmIHBhdGgubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NrUGF0aCA9IHBhdGhcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICEoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBub2RlKSlcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2sgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaDogbiA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXQ6IHBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgIGJsb2NrUGF0aCA9IGJsb2NrPy5bMV0gPz8gcGF0aC5zbGljZSgwLCAxKVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBibG9ja1BhdGgpXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgcmFuZ2UpXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAocmVhZE9ubHkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gRWRpdG9yLnN0YXJ0KGVkaXRvciwgcGF0aClcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IEVkaXRvci5lbmQoZWRpdG9yLCBwYXRoKVxuICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRWb2lkID0gRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0OiBzdGFydCB9KVxuICAgICAgICAgICAgICAgICAgY29uc3QgZW5kVm9pZCA9IEVkaXRvci52b2lkKGVkaXRvciwgeyBhdDogZW5kIH0pXG5cbiAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRWb2lkICYmXG4gICAgICAgICAgICAgICAgICAgIGVuZFZvaWQgJiZcbiAgICAgICAgICAgICAgICAgICAgUGF0aC5lcXVhbHMoc3RhcnRWb2lkWzFdLCBlbmRWb2lkWzFdKVxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgc3RhcnQpXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgcmFuZ2UpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbcmVhZE9ubHksIGF0dHJpYnV0ZXMub25DbGlja11cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbkNvbXBvc2l0aW9uRW5kPXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5Db21wb3NpdGlvbkV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChSZWFjdEVkaXRvci5oYXNTZWxlY3RhYmxlVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgaWYgKFJlYWN0RWRpdG9yLmlzQ29tcG9zaW5nKGVkaXRvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNDb21wb3NpbmcoZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIElTX0NPTVBPU0lORy5zZXQoZWRpdG9yLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgYW5kcm9pZElucHV0TWFuYWdlcj8uaGFuZGxlQ29tcG9zaXRpb25FbmQoZXZlbnQpXG5cbiAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25Db21wb3NpdGlvbkVuZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgSVNfQU5EUk9JRFxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IEluIENocm9tZSwgYGJlZm9yZWlucHV0YCBldmVudHMgZm9yIGNvbXBvc2l0aW9uc1xuICAgICAgICAgICAgICAgICAgLy8gYXJlbid0IGNvcnJlY3QgYW5kIG5ldmVyIGZpcmUgdGhlIFwiaW5zZXJ0RnJvbUNvbXBvc2l0aW9uXCJcbiAgICAgICAgICAgICAgICAgIC8vIHR5cGUgdGhhdCB3ZSBuZWVkLiBTbyBpbnN0ZWFkLCBpbnNlcnQgd2hlbmV2ZXIgYSBjb21wb3NpdGlvblxuICAgICAgICAgICAgICAgICAgLy8gZW5kcyBzaW5jZSBpdCB3aWxsIGFscmVhZHkgaGF2ZSBiZWVuIGNvbW1pdHRlZCB0byB0aGUgRE9NLlxuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAhSVNfU0FGQVJJICYmXG4gICAgICAgICAgICAgICAgICAgICFJU19GSVJFRk9YX0xFR0FDWSAmJlxuICAgICAgICAgICAgICAgICAgICAhSVNfSU9TICYmXG4gICAgICAgICAgICAgICAgICAgICFJU19XRUNIQVRCUk9XU0VSICYmXG4gICAgICAgICAgICAgICAgICAgICFJU19VQ19NT0JJTEUgJiZcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YVxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyTWFya3MgPSBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgIGVkaXRvclxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUy5kZWxldGUoZWRpdG9yKVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB3ZSBpbnNlcnQgdGV4dCB3aXRoIHRoZSBtYXJrcyB0aGUgdXNlciB3YXMgYWN0dWFsbHkgc2VlaW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChwbGFjZWhvbGRlck1hcmtzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBFRElUT1JfVE9fVVNFUl9NQVJLUy5zZXQoZWRpdG9yLCBlZGl0b3IubWFya3MpXG4gICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLm1hcmtzID0gcGxhY2Vob2xkZXJNYXJrc1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmluc2VydFRleHQoZWRpdG9yLCBldmVudC5kYXRhKVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJNYXJrcyA9IEVESVRPUl9UT19VU0VSX01BUktTLmdldChlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgIEVESVRPUl9UT19VU0VSX01BUktTLmRlbGV0ZShlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyTWFya3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5tYXJrcyA9IHVzZXJNYXJrc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbYXR0cmlidXRlcy5vbkNvbXBvc2l0aW9uRW5kXVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uQ29tcG9zaXRpb25VcGRhdGU9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkNvbXBvc2l0aW9uRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzU2VsZWN0YWJsZVRhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICFpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkNvbXBvc2l0aW9uVXBkYXRlKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgaWYgKCFSZWFjdEVkaXRvci5pc0NvbXBvc2luZyhlZGl0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldElzQ29tcG9zaW5nKHRydWUpXG4gICAgICAgICAgICAgICAgICAgIElTX0NPTVBPU0lORy5zZXQoZWRpdG9yLCB0cnVlKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW2F0dHJpYnV0ZXMub25Db21wb3NpdGlvblVwZGF0ZV1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbkNvbXBvc2l0aW9uU3RhcnQ9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkNvbXBvc2l0aW9uRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFJlYWN0RWRpdG9yLmhhc1NlbGVjdGFibGVUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICBhbmRyb2lkSW5wdXRNYW5hZ2VyPy5oYW5kbGVDb21wb3NpdGlvblN0YXJ0KGV2ZW50KVxuXG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uQ29tcG9zaXRpb25TdGFydCkgfHxcbiAgICAgICAgICAgICAgICAgICAgSVNfQU5EUk9JRFxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBzZXRJc0NvbXBvc2luZyh0cnVlKVxuXG4gICAgICAgICAgICAgICAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlubGluZSA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgICBtYXRjaDogbiA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzSW5saW5lKGVkaXRvciwgbiksXG4gICAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2hpZ2hlc3QnLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5saW5lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgWywgaW5saW5lUGF0aF0gPSBpbmxpbmVcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoRWRpdG9yLmlzRW5kKGVkaXRvciwgc2VsZWN0aW9uLmFuY2hvciwgaW5saW5lUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gRWRpdG9yLmFmdGVyKGVkaXRvciwgaW5saW5lUGF0aCkhXG4gICAgICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnNldFNlbGVjdGlvbihlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yOiBwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXM6IHBvaW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFthdHRyaWJ1dGVzLm9uQ29tcG9zaXRpb25TdGFydF1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbkNvcHk9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkNsaXBib2FyZEV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc1NlbGVjdGFibGVUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICAhaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25Db3B5KVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3Iuc2V0RnJhZ21lbnREYXRhKFxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmNsaXBib2FyZERhdGEsXG4gICAgICAgICAgICAgICAgICAgICdjb3B5J1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW2F0dHJpYnV0ZXMub25Db3B5XVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uQ3V0PXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5DbGlwYm9hcmRFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhcmVhZE9ubHkgJiZcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc1NlbGVjdGFibGVUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICAhaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25DdXQpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5zZXRGcmFnbWVudERhdGEoXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuY2xpcGJvYXJkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgJ2N1dCdcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcblxuICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gTm9kZS5wYXJlbnQoZWRpdG9yLCBzZWxlY3Rpb24uYW5jaG9yLnBhdGgpXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW3JlYWRPbmx5LCBhdHRyaWJ1dGVzLm9uQ3V0XVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uRHJhZ092ZXI9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkRyYWdFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICAhaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25EcmFnT3ZlcilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIC8vIE9ubHkgd2hlbiB0aGUgdGFyZ2V0IGlzIHZvaWQsIGNhbGwgYHByZXZlbnREZWZhdWx0YCB0byBzaWduYWxcbiAgICAgICAgICAgICAgICAgIC8vIHRoYXQgZHJvcHMgYXJlIGFsbG93ZWQuIEVkaXRhYmxlIGNvbnRlbnQgaXMgZHJvcHBhYmxlIGJ5XG4gICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0LCBhbmQgY2FsbGluZyBgcHJldmVudERlZmF1bHRgIGhpZGVzIHRoZSBjdXJzb3IuXG4gICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gUmVhY3RFZGl0b3IudG9TbGF0ZU5vZGUoZWRpdG9yLCBldmVudC50YXJnZXQpXG5cbiAgICAgICAgICAgICAgICAgIGlmIChFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJiBFZGl0b3IuaXNWb2lkKGVkaXRvciwgbm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW2F0dHJpYnV0ZXMub25EcmFnT3Zlcl1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbkRyYWdTdGFydD17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuRHJhZ0V2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFyZWFkT25seSAmJlxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgIWlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uRHJhZ1N0YXJ0KVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVOb2RlKGVkaXRvciwgZXZlbnQudGFyZ2V0KVxuICAgICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgbm9kZSlcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHZvaWRNYXRjaCA9XG4gICAgICAgICAgICAgICAgICAgIChFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJiBFZGl0b3IuaXNWb2lkKGVkaXRvciwgbm9kZSkpIHx8XG4gICAgICAgICAgICAgICAgICAgIEVkaXRvci52b2lkKGVkaXRvciwgeyBhdDogcGF0aCwgdm9pZHM6IHRydWUgfSlcblxuICAgICAgICAgICAgICAgICAgLy8gSWYgc3RhcnRpbmcgYSBkcmFnIG9uIGEgdm9pZCBub2RlLCBtYWtlIHN1cmUgaXQgaXMgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgIC8vIHNvIHRoYXQgaXQgc2hvd3MgdXAgaW4gdGhlIHNlbGVjdGlvbidzIGZyYWdtZW50LlxuICAgICAgICAgICAgICAgICAgaWYgKHZvaWRNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIHBhdGgpXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgcmFuZ2UpXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIHN0YXRlLmlzRHJhZ2dpbmdJbnRlcm5hbGx5ID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5zZXRGcmFnbWVudERhdGEoXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLFxuICAgICAgICAgICAgICAgICAgICAnZHJhZydcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFtyZWFkT25seSwgYXR0cmlidXRlcy5vbkRyYWdTdGFydF1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbkRyb3A9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkRyYWdFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhcmVhZE9ubHkgJiZcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc1RhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICFpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkRyb3ApXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgICAgICAgICAgIC8vIEtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIGRyYWdnZWQgcmFuZ2UgYmVmb3JlIHVwZGF0aW5nIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgY29uc3QgZHJhZ2dlZFJhbmdlID0gZWRpdG9yLnNlbGVjdGlvblxuXG4gICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSByYW5nZSB3aGVyZSB0aGUgZHJvcCBoYXBwZW5lZFxuICAgICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBSZWFjdEVkaXRvci5maW5kRXZlbnRSYW5nZShlZGl0b3IsIGV2ZW50KVxuICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGFUcmFuc2ZlclxuXG4gICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHJhbmdlKVxuXG4gICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaXNEcmFnZ2luZ0ludGVybmFsbHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgIGRyYWdnZWRSYW5nZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICFSYW5nZS5lcXVhbHMoZHJhZ2dlZFJhbmdlLCByYW5nZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAhRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0OiByYW5nZSwgdm9pZHM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdDogZHJhZ2dlZFJhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaW5zZXJ0RGF0YShlZGl0b3IsIGRhdGEpXG5cbiAgICAgICAgICAgICAgICAgIC8vIFdoZW4gZHJhZ2dpbmcgZnJvbSBhbm90aGVyIHNvdXJjZSBpbnRvIHRoZSBlZGl0b3IsIGl0J3MgcG9zc2libGVcbiAgICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhlIGN1cnJlbnQgZWRpdG9yIGRvZXMgbm90IGhhdmUgZm9jdXMuXG4gICAgICAgICAgICAgICAgICBpZiAoIVJlYWN0RWRpdG9yLmlzRm9jdXNlZChlZGl0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmZvY3VzKGVkaXRvcilcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzdGF0ZS5pc0RyYWdnaW5nSW50ZXJuYWxseSA9IGZhbHNlXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFtyZWFkT25seSwgYXR0cmlidXRlcy5vbkRyb3BdXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25EcmFnRW5kPXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgIXJlYWRPbmx5ICYmXG4gICAgICAgICAgICAgICAgICBzdGF0ZS5pc0RyYWdnaW5nSW50ZXJuYWxseSAmJlxuICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5vbkRyYWdFbmQgJiZcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc1RhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMub25EcmFnRW5kKGV2ZW50KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFdoZW4gZHJvcHBpbmcgb24gYSBkaWZmZXJlbnQgZHJvcHBhYmxlIGVsZW1lbnQgdGhhbiB0aGUgY3VycmVudCBlZGl0b3IsXG4gICAgICAgICAgICAgICAgLy8gYG9uRHJvcGAgaXMgbm90IGNhbGxlZC4gU28gd2UgbmVlZCB0byBjbGVhbiB1cCBpbiBgb25EcmFnRW5kYCBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgIC8vIE5vdGU6IGBvbkRyYWdFbmRgIGlzIG9ubHkgY2FsbGVkIHdoZW4gYG9uRHJvcGAgaXMgbm90IGNhbGxlZFxuICAgICAgICAgICAgICAgIHN0YXRlLmlzRHJhZ2dpbmdJbnRlcm5hbGx5ID0gZmFsc2VcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW3JlYWRPbmx5LCBhdHRyaWJ1dGVzLm9uRHJhZ0VuZF1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbkZvY3VzPXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5Gb2N1c0V2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFyZWFkT25seSAmJlxuICAgICAgICAgICAgICAgICAgIXN0YXRlLmlzVXBkYXRpbmdTZWxlY3Rpb24gJiZcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc0VkaXRhYmxlVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgIWlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uRm9jdXMpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcilcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb3QgPSBSZWFjdEVkaXRvci5maW5kRG9jdW1lbnRPclNoYWRvd1Jvb3QoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgc3RhdGUubGF0ZXN0RWxlbWVudCA9IHJvb3QuYWN0aXZlRWxlbWVudFxuXG4gICAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IElmIHRoZSBlZGl0b3IgaGFzIG5lc3RlZCBlZGl0YWJsZSBlbGVtZW50cywgdGhlIGZvY3VzXG4gICAgICAgICAgICAgICAgICAvLyBjYW4gZ28gdG8gdGhlbS4gSW4gRmlyZWZveCwgdGhpcyBtdXN0IGJlIHByZXZlbnRlZCBiZWNhdXNlIGl0XG4gICAgICAgICAgICAgICAgICAvLyByZXN1bHRzIGluIGlzc3VlcyB3aXRoIGtleWJvYXJkIG5hdmlnYXRpb24uICgyMDE3LzAzLzMwKVxuICAgICAgICAgICAgICAgICAgaWYgKElTX0ZJUkVGT1ggJiYgZXZlbnQudGFyZ2V0ICE9PSBlbCkge1xuICAgICAgICAgICAgICAgICAgICBlbC5mb2N1cygpXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBJU19GT0NVU0VELnNldChlZGl0b3IsIHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbcmVhZE9ubHksIGF0dHJpYnV0ZXMub25Gb2N1c11cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbktleURvd249e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LktleWJvYXJkRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgIXJlYWRPbmx5ICYmXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNFZGl0YWJsZVRhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGFuZHJvaWRJbnB1dE1hbmFnZXI/LmhhbmRsZUtleURvd24oZXZlbnQpXG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbmF0aXZlRXZlbnQgfSA9IGV2ZW50XG5cbiAgICAgICAgICAgICAgICAgIC8vIENPTVBBVDogVGhlIGNvbXBvc2l0aW9uIGVuZCBldmVudCBpc24ndCBmaXJlZCByZWxpYWJseSBpbiBhbGwgYnJvd3NlcnMsXG4gICAgICAgICAgICAgICAgICAvLyBzbyB3ZSBzb21ldGltZXMgbWlnaHQgZW5kIHVwIHN0dWNrIGluIGEgY29tcG9zaXRpb24gc3RhdGUgZXZlbiB0aG91Z2ggd2VcbiAgICAgICAgICAgICAgICAgIC8vIGFyZW4ndCBjb21wb3NpbmcgYW55IG1vcmUuXG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmlzQ29tcG9zaW5nKGVkaXRvcikgJiZcbiAgICAgICAgICAgICAgICAgICAgbmF0aXZlRXZlbnQuaXNDb21wb3NpbmcgPT09IGZhbHNlXG4gICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgSVNfQ09NUE9TSU5HLnNldChlZGl0b3IsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICBzZXRJc0NvbXBvc2luZyhmYWxzZSlcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbktleURvd24pIHx8XG4gICAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmlzQ29tcG9zaW5nKGVkaXRvcilcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9XG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5jaGlsZHJlbltcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24gIT09IG51bGwgPyBzZWxlY3Rpb24uZm9jdXMucGF0aFswXSA6IDBcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgY29uc3QgaXNSVEwgPSBnZXREaXJlY3Rpb24oTm9kZS5zdHJpbmcoZWxlbWVudCkpID09PSAncnRsJ1xuXG4gICAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IFNpbmNlIHdlIHByZXZlbnQgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb25cbiAgICAgICAgICAgICAgICAgIC8vIGBiZWZvcmVpbnB1dGAgZXZlbnRzLCB0aGUgYnJvd3NlciBkb2Vzbid0IHRoaW5rIHRoZXJlJ3MgZXZlclxuICAgICAgICAgICAgICAgICAgLy8gYW55IGhpc3Rvcnkgc3RhY2sgdG8gdW5kbyBvciByZWRvLCBzbyB3ZSBoYXZlIHRvIG1hbmFnZSB0aGVzZVxuICAgICAgICAgICAgICAgICAgLy8gaG90a2V5cyBvdXJzZWx2ZXMuICgyMDE5LzExLzA2KVxuICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNSZWRvKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heWJlSGlzdG9yeUVkaXRvcjogYW55ID0gZWRpdG9yXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXliZUhpc3RvcnlFZGl0b3IucmVkbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgIG1heWJlSGlzdG9yeUVkaXRvci5yZWRvKClcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc1VuZG8obmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF5YmVIaXN0b3J5RWRpdG9yOiBhbnkgPSBlZGl0b3JcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1heWJlSGlzdG9yeUVkaXRvci51bmRvID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgbWF5YmVIaXN0b3J5RWRpdG9yLnVuZG8oKVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIC8vIENPTVBBVDogQ2VydGFpbiBicm93c2VycyBkb24ndCBoYW5kbGUgdGhlIHNlbGVjdGlvbiB1cGRhdGVzXG4gICAgICAgICAgICAgICAgICAvLyBwcm9wZXJseS4gSW4gQ2hyb21lLCB0aGUgc2VsZWN0aW9uIGlzbid0IHByb3Blcmx5IGV4dGVuZGVkLlxuICAgICAgICAgICAgICAgICAgLy8gQW5kIGluIEZpcmVmb3gsIHRoZSBzZWxlY3Rpb24gaXNuJ3QgcHJvcGVybHkgY29sbGFwc2VkLlxuICAgICAgICAgICAgICAgICAgLy8gKDIwMTcvMTAvMTcpXG4gICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc01vdmVMaW5lQmFja3dhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlKGVkaXRvciwgeyB1bml0OiAnbGluZScsIHJldmVyc2U6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzTW92ZUxpbmVGb3J3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZShlZGl0b3IsIHsgdW5pdDogJ2xpbmUnIH0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc0V4dGVuZExpbmVCYWNrd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmUoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgdW5pdDogJ2xpbmUnLFxuICAgICAgICAgICAgICAgICAgICAgIGVkZ2U6ICdmb2N1cycsXG4gICAgICAgICAgICAgICAgICAgICAgcmV2ZXJzZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzRXh0ZW5kTGluZUZvcndhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlKGVkaXRvciwgeyB1bml0OiAnbGluZScsIGVkZ2U6ICdmb2N1cycgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIC8vIENPTVBBVDogSWYgYSB2b2lkIG5vZGUgaXMgc2VsZWN0ZWQsIG9yIGEgemVyby13aWR0aCB0ZXh0IG5vZGVcbiAgICAgICAgICAgICAgICAgIC8vIGFkamFjZW50IHRvIGFuIGlubGluZSBpcyBzZWxlY3RlZCwgd2UgbmVlZCB0byBoYW5kbGUgdGhlc2VcbiAgICAgICAgICAgICAgICAgIC8vIGhvdGtleXMgbWFudWFsbHkgYmVjYXVzZSBicm93c2VycyB3b24ndCBiZSBhYmxlIHRvIHNraXAgb3ZlclxuICAgICAgICAgICAgICAgICAgLy8gdGhlIHZvaWQgbm9kZSB3aXRoIHRoZSB6ZXJvLXdpZHRoIHNwYWNlIG5vdCBiZWluZyBhbiBlbXB0eVxuICAgICAgICAgICAgICAgICAgLy8gc3RyaW5nLlxuICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNNb3ZlQmFja3dhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmUoZWRpdG9yLCB7IHJldmVyc2U6ICFpc1JUTCB9KVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuY29sbGFwc2UoZWRpdG9yLCB7IGVkZ2U6ICdzdGFydCcgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc01vdmVGb3J3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlKGVkaXRvciwgeyByZXZlcnNlOiBpc1JUTCB9KVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuY29sbGFwc2UoZWRpdG9yLCB7IGVkZ2U6ICdlbmQnIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNNb3ZlV29yZEJhY2t3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLmNvbGxhcHNlKGVkaXRvciwgeyBlZGdlOiAnZm9jdXMnIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmUoZWRpdG9yLCB7IHVuaXQ6ICd3b3JkJywgcmV2ZXJzZTogIWlzUlRMIH0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc01vdmVXb3JkRm9yd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5jb2xsYXBzZShlZGl0b3IsIHsgZWRnZTogJ2ZvY3VzJyB9KVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlKGVkaXRvciwgeyB1bml0OiAnd29yZCcsIHJldmVyc2U6IGlzUlRMIH0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IENlcnRhaW4gYnJvd3NlcnMgZG9uJ3Qgc3VwcG9ydCB0aGUgYGJlZm9yZWlucHV0YCBldmVudCwgc28gd2VcbiAgICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBndWVzc2luZyBhdCB0aGUgaW5wdXQgaW50ZW50aW9uIGZvciBob3RrZXlzLlxuICAgICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBJbiBpT1MsIHNvbWUgb2YgdGhlc2UgaG90a2V5cyBhcmUgaGFuZGxlZCBpbiB0aGVcbiAgICAgICAgICAgICAgICAgIGlmICghSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGhhdmUgYSBjb3JlIGJlaGF2aW9yIGZvciB0aGVzZSwgYnV0IHRoZXkgY2hhbmdlIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBET00gaWYgd2UgZG9uJ3QgcHJldmVudCB0aGVtLCBzbyB3ZSBoYXZlIHRvLlxuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgSG90a2V5cy5pc0JvbGQobmF0aXZlRXZlbnQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgSG90a2V5cy5pc0l0YWxpYyhuYXRpdmVFdmVudCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICBIb3RrZXlzLmlzVHJhbnNwb3NlQ2hhcmFjdGVyKG5hdGl2ZUV2ZW50KVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc1NvZnRCcmVhayhuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmluc2VydFNvZnRCcmVhayhlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc1NwbGl0QmxvY2sobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5pbnNlcnRCcmVhayhlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc0RlbGV0ZUJhY2t3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yLCB7IGRpcmVjdGlvbjogJ2JhY2t3YXJkJyB9KVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNEZWxldGVGb3J3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yLCB7IGRpcmVjdGlvbjogJ2ZvcndhcmQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzRGVsZXRlTGluZUJhY2t3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yLCB7IGRpcmVjdGlvbjogJ2JhY2t3YXJkJyB9KVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJyB9KVxuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNEZWxldGVMaW5lRm9yd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvciwgeyBkaXJlY3Rpb246ICdmb3J3YXJkJyB9KVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IsIHsgdW5pdDogJ2xpbmUnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc0RlbGV0ZVdvcmRCYWNrd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvciwgeyBkaXJlY3Rpb246ICdiYWNrd2FyZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgeyB1bml0OiAnd29yZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzRGVsZXRlV29yZEZvcndhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IsIHsgZGlyZWN0aW9uOiAnZm9yd2FyZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yLCB7IHVuaXQ6ICd3b3JkJyB9KVxuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoSVNfQ0hST01FIHx8IElTX1NBRkFSSSkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIENPTVBBVDogQ2hyb21lIGFuZCBTYWZhcmkgc3VwcG9ydCBgYmVmb3JlaW5wdXRgIGV2ZW50IGJ1dCBkbyBub3QgZmlyZVxuICAgICAgICAgICAgICAgICAgICAgIC8vIGFuIGV2ZW50IHdoZW4gZGVsZXRpbmcgYmFja3dhcmRzIGluIGEgc2VsZWN0ZWQgdm9pZCBpbmxpbmUgbm9kZVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKEhvdGtleXMuaXNEZWxldGVCYWNrd2FyZChuYXRpdmVFdmVudCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSG90a2V5cy5pc0RlbGV0ZUZvcndhcmQobmF0aXZlRXZlbnQpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgUmFuZ2UuaXNDb2xsYXBzZWQoc2VsZWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE5vZGUgPSBOb2RlLnBhcmVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24uYW5jaG9yLnBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50LmlzRWxlbWVudChjdXJyZW50Tm9kZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmlzVm9pZChlZGl0b3IsIGN1cnJlbnROb2RlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAoRWRpdG9yLmlzSW5saW5lKGVkaXRvciwgY3VycmVudE5vZGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBjdXJyZW50Tm9kZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yLCB7IHVuaXQ6ICdibG9jaycgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFtyZWFkT25seSwgYXR0cmlidXRlcy5vbktleURvd25dXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25QYXN0ZT17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuQ2xpcGJvYXJkRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgIXJlYWRPbmx5ICYmXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNTZWxlY3RhYmxlVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgIWlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uUGFzdGUpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IENlcnRhaW4gYnJvd3NlcnMgZG9uJ3Qgc3VwcG9ydCB0aGUgYGJlZm9yZWlucHV0YCBldmVudCwgc28gd2VcbiAgICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBSZWFjdCdzIGBvblBhc3RlYCBoZXJlIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IEZpcmVmb3gsIENocm9tZSBhbmQgU2FmYXJpIGRvbid0IGVtaXQgYGJlZm9yZWlucHV0YCBldmVudHNcbiAgICAgICAgICAgICAgICAgIC8vIHdoZW4gXCJwYXN0ZSB3aXRob3V0IGZvcm1hdHRpbmdcIiBpcyB1c2VkLCBzbyBmYWxsYmFjay4gKDIwMjAvMDIvMjApXG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICFIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQgfHxcbiAgICAgICAgICAgICAgICAgICAgaXNQbGFpblRleHRPbmx5UGFzdGUoZXZlbnQubmF0aXZlRXZlbnQpXG4gICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5pbnNlcnREYXRhKGVkaXRvciwgZXZlbnQuY2xpcGJvYXJkRGF0YSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFtyZWFkT25seSwgYXR0cmlidXRlcy5vblBhc3RlXVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Q2hpbGRyZW5cbiAgICAgICAgICAgICAgZGVjb3JhdGlvbnM9e2RlY29yYXRpb25zfVxuICAgICAgICAgICAgICBub2RlPXtlZGl0b3J9XG4gICAgICAgICAgICAgIHJlbmRlckVsZW1lbnQ9e3JlbmRlckVsZW1lbnR9XG4gICAgICAgICAgICAgIHJlbmRlclBsYWNlaG9sZGVyPXtyZW5kZXJQbGFjZWhvbGRlcn1cbiAgICAgICAgICAgICAgcmVuZGVyTGVhZj17cmVuZGVyTGVhZn1cbiAgICAgICAgICAgICAgc2VsZWN0aW9uPXtlZGl0b3Iuc2VsZWN0aW9ufVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0NvbXBvbmVudD5cbiAgICAgICAgPC9SZXN0b3JlRE9NPlxuICAgICAgPC9EZWNvcmF0ZUNvbnRleHQuUHJvdmlkZXI+XG4gICAgPC9SZWFkT25seUNvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cblxuLyoqXG4gKiBUaGUgcHJvcHMgdGhhdCBnZXQgcGFzc2VkIHRvIHJlbmRlclBsYWNlaG9sZGVyXG4gKi9cbmV4cG9ydCB0eXBlIFJlbmRlclBsYWNlaG9sZGVyUHJvcHMgPSB7XG4gIGNoaWxkcmVuOiBhbnlcbiAgYXR0cmlidXRlczoge1xuICAgICdkYXRhLXNsYXRlLXBsYWNlaG9sZGVyJzogYm9vbGVhblxuICAgIGRpcj86ICdydGwnXG4gICAgY29udGVudEVkaXRhYmxlOiBib29sZWFuXG4gICAgcmVmOiBSZWFjdC5SZWZPYmplY3Q8YW55PlxuICAgIHN0eWxlOiBSZWFjdC5DU1NQcm9wZXJ0aWVzXG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBwbGFjZWhvbGRlciBlbGVtZW50XG4gKi9cblxuZXhwb3J0IGNvbnN0IERlZmF1bHRQbGFjZWhvbGRlciA9ICh7XG4gIGF0dHJpYnV0ZXMsXG4gIGNoaWxkcmVuLFxufTogUmVuZGVyUGxhY2Vob2xkZXJQcm9wcykgPT4gKFxuICAvLyBDT01QQVQ6IEFydGlmaWNpYWxseSBhZGQgYSBsaW5lLWJyZWFrIHRvIHRoZSBlbmQgb24gdGhlIHBsYWNlaG9sZGVyIGVsZW1lbnRcbiAgLy8gdG8gcHJldmVudCBBbmRyb2lkIElNRXMgdG8gcGljayB1cCBpdHMgY29udGVudCBpbiBhdXRvY29ycmVjdCBhbmQgdG8gYXV0by1jYXBpdGFsaXplIHRoZSBmaXJzdCBsZXR0ZXJcbiAgPHNwYW4gey4uLmF0dHJpYnV0ZXN9PlxuICAgIHtjaGlsZHJlbn1cbiAgICB7SVNfQU5EUk9JRCAmJiA8YnIgLz59XG4gIDwvc3Bhbj5cbilcblxuLyoqXG4gKiBBIGRlZmF1bHQgbWVtb2l6ZWQgZGVjb3JhdGUgZnVuY3Rpb24uXG4gKi9cblxuZXhwb3J0IGNvbnN0IGRlZmF1bHREZWNvcmF0ZTogKGVudHJ5OiBOb2RlRW50cnkpID0+IFJhbmdlW10gPSAoKSA9PiBbXVxuXG4vKipcbiAqIEEgZGVmYXVsdCBpbXBsZW1lbnQgdG8gc2Nyb2xsIGRvbSByYW5nZSBpbnRvIHZpZXcuXG4gKi9cblxuY29uc3QgZGVmYXVsdFNjcm9sbFNlbGVjdGlvbkludG9WaWV3ID0gKFxuICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICBkb21SYW5nZTogRE9NUmFuZ2VcbikgPT4ge1xuICAvLyBUaGlzIHdhcyBhZmZlY3RpbmcgdGhlIHNlbGVjdGlvbiBvZiBtdWx0aXBsZSBibG9ja3MgYW5kIGRyYWdnaW5nIGJlaGF2aW9yLFxuICAvLyBzbyBlbmFibGVkIG9ubHkgaWYgdGhlIHNlbGVjdGlvbiBoYXMgYmVlbiBjb2xsYXBzZWQuXG4gIGlmIChcbiAgICBkb21SYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgJiZcbiAgICAoIWVkaXRvci5zZWxlY3Rpb24gfHxcbiAgICAgIChlZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pKSlcbiAgKSB7XG4gICAgY29uc3QgbGVhZkVsID0gZG9tUmFuZ2Uuc3RhcnRDb250YWluZXIucGFyZW50RWxlbWVudCFcbiAgICBsZWFmRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID0gZG9tUmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmJpbmQoZG9tUmFuZ2UpXG4gICAgc2Nyb2xsSW50b1ZpZXcobGVhZkVsLCB7XG4gICAgICBzY3JvbGxNb2RlOiAnaWYtbmVlZGVkJyxcbiAgICB9KVxuXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBhbiB1bm9ydGhvZG94IGRlbGV0ZSBEOlxuICAgIGRlbGV0ZSBsZWFmRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBldmVudCBpcyBvdmVycmlkZWQgYnkgYSBoYW5kbGVyLlxuICovXG5cbmV4cG9ydCBjb25zdCBpc0V2ZW50SGFuZGxlZCA9IDxcbiAgRXZlbnRUeXBlIGV4dGVuZHMgUmVhY3QuU3ludGhldGljRXZlbnQ8dW5rbm93biwgdW5rbm93bj5cbj4oXG4gIGV2ZW50OiBFdmVudFR5cGUsXG4gIGhhbmRsZXI/OiAoZXZlbnQ6IEV2ZW50VHlwZSkgPT4gdm9pZCB8IGJvb2xlYW5cbikgPT4ge1xuICBpZiAoIWhhbmRsZXIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICAvLyBUaGUgY3VzdG9tIGV2ZW50IGhhbmRsZXIgbWF5IHJldHVybiBhIGJvb2xlYW4gdG8gc3BlY2lmeSB3aGV0aGVyIHRoZSBldmVudFxuICAvLyBzaGFsbCBiZSB0cmVhdGVkIGFzIGJlaW5nIGhhbmRsZWQgb3Igbm90LlxuICBjb25zdCBzaG91bGRUcmVhdEV2ZW50QXNIYW5kbGVkID0gaGFuZGxlcihldmVudClcblxuICBpZiAoc2hvdWxkVHJlYXRFdmVudEFzSGFuZGxlZCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHNob3VsZFRyZWF0RXZlbnRBc0hhbmRsZWRcbiAgfVxuXG4gIHJldHVybiBldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fCBldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBET00gZXZlbnQgaXMgb3ZlcnJpZGVkIGJ5IGEgaGFuZGxlci5cbiAqL1xuXG5leHBvcnQgY29uc3QgaXNET01FdmVudEhhbmRsZWQgPSA8RSBleHRlbmRzIEV2ZW50PihcbiAgZXZlbnQ6IEUsXG4gIGhhbmRsZXI/OiAoZXZlbnQ6IEUpID0+IHZvaWQgfCBib29sZWFuXG4pID0+IHtcbiAgaWYgKCFoYW5kbGVyKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBUaGUgY3VzdG9tIGV2ZW50IGhhbmRsZXIgbWF5IHJldHVybiBhIGJvb2xlYW4gdG8gc3BlY2lmeSB3aGV0aGVyIHRoZSBldmVudFxuICAvLyBzaGFsbCBiZSB0cmVhdGVkIGFzIGJlaW5nIGhhbmRsZWQgb3Igbm90LlxuICBjb25zdCBzaG91bGRUcmVhdEV2ZW50QXNIYW5kbGVkID0gaGFuZGxlcihldmVudClcblxuICBpZiAoc2hvdWxkVHJlYXRFdmVudEFzSGFuZGxlZCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHNob3VsZFRyZWF0RXZlbnRBc0hhbmRsZWRcbiAgfVxuXG4gIHJldHVybiBldmVudC5kZWZhdWx0UHJldmVudGVkXG59XG4iLCAiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0J1xuXG4vKipcbiAqIEEgUmVhY3QgY29udGV4dCBmb3Igc2hhcmluZyB0aGUgYGZvY3VzZWRgIHN0YXRlIG9mIHRoZSBlZGl0b3IuXG4gKi9cblxuZXhwb3J0IGNvbnN0IEZvY3VzZWRDb250ZXh0ID0gY3JlYXRlQ29udGV4dChmYWxzZSlcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgYGZvY3VzZWRgIHN0YXRlIG9mIHRoZSBlZGl0b3IuXG4gKi9cblxuZXhwb3J0IGNvbnN0IHVzZUZvY3VzZWQgPSAoKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiB1c2VDb250ZXh0KEZvY3VzZWRDb250ZXh0KVxufVxuIiwgImltcG9ydCB7XG4gIGNyZWF0ZUNvbnRleHQsXG4gIHVzZUNhbGxiYWNrLFxuICB1c2VDb250ZXh0LFxuICB1c2VNZW1vLFxuICB1c2VSZWR1Y2VyLFxuICB1c2VSZWYsXG59IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IH0gZnJvbSAnLi91c2UtaXNvbW9ycGhpYy1sYXlvdXQtZWZmZWN0J1xuXG5mdW5jdGlvbiBpc0Vycm9yKGVycm9yOiBhbnkpOiBlcnJvciBpcyBFcnJvciB7XG4gIHJldHVybiBlcnJvciBpbnN0YW5jZW9mIEVycm9yXG59XG5cbnR5cGUgRWRpdG9yQ2hhbmdlSGFuZGxlciA9IChlZGl0b3I6IEVkaXRvcikgPT4gdm9pZFxuLyoqXG4gKiBBIFJlYWN0IGNvbnRleHQgZm9yIHNoYXJpbmcgdGhlIGVkaXRvciBzZWxlY3RvciBjb250ZXh0IGluIGEgd2F5IHRvIGNvbnRyb2wgcmVyZW5kZXJzXG4gKi9cblxuZXhwb3J0IGNvbnN0IFNsYXRlU2VsZWN0b3JDb250ZXh0ID0gY3JlYXRlQ29udGV4dDx7XG4gIGdldFNsYXRlOiAoKSA9PiBFZGl0b3JcbiAgYWRkRXZlbnRMaXN0ZW5lcjogKGNhbGxiYWNrOiBFZGl0b3JDaGFuZ2VIYW5kbGVyKSA9PiAoKSA9PiB2b2lkXG59Pih7fSBhcyBhbnkpXG5cbmNvbnN0IHJlZkVxdWFsaXR5ID0gKGE6IGFueSwgYjogYW55KSA9PiBhID09PSBiXG5cbi8qKlxuICogdXNlIHJlZHV4IHN0eWxlIHNlbGVjdG9ycyB0byBwcmV2ZW50IHJlcmVuZGVyaW5nIG9uIGV2ZXJ5IGtleXN0cm9rZS5cbiAqIEJlYXIgaW4gbWluZCByZXJlbmRlcmluZyBjYW4gb25seSBwcmV2ZW50ZWQgaWYgdGhlIHJldHVybmVkIHZhbHVlIGlzIGEgdmFsdWUgdHlwZSBvciBmb3IgcmVmZXJlbmNlIHR5cGVzIChlLmcuIG9iamVjdHMgYW5kIGFycmF5cykgYWRkIGEgY3VzdG9tIGVxdWFsaXR5IGZ1bmN0aW9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKiBgYGBcbiAqICBjb25zdCBpc1NlbGVjdGlvbkFjdGl2ZSA9IHVzZVNsYXRlU2VsZWN0b3IoZWRpdG9yID0+IEJvb2xlYW4oZWRpdG9yLnNlbGVjdGlvbikpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VTbGF0ZVNlbGVjdG9yPFQ+KFxuICBzZWxlY3RvcjogKGVkaXRvcjogRWRpdG9yKSA9PiBULFxuICBlcXVhbGl0eUZuOiAoYTogVCwgYjogVCkgPT4gYm9vbGVhbiA9IHJlZkVxdWFsaXR5XG4pIHtcbiAgY29uc3QgWywgZm9yY2VSZW5kZXJdID0gdXNlUmVkdWNlcihzID0+IHMgKyAxLCAwKVxuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChTbGF0ZVNlbGVjdG9yQ29udGV4dClcbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFRoZSBcXGB1c2VTbGF0ZVNlbGVjdG9yXFxgIGhvb2sgbXVzdCBiZSB1c2VkIGluc2lkZSB0aGUgPFNsYXRlPiBjb21wb25lbnQncyBjb250ZXh0LmBcbiAgICApXG4gIH1cbiAgY29uc3QgeyBnZXRTbGF0ZSwgYWRkRXZlbnRMaXN0ZW5lciB9ID0gY29udGV4dFxuXG4gIGNvbnN0IGxhdGVzdFN1YnNjcmlwdGlvbkNhbGxiYWNrRXJyb3IgPSB1c2VSZWY8RXJyb3IgfCB1bmRlZmluZWQ+KClcbiAgY29uc3QgbGF0ZXN0U2VsZWN0b3IgPSB1c2VSZWY8KGVkaXRvcjogRWRpdG9yKSA9PiBUPigoKSA9PiBudWxsIGFzIGFueSlcbiAgY29uc3QgbGF0ZXN0U2VsZWN0ZWRTdGF0ZSA9IHVzZVJlZjxUPigobnVsbCBhcyBhbnkpIGFzIFQpXG4gIGxldCBzZWxlY3RlZFN0YXRlOiBUXG5cbiAgdHJ5IHtcbiAgICBpZiAoXG4gICAgICBzZWxlY3RvciAhPT0gbGF0ZXN0U2VsZWN0b3IuY3VycmVudCB8fFxuICAgICAgbGF0ZXN0U3Vic2NyaXB0aW9uQ2FsbGJhY2tFcnJvci5jdXJyZW50XG4gICAgKSB7XG4gICAgICBzZWxlY3RlZFN0YXRlID0gc2VsZWN0b3IoZ2V0U2xhdGUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZWN0ZWRTdGF0ZSA9IGxhdGVzdFNlbGVjdGVkU3RhdGUuY3VycmVudFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKGxhdGVzdFN1YnNjcmlwdGlvbkNhbGxiYWNrRXJyb3IuY3VycmVudCAmJiBpc0Vycm9yKGVycikpIHtcbiAgICAgIGVyci5tZXNzYWdlICs9IGBcXG5UaGUgZXJyb3IgbWF5IGJlIGNvcnJlbGF0ZWQgd2l0aCB0aGlzIHByZXZpb3VzIGVycm9yOlxcbiR7bGF0ZXN0U3Vic2NyaXB0aW9uQ2FsbGJhY2tFcnJvci5jdXJyZW50LnN0YWNrfVxcblxcbmBcbiAgICB9XG5cbiAgICB0aHJvdyBlcnJcbiAgfVxuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBsYXRlc3RTZWxlY3Rvci5jdXJyZW50ID0gc2VsZWN0b3JcbiAgICBsYXRlc3RTZWxlY3RlZFN0YXRlLmN1cnJlbnQgPSBzZWxlY3RlZFN0YXRlXG4gICAgbGF0ZXN0U3Vic2NyaXB0aW9uQ2FsbGJhY2tFcnJvci5jdXJyZW50ID0gdW5kZWZpbmVkXG4gIH0pXG5cbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdChcbiAgICAoKSA9PiB7XG4gICAgICBmdW5jdGlvbiBjaGVja0ZvclVwZGF0ZXMoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgbmV3U2VsZWN0ZWRTdGF0ZSA9IGxhdGVzdFNlbGVjdG9yLmN1cnJlbnQoZ2V0U2xhdGUoKSlcblxuICAgICAgICAgIGlmIChlcXVhbGl0eUZuKG5ld1NlbGVjdGVkU3RhdGUsIGxhdGVzdFNlbGVjdGVkU3RhdGUuY3VycmVudCkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cblxuICAgICAgICAgIGxhdGVzdFNlbGVjdGVkU3RhdGUuY3VycmVudCA9IG5ld1NlbGVjdGVkU3RhdGVcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgLy8gd2UgaWdub3JlIGFsbCBlcnJvcnMgaGVyZSwgc2luY2Ugd2hlbiB0aGUgY29tcG9uZW50XG4gICAgICAgICAgLy8gaXMgcmUtcmVuZGVyZWQsIHRoZSBzZWxlY3RvcnMgYXJlIGNhbGxlZCBhZ2FpbiwgYW5kXG4gICAgICAgICAgLy8gd2lsbCB0aHJvdyBhZ2FpbiwgaWYgbmVpdGhlciBwcm9wcyBub3Igc3RvcmUgc3RhdGVcbiAgICAgICAgICAvLyBjaGFuZ2VkXG4gICAgICAgICAgbGF0ZXN0U3Vic2NyaXB0aW9uQ2FsbGJhY2tFcnJvci5jdXJyZW50ID0gZXJyXG4gICAgICAgIH1cblxuICAgICAgICBmb3JjZVJlbmRlcigpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gYWRkRXZlbnRMaXN0ZW5lcihjaGVja0ZvclVwZGF0ZXMpXG5cbiAgICAgIGNoZWNrRm9yVXBkYXRlcygpXG5cbiAgICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpXG4gICAgfSxcbiAgICAvLyBkb24ndCByZXJlbmRlciBvbiBlcXVhbGl0eUZuIGNoYW5nZSBzaW5jZSB3ZSB3YW50IHRvIGJlIGFibGUgdG8gZGVmaW5lIGl0IGlubGluZVxuICAgIFthZGRFdmVudExpc3RlbmVyLCBnZXRTbGF0ZV1cbiAgKVxuXG4gIHJldHVybiBzZWxlY3RlZFN0YXRlXG59XG5cbi8qKlxuICogQ3JlYXRlIHNlbGVjdG9yIGNvbnRleHQgd2l0aCBlZGl0b3IgdXBkYXRpbmcgb24gZXZlcnkgZWRpdG9yIGNoYW5nZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VsZWN0b3JDb250ZXh0KGVkaXRvcjogRWRpdG9yKSB7XG4gIGNvbnN0IGV2ZW50TGlzdGVuZXJzID0gdXNlUmVmPEVkaXRvckNoYW5nZUhhbmRsZXJbXT4oW10pLmN1cnJlbnRcbiAgY29uc3Qgc2xhdGVSZWYgPSB1c2VSZWY8e1xuICAgIGVkaXRvcjogRWRpdG9yXG4gIH0+KHtcbiAgICBlZGl0b3IsXG4gIH0pLmN1cnJlbnRcbiAgY29uc3Qgb25DaGFuZ2UgPSB1c2VDYWxsYmFjaygoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICBzbGF0ZVJlZi5lZGl0b3IgPSBlZGl0b3JcbiAgICBldmVudExpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcjogRWRpdG9yQ2hhbmdlSGFuZGxlcikgPT4gbGlzdGVuZXIoZWRpdG9yKSlcbiAgfSwgW10pXG5cbiAgY29uc3Qgc2VsZWN0b3JDb250ZXh0ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldFNsYXRlOiAoKSA9PiBzbGF0ZVJlZi5lZGl0b3IsXG4gICAgICBhZGRFdmVudExpc3RlbmVyOiAoY2FsbGJhY2s6IEVkaXRvckNoYW5nZUhhbmRsZXIpID0+IHtcbiAgICAgICAgZXZlbnRMaXN0ZW5lcnMucHVzaChjYWxsYmFjaylcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBldmVudExpc3RlbmVycy5zcGxpY2UoZXZlbnRMaXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjayksIDEpXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfVxuICB9LCBbZXZlbnRMaXN0ZW5lcnMsIHNsYXRlUmVmXSlcbiAgcmV0dXJuIHsgc2VsZWN0b3JDb250ZXh0LCBvbkNoYW5nZSB9XG59XG4iLCAiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEVkaXRvciwgTm9kZSwgRGVzY2VuZGFudCwgU2NydWJiZXIgfSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi4vcGx1Z2luL3JlYWN0LWVkaXRvcidcbmltcG9ydCB7IEZvY3VzZWRDb250ZXh0IH0gZnJvbSAnLi4vaG9va3MvdXNlLWZvY3VzZWQnXG5pbXBvcnQgeyBFZGl0b3JDb250ZXh0IH0gZnJvbSAnLi4vaG9va3MvdXNlLXNsYXRlLXN0YXRpYydcbmltcG9ydCB7IFNsYXRlQ29udGV4dCwgU2xhdGVDb250ZXh0VmFsdWUgfSBmcm9tICcuLi9ob29rcy91c2Utc2xhdGUnXG5pbXBvcnQge1xuICBnZXRTZWxlY3RvckNvbnRleHQsXG4gIFNsYXRlU2VsZWN0b3JDb250ZXh0LFxufSBmcm9tICcuLi9ob29rcy91c2Utc2xhdGUtc2VsZWN0b3InXG5pbXBvcnQgeyBFRElUT1JfVE9fT05fQ0hBTkdFIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHsgSVNfUkVBQ1RfVkVSU0lPTl8xN19PUl9BQk9WRSB9IGZyb20gJy4uL3V0aWxzL2Vudmlyb25tZW50J1xuaW1wb3J0IHsgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCB9IGZyb20gJy4uL2hvb2tzL3VzZS1pc29tb3JwaGljLWxheW91dC1lZmZlY3QnXG5cbi8qKlxuICogQSB3cmFwcGVyIGFyb3VuZCB0aGUgcHJvdmlkZXIgdG8gaGFuZGxlIGBvbkNoYW5nZWAgZXZlbnRzLCBiZWNhdXNlIHRoZSBlZGl0b3JcbiAqIGlzIGEgbXV0YWJsZSBzaW5nbGV0b24gc28gaXQgd29uJ3QgZXZlciByZWdpc3RlciBhcyBcImNoYW5nZWRcIiBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGNvbnN0IFNsYXRlID0gKHByb3BzOiB7XG4gIGVkaXRvcjogUmVhY3RFZGl0b3JcbiAgdmFsdWU6IERlc2NlbmRhbnRbXVxuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlXG4gIG9uQ2hhbmdlPzogKHZhbHVlOiBEZXNjZW5kYW50W10pID0+IHZvaWRcbn0pID0+IHtcbiAgY29uc3QgeyBlZGl0b3IsIGNoaWxkcmVuLCBvbkNoYW5nZSwgdmFsdWUsIC4uLnJlc3QgfSA9IHByb3BzXG4gIGNvbnN0IHVubW91bnRSZWYgPSB1c2VSZWYoZmFsc2UpXG5cbiAgY29uc3QgW2NvbnRleHQsIHNldENvbnRleHRdID0gUmVhY3QudXNlU3RhdGU8U2xhdGVDb250ZXh0VmFsdWU+KCgpID0+IHtcbiAgICBpZiAoIU5vZGUuaXNOb2RlTGlzdCh2YWx1ZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFtTbGF0ZV0gdmFsdWUgaXMgaW52YWxpZCEgRXhwZWN0ZWQgYSBsaXN0IG9mIGVsZW1lbnRzIGJ1dCBnb3Q6ICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgICl9YFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoIUVkaXRvci5pc0VkaXRvcihlZGl0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBbU2xhdGVdIGVkaXRvciBpcyBpbnZhbGlkISBZb3UgcGFzc2VkOiAke1NjcnViYmVyLnN0cmluZ2lmeShlZGl0b3IpfWBcbiAgICAgIClcbiAgICB9XG4gICAgZWRpdG9yLmNoaWxkcmVuID0gdmFsdWVcbiAgICBPYmplY3QuYXNzaWduKGVkaXRvciwgcmVzdClcbiAgICByZXR1cm4geyB2OiAwLCBlZGl0b3IgfVxuICB9KVxuXG4gIGNvbnN0IHtcbiAgICBzZWxlY3RvckNvbnRleHQsXG4gICAgb25DaGFuZ2U6IGhhbmRsZVNlbGVjdG9yQ2hhbmdlLFxuICB9ID0gZ2V0U2VsZWN0b3JDb250ZXh0KGVkaXRvcilcblxuICBjb25zdCBvbkNvbnRleHRDaGFuZ2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKG9uQ2hhbmdlKSB7XG4gICAgICBvbkNoYW5nZShlZGl0b3IuY2hpbGRyZW4pXG4gICAgfVxuXG4gICAgc2V0Q29udGV4dChwcmV2Q29udGV4dCA9PiAoe1xuICAgICAgdjogcHJldkNvbnRleHQudiArIDEsXG4gICAgICBlZGl0b3IsXG4gICAgfSkpXG4gICAgaGFuZGxlU2VsZWN0b3JDaGFuZ2UoZWRpdG9yKVxuICB9LCBbb25DaGFuZ2VdKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgRURJVE9SX1RPX09OX0NIQU5HRS5zZXQoZWRpdG9yLCBvbkNvbnRleHRDaGFuZ2UpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgRURJVE9SX1RPX09OX0NIQU5HRS5zZXQoZWRpdG9yLCAoKSA9PiB7fSlcbiAgICAgIHVubW91bnRSZWYuY3VycmVudCA9IHRydWVcbiAgICB9XG4gIH0sIFtdKVxuXG4gIGNvbnN0IFtpc0ZvY3VzZWQsIHNldElzRm9jdXNlZF0gPSB1c2VTdGF0ZShSZWFjdEVkaXRvci5pc0ZvY3VzZWQoZWRpdG9yKSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldElzRm9jdXNlZChSZWFjdEVkaXRvci5pc0ZvY3VzZWQoZWRpdG9yKSlcbiAgfSlcblxuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBmbiA9ICgpID0+IHNldElzRm9jdXNlZChSZWFjdEVkaXRvci5pc0ZvY3VzZWQoZWRpdG9yKSlcbiAgICBpZiAoSVNfUkVBQ1RfVkVSU0lPTl8xN19PUl9BQk9WRSkge1xuICAgICAgLy8gSW4gUmVhY3QgPj0gMTcgb25Gb2N1cyBhbmQgb25CbHVyIGxpc3RlbiB0byB0aGUgZm9jdXNpbiBhbmQgZm9jdXNvdXQgZXZlbnRzIGR1cmluZyB0aGUgYnViYmxpbmcgcGhhc2UuXG4gICAgICAvLyBUaGVyZWZvcmUgaW4gb3JkZXIgZm9yIDxFZGl0YWJsZSAvPidzIGhhbmRsZXJzIHRvIHJ1biBmaXJzdCwgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBSZWFjdEVkaXRvci5pc0ZvY3VzZWQoZWRpdG9yKVxuICAgICAgLy8gdG8gcmV0dXJuIHRoZSBjb3JyZWN0IHZhbHVlLCB3ZSBoYXZlIHRvIGxpc3RlbiB0byB0aGUgZm9jdXNpbiBhbmQgZm9jdXNvdXQgZXZlbnRzIHdpdGhvdXQgdXNlQ2FwdHVyZSBoZXJlLlxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGZuKVxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBmbilcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBmbilcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBmbilcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmbiwgdHJ1ZSlcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmbiwgdHJ1ZSlcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZm4sIHRydWUpXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmbiwgdHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPFNsYXRlU2VsZWN0b3JDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtzZWxlY3RvckNvbnRleHR9PlxuICAgICAgPFNsYXRlQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17Y29udGV4dH0+XG4gICAgICAgIDxFZGl0b3JDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0LmVkaXRvcn0+XG4gICAgICAgICAgPEZvY3VzZWRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtpc0ZvY3VzZWR9PlxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgIDwvRm9jdXNlZENvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgIDwvRWRpdG9yQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgIDwvU2xhdGVDb250ZXh0LlByb3ZpZGVyPlxuICAgIDwvU2xhdGVTZWxlY3RvckNvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiIsICJpbXBvcnQgeyB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnXG5cbmltcG9ydCB7IEVkaXRvckNvbnRleHQgfSBmcm9tICcuL3VzZS1zbGF0ZS1zdGF0aWMnXG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGVkaXRvciBvYmplY3QgZnJvbSB0aGUgUmVhY3QgY29udGV4dC5cbiAqIEBkZXByZWNhdGVkIFVzZSB1c2VTbGF0ZVN0YXRpYyBpbnN0ZWFkLlxuICovXG5cbmV4cG9ydCBjb25zdCB1c2VFZGl0b3IgPSAoKSA9PiB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUNvbnRleHQoRWRpdG9yQ29udGV4dClcblxuICBpZiAoIWVkaXRvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgXFxgdXNlRWRpdG9yXFxgIGhvb2sgbXVzdCBiZSB1c2VkIGluc2lkZSB0aGUgPFNsYXRlPiBjb21wb25lbnQncyBjb250ZXh0LmBcbiAgICApXG4gIH1cblxuICByZXR1cm4gZWRpdG9yXG59XG4iLCAiaW1wb3J0IHsgQmFzZVNlbGVjdGlvbiwgUmFuZ2UgfSBmcm9tICdzbGF0ZSdcblxuaW1wb3J0IHsgdXNlU2xhdGVTZWxlY3RvciB9IGZyb20gJy4vdXNlLXNsYXRlLXNlbGVjdG9yJ1xuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBzbGF0ZSBzZWxlY3Rpb24uXG4gKiBPbmx5IHRyaWdnZXJzIGEgcmVyZW5kZXIgd2hlbiB0aGUgc2VsZWN0aW9uIGFjdHVhbGx5IGNoYW5nZXNcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZVNsYXRlU2VsZWN0aW9uID0gKCkgPT4ge1xuICByZXR1cm4gdXNlU2xhdGVTZWxlY3RvcihlZGl0b3IgPT4gZWRpdG9yLnNlbGVjdGlvbiwgaXNTZWxlY3Rpb25FcXVhbClcbn1cblxuY29uc3QgaXNTZWxlY3Rpb25FcXVhbCA9IChhOiBCYXNlU2VsZWN0aW9uLCBiOiBCYXNlU2VsZWN0aW9uKSA9PiB7XG4gIGlmICghYSAmJiAhYikgcmV0dXJuIHRydWVcbiAgaWYgKCFhIHx8ICFiKSByZXR1cm4gZmFsc2VcbiAgcmV0dXJuIFJhbmdlLmVxdWFscyhhLCBiKVxufVxuIiwgIi8qKlxuICogVXRpbGl0aWVzIGZvciBzaW5nbGUtbGluZSBkZWxldGlvblxuICovXG5cbmltcG9ydCB7IFJhbmdlLCBFZGl0b3IgfSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi4vcGx1Z2luL3JlYWN0LWVkaXRvcidcblxuY29uc3QgZG9SZWN0c0ludGVyc2VjdCA9IChyZWN0OiBET01SZWN0LCBjb21wYXJlUmVjdDogRE9NUmVjdCkgPT4ge1xuICBjb25zdCBtaWRkbGUgPSAoY29tcGFyZVJlY3QudG9wICsgY29tcGFyZVJlY3QuYm90dG9tKSAvIDJcblxuICByZXR1cm4gcmVjdC50b3AgPD0gbWlkZGxlICYmIHJlY3QuYm90dG9tID49IG1pZGRsZVxufVxuXG5jb25zdCBhcmVSYW5nZXNTYW1lTGluZSA9IChcbiAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgcmFuZ2UxOiBSYW5nZSxcbiAgcmFuZ2UyOiBSYW5nZVxuKSA9PiB7XG4gIGNvbnN0IHJlY3QxID0gUmVhY3RFZGl0b3IudG9ET01SYW5nZShlZGl0b3IsIHJhbmdlMSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgY29uc3QgcmVjdDIgPSBSZWFjdEVkaXRvci50b0RPTVJhbmdlKGVkaXRvciwgcmFuZ2UyKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG4gIHJldHVybiBkb1JlY3RzSW50ZXJzZWN0KHJlY3QxLCByZWN0MikgJiYgZG9SZWN0c0ludGVyc2VjdChyZWN0MiwgcmVjdDEpXG59XG5cbi8qKlxuICogQSBoZWxwZXIgdXRpbGl0eSB0aGF0IHJldHVybnMgdGhlIGVuZCBwb3J0aW9uIG9mIGEgYFJhbmdlYFxuICogd2hpY2ggaXMgbG9jYXRlZCBvbiBhIHNpbmdsZSBsaW5lLlxuICpcbiAqIEBwYXJhbSB7RWRpdG9yfSBlZGl0b3IgVGhlIGVkaXRvciBvYmplY3QgdG8gY29tcGFyZSBhZ2FpbnN0XG4gKiBAcGFyYW0ge1JhbmdlfSBwYXJlbnRSYW5nZSBUaGUgcGFyZW50IHJhbmdlIHRvIGNvbXBhcmUgYWdhaW5zdFxuICogQHJldHVybnMge1JhbmdlfSBBIHZhbGlkIHBvcnRpb24gb2YgdGhlIHBhcmVudFJhbmdlIHdoaWNoIGlzIG9uZSBhIHNpbmdsZSBsaW5lXG4gKi9cbmV4cG9ydCBjb25zdCBmaW5kQ3VycmVudExpbmVSYW5nZSA9IChcbiAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgcGFyZW50UmFuZ2U6IFJhbmdlXG4pOiBSYW5nZSA9PiB7XG4gIGNvbnN0IHBhcmVudFJhbmdlQm91bmRhcnkgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBSYW5nZS5lbmQocGFyZW50UmFuZ2UpKVxuICBjb25zdCBwb3NpdGlvbnMgPSBBcnJheS5mcm9tKEVkaXRvci5wb3NpdGlvbnMoZWRpdG9yLCB7IGF0OiBwYXJlbnRSYW5nZSB9KSlcblxuICBsZXQgbGVmdCA9IDBcbiAgbGV0IHJpZ2h0ID0gcG9zaXRpb25zLmxlbmd0aFxuICBsZXQgbWlkZGxlID0gTWF0aC5mbG9vcihyaWdodCAvIDIpXG5cbiAgaWYgKFxuICAgIGFyZVJhbmdlc1NhbWVMaW5lKFxuICAgICAgZWRpdG9yLFxuICAgICAgRWRpdG9yLnJhbmdlKGVkaXRvciwgcG9zaXRpb25zW2xlZnRdKSxcbiAgICAgIHBhcmVudFJhbmdlQm91bmRhcnlcbiAgICApXG4gICkge1xuICAgIHJldHVybiBFZGl0b3IucmFuZ2UoZWRpdG9yLCBwb3NpdGlvbnNbbGVmdF0sIHBhcmVudFJhbmdlQm91bmRhcnkpXG4gIH1cblxuICBpZiAocG9zaXRpb25zLmxlbmd0aCA8IDIpIHtcbiAgICByZXR1cm4gRWRpdG9yLnJhbmdlKFxuICAgICAgZWRpdG9yLFxuICAgICAgcG9zaXRpb25zW3Bvc2l0aW9ucy5sZW5ndGggLSAxXSxcbiAgICAgIHBhcmVudFJhbmdlQm91bmRhcnlcbiAgICApXG4gIH1cblxuICB3aGlsZSAobWlkZGxlICE9PSBwb3NpdGlvbnMubGVuZ3RoICYmIG1pZGRsZSAhPT0gbGVmdCkge1xuICAgIGlmIChcbiAgICAgIGFyZVJhbmdlc1NhbWVMaW5lKFxuICAgICAgICBlZGl0b3IsXG4gICAgICAgIEVkaXRvci5yYW5nZShlZGl0b3IsIHBvc2l0aW9uc1ttaWRkbGVdKSxcbiAgICAgICAgcGFyZW50UmFuZ2VCb3VuZGFyeVxuICAgICAgKVxuICAgICkge1xuICAgICAgcmlnaHQgPSBtaWRkbGVcbiAgICB9IGVsc2Uge1xuICAgICAgbGVmdCA9IG1pZGRsZVxuICAgIH1cblxuICAgIG1pZGRsZSA9IE1hdGguZmxvb3IoKGxlZnQgKyByaWdodCkgLyAyKVxuICB9XG5cbiAgcmV0dXJuIEVkaXRvci5yYW5nZShlZGl0b3IsIHBvc2l0aW9uc1tyaWdodF0sIHBhcmVudFJhbmdlQm91bmRhcnkpXG59XG4iLCAiaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSdcbmltcG9ydCB7XG4gIEJhc2VFZGl0b3IsXG4gIEVkaXRvcixcbiAgTm9kZSxcbiAgT3BlcmF0aW9uLFxuICBQYXRoLFxuICBQb2ludCxcbiAgUmFuZ2UsXG4gIFRyYW5zZm9ybXMsXG4gIEVsZW1lbnQsXG59IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHtcbiAgVGV4dERpZmYsXG4gIHRyYW5zZm9ybVBlbmRpbmdQb2ludCxcbiAgdHJhbnNmb3JtUGVuZGluZ1JhbmdlLFxuICB0cmFuc2Zvcm1UZXh0RGlmZixcbn0gZnJvbSAnLi4vdXRpbHMvZGlmZi10ZXh0J1xuaW1wb3J0IHtcbiAgZ2V0UGxhaW5UZXh0LFxuICBnZXRTbGF0ZUZyYWdtZW50QXR0cmlidXRlLFxuICBpc0RPTVRleHQsXG59IGZyb20gJy4uL3V0aWxzL2RvbSdcbmltcG9ydCB7IEtleSB9IGZyb20gJy4uL3V0aWxzL2tleSdcbmltcG9ydCB7IGZpbmRDdXJyZW50TGluZVJhbmdlIH0gZnJvbSAnLi4vdXRpbHMvbGluZXMnXG5pbXBvcnQge1xuICBFRElUT1JfVE9fS0VZX1RPX0VMRU1FTlQsXG4gIEVESVRPUl9UT19PTl9DSEFOR0UsXG4gIEVESVRPUl9UT19QRU5ESU5HX0FDVElPTixcbiAgRURJVE9SX1RPX1BFTkRJTkdfRElGRlMsXG4gIEVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTixcbiAgRURJVE9SX1RPX1VTRVJfTUFSS1MsXG4gIEVESVRPUl9UT19VU0VSX1NFTEVDVElPTixcbiAgTk9ERV9UT19LRVksXG4gIEVESVRPUl9UT19TQ0hFRFVMRV9GTFVTSCxcbiAgRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLFxufSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4vcmVhY3QtZWRpdG9yJ1xuLyoqXG4gKiBgd2l0aFJlYWN0YCBhZGRzIFJlYWN0IGFuZCBET00gc3BlY2lmaWMgYmVoYXZpb3JzIHRvIHRoZSBlZGl0b3IuXG4gKlxuICogSWYgeW91IGFyZSB1c2luZyBUeXBlU2NyaXB0LCB5b3UgbXVzdCBleHRlbmQgU2xhdGUncyBDdXN0b21UeXBlcyB0byB1c2VcbiAqIHRoaXMgcGx1Z2luLlxuICpcbiAqIFNlZSBodHRwczovL2RvY3Muc2xhdGVqcy5vcmcvY29uY2VwdHMvMTEtdHlwZXNjcmlwdCB0byBsZWFybiBob3cuXG4gKi9cblxuZXhwb3J0IGNvbnN0IHdpdGhSZWFjdCA9IDxUIGV4dGVuZHMgQmFzZUVkaXRvcj4oZWRpdG9yOiBUKTogVCAmIFJlYWN0RWRpdG9yID0+IHtcbiAgY29uc3QgZSA9IGVkaXRvciBhcyBUICYgUmVhY3RFZGl0b3JcbiAgY29uc3QgeyBhcHBseSwgb25DaGFuZ2UsIGRlbGV0ZUJhY2t3YXJkLCBhZGRNYXJrLCByZW1vdmVNYXJrIH0gPSBlXG5cbiAgLy8gVGhlIFdlYWtNYXAgd2hpY2ggbWFwcyBhIGtleSB0byBhIHNwZWNpZmljIEhUTUxFbGVtZW50IG11c3QgYmUgc2NvcGVkIHRvIHRoZSBlZGl0b3IgaW5zdGFuY2UgdG9cbiAgLy8gYXZvaWQgY29sbGlzaW9ucyBiZXR3ZWVuIGVkaXRvcnMgaW4gdGhlIERPTSB0aGF0IHNoYXJlIHRoZSBzYW1lIHZhbHVlLlxuICBFRElUT1JfVE9fS0VZX1RPX0VMRU1FTlQuc2V0KGUsIG5ldyBXZWFrTWFwKCkpXG5cbiAgZS5hZGRNYXJrID0gKGtleSwgdmFsdWUpID0+IHtcbiAgICBFRElUT1JfVE9fU0NIRURVTEVfRkxVU0guZ2V0KGUpPy4oKVxuXG4gICAgaWYgKFxuICAgICAgIUVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUy5nZXQoZSkgJiZcbiAgICAgIEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLmdldChlKT8ubGVuZ3RoXG4gICAgKSB7XG4gICAgICAvLyBFbnN1cmUgdGhlIGN1cnJlbnQgcGVuZGluZyBkaWZmcyBvcmlnaW5hdGluZyBmcm9tIGNoYW5nZXMgYmVmb3JlIHRoZSBhZGRNYXJrXG4gICAgICAvLyBhcmUgYXBwbGllZCB3aXRoIHRoZSBjdXJyZW50IGZvcm1hdHRpbmdcbiAgICAgIEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUy5zZXQoZSwgbnVsbClcbiAgICB9XG5cbiAgICBFRElUT1JfVE9fVVNFUl9NQVJLUy5kZWxldGUoZSlcblxuICAgIGFkZE1hcmsoa2V5LCB2YWx1ZSlcbiAgfVxuXG4gIGUucmVtb3ZlTWFyayA9IGtleSA9PiB7XG4gICAgaWYgKFxuICAgICAgIUVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUy5nZXQoZSkgJiZcbiAgICAgIEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLmdldChlKT8ubGVuZ3RoXG4gICAgKSB7XG4gICAgICAvLyBFbnN1cmUgdGhlIGN1cnJlbnQgcGVuZGluZyBkaWZmcyBvcmlnaW5hdGluZyBmcm9tIGNoYW5nZXMgYmVmb3JlIHRoZSBhZGRNYXJrXG4gICAgICAvLyBhcmUgYXBwbGllZCB3aXRoIHRoZSBjdXJyZW50IGZvcm1hdHRpbmdcbiAgICAgIEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUy5zZXQoZSwgbnVsbClcbiAgICB9XG5cbiAgICBFRElUT1JfVE9fVVNFUl9NQVJLUy5kZWxldGUoZSlcblxuICAgIHJlbW92ZU1hcmsoa2V5KVxuICB9XG5cbiAgZS5kZWxldGVCYWNrd2FyZCA9IHVuaXQgPT4ge1xuICAgIGlmICh1bml0ICE9PSAnbGluZScpIHtcbiAgICAgIHJldHVybiBkZWxldGVCYWNrd2FyZCh1bml0KVxuICAgIH1cblxuICAgIGlmIChlLnNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChlLnNlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IHBhcmVudEJsb2NrRW50cnkgPSBFZGl0b3IuYWJvdmUoZSwge1xuICAgICAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlLCBuKSxcbiAgICAgICAgYXQ6IGUuc2VsZWN0aW9uLFxuICAgICAgfSlcblxuICAgICAgaWYgKHBhcmVudEJsb2NrRW50cnkpIHtcbiAgICAgICAgY29uc3QgWywgcGFyZW50QmxvY2tQYXRoXSA9IHBhcmVudEJsb2NrRW50cnlcbiAgICAgICAgY29uc3QgcGFyZW50RWxlbWVudFJhbmdlID0gRWRpdG9yLnJhbmdlKFxuICAgICAgICAgIGUsXG4gICAgICAgICAgcGFyZW50QmxvY2tQYXRoLFxuICAgICAgICAgIGUuc2VsZWN0aW9uLmFuY2hvclxuICAgICAgICApXG5cbiAgICAgICAgY29uc3QgY3VycmVudExpbmVSYW5nZSA9IGZpbmRDdXJyZW50TGluZVJhbmdlKGUsIHBhcmVudEVsZW1lbnRSYW5nZSlcblxuICAgICAgICBpZiAoIVJhbmdlLmlzQ29sbGFwc2VkKGN1cnJlbnRMaW5lUmFuZ2UpKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5kZWxldGUoZSwgeyBhdDogY3VycmVudExpbmVSYW5nZSB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVGhpcyBhdHRlbXB0cyB0byByZXNldCB0aGUgTk9ERV9UT19LRVkgZW50cnkgdG8gdGhlIGNvcnJlY3QgdmFsdWVcbiAgLy8gYXMgYXBwbHkoKSBjaGFuZ2VzIHRoZSBvYmplY3QgcmVmZXJlbmNlIGFuZCBoZW5jZSBpbnZhbGlkYXRlcyB0aGUgTk9ERV9UT19LRVkgZW50cnlcbiAgZS5hcHBseSA9IChvcDogT3BlcmF0aW9uKSA9PiB7XG4gICAgY29uc3QgbWF0Y2hlczogW1BhdGgsIEtleV1bXSA9IFtdXG5cbiAgICBjb25zdCBwZW5kaW5nRGlmZnMgPSBFRElUT1JfVE9fUEVORElOR19ESUZGUy5nZXQoZSlcbiAgICBpZiAocGVuZGluZ0RpZmZzPy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gcGVuZGluZ0RpZmZzXG4gICAgICAgIC5tYXAodGV4dERpZmYgPT4gdHJhbnNmb3JtVGV4dERpZmYodGV4dERpZmYsIG9wKSlcbiAgICAgICAgLmZpbHRlcihCb29sZWFuKSBhcyBUZXh0RGlmZltdXG5cbiAgICAgIEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLnNldChlLCB0cmFuc2Zvcm1lZClcbiAgICB9XG5cbiAgICBjb25zdCBwZW5kaW5nU2VsZWN0aW9uID0gRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OLmdldChlKVxuICAgIGlmIChwZW5kaW5nU2VsZWN0aW9uKSB7XG4gICAgICBFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04uc2V0KFxuICAgICAgICBlLFxuICAgICAgICB0cmFuc2Zvcm1QZW5kaW5nUmFuZ2UoZSwgcGVuZGluZ1NlbGVjdGlvbiwgb3ApXG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgcGVuZGluZ0FjdGlvbiA9IEVESVRPUl9UT19QRU5ESU5HX0FDVElPTi5nZXQoZSlcbiAgICBpZiAocGVuZGluZ0FjdGlvbj8uYXQpIHtcbiAgICAgIGNvbnN0IGF0ID0gUG9pbnQuaXNQb2ludChwZW5kaW5nQWN0aW9uPy5hdClcbiAgICAgICAgPyB0cmFuc2Zvcm1QZW5kaW5nUG9pbnQoZSwgcGVuZGluZ0FjdGlvbi5hdCwgb3ApXG4gICAgICAgIDogdHJhbnNmb3JtUGVuZGluZ1JhbmdlKGUsIHBlbmRpbmdBY3Rpb24uYXQsIG9wKVxuXG4gICAgICBFRElUT1JfVE9fUEVORElOR19BQ1RJT04uc2V0KGUsIGF0ID8geyAuLi5wZW5kaW5nQWN0aW9uLCBhdCB9IDogbnVsbClcbiAgICB9XG5cbiAgICBzd2l0Y2ggKG9wLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2luc2VydF90ZXh0JzpcbiAgICAgIGNhc2UgJ3JlbW92ZV90ZXh0JzpcbiAgICAgIGNhc2UgJ3NldF9ub2RlJzpcbiAgICAgIGNhc2UgJ3NwbGl0X25vZGUnOiB7XG4gICAgICAgIG1hdGNoZXMucHVzaCguLi5nZXRNYXRjaGVzKGUsIG9wLnBhdGgpKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdzZXRfc2VsZWN0aW9uJzoge1xuICAgICAgICAvLyBTZWxlY3Rpb24gd2FzIG1hbnVhbGx5IHNldCwgZG9uJ3QgcmVzdG9yZSB0aGUgdXNlciBzZWxlY3Rpb24gYWZ0ZXIgdGhlIGNoYW5nZS5cbiAgICAgICAgRURJVE9SX1RPX1VTRVJfU0VMRUNUSU9OLmdldChlKT8udW5yZWYoKVxuICAgICAgICBFRElUT1JfVE9fVVNFUl9TRUxFQ1RJT04uZGVsZXRlKGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2luc2VydF9ub2RlJzpcbiAgICAgIGNhc2UgJ3JlbW92ZV9ub2RlJzoge1xuICAgICAgICBtYXRjaGVzLnB1c2goLi4uZ2V0TWF0Y2hlcyhlLCBQYXRoLnBhcmVudChvcC5wYXRoKSkpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lcmdlX25vZGUnOiB7XG4gICAgICAgIGNvbnN0IHByZXZQYXRoID0gUGF0aC5wcmV2aW91cyhvcC5wYXRoKVxuICAgICAgICBtYXRjaGVzLnB1c2goLi4uZ2V0TWF0Y2hlcyhlLCBwcmV2UGF0aCkpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21vdmVfbm9kZSc6IHtcbiAgICAgICAgY29uc3QgY29tbW9uUGF0aCA9IFBhdGguY29tbW9uKFxuICAgICAgICAgIFBhdGgucGFyZW50KG9wLnBhdGgpLFxuICAgICAgICAgIFBhdGgucGFyZW50KG9wLm5ld1BhdGgpXG4gICAgICAgIClcbiAgICAgICAgbWF0Y2hlcy5wdXNoKC4uLmdldE1hdGNoZXMoZSwgY29tbW9uUGF0aCkpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgYXBwbHkob3ApXG5cbiAgICBmb3IgKGNvbnN0IFtwYXRoLCBrZXldIG9mIG1hdGNoZXMpIHtcbiAgICAgIGNvbnN0IFtub2RlXSA9IEVkaXRvci5ub2RlKGUsIHBhdGgpXG4gICAgICBOT0RFX1RPX0tFWS5zZXQobm9kZSwga2V5KVxuICAgIH1cbiAgfVxuXG4gIGUuc2V0RnJhZ21lbnREYXRhID0gKGRhdGE6IFBpY2s8RGF0YVRyYW5zZmVyLCAnZ2V0RGF0YScgfCAnc2V0RGF0YSc+KSA9PiB7XG4gICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVcblxuICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyhzZWxlY3Rpb24pXG4gICAgY29uc3Qgc3RhcnRWb2lkID0gRWRpdG9yLnZvaWQoZSwgeyBhdDogc3RhcnQucGF0aCB9KVxuICAgIGNvbnN0IGVuZFZvaWQgPSBFZGl0b3Iudm9pZChlLCB7IGF0OiBlbmQucGF0aCB9KVxuXG4gICAgaWYgKFJhbmdlLmlzQ29sbGFwc2VkKHNlbGVjdGlvbikgJiYgIXN0YXJ0Vm9pZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGEgZmFrZSBzZWxlY3Rpb24gc28gdGhhdCB3ZSBjYW4gYWRkIGEgQmFzZTY0LWVuY29kZWQgY29weSBvZiB0aGVcbiAgICAvLyBmcmFnbWVudCB0byB0aGUgSFRNTCwgdG8gZGVjb2RlIG9uIGZ1dHVyZSBwYXN0ZXMuXG4gICAgY29uc3QgZG9tUmFuZ2UgPSBSZWFjdEVkaXRvci50b0RPTVJhbmdlKGUsIHNlbGVjdGlvbilcbiAgICBsZXQgY29udGVudHMgPSBkb21SYW5nZS5jbG9uZUNvbnRlbnRzKClcbiAgICBsZXQgYXR0YWNoID0gY29udGVudHMuY2hpbGROb2Rlc1swXSBhcyBIVE1MRWxlbWVudFxuXG4gICAgLy8gTWFrZSBzdXJlIGF0dGFjaCBpcyBub24tZW1wdHksIHNpbmNlIGVtcHR5IG5vZGVzIHdpbGwgbm90IGdldCBjb3BpZWQuXG4gICAgY29udGVudHMuY2hpbGROb2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgaWYgKG5vZGUudGV4dENvbnRlbnQgJiYgbm9kZS50ZXh0Q29udGVudC50cmltKCkgIT09ICcnKSB7XG4gICAgICAgIGF0dGFjaCA9IG5vZGUgYXMgSFRNTEVsZW1lbnRcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gQ09NUEFUOiBJZiB0aGUgZW5kIG5vZGUgaXMgYSB2b2lkIG5vZGUsIHdlIG5lZWQgdG8gbW92ZSB0aGUgZW5kIG9mIHRoZVxuICAgIC8vIHJhbmdlIGZyb20gdGhlIHZvaWQgbm9kZSdzIHNwYWNlciBzcGFuLCB0byB0aGUgZW5kIG9mIHRoZSB2b2lkIG5vZGUnc1xuICAgIC8vIGNvbnRlbnQsIHNpbmNlIHRoZSBzcGFjZXIgaXMgYmVmb3JlIHZvaWQncyBjb250ZW50IGluIHRoZSBET00uXG4gICAgaWYgKGVuZFZvaWQpIHtcbiAgICAgIGNvbnN0IFt2b2lkTm9kZV0gPSBlbmRWb2lkXG4gICAgICBjb25zdCByID0gZG9tUmFuZ2UuY2xvbmVSYW5nZSgpXG4gICAgICBjb25zdCBkb21Ob2RlID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGUsIHZvaWROb2RlKVxuICAgICAgci5zZXRFbmRBZnRlcihkb21Ob2RlKVxuICAgICAgY29udGVudHMgPSByLmNsb25lQ29udGVudHMoKVxuICAgIH1cblxuICAgIC8vIENPTVBBVDogSWYgdGhlIHN0YXJ0IG5vZGUgaXMgYSB2b2lkIG5vZGUsIHdlIG5lZWQgdG8gYXR0YWNoIHRoZSBlbmNvZGVkXG4gICAgLy8gZnJhZ21lbnQgdG8gdGhlIHZvaWQgbm9kZSdzIGNvbnRlbnQgbm9kZSBpbnN0ZWFkIG9mIHRoZSBzcGFjZXIsIGJlY2F1c2VcbiAgICAvLyBhdHRhY2hpbmcgaXQgdG8gZW1wdHkgYDxkaXY+LzxzcGFuPmAgbm9kZXMgd2lsbCBlbmQgdXAgaGF2aW5nIGl0IGVyYXNlZCBieVxuICAgIC8vIG1vc3QgYnJvd3NlcnMuICgyMDE4LzA0LzI3KVxuICAgIGlmIChzdGFydFZvaWQpIHtcbiAgICAgIGF0dGFjaCA9IGNvbnRlbnRzLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNsYXRlLXNwYWNlcl0nKSEgYXMgSFRNTEVsZW1lbnRcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYW55IHplcm8td2lkdGggc3BhY2Ugc3BhbnMgZnJvbSB0aGUgY2xvbmVkIERPTSBzbyB0aGF0IHRoZXkgZG9uJ3RcbiAgICAvLyBzaG93IHVwIGVsc2V3aGVyZSB3aGVuIHBhc3RlZC5cbiAgICBBcnJheS5mcm9tKGNvbnRlbnRzLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNsYXRlLXplcm8td2lkdGhdJykpLmZvckVhY2goXG4gICAgICB6dyA9PiB7XG4gICAgICAgIGNvbnN0IGlzTmV3bGluZSA9IHp3LmdldEF0dHJpYnV0ZSgnZGF0YS1zbGF0ZS16ZXJvLXdpZHRoJykgPT09ICduJ1xuICAgICAgICB6dy50ZXh0Q29udGVudCA9IGlzTmV3bGluZSA/ICdcXG4nIDogJydcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBTZXQgYSBgZGF0YS1zbGF0ZS1mcmFnbWVudGAgYXR0cmlidXRlIG9uIGEgbm9uLWVtcHR5IG5vZGUsIHNvIGl0IHNob3dzIHVwXG4gICAgLy8gaW4gdGhlIEhUTUwsIGFuZCBjYW4gYmUgdXNlZCBmb3IgaW50cmEtU2xhdGUgcGFzdGluZy4gSWYgaXQncyBhIHRleHRcbiAgICAvLyBub2RlLCB3cmFwIGl0IGluIGEgYDxzcGFuPmAgc28gd2UgaGF2ZSBzb21ldGhpbmcgdG8gc2V0IGFuIGF0dHJpYnV0ZSBvbi5cbiAgICBpZiAoaXNET01UZXh0KGF0dGFjaCkpIHtcbiAgICAgIGNvbnN0IHNwYW4gPSBhdHRhY2gub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICAgIC8vIENPTVBBVDogSW4gQ2hyb21lIGFuZCBTYWZhcmksIGlmIHdlIGRvbid0IGFkZCB0aGUgYHdoaXRlLXNwYWNlYCBzdHlsZVxuICAgICAgLy8gdGhlbiBsZWFkaW5nIGFuZCB0cmFpbGluZyBzcGFjZXMgd2lsbCBiZSBpZ25vcmVkLiAoMjAxNy8wOS8yMSlcbiAgICAgIHNwYW4uc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUnXG4gICAgICBzcGFuLmFwcGVuZENoaWxkKGF0dGFjaClcbiAgICAgIGNvbnRlbnRzLmFwcGVuZENoaWxkKHNwYW4pXG4gICAgICBhdHRhY2ggPSBzcGFuXG4gICAgfVxuXG4gICAgY29uc3QgZnJhZ21lbnQgPSBlLmdldEZyYWdtZW50KClcbiAgICBjb25zdCBzdHJpbmcgPSBKU09OLnN0cmluZ2lmeShmcmFnbWVudClcbiAgICBjb25zdCBlbmNvZGVkID0gd2luZG93LmJ0b2EoZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykpXG4gICAgYXR0YWNoLnNldEF0dHJpYnV0ZSgnZGF0YS1zbGF0ZS1mcmFnbWVudCcsIGVuY29kZWQpXG4gICAgZGF0YS5zZXREYXRhKCdhcHBsaWNhdGlvbi94LXNsYXRlLWZyYWdtZW50JywgZW5jb2RlZClcblxuICAgIC8vIEFkZCB0aGUgY29udGVudCB0byBhIDxkaXY+IHNvIHRoYXQgd2UgY2FuIGdldCBpdHMgaW5uZXIgSFRNTC5cbiAgICBjb25zdCBkaXYgPSBjb250ZW50cy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgZGl2LmFwcGVuZENoaWxkKGNvbnRlbnRzKVxuICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICd0cnVlJylcbiAgICBjb250ZW50cy5vd25lckRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KVxuICAgIGRhdGEuc2V0RGF0YSgndGV4dC9odG1sJywgZGl2LmlubmVySFRNTClcbiAgICBkYXRhLnNldERhdGEoJ3RleHQvcGxhaW4nLCBnZXRQbGFpblRleHQoZGl2KSlcbiAgICBjb250ZW50cy5vd25lckRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2KVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBlLmluc2VydERhdGEgPSAoZGF0YTogRGF0YVRyYW5zZmVyKSA9PiB7XG4gICAgaWYgKCFlLmluc2VydEZyYWdtZW50RGF0YShkYXRhKSkge1xuICAgICAgZS5pbnNlcnRUZXh0RGF0YShkYXRhKVxuICAgIH1cbiAgfVxuXG4gIGUuaW5zZXJ0RnJhZ21lbnREYXRhID0gKGRhdGE6IERhdGFUcmFuc2Zlcik6IGJvb2xlYW4gPT4ge1xuICAgIC8qKlxuICAgICAqIENoZWNraW5nIGNvcGllZCBmcmFnbWVudCBmcm9tIGFwcGxpY2F0aW9uL3gtc2xhdGUtZnJhZ21lbnQgb3IgZGF0YS1zbGF0ZS1mcmFnbWVudFxuICAgICAqL1xuICAgIGNvbnN0IGZyYWdtZW50ID1cbiAgICAgIGRhdGEuZ2V0RGF0YSgnYXBwbGljYXRpb24veC1zbGF0ZS1mcmFnbWVudCcpIHx8XG4gICAgICBnZXRTbGF0ZUZyYWdtZW50QXR0cmlidXRlKGRhdGEpXG5cbiAgICBpZiAoZnJhZ21lbnQpIHtcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGVVUklDb21wb25lbnQod2luZG93LmF0b2IoZnJhZ21lbnQpKVxuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShkZWNvZGVkKSBhcyBOb2RlW11cbiAgICAgIGUuaW5zZXJ0RnJhZ21lbnQocGFyc2VkKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBlLmluc2VydFRleHREYXRhID0gKGRhdGE6IERhdGFUcmFuc2Zlcik6IGJvb2xlYW4gPT4ge1xuICAgIGNvbnN0IHRleHQgPSBkYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuXG4gICAgaWYgKHRleHQpIHtcbiAgICAgIGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgvXFxyXFxufFxccnxcXG4vKVxuICAgICAgbGV0IHNwbGl0ID0gZmFsc2VcblxuICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICAgIGlmIChzcGxpdCkge1xuICAgICAgICAgIFRyYW5zZm9ybXMuc3BsaXROb2RlcyhlLCB7IGFsd2F5czogdHJ1ZSB9KVxuICAgICAgICB9XG5cbiAgICAgICAgZS5pbnNlcnRUZXh0KGxpbmUpXG4gICAgICAgIHNwbGl0ID0gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBlLm9uQ2hhbmdlID0gKCkgPT4ge1xuICAgIC8vIENPTVBBVDogUmVhY3QgZG9lc24ndCBiYXRjaCBgc2V0U3RhdGVgIGhvb2sgY2FsbHMsIHdoaWNoIG1lYW5zIHRoYXQgdGhlXG4gICAgLy8gY2hpbGRyZW4gYW5kIHNlbGVjdGlvbiBjYW4gZ2V0IG91dCBvZiBzeW5jIGZvciBvbmUgcmVuZGVyIHBhc3MuIFNvIHdlXG4gICAgLy8gaGF2ZSB0byB1c2UgdGhpcyB1bnN0YWJsZSBBUEkgdG8gZW5zdXJlIGl0IGJhdGNoZXMgdGhlbS4gKDIwMTkvMTIvMDMpXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8xNDI1OSNpc3N1ZWNvbW1lbnQtNDM5NzAyMzY3XG4gICAgUmVhY3RET00udW5zdGFibGVfYmF0Y2hlZFVwZGF0ZXMoKCkgPT4ge1xuICAgICAgY29uc3Qgb25Db250ZXh0Q2hhbmdlID0gRURJVE9SX1RPX09OX0NIQU5HRS5nZXQoZSlcblxuICAgICAgaWYgKG9uQ29udGV4dENoYW5nZSkge1xuICAgICAgICBvbkNvbnRleHRDaGFuZ2UoKVxuICAgICAgfVxuXG4gICAgICBvbkNoYW5nZSgpXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiBlXG59XG5cbmNvbnN0IGdldE1hdGNoZXMgPSAoZTogRWRpdG9yLCBwYXRoOiBQYXRoKSA9PiB7XG4gIGNvbnN0IG1hdGNoZXM6IFtQYXRoLCBLZXldW10gPSBbXVxuICBmb3IgKGNvbnN0IFtuLCBwXSBvZiBFZGl0b3IubGV2ZWxzKGUsIHsgYXQ6IHBhdGggfSkpIHtcbiAgICBjb25zdCBrZXkgPSBSZWFjdEVkaXRvci5maW5kS2V5KGUsIG4pXG4gICAgbWF0Y2hlcy5wdXNoKFtwLCBrZXldKVxuICB9XG4gIHJldHVybiBtYXRjaGVzXG59XG4iLCAiaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ2lzLXBsYWluLW9iamVjdCdcbmltcG9ydCB7IE9wZXJhdGlvbiwgUmFuZ2UgfSBmcm9tICdzbGF0ZSdcblxuaW50ZXJmYWNlIEJhdGNoIHtcbiAgb3BlcmF0aW9uczogT3BlcmF0aW9uW11cbiAgc2VsZWN0aW9uQmVmb3JlOiBSYW5nZSB8IG51bGxcbn1cblxuLyoqXG4gKiBgSGlzdG9yeWAgb2JqZWN0cyBob2xkIGFsbCBvZiB0aGUgb3BlcmF0aW9ucyB0aGF0IGFyZSBhcHBsaWVkIHRvIGEgdmFsdWUsIHNvXG4gKiB0aGV5IGNhbiBiZSB1bmRvbmUgb3IgcmVkb25lIGFzIG5lY2Vzc2FyeS5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEhpc3Rvcnkge1xuICByZWRvczogQmF0Y2hbXVxuICB1bmRvczogQmF0Y2hbXVxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgSGlzdG9yeSA9IHtcbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBgSGlzdG9yeWAgb2JqZWN0LlxuICAgKi9cblxuICBpc0hpc3RvcnkodmFsdWU6IGFueSk6IHZhbHVlIGlzIEhpc3Rvcnkge1xuICAgIHJldHVybiAoXG4gICAgICBpc1BsYWluT2JqZWN0KHZhbHVlKSAmJlxuICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZS5yZWRvcykgJiZcbiAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUudW5kb3MpICYmXG4gICAgICAodmFsdWUucmVkb3MubGVuZ3RoID09PSAwIHx8XG4gICAgICAgIE9wZXJhdGlvbi5pc09wZXJhdGlvbkxpc3QodmFsdWUucmVkb3NbMF0ub3BlcmF0aW9ucykpICYmXG4gICAgICAodmFsdWUudW5kb3MubGVuZ3RoID09PSAwIHx8XG4gICAgICAgIE9wZXJhdGlvbi5pc09wZXJhdGlvbkxpc3QodmFsdWUudW5kb3NbMF0ub3BlcmF0aW9ucykpXG4gICAgKVxuICB9LFxufVxuIiwgImltcG9ydCB7IEJhc2VFZGl0b3IsIEVkaXRvciB9IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgSGlzdG9yeSB9IGZyb20gJy4vaGlzdG9yeSdcblxuLyoqXG4gKiBXZWFrbWFwcyBmb3IgYXR0YWNoaW5nIHN0YXRlIHRvIHRoZSBlZGl0b3IuXG4gKi9cblxuZXhwb3J0IGNvbnN0IEhJU1RPUlkgPSBuZXcgV2Vha01hcDxFZGl0b3IsIEhpc3Rvcnk+KClcbmV4cG9ydCBjb25zdCBTQVZJTkcgPSBuZXcgV2Vha01hcDxFZGl0b3IsIGJvb2xlYW4gfCB1bmRlZmluZWQ+KClcbmV4cG9ydCBjb25zdCBNRVJHSU5HID0gbmV3IFdlYWtNYXA8RWRpdG9yLCBib29sZWFuIHwgdW5kZWZpbmVkPigpXG5cbi8qKlxuICogYEhpc3RvcnlFZGl0b3JgIGNvbnRhaW5zIGhlbHBlcnMgZm9yIGhpc3RvcnktZW5hYmxlZCBlZGl0b3JzLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgSGlzdG9yeUVkaXRvciBleHRlbmRzIEJhc2VFZGl0b3Ige1xuICBoaXN0b3J5OiBIaXN0b3J5XG4gIHVuZG86ICgpID0+IHZvaWRcbiAgcmVkbzogKCkgPT4gdm9pZFxuICB3cml0ZUhpc3Rvcnk6IChzdGFjazogJ3VuZG9zJyB8ICdyZWRvcycsIGJhdGNoOiBhbnkpID0+IHZvaWRcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IEhpc3RvcnlFZGl0b3IgPSB7XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgYEhpc3RvcnlFZGl0b3JgIG9iamVjdC5cbiAgICovXG5cbiAgaXNIaXN0b3J5RWRpdG9yKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBIaXN0b3J5RWRpdG9yIHtcbiAgICByZXR1cm4gSGlzdG9yeS5pc0hpc3RvcnkodmFsdWUuaGlzdG9yeSkgJiYgRWRpdG9yLmlzRWRpdG9yKHZhbHVlKVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1lcmdlIGZsYWcncyBjdXJyZW50IHZhbHVlLlxuICAgKi9cblxuICBpc01lcmdpbmcoZWRpdG9yOiBIaXN0b3J5RWRpdG9yKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIE1FUkdJTkcuZ2V0KGVkaXRvcilcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBzYXZpbmcgZmxhZydzIGN1cnJlbnQgdmFsdWUuXG4gICAqL1xuXG4gIGlzU2F2aW5nKGVkaXRvcjogSGlzdG9yeUVkaXRvcik6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBTQVZJTkcuZ2V0KGVkaXRvcilcbiAgfSxcblxuICAvKipcbiAgICogUmVkbyB0byB0aGUgcHJldmlvdXMgc2F2ZWQgc3RhdGUuXG4gICAqL1xuXG4gIHJlZG8oZWRpdG9yOiBIaXN0b3J5RWRpdG9yKTogdm9pZCB7XG4gICAgZWRpdG9yLnJlZG8oKVxuICB9LFxuXG4gIC8qKlxuICAgKiBVbmRvIHRvIHRoZSBwcmV2aW91cyBzYXZlZCBzdGF0ZS5cbiAgICovXG5cbiAgdW5kbyhlZGl0b3I6IEhpc3RvcnlFZGl0b3IpOiB2b2lkIHtcbiAgICBlZGl0b3IudW5kbygpXG4gIH0sXG5cbiAgLyoqXG4gICAqIEFwcGx5IGEgc2VyaWVzIG9mIGNoYW5nZXMgaW5zaWRlIGEgc3luY2hyb25vdXMgYGZuYCwgd2l0aG91dCBtZXJnaW5nIGFueSBvZlxuICAgKiB0aGUgbmV3IG9wZXJhdGlvbnMgaW50byBwcmV2aW91cyBzYXZlIHBvaW50IGluIHRoZSBoaXN0b3J5LlxuICAgKi9cblxuICB3aXRob3V0TWVyZ2luZyhlZGl0b3I6IEhpc3RvcnlFZGl0b3IsIGZuOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY29uc3QgcHJldiA9IEhpc3RvcnlFZGl0b3IuaXNNZXJnaW5nKGVkaXRvcilcbiAgICBNRVJHSU5HLnNldChlZGl0b3IsIGZhbHNlKVxuICAgIGZuKClcbiAgICBNRVJHSU5HLnNldChlZGl0b3IsIHByZXYpXG4gIH0sXG5cbiAgLyoqXG4gICAqIEFwcGx5IGEgc2VyaWVzIG9mIGNoYW5nZXMgaW5zaWRlIGEgc3luY2hyb25vdXMgYGZuYCwgd2l0aG91dCBzYXZpbmcgYW55IG9mXG4gICAqIHRoZWlyIG9wZXJhdGlvbnMgaW50byB0aGUgaGlzdG9yeS5cbiAgICovXG5cbiAgd2l0aG91dFNhdmluZyhlZGl0b3I6IEhpc3RvcnlFZGl0b3IsIGZuOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY29uc3QgcHJldiA9IEhpc3RvcnlFZGl0b3IuaXNTYXZpbmcoZWRpdG9yKVxuICAgIFNBVklORy5zZXQoZWRpdG9yLCBmYWxzZSlcbiAgICBmbigpXG4gICAgU0FWSU5HLnNldChlZGl0b3IsIHByZXYpXG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBPcGVyYXRpb24sIFBhdGgsIFJhbmdlLCBUcmFuc2Zvcm1zIH0gZnJvbSAnc2xhdGUnXG5cbmltcG9ydCB7IEhpc3RvcnlFZGl0b3IgfSBmcm9tICcuL2hpc3RvcnktZWRpdG9yJ1xuXG4vKipcbiAqIFRoZSBgd2l0aEhpc3RvcnlgIHBsdWdpbiBrZWVwcyB0cmFjayBvZiB0aGUgb3BlcmF0aW9uIGhpc3Rvcnkgb2YgYSBTbGF0ZVxuICogZWRpdG9yIGFzIG9wZXJhdGlvbnMgYXJlIGFwcGxpZWQgdG8gaXQsIHVzaW5nIHVuZG8gYW5kIHJlZG8gc3RhY2tzLlxuICpcbiAqIElmIHlvdSBhcmUgdXNpbmcgVHlwZVNjcmlwdCwgeW91IG11c3QgZXh0ZW5kIFNsYXRlJ3MgQ3VzdG9tVHlwZXMgdG8gdXNlXG4gKiB0aGlzIHBsdWdpbi5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9kb2NzLnNsYXRlanMub3JnL2NvbmNlcHRzLzExLXR5cGVzY3JpcHQgdG8gbGVhcm4gaG93LlxuICovXG5cbmV4cG9ydCBjb25zdCB3aXRoSGlzdG9yeSA9IDxUIGV4dGVuZHMgRWRpdG9yPihlZGl0b3I6IFQpID0+IHtcbiAgY29uc3QgZSA9IGVkaXRvciBhcyBUICYgSGlzdG9yeUVkaXRvclxuICBjb25zdCB7IGFwcGx5IH0gPSBlXG4gIGUuaGlzdG9yeSA9IHsgdW5kb3M6IFtdLCByZWRvczogW10gfVxuXG4gIGUucmVkbyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGhpc3RvcnkgfSA9IGVcbiAgICBjb25zdCB7IHJlZG9zIH0gPSBoaXN0b3J5XG5cbiAgICBpZiAocmVkb3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYmF0Y2ggPSByZWRvc1tyZWRvcy5sZW5ndGggLSAxXVxuXG4gICAgICBpZiAoYmF0Y2guc2VsZWN0aW9uQmVmb3JlKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0U2VsZWN0aW9uKGUsIGJhdGNoLnNlbGVjdGlvbkJlZm9yZSlcbiAgICAgIH1cblxuICAgICAgSGlzdG9yeUVkaXRvci53aXRob3V0U2F2aW5nKGUsICgpID0+IHtcbiAgICAgICAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlLCAoKSA9PiB7XG4gICAgICAgICAgZm9yIChjb25zdCBvcCBvZiBiYXRjaC5vcGVyYXRpb25zKSB7XG4gICAgICAgICAgICBlLmFwcGx5KG9wKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG5cbiAgICAgIGhpc3RvcnkucmVkb3MucG9wKClcbiAgICAgIGUud3JpdGVIaXN0b3J5KCd1bmRvcycsIGJhdGNoKVxuICAgIH1cbiAgfVxuXG4gIGUudW5kbyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGhpc3RvcnkgfSA9IGVcbiAgICBjb25zdCB7IHVuZG9zIH0gPSBoaXN0b3J5XG5cbiAgICBpZiAodW5kb3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYmF0Y2ggPSB1bmRvc1t1bmRvcy5sZW5ndGggLSAxXVxuXG4gICAgICBIaXN0b3J5RWRpdG9yLndpdGhvdXRTYXZpbmcoZSwgKCkgPT4ge1xuICAgICAgICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGUsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBpbnZlcnNlT3BzID0gYmF0Y2gub3BlcmF0aW9ucy5tYXAoT3BlcmF0aW9uLmludmVyc2UpLnJldmVyc2UoKVxuXG4gICAgICAgICAgZm9yIChjb25zdCBvcCBvZiBpbnZlcnNlT3BzKSB7XG4gICAgICAgICAgICBlLmFwcGx5KG9wKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYmF0Y2guc2VsZWN0aW9uQmVmb3JlKSB7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLnNldFNlbGVjdGlvbihlLCBiYXRjaC5zZWxlY3Rpb25CZWZvcmUpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcblxuICAgICAgZS53cml0ZUhpc3RvcnkoJ3JlZG9zJywgYmF0Y2gpXG4gICAgICBoaXN0b3J5LnVuZG9zLnBvcCgpXG4gICAgfVxuICB9XG5cbiAgZS5hcHBseSA9IChvcDogT3BlcmF0aW9uKSA9PiB7XG4gICAgY29uc3QgeyBvcGVyYXRpb25zLCBoaXN0b3J5IH0gPSBlXG4gICAgY29uc3QgeyB1bmRvcyB9ID0gaGlzdG9yeVxuICAgIGNvbnN0IGxhc3RCYXRjaCA9IHVuZG9zW3VuZG9zLmxlbmd0aCAtIDFdXG4gICAgY29uc3QgbGFzdE9wID1cbiAgICAgIGxhc3RCYXRjaCAmJiBsYXN0QmF0Y2gub3BlcmF0aW9uc1tsYXN0QmF0Y2gub3BlcmF0aW9ucy5sZW5ndGggLSAxXVxuICAgIGxldCBzYXZlID0gSGlzdG9yeUVkaXRvci5pc1NhdmluZyhlKVxuICAgIGxldCBtZXJnZSA9IEhpc3RvcnlFZGl0b3IuaXNNZXJnaW5nKGUpXG5cbiAgICBpZiAoc2F2ZSA9PSBudWxsKSB7XG4gICAgICBzYXZlID0gc2hvdWxkU2F2ZShvcCwgbGFzdE9wKVxuICAgIH1cblxuICAgIGlmIChzYXZlKSB7XG4gICAgICBpZiAobWVyZ2UgPT0gbnVsbCkge1xuICAgICAgICBpZiAobGFzdEJhdGNoID09IG51bGwpIHtcbiAgICAgICAgICBtZXJnZSA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAob3BlcmF0aW9ucy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICBtZXJnZSA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZXJnZSA9IHNob3VsZE1lcmdlKG9wLCBsYXN0T3ApXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGxhc3RCYXRjaCAmJiBtZXJnZSkge1xuICAgICAgICBsYXN0QmF0Y2gub3BlcmF0aW9ucy5wdXNoKG9wKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSB7XG4gICAgICAgICAgb3BlcmF0aW9uczogW29wXSxcbiAgICAgICAgICBzZWxlY3Rpb25CZWZvcmU6IGUuc2VsZWN0aW9uLFxuICAgICAgICB9XG4gICAgICAgIGUud3JpdGVIaXN0b3J5KCd1bmRvcycsIGJhdGNoKVxuICAgICAgfVxuXG4gICAgICB3aGlsZSAodW5kb3MubGVuZ3RoID4gMTAwKSB7XG4gICAgICAgIHVuZG9zLnNoaWZ0KClcbiAgICAgIH1cblxuICAgICAgaGlzdG9yeS5yZWRvcyA9IFtdXG4gICAgfVxuXG4gICAgYXBwbHkob3ApXG4gIH1cblxuICBlLndyaXRlSGlzdG9yeSA9IChzdGFjazogJ3VuZG9zJyB8ICdyZWRvcycsIGJhdGNoOiBhbnkpID0+IHtcbiAgICBlLmhpc3Rvcnlbc3RhY2tdLnB1c2goYmF0Y2gpXG4gIH1cblxuICByZXR1cm4gZVxufVxuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdG8gbWVyZ2UgYW4gb3BlcmF0aW9uIGludG8gdGhlIHByZXZpb3VzIG9wZXJhdGlvbi5cbiAqL1xuXG5jb25zdCBzaG91bGRNZXJnZSA9IChvcDogT3BlcmF0aW9uLCBwcmV2OiBPcGVyYXRpb24gfCB1bmRlZmluZWQpOiBib29sZWFuID0+IHtcbiAgaWYgKFxuICAgIHByZXYgJiZcbiAgICBvcC50eXBlID09PSAnaW5zZXJ0X3RleHQnICYmXG4gICAgcHJldi50eXBlID09PSAnaW5zZXJ0X3RleHQnICYmXG4gICAgb3Aub2Zmc2V0ID09PSBwcmV2Lm9mZnNldCArIHByZXYudGV4dC5sZW5ndGggJiZcbiAgICBQYXRoLmVxdWFscyhvcC5wYXRoLCBwcmV2LnBhdGgpXG4gICkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBpZiAoXG4gICAgcHJldiAmJlxuICAgIG9wLnR5cGUgPT09ICdyZW1vdmVfdGV4dCcgJiZcbiAgICBwcmV2LnR5cGUgPT09ICdyZW1vdmVfdGV4dCcgJiZcbiAgICBvcC5vZmZzZXQgKyBvcC50ZXh0Lmxlbmd0aCA9PT0gcHJldi5vZmZzZXQgJiZcbiAgICBQYXRoLmVxdWFscyhvcC5wYXRoLCBwcmV2LnBhdGgpXG4gICkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGFuIG9wZXJhdGlvbiBuZWVkcyB0byBiZSBzYXZlZCB0byB0aGUgaGlzdG9yeS5cbiAqL1xuXG5jb25zdCBzaG91bGRTYXZlID0gKG9wOiBPcGVyYXRpb24sIHByZXY6IE9wZXJhdGlvbiB8IHVuZGVmaW5lZCk6IGJvb2xlYW4gPT4ge1xuICBpZiAob3AudHlwZSA9PT0gJ3NldF9zZWxlY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuIiwgImNvbnN0IEJZVEVfVU5JVFMgPSBbXG5cdCdCJyxcblx0J2tCJyxcblx0J01CJyxcblx0J0dCJyxcblx0J1RCJyxcblx0J1BCJyxcblx0J0VCJyxcblx0J1pCJyxcblx0J1lCJyxcbl07XG5cbmNvbnN0IEJJQllURV9VTklUUyA9IFtcblx0J0InLFxuXHQnS2lCJyxcblx0J01pQicsXG5cdCdHaUInLFxuXHQnVGlCJyxcblx0J1BpQicsXG5cdCdFaUInLFxuXHQnWmlCJyxcblx0J1lpQicsXG5dO1xuXG5jb25zdCBCSVRfVU5JVFMgPSBbXG5cdCdiJyxcblx0J2tiaXQnLFxuXHQnTWJpdCcsXG5cdCdHYml0Jyxcblx0J1RiaXQnLFxuXHQnUGJpdCcsXG5cdCdFYml0Jyxcblx0J1piaXQnLFxuXHQnWWJpdCcsXG5dO1xuXG5jb25zdCBCSUJJVF9VTklUUyA9IFtcblx0J2InLFxuXHQna2liaXQnLFxuXHQnTWliaXQnLFxuXHQnR2liaXQnLFxuXHQnVGliaXQnLFxuXHQnUGliaXQnLFxuXHQnRWliaXQnLFxuXHQnWmliaXQnLFxuXHQnWWliaXQnLFxuXTtcblxuLypcbkZvcm1hdHMgdGhlIGdpdmVuIG51bWJlciB1c2luZyBgTnVtYmVyI3RvTG9jYWxlU3RyaW5nYC5cbi0gSWYgbG9jYWxlIGlzIGEgc3RyaW5nLCB0aGUgdmFsdWUgaXMgZXhwZWN0ZWQgdG8gYmUgYSBsb2NhbGUta2V5IChmb3IgZXhhbXBsZTogYGRlYCkuXG4tIElmIGxvY2FsZSBpcyB0cnVlLCB0aGUgc3lzdGVtIGRlZmF1bHQgbG9jYWxlIGlzIHVzZWQgZm9yIHRyYW5zbGF0aW9uLlxuLSBJZiBubyB2YWx1ZSBmb3IgbG9jYWxlIGlzIHNwZWNpZmllZCwgdGhlIG51bWJlciBpcyByZXR1cm5lZCB1bm1vZGlmaWVkLlxuKi9cbmNvbnN0IHRvTG9jYWxlU3RyaW5nID0gKG51bWJlciwgbG9jYWxlLCBvcHRpb25zKSA9PiB7XG5cdGxldCByZXN1bHQgPSBudW1iZXI7XG5cdGlmICh0eXBlb2YgbG9jYWxlID09PSAnc3RyaW5nJyB8fCBBcnJheS5pc0FycmF5KGxvY2FsZSkpIHtcblx0XHRyZXN1bHQgPSBudW1iZXIudG9Mb2NhbGVTdHJpbmcobG9jYWxlLCBvcHRpb25zKTtcblx0fSBlbHNlIGlmIChsb2NhbGUgPT09IHRydWUgfHwgb3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmVzdWx0ID0gbnVtYmVyLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCwgb3B0aW9ucyk7XG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcHJldHR5Qnl0ZXMobnVtYmVyLCBvcHRpb25zKSB7XG5cdGlmICghTnVtYmVyLmlzRmluaXRlKG51bWJlcikpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBhIGZpbml0ZSBudW1iZXIsIGdvdCAke3R5cGVvZiBudW1iZXJ9OiAke251bWJlcn1gKTtcblx0fVxuXG5cdG9wdGlvbnMgPSB7XG5cdFx0Yml0czogZmFsc2UsXG5cdFx0YmluYXJ5OiBmYWxzZSxcblx0XHRzcGFjZTogdHJ1ZSxcblx0XHQuLi5vcHRpb25zLFxuXHR9O1xuXG5cdGNvbnN0IFVOSVRTID0gb3B0aW9ucy5iaXRzXG5cdFx0PyAob3B0aW9ucy5iaW5hcnkgPyBCSUJJVF9VTklUUyA6IEJJVF9VTklUUylcblx0XHQ6IChvcHRpb25zLmJpbmFyeSA/IEJJQllURV9VTklUUyA6IEJZVEVfVU5JVFMpO1xuXG5cdGNvbnN0IHNlcGFyYXRvciA9IG9wdGlvbnMuc3BhY2UgPyAnICcgOiAnJztcblxuXHRpZiAob3B0aW9ucy5zaWduZWQgJiYgbnVtYmVyID09PSAwKSB7XG5cdFx0cmV0dXJuIGAgMCR7c2VwYXJhdG9yfSR7VU5JVFNbMF19YDtcblx0fVxuXG5cdGNvbnN0IGlzTmVnYXRpdmUgPSBudW1iZXIgPCAwO1xuXHRjb25zdCBwcmVmaXggPSBpc05lZ2F0aXZlID8gJy0nIDogKG9wdGlvbnMuc2lnbmVkID8gJysnIDogJycpO1xuXG5cdGlmIChpc05lZ2F0aXZlKSB7XG5cdFx0bnVtYmVyID0gLW51bWJlcjtcblx0fVxuXG5cdGxldCBsb2NhbGVPcHRpb25zO1xuXG5cdGlmIChvcHRpb25zLm1pbmltdW1GcmFjdGlvbkRpZ2l0cyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0bG9jYWxlT3B0aW9ucyA9IHttaW5pbXVtRnJhY3Rpb25EaWdpdHM6IG9wdGlvbnMubWluaW11bUZyYWN0aW9uRGlnaXRzfTtcblx0fVxuXG5cdGlmIChvcHRpb25zLm1heGltdW1GcmFjdGlvbkRpZ2l0cyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0bG9jYWxlT3B0aW9ucyA9IHttYXhpbXVtRnJhY3Rpb25EaWdpdHM6IG9wdGlvbnMubWF4aW11bUZyYWN0aW9uRGlnaXRzLCAuLi5sb2NhbGVPcHRpb25zfTtcblx0fVxuXG5cdGlmIChudW1iZXIgPCAxKSB7XG5cdFx0Y29uc3QgbnVtYmVyU3RyaW5nID0gdG9Mb2NhbGVTdHJpbmcobnVtYmVyLCBvcHRpb25zLmxvY2FsZSwgbG9jYWxlT3B0aW9ucyk7XG5cdFx0cmV0dXJuIHByZWZpeCArIG51bWJlclN0cmluZyArIHNlcGFyYXRvciArIFVOSVRTWzBdO1xuXHR9XG5cblx0Y29uc3QgZXhwb25lbnQgPSBNYXRoLm1pbihNYXRoLmZsb29yKG9wdGlvbnMuYmluYXJ5ID8gTWF0aC5sb2cobnVtYmVyKSAvIE1hdGgubG9nKDEwMjQpIDogTWF0aC5sb2cxMChudW1iZXIpIC8gMyksIFVOSVRTLmxlbmd0aCAtIDEpO1xuXHRudW1iZXIgLz0gKG9wdGlvbnMuYmluYXJ5ID8gMTAyNCA6IDEwMDApICoqIGV4cG9uZW50O1xuXG5cdGlmICghbG9jYWxlT3B0aW9ucykge1xuXHRcdG51bWJlciA9IG51bWJlci50b1ByZWNpc2lvbigzKTtcblx0fVxuXG5cdGNvbnN0IG51bWJlclN0cmluZyA9IHRvTG9jYWxlU3RyaW5nKE51bWJlcihudW1iZXIpLCBvcHRpb25zLmxvY2FsZSwgbG9jYWxlT3B0aW9ucyk7XG5cblx0Y29uc3QgdW5pdCA9IFVOSVRTW2V4cG9uZW50XTtcblxuXHRyZXR1cm4gcHJlZml4ICsgbnVtYmVyU3RyaW5nICsgc2VwYXJhdG9yICsgdW5pdDtcbn1cbiIsICJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdHlwZSB7IFJlbmRlckVsZW1lbnRQcm9wcyB9IGZyb20gXCJzbGF0ZS1yZWFjdFwiO1xuaW1wb3J0IHsgUmljaEVsZW1lbnQsIGlzQmxvY2ssIGlzU3VwZXJCbG9jayB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyXCI7XG5cbmludGVyZmFjZSBJQ3VycmVudGVsZW1lbnRQcm92aWRlclByb3BzIHtcbiAgYmxvY2s6IFJpY2hFbGVtZW50O1xuICBzdXBlcmJsb2NrczogUmljaEVsZW1lbnRbXTtcbiAgaW5saW5lOiBSaWNoRWxlbWVudDtcbn1cblxuY29uc3QgQ3VycmVudEVsZW1lbnRDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxJQ3VycmVudGVsZW1lbnRQcm92aWRlclByb3BzPihudWxsKTtcblxuZXhwb3J0IGNsYXNzIEN1cnJlbnRFbGVtZW50UHJvdmlkZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PElDdXJyZW50ZWxlbWVudFByb3ZpZGVyUHJvcHM+IHtcbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEN1cnJlbnRFbGVtZW50Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17dGhpcy5wcm9wc30+e3RoaXMucHJvcHMuY2hpbGRyZW59PC9DdXJyZW50RWxlbWVudENvbnRleHQuUHJvdmlkZXI+XG4gICAgKVxuICB9XG59XG5cbmludGVyZmFjZSBJQ3VycmVudEVsZW1lbnRSZXRyaWV2ZXJQcm9wcyBleHRlbmRzIFJlbmRlckVsZW1lbnRQcm9wcyB7XG4gIGZuOiAoXG4gICAgcGFzc2VkUHJvcHM6IFJlbmRlckVsZW1lbnRQcm9wcyxcbiAgICBpc1NlbGVjdGVkOiBib29sZWFuLFxuICAgIHNlbGVjdGlvbkNyaXRlcmlhOiBcImJsb2NrXCIgfCBcInN1cGVyYmxvY2tcIiB8IFwiaW5saW5lXCIsXG4gICAgc2VsZWN0aW9uSXNQcmltYXJ5OiBib29sZWFuLFxuICApID0+IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuaW50ZXJmYWNlIElDdXJyZW50RWxlbWVudFJldHJpZXZlck9wdGltaXplclByb3BzIGV4dGVuZHMgSUN1cnJlbnRFbGVtZW50UmV0cmlldmVyUHJvcHMge1xuICBpc1NlbGVjdGVkOiBib29sZWFuO1xuICBzZWxlY3Rpb25Dcml0ZXJpYTogXCJibG9ja1wiIHwgXCJzdXBlcmJsb2NrXCIgfCBcImlubGluZVwiO1xuICBzZWxlY3Rpb25Jc1ByaW1hcnk6IGJvb2xlYW47XG59XG5cbmNsYXNzIEN1cnJlbnRFbGVtZW50UmV0cmlldmVyT3B0aW1pemVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxJQ3VycmVudEVsZW1lbnRSZXRyaWV2ZXJPcHRpbWl6ZXJQcm9wcz4ge1xuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnByb3BzLmZuKHtcbiAgICAgICAgYXR0cmlidXRlczogdGhpcy5wcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICBjaGlsZHJlbjogdGhpcy5wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgZWxlbWVudDogdGhpcy5wcm9wcy5lbGVtZW50LFxuICAgICAgfSwgdGhpcy5wcm9wcy5pc1NlbGVjdGVkLCB0aGlzLnByb3BzLnNlbGVjdGlvbkNyaXRlcmlhLCB0aGlzLnByb3BzLnNlbGVjdGlvbklzUHJpbWFyeSlcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDdXJyZW50RWxlbWVudFJldHJpZXZlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8SUN1cnJlbnRFbGVtZW50UmV0cmlldmVyUHJvcHM+IHtcbiAgY29uc3RydWN0b3IocHJvcHM6IElDdXJyZW50RWxlbWVudFJldHJpZXZlclByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5jb25zdW1lID0gdGhpcy5jb25zdW1lLmJpbmQodGhpcyk7XG4gIH1cblxuICBwdWJsaWMgY29uc3VtZShzZWxlY3Rpb246IElDdXJyZW50ZWxlbWVudFByb3ZpZGVyUHJvcHMpIHtcbiAgICBjb25zdCBlbGVtZW50SW5RdWVzdGlvbiA9IHRoaXMucHJvcHMuZWxlbWVudDtcbiAgICBsZXQgaXNTZWxlY3RlZCA9IGZhbHNlO1xuICAgIGxldCBzZWxlY3Rpb25Dcml0ZXJpYTogXCJibG9ja1wiIHwgXCJzdXBlcmJsb2NrXCIgfCBcImlubGluZVwiID0gbnVsbDtcbiAgICBsZXQgc2VsZWN0aW9uSXNQcmltYXJ5OiBib29sZWFuID0gZmFsc2U7XG4gICAgaWYgKGlzQmxvY2soZWxlbWVudEluUXVlc3Rpb24pKSB7XG4gICAgICBzZWxlY3Rpb25Dcml0ZXJpYSA9IFwiYmxvY2tcIjtcbiAgICAgIGlzU2VsZWN0ZWQgPSBzZWxlY3Rpb24uYmxvY2sgPT09IGVsZW1lbnRJblF1ZXN0aW9uO1xuICAgICAgc2VsZWN0aW9uSXNQcmltYXJ5ID0gaXNTZWxlY3RlZCAmJiAhc2VsZWN0aW9uLmlubGluZTtcbiAgICB9IGVsc2UgaWYgKGlzU3VwZXJCbG9jayhlbGVtZW50SW5RdWVzdGlvbikpIHtcbiAgICAgIHNlbGVjdGlvbkNyaXRlcmlhID0gXCJzdXBlcmJsb2NrXCI7XG4gICAgICBjb25zdCBpbmRleCA9IHNlbGVjdGlvbi5zdXBlcmJsb2Nrcy5maW5kSW5kZXgoKGUpID0+IGUgPT09IGVsZW1lbnRJblF1ZXN0aW9uKTtcbiAgICAgIGlzU2VsZWN0ZWQgPSBpbmRleCAhPT0gLTE7XG4gICAgICBzZWxlY3Rpb25Jc1ByaW1hcnkgPSBpc1NlbGVjdGVkICYmICFzZWxlY3Rpb24uYmxvY2sgJiYgIXNlbGVjdGlvbi5pbmxpbmUgJiYgaW5kZXggPT09IHNlbGVjdGlvbi5zdXBlcmJsb2Nrcy5sZW5ndGggLSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxlY3Rpb25Dcml0ZXJpYSA9IFwiaW5saW5lXCI7XG4gICAgICBpc1NlbGVjdGVkID0gc2VsZWN0aW9uLmlubGluZSA9PT0gZWxlbWVudEluUXVlc3Rpb247XG4gICAgICBzZWxlY3Rpb25Jc1ByaW1hcnkgPSBpc1NlbGVjdGVkO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8Q3VycmVudEVsZW1lbnRSZXRyaWV2ZXJPcHRpbWl6ZXJcbiAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgIGlzU2VsZWN0ZWQ9e2lzU2VsZWN0ZWR9XG4gICAgICAgIHNlbGVjdGlvbkNyaXRlcmlhPXtzZWxlY3Rpb25Dcml0ZXJpYX1cbiAgICAgICAgc2VsZWN0aW9uSXNQcmltYXJ5PXtzZWxlY3Rpb25Jc1ByaW1hcnl9XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxDdXJyZW50RWxlbWVudENvbnRleHQuQ29uc3VtZXI+e3RoaXMuY29uc3VtZX08L0N1cnJlbnRFbGVtZW50Q29udGV4dC5Db25zdW1lcj5cbiAgICApXG4gIH1cbn0iLCAiaW1wb3J0IHsgSVJvb3RMZXZlbERvY3VtZW50LCBSaWNoRWxlbWVudCwgZGVzZXJpYWxpemUgfSBmcm9tIFwiLi4vc2VyaWFsaXplclwiO1xuaW1wb3J0IHsgSVRleHQgfSBmcm9tIFwiLi4vc2VyaWFsaXplci90eXBlcy90ZXh0XCI7XG5pbXBvcnQgZXF1YWxzIGZyb20gXCJkZWVwLWVxdWFsXCI7XG5cbi8qKlxuICogQ291bnRzIHRoZSBzaXplIG9mIHRoZSBkb2N1bWVudFxuICogQHBhcmFtIHJvb3QgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3VudFNpemUocm9vdDogSVJvb3RMZXZlbERvY3VtZW50IHwgUmljaEVsZW1lbnQgfCBJVGV4dCk6IG51bWJlciB7XG4gIGlmICh0eXBlb2YgKHJvb3QgYXMgSVRleHQpLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gKHJvb3QgYXMgSVRleHQpLnRleHQubGVuZ3RoO1xuICB9XG4gIGNvbnN0IGNvdW50cyA9IChyb290IGFzIElSb290TGV2ZWxEb2N1bWVudCkuY2hpbGRyZW4ubWFwKGNvdW50U2l6ZSk7XG4gIGlmIChjb3VudHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gZWxzZSBpZiAoY291bnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBjb3VudHNbMF07XG4gIH1cblxuICByZXR1cm4gY291bnRzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIpO1xufVxuXG4vKipcbiAqIENvdW50cyB0aGUgd29yZHMgb2YgdGhlIGRvY3VtZW50XG4gKiBAcGFyYW0gcm9vdCBcbiAqL1xuY29uc3Qgc3BhY2VSZWdleCA9IC9eXFxzKyQvO1xuZXhwb3J0IGZ1bmN0aW9uIGNvdW50V29yZHMocm9vdDogSVJvb3RMZXZlbERvY3VtZW50IHwgUmljaEVsZW1lbnQgfCBJVGV4dCk6IG51bWJlciB7XG4gIGlmICh0eXBlb2YgKHJvb3QgYXMgSVRleHQpLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gKHJvb3QgYXMgSVRleHQpLnRleHQuc3BsaXQoXCIgXCIpLmZpbHRlcigodikgPT4gdiAhPT0gXCJcIiAmJiAhc3BhY2VSZWdleC50ZXN0KHYpKS5sZW5ndGg7XG4gIH1cbiAgY29uc3QgY291bnRzID0gKHJvb3QgYXMgSVJvb3RMZXZlbERvY3VtZW50KS5jaGlsZHJlbi5tYXAoY291bnRXb3Jkcyk7XG4gIGlmIChjb3VudHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gZWxzZSBpZiAoY291bnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBjb3VudHNbMF07XG4gIH1cblxuICByZXR1cm4gY291bnRzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIpO1xufVxuXG4vKipcbiAqIENvdW50cyB0aGUgc2l6ZSBhbmQgd29yZHMgb2YgdGhlIGRvY3VtZW50XG4gKiBAcGFyYW0gcm9vdCBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvdW50U2l6ZUFuZFdvcmRzKHJvb3Q6IElSb290TGV2ZWxEb2N1bWVudCB8IFJpY2hFbGVtZW50IHwgSVRleHQpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgaWYgKHR5cGVvZiAocm9vdCBhcyBJVGV4dCkudGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBbXG4gICAgICAocm9vdCBhcyBJVGV4dCkudGV4dC5sZW5ndGgsXG4gICAgICAocm9vdCBhcyBJVGV4dCkudGV4dC5zcGxpdChcIiBcIikuZmlsdGVyKCh2KSA9PiB2ICE9PSBcIlwiKS5sZW5ndGgsXG4gICAgXTtcbiAgfVxuICBjb25zdCByZXN1bHRzID0gKHJvb3QgYXMgSVJvb3RMZXZlbERvY3VtZW50KS5jaGlsZHJlbi5tYXAoY291bnRTaXplQW5kV29yZHMpO1xuICBpZiAocmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gWzAsIDBdO1xuICB9IGVsc2UgaWYgKHJlc3VsdHMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIHJlc3VsdHNbMF07XG4gIH1cblxuICByZXR1cm4gcmVzdWx0cy5yZWR1Y2UoKGEsIGIpID0+IHtcbiAgICByZXR1cm4gW2FbMF0gKyBiWzBdLCBhWzFdICsgYlsxXV07XG4gIH0pO1xufVxuXG5jb25zdCBpbnZhbGlkQ29tcGFyYWJsZXMgPSBbXG4gIFwic3JjU2V0XCIsXG4gIFwic3JjXCIsXG4gIFwic2l6ZXNcIixcbl07XG5cbmZ1bmN0aW9uIHJlbW92ZUludmFsaWRDb21wYXJhYmxlcyhlbGVtOiBSaWNoRWxlbWVudCB8IElSb290TGV2ZWxEb2N1bWVudCkge1xuICBmb3IgKGxldCBjb21wYXJhYmxlIG9mIGludmFsaWRDb21wYXJhYmxlcykge1xuICAgIGlmIChlbGVtW2NvbXBhcmFibGVdKSB7XG4gICAgICBlbGVtW2NvbXBhcmFibGVdID0gbnVsbDtcbiAgICB9O1xuICB9XG5cbiAgaWYgKGVsZW0uY2hpbGRyZW4pIHtcbiAgICBlbGVtLmNoaWxkcmVuLmZvckVhY2gocmVtb3ZlSW52YWxpZENvbXBhcmFibGVzIGFzIGFueSk7XG4gIH1cblxuICByZXR1cm4gZWxlbTtcbn1cblxuLyoqXG4gKiBjb21wYXJlcyB0d28gdGV4dCBmb3IgZXF1aXZhbGVuY2VcbiAqIEBwYXJhbSB0ZXh0MSBcbiAqIEBwYXJhbSB0ZXh0MiBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRXF1YWxpdHkodGV4dDE6IHN0cmluZyB8IE5vZGVbXSwgdGV4dDI6IHN0cmluZyB8IE5vZGVbXSkge1xuICBpZiAodGV4dDEgPT09IHRleHQyKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAodGV4dDEgPT09IG51bGwgfHwgdGV4dDIgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdGV4dDEgPT09IHRleHQyO1xuICB9XG5cbiAgY29uc3QgZG9jdW1lbnQxID0gcmVtb3ZlSW52YWxpZENvbXBhcmFibGVzKGRlc2VyaWFsaXplKHRleHQxKSk7XG4gIGNvbnN0IGRvY3VtZW50MiA9IHJlbW92ZUludmFsaWRDb21wYXJhYmxlcyhkZXNlcmlhbGl6ZSh0ZXh0MikpO1xuXG4gIHJldHVybiBlcXVhbHMoZG9jdW1lbnQxLmNoaWxkcmVuLCBkb2N1bWVudDIuY2hpbGRyZW4pO1xufVxuXG4vKipcbiAqIGNvbXBhcmVzIHR3byBwbGFpbiB0ZXh0IGZvciBlcXVpdmFsZW5jZVxuICogQHBhcmFtIHRleHQxIFxuICogQHBhcmFtIHRleHQyIFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tFcXVhbGl0eVBsYWluKHRleHQxOiBzdHJpbmcsIHRleHQyOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHRleHQxID09PSB0ZXh0Mjtcbn1cbiIsICJpbXBvcnQgeyBJUm9vdExldmVsRG9jdW1lbnQsIFJpY2hFbGVtZW50IH0gZnJvbSBcIi4uL3NlcmlhbGl6ZXJcIjtcbmltcG9ydCB7IElUZXh0IH0gZnJvbSBcIi4uL3NlcmlhbGl6ZXIvdHlwZXMvdGV4dFwiO1xuaW1wb3J0IHsgSUJhc2VJMThuUmljaFRleHRJbmZvIH0gZnJvbSBcIi4vc2xhdGVcIjtcblxuLyoqXG4gKiBsb2NhbGUgcmVwbGFjZXIgZnVuY3Rpb24gdXNlZCBoZXJlIHNvIHRoYXQgaXRlbWl6ZSBpcyBub3QgbmVlZGVkIHRvIGJlIGltcG9ydGVkXG4gKiB0aGlzIGlzIGEgY29weVxuICogXG4gKiBAcGFyYW0gc3RyIFxuICogQHBhcmFtIGFyZ3MgXG4gKiBAcmV0dXJucyBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvY2FsZVJlcGxhY2VyKHN0cjogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXFx7KFxcZCspXFx9L2csIChtYXRjaCwgaW5kZXhNYXRjaCkgPT4ge1xuICAgIGlmICh0eXBlb2YgYXJnc1tpbmRleE1hdGNoXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIFwiP1wiO1xuICAgIH0gZWxzZSBpZiAoYXJnc1tpbmRleE1hdGNoXSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIHJldHVybiBhcmdzW2luZGV4TWF0Y2hdLnRvU3RyaW5nKCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgbWltZUV4dGVuc2lvbnMgPSB7XG4gIFwiYXVkaW8vYWFjXCI6IFwiYWFjXCIsXG4gIFwiYXBwbGljYXRpb24veC1hYml3b3JkXCI6IFwiYWJ3XCIsXG4gIFwiYXBwbGljYXRpb24veC1mcmVlYXJjXCI6IFwiYXJjXCIsXG4gIFwidmlkZW8veC1tc3ZpZGVvXCI6IFwiYXZpXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLmFtYXpvbi5lYm9va1wiOiBcImF6d1wiLFxuICBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiOiBcImJpblwiLFxuICBcImltYWdlL2JtcFwiOiBcImJtcFwiLFxuICBcImFwcGxpY2F0aW9uL3gtYnppcFwiOiBcImJ6XCIsXG4gIFwiYXBwbGljYXRpb24veC1iemlwMlwiOiBcImJ6MlwiLFxuICBcImFwcGxpY2F0aW9uL3gtY3NoXCI6IFwiY3NoXCIsXG4gIFwidGV4dC9jc3NcIjogXCJjc3NcIixcbiAgXCJ0ZXh0L2NzdlwiOiBcImNzdlwiLFxuICBcImFwcGxpY2F0aW9uL21zd29yZFwiOiBcImRvY1wiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50XCI6IFwiZG9jeFwiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5tcy1mb250b2JqZWN0XCI6IFwiZW90XCIsXG4gIFwiYXBwbGljYXRpb24vZXB1Yit6aXBcIjogXCJlcHViXCIsXG4gIFwiaW1hZ2UvZ2lmXCI6IFwiZ2lmXCIsXG4gIFwidGV4dC9odG1sXCI6IFwiaHRtbFwiLFxuICBcImltYWdlL3ZuZC5taWNyb3NvZnQuaWNvblwiOiBcImljb1wiLFxuICBcInRleHQvY2FsZW5kYXJcIjogXCJpY3NcIixcbiAgXCJhcHBsaWNhdGlvbi9qYXZhLWFyY2hpdmVcIjogXCJqYXJcIixcbiAgXCJpbWFnZS9qcGVnXCI6IFwianBnXCIsXG4gIFwidGV4dC9qYXZhc2NyaXB0XCI6IFwianNcIixcbiAgXCJhcHBsaWNhdGlvbi9qc29uXCI6IFwianNvblwiLFxuICBcImFwcGxpY2F0aW9uL2xkK2pzb25cIjogXCJqc29ubGRcIixcbiAgXCJhdWRpby9taWRpIGF1ZGlvL3gtbWlkaVwiOiBcIm1pZFwiLFxuICBcImF1ZGlvL21wZWdcIjogXCJtcDNcIixcbiAgXCJ2aWRlby9tcGVnXCI6IFwibXBlZ1wiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5hcHBsZS5pbnN0YWxsZXIreG1sXCI6IFwibXBrZ1wiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5vYXNpcy5vcGVuZG9jdW1lbnQucHJlc2VudGF0aW9uXCI6IFwib2RwXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm9hc2lzLm9wZW5kb2N1bWVudC5zcHJlYWRzaGVldFwiOiBcIm9kc1wiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5vYXNpcy5vcGVuZG9jdW1lbnQudGV4dFwiOiBcIm9kdFwiLFxuICBcImF1ZGlvL29nZ1wiOiBcIm9nYVwiLFxuICBcInZpZGVvL29nZ1wiOiBcIm9ndlwiLFxuICBcImFwcGxpY2F0aW9uL29nZ1wiOiBcIm9neFwiLFxuICBcImZvbnQvb3RmXCI6IFwib3RmXCIsXG4gIFwiaW1hZ2UvcG5nXCI6IFwicG5nXCIsXG4gIFwiYXBwbGljYXRpb24vcGRmXCI6IFwicGRmXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm1zLXBvd2VycG9pbnRcIjogXCJwcHRcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQucHJlc2VudGF0aW9ubWwucHJlc2VudGF0aW9uXCI6IFwicHB0eFwiLFxuICBcImFwcGxpY2F0aW9uL3gtcmFyLWNvbXByZXNzZWRcIjogXCJyYXJcIixcbiAgXCJhcHBsaWNhdGlvbi9ydGZcIjogXCJydGZcIixcbiAgXCJhcHBsaWNhdGlvbi94LXNoXCI6IFwic2hcIixcbiAgXCJpbWFnZS9zdmcreG1sXCI6IFwic3ZnXCIsXG4gIFwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIjogXCJzd2ZcIixcbiAgXCJhcHBsaWNhdGlvbi94LXRhclwiOiBcInRhclwiLFxuICBcImltYWdlL3RpZmZcIjogXCJ0aWZmXCIsXG4gIFwiZm9udC90dGZcIjogXCJ0dGZcIixcbiAgXCJ0ZXh0L3BsYWluXCI6IFwidHh0XCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLnZpc2lvXCI6IFwidnNkXCIsXG4gIFwiYXVkaW8vd2F2XCI6IFwid2F2XCIsXG4gIFwiYXVkaW8vd2VibVwiOiBcIndlYmFcIixcbiAgXCJ2aWRlby93ZWJtXCI6IFwid2VibVwiLFxuICBcImltYWdlL3dlYnBcIjogXCJ3ZWJwXCIsXG4gIFwiZm9udC93b2ZmXCI6IFwid29mZlwiLFxuICBcImZvbnQvd29mZjJcIjogXCJ3b2ZmMlwiLFxuICBcImFwcGxpY2F0aW9uL3hodG1sK3htbFwiOiBcInhodG1sXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsXCI6IFwieGxzXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXRcIjogXCJ4bHN4XCIsXG4gIFwiYXBwbGljYXRpb24veG1sIGlmIG5vdCByZWFkYWJsZSBmcm9tIGNhc3VhbCB1c2VycyAoUkZDIDMwMjMsIHNlY3Rpb24gMylcIjogXCJ4bWxcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQubW96aWxsYS54dWwreG1sXCI6IFwieHVsXCIsXG4gIFwiYXBwbGljYXRpb24vemlwXCI6IFwiemlwXCIsXG4gIFwidmlkZW8vM2dwcFwiOiBcIjNncFwiLFxuICBcInZpZGVvLzNncHAyXCI6IFwiM2cyXCIsXG4gIFwiYXBwbGljYXRpb24veC03ei1jb21wcmVzc2VkXCI6IFwiN3pcIixcbn07XG5cbi8qKlxuICogQ29udmVydHMgYSBtaW1lIHR5cGUgdG8gYW4gZXh0ZW5zaW9uIHVzaW5nIGEga25vd24gZXh0ZW5zaW9uIGxpc3RcbiAqIFxuICogQ29waWVkIHNvIHRoYXQgaXRlbWl6ZSBkb2Vzbid0IG5lZWQgdG8gYmUgaW1wb3J0ZWQgYXMgd2VsbFxuICogXG4gKiBAcGFyYW0gc3RyIHRoZSBzdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBtaW1lIHR5cGVcbiAqIEByZXR1cm5zIGFuIGV4dGVuc2lvbiBvciB0eHQgaWYgaXQgZG9lc24ndCBrbm93XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtaW1lVHlwZVRvRXh0ZW5zaW9uKHN0cjogc3RyaW5nKSB7XG4gIGNvbnN0IGV4cGVjdGVkRXh0ID0gbWltZUV4dGVuc2lvbnNbc3RyXTtcbiAgaWYgKGV4cGVjdGVkRXh0KSB7XG4gICAgcmV0dXJuIGV4cGVjdGVkRXh0O1xuICB9XG4gIHJldHVybiAoc3RyLnNwbGl0KFwiL1wiKVsxXSB8fCBcInR4dFwiKS5zdWJzdHIoMCwgMyk7XG59XG5cblxuLyoqXG4gKiBUaGUgYXR0cmlidXRlcyB0aGF0IGV4aXN0IGluIGEgZ2l2ZW4gZWxlbWVudCB0aGF0IG1hcmsgc3VjaFxuICogYXMgYSB0ZW1wbGF0ZWQgZWxlbWVudFxuICogQGlnbm9yZVxuICovXG5jb25zdCB0ZW1wbGF0ZWRBdHRyaWJ1dGVzID0gW1xuICBcInRocmVmXCIsXG4gIFwidGV4dENvbnRlbnRcIixcbiAgXCJodG1sXCIsXG4gIFwiZm9yRWFjaFwiLFxuICBcImNvbnRleHRcIixcbiAgXCJ1aUhhbmRsZXJcIixcbl07XG5cbi8qKlxuICogVGhlIGludGVyYWN0aXZlIGFjdGlvbnMgdGhhdCBleGlzdCB0aGF0IG1hcmtcbiAqIHNvbWV0aGluZyBhcyBhIHRlbXBsYXRlZCBlbGVtZW50IHRoYXQgaXMgaW50ZXJhY3RpdmVcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgdGVtcGxhdGVkSW50ZXJhY3RpdmVBY3Rpb25zID0gW1xuICBcImNsaWNrXCIsXG4gIFwiYmx1clwiLFxuICBcImZvY3VzXCIsXG4gIFwiaW5wdXRcIixcbiAgXCJrZXlkb3duXCIsXG4gIFwia2V5cHJlc3NcIixcbiAgXCJrZXl1cFwiLFxuICBcIm1vdXNlZG93blwiLFxuICBcIm1vdXNlZW50ZXJcIixcbiAgXCJtb3VzZWxlYXZlXCIsXG4gIFwibW91c2Vtb3ZlXCIsXG4gIFwibW91c2VvdmVyXCIsXG4gIFwibW91c2VvdXRcIixcbiAgXCJtb3VzZXVwXCIsXG4gIFwibW91c2V3aGVlbFwiLFxuICBcInRvdWNoc3RhcnRcIixcbiAgXCJ0b3VjaG1vdmVcIixcbiAgXCJ0b3VjaGVuZFwiLFxuICBcInRvdWNoY2FuY2VsXCIsXG4gIFwid2hlZWxcIixcbl07XG5cbi8qKlxuICogVGhlIGF0dHJpYnV0ZXMgdGhhdCBleGlzdCBpbiBhIGdpdmVuIGVsZW1lbnQgdGhhdCBtYXJrIHN1Y2hcbiAqIGFzIGEgdGVtcGxhdGVkIHN0eWxlZCBlbGVtZW50c1xuICogQGlnbm9yZVxuICovXG5jb25zdCB0ZW1wbGF0ZWRTdHlsZWRBdHRyaWJ1dGVzID0gW1xuICBcInN0eWxlSG92ZXJcIixcbiAgXCJzdHlsZUFjdGl2ZVwiLFxuXTtcblxuXG4vKipcbiAqIFRoZSBsaXN0IG9mIHNwZWNpYWwgdHlwZXMgdG8gdXNlXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IHNwZWNpYWxUeXBlcyA9IHtcbiAgXCJ2b2lkLWJsb2NrXCI6IFwiY29udGFpbmVyXCIsXG4gIFwidm9pZC1zdXBlcmJsb2NrXCI6IFwiY29udGFpbmVyXCIsXG4gIFwidm9pZC1pbmxpbmVcIjogXCJpbmxpbmVcIixcbn07XG5cbi8qKlxuICogVGhlIG5vZGUgaW5mb3JtYXRpb24gdGhhdCBpcyBleHRyYWN0ZWQgb2YgYSBnaXZlbiBub2RlIHVzZWRcbiAqIHRvIGJlIGRpc3BsYXllZCB0byB0aGUgdXNlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIElOb2RlSW5mbyB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSB0aGF0IGlzIGdpdmVuLCBodW1hbiByZWFkYWJsZSBpbiB0aGUgZ2l2ZW4gbGFuZ3VhZ2VcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqIFdoZXRoZXIgaXQgcmVwcmVzZW50cyBhIHRlbXBsYXRlZCBub2RlXG4gICAqL1xuICBpc1RlbXBsYXRlOiBib29sZWFuO1xuICAvKipcbiAgICogV2hldGhlciBpdCByZXByZXNlbnRzIGEgdGV4dCBub2RlXG4gICAqL1xuICBpc1RleHQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgd2hldGhlciBpdCBpcyBhbiBpbnRlcmFjdGl2ZSBlbGVtZW50XG4gICAqL1xuICBpc0ludGVyYWN0aXZlOiBib29sZWFuO1xufVxuXG4vKipcbiAqIFByb3ZpZGVzIHRoZSBub2RlIGluZm8gb2YgYSBnaXZlbiBub2RlXG4gKiBAcGFyYW0gbm9kZSB0aGUgbm9kZSwgZWl0aGVyIHRleHQgb3IgcmljaCBlbGVtZW50XG4gKiBAcGFyYW0gaTE4bkRhdGEgdGhlIGkxOG4gaW5mb3JtYXRpb24gdG8gYmUgdXNlZCB0byBjcmVhdGUgdGhlIG5hbWVcbiAqIEByZXR1cm5zIHRoZSBub2RlIGluZm9ybWF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbmZvRm9yKFxuICBub2RlOiBSaWNoRWxlbWVudCB8IElUZXh0IHwgSVJvb3RMZXZlbERvY3VtZW50LFxuICBpMThuRGF0YTogSUJhc2VJMThuUmljaFRleHRJbmZvLFxuKTogSU5vZGVJbmZvIHtcbiAgaWYgKChub2RlIGFzIGFueSkudHlwZSA9PT0gXCJkb2N1bWVudFwiKSB7XG4gICAgcmV0dXJuIG51bGwgYXMgYW55O1xuICB9XG5cbiAgLy8gY2hlY2sgZm9yIHdoZXRoZXIgaXMgaW50ZXJhY3RpdmUgYW5kIG90aGVyIG9wdGlvbnNcbiAgY29uc3QgaXNJbnRlcmFjdGl2ZSA9IHRlbXBsYXRlZEludGVyYWN0aXZlQWN0aW9ucy5zb21lKChhdHRyKSA9PiB0eXBlb2Ygbm9kZVthdHRyXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBub2RlW2F0dHJdICE9PSBudWxsKTtcbiAgY29uc3QgaXNUZW1wbGF0ZVN0eWxlZCA9IHRlbXBsYXRlZFN0eWxlZEF0dHJpYnV0ZXMuc29tZSgoYXR0cikgPT4gdHlwZW9mIG5vZGVbYXR0cl0gIT09IFwidW5kZWZpbmVkXCIgJiYgbm9kZVthdHRyXSAhPT0gbnVsbCk7XG4gIGNvbnN0IGlzQmFzaWNTdHlsZWQgPSAhIShub2RlIGFzIFJpY2hFbGVtZW50KS5zdHlsZSB8fCAoKG5vZGUgYXMgUmljaEVsZW1lbnQpLnJpY2hDbGFzc0xpc3QgJiYgKChub2RlIGFzIFJpY2hFbGVtZW50KS5yaWNoQ2xhc3NMaXN0IGFzIGFueSkubGVuZ3RoKTtcbiAgY29uc3QgaXNCYXNpY1RlbXBsYXRlZCA9IHRlbXBsYXRlZEF0dHJpYnV0ZXMuc29tZSgoYXR0cikgPT4gdHlwZW9mIG5vZGVbYXR0cl0gIT09IFwidW5kZWZpbmVkXCIgJiYgbm9kZVthdHRyXSAhPT0gbnVsbCk7XG4gIGNvbnN0IGlzVGVtcGxhdGUgPSBpc0ludGVyYWN0aXZlIHx8IGlzVGVtcGxhdGVTdHlsZWQgfHwgaXNCYXNpY1RlbXBsYXRlZDtcblxuICAvLyBub3cgbGV0J3MgYnVpbGQgdGhlIG5hbWUgbGFiZWwgZm9yIHRoZSBnaXZlbiBsYW5ndWFnZVxuICBjb25zdCBmb3VuZEN1c3RvbU5hbWUgPSAoIShub2RlIGFzIFJpY2hFbGVtZW50KS5naXZlbk5hbWUgJiYgKG5vZGUgYXMgUmljaEVsZW1lbnQpLnVpSGFuZGxlcikgP1xuICAgIGkxOG5EYXRhLnJpY2hVSUhhbmRsZXJFbGVtZW50Wyhub2RlIGFzIFJpY2hFbGVtZW50IGFzIGFueSkudWlIYW5kbGVyLnJlcGxhY2UoLy0vZywgXCJfXCIpXSA6IG51bGw7XG4gIGxldCBuYW1lTGFiZWw6IHN0cmluZyA9IChub2RlIGFzIFJpY2hFbGVtZW50KS5naXZlbk5hbWUgPyAobm9kZSBhcyBSaWNoRWxlbWVudCkuZ2l2ZW5OYW1lIDogKFxuICAgIGZvdW5kQ3VzdG9tTmFtZSB8fCAoXG4gICAgICAobm9kZSBhcyBSaWNoRWxlbWVudCkudHlwZSA/XG4gICAgICAgIChpMThuRGF0YVtzcGVjaWFsVHlwZXNbKG5vZGUgYXMgUmljaEVsZW1lbnQpLnR5cGVdID8gc3BlY2lhbFR5cGVzWyhub2RlIGFzIFJpY2hFbGVtZW50KS50eXBlXSA6IChub2RlIGFzIFJpY2hFbGVtZW50KS50eXBlLnJlcGxhY2UoLy0vZywgXCJfXCIpXSB8fFxuICAgICAgICAgIChub2RlIGFzIFJpY2hFbGVtZW50KS50eXBlKSA6XG4gICAgICAgIGkxOG5EYXRhLnRleHQpXG4gICk7XG5cbiAgaWYgKCEobm9kZSBhcyBSaWNoRWxlbWVudCkuZ2l2ZW5OYW1lICYmICFmb3VuZEN1c3RvbU5hbWUpIHtcbiAgICBpZiAoaXNCYXNpY1N0eWxlZCB8fCBpc1RlbXBsYXRlU3R5bGVkKSB7XG4gICAgICBuYW1lTGFiZWwgPSBsb2NhbGVSZXBsYWNlcihpMThuRGF0YS5zdHlsZWQsIG5hbWVMYWJlbCk7XG4gICAgfVxuICAgIGlmIChpc0ludGVyYWN0aXZlKSB7XG4gICAgICBuYW1lTGFiZWwgPSBsb2NhbGVSZXBsYWNlcihpMThuRGF0YS5pbnRlcmFjdGl2ZSwgbmFtZUxhYmVsKTtcbiAgICB9XG4gICAgaWYgKGlzVGVtcGxhdGUpIHtcbiAgICAgIG5hbWVMYWJlbCA9IGxvY2FsZVJlcGxhY2VyKGkxOG5EYXRhLnRlbXBsYXRlLCBuYW1lTGFiZWwpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGFuZCB3ZSBjYW4gcmV0dXJuIHRoZSBpbmZvcm1hdGlvbiBub3dcbiAgcmV0dXJuIHtcbiAgICBpc1RlbXBsYXRlLFxuICAgIGlzSW50ZXJhY3RpdmUsXG4gICAgbmFtZTogbmFtZUxhYmVsLFxuICAgIGlzVGV4dDogdHlwZW9mIChub2RlIGFzIElUZXh0KS50ZXh0ID09PSBcInN0cmluZ1wiLFxuICB9XG59IiwgIi8qKlxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBmYXN0IHByb3RvdHlwaW5nIHdyYXBwZXIgdGhhdCB1c2VzIHRoZSBtYXRlcmlhbCBVSSBlbGVtZW50c1xuICogaW4gb3JkZXIgdG8gY3JlYXRlIHRoZSBzbGF0ZSBlZGl0b3IgZm9yIHRoZSBQcm9wZXJ0eVZpZXdUZXh0XG4gKiBcbiAqIFRoZSB3cmFwcGVyIGNvbXBvbmVudCBpcyBhZGRlZCBhcyBhIHByb3BlcnR5IHRvIHRoZSBzbGF0ZSBlZGl0b3IgaXRzZWxmIHNvIG90aGVyIHdyYXBwZXJzXG4gKiBjYW4gYmUgYWRkZWQgYXMgcmVwbGFjZW1lbnQsIHlvdSBjYW4gYWxzbyBkZXNpZ24geW91ciBvd24gd3JhcHBlciBiYXNlZCBvbiB0aGlzIG9uZVxuICogXG4gKiBAbW9kdWxlXG4gKi9cblxuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IElIZWxwZXJGdW5jdGlvbnMsIElTbGF0ZUVkaXRvckludGVybmFsU3RhdGVUeXBlLCBJU2xhdGVFZGl0b3JXcmFwcGVyQmFzZVByb3BzIH0gZnJvbSBcIi5cIjtcblxuaW1wb3J0IHsgUGF0aCwgUmFuZ2UgfSBmcm9tIFwic2xhdGVcIjtcbmltcG9ydCB7IFJpY2hFbGVtZW50IH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXJcIjtcbmltcG9ydCB7IFdyYXBwZXJEcmF3ZXIgfSBmcm9tIFwiLi9kcmF3ZXJcIjtcbmltcG9ydCB7IEZpbGVMb2FkRXJyb3JEaWFsb2csIElEaWFsb2dDb21wb25lbnRQcm9wcyB9IGZyb20gXCIuL2RpYWxvZ3MvZmlsZVwiO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCB7IGNvdW50U2l6ZUFuZFdvcmRzIH0gZnJvbSBcIi4uLy4uL3V0aWxcIjtcbmltcG9ydCB7IFNUQU5EQVJEX1RFWFRfTk9ERSB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL3RleHRcIjtcbmltcG9ydCB7IElCYXNlSTE4blJpY2hUZXh0SW5mbywgZGVmYXVsdEJhc2VJMThuUmljaEluZm9FbmdsaXNoIH0gZnJvbSBcIi5cIjtcbmltcG9ydCB7IElXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlUHJvcHMsIElXcmFwcGVyRHJhd2VySW5mb1BhbmVsV3JhcHBlclByb3BzLCBJV3JhcHBlckRyYXdlclRhYnNQcm9wcyB9IGZyb20gXCIuL2RyYXdlclwiO1xuaW1wb3J0IHR5cGUgeyBJV3JhcHBlckRyYXdlckNoZWNrQm94UHJvcHMsIElXcmFwcGVyRHJhd2VyTXVsdGlTZWxlY3RGaWVsZFByb3BzLCBJV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkUHJvcHMsIElXcmFwcGVyRHJhd2VyVGV4dEZpZWxkUHJvcHMgfSBmcm9tIFwiLi9kcmF3ZXIvZ2VuZXJhbFwiO1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdFdyYXBwZXJJMThuUmljaEluZm9FbmdsaXNoOiBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8gPSB7XG4gIC4uLmRlZmF1bHRCYXNlSTE4blJpY2hJbmZvRW5nbGlzaCxcbiAgZm9ybWF0QWRkQ29udGFpbmVyTGFiZWw6IFwiYWRkIGNvbnRhaW5lclwiLFxuICBhZGRUZW1wbGF0ZUhUTUw6IHtcbiAgICBsYWJlbDogXCJzZWxlY3QgYSB0ZW1wbGF0ZVwiLFxuICAgIHBsYWNlaG9sZGVyOiBcInNlbGVjdCBhIHRlbXBsYXRlXCIsXG4gICAgc3VibWl0OiBcIm9rXCIsXG4gICAgdGl0bGU6IFwiYWRkIHRlbXBsYXRlIGh0bWxcIixcbiAgfSxcbiAgYWRkVGVtcGxhdGVUZXh0OiB7XG4gICAgbGFiZWw6IFwic2VsZWN0IGEgdGVtcGxhdGVcIixcbiAgICBwbGFjZWhvbGRlcjogXCJzZWxlY3QgYSB0ZW1wbGF0ZVwiLFxuICAgIHN1Ym1pdDogXCJva1wiLFxuICAgIHRpdGxlOiBcImFkZCB0ZW1wbGF0ZSB0ZXh0XCIsXG4gIH0sXG4gIGZvcm1hdEFkZEN1c3RvbUxhYmVsOiBcImFkZCBjdXN0b21cIixcbiAgZm9ybWF0QWRkRmlsZUxhYmVsOiBcImFkZCBmaWxlXCIsXG4gIGZvcm1hdEFkZEltYWdlTGFiZWw6IFwiYWRkIGltYWdlXCIsXG4gIGZvcm1hdEFkZFRhYmxlTGFiZWw6IFwiYWRkIHRhYmxlXCIsXG4gIGZvcm1hdEFkZFRib2R5TGFiZWw6IFwiYWRkIHRhYmxlIGJvZHlcIixcbiAgZm9ybWF0QWRkVGRMYWJlbDogXCJhZGQgdGFibGUgY29sdW1uXCIsXG4gIGZvcm1hdEFkZFRlbXBsYXRlSFRNTDogXCJhZGQgdGVtcGxhdGUgaHRtbFwiLFxuICBmb3JtYXRBZGRUZW1wbGF0ZVRleHQ6IFwiYWRkIHRlbXBsYXRlIHRleHRcIixcbiAgZm9ybWF0QWRkVGZvb3RMYWJlbDogXCJ0b2dnbGUgdGFibGUgZm9vdFwiLFxuICBmb3JtYXRBZGRUaGVhZExhYmVsOiBcImFkZCB0YWJsZSBoZWFkXCIsXG4gIGZvcm1hdEFkZFRoTGFiZWw6IFwidG9nZ2xlIHRhYmxlIGhlYWRlclwiLFxuICBmb3JtYXRBZGRUckxhYmVsOiBcImFkZCB0YWJsZSByb3dcIixcbiAgZm9ybWF0QWRkVmlkZW9MYWJlbDogXCJhZGQgdGFibGUgdmlkZW9cIixcbiAgZm9ybWF0Qm9sZExhYmVsOiBcImJvbGRcIixcbiAgZm9ybWF0RGVsZXRlRWxlbWVudDogXCJkZWxldGVcIixcbiAgZm9ybWF0RGVsVGRMYWJlbDogXCJkZWxldGUgdGFibGUgY29sdW1uXCIsXG4gIGZvcm1hdERlbFRoTGFiZWw6IFwiZGVsZXRlIHRhYmxlIGhlYWRlciBjb2x1bW5cIixcbiAgZm9ybWF0RGVsVHJMYWJlbDogXCJkZWxldGUgdGFibGUgcm93XCIsXG4gIGZvcm1hdEl0YWxpY0xhYmVsOiBcIml0YWxpY1wiLFxuICBmb3JtYXRMaW5rTGFiZWw6IFwibGlua1wiLFxuICBmb3JtYXRMaXN0QnVsbGV0ZWRMYWJlbDogXCJidWxsZXRlZCBsaXN0XCIsXG4gIGZvcm1hdExpc3ROdW1iZXJlZExhYmVsOiBcIm51bWJlcmVkIGxpc3RcIixcbiAgZm9ybWF0TWFrZUxvb3A6IFwibWFrZSBsb29wXCIsXG4gIGZvcm1hdE1vcmU6IFwibW9yZVwiLFxuICBmb3JtYXRRdW90ZUxhYmVsOiBcInF1b3RlXCIsXG4gIGZvcm1hdFNldEFjdGl2ZVN0eWxlTGFiZWw6IFwiYWN0aXZlIHN0eWxlXCIsXG4gIGZvcm1hdFNldENsYXNzTGFiZWw6IFwiY2xhc3MgbmFtZXNcIixcbiAgZm9ybWF0U2V0Q29udGV4dDogXCJzZXQgY29udGV4dFwiLFxuICBmb3JtYXRTZXRFdmVudEhhbmRsZXJzOiBcInNldCBldmVudCBoYW5kbGVyc1wiLFxuICBmb3JtYXRTZXRIb3ZlclN0eWxlTGFiZWw6IFwiaG92ZXIgc3R5bGVcIixcbiAgZm9ybWF0U2V0UmVuZGVyQ29uZGl0aW9uOiBcInNldCByZW5kZXIgY29uZGl0aW9uXCIsXG4gIGZvcm1hdFNldFN0eWxlTGFiZWw6IFwic2V0IHN0eWxlXCIsXG4gIGZvcm1hdFNldFVJSGFuZGxlckFyZ0xhYmVsOiBcInNldCB1aSBoYW5kbGVyIGFyZ1wiLFxuICBmb3JtYXRTZXRVSUhhbmRsZXJBcmdOYW1lOiBcInNldCB1aSBoYW5kbGVyIGFyZyBuYW1lXCIsXG4gIGZvcm1hdFNldFVJSGFuZGxlckFyZ1ZhbHVlOiBcInNldCB1aSBoYW5kbGVyIGFyZyB2YWx1ZVwiLFxuICBmb3JtYXRTZXRVSUhhbmRsZXJMYWJlbDogXCJzZXQgdWkgaGFuZGxlclwiLFxuICBmb3JtYXRUaXRsZUxhYmVsOiBcInRpdGxlXCIsXG4gIGZvcm1hdFVuZGVybGluZUxhYmVsOiBcInVuZGVybGluZVwiLFxuICBsb2FkVmlkZW86IHtcbiAgICBpbnZhbGlkOiBcImludmFsaWQgdXJsXCIsXG4gICAgbGFiZWw6IFwieW91dHViZSBhbmQgdmltZW8gb25seVwiLFxuICAgIHBsYWNlaG9sZGVyOiBcImh0dHBzOi8veW91dHViZS5jb20vLi4uXCIsXG4gICAgc3VibWl0OiBcImluc2VydFwiLFxuICAgIHRpdGxlOiBcImluc2VydCBhIHZpZGVvXCIsXG4gIH0sXG4gIHNldExpbms6IHtcbiAgICBpbnZhbGlkOiBcImludmFsaWQgbGlua1wiLFxuICAgIGxhYmVsOiBcInVybFwiLFxuICAgIHBsYWNlaG9sZGVyOiBcImh0dHBzOi8vdXJsXCIsXG4gICAgcGxhY2Vob2xkZXJMb2NhbE9ubHk6IFwiLi9sb2NhbC11cmwtb25seVwiLFxuICAgIHN1Ym1pdDogXCJva1wiLFxuICAgIHRlbXBsYXRlZDogXCJvciBzZWxlY3Qgb25lIG9mIHRoZXNlIHRlbXBsYXRlIHZhbHVlc1wiLFxuICAgIHRlbXBsYXRlZExhYmVsOiBcInRlbXBsYXRlIHZhbHVlXCIsXG4gICAgdGVtcGxhdGVkUGxhY2Vob2xkZXI6IFwidGVtcGxhdGUgdmFsdWVcIixcbiAgICB0ZW1wbGF0ZWRVbnNwZWNpZmllZDogXCJ1bnNwZWNpZmllZFwiLFxuICAgIHRpdGxlOiBcImluc2VydCBhIGxpbmssXCJcbiAgfSxcbiAgZ2VuZXJpY0Vycm9yOiBcImVycm9yXCIsXG4gIG9rOiBcIm9rXCIsXG59XG5cbi8qKlxuICogVGhlIHJpY2ggdGV4dCBpbmZvcm1hdGlvblxuICogdG8gYmUgdXNlZCB0byBidWlsZCBhbiBlZGl0b3IgYW5kIGRlc2NyaWJlXG4gKiBhIG5vZGVcbiAqIFxuICogY2hlY2sgYmFzaWNJMThuUmljaEluZm9FbmdsaXNoIHRvIHNlZSBob3cgaXQgaXMgZG9uZVxuICogc29tZSBvZiB0aGVzZSBlbGVtZW50cyBhcmUgc2V0dXAgd2l0aCBhIG51bWJlciB7MH1cbiAqIGR1ZSB0byBpdGVtaXplJ3MgbG9jYWxpemF0aW9uIGFuZCB0aGUgd2F5IGl0J3MgZG9uZVxuICogaW4gaXRzIGxvY2FsaXphdGlvbiBmaWxlcywgaGVyZSB5b3UgaGF2ZSB0byBkbyBieSBjb2RlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvIGV4dGVuZHMgSUJhc2VJMThuUmljaFRleHRJbmZvIHtcbiAgZm9ybWF0Qm9sZExhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEl0YWxpY0xhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFVuZGVybGluZUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdExpbmtMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRUaXRsZUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFF1b3RlTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0TGlzdE51bWJlcmVkTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0TGlzdEJ1bGxldGVkTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0QWRkSW1hZ2VMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRWaWRlb0xhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEFkZEZpbGVMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRDb250YWluZXJMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRUYWJsZUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEFkZFRoZWFkTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0QWRkVGJvZHlMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRUZm9vdExhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEFkZFRyTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0QWRkVGRMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRUaExhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdERlbFRyTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0RGVsVGRMYWJlbDogc3RyaW5nO1xuICBmb3JtYXREZWxUaExhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEFkZEN1c3RvbUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFNldFN0eWxlTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0U2V0SG92ZXJTdHlsZUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFNldEFjdGl2ZVN0eWxlTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0U2V0Q2xhc3NMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRTZXRFdmVudEhhbmRsZXJzOiBzdHJpbmc7XG4gIGZvcm1hdFNldENvbnRleHQ6IHN0cmluZztcbiAgZm9ybWF0U2V0UmVuZGVyQ29uZGl0aW9uOiBzdHJpbmc7XG4gIGZvcm1hdE1ha2VMb29wOiBzdHJpbmc7XG4gIGZvcm1hdFNldFVJSGFuZGxlckxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFNldFVJSGFuZGxlckFyZ0xhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFNldFVJSGFuZGxlckFyZ05hbWU6IHN0cmluZztcbiAgZm9ybWF0U2V0VUlIYW5kbGVyQXJnVmFsdWU6IHN0cmluZztcbiAgZm9ybWF0QWRkVGVtcGxhdGVUZXh0OiBzdHJpbmc7XG4gIGZvcm1hdEFkZFRlbXBsYXRlSFRNTDogc3RyaW5nO1xuICBmb3JtYXREZWxldGVFbGVtZW50OiBzdHJpbmc7XG4gIGZvcm1hdE1vcmU6IHN0cmluZztcblxuICBsb2FkVmlkZW86IHtcbiAgICBpbnZhbGlkOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBwbGFjZWhvbGRlcjogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgc3VibWl0OiBzdHJpbmc7XG4gIH07XG5cbiAgc2V0TGluazoge1xuICAgIGludmFsaWQ6IHN0cmluZztcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIHBsYWNlaG9sZGVyOiBzdHJpbmc7XG4gICAgcGxhY2Vob2xkZXJMb2NhbE9ubHk6IHN0cmluZztcbiAgICB0ZW1wbGF0ZWQ6IHN0cmluZztcbiAgICB0ZW1wbGF0ZWRMYWJlbDogc3RyaW5nO1xuICAgIHRlbXBsYXRlZFBsYWNlaG9sZGVyOiBzdHJpbmc7XG4gICAgdGVtcGxhdGVkVW5zcGVjaWZpZWQ6IHN0cmluZztcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIHN1Ym1pdDogc3RyaW5nO1xuICB9O1xuXG4gIGFkZFRlbXBsYXRlVGV4dDoge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBwbGFjZWhvbGRlcjogc3RyaW5nO1xuICAgIHN1Ym1pdDogc3RyaW5nO1xuICB9O1xuXG4gIGFkZFRlbXBsYXRlSFRNTDoge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBwbGFjZWhvbGRlcjogc3RyaW5nO1xuICAgIHN1Ym1pdDogc3RyaW5nO1xuICB9O1xuXG4gIGdlbmVyaWNFcnJvcjogc3RyaW5nO1xuICBvazogc3RyaW5nO1xufVxuXG50eXBlIFJpY2hFbGVtZW50Rm4gPSAoKSA9PiBSaWNoRWxlbWVudDtcblxuZnVuY3Rpb24gY2FsbEZuKGZvY3VzRm46IEZ1bmN0aW9uLCBhY3Rpb25GbjogRnVuY3Rpb24sIC4uLmFyZ3M6IGFueVtdKSB7XG4gIGZvY3VzRm4oKTtcbiAgYWN0aW9uRm4oLi4uYXJncyk7XG59XG5cbi8qKlxuICogUmVmZXJzIHRvIHRvb2xiYXIgcHJlc2NlbmNlIGVsZW1lbnRzIHRoYXQgYXJlIGFkZGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVRvb2xiYXJQcmVzY2Vuc2VFbGVtZW50IHtcbiAgLyoqXG4gICAqIFRoZSBleHRyYSBpZFxuICAgKi9cbiAgaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEEgdGl0bGUgdG8gdXNlXG4gICAqIGlmIGEgcmVhY3Qgbm9kZSBpcyBwcm92aWRlZCB0aGlzIG5vZGUgd2lsbCBiZSBtb2RpZmllZFxuICAgKiBhbmQgYWRkZWQgYSBjaGlsZHJlbiBhcyAoaTE4blZhbHVlOiBzdHJpbmcpID0+IFJlYWN0Lk5vZGVcbiAgICogZWcuIHRoZSBpMThuUmVhZCBlbGVtZW50XG4gICAqL1xuICB0aXRsZT86IHN0cmluZyB8IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IHRvIGJlIGFkZGVkXG4gICAqL1xuICBlbGVtZW50PzogUmljaEVsZW1lbnQgfCBSaWNoRWxlbWVudEZuO1xuICAvKipcbiAgICogQWx0ZXJuYXRpdmVseSBhbiBhY3Rpb25cbiAgICovXG4gIG9uQ2xpY2s/OiAoZGVmYXVsdEFjdGlvbjogKCkgPT4gUmljaEVsZW1lbnQsIGU6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEVsZW1lbnQ+KSA9PiB2b2lkO1xuICAvKipcbiAgICogSGFuZGxlIHJlZm9jdXMgYXR0ZW1wdHMgZHVyaW5nIHRoZSBjbGljayBldmVudFxuICAgKiBAcGFyYW0gZGVmYXVsdEFjdGlvbiBcbiAgICogQHBhcmFtIGUgXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgcmVmb2N1c0hhbmRsZXI/OiAoZGVmYXVsdEFjdGlvbjogKCkgPT4gdm9pZCwgZTogUmVhY3QuTW91c2VFdmVudDxIVE1MRWxlbWVudD4pID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBUcmlnZ2VyIG9uIGFueSBrZXlkb3duIGV2ZW50XG4gICAqIEBwYXJhbSBlIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIG9uQW55S2V5RG93bj86IChlOiBLZXlib2FyZEV2ZW50KSA9PiB2b2lkO1xuICAvKipcbiAgICogTWFudWFsbHkgc3BlY2lmeSB3aGV0aGVyIGl0J3MgZGlzYWJsZWRcbiAgICogaWYgbm90IHNwZWNpZmllZCBpdCB3aWxsIGNoZWNrIHdoZXRoZXIgYW4gZWxlbWVudFxuICAgKiBjYW4gYmUgaW5zZXJ0ZWQgYXMgaXQgYXNzdW1lcyBpdCdzIGFib3V0IHRoZSBpbnNlcnRpb25cbiAgICogb2YgdGhlIGVsZW1lbnRcbiAgICovXG4gIGRpc2FibGVkPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogd2hldGhlciBpdCBzaG91bGQgYmUgbWFya2VkIGFzIHNlbGVjdGVkXG4gICAqL1xuICBzZWxlY3RlZD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEEgZ2l2ZW4gY291bnQgZm9yIHRoZSBidXR0b25cbiAgICovXG4gIGNvdW50PzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBBZGRzIGEgY3VzdG9tIGNoaWxkcmVuIGF0IHRoZSBlbmQgb2YgdGhlIHRvb2xiYXJcbiAgICovXG4gIGN1c3RvbUNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogQXJiaXRyYXJ5IHByb3BzIHBhc3NlZCB0byB0aGUgVG9vbGJhckJ1dHRvbiBlbGVtZW50XG4gICAqIHVzZSBpZiB5b3VyIHRvb2xiYXIgaXMgYWJsZSB0byBjb25zdW1lIGZ1cnRoZXIgcHJvcHNcbiAgICovXG4gIHRvb2xiYXJCdXR0b25Qcm9wczogYW55O1xufVxuXG4vKipcbiAqIFNwZWNpZmllcyBhIGlucHV0IGNvbmZpZ3VyYXRpb24gZm9yIHRoZSB1aSBoYW5kbGVyIGFyZ3VtZW50XG4gKiBvZiB0eXBlIHNlbGVjdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3ZXJVSUhhbmRsZXJFbGVtZW50Q29uZmlnU2VsZWN0IHtcbiAgdHlwZTogXCJzZWxlY3RcIixcbiAgbGFiZWw6IHN0cmluZyB8IFJlYWN0LlJlYWN0Tm9kZTtcbiAgZmFzdEtleT86IHN0cmluZztcblxuICAvKipcbiAgICogQSBwbGFjZWhvbGRlciB0byB1c2VcbiAgICogaWYgYSByZWFjdCBub2RlIGlzIHByb3ZpZGVkIHRoaXMgbm9kZSB3aWxsIGJlIG1vZGlmaWVkXG4gICAqIGFuZCBhZGRlZCBhIGNoaWxkcmVuIGFzIChpMThuVmFsdWU6IHN0cmluZykgPT4gUmVhY3QuTm9kZVxuICAgKiBlZy4gdGhlIGkxOG5SZWFkIGVsZW1lbnRcbiAgICovXG4gIHBsYWNlaG9sZGVyOiBzdHJpbmcgfCBSZWFjdC5SZWFjdE5vZGU7XG4gIG9wdGlvbnM6IEFycmF5PHsgdmFsdWU6IHN0cmluZywgbGFiZWw6IHN0cmluZyB8IFJlYWN0LlJlYWN0Tm9kZSB9Pjtcbn1cblxuLyoqXG4gKiBTcGVjaWZpZXMgYW4gaW5wdXQgY29uZmlndXJhdGlvbiBmb3IgdGhlIHVpIGhhbmRsZXIgYXJndW1lbnRcbiAqIG9mIHR5cGUgaW5wdXRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRHJhd2VyVUlIYW5kbGVyRWxlbWVudENvbmZpZ0lucHV0IHtcbiAgdHlwZTogXCJpbnB1dFwiO1xuICBsYWJlbDogc3RyaW5nIHwgUmVhY3QuUmVhY3ROb2RlO1xuICBwYXR0ZXJuPzogc3RyaW5nO1xuICBzdWJ0eXBlPzogXCJ0ZXh0XCIgfCBcIm51bWJlclwiO1xuICBmYXN0S2V5Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIHBsYWNlaG9sZGVyIHRvIHVzZVxuICAgKiBpZiBhIHJlYWN0IG5vZGUgaXMgcHJvdmlkZWQgdGhpcyBub2RlIHdpbGwgYmUgbW9kaWZpZWRcbiAgICogYW5kIGFkZGVkIGEgY2hpbGRyZW4gYXMgKGkxOG5WYWx1ZTogc3RyaW5nKSA9PiBSZWFjdC5Ob2RlXG4gICAqIGVnLiB0aGUgaTE4blJlYWQgZWxlbWVudFxuICAgKi9cbiAgcGxhY2Vob2xkZXI6IHN0cmluZyB8IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuLyoqXG4gKiBTcGVjaWZpZXMgYSBpbnB1dCBjb25maWd1cmF0aW9uIGZvciB0aGUgdWkgaGFuZGxlciBhcmd1bWVudFxuICogb2YgdHlwZSBib29sZWFuLCBiZWNhdXNlIGFsbCB1aSBoYW5kbGVycyBhcmUgc3RyaW5nc1xuICogdGhpcyB1c2VzIHRoZSBzdHJpbmcgdHJ1ZSBvciBmYWxzZSByYXRoZXIgdGhhbiBhY3R1YWxcbiAqIGJvb2xlYW5zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlclVJSGFuZGxlckVsZW1lbnRDb25maWdCb29sZWFuIHtcbiAgdHlwZTogXCJib29sZWFuXCIsXG4gIGxhYmVsOiBzdHJpbmcgfCBSZWFjdC5SZWFjdE5vZGU7XG4gIGZhc3RLZXk/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlclVJSGFuZGxlckVsZW1lbnRDb25maWdDdXN0b21Qcm9wcyB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgb25EZWxheWVkQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgaGVscGVyczogSUhlbHBlckZ1bmN0aW9ucztcbiAgc3RhdGU6IElTbGF0ZUVkaXRvckludGVybmFsU3RhdGVUeXBlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3ZXJVSUhhbmRsZXJFbGVtZW50Q29uZmlnQ3VzdG9tIHtcbiAgdHlwZTogXCJjdXN0b21cIjtcbiAgY29tcG9uZW50OiBSZWFjdC5Db21wb25lbnRUeXBlPElEcmF3ZXJVSUhhbmRsZXJFbGVtZW50Q29uZmlnQ3VzdG9tUHJvcHM+O1xufVxuXG4vKipcbiAqIFNwZWNpZmllcyBhIGNvbmZpZ3VyYXRvciB0byBiZSBhZGRlZCB0byB0aGUgZHJhd2VyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlckNvbmZpZ3VyYXRvckVsZW1lbnQge1xuICBrZXk/OiBzdHJpbmcgfCBudW1iZXI7XG4gIENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJhd2VyQ29udGFpbmVyUHJvcHM+O1xufVxuXG5leHBvcnQgdHlwZSBTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFySWRlbnRpZmllZEVsZW1lbnQgPVxuICBcImJvbGRcIiB8XG4gIFwiaXRhbGljXCIgfFxuICBcInVuZGVybGluZVwiIHxcbiAgXCJsaW5rXCIgfFxuICBcInRpdGxlXCIgfFxuICBcImJ1bGxldGVkLWxpc3RcIiB8XG4gIFwibnVtYmVyZWQtbGlzdFwiIHxcbiAgXCJpbWFnZVwiIHxcbiAgXCJ2aWRlb1wiIHxcbiAgXCJmaWxlXCIgfFxuICBcInF1b3RlXCIgfFxuICBcImNvbnRhaW5lclwiIHxcbiAgXCJ0YWJsZVwiIHxcbiAgXCJ0ZW1wbGF0ZS10ZXh0XCIgfFxuICBcInRlbXBsYXRlLWh0bWxcIiB8XG4gIFwiZXh0cmFzXCIgfFxuICBcIm5vbmVcIiB8XG4gIFwiZGl2aWRlclwiIHxcbiAgXCJoZGl2aWRlclwiO1xuXG5leHBvcnQgdHlwZSBTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFyRWxlbWVudEJhc2VGb3JtID1cbiAgSVRvb2xiYXJQcmVzY2Vuc2VFbGVtZW50IHxcbiAgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhcklkZW50aWZpZWRFbGVtZW50O1xuXG5leHBvcnQgdHlwZSBTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFyRWxlbWVudEZuRm9ybSA9ICh0b29sYmFyUHJvcHM6IGFueSkgPT5cbiAgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhckVsZW1lbnRCYXNlRm9ybTtcblxuZXhwb3J0IHR5cGUgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhckVsZW1lbnQgPVxuICBTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFyRWxlbWVudEJhc2VGb3JtIHxcbiAgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhckVsZW1lbnRGbkZvcm07XG5cbi8qKlxuICogVGhlc2UgYXJlIHRoZSBiYXNlIHByb3BzIHRoYXQgdGhpcyB3cmFwcGVyIHVzZXMsIG5vdGUgaG93IHdlIGV4dGVuZCB0aGUgYmFzZSB3cmFwcGVyIHByb3BzIGFzIGRlZmluZWRcbiAqIGluIHRoZSBzbGF0ZSBlZGl0b3IgaXRzZWxmLCBhbmQgYWRkIHRoZSBzdHlsZXMgZm9yIHRoZSBjbGFzc2VzIGFuZCB0aGVzZSBpMThuIGluZm9cbiAqIFxuICogSWYgeW91IHdvbmRlciBob3cgdGhlIGkxOG4gaW5mb3JtYXRpb24gaXMgdG8gYmUgYWRkZWQsIGluIHRoZSBQcm9wZXJ0eUVudHJ5VGV4dCB3aGVuIGNyZWF0aW5nXG4gKiB0aGUgc2xhdGUgZWRpdG9yIGFzIGEgY29tcG9uZW50IHRoZSB3cmFwcGVyIGNhbiByZWNlaXZlIHdyYXBwZXJBcmdzIHNvIHRoZXNlIGFyZ3MgYXJlIHBhc3NlZFxuICogd2hlbiB0aGUgZWRpdG9yIGlzIGNyZWF0ZWQgd2l0aCB0aGUgd3JhcHBlciBpdHNlbGZcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRGVmYXVsdFNsYXRlV3JhcHBlclByb3BzIGV4dGVuZHMgSVNsYXRlRWRpdG9yV3JhcHBlckJhc2VQcm9wcyB7XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBzcGVjaWZpZWQgdG8gYXNzaWduIGV4dHJhIHRvb2xiYXIgZWxlbWVudHNcbiAgICogdG8gYmUgdXNlZCBlaXRoZXIgYnkgdWkgaGFuZGxlZCBjb21wb25lbnRzIGFuZCB3aGF0bm90XG4gICAqL1xuICB0b29sYmFyRXh0cmFzPzogSVRvb2xiYXJQcmVzY2Vuc2VFbGVtZW50W107XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBiZSB1c2VkIHRvIHNwZWNpZnkgYSB3aG9sZSBjdXN0b20gdG9vbGJhciBkb3duIHRvIHRoZSB2ZXJ5IGJhc2ljc1xuICAgKi9cbiAgY3VzdG9tVG9vbGJhcj86IFNsYXRlRWRpdG9yV3JhcHBlckN1c3RvbVRvb2xiYXJFbGVtZW50W107XG4gIC8qKlxuICAgKiBEcmF3ZXIgZXh0cmFzIGZvciB0aGUgdWkgaGFuZGxlZCB0eXBlc1xuICAgKi9cbiAgZHJhd2VyRXh0cmFzPzogSURyYXdlckNvbmZpZ3VyYXRvckVsZW1lbnRbXTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaGlkZSB0aGUgZHJhd2VyXG4gICAqL1xuICBoaWRlRHJhd2VyPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSBkaXNqb2ludGVkIG1vZGVcbiAgICovXG4gIGRpc2pvaW50ZWRNb2RlPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSB0b29sYmFyIGlzIHJldGFpbmVkIGV2ZW4gaWYgdGhlIHRleHQgaXNuJ3QgZm9jdXNlZFxuICAgKi9cbiAgZGlzam9pbnRlZE1vZGVLZWVwVG9vbGJhcj86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBBZGQgYSBjbGFzcyBuYW1lIHRvIHRoZSB0b29sYmFyIGluIHRoZSB3cmFwcGVyXG4gICAqL1xuICB0b29sYmFyQ2xhc3NOYW1lPzogc3RyaW5nO1xuICAvKipcbiAgICogQSBmdW5jdGlvbiB0byBkZWZpbmUgY3VzdG9tIGV4dHJhIGNoaWxkcmVuXG4gICAqL1xuICBjdXN0b21FeHRyYUNoaWxkcmVuPzogKGNoYXJhY3RlckNvdW50OiBudW1iZXIsIHdvcmRDb3VudDogbnVtYmVyKSA9PiBSZWFjdC5SZWFjdE5vZGU7XG5cbiAgLyoqXG4gICAqIEN1c3RvbWl6YXRpb24gZm9yIHRoZSBkcmF3ZXJcbiAgICogdGhlIGNvbnRhaW5lciBib3ggdGhhdCB3cmFwcyB0aGUgZW50aXJlIGRyYXdlclxuICAgKi9cbiAgRHJhd2VyQ29udGFpbmVyQm94PzogRHJhd2VyQ29udGFpbmVyQm94Q29tcG9uZW50O1xuXG4gIC8qKlxuICAgKiBDdXN0b21pemF0aW9uIGZvciB0aGUgZHJhd2VyXG4gICAqIHRoZSBzcGFjZXIgdGhhdCBpcyBhZGRlZCBvbiBkaXNqb2ludGVkIG1vZGUgb25seVxuICAgKi9cbiAgRHJhd2VyU3BhY2VyPzogRHJhd2VyU3BhY2VyQ29tcG9uZW50O1xuXG4gIC8qKlxuICAgKiBDdXN0b21pemF0aW9uIGZvciB0aGUgXG4gICAqL1xuICBEcmF3ZXJUZW1wbGF0aW5nQ29udGFpbmVyQm94PzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJhd2VyVGVtcGxhdGluZ0NvbnRhaW5lckJveFByb3BzPjtcblxuICAvKipcbiAgICogQ3VzdG9taXphdGlvbiBmb3IgdGhlIGRyYXdlclxuICAgKiB0aGUgYm9keSBvYmplY3QgY29udGFpbm1lbnQgaXRzZWxmXG4gICAqL1xuICBEcmF3ZXJCb2R5PzogRHJhd2VyQm9keUNvbXBvbmVudDtcblxuICAvKipcbiAgICogQ3VzdG9taXphdGlvbiBmb3IgdGhlIGJ1dHRvbiB3cmFwcGVyIHRoYXQgaXMgdXNlZFxuICAgKiBpbiB0aGUgdG9vbGJhclxuICAgKi9cbiAgVG9vbGJhckJ1dHRvbj86IFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG5cbiAgLyoqXG4gICAqIFRoZSBidXR0b24gdXNlZCB0byB0b2dnbGUgdGhlIGRyYXdlciBmcm9tIHRoZSB0b29sYmFyXG4gICAqL1xuICBUb29sYmFyRHJhd2VyQnV0dG9uPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJVG9vbGJhckRyYXdlckJ1dHRvblByb3BzPjtcblxuICAvKipcbiAgICogVXNlZCBmb3Igc2VwYXJhdGlvbiBpbiB0aGUgdG9vbGJhciAoaG9yaXpvbnRhbClcbiAgICovXG4gIFRvb2xiYXJIRGl2aWRlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8e30+O1xuXG4gIC8qKlxuICAgKiBVc2VkIGZvciBzZXBhcmF0aW9uIGluIHRoZSB0b29sYmFyICh2ZXJ0aWNhbClcbiAgICovXG4gIFRvb2xiYXJWRGl2aWRlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8e30+O1xuXG4gIC8qKlxuICAgKiBVc2VkIGZvciB0aGUgdG9vbGJhciBpdHNlbGZcbiAgICogdGhlIHRvb2xiYXIgc2hvdWxkIGFsc28gc3VwcG9ydCBhIHJlZlxuICAgKiBhcyBpdCdzIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBoZWlnaHQgb2YgdGhlIHRvb2xiYXJcbiAgICovXG4gIFRvb2xiYXI/OiBSZWFjdC5Db21wb25lbnRUeXBlPElUb29sYmFyUHJvcHM+O1xuXG4gIC8qKlxuICAgKiBXaGVuIHVzZWQgZGlzam9pbnRlZCBtb2RlIGEgY29udGFpbmVyIGlzIGdpdmVuIHRvIHRoZSBlZGl0b3JcbiAgICogdG8gd3JhcCBpdCB1c2UgdGhpcyB0byBzcGVjaWZ5IGl0LCByZW1lbWJlciB0byBhbGxvdyBpdCB0byBwYXNzXG4gICAqIGEgcmVmIGFzIGl0J3MgcmVxdWlyZWQgZm9yIHRoaXMgY29tcG9uZW50XG4gICAqL1xuICBEaXNqb2ludGVkRWRpdG9yQ29udGFpbmVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRWRpdG9yQ29udGFpbmVyUHJvcHM+O1xuICAvKipcbiAgICogVGhlIGRpc2pvaW50ZWQgZWRpdG9yIGl0c2VsZlxuICAgKi9cbiAgRGlzam9pbnRlZEVkaXRvcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUVkaXRvclByb3BzPjtcbiAgLyoqXG4gICAqIFRoZSBlZGl0b3IgaXRzZWxmLCBub3QgdXNlZCBpbiBkaXNqb2ludGVkIG1vZGVcbiAgICogdGhlIERpc2pvaW50ZWRFZGl0b3IgaXMgdXNlZCBpbnN0ZWFkXG4gICAqIGEgcmVmIGlzIHJlcXVpcmVkIGZvciB0aGlzIGNvbXBvbmVudCB0byBiZSBzdXBwb3J0ZWRcbiAgICovXG4gIEVkaXRvcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUVkaXRvclByb3BzPjtcbiAgLyoqXG4gICAqIFdoZW4gdXNpbmcgdGhlIHN0YW5kYXJkIG1vZGUsIGl0IGNvbnRhaW5zXG4gICAqIHRoZSBlZGl0b3IgaXRzZWxmXG4gICAqL1xuICBFZGl0b3JDb250YWluZXI/OiBSZWFjdC5Db21wb25lbnRUeXBlPElFZGl0b3JDb250YWluZXJQcm9wcz47XG5cbiAgLyoqXG4gICAqIEEgd3JhcHBlciBmb3IgdGhlIHRvb2xiYXIgY29tcG9uZW50XG4gICAqL1xuICBUb29sYmFyV3JhcHBlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUVkaXRvcldyYXBwZXJQcm9wcz47XG5cbiAgLyoqXG4gICAqIEEgd3JhcHBlciBmb3IgZXZlcnl0aGluZ1xuICAgKi9cbiAgRmluYWxXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRWRpdG9yV3JhcHBlclByb3BzPjtcblxuICAvKipcbiAgICogQSB3cmFwcGVyIGZvciB0aGUgZWRpdGluZyByZWdpb25cbiAgICovXG4gIEJhc2VXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRWRpdG9yV3JhcHBlclByb3BzPjtcblxuICAvKipcbiAgICogQSB3cmFwcGVyIGZvciB0aGUgZHJhd2VyXG4gICAqL1xuICBEcmF3ZXJXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRWRpdG9yV3JhcHBlclByb3BzPjtcblxuICAvKipcbiAgICogVXNlZCBmb3IgZGlzcGxheWluZyBkaWFsb2dzIHdpdGggZXJyb3JzXG4gICAqL1xuICBEaWFsb2c/OiBSZWFjdC5Db21wb25lbnRUeXBlPElEaWFsb2dDb21wb25lbnRQcm9wcz47XG5cbiAgLyoqXG4gICAqIFVzZWQgZm9yIGdlbmVyYXRpbmcgdGhlIHRpdGxlIGFuZCBoaXJlYXJjaHkgb2YgZWFjaCBlbGVtZW50IGluIHRoZSBkcmF3ZXJcbiAgICovXG4gIFdyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGU/OiBSZWFjdC5Db21wb25lbnRUeXBlPElXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlUHJvcHM+O1xuXG4gIC8qKlxuICAgKiBVc2VkIGZvciB3cmFwcGluZyBhbGwgdGhlIHRpdGxlcyBnZW5lcmF0ZWRcbiAgICovXG4gIFdyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTx7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfT47XG5cbiAgLyoqXG4gICAqIFdyYXBzIHRoZSBpbmZvcm1hdGlvbiBwYW5lbCBmcm9tIHRoZSBkcmF3ZXIsIHdoYXRldmVyIGlzIHZpc2libGVcbiAgICovXG4gIFdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJV3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXJQcm9wcz47XG5cbiAgLyoqXG4gICAqIFVzZWQgZm9yIHRoZSB0YWJzIHN3aXRjaGVyIGNvbXBvbmVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIGRyYXdlclxuICAgKi9cbiAgV3JhcHBlckRyYXdlclRhYnM/OiBSZWFjdC5Db21wb25lbnRUeXBlPElXcmFwcGVyRHJhd2VyVGFic1Byb3BzPjtcblxuICAvKipcbiAgICogVXNlZCB0byB3cmFwIHRoZSBpbnRlcm5hbCBwYW5lbFxuICAgKi9cbiAgV3JhcHBlckRyYXdlckludGVybmFsUGFuZWxXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTx7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfT47XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gbWFrZSB0ZXh0IGlucHV0IGZpZWxkc1xuICAgKi9cbiAgV3JhcHBlckRyYXdlclRleHRGaWVsZD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJUZXh0RmllbGRQcm9wcz47XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gbWFrZSBjaGVja2JveCBpbnB1dCBmaWVsZHNcbiAgICovXG4gIFdyYXBwZXJEcmF3ZXJDaGVja2JveEZpZWxkPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJV3JhcHBlckRyYXdlckNoZWNrQm94UHJvcHM+O1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIG1ha2Ugc2VsZWN0IGlucHV0IGZpZWxkc1xuICAgKi9cbiAgV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkUHJvcHM+O1xuXG4gIC8qKlxuICogVXNlZCB0byBtYWtlIHNlbGVjdCBpbnB1dCBmaWVsZHNcbiAqL1xuICBXcmFwcGVyRHJhd2VyTXVsdGlTZWxlY3RGaWVsZD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJNdWx0aVNlbGVjdEZpZWxkUHJvcHM+O1xuXG4gIC8qKlxuICAgKiBhZGQgZXh0cmEgY2hpbGRyZW4gdG8gdGhlIGRyYXdlclxuICAgKi9cbiAgZHJhd2VyRXh0cmFDaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuZnVuY3Rpb24gRGVmYXVsdEVkaXRvckNvbnRhaW5lcihwcm9wczogSUVkaXRvckNvbnRhaW5lclByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckRlZmF1bHRFZGl0b3JDb250YWluZXJcIj5cbiAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRHJhd2VyVGVtcGxhdGluZ0NvbnRhaW5lckJveFByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuLyoqXG4gKiBBbiB1dGlsaXR5IHRvIGRlZmluZSBhIHNpbmdsZSB0ZW1wbGF0aW5nIG9wdGlvblxuICogZm9yIHVzYWdlIGluIGEgc2VsZWN0IGZpZWxkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVNpbmdsZVRlbXBsYXRpbmdFbGVtZW50T3B0aW9uIHtcbiAgdmFsdWU6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRWRpdG9yV3JhcHBlclByb3BzIGV4dGVuZHMgSURlZmF1bHRTbGF0ZVdyYXBwZXJQcm9wcyB7XG4gIGRyYXdlck9wZW46IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUVkaXRvckNvbnRhaW5lclByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRWRpdG9yUHJvcHMge1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICBjbGFzc05hbWU6IHN0cmluZztcbn1cblxuXG5leHBvcnQgaW50ZXJmYWNlIElUb29sYmFyUHJvcHMge1xuICAvKipcbiAgICogdG9vbGJhciBjb250ZW50cyB3aXRoIGFsbCB0aGUgYnV0dG9ucyBhbmQgc2VwYXJhdG9yc1xuICAgKiBhcyBkZXRlcm1pbmVkXG4gICAqL1xuICB0b29sYmFyQ29udGVudHM6IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIEN1c3RvbSBjaGlsZHJlbiBmb3IgdGhlIHRvb2xiYXIgdGhhdCBhcmUgYWRkZWRcbiAgICogYnkgdGhlIGFjdGl2ZSB0b29sYmFyIGVsZW1lbnRzXG4gICAqL1xuICBjdXN0b21DaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogU2luZ2xlIGRyYXdlciBidXR0b24gdG8gb3BlbiBhbmQgY2xvc2UgdGhlIGRyYXdlclxuICAgKi9cbiAgZHJhd2VyQnV0dG9uOiBSZWFjdC5SZWFjdE5vZGU7XG4gIC8qKlxuICAgKiBUaGVzZSBwcm9wcyBzaG91bGQgYmUgYXBwbGllZCB0byB0aGUgdG9wIG9mIHRoZSB0b29sYmFyXG4gICAqL1xuICBwcm9wczogYW55O1xuICAvKipcbiAgICogV2hldGhlciB3b3JraW5nIGluIGRpc2pvaW50ZWQgbW9kZVxuICAgKi9cbiAgZGlzam9pbnRlZE1vZGU6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBkcmF3ZXIgaXMgb3BlblxuICAgKi9cbiAgZHJhd2VyT3BlbjogYm9vbGVhbjtcbn1cblxuY29uc3QgRGVmYXVsdFRvb2xiYXIgPSBSZWFjdC5mb3J3YXJkUmVmKChwcm9wczogSVRvb2xiYXJQcm9wcywgcmVmOiBSZWFjdC5Gb3J3YXJkZWRSZWY8SFRNTEVsZW1lbnQ+KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvclRvb2xiYXJcIiB7Li4ucHJvcHMucHJvcHN9IHJlZj17cmVmfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JUb29sYmFySW50ZXJuYWxcIj5cbiAgICAgICAge3Byb3BzLnRvb2xiYXJDb250ZW50c31cbiAgICAgICAge3Byb3BzLmN1c3RvbUNoaWxkcmVufVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yVG9vbGJhckludGVybmFsU3BhY2VyXCIgLz5cbiAgICAgICAge3Byb3BzLmRyYXdlckJ1dHRvbn1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59KTtcblxuLyoqXG4gKiBUaGVzZSBhcmUgdGhlIHJpY2ggdGV4dCBlZGl0b3IgdG9vbGJhciBwcm9wZXJ0aWVzIHRoZXkgYmFzaWNhbGx5IHRha2UgdGhlIHNhbWVcbiAqIHRoYXQgdGhlIGVudGlyZSB3cmFwcGVyIGRvZXMsIGJ1dCBhZGRpbmcgdGhlc2UgZnVuY3Rpb25zIGFuZCBmbGFncyB0YWtlbiBmcm9tXG4gKiB0aGUgc3RhdGUgb2YgdGhlIHdyYXBwZXIgb3Igb3RoZXIgZnVuY3Rpb25zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmljaFRleHRFZGl0b3JUb29sYmFyUHJvcHMgZXh0ZW5kcyBJRGVmYXVsdFNsYXRlV3JhcHBlclByb3BzIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGRyYXdlciBpcyBvcGVuLCB0aGUgZHJhd2VyIGlzIHRoZSBzaWRlIGRyYXdlciB0aGF0IGNvbnRhaW5zXG4gICAqIGEgbG90IG9mIGZ1bmN0aW9uYWxpdHkgdG8gZWRpdCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGVsZW1lbnRcbiAgICovXG4gIGRyYXdlck9wZW46IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHN0YXRlXG4gICAqL1xuICBzdGF0ZTogSVNsYXRlRWRpdG9ySW50ZXJuYWxTdGF0ZVR5cGU7XG5cbiAgLyoqXG4gICAqIEEgY3VzdG9tIHRvb2xiYXIgc3RhdGVcbiAgICovXG4gIHRvb2xiYXJTdGF0ZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgdG9vbGJhciBoZWlnaHRcbiAgICovXG4gIHRvb2xiYXJIZWlnaHQ6IG51bWJlcjtcblxuICAvKipcbiAgICogY2FsbCB0byByZXF1ZXN0IGFuIGltYWdlLCBvcGVucyBhIGRpYWxvZyBzbyByZXF1aXJlcyBhIHN0YXRlXG4gICAqL1xuICByZXF1ZXN0SW1hZ2U6ICgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIENhbGwgdG8gcmVxdWVzdCBhIGZpbGUsIG9wZW5zIGEgZGlhbG9nIHNvIHJlcXVpcmVzIGEgc3RhdGVcbiAgICovXG4gIHJlcXVlc3RGaWxlOiAoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBzZXRzIHRoZSB0b29sYmFyIHN0YXRlXG4gICAqL1xuICBzZXRUb29sYmFyU3RhdGU6IChzdGF0ZTogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogQSBmdW5jdGlvbiB0aGF0IHNwZWNpZmllcyB3aGV0aGVyIHRoZSBkcmF3ZXIgc2hvdWxkXG4gICAqIGV4aXN0XG4gICAqIEByZXR1cm5zIGEgYm9vbGVhbiBhcyB0aGUgYW5zd2VyXG4gICAqL1xuICBzaG91bGRIYXZlRHJhd2VyOiAoKSA9PiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUb2dnbGUgdGhlIGRyYXdlciBvcGVuIG9yIGNsb3NlXG4gICAqL1xuICB0b2dnbGVEcmF3ZXI6ICgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoZSBoZWlnaHQgY2hhbmdlc1xuICAgKi9cbiAgb25IZWlnaHRDaGFuZ2U6IChuZXdIZWlnaHQ6IG51bWJlcikgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIFJpY2hUZXh0RWRpdG9yVG9vbGJhclN0YXRlIHtcbiAgaXNSZWFkeTogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcyBleHRlbmRzIFJpY2hUZXh0RWRpdG9yVG9vbGJhclN0YXRlLCBSaWNoVGV4dEVkaXRvclRvb2xiYXJQcm9wcyB7XG59XG5cbi8vIGZ1bmN0aW9uIGVsZW1lbnRGYXN0S2V5UmV0dXJuKFxuLy8gICBwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzLFxuLy8gICBlbGVtZW50OiBSZWFjdC5SZWFjdE5vZGUsXG4vLyAgIGFsdEJhZGdlZENoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUsXG4vLyAgIHByaW9yaXR5OiBudW1iZXIsXG4vLyAgIGRpc2FibGVkOiBib29sZWFuLFxuLy8gICB1c2VTdHlsZVRyYW5zZm9ybT86IGJvb2xlYW4sXG4vLyAgIHVzZVRyaWdnZXJBbHRBZnRlckFjdGlvbj86IGJvb2xlYW4sXG4vLyAgIGZhc3RLZXlPdmVycmlkZT86IHN0cmluZyxcbi8vICk6IGFueSB7XG4vLyAgIGNvbnN0IGZhc3RLZXkgPSBmYXN0S2V5T3ZlcnJpZGUgfHwgcHJvcHMuZmFzdEtleTtcblxuLy8gICBpZiAoIWZhc3RLZXkpIHtcbi8vICAgICByZXR1cm4gZWxlbWVudDtcbi8vICAgfVxuXG4vLyAgIHJldHVybiAoXG4vLyAgICAgPEFsdEJhZGdlUmVhY3Rpb25lclxuLy8gICAgICAgcmVhY3Rpb25LZXk9e2Zhc3RLZXl9XG4vLyAgICAgICBwcmlvcml0eT17cHJpb3JpdHl9XG4vLyAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWQgfHwgIXByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnR9XG4vLyAgICAgICBhbHRCYWRnZWRDaGlsZHJlbj17YWx0QmFkZ2VkQ2hpbGRyZW59XG4vLyAgICAgICBsYWJlbD17ZmFzdEtleSA9PT0gXCJlc2NhcGVcIiA/IFwiZXNjXCIgOiBudWxsfVxuLy8gICAgICAgdGFiYmFibGU9e2Zhc3RLZXkgIT09IFwiZXNjYXBlXCJ9XG4vLyAgICAgICB1c2VUcmFuc2Zvcm09e3VzZVN0eWxlVHJhbnNmb3JtID8gXCJjbG9zZVwiIDogbnVsbH1cbi8vICAgICAgIHRyaWdnZXJBbHRBZnRlckFjdGlvbj17dXNlVHJpZ2dlckFsdEFmdGVyQWN0aW9ufVxuLy8gICAgICAgc2VsZWN0b3I9XCJidXR0b25cIlxuLy8gICAgICAgb25UYWJPdXRUcmlnZ2VyPVwiZXNjYXBlXCJcbi8vICAgICA+XG4vLyAgICAgICB7ZWxlbWVudH1cbi8vICAgICA8L0FsdEJhZGdlUmVhY3Rpb25lcj5cbi8vICAgKTtcbi8vIH1cblxuZXhwb3J0IGludGVyZmFjZSBJVG9vbGJhckJ1dHRvblByb3BzIHtcbiAgdGl0bGU6IHN0cmluZztcbiAgdHlwZTogU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhcklkZW50aWZpZWRFbGVtZW50IHwgXCJleHRyYVwiO1xuICBleHRyYUlkPzogc3RyaW5nO1xuICBzZWxlY3RlZDogYm9vbGVhbjtcbiAgZGlzYWJsZWQ6IGJvb2xlYW47XG4gIGh0bWxFbnRpdHk6IHN0cmluZztcbiAgb25DbGljazogKCkgPT4gdm9pZDtcbiAgY291bnQ/OiBudW1iZXI7XG4gIGRpc2pvaW50ZWRNb2RlOiBib29sZWFuO1xufVxuXG50eXBlIFRvb2xiYXJCdXR0b25Db21wb25lbnQgPSBSZWFjdC5Db21wb25lbnRUeXBlPElUb29sYmFyQnV0dG9uUHJvcHM+O1xuXG5mdW5jdGlvbiBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudChwcm9wczogSVRvb2xiYXJCdXR0b25Qcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxidXR0b25cbiAgICAgIGNsYXNzTmFtZT17XCJzbGF0ZUVkaXRvclRvb2xiYXJCdXR0b24gXCIgKyAocHJvcHMuc2VsZWN0ZWQgPyBcIiBzZWxlY3RlZFwiIDogXCJcIil9XG4gICAgICB0aXRsZT17cHJvcHMudGl0bGV9XG4gICAgICBkaXNhYmxlZD17cHJvcHMuZGlzYWJsZWR9XG4gICAgICBvbkNsaWNrPXtwcm9wcy5vbkNsaWNrfVxuICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiBwcm9wcy5odG1sRW50aXR5ICsgKHR5cGVvZiBwcm9wcy5jb3VudCA9PT0gXCJudW1iZXJcIiA/IChcIiAoXCIgKyBwcm9wcy5jb3VudCArIFwiKVwiKSA6IFwiXCIpIH19XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gQm9sZChwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0IHx8ICFwcm9wcy5zdGF0ZS5hbGxvd3NUZXh0O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0Qm9sZExhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e3Byb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHQgJiYgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dC5ib2xkfVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy5mb3JtYXRUb2dnbGUsIFwiYm9sZFwiKX1cbiAgICAgIGh0bWxFbnRpdHk9XCImI3gxZDQwMTtcIlxuICAgICAgdHlwZT1cImJvbGRcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIEl0YWxpYyhwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0IHx8ICFwcm9wcy5zdGF0ZS5hbGxvd3NUZXh0O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0SXRhbGljTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17cHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dCAmJiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0Lml0YWxpY31cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMuZm9ybWF0VG9nZ2xlLCBcIml0YWxpY1wiKX1cbiAgICAgIGh0bWxFbnRpdHk9XCImI3gxZDQ3MDtcIlxuICAgICAgdHlwZT1cIml0YWxpY1wiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVW5kZXJsaW5lKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHQgfHwgIXByb3BzLnN0YXRlLmFsbG93c1RleHQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRVbmRlcmxpbmVMYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0ICYmIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHQudW5kZXJsaW5lfVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy5mb3JtYXRUb2dnbGUsIFwidW5kZXJsaW5lXCIpfVxuICAgICAgaHRtbEVudGl0eT1cIiYjeDFlNDg7XCJcbiAgICAgIHR5cGU9XCJ1bmRlcmxpbmVcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFZEaXZpZGVyKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKHByb3BzLlRvb2xiYXJWRGl2aWRlcikge1xuICAgIGNvbnN0IFJlYWxEaXZpZGVyID0gcHJvcHMuVG9vbGJhclZEaXZpZGVyO1xuICAgIHJldHVybiAoPFJlYWxEaXZpZGVyIC8+KTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvclZkaXZpZGVyXCIgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gSERpdmlkZXIocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAocHJvcHMuVG9vbGJhckhEaXZpZGVyKSB7XG4gICAgY29uc3QgUmVhbERpdmlkZXIgPSBwcm9wcy5Ub29sYmFySERpdmlkZXI7XG4gICAgcmV0dXJuICg8UmVhbERpdmlkZXIgLz4pO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckhkaXZpZGVyc3BhY2VyXCIgLz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JIZGl2aWRlclwiIC8+XG4gICAgPC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIExpbmsocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzTGlua3MgfHwgIXByb3BzLmlzUmVhZHkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxldCB0ZW1wbGF0ZUxpbmtBbW91bnQgPSAwO1xuXG4gIGlmIChwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmcgJiYgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0KSB7XG4gICAgT2JqZWN0LmtleXMocHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQucHJvcGVydGllc1trZXldO1xuXG4gICAgICAvLyBidXQgdGhleSBtdXN0IGJlIHRoZSBnaXZlbiBlbGVtZW50IHR5cGVcbiAgICAgIGlmIChwcm9wZXJ0eS50eXBlID09PSBcImxpbmtcIikge1xuICAgICAgICB0ZW1wbGF0ZUxpbmtBbW91bnQrKztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChcbiAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmcgJiZcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQgJiZcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQgIT09IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dFxuICApIHtcbiAgICBPYmplY3Qua2V5cyhwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQucHJvcGVydGllcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dC5wcm9wZXJ0aWVzW2tleV07XG4gICAgICBpZiAocHJvcGVydHkubm9uUm9vdEluaGVyaXRhYmxlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gYnV0IHRoZXkgbXVzdCBiZSB0aGUgZ2l2ZW4gZWxlbWVudCB0eXBlXG4gICAgICBpZiAocHJvcGVydHkudHlwZSA9PT0gXCJsaW5rXCIpIHtcbiAgICAgICAgdGVtcGxhdGVMaW5rQW1vdW50Kys7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KHsgdHlwZTogXCJsaW5rXCIsIGhyZWY6IFwiXCIsIGNoaWxkcmVuOiBbXSwgdGhyZWY6IG51bGwgfSk7XG5cbiAgY29uc3Qgc2VsZWN0ZWQgPSBwcm9wcy5oZWxwZXJzLmVkaXRvci5zZWxlY3Rpb24gJiZcbiAgICBwcm9wcy5oZWxwZXJzLlJhbmdlLmlzQ29sbGFwc2VkKHByb3BzLmhlbHBlcnMuZWRpdG9yLnNlbGVjdGlvbikgJiZcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50ICYmXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudC50eXBlID09PSBcImxpbmtcIjtcblxuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcblxuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0TGlua0xhYmVsfVxuICAgICAgc2VsZWN0ZWQ9e3NlbGVjdGVkfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy50b2dnbGVMaW5rLCBudWxsLCBudWxsKX1cbiAgICAgIGNvdW50PXt0ZW1wbGF0ZUxpbmtBbW91bnQgPT09IDAgPyBudWxsIDogdGVtcGxhdGVMaW5rQW1vdW50fVxuICAgICAgaHRtbEVudGl0eT1cIiYjeDFmNTE3O1wiXG4gICAgICB0eXBlPVwibGlua1wiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVGl0bGUocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGl0bGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoeyB0eXBlOiBcInRpdGxlXCIsIHRpdGxlVHlwZTogXCJoMVwiLCBjaGlsZHJlbjogW10gfSwgeyBjb2xsYXBzZWQ6IHRydWUgfSk7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0VGl0bGVMYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQgJiYgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50LnR5cGUgPT09IFwidGl0bGVcIn1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMudG9nZ2xlVGl0bGUsIFwiaDFcIil9XG4gICAgICBodG1sRW50aXR5PVwiJiN4MWQ0MTM7XCJcbiAgICAgIHR5cGU9XCJ0aXRsZVwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gUXVvdGUocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzUXVvdGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoeyB0eXBlOiBcInF1b3RlXCIsIGNoaWxkcmVuOiBbXSB9LCB7IGNvbGxhcHNlZDogdHJ1ZSB9KTtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRRdW90ZUxhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e3Byb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCAmJiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQudHlwZSA9PT0gXCJxdW90ZVwifVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy50b2dnbGVRdW90ZSl9XG4gICAgICBodG1sRW50aXR5PVwiJnF1b3Q7XCJcbiAgICAgIHR5cGU9XCJxdW90ZVwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuXG5mdW5jdGlvbiBOdW1iZXJlZExpc3QocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzTGlzdHMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoeyB0eXBlOiBcImxpc3RcIiwgbGlzdFR5cGU6IFwibnVtYmVyZWRcIiwgY2hpbGRyZW46IFtdIH0pO1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdExpc3ROdW1iZXJlZExhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e2ZhbHNlfVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy5pbnNlcnRMaXN0LCBcIm51bWJlcmVkXCIpfVxuICAgICAgaHRtbEVudGl0eT1cIjEyM1wiXG4gICAgICB0eXBlPVwibnVtYmVyZWQtbGlzdFwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gQnVsbGV0ZWRMaXN0KHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKCFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0xpc3RzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KHsgdHlwZTogXCJsaXN0XCIsIGxpc3RUeXBlOiBcImJ1bGxldGVkXCIsIGNoaWxkcmVuOiBbXSB9KTtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRMaXN0QnVsbGV0ZWRMYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtmYWxzZX1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMuaW5zZXJ0TGlzdCwgXCJidWxsZXRlZFwiKX1cbiAgICAgIGh0bWxFbnRpdHk9XCIuLi5cIlxuICAgICAgdHlwZT1cImJ1bGxldGVkLWxpc3RcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmNvbnN0IGltZ0V4YW1wbGUgPSB7XG4gIHR5cGU6IFwiaW1hZ2VcIiBhcyBcImltYWdlXCIsXG4gIGNoaWxkcmVuOiBbU1RBTkRBUkRfVEVYVF9OT0RFKCldIGFzIGFueSxcbiAgd2lkdGg6IDAsXG4gIGhlaWdodDogMCxcbiAgYWx0OiBcIlwiLFxuICBzcmM6IFwiXCIsXG4gIHNyY1NldDogXCJcIixcbiAgc3JjSWQ6IFwiXCIsXG4gIHN0YW5kYWxvbmU6IGZhbHNlLFxuICBzaXplczogXCJcIixcbn07XG5cbmZ1bmN0aW9uIEltYWdlKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKFxuICAgICFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ltYWdlc1xuICApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoaW1nRXhhbXBsZSwgeyBzZWxlY3RlZDogdHJ1ZSB9KTtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRBZGRJbWFnZUxhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e2ZhbHNlfVxuICAgICAgb25DbGljaz17cHJvcHMucmVxdWVzdEltYWdlfVxuICAgICAgaHRtbEVudGl0eT1cIiYjMTI4MjQ3O1wiXG4gICAgICB0eXBlPVwiaW1hZ2VcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmNvbnN0IHZpZGVvRXhhbXBsZSA9IHtcbiAgdHlwZTogXCJ2aWRlb1wiIGFzIFwidmlkZW9cIixcbiAgb3JpZ2luOiBcInlvdXR1YmVcIiBhcyBcInlvdXR1YmVcIixcbiAgc3JjOiBcIlwiLFxuICBjaGlsZHJlbjogW1NUQU5EQVJEX1RFWFRfTk9ERSgpXSBhcyBhbnksXG59XG5cbmZ1bmN0aW9uIFZpZGVvKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKFxuICAgICFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1ZpZGVvc1xuICApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQodmlkZW9FeGFtcGxlLCB7IHNlbGVjdGVkOiB0cnVlIH0pO1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdEFkZFZpZGVvTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17ZmFsc2V9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLmluc2VydFZpZGVvLCBudWxsKX1cbiAgICAgIGh0bWxFbnRpdHk9XCImIzEyNzkwOTtcIlxuICAgICAgdHlwZT1cInZpZGVvXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5jb25zdCBmaWxlRXhhbXBsZSA9IHtcbiAgdHlwZTogXCJmaWxlXCIgYXMgXCJmaWxlXCIsXG4gIGNoaWxkcmVuOiBbU1RBTkRBUkRfVEVYVF9OT0RFKCldIGFzIGFueSxcbiAgZXh0ZW5zaW9uOiBcIlwiLFxuICBmaWxlTmFtZTogXCJcIixcbiAgc2l6ZTogXCJcIixcbiAgc3JjOiBcIlwiLFxuICBzcmNJZDogXCJcIixcbn07XG5cbmZ1bmN0aW9uIEZpbGUocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoXG4gICAgIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzRmlsZXNcbiAgKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KGZpbGVFeGFtcGxlLCB7IHNlbGVjdGVkOiB0cnVlIH0pO1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdEFkZEZpbGVMYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtmYWxzZX1cbiAgICAgIG9uQ2xpY2s9e3Byb3BzLnJlcXVlc3RGaWxlfVxuICAgICAgaHRtbEVudGl0eT1cIiYjMTI4NDQxO1wiXG4gICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gQ29udGFpbmVyKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKFxuICAgICFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0NvbnRhaW5lcnNcbiAgKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KHsgdHlwZTogXCJjb250YWluZXJcIiwgY29udGFpbmVyVHlwZTogbnVsbCwgY2hpbGRyZW46IFtdIH0pO1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdEFkZENvbnRhaW5lckxhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e2ZhbHNlfVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy5pbnNlcnRDb250YWluZXIsIG51bGwpfVxuICAgICAgaHRtbEVudGl0eT1cIiYjOTk3NDtcIlxuICAgICAgdHlwZT1cImNvbnRhaW5lclwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVGFibGUocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoXG4gICAgIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGFibGVzXG4gICkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudCh7IHR5cGU6IFwidGFibGVcIiwgdGFibGVUeXBlOiBudWxsLCBjaGlsZHJlbjogW10gfSk7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0QWRkVGFibGVMYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtmYWxzZX1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMuaW5zZXJ0VGFibGUsIG51bGwpfVxuICAgICAgaHRtbEVudGl0eT1cIiYjNTc4NTtcIlxuICAgICAgdHlwZT1cInRhYmxlXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBUZW1wbGF0ZVRleHQocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoXG4gICAgIXByb3BzLmlzUmVhZHkgfHxcbiAgICAhcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUZW1wbGF0aW5nXG4gICkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbGV0IHRlbXBsYXRlVGV4dEFtb3VudCA9IDA7XG5cbiAgaWYgKHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dCkge1xuICAgIE9iamVjdC5rZXlzKHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dC5wcm9wZXJ0aWVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0LnByb3BlcnRpZXNba2V5XTtcblxuICAgICAgLy8gYnV0IHRoZXkgbXVzdCBiZSB0aGUgZ2l2ZW4gZWxlbWVudCB0eXBlXG4gICAgICBpZiAocHJvcGVydHkudHlwZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgdGVtcGxhdGVUZXh0QW1vdW50Kys7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAoXG4gICAgcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUZW1wbGF0aW5nICYmXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0ICYmXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0ICE9PSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHRcbiAgKSB7XG4gICAgT2JqZWN0LmtleXMocHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQucHJvcGVydGllc1trZXldO1xuICAgICAgaWYgKHByb3BlcnR5Lm5vblJvb3RJbmhlcml0YWJsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIGJ1dCB0aGV5IG11c3QgYmUgdGhlIGdpdmVuIGVsZW1lbnQgdHlwZVxuICAgICAgaWYgKHByb3BlcnR5LnR5cGUgPT09IFwidGV4dFwiKSB7XG4gICAgICAgIHRlbXBsYXRlVGV4dEFtb3VudCsrO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKHRlbXBsYXRlVGV4dEFtb3VudCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudCh7IHR5cGU6IFwiaW5saW5lXCIsIGNoaWxkcmVuOiBbXSwgdGV4dENvbnRlbnQ6IFwidGV4dFwiIH0pO1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdEFkZFRlbXBsYXRlVGV4dH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtmYWxzZX1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMuaW5zZXJ0VGVtcGxhdGVUZXh0LCBudWxsLCBudWxsKX1cbiAgICAgIGh0bWxFbnRpdHk9XCJ0ZXh0XCJcbiAgICAgIHR5cGU9XCJ0YWJsZVwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgICBjb3VudD17dGVtcGxhdGVUZXh0QW1vdW50fVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFRlbXBsYXRlSFRNTChwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmIChcbiAgICAhcHJvcHMuaXNSZWFkeSB8fFxuICAgICFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmdcbiAgKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZXQgdGVtcGxhdGVIVE1MQW1vdW50ID0gMDtcblxuICBjb25zdCBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudCA9IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyAmJlxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50c1tcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMubGVuZ3RoIC0gMVxuICAgIF07XG5cbiAgaWYgKFxuICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50ICYmXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0XG4gICkge1xuICAgIE9iamVjdC5rZXlzKHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dC5wcm9wZXJ0aWVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0LnByb3BlcnRpZXNba2V5XTtcblxuICAgICAgLy8gYnV0IHRoZXkgbXVzdCBiZSB0aGUgZ2l2ZW4gZWxlbWVudCB0eXBlXG4gICAgICBpZiAocHJvcGVydHkudHlwZSA9PT0gXCJodG1sXCIpIHtcbiAgICAgICAgdGVtcGxhdGVIVE1MQW1vdW50Kys7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAoXG4gICAgcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUZW1wbGF0aW5nICYmXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0ICYmXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0ICE9PSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHRcbiAgKSB7XG4gICAgT2JqZWN0LmtleXMocHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQucHJvcGVydGllc1trZXldO1xuICAgICAgaWYgKHByb3BlcnR5Lm5vblJvb3RJbmhlcml0YWJsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIGJ1dCB0aGV5IG11c3QgYmUgdGhlIGdpdmVuIGVsZW1lbnQgdHlwZVxuICAgICAgaWYgKHByb3BlcnR5LnR5cGUgPT09IFwiaHRtbFwiKSB7XG4gICAgICAgIHRlbXBsYXRlSFRNTEFtb3VudCsrO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKHRlbXBsYXRlSFRNTEFtb3VudCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudCh7IHR5cGU6IFwidm9pZC1ibG9ja1wiLCBjaGlsZHJlbjogW10sIGh0bWw6IFwiaHRtbFwiIH0pO1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdEFkZFRlbXBsYXRlSFRNTH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtmYWxzZX1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMuaW5zZXJ0VGVtcGxhdGVIVE1MLCBudWxsLCBudWxsKX1cbiAgICAgIGh0bWxFbnRpdHk9XCJodG1sXCJcbiAgICAgIHR5cGU9XCJ0YWJsZVwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgICBjb3VudD17dGVtcGxhdGVIVE1MQW1vdW50fVxuICAgIC8+XG4gICk7XG59XG5cbmludGVyZmFjZSBJVG9vbGJhckV4dHJhUHJvcHMgZXh0ZW5kcyBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMge1xuICBleHRyYTogSVRvb2xiYXJQcmVzY2Vuc2VFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBUb29sYmFyRXh0cmEocHJvcHM6IElUb29sYmFyRXh0cmFQcm9wcykge1xuICBjb25zdCBlbGVtZW50UmVmZXJlbmNlID0gdHlwZW9mIHByb3BzLmV4dHJhLmVsZW1lbnQgPT09IFwiZnVuY3Rpb25cIiA/IHByb3BzLmV4dHJhLmVsZW1lbnQoKSA6IHByb3BzLmV4dHJhLmVsZW1lbnQ7XG4gIGNvbnN0IGRlZmF1bHRBY3Rpb24gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgZWxlbWVudCA9IHR5cGVvZiBwcm9wcy5leHRyYS5lbGVtZW50ID09PSBcImZ1bmN0aW9uXCIgPyBwcm9wcy5leHRyYS5lbGVtZW50KCkgOiBwcm9wcy5leHRyYS5lbGVtZW50O1xuICAgIHByb3BzLmhlbHBlcnMuaW5zZXJ0RWxlbWVudChlbGVtZW50KTtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfSwgW3Byb3BzLmV4dHJhLmVsZW1lbnQsIHByb3BzLmhlbHBlcnMuaW5zZXJ0RWxlbWVudF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHByb3BzLmV4dHJhLm9uQW55S2V5RG93bikge1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBwcm9wcy5leHRyYS5vbkFueUtleURvd24pO1xuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHByb3BzLmV4dHJhLm9uQW55S2V5RG93bik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9LCBbcHJvcHMuZXh0cmEub25BbnlLZXlEb3duXSlcblxuICBjb25zdCBvbkNsaWNrID0gdXNlQ2FsbGJhY2soKGU6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKHByb3BzLmV4dHJhLnJlZm9jdXNIYW5kbGVyKSB7XG4gICAgICBwcm9wcy5leHRyYS5yZWZvY3VzSGFuZGxlcihwcm9wcy5oZWxwZXJzLmZvY3VzLCBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvcHMuaGVscGVycy5mb2N1cygpO1xuICAgIH1cbiAgICBwcm9wcy5leHRyYS5vbkNsaWNrID8gcHJvcHMuZXh0cmEub25DbGljayhkZWZhdWx0QWN0aW9uLCBlKSA6IGRlZmF1bHRBY3Rpb24oKTtcbiAgfSwgW10pO1xuXG4gIGxldCBkaXNhYmxlZCA9IGZhbHNlO1xuICBpZiAoZWxlbWVudFJlZmVyZW5jZSkge1xuICAgIGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoZWxlbWVudFJlZmVyZW5jZSk7XG4gIH1cblxuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgaWYgKHR5cGVvZiBwcm9wcy5leHRyYS50aXRsZSA9PT0gXCJzdHJpbmdcIiB8fCAhcHJvcHMuZXh0cmEudGl0bGUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFRvb2xiYXJCdXR0b25cbiAgICAgICAgdGl0bGU9e3Byb3BzLmV4dHJhLnRpdGxlIGFzIHN0cmluZ31cbiAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICBzZWxlY3RlZD17cHJvcHMuZXh0cmEuc2VsZWN0ZWR9XG4gICAgICAgIGNvdW50PXtwcm9wcy5leHRyYS5jb3VudH1cbiAgICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgICAgICBodG1sRW50aXR5PVwiP1wiXG4gICAgICAgIHR5cGU9XCJleHRyYVwiXG4gICAgICAgIGV4dHJhSWQ9e3Byb3BzLmV4dHJhLmlkfVxuICAgICAgICBvbkNsaWNrPXtvbkNsaWNrfVxuICAgICAgICB7Li4ucHJvcHMuZXh0cmEudG9vbGJhckJ1dHRvblByb3BzfVxuICAgICAgLz5cbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGVsZW1lbnQ6IFJlYWN0LlJlYWN0RWxlbWVudCA9IHByb3BzLmV4dHJhLnRpdGxlIGFzIGFueTtcbiAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KGVsZW1lbnQsIHtcbiAgICAgIGNoaWxkcmVuOiAoaTE4blRpdGxlOiBzdHJpbmcpID0+IChcbiAgICAgICAgPFRvb2xiYXJCdXR0b25cbiAgICAgICAgICB0aXRsZT17aTE4blRpdGxlfVxuICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICBzZWxlY3RlZD17cHJvcHMuZXh0cmEuc2VsZWN0ZWR9XG4gICAgICAgICAgY291bnQ9e3Byb3BzLmV4dHJhLmNvdW50fVxuICAgICAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAgICAgICBodG1sRW50aXR5PVwiP1wiXG4gICAgICAgICAgdHlwZT1cImV4dHJhXCJcbiAgICAgICAgICBleHRyYUlkPXtwcm9wcy5leHRyYS5pZH1cbiAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrfVxuICAgICAgICAgIHsuLi5wcm9wcy5leHRyYS50b29sYmFyQnV0dG9uUHJvcHN9XG4gICAgICAgIC8+XG4gICAgICApXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gVG9vbGJhckV4dHJhcyhwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmIChwcm9wcy50b29sYmFyRXh0cmFzICYmIHByb3BzLnRvb2xiYXJFeHRyYXMubGVuZ3RoKSB7XG4gICAgY29uc3QgdG9vbGJhckV4dHJhcyA9IHByb3BzLnRvb2xiYXJFeHRyYXMubWFwKCh4LCBpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFRvb2xiYXJFeHRyYSB7Li4ucHJvcHN9IGV4dHJhPXt4fSBrZXk9e2luZGV4fSAvPlxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGN1c3RvbXMgPSBwcm9wcy50b29sYmFyRXh0cmFzLm1hcCgoeCwgaSkgPT4gKFxuICAgICAgeC5jdXN0b21DaGlsZHJlbiA/IDxSZWFjdC5GcmFnbWVudCBrZXk9e2l9Pnt4LmN1c3RvbUNoaWxkcmVufTwvUmVhY3QuRnJhZ21lbnQ+IDogbnVsbFxuICAgICkpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDw+XG4gICAgICAgIHt0b29sYmFyRXh0cmFzfVxuICAgICAgICB7Y3VzdG9tc31cbiAgICAgIDwvPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gTm9uZSgpOiBhbnkge1xuICByZXR1cm4gbnVsbDtcbn1cblxuY29uc3QgdG9vbGJhclJlZ2lzdHJ5OiBSZWNvcmQ8U2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhcklkZW50aWZpZWRFbGVtZW50LCBSZWFjdC5FbGVtZW50VHlwZTxSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHM+PiA9IHtcbiAgbm9uZTogTm9uZSxcbiAgaXRhbGljOiBJdGFsaWMsXG4gIGJvbGQ6IEJvbGQsXG4gIHVuZGVybGluZTogVW5kZXJsaW5lLFxuICBcImJ1bGxldGVkLWxpc3RcIjogQnVsbGV0ZWRMaXN0LFxuICBcIm51bWJlcmVkLWxpc3RcIjogTnVtYmVyZWRMaXN0LFxuICBcInRlbXBsYXRlLWh0bWxcIjogVGVtcGxhdGVIVE1MLFxuICBcInRlbXBsYXRlLXRleHRcIjogVGVtcGxhdGVUZXh0LFxuICB0aXRsZTogVGl0bGUsXG4gIGNvbnRhaW5lcjogQ29udGFpbmVyLFxuICBkaXZpZGVyOiBWRGl2aWRlcixcbiAgaGRpdmlkZXI6IEhEaXZpZGVyLFxuICBleHRyYXM6IFRvb2xiYXJFeHRyYXMsXG4gIGZpbGU6IEZpbGUsXG4gIGltYWdlOiBJbWFnZSxcbiAgbGluazogTGluayxcbiAgcXVvdGU6IFF1b3RlLFxuICB2aWRlbzogVmlkZW8sXG4gIHRhYmxlOiBUYWJsZSxcbn1cblxuaW50ZXJmYWNlIElUb29sYmFyRHJhd2VyQnV0dG9uUHJvcHMge1xuICBkcmF3ZXJPcGVuOiBib29sZWFuO1xuICB0b2dnbGVEcmF3ZXI6ICgpID0+IHZvaWQ7XG4gIGRpc2pvaW50ZWRNb2RlOiBib29sZWFuO1xufTtcblxuZnVuY3Rpb24gRGVmYXVsdFRvb2xiYXJEcmF3ZXJUb2dnbGVCdXR0b24ocHJvcHM6IElUb29sYmFyRHJhd2VyQnV0dG9uUHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8YnV0dG9uXG4gICAgICBvbkNsaWNrPXtwcm9wcy50b2dnbGVEcmF3ZXJ9XG4gICAgICBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvclRvb2xiYXJCdXR0b25cIlxuICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiBwcm9wcy5kcmF3ZXJPcGVuID8gXCImIzExMDE0O1wiIDogXCImIzExMDE1O1wiIH19XG4gICAgLz5cbiAgKTtcbn1cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBmdW5jdGlvbiBjb21wb25lbnQgdGhhdCByZXByZXNlbnRzIHRoZSB0b29sYmFyIGZvciB0aGUgd3JhcHBlclxuICogQHBhcmFtIHByb3BzIHRoZSBlbnRpcmUgcmljaCB0ZXh0IGVkaXRvciB0b29sYmFyIHByb3BzIHdpdGggYWxsIHRoZSBhZGRlZCBmdW5jdGlvbnNcbiAqL1xuY2xhc3MgUmljaFRleHRFZGl0b3JUb29sYmFyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFJpY2hUZXh0RWRpdG9yVG9vbGJhclByb3BzLCBSaWNoVGV4dEVkaXRvclRvb2xiYXJTdGF0ZT4ge1xuXG4gIHByaXZhdGUgYXBwQmFySGVhZGVyUmVmOiBSZWFjdC5SZWZPYmplY3Q8SFRNTEVsZW1lbnQ+O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICAvLyBpc3N1ZXMgd2l0aCB0aGUgYmFkZ2UgYW5kIFNTUlxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpc1JlYWR5OiBmYWxzZSxcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGlzUmVhZHk6IHRydWUsXG4gICAgfSk7XG5cbiAgICB0aGlzLnByb3BzLm9uSGVpZ2h0Q2hhbmdlKHRoaXMuZ2V0SGVpZ2h0KCkpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMucHJvcHMub25IZWlnaHRDaGFuZ2UodGhpcy5nZXRIZWlnaHQoKSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0SGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLmFwcEJhckhlYWRlclJlZj8uY3VycmVudD8ub2Zmc2V0SGVpZ2h0O1xuICB9XG5cbiAgcHVibGljIGdldEFwcGJhckhlYWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBCYXJIZWFkZXJSZWY/LmN1cnJlbnQ7XG4gIH1cblxuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIC8vIG5vIHJpY2ggdGV4dFxuICAgIGlmICghdGhpcy5wcm9wcy5zdGF0ZS5pc1JpY2hUZXh0KSB7XG4gICAgICAvLyBubyB0b29sYmFyXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZSAmJiAhdGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZUtlZXBUb29sYmFyICYmICF0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHRvb2xiYXJGb3JtOiBTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFyRWxlbWVudFtdID0gKFxuICAgICAgdGhpcy5wcm9wcy5jdXN0b21Ub29sYmFyIHx8IFtcbiAgICAgICAgXCJib2xkXCIsXG4gICAgICAgIFwiaXRhbGljXCIsXG4gICAgICAgIFwidW5kZXJsaW5lXCIsXG4gICAgICAgIChcbiAgICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGl0bGUgfHxcbiAgICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzUXVvdGUgfHxcbiAgICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzTGlua3MgfHxcbiAgICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzTGlzdHNcbiAgICAgICAgKSA/IFwiZGl2aWRlclwiIDogXCJub25lXCIsXG4gICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNMaW5rcyA/IFwibGlua1wiIDogXCJub25lXCIsXG4gICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUaXRsZSA/IFwidGl0bGVcIiA6IFwibm9uZVwiLFxuICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzUXVvdGUgPyBcInF1b3RlXCIgOiBcIm5vbmVcIixcbiAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0xpc3RzID8gXCJidWxsZXRlZC1saXN0XCIgOiBcIm5vbmVcIixcbiAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0xpc3RzID8gXCJudW1iZXJlZC1saXN0XCIgOiBcIm5vbmVcIixcbiAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RhYmxlcyA/IFwidGFibGVcIiA6IFwibm9uZVwiLFxuICAgICAgICAoXG4gICAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ltYWdlcyB8fFxuICAgICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNGaWxlcyB8fFxuICAgICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNWaWRlb3NcbiAgICAgICAgKSA/IFwiZGl2aWRlclwiIDogXCJub25lXCIsXG4gICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNJbWFnZXMgPyBcImltYWdlXCIgOiBcIm5vbmVcIixcbiAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ZpbGVzID8gXCJmaWxlXCIgOiBcIm5vbmVcIixcbiAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1ZpZGVvcyA/IFwidmlkZW9cIiA6IFwibm9uZVwiLFxuICAgICAgICBcImRpdmlkZXJcIixcbiAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0NvbnRhaW5lcnMgPyBcImNvbnRhaW5lclwiIDogXCJub25lXCIsXG4gICAgICAgIFwidGVtcGxhdGUtdGV4dFwiLFxuICAgICAgICBcInRlbXBsYXRlLWh0bWxcIixcbiAgICAgICAgdGhpcy5wcm9wcy50b29sYmFyRXh0cmFzICYmIHRoaXMucHJvcHMudG9vbGJhckV4dHJhcy5sZW5ndGggPyBcImV4dHJhc1wiIDogXCJub25lXCIsXG4gICAgICBdXG4gICAgKS5tYXAoKHYpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgKHYpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIHYodGhpcy5wcm9wcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2O1xuICAgIH0pO1xuXG4gICAgY29uc3QgRHJhd2VyVG9nZ2xlQ29tcG9uZW50ID0gdGhpcy5wcm9wcy5Ub29sYmFyRHJhd2VyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyRHJhd2VyVG9nZ2xlQnV0dG9uO1xuXG4gICAgbGV0IGRyYXdlckJ1dHRvbiA9IChcbiAgICAgIHRoaXMucHJvcHMuc2hvdWxkSGF2ZURyYXdlcigpID9cbiAgICAgICAgPERyYXdlclRvZ2dsZUNvbXBvbmVudFxuICAgICAgICAgIGRyYXdlck9wZW49e3RoaXMucHJvcHMuZHJhd2VyT3Blbn1cbiAgICAgICAgICB0b2dnbGVEcmF3ZXI9e3RoaXMucHJvcHMudG9nZ2xlRHJhd2VyfVxuICAgICAgICAgIGRpc2pvaW50ZWRNb2RlPXt0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgICAgICAvPiA6XG4gICAgICAgIG51bGxcbiAgICApO1xuXG4gICAgY29uc3QgY3VzdG9tQ2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZVtdID0gW107XG4gICAgY29uc3QgdG9vbGJhckZvcm1NYXBwZWQgPSAoXG4gICAgICB0b29sYmFyRm9ybS5tYXAoKGVsZSwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBlbGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBjb25zdCBFbGVtZW50ID0gdG9vbGJhclJlZ2lzdHJ5W2VsZV07XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxFbGVtZW50XG4gICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgICBpc1JlYWR5PXt0aGlzLnN0YXRlLmlzUmVhZHl9XG4gICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZXh0cmFWYWx1ZSA9IHR5cGVvZiBlbGUgPT09IFwiZnVuY3Rpb25cIiA/IGVsZSh0aGlzLnByb3BzKSA6IGVsZTtcblxuICAgICAgICAgIGlmICgoZXh0cmFWYWx1ZSBhcyBJVG9vbGJhclByZXNjZW5zZUVsZW1lbnQpLmN1c3RvbUNoaWxkcmVuKSB7XG4gICAgICAgICAgICBjdXN0b21DaGlsZHJlbi5wdXNoKFxuICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQga2V5PXtpbmRleH0+XG4gICAgICAgICAgICAgICAgeyhleHRyYVZhbHVlIGFzIElUb29sYmFyUHJlc2NlbnNlRWxlbWVudCkuY3VzdG9tQ2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8VG9vbGJhckV4dHJhXG4gICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgICBpc1JlYWR5PXt0aGlzLnN0YXRlLmlzUmVhZHl9XG4gICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgIGV4dHJhPXtleHRyYVZhbHVlIGFzIElUb29sYmFyUHJlc2NlbnNlRWxlbWVudH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuXG4gICAgY29uc3QgVG9vbGJhciA9IHRoaXMucHJvcHMuVG9vbGJhciB8fCBEZWZhdWx0VG9vbGJhcjtcblxuICAgIC8vIG5vdyB3ZSBjYW4gY3JlYXRlIHRoZSBjb21wb25lbnQgaXRzZWxmXG4gICAgLy8gdGhlcmUgaXMgbm90IG11Y2ggdG8gc2F5IG9uIGhvdyB0aGlzIGFsbCB3b3Jrc1xuICAgIGNvbnN0IHRvUmV0dXJuID0gKFxuICAgICAgPFRvb2xiYXJcbiAgICAgICAgY3VzdG9tQ2hpbGRyZW49e2N1c3RvbUNoaWxkcmVufVxuICAgICAgICBkaXNqb2ludGVkTW9kZT17dGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAgICAgZHJhd2VyQnV0dG9uPXtkcmF3ZXJCdXR0b259XG4gICAgICAgIGRyYXdlck9wZW49e3RoaXMucHJvcHMuZHJhd2VyT3Blbn1cbiAgICAgICAgcHJvcHM9e3tcbiAgICAgICAgICBbXCJkYXRhLXVuYmx1clwiXTogdHJ1ZSxcbiAgICAgICAgfX1cbiAgICAgICAgdG9vbGJhckNvbnRlbnRzPXt0b29sYmFyRm9ybU1hcHBlZH1cbiAgICAgICAgcmVmPXt0aGlzLmFwcEJhckhlYWRlclJlZn1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGlmICh0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlICYmIHRoaXMuc3RhdGUuaXNSZWFkeSkge1xuICAgICAgcmV0dXJuIFJlYWN0RE9NLmNyZWF0ZVBvcnRhbCh0b1JldHVybiwgZG9jdW1lbnQuYm9keSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRvUmV0dXJuO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHN0YXRlIGZvciB0aGUgd3JhcHBlclxuICogdGhlIHN0YXRlIGlzIG5lY2Vzc2FyeSBhcyB0aGUgd3JhcHBlciBjYW4gaG9sZCBkaWFsb2dzIG9wZW5cbiAqIGFuZCB0aGUgZHJhd2VyIGl0c2VsZlxuICovXG5leHBvcnQgaW50ZXJmYWNlIERlZmF1bHRTbGF0ZVdyYXBwZXJTdGF0ZSB7XG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgdGhlIHN0YXRlIG9mIHRoZSBkcmF3ZXJcbiAgICovXG4gIGRyYXdlck9wZW46IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFNwZWNpZmllcyB0aGUgaGVpZ2h0IG9mIHRoZSB0b29sYmFyIGZvciB1c2VcbiAgICogd2hlbiB0aGUgZHJhd2VyIGlzIG9wZW4gaW4gZGlzam9pbnRlZCBtb2RlXG4gICAqL1xuICB0b29sYmFySGVpZ2h0OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEEgY3VzdG9tIHRvb2xiYXIgc3RhdGVcbiAgICovXG4gIHRvb2xiYXJTdGF0ZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgZHJhd2VyIGJlaW5nIG9wZW4gb3IgY2xvc2VkIGlzIHN0b3JlZCBpbiBsb2NhbCBzdG9yYWdlLCB3aGljaCBpcyBub3QgYXZhaWxhYmxlIGluIHRoZSBzZXJ2ZXJcbiAgICogc2lkZSwgYW5kIHRoZSBkcmF3ZXIgYW5pbWF0ZXMgd2hlbiBpdCdzIG9wZW5lZCBhbmQgY2xvc2VkLCBzbyB0aGlzIHZhcmlhYmxlIGlzIGFsd2F5cyBmYWxzZSBhdCB0aGVcbiAgICogc3RhcnQsIHRoZSBkcmF3ZXIgaXMgYWx3YXlzIGNsb3NlZCBhdCB0aGUgc3RhcnQsIGhvd2V2ZXIsIGlmIHdlIG5lZWQgdG8gb3BlbiB0aGUgZHJhd2VyIGF0IHRoZSBzdGFydFxuICAgKiBvbiBtb3VudCB3ZSBkb24ndCB3YW50IGFueSBhbmltYXRpb24gc28gd2UgdG9nZ2xlIHRoaXMgZmxhZyB0ZW1wb3JhcmlseSwgaXQgZG9lc24ndCBuZWVkIHRvIGJlIHBhcnRcbiAgICogb2YgdGhlIHN0YXRlIGFzIGl0J3Mgb25seSB1c2VkIHRoZXJlXG4gICAqL1xuICBub0FuaW1hdGU6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZW4gb3BlbmluZyBhIGRpYWxvZyBhbmQgbG9zaW5nIGZvY3VzIHRvIHRoZSBzbGF0ZSByaWNoIHRleHQgZWRpdG9yIGNvbnRlbnQgZWRpdGFibGVcbiAgICogd2UgbG9zZSBhY2Nlc3MgdG8gdGhlIGFuY2hvcnMgYW5kIGN1cnJlbnQgZWxlbWVudHMgbm93IHRoYXQgd2UgYXJlIGluIGZvY3VzIG9mIHNvbWV0aGluZ1xuICAgKiBlbHNlIHNvIHdlIG5lZWQgdG8gc3RvcmUgdGhlIGVsZW1lbnQgdGhhdCB3YXMgdGhlIGN1cnJlbnQgZWxlbWVudCB0aGF0IHdhcyBpbiBmb2N1c1xuICAgKiBiZWZvcmUgdGhhdCBoYXBwZW5lZFxuICAgKi9cbiAgaW5saW5lRWxlbWVudFRoYXRXYXNDdXJyZW50QmVmb3JlTG9zaW5nRm9jdXM6IFJpY2hFbGVtZW50O1xufVxuXG4vKipcbiAqIFRoaXMgcmVwcmVzZW50cyB0aGUgdW53cmFwcGVkIGNsYXNzIHRoYXQgaXMgdXNlZCBmb3IgdGhlIHdyYXBwZXIsIGl0IGlzIG5vdFxuICogdGhlIGV4cG9ydGVkIG9uZSBiZWNhdXNlIGl0IG5lZWRzIHRvIGJlIHdpdGhTdHlsZXMgZm9yIHN0eWxpemF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZhdWx0U2xhdGVXcmFwcGVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxJRGVmYXVsdFNsYXRlV3JhcHBlclByb3BzLCBEZWZhdWx0U2xhdGVXcmFwcGVyU3RhdGU+IHtcbiAgLyoqXG4gICAqIFRoZSByZWYgb2JqZWN0IGZvciB0aGUgaW5wdXQgb2JqZWN0IGZvciBpbWFnZSBpbnB1dFxuICAgKi9cbiAgcHJpdmF0ZSBpbnB1dEltYWdlUmVmOiBSZWFjdC5SZWZPYmplY3Q8SFRNTElucHV0RWxlbWVudD47XG5cbiAgLyoqXG4gICAqIFRoZSByZWYgb2JqZWN0IGZvciB0aGUgaW5wdXQgb2JqZWN0IGZvciBhbnkgZmlsZSBpbnB1dFxuICAgKi9cbiAgcHJpdmF0ZSBpbnB1dEZpbGVSZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MSW5wdXRFbGVtZW50PjtcblxuICAvKipcbiAgICogQSByZWYgdG8gdGhlIGNvbnRhaW5lclxuICAgKi9cbiAgcHJpdmF0ZSBEcmF3ZXJDb250YWluZXJSZWY6IFJlYWN0LlJlZk9iamVjdDxEcmF3ZXJDb250YWluZXI+O1xuXG4gIC8qKlxuICAgKiBhIHJlZiB0byB0aGUgZWRpdG9yXG4gICAqL1xuICBwcml2YXRlIGVkaXRvclJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxFbGVtZW50PjtcblxuICAvKipcbiAgICogQSByZWYgZm9yIHRoZSB0b29sYmFyXG4gICAqL1xuICBwcml2YXRlIHRvb2xiYXJSZWY6IFJlYWN0LlJlZk9iamVjdDxSaWNoVGV4dEVkaXRvclRvb2xiYXI+O1xuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSByYW5nZSB0aGF0IHdhcyBpbiBwbGFjZSBiZWZvcmUgbG9zaW5nIGZvY3VzLCBpdCBpcyB1c2VkIGJlY2F1c2VcbiAgICogd2hlbiBvcGVuaW5nIHNvbWUgZGlhbG9nLCB0aGUgaW5zZXJ0aW9uIG9yIGNoYW5nZSBuZWVkcyB0byBoYXBwZW4gYXQgYSBnaXZlblxuICAgKiBzZWxlY3Rpb24gcmFuZ2UsIGJ1dCB0aGF0IGlzIGxvc3Qgd2hlbiBsb3NpbmcgZm9jdXMsIHNvIHdlIG5lZWQgdG8gcmVtZW1iZXIgaXRcbiAgICovXG4gIHByaXZhdGUgb3JpZ2luYWxTZWxlY3Rpb25BcmVhOiBSYW5nZTtcbiAgLyoqXG4gICAqIElmIGluc3RlYWQgb2YgaGF2aW5nIGEgc2VsZWN0aW9uIGFyZWEgd2UgaGFkIGEgc2VsZWN0aW9uIHBhdGggYXMgYSBzZWxlY3RlZCBlbGVtZW50XG4gICAqIGJlY2F1c2Ugd2Ugd2VyZSB3b3JraWduIGluIHRoZSByYW5nZVxuICAgKi9cbiAgcHJpdmF0ZSBvcmlnaW5hbFNlbGVjdGlvblBhdGg6IFBhdGg7XG5cbiAgLyoqXG4gICAqIHRoaXMgaXMgdXNlZCB0byBlbnN1cmUgYSByZWZvY3VzIGFmdGVyIHRoZSBuYXRpdmUgZGlhbG9ncyBmb3IgZmlsZSBhbmQgZm9yIGltYWdlIHRoYXRcbiAgICogYXJlIHVzZWQgdG8gZ2V0IGEgZmlsZSBhcmUgY2xvc2VkOyB3aGlsZSB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBpbnB1dCBldmVudCB0byB0cmlnZ2VyXG4gICAqIHdlIGRvbid0IGtub3cgaWYgdGhhdCBoYXBwZW5zIGZpcnN0IGFzIHRoZXJlIGFyZSBubyBndWFyYW50ZWVzIHNvIHdlIGRlbGF5IGl0IGEgbGl0dGxlIGJpdFxuICAgKiBhbmQgdGhlIGNoYW5nZSBldmVudCBtaWdodCBub3QgZXZlbiB0cmlnZ2VyXG4gICAqL1xuICBwcml2YXRlIHJlZm9jdXNUaW1lb3V0OiBOb2RlSlMuVGltZW91dDtcblxuICBwcml2YXRlIGlzVW5tb3VudGVkOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IG1hdGVyaWFsIHVpIGJhc2VkIHdyYXBwZXIgZm9yIHRoZSBzbGF0ZSBlZGl0b3JcbiAgICogQHBhcmFtIHByb3BzIHRoZSBiYXNlIHByb3BlcnRpZXMgdGhhdCBldmVyeSB3cmFwcGVyIGdldHMgZXh0ZW5kZWQgZm9yIHRoaXMgc3BlY2lmaWMgd3JhcHBlclxuICAgKi9cbiAgY29uc3RydWN0b3IocHJvcHM6IElEZWZhdWx0U2xhdGVXcmFwcGVyUHJvcHMpIHtcblxuICAgIC8vIHN1cGVyIGNhbGxpbmdcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAvLyBzZXR1cCB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpbmxpbmVFbGVtZW50VGhhdFdhc0N1cnJlbnRCZWZvcmVMb3NpbmdGb2N1czogbnVsbCxcblxuICAgICAgLy8ga2VlcCBTU1IgY29tcGF0aWJpbGl0eSBieSBrZWVwaW5nIHRoZSBkcmF3ZXIgY2xvc2VkIGF0IHRoZSBzdGFydFxuICAgICAgLy8gYXMgd2UgY2Fubm90IHJlYWQgbG9jYWwgc3RvcmFnZSBpbiB0aGUgc2VydmVyIHNpZGVcbiAgICAgIGRyYXdlck9wZW46IGZhbHNlLFxuICAgICAgdG9vbGJhckhlaWdodDogMCxcbiAgICAgIG5vQW5pbWF0ZTogdHJ1ZSxcbiAgICAgIHRvb2xiYXJTdGF0ZTogbnVsbCxcbiAgICB9XG5cbiAgICB0aGlzLmlzVW5tb3VudGVkID0gZmFsc2U7XG5cbiAgICAvLyBjcmVhdGUgdGhlIHJlZnNcbiAgICB0aGlzLmlucHV0SW1hZ2VSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgICB0aGlzLmlucHV0RmlsZVJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuICAgIHRoaXMuRHJhd2VyQ29udGFpbmVyUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gICAgdGhpcy50b29sYmFyUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gICAgdGhpcy5lZGl0b3JSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcblxuICAgIC8vIGJpbmQgYWxsIHRoZSBmdW5jdGlvbnNcbiAgICB0aGlzLm9uSGVpZ2h0Q2hhbmdlID0gdGhpcy5vbkhlaWdodENoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25JbWFnZUxvYWQgPSB0aGlzLm9uSW1hZ2VMb2FkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkZpbGVMb2FkID0gdGhpcy5vbkZpbGVMb2FkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZXF1ZXN0SW1hZ2UgPSB0aGlzLnJlcXVlc3RJbWFnZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVxdWVzdEZpbGUgPSB0aGlzLnJlcXVlc3RGaWxlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkZpbGVFdmVudGVkUmVGb2N1cyA9IHRoaXMub25GaWxlRXZlbnRlZFJlRm9jdXMuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlZm9jdXMgPSB0aGlzLnJlZm9jdXMuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNob3VsZEhhdmVEcmF3ZXIgPSB0aGlzLnNob3VsZEhhdmVEcmF3ZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLnRvZ2dsZURyYXdlciA9IHRoaXMudG9nZ2xlRHJhd2VyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRUb29sYmFyU3RhdGUgPSB0aGlzLnNldFRvb2xiYXJTdGF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2VsZWN0aXZlSGFyZEJsdXIgPSB0aGlzLnNlbGVjdGl2ZUhhcmRCbHVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5rZXlVcExpc3RlbmVyID0gdGhpcy5rZXlVcExpc3RlbmVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkFsdEFjdGlvblRyaWdnZXJlZCA9IHRoaXMub25BbHRBY3Rpb25UcmlnZ2VyZWQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkFsdEFjdGlvblRyaWdnZXJlZCh0YWJOYXY6IGJvb2xlYW4sIGFjdGlvbjogXCJjbGlja1wiIHwgXCJmb2N1c1wiIHwgXCJibHVyXCIpIHtcbiAgICBpZiAoYWN0aW9uID09PSBcImJsdXJcIikge1xuICAgICAgdGhpcy5wcm9wcy5oZWxwZXJzLmhhcmRCbHVyKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uSGVpZ2h0Q2hhbmdlKG5ld0hlaWdodDogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUudG9vbGJhckhlaWdodCAhPT0gbmV3SGVpZ2h0KSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdG9vbGJhckhlaWdodDogbmV3SGVpZ2h0LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIER1cmluZyB0aGUgbW91bnQgZXZlbnRcbiAgICovXG4gIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAvLyBpZiB3ZSBzaG91bGQgaGF2ZSBhIGRyYXdlclxuICAgIGlmICh0aGlzLnNob3VsZEhhdmVEcmF3ZXIoKSkge1xuICAgICAgLy8gYW5kIHNldCB0aGUgc3RhdGUgb2YgdGhlIGRyYXdlciBiYXNlZCBvbiB0aGUgbG9jYWwgc3RvcmFnZSB2YWx1ZVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGRyYXdlck9wZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiU0xBVEVfRFJBV0VSX09QRU5cIikgPT09IFwidHJ1ZVwiLFxuICAgICAgICBub0FuaW1hdGU6IHRydWUsXG4gICAgICB9LCAoKSA9PiB7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gd2FpdCAzMDAgc2Vjb25kcyBiZWNhdXNlIGFzIHVzdWFsXG4gICAgICAgIC8vIHNvbWUgYnVnIGluIHJlYWN0IGNhdXNlcyBzdGF0ZXMgdG8gc3RhY2tcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgLy8gYW5kIHJlLWVuYWJsZSB0aGUgYW5pbWF0aW9uXG4gICAgICAgICAgLy8gaWYgdGhlIGRyYXdlciBvcGVuZWQgaXQgd29uJ3QgYW5pbWF0ZVxuICAgICAgICAgIC8vIHRoaXMga2VlcHMgU1NSIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAhdGhpcy5pc1VubW91bnRlZCAmJiB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG5vQW5pbWF0ZTogZmFsc2UsXG4gICAgICAgICAgfSlcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBvdGhlcndpc2UgYW5pbWF0aW9uIGlzIGVuYWJsZWRcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBub0FuaW1hdGU6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuc2VsZWN0aXZlSGFyZEJsdXIpO1xuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5zZWxlY3RpdmVIYXJkQmx1cik7XG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5rZXlVcExpc3RlbmVyKTtcbiAgfVxuXG4gIHB1YmxpYyBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5zZWxlY3RpdmVIYXJkQmx1cik7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLnNlbGVjdGl2ZUhhcmRCbHVyKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmtleVVwTGlzdGVuZXIpO1xuICAgIHRoaXMuaXNVbm1vdW50ZWQgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIGtleVVwTGlzdGVuZXIoZTogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmIChlLmtleSA9PT0gXCJUYWJcIikge1xuICAgICAgdGhpcy5zZWxlY3RpdmVIYXJkQmx1cihlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2VsZWN0aXZlSGFyZEJsdXIoZTogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQsIGFsdFRhcmdldD86IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gYWx0VGFyZ2V0IHx8IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCk7XG4gICAgLy8gd2UgYXJlIGN1cnJlbnRseSBpbiBmb2N1c1xuICAgIGlmICh0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHQpIHtcbiAgICAgIC8vIGlmIGl0J3MgYW4gdW5ibHVycmVkIHRhcmdldCwgc3VjaCBhcyB0aGUgdG9vbGJhclxuICAgICAgLy8gb3IgdGhlIGRyYXdlclxuICAgICAgaWYgKHRoaXMuaXNVbmJsdXJyZWQodGFyZ2V0KSkge1xuICAgICAgICBpZiAodGFyZ2V0LnRhZ05hbWUgIT09IFwiSU5QVVRcIiAmJiB0YXJnZXQudGFnTmFtZSAhPT0gXCJTRUxFQ1RcIikge1xuICAgICAgICAgIC8vIHN0b3AgZnJvbSBsb3NpbmcgZm9jdXNcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNJbkVkaXRvcih0YXJnZXQpKSB7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpZiB3ZSBhcmUgbm90IGluIHRoZSBlZGl0b3JcbiAgICAgICAgLy8ganVzdCBsb3NlIGFsbCB0aGUgZm9jdXNcbiAgICAgICAgdGhpcy5wcm9wcy5oZWxwZXJzLmhhcmRCbHVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGlzVW5ibHVycmVkKGVsZTogSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICBpZiAoXG4gICAgICBlbGUgPT09IHRoaXMudG9vbGJhclJlZi5jdXJyZW50LmdldEFwcGJhckhlYWRlcigpIHx8XG4gICAgICBlbGUgPT09IHRoaXMuRHJhd2VyQ29udGFpbmVyUmVmLmN1cnJlbnQuZ2V0RHJhd2VyQm9keSgpIHx8XG4gICAgICBlbGUuZGF0YXNldC51bmJsdXJcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChlbGUucGFyZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNVbmJsdXJyZWQoZWxlLnBhcmVudEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBpc0luRWRpdG9yKGVsZTogSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICBpZiAoXG4gICAgICBlbGUuZGF0YXNldC5ub3RFZGl0b3JcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgZWxlID09PSB0aGlzLmVkaXRvclJlZi5jdXJyZW50XG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZWxlLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzSW5FZGl0b3IoZWxlLnBhcmVudEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgb24gd2hldGhlciBpdCBzaG91bGQgaGF2ZSBhIGRyYXdlclxuICAgKiBAcmV0dXJucyBhIGJvb2xlYW4gb24gdGhpcyBmYWN0XG4gICAqL1xuICBwdWJsaWMgc2hvdWxkSGF2ZURyYXdlcigpIHtcbiAgICAvLyBiYXNpY2FsbHkgbm90IHJpY2ggdGV4dFxuICAgIGlmICghdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydCB8fCB0aGlzLnByb3BzLmhpZGVEcmF3ZXIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gYSBkcmF3ZXIgaXMgb25seSBuZWNlc3NhcnkgaWYgd2Ugc3VwcG9ydCBhbGwgb2YgdGhlc2VcbiAgICAvLyBiZWF1c2UgdGhhdCdzIHdoYXQgd2UgY29uZmlndXJlIGluIHRoZSBkcmF3ZXJcbiAgICByZXR1cm4gISEoXG4gICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGVtcGxhdGluZyB8fFxuICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0N1c3RvbVN0eWxlcyB8fFxuICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0NvbnRhaW5lcnMgfHxcbiAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydGVkQ3VzdG9tcyB8fFxuICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1JpY2hDbGFzc2VzIHx8XG4gICAgICB0aGlzLnByb3BzLmRyYXdlckV4dHJhc1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZXMgaW4gb3JkZXIgdG8gb3BlbiB0aGUgZGlhbG9nIGluIG9yZGVyIHRvIHJlcXVlc3QgYW4gaW1hZ2VcbiAgICogdmlhIHRoaXMgZmlsZSB1cGxvYWQgZGlhbG9nXG4gICAqL1xuICBwdWJsaWMgcmVxdWVzdEltYWdlKCkge1xuICAgIC8vIHdlIGFkZCB0aGUgZm9jdXMgbGlzdGVuZXIgZm9yIHRoZSByZWZvY3VzIHdoZW4gdGhlIGRpYWxvZyBjbG9zZXNcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLm9uRmlsZUV2ZW50ZWRSZUZvY3VzLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgLy8gZ2V0IHRoZSBvcmlnaW5hbCBzZWxlY3Rpb24gYXJlYVxuICAgIHRoaXMub3JpZ2luYWxTZWxlY3Rpb25BcmVhID0gdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50VGV4dCA/IHRoaXMucHJvcHMuaGVscGVycy5lZGl0b3Iuc2VsZWN0aW9uIDogbnVsbDtcbiAgICB0aGlzLm9yaWdpbmFsU2VsZWN0aW9uUGF0aCA9IHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvciB8fFxuICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IgfHxcbiAgICAgIChcbiAgICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMgJiZcbiAgICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbXG4gICAgICAgIHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLmxlbmd0aCAtIDFcbiAgICAgICAgXVxuICAgICAgKTtcbiAgICAvLyB0cmlnZ2VyIGEgY2xpY2tcbiAgICB0aGlzLmlucHV0SW1hZ2VSZWYuY3VycmVudC5jbGljaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIGluIG9yZGVyIHRvIG9wZW4gdGhlIGRpYWxvZyBpbiBvcmRlciB0byByZXF1ZXN0IGFuIGZpbGVcbiAgICogdmlhIHRoaXMgZmlsZSB1cGxvYWQgZGlhbG9nXG4gICAqL1xuICBwdWJsaWMgcmVxdWVzdEZpbGUoKSB7XG4gICAgLy8gd2UgYWRkIHRoZSBmb2N1cyBsaXN0ZW5lciBmb3IgdGhlIHJlZm9jdXMgd2hlbiB0aGUgZGlhbG9nIGNsb3Nlc1xuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMub25GaWxlRXZlbnRlZFJlRm9jdXMsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAvLyBnZXQgdGhlIG9yaWdpbmFsIHNlbGVjdGlvbiBhcmVhXG4gICAgdGhpcy5vcmlnaW5hbFNlbGVjdGlvbkFyZWEgPSB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRUZXh0ID8gdGhpcy5wcm9wcy5oZWxwZXJzLmVkaXRvci5zZWxlY3Rpb24gOiBudWxsO1xuICAgIHRoaXMub3JpZ2luYWxTZWxlY3Rpb25QYXRoID0gdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yIHx8XG4gICAgICB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvciB8fFxuICAgICAgKFxuICAgICAgICB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycyAmJlxuICAgICAgICB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1tcbiAgICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMubGVuZ3RoIC0gMVxuICAgICAgICBdXG4gICAgICApO1xuICAgIC8vIHRyaWdnZXIgYSBjbGlja1xuICAgIHRoaXMuaW5wdXRGaWxlUmVmLmN1cnJlbnQuY2xpY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucy9jbG9zZXMgdGhlIGRyYXdlclxuICAgKi9cbiAgcHVibGljIHRvZ2dsZURyYXdlcigpIHtcbiAgICAvLyB3ZSB0YWtlIHRoZSBuZXcgc3RhdGUgdGhhdCB3ZSB3aWxsIGJlIHVzaW5nIGFzIHRoZSBvcHBvc2l0ZSBvZiAgdGhlIGN1cnJlbnRcbiAgICBjb25zdCBuZXdTdGF0ZSA9ICF0aGlzLnN0YXRlLmRyYXdlck9wZW47XG5cbiAgICAvLyBwdXQgaXQgaW4gdGhlIHN0YXRlXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBkcmF3ZXJPcGVuOiBuZXdTdGF0ZSxcbiAgICB9KTtcblxuICAgIGlmICghdGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZSkge1xuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiU0xBVEVfRFJBV0VSX09QRU5cIikpO1xuICAgIH1cblxuICAgIC8vIGFuZCBwdXQgaXQgaW4gbG9jYWwgc3RvcmFnZVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiU0xBVEVfRFJBV0VSX09QRU5cIiwgSlNPTi5zdHJpbmdpZnkobmV3U3RhdGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZvY3VzZXMgYXMgdGhlIG9yaWdpbmFsIHNlbGVjdGlvbiBhcmVhIHRoYXQgd2FzIGZvY3VzZWRcbiAgICogbWFpbmx5IHVzZWQgYnkgZGlhbG9ncyBvbmNlIHRoZXkgaGFhdmUgY2xvc2VkXG4gICAqL1xuICBwdWJsaWMgcmVmb2N1cygpIHtcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9yaWdpbmFsU2VsZWN0aW9uQXJlYSkge1xuICAgICAgdGhpcy5wcm9wcy5oZWxwZXJzLmZvY3VzQXQodGhpcy5vcmlnaW5hbFNlbGVjdGlvbkFyZWEpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5vcmlnaW5hbFNlbGVjdGlvblBhdGgpIHtcbiAgICAgIHRoaXMucHJvcHMuaGVscGVycy5zZWxlY3RQYXRoKHRoaXMub3JpZ2luYWxTZWxlY3Rpb25QYXRoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgb25jZSB0aGUgZG9jdW1lbnQgaGFzIHJlY292ZXJlZCBmb2N1cyBmcm9tIHRoZSBmaWxlXG4gICAqIGRpYWxvZyB0aGF0IGlzIG5hdGl2ZSBmb3IgdGhlIGZpbGUgdXBsb2FkXG4gICAqL1xuICBwdWJsaWMgb25GaWxlRXZlbnRlZFJlRm9jdXMoKSB7XG4gICAgLy8gcmVtb3ZlIHRoZSBvbGQgbGlzdGVuZXIgZnJvbSB0aGUgYm9keVxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMub25GaWxlRXZlbnRlZFJlRm9jdXMsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcblxuICAgIC8vIHdlIGRvIGl0IHRoaXMgd2F5IGJlY2F1c2UgdGhpcyBpcyBhIGhhY2t5IHdheSBhbmQgd2UgYXJlIG5vdCBzdXJlXG4gICAgLy8gb24gd2hldGhlciB0aGUgZm9jdXMgZXZlbnQgd2lsbCB0cmlnZ2VyIGJlZm9yZSB0aGUgaW5wdXQgZXZlbnQsXG4gICAgLy8gdGhhdCBjb21lcyBmcm9tIHRoZSBmaWxlIGlucHV0IGRpYWxvZywgdGhlIGlucHV0IHNob3VsZCBjb21lIGZpcnN0XG4gICAgLy8gYXMgdGhlIGZpbGUgaXMgdG8gdXBsb2FkLCBidXQgd2UgbWFrZSBubyBhc3N1bXB0aW9uc1xuICAgIHRoaXMucmVmb2N1c1RpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMucmVmb2N1cywgMzApO1xuICB9XG5cbiAgcHVibGljIHNldFRvb2xiYXJTdGF0ZShzdGF0ZTogc3RyaW5nIHwgbnVsbCkge1xuICAgIGlmICh0aGlzLnN0YXRlLnRvb2xiYXJTdGF0ZSAhPT0gc3RhdGUpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyB0b29sYmFyU3RhdGU6IHN0YXRlIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGdldHMgY2FsbGVkIG9uY2UgdGhlIGltYWdlIGlucHV0IGNhbGxzIHRoZSBvbiBjaGFuZ2UgZXZlbnRcbiAgICogd2hpY2ggbWVhbnMgaXQgaGFzIGJlZW4gbG9hZGVkIGJ5IHRoZSBpbnB1dCBpdHNlbGYgYW5kIGl0J3MgYXZhaWxhYmxlIGZvclxuICAgKiByZWFkaW5nXG4gICAqIEBwYXJhbSBlIHRoZSBjaGFuZ2UgZXZlbnQgdGhhdCBjb250YWlucyB0aGUgZmlsZSBcbiAgICovXG4gIHB1YmxpYyBhc3luYyBvbkltYWdlTG9hZChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50Pikge1xuICAgIC8vIHJlbW92ZSB0aGUgbGlzdGVuZXIgZm9yIHRoZSB3aG9sZSBpbnB1dCBmb3IgdGhlIHJlZm9jdXMgYmFjayBpbnRvIHRoZSBmaWVsZFxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMub25GaWxlRXZlbnRlZFJlRm9jdXMsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAvLyBjbGVhciBhIHRpbWVvdXQgaW4gY2FzZSB0aGVyZSBpcyBvbmUgZm9yIHRoaXMgcmVmb2N1cywgc2luY2UgdGhlIGV2ZW50XG4gICAgLy8gbWlnaHQgcmVmZXIgdG8gYSBjYW5jZWwsIHRoZW4gd2UgbmVlZCB0byBlbnN1cmUgaXQgaXMgY2FuY2VsbGVkXG4gICAgLy8gYXMgdGhpcyBmdW5jdGlvbiBpdHNlbGYgd2lsbCByZWZvY3VzIGFmdGVyIHRoZSBpbWFnZSBpcyBpbnNlcnRlZFxuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlZm9jdXNUaW1lb3V0KTtcbiAgICAvLyBub3cgd2UgcGljayB0aGUgaW1hZ2VcbiAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07XG4gICAgZS50YXJnZXQudmFsdWUgPSBcIlwiO1xuICAgIC8vIGFuZCBpbnNlcnQgaXRcbiAgICBhd2FpdCB0aGlzLnByb3BzLmhlbHBlcnMuZm9jdXNBdCh0aGlzLm9yaWdpbmFsU2VsZWN0aW9uQXJlYSB8fCB0aGlzLm9yaWdpbmFsU2VsZWN0aW9uUGF0aCk7XG4gICAgdGhpcy5wcm9wcy5oZWxwZXJzLmluc2VydEltYWdlKGZpbGUsIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGdldHMgY2FsbGVkIG9uY2UgdGhlIGZpbGUgaW5wdXQgY2FsbHMgdGhlIG9uIGNoYW5nZSBldmVudFxuICAgKiB3aGljaCBtZWFucyBpdCBoYXMgYmVlbiBsb2FkZWQgYnkgdGhlIGlucHV0IGl0c2VsZiBhbmQgaXQncyBhdmFpbGFibGUgZm9yXG4gICAqIHJlYWRpbmdcbiAgICogQHBhcmFtIGUgdGhlIGNoYW5nZSBldmVudCB0aGF0IGNvbnRhaW5zIHRoZSBmaWxlXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgb25GaWxlTG9hZChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50Pikge1xuICAgIC8vIHJlbW92ZSB0aGUgbGlzdGVuZXIgZm9yIHRoZSB3aG9sZSBpbnB1dCBmb3IgdGhlIHJlZm9jdXMgYmFjayBpbnRvIHRoZSBmaWVsZFxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMub25GaWxlRXZlbnRlZFJlRm9jdXMsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAvLyBjbGVhciBhIHRpbWVvdXQgaW4gY2FzZSB0aGVyZSBpcyBvbmUgZm9yIHRoaXMgcmVmb2N1cywgc2luY2UgdGhlIGV2ZW50XG4gICAgLy8gbWlnaHQgcmVmZXIgdG8gYSBjYW5jZWwsIHRoZW4gd2UgbmVlZCB0byBlbnN1cmUgaXQgaXMgY2FuY2VsbGVkXG4gICAgLy8gYXMgdGhpcyBmdW5jdGlvbiBpdHNlbGYgd2lsbCByZWZvY3VzIGFmdGVyIHRoZSBpbWFnZSBpcyBpbnNlcnRlZFxuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlZm9jdXNUaW1lb3V0KTtcbiAgICAvLyBub3cgd2UgcGljayB0aGUgZmlsZVxuICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTtcbiAgICBlLnRhcmdldC52YWx1ZSA9IFwiXCI7XG4gICAgLy8gYW5kIGluc2VydCBpdFxuICAgIGF3YWl0IHRoaXMucHJvcHMuaGVscGVycy5mb2N1c0F0KHRoaXMub3JpZ2luYWxTZWxlY3Rpb25BcmVhIHx8IHRoaXMub3JpZ2luYWxTZWxlY3Rpb25QYXRoKTtcbiAgICB0aGlzLnByb3BzLmhlbHBlcnMuaW5zZXJ0RmlsZShmaWxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFuZGFyZCByZW5kZXIgZnVuY3Rpb24gZnJvbSB0aGUgd3JhcHBlclxuICAgKi9cbiAgcHVibGljIHJlbmRlcigpIHtcblxuICAgIC8vIGZpcnN0IHdlIGJ1aWxkIHRoZSBpYW1nZSBpbnB1dCBpZiB3ZSBzdXBwb3J0IGl0XG4gICAgY29uc3QgaW1hZ2VJbnB1dCA9IHRoaXMucHJvcHMuc3RhdGUuaXNSaWNoVGV4dCAmJiB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzSW1hZ2VzID8gKFxuICAgICAgPGlucHV0XG4gICAgICAgIHJlZj17dGhpcy5pbnB1dEltYWdlUmVmfVxuICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgIGFjY2VwdD17dGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ltYWdlc0FjY2VwdH1cbiAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogXCJub25lXCIgfX1cbiAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgb25DaGFuZ2U9e3RoaXMub25JbWFnZUxvYWR9XG4gICAgICAvPlxuICAgICkgOiBudWxsO1xuXG4gICAgLy8gbm93IHRoZSBnZW5lcmFsIGZpbGUgaW5wdXRcbiAgICBjb25zdCBmaWxlSW5wdXQgPSB0aGlzLnByb3BzLnN0YXRlLmlzUmljaFRleHQgJiYgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ZpbGVzID8gKFxuICAgICAgPGlucHV0XG4gICAgICAgIHJlZj17dGhpcy5pbnB1dEZpbGVSZWZ9XG4gICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgYWNjZXB0PXt0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzRmlsZXNBY2NlcHR9XG4gICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6IFwibm9uZVwiIH19XG4gICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRmlsZUxvYWR9XG4gICAgICAvPlxuICAgICkgOiBudWxsO1xuXG4gICAgLy8gdGhlIGZpbGUgbG9hZCBlcnJvciBkaWFsb2cgdGhhdCBzaG93cyBhbiBlcnJvclxuICAgIC8vIGJhc2VkIG9uIHRoZSBjdXJyZW50IGxvYWQgZXJyb3JcbiAgICBjb25zdCBmaWxlTG9hZEVycm9yRGlhbG9nID1cbiAgICAgIHRoaXMucHJvcHMuc3RhdGUuaXNSaWNoVGV4dCAmJlxuICAgICAgICAoXG4gICAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ltYWdlcyB8fFxuICAgICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNGaWxlc1xuICAgICAgICApID9cbiAgICAgICAgKFxuICAgICAgICAgIDxGaWxlTG9hZEVycm9yRGlhbG9nXG4gICAgICAgICAgICBjdXJyZW50TG9hZEVycm9yPXt0aGlzLnByb3BzLmN1cnJlbnRMb2FkRXJyb3J9XG4gICAgICAgICAgICBkaXNtaXNzQ3VycmVudExvYWRFcnJvcj17dGhpcy5wcm9wcy5kaXNtaXNzQ3VycmVudExvYWRFcnJvcn1cbiAgICAgICAgICAgIGkxOG5HZW5lcmljRXJyb3I9eyh0aGlzLnByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZ2VuZXJpY0Vycm9yfVxuICAgICAgICAgICAgaTE4bk9rPXsodGhpcy5wcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLm9rfVxuICAgICAgICAgICAgRGlhbG9nPXt0aGlzLnByb3BzLkRpYWxvZ31cbiAgICAgICAgICAvPlxuICAgICAgICApIDogbnVsbDtcblxuICAgIGxldCB0b29sYmFyID0gKFxuICAgICAgPFJpY2hUZXh0RWRpdG9yVG9vbGJhclxuICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgdG9vbGJhclN0YXRlPXt0aGlzLnN0YXRlLnRvb2xiYXJTdGF0ZX1cbiAgICAgICAgdG9vbGJhckhlaWdodD17dGhpcy5zdGF0ZS50b29sYmFySGVpZ2h0fVxuICAgICAgICByZWY9e3RoaXMudG9vbGJhclJlZn1cbiAgICAgICAgb25IZWlnaHRDaGFuZ2U9e3RoaXMub25IZWlnaHRDaGFuZ2V9XG4gICAgICAgIHJlcXVlc3RJbWFnZT17dGhpcy5yZXF1ZXN0SW1hZ2V9XG4gICAgICAgIHJlcXVlc3RGaWxlPXt0aGlzLnJlcXVlc3RGaWxlfVxuICAgICAgICBzaG91bGRIYXZlRHJhd2VyPXt0aGlzLnNob3VsZEhhdmVEcmF3ZXJ9XG4gICAgICAgIGRyYXdlck9wZW49e3RoaXMuc3RhdGUuZHJhd2VyT3Blbn1cbiAgICAgICAgdG9nZ2xlRHJhd2VyPXt0aGlzLnRvZ2dsZURyYXdlcn1cbiAgICAgICAgc2V0VG9vbGJhclN0YXRlPXt0aGlzLnNldFRvb2xiYXJTdGF0ZX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGxldCBleHRyYUNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgPSBudWxsO1xuICAgIGlmICh0aGlzLnByb3BzLmN1c3RvbUV4dHJhQ2hpbGRyZW4pIHtcbiAgICAgIGNvbnN0IFtjaGFyYWN0ZXJDb3VudCwgd29yZENvdW50XSA9IGNvdW50U2l6ZUFuZFdvcmRzKHRoaXMucHJvcHMuc3RhdGUudHJlZVZhbHVlKTtcbiAgICAgIGV4dHJhQ2hpbGRyZW4gPSB0aGlzLnByb3BzLmN1c3RvbUV4dHJhQ2hpbGRyZW4oY2hhcmFjdGVyQ291bnQsIHdvcmRDb3VudCk7XG4gICAgfVxuXG4gICAgbGV0IGRyYXdlckNvbnRhaW5lciA9IChcbiAgICAgIDxEcmF3ZXJDb250YWluZXJcbiAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgIHJlZj17dGhpcy5EcmF3ZXJDb250YWluZXJSZWZ9XG4gICAgICAgIGRyYXdlck9wZW49e3RoaXMuc3RhdGUuZHJhd2VyT3Blbn1cbiAgICAgICAgbm9BbmltYXRlPXt0aGlzLnN0YXRlLm5vQW5pbWF0ZX1cbiAgICAgICAgdG9vbGJhckhlaWdodD17dGhpcy5zdGF0ZS50b29sYmFySGVpZ2h0fVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgY29uc3QgRGlzam9pbnRlZEVkaXRvckNvbnRhaW5lciA9IHRoaXMucHJvcHMuRGlzam9pbnRlZEVkaXRvckNvbnRhaW5lciB8fCBcImRpdlwiO1xuICAgIGNvbnN0IEVkaXRvckNvbnRhaW5lciA9IHRoaXMucHJvcHMuRWRpdG9yQ29udGFpbmVyIHx8IERlZmF1bHRFZGl0b3JDb250YWluZXI7XG4gICAgY29uc3QgRGlzam9pbnRlZEVkaXRvciA9IHRoaXMucHJvcHMuRGlzam9pbnRlZEVkaXRvciB8fCBcImRpdlwiO1xuICAgIGNvbnN0IEVkaXRvciA9IHRoaXMucHJvcHMuRWRpdG9yIHx8IFwiZGl2XCI7XG5cbiAgICBjb25zdCBiYXNpY0NsYXNzTmFtZSA9IFwicmljaC10ZXh0IGVkaXRvciBcIiArXG4gICAgICAodGhpcy5wcm9wcy5zdGF0ZS5pc1JpY2hUZXh0ID8gXCJyaWNoLXRleHQtbW9kZVwiIDogXCJwbGFpbi10ZXh0LW1vZGVcIikgK1xuICAgICAgKHRoaXMucHJvcHMuc3RhdGUuZm9jdXNlZCA/IFwiIGZvY3VzZWRcIiA6IFwiXCIpICtcbiAgICAgICh0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRWYWxpZCA/IFwiIHZhbGlkXCIgOiBcIiBpbnZhbGlkXCIpICtcbiAgICAgICh0aGlzLnByb3BzLmRpc2FibGVkID8gXCIgZGlzYWJsZWRcIiA6IFwiIGVuYWJsZWRcIik7XG5cbiAgICBsZXQgYm94OiBSZWFjdC5SZWFjdE5vZGUgPSBudWxsO1xuICAgIGlmICh0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlKSB7XG4gICAgICBib3ggPSAoXG4gICAgICAgIDxEaXNqb2ludGVkRWRpdG9yQ29udGFpbmVyIHJlZj17dGhpcy5lZGl0b3JSZWYgYXMgYW55fSBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckRpc2pvaW50ZWRFZGl0b3JDb250YWluZXJcIj5cbiAgICAgICAgICA8RGlzam9pbnRlZEVkaXRvciBjbGFzc05hbWU9e2Jhc2ljQ2xhc3NOYW1lfT5cbiAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgIDwvRGlzam9pbnRlZEVkaXRvcj5cbiAgICAgICAgICA8ZGl2IGRhdGEtbm90LWVkaXRvcj17dHJ1ZX0gc3R5bGU9e3sgd2lkdGg6IFwiMTAwJVwiIH19PlxuICAgICAgICAgICAge2V4dHJhQ2hpbGRyZW59XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvRGlzam9pbnRlZEVkaXRvckNvbnRhaW5lcj5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJveCA9IChcbiAgICAgICAgPD5cbiAgICAgICAgICA8RWRpdG9yXG4gICAgICAgICAgICByZWY9e3RoaXMuZWRpdG9yUmVmIGFzIGFueX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YmFzaWNDbGFzc05hbWV9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgICAgPC9FZGl0b3I+XG4gICAgICAgICAge2V4dHJhQ2hpbGRyZW59XG4gICAgICAgIDwvPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyB3ZSBoYXZlIHJlYWN0aW9uZXIgc3BlY2lmaWNhdGlvbnNcbiAgICBpZiAodGhpcy5wcm9wcy5CYXNlV3JhcHBlcikge1xuICAgICAgY29uc3QgQmFzZVdyYXBwZXIgPSB0aGlzLnByb3BzLkJhc2VXcmFwcGVyO1xuICAgICAgYm94ID0gKFxuICAgICAgICA8QmFzZVdyYXBwZXJcbiAgICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgICBkcmF3ZXJPcGVuPXt0aGlzLnN0YXRlLmRyYXdlck9wZW59XG4gICAgICAgID5cbiAgICAgICAgICB7Ym94fVxuICAgICAgICA8L0Jhc2VXcmFwcGVyPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5Ub29sYmFyV3JhcHBlcikge1xuICAgICAgY29uc3QgVG9vbGJhcldyYXBwZXIgPSB0aGlzLnByb3BzLlRvb2xiYXJXcmFwcGVyO1xuXG4gICAgICB0b29sYmFyID0gKFxuICAgICAgICA8VG9vbGJhcldyYXBwZXIgey4uLnRoaXMucHJvcHN9IGRyYXdlck9wZW49e3RoaXMuc3RhdGUuZHJhd2VyT3Blbn0+XG4gICAgICAgICAge3Rvb2xiYXJ9XG4gICAgICAgIDwvVG9vbGJhcldyYXBwZXI+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLkRyYXdlcldyYXBwZXIpIHtcbiAgICAgIGNvbnN0IERyYXdlcldyYXBwZXIgPSB0aGlzLnByb3BzLkRyYXdlcldyYXBwZXI7XG5cbiAgICAgIGRyYXdlckNvbnRhaW5lciA9IChcbiAgICAgICAgPERyYXdlcldyYXBwZXIgey4uLnRoaXMucHJvcHN9IGRyYXdlck9wZW49e3RoaXMuc3RhdGUuZHJhd2VyT3Blbn0+XG4gICAgICAgICAge2RyYXdlckNvbnRhaW5lcn1cbiAgICAgICAgPC9EcmF3ZXJXcmFwcGVyPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgdG9SZXR1cm46IFJlYWN0LlJlYWN0Tm9kZTtcblxuICAgIGlmICh0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlKSB7XG4gICAgICB0b1JldHVybiA9IChcbiAgICAgICAgPD5cbiAgICAgICAgICB7dG9vbGJhcn1cbiAgICAgICAgICB7Ym94fVxuICAgICAgICAgIHtkcmF3ZXJDb250YWluZXJ9XG4gICAgICAgICAgey8qIHtmaWxlTG9hZEVycm9yRGlhbG9nVE9ET30gKi99XG4gICAgICAgICAge2ltYWdlSW5wdXR9XG4gICAgICAgICAge2ZpbGVJbnB1dH1cbiAgICAgICAgPC8+XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b1JldHVybiA9IChcbiAgICAgICAgPD5cbiAgICAgICAgICB7dG9vbGJhcn1cbiAgICAgICAgICA8RWRpdG9yQ29udGFpbmVyPlxuICAgICAgICAgICAge2JveH1cbiAgICAgICAgICAgIHtkcmF3ZXJDb250YWluZXJ9XG4gICAgICAgICAgPC9FZGl0b3JDb250YWluZXI+XG4gICAgICAgICAgey8qIHtmaWxlTG9hZEVycm9yRGlhbG9nVE9ET30gKi99XG4gICAgICAgICAge2ltYWdlSW5wdXR9XG4gICAgICAgICAge2ZpbGVJbnB1dH1cbiAgICAgICAgPC8+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLkZpbmFsV3JhcHBlcikge1xuICAgICAgY29uc3QgRmluYWxXcmFwcGVyID0gdGhpcy5wcm9wcy5GaW5hbFdyYXBwZXI7XG5cbiAgICAgIHRvUmV0dXJuID0gKFxuICAgICAgICA8RmluYWxXcmFwcGVyIHsuLi50aGlzLnByb3BzfSBkcmF3ZXJPcGVuPXt0aGlzLnN0YXRlLmRyYXdlck9wZW59PlxuICAgICAgICAgIHt0b1JldHVybn1cbiAgICAgICAgPC9GaW5hbFdyYXBwZXI+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0b1JldHVybjtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3ZXJDb250YWluZXJQcm9wcyBleHRlbmRzIElEZWZhdWx0U2xhdGVXcmFwcGVyUHJvcHMge1xuICBkcmF3ZXJPcGVuOiBib29sZWFuO1xuICB0b29sYmFySGVpZ2h0OiBudW1iZXI7XG4gIG5vQW5pbWF0ZTogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIElEcmF3ZXJDb250YWluZXJTdGF0ZSB7XG4gIGlzUmVhZHk6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlckNvbnRhaW5lckJveFByb3BzIHtcbiAgLyoqXG4gICAqIFRoZSBoZWlnaHQgb2YgdGhlIHRvb2xiYXIgdGhhdFxuICAgKiBpcyBjdXJyZW50bHkgYmVpbmcgb24gdXNlXG4gICAqL1xuICB0b29sYmFySGVpZ2h0OiBudW1iZXI7XG4gIC8qKlxuICAgKiBXaGV0aGVyIGRpc2pvaW50ZWQgbW9kZSBpcyBiZWluZyB1c2VkXG4gICAqL1xuICBkaXNqb2ludGVkTW9kZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIElmIHRoZSBkcmF3ZXIgaXMgYWxyZWFkeSBjb25maXJtZWQgdG8gYmUgb3BlblxuICAgKiBkbyBub3QgcGVyZm9ybSBhbnkgb3BlbiBvciBjbG9zZSBhbmltYXRpb25cbiAgICovXG4gIG5vQW5pbWF0ZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSBjaGlsZHJlbiByZXByZXNlbnQgYWxsIG9mIHdoYXRcbiAgICogdGhlIGRyYXdlciBib3ggY29udGFpbnNcbiAgICovXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBkcmF3ZXIgc2hvdWxkIGJlIG9wZW5cbiAgICogYWNjb3JkaW5nIHRvIGEgdG9vbGJhciBhY3Rpb25cbiAgICovXG4gIGRyYXdlck9wZW46IGJvb2xlYW47XG59XG5cbi8qKlxuICogQSBzcGFjZXIgaXMgYmFzaWNhbGx5IGEgc21hbGwgY2hlcnJ5IG9uIHRvcFxuICogYWRkZWQgdG8gZml0IHRoZSB0b29sYmFyaGVpZ2h0IGFyb3VuZCB0aGUgZHJhd2VyIGNvbnRhaW5lclxuICogaWYgbmVjZXNzYXJ5LCBvbmx5IHVzZWZ1bCBvbiBkaXNqb2ludGVkIG1vZGVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRHJhd2VyU3BhY2VyUHJvcHMge1xuICAvKipcbiAgICogV2hldGhlciBkaXNqb2ludGVkIG1vZGUgaXMgYmVpbmcgdXNlZFxuICAgKi9cbiAgZGlzam9pbnRlZE1vZGU6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSB0b29sYmFyIHRoYXRcbiAgICogaXMgY3VycmVudGx5IGJlaW5nIG9uIHVzZVxuICAgKi9cbiAgdG9vbGJhckhlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3ZXJCb2R5UHJvcHMge1xuICAvKipcbiAgICogV2hldGhlciBkaXNqb2ludGVkIG1vZGUgaXMgYmVpbmcgdXNlZFxuICAgKi9cbiAgZGlzam9pbnRlZE1vZGU6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSB0b29sYmFyIHRoYXRcbiAgICogaXMgY3VycmVudGx5IGJlaW5nIG9uIHVzZVxuICAgKi9cbiAgdG9vbGJhckhlaWdodDogbnVtYmVyO1xuICAvKipcbiAgICogVGhlIGNvbnRlbnQgb2YgdGhlIGRyYXdlciBpdHNlbGZcbiAgICovXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBkcmF3ZXIgaXMgb3BlbiBvciBub3RcbiAgICovXG4gIGRyYXdlck9wZW46IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIERyYXdlckNvbnRhaW5lckJveENvbXBvbmVudCA9IFJlYWN0LkNvbXBvbmVudFR5cGU8SURyYXdlckNvbnRhaW5lckJveFByb3BzPjtcbmV4cG9ydCB0eXBlIERyYXdlclNwYWNlckNvbXBvbmVudCA9IFJlYWN0LkNvbXBvbmVudFR5cGU8SURyYXdlclNwYWNlclByb3BzPjtcbmV4cG9ydCB0eXBlIERyYXdlckJvZHlDb21wb25lbnQgPSBSZWFjdC5Db21wb25lbnRUeXBlPElEcmF3ZXJCb2R5UHJvcHM+O1xuXG5jb25zdCBEZWZhdWx0RHJhd2VyQm9keSA9IFJlYWN0LmZvcndhcmRSZWYoKHByb3BzOiBJRHJhd2VyQm9keVByb3BzLCByZWY6IFJlYWN0LkZvcndhcmRlZFJlZjxIVE1MRWxlbWVudD4pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IHJlZj17cmVmIGFzIGFueX0gY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JEcmF3ZXJCb2R5XCI+XG4gICAgICB7cHJvcHMuZHJhd2VyT3BlbiA/IHByb3BzLmNoaWxkcmVuIDogbnVsbH1cbiAgICA8L2Rpdj5cbiAgKTtcbn0pXG5cbmZ1bmN0aW9uIERlZmF1bHREcmF3ZXJTcGFjZXIocHJvcHM6IElEcmF3ZXJTcGFjZXJQcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yRHJhd2VyQXBwYmFyU3BhY2VyXCJcbiAgICAgIHN0eWxlPXt7IGhlaWdodDogcHJvcHMudG9vbGJhckhlaWdodCwgZmxleDogXCIwIDAgXCIgKyBwcm9wcy50b29sYmFySGVpZ2h0ICsgXCJweFwiIH19XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gRGVmYXVsdERyYXdlckNvbnRhaW5lckJveChwcm9wczogSURyYXdlckNvbnRhaW5lckJveFByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtcbiAgICAgICAgKHByb3BzLmRyYXdlck9wZW4gPyBcIm9wZW4gXCIgOiBcIlwiKSArXG4gICAgICAgIChwcm9wcy5kaXNqb2ludGVkTW9kZSA/IFwic2xhdGVFZGl0b3JEcmF3ZXJGaXhlZFwiIDogXCJzbGF0ZUVkaXRvckRyYXdlclwiKSArXG4gICAgICAgIChwcm9wcy5ub0FuaW1hdGUgPyBcIiBzbGF0ZUVkaXRvckRyYXdlck5vQW5pbWF0ZVwiIDogXCJcIilcbiAgICAgIH1cbiAgICA+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmNsYXNzIERyYXdlckNvbnRhaW5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJRHJhd2VyQ29udGFpbmVyUHJvcHMsIElEcmF3ZXJDb250YWluZXJTdGF0ZT4ge1xuICBwcml2YXRlIGVkaXRvckRyYXdlckJvZHlSZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD47XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJRHJhd2VyQ29udGFpbmVyUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaXNSZWFkeTogZmFsc2UsXG4gICAgfVxuXG4gICAgdGhpcy5lZGl0b3JEcmF3ZXJCb2R5UmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gIH1cbiAgcHVibGljIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNSZWFkeTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuICBwdWJsaWMgZ2V0RHJhd2VyQm9keSgpIHtcbiAgICByZXR1cm4gdGhpcy5lZGl0b3JEcmF3ZXJCb2R5UmVmLmN1cnJlbnQ7XG4gIH1cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZSAmJiAhdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBEcmF3ZXJDb250YWluZXJCb3ggPSB0aGlzLnByb3BzLkRyYXdlckNvbnRhaW5lckJveCB8fCBEZWZhdWx0RHJhd2VyQ29udGFpbmVyQm94O1xuICAgIGNvbnN0IERyYXdlclNwYWNlciA9IHRoaXMucHJvcHMuRHJhd2VyU3BhY2VyIHx8IERlZmF1bHREcmF3ZXJTcGFjZXI7XG4gICAgY29uc3QgRHJhd2VyQm9keSA9IHRoaXMucHJvcHMuRHJhd2VyQm9keSB8fCBEZWZhdWx0RHJhd2VyQm9keTtcblxuICAgIGNvbnN0IHRvUmV0dXJuID0gKFxuICAgICAgPERyYXdlckNvbnRhaW5lckJveFxuICAgICAgICBkaXNqb2ludGVkTW9kZT17dGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAgICAgZHJhd2VyT3Blbj17dGhpcy5wcm9wcy5kcmF3ZXJPcGVufVxuICAgICAgICBub0FuaW1hdGU9e3RoaXMucHJvcHMubm9BbmltYXRlfVxuICAgICAgICB0b29sYmFySGVpZ2h0PXt0aGlzLnByb3BzLnRvb2xiYXJIZWlnaHR9XG4gICAgICA+XG4gICAgICAgIHtcbiAgICAgICAgICB0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlICYmIHRoaXMucHJvcHMuZHJhd2VyT3BlbiA/XG4gICAgICAgICAgICA8RHJhd2VyU3BhY2VyXG4gICAgICAgICAgICAgIGRpc2pvaW50ZWRNb2RlPXt0aGlzLnByb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgICAgICAgICAgICB0b29sYmFySGVpZ2h0PXt0aGlzLnByb3BzLnRvb2xiYXJIZWlnaHR9XG4gICAgICAgICAgICAvPiA6XG4gICAgICAgICAgICBudWxsXG4gICAgICAgIH1cbiAgICAgICAgPERyYXdlckJvZHlcbiAgICAgICAgICByZWY9e3RoaXMuZWRpdG9yRHJhd2VyQm9keVJlZn1cbiAgICAgICAgICBkaXNqb2ludGVkTW9kZT17dGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAgICAgICB0b29sYmFySGVpZ2h0PXt0aGlzLnByb3BzLnRvb2xiYXJIZWlnaHR9XG4gICAgICAgICAgZHJhd2VyT3Blbj17dGhpcy5wcm9wcy5kcmF3ZXJPcGVufVxuICAgICAgICA+XG4gICAgICAgICAgPFdyYXBwZXJEcmF3ZXIgey4uLnRoaXMucHJvcHN9IC8+XG4gICAgICAgIDwvRHJhd2VyQm9keT5cbiAgICAgIDwvRHJhd2VyQ29udGFpbmVyQm94PlxuICAgICk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZSkge1xuICAgICAgaWYgKHRoaXMuc3RhdGUuaXNSZWFkeSkge1xuICAgICAgICByZXR1cm4gUmVhY3RET00uY3JlYXRlUG9ydGFsKHRvUmV0dXJuLCBkb2N1bWVudC5ib2R5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdG9SZXR1cm47XG4gICAgfVxuICB9XG59XG4iLCAiLyoqXG4gKiBUaGlzIGZpbGUgcHJvdmlkZXMgdGhlIGRyYXdlciBjb250ZW50IHRoYXQgZXhpc3RzIHNpZGUgdG8gdGhlIHJpY2ggdGV4dCBlZGl0b3JcbiAqIHdoZW4gaXQgaXMgYWxsb3dlZCB0byBob2xkIGEgZHJhd2VyLCB0aGUgZHJhd2VyIGNvbnRhaW5zIGEgcmFuZ2Ugb2Ygb3B0aW9ucyB0byBlbmFibGVcbiAqIHRlbXBsYXRpbmcgb3IgY3VzdG9tIHN0eWxpbmdcbiAqIEBtb2R1bGVcbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IElEcmF3ZXJDb250YWluZXJQcm9wcyB9IGZyb20gXCIuLi93cmFwcGVyXCI7XG5pbXBvcnQgeyBJTm9kZUluZm8sIGdldEluZm9Gb3IgfSBmcm9tIFwiLi4vLi5cIjtcbmltcG9ydCB7IEdlbmVyYWxPcHRpb25zIH0gZnJvbSBcIi4vZ2VuZXJhbFwiO1xuaW1wb3J0IHsgU3R5bGVzT3B0aW9ucyB9IGZyb20gXCIuL3N0eWxlc1wiO1xuaW1wb3J0IHsgQWN0aW9uc09wdGlvbnMgfSBmcm9tIFwiLi9hY3Rpb25zXCI7XG5pbXBvcnQgeyBUZW1wbGF0aW5nT3B0aW9ucyB9IGZyb20gXCIuL3RlbXBsYXRpbmdcIjtcblxuXG5leHBvcnQgaW50ZXJmYWNlIElXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlUHJvcHMge1xuICBpbmZvOiBJTm9kZUluZm87XG4gIGVudGlyZVBhdGg6IEFycmF5PHsgaW5mbzogSU5vZGVJbmZvOyBwYXRoOiBzdHJpbmdbXSB9PjtcbiAgaXNDdXJyZW50OiBib29sZWFuO1xuICBpbmRleDogbnVtYmVyO1xuICBvblNlbGVjdDogKCkgPT4gdm9pZDtcbn1cblxuZnVuY3Rpb24gRGVmYXVsdFdyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGUocHJvcHM6IElXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlUHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8aDY+XG4gICAgICB7XG4gICAgICAgIHByb3BzLmluZm8uaXNJbnRlcmFjdGl2ZSA/IChcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVJY29uUnRsT25seVwiPntTdHJpbmcuZnJvbUNoYXJDb2RlKDkwOTQpfTwvc3Bhbj5cbiAgICAgICAgKSA6IG51bGxcbiAgICAgIH1cbiAgICAgIDxzcGFuXG4gICAgICAgIGNsYXNzTmFtZT17cHJvcHMuaXNDdXJyZW50ID8gXCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVTZWxlY3RlZFwiIDogXCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVcIn1cbiAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgIGFyaWEtY3VycmVudD17cHJvcHMuaXNDdXJyZW50fVxuICAgICAgICBvbkNsaWNrPXtwcm9wcy5vblNlbGVjdH1cbiAgICAgID5cbiAgICAgICAge3Byb3BzLmluZm8ubmFtZX1cbiAgICAgIDwvc3Bhbj5cbiAgICAgIHtcbiAgICAgICAgcHJvcHMuaW5mby5pc0ludGVyYWN0aXZlID8gKFxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZUljb25MdHJPbmx5XCI+e1N0cmluZy5mcm9tQ2hhckNvZGUoOTA5NCl9PC9zcGFuPlxuICAgICAgICApIDogbnVsbFxuICAgICAgfVxuICAgICAge1xuICAgICAgICBwcm9wcy5pc0N1cnJlbnQgPyBudWxsIDogKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVJY29uTHRyT25seVwiPntTdHJpbmcuZnJvbUNoYXJDb2RlKDExMTA2KX08L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVJY29uUnRsT25seVwiPntTdHJpbmcuZnJvbUNoYXJDb2RlKDExMTA2KX08L3NwYW4+XG4gICAgICAgICAgPC8+XG4gICAgICAgIClcbiAgICAgIH1cbiAgICA8L2g2PlxuICApXG59XG5cbmZ1bmN0aW9uIERlZmF1bHRXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlV3JhcHBlcihwcm9wczogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVdyYXBwZXJcIj5cbiAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxudHlwZSBJT3B0aW9uVHlwZSA9IFwiTUFJTlwiIHwgXCJTVFlMRVNcIiB8IFwiQUNUSU9OU1wiIHwgXCJURU1QTEFUSU5HXCI7XG50eXBlIFNldE9wdGlvblR5cGVGbiA9ICh2OiBJT3B0aW9uVHlwZSkgPT4gdm9pZDtcblxuZXhwb3J0IGludGVyZmFjZSBJV3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXJQcm9wcyB7XG4gIGFjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbjogSU9wdGlvblR5cGU7XG4gIHNlbGVjdGVkT3B0aW9uOiBJT3B0aW9uVHlwZTtcbiAgc2V0U2VsZWN0ZWRPcHRpb246IFNldE9wdGlvblR5cGVGbjtcbiAgc2V0QWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uOiBTZXRPcHRpb25UeXBlRm47XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVdyYXBwZXJEcmF3ZXJUYWJzUHJvcHMge1xuICBhY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb246IElPcHRpb25UeXBlO1xuICBzZWxlY3RlZE9wdGlvbjogSU9wdGlvblR5cGU7XG4gIHNldFNlbGVjdGVkT3B0aW9uOiBTZXRPcHRpb25UeXBlRm47XG4gIHNldEFjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbjogU2V0T3B0aW9uVHlwZUZuO1xuICBvcHRpb25zOiBBcnJheTx7IGlkOiBzdHJpbmc7IGxhYmVsOiBzdHJpbmc7IH0+XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBEZWZhdWx0V3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXIocHJvcHM6IElXcmFwcGVyRHJhd2VySW5mb1BhbmVsV3JhcHBlclByb3BzKSB7XG4gIHJldHVybiBwcm9wcy5jaGlsZHJlbiBhcyBhbnk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBEZWZhdWx0V3JhcHBlckRyYXdlclRhYnMocHJvcHM6IElXcmFwcGVyRHJhd2VyVGFic1Byb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJUYWJzXCI+XG4gICAgICB7cHJvcHMub3B0aW9ucy5tYXAoKHYpID0+IChcbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e3Byb3BzLnNldFNlbGVjdGVkT3B0aW9uLmJpbmQobnVsbCwgdi5pZCl9XG4gICAgICAgICAga2V5PXt2LmlkfVxuICAgICAgICAgIGNsYXNzTmFtZT17cHJvcHMuc2VsZWN0ZWRPcHRpb24gPT09IHYuaWQgPyBcInNsYXRlRWRpdG9yV3JhcHBlckRyYXdlclRhYlNlbGVjdGVkXCIgOiBcInNsYXRlRWRpdG9yV3JhcHBlckRyYXdlclRhYlwifVxuICAgICAgICA+XG4gICAgICAgICAge3YubGFiZWx9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgKSl9XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgd3JhcHBlciBkcmF3ZXIgaXRzZWxmXG4gKiBAcGFyYW0gcHJvcHMgaXQgdGFrZXMgdGhlIGVudGlyZSB3cmFwcGVyIHByb3BzIHdpdGggdGhlIHN0eWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gV3JhcHBlckRyYXdlcihwcm9wczogSURyYXdlckNvbnRhaW5lclByb3BzKSB7XG4gIC8vIHdlIGdyYWIgdGhpcyBmcm9tIGxvY2FsIHN0b3JhZ2UsIHRoaXMgd29uJ3QgYWZmZWN0IFNTUiBiZWNhdXNlIHRoZSBkcmF3ZXIgd29uJ3RcbiAgLy8gZXZlciByZW5kZXIgaW4gdGhlIHNlcnZlciBzaWRlLCBpdCdzIGNsaWVudCBzaWRlIG9ubHksIGl0J3MgYWx3YXlzIHRlY2huaWNhbGx5IGNsb3NlZFxuICAvLyBvbiB0aGUgc2VydmVyIHNpZGVcbiAgY29uc3QgW2xvY2F0aW9uLCBzZXRMb2NhdGlvbl0gPSB1c2VTdGF0ZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlNMQVRFX0RSQVdFUl9MQVNUX0xPQ0FUSU9OXCIpIHx8IFwiTUFJTlwiIGFzIElPcHRpb25UeXBlKTtcbiAgY29uc3QgW2FjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbiwgdXNlQWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uXSA9IHVzZVN0YXRlKG51bGwgYXMgSU9wdGlvblR5cGUpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFwcm9wcy5kcmF3ZXJPcGVuKSB7XG4gICAgICB1c2VBY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb24obnVsbCk7XG4gICAgfVxuICB9LCBbcHJvcHMuZHJhd2VyT3Blbl0pO1xuXG4gIC8vIHVwZGF0ZSB0aGUgZ2l2ZW4gbG9jYXRpb25cbiAgY29uc3Qgc2V0TG9jYXRpb25DYWxsYmFjayA9IHVzZUNhbGxiYWNrKCh2YWx1ZTogSU9wdGlvblR5cGUpID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlNMQVRFX0RSQVdFUl9MQVNUX0xPQ0FUSU9OXCIsIHZhbHVlKTtcbiAgICB1c2VBY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb24odmFsdWUpO1xuICAgIHNldExvY2F0aW9uKHZhbHVlKTtcbiAgfSwgW10pO1xuXG4gIC8vIG5vdyB3ZSBuZWVkIHRvIGJ1aWxkIHRoZSBzZXR0aW5nc1xuICBsZXQgc2V0dGluZ3NGb3JOb2RlOiBSZWFjdC5SZWFjdE5vZGUgPSBudWxsO1xuICBsZXQgdGl0bGVGb3JOb2RlOiBSZWFjdC5SZWFjdE5vZGUgPSBudWxsO1xuXG4gIC8vIGFuZCB0aGF0J3MgZG9uZSBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgbm9kZVxuICBpZiAocHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCkge1xuICAgIC8vIGFuZCBhY2NvcmRpbmcgdG8gdGhhdCBkZWNpZGUgd2hpY2ggcGFuZWwgdG8gcmVuZGVyXG4gICAgbGV0IGluZm9QYW5lbDogUmVhY3QuUmVhY3ROb2RlID0gbnVsbDtcbiAgICBzd2l0Y2ggKGxvY2F0aW9uKSB7XG4gICAgICBjYXNlIFwiTUFJTlwiOlxuICAgICAgICBpbmZvUGFuZWwgPSA8R2VuZXJhbE9wdGlvbnMgey4uLnByb3BzfSAvPjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiU1RZTEVTXCI6XG4gICAgICAgIGluZm9QYW5lbCA9IDxTdHlsZXNPcHRpb25zIHsuLi5wcm9wc30gLz47XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkFDVElPTlNcIjpcbiAgICAgICAgaW5mb1BhbmVsID0gPEFjdGlvbnNPcHRpb25zIHsuLi5wcm9wc30gLz47XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIlRFTVBMQVRJTkdcIjpcbiAgICAgICAgaW5mb1BhbmVsID0gPFRlbXBsYXRpbmdPcHRpb25zIHsuLi5wcm9wc30gLz47XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZUluZm8gPSBnZXRJbmZvRm9yKFxuICAgICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCxcbiAgICAgIHByb3BzLmJhc2VJMThuLFxuICAgICk7XG5cbiAgICBjb25zdCBwb3RlbnRpYWxCbG9ja1BhcmVudCA9IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQgPT09IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQgP1xuICAgICAgZ2V0SW5mb0ZvcihcbiAgICAgICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50LFxuICAgICAgICBwcm9wcy5iYXNlSTE4bixcbiAgICAgICkgOiBudWxsO1xuXG4gICAgY29uc3Qgc3VwZXJCbG9ja1BhdGhzID0gKHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyB8fCBbXSkuZmlsdGVyKChlKSA9PiBlICE9PSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50KS5tYXAoKHYsIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbmZvOiBnZXRJbmZvRm9yKHYsIHByb3BzLmJhc2VJMThuKSxcbiAgICAgICAgcGF0aDogcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW2luZGV4XSxcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGVudGlyZVBhdGggPSBzdXBlckJsb2NrUGF0aHM7XG5cbiAgICBpZiAocG90ZW50aWFsQmxvY2tQYXJlbnQpIHtcbiAgICAgIGVudGlyZVBhdGgucHVzaCh7XG4gICAgICAgIGluZm86IHBvdGVudGlhbEJsb2NrUGFyZW50LFxuICAgICAgICBwYXRoOiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBlbnRpcmVQYXRoLnB1c2goe1xuICAgICAgaW5mbzogc2VsZWN0ZWROb2RlSW5mbyxcbiAgICAgIHBhdGg6IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgfSk7XG5cbiAgICBjb25zdCBXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlID0gcHJvcHMuV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZSB8fCBEZWZhdWx0V3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZTtcblxuICAgIHRpdGxlRm9yTm9kZSA9IGVudGlyZVBhdGgubWFwKCh2LCBpKSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8V3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVxuICAgICAgICAgIGVudGlyZVBhdGg9e2VudGlyZVBhdGggYXMgYW55fVxuICAgICAgICAgIGluZm89e3YuaW5mb31cbiAgICAgICAgICBpc0N1cnJlbnQ9e2kgPT09IGVudGlyZVBhdGgubGVuZ3RoIC0gMX1cbiAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgaW5kZXg9e2l9XG4gICAgICAgICAgb25TZWxlY3Q9e2kgPT09IGVudGlyZVBhdGgubGVuZ3RoIC0gMSA/IG51bGwgOiBwcm9wcy5oZWxwZXJzLnNlbGVjdFBhdGguYmluZChudWxsLCB2LnBhdGgpfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IFdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyID0gcHJvcHMuV3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXIgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyO1xuXG4gICAgY29uc3QgV3JhcHBlckRyYXdlclRhYnMgPSBwcm9wcy5XcmFwcGVyRHJhd2VyVGFicyB8fCBEZWZhdWx0V3JhcHBlckRyYXdlclRhYnM7XG5cbiAgICAvLyBhbmQgbm93IHdlIGNhbiBidWlsZCB0aGVzZSBzZXR0aW5nc1xuICAgIC8vIGJhc2ljYWxseSBoZXJlIHdlIGFyZSBidWlsZGluZyB0aGUgZGl2aWRlciBhbmQgdGhlblxuICAgIC8vIGFkZGluZyB0aGUgcGFuZWwsIHdoZXJlIHRoZSB0YWJzIGFsbG93IHVzIHRvIHN3aXRjaFxuICAgIC8vIGZyb20gZWFjaCBwYW5lbFxuICAgIHNldHRpbmdzRm9yTm9kZSA9IChcbiAgICAgIDw+XG4gICAgICAgIHtcbiAgICAgICAgICAhc2VsZWN0ZWROb2RlSW5mby5pc1RleHQgP1xuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICA8V3JhcHBlckRyYXdlclRhYnNcbiAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb249e2FjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbiBhcyBhbnl9XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb249e2xvY2F0aW9uIGFzIGFueX1cbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZE9wdGlvbj17c2V0TG9jYXRpb25DYWxsYmFja31cbiAgICAgICAgICAgICAgICBzZXRBY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb249e3VzZUFjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbn1cbiAgICAgICAgICAgICAgICBvcHRpb25zPXtbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBcIk1BSU5cIixcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHByb3BzLmJhc2VJMThuLnNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzQ3VzdG9tU3R5bGVzIHx8IHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzUmljaENsYXNzZXMgPyAoXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZDogXCJTVFlMRVNcIixcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogcHJvcHMuYmFzZUkxOG4uc3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgIHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGVtcGxhdGluZyA/IChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGlkOiBcIlRFTVBMQVRJTkdcIixcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogcHJvcHMuYmFzZUkxOG4udGVtcGxhdGluZyxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmcgPyAoXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZDogXCJBQ1RJT05TXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHByb3BzLmJhc2VJMThuLmFjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgIF0uZmlsdGVyKCh2KSA9PiAhIXYpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IG51bGxcbiAgICAgICAgfVxuICAgICAgICA8V3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXJcbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb249e2FjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbiBhcyBhbnl9XG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb249e2xvY2F0aW9uIGFzIGFueX1cbiAgICAgICAgICBzZXRTZWxlY3RlZE9wdGlvbj17c2V0TG9jYXRpb25DYWxsYmFja31cbiAgICAgICAgICBzZXRBY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb249e3VzZUFjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbn1cbiAgICAgICAgPlxuICAgICAgICAgIHtpbmZvUGFuZWx9XG4gICAgICAgIDwvV3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXI+XG4gICAgICA8Lz5cbiAgICApO1xuICB9XG5cbiAgY29uc3QgV3JhcHBlckZvclRpdGxlID0gcHJvcHMuV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVdyYXBwZXIgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVXcmFwcGVyO1xuXG4gIC8vIG5vdyB3ZSByZXR1cm5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPFdyYXBwZXJGb3JUaXRsZT5cbiAgICAgICAge3RpdGxlRm9yTm9kZX1cbiAgICAgIDwvV3JhcHBlckZvclRpdGxlPlxuICAgICAge3NldHRpbmdzRm9yTm9kZX1cbiAgICAgIHtwcm9wcy5kcmF3ZXJFeHRyYUNoaWxkcmVufVxuICAgIDwvPlxuICApO1xufVxuIiwgIi8qKlxuICogR2l2ZXMgdGhlIGdlbmVyYWwgb3B0aW9ucyBmb3IgdGhlIGN1cnJlbnQgc2VsZWN0ZWQgY29tcG9uZW50LCBnZW5lcmFsIG9wdGlvbnNcbiAqIGRlcGVuZCBvbiB0aGUgcmljaCBlbGVtZW50IHRoYXQgaXMgY3VycmVudGx5IGNob3NlbiwgaXQgYWxzbyBwcm92aWRlcyBhIGRlbGV0ZVxuICogb3B0aW9uIHRvIGRlbGV0ZSB0aGUgbm9kZVxuICogQG1vZHVsZVxuICovXG5cbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJRHJhd2VyQ29udGFpbmVyUHJvcHMgfSBmcm9tIFwiLi4vd3JhcHBlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gRGVmYXVsdFdyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlcihwcm9wczogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yV3JhcHBlckRyYXdlckludGVybmFsUGFuZWxXcmFwcGVyXCI+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJV3JhcHBlckRyYXdlclRleHRGaWVsZFByb3BzIHtcbiAgdmFsdWU6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgb25DaGFuZ2VCeUV2ZW50OiAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHZvaWQ7XG4gIG9uQ2hhbmdlQnlWYWx1ZTogKHY6IHN0cmluZykgPT4gdm9pZDtcbiAgaWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkUHJvcHMge1xuICB2YWx1ZTogc3RyaW5nO1xuICBsYWJlbDogc3RyaW5nO1xuICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICBvbkNoYW5nZUJ5RXZlbnQ6IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHZvaWQ7XG4gIG9uQ2hhbmdlQnlWYWx1ZTogKHY6IHN0cmluZykgPT4gdm9pZDtcbiAgaWQ6IHN0cmluZztcbiAgb3B0aW9uczogQXJyYXk8eyB2YWx1ZTogc3RyaW5nIDsgbGFiZWw6IHN0cmluZyB8IFJlYWN0LlJlYWN0Tm9kZTsgcHJpbWFyeT86IGJvb2xlYW4gfT47XG4gIHVuYmx1cjogKCkgPT4gdm9pZDtcbiAgcmVzZXRCbHVyOiAoKSA9PiB2b2lkO1xuICBkaXNwbGF5RW1wdHk/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElXcmFwcGVyRHJhd2VyTXVsdGlTZWxlY3RGaWVsZFByb3BzIHtcbiAgdmFsdWVzOiBzdHJpbmdbXTtcbiAgbGFiZWw6IHN0cmluZztcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICBvbkNoYW5nZTogKHY6IHN0cmluZ1tdKSA9PiB2b2lkO1xuICBpZDogc3RyaW5nO1xuICBvcHRpb25zOiBBcnJheTx7IHZhbHVlOiBzdHJpbmc7IGxhYmVsOiBzdHJpbmcgfCBSZWFjdC5SZWFjdE5vZGU7IHByaW1hcnk/OiBib29sZWFuICB9PjtcbiAgdW5ibHVyOiAoKSA9PiB2b2lkO1xuICByZXNldEJsdXI6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVdyYXBwZXJEcmF3ZXJDaGVja0JveFByb3BzIHtcbiAgdmFsdWU6IGJvb2xlYW47XG4gIGxhYmVsOiBzdHJpbmc7XG4gIG9uQ2hhbmdlOiAodjogYm9vbGVhbikgPT4gdm9pZDtcbiAgaWQ6IHN0cmluZztcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRGVmYXVsdFdyYXBwZXJEcmF3ZXJUZXh0RmllbGQocHJvcHM6IElXcmFwcGVyRHJhd2VyVGV4dEZpZWxkUHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yV3JhcHBlckRyYXdlclRleHRGaWVsZFwiPlxuICAgICAgPGxhYmVsPntwcm9wcy5sYWJlbH08L2xhYmVsPlxuICAgICAgPGlucHV0XG4gICAgICAgIHZhbHVlPXtwcm9wcy52YWx1ZX1cbiAgICAgICAgcGxhY2Vob2xkZXI9e3Byb3BzLnBsYWNlaG9sZGVyIHx8IHByb3BzLmxhYmVsfVxuICAgICAgICBvbkNoYW5nZT17cHJvcHMub25DaGFuZ2VCeUV2ZW50fVxuICAgICAgICBkaXNhYmxlZD17cHJvcHMuZGlzYWJsZWR9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBEZWZhdWx0V3JhcHBlckRyYXdlclNlbGVjdEZpZWxkKHByb3BzOiBJV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkUHJvcHMpIHtcbiAgLy8gZHVlIHRvIGNvbnRyYWlucyBvZiB0aGUgbmF0aXZlIEhUTUwgc2VsZWN0XG4gIC8vIHRoZSBsYWJlbCBjYW5ub3QgYmUgdXNlZCBpbiBvcHRpb24gdmFsdWVzIHdoZXJlIGFuIGh0bWwgaGFzIGJlZW4gZ2l2ZW5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkXCI+XG4gICAgICA8bGFiZWw+e3Byb3BzLmxhYmVsfTwvbGFiZWw+XG4gICAgICA8c2VsZWN0XG4gICAgICAgIHZhbHVlPXtwcm9wcy52YWx1ZX1cbiAgICAgICAgb25DaGFuZ2U9e3Byb3BzLm9uQ2hhbmdlQnlFdmVudH1cbiAgICAgICAgZGlzYWJsZWQ9e3Byb3BzLmRpc2FibGVkfVxuICAgICAgICBwbGFjZWhvbGRlcj17cHJvcHMucGxhY2Vob2xkZXJ9XG4gICAgICA+XG4gICAgICAgIHtwcm9wcy5vcHRpb25zLm1hcChvcHRpb24gPT4gKFxuICAgICAgICAgIDxvcHRpb24ga2V5PXtvcHRpb24udmFsdWV9IHZhbHVlPXtvcHRpb24udmFsdWV9PlxuICAgICAgICAgICAge3R5cGVvZiBvcHRpb24ubGFiZWwgPT09IFwic3RyaW5nXCIgPyBvcHRpb24ubGFiZWwgOiBvcHRpb24udmFsdWV9XG4gICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICkpfVxuICAgICAgPC9zZWxlY3Q+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBEZWZhdWx0V3JhcHBlckRyYXdlck11bHRpU2VsZWN0RmllbGQocHJvcHM6IElXcmFwcGVyRHJhd2VyTXVsdGlTZWxlY3RGaWVsZFByb3BzKSB7XG4gIGNvbnN0IGhhbmRsZVNlbGVjdENoYW5nZSA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZE9wdGlvbnMgPSBBcnJheS5mcm9tKGUudGFyZ2V0LnNlbGVjdGVkT3B0aW9ucywgb3B0aW9uID0+IG9wdGlvbi52YWx1ZSk7XG4gICAgcHJvcHMub25DaGFuZ2Uoc2VsZWN0ZWRPcHRpb25zKTtcbiAgfSwgW10pO1xuXG4gIC8vIGR1ZSB0byBjb250cmFpbnMgb2YgdGhlIG5hdGl2ZSBIVE1MIHNlbGVjdFxuICAvLyB0aGUgbGFiZWwgY2Fubm90IGJlIHVzZWQgaW4gb3B0aW9uIHZhbHVlcyB3aGVyZSBhbiBodG1sIGhhcyBiZWVuIGdpdmVuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJNdWx0aVNlbGVjdEZpZWxkXCI+XG4gICAgICA8bGFiZWw+e3Byb3BzLmxhYmVsfTwvbGFiZWw+XG4gICAgICA8c2VsZWN0XG4gICAgICAgIG11bHRpcGxlPXt0cnVlfVxuICAgICAgICB2YWx1ZT17cHJvcHMudmFsdWVzfVxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlU2VsZWN0Q2hhbmdlfVxuICAgICAgICBkaXNhYmxlZD17cHJvcHMuZGlzYWJsZWR9XG4gICAgICA+XG4gICAgICAgIHtwcm9wcy5vcHRpb25zLm1hcChvcHRpb24gPT4gKFxuICAgICAgICAgIDxvcHRpb24ga2V5PXtvcHRpb24udmFsdWV9IHZhbHVlPXtvcHRpb24udmFsdWV9PlxuICAgICAgICAgICAge3R5cGVvZiBvcHRpb24ubGFiZWwgPT09IFwic3RyaW5nXCIgPyBvcHRpb24ubGFiZWwgOiBvcHRpb24udmFsdWV9XG4gICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICkpfVxuICAgICAgPC9zZWxlY3Q+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBEZWZhdWx0V3JhcHBlckRyYXdlckNoZWNrQm94RmllbGQocHJvcHM6IElXcmFwcGVyRHJhd2VyQ2hlY2tCb3hQcm9wcykge1xuICBjb25zdCBoYW5kbGVDaGFuZ2UgPSAoZXZlbnQ6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgbmV3VmFsdWUgPSBldmVudC50YXJnZXQuY2hlY2tlZDtcbiAgICBwcm9wcy5vbkNoYW5nZShuZXdWYWx1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yV3JhcHBlckRyYXdlckNoZWNrQm94RmllbGRcIj5cbiAgICAgIDxpbnB1dFxuICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICBjaGVja2VkPXtwcm9wcy52YWx1ZX1cbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgZGlzYWJsZWQ9e3Byb3BzLmRpc2FibGVkfVxuICAgICAgLz5cbiAgICAgIDxsYWJlbD57cHJvcHMubGFiZWx9PC9sYWJlbD5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuLyoqXG4gKiBQcm92aWRlcyB0aGUgZHJhd2VyIHNlY3Rpb24gd2l0aCBhbGwgdGhlIGdlbmVyYWwgb3B0aW9ucyBvZiBhIGdpdmVuIGNvbXBvbmVudFxuICogdGhlc2UgZ2VuZXJhbCBvcHRpb25zIGFyZSB0aGUgc3BlY2lmaWMgb3B0aW9ucyBmb3IgdGhlIGdlbmVyaWMgY29tcG9uZW50c1xuICogQHBhcmFtIHByb3BzIGFsbCB0aGUgZW50aXJlIHdyYXBwZXIgcHJvcHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEdlbmVyYWxPcHRpb25zKHByb3BzOiBJRHJhd2VyQ29udGFpbmVyUHJvcHMpIHtcbiAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gdXNlU3RhdGUoKHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQgJiYgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudC5naXZlbk5hbWUpIHx8IFwiXCIpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0TmFtZSgocHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCAmJiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50LmdpdmVuTmFtZSkgfHwgXCJcIik7XG4gIH0sIFtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50XSk7XG5cbiAgY29uc3QgbGFzdFVwZGF0ZVJlZiA9IHVzZVJlZjxhbnk+KCk7XG5cbiAgY29uc3QgdXBkYXRlTmFtZUIgPSB1c2VDYWxsYmFjaygodjogc3RyaW5nKSA9PiB7XG4gICAgc2V0TmFtZSh2KTtcbiAgICBjbGVhclRpbWVvdXQobGFzdFVwZGF0ZVJlZi5jdXJyZW50KTtcbiAgICBsYXN0VXBkYXRlUmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHByb3BzLmhlbHBlcnMuc2V0KHtcbiAgICAgICAgZ2l2ZW5OYW1lOiB2LFxuICAgICAgfSwgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcik7XG4gICAgfSwgNjAwKTtcbiAgfSwgW3Byb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRdKTtcblxuICBjb25zdCB1cGRhdGVOYW1lID0gdXNlQ2FsbGJhY2soKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgdXBkYXRlTmFtZUIoZS50YXJnZXQudmFsdWUpO1xuICB9LCBbdXBkYXRlTmFtZUJdKTtcblxuICBpZiAoIXByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IFdyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlciA9IHByb3BzLldyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlciB8fCBEZWZhdWx0V3JhcHBlckRyYXdlckludGVybmFsUGFuZWxXcmFwcGVyO1xuICBjb25zdCBXcmFwcGVyRHJhd2VyVGV4dEZpZWxkID0gcHJvcHMuV3JhcHBlckRyYXdlclRleHRGaWVsZCB8fCBEZWZhdWx0V3JhcHBlckRyYXdlclRleHRGaWVsZDtcblxuICAvLyBhbmQgcmV0dXJuXG4gIHJldHVybiAoXG4gICAgPFdyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlcj5cbiAgICAgIDxXcmFwcGVyRHJhd2VyVGV4dEZpZWxkXG4gICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICBsYWJlbD17cHJvcHMuYmFzZUkxOG4ubmFtZX1cbiAgICAgICAgb25DaGFuZ2VCeUV2ZW50PXt1cGRhdGVOYW1lfVxuICAgICAgICBvbkNoYW5nZUJ5VmFsdWU9e3VwZGF0ZU5hbWVCfVxuICAgICAgICBpZD1cIm5hbWVcIlxuICAgICAgLz5cbiAgICAgIHtcbiAgICAgICAgcHJvcHMuZHJhd2VyRXh0cmFzID8gKFxuICAgICAgICAgIHByb3BzLmRyYXdlckV4dHJhcy5tYXAoKHYsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IEVsZW1lbnQgPSB2LkNvbXBvbmVudCBhcyBhbnk7XG4gICAgICAgICAgICByZXR1cm4gPEVsZW1lbnQga2V5PXt2LmtleSB8fCBpfSB7Li4ucHJvcHN9IC8+XG4gICAgICAgICAgfSlcbiAgICAgICAgKSA6IG51bGxcbiAgICAgIH1cbiAgICA8L1dyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlcj5cbiAgKTtcbn1cbiIsICIvKipcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgc3R5bGVzIG9wdGlvbnMgdGhhdCBleGlzdCB3aXRoaW4gdGhlIGRyYXdlciBpbiBvcmRlclxuICogdG8gc2V0IGFsbCB0aGUgaW5saW5lIHN0eWxlcyBmb3IgdGhlIGNvbXBvbmVudFxuICogQG1vZHVsZVxuICovXG5cbmltcG9ydCB7IFJpY2hFbGVtZW50IH0gZnJvbSBcIi4uLy4uLy4uL3NlcmlhbGl6ZXJcIjtcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjayB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSURyYXdlckNvbnRhaW5lclByb3BzIH0gZnJvbSBcIi4uL3dyYXBwZXJcIjtcbmltcG9ydCB7IFBhdGggfSBmcm9tIFwic2xhdGVcIjtcbmltcG9ydCBlcXVhbHMgZnJvbSBcImRlZXAtZXF1YWxcIjtcbmltcG9ydCB7IERlZmF1bHRXcmFwcGVyRHJhd2VyQ2hlY2tCb3hGaWVsZCwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlciwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJNdWx0aVNlbGVjdEZpZWxkLCBEZWZhdWx0V3JhcHBlckRyYXdlclRleHRGaWVsZCwgSVdyYXBwZXJEcmF3ZXJUZXh0RmllbGRQcm9wcyB9IGZyb20gXCIuL2dlbmVyYWxcIjtcblxuLyoqXG4gKiBUaGUgc2luZ2xlIHN0eWxlIG9wdGlvbiBwcm9wcyB0aGF0IGRlZmluZSBhIHNpbmdsZVxuICogb3B0aW9uIGZvciB0aGUgaW5saW5lIHN0eWxlLCBlaXRoZXIsIGFjdGl2ZSwgaG92ZXIsXG4gKiBvciB0aGUgc3RhbmRhcmQgc3R5bGVcbiAqL1xuaW50ZXJmYWNlIElTaW5nbGVTdHlsZVByb3BzIHtcbiAgLyoqXG4gICAqIHRoZSBuYW1lLCBpdCdzIHVzZWQgaW4gdGhlIGxhYmVsIGFuZCBwbGFjZWhvbGRlciwgbm90IGp1c3QgbmFtZXNwYWNpbmdcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHZhbHVlIGFzIGl0IGlzIHJpZ2h0IG5vd1xuICAgKi9cbiAgc3R5bGVWYWx1ZTogc3RyaW5nO1xuICAvKipcbiAgICogaW4gd2hpY2ggYW5jaG9yIHRoZSB2YWx1ZSB3YXMgZ2VuZXJhdGVkIGZyb21cbiAgICogd2Uga2VlcCB0cmFjayBvZiB0aGUgYW5jaG9yIGluIG9yZGVyIHRvIGtub3dcbiAgICogaWYgdGhlIHZhbHVlIHNob3VsZCBiZSB1cGRhdGVkXG4gICAqIHRoZXJlIGlzIGEgZGVsYXkgYmV0d2VlbiB0aGUgdXBkYXRpbmcgYW5kIHJlY2VpdmluZyB0aGVcbiAgICogdmFsdWUgaW4gdGhlIGZpZWxkIHNvIGl0J2QgY2F1c2UgZmxpY2tlcmluZyBvdGhlcndpc2VcbiAgICovXG4gIGFuY2hvcjogUGF0aDtcbiAgLyoqXG4gICAqIFRyaWdnZXJzIG9uIHRoZSBjaGFuZ2Ugb2YgdGhlIHRleHQgZmllbGQsIGFuZCBpdCB0cmlnZ2Vyc1xuICAgKiBldmVyeSB0aW1lIGEga2V5cHJlc3MgaXMgZG9uZVxuICAgKi9cbiAgb25DaGFuZ2U6ICh2YWx1ZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFRoZSB0ZXh0IGZpZWxkIHRvIHVzZVxuICAgKi9cbiAgVGV4dEZpZWxkPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJV3JhcHBlckRyYXdlclRleHRGaWVsZFByb3BzPjtcbiAgLyoqXG4gICAqIFRoZSBpZCBvZiB0aGUgZmllbGRcbiAgICovXG4gIGlkOiBzdHJpbmc7XG59XG5cbi8qKlxuICogVGhlIHN0YXRlIG9mIHRoZSBzdHlsZSBpbnB1dCBlbGVtZW50XG4gKi9cbmludGVyZmFjZSBJU2luZ2xlU3R5bGVTdGF0ZSB7XG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCB2YWx1ZSBhcyBpbiB0aGUgc3RhdGUsIHdlIHN0b3JlIHRoZSB2YWx1ZSBoZXJlXG4gICAqIGFuZCB3ZSBrZWVwIGl0IGhlcmUgYmVjYXVzZSB0aGVyZSdzIGEgZGVsYXkgd2hlbiB1cGRhdGluZyB0aGVzZVxuICAgKiB2YWx1ZXMgZnJvbSB0aGUgcmljaCBlbGVtZW50IGNvbnRlbnRcbiAgICovXG4gIHZhbHVlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgYW5jaG9yIHdoZXJlIGl0IGNvbWVzIGZyb20gd2UgYWxzbyBzdG9yZSB0aGUgYW5jaG9yIHRvIGtub3cgaWYgaXQgaGFzXG4gICAqIGNoYW5nZWQgd2hpY2ggbWVhbnMgaXQncyBhbm90aGVyIGVsZW1lbnQsIG90aGVyd2lzZSB3ZSBhc3N1bWUgdGhhdCB0aGUgc3RhdGVcbiAgICogdmFsdWUgaXMgdGhlIHJpZ2h0IHZhbHVlXG4gICAqL1xuICB2YWx1ZUZvckFuY2hvcjogUGF0aDtcbn1cblxuLyoqXG4gKiBUaGUgc2luZ2xlIHN0eWxlIGVsZW1lbnQgdGhhdCBwcm92aWRlcyBhbiBpbnB1dCBmb3Igc2V0dGluZyB0aGUgc3R5bGVcbiAqIGJvdGggYWN0aXZlLCBob3ZlciBhbmQgdGhlIHN0YW5kYXJkXG4gKi9cbmNsYXNzIFNpbmdsZVN0eWxlIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxJU2luZ2xlU3R5bGVQcm9wcywgSVNpbmdsZVN0eWxlU3RhdGU+IHtcblxuICAvKipcbiAgICogV2UgbmVlZCB0aGUgZGVyaXZlZCBmdW5jdGlvbiBpbiBvcmRlciB0byBiZSBhYmxlIHRvIHVwZGF0ZSB0aGUgdmFsdWUgb2YgdGhlXG4gICAqIHNlbGVjdG9yIGluIGNhc2UsIHRoaXMgaXMgdGhlIG1vcmUgZWZmaWNpZW50IHdheSBpbiB0aGVzZSBjYXNlcyB3aGVyZSB0aGluZ3NcbiAgICogYXJlIHNsaWdodGx5IG91dCBvZiBzeW5jXG4gICAqL1xuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKHByb3BzOiBJU2luZ2xlU3R5bGVQcm9wcywgc3RhdGU6IElTaW5nbGVTdHlsZVN0YXRlKSB7XG4gICAgLy8gZm9yIHRoYXQgd2UgY2hlY2sgaWYgdGhlIHZhbHVlIGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgb25lIGluIHRoZSBzdGF0ZSwgd2hpY2ggaGFwcGVuc1xuICAgIC8vIHdoZW5ldmVyIGNoYW5naW5nLCBidXQgaW4gb3JkZXIgdG8gYWN0dWFsbHkgY2hhbmdlIGl0IHdlIG9ubHkgZG8gc28gaWYgaXQncyBhIGRpZmZlcmVudFxuICAgIC8vIGVsZW1lbnQgYW5jaG9yIHdlIGFyZSBhdFxuICAgIGlmICgocHJvcHMuc3R5bGVWYWx1ZSB8fCBcIlwiKSAhPT0gc3RhdGUudmFsdWUgJiYgIVBhdGguZXF1YWxzKHByb3BzLmFuY2hvciwgc3RhdGUudmFsdWVGb3JBbmNob3IpKSB7XG4gICAgICAvLyBzbyB3ZSB1cGRhdGVcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBwcm9wcy5zdHlsZVZhbHVlIHx8IFwiXCIsXG4gICAgICAgIHZhbHVlRm9yQW5jaG9yOiBwcm9wcy5hbmNob3IsXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0cyB0aGUgZWxlbWVudCB0aGF0IHByb3ZpZGVzIGFuIGlucHV0IGZvciBhY3RpdmUsIGhvdmVyIGFuZCB0aGUgc3RhbmRhcmRcbiAgICogQHBhcmFtIHByb3BzIFxuICAgKi9cbiAgY29uc3RydWN0b3IocHJvcHM6IElTaW5nbGVTdHlsZVByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgLy8gYmluZCB0aGUgZnVuY3Rpb25zXG4gICAgdGhpcy5vblN0eWxlQ2hhbmdlID0gdGhpcy5vblN0eWxlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblN0eWxlQ2hhbmdlQiA9IHRoaXMub25TdHlsZUNoYW5nZUIuYmluZCh0aGlzKTtcblxuICAgIC8vIHNldCB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB2YWx1ZTogcHJvcHMuc3R5bGVWYWx1ZSB8fCBcIlwiLFxuICAgICAgdmFsdWVGb3JBbmNob3I6IHByb3BzLmFuY2hvcixcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgZWFjaCB0aW1lIHRoZSBpbnB1dCBmb3IgdGhlIHN0eWxlIGNoYW5nZXNcbiAgICogQHBhcmFtIGUgdGhlIGNoYW5nZSBldmVudCBpbiBxdWVzdGlvblxuICAgKi9cbiAgcHVibGljIG9uU3R5bGVDaGFuZ2UoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pIHtcbiAgICB0aGlzLm9uU3R5bGVDaGFuZ2VCKGUudGFyZ2V0LnZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBlYWNoIHRpbWUgdGhlIGlucHV0IGZvciB0aGUgc3R5bGUgY2hhbmdlc1xuICAgKiBAcGFyYW0gZSB0aGUgY2hhbmdlIGV2ZW50IGluIHF1ZXN0aW9uXG4gICAqL1xuICBwdWJsaWMgb25TdHlsZUNoYW5nZUIobmV3VmFsdWU6IHN0cmluZyA9IG51bGwpIHtcbiAgICAvLyBzZXQgdGhlIHN0YXRlXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB2YWx1ZTogbmV3VmFsdWUgfHwgXCJcIixcbiAgICAgIHZhbHVlRm9yQW5jaG9yOiB0aGlzLnByb3BzLmFuY2hvcixcbiAgICB9KTtcbiAgICAvLyBjYWxsIHRoZSBldmVudFxuICAgIHRoaXMucHJvcHMub25DaGFuZ2UobmV3VmFsdWUsIHRoaXMucHJvcHMuYW5jaG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3RhbmRhcmQgcmVuZGVyIGZ1bmN0aW9uXG4gICAqL1xuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIGNvbnN0IFRleHRGaWVsZCA9IHRoaXMucHJvcHMuVGV4dEZpZWxkIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyVGV4dEZpZWxkO1xuICAgIHJldHVybiAoXG4gICAgICA8VGV4dEZpZWxkXG4gICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnZhbHVlfVxuICAgICAgICBvbkNoYW5nZUJ5VmFsdWU9e3RoaXMub25TdHlsZUNoYW5nZUJ9XG4gICAgICAgIG9uQ2hhbmdlQnlFdmVudD17dGhpcy5vblN0eWxlQ2hhbmdlfVxuICAgICAgICBsYWJlbD17dGhpcy5wcm9wcy5uYW1lfVxuICAgICAgICBpZD17dGhpcy5wcm9wcy5pZH1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBzdGF0ZSBmb3IgdGhlIGNsYXNzZXMgb3B0aW9uIHNlbGVjdG9yIHRoYXQgYWxsb3dzXG4gKiBmb3Igc2VsZWN0aW5nIHJpY2ggY2xhc3Nlc1xuICovXG5pbnRlcmZhY2UgSUNsYXNzZXNPcHRpb25TZWxlY3RvclN0YXRlIHtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHZhbHVlIGFzIGluIHRoZSBzdGF0ZSwgd2Ugc3RvcmUgdGhlIHZhbHVlIGhlcmVcbiAgICogYW5kIHdlIGtlZXAgaXQgaGVyZSBiZWNhdXNlIHRoZXJlJ3MgYSBkZWxheSB3aGVuIHVwZGF0aW5nIHRoZXNlXG4gICAqIHZhbHVlcyBmcm9tIHRoZSByaWNoIGVsZW1lbnQgY29udGVudFxuICAgKiBcbiAgICogVGhpcyBpcyBhbiBhcnJheSBiZWNhdXNlIHRoZSBjbGFzc2VzIGZvciB0aGUgZWxlbWVudCBhcmUgYW4gYXJyYXlcbiAgICovXG4gIHZhbHVlOiBzdHJpbmdbXTtcbiAgLyoqXG4gICAqIFRoZSBhbmNob3Igd2hlcmUgaXQgY29tZXMgZnJvbSB3ZSBhbHNvIHN0b3JlIHRoZSBhbmNob3IgdG8ga25vdyBpZiBpdCBoYXNcbiAgICogY2hhbmdlZCB3aGljaCBtZWFucyBpdCdzIGFub3RoZXIgZWxlbWVudCwgb3RoZXJ3aXNlIHdlIGFzc3VtZSB0aGF0IHRoZSBzdGF0ZVxuICAgKiB2YWx1ZSBpcyB0aGUgcmlnaHQgdmFsdWVcbiAgICovXG4gIHZhbHVlRm9yQW5jaG9yOiBQYXRoO1xuICB2YWx1ZUxhc3RUaW1lUmVxdWVzdGVkVXBkYXRlOiBudW1iZXI7XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYSBwaWNrZXIgZm9yIHJpY2ggY2xhc3NlcyBpbiB0aGUgZHJhd2VyIGZvciB0aGUgZ2l2ZW4gZWxlbWVudFxuICogYmFzaWNhbGx5IGEgc2VsZWN0IGZpZWxkXG4gKi9cbmNsYXNzIENsYXNzZXNPcHRpb25TZWxlY3RvciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8SURyYXdlckNvbnRhaW5lclByb3BzLCBJQ2xhc3Nlc09wdGlvblNlbGVjdG9yU3RhdGU+IHtcblxuICAvKipcbiAgICogV2UgbmVlZCB0aGUgZGVyaXZlZCBmdW5jdGlvbiBpbiBvcmRlciB0byBiZSBhYmxlIHRvIHVwZGF0ZSB0aGUgdmFsdWUgb2YgdGhlXG4gICAqIHNlbGVjdG9yIGluIGNhc2UsIHRoaXMgaXMgdGhlIG1vcmUgZWZmaWNpZW50IHdheSBpbiB0aGVzZSBjYXNlcyB3aGVyZSB0aGluZ3NcbiAgICogYXJlIHNsaWdodGx5IG91dCBvZiBzeW5jXG4gICAqL1xuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKHByb3BzOiBJRHJhd2VyQ29udGFpbmVyUHJvcHMsIHN0YXRlOiBJQ2xhc3Nlc09wdGlvblNlbGVjdG9yU3RhdGUpIHtcbiAgICAvLyB3ZSBkbyBpdCB0aGlzIHdheSBiZWNhdXNlIHRoaXMgY29tcG9uZW50IGVhdHMgdGhlIGVudGlyZSB3cmFwcGVyIHByb3BzIHNvIHdlIG5lZWQgdG8gcGljayBpdCByaWdodFxuICAgIC8vIGZyb20gdGhlIGN1cnJlbnQgc2VsZWN0ZWQgbm9kZVxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZTogUmljaEVsZW1lbnQgPSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50IGFzIGFueTtcblxuICAgIC8vIGFuZCB3ZSB1c2UgYm90aCBlcXVhbHMgYW5kIHBhdGggZXF1YWxzIHRvIGRldGVybWluZSBhIGNoYW5nZVxuICAgIC8vIGFuZCBhdm9pZCB0aGUgc3luYyBpc3N1ZVxuICAgIGNvbnN0IHRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgIGlmIChcbiAgICAgICFlcXVhbHMoc2VsZWN0ZWROb2RlLnJpY2hDbGFzc0xpc3QgfHwgW10sIHN0YXRlLnZhbHVlLCB7IHN0cmljdDogdHJ1ZSB9KSAmJlxuICAgICAgKFxuICAgICAgICAhUGF0aC5lcXVhbHMocHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvciwgc3RhdGUudmFsdWVGb3JBbmNob3IpIHx8XG4gICAgICAgIHRpbWUgLSBzdGF0ZS52YWx1ZUxhc3RUaW1lUmVxdWVzdGVkVXBkYXRlID4gMzAwXG4gICAgICApXG4gICAgKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogc2VsZWN0ZWROb2RlLnJpY2hDbGFzc0xpc3QgfHwgW10sXG4gICAgICAgIHZhbHVlRm9yQW5jaG9yOiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yLFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIGNvbnN0cnVjdHMgYSBuZXcgY2xhc3Mgc2VsZWN0b3IgZm9yIHJpY2ggY2xhc3Nlc1xuICAgKiBAcGFyYW0gcHJvcHMgdGhlIGVudGlyZSBtYXRlcmlhbCB1aSBzbGF0ZSB3cmFwcGVyIHByb3BzIHRoYXQgdGhlIHdyYXBwZXIgdGFrZXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJRHJhd2VyQ29udGFpbmVyUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAvLyBzZXR1cCB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZTogUmljaEVsZW1lbnQgPSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50IGFzIGFueTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdmFsdWU6IHNlbGVjdGVkTm9kZS5yaWNoQ2xhc3NMaXN0IHx8IFtdLFxuICAgICAgdmFsdWVGb3JBbmNob3I6IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgICB2YWx1ZUxhc3RUaW1lUmVxdWVzdGVkVXBkYXRlOiAwLFxuICAgIH07XG5cbiAgICB0aGlzLm9uUmljaENsYXNzTGlzdENoYW5nZSA9IHRoaXMub25SaWNoQ2xhc3NMaXN0Q2hhbmdlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgd2hlbiB0aGUgc2VsZWN0IGZpZWxkIGNoYW5nZXMgYW5kIHJlY2VpdmVzIGEgbmV3IHZhbHVlXG4gICAqIEBwYXJhbSBlIHRoZSBjaGFuZ2UgZXZlbnRcbiAgICovXG4gIHB1YmxpYyBvblJpY2hDbGFzc0xpc3RDaGFuZ2UobmV3VmFsdWU6IHN0cmluZ1tdID0gW10pIHtcbiAgICAvLyBub3cgd2UgY2FuIHVwZGF0ZSB0aGUgc3RhdGVcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHZhbHVlOiBuZXdWYWx1ZSxcbiAgICAgIHZhbHVlRm9yQW5jaG9yOiB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgICB2YWx1ZUxhc3RUaW1lUmVxdWVzdGVkVXBkYXRlOiAobmV3IERhdGUoKSkuZ2V0VGltZSgpLFxuICAgIH0sICgpID0+IHtcbiAgICAgIC8vIGlmIHdlIGhhdmUgbm90aGluZywgdGhlIG5ldyB2YWx1ZSBpcyBudWxsXG4gICAgICAvLyBmb3IgdGhlIHByaW1hcnkgY29tcG9uZW50XG4gICAgICBpZiAobmV3VmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG5ld1ZhbHVlID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gc28gd2Ugc2V0IHN1Y2hcbiAgICAgIHRoaXMucHJvcHMuaGVscGVycy5zZXRSaWNoQ2xhc3NlcyhuZXdWYWx1ZSwgdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyB1bmJsdXIoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5kYXRhc2V0LnVuYmx1ciA9IFwidHJ1ZVwiO1xuICB9XG5cbiAgcHVibGljIHJlc2V0Qmx1cigpIHtcbiAgICBkZWxldGUgZG9jdW1lbnQuYm9keS5kYXRhc2V0LnVuYmx1cjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcmVuZGVyIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyB0aGUgbXVsdGlzZWxlY3RcbiAgICovXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgLy8gd2UgdXNlIGEgY2hpcCBmb3JtIGluIG9yZGVyIHRvIG1ha2UgaXQgZm9yIG11bHRpcGxlIHNlbGVjdGlvblxuICAgIGNvbnN0IE11bHRpU2VsZWN0b3IgPSB0aGlzLnByb3BzLldyYXBwZXJEcmF3ZXJNdWx0aVNlbGVjdEZpZWxkIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyTXVsdGlTZWxlY3RGaWVsZDtcbiAgICByZXR1cm4gKFxuICAgICAgPE11bHRpU2VsZWN0b3JcbiAgICAgICAgaWQ9XCJyaWNoLWNsYXNzXCJcbiAgICAgICAgbGFiZWw9e3RoaXMucHJvcHMuYmFzZUkxOG4uY2xhc3Nlc31cbiAgICAgICAgb25DaGFuZ2U9e3RoaXMub25SaWNoQ2xhc3NMaXN0Q2hhbmdlfVxuICAgICAgICBvcHRpb25zPXt0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LmF2YWlsYWJsZVJpY2hDbGFzc2VzLm1hcCgoZWxlbWVudCkgPT4gKFxuICAgICAgICAgICh7XG4gICAgICAgICAgICBsYWJlbDogZWxlbWVudC5sYWJlbCxcbiAgICAgICAgICAgIHZhbHVlOiBlbGVtZW50LnZhbHVlLFxuICAgICAgICAgIH0pXG4gICAgICAgICkpfVxuICAgICAgICByZXNldEJsdXI9e3RoaXMucmVzZXRCbHVyfVxuICAgICAgICB1bmJsdXI9e3RoaXMudW5ibHVyfVxuICAgICAgICB2YWx1ZXM9e3RoaXMuc3RhdGUudmFsdWV9XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyB0aGUgY29tcG9uZW50IHRoYXQgY29udGFpbnMgdGhlIG11bHRpc2VsZWN0b3IgZm9yIHRoZSByaWNoIGNsYXNzZXNcbiAqIGFzIHdlbGwgYXMgYWxsb3dzIHRvIHNldCBhY3RpdmUsIGhvdmVyIGFuZCBzdGFuZGFyZCBzdHlsZXMgZm9yIHRoZSBjb21wb25lbnRcbiAqIEBwYXJhbSBwcm9wcyB0aGUgcHJvcHMgZm9yIHRoZSB0ZW1wbGF0aW5nIHdoaWNoIGlzIGxpdGVyYWxseSB0aGUgd2hvbGVcbiAqIG9wdGlvbnMgb2YgdGhlIHdyYXBwZXIgaXRzZWxmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBTdHlsZXNPcHRpb25zKHByb3BzOiBJRHJhd2VyQ29udGFpbmVyUHJvcHMpIHtcbiAgY29uc3Qgc2V0U3RhbmRhbG9uZSA9IHVzZUNhbGxiYWNrKCh2OiBib29sZWFuKSA9PiB7XG4gICAgcHJvcHMuaGVscGVycy5zZXQoe1xuICAgICAgc3RhbmRhbG9uZTogdixcbiAgICB9LCBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yKTtcbiAgfSwgW10pO1xuXG4gIGlmICghcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgQ2hlY2tib3hGaWVsZCA9IHByb3BzLldyYXBwZXJEcmF3ZXJDaGVja2JveEZpZWxkIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyQ2hlY2tCb3hGaWVsZDtcblxuICBjb25zdCBpbWdTdGFuZGFsb25lID0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudC50eXBlID09PSBcImltYWdlXCIgPyAoXG4gICAgPENoZWNrYm94RmllbGRcbiAgICAgIG9uQ2hhbmdlPXtzZXRTdGFuZGFsb25lfVxuICAgICAgaWQ9XCJpbWFnZS1zdGFuZGFsb25lXCJcbiAgICAgIGxhYmVsPXtwcm9wcy5iYXNlSTE4bi5zdGFuZGFsb25lfVxuICAgICAgdmFsdWU9e3Byb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQuc3RhbmRhbG9uZX1cbiAgICAvPlxuICApIDogbnVsbDtcblxuICBjb25zdCBjdXJyZW50Tm9kZSA9IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQgYXMgUmljaEVsZW1lbnQ7XG4gIGNvbnN0IFdyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlciA9IHByb3BzLldyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlciB8fCBEZWZhdWx0V3JhcHBlckRyYXdlckludGVybmFsUGFuZWxXcmFwcGVyO1xuXG4gIHJldHVybiAoXG4gICAgPFdyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlcj5cbiAgICAgIHtpbWdTdGFuZGFsb25lfVxuICAgICAge1xuICAgICAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1JpY2hDbGFzc2VzID9cbiAgICAgICAgICA8Q2xhc3Nlc09wdGlvblNlbGVjdG9yXG4gICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgLz4gOiBudWxsXG4gICAgICB9XG4gICAgICB7XG4gICAgICAgIHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzQ3VzdG9tU3R5bGVzID9cbiAgICAgICAgICA8U2luZ2xlU3R5bGVcbiAgICAgICAgICAgIGFuY2hvcj17cHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcn1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtwcm9wcy5oZWxwZXJzLnNldFN0eWxlfVxuICAgICAgICAgICAgbmFtZT17cHJvcHMuYmFzZUkxOG4uc3R5bGV9XG4gICAgICAgICAgICBzdHlsZVZhbHVlPXtjdXJyZW50Tm9kZS5zdHlsZX1cbiAgICAgICAgICAgIFRleHRGaWVsZD17cHJvcHMuV3JhcHBlckRyYXdlclRleHRGaWVsZH1cbiAgICAgICAgICAgIGlkPVwic3R5bGVcIlxuICAgICAgICAgIC8+IDogbnVsbFxuICAgICAgfVxuICAgICAge1xuICAgICAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0N1c3RvbVN0eWxlcyAmJiBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmcgP1xuICAgICAgICAgIDxTaW5nbGVTdHlsZVxuICAgICAgICAgICAgYW5jaG9yPXtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yfVxuICAgICAgICAgICAgb25DaGFuZ2U9e3Byb3BzLmhlbHBlcnMuc2V0SG92ZXJTdHlsZX1cbiAgICAgICAgICAgIG5hbWU9e3Byb3BzLmJhc2VJMThuLnN0eWxlSG92ZXJ9XG4gICAgICAgICAgICBzdHlsZVZhbHVlPXtjdXJyZW50Tm9kZS5zdHlsZUhvdmVyfVxuICAgICAgICAgICAgVGV4dEZpZWxkPXtwcm9wcy5XcmFwcGVyRHJhd2VyVGV4dEZpZWxkfVxuICAgICAgICAgICAgaWQ9XCJzdHlsZS1ob3ZlclwiXG4gICAgICAgICAgLz4gOiBudWxsXG4gICAgICB9XG4gICAgICB7XG4gICAgICAgIHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzQ3VzdG9tU3R5bGVzICYmIHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGVtcGxhdGluZyA/XG4gICAgICAgICAgPFNpbmdsZVN0eWxlXG4gICAgICAgICAgICBhbmNob3I9e3Byb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3J9XG4gICAgICAgICAgICBvbkNoYW5nZT17cHJvcHMuaGVscGVycy5zZXRBY3RpdmVTdHlsZX1cbiAgICAgICAgICAgIG5hbWU9e3Byb3BzLmJhc2VJMThuLnN0eWxlQWN0aXZlfVxuICAgICAgICAgICAgc3R5bGVWYWx1ZT17Y3VycmVudE5vZGUuc3R5bGVBY3RpdmV9XG4gICAgICAgICAgICBUZXh0RmllbGQ9e3Byb3BzLldyYXBwZXJEcmF3ZXJUZXh0RmllbGR9XG4gICAgICAgICAgICBpZD1cInN0eWxlLWFjdGl2ZVwiXG4gICAgICAgICAgLz4gOiBudWxsXG4gICAgICB9XG4gICAgPC9XcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXI+XG4gICk7XG59XG4iLCAiLyoqXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIHBhcnQgb2YgdGhlIGRyYXdlciB0aGF0IGNvbnRhaW5zIHRoZSBhY3Rpb25cbiAqIG1vZGlmaWVycyB0aGF0IGFsbG93cyB0byBzZXQgdGhpbmdzIGxpa2Ugb24tY2xpY2sgb24tZm9jdXMgZXRjLi4uXG4gKiBAbW9kdWxlXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSURyYXdlckNvbnRhaW5lclByb3BzIH0gZnJvbSBcIi4uL3dyYXBwZXJcIjtcbmltcG9ydCB7IFBhdGggfSBmcm9tIFwic2xhdGVcIjtcbmltcG9ydCB7IERlZmF1bHRXcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXIsIERlZmF1bHRXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGQsIElXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGRQcm9wcyB9IGZyb20gXCIuL2dlbmVyYWxcIjtcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBsaXN0IG9mIGV2ZW50cyB0aGF0IHdlIHN1cHBvcnRcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgRVZFTlRTID0gW1xuICBcImNsaWNrXCIsXG4gIFwiYmx1clwiLFxuICBcImZvY3VzXCIsXG4gIFwiaW5wdXRcIixcbiAgXCJrZXlkb3duXCIsXG4gIFwia2V5cHJlc3NcIixcbiAgXCJrZXl1cFwiLFxuICBcIm1vdXNlZG93blwiLFxuICBcIm1vdXNlZW50ZXJcIixcbiAgXCJtb3VzZWxlYXZlXCIsXG4gIFwibW91c2Vtb3ZlXCIsXG4gIFwibW91c2VvdmVyXCIsXG4gIFwibW91c2VvdXRcIixcbiAgXCJtb3VzZXVwXCIsXG4gIFwibW91c2V3aGVlbFwiLFxuICBcInRvdWNoc3RhcnRcIixcbiAgXCJ0b3VjaG1vdmVcIixcbiAgXCJ0b3VjaGVuZFwiLFxuICBcInRvdWNoY2FuY2VsXCIsXG4gIFwid2hlZWxcIixcbl07XG5cbi8qKlxuICogQSB1dGlsaXR5IHRvIHNwZWNpZnkgYSBzaW5nbGUgYWN0aW9uXG4gKiBvcHRpb24gZm9yIHRoZSBzZWxlY3QgaW50ZXJmYWNlXG4gKi9cbmludGVyZmFjZSBJU2luZ2xlQWN0aW9uT3B0aW9uIHtcbiAgdmFsdWU6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbiAgcHJpbWFyeTogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBwcm9wcyB0aGF0IHRoZSBzZWxlY3RvciB0YWtlc1xuICogdGhlIHNlbGVjdG9yIGNvbXBvbmVudCB0YWtlcyB0aGVzZSBwcm9wcyBhbmQgZ2VuZXJhdGVzXG4gKiBhIHNlbGVjdCB3aXRoIHRoZSBuZWNlc3NhcnkgaW5mb3JtYXRpb24gYW5kIGhhbmRsZXJzXG4gKiBpbiBvcmRlciB0byBtb2RpZnkgdGhlIGFjdGlvblxuICovXG5pbnRlcmZhY2UgSVNpbmdsZUFjdGlvblByb3BzIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIGlzIHVzZWQgYm90aCBhcyBuYW1lc3BhY2luZyBhbmQgYXMgdGhlIG5hbWUgaXRzZWxmXG4gICAqIHNpbmNlIHRoZSBKUyBldmVudHMgYXJlIGpzIHNwZWNpZmljIHRoZXJlJ3Mgbm8gcG9pbnQgZm9yIHRoZW1cbiAgICogdG8gYmUgdHJhbnNsYXRlZFxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGN1cnJlbnQgdmFsdWUgdGhhdCBpdCBob2xkc1xuICAgKi9cbiAgYWN0aW9uVmFsdWU6IHN0cmluZztcbiAgLyoqXG4gICAqIEFsbCB0aGUgb3B0aW9ucyB0aGF0IGFyZSBhbGxvd2VkIGZvciB0aGUgYWN0aW9ucywgdGhlc2UgcmVwcmVzZW50c1xuICAgKiB0aGUgZnVuY3Rpb25zIHRoYXQgZXhpc3Qgd2l0aGluIHRoZSBjb250ZXh0XG4gICAqL1xuICBvcHRpb25zOiBJU2luZ2xlQWN0aW9uT3B0aW9uW107XG4gIC8qKlxuICAgKiBpbiB3aGljaCBhbmNob3IgdGhlIHZhbHVlIHdhcyBnZW5lcmF0ZWQgZnJvbVxuICAgKiB3ZSBrZWVwIHRyYWNrIG9mIHRoZSBhbmNob3IgaW4gb3JkZXIgdG8ga25vd1xuICAgKiBpZiB0aGUgdmFsdWUgc2hvdWxkIGJlIHVwZGF0ZWRcbiAgICogdGhlcmUgaXMgYSBkZWxheSBiZXR3ZWVuIHRoZSB1cGRhdGluZyBhbmQgcmVjZWl2aW5nIHRoZVxuICAgKiB2YWx1ZSBpbiB0aGUgZmllbGQgc28gaXQnZCBjYXVzZSBmbGlja2VyaW5nIG90aGVyd2lzZVxuICAgKi9cbiAgYW5jaG9yOiBQYXRoO1xuICAvKipcbiAgICogVGhlIGdyb3VwIGluZGV4IGZvciBhY2Nlc3NpYmlsaXR5XG4gICAqL1xuICBncm91cEluZGV4OiBudW1iZXI7XG4gIC8qKlxuICAgKiBUcmlnZ2VyIG9uIGNoYW5nZVxuICAgKiBAcGFyYW0ga2V5IHRoZSBhY3Rpb24ga2V5LCBjbGljaywgbW91c2VvdmVyLCBldGMuLi5cbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0aGF0IGlzIHJlZmVycmVkIHRvXG4gICAqIEBwYXJhbSBhbmNob3IgaW4gd2hpY2ggYW5jaG9yIGl0IGdlbmVyYXRlZFxuICAgKi9cbiAgb25DaGFuZ2U6IChrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBpZCBmb3IgdGhlIGFjdGlvbiBzcGFjZVxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICBTZWxlY3RGaWVsZDogUmVhY3QuQ29tcG9uZW50VHlwZTxJV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkUHJvcHM+O1xufVxuXG4vKipcbiAqIFRoZSBzdGF0ZSBvZiBlYWNoIGFjdGlvbiBzZWxlY3RvclxuICovXG5pbnRlcmZhY2UgSVNpbmdsZUFjdGlvblN0YXRlIHtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHZhbHVlIGFzIGluIHRoZSBzdGF0ZSwgd2Ugc3RvcmUgdGhlIHZhbHVlIGhlcmVcbiAgICogYW5kIHdlIGtlZXAgaXQgaGVyZSBiZWNhdXNlIHRoZXJlJ3MgYSBkZWxheSB3aGVuIHVwZGF0aW5nIHRoZXNlXG4gICAqIHZhbHVlcyBmcm9tIHRoZSByaWNoIGVsZW1lbnQgY29udGVudFxuICAgKi9cbiAgdmFsdWU6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBhbmNob3Igd2hlcmUgaXQgY29tZXMgZnJvbSB3ZSBhbHNvIHN0b3JlIHRoZSBhbmNob3IgdG8ga25vdyBpZiBpdCBoYXNcbiAgICogY2hhbmdlZCB3aGljaCBtZWFucyBpdCdzIGFub3RoZXIgZWxlbWVudCwgb3RoZXJ3aXNlIHdlIGFzc3VtZSB0aGF0IHRoZSBzdGF0ZVxuICAgKiB2YWx1ZSBpcyB0aGUgcmlnaHQgdmFsdWVcbiAgICovXG4gIHZhbHVlRm9yQW5jaG9yOiBQYXRoO1xuICB2YWx1ZUxhc3RUaW1lUmVxdWVzdGVkVXBkYXRlOiBudW1iZXI7XG59XG5cbi8qKlxuICogVGhlIHNpbmdsZSBhY3Rpb24gY2xhc3MgcmVwcmVzZW50cyB0aGUgY29tcG9uZW50IHRoYXQgYWxsb3dzIGZvciBtb2RpZmljYXRpb25cbiAqIG9mIGEgc2luZ2xlIGFjdGlvbiBlZy4gY2xpY2ssIG1vdXNlb3ZlciwgYnkgcHJvZHVjaW5nIGEgc2luZ2xlIHNlbGVjdCBlbGVtZW50XG4gKiB3aXRoIHRoZSBuZWNlc3NhcnkgaGFuZGxlcnMgYW5kIHRha2luZyB0aGUgbmVjZXNzYXJ5IHByb3BzIGZvciBtb2RpZmljYXRpb25cbiAqL1xuY2xhc3MgU2luZ2xlQWN0aW9uIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxJU2luZ2xlQWN0aW9uUHJvcHMsIElTaW5nbGVBY3Rpb25TdGF0ZT4ge1xuXG4gIC8qKlxuICAgKiBXZSBuZWVkIHRoZSBkZXJpdmVkIGZ1bmN0aW9uIGluIG9yZGVyIHRvIGJlIGFibGUgdG8gdXBkYXRlIHRoZSB2YWx1ZSBvZiB0aGVcbiAgICogc2VsZWN0b3IgaW4gY2FzZSwgdGhpcyBpcyB0aGUgbW9yZSBlZmZpY2llbnQgd2F5IGluIHRoZXNlIGNhc2VzIHdoZXJlIHRoaW5nc1xuICAgKiBhcmUgc2xpZ2h0bHkgb3V0IG9mIHN5bmNcbiAgICovXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMocHJvcHM6IElTaW5nbGVBY3Rpb25Qcm9wcywgc3RhdGU6IElTaW5nbGVBY3Rpb25TdGF0ZSkge1xuICAgIC8vIGZvciB0aGF0IHdlIGNoZWNrIGlmIHRoZSB2YWx1ZSBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIG9uZSBpbiB0aGUgc3RhdGUsIHdoaWNoIGhhcHBlbnNcbiAgICAvLyB3aGVuZXZlciBjaGFuZ2luZywgYnV0IGluIG9yZGVyIHRvIGFjdHVhbGx5IGNoYW5nZSBpdCB3ZSBvbmx5IGRvIHNvIGlmIGl0J3MgYSBkaWZmZXJlbnRcbiAgICAvLyBlbGVtZW50IGFuY2hvciB3ZSBhcmUgYXRcbiAgICBjb25zdCB0aW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICBpZiAoXG4gICAgICAocHJvcHMuYWN0aW9uVmFsdWUgfHwgXCJcIikgIT09IHN0YXRlLnZhbHVlICYmXG4gICAgICAoXG4gICAgICAgICFQYXRoLmVxdWFscyhwcm9wcy5hbmNob3IsIHN0YXRlLnZhbHVlRm9yQW5jaG9yKSB8fFxuICAgICAgICB0aW1lIC0gc3RhdGUudmFsdWVMYXN0VGltZVJlcXVlc3RlZFVwZGF0ZSA+IDMwMFxuICAgICAgKVxuICAgICkge1xuICAgICAgLy8gc28gd2UgdXBkYXRlXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcHJvcHMuYWN0aW9uVmFsdWUgfHwgXCJcIixcbiAgICAgICAgdmFsdWVGb3JBbmNob3I6IHByb3BzLmFuY2hvcixcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBjb25zdHJ1Y3RzIGEgbmV3IFNpbmdsZUFjdGlvbiBpbnN0YW5jZVxuICAgKiBAcGFyYW0gcHJvcHMgdGhlIHByb3BzXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcm9wczogSVNpbmdsZUFjdGlvblByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5vbkFjdGlvblZhbHVlQ2hhbmdlID0gdGhpcy5vbkFjdGlvblZhbHVlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRpcmVjdENoYW5nZSA9IHRoaXMub25EaXJlY3RDaGFuZ2UuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB2YWx1ZTogcHJvcHMuYWN0aW9uVmFsdWUgfHwgXCJcIixcbiAgICAgIHZhbHVlRm9yQW5jaG9yOiBwcm9wcy5hbmNob3IsXG4gICAgICB2YWx1ZUxhc3RUaW1lUmVxdWVzdGVkVXBkYXRlOiAwLFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyB3aGVuIHRoZSBzZWxlY3RvciB2YWx1ZSBoYXMgY2hhbmdlZCB0byBzb21ldGhpbmcgZWxzZVxuICAgKiBAcGFyYW0gZSB0aGUgY2hhbmdlIGV2ZW50XG4gICAqL1xuICBwdWJsaWMgb25BY3Rpb25WYWx1ZUNoYW5nZShlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pIHtcbiAgICAvLyBpdCBtaWdodCBiZSBudWxsXG4gICAgdGhpcy5vbkRpcmVjdENoYW5nZShlLnRhcmdldC52YWx1ZSk7XG4gIH1cblxuICBwdWJsaWMgb25EaXJlY3RDaGFuZ2UobmV3VmFsdWU6IHN0cmluZyA9IG51bGwpIHtcbiAgICAvLyB1cGRhdGUgdGhlIHN0YXRlXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB2YWx1ZTogbmV3VmFsdWUgfHwgXCJcIixcbiAgICAgIHZhbHVlRm9yQW5jaG9yOiB0aGlzLnByb3BzLmFuY2hvcixcbiAgICAgIHZhbHVlTGFzdFRpbWVSZXF1ZXN0ZWRVcGRhdGU6IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCksXG4gICAgfSk7XG5cbiAgICAvLyB0cmlnZ2VyIG9uIGNoYW5nZVxuICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5wcm9wcy5uYW1lLCBuZXdWYWx1ZSwgdGhpcy5wcm9wcy5hbmNob3IpO1xuICB9XG5cbiAgcHVibGljIHVuYmx1cigpIHtcbiAgICBkb2N1bWVudC5ib2R5LmRhdGFzZXQudW5ibHVyID0gXCJ0cnVlXCI7XG4gIH1cblxuICBwdWJsaWMgcmVzZXRCbHVyKCkge1xuICAgIGRlbGV0ZSBkb2N1bWVudC5ib2R5LmRhdGFzZXQudW5ibHVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSByZW5kZXIgZnVuY3Rpb24gZm9yIHRoZSBjb21wb25lbnRcbiAgICovXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgY29uc3QgU2VsZWN0RmllbGQgPSB0aGlzLnByb3BzLlNlbGVjdEZpZWxkIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGQ7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTZWxlY3RGaWVsZFxuICAgICAgICBpZD17dGhpcy5wcm9wcy5pZH1cbiAgICAgICAgbGFiZWw9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgb25DaGFuZ2VCeUV2ZW50PXt0aGlzLm9uQWN0aW9uVmFsdWVDaGFuZ2V9XG4gICAgICAgIG9uQ2hhbmdlQnlWYWx1ZT17dGhpcy5vbkRpcmVjdENoYW5nZX1cbiAgICAgICAgb3B0aW9ucz17dGhpcy5wcm9wcy5vcHRpb25zfVxuICAgICAgICByZXNldEJsdXI9e3RoaXMucmVzZXRCbHVyfVxuICAgICAgICB1bmJsdXI9e3RoaXMudW5ibHVyfVxuICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS52YWx1ZX1cbiAgICAgICAgZGlzcGxheUVtcHR5PXt0cnVlfVxuICAgICAgLz5cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhbGwgdGhlIHNlbGVjdG9yIGZvciBhbGwgdGhlIGdpdmVuIG9wdGlvbnMgdGhhdCBleGlzdCB0aGF0IGNhbiBiZSBzZXRcbiAqIGJhc2VkIG9uIHRoZSBjb250ZXh0XG4gKiBAcGFyYW0gcHJvcHMgdGhlIHdob2xlIG1hdGVyaWFsIHVpIHNsYXRlIHdyYXBwZXIgd2l0aCBzdHlsZXMgcHJvcHMgZnJvbSB0aGUgZHJhd2VyIGl0c2VsZlxuICovXG5leHBvcnQgZnVuY3Rpb24gQWN0aW9uc09wdGlvbnMocHJvcHM6IElEcmF3ZXJDb250YWluZXJQcm9wcykge1xuICAvLyBnZXQgdGhlIGN1cnJlbnQgbm9kZSB0aGF0IHdlIGhhdmUgY3VycmVudGx5IHNlbGVjdGVkXG4gIGNvbnN0IGN1cnJlbnROb2RlID0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCB8fFxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCB8fFxuICAgIChcbiAgICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyAmJlxuICAgICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzW1xuICAgICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzLmxlbmd0aCAtIDFcbiAgICAgIF1cbiAgICApO1xuXG4gIGNvbnN0IGN1cnJlbnROb2RlQ29udGV4dCA9IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUNvbnRleHQgfHxcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQgfHxcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHQ7XG5cbiAgY29uc3QgY3VycmVudE5vZGVBbmNob3IgPSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yIHx8XG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yIHx8XG4gICAgKFxuICAgICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzICYmXG4gICAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbXG4gICAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMubGVuZ3RoIC0gMVxuICAgICAgXVxuICAgICk7XG5cbiAgLy8gYW5kIG5vdyBsZXQncyBidWlsZCBhbGwgdGhlIG9wdGlvbnMgdGhhdCB3ZSBoYXZlIGZvciB0aGF0IHdlIG5lZWQgdG8gY2hlY2sgb3VyIGN1cnJlbnQgY29udGV4dCwgaWYgd2UgaGF2ZSBvbmVcbiAgbGV0IGFsbE9wdGlvbnMgPSBjdXJyZW50Tm9kZUNvbnRleHQgPyBPYmplY3Qua2V5cyhjdXJyZW50Tm9kZUNvbnRleHQucHJvcGVydGllcykubWFwKChwKSA9PiB7XG4gICAgLy8gZ2V0IHRoZSB2YWx1ZSBvZiBlYWNoIHByb3BlcnR5IGluIHRoZSBjb250ZXh0IHByb3BlcnRpZXNcbiAgICBjb25zdCB2YWx1ZSA9IGN1cnJlbnROb2RlQ29udGV4dC5wcm9wZXJ0aWVzW3BdO1xuXG4gICAgLy8gYW5kIGl0IG5lZWRzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzc1xuICAgIGlmICh2YWx1ZS50eXBlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIG5vdyB3ZSBjYW4gcmV0dXJuIGl0IGFuZCBnaXZlIGl0IHRoZSBsYWJlbCBpdCBob2xkc1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogcCxcbiAgICAgIGxhYmVsOiB0eXBlb2YgdmFsdWUubGFiZWwgPT09IFwiZnVuY3Rpb25cIiA/IHZhbHVlLmxhYmVsKCkgOiB2YWx1ZS5sYWJlbCxcbiAgICAgIHByaW1hcnk6IHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCAhPT0gY3VycmVudE5vZGVDb250ZXh0LFxuICAgIH1cbiAgfSkuZmlsdGVyKCh2KSA9PiAhIXYpIDogW107XG5cbiAgaWYgKHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCAhPT0gY3VycmVudE5vZGVDb250ZXh0KSB7XG4gICAgYWxsT3B0aW9ucyA9IGFsbE9wdGlvbnMuY29uY2F0KE9iamVjdC5rZXlzKHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dC5wcm9wZXJ0aWVzKS5tYXAoKHApID0+IHtcbiAgICAgIC8vIGdldCB0aGUgdmFsdWUgb2YgZWFjaCBwcm9wZXJ0eSBpbiB0aGUgY29udGV4dCBwcm9wZXJ0aWVzXG4gICAgICBjb25zdCB2YWx1ZSA9IHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dC5wcm9wZXJ0aWVzW3BdO1xuXG4gICAgICBpZiAoKHZhbHVlIGFzIGFueSkubm9uUm9vdEluaGVyaXRhYmxlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBhbmQgaXQgbmVlZHMgdG8gYmUgYSBmdW5jdGlvbiB0byBwYXNzXG4gICAgICBpZiAodmFsdWUudHlwZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBub3cgd2UgY2FuIHJldHVybiBpdCBhbmQgZ2l2ZSBpdCB0aGUgbGFiZWwgaXQgaG9sZHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBwLFxuICAgICAgICBsYWJlbDogdHlwZW9mIHZhbHVlLmxhYmVsID09PSBcImZ1bmN0aW9uXCIgPyB2YWx1ZS5sYWJlbCgpIDogdmFsdWUubGFiZWwsXG4gICAgICAgIHByaW1hcnk6IGZhbHNlLFxuICAgICAgfVxuICAgIH0pLmZpbHRlcigodikgPT4gISF2KSk7XG4gIH1cblxuICBpZiAoYWxsT3B0aW9ucykge1xuICAgIGFsbE9wdGlvbnMgPSBbe1xuICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICBsYWJlbDogXCIgLSBcIixcbiAgICAgIHByaW1hcnk6IGZhbHNlLFxuICAgIH1dLmNvbmNhdChhbGxPcHRpb25zKTtcbiAgfTtcblxuICBjb25zdCBXcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXIgPSBwcm9wcy5XcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXIgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlcjtcblxuICAvLyBub3cgd2UgY2FuIHJldHVybiB0aGUgd2hvbGUgYm94XG4gIHJldHVybiAoXG4gICAgPFdyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlcj5cbiAgICAgIHtcbiAgICAgICAgRVZFTlRTLm1hcCgodiwgaW5kZXgpID0+IChcbiAgICAgICAgICA8U2luZ2xlQWN0aW9uXG4gICAgICAgICAgICBrZXk9e3Z9XG4gICAgICAgICAgICBuYW1lPXt2fVxuICAgICAgICAgICAgYWN0aW9uVmFsdWU9e2N1cnJlbnROb2RlW3ZdIHx8IG51bGx9XG4gICAgICAgICAgICBvcHRpb25zPXthbGxPcHRpb25zfVxuICAgICAgICAgICAgYW5jaG9yPXtjdXJyZW50Tm9kZUFuY2hvcn1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtwcm9wcy5oZWxwZXJzLnNldEFjdGlvbn1cbiAgICAgICAgICAgIGdyb3VwSW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgaWQ9e1wiYWN0aW9uLVwiICsgdn1cbiAgICAgICAgICAgIFNlbGVjdEZpZWxkPXtwcm9wcy5XcmFwcGVyRHJhd2VyU2VsZWN0RmllbGR9XG4gICAgICAgICAgLz5cbiAgICAgICAgKSlcbiAgICAgIH1cbiAgICA8L1dyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlcj5cbiAgKTtcbn1cbiIsICIvKipcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgdGVtcGxhdGluZyBvcHRpb25zIHRoYXQgZXhpc3Qgd2l0aGluIHRoZSBkcmF3ZXIgaW4gb3JkZXJcbiAqIHRvIHNldCB0aGUgZm9yLWVhY2ggYW5kIGNvbnRleHQga2V5XG4gKiBAbW9kdWxlXG4gKi9cblxuaW1wb3J0IHsgZ2V0Q29udGV4dEZvciwgUmljaEVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vLi4vc2VyaWFsaXplclwiO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdHlwZSB7IElEcmF3ZXJDb250YWluZXJQcm9wcywgSURyYXdlclRlbXBsYXRpbmdDb250YWluZXJCb3hQcm9wcywgSVNpbmdsZVRlbXBsYXRpbmdFbGVtZW50T3B0aW9uIH0gZnJvbSBcIi4uL3dyYXBwZXJcIjtcbmltcG9ydCB7IFBhdGggfSBmcm9tIFwic2xhdGVcIjtcbmltcG9ydCB7IERlZmF1bHRXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGQsIElXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGRQcm9wcyB9IGZyb20gXCIuL2dlbmVyYWxcIjtcblxuLyoqXG4gKiBUaGUgc2luZ2xlIHRlbXBsYXRpbmcgZWxlbWVudCBvcHRpb24gcHJvcHMgYXJlIHRoZSBwcm9wc1xuICogdGhhdCB0aGUgY29tcG9uZW50IHRha2VzIGluIG9yZGVyIHRvIGJ1aWxkIHRoZSBzZWxlY3QgZmllbGRcbiAqIGZvciB0aGVzZSBvcHRpb25zXG4gKi9cbmludGVyZmFjZSBJU2luZ2xlVGVtcGxhdGluZ0VsZW1lbnRQcm9wcyB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgb3B0aW9uLCB1c2VkIGZvciBuYW1lc3BhY2luZ1xuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGkxOG4gbmFtZSBpcyB3aGF0IGlzIGFjdHVhbGx5IHZpc2libGUgZm9yIHRoZSB1c2VyXG4gICAqIHVzZWQgZm9yIHBsYWNlaG9sZGVyIGFuZCBsYWJlbFxuICAgKi9cbiAgaTE4bk5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHZhbHVlXG4gICAqL1xuICB2YWx1ZTogc3RyaW5nO1xuICAvKipcbiAgICogQWxsIHRoZSBvcHRpb25zXG4gICAqL1xuICBvcHRpb25zOiBJU2luZ2xlVGVtcGxhdGluZ0VsZW1lbnRPcHRpb25bXTtcbiAgLyoqXG4gICAqIGluIHdoaWNoIGFuY2hvciB0aGUgdmFsdWUgd2FzIGdlbmVyYXRlZCBmcm9tXG4gICAqIHdlIGtlZXAgdHJhY2sgb2YgdGhlIGFuY2hvciBpbiBvcmRlciB0byBrbm93XG4gICAqIGlmIHRoZSB2YWx1ZSBzaG91bGQgYmUgdXBkYXRlZFxuICAgKiB0aGVyZSBpcyBhIGRlbGF5IGJldHdlZW4gdGhlIHVwZGF0aW5nIGFuZCByZWNlaXZpbmcgdGhlXG4gICAqIHZhbHVlIGluIHRoZSBmaWVsZCBzbyBpdCdkIGNhdXNlIGZsaWNrZXJpbmcgb3RoZXJ3aXNlXG4gICAqL1xuICBhbmNob3I6IFBhdGg7XG4gIC8qKlxuICAgKiBUaGUgY2hhbmdlIGV2ZW50IHRoYXQgdHJpZ2dlcnMgb25jZSB0aGUgc2VsZWN0IHZhbHVlIGNoYW5nZXNcbiAgICovXG4gIG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuICAvKipcbiAgICogVGhlIGlkIHRoYXQgdGhpcyByZXByZXNlbnRzXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIFNlbGVjdEZpZWxkOiBSZWFjdC5Db21wb25lbnRUeXBlPElXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGRQcm9wcz47XG59XG5cbi8qKlxuICogVGhlIHN0YXRlIG9mIHRoZSB0ZW1wbGF0aW5nIGVsZW1lbnRcbiAqL1xuaW50ZXJmYWNlIElTaW5nbGVUZW1wbGF0aW5nRWxlbWVudFN0YXRlIHtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHZhbHVlIGFzIGluIHRoZSBzdGF0ZSwgd2Ugc3RvcmUgdGhlIHZhbHVlIGhlcmVcbiAgICogYW5kIHdlIGtlZXAgaXQgaGVyZSBiZWNhdXNlIHRoZXJlJ3MgYSBkZWxheSB3aGVuIHVwZGF0aW5nIHRoZXNlXG4gICAqIHZhbHVlcyBmcm9tIHRoZSByaWNoIGVsZW1lbnQgY29udGVudFxuICAgKi9cbiAgdmFsdWU6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBhbmNob3Igd2hlcmUgaXQgY29tZXMgZnJvbSB3ZSBhbHNvIHN0b3JlIHRoZSBhbmNob3IgdG8ga25vdyBpZiBpdCBoYXNcbiAgICogY2hhbmdlZCB3aGljaCBtZWFucyBpdCdzIGFub3RoZXIgZWxlbWVudCwgb3RoZXJ3aXNlIHdlIGFzc3VtZSB0aGF0IHRoZSBzdGF0ZVxuICAgKiB2YWx1ZSBpcyB0aGUgcmlnaHQgdmFsdWVcbiAgICovXG4gIHZhbHVlRm9yQW5jaG9yOiBQYXRoO1xuICB2YWx1ZUxhc3RUaW1lUmVxdWVzdGVkVXBkYXRlOiBudW1iZXI7XG59XG5cbi8qKlxuICogVGhlIHNpbmdsZSB0ZW1wbGF0aW5nIGVsZW1lbnQgY2xhc3MgdGhhdCBwcm92aWRlcyB0aGUgc2VsZWN0b3JcbiAqL1xuY2xhc3MgU2luZ2xlVGVtcGxhdGluZ0VsZW1lbnQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PElTaW5nbGVUZW1wbGF0aW5nRWxlbWVudFByb3BzLCBJU2luZ2xlVGVtcGxhdGluZ0VsZW1lbnRTdGF0ZT4ge1xuXG4gIC8qKlxuICAgKiBXZSBuZWVkIHRoZSBkZXJpdmVkIGZ1bmN0aW9uIGluIG9yZGVyIHRvIGJlIGFibGUgdG8gdXBkYXRlIHRoZSB2YWx1ZSBvZiB0aGVcbiAgICogc2VsZWN0b3IgaW4gY2FzZSwgdGhpcyBpcyB0aGUgbW9yZSBlZmZpY2llbnQgd2F5IGluIHRoZXNlIGNhc2VzIHdoZXJlIHRoaW5nc1xuICAgKiBhcmUgc2xpZ2h0bHkgb3V0IG9mIHN5bmNcbiAgICovXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMocHJvcHM6IElTaW5nbGVUZW1wbGF0aW5nRWxlbWVudFByb3BzLCBzdGF0ZTogSVNpbmdsZVRlbXBsYXRpbmdFbGVtZW50U3RhdGUpIHtcbiAgICAvLyBmb3IgdGhhdCB3ZSBjaGVjayBpZiB0aGUgdmFsdWUgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gdGhlIHN0YXRlLCB3aGljaCBoYXBwZW5zXG4gICAgLy8gd2hlbmV2ZXIgY2hhbmdpbmcsIGJ1dCBpbiBvcmRlciB0byBhY3R1YWxseSBjaGFuZ2UgaXQgd2Ugb25seSBkbyBzbyBpZiBpdCdzIGEgZGlmZmVyZW50XG4gICAgLy8gZWxlbWVudCBhbmNob3Igd2UgYXJlIGF0XG4gICAgY29uc3QgdGltZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG4gICAgaWYgKFxuICAgICAgKHByb3BzLnZhbHVlIHx8IFwiXCIpICE9PSBzdGF0ZS52YWx1ZSAmJlxuICAgICAgKFxuICAgICAgICAhUGF0aC5lcXVhbHMocHJvcHMuYW5jaG9yLCBzdGF0ZS52YWx1ZUZvckFuY2hvcikgfHxcbiAgICAgICAgdGltZSAtIHN0YXRlLnZhbHVlTGFzdFRpbWVSZXF1ZXN0ZWRVcGRhdGUgPiAzMDBcbiAgICAgIClcbiAgICApIHtcbiAgICAgIC8vIHNvIHdlIHVwZGF0ZVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlIHx8IFwiXCIsXG4gICAgICAgIHZhbHVlRm9yQW5jaG9yOiBwcm9wcy5hbmNob3IsXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0IGEgYnJhbmQgbmV3IHRlbXBsYXRpbmcgZWxlbWVudCB0aGF0IHByb3ZpZGVzIGEgc2VsZWN0b3JcbiAgICogQHBhcmFtIHByb3BzIHRoZSBwcm9wc1xuICAgKi9cbiAgY29uc3RydWN0b3IocHJvcHM6IElTaW5nbGVUZW1wbGF0aW5nRWxlbWVudFByb3BzKSB7XG4gICAgLy8gY2FsbCB0byB0aGUgc3VwZXJcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAvLyBmdW5jdGlvbiBiaW5kaW5nXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2hhbmdlQnlFdmVudCA9IHRoaXMub25DaGFuZ2VCeUV2ZW50LmJpbmQodGhpcyk7XG5cbiAgICAvLyBzZXR1cCB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB2YWx1ZTogcHJvcHMudmFsdWUgfHwgXCJcIixcbiAgICAgIHZhbHVlRm9yQW5jaG9yOiBwcm9wcy5hbmNob3IsXG4gICAgICB2YWx1ZUxhc3RUaW1lUmVxdWVzdGVkVXBkYXRlOiAwLFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHRyaWdnZXJzIG9uY2UgdGhlIHNlbGVjdGlvbiBoYXMgY2hhbmdlZFxuICAgKiBpbiB0aGUgZmllbGRcbiAgICogQHBhcmFtIGUgdGhlIGNoYW5nZSBldmVudFxuICAgKi9cbiAgcHVibGljIG9uQ2hhbmdlKG5ld1ZhbHVlOiBzdHJpbmcpIHtcbiAgICAvLyBub3cgd2UgY2FuIHVwZGF0ZSB0aGUgc3RhdGVcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHZhbHVlOiBuZXdWYWx1ZSB8fCBcIlwiLFxuICAgICAgdmFsdWVGb3JBbmNob3I6IHRoaXMucHJvcHMuYW5jaG9yLFxuICAgICAgdmFsdWVMYXN0VGltZVJlcXVlc3RlZFVwZGF0ZTogKG5ldyBEYXRlKCkpLmdldFRpbWUoKSxcbiAgICB9KTtcblxuICAgIC8vIGFuZCBzZXQgdGhlIHN0YXRlXG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShuZXdWYWx1ZSwgdGhpcy5wcm9wcy5hbmNob3IpO1xuICB9XG5cbiAgLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHRyaWdnZXJzIG9uY2UgdGhlIHNlbGVjdGlvbiBoYXMgY2hhbmdlZFxuICogaW4gdGhlIGZpZWxkXG4gKiBAcGFyYW0gZSB0aGUgY2hhbmdlIGV2ZW50XG4gKi9cbiAgcHVibGljIG9uQ2hhbmdlQnlFdmVudChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pIHtcbiAgICAvLyBncmFiIHRoZSBuZXcgdmFsdWUgZnJvbSB0aGUgZXZlbnRcbiAgICBjb25zdCBuZXdWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlIHx8IG51bGw7XG5cbiAgICB0aGlzLm9uQ2hhbmdlKG5ld1ZhbHVlKTtcbiAgfVxuXG4gIHB1YmxpYyB1bmJsdXIoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5kYXRhc2V0LnVuYmx1ciA9IFwidHJ1ZVwiO1xuICB9XG5cbiAgcHVibGljIHJlc2V0Qmx1cigpIHtcbiAgICBkZWxldGUgZG9jdW1lbnQuYm9keS5kYXRhc2V0LnVuYmx1cjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcmVuZGVyIGZ1bmN0aW9uXG4gICAqL1xuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIC8vIGhlcmUgd2UgZG8gdGhlIHJldHVybiB3aXRoIHRoZSBib3hcbiAgICBjb25zdCBTZWxlY3RGaWVsZCA9IHRoaXMucHJvcHMuU2VsZWN0RmllbGQgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZDtcbiAgICByZXR1cm4gKFxuICAgICAgPFNlbGVjdEZpZWxkXG4gICAgICAgIGxhYmVsPXt0aGlzLnByb3BzLmkxOG5OYW1lfVxuICAgICAgICBvbkNoYW5nZUJ5RXZlbnQ9e3RoaXMub25DaGFuZ2VCeUV2ZW50fVxuICAgICAgICBvbkNoYW5nZUJ5VmFsdWU9e3RoaXMub25DaGFuZ2V9XG4gICAgICAgIG9wdGlvbnM9e3RoaXMucHJvcHMub3B0aW9uc31cbiAgICAgICAgcmVzZXRCbHVyPXt0aGlzLnJlc2V0Qmx1cn1cbiAgICAgICAgdW5ibHVyPXt0aGlzLnVuYmx1cn1cbiAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudmFsdWV9XG4gICAgICAgIGlkPXt0aGlzLnByb3BzLmlkfVxuICAgICAgICBkaXNwbGF5RW1wdHk9e3RydWV9XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gRGVmYXVsdERyYXdlclRlbXBsYXRpbmdDb250YWluZXJCb3gocHJvcHM6IElEcmF3ZXJUZW1wbGF0aW5nQ29udGFpbmVyQm94UHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInN0YWxlRWRpdG9yRHJhd2VyVGVtcGxhdGluZ0NvbnRhaW5lckJveFwiPlxuICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgIDwvZGl2PlxuICApXG59XG5cbi8qKlxuICogUHJvdmlkZXMgdGhlIGNvbXBvbmVudCB0aGF0IGNvbnRhaW5zIHRoZSBib3RoIHNlbGVjdG9ycyBmb3IgYm90aFxuICogZWFjaCBhbmQgY29udGV4dCBrZXkgZm9yIHVzYWdlIGluIHRlbXBsYXRpbmdcbiAqIEBwYXJhbSBwcm9wcyB0aGUgcHJvcHMgZm9yIHRoZSB0ZW1wbGF0aW5nIHdoaWNoIGlzIGxpdGVyYWxseSB0aGUgd2hvbGVcbiAqIG9wdGlvbnMgb2YgdGhlIHdyYXBwZXIgaXRzZWxmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBUZW1wbGF0aW5nT3B0aW9ucyhwcm9wczogSURyYXdlckNvbnRhaW5lclByb3BzKSB7XG4gIC8vIHdlIG5lZWQgdG8gcGljayB0aGVzZSB0byBtYWtlIHRoZSBvcHRpb24gbGlzdFxuICBjb25zdCBjdXJyZW50Tm9kZSA9IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQgYXMgUmljaEVsZW1lbnQ7XG4gIGNvbnN0IGFsbEVhY2hDb250ZXh0czogSVNpbmdsZVRlbXBsYXRpbmdFbGVtZW50T3B0aW9uW10gPSBbXG4gICAge1xuICAgICAgbGFiZWw6IFwiIC0gXCIsXG4gICAgICB2YWx1ZTogXCJcIixcbiAgICB9LFxuICBdO1xuICBjb25zdCBhbGxDb250ZXh0czogSVNpbmdsZVRlbXBsYXRpbmdFbGVtZW50T3B0aW9uW10gPSBbXG4gICAge1xuICAgICAgbGFiZWw6IFwiIC0gXCIsXG4gICAgICB2YWx1ZTogXCJcIixcbiAgICB9LFxuICBdO1xuICBjb25zdCBhbGxJZkNvbmRpdGlvbnM6IElTaW5nbGVUZW1wbGF0aW5nRWxlbWVudE9wdGlvbltdID0gW1xuICAgIHtcbiAgICAgIGxhYmVsOiBcIiAtIFwiLFxuICAgICAgdmFsdWU6IFwiXCIsXG4gICAgfSxcbiAgXTtcblxuICAvLyBpZiB3ZSBoYXZlIGEgY29udGV4dCwgb3RoZXJ3aXNlIHdpdGhvdXQgY29udGV4dCB0aGVyZSBhcmUgbm8gb3B0aW9uc1xuICBjb25zdCBjdXJyZW50U2VsZWN0RWxlbWVudEZvclNlbGVjdENvbnRleHQgPSBnZXRDb250ZXh0Rm9yKFxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgXCJzZWxlY3QtY29udGV4dFwiLFxuICAgIHByb3BzLnN0YXRlLnRyZWVWYWx1ZSxcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICk7XG4gIGlmIChjdXJyZW50U2VsZWN0RWxlbWVudEZvclNlbGVjdENvbnRleHQpIHtcbiAgICAvLyB3ZSBidWlsZCB0aGUga2V5IGxpc3RcbiAgICBPYmplY3Qua2V5cyhjdXJyZW50U2VsZWN0RWxlbWVudEZvclNlbGVjdENvbnRleHQucHJvcGVydGllcykuZm9yRWFjaCgocCkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBjdXJyZW50U2VsZWN0RWxlbWVudEZvclNlbGVjdENvbnRleHQucHJvcGVydGllc1twXTtcbiAgICAgIC8vIGl0IG5lZWRzIHRvIGJlIGEgY29udGV4dCB0eXBlXG4gICAgICBpZiAodmFsdWUudHlwZSAhPT0gXCJjb250ZXh0XCIgfHwgdmFsdWUubG9vcGFibGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIG5vdyB3ZSBjYW4gYnVpbGQgdGhlIG9wdGlvblxuICAgICAgY29uc3Qgb3B0aW9uID0ge1xuICAgICAgICB2YWx1ZTogcCxcbiAgICAgICAgbGFiZWw6IHR5cGVvZiB2YWx1ZS5sYWJlbCA9PT0gXCJmdW5jdGlvblwiID8gdmFsdWUubGFiZWwoKSA6IHZhbHVlLmxhYmVsLFxuICAgICAgfTtcblxuICAgICAgYWxsQ29udGV4dHMucHVzaChvcHRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgY3VycmVudFNlbGVjdEVsZW1lbnRGb3JFYWNoQ29udGV4dCA9IGdldENvbnRleHRGb3IoXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcixcbiAgICBcInNlbGVjdC1sb29wXCIsXG4gICAgcHJvcHMuc3RhdGUudHJlZVZhbHVlLFxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgKTtcbiAgLy8gaWYgd2UgaGF2ZSBhIGNvbnRleHQsIG90aGVyd2lzZSB3aXRob3V0IGNvbnRleHQgdGhlcmUgYXJlIG5vIG9wdGlvbnNcbiAgaWYgKGN1cnJlbnRTZWxlY3RFbGVtZW50Rm9yRWFjaENvbnRleHQpIHtcbiAgICAvLyB3ZSBidWlsZCB0aGUga2V5IGxpc3RcbiAgICBPYmplY3Qua2V5cyhjdXJyZW50U2VsZWN0RWxlbWVudEZvckVhY2hDb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKHApID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gY3VycmVudFNlbGVjdEVsZW1lbnRGb3JFYWNoQ29udGV4dC5wcm9wZXJ0aWVzW3BdO1xuICAgICAgLy8gaXQgbmVlZHMgdG8gYmUgYSBjb250ZXh0IHR5cGVcbiAgICAgIGNvbnN0IGlzVmFsaWRGb3JCb29sZWFuID0gdmFsdWUudHlwZSA9PT0gXCJib29sZWFuXCI7XG4gICAgICBjb25zdCBpc1ZhbGlkRm9yTG9vcCA9IHZhbHVlLnR5cGUgPT09IFwiY29udGV4dFwiICYmIHZhbHVlLmxvb3BhYmxlO1xuICAgICAgaWYgKCFpc1ZhbGlkRm9yQm9vbGVhbiAmJiAhaXNWYWxpZEZvckxvb3ApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIG5vdyB3ZSBjYW4gYnVpbGQgdGhlIG9wdGlvblxuICAgICAgY29uc3Qgb3B0aW9uID0ge1xuICAgICAgICB2YWx1ZTogcCxcbiAgICAgICAgbGFiZWw6IHR5cGVvZiB2YWx1ZS5sYWJlbCA9PT0gXCJmdW5jdGlvblwiID8gdmFsdWUubGFiZWwoKSA6IHZhbHVlLmxhYmVsLFxuICAgICAgfTtcblxuICAgICAgaWYgKGlzVmFsaWRGb3JCb29sZWFuKSB7XG4gICAgICAgIGFsbElmQ29uZGl0aW9ucy5wdXNoKG9wdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGxFYWNoQ29udGV4dHMucHVzaChvcHRpb24pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGN1cnJlbnROb2RlLmZvckVhY2gpIHtcbiAgICBjb25zdCBlYWNoRm91bmQgPSBhbGxFYWNoQ29udGV4dHMuZmluZCgodikgPT4gdi52YWx1ZSA9PT0gY3VycmVudE5vZGUuZm9yRWFjaCk7XG4gICAgaWYgKCFlYWNoRm91bmQpIHtcbiAgICAgIGFsbEVhY2hDb250ZXh0cy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IGN1cnJlbnROb2RlLmZvckVhY2gsXG4gICAgICAgIGxhYmVsOiBjdXJyZW50Tm9kZS5mb3JFYWNoLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGN1cnJlbnROb2RlLmNvbnRleHQpIHtcbiAgICBjb25zdCBjb250ZXh0Rm91bmQgPSBhbGxDb250ZXh0cy5maW5kKCh2KSA9PiB2LnZhbHVlID09PSBjdXJyZW50Tm9kZS5jb250ZXh0KTtcbiAgICBpZiAoIWNvbnRleHRGb3VuZCkge1xuICAgICAgYWxsQ29udGV4dHMucHVzaCh7XG4gICAgICAgIHZhbHVlOiBjdXJyZW50Tm9kZS5jb250ZXh0LFxuICAgICAgICBsYWJlbDogY3VycmVudE5vZGUuY29udGV4dCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjdXJyZW50Tm9kZS5pZkNvbmRpdGlvbikge1xuICAgIGNvbnN0IGlmQ29uZGl0aW9uRm91bmQgPSBhbGxJZkNvbmRpdGlvbnMuZmluZCgodikgPT4gdi52YWx1ZSA9PT0gY3VycmVudE5vZGUuaWZDb25kaXRpb24pO1xuICAgIGlmICghaWZDb25kaXRpb25Gb3VuZCkge1xuICAgICAgYWxsRWFjaENvbnRleHRzLnB1c2goe1xuICAgICAgICB2YWx1ZTogY3VycmVudE5vZGUuaWZDb25kaXRpb24sXG4gICAgICAgIGxhYmVsOiBjdXJyZW50Tm9kZS5pZkNvbmRpdGlvbixcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIGFuZCByZXR1cm4gdGhlIHRoaW5nXG4gIGNvbnN0IERyYXdlclRlbXBsYXRpbmdDb250YWluZXJCb3ggPSBwcm9wcy5EcmF3ZXJUZW1wbGF0aW5nQ29udGFpbmVyQm94IHx8IERlZmF1bHREcmF3ZXJUZW1wbGF0aW5nQ29udGFpbmVyQm94O1xuICByZXR1cm4gKFxuICAgIDxEcmF3ZXJUZW1wbGF0aW5nQ29udGFpbmVyQm94PlxuICAgICAgPFNpbmdsZVRlbXBsYXRpbmdFbGVtZW50XG4gICAgICAgIG5hbWU9XCJjb250ZXh0XCJcbiAgICAgICAgaTE4bk5hbWU9e3Byb3BzLmJhc2VJMThuLmNvbnRleHR9XG4gICAgICAgIHZhbHVlPXtjdXJyZW50Tm9kZS5jb250ZXh0IHx8IG51bGx9XG4gICAgICAgIG9wdGlvbnM9e2FsbENvbnRleHRzfVxuICAgICAgICBhbmNob3I9e3Byb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3J9XG4gICAgICAgIG9uQ2hhbmdlPXtwcm9wcy5oZWxwZXJzLnNldENvbnRleHR9XG4gICAgICAgIFNlbGVjdEZpZWxkPXtwcm9wcy5XcmFwcGVyRHJhd2VyU2VsZWN0RmllbGR9XG4gICAgICAgIGlkPVwicmVuZGVyLWNvbnRleHRcIlxuICAgICAgLz5cbiAgICAgIDxTaW5nbGVUZW1wbGF0aW5nRWxlbWVudFxuICAgICAgICBuYW1lPVwiaWZcIlxuICAgICAgICBpMThuTmFtZT17cHJvcHMuYmFzZUkxOG4ucmVuZGVyQ29uZGl0aW9ufVxuICAgICAgICB2YWx1ZT17Y3VycmVudE5vZGUuaWZDb25kaXRpb24gfHwgbnVsbH1cbiAgICAgICAgb3B0aW9ucz17YWxsSWZDb25kaXRpb25zfVxuICAgICAgICBhbmNob3I9e3Byb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3J9XG4gICAgICAgIG9uQ2hhbmdlPXtwcm9wcy5oZWxwZXJzLnNldElmQ29uZGl0aW9ufVxuICAgICAgICBTZWxlY3RGaWVsZD17cHJvcHMuV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkfVxuICAgICAgICBpZD1cInJlbmRlci1pZlwiXG4gICAgICAvPlxuICAgICAgPFNpbmdsZVRlbXBsYXRpbmdFbGVtZW50XG4gICAgICAgIG5hbWU9XCJlYWNoXCJcbiAgICAgICAgaTE4bk5hbWU9e3Byb3BzLmJhc2VJMThuLmVhY2h9XG4gICAgICAgIHZhbHVlPXtjdXJyZW50Tm9kZS5mb3JFYWNoIHx8IG51bGx9XG4gICAgICAgIG9wdGlvbnM9e2FsbEVhY2hDb250ZXh0c31cbiAgICAgICAgYW5jaG9yPXtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yfVxuICAgICAgICBvbkNoYW5nZT17cHJvcHMuaGVscGVycy5zZXRGb3JFYWNofVxuICAgICAgICBTZWxlY3RGaWVsZD17cHJvcHMuV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkfVxuICAgICAgICBpZD1cInJlbmRlci1mb3ItZWFjaFwiXG4gICAgICAvPlxuICAgIDwvRHJhd2VyVGVtcGxhdGluZ0NvbnRhaW5lckJveD5cbiAgKTtcbn1cbiIsICIvKipcbiAqIFByb3ZpZGVzIHRoZSBkaWFsb2dzIHRoYXQgYXJlIHVzZWQgZm9yIHRoZSBmaWxlXG4gKiBAbW9kdWxlXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcblxuLyoqXG4gKiBUaGUgZXJyb3IgZGlhbG9nIHByb3BzXG4gKi9cbmludGVyZmFjZSBJRmlsZUxvYWRFcnJvckRpYWxvZ1Byb3BzIHtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IGVycm9yLCBpdCBhbHNvIHJlcHJlc2VudHNcbiAgICogdGhlIGZhY3Qgb2YgdGhlIGRpYWxvZyBiZWluZyBvcGVuIGlmIG9uZVxuICAgKiBpcyBhdmFpbGFibGVcbiAgICovXG4gIGN1cnJlbnRMb2FkRXJyb3I6IHN0cmluZztcbiAgLyoqXG4gICAqIGRpc21pc3Mgc3VjaCBlcnJvclxuICAgKi9cbiAgZGlzbWlzc0N1cnJlbnRMb2FkRXJyb3I6ICgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBHZW5lcmljIGVycm9yIG1lc3NhZ2VcbiAgICovXG4gIGkxOG5HZW5lcmljRXJyb3I6IHN0cmluZztcbiAgLyoqXG4gICAqIE9rXG4gICAqL1xuICBpMThuT2s6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBjb21wb25lbnQgZm9yIHRoZSBkaWFsb2dcbiAgICovXG4gIERpYWxvZz86IFJlYWN0LkNvbXBvbmVudFR5cGU8SURpYWxvZ0NvbXBvbmVudFByb3BzPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRGlhbG9nQ29tcG9uZW50UHJvcHMge1xuICBjaGlsZHJlbjogc3RyaW5nO1xuICBvcGVuOiBib29sZWFuO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xuICB0aXRsZTogc3RyaW5nO1xuICBidXR0b25zOiBBcnJheTx7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBvbkNsaWNrOiAoKSA9PiB2b2lkO1xuICAgIGFjdGlvbjogXCJwcmltYXJ5XCIgfCBcInNlY29uZGFyeVwiO1xuICB9Pjtcbn1cblxuZnVuY3Rpb24gRGVmYXVsdERpYWxvZyhwcm9wczogSURpYWxvZ0NvbXBvbmVudFByb3BzKSB7XG4gIGlmICghcHJvcHMub3Blbikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlhbG9nID0gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JEaWFsb2dCYWNrZHJvcFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckRpYWxvZ1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yRGlhbG9nVGl0bGVcIj57cHJvcHMudGl0bGV9PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JEaWFsb2dDb250ZW50XCI+e3Byb3BzLmNoaWxkcmVufTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yQnV0dG9uc1wiPlxuICAgICAgICAgIHtwcm9wcy5idXR0b25zLm1hcCgodikgPT4gKFxuICAgICAgICAgICAgPGJ1dHRvbiBrZXk9e3YuYWN0aW9ufSBvbkNsaWNrPXt2Lm9uQ2xpY2t9Pnt2LmxhYmVsfTwvYnV0dG9uPlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xuXG4gIHJldHVybiBSZWFjdERPTS5jcmVhdGVQb3J0YWwoZGlhbG9nLCBkb2N1bWVudC5ib2R5KTtcbn1cblxuLyoqXG4gKiBUaGlzIGRpYWxvZyBwcm92aWRlcyBhIGNvbnZlbmllbnQgZXJyb3IgbWVzc2FnZSB0byBkaXNwbGF5IGFuZCBjbG9zZVxuICogZm9yIHdoZW4gdGhlIGZpbGUgZmFpbGVkIHRvIGxvYWRcbiAqL1xuZXhwb3J0IGNsYXNzIEZpbGVMb2FkRXJyb3JEaWFsb2cgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PElGaWxlTG9hZEVycm9yRGlhbG9nUHJvcHM+IHtcbiAgY29uc3RydWN0b3IocHJvcHM6IElGaWxlTG9hZEVycm9yRGlhbG9nUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLm9uQ2xvc2UgPSB0aGlzLm9uQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuICBwdWJsaWMgb25DbG9zZSgpIHtcbiAgICB0aGlzLnByb3BzLmRpc21pc3NDdXJyZW50TG9hZEVycm9yKCk7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSByZW5kZXIgZnVuY3Rpb25cbiAgICovXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgY29uc3QgRGlhbG9nID0gdGhpcy5wcm9wcy5EaWFsb2cgfHwgRGVmYXVsdERpYWxvZztcbiAgICByZXR1cm4gKFxuICAgICAgPERpYWxvZ1xuICAgICAgICBvcGVuPXshIXRoaXMucHJvcHMuY3VycmVudExvYWRFcnJvcn1cbiAgICAgICAgb25DbG9zZT17dGhpcy5vbkNsb3NlfVxuICAgICAgICB0aXRsZT17dGhpcy5wcm9wcy5pMThuR2VuZXJpY0Vycm9yfVxuICAgICAgICBidXR0b25zPXtcbiAgICAgICAgICBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGxhYmVsOiB0aGlzLnByb3BzLmkxOG5PayxcbiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5wcm9wcy5kaXNtaXNzQ3VycmVudExvYWRFcnJvcixcbiAgICAgICAgICAgICAgYWN0aW9uOiBcInByaW1hcnlcIixcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgID5cbiAgICAgICAge3RoaXMucHJvcHMuY3VycmVudExvYWRFcnJvcn1cbiAgICAgIDwvRGlhbG9nPlxuICAgICk7XG4gIH1cbn1cbiIsICJpbXBvcnQgdHlwZSB7IElTbGF0ZUVkaXRvckVsZW1lbnRXcmFwcGVycywgSVNsYXRlRWRpdG9ySW50ZXJuYWxTdGF0ZVR5cGUsIElTbGF0ZUVkaXRvcldyYXBwZXJFbGVtZW50UHJvcHMgfSBmcm9tIFwiLlwiO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJTGluayB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL2xpbmtcIjtcbmltcG9ydCB0eXBlIHsgSVZpZGVvIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvdmlkZW9cIjtcbmltcG9ydCB7IElDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9jb250YWluZXJcIjtcbmltcG9ydCB7IEVkaXRvckRyb3Bkb3duLCBJRHJvcGRvd25Db21wb25lbnRCb3hQcm9wcywgSURyb3Bkb3duQ29tcG9uZW50UHJvcHMsIElEcm9wZG93bkNvbXBvbmVudFdyYXBwZXJQcm9wcyB9IGZyb20gXCIuLi9lZGl0b3ItZHJvcGRvd25cIjtcbmltcG9ydCB7IElUYWJsZSB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL3RhYmxlXCI7XG5pbXBvcnQgeyBJVGl0bGUgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy90aXRsZVwiO1xuaW1wb3J0IHsgSUltYWdlIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvaW1hZ2VcIjtcbmltcG9ydCB7IERlZmF1bHRXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGQsIERlZmF1bHRXcmFwcGVyRHJhd2VyVGV4dEZpZWxkLCBJV3JhcHBlckRyYXdlckNoZWNrQm94UHJvcHMsIElXcmFwcGVyRHJhd2VyTXVsdGlTZWxlY3RGaWVsZFByb3BzLCBJV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkUHJvcHMsIElXcmFwcGVyRHJhd2VyVGV4dEZpZWxkUHJvcHMgfSBmcm9tIFwiLi9kcmF3ZXIvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvIH0gZnJvbSBcIi4vd3JhcHBlclwiO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gb3B0aW9uIGZvciB0aGUgdGVtcGxhdGVkIHZhbHVlc1xuICogdGhhdCB0aGUgbGluayBjYW4gdGFrZVxuICovXG5pbnRlcmZhY2UgSVRlbXBsYXRlT3B0aW9uIHtcbiAgdmFsdWU6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpO1xuICBwcmltYXJ5OiBib29sZWFuO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBJRWxlbWVudFdyYXBwZXJCdXR0b24ge1xuICBsYWJlbDogc3RyaW5nO1xuICBpZDogc3RyaW5nO1xuICBkaXNhYmxlZDogYm9vbGVhbjtcbiAgc2VsZWN0ZWQ/OiBib29sZWFuO1xuICBvbkNsaWNrOiAoKSA9PiB2b2lkO1xufVxuXG5mdW5jdGlvbiBEZWZhdWx0RWxlbWVudFdyYXBwZXJCdXR0b25Db21wb25lbnQocHJvcHM6IElFbGVtZW50V3JhcHBlckJ1dHRvbikge1xuICByZXR1cm4gKFxuICAgIDxidXR0b25cbiAgICAgIGNsYXNzTmFtZT17XCJzbGF0ZUVkaXRvckVsZW1lbnRXcmFwcGVyQnV0dG9uIFwiICsgKHByb3BzLnNlbGVjdGVkID8gXCIgc2VsZWN0ZWRcIiA6IFwiXCIpfVxuICAgICAgZGlzYWJsZWQ9e3Byb3BzLmRpc2FibGVkfVxuICAgICAgb25DbGljaz17cHJvcHMub25DbGlja31cbiAgICA+XG4gICAgICB7cHJvcHMubGFiZWx9XG4gICAgPC9idXR0b24gPlxuICApO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElGaWVsZFdyYXBwZXJGb3JNb3JlT3B0aW9ucyB7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmZ1bmN0aW9uIERlZmF1bHRGaWVsZFdyYXBwZXJGb3JNb3JlT3B0aW9ucyhwcm9wczogSUZpZWxkV3JhcHBlckZvck1vcmVPcHRpb25zKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckZpZWxkV3JhcHBlckZvck1vcmVPcHRpb25zXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yRmllbGRXcmFwcGVyRm9yTW9yZU9wdGlvbnNMYWJlbFwiPntwcm9wcy5sYWJlbH08L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JGaWVsZFdyYXBwZXJGb3JNb3JlT3B0aW9uc0NoaWxkcmVuXCI+e3Byb3BzLmNoaWxkcmVufTwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURlZmF1bHRTbGF0ZUVsZW1lbnRXcmFwcGVyc1Byb3BzIGV4dGVuZHMgSVNsYXRlRWRpdG9yV3JhcHBlckVsZW1lbnRQcm9wcyB7XG4gIC8qKlxuICAgKiBVc2VkIHRvIG1ha2UgdGV4dCBpbnB1dCBmaWVsZHNcbiAgICovXG4gIEVsZW1lbnRXcmFwcGVyVGV4dEZpZWxkPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJV3JhcHBlckRyYXdlclRleHRGaWVsZFByb3BzPjtcblxuICAvLyAvKipcbiAgLy8gICogVXNlZCB0byBtYWtlIGNoZWNrYm94IGlucHV0IGZpZWxkc1xuICAvLyAgKi9cbiAgLy8gRWxlbWVudFdyYXBwZXJDaGVja2JveEZpZWxkPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJV3JhcHBlckRyYXdlckNoZWNrQm94UHJvcHM+O1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIG1ha2Ugc2VsZWN0IGlucHV0IGZpZWxkc1xuICAgKi9cbiAgRWxlbWVudFdyYXBwZXJTZWxlY3RGaWVsZD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZFByb3BzPjtcblxuICAvLyAvKipcbiAgLy8gICogVXNlZCB0byBtYWtlIHNlbGVjdCBpbnB1dCBmaWVsZHNcbiAgLy8gICovXG4gIC8vIEVsZW1lbnRXcmFwcGVyTXVsdGlTZWxlY3RGaWVsZD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJNdWx0aVNlbGVjdEZpZWxkUHJvcHM+O1xuXG4gIC8qKlxuICAgKiBCdXR0b25zIHVzZWQgd2l0aGluIHRoZSBlbGVtZW50IHdyYXBwZXJzXG4gICAqL1xuICBFbGVtZW50V3JhcHBlckJ1dHRvbj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUVsZW1lbnRXcmFwcGVyQnV0dG9uPjtcblxuICAvKipcbiAgICogVGhlIGRyb3Bkb3duIGNvbXBvbmVudCB0byB1c2VcbiAgICogbm90ZSB0aGF0IGl0IHNob3VsZCBzdXBwb3J0IGEgcmVmIG9iamVjdCBmb3IgdGhpc1xuICAgKi9cbiAgRHJvcGRvd25Db21wb25lbnQ/OiBSZWFjdC5Db21wb25lbnRUeXBlPElEcm9wZG93bkNvbXBvbmVudFByb3BzPjtcblxuICAvKipcbiAgICogUmVwcmVzZW50cyB0aGUgb3B0aW9uYWwgcGFyZW50IGJveCB0aGF0IHNvbWUgZWxlbWVudHMgY2hvb3NlIHRvIHVzZVxuICAgKi9cbiAgRHJvcGRvd25Db21wb25lbnRCb3g/OiBSZWFjdC5Db21wb25lbnRUeXBlPElEcm9wZG93bkNvbXBvbmVudEJveFByb3BzPjtcblxuICAvKipcbiAgICogVGhlIGNvbXBvbmVudCB0aGUgZHJvcGRvd24gaXMgdXNpbmcgYXMgYSB3cmFwcGVyXG4gICAqIGZvciB0aGUgZWxlbWVudFxuICAgKi9cbiAgRHJvcGRvd25Db21wb25lbnRXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJvcGRvd25Db21wb25lbnRXcmFwcGVyUHJvcHM+O1xuXG4gIC8qKlxuICAgKiBVc2VkIG1haW5seSBpbiB0aGUgdGVtcGxhdGVkIGVsZW1lbnQgdGhhdCBpdCB3cmFwcyBpbiBvcmRlciB0byBzYXkgdGhhdFxuICAgKiB0aGVyZSBhcmUgbW9yZSBvcHRpb25zXG4gICAqL1xuICBGaWVsZFdyYXBwZXJGb3JNb3JlT3B0aW9ucz86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUZpZWxkV3JhcHBlckZvck1vcmVPcHRpb25zPjtcbn1cblxuZnVuY3Rpb24gZ2V0VmlkZW9VUkwodjogSVZpZGVvKSB7XG4gIGlmICh2Lm9yaWdpbiA9PT0gXCJ5b3V0dWJlXCIpIHtcbiAgICByZXR1cm4gXCJodHRwczovL3lvdXR1YmUuY29tL3dhdGNoP3Y9XCIgKyB2LnNyYztcbiAgfSBlbHNlIGlmICh2Lm9yaWdpbiA9PT0gXCJ2aW1lb1wiKSB7XG4gICAgcmV0dXJuIFwiaHR0cHM6Ly92aW1lby5jb20vXCIgKyB2LnNyYztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxufVxuXG5mdW5jdGlvbiBIVE1MV3JhcHBlcihwcm9wczogSURlZmF1bHRTbGF0ZUVsZW1lbnRXcmFwcGVyc1Byb3BzKSB7XG4gIGNvbnN0IFtodG1sT3B0aW9ucywgc2V0SFRNTE9wdGlvbnNdID0gdXNlU3RhdGU8SVRlbXBsYXRlT3B0aW9uW10+KFtdKTtcblxuICBjb25zdCB1cGRhdGVIVE1MQiA9IHVzZUNhbGxiYWNrKChuZXdWOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBsYWJlbCA9IGh0bWxPcHRpb25zLmZpbmQoKG8pID0+IG8udmFsdWUgPT09IG5ld1YpO1xuICAgIHByb3BzLmhlbHBlcnMudXBkYXRlVGVtcGxhdGVIVE1MKHR5cGVvZiBsYWJlbC5sYWJlbCA9PT0gXCJzdHJpbmdcIiA/IGxhYmVsLmxhYmVsIDogbGFiZWwubGFiZWwoKSwgbmV3Vik7XG4gIH0sIFtodG1sT3B0aW9uc10pO1xuXG4gIGNvbnN0IHVwZGF0ZUhUTUwgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgdXBkYXRlSFRNTEIoZS50YXJnZXQudmFsdWUpO1xuICB9LCBbdXBkYXRlSFRNTEJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghcHJvcHMuaXNTZWxlY3RlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRleHQgPSBwcm9wcy5oZWxwZXJzLmdldENvbnRleHRGb3IocHJvcHMuZWxlbWVudCk7XG4gICAgY29uc3Qgcm9vdENvbnRleHQgPSBwcm9wcy5oZWxwZXJzLmdldFJvb3RDb250ZXh0KCk7XG5cbiAgICAvLyBuZWVkIHRvIGZpbmQgdGhlIHRlbXBsYXRlZCBvcHRpb25zIHRoYXQgYXJlIGF2YWlsYWJsZVxuICAgIC8vIGdpdmVuIHRoZSBjdXJyZW50IGNvbnRleHRcbiAgICBjb25zdCBodG1sUHJvcGVydGllc1RvVXNlOiBJVGVtcGxhdGVPcHRpb25bXSA9IFtdO1xuXG4gICAgLy8gbm93IHdlIG5lZWQgdG8gZ3JhYiB0aGUgY3VycmVudCBjb250ZXh0LCBpZiB3ZSBoYXZlIGFueVxuICAgIGNvbnRleHQgJiYgT2JqZWN0LmtleXMoY29udGV4dC5wcm9wZXJ0aWVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIC8vIGdyYWIgZWFjaCBwcm9wZXJ0eSBhbmQgY2hlY2sgdGhlIHR5cGUgb2YgaXRcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0gY29udGV4dC5wcm9wZXJ0aWVzW2tleV07XG4gICAgICAvLyBpZiBpdCdzIG5vdCBhIGxpbmtcbiAgICAgIGlmIChwcm9wZXJ0eS50eXBlICE9PSBcImh0bWxcIikge1xuICAgICAgICAvLyBjb250aW51ZVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBoYXZlIGEgcHJvcGVydHkgd2UgY2FuIHVzZVxuICAgICAgaHRtbFByb3BlcnRpZXNUb1VzZS5wdXNoKHtcbiAgICAgICAgdmFsdWU6IGtleSxcbiAgICAgICAgbGFiZWw6IHByb3BlcnR5LmxhYmVsIHx8IGtleSxcbiAgICAgICAgcHJpbWFyeTogY29udGV4dCAhPT0gcm9vdENvbnRleHQsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGlmIChyb290Q29udGV4dCAmJiByb290Q29udGV4dCAhPT0gY29udGV4dCkge1xuICAgICAgT2JqZWN0LmtleXMocm9vdENvbnRleHQucHJvcGVydGllcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIC8vIGdyYWIgZWFjaCBwcm9wZXJ0eSBhbmQgY2hlY2sgdGhlIHR5cGUgb2YgaXRcbiAgICAgICAgY29uc3QgcHJvcGVydHkgPSByb290Q29udGV4dC5wcm9wZXJ0aWVzW2tleV07XG5cbiAgICAgICAgaWYgKHByb3BlcnR5Lm5vblJvb3RJbmhlcml0YWJsZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIGl0J3Mgbm90IGEgbGlua1xuICAgICAgICBpZiAocHJvcGVydHkudHlwZSAhPT0gXCJodG1sXCIpIHtcbiAgICAgICAgICAvLyBjb250aW51ZVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG90aGVyd2lzZSB3ZSBoYXZlIGEgcHJvcGVydHkgd2UgY2FuIHVzZVxuICAgICAgICBodG1sUHJvcGVydGllc1RvVXNlLnB1c2goe1xuICAgICAgICAgIHZhbHVlOiBrZXksXG4gICAgICAgICAgbGFiZWw6IHByb3BlcnR5LmxhYmVsIHx8IGtleSxcbiAgICAgICAgICBwcmltYXJ5OiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBhbmQgdGhlIHZhbHVlIG9mIHN1Y2ggaXMgbm90IGluIHRoZSBsaXN0XG4gICAgaWYgKHByb3BzLmVsZW1lbnQuaHRtbCAmJiAhaHRtbFByb3BlcnRpZXNUb1VzZS5zb21lKChwKSA9PiBwLnZhbHVlID09PSBwcm9wcy5lbGVtZW50Lmh0bWwpKSB7XG4gICAgICAvLyB3ZSBhZGQgaXRcbiAgICAgIGh0bWxQcm9wZXJ0aWVzVG9Vc2UucHVzaCh7XG4gICAgICAgIHZhbHVlOiBwcm9wcy5lbGVtZW50Lmh0bWwsXG4gICAgICAgIGxhYmVsOiAocHJvcHMuZWxlbWVudC5jaGlsZHJlblswXSBhcyBhbnkpLnRleHQsXG4gICAgICAgIHByaW1hcnk6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2V0SFRNTE9wdGlvbnMoaHRtbFByb3BlcnRpZXNUb1VzZSk7XG4gIH0sIFtwcm9wcy5lbGVtZW50LCBwcm9wcy5pc1NlbGVjdGVkXSk7XG5cbiAgY29uc3QgU2VsZWN0RmllbGQgPSBwcm9wcy5FbGVtZW50V3JhcHBlclNlbGVjdEZpZWxkIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGQ7XG5cbiAgcmV0dXJuIChcbiAgICA8RWRpdG9yRHJvcGRvd25cbiAgICAgIERyb3Bkb3duQ29tcG9uZW50PXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudH1cbiAgICAgIERyb3Bkb3duQ29tcG9uZW50Qm94PXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudEJveH1cbiAgICAgIERyb3Bkb3duQ29tcG9uZW50V3JhcHBlcj17cHJvcHMuRHJvcGRvd25Db21wb25lbnRXcmFwcGVyfVxuICAgICAgZHJvcGRvd25Db21wb25lbnRXcmFwcGVyVGFnPVwic3BhblwiXG4gICAgICBpc09wZW49e3Byb3BzLmlzU2VsZWN0ZWR9XG4gICAgICBkcm9wZG93bj17XG4gICAgICAgIDxTZWxlY3RGaWVsZFxuICAgICAgICAgIGlkPVwidGVtcGxhdGUtaHRtbFwiXG4gICAgICAgICAgbGFiZWw9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmFkZFRlbXBsYXRlSFRNTC5sYWJlbH1cbiAgICAgICAgICBvbkNoYW5nZUJ5RXZlbnQ9e3VwZGF0ZUhUTUx9XG4gICAgICAgICAgb25DaGFuZ2VCeVZhbHVlPXt1cGRhdGVIVE1MQn1cbiAgICAgICAgICBvcHRpb25zPXtodG1sT3B0aW9ucy5tYXAoKHYpID0+ICh7XG4gICAgICAgICAgICBsYWJlbDogdHlwZW9mIHYubGFiZWwgPT09IFwiZnVuY3Rpb25cIiA/IHYubGFiZWwoKSA6IHYubGFiZWwsXG4gICAgICAgICAgICB2YWx1ZTogdi52YWx1ZSxcbiAgICAgICAgICAgIHByaW1hcnk6IHYucHJpbWFyeSxcbiAgICAgICAgICB9KSl9XG4gICAgICAgICAgcmVzZXRCbHVyPXtudWxsfVxuICAgICAgICAgIHVuYmx1cj17bnVsbH1cbiAgICAgICAgICB2YWx1ZT17cHJvcHMuZWxlbWVudC5odG1sfVxuICAgICAgICAvPlxuICAgICAgfVxuICAgID5cbiAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICA8L0VkaXRvckRyb3Bkb3duPlxuICApO1xufVxuXG5mdW5jdGlvbiBUZXh0V3JhcHBlcihwcm9wczogSURlZmF1bHRTbGF0ZUVsZW1lbnRXcmFwcGVyc1Byb3BzKSB7XG4gIGNvbnN0IFt0ZXh0T3B0aW9ucywgc2V0VGV4dE9wdGlvbnNdID0gdXNlU3RhdGU8SVRlbXBsYXRlT3B0aW9uW10+KFtdKTtcblxuICBjb25zdCB1cGRhdGVUZXh0Q29udGVudEIgPSB1c2VDYWxsYmFjaygobmV3Vjogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbGFiZWwgPSB0ZXh0T3B0aW9ucy5maW5kKChvKSA9PiBvLnZhbHVlID09PSBuZXdWKTtcbiAgICBwcm9wcy5oZWxwZXJzLnVwZGF0ZVRlbXBsYXRlVGV4dCh0eXBlb2YgbGFiZWwubGFiZWwgPT09IFwic3RyaW5nXCIgPyBsYWJlbC5sYWJlbCA6IGxhYmVsLmxhYmVsKCksIG5ld1YpO1xuICB9LCBbdGV4dE9wdGlvbnNdKTtcblxuICBjb25zdCB1cGRhdGVUZXh0Q29udGVudCA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHtcbiAgICB1cGRhdGVUZXh0Q29udGVudEIoZS50YXJnZXQudmFsdWUpO1xuICB9LCBbdXBkYXRlVGV4dENvbnRlbnRCXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXByb3BzLmlzU2VsZWN0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZXh0ID0gcHJvcHMuaGVscGVycy5nZXRDb250ZXh0Rm9yKHByb3BzLmVsZW1lbnQpO1xuICAgIGNvbnN0IHJvb3RDb250ZXh0ID0gcHJvcHMuaGVscGVycy5nZXRSb290Q29udGV4dCgpO1xuXG4gICAgLy8gbmVlZCB0byBmaW5kIHRoZSB0ZW1wbGF0ZWQgb3B0aW9ucyB0aGF0IGFyZSBhdmFpbGFibGVcbiAgICAvLyBnaXZlbiB0aGUgY3VycmVudCBjb250ZXh0XG4gICAgY29uc3QgdGV4dFByb3BlcnRpZXNUb1VzZTogSVRlbXBsYXRlT3B0aW9uW10gPSBbXTtcblxuICAgIC8vIG5vdyB3ZSBuZWVkIHRvIGdyYWIgdGhlIGN1cnJlbnQgY29udGV4dCwgaWYgd2UgaGF2ZSBhbnlcbiAgICBjb250ZXh0ICYmIE9iamVjdC5rZXlzKGNvbnRleHQucHJvcGVydGllcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAvLyBncmFiIGVhY2ggcHJvcGVydHkgYW5kIGNoZWNrIHRoZSB0eXBlIG9mIGl0XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbnRleHQucHJvcGVydGllc1trZXldO1xuICAgICAgLy8gaWYgaXQncyBub3QgYSBsaW5rXG4gICAgICBpZiAocHJvcGVydHkudHlwZSAhPT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBvdGhlcndpc2Ugd2UgaGF2ZSBhIHByb3BlcnR5IHdlIGNhbiB1c2VcbiAgICAgIHRleHRQcm9wZXJ0aWVzVG9Vc2UucHVzaCh7XG4gICAgICAgIHZhbHVlOiBrZXksXG4gICAgICAgIGxhYmVsOiBwcm9wZXJ0eS5sYWJlbCB8fCBrZXksXG4gICAgICAgIHByaW1hcnk6IGNvbnRleHQgIT09IHJvb3RDb250ZXh0LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAocm9vdENvbnRleHQgJiYgcm9vdENvbnRleHQgIT09IGNvbnRleHQpIHtcbiAgICAgIE9iamVjdC5rZXlzKHJvb3RDb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAvLyBncmFiIGVhY2ggcHJvcGVydHkgYW5kIGNoZWNrIHRoZSB0eXBlIG9mIGl0XG4gICAgICAgIGNvbnN0IHByb3BlcnR5ID0gcm9vdENvbnRleHQucHJvcGVydGllc1trZXldO1xuXG4gICAgICAgIGlmIChwcm9wZXJ0eS5ub25Sb290SW5oZXJpdGFibGUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiBpdCdzIG5vdCBhIGxpbmtcbiAgICAgICAgaWYgKHByb3BlcnR5LnR5cGUgIT09IFwidGV4dFwiKSB7XG4gICAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBvdGhlcndpc2Ugd2UgaGF2ZSBhIHByb3BlcnR5IHdlIGNhbiB1c2VcbiAgICAgICAgdGV4dFByb3BlcnRpZXNUb1VzZS5wdXNoKHtcbiAgICAgICAgICB2YWx1ZToga2V5LFxuICAgICAgICAgIGxhYmVsOiBwcm9wZXJ0eS5sYWJlbCB8fCBrZXksXG4gICAgICAgICAgcHJpbWFyeTogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gYW5kIHRoZSB2YWx1ZSBvZiBzdWNoIGlzIG5vdCBpbiB0aGUgbGlzdFxuICAgIGlmIChwcm9wcy5lbGVtZW50LnRleHRDb250ZW50ICYmICF0ZXh0UHJvcGVydGllc1RvVXNlLnNvbWUoKHApID0+IHAudmFsdWUgPT09IHByb3BzLmVsZW1lbnQudGV4dENvbnRlbnQpKSB7XG4gICAgICAvLyB3ZSBhZGQgaXRcbiAgICAgIHRleHRQcm9wZXJ0aWVzVG9Vc2UucHVzaCh7XG4gICAgICAgIHZhbHVlOiBwcm9wcy5lbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgICBsYWJlbDogKHByb3BzLmVsZW1lbnQuY2hpbGRyZW5bMF0gYXMgYW55KS50ZXh0LFxuICAgICAgICBwcmltYXJ5OiBmYWxzZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldFRleHRPcHRpb25zKHRleHRQcm9wZXJ0aWVzVG9Vc2UpO1xuICB9LCBbcHJvcHMuZWxlbWVudCwgcHJvcHMuaXNTZWxlY3RlZF0pO1xuXG4gIGNvbnN0IFNlbGVjdEZpZWxkID0gcHJvcHMuRWxlbWVudFdyYXBwZXJTZWxlY3RGaWVsZCB8fCBEZWZhdWx0V3JhcHBlckRyYXdlclNlbGVjdEZpZWxkO1xuXG4gIHJldHVybiAoXG4gICAgPEVkaXRvckRyb3Bkb3duXG4gICAgICBEcm9wZG93bkNvbXBvbmVudD17cHJvcHMuRHJvcGRvd25Db21wb25lbnR9XG4gICAgICBEcm9wZG93bkNvbXBvbmVudEJveD17cHJvcHMuRHJvcGRvd25Db21wb25lbnRCb3h9XG4gICAgICBEcm9wZG93bkNvbXBvbmVudFdyYXBwZXI9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50V3JhcHBlcn1cbiAgICAgIGRyb3Bkb3duQ29tcG9uZW50V3JhcHBlclRhZz1cInNwYW5cIlxuICAgICAgaXNPcGVuPXtwcm9wcy5pc1NlbGVjdGVkfVxuICAgICAgZHJvcGRvd249e1xuICAgICAgICA8U2VsZWN0RmllbGRcbiAgICAgICAgICBpZD1cInRlbXBsYXRlLXRleHRcIlxuICAgICAgICAgIGxhYmVsPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5hZGRUZW1wbGF0ZVRleHQubGFiZWx9XG4gICAgICAgICAgb25DaGFuZ2VCeUV2ZW50PXt1cGRhdGVUZXh0Q29udGVudH1cbiAgICAgICAgICBvbkNoYW5nZUJ5VmFsdWU9e3VwZGF0ZVRleHRDb250ZW50Qn1cbiAgICAgICAgICBvcHRpb25zPXt0ZXh0T3B0aW9ucy5tYXAoKHYpID0+ICh7XG4gICAgICAgICAgICBsYWJlbDogdHlwZW9mIHYubGFiZWwgPT09IFwiZnVuY3Rpb25cIiA/IHYubGFiZWwoKSA6IHYubGFiZWwsXG4gICAgICAgICAgICB2YWx1ZTogdi52YWx1ZSxcbiAgICAgICAgICAgIHByaW1hcnk6IHYucHJpbWFyeSxcbiAgICAgICAgICB9KSl9XG4gICAgICAgICAgcmVzZXRCbHVyPXtudWxsfVxuICAgICAgICAgIHVuYmx1cj17bnVsbH1cbiAgICAgICAgICB2YWx1ZT17cHJvcHMuZWxlbWVudC5odG1sfVxuICAgICAgICAvPlxuICAgICAgfVxuICAgID5cbiAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICA8L0VkaXRvckRyb3Bkb3duPlxuICApO1xufVxuXG5mdW5jdGlvbiBUZEFuZFRoKHByb3BzOiBJRGVmYXVsdFNsYXRlRWxlbWVudFdyYXBwZXJzUHJvcHMpIHtcbiAgY29uc3QgcGF0aCA9IHByb3BzLmhlbHBlcnMuUmVhY3RFZGl0b3IuZmluZFBhdGgocHJvcHMuaGVscGVycy5lZGl0b3IsIHByb3BzLmVsZW1lbnQpO1xuICBjb25zdCBwYXJlbnRQYXRoID0gWy4uLnBhdGhdO1xuICAvLyB0clxuICBwYXJlbnRQYXRoLnBvcCgpO1xuICAvLyB0aGVhZCBvciB0Ym9keSBvciB0Zm9vdFxuICBwYXJlbnRQYXRoLnBvcCgpO1xuXG4gIGNvbnN0IHBhcmVudFRoZWFkT3JUYm9keU9yVGZvb3QgPSBwcm9wcy5oZWxwZXJzLk5vZGUuZ2V0KHByb3BzLmhlbHBlcnMuZWRpdG9yLCBwYXJlbnRQYXRoKSBhcyBhbnk7XG5cbiAgcGFyZW50UGF0aC5wb3AoKTtcbiAgY29uc3QgdGFibGVFbGVtZW50ID0gcHJvcHMuaGVscGVycy5Ob2RlLmdldChwcm9wcy5oZWxwZXJzLmVkaXRvciwgcGFyZW50UGF0aCkgYXMgYW55O1xuXG4gIGNvbnN0IFt0YWJsZVR5cGUsIHNldFRhYmxlVHlwZV0gPSB1c2VTdGF0ZSgodGFibGVFbGVtZW50IGFzIElUYWJsZSkudGFibGVUeXBlIHx8IFwiXCIpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0VGFibGVUeXBlKCh0YWJsZUVsZW1lbnQgYXMgSVRhYmxlKS50YWJsZVR5cGUgfHwgXCJcIik7XG4gIH0sIFsodGFibGVFbGVtZW50IGFzIElUYWJsZSkudGFibGVUeXBlXSk7XG5cbiAgY29uc3QgdXBkYXRlVGFibGVUeXBlQiA9IHVzZUNhbGxiYWNrKChuZXdWYWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgcGF0aCA9IHByb3BzLmhlbHBlcnMuUmVhY3RFZGl0b3IuZmluZFBhdGgocHJvcHMuaGVscGVycy5lZGl0b3IsIHByb3BzLmVsZW1lbnQpO1xuICAgIGNvbnN0IHRhYmxlUGF0aCA9IFsuLi5wYXRoXTtcbiAgICAvLyB0clxuICAgIHRhYmxlUGF0aC5wb3AoKTtcbiAgICAvLyB0aGVhZCBvciB0Ym9keSBvciB0Zm9vdFxuICAgIHRhYmxlUGF0aC5wb3AoKTtcbiAgICAvLyB0YWJsZVxuICAgIHRhYmxlUGF0aC5wb3AoKTtcblxuICAgIHByb3BzLmhlbHBlcnMuc2V0KHtcbiAgICAgIHRhYmxlVHlwZTogbmV3VmFsdWUgfHwgbnVsbCxcbiAgICB9IGFzIGFueSwgdGFibGVQYXRoKTtcbiAgICBzZXRUYWJsZVR5cGUobmV3VmFsdWUgfHwgXCJcIik7XG4gIH0sIFtdKTtcblxuICBjb25zdCB1cGRhdGVUYWJsZVR5cGUgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgdXBkYXRlVGFibGVUeXBlQihlLnRhcmdldC52YWx1ZSlcbiAgfSwgW3VwZGF0ZVRhYmxlVHlwZUJdKTtcblxuICBjb25zdCBTZWxlY3RGaWVsZCA9IHByb3BzLkVsZW1lbnRXcmFwcGVyU2VsZWN0RmllbGQgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZDtcbiAgY29uc3QgQnV0dG9uID0gcHJvcHMuRWxlbWVudFdyYXBwZXJCdXR0b24gfHwgRGVmYXVsdEVsZW1lbnRXcmFwcGVyQnV0dG9uQ29tcG9uZW50O1xuXG4gIC8vIGJlY2F1c2Ugb2YgZG9tIG5lc3Rpbmcgd2Ugd2lsbCBqdXN0IHB1dCBhIGZha2UgY29tcG9uZW50IHRvIHRoZSBzaWRlXG4gIC8vIGFuZCBhIGZha2UgZWxlbWVudCBzbyB3ZSBkb24ndCBuZXN0IGEgdGQgaW4gdGhlIHRhYmxlXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICAgIDxFZGl0b3JEcm9wZG93blxuICAgICAgICBEcm9wZG93bkNvbXBvbmVudD17cHJvcHMuRHJvcGRvd25Db21wb25lbnR9XG4gICAgICAgIERyb3Bkb3duQ29tcG9uZW50Qm94PXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudEJveH1cbiAgICAgICAgRHJvcGRvd25Db21wb25lbnRXcmFwcGVyPXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudFdyYXBwZXJ9XG4gICAgICAgIGRyb3Bkb3duQ29tcG9uZW50V3JhcHBlclRhZz1cInRkXCJcbiAgICAgICAgZHJvcGRvd25Db21wb25lbnRXcmFwcGVySGlkZGVuPXt0cnVlfVxuICAgICAgICBkcm9wZG93bkNvbXBvbmVudFdyYXBwZXJQcm9wcz17eyBjb250ZW50RWRpdGFibGU6IGZhbHNlIH19XG4gICAgICAgIGRyb3Bkb3duU2l6YWJsZT17dHJ1ZX1cbiAgICAgICAgZHJvcGRvd249e1xuICAgICAgICAgIDw+XG4gICAgICAgICAgICB7cHJvcHMuZmVhdHVyZVN1cHBvcnQuYXZhaWxhYmxlVGFibGVzLmxlbmd0aCA/IChcbiAgICAgICAgICAgICAgPFNlbGVjdEZpZWxkXG4gICAgICAgICAgICAgICAgdmFsdWU9e3RhYmxlVHlwZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZUJ5RXZlbnQ9e3VwZGF0ZVRhYmxlVHlwZX1cbiAgICAgICAgICAgICAgICBkaXNwbGF5RW1wdHk9e3RydWV9XG4gICAgICAgICAgICAgICAgbGFiZWw9e3Byb3BzLmJhc2VJMThuLnR5cGV9XG4gICAgICAgICAgICAgICAgaWQ9XCJ0YWJsZS10eXBlXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZUJ5VmFsdWU9e3VwZGF0ZVRhYmxlVHlwZUJ9XG4gICAgICAgICAgICAgICAgb3B0aW9ucz17W3tcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIiAtIFwiLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgfV0uY29uY2F0KHByb3BzLmZlYXR1cmVTdXBwb3J0LmF2YWlsYWJsZVRhYmxlcyl9XG4gICAgICAgICAgICAgICAgcmVzZXRCbHVyPXtudWxsfVxuICAgICAgICAgICAgICAgIHVuYmx1cj17bnVsbH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBpZD1cInRhYmxlLWFkZC10ZFwiXG4gICAgICAgICAgICAgIGxhYmVsPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRBZGRUZExhYmVsfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5oZWxwZXJzLmluc2VydFRhYmxlQ29sdW1ufVxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBpZD1cInRhYmxlLWFkZC10clwiXG4gICAgICAgICAgICAgIGxhYmVsPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRBZGRUckxhYmVsfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5oZWxwZXJzLmluc2VydFRhYmxlUm93fVxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBpZD1cInRhYmxlLWRlbC10ZFwiXG4gICAgICAgICAgICAgIGxhYmVsPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXREZWxUZExhYmVsfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5oZWxwZXJzLmRlbGV0ZVRhYmxlQ29sdW1ufVxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBpZD1cInRhYmxlLWRlbC10clwiXG4gICAgICAgICAgICAgIGxhYmVsPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXREZWxUckxhYmVsfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5oZWxwZXJzLmRlbGV0ZVRhYmxlUm93fVxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBpZD1cInRhYmxlLXRvZ2dsZS10aFwiXG4gICAgICAgICAgICAgIGxhYmVsPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRBZGRUaExhYmVsfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5oZWxwZXJzLnRvZ2dsZVRhYmxlLmJpbmQobnVsbCwgXCJ0aGVhZFwiKX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFwcm9wcy5oZWxwZXJzLmNhblRvZ2dsZVRhYmxlKFwidGhlYWRcIil9XG4gICAgICAgICAgICAgIHNlbGVjdGVkPXtwcm9wcy5lbGVtZW50LnR5cGUgPT09IFwidGhcIn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIGlkPVwidGFibGUtdG9nZ2xlLXRmb290XCJcbiAgICAgICAgICAgICAgbGFiZWw9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdEFkZFRmb290TGFiZWx9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3Byb3BzLmhlbHBlcnMudG9nZ2xlVGFibGUuYmluZChudWxsLCBcInRmb290XCIpfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17IXByb3BzLmhlbHBlcnMuY2FuVG9nZ2xlVGFibGUoXCJ0Zm9vdFwiKX1cbiAgICAgICAgICAgICAgc2VsZWN0ZWQ9e3BhcmVudFRoZWFkT3JUYm9keU9yVGZvb3QudHlwZSA9PT0gXCJ0Zm9vdFwifVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8Lz5cbiAgICAgICAgfVxuICAgICAgICBpc09wZW49e3Byb3BzLmlzU2VsZWN0ZWR9XG4gICAgICAgIGdvSW50b1RyZWVEZXB0aD17LTR9XG4gICAgICA+XG4gICAgICAgIDxwIC8+XG4gICAgICA8L0VkaXRvckRyb3Bkb3duPlxuICAgIDwvPlxuICApO1xufVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdEVsZW1lbnRXcmFwcGVyczogSVNsYXRlRWRpdG9yRWxlbWVudFdyYXBwZXJzID0ge1xuICBjb21wb25lbnRzOiB7XG4gICAgbGluazogKHByb3BzOiBJRGVmYXVsdFNsYXRlRWxlbWVudFdyYXBwZXJzUHJvcHMpID0+IHtcbiAgICAgIGNvbnN0IFt2YWxpZCwgc2V0VmFsaWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgICBjb25zdCBbbGlua09wdGlvbnMsIHNldExpbmtPcHRpb25zXSA9IHVzZVN0YXRlPElUZW1wbGF0ZU9wdGlvbltdPihbXSk7XG4gICAgICBjb25zdCBbZWxlbWVudEhyZWYsIHNldEVsZW1lbnRIcmVmXSA9IHVzZVN0YXRlKChwcm9wcy5lbGVtZW50IGFzIElMaW5rKS5ocmVmIHx8IFwiXCIpO1xuXG4gICAgICBjb25zdCB1cGRhdGVFbGVtZW50SHJlZkIgPSB1c2VDYWxsYmFjaygobmV3Vjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkID0gcHJvcHMuaGVscGVycy51cGRhdGVMaW5rKG5ld1YsIChwcm9wcy5lbGVtZW50IGFzIElMaW5rKS50aHJlZiB8fCBudWxsKTtcbiAgICAgICAgc2V0RWxlbWVudEhyZWYobmV3Vik7XG4gICAgICAgIHNldFZhbGlkKHZhbGlkKTtcbiAgICAgIH0sIFtwcm9wcy5lbGVtZW50XSk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZUVsZW1lbnRUSHJlZkIgPSB1c2VDYWxsYmFjaygobmV3Vjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkID0gcHJvcHMuaGVscGVycy51cGRhdGVMaW5rKChwcm9wcy5lbGVtZW50IGFzIElMaW5rKS5ocmVmIHx8IG51bGwsIG5ld1YpO1xuICAgICAgICBzZXRWYWxpZCh2YWxpZCk7XG4gICAgICB9LCBbcHJvcHMuZWxlbWVudF0pO1xuXG4gICAgICBjb25zdCB1cGRhdGVFbGVtZW50SHJlZiA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgICB1cGRhdGVFbGVtZW50SHJlZkIoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfSwgW3VwZGF0ZUVsZW1lbnRIcmVmQl0pO1xuXG4gICAgICBjb25zdCB1cGRhdGVFbGVtZW50VEhyZWYgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgICAgIHVwZGF0ZUVsZW1lbnRUSHJlZkIoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfSwgW10pO1xuXG4gICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXByb3BzLmlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGV4dCA9IHByb3BzLmhlbHBlcnMuZ2V0Q29udGV4dEZvcihwcm9wcy5lbGVtZW50KTtcbiAgICAgICAgY29uc3Qgcm9vdENvbnRleHQgPSBwcm9wcy5oZWxwZXJzLmdldFJvb3RDb250ZXh0KCk7XG5cbiAgICAgICAgLy8gbmVlZCB0byBmaW5kIHRoZSB0ZW1wbGF0ZWQgb3B0aW9ucyB0aGF0IGFyZSBhdmFpbGFibGVcbiAgICAgICAgLy8gZ2l2ZW4gdGhlIGN1cnJlbnQgY29udGV4dFxuICAgICAgICBjb25zdCBsaW5rUHJvcGVydGllc1RvVXNlOiBJVGVtcGxhdGVPcHRpb25bXSA9IFtdO1xuXG4gICAgICAgIC8vIG5vdyB3ZSBuZWVkIHRvIGdyYWIgdGhlIGN1cnJlbnQgY29udGV4dCwgaWYgd2UgaGF2ZSBhbnlcbiAgICAgICAgY29udGV4dCAmJiBPYmplY3Qua2V5cyhjb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgIC8vIGdyYWIgZWFjaCBwcm9wZXJ0eSBhbmQgY2hlY2sgdGhlIHR5cGUgb2YgaXRcbiAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbnRleHQucHJvcGVydGllc1trZXldO1xuICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IGEgbGlua1xuICAgICAgICAgIGlmIChwcm9wZXJ0eS50eXBlICE9PSBcImxpbmtcIikge1xuICAgICAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBvdGhlcndpc2Ugd2UgaGF2ZSBhIHByb3BlcnR5IHdlIGNhbiB1c2VcbiAgICAgICAgICBsaW5rUHJvcGVydGllc1RvVXNlLnB1c2goe1xuICAgICAgICAgICAgdmFsdWU6IGtleSxcbiAgICAgICAgICAgIGxhYmVsOiBwcm9wZXJ0eS5sYWJlbCB8fCBrZXksXG4gICAgICAgICAgICBwcmltYXJ5OiBjb250ZXh0ICE9PSByb290Q29udGV4dCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJvb3RDb250ZXh0ICYmIHJvb3RDb250ZXh0ICE9PSBjb250ZXh0KSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMocm9vdENvbnRleHQucHJvcGVydGllcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBncmFiIGVhY2ggcHJvcGVydHkgYW5kIGNoZWNrIHRoZSB0eXBlIG9mIGl0XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHJvb3RDb250ZXh0LnByb3BlcnRpZXNba2V5XTtcblxuICAgICAgICAgICAgaWYgKHByb3BlcnR5Lm5vblJvb3RJbmhlcml0YWJsZSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IGEgbGlua1xuICAgICAgICAgICAgaWYgKHByb3BlcnR5LnR5cGUgIT09IFwibGlua1wiKSB7XG4gICAgICAgICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIGhhdmUgYSBwcm9wZXJ0eSB3ZSBjYW4gdXNlXG4gICAgICAgICAgICBsaW5rUHJvcGVydGllc1RvVXNlLnB1c2goe1xuICAgICAgICAgICAgICB2YWx1ZToga2V5LFxuICAgICAgICAgICAgICBsYWJlbDogcHJvcGVydHkubGFiZWwgfHwga2V5LFxuICAgICAgICAgICAgICBwcmltYXJ5OiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYW5kIHRoZSB2YWx1ZSBvZiBzdWNoIGlzIG5vdCBpbiB0aGUgbGlzdFxuICAgICAgICBpZiAoKHByb3BzLmVsZW1lbnQgYXMgSUxpbmspLnRocmVmICYmICFsaW5rUHJvcGVydGllc1RvVXNlLnNvbWUoKHApID0+IHAudmFsdWUgPT09IChwcm9wcy5lbGVtZW50IGFzIElMaW5rKS50aHJlZikpIHtcbiAgICAgICAgICAvLyB3ZSBhZGQgaXRcbiAgICAgICAgICBsaW5rUHJvcGVydGllc1RvVXNlLnB1c2goe1xuICAgICAgICAgICAgdmFsdWU6IChwcm9wcy5lbGVtZW50IGFzIElMaW5rKS50aHJlZixcbiAgICAgICAgICAgIGxhYmVsOiAocHJvcHMuZWxlbWVudCBhcyBJTGluaykudGhyZWYsXG4gICAgICAgICAgICBwcmltYXJ5OiBmYWxzZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldEVsZW1lbnRIcmVmKChwcm9wcy5lbGVtZW50IGFzIElMaW5rKS5ocmVmIHx8IFwiXCIpO1xuICAgICAgICBzZXRMaW5rT3B0aW9ucyhsaW5rUHJvcGVydGllc1RvVXNlKTtcbiAgICAgIH0sIFtwcm9wcy5lbGVtZW50LCBwcm9wcy5pc1NlbGVjdGVkXSk7XG5cbiAgICAgIGNvbnN0IFNlbGVjdEZpZWxkID0gcHJvcHMuRWxlbWVudFdyYXBwZXJTZWxlY3RGaWVsZCB8fCBEZWZhdWx0V3JhcHBlckRyYXdlclNlbGVjdEZpZWxkO1xuICAgICAgY29uc3QgVGV4dEZpZWxkID0gcHJvcHMuRWxlbWVudFdyYXBwZXJUZXh0RmllbGQgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJUZXh0RmllbGQ7XG4gICAgICBjb25zdCBGaWVsZFdyYXBwZXJGb3JNb3JlT3B0aW9ucyA9IHByb3BzLkZpZWxkV3JhcHBlckZvck1vcmVPcHRpb25zIHx8IERlZmF1bHRGaWVsZFdyYXBwZXJGb3JNb3JlT3B0aW9ucztcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEVkaXRvckRyb3Bkb3duXG4gICAgICAgICAgRHJvcGRvd25Db21wb25lbnQ9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50fVxuICAgICAgICAgIERyb3Bkb3duQ29tcG9uZW50Qm94PXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudEJveH1cbiAgICAgICAgICBEcm9wZG93bkNvbXBvbmVudFdyYXBwZXI9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50V3JhcHBlcn1cbiAgICAgICAgICBkcm9wZG93bkNvbXBvbmVudFdyYXBwZXJUYWc9XCJzcGFuXCJcbiAgICAgICAgICBpc09wZW49e3Byb3BzLmlzU2VsZWN0ZWR9XG4gICAgICAgICAgZHJvcGRvd249e1xuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgICAgICAgIHZhbHVlPXtlbGVtZW50SHJlZn1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZUJ5RXZlbnQ9e3VwZGF0ZUVsZW1lbnRIcmVmfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlQnlWYWx1ZT17dXBkYXRlRWxlbWVudEhyZWZCfVxuICAgICAgICAgICAgICAgIGxhYmVsPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5zZXRMaW5rLmxhYmVsfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXshIShwcm9wcy5lbGVtZW50IGFzIElMaW5rKS50aHJlZn1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17XG4gICAgICAgICAgICAgICAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0V4dGVybmFsTGlua3MgP1xuICAgICAgICAgICAgICAgICAgICAocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5zZXRMaW5rLnBsYWNlaG9sZGVyIDpcbiAgICAgICAgICAgICAgICAgICAgKHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuc2V0TGluay5wbGFjZWhvbGRlckxvY2FsT25seVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZD1cImxpbmstaHJlZlwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsaW5rT3B0aW9ucy5sZW5ndGggP1xuICAgICAgICAgICAgICAgICAgPEZpZWxkV3JhcHBlckZvck1vcmVPcHRpb25zIGxhYmVsPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5zZXRMaW5rLnRlbXBsYXRlZH0+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RGaWVsZFxuICAgICAgICAgICAgICAgICAgICAgIGlkPVwibGluay10aHJlZlwiXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9eyhwcm9wcy5lbGVtZW50IGFzIElMaW5rKS50aHJlZiB8fCBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5zZXRMaW5rLnRlbXBsYXRlZExhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5zZXRMaW5rLnRlbXBsYXRlZFBsYWNlaG9sZGVyfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlQnlFdmVudD17dXBkYXRlRWxlbWVudFRIcmVmfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlQnlWYWx1ZT17dXBkYXRlRWxlbWVudFRIcmVmQn1cbiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5RW1wdHk9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17W3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5zZXRMaW5rLnRlbXBsYXRlZFVuc3BlY2lmaWVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgfV0uY29uY2F0KGxpbmtPcHRpb25zLm1hcCgodikgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0eXBlb2Ygdi5sYWJlbCA9PT0gXCJmdW5jdGlvblwiID8gdi5sYWJlbCgpIDogdi5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeTogdi5wcmltYXJ5LFxuICAgICAgICAgICAgICAgICAgICAgIH0pKSl9XG4gICAgICAgICAgICAgICAgICAgICAgcmVzZXRCbHVyPXtudWxsfVxuICAgICAgICAgICAgICAgICAgICAgIHVuYmx1cj17bnVsbH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvRmllbGRXcmFwcGVyRm9yTW9yZU9wdGlvbnM+XG4gICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgIH1cbiAgICAgICAgPlxuICAgICAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgPC9FZGl0b3JEcm9wZG93bj5cbiAgICAgICk7XG4gICAgfSxcbiAgICB2aWRlbzogKHByb3BzOiBJRGVmYXVsdFNsYXRlRWxlbWVudFdyYXBwZXJzUHJvcHMpID0+IHtcbiAgICAgIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdXNlU3RhdGUoZ2V0VmlkZW9VUkwocHJvcHMuZWxlbWVudCBhcyBJVmlkZW8pKTtcbiAgICAgIGNvbnN0IFt2YWxpZCwgc2V0VmFsaWRdID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZVZpZGVvVVJMQiA9IHVzZUNhbGxiYWNrKChuZXdWOiBzdHJpbmcpID0+IHtcbiAgICAgICAgc2V0VmFsdWUobmV3Vik7XG4gICAgICAgIHNldFZhbGlkKHByb3BzLmhlbHBlcnMudXBkYXRlVmlkZW8obmV3VikpO1xuICAgICAgfSwgW10pO1xuXG4gICAgICBjb25zdCB1cGRhdGVWaWRlb1VSTCA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgICB1cGRhdGVWaWRlb1VSTEIoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfSwgW3VwZGF0ZVZpZGVvVVJMQl0pO1xuXG4gICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzZXRWYWx1ZShnZXRWaWRlb1VSTChwcm9wcy5lbGVtZW50IGFzIElWaWRlbykpO1xuICAgICAgfSwgW3Byb3BzLmVsZW1lbnRdKTtcblxuICAgICAgY29uc3QgVGV4dEZpZWxkID0gcHJvcHMuRWxlbWVudFdyYXBwZXJUZXh0RmllbGQgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJUZXh0RmllbGQ7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxFZGl0b3JEcm9wZG93blxuICAgICAgICAgIERyb3Bkb3duQ29tcG9uZW50PXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudH1cbiAgICAgICAgICBEcm9wZG93bkNvbXBvbmVudEJveD17cHJvcHMuRHJvcGRvd25Db21wb25lbnRCb3h9XG4gICAgICAgICAgRHJvcGRvd25Db21wb25lbnRXcmFwcGVyPXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudFdyYXBwZXJ9XG4gICAgICAgICAgZHJvcGRvd249e1xuICAgICAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlQnlFdmVudD17dXBkYXRlVmlkZW9VUkx9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlQnlWYWx1ZT17dXBkYXRlVmlkZW9VUkxCfVxuICAgICAgICAgICAgICBsYWJlbD17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykubG9hZFZpZGVvLmxhYmVsfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykubG9hZFZpZGVvLnBsYWNlaG9sZGVyfVxuICAgICAgICAgICAgICBpZD1cInZpZGVvLXVybFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIH1cbiAgICAgICAgICBkcm9wZG93bkNvbXBvbmVudFdyYXBwZXJUYWc9XCJkaXZcIlxuICAgICAgICAgIGdvSW50b1RyZWVEZXB0aD17MX1cbiAgICAgICAgICBpc09wZW49e3Byb3BzLmlzU2VsZWN0ZWR9XG4gICAgICAgID5cbiAgICAgICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgICAgIDwvRWRpdG9yRHJvcGRvd24+XG4gICAgICApO1xuICAgIH0sXG4gICAgaW1hZ2U6IChwcm9wczogSURlZmF1bHRTbGF0ZUVsZW1lbnRXcmFwcGVyc1Byb3BzKSA9PiB7XG4gICAgICBjb25zdCBbYWx0LCBzZXRBbHRdID0gdXNlU3RhdGUoKHByb3BzLmVsZW1lbnQgYXMgSUltYWdlKS5hbHQgfHwgXCJcIik7XG5cbiAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldEFsdCgocHJvcHMuZWxlbWVudCBhcyBJSW1hZ2UpLmFsdCB8fCBcIlwiKTtcbiAgICAgIH0sIFtwcm9wcy5lbGVtZW50XSk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZUFsdEIgPSB1c2VDYWxsYmFjaygobmV3VmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gcHJvcHMuaGVscGVycy5SZWFjdEVkaXRvci5maW5kUGF0aChwcm9wcy5oZWxwZXJzLmVkaXRvciwgcHJvcHMuZWxlbWVudCk7XG4gICAgICAgIHByb3BzLmhlbHBlcnMuc2V0KHtcbiAgICAgICAgICBhbHQ6IG5ld1ZhbHVlIHx8IG51bGwsXG4gICAgICAgIH0gYXMgYW55LCBwYXRoKTtcbiAgICAgICAgc2V0QWx0KG5ld1ZhbHVlKTtcbiAgICAgIH0sIFtdKTtcblxuICAgICAgY29uc3QgdXBkYXRlQWx0ID0gdXNlQ2FsbGJhY2soKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgICAgIHVwZGF0ZUFsdEIoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfSwgW3VwZGF0ZUFsdEJdKTtcblxuICAgICAgY29uc3QgVGV4dEZpZWxkID0gcHJvcHMuRWxlbWVudFdyYXBwZXJUZXh0RmllbGQgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJUZXh0RmllbGQ7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxFZGl0b3JEcm9wZG93blxuICAgICAgICAgIERyb3Bkb3duQ29tcG9uZW50PXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudH1cbiAgICAgICAgICBEcm9wZG93bkNvbXBvbmVudEJveD17cHJvcHMuRHJvcGRvd25Db21wb25lbnRCb3h9XG4gICAgICAgICAgRHJvcGRvd25Db21wb25lbnRXcmFwcGVyPXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudFdyYXBwZXJ9XG4gICAgICAgICAgZHJvcGRvd249e1xuICAgICAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgICAgICB2YWx1ZT17YWx0fVxuICAgICAgICAgICAgICBvbkNoYW5nZUJ5RXZlbnQ9e3VwZGF0ZUFsdH1cbiAgICAgICAgICAgICAgb25DaGFuZ2VCeVZhbHVlPXt1cGRhdGVBbHRCfVxuICAgICAgICAgICAgICBsYWJlbD17cHJvcHMuYmFzZUkxOG4uYWx0fVxuICAgICAgICAgICAgICBpZD1cImltYWdlLWFsdFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIH1cbiAgICAgICAgICBkcm9wZG93bkNvbXBvbmVudFdyYXBwZXJUYWc9XCJkaXZcIlxuICAgICAgICAgIGdvSW50b1RyZWVEZXB0aD17KHByb3BzLmVsZW1lbnQgYXMgSUltYWdlKS5zdGFuZGFsb25lID8gbnVsbCA6IDF9XG4gICAgICAgICAgaXNPcGVuPXtwcm9wcy5pc1NlbGVjdGVkfVxuICAgICAgICA+XG4gICAgICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgICAgICA8L0VkaXRvckRyb3Bkb3duPlxuICAgICAgKTtcbiAgICB9LFxuICAgIHRkOiBUZEFuZFRoIGFzIGFueSxcbiAgICB0aDogVGRBbmRUaCBhcyBhbnksXG4gICAgdGl0bGU6IChwcm9wczogSURlZmF1bHRTbGF0ZUVsZW1lbnRXcmFwcGVyc1Byb3BzKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVUaXRsZVR5cGVCID0gdXNlQ2FsbGJhY2soKG5ld1Y6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gcHJvcHMuaGVscGVycy5SZWFjdEVkaXRvci5maW5kUGF0aChwcm9wcy5oZWxwZXJzLmVkaXRvciwgcHJvcHMuZWxlbWVudCk7XG4gICAgICAgIHByb3BzLmhlbHBlcnMuc2V0KHtcbiAgICAgICAgICB0aXRsZVR5cGU6IG5ld1YgfHwgbnVsbCxcbiAgICAgICAgfSBhcyBhbnksIHBhdGgpO1xuICAgICAgfSwgW10pO1xuXG4gICAgICBjb25zdCB1cGRhdGVUaXRsZVR5cGUgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgICAgIHVwZGF0ZVRpdGxlVHlwZUIoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfSwgW3VwZGF0ZVRpdGxlVHlwZUJdKTtcblxuICAgICAgY29uc3QgU2VsZWN0RmllbGQgPSBwcm9wcy5FbGVtZW50V3JhcHBlclNlbGVjdEZpZWxkIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGQ7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxFZGl0b3JEcm9wZG93blxuICAgICAgICAgIERyb3Bkb3duQ29tcG9uZW50PXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudH1cbiAgICAgICAgICBEcm9wZG93bkNvbXBvbmVudEJveD17cHJvcHMuRHJvcGRvd25Db21wb25lbnRCb3h9XG4gICAgICAgICAgRHJvcGRvd25Db21wb25lbnRXcmFwcGVyPXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudFdyYXBwZXJ9XG4gICAgICAgICAgZHJvcGRvd25Db21wb25lbnRXcmFwcGVyVGFnPVwiZGl2XCJcbiAgICAgICAgICBpc09wZW49e3Byb3BzLmlzU2VsZWN0ZWR9XG4gICAgICAgICAgZHJvcGRvd249e1xuICAgICAgICAgICAgPFNlbGVjdEZpZWxkXG4gICAgICAgICAgICAgIGlkPVwidGl0bGUtdHlwZVwiXG4gICAgICAgICAgICAgIGxhYmVsPXtwcm9wcy5iYXNlSTE4bi50eXBlfVxuICAgICAgICAgICAgICBvbkNoYW5nZUJ5RXZlbnQ9e3VwZGF0ZVRpdGxlVHlwZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2VCeVZhbHVlPXt1cGRhdGVUaXRsZVR5cGVCfVxuICAgICAgICAgICAgICBvcHRpb25zPXtbXCJoMVwiLCBcImgyXCIsIFwiaDNcIiwgXCJoNFwiLCBcImg1XCIsIFwiaDZcIl0ubWFwKChFbGVtZW50OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6IDxFbGVtZW50Pntwcm9wcy5iYXNlSTE4bi50aXRsZX08L0VsZW1lbnQ+LFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IEVsZW1lbnQgPyBFbGVtZW50IDogXCIgLSBcIixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICByZXNldEJsdXI9e251bGx9XG4gICAgICAgICAgICAgIHVuYmx1cj17bnVsbH1cbiAgICAgICAgICAgICAgdmFsdWU9eyhwcm9wcy5lbGVtZW50IGFzIElUaXRsZSkudGl0bGVUeXBlIHx8IFwiaDFcIn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgfVxuICAgICAgICA+XG4gICAgICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgICAgICA8L0VkaXRvckRyb3Bkb3duPlxuICAgICAgKSBhcyBhbnk7XG4gICAgfSxcbiAgICBpbmxpbmU6IChwcm9wczogSURlZmF1bHRTbGF0ZUVsZW1lbnRXcmFwcGVyc1Byb3BzKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHByb3BzLmVsZW1lbnQudGV4dENvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmNoaWxkcmVuO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gKDxUZXh0V3JhcHBlciB7Li4ucHJvcHN9IC8+KSBhcyBhbnk7XG4gICAgfSxcbiAgICBcInZvaWQtYmxvY2tcIjogKHByb3BzOiBJRGVmYXVsdFNsYXRlRWxlbWVudFdyYXBwZXJzUHJvcHMpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgcHJvcHMuZWxlbWVudC5odG1sID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBwcm9wcy5jaGlsZHJlbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICg8SFRNTFdyYXBwZXIgey4uLnByb3BzfSAvPikgYXMgYW55O1xuICAgIH0sXG4gICAgY29udGFpbmVyOiAocHJvcHM6IElEZWZhdWx0U2xhdGVFbGVtZW50V3JhcHBlcnNQcm9wcykgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlQ29udGFpbmVyVHlwZUIgPSB1c2VDYWxsYmFjaygobmV3Vjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBwcm9wcy5oZWxwZXJzLlJlYWN0RWRpdG9yLmZpbmRQYXRoKHByb3BzLmhlbHBlcnMuZWRpdG9yLCBwcm9wcy5lbGVtZW50KTtcbiAgICAgICAgcHJvcHMuaGVscGVycy5zZXQoe1xuICAgICAgICAgIGNvbnRhaW5lclR5cGU6IG5ld1YgfHwgbnVsbCxcbiAgICAgICAgfSBhcyBhbnksIHBhdGgpO1xuICAgICAgfSwgW10pO1xuXG4gICAgICBjb25zdCB1cGRhdGVDb250YWluZXJUeXBlID0gdXNlQ2FsbGJhY2soKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgICAgICB1cGRhdGVDb250YWluZXJUeXBlQihlLnRhcmdldC52YWx1ZSk7XG4gICAgICB9LCBbdXBkYXRlQ29udGFpbmVyVHlwZUJdKTtcblxuICAgICAgaWYgKCFwcm9wcy5mZWF0dXJlU3VwcG9ydC5hdmFpbGFibGVDb250YWluZXJzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gcHJvcHMuY2hpbGRyZW47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFNlbGVjdEZpZWxkID0gcHJvcHMuRWxlbWVudFdyYXBwZXJTZWxlY3RGaWVsZCB8fCBEZWZhdWx0V3JhcHBlckRyYXdlclNlbGVjdEZpZWxkO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8RWRpdG9yRHJvcGRvd25cbiAgICAgICAgICBEcm9wZG93bkNvbXBvbmVudD17cHJvcHMuRHJvcGRvd25Db21wb25lbnR9XG4gICAgICAgICAgRHJvcGRvd25Db21wb25lbnRCb3g9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50Qm94fVxuICAgICAgICAgIERyb3Bkb3duQ29tcG9uZW50V3JhcHBlcj17cHJvcHMuRHJvcGRvd25Db21wb25lbnRXcmFwcGVyfVxuICAgICAgICAgIGRyb3Bkb3duQ29tcG9uZW50V3JhcHBlclRhZz1cInNwYW5cIlxuICAgICAgICAgIGlzT3Blbj17cHJvcHMuaXNTZWxlY3RlZH1cbiAgICAgICAgICBkcm9wZG93bj17XG4gICAgICAgICAgICA8U2VsZWN0RmllbGRcbiAgICAgICAgICAgICAgaWQ9XCJjb250YWluZXItdHlwZVwiXG4gICAgICAgICAgICAgIGxhYmVsPXtwcm9wcy5iYXNlSTE4bi50eXBlfVxuICAgICAgICAgICAgICBvbkNoYW5nZUJ5RXZlbnQ9e3VwZGF0ZUNvbnRhaW5lclR5cGV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlQnlWYWx1ZT17dXBkYXRlQ29udGFpbmVyVHlwZUJ9XG4gICAgICAgICAgICAgIG9wdGlvbnM9e1t7XG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiIC0gXCIsXG4gICAgICAgICAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgICAgICAgIH1dLmNvbmNhdChwcm9wcy5mZWF0dXJlU3VwcG9ydC5hdmFpbGFibGVDb250YWluZXJzKX1cbiAgICAgICAgICAgICAgcmVzZXRCbHVyPXtudWxsfVxuICAgICAgICAgICAgICB1bmJsdXI9e251bGx9XG4gICAgICAgICAgICAgIHZhbHVlPXsocHJvcHMuZWxlbWVudCBhcyBJQ29udGFpbmVyKS5jb250YWluZXJUeXBlIHx8IFwiXCJ9XG4gICAgICAgICAgICAgIGRpc3BsYXlFbXB0eT17dHJ1ZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgfVxuICAgICAgICA+XG4gICAgICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgICAgICA8L0VkaXRvckRyb3Bkb3duPlxuICAgICAgKSBhcyBhbnk7XG4gICAgfVxuICB9XG59IiwgIi8qKlxuICogVGhpcyBpcyBhIGRyb3Bkb3duIHRoYXQgaXMgdXNlZCBmb3IgaGF2aW5nIGFuIGVkaXRvciBmdW5jdGlvbmFsaXR5IGxpa2VcbiAqIHRvb2xiYXIsIHVzZWQgYSBsb3QgaW4gdGhlIGZhc3QgcHJvdG90eXBpbmcgbWF0ZXJpYWwgZWRpdG9yXG4gKi9cblxuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5cbi8qKlxuICogVGhlIGNvbXBvbmVudCB3cmFwcGVyIHRvIHVzZSxcbiAqIHNob3VsZCBzdXBwb3J0IGEgcmVmXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSURyb3Bkb3duQ29tcG9uZW50V3JhcHBlclByb3BzIHtcbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgdGhlIHRhZyB0aGUgY29tcG9uZW50IHNob3VsZCBoYXZlXG4gICAqL1xuICB0YWc6IHN0cmluZztcbiAgLyoqXG4gICAqIGV4dHJhIHByb3BzIHRoZSBjb21wb25lbnQgd3JhcHBlciBzaG91bGQgaGF2ZVxuICAgKi9cbiAgcHJvcHM6IGFueTtcbiAgLyoqXG4gICAqIFRoZSBjaGlsZHJlbiBpdCBpcyB3cmFwcGluZ1xuICAgKi9cbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuY29uc3QgRGVmYXVsdERyb3Bkb3duQ29tcG9uZW50V3JhcHBlciA9IFJlYWN0LmZvcndhcmRSZWYoKHByb3BzOiBJRHJvcGRvd25Db21wb25lbnRXcmFwcGVyUHJvcHMsIHJlZikgPT4ge1xuICBjb25zdCBFbGVtZW50ID0gcHJvcHMudGFnO1xuICByZXR1cm4gKFxuICAgIDxFbGVtZW50XG4gICAgICBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckRyb3Bkb3duQ29udGVudFdyYXBwZXJcIlxuICAgICAgey4uLnByb3BzLnByb3BzfVxuICAgICAgcmVmPXtyZWZ9XG4gICAgPlxuICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgIDwvRWxlbWVudD5cbiAgKVxufSk7XG5cblxuLyoqXG4gKiBUaGUgcHJvcHMgZm9yIHRoZSBkcm9wZG93blxuICovXG5leHBvcnQgaW50ZXJmYWNlIElFZGl0b3JEcm9wZG93biB7XG4gIC8qKlxuICAgKiB3ZXRoZXIgaXQgaXMgb3BlblxuICAgKi9cbiAgaXNPcGVuOiBib29sZWFuO1xuICAvKipcbiAgICogV2hhdCB6SW5kZXggdG8gdXNlIHdoZW4gcG9wcGluZyB1cFxuICAgKi9cbiAgekluZGV4PzogbnVtYmVyO1xuICAvKipcbiAgICogdGhlIGNvbnRlbnRzIG9mIHRoZSBkcm9wZG93biBpdHNlbGZcbiAgICovXG4gIGRyb3Bkb3duOiBSZWFjdC5SZWFjdE5vZGU7XG4gIC8qKlxuICAgKiBUaGUgdGFnIHRoZSBjb21wb25lbnQgd3JhcHBlciBzaG91bGQgdXNlXG4gICAqL1xuICBkcm9wZG93bkNvbXBvbmVudFdyYXBwZXJUYWc/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBleHRyYSBwcm9wcyB0aGUgY29tcG9uZW50IHdyYXBwZXIgc2hvdWxkIGhhdmVcbiAgICovXG4gIGRyb3Bkb3duQ29tcG9uZW50V3JhcHBlclByb3BzPzogYW55O1xuICAvKipcbiAgICogVGhlIGNvbXBvbmVudCB0aGUgZHJvcGRvd24gaXMgdXNpbmcgYXMgYSB3cmFwcGVyXG4gICAqIGZvciB0aGUgZWxlbWVudFxuICAgKi9cbiAgRHJvcGRvd25Db21wb25lbnRXcmFwcGVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJvcGRvd25Db21wb25lbnRXcmFwcGVyUHJvcHM+O1xuICAvKipcbiAgICogd2hldGhlciB0aGUgY29tcG9uZW50IHdyYXBwZXIgc2hvdWxkIGJlIGhpZGRlblxuICAgKi9cbiAgZHJvcGRvd25Db21wb25lbnRXcmFwcGVySGlkZGVuPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIHdoZXRoZXIgdG8gdXNlIHRoZSBkcm9wZG93biBhcyBzaXphYmxlXG4gICAqL1xuICBkcm9wZG93blNpemFibGU/OiBib29sZWFuO1xuICAvKipcbiAgICogdGhlIGVsZW1lbnQgdGhhdCBpcyB0byBiZSByZW5kZXJlZFxuICAgKi9cbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIHRoZSBkcm9wZG93biB3aWxsIGFuY2hvciBpdHNlbGYgbm9ybWFsbHkgdG8gdGhlIG5leHQgYXZhaWxhYmxlIGVsZW1lbnQgbm9kZVxuICAgKiBlaXRoZXIgdGhlIGZpcnN0IG9yIHRoZSBsYXN0IGRlcGVuZGluZyBvbiB0aGVpciBwb3NpdGlvbiwgdXNlIHRoaXMgdG8gdHVuZSB0aGUgZGlyZWN0aW9uXG4gICAqIGZvciBleGFtcGxlIHdpdGggYSB2YWx1ZSBvZiAyXG4gICAqIFxuICAgKiA8ZGl2IGNsYXNzPVwid3JhcHBlclwiPlxuICAgKiAgIDxkaXYgY2xhc3M9XCJlbGVtZW50LWluLXF1ZXN0aW9uXCI+XG4gICAqICAgICA8ZGl2IGNsYXNzPVwic29tZXRoaW5nXCI+XG4gICAqICAgICAgIDxkaXYgY2xhc3M9XCJzb21ldGhpbmctZWxzZVwiPlxuICAgKiAgICAgICA8L2Rpdj5cbiAgICogICAgIDwvZGl2PlxuICAgKiAgIDwvZGl2PlxuICAgKiA8L2Rpdj5cbiAgICogXG4gICAqIGl0IHdpbGwgdXNlIFwic29tZXRoaW5nLWVsc2VcIiBhcyB0aGUgcG9zaXRpb25pbmcgZWxlbWVudCwgaG93ZXZlciByZXZlcnNlIHZhbHVlcyBhcmUgYWxzbyB2YWxpZFxuICAgKiBcbiAgICogPGRpdiBjbGFzcz1cInBhcmVudFwiPlxuICAgKiAgIDxkaXYgY2xhc3M9XCJ3cmFwcGVyXCI+XG4gICAqICAgICA8ZGl2IGNsYXNzPVwiZWxlbWVudC1pbi1xdWVzdGlvblwiPlxuICAgKiAgICAgICA8ZGl2IGNsYXNzPVwic29tZXRoaW5nXCI+XG4gICAqICAgICAgICAgPGRpdiBjbGFzcz1cInNvbWV0aGluZy1lbHNlXCI+XG4gICAqICAgICAgICAgPC9kaXY+XG4gICAqICAgICAgIDwvZGl2PlxuICAgKiAgICAgPC9kaXY+XG4gICAqICAgPC9kaXY+XG4gICAqIDwvZGl2PlxuICAgKiBcbiAgICogd2l0aCBhIHZhbHVlIG9mIC0yIFwicGFyZW50XCIgd2lsbCBiZSB1c2VkIGluc3RlYWRcbiAgICovXG4gIGdvSW50b1RyZWVEZXB0aD86IG51bWJlcjtcblxuICAvKipcbiAgICogaWYgdHJ1ZSB0aGUgZWxlbWVudCB3aWxsIHRyaWdnZXIgYSBvbkNsb3NlIGV2ZW50IHdoZW4gYW55dGhpbmdcbiAgICogb3V0c2lkZSBvZiBpdCBpcyBjbGlja2VkIG9yIHRvdWNoZWRcbiAgICovXG4gIGNsb3NlYWJsZT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIG9ubHkgcmVsZXZhbnQgaWYgY2xvc2VhYmxlIGlzIHRydWUsIHdpbGwgYmUgY2FsbGVkIG9uY2UgdGhlIGVsZW1lbnRcbiAgICogZ2V0cyB0cmlnZ2VyZWQgYnkgc29tZXRoaW5nIG91dHNpZGUgb2YgaXRcbiAgICovXG4gIG9uQ2xvc2U/OiAoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBJbnN0ZWFkIG9mIGNyZWF0aW5nIGEgZHJvcGRvd24gZGlyZWN0bHkgYXMgaXRzIGNvbnRhaW5lclxuICAgKiBpdCB3aWxsIHBvc2l0aW9uIGEgY29udGFpbmVyIGluc3RlYWRcbiAgICovXG4gIGNvbnRhaW5XaXRoaW5Cb3g/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiB3aGVyZSB0byBwbGFjZSB0aGUgcG9ydGFsLCBieSBkZWZhdWx0IHRoZSBodG1sIGJvZHlcbiAgICovXG4gIHBvcnRhbEVsZW1lbnQ/OiBIVE1MRWxlbWVudDtcblxuICAvKipcbiAgICogQnkgZGVmYXVsdCB3aGV0aGVyIHRoZSBlbGVtZW50IHRoYXQgcmVwcmVzZW50cyB0aGUgbWVudSBvdmVyZmxvd3MgdGhlIHdpbmRvdyBpcyBjYWxjdWxhdGVkXG4gICAqIHVzaW5nIHRoZSBmb2xsb3dpbmcgZm9ybXVsYVxuICAgKiBcbiAgICogMS4gY2FsY3VsYXRlIHRoZSB0b3AgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIGVudGlyZSBkb2N1bWVudCB0b3AgKyBkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQuc2Nyb2xsVG9wXG4gICAqIDIuIHVzZSB0aGUgZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50LnNjcm9sbEhlaWdodCB0byBrbm93IGhvdyBtdWNoIHNwYWNlIHdlIGhhdmUgbGVmdCBhbmQgc3Vic3RyYWN0IHRoYXQgdG9wXG4gICAqICAgMi4xIHdlIHJlbW92ZSBjdXJyZW50b3ZlcmZsb3cgYmVjYXVzZSBpbiBjYXNlIHdlIGFscmVhZHkgaGF2ZSBhZGRlZCBvdmVyZmxvdyBzcGFjZXIgdG8gYWRkIGZvciB0aGF0IHNwYWNlXG4gICAqIDMuIGNvbXBhcmUgdGhhdCBudW1iZXIgdG8gdGhlIGhlaWdodFxuICAgKiA0LiByZXR1cm5zIGJ5IGhvdyBtYW55IHBpeGVzIGl0IG92ZXJmbG93cywgbmVnYXRpdmUgbnVtYmVycyBvciB6ZXJvIG1lYW5zIG5vIG92ZXJmbG93LCBvdGhlcndpc2UgaXQgb3ZlcmZsb3dzIGFuZCBhIHNwYWNlciBuZWVkcyB0byBiZSBidWlsdFxuICAgKiBAcGFyYW0gZWxlbWVudCBcbiAgICogQHJldHVybnMgYnkgaG93IG1hbnkgcGl4ZWxzIGl0IG92ZXJmbG93c1xuICAgKi9cbiAgcG9ydGFsRWxlbWVudE92ZXJmbG93Q2FsY3VsYXRvcj86ICh0b3A6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IG51bWJlcjtcblxuICAvKipcbiAgICogVG8gZ2VuZXJhdGUgYSBzcGFjZXIgdGhhdCB3aWxsIGJlIGF0dGFjaGVkIHRvIHRoZSBib2R5XG4gICAqIFxuICAgKiBiZWNhdXNlIG9mIHRoZSB3YXkgdGhlIHN0YW5kYXJkIGl0ZW1pemUgYXBwIGlzIGdlbmVyYXRlZCB3aGVyZSAjYXBwIGFuZCAjbWFpbiBhcmUgb2YgZWZmZWN0aXZlIGhlaWdodCBvZiAxMDAlXG4gICAqIHRoaXMgZm9ybXVsYSB1c2VzIGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHQgKyBvdmVyZmxvdyArMjUgZm9yIHRoZSBoZWlnaHRcbiAgICogcmF0aGVyIHRoYW4gdXNpbmcgdGhlIG92ZXJmbG93IHNwZWNpZmljIHZhbHVlXG4gICAqIFxuICAgKiBAcGFyYW0gb3ZlcmZsb3cgXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgcG9ydGFsRWxlbWVudE92ZXJmbG93U3BhY2VySGVpZ2h0Q2FsY3VsYXRvcj86IChvdmVyZmxvdzogbnVtYmVyKSA9PiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRvIGdlbmVyYXRlIGEgc3BhY2VyIHRoYXQgd2lsbCBiZSBhdHRhY2hlZCB0byB0aGUgYm9keVxuICAgKiBcbiAgICogQHBhcmFtIGhlaWdodCBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBwb3J0YWxFbGVtZW50T3ZlcmZsb3dTcGFjZXJHZW5lcmF0b3I/OiAoaGVpZ2h0OiBudW1iZXIsIHJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxFbGVtZW50PikgPT4gUmVhY3QuUmVhY3ROb2RlO1xuXG4gIC8qKlxuICAgKiBUaGUgZHJvcGRvd24gY29tcG9uZW50IHRvIHVzZVxuICAgKiBub3RlIHRoYXQgaXQgc2hvdWxkIHN1cHBvcnQgYSByZWYgb2JqZWN0IGZvciB0aGlzXG4gICAqL1xuICBEcm9wZG93bkNvbXBvbmVudD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SURyb3Bkb3duQ29tcG9uZW50UHJvcHM+O1xuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSBvcHRpb25hbCBwYXJlbnQgYm94IHRoYXQgc29tZSBlbGVtZW50cyBjaG9vc2UgdG8gdXNlXG4gICAqL1xuICBEcm9wZG93bkNvbXBvbmVudEJveD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SURyb3Bkb3duQ29tcG9uZW50Qm94UHJvcHM+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEcm9wZG93bkNvbXBvbmVudFByb3BzIHtcbiAgLyoqXG4gICAqIFNpemFibGUgcmVwcmVzZW50cyB3aGV0aGVyIGl0IHNob3VsZCBhbGxvdyBhIGRyb3Bkb3duIHRoYXQgY2FuIGNoYW5nZSBpbiBzaXplXG4gICAqL1xuICBzaXphYmxlOiBib29sZWFuO1xuICAvKipcbiAgICogd2hldGhlciBpdCB3aWxsIGJlIHVsdGltYXRlbHkgY29udGFpbmVkIHdpdGhpbiB0aGUgcGFyZW50IGJveFxuICAgKi9cbiAgY29udGFpbmVkV2l0aGluQm94OiBib29sZWFuO1xuICAvKipcbiAgICogUGFzcyB0aGVzZSBwcm9wcyB0byB0aGUgY2hpbGRcbiAgICogdGhleSBhcmUgaW1wb3J0YW50XG4gICAqL1xuICBwcm9wczogYW55O1xuICAvKipcbiAgICogVGhlIGNvbnRlbnRzIG9mIHRoZSBkcm9wZG93biBpdHNlbGYgdG8gc2hvd1xuICAgKi9cbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRHJvcGRvd25Db21wb25lbnRCb3hQcm9wcyB7XG4gIC8qKlxuICAgKiBTaXphYmxlIHJlcHJlc2VudHMgd2hldGhlciBpdCBzaG91bGQgYWxsb3cgYSBkcm9wZG93biB0aGF0IGNhbiBjaGFuZ2UgaW4gc2l6ZVxuICAgKi9cbiAgc2l6YWJsZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFBhc3MgdGhlc2UgcHJvcHMgdG8gdGhlIGNoaWxkXG4gICAqIHRoZXkgYXJlIGltcG9ydGFudFxuICAgKi9cbiAgcHJvcHM6IGFueTtcbiAgLyoqXG4gICAqIFRoZSBjb250ZW50cyBvZiB0aGUgZHJvcGRvd24gaXRzZWxmIHRvIHNob3dcbiAgICovXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmNvbnN0IERlZmF1bHREcm9wZG93bkNvbXBvbmVudCA9IFJlYWN0LmZvcndhcmRSZWYoKHByb3BzOiBJRHJvcGRvd25Db21wb25lbnRQcm9wcywgcmVmKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtwcm9wcy5jb250YWluZWRXaXRoaW5Cb3ggPyBcInNsYXRlRWRpdG9yRHJvcGRvd25Db21wb25lbnRDb250YWluZWRcIiA6IFwic2xhdGVFZGl0b3JEcm9wZG93bkNvbXBvbmVudFwifVxuICAgICAgey4uLnByb3BzLnByb3BzfVxuICAgICAgcmVmPXtyZWZ9XG4gICAgPlxuICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgIDwvZGl2PlxuICApXG59KTtcblxuY29uc3QgRGVmYXVsdERyb3Bkb3duQ29tcG9uZW50Qm94ID0gUmVhY3QuZm9yd2FyZFJlZigocHJvcHM6IElEcm9wZG93bkNvbXBvbmVudEJveFByb3BzLCByZWYpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckRyb3Bkb3duQ29tcG9uZW50Q29udGFpbmVyQm94XCJcbiAgICAgIHsuLi5wcm9wcy5wcm9wc31cbiAgICAgIHJlZj17cmVmfVxuICAgID5cbiAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICA8L2Rpdj5cbiAgKVxufSk7XG5cbmZ1bmN0aW9uIGRlZmF1bHRQb3J0YWxFbGVtZW50T3ZlcmZsb3dDYWxjdWxhdG9yKHRvcDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IG51bWJlciB7XG4gIGNvbnN0IHJlZmVyZW5jZSA9IGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudDtcbiAgY29uc3QgcG9zaXRpb25Ub3BPdmVyYWxsID0gdG9wICsgcmVmZXJlbmNlLnNjcm9sbFRvcDtcbiAgY29uc3QgYXZhaWxhYmxlSGVpZ2h0ID0gcmVmZXJlbmNlLnNjcm9sbEhlaWdodDtcbiAgY29uc3Qgc3BhY2VSZW1haW5pbmcgPSBhdmFpbGFibGVIZWlnaHQgLSBwb3NpdGlvblRvcE92ZXJhbGw7XG4gIHJldHVybiBoZWlnaHQgLSBzcGFjZVJlbWFpbmluZztcbn1cblxuZnVuY3Rpb24gZGVmYXVsdFBvcnRhbEVsZW1lbnRPdmVyZmxvd1NwYWNlckhlaWdodENhbGN1bGF0b3Iob3ZlcmZsb3c6IG51bWJlcikge1xuICBjb25zdCByZWZlcmVuY2UgPSBkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQ7XG4gIHJldHVybiByZWZlcmVuY2Uuc2Nyb2xsSGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0ICsgb3ZlcmZsb3c7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRQb3J0YWxFbGVtZW50T3ZlcmZsb3dTcGFjZXJHZW5lcmF0b3IoaGVpZ2h0OiBudW1iZXIsIHJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxFbGVtZW50Pikge1xuICByZXR1cm4gKDxkaXYgcmVmPXtyZWYgYXMgYW55fSBzdHlsZT17eyBoZWlnaHQsIGJhY2tncm91bmRDb2xvcjogXCIjZWVlXCIgfX0+PC9kaXY+KVxufVxuXG5mdW5jdGlvbiBpc0luRHJvcGRvd25PcldyYXBwZXIoXG4gIGVsZTogSFRNTEVsZW1lbnQsXG4gIGRyb3Bkb3duSXRzZWxmOiBIVE1MRWxlbWVudCxcbiAgd3JhcHBlckNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4pOiBib29sZWFuIHtcbiAgaWYgKFxuICAgIGVsZSA9PT0gZHJvcGRvd25JdHNlbGYgfHxcbiAgICBlbGUgPT09IHdyYXBwZXJDb250YWluZXJcbiAgKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAoZWxlLnBhcmVudEVsZW1lbnQpIHtcbiAgICByZXR1cm4gaXNJbkRyb3Bkb3duT3JXcmFwcGVyKGVsZS5wYXJlbnRFbGVtZW50LCBkcm9wZG93bkl0c2VsZiwgd3JhcHBlckNvbnRhaW5lcik7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBFZGl0b3JEcm9wZG93bihwcm9wczogSUVkaXRvckRyb3Bkb3duKSB7XG4gIGNvbnN0IGJveFJlZiA9IHVzZVJlZjxIVE1MRWxlbWVudD4oKTtcbiAgY29uc3QgZHJvcGRvd25SZWYgPSB1c2VSZWY8SFRNTEVsZW1lbnQ+KCk7XG4gIC8vIGNhbm5vdCByZWx5IGluIHJlYWN0IHN0YXRlIGZvciB0aGlzIGJlY2F1c2UgdGhlIHN0YXRlIGRvZXMgbm90IHJlcHJlc2VudCB0aGUgcmVhbGl0eSBvZiB0aGUgY29tcG9uZW50XG4gIC8vIGluIHRoZSBET01cbiAgY29uc3Qgb3ZlcmZsb3dFbGVtZW50ID0gdXNlUmVmPEhUTUxFbGVtZW50PigpO1xuICBjb25zdCBbcG9zLCBzZXRQb3NdID0gdXNlU3RhdGU8W251bWJlciwgbnVtYmVyLCBudW1iZXJdPihudWxsKTtcblxuICBjb25zdCBbb3ZlcmZsb3dTcGFjZXJIZWlnaHQsIHNldE92ZXJmbG93U3BhY2VySGVpZ2h0XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbY3VycmVudE92ZXJmbG93LCBzZXRDdXJyZW50T3ZlcmZsb3ddID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IGNvbmdydWVudFRpbWVyID0gdXNlUmVmKG51bGwgYXMgYW55KTtcblxuICBjb25zdCByZWNhbGN1bGF0ZU92ZXJmbG93ID0gdXNlQ2FsbGJhY2soKHRvcCwgaGVpZ2h0KSA9PiB7XG4gICAgLy8gb3ZlcmZsb3cgaXMgb25seSByZWNhbGN1bGF0ZWQgb25seSBpZiBpdCBkb2VzIG5vdCBoYXZlIGEgaGVpZ2h0IG9mIHplcm9cbiAgICBpZiAoIW92ZXJmbG93RWxlbWVudC5jdXJyZW50IHx8ICFvdmVyZmxvd0VsZW1lbnQuY3VycmVudC5vZmZzZXRIZWlnaHQpIHtcbiAgICAgIGNvbnN0IG5ld092ZXJmbG93ID0gcHJvcHMucG9ydGFsRWxlbWVudE92ZXJmbG93Q2FsY3VsYXRvciA/XG4gICAgICAgIHByb3BzLnBvcnRhbEVsZW1lbnRPdmVyZmxvd0NhbGN1bGF0b3IodG9wLCBoZWlnaHQpIDpcbiAgICAgICAgZGVmYXVsdFBvcnRhbEVsZW1lbnRPdmVyZmxvd0NhbGN1bGF0b3IodG9wLCBoZWlnaHQpO1xuXG4gICAgICBpZiAobmV3T3ZlcmZsb3cgPiAwKSB7XG4gICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IChcbiAgICAgICAgICBwcm9wcy5wb3J0YWxFbGVtZW50T3ZlcmZsb3dTcGFjZXJIZWlnaHRDYWxjdWxhdG9yID9cbiAgICAgICAgICAgIHByb3BzLnBvcnRhbEVsZW1lbnRPdmVyZmxvd1NwYWNlckhlaWdodENhbGN1bGF0b3IobmV3T3ZlcmZsb3cpIDpcbiAgICAgICAgICAgIGRlZmF1bHRQb3J0YWxFbGVtZW50T3ZlcmZsb3dTcGFjZXJIZWlnaHRDYWxjdWxhdG9yKG5ld092ZXJmbG93KVxuICAgICAgICApICsgMjU7XG4gICAgICAgIHNldE92ZXJmbG93U3BhY2VySGVpZ2h0KG5ld0hlaWdodCk7XG4gICAgICAgIHNldEN1cnJlbnRPdmVyZmxvdyhuZXdPdmVyZmxvdyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRPdmVyZmxvd1NwYWNlckhlaWdodCgwKTtcbiAgICAgICAgc2V0Q3VycmVudE92ZXJmbG93KDApO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW3Byb3BzLnBvcnRhbEVsZW1lbnRPdmVyZmxvd0NhbGN1bGF0b3IsIHByb3BzLnBvcnRhbEVsZW1lbnRPdmVyZmxvd1NwYWNlckhlaWdodENhbGN1bGF0b3JdKTtcblxuICBjb25zdCBjb25ncnVlbnRUaW1lckV4ZWMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGRyb3Bkb3duUmVmLmN1cnJlbnQgJiYgb3ZlcmZsb3dFbGVtZW50LmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGNsaWVudFJlY3QgPSBkcm9wZG93blJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3QgY3VycmVudEhlaWdodCA9IGNsaWVudFJlY3QuaGVpZ2h0O1xuICAgICAgY29uc3QgY3VycmVudFRvcCA9IGNsaWVudFJlY3QudG9wO1xuXG4gICAgICBjb25zdCBtb3JlT3ZlcmZsb3cgPSBwcm9wcy5wb3J0YWxFbGVtZW50T3ZlcmZsb3dDYWxjdWxhdG9yID9cbiAgICAgICAgcHJvcHMucG9ydGFsRWxlbWVudE92ZXJmbG93Q2FsY3VsYXRvcihjdXJyZW50VG9wLCBjdXJyZW50SGVpZ2h0KSA6XG4gICAgICAgIGRlZmF1bHRQb3J0YWxFbGVtZW50T3ZlcmZsb3dDYWxjdWxhdG9yKGN1cnJlbnRUb3AsIGN1cnJlbnRIZWlnaHQpO1xuXG4gICAgICBpZiAobW9yZU92ZXJmbG93ID4gMCkge1xuICAgICAgICBjb25zdCBuZXdPdmVyZmxvdyA9IGN1cnJlbnRPdmVyZmxvdyArIG1vcmVPdmVyZmxvdztcbiAgICAgICAgc2V0Q3VycmVudE92ZXJmbG93KG5ld092ZXJmbG93KTtcblxuICAgICAgICBjb25zdCBvdmVyZmxvd0VsZW1lbnRIZWlnaHQgPSBvdmVyZmxvd0VsZW1lbnQuY3VycmVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IG92ZXJmbG93RWxlbWVudEhlaWdodCArIG1vcmVPdmVyZmxvdyArIDI1O1xuXG4gICAgICAgIHNldE92ZXJmbG93U3BhY2VySGVpZ2h0KG5ld0hlaWdodCk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY3VycmVudE92ZXJmbG93XSk7XG5cbiAgY29uc3QgdXBkYXRlUG9zID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghYm94UmVmLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBpZiBpdCdzIHVzaW5nIHRoZSBzaWJsaW5nIHN0cmF0ZWd5IHdoZXJlIHRoZSBlbGVtZW50IGlzIGluIHRoZSBzaWJsaW5nIHNpZGUgcmF0aGVyIHRoYW4gZG93biBpbiB0aGVyZVxuICAgIC8vIHdlIGdvdHRhIHVzZSB0aGUgcGFyZW50IGFzIHRoZSBzb3VyY2Ugb2Ygb3VyIGNoaWxkcmVuXG4gICAgY29uc3QgY2hpbGRyZW4gPSBBcnJheS5mcm9tKGJveFJlZi5jdXJyZW50LmNoaWxkTm9kZXMpO1xuICAgIC8vIG5vdyB3ZSBncmFiIHRoZSBmaXJzdCBub2RlXG4gICAgbGV0IGZpcnN0Tm9kZSA9IGNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50O1xuICAgIC8vIHNhbWUgYmVjYXVzZSBvdXIgZWxlbWVudCB3b3VsZCBiZSBsYXN0IGlmIHdlIHVzZWQgcHJldmlvdXMgY2hpbGRyZW4gd2UgZ290dGEgbW92ZSB0d28gc2lkZXNcbiAgICBsZXQgbGFzdE5vZGUgPSBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXSBhcyBIVE1MRWxlbWVudDtcblxuICAgIGlmIChwcm9wcy5nb0ludG9UcmVlRGVwdGgpIHtcbiAgICAgIGNvbnN0IGdvVG93YXJkc1BhcmVudCA9IHByb3BzLmdvSW50b1RyZWVEZXB0aCA8IDA7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGguYWJzKHByb3BzLmdvSW50b1RyZWVEZXB0aCk7IGkrKykge1xuICAgICAgICBpZiAoIWdvVG93YXJkc1BhcmVudCkge1xuICAgICAgICAgIGZpcnN0Tm9kZSA9IGZpcnN0Tm9kZS5jaGlsZE5vZGVzWzBdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIGxhc3ROb2RlID0gbGFzdE5vZGUuY2hpbGROb2Rlc1tsYXN0Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpcnN0Tm9kZSA9IGZpcnN0Tm9kZS5wYXJlbnRFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIGxhc3ROb2RlID0gbGFzdE5vZGUucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGZpcnN0Tm9kZUJvdW5kaW5nUmVjdCA9IGZpcnN0Tm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBsYXN0Tm9kZUJvdW5kaW5nUmVjdCA9IGxhc3ROb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgY29uc3QgbG93ZXJtb3N0Tm9kZUNsaWVudFJlY3QgPSBmaXJzdE5vZGVCb3VuZGluZ1JlY3QuYm90dG9tID4gbGFzdE5vZGVCb3VuZGluZ1JlY3QuYm90dG9tID8gZmlyc3ROb2RlQm91bmRpbmdSZWN0IDogbGFzdE5vZGVCb3VuZGluZ1JlY3Q7XG5cbiAgICBjb25zdCBsZWZ0TW9zdFBvc2l0aW9uID0gbG93ZXJtb3N0Tm9kZUNsaWVudFJlY3QubGVmdDtcbiAgICBjb25zdCByaWdodE1vc3RQb3NpdGlvbiA9IGxvd2VybW9zdE5vZGVDbGllbnRSZWN0LnJpZ2h0O1xuXG4gICAgbGV0IGxlZnQ6IG51bWJlciA9IG51bGw7XG4gICAgbGV0IHJpZ2h0OiBudW1iZXIgPSBudWxsO1xuICAgIGNvbnN0IHdpZHRoVG9Db21wYXJlQWdhaW5zdCA9IGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICBpZiAobGVmdE1vc3RQb3NpdGlvbiA+ICh3aWR0aFRvQ29tcGFyZUFnYWluc3QgLyAyKSkge1xuICAgICAgcmlnaHQgPSB3aWR0aFRvQ29tcGFyZUFnYWluc3QgLSByaWdodE1vc3RQb3NpdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVmdCA9IGxlZnRNb3N0UG9zaXRpb247XG4gICAgfVxuXG4gICAgY29uc3QgdG9wID0gbG93ZXJtb3N0Tm9kZUNsaWVudFJlY3QudG9wICsgbG93ZXJtb3N0Tm9kZUNsaWVudFJlY3QuaGVpZ2h0O1xuXG4gICAgc2V0UG9zKFt0b3AsIGxlZnQsIHJpZ2h0XSk7XG5cbiAgICBpZiAoZHJvcGRvd25SZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgaGVpZ2h0ID0gZHJvcGRvd25SZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG5cbiAgICAgIHJlY2FsY3VsYXRlT3ZlcmZsb3codG9wLCBoZWlnaHQpO1xuICAgIH1cbiAgfSwgW3JlY2FsY3VsYXRlT3ZlcmZsb3ddKTtcblxuICBjb25zdCBjYWxsQ2xvc2VhYmxlID0gdXNlQ2FsbGJhY2soKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICBpZiAocHJvcHMuY2xvc2VhYmxlKSB7XG4gICAgICBsZXQgd3JhcHBlclJlZiA9IGJveFJlZi5jdXJyZW50O1xuICAgICAgaWYgKHByb3BzLmdvSW50b1RyZWVEZXB0aCkge1xuICAgICAgICBjb25zdCBnb1Rvd2FyZHNQYXJlbnQgPSBwcm9wcy5nb0ludG9UcmVlRGVwdGggPCAwO1xuICAgICAgICBpZiAoZ29Ub3dhcmRzUGFyZW50KSB7XG4gICAgICAgICAgd3JhcHBlclJlZiA9IHdyYXBwZXJSZWYucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFpc0luRHJvcGRvd25PcldyYXBwZXIoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQsIGRyb3Bkb3duUmVmLmN1cnJlbnQsIHdyYXBwZXJSZWYpKSB7XG4gICAgICAgIHByb3BzLm9uQ2xvc2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCB1cGRhdGVQb3NEZWxheWVkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFRpbWVvdXQodXBkYXRlUG9zLCA1MCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBwb3NNYXNzVHJpZ2dlciA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBwb3NJbnRlcm5hbCA9IHNldEludGVydmFsKHVwZGF0ZVBvcywgMTApO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbChwb3NJbnRlcm5hbCk7XG4gICAgfSwgNjAwKTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHByb3BzLmlzT3Blbikge1xuICAgICAgdXBkYXRlUG9zKCk7XG4gICAgICBjb25ncnVlbnRUaW1lci5jdXJyZW50ID0gc2V0SW50ZXJ2YWwoY29uZ3J1ZW50VGltZXJFeGVjLCAxMDAwKTtcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJTTEFURV9EUkFXRVJfT1BFTlwiLCBwb3NNYXNzVHJpZ2dlcik7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHVwZGF0ZVBvcyk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB1cGRhdGVQb3MpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHVwZGF0ZVBvc0RlbGF5ZWQpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB1cGRhdGVQb3NEZWxheWVkKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHVwZGF0ZVBvcywgdHJ1ZSk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjYWxsQ2xvc2VhYmxlKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBjYWxsQ2xvc2VhYmxlKTtcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJTTEFURV9EUkFXRVJfT1BFTlwiLCBwb3NNYXNzVHJpZ2dlcik7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdXBkYXRlUG9zKVxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB1cGRhdGVQb3MpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdXBkYXRlUG9zRGVsYXllZCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdXBkYXRlUG9zRGVsYXllZCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHVwZGF0ZVBvcywgdHJ1ZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGNhbGxDbG9zZWFibGUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgY2FsbENsb3NlYWJsZSk7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoY29uZ3J1ZW50VGltZXIuY3VycmVudCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldEN1cnJlbnRPdmVyZmxvdygwKTtcbiAgICAgIHNldE92ZXJmbG93U3BhY2VySGVpZ2h0KDApO1xuICAgIH1cbiAgfSwgW3Byb3BzLmlzT3BlbiwgdXBkYXRlUG9zLCB1cGRhdGVQb3NEZWxheWVkLCBwb3NNYXNzVHJpZ2dlciwgY2FsbENsb3NlYWJsZSwgY29uZ3J1ZW50VGltZXJFeGVjXSk7XG5cbiAgbGV0IHBvcnRhbDogUmVhY3QuUmVhY3ROb2RlID0gbnVsbDtcbiAgbGV0IG92ZXJmbG93UG9ydGFsOiBSZWFjdC5SZWFjdE5vZGUgPSBudWxsO1xuXG4gIGlmIChwcm9wcy5pc09wZW4pIHtcbiAgICBjb25zdCBzdHlsZTogYW55ID0gcG9zID9cbiAgICAgIHsgcG9zaXRpb246IFwiZml4ZWRcIiwgdG9wOiBwb3NbMF0sIGxlZnQ6IHBvc1sxXSwgcmlnaHQ6IHBvc1syXSwgekluZGV4OiB0eXBlb2YgcHJvcHMuekluZGV4ICE9PSBcInVuZGVmaW5lZFwiID8gcHJvcHMuekluZGV4IDogNTAwIH0gOlxuICAgICAgeyBwb3NpdGlvbjogXCJmaXhlZFwiLCB0b3A6IDAsIGxlZnQ6IDAsIHZpc2liaWxpdHk6IFwiaGlkZGVuXCIsIHpJbmRleDogdHlwZW9mIHByb3BzLnpJbmRleCAhPT0gXCJ1bmRlZmluZWRcIiA/IHByb3BzLnpJbmRleCA6IDUwMCB9O1xuXG4gICAgY29uc3QgRHJvcGRvd25Db21wb25lbnQgPSBwcm9wcy5Ecm9wZG93bkNvbXBvbmVudCB8fCBEZWZhdWx0RHJvcGRvd25Db21wb25lbnQ7XG5cbiAgICBsZXQgZWxlbWVudEluc2lkZVBvcnRhbCA9IChcbiAgICAgIDxEcm9wZG93bkNvbXBvbmVudFxuICAgICAgICBjb250YWluZWRXaXRoaW5Cb3g9e3Byb3BzLmNvbnRhaW5XaXRoaW5Cb3h9XG4gICAgICAgIHByb3BzPXt7XG4gICAgICAgICAgW1wiZGF0YS11bmJsdXJcIl06IHRydWUsXG4gICAgICAgICAgc3R5bGU6IHByb3BzLmNvbnRhaW5XaXRoaW5Cb3ggPyBudWxsIDogc3R5bGUsXG4gICAgICAgIH19XG4gICAgICAgIHNpemFibGU9eyEhcHJvcHMuZHJvcGRvd25TaXphYmxlfVxuICAgICAgICByZWY9e3Byb3BzLmNvbnRhaW5XaXRoaW5Cb3ggPyBudWxsIDogZHJvcGRvd25SZWZ9XG4gICAgICA+XG4gICAgICAgIHtwcm9wcy5kcm9wZG93bn1cbiAgICAgIDwvRHJvcGRvd25Db21wb25lbnQ+XG4gICAgKTtcblxuICAgIGlmIChwcm9wcy5jb250YWluV2l0aGluQm94KSB7XG4gICAgICBjb25zdCBEcm9wZG93bkNvbXBvbmVudEJveCA9IHByb3BzLkRyb3Bkb3duQ29tcG9uZW50Qm94IHx8IERlZmF1bHREcm9wZG93bkNvbXBvbmVudEJveDtcbiAgICAgIGVsZW1lbnRJbnNpZGVQb3J0YWwgPSAoXG4gICAgICAgIDxEcm9wZG93bkNvbXBvbmVudEJveFxuICAgICAgICAgIHByb3BzPXt7XG4gICAgICAgICAgICBbXCJkYXRhLXVuYmx1clwiXTogdHJ1ZSxcbiAgICAgICAgICAgIHN0eWxlLFxuICAgICAgICAgIH19XG4gICAgICAgICAgc2l6YWJsZT17cHJvcHMuZHJvcGRvd25TaXphYmxlfVxuICAgICAgICAgIHJlZj17ZHJvcGRvd25SZWZ9XG4gICAgICAgID5cbiAgICAgICAgICB7ZWxlbWVudEluc2lkZVBvcnRhbH1cbiAgICAgICAgPC9Ecm9wZG93bkNvbXBvbmVudEJveD5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcG9ydGFsID0gUmVhY3RET00uY3JlYXRlUG9ydGFsKFxuICAgICAgZWxlbWVudEluc2lkZVBvcnRhbCxcbiAgICAgIHByb3BzLnBvcnRhbEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keSxcbiAgICApO1xuXG4gICAgb3ZlcmZsb3dQb3J0YWwgPSBSZWFjdERPTS5jcmVhdGVQb3J0YWwoKFxuICAgICAgcHJvcHMucG9ydGFsRWxlbWVudE92ZXJmbG93U3BhY2VyR2VuZXJhdG9yID9cbiAgICAgICAgcHJvcHMucG9ydGFsRWxlbWVudE92ZXJmbG93U3BhY2VyR2VuZXJhdG9yKG92ZXJmbG93U3BhY2VySGVpZ2h0LCBvdmVyZmxvd0VsZW1lbnQpIDpcbiAgICAgICAgZGVmYXVsdFBvcnRhbEVsZW1lbnRPdmVyZmxvd1NwYWNlckdlbmVyYXRvcihvdmVyZmxvd1NwYWNlckhlaWdodCwgb3ZlcmZsb3dFbGVtZW50KVxuICAgICksIHByb3BzLnBvcnRhbEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keSk7XG4gIH1cblxuICBjb25zdCBXcmFwcGVyID0gcHJvcHMuRHJvcGRvd25Db21wb25lbnRXcmFwcGVyIHx8IERlZmF1bHREcm9wZG93bkNvbXBvbmVudFdyYXBwZXI7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPFdyYXBwZXJcbiAgICAgICAgdGFnPXtwcm9wcy5kcm9wZG93bkNvbXBvbmVudFdyYXBwZXJUYWd9XG4gICAgICAgIHByb3BzPXt7XG4gICAgICAgICAgLi4ucHJvcHMuZHJvcGRvd25Db21wb25lbnRXcmFwcGVyUHJvcHMsXG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IHByb3BzLmRyb3Bkb3duQ29tcG9uZW50V3JhcHBlckhpZGRlbiA/IFwibm9uZVwiIDogXCJjb250ZW50c1wiLFxuICAgICAgICAgICAgLi4uKHByb3BzLmRyb3Bkb3duQ29tcG9uZW50V3JhcHBlclByb3BzPy5zdHlsZSB8fCB7fSlcbiAgICAgICAgICB9XG4gICAgICAgIH19XG4gICAgICAgIHJlZj17Ym94UmVmfVxuICAgICAgPlxuICAgICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgICA8L1dyYXBwZXI+XG4gICAgICB7cG9ydGFsfVxuICAgICAge292ZXJmbG93UG9ydGFsfVxuICAgIDwvPlxuICApO1xufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFFQSxXQUFPLFVBQVU7QUFFakIsUUFBSSxNQUFNO0FBQ1YsUUFBSSxNQUNGO0FBSUYsUUFBSSxNQUFNLElBQUksT0FBTyxRQUFRLE1BQU0sUUFBUSxNQUFNLEdBQUc7QUFDcEQsUUFBSSxNQUFNLElBQUksT0FBTyxRQUFRLE1BQU0sUUFBUSxNQUFNLEdBQUc7QUFFcEQsYUFBUyxVQUFVLE9BQU87QUFDeEIsY0FBUSxPQUFPLFNBQVMsRUFBRTtBQUUxQixVQUFJLElBQUksS0FBSyxLQUFLLEdBQUc7QUFDbkIsZUFBTztBQUFBLE1BQ1Q7QUFFQSxVQUFJLElBQUksS0FBSyxLQUFLLEdBQUc7QUFDbkIsZUFBTztBQUFBLE1BQ1Q7QUFFQSxhQUFPO0FBQUEsSUFDVDtBQUFBO0FBQUE7OztBQ3pCQTtBQUFBO0FBeUJBLGFBQVNBLFVBQVMsT0FBTztBQUN2QixVQUFJLE9BQU8sT0FBTztBQUNsQixhQUFPLFNBQVMsU0FBUyxRQUFRLFlBQVksUUFBUTtBQUFBLElBQ3ZEO0FBRUEsV0FBTyxVQUFVQTtBQUFBO0FBQUE7OztBQzlCakI7QUFBQTtBQUNBLFFBQUksYUFBYSxPQUFPLFVBQVUsWUFBWSxVQUFVLE9BQU8sV0FBVyxVQUFVO0FBRXBGLFdBQU8sVUFBVTtBQUFBO0FBQUE7OztBQ0hqQjtBQUFBO0FBQUEsUUFBSSxhQUFhO0FBR2pCLFFBQUksV0FBVyxPQUFPLFFBQVEsWUFBWSxRQUFRLEtBQUssV0FBVyxVQUFVO0FBRzVFLFFBQUksT0FBTyxjQUFjLFlBQVksU0FBUyxhQUFhLEVBQUU7QUFFN0QsV0FBTyxV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O0FBQUEsTUFDQSxxQkFBb0I7QUFBQSxNQUlwQixjQUFjO0FBQUEsTUFDZDtBQUFBLE1BQ0EsT0FBTztBQUFBLE1BR1AsVUFBVTtBQUFBLE1BQ1YsWUFBWSxVQUFVO0FBQUEsTUFFdEIsTUFBSztBQUFBLE1BRUwsVUFBVSxDQUFDLE9BQU8sa0JBQWtCO0FBQ2xDLHFCQUFhLEtBQUs7QUFDbEIscUJBQWEsYUFBYTtBQUFBLE1BQzVCO0FBQUEsTUFLQSxhQUFhO0FBQUEsTUFXYixTQUFTO0FBQUEsTUFDVCxpQkFBaUI7QUFBQSxNQUdqQixVQUFVO0FBQUE7QUFBQSxFQUNaLENBQ0YsQ0FDRixHQUVBLCtCQUFBQSxRQUFBLGNBQUMsaUJBQ0MsK0JBQUFBLFFBQUEsY0FBQyxjQUFNLFNBQVUsR0FDakIsK0JBQUFBLFFBQUEsY0FBQyxjQUFNLEtBQUssVUFBVSxXQUFXLE1BQU0sQ0FBQyxDQUFFLENBQzVDLENBQ0Y7QUFFSjtBQUVBLGtCQUFBQyxRQUFTLE9BQU8sK0JBQUFELFFBQUEsY0FBQyxhQUFRLEdBQUksU0FBUyxjQUFjLE1BQU0sQ0FBQzsiLAogICJuYW1lcyI6IFsiaXNPYmplY3QiLCAic3RyaW5nIiwgInN0cmluZyIsICJTeW1ib2wiLCAiU3ltYm9sIiwgImUiLCAiU3ltYm9sIiwgImlzT2JqZWN0IiwgImlzT2JqZWN0IiwgImRlYm91bmNlIiwgInRpbWUiLCAiZGVib3VuY2UiLCAiaXNPYmplY3QiLCAidGhyb3R0bGUiLCAic3RyaW5nIiwgImNoZWNrIiwgImUiLCAiaXNLZXlIb3RrZXkiLCAiaW1wb3J0X3JlYWN0IiwgImltcG9ydF9yZWFjdF9kb20iLCAiaW1wb3J0X3JlYWN0IiwgImltcG9ydF9kZWVwX2VxdWFsIiwgImUiLCAibXNnIiwgImlzUGxhaW5PYmplY3QiLCAidCIsICJpc1BsYWluT2JqZWN0IiwgImkiLCAiaW1tZXIiLCAicGF0aCIsICJpc1NldCIsICJwYXJlbnQiLCAiY3VycmVudCIsICJJbW1lciIsICJzZWxmIiwgImJhc2UiLCAiaSIsICJJbW1lciIsICJQYXRoUmVmIiwgInRyYW5zZm9ybSIsICJyZWYiLCAib3AiLCAiY3VycmVudCIsICJhZmZpbml0eSIsICJwYXRoIiwgIlBhdGgiLCAidW5yZWYiLCAiUG9pbnRSZWYiLCAicG9pbnQiLCAiUG9pbnQiLCAiUmFuZ2VSZWYiLCAiUmFuZ2UiLCAiRElSVFlfUEFUSFMiLCAiV2Vha01hcCIsICJESVJUWV9QQVRIX0tFWVMiLCAiRkxVU0hJTkciLCAiTk9STUFMSVpJTkciLCAiUEFUSF9SRUZTIiwgIlBPSU5UX1JFRlMiLCAiUkFOR0VfUkVGUyIsICJhbmNlc3RvcnMiLCAib3B0aW9ucyIsICJhcmd1bWVudHMiLCAibGVuZ3RoIiwgInVuZGVmaW5lZCIsICJyZXZlcnNlIiwgInBhdGhzIiwgImxldmVscyIsICJzbGljZSIsICJjb21tb24iLCAiYW5vdGhlciIsICJpIiwgImF2IiwgImJ2IiwgInB1c2giLCAiY29tcGFyZSIsICJtaW4iLCAiTWF0aCIsICJlbmRzQWZ0ZXIiLCAiYXMiLCAiYnMiLCAiZXF1YWxzIiwgImVuZHNBdCIsICJlbmRzQmVmb3JlIiwgImV2ZXJ5IiwgIm4iLCAiaGFzUHJldmlvdXMiLCAiaXNBZnRlciIsICJpc0FuY2VzdG9yIiwgImlzQmVmb3JlIiwgImlzQ2hpbGQiLCAiaXNDb21tb24iLCAiaXNEZXNjZW5kYW50IiwgImlzUGFyZW50IiwgImlzUGF0aCIsICJ2YWx1ZSIsICJBcnJheSIsICJpc0FycmF5IiwgImlzU2libGluZyIsICJhbCIsICJibCIsICJsaXN0IiwgIm5leHQiLCAiRXJyb3IiLCAiY29uY2F0IiwgImxhc3QiLCAib3BlcmF0aW9uQ2FuVHJhbnNmb3JtUGF0aCIsICJvcGVyYXRpb24iLCAidHlwZSIsICJwYXJlbnQiLCAicHJldmlvdXMiLCAicmVsYXRpdmUiLCAiYW5jZXN0b3IiLCAicCIsICJwb3NpdGlvbiIsICJuZXdQYXRoIiwgIm9ucCIsICJjb3B5IiwgIm8iLCAidG9QcmltaXRpdmUiLCAidG9Qcm9wZXJ0eUtleSIsICJhcHBseVRvRHJhZnQiLCAiZWRpdG9yIiwgInNlbGVjdGlvbiIsICJub2RlIiwgIk5vZGUiLCAiaW5kZXgiLCAiY2hpbGRyZW4iLCAic3BsaWNlIiwgImtleSIsICJwb2ludHMiLCAib2Zmc2V0IiwgInRleHQiLCAibGVhZiIsICJiZWZvcmUiLCAiYWZ0ZXIiLCAiZ2V0IiwgInByZXZQYXRoIiwgInByZXYiLCAiVGV4dCIsICJpc1RleHQiLCAiU2NydWJiZXIiLCAic3RyaW5naWZ5IiwgInRydWVQYXRoIiwgIm5ld1BhcmVudCIsICJuZXdJbmRleCIsICJyZXN1bHQiLCAidGV4dHMiLCAicHJlZmVyTmV4dCIsICJwcm9wZXJ0aWVzIiwgIm5ld1Byb3BlcnRpZXMiLCAiaGFzT3duUHJvcGVydHkiLCAiaXNSYW5nZSIsICJfb2JqZWN0U3ByZWFkIiwgIm5ld05vZGUiLCAiR2VuZXJhbFRyYW5zZm9ybXMiLCAiY3JlYXRlRHJhZnQiLCAiZmluaXNoRHJhZnQiLCAiaXNEcmFmdCIsICJOb2RlVHJhbnNmb3JtcyIsICJpbnNlcnROb2RlcyIsICJub2RlcyIsICJsaWZ0Tm9kZXMiLCAibWVyZ2VOb2RlcyIsICJtb3ZlTm9kZXMiLCAicmVtb3ZlTm9kZXMiLCAic2V0Tm9kZXMiLCAicHJvcHMiLCAic3BsaXROb2RlcyIsICJ1bnNldE5vZGVzIiwgInVud3JhcE5vZGVzIiwgIndyYXBOb2RlcyIsICJlbGVtZW50IiwgIlNlbGVjdGlvblRyYW5zZm9ybXMiLCAiY29sbGFwc2UiLCAiZGVzZWxlY3QiLCAibW92ZSIsICJzZWxlY3QiLCAidGFyZ2V0IiwgInNldFBvaW50IiwgInNldFNlbGVjdGlvbiIsICJpc0RlZXBFcXVhbCIsICJhIiwgImIiLCAiaXNQbGFpbk9iamVjdCIsICJvYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIiwgImVkZ2VzIiwgInJhbmdlIiwgImFuY2hvciIsICJmb2N1cyIsICJpc0JhY2t3YXJkIiwgImVuZCIsICJpbmNsdWRlcyIsICJycyIsICJyZSIsICJ0cyIsICJ0ZSIsICJzdGFydCIsICJpc0FmdGVyU3RhcnQiLCAiaXNCZWZvcmVFbmQiLCAiaXNQb2ludCIsICJpbnRlcnNlY3Rpb24iLCAicmVzdCIsICJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCAiX2V4Y2x1ZGVkIiwgInMxIiwgImUxIiwgInMyIiwgImUyIiwgImlzQ29sbGFwc2VkIiwgImlzRXhwYW5kZWQiLCAiaXNGb3J3YXJkIiwgInByb2R1Y2UiLCAiciIsICJhZmZpbml0eUFuY2hvciIsICJhZmZpbml0eUZvY3VzIiwgImlzRWxlbWVudCIsICJpc05vZGVMaXN0IiwgIkVkaXRvciIsICJpc0VkaXRvciIsICJFbGVtZW50IiwgImlzRWxlbWVudExpc3QiLCAidmFsIiwgImlzRWxlbWVudFByb3BzIiwgImlzRWxlbWVudFR5cGUiLCAiZWxlbWVudFZhbCIsICJlbGVtZW50S2V5IiwgIm1hdGNoZXMiLCAiSVNfTk9ERV9MSVNUX0NBQ0hFIiwgInJvb3QiLCAiZW50cnkiLCAiY2hpbGQiLCAiYyIsICJjaGlsZFBhdGgiLCAiZGVzY2VuZGFudCIsICJkZXNjZW5kYW50cyIsICJlbGVtZW50cyIsICJleHRyYWN0UHJvcHMiLCAiX2V4Y2x1ZGVkMiIsICJmaXJzdCIsICJmcmFnbWVudCIsICJuZXdSb290IiwgIm5vZGVFbnRyaWVzIiwgInBhc3MiLCAiX3JlZiIsICJoYXMiLCAiaXNOb2RlIiwgImNhY2hlZFJlc3VsdCIsICJzZXQiLCAiaXNUZXh0UHJvcHMiLCAiZnJvbSIsICJ0byIsICJ2aXNpdGVkIiwgIlNldCIsICJhZGQiLCAibmV4dEluZGV4IiwgInBhcmVudFBhdGgiLCAic3RyaW5nIiwgIm1hcCIsICJqb2luIiwgIk9wZXJhdGlvbiIsICJpc05vZGVPcGVyYXRpb24iLCAiaXNPcGVyYXRpb24iLCAiZW5kc1dpdGgiLCAiaXNPcGVyYXRpb25MaXN0IiwgImlzU2VsZWN0aW9uT3BlcmF0aW9uIiwgImlzVGV4dE9wZXJhdGlvbiIsICJpbnZlcnNlIiwgImludmVyc2VQYXRoIiwgImludmVyc2VOZXdQYXRoIiwgIklTX0VESVRPUl9DQUNIRSIsICJjYWNoZWRJc0VkaXRvciIsICJhZGRNYXJrIiwgImFwcGx5IiwgImRlbGV0ZUZyYWdtZW50IiwgImluc2VydEJyZWFrIiwgImluc2VydFNvZnRCcmVhayIsICJpbnNlcnRGcmFnbWVudCIsICJpbnNlcnROb2RlIiwgImluc2VydFRleHQiLCAiaXNFbGVtZW50UmVhZE9ubHkiLCAiaXNJbmxpbmUiLCAiaXNTZWxlY3RhYmxlIiwgImlzVm9pZCIsICJub3JtYWxpemVOb2RlIiwgIm9uQ2hhbmdlIiwgInJlbW92ZU1hcmsiLCAiZ2V0RGlydHlQYXRocyIsICJtYXJrcyIsICJvcGVyYXRpb25zIiwgImFib3ZlIiwgImF0IiwgImRlbGV0ZUJhY2t3YXJkIiwgInVuaXQiLCAiZGVsZXRlRm9yd2FyZCIsICJlbGVtZW50UmVhZE9ubHkiLCAiaGFzQmxvY2tzIiwgImhhc0lubGluZXMiLCAiaGFzUGF0aCIsICJoYXNUZXh0cyIsICJpc0Jsb2NrIiwgImlzRWRnZSIsICJpc0VtcHR5IiwgImlzRW5kIiwgImlzTm9ybWFsaXppbmciLCAiaXNTdGFydCIsICJnZXRNYXJrcyIsICJub3JtYWxpemUiLCAicGF0aFJlZiIsICJwYXRoUmVmcyIsICJwb2ludFJlZiIsICJwb2ludFJlZnMiLCAicG9zaXRpb25zIiwgInJhbmdlUmVmIiwgInJhbmdlUmVmcyIsICJzZXROb3JtYWxpemluZyIsICJ1bmhhbmdSYW5nZSIsICJ2b2lkIiwgIndpdGhvdXROb3JtYWxpemluZyIsICJmbiIsICJTcGFuIiwgImlzU3BhbiIsICJ2YWx1ZSIsICJBcnJheSIsICJpc0FycmF5IiwgImxlbmd0aCIsICJldmVyeSIsICJQYXRoIiwgImlzUGF0aCIsICJQb2ludCIsICJjb21wYXJlIiwgInBvaW50IiwgImFub3RoZXIiLCAicmVzdWx0IiwgInBhdGgiLCAib2Zmc2V0IiwgImlzQWZ0ZXIiLCAiaXNCZWZvcmUiLCAiZXF1YWxzIiwgImlzUG9pbnQiLCAiaXNQbGFpbk9iamVjdCIsICJ0cmFuc2Zvcm0iLCAib3AiLCAib3B0aW9ucyIsICJwcm9kdWNlIiwgInAiLCAiYWZmaW5pdHkiLCAidHlwZSIsICJ0ZXh0IiwgInBvc2l0aW9uIiwgIk1hdGgiLCAibWluIiwgImlzQW5jZXN0b3IiLCAiX29iamVjdFNwcmVhZCIsICJfc2NydWJiZXIiLCAidW5kZWZpbmVkIiwgIlNjcnViYmVyIiwgInNldFNjcnViYmVyIiwgInNjcnViYmVyIiwgInN0cmluZ2lmeSIsICJKU09OIiwgIlRleHQiLCAibG9vc2UiLCAib21pdFRleHQiLCAib2JqIiwgInJlc3QiLCAiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwgIl9leGNsdWRlZCIsICJpc0RlZXBFcXVhbCIsICJpc1RleHQiLCAiaXNUZXh0TGlzdCIsICJ2YWwiLCAiaXNUZXh0UHJvcHMiLCAicHJvcHMiLCAibWF0Y2hlcyIsICJrZXkiLCAiaGFzT3duUHJvcGVydHkiLCAiZGVjb3JhdGlvbnMiLCAibm9kZSIsICJsZWF2ZXMiLCAiZGVjIiwgIl9leGNsdWRlZDIiLCAic3RhcnQiLCAiZW5kIiwgIlJhbmdlIiwgImVkZ2VzIiwgIm5leHQiLCAibGVhZkVuZCIsICJkZWNvcmF0aW9uU3RhcnQiLCAiZGVjb3JhdGlvbkVuZCIsICJsZWFmIiwgImxlYWZTdGFydCIsICJPYmplY3QiLCAiYXNzaWduIiwgInB1c2giLCAibWlkZGxlIiwgImJlZm9yZSIsICJhZnRlciIsICJvZmYiLCAic2xpY2UiLCAiZ2V0RGVmYXVsdEluc2VydExvY2F0aW9uIiwgImVkaXRvciIsICJzZWxlY3Rpb24iLCAiY2hpbGRyZW4iLCAiRWRpdG9yIiwgIm1hdGNoUGF0aCIsICJuIiwgImdldENoYXJhY3RlckRpc3RhbmNlIiwgInN0ciIsICJpc1JUTCIsICJhcmd1bWVudHMiLCAiaXNMVFIiLCAiY29kZXBvaW50cyIsICJjb2RlcG9pbnRzSXRlcmF0b3JSVEwiLCAibGVmdCIsICJDb2RlcG9pbnRUeXBlIiwgIk5vbmUiLCAicmlnaHQiLCAiZGlzdGFuY2UiLCAiZ2IxMSIsICJnYjEyT3IxMyIsICJjaGFyIiwgImNvZGUiLCAiY29kZVBvaW50QXQiLCAiZ2V0Q29kZXBvaW50VHlwZSIsICJpbnRlcnNlY3RzIiwgIlpXSiIsICJFeHRQaWN0IiwgImVuZHNXaXRoRW1vamlaV0oiLCAic3Vic3RyaW5nIiwgIlJJIiwgImVuZHNXaXRoT2RkTnVtYmVyT2ZSSXMiLCAiaXNCb3VuZGFyeVBhaXIiLCAiU1BBQ0UiLCAiUFVOQ1RVQVRJT04iLCAiQ0hBTUVMRU9OIiwgImdldFdvcmREaXN0YW5jZSIsICJkaXN0IiwgInN0YXJ0ZWQiLCAiY2hhckRpc3QiLCAicmVtYWluaW5nIiwgInNwbGl0QnlDaGFyYWN0ZXJEaXN0YW5jZSIsICJpc1dvcmRDaGFyYWN0ZXIiLCAiYXQiLCAidGVzdCIsICJuZXh0Q2hhciIsICJuZXh0UmVtYWluaW5nIiwgImkiLCAiY2hhcjEiLCAiY2hhckF0IiwgImlzTG93U3Vycm9nYXRlIiwgImNoYXJDb2RlQXQiLCAiY2hhcjIiLCAiaXNIaWdoU3Vycm9nYXRlIiwgImNoYXJDb2RlIiwgInJlRXh0ZW5kIiwgInJlUHJlcGVuZCIsICJyZVNwYWNpbmdNYXJrIiwgInJlTCIsICJyZVYiLCAicmVUIiwgInJlTFYiLCAicmVMVlQiLCAicmVFeHRQaWN0IiwgIkFueSIsICJzZWFyY2giLCAiRXh0ZW5kIiwgIlByZXBlbmQiLCAiU3BhY2luZ01hcmsiLCAiTCIsICJWIiwgIlQiLCAiTFYiLCAiTFZUIiwgIngiLCAieSIsICJOb25Cb3VuZGFyeVBhaXJzIiwgImZpbmRJbmRleCIsICJyIiwgImVuZGluZ0Vtb2ppWldKIiwgImVuZGluZ1JJcyIsICJtYXRjaCIsICJudW1SSXMiLCAiVGV4dFRyYW5zZm9ybXMiLCAiZGVsZXRlIiwgImluc2VydEZyYWdtZW50IiwgImZyYWdtZW50IiwgImluc2VydFRleHQiLCAid2l0aG91dE5vcm1hbGl6aW5nIiwgInZvaWRzIiwgInJhbmdlIiwgImlzUmFuZ2UiLCAiaXNDb2xsYXBzZWQiLCAiYW5jaG9yIiwgInZvaWQiLCAic3RhcnRSZWYiLCAicG9pbnRSZWYiLCAiZW5kUmVmIiwgIlRyYW5zZm9ybXMiLCAic3RhcnRQb2ludCIsICJ1bnJlZiIsICJlbmRQb2ludCIsICJzZXRTZWxlY3Rpb24iLCAiZm9jdXMiLCAiZWxlbWVudFJlYWRPbmx5IiwgImFwcGx5IiwgIkdlbmVyYWxUcmFuc2Zvcm1zIiwgIk5vZGVUcmFuc2Zvcm1zIiwgIlNlbGVjdGlvblRyYW5zZm9ybXMiLCAicmVmIiwgInBhdGhSZWZzIiwgIlBhdGhSZWYiLCAicG9pbnRSZWZzIiwgIlBvaW50UmVmIiwgInJhbmdlUmVmcyIsICJSYW5nZVJlZiIsICJvbGREaXJ0eVBhdGhzIiwgIkRJUlRZX1BBVEhTIiwgImdldCIsICJvbGREaXJ0eVBhdGhLZXlzIiwgIkRJUlRZX1BBVEhfS0VZUyIsICJTZXQiLCAiZGlydHlQYXRocyIsICJkaXJ0eVBhdGhLZXlzIiwgImFkZCIsICJqb2luIiwgImhhcyIsICJvcGVyYXRpb25DYW5UcmFuc2Zvcm1QYXRoIiwgIm5ld1BhdGgiLCAibmV3RGlydHlQYXRocyIsICJnZXREaXJ0eVBhdGhzIiwgInNldCIsICJvcGVyYXRpb25zIiwgIm5vcm1hbGl6ZSIsICJvcGVyYXRpb24iLCAibWFya3MiLCAiRkxVU0hJTkciLCAiUHJvbWlzZSIsICJyZXNvbHZlIiwgInRoZW4iLCAib25DaGFuZ2UiLCAibGV2ZWxzIiwgImRlc2NlbmRhbnRzIiwgImZyb20iLCAiTm9kZSIsICJub2RlcyIsICJfcmVmIiwgImNvbmNhdCIsICJhbmNlc3RvcnMiLCAicHJldmlvdXNQYXRoIiwgInByZXZpb3VzIiwgIm9sZEFuY2VzdG9ycyIsICJuZXdBbmNlc3RvcnMiLCAiYW5jZXN0b3IiLCAibmV3UGFyZW50IiwgIm5ld0luZGV4IiwgInJlc3VsdFBhdGgiLCAibmV4dFBhdGgiLCAiZ2V0RnJhZ21lbnQiLCAibm9ybWFsaXplTm9kZSIsICJlbnRyeSIsICJFbGVtZW50IiwgImlzRWxlbWVudCIsICJjaGlsZCIsICJpbnNlcnROb2RlcyIsICJzaG91bGRIYXZlSW5saW5lcyIsICJpc0VkaXRvciIsICJpc0lubGluZSIsICJjdXJyZW50Tm9kZSIsICJwcmV2IiwgImlzTGFzdCIsICJpc0lubGluZU9yVGV4dCIsICJyZW1vdmVOb2RlcyIsICJuZXdDaGlsZCIsICJtZXJnZU5vZGVzIiwgInNob3VsZE5vcm1hbGl6ZSIsICJpdGVyYXRpb24iLCAiaW5pdGlhbERpcnR5UGF0aHNMZW5ndGgiLCAibWF4SXRlcmF0aW9ucyIsICJFcnJvciIsICJhYm92ZSIsICJtb2RlIiwgInJldmVyc2UiLCAiYWRkTWFyayIsICJwYXJlbnROb2RlIiwgInBhcmVudFBhdGgiLCAicGFyZW50IiwgImlzVm9pZCIsICJtYXJrYWJsZVZvaWQiLCAiZXhwYW5kZWRTZWxlY3Rpb24iLCAiaXNFeHBhbmRlZCIsICJtYXJrQWNjZXB0aW5nVm9pZFNlbGVjdGVkIiwgInNlbGVjdGVkTm9kZSIsICJzZWxlY3RlZFBhdGgiLCAic2V0Tm9kZXMiLCAic3BsaXQiLCAiZWRnZSIsICJkIiwgInRhcmdldCIsICJwb3NpdGlvbnMiLCAiZGVsZXRlQmFja3dhcmQiLCAidW5pdCIsICJkZWxldGVGb3J3YXJkIiwgImRlbGV0ZUZyYWdtZW50IiwgImRpcmVjdGlvbiIsICJpc0VsZW1lbnRSZWFkT25seSIsICJmaXJzdCIsICJnZXRWb2lkIiwgImhhc0Jsb2NrcyIsICJlbGVtZW50IiwgInNvbWUiLCAiaXNCbG9jayIsICJoYXNJbmxpbmVzIiwgImhhc1BhdGgiLCAiaGFzVGV4dHMiLCAiaW5zZXJ0QnJlYWsiLCAic3BsaXROb2RlcyIsICJhbHdheXMiLCAiaW5zZXJ0Tm9kZSIsICJpbnNlcnRTb2Z0QnJlYWsiLCAiaXNFZGdlIiwgImlzU3RhcnQiLCAiaXNFbmQiLCAiaXNFbXB0eSIsICJpc05vcm1hbGl6aW5nIiwgIk5PUk1BTElaSU5HIiwgImxhc3QiLCAibWFya2VkVm9pZCIsICJibG9jayIsICJwcmV2Tm9kZSIsICJwcmV2UGF0aCIsICJibG9ja1BhdGgiLCAicG9pbnRBZnRlckxvY2F0aW9uIiwgInRvIiwgInNwYW4iLCAiaW5jbHVkZXMiLCAidW5pdmVyc2FsIiwgImlnbm9yZU5vblNlbGVjdGFibGUiLCAibm9kZUVudHJpZXMiLCAicGFzcyIsICJpc1NlbGVjdGFibGUiLCAiaGl0IiwgImlzTG93ZXIiLCAiZW1pdCIsICJmb3JjZSIsICJnZXREaXJ0eVBhdGhLZXlzIiwgInBvcERpcnR5UGF0aCIsICJwb3AiLCAiYWxsUGF0aHMiLCAiYWxsUGF0aEtleXMiLCAibWFwIiwgImRpcnR5UGF0aCIsICJfIiwgInBhdGhSZWYiLCAiY3VycmVudCIsICJyZWZzIiwgIlBBVEhfUkVGUyIsICJkZXB0aCIsICJmaXJzdFBhdGgiLCAibGFzdFBhdGgiLCAiY29tbW9uIiwgIlBPSU5UX1JFRlMiLCAiaXNOZXdCbG9jayIsICJibG9ja1RleHQiLCAibGVhZlRleHRSZW1haW5pbmciLCAibGVhZlRleHRPZmZzZXQiLCAiZSIsICJzIiwgInN0cmluZyIsICJpc0ZpcnN0IiwgImNhbGNEaXN0YW5jZSIsICJwb2ludEJlZm9yZUxvY2F0aW9uIiwgInJhbmdlUmVmIiwgIlJBTkdFX1JFRlMiLCAicmVtb3ZlTWFyayIsICJ1bnNldE5vZGVzIiwgInNldE5vcm1hbGl6aW5nIiwgInQiLCAidW5oYW5nUmFuZ2UiLCAiaGFzUHJldmlvdXMiLCAiZW5kQmxvY2siLCAic2tpcCIsICJmbiIsICJkZWxldGVUZXh0IiwgIl9FZGl0b3Ikdm9pZCIsICJfRWRpdG9yJHZvaWQyIiwgImhhbmdpbmciLCAiZnVydGhlc3RWb2lkIiwgInZvaWRQYXRoIiwgIm9wdHMiLCAiZW5kT2ZEb2MiLCAic3RhcnRCbG9jayIsICJpc0Fjcm9zc0Jsb2NrcyIsICJpc1NpbmdsZVRleHQiLCAic3RhcnROb25FZGl0YWJsZSIsICJlbmROb25FZGl0YWJsZSIsICJpc0NvbW1vbiIsICJyZW1vdmVkVGV4dCIsICJmaWx0ZXIiLCAiZm9yRWFjaCIsICJzdGFydFVucmVmIiwgImVuZFVucmVmIiwgInNlbGVjdCIsICJpbmxpbmVFbGVtZW50TWF0Y2giLCAiaW5saW5lUGF0aCIsICJibG9ja01hdGNoIiwgImlzQmxvY2tTdGFydCIsICJpc0Jsb2NrRW5kIiwgImlzQmxvY2tFbXB0eSIsICJtZXJnZVN0YXJ0IiwgIm1lcmdlRW5kIiwgIm1hdGNoZXIiLCAiaXNSb290IiwgInN0YXJ0cyIsICJtaWRkbGVzIiwgImVuZHMiLCAic3RhcnRpbmciLCAiaW5saW5lTWF0Y2giLCAiaXNJbmxpbmVTdGFydCIsICJpc0lubGluZUVuZCIsICJtaWRkbGVSZWYiLCAiY29sbGFwc2UiLCAiZGVzZWxlY3QiLCAicHJvcGVydGllcyIsICJuZXdQcm9wZXJ0aWVzIiwgIm1vdmUiLCAiaXNCYWNrd2FyZCIsICJzZXRQb2ludCIsICJvbGRQcm9wcyIsICJuZXdQcm9wcyIsICJrIiwgImtleXMiLCAiaXNOb2RlIiwgImlzQXRFbmQiLCAiaW5kZXgiLCAibGlmdE5vZGVzIiwgInBhcmVudE5vZGVFbnRyeSIsICJ0b1BhdGgiLCAibW92ZU5vZGVzIiwgInNwbGl0UGF0aCIsICJoYXNTaW5nbGVDaGlsZE5lc3QiLCAiY29tbW9uUGF0aCIsICJpc1ByZXZpb3VzU2libGluZyIsICJpc1NpYmxpbmciLCAiZW1wdHlBbmNlc3RvciIsICJlbXB0eVJlZiIsICJ0b1JlZiIsICJ0YXJnZXRzIiwgImRlcHRocyIsICJtZXJnZSIsICJzcGxpdE1vZGUiLCAiZW5kQXRFbmRPZk5vZGUiLCAic3RhcnRBdFN0YXJ0T2ZOb2RlIiwgInByb3AiLCAibm9kZVByb3AiLCAiaGFzQ2hhbmdlcyIsICJkZWxldGVSYW5nZSIsICJoZWlnaHQiLCAiYmVmb3JlUmVmIiwgImFmdGVyUmVmIiwgImhpZ2hlc3QiLCAidm9pZE1hdGNoIiwgIm51ZGdlIiwgInZvaWROb2RlIiwgImFmdGVyUGF0aCIsICJzaWJsaW5nSGVpZ2h0IiwgImhpZ2hlc3RQYXRoIiwgImxvd2VzdFBhdGgiLCAiZXh0cmFjdFByb3BzIiwgIl9hZnRlclJlZiIsICJ1bndyYXBOb2RlcyIsICJfbG9vcCIsICJpbnRlcnNlY3Rpb24iLCAid3JhcE5vZGVzIiwgInJvb3RzIiwgImEiLCAicm9vdFBhdGgiLCAiY29tbW9uTm9kZUVudHJ5IiwgImNvbW1vbk5vZGUiLCAid3JhcHBlclBhdGgiLCAid3JhcHBlciIsICJfcmV0IiwgImNyZWF0ZUVkaXRvciIsICJfbGVuIiwgImFyZ3MiLCAiX2tleSIsICJfbGVuMiIsICJfa2V5MiIsICJfbGVuMyIsICJfa2V5MyIsICJfbGVuNCIsICJfa2V5NCIsICJfbGVuNSIsICJfa2V5NSIsICJfbGVuNiIsICJfa2V5NiIsICJfbGVuNyIsICJfa2V5NyIsICJfbGVuOCIsICJfa2V5OCIsICJfbGVuOSIsICJfa2V5OSIsICJfbGVuMTAiLCAiX2tleTEwIiwgIl9sZW4xMSIsICJfa2V5MTEiLCAiX2xlbjEyIiwgIl9rZXkxMiIsICJfbGVuMTMiLCAiX2tleTEzIiwgIl9sZW4xNCIsICJfa2V5MTQiLCAiX2xlbjE1IiwgIl9rZXkxNSIsICJfbGVuMTYiLCAiX2tleTE2IiwgIl9sZW4xNyIsICJfa2V5MTciLCAiX2xlbjE4IiwgIl9rZXkxOCIsICJfbGVuMTkiLCAiX2tleTE5IiwgIl9kZWxldGUiLCAiX2xlbjIwIiwgIl9rZXkyMCIsICJfbGVuMjEiLCAiX2tleTIxIiwgIl9sZW4yMiIsICJfa2V5MjIiLCAiX2xlbjIzIiwgIl9rZXkyMyIsICJfbGVuMjQiLCAiX2tleTI0IiwgIl9sZW4yNSIsICJfa2V5MjUiLCAiX2xlbjI2IiwgIl9rZXkyNiIsICJnZXRNYXJrcyIsICJfbGVuMjciLCAiX2tleTI3IiwgIl9sZW4yOCIsICJfa2V5MjgiLCAiX2xlbjI5IiwgIl9rZXkyOSIsICJfbGVuMzAiLCAiX2tleTMwIiwgIl9sZW4zMSIsICJfa2V5MzEiLCAiX2xlbjMyIiwgIl9rZXkzMiIsICJfbGVuMzMiLCAiX2tleTMzIiwgIl9sZW4zNCIsICJfa2V5MzQiLCAiX2xlbjM1IiwgIl9rZXkzNSIsICJfbGVuMzYiLCAiX2tleTM2IiwgIl9sZW4zNyIsICJfa2V5MzciLCAiX2xlbjM4IiwgIl9rZXkzOCIsICJfbGVuMzkiLCAiX2tleTM5IiwgIl9sZW40MCIsICJfa2V5NDAiLCAiX2xlbjQxIiwgIl9rZXk0MSIsICJfbGVuNDIiLCAiX2tleTQyIiwgIl9sZW40MyIsICJfa2V5NDMiLCAiX2xlbjQ0IiwgIl9rZXk0NCIsICJfbGVuNDUiLCAiX2tleTQ1IiwgIl9sZW40NiIsICJfa2V5NDYiLCAiX2xlbjQ3IiwgIl9rZXk0NyIsICJfbGVuNDgiLCAiX2tleTQ4IiwgIl9sZW40OSIsICJfa2V5NDkiLCAiX2xlbjUwIiwgIl9rZXk1MCIsICJfbGVuNTEiLCAiX2tleTUxIiwgIl9sZW41MiIsICJfa2V5NTIiLCAiX2xlbjUzIiwgIl9rZXk1MyIsICJfbGVuNTQiLCAiX2tleTU0IiwgIl9sZW41NSIsICJfa2V5NTUiLCAiX2xlbjU2IiwgIl9rZXk1NiIsICJfbGVuNTciLCAiX2tleTU3IiwgIl9sZW41OCIsICJfa2V5NTgiLCAiX2xlbjU5IiwgIl9rZXk1OSIsICJfbGVuNjAiLCAiX2tleTYwIiwgIl9sZW42MSIsICJfa2V5NjEiLCAiX2xlbjYyIiwgIl9rZXk2MiIsICJfbGVuNjMiLCAiX2tleTYzIiwgIl9sZW42NCIsICJfa2V5NjQiLCAiX2xlbjY1IiwgIl9rZXk2NSIsICJfbGVuNjYiLCAiX2tleTY2IiwgIl9sZW42NyIsICJfa2V5NjciLCAiX2xlbjY4IiwgIl9rZXk2OCIsICJfbGVuNjkiLCAiX2tleTY5IiwgIl9sZW43MCIsICJfa2V5NzAiLCAiX2xlbjcxIiwgIl9rZXk3MSIsICJfbGVuNzIiLCAiX2tleTcyIiwgIl9sZW43MyIsICJfa2V5NzMiLCAiX3ZvaWQiLCAiX2xlbjc0IiwgIl9rZXk3NCIsICJfbGVuNzUiLCAiX2tleTc1IiwgIl9sZW43NiIsICJfa2V5NzYiLCAiZWwiLCAibm9kZVR5cGUiLCAiY2FuT3ZlcmZsb3ciLCAib3ZlcmZsb3ciLCAic2tpcE92ZXJmbG93SGlkZGVuRWxlbWVudHMiLCAidCIsICJpc1Njcm9sbGFibGUiLCAiY2xpZW50SGVpZ2h0IiwgInNjcm9sbEhlaWdodCIsICJjbGllbnRXaWR0aCIsICJzY3JvbGxXaWR0aCIsICJzdHlsZSIsICJnZXRDb21wdXRlZFN0eWxlIiwgIm92ZXJmbG93WSIsICJvdmVyZmxvd1giLCAiZnJhbWUiLCAib3duZXJEb2N1bWVudCIsICJkZWZhdWx0VmlldyIsICJmcmFtZUVsZW1lbnQiLCAiZSIsICJzY3JvbGxpbmdFZGdlU3RhcnQiLCAic2Nyb2xsaW5nRWRnZUVuZCIsICJzY3JvbGxpbmdTaXplIiwgInNjcm9sbGluZ0JvcmRlclN0YXJ0IiwgInNjcm9sbGluZ0JvcmRlckVuZCIsICJlbGVtZW50RWRnZVN0YXJ0IiwgImVsZW1lbnRFZGdlRW5kIiwgImVsZW1lbnRTaXplIiwgInRhcmdldCIsICJvcHRpb25zIiwgIndpbmRvd1dpdGhWaWV3cG9ydCIsICJ3aW5kb3ciLCAic2Nyb2xsTW9kZSIsICJibG9jayIsICJpbmxpbmUiLCAiYm91bmRhcnkiLCAiY2hlY2tCb3VuZGFyeSIsICJub2RlIiwgImlzRWxlbWVudCIsICJlbGVtZW50IiwgInBhcmVudCIsICJzY3JvbGxpbmdFbGVtZW50IiwgImRvY3VtZW50IiwgImRvY3VtZW50RWxlbWVudCIsICJmcmFtZXMiLCAiY3Vyc29yIiwgInBhcmVudEVsZW1lbnQiLCAiZ2V0Um9vdE5vZGUiLCAiaG9zdCIsICJwdXNoIiwgImJvZHkiLCAidmlld3BvcnRXaWR0aCIsICJ2aXN1YWxWaWV3cG9ydCIsICJ3aWR0aCIsICJpbm5lcldpZHRoIiwgInZpZXdwb3J0SGVpZ2h0IiwgImhlaWdodCIsICJpbm5lckhlaWdodCIsICJzY3JvbGxYIiwgInBhZ2VYT2Zmc2V0IiwgInZpZXdwb3J0WSIsICJzY3JvbGxZIiwgInBhZ2VZT2Zmc2V0IiwgIl90YXJnZXQkZ2V0Qm91bmRpbmdDbCIsICJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCAidGFyZ2V0SGVpZ2h0IiwgInRhcmdldFdpZHRoIiwgInRhcmdldFRvcCIsICJ0b3AiLCAidGFyZ2V0UmlnaHQiLCAicmlnaHQiLCAidGFyZ2V0Qm90dG9tIiwgImJvdHRvbSIsICJ0YXJnZXRMZWZ0IiwgImxlZnQiLCAidGFyZ2V0QmxvY2siLCAidGFyZ2V0SW5saW5lIiwgImNvbXB1dGF0aW9ucyIsICJpbmRleCIsICJsZW5ndGgiLCAiX2ZyYW1lJGdldEJvdW5kaW5nQ2xpIiwgImZyYW1lU3R5bGUiLCAiYm9yZGVyTGVmdCIsICJwYXJzZUludCIsICJib3JkZXJMZWZ0V2lkdGgiLCAiYm9yZGVyVG9wIiwgImJvcmRlclRvcFdpZHRoIiwgImJvcmRlclJpZ2h0V2lkdGgiLCAiYm9yZGVyQm90dG9tIiwgImJvcmRlckJvdHRvbVdpZHRoIiwgImJsb2NrU2Nyb2xsIiwgImlubGluZVNjcm9sbCIsICJzY3JvbGxiYXJXaWR0aCIsICJvZmZzZXRXaWR0aCIsICJib3JkZXJSaWdodCIsICJzY3JvbGxiYXJIZWlnaHQiLCAib2Zmc2V0SGVpZ2h0IiwgInNjYWxlWCIsICJzY2FsZVkiLCAiYWxpZ25OZWFyZXN0IiwgInZpZXdwb3J0WCIsICJNYXRoIiwgIm1heCIsICJzY3JvbGxMZWZ0IiwgInNjcm9sbFRvcCIsICJtaW4iLCAiUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zIiwgImZyZWV6ZSIsICJSZXNpemVPYnNlcnZlclNpemUiLCAiZnJlZXplIiwgIkRPTVJlY3RSZWFkT25seSIsICJmcmVlemUiLCAiaXNFbGVtZW50IiwgImdsb2JhbCIsICJnbG9iYWwiLCAiZnJlZXplIiwgIlJlc2l6ZU9ic2VydmVyRW50cnkiLCAiZnJlZXplIiwgIm5vZGUiLCAicGFyZW50IiwgImNhbGxiYWNrcyIsICJwcm9jZXNzIiwgIlJlc2l6ZU9ic2VydmVyIiwgIlNjaGVkdWxlciIsICJwcm9jZXNzIiwgImdsb2JhbCIsICJuIiwgIlJlc2l6ZU9ic2VydmF0aW9uIiwgInNpemUiLCAiUmVzaXplT2JzZXJ2ZXJEZXRhaWwiLCAiaSIsICJSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIiLCAiUmVzaXplT2JzZXJ2ZXIiLCAiaXNFbGVtZW50IiwgIl9kZWZpbmVQcm9wZXJ0eSIsICJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSIsICJpIiwgIl9vYmplY3RXaXRob3V0UHJvcGVydGllcyIsICJvYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIiwgIm4iLCAiS2V5IiwgImNvbnN0cnVjdG9yIiwgImlkIiwgIk5PREVfVE9fSU5ERVgiLCAiV2Vha01hcCIsICJOT0RFX1RPX1BBUkVOVCIsICJFRElUT1JfVE9fV0lORE9XIiwgIkVESVRPUl9UT19FTEVNRU5UIiwgIkVESVRPUl9UT19QTEFDRUhPTERFUl9FTEVNRU5UIiwgIkVMRU1FTlRfVE9fTk9ERSIsICJOT0RFX1RPX0VMRU1FTlQiLCAiTk9ERV9UT19LRVkiLCAiRURJVE9SX1RPX0tFWV9UT19FTEVNRU5UIiwgIklTX1JFQURfT05MWSIsICJJU19GT0NVU0VEIiwgIklTX0NPTVBPU0lORyIsICJFRElUT1JfVE9fVVNFUl9TRUxFQ1RJT04iLCAiRURJVE9SX1RPX09OX0NIQU5HRSIsICJFRElUT1JfVE9fU0NIRURVTEVfRkxVU0giLCAiRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTIiwgIkVESVRPUl9UT19VU0VSX01BUktTIiwgIkVESVRPUl9UT19QRU5ESU5HX0RJRkZTIiwgIkVESVRPUl9UT19QRU5ESU5HX0FDVElPTiIsICJFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04iLCAiRURJVE9SX1RPX0ZPUkNFX1JFTkRFUiIsICJQTEFDRUhPTERFUl9TWU1CT0wiLCAiU3ltYm9sIiwgIk1BUktfUExBQ0VIT0xERVJfU1lNQk9MIiwgIkRPTVRleHQiLCAiZ2xvYmFsVGhpcyIsICJUZXh0IiwgImdldERlZmF1bHRWaWV3IiwgInZhbHVlIiwgIm93bmVyRG9jdW1lbnQiLCAiZGVmYXVsdFZpZXciLCAiaXNET01Db21tZW50IiwgImlzRE9NTm9kZSIsICJub2RlVHlwZSIsICJpc0RPTUVsZW1lbnQiLCAid2luZG93IiwgIk5vZGUiLCAiaXNET01TZWxlY3Rpb24iLCAiYW5jaG9yTm9kZSIsICJTZWxlY3Rpb24iLCAiaXNET01UZXh0IiwgImlzUGxhaW5UZXh0T25seVBhc3RlIiwgImV2ZW50IiwgImNsaXBib2FyZERhdGEiLCAiZ2V0RGF0YSIsICJ0eXBlcyIsICJsZW5ndGgiLCAibm9ybWFsaXplRE9NUG9pbnQiLCAiZG9tUG9pbnQiLCAibm9kZSIsICJvZmZzZXQiLCAiY2hpbGROb2RlcyIsICJpc0xhc3QiLCAiaW5kZXgiLCAiZ2V0RWRpdGFibGVDaGlsZEFuZEluZGV4IiwgImdldEVkaXRhYmxlQ2hpbGQiLCAidGV4dENvbnRlbnQiLCAiaGFzU2hhZG93Um9vdCIsICJwYXJlbnQiLCAicGFyZW50Tm9kZSIsICJ0b1N0cmluZyIsICJkaXJlY3Rpb24iLCAiY2hpbGQiLCAidHJpZWRGb3J3YXJkIiwgInRyaWVkQmFja3dhcmQiLCAiZ2V0QXR0cmlidXRlIiwgImdldFBsYWluVGV4dCIsICJkb21Ob2RlIiwgInRleHQiLCAibm9kZVZhbHVlIiwgImNoaWxkTm9kZSIsICJBcnJheSIsICJmcm9tIiwgImRpc3BsYXkiLCAiZ2V0Q29tcHV0ZWRTdHlsZSIsICJnZXRQcm9wZXJ0eVZhbHVlIiwgInRhZ05hbWUiLCAiY2F0Y2hTbGF0ZUZyYWdtZW50IiwgImdldFNsYXRlRnJhZ21lbnRBdHRyaWJ1dGUiLCAiZGF0YVRyYW5zZmVyIiwgImh0bWxEYXRhIiwgImZyYWdtZW50IiwgIm1hdGNoIiwgImlzVHJhY2tlZE11dGF0aW9uIiwgImVkaXRvciIsICJtdXRhdGlvbiIsICJiYXRjaCIsICJ0YXJnZXQiLCAibWF0Y2hlcyIsICJkb2N1bWVudCIsICJSZWFjdEVkaXRvciIsICJnZXRXaW5kb3ciLCAiY29udGFpbnMiLCAiaGFzRE9NTm9kZSIsICJlZGl0YWJsZSIsICJwYXJlbnRNdXRhdGlvbiIsICJmaW5kIiwgImFkZGVkTm9kZXMiLCAicmVtb3ZlZE5vZGVzIiwgIklTX1JFQUNUX1ZFUlNJT05fMTdfT1JfQUJPVkUiLCAicGFyc2VJbnQiLCAiUmVhY3QiLCAidmVyc2lvbiIsICJzcGxpdCIsICJJU19JT1MiLCAibmF2aWdhdG9yIiwgInRlc3QiLCAidXNlckFnZW50IiwgIk1TU3RyZWFtIiwgIklTX0FQUExFIiwgIklTX0FORFJPSUQiLCAiSVNfRklSRUZPWCIsICJJU19TQUZBUkkiLCAiSVNfRURHRV9MRUdBQ1kiLCAiSVNfQ0hST01FIiwgIklTX0NIUk9NRV9MRUdBQ1kiLCAiSVNfRklSRUZPWF9MRUdBQ1kiLCAiSVNfVUNfTU9CSUxFIiwgIklTX1dFQ0hBVEJST1dTRVIiLCAiQ0FOX1VTRV9ET00iLCAiY3JlYXRlRWxlbWVudCIsICJIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQiLCAiSW5wdXRFdmVudCIsICJwcm90b3R5cGUiLCAiZ2V0VGFyZ2V0UmFuZ2VzIiwgImlzQ29tcG9zaW5nIiwgImdldCIsICJFcnJvciIsICJmaW5kS2V5IiwgImtleSIsICJzZXQiLCAiZmluZFBhdGgiLCAicGF0aCIsICJFZGl0b3IiLCAiaXNFZGl0b3IiLCAidW5zaGlmdCIsICJTY3J1YmJlciIsICJzdHJpbmdpZnkiLCAiZmluZERvY3VtZW50T3JTaGFkb3dSb290IiwgImVsIiwgInRvRE9NTm9kZSIsICJyb290IiwgImdldFJvb3ROb2RlIiwgIkRvY3VtZW50IiwgIlNoYWRvd1Jvb3QiLCAiZ2V0U2VsZWN0aW9uIiwgImlzRm9jdXNlZCIsICJpc1JlYWRPbmx5IiwgImJsdXIiLCAiYWN0aXZlRWxlbWVudCIsICJmb2N1cyIsICJwcmV2ZW50U2Nyb2xsIiwgImRlc2VsZWN0IiwgInNlbGVjdGlvbiIsICJkb21TZWxlY3Rpb24iLCAicmFuZ2VDb3VudCIsICJyZW1vdmVBbGxSYW5nZXMiLCAiVHJhbnNmb3JtcyIsICJvcHRpb25zIiwgImVkaXRvckVsIiwgInRhcmdldEVsIiwgInBhcmVudEVsZW1lbnQiLCAiZXJyIiwgIm1lc3NhZ2UiLCAiaW5jbHVkZXMiLCAiY2xvc2VzdCIsICJpc0NvbnRlbnRFZGl0YWJsZSIsICJpbnNlcnREYXRhIiwgImRhdGEiLCAiaW5zZXJ0RnJhZ21lbnREYXRhIiwgImluc2VydFRleHREYXRhIiwgInNldEZyYWdtZW50RGF0YSIsICJvcmlnaW5FdmVudCIsICJLRVlfVE9fRUxFTUVOVCIsICJ0b0RPTVBvaW50IiwgInBvaW50IiwgInZvaWQiLCAiYXQiLCAic2VsZWN0b3IiLCAidGV4dHMiLCAicXVlcnlTZWxlY3RvckFsbCIsICJzdGFydCIsICJhdHRyIiwgInRydWVMZW5ndGgiLCAiZW5kIiwgIm5leHRUZXh0IiwgImhhc0F0dHJpYnV0ZSIsICJkb21UZXh0IiwgInN0YXJ0c1dpdGgiLCAiTWF0aCIsICJtaW4iLCAibWF4IiwgInRvRE9NUmFuZ2UiLCAicmFuZ2UiLCAiYW5jaG9yIiwgImlzQmFja3dhcmQiLCAiUmFuZ2UiLCAiZG9tQW5jaG9yIiwgImRvbUZvY3VzIiwgImlzQ29sbGFwc2VkIiwgImRvbVJhbmdlIiwgImNyZWF0ZVJhbmdlIiwgInN0YXJ0Tm9kZSIsICJzdGFydE9mZnNldCIsICJlbmROb2RlIiwgImVuZE9mZnNldCIsICJzdGFydEVsIiwgImlzU3RhcnRBdFplcm9XaWR0aCIsICJlbmRFbCIsICJpc0VuZEF0WmVyb1dpZHRoIiwgInNldFN0YXJ0IiwgInNldEVuZCIsICJ0b1NsYXRlTm9kZSIsICJkb21FbCIsICJmaW5kRXZlbnRSYW5nZSIsICJuYXRpdmVFdmVudCIsICJjbGllbnRYIiwgIngiLCAiY2xpZW50WSIsICJ5IiwgIkVsZW1lbnQiLCAiaXNFbGVtZW50IiwgImlzVm9pZCIsICJyZWN0IiwgImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsICJpc1ByZXYiLCAiaXNJbmxpbmUiLCAibGVmdCIsICJ3aWR0aCIsICJ0b3AiLCAiaGVpZ2h0IiwgImVkZ2UiLCAiYmVmb3JlIiwgImFmdGVyIiwgImNhcmV0UmFuZ2VGcm9tUG9pbnQiLCAicG9zaXRpb24iLCAiY2FyZXRQb3NpdGlvbkZyb21Qb2ludCIsICJvZmZzZXROb2RlIiwgInRvU2xhdGVSYW5nZSIsICJleGFjdE1hdGNoIiwgInN1cHByZXNzVGhyb3ciLCAidG9TbGF0ZVBvaW50IiwgIm5lYXJlc3ROb2RlIiwgIm5lYXJlc3RPZmZzZXQiLCAidGV4dE5vZGUiLCAicG90ZW50aWFsVm9pZE5vZGUiLCAidm9pZE5vZGUiLCAibGVhZk5vZGUiLCAiY29udGVudHMiLCAiY2xvbmVDb250ZW50cyIsICJyZW1vdmFscyIsICJzbGljZSIsICJjYWxsIiwgImZvckVhY2giLCAidGV4dENvbnRleHQiLCAicmVtb3ZlQ2hpbGQiLCAibGVhZk5vZGVzIiwgImN1cnJlbnQiLCAiZW5kc1dpdGgiLCAic2xhdGVOb2RlIiwgInF1ZXJ5U2VsZWN0b3IiLCAic3RhcnRDb250YWluZXIiLCAiYW5jaG9yT2Zmc2V0IiwgImZvY3VzTm9kZSIsICJmb2N1c09mZnNldCIsICJlbmRDb250YWluZXIiLCAiY29sbGFwc2VkIiwgImlzRW5kIiwgImlzU3RhcnQiLCAiaXNFeHBhbmRlZCIsICJpc0ZvcndhcmQiLCAibW9kZSIsICJ1bmhhbmdSYW5nZSIsICJ2b2lkcyIsICJoYXNSYW5nZSIsICJoYXNQYXRoIiwgImhhc1RhcmdldCIsICJoYXNFZGl0YWJsZVRhcmdldCIsICJoYXNTZWxlY3RhYmxlVGFyZ2V0IiwgImlzVGFyZ2V0SW5zaWRlTm9uUmVhZG9ubHlWb2lkIiwgImFuZHJvaWRTY2hlZHVsZUZsdXNoIiwgImFuZHJvaWRQZW5kaW5nRGlmZnMiLCAidXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCIsICJ1c2VMYXlvdXRFZmZlY3QiLCAidXNlRWZmZWN0IiwgInNoYWxsb3dDb21wYXJlIiwgIm9iajEiLCAib2JqMiIsICJPYmplY3QiLCAia2V5cyIsICJldmVyeSIsICJoYXNPd25Qcm9wZXJ0eSIsICJpc0RlY29yYXRvclJhbmdlTGlzdEVxdWFsIiwgImxpc3QiLCAiYW5vdGhlciIsICJvdGhlciIsICJyYW5nZU93blByb3BzIiwgIl9leGNsdWRlZCQzIiwgIm90aGVyT3duUHJvcHMiLCAiX2V4Y2x1ZGVkMiQxIiwgImVxdWFscyIsICJTdHJpbmciLCAicHJvcHMiLCAibGVhZiIsICJ1c2VTbGF0ZVN0YXRpYyIsICJwYXJlbnRQYXRoIiwgIlBhdGgiLCAiaXNNYXJrUGxhY2Vob2xkZXIiLCAiWmVyb1dpZHRoU3RyaW5nIiwgInN0cmluZyIsICJjaGlsZHJlbiIsICJpc0xpbmVCcmVhayIsICJUZXh0U3RyaW5nIiwgImlzVHJhaWxpbmciLCAicmVmIiwgInVzZVJlZiIsICJnZXRUZXh0Q29udGVudCIsICJ0ZXh0V2l0aFRyYWlsaW5nIiwgImF0dHJpYnV0ZXMiLCAiRWRpdG9yQ29udGV4dCIsICJjcmVhdGVDb250ZXh0IiwgInVzZUNvbnRleHQiLCAiTGVhZiIsICJyZW5kZXJQbGFjZWhvbGRlciIsICJyZW5kZXJMZWFmIiwgIkRlZmF1bHRMZWFmIiwgImxhc3RQbGFjZWhvbGRlclJlZiIsICJwbGFjZWhvbGRlclJlZiIsICJwbGFjZWhvbGRlclJlc2l6ZU9ic2VydmVyIiwgImRpc2Nvbm5lY3QiLCAicGxhY2Vob2xkZXJFbCIsICJkZWxldGUiLCAib2JzZXJ2ZSIsICJSZXNpemVPYnNlcnZlciIsICJSZXNpemVPYnNlcnZlclBvbHlmaWxsIiwgImZvcmNlUmVuZGVyIiwgInBsYWNlaG9sZGVyUHJvcHMiLCAicGxhY2Vob2xkZXIiLCAic3R5bGUiLCAicG9pbnRlckV2ZW50cyIsICJtYXhXaWR0aCIsICJvcGFjaXR5IiwgInVzZXJTZWxlY3QiLCAidGV4dERlY29yYXRpb24iLCAiY29udGVudEVkaXRhYmxlIiwgIkZyYWdtZW50IiwgIk1lbW9pemVkTGVhZiIsICJtZW1vIiwgInByZXYiLCAibmV4dCIsICJkZWNvcmF0aW9ucyIsICJsZWF2ZXMiLCAiU2xhdGVUZXh0IiwgInB1c2giLCAiTWVtb2l6ZWRUZXh0IiwgImVsZW1lbnQiLCAicmVuZGVyRWxlbWVudCIsICJwIiwgIkRlZmF1bHRFbGVtZW50IiwgInJlYWRPbmx5IiwgInVzZVJlYWRPbmx5IiwgInVzZUNhbGxiYWNrIiwgInVzZUNoaWxkcmVuIiwgImhhc0lubGluZXMiLCAiZGlyIiwgImdldERpcmVjdGlvbiIsICJUYWciLCAiY29sb3IiLCAib3V0bGluZSIsICJNZW1vaXplZEVsZW1lbnQiLCAiRGVjb3JhdGVDb250ZXh0IiwgInVzZURlY29yYXRlIiwgIlNlbGVjdGVkQ29udGV4dCIsICJ1c2VDaGlsZHJlbiIsICJwcm9wcyIsICJkZWNvcmF0aW9ucyIsICJub2RlIiwgInJlbmRlckVsZW1lbnQiLCAicmVuZGVyUGxhY2Vob2xkZXIiLCAicmVuZGVyTGVhZiIsICJzZWxlY3Rpb24iLCAiZGVjb3JhdGUiLCAidXNlRGVjb3JhdGUiLCAiZWRpdG9yIiwgInVzZVNsYXRlU3RhdGljIiwgInBhdGgiLCAiUmVhY3RFZGl0b3IiLCAiZmluZFBhdGgiLCAiY2hpbGRyZW4iLCAiaXNMZWFmQmxvY2siLCAiRWxlbWVudCIsICJpc0VsZW1lbnQiLCAiaXNJbmxpbmUiLCAiRWRpdG9yIiwgImhhc0lubGluZXMiLCAiaSIsICJsZW5ndGgiLCAicCIsICJjb25jYXQiLCAibiIsICJrZXkiLCAiZmluZEtleSIsICJyYW5nZSIsICJzZWwiLCAiUmFuZ2UiLCAiaW50ZXJzZWN0aW9uIiwgImRzIiwgImRlYyIsICJkIiwgInB1c2giLCAiUmVhY3QiLCAiU2VsZWN0ZWRDb250ZXh0IiwgIlByb3ZpZGVyIiwgImlkIiwgInZhbHVlIiwgIkVsZW1lbnRDb21wb25lbnQiLCAiZWxlbWVudCIsICJUZXh0Q29tcG9uZW50IiwgImlzTGFzdCIsICJwYXJlbnQiLCAidGV4dCIsICJOT0RFX1RPX0lOREVYIiwgInNldCIsICJOT0RFX1RPX1BBUkVOVCIsICJSZWFkT25seUNvbnRleHQiLCAiY3JlYXRlQ29udGV4dCIsICJ1c2VSZWFkT25seSIsICJ1c2VDb250ZXh0IiwgIlNsYXRlQ29udGV4dCIsICJ1c2VTbGF0ZSIsICJjb250ZXh0IiwgIkVycm9yIiwgIlRSSVBMRV9DTElDSyIsICJIT1RLRVlTIiwgImJvbGQiLCAiY29tcG9zZSIsICJtb3ZlQmFja3dhcmQiLCAibW92ZUZvcndhcmQiLCAibW92ZVdvcmRCYWNrd2FyZCIsICJtb3ZlV29yZEZvcndhcmQiLCAiZGVsZXRlQmFja3dhcmQiLCAiZGVsZXRlRm9yd2FyZCIsICJleHRlbmRCYWNrd2FyZCIsICJleHRlbmRGb3J3YXJkIiwgIml0YWxpYyIsICJpbnNlcnRTb2Z0QnJlYWsiLCAic3BsaXRCbG9jayIsICJ1bmRvIiwgIkFQUExFX0hPVEtFWVMiLCAibW92ZUxpbmVCYWNrd2FyZCIsICJtb3ZlTGluZUZvcndhcmQiLCAiZGVsZXRlTGluZUJhY2t3YXJkIiwgImRlbGV0ZUxpbmVGb3J3YXJkIiwgImRlbGV0ZVdvcmRCYWNrd2FyZCIsICJkZWxldGVXb3JkRm9yd2FyZCIsICJleHRlbmRMaW5lQmFja3dhcmQiLCAiZXh0ZW5kTGluZUZvcndhcmQiLCAicmVkbyIsICJ0cmFuc3Bvc2VDaGFyYWN0ZXIiLCAiV0lORE9XU19IT1RLRVlTIiwgImNyZWF0ZSIsICJrZXkiLCAiZ2VuZXJpYyIsICJhcHBsZSIsICJ3aW5kb3dzIiwgImlzR2VuZXJpYyIsICJpc0tleUhvdGtleSIsICJpc0FwcGxlIiwgImlzV2luZG93cyIsICJldmVudCIsICJJU19BUFBMRSIsICJpc0JvbGQiLCAiaXNDb21wb3NlIiwgImlzTW92ZUJhY2t3YXJkIiwgImlzTW92ZUZvcndhcmQiLCAiaXNEZWxldGVCYWNrd2FyZCIsICJpc0RlbGV0ZUZvcndhcmQiLCAiaXNEZWxldGVMaW5lQmFja3dhcmQiLCAiaXNEZWxldGVMaW5lRm9yd2FyZCIsICJpc0RlbGV0ZVdvcmRCYWNrd2FyZCIsICJpc0RlbGV0ZVdvcmRGb3J3YXJkIiwgImlzRXh0ZW5kQmFja3dhcmQiLCAiaXNFeHRlbmRGb3J3YXJkIiwgImlzRXh0ZW5kTGluZUJhY2t3YXJkIiwgImlzRXh0ZW5kTGluZUZvcndhcmQiLCAiaXNJdGFsaWMiLCAiaXNNb3ZlTGluZUJhY2t3YXJkIiwgImlzTW92ZUxpbmVGb3J3YXJkIiwgImlzTW92ZVdvcmRCYWNrd2FyZCIsICJpc01vdmVXb3JkRm9yd2FyZCIsICJpc1JlZG8iLCAiaXNTb2Z0QnJlYWsiLCAiaXNTcGxpdEJsb2NrIiwgImlzVHJhbnNwb3NlQ2hhcmFjdGVyIiwgImlzVW5kbyIsICJjcmVhdGVSZXN0b3JlRG9tTWFuYWdlciIsICJlZGl0b3IiLCAicmVjZWl2ZWRVc2VySW5wdXQiLCAiYnVmZmVyZWRNdXRhdGlvbnMiLCAiY2xlYXIiLCAicmVnaXN0ZXJNdXRhdGlvbnMiLCAibXV0YXRpb25zIiwgImN1cnJlbnQiLCAidHJhY2tlZE11dGF0aW9ucyIsICJmaWx0ZXIiLCAibXV0YXRpb24iLCAiaXNUcmFja2VkTXV0YXRpb24iLCAicHVzaCIsICJyZXN0b3JlRE9NIiwgInJldmVyc2UiLCAiZm9yRWFjaCIsICJ0eXBlIiwgInRhcmdldCIsICJ0ZXh0Q29udGVudCIsICJvbGRWYWx1ZSIsICJyZW1vdmVkTm9kZXMiLCAibm9kZSIsICJpbnNlcnRCZWZvcmUiLCAibmV4dFNpYmxpbmciLCAiYWRkZWROb2RlcyIsICJyZW1vdmVDaGlsZCIsICJNVVRBVElPTl9PQlNFUlZFUl9DT05GSUciLCAic3VidHJlZSIsICJjaGlsZExpc3QiLCAiY2hhcmFjdGVyRGF0YSIsICJjaGFyYWN0ZXJEYXRhT2xkVmFsdWUiLCAiUmVzdG9yZURPTUNvbXBvbmVudCIsICJDb21wb25lbnQiLCAiY29uc3RydWN0b3IiLCAib2JzZXJ2ZSIsICJwcm9wcyIsICJFcnJvciIsICJtdXRhdGlvbk9ic2VydmVyIiwgImNvbXBvbmVudERpZE1vdW50IiwgImNvbnRleHQiLCAibWFuYWdlciIsICJNdXRhdGlvbk9ic2VydmVyIiwgImdldFNuYXBzaG90QmVmb3JlVXBkYXRlIiwgInBlbmRpbmdNdXRhdGlvbnMiLCAidGFrZVJlY29yZHMiLCAibGVuZ3RoIiwgImRpc2Nvbm5lY3QiLCAiY29tcG9uZW50RGlkVXBkYXRlIiwgImNvbXBvbmVudFdpbGxVbm1vdW50IiwgInJlbmRlciIsICJjaGlsZHJlbiIsICJFZGl0b3JDb250ZXh0IiwgIlJlc3RvcmVET00iLCAiSVNfQU5EUk9JRCIsICJSZWFjdCIsICJ2ZXJpZnlEaWZmU3RhdGUiLCAidGV4dERpZmYiLCAicGF0aCIsICJkaWZmIiwgIkVkaXRvciIsICJoYXNQYXRoIiwgIk5vZGUiLCAiZ2V0IiwgIlRleHQiLCAiaXNUZXh0IiwgInN0YXJ0IiwgInRleHQiLCAic2xpY2UiLCAibmV4dFBhdGgiLCAiUGF0aCIsICJuZXh0IiwgIm5leHROb2RlIiwgInN0YXJ0c1dpdGgiLCAiYXBwbHlTdHJpbmdEaWZmIiwgImRpZmZzIiwgInJlZHVjZSIsICJlbmQiLCAibG9uZ2VzdENvbW1vblByZWZpeExlbmd0aCIsICJzdHIiLCAiYW5vdGhlciIsICJNYXRoIiwgIm1pbiIsICJpIiwgImNoYXJBdCIsICJsb25nZXN0Q29tbW9uU3VmZml4TGVuZ3RoIiwgIm1heCIsICJub3JtYWxpemVTdHJpbmdEaWZmIiwgInRhcmdldFRleHQiLCAicmVtb3ZlZFRleHQiLCAicHJlZml4TGVuZ3RoIiwgInN1ZmZpeExlbmd0aCIsICJub3JtYWxpemVkIiwgIm1lcmdlU3RyaW5nRGlmZnMiLCAiYSIsICJiIiwgIm92ZXJsYXAiLCAiYXBwbGllZCIsICJzbGljZUVuZCIsICJ0YXJnZXRSYW5nZSIsICJhbmNob3IiLCAib2Zmc2V0IiwgImZvY3VzIiwgIm5vcm1hbGl6ZVBvaW50IiwgInBvaW50IiwgImxlYWYiLCAicGFyZW50QmxvY2siLCAiYWJvdmUiLCAibWF0Y2giLCAibiIsICJFbGVtZW50IiwgImlzRWxlbWVudCIsICJpc0Jsb2NrIiwgImF0IiwgImVudHJ5IiwgImlzRGVzY2VuZGFudCIsICJub3JtYWxpemVSYW5nZSIsICJyYW5nZSIsICJSYW5nZSIsICJpc0NvbGxhcHNlZCIsICJ0cmFuc2Zvcm1QZW5kaW5nUG9pbnQiLCAib3AiLCAicGVuZGluZ0RpZmZzIiwgIkVESVRPUl9UT19QRU5ESU5HX0RJRkZTIiwgImZpbmQiLCAiZXF1YWxzIiwgIlBvaW50IiwgInRyYW5zZm9ybSIsICJhZmZpbml0eSIsICJ0cmFuc2Zvcm1lZCIsICJwb3NpdGlvbiIsICJ0cmFuc2Zvcm1QZW5kaW5nUmFuZ2UiLCAidHJhbnNmb3JtVGV4dERpZmYiLCAiaWQiLCAibmV3UGF0aCIsICJSRVNPTFZFX0RFTEFZIiwgIkZMVVNIX0RFTEFZIiwgImRlYnVnIiwgImNyZWF0ZUFuZHJvaWRJbnB1dE1hbmFnZXIiLCAic2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZSIsICJvbkRPTVNlbGVjdGlvbkNoYW5nZSIsICJmbHVzaGluZyIsICJjb21wb3NpdGlvbkVuZFRpbWVvdXRJZCIsICJmbHVzaFRpbWVvdXRJZCIsICJhY3Rpb25UaW1lb3V0SWQiLCAiaWRDb3VudGVyIiwgImluc2VydFBvc2l0aW9uSGludCIsICJhcHBseVBlbmRpbmdTZWxlY3Rpb24iLCAicGVuZGluZ1NlbGVjdGlvbiIsICJFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04iLCAiZGVsZXRlIiwgInNlbGVjdGlvbiIsICJUcmFuc2Zvcm1zIiwgInNlbGVjdCIsICJwZXJmb3JtQWN0aW9uIiwgImFjdGlvbiIsICJFRElUT1JfVE9fUEVORElOR19BQ1RJT04iLCAiaXNQb2ludCIsICJydW4iLCAiZmx1c2giLCAiY2xlYXJUaW1lb3V0IiwgImhhc1BlbmRpbmdEaWZmcyIsICJoYXNQZW5kaW5nQWN0aW9uIiwgInNldFRpbWVvdXQiLCAic2VsZWN0aW9uUmVmIiwgInJhbmdlUmVmIiwgIkVESVRPUl9UT19VU0VSX01BUktTIiwgInNldCIsICJtYXJrcyIsICJzY2hlZHVsZVNlbGVjdGlvbkNoYW5nZSIsICJwZW5kaW5nTWFya3MiLCAiRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTIiwgInVuZGVmaW5lZCIsICJpbnNlcnRUZXh0IiwgImRlbGV0ZUZyYWdtZW50IiwgImNhbmNlbCIsICJ1bnJlZiIsICJ1c2VyTWFya3MiLCAib25DaGFuZ2UiLCAiaGFuZGxlQ29tcG9zaXRpb25FbmQiLCAiX2V2ZW50IiwgIklTX0NPTVBPU0lORyIsICJoYW5kbGVDb21wb3NpdGlvblN0YXJ0IiwgInVwZGF0ZVBsYWNlaG9sZGVyVmlzaWJpbGl0eSIsICJmb3JjZUhpZGUiLCAicGxhY2Vob2xkZXJFbGVtZW50IiwgIkVESVRPUl9UT19QTEFDRUhPTERFUl9FTEVNRU5UIiwgInN0eWxlIiwgImRpc3BsYXkiLCAicmVtb3ZlUHJvcGVydHkiLCAic3RvcmVEaWZmIiwgImlkeCIsICJmaW5kSW5kZXgiLCAiY2hhbmdlIiwgIm1lcmdlZCIsICJzcGxpY2UiLCAiX29iamVjdFNwcmVhZCQzIiwgInNjaGVkdWxlQWN0aW9uIiwgImhhbmRsZURPTUJlZm9yZUlucHV0IiwgImlucHV0VHlwZSIsICJkYXRhIiwgImRhdGFUcmFuc2ZlciIsICJuYXRpdmVUYXJnZXRSYW5nZSIsICJnZXRUYXJnZXRSYW5nZXMiLCAiUmVhY3RFZGl0b3IiLCAidG9TbGF0ZVJhbmdlIiwgImV4YWN0TWF0Y2giLCAic3VwcHJlc3NUaHJvdyIsICJ3aW5kb3ciLCAiZ2V0V2luZG93IiwgImRvbVNlbGVjdGlvbiIsICJnZXRTZWxlY3Rpb24iLCAiaXNFeHBhbmRlZCIsICJlZGdlcyIsICJkaXJlY3Rpb24iLCAiZW5kc1dpdGgiLCAidGFyZ2V0Tm9kZSIsICJuYXRpdmVDb2xsYXBzZWQiLCAiaXNET01TZWxlY3Rpb24iLCAiY29sbGFwc2VkIiwgInVuaXQiLCAiaW5zZXJ0QnJlYWsiLCAibmFtZSIsICJpbnNlcnREYXRhIiwgImluY2x1ZGVzIiwgInJlcGxhY2UiLCAiaGludFBvc2l0aW9uIiwgInNlYXJjaCIsICJkaWZmUG9zaXRpb24iLCAic2NoZWR1bGVGbHVzaCIsICJoYXNQZW5kaW5nQ2hhbmdlcyIsICJpc0ZsdXNoaW5nIiwgImhhbmRsZVVzZXJTZWxlY3QiLCAicGF0aENoYW5nZWQiLCAicGFyZW50UGF0aENoYW5nZWQiLCAiaGFuZGxlSW5wdXQiLCAiaGFuZGxlS2V5RG93biIsICJfIiwgImhhbmRsZURvbU11dGF0aW9ucyIsICJzb21lIiwgIkVESVRPUl9UT19GT1JDRV9SRU5ERVIiLCAidXNlSXNNb3VudGVkIiwgImlzTW91bnRlZFJlZiIsICJ1c2VSZWYiLCAidXNlRWZmZWN0IiwgInVzZU11dGF0aW9uT2JzZXJ2ZXIiLCAiY2FsbGJhY2siLCAib3B0aW9ucyIsICJ1c2VTdGF0ZSIsICJ1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IiwgInVzZUFuZHJvaWRJbnB1dE1hbmFnZXIiLCAidXNlU2xhdGVTdGF0aWMiLCAiaXNNb3VudGVkIiwgImlucHV0TWFuYWdlciIsICJfb2JqZWN0U3ByZWFkJDIiLCAiRURJVE9SX1RPX1NDSEVEVUxFX0ZMVVNIIiwgInVzZVRyYWNrVXNlcklucHV0IiwgImFuaW1hdGlvbkZyYW1lSWRSZWYiLCAib25Vc2VySW5wdXQiLCAidXNlQ2FsbGJhY2siLCAiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCAicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwgIkNoaWxkcmVuIiwgIkZyYWdtZW50IiwgInVzZUNoaWxkcmVuIiwgIkVkaXRhYmxlIiwgImF1dG9Gb2N1cyIsICJkZWNvcmF0ZSIsICJkZWZhdWx0RGVjb3JhdGUiLCAib25ET01CZWZvcmVJbnB1dCIsICJwcm9wc09uRE9NQmVmb3JlSW5wdXQiLCAicGxhY2Vob2xkZXIiLCAicmVhZE9ubHkiLCAicmVuZGVyRWxlbWVudCIsICJyZW5kZXJMZWFmIiwgInJlbmRlclBsYWNlaG9sZGVyIiwgIkRlZmF1bHRQbGFjZWhvbGRlciIsICJzY3JvbGxTZWxlY3Rpb25JbnRvVmlldyIsICJkZWZhdWx0U2Nyb2xsU2VsZWN0aW9uSW50b1ZpZXciLCAidXNlclN0eWxlIiwgImFzIiwgImRpc2FibGVEZWZhdWx0U3R5bGVzIiwgImF0dHJpYnV0ZXMiLCAiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwgIl9leGNsdWRlZCQxIiwgInVzZVNsYXRlIiwgImlzQ29tcG9zaW5nIiwgInNldElzQ29tcG9zaW5nIiwgInJlZiIsICJkZWZlcnJlZE9wZXJhdGlvbnMiLCAiZm9yY2VSZW5kZXIiLCAidXNlUmVkdWNlciIsICJzIiwgIklTX1JFQURfT05MWSIsICJzdGF0ZSIsICJ1c2VNZW1vIiwgImlzRHJhZ2dpbmdJbnRlcm5hbGx5IiwgImlzVXBkYXRpbmdTZWxlY3Rpb24iLCAibGF0ZXN0RWxlbWVudCIsICJoYXNNYXJrUGxhY2Vob2xkZXIiLCAidGhyb3R0bGUiLCAiYW5kcm9pZElucHV0TWFuYWdlciIsICJyb290IiwgImZpbmREb2N1bWVudE9yU2hhZG93Um9vdCIsICJhY3RpdmVFbGVtZW50IiwgImVsIiwgInRvRE9NTm9kZSIsICJJU19GT0NVU0VEIiwgImRlc2VsZWN0IiwgImFuY2hvck5vZGUiLCAiZm9jdXNOb2RlIiwgImFuY2hvck5vZGVTZWxlY3RhYmxlIiwgImhhc0VkaXRhYmxlVGFyZ2V0IiwgImlzVGFyZ2V0SW5zaWRlTm9uUmVhZG9ubHlWb2lkIiwgImZvY3VzTm9kZVNlbGVjdGFibGUiLCAiZGVib3VuY2UiLCAiZ2V0RGVmYXVsdFZpZXciLCAiRURJVE9SX1RPX1dJTkRPVyIsICJFRElUT1JfVE9fRUxFTUVOVCIsICJOT0RFX1RPX0VMRU1FTlQiLCAiRUxFTUVOVF9UT19OT0RFIiwgImlzRm9jdXNlZCIsICJzZXREb21TZWxlY3Rpb24iLCAiZm9yY2VDaGFuZ2UiLCAiaGFzRG9tU2VsZWN0aW9uIiwgImVkaXRvckVsZW1lbnQiLCAiaGFzRG9tU2VsZWN0aW9uSW5FZGl0b3IiLCAiY29udGFpbnMiLCAic2xhdGVSYW5nZSIsICJwYXJlbnRFbGVtZW50IiwgImhhc0F0dHJpYnV0ZSIsICJoYXNSYW5nZSIsICJuZXdEb21SYW5nZSIsICJ0b0RPTVJhbmdlIiwgImlzQmFja3dhcmQiLCAic2V0QmFzZUFuZEV4dGVudCIsICJlbmRDb250YWluZXIiLCAiZW5kT2Zmc2V0IiwgInN0YXJ0Q29udGFpbmVyIiwgInN0YXJ0T2Zmc2V0IiwgInJlbW92ZUFsbFJhbmdlcyIsICJlbnN1cmVTZWxlY3Rpb24iLCAiSVNfRklSRUZPWCIsICJ0aW1lb3V0SWQiLCAiYW5pbWF0aW9uRnJhbWVJZCIsICJlbnN1cmVEb21TZWxlY3Rpb24iLCAiZSIsICJpc0RPTUV2ZW50SGFuZGxlZCIsICJpc0NvbXBvc2l0aW9uQ2hhbmdlIiwgIm5hdGl2ZSIsICJ0ZXN0IiwgInRvRE9NUG9pbnQiLCAiY2xvc2VzdCIsICJoYXNET01Ob2RlIiwgImxhc3RUZXh0IiwgImRvY3VtZW50IiwgImNyZWF0ZVRyZWVXYWxrZXIiLCAiTm9kZUZpbHRlciIsICJTSE9XX1RFWFQiLCAibGFzdENoaWxkIiwgImdldENvbXB1dGVkU3R5bGUiLCAid2hpdGVTcGFjZSIsICJibG9jayIsICJzdHJpbmciLCAiRURJVE9SX1RPX1VTRVJfU0VMRUNUSU9OIiwgInByZXZlbnREZWZhdWx0IiwgInRvUmVzdG9yZSIsICJIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQiLCAiYWRkRXZlbnRMaXN0ZW5lciIsICJyZW1vdmVFdmVudExpc3RlbmVyIiwgImRlY29yYXRpb25zIiwgIkFycmF5IiwgImZyb20iLCAidGV4dHMiLCAiUExBQ0VIT0xERVJfU1lNQk9MIiwgInJlc3QiLCAiX2V4Y2x1ZGVkMiIsICJsb29zZSIsICJ1bnNldCIsICJPYmplY3QiLCAiZnJvbUVudHJpZXMiLCAia2V5cyIsICJtYXAiLCAibWFyayIsICJfb2JqZWN0U3ByZWFkJDEiLCAiTUFSS19QTEFDRUhPTERFUl9TWU1CT0wiLCAicGxhY2Vob2xkZXJIZWlnaHQiLCAiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwgImhlaWdodCIsICJSZWFkT25seUNvbnRleHQiLCAiUHJvdmlkZXIiLCAidmFsdWUiLCAiRGVjb3JhdGVDb250ZXh0IiwgInJvbGUiLCAic3BlbGxDaGVjayIsICJDQU5fVVNFX0RPTSIsICJhdXRvQ29ycmVjdCIsICJhdXRvQ2FwaXRhbGl6ZSIsICJjb250ZW50RWRpdGFibGUiLCAiemluZGV4IiwgInN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyIsICJvdXRsaW5lIiwgIndvcmRXcmFwIiwgIm1pbkhlaWdodCIsICJvbkJlZm9yZUlucHV0IiwgImlzRXZlbnRIYW5kbGVkIiwgImhhc1NlbGVjdGFibGVUYXJnZXQiLCAib25JbnB1dCIsICJvbkJsdXIiLCAicmVsYXRlZFRhcmdldCIsICJpc0RPTUVsZW1lbnQiLCAiaXNET01Ob2RlIiwgInRvU2xhdGVOb2RlIiwgImlzVm9pZCIsICJJU19TQUZBUkkiLCAib25DbGljayIsICJoYXNUYXJnZXQiLCAiZmluZFBhdGgiLCAiZGV0YWlsIiwgImJsb2NrUGF0aCIsICJzdGFydFZvaWQiLCAidm9pZCIsICJlbmRWb2lkIiwgIm9uQ29tcG9zaXRpb25FbmQiLCAiSVNfRklSRUZPWF9MRUdBQ1kiLCAiSVNfSU9TIiwgIklTX1dFQ0hBVEJST1dTRVIiLCAiSVNfVUNfTU9CSUxFIiwgInBsYWNlaG9sZGVyTWFya3MiLCAib25Db21wb3NpdGlvblVwZGF0ZSIsICJvbkNvbXBvc2l0aW9uU3RhcnQiLCAiaW5saW5lIiwgImlzSW5saW5lIiwgIm1vZGUiLCAiaW5saW5lUGF0aCIsICJpc0VuZCIsICJhZnRlciIsICJzZXRTZWxlY3Rpb24iLCAib25Db3B5IiwgInNldEZyYWdtZW50RGF0YSIsICJjbGlwYm9hcmREYXRhIiwgIm9uQ3V0IiwgInBhcmVudCIsICJvbkRyYWdPdmVyIiwgIm9uRHJhZ1N0YXJ0IiwgInZvaWRNYXRjaCIsICJ2b2lkcyIsICJvbkRyb3AiLCAiZHJhZ2dlZFJhbmdlIiwgImZpbmRFdmVudFJhbmdlIiwgIm9uRHJhZ0VuZCIsICJvbkZvY3VzIiwgIm9uS2V5RG93biIsICJuYXRpdmVFdmVudCIsICJlbGVtZW50IiwgImlzUlRMIiwgImdldERpcmVjdGlvbiIsICJIb3RrZXlzIiwgIm1heWJlSGlzdG9yeUVkaXRvciIsICJtb3ZlIiwgImVkZ2UiLCAiY29sbGFwc2UiLCAiSVNfQ0hST01FIiwgImN1cnJlbnROb2RlIiwgIm9uUGFzdGUiLCAiaXNQbGFpblRleHRPbmx5UGFzdGUiLCAiZG9tUmFuZ2UiLCAibGVhZkVsIiwgImJpbmQiLCAic2Nyb2xsSW50b1ZpZXciLCAic2Nyb2xsTW9kZSIsICJoYW5kbGVyIiwgInNob3VsZFRyZWF0RXZlbnRBc0hhbmRsZWQiLCAiaXNEZWZhdWx0UHJldmVudGVkIiwgImlzUHJvcGFnYXRpb25TdG9wcGVkIiwgImRlZmF1bHRQcmV2ZW50ZWQiLCAiRm9jdXNlZENvbnRleHQiLCAiY3JlYXRlQ29udGV4dCIsICJTbGF0ZVNlbGVjdG9yQ29udGV4dCIsICJjcmVhdGVDb250ZXh0IiwgImdldFNlbGVjdG9yQ29udGV4dCIsICJlZGl0b3IiLCAiZXZlbnRMaXN0ZW5lcnMiLCAidXNlUmVmIiwgImN1cnJlbnQiLCAic2xhdGVSZWYiLCAib25DaGFuZ2UiLCAidXNlQ2FsbGJhY2siLCAiZm9yRWFjaCIsICJsaXN0ZW5lciIsICJzZWxlY3RvckNvbnRleHQiLCAidXNlTWVtbyIsICJnZXRTbGF0ZSIsICJhZGRFdmVudExpc3RlbmVyIiwgImNhbGxiYWNrIiwgInB1c2giLCAic3BsaWNlIiwgImluZGV4T2YiLCAiU2xhdGUiLCAicHJvcHMiLCAiY2hpbGRyZW4iLCAidmFsdWUiLCAicmVzdCIsICJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCAiX2V4Y2x1ZGVkIiwgInVubW91bnRSZWYiLCAiY29udGV4dCIsICJzZXRDb250ZXh0IiwgIlJlYWN0IiwgInVzZVN0YXRlIiwgIk5vZGUiLCAiaXNOb2RlTGlzdCIsICJFcnJvciIsICJTY3J1YmJlciIsICJzdHJpbmdpZnkiLCAiRWRpdG9yIiwgImlzRWRpdG9yIiwgIk9iamVjdCIsICJhc3NpZ24iLCAidiIsICJoYW5kbGVTZWxlY3RvckNoYW5nZSIsICJvbkNvbnRleHRDaGFuZ2UiLCAicHJldkNvbnRleHQiLCAidXNlRWZmZWN0IiwgIkVESVRPUl9UT19PTl9DSEFOR0UiLCAic2V0IiwgImlzRm9jdXNlZCIsICJzZXRJc0ZvY3VzZWQiLCAiUmVhY3RFZGl0b3IiLCAidXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCIsICJmbiIsICJJU19SRUFDVF9WRVJTSU9OXzE3X09SX0FCT1ZFIiwgImRvY3VtZW50IiwgInJlbW92ZUV2ZW50TGlzdGVuZXIiLCAiU2xhdGVTZWxlY3RvckNvbnRleHQiLCAiUHJvdmlkZXIiLCAiU2xhdGVDb250ZXh0IiwgIkVkaXRvckNvbnRleHQiLCAiRm9jdXNlZENvbnRleHQiLCAiZG9SZWN0c0ludGVyc2VjdCIsICJyZWN0IiwgImNvbXBhcmVSZWN0IiwgIm1pZGRsZSIsICJ0b3AiLCAiYm90dG9tIiwgImFyZVJhbmdlc1NhbWVMaW5lIiwgImVkaXRvciIsICJyYW5nZTEiLCAicmFuZ2UyIiwgInJlY3QxIiwgIlJlYWN0RWRpdG9yIiwgInRvRE9NUmFuZ2UiLCAiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwgInJlY3QyIiwgImZpbmRDdXJyZW50TGluZVJhbmdlIiwgInBhcmVudFJhbmdlIiwgInBhcmVudFJhbmdlQm91bmRhcnkiLCAiRWRpdG9yIiwgInJhbmdlIiwgIlJhbmdlIiwgImVuZCIsICJwb3NpdGlvbnMiLCAiQXJyYXkiLCAiZnJvbSIsICJhdCIsICJsZWZ0IiwgInJpZ2h0IiwgImxlbmd0aCIsICJNYXRoIiwgImZsb29yIiwgIndpdGhSZWFjdCIsICJlIiwgImFwcGx5IiwgIm9uQ2hhbmdlIiwgImRlbGV0ZUJhY2t3YXJkIiwgImFkZE1hcmsiLCAicmVtb3ZlTWFyayIsICJFRElUT1JfVE9fS0VZX1RPX0VMRU1FTlQiLCAic2V0IiwgIldlYWtNYXAiLCAia2V5IiwgInZhbHVlIiwgIkVESVRPUl9UT19TQ0hFRFVMRV9GTFVTSCIsICJnZXQiLCAiRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTIiwgIkVESVRPUl9UT19QRU5ESU5HX0RJRkZTIiwgIkVESVRPUl9UT19VU0VSX01BUktTIiwgImRlbGV0ZSIsICJ1bml0IiwgInNlbGVjdGlvbiIsICJpc0NvbGxhcHNlZCIsICJwYXJlbnRCbG9ja0VudHJ5IiwgImFib3ZlIiwgIm1hdGNoIiwgIm4iLCAiRWxlbWVudCIsICJpc0VsZW1lbnQiLCAiaXNCbG9jayIsICJwYXJlbnRCbG9ja1BhdGgiLCAicGFyZW50RWxlbWVudFJhbmdlIiwgImFuY2hvciIsICJjdXJyZW50TGluZVJhbmdlIiwgIlRyYW5zZm9ybXMiLCAib3AiLCAibWF0Y2hlcyIsICJwZW5kaW5nRGlmZnMiLCAidHJhbnNmb3JtZWQiLCAibWFwIiwgInRleHREaWZmIiwgInRyYW5zZm9ybVRleHREaWZmIiwgImZpbHRlciIsICJCb29sZWFuIiwgInBlbmRpbmdTZWxlY3Rpb24iLCAiRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OIiwgInRyYW5zZm9ybVBlbmRpbmdSYW5nZSIsICJwZW5kaW5nQWN0aW9uIiwgIkVESVRPUl9UT19QRU5ESU5HX0FDVElPTiIsICJQb2ludCIsICJpc1BvaW50IiwgInRyYW5zZm9ybVBlbmRpbmdQb2ludCIsICJfb2JqZWN0U3ByZWFkIiwgInR5cGUiLCAicHVzaCIsICJnZXRNYXRjaGVzIiwgInBhdGgiLCAiRURJVE9SX1RPX1VTRVJfU0VMRUNUSU9OIiwgInVucmVmIiwgIlBhdGgiLCAicGFyZW50IiwgInByZXZQYXRoIiwgInByZXZpb3VzIiwgImNvbW1vblBhdGgiLCAiY29tbW9uIiwgIm5ld1BhdGgiLCAibm9kZSIsICJOT0RFX1RPX0tFWSIsICJzZXRGcmFnbWVudERhdGEiLCAiZGF0YSIsICJzdGFydCIsICJlZGdlcyIsICJzdGFydFZvaWQiLCAidm9pZCIsICJlbmRWb2lkIiwgImRvbVJhbmdlIiwgImNvbnRlbnRzIiwgImNsb25lQ29udGVudHMiLCAiYXR0YWNoIiwgImNoaWxkTm9kZXMiLCAiZm9yRWFjaCIsICJ0ZXh0Q29udGVudCIsICJ0cmltIiwgInZvaWROb2RlIiwgInIiLCAiY2xvbmVSYW5nZSIsICJkb21Ob2RlIiwgInRvRE9NTm9kZSIsICJzZXRFbmRBZnRlciIsICJxdWVyeVNlbGVjdG9yIiwgInF1ZXJ5U2VsZWN0b3JBbGwiLCAienciLCAiaXNOZXdsaW5lIiwgImdldEF0dHJpYnV0ZSIsICJpc0RPTVRleHQiLCAic3BhbiIsICJvd25lckRvY3VtZW50IiwgImNyZWF0ZUVsZW1lbnQiLCAic3R5bGUiLCAid2hpdGVTcGFjZSIsICJhcHBlbmRDaGlsZCIsICJmcmFnbWVudCIsICJnZXRGcmFnbWVudCIsICJzdHJpbmciLCAiSlNPTiIsICJzdHJpbmdpZnkiLCAiZW5jb2RlZCIsICJ3aW5kb3ciLCAiYnRvYSIsICJlbmNvZGVVUklDb21wb25lbnQiLCAic2V0QXR0cmlidXRlIiwgInNldERhdGEiLCAiZGl2IiwgImJvZHkiLCAiaW5uZXJIVE1MIiwgImdldFBsYWluVGV4dCIsICJyZW1vdmVDaGlsZCIsICJpbnNlcnREYXRhIiwgImluc2VydEZyYWdtZW50RGF0YSIsICJpbnNlcnRUZXh0RGF0YSIsICJnZXREYXRhIiwgImdldFNsYXRlRnJhZ21lbnRBdHRyaWJ1dGUiLCAiZGVjb2RlZCIsICJkZWNvZGVVUklDb21wb25lbnQiLCAiYXRvYiIsICJwYXJzZWQiLCAicGFyc2UiLCAiaW5zZXJ0RnJhZ21lbnQiLCAidGV4dCIsICJsaW5lcyIsICJzcGxpdCIsICJsaW5lIiwgInNwbGl0Tm9kZXMiLCAiYWx3YXlzIiwgImluc2VydFRleHQiLCAiUmVhY3RET00iLCAidW5zdGFibGVfYmF0Y2hlZFVwZGF0ZXMiLCAib25Db250ZXh0Q2hhbmdlIiwgIkVESVRPUl9UT19PTl9DSEFOR0UiLCAicCIsICJsZXZlbHMiLCAiZmluZEtleSIsICJIaXN0b3J5IiwgImlzSGlzdG9yeSIsICJ2YWx1ZSIsICJpc1BsYWluT2JqZWN0IiwgIkFycmF5IiwgImlzQXJyYXkiLCAicmVkb3MiLCAidW5kb3MiLCAibGVuZ3RoIiwgIk9wZXJhdGlvbiIsICJpc09wZXJhdGlvbkxpc3QiLCAib3BlcmF0aW9ucyIsICJTQVZJTkciLCAiV2Vha01hcCIsICJNRVJHSU5HIiwgIkhpc3RvcnlFZGl0b3IiLCAiaXNIaXN0b3J5RWRpdG9yIiwgInZhbHVlIiwgIkhpc3RvcnkiLCAiaXNIaXN0b3J5IiwgImhpc3RvcnkiLCAiRWRpdG9yIiwgImlzRWRpdG9yIiwgImlzTWVyZ2luZyIsICJlZGl0b3IiLCAiZ2V0IiwgImlzU2F2aW5nIiwgInJlZG8iLCAidW5kbyIsICJ3aXRob3V0TWVyZ2luZyIsICJmbiIsICJwcmV2IiwgInNldCIsICJ3aXRob3V0U2F2aW5nIiwgIndpdGhIaXN0b3J5IiwgImUiLCAiYXBwbHkiLCAidW5kb3MiLCAicmVkb3MiLCAibGVuZ3RoIiwgImJhdGNoIiwgInNlbGVjdGlvbkJlZm9yZSIsICJUcmFuc2Zvcm1zIiwgInNldFNlbGVjdGlvbiIsICJ3aXRob3V0Tm9ybWFsaXppbmciLCAib3AiLCAib3BlcmF0aW9ucyIsICJwb3AiLCAid3JpdGVIaXN0b3J5IiwgImludmVyc2VPcHMiLCAibWFwIiwgIk9wZXJhdGlvbiIsICJpbnZlcnNlIiwgInJldmVyc2UiLCAibGFzdEJhdGNoIiwgImxhc3RPcCIsICJzYXZlIiwgIm1lcmdlIiwgInNob3VsZFNhdmUiLCAic2hvdWxkTWVyZ2UiLCAicHVzaCIsICJzZWxlY3Rpb24iLCAic2hpZnQiLCAic3RhY2siLCAidHlwZSIsICJvZmZzZXQiLCAidGV4dCIsICJQYXRoIiwgImVxdWFscyIsICJwYXRoIiwgIm51bWJlclN0cmluZyIsICJpbXBvcnRfcmVhY3QiLCAiUmVhY3QiLCAiZSIsICJub2RlIiwgIlJlYWN0IiwgImUiLCAiciIsICJSZWFjdCIsICJlIiwgImZyYWdtZW50IiwgImRvY3VtZW50IiwgIm4iLCAicGF0aCIsICJub2RlIiwgImVuZCIsICJFbGVtZW50IiwgImVxdWFscyIsICJpIiwgImxlYWYiLCAiciIsICJ0Ym9keSIsICJjdXJyZW50IiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X3JlYWN0IiwgIlJlYWN0IiwgImUiLCAiaSIsICJFbGVtZW50IiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfZGVlcF9lcXVhbCIsICJSZWFjdCIsICJlIiwgInRpbWUiLCAiZXF1YWxzIiwgImltcG9ydF9yZWFjdCIsICJSZWFjdCIsICJ0aW1lIiwgImUiLCAiaW1wb3J0X3JlYWN0IiwgIlJlYWN0IiwgInRpbWUiLCAiZSIsICJSZWFjdCIsICJsb2NhdGlvbiIsICJlIiwgImkiLCAiaW1wb3J0X3JlYWN0IiwgImltcG9ydF9yZWFjdF9kb20iLCAiUmVhY3QiLCAiUmVhY3RET00iLCAiaW1wb3J0X3JlYWN0X2RvbSIsICJSZWFjdCIsICJJbWFnZSIsICJlIiwgImkiLCAiUmVhY3QiLCAiRWxlbWVudCIsICJSZWFjdERPTSIsICJlIiwgIkVkaXRvciIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X3JlYWN0X2RvbSIsICJpbXBvcnRfcmVhY3QiLCAiUmVhY3QiLCAiRWxlbWVudCIsICJpIiwgImUiLCAiUmVhY3RET00iLCAiUmVhY3QiLCAiZSIsICJwYXRoIiwgInZhbGlkIiwgIkVsZW1lbnQiLCAiUmVhY3QiLCAiUmVhY3RET00iXQp9Cg==
