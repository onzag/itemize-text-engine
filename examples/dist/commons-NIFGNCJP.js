import {
  CONTAINER_CLASS_PREFIX,
  CUSTOM_CLASS_PREFIX,
  RICH_TEXT_CLASS_PREFIX,
  SERIALIZATION_REGISTRY,
  STANDARD_PARAGRAPH,
  STANDARD_TEXT_NODE,
  TABLE_CLASS_PREFIX,
  __commonJS,
  __spreadProps,
  __spreadValues,
  __toESM,
  __yieldStar,
  convertStyleStringToReactObject,
  deserialize,
  deserializePlain,
  getAllowedChildrenTypes,
  getContextFor,
  getUIHandlerValueWithKnownContextFor,
  getUUIDFor,
  isBlock,
  isInline,
  isSuperBlock,
  isVoid,
  normalizeElement,
  require_deep_equal,
  require_react,
  require_react_dom,
  serialize,
  serializeString
} from "/dist/commons-2PRWFEI7.js";

// ../node_modules/direction/index.js
var require_direction = __commonJS({
  "../node_modules/direction/index.js"(exports, module) {
    "use strict";
    module.exports = direction;
    var RTL = "\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC";
    var LTR = "A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";
    var rtl = new RegExp("^[^" + LTR + "]*[" + RTL + "]");
    var ltr = new RegExp("^[^" + RTL + "]*[" + LTR + "]");
    function direction(value) {
      value = String(value || "");
      if (rtl.test(value)) {
        return "rtl";
      }
      if (ltr.test(value)) {
        return "ltr";
      }
      return "neutral";
    }
  }
});

// ../node_modules/lodash/isObject.js
var require_isObject = __commonJS({
  "../node_modules/lodash/isObject.js"(exports, module) {
    function isObject2(value) {
      var type = typeof value;
      return value != null && (type == "object" || type == "function");
    }
    module.exports = isObject2;
  }
});

// ../node_modules/lodash/_freeGlobal.js
var require_freeGlobal = __commonJS({
  "../node_modules/lodash/_freeGlobal.js"(exports, module) {
    var freeGlobal = typeof global == "object" && global && global.Object === Object && global;
    module.exports = freeGlobal;
  }
});

// ../node_modules/lodash/_root.js
var require_root = __commonJS({
  "../node_modules/lodash/_root.js"(exports, module) {
    var freeGlobal = require_freeGlobal();
    var freeSelf = typeof self == "object" && self && self.Object === Object && self;
    var root = freeGlobal || freeSelf || Function("return this")();
    module.exports = root;
  }
});

// ../node_modules/lodash/now.js
var require_now = __commonJS({
  "../node_modules/lodash/now.js"(exports, module) {
    var root = require_root();
    var now = function() {
      return root.Date.now();
    };
    module.exports = now;
  }
});

// ../node_modules/lodash/_trimmedEndIndex.js
var require_trimmedEndIndex = __commonJS({
  "../node_modules/lodash/_trimmedEndIndex.js"(exports, module) {
    var reWhitespace = /\s/;
    function trimmedEndIndex(string3) {
      var index = string3.length;
      while (index-- && reWhitespace.test(string3.charAt(index))) {
      }
      return index;
    }
    module.exports = trimmedEndIndex;
  }
});

// ../node_modules/lodash/_baseTrim.js
var require_baseTrim = __commonJS({
  "../node_modules/lodash/_baseTrim.js"(exports, module) {
    var trimmedEndIndex = require_trimmedEndIndex();
    var reTrimStart = /^\s+/;
    function baseTrim(string3) {
      return string3 ? string3.slice(0, trimmedEndIndex(string3) + 1).replace(reTrimStart, "") : string3;
    }
    module.exports = baseTrim;
  }
});

// ../node_modules/lodash/_Symbol.js
var require_Symbol = __commonJS({
  "../node_modules/lodash/_Symbol.js"(exports, module) {
    var root = require_root();
    var Symbol2 = root.Symbol;
    module.exports = Symbol2;
  }
});

// ../node_modules/lodash/_getRawTag.js
var require_getRawTag = __commonJS({
  "../node_modules/lodash/_getRawTag.js"(exports, module) {
    var Symbol2 = require_Symbol();
    var objectProto = Object.prototype;
    var hasOwnProperty = objectProto.hasOwnProperty;
    var nativeObjectToString = objectProto.toString;
    var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
    function getRawTag(value) {
      var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];
      try {
        value[symToStringTag] = void 0;
        var unmasked = true;
      } catch (e2) {
      }
      var result = nativeObjectToString.call(value);
      if (unmasked) {
        if (isOwn) {
          value[symToStringTag] = tag;
        } else {
          delete value[symToStringTag];
        }
      }
      return result;
    }
    module.exports = getRawTag;
  }
});

// ../node_modules/lodash/_objectToString.js
var require_objectToString = __commonJS({
  "../node_modules/lodash/_objectToString.js"(exports, module) {
    var objectProto = Object.prototype;
    var nativeObjectToString = objectProto.toString;
    function objectToString(value) {
      return nativeObjectToString.call(value);
    }
    module.exports = objectToString;
  }
});

// ../node_modules/lodash/_baseGetTag.js
var require_baseGetTag = __commonJS({
  "../node_modules/lodash/_baseGetTag.js"(exports, module) {
    var Symbol2 = require_Symbol();
    var getRawTag = require_getRawTag();
    var objectToString = require_objectToString();
    var nullTag = "[object Null]";
    var undefinedTag = "[object Undefined]";
    var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
    function baseGetTag(value) {
      if (value == null) {
        return value === void 0 ? undefinedTag : nullTag;
      }
      return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);
    }
    module.exports = baseGetTag;
  }
});

// ../node_modules/lodash/isObjectLike.js
var require_isObjectLike = __commonJS({
  "../node_modules/lodash/isObjectLike.js"(exports, module) {
    function isObjectLike(value) {
      return value != null && typeof value == "object";
    }
    module.exports = isObjectLike;
  }
});

// ../node_modules/lodash/isSymbol.js
var require_isSymbol = __commonJS({
  "../node_modules/lodash/isSymbol.js"(exports, module) {
    var baseGetTag = require_baseGetTag();
    var isObjectLike = require_isObjectLike();
    var symbolTag = "[object Symbol]";
    function isSymbol(value) {
      return typeof value == "symbol" || isObjectLike(value) && baseGetTag(value) == symbolTag;
    }
    module.exports = isSymbol;
  }
});

// ../node_modules/lodash/toNumber.js
var require_toNumber = __commonJS({
  "../node_modules/lodash/toNumber.js"(exports, module) {
    var baseTrim = require_baseTrim();
    var isObject2 = require_isObject();
    var isSymbol = require_isSymbol();
    var NAN = 0 / 0;
    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
    var reIsBinary = /^0b[01]+$/i;
    var reIsOctal = /^0o[0-7]+$/i;
    var freeParseInt = parseInt;
    function toNumber(value) {
      if (typeof value == "number") {
        return value;
      }
      if (isSymbol(value)) {
        return NAN;
      }
      if (isObject2(value)) {
        var other = typeof value.valueOf == "function" ? value.valueOf() : value;
        value = isObject2(other) ? other + "" : other;
      }
      if (typeof value != "string") {
        return value === 0 ? value : +value;
      }
      value = baseTrim(value);
      var isBinary = reIsBinary.test(value);
      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
    }
    module.exports = toNumber;
  }
});

// ../node_modules/lodash/debounce.js
var require_debounce = __commonJS({
  "../node_modules/lodash/debounce.js"(exports, module) {
    var isObject2 = require_isObject();
    var now = require_now();
    var toNumber = require_toNumber();
    var FUNC_ERROR_TEXT = "Expected a function";
    var nativeMax = Math.max;
    var nativeMin = Math.min;
    function debounce2(func, wait, options) {
      var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;
      if (typeof func != "function") {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      wait = toNumber(wait) || 0;
      if (isObject2(options)) {
        leading = !!options.leading;
        maxing = "maxWait" in options;
        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
        trailing = "trailing" in options ? !!options.trailing : trailing;
      }
      function invokeFunc(time2) {
        var args = lastArgs, thisArg = lastThis;
        lastArgs = lastThis = void 0;
        lastInvokeTime = time2;
        result = func.apply(thisArg, args);
        return result;
      }
      function leadingEdge(time2) {
        lastInvokeTime = time2;
        timerId = setTimeout(timerExpired, wait);
        return leading ? invokeFunc(time2) : result;
      }
      function remainingWait(time2) {
        var timeSinceLastCall = time2 - lastCallTime, timeSinceLastInvoke = time2 - lastInvokeTime, timeWaiting = wait - timeSinceLastCall;
        return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
      }
      function shouldInvoke(time2) {
        var timeSinceLastCall = time2 - lastCallTime, timeSinceLastInvoke = time2 - lastInvokeTime;
        return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
      }
      function timerExpired() {
        var time2 = now();
        if (shouldInvoke(time2)) {
          return trailingEdge(time2);
        }
        timerId = setTimeout(timerExpired, remainingWait(time2));
      }
      function trailingEdge(time2) {
        timerId = void 0;
        if (trailing && lastArgs) {
          return invokeFunc(time2);
        }
        lastArgs = lastThis = void 0;
        return result;
      }
      function cancel() {
        if (timerId !== void 0) {
          clearTimeout(timerId);
        }
        lastInvokeTime = 0;
        lastArgs = lastCallTime = lastThis = timerId = void 0;
      }
      function flush() {
        return timerId === void 0 ? result : trailingEdge(now());
      }
      function debounced() {
        var time2 = now(), isInvoking = shouldInvoke(time2);
        lastArgs = arguments;
        lastThis = this;
        lastCallTime = time2;
        if (isInvoking) {
          if (timerId === void 0) {
            return leadingEdge(lastCallTime);
          }
          if (maxing) {
            clearTimeout(timerId);
            timerId = setTimeout(timerExpired, wait);
            return invokeFunc(lastCallTime);
          }
        }
        if (timerId === void 0) {
          timerId = setTimeout(timerExpired, wait);
        }
        return result;
      }
      debounced.cancel = cancel;
      debounced.flush = flush;
      return debounced;
    }
    module.exports = debounce2;
  }
});

// ../node_modules/lodash/throttle.js
var require_throttle = __commonJS({
  "../node_modules/lodash/throttle.js"(exports, module) {
    var debounce2 = require_debounce();
    var isObject2 = require_isObject();
    var FUNC_ERROR_TEXT = "Expected a function";
    function throttle2(func, wait, options) {
      var leading = true, trailing = true;
      if (typeof func != "function") {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      if (isObject2(options)) {
        leading = "leading" in options ? !!options.leading : leading;
        trailing = "trailing" in options ? !!options.trailing : trailing;
      }
      return debounce2(func, wait, {
        "leading": leading,
        "maxWait": wait,
        "trailing": trailing
      });
    }
    module.exports = throttle2;
  }
});

// ../node_modules/is-hotkey/lib/index.js
var require_lib = __commonJS({
  "../node_modules/is-hotkey/lib/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    var IS_MAC = typeof window != "undefined" && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);
    var MODIFIERS = {
      alt: "altKey",
      control: "ctrlKey",
      meta: "metaKey",
      shift: "shiftKey"
    };
    var ALIASES = {
      add: "+",
      break: "pause",
      cmd: "meta",
      command: "meta",
      ctl: "control",
      ctrl: "control",
      del: "delete",
      down: "arrowdown",
      esc: "escape",
      ins: "insert",
      left: "arrowleft",
      mod: IS_MAC ? "meta" : "control",
      opt: "alt",
      option: "alt",
      return: "enter",
      right: "arrowright",
      space: " ",
      spacebar: " ",
      up: "arrowup",
      win: "meta",
      windows: "meta"
    };
    var CODES = {
      backspace: 8,
      tab: 9,
      enter: 13,
      shift: 16,
      control: 17,
      alt: 18,
      pause: 19,
      capslock: 20,
      escape: 27,
      " ": 32,
      pageup: 33,
      pagedown: 34,
      end: 35,
      home: 36,
      arrowleft: 37,
      arrowup: 38,
      arrowright: 39,
      arrowdown: 40,
      insert: 45,
      delete: 46,
      meta: 91,
      numlock: 144,
      scrolllock: 145,
      ";": 186,
      "=": 187,
      ",": 188,
      "-": 189,
      ".": 190,
      "/": 191,
      "`": 192,
      "[": 219,
      "\\": 220,
      "]": 221,
      "'": 222
    };
    for (f = 1; f < 20; f++) {
      CODES["f" + f] = 111 + f;
    }
    var f;
    function isHotkey(hotkey, options, event) {
      if (options && !("byKey" in options)) {
        event = options;
        options = null;
      }
      if (!Array.isArray(hotkey)) {
        hotkey = [hotkey];
      }
      var array = hotkey.map(function(string3) {
        return parseHotkey(string3, options);
      });
      var check = function check2(e2) {
        return array.some(function(object) {
          return compareHotkey(object, e2);
        });
      };
      var ret = event == null ? check : check(event);
      return ret;
    }
    function isCodeHotkey(hotkey, event) {
      return isHotkey(hotkey, event);
    }
    function isKeyHotkey2(hotkey, event) {
      return isHotkey(hotkey, { byKey: true }, event);
    }
    function parseHotkey(hotkey, options) {
      var byKey = options && options.byKey;
      var ret = {};
      hotkey = hotkey.replace("++", "+add");
      var values = hotkey.split("+");
      var length = values.length;
      for (var k in MODIFIERS) {
        ret[MODIFIERS[k]] = false;
      }
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = void 0;
      try {
        for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var value = _step.value;
          var optional = value.endsWith("?") && value.length > 1;
          if (optional) {
            value = value.slice(0, -1);
          }
          var name = toKeyName(value);
          var modifier = MODIFIERS[name];
          if (length === 1 || !modifier) {
            if (byKey) {
              ret.key = name;
            } else {
              ret.which = toKeyCode(value);
            }
          }
          if (modifier) {
            ret[modifier] = optional ? null : true;
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }
      return ret;
    }
    function compareHotkey(object, event) {
      for (var key in object) {
        var expected = object[key];
        var actual = void 0;
        if (expected == null) {
          continue;
        }
        if (key === "key" && event.key != null) {
          actual = event.key.toLowerCase();
        } else if (key === "which") {
          actual = expected === 91 && event.which === 93 ? 91 : event.which;
        } else {
          actual = event[key];
        }
        if (actual == null && expected === false) {
          continue;
        }
        if (actual !== expected) {
          return false;
        }
      }
      return true;
    }
    function toKeyCode(name) {
      name = toKeyName(name);
      var code = CODES[name] || name.toUpperCase().charCodeAt(0);
      return code;
    }
    function toKeyName(name) {
      name = name.toLowerCase();
      name = ALIASES[name] || name;
      return name;
    }
    exports.default = isHotkey;
    exports.isHotkey = isHotkey;
    exports.isCodeHotkey = isCodeHotkey;
    exports.isKeyHotkey = isKeyHotkey2;
    exports.parseHotkey = parseHotkey;
    exports.compareHotkey = compareHotkey;
    exports.toKeyCode = toKeyCode;
    exports.toKeyName = toKeyName;
  }
});

// ../editor/slate/index.tsx
var import_react3 = __toESM(require_react());
var import_deep_equal2 = __toESM(require_deep_equal());

// ../node_modules/is-plain-object/dist/is-plain-object.mjs
function isObject(o) {
  return Object.prototype.toString.call(o) === "[object Object]";
}
function isPlainObject(o) {
  var ctor, prot;
  if (isObject(o) === false)
    return false;
  ctor = o.constructor;
  if (ctor === void 0)
    return true;
  prot = ctor.prototype;
  if (isObject(prot) === false)
    return false;
  if (prot.hasOwnProperty("isPrototypeOf") === false) {
    return false;
  }
  return true;
}

// ../node_modules/immer/dist/immer.mjs
var NOTHING = Symbol.for("immer-nothing");
var DRAFTABLE = Symbol.for("immer-draftable");
var DRAFT_STATE = Symbol.for("immer-state");
var errors = true ? [
  // All error codes, starting by 0:
  function(plugin) {
    return "The plugin for '".concat(plugin, "' has not been loaded into Immer. To enable the plugin, import and call `enable").concat(plugin, "()` when initializing your application.");
  },
  function(thing) {
    return "produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '".concat(thing, "'");
  },
  "This object has been frozen and should not be mutated",
  function(data) {
    return "Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? " + data;
  },
  "An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",
  "Immer forbids circular references",
  "The first or second argument to `produce` must be a function",
  "The third argument to `produce` must be a function or undefined",
  "First argument to `createDraft` must be a plain object, an array, or an immerable object",
  "First argument to `finishDraft` must be a draft returned by `createDraft`",
  function(thing) {
    return "'current' expects a draft, got: ".concat(thing);
  },
  "Object.defineProperty() cannot be used on an Immer draft",
  "Object.setPrototypeOf() cannot be used on an Immer draft",
  "Immer only supports deleting array indices",
  "Immer only supports setting array indices and the 'length' property",
  function(thing) {
    return "'original' expects a draft, got: ".concat(thing);
  }
  // Note: if more errors are added, the errorOffset in Patches.ts should be increased
  // See Patches.ts for additional errors
] : [];
function die(error, ...args) {
  if (true) {
    const e2 = errors[error];
    const msg2 = typeof e2 === "function" ? e2.apply(null, args) : e2;
    throw new Error("[Immer] ".concat(msg2));
  }
  throw new Error(
    "[Immer] minified error nr: ".concat(error, ". Full error at: https://bit.ly/3cXEKWf")
  );
}
var getPrototypeOf = Object.getPrototypeOf;
function isDraft(value) {
  return !!value && !!value[DRAFT_STATE];
}
function isDraftable(value) {
  var _a;
  if (!value)
    return false;
  return isPlainObject2(value) || Array.isArray(value) || !!value[DRAFTABLE] || !!((_a = value.constructor) == null ? void 0 : _a[DRAFTABLE]) || isMap(value) || isSet(value);
}
var objectCtorString = Object.prototype.constructor.toString();
function isPlainObject2(value) {
  if (!value || typeof value !== "object")
    return false;
  const proto = getPrototypeOf(value);
  if (proto === null) {
    return true;
  }
  const Ctor = Object.hasOwnProperty.call(proto, "constructor") && proto.constructor;
  if (Ctor === Object)
    return true;
  return typeof Ctor == "function" && Function.toString.call(Ctor) === objectCtorString;
}
function each(obj, iter) {
  if (getArchtype(obj) === 0) {
    Object.entries(obj).forEach(([key, value]) => {
      iter(key, value, obj);
    });
  } else {
    obj.forEach((entry, index) => iter(index, entry, obj));
  }
}
function getArchtype(thing) {
  const state = thing[DRAFT_STATE];
  return state ? state.type_ : Array.isArray(thing) ? 1 : isMap(thing) ? 2 : isSet(thing) ? 3 : 0;
}
function has(thing, prop) {
  return getArchtype(thing) === 2 ? thing.has(prop) : Object.prototype.hasOwnProperty.call(thing, prop);
}
function set(thing, propOrOldValue, value) {
  const t2 = getArchtype(thing);
  if (t2 === 2)
    thing.set(propOrOldValue, value);
  else if (t2 === 3) {
    thing.add(value);
  } else
    thing[propOrOldValue] = value;
}
function is(x, y) {
  if (x === y) {
    return x !== 0 || 1 / x === 1 / y;
  } else {
    return x !== x && y !== y;
  }
}
function isMap(target) {
  return target instanceof Map;
}
function isSet(target) {
  return target instanceof Set;
}
function latest(state) {
  return state.copy_ || state.base_;
}
function shallowCopy(base, strict) {
  if (isMap(base)) {
    return new Map(base);
  }
  if (isSet(base)) {
    return new Set(base);
  }
  if (Array.isArray(base))
    return Array.prototype.slice.call(base);
  if (!strict && isPlainObject2(base)) {
    if (!getPrototypeOf(base)) {
      const obj = /* @__PURE__ */ Object.create(null);
      return Object.assign(obj, base);
    }
    return __spreadValues({}, base);
  }
  const descriptors = Object.getOwnPropertyDescriptors(base);
  delete descriptors[DRAFT_STATE];
  let keys = Reflect.ownKeys(descriptors);
  for (let i2 = 0; i2 < keys.length; i2++) {
    const key = keys[i2];
    const desc = descriptors[key];
    if (desc.writable === false) {
      desc.writable = true;
      desc.configurable = true;
    }
    if (desc.get || desc.set)
      descriptors[key] = {
        configurable: true,
        writable: true,
        // could live with !!desc.set as well here...
        enumerable: desc.enumerable,
        value: base[key]
      };
  }
  return Object.create(getPrototypeOf(base), descriptors);
}
function freeze(obj, deep = false) {
  if (isFrozen(obj) || isDraft(obj) || !isDraftable(obj))
    return obj;
  if (getArchtype(obj) > 1) {
    obj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections;
  }
  Object.freeze(obj);
  if (deep)
    each(obj, (_key, value) => freeze(value, true), true);
  return obj;
}
function dontMutateFrozenCollections() {
  die(2);
}
function isFrozen(obj) {
  return Object.isFrozen(obj);
}
var plugins = {};
function getPlugin(pluginKey) {
  const plugin = plugins[pluginKey];
  if (!plugin) {
    die(0, pluginKey);
  }
  return plugin;
}
var currentScope;
function getCurrentScope() {
  return currentScope;
}
function createScope(parent_, immer_) {
  return {
    drafts_: [],
    parent_,
    immer_,
    // Whenever the modified draft contains a draft from another scope, we
    // need to prevent auto-freezing so the unowned draft can be finalized.
    canAutoFreeze_: true,
    unfinalizedDrafts_: 0
  };
}
function usePatchesInScope(scope, patchListener) {
  if (patchListener) {
    getPlugin("Patches");
    scope.patches_ = [];
    scope.inversePatches_ = [];
    scope.patchListener_ = patchListener;
  }
}
function revokeScope(scope) {
  leaveScope(scope);
  scope.drafts_.forEach(revokeDraft);
  scope.drafts_ = null;
}
function leaveScope(scope) {
  if (scope === currentScope) {
    currentScope = scope.parent_;
  }
}
function enterScope(immer2) {
  return currentScope = createScope(currentScope, immer2);
}
function revokeDraft(draft) {
  const state = draft[DRAFT_STATE];
  if (state.type_ === 0 || state.type_ === 1)
    state.revoke_();
  else
    state.revoked_ = true;
}
function processResult(result, scope) {
  scope.unfinalizedDrafts_ = scope.drafts_.length;
  const baseDraft = scope.drafts_[0];
  const isReplaced = result !== void 0 && result !== baseDraft;
  if (isReplaced) {
    if (baseDraft[DRAFT_STATE].modified_) {
      revokeScope(scope);
      die(4);
    }
    if (isDraftable(result)) {
      result = finalize(scope, result);
      if (!scope.parent_)
        maybeFreeze(scope, result);
    }
    if (scope.patches_) {
      getPlugin("Patches").generateReplacementPatches_(
        baseDraft[DRAFT_STATE].base_,
        result,
        scope.patches_,
        scope.inversePatches_
      );
    }
  } else {
    result = finalize(scope, baseDraft, []);
  }
  revokeScope(scope);
  if (scope.patches_) {
    scope.patchListener_(scope.patches_, scope.inversePatches_);
  }
  return result !== NOTHING ? result : void 0;
}
function finalize(rootScope, value, path3) {
  if (isFrozen(value))
    return value;
  const state = value[DRAFT_STATE];
  if (!state) {
    each(
      value,
      (key, childValue) => finalizeProperty(rootScope, state, value, key, childValue, path3),
      true
      // See #590, don't recurse into non-enumerable of non drafted objects
    );
    return value;
  }
  if (state.scope_ !== rootScope)
    return value;
  if (!state.modified_) {
    maybeFreeze(rootScope, state.base_, true);
    return state.base_;
  }
  if (!state.finalized_) {
    state.finalized_ = true;
    state.scope_.unfinalizedDrafts_--;
    const result = state.copy_;
    let resultEach = result;
    let isSet2 = false;
    if (state.type_ === 3) {
      resultEach = new Set(result);
      result.clear();
      isSet2 = true;
    }
    each(
      resultEach,
      (key, childValue) => finalizeProperty(rootScope, state, result, key, childValue, path3, isSet2)
    );
    maybeFreeze(rootScope, result, false);
    if (path3 && rootScope.patches_) {
      getPlugin("Patches").generatePatches_(
        state,
        path3,
        rootScope.patches_,
        rootScope.inversePatches_
      );
    }
  }
  return state.copy_;
}
function finalizeProperty(rootScope, parentState, targetObject, prop, childValue, rootPath, targetIsSet) {
  if (childValue === targetObject)
    die(5);
  if (isDraft(childValue)) {
    const path3 = rootPath && parentState && parentState.type_ !== 3 && // Set objects are atomic since they have no keys.
    !has(parentState.assigned_, prop) ? rootPath.concat(prop) : void 0;
    const res = finalize(rootScope, childValue, path3);
    set(targetObject, prop, res);
    if (isDraft(res)) {
      rootScope.canAutoFreeze_ = false;
    } else
      return;
  } else if (targetIsSet) {
    targetObject.add(childValue);
  }
  if (isDraftable(childValue) && !isFrozen(childValue)) {
    if (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {
      return;
    }
    finalize(rootScope, childValue);
    if (!parentState || !parentState.scope_.parent_)
      maybeFreeze(rootScope, childValue);
  }
}
function maybeFreeze(scope, value, deep = false) {
  if (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {
    freeze(value, deep);
  }
}
function createProxyProxy(base, parent3) {
  const isArray = Array.isArray(base);
  const state = {
    type_: isArray ? 1 : 0,
    // Track which produce call this is associated with.
    scope_: parent3 ? parent3.scope_ : getCurrentScope(),
    // True for both shallow and deep changes.
    modified_: false,
    // Used during finalization.
    finalized_: false,
    // Track which properties have been assigned (true) or deleted (false).
    assigned_: {},
    // The parent draft state.
    parent_: parent3,
    // The base state.
    base_: base,
    // The base proxy.
    draft_: null,
    // set below
    // The base copy with any updated values.
    copy_: null,
    // Called by the `produce` function.
    revoke_: null,
    isManual_: false
  };
  let target = state;
  let traps = objectTraps;
  if (isArray) {
    target = [state];
    traps = arrayTraps;
  }
  const { revoke, proxy } = Proxy.revocable(target, traps);
  state.draft_ = proxy;
  state.revoke_ = revoke;
  return proxy;
}
var objectTraps = {
  get(state, prop) {
    if (prop === DRAFT_STATE)
      return state;
    const source = latest(state);
    if (!has(source, prop)) {
      return readPropFromProto(state, source, prop);
    }
    const value = source[prop];
    if (state.finalized_ || !isDraftable(value)) {
      return value;
    }
    if (value === peek(state.base_, prop)) {
      prepareCopy(state);
      return state.copy_[prop] = createProxy(value, state);
    }
    return value;
  },
  has(state, prop) {
    return prop in latest(state);
  },
  ownKeys(state) {
    return Reflect.ownKeys(latest(state));
  },
  set(state, prop, value) {
    const desc = getDescriptorFromProto(latest(state), prop);
    if (desc == null ? void 0 : desc.set) {
      desc.set.call(state.draft_, value);
      return true;
    }
    if (!state.modified_) {
      const current2 = peek(latest(state), prop);
      const currentState = current2 == null ? void 0 : current2[DRAFT_STATE];
      if (currentState && currentState.base_ === value) {
        state.copy_[prop] = value;
        state.assigned_[prop] = false;
        return true;
      }
      if (is(value, current2) && (value !== void 0 || has(state.base_, prop)))
        return true;
      prepareCopy(state);
      markChanged(state);
    }
    if (state.copy_[prop] === value && // special case: handle new props with value 'undefined'
    (value !== void 0 || prop in state.copy_) || // special case: NaN
    Number.isNaN(value) && Number.isNaN(state.copy_[prop]))
      return true;
    state.copy_[prop] = value;
    state.assigned_[prop] = true;
    return true;
  },
  deleteProperty(state, prop) {
    if (peek(state.base_, prop) !== void 0 || prop in state.base_) {
      state.assigned_[prop] = false;
      prepareCopy(state);
      markChanged(state);
    } else {
      delete state.assigned_[prop];
    }
    if (state.copy_) {
      delete state.copy_[prop];
    }
    return true;
  },
  // Note: We never coerce `desc.value` into an Immer draft, because we can't make
  // the same guarantee in ES5 mode.
  getOwnPropertyDescriptor(state, prop) {
    const owner = latest(state);
    const desc = Reflect.getOwnPropertyDescriptor(owner, prop);
    if (!desc)
      return desc;
    return {
      writable: true,
      configurable: state.type_ !== 1 || prop !== "length",
      enumerable: desc.enumerable,
      value: owner[prop]
    };
  },
  defineProperty() {
    die(11);
  },
  getPrototypeOf(state) {
    return getPrototypeOf(state.base_);
  },
  setPrototypeOf() {
    die(12);
  }
};
var arrayTraps = {};
each(objectTraps, (key, fn) => {
  arrayTraps[key] = function() {
    arguments[0] = arguments[0][0];
    return fn.apply(this, arguments);
  };
});
arrayTraps.deleteProperty = function(state, prop) {
  if (isNaN(parseInt(prop)))
    die(13);
  return arrayTraps.set.call(this, state, prop, void 0);
};
arrayTraps.set = function(state, prop, value) {
  if (prop !== "length" && isNaN(parseInt(prop)))
    die(14);
  return objectTraps.set.call(this, state[0], prop, value, state[0]);
};
function peek(draft, prop) {
  const state = draft[DRAFT_STATE];
  const source = state ? latest(state) : draft;
  return source[prop];
}
function readPropFromProto(state, source, prop) {
  var _a;
  const desc = getDescriptorFromProto(source, prop);
  return desc ? "value" in desc ? desc.value : (
    // This is a very special case, if the prop is a getter defined by the
    // prototype, we should invoke it with the draft as context!
    (_a = desc.get) == null ? void 0 : _a.call(state.draft_)
  ) : void 0;
}
function getDescriptorFromProto(source, prop) {
  if (!(prop in source))
    return void 0;
  let proto = getPrototypeOf(source);
  while (proto) {
    const desc = Object.getOwnPropertyDescriptor(proto, prop);
    if (desc)
      return desc;
    proto = getPrototypeOf(proto);
  }
  return void 0;
}
function markChanged(state) {
  if (!state.modified_) {
    state.modified_ = true;
    if (state.parent_) {
      markChanged(state.parent_);
    }
  }
}
function prepareCopy(state) {
  if (!state.copy_) {
    state.copy_ = shallowCopy(
      state.base_,
      state.scope_.immer_.useStrictShallowCopy_
    );
  }
}
var Immer2 = class {
  constructor(config) {
    this.autoFreeze_ = true;
    this.useStrictShallowCopy_ = false;
    this.produce = (base, recipe, patchListener) => {
      if (typeof base === "function" && typeof recipe !== "function") {
        const defaultBase = recipe;
        recipe = base;
        const self2 = this;
        return function curriedProduce(base2 = defaultBase, ...args) {
          return self2.produce(base2, (draft) => recipe.call(this, draft, ...args));
        };
      }
      if (typeof recipe !== "function")
        die(6);
      if (patchListener !== void 0 && typeof patchListener !== "function")
        die(7);
      let result;
      if (isDraftable(base)) {
        const scope = enterScope(this);
        const proxy = createProxy(base, void 0);
        let hasError = true;
        try {
          result = recipe(proxy);
          hasError = false;
        } finally {
          if (hasError)
            revokeScope(scope);
          else
            leaveScope(scope);
        }
        usePatchesInScope(scope, patchListener);
        return processResult(result, scope);
      } else if (!base || typeof base !== "object") {
        result = recipe(base);
        if (result === void 0)
          result = base;
        if (result === NOTHING)
          result = void 0;
        if (this.autoFreeze_)
          freeze(result, true);
        if (patchListener) {
          const p = [];
          const ip = [];
          getPlugin("Patches").generateReplacementPatches_(base, result, p, ip);
          patchListener(p, ip);
        }
        return result;
      } else
        die(1, base);
    };
    this.produceWithPatches = (base, recipe) => {
      if (typeof base === "function") {
        return (state, ...args) => this.produceWithPatches(state, (draft) => base(draft, ...args));
      }
      let patches, inversePatches;
      const result = this.produce(base, recipe, (p, ip) => {
        patches = p;
        inversePatches = ip;
      });
      return [result, patches, inversePatches];
    };
    if (typeof (config == null ? void 0 : config.autoFreeze) === "boolean")
      this.setAutoFreeze(config.autoFreeze);
    if (typeof (config == null ? void 0 : config.useStrictShallowCopy) === "boolean")
      this.setUseStrictShallowCopy(config.useStrictShallowCopy);
  }
  createDraft(base) {
    if (!isDraftable(base))
      die(8);
    if (isDraft(base))
      base = current(base);
    const scope = enterScope(this);
    const proxy = createProxy(base, void 0);
    proxy[DRAFT_STATE].isManual_ = true;
    leaveScope(scope);
    return proxy;
  }
  finishDraft(draft, patchListener) {
    const state = draft && draft[DRAFT_STATE];
    if (!state || !state.isManual_)
      die(9);
    const { scope_: scope } = state;
    usePatchesInScope(scope, patchListener);
    return processResult(void 0, scope);
  }
  /**
   * Pass true to automatically freeze all copies created by Immer.
   *
   * By default, auto-freezing is enabled.
   */
  setAutoFreeze(value) {
    this.autoFreeze_ = value;
  }
  /**
   * Pass true to enable strict shallow copy.
   *
   * By default, immer does not copy the object descriptors such as getter, setter and non-enumrable properties.
   */
  setUseStrictShallowCopy(value) {
    this.useStrictShallowCopy_ = value;
  }
  applyPatches(base, patches) {
    let i2;
    for (i2 = patches.length - 1; i2 >= 0; i2--) {
      const patch = patches[i2];
      if (patch.path.length === 0 && patch.op === "replace") {
        base = patch.value;
        break;
      }
    }
    if (i2 > -1) {
      patches = patches.slice(i2 + 1);
    }
    const applyPatchesImpl = getPlugin("Patches").applyPatches_;
    if (isDraft(base)) {
      return applyPatchesImpl(base, patches);
    }
    return this.produce(
      base,
      (draft) => applyPatchesImpl(draft, patches)
    );
  }
};
function createProxy(value, parent3) {
  const draft = isMap(value) ? getPlugin("MapSet").proxyMap_(value, parent3) : isSet(value) ? getPlugin("MapSet").proxySet_(value, parent3) : createProxyProxy(value, parent3);
  const scope = parent3 ? parent3.scope_ : getCurrentScope();
  scope.drafts_.push(draft);
  return draft;
}
function current(value) {
  if (!isDraft(value))
    die(10, value);
  return currentImpl(value);
}
function currentImpl(value) {
  if (!isDraftable(value) || isFrozen(value))
    return value;
  const state = value[DRAFT_STATE];
  let copy;
  if (state) {
    if (!state.modified_)
      return state.base_;
    state.finalized_ = true;
    copy = shallowCopy(value, state.scope_.immer_.useStrictShallowCopy_);
  } else {
    copy = shallowCopy(value, true);
  }
  each(copy, (key, childValue) => {
    set(copy, key, currentImpl(childValue));
  });
  if (state) {
    state.finalized_ = false;
  }
  return copy;
}
var immer = new Immer2();
var produce = immer.produce;
var produceWithPatches = immer.produceWithPatches.bind(
  immer
);
var setAutoFreeze = immer.setAutoFreeze.bind(immer);
var setUseStrictShallowCopy = immer.setUseStrictShallowCopy.bind(immer);
var applyPatches = immer.applyPatches.bind(immer);
var createDraft = immer.createDraft.bind(immer);
var finishDraft = immer.finishDraft.bind(immer);

// ../node_modules/slate/dist/index.es.js
var PathRef = {
  transform(ref, op) {
    var {
      current: current2,
      affinity
    } = ref;
    if (current2 == null) {
      return;
    }
    var path3 = Path.transform(current2, op, {
      affinity
    });
    ref.current = path3;
    if (path3 == null) {
      ref.unref();
    }
  }
};
var PointRef = {
  transform(ref, op) {
    var {
      current: current2,
      affinity
    } = ref;
    if (current2 == null) {
      return;
    }
    var point3 = Point.transform(current2, op, {
      affinity
    });
    ref.current = point3;
    if (point3 == null) {
      ref.unref();
    }
  }
};
var RangeRef = {
  transform(ref, op) {
    var {
      current: current2,
      affinity
    } = ref;
    if (current2 == null) {
      return;
    }
    var path3 = Range.transform(current2, op, {
      affinity
    });
    ref.current = path3;
    if (path3 == null) {
      ref.unref();
    }
  }
};
var DIRTY_PATHS = /* @__PURE__ */ new WeakMap();
var DIRTY_PATH_KEYS = /* @__PURE__ */ new WeakMap();
var FLUSHING = /* @__PURE__ */ new WeakMap();
var NORMALIZING = /* @__PURE__ */ new WeakMap();
var PATH_REFS = /* @__PURE__ */ new WeakMap();
var POINT_REFS = /* @__PURE__ */ new WeakMap();
var RANGE_REFS = /* @__PURE__ */ new WeakMap();
var Path = {
  ancestors(path3) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      reverse = false
    } = options;
    var paths = Path.levels(path3, options);
    if (reverse) {
      paths = paths.slice(1);
    } else {
      paths = paths.slice(0, -1);
    }
    return paths;
  },
  common(path3, another) {
    var common = [];
    for (var i2 = 0; i2 < path3.length && i2 < another.length; i2++) {
      var av = path3[i2];
      var bv = another[i2];
      if (av !== bv) {
        break;
      }
      common.push(av);
    }
    return common;
  },
  compare(path3, another) {
    var min = Math.min(path3.length, another.length);
    for (var i2 = 0; i2 < min; i2++) {
      if (path3[i2] < another[i2])
        return -1;
      if (path3[i2] > another[i2])
        return 1;
    }
    return 0;
  },
  endsAfter(path3, another) {
    var i2 = path3.length - 1;
    var as = path3.slice(0, i2);
    var bs = another.slice(0, i2);
    var av = path3[i2];
    var bv = another[i2];
    return Path.equals(as, bs) && av > bv;
  },
  endsAt(path3, another) {
    var i2 = path3.length;
    var as = path3.slice(0, i2);
    var bs = another.slice(0, i2);
    return Path.equals(as, bs);
  },
  endsBefore(path3, another) {
    var i2 = path3.length - 1;
    var as = path3.slice(0, i2);
    var bs = another.slice(0, i2);
    var av = path3[i2];
    var bv = another[i2];
    return Path.equals(as, bs) && av < bv;
  },
  equals(path3, another) {
    return path3.length === another.length && path3.every((n3, i2) => n3 === another[i2]);
  },
  hasPrevious(path3) {
    return path3[path3.length - 1] > 0;
  },
  isAfter(path3, another) {
    return Path.compare(path3, another) === 1;
  },
  isAncestor(path3, another) {
    return path3.length < another.length && Path.compare(path3, another) === 0;
  },
  isBefore(path3, another) {
    return Path.compare(path3, another) === -1;
  },
  isChild(path3, another) {
    return path3.length === another.length + 1 && Path.compare(path3, another) === 0;
  },
  isCommon(path3, another) {
    return path3.length <= another.length && Path.compare(path3, another) === 0;
  },
  isDescendant(path3, another) {
    return path3.length > another.length && Path.compare(path3, another) === 0;
  },
  isParent(path3, another) {
    return path3.length + 1 === another.length && Path.compare(path3, another) === 0;
  },
  isPath(value) {
    return Array.isArray(value) && (value.length === 0 || typeof value[0] === "number");
  },
  isSibling(path3, another) {
    if (path3.length !== another.length) {
      return false;
    }
    var as = path3.slice(0, -1);
    var bs = another.slice(0, -1);
    var al = path3[path3.length - 1];
    var bl = another[another.length - 1];
    return al !== bl && Path.equals(as, bs);
  },
  levels(path3) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      reverse = false
    } = options;
    var list = [];
    for (var i2 = 0; i2 <= path3.length; i2++) {
      list.push(path3.slice(0, i2));
    }
    if (reverse) {
      list.reverse();
    }
    return list;
  },
  next(path3) {
    if (path3.length === 0) {
      throw new Error("Cannot get the next path of a root path [".concat(path3, "], because it has no next index."));
    }
    var last2 = path3[path3.length - 1];
    return path3.slice(0, -1).concat(last2 + 1);
  },
  operationCanTransformPath(operation) {
    switch (operation.type) {
      case "insert_node":
      case "remove_node":
      case "merge_node":
      case "split_node":
      case "move_node":
        return true;
      default:
        return false;
    }
  },
  parent(path3) {
    if (path3.length === 0) {
      throw new Error("Cannot get the parent path of the root path [".concat(path3, "]."));
    }
    return path3.slice(0, -1);
  },
  previous(path3) {
    if (path3.length === 0) {
      throw new Error("Cannot get the previous path of a root path [".concat(path3, "], because it has no previous index."));
    }
    var last2 = path3[path3.length - 1];
    if (last2 <= 0) {
      throw new Error("Cannot get the previous path of a first child path [".concat(path3, "] because it would result in a negative index."));
    }
    return path3.slice(0, -1).concat(last2 - 1);
  },
  relative(path3, ancestor) {
    if (!Path.isAncestor(ancestor, path3) && !Path.equals(path3, ancestor)) {
      throw new Error("Cannot get the relative path of [".concat(path3, "] inside ancestor [").concat(ancestor, "], because it is not above or equal to the path."));
    }
    return path3.slice(ancestor.length);
  },
  transform(path3, operation) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    if (!path3)
      return null;
    var p = [...path3];
    var {
      affinity = "forward"
    } = options;
    if (path3.length === 0) {
      return p;
    }
    switch (operation.type) {
      case "insert_node": {
        var {
          path: op
        } = operation;
        if (Path.equals(op, p) || Path.endsBefore(op, p) || Path.isAncestor(op, p)) {
          p[op.length - 1] += 1;
        }
        break;
      }
      case "remove_node": {
        var {
          path: _op
        } = operation;
        if (Path.equals(_op, p) || Path.isAncestor(_op, p)) {
          return null;
        } else if (Path.endsBefore(_op, p)) {
          p[_op.length - 1] -= 1;
        }
        break;
      }
      case "merge_node": {
        var {
          path: _op2,
          position
        } = operation;
        if (Path.equals(_op2, p) || Path.endsBefore(_op2, p)) {
          p[_op2.length - 1] -= 1;
        } else if (Path.isAncestor(_op2, p)) {
          p[_op2.length - 1] -= 1;
          p[_op2.length] += position;
        }
        break;
      }
      case "split_node": {
        var {
          path: _op3,
          position: _position
        } = operation;
        if (Path.equals(_op3, p)) {
          if (affinity === "forward") {
            p[p.length - 1] += 1;
          } else if (affinity === "backward")
            ;
          else {
            return null;
          }
        } else if (Path.endsBefore(_op3, p)) {
          p[_op3.length - 1] += 1;
        } else if (Path.isAncestor(_op3, p) && path3[_op3.length] >= _position) {
          p[_op3.length - 1] += 1;
          p[_op3.length] -= _position;
        }
        break;
      }
      case "move_node": {
        var {
          path: _op4,
          newPath: onp
        } = operation;
        if (Path.equals(_op4, onp)) {
          return p;
        }
        if (Path.isAncestor(_op4, p) || Path.equals(_op4, p)) {
          var copy = onp.slice();
          if (Path.endsBefore(_op4, onp) && _op4.length < onp.length) {
            copy[_op4.length - 1] -= 1;
          }
          return copy.concat(p.slice(_op4.length));
        } else if (Path.isSibling(_op4, onp) && (Path.isAncestor(onp, p) || Path.equals(onp, p))) {
          if (Path.endsBefore(_op4, p)) {
            p[_op4.length - 1] -= 1;
          } else {
            p[_op4.length - 1] += 1;
          }
        } else if (Path.endsBefore(onp, p) || Path.equals(onp, p) || Path.isAncestor(onp, p)) {
          if (Path.endsBefore(_op4, p)) {
            p[_op4.length - 1] -= 1;
          }
          p[onp.length - 1] += 1;
        } else if (Path.endsBefore(_op4, p)) {
          if (Path.equals(onp, p)) {
            p[onp.length - 1] += 1;
          }
          p[_op4.length - 1] -= 1;
        }
        break;
      }
    }
    return p;
  }
};
function _typeof(o) {
  "@babel/helpers - typeof";
  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o2) {
    return typeof o2;
  } : function(o2) {
    return o2 && "function" == typeof Symbol && o2.constructor === Symbol && o2 !== Symbol.prototype ? "symbol" : typeof o2;
  }, _typeof(o);
}
function _toPrimitive(input, hint) {
  if (_typeof(input) !== "object" || input === null)
    return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== void 0) {
    var res = prim.call(input, hint || "default");
    if (_typeof(res) !== "object")
      return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toPropertyKey(arg) {
  var key = _toPrimitive(arg, "string");
  return _typeof(key) === "symbol" ? key : String(key);
}
function _defineProperty(obj, key, value) {
  key = _toPropertyKey(key);
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function ownKeys$e(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$e(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$e(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$e(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var applyToDraft = (editor, selection, op) => {
  switch (op.type) {
    case "insert_node": {
      var {
        path: path3,
        node: node3
      } = op;
      var parent3 = Node.parent(editor, path3);
      var index = path3[path3.length - 1];
      if (index > parent3.children.length) {
        throw new Error('Cannot apply an "insert_node" operation at path ['.concat(path3, "] because the destination is past the end of the node."));
      }
      parent3.children.splice(index, 0, node3);
      if (selection) {
        for (var [point3, key] of Range.points(selection)) {
          selection[key] = Point.transform(point3, op);
        }
      }
      break;
    }
    case "insert_text": {
      var {
        path: _path,
        offset,
        text
      } = op;
      if (text.length === 0)
        break;
      var _node = Node.leaf(editor, _path);
      var before3 = _node.text.slice(0, offset);
      var after3 = _node.text.slice(offset);
      _node.text = before3 + text + after3;
      if (selection) {
        for (var [_point, _key] of Range.points(selection)) {
          selection[_key] = Point.transform(_point, op);
        }
      }
      break;
    }
    case "merge_node": {
      var {
        path: _path2
      } = op;
      var _node2 = Node.get(editor, _path2);
      var prevPath = Path.previous(_path2);
      var prev = Node.get(editor, prevPath);
      var _parent = Node.parent(editor, _path2);
      var _index = _path2[_path2.length - 1];
      if (Text.isText(_node2) && Text.isText(prev)) {
        prev.text += _node2.text;
      } else if (!Text.isText(_node2) && !Text.isText(prev)) {
        prev.children.push(..._node2.children);
      } else {
        throw new Error('Cannot apply a "merge_node" operation at path ['.concat(_path2, "] to nodes of different interfaces: ").concat(Scrubber.stringify(_node2), " ").concat(Scrubber.stringify(prev)));
      }
      _parent.children.splice(_index, 1);
      if (selection) {
        for (var [_point2, _key2] of Range.points(selection)) {
          selection[_key2] = Point.transform(_point2, op);
        }
      }
      break;
    }
    case "move_node": {
      var {
        path: _path3,
        newPath
      } = op;
      if (Path.isAncestor(_path3, newPath)) {
        throw new Error("Cannot move a path [".concat(_path3, "] to new path [").concat(newPath, "] because the destination is inside itself."));
      }
      var _node3 = Node.get(editor, _path3);
      var _parent2 = Node.parent(editor, _path3);
      var _index2 = _path3[_path3.length - 1];
      _parent2.children.splice(_index2, 1);
      var truePath = Path.transform(_path3, op);
      var newParent = Node.get(editor, Path.parent(truePath));
      var newIndex = truePath[truePath.length - 1];
      newParent.children.splice(newIndex, 0, _node3);
      if (selection) {
        for (var [_point3, _key3] of Range.points(selection)) {
          selection[_key3] = Point.transform(_point3, op);
        }
      }
      break;
    }
    case "remove_node": {
      var {
        path: _path4
      } = op;
      var _index3 = _path4[_path4.length - 1];
      var _parent3 = Node.parent(editor, _path4);
      _parent3.children.splice(_index3, 1);
      if (selection) {
        for (var [_point4, _key4] of Range.points(selection)) {
          var result = Point.transform(_point4, op);
          if (selection != null && result != null) {
            selection[_key4] = result;
          } else {
            var _prev = void 0;
            var next3 = void 0;
            for (var [n3, p] of Node.texts(editor)) {
              if (Path.compare(p, _path4) === -1) {
                _prev = [n3, p];
              } else {
                next3 = [n3, p];
                break;
              }
            }
            var preferNext = false;
            if (_prev && next3) {
              if (Path.equals(next3[1], _path4)) {
                preferNext = !Path.hasPrevious(next3[1]);
              } else {
                preferNext = Path.common(_prev[1], _path4).length < Path.common(next3[1], _path4).length;
              }
            }
            if (_prev && !preferNext) {
              _point4.path = _prev[1];
              _point4.offset = _prev[0].text.length;
            } else if (next3) {
              _point4.path = next3[1];
              _point4.offset = 0;
            } else {
              selection = null;
            }
          }
        }
      }
      break;
    }
    case "remove_text": {
      var {
        path: _path5,
        offset: _offset,
        text: _text
      } = op;
      if (_text.length === 0)
        break;
      var _node4 = Node.leaf(editor, _path5);
      var _before = _node4.text.slice(0, _offset);
      var _after = _node4.text.slice(_offset + _text.length);
      _node4.text = _before + _after;
      if (selection) {
        for (var [_point5, _key5] of Range.points(selection)) {
          selection[_key5] = Point.transform(_point5, op);
        }
      }
      break;
    }
    case "set_node": {
      var {
        path: _path6,
        properties,
        newProperties
      } = op;
      if (_path6.length === 0) {
        throw new Error("Cannot set properties on the root node!");
      }
      var _node5 = Node.get(editor, _path6);
      for (var _key6 in newProperties) {
        if (_key6 === "children" || _key6 === "text") {
          throw new Error('Cannot set the "'.concat(_key6, '" property of nodes!'));
        }
        var value = newProperties[_key6];
        if (value == null) {
          delete _node5[_key6];
        } else {
          _node5[_key6] = value;
        }
      }
      for (var _key7 in properties) {
        if (!newProperties.hasOwnProperty(_key7)) {
          delete _node5[_key7];
        }
      }
      break;
    }
    case "set_selection": {
      var {
        newProperties: _newProperties
      } = op;
      if (_newProperties == null) {
        selection = _newProperties;
      } else {
        if (selection == null) {
          if (!Range.isRange(_newProperties)) {
            throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Scrubber.stringify(_newProperties), " when there is no current selection."));
          }
          selection = _objectSpread$e({}, _newProperties);
        }
        for (var _key8 in _newProperties) {
          var _value = _newProperties[_key8];
          if (_value == null) {
            if (_key8 === "anchor" || _key8 === "focus") {
              throw new Error('Cannot remove the "'.concat(_key8, '" selection property'));
            }
            delete selection[_key8];
          } else {
            selection[_key8] = _value;
          }
        }
      }
      break;
    }
    case "split_node": {
      var {
        path: _path7,
        position,
        properties: _properties
      } = op;
      if (_path7.length === 0) {
        throw new Error('Cannot apply a "split_node" operation at path ['.concat(_path7, "] because the root node cannot be split."));
      }
      var _node6 = Node.get(editor, _path7);
      var _parent4 = Node.parent(editor, _path7);
      var _index4 = _path7[_path7.length - 1];
      var newNode;
      if (Text.isText(_node6)) {
        var _before2 = _node6.text.slice(0, position);
        var _after2 = _node6.text.slice(position);
        _node6.text = _before2;
        newNode = _objectSpread$e(_objectSpread$e({}, _properties), {}, {
          text: _after2
        });
      } else {
        var _before3 = _node6.children.slice(0, position);
        var _after3 = _node6.children.slice(position);
        _node6.children = _before3;
        newNode = _objectSpread$e(_objectSpread$e({}, _properties), {}, {
          children: _after3
        });
      }
      _parent4.children.splice(_index4 + 1, 0, newNode);
      if (selection) {
        for (var [_point6, _key9] of Range.points(selection)) {
          selection[_key9] = Point.transform(_point6, op);
        }
      }
      break;
    }
  }
  return selection;
};
var GeneralTransforms = {
  transform(editor, op) {
    editor.children = createDraft(editor.children);
    var selection = editor.selection && createDraft(editor.selection);
    try {
      selection = applyToDraft(editor, selection, op);
    } finally {
      editor.children = finishDraft(editor.children);
      if (selection) {
        editor.selection = isDraft(selection) ? finishDraft(selection) : selection;
      } else {
        editor.selection = null;
      }
    }
  }
};
var NodeTransforms = {
  insertNodes(editor, nodes2, options) {
    editor.insertNodes(nodes2, options);
  },
  liftNodes(editor, options) {
    editor.liftNodes(options);
  },
  mergeNodes(editor, options) {
    editor.mergeNodes(options);
  },
  moveNodes(editor, options) {
    editor.moveNodes(options);
  },
  removeNodes(editor, options) {
    editor.removeNodes(options);
  },
  setNodes(editor, props, options) {
    editor.setNodes(props, options);
  },
  splitNodes(editor, options) {
    editor.splitNodes(options);
  },
  unsetNodes(editor, props, options) {
    editor.unsetNodes(props, options);
  },
  unwrapNodes(editor, options) {
    editor.unwrapNodes(options);
  },
  wrapNodes(editor, element, options) {
    editor.wrapNodes(element, options);
  }
};
var SelectionTransforms = {
  collapse(editor, options) {
    editor.collapse(options);
  },
  deselect(editor) {
    editor.deselect();
  },
  move(editor, options) {
    editor.move(options);
  },
  select(editor, target) {
    editor.select(target);
  },
  setPoint(editor, props, options) {
    editor.setPoint(props, options);
  },
  setSelection(editor, props) {
    editor.setSelection(props);
  }
};
var isDeepEqual = (node3, another) => {
  for (var key in node3) {
    var a = node3[key];
    var b = another[key];
    if (isPlainObject(a) && isPlainObject(b)) {
      if (!isDeepEqual(a, b))
        return false;
    } else if (Array.isArray(a) && Array.isArray(b)) {
      if (a.length !== b.length)
        return false;
      for (var i2 = 0; i2 < a.length; i2++) {
        if (a[i2] !== b[i2])
          return false;
      }
    } else if (a !== b) {
      return false;
    }
  }
  for (var _key in another) {
    if (node3[_key] === void 0 && another[_key] !== void 0) {
      return false;
    }
  }
  return true;
};
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null)
    return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i2;
  for (i2 = 0; i2 < sourceKeys.length; i2++) {
    key = sourceKeys[i2];
    if (excluded.indexOf(key) >= 0)
      continue;
    target[key] = source[key];
  }
  return target;
}
function _objectWithoutProperties(source, excluded) {
  if (source == null)
    return {};
  var target = _objectWithoutPropertiesLoose(source, excluded);
  var key, i2;
  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
    for (i2 = 0; i2 < sourceSymbolKeys.length; i2++) {
      key = sourceSymbolKeys[i2];
      if (excluded.indexOf(key) >= 0)
        continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key))
        continue;
      target[key] = source[key];
    }
  }
  return target;
}
var _excluded$4 = ["anchor", "focus"];
function ownKeys$d(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$d(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$d(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$d(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Range = {
  edges(range2) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      reverse = false
    } = options;
    var {
      anchor,
      focus
    } = range2;
    return Range.isBackward(range2) === reverse ? [anchor, focus] : [focus, anchor];
  },
  end(range2) {
    var [, end2] = Range.edges(range2);
    return end2;
  },
  equals(range2, another) {
    return Point.equals(range2.anchor, another.anchor) && Point.equals(range2.focus, another.focus);
  },
  includes(range2, target) {
    if (Range.isRange(target)) {
      if (Range.includes(range2, target.anchor) || Range.includes(range2, target.focus)) {
        return true;
      }
      var [rs, re] = Range.edges(range2);
      var [ts, te] = Range.edges(target);
      return Point.isBefore(rs, ts) && Point.isAfter(re, te);
    }
    var [start2, end2] = Range.edges(range2);
    var isAfterStart = false;
    var isBeforeEnd = false;
    if (Point.isPoint(target)) {
      isAfterStart = Point.compare(target, start2) >= 0;
      isBeforeEnd = Point.compare(target, end2) <= 0;
    } else {
      isAfterStart = Path.compare(target, start2.path) >= 0;
      isBeforeEnd = Path.compare(target, end2.path) <= 0;
    }
    return isAfterStart && isBeforeEnd;
  },
  intersection(range2, another) {
    var rest = _objectWithoutProperties(range2, _excluded$4);
    var [s1, e1] = Range.edges(range2);
    var [s2, e2] = Range.edges(another);
    var start2 = Point.isBefore(s1, s2) ? s2 : s1;
    var end2 = Point.isBefore(e1, e2) ? e1 : e2;
    if (Point.isBefore(end2, start2)) {
      return null;
    } else {
      return _objectSpread$d({
        anchor: start2,
        focus: end2
      }, rest);
    }
  },
  isBackward(range2) {
    var {
      anchor,
      focus
    } = range2;
    return Point.isAfter(anchor, focus);
  },
  isCollapsed(range2) {
    var {
      anchor,
      focus
    } = range2;
    return Point.equals(anchor, focus);
  },
  isExpanded(range2) {
    return !Range.isCollapsed(range2);
  },
  isForward(range2) {
    return !Range.isBackward(range2);
  },
  isRange(value) {
    return isPlainObject(value) && Point.isPoint(value.anchor) && Point.isPoint(value.focus);
  },
  *points(range2) {
    yield [range2.anchor, "anchor"];
    yield [range2.focus, "focus"];
  },
  start(range2) {
    var [start2] = Range.edges(range2);
    return start2;
  },
  transform(range2, op) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return produce(range2, (r2) => {
      if (r2 === null) {
        return null;
      }
      var {
        affinity = "inward"
      } = options;
      var affinityAnchor;
      var affinityFocus;
      if (affinity === "inward") {
        var isCollapsed = Range.isCollapsed(r2);
        if (Range.isForward(r2)) {
          affinityAnchor = "forward";
          affinityFocus = isCollapsed ? affinityAnchor : "backward";
        } else {
          affinityAnchor = "backward";
          affinityFocus = isCollapsed ? affinityAnchor : "forward";
        }
      } else if (affinity === "outward") {
        if (Range.isForward(r2)) {
          affinityAnchor = "backward";
          affinityFocus = "forward";
        } else {
          affinityAnchor = "forward";
          affinityFocus = "backward";
        }
      } else {
        affinityAnchor = affinity;
        affinityFocus = affinity;
      }
      var anchor = Point.transform(r2.anchor, op, {
        affinity: affinityAnchor
      });
      var focus = Point.transform(r2.focus, op, {
        affinity: affinityFocus
      });
      if (!anchor || !focus) {
        return null;
      }
      r2.anchor = anchor;
      r2.focus = focus;
    });
  }
};
var isElement = (value) => {
  return isPlainObject(value) && Node.isNodeList(value.children) && !Editor.isEditor(value);
};
var Element2 = {
  isAncestor(value) {
    return isPlainObject(value) && Node.isNodeList(value.children);
  },
  isElement,
  isElementList(value) {
    return Array.isArray(value) && value.every((val) => Element2.isElement(val));
  },
  isElementProps(props) {
    return props.children !== void 0;
  },
  isElementType: function isElementType(value, elementVal) {
    var elementKey = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "type";
    return isElement(value) && value[elementKey] === elementVal;
  },
  matches(element, props) {
    for (var key in props) {
      if (key === "children") {
        continue;
      }
      if (element[key] !== props[key]) {
        return false;
      }
    }
    return true;
  }
};
var _excluded$3 = ["children"];
var _excluded2$3 = ["text"];
var IS_NODE_LIST_CACHE = /* @__PURE__ */ new WeakMap();
var Node = {
  ancestor(root, path3) {
    var node3 = Node.get(root, path3);
    if (Text.isText(node3)) {
      throw new Error("Cannot get the ancestor node at path [".concat(path3, "] because it refers to a text node instead: ").concat(Scrubber.stringify(node3)));
    }
    return node3;
  },
  ancestors(root, path3) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return function* () {
      for (var p of Path.ancestors(path3, options)) {
        var n3 = Node.ancestor(root, p);
        var entry = [n3, p];
        yield entry;
      }
    }();
  },
  child(root, index) {
    if (Text.isText(root)) {
      throw new Error("Cannot get the child of a text node: ".concat(Scrubber.stringify(root)));
    }
    var c = root.children[index];
    if (c == null) {
      throw new Error("Cannot get child at index `".concat(index, "` in node: ").concat(Scrubber.stringify(root)));
    }
    return c;
  },
  children(root, path3) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return function* () {
      var {
        reverse = false
      } = options;
      var ancestor = Node.ancestor(root, path3);
      var {
        children
      } = ancestor;
      var index = reverse ? children.length - 1 : 0;
      while (reverse ? index >= 0 : index < children.length) {
        var child = Node.child(ancestor, index);
        var childPath = path3.concat(index);
        yield [child, childPath];
        index = reverse ? index - 1 : index + 1;
      }
    }();
  },
  common(root, path3, another) {
    var p = Path.common(path3, another);
    var n3 = Node.get(root, p);
    return [n3, p];
  },
  descendant(root, path3) {
    var node3 = Node.get(root, path3);
    if (Editor.isEditor(node3)) {
      throw new Error("Cannot get the descendant node at path [".concat(path3, "] because it refers to the root editor node instead: ").concat(Scrubber.stringify(node3)));
    }
    return node3;
  },
  descendants(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      for (var [node3, path3] of Node.nodes(root, options)) {
        if (path3.length !== 0) {
          yield [node3, path3];
        }
      }
    }();
  },
  elements(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      for (var [node3, path3] of Node.nodes(root, options)) {
        if (Element2.isElement(node3)) {
          yield [node3, path3];
        }
      }
    }();
  },
  extractProps(node3) {
    if (Element2.isAncestor(node3)) {
      var properties = _objectWithoutProperties(node3, _excluded$3);
      return properties;
    } else {
      var properties = _objectWithoutProperties(node3, _excluded2$3);
      return properties;
    }
  },
  first(root, path3) {
    var p = path3.slice();
    var n3 = Node.get(root, p);
    while (n3) {
      if (Text.isText(n3) || n3.children.length === 0) {
        break;
      } else {
        n3 = n3.children[0];
        p.push(0);
      }
    }
    return [n3, p];
  },
  fragment(root, range2) {
    if (Text.isText(root)) {
      throw new Error("Cannot get a fragment starting from a root text node: ".concat(Scrubber.stringify(root)));
    }
    var newRoot = produce({
      children: root.children
    }, (r2) => {
      var [start2, end2] = Range.edges(range2);
      var nodeEntries = Node.nodes(r2, {
        reverse: true,
        pass: (_ref) => {
          var [, path4] = _ref;
          return !Range.includes(range2, path4);
        }
      });
      for (var [, path3] of nodeEntries) {
        if (!Range.includes(range2, path3)) {
          var parent3 = Node.parent(r2, path3);
          var index = path3[path3.length - 1];
          parent3.children.splice(index, 1);
        }
        if (Path.equals(path3, end2.path)) {
          var leaf3 = Node.leaf(r2, path3);
          leaf3.text = leaf3.text.slice(0, end2.offset);
        }
        if (Path.equals(path3, start2.path)) {
          var _leaf = Node.leaf(r2, path3);
          _leaf.text = _leaf.text.slice(start2.offset);
        }
      }
      if (Editor.isEditor(r2)) {
        r2.selection = null;
      }
    });
    return newRoot.children;
  },
  get(root, path3) {
    var node3 = root;
    for (var i2 = 0; i2 < path3.length; i2++) {
      var p = path3[i2];
      if (Text.isText(node3) || !node3.children[p]) {
        throw new Error("Cannot find a descendant at path [".concat(path3, "] in node: ").concat(Scrubber.stringify(root)));
      }
      node3 = node3.children[p];
    }
    return node3;
  },
  has(root, path3) {
    var node3 = root;
    for (var i2 = 0; i2 < path3.length; i2++) {
      var p = path3[i2];
      if (Text.isText(node3) || !node3.children[p]) {
        return false;
      }
      node3 = node3.children[p];
    }
    return true;
  },
  isNode(value) {
    return Text.isText(value) || Element2.isElement(value) || Editor.isEditor(value);
  },
  isNodeList(value) {
    if (!Array.isArray(value)) {
      return false;
    }
    var cachedResult = IS_NODE_LIST_CACHE.get(value);
    if (cachedResult !== void 0) {
      return cachedResult;
    }
    var isNodeList = value.every((val) => Node.isNode(val));
    IS_NODE_LIST_CACHE.set(value, isNodeList);
    return isNodeList;
  },
  last(root, path3) {
    var p = path3.slice();
    var n3 = Node.get(root, p);
    while (n3) {
      if (Text.isText(n3) || n3.children.length === 0) {
        break;
      } else {
        var i2 = n3.children.length - 1;
        n3 = n3.children[i2];
        p.push(i2);
      }
    }
    return [n3, p];
  },
  leaf(root, path3) {
    var node3 = Node.get(root, path3);
    if (!Text.isText(node3)) {
      throw new Error("Cannot get the leaf node at path [".concat(path3, "] because it refers to a non-leaf node: ").concat(Scrubber.stringify(node3)));
    }
    return node3;
  },
  levels(root, path3) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return function* () {
      for (var p of Path.levels(path3, options)) {
        var n3 = Node.get(root, p);
        yield [n3, p];
      }
    }();
  },
  matches(node3, props) {
    return Element2.isElement(node3) && Element2.isElementProps(props) && Element2.matches(node3, props) || Text.isText(node3) && Text.isTextProps(props) && Text.matches(node3, props);
  },
  nodes(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      var {
        pass,
        reverse = false
      } = options;
      var {
        from = [],
        to
      } = options;
      var visited = /* @__PURE__ */ new Set();
      var p = [];
      var n3 = root;
      while (true) {
        if (to && (reverse ? Path.isBefore(p, to) : Path.isAfter(p, to))) {
          break;
        }
        if (!visited.has(n3)) {
          yield [n3, p];
        }
        if (!visited.has(n3) && !Text.isText(n3) && n3.children.length !== 0 && (pass == null || pass([n3, p]) === false)) {
          visited.add(n3);
          var nextIndex = reverse ? n3.children.length - 1 : 0;
          if (Path.isAncestor(p, from)) {
            nextIndex = from[p.length];
          }
          p = p.concat(nextIndex);
          n3 = Node.get(root, p);
          continue;
        }
        if (p.length === 0) {
          break;
        }
        if (!reverse) {
          var newPath = Path.next(p);
          if (Node.has(root, newPath)) {
            p = newPath;
            n3 = Node.get(root, p);
            continue;
          }
        }
        if (reverse && p[p.length - 1] !== 0) {
          var _newPath = Path.previous(p);
          p = _newPath;
          n3 = Node.get(root, p);
          continue;
        }
        p = Path.parent(p);
        n3 = Node.get(root, p);
        visited.add(n3);
      }
    }();
  },
  parent(root, path3) {
    var parentPath = Path.parent(path3);
    var p = Node.get(root, parentPath);
    if (Text.isText(p)) {
      throw new Error("Cannot get the parent of path [".concat(path3, "] because it does not exist in the root."));
    }
    return p;
  },
  string(node3) {
    if (Text.isText(node3)) {
      return node3.text;
    } else {
      return node3.children.map(Node.string).join("");
    }
  },
  texts(root) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return function* () {
      for (var [node3, path3] of Node.nodes(root, options)) {
        if (Text.isText(node3)) {
          yield [node3, path3];
        }
      }
    }();
  }
};
function ownKeys$c(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$c(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$c(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$c(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Operation = {
  isNodeOperation(value) {
    return Operation.isOperation(value) && value.type.endsWith("_node");
  },
  isOperation(value) {
    if (!isPlainObject(value)) {
      return false;
    }
    switch (value.type) {
      case "insert_node":
        return Path.isPath(value.path) && Node.isNode(value.node);
      case "insert_text":
        return typeof value.offset === "number" && typeof value.text === "string" && Path.isPath(value.path);
      case "merge_node":
        return typeof value.position === "number" && Path.isPath(value.path) && isPlainObject(value.properties);
      case "move_node":
        return Path.isPath(value.path) && Path.isPath(value.newPath);
      case "remove_node":
        return Path.isPath(value.path) && Node.isNode(value.node);
      case "remove_text":
        return typeof value.offset === "number" && typeof value.text === "string" && Path.isPath(value.path);
      case "set_node":
        return Path.isPath(value.path) && isPlainObject(value.properties) && isPlainObject(value.newProperties);
      case "set_selection":
        return value.properties === null && Range.isRange(value.newProperties) || value.newProperties === null && Range.isRange(value.properties) || isPlainObject(value.properties) && isPlainObject(value.newProperties);
      case "split_node":
        return Path.isPath(value.path) && typeof value.position === "number" && isPlainObject(value.properties);
      default:
        return false;
    }
  },
  isOperationList(value) {
    return Array.isArray(value) && value.every((val) => Operation.isOperation(val));
  },
  isSelectionOperation(value) {
    return Operation.isOperation(value) && value.type.endsWith("_selection");
  },
  isTextOperation(value) {
    return Operation.isOperation(value) && value.type.endsWith("_text");
  },
  inverse(op) {
    switch (op.type) {
      case "insert_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "remove_node"
        });
      }
      case "insert_text": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "remove_text"
        });
      }
      case "merge_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "split_node",
          path: Path.previous(op.path)
        });
      }
      case "move_node": {
        var {
          newPath,
          path: path3
        } = op;
        if (Path.equals(newPath, path3)) {
          return op;
        }
        if (Path.isSibling(path3, newPath)) {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            path: newPath,
            newPath: path3
          });
        }
        var inversePath = Path.transform(path3, op);
        var inverseNewPath = Path.transform(Path.next(path3), op);
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          path: inversePath,
          newPath: inverseNewPath
        });
      }
      case "remove_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "insert_node"
        });
      }
      case "remove_text": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "insert_text"
        });
      }
      case "set_node": {
        var {
          properties,
          newProperties
        } = op;
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          properties: newProperties,
          newProperties: properties
        });
      }
      case "set_selection": {
        var {
          properties: _properties,
          newProperties: _newProperties
        } = op;
        if (_properties == null) {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            properties: _newProperties,
            newProperties: null
          });
        } else if (_newProperties == null) {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            properties: null,
            newProperties: _properties
          });
        } else {
          return _objectSpread$c(_objectSpread$c({}, op), {}, {
            properties: _newProperties,
            newProperties: _properties
          });
        }
      }
      case "split_node": {
        return _objectSpread$c(_objectSpread$c({}, op), {}, {
          type: "merge_node",
          path: Path.next(op.path)
        });
      }
    }
  }
};
var IS_EDITOR_CACHE = /* @__PURE__ */ new WeakMap();
var isEditor = (value) => {
  var cachedIsEditor = IS_EDITOR_CACHE.get(value);
  if (cachedIsEditor !== void 0) {
    return cachedIsEditor;
  }
  if (!isPlainObject(value)) {
    return false;
  }
  var isEditor2 = typeof value.addMark === "function" && typeof value.apply === "function" && typeof value.deleteFragment === "function" && typeof value.insertBreak === "function" && typeof value.insertSoftBreak === "function" && typeof value.insertFragment === "function" && typeof value.insertNode === "function" && typeof value.insertText === "function" && typeof value.isElementReadOnly === "function" && typeof value.isInline === "function" && typeof value.isSelectable === "function" && typeof value.isVoid === "function" && typeof value.normalizeNode === "function" && typeof value.onChange === "function" && typeof value.removeMark === "function" && typeof value.getDirtyPaths === "function" && (value.marks === null || isPlainObject(value.marks)) && (value.selection === null || Range.isRange(value.selection)) && Node.isNodeList(value.children) && Operation.isOperationList(value.operations);
  IS_EDITOR_CACHE.set(value, isEditor2);
  return isEditor2;
};
var Editor = {
  above(editor, options) {
    return editor.above(options);
  },
  addMark(editor, key, value) {
    editor.addMark(key, value);
  },
  after(editor, at, options) {
    return editor.after(at, options);
  },
  before(editor, at, options) {
    return editor.before(at, options);
  },
  deleteBackward(editor) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      unit = "character"
    } = options;
    editor.deleteBackward(unit);
  },
  deleteForward(editor) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var {
      unit = "character"
    } = options;
    editor.deleteForward(unit);
  },
  deleteFragment(editor, options) {
    editor.deleteFragment(options);
  },
  edges(editor, at) {
    return editor.edges(at);
  },
  elementReadOnly(editor) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return editor.elementReadOnly(options);
  },
  end(editor, at) {
    return editor.end(at);
  },
  first(editor, at) {
    return editor.first(at);
  },
  fragment(editor, at) {
    return editor.fragment(at);
  },
  hasBlocks(editor, element) {
    return editor.hasBlocks(element);
  },
  hasInlines(editor, element) {
    return editor.hasInlines(element);
  },
  hasPath(editor, path3) {
    return editor.hasPath(path3);
  },
  hasTexts(editor, element) {
    return editor.hasTexts(element);
  },
  insertBreak(editor) {
    editor.insertBreak();
  },
  insertFragment(editor, fragment2, options) {
    editor.insertFragment(fragment2, options);
  },
  insertNode(editor, node3) {
    editor.insertNode(node3);
  },
  insertSoftBreak(editor) {
    editor.insertSoftBreak();
  },
  insertText(editor, text) {
    editor.insertText(text);
  },
  isBlock(editor, value) {
    return editor.isBlock(value);
  },
  isEdge(editor, point3, at) {
    return editor.isEdge(point3, at);
  },
  isEditor(value) {
    return isEditor(value);
  },
  isElementReadOnly(editor, element) {
    return editor.isElementReadOnly(element);
  },
  isEmpty(editor, element) {
    return editor.isEmpty(element);
  },
  isEnd(editor, point3, at) {
    return editor.isEnd(point3, at);
  },
  isInline(editor, value) {
    return editor.isInline(value);
  },
  isNormalizing(editor) {
    return editor.isNormalizing();
  },
  isSelectable(editor, value) {
    return editor.isSelectable(value);
  },
  isStart(editor, point3, at) {
    return editor.isStart(point3, at);
  },
  isVoid(editor, value) {
    return editor.isVoid(value);
  },
  last(editor, at) {
    return editor.last(at);
  },
  leaf(editor, at, options) {
    return editor.leaf(at, options);
  },
  levels(editor, options) {
    return editor.levels(options);
  },
  marks(editor) {
    return editor.getMarks();
  },
  next(editor, options) {
    return editor.next(options);
  },
  node(editor, at, options) {
    return editor.node(at, options);
  },
  nodes(editor, options) {
    return editor.nodes(options);
  },
  normalize(editor, options) {
    editor.normalize(options);
  },
  parent(editor, at, options) {
    return editor.parent(at, options);
  },
  path(editor, at, options) {
    return editor.path(at, options);
  },
  pathRef(editor, path3, options) {
    return editor.pathRef(path3, options);
  },
  pathRefs(editor) {
    return editor.pathRefs();
  },
  point(editor, at, options) {
    return editor.point(at, options);
  },
  pointRef(editor, point3, options) {
    return editor.pointRef(point3, options);
  },
  pointRefs(editor) {
    return editor.pointRefs();
  },
  positions(editor, options) {
    return editor.positions(options);
  },
  previous(editor, options) {
    return editor.previous(options);
  },
  range(editor, at, to) {
    return editor.range(at, to);
  },
  rangeRef(editor, range2, options) {
    return editor.rangeRef(range2, options);
  },
  rangeRefs(editor) {
    return editor.rangeRefs();
  },
  removeMark(editor, key) {
    editor.removeMark(key);
  },
  setNormalizing(editor, isNormalizing2) {
    editor.setNormalizing(isNormalizing2);
  },
  start(editor, at) {
    return editor.start(at);
  },
  string(editor, at, options) {
    return editor.string(at, options);
  },
  unhangRange(editor, range2, options) {
    return editor.unhangRange(range2, options);
  },
  void(editor, options) {
    return editor.void(options);
  },
  withoutNormalizing(editor, fn) {
    editor.withoutNormalizing(fn);
  }
};
var Span = {
  isSpan(value) {
    return Array.isArray(value) && value.length === 2 && value.every(Path.isPath);
  }
};
function ownKeys$b(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$b(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$b(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$b(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Point = {
  compare(point3, another) {
    var result = Path.compare(point3.path, another.path);
    if (result === 0) {
      if (point3.offset < another.offset)
        return -1;
      if (point3.offset > another.offset)
        return 1;
      return 0;
    }
    return result;
  },
  isAfter(point3, another) {
    return Point.compare(point3, another) === 1;
  },
  isBefore(point3, another) {
    return Point.compare(point3, another) === -1;
  },
  equals(point3, another) {
    return point3.offset === another.offset && Path.equals(point3.path, another.path);
  },
  isPoint(value) {
    return isPlainObject(value) && typeof value.offset === "number" && Path.isPath(value.path);
  },
  transform(point3, op) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return produce(point3, (p) => {
      if (p === null) {
        return null;
      }
      var {
        affinity = "forward"
      } = options;
      var {
        path: path3,
        offset
      } = p;
      switch (op.type) {
        case "insert_node":
        case "move_node": {
          p.path = Path.transform(path3, op, options);
          break;
        }
        case "insert_text": {
          if (Path.equals(op.path, path3) && (op.offset < offset || op.offset === offset && affinity === "forward")) {
            p.offset += op.text.length;
          }
          break;
        }
        case "merge_node": {
          if (Path.equals(op.path, path3)) {
            p.offset += op.position;
          }
          p.path = Path.transform(path3, op, options);
          break;
        }
        case "remove_text": {
          if (Path.equals(op.path, path3) && op.offset <= offset) {
            p.offset -= Math.min(offset - op.offset, op.text.length);
          }
          break;
        }
        case "remove_node": {
          if (Path.equals(op.path, path3) || Path.isAncestor(op.path, path3)) {
            return null;
          }
          p.path = Path.transform(path3, op, options);
          break;
        }
        case "split_node": {
          if (Path.equals(op.path, path3)) {
            if (op.position === offset && affinity == null) {
              return null;
            } else if (op.position < offset || op.position === offset && affinity === "forward") {
              p.offset -= op.position;
              p.path = Path.transform(path3, op, _objectSpread$b(_objectSpread$b({}, options), {}, {
                affinity: "forward"
              }));
            }
          } else {
            p.path = Path.transform(path3, op, options);
          }
          break;
        }
      }
    });
  }
};
var _scrubber = void 0;
var Scrubber = {
  setScrubber(scrubber) {
    _scrubber = scrubber;
  },
  stringify(value) {
    return JSON.stringify(value, _scrubber);
  }
};
var _excluded$2 = ["text"];
var _excluded2$2 = ["anchor", "focus"];
function ownKeys$a(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$a(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$a(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$a(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Text = {
  equals(text, another) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    var {
      loose = false
    } = options;
    function omitText(obj) {
      var rest = _objectWithoutProperties(obj, _excluded$2);
      return rest;
    }
    return isDeepEqual(loose ? omitText(text) : text, loose ? omitText(another) : another);
  },
  isText(value) {
    return isPlainObject(value) && typeof value.text === "string";
  },
  isTextList(value) {
    return Array.isArray(value) && value.every((val) => Text.isText(val));
  },
  isTextProps(props) {
    return props.text !== void 0;
  },
  matches(text, props) {
    for (var key in props) {
      if (key === "text") {
        continue;
      }
      if (!text.hasOwnProperty(key) || text[key] !== props[key]) {
        return false;
      }
    }
    return true;
  },
  decorations(node3, decorations) {
    var leaves = [_objectSpread$a({}, node3)];
    for (var dec of decorations) {
      var rest = _objectWithoutProperties(dec, _excluded2$2);
      var [start2, end2] = Range.edges(dec);
      var next3 = [];
      var leafEnd = 0;
      var decorationStart = start2.offset;
      var decorationEnd = end2.offset;
      for (var leaf3 of leaves) {
        var {
          length
        } = leaf3.text;
        var leafStart = leafEnd;
        leafEnd += length;
        if (decorationStart <= leafStart && leafEnd <= decorationEnd) {
          Object.assign(leaf3, rest);
          next3.push(leaf3);
          continue;
        }
        if (decorationStart !== decorationEnd && (decorationStart === leafEnd || decorationEnd === leafStart) || decorationStart > leafEnd || decorationEnd < leafStart || decorationEnd === leafStart && leafStart !== 0) {
          next3.push(leaf3);
          continue;
        }
        var middle = leaf3;
        var before3 = void 0;
        var after3 = void 0;
        if (decorationEnd < leafEnd) {
          var off = decorationEnd - leafStart;
          after3 = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(off)
          });
          middle = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(0, off)
          });
        }
        if (decorationStart > leafStart) {
          var _off = decorationStart - leafStart;
          before3 = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(0, _off)
          });
          middle = _objectSpread$a(_objectSpread$a({}, middle), {}, {
            text: middle.text.slice(_off)
          });
        }
        Object.assign(middle, rest);
        if (before3) {
          next3.push(before3);
        }
        next3.push(middle);
        if (after3) {
          next3.push(after3);
        }
      }
      leaves = next3;
    }
    return leaves;
  }
};
var getDefaultInsertLocation = (editor) => {
  if (editor.selection) {
    return editor.selection;
  } else if (editor.children.length > 0) {
    return Editor.end(editor, []);
  } else {
    return [0];
  }
};
var matchPath = (editor, path3) => {
  var [node3] = Editor.node(editor, path3);
  return (n3) => n3 === node3;
};
var getCharacterDistance = function getCharacterDistance2(str) {
  var isRTL = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
  var isLTR = !isRTL;
  var codepoints = isRTL ? codepointsIteratorRTL(str) : str;
  var left = CodepointType.None;
  var right = CodepointType.None;
  var distance = 0;
  var gb11 = null;
  var gb12Or13 = null;
  for (var char of codepoints) {
    var code = char.codePointAt(0);
    if (!code)
      break;
    var type = getCodepointType(char, code);
    [left, right] = isLTR ? [right, type] : [type, left];
    if (intersects(left, CodepointType.ZWJ) && intersects(right, CodepointType.ExtPict)) {
      if (isLTR) {
        gb11 = endsWithEmojiZWJ(str.substring(0, distance));
      } else {
        gb11 = endsWithEmojiZWJ(str.substring(0, str.length - distance));
      }
      if (!gb11)
        break;
    }
    if (intersects(left, CodepointType.RI) && intersects(right, CodepointType.RI)) {
      if (gb12Or13 !== null) {
        gb12Or13 = !gb12Or13;
      } else {
        if (isLTR) {
          gb12Or13 = true;
        } else {
          gb12Or13 = endsWithOddNumberOfRIs(str.substring(0, str.length - distance));
        }
      }
      if (!gb12Or13)
        break;
    }
    if (left !== CodepointType.None && right !== CodepointType.None && isBoundaryPair(left, right)) {
      break;
    }
    distance += char.length;
  }
  return distance || 1;
};
var SPACE = /\s/;
var PUNCTUATION = /[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;
var CHAMELEON = /['\u2018\u2019]/;
var getWordDistance = function getWordDistance2(text) {
  var isRTL = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
  var dist = 0;
  var started = false;
  while (text.length > 0) {
    var charDist = getCharacterDistance(text, isRTL);
    var [char, remaining] = splitByCharacterDistance(text, charDist, isRTL);
    if (isWordCharacter(char, remaining, isRTL)) {
      started = true;
      dist += charDist;
    } else if (!started) {
      dist += charDist;
    } else {
      break;
    }
    text = remaining;
  }
  return dist;
};
var splitByCharacterDistance = (str, dist, isRTL) => {
  if (isRTL) {
    var at = str.length - dist;
    return [str.slice(at, str.length), str.slice(0, at)];
  }
  return [str.slice(0, dist), str.slice(dist)];
};
var isWordCharacter = function isWordCharacter2(char, remaining) {
  var isRTL = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
  if (SPACE.test(char)) {
    return false;
  }
  if (CHAMELEON.test(char)) {
    var charDist = getCharacterDistance(remaining, isRTL);
    var [nextChar, nextRemaining] = splitByCharacterDistance(remaining, charDist, isRTL);
    if (isWordCharacter2(nextChar, nextRemaining, isRTL)) {
      return true;
    }
  }
  if (PUNCTUATION.test(char)) {
    return false;
  }
  return true;
};
var codepointsIteratorRTL = function* codepointsIteratorRTL2(str) {
  var end2 = str.length - 1;
  for (var i2 = 0; i2 < str.length; i2++) {
    var char1 = str.charAt(end2 - i2);
    if (isLowSurrogate(char1.charCodeAt(0))) {
      var char2 = str.charAt(end2 - i2 - 1);
      if (isHighSurrogate(char2.charCodeAt(0))) {
        yield char2 + char1;
        i2++;
        continue;
      }
    }
    yield char1;
  }
};
var isHighSurrogate = (charCode) => {
  return charCode >= 55296 && charCode <= 56319;
};
var isLowSurrogate = (charCode) => {
  return charCode >= 56320 && charCode <= 57343;
};
var CodepointType;
(function(CodepointType2) {
  CodepointType2[CodepointType2["None"] = 0] = "None";
  CodepointType2[CodepointType2["Extend"] = 1] = "Extend";
  CodepointType2[CodepointType2["ZWJ"] = 2] = "ZWJ";
  CodepointType2[CodepointType2["RI"] = 4] = "RI";
  CodepointType2[CodepointType2["Prepend"] = 8] = "Prepend";
  CodepointType2[CodepointType2["SpacingMark"] = 16] = "SpacingMark";
  CodepointType2[CodepointType2["L"] = 32] = "L";
  CodepointType2[CodepointType2["V"] = 64] = "V";
  CodepointType2[CodepointType2["T"] = 128] = "T";
  CodepointType2[CodepointType2["LV"] = 256] = "LV";
  CodepointType2[CodepointType2["LVT"] = 512] = "LVT";
  CodepointType2[CodepointType2["ExtPict"] = 1024] = "ExtPict";
  CodepointType2[CodepointType2["Any"] = 2048] = "Any";
})(CodepointType || (CodepointType = {}));
var reExtend = /^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/;
var rePrepend = /^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/;
var reSpacingMark = /^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/;
var reL = /^[\u1100-\u115F\uA960-\uA97C]$/;
var reV = /^[\u1160-\u11A7\uD7B0-\uD7C6]$/;
var reT = /^[\u11A8-\u11FF\uD7CB-\uD7FB]$/;
var reLV = /^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/;
var reLVT = /^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/;
var reExtPict = /^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/;
var getCodepointType = (char, code) => {
  var type = CodepointType.Any;
  if (char.search(reExtend) !== -1) {
    type |= CodepointType.Extend;
  }
  if (code === 8205) {
    type |= CodepointType.ZWJ;
  }
  if (code >= 127462 && code <= 127487) {
    type |= CodepointType.RI;
  }
  if (char.search(rePrepend) !== -1) {
    type |= CodepointType.Prepend;
  }
  if (char.search(reSpacingMark) !== -1) {
    type |= CodepointType.SpacingMark;
  }
  if (char.search(reL) !== -1) {
    type |= CodepointType.L;
  }
  if (char.search(reV) !== -1) {
    type |= CodepointType.V;
  }
  if (char.search(reT) !== -1) {
    type |= CodepointType.T;
  }
  if (char.search(reLV) !== -1) {
    type |= CodepointType.LV;
  }
  if (char.search(reLVT) !== -1) {
    type |= CodepointType.LVT;
  }
  if (char.search(reExtPict) !== -1) {
    type |= CodepointType.ExtPict;
  }
  return type;
};
function intersects(x, y) {
  return (x & y) !== 0;
}
var NonBoundaryPairs = [
  // GB6
  [CodepointType.L, CodepointType.L | CodepointType.V | CodepointType.LV | CodepointType.LVT],
  // GB7
  [CodepointType.LV | CodepointType.V, CodepointType.V | CodepointType.T],
  // GB8
  [CodepointType.LVT | CodepointType.T, CodepointType.T],
  // GB9
  [CodepointType.Any, CodepointType.Extend | CodepointType.ZWJ],
  // GB9a
  [CodepointType.Any, CodepointType.SpacingMark],
  // GB9b
  [CodepointType.Prepend, CodepointType.Any],
  // GB11
  [CodepointType.ZWJ, CodepointType.ExtPict],
  // GB12 and GB13
  [CodepointType.RI, CodepointType.RI]
];
function isBoundaryPair(left, right) {
  return NonBoundaryPairs.findIndex((r2) => intersects(left, r2[0]) && intersects(right, r2[1])) === -1;
}
var endingEmojiZWJ = /(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/;
var endsWithEmojiZWJ = (str) => {
  return str.search(endingEmojiZWJ) !== -1;
};
var endingRIs = /(?:\uD83C[\uDDE6-\uDDFF])+$/g;
var endsWithOddNumberOfRIs = (str) => {
  var match = str.match(endingRIs);
  if (match === null) {
    return false;
  } else {
    var numRIs = match[0].length / 2;
    return numRIs % 2 === 1;
  }
};
var TextTransforms = {
  delete(editor, options) {
    editor.delete(options);
  },
  insertFragment(editor, fragment2, options) {
    editor.insertFragment(fragment2, options);
  },
  insertText(editor, text) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    Editor.withoutNormalizing(editor, () => {
      var {
        voids = false
      } = options;
      var {
        at = getDefaultInsertLocation(editor)
      } = options;
      if (Path.isPath(at)) {
        at = Editor.range(editor, at);
      }
      if (Range.isRange(at)) {
        if (Range.isCollapsed(at)) {
          at = at.anchor;
        } else {
          var end2 = Range.end(at);
          if (!voids && Editor.void(editor, {
            at: end2
          })) {
            return;
          }
          var start2 = Range.start(at);
          var startRef = Editor.pointRef(editor, start2);
          var endRef = Editor.pointRef(editor, end2);
          Transforms.delete(editor, {
            at,
            voids
          });
          var startPoint = startRef.unref();
          var endPoint = endRef.unref();
          at = startPoint || endPoint;
          Transforms.setSelection(editor, {
            anchor: at,
            focus: at
          });
        }
      }
      if (!voids && Editor.void(editor, {
        at
      }) || Editor.elementReadOnly(editor, {
        at
      })) {
        return;
      }
      var {
        path: path3,
        offset
      } = at;
      if (text.length > 0)
        editor.apply({
          type: "insert_text",
          path: path3,
          offset,
          text
        });
    });
  }
};
function ownKeys$9(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$9(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$9(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$9(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var Transforms = _objectSpread$9(_objectSpread$9(_objectSpread$9(_objectSpread$9({}, GeneralTransforms), NodeTransforms), SelectionTransforms), TextTransforms);
var apply = (editor, op) => {
  for (var ref of Editor.pathRefs(editor)) {
    PathRef.transform(ref, op);
  }
  for (var _ref of Editor.pointRefs(editor)) {
    PointRef.transform(_ref, op);
  }
  for (var _ref2 of Editor.rangeRefs(editor)) {
    RangeRef.transform(_ref2, op);
  }
  var oldDirtyPaths = DIRTY_PATHS.get(editor) || [];
  var oldDirtyPathKeys = DIRTY_PATH_KEYS.get(editor) || /* @__PURE__ */ new Set();
  var dirtyPaths;
  var dirtyPathKeys;
  var add = (path4) => {
    if (path4) {
      var key = path4.join(",");
      if (!dirtyPathKeys.has(key)) {
        dirtyPathKeys.add(key);
        dirtyPaths.push(path4);
      }
    }
  };
  if (Path.operationCanTransformPath(op)) {
    dirtyPaths = [];
    dirtyPathKeys = /* @__PURE__ */ new Set();
    for (var path3 of oldDirtyPaths) {
      var newPath = Path.transform(path3, op);
      add(newPath);
    }
  } else {
    dirtyPaths = oldDirtyPaths;
    dirtyPathKeys = oldDirtyPathKeys;
  }
  var newDirtyPaths = editor.getDirtyPaths(op);
  for (var _path of newDirtyPaths) {
    add(_path);
  }
  DIRTY_PATHS.set(editor, dirtyPaths);
  DIRTY_PATH_KEYS.set(editor, dirtyPathKeys);
  Transforms.transform(editor, op);
  editor.operations.push(op);
  Editor.normalize(editor, {
    operation: op
  });
  if (op.type === "set_selection") {
    editor.marks = null;
  }
  if (!FLUSHING.get(editor)) {
    FLUSHING.set(editor, true);
    Promise.resolve().then(() => {
      FLUSHING.set(editor, false);
      editor.onChange({
        operation: op
      });
      editor.operations = [];
    });
  }
};
var getDirtyPaths = (editor, op) => {
  switch (op.type) {
    case "insert_text":
    case "remove_text":
    case "set_node": {
      var {
        path: path3
      } = op;
      return Path.levels(path3);
    }
    case "insert_node": {
      var {
        node: node3,
        path: _path
      } = op;
      var levels2 = Path.levels(_path);
      var descendants = Text.isText(node3) ? [] : Array.from(Node.nodes(node3), (_ref) => {
        var [, p2] = _ref;
        return _path.concat(p2);
      });
      return [...levels2, ...descendants];
    }
    case "merge_node": {
      var {
        path: _path2
      } = op;
      var ancestors = Path.ancestors(_path2);
      var previousPath = Path.previous(_path2);
      return [...ancestors, previousPath];
    }
    case "move_node": {
      var {
        path: _path3,
        newPath
      } = op;
      if (Path.equals(_path3, newPath)) {
        return [];
      }
      var oldAncestors = [];
      var newAncestors = [];
      for (var ancestor of Path.ancestors(_path3)) {
        var p = Path.transform(ancestor, op);
        oldAncestors.push(p);
      }
      for (var _ancestor of Path.ancestors(newPath)) {
        var _p = Path.transform(_ancestor, op);
        newAncestors.push(_p);
      }
      var newParent = newAncestors[newAncestors.length - 1];
      var newIndex = newPath[newPath.length - 1];
      var resultPath = newParent.concat(newIndex);
      return [...oldAncestors, ...newAncestors, resultPath];
    }
    case "remove_node": {
      var {
        path: _path4
      } = op;
      var _ancestors = Path.ancestors(_path4);
      return [..._ancestors];
    }
    case "split_node": {
      var {
        path: _path5
      } = op;
      var _levels = Path.levels(_path5);
      var nextPath = Path.next(_path5);
      return [..._levels, nextPath];
    }
    default: {
      return [];
    }
  }
};
var getFragment = (editor) => {
  var {
    selection
  } = editor;
  if (selection) {
    return Node.fragment(editor, selection);
  }
  return [];
};
var normalizeNode = (editor, entry) => {
  var [node3, path3] = entry;
  if (Text.isText(node3)) {
    return;
  }
  if (Element2.isElement(node3) && node3.children.length === 0) {
    var child = {
      text: ""
    };
    Transforms.insertNodes(editor, child, {
      at: path3.concat(0),
      voids: true
    });
    return;
  }
  var shouldHaveInlines = Editor.isEditor(node3) ? false : Element2.isElement(node3) && (editor.isInline(node3) || node3.children.length === 0 || Text.isText(node3.children[0]) || editor.isInline(node3.children[0]));
  var n3 = 0;
  for (var i2 = 0; i2 < node3.children.length; i2++, n3++) {
    var currentNode = Node.get(editor, path3);
    if (Text.isText(currentNode))
      continue;
    var _child = currentNode.children[n3];
    var prev = currentNode.children[n3 - 1];
    var isLast = i2 === node3.children.length - 1;
    var isInlineOrText = Text.isText(_child) || Element2.isElement(_child) && editor.isInline(_child);
    if (isInlineOrText !== shouldHaveInlines) {
      Transforms.removeNodes(editor, {
        at: path3.concat(n3),
        voids: true
      });
      n3--;
    } else if (Element2.isElement(_child)) {
      if (editor.isInline(_child)) {
        if (prev == null || !Text.isText(prev)) {
          var newChild = {
            text: ""
          };
          Transforms.insertNodes(editor, newChild, {
            at: path3.concat(n3),
            voids: true
          });
          n3++;
        } else if (isLast) {
          var _newChild = {
            text: ""
          };
          Transforms.insertNodes(editor, _newChild, {
            at: path3.concat(n3 + 1),
            voids: true
          });
          n3++;
        }
      }
    } else {
      if (prev != null && Text.isText(prev)) {
        if (Text.equals(_child, prev, {
          loose: true
        })) {
          Transforms.mergeNodes(editor, {
            at: path3.concat(n3),
            voids: true
          });
          n3--;
        } else if (prev.text === "") {
          Transforms.removeNodes(editor, {
            at: path3.concat(n3 - 1),
            voids: true
          });
          n3--;
        } else if (_child.text === "") {
          Transforms.removeNodes(editor, {
            at: path3.concat(n3),
            voids: true
          });
          n3--;
        }
      }
    }
  }
};
var shouldNormalize = (editor, _ref) => {
  var {
    iteration,
    initialDirtyPathsLength
  } = _ref;
  var maxIterations = initialDirtyPathsLength * 42;
  if (iteration > maxIterations) {
    throw new Error("Could not completely normalize the editor after ".concat(maxIterations, " iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));
  }
  return true;
};
var above = function above2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    voids = false,
    mode = "lowest",
    at = editor.selection,
    match
  } = options;
  if (!at) {
    return;
  }
  var path3 = Editor.path(editor, at);
  var reverse = mode === "lowest";
  for (var [n3, p] of Editor.levels(editor, {
    at: path3,
    voids,
    match,
    reverse
  })) {
    if (Text.isText(n3))
      continue;
    if (Range.isRange(at)) {
      if (Path.isAncestor(p, at.anchor.path) && Path.isAncestor(p, at.focus.path)) {
        return [n3, p];
      }
    } else {
      if (!Path.equals(path3, p)) {
        return [n3, p];
      }
    }
  }
};
function ownKeys$8(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$8(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$8(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$8(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var addMark = (editor, key, value) => {
  var {
    selection
  } = editor;
  if (selection) {
    var match = (node3, path3) => {
      if (!Text.isText(node3)) {
        return false;
      }
      var [parentNode2, parentPath] = Editor.parent(editor, path3);
      return !editor.isVoid(parentNode2) || editor.markableVoid(parentNode2);
    };
    var expandedSelection = Range.isExpanded(selection);
    var markAcceptingVoidSelected = false;
    if (!expandedSelection) {
      var [selectedNode, selectedPath] = Editor.node(editor, selection);
      if (selectedNode && match(selectedNode, selectedPath)) {
        var [parentNode] = Editor.parent(editor, selectedPath);
        markAcceptingVoidSelected = parentNode && editor.markableVoid(parentNode);
      }
    }
    if (expandedSelection || markAcceptingVoidSelected) {
      Transforms.setNodes(editor, {
        [key]: value
      }, {
        match,
        split: true,
        voids: true
      });
    } else {
      var marks3 = _objectSpread$8(_objectSpread$8({}, Editor.marks(editor) || {}), {}, {
        [key]: value
      });
      editor.marks = marks3;
      if (!FLUSHING.get(editor)) {
        editor.onChange();
      }
    }
  }
};
function ownKeys$7(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$7(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$7(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$7(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var after = function after2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var anchor = Editor.point(editor, at, {
    edge: "end"
  });
  var focus = Editor.end(editor, []);
  var range2 = {
    anchor,
    focus
  };
  var {
    distance = 1
  } = options;
  var d = 0;
  var target;
  for (var p of Editor.positions(editor, _objectSpread$7(_objectSpread$7({}, options), {}, {
    at: range2
  }))) {
    if (d > distance) {
      break;
    }
    if (d !== 0) {
      target = p;
    }
    d++;
  }
  return target;
};
function ownKeys$6(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$6(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$6(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$6(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var before = function before2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var anchor = Editor.start(editor, []);
  var focus = Editor.point(editor, at, {
    edge: "start"
  });
  var range2 = {
    anchor,
    focus
  };
  var {
    distance = 1
  } = options;
  var d = 0;
  var target;
  for (var p of Editor.positions(editor, _objectSpread$6(_objectSpread$6({}, options), {}, {
    at: range2,
    reverse: true
  }))) {
    if (d > distance) {
      break;
    }
    if (d !== 0) {
      target = p;
    }
    d++;
  }
  return target;
};
var deleteBackward = (editor, unit) => {
  var {
    selection
  } = editor;
  if (selection && Range.isCollapsed(selection)) {
    Transforms.delete(editor, {
      unit,
      reverse: true
    });
  }
};
var deleteForward = (editor, unit) => {
  var {
    selection
  } = editor;
  if (selection && Range.isCollapsed(selection)) {
    Transforms.delete(editor, {
      unit
    });
  }
};
var deleteFragment = function deleteFragment2(editor) {
  var {
    direction = "forward"
  } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    selection
  } = editor;
  if (selection && Range.isExpanded(selection)) {
    Transforms.delete(editor, {
      reverse: direction === "backward"
    });
  }
};
var edges = (editor, at) => {
  return [Editor.start(editor, at), Editor.end(editor, at)];
};
function ownKeys$5(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$5(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$5(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$5(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var elementReadOnly = function elementReadOnly2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return Editor.above(editor, _objectSpread$5(_objectSpread$5({}, options), {}, {
    match: (n3) => Element2.isElement(n3) && Editor.isElementReadOnly(editor, n3)
  }));
};
var end = (editor, at) => {
  return Editor.point(editor, at, {
    edge: "end"
  });
};
var first = (editor, at) => {
  var path3 = Editor.path(editor, at, {
    edge: "start"
  });
  return Editor.node(editor, path3);
};
var fragment = (editor, at) => {
  var range2 = Editor.range(editor, at);
  return Node.fragment(editor, range2);
};
function ownKeys$4(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$4(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$4(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$4(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var getVoid = function getVoid2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return Editor.above(editor, _objectSpread$4(_objectSpread$4({}, options), {}, {
    match: (n3) => Element2.isElement(n3) && Editor.isVoid(editor, n3)
  }));
};
var hasBlocks = (editor, element) => {
  return element.children.some((n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3));
};
var hasInlines = (editor, element) => {
  return element.children.some((n3) => Text.isText(n3) || Editor.isInline(editor, n3));
};
var hasPath = (editor, path3) => {
  return Node.has(editor, path3);
};
var hasTexts = (editor, element) => {
  return element.children.every((n3) => Text.isText(n3));
};
var insertBreak = (editor) => {
  Transforms.splitNodes(editor, {
    always: true
  });
};
var insertNode = (editor, node3, options) => {
  Transforms.insertNodes(editor, node3, options);
};
var insertSoftBreak = (editor) => {
  Transforms.splitNodes(editor, {
    always: true
  });
};
function ownKeys$3(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$3(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$3(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$3(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var insertText = function insertText2(editor, text) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    selection,
    marks: marks3
  } = editor;
  if (selection) {
    if (marks3) {
      var node3 = _objectSpread$3({
        text
      }, marks3);
      Transforms.insertNodes(editor, node3, {
        at: options.at,
        voids: options.voids
      });
    } else {
      Transforms.insertText(editor, text, options);
    }
    editor.marks = null;
  }
};
var isBlock2 = (editor, value) => {
  return !editor.isInline(value);
};
var isEdge = (editor, point3, at) => {
  return Editor.isStart(editor, point3, at) || Editor.isEnd(editor, point3, at);
};
var isEmpty = (editor, element) => {
  var {
    children
  } = element;
  var [first2] = children;
  return children.length === 0 || children.length === 1 && Text.isText(first2) && first2.text === "" && !editor.isVoid(element);
};
var isEnd = (editor, point3, at) => {
  var end2 = Editor.end(editor, at);
  return Point.equals(point3, end2);
};
var isNormalizing = (editor) => {
  var isNormalizing2 = NORMALIZING.get(editor);
  return isNormalizing2 === void 0 ? true : isNormalizing2;
};
var isStart = (editor, point3, at) => {
  if (point3.offset !== 0) {
    return false;
  }
  var start2 = Editor.start(editor, at);
  return Point.equals(point3, start2);
};
var last = (editor, at) => {
  var path3 = Editor.path(editor, at, {
    edge: "end"
  });
  return Editor.node(editor, path3);
};
var leaf = function leaf2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var path3 = Editor.path(editor, at, options);
  var node3 = Node.leaf(editor, path3);
  return [node3, path3];
};
function levels(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return function* () {
    var {
      at = editor.selection,
      reverse = false,
      voids = false
    } = options;
    var {
      match
    } = options;
    if (match == null) {
      match = () => true;
    }
    if (!at) {
      return;
    }
    var levels2 = [];
    var path3 = Editor.path(editor, at);
    for (var [n3, p] of Node.levels(editor, path3)) {
      if (!match(n3, p)) {
        continue;
      }
      levels2.push([n3, p]);
      if (!voids && Element2.isElement(n3) && Editor.isVoid(editor, n3)) {
        break;
      }
    }
    if (reverse) {
      levels2.reverse();
    }
    yield* __yieldStar(levels2);
  }();
}
var _excluded$1 = ["text"];
var _excluded2$1 = ["text"];
var marks = function marks2(editor) {
  var {
    marks: marks3,
    selection
  } = editor;
  if (!selection) {
    return null;
  }
  var {
    anchor,
    focus
  } = selection;
  if (marks3) {
    return marks3;
  }
  if (Range.isExpanded(selection)) {
    var isEnd2 = Editor.isEnd(editor, anchor, anchor.path);
    if (isEnd2) {
      var after3 = Editor.after(editor, anchor);
      if (after3) {
        anchor = after3;
      }
    }
    var [match] = Editor.nodes(editor, {
      match: Text.isText,
      at: {
        anchor,
        focus
      }
    });
    if (match) {
      var [_node] = match;
      var _rest = _objectWithoutProperties(_node, _excluded$1);
      return _rest;
    } else {
      return {};
    }
  }
  var {
    path: path3
  } = anchor;
  var [node3] = Editor.leaf(editor, path3);
  if (anchor.offset === 0) {
    var prev = Editor.previous(editor, {
      at: path3,
      match: Text.isText
    });
    var markedVoid = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isVoid(editor, n3) && editor.markableVoid(n3)
    });
    if (!markedVoid) {
      var block = Editor.above(editor, {
        match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3)
      });
      if (prev && block) {
        var [prevNode, prevPath] = prev;
        var [, blockPath] = block;
        if (Path.isAncestor(blockPath, prevPath)) {
          node3 = prevNode;
        }
      }
    }
  }
  var rest = _objectWithoutProperties(node3, _excluded2$1);
  return rest;
};
var next = function next2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    mode = "lowest",
    voids = false
  } = options;
  var {
    match,
    at = editor.selection
  } = options;
  if (!at) {
    return;
  }
  var pointAfterLocation = Editor.after(editor, at, {
    voids
  });
  if (!pointAfterLocation)
    return;
  var [, to] = Editor.last(editor, []);
  var span = [pointAfterLocation.path, to];
  if (Path.isPath(at) && at.length === 0) {
    throw new Error("Cannot get the next node from the root node!");
  }
  if (match == null) {
    if (Path.isPath(at)) {
      var [parent3] = Editor.parent(editor, at);
      match = (n3) => parent3.children.includes(n3);
    } else {
      match = () => true;
    }
  }
  var [next3] = Editor.nodes(editor, {
    at: span,
    match,
    mode,
    voids
  });
  return next3;
};
var node = function node2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var path3 = Editor.path(editor, at, options);
  var node3 = Node.get(editor, path3);
  return [node3, path3];
};
function nodes(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return function* () {
    var {
      at = editor.selection,
      mode = "all",
      universal = false,
      reverse = false,
      voids = false,
      ignoreNonSelectable = false
    } = options;
    var {
      match
    } = options;
    if (!match) {
      match = () => true;
    }
    if (!at) {
      return;
    }
    var from;
    var to;
    if (Span.isSpan(at)) {
      from = at[0];
      to = at[1];
    } else {
      var first2 = Editor.path(editor, at, {
        edge: "start"
      });
      var last2 = Editor.path(editor, at, {
        edge: "end"
      });
      from = reverse ? last2 : first2;
      to = reverse ? first2 : last2;
    }
    var nodeEntries = Node.nodes(editor, {
      reverse,
      from,
      to,
      pass: (_ref) => {
        var [node4] = _ref;
        if (!Element2.isElement(node4))
          return false;
        if (!voids && (Editor.isVoid(editor, node4) || Editor.isElementReadOnly(editor, node4)))
          return true;
        if (ignoreNonSelectable && !Editor.isSelectable(editor, node4))
          return true;
        return false;
      }
    });
    var matches = [];
    var hit;
    for (var [node3, path3] of nodeEntries) {
      if (ignoreNonSelectable && Element2.isElement(node3) && !Editor.isSelectable(editor, node3)) {
        continue;
      }
      var isLower = hit && Path.compare(path3, hit[1]) === 0;
      if (mode === "highest" && isLower) {
        continue;
      }
      if (!match(node3, path3)) {
        if (universal && !isLower && Text.isText(node3)) {
          return;
        } else {
          continue;
        }
      }
      if (mode === "lowest" && isLower) {
        hit = [node3, path3];
        continue;
      }
      var emit = mode === "lowest" ? hit : [node3, path3];
      if (emit) {
        if (universal) {
          matches.push(emit);
        } else {
          yield emit;
        }
      }
      hit = [node3, path3];
    }
    if (mode === "lowest" && hit) {
      if (universal) {
        matches.push(hit);
      } else {
        yield hit;
      }
    }
    if (universal) {
      yield* __yieldStar(matches);
    }
  }();
}
var normalize = function normalize2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    force = false,
    operation
  } = options;
  var getDirtyPaths2 = (editor2) => {
    return DIRTY_PATHS.get(editor2) || [];
  };
  var getDirtyPathKeys = (editor2) => {
    return DIRTY_PATH_KEYS.get(editor2) || /* @__PURE__ */ new Set();
  };
  var popDirtyPath = (editor2) => {
    var path3 = getDirtyPaths2(editor2).pop();
    var key = path3.join(",");
    getDirtyPathKeys(editor2).delete(key);
    return path3;
  };
  if (!Editor.isNormalizing(editor)) {
    return;
  }
  if (force) {
    var allPaths = Array.from(Node.nodes(editor), (_ref) => {
      var [, p] = _ref;
      return p;
    });
    var allPathKeys = new Set(allPaths.map((p) => p.join(",")));
    DIRTY_PATHS.set(editor, allPaths);
    DIRTY_PATH_KEYS.set(editor, allPathKeys);
  }
  if (getDirtyPaths2(editor).length === 0) {
    return;
  }
  Editor.withoutNormalizing(editor, () => {
    for (var dirtyPath of getDirtyPaths2(editor)) {
      if (Node.has(editor, dirtyPath)) {
        var entry = Editor.node(editor, dirtyPath);
        var [node3, _] = entry;
        if (Element2.isElement(node3) && node3.children.length === 0) {
          editor.normalizeNode(entry, {
            operation
          });
        }
      }
    }
    var dirtyPaths = getDirtyPaths2(editor);
    var initialDirtyPathsLength = dirtyPaths.length;
    var iteration = 0;
    while (dirtyPaths.length !== 0) {
      if (!editor.shouldNormalize({
        dirtyPaths,
        iteration,
        initialDirtyPathsLength,
        operation
      })) {
        return;
      }
      var _dirtyPath = popDirtyPath(editor);
      if (Node.has(editor, _dirtyPath)) {
        var _entry = Editor.node(editor, _dirtyPath);
        editor.normalizeNode(_entry, {
          operation
        });
      }
      iteration++;
      dirtyPaths = getDirtyPaths2(editor);
    }
  });
};
var parent = function parent2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var path3 = Editor.path(editor, at, options);
  var parentPath = Path.parent(path3);
  var entry = Editor.node(editor, parentPath);
  return entry;
};
var pathRef = function pathRef2(editor, path3) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    affinity = "forward"
  } = options;
  var ref = {
    current: path3,
    affinity,
    unref() {
      var {
        current: current2
      } = ref;
      var pathRefs2 = Editor.pathRefs(editor);
      pathRefs2.delete(ref);
      ref.current = null;
      return current2;
    }
  };
  var refs = Editor.pathRefs(editor);
  refs.add(ref);
  return ref;
};
var pathRefs = (editor) => {
  var refs = PATH_REFS.get(editor);
  if (!refs) {
    refs = /* @__PURE__ */ new Set();
    PATH_REFS.set(editor, refs);
  }
  return refs;
};
var path = function path2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    depth,
    edge
  } = options;
  if (Path.isPath(at)) {
    if (edge === "start") {
      var [, firstPath] = Node.first(editor, at);
      at = firstPath;
    } else if (edge === "end") {
      var [, lastPath] = Node.last(editor, at);
      at = lastPath;
    }
  }
  if (Range.isRange(at)) {
    if (edge === "start") {
      at = Range.start(at);
    } else if (edge === "end") {
      at = Range.end(at);
    } else {
      at = Path.common(at.anchor.path, at.focus.path);
    }
  }
  if (Point.isPoint(at)) {
    at = at.path;
  }
  if (depth != null) {
    at = at.slice(0, depth);
  }
  return at;
};
var pointRef = function pointRef2(editor, point3) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    affinity = "forward"
  } = options;
  var ref = {
    current: point3,
    affinity,
    unref() {
      var {
        current: current2
      } = ref;
      var pointRefs2 = Editor.pointRefs(editor);
      pointRefs2.delete(ref);
      ref.current = null;
      return current2;
    }
  };
  var refs = Editor.pointRefs(editor);
  refs.add(ref);
  return ref;
};
var pointRefs = (editor) => {
  var refs = POINT_REFS.get(editor);
  if (!refs) {
    refs = /* @__PURE__ */ new Set();
    POINT_REFS.set(editor, refs);
  }
  return refs;
};
var point = function point2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    edge = "start"
  } = options;
  if (Path.isPath(at)) {
    var path3;
    if (edge === "end") {
      var [, lastPath] = Node.last(editor, at);
      path3 = lastPath;
    } else {
      var [, firstPath] = Node.first(editor, at);
      path3 = firstPath;
    }
    var node3 = Node.get(editor, path3);
    if (!Text.isText(node3)) {
      throw new Error("Cannot get the ".concat(edge, " point in the node at path [").concat(at, "] because it has no ").concat(edge, " text node."));
    }
    return {
      path: path3,
      offset: edge === "end" ? node3.text.length : 0
    };
  }
  if (Range.isRange(at)) {
    var [start2, end2] = Range.edges(at);
    return edge === "start" ? start2 : end2;
  }
  return at;
};
function positions(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  return function* () {
    var {
      at = editor.selection,
      unit = "offset",
      reverse = false,
      voids = false,
      ignoreNonSelectable = false
    } = options;
    if (!at) {
      return;
    }
    var range2 = Editor.range(editor, at);
    var [start2, end2] = Range.edges(range2);
    var first2 = reverse ? end2 : start2;
    var isNewBlock = false;
    var blockText = "";
    var distance = 0;
    var leafTextRemaining = 0;
    var leafTextOffset = 0;
    for (var [node3, path3] of Editor.nodes(editor, {
      at,
      reverse,
      voids,
      ignoreNonSelectable
    })) {
      if (Element2.isElement(node3)) {
        if (!voids && (editor.isVoid(node3) || editor.isElementReadOnly(node3))) {
          yield Editor.start(editor, path3);
          continue;
        }
        if (editor.isInline(node3))
          continue;
        if (Editor.hasInlines(editor, node3)) {
          var e2 = Path.isAncestor(path3, end2.path) ? end2 : Editor.end(editor, path3);
          var s = Path.isAncestor(path3, start2.path) ? start2 : Editor.start(editor, path3);
          blockText = Editor.string(editor, {
            anchor: s,
            focus: e2
          }, {
            voids
          });
          isNewBlock = true;
        }
      }
      if (Text.isText(node3)) {
        var isFirst = Path.equals(path3, first2.path);
        if (isFirst) {
          leafTextRemaining = reverse ? first2.offset : node3.text.length - first2.offset;
          leafTextOffset = first2.offset;
        } else {
          leafTextRemaining = node3.text.length;
          leafTextOffset = reverse ? leafTextRemaining : 0;
        }
        if (isFirst || isNewBlock || unit === "offset") {
          yield {
            path: path3,
            offset: leafTextOffset
          };
          isNewBlock = false;
        }
        while (true) {
          if (distance === 0) {
            if (blockText === "")
              break;
            distance = calcDistance(blockText, unit, reverse);
            blockText = splitByCharacterDistance(blockText, distance, reverse)[1];
          }
          leafTextOffset = reverse ? leafTextOffset - distance : leafTextOffset + distance;
          leafTextRemaining = leafTextRemaining - distance;
          if (leafTextRemaining < 0) {
            distance = -leafTextRemaining;
            break;
          }
          distance = 0;
          yield {
            path: path3,
            offset: leafTextOffset
          };
        }
      }
    }
    function calcDistance(text, unit2, reverse2) {
      if (unit2 === "character") {
        return getCharacterDistance(text, reverse2);
      } else if (unit2 === "word") {
        return getWordDistance(text, reverse2);
      } else if (unit2 === "line" || unit2 === "block") {
        return text.length;
      }
      return 1;
    }
  }();
}
var previous = function previous2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    mode = "lowest",
    voids = false
  } = options;
  var {
    match,
    at = editor.selection
  } = options;
  if (!at) {
    return;
  }
  var pointBeforeLocation = Editor.before(editor, at, {
    voids
  });
  if (!pointBeforeLocation) {
    return;
  }
  var [, to] = Editor.first(editor, []);
  var span = [pointBeforeLocation.path, to];
  if (Path.isPath(at) && at.length === 0) {
    throw new Error("Cannot get the previous node from the root node!");
  }
  if (match == null) {
    if (Path.isPath(at)) {
      var [parent3] = Editor.parent(editor, at);
      match = (n3) => parent3.children.includes(n3);
    } else {
      match = () => true;
    }
  }
  var [previous3] = Editor.nodes(editor, {
    reverse: true,
    at: span,
    match,
    mode,
    voids
  });
  return previous3;
};
var rangeRef = function rangeRef2(editor, range2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    affinity = "forward"
  } = options;
  var ref = {
    current: range2,
    affinity,
    unref() {
      var {
        current: current2
      } = ref;
      var rangeRefs2 = Editor.rangeRefs(editor);
      rangeRefs2.delete(ref);
      ref.current = null;
      return current2;
    }
  };
  var refs = Editor.rangeRefs(editor);
  refs.add(ref);
  return ref;
};
var rangeRefs = (editor) => {
  var refs = RANGE_REFS.get(editor);
  if (!refs) {
    refs = /* @__PURE__ */ new Set();
    RANGE_REFS.set(editor, refs);
  }
  return refs;
};
var range = (editor, at, to) => {
  if (Range.isRange(at) && !to) {
    return at;
  }
  var start2 = Editor.start(editor, at);
  var end2 = Editor.end(editor, to || at);
  return {
    anchor: start2,
    focus: end2
  };
};
function ownKeys$2(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$2(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$2(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$2(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var removeMark = (editor, key) => {
  var {
    selection
  } = editor;
  if (selection) {
    var match = (node3, path3) => {
      if (!Text.isText(node3)) {
        return false;
      }
      var [parentNode2, parentPath] = Editor.parent(editor, path3);
      return !editor.isVoid(parentNode2) || editor.markableVoid(parentNode2);
    };
    var expandedSelection = Range.isExpanded(selection);
    var markAcceptingVoidSelected = false;
    if (!expandedSelection) {
      var [selectedNode, selectedPath] = Editor.node(editor, selection);
      if (selectedNode && match(selectedNode, selectedPath)) {
        var [parentNode] = Editor.parent(editor, selectedPath);
        markAcceptingVoidSelected = parentNode && editor.markableVoid(parentNode);
      }
    }
    if (expandedSelection || markAcceptingVoidSelected) {
      Transforms.unsetNodes(editor, key, {
        match,
        split: true,
        voids: true
      });
    } else {
      var marks3 = _objectSpread$2({}, Editor.marks(editor) || {});
      delete marks3[key];
      editor.marks = marks3;
      if (!FLUSHING.get(editor)) {
        editor.onChange();
      }
    }
  }
};
var setNormalizing = (editor, isNormalizing2) => {
  NORMALIZING.set(editor, isNormalizing2);
};
var start = (editor, at) => {
  return Editor.point(editor, at, {
    edge: "start"
  });
};
var string = function string2(editor, at) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    voids = false
  } = options;
  var range2 = Editor.range(editor, at);
  var [start2, end2] = Range.edges(range2);
  var text = "";
  for (var [node3, path3] of Editor.nodes(editor, {
    at: range2,
    match: Text.isText,
    voids
  })) {
    var t2 = node3.text;
    if (Path.equals(path3, end2.path)) {
      t2 = t2.slice(0, end2.offset);
    }
    if (Path.equals(path3, start2.path)) {
      t2 = t2.slice(start2.offset);
    }
    text += t2;
  }
  return text;
};
var unhangRange = function unhangRange2(editor, range2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    voids = false
  } = options;
  var [start2, end2] = Range.edges(range2);
  if (start2.offset !== 0 || end2.offset !== 0 || Range.isCollapsed(range2) || Path.hasPrevious(end2.path)) {
    return range2;
  }
  var endBlock = Editor.above(editor, {
    at: end2,
    match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
    voids
  });
  var blockPath = endBlock ? endBlock[1] : [];
  var first2 = Editor.start(editor, start2);
  var before3 = {
    anchor: first2,
    focus: end2
  };
  var skip = true;
  for (var [node3, path3] of Editor.nodes(editor, {
    at: before3,
    match: Text.isText,
    reverse: true,
    voids
  })) {
    if (skip) {
      skip = false;
      continue;
    }
    if (node3.text !== "" || Path.isBefore(path3, blockPath)) {
      end2 = {
        path: path3,
        offset: node3.text.length
      };
      break;
    }
  }
  return {
    anchor: start2,
    focus: end2
  };
};
var withoutNormalizing = (editor, fn) => {
  var value = Editor.isNormalizing(editor);
  Editor.setNormalizing(editor, false);
  try {
    fn();
  } finally {
    Editor.setNormalizing(editor, value);
  }
  Editor.normalize(editor);
};
var deleteText = function deleteText2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var _Editor$void, _Editor$void2;
    var {
      reverse = false,
      unit = "character",
      distance = 1,
      voids = false
    } = options;
    var {
      at = editor.selection,
      hanging = false
    } = options;
    if (!at) {
      return;
    }
    var isCollapsed = false;
    if (Range.isRange(at) && Range.isCollapsed(at)) {
      isCollapsed = true;
      at = at.anchor;
    }
    if (Point.isPoint(at)) {
      var furthestVoid = Editor.void(editor, {
        at,
        mode: "highest"
      });
      if (!voids && furthestVoid) {
        var [, voidPath] = furthestVoid;
        at = voidPath;
      } else {
        var opts = {
          unit,
          distance
        };
        var target = reverse ? Editor.before(editor, at, opts) || Editor.start(editor, []) : Editor.after(editor, at, opts) || Editor.end(editor, []);
        at = {
          anchor: at,
          focus: target
        };
        hanging = true;
      }
    }
    if (Path.isPath(at)) {
      Transforms.removeNodes(editor, {
        at,
        voids
      });
      return;
    }
    if (Range.isCollapsed(at)) {
      return;
    }
    if (!hanging) {
      var [, _end] = Range.edges(at);
      var endOfDoc = Editor.end(editor, []);
      if (!Point.equals(_end, endOfDoc)) {
        at = Editor.unhangRange(editor, at, {
          voids
        });
      }
    }
    var [start2, end2] = Range.edges(at);
    var startBlock = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      at: start2,
      voids
    });
    var endBlock = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      at: end2,
      voids
    });
    var isAcrossBlocks = startBlock && endBlock && !Path.equals(startBlock[1], endBlock[1]);
    var isSingleText = Path.equals(start2.path, end2.path);
    var startNonEditable = voids ? null : (_Editor$void = Editor.void(editor, {
      at: start2,
      mode: "highest"
    })) !== null && _Editor$void !== void 0 ? _Editor$void : Editor.elementReadOnly(editor, {
      at: start2,
      mode: "highest"
    });
    var endNonEditable = voids ? null : (_Editor$void2 = Editor.void(editor, {
      at: end2,
      mode: "highest"
    })) !== null && _Editor$void2 !== void 0 ? _Editor$void2 : Editor.elementReadOnly(editor, {
      at: end2,
      mode: "highest"
    });
    if (startNonEditable) {
      var before3 = Editor.before(editor, start2);
      if (before3 && startBlock && Path.isAncestor(startBlock[1], before3.path)) {
        start2 = before3;
      }
    }
    if (endNonEditable) {
      var after3 = Editor.after(editor, end2);
      if (after3 && endBlock && Path.isAncestor(endBlock[1], after3.path)) {
        end2 = after3;
      }
    }
    var matches = [];
    var lastPath;
    for (var entry of Editor.nodes(editor, {
      at,
      voids
    })) {
      var [node3, path3] = entry;
      if (lastPath && Path.compare(path3, lastPath) === 0) {
        continue;
      }
      if (!voids && Element2.isElement(node3) && (Editor.isVoid(editor, node3) || Editor.isElementReadOnly(editor, node3)) || !Path.isCommon(path3, start2.path) && !Path.isCommon(path3, end2.path)) {
        matches.push(entry);
        lastPath = path3;
      }
    }
    var pathRefs2 = Array.from(matches, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    var startRef = Editor.pointRef(editor, start2);
    var endRef = Editor.pointRef(editor, end2);
    var removedText = "";
    if (!isSingleText && !startNonEditable) {
      var _point = startRef.current;
      var [_node] = Editor.leaf(editor, _point);
      var {
        path: _path
      } = _point;
      var {
        offset
      } = start2;
      var text = _node.text.slice(offset);
      if (text.length > 0) {
        editor.apply({
          type: "remove_text",
          path: _path,
          offset,
          text
        });
        removedText = text;
      }
    }
    pathRefs2.reverse().map((r2) => r2.unref()).filter((r2) => r2 !== null).forEach((p) => Transforms.removeNodes(editor, {
      at: p,
      voids
    }));
    if (!endNonEditable) {
      var _point2 = endRef.current;
      var [_node2] = Editor.leaf(editor, _point2);
      var {
        path: _path2
      } = _point2;
      var _offset = isSingleText ? start2.offset : 0;
      var _text = _node2.text.slice(_offset, end2.offset);
      if (_text.length > 0) {
        editor.apply({
          type: "remove_text",
          path: _path2,
          offset: _offset,
          text: _text
        });
        removedText = _text;
      }
    }
    if (!isSingleText && isAcrossBlocks && endRef.current && startRef.current) {
      Transforms.mergeNodes(editor, {
        at: endRef.current,
        hanging: true,
        voids
      });
    }
    if (isCollapsed && reverse && unit === "character" && removedText.length > 1 && removedText.match(/[\u0E00-\u0E7F]+/)) {
      Transforms.insertText(editor, removedText.slice(0, removedText.length - distance));
    }
    var startUnref = startRef.unref();
    var endUnref = endRef.unref();
    var point3 = reverse ? startUnref || endUnref : endUnref || startUnref;
    if (options.at == null && point3) {
      Transforms.select(editor, point3);
    }
  });
};
var insertFragment = function insertFragment2(editor, fragment2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      hanging = false,
      voids = false
    } = options;
    var {
      at = getDefaultInsertLocation(editor)
    } = options;
    if (!fragment2.length) {
      return;
    }
    if (Range.isRange(at)) {
      if (!hanging) {
        at = Editor.unhangRange(editor, at, {
          voids
        });
      }
      if (Range.isCollapsed(at)) {
        at = at.anchor;
      } else {
        var [, end2] = Range.edges(at);
        if (!voids && Editor.void(editor, {
          at: end2
        })) {
          return;
        }
        var pointRef3 = Editor.pointRef(editor, end2);
        Transforms.delete(editor, {
          at
        });
        at = pointRef3.unref();
      }
    } else if (Path.isPath(at)) {
      at = Editor.start(editor, at);
    }
    if (!voids && Editor.void(editor, {
      at
    })) {
      return;
    }
    var inlineElementMatch = Editor.above(editor, {
      at,
      match: (n3) => Element2.isElement(n3) && Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    if (inlineElementMatch) {
      var [, _inlinePath] = inlineElementMatch;
      if (Editor.isEnd(editor, at, _inlinePath)) {
        var after3 = Editor.after(editor, _inlinePath);
        at = after3;
      } else if (Editor.isStart(editor, at, _inlinePath)) {
        var before3 = Editor.before(editor, _inlinePath);
        at = before3;
      }
    }
    var blockMatch = Editor.above(editor, {
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      at,
      voids
    });
    var [, blockPath] = blockMatch;
    var isBlockStart = Editor.isStart(editor, at, blockPath);
    var isBlockEnd = Editor.isEnd(editor, at, blockPath);
    var isBlockEmpty = isBlockStart && isBlockEnd;
    var mergeStart = !isBlockStart || isBlockStart && isBlockEnd;
    var mergeEnd = !isBlockEnd;
    var [, firstPath] = Node.first({
      children: fragment2
    }, []);
    var [, lastPath] = Node.last({
      children: fragment2
    }, []);
    var matches = [];
    var matcher = (_ref) => {
      var [n3, p] = _ref;
      var isRoot = p.length === 0;
      if (isRoot) {
        return false;
      }
      if (isBlockEmpty) {
        return true;
      }
      if (mergeStart && Path.isAncestor(p, firstPath) && Element2.isElement(n3) && !editor.isVoid(n3) && !editor.isInline(n3)) {
        return false;
      }
      if (mergeEnd && Path.isAncestor(p, lastPath) && Element2.isElement(n3) && !editor.isVoid(n3) && !editor.isInline(n3)) {
        return false;
      }
      return true;
    };
    for (var entry of Node.nodes({
      children: fragment2
    }, {
      pass: matcher
    })) {
      if (matcher(entry)) {
        matches.push(entry);
      }
    }
    var starts = [];
    var middles = [];
    var ends = [];
    var starting = true;
    var hasBlocks2 = false;
    for (var [node3] of matches) {
      if (Element2.isElement(node3) && !editor.isInline(node3)) {
        starting = false;
        hasBlocks2 = true;
        middles.push(node3);
      } else if (starting) {
        starts.push(node3);
      } else {
        ends.push(node3);
      }
    }
    var [inlineMatch] = Editor.nodes(editor, {
      at,
      match: (n3) => Text.isText(n3) || Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    var [, inlinePath] = inlineMatch;
    var isInlineStart = Editor.isStart(editor, at, inlinePath);
    var isInlineEnd = Editor.isEnd(editor, at, inlinePath);
    var middleRef = Editor.pathRef(editor, isBlockEnd && !ends.length ? Path.next(blockPath) : blockPath);
    var endRef = Editor.pathRef(editor, isInlineEnd ? Path.next(inlinePath) : inlinePath);
    Transforms.splitNodes(editor, {
      at,
      match: (n3) => hasBlocks2 ? Element2.isElement(n3) && Editor.isBlock(editor, n3) : Text.isText(n3) || Editor.isInline(editor, n3),
      mode: hasBlocks2 ? "lowest" : "highest",
      always: hasBlocks2 && (!isBlockStart || starts.length > 0) && (!isBlockEnd || ends.length > 0),
      voids
    });
    var startRef = Editor.pathRef(editor, !isInlineStart || isInlineStart && isInlineEnd ? Path.next(inlinePath) : inlinePath);
    Transforms.insertNodes(editor, starts, {
      at: startRef.current,
      match: (n3) => Text.isText(n3) || Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    if (isBlockEmpty && !starts.length && middles.length && !ends.length) {
      Transforms.delete(editor, {
        at: blockPath,
        voids
      });
    }
    Transforms.insertNodes(editor, middles, {
      at: middleRef.current,
      match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
      mode: "lowest",
      voids
    });
    Transforms.insertNodes(editor, ends, {
      at: endRef.current,
      match: (n3) => Text.isText(n3) || Editor.isInline(editor, n3),
      mode: "highest",
      voids
    });
    if (!options.at) {
      var path3;
      if (ends.length > 0 && endRef.current) {
        path3 = Path.previous(endRef.current);
      } else if (middles.length > 0 && middleRef.current) {
        path3 = Path.previous(middleRef.current);
      } else if (startRef.current) {
        path3 = Path.previous(startRef.current);
      }
      if (path3) {
        var _end = Editor.end(editor, path3);
        Transforms.select(editor, _end);
      }
    }
    startRef.unref();
    middleRef.unref();
    endRef.unref();
  });
};
var collapse = function collapse2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    edge = "anchor"
  } = options;
  var {
    selection
  } = editor;
  if (!selection) {
    return;
  } else if (edge === "anchor") {
    Transforms.select(editor, selection.anchor);
  } else if (edge === "focus") {
    Transforms.select(editor, selection.focus);
  } else if (edge === "start") {
    var [start2] = Range.edges(selection);
    Transforms.select(editor, start2);
  } else if (edge === "end") {
    var [, end2] = Range.edges(selection);
    Transforms.select(editor, end2);
  }
};
var deselect = (editor) => {
  var {
    selection
  } = editor;
  if (selection) {
    editor.apply({
      type: "set_selection",
      properties: selection,
      newProperties: null
    });
  }
};
var move = function move2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var {
    selection
  } = editor;
  var {
    distance = 1,
    unit = "character",
    reverse = false
  } = options;
  var {
    edge = null
  } = options;
  if (!selection) {
    return;
  }
  if (edge === "start") {
    edge = Range.isBackward(selection) ? "focus" : "anchor";
  }
  if (edge === "end") {
    edge = Range.isBackward(selection) ? "anchor" : "focus";
  }
  var {
    anchor,
    focus
  } = selection;
  var opts = {
    distance,
    unit,
    ignoreNonSelectable: true
  };
  var props = {};
  if (edge == null || edge === "anchor") {
    var point3 = reverse ? Editor.before(editor, anchor, opts) : Editor.after(editor, anchor, opts);
    if (point3) {
      props.anchor = point3;
    }
  }
  if (edge == null || edge === "focus") {
    var _point = reverse ? Editor.before(editor, focus, opts) : Editor.after(editor, focus, opts);
    if (_point) {
      props.focus = _point;
    }
  }
  Transforms.setSelection(editor, props);
};
var select = (editor, target) => {
  var {
    selection
  } = editor;
  target = Editor.range(editor, target);
  if (selection) {
    Transforms.setSelection(editor, target);
    return;
  }
  if (!Range.isRange(target)) {
    throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Scrubber.stringify(target)));
  }
  editor.apply({
    type: "set_selection",
    properties: selection,
    newProperties: target
  });
};
function ownKeys$1(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread$1(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$1(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys$1(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var setPoint = function setPoint2(editor, props) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  var {
    selection
  } = editor;
  var {
    edge = "both"
  } = options;
  if (!selection) {
    return;
  }
  if (edge === "start") {
    edge = Range.isBackward(selection) ? "focus" : "anchor";
  }
  if (edge === "end") {
    edge = Range.isBackward(selection) ? "anchor" : "focus";
  }
  var {
    anchor,
    focus
  } = selection;
  var point3 = edge === "anchor" ? anchor : focus;
  Transforms.setSelection(editor, {
    [edge === "anchor" ? "anchor" : "focus"]: _objectSpread$1(_objectSpread$1({}, point3), props)
  });
};
var setSelection = (editor, props) => {
  var {
    selection
  } = editor;
  var oldProps = {};
  var newProps = {};
  if (!selection) {
    return;
  }
  for (var k in props) {
    if (k === "anchor" && props.anchor != null && !Point.equals(props.anchor, selection.anchor) || k === "focus" && props.focus != null && !Point.equals(props.focus, selection.focus) || k !== "anchor" && k !== "focus" && props[k] !== selection[k]) {
      oldProps[k] = selection[k];
      newProps[k] = props[k];
    }
  }
  if (Object.keys(oldProps).length > 0) {
    editor.apply({
      type: "set_selection",
      properties: oldProps,
      newProperties: newProps
    });
  }
};
var insertNodes = function insertNodes2(editor, nodes2) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      hanging = false,
      voids = false,
      mode = "lowest"
    } = options;
    var {
      at,
      match,
      select: select2
    } = options;
    if (Node.isNode(nodes2)) {
      nodes2 = [nodes2];
    }
    if (nodes2.length === 0) {
      return;
    }
    var [node3] = nodes2;
    if (!at) {
      at = getDefaultInsertLocation(editor);
      if (select2 !== false) {
        select2 = true;
      }
    }
    if (select2 == null) {
      select2 = false;
    }
    if (Range.isRange(at)) {
      if (!hanging) {
        at = Editor.unhangRange(editor, at, {
          voids
        });
      }
      if (Range.isCollapsed(at)) {
        at = at.anchor;
      } else {
        var [, end2] = Range.edges(at);
        var pointRef3 = Editor.pointRef(editor, end2);
        Transforms.delete(editor, {
          at
        });
        at = pointRef3.unref();
      }
    }
    if (Point.isPoint(at)) {
      if (match == null) {
        if (Text.isText(node3)) {
          match = (n3) => Text.isText(n3);
        } else if (editor.isInline(node3)) {
          match = (n3) => Text.isText(n3) || Editor.isInline(editor, n3);
        } else {
          match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
        }
      }
      var [entry] = Editor.nodes(editor, {
        at: at.path,
        match,
        mode,
        voids
      });
      if (entry) {
        var [, matchPath2] = entry;
        var pathRef3 = Editor.pathRef(editor, matchPath2);
        var isAtEnd = Editor.isEnd(editor, at, matchPath2);
        Transforms.splitNodes(editor, {
          at,
          match,
          mode,
          voids
        });
        var path3 = pathRef3.unref();
        at = isAtEnd ? Path.next(path3) : path3;
      } else {
        return;
      }
    }
    var parentPath = Path.parent(at);
    var index = at[at.length - 1];
    if (!voids && Editor.void(editor, {
      at: parentPath
    })) {
      return;
    }
    for (var _node of nodes2) {
      var _path = parentPath.concat(index);
      index++;
      editor.apply({
        type: "insert_node",
        path: _path,
        node: _node
      });
      at = Path.next(at);
    }
    at = Path.previous(at);
    if (select2) {
      var point3 = Editor.end(editor, at);
      if (point3) {
        Transforms.select(editor, point3);
      }
    }
  });
};
var liftNodes = function liftNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      at = editor.selection,
      mode = "lowest",
      voids = false
    } = options;
    var {
      match
    } = options;
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (!at) {
      return;
    }
    var matches = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(matches, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    for (var pathRef3 of pathRefs2) {
      var path3 = pathRef3.unref();
      if (path3.length < 2) {
        throw new Error("Cannot lift node at a path [".concat(path3, "] because it has a depth of less than `2`."));
      }
      var parentNodeEntry = Editor.node(editor, Path.parent(path3));
      var [parent3, parentPath] = parentNodeEntry;
      var index = path3[path3.length - 1];
      var {
        length
      } = parent3.children;
      if (length === 1) {
        var toPath = Path.next(parentPath);
        Transforms.moveNodes(editor, {
          at: path3,
          to: toPath,
          voids
        });
        Transforms.removeNodes(editor, {
          at: parentPath,
          voids
        });
      } else if (index === 0) {
        Transforms.moveNodes(editor, {
          at: path3,
          to: parentPath,
          voids
        });
      } else if (index === length - 1) {
        var _toPath = Path.next(parentPath);
        Transforms.moveNodes(editor, {
          at: path3,
          to: _toPath,
          voids
        });
      } else {
        var splitPath = Path.next(path3);
        var _toPath2 = Path.next(parentPath);
        Transforms.splitNodes(editor, {
          at: splitPath,
          voids
        });
        Transforms.moveNodes(editor, {
          at: path3,
          to: _toPath2,
          voids
        });
      }
    }
  });
};
var _excluded = ["text"];
var _excluded2 = ["children"];
var hasSingleChildNest = (editor, node3) => {
  if (Element2.isElement(node3)) {
    var element = node3;
    if (Editor.isVoid(editor, node3)) {
      return true;
    } else if (element.children.length === 1) {
      return hasSingleChildNest(editor, element.children[0]);
    } else {
      return false;
    }
  } else if (Editor.isEditor(node3)) {
    return false;
  } else {
    return true;
  }
};
var mergeNodes = function mergeNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      match,
      at = editor.selection
    } = options;
    var {
      hanging = false,
      voids = false,
      mode = "lowest"
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      if (Path.isPath(at)) {
        var [parent3] = Editor.parent(editor, at);
        match = (n3) => parent3.children.includes(n3);
      } else {
        match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
      }
    }
    if (!hanging && Range.isRange(at)) {
      at = Editor.unhangRange(editor, at, {
        voids
      });
    }
    if (Range.isRange(at)) {
      if (Range.isCollapsed(at)) {
        at = at.anchor;
      } else {
        var [, end2] = Range.edges(at);
        var pointRef3 = Editor.pointRef(editor, end2);
        Transforms.delete(editor, {
          at
        });
        at = pointRef3.unref();
        if (options.at == null) {
          Transforms.select(editor, at);
        }
      }
    }
    var [current2] = Editor.nodes(editor, {
      at,
      match,
      voids,
      mode
    });
    var prev = Editor.previous(editor, {
      at,
      match,
      voids,
      mode
    });
    if (!current2 || !prev) {
      return;
    }
    var [node3, path3] = current2;
    var [prevNode, prevPath] = prev;
    if (path3.length === 0 || prevPath.length === 0) {
      return;
    }
    var newPath = Path.next(prevPath);
    var commonPath = Path.common(path3, prevPath);
    var isPreviousSibling = Path.isSibling(path3, prevPath);
    var levels2 = Array.from(Editor.levels(editor, {
      at: path3
    }), (_ref) => {
      var [n3] = _ref;
      return n3;
    }).slice(commonPath.length).slice(0, -1);
    var emptyAncestor = Editor.above(editor, {
      at: path3,
      mode: "highest",
      match: (n3) => levels2.includes(n3) && hasSingleChildNest(editor, n3)
    });
    var emptyRef = emptyAncestor && Editor.pathRef(editor, emptyAncestor[1]);
    var properties;
    var position;
    if (Text.isText(node3) && Text.isText(prevNode)) {
      var rest = _objectWithoutProperties(node3, _excluded);
      position = prevNode.text.length;
      properties = rest;
    } else if (Element2.isElement(node3) && Element2.isElement(prevNode)) {
      var rest = _objectWithoutProperties(node3, _excluded2);
      position = prevNode.children.length;
      properties = rest;
    } else {
      throw new Error("Cannot merge the node at path [".concat(path3, "] with the previous sibling because it is not the same kind: ").concat(Scrubber.stringify(node3), " ").concat(Scrubber.stringify(prevNode)));
    }
    if (!isPreviousSibling) {
      Transforms.moveNodes(editor, {
        at: path3,
        to: newPath,
        voids
      });
    }
    if (emptyRef) {
      Transforms.removeNodes(editor, {
        at: emptyRef.current,
        voids
      });
    }
    if (Element2.isElement(prevNode) && Editor.isEmpty(editor, prevNode) || Text.isText(prevNode) && prevNode.text === "" && prevPath[prevPath.length - 1] !== 0) {
      Transforms.removeNodes(editor, {
        at: prevPath,
        voids
      });
    } else {
      editor.apply({
        type: "merge_node",
        path: newPath,
        position,
        properties
      });
    }
    if (emptyRef) {
      emptyRef.unref();
    }
  });
};
var moveNodes = (editor, options) => {
  Editor.withoutNormalizing(editor, () => {
    var {
      to,
      at = editor.selection,
      mode = "lowest",
      voids = false
    } = options;
    var {
      match
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    var toRef = Editor.pathRef(editor, to);
    var targets = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(targets, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    for (var pathRef3 of pathRefs2) {
      var path3 = pathRef3.unref();
      var newPath = toRef.current;
      if (path3.length !== 0) {
        editor.apply({
          type: "move_node",
          path: path3,
          newPath
        });
      }
      if (toRef.current && Path.isSibling(newPath, path3) && Path.isAfter(newPath, path3)) {
        toRef.current = Path.next(toRef.current);
      }
    }
    toRef.unref();
  });
};
var removeNodes = function removeNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      hanging = false,
      voids = false,
      mode = "lowest"
    } = options;
    var {
      at = editor.selection,
      match
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (!hanging && Range.isRange(at)) {
      at = Editor.unhangRange(editor, at, {
        voids
      });
    }
    var depths = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(depths, (_ref) => {
      var [, p] = _ref;
      return Editor.pathRef(editor, p);
    });
    for (var pathRef3 of pathRefs2) {
      var path3 = pathRef3.unref();
      if (path3) {
        var [node3] = Editor.node(editor, path3);
        editor.apply({
          type: "remove_node",
          path: path3,
          node: node3
        });
      }
    }
  });
};
var setNodes = function setNodes2(editor, props) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      match,
      at = editor.selection,
      compare,
      merge
    } = options;
    var {
      hanging = false,
      mode = "lowest",
      split = false,
      voids = false
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (!hanging && Range.isRange(at)) {
      at = Editor.unhangRange(editor, at, {
        voids
      });
    }
    if (split && Range.isRange(at)) {
      if (Range.isCollapsed(at) && Editor.leaf(editor, at.anchor)[0].text.length > 0) {
        return;
      }
      var rangeRef3 = Editor.rangeRef(editor, at, {
        affinity: "inward"
      });
      var [start2, end2] = Range.edges(at);
      var splitMode = mode === "lowest" ? "lowest" : "highest";
      var endAtEndOfNode = Editor.isEnd(editor, end2, end2.path);
      Transforms.splitNodes(editor, {
        at: end2,
        match,
        mode: splitMode,
        voids,
        always: !endAtEndOfNode
      });
      var startAtStartOfNode = Editor.isStart(editor, start2, start2.path);
      Transforms.splitNodes(editor, {
        at: start2,
        match,
        mode: splitMode,
        voids,
        always: !startAtStartOfNode
      });
      at = rangeRef3.unref();
      if (options.at == null) {
        Transforms.select(editor, at);
      }
    }
    if (!compare) {
      compare = (prop, nodeProp) => prop !== nodeProp;
    }
    for (var [node3, path3] of Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    })) {
      var properties = {};
      var newProperties = {};
      if (path3.length === 0) {
        continue;
      }
      var hasChanges = false;
      for (var k in props) {
        if (k === "children" || k === "text") {
          continue;
        }
        if (compare(props[k], node3[k])) {
          hasChanges = true;
          if (node3.hasOwnProperty(k))
            properties[k] = node3[k];
          if (merge) {
            if (props[k] != null)
              newProperties[k] = merge(node3[k], props[k]);
          } else {
            if (props[k] != null)
              newProperties[k] = props[k];
          }
        }
      }
      if (hasChanges) {
        editor.apply({
          type: "set_node",
          path: path3,
          properties,
          newProperties
        });
      }
    }
  });
};
var deleteRange = (editor, range2) => {
  if (Range.isCollapsed(range2)) {
    return range2.anchor;
  } else {
    var [, end2] = Range.edges(range2);
    var pointRef3 = Editor.pointRef(editor, end2);
    Transforms.delete(editor, {
      at: range2
    });
    return pointRef3.unref();
  }
};
var splitNodes = function splitNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      mode = "lowest",
      voids = false
    } = options;
    var {
      match,
      at = editor.selection,
      height = 0,
      always = false
    } = options;
    if (match == null) {
      match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (Range.isRange(at)) {
      at = deleteRange(editor, at);
    }
    if (Path.isPath(at)) {
      var path3 = at;
      var point3 = Editor.point(editor, path3);
      var [parent3] = Editor.parent(editor, path3);
      match = (n3) => n3 === parent3;
      height = point3.path.length - path3.length + 1;
      at = point3;
      always = true;
    }
    if (!at) {
      return;
    }
    var beforeRef = Editor.pointRef(editor, at, {
      affinity: "backward"
    });
    var afterRef;
    try {
      var [highest] = Editor.nodes(editor, {
        at,
        match,
        mode,
        voids
      });
      if (!highest) {
        return;
      }
      var voidMatch = Editor.void(editor, {
        at,
        mode: "highest"
      });
      var nudge = 0;
      if (!voids && voidMatch) {
        var [voidNode, voidPath] = voidMatch;
        if (Element2.isElement(voidNode) && editor.isInline(voidNode)) {
          var after3 = Editor.after(editor, voidPath);
          if (!after3) {
            var text = {
              text: ""
            };
            var afterPath = Path.next(voidPath);
            Transforms.insertNodes(editor, text, {
              at: afterPath,
              voids
            });
            after3 = Editor.point(editor, afterPath);
          }
          at = after3;
          always = true;
        }
        var siblingHeight = at.path.length - voidPath.length;
        height = siblingHeight + 1;
        always = true;
      }
      afterRef = Editor.pointRef(editor, at);
      var depth = at.path.length - height;
      var [, highestPath] = highest;
      var lowestPath = at.path.slice(0, depth);
      var position = height === 0 ? at.offset : at.path[depth] + nudge;
      for (var [node3, _path] of Editor.levels(editor, {
        at: lowestPath,
        reverse: true,
        voids
      })) {
        var split = false;
        if (_path.length < highestPath.length || _path.length === 0 || !voids && Element2.isElement(node3) && Editor.isVoid(editor, node3)) {
          break;
        }
        var _point = beforeRef.current;
        var isEnd2 = Editor.isEnd(editor, _point, _path);
        if (always || !beforeRef || !Editor.isEdge(editor, _point, _path)) {
          split = true;
          var properties = Node.extractProps(node3);
          editor.apply({
            type: "split_node",
            path: _path,
            position,
            properties
          });
        }
        position = _path[_path.length - 1] + (split || isEnd2 ? 1 : 0);
      }
      if (options.at == null) {
        var _point2 = afterRef.current || Editor.end(editor, []);
        Transforms.select(editor, _point2);
      }
    } finally {
      var _afterRef;
      beforeRef.unref();
      (_afterRef = afterRef) === null || _afterRef === void 0 || _afterRef.unref();
    }
  });
};
var unsetNodes = function unsetNodes2(editor, props) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  if (!Array.isArray(props)) {
    props = [props];
  }
  var obj = {};
  for (var key of props) {
    obj[key] = null;
  }
  Transforms.setNodes(editor, obj, options);
};
var unwrapNodes = function unwrapNodes2(editor) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      mode = "lowest",
      split = false,
      voids = false
    } = options;
    var {
      at = editor.selection,
      match
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      match = Path.isPath(at) ? matchPath(editor, at) : (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
    }
    if (Path.isPath(at)) {
      at = Editor.range(editor, at);
    }
    var rangeRef3 = Range.isRange(at) ? Editor.rangeRef(editor, at) : null;
    var matches = Editor.nodes(editor, {
      at,
      match,
      mode,
      voids
    });
    var pathRefs2 = Array.from(
      matches,
      (_ref) => {
        var [, p] = _ref;
        return Editor.pathRef(editor, p);
      }
      // unwrapNode will call liftNode which does not support splitting the node when nested.
      // If we do not reverse the order and call it from top to the bottom, it will remove all blocks
      // that wrap target node. So we reverse the order.
    ).reverse();
    var _loop = function _loop2() {
      var path3 = pathRef3.unref();
      var [node3] = Editor.node(editor, path3);
      var range2 = Editor.range(editor, path3);
      if (split && rangeRef3) {
        range2 = Range.intersection(rangeRef3.current, range2);
      }
      Transforms.liftNodes(editor, {
        at: range2,
        match: (n3) => Element2.isAncestor(node3) && node3.children.includes(n3),
        voids
      });
    };
    for (var pathRef3 of pathRefs2) {
      _loop();
    }
    if (rangeRef3) {
      rangeRef3.unref();
    }
  });
};
function ownKeys(e2, r2) {
  var t2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e2);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e2, r3).enumerable;
    })), t2.push.apply(t2, o);
  }
  return t2;
}
function _objectSpread(e2) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t2 = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys(Object(t2), true).forEach(function(r3) {
      _defineProperty(e2, r3, t2[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2)) : ownKeys(Object(t2)).forEach(function(r3) {
      Object.defineProperty(e2, r3, Object.getOwnPropertyDescriptor(t2, r3));
    });
  }
  return e2;
}
var wrapNodes = function wrapNodes2(editor, element) {
  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
  Editor.withoutNormalizing(editor, () => {
    var {
      mode = "lowest",
      split = false,
      voids = false
    } = options;
    var {
      match,
      at = editor.selection
    } = options;
    if (!at) {
      return;
    }
    if (match == null) {
      if (Path.isPath(at)) {
        match = matchPath(editor, at);
      } else if (editor.isInline(element)) {
        match = (n3) => Element2.isElement(n3) && Editor.isInline(editor, n3) || Text.isText(n3);
      } else {
        match = (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3);
      }
    }
    if (split && Range.isRange(at)) {
      var [start2, end2] = Range.edges(at);
      var rangeRef3 = Editor.rangeRef(editor, at, {
        affinity: "inward"
      });
      Transforms.splitNodes(editor, {
        at: end2,
        match,
        voids
      });
      Transforms.splitNodes(editor, {
        at: start2,
        match,
        voids
      });
      at = rangeRef3.unref();
      if (options.at == null) {
        Transforms.select(editor, at);
      }
    }
    var roots = Array.from(Editor.nodes(editor, {
      at,
      match: editor.isInline(element) ? (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3) : (n3) => Editor.isEditor(n3),
      mode: "lowest",
      voids
    }));
    var _loop = function _loop2() {
      var a = Range.isRange(at) ? Range.intersection(at, Editor.range(editor, rootPath)) : at;
      if (!a) {
        return 0;
      }
      var matches = Array.from(Editor.nodes(editor, {
        at: a,
        match,
        mode,
        voids
      }));
      if (matches.length > 0) {
        var [first2] = matches;
        var last2 = matches[matches.length - 1];
        var [, firstPath] = first2;
        var [, lastPath] = last2;
        if (firstPath.length === 0 && lastPath.length === 0) {
          return 0;
        }
        var commonPath = Path.equals(firstPath, lastPath) ? Path.parent(firstPath) : Path.common(firstPath, lastPath);
        var range2 = Editor.range(editor, firstPath, lastPath);
        var commonNodeEntry = Editor.node(editor, commonPath);
        var [commonNode] = commonNodeEntry;
        var depth = commonPath.length + 1;
        var wrapperPath = Path.next(lastPath.slice(0, depth));
        var wrapper = _objectSpread(_objectSpread({}, element), {}, {
          children: []
        });
        Transforms.insertNodes(editor, wrapper, {
          at: wrapperPath,
          voids
        });
        Transforms.moveNodes(editor, {
          at: range2,
          match: (n3) => Element2.isAncestor(commonNode) && commonNode.children.includes(n3),
          to: wrapperPath.concat(0),
          voids
        });
      }
    }, _ret;
    for (var [, rootPath] of roots) {
      _ret = _loop();
      if (_ret === 0)
        continue;
    }
  });
};
var createEditor = () => {
  var editor = {
    children: [],
    operations: [],
    selection: null,
    marks: null,
    isElementReadOnly: () => false,
    isInline: () => false,
    isSelectable: () => true,
    isVoid: () => false,
    markableVoid: () => false,
    onChange: () => {
    },
    // Core
    apply: function apply$1() {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      return apply(editor, ...args);
    },
    // Editor
    addMark: function addMark$1() {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }
      return addMark(editor, ...args);
    },
    deleteBackward: function deleteBackward$1() {
      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        args[_key3] = arguments[_key3];
      }
      return deleteBackward(editor, ...args);
    },
    deleteForward: function deleteForward$1() {
      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
        args[_key4] = arguments[_key4];
      }
      return deleteForward(editor, ...args);
    },
    deleteFragment: function deleteFragment$1() {
      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
        args[_key5] = arguments[_key5];
      }
      return deleteFragment(editor, ...args);
    },
    getFragment: function getFragment$1() {
      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
        args[_key6] = arguments[_key6];
      }
      return getFragment(editor, ...args);
    },
    insertBreak: function insertBreak$1() {
      for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
        args[_key7] = arguments[_key7];
      }
      return insertBreak(editor, ...args);
    },
    insertSoftBreak: function insertSoftBreak$1() {
      for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
        args[_key8] = arguments[_key8];
      }
      return insertSoftBreak(editor, ...args);
    },
    insertFragment: function insertFragment$1() {
      for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
        args[_key9] = arguments[_key9];
      }
      return insertFragment(editor, ...args);
    },
    insertNode: function insertNode$1() {
      for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
        args[_key10] = arguments[_key10];
      }
      return insertNode(editor, ...args);
    },
    insertText: function insertText$1() {
      for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {
        args[_key11] = arguments[_key11];
      }
      return insertText(editor, ...args);
    },
    normalizeNode: function normalizeNode$1() {
      for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {
        args[_key12] = arguments[_key12];
      }
      return normalizeNode(editor, ...args);
    },
    removeMark: function removeMark$1() {
      for (var _len13 = arguments.length, args = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {
        args[_key13] = arguments[_key13];
      }
      return removeMark(editor, ...args);
    },
    getDirtyPaths: function getDirtyPaths$1() {
      for (var _len14 = arguments.length, args = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {
        args[_key14] = arguments[_key14];
      }
      return getDirtyPaths(editor, ...args);
    },
    shouldNormalize: function shouldNormalize$1() {
      for (var _len15 = arguments.length, args = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {
        args[_key15] = arguments[_key15];
      }
      return shouldNormalize(editor, ...args);
    },
    // Editor interface
    above: function above$1() {
      for (var _len16 = arguments.length, args = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {
        args[_key16] = arguments[_key16];
      }
      return above(editor, ...args);
    },
    after: function after$1() {
      for (var _len17 = arguments.length, args = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {
        args[_key17] = arguments[_key17];
      }
      return after(editor, ...args);
    },
    before: function before$1() {
      for (var _len18 = arguments.length, args = new Array(_len18), _key18 = 0; _key18 < _len18; _key18++) {
        args[_key18] = arguments[_key18];
      }
      return before(editor, ...args);
    },
    collapse: function collapse$1() {
      for (var _len19 = arguments.length, args = new Array(_len19), _key19 = 0; _key19 < _len19; _key19++) {
        args[_key19] = arguments[_key19];
      }
      return collapse(editor, ...args);
    },
    delete: function _delete() {
      for (var _len20 = arguments.length, args = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {
        args[_key20] = arguments[_key20];
      }
      return deleteText(editor, ...args);
    },
    deselect: function deselect$1() {
      for (var _len21 = arguments.length, args = new Array(_len21), _key21 = 0; _key21 < _len21; _key21++) {
        args[_key21] = arguments[_key21];
      }
      return deselect(editor, ...args);
    },
    edges: function edges$1() {
      for (var _len22 = arguments.length, args = new Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {
        args[_key22] = arguments[_key22];
      }
      return edges(editor, ...args);
    },
    elementReadOnly: function elementReadOnly$1() {
      for (var _len23 = arguments.length, args = new Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {
        args[_key23] = arguments[_key23];
      }
      return elementReadOnly(editor, ...args);
    },
    end: function end$1() {
      for (var _len24 = arguments.length, args = new Array(_len24), _key24 = 0; _key24 < _len24; _key24++) {
        args[_key24] = arguments[_key24];
      }
      return end(editor, ...args);
    },
    first: function first$1() {
      for (var _len25 = arguments.length, args = new Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {
        args[_key25] = arguments[_key25];
      }
      return first(editor, ...args);
    },
    fragment: function fragment$1() {
      for (var _len26 = arguments.length, args = new Array(_len26), _key26 = 0; _key26 < _len26; _key26++) {
        args[_key26] = arguments[_key26];
      }
      return fragment(editor, ...args);
    },
    getMarks: function getMarks() {
      for (var _len27 = arguments.length, args = new Array(_len27), _key27 = 0; _key27 < _len27; _key27++) {
        args[_key27] = arguments[_key27];
      }
      return marks(editor, ...args);
    },
    hasBlocks: function hasBlocks$1() {
      for (var _len28 = arguments.length, args = new Array(_len28), _key28 = 0; _key28 < _len28; _key28++) {
        args[_key28] = arguments[_key28];
      }
      return hasBlocks(editor, ...args);
    },
    hasInlines: function hasInlines$1() {
      for (var _len29 = arguments.length, args = new Array(_len29), _key29 = 0; _key29 < _len29; _key29++) {
        args[_key29] = arguments[_key29];
      }
      return hasInlines(editor, ...args);
    },
    hasPath: function hasPath$1() {
      for (var _len30 = arguments.length, args = new Array(_len30), _key30 = 0; _key30 < _len30; _key30++) {
        args[_key30] = arguments[_key30];
      }
      return hasPath(editor, ...args);
    },
    hasTexts: function hasTexts$1() {
      for (var _len31 = arguments.length, args = new Array(_len31), _key31 = 0; _key31 < _len31; _key31++) {
        args[_key31] = arguments[_key31];
      }
      return hasTexts(editor, ...args);
    },
    insertNodes: function insertNodes$1() {
      for (var _len32 = arguments.length, args = new Array(_len32), _key32 = 0; _key32 < _len32; _key32++) {
        args[_key32] = arguments[_key32];
      }
      return insertNodes(editor, ...args);
    },
    isBlock: function isBlock$1() {
      for (var _len33 = arguments.length, args = new Array(_len33), _key33 = 0; _key33 < _len33; _key33++) {
        args[_key33] = arguments[_key33];
      }
      return isBlock2(editor, ...args);
    },
    isEdge: function isEdge$1() {
      for (var _len34 = arguments.length, args = new Array(_len34), _key34 = 0; _key34 < _len34; _key34++) {
        args[_key34] = arguments[_key34];
      }
      return isEdge(editor, ...args);
    },
    isEmpty: function isEmpty$1() {
      for (var _len35 = arguments.length, args = new Array(_len35), _key35 = 0; _key35 < _len35; _key35++) {
        args[_key35] = arguments[_key35];
      }
      return isEmpty(editor, ...args);
    },
    isEnd: function isEnd$1() {
      for (var _len36 = arguments.length, args = new Array(_len36), _key36 = 0; _key36 < _len36; _key36++) {
        args[_key36] = arguments[_key36];
      }
      return isEnd(editor, ...args);
    },
    isNormalizing: function isNormalizing$1() {
      for (var _len37 = arguments.length, args = new Array(_len37), _key37 = 0; _key37 < _len37; _key37++) {
        args[_key37] = arguments[_key37];
      }
      return isNormalizing(editor, ...args);
    },
    isStart: function isStart$1() {
      for (var _len38 = arguments.length, args = new Array(_len38), _key38 = 0; _key38 < _len38; _key38++) {
        args[_key38] = arguments[_key38];
      }
      return isStart(editor, ...args);
    },
    last: function last$1() {
      for (var _len39 = arguments.length, args = new Array(_len39), _key39 = 0; _key39 < _len39; _key39++) {
        args[_key39] = arguments[_key39];
      }
      return last(editor, ...args);
    },
    leaf: function leaf$1() {
      for (var _len40 = arguments.length, args = new Array(_len40), _key40 = 0; _key40 < _len40; _key40++) {
        args[_key40] = arguments[_key40];
      }
      return leaf(editor, ...args);
    },
    levels: function levels$1() {
      for (var _len41 = arguments.length, args = new Array(_len41), _key41 = 0; _key41 < _len41; _key41++) {
        args[_key41] = arguments[_key41];
      }
      return levels(editor, ...args);
    },
    liftNodes: function liftNodes$1() {
      for (var _len42 = arguments.length, args = new Array(_len42), _key42 = 0; _key42 < _len42; _key42++) {
        args[_key42] = arguments[_key42];
      }
      return liftNodes(editor, ...args);
    },
    mergeNodes: function mergeNodes$1() {
      for (var _len43 = arguments.length, args = new Array(_len43), _key43 = 0; _key43 < _len43; _key43++) {
        args[_key43] = arguments[_key43];
      }
      return mergeNodes(editor, ...args);
    },
    move: function move$1() {
      for (var _len44 = arguments.length, args = new Array(_len44), _key44 = 0; _key44 < _len44; _key44++) {
        args[_key44] = arguments[_key44];
      }
      return move(editor, ...args);
    },
    moveNodes: function moveNodes$1() {
      for (var _len45 = arguments.length, args = new Array(_len45), _key45 = 0; _key45 < _len45; _key45++) {
        args[_key45] = arguments[_key45];
      }
      return moveNodes(editor, ...args);
    },
    next: function next$1() {
      for (var _len46 = arguments.length, args = new Array(_len46), _key46 = 0; _key46 < _len46; _key46++) {
        args[_key46] = arguments[_key46];
      }
      return next(editor, ...args);
    },
    node: function node$1() {
      for (var _len47 = arguments.length, args = new Array(_len47), _key47 = 0; _key47 < _len47; _key47++) {
        args[_key47] = arguments[_key47];
      }
      return node(editor, ...args);
    },
    nodes: function nodes$1() {
      for (var _len48 = arguments.length, args = new Array(_len48), _key48 = 0; _key48 < _len48; _key48++) {
        args[_key48] = arguments[_key48];
      }
      return nodes(editor, ...args);
    },
    normalize: function normalize$1() {
      for (var _len49 = arguments.length, args = new Array(_len49), _key49 = 0; _key49 < _len49; _key49++) {
        args[_key49] = arguments[_key49];
      }
      return normalize(editor, ...args);
    },
    parent: function parent$1() {
      for (var _len50 = arguments.length, args = new Array(_len50), _key50 = 0; _key50 < _len50; _key50++) {
        args[_key50] = arguments[_key50];
      }
      return parent(editor, ...args);
    },
    path: function path$1() {
      for (var _len51 = arguments.length, args = new Array(_len51), _key51 = 0; _key51 < _len51; _key51++) {
        args[_key51] = arguments[_key51];
      }
      return path(editor, ...args);
    },
    pathRef: function pathRef$1() {
      for (var _len52 = arguments.length, args = new Array(_len52), _key52 = 0; _key52 < _len52; _key52++) {
        args[_key52] = arguments[_key52];
      }
      return pathRef(editor, ...args);
    },
    pathRefs: function pathRefs$1() {
      for (var _len53 = arguments.length, args = new Array(_len53), _key53 = 0; _key53 < _len53; _key53++) {
        args[_key53] = arguments[_key53];
      }
      return pathRefs(editor, ...args);
    },
    point: function point$1() {
      for (var _len54 = arguments.length, args = new Array(_len54), _key54 = 0; _key54 < _len54; _key54++) {
        args[_key54] = arguments[_key54];
      }
      return point(editor, ...args);
    },
    pointRef: function pointRef$1() {
      for (var _len55 = arguments.length, args = new Array(_len55), _key55 = 0; _key55 < _len55; _key55++) {
        args[_key55] = arguments[_key55];
      }
      return pointRef(editor, ...args);
    },
    pointRefs: function pointRefs$1() {
      for (var _len56 = arguments.length, args = new Array(_len56), _key56 = 0; _key56 < _len56; _key56++) {
        args[_key56] = arguments[_key56];
      }
      return pointRefs(editor, ...args);
    },
    positions: function positions$1() {
      for (var _len57 = arguments.length, args = new Array(_len57), _key57 = 0; _key57 < _len57; _key57++) {
        args[_key57] = arguments[_key57];
      }
      return positions(editor, ...args);
    },
    previous: function previous$1() {
      for (var _len58 = arguments.length, args = new Array(_len58), _key58 = 0; _key58 < _len58; _key58++) {
        args[_key58] = arguments[_key58];
      }
      return previous(editor, ...args);
    },
    range: function range$1() {
      for (var _len59 = arguments.length, args = new Array(_len59), _key59 = 0; _key59 < _len59; _key59++) {
        args[_key59] = arguments[_key59];
      }
      return range(editor, ...args);
    },
    rangeRef: function rangeRef$1() {
      for (var _len60 = arguments.length, args = new Array(_len60), _key60 = 0; _key60 < _len60; _key60++) {
        args[_key60] = arguments[_key60];
      }
      return rangeRef(editor, ...args);
    },
    rangeRefs: function rangeRefs$1() {
      for (var _len61 = arguments.length, args = new Array(_len61), _key61 = 0; _key61 < _len61; _key61++) {
        args[_key61] = arguments[_key61];
      }
      return rangeRefs(editor, ...args);
    },
    removeNodes: function removeNodes$1() {
      for (var _len62 = arguments.length, args = new Array(_len62), _key62 = 0; _key62 < _len62; _key62++) {
        args[_key62] = arguments[_key62];
      }
      return removeNodes(editor, ...args);
    },
    select: function select$1() {
      for (var _len63 = arguments.length, args = new Array(_len63), _key63 = 0; _key63 < _len63; _key63++) {
        args[_key63] = arguments[_key63];
      }
      return select(editor, ...args);
    },
    setNodes: function setNodes$1() {
      for (var _len64 = arguments.length, args = new Array(_len64), _key64 = 0; _key64 < _len64; _key64++) {
        args[_key64] = arguments[_key64];
      }
      return setNodes(editor, ...args);
    },
    setNormalizing: function setNormalizing$1() {
      for (var _len65 = arguments.length, args = new Array(_len65), _key65 = 0; _key65 < _len65; _key65++) {
        args[_key65] = arguments[_key65];
      }
      return setNormalizing(editor, ...args);
    },
    setPoint: function setPoint$1() {
      for (var _len66 = arguments.length, args = new Array(_len66), _key66 = 0; _key66 < _len66; _key66++) {
        args[_key66] = arguments[_key66];
      }
      return setPoint(editor, ...args);
    },
    setSelection: function setSelection$1() {
      for (var _len67 = arguments.length, args = new Array(_len67), _key67 = 0; _key67 < _len67; _key67++) {
        args[_key67] = arguments[_key67];
      }
      return setSelection(editor, ...args);
    },
    splitNodes: function splitNodes$1() {
      for (var _len68 = arguments.length, args = new Array(_len68), _key68 = 0; _key68 < _len68; _key68++) {
        args[_key68] = arguments[_key68];
      }
      return splitNodes(editor, ...args);
    },
    start: function start$1() {
      for (var _len69 = arguments.length, args = new Array(_len69), _key69 = 0; _key69 < _len69; _key69++) {
        args[_key69] = arguments[_key69];
      }
      return start(editor, ...args);
    },
    string: function string$1() {
      for (var _len70 = arguments.length, args = new Array(_len70), _key70 = 0; _key70 < _len70; _key70++) {
        args[_key70] = arguments[_key70];
      }
      return string(editor, ...args);
    },
    unhangRange: function unhangRange$1() {
      for (var _len71 = arguments.length, args = new Array(_len71), _key71 = 0; _key71 < _len71; _key71++) {
        args[_key71] = arguments[_key71];
      }
      return unhangRange(editor, ...args);
    },
    unsetNodes: function unsetNodes$1() {
      for (var _len72 = arguments.length, args = new Array(_len72), _key72 = 0; _key72 < _len72; _key72++) {
        args[_key72] = arguments[_key72];
      }
      return unsetNodes(editor, ...args);
    },
    unwrapNodes: function unwrapNodes$1() {
      for (var _len73 = arguments.length, args = new Array(_len73), _key73 = 0; _key73 < _len73; _key73++) {
        args[_key73] = arguments[_key73];
      }
      return unwrapNodes(editor, ...args);
    },
    void: function _void() {
      for (var _len74 = arguments.length, args = new Array(_len74), _key74 = 0; _key74 < _len74; _key74++) {
        args[_key74] = arguments[_key74];
      }
      return getVoid(editor, ...args);
    },
    withoutNormalizing: function withoutNormalizing$1() {
      for (var _len75 = arguments.length, args = new Array(_len75), _key75 = 0; _key75 < _len75; _key75++) {
        args[_key75] = arguments[_key75];
      }
      return withoutNormalizing(editor, ...args);
    },
    wrapNodes: function wrapNodes$1() {
      for (var _len76 = arguments.length, args = new Array(_len76), _key76 = 0; _key76 < _len76; _key76++) {
        args[_key76] = arguments[_key76];
      }
      return wrapNodes(editor, ...args);
    }
  };
  return editor;
};

// ../node_modules/slate-react/dist/index.es.js
var import_direction = __toESM(require_direction());
var import_debounce = __toESM(require_debounce());
var import_throttle = __toESM(require_throttle());
var import_react = __toESM(require_react());

// ../node_modules/compute-scroll-into-view/dist/index.mjs
function t(t2) {
  return "object" == typeof t2 && null != t2 && 1 === t2.nodeType;
}
function e(t2, e2) {
  return (!e2 || "hidden" !== t2) && "visible" !== t2 && "clip" !== t2;
}
function n(t2, n3) {
  if (t2.clientHeight < t2.scrollHeight || t2.clientWidth < t2.scrollWidth) {
    var r2 = getComputedStyle(t2, null);
    return e(r2.overflowY, n3) || e(r2.overflowX, n3) || function(t3) {
      var e2 = function(t4) {
        if (!t4.ownerDocument || !t4.ownerDocument.defaultView)
          return null;
        try {
          return t4.ownerDocument.defaultView.frameElement;
        } catch (t5) {
          return null;
        }
      }(t3);
      return !!e2 && (e2.clientHeight < t3.scrollHeight || e2.clientWidth < t3.scrollWidth);
    }(t2);
  }
  return false;
}
function r(t2, e2, n3, r2, i2, o, l, d) {
  return o < t2 && l > e2 || o > t2 && l < e2 ? 0 : o <= t2 && d <= n3 || l >= e2 && d >= n3 ? o - t2 - r2 : l > e2 && d < n3 || o < t2 && d > n3 ? l - e2 + i2 : 0;
}
var i = function(e2, i2) {
  var o = window, l = i2.scrollMode, d = i2.block, f = i2.inline, h = i2.boundary, u = i2.skipOverflowHiddenElements, s = "function" == typeof h ? h : function(t2) {
    return t2 !== h;
  };
  if (!t(e2))
    throw new TypeError("Invalid target");
  for (var a, c, g = document.scrollingElement || document.documentElement, p = [], m = e2; t(m) && s(m); ) {
    if ((m = null == (c = (a = m).parentElement) ? a.getRootNode().host || null : c) === g) {
      p.push(m);
      break;
    }
    null != m && m === document.body && n(m) && !n(document.documentElement) || null != m && n(m, u) && p.push(m);
  }
  for (var w = o.visualViewport ? o.visualViewport.width : innerWidth, v = o.visualViewport ? o.visualViewport.height : innerHeight, W = window.scrollX || pageXOffset, H = window.scrollY || pageYOffset, b = e2.getBoundingClientRect(), y = b.height, E = b.width, M = b.top, V = b.right, x = b.bottom, I = b.left, C = "start" === d || "nearest" === d ? M : "end" === d ? x : M + y / 2, R = "center" === f ? I + E / 2 : "end" === f ? V : I, T = [], k = 0; k < p.length; k++) {
    var B = p[k], D = B.getBoundingClientRect(), O = D.height, X = D.width, Y = D.top, L = D.right, S = D.bottom, j = D.left;
    if ("if-needed" === l && M >= 0 && I >= 0 && x <= v && V <= w && M >= Y && x <= S && I >= j && V <= L)
      return T;
    var N = getComputedStyle(B), q = parseInt(N.borderLeftWidth, 10), z = parseInt(N.borderTopWidth, 10), A = parseInt(N.borderRightWidth, 10), F = parseInt(N.borderBottomWidth, 10), G = 0, J = 0, K = "offsetWidth" in B ? B.offsetWidth - B.clientWidth - q - A : 0, P = "offsetHeight" in B ? B.offsetHeight - B.clientHeight - z - F : 0, Q = "offsetWidth" in B ? 0 === B.offsetWidth ? 0 : X / B.offsetWidth : 0, U = "offsetHeight" in B ? 0 === B.offsetHeight ? 0 : O / B.offsetHeight : 0;
    if (g === B)
      G = "start" === d ? C : "end" === d ? C - v : "nearest" === d ? r(H, H + v, v, z, F, H + C, H + C + y, y) : C - v / 2, J = "start" === f ? R : "center" === f ? R - w / 2 : "end" === f ? R - w : r(W, W + w, w, q, A, W + R, W + R + E, E), G = Math.max(0, G + H), J = Math.max(0, J + W);
    else {
      G = "start" === d ? C - Y - z : "end" === d ? C - S + F + P : "nearest" === d ? r(Y, S, O, z, F + P, C, C + y, y) : C - (Y + O / 2) + P / 2, J = "start" === f ? R - j - q : "center" === f ? R - (j + X / 2) + K / 2 : "end" === f ? R - L + A + K : r(j, L, X, q, A + K, R, R + E, E);
      var Z = B.scrollLeft, $ = B.scrollTop;
      C += $ - (G = Math.max(0, Math.min($ + G / U, B.scrollHeight - O / U + P))), R += Z - (J = Math.max(0, Math.min(Z + J / Q, B.scrollWidth - X / Q + K)));
    }
    T.push({ el: B, top: G, left: J });
  }
  return T;
};

// ../node_modules/scroll-into-view-if-needed/es/index.js
function isOptionsObject(options) {
  return options === Object(options) && Object.keys(options).length !== 0;
}
function defaultBehavior(actions, behavior) {
  if (behavior === void 0) {
    behavior = "auto";
  }
  var canSmoothScroll = "scrollBehavior" in document.body.style;
  actions.forEach(function(_ref) {
    var el = _ref.el, top = _ref.top, left = _ref.left;
    if (el.scroll && canSmoothScroll) {
      el.scroll({
        top,
        left,
        behavior
      });
    } else {
      el.scrollTop = top;
      el.scrollLeft = left;
    }
  });
}
function getOptions(options) {
  if (options === false) {
    return {
      block: "end",
      inline: "nearest"
    };
  }
  if (isOptionsObject(options)) {
    return options;
  }
  return {
    block: "start",
    inline: "nearest"
  };
}
function scrollIntoView(target, options) {
  var isTargetAttached = target.isConnected || target.ownerDocument.documentElement.contains(target);
  if (isOptionsObject(options) && typeof options.behavior === "function") {
    return options.behavior(isTargetAttached ? i(target, options) : []);
  }
  if (!isTargetAttached) {
    return;
  }
  var computeOptions = getOptions(options);
  return defaultBehavior(i(target, computeOptions), computeOptions.behavior);
}
var es_default = scrollIntoView;

// ../node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js
var resizeObservers = [];

// ../node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js
var hasActiveObservations = function() {
  return resizeObservers.some(function(ro) {
    return ro.activeTargets.length > 0;
  });
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js
var hasSkippedObservations = function() {
  return resizeObservers.some(function(ro) {
    return ro.skippedTargets.length > 0;
  });
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js
var msg = "ResizeObserver loop completed with undelivered notifications.";
var deliverResizeLoopError = function() {
  var event;
  if (typeof ErrorEvent === "function") {
    event = new ErrorEvent("error", {
      message: msg
    });
  } else {
    event = document.createEvent("Event");
    event.initEvent("error", false, false);
    event.message = msg;
  }
  window.dispatchEvent(event);
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js
var ResizeObserverBoxOptions;
(function(ResizeObserverBoxOptions2) {
  ResizeObserverBoxOptions2["BORDER_BOX"] = "border-box";
  ResizeObserverBoxOptions2["CONTENT_BOX"] = "content-box";
  ResizeObserverBoxOptions2["DEVICE_PIXEL_CONTENT_BOX"] = "device-pixel-content-box";
})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));

// ../node_modules/@juggle/resize-observer/lib/utils/freeze.js
var freeze2 = function(obj) {
  return Object.freeze(obj);
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js
var ResizeObserverSize = /* @__PURE__ */ function() {
  function ResizeObserverSize2(inlineSize, blockSize) {
    this.inlineSize = inlineSize;
    this.blockSize = blockSize;
    freeze2(this);
  }
  return ResizeObserverSize2;
}();

// ../node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js
var DOMRectReadOnly = function() {
  function DOMRectReadOnly2(x, y, width, height) {
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.top = this.y;
    this.left = this.x;
    this.bottom = this.top + this.height;
    this.right = this.left + this.width;
    return freeze2(this);
  }
  DOMRectReadOnly2.prototype.toJSON = function() {
    var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;
    return { x, y, top, right, bottom, left, width, height };
  };
  DOMRectReadOnly2.fromRect = function(rectangle) {
    return new DOMRectReadOnly2(rectangle.x, rectangle.y, rectangle.width, rectangle.height);
  };
  return DOMRectReadOnly2;
}();

// ../node_modules/@juggle/resize-observer/lib/utils/element.js
var isSVG = function(target) {
  return target instanceof SVGElement && "getBBox" in target;
};
var isHidden = function(target) {
  if (isSVG(target)) {
    var _a = target.getBBox(), width = _a.width, height = _a.height;
    return !width && !height;
  }
  var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;
  return !(offsetWidth || offsetHeight || target.getClientRects().length);
};
var isElement2 = function(obj) {
  var _a;
  if (obj instanceof Element) {
    return true;
  }
  var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;
  return !!(scope && obj instanceof scope.Element);
};
var isReplacedElement = function(target) {
  switch (target.tagName) {
    case "INPUT":
      if (target.type !== "image") {
        break;
      }
    case "VIDEO":
    case "AUDIO":
    case "EMBED":
    case "OBJECT":
    case "CANVAS":
    case "IFRAME":
    case "IMG":
      return true;
  }
  return false;
};

// ../node_modules/@juggle/resize-observer/lib/utils/global.js
var global2 = typeof window !== "undefined" ? window : {};

// ../node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js
var cache = /* @__PURE__ */ new WeakMap();
var scrollRegexp = /auto|scroll/;
var verticalRegexp = /^tb|vertical/;
var IE = /msie|trident/i.test(global2.navigator && global2.navigator.userAgent);
var parseDimension = function(pixel) {
  return parseFloat(pixel || "0");
};
var size = function(inlineSize, blockSize, switchSizes) {
  if (inlineSize === void 0) {
    inlineSize = 0;
  }
  if (blockSize === void 0) {
    blockSize = 0;
  }
  if (switchSizes === void 0) {
    switchSizes = false;
  }
  return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);
};
var zeroBoxes = freeze2({
  devicePixelContentBoxSize: size(),
  borderBoxSize: size(),
  contentBoxSize: size(),
  contentRect: new DOMRectReadOnly(0, 0, 0, 0)
});
var calculateBoxSizes = function(target, forceRecalculation) {
  if (forceRecalculation === void 0) {
    forceRecalculation = false;
  }
  if (cache.has(target) && !forceRecalculation) {
    return cache.get(target);
  }
  if (isHidden(target)) {
    cache.set(target, zeroBoxes);
    return zeroBoxes;
  }
  var cs = getComputedStyle(target);
  var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();
  var removePadding = !IE && cs.boxSizing === "border-box";
  var switchSizes = verticalRegexp.test(cs.writingMode || "");
  var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || "");
  var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || "");
  var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);
  var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);
  var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);
  var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);
  var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);
  var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);
  var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);
  var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);
  var horizontalPadding = paddingLeft + paddingRight;
  var verticalPadding = paddingTop + paddingBottom;
  var horizontalBorderArea = borderLeft + borderRight;
  var verticalBorderArea = borderTop + borderBottom;
  var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;
  var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;
  var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;
  var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;
  var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;
  var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;
  var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;
  var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;
  var boxes = freeze2({
    devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),
    borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),
    contentBoxSize: size(contentWidth, contentHeight, switchSizes),
    contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)
  });
  cache.set(target, boxes);
  return boxes;
};
var calculateBoxSize = function(target, observedBox, forceRecalculation) {
  var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;
  switch (observedBox) {
    case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:
      return devicePixelContentBoxSize;
    case ResizeObserverBoxOptions.BORDER_BOX:
      return borderBoxSize;
    default:
      return contentBoxSize;
  }
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js
var ResizeObserverEntry = /* @__PURE__ */ function() {
  function ResizeObserverEntry2(target) {
    var boxes = calculateBoxSizes(target);
    this.target = target;
    this.contentRect = boxes.contentRect;
    this.borderBoxSize = freeze2([boxes.borderBoxSize]);
    this.contentBoxSize = freeze2([boxes.contentBoxSize]);
    this.devicePixelContentBoxSize = freeze2([boxes.devicePixelContentBoxSize]);
  }
  return ResizeObserverEntry2;
}();

// ../node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js
var calculateDepthForNode = function(node3) {
  if (isHidden(node3)) {
    return Infinity;
  }
  var depth = 0;
  var parent3 = node3.parentNode;
  while (parent3) {
    depth += 1;
    parent3 = parent3.parentNode;
  }
  return depth;
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js
var broadcastActiveObservations = function() {
  var shallowestDepth = Infinity;
  var callbacks2 = [];
  resizeObservers.forEach(function processObserver(ro) {
    if (ro.activeTargets.length === 0) {
      return;
    }
    var entries = [];
    ro.activeTargets.forEach(function processTarget(ot) {
      var entry = new ResizeObserverEntry(ot.target);
      var targetDepth = calculateDepthForNode(ot.target);
      entries.push(entry);
      ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);
      if (targetDepth < shallowestDepth) {
        shallowestDepth = targetDepth;
      }
    });
    callbacks2.push(function resizeObserverCallback() {
      ro.callback.call(ro.observer, entries, ro.observer);
    });
    ro.activeTargets.splice(0, ro.activeTargets.length);
  });
  for (var _i = 0, callbacks_1 = callbacks2; _i < callbacks_1.length; _i++) {
    var callback = callbacks_1[_i];
    callback();
  }
  return shallowestDepth;
};

// ../node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js
var gatherActiveObservationsAtDepth = function(depth) {
  resizeObservers.forEach(function processObserver(ro) {
    ro.activeTargets.splice(0, ro.activeTargets.length);
    ro.skippedTargets.splice(0, ro.skippedTargets.length);
    ro.observationTargets.forEach(function processTarget(ot) {
      if (ot.isActive()) {
        if (calculateDepthForNode(ot.target) > depth) {
          ro.activeTargets.push(ot);
        } else {
          ro.skippedTargets.push(ot);
        }
      }
    });
  });
};

// ../node_modules/@juggle/resize-observer/lib/utils/process.js
var process2 = function() {
  var depth = 0;
  gatherActiveObservationsAtDepth(depth);
  while (hasActiveObservations()) {
    depth = broadcastActiveObservations();
    gatherActiveObservationsAtDepth(depth);
  }
  if (hasSkippedObservations()) {
    deliverResizeLoopError();
  }
  return depth > 0;
};

// ../node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js
var trigger;
var callbacks = [];
var notify = function() {
  return callbacks.splice(0).forEach(function(cb) {
    return cb();
  });
};
var queueMicroTask = function(callback) {
  if (!trigger) {
    var toggle_1 = 0;
    var el_1 = document.createTextNode("");
    var config = { characterData: true };
    new MutationObserver(function() {
      return notify();
    }).observe(el_1, config);
    trigger = function() {
      el_1.textContent = "".concat(toggle_1 ? toggle_1-- : toggle_1++);
    };
  }
  callbacks.push(callback);
  trigger();
};

// ../node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js
var queueResizeObserver = function(cb) {
  queueMicroTask(function ResizeObserver2() {
    requestAnimationFrame(cb);
  });
};

// ../node_modules/@juggle/resize-observer/lib/utils/scheduler.js
var watching = 0;
var isWatching = function() {
  return !!watching;
};
var CATCH_PERIOD = 250;
var observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };
var events = [
  "resize",
  "load",
  "transitionend",
  "animationend",
  "animationstart",
  "animationiteration",
  "keyup",
  "keydown",
  "mouseup",
  "mousedown",
  "mouseover",
  "mouseout",
  "blur",
  "focus"
];
var time = function(timeout) {
  if (timeout === void 0) {
    timeout = 0;
  }
  return Date.now() + timeout;
};
var scheduled = false;
var Scheduler = function() {
  function Scheduler2() {
    var _this = this;
    this.stopped = true;
    this.listener = function() {
      return _this.schedule();
    };
  }
  Scheduler2.prototype.run = function(timeout) {
    var _this = this;
    if (timeout === void 0) {
      timeout = CATCH_PERIOD;
    }
    if (scheduled) {
      return;
    }
    scheduled = true;
    var until = time(timeout);
    queueResizeObserver(function() {
      var elementsHaveResized = false;
      try {
        elementsHaveResized = process2();
      } finally {
        scheduled = false;
        timeout = until - time();
        if (!isWatching()) {
          return;
        }
        if (elementsHaveResized) {
          _this.run(1e3);
        } else if (timeout > 0) {
          _this.run(timeout);
        } else {
          _this.start();
        }
      }
    });
  };
  Scheduler2.prototype.schedule = function() {
    this.stop();
    this.run();
  };
  Scheduler2.prototype.observe = function() {
    var _this = this;
    var cb = function() {
      return _this.observer && _this.observer.observe(document.body, observerConfig);
    };
    document.body ? cb() : global2.addEventListener("DOMContentLoaded", cb);
  };
  Scheduler2.prototype.start = function() {
    var _this = this;
    if (this.stopped) {
      this.stopped = false;
      this.observer = new MutationObserver(this.listener);
      this.observe();
      events.forEach(function(name) {
        return global2.addEventListener(name, _this.listener, true);
      });
    }
  };
  Scheduler2.prototype.stop = function() {
    var _this = this;
    if (!this.stopped) {
      this.observer && this.observer.disconnect();
      events.forEach(function(name) {
        return global2.removeEventListener(name, _this.listener, true);
      });
      this.stopped = true;
    }
  };
  return Scheduler2;
}();
var scheduler = new Scheduler();
var updateCount = function(n3) {
  !watching && n3 > 0 && scheduler.start();
  watching += n3;
  !watching && scheduler.stop();
};

// ../node_modules/@juggle/resize-observer/lib/ResizeObservation.js
var skipNotifyOnElement = function(target) {
  return !isSVG(target) && !isReplacedElement(target) && getComputedStyle(target).display === "inline";
};
var ResizeObservation = function() {
  function ResizeObservation2(target, observedBox) {
    this.target = target;
    this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;
    this.lastReportedSize = {
      inlineSize: 0,
      blockSize: 0
    };
  }
  ResizeObservation2.prototype.isActive = function() {
    var size2 = calculateBoxSize(this.target, this.observedBox, true);
    if (skipNotifyOnElement(this.target)) {
      this.lastReportedSize = size2;
    }
    if (this.lastReportedSize.inlineSize !== size2.inlineSize || this.lastReportedSize.blockSize !== size2.blockSize) {
      return true;
    }
    return false;
  };
  return ResizeObservation2;
}();

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js
var ResizeObserverDetail = /* @__PURE__ */ function() {
  function ResizeObserverDetail2(resizeObserver, callback) {
    this.activeTargets = [];
    this.skippedTargets = [];
    this.observationTargets = [];
    this.observer = resizeObserver;
    this.callback = callback;
  }
  return ResizeObserverDetail2;
}();

// ../node_modules/@juggle/resize-observer/lib/ResizeObserverController.js
var observerMap = /* @__PURE__ */ new WeakMap();
var getObservationIndex = function(observationTargets, target) {
  for (var i2 = 0; i2 < observationTargets.length; i2 += 1) {
    if (observationTargets[i2].target === target) {
      return i2;
    }
  }
  return -1;
};
var ResizeObserverController = function() {
  function ResizeObserverController2() {
  }
  ResizeObserverController2.connect = function(resizeObserver, callback) {
    var detail = new ResizeObserverDetail(resizeObserver, callback);
    observerMap.set(resizeObserver, detail);
  };
  ResizeObserverController2.observe = function(resizeObserver, target, options) {
    var detail = observerMap.get(resizeObserver);
    var firstObservation = detail.observationTargets.length === 0;
    if (getObservationIndex(detail.observationTargets, target) < 0) {
      firstObservation && resizeObservers.push(detail);
      detail.observationTargets.push(new ResizeObservation(target, options && options.box));
      updateCount(1);
      scheduler.schedule();
    }
  };
  ResizeObserverController2.unobserve = function(resizeObserver, target) {
    var detail = observerMap.get(resizeObserver);
    var index = getObservationIndex(detail.observationTargets, target);
    var lastObservation = detail.observationTargets.length === 1;
    if (index >= 0) {
      lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);
      detail.observationTargets.splice(index, 1);
      updateCount(-1);
    }
  };
  ResizeObserverController2.disconnect = function(resizeObserver) {
    var _this = this;
    var detail = observerMap.get(resizeObserver);
    detail.observationTargets.slice().forEach(function(ot) {
      return _this.unobserve(resizeObserver, ot.target);
    });
    detail.activeTargets.splice(0, detail.activeTargets.length);
  };
  return ResizeObserverController2;
}();

// ../node_modules/@juggle/resize-observer/lib/ResizeObserver.js
var ResizeObserver = function() {
  function ResizeObserver2(callback) {
    if (arguments.length === 0) {
      throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");
    }
    if (typeof callback !== "function") {
      throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");
    }
    ResizeObserverController.connect(this, callback);
  }
  ResizeObserver2.prototype.observe = function(target, options) {
    if (arguments.length === 0) {
      throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");
    }
    if (!isElement2(target)) {
      throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");
    }
    ResizeObserverController.observe(this, target, options);
  };
  ResizeObserver2.prototype.unobserve = function(target) {
    if (arguments.length === 0) {
      throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");
    }
    if (!isElement2(target)) {
      throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");
    }
    ResizeObserverController.unobserve(this, target);
  };
  ResizeObserver2.prototype.disconnect = function() {
    ResizeObserverController.disconnect(this);
  };
  ResizeObserver2.toString = function() {
    return "function ResizeObserver () { [polyfill code] }";
  };
  return ResizeObserver2;
}();

// ../node_modules/slate-react/dist/index.es.js
var import_is_hotkey = __toESM(require_lib());
var import_react_dom = __toESM(require_react_dom());
function _defineProperty2(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _objectWithoutPropertiesLoose2(source, excluded) {
  if (source == null)
    return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i2;
  for (i2 = 0; i2 < sourceKeys.length; i2++) {
    key = sourceKeys[i2];
    if (excluded.indexOf(key) >= 0)
      continue;
    target[key] = source[key];
  }
  return target;
}
function _objectWithoutProperties2(source, excluded) {
  if (source == null)
    return {};
  var target = _objectWithoutPropertiesLoose2(source, excluded);
  var key, i2;
  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
    for (i2 = 0; i2 < sourceSymbolKeys.length; i2++) {
      key = sourceSymbolKeys[i2];
      if (excluded.indexOf(key) >= 0)
        continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key))
        continue;
      target[key] = source[key];
    }
  }
  return target;
}
var n2 = 0;
var Key = class {
  constructor() {
    this.id = "".concat(n2++);
  }
};
var NODE_TO_INDEX = /* @__PURE__ */ new WeakMap();
var NODE_TO_PARENT = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_WINDOW = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_ELEMENT = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PLACEHOLDER_ELEMENT = /* @__PURE__ */ new WeakMap();
var ELEMENT_TO_NODE = /* @__PURE__ */ new WeakMap();
var NODE_TO_ELEMENT = /* @__PURE__ */ new WeakMap();
var NODE_TO_KEY = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_KEY_TO_ELEMENT = /* @__PURE__ */ new WeakMap();
var IS_READ_ONLY = /* @__PURE__ */ new WeakMap();
var IS_FOCUSED = /* @__PURE__ */ new WeakMap();
var IS_COMPOSING = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_USER_SELECTION = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_ON_CHANGE = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_SCHEDULE_FLUSH = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_INSERTION_MARKS = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_USER_MARKS = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_DIFFS = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_ACTION = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_PENDING_SELECTION = /* @__PURE__ */ new WeakMap();
var EDITOR_TO_FORCE_RENDER = /* @__PURE__ */ new WeakMap();
var PLACEHOLDER_SYMBOL = Symbol("placeholder");
var MARK_PLACEHOLDER_SYMBOL = Symbol("mark-placeholder");
var DOMText = globalThis.Text;
var getDefaultView = (value) => {
  return value && value.ownerDocument && value.ownerDocument.defaultView || null;
};
var isDOMComment = (value) => {
  return isDOMNode(value) && value.nodeType === 8;
};
var isDOMElement = (value) => {
  return isDOMNode(value) && value.nodeType === 1;
};
var isDOMNode = (value) => {
  var window2 = getDefaultView(value);
  return !!window2 && value instanceof window2.Node;
};
var isDOMSelection = (value) => {
  var window2 = value && value.anchorNode && getDefaultView(value.anchorNode);
  return !!window2 && value instanceof window2.Selection;
};
var isDOMText = (value) => {
  return isDOMNode(value) && value.nodeType === 3;
};
var isPlainTextOnlyPaste = (event) => {
  return event.clipboardData && event.clipboardData.getData("text/plain") !== "" && event.clipboardData.types.length === 1;
};
var normalizeDOMPoint = (domPoint) => {
  var [node3, offset] = domPoint;
  if (isDOMElement(node3) && node3.childNodes.length) {
    var isLast = offset === node3.childNodes.length;
    var index = isLast ? offset - 1 : offset;
    [node3, index] = getEditableChildAndIndex(node3, index, isLast ? "backward" : "forward");
    isLast = index < offset;
    while (isDOMElement(node3) && node3.childNodes.length) {
      var i2 = isLast ? node3.childNodes.length - 1 : 0;
      node3 = getEditableChild(node3, i2, isLast ? "backward" : "forward");
    }
    offset = isLast && node3.textContent != null ? node3.textContent.length : 0;
  }
  return [node3, offset];
};
var hasShadowRoot = (node3) => {
  var parent3 = node3 && node3.parentNode;
  while (parent3) {
    if (parent3.toString() === "[object ShadowRoot]") {
      return true;
    }
    parent3 = parent3.parentNode;
  }
  return false;
};
var getEditableChildAndIndex = (parent3, index, direction) => {
  var {
    childNodes
  } = parent3;
  var child = childNodes[index];
  var i2 = index;
  var triedForward = false;
  var triedBackward = false;
  while (isDOMComment(child) || isDOMElement(child) && child.childNodes.length === 0 || isDOMElement(child) && child.getAttribute("contenteditable") === "false") {
    if (triedForward && triedBackward) {
      break;
    }
    if (i2 >= childNodes.length) {
      triedForward = true;
      i2 = index - 1;
      direction = "backward";
      continue;
    }
    if (i2 < 0) {
      triedBackward = true;
      i2 = index + 1;
      direction = "forward";
      continue;
    }
    child = childNodes[i2];
    index = i2;
    i2 += direction === "forward" ? 1 : -1;
  }
  return [child, index];
};
var getEditableChild = (parent3, index, direction) => {
  var [child] = getEditableChildAndIndex(parent3, index, direction);
  return child;
};
var getPlainText = (domNode) => {
  var text = "";
  if (isDOMText(domNode) && domNode.nodeValue) {
    return domNode.nodeValue;
  }
  if (isDOMElement(domNode)) {
    for (var childNode of Array.from(domNode.childNodes)) {
      text += getPlainText(childNode);
    }
    var display = getComputedStyle(domNode).getPropertyValue("display");
    if (display === "block" || display === "list" || domNode.tagName === "BR") {
      text += "\n";
    }
  }
  return text;
};
var catchSlateFragment = /data-slate-fragment="(.+?)"/m;
var getSlateFragmentAttribute = (dataTransfer) => {
  var htmlData = dataTransfer.getData("text/html");
  var [, fragment2] = htmlData.match(catchSlateFragment) || [];
  return fragment2;
};
var isTrackedMutation = (editor, mutation, batch) => {
  var {
    target
  } = mutation;
  if (isDOMElement(target) && target.matches('[contentEditable="false"]')) {
    return false;
  }
  var {
    document: document2
  } = ReactEditor.getWindow(editor);
  if (document2.contains(target)) {
    return ReactEditor.hasDOMNode(editor, target, {
      editable: true
    });
  }
  var parentMutation = batch.find((_ref) => {
    var {
      addedNodes,
      removedNodes
    } = _ref;
    for (var node3 of addedNodes) {
      if (node3 === target || node3.contains(target)) {
        return true;
      }
    }
    for (var _node of removedNodes) {
      if (_node === target || _node.contains(target)) {
        return true;
      }
    }
  });
  if (!parentMutation || parentMutation === mutation) {
    return false;
  }
  return isTrackedMutation(editor, parentMutation, batch);
};
var IS_REACT_VERSION_17_OR_ABOVE = parseInt(import_react.default.version.split(".")[0], 10) >= 17;
var IS_IOS = typeof navigator !== "undefined" && typeof window !== "undefined" && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
var IS_APPLE = typeof navigator !== "undefined" && /Mac OS X/.test(navigator.userAgent);
var IS_ANDROID = typeof navigator !== "undefined" && /Android/.test(navigator.userAgent);
var IS_FIREFOX = typeof navigator !== "undefined" && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);
var IS_SAFARI = typeof navigator !== "undefined" && /Version\/[\d\.]+.*Safari/.test(navigator.userAgent);
var IS_EDGE_LEGACY = typeof navigator !== "undefined" && /Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent);
var IS_CHROME = typeof navigator !== "undefined" && /Chrome/i.test(navigator.userAgent);
var IS_CHROME_LEGACY = typeof navigator !== "undefined" && /Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent);
var IS_FIREFOX_LEGACY = typeof navigator !== "undefined" && /^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent);
var IS_UC_MOBILE = typeof navigator !== "undefined" && /.*UCBrowser/.test(navigator.userAgent);
var IS_WECHATBROWSER = typeof navigator !== "undefined" && /.*Wechat/.test(navigator.userAgent);
var CAN_USE_DOM = !!(typeof window !== "undefined" && typeof window.document !== "undefined" && typeof window.document.createElement !== "undefined");
var HAS_BEFORE_INPUT_SUPPORT = !IS_CHROME_LEGACY && !IS_EDGE_LEGACY && // globalThis is undefined in older browsers
typeof globalThis !== "undefined" && globalThis.InputEvent && // @ts-ignore The `getTargetRanges` property isn't recognized.
typeof globalThis.InputEvent.prototype.getTargetRanges === "function";
var ReactEditor = {
  /**
   * Check if the user is currently composing inside the editor.
   */
  isComposing(editor) {
    return !!IS_COMPOSING.get(editor);
  },
  /**
   * Return the host window of the current editor.
   */
  getWindow(editor) {
    var window2 = EDITOR_TO_WINDOW.get(editor);
    if (!window2) {
      throw new Error("Unable to find a host window element for this editor");
    }
    return window2;
  },
  /**
   * Find a key for a Slate node.
   */
  findKey(editor, node3) {
    var key = NODE_TO_KEY.get(node3);
    if (!key) {
      key = new Key();
      NODE_TO_KEY.set(node3, key);
    }
    return key;
  },
  /**
   * Find the path of Slate node.
   */
  findPath(editor, node3) {
    var path3 = [];
    var child = node3;
    while (true) {
      var parent3 = NODE_TO_PARENT.get(child);
      if (parent3 == null) {
        if (Editor.isEditor(child)) {
          return path3;
        } else {
          break;
        }
      }
      var i2 = NODE_TO_INDEX.get(child);
      if (i2 == null) {
        break;
      }
      path3.unshift(i2);
      child = parent3;
    }
    throw new Error("Unable to find the path for Slate node: ".concat(Scrubber.stringify(node3)));
  },
  /**
   * Find the DOM node that implements DocumentOrShadowRoot for the editor.
   */
  findDocumentOrShadowRoot(editor) {
    var el = ReactEditor.toDOMNode(editor, editor);
    var root = el.getRootNode();
    if ((root instanceof Document || root instanceof ShadowRoot) && root.getSelection != null) {
      return root;
    }
    return el.ownerDocument;
  },
  /**
   * Check if the editor is focused.
   */
  isFocused(editor) {
    return !!IS_FOCUSED.get(editor);
  },
  /**
   * Check if the editor is in read-only mode.
   */
  isReadOnly(editor) {
    return !!IS_READ_ONLY.get(editor);
  },
  /**
   * Blur the editor.
   */
  blur(editor) {
    var el = ReactEditor.toDOMNode(editor, editor);
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    IS_FOCUSED.set(editor, false);
    if (root.activeElement === el) {
      el.blur();
    }
  },
  /**
   * Focus the editor.
   */
  focus(editor) {
    var el = ReactEditor.toDOMNode(editor, editor);
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    IS_FOCUSED.set(editor, true);
    if (root.activeElement !== el) {
      el.focus({
        preventScroll: true
      });
    }
  },
  /**
   * Deselect the editor.
   */
  deselect(editor) {
    var {
      selection
    } = editor;
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    var domSelection = root.getSelection();
    if (domSelection && domSelection.rangeCount > 0) {
      domSelection.removeAllRanges();
    }
    if (selection) {
      Transforms.deselect(editor);
    }
  },
  /**
   * Check if a DOM node is within the editor.
   */
  hasDOMNode(editor, target) {
    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    var {
      editable = false
    } = options;
    var editorEl = ReactEditor.toDOMNode(editor, editor);
    var targetEl;
    try {
      targetEl = isDOMElement(target) ? target : target.parentElement;
    } catch (err) {
      if (!err.message.includes('Permission denied to access property "nodeType"')) {
        throw err;
      }
    }
    if (!targetEl) {
      return false;
    }
    return targetEl.closest("[data-slate-editor]") === editorEl && (!editable || targetEl.isContentEditable ? true : typeof targetEl.isContentEditable === "boolean" && // isContentEditable exists only on HTMLElement, and on other nodes it will be undefined
    // this is the core logic that lets you know you got the right editor.selection instead of null when editor is contenteditable="false"(readOnly)
    targetEl.closest('[contenteditable="false"]') === editorEl || !!targetEl.getAttribute("data-slate-zero-width"));
  },
  /**
   * Insert data from a `DataTransfer` into the editor.
   */
  insertData(editor, data) {
    editor.insertData(data);
  },
  /**
   * Insert fragment data from a `DataTransfer` into the editor.
   */
  insertFragmentData(editor, data) {
    return editor.insertFragmentData(data);
  },
  /**
   * Insert text data from a `DataTransfer` into the editor.
   */
  insertTextData(editor, data) {
    return editor.insertTextData(data);
  },
  /**
   * Sets data from the currently selected fragment on a `DataTransfer`.
   */
  setFragmentData(editor, data, originEvent) {
    editor.setFragmentData(data, originEvent);
  },
  /**
   * Find the native DOM element from a Slate node.
   */
  toDOMNode(editor, node3) {
    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);
    var domNode = Editor.isEditor(node3) ? EDITOR_TO_ELEMENT.get(editor) : KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.get(ReactEditor.findKey(editor, node3));
    if (!domNode) {
      throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Scrubber.stringify(node3)));
    }
    return domNode;
  },
  /**
   * Find a native DOM selection point from a Slate point.
   */
  toDOMPoint(editor, point3) {
    var [node3] = Editor.node(editor, point3.path);
    var el = ReactEditor.toDOMNode(editor, node3);
    var domPoint;
    if (Editor.void(editor, {
      at: point3
    })) {
      point3 = {
        path: point3.path,
        offset: 0
      };
    }
    var selector = "[data-slate-string], [data-slate-zero-width]";
    var texts = Array.from(el.querySelectorAll(selector));
    var start2 = 0;
    for (var i2 = 0; i2 < texts.length; i2++) {
      var text = texts[i2];
      var domNode = text.childNodes[0];
      if (domNode == null || domNode.textContent == null) {
        continue;
      }
      var {
        length
      } = domNode.textContent;
      var attr = text.getAttribute("data-slate-length");
      var trueLength = attr == null ? length : parseInt(attr, 10);
      var end2 = start2 + trueLength;
      var nextText = texts[i2 + 1];
      if (point3.offset === end2 && nextText !== null && nextText !== void 0 && nextText.hasAttribute("data-slate-mark-placeholder")) {
        var _nextText$textContent;
        var domText = nextText.childNodes[0];
        domPoint = [
          // COMPAT: If we don't explicity set the dom point to be on the actual
          // dom text element, chrome will put the selection behind the actual dom
          // text element, causing domRange.getBoundingClientRect() calls on a collapsed
          // selection to return incorrect zero values (https://bugs.chromium.org/p/chromium/issues/detail?id=435438)
          // which will cause issues when scrolling to it.
          domText instanceof DOMText ? domText : nextText,
          (_nextText$textContent = nextText.textContent) !== null && _nextText$textContent !== void 0 && _nextText$textContent.startsWith("\uFEFF") ? 1 : 0
        ];
        break;
      }
      if (point3.offset <= end2) {
        var offset = Math.min(length, Math.max(0, point3.offset - start2));
        domPoint = [domNode, offset];
        break;
      }
      start2 = end2;
    }
    if (!domPoint) {
      throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Scrubber.stringify(point3)));
    }
    return domPoint;
  },
  /**
   * Find a native DOM range from a Slate `range`.
   *
   * Notice: the returned range will always be ordinal regardless of the direction of Slate `range` due to DOM API limit.
   *
   * there is no way to create a reverse DOM Range using Range.setStart/setEnd
   * according to https://dom.spec.whatwg.org/#concept-range-bp-set.
   */
  toDOMRange(editor, range2) {
    var {
      anchor,
      focus
    } = range2;
    var isBackward = Range.isBackward(range2);
    var domAnchor = ReactEditor.toDOMPoint(editor, anchor);
    var domFocus = Range.isCollapsed(range2) ? domAnchor : ReactEditor.toDOMPoint(editor, focus);
    var window2 = ReactEditor.getWindow(editor);
    var domRange = window2.document.createRange();
    var [startNode, startOffset] = isBackward ? domFocus : domAnchor;
    var [endNode, endOffset] = isBackward ? domAnchor : domFocus;
    var startEl = isDOMElement(startNode) ? startNode : startNode.parentElement;
    var isStartAtZeroWidth = !!startEl.getAttribute("data-slate-zero-width");
    var endEl = isDOMElement(endNode) ? endNode : endNode.parentElement;
    var isEndAtZeroWidth = !!endEl.getAttribute("data-slate-zero-width");
    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset);
    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset);
    return domRange;
  },
  /**
   * Find a Slate node from a native DOM `element`.
   */
  toSlateNode(editor, domNode) {
    var domEl = isDOMElement(domNode) ? domNode : domNode.parentElement;
    if (domEl && !domEl.hasAttribute("data-slate-node")) {
      domEl = domEl.closest("[data-slate-node]");
    }
    var node3 = domEl ? ELEMENT_TO_NODE.get(domEl) : null;
    if (!node3) {
      throw new Error("Cannot resolve a Slate node from DOM node: ".concat(domEl));
    }
    return node3;
  },
  /**
   * Get the target range from a DOM `event`.
   */
  findEventRange(editor, event) {
    if ("nativeEvent" in event) {
      event = event.nativeEvent;
    }
    var {
      clientX: x,
      clientY: y,
      target
    } = event;
    if (x == null || y == null) {
      throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(event));
    }
    var node3 = ReactEditor.toSlateNode(editor, event.target);
    var path3 = ReactEditor.findPath(editor, node3);
    if (Element2.isElement(node3) && Editor.isVoid(editor, node3)) {
      var rect = target.getBoundingClientRect();
      var isPrev = editor.isInline(node3) ? x - rect.left < rect.left + rect.width - x : y - rect.top < rect.top + rect.height - y;
      var edge = Editor.point(editor, path3, {
        edge: isPrev ? "start" : "end"
      });
      var point3 = isPrev ? Editor.before(editor, edge) : Editor.after(editor, edge);
      if (point3) {
        var _range = Editor.range(editor, point3);
        return _range;
      }
    }
    var domRange;
    var {
      document: document2
    } = ReactEditor.getWindow(editor);
    if (document2.caretRangeFromPoint) {
      domRange = document2.caretRangeFromPoint(x, y);
    } else {
      var position = document2.caretPositionFromPoint(x, y);
      if (position) {
        domRange = document2.createRange();
        domRange.setStart(position.offsetNode, position.offset);
        domRange.setEnd(position.offsetNode, position.offset);
      }
    }
    if (!domRange) {
      throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(event));
    }
    var range2 = ReactEditor.toSlateRange(editor, domRange, {
      exactMatch: false,
      suppressThrow: false
    });
    return range2;
  },
  /**
   * Find a Slate point from a DOM selection's `domNode` and `domOffset`.
   */
  toSlatePoint(editor, domPoint, options) {
    var {
      exactMatch,
      suppressThrow
    } = options;
    var [nearestNode, nearestOffset] = exactMatch ? domPoint : normalizeDOMPoint(domPoint);
    var parentNode = nearestNode.parentNode;
    var textNode = null;
    var offset = 0;
    if (parentNode) {
      var _domNode$textContent, _domNode$textContent2;
      var editorEl = ReactEditor.toDOMNode(editor, editor);
      var potentialVoidNode = parentNode.closest('[data-slate-void="true"]');
      var voidNode = potentialVoidNode && editorEl.contains(potentialVoidNode) ? potentialVoidNode : null;
      var leafNode = parentNode.closest("[data-slate-leaf]");
      var domNode = null;
      if (leafNode) {
        textNode = leafNode.closest('[data-slate-node="text"]');
        if (textNode) {
          var window2 = ReactEditor.getWindow(editor);
          var range2 = window2.document.createRange();
          range2.setStart(textNode, 0);
          range2.setEnd(nearestNode, nearestOffset);
          var contents = range2.cloneContents();
          var removals = [...Array.prototype.slice.call(contents.querySelectorAll("[data-slate-zero-width]")), ...Array.prototype.slice.call(contents.querySelectorAll("[contenteditable=false]"))];
          removals.forEach((el) => {
            if (IS_ANDROID && !exactMatch && el.hasAttribute("data-slate-zero-width") && el.textContent.length > 0 && el.textContext !== "\uFEFF") {
              if (el.textContent.startsWith("\uFEFF")) {
                el.textContent = el.textContent.slice(1);
              }
              return;
            }
            el.parentNode.removeChild(el);
          });
          offset = contents.textContent.length;
          domNode = textNode;
        }
      } else if (voidNode) {
        var leafNodes = voidNode.querySelectorAll("[data-slate-leaf]");
        for (var index = 0; index < leafNodes.length; index++) {
          var current2 = leafNodes[index];
          if (ReactEditor.hasDOMNode(editor, current2)) {
            leafNode = current2;
            break;
          }
        }
        if (!leafNode) {
          offset = 1;
        } else {
          textNode = leafNode.closest('[data-slate-node="text"]');
          domNode = leafNode;
          offset = domNode.textContent.length;
          domNode.querySelectorAll("[data-slate-zero-width]").forEach((el) => {
            offset -= el.textContent.length;
          });
        }
      }
      if (domNode && offset === domNode.textContent.length && // COMPAT: Android IMEs might remove the zero width space while composing,
      // and we don't add it for line-breaks.
      IS_ANDROID && domNode.getAttribute("data-slate-zero-width") === "z" && (_domNode$textContent = domNode.textContent) !== null && _domNode$textContent !== void 0 && _domNode$textContent.startsWith("\uFEFF") && (parentNode.hasAttribute("data-slate-zero-width") || IS_FIREFOX && (_domNode$textContent2 = domNode.textContent) !== null && _domNode$textContent2 !== void 0 && _domNode$textContent2.endsWith("\n\n"))) {
        offset--;
      }
    }
    if (IS_ANDROID && !textNode && !exactMatch) {
      var node3 = parentNode.hasAttribute("data-slate-node") ? parentNode : parentNode.closest("[data-slate-node]");
      if (node3 && ReactEditor.hasDOMNode(editor, node3, {
        editable: true
      })) {
        var _slateNode = ReactEditor.toSlateNode(editor, node3);
        var {
          path: _path,
          offset: _offset
        } = Editor.start(editor, ReactEditor.findPath(editor, _slateNode));
        if (!node3.querySelector("[data-slate-leaf]")) {
          _offset = nearestOffset;
        }
        return {
          path: _path,
          offset: _offset
        };
      }
    }
    if (!textNode) {
      if (suppressThrow) {
        return null;
      }
      throw new Error("Cannot resolve a Slate point from DOM point: ".concat(domPoint));
    }
    var slateNode = ReactEditor.toSlateNode(editor, textNode);
    var path3 = ReactEditor.findPath(editor, slateNode);
    return {
      path: path3,
      offset
    };
  },
  /**
   * Find a Slate range from a DOM range or selection.
   */
  toSlateRange(editor, domRange, options) {
    var {
      exactMatch,
      suppressThrow
    } = options;
    var el = isDOMSelection(domRange) ? domRange.anchorNode : domRange.startContainer;
    var anchorNode;
    var anchorOffset;
    var focusNode;
    var focusOffset;
    var isCollapsed;
    if (el) {
      if (isDOMSelection(domRange)) {
        anchorNode = domRange.anchorNode;
        anchorOffset = domRange.anchorOffset;
        focusNode = domRange.focusNode;
        focusOffset = domRange.focusOffset;
        if (IS_CHROME && hasShadowRoot(anchorNode)) {
          isCollapsed = domRange.anchorNode === domRange.focusNode && domRange.anchorOffset === domRange.focusOffset;
        } else {
          isCollapsed = domRange.isCollapsed;
        }
      } else {
        anchorNode = domRange.startContainer;
        anchorOffset = domRange.startOffset;
        focusNode = domRange.endContainer;
        focusOffset = domRange.endOffset;
        isCollapsed = domRange.collapsed;
      }
    }
    if (anchorNode == null || focusNode == null || anchorOffset == null || focusOffset == null) {
      throw new Error("Cannot resolve a Slate range from DOM range: ".concat(domRange));
    }
    var anchor = ReactEditor.toSlatePoint(editor, [anchorNode, anchorOffset], {
      exactMatch,
      suppressThrow
    });
    if (!anchor) {
      return null;
    }
    var focus = isCollapsed ? anchor : ReactEditor.toSlatePoint(editor, [focusNode, focusOffset], {
      exactMatch,
      suppressThrow
    });
    if (!focus) {
      return null;
    }
    if (IS_FIREFOX && !isCollapsed && anchorNode !== focusNode) {
      var isEnd2 = Editor.isEnd(editor, anchor, anchor.path);
      var isStart2 = Editor.isStart(editor, focus, focus.path);
      if (isEnd2) {
        var after3 = Editor.after(editor, anchor);
        anchor = after3 || anchor;
      }
      if (isStart2) {
        var before3 = Editor.before(editor, focus);
        focus = before3 || focus;
      }
    }
    var range2 = {
      anchor,
      focus
    };
    if (Range.isExpanded(range2) && Range.isForward(range2) && isDOMElement(focusNode) && Editor.void(editor, {
      at: range2.focus,
      mode: "highest"
    })) {
      range2 = Editor.unhangRange(editor, range2, {
        voids: true
      });
    }
    return range2;
  },
  hasRange(editor, range2) {
    var {
      anchor,
      focus
    } = range2;
    return Editor.hasPath(editor, anchor.path) && Editor.hasPath(editor, focus.path);
  },
  /**
   * Check if the target is in the editor.
   */
  hasTarget(editor, target) {
    return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target);
  },
  /**
   * Check if the target is editable and in the editor.
   */
  hasEditableTarget(editor, target) {
    return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target, {
      editable: true
    });
  },
  /**
   * Check if the target can be selectable
   */
  hasSelectableTarget(editor, target) {
    return ReactEditor.hasEditableTarget(editor, target) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, target);
  },
  /**
   * Check if the target is inside void and in an non-readonly editor.
   */
  isTargetInsideNonReadonlyVoid(editor, target) {
    if (IS_READ_ONLY.get(editor))
      return false;
    var slateNode = ReactEditor.hasTarget(editor, target) && ReactEditor.toSlateNode(editor, target);
    return Element2.isElement(slateNode) && Editor.isVoid(editor, slateNode);
  },
  /**
   * Experimental and android specific: Flush all pending diffs and cancel composition at the next possible time.
   */
  androidScheduleFlush(editor) {
    var _EDITOR_TO_SCHEDULE_F;
    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(editor)) === null || _EDITOR_TO_SCHEDULE_F === void 0 ? void 0 : _EDITOR_TO_SCHEDULE_F();
  },
  /**
   * Experimental and android specific: Get pending diffs
   */
  androidPendingDiffs(editor) {
    return EDITOR_TO_PENDING_DIFFS.get(editor);
  }
};
var useIsomorphicLayoutEffect = CAN_USE_DOM ? import_react.useLayoutEffect : import_react.useEffect;
var _excluded$32 = ["anchor", "focus"];
var _excluded2$12 = ["anchor", "focus"];
var shallowCompare = (obj1, obj2) => Object.keys(obj1).length === Object.keys(obj2).length && Object.keys(obj1).every((key) => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]);
var isDecoratorRangeListEqual = (list, another) => {
  if (list.length !== another.length) {
    return false;
  }
  for (var i2 = 0; i2 < list.length; i2++) {
    var range2 = list[i2];
    var other = another[i2];
    var rangeOwnProps = _objectWithoutProperties2(range2, _excluded$32);
    var otherOwnProps = _objectWithoutProperties2(other, _excluded2$12);
    if (!Range.equals(range2, other) || range2[PLACEHOLDER_SYMBOL] !== other[PLACEHOLDER_SYMBOL] || !shallowCompare(rangeOwnProps, otherOwnProps)) {
      return false;
    }
  }
  return true;
};
var String2 = (props) => {
  var {
    isLast,
    leaf: leaf3,
    parent: parent3,
    text
  } = props;
  var editor = useSlateStatic();
  var path3 = ReactEditor.findPath(editor, text);
  var parentPath = Path.parent(path3);
  var isMarkPlaceholder = leaf3[MARK_PLACEHOLDER_SYMBOL] === true;
  if (editor.isVoid(parent3)) {
    return /* @__PURE__ */ import_react.default.createElement(ZeroWidthString, {
      length: Node.string(parent3).length
    });
  }
  if (leaf3.text === "" && parent3.children[parent3.children.length - 1] === text && !editor.isInline(parent3) && Editor.string(editor, parentPath) === "") {
    return /* @__PURE__ */ import_react.default.createElement(ZeroWidthString, {
      isLineBreak: true,
      isMarkPlaceholder
    });
  }
  if (leaf3.text === "") {
    return /* @__PURE__ */ import_react.default.createElement(ZeroWidthString, {
      isMarkPlaceholder
    });
  }
  if (isLast && leaf3.text.slice(-1) === "\n") {
    return /* @__PURE__ */ import_react.default.createElement(TextString, {
      isTrailing: true,
      text: leaf3.text
    });
  }
  return /* @__PURE__ */ import_react.default.createElement(TextString, {
    text: leaf3.text
  });
};
var TextString = (props) => {
  var {
    text,
    isTrailing = false
  } = props;
  var ref = (0, import_react.useRef)(null);
  var getTextContent = () => {
    return "".concat(text !== null && text !== void 0 ? text : "").concat(isTrailing ? "\n" : "");
  };
  useIsomorphicLayoutEffect(() => {
    var textWithTrailing = getTextContent();
    if (ref.current && ref.current.textContent !== textWithTrailing) {
      ref.current.textContent = textWithTrailing;
    }
  });
  if (!ref.current) {
    return /* @__PURE__ */ import_react.default.createElement("span", {
      "data-slate-string": true,
      ref
    }, getTextContent());
  }
  return /* @__PURE__ */ import_react.default.createElement("span", {
    "data-slate-string": true,
    ref
  });
};
var ZeroWidthString = (props) => {
  var {
    length = 0,
    isLineBreak = false,
    isMarkPlaceholder = false
  } = props;
  var attributes = {
    "data-slate-zero-width": isLineBreak ? "n" : "z",
    "data-slate-length": length
  };
  if (isMarkPlaceholder) {
    attributes["data-slate-mark-placeholder"] = true;
  }
  return /* @__PURE__ */ import_react.default.createElement("span", Object.assign({}, attributes), !IS_ANDROID || !isLineBreak ? "\uFEFF" : null, isLineBreak ? /* @__PURE__ */ import_react.default.createElement("br", null) : null);
};
var EditorContext = /* @__PURE__ */ (0, import_react.createContext)(null);
var useSlateStatic = () => {
  var editor = (0, import_react.useContext)(EditorContext);
  if (!editor) {
    throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");
  }
  return editor;
};
var Leaf = (props) => {
  var {
    leaf: leaf3,
    isLast,
    text,
    parent: parent3,
    renderPlaceholder,
    renderLeaf = (props2) => /* @__PURE__ */ import_react.default.createElement(DefaultLeaf, Object.assign({}, props2))
  } = props;
  var lastPlaceholderRef = (0, import_react.useRef)(null);
  var placeholderRef = (0, import_react.useRef)(null);
  var editor = useSlateStatic();
  var placeholderResizeObserver = (0, import_react.useRef)(null);
  (0, import_react.useEffect)(() => {
    return () => {
      if (placeholderResizeObserver.current) {
        placeholderResizeObserver.current.disconnect();
      }
    };
  }, []);
  (0, import_react.useEffect)(() => {
    var placeholderEl = placeholderRef === null || placeholderRef === void 0 ? void 0 : placeholderRef.current;
    if (placeholderEl) {
      EDITOR_TO_PLACEHOLDER_ELEMENT.set(editor, placeholderEl);
    } else {
      EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor);
    }
    if (placeholderResizeObserver.current) {
      placeholderResizeObserver.current.disconnect();
      if (placeholderEl)
        placeholderResizeObserver.current.observe(placeholderEl);
    } else if (placeholderEl) {
      var ResizeObserver$1 = window.ResizeObserver || ResizeObserver;
      placeholderResizeObserver.current = new ResizeObserver$1(() => {
        var forceRender2 = EDITOR_TO_FORCE_RENDER.get(editor);
        forceRender2 === null || forceRender2 === void 0 ? void 0 : forceRender2();
      });
      placeholderResizeObserver.current.observe(placeholderEl);
    }
    if (!placeholderEl && lastPlaceholderRef.current) {
      var forceRender = EDITOR_TO_FORCE_RENDER.get(editor);
      forceRender === null || forceRender === void 0 ? void 0 : forceRender();
    }
    lastPlaceholderRef.current = placeholderRef.current;
    return () => {
      EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor);
    };
  }, [placeholderRef, leaf3]);
  var children = /* @__PURE__ */ import_react.default.createElement(String2, {
    isLast,
    leaf: leaf3,
    parent: parent3,
    text
  });
  if (leaf3[PLACEHOLDER_SYMBOL]) {
    var placeholderProps = {
      children: leaf3.placeholder,
      attributes: {
        "data-slate-placeholder": true,
        style: {
          position: "absolute",
          pointerEvents: "none",
          width: "100%",
          maxWidth: "100%",
          display: "block",
          opacity: "0.333",
          userSelect: "none",
          textDecoration: "none"
        },
        contentEditable: false,
        ref: placeholderRef
      }
    };
    children = /* @__PURE__ */ import_react.default.createElement(import_react.default.Fragment, null, renderPlaceholder(placeholderProps), children);
  }
  var attributes = {
    "data-slate-leaf": true
  };
  return renderLeaf({
    attributes,
    children,
    leaf: leaf3,
    text
  });
};
var MemoizedLeaf = /* @__PURE__ */ import_react.default.memo(Leaf, (prev, next3) => {
  return next3.parent === prev.parent && next3.isLast === prev.isLast && next3.renderLeaf === prev.renderLeaf && next3.renderPlaceholder === prev.renderPlaceholder && next3.text === prev.text && Text.equals(next3.leaf, prev.leaf) && next3.leaf[PLACEHOLDER_SYMBOL] === prev.leaf[PLACEHOLDER_SYMBOL];
});
var DefaultLeaf = (props) => {
  var {
    attributes,
    children
  } = props;
  return /* @__PURE__ */ import_react.default.createElement("span", Object.assign({}, attributes), children);
};
var Text2 = (props) => {
  var {
    decorations,
    isLast,
    parent: parent3,
    renderPlaceholder,
    renderLeaf,
    text
  } = props;
  var editor = useSlateStatic();
  var ref = (0, import_react.useRef)(null);
  var leaves = Text.decorations(text, decorations);
  var key = ReactEditor.findKey(editor, text);
  var children = [];
  for (var i2 = 0; i2 < leaves.length; i2++) {
    var leaf3 = leaves[i2];
    children.push(/* @__PURE__ */ import_react.default.createElement(MemoizedLeaf, {
      isLast: isLast && i2 === leaves.length - 1,
      key: "".concat(key.id, "-").concat(i2),
      renderPlaceholder,
      leaf: leaf3,
      text,
      parent: parent3,
      renderLeaf
    }));
  }
  useIsomorphicLayoutEffect(() => {
    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);
    if (ref.current) {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.set(key, ref.current);
      NODE_TO_ELEMENT.set(text, ref.current);
      ELEMENT_TO_NODE.set(ref.current, text);
    } else {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.delete(key);
      NODE_TO_ELEMENT.delete(text);
    }
  });
  return /* @__PURE__ */ import_react.default.createElement("span", {
    "data-slate-node": "text",
    ref
  }, children);
};
var MemoizedText = /* @__PURE__ */ import_react.default.memo(Text2, (prev, next3) => {
  return next3.parent === prev.parent && next3.isLast === prev.isLast && next3.renderLeaf === prev.renderLeaf && next3.text === prev.text && isDecoratorRangeListEqual(next3.decorations, prev.decorations);
});
var Element3 = (props) => {
  var {
    decorations,
    element,
    renderElement = (p) => /* @__PURE__ */ import_react.default.createElement(DefaultElement, Object.assign({}, p)),
    renderPlaceholder,
    renderLeaf,
    selection
  } = props;
  var editor = useSlateStatic();
  var readOnly = useReadOnly();
  var isInline2 = editor.isInline(element);
  var key = ReactEditor.findKey(editor, element);
  var ref = (0, import_react.useCallback)((ref2) => {
    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);
    if (ref2) {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.set(key, ref2);
      NODE_TO_ELEMENT.set(element, ref2);
      ELEMENT_TO_NODE.set(ref2, element);
    } else {
      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.delete(key);
      NODE_TO_ELEMENT.delete(element);
    }
  }, [editor, key, element]);
  var children = useChildren({
    decorations,
    node: element,
    renderElement,
    renderPlaceholder,
    renderLeaf,
    selection
  });
  var attributes = {
    "data-slate-node": "element",
    ref
  };
  if (isInline2) {
    attributes["data-slate-inline"] = true;
  }
  if (!isInline2 && Editor.hasInlines(editor, element)) {
    var text = Node.string(element);
    var dir = (0, import_direction.default)(text);
    if (dir === "rtl") {
      attributes.dir = dir;
    }
  }
  if (Editor.isVoid(editor, element)) {
    attributes["data-slate-void"] = true;
    if (!readOnly && isInline2) {
      attributes.contentEditable = false;
    }
    var Tag = isInline2 ? "span" : "div";
    var [[_text]] = Node.texts(element);
    children = /* @__PURE__ */ import_react.default.createElement(Tag, {
      "data-slate-spacer": true,
      style: {
        height: "0",
        color: "transparent",
        outline: "none",
        position: "absolute"
      }
    }, /* @__PURE__ */ import_react.default.createElement(MemoizedText, {
      renderPlaceholder,
      decorations: [],
      isLast: false,
      parent: element,
      text: _text
    }));
    NODE_TO_INDEX.set(_text, 0);
    NODE_TO_PARENT.set(_text, element);
  }
  return renderElement({
    attributes,
    children,
    element
  });
};
var MemoizedElement = /* @__PURE__ */ import_react.default.memo(Element3, (prev, next3) => {
  return prev.element === next3.element && prev.renderElement === next3.renderElement && prev.renderLeaf === next3.renderLeaf && isDecoratorRangeListEqual(prev.decorations, next3.decorations) && (prev.selection === next3.selection || !!prev.selection && !!next3.selection && Range.equals(prev.selection, next3.selection));
});
var DefaultElement = (props) => {
  var {
    attributes,
    children,
    element
  } = props;
  var editor = useSlateStatic();
  var Tag = editor.isInline(element) ? "span" : "div";
  return /* @__PURE__ */ import_react.default.createElement(Tag, Object.assign({}, attributes, {
    style: {
      position: "relative"
    }
  }), children);
};
var DecorateContext = /* @__PURE__ */ (0, import_react.createContext)(() => []);
var useDecorate = () => {
  return (0, import_react.useContext)(DecorateContext);
};
var SelectedContext = /* @__PURE__ */ (0, import_react.createContext)(false);
var useChildren = (props) => {
  var {
    decorations,
    node: node3,
    renderElement,
    renderPlaceholder,
    renderLeaf,
    selection
  } = props;
  var decorate = useDecorate();
  var editor = useSlateStatic();
  var path3 = ReactEditor.findPath(editor, node3);
  var children = [];
  var isLeafBlock = Element2.isElement(node3) && !editor.isInline(node3) && Editor.hasInlines(editor, node3);
  for (var i2 = 0; i2 < node3.children.length; i2++) {
    var p = path3.concat(i2);
    var n3 = node3.children[i2];
    var key = ReactEditor.findKey(editor, n3);
    var range2 = Editor.range(editor, p);
    var sel = selection && Range.intersection(range2, selection);
    var ds = decorate([n3, p]);
    for (var dec of decorations) {
      var d = Range.intersection(dec, range2);
      if (d) {
        ds.push(d);
      }
    }
    if (Element2.isElement(n3)) {
      children.push(/* @__PURE__ */ import_react.default.createElement(SelectedContext.Provider, {
        key: "provider-".concat(key.id),
        value: !!sel
      }, /* @__PURE__ */ import_react.default.createElement(MemoizedElement, {
        decorations: ds,
        element: n3,
        key: key.id,
        renderElement,
        renderPlaceholder,
        renderLeaf,
        selection: sel
      })));
    } else {
      children.push(/* @__PURE__ */ import_react.default.createElement(MemoizedText, {
        decorations: ds,
        key: key.id,
        isLast: isLeafBlock && i2 === node3.children.length - 1,
        parent: node3,
        renderPlaceholder,
        renderLeaf,
        text: n3
      }));
    }
    NODE_TO_INDEX.set(n3, i2);
    NODE_TO_PARENT.set(n3, node3);
  }
  return children;
};
var ReadOnlyContext = /* @__PURE__ */ (0, import_react.createContext)(false);
var useReadOnly = () => {
  return (0, import_react.useContext)(ReadOnlyContext);
};
var SlateContext = /* @__PURE__ */ (0, import_react.createContext)(null);
var useSlate = () => {
  var context = (0, import_react.useContext)(SlateContext);
  if (!context) {
    throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");
  }
  var {
    editor
  } = context;
  return editor;
};
var TRIPLE_CLICK = 3;
var HOTKEYS = {
  bold: "mod+b",
  compose: ["down", "left", "right", "up", "backspace", "enter"],
  moveBackward: "left",
  moveForward: "right",
  moveWordBackward: "ctrl+left",
  moveWordForward: "ctrl+right",
  deleteBackward: "shift?+backspace",
  deleteForward: "shift?+delete",
  extendBackward: "shift+left",
  extendForward: "shift+right",
  italic: "mod+i",
  insertSoftBreak: "shift+enter",
  splitBlock: "enter",
  undo: "mod+z"
};
var APPLE_HOTKEYS = {
  moveLineBackward: "opt+up",
  moveLineForward: "opt+down",
  moveWordBackward: "opt+left",
  moveWordForward: "opt+right",
  deleteBackward: ["ctrl+backspace", "ctrl+h"],
  deleteForward: ["ctrl+delete", "ctrl+d"],
  deleteLineBackward: "cmd+shift?+backspace",
  deleteLineForward: ["cmd+shift?+delete", "ctrl+k"],
  deleteWordBackward: "opt+shift?+backspace",
  deleteWordForward: "opt+shift?+delete",
  extendLineBackward: "opt+shift+up",
  extendLineForward: "opt+shift+down",
  redo: "cmd+shift+z",
  transposeCharacter: "ctrl+t"
};
var WINDOWS_HOTKEYS = {
  deleteWordBackward: "ctrl+shift?+backspace",
  deleteWordForward: "ctrl+shift?+delete",
  redo: ["ctrl+y", "ctrl+shift+z"]
};
var create = (key) => {
  var generic = HOTKEYS[key];
  var apple = APPLE_HOTKEYS[key];
  var windows = WINDOWS_HOTKEYS[key];
  var isGeneric = generic && (0, import_is_hotkey.isKeyHotkey)(generic);
  var isApple = apple && (0, import_is_hotkey.isKeyHotkey)(apple);
  var isWindows = windows && (0, import_is_hotkey.isKeyHotkey)(windows);
  return (event) => {
    if (isGeneric && isGeneric(event))
      return true;
    if (IS_APPLE && isApple && isApple(event))
      return true;
    if (!IS_APPLE && isWindows && isWindows(event))
      return true;
    return false;
  };
};
var Hotkeys = {
  isBold: create("bold"),
  isCompose: create("compose"),
  isMoveBackward: create("moveBackward"),
  isMoveForward: create("moveForward"),
  isDeleteBackward: create("deleteBackward"),
  isDeleteForward: create("deleteForward"),
  isDeleteLineBackward: create("deleteLineBackward"),
  isDeleteLineForward: create("deleteLineForward"),
  isDeleteWordBackward: create("deleteWordBackward"),
  isDeleteWordForward: create("deleteWordForward"),
  isExtendBackward: create("extendBackward"),
  isExtendForward: create("extendForward"),
  isExtendLineBackward: create("extendLineBackward"),
  isExtendLineForward: create("extendLineForward"),
  isItalic: create("italic"),
  isMoveLineBackward: create("moveLineBackward"),
  isMoveLineForward: create("moveLineForward"),
  isMoveWordBackward: create("moveWordBackward"),
  isMoveWordForward: create("moveWordForward"),
  isRedo: create("redo"),
  isSoftBreak: create("insertSoftBreak"),
  isSplitBlock: create("splitBlock"),
  isTransposeCharacter: create("transposeCharacter"),
  isUndo: create("undo")
};
var createRestoreDomManager = (editor, receivedUserInput) => {
  var bufferedMutations = [];
  var clear = () => {
    bufferedMutations = [];
  };
  var registerMutations = (mutations) => {
    if (!receivedUserInput.current) {
      return;
    }
    var trackedMutations = mutations.filter((mutation) => isTrackedMutation(editor, mutation, mutations));
    bufferedMutations.push(...trackedMutations);
  };
  function restoreDOM() {
    bufferedMutations.reverse().forEach((mutation) => {
      if (mutation.type === "characterData") {
        mutation.target.textContent = mutation.oldValue;
        return;
      }
      mutation.removedNodes.forEach((node3) => {
        mutation.target.insertBefore(node3, mutation.nextSibling);
      });
      mutation.addedNodes.forEach((node3) => {
        mutation.target.removeChild(node3);
      });
    });
    clear();
  }
  return {
    registerMutations,
    restoreDOM,
    clear
  };
};
var MUTATION_OBSERVER_CONFIG$1 = {
  subtree: true,
  childList: true,
  characterData: true,
  characterDataOldValue: true
};
var RestoreDOMComponent = class extends import_react.Component {
  constructor() {
    super(...arguments);
    this.context = null;
    this.manager = null;
    this.mutationObserver = null;
  }
  observe() {
    var _this$mutationObserve;
    var {
      node: node3
    } = this.props;
    if (!node3.current) {
      throw new Error("Failed to attach MutationObserver, `node` is undefined");
    }
    (_this$mutationObserve = this.mutationObserver) === null || _this$mutationObserve === void 0 ? void 0 : _this$mutationObserve.observe(node3.current, MUTATION_OBSERVER_CONFIG$1);
  }
  componentDidMount() {
    var {
      receivedUserInput
    } = this.props;
    var editor = this.context;
    this.manager = createRestoreDomManager(editor, receivedUserInput);
    this.mutationObserver = new MutationObserver(this.manager.registerMutations);
    this.observe();
  }
  getSnapshotBeforeUpdate() {
    var _this$mutationObserve2, _this$mutationObserve3, _this$manager2;
    var pendingMutations = (_this$mutationObserve2 = this.mutationObserver) === null || _this$mutationObserve2 === void 0 ? void 0 : _this$mutationObserve2.takeRecords();
    if (pendingMutations !== null && pendingMutations !== void 0 && pendingMutations.length) {
      var _this$manager;
      (_this$manager = this.manager) === null || _this$manager === void 0 ? void 0 : _this$manager.registerMutations(pendingMutations);
    }
    (_this$mutationObserve3 = this.mutationObserver) === null || _this$mutationObserve3 === void 0 ? void 0 : _this$mutationObserve3.disconnect();
    (_this$manager2 = this.manager) === null || _this$manager2 === void 0 ? void 0 : _this$manager2.restoreDOM();
    return null;
  }
  componentDidUpdate() {
    var _this$manager3;
    (_this$manager3 = this.manager) === null || _this$manager3 === void 0 ? void 0 : _this$manager3.clear();
    this.observe();
  }
  componentWillUnmount() {
    var _this$mutationObserve4;
    (_this$mutationObserve4 = this.mutationObserver) === null || _this$mutationObserve4 === void 0 ? void 0 : _this$mutationObserve4.disconnect();
  }
  render() {
    return this.props.children;
  }
};
RestoreDOMComponent.contextType = EditorContext;
var RestoreDOM = IS_ANDROID ? RestoreDOMComponent : (_ref) => {
  var {
    children
  } = _ref;
  return /* @__PURE__ */ import_react.default.createElement(import_react.default.Fragment, null, children);
};
function verifyDiffState(editor, textDiff) {
  var {
    path: path3,
    diff
  } = textDiff;
  if (!Editor.hasPath(editor, path3)) {
    return false;
  }
  var node3 = Node.get(editor, path3);
  if (!Text.isText(node3)) {
    return false;
  }
  if (diff.start !== node3.text.length || diff.text.length === 0) {
    return node3.text.slice(diff.start, diff.start + diff.text.length) === diff.text;
  }
  var nextPath = Path.next(path3);
  if (!Editor.hasPath(editor, nextPath)) {
    return false;
  }
  var nextNode = Node.get(editor, nextPath);
  return Text.isText(nextNode) && nextNode.text.startsWith(diff.text);
}
function applyStringDiff(text) {
  for (var _len = arguments.length, diffs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    diffs[_key - 1] = arguments[_key];
  }
  return diffs.reduce((text2, diff) => text2.slice(0, diff.start) + diff.text + text2.slice(diff.end), text);
}
function longestCommonPrefixLength(str, another) {
  var length = Math.min(str.length, another.length);
  for (var i2 = 0; i2 < length; i2++) {
    if (str.charAt(i2) !== another.charAt(i2)) {
      return i2;
    }
  }
  return length;
}
function longestCommonSuffixLength(str, another, max) {
  var length = Math.min(str.length, another.length, max);
  for (var i2 = 0; i2 < length; i2++) {
    if (str.charAt(str.length - i2 - 1) !== another.charAt(another.length - i2 - 1)) {
      return i2;
    }
  }
  return length;
}
function normalizeStringDiff(targetText, diff) {
  var {
    start: start2,
    end: end2,
    text
  } = diff;
  var removedText = targetText.slice(start2, end2);
  var prefixLength = longestCommonPrefixLength(removedText, text);
  var max = Math.min(removedText.length - prefixLength, text.length - prefixLength);
  var suffixLength = longestCommonSuffixLength(removedText, text, max);
  var normalized = {
    start: start2 + prefixLength,
    end: end2 - suffixLength,
    text: text.slice(prefixLength, text.length - suffixLength)
  };
  if (normalized.start === normalized.end && normalized.text.length === 0) {
    return null;
  }
  return normalized;
}
function mergeStringDiffs(targetText, a, b) {
  var start2 = Math.min(a.start, b.start);
  var overlap = Math.max(0, Math.min(a.start + a.text.length, b.end) - b.start);
  var applied = applyStringDiff(targetText, a, b);
  var sliceEnd = Math.max(b.start + b.text.length, a.start + a.text.length + (a.start + a.text.length > b.start ? b.text.length : 0) - overlap);
  var text = applied.slice(start2, sliceEnd);
  var end2 = Math.max(a.end, b.end - a.text.length + (a.end - a.start));
  return normalizeStringDiff(targetText, {
    start: start2,
    end: end2,
    text
  });
}
function targetRange(textDiff) {
  var {
    path: path3,
    diff
  } = textDiff;
  return {
    anchor: {
      path: path3,
      offset: diff.start
    },
    focus: {
      path: path3,
      offset: diff.end
    }
  };
}
function normalizePoint(editor, point3) {
  var {
    path: path3,
    offset
  } = point3;
  if (!Editor.hasPath(editor, path3)) {
    return null;
  }
  var leaf3 = Node.get(editor, path3);
  if (!Text.isText(leaf3)) {
    return null;
  }
  var parentBlock = Editor.above(editor, {
    match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
    at: path3
  });
  if (!parentBlock) {
    return null;
  }
  while (offset > leaf3.text.length) {
    var entry = Editor.next(editor, {
      at: path3,
      match: Text.isText
    });
    if (!entry || !Path.isDescendant(entry[1], parentBlock[1])) {
      return null;
    }
    offset -= leaf3.text.length;
    leaf3 = entry[0];
    path3 = entry[1];
  }
  return {
    path: path3,
    offset
  };
}
function normalizeRange(editor, range2) {
  var anchor = normalizePoint(editor, range2.anchor);
  if (!anchor) {
    return null;
  }
  if (Range.isCollapsed(range2)) {
    return {
      anchor,
      focus: anchor
    };
  }
  var focus = normalizePoint(editor, range2.focus);
  if (!focus) {
    return null;
  }
  return {
    anchor,
    focus
  };
}
function transformPendingPoint(editor, point3, op) {
  var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor);
  var textDiff = pendingDiffs === null || pendingDiffs === void 0 ? void 0 : pendingDiffs.find((_ref) => {
    var {
      path: path3
    } = _ref;
    return Path.equals(path3, point3.path);
  });
  if (!textDiff || point3.offset <= textDiff.diff.start) {
    return Point.transform(point3, op, {
      affinity: "backward"
    });
  }
  var {
    diff
  } = textDiff;
  if (point3.offset <= diff.start + diff.text.length) {
    var _anchor = {
      path: point3.path,
      offset: diff.start
    };
    var _transformed = Point.transform(_anchor, op, {
      affinity: "backward"
    });
    if (!_transformed) {
      return null;
    }
    return {
      path: _transformed.path,
      offset: _transformed.offset + point3.offset - diff.start
    };
  }
  var anchor = {
    path: point3.path,
    offset: point3.offset - diff.text.length + diff.end - diff.start
  };
  var transformed = Point.transform(anchor, op, {
    affinity: "backward"
  });
  if (!transformed) {
    return null;
  }
  if (op.type === "split_node" && Path.equals(op.path, point3.path) && anchor.offset < op.position && diff.start < op.position) {
    return transformed;
  }
  return {
    path: transformed.path,
    offset: transformed.offset + diff.text.length - diff.end + diff.start
  };
}
function transformPendingRange(editor, range2, op) {
  var anchor = transformPendingPoint(editor, range2.anchor, op);
  if (!anchor) {
    return null;
  }
  if (Range.isCollapsed(range2)) {
    return {
      anchor,
      focus: anchor
    };
  }
  var focus = transformPendingPoint(editor, range2.focus, op);
  if (!focus) {
    return null;
  }
  return {
    anchor,
    focus
  };
}
function transformTextDiff(textDiff, op) {
  var {
    path: path3,
    diff,
    id
  } = textDiff;
  switch (op.type) {
    case "insert_text": {
      if (!Path.equals(op.path, path3) || op.offset >= diff.end) {
        return textDiff;
      }
      if (op.offset <= diff.start) {
        return {
          diff: {
            start: op.text.length + diff.start,
            end: op.text.length + diff.end,
            text: diff.text
          },
          id,
          path: path3
        };
      }
      return {
        diff: {
          start: diff.start,
          end: diff.end + op.text.length,
          text: diff.text
        },
        id,
        path: path3
      };
    }
    case "remove_text": {
      if (!Path.equals(op.path, path3) || op.offset >= diff.end) {
        return textDiff;
      }
      if (op.offset + op.text.length <= diff.start) {
        return {
          diff: {
            start: diff.start - op.text.length,
            end: diff.end - op.text.length,
            text: diff.text
          },
          id,
          path: path3
        };
      }
      return {
        diff: {
          start: diff.start,
          end: diff.end - op.text.length,
          text: diff.text
        },
        id,
        path: path3
      };
    }
    case "split_node": {
      if (!Path.equals(op.path, path3) || op.position >= diff.end) {
        return {
          diff,
          id,
          path: Path.transform(path3, op, {
            affinity: "backward"
          })
        };
      }
      if (op.position > diff.start) {
        return {
          diff: {
            start: diff.start,
            end: Math.min(op.position, diff.end),
            text: diff.text
          },
          id,
          path: path3
        };
      }
      return {
        diff: {
          start: diff.start - op.position,
          end: diff.end - op.position,
          text: diff.text
        },
        id,
        path: Path.transform(path3, op, {
          affinity: "forward"
        })
      };
    }
    case "merge_node": {
      if (!Path.equals(op.path, path3)) {
        return {
          diff,
          id,
          path: Path.transform(path3, op)
        };
      }
      return {
        diff: {
          start: diff.start + op.position,
          end: diff.end + op.position,
          text: diff.text
        },
        id,
        path: Path.transform(path3, op)
      };
    }
  }
  var newPath = Path.transform(path3, op);
  if (!newPath) {
    return null;
  }
  return {
    diff,
    path: newPath,
    id
  };
}
function ownKeys$32(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread$32(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys$32(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys$32(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var RESOLVE_DELAY = 25;
var FLUSH_DELAY = 200;
var debug = function debug2() {
};
function createAndroidInputManager(_ref) {
  var {
    editor,
    scheduleOnDOMSelectionChange,
    onDOMSelectionChange
  } = _ref;
  var flushing = false;
  var compositionEndTimeoutId = null;
  var flushTimeoutId = null;
  var actionTimeoutId = null;
  var idCounter = 0;
  var insertPositionHint = false;
  var applyPendingSelection = () => {
    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(editor);
    EDITOR_TO_PENDING_SELECTION.delete(editor);
    if (pendingSelection) {
      var {
        selection
      } = editor;
      var normalized = normalizeRange(editor, pendingSelection);
      if (normalized && (!selection || !Range.equals(normalized, selection))) {
        Transforms.select(editor, normalized);
      }
    }
  };
  var performAction = () => {
    var action = EDITOR_TO_PENDING_ACTION.get(editor);
    EDITOR_TO_PENDING_ACTION.delete(editor);
    if (!action) {
      return;
    }
    if (action.at) {
      var target = Point.isPoint(action.at) ? normalizePoint(editor, action.at) : normalizeRange(editor, action.at);
      if (!target) {
        return;
      }
      var _targetRange = Editor.range(editor, target);
      if (!editor.selection || !Range.equals(editor.selection, _targetRange)) {
        Transforms.select(editor, target);
      }
    }
    action.run();
  };
  var flush = () => {
    var _EDITOR_TO_PENDING_DI;
    if (flushTimeoutId) {
      clearTimeout(flushTimeoutId);
      flushTimeoutId = null;
    }
    if (actionTimeoutId) {
      clearTimeout(actionTimeoutId);
      actionTimeoutId = null;
    }
    if (!hasPendingDiffs() && !hasPendingAction()) {
      applyPendingSelection();
      return;
    }
    if (!flushing) {
      flushing = true;
      setTimeout(() => flushing = false);
    }
    if (hasPendingAction()) {
      flushing = "action";
    }
    var selectionRef = editor.selection && Editor.rangeRef(editor, editor.selection, {
      affinity: "forward"
    });
    EDITOR_TO_USER_MARKS.set(editor, editor.marks);
    debug("flush", EDITOR_TO_PENDING_ACTION.get(editor), EDITOR_TO_PENDING_DIFFS.get(editor));
    var scheduleSelectionChange = !!((_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI !== void 0 && _EDITOR_TO_PENDING_DI.length);
    var diff;
    while (diff = (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI2 === void 0 ? void 0 : _EDITOR_TO_PENDING_DI2[0]) {
      var _EDITOR_TO_PENDING_DI2, _EDITOR_TO_PENDING_DI3;
      var pendingMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);
      if (pendingMarks !== void 0) {
        EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);
        editor.marks = pendingMarks;
      }
      if (pendingMarks && insertPositionHint === false) {
        insertPositionHint = null;
      }
      var range2 = targetRange(diff);
      if (!editor.selection || !Range.equals(editor.selection, range2)) {
        Transforms.select(editor, range2);
      }
      if (diff.diff.text) {
        Editor.insertText(editor, diff.diff.text);
      } else {
        Editor.deleteFragment(editor);
      }
      EDITOR_TO_PENDING_DIFFS.set(editor, (_EDITOR_TO_PENDING_DI3 = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI3 === void 0 ? void 0 : _EDITOR_TO_PENDING_DI3.filter((_ref2) => {
        var {
          id
        } = _ref2;
        return id !== diff.id;
      }));
      if (!verifyDiffState(editor, diff)) {
        scheduleSelectionChange = false;
        EDITOR_TO_PENDING_ACTION.delete(editor);
        EDITOR_TO_USER_MARKS.delete(editor);
        flushing = "action";
        EDITOR_TO_PENDING_SELECTION.delete(editor);
        scheduleOnDOMSelectionChange.cancel();
        onDOMSelectionChange.cancel();
        selectionRef === null || selectionRef === void 0 ? void 0 : selectionRef.unref();
      }
    }
    var selection = selectionRef === null || selectionRef === void 0 ? void 0 : selectionRef.unref();
    if (selection && !EDITOR_TO_PENDING_SELECTION.get(editor) && (!editor.selection || !Range.equals(selection, editor.selection))) {
      Transforms.select(editor, selection);
    }
    if (hasPendingAction()) {
      performAction();
      return;
    }
    if (scheduleSelectionChange) {
      scheduleOnDOMSelectionChange();
    }
    scheduleOnDOMSelectionChange.flush();
    onDOMSelectionChange.flush();
    applyPendingSelection();
    var userMarks = EDITOR_TO_USER_MARKS.get(editor);
    EDITOR_TO_USER_MARKS.delete(editor);
    if (userMarks !== void 0) {
      editor.marks = userMarks;
      editor.onChange();
    }
  };
  var handleCompositionEnd = (_event) => {
    if (compositionEndTimeoutId) {
      clearTimeout(compositionEndTimeoutId);
    }
    compositionEndTimeoutId = setTimeout(() => {
      IS_COMPOSING.set(editor, false);
      flush();
    }, RESOLVE_DELAY);
  };
  var handleCompositionStart = (_event) => {
    IS_COMPOSING.set(editor, true);
    if (compositionEndTimeoutId) {
      clearTimeout(compositionEndTimeoutId);
      compositionEndTimeoutId = null;
    }
  };
  var updatePlaceholderVisibility = function updatePlaceholderVisibility2() {
    var forceHide = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
    var placeholderElement = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor);
    if (!placeholderElement) {
      return;
    }
    if (hasPendingDiffs() || forceHide) {
      placeholderElement.style.display = "none";
      return;
    }
    placeholderElement.style.removeProperty("display");
  };
  var storeDiff = (path3, diff) => {
    var _EDITOR_TO_PENDING_DI4;
    var pendingDiffs = (_EDITOR_TO_PENDING_DI4 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI4 !== void 0 ? _EDITOR_TO_PENDING_DI4 : [];
    EDITOR_TO_PENDING_DIFFS.set(editor, pendingDiffs);
    var target = Node.leaf(editor, path3);
    var idx = pendingDiffs.findIndex((change) => Path.equals(change.path, path3));
    if (idx < 0) {
      var normalized = normalizeStringDiff(target.text, diff);
      if (normalized) {
        pendingDiffs.push({
          path: path3,
          diff,
          id: idCounter++
        });
      }
      updatePlaceholderVisibility();
      return;
    }
    var merged = mergeStringDiffs(target.text, pendingDiffs[idx].diff, diff);
    if (!merged) {
      pendingDiffs.splice(idx, 1);
      updatePlaceholderVisibility();
      return;
    }
    pendingDiffs[idx] = _objectSpread$32(_objectSpread$32({}, pendingDiffs[idx]), {}, {
      diff: merged
    });
  };
  var scheduleAction = function scheduleAction2(run) {
    var {
      at
    } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    insertPositionHint = false;
    EDITOR_TO_PENDING_SELECTION.delete(editor);
    scheduleOnDOMSelectionChange.cancel();
    onDOMSelectionChange.cancel();
    if (hasPendingAction()) {
      flush();
    }
    EDITOR_TO_PENDING_ACTION.set(editor, {
      at,
      run
    });
    actionTimeoutId = setTimeout(flush);
  };
  var handleDOMBeforeInput = (event) => {
    var _targetRange2;
    if (flushTimeoutId) {
      clearTimeout(flushTimeoutId);
      flushTimeoutId = null;
    }
    var {
      inputType: type
    } = event;
    var targetRange2 = null;
    var data = event.dataTransfer || event.data || void 0;
    if (insertPositionHint !== false && type !== "insertText" && type !== "insertCompositionText") {
      insertPositionHint = false;
    }
    var [nativeTargetRange] = event.getTargetRanges();
    if (nativeTargetRange) {
      targetRange2 = ReactEditor.toSlateRange(editor, nativeTargetRange, {
        exactMatch: false,
        suppressThrow: true
      });
    }
    var window2 = ReactEditor.getWindow(editor);
    var domSelection = window2.getSelection();
    if (!targetRange2 && domSelection) {
      nativeTargetRange = domSelection;
      targetRange2 = ReactEditor.toSlateRange(editor, domSelection, {
        exactMatch: false,
        suppressThrow: true
      });
    }
    targetRange2 = (_targetRange2 = targetRange2) !== null && _targetRange2 !== void 0 ? _targetRange2 : editor.selection;
    if (!targetRange2) {
      return;
    }
    if (Range.isExpanded(targetRange2) && type.startsWith("delete")) {
      var [start2, end2] = Range.edges(targetRange2);
      var leaf3 = Node.leaf(editor, start2.path);
      if (leaf3.text.length === start2.offset && end2.offset === 0) {
        var next3 = Editor.next(editor, {
          at: start2.path,
          match: Text.isText
        });
        if (next3 && Path.equals(next3[1], end2.path)) {
          targetRange2 = {
            anchor: end2,
            focus: end2
          };
        }
      }
    }
    if (Range.isExpanded(targetRange2) && type.startsWith("delete")) {
      if (Path.equals(targetRange2.anchor.path, targetRange2.focus.path)) {
        var [_start, _end] = Range.edges(targetRange2);
        return storeDiff(targetRange2.anchor.path, {
          text: "",
          end: _end.offset,
          start: _start.offset
        });
      }
      var direction = type.endsWith("Backward") ? "backward" : "forward";
      return scheduleAction(() => Editor.deleteFragment(editor, {
        direction
      }), {
        at: targetRange2
      });
    }
    switch (type) {
      case "deleteByComposition":
      case "deleteByCut":
      case "deleteByDrag": {
        return scheduleAction(() => Editor.deleteFragment(editor), {
          at: targetRange2
        });
      }
      case "deleteContent":
      case "deleteContentForward": {
        var {
          anchor
        } = targetRange2;
        if (Range.isCollapsed(targetRange2)) {
          var targetNode = Node.leaf(editor, anchor.path);
          if (anchor.offset < targetNode.text.length) {
            return storeDiff(anchor.path, {
              text: "",
              start: anchor.offset,
              end: anchor.offset + 1
            });
          }
        }
        return scheduleAction(() => Editor.deleteForward(editor), {
          at: targetRange2
        });
      }
      case "deleteContentBackward": {
        var _nativeTargetRange;
        var {
          anchor: _anchor
        } = targetRange2;
        var nativeCollapsed = isDOMSelection(nativeTargetRange) ? nativeTargetRange.isCollapsed : !!((_nativeTargetRange = nativeTargetRange) !== null && _nativeTargetRange !== void 0 && _nativeTargetRange.collapsed);
        if (nativeCollapsed && Range.isCollapsed(targetRange2) && _anchor.offset > 0) {
          return storeDiff(_anchor.path, {
            text: "",
            start: _anchor.offset - 1,
            end: _anchor.offset
          });
        }
        return scheduleAction(() => Editor.deleteBackward(editor), {
          at: targetRange2
        });
      }
      case "deleteEntireSoftLine": {
        return scheduleAction(() => {
          Editor.deleteBackward(editor, {
            unit: "line"
          });
          Editor.deleteForward(editor, {
            unit: "line"
          });
        }, {
          at: targetRange2
        });
      }
      case "deleteHardLineBackward": {
        return scheduleAction(() => Editor.deleteBackward(editor, {
          unit: "block"
        }), {
          at: targetRange2
        });
      }
      case "deleteSoftLineBackward": {
        return scheduleAction(() => Editor.deleteBackward(editor, {
          unit: "line"
        }), {
          at: targetRange2
        });
      }
      case "deleteHardLineForward": {
        return scheduleAction(() => Editor.deleteForward(editor, {
          unit: "block"
        }), {
          at: targetRange2
        });
      }
      case "deleteSoftLineForward": {
        return scheduleAction(() => Editor.deleteForward(editor, {
          unit: "line"
        }), {
          at: targetRange2
        });
      }
      case "deleteWordBackward": {
        return scheduleAction(() => Editor.deleteBackward(editor, {
          unit: "word"
        }), {
          at: targetRange2
        });
      }
      case "deleteWordForward": {
        return scheduleAction(() => Editor.deleteForward(editor, {
          unit: "word"
        }), {
          at: targetRange2
        });
      }
      case "insertLineBreak": {
        return scheduleAction(() => Editor.insertSoftBreak(editor), {
          at: targetRange2
        });
      }
      case "insertParagraph": {
        return scheduleAction(() => Editor.insertBreak(editor), {
          at: targetRange2
        });
      }
      case "insertCompositionText":
      case "deleteCompositionText":
      case "insertFromComposition":
      case "insertFromDrop":
      case "insertFromPaste":
      case "insertFromYank":
      case "insertReplacementText":
      case "insertText": {
        if ((data === null || data === void 0 ? void 0 : data.constructor.name) === "DataTransfer") {
          return scheduleAction(() => ReactEditor.insertData(editor, data), {
            at: targetRange2
          });
        }
        if (typeof data === "string" && data.includes("\n")) {
          return scheduleAction(() => Editor.insertSoftBreak(editor), {
            at: Range.end(targetRange2)
          });
        }
        var text = data !== null && data !== void 0 ? data : "";
        if (EDITOR_TO_PENDING_INSERTION_MARKS.get(editor)) {
          text = text.replace("\uFEFF", "");
        }
        if (Path.equals(targetRange2.anchor.path, targetRange2.focus.path)) {
          var [_start2, _end2] = Range.edges(targetRange2);
          var diff = {
            start: _start2.offset,
            end: _end2.offset,
            text
          };
          if (text && insertPositionHint && type === "insertCompositionText") {
            var hintPosition = insertPositionHint.start + insertPositionHint.text.search(/\S|$/);
            var diffPosition = diff.start + diff.text.search(/\S|$/);
            if (diffPosition === hintPosition + 1 && diff.end === insertPositionHint.start + insertPositionHint.text.length) {
              diff.start -= 1;
              insertPositionHint = null;
              scheduleFlush();
            } else {
              insertPositionHint = false;
            }
          } else if (type === "insertText") {
            if (insertPositionHint === null) {
              insertPositionHint = diff;
            } else if (insertPositionHint && Range.isCollapsed(targetRange2) && insertPositionHint.end + insertPositionHint.text.length === _start2.offset) {
              insertPositionHint = _objectSpread$32(_objectSpread$32({}, insertPositionHint), {}, {
                text: insertPositionHint.text + text
              });
            } else {
              insertPositionHint = false;
            }
          } else {
            insertPositionHint = false;
          }
          storeDiff(_start2.path, diff);
          return;
        }
        return scheduleAction(() => Editor.insertText(editor, text), {
          at: targetRange2
        });
      }
    }
  };
  var hasPendingAction = () => {
    return !!EDITOR_TO_PENDING_ACTION.get(editor);
  };
  var hasPendingDiffs = () => {
    var _EDITOR_TO_PENDING_DI5;
    return !!((_EDITOR_TO_PENDING_DI5 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI5 !== void 0 && _EDITOR_TO_PENDING_DI5.length);
  };
  var hasPendingChanges = () => {
    return hasPendingAction() || hasPendingDiffs();
  };
  var isFlushing = () => {
    return flushing;
  };
  var handleUserSelect = (range2) => {
    EDITOR_TO_PENDING_SELECTION.set(editor, range2);
    if (flushTimeoutId) {
      clearTimeout(flushTimeoutId);
      flushTimeoutId = null;
    }
    var {
      selection
    } = editor;
    if (!range2) {
      return;
    }
    var pathChanged = !selection || !Path.equals(selection.anchor.path, range2.anchor.path);
    var parentPathChanged = !selection || !Path.equals(selection.anchor.path.slice(0, -1), range2.anchor.path.slice(0, -1));
    if (pathChanged && insertPositionHint || parentPathChanged) {
      insertPositionHint = false;
    }
    if (pathChanged || !hasPendingDiffs()) {
      flushTimeoutId = setTimeout(flush, FLUSH_DELAY);
    }
  };
  var handleInput = () => {
    if (hasPendingAction() || !hasPendingDiffs()) {
      flush();
    }
  };
  var handleKeyDown = (_) => {
    if (!hasPendingDiffs()) {
      updatePlaceholderVisibility(true);
      setTimeout(updatePlaceholderVisibility);
    }
  };
  var scheduleFlush = () => {
    if (!hasPendingAction()) {
      actionTimeoutId = setTimeout(flush);
    }
  };
  var handleDomMutations = (mutations) => {
    if (hasPendingDiffs() || hasPendingAction()) {
      return;
    }
    if (mutations.some((mutation) => isTrackedMutation(editor, mutation, mutations))) {
      var _EDITOR_TO_FORCE_REND;
      (_EDITOR_TO_FORCE_REND = EDITOR_TO_FORCE_RENDER.get(editor)) === null || _EDITOR_TO_FORCE_REND === void 0 ? void 0 : _EDITOR_TO_FORCE_REND();
    }
  };
  return {
    flush,
    scheduleFlush,
    hasPendingDiffs,
    hasPendingAction,
    hasPendingChanges,
    isFlushing,
    handleUserSelect,
    handleCompositionEnd,
    handleCompositionStart,
    handleDOMBeforeInput,
    handleKeyDown,
    handleDomMutations,
    handleInput
  };
}
function useIsMounted() {
  var isMountedRef = (0, import_react.useRef)(false);
  (0, import_react.useEffect)(() => {
    isMountedRef.current = true;
    return () => {
      isMountedRef.current = false;
    };
  }, []);
  return isMountedRef.current;
}
function useMutationObserver(node3, callback, options) {
  var [mutationObserver] = (0, import_react.useState)(() => new MutationObserver(callback));
  useIsomorphicLayoutEffect(() => {
    mutationObserver.takeRecords();
  });
  (0, import_react.useEffect)(() => {
    if (!node3.current) {
      throw new Error("Failed to attach MutationObserver, `node` is undefined");
    }
    mutationObserver.observe(node3.current, options);
    return () => mutationObserver.disconnect();
  }, []);
}
var _excluded$22 = ["node"];
function ownKeys$22(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread$22(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys$22(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys$22(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var MUTATION_OBSERVER_CONFIG = {
  subtree: true,
  childList: true,
  characterData: true
};
function useAndroidInputManager(_ref) {
  var {
    node: node3
  } = _ref, options = _objectWithoutProperties2(_ref, _excluded$22);
  if (!IS_ANDROID) {
    return null;
  }
  var editor = useSlateStatic();
  var isMounted = useIsMounted();
  var [inputManager] = (0, import_react.useState)(() => createAndroidInputManager(_objectSpread$22({
    editor
  }, options)));
  useMutationObserver(node3, inputManager.handleDomMutations, MUTATION_OBSERVER_CONFIG);
  EDITOR_TO_SCHEDULE_FLUSH.set(editor, inputManager.scheduleFlush);
  if (isMounted) {
    inputManager.flush();
  }
  return inputManager;
}
function useTrackUserInput() {
  var editor = useSlateStatic();
  var receivedUserInput = (0, import_react.useRef)(false);
  var animationFrameIdRef = (0, import_react.useRef)(0);
  var onUserInput = (0, import_react.useCallback)(() => {
    if (receivedUserInput.current) {
      return;
    }
    receivedUserInput.current = true;
    var window2 = ReactEditor.getWindow(editor);
    window2.cancelAnimationFrame(animationFrameIdRef.current);
    animationFrameIdRef.current = window2.requestAnimationFrame(() => {
      receivedUserInput.current = false;
    });
  }, []);
  (0, import_react.useEffect)(() => () => cancelAnimationFrame(animationFrameIdRef.current), []);
  return {
    receivedUserInput,
    onUserInput
  };
}
var _excluded$12 = ["autoFocus", "decorate", "onDOMBeforeInput", "placeholder", "readOnly", "renderElement", "renderLeaf", "renderPlaceholder", "scrollSelectionIntoView", "style", "as", "disableDefaultStyles"];
var _excluded22 = ["text"];
function ownKeys$12(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread$12(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys$12(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys$12(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var Children = (props) => /* @__PURE__ */ import_react.default.createElement(import_react.default.Fragment, null, useChildren(props));
var Editable = (props) => {
  var _EDITOR_TO_PLACEHOLDE, _EDITOR_TO_PLACEHOLDE2;
  var {
    autoFocus,
    decorate = defaultDecorate,
    onDOMBeforeInput: propsOnDOMBeforeInput,
    placeholder,
    readOnly = false,
    renderElement,
    renderLeaf,
    renderPlaceholder = (props2) => /* @__PURE__ */ import_react.default.createElement(DefaultPlaceholder, Object.assign({}, props2)),
    scrollSelectionIntoView = defaultScrollSelectionIntoView,
    style: userStyle = {},
    as: Component2 = "div",
    disableDefaultStyles = false
  } = props, attributes = _objectWithoutProperties2(props, _excluded$12);
  var editor = useSlate();
  var [isComposing, setIsComposing] = (0, import_react.useState)(false);
  var ref = (0, import_react.useRef)(null);
  var deferredOperations = (0, import_react.useRef)([]);
  var {
    onUserInput,
    receivedUserInput
  } = useTrackUserInput();
  var [, forceRender] = (0, import_react.useReducer)((s) => s + 1, 0);
  EDITOR_TO_FORCE_RENDER.set(editor, forceRender);
  IS_READ_ONLY.set(editor, readOnly);
  var state = (0, import_react.useMemo)(() => ({
    isDraggingInternally: false,
    isUpdatingSelection: false,
    latestElement: null,
    hasMarkPlaceholder: false
  }), []);
  (0, import_react.useEffect)(() => {
    if (ref.current && autoFocus) {
      ref.current.focus();
    }
  }, [autoFocus]);
  var onDOMSelectionChange = (0, import_react.useCallback)((0, import_throttle.default)(() => {
    if ((IS_ANDROID || !ReactEditor.isComposing(editor)) && (!state.isUpdatingSelection || androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing()) && !state.isDraggingInternally) {
      var root = ReactEditor.findDocumentOrShadowRoot(editor);
      var {
        activeElement
      } = root;
      var el = ReactEditor.toDOMNode(editor, editor);
      var domSelection = root.getSelection();
      if (activeElement === el) {
        state.latestElement = activeElement;
        IS_FOCUSED.set(editor, true);
      } else {
        IS_FOCUSED.delete(editor);
      }
      if (!domSelection) {
        return Transforms.deselect(editor);
      }
      var {
        anchorNode,
        focusNode
      } = domSelection;
      var anchorNodeSelectable = ReactEditor.hasEditableTarget(editor, anchorNode) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, anchorNode);
      var focusNodeSelectable = ReactEditor.hasEditableTarget(editor, focusNode) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, focusNode);
      if (anchorNodeSelectable && focusNodeSelectable) {
        var range2 = ReactEditor.toSlateRange(editor, domSelection, {
          exactMatch: false,
          suppressThrow: true
        });
        if (range2) {
          if (!ReactEditor.isComposing(editor) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.hasPendingChanges()) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing())) {
            Transforms.select(editor, range2);
          } else {
            androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleUserSelect(range2);
          }
        }
      }
      if (readOnly && (!anchorNodeSelectable || !focusNodeSelectable)) {
        Transforms.deselect(editor);
      }
    }
  }, 100), [readOnly]);
  var scheduleOnDOMSelectionChange = (0, import_react.useMemo)(() => (0, import_debounce.default)(onDOMSelectionChange, 0), [onDOMSelectionChange]);
  var androidInputManager = useAndroidInputManager({
    node: ref,
    onDOMSelectionChange,
    scheduleOnDOMSelectionChange
  });
  useIsomorphicLayoutEffect(() => {
    var window2;
    if (ref.current && (window2 = getDefaultView(ref.current))) {
      EDITOR_TO_WINDOW.set(editor, window2);
      EDITOR_TO_ELEMENT.set(editor, ref.current);
      NODE_TO_ELEMENT.set(editor, ref.current);
      ELEMENT_TO_NODE.set(ref.current, editor);
    } else {
      NODE_TO_ELEMENT.delete(editor);
    }
    var {
      selection
    } = editor;
    var root = ReactEditor.findDocumentOrShadowRoot(editor);
    var domSelection = root.getSelection();
    if (!domSelection || !ReactEditor.isFocused(editor) || androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.hasPendingAction()) {
      return;
    }
    var setDomSelection = (forceChange) => {
      var hasDomSelection = domSelection.type !== "None";
      if (!selection && !hasDomSelection) {
        return;
      }
      var editorElement = EDITOR_TO_ELEMENT.get(editor);
      var hasDomSelectionInEditor = false;
      if (editorElement.contains(domSelection.anchorNode) && editorElement.contains(domSelection.focusNode)) {
        hasDomSelectionInEditor = true;
      }
      if (hasDomSelection && hasDomSelectionInEditor && selection && !forceChange) {
        var slateRange = ReactEditor.toSlateRange(editor, domSelection, {
          exactMatch: true,
          // domSelection is not necessarily a valid Slate range
          // (e.g. when clicking on contentEditable:false element)
          suppressThrow: true
        });
        if (slateRange && Range.equals(slateRange, selection)) {
          var _anchorNode$parentEle;
          if (!state.hasMarkPlaceholder) {
            return;
          }
          var {
            anchorNode
          } = domSelection;
          if (anchorNode !== null && anchorNode !== void 0 && (_anchorNode$parentEle = anchorNode.parentElement) !== null && _anchorNode$parentEle !== void 0 && _anchorNode$parentEle.hasAttribute("data-slate-mark-placeholder")) {
            return;
          }
        }
      }
      if (selection && !ReactEditor.hasRange(editor, selection)) {
        editor.selection = ReactEditor.toSlateRange(editor, domSelection, {
          exactMatch: false,
          suppressThrow: true
        });
        return;
      }
      state.isUpdatingSelection = true;
      var newDomRange2 = selection && ReactEditor.toDOMRange(editor, selection);
      if (newDomRange2) {
        if (Range.isBackward(selection)) {
          domSelection.setBaseAndExtent(newDomRange2.endContainer, newDomRange2.endOffset, newDomRange2.startContainer, newDomRange2.startOffset);
        } else {
          domSelection.setBaseAndExtent(newDomRange2.startContainer, newDomRange2.startOffset, newDomRange2.endContainer, newDomRange2.endOffset);
        }
        scrollSelectionIntoView(editor, newDomRange2);
      } else {
        domSelection.removeAllRanges();
      }
      return newDomRange2;
    };
    var newDomRange = setDomSelection();
    var ensureSelection = (androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.isFlushing()) === "action";
    if (!IS_ANDROID || !ensureSelection) {
      setTimeout(() => {
        if (newDomRange && IS_FIREFOX) {
          var el = ReactEditor.toDOMNode(editor, editor);
          el.focus();
        }
        state.isUpdatingSelection = false;
      });
      return;
    }
    var timeoutId = null;
    var animationFrameId = requestAnimationFrame(() => {
      if (ensureSelection) {
        var ensureDomSelection = (forceChange) => {
          try {
            var el = ReactEditor.toDOMNode(editor, editor);
            el.focus();
            setDomSelection(forceChange);
          } catch (e2) {
          }
        };
        ensureDomSelection();
        timeoutId = setTimeout(() => {
          ensureDomSelection(true);
          state.isUpdatingSelection = false;
        });
      }
    });
    return () => {
      cancelAnimationFrame(animationFrameId);
      if (timeoutId) {
        clearTimeout(timeoutId);
      }
    };
  });
  var onDOMBeforeInput = (0, import_react.useCallback)((event) => {
    onUserInput();
    if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target) && !isDOMEventHandled(event, propsOnDOMBeforeInput)) {
      var _EDITOR_TO_USER_SELEC;
      if (androidInputManager) {
        return androidInputManager.handleDOMBeforeInput(event);
      }
      scheduleOnDOMSelectionChange.flush();
      onDOMSelectionChange.flush();
      var {
        selection
      } = editor;
      var {
        inputType: type
      } = event;
      var data = event.dataTransfer || event.data || void 0;
      var isCompositionChange = type === "insertCompositionText" || type === "deleteCompositionText";
      if (isCompositionChange && ReactEditor.isComposing(editor)) {
        return;
      }
      var native = false;
      if (type === "insertText" && selection && Range.isCollapsed(selection) && // Only use native character insertion for single characters a-z or space for now.
      // Long-press events (hold a + press 4 = ) to choose a special character otherwise
      // causes duplicate inserts.
      event.data && event.data.length === 1 && /[a-z ]/i.test(event.data) && // Chrome has issues correctly editing the start of nodes: https://bugs.chromium.org/p/chromium/issues/detail?id=1249405
      // When there is an inline element, e.g. a link, and you select
      // right after it (the start of the next node).
      selection.anchor.offset !== 0) {
        var _node$parentElement, _window$getComputedSt;
        native = true;
        if (editor.marks) {
          native = false;
        }
        var {
          anchor: anchor2
        } = selection;
        var [node3, offset] = ReactEditor.toDOMPoint(editor, anchor2);
        var anchorNode = (_node$parentElement = node3.parentElement) === null || _node$parentElement === void 0 ? void 0 : _node$parentElement.closest("a");
        var window2 = ReactEditor.getWindow(editor);
        if (native && anchorNode && ReactEditor.hasDOMNode(editor, anchorNode)) {
          var _lastText$textContent;
          var lastText = window2 === null || window2 === void 0 ? void 0 : window2.document.createTreeWalker(anchorNode, NodeFilter.SHOW_TEXT).lastChild();
          if (lastText === node3 && ((_lastText$textContent = lastText.textContent) === null || _lastText$textContent === void 0 ? void 0 : _lastText$textContent.length) === offset) {
            native = false;
          }
        }
        if (native && node3.parentElement && (window2 === null || window2 === void 0 ? void 0 : (_window$getComputedSt = window2.getComputedStyle(node3.parentElement)) === null || _window$getComputedSt === void 0 ? void 0 : _window$getComputedSt.whiteSpace) === "pre") {
          var block = Editor.above(editor, {
            at: anchor2.path,
            match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3)
          });
          if (block && Node.string(block[0]).includes("	")) {
            native = false;
          }
        }
      }
      if (!type.startsWith("delete") || type.startsWith("deleteBy")) {
        var [targetRange2] = event.getTargetRanges();
        if (targetRange2) {
          var range2 = ReactEditor.toSlateRange(editor, targetRange2, {
            exactMatch: false,
            suppressThrow: false
          });
          if (!selection || !Range.equals(selection, range2)) {
            native = false;
            var selectionRef = !isCompositionChange && editor.selection && Editor.rangeRef(editor, editor.selection);
            Transforms.select(editor, range2);
            if (selectionRef) {
              EDITOR_TO_USER_SELECTION.set(editor, selectionRef);
            }
          }
        }
      }
      if (isCompositionChange) {
        return;
      }
      if (!native) {
        event.preventDefault();
      }
      if (selection && Range.isExpanded(selection) && type.startsWith("delete")) {
        var direction = type.endsWith("Backward") ? "backward" : "forward";
        Editor.deleteFragment(editor, {
          direction
        });
        return;
      }
      switch (type) {
        case "deleteByComposition":
        case "deleteByCut":
        case "deleteByDrag": {
          Editor.deleteFragment(editor);
          break;
        }
        case "deleteContent":
        case "deleteContentForward": {
          Editor.deleteForward(editor);
          break;
        }
        case "deleteContentBackward": {
          Editor.deleteBackward(editor);
          break;
        }
        case "deleteEntireSoftLine": {
          Editor.deleteBackward(editor, {
            unit: "line"
          });
          Editor.deleteForward(editor, {
            unit: "line"
          });
          break;
        }
        case "deleteHardLineBackward": {
          Editor.deleteBackward(editor, {
            unit: "block"
          });
          break;
        }
        case "deleteSoftLineBackward": {
          Editor.deleteBackward(editor, {
            unit: "line"
          });
          break;
        }
        case "deleteHardLineForward": {
          Editor.deleteForward(editor, {
            unit: "block"
          });
          break;
        }
        case "deleteSoftLineForward": {
          Editor.deleteForward(editor, {
            unit: "line"
          });
          break;
        }
        case "deleteWordBackward": {
          Editor.deleteBackward(editor, {
            unit: "word"
          });
          break;
        }
        case "deleteWordForward": {
          Editor.deleteForward(editor, {
            unit: "word"
          });
          break;
        }
        case "insertLineBreak":
          Editor.insertSoftBreak(editor);
          break;
        case "insertParagraph": {
          Editor.insertBreak(editor);
          break;
        }
        case "insertFromComposition":
        case "insertFromDrop":
        case "insertFromPaste":
        case "insertFromYank":
        case "insertReplacementText":
        case "insertText": {
          if (type === "insertFromComposition") {
            if (ReactEditor.isComposing(editor)) {
              setIsComposing(false);
              IS_COMPOSING.set(editor, false);
            }
          }
          if ((data === null || data === void 0 ? void 0 : data.constructor.name) === "DataTransfer") {
            ReactEditor.insertData(editor, data);
          } else if (typeof data === "string") {
            if (native) {
              deferredOperations.current.push(() => Editor.insertText(editor, data));
            } else {
              Editor.insertText(editor, data);
            }
          }
          break;
        }
      }
      var toRestore = (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(editor)) === null || _EDITOR_TO_USER_SELEC === void 0 ? void 0 : _EDITOR_TO_USER_SELEC.unref();
      EDITOR_TO_USER_SELECTION.delete(editor);
      if (toRestore && (!editor.selection || !Range.equals(editor.selection, toRestore))) {
        Transforms.select(editor, toRestore);
      }
    }
  }, [readOnly, propsOnDOMBeforeInput]);
  useIsomorphicLayoutEffect(() => {
    if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {
      ref.current.addEventListener("beforeinput", onDOMBeforeInput);
    }
    return () => {
      if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {
        ref.current.removeEventListener("beforeinput", onDOMBeforeInput);
      }
    };
  }, [onDOMBeforeInput]);
  useIsomorphicLayoutEffect(() => {
    var window2 = ReactEditor.getWindow(editor);
    window2.document.addEventListener("selectionchange", scheduleOnDOMSelectionChange);
    return () => {
      window2.document.removeEventListener("selectionchange", scheduleOnDOMSelectionChange);
    };
  }, [scheduleOnDOMSelectionChange]);
  var decorations = decorate([editor, []]);
  if (placeholder && editor.children.length === 1 && Array.from(Node.texts(editor)).length === 1 && Node.string(editor) === "" && !isComposing) {
    var start2 = Editor.start(editor, []);
    decorations.push({
      [PLACEHOLDER_SYMBOL]: true,
      placeholder,
      anchor: start2,
      focus: start2
    });
  }
  var {
    marks: marks3
  } = editor;
  state.hasMarkPlaceholder = false;
  if (editor.selection && Range.isCollapsed(editor.selection) && marks3) {
    var {
      anchor
    } = editor.selection;
    var leaf3 = Node.leaf(editor, anchor.path);
    var rest = _objectWithoutProperties2(leaf3, _excluded22);
    if (!Text.equals(leaf3, marks3, {
      loose: true
    })) {
      state.hasMarkPlaceholder = true;
      var unset = Object.fromEntries(Object.keys(rest).map((mark) => [mark, null]));
      decorations.push(_objectSpread$12(_objectSpread$12(_objectSpread$12({
        [MARK_PLACEHOLDER_SYMBOL]: true
      }, unset), marks3), {}, {
        anchor,
        focus: anchor
      }));
    }
  }
  (0, import_react.useEffect)(() => {
    setTimeout(() => {
      var {
        selection
      } = editor;
      if (selection) {
        var {
          anchor: _anchor
        } = selection;
        var _text = Node.leaf(editor, _anchor.path);
        if (marks3 && !Text.equals(_text, marks3, {
          loose: true
        })) {
          EDITOR_TO_PENDING_INSERTION_MARKS.set(editor, marks3);
          return;
        }
      }
      EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);
    });
  });
  var placeholderHeight = (_EDITOR_TO_PLACEHOLDE = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor)) === null || _EDITOR_TO_PLACEHOLDE === void 0 ? void 0 : (_EDITOR_TO_PLACEHOLDE2 = _EDITOR_TO_PLACEHOLDE.getBoundingClientRect()) === null || _EDITOR_TO_PLACEHOLDE2 === void 0 ? void 0 : _EDITOR_TO_PLACEHOLDE2.height;
  return /* @__PURE__ */ import_react.default.createElement(ReadOnlyContext.Provider, {
    value: readOnly
  }, /* @__PURE__ */ import_react.default.createElement(DecorateContext.Provider, {
    value: decorate
  }, /* @__PURE__ */ import_react.default.createElement(RestoreDOM, {
    node: ref,
    receivedUserInput
  }, /* @__PURE__ */ import_react.default.createElement(Component2, Object.assign({
    role: readOnly ? void 0 : "textbox",
    "aria-multiline": readOnly ? void 0 : true
  }, attributes, {
    // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd
    // have to use hacks to make these replacement-based features work.
    // For SSR situations HAS_BEFORE_INPUT_SUPPORT is false and results in prop
    // mismatch warning app moves to browser. Pass-through consumer props when
    // not CAN_USE_DOM (SSR) and default to falsy value
    spellCheck: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.spellCheck : false,
    autoCorrect: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCorrect : "false",
    autoCapitalize: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCapitalize : "false",
    "data-slate-editor": true,
    "data-slate-node": "value",
    // explicitly set this
    contentEditable: !readOnly,
    // in some cases, a decoration needs access to the range / selection to decorate a text node,
    // then you will select the whole text node when you select part the of text
    // this magic zIndex="-1" will fix it
    zindex: -1,
    suppressContentEditableWarning: true,
    ref,
    style: _objectSpread$12(_objectSpread$12({}, disableDefaultStyles ? {} : _objectSpread$12({
      // Allow positioning relative to the editable element.
      position: "relative",
      // Prevent the default outline styles.
      outline: "none",
      // Preserve adjacent whitespace and new lines.
      whiteSpace: "pre-wrap",
      // Allow words to break if they are too long.
      wordWrap: "break-word"
    }, placeholderHeight ? {
      minHeight: placeholderHeight
    } : {})), userStyle),
    onBeforeInput: (0, import_react.useCallback)((event) => {
      if (!HAS_BEFORE_INPUT_SUPPORT && !readOnly && !isEventHandled(event, attributes.onBeforeInput) && ReactEditor.hasSelectableTarget(editor, event.target)) {
        event.preventDefault();
        if (!ReactEditor.isComposing(editor)) {
          var _text2 = event.data;
          Editor.insertText(editor, _text2);
        }
      }
    }, [readOnly]),
    onInput: (0, import_react.useCallback)((event) => {
      if (androidInputManager) {
        androidInputManager.handleInput();
        return;
      }
      for (var op of deferredOperations.current) {
        op();
      }
      deferredOperations.current = [];
    }, []),
    onBlur: (0, import_react.useCallback)((event) => {
      if (readOnly || state.isUpdatingSelection || !ReactEditor.hasSelectableTarget(editor, event.target) || isEventHandled(event, attributes.onBlur)) {
        return;
      }
      var root = ReactEditor.findDocumentOrShadowRoot(editor);
      if (state.latestElement === root.activeElement) {
        return;
      }
      var {
        relatedTarget
      } = event;
      var el = ReactEditor.toDOMNode(editor, editor);
      if (relatedTarget === el) {
        return;
      }
      if (isDOMElement(relatedTarget) && relatedTarget.hasAttribute("data-slate-spacer")) {
        return;
      }
      if (relatedTarget != null && isDOMNode(relatedTarget) && ReactEditor.hasDOMNode(editor, relatedTarget)) {
        var node3 = ReactEditor.toSlateNode(editor, relatedTarget);
        if (Element2.isElement(node3) && !editor.isVoid(node3)) {
          return;
        }
      }
      if (IS_SAFARI) {
        var domSelection = root.getSelection();
        domSelection === null || domSelection === void 0 ? void 0 : domSelection.removeAllRanges();
      }
      IS_FOCUSED.delete(editor);
    }, [readOnly, attributes.onBlur]),
    onClick: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onClick) && isDOMNode(event.target)) {
        var node3 = ReactEditor.toSlateNode(editor, event.target);
        var path3 = ReactEditor.findPath(editor, node3);
        if (!Editor.hasPath(editor, path3) || Node.get(editor, path3) !== node3) {
          return;
        }
        if (event.detail === TRIPLE_CLICK && path3.length >= 1) {
          var blockPath = path3;
          if (!(Element2.isElement(node3) && Editor.isBlock(editor, node3))) {
            var _block$;
            var block = Editor.above(editor, {
              match: (n3) => Element2.isElement(n3) && Editor.isBlock(editor, n3),
              at: path3
            });
            blockPath = (_block$ = block === null || block === void 0 ? void 0 : block[1]) !== null && _block$ !== void 0 ? _block$ : path3.slice(0, 1);
          }
          var range2 = Editor.range(editor, blockPath);
          Transforms.select(editor, range2);
          return;
        }
        if (readOnly) {
          return;
        }
        var _start = Editor.start(editor, path3);
        var end2 = Editor.end(editor, path3);
        var startVoid = Editor.void(editor, {
          at: _start
        });
        var endVoid = Editor.void(editor, {
          at: end2
        });
        if (startVoid && endVoid && Path.equals(startVoid[1], endVoid[1])) {
          var _range = Editor.range(editor, _start);
          Transforms.select(editor, _range);
        }
      }
    }, [readOnly, attributes.onClick]),
    onCompositionEnd: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target)) {
        if (ReactEditor.isComposing(editor)) {
          setIsComposing(false);
          IS_COMPOSING.set(editor, false);
        }
        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleCompositionEnd(event);
        if (isEventHandled(event, attributes.onCompositionEnd) || IS_ANDROID) {
          return;
        }
        if (!IS_SAFARI && !IS_FIREFOX_LEGACY && !IS_IOS && !IS_WECHATBROWSER && !IS_UC_MOBILE && event.data) {
          var placeholderMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);
          EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);
          if (placeholderMarks !== void 0) {
            EDITOR_TO_USER_MARKS.set(editor, editor.marks);
            editor.marks = placeholderMarks;
          }
          Editor.insertText(editor, event.data);
          var userMarks = EDITOR_TO_USER_MARKS.get(editor);
          EDITOR_TO_USER_MARKS.delete(editor);
          if (userMarks !== void 0) {
            editor.marks = userMarks;
          }
        }
      }
    }, [attributes.onCompositionEnd]),
    onCompositionUpdate: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionUpdate)) {
        if (!ReactEditor.isComposing(editor)) {
          setIsComposing(true);
          IS_COMPOSING.set(editor, true);
        }
      }
    }, [attributes.onCompositionUpdate]),
    onCompositionStart: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target)) {
        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleCompositionStart(event);
        if (isEventHandled(event, attributes.onCompositionStart) || IS_ANDROID) {
          return;
        }
        setIsComposing(true);
        var {
          selection
        } = editor;
        if (selection) {
          if (Range.isExpanded(selection)) {
            Editor.deleteFragment(editor);
            return;
          }
          var inline = Editor.above(editor, {
            match: (n3) => Element2.isElement(n3) && Editor.isInline(editor, n3),
            mode: "highest"
          });
          if (inline) {
            var [, inlinePath] = inline;
            if (Editor.isEnd(editor, selection.anchor, inlinePath)) {
              var point3 = Editor.after(editor, inlinePath);
              Transforms.setSelection(editor, {
                anchor: point3,
                focus: point3
              });
            }
          }
        }
      }
    }, [attributes.onCompositionStart]),
    onCopy: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCopy)) {
        event.preventDefault();
        ReactEditor.setFragmentData(editor, event.clipboardData, "copy");
      }
    }, [attributes.onCopy]),
    onCut: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCut)) {
        event.preventDefault();
        ReactEditor.setFragmentData(editor, event.clipboardData, "cut");
        var {
          selection
        } = editor;
        if (selection) {
          if (Range.isExpanded(selection)) {
            Editor.deleteFragment(editor);
          } else {
            var node3 = Node.parent(editor, selection.anchor.path);
            if (Editor.isVoid(editor, node3)) {
              Transforms.delete(editor);
            }
          }
        }
      }
    }, [readOnly, attributes.onCut]),
    onDragOver: (0, import_react.useCallback)((event) => {
      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragOver)) {
        var node3 = ReactEditor.toSlateNode(editor, event.target);
        if (Element2.isElement(node3) && Editor.isVoid(editor, node3)) {
          event.preventDefault();
        }
      }
    }, [attributes.onDragOver]),
    onDragStart: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragStart)) {
        var node3 = ReactEditor.toSlateNode(editor, event.target);
        var path3 = ReactEditor.findPath(editor, node3);
        var voidMatch = Element2.isElement(node3) && Editor.isVoid(editor, node3) || Editor.void(editor, {
          at: path3,
          voids: true
        });
        if (voidMatch) {
          var range2 = Editor.range(editor, path3);
          Transforms.select(editor, range2);
        }
        state.isDraggingInternally = true;
        ReactEditor.setFragmentData(editor, event.dataTransfer, "drag");
      }
    }, [readOnly, attributes.onDragStart]),
    onDrop: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDrop)) {
        event.preventDefault();
        var draggedRange = editor.selection;
        var range2 = ReactEditor.findEventRange(editor, event);
        var data = event.dataTransfer;
        Transforms.select(editor, range2);
        if (state.isDraggingInternally) {
          if (draggedRange && !Range.equals(draggedRange, range2) && !Editor.void(editor, {
            at: range2,
            voids: true
          })) {
            Transforms.delete(editor, {
              at: draggedRange
            });
          }
        }
        ReactEditor.insertData(editor, data);
        if (!ReactEditor.isFocused(editor)) {
          ReactEditor.focus(editor);
        }
      }
      state.isDraggingInternally = false;
    }, [readOnly, attributes.onDrop]),
    onDragEnd: (0, import_react.useCallback)((event) => {
      if (!readOnly && state.isDraggingInternally && attributes.onDragEnd && ReactEditor.hasTarget(editor, event.target)) {
        attributes.onDragEnd(event);
      }
      state.isDraggingInternally = false;
    }, [readOnly, attributes.onDragEnd]),
    onFocus: (0, import_react.useCallback)((event) => {
      if (!readOnly && !state.isUpdatingSelection && ReactEditor.hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onFocus)) {
        var el = ReactEditor.toDOMNode(editor, editor);
        var root = ReactEditor.findDocumentOrShadowRoot(editor);
        state.latestElement = root.activeElement;
        if (IS_FIREFOX && event.target !== el) {
          el.focus();
          return;
        }
        IS_FOCUSED.set(editor, true);
      }
    }, [readOnly, attributes.onFocus]),
    onKeyDown: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target)) {
        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleKeyDown(event);
        var {
          nativeEvent
        } = event;
        if (ReactEditor.isComposing(editor) && nativeEvent.isComposing === false) {
          IS_COMPOSING.set(editor, false);
          setIsComposing(false);
        }
        if (isEventHandled(event, attributes.onKeyDown) || ReactEditor.isComposing(editor)) {
          return;
        }
        var {
          selection
        } = editor;
        var element = editor.children[selection !== null ? selection.focus.path[0] : 0];
        var isRTL = (0, import_direction.default)(Node.string(element)) === "rtl";
        if (Hotkeys.isRedo(nativeEvent)) {
          event.preventDefault();
          var maybeHistoryEditor = editor;
          if (typeof maybeHistoryEditor.redo === "function") {
            maybeHistoryEditor.redo();
          }
          return;
        }
        if (Hotkeys.isUndo(nativeEvent)) {
          event.preventDefault();
          var _maybeHistoryEditor = editor;
          if (typeof _maybeHistoryEditor.undo === "function") {
            _maybeHistoryEditor.undo();
          }
          return;
        }
        if (Hotkeys.isMoveLineBackward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line",
            reverse: true
          });
          return;
        }
        if (Hotkeys.isMoveLineForward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line"
          });
          return;
        }
        if (Hotkeys.isExtendLineBackward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line",
            edge: "focus",
            reverse: true
          });
          return;
        }
        if (Hotkeys.isExtendLineForward(nativeEvent)) {
          event.preventDefault();
          Transforms.move(editor, {
            unit: "line",
            edge: "focus"
          });
          return;
        }
        if (Hotkeys.isMoveBackward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isCollapsed(selection)) {
            Transforms.move(editor, {
              reverse: !isRTL
            });
          } else {
            Transforms.collapse(editor, {
              edge: "start"
            });
          }
          return;
        }
        if (Hotkeys.isMoveForward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isCollapsed(selection)) {
            Transforms.move(editor, {
              reverse: isRTL
            });
          } else {
            Transforms.collapse(editor, {
              edge: "end"
            });
          }
          return;
        }
        if (Hotkeys.isMoveWordBackward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isExpanded(selection)) {
            Transforms.collapse(editor, {
              edge: "focus"
            });
          }
          Transforms.move(editor, {
            unit: "word",
            reverse: !isRTL
          });
          return;
        }
        if (Hotkeys.isMoveWordForward(nativeEvent)) {
          event.preventDefault();
          if (selection && Range.isExpanded(selection)) {
            Transforms.collapse(editor, {
              edge: "focus"
            });
          }
          Transforms.move(editor, {
            unit: "word",
            reverse: isRTL
          });
          return;
        }
        if (!HAS_BEFORE_INPUT_SUPPORT) {
          if (Hotkeys.isBold(nativeEvent) || Hotkeys.isItalic(nativeEvent) || Hotkeys.isTransposeCharacter(nativeEvent)) {
            event.preventDefault();
            return;
          }
          if (Hotkeys.isSoftBreak(nativeEvent)) {
            event.preventDefault();
            Editor.insertSoftBreak(editor);
            return;
          }
          if (Hotkeys.isSplitBlock(nativeEvent)) {
            event.preventDefault();
            Editor.insertBreak(editor);
            return;
          }
          if (Hotkeys.isDeleteBackward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "backward"
              });
            } else {
              Editor.deleteBackward(editor);
            }
            return;
          }
          if (Hotkeys.isDeleteForward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "forward"
              });
            } else {
              Editor.deleteForward(editor);
            }
            return;
          }
          if (Hotkeys.isDeleteLineBackward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "backward"
              });
            } else {
              Editor.deleteBackward(editor, {
                unit: "line"
              });
            }
            return;
          }
          if (Hotkeys.isDeleteLineForward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "forward"
              });
            } else {
              Editor.deleteForward(editor, {
                unit: "line"
              });
            }
            return;
          }
          if (Hotkeys.isDeleteWordBackward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "backward"
              });
            } else {
              Editor.deleteBackward(editor, {
                unit: "word"
              });
            }
            return;
          }
          if (Hotkeys.isDeleteWordForward(nativeEvent)) {
            event.preventDefault();
            if (selection && Range.isExpanded(selection)) {
              Editor.deleteFragment(editor, {
                direction: "forward"
              });
            } else {
              Editor.deleteForward(editor, {
                unit: "word"
              });
            }
            return;
          }
        } else {
          if (IS_CHROME || IS_SAFARI) {
            if (selection && (Hotkeys.isDeleteBackward(nativeEvent) || Hotkeys.isDeleteForward(nativeEvent)) && Range.isCollapsed(selection)) {
              var currentNode = Node.parent(editor, selection.anchor.path);
              if (Element2.isElement(currentNode) && Editor.isVoid(editor, currentNode) && (Editor.isInline(editor, currentNode) || Editor.isBlock(editor, currentNode))) {
                event.preventDefault();
                Editor.deleteBackward(editor, {
                  unit: "block"
                });
                return;
              }
            }
          }
        }
      }
    }, [readOnly, attributes.onKeyDown]),
    onPaste: (0, import_react.useCallback)((event) => {
      if (!readOnly && ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onPaste)) {
        if (!HAS_BEFORE_INPUT_SUPPORT || isPlainTextOnlyPaste(event.nativeEvent)) {
          event.preventDefault();
          ReactEditor.insertData(editor, event.clipboardData);
        }
      }
    }, [readOnly, attributes.onPaste])
  }), /* @__PURE__ */ import_react.default.createElement(Children, {
    decorations,
    node: editor,
    renderElement,
    renderPlaceholder,
    renderLeaf,
    selection: editor.selection
  })))));
};
var DefaultPlaceholder = (_ref) => {
  var {
    attributes,
    children
  } = _ref;
  return (
    // COMPAT: Artificially add a line-break to the end on the placeholder element
    // to prevent Android IMEs to pick up its content in autocorrect and to auto-capitalize the first letter
    /* @__PURE__ */ import_react.default.createElement("span", Object.assign({}, attributes), children, IS_ANDROID && /* @__PURE__ */ import_react.default.createElement("br", null))
  );
};
var defaultDecorate = () => [];
var defaultScrollSelectionIntoView = (editor, domRange) => {
  if (domRange.getBoundingClientRect && (!editor.selection || editor.selection && Range.isCollapsed(editor.selection))) {
    var leafEl = domRange.startContainer.parentElement;
    leafEl.getBoundingClientRect = domRange.getBoundingClientRect.bind(domRange);
    es_default(leafEl, {
      scrollMode: "if-needed"
    });
    delete leafEl.getBoundingClientRect;
  }
};
var isEventHandled = (event, handler) => {
  if (!handler) {
    return false;
  }
  var shouldTreatEventAsHandled = handler(event);
  if (shouldTreatEventAsHandled != null) {
    return shouldTreatEventAsHandled;
  }
  return event.isDefaultPrevented() || event.isPropagationStopped();
};
var isDOMEventHandled = (event, handler) => {
  if (!handler) {
    return false;
  }
  var shouldTreatEventAsHandled = handler(event);
  if (shouldTreatEventAsHandled != null) {
    return shouldTreatEventAsHandled;
  }
  return event.defaultPrevented;
};
var FocusedContext = /* @__PURE__ */ (0, import_react.createContext)(false);
var SlateSelectorContext = /* @__PURE__ */ (0, import_react.createContext)({});
function getSelectorContext(editor) {
  var eventListeners = (0, import_react.useRef)([]).current;
  var slateRef = (0, import_react.useRef)({
    editor
  }).current;
  var onChange = (0, import_react.useCallback)((editor2) => {
    slateRef.editor = editor2;
    eventListeners.forEach((listener) => listener(editor2));
  }, []);
  var selectorContext = (0, import_react.useMemo)(() => {
    return {
      getSlate: () => slateRef.editor,
      addEventListener: (callback) => {
        eventListeners.push(callback);
        return () => {
          eventListeners.splice(eventListeners.indexOf(callback), 1);
        };
      }
    };
  }, [eventListeners, slateRef]);
  return {
    selectorContext,
    onChange
  };
}
var _excluded3 = ["editor", "children", "onChange", "value"];
var Slate = (props) => {
  var {
    editor,
    children,
    onChange,
    value
  } = props, rest = _objectWithoutProperties2(props, _excluded3);
  var unmountRef = (0, import_react.useRef)(false);
  var [context, setContext] = import_react.default.useState(() => {
    if (!Node.isNodeList(value)) {
      throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(Scrubber.stringify(value)));
    }
    if (!Editor.isEditor(editor)) {
      throw new Error("[Slate] editor is invalid! You passed: ".concat(Scrubber.stringify(editor)));
    }
    editor.children = value;
    Object.assign(editor, rest);
    return {
      v: 0,
      editor
    };
  });
  var {
    selectorContext,
    onChange: handleSelectorChange
  } = getSelectorContext(editor);
  var onContextChange = (0, import_react.useCallback)(() => {
    if (onChange) {
      onChange(editor.children);
    }
    setContext((prevContext) => ({
      v: prevContext.v + 1,
      editor
    }));
    handleSelectorChange(editor);
  }, [onChange]);
  (0, import_react.useEffect)(() => {
    EDITOR_TO_ON_CHANGE.set(editor, onContextChange);
    return () => {
      EDITOR_TO_ON_CHANGE.set(editor, () => {
      });
      unmountRef.current = true;
    };
  }, []);
  var [isFocused, setIsFocused] = (0, import_react.useState)(ReactEditor.isFocused(editor));
  (0, import_react.useEffect)(() => {
    setIsFocused(ReactEditor.isFocused(editor));
  });
  useIsomorphicLayoutEffect(() => {
    var fn = () => setIsFocused(ReactEditor.isFocused(editor));
    if (IS_REACT_VERSION_17_OR_ABOVE) {
      document.addEventListener("focusin", fn);
      document.addEventListener("focusout", fn);
      return () => {
        document.removeEventListener("focusin", fn);
        document.removeEventListener("focusout", fn);
      };
    } else {
      document.addEventListener("focus", fn, true);
      document.addEventListener("blur", fn, true);
      return () => {
        document.removeEventListener("focus", fn, true);
        document.removeEventListener("blur", fn, true);
      };
    }
  }, []);
  return /* @__PURE__ */ import_react.default.createElement(SlateSelectorContext.Provider, {
    value: selectorContext
  }, /* @__PURE__ */ import_react.default.createElement(SlateContext.Provider, {
    value: context
  }, /* @__PURE__ */ import_react.default.createElement(EditorContext.Provider, {
    value: context.editor
  }, /* @__PURE__ */ import_react.default.createElement(FocusedContext.Provider, {
    value: isFocused
  }, children))));
};
var doRectsIntersect = (rect, compareRect) => {
  var middle = (compareRect.top + compareRect.bottom) / 2;
  return rect.top <= middle && rect.bottom >= middle;
};
var areRangesSameLine = (editor, range1, range2) => {
  var rect1 = ReactEditor.toDOMRange(editor, range1).getBoundingClientRect();
  var rect2 = ReactEditor.toDOMRange(editor, range2).getBoundingClientRect();
  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1);
};
var findCurrentLineRange = (editor, parentRange) => {
  var parentRangeBoundary = Editor.range(editor, Range.end(parentRange));
  var positions2 = Array.from(Editor.positions(editor, {
    at: parentRange
  }));
  var left = 0;
  var right = positions2.length;
  var middle = Math.floor(right / 2);
  if (areRangesSameLine(editor, Editor.range(editor, positions2[left]), parentRangeBoundary)) {
    return Editor.range(editor, positions2[left], parentRangeBoundary);
  }
  if (positions2.length < 2) {
    return Editor.range(editor, positions2[positions2.length - 1], parentRangeBoundary);
  }
  while (middle !== positions2.length && middle !== left) {
    if (areRangesSameLine(editor, Editor.range(editor, positions2[middle]), parentRangeBoundary)) {
      right = middle;
    } else {
      left = middle;
    }
    middle = Math.floor((left + right) / 2);
  }
  return Editor.range(editor, positions2[right], parentRangeBoundary);
};
function ownKeys2(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread2(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys2(Object(source), true).forEach(function(key) {
        _defineProperty2(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys2(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var withReact = (editor) => {
  var e2 = editor;
  var {
    apply: apply2,
    onChange,
    deleteBackward: deleteBackward2,
    addMark: addMark2,
    removeMark: removeMark2
  } = e2;
  EDITOR_TO_KEY_TO_ELEMENT.set(e2, /* @__PURE__ */ new WeakMap());
  e2.addMark = (key, value) => {
    var _EDITOR_TO_SCHEDULE_F, _EDITOR_TO_PENDING_DI;
    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(e2)) === null || _EDITOR_TO_SCHEDULE_F === void 0 ? void 0 : _EDITOR_TO_SCHEDULE_F();
    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e2) && (_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(e2)) !== null && _EDITOR_TO_PENDING_DI !== void 0 && _EDITOR_TO_PENDING_DI.length) {
      EDITOR_TO_PENDING_INSERTION_MARKS.set(e2, null);
    }
    EDITOR_TO_USER_MARKS.delete(e2);
    addMark2(key, value);
  };
  e2.removeMark = (key) => {
    var _EDITOR_TO_PENDING_DI2;
    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e2) && (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(e2)) !== null && _EDITOR_TO_PENDING_DI2 !== void 0 && _EDITOR_TO_PENDING_DI2.length) {
      EDITOR_TO_PENDING_INSERTION_MARKS.set(e2, null);
    }
    EDITOR_TO_USER_MARKS.delete(e2);
    removeMark2(key);
  };
  e2.deleteBackward = (unit) => {
    if (unit !== "line") {
      return deleteBackward2(unit);
    }
    if (e2.selection && Range.isCollapsed(e2.selection)) {
      var parentBlockEntry = Editor.above(e2, {
        match: (n3) => Element2.isElement(n3) && Editor.isBlock(e2, n3),
        at: e2.selection
      });
      if (parentBlockEntry) {
        var [, parentBlockPath] = parentBlockEntry;
        var parentElementRange = Editor.range(e2, parentBlockPath, e2.selection.anchor);
        var currentLineRange = findCurrentLineRange(e2, parentElementRange);
        if (!Range.isCollapsed(currentLineRange)) {
          Transforms.delete(e2, {
            at: currentLineRange
          });
        }
      }
    }
  };
  e2.apply = (op) => {
    var matches = [];
    var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(e2);
    if (pendingDiffs !== null && pendingDiffs !== void 0 && pendingDiffs.length) {
      var transformed = pendingDiffs.map((textDiff) => transformTextDiff(textDiff, op)).filter(Boolean);
      EDITOR_TO_PENDING_DIFFS.set(e2, transformed);
    }
    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(e2);
    if (pendingSelection) {
      EDITOR_TO_PENDING_SELECTION.set(e2, transformPendingRange(e2, pendingSelection, op));
    }
    var pendingAction = EDITOR_TO_PENDING_ACTION.get(e2);
    if (pendingAction !== null && pendingAction !== void 0 && pendingAction.at) {
      var at = Point.isPoint(pendingAction === null || pendingAction === void 0 ? void 0 : pendingAction.at) ? transformPendingPoint(e2, pendingAction.at, op) : transformPendingRange(e2, pendingAction.at, op);
      EDITOR_TO_PENDING_ACTION.set(e2, at ? _objectSpread2(_objectSpread2({}, pendingAction), {}, {
        at
      }) : null);
    }
    switch (op.type) {
      case "insert_text":
      case "remove_text":
      case "set_node":
      case "split_node": {
        matches.push(...getMatches(e2, op.path));
        break;
      }
      case "set_selection": {
        var _EDITOR_TO_USER_SELEC;
        (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(e2)) === null || _EDITOR_TO_USER_SELEC === void 0 ? void 0 : _EDITOR_TO_USER_SELEC.unref();
        EDITOR_TO_USER_SELECTION.delete(e2);
        break;
      }
      case "insert_node":
      case "remove_node": {
        matches.push(...getMatches(e2, Path.parent(op.path)));
        break;
      }
      case "merge_node": {
        var prevPath = Path.previous(op.path);
        matches.push(...getMatches(e2, prevPath));
        break;
      }
      case "move_node": {
        var commonPath = Path.common(Path.parent(op.path), Path.parent(op.newPath));
        matches.push(...getMatches(e2, commonPath));
        break;
      }
    }
    apply2(op);
    for (var [path3, key] of matches) {
      var [node3] = Editor.node(e2, path3);
      NODE_TO_KEY.set(node3, key);
    }
  };
  e2.setFragmentData = (data) => {
    var {
      selection
    } = e2;
    if (!selection) {
      return;
    }
    var [start2, end2] = Range.edges(selection);
    var startVoid = Editor.void(e2, {
      at: start2.path
    });
    var endVoid = Editor.void(e2, {
      at: end2.path
    });
    if (Range.isCollapsed(selection) && !startVoid) {
      return;
    }
    var domRange = ReactEditor.toDOMRange(e2, selection);
    var contents = domRange.cloneContents();
    var attach = contents.childNodes[0];
    contents.childNodes.forEach((node3) => {
      if (node3.textContent && node3.textContent.trim() !== "") {
        attach = node3;
      }
    });
    if (endVoid) {
      var [voidNode] = endVoid;
      var r2 = domRange.cloneRange();
      var domNode = ReactEditor.toDOMNode(e2, voidNode);
      r2.setEndAfter(domNode);
      contents = r2.cloneContents();
    }
    if (startVoid) {
      attach = contents.querySelector("[data-slate-spacer]");
    }
    Array.from(contents.querySelectorAll("[data-slate-zero-width]")).forEach((zw) => {
      var isNewline = zw.getAttribute("data-slate-zero-width") === "n";
      zw.textContent = isNewline ? "\n" : "";
    });
    if (isDOMText(attach)) {
      var span = attach.ownerDocument.createElement("span");
      span.style.whiteSpace = "pre";
      span.appendChild(attach);
      contents.appendChild(span);
      attach = span;
    }
    var fragment2 = e2.getFragment();
    var string3 = JSON.stringify(fragment2);
    var encoded = window.btoa(encodeURIComponent(string3));
    attach.setAttribute("data-slate-fragment", encoded);
    data.setData("application/x-slate-fragment", encoded);
    var div = contents.ownerDocument.createElement("div");
    div.appendChild(contents);
    div.setAttribute("hidden", "true");
    contents.ownerDocument.body.appendChild(div);
    data.setData("text/html", div.innerHTML);
    data.setData("text/plain", getPlainText(div));
    contents.ownerDocument.body.removeChild(div);
    return data;
  };
  e2.insertData = (data) => {
    if (!e2.insertFragmentData(data)) {
      e2.insertTextData(data);
    }
  };
  e2.insertFragmentData = (data) => {
    var fragment2 = data.getData("application/x-slate-fragment") || getSlateFragmentAttribute(data);
    if (fragment2) {
      var decoded = decodeURIComponent(window.atob(fragment2));
      var parsed = JSON.parse(decoded);
      e2.insertFragment(parsed);
      return true;
    }
    return false;
  };
  e2.insertTextData = (data) => {
    var text = data.getData("text/plain");
    if (text) {
      var lines = text.split(/\r\n|\r|\n/);
      var split = false;
      for (var line of lines) {
        if (split) {
          Transforms.splitNodes(e2, {
            always: true
          });
        }
        e2.insertText(line);
        split = true;
      }
      return true;
    }
    return false;
  };
  e2.onChange = () => {
    import_react_dom.default.unstable_batchedUpdates(() => {
      var onContextChange = EDITOR_TO_ON_CHANGE.get(e2);
      if (onContextChange) {
        onContextChange();
      }
      onChange();
    });
  };
  return e2;
};
var getMatches = (e2, path3) => {
  var matches = [];
  for (var [n3, p] of Editor.levels(e2, {
    at: path3
  })) {
    var key = ReactEditor.findKey(e2, n3);
    matches.push([p, key]);
  }
  return matches;
};

// ../node_modules/slate-history/dist/index.es.js
var History = {
  /**
   * Check if a value is a `History` object.
   */
  isHistory(value) {
    return isPlainObject(value) && Array.isArray(value.redos) && Array.isArray(value.undos) && (value.redos.length === 0 || Operation.isOperationList(value.redos[0].operations)) && (value.undos.length === 0 || Operation.isOperationList(value.undos[0].operations));
  }
};
var SAVING = /* @__PURE__ */ new WeakMap();
var MERGING = /* @__PURE__ */ new WeakMap();
var HistoryEditor = {
  /**
   * Check if a value is a `HistoryEditor` object.
   */
  isHistoryEditor(value) {
    return History.isHistory(value.history) && Editor.isEditor(value);
  },
  /**
   * Get the merge flag's current value.
   */
  isMerging(editor) {
    return MERGING.get(editor);
  },
  /**
   * Get the saving flag's current value.
   */
  isSaving(editor) {
    return SAVING.get(editor);
  },
  /**
   * Redo to the previous saved state.
   */
  redo(editor) {
    editor.redo();
  },
  /**
   * Undo to the previous saved state.
   */
  undo(editor) {
    editor.undo();
  },
  /**
   * Apply a series of changes inside a synchronous `fn`, without merging any of
   * the new operations into previous save point in the history.
   */
  withoutMerging(editor, fn) {
    var prev = HistoryEditor.isMerging(editor);
    MERGING.set(editor, false);
    fn();
    MERGING.set(editor, prev);
  },
  /**
   * Apply a series of changes inside a synchronous `fn`, without saving any of
   * their operations into the history.
   */
  withoutSaving(editor, fn) {
    var prev = HistoryEditor.isSaving(editor);
    SAVING.set(editor, false);
    fn();
    SAVING.set(editor, prev);
  }
};
var withHistory = (editor) => {
  var e2 = editor;
  var {
    apply: apply2
  } = e2;
  e2.history = {
    undos: [],
    redos: []
  };
  e2.redo = () => {
    var {
      history
    } = e2;
    var {
      redos
    } = history;
    if (redos.length > 0) {
      var batch = redos[redos.length - 1];
      if (batch.selectionBefore) {
        Transforms.setSelection(e2, batch.selectionBefore);
      }
      HistoryEditor.withoutSaving(e2, () => {
        Editor.withoutNormalizing(e2, () => {
          for (var op of batch.operations) {
            e2.apply(op);
          }
        });
      });
      history.redos.pop();
      e2.writeHistory("undos", batch);
    }
  };
  e2.undo = () => {
    var {
      history
    } = e2;
    var {
      undos
    } = history;
    if (undos.length > 0) {
      var batch = undos[undos.length - 1];
      HistoryEditor.withoutSaving(e2, () => {
        Editor.withoutNormalizing(e2, () => {
          var inverseOps = batch.operations.map(Operation.inverse).reverse();
          for (var op of inverseOps) {
            e2.apply(op);
          }
          if (batch.selectionBefore) {
            Transforms.setSelection(e2, batch.selectionBefore);
          }
        });
      });
      e2.writeHistory("redos", batch);
      history.undos.pop();
    }
  };
  e2.apply = (op) => {
    var {
      operations,
      history
    } = e2;
    var {
      undos
    } = history;
    var lastBatch = undos[undos.length - 1];
    var lastOp = lastBatch && lastBatch.operations[lastBatch.operations.length - 1];
    var save = HistoryEditor.isSaving(e2);
    var merge = HistoryEditor.isMerging(e2);
    if (save == null) {
      save = shouldSave(op);
    }
    if (save) {
      if (merge == null) {
        if (lastBatch == null) {
          merge = false;
        } else if (operations.length !== 0) {
          merge = true;
        } else {
          merge = shouldMerge(op, lastOp);
        }
      }
      if (lastBatch && merge) {
        lastBatch.operations.push(op);
      } else {
        var batch = {
          operations: [op],
          selectionBefore: e2.selection
        };
        e2.writeHistory("undos", batch);
      }
      while (undos.length > 100) {
        undos.shift();
      }
      history.redos = [];
    }
    apply2(op);
  };
  e2.writeHistory = (stack, batch) => {
    e2.history[stack].push(batch);
  };
  return e2;
};
var shouldMerge = (op, prev) => {
  if (prev && op.type === "insert_text" && prev.type === "insert_text" && op.offset === prev.offset + prev.text.length && Path.equals(op.path, prev.path)) {
    return true;
  }
  if (prev && op.type === "remove_text" && prev.type === "remove_text" && op.offset + op.text.length === prev.offset && Path.equals(op.path, prev.path)) {
    return true;
  }
  return false;
};
var shouldSave = (op, prev) => {
  if (op.type === "set_selection") {
    return false;
  }
  return true;
};

// ../node_modules/pretty-bytes/index.js
var BYTE_UNITS = [
  "B",
  "kB",
  "MB",
  "GB",
  "TB",
  "PB",
  "EB",
  "ZB",
  "YB"
];
var BIBYTE_UNITS = [
  "B",
  "KiB",
  "MiB",
  "GiB",
  "TiB",
  "PiB",
  "EiB",
  "ZiB",
  "YiB"
];
var BIT_UNITS = [
  "b",
  "kbit",
  "Mbit",
  "Gbit",
  "Tbit",
  "Pbit",
  "Ebit",
  "Zbit",
  "Ybit"
];
var BIBIT_UNITS = [
  "b",
  "kibit",
  "Mibit",
  "Gibit",
  "Tibit",
  "Pibit",
  "Eibit",
  "Zibit",
  "Yibit"
];
var toLocaleString = (number, locale, options) => {
  let result = number;
  if (typeof locale === "string" || Array.isArray(locale)) {
    result = number.toLocaleString(locale, options);
  } else if (locale === true || options !== void 0) {
    result = number.toLocaleString(void 0, options);
  }
  return result;
};
function prettyBytes(number, options) {
  if (!Number.isFinite(number)) {
    throw new TypeError("Expected a finite number, got ".concat(typeof number, ": ").concat(number));
  }
  options = __spreadValues({
    bits: false,
    binary: false,
    space: true
  }, options);
  const UNITS = options.bits ? options.binary ? BIBIT_UNITS : BIT_UNITS : options.binary ? BIBYTE_UNITS : BYTE_UNITS;
  const separator = options.space ? " " : "";
  if (options.signed && number === 0) {
    return " 0".concat(separator).concat(UNITS[0]);
  }
  const isNegative = number < 0;
  const prefix = isNegative ? "-" : options.signed ? "+" : "";
  if (isNegative) {
    number = -number;
  }
  let localeOptions;
  if (options.minimumFractionDigits !== void 0) {
    localeOptions = { minimumFractionDigits: options.minimumFractionDigits };
  }
  if (options.maximumFractionDigits !== void 0) {
    localeOptions = __spreadValues({ maximumFractionDigits: options.maximumFractionDigits }, localeOptions);
  }
  if (number < 1) {
    const numberString2 = toLocaleString(number, options.locale, localeOptions);
    return prefix + numberString2 + separator + UNITS[0];
  }
  const exponent = Math.min(Math.floor(options.binary ? Math.log(number) / Math.log(1024) : Math.log10(number) / 3), UNITS.length - 1);
  number /= (options.binary ? 1024 : 1e3) ** exponent;
  if (!localeOptions) {
    number = number.toPrecision(3);
  }
  const numberString = toLocaleString(Number(number), options.locale, localeOptions);
  const unit = UNITS[exponent];
  return prefix + numberString + separator + unit;
}

// ../editor/slate/current-element.tsx
var import_react2 = __toESM(require_react());
var CurrentElementContext = import_react2.default.createContext(null);
var CurrentElementProvider = class extends import_react2.default.PureComponent {
  render() {
    return /* @__PURE__ */ import_react2.default.createElement(CurrentElementContext.Provider, { value: this.props }, this.props.children);
  }
};
var CurrentElementRetrieverOptimizer = class extends import_react2.default.PureComponent {
  render() {
    return this.props.fn({
      attributes: this.props.attributes,
      children: this.props.children,
      element: this.props.element
    }, this.props.isSelected, this.props.selectionCriteria, this.props.selectionIsPrimary);
  }
};
var CurrentElementRetriever = class extends import_react2.default.PureComponent {
  constructor(props) {
    super(props);
    this.consume = this.consume.bind(this);
  }
  consume(selection) {
    const elementInQuestion = this.props.element;
    let isSelected = false;
    let selectionCriteria = null;
    let selectionIsPrimary = false;
    if (isBlock(elementInQuestion)) {
      selectionCriteria = "block";
      isSelected = selection.block === elementInQuestion;
      selectionIsPrimary = isSelected && !selection.inline;
    } else if (isSuperBlock(elementInQuestion)) {
      selectionCriteria = "superblock";
      const index = selection.superblocks.findIndex((e2) => e2 === elementInQuestion);
      isSelected = index !== -1;
      selectionIsPrimary = isSelected && !selection.block && !selection.inline && index === selection.superblocks.length - 1;
    } else {
      selectionCriteria = "inline";
      isSelected = selection.inline === elementInQuestion;
      selectionIsPrimary = isSelected;
    }
    return /* @__PURE__ */ import_react2.default.createElement(
      CurrentElementRetrieverOptimizer,
      __spreadProps(__spreadValues({}, this.props), {
        isSelected,
        selectionCriteria,
        selectionIsPrimary
      })
    );
  }
  render() {
    return /* @__PURE__ */ import_react2.default.createElement(CurrentElementContext.Consumer, null, this.consume);
  }
};

// ../util/index.ts
var import_deep_equal = __toESM(require_deep_equal());
function countSize(root) {
  if (typeof root.text === "string") {
    return root.text.length;
  }
  const counts = root.children.map(countSize);
  if (counts.length === 0) {
    return 0;
  } else if (counts.length === 1) {
    return counts[0];
  }
  return counts.reduce((a, b) => a + b);
}
function countSizeAndWords(root) {
  if (typeof root.text === "string") {
    return [
      root.text.length,
      root.text.split(" ").filter((v) => v !== "").length
    ];
  }
  const results = root.children.map(countSizeAndWords);
  if (results.length === 0) {
    return [0, 0];
  } else if (results.length === 1) {
    return results[0];
  }
  return results.reduce((a, b) => {
    return [a[0] + b[0], a[1] + b[1]];
  });
}

// ../editor/index.ts
function localeReplacer(str, ...args) {
  return str.replace(/\{(\d+)\}/g, (match, indexMatch) => {
    if (typeof args[indexMatch] === "undefined") {
      return "?";
    } else if (args[indexMatch] === null) {
      return "";
    }
    return args[indexMatch].toString();
  });
}
var mimeExtensions = {
  "audio/aac": "aac",
  "application/x-abiword": "abw",
  "application/x-freearc": "arc",
  "video/x-msvideo": "avi",
  "application/vnd.amazon.ebook": "azw",
  "application/octet-stream": "bin",
  "image/bmp": "bmp",
  "application/x-bzip": "bz",
  "application/x-bzip2": "bz2",
  "application/x-csh": "csh",
  "text/css": "css",
  "text/csv": "csv",
  "application/msword": "doc",
  "application/vnd.openxmlformats-officedocument.wordprocessingml.document": "docx",
  "application/vnd.ms-fontobject": "eot",
  "application/epub+zip": "epub",
  "image/gif": "gif",
  "text/html": "html",
  "image/vnd.microsoft.icon": "ico",
  "text/calendar": "ics",
  "application/java-archive": "jar",
  "image/jpeg": "jpg",
  "text/javascript": "js",
  "application/json": "json",
  "application/ld+json": "jsonld",
  "audio/midi audio/x-midi": "mid",
  "audio/mpeg": "mp3",
  "video/mpeg": "mpeg",
  "application/vnd.apple.installer+xml": "mpkg",
  "application/vnd.oasis.opendocument.presentation": "odp",
  "application/vnd.oasis.opendocument.spreadsheet": "ods",
  "application/vnd.oasis.opendocument.text": "odt",
  "audio/ogg": "oga",
  "video/ogg": "ogv",
  "application/ogg": "ogx",
  "font/otf": "otf",
  "image/png": "png",
  "application/pdf": "pdf",
  "application/vnd.ms-powerpoint": "ppt",
  "application/vnd.openxmlformats-officedocument.presentationml.presentation": "pptx",
  "application/x-rar-compressed": "rar",
  "application/rtf": "rtf",
  "application/x-sh": "sh",
  "image/svg+xml": "svg",
  "application/x-shockwave-flash": "swf",
  "application/x-tar": "tar",
  "image/tiff": "tiff",
  "font/ttf": "ttf",
  "text/plain": "txt",
  "application/vnd.visio": "vsd",
  "audio/wav": "wav",
  "audio/webm": "weba",
  "video/webm": "webm",
  "image/webp": "webp",
  "font/woff": "woff",
  "font/woff2": "woff2",
  "application/xhtml+xml": "xhtml",
  "application/vnd.ms-excel": "xls",
  "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": "xlsx",
  "application/xml if not readable from casual users (RFC 3023, section 3)": "xml",
  "application/vnd.mozilla.xul+xml": "xul",
  "application/zip": "zip",
  "video/3gpp": "3gp",
  "video/3gpp2": "3g2",
  "application/x-7z-compressed": "7z"
};
function mimeTypeToExtension(str) {
  const expectedExt = mimeExtensions[str];
  if (expectedExt) {
    return expectedExt;
  }
  return (str.split("/")[1] || "txt").substr(0, 3);
}
var templatedAttributes = [
  "thref",
  "textContent",
  "html",
  "forEach",
  "context",
  "uiHandler"
];
var templatedInteractiveActions = [
  "click",
  "blur",
  "focus",
  "input",
  "keydown",
  "keypress",
  "keyup",
  "mousedown",
  "mouseenter",
  "mouseleave",
  "mousemove",
  "mouseover",
  "mouseout",
  "mouseup",
  "mousewheel",
  "touchstart",
  "touchmove",
  "touchend",
  "touchcancel",
  "wheel"
];
var templatedStyledAttributes = [
  "styleHover",
  "styleActive"
];
var specialTypes = {
  "void-block": "container",
  "void-superblock": "container",
  "void-inline": "inline"
};
function getInfoFor(node3, i18nData) {
  if (node3.type === "document") {
    return null;
  }
  const isInteractive = templatedInteractiveActions.some((attr) => typeof node3[attr] !== "undefined" && node3[attr] !== null);
  const isTemplateStyled = templatedStyledAttributes.some((attr) => typeof node3[attr] !== "undefined" && node3[attr] !== null);
  const isBasicStyled = !!node3.style || node3.richClassList && node3.richClassList.length;
  const isBasicTemplated = templatedAttributes.some((attr) => typeof node3[attr] !== "undefined" && node3[attr] !== null);
  const isTemplate = isInteractive || isTemplateStyled || isBasicTemplated;
  const foundCustomName = !node3.givenName && node3.uiHandler ? i18nData.richUIHandlerElement[node3.uiHandler.replace(/-/g, "_")] : null;
  let nameLabel = node3.givenName ? node3.givenName : foundCustomName || (node3.type ? i18nData[specialTypes[node3.type] ? specialTypes[node3.type] : node3.type.replace(/-/g, "_")] || node3.type : i18nData.text);
  if (!node3.givenName && !foundCustomName) {
    if (isBasicStyled || isTemplateStyled) {
      nameLabel = localeReplacer(i18nData.styled, nameLabel);
    }
    if (isInteractive) {
      nameLabel = localeReplacer(i18nData.interactive, nameLabel);
    }
    if (isTemplate) {
      nameLabel = localeReplacer(i18nData.template, nameLabel);
    }
  }
  return {
    isTemplate,
    isInteractive,
    name: nameLabel,
    isText: typeof node3.text === "string"
  };
}

// ../editor/slate/index.tsx
var defaultBaseI18nRichInfoEnglish = {
  actions: "actions",
  alt: "alt",
  classes: "classes",
  container: "container",
  context: "context",
  custom: "custom",
  each: "loop for each",
  file: "file",
  image: "image",
  inline: "inline",
  interactive: "interactive {0}",
  link: "link",
  list: "list",
  listItem: "list item",
  name: "name",
  paragraph: "paragraph",
  quote: "quote",
  renderCondition: "render condition",
  richClasses: {},
  richContainers: {},
  richCustoms: {},
  richTables: {},
  richUIHandlerElement: {},
  settings: "settings",
  sizes: "sizes",
  standalone: "standalone",
  style: "style",
  styleActive: "style active",
  styleHover: "style hover",
  styled: "styled {0}",
  styles: "styles",
  table: "table",
  tbody: "table body",
  td: "table column",
  template: "template {0}",
  templating: "templating",
  text: "text",
  tfoot: "table footer",
  th: "table column",
  thead: "table head",
  title: "title",
  tr: "table row",
  type: "type",
  uiHandler: "ui handler",
  video: "video"
};
var ElementWrapperDisabler = import_react3.default.createContext(false);
function findLastIndex(arr, fn) {
  let currentIndex = arr.length;
  while (currentIndex--) {
    if (fn(arr[currentIndex])) {
      return currentIndex;
    }
  }
  return -1;
}
var EDITOR_POOL = /* @__PURE__ */ new Map();
function onAnyTab(ev) {
  setTimeout(() => {
    const editorElement = EDITOR_POOL.get(document.activeElement);
    EDITOR_POOL.forEach((e2) => e2 !== editorElement && e2.selectiveHardBlurIfHasSelectedElement(ev, document.activeElement instanceof HTMLElement ? document.activeElement : null));
    if (editorElement) {
      editorElement.forceFocus();
    }
  }, 70);
}
if (typeof document !== "undefined") {
  document.addEventListener("keydown", (e2) => {
    if (e2.key === "Tab") {
      onAnyTab(e2);
    }
  });
}
var ALL_CONTAINERS = [];
var ALL_TABLES = [];
var ALL_CUSTOM = [];
var ALL_RICH_CLASSES = [];
var ALL_IS_LOADED = false;
function calculateStylesheet(stylesheet) {
  Array.from(stylesheet.cssRules).forEach((r2) => {
    if (r2 instanceof CSSMediaRule || r2.cssRules) {
      calculateStylesheet(r2);
      return;
    }
    const selectorSplitted = (r2.selectorText || r2.cssText.split("{")[0].trim()).split(" ");
    selectorSplitted.forEach((sbase) => {
      let internalSelectorSplitted = sbase.split(".");
      internalSelectorSplitted.shift();
      internalSelectorSplitted.forEach((s) => {
        let className = s;
        if (className.includes(":")) {
          className = className.split(":")[0];
        }
        if (className.endsWith(",")) {
          className = className.substr(0, className.length - 1);
        }
        if (className.startsWith(CONTAINER_CLASS_PREFIX)) {
          const toPush = className.substr(CONTAINER_CLASS_PREFIX.length);
          if (!ALL_CONTAINERS.includes(toPush)) {
            ALL_CONTAINERS.push(toPush);
          }
        } else if (className.startsWith(TABLE_CLASS_PREFIX)) {
          const toPush = className.substr(TABLE_CLASS_PREFIX.length);
          if (!ALL_TABLES.includes(toPush)) {
            ALL_TABLES.push(toPush);
          }
        } else if (className.startsWith(CUSTOM_CLASS_PREFIX)) {
          const toPush = className.substr(CUSTOM_CLASS_PREFIX.length);
          if (!ALL_CUSTOM.includes(toPush)) {
            ALL_CUSTOM.push(toPush);
          }
        } else if (className.startsWith(RICH_TEXT_CLASS_PREFIX)) {
          const toPush = className.substr(RICH_TEXT_CLASS_PREFIX.length);
          if (!ALL_RICH_CLASSES.includes(toPush)) {
            ALL_RICH_CLASSES.push(toPush);
          }
        }
      });
    });
  });
}
var ALL_PROMISE = new Promise(async (resolve) => {
  if (ALL_IS_LOADED) {
    resolve();
    return;
  }
  if (typeof document !== "undefined") {
    const stylesheetHrefPrefix = location.protocol + "//" + location.host + "/rest/resource/build";
    const foundPreloadedStylesheet = document.styleSheets && Array.from(document.styleSheets).find((s) => s.href && s.href.startsWith(stylesheetHrefPrefix));
    if (foundPreloadedStylesheet) {
      ALL_IS_LOADED = true;
      calculateStylesheet(foundPreloadedStylesheet);
      resolve();
    } else {
      const allLinks = document.head.querySelectorAll("link");
      const foundStylesheetNode = Array.from(allLinks).find((s) => s.href.startsWith(stylesheetHrefPrefix));
      if (!foundStylesheetNode) {
        ALL_IS_LOADED = true;
        resolve();
      } else {
        foundStylesheetNode.addEventListener("load", () => {
          const foundLoadedStyleSheet = document.styleSheets && Array.from(document.styleSheets).find((s) => s.href && s.href.startsWith(stylesheetHrefPrefix));
          ALL_IS_LOADED = true;
          if (foundLoadedStyleSheet) {
            calculateStylesheet(foundLoadedStyleSheet);
          }
          resolve();
        });
      }
    }
  }
});
var falseFn = () => false;
var SlateEditor = class extends import_react3.default.Component {
  /**
   * Constructs a new instance of the slate editor component
   * @param props the props
   */
  constructor(props) {
    super(props);
    this.isInNormalization = false;
    this.preventNormalize = false;
    /**
     * When a call to delete the current selected node is done, the selection anchors as they have been set
     * need to be removed and reset because otherwise they will be pointing to invalid nodes, this internal
     * flag allows to keep track of that so.
     * 
     * 1. the delete function gets called, the flag gets set to true
     * 2. slate is internally asked to delete at the selected and given path
     * 3. this triggers the change function which will try to recalculate anchors, but the old anchors are invalid
     * 4. because of the flag the change function knows the last change was a selected delete and tells the anchor
     * recalculation not to reuse old anchors
     */
    this.lastChangeWasSelectedDelete = false;
    this.editableRef = import_react3.default.createRef();
    this.wrapperRef = import_react3.default.createRef();
    this.state = {
      // setting up the internal value from the property
      // first we pick the internal value if available
      // or otherwise we parse one
      treeValue: props.treeValue || (props.isRichText ? deserialize(props.value, null, {
        useContextRulesOf: props.rootContext
      }) : deserializePlain(props.value)),
      // we are synced
      synced: true,
      // focused
      focused: false,
      // set up the anchors
      currentText: null,
      currentInlineElement: null,
      currentBlockElement: null,
      currentSuperBlockElements: null,
      currentTextAnchor: null,
      currentInlineElementAnchor: null,
      currentBlockElementAnchor: null,
      currentSuperBlockElementAnchors: null,
      currentSelectedText: null,
      currentSelectedInlineElement: null,
      currentSelectedBlockElement: null,
      currentSelectedSuperBlockElements: null,
      currentSelectedTextAnchor: null,
      currentSelectedInlineElementAnchor: null,
      currentSelectedBlockElementAnchor: null,
      currentSelectedSuperBlockElementAnchors: null,
      currentSelectedElement: null,
      currentSelectedElementAnchor: null,
      previousSelectedElementAnchor: null,
      previousTextAnchor: null,
      isRichText: props.isRichText,
      currentRootContext: props.rootContext || null,
      currentSelectedBlockContext: null,
      currentSelectedInlineContext: null,
      currentSelectedTopmostSuperBlockContext: null,
      currentSelectedElementContext: null,
      currentValid: props.currentValid,
      // ensure SSR compatibility
      // since we cannot read the CSS file on the server side
      // as we have no access to stylesheets
      allContainers: [],
      allCustom: [],
      allRichClasses: [],
      allTables: [],
      allowsInsertElement: falseFn,
      allowsText: false,
      inlineIsVoid: false,
      blockIsVoid: false,
      topmostSuperblockIsVoid: false,
      superBlockUIHandler: null,
      blockUIHandler: null,
      inlineUIHandler: null
    };
    this.isUnmounted = false;
    const rawEditor = createEditor();
    this.editor = withReact(withHistory(rawEditor));
    this.forceFocus = this.forceFocus.bind(this);
    this.forceBlur = this.forceBlur.bind(this);
    this.normalizeNode = this.normalizeNode.bind(this);
    this.insertBreak = this.insertBreak.bind(this);
    this.insertSuperbreak = this.insertSuperbreak.bind(this);
    this.deleteBackward = this.deleteBackward.bind(this);
    this.deleteForward = this.deleteForward.bind(this);
    this.setFragmentData = this.setFragmentData.bind(this);
    this.findAndAppendFilesToDataTransfer = this.findAndAppendFilesToDataTransfer.bind(this);
    this.insertData = this.insertData.bind(this);
    this.findAndInsertFilesFromDataTransfer = this.findAndInsertFilesFromDataTransfer.bind(this);
    this.isVoid = this.isVoid.bind(this);
    this.getContextFor = this.getContextFor.bind(this);
    this.getRootContext = this.getRootContext.bind(this);
    this.originalSetFragmentData = this.editor.setFragmentData;
    this.originalInsertData = this.editor.insertData;
    this.editor.isInline = this.isInline;
    this.editor.isVoid = this.isVoid;
    this.editor.normalizeNode = this.normalizeNode;
    this.editor.insertBreak = this.insertBreak;
    this.editor.deleteBackward = this.deleteBackward;
    this.editor.deleteForward = this.deleteForward;
    this.editor.setFragmentData = this.setFragmentData;
    this.editor.insertData = this.insertData;
    this.getPreviousSelectedElementAnchor = this.getPreviousSelectedElementAnchor.bind(this);
    this.getPreviousTextAnchor = this.getPreviousTextAnchor.bind(this);
    this.deleteSelectedNode = this.deleteSelectedNode.bind(this);
    this.deletePath = this.deletePath.bind(this);
    this.setValue = this.setValue.bind(this);
    this.renderElement = this.renderElement.bind(this);
    this.actuallyRenderElement = this.actuallyRenderElement.bind(this);
    this.onChange = this.onChange.bind(this);
    this.renderText = this.renderText.bind(this);
    this.onFocusedChange = this.onFocusedChange.bind(this);
    this.onBlurredChange = this.onBlurredChange.bind(this);
    this.onKeyDown = this.onKeyDown.bind(this);
    this.deleteTableColumn = this.deleteTableColumn.bind(this);
    this.deleteTableRow = this.deleteTableRow.bind(this);
    this.selectPath = this.selectPath.bind(this);
    this.movePaths = this.movePaths.bind(this);
    this.focus = this.focus.bind(this);
    this.insertImage = this.insertImage.bind(this);
    this.insertVideo = this.insertVideo.bind(this);
    this.updateVideo = this.updateVideo.bind(this);
    this.insertFile = this.insertFile.bind(this);
    this.insertTemplateText = this.insertTemplateText.bind(this);
    this.updateTemplateText = this.updateTemplateText.bind(this);
    this.insertTemplateHTML = this.insertTemplateHTML.bind(this);
    this.updateTemplateHTML = this.updateTemplateHTML.bind(this);
    this.insertTable = this.insertTable.bind(this);
    this.insertTableColumn = this.insertTableColumn.bind(this);
    this.insertTableRow = this.insertTableRow.bind(this);
    this.toggleTable = this.toggleTable.bind(this);
    this.canToggleTable = this.canToggleTable.bind(this);
    this.insertContainer = this.insertContainer.bind(this);
    this.insertCustom = this.insertCustom.bind(this);
    this.toggleQuote = this.toggleQuote.bind(this);
    this.toggleTitle = this.toggleTitle.bind(this);
    this.insertList = this.insertList.bind(this);
    this.toggleLink = this.toggleLink.bind(this);
    this.updateLink = this.updateLink.bind(this);
    this.setStyle = this.setStyle.bind(this);
    this.set = this.set.bind(this);
    this.setHoverStyle = this.setHoverStyle.bind(this);
    this.setActiveStyle = this.setActiveStyle.bind(this);
    this.setRichClasses = this.setRichClasses.bind(this);
    this.setContext = this.setContext.bind(this);
    this.setIfCondition = this.setIfCondition.bind(this);
    this.setForEach = this.setForEach.bind(this);
    this.formatToggle = this.formatToggle.bind(this);
    this.setAction = this.setAction.bind(this);
    this.insertElement = this.insertElement.bind(this);
    this.getState = this.getState.bind(this);
    this.setUIHandler = this.setUIHandler.bind(this);
    this.setUIHandlerArg = this.setUIHandlerArg.bind(this);
    this.availableFilteringFunction = this.availableFilteringFunction.bind(this);
    this.calculateAnchors = this.calculateAnchors.bind(this);
    this.updateNodeAt = this.updateNodeAt.bind(this);
    this.insertNodeAt = this.insertNodeAt.bind(this);
    this.deleteNodeAt = this.deleteNodeAt.bind(this);
    this.mergeNodesAt = this.mergeNodesAt.bind(this);
    this.splitElementAndEscapeChildIntoParentAt = this.splitElementAndEscapeChildIntoParentAt.bind(this);
    this.wrapNodeAt = this.wrapNodeAt.bind(this);
    this.getNodeAt = this.getNodeAt.bind(this);
    this.cloneElementAt = this.cloneElementAt.bind(this);
    this.moveNodeAt = this.moveNodeAt.bind(this);
    this.hardBlur = this.hardBlur.bind(this);
    this.selectiveHardBlurIfHasSelectedElement = this.selectiveHardBlurIfHasSelectedElement.bind(this);
    this.softBlur = this.softBlur.bind(this);
  }
  /**
   * The standard derived state function is used in order to set the state in an effective way
   * it is used because the behaviour of this editor is rather complex
   * @param props the current props
   * @param state the current state
   * @returns a partial of the new state or null
   */
  static getDerivedStateFromProps(props, state) {
    if (state.synced) {
      if (props.treeValue) {
        if (!state.treeValue || props.treeValue.id !== state.treeValue.id) {
          return {
            treeValue: props.treeValue,
            isRichText: props.isRichText,
            currentRootContext: props.rootContext || null,
            currentValid: props.currentValid,
            currentText: null,
            currentInlineElement: null,
            currentBlockElement: null,
            currentSuperBlockElements: null,
            currentTextAnchor: null,
            currentInlineElementAnchor: null,
            currentBlockElementAnchor: null,
            currentSuperBlockElementAnchors: null,
            currentSelectedText: null,
            currentSelectedInlineElement: null,
            currentSelectedBlockElement: null,
            currentSelectedSuperBlockElements: null,
            currentSelectedTextAnchor: null,
            currentSelectedInlineElementAnchor: null,
            currentSelectedBlockElementAnchor: null,
            currentSelectedSuperBlockElementAnchors: null,
            currentSelectedBlockContext: null,
            currentSelectedInlineContext: null,
            currentSelectedTopmostSuperBlockContext: null,
            currentSelectedElement: null,
            currentSelectedElementAnchor: null,
            currentSelectedElementContext: null,
            previousSelectedElementAnchor: null,
            previousTextAnchor: null,
            allowsInsertElement: falseFn,
            allowsText: false,
            inlineIsVoid: false,
            blockIsVoid: false,
            topmostSuperblockIsVoid: false,
            superBlockUIHandler: null,
            blockUIHandler: null,
            inlineUIHandler: null
          };
        }
      } else {
        const newtreeValue = props.isRichText ? deserialize(props.value, state.treeValue, {
          useContextRulesOf: state.currentRootContext
        }) : deserializePlain(props.value, state.treeValue);
        if (!state.treeValue || newtreeValue.id !== state.treeValue.id) {
          return {
            treeValue: newtreeValue,
            isRichText: props.isRichText,
            currentRootContext: props.rootContext || null,
            currentValid: props.currentValid,
            currentText: null,
            currentInlineElement: null,
            currentBlockElement: null,
            currentSuperBlockElements: null,
            currentTextAnchor: null,
            currentInlineElementAnchor: null,
            currentBlockElementAnchor: null,
            currentSuperBlockElementAnchors: null,
            currentSelectedText: null,
            currentSelectedInlineElement: null,
            currentSelectedBlockElement: null,
            currentSelectedSuperBlockElements: null,
            currentSelectedTextAnchor: null,
            currentSelectedInlineElementAnchor: null,
            currentSelectedBlockElementAnchor: null,
            currentSelectedSuperBlockElementAnchors: null,
            currentSelectedElement: null,
            currentSelectedElementAnchor: null,
            previousSelectedElementAnchor: null,
            previousTextAnchor: null,
            allowsInsertElement: falseFn,
            allowsText: false,
            inlineIsVoid: false,
            blockIsVoid: false,
            topmostSuperblockIsVoid: false,
            superBlockUIHandler: null,
            blockUIHandler: null,
            inlineUIHandler: null
          };
        }
      }
    }
    return null;
  }
  /**
   * This function runs and prepares the tree that is to be inserted into the
   * pasted content
   * @param data the data transfer of the clipboard
   * @param blobs an object that contains the blob transfer object
   * @param element the element we are currently processing
   */
  async findAndInsertFilesFromDataTransfer(data, element) {
    let newElement = element;
    let wasOverwritten = false;
    if (newElement.type === "image" || newElement.type === "file") {
      const idSpecified = newElement.srcId;
      const urlToReadFrom = newElement.src;
      const existantFile = newElement.type === "image" ? this.props.onRetrieveImage(idSpecified) : this.props.onRetrieveFile(idSpecified);
      if (existantFile) {
        if (newElement.type === "image") {
          const newImageNode = __spreadProps(__spreadValues({}, newElement), {
            type: "image",
            children: [
              {
                bold: false,
                italic: false,
                text: "",
                underline: false
              }
            ],
            src: existantFile.file.url,
            srcSet: existantFile.srcset,
            sizes: "70vw"
          });
          newElement = newImageNode;
          wasOverwritten = true;
        } else {
          const newFileNode = __spreadProps(__spreadValues({}, newElement), {
            type: "file",
            children: [
              {
                bold: false,
                italic: false,
                text: "",
                underline: false
              }
            ],
            src: existantFile.url
          });
          newElement = newFileNode;
          wasOverwritten = true;
        }
      } else {
        const infoFromInsert = await this.props.onInsertFileFromURL(
          urlToReadFrom,
          newElement.fileName || newElement.alt || idSpecified,
          newElement.type === "image"
        );
        if (infoFromInsert) {
          if (newElement.type === "image") {
            const imageNode = __spreadProps(__spreadValues({}, newElement), {
              type: "image",
              children: [
                {
                  bold: false,
                  italic: false,
                  text: "",
                  underline: false
                }
              ],
              height: infoFromInsert.height,
              width: infoFromInsert.width,
              src: infoFromInsert.result.url,
              srcId: infoFromInsert.result.id,
              srcSet: null
            });
            newElement = imageNode;
            wasOverwritten = true;
          } else {
            const fileNode = __spreadProps(__spreadValues({}, newElement), {
              type: "file",
              children: [
                {
                  bold: false,
                  italic: false,
                  text: "",
                  underline: false
                }
              ],
              size: prettyBytes(infoFromInsert.result.size),
              src: infoFromInsert.result.url,
              srcId: infoFromInsert.result.id
            });
            newElement = fileNode;
            wasOverwritten = true;
          }
        } else {
          newElement = null;
          wasOverwritten = true;
        }
      }
    }
    if (newElement && newElement.children && !wasOverwritten) {
      newElement = __spreadValues({}, newElement);
      newElement.children = (await Promise.all(newElement.children.map(this.findAndInsertFilesFromDataTransfer.bind(this, data)))).filter((e2) => !!e2);
    }
    return newElement;
  }
  /**
   * This function runs when we are inserting using the slate clipboard
   * @param data the data transfer
   */
  async insertData(data) {
    const fragment2 = data.getData("application/x-slate-fragment");
    if (fragment2) {
      console.warn("The editor used the fallback clipboard mechanism rather than the new clipboard, files may fail to load");
      const decoded = decodeURIComponent(window.atob(fragment2));
      const parsed = (await Promise.all(JSON.parse(decoded).map(this.findAndInsertFilesFromDataTransfer.bind(this, data)))).filter((e2) => !!e2);
      if (!parsed || !parsed.length) {
        console.warn("Failed to find children to add");
        return;
      }
      const shouldUseInsertFragment = !isSuperBlock(parsed[0]);
      if (shouldUseInsertFragment) {
        Transforms.insertFragment(this.editor, parsed);
      } else if (this.state.currentBlockElementAnchor) {
        Transforms.insertNodes(this.editor, parsed);
      }
      return;
    }
    if (data.files.length) {
      Array.from(data.files).forEach((f) => {
        if (this.props.supportedImageTypes.includes(f.type)) {
          this.insertImage(f, false);
        } else {
          this.insertFile(f);
        }
      });
      return;
    }
    const htmlData = data.getData("text/html");
    if (htmlData) {
      const deserialized = deserialize(htmlData, null, {
        dontNormalize: true
      });
      const parsed = (await Promise.all(deserialized.children.map(this.findAndInsertFilesFromDataTransfer.bind(this, data)))).filter((e2) => !!e2);
      if (!parsed || !parsed.length) {
        console.warn("Failed to find children to add");
        return;
      }
      const shouldUseInsertFragment = !isSuperBlock(parsed[0]);
      if (shouldUseInsertFragment) {
        Transforms.insertFragment(this.editor, parsed);
      } else if (this.state.currentBlockElementAnchor) {
        Transforms.insertNodes(this.editor, parsed);
      }
      return;
    } else {
      this.originalInsertData(data);
      return;
    }
  }
  getDataURI(blob) {
    const reader = new FileReader();
    reader.readAsDataURL(blob);
    return new Promise((resolve, reject) => {
      reader.addEventListener(
        "load",
        () => {
          resolve(reader.result);
        },
        false
      );
      reader.addEventListener("error", () => {
        reject();
      });
    });
  }
  /**
   * Runs per each rich element that has just been copied to the clipboard
   * @param data the data transfer
   * @param element the rich element we have just copied
   */
  async findAndAppendFilesToDataTransfer(data, element) {
    if (element.type === "image" || element.type === "file") {
      const urlToReadFrom = element.src;
      try {
        const blob = await (await fetch(urlToReadFrom)).blob();
        const dataURI = await this.getDataURI(blob);
        element.src = dataURI;
        delete element.srcSet;
      } catch (err) {
      }
    }
    if (element.children) {
      await Promise.all(element.children.map(this.findAndAppendFilesToDataTransfer.bind(this, data)));
    }
  }
  /**
   * This function runs when we are preparing the slate clipboard
   * @param data the data transfer
   */
  async setFragmentData(data) {
    this.originalSetFragmentData(data);
    const fragment64 = data.getData("application/x-slate-fragment");
    if (fragment64 && navigator.clipboard) {
      const copyDataTree = JSON.parse(decodeURIComponent(atob(fragment64)));
      await Promise.all(copyDataTree.map(this.findAndAppendFilesToDataTransfer.bind(this, data)));
      const document2 = {
        children: copyDataTree,
        id: "COPY_ELEMENT",
        rich: true,
        type: "document"
      };
      const html = serialize(document2);
      const htmlStr = html.map((n3) => n3.outerHTML).join("");
      const text = serializeString(document2);
      const textPlain = new Blob([text], { type: "text/plain" });
      const htmlBody = new Blob([htmlStr], { type: "text/html" });
      const item = new ClipboardItem({
        "text/plain": textPlain,
        "text/html": htmlBody
      });
      await navigator.clipboard.write([item]);
    }
  }
  updateNodeAt(path3, v) {
    Transforms.setNodes(this.editor, v, {
      at: path3
    });
  }
  deleteNodeAt(path3) {
    Transforms.delete(this.editor, {
      at: path3
    });
  }
  insertNodeAt(path3, node3, targetIndex) {
    Transforms.insertNodes(this.editor, node3, {
      at: [...path3, targetIndex]
    });
  }
  mergeNodesAt(basePath, referencePath) {
    const parentPath = [...basePath];
    parentPath.pop();
    Transforms.mergeNodes(this.editor, {
      at: referencePath,
      voids: true
    });
  }
  splitElementAndEscapeChildIntoParentAt(path3, escapingChildIndex) {
    Transforms.liftNodes(this.editor, {
      at: [...path3, escapingChildIndex]
    });
  }
  wrapNodeAt(path3, wrappers) {
    wrappers.forEach((wrapper) => {
      Transforms.wrapNodes(this.editor, wrapper, {
        at: path3
      });
    });
  }
  getNodeAt(path3) {
    return Node.get(this.editor, path3);
  }
  cloneElementAt(fromPath, toPath) {
    const toCopyNode = this.getNodeAt(fromPath);
    const copy = __spreadValues({}, toCopyNode);
    copy.children = [];
    Transforms.insertNodes(this.editor, copy, {
      at: toPath
    });
  }
  moveNodeAt(fromPath, toPath) {
    Transforms.moveNodes(this.editor, {
      at: fromPath,
      to: toPath
    });
  }
  /**
   * Normalization funciton that overrides the normalization
   * of the standard editor
   * @param entry the entry we are normalizing
   */
  normalizeNode(entry) {
    if (this.isInNormalization || this.preventNormalize) {
      return;
    }
    const [node3, path3] = entry;
    if (Editor.isEditor(node3)) {
      this.isInNormalization = true;
      if (node3.children.length === 0) {
        Transforms.insertNodes(
          this.editor,
          { type: "paragraph", children: [STANDARD_TEXT_NODE()] },
          { at: path3.concat(0) }
        );
      } else {
        const pseudoDocument = {
          type: "document",
          children: node3.children,
          id: this.state.treeValue.id,
          rich: this.state.treeValue.rich
        };
        const nodeAtSelection = this.editor.selection ? this.getNodeAt(this.editor.selection.anchor.path) : null;
        const nodeIgnore = [];
        if (Text.isText(nodeAtSelection) && nodeAtSelection.text === "") {
          nodeIgnore.push(this.editor.selection.anchor.path);
        }
        try {
          normalizeElement(
            pseudoDocument,
            [],
            pseudoDocument,
            {
              workOnOriginal: false,
              updateNodeAt: this.updateNodeAt,
              deleteNodeAt: this.deleteNodeAt,
              insertNodeAt: this.insertNodeAt,
              mergeNodesAt: this.mergeNodesAt,
              splitElementAndEscapeChildIntoParentAt: this.splitElementAndEscapeChildIntoParentAt,
              wrapNodeAt: this.wrapNodeAt,
              getNodeAt: this.getNodeAt,
              cloneElementAt: this.cloneElementAt,
              moveNodeAt: this.moveNodeAt
            },
            {
              ignoreNodesAt: nodeIgnore,
              useContextRulesOf: this.state.currentRootContext
            }
          );
        } catch (err) {
          console.error(err.stack);
        }
      }
      this.isInNormalization = false;
    }
  }
  /**
   * Override for the default editor inline function
   * @param element the element that is to be considered
   * @returns a boolean on whether it represents an inline element
   */
  isInline(element) {
    return isInline(element);
  }
  /**
   * Override for the default editor void function
   * @param element the element that is to be considered
   * @returns a boolean on whether it represents a void element
   */
  isVoid(element) {
    return isVoid(element);
  }
  /**
   * Override for the default editor insert break function
   */
  insertBreak() {
    const currentSuperBlockElement = this.state.currentSuperBlockElements && this.state.currentSuperBlockElements[this.state.currentSuperBlockElements.length - 1];
    const isListItemBreak = currentSuperBlockElement && // and we are within a list and a list item
    currentSuperBlockElement.type === "list-item";
    if (
      // if we are simply collapsed
      Range.isCollapsed(this.editor.selection) && // and we have a list item
      isListItemBreak && // and that first children is an empty paragraph
      // there may be a second list
      currentSuperBlockElement.children[0].type === "paragraph" && // with one empty text node
      currentSuperBlockElement.children[0].children.length === 1 && Text.isText(currentSuperBlockElement.children[0].children[0]) && currentSuperBlockElement.children[0].children[0].text === ""
    ) {
      this.breakList();
      return;
    }
    if (!this.state.currentBlockElement) {
      Transforms.splitNodes(this.editor, { always: true });
      return;
    }
    if (this.editor.isVoid(this.state.currentBlockElement)) {
      Transforms.insertNodes(this.editor, {
        type: "paragraph",
        children: [
          __spreadProps(__spreadValues({}, this.state.currentText), {
            text: ""
          })
        ]
      });
      return;
    }
    const end2 = Range.end(this.editor.selection);
    const finalBlockPath = [...this.state.currentBlockElementAnchor];
    let lastChild = this.state.currentBlockElement;
    if (lastChild && Element2.isElement(lastChild)) {
      do {
        const lastPoint = lastChild.children.length - 1;
        lastChild = lastChild.children[lastPoint];
        finalBlockPath.push(lastPoint);
      } while (Element2.isElement(lastChild));
    }
    const finalBlockOffset = lastChild ? lastChild.text.length : null;
    const isEndOfLine = end2.offset === finalBlockOffset && Path.equals(finalBlockPath, end2.path);
    if (isListItemBreak) {
      Transforms.splitNodes(this.editor, { always: true, match: (n3) => n3.type === "list-item" });
    } else {
      Transforms.splitNodes(this.editor, { always: true });
    }
    if (isEndOfLine) {
      Transforms.setNodes(this.editor, {
        uiHandler: null,
        html: null,
        uiHandlerArgs: null,
        textContent: null
      }, {
        match: (n3) => {
          return isBlock(n3);
        },
        mode: "lowest",
        at: this.editor.selection.anchor.path
      });
    }
  }
  /**
   * Override function to perform a forward delete
   * backwards event
   * @param unit the unit we are dealing with
   */
  deleteForward(unit) {
    const { selection } = this.editor;
    if (selection && Range.isCollapsed(selection)) {
      if (this.state.currentBlockElement && this.state.currentBlockElement.children.length === 1 && Text.isText(this.state.currentBlockElement.children[0]) && this.state.currentBlockElement.children[0].text === "") {
        Transforms.delete(this.editor, { at: this.state.currentBlockElementAnchor });
      } else {
        Transforms.delete(this.editor, { unit });
      }
    }
  }
  /**
   * Override function to perform a standard delete
   * backwards event
   * @param unit the unit we are dealing with
   */
  deleteBackward(unit) {
    const { selection } = this.editor;
    const currentSuperBlockElement = this.state.currentSuperBlockElements && this.state.currentSuperBlockElements[this.state.currentSuperBlockElements.length - 1];
    if (selection && // and it's collapsed
    Range.isCollapsed(selection) && currentSuperBlockElement && currentSuperBlockElement.type === "list-item" && // and we are deleting a character of a word
    ((unit === "character" || unit === "word") && // and we are at the start of the block
    selection.anchor.offset === 0 || // or we are removing a line or block
    (unit === "line" || unit == "block"))) {
      this.breakList();
    } else if (selection && Range.isCollapsed(selection)) {
      Transforms.delete(this.editor, { unit, reverse: true });
    }
  }
  /**
   * Breaks the list based on the current selection
   * we must be in a list currently, this function is called
   * by the delete backwards functionality as well as the toggle
   * list one
   */
  breakList() {
    this.preventNormalize = true;
    Transforms.unwrapNodes(
      this.editor,
      {
        match: (n3) => {
          return n3.type === "list";
        },
        mode: "lowest",
        split: true
      }
    );
    this.preventNormalize = false;
    Transforms.unwrapNodes(
      this.editor,
      {
        match: (n3) => {
          return n3.type === "list-item";
        },
        mode: "lowest",
        split: true
      }
    );
  }
  /**
   * Inserts a superblock break, since you might not be able to escape
   * superblocks, eg. such as a single container, you will use a superblock break
   * alt+enter in order to escape the superblock
   * 
   * @param at the path of the superblock to insert a break at
   * @param reverse whether to insert it before or after, by default it will be after, use this flag for before
   */
  insertSuperbreak(at, reverse) {
    let currentElementToBreakFromAnchor = at || this.state.currentBlockElement && isVoid(this.state.currentBlockElement) && this.state.currentBlockElementAnchor || this.state.currentSuperBlockElements && this.state.currentSuperBlockElementAnchors[this.state.currentSuperBlockElementAnchors.length - 1];
    if (!currentElementToBreakFromAnchor) {
      return;
    }
    let currentElementToBreakFrom = Node.get(this.editor, currentElementToBreakFromAnchor);
    currentElementToBreakFromAnchor = [...currentElementToBreakFromAnchor];
    let parentSuperBlockElementAnchor = [...currentElementToBreakFromAnchor];
    parentSuperBlockElementAnchor.pop();
    let parentSuperBlockElement = null;
    while (true) {
      parentSuperBlockElement = Node.get(this.editor, parentSuperBlockElementAnchor);
      const allowsChildren = SERIALIZATION_REGISTRY.ALLOWS_CHILDREN[parentSuperBlockElement.type];
      const canParentHaveParagraphAsChildren = !allowsChildren || allowsChildren.includes("paragraph");
      const isASoloEscapableType = currentElementToBreakFrom.type === "list";
      if (
        // list and list items can be escaped by
        // standard entering so we don't allow that as a break point
        !isASoloEscapableType && canParentHaveParagraphAsChildren || !parentSuperBlockElementAnchor.length
      ) {
        break;
      }
      parentSuperBlockElementAnchor.pop();
      currentElementToBreakFromAnchor.pop();
      currentElementToBreakFrom = Node.get(this.editor, currentElementToBreakFromAnchor);
    }
    ;
    if (currentElementToBreakFrom.type === "list") {
      return;
    }
    const nextAnchor = currentElementToBreakFromAnchor;
    if (!reverse) {
      nextAnchor[nextAnchor.length - 1]++;
    }
    Transforms.insertNodes(this.editor, {
      type: "paragraph",
      children: [
        {
          text: ""
        }
      ]
    }, { at: nextAnchor });
    const nextAnchorText = nextAnchor.concat([0]);
    this.focusAt({
      anchor: {
        offset: 0,
        path: nextAnchorText
      },
      focus: {
        offset: 0,
        path: nextAnchorText
      }
    });
  }
  /**
   * Calculates the anchors and the context based on a given value
   * (or the current value of the editor) and the selection nodes
   * that are currently selected (or it will override with the defaults)
   * @param anchor the anchor that is currently deemed to be selected at
   * @param value the value that we are working with, if not provided it will take it from the state
   * @param currentGivenSelectedNodeAnchor the selected node anchor, and text anchor if not provided
   * it will use the default values based on the logic of the calculated anchors
   */
  calculateAnchors(anchor, value, currentGivenSelectedNodeAnchor) {
    let currentInlineElement = null;
    let currentInlineElementAnchor = null;
    let currentBlockElement = null;
    let currentBlockElementAnchor = null;
    let currentSuperBlockElements = null;
    let currentSuperBlockElementAnchors = null;
    let currentText = null;
    let currentTextAnchor = null;
    let previousSelectedElementAnchor = this.state.currentSelectedElementAnchor;
    let previousTextAnchor = this.state.currentTextAnchor;
    if (anchor) {
      let currentLoopingElement = value ? {
        children: value
      } : this.state.treeValue;
      const loopingAnchor = [];
      anchor.forEach((n3, index) => {
        loopingAnchor.push(n3);
        currentLoopingElement = currentLoopingElement && currentLoopingElement.children[n3];
        if (currentLoopingElement && SERIALIZATION_REGISTRY.INLINES[currentLoopingElement.type]) {
          currentInlineElement = currentLoopingElement;
          currentInlineElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.BLOCKS[currentLoopingElement.type]) {
          currentBlockElement = currentLoopingElement;
          currentBlockElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.SUPERBLOCKS[currentLoopingElement.type]) {
          if (!currentSuperBlockElements) {
            currentSuperBlockElements = [];
            currentSuperBlockElementAnchors = [];
          }
          currentSuperBlockElements.push(currentLoopingElement);
          currentSuperBlockElementAnchors.push([...loopingAnchor]);
        }
        if (currentLoopingElement && Text.isText(currentLoopingElement)) {
          currentText = currentLoopingElement;
          currentTextAnchor = [...loopingAnchor];
        }
      });
    }
    let currentSelectedInlineElementAnchor = null;
    let currentSelectedInlineElement = null;
    let currentSelectedBlockElement = null;
    let currentSelectedSuperBlockElements = null;
    let currentSelectedBlockElementAnchor = null;
    let currentSelectedSuperBlockElementAnchors = null;
    let currentSelectedText = null;
    let currentSelectedTextAnchor = null;
    let givenSelectedNodeAnchorIsCorrupted = false;
    if (currentGivenSelectedNodeAnchor) {
      let currentSelectedElementCorruptionTest = value ? {
        children: value
      } : this.state.treeValue;
      givenSelectedNodeAnchorIsCorrupted = currentGivenSelectedNodeAnchor.some((n3, index) => {
        if (!currentSelectedElementCorruptionTest || !currentSelectedElementCorruptionTest.children || !currentSelectedElementCorruptionTest.children[n3]) {
          return true;
        }
        currentSelectedElementCorruptionTest = currentSelectedElementCorruptionTest.children[n3];
      });
    }
    if (!currentGivenSelectedNodeAnchor || givenSelectedNodeAnchorIsCorrupted) {
      currentSelectedInlineElementAnchor = currentInlineElementAnchor;
      currentSelectedInlineElement = currentInlineElement;
      currentSelectedBlockElement = currentBlockElement;
      currentSelectedBlockElementAnchor = currentBlockElementAnchor;
      currentSelectedSuperBlockElements = currentSuperBlockElements;
      currentSelectedSuperBlockElementAnchors = currentSuperBlockElementAnchors;
      currentSelectedText = currentText;
      currentSelectedTextAnchor = currentTextAnchor;
    } else {
      const loopingAnchor = [];
      let currentLoopingElement = value ? {
        children: value
      } : this.state.treeValue;
      currentGivenSelectedNodeAnchor.forEach((n3, index) => {
        currentLoopingElement = currentLoopingElement && currentLoopingElement.children[n3];
        loopingAnchor.push(n3);
        if (currentLoopingElement && SERIALIZATION_REGISTRY.INLINES[currentLoopingElement.type]) {
          currentSelectedInlineElement = currentLoopingElement;
          currentSelectedInlineElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.BLOCKS[currentLoopingElement.type]) {
          currentSelectedBlockElement = currentLoopingElement;
          currentSelectedBlockElementAnchor = [...loopingAnchor];
        }
        if (currentLoopingElement && SERIALIZATION_REGISTRY.SUPERBLOCKS[currentLoopingElement.type]) {
          if (!currentSelectedSuperBlockElements) {
            currentSelectedSuperBlockElements = [];
            currentSelectedSuperBlockElementAnchors = [];
          }
          currentSelectedSuperBlockElements.push(currentLoopingElement);
          currentSelectedSuperBlockElementAnchors.push([...loopingAnchor]);
        }
        if (currentLoopingElement && Text.isText(currentLoopingElement)) {
          currentSelectedText = currentLoopingElement;
          currentSelectedTextAnchor = [...loopingAnchor];
        }
      });
    }
    const pseudoDocument = {
      type: "document",
      children: value,
      id: this.state.treeValue.id,
      rich: this.state.treeValue.rich
    };
    const currentSelectedTopmostSuperBlockContext = getContextFor(
      currentSelectedSuperBlockElementAnchors && currentSelectedSuperBlockElementAnchors[currentSelectedSuperBlockElementAnchors.length - 1],
      "final",
      pseudoDocument,
      this.state.currentRootContext
    );
    const currentSelectedBlockContext = getContextFor(
      currentSelectedBlockElementAnchor,
      "final",
      pseudoDocument,
      this.state.currentRootContext
    );
    const currentSelectedInlineContext = getContextFor(
      currentSelectedInlineElementAnchor,
      "final",
      pseudoDocument,
      this.state.currentRootContext
    );
    const baseSuperBlock = currentSelectedSuperBlockElements && currentSelectedSuperBlockElements[currentSelectedSuperBlockElements.length - 1] || pseudoDocument;
    const baseAllowedChildreOfSuperBlock = baseSuperBlock ? getAllowedChildrenTypes(baseSuperBlock) : [];
    const superBlockUIHandler = getUIHandlerValueWithKnownContextFor(
      baseSuperBlock,
      currentSelectedTopmostSuperBlockContext || this.state.currentRootContext,
      this.state.currentRootContext
    );
    const baseBlock = currentSelectedBlockElement;
    const baseAllowedChildrenOfBlock = baseBlock ? getAllowedChildrenTypes(baseBlock) : [];
    const blockUIHandler = getUIHandlerValueWithKnownContextFor(
      baseBlock,
      currentSelectedBlockContext,
      this.state.currentRootContext
    );
    const inlineUIHandler = getUIHandlerValueWithKnownContextFor(
      currentSelectedInlineElement,
      currentSelectedInlineContext,
      this.state.currentRootContext
    );
    const allowsInsertElement = (element, opts = {}) => {
      if (opts.collapsed || opts.extended || opts.selected) {
        if (opts.selected && !this.editor.selection) {
          return false;
        }
        const isCollapsed = this.editor.selection && Range.isCollapsed(this.editor.selection);
        if (!isCollapsed && opts.collapsed) {
          return false;
        } else if (isCollapsed && opts.extended) {
          return false;
        }
      }
      if (isSuperBlock(element) || isBlock(element)) {
        if (!baseAllowedChildreOfSuperBlock.includes(element.type)) {
          return false;
        }
        return superBlockUIHandler && superBlockUIHandler.allowsChildren ? superBlockUIHandler.allowsChildren(element, baseSuperBlock) : true;
      } else if (isInline(element)) {
        if (!baseAllowedChildrenOfBlock.includes(element.type)) {
          return false;
        }
        return blockUIHandler && blockUIHandler.allowsChildren ? blockUIHandler.allowsChildren(element, baseBlock) : true;
      } else {
        return false;
      }
    };
    const topmostSuperblock = currentSelectedSuperBlockElements && currentSelectedSuperBlockElements[currentSelectedSuperBlockElements.length - 1];
    const topmostSuperblockAnchor = currentSelectedSuperBlockElementAnchors && currentSelectedSuperBlockElementAnchors[currentSelectedSuperBlockElementAnchors.length - 1];
    const inlineIsVoid = currentSelectedInlineElement ? isVoid(currentSelectedInlineElement) : false;
    const blockIsVoid = currentSelectedBlockElement ? isVoid(currentSelectedBlockElement) : false;
    const topmostSuperblockIsVoid = topmostSuperblock ? isVoid(topmostSuperblock) : false;
    const voidElement = inlineIsVoid || blockIsVoid || topmostSuperblockIsVoid;
    const allowsText = !voidElement;
    const currentSelectedElement = currentSelectedInlineElement || currentSelectedBlockElement || topmostSuperblock || null;
    const currentSelectedElementAnchor = currentSelectedInlineElementAnchor || currentSelectedBlockElementAnchor || topmostSuperblockAnchor || null;
    return {
      currentTextAnchor,
      currentText,
      currentBlockElement,
      currentBlockElementAnchor,
      currentInlineElement,
      currentInlineElementAnchor,
      currentSuperBlockElements,
      currentSuperBlockElementAnchors,
      currentSelectedText,
      currentSelectedTextAnchor,
      currentSelectedBlockElement,
      currentSelectedBlockElementAnchor,
      currentSelectedInlineElement,
      currentSelectedInlineElementAnchor,
      currentSelectedSuperBlockElements,
      currentSelectedSuperBlockElementAnchors,
      currentSelectedElement,
      currentSelectedElementAnchor,
      currentSelectedTopmostSuperBlockContext,
      currentSelectedBlockContext,
      currentSelectedInlineContext,
      currentSelectedElementContext: currentSelectedInlineContext || currentSelectedBlockContext || currentSelectedTopmostSuperBlockContext,
      allowsInsertElement,
      allowsText,
      inlineIsVoid,
      blockIsVoid,
      topmostSuperblockIsVoid,
      superBlockUIHandler,
      blockUIHandler,
      inlineUIHandler,
      previousSelectedElementAnchor,
      previousTextAnchor
    };
  }
  /**
   * Triggers on change when the field is focused
   * and has changed
   * @param anchor the anchor that we are at
   * @param value the value that we got
   */
  onFocusedChange(anchor, value) {
    if (this.isUnmounted) {
      return;
    }
    this.setState(this.calculateAnchors(anchor, value));
    if (!this.state.focused) {
      this.props.onFocus && this.props.onFocus();
      this.setState({
        focused: true
      });
    }
  }
  /**
   * Triggers on an on change whent he field is blurred
   * @param value the value that we are working with
   */
  onBlurredChange(value) {
    if (this.isUnmounted) {
      return;
    }
    if (this.state.focused) {
      this.props.onBlur && this.props.onBlur();
    }
    const currentSelectedSuperBlockElementAnchor = this.state.currentSelectedSuperBlockElementAnchors && this.state.currentSelectedSuperBlockElementAnchors[this.state.currentSelectedSuperBlockElementAnchors.length - 1];
    const currentSelectedAnchor = this.state.currentSelectedTextAnchor || this.state.currentSelectedInlineElementAnchor || this.state.currentSelectedBlockElementAnchor || currentSelectedSuperBlockElementAnchor;
    const anchorData = this.calculateAnchors(
      // no anchor as it is not known
      null,
      // the value
      value,
      // and we pass the selected node anchor as it
      // remains even after the selection only if
      // we have not just deleted that node
      currentSelectedAnchor && !this.lastChangeWasSelectedDelete ? currentSelectedAnchor : null
    );
    this.setState(__spreadValues({
      focused: false
    }, anchorData));
  }
  /**
   * An optimization so that the component updates only when it's necessary
   * @param nextProps the next properties
   * @param nextState the next state
   */
  shouldComponentUpdate(nextProps, nextState) {
    const standardUpdate = nextProps.id !== this.props.id || nextProps.lang !== this.props.lang || nextProps.currentValid !== this.props.currentValid || nextState.focused !== this.state.focused || nextProps.Wrapper !== this.props.Wrapper || nextProps.isRichText !== this.props.isRichText || nextProps.rootContext !== this.props.rootContext || nextProps.baseI18n !== this.props.baseI18n || !(0, import_deep_equal2.default)(nextState.currentTextAnchor, this.state.currentTextAnchor, { strict: true }) || !(0, import_deep_equal2.default)(nextState.currentSelectedTextAnchor !== this.state.currentSelectedTextAnchor, { strict: true }) || nextState.currentRootContext !== this.state.currentRootContext || nextProps.currentLoadError !== this.props.currentLoadError || nextProps.elementWrappers !== this.props.elementWrappers || !(0, import_deep_equal2.default)(this.state.allContainers, nextState.allContainers, { strict: true }) || !(0, import_deep_equal2.default)(this.state.allTables, nextState.allTables, { strict: true }) || !(0, import_deep_equal2.default)(this.state.allCustom, nextState.allCustom, { strict: true }) || !(0, import_deep_equal2.default)(this.state.allRichClasses, nextState.allRichClasses, { strict: true }) || !(0, import_deep_equal2.default)(nextProps.wrapperArgs, this.props.wrapperArgs, { strict: true }) || !(0, import_deep_equal2.default)(nextProps.elementWrappersArgs, this.props.elementWrappersArgs, { strict: true }) || !(0, import_deep_equal2.default)(nextProps.features, this.props.features, { strict: true });
    if (standardUpdate) {
      return true;
    }
    if (nextProps.treeValue && nextState.synced) {
      return nextProps.treeValue.id !== this.state.treeValue.id;
    }
    return true;
  }
  /**
   * Sets the value off the rich text
   * @param v the value to set
   */
  setValue(v) {
    if (this.isUnmounted || this.props.disabled) {
      return;
    }
    const newRootDocument = {
      // we don't know the id yet
      id: null,
      type: "document",
      rich: this.state.treeValue.rich,
      children: v
    };
    const serialized = serializeString(newRootDocument);
    newRootDocument.id = getUUIDFor(serialized);
    clearTimeout(this.updateTimeout);
    const isEqual = (serialized || null) === (this.props.value || null);
    if (isEqual) {
      this.setState({
        treeValue: newRootDocument,
        synced: true
      });
    } else {
      this.setState({
        treeValue: newRootDocument,
        synced: false
      });
      this.updateTimeout = setTimeout(() => {
        if (this.state.treeValue.rich) {
          if (this.props.cacheStoreCountGlobal) {
            const count = countSize(this.state.treeValue);
            window[this.props.cacheStoreCountGlobal] = count;
          }
        }
        this.props.onChange(serializeString(this.state.treeValue), this.state.treeValue);
        this.updateTimeout = setTimeout(() => {
          if (!this.isUnmounted) {
            this.setState({
              synced: true
            });
          }
        }, 30);
      }, 300);
    }
  }
  /**
   * Provides the context a given node is sitting in
   * @param n the node in question
   * @param onlySwichingContext provides the context only if it was set
   * by the given node otherwise it will return null
   */
  getContextFor(n3, level, onlySwichingContext) {
    if (onlySwichingContext) {
      const nodeAsRichElement = Path.isPath(n3) ? Node.get(this.editor, n3) : n3;
      if (!nodeAsRichElement.context && !nodeAsRichElement.forEach) {
        return null;
      }
    }
    const pathOfNode = Path.isPath(n3) ? n3 : ReactEditor.findPath(this.editor, n3);
    return getContextFor(
      pathOfNode,
      level || "final",
      this.state.treeValue,
      this.state.currentRootContext
    );
  }
  getRootContext() {
    return this.state.currentRootContext;
  }
  renderElement(props) {
    return /* @__PURE__ */ import_react3.default.createElement(
      CurrentElementRetriever,
      __spreadProps(__spreadValues({}, props), {
        fn: this.actuallyRenderElement
      })
    );
  }
  /**
   * the render element function to be used in slate editor
   * @param props the properties that slate provides to render the component
   */
  actuallyRenderElement(props, isSelected, selectionCriteria, isPrimary) {
    const { attributes, children, element } = props;
    const uiHandler = element.uiHandler;
    let toReturn = null;
    let wasUIHandled = false;
    if (uiHandler) {
      const handlerContext = this.getContextFor(element);
      const uiHandlerArgs = element.uiHandlerArgs;
      let propertiesFromContext = handlerContext && handlerContext.properties && handlerContext.properties[uiHandler];
      if (!propertiesFromContext) {
        propertiesFromContext = this.props.rootContext && this.props.rootContext.properties[uiHandler];
        if (propertiesFromContext && propertiesFromContext.nonRootInheritable) {
          propertiesFromContext = null;
        }
      }
      if (propertiesFromContext && propertiesFromContext.type === "ui-handler" && propertiesFromContext.editorHandler) {
        const HandlerComponent = propertiesFromContext.editorHandler.Component;
        const handlerExtraArgs = propertiesFromContext.editorHandler.extraArgs;
        const passExtraInfo = propertiesFromContext.editorHandler.passSlateInfo;
        const extraInfo = passExtraInfo ? {
          helpers: this.getHelpers(),
          selected: isSelected && isPrimary
        } : {};
        let className = null;
        element.richClassList && element.richClassList.forEach((c) => {
          className = (className || "") + " rich-text--" + c;
        });
        const style = convertStyleStringToReactObject(element.style);
        const styleActive = convertStyleStringToReactObject(element.styleActive);
        const styleHover = convertStyleStringToReactObject(element.styleHover);
        toReturn = /* @__PURE__ */ import_react3.default.createElement(
          HandlerComponent,
          __spreadValues({
            args: __spreadValues(__spreadValues({}, uiHandlerArgs), handlerExtraArgs),
            isSlate: true,
            attributes,
            element,
            style,
            styleActive,
            styleHover,
            className,
            events: null
          }, extraInfo),
          children
        );
        const contextSwichContext = this.getContextFor(element, "final", true);
        if (contextSwichContext && contextSwichContext.loopable && contextSwichContext.editorArgs && contextSwichContext.editorArgs.loopEmulation && contextSwichContext.editorArgs.loopEmulation >= 1) {
          const arr = [];
          for (let i2 = 0; i2 < contextSwichContext.editorArgs.loopEmulation; i2++) {
            const shouldDisableElementWrappers = i2 !== contextSwichContext.editorArgs.loopEmulation - 1;
            if (contextSwichContext.editorArgs.wrapper) {
              if (shouldDisableElementWrappers) {
                arr.push(
                  /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2))
                );
              } else {
                arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2)));
              }
            } else {
              if (shouldDisableElementWrappers) {
                arr.push(
                  /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, toReturn)
                );
              } else {
                arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, toReturn));
              }
            }
          }
          toReturn = arr;
        } else if (contextSwichContext && contextSwichContext.editorArgs && contextSwichContext.editorArgs.wrapper) {
          toReturn = contextSwichContext.editorArgs.wrapper(toReturn);
        }
        wasUIHandled = true;
      }
    }
    if (!wasUIHandled) {
      const customProps = __spreadProps(__spreadValues({}, attributes), { children });
      const html = element.html;
      if (typeof html === "string") {
        const htmlContext = this.getContextFor(element);
        let propertiesFromContext = htmlContext && htmlContext.properties && htmlContext.properties[html];
        if (!propertiesFromContext) {
          propertiesFromContext = this.props.rootContext && this.props.rootContext.properties && this.props.rootContext.properties[html];
          if (propertiesFromContext && propertiesFromContext.nonRootInheritable) {
            propertiesFromContext = null;
          }
        }
        if (propertiesFromContext && propertiesFromContext.type === "html" && typeof propertiesFromContext.editorDisplay !== "undefined") {
          const toDisplay = propertiesFromContext.editorDisplay;
          if (typeof toDisplay === "string") {
            customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, /* @__PURE__ */ import_react3.default.createElement("div", { contentEditable: false, dangerouslySetInnerHTML: { __html: toDisplay }, style: { display: "contents" } }), children);
          } else {
            customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, /* @__PURE__ */ import_react3.default.createElement("div", { contentEditable: false, style: { display: "contents" } }, toDisplay), children);
          }
        } else {
          customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, propertiesFromContext && propertiesFromContext.label || element.children[0].text, children);
        }
      }
      const text = element.textContent;
      if (typeof text === "string") {
        const textContext = this.getContextFor(element);
        let propertiesFromContext = textContext && textContext.properties && textContext.properties[text];
        if (!propertiesFromContext) {
          propertiesFromContext = this.props.rootContext && this.props.rootContext.properties && this.props.rootContext.properties[text];
          if (propertiesFromContext && propertiesFromContext.nonRootInheritable) {
            propertiesFromContext = null;
          }
        }
        customProps.children = /* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, null, propertiesFromContext && propertiesFromContext.type === "text" && (propertiesFromContext.editorDisplay || propertiesFromContext.label) || element.children[0].text, children);
      }
      toReturn = SERIALIZATION_REGISTRY.REACTIFY[element.type]({
        active: false,
        selected: isSelected && isPrimary,
        element,
        asTemplate: false,
        customProps,
        // we don't care as we are not using the onCustom function
        parent: null,
        tree: null
      });
      const contextSwichContext = this.getContextFor(element, "final", true);
      if (contextSwichContext && contextSwichContext.loopable && contextSwichContext.editorArgs && contextSwichContext.editorArgs.loopEmulation && contextSwichContext.editorArgs.loopEmulation >= 1) {
        const arr = [];
        for (let i2 = 0; i2 < contextSwichContext.editorArgs.loopEmulation; i2++) {
          const shouldDisableElementWrappers = i2 !== contextSwichContext.editorArgs.loopEmulation - 1;
          if (contextSwichContext.editorArgs.wrapper) {
            if (shouldDisableElementWrappers) {
              arr.push(
                /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2))
              );
            } else {
              arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, contextSwichContext.editorArgs.wrapper(toReturn, i2)));
            }
          } else {
            if (shouldDisableElementWrappers) {
              arr.push(
                /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Provider, { value: true, key: i2 }, toReturn)
              );
            } else {
              arr.push(/* @__PURE__ */ import_react3.default.createElement(import_react3.default.Fragment, { key: i2 }, toReturn));
            }
          }
        }
        toReturn = arr;
      } else if (contextSwichContext && contextSwichContext.editorArgs && contextSwichContext.editorArgs.wrapper) {
        toReturn = contextSwichContext.editorArgs.wrapper(toReturn);
      }
    }
    if (this.props.elementWrappers && (!wasUIHandled && this.props.elementWrappers.components && this.props.elementWrappers.components[element.type] || this.props.elementWrappers.uiHandler && this.props.elementWrappers.uiHandler[element.uiHandler])) {
      const ElementWrapper = this.props.elementWrappers.uiHandler && this.props.elementWrappers.uiHandler[element.uiHandler] || this.props.elementWrappers.components[element.type];
      if (ElementWrapper) {
        return /* @__PURE__ */ import_react3.default.createElement(ElementWrapperDisabler.Consumer, null, (disabled) => disabled ? toReturn : /* @__PURE__ */ import_react3.default.createElement(
          ElementWrapper,
          __spreadValues({
            element,
            helpers: this.getHelpers(),
            primarySelection: isPrimary,
            isSelected,
            featureSupport: this.getFeatureSupport(),
            baseI18n: this.props.baseI18n
          }, this.props.elementWrappersArgs),
          toReturn
        ));
      }
    }
    return toReturn;
  }
  /**
   * the function that is called by slate to render text
   * @param props the properties given by slate to render a text leaf
   */
  renderText(props) {
    const { attributes, children, leaf: leaf3 } = props;
    return SERIALIZATION_REGISTRY.REACTIFY.text({
      active: false,
      selected: false,
      element: leaf3,
      asTemplate: false,
      customProps: __spreadProps(__spreadValues({}, attributes), { children }),
      // we don't care as we are not using the onCustom function
      // this will prevent normalization but that's fine
      parent: null,
      tree: null
    });
  }
  /**
   * The change function that is called via slate when a change occurs
   * this function hits every time on every change of the rich text
   * @param newValue the new value of the children of the document
   */
  onChange(newValue) {
    if (this.isUnmounted) {
      return;
    }
    if (this.editor.selection && ReactEditor.isFocused(this.editor)) {
      this.onFocusedChange(this.editor.selection.anchor.path, newValue);
    } else {
      this.onBlurredChange(newValue);
    }
    this.lastChangeWasSelectedDelete = false;
    this.setValue(newValue);
  }
  /**
   * Performs a hard blur event and the paths are cleared out
   */
  hardBlur() {
    if (this.isUnmounted) {
      return;
    }
    this.setState({
      currentSelectedInlineElementAnchor: null,
      currentSelectedInlineElement: null,
      currentSelectedText: null,
      currentSelectedTextAnchor: null,
      currentSelectedBlockElement: null,
      currentSelectedBlockElementAnchor: null,
      currentSelectedSuperBlockElements: null,
      currentSelectedSuperBlockElementAnchors: null,
      currentSelectedInlineContext: null,
      currentSelectedBlockContext: null,
      currentSelectedTopmostSuperBlockContext: null,
      currentSelectedElement: null,
      currentSelectedElementAnchor: null,
      currentSelectedElementContext: null,
      previousSelectedElementAnchor: this.state.currentSelectedElementAnchor,
      previousTextAnchor: this.state.currentTextAnchor
    });
    Transforms.deselect(this.editor);
    ReactEditor.blur(this.editor);
  }
  selectiveHardBlurIfHasSelectedElement(e2, ele) {
    var _a, _b, _c, _d;
    if (this.state.currentSelectedElement) {
      if (ele && ((_b = (_a = this.wrapperRef) == null ? void 0 : _a.current) == null ? void 0 : _b.selectiveHardBlur)) {
        (_d = (_c = this.wrapperRef) == null ? void 0 : _c.current) == null ? void 0 : _d.selectiveHardBlur(e2, ele);
      } else {
        this.hardBlur();
      }
    }
  }
  /**
   * Performs a soft blur event
   */
  softBlur() {
    ReactEditor.blur(this.editor);
    Transforms.deselect(this.editor);
  }
  deletePath(p) {
    const currentSelectedElementAnchor = this.state.currentSelectedElementAnchor;
    if (Path.equals(p, currentSelectedElementAnchor) || Path.isAncestor(p, currentSelectedElementAnchor)) {
      this.lastChangeWasSelectedDelete = true;
    }
    Transforms.delete(this.editor, {
      at: p
    });
    if (this.state.currentText) {
      ReactEditor.focus(this.editor);
    } else {
      ReactEditor.blur(this.editor);
    }
  }
  /**
   * given a node path, that should represent either an element or a text node
   * this allows such a path to be selected and be marked into the selection
   * @param p the path to select
   */
  selectPath(p) {
    if (this.isUnmounted) {
      return;
    }
    this.setState(
      this.calculateAnchors(
        this.editor.selection && this.editor.selection.anchor.path,
        this.state.treeValue.children,
        p
      )
    );
  }
  /**
   * Allows to move between two paths as it moves elements to one place to another
   * @param p the path to select
   */
  movePaths(from, to) {
    if (this.isUnmounted) {
      return;
    }
    const selectedElement = this.state.currentSelectedElement;
    const toCropped = [...to];
    const toLast = toCropped.pop();
    const fromCropped = [...from];
    const fromLast = fromCropped.pop();
    const actualTo = [...to];
    if (Path.equals(fromCropped, toCropped) && toLast > fromLast) {
      actualTo[actualTo.length - 1]--;
    }
    Transforms.moveNodes(
      this.editor,
      {
        at: from,
        to: actualTo
      }
    );
    setTimeout(() => {
      const newSelectedAnchor = selectedElement ? ReactEditor.findPath(this.editor, selectedElement) : null;
      this.setState(this.calculateAnchors(this.editor.selection && this.editor.selection.anchor.path, null, newSelectedAnchor));
    }, 0);
  }
  getPreviousSelectedElementAnchor() {
    return this.state.previousSelectedElementAnchor;
  }
  getPreviousTextAnchor() {
    return this.state.previousTextAnchor;
  }
  /**
   * Deletes the selected node that has been selected, either the current default
   * or one that has been manually selected using selectPath
   */
  deleteSelectedNode() {
    this.lastChangeWasSelectedDelete = true;
    const selectedElementAnchor = this.state.currentSelectedElementAnchor;
    Transforms.delete(this.editor, {
      at: selectedElementAnchor
    });
    if (this.state.currentText) {
      ReactEditor.focus(this.editor);
    } else {
      ReactEditor.blur(this.editor);
    }
  }
  /**
   * A helper function to call react focus back into the editor
   */
  focus() {
    ReactEditor.focus(this.editor);
  }
  /**
   * An async function that is a bit of a hack to focus at a given
   * range, because of the way slate works it needs to be async
   * @param at the range to focus at
   * @returns a void promise once it's done
   */
  async focusAt(at) {
    if (Range.isRange(at)) {
      return new Promise((r2) => {
        setTimeout(() => {
          ReactEditor.focus(this.editor);
          setTimeout(() => {
            Transforms.select(this.editor, at);
            setTimeout(r2, 0);
          }, 0);
        }, 0);
      });
    } else {
      this.selectPath(at);
    }
  }
  /**
   * Provides a fallback for insert when no insert region is found
   * @param type 
   * @returns 
   */
  getFallbackInsertPath() {
    if (this.state.currentSelectedInlineElement) {
      return [...this.state.currentSelectedInlineElementAnchor, this.state.currentSelectedInlineElement.children.length];
    } else if (this.state.currentSelectedBlockElement) {
      return [...this.state.currentSelectedBlockElementAnchor, this.state.currentSelectedBlockElement.children.length];
    } else if (this.state.currentSelectedSuperBlockElements) {
      const currentSelectedSuperBlockElementAnchor = this.state.currentSelectedSuperBlockElementAnchors[this.state.currentSelectedSuperBlockElementAnchors.length - 1];
      const currentSelectedSuperBlockElement = this.state.currentSelectedSuperBlockElements[this.state.currentSelectedSuperBlockElements.length - 1];
      return [...currentSelectedSuperBlockElementAnchor, currentSelectedSuperBlockElement.children.length];
    } else {
      return [this.state.treeValue.children.length];
    }
  }
  /**
   * Will insert an image based on a given file that has
   * been taken as an input
   * 
   * Note that there is an insert file function that should be given
   * as prop and that's what this function will call, if an error occurred
   * it should have been fed as a prop as well, so this function always
   * returns a void promise
   * 
   * @param file the file
   * @param standalone whether to make it a standalone image
   * @returns a void promise once it's done
   */
  async insertImage(file, standalone) {
    try {
      const data = await this.props.onInsertFile(file, true);
      if (!data) {
        return;
      }
      const imageNode = {
        type: "image",
        alt: null,
        children: [
          {
            bold: false,
            italic: false,
            text: "",
            underline: false
          }
        ],
        height: data.height,
        width: data.width,
        sizes: "70vw",
        src: data.result.url,
        srcId: data.result.id,
        srcSet: null,
        standalone
      };
      if (!this.editor.selection) {
        Transforms.insertNodes(this.editor, imageNode, { at: this.getFallbackInsertPath() });
      } else {
        Transforms.insertNodes(this.editor, imageNode);
      }
    } catch (err) {
    }
  }
  updateTemplateText(label, value) {
    if (this.state.currentSelectedInlineElement) {
      Transforms.setNodes(this.editor, {
        textContent: value || ""
      }, { at: this.state.currentSelectedInlineElementAnchor });
      Transforms.setNodes(this.editor, {
        text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.text)
      }, { at: this.state.currentSelectedTextAnchor });
    }
  }
  /**
   * Will insert a bit of template text that is used for templating purposes
   * 
   * @param label the label to give it
   * @param value the value that it gets
   * @param at at which range to insert it (optional)
   * @returns a void promise
   */
  insertTemplateText(label, value) {
    const textNode = {
      bold: false,
      italic: false,
      underline: false,
      text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.text)
    };
    const inlineNode = {
      children: [textNode],
      type: "inline",
      textContent: value || ""
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, inlineNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, inlineNode);
    }
  }
  updateTemplateHTML(label, value) {
    if (this.state.currentSelectedBlockElement) {
      Transforms.setNodes(this.editor, {
        html: value || ""
      }, { at: this.state.currentSelectedBlockElementAnchor });
      Transforms.setNodes(this.editor, {
        text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.container)
      }, { at: this.state.currentSelectedTextAnchor });
    }
  }
  /**
   * Will insert a bit of template html that is used for templating purposes, work similar
   * to template text, except it uses html content instead to replace the inner html
   * 
   * @param label the label to be given to the element to be added
   * @param value the value that will be used from the context
   * @param at an optional range where to be inserted
   */
  insertTemplateHTML(label, value) {
    const textNode = {
      bold: false,
      italic: false,
      underline: false,
      text: label || localeReplacer(this.props.baseI18n.template, this.props.baseI18n.container)
    };
    const voidBlock = {
      children: [textNode],
      type: "void-block",
      html: value || ""
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, voidBlock, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, voidBlock);
    }
  }
  /**
   * Inserts a table at the given location
   * @param type the type of the table
   */
  insertTable(type) {
    const tableNode = {
      type: "table",
      children: [
        {
          type: "tbody",
          children: [
            {
              type: "tr",
              children: [
                {
                  type: "td",
                  children: [
                    STANDARD_PARAGRAPH()
                  ]
                }
              ]
            }
          ]
        }
      ],
      tableType: type || null
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, tableNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, tableNode);
    }
  }
  insertTableColumn() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentColumnIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    if (currentColumnIndex === -1) {
      return;
    }
    const currentColumn = this.state.currentSelectedSuperBlockElements[currentColumnIndex];
    const currentColumnAnchor = this.state.currentSelectedSuperBlockElementAnchors[currentColumnIndex];
    const targetColumnAnchor = [...currentColumnAnchor];
    targetColumnAnchor[targetColumnAnchor.length - 1]++;
    const targetIndex = targetColumnAnchor[targetColumnAnchor.length - 1];
    const tableAnchor = [...currentColumnAnchor];
    tableAnchor.pop();
    tableAnchor.pop();
    tableAnchor.pop();
    try {
      const tableElement = this.getNodeAt(tableAnchor);
      if (tableElement.type === "table") {
        tableElement.children.forEach((theadOrTbodyOrTfoot, theadOrTbodyOrTFootIndex) => {
          const isLastElementInTableBody = theadOrTbodyOrTFootIndex === tableElement.children.length - 1;
          theadOrTbodyOrTfoot.children.forEach((row, rowIndex) => {
            const column = {
              type: "td",
              children: [
                STANDARD_PARAGRAPH()
              ]
            };
            let actualTargetIndex = targetIndex;
            if (actualTargetIndex > row.children.length) {
              actualTargetIndex = row.children.length;
            }
            const insertPoint = [...tableAnchor, theadOrTbodyOrTFootIndex, rowIndex, actualTargetIndex];
            this.preventNormalize = isLastElementInTableBody ? rowIndex !== theadOrTbodyOrTfoot.children.length - 1 : true;
            Transforms.insertNodes(this.editor, column, { at: insertPoint });
            this.preventNormalize = false;
          });
        });
        const textAnchorOfColumn = targetColumnAnchor;
        textAnchorOfColumn.push(0);
        textAnchorOfColumn.push(0);
        this.focusAt({
          anchor: {
            offset: 0,
            path: targetColumnAnchor
          },
          focus: {
            offset: 0,
            path: targetColumnAnchor
          }
        });
      }
    } catch (e2) {
    }
  }
  deleteTableColumn() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentColumnIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    if (currentColumnIndex === -1) {
      return;
    }
    const currentColumn = this.state.currentSelectedSuperBlockElements[currentColumnIndex];
    const currentColumnAnchor = this.state.currentSelectedSuperBlockElementAnchors[currentColumnIndex];
    const targetIndex = currentColumnAnchor[currentColumnAnchor.length - 1];
    const tableAnchor = [...currentColumnAnchor];
    tableAnchor.pop();
    tableAnchor.pop();
    tableAnchor.pop();
    try {
      const tableElement = this.getNodeAt(tableAnchor);
      if (tableElement.type === "table") {
        tableElement.children.forEach((theadOrTbodyOrTfoot, theadOrTbodyOrTFootIndex) => {
          const isLastElementInTableBody = theadOrTbodyOrTFootIndex === tableElement.children.length - 1;
          theadOrTbodyOrTfoot.children.forEach((row, rowIndex) => {
            const deletePoint = [...tableAnchor, theadOrTbodyOrTFootIndex, rowIndex, targetIndex];
            this.preventNormalize = isLastElementInTableBody ? rowIndex !== theadOrTbodyOrTfoot.children.length - 1 : true;
            Transforms.delete(this.editor, { at: deletePoint });
            this.preventNormalize = false;
          });
        });
      }
    } catch (e2) {
    }
  }
  insertTableRow() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentRowIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "tr");
    if (currentRowIndex === -1) {
      return;
    }
    const currentRow = this.state.currentSelectedSuperBlockElements[currentRowIndex];
    const currentRowAnchor = this.state.currentSelectedSuperBlockElementAnchors[currentRowIndex];
    const row = {
      type: "tr",
      children: currentRow.children.map((v) => ({
        type: "td",
        children: [
          STANDARD_PARAGRAPH()
        ]
      }))
    };
    const parentTbodyOrTheadOrTfootAnchor = [...currentRowAnchor];
    parentTbodyOrTheadOrTfootAnchor.pop();
    const parentTbodyOrTheadOrTfoot = this.getNodeAt(parentTbodyOrTheadOrTfootAnchor);
    if (parentTbodyOrTheadOrTfoot.type === "tbody") {
      const targetRowAnchor = currentRowAnchor;
      targetRowAnchor[targetRowAnchor.length - 1]++;
      Transforms.insertNodes(this.editor, row, { at: targetRowAnchor });
      const targetRowAnchorFirstText = targetRowAnchor;
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      this.focusAt({
        anchor: {
          offset: 0,
          path: targetRowAnchorFirstText
        },
        focus: {
          offset: 0,
          path: targetRowAnchorFirstText
        }
      });
    } else if (parentTbodyOrTheadOrTfoot.type === "thead") {
      const tbodyAnchor = [...parentTbodyOrTheadOrTfootAnchor];
      tbodyAnchor[tbodyAnchor.length - 1]++;
      let tbody = null;
      try {
        tbody = this.getNodeAt(tbodyAnchor);
      } catch (e2) {
      }
      if (tbody && tbody.type === "tbody") {
        const targetRowAnchor = tbodyAnchor;
        targetRowAnchor.push(0);
        Transforms.insertNodes(this.editor, row, { at: targetRowAnchor });
        const targetRowAnchorFirstText = targetRowAnchor;
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        this.focusAt({
          anchor: {
            offset: 0,
            path: targetRowAnchorFirstText
          },
          focus: {
            offset: 0,
            path: targetRowAnchorFirstText
          }
        });
      } else {
        const tbody2 = {
          type: "tbody",
          children: [row]
        };
        Transforms.insertNodes(this.editor, tbody2, { at: tbodyAnchor });
        const targetRowAnchorFirstText = tbodyAnchor;
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        targetRowAnchorFirstText.push(0);
        this.focusAt({
          anchor: {
            offset: 0,
            path: targetRowAnchorFirstText
          },
          focus: {
            offset: 0,
            path: targetRowAnchorFirstText
          }
        });
      }
    } else if (parentTbodyOrTheadOrTfoot.type === "tfoot") {
      const tbodyAnchor = [...parentTbodyOrTheadOrTfootAnchor];
      tbodyAnchor[tbodyAnchor.length - 1]--;
      let tbody = null;
      try {
        tbody = this.getNodeAt(tbodyAnchor);
      } catch (e2) {
      }
      const tfootClone = __spreadValues({}, parentTbodyOrTheadOrTfoot);
      tfootClone.children = tfootClone.children.map((v) => {
        return {
          type: "tr",
          children: v.children.map((v2) => ({
            type: "td",
            children: [
              STANDARD_PARAGRAPH()
            ]
          }))
        };
      });
      this.preventNormalize = true;
      if (tbody && tbody.type === "tbody") {
        const currentTBodyPropsCopy = __spreadValues({}, tbody);
        delete currentTBodyPropsCopy.children;
        Transforms.setNodes(
          this.editor,
          currentTBodyPropsCopy,
          {
            at: parentTbodyOrTheadOrTfootAnchor
          }
        );
      } else {
        Transforms.setNodes(
          this.editor,
          {
            type: "tbody"
          },
          {
            at: parentTbodyOrTheadOrTfootAnchor
          }
        );
      }
      this.preventNormalize = false;
      const nextAnchorForTfoot = [...parentTbodyOrTheadOrTfootAnchor];
      nextAnchorForTfoot[nextAnchorForTfoot.length - 1]++;
      Transforms.insertNodes(this.editor, tfootClone, { at: nextAnchorForTfoot });
      const targetRowAnchorFirstText = tbody ? parentTbodyOrTheadOrTfootAnchor : nextAnchorForTfoot;
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      targetRowAnchorFirstText.push(0);
      this.focusAt({
        anchor: {
          offset: 0,
          path: targetRowAnchorFirstText
        },
        focus: {
          offset: 0,
          path: targetRowAnchorFirstText
        }
      });
    }
  }
  deleteTableRow() {
    if (!this.state.currentSelectedSuperBlockElements) {
      return;
    }
    const currentRowIndex = this.state.currentSelectedSuperBlockElements && findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "tr");
    if (currentRowIndex === -1) {
      return;
    }
    try {
      Transforms.delete(this.editor, { at: this.state.currentSelectedSuperBlockElementAnchors[currentRowIndex] });
    } catch (e2) {
    }
  }
  /**
   * Tells whether the current table row can
   * be toggled in the environment it is
   */
  canToggleTable(element) {
    if (!this.state.currentSelectedSuperBlockElements) {
      return false;
    }
    const potentialTdIndex = findLastIndex(this.state.currentSelectedSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    if (potentialTdIndex === -1) {
      return false;
    }
    const tdAnchor = this.state.currentSelectedSuperBlockElementAnchors[potentialTdIndex];
    const rowPath = [...tdAnchor];
    rowPath.pop();
    const theadOrTbodyOrTfootPath = [...rowPath];
    theadOrTbodyOrTfootPath.pop();
    const tablePath = [...theadOrTbodyOrTfootPath];
    tablePath.pop();
    try {
      const potentialRow = this.getNodeAt(rowPath);
      if (potentialRow.type !== "tr") {
        return false;
      }
      const theadOrTbodyOrTfoot = this.getNodeAt(theadOrTbodyOrTfootPath);
      if (theadOrTbodyOrTfoot.type === element) {
        return true;
      } else if (theadOrTbodyOrTfoot.type === "tfoot" || theadOrTbodyOrTfoot.type === "thead") {
        return false;
      }
      const tableParent = this.getNodeAt(tablePath);
      if (tableParent.type !== "table") {
        return false;
      }
      const theadOrTfootAlreadyExists = tableParent.children.find((c) => c.type === element);
      if (theadOrTfootAlreadyExists) {
        return false;
      } else {
        if (element === "thead") {
          return rowPath[rowPath.length - 1] === 0;
        } else if (element === "tfoot") {
          return rowPath[rowPath.length - 1] === theadOrTbodyOrTfoot.children.length - 1;
        }
        return false;
      }
    } catch (e2) {
      return false;
    }
  }
  /**
   * Only works when the first element of the table
   * is selected, aka the first row
   */
  toggleTable(element) {
    if (!this.canToggleTable(element)) {
      return;
    }
    const potentialTdIndex = findLastIndex(this.state.currentSuperBlockElements, (e2) => e2.type === "td" || e2.type === "th");
    const tdAnchor = this.state.currentSelectedSuperBlockElementAnchors[potentialTdIndex];
    const rowPath = [...tdAnchor];
    rowPath.pop();
    const theadOrTbodyPath = [...rowPath];
    theadOrTbodyPath.pop();
    const tablePath = [...theadOrTbodyPath];
    tablePath.pop();
    const tableParent = this.getNodeAt(tablePath);
    const position = tableParent.children.findIndex((e2) => e2.type === element);
    const bodyPosition = tableParent.children.findIndex((e2) => e2.type === "tbody");
    if (position !== -1) {
      const currentTBody = tableParent.children[bodyPosition];
      if (!currentTBody) {
        Transforms.setNodes(
          this.editor,
          {
            type: "tbody"
          },
          {
            at: [...tablePath, position]
          }
        );
      } else {
        const currentTBodyPropsCopy = __spreadValues({}, currentTBody);
        delete currentTBodyPropsCopy.children;
        Transforms.setNodes(
          this.editor,
          currentTBodyPropsCopy,
          {
            at: [...tablePath, position]
          }
        );
      }
    } else {
      const currentTBody = tableParent.children[bodyPosition];
      if (!currentTBody) {
        return;
      }
      if (currentTBody.children.length === 1) {
        Transforms.setNodes(
          this.editor,
          {
            type: element
          },
          {
            at: [...tablePath, bodyPosition]
          }
        );
      } else {
        const currentTBodyPropsCopy = __spreadValues({}, currentTBody);
        currentTBodyPropsCopy.children = [];
        currentTBodyPropsCopy.type = element;
        this.preventNormalize = true;
        Transforms.insertNodes(
          this.editor,
          currentTBodyPropsCopy,
          {
            at: [...tablePath, element === "thead" ? 0 : bodyPosition + 1]
          }
        );
        this.preventNormalize = false;
        if (element === "thead") {
          Transforms.moveNodes(
            this.editor,
            {
              // tbody is now in 1 ahead
              // zero for the first row
              at: [...tablePath, bodyPosition + 1, 0],
              // this is our new thead
              to: [...tablePath, 0, 0]
            }
          );
        } else {
          Transforms.moveNodes(
            this.editor,
            {
              // tbody is at the same place as before
              // we pick the last row
              at: [...tablePath, bodyPosition, currentTBody.children.length - 1],
              // this is our new tfoot which is after our body
              to: [...tablePath, bodyPosition + 1, 0]
            }
          );
        }
      }
    }
  }
  _getVideoSrcOriginAndStatus(url) {
    let src = null;
    let origin = null;
    let status = true;
    let parsedURL = null;
    if (url) {
      try {
        parsedURL = new URL(url);
      } catch (e2) {
        status = false;
      }
    }
    if (parsedURL) {
      if (parsedURL.hostname === "youtube.com" || parsedURL.hostname === "www.youtube.com" || parsedURL.hostname === "youtu.be") {
        origin = "youtube";
        const isClassicYTUrl = parsedURL.hostname === "youtube.com" || parsedURL.hostname === "www.youtube.com";
        if (isClassicYTUrl && parsedURL.pathname.startsWith("/embed/")) {
          src = parsedURL.pathname.split("/")[2];
        } else if (isClassicYTUrl && parsedURL.pathname.startsWith("/watch")) {
          let search = parsedURL.search;
          if (search[0] === "?") {
            search = search.substr(1);
          }
          search.split("&").forEach((v) => {
            if (v.startsWith("v=")) {
              src = v.substr(2);
            }
          });
        } else if (parsedURL.hostname === "youtu.be") {
          src = parsedURL.pathname.split("/")[1];
        }
        status = true;
      } else if (parsedURL.host === "player.vimeo.com") {
        origin = "vimeo";
        src = parsedURL.pathname.split("/")[2];
        status = true;
      } else {
        status = false;
      }
    }
    return {
      src,
      origin,
      status
    };
  }
  updateVideo(url) {
    const data = this._getVideoSrcOriginAndStatus(url);
    if (data.status && this.state.currentSelectedBlockElement && this.state.currentSelectedBlockElement.type === "video") {
      Transforms.setNodes(this.editor, {
        origin: data.origin,
        src: data.src
      }, {
        at: this.state.currentSelectedBlockElementAnchor
      });
    }
    return data.status;
  }
  /**
   * Will insert a video given the information
   * @param url the url of the video
   * @param at a partial range to insert at
   * @returns a boolean on whether it succeeded
   */
  insertVideo(url) {
    const data = this._getVideoSrcOriginAndStatus(url);
    const videoNode = {
      type: "video",
      children: [
        {
          bold: false,
          italic: false,
          text: "",
          underline: false
        }
      ],
      origin: data.origin,
      src: data.src
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, videoNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, videoNode);
    }
    return data.status;
  }
  /**
   * Will insert a file based on the information given it uses
   * the standard on insert file function in order to perfom it
   *
   * @param file the file to insert
   * @param at a partial range to insert at
   */
  async insertFile(file) {
    try {
      const data = await this.props.onInsertFile(file, false);
      if (!data) {
        return;
      }
      const fileNode = {
        type: "file",
        children: [
          {
            bold: false,
            italic: false,
            text: "",
            underline: false
          }
        ],
        extension: mimeTypeToExtension(file.type),
        fileName: data.result.name,
        size: prettyBytes(data.result.size),
        src: data.result.url,
        srcId: data.result.id
      };
      if (!this.editor.selection) {
        Transforms.insertNodes(this.editor, fileNode, { at: this.getFallbackInsertPath() });
      } else {
        Transforms.insertNodes(this.editor, fileNode);
      }
    } catch (err) {
    }
  }
  /**
   * Will insert a container at the given location
   * @param type optional, the container type, otherwise will insert a standard container
   * @param at an optional range
   */
  async insertContainer(type) {
    const containerNode = {
      type: "container",
      children: [
        {
          type: "paragraph",
          children: [
            {
              bold: false,
              italic: false,
              underline: false,
              text: ""
            }
          ]
        }
      ],
      containerType: type || null
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, containerNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, containerNode);
    }
  }
  /**
   * Inserts a custom element
   * @param type the type for the custom element
   * @param at an optional at range to insert the custom at
   */
  async insertCustom(type) {
    const customNode = {
      type: "custom",
      children: [
        {
          type: "paragraph",
          children: [
            {
              bold: false,
              italic: false,
              underline: false,
              text: ""
            }
          ]
        }
      ],
      customType: type
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, customNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, customNode);
    }
  }
  /**
   * Makes a quote out of the current element
   * @param at toggle at the given range, this will cause a focus
   */
  async toggleQuote() {
    const isCollapsed = Range.isCollapsed(this.editor.selection);
    if (isCollapsed && this.state.currentSelectedBlockElement) {
      if (this.state.currentSelectedBlockElement.type === "quote") {
        Transforms.setNodes(
          this.editor,
          {
            type: "paragraph"
          }
        );
      } else {
        Transforms.setNodes(
          this.editor,
          {
            type: "quote"
          }
        );
      }
    }
  }
  /**
   * Makes a title out of the current element
   * @param type the title type
   * @param at an optional range
   */
  async toggleTitle(type) {
    const isCollapsed = Range.isCollapsed(this.editor.selection);
    if (isCollapsed && this.state.currentSelectedBlockElement) {
      if (this.state.currentSelectedBlockElement.type === "title") {
        Transforms.setNodes(
          this.editor,
          {
            type: "paragraph"
          }
        );
      } else {
        Transforms.setNodes(
          this.editor,
          {
            type: "title",
            titleType: type
          }
        );
      }
    }
  }
  /**
   * Makes a list out of the current element
   * @param type the type of the list that is to be toggled, either bulleted or number
   * @param at an optional range
   */
  async insertList(type) {
    const listNode = {
      type: "list",
      listType: type,
      children: [
        {
          type: "list-item",
          children: [
            STANDARD_PARAGRAPH()
          ]
        }
      ]
    };
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, listNode, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, listNode);
    }
  }
  updateLink(url, tvalue) {
    let validState = true;
    if (url) {
      try {
        const urlParsed = new URL(url);
        const isLocal = urlParsed.hostname === location.hostname;
        const onlyLocal = !this.props.features.supportsExternalLinks;
        if (onlyLocal && !isLocal) {
          validState = false;
        }
      } catch (e2) {
        validState = false;
      }
    }
    if (this.state.currentSelectedInlineElement && this.state.currentSelectedInlineElement.type === "link") {
      const link = {
        href: url,
        thref: tvalue
      };
      Transforms.setNodes(this.editor, link, {
        at: this.state.currentSelectedInlineElementAnchor
      });
    }
    return validState;
  }
  /**
   * Makes a link out of the current element
   * @param url the url that we are using (null if using tvalue)
   * @param tvalue the template value to use (null if providing url)
   * @param at an optional range to pass
   * @returns a boolean if the link was valid and toggleLink
   */
  toggleLink(url, tvalue) {
    let validState = true;
    if (url) {
      try {
        const urlParsed = new URL(url);
        const isLocal = urlParsed.hostname === location.hostname;
        const onlyLocal = !this.props.features.supportsExternalLinks;
        if (onlyLocal && !isLocal) {
          validState = false;
        }
      } catch (e2) {
        validState = false;
      }
    }
    const link = {
      type: "link",
      href: url,
      thref: tvalue,
      children: [
        STANDARD_TEXT_NODE(this.props.baseI18n.link)
      ]
    };
    if (this.editor.selection && Range.isCollapsed(this.editor.selection)) {
      if (this.state.currentSelectedInlineElement && this.state.currentSelectedInlineElement.type === "link") {
        Transforms.unwrapNodes(this.editor, {
          at: this.state.currentSelectedInlineElementAnchor
        });
      } else {
        Transforms.insertNodes(this.editor, link);
      }
    } else if (this.editor.selection) {
      Transforms.wrapNodes(this.editor, link, {
        match: (v) => Text.isText(v),
        split: true
      });
    } else {
      Transforms.insertNodes(this.editor, link, {
        at: this.getFallbackInsertPath()
      });
    }
    return validState;
  }
  /**
   * Abitrary update, does an arbitrary update for an element or node
   * at the given path
   * @param args an object to update that should be partial of the element rich properties
   * @param anchor the node anchor to update
   */
  set(args, anchor) {
    Transforms.setNodes(this.editor, args, { at: anchor });
  }
  /**
   * Sets the current style for the element
   * @param style the style to be set, this should be a style string
   * @param anchor the element anchor to update
   */
  setStyle(style, anchor) {
    Transforms.setNodes(this.editor, {
      style
    }, { at: anchor });
  }
  /**
   * Sets the template hover style for the element
   * @param style the style to be set, this should be a style string
   * @param anchor the element anchor to update
   */
  setHoverStyle(style, anchor) {
    Transforms.setNodes(this.editor, {
      styleHover: style
    }, { at: anchor });
  }
  /**
   * Sets the active style for the element
   * @param style the style to be set, this should be a style string
   * @param anchor the element anchor to update
   */
  setActiveStyle(style, anchor) {
    Transforms.setNodes(this.editor, {
      styleActive: style
    }, { at: anchor });
  }
  /**
   * Sets the rich classes of the element
   * @param classes an array of string that represent the rich classes
   * @param anchor the element anchor
   */
  setRichClasses(classes, anchor) {
    Transforms.setNodes(this.editor, {
      richClassList: classes
    }, { at: anchor });
  }
  /**
   * Sets a given action for usage within templating
   * as an event listener
   * 
   * Note that using this function is risky if the structure to provide a given
   * key is not understood properly, keys should be valid
   * 
   * @param key the key for the action, should be something like, click, mouseenter, etc...
   * @param value the value for the property
   * @param anchor the anchor for the element that is to be assigned the listener to turn interactive
   */
  setAction(key, value, anchor) {
    Transforms.setNodes(this.editor, {
      [key]: value
    }, { at: anchor });
  }
  /**
   * Sets an UI handler to a given element so that it is ui handled
   * 
   * This is an avanced option for ui handling
   * 
   * normally you would use this function for updating an already inserted
   * ui handled component
   * 
   * @param value the value for the ui handler that should be taken out of the context
   * @param args the args for the ui handler
   * @param anchor the anchor where to insert at
   */
  setUIHandler(value, args, anchor) {
    Transforms.setNodes(this.editor, {
      uiHandler: value,
      uiHandlerArgs: args
    }, { at: anchor });
  }
  /**
   * Sets ui handler args to a given element
   * @param key the ui handler arg key
   * @param value the ui handler arg value
   * @param anchor the anchor in question
   */
  setUIHandlerArg(key, value, anchor) {
    const nodeAtPath = Node.get(this.editor, anchor);
    let newValue = __spreadProps(__spreadValues({}, nodeAtPath.uiHandlerArgs), {
      [key]: value
    });
    if (value === null || value === void 0) {
      delete newValue[key];
    }
    Transforms.setNodes(this.editor, {
      uiHandlerArgs: newValue
    }, { at: anchor });
  }
  /**
   * Inserts an element at a given position
   * @param element the element 
   * @param at an optional position to do it at
   */
  insertElement(element) {
    if (!this.editor.selection) {
      Transforms.insertNodes(this.editor, element, { at: this.getFallbackInsertPath() });
    } else {
      Transforms.insertNodes(this.editor, element);
    }
  }
  /**
   * Sets the context key
   * @param value the value for the new context key
   * @param anchor the anchor where to set the context key at
   */
  setContext(value, anchor) {
    Transforms.setNodes(this.editor, {
      context: value
    }, { at: anchor });
  }
  /**
   * Sets the context key
   * @param value the value for the new if condition key
   * @param anchor the anchor where to set the context key at
   */
  setIfCondition(value, anchor) {
    Transforms.setNodes(this.editor, {
      ifCondition: value
    }, { at: anchor });
  }
  /**
  * Sets the for-each loop key
  * @param value the value for the new context key
  * @param anchor the anchor where to set the context key at
  */
  setForEach(value, anchor) {
    Transforms.setNodes(this.editor, {
      forEach: value
    }, { at: anchor });
  }
  /**
   * Formats the current text as bold
   */
  formatToggle(key) {
    if (this.state.currentText && this.editor.selection && Point.equals(this.editor.selection.anchor, this.editor.selection.focus)) {
      Transforms.insertNodes(
        this.editor,
        __spreadProps(__spreadValues({}, this.state.currentText), {
          text: "",
          [key]: !this.state.currentText[key]
        })
      );
    } else {
      if (this.state.currentText) {
        Transforms.setNodes(
          this.editor,
          { [key]: !this.state.currentText[key] },
          { match: (n3) => Text.isText(n3), split: true }
        );
      } else if (this.state.currentSelectedText) {
        Transforms.setNodes(
          this.editor,
          { [key]: !this.state.currentSelectedText[key] },
          { match: (n3) => Text.isText(n3), at: this.state.currentSelectedBlockElementAnchor, mode: "all" }
        );
      }
    }
  }
  /**
   * This is a helper function that is used in order to extract the available
   * classes that we have for usage within rich classes, container, and customs
   * considering what we have found in the all promise for all what is available
   * because there might be filters for them, and we need to find the labels and whatnot
   * of what we can actually use
   * 
   * @param feature the feature we are searching for basically, supportsCustom, supportsRichClasses and supportsContainers
   * that we decide on whether we support that feature
   * @param featureAll the all name for the feature in the state and where it is located in the state that we are meant to await
   * basically allCustoms, allRichClasses and allContainers
   * @param featureList the list of supported that is given in the feature support of the property so basically
   * supportedCustoms, supportedRichClasses and supportedContainers
   * @param i18nLocation the location for the i18n data in the i18n root, basically custom, containers and rich
   */
  availableFilteringFunction(feature, featureAll, featureList, i18nLocation) {
    return (
      // we pick the feature of the eg. supportsCustom, supportsRichClasses out of the feature support to see
      // if we support that feature at all
      (this.props.features[feature] ? (
        // if we do we pick from the state what we have found in the stylesheet
        // of the classes for that feature as we have awaited
        this.state[featureAll].filter(
          (c) => (
            // and we filter based on our feature list, if we have one of course, otherwise all pass
            this.props.features[featureList] ? this.props.features[featureList].includes(c) : true
          )
        )
      ) : []).map((c) => {
        return {
          value: c,
          label: this.props.baseI18n && this.props.baseI18n[i18nLocation] && // both the default and by replacing
          (this.props.baseI18n[i18nLocation][c] || this.props.baseI18n[i18nLocation][c.replace(/-/g, "_")]) || c
          // and if we find nothing we use the value itself
        };
      })
    );
  }
  /**
   * Triggers on the keydown of the slate editor itself
   * @param e the event
   */
  onKeyDown(e2) {
    if (e2.key === "Enter" && e2.altKey) {
      this.insertSuperbreak(null, e2.shiftKey);
    } else if (e2.key === "z" && e2.ctrlKey && !e2.shiftKey) {
      this.editor.undo();
    } else if (e2.key === "y" && e2.ctrlKey || e2.key === "z" && e2.ctrlKey && e2.shiftKey) {
      this.editor.redo();
    }
  }
  /**
   * Basic old school component did mount
   */
  async componentDidMount() {
    await ALL_PROMISE;
    if (!this.isUnmounted) {
      this.setState({
        allContainers: ALL_CONTAINERS,
        allTables: ALL_TABLES,
        allCustom: ALL_CUSTOM,
        allRichClasses: ALL_RICH_CLASSES
      });
    }
    if (this.props.autoFocus) {
      ReactEditor.focus(this.editor);
      this.forceFocus();
    }
    const editableHTMLElement = this.editableRef.current.childNodes[0];
    EDITOR_POOL.set(editableHTMLElement, this);
  }
  componentDidUpdate(prevProps, prevState, snapshot) {
    if (prevState.currentText && prevState.currentText.text === "") {
      const anchorInCurrent = ReactEditor.findPath(this.editor, prevState.currentText);
      if (anchorInCurrent) {
        try {
          const elementInCurrent = Node.get(this.editor, anchorInCurrent);
          if (elementInCurrent.text === "" && elementInCurrent !== this.state.currentText) {
            this.normalizeNode([this.editor, []]);
          }
        } catch (e2) {
        }
      }
    }
  }
  getState() {
    return this.state;
  }
  /**
   * Sometimes slate leaves a selection behind we need to unselect if such
   * is the case
   */
  componentWillUnmount() {
    this.isUnmounted = true;
    ReactEditor.deselect(this.editor);
    const editableHTMLElement = this.editableRef.current.childNodes[0];
    EDITOR_POOL.delete(editableHTMLElement);
  }
  /**
   * Provides the helpers that are used by the editor
   * to construct rich text data
   */
  getHelpers() {
    const helpers = {
      editor: this.editor,
      Transforms,
      Range,
      ReactEditor,
      HistoryEditor,
      Node,
      Path,
      getContextFor: this.getContextFor,
      getRootContext: this.getRootContext,
      getState: this.getState,
      selectPath: this.selectPath,
      deletePath: this.deletePath,
      movePaths: this.movePaths,
      deleteSelectedNode: this.deleteSelectedNode,
      getPreviousSelectedElementAnchor: this.getPreviousSelectedElementAnchor,
      getPreviousTextAnchor: this.getPreviousTextAnchor,
      focus: this.focus,
      focusAt: this.focusAt,
      insertSuperbreak: this.insertSuperbreak,
      formatToggle: this.formatToggle,
      insertContainer: this.insertContainer,
      insertCustom: this.insertCustom,
      insertFile: this.insertFile,
      insertImage: this.insertImage,
      insertVideo: this.insertVideo,
      updateVideo: this.updateVideo,
      insertTemplateText: this.insertTemplateText,
      updateTemplateText: this.updateTemplateText,
      insertTemplateHTML: this.insertTemplateHTML,
      updateTemplateHTML: this.updateTemplateHTML,
      insertTable: this.insertTable,
      insertTableColumn: this.insertTableColumn,
      insertTableRow: this.insertTableRow,
      toggleTable: this.toggleTable,
      canToggleTable: this.canToggleTable,
      toggleLink: this.toggleLink,
      updateLink: this.updateLink,
      insertList: this.insertList,
      toggleQuote: this.toggleQuote,
      toggleTitle: this.toggleTitle,
      setActiveStyle: this.setActiveStyle,
      setContext: this.setContext,
      setIfCondition: this.setIfCondition,
      setForEach: this.setForEach,
      setHoverStyle: this.setHoverStyle,
      setStyle: this.setStyle,
      set: this.set,
      setRichClasses: this.setRichClasses,
      setAction: this.setAction,
      setUIHandler: this.setUIHandler,
      setUIHandlerArg: this.setUIHandlerArg,
      insertElement: this.insertElement,
      deleteTableColumn: this.deleteTableColumn,
      deleteTableRow: this.deleteTableRow,
      hardBlur: this.hardBlur,
      softBlur: this.softBlur
    };
    return helpers;
  }
  /**
   * Provides the feature support information that is used by the editor
   * to know what it can and can't do
   */
  getFeatureSupport() {
    if (this.props.features === null) {
      return null;
    }
    const availableCustoms = this.availableFilteringFunction("supportsCustom", "allCustom", "supportedCustoms", "richCustoms");
    const availableRichClasses = this.availableFilteringFunction("supportsRichClasses", "allRichClasses", "supportedRichClasses", "richClasses");
    const availableContainers = this.availableFilteringFunction("supportsContainers", "allContainers", "supportedContainers", "richContainers");
    const availableTables = this.availableFilteringFunction("supportsTables", "allTables", "supportedTables", "richTables");
    const newFeatureSupport = __spreadProps(__spreadValues({}, this.props.features), {
      availableContainers,
      availableCustoms,
      availableRichClasses,
      availableTables
    });
    return newFeatureSupport;
  }
  forceFocus() {
    if (!this.state.focused) {
      const path3 = [];
      let current2 = this.editor.children && this.editor.children[0];
      while (current2) {
        path3.push(0);
        current2 = current2.children && current2.children[0];
      }
      this.focusAt({
        anchor: {
          offset: 0,
          path: path3
        },
        focus: {
          offset: 0,
          path: path3
        }
      });
      setTimeout(() => {
        if (!this.state.focused) {
          this.onFocusedChange(path3, this.editor.children);
        }
      }, 20);
    }
  }
  forceBlur() {
    setTimeout(() => {
      if (this.state.focused) {
        this.onBlurredChange(this.editor.children);
      }
    }, 20);
  }
  /**
   * Render function
   */
  render() {
    let children = /* @__PURE__ */ import_react3.default.createElement(
      CurrentElementProvider,
      {
        block: this.state.currentSelectedBlockElement,
        superblocks: this.state.currentSelectedSuperBlockElements || [],
        inline: this.state.currentSelectedInlineElement
      },
      /* @__PURE__ */ import_react3.default.createElement("div", { ref: this.editableRef, style: { display: "contents" }, "data-slate-bug": "true" }, /* @__PURE__ */ import_react3.default.createElement(
        Editable,
        {
          id: this.props.id,
          lang: this.props.lang,
          onKeyDown: this.onKeyDown,
          renderElement: this.renderElement,
          renderLeaf: this.renderText,
          placeholder: this.props.placeholder,
          readOnly: this.props.disabled,
          disabled: this.props.disabled,
          style: { scrollMarginTop: this.props.scrollMarginTop },
          onBlur: this.forceBlur,
          "aria-invalid": !this.props.currentValid,
          "aria-errormessage": this.props.currentValid ? null : this.props.currentGeneralErrorElementId,
          "aria-describedby": this.props.currentDescribedBy,
          "aria-placeholder": this.props.placeholder
        }
      ))
    );
    const Wrapper = this.props.Wrapper;
    if (Wrapper) {
      children = /* @__PURE__ */ import_react3.default.createElement(
        Wrapper,
        __spreadProps(__spreadValues({}, this.props.wrapperArgs), {
          disabled: this.props.disabled,
          state: this.state,
          helpers: this.getHelpers(),
          featureSupport: this.getFeatureSupport(),
          currentLoadError: this.props.currentLoadError,
          dismissCurrentLoadError: this.props.dismissCurrentLoadError,
          ref: this.wrapperRef,
          baseI18n: this.props.baseI18n
        }),
        children
      );
    }
    if (this.props.rootContext && this.props.rootContext.editorArgs && this.props.rootContext.editorArgs.wrapper) {
      children = this.props.rootContext.editorArgs.wrapper(children);
    }
    if (this.state.treeValue.children !== this.editor.children) {
      this.editor.children = this.state.treeValue.children;
    }
    return /* @__PURE__ */ import_react3.default.createElement(
      Slate,
      {
        editor: this.editor,
        value: this.state.treeValue.children,
        onChange: this.onChange
      },
      children
    );
  }
};

// ../editor/slate/wrapper.tsx
var import_react10 = __toESM(require_react());

// ../editor/slate/drawer/index.tsx
var import_react8 = __toESM(require_react());

// ../editor/slate/drawer/general.tsx
var import_react4 = __toESM(require_react());
function DefaultWrapperDrawerInternalPanelWrapper(props) {
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerInternalPanelWrapper" }, props.children);
}
function DefaultWrapperDrawerTextField(props) {
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerTextField" }, /* @__PURE__ */ import_react4.default.createElement("label", null, props.label), /* @__PURE__ */ import_react4.default.createElement(
    "input",
    {
      value: props.value,
      placeholder: props.placeholder || props.label,
      onChange: props.onChangeByEvent,
      disabled: props.disabled
    }
  ));
}
function DefaultWrapperDrawerSelectField(props) {
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerSelectField" }, /* @__PURE__ */ import_react4.default.createElement("label", null, props.label), /* @__PURE__ */ import_react4.default.createElement(
    "select",
    {
      value: props.value,
      onChange: props.onChangeByEvent,
      disabled: props.disabled,
      placeholder: props.placeholder
    },
    props.options.map((option) => /* @__PURE__ */ import_react4.default.createElement("option", { key: option.value, value: option.value }, typeof option.label === "string" ? option.label : option.value))
  ));
}
function DefaultWrapperDrawerMultiSelectField(props) {
  const handleSelectChange = (0, import_react4.useCallback)((e2) => {
    const selectedOptions = Array.from(e2.target.selectedOptions, (option) => option.value);
    props.onChange(selectedOptions);
  }, []);
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerMultiSelectField" }, /* @__PURE__ */ import_react4.default.createElement("label", null, props.label), /* @__PURE__ */ import_react4.default.createElement(
    "select",
    {
      multiple: true,
      value: props.values,
      onChange: handleSelectChange,
      disabled: props.disabled
    },
    props.options.map((option) => /* @__PURE__ */ import_react4.default.createElement("option", { key: option.value, value: option.value }, typeof option.label === "string" ? option.label : option.value))
  ));
}
function DefaultWrapperDrawerCheckBoxField(props) {
  const handleChange = (event) => {
    const newValue = event.target.checked;
    props.onChange(newValue);
  };
  return /* @__PURE__ */ import_react4.default.createElement("div", { className: "slateEditorWrapperDrawerCheckBoxField" }, /* @__PURE__ */ import_react4.default.createElement(
    "input",
    {
      type: "checkbox",
      checked: props.value,
      onChange: handleChange,
      disabled: props.disabled
    }
  ), /* @__PURE__ */ import_react4.default.createElement("label", null, props.label));
}
function GeneralOptions(props) {
  const [name, setName] = (0, import_react4.useState)(props.state.currentSelectedElement && props.state.currentSelectedElement.givenName || "");
  (0, import_react4.useEffect)(() => {
    setName(props.state.currentSelectedElement && props.state.currentSelectedElement.givenName || "");
  }, [props.state.currentSelectedElement]);
  const lastUpdateRef = (0, import_react4.useRef)();
  const updateNameB = (0, import_react4.useCallback)((v) => {
    setName(v);
    clearTimeout(lastUpdateRef.current);
    lastUpdateRef.current = setTimeout(() => {
      props.helpers.set({
        givenName: v
      }, props.state.currentSelectedElementAnchor);
    }, 600);
  }, [props.state.currentSelectedElement]);
  const updateName = (0, import_react4.useCallback)((e2) => {
    updateNameB(e2.target.value);
  }, [updateNameB]);
  if (!props.state.currentSelectedElement) {
    return null;
  }
  const WrapperDrawerInternalPanelWrapper = props.WrapperDrawerInternalPanelWrapper || DefaultWrapperDrawerInternalPanelWrapper;
  const WrapperDrawerTextField = props.WrapperDrawerTextField || DefaultWrapperDrawerTextField;
  return /* @__PURE__ */ import_react4.default.createElement(WrapperDrawerInternalPanelWrapper, null, /* @__PURE__ */ import_react4.default.createElement(
    WrapperDrawerTextField,
    {
      value: name,
      label: props.baseI18n.name,
      onChangeByEvent: updateName,
      onChangeByValue: updateNameB,
      id: "name"
    }
  ), props.drawerExtras ? props.drawerExtras.map((v, i2) => {
    const Element4 = v.Component;
    return /* @__PURE__ */ import_react4.default.createElement(Element4, __spreadValues({ key: v.key || i2 }, props));
  }) : null);
}

// ../editor/slate/drawer/styles.tsx
var import_react5 = __toESM(require_react());
var import_deep_equal3 = __toESM(require_deep_equal());
var SingleStyle = class extends import_react5.default.PureComponent {
  /**
   * We need the derived function in order to be able to update the value of the
   * selector in case, this is the more efficient way in these cases where things
   * are slightly out of sync
   */
  static getDerivedStateFromProps(props, state) {
    if ((props.styleValue || "") !== state.value && !Path.equals(props.anchor, state.valueForAnchor)) {
      return {
        value: props.styleValue || "",
        valueForAnchor: props.anchor
      };
    }
    return null;
  }
  /**
   * Constructs the element that provides an input for active, hover and the standard
   * @param props 
   */
  constructor(props) {
    super(props);
    this.onStyleChange = this.onStyleChange.bind(this);
    this.onStyleChangeB = this.onStyleChangeB.bind(this);
    this.state = {
      value: props.styleValue || "",
      valueForAnchor: props.anchor
    };
  }
  /**
   * Triggers each time the input for the style changes
   * @param e the change event in question
   */
  onStyleChange(e2) {
    this.onStyleChangeB(e2.target.value);
  }
  /**
   * Triggers each time the input for the style changes
   * @param e the change event in question
   */
  onStyleChangeB(newValue = null) {
    this.setState({
      value: newValue || "",
      valueForAnchor: this.props.anchor
    });
    this.props.onChange(newValue, this.props.anchor);
  }
  /**
   * The standard render function
   */
  render() {
    const TextField = this.props.TextField || DefaultWrapperDrawerTextField;
    return /* @__PURE__ */ import_react5.default.createElement(
      TextField,
      {
        value: this.state.value,
        onChangeByValue: this.onStyleChangeB,
        onChangeByEvent: this.onStyleChange,
        label: this.props.name,
        id: this.props.id
      }
    );
  }
};
var ClassesOptionSelector = class extends import_react5.default.PureComponent {
  /**
   * We need the derived function in order to be able to update the value of the
   * selector in case, this is the more efficient way in these cases where things
   * are slightly out of sync
   */
  static getDerivedStateFromProps(props, state) {
    const selectedNode = props.state.currentSelectedElement;
    const time2 = (/* @__PURE__ */ new Date()).getTime();
    if (!(0, import_deep_equal3.default)(selectedNode.richClassList || [], state.value, { strict: true }) && (!Path.equals(props.state.currentSelectedElementAnchor, state.valueForAnchor) || time2 - state.valueLastTimeRequestedUpdate > 300)) {
      return {
        value: selectedNode.richClassList || [],
        valueForAnchor: props.state.currentSelectedElementAnchor
      };
    }
    return null;
  }
  /**
   * constructs a new class selector for rich classes
   * @param props the entire material ui slate wrapper props that the wrapper takes
   */
  constructor(props) {
    super(props);
    const selectedNode = props.state.currentSelectedElement;
    this.state = {
      value: selectedNode.richClassList || [],
      valueForAnchor: props.state.currentSelectedElementAnchor,
      valueLastTimeRequestedUpdate: 0
    };
    this.onRichClassListChange = this.onRichClassListChange.bind(this);
  }
  /**
   * Triggers when the select field changes and receives a new value
   * @param e the change event
   */
  onRichClassListChange(newValue = []) {
    this.setState({
      value: newValue,
      valueForAnchor: this.props.state.currentSelectedElementAnchor,
      valueLastTimeRequestedUpdate: (/* @__PURE__ */ new Date()).getTime()
    }, () => {
      if (newValue.length === 0) {
        newValue = null;
      }
      this.props.helpers.setRichClasses(newValue, this.props.state.currentSelectedElementAnchor);
    });
  }
  unblur() {
    document.body.dataset.unblur = "true";
  }
  resetBlur() {
    delete document.body.dataset.unblur;
  }
  /**
   * The render function that creates the multiselect
   */
  render() {
    const MultiSelector = this.props.WrapperDrawerMultiSelectField || DefaultWrapperDrawerMultiSelectField;
    return /* @__PURE__ */ import_react5.default.createElement(
      MultiSelector,
      {
        id: "rich-class",
        label: this.props.baseI18n.classes,
        onChange: this.onRichClassListChange,
        options: this.props.featureSupport.availableRichClasses.map((element) => ({
          label: element.label,
          value: element.value
        })),
        resetBlur: this.resetBlur,
        unblur: this.unblur,
        values: this.state.value
      }
    );
  }
};
function StylesOptions(props) {
  const setStandalone = (0, import_react5.useCallback)((v) => {
    props.helpers.set({
      standalone: v
    }, props.state.currentSelectedElementAnchor);
  }, []);
  if (!props.state.currentSelectedElement) {
    return null;
  }
  const CheckboxField = props.WrapperDrawerCheckboxField || DefaultWrapperDrawerCheckBoxField;
  const imgStandalone = props.state.currentSelectedElement.type === "image" ? /* @__PURE__ */ import_react5.default.createElement(
    CheckboxField,
    {
      onChange: setStandalone,
      id: "image-standalone",
      label: props.baseI18n.standalone,
      value: props.state.currentSelectedElement.standalone
    }
  ) : null;
  const currentNode = props.state.currentSelectedElement;
  const WrapperDrawerInternalPanelWrapper = props.WrapperDrawerInternalPanelWrapper || DefaultWrapperDrawerInternalPanelWrapper;
  return /* @__PURE__ */ import_react5.default.createElement(WrapperDrawerInternalPanelWrapper, null, imgStandalone, props.featureSupport.supportsRichClasses ? /* @__PURE__ */ import_react5.default.createElement(
    ClassesOptionSelector,
    __spreadValues({}, props)
  ) : null, props.featureSupport.supportsCustomStyles ? /* @__PURE__ */ import_react5.default.createElement(
    SingleStyle,
    {
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setStyle,
      name: props.baseI18n.style,
      styleValue: currentNode.style,
      TextField: props.WrapperDrawerTextField,
      id: "style"
    }
  ) : null, props.featureSupport.supportsCustomStyles && props.featureSupport.supportsTemplating ? /* @__PURE__ */ import_react5.default.createElement(
    SingleStyle,
    {
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setHoverStyle,
      name: props.baseI18n.styleHover,
      styleValue: currentNode.styleHover,
      TextField: props.WrapperDrawerTextField,
      id: "style-hover"
    }
  ) : null, props.featureSupport.supportsCustomStyles && props.featureSupport.supportsTemplating ? /* @__PURE__ */ import_react5.default.createElement(
    SingleStyle,
    {
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setActiveStyle,
      name: props.baseI18n.styleActive,
      styleValue: currentNode.styleActive,
      TextField: props.WrapperDrawerTextField,
      id: "style-active"
    }
  ) : null);
}

// ../editor/slate/drawer/actions.tsx
var import_react6 = __toESM(require_react());
var EVENTS = [
  "click",
  "blur",
  "focus",
  "input",
  "keydown",
  "keypress",
  "keyup",
  "mousedown",
  "mouseenter",
  "mouseleave",
  "mousemove",
  "mouseover",
  "mouseout",
  "mouseup",
  "mousewheel",
  "touchstart",
  "touchmove",
  "touchend",
  "touchcancel",
  "wheel"
];
var SingleAction = class extends import_react6.default.PureComponent {
  /**
   * We need the derived function in order to be able to update the value of the
   * selector in case, this is the more efficient way in these cases where things
   * are slightly out of sync
   */
  static getDerivedStateFromProps(props, state) {
    const time2 = (/* @__PURE__ */ new Date()).getTime();
    if ((props.actionValue || "") !== state.value && (!Path.equals(props.anchor, state.valueForAnchor) || time2 - state.valueLastTimeRequestedUpdate > 300)) {
      return {
        value: props.actionValue || "",
        valueForAnchor: props.anchor
      };
    }
    return null;
  }
  /**
   * constructs a new SingleAction instance
   * @param props the props
   */
  constructor(props) {
    super(props);
    this.onActionValueChange = this.onActionValueChange.bind(this);
    this.onDirectChange = this.onDirectChange.bind(this);
    this.state = {
      value: props.actionValue || "",
      valueForAnchor: props.anchor,
      valueLastTimeRequestedUpdate: 0
    };
  }
  /**
   * Triggers when the selector value has changed to something else
   * @param e the change event
   */
  onActionValueChange(e2) {
    this.onDirectChange(e2.target.value);
  }
  onDirectChange(newValue = null) {
    this.setState({
      value: newValue || "",
      valueForAnchor: this.props.anchor,
      valueLastTimeRequestedUpdate: (/* @__PURE__ */ new Date()).getTime()
    });
    this.props.onChange(this.props.name, newValue, this.props.anchor);
  }
  unblur() {
    document.body.dataset.unblur = "true";
  }
  resetBlur() {
    delete document.body.dataset.unblur;
  }
  /**
   * The render function for the component
   */
  render() {
    const SelectField = this.props.SelectField || DefaultWrapperDrawerSelectField;
    return /* @__PURE__ */ import_react6.default.createElement(
      SelectField,
      {
        id: this.props.id,
        label: this.props.name,
        onChangeByEvent: this.onActionValueChange,
        onChangeByValue: this.onDirectChange,
        options: this.props.options,
        resetBlur: this.resetBlur,
        unblur: this.unblur,
        value: this.state.value,
        displayEmpty: true
      }
    );
  }
};
function ActionsOptions(props) {
  const currentNode = props.state.currentSelectedInlineElement || props.state.currentSelectedBlockElement || props.state.currentSelectedSuperBlockElements && props.state.currentSelectedSuperBlockElements[props.state.currentSelectedSuperBlockElements.length - 1];
  const currentNodeContext = props.state.currentSelectedInlineContext || props.state.currentSelectedBlockContext || props.state.currentSelectedTopmostSuperBlockContext;
  const currentNodeAnchor = props.state.currentSelectedInlineElementAnchor || props.state.currentSelectedBlockElementAnchor || props.state.currentSelectedSuperBlockElementAnchors && props.state.currentSelectedSuperBlockElementAnchors[props.state.currentSelectedSuperBlockElementAnchors.length - 1];
  let allOptions = currentNodeContext ? Object.keys(currentNodeContext.properties).map((p) => {
    const value = currentNodeContext.properties[p];
    if (value.type !== "function") {
      return null;
    }
    return {
      value: p,
      label: typeof value.label === "function" ? value.label() : value.label,
      primary: props.state.currentRootContext !== currentNodeContext
    };
  }).filter((v) => !!v) : [];
  if (props.state.currentRootContext !== currentNodeContext) {
    allOptions = allOptions.concat(Object.keys(props.state.currentRootContext.properties).map((p) => {
      const value = props.state.currentRootContext.properties[p];
      if (value.nonRootInheritable) {
        return null;
      }
      if (value.type !== "function") {
        return null;
      }
      return {
        value: p,
        label: typeof value.label === "function" ? value.label() : value.label,
        primary: false
      };
    }).filter((v) => !!v));
  }
  if (allOptions) {
    allOptions = [{
      value: "",
      label: " - ",
      primary: false
    }].concat(allOptions);
  }
  ;
  const WrapperDrawerInternalPanelWrapper = props.WrapperDrawerInternalPanelWrapper || DefaultWrapperDrawerInternalPanelWrapper;
  return /* @__PURE__ */ import_react6.default.createElement(WrapperDrawerInternalPanelWrapper, null, EVENTS.map((v, index) => /* @__PURE__ */ import_react6.default.createElement(
    SingleAction,
    {
      key: v,
      name: v,
      actionValue: currentNode[v] || null,
      options: allOptions,
      anchor: currentNodeAnchor,
      onChange: props.helpers.setAction,
      groupIndex: index,
      id: "action-" + v,
      SelectField: props.WrapperDrawerSelectField
    }
  )));
}

// ../editor/slate/drawer/templating.tsx
var import_react7 = __toESM(require_react());
var SingleTemplatingElement = class extends import_react7.default.PureComponent {
  /**
   * We need the derived function in order to be able to update the value of the
   * selector in case, this is the more efficient way in these cases where things
   * are slightly out of sync
   */
  static getDerivedStateFromProps(props, state) {
    const time2 = (/* @__PURE__ */ new Date()).getTime();
    if ((props.value || "") !== state.value && (!Path.equals(props.anchor, state.valueForAnchor) || time2 - state.valueLastTimeRequestedUpdate > 300)) {
      return {
        value: props.value || "",
        valueForAnchor: props.anchor
      };
    }
    return null;
  }
  /**
   * Construct a brand new templating element that provides a selector
   * @param props the props
   */
  constructor(props) {
    super(props);
    this.onChange = this.onChange.bind(this);
    this.onChangeByEvent = this.onChangeByEvent.bind(this);
    this.state = {
      value: props.value || "",
      valueForAnchor: props.anchor,
      valueLastTimeRequestedUpdate: 0
    };
  }
  /**
   * This function triggers once the selection has changed
   * in the field
   * @param e the change event
   */
  onChange(newValue) {
    this.setState({
      value: newValue || "",
      valueForAnchor: this.props.anchor,
      valueLastTimeRequestedUpdate: (/* @__PURE__ */ new Date()).getTime()
    });
    this.props.onChange(newValue, this.props.anchor);
  }
  /**
  * This function triggers once the selection has changed
  * in the field
  * @param e the change event
  */
  onChangeByEvent(e2) {
    const newValue = e2.target.value || null;
    this.onChange(newValue);
  }
  unblur() {
    document.body.dataset.unblur = "true";
  }
  resetBlur() {
    delete document.body.dataset.unblur;
  }
  /**
   * The render function
   */
  render() {
    const SelectField = this.props.SelectField || DefaultWrapperDrawerSelectField;
    return /* @__PURE__ */ import_react7.default.createElement(
      SelectField,
      {
        label: this.props.i18nName,
        onChangeByEvent: this.onChangeByEvent,
        onChangeByValue: this.onChange,
        options: this.props.options,
        resetBlur: this.resetBlur,
        unblur: this.unblur,
        value: this.state.value,
        id: this.props.id,
        displayEmpty: true
      }
    );
  }
};
function DefaultDrawerTemplatingContainerBox(props) {
  return /* @__PURE__ */ import_react7.default.createElement("div", { className: "staleEditorDrawerTemplatingContainerBox" }, props.children);
}
function TemplatingOptions(props) {
  const currentNode = props.state.currentSelectedElement;
  const allEachContexts = [
    {
      label: " - ",
      value: ""
    }
  ];
  const allContexts = [
    {
      label: " - ",
      value: ""
    }
  ];
  const allIfConditions = [
    {
      label: " - ",
      value: ""
    }
  ];
  const currentSelectElementForSelectContext = getContextFor(
    props.state.currentSelectedElementAnchor,
    "select-context",
    props.state.treeValue,
    props.state.currentRootContext
  );
  if (currentSelectElementForSelectContext) {
    Object.keys(currentSelectElementForSelectContext.properties).forEach((p) => {
      const value = currentSelectElementForSelectContext.properties[p];
      if (value.type !== "context" || value.loopable) {
        return null;
      }
      const option = {
        value: p,
        label: typeof value.label === "function" ? value.label() : value.label
      };
      allContexts.push(option);
    });
  }
  const currentSelectElementForEachContext = getContextFor(
    props.state.currentSelectedElementAnchor,
    "select-loop",
    props.state.treeValue,
    props.state.currentRootContext
  );
  if (currentSelectElementForEachContext) {
    Object.keys(currentSelectElementForEachContext.properties).forEach((p) => {
      const value = currentSelectElementForEachContext.properties[p];
      const isValidForBoolean = value.type === "boolean";
      const isValidForLoop = value.type === "context" && value.loopable;
      if (!isValidForBoolean && !isValidForLoop) {
        return null;
      }
      const option = {
        value: p,
        label: typeof value.label === "function" ? value.label() : value.label
      };
      if (isValidForBoolean) {
        allIfConditions.push(option);
      } else {
        allEachContexts.push(option);
      }
    });
  }
  if (currentNode.forEach) {
    const eachFound = allEachContexts.find((v) => v.value === currentNode.forEach);
    if (!eachFound) {
      allEachContexts.push({
        value: currentNode.forEach,
        label: currentNode.forEach
      });
    }
  }
  if (currentNode.context) {
    const contextFound = allContexts.find((v) => v.value === currentNode.context);
    if (!contextFound) {
      allContexts.push({
        value: currentNode.context,
        label: currentNode.context
      });
    }
  }
  if (currentNode.ifCondition) {
    const ifConditionFound = allIfConditions.find((v) => v.value === currentNode.ifCondition);
    if (!ifConditionFound) {
      allEachContexts.push({
        value: currentNode.ifCondition,
        label: currentNode.ifCondition
      });
    }
  }
  const DrawerTemplatingContainerBox = props.DrawerTemplatingContainerBox || DefaultDrawerTemplatingContainerBox;
  return /* @__PURE__ */ import_react7.default.createElement(DrawerTemplatingContainerBox, null, /* @__PURE__ */ import_react7.default.createElement(
    SingleTemplatingElement,
    {
      name: "context",
      i18nName: props.baseI18n.context,
      value: currentNode.context || null,
      options: allContexts,
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setContext,
      SelectField: props.WrapperDrawerSelectField,
      id: "render-context"
    }
  ), /* @__PURE__ */ import_react7.default.createElement(
    SingleTemplatingElement,
    {
      name: "if",
      i18nName: props.baseI18n.renderCondition,
      value: currentNode.ifCondition || null,
      options: allIfConditions,
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setIfCondition,
      SelectField: props.WrapperDrawerSelectField,
      id: "render-if"
    }
  ), /* @__PURE__ */ import_react7.default.createElement(
    SingleTemplatingElement,
    {
      name: "each",
      i18nName: props.baseI18n.each,
      value: currentNode.forEach || null,
      options: allEachContexts,
      anchor: props.state.currentSelectedElementAnchor,
      onChange: props.helpers.setForEach,
      SelectField: props.WrapperDrawerSelectField,
      id: "render-for-each"
    }
  ));
}

// ../editor/slate/drawer/index.tsx
function DefaultWrapperDrawerElementTitle(props) {
  return /* @__PURE__ */ import_react8.default.createElement("h6", null, props.info.isInteractive ? /* @__PURE__ */ import_react8.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconRtlOnly" }, String.fromCharCode(9094)) : null, /* @__PURE__ */ import_react8.default.createElement(
    "span",
    {
      className: props.isCurrent ? "slateEditorWrapperDrawerElementTitleSelected" : "slateEditorWrapperDrawerElementTitle",
      role: "button",
      "aria-current": props.isCurrent,
      onClick: props.onSelect
    },
    props.info.name
  ), props.info.isInteractive ? /* @__PURE__ */ import_react8.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconLtrOnly" }, String.fromCharCode(9094)) : null, props.isCurrent ? null : /* @__PURE__ */ import_react8.default.createElement(import_react8.default.Fragment, null, /* @__PURE__ */ import_react8.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconLtrOnly" }, String.fromCharCode(11106)), /* @__PURE__ */ import_react8.default.createElement("span", { className: "slateEditorWrapperDrawerElementTitleIconRtlOnly" }, String.fromCharCode(11106))));
}
function DefaultWrapperDrawerElementTitleWrapper(props) {
  return /* @__PURE__ */ import_react8.default.createElement("div", { className: "slateEditorWrapperDrawerElementTitleWrapper" }, props.children);
}
function DefaultWrapperDrawerInfoPanelWrapper(props) {
  return props.children;
}
function DefaultWrapperDrawerTabs(props) {
  return /* @__PURE__ */ import_react8.default.createElement("div", { className: "slateEditorWrapperDrawerTabs" }, props.options.map((v) => /* @__PURE__ */ import_react8.default.createElement(
    "button",
    {
      onClick: props.setSelectedOption.bind(null, v.id),
      key: v.id,
      className: props.selectedOption === v.id ? "slateEditorWrapperDrawerTabSelected" : "slateEditorWrapperDrawerTab"
    },
    v.label
  )));
}
function WrapperDrawer(props) {
  const [location2, setLocation] = (0, import_react8.useState)(localStorage.getItem("SLATE_DRAWER_LAST_LOCATION") || "MAIN");
  const [accessibilitySelectedOption, useAccessibilitySelectedOption] = (0, import_react8.useState)(null);
  (0, import_react8.useEffect)(() => {
    if (!props.drawerOpen) {
      useAccessibilitySelectedOption(null);
    }
  }, [props.drawerOpen]);
  const setLocationCallback = (0, import_react8.useCallback)((value) => {
    localStorage.setItem("SLATE_DRAWER_LAST_LOCATION", value);
    useAccessibilitySelectedOption(value);
    setLocation(value);
  }, []);
  let settingsForNode = null;
  let titleForNode = null;
  if (props.state.currentSelectedElement) {
    let infoPanel = null;
    switch (location2) {
      case "MAIN":
        infoPanel = /* @__PURE__ */ import_react8.default.createElement(GeneralOptions, __spreadValues({}, props));
        break;
      case "STYLES":
        infoPanel = /* @__PURE__ */ import_react8.default.createElement(StylesOptions, __spreadValues({}, props));
        break;
      case "ACTIONS":
        infoPanel = /* @__PURE__ */ import_react8.default.createElement(ActionsOptions, __spreadValues({}, props));
        break;
      case "TEMPLATING":
        infoPanel = /* @__PURE__ */ import_react8.default.createElement(TemplatingOptions, __spreadValues({}, props));
        break;
    }
    const selectedNodeInfo = getInfoFor(
      props.state.currentSelectedElement,
      props.baseI18n
    );
    const potentialBlockParent = props.state.currentSelectedElement === props.state.currentSelectedInlineElement ? getInfoFor(
      props.state.currentSelectedBlockElement,
      props.baseI18n
    ) : null;
    const superBlockPaths = (props.state.currentSelectedSuperBlockElements || []).filter((e2) => e2 !== props.state.currentSelectedElement).map((v, index) => {
      return {
        info: getInfoFor(v, props.baseI18n),
        path: props.state.currentSelectedSuperBlockElementAnchors[index]
      };
    });
    const entirePath = superBlockPaths;
    if (potentialBlockParent) {
      entirePath.push({
        info: potentialBlockParent,
        path: props.state.currentSelectedBlockElementAnchor
      });
    }
    entirePath.push({
      info: selectedNodeInfo,
      path: props.state.currentSelectedElementAnchor
    });
    const WrapperDrawerElementTitle = props.WrapperDrawerElementTitle || DefaultWrapperDrawerElementTitle;
    titleForNode = entirePath.map((v, i2) => {
      return /* @__PURE__ */ import_react8.default.createElement(
        WrapperDrawerElementTitle,
        {
          entirePath,
          info: v.info,
          isCurrent: i2 === entirePath.length - 1,
          key: i2,
          index: i2,
          onSelect: i2 === entirePath.length - 1 ? null : props.helpers.selectPath.bind(null, v.path)
        }
      );
    });
    const WrapperDrawerInfoPanelWrapper = props.WrapperDrawerInfoPanelWrapper || DefaultWrapperDrawerInfoPanelWrapper;
    const WrapperDrawerTabs = props.WrapperDrawerTabs || DefaultWrapperDrawerTabs;
    settingsForNode = /* @__PURE__ */ import_react8.default.createElement(import_react8.default.Fragment, null, !selectedNodeInfo.isText ? /* @__PURE__ */ import_react8.default.createElement(
      WrapperDrawerTabs,
      {
        accessibilitySelectedOption,
        selectedOption: location2,
        setSelectedOption: setLocationCallback,
        setAccessibilitySelectedOption: useAccessibilitySelectedOption,
        options: [
          {
            id: "MAIN",
            label: props.baseI18n.settings
          },
          props.featureSupport.supportsCustomStyles || props.featureSupport.supportsRichClasses ? {
            id: "STYLES",
            label: props.baseI18n.styles
          } : null,
          props.featureSupport.supportsTemplating ? {
            id: "TEMPLATING",
            label: props.baseI18n.templating
          } : null,
          props.featureSupport.supportsTemplating ? {
            id: "ACTIONS",
            label: props.baseI18n.actions
          } : null
        ].filter((v) => !!v)
      }
    ) : null, /* @__PURE__ */ import_react8.default.createElement(
      WrapperDrawerInfoPanelWrapper,
      {
        accessibilitySelectedOption,
        selectedOption: location2,
        setSelectedOption: setLocationCallback,
        setAccessibilitySelectedOption: useAccessibilitySelectedOption
      },
      infoPanel
    ));
  }
  const WrapperForTitle = props.WrapperDrawerElementTitleWrapper || DefaultWrapperDrawerElementTitleWrapper;
  return /* @__PURE__ */ import_react8.default.createElement(import_react8.default.Fragment, null, /* @__PURE__ */ import_react8.default.createElement(WrapperForTitle, null, titleForNode), settingsForNode, props.drawerExtraChildren);
}

// ../editor/slate/dialogs/file.tsx
var import_react9 = __toESM(require_react());
var import_react_dom2 = __toESM(require_react_dom());
function DefaultDialog(props) {
  if (!props.open) {
    return null;
  }
  const dialog = /* @__PURE__ */ import_react9.default.createElement("div", { className: "slateEditorDialogBackdrop" }, /* @__PURE__ */ import_react9.default.createElement("div", { className: "slateEditorDialog" }, /* @__PURE__ */ import_react9.default.createElement("div", { className: "slateEditorDialogTitle" }, props.title), /* @__PURE__ */ import_react9.default.createElement("div", { className: "slateEditorDialogContent" }, props.children), /* @__PURE__ */ import_react9.default.createElement("div", { className: "slateEditorButtons" }, props.buttons.map((v) => /* @__PURE__ */ import_react9.default.createElement("button", { key: v.action, onClick: v.onClick }, v.label)))));
  return import_react_dom2.default.createPortal(dialog, document.body);
}
var FileLoadErrorDialog = class extends import_react9.default.PureComponent {
  constructor(props) {
    super(props);
    this.onClose = this.onClose.bind(this);
  }
  onClose() {
    this.props.dismissCurrentLoadError();
  }
  /**
   * The render function
   */
  render() {
    const Dialog = this.props.Dialog || DefaultDialog;
    return /* @__PURE__ */ import_react9.default.createElement(
      Dialog,
      {
        open: !!this.props.currentLoadError,
        onClose: this.onClose,
        title: this.props.i18nGenericError,
        buttons: [
          {
            label: this.props.i18nOk,
            onClick: this.props.dismissCurrentLoadError,
            action: "primary"
          }
        ]
      },
      this.props.currentLoadError
    );
  }
};

// ../editor/slate/wrapper.tsx
var import_react_dom3 = __toESM(require_react_dom());
var defaultWrapperI18nRichInfoEnglish = __spreadProps(__spreadValues({}, defaultBaseI18nRichInfoEnglish), {
  formatAddContainerLabel: "add container",
  addTemplateHTML: {
    label: "select a template",
    placeholder: "select a template",
    submit: "ok",
    title: "add template html"
  },
  addTemplateText: {
    label: "select a template",
    placeholder: "select a template",
    submit: "ok",
    title: "add template text"
  },
  formatAddCustomLabel: "add custom",
  formatAddFileLabel: "add file",
  formatAddImageLabel: "add image",
  formatAddTableLabel: "add table",
  formatAddTbodyLabel: "add table body",
  formatAddTdLabel: "add table column",
  formatAddTemplateHTML: "add template html",
  formatAddTemplateText: "add template text",
  formatAddTfootLabel: "toggle table foot",
  formatAddTheadLabel: "add table head",
  formatAddThLabel: "toggle table header",
  formatAddTrLabel: "add table row",
  formatAddVideoLabel: "add table video",
  formatBoldLabel: "bold",
  formatDeleteElement: "delete",
  formatDelTdLabel: "delete table column",
  formatDelThLabel: "delete table header column",
  formatDelTrLabel: "delete table row",
  formatItalicLabel: "italic",
  formatLinkLabel: "link",
  formatListBulletedLabel: "bulleted list",
  formatListNumberedLabel: "numbered list",
  formatMakeLoop: "make loop",
  formatMore: "more",
  formatQuoteLabel: "quote",
  formatSetActiveStyleLabel: "active style",
  formatSetClassLabel: "class names",
  formatSetContext: "set context",
  formatSetEventHandlers: "set event handlers",
  formatSetHoverStyleLabel: "hover style",
  formatSetRenderCondition: "set render condition",
  formatSetStyleLabel: "set style",
  formatSetUIHandlerArgLabel: "set ui handler arg",
  formatSetUIHandlerArgName: "set ui handler arg name",
  formatSetUIHandlerArgValue: "set ui handler arg value",
  formatSetUIHandlerLabel: "set ui handler",
  formatTitleLabel: "title",
  formatUnderlineLabel: "underline",
  loadVideo: {
    invalid: "invalid url",
    label: "youtube and vimeo only",
    placeholder: "https://youtube.com/...",
    submit: "insert",
    title: "insert a video"
  },
  setLink: {
    invalid: "invalid link",
    label: "url",
    placeholder: "https://url",
    placeholderLocalOnly: "./local-url-only",
    submit: "ok",
    templated: "or select one of these template values",
    templatedLabel: "template value",
    templatedPlaceholder: "template value",
    templatedUnspecified: "unspecified",
    title: "insert a link,"
  },
  genericError: "error",
  ok: "ok"
});
function callFn(focusFn, actionFn, ...args) {
  focusFn();
  actionFn(...args);
}
function DefaultEditorContainer(props) {
  return /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorDefaultEditorContainer" }, props.children);
}
var DefaultToolbar = import_react10.default.forwardRef((props, ref) => {
  return /* @__PURE__ */ import_react10.default.createElement("div", __spreadProps(__spreadValues({ className: "slateEditorToolbar" }, props.props), { ref }), /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorToolbarInternal" }, props.toolbarContents, props.customChildren, /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorToolbarInternalSpacer" }), props.drawerButton));
});
function DefaultToolbarButtonComponent(props) {
  return /* @__PURE__ */ import_react10.default.createElement(
    "button",
    {
      className: "slateEditorToolbarButton " + (props.selected ? " selected" : ""),
      title: props.title,
      disabled: props.disabled,
      onClick: props.onClick,
      dangerouslySetInnerHTML: { __html: props.htmlEntity + (typeof props.count === "number" ? " (" + props.count + ")" : "") }
    }
  );
}
function Bold(props) {
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  const disabled = !props.state.currentSelectedText || !props.state.allowsText;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatBoldLabel,
      disabled,
      selected: props.state.currentSelectedText && props.state.currentSelectedText.bold,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.formatToggle, "bold"),
      htmlEntity: "\u{1D401}",
      type: "bold",
      disjointedMode: props.disjointedMode
    }
  );
}
function Italic(props) {
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  const disabled = !props.state.currentSelectedText || !props.state.allowsText;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatItalicLabel,
      disabled,
      selected: props.state.currentSelectedText && props.state.currentSelectedText.italic,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.formatToggle, "italic"),
      htmlEntity: "\u{1D470}",
      type: "italic",
      disjointedMode: props.disjointedMode
    }
  );
}
function Underline(props) {
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  const disabled = !props.state.currentSelectedText || !props.state.allowsText;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatUnderlineLabel,
      disabled,
      selected: props.state.currentSelectedText && props.state.currentSelectedText.underline,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.formatToggle, "underline"),
      htmlEntity: "\u1E48",
      type: "underline",
      disjointedMode: props.disjointedMode
    }
  );
}
function VDivider(props) {
  if (props.ToolbarVDivider) {
    const RealDivider = props.ToolbarVDivider;
    return /* @__PURE__ */ import_react10.default.createElement(RealDivider, null);
  }
  return /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorVdivider" });
}
function HDivider(props) {
  if (props.ToolbarHDivider) {
    const RealDivider = props.ToolbarHDivider;
    return /* @__PURE__ */ import_react10.default.createElement(RealDivider, null);
  }
  return /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, null, /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorHdividerspacer" }), /* @__PURE__ */ import_react10.default.createElement("div", { className: "slateEditorHdivider" }));
}
function Link(props) {
  if (!props.featureSupport.supportsLinks || !props.isReady) {
    return null;
  }
  let templateLinkAmount = 0;
  if (props.featureSupport.supportsTemplating && props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentSelectedBlockContext.properties).forEach((key) => {
      const property = props.state.currentSelectedBlockContext.properties[key];
      if (property.type === "link") {
        templateLinkAmount++;
      }
    });
  }
  if (props.featureSupport.supportsTemplating && props.state.currentRootContext && props.state.currentRootContext !== props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentRootContext.properties).forEach((key) => {
      const property = props.state.currentRootContext.properties[key];
      if (property.nonRootInheritable) {
        return;
      }
      if (property.type === "link") {
        templateLinkAmount++;
      }
    });
  }
  const disabled = !props.state.allowsInsertElement({ type: "link", href: "", children: [], thref: null });
  const selected = props.helpers.editor.selection && props.helpers.Range.isCollapsed(props.helpers.editor.selection) && props.state.currentSelectedInlineElement && props.state.currentSelectedInlineElement.type === "link";
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatLinkLabel,
      selected,
      disabled,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.toggleLink, null, null),
      count: templateLinkAmount === 0 ? null : templateLinkAmount,
      htmlEntity: "\u{1F517}",
      type: "link",
      disjointedMode: props.disjointedMode
    }
  );
}
function Title(props) {
  if (!props.featureSupport.supportsTitle) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "title", titleType: "h1", children: [] }, { collapsed: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatTitleLabel,
      disabled,
      selected: props.state.currentSelectedBlockElement && props.state.currentSelectedBlockElement.type === "title",
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.toggleTitle, "h1"),
      htmlEntity: "\u{1D413}",
      type: "title",
      disjointedMode: props.disjointedMode
    }
  );
}
function Quote(props) {
  if (!props.featureSupport.supportsQuote) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "quote", children: [] }, { collapsed: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatQuoteLabel,
      disabled,
      selected: props.state.currentSelectedBlockElement && props.state.currentSelectedBlockElement.type === "quote",
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.toggleQuote),
      htmlEntity: '"',
      type: "quote",
      disjointedMode: props.disjointedMode
    }
  );
}
function NumberedList(props) {
  if (!props.featureSupport.supportsLists) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "list", listType: "numbered", children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatListNumberedLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertList, "numbered"),
      htmlEntity: "123",
      type: "numbered-list",
      disjointedMode: props.disjointedMode
    }
  );
}
function BulletedList(props) {
  if (!props.featureSupport.supportsLists) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "list", listType: "bulleted", children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatListBulletedLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertList, "bulleted"),
      htmlEntity: "...",
      type: "bulleted-list",
      disjointedMode: props.disjointedMode
    }
  );
}
var imgExample = {
  type: "image",
  children: [STANDARD_TEXT_NODE()],
  width: 0,
  height: 0,
  alt: "",
  src: "",
  srcSet: "",
  srcId: "",
  standalone: false,
  sizes: ""
};
function Image(props) {
  if (!props.featureSupport.supportsImages) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement(imgExample, { selected: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddImageLabel,
      disabled,
      selected: false,
      onClick: props.requestImage,
      htmlEntity: "\u{1F4F7}",
      type: "image",
      disjointedMode: props.disjointedMode
    }
  );
}
var videoExample = {
  type: "video",
  origin: "youtube",
  src: "",
  children: [STANDARD_TEXT_NODE()]
};
function Video(props) {
  if (!props.featureSupport.supportsVideos) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement(videoExample, { selected: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddVideoLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertVideo, null),
      htmlEntity: "\u{1F3A5}",
      type: "video",
      disjointedMode: props.disjointedMode
    }
  );
}
var fileExample = {
  type: "file",
  children: [STANDARD_TEXT_NODE()],
  extension: "",
  fileName: "",
  size: "",
  src: "",
  srcId: ""
};
function File(props) {
  if (!props.featureSupport.supportsFiles) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement(fileExample, { selected: true });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddFileLabel,
      disabled,
      selected: false,
      onClick: props.requestFile,
      htmlEntity: "\u{1F5B9}",
      type: "file",
      disjointedMode: props.disjointedMode
    }
  );
}
function Container(props) {
  if (!props.featureSupport.supportsContainers) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "container", containerType: null, children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddContainerLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertContainer, null),
      htmlEntity: "\u26F6",
      type: "container",
      disjointedMode: props.disjointedMode
    }
  );
}
function Table(props) {
  if (!props.featureSupport.supportsTables) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "table", tableType: null, children: [] });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddTableLabel,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertTable, null),
      htmlEntity: "\u1699",
      type: "table",
      disjointedMode: props.disjointedMode
    }
  );
}
function TemplateText(props) {
  if (!props.isReady || !props.featureSupport.supportsTemplating) {
    return null;
  }
  let templateTextAmount = 0;
  if (props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentSelectedBlockContext.properties).forEach((key) => {
      const property = props.state.currentSelectedBlockContext.properties[key];
      if (property.type === "text") {
        templateTextAmount++;
      }
    });
  }
  if (props.featureSupport.supportsTemplating && props.state.currentRootContext && props.state.currentRootContext !== props.state.currentSelectedBlockContext) {
    Object.keys(props.state.currentRootContext.properties).forEach((key) => {
      const property = props.state.currentRootContext.properties[key];
      if (property.nonRootInheritable) {
        return;
      }
      if (property.type === "text") {
        templateTextAmount++;
      }
    });
  }
  if (templateTextAmount === 0) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "inline", children: [], textContent: "text" });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddTemplateText,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertTemplateText, null, null),
      htmlEntity: "text",
      type: "table",
      disjointedMode: props.disjointedMode,
      count: templateTextAmount
    }
  );
}
function TemplateHTML(props) {
  if (!props.isReady || !props.featureSupport.supportsTemplating) {
    return null;
  }
  let templateHTMLAmount = 0;
  const currentSelectedSuperBlockElement = props.state.currentSelectedSuperBlockElements && props.state.currentSelectedSuperBlockElements[props.state.currentSelectedSuperBlockElements.length - 1];
  if (currentSelectedSuperBlockElement && props.state.currentSelectedTopmostSuperBlockContext) {
    Object.keys(props.state.currentSelectedTopmostSuperBlockContext.properties).forEach((key) => {
      const property = props.state.currentSelectedTopmostSuperBlockContext.properties[key];
      if (property.type === "html") {
        templateHTMLAmount++;
      }
    });
  }
  if (props.featureSupport.supportsTemplating && props.state.currentRootContext && props.state.currentRootContext !== props.state.currentSelectedTopmostSuperBlockContext) {
    Object.keys(props.state.currentRootContext.properties).forEach((key) => {
      const property = props.state.currentRootContext.properties[key];
      if (property.nonRootInheritable) {
        return;
      }
      if (property.type === "html") {
        templateHTMLAmount++;
      }
    });
  }
  if (templateHTMLAmount === 0) {
    return null;
  }
  const disabled = !props.state.allowsInsertElement({ type: "void-block", children: [], html: "html" });
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  return /* @__PURE__ */ import_react10.default.createElement(
    ToolbarButton,
    {
      title: props.baseI18n.formatAddTemplateHTML,
      disabled,
      selected: false,
      onClick: callFn.bind(null, props.helpers.focus, props.helpers.insertTemplateHTML, null, null),
      htmlEntity: "html",
      type: "table",
      disjointedMode: props.disjointedMode,
      count: templateHTMLAmount
    }
  );
}
function ToolbarExtra(props) {
  const elementReference = typeof props.extra.element === "function" ? props.extra.element() : props.extra.element;
  const defaultAction = (0, import_react10.useCallback)(() => {
    const element = typeof props.extra.element === "function" ? props.extra.element() : props.extra.element;
    props.helpers.insertElement(element);
    return element;
  }, [props.extra.element, props.helpers.insertElement]);
  (0, import_react10.useEffect)(() => {
    if (props.extra.onAnyKeyDown) {
      document.body.addEventListener("keydown", props.extra.onAnyKeyDown);
      return () => {
        document.body.removeEventListener("keydown", props.extra.onAnyKeyDown);
      };
    }
    return;
  }, [props.extra.onAnyKeyDown]);
  const onClick = (0, import_react10.useCallback)((e2) => {
    if (props.extra.refocusHandler) {
      props.extra.refocusHandler(props.helpers.focus, e2);
    } else {
      props.helpers.focus();
    }
    props.extra.onClick ? props.extra.onClick(defaultAction, e2) : defaultAction();
  }, []);
  let disabled = false;
  if (elementReference) {
    disabled = !props.state.allowsInsertElement(elementReference);
  }
  const ToolbarButton = props.ToolbarButton || DefaultToolbarButtonComponent;
  if (typeof props.extra.title === "string" || !props.extra.title) {
    return /* @__PURE__ */ import_react10.default.createElement(
      ToolbarButton,
      __spreadValues({
        title: props.extra.title,
        disabled,
        selected: props.extra.selected,
        count: props.extra.count,
        disjointedMode: props.disjointedMode,
        htmlEntity: "?",
        type: "extra",
        extraId: props.extra.id,
        onClick
      }, props.extra.toolbarButtonProps)
    );
  } else {
    const element = props.extra.title;
    return import_react10.default.cloneElement(element, {
      children: (i18nTitle) => /* @__PURE__ */ import_react10.default.createElement(
        ToolbarButton,
        __spreadValues({
          title: i18nTitle,
          disabled,
          selected: props.extra.selected,
          count: props.extra.count,
          disjointedMode: props.disjointedMode,
          htmlEntity: "?",
          type: "extra",
          extraId: props.extra.id,
          onClick
        }, props.extra.toolbarButtonProps)
      )
    });
  }
}
function ToolbarExtras(props) {
  if (props.toolbarExtras && props.toolbarExtras.length) {
    const toolbarExtras = props.toolbarExtras.map((x, index) => {
      return /* @__PURE__ */ import_react10.default.createElement(ToolbarExtra, __spreadProps(__spreadValues({}, props), { extra: x, key: index }));
    });
    const customs = props.toolbarExtras.map((x, i2) => x.customChildren ? /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, { key: i2 }, x.customChildren) : null);
    return /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, null, toolbarExtras, customs);
  }
  return null;
}
function None() {
  return null;
}
var toolbarRegistry = {
  none: None,
  italic: Italic,
  bold: Bold,
  underline: Underline,
  "bulleted-list": BulletedList,
  "numbered-list": NumberedList,
  "template-html": TemplateHTML,
  "template-text": TemplateText,
  title: Title,
  container: Container,
  divider: VDivider,
  hdivider: HDivider,
  extras: ToolbarExtras,
  file: File,
  image: Image,
  link: Link,
  quote: Quote,
  video: Video,
  table: Table
};
function DefaultToolbarDrawerToggleButton(props) {
  return /* @__PURE__ */ import_react10.default.createElement(
    "button",
    {
      onClick: props.toggleDrawer,
      className: "slateEditorToolbarButton",
      dangerouslySetInnerHTML: { __html: props.drawerOpen ? "&#11014;" : "&#11015;" }
    }
  );
}
var RichTextEditorToolbar = class extends import_react10.default.Component {
  constructor(props) {
    super(props);
    this.state = {
      isReady: false
    };
  }
  componentDidMount() {
    this.setState({
      isReady: true
    });
    this.props.onHeightChange(this.getHeight());
  }
  componentDidUpdate() {
    this.props.onHeightChange(this.getHeight());
  }
  getHeight() {
    var _a, _b;
    return (_b = (_a = this.appBarHeaderRef) == null ? void 0 : _a.current) == null ? void 0 : _b.offsetHeight;
  }
  getAppbarHeader() {
    var _a;
    return (_a = this.appBarHeaderRef) == null ? void 0 : _a.current;
  }
  render() {
    if (!this.props.state.isRichText) {
      return null;
    }
    if (this.props.disjointedMode && !this.props.disjointedModeKeepToolbar && !this.props.state.currentSelectedElement) {
      return null;
    }
    const toolbarForm = (this.props.customToolbar || [
      "bold",
      "italic",
      "underline",
      this.props.featureSupport.supportsTitle || this.props.featureSupport.supportsQuote || this.props.featureSupport.supportsLinks || this.props.featureSupport.supportsLists ? "divider" : "none",
      this.props.featureSupport.supportsLinks ? "link" : "none",
      this.props.featureSupport.supportsTitle ? "title" : "none",
      this.props.featureSupport.supportsQuote ? "quote" : "none",
      this.props.featureSupport.supportsLists ? "bulleted-list" : "none",
      this.props.featureSupport.supportsLists ? "numbered-list" : "none",
      this.props.featureSupport.supportsTables ? "table" : "none",
      this.props.featureSupport.supportsImages || this.props.featureSupport.supportsFiles || this.props.featureSupport.supportsVideos ? "divider" : "none",
      this.props.featureSupport.supportsImages ? "image" : "none",
      this.props.featureSupport.supportsFiles ? "file" : "none",
      this.props.featureSupport.supportsVideos ? "video" : "none",
      "divider",
      this.props.featureSupport.supportsContainers ? "container" : "none",
      "template-text",
      "template-html",
      this.props.toolbarExtras && this.props.toolbarExtras.length ? "extras" : "none"
    ]).map((v) => {
      if (typeof v === "function") {
        return v(this.props);
      }
      return v;
    });
    const DrawerToggleComponent = this.props.ToolbarDrawerButton || DefaultToolbarDrawerToggleButton;
    let drawerButton = this.props.shouldHaveDrawer() ? /* @__PURE__ */ import_react10.default.createElement(
      DrawerToggleComponent,
      {
        drawerOpen: this.props.drawerOpen,
        toggleDrawer: this.props.toggleDrawer,
        disjointedMode: this.props.disjointedMode
      }
    ) : null;
    const customChildren = [];
    const toolbarFormMapped = toolbarForm.map((ele, index) => {
      if (typeof ele === "string") {
        const Element4 = toolbarRegistry[ele];
        return /* @__PURE__ */ import_react10.default.createElement(
          Element4,
          __spreadProps(__spreadValues({}, this.props), {
            isReady: this.state.isReady,
            key: index
          })
        );
      } else {
        const extraValue = typeof ele === "function" ? ele(this.props) : ele;
        if (extraValue.customChildren) {
          customChildren.push(
            /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, { key: index }, extraValue.customChildren)
          );
        }
        return /* @__PURE__ */ import_react10.default.createElement(
          ToolbarExtra,
          __spreadProps(__spreadValues({}, this.props), {
            isReady: this.state.isReady,
            key: index,
            extra: extraValue
          })
        );
      }
    });
    const Toolbar = this.props.Toolbar || DefaultToolbar;
    const toReturn = /* @__PURE__ */ import_react10.default.createElement(
      Toolbar,
      {
        customChildren,
        disjointedMode: this.props.disjointedMode,
        drawerButton,
        drawerOpen: this.props.drawerOpen,
        props: {
          ["data-unblur"]: true
        },
        toolbarContents: toolbarFormMapped,
        ref: this.appBarHeaderRef
      }
    );
    if (this.props.disjointedMode && this.state.isReady) {
      return import_react_dom3.default.createPortal(toReturn, document.body);
    } else if (this.props.disjointedMode) {
      return null;
    } else {
      return toReturn;
    }
  }
};
var DefaultSlateWrapper = class extends import_react10.default.PureComponent {
  /**
   * Constructs a new material ui based wrapper for the slate editor
   * @param props the base properties that every wrapper gets extended for this specific wrapper
   */
  constructor(props) {
    super(props);
    this.state = {
      inlineElementThatWasCurrentBeforeLosingFocus: null,
      // keep SSR compatibility by keeping the drawer closed at the start
      // as we cannot read local storage in the server side
      drawerOpen: false,
      toolbarHeight: 0,
      noAnimate: true,
      toolbarState: null
    };
    this.isUnmounted = false;
    this.inputImageRef = import_react10.default.createRef();
    this.inputFileRef = import_react10.default.createRef();
    this.DrawerContainerRef = import_react10.default.createRef();
    this.toolbarRef = import_react10.default.createRef();
    this.editorRef = import_react10.default.createRef();
    this.onHeightChange = this.onHeightChange.bind(this);
    this.onImageLoad = this.onImageLoad.bind(this);
    this.onFileLoad = this.onFileLoad.bind(this);
    this.requestImage = this.requestImage.bind(this);
    this.requestFile = this.requestFile.bind(this);
    this.onFileEventedReFocus = this.onFileEventedReFocus.bind(this);
    this.refocus = this.refocus.bind(this);
    this.shouldHaveDrawer = this.shouldHaveDrawer.bind(this);
    this.toggleDrawer = this.toggleDrawer.bind(this);
    this.setToolbarState = this.setToolbarState.bind(this);
    this.selectiveHardBlur = this.selectiveHardBlur.bind(this);
    this.keyUpListener = this.keyUpListener.bind(this);
    this.onAltActionTriggered = this.onAltActionTriggered.bind(this);
  }
  onAltActionTriggered(tabNav, action) {
    if (action === "blur") {
      this.props.helpers.hardBlur();
    }
  }
  onHeightChange(newHeight) {
    if (this.state.toolbarHeight !== newHeight) {
      this.setState({
        toolbarHeight: newHeight
      });
    }
  }
  /**
   * During the mount event
   */
  componentDidMount() {
    if (this.shouldHaveDrawer()) {
      this.setState({
        drawerOpen: localStorage.getItem("SLATE_DRAWER_OPEN") === "true",
        noAnimate: true
      }, () => {
        setTimeout(() => {
          !this.isUnmounted && this.setState({
            noAnimate: false
          });
        }, 300);
      });
    } else {
      this.setState({
        noAnimate: false
      });
    }
    document.body.addEventListener("mousedown", this.selectiveHardBlur);
    document.body.addEventListener("touchstart", this.selectiveHardBlur);
    document.body.addEventListener("keyup", this.keyUpListener);
  }
  componentWillUnmount() {
    document.body.removeEventListener("mousedown", this.selectiveHardBlur);
    document.body.removeEventListener("touchstart", this.selectiveHardBlur);
    document.body.removeEventListener("keyup", this.keyUpListener);
    this.isUnmounted = true;
  }
  keyUpListener(e2) {
    if (e2.key === "Tab") {
      this.selectiveHardBlur(e2);
    }
  }
  selectiveHardBlur(e2, altTarget) {
    const target = altTarget || e2.target;
    if (this.props.state.currentSelectedText) {
      if (this.isUnblurred(target)) {
        if (target.tagName !== "INPUT" && target.tagName !== "SELECT") {
          e2.preventDefault();
        }
      } else if (!this.isInEditor(target)) {
        this.props.helpers.hardBlur();
      }
    }
  }
  isUnblurred(ele) {
    if (ele === this.toolbarRef.current.getAppbarHeader() || ele === this.DrawerContainerRef.current.getDrawerBody() || ele.dataset.unblur) {
      return true;
    }
    if (ele.parentElement) {
      return this.isUnblurred(ele.parentElement);
    }
    return false;
  }
  isInEditor(ele) {
    if (ele.dataset.notEditor) {
      return false;
    }
    if (ele === this.editorRef.current) {
      return true;
    }
    if (ele.parentElement) {
      return this.isInEditor(ele.parentElement);
    }
    return false;
  }
  /**
   * Specifies on whether it should have a drawer
   * @returns a boolean on this fact
   */
  shouldHaveDrawer() {
    if (!this.props.featureSupport || this.props.hideDrawer) {
      return false;
    }
    return !!(this.props.featureSupport.supportsTemplating || this.props.featureSupport.supportsCustomStyles || this.props.featureSupport.supportsContainers || this.props.featureSupport.supportedCustoms || this.props.featureSupport.supportsRichClasses || this.props.drawerExtras);
  }
  /**
   * Executes in order to open the dialog in order to request an image
   * via this file upload dialog
   */
  requestImage() {
    document.body.addEventListener("focus", this.onFileEventedReFocus, { capture: true });
    this.originalSelectionArea = this.props.state.currentText ? this.props.helpers.editor.selection : null;
    this.originalSelectionPath = this.props.state.currentSelectedInlineElementAnchor || this.props.state.currentSelectedBlockElementAnchor || this.props.state.currentSelectedSuperBlockElementAnchors && this.props.state.currentSelectedSuperBlockElementAnchors[this.props.state.currentSelectedSuperBlockElementAnchors.length - 1];
    this.inputImageRef.current.click();
  }
  /**
   * Executes in order to open the dialog in order to request an file
   * via this file upload dialog
   */
  requestFile() {
    document.body.addEventListener("focus", this.onFileEventedReFocus, { capture: true });
    this.originalSelectionArea = this.props.state.currentText ? this.props.helpers.editor.selection : null;
    this.originalSelectionPath = this.props.state.currentSelectedInlineElementAnchor || this.props.state.currentSelectedBlockElementAnchor || this.props.state.currentSelectedSuperBlockElementAnchors && this.props.state.currentSelectedSuperBlockElementAnchors[this.props.state.currentSelectedSuperBlockElementAnchors.length - 1];
    this.inputFileRef.current.click();
  }
  /**
   * Opens/closes the drawer
   */
  toggleDrawer() {
    const newState = !this.state.drawerOpen;
    this.setState({
      drawerOpen: newState
    });
    if (!this.props.disjointedMode) {
      window.dispatchEvent(new Event("SLATE_DRAWER_OPEN"));
    }
    localStorage.setItem("SLATE_DRAWER_OPEN", JSON.stringify(newState));
  }
  /**
   * Refocuses as the original selection area that was focused
   * mainly used by dialogs once they haave closed
   */
  refocus() {
    if (this.isUnmounted) {
      return;
    }
    if (this.originalSelectionArea) {
      this.props.helpers.focusAt(this.originalSelectionArea);
    } else if (this.originalSelectionPath) {
      this.props.helpers.selectPath(this.originalSelectionPath);
    }
  }
  /**
   * Triggers once the document has recovered focus from the file
   * dialog that is native for the file upload
   */
  onFileEventedReFocus() {
    document.body.removeEventListener("focus", this.onFileEventedReFocus, { capture: true });
    this.refocusTimeout = setTimeout(this.refocus, 30);
  }
  setToolbarState(state) {
    if (this.state.toolbarState !== state) {
      this.setState({ toolbarState: state });
    }
  }
  /**
   * This function gets called once the image input calls the on change event
   * which means it has been loaded by the input itself and it's available for
   * reading
   * @param e the change event that contains the file 
   */
  async onImageLoad(e2) {
    document.body.removeEventListener("focus", this.onFileEventedReFocus, { capture: true });
    clearTimeout(this.refocusTimeout);
    const file = e2.target.files[0];
    e2.target.value = "";
    await this.props.helpers.focusAt(this.originalSelectionArea || this.originalSelectionPath);
    this.props.helpers.insertImage(file, false);
  }
  /**
   * This function gets called once the file input calls the on change event
   * which means it has been loaded by the input itself and it's available for
   * reading
   * @param e the change event that contains the file
   */
  async onFileLoad(e2) {
    document.body.removeEventListener("focus", this.onFileEventedReFocus, { capture: true });
    clearTimeout(this.refocusTimeout);
    const file = e2.target.files[0];
    e2.target.value = "";
    await this.props.helpers.focusAt(this.originalSelectionArea || this.originalSelectionPath);
    this.props.helpers.insertFile(file);
  }
  /**
   * Standard render function from the wrapper
   */
  render() {
    const imageInput = this.props.state.isRichText && this.props.featureSupport.supportsImages ? /* @__PURE__ */ import_react10.default.createElement(
      "input",
      {
        ref: this.inputImageRef,
        type: "file",
        accept: this.props.featureSupport.supportsImagesAccept,
        style: { display: "none" },
        autoComplete: "off",
        onChange: this.onImageLoad
      }
    ) : null;
    const fileInput = this.props.state.isRichText && this.props.featureSupport.supportsFiles ? /* @__PURE__ */ import_react10.default.createElement(
      "input",
      {
        ref: this.inputFileRef,
        type: "file",
        accept: this.props.featureSupport.supportsFilesAccept,
        style: { display: "none" },
        autoComplete: "off",
        onChange: this.onFileLoad
      }
    ) : null;
    const fileLoadErrorDialog = this.props.state.isRichText && (this.props.featureSupport.supportsImages || this.props.featureSupport.supportsFiles) ? /* @__PURE__ */ import_react10.default.createElement(
      FileLoadErrorDialog,
      {
        currentLoadError: this.props.currentLoadError,
        dismissCurrentLoadError: this.props.dismissCurrentLoadError,
        i18nGenericError: this.props.baseI18n.genericError,
        i18nOk: this.props.baseI18n.ok,
        Dialog: this.props.Dialog
      }
    ) : null;
    let toolbar = /* @__PURE__ */ import_react10.default.createElement(
      RichTextEditorToolbar,
      __spreadProps(__spreadValues({}, this.props), {
        toolbarState: this.state.toolbarState,
        toolbarHeight: this.state.toolbarHeight,
        ref: this.toolbarRef,
        onHeightChange: this.onHeightChange,
        requestImage: this.requestImage,
        requestFile: this.requestFile,
        shouldHaveDrawer: this.shouldHaveDrawer,
        drawerOpen: this.state.drawerOpen,
        toggleDrawer: this.toggleDrawer,
        setToolbarState: this.setToolbarState
      })
    );
    let extraChildren = null;
    if (this.props.customExtraChildren) {
      const [characterCount, wordCount] = countSizeAndWords(this.props.state.treeValue);
      extraChildren = this.props.customExtraChildren(characterCount, wordCount);
    }
    let drawerContainer = /* @__PURE__ */ import_react10.default.createElement(
      DrawerContainer,
      __spreadProps(__spreadValues({}, this.props), {
        ref: this.DrawerContainerRef,
        drawerOpen: this.state.drawerOpen,
        noAnimate: this.state.noAnimate,
        toolbarHeight: this.state.toolbarHeight
      })
    );
    const DisjointedEditorContainer = this.props.DisjointedEditorContainer || "div";
    const EditorContainer = this.props.EditorContainer || DefaultEditorContainer;
    const DisjointedEditor = this.props.DisjointedEditor || "div";
    const Editor2 = this.props.Editor || "div";
    const basicClassName = "rich-text editor " + (this.props.state.isRichText ? "rich-text-mode" : "plain-text-mode") + (this.props.state.focused ? " focused" : "") + (this.props.state.currentValid ? " valid" : " invalid") + (this.props.disabled ? " disabled" : " enabled");
    let box = null;
    if (this.props.disjointedMode) {
      box = /* @__PURE__ */ import_react10.default.createElement(DisjointedEditorContainer, { ref: this.editorRef, className: "slateEditorDisjointedEditorContainer" }, /* @__PURE__ */ import_react10.default.createElement(DisjointedEditor, { className: basicClassName }, this.props.children), /* @__PURE__ */ import_react10.default.createElement("div", { "data-not-editor": true, style: { width: "100%" } }, extraChildren));
    } else {
      box = /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, null, /* @__PURE__ */ import_react10.default.createElement(
        Editor2,
        {
          ref: this.editorRef,
          className: basicClassName
        },
        this.props.children
      ), extraChildren);
    }
    if (this.props.BaseWrapper) {
      const BaseWrapper = this.props.BaseWrapper;
      box = /* @__PURE__ */ import_react10.default.createElement(
        BaseWrapper,
        __spreadProps(__spreadValues({}, this.props), {
          drawerOpen: this.state.drawerOpen
        }),
        box
      );
    }
    if (this.props.ToolbarWrapper) {
      const ToolbarWrapper = this.props.ToolbarWrapper;
      toolbar = /* @__PURE__ */ import_react10.default.createElement(ToolbarWrapper, __spreadProps(__spreadValues({}, this.props), { drawerOpen: this.state.drawerOpen }), toolbar);
    }
    if (this.props.DrawerWrapper) {
      const DrawerWrapper = this.props.DrawerWrapper;
      drawerContainer = /* @__PURE__ */ import_react10.default.createElement(DrawerWrapper, __spreadProps(__spreadValues({}, this.props), { drawerOpen: this.state.drawerOpen }), drawerContainer);
    }
    let toReturn;
    if (this.props.disjointedMode) {
      toReturn = /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, null, toolbar, box, drawerContainer, imageInput, fileInput);
    } else {
      toReturn = /* @__PURE__ */ import_react10.default.createElement(import_react10.default.Fragment, null, toolbar, /* @__PURE__ */ import_react10.default.createElement(EditorContainer, null, box, drawerContainer), imageInput, fileInput);
    }
    if (this.props.FinalWrapper) {
      const FinalWrapper = this.props.FinalWrapper;
      toReturn = /* @__PURE__ */ import_react10.default.createElement(FinalWrapper, __spreadProps(__spreadValues({}, this.props), { drawerOpen: this.state.drawerOpen }), toReturn);
    }
    return toReturn;
  }
};
var DefaultDrawerBody = import_react10.default.forwardRef((props, ref) => {
  return /* @__PURE__ */ import_react10.default.createElement("div", { ref, className: "slateEditorDrawerBody" }, props.drawerOpen ? props.children : null);
});
function DefaultDrawerSpacer(props) {
  return /* @__PURE__ */ import_react10.default.createElement(
    "div",
    {
      className: "slateEditorDrawerAppbarSpacer",
      style: { height: props.toolbarHeight, flex: "0 0 " + props.toolbarHeight + "px" }
    }
  );
}
function DefaultDrawerContainerBox(props) {
  return /* @__PURE__ */ import_react10.default.createElement(
    "div",
    {
      className: (props.drawerOpen ? "open " : "") + (props.disjointedMode ? "slateEditorDrawerFixed" : "slateEditorDrawer") + (props.noAnimate ? " slateEditorDrawerNoAnimate" : "")
    },
    props.children
  );
}
var DrawerContainer = class extends import_react10.default.Component {
  constructor(props) {
    super(props);
    this.state = {
      isReady: false
    };
    this.editorDrawerBodyRef = import_react10.default.createRef();
  }
  componentDidMount() {
    this.setState({
      isReady: true
    });
  }
  getDrawerBody() {
    return this.editorDrawerBodyRef.current;
  }
  render() {
    if (this.props.disjointedMode && !this.props.state.currentSelectedElement) {
      return null;
    }
    const DrawerContainerBox = this.props.DrawerContainerBox || DefaultDrawerContainerBox;
    const DrawerSpacer = this.props.DrawerSpacer || DefaultDrawerSpacer;
    const DrawerBody = this.props.DrawerBody || DefaultDrawerBody;
    const toReturn = /* @__PURE__ */ import_react10.default.createElement(
      DrawerContainerBox,
      {
        disjointedMode: this.props.disjointedMode,
        drawerOpen: this.props.drawerOpen,
        noAnimate: this.props.noAnimate,
        toolbarHeight: this.props.toolbarHeight
      },
      this.props.disjointedMode && this.props.drawerOpen ? /* @__PURE__ */ import_react10.default.createElement(
        DrawerSpacer,
        {
          disjointedMode: this.props.disjointedMode,
          toolbarHeight: this.props.toolbarHeight
        }
      ) : null,
      /* @__PURE__ */ import_react10.default.createElement(
        DrawerBody,
        {
          ref: this.editorDrawerBodyRef,
          disjointedMode: this.props.disjointedMode,
          toolbarHeight: this.props.toolbarHeight,
          drawerOpen: this.props.drawerOpen
        },
        /* @__PURE__ */ import_react10.default.createElement(WrapperDrawer, __spreadValues({}, this.props))
      )
    );
    if (this.props.disjointedMode) {
      if (this.state.isReady) {
        return import_react_dom3.default.createPortal(toReturn, document.body);
      } else {
        return null;
      }
    } else {
      return toReturn;
    }
  }
};

// ../editor/slate/element-wrappers.tsx
var import_react12 = __toESM(require_react());

// ../editor/editor-dropdown.tsx
var import_react_dom4 = __toESM(require_react_dom());
var import_react11 = __toESM(require_react());
var DefaultDropdownComponentWrapper = import_react11.default.forwardRef((props, ref) => {
  const Element4 = props.tag;
  return /* @__PURE__ */ import_react11.default.createElement(
    Element4,
    __spreadProps(__spreadValues({
      className: "slateEditorDropdownContentWrapper"
    }, props.props), {
      ref
    }),
    props.children
  );
});
var DefaultDropdownComponent = import_react11.default.forwardRef((props, ref) => {
  return /* @__PURE__ */ import_react11.default.createElement(
    "div",
    __spreadProps(__spreadValues({
      className: props.containedWithinBox ? "slateEditorDropdownComponentContained" : "slateEditorDropdownComponent"
    }, props.props), {
      ref
    }),
    props.children
  );
});
var DefaultDropdownComponentBox = import_react11.default.forwardRef((props, ref) => {
  return /* @__PURE__ */ import_react11.default.createElement(
    "div",
    __spreadProps(__spreadValues({
      className: "slateEditorDropdownComponentContainerBox"
    }, props.props), {
      ref
    }),
    props.children
  );
});
function defaultPortalElementOverflowCalculator(top, height) {
  const reference = document.body.parentElement;
  const positionTopOverall = top + reference.scrollTop;
  const availableHeight = reference.scrollHeight;
  const spaceRemaining = availableHeight - positionTopOverall;
  return height - spaceRemaining;
}
function defaultPortalElementOverflowSpacerHeightCalculator(overflow) {
  const reference = document.body.parentElement;
  return reference.scrollHeight - window.innerHeight + overflow;
}
function defaultPortalElementOverflowSpacerGenerator(height, ref) {
  return /* @__PURE__ */ import_react11.default.createElement("div", { ref, style: { height, backgroundColor: "#eee" } });
}
function isInDropdownOrWrapper(ele, dropdownItself, wrapperContainer) {
  if (ele === dropdownItself || ele === wrapperContainer) {
    return true;
  }
  if (ele.parentElement) {
    return isInDropdownOrWrapper(ele.parentElement, dropdownItself, wrapperContainer);
  }
  return false;
}
function EditorDropdown(props) {
  var _a;
  const boxRef = (0, import_react11.useRef)();
  const dropdownRef = (0, import_react11.useRef)();
  const overflowElement = (0, import_react11.useRef)();
  const [pos, setPos] = (0, import_react11.useState)(null);
  const [overflowSpacerHeight, setOverflowSpacerHeight] = (0, import_react11.useState)(0);
  const [currentOverflow, setCurrentOverflow] = (0, import_react11.useState)(0);
  const congruentTimer = (0, import_react11.useRef)(null);
  const recalculateOverflow = (0, import_react11.useCallback)((top, height) => {
    if (!overflowElement.current || !overflowElement.current.offsetHeight) {
      const newOverflow = props.portalElementOverflowCalculator ? props.portalElementOverflowCalculator(top, height) : defaultPortalElementOverflowCalculator(top, height);
      if (newOverflow > 0) {
        const newHeight = (props.portalElementOverflowSpacerHeightCalculator ? props.portalElementOverflowSpacerHeightCalculator(newOverflow) : defaultPortalElementOverflowSpacerHeightCalculator(newOverflow)) + 25;
        setOverflowSpacerHeight(newHeight);
        setCurrentOverflow(newOverflow);
      } else {
        setOverflowSpacerHeight(0);
        setCurrentOverflow(0);
      }
    }
  }, [props.portalElementOverflowCalculator, props.portalElementOverflowSpacerHeightCalculator]);
  const congruentTimerExec = (0, import_react11.useCallback)(() => {
    if (dropdownRef.current && overflowElement.current) {
      const clientRect = dropdownRef.current.getBoundingClientRect();
      const currentHeight = clientRect.height;
      const currentTop = clientRect.top;
      const moreOverflow = props.portalElementOverflowCalculator ? props.portalElementOverflowCalculator(currentTop, currentHeight) : defaultPortalElementOverflowCalculator(currentTop, currentHeight);
      if (moreOverflow > 0) {
        const newOverflow = currentOverflow + moreOverflow;
        setCurrentOverflow(newOverflow);
        const overflowElementHeight = overflowElement.current.offsetHeight;
        const newHeight = overflowElementHeight + moreOverflow + 25;
        setOverflowSpacerHeight(newHeight);
      }
    }
  }, [currentOverflow]);
  const updatePos = (0, import_react11.useCallback)(() => {
    if (!boxRef.current) {
      return;
    }
    const children = Array.from(boxRef.current.childNodes);
    let firstNode = children[0];
    let lastNode = children[children.length - 1];
    if (props.goIntoTreeDepth) {
      const goTowardsParent = props.goIntoTreeDepth < 0;
      for (let i2 = 0; i2 < Math.abs(props.goIntoTreeDepth); i2++) {
        if (!goTowardsParent) {
          firstNode = firstNode.childNodes[0];
          lastNode = lastNode.childNodes[lastNode.childNodes.length - 1];
        } else {
          firstNode = firstNode.parentElement;
          lastNode = lastNode.parentElement;
        }
      }
    }
    const firstNodeBoundingRect = firstNode.getBoundingClientRect();
    const lastNodeBoundingRect = lastNode.getBoundingClientRect();
    const lowermostNodeClientRect = firstNodeBoundingRect.bottom > lastNodeBoundingRect.bottom ? firstNodeBoundingRect : lastNodeBoundingRect;
    const leftMostPosition = lowermostNodeClientRect.left;
    const rightMostPosition = lowermostNodeClientRect.right;
    let left = null;
    let right = null;
    const widthToCompareAgainst = document.body.parentElement.getBoundingClientRect().width;
    if (leftMostPosition > widthToCompareAgainst / 2) {
      right = widthToCompareAgainst - rightMostPosition;
    } else {
      left = leftMostPosition;
    }
    const top = lowermostNodeClientRect.top + lowermostNodeClientRect.height;
    setPos([top, left, right]);
    if (dropdownRef.current) {
      const height = dropdownRef.current.getBoundingClientRect().height;
      recalculateOverflow(top, height);
    }
  }, [recalculateOverflow]);
  const callCloseable = (0, import_react11.useCallback)((e2) => {
    if (props.closeable) {
      let wrapperRef = boxRef.current;
      if (props.goIntoTreeDepth) {
        const goTowardsParent = props.goIntoTreeDepth < 0;
        if (goTowardsParent) {
          wrapperRef = wrapperRef.parentElement;
        }
      }
      if (!isInDropdownOrWrapper(e2.target, dropdownRef.current, wrapperRef)) {
        props.onClose();
      }
    }
  }, []);
  const updatePosDelayed = (0, import_react11.useCallback)(() => {
    setTimeout(updatePos, 50);
  }, []);
  const posMassTrigger = (0, import_react11.useCallback)(() => {
    const posInternal = setInterval(updatePos, 10);
    setTimeout(() => {
      clearInterval(posInternal);
    }, 600);
  }, []);
  (0, import_react11.useEffect)(() => {
    if (props.isOpen) {
      updatePos();
      congruentTimer.current = setInterval(congruentTimerExec, 1e3);
      window.addEventListener("SLATE_DRAWER_OPEN", posMassTrigger);
      window.addEventListener("keyup", updatePos);
      window.addEventListener("resize", updatePos);
      window.addEventListener("mouseup", updatePosDelayed);
      window.addEventListener("touchend", updatePosDelayed);
      window.addEventListener("scroll", updatePos, true);
      window.addEventListener("mousedown", callCloseable);
      window.addEventListener("touchstart", callCloseable);
      return () => {
        window.removeEventListener("SLATE_DRAWER_OPEN", posMassTrigger);
        window.removeEventListener("keyup", updatePos);
        window.removeEventListener("resize", updatePos);
        window.removeEventListener("mouseup", updatePosDelayed);
        window.removeEventListener("touchend", updatePosDelayed);
        window.removeEventListener("scroll", updatePos, true);
        window.removeEventListener("mousedown", callCloseable);
        window.removeEventListener("touchstart", callCloseable);
        clearInterval(congruentTimer.current);
      };
    } else {
      setCurrentOverflow(0);
      setOverflowSpacerHeight(0);
    }
  }, [props.isOpen, updatePos, updatePosDelayed, posMassTrigger, callCloseable, congruentTimerExec]);
  let portal = null;
  let overflowPortal = null;
  if (props.isOpen) {
    const style = pos ? { position: "fixed", top: pos[0], left: pos[1], right: pos[2], zIndex: typeof props.zIndex !== "undefined" ? props.zIndex : 500 } : { position: "fixed", top: 0, left: 0, visibility: "hidden", zIndex: typeof props.zIndex !== "undefined" ? props.zIndex : 500 };
    const DropdownComponent = props.DropdownComponent || DefaultDropdownComponent;
    let elementInsidePortal = /* @__PURE__ */ import_react11.default.createElement(
      DropdownComponent,
      {
        containedWithinBox: props.containWithinBox,
        props: {
          ["data-unblur"]: true,
          style: props.containWithinBox ? null : style
        },
        sizable: !!props.dropdownSizable,
        ref: props.containWithinBox ? null : dropdownRef
      },
      props.dropdown
    );
    if (props.containWithinBox) {
      const DropdownComponentBox = props.DropdownComponentBox || DefaultDropdownComponentBox;
      elementInsidePortal = /* @__PURE__ */ import_react11.default.createElement(
        DropdownComponentBox,
        {
          props: {
            ["data-unblur"]: true,
            style
          },
          sizable: props.dropdownSizable,
          ref: dropdownRef
        },
        elementInsidePortal
      );
    }
    portal = import_react_dom4.default.createPortal(
      elementInsidePortal,
      props.portalElement || document.body
    );
    overflowPortal = import_react_dom4.default.createPortal(props.portalElementOverflowSpacerGenerator ? props.portalElementOverflowSpacerGenerator(overflowSpacerHeight, overflowElement) : defaultPortalElementOverflowSpacerGenerator(overflowSpacerHeight, overflowElement), props.portalElement || document.body);
  }
  const Wrapper = props.DropdownComponentWrapper || DefaultDropdownComponentWrapper;
  return /* @__PURE__ */ import_react11.default.createElement(import_react11.default.Fragment, null, /* @__PURE__ */ import_react11.default.createElement(
    Wrapper,
    {
      tag: props.dropdownComponentWrapperTag,
      props: __spreadProps(__spreadValues({}, props.dropdownComponentWrapperProps), {
        style: __spreadValues({
          display: props.dropdownComponentWrapperHidden ? "none" : "contents"
        }, ((_a = props.dropdownComponentWrapperProps) == null ? void 0 : _a.style) || {})
      }),
      ref: boxRef
    },
    props.children
  ), portal, overflowPortal);
}

// ../editor/slate/element-wrappers.tsx
function DefaultElementWrapperButtonComponent(props) {
  return /* @__PURE__ */ import_react12.default.createElement(
    "button",
    {
      className: "slateEditorElementWrapperButton " + (props.selected ? " selected" : ""),
      disabled: props.disabled,
      onClick: props.onClick
    },
    props.label
  );
}
function DefaultFieldWrapperForMoreOptions(props) {
  return /* @__PURE__ */ import_react12.default.createElement("div", { className: "slateEditorFieldWrapperForMoreOptions" }, /* @__PURE__ */ import_react12.default.createElement("div", { className: "slateEditorFieldWrapperForMoreOptionsLabel" }, props.label), /* @__PURE__ */ import_react12.default.createElement("div", { className: "slateEditorFieldWrapperForMoreOptionsChildren" }, props.children));
}
function getVideoURL(v) {
  if (v.origin === "youtube") {
    return "https://youtube.com/watch?v=" + v.src;
  } else if (v.origin === "vimeo") {
    return "https://vimeo.com/" + v.src;
  } else {
    return "";
  }
}
function HTMLWrapper(props) {
  const [htmlOptions, setHTMLOptions] = (0, import_react12.useState)([]);
  const updateHTMLB = (0, import_react12.useCallback)((newV) => {
    const label = htmlOptions.find((o) => o.value === newV);
    props.helpers.updateTemplateHTML(typeof label.label === "string" ? label.label : label.label(), newV);
  }, [htmlOptions]);
  const updateHTML = (0, import_react12.useCallback)((e2) => {
    updateHTMLB(e2.target.value);
  }, [updateHTMLB]);
  (0, import_react12.useEffect)(() => {
    if (!props.isSelected) {
      return;
    }
    const context = props.helpers.getContextFor(props.element);
    const rootContext = props.helpers.getRootContext();
    const htmlPropertiesToUse = [];
    context && Object.keys(context.properties).forEach((key) => {
      const property = context.properties[key];
      if (property.type !== "html") {
        return;
      }
      htmlPropertiesToUse.push({
        value: key,
        label: property.label || key,
        primary: context !== rootContext
      });
    });
    if (rootContext && rootContext !== context) {
      Object.keys(rootContext.properties).forEach((key) => {
        const property = rootContext.properties[key];
        if (property.nonRootInheritable) {
          return;
        }
        if (property.type !== "html") {
          return;
        }
        htmlPropertiesToUse.push({
          value: key,
          label: property.label || key,
          primary: false
        });
      });
    }
    if (props.element.html && !htmlPropertiesToUse.some((p) => p.value === props.element.html)) {
      htmlPropertiesToUse.push({
        value: props.element.html,
        label: props.element.children[0].text,
        primary: false
      });
    }
    setHTMLOptions(htmlPropertiesToUse);
  }, [props.element, props.isSelected]);
  const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
  return /* @__PURE__ */ import_react12.default.createElement(
    EditorDropdown,
    {
      DropdownComponent: props.DropdownComponent,
      DropdownComponentBox: props.DropdownComponentBox,
      DropdownComponentWrapper: props.DropdownComponentWrapper,
      dropdownComponentWrapperTag: "span",
      isOpen: props.isSelected,
      dropdown: /* @__PURE__ */ import_react12.default.createElement(
        SelectField,
        {
          id: "template-html",
          label: props.baseI18n.addTemplateHTML.label,
          onChangeByEvent: updateHTML,
          onChangeByValue: updateHTMLB,
          options: htmlOptions.map((v) => ({
            label: typeof v.label === "function" ? v.label() : v.label,
            value: v.value,
            primary: v.primary
          })),
          resetBlur: null,
          unblur: null,
          value: props.element.html
        }
      )
    },
    props.children
  );
}
function TextWrapper(props) {
  const [textOptions, setTextOptions] = (0, import_react12.useState)([]);
  const updateTextContentB = (0, import_react12.useCallback)((newV) => {
    const label = textOptions.find((o) => o.value === newV);
    props.helpers.updateTemplateText(typeof label.label === "string" ? label.label : label.label(), newV);
  }, [textOptions]);
  const updateTextContent = (0, import_react12.useCallback)((e2) => {
    updateTextContentB(e2.target.value);
  }, [updateTextContentB]);
  (0, import_react12.useEffect)(() => {
    if (!props.isSelected) {
      return;
    }
    const context = props.helpers.getContextFor(props.element);
    const rootContext = props.helpers.getRootContext();
    const textPropertiesToUse = [];
    context && Object.keys(context.properties).forEach((key) => {
      const property = context.properties[key];
      if (property.type !== "text") {
        return;
      }
      textPropertiesToUse.push({
        value: key,
        label: property.label || key,
        primary: context !== rootContext
      });
    });
    if (rootContext && rootContext !== context) {
      Object.keys(rootContext.properties).forEach((key) => {
        const property = rootContext.properties[key];
        if (property.nonRootInheritable) {
          return;
        }
        if (property.type !== "text") {
          return;
        }
        textPropertiesToUse.push({
          value: key,
          label: property.label || key,
          primary: false
        });
      });
    }
    if (props.element.textContent && !textPropertiesToUse.some((p) => p.value === props.element.textContent)) {
      textPropertiesToUse.push({
        value: props.element.textContent,
        label: props.element.children[0].text,
        primary: false
      });
    }
    setTextOptions(textPropertiesToUse);
  }, [props.element, props.isSelected]);
  const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
  return /* @__PURE__ */ import_react12.default.createElement(
    EditorDropdown,
    {
      DropdownComponent: props.DropdownComponent,
      DropdownComponentBox: props.DropdownComponentBox,
      DropdownComponentWrapper: props.DropdownComponentWrapper,
      dropdownComponentWrapperTag: "span",
      isOpen: props.isSelected,
      dropdown: /* @__PURE__ */ import_react12.default.createElement(
        SelectField,
        {
          id: "template-text",
          label: props.baseI18n.addTemplateText.label,
          onChangeByEvent: updateTextContent,
          onChangeByValue: updateTextContentB,
          options: textOptions.map((v) => ({
            label: typeof v.label === "function" ? v.label() : v.label,
            value: v.value,
            primary: v.primary
          })),
          resetBlur: null,
          unblur: null,
          value: props.element.html
        }
      )
    },
    props.children
  );
}
function TdAndTh(props) {
  const path3 = props.helpers.ReactEditor.findPath(props.helpers.editor, props.element);
  const parentPath = [...path3];
  parentPath.pop();
  parentPath.pop();
  const parentTheadOrTbodyOrTfoot = props.helpers.Node.get(props.helpers.editor, parentPath);
  parentPath.pop();
  const tableElement = props.helpers.Node.get(props.helpers.editor, parentPath);
  const [tableType, setTableType] = (0, import_react12.useState)(tableElement.tableType || "");
  (0, import_react12.useEffect)(() => {
    setTableType(tableElement.tableType || "");
  }, [tableElement.tableType]);
  const updateTableTypeB = (0, import_react12.useCallback)((newValue) => {
    const path4 = props.helpers.ReactEditor.findPath(props.helpers.editor, props.element);
    const tablePath = [...path4];
    tablePath.pop();
    tablePath.pop();
    tablePath.pop();
    props.helpers.set({
      tableType: newValue || null
    }, tablePath);
    setTableType(newValue || "");
  }, []);
  const updateTableType = (0, import_react12.useCallback)((e2) => {
    updateTableTypeB(e2.target.value);
  }, [updateTableTypeB]);
  const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
  const Button = props.ElementWrapperButton || DefaultElementWrapperButtonComponent;
  return /* @__PURE__ */ import_react12.default.createElement(import_react12.default.Fragment, null, props.children, /* @__PURE__ */ import_react12.default.createElement(
    EditorDropdown,
    {
      DropdownComponent: props.DropdownComponent,
      DropdownComponentBox: props.DropdownComponentBox,
      DropdownComponentWrapper: props.DropdownComponentWrapper,
      dropdownComponentWrapperTag: "td",
      dropdownComponentWrapperHidden: true,
      dropdownComponentWrapperProps: { contentEditable: false },
      dropdownSizable: true,
      dropdown: /* @__PURE__ */ import_react12.default.createElement(import_react12.default.Fragment, null, props.featureSupport.availableTables.length ? /* @__PURE__ */ import_react12.default.createElement(
        SelectField,
        {
          value: tableType,
          onChangeByEvent: updateTableType,
          displayEmpty: true,
          label: props.baseI18n.type,
          id: "table-type",
          onChangeByValue: updateTableTypeB,
          options: [{
            label: " - ",
            value: ""
          }].concat(props.featureSupport.availableTables),
          resetBlur: null,
          unblur: null
        }
      ) : null, /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-add-td",
          label: props.baseI18n.formatAddTdLabel,
          onClick: props.helpers.insertTableColumn,
          disabled: false
        }
      ), /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-add-tr",
          label: props.baseI18n.formatAddTrLabel,
          onClick: props.helpers.insertTableRow,
          disabled: false
        }
      ), /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-del-td",
          label: props.baseI18n.formatDelTdLabel,
          onClick: props.helpers.deleteTableColumn,
          disabled: false
        }
      ), /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-del-tr",
          label: props.baseI18n.formatDelTrLabel,
          onClick: props.helpers.deleteTableRow,
          disabled: false
        }
      ), /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-toggle-th",
          label: props.baseI18n.formatAddThLabel,
          onClick: props.helpers.toggleTable.bind(null, "thead"),
          disabled: !props.helpers.canToggleTable("thead"),
          selected: props.element.type === "th"
        }
      ), /* @__PURE__ */ import_react12.default.createElement(
        Button,
        {
          id: "table-toggle-tfoot",
          label: props.baseI18n.formatAddTfootLabel,
          onClick: props.helpers.toggleTable.bind(null, "tfoot"),
          disabled: !props.helpers.canToggleTable("tfoot"),
          selected: parentTheadOrTbodyOrTfoot.type === "tfoot"
        }
      )),
      isOpen: props.isSelected,
      goIntoTreeDepth: -4
    },
    /* @__PURE__ */ import_react12.default.createElement("p", null)
  ));
}
var defaultElementWrappers = {
  components: {
    link: (props) => {
      const [valid, setValid] = (0, import_react12.useState)(true);
      const [linkOptions, setLinkOptions] = (0, import_react12.useState)([]);
      const [elementHref, setElementHref] = (0, import_react12.useState)(props.element.href || "");
      const updateElementHrefB = (0, import_react12.useCallback)((newV) => {
        const valid2 = props.helpers.updateLink(newV, props.element.thref || null);
        setElementHref(newV);
        setValid(valid2);
      }, [props.element]);
      const updateElementTHrefB = (0, import_react12.useCallback)((newV) => {
        const valid2 = props.helpers.updateLink(props.element.href || null, newV);
        setValid(valid2);
      }, [props.element]);
      const updateElementHref = (0, import_react12.useCallback)((e2) => {
        updateElementHrefB(e2.target.value);
      }, [updateElementHrefB]);
      const updateElementTHref = (0, import_react12.useCallback)((e2) => {
        updateElementTHrefB(e2.target.value);
      }, []);
      (0, import_react12.useEffect)(() => {
        if (!props.isSelected) {
          return;
        }
        const context = props.helpers.getContextFor(props.element);
        const rootContext = props.helpers.getRootContext();
        const linkPropertiesToUse = [];
        context && Object.keys(context.properties).forEach((key) => {
          const property = context.properties[key];
          if (property.type !== "link") {
            return;
          }
          linkPropertiesToUse.push({
            value: key,
            label: property.label || key,
            primary: context !== rootContext
          });
        });
        if (rootContext && rootContext !== context) {
          Object.keys(rootContext.properties).forEach((key) => {
            const property = rootContext.properties[key];
            if (property.nonRootInheritable) {
              return;
            }
            if (property.type !== "link") {
              return;
            }
            linkPropertiesToUse.push({
              value: key,
              label: property.label || key,
              primary: false
            });
          });
        }
        if (props.element.thref && !linkPropertiesToUse.some((p) => p.value === props.element.thref)) {
          linkPropertiesToUse.push({
            value: props.element.thref,
            label: props.element.thref,
            primary: false
          });
        }
        setElementHref(props.element.href || "");
        setLinkOptions(linkPropertiesToUse);
      }, [props.element, props.isSelected]);
      const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
      const TextField = props.ElementWrapperTextField || DefaultWrapperDrawerTextField;
      const FieldWrapperForMoreOptions = props.FieldWrapperForMoreOptions || DefaultFieldWrapperForMoreOptions;
      return /* @__PURE__ */ import_react12.default.createElement(
        EditorDropdown,
        {
          DropdownComponent: props.DropdownComponent,
          DropdownComponentBox: props.DropdownComponentBox,
          DropdownComponentWrapper: props.DropdownComponentWrapper,
          dropdownComponentWrapperTag: "span",
          isOpen: props.isSelected,
          dropdown: /* @__PURE__ */ import_react12.default.createElement(import_react12.default.Fragment, null, /* @__PURE__ */ import_react12.default.createElement(
            TextField,
            {
              value: elementHref,
              onChangeByEvent: updateElementHref,
              onChangeByValue: updateElementHrefB,
              label: props.baseI18n.setLink.label,
              disabled: !!props.element.thref,
              placeholder: props.featureSupport.supportsExternalLinks ? props.baseI18n.setLink.placeholder : props.baseI18n.setLink.placeholderLocalOnly,
              id: "link-href"
            }
          ), linkOptions.length ? /* @__PURE__ */ import_react12.default.createElement(FieldWrapperForMoreOptions, { label: props.baseI18n.setLink.templated }, /* @__PURE__ */ import_react12.default.createElement(
            SelectField,
            {
              id: "link-thref",
              value: props.element.thref || "",
              label: props.baseI18n.setLink.templatedLabel,
              placeholder: props.baseI18n.setLink.templatedPlaceholder,
              onChangeByEvent: updateElementTHref,
              onChangeByValue: updateElementTHrefB,
              displayEmpty: true,
              options: [{
                label: props.baseI18n.setLink.templatedUnspecified,
                value: ""
              }].concat(linkOptions.map((v) => ({
                label: typeof v.label === "function" ? v.label() : v.label,
                value: v.value,
                primary: v.primary
              }))),
              resetBlur: null,
              unblur: null
            }
          )) : null)
        },
        props.children
      );
    },
    video: (props) => {
      const [value, setValue] = (0, import_react12.useState)(getVideoURL(props.element));
      const [valid, setValid] = (0, import_react12.useState)(true);
      const updateVideoURLB = (0, import_react12.useCallback)((newV) => {
        setValue(newV);
        setValid(props.helpers.updateVideo(newV));
      }, []);
      const updateVideoURL = (0, import_react12.useCallback)((e2) => {
        updateVideoURLB(e2.target.value);
      }, [updateVideoURLB]);
      (0, import_react12.useEffect)(() => {
        setValue(getVideoURL(props.element));
      }, [props.element]);
      const TextField = props.ElementWrapperTextField || DefaultWrapperDrawerTextField;
      return /* @__PURE__ */ import_react12.default.createElement(
        EditorDropdown,
        {
          DropdownComponent: props.DropdownComponent,
          DropdownComponentBox: props.DropdownComponentBox,
          DropdownComponentWrapper: props.DropdownComponentWrapper,
          dropdown: /* @__PURE__ */ import_react12.default.createElement(
            TextField,
            {
              value,
              onChangeByEvent: updateVideoURL,
              onChangeByValue: updateVideoURLB,
              label: props.baseI18n.loadVideo.label,
              placeholder: props.baseI18n.loadVideo.placeholder,
              id: "video-url"
            }
          ),
          dropdownComponentWrapperTag: "div",
          goIntoTreeDepth: 1,
          isOpen: props.isSelected
        },
        props.children
      );
    },
    image: (props) => {
      const [alt, setAlt] = (0, import_react12.useState)(props.element.alt || "");
      (0, import_react12.useEffect)(() => {
        setAlt(props.element.alt || "");
      }, [props.element]);
      const updateAltB = (0, import_react12.useCallback)((newValue) => {
        const path3 = props.helpers.ReactEditor.findPath(props.helpers.editor, props.element);
        props.helpers.set({
          alt: newValue || null
        }, path3);
        setAlt(newValue);
      }, []);
      const updateAlt = (0, import_react12.useCallback)((e2) => {
        updateAltB(e2.target.value);
      }, [updateAltB]);
      const TextField = props.ElementWrapperTextField || DefaultWrapperDrawerTextField;
      return /* @__PURE__ */ import_react12.default.createElement(
        EditorDropdown,
        {
          DropdownComponent: props.DropdownComponent,
          DropdownComponentBox: props.DropdownComponentBox,
          DropdownComponentWrapper: props.DropdownComponentWrapper,
          dropdown: /* @__PURE__ */ import_react12.default.createElement(
            TextField,
            {
              value: alt,
              onChangeByEvent: updateAlt,
              onChangeByValue: updateAltB,
              label: props.baseI18n.alt,
              id: "image-alt"
            }
          ),
          dropdownComponentWrapperTag: "div",
          goIntoTreeDepth: props.element.standalone ? null : 1,
          isOpen: props.isSelected
        },
        props.children
      );
    },
    td: TdAndTh,
    th: TdAndTh,
    title: (props) => {
      const updateTitleTypeB = (0, import_react12.useCallback)((newV) => {
        const path3 = props.helpers.ReactEditor.findPath(props.helpers.editor, props.element);
        props.helpers.set({
          titleType: newV || null
        }, path3);
      }, []);
      const updateTitleType = (0, import_react12.useCallback)((e2) => {
        updateTitleTypeB(e2.target.value);
      }, [updateTitleTypeB]);
      const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
      return /* @__PURE__ */ import_react12.default.createElement(
        EditorDropdown,
        {
          DropdownComponent: props.DropdownComponent,
          DropdownComponentBox: props.DropdownComponentBox,
          DropdownComponentWrapper: props.DropdownComponentWrapper,
          dropdownComponentWrapperTag: "div",
          isOpen: props.isSelected,
          dropdown: /* @__PURE__ */ import_react12.default.createElement(
            SelectField,
            {
              id: "title-type",
              label: props.baseI18n.type,
              onChangeByEvent: updateTitleType,
              onChangeByValue: updateTitleTypeB,
              options: ["h1", "h2", "h3", "h4", "h5", "h6"].map((Element4) => {
                return {
                  label: /* @__PURE__ */ import_react12.default.createElement(Element4, null, props.baseI18n.title),
                  value: Element4 ? Element4 : " - "
                };
              }),
              resetBlur: null,
              unblur: null,
              value: props.element.titleType || "h1"
            }
          )
        },
        props.children
      );
    },
    inline: (props) => {
      if (typeof props.element.textContent !== "string") {
        return props.children;
      }
      return /* @__PURE__ */ import_react12.default.createElement(TextWrapper, __spreadValues({}, props));
    },
    "void-block": (props) => {
      if (typeof props.element.html === "undefined") {
        return props.children;
      }
      return /* @__PURE__ */ import_react12.default.createElement(HTMLWrapper, __spreadValues({}, props));
    },
    container: (props) => {
      const updateContainerTypeB = (0, import_react12.useCallback)((newV) => {
        const path3 = props.helpers.ReactEditor.findPath(props.helpers.editor, props.element);
        props.helpers.set({
          containerType: newV || null
        }, path3);
      }, []);
      const updateContainerType = (0, import_react12.useCallback)((e2) => {
        updateContainerTypeB(e2.target.value);
      }, [updateContainerTypeB]);
      if (!props.featureSupport.availableContainers.length) {
        return props.children;
      }
      const SelectField = props.ElementWrapperSelectField || DefaultWrapperDrawerSelectField;
      return /* @__PURE__ */ import_react12.default.createElement(
        EditorDropdown,
        {
          DropdownComponent: props.DropdownComponent,
          DropdownComponentBox: props.DropdownComponentBox,
          DropdownComponentWrapper: props.DropdownComponentWrapper,
          dropdownComponentWrapperTag: "span",
          isOpen: props.isSelected,
          dropdown: /* @__PURE__ */ import_react12.default.createElement(
            SelectField,
            {
              id: "container-type",
              label: props.baseI18n.type,
              onChangeByEvent: updateContainerType,
              onChangeByValue: updateContainerTypeB,
              options: [{
                label: " - ",
                value: ""
              }].concat(props.featureSupport.availableContainers),
              resetBlur: null,
              unblur: null,
              value: props.element.containerType || "",
              displayEmpty: true
            }
          )
        },
        props.children
      );
    }
  }
};

export {
  SlateEditor,
  defaultWrapperI18nRichInfoEnglish,
  DefaultSlateWrapper,
  defaultElementWrappers
};
/*! Bundled license information:

is-plain-object/dist/is-plain-object.mjs:
  (*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL2RpcmVjdGlvbi9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL2lzT2JqZWN0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvX2ZyZWVHbG9iYWwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC9fcm9vdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL25vdy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL190cmltbWVkRW5kSW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC9fYmFzZVRyaW0uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC9fU3ltYm9sLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvX2dldFJhd1RhZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL19vYmplY3RUb1N0cmluZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL19iYXNlR2V0VGFnLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvaXNPYmplY3RMaWtlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvaXNTeW1ib2wuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC90b051bWJlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoL2RlYm91bmNlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvdGhyb3R0bGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2lzLWhvdGtleS9saWIvaW5kZXguanMiLCAiLi4vLi4vZWRpdG9yL3NsYXRlL2luZGV4LnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvaXMtcGxhaW4tb2JqZWN0L2Rpc3QvaXMtcGxhaW4tb2JqZWN0Lm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvaW1tZXIvc3JjL3V0aWxzL2Vudi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvaW1tZXIvc3JjL3V0aWxzL2Vycm9ycy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvaW1tZXIvc3JjL3V0aWxzL2NvbW1vbi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvaW1tZXIvc3JjL3V0aWxzL3BsdWdpbnMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy9jb3JlL3Njb3BlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9pbW1lci9zcmMvY29yZS9maW5hbGl6ZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvaW1tZXIvc3JjL2NvcmUvcHJveHkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy9jb3JlL2ltbWVyQ2xhc3MudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy9jb3JlL2N1cnJlbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy9wbHVnaW5zL3BhdGNoZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2ltbWVyL3NyYy9wbHVnaW5zL21hcHNldC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvaW1tZXIvc3JjL2ltbWVyLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9wYXRoLXJlZi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvcG9pbnQtcmVmLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9yYW5nZS1yZWYudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy91dGlscy93ZWFrLW1hcHMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3BhdGgudHMiLCAiLi4vLi4vLi4vLi4vLi4vLnlhcm4vYmVycnkvY2FjaGUvQGJhYmVsLXJ1bnRpbWUtbnBtLTcuMjMuMi1kMDEzZDZjZjdlLTEwLnppcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mLmpzIiwgIi4uLy4uLy4uLy4uLy4uLy55YXJuL2JlcnJ5L2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjIzLjItZDAxM2Q2Y2Y3ZS0xMC56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvUHJpbWl0aXZlLmpzIiwgIi4uLy4uLy4uLy4uLy4uLy55YXJuL2JlcnJ5L2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjIzLjItZDAxM2Q2Y2Y3ZS0xMC56aXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvUHJvcGVydHlLZXkuanMiLCAiLi4vLi4vLi4vLi4vLi4vLnlhcm4vYmVycnkvY2FjaGUvQGJhYmVsLXJ1bnRpbWUtbnBtLTcuMjMuMi1kMDEzZDZjZjdlLTEwLnppcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvZ2VuZXJhbC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9ub2RlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy90cmFuc2Zvcm1zL3NlbGVjdGlvbi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3V0aWxzL2RlZXAtZXF1YWwudHMiLCAiLi4vLi4vLi4vLi4vLi4vLnlhcm4vYmVycnkvY2FjaGUvQGJhYmVsLXJ1bnRpbWUtbnBtLTcuMjMuMi1kMDEzZDZjZjdlLTEwLnppcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qcyIsICIuLi8uLi8uLi8uLi8uLi8ueWFybi9iZXJyeS9jYWNoZS9AYmFiZWwtcnVudGltZS1ucG0tNy4yMy4yLWQwMTNkNmNmN2UtMTAuemlwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvcmFuZ2UudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL2VsZW1lbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL25vZGUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL29wZXJhdGlvbi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9pcy1lZGl0b3IudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL2VkaXRvci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvbG9jYXRpb24udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3BvaW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvaW50ZXJmYWNlcy9zY3J1YmJlci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvdGV4dC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3V0aWxzL2dldC1kZWZhdWx0LWluc2VydC1sb2NhdGlvbi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3V0aWxzL21hdGNoLXBhdGgudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy91dGlscy9zdHJpbmcudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvdGV4dC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9pbmRleC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2NvcmUvYXBwbHkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9jb3JlL2dldC1kaXJ0eS1wYXRocy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2NvcmUvZ2V0LWZyYWdtZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvY29yZS9ub3JtYWxpemUtbm9kZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2NvcmUvc2hvdWxkLW5vcm1hbGl6ZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9hYm92ZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9hZGQtbWFyay50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9hZnRlci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9iZWZvcmUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvZGVsZXRlLWJhY2t3YXJkLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2RlbGV0ZS1mb3J3YXJkLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2RlbGV0ZS1mcmFnbWVudC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9lZGdlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9lbGVtZW50LXJlYWQtb25seS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9lbmQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvZmlyc3QudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvZnJhZ21lbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvZ2V0LXZvaWQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaGFzLWJsb2Nrcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9oYXMtaW5saW5lcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9oYXMtcGF0aC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9oYXMtdGV4dHMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaW5zZXJ0LWJyZWFrLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2luc2VydC1ub2RlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2luc2VydC1zb2Z0LWJyZWFrLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2luc2VydC10ZXh0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2lzLWJsb2NrLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2lzLWVkZ2UudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaXMtZW1wdHkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvaXMtZW5kLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2lzLW5vcm1hbGl6aW5nLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2lzLXN0YXJ0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL2xhc3QudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvbGVhZi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9sZXZlbHMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvbWFya3MudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvbmV4dC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9ub2RlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL25vZGVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL25vcm1hbGl6ZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9wYXJlbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvcGF0aC1yZWYudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvcGF0aC1yZWZzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3BhdGgudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvcG9pbnQtcmVmLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3BvaW50LXJlZnMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvcG9pbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvcG9zaXRpb25zLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3ByZXZpb3VzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3JhbmdlLXJlZi50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9yYW5nZS1yZWZzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3JhbmdlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3JlbW92ZS1tYXJrLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3NldC1ub3JtYWxpemluZy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9zdGFydC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2VkaXRvci9zdHJpbmcudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy9lZGl0b3IvdW5oYW5nLXJhbmdlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvZWRpdG9yL3dpdGhvdXQtbm9ybWFsaXppbmcudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLXRleHQvZGVsZXRlLXRleHQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLXRleHQvaW5zZXJ0LWZyYWdtZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1zZWxlY3Rpb24vY29sbGFwc2UudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLXNlbGVjdGlvbi9kZXNlbGVjdC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtc2VsZWN0aW9uL21vdmUudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLXNlbGVjdGlvbi9zZWxlY3QudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLXNlbGVjdGlvbi9zZXQtcG9pbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLXNlbGVjdGlvbi9zZXQtc2VsZWN0aW9uLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1ub2RlL2luc2VydC1ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS9saWZ0LW5vZGVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1ub2RlL21lcmdlLW5vZGVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1ub2RlL21vdmUtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLW5vZGUvcmVtb3ZlLW5vZGVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS9zcmMvdHJhbnNmb3Jtcy1ub2RlL3NldC1ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS9zcGxpdC1ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS91bnNldC1ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL3RyYW5zZm9ybXMtbm9kZS91bndyYXAtbm9kZXMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlL3NyYy90cmFuc2Zvcm1zLW5vZGUvd3JhcC1ub2Rlcy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUvc3JjL2NyZWF0ZS1lZGl0b3IudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2NvbXB1dGUtc2Nyb2xsLWludG8tdmlldy9zcmMvaW5kZXgudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3Njcm9sbC1pbnRvLXZpZXctaWYtbmVlZGVkL2VzL2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvcmVzaXplT2JzZXJ2ZXJzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvYWxnb3JpdGhtcy9oYXNBY3RpdmVPYnNlcnZhdGlvbnMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9hbGdvcml0aG1zL2hhc1NraXBwZWRPYnNlcnZhdGlvbnMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9hbGdvcml0aG1zL2RlbGl2ZXJSZXNpemVMb29wRXJyb3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9SZXNpemVPYnNlcnZlckJveE9wdGlvbnMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi91dGlscy9mcmVlemUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9SZXNpemVPYnNlcnZlclNpemUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9ET01SZWN0UmVhZE9ubHkuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi91dGlscy9lbGVtZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvZ2xvYmFsLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvYWxnb3JpdGhtcy9jYWxjdWxhdGVCb3hTaXplLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvUmVzaXplT2JzZXJ2ZXJFbnRyeS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL2FsZ29yaXRobXMvY2FsY3VsYXRlRGVwdGhGb3JOb2RlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvYWxnb3JpdGhtcy9icm9hZGNhc3RBY3RpdmVPYnNlcnZhdGlvbnMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9hbGdvcml0aG1zL2dhdGhlckFjdGl2ZU9ic2VydmF0aW9uc0F0RGVwdGguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi91dGlscy9wcm9jZXNzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvcXVldWVNaWNyb1Rhc2suanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi91dGlscy9xdWV1ZVJlc2l6ZU9ic2VydmVyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvdXRpbHMvc2NoZWR1bGVyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlci9saWIvUmVzaXplT2JzZXJ2YXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BqdWdnbGUvcmVzaXplLW9ic2VydmVyL2xpYi9SZXNpemVPYnNlcnZlckRldGFpbC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL1Jlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGp1Z2dsZS9yZXNpemUtb2JzZXJ2ZXIvbGliL1Jlc2l6ZU9ic2VydmVyLmpzIiwgIi4uLy4uLy55YXJuL2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjE1LjMtNjMzM2M3MTM2Mi0yZjBiOGQyZDRlLnppcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiLCAiLi4vLi4vLnlhcm4vY2FjaGUvQGJhYmVsLXJ1bnRpbWUtbnBtLTcuMTUuMy02MzMzYzcxMzYyLTJmMGI4ZDJkNGUuemlwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlLmpzIiwgIi4uLy4uLy55YXJuL2NhY2hlL0BiYWJlbC1ydW50aW1lLW5wbS03LjE1LjMtNjMzM2M3MTM2Mi0yZjBiOGQyZDRlLnppcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy91dGlscy9rZXkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy91dGlscy93ZWFrLW1hcHMudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy91dGlscy9kb20udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy91dGlscy9lbnZpcm9ubWVudC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3BsdWdpbi9yZWFjdC1lZGl0b3IudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2UtaXNvbW9ycGhpYy1sYXlvdXQtZWZmZWN0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMvcmFuZ2UtbGlzdC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2NvbXBvbmVudHMvc3RyaW5nLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1zbGF0ZS1zdGF0aWMudHN4IiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvY29tcG9uZW50cy9sZWFmLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2NvbXBvbmVudHMvdGV4dC50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL2VsZW1lbnQudHN4IiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLWRlY29yYXRlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLXNlbGVjdGVkLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLWNoaWxkcmVuLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1yZWFkLW9ubHkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2Utc2xhdGUudHN4IiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMvY29uc3RhbnRzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMvaG90a2V5cy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2NvbXBvbmVudHMvcmVzdG9yZS1kb20vcmVzdG9yZS1kb20tbWFuYWdlci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2NvbXBvbmVudHMvcmVzdG9yZS1kb20vcmVzdG9yZS1kb20udHN4IiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvdXRpbHMvZGlmZi10ZXh0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvYW5kcm9pZC1pbnB1dC1tYW5hZ2VyL2FuZHJvaWQtaW5wdXQtbWFuYWdlci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1pcy1tb3VudGVkLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1tdXRhdGlvbi1vYnNlcnZlci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL2FuZHJvaWQtaW5wdXQtbWFuYWdlci91c2UtYW5kcm9pZC1pbnB1dC1tYW5hZ2VyLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLXRyYWNrLXVzZXItaW5wdXQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9jb21wb25lbnRzL2VkaXRhYmxlLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2hvb2tzL3VzZS1mb2N1c2VkLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLXNsYXRlLXNlbGVjdG9yLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL2NvbXBvbmVudHMvc2xhdGUudHN4IiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvaG9va3MvdXNlLWVkaXRvci50c3giLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLXJlYWN0L3NyYy9ob29rcy91c2Utc2xhdGUtc2VsZWN0aW9uLnRzeCIsICIuLi8uLi9ub2RlX21vZHVsZXMvc2xhdGUtcmVhY3Qvc3JjL3V0aWxzL2xpbmVzLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1yZWFjdC9zcmMvcGx1Z2luL3dpdGgtcmVhY3QudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLWhpc3Rvcnkvc3JjL2hpc3RvcnkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3NsYXRlLWhpc3Rvcnkvc3JjL2hpc3RvcnktZWRpdG9yLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zbGF0ZS1oaXN0b3J5L3NyYy93aXRoLWhpc3RvcnkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3ByZXR0eS1ieXRlcy9pbmRleC5qcyIsICIuLi8uLi9lZGl0b3Ivc2xhdGUvY3VycmVudC1lbGVtZW50LnRzeCIsICIuLi8uLi91dGlsL2luZGV4LnRzIiwgIi4uLy4uL2VkaXRvci9pbmRleC50cyIsICIuLi8uLi9lZGl0b3Ivc2xhdGUvd3JhcHBlci50c3giLCAiLi4vLi4vZWRpdG9yL3NsYXRlL2RyYXdlci9pbmRleC50c3giLCAiLi4vLi4vZWRpdG9yL3NsYXRlL2RyYXdlci9nZW5lcmFsLnRzeCIsICIuLi8uLi9lZGl0b3Ivc2xhdGUvZHJhd2VyL3N0eWxlcy50c3giLCAiLi4vLi4vZWRpdG9yL3NsYXRlL2RyYXdlci9hY3Rpb25zLnRzeCIsICIuLi8uLi9lZGl0b3Ivc2xhdGUvZHJhd2VyL3RlbXBsYXRpbmcudHN4IiwgIi4uLy4uL2VkaXRvci9zbGF0ZS9kaWFsb2dzL2ZpbGUudHN4IiwgIi4uLy4uL2VkaXRvci9zbGF0ZS9lbGVtZW50LXdyYXBwZXJzLnRzeCIsICIuLi8uLi9lZGl0b3IvZWRpdG9yLWRyb3Bkb3duLnRzeCJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiJ3VzZSBzdHJpY3QnXG5cbm1vZHVsZS5leHBvcnRzID0gZGlyZWN0aW9uXG5cbnZhciBSVEwgPSAnXFx1MDU5MS1cXHUwN0ZGXFx1RkIxRC1cXHVGREZEXFx1RkU3MC1cXHVGRUZDJ1xudmFyIExUUiA9XG4gICdBLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjYnICtcbiAgJ1xcdTAwRjgtXFx1MDJCOFxcdTAzMDAtXFx1MDU5MFxcdTA4MDAtXFx1MUZGRlxcdTIwMEVcXHUyQzAwLVxcdUZCMUMnICtcbiAgJ1xcdUZFMDAtXFx1RkU2RlxcdUZFRkQtXFx1RkZGRidcblxudmFyIHJ0bCA9IG5ldyBSZWdFeHAoJ15bXicgKyBMVFIgKyAnXSpbJyArIFJUTCArICddJylcbnZhciBsdHIgPSBuZXcgUmVnRXhwKCdeW14nICsgUlRMICsgJ10qWycgKyBMVFIgKyAnXScpXG5cbmZ1bmN0aW9uIGRpcmVjdGlvbih2YWx1ZSkge1xuICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSB8fCAnJylcblxuICBpZiAocnRsLnRlc3QodmFsdWUpKSB7XG4gICAgcmV0dXJuICdydGwnXG4gIH1cblxuICBpZiAobHRyLnRlc3QodmFsdWUpKSB7XG4gICAgcmV0dXJuICdsdHInXG4gIH1cblxuICByZXR1cm4gJ25ldXRyYWwnXG59XG4iLCAiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3Q7XG4iLCAiLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxubW9kdWxlLmV4cG9ydHMgPSBmcmVlR2xvYmFsO1xuIiwgInZhciBmcmVlR2xvYmFsID0gcmVxdWlyZSgnLi9fZnJlZUdsb2JhbCcpO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm9vdDtcbiIsICJ2YXIgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cbiAqL1xudmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBub3c7XG4iLCAiLyoqIFVzZWQgdG8gbWF0Y2ggYSBzaW5nbGUgd2hpdGVzcGFjZSBjaGFyYWN0ZXIuICovXG52YXIgcmVXaGl0ZXNwYWNlID0gL1xccy87XG5cbi8qKlxuICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbUVuZGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBub24td2hpdGVzcGFjZVxuICogY2hhcmFjdGVyIG9mIGBzdHJpbmdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBsYXN0IG5vbi13aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbiAqL1xuZnVuY3Rpb24gdHJpbW1lZEVuZEluZGV4KHN0cmluZykge1xuICB2YXIgaW5kZXggPSBzdHJpbmcubGVuZ3RoO1xuXG4gIHdoaWxlIChpbmRleC0tICYmIHJlV2hpdGVzcGFjZS50ZXN0KHN0cmluZy5jaGFyQXQoaW5kZXgpKSkge31cbiAgcmV0dXJuIGluZGV4O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRyaW1tZWRFbmRJbmRleDtcbiIsICJ2YXIgdHJpbW1lZEVuZEluZGV4ID0gcmVxdWlyZSgnLi9fdHJpbW1lZEVuZEluZGV4Jyk7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW1TdGFydCA9IC9eXFxzKy87XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udHJpbWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byB0cmltLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdHJpbW1lZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUcmltKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nXG4gICAgPyBzdHJpbmcuc2xpY2UoMCwgdHJpbW1lZEVuZEluZGV4KHN0cmluZykgKyAxKS5yZXBsYWNlKHJlVHJpbVN0YXJ0LCAnJylcbiAgICA6IHN0cmluZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlVHJpbTtcbiIsICJ2YXIgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ltYm9sO1xuIiwgInZhciBTeW1ib2wgPSByZXF1aXJlKCcuL19TeW1ib2wnKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG5hdGl2ZU9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIHN5bVRvU3RyaW5nVGFnID0gU3ltYm9sID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogdW5kZWZpbmVkO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUdldFRhZ2Agd2hpY2ggaWdub3JlcyBgU3ltYm9sLnRvU3RyaW5nVGFnYCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgcmF3IGB0b1N0cmluZ1RhZ2AuXG4gKi9cbmZ1bmN0aW9uIGdldFJhd1RhZyh2YWx1ZSkge1xuICB2YXIgaXNPd24gPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBzeW1Ub1N0cmluZ1RhZyksXG4gICAgICB0YWcgPSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ107XG5cbiAgdHJ5IHtcbiAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ10gPSB1bmRlZmluZWQ7XG4gICAgdmFyIHVubWFza2VkID0gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge31cblxuICB2YXIgcmVzdWx0ID0gbmF0aXZlT2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIGlmICh1bm1hc2tlZCkge1xuICAgIGlmIChpc093bikge1xuICAgICAgdmFsdWVbc3ltVG9TdHJpbmdUYWddID0gdGFnO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdmFsdWVbc3ltVG9TdHJpbmdUYWddO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFJhd1RhZztcbiIsICIvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIHVzaW5nIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvYmplY3RUb1N0cmluZztcbiIsICJ2YXIgU3ltYm9sID0gcmVxdWlyZSgnLi9fU3ltYm9sJyksXG4gICAgZ2V0UmF3VGFnID0gcmVxdWlyZSgnLi9fZ2V0UmF3VGFnJyksXG4gICAgb2JqZWN0VG9TdHJpbmcgPSByZXF1aXJlKCcuL19vYmplY3RUb1N0cmluZycpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgbnVsbFRhZyA9ICdbb2JqZWN0IE51bGxdJyxcbiAgICB1bmRlZmluZWRUYWcgPSAnW29iamVjdCBVbmRlZmluZWRdJztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgc3ltVG9TdHJpbmdUYWcgPSBTeW1ib2wgPyBTeW1ib2wudG9TdHJpbmdUYWcgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldFRhZ2Agd2l0aG91dCBmYWxsYmFja3MgZm9yIGJ1Z2d5IGVudmlyb25tZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBgdG9TdHJpbmdUYWdgLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0VGFnKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWRUYWcgOiBudWxsVGFnO1xuICB9XG4gIHJldHVybiAoc3ltVG9TdHJpbmdUYWcgJiYgc3ltVG9TdHJpbmdUYWcgaW4gT2JqZWN0KHZhbHVlKSlcbiAgICA/IGdldFJhd1RhZyh2YWx1ZSlcbiAgICA6IG9iamVjdFRvU3RyaW5nKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlR2V0VGFnO1xuIiwgIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0TGlrZTtcbiIsICJ2YXIgYmFzZUdldFRhZyA9IHJlcXVpcmUoJy4vX2Jhc2VHZXRUYWcnKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIGJhc2VHZXRUYWcodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNTeW1ib2w7XG4iLCAidmFyIGJhc2VUcmltID0gcmVxdWlyZSgnLi9fYmFzZVRyaW0nKSxcbiAgICBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKSxcbiAgICBpc1N5bWJvbCA9IHJlcXVpcmUoJy4vaXNTeW1ib2wnKTtcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTkFOID0gMCAvIDA7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IGJhc2VUcmltKHZhbHVlKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9OdW1iZXI7XG4iLCAidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpLFxuICAgIG5vdyA9IHJlcXVpcmUoJy4vbm93JyksXG4gICAgdG9OdW1iZXIgPSByZXF1aXJlKCcuL3RvTnVtYmVyJyk7XG5cbi8qKiBFcnJvciBtZXNzYWdlIGNvbnN0YW50cy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG4gKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcbiAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcbiAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG4gKiBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICB0aW1lV2FpdGluZyA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmdcbiAgICAgID8gbmF0aXZlTWluKHRpbWVXYWl0aW5nLCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSlcbiAgICAgIDogdGltZVdhaXRpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuIiwgInZhciBkZWJvdW5jZSA9IHJlcXVpcmUoJy4vZGVib3VuY2UnKSxcbiAgICBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKTtcblxuLyoqIEVycm9yIG1lc3NhZ2UgY29uc3RhbnRzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgdGhyb3R0bGVkIGZ1bmN0aW9uIHRoYXQgb25seSBpbnZva2VzIGBmdW5jYCBhdCBtb3N0IG9uY2UgcGVyXG4gKiBldmVyeSBgd2FpdGAgbWlsbGlzZWNvbmRzLiBUaGUgdGhyb3R0bGVkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYFxuICogbWV0aG9kIHRvIGNhbmNlbCBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0b1xuICogaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgXG4gKiBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGUgbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgXG4gKiB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWQgd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlXG4gKiB0aHJvdHRsZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnQgY2FsbHMgdG8gdGhlIHRocm90dGxlZCBmdW5jdGlvbiByZXR1cm4gdGhlXG4gKiByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8udGhyb3R0bGVgIGFuZCBgXy5kZWJvdW5jZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB0aHJvdHRsZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB0aHJvdHRsZSBpbnZvY2F0aW9ucyB0by5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyB0aHJvdHRsZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGV4Y2Vzc2l2ZWx5IHVwZGF0aW5nIHRoZSBwb3NpdGlvbiB3aGlsZSBzY3JvbGxpbmcuXG4gKiBqUXVlcnkod2luZG93KS5vbignc2Nyb2xsJywgXy50aHJvdHRsZSh1cGRhdGVQb3NpdGlvbiwgMTAwKSk7XG4gKlxuICogLy8gSW52b2tlIGByZW5ld1Rva2VuYCB3aGVuIHRoZSBjbGljayBldmVudCBpcyBmaXJlZCwgYnV0IG5vdCBtb3JlIHRoYW4gb25jZSBldmVyeSA1IG1pbnV0ZXMuXG4gKiB2YXIgdGhyb3R0bGVkID0gXy50aHJvdHRsZShyZW5ld1Rva2VuLCAzMDAwMDAsIHsgJ3RyYWlsaW5nJzogZmFsc2UgfSk7XG4gKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgdGhyb3R0bGVkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIHRocm90dGxlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgdGhyb3R0bGVkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxlYWRpbmcgPSB0cnVlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAnbGVhZGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy5sZWFkaW5nIDogbGVhZGluZztcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG4gIHJldHVybiBkZWJvdW5jZShmdW5jLCB3YWl0LCB7XG4gICAgJ2xlYWRpbmcnOiBsZWFkaW5nLFxuICAgICdtYXhXYWl0Jzogd2FpdCxcbiAgICAndHJhaWxpbmcnOiB0cmFpbGluZ1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0aHJvdHRsZTtcbiIsICIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbi8qKlxuICogQ29uc3RhbnRzLlxuICovXG5cbnZhciBJU19NQUMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIC9NYWN8aVBvZHxpUGhvbmV8aVBhZC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtKTtcblxudmFyIE1PRElGSUVSUyA9IHtcbiAgYWx0OiAnYWx0S2V5JyxcbiAgY29udHJvbDogJ2N0cmxLZXknLFxuICBtZXRhOiAnbWV0YUtleScsXG4gIHNoaWZ0OiAnc2hpZnRLZXknXG59O1xuXG52YXIgQUxJQVNFUyA9IHtcbiAgYWRkOiAnKycsXG4gIGJyZWFrOiAncGF1c2UnLFxuICBjbWQ6ICdtZXRhJyxcbiAgY29tbWFuZDogJ21ldGEnLFxuICBjdGw6ICdjb250cm9sJyxcbiAgY3RybDogJ2NvbnRyb2wnLFxuICBkZWw6ICdkZWxldGUnLFxuICBkb3duOiAnYXJyb3dkb3duJyxcbiAgZXNjOiAnZXNjYXBlJyxcbiAgaW5zOiAnaW5zZXJ0JyxcbiAgbGVmdDogJ2Fycm93bGVmdCcsXG4gIG1vZDogSVNfTUFDID8gJ21ldGEnIDogJ2NvbnRyb2wnLFxuICBvcHQ6ICdhbHQnLFxuICBvcHRpb246ICdhbHQnLFxuICByZXR1cm46ICdlbnRlcicsXG4gIHJpZ2h0OiAnYXJyb3dyaWdodCcsXG4gIHNwYWNlOiAnICcsXG4gIHNwYWNlYmFyOiAnICcsXG4gIHVwOiAnYXJyb3d1cCcsXG4gIHdpbjogJ21ldGEnLFxuICB3aW5kb3dzOiAnbWV0YSdcbn07XG5cbnZhciBDT0RFUyA9IHtcbiAgYmFja3NwYWNlOiA4LFxuICB0YWI6IDksXG4gIGVudGVyOiAxMyxcbiAgc2hpZnQ6IDE2LFxuICBjb250cm9sOiAxNyxcbiAgYWx0OiAxOCxcbiAgcGF1c2U6IDE5LFxuICBjYXBzbG9jazogMjAsXG4gIGVzY2FwZTogMjcsXG4gICcgJzogMzIsXG4gIHBhZ2V1cDogMzMsXG4gIHBhZ2Vkb3duOiAzNCxcbiAgZW5kOiAzNSxcbiAgaG9tZTogMzYsXG4gIGFycm93bGVmdDogMzcsXG4gIGFycm93dXA6IDM4LFxuICBhcnJvd3JpZ2h0OiAzOSxcbiAgYXJyb3dkb3duOiA0MCxcbiAgaW5zZXJ0OiA0NSxcbiAgZGVsZXRlOiA0NixcbiAgbWV0YTogOTEsXG4gIG51bWxvY2s6IDE0NCxcbiAgc2Nyb2xsbG9jazogMTQ1LFxuICAnOyc6IDE4NixcbiAgJz0nOiAxODcsXG4gICcsJzogMTg4LFxuICAnLSc6IDE4OSxcbiAgJy4nOiAxOTAsXG4gICcvJzogMTkxLFxuICAnYCc6IDE5MixcbiAgJ1snOiAyMTksXG4gICdcXFxcJzogMjIwLFxuICAnXSc6IDIyMSxcbiAgJ1xcJyc6IDIyMlxufTtcblxuZm9yICh2YXIgZiA9IDE7IGYgPCAyMDsgZisrKSB7XG4gIENPREVTWydmJyArIGZdID0gMTExICsgZjtcbn1cblxuLyoqXG4gKiBJcyBob3RrZXk/XG4gKi9cblxuZnVuY3Rpb24gaXNIb3RrZXkoaG90a2V5LCBvcHRpb25zLCBldmVudCkge1xuICBpZiAob3B0aW9ucyAmJiAhKCdieUtleScgaW4gb3B0aW9ucykpIHtcbiAgICBldmVudCA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IG51bGw7XG4gIH1cblxuICBpZiAoIUFycmF5LmlzQXJyYXkoaG90a2V5KSkge1xuICAgIGhvdGtleSA9IFtob3RrZXldO1xuICB9XG5cbiAgdmFyIGFycmF5ID0gaG90a2V5Lm1hcChmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHBhcnNlSG90a2V5KHN0cmluZywgb3B0aW9ucyk7XG4gIH0pO1xuICB2YXIgY2hlY2sgPSBmdW5jdGlvbiBjaGVjayhlKSB7XG4gICAgcmV0dXJuIGFycmF5LnNvbWUoZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgcmV0dXJuIGNvbXBhcmVIb3RrZXkob2JqZWN0LCBlKTtcbiAgICB9KTtcbiAgfTtcbiAgdmFyIHJldCA9IGV2ZW50ID09IG51bGwgPyBjaGVjayA6IGNoZWNrKGV2ZW50KTtcbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gaXNDb2RlSG90a2V5KGhvdGtleSwgZXZlbnQpIHtcbiAgcmV0dXJuIGlzSG90a2V5KGhvdGtleSwgZXZlbnQpO1xufVxuXG5mdW5jdGlvbiBpc0tleUhvdGtleShob3RrZXksIGV2ZW50KSB7XG4gIHJldHVybiBpc0hvdGtleShob3RrZXksIHsgYnlLZXk6IHRydWUgfSwgZXZlbnQpO1xufVxuXG4vKipcbiAqIFBhcnNlLlxuICovXG5cbmZ1bmN0aW9uIHBhcnNlSG90a2V5KGhvdGtleSwgb3B0aW9ucykge1xuICB2YXIgYnlLZXkgPSBvcHRpb25zICYmIG9wdGlvbnMuYnlLZXk7XG4gIHZhciByZXQgPSB7fTtcblxuICAvLyBTcGVjaWFsIGNhc2UgdG8gaGFuZGxlIHRoZSBgK2Aga2V5IHNpbmNlIHdlIHVzZSBpdCBhcyBhIHNlcGFyYXRvci5cbiAgaG90a2V5ID0gaG90a2V5LnJlcGxhY2UoJysrJywgJythZGQnKTtcbiAgdmFyIHZhbHVlcyA9IGhvdGtleS5zcGxpdCgnKycpO1xuICB2YXIgbGVuZ3RoID0gdmFsdWVzLmxlbmd0aDtcblxuICAvLyBFbnN1cmUgdGhhdCBhbGwgdGhlIG1vZGlmaWVycyBhcmUgc2V0IHRvIGZhbHNlIHVubGVzcyB0aGUgaG90a2V5IGhhcyB0aGVtLlxuXG4gIGZvciAodmFyIGsgaW4gTU9ESUZJRVJTKSB7XG4gICAgcmV0W01PRElGSUVSU1trXV0gPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHZhbHVlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgIHZhciB2YWx1ZSA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICB2YXIgb3B0aW9uYWwgPSB2YWx1ZS5lbmRzV2l0aCgnPycpICYmIHZhbHVlLmxlbmd0aCA+IDE7XG5cbiAgICAgIGlmIChvcHRpb25hbCkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIC0xKTtcbiAgICAgIH1cblxuICAgICAgdmFyIG5hbWUgPSB0b0tleU5hbWUodmFsdWUpO1xuICAgICAgdmFyIG1vZGlmaWVyID0gTU9ESUZJRVJTW25hbWVdO1xuXG4gICAgICBpZiAobGVuZ3RoID09PSAxIHx8ICFtb2RpZmllcikge1xuICAgICAgICBpZiAoYnlLZXkpIHtcbiAgICAgICAgICByZXQua2V5ID0gbmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXQud2hpY2ggPSB0b0tleUNvZGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtb2RpZmllcikge1xuICAgICAgICByZXRbbW9kaWZpZXJdID0gb3B0aW9uYWwgPyBudWxsIDogdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBDb21wYXJlLlxuICovXG5cbmZ1bmN0aW9uIGNvbXBhcmVIb3RrZXkob2JqZWN0LCBldmVudCkge1xuICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgdmFyIGV4cGVjdGVkID0gb2JqZWN0W2tleV07XG4gICAgdmFyIGFjdHVhbCA9IHZvaWQgMDtcblxuICAgIGlmIChleHBlY3RlZCA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAna2V5JyAmJiBldmVudC5rZXkgIT0gbnVsbCkge1xuICAgICAgYWN0dWFsID0gZXZlbnQua2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09ICd3aGljaCcpIHtcbiAgICAgIGFjdHVhbCA9IGV4cGVjdGVkID09PSA5MSAmJiBldmVudC53aGljaCA9PT0gOTMgPyA5MSA6IGV2ZW50LndoaWNoO1xuICAgIH0gZWxzZSB7XG4gICAgICBhY3R1YWwgPSBldmVudFtrZXldO1xuICAgIH1cblxuICAgIGlmIChhY3R1YWwgPT0gbnVsbCAmJiBleHBlY3RlZCA9PT0gZmFsc2UpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChhY3R1YWwgIT09IGV4cGVjdGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogVXRpbHMuXG4gKi9cblxuZnVuY3Rpb24gdG9LZXlDb2RlKG5hbWUpIHtcbiAgbmFtZSA9IHRvS2V5TmFtZShuYW1lKTtcbiAgdmFyIGNvZGUgPSBDT0RFU1tuYW1lXSB8fCBuYW1lLnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKTtcbiAgcmV0dXJuIGNvZGU7XG59XG5cbmZ1bmN0aW9uIHRvS2V5TmFtZShuYW1lKSB7XG4gIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gIG5hbWUgPSBBTElBU0VTW25hbWVdIHx8IG5hbWU7XG4gIHJldHVybiBuYW1lO1xufVxuXG4vKipcbiAqIEV4cG9ydC5cbiAqL1xuXG5leHBvcnRzLmRlZmF1bHQgPSBpc0hvdGtleTtcbmV4cG9ydHMuaXNIb3RrZXkgPSBpc0hvdGtleTtcbmV4cG9ydHMuaXNDb2RlSG90a2V5ID0gaXNDb2RlSG90a2V5O1xuZXhwb3J0cy5pc0tleUhvdGtleSA9IGlzS2V5SG90a2V5O1xuZXhwb3J0cy5wYXJzZUhvdGtleSA9IHBhcnNlSG90a2V5O1xuZXhwb3J0cy5jb21wYXJlSG90a2V5ID0gY29tcGFyZUhvdGtleTtcbmV4cG9ydHMudG9LZXlDb2RlID0gdG9LZXlDb2RlO1xuZXhwb3J0cy50b0tleU5hbWUgPSB0b0tleU5hbWU7IiwgIi8qKlxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBzbGF0ZSBlbGVtZW50LCB0aGUgc2xhdGUgZWxlbWVudCBpcyB1c2VkIHRvIGNyZWF0ZVxuICogcmljaCB0ZXh0IGVkaXRvcnMgYW5kIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aCB0aGUgUHJvcGVydHlFbnRyeVRleHQgdHlwZVxuICogZXZlbiBpZiBpdCBjYW4gYWxzbyBiZSB1c2VkIGluIGEgc3RhbmRhbG9uZSB3YXlcbiAqIFxuICogQG1vZHVsZVxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBlcXVhbHMgZnJvbSBcImRlZXAtZXF1YWxcIjtcbmltcG9ydCB7IEJhc2VFZGl0b3IsIGNyZWF0ZUVkaXRvciwgVHJhbnNmb3JtcywgUmFuZ2UsIEVkaXRvciwgRWxlbWVudCwgTm9kZSwgUGF0aCwgVGV4dCwgTm9kZUVudHJ5LCBQb2ludCB9IGZyb20gXCJzbGF0ZVwiO1xuaW1wb3J0IHsgU2xhdGUsIEVkaXRhYmxlLCB3aXRoUmVhY3QsIFJlYWN0RWRpdG9yLCBSZW5kZXJFbGVtZW50UHJvcHMsIFJlbmRlckxlYWZQcm9wcyB9IGZyb20gXCJzbGF0ZS1yZWFjdFwiO1xuaW1wb3J0IHsgd2l0aEhpc3RvcnksIEhpc3RvcnlFZGl0b3IgfSBmcm9tIFwic2xhdGUtaGlzdG9yeVwiO1xuaW1wb3J0IHtcbiAgSVJvb3RMZXZlbERvY3VtZW50LCBkZXNlcmlhbGl6ZSwgU0VSSUFMSVpBVElPTl9SRUdJU1RSWSwgUmljaEVsZW1lbnQsIGRlc2VyaWFsaXplUGxhaW4sXG4gIGdldENvbnRleHRGb3IsIG5vcm1hbGl6ZUVsZW1lbnQsIGdldEFsbG93ZWRDaGlsZHJlblR5cGVzLCBnZXRVSUhhbmRsZXJWYWx1ZVdpdGhLbm93bkNvbnRleHRGb3IsIGlzSW5saW5lLCBpc1ZvaWQsIGlzU3VwZXJCbG9jaywgaXNCbG9jaywgZ2V0VVVJREZvcixcbiAgc2VyaWFsaXplLCBzZXJpYWxpemVTdHJpbmcsXG59IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyXCI7XG5pbXBvcnQgeyBjb252ZXJ0U3R5bGVTdHJpbmdUb1JlYWN0T2JqZWN0LCBJVUlIYW5kbGVyUHJvcHMgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci9iYXNlXCI7XG5pbXBvcnQgeyBJVmlkZW8gfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy92aWRlb1wiO1xuaW1wb3J0IHByZXR0eUJ5dGVzIGZyb20gXCJwcmV0dHktYnl0ZXNcIjtcbmltcG9ydCB7IElDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9jb250YWluZXJcIjtcbmltcG9ydCB7IElGaWxlIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvZmlsZVwiO1xuaW1wb3J0IHsgSUltYWdlIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvaW1hZ2VcIjtcbmltcG9ydCB7IElUZXh0LCBTVEFOREFSRF9URVhUX05PREUgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy90ZXh0XCI7XG5pbXBvcnQgeyBJQ3VzdG9tIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvY3VzdG9tXCI7XG5pbXBvcnQgeyBJSW5saW5lIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvaW5saW5lXCI7XG5pbXBvcnQgeyBDdXJyZW50RWxlbWVudFByb3ZpZGVyLCBDdXJyZW50RWxlbWVudFJldHJpZXZlciB9IGZyb20gXCIuL2N1cnJlbnQtZWxlbWVudFwiO1xuaW1wb3J0IHsgSVZvaWRCbG9jayB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL3ZvaWQtYmxvY2tcIjtcbmltcG9ydCB7IElMaXN0IH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvbGlzdFwiO1xuaW1wb3J0IHsgU1RBTkRBUkRfUEFSQUdSQVBIIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvcGFyYWdyYXBoXCI7XG5pbXBvcnQgeyBJVGVtcGxhdGVBcmdDb250ZXh0RGVmaW5pdGlvbiwgSVRlbXBsYXRlQXJnSFRNTERlZmluaXRpb24sIElUZW1wbGF0ZUFyZ1RleHREZWZpbml0aW9uLCBJVGVtcGxhdGVBcmdVSUhhbmRsZXJEZWZpbml0aW9uIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdGVtcGxhdGUtYXJnc1wiO1xuaW1wb3J0IHsgSUxpbmsgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9saW5rXCI7XG5pbXBvcnQgeyBJVGFibGUsIElUYm9keSwgSVRkLCBJVGZvb3QsIElUciB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL3RhYmxlXCI7XG5pbXBvcnQgeyBDT05UQUlORVJfQ0xBU1NfUFJFRklYLCBDVVNUT01fQ0xBU1NfUFJFRklYLCBJRmVhdHVyZVN1cHBvcnRPcHRpb25zLCBSSUNIX1RFWFRfQ0xBU1NfUFJFRklYLCBUQUJMRV9DTEFTU19QUkVGSVggfSBmcm9tIFwiLi4vLi4vc2FuaXRpemVyXCI7XG5pbXBvcnQgeyBjb3VudFNpemUgfSBmcm9tIFwiLi4vLi4vdXRpbFwiO1xuaW1wb3J0IHsgbG9jYWxlUmVwbGFjZXIsIG1pbWVUeXBlVG9FeHRlbnNpb24gfSBmcm9tIFwiLi5cIjtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRCYXNlSTE4blJpY2hJbmZvRW5nbGlzaDogSUJhc2VJMThuUmljaFRleHRJbmZvID0ge1xuICBhY3Rpb25zOiBcImFjdGlvbnNcIixcbiAgYWx0OiBcImFsdFwiLFxuICBjbGFzc2VzOiBcImNsYXNzZXNcIixcbiAgY29udGFpbmVyOiBcImNvbnRhaW5lclwiLFxuICBjb250ZXh0OiBcImNvbnRleHRcIixcbiAgY3VzdG9tOiBcImN1c3RvbVwiLFxuICBlYWNoOiBcImxvb3AgZm9yIGVhY2hcIixcbiAgZmlsZTogXCJmaWxlXCIsXG4gIGltYWdlOiBcImltYWdlXCIsXG4gIGlubGluZTogXCJpbmxpbmVcIixcbiAgaW50ZXJhY3RpdmU6IFwiaW50ZXJhY3RpdmUgezB9XCIsXG4gIGxpbms6IFwibGlua1wiLFxuICBsaXN0OiBcImxpc3RcIixcbiAgbGlzdEl0ZW06IFwibGlzdCBpdGVtXCIsXG4gIG5hbWU6IFwibmFtZVwiLFxuICBwYXJhZ3JhcGg6IFwicGFyYWdyYXBoXCIsXG4gIHF1b3RlOiBcInF1b3RlXCIsXG4gIHJlbmRlckNvbmRpdGlvbjogXCJyZW5kZXIgY29uZGl0aW9uXCIsXG4gIHJpY2hDbGFzc2VzOiB7fSxcbiAgcmljaENvbnRhaW5lcnM6IHt9LFxuICByaWNoQ3VzdG9tczoge30sXG4gIHJpY2hUYWJsZXM6IHt9LFxuICByaWNoVUlIYW5kbGVyRWxlbWVudDoge30sXG4gIHNldHRpbmdzOiBcInNldHRpbmdzXCIsXG4gIHNpemVzOiBcInNpemVzXCIsXG4gIHN0YW5kYWxvbmU6IFwic3RhbmRhbG9uZVwiLFxuICBzdHlsZTogXCJzdHlsZVwiLFxuICBzdHlsZUFjdGl2ZTogXCJzdHlsZSBhY3RpdmVcIixcbiAgc3R5bGVIb3ZlcjogXCJzdHlsZSBob3ZlclwiLFxuICBzdHlsZWQ6IFwic3R5bGVkIHswfVwiLFxuICBzdHlsZXM6IFwic3R5bGVzXCIsXG4gIHRhYmxlOiBcInRhYmxlXCIsXG4gIHRib2R5OiBcInRhYmxlIGJvZHlcIixcbiAgdGQ6IFwidGFibGUgY29sdW1uXCIsXG4gIHRlbXBsYXRlOiBcInRlbXBsYXRlIHswfVwiLFxuICB0ZW1wbGF0aW5nOiBcInRlbXBsYXRpbmdcIixcbiAgdGV4dDogXCJ0ZXh0XCIsXG4gIHRmb290OiBcInRhYmxlIGZvb3RlclwiLFxuICB0aDogXCJ0YWJsZSBjb2x1bW5cIixcbiAgdGhlYWQ6IFwidGFibGUgaGVhZFwiLFxuICB0aXRsZTogXCJ0aXRsZVwiLFxuICB0cjogXCJ0YWJsZSByb3dcIixcbiAgdHlwZTogXCJ0eXBlXCIsXG4gIHVpSGFuZGxlcjogXCJ1aSBoYW5kbGVyXCIsXG4gIHZpZGVvOiBcInZpZGVvXCIsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJhc2VJMThuUmljaFRleHRJbmZvIHtcbiAgbmFtZTogc3RyaW5nO1xuICBhbHQ6IHN0cmluZztcbiAgc2l6ZXM6IHN0cmluZztcbiAgY29udGFpbmVyOiBzdHJpbmc7XG4gIGlubGluZTogc3RyaW5nO1xuICB0ZXh0OiBzdHJpbmc7XG4gIGN1c3RvbTogc3RyaW5nO1xuICBmaWxlOiBzdHJpbmc7XG4gIGltYWdlOiBzdHJpbmc7XG4gIGxpbms6IHN0cmluZztcbiAgbGlzdDogc3RyaW5nO1xuICBsaXN0SXRlbTogc3RyaW5nO1xuICBwYXJhZ3JhcGg6IHN0cmluZztcbiAgcXVvdGU6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgdGFibGU6IHN0cmluZztcbiAgdGhlYWQ6IHN0cmluZztcbiAgdGJvZHk6IHN0cmluZztcbiAgdGZvb3Q6IHN0cmluZztcbiAgdHI6IHN0cmluZztcbiAgdGQ6IHN0cmluZztcbiAgdGg6IHN0cmluZztcbiAgdmlkZW86IHN0cmluZztcbiAgc3R5bGVkOiBzdHJpbmc7XG4gIHRlbXBsYXRlOiBzdHJpbmc7XG4gIGludGVyYWN0aXZlOiBzdHJpbmc7XG4gIHN0eWxlOiBzdHJpbmc7XG4gIHN0eWxlQWN0aXZlOiBzdHJpbmc7XG4gIHN0eWxlSG92ZXI6IHN0cmluZztcbiAgY2xhc3Nlczogc3RyaW5nO1xuICBzZXR0aW5nczogc3RyaW5nO1xuICBzdHlsZXM6IHN0cmluZztcbiAgdGVtcGxhdGluZzogc3RyaW5nO1xuICBhY3Rpb25zOiBzdHJpbmc7XG4gIGVhY2g6IHN0cmluZztcbiAgY29udGV4dDogc3RyaW5nO1xuICByZW5kZXJDb25kaXRpb246IHN0cmluZztcbiAgdWlIYW5kbGVyOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgc3RhbmRhbG9uZTogc3RyaW5nO1xuXG4gIHJpY2hVSUhhbmRsZXJFbGVtZW50OiB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xuICB9O1xuICByaWNoVGFibGVzOiB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xuICB9O1xuICByaWNoQ29udGFpbmVyczoge1xuICAgIFtrZXk6IHN0cmluZ106IHN0cmluZztcbiAgfTtcbiAgcmljaENsYXNzZXM6IHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG4gIH07XG4gIHJpY2hDdXN0b21zOiB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xuICB9O1xufVxuXG5kZWNsYXJlIG1vZHVsZSAnc2xhdGUnIHtcbiAgaW50ZXJmYWNlIEN1c3RvbVR5cGVzIHtcbiAgICBFZGl0b3I6IEJhc2VFZGl0b3IgJiBSZWFjdEVkaXRvcjtcbiAgICBFbGVtZW50OiBSaWNoRWxlbWVudDtcbiAgICBUZXh0OiBJVGV4dDtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTbGF0ZUZpbGUge1xuICAvKipcbiAqIHRoZSBuYW1lIG9mIHRoZSBmaWxlXG4gKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIG1pbWUgdHlwZVxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICogYW4gdW5pcXVlIGlkXG4gICAqL1xuICBpZDogc3RyaW5nO1xuICAvKipcbiAgICogdGhlIHVybCB3aGVyZSBpdCBpcyBzdG9yZWRcbiAgICovXG4gIHVybDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHNpemUgb2YgdGhlIGZpbGUgaW4gYnl0ZXNcbiAgICovXG4gIHNpemU6IG51bWJlcjtcbiAgLyoqXG4gICAqIG9wdGlvbmFsIG1ldGFkYXRhLCBtaWdodCBiZSBudWxsLCB1c3VhbGx5IGNvbnN0YWlucyB3aWR0aCBhbmRcbiAgICogaGVpZ2h0LCBzZXQgYnkgdGhlIGNsaWVudCwgaXMgbGltaXRlZCB0byAxMjggY2hhcmFjdGVyc1xuICAgKiBcbiAgICogZW5jb2RpbmcgaXMgV3hIO25hbWUsbmFtZSxuYW1lIGFzIG1hbnkgbmFtZXMgYXMgdGhlcmUgYXJlIHNwZWNpYWxcbiAgICogZGltZW5zaW9ucywgbGFyZ2UsIHNtYWxsIGFuZCBtZWRpdW0gZG8gbm90IGNvdW50XG4gICAqL1xuICBtZXRhZGF0YTogc3RyaW5nLFxuICAvKipcbiAgICogQSBzb3VyY2UsIGVpdGhlciBhIEZpbGUgb3IgQmxvYlxuICAgKi9cbiAgc3JjPzogRmlsZSB8IEJsb2I7XG59O1xuXG4vKipcbiAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBmaWxlIHRoYXQgaGFzIGp1c3QgYmVlbiBpbnNlcnRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElTbGF0ZUluc2VydGVkRmlsZUluZm9ybWF0aW9uVHlwZSB7XG4gIC8qKlxuICAgKiBUaGUgZmlsZSBpdHNlbGZcbiAgICovXG4gIHJlc3VsdDogSVNsYXRlRmlsZTtcbiAgLyoqXG4gICAqIHdpZHRoIG9mIHRoZSBmaWxlLCBvbmx5IGF2YWlsYWJsZSBpZiBpdCdzIGFuIGltYWdlXG4gICAqL1xuICB3aWR0aDogbnVtYmVyO1xuICAvKipcbiAgICogaGVpZ2h0IG9mIHRoZSBmaWxlLCBvbmx5IGF2YWlsYWJsZSBpZiBpdCdzIGFuIGltYWdlXG4gICAqL1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgLyoqXG4gICAqIHdoZXRoZXIgaXQgaXMgYW4gaW1hZ2VcbiAgICovXG4gIGlzSW1hZ2U6IGJvb2xlYW47XG59XG5cbi8qKlxuICogVXNlZCB3aXRoaW4gY29udGV4dHMgd2l0aCBsb29wIGVtdWxhdGlvbiB0byBkaXNhYmxlIHRoZSBlbGVtZW50IHdyYXBwZXIgdG8gZGlzcGxheSBpbiBhbGxcbiAqIGJ1dCB0aGUgbGFzdCBlbGVtZW50XG4gKi9cbmNvbnN0IEVsZW1lbnRXcmFwcGVyRGlzYWJsZXIgPSBSZWFjdC5jcmVhdGVDb250ZXh0KGZhbHNlKTtcblxuZnVuY3Rpb24gZmluZExhc3RJbmRleChhcnI6IGFueVtdLCBmbjogKGVsZTogYW55KSA9PiBib29sZWFuKSB7XG4gIGxldCBjdXJyZW50SW5kZXggPSBhcnIubGVuZ3RoO1xuICB3aGlsZSAoY3VycmVudEluZGV4LS0pIHtcbiAgICBpZiAoZm4oYXJyW2N1cnJlbnRJbmRleF0pKSB7XG4gICAgICByZXR1cm4gY3VycmVudEluZGV4O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuLy8gZm9yIHNvbWUgcmVhc29uIGRlc3BpdGUgdGhlcmUgYmVpbmcgYSBzaW5nbGUgY2xhc3MgYW5kIHdpdGggY2VydGFpbnR5XG4vLyB3aGVuIHRoZSBmb2N1c0F0IGZ1bmN0aW9uIGdldHMgY2FsbGVkIHRoZSBvbkZvY3VzIGZ1bmN0aW9uIGdldHMgZXhlY3V0ZWQgd2l0aFxuLy8gdGhlIHByZXZpb3VzIHZhbHVlcyBmb3IgdGhlIGluc3RhbmNlIGluIGEgd2F5IHRoYXQgbWFrZXMgemVybyBzZW5zZVxuLy8gc29tZSBvcHRpbWl6YXRpb24gdGhpbmdzIGFyZSBnb2luZyBvbiBmcm9tIHRoZSBicm93c2VyXG4vLyBUaGlzIG9ubHkgb2NjdXJzIGluIENocm9tZS4uLi4gc28gaXQgaXMgcmVsYXRlZCB0byBjaHJvbWVcbi8vIGxldCBwcmV2ZW50TmV4dEZvY3VzID0gZmFsc2U7XG5cbi8vIGZ1bmN0aW9uIHByZXZlbnRGb2N1cygpIHtcbi8vICAgcHJldmVudE5leHRGb2N1cyA9IHRydWU7XG4vLyAgIHNldFRpbWVvdXQoKCkgPT4ge1xuLy8gICAgIHByZXZlbnROZXh0Rm9jdXMgPSBmYWxzZTtcbi8vICAgfSwgMzAwKTtcbi8vIH1cblxuLy8gU2xhdGUgaXMgYnVnZ3kgcmVnYXJkaW5nIHNoaWZ0K3RhYlxuLy8gcmVtb3ZlIHdoZW4gc2hpZnQrdGFiIGlzIGZpeGVkXG5jb25zdCBFRElUT1JfUE9PTCA9IG5ldyBNYXA8SFRNTEVsZW1lbnQsIFNsYXRlRWRpdG9yPigpO1xuXG4vLyBidWdneSB0byByZXBhaXIgaXQgbm90IGZvY3VzaW5nIHdoZW4gaXQgc2hvdWxkIGFuZCBrZWVwaW5nIGZvY3VzIHdoZW4gaXQgc2hvdWxkbid0XG4vLyBmb3IgYm90aCB0YWIgYW5kIHNoaWZ0IHRhYlxuZnVuY3Rpb24gb25BbnlUYWIoZXY6IEtleWJvYXJkRXZlbnQpIHtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgY29uc3QgZWRpdG9yRWxlbWVudCA9IEVESVRPUl9QT09MLmdldChkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIGFueSk7XG4gICAgRURJVE9SX1BPT0wuZm9yRWFjaCgoZSkgPT4gZSAhPT0gZWRpdG9yRWxlbWVudCAmJiBlLnNlbGVjdGl2ZUhhcmRCbHVySWZIYXNTZWxlY3RlZEVsZW1lbnQoZXYsIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCA/XG4gICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50IDogbnVsbCkpO1xuICAgIGlmIChlZGl0b3JFbGVtZW50KSB7XG4gICAgICAvLyBtYXliZSBhIHdheSB0byBrZWVwIHRoZSBjdXJzb3Igd2hlcmUgaXQgd2FzPy4uLi5cbiAgICAgIC8vIGl0J3Mga2luZCBvZiBhbm5veWluZyB0aGF0IHRoZSBjdXJzb3IgbW92ZXNcbiAgICAgIGVkaXRvckVsZW1lbnQuZm9yY2VGb2N1cygpO1xuICAgIH1cbiAgfSwgNzApO1xufVxuXG4vLyB3aGF0J3Mgd29yc2Ugc29tZXRpbWVzIGl0IHJldGFpbnMgZm9jdXMgd2hlbiBpdCBzaG91bGRuJ3RcblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gXCJUYWJcIikge1xuICAgICAgb25BbnlUYWIoZSk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBDb21iaW5lIGJvdGggaW50ZXJmYWNlc1xuICovXG5pbnRlcmZhY2UgSXRlbWl6ZUVkaXRvciBleHRlbmRzIFJlYWN0RWRpdG9yLCBIaXN0b3J5RWRpdG9yIHsgfTtcblxuLyoqXG4gKiBUaGUgdWkgaGFuZGxlciBwcm9wcyB0aGF0IGFuIHVpIGhhbmRsZXIgdGFrZXNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJU2xhdGVUZW1wbGF0ZVVJSGFuZGxlclByb3BzIGV4dGVuZHMgSVVJSGFuZGxlclByb3BzIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgaXQgaXMgY3VycmVudGx5IGludG8gYW4gc2xhdGUgaW5zdGFuY2VcbiAgICovXG4gIGlzU2xhdGU6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUaGUgYXR0cmlidXRlcyB0aGF0IHNsYXRlIHByb3ZpZGVzXG4gICAqL1xuICBhdHRyaWJ1dGVzOiBhbnk7XG4gIC8qKlxuICAgKiBUaGUgaGVscGVycyB0aGF0IG1pZ2h0IGJlIHByb3ZpZGVkIGlmIHRoZSBoYW5kbGVyXG4gICAqIHJlcXVlc3RzIGV4dHJhIGluZm9cbiAgICovXG4gIGhlbHBlcnM/OiBJSGVscGVyRnVuY3Rpb25zO1xuICAvKipcbiAgICogVGhlIHNlbGVjdGVkIHN0YXRlIHRoYXQgbWlnaHQgYmUgcHJvdmlkZWQgaWYgdGhlIGhhbmRsZXJcbiAgICogcmVxdWVzdHMgZXh0cmEgaW5mb1xuICAgKi9cbiAgc2VsZWN0ZWQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gYXZhaWxhYmxlIGVsZW1lbnQsIHVzZWQgaW50ZXJuYWxseVxuICogZm9yIHRoZSBjbGFzc2VzIHRoYXQgYXJlIGF2YWlsYWJsZSBmb3IgdXNhZ2Ugb24gcmljaFxuICogY2xhc3NlcywgY29udGFpbmVyLCBhbmQgc28gb24uLi5cbiAqL1xuaW50ZXJmYWNlIElBdmFpbGFibGVFbGVtZW50Q1NTQ2xhc3NOYW1lIHtcbiAgLyoqXG4gICAqIFRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gYXZhaWxhYmxlIGVsZW1lbnRcbiAgICovXG4gIHZhbHVlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBBIGh1bWFuIHJlYWRhYmxlIHZhbHVlLCBleHRyYWN0ZWQgZnJvbSB0aGUgcm9vdFxuICAgKiBpMThuIGRhdGEgd2l0aCB0aGUgc2FtZSBjbGFzcyBuYW1lXG4gICAqIGZvciB0aGUgZ2l2ZW4gY3VycmVudCBsYW5ndWFnZSwgaXQgaXMgdXN1YWxseSBzdWJjbGFzc2VkXG4gICAqIGludG8gc2V2ZXJhbCBzdWJjb250YWluZXJzIGluIHRoZSByb290IGluZm9ybWF0aW9uIGdpdmVuXG4gICAqIFxuICAgKiByaWNoOiBmb3IgcmljaCB0ZXh0IGNsYXNzZXNcbiAgICogY29udGFpbmVyczogZm9yIGNvbnRhaW5lcnNcbiAgICogY3VzdG9tOiBmb3IgY3VzdG9tXG4gICAqIFxuICAgKiBlZy4gY29udGFpbmVyLW1heGltdW0gYXMgYSBjbGFzcyBuYW1lLCBpcyByZWZlcnJlZCBhc1xuICAgKiBtYXhpbXVtIGFzIHRoZSBjb250YW5lciB0eXBlLCBzbyBpdCB3aWxsIGxvb2sgZm9yIGNvbnRhaW5lcnMubWF4aW11bVxuICAgKiBpbiB0aGUgcHJvcGVydGllcyBmaWxlIG9uIHRoZSBnaXZlbiBsYW5ndWFnZSBmb3IgYSBnaXZlbiBsYWJlbFxuICAgKiBcbiAgICogZWcuIHJpY2gtdGV4dC0tdWx0cmEtbWVnYS1ib2xkIGlzIHJlZmVycmVkIGFzIHRoZSB1bHRyYS1tZWdhLWJvbGRcbiAgICogcmljaCBjbGFzcywgc28gaXQgd2lsbCBsb29rIGZvciByaWNoLnVsdHJhLW1lZ2EtYm9sZCBvciByaWNoLnVsdHJhX21lZ2FfYm9sZFxuICAgKiBpbiB0aGUgcHJvcGVydGllcyBmaWxlXG4gICAqL1xuICBsYWJlbDogc3RyaW5nO1xufVxuXG4vLyBXZSBuZWVkIHRvIGZpbmQgYWxsIHRoZSBjb250YWluZXJzLCBjdXN0b20gY2xhc3NlcyBhbmQgcmljaCBjbGFzc2VzXG4vLyB3ZSBoYXZlIGF2YWlsYWJsZSBieSBkZWZhdWx0IGFuZCB0aGF0IGNhbiBiZSB1c2VkIGluc2lkZSB0aGUgaXRlbWl6ZVxuLy8gYXBwbGljYXRpb24sIHNvIHdlIHVzZSB0aGVzZSBoZWxwZXIgdmFyaWFibGVzXG4vLyB0aGF0IGV4aXN0cyBvbmx5IGhlcmUgaW5zaWRlIHRoaXMgbW9kdWxlXG5cbi8qKlxuICogQWxsIHRoZSBjb250YWluZXJzIHRoYXQgd2UgY291bGQgZmluZCBzbyBmYXJcbiAqIEBpZ25vcmVcbiAqL1xubGV0IEFMTF9DT05UQUlORVJTOiBzdHJpbmdbXSA9IFtdO1xuLyoqXG4gKiBBbGwgdGhlIHRhYmxlcyB0aGF0IHdlIGNvdWxkIGZpbmQgc28gZmFyXG4gKiBAaWdub3JlXG4gKi9cbmxldCBBTExfVEFCTEVTOiBzdHJpbmdbXSA9IFtdO1xuLyoqXG4gKiBBbGwgdGhlIGN1c3RvbSBjbGFzc2VzIHRoYXQgd2UgY291bGQgZmluZCBzbyBmYXJcbiAqIEBpZ25vcmVcbiAqL1xubGV0IEFMTF9DVVNUT006IHN0cmluZ1tdID0gW107XG4vKipcbiAqIEFsbCB0aGUgcmljaCBjbGFzc2VzIHRoYXQgd2UgY291bGQgZmluZCBzbyBmYXJcbiAqIEBpZ25vcmVcbiAqL1xubGV0IEFMTF9SSUNIX0NMQVNTRVM6IHN0cmluZ1tdID0gW107XG4vKipcbiAqIFdoZXRoZXIgd2UgaGF2ZSBsb2FkZWQgYWxsIHRoZXNlIHZhcmlhYmxlc1xuICogQGlnbm9yZVxuICovXG5sZXQgQUxMX0lTX0xPQURFRDogYm9vbGVhbiA9IGZhbHNlO1xuXG4vKipcbiAqIFdpdGggYSBnaXZlbiBzdHlsZXNoZWV0IHRoYXQgaXMgcGFzc2VkIGluc2lkZSB0aGUgc3R5bGVzaGVldCB2YXJpYWJsZVxuICogc2V0LCBpdCB3aWxsIHVzZSBpdCB0byBmaW5kIHRoZSBnaXZlbiBjbGFzcyBuYW1lcyB0aGF0IGFyZSBhdmFpbGFibGVcbiAqIGZvciB1c2FnZSB3aXRoaW4gdGhlIHJpY2ggdGV4dCBlZGl0b3IgYW5kIGFkZCBpdCB0byB0aGUgcmVnaXN0cnlcbiAqIEBwYXJhbSBzdHlsZXNoZWV0IHRoZSBzdHlsZXNoZWV0IHRvIGNhbGN1bGF0ZVxuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVTdHlsZXNoZWV0KHN0eWxlc2hlZXQ6IENTU1N0eWxlU2hlZXQgfCBDU1NNZWRpYVJ1bGUpIHtcbiAgLy8gc28gZmlyc3Qgd2Ugc3BsaXQgd2l0aGluIHRoZSBydWxlc1xuICBBcnJheS5mcm9tKHN0eWxlc2hlZXQuY3NzUnVsZXMpLmZvckVhY2goKHIpID0+IHtcbiAgICBpZiAociBpbnN0YW5jZW9mIENTU01lZGlhUnVsZSB8fCAociBhcyBhbnkpLmNzc1J1bGVzKSB7XG4gICAgICBjYWxjdWxhdGVTdHlsZXNoZWV0KHIgYXMgQ1NTTWVkaWFSdWxlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBhbmQgbm93IHdlIG5lZWQgdGhlIHNlbGVjdG9yIHBhcnQgdGhhdCBzZWxlY3RzLCBhbmQgc3BsaXQgaXQgc28gd2UgaGF2ZVxuICAgIC8vIHNvbWV0aGluZyBsaWtlIFtcIi50cnVzdGVkXCIsIFwiLnJpY2gtdGV4dC0tc29tZXRoaW5nXCJdXG4gICAgLy8gc2VsZWN0b3JUZXh0IGlzIHN1cHBvcnRlZCBpbiBjaHJvbWl1bSBiYXNlZCBicm93c2VycyBidXQgbm90IGFsbCwgc28gd2UgaGF2ZSBhIG1vcmUgZXhwZW5zaXZlXG4gICAgLy8gZmFsbGJhY2sgaW4gcGxhY2UgZm9yIHRoYXRcbiAgICBjb25zdCBzZWxlY3RvclNwbGl0dGVkID0gKChyIGFzIGFueSkuc2VsZWN0b3JUZXh0IGFzIHN0cmluZyB8fCByLmNzc1RleHQuc3BsaXQoXCJ7XCIpWzBdLnRyaW0oKSkuc3BsaXQoXCIgXCIpO1xuXG4gICAgLy8gbm93IHdlIHRha2UgdGhhdCBzZWxlY3Rpb24sIHdlIGFyZSBvbmx5IGNvbmNlcm5lZCB3aXRoIHRoZSBjbGFzc2VzXG4gICAgLy8gdGhhdCBtYXRjaCBvdXIgcHJlZml4ZWQgdGhpbmdzXG4gICAgc2VsZWN0b3JTcGxpdHRlZC5mb3JFYWNoKChzYmFzZSkgPT4ge1xuICAgICAgbGV0IGludGVybmFsU2VsZWN0b3JTcGxpdHRlZCA9IHNiYXNlLnNwbGl0KFwiLlwiKTtcbiAgICAgIGludGVybmFsU2VsZWN0b3JTcGxpdHRlZC5zaGlmdCgpO1xuXG4gICAgICBpbnRlcm5hbFNlbGVjdG9yU3BsaXR0ZWQuZm9yRWFjaCgocykgPT4ge1xuICAgICAgICAvLyBub3cgd2UgdGFrZSB0aGUgY2xhc3MgbmFtZVxuICAgICAgICBsZXQgY2xhc3NOYW1lID0gcztcbiAgICAgICAgaWYgKGNsYXNzTmFtZS5pbmNsdWRlcyhcIjpcIikpIHtcbiAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3BsaXQoXCI6XCIpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbGFzc05hbWUuZW5kc1dpdGgoXCIsXCIpKSB7XG4gICAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnN1YnN0cigwLCBjbGFzc05hbWUubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhbmQgd2UgY2hlY2sgd2hldGhlciBpdCBtYXRjaGVzIGFueSBvZiBvdXIgcHJlZml4ZXMgdGhhdFxuICAgICAgICAvLyBtYWtlIGl0IGEgdmFsaWQgY2xhc3Mgb2YgdGhlIGdpdmVuIHR5cGVcbiAgICAgICAgaWYgKGNsYXNzTmFtZS5zdGFydHNXaXRoKENPTlRBSU5FUl9DTEFTU19QUkVGSVgpKSB7XG4gICAgICAgICAgY29uc3QgdG9QdXNoID0gY2xhc3NOYW1lLnN1YnN0cihDT05UQUlORVJfQ0xBU1NfUFJFRklYLmxlbmd0aCk7XG4gICAgICAgICAgaWYgKCFBTExfQ09OVEFJTkVSUy5pbmNsdWRlcyh0b1B1c2gpKSB7XG4gICAgICAgICAgICBBTExfQ09OVEFJTkVSUy5wdXNoKHRvUHVzaCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZS5zdGFydHNXaXRoKFRBQkxFX0NMQVNTX1BSRUZJWCkpIHtcbiAgICAgICAgICBjb25zdCB0b1B1c2ggPSBjbGFzc05hbWUuc3Vic3RyKFRBQkxFX0NMQVNTX1BSRUZJWC5sZW5ndGgpO1xuICAgICAgICAgIGlmICghQUxMX1RBQkxFUy5pbmNsdWRlcyh0b1B1c2gpKSB7XG4gICAgICAgICAgICBBTExfVEFCTEVTLnB1c2godG9QdXNoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lLnN0YXJ0c1dpdGgoQ1VTVE9NX0NMQVNTX1BSRUZJWCkpIHtcbiAgICAgICAgICBjb25zdCB0b1B1c2ggPSBjbGFzc05hbWUuc3Vic3RyKENVU1RPTV9DTEFTU19QUkVGSVgubGVuZ3RoKTtcbiAgICAgICAgICBpZiAoIUFMTF9DVVNUT00uaW5jbHVkZXModG9QdXNoKSkge1xuICAgICAgICAgICAgQUxMX0NVU1RPTS5wdXNoKHRvUHVzaCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZS5zdGFydHNXaXRoKFJJQ0hfVEVYVF9DTEFTU19QUkVGSVgpKSB7XG4gICAgICAgICAgY29uc3QgdG9QdXNoID0gY2xhc3NOYW1lLnN1YnN0cihSSUNIX1RFWFRfQ0xBU1NfUFJFRklYLmxlbmd0aCk7XG4gICAgICAgICAgaWYgKCFBTExfUklDSF9DTEFTU0VTLmluY2x1ZGVzKHRvUHVzaCkpIHtcbiAgICAgICAgICAgIEFMTF9SSUNIX0NMQVNTRVMucHVzaCh0b1B1c2gpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIHdlIGFyZSBnb2luZyB0byBidWlsZCBhIHByb21pc2VcbiAqIGZvciByZXRyaWV2aW5nIHRoZSBhdmFpbGFibGUgY2xhc3NlcyBmb3IgdGhlIHJpY2hcbiAqIHRleHQgZWRpdG9yXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IEFMTF9QUk9NSVNFID0gbmV3IFByb21pc2U8dm9pZD4oYXN5bmMgKHJlc29sdmUpID0+IHtcbiAgLy8gaWYgd2UgYXJlIGFscmVhZHkgbG9hZGVkIHRoZW4gd2UgYXJlIGRvbmVcbiAgaWYgKEFMTF9JU19MT0FERUQpIHtcbiAgICByZXNvbHZlKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjb25zdCBzdHlsZXNoZWV0SHJlZlByZWZpeCA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdCArIFwiL3Jlc3QvcmVzb3VyY2UvYnVpbGRcIjtcbiAgICAvLyBub3cgd2UgZ290IHRvIHNlZSBpZiBieSB0aGUgdGltZSB0aGlzIHByb21pc2UgaXMgcnVubmluZ1xuICAgIC8vIGl0IGlzIGFscmVhZHkgZG9uZSBsb2FkaW5nXG4gICAgY29uc3QgZm91bmRQcmVsb2FkZWRTdHlsZXNoZWV0ID1cbiAgICAgIGRvY3VtZW50LnN0eWxlU2hlZXRzICYmIEFycmF5LmZyb20oZG9jdW1lbnQuc3R5bGVTaGVldHMpLmZpbmQoKHMpID0+IHMuaHJlZiAmJiBzLmhyZWYuc3RhcnRzV2l0aChzdHlsZXNoZWV0SHJlZlByZWZpeCkpO1xuXG4gICAgLy8gaWYgd2UgZmluZCBpdCBhbmQgdXNlIGl0IHRvIGNhbGN1bGF0ZSBpdFxuICAgIGlmIChmb3VuZFByZWxvYWRlZFN0eWxlc2hlZXQpIHtcbiAgICAgIEFMTF9JU19MT0FERUQgPSB0cnVlO1xuICAgICAgY2FsY3VsYXRlU3R5bGVzaGVldChmb3VuZFByZWxvYWRlZFN0eWxlc2hlZXQpO1xuICAgICAgcmVzb2x2ZSgpO1xuXG4gICAgICAvLyBvdGhlcndpc2Ugd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgbGluayB0byBsb2FkXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGFsbExpbmtzID0gZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yQWxsKFwibGlua1wiKTtcbiAgICAgIGNvbnN0IGZvdW5kU3R5bGVzaGVldE5vZGUgPSBBcnJheS5mcm9tKGFsbExpbmtzKS5maW5kKChzKSA9PiBzLmhyZWYuc3RhcnRzV2l0aChzdHlsZXNoZWV0SHJlZlByZWZpeCkpO1xuXG4gICAgICAvLyBpZiB3ZSBkb24ndCBmaW5kIGEgYmFzZSBjc3MgYnVpbGQsIHRoZW4gd2UgbWFyayBpdCBhcyBkb25lXG4gICAgICBpZiAoIWZvdW5kU3R5bGVzaGVldE5vZGUpIHtcbiAgICAgICAgQUxMX0lTX0xPQURFRCA9IHRydWU7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG90aGVyd2lzZSB3ZSBzZXQgdXAgYSBvbmxvYWQgY2FsbGJhY2tcbiAgICAgICAgZm91bmRTdHlsZXNoZWV0Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XG4gICAgICAgICAgLy8gYW5kIG9uY2Ugd2UgYXJlIGxvYWRlZCB3ZSB3YW50IHRvIGdyYWIgdGhlIGNzcyBzdHlsZXNoZWV0XG4gICAgICAgICAgY29uc3QgZm91bmRMb2FkZWRTdHlsZVNoZWV0ID1cbiAgICAgICAgICAgIGRvY3VtZW50LnN0eWxlU2hlZXRzICYmXG4gICAgICAgICAgICBBcnJheS5mcm9tKGRvY3VtZW50LnN0eWxlU2hlZXRzKS5maW5kKChzKSA9PiBzLmhyZWYgJiYgcy5ocmVmLnN0YXJ0c1dpdGgoc3R5bGVzaGVldEhyZWZQcmVmaXgpKTtcbiAgICAgICAgICAvLyBtYXJrIGl0IGFzIGxvYWRlZFxuICAgICAgICAgIEFMTF9JU19MT0FERUQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gcHJvY2VzcyBpdFxuICAgICAgICAgIGlmIChmb3VuZExvYWRlZFN0eWxlU2hlZXQpIHtcbiAgICAgICAgICAgIGNhbGN1bGF0ZVN0eWxlc2hlZXQoZm91bmRMb2FkZWRTdHlsZVNoZWV0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gYW5kIHJlc29sdmVcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbi8qKlxuICogUmVwcmVzZW50cyBhbiBleHRlbmRlZCBzZXQgb2YgdGhlIGZlYXR1cmVzIHRoYXQgdGhlIGVkaXRvciBzdXBwb3J0c1xuICogd2l0aCBhIGxvdCBtb3JlIG9mIGNvbnRleHR1YWwgaW5mb3JtYXRpb24gb24gd2hhdCBpdCBoYXMgaW4gcGxhY2VcbiAqIGZvciBzdWNoXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUFjY2Vzc2libGVGZWF0dXJlU3VwcG9ydE9wdGlvbnMgZXh0ZW5kcyBJRmVhdHVyZVN1cHBvcnRPcHRpb25zIHtcbiAgLyoqXG4gICAqIFRoZSBjbGFzc2VzIHRoYXQgYXJlIGF2YWlsYWJsZSBieSB0aGUgcmljaCB0ZXh0XG4gICAqIG5vbiBwcmVmaXhlZFxuICAgKi9cbiAgYXZhaWxhYmxlUmljaENsYXNzZXM6IElBdmFpbGFibGVFbGVtZW50Q1NTQ2xhc3NOYW1lW107XG4gIC8qKlxuICAgKiBUaGUgY3VzdG9tcyB0aGF0IGFyZSBhdmFpbGFibGVcbiAgICovXG4gIGF2YWlsYWJsZUN1c3RvbXM6IElBdmFpbGFibGVFbGVtZW50Q1NTQ2xhc3NOYW1lW107XG4gIC8qKlxuICAgKiBUaGUgY2xhc3NlcyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHRoZSBjb250YWluZXJzXG4gICAqL1xuICBhdmFpbGFibGVDb250YWluZXJzOiBJQXZhaWxhYmxlRWxlbWVudENTU0NsYXNzTmFtZVtdO1xuICAvKipcbiAgICogVGhlIGNsYXNzZXMgdGhhdCBhcmUgYXZhaWxhYmxlIGZvciB0aGUgY29udGFpbmVyc1xuICAgKi9cbiAgYXZhaWxhYmxlVGFibGVzOiBJQXZhaWxhYmxlRWxlbWVudENTU0NsYXNzTmFtZVtdO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBidW5jaCBvZiBoZWxwZXJzIHRoYXQgd2lsbCBoZWxwIG91dCBidWlsZGluZ1xuICogdGhpbmdzIGxpa2UgdG9vbGJhcnMgb3IgYW55dGhpbmcgZWxzZSAoYWthLiB0aGUgd3JhcHBlcilcbiAqIGFyb3VuZCB0aGUgZWRpdG9yXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUhlbHBlckZ1bmN0aW9ucyB7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBlZGl0b3IgaW5zdGFuY2Ugb2YgdGhlIGdpdmVuXG4gICAqIGVkaXRvclxuICAgKi9cbiAgZWRpdG9yOiBJdGVtaXplRWRpdG9yO1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgcmVhY3QgZWRpdG9yIGNsYXNzIGl0c2VsZlxuICAgKiBwcm92aWRlZCBieSBzbGF0ZVxuICAgKi9cbiAgUmVhY3RFZGl0b3I6IHR5cGVvZiBSZWFjdEVkaXRvcjtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIGhpc3RvcnkgZWRpdG9yIGNsYXNzIGl0c2VsZlxuICAgKiBwcm92aWRlZCBieSBzbGF0ZVxuICAgKi9cbiAgSGlzdG9yeUVkaXRvcjogdHlwZW9mIEhpc3RvcnlFZGl0b3I7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSB0cmFuc2Zvcm1zIGNsYXNzIGl0c2VsZlxuICAgKiBwcm92aWRlZCBieSBzbGF0ZVxuICAgKi9cbiAgVHJhbnNmb3JtczogdHlwZW9mIFRyYW5zZm9ybXM7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSByYW5nZSBjbGFzcyBpdHNlbGZcbiAgICogcHJvdmlkZWQgYnkgc2xhdGVcbiAgICovXG4gIFJhbmdlOiB0eXBlb2YgUmFuZ2U7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBub2RlIGNsYXNzIGl0c2VsZlxuICAgKi9cbiAgTm9kZTogdHlwZW9mIE5vZGU7XG4gIC8qKlxuICAgKiBUaGUgcGF0aCB0eXBlXG4gICAqL1xuICBQYXRoOiB0eXBlb2YgUGF0aDtcblxuICAvKipcbiAgICogUHJvdmllcyB0aGUgY29udGV4dCBmb3IgdGhlIGdpdmVuIHBhdGhcbiAgICovXG4gIGdldENvbnRleHRGb3I6IChlbGVtZW50OiBSaWNoRWxlbWVudCB8IElUZXh0IHwgUGF0aCwgbGV2ZWw/OiBcImZpbmFsXCIgfCBcInNlbGVjdC1jb250ZXh0XCIgfCBcInNlbGVjdC1sb29wXCIsIG9ubHlTd2ljaGluZ0NvbnRleHQ/OiBib29sZWFuKSA9PiBJVGVtcGxhdGVBcmdDb250ZXh0RGVmaW5pdGlvbjtcbiAgZ2V0Um9vdENvbnRleHQ6ICgpID0+IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uO1xuICBnZXRTdGF0ZTogKCkgPT4gSVNsYXRlRWRpdG9ySW50ZXJuYWxTdGF0ZVR5cGU7XG5cbiAgLyoqXG4gICAqIHBlcmZvcm1zIGEgcHNldWRvIHNlbGVjdGlvbiBhdCBhIGdpdmVuIHBhdGhcbiAgICogdGhpcyBzZWxlY3Rpb24gaXMgc2lsZW50IGFuZCBkb2VzIG5vdCBhZmZlY3Qgb3RoZXIgdGhhbiB0aGUgY3VycmVudFxuICAgKiBzZWxlY3RlZCBwYXRoIGJhc2VkIG9uIHRoZSBpbmZvcm1hdGlvbiwgaXQgZG9lcyBub3QgY2F1c2UgYSBjYXJldFxuICAgKiBjaGFuZ2Ugb3IgYW55dGhpbmcgb2YgdGhlIHNvcnRzXG4gICAqIEBwYXJhbSBwYXRoIHRoZSBwYXRoIHRvIHNlbGVjdFxuICAgKi9cbiAgc2VsZWN0UGF0aDogKHBhdGg6IFBhdGgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFN3aXRjaGVzIGEgcGF0aCBmcm9tIG9uZSBwbGFjZSB0byBhbm90aGVyXG4gICAqL1xuICBtb3ZlUGF0aHM6IChmcm9tOiBQYXRoLCB0bzogUGF0aCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogRGVsZXRlcyBnaXZlbiBhIHBhdGhcbiAgICovXG4gIGRlbGV0ZVBhdGg6IChwYXRoOiBQYXRoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBEZWxldGVzIHRoZSBub2RlIGF0IHRoZSBzZWxlY3RlZCBwYXRoXG4gICAqL1xuICBkZWxldGVTZWxlY3RlZE5vZGU6ICgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEFsbG93cyB0byBrbm8gd2hhdCB0aGUgcHJldmlvdXMgc2VsZWN0ZWQgZWxlbWVudCB3YXNcbiAgICogYmVmb3JlIHRoaXMgb25lIHdhcyBzZWxlY3RlZFxuICAgKi9cbiAgZ2V0UHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3I6ICgpID0+IFBhdGg7XG4gIC8qKlxuICAgKiBBbGxvd3MgdG8ga25vIHdoYXQgdGhlIHByZXZpb3VzIHNlbGVjdGVkIGVsZW1lbnQgd2FzXG4gICAqIGJlZm9yZSB0aGlzIG9uZSB3YXMgc2VsZWN0ZWRcbiAgICovXG4gIGdldFByZXZpb3VzVGV4dEFuY2hvcjogKCkgPT4gUGF0aDtcblxuICAvKipcbiAgICogZm9jdXNlcyB0aGUgdGV4dCBlZGl0b3JcbiAgICovXG4gIGZvY3VzOiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogRm9jdXNlcyBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvblxuICAgKiBAcGFyYW0gYXQgdGhlIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKi9cbiAgZm9jdXNBdDogKGF0OiBSYW5nZSB8IFBhdGgpID0+IFByb21pc2U8dm9pZD47XG5cbiAgLyoqXG4gICAqIGluc2VydHMgYSBzdXBlciBicmVhayBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24gaW4gb3JkZXJcbiAgICogdG8gYWRkIGEgcGFyYWdyYXBoXG4gICAqL1xuICBpbnNlcnRTdXBlcmJyZWFrOiAoYXQ/OiBQYXRoLCByZXZlcnNlPzogYm9vbGVhbikgPT4gdm9pZDtcblxuICAvKipcbiAgICogV2lsbCBpbnNlcnQgYW4gaW1hZ2UgYmFzZWQgb24gYSBnaXZlbiBmaWxlIHRoYXQgaGFzXG4gICAqIGJlZW4gdGFrZW4gYXMgYW4gaW5wdXRcbiAgICogQHBhcmFtIGZpbGUgdGhlIGZpbGVcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKiBAcGFyYW0gc3RhbmRhbG9uZSB3aGV0aGVyIHRvIG1ha2UgaXQgYSBzdGFuZGFsb25lIGltYWdlXG4gICAqL1xuICBpbnNlcnRJbWFnZTogKGZpbGU6IEZpbGUsIHN0YW5kYWxvbmU6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBXaWxsIGluc2VydCBhIHZpZGVvIGdpdmVuIHRoZSBpbmZvcm1hdGlvblxuICAgKiBAcGFyYW0gdXJsIHRoZSB1cmwgb2YgdGhlIHZpZGVvLCBvbmx5IHlvdXR1YmUgYW5kIHZpbWVvIHN1cHBvcnRlZCBhcyBvcmlnaW5cbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKiBAcmV0dXJucyBhIGJvb2xlYW4gdHJ1ZSBpZiB0aGUgdmlkZW8gd2FzIHByb3Blcmx5IGluc2VydGVkLCBmYWxzZSBpZiB0aGUgdmlkZW8gdXJsIHdhcyBpbnZhbGlkXG4gICAqL1xuICBpbnNlcnRWaWRlbzogKHVybDogc3RyaW5nKSA9PiBib29sZWFuO1xuICB1cGRhdGVWaWRlbzogKHVybDogc3RyaW5nKSA9PiBib29sZWFuO1xuICAvKipcbiAgICogV2lsbCBpbnNlcnQgYSBmaWxlIGJhc2VkIG9uIHRoZSBpbmZvcm1hdGlvbiBnaXZlblxuICAgKiBAcGFyYW0gZmlsZSB0aGUgZmlsZSB0byBpbnNlcnRcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKi9cbiAgaW5zZXJ0RmlsZTogKGZpbGU6IEZpbGUpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBXaWxsIGluc2VydCBhIGNvbnRhaW5lciBhdCB0aGUgZ2l2ZW4gbG9jYXRpb25cbiAgICogQHBhcmFtIHR5cGUgb3B0aW9uYWwsIHRoZSBjb250YWluZXIgdHlwZSwgb3RoZXJ3aXNlIHdpbGxcbiAgICogaW5zZXJ0IGEgc3RhbmRhcmQgY29udGFpbmVyXG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBjb250YWluZXIgdHlwZVxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqL1xuICBpbnNlcnRDb250YWluZXI6ICh0eXBlPzogc3RyaW5nKSA9PiB2b2lkO1xuICAvKipcbiAgICogSW5zZXJ0cyBhIGN1c3RvbSBlbGVtZW50XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBjdXN0b20gdHlwZVxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcmFuZ2UgdG8gaW5zZXJ0IGF0XG4gICAqL1xuICBpbnNlcnRDdXN0b206ICh0eXBlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgdGVtcGxhdGUgdGV4dFxuICAgKiB0aGlzIGlzIGNhcmV0IGJhc2VkIHVubGVzcyB5b3Ugc3BlY2lmeSB5b3VyIG93biBjdXN0b20gcmFuZ2VcbiAgICogbm90ZSB0aGF0IGNhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGNhdXNlIGEgcmVmb2N1c1xuICAgKiBAcGFyYW0gbGFiZWwgdGhlIGxhYmVsIHRvIHVzZSBmb3IgdGhlIHRlbXBsYXRlIHRleHRcbiAgICogQHBhcmFtIHZhbHVlIHRoZSBhY3R1YWwgdmFsdWUgZm9yIHRoZSB0ZW1wbGF0ZSB0ZXh0IHRvIGJlIHVzZWQgb2ZmIHRoZSBjb250ZXh0XG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZSB0byBpbnNlcnQgYXRcbiAgICovXG4gIGluc2VydFRlbXBsYXRlVGV4dDogKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHVwZGF0ZVRlbXBsYXRlVGV4dDogKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgdGVtcGxhdGUgaHRtbCBmcmFnbWVudFxuICAgKiB0aGlzIGlzIGNhcmV0IGJhc2VkIHVubGVzcyB5b3Ugc3BlY2lmeSB5b3VyIG93biBjdXN0b20gcmFuZ2VcbiAgICogbm90ZSB0aGF0IGNhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGNhdXNlIGEgcmVmb2N1c1xuICAgKiBAcGFyYW0gbGFiZWwgdGhlIGxhYmVsIHRvIHVzZSBmb3IgdGhlIHRlbXBsYXRlIGh0bWxcbiAgICogQHBhcmFtIHZhbHVlIHRoZSBhY3R1YWwgdmFsdWUgZm9yIHRoZSB0ZW1wbGF0ZSBodG1sIHRvIGJlIHVzZWQgb2ZmIHRoZSBjb250ZXh0XG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZSB0byBpbnNlcnQgYXRcbiAgICovXG4gIGluc2VydFRlbXBsYXRlSFRNTDogKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHVwZGF0ZVRlbXBsYXRlSFRNTDogKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEluc2VydHMgYW4gZWxlbWVudCBhdCB0aGUgZ2l2ZW4gcG9zaXRpb25cbiAgICogQHBhcmFtIGVsZW1lbnQgdGhlIGVsZW1lbnQgdG8gaW5zZXJ0XG4gICAqIEBwYXJhbSBhdCBvcHRpb25hbCByYW5nZSB0byBpbnNlcnQgYXRcbiAgICovXG4gIGluc2VydEVsZW1lbnQ6IChlbGVtZW50OiBSaWNoRWxlbWVudCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogSW5zZXJ0cyBhIHRhYmxlIGF0IHRoZSBnaXZlbiBsb2NhdGlvblxuICAgKi9cbiAgaW5zZXJ0VGFibGU6ICh0YWJsZVR5cGU6IHN0cmluZykgPT4gdm9pZDtcbiAgaW5zZXJ0VGFibGVDb2x1bW46ICgpID0+IHZvaWQ7XG4gIGluc2VydFRhYmxlUm93OiAoKSA9PiB2b2lkO1xuICBkZWxldGVUYWJsZUNvbHVtbjogKCkgPT4gdm9pZDtcbiAgZGVsZXRlVGFibGVSb3c6ICgpID0+IHZvaWQ7XG4gIHRvZ2dsZVRhYmxlOiAoZWxlbWVudDogXCJ0aGVhZFwiIHwgXCJ0Zm9vdFwiKSA9PiB2b2lkO1xuICBjYW5Ub2dnbGVUYWJsZTogKGVsZW1lbnQ6IFwidGhlYWRcIiB8IFwidGZvb3RcIikgPT4gYm9vbGVhbjtcblxuICAvKipcbiAgICogTWFrZXMgYSBxdW90ZSBvdXQgb2YgdGhlIGN1cnJlbnQgZWxlbWVudFxuICAgKiB0aGlzIGlzIGNhcmV0IGJhc2VkIHVubGVzcyB5b3Ugc3BlY2lmeSB5b3VyIG93biBjdXN0b20gcmFuZ2VcbiAgICogbm90ZSB0aGF0IGNhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGNhdXNlIGEgcmVmb2N1c1xuICAgKi9cbiAgdG9nZ2xlUXVvdGU6ICgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBNYWtlcyBhIHRpdGxlIG91dCBvZiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAqIHRoaXMgaXMgY2FyZXQgYmFzZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IHlvdXIgb3duIGN1c3RvbSByYW5nZVxuICAgKiBub3RlIHRoYXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSByZWZvY3VzXG4gICAqL1xuICB0b2dnbGVUaXRsZTogKHR5cGU6IFwiaDFcIiB8IFwiaDJcIiB8IFwiaDNcIiB8IFwiaDRcIiB8IFwiaDVcIiB8IFwiaDZcIikgPT4gdm9pZDtcbiAgLyoqXG4gICAqIE1ha2VzIGEgbGlzdCBvdXQgb2YgdGhlIGN1cnJlbnQgZWxlbWVudFxuICAgKiB0aGlzIGlzIGNhcmV0IGJhc2VkIHVubGVzcyB5b3Ugc3BlY2lmeSB5b3VyIG93biBjdXN0b20gcmFuZ2VcbiAgICogbm90ZSB0aGF0IGNhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGNhdXNlIGEgcmVmb2N1c1xuICAgKi9cbiAgaW5zZXJ0TGlzdDogKHR5cGU6IFwiYnVsbGV0ZWRcIiB8IFwibnVtYmVyZWRcIikgPT4gdm9pZDtcbiAgLyoqXG4gICAqIE1ha2VzIGEgbGluayBvdXQgb2YgdGhlIGN1cnJlbnQgZWxlbWVudFxuICAgKiB0aGlzIGlzIGNhcmV0IGJhc2VkIHVubGVzcyB5b3Ugc3BlY2lmeSB5b3VyIG93biBjdXN0b20gcmFuZ2VcbiAgICogbm90ZSB0aGF0IGNhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGNhdXNlIGEgcmVmb2N1c1xuICAgKiBAcmV0dXJucyBhIGJvb2xlYW4gc3BlY2lmeWluZyB3aGV0aGVyIHRoZSB0b2dnbGluZyB3YXMgc3VjY2VzZnVsIG9yIGl0IGZhaWxlZFxuICAgKiBmb3Igc29tZSByZWFzb24sIGVnLiBpbnZhbGlkIGxpbmssIGxpbmtzIGFyZSBub3Qgc3VwcG9ydGVkXG4gICAqL1xuICB0b2dnbGVMaW5rOiAodXJsOiBzdHJpbmcsIHRlbXBsYXRlVmFsdWU6IHN0cmluZykgPT4gYm9vbGVhbjtcbiAgdXBkYXRlTGluazogKHVybDogc3RyaW5nLCB0ZW1wbGF0ZVZhbHVlOiBzdHJpbmcpID0+IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEZvcm1hdHMgdGhlIGN1cnJlbnQgdGV4dCBhcyBib2xkXG4gICAqIHRoaXMgaXMgYWx3YXlzIGNhcmV0IGJhc2VkIGFuZCBkb2VzIG5vdCBhbGxvdyBmb3IgY3VzdG9tXG4gICAqIHJhbmdlc1xuICAgKiBJdCB3aWxsIHJlZm9jdXMgb25jZSBkb25lXG4gICAqL1xuICBmb3JtYXRUb2dnbGU6ICh0eXBlOiBcImJvbGRcIiB8IFwiaXRhbGljXCIgfCBcInVuZGVybGluZVwiKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBkb2VzIGFuIGFyYml0cmFyeSB1cGRhdGUgb2YgYXJiaXRyYXJ5IGFyZ3VtZW50cyBvZmYgdGhlIGN1cnJlbnRcbiAgICogZWxlbWVudCB2YWx1ZSwgdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWZvY3VzIGFuZCBpdCdzIHNpbGVudCBhbmQgbWVhbnRcbiAgICogZm9yIGluZGlyZWN0IHVzYWdlXG4gICAqIEBwYXJhbSBhcmdzIHRoZSBhcmJpdHJhcnkgYXJndW1lbnRzIChwYXJ0aWFsIHZhbHVlKVxuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBhbmNob3Igd2hlcmUgdGhlIHVwZGF0ZSBzaG91bGQgdGFrZSBwbGFjZSAoc2hvdWxkIHBvaW50IGF0IGFuIGVsZW1lbnQpXG4gICAqL1xuICBzZXQ6IChhcmdzOiBQYXJ0aWFsPFJpY2hFbGVtZW50PiB8IFBhcnRpYWw8SVRleHQ+LCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGN1cnJlbnQgc3R5bGUgZm9yIHRoZSBlbGVtZW50XG4gICAqIHRoaXMgZnVuY3Rpb24gZG9lcyBub3QgcmVmb2N1cyBhbmQgaXQncyBzaWxlbnQgYW5kIG1lYW50XG4gICAqIGZvciBpbmRpcmVjdCB1c2FnZVxuICAgKi9cbiAgc2V0U3R5bGU6IChzdHlsZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0ZW1wbGF0ZSBob3ZlciBzdHlsZSBmb3IgdGhlIGVsZW1lbnRcbiAgICogdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWZvY3VzIGFuZCBpdCdzIHNpbGVudCBhbmQgbWVhbnRcbiAgICogZm9yIGluZGlyZWN0IHVzYWdlXG4gICAqL1xuICBzZXRIb3ZlclN0eWxlOiAoc3R5bGU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuICAvKipcbiAgICogU2V0cyB0aGUgYWN0aXZlIHN0eWxlIGZvciB0aGUgZWxlbWVudFxuICAgKiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJlZm9jdXMgYW5kIGl0J3Mgc2lsZW50IGFuZCBtZWFudFxuICAgKiBmb3IgaW5kaXJlY3QgdXNhZ2VcbiAgICovXG4gIHNldEFjdGl2ZVN0eWxlOiAoc3R5bGU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuICAvKipcbiAgICogU2V0cyB0aGUgY29udGV4dCBrZXlcbiAgICogdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWZvY3VzIGFuZCBpdCdzIHNpbGVudCBhbmQgbWVhbnRcbiAgICogZm9yIGluZGlyZWN0IHVzYWdlXG4gICAqL1xuICBzZXRDb250ZXh0OiAoa2V5OiBzdHJpbmcsIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFNldHMgdGhlIGlmIHJlbmRlciBjb25kaXRpb25cbiAgICogdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWZvY3VzIGFuZCBpdCdzIHNpbGVudCBhbmQgbWVhbnRcbiAgICogZm9yIGluZGlyZWN0IHVzYWdlXG4gICAqL1xuICBzZXRJZkNvbmRpdGlvbjogKGtleTogc3RyaW5nLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBTZXRzIGFuIFVJIGhhbmRsZXIgaW4gdGhlIGdpdmVuIGFuY2hvciB3aXRoIHRoZSBnaXZlbiBhcmdzXG4gICAqIHRoaXMgZnVuY3Rpb24gZG9lcyBub3QgcmVmb2N1cyBhbmQgaXQncyBzaWxlbnQgYW5kIG1lYW50XG4gICAqIGZvciBpbmRpcmVjdCB1c2FnZVxuICAgKi9cbiAgc2V0VUlIYW5kbGVyOiAoa2V5OiBzdHJpbmcsIGFyZ3M6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0sIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIEFsbG93cyB0byBzZXQgVUkgaGFuZGxlciBhcmdzIGluIHRoZSB1aSBoYW5kbGVyXG4gICAqL1xuICBzZXRVSUhhbmRsZXJBcmc6IChrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuICAvKipcbiAgICogU2V0cyB0aGUgZm9yLWVhY2ggbG9vcCBrZXlcbiAgICogdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWZvY3VzIGFuZCBpdCdzIHNpbGVudCBhbmQgbWVhbnRcbiAgICogZm9yIGluZGlyZWN0IHVzYWdlXG4gICAqL1xuICBzZXRGb3JFYWNoOiAoa2V5OiBzdHJpbmcsIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFNldHMgYWxsIHRoZSByaWNoIGNsYXNzZXNcbiAgICogdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWZvY3VzIGFuZCBpdCdzIHNpbGVudCBhbmQgbWVhbnRcbiAgICogZm9yIGluZGlyZWN0IHVzYWdlXG4gICAqL1xuICBzZXRSaWNoQ2xhc3NlczogKGxpc3Q6IHN0cmluZ1tdLCBhbmNob3I6IFBhdGgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBTZXRzIGFuIGFjdGlvbiBrZXlcbiAgICogdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCByZWZvY3VzIGFuZCBpdCdzIHNpbGVudCBhbmQgbWVhbnRcbiAgICogZm9yIGluZGlyZWN0IHVzYWdlXG4gICAqL1xuICBzZXRBY3Rpb246IChrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIGhhcmQgYmx1ciwgYW5kIGV2ZW4gdGhlIHNlbGVjdGVkIHBhdGhzIGFyZSBsb3N0XG4gICAqL1xuICBoYXJkQmx1cjogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgc29mdCBibHVyIGV2ZW50XG4gICAqL1xuICBzb2Z0Qmx1cjogKCkgPT4gdm9pZDtcbn1cblxuLyoqXG4gKiBDb250YWlucyB0aGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlXG4gKiBzdGF0ZSBvZiB0aGUgZWRpdG9yIGFzIGl0IGlzIHJpZ2h0XG4gKiBub3dcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJU2xhdGVFZGl0b3JJbnRlcm5hbFN0YXRlVHlwZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIGl0IGlzIGN1cmVudGx5IGZvY3VzZWRcbiAgICogdGhpcyBpcyBhIHN0YXRlIGluaGVyZW50IG9mIHRoZVxuICAgKiBzdGF0ZSBvZiB0aGUgZWRpdG9yXG4gICAqL1xuICBmb2N1c2VkOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIGl0IGlzIHJpY2ggdGV4dFxuICAgKiB0aGUgc2xhdGUgZWRpdG9yIGlzIGFibGUgdG8gY29udGFpblxuICAgKiBub24tcmljaCB0ZXh0LCB3aGVuIGl0J3MgYXMgYSBwbGFpblxuICAgKiB0ZXh0IGZvcm1cbiAgICogXG4gICAqIHlvdSBzaG91bGQgdXNlIHRoaXMgdG8gY2hhbmdlL3JlbW92ZVxuICAgKiB0aGUgdG9vbGJhcnMgYW5kIHdyYXBwZXJzIGFuZCB1c2VcbiAgICogb25seSBwYXJhZ3JhcGhzXG4gICAqIFxuICAgKiB0aGlzIGlzIHBhc3NlZCBkaXJlY3RseSBmcm9tXG4gICAqIHRoZSBwcm9wcyBvZiB0aGUgZWRpdG9yXG4gICAqL1xuICBpc1JpY2hUZXh0OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBjdXJyZW50IHZhbHVlIGlzIHZhbGlkXG4gICAqIHRoaXMgaXMgcGFzc2VkIGRpcmVjdGx5IGZyb20gdGhlIHByb3BzXG4gICAqIGFuZCBpdCdzIHVzZWQgZm9yIHN0eWxpc3RpYyBwdXJwb3Nlc1xuICAgKi9cbiAgY3VycmVudFZhbGlkOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCB0ZXh0IGJlaW5nIHdvcmtlZCB3aXRoLCByZXByZXNlbnRzXG4gICAqIGEgdGV4dCBub2RlIHdoZXJlIHRoZSBjYXJldCBpcyBjdXJyZW50bHkgcGxhY2VkXG4gICAqL1xuICBjdXJyZW50VGV4dDogSVRleHQ7XG4gIGN1cnJlbnRJbmxpbmVFbGVtZW50OiBSaWNoRWxlbWVudDtcbiAgY3VycmVudEJsb2NrRWxlbWVudDogUmljaEVsZW1lbnQ7XG4gIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHM6IFJpY2hFbGVtZW50W107XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHBhdGggZm9sbG93ZWQsIHRleHQgcGF0aCBmb3IgdGhlIGN1cnJlbnQgdGV4dFxuICAgKi9cbiAgY3VycmVudFRleHRBbmNob3I6IFBhdGg7XG4gIGN1cnJlbnRJbmxpbmVFbGVtZW50QW5jaG9yOiBQYXRoO1xuICBjdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yOiBQYXRoO1xuICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzOiBQYXRoW107XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHNlbGVjdGVkIG5vZGUgdGhhdCBpcyBiZWluZyB3b3JrZWQgd2l0aFxuICAgKiB0aGlzIGlzIG5vcm1hbGx5IGF1dG9tYXRpY2FsbHkgc2VsZWN0ZWQgdG8gYmUgdGhlXG4gICAqIGN1cnJlbnQgZWxlbWVudFxuICAgKi9cbiAgY3VycmVudFNlbGVjdGVkVGV4dDogSVRleHQ7XG4gIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQ6IFJpY2hFbGVtZW50O1xuICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQ6IFJpY2hFbGVtZW50O1xuICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHM6IFJpY2hFbGVtZW50W107XG4gIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnQ6IFJpY2hFbGVtZW50O1xuXG4gIGN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3I6IFBhdGg7XG4gIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3I6IFBhdGg7XG4gIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvcjogUGF0aDtcbiAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzOiBQYXRoW107XG5cbiAgY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcjogUGF0aDtcbiAgcHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3I6IFBhdGg7XG4gIHByZXZpb3VzVGV4dEFuY2hvcjogUGF0aDtcblxuICBjdXJyZW50Um9vdENvbnRleHQ6IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uO1xuICBjdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHQ6IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uO1xuICBjdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQ6IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uO1xuICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVDb250ZXh0OiBJVGVtcGxhdGVBcmdDb250ZXh0RGVmaW5pdGlvbjtcbiAgY3VycmVudFNlbGVjdGVkRWxlbWVudENvbnRleHQ6IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uO1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCB2YWx1ZSBmcm9tIHRoZSBkb2N1bWVudCB0aGF0IGlzIHVzZWRcbiAgICogaW4gdGhlIHNsYXRlIHJpY2ggdGV4dCBlZGl0b3JcbiAgICovXG4gIHRyZWVWYWx1ZTogSVJvb3RMZXZlbERvY3VtZW50O1xuXG4gIC8qKlxuICAgKiBDb250ZXh0dWFsLCB2ZXJ5IHNwZWNpZmljIHRvIHRoZSBjdXJyZW50IGNvbnRleHRcbiAgICogd2hlcmUgdGhlIGN1cnNvciBpcyBsb2NhdGVkXG4gICAqL1xuICBhbGxvd3NJbnNlcnRFbGVtZW50OiAoZWxlbWVudDogUmljaEVsZW1lbnQsIG9wdHM/OiB7IGNvbGxhcHNlZD86IGJvb2xlYW47IGV4dGVuZGVkPzogYm9vbGVhbjsgc2VsZWN0ZWQ/OiBib29sZWFuIH0pID0+IGJvb2xlYW47XG4gIGFsbG93c1RleHQ6IGJvb2xlYW47XG4gIGlubGluZUlzVm9pZDogYm9vbGVhbjtcbiAgYmxvY2tJc1ZvaWQ6IGJvb2xlYW47XG4gIHRvcG1vc3RTdXBlcmJsb2NrSXNWb2lkOiBib29sZWFuO1xuICBzdXBlckJsb2NrVUlIYW5kbGVyOiBJVGVtcGxhdGVBcmdVSUhhbmRsZXJEZWZpbml0aW9uO1xuICBibG9ja1VJSGFuZGxlcjogSVRlbXBsYXRlQXJnVUlIYW5kbGVyRGVmaW5pdGlvbjtcbiAgaW5saW5lVUlIYW5kbGVyOiBJVGVtcGxhdGVBcmdVSUhhbmRsZXJEZWZpbml0aW9uO1xufVxuXG4vKipcbiAqIFRoZSBwcm9wcyB0aGF0IGV2ZXJ5IGVsZW1lbnQgd3JhcHBlciBpcyBnb2luZyB0byBnZXRcbiAqIGJhc2VkIG9uIHRoZSBzdGFuZGFyZCB0aGF0IGlzIHBhc2VkIGJ5IGVhY2ggZWxlbWVudFxuICogb25jZSBzdWNoIGVsZW1lbnQgaXMgc2VsZWN0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJU2xhdGVFZGl0b3JXcmFwcGVyRWxlbWVudFByb3BzIHtcbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IGJlaW5nIHNlbGVjdGVkXG4gICAqL1xuICBlbGVtZW50OiBSaWNoRWxlbWVudDtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNlbGVjdGlvbiBpcyBwcmltYXJ5XG4gICAqL1xuICBwcmltYXJ5U2VsZWN0aW9uOiBib29sZWFuO1xuICAvKipcbiAgICogd2V0aGVyIGlzIHNlbGVjdGVkXG4gICAqL1xuICBpc1NlbGVjdGVkOiBib29sZWFuO1xuICAvKipcbiAgICogVGhlIGhlbHBlcnMgZnVuY3Rpb25zXG4gICAqL1xuICBoZWxwZXJzOiBJSGVscGVyRnVuY3Rpb25zO1xuICAvKipcbiAgICogVGhlIGVsZW1lbnQgY29tcG9uZW50IGl0c2VsZiB0aGF0IHNob3VsZFxuICAgKiBiZSByZXR1cm5lZFxuICAgKi9cbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIFRoZSBmZWF0dXJlIHN1cHBvcnRcbiAgICovXG4gIGZlYXR1cmVTdXBwb3J0OiBJQWNjZXNzaWJsZUZlYXR1cmVTdXBwb3J0T3B0aW9ucztcbiAgLyoqXG4gICAqIHRoZSBiYXNlIGkxOG4gZ2l2ZW5cbiAgICovXG4gIGJhc2VJMThuOiBJQmFzZUkxOG5SaWNoVGV4dEluZm87XG59XG5cbi8qKlxuICogVGhlIGVsZW1lbnQgd3JhcHBlcnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJU2xhdGVFZGl0b3JFbGVtZW50V3JhcHBlcnMge1xuICBjb21wb25lbnRzPzoge1xuICAgIFtrZXk6IHN0cmluZ106IFJlYWN0LkNvbXBvbmVudFR5cGU8SVNsYXRlRWRpdG9yV3JhcHBlckVsZW1lbnRQcm9wcz47XG4gIH0sXG4gIHVpSGFuZGxlcj86IHtcbiAgICBba2V5OiBzdHJpbmddOiBSZWFjdC5Db21wb25lbnRUeXBlPElTbGF0ZUVkaXRvcldyYXBwZXJFbGVtZW50UHJvcHM+O1xuICB9LFxufTtcblxuLyoqXG4gKiBUaGUgYmFzZSBwcm9wcyB0aGF0IGV2ZXJ5IHdyYXBwZXIgaXMgZ29pbmcgdG8gZ2V0XG4gKiBiYXNlZCBvbiB0aGUgc3RhbmRhcmQgdGhhdCBpcyBwYXNzZWQgYnkgdGhlIGNvbXBvbmVudFxuICogdGhhdCBjb250YWlucyB0aGUgYmFzZSByaWNoIHRleHQgZWRpdG9yXG4gKiBcbiAqIFlvdSBtaWdodCBleHRlbmQgdGhpcyBjbGFzcyBhbmQgcmVxdWlyZSBleHRyYSBwcm9wcywgdGhlc2VcbiAqIHByb3BzIG1pZ2h0IGJlIHBhc3NlZCBieSB1c2luZyB0aGUgd3JhcHBlckFyZ3MgZnJvbVxuICogdGhlIG1haW4gY29tcG9uZW50IHdoaWNoIHdpbGwgcGFzcyB0aGVtIHRvIHRoZSB3cmFwcGVyXG4gKiBcbiAqIFdoZW4gaW1wbGVtZW50aW5nIHRoZSB3cmFwcGVyIHlvdSBtYXkgYWRkIGEgc2VsZWN0aXZlSGFyZEJsdXIgZnVuY3Rpb25cbiAqIGZvciB3aGljaCB0cmlnZ2VycyB3aGVuIHRoZSBlbGVtZW50IGlzIGJsdXJyZWQgdG8gcHJldmVudCByZWFsIGJsdXJyaW5nIChha2EgZXhlY3V0aW5nIGhhcmRCbHVyKVxuICogZGVwZW5kaW5nIG9uIGlmIHNvbWV0aGluZyBpcyBzZWxlY3RlZCBpbiB0aGUgd3JhcHBlclxuICogXG4gKiBUaGUgc2VsZWN0aXZlSGFyZEJsdXIgc2hvdWxkIHRha2UgYSAoZXY6IEtleWJvYXJkRXZlbnQsIHRhcmdldDogSFRNTEVsZW1lbnQpIGlmIHlvdSB3aXNoIHRvIHByZXZlbnRcbiAqIHRoZSBibHVyIGZyb20gaGFwcGVuaW5nXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVNsYXRlRWRpdG9yV3JhcHBlckJhc2VQcm9wcyB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIGl0IGlzIGRpc2FibGVkXG4gICAqL1xuICBkaXNhYmxlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHNsYXRlIGVkaXRvciBjdXJyZW50IHN0YXRlXG4gICAqIHRoYXQgaXMgcGFzc2VkIHRvIHRoZSB3cmFwcGVyIGluIG9yZGVyXG4gICAqIHNvIGl0IGNhbiBnZXQgc3RhdGUgaW5mb3JtYXRpb25cbiAgICovXG4gIHN0YXRlOiBJU2xhdGVFZGl0b3JJbnRlcm5hbFN0YXRlVHlwZTtcbiAgLyoqXG4gICAqIFRoaXMgaXMgYSBsaXN0IG9mIGV4dGVuZGVkIGZlYXR1cmVzIHRoYXQgYXJlIGF2YWlsYWJsZVxuICAgKiB0byB0aGUgZWRpdG9yLCBhbmQgdGhlIHdyYXBwZXIgY2FuIHJlbmRlciBidXR0b25zXG4gICAqIGFuZCB3aGF0bm90IGZyb20gaXRcbiAgICovXG4gIGZlYXR1cmVTdXBwb3J0OiBJQWNjZXNzaWJsZUZlYXR1cmVTdXBwb3J0T3B0aW9ucztcbiAgLyoqXG4gICAqIFRoZXNlIGFyZSBoZWxwZXIgZnVuY3Rpb25zIHRoYXQgYXJlIHVzZWQgdG8gaW5zZXJ0IGVsZW1lbnRzXG4gICAqIGFuZCBtb2RpZnkgbm9kZXNcbiAgICovXG4gIGhlbHBlcnM6IElIZWxwZXJGdW5jdGlvbnM7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSB0aGluZyB0byB3cmFwLCBpdCBpcyB0aGUgcmVhY3RcbiAgICogcmljaCB0ZXh0IGVkaXRvciBpdHNlbGYgYXMgaXQgY29tZXMgZnJvbSBzbGF0ZVxuICAgKiBhbmQgaXQgc2hvdWxkIGJlIHJlbmRlcmVkXG4gICAqIHdoZXJlIGl0IGlzIGV4cGVjdGVkIHRvIGJlIHVzZWRcbiAgICovXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gIC8qKlxuICAgKiBBIGN1cnJlbnQgZXJyb3IsIHRyYW5zbGF0ZWRcbiAgICogaXQgaXMgZ2l2ZW4gZGlyZWN0bHkgYXMgYSBwcm9wIHRvIHRoZSBlZGl0b3IgY2xhc3NcbiAgICogYXMgaXQncyBqdXN0IHBhc3NlZCByaWdodCBoZXJlIGFzIHdlbGwgdG8gdGhlIHdyYXBwZXJcbiAgICogdGhpcyBpcyB1c2VkIHZpYSB0aGUgUHJvcGVydHlFbnRyeVRleHQgYXMgaXQgZG9lc1xuICAgKiBpbmRlZWQgcHJvdmlkZSB0aGlzIGFzIGEgcHJvcCBmb3IgdGhlIHJlbmRlclxuICAgKi9cbiAgY3VycmVudExvYWRFcnJvcjogc3RyaW5nO1xuICAvKipcbiAgICogRGlzbWlzcyB0aGUgY3VycmVudCBsb2FkIGVycm9yIGZvbGxvd3MgdGhlIHNhbWUgbG9naWNcbiAgICogYXMgdGhlIGN1cnJlbnRMb2FkRXJyb3JcbiAgICovXG4gIGRpc21pc3NDdXJyZW50TG9hZEVycm9yOiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogdGhlIGJhc2UgaTE4biBnaXZlblxuICAgKi9cbiAgYmFzZUkxOG46IElCYXNlSTE4blJpY2hUZXh0SW5mbztcbn1cblxuLyoqXG4gKiBUaGVzZSBhcmUgdGhlIHByb3BzIHRoYXQgdGhlIGVkaXRvciBpdHNlbGYgcmVxdWlyZXNcbiAqIGluIG9yZGVyIHRvIGZ1bmN0aW9uLCBhbmQgdGhleSBhcmUgZGVzaWduZWQgaW4gbWluZCB0byBtYWtlXG4gKiBpdHNlbGYgc3VpdGFibGUgdG8gYmUgYW4gZW50cnkgdHlwZSBmb3IgaXRlbWl6ZSB0ZXh0IHR5cGVzLCBib3RoXG4gKiBwbGFpbiBhbmQgaHRtbFxuICovXG5pbnRlcmZhY2UgSVNsYXRlRWRpdG9yUHJvcHMge1xuICAvKipcbiAgICogQW4gaWQgZm9yIHRoZSBjb250ZW50IGVkaXRhYmxlIGFyZWFcbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBzdXBwb3J0ZWQgdHlwZXMgdGhhdCBhcmUgYWxsb3dlZCBmb3IgdGhlIGltYWdlXG4gICAqIGlucHV0XG4gICAqL1xuICBzdXBwb3J0ZWRJbWFnZVR5cGVzOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgaXRlbWl6ZSBpbnRlcm5hbGx5LCBmb3Igc2V0dGluZyB0aGUgbGFzdCB0ZXh0IGNoYW5nZVxuICAgKiB2YWx1ZSBjb3VudCBmb3IgdGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIGluIGFuIGVmZmljaWVudCB3YXlcbiAgICogc2luY2UgdGhlIGVkaXRvciBjYW4gY291bnQgYmV0dGVyXG4gICAqIFxuICAgKiB0aGlzIHdpbGwgc2V0IGEgZ2xvYmFsIHZhbHVlIHdpdGggdGhlIGNvdW50IG9mIHRoZSBsYXN0IGVkaXRlZFxuICAgKiByaWNoIHRleHQsIGlmIGEgdmFsaWRhdGlvbiBvY2N1cnMgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhpcyB2YWx1ZVxuICAgKiBjYW4gYmUgcmV0cmlldmVkIHJpZ2h0IGF3YXkgZnJvbSB0aGUgZ2xvYmFsXG4gICAqIFxuICAgKiB3aGlsZSB0aGlzIGlzIGEgaGFjaywgaXQncyBhIGhhY2sgZG9uZSBmb3IgZWZmaWNpZW5jeSwgc2luY2UgY29uc2lzdGVuY3lcbiAgICogbm93IGlzIGV4cGVuc2l2ZVxuICAgKi9cbiAgY2FjaGVTdG9yZUNvdW50R2xvYmFsPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBWYWx1ZSBmb3IgdGhlIGxhbmcgcHJvcGVydHlcbiAgICovXG4gIGxhbmc6IHN0cmluZztcblxuICAvKipcbiAgICogQSByZWFjdCBjb21wb25lbnQgdGhhdCBpcyB0byB3cmFwIHRoZSBlZGl0b3JcbiAgICogbm9ybWFsbHkgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSB0b29sYmFycyBhbmQgYWRkIHRvIHRoZSBmdW5jdGlvbmFsaXR5XG4gICAqIHRoYXQgd2lzaGVzIHRvIGJlIGFkZGVkIGluIG9yZGVyIHRvIG1ha2UgaXQgZnVsbHkgY3VzdG9taXphYmxlXG4gICAqIFRoZSB3cmFwcGVyIHdpbGwgcmVjZWl2ZSB0aGUgcmljaCB0ZXh0IGVkaXRvciBjb21wb25lbnQgaXRzZWxmIGFzIGEgY2hpbGRyZW5cbiAgICogdGhlIHJhdyBlZGl0b3IgdG8gbGF1bmNoIGNvbW1hbmRzIGFuZCBzb21lIHV0aWxpdHkgZnVuY3Rpb25zXG4gICAqIFxuICAgKiBXaGVuIGJ1aWxkaW5nIHlvdXIgb3duIGN1c3RvbSByZW5kZXJlcnMgYW5kIHlvdSBzdGlsbCB3aWxsIHVzZSB0aGUgZmFzdCBwcm90b3R5aW5nXG4gICAqIHNsYXRlIHJlbmRlcmVyIGFzIHlvdXIgcmljaCB0ZXh0IGVkaXRvciBvZiBjaG9pY2UsIGl0IGlzIHRoZSB3cmFwcGVyIHRoYXQgeW91IHdpbGxcbiAgICogdXNlIHRvIGN1c3RvbWl6ZSB5b3VyIHRvb2xiYXIgYW5kIG90aGVyIGZ1bmN0aW9uYWxpdHkgeW91IHdhbnQgdG8gYWRkOyB3aGlsZSB0aGUgc3RhbmRhcmRcbiAgICogaXRlbWl6ZSBmYXN0IHByb3RvdHlwaW5nIGVkaXRvciBhbmQgaXRzIHdyYXBwZXIgY2FuIGRvIHdvbmRlcnMgaXQgbWlnaHQgbm90IGNvdmVyXG4gICAqIGFsbCB5b3VyIHVzZSBjYXNlcyBhbmQgeW91IG1pZ2h0IHdhbnQgdG8gY3JlYXRlIHlvdXIgb3duIGN1c29tIHJlbmRlcmVyc1xuICAgKi9cbiAgV3JhcHBlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVNsYXRlRWRpdG9yV3JhcHBlckJhc2VQcm9wcz47XG4gIC8qKlxuICAgKiBFeHRyYSB3cmFwcGVyIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSB3cmFwcGVyLCB0aGUgY29tcG9uZW50IGZvciB0aGUgd3JhcHBlclxuICAgKiBhbHdheXMgbXVzdCBoYXZlIHRoZSBiYXNlIHdyYXBwZXIgcHJvcHMsIGJ1dCBpdCBjYW4gaGF2ZSBleHRyYSBhcmd1bWVudHNcbiAgICogYW5kIHRoZXkgY2FuIGJlIHByb3ZpZGVkIHZpYSB0aGlzIGFyZ3VtZW50XG4gICAqL1xuICB3cmFwcGVyQXJncz86IGFueTtcblxuICAvKipcbiAgICogV3JhcHBlcnMgZm9yIHNwZWNpZmljIGVsZW1lbnRzIGFzIHRoZXkgYXJlIHNlbGVjdGVkIGFuZCBvbmx5IGlmIHRoZXkgYXJlIHNlbGVjdGVkXG4gICAqL1xuICBlbGVtZW50V3JhcHBlcnM/OiBJU2xhdGVFZGl0b3JFbGVtZW50V3JhcHBlcnM7XG5cbiAgLyoqXG4gICAqIEFyZ3MgcGFzc2VkIHRvIGFsbCB0aGUgZWxlbWVudCB3cmFwcGVyc1xuICAgKi9cbiAgZWxlbWVudFdyYXBwZXJzQXJncz86IGFueTtcblxuICAvKipcbiAgICogVGhlIGxpc3Qgb2Ygc3RhbmRhcmQgZmVhdHVyZXMgdGhhdCBhcmUgc3VwcG9ydGVkXG4gICAqIGFjY29yZGluZyB0byB0aGUgZGVmaW5pdGlvbiwgdGhlIHByb3BlcnR5IGVudHJ5IGhhbmRsZXJcbiAgICogcHJvdmlkZXMgdGhpcyByaWdodCBhd2F5IHRvIHRoZSByZW5kZXJlclxuICAgKi9cbiAgZmVhdHVyZXM6IElGZWF0dXJlU3VwcG9ydE9wdGlvbnM7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgYXMgaHRtbCBvciBwbGFpbiB0ZXh0LCBsb29rIGF0IHRoZVxuICAgKiBpc1JpY2hUZXh0IHByb3AgaW4gdGhpcyBzYW1lIHN0cnVjdHVyZSBpbiBvcmRlclxuICAgKiB0byBtYXJrIGl0IGFzIGh0bWwgb3IgcGxhaW5cbiAgICovXG4gIHZhbHVlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiB3aGV0aGVyIHRoZSBjdXJyZW50IHZhbHVlIGlzIHZhbGlkLCB0aGUgaGFuZGxlclxuICAgKiBjYW4gZGVjaWRlIHdoZXRoZXIgdGhlIHZhbHVlIGlzIHZhbGlkLCBlZy4gdG9vIGxvbmdcbiAgICogYW5kIG1hcmsgaXQgaGVyZSBhcyBpbnZhbGlkXG4gICAqL1xuICBjdXJyZW50VmFsaWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBBIGN1cnJlbnQgbG9hZGluZyBlcnJvciwgdHJhbnNsYXRlZCwgdGhpcyBpcyBhbHNvIGdpdmVuIGJ5XG4gICAqIHRoZSBoYW5kbGVyOyBpdCBpcyB1c2VkIHdoZW4gYSBmYWlsdXJlIG9jY3VycmVkIHRvIGluc2VydFxuICAgKiBmaWxlcyBhbmQgb3RoZXIgZm9ybXMgb2YgbWVkaWEgY29udGVudFxuICAgKi9cbiAgY3VycmVudExvYWRFcnJvcjogc3RyaW5nO1xuICAvKipcbiAgICogVXNlZCB0byBzZXQgYXJpYSB2YWx1ZXMgZm9yIHBlb3BsZSB3aG8gdXNlIHNjcmVlbiByZWFkZXJzXG4gICAqIFxuICAgKiBhZmZlY3RzIGJvdGggYXJpYS1pbnZhbGlkIGFuZCBhcmlhLWVycm9ybWVzc2FnZVxuICAgKi9cbiAgY3VycmVudEdlbmVyYWxFcnJvckVsZW1lbnRJZD86IHN0cmluZztcbiAgLyoqXG4gICAqIGFmZmVjdHMgYXJpYS1kZXNjcmliZWRieVxuICAgKi9cbiAgY3VycmVudERlc2NyaWJlZEJ5Pzogc3RyaW5nO1xuICAvKipcbiAgICogRGlzbWlzcyB0aGUgY3VycmVudCBsb2FkIGVycm9yXG4gICAqL1xuICBkaXNtaXNzQ3VycmVudExvYWRFcnJvcjogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFRoZSByb290IGNvbnRleHQsIGNhbiBiZSBudWxsIGlmIG5vIGNvbnRleHQ7IGdpdmVuIHRoaXMgaXMgYSB0ZXh0IHR5cGVcbiAgICogYW5kIHRoZSBjb250ZXh0IGlzIGFuIHNwZWNpYWwgc29ydCBvZiBhcmd1bWVudCB0aGUgcmVuZGVyZXIgbXVzdCBiZSB0aGUgb25lXG4gICAqIHRoYXQgZGVjaWRlcyBob3cgdG8gcmVjZWl2ZSB0aGVzZSBhbmQgaG93IHRvIHRha2UgdGhlbSwgdXNpbmcgdGhlXG4gICAqIHJlbmRlcmVyQXJncyBwcm9wZXJ0eSBpdCBtaWdodCBiZSBwYXNzZWQgdGhlcmUsIGFzIHRoaXMgaXMgYSByZW5kZXJpbmdcbiAgICogZWxlbWVudFxuICAgKi9cbiAgcm9vdENvbnRleHQ6IElUZW1wbGF0ZUFyZ0NvbnRleHREZWZpbml0aW9uO1xuICAvKipcbiAgICogVGhlIGJhc2UgaTE4biwgdGhpcyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgd3JhcHBlclxuICAgKiB0aGUgd3JhcHBlciBtYXkgcmVxdWlyZSBtb3JlIGluZm9ybWF0aW9uXG4gICAqIHNvIGl0IGlzIHJlY29tbWVuZGVkIHRoYXQgeW91IGNoZWNrIGhvdyB0aGUgd3JhcHBlciBoYW5kbGVzIGl0c1xuICAgKiBuZWVkc1xuICAgKi9cbiAgYmFzZUkxOG46IElCYXNlSTE4blJpY2hUZXh0SW5mbztcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHZhbHVlIHJlcHJlc2VudHMgcmljaCB0ZXh0LCBnaXZlbiB0aGUgdmFsdWUgaXNcbiAgICogYSBzdHJpbmcsIHRoaXMgZWRpdG9yIG11c3Qga25vdyBob3cgdG8gcGFyc2UgaXRcbiAgICovXG4gIGlzUmljaFRleHQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBBbiBpbnRlcm5hbCB2YWx1ZSBwcm92aWRlZFxuICAgKiB0aGF0IHJlcHJlc2VudHMgYSBzbGF0ZSBkb2N1bWVudFxuICAgKiBpdCBtaWdodCBiZSBudWxsIGlmIHRoaXMgdmFsdWVcbiAgICogaXMgdW5rbm93blxuICAgKi9cbiAgdHJlZVZhbHVlOiBJUm9vdExldmVsRG9jdW1lbnQ7XG4gIC8qKlxuICAgKiBUcmlnZ2VycyBvbiBjaGFuZ2UsIGl0IGlzIG1lYW50IHRvIGtlZXAgdGhlIHNhbWUgc2hhcGVcbiAgICogYXMgdGhlIGhhbmRsZXIgZXhwZWN0cyBpdFxuICAgKi9cbiAgb25DaGFuZ2U6ICh2YWx1ZTogc3RyaW5nLCB0cmVlVmFsdWU6IElSb290TGV2ZWxEb2N1bWVudCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFRyaWdnZXJzIG9uIGZvY3VzLCBpdCBjYW4gYmUgdXNlZCB0byBjdXN0b21pemUgdGhlIHJlbmRlcmVyIHRoYXQgaXMgY3JlYXRlZFxuICAgKiB1c2luZyBpdFxuICAgKi9cbiAgb25Gb2N1cz86ICgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBUcmlnZ2VycyBvbiBibHVyLCBpdCBjYW4gYmUgdXNlZCB0byBjdXN0b21pemUgdGhlIHJlbmRlcmVyIHRoYXQgaXMgY3JlYXRlZFxuICAgKiB1c2luZyBpdFxuICAgKi9cbiAgb25CbHVyPzogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRoYXQgdXN1YWxseSBjb21lcyBmcm9tIHRoZSBoYW5kbGVyIGFuZCBpcyBwcm92aWRlZCB2aWEgdGhlIHJlbmRlcmVyXG4gICAqIGRpcmVjdGx5IHRvIHRoaXMgaW4gb3JkZXIgdG8gaGFuZGxlIGZpbGUgaW5zZXJ0aW9ucyBpbnRvIHRoZSBtZWRpYSBwcm9wZXJ0eVxuICAgKiB0aGlzIGZ1bmN0aW9uIGlzIGdpdmVuIGJ5IHRoZSBoYW5kbGVyIGluIHRoaXMgd2F5IHRvIHRoZSByZW5kZXJlclxuICAgKi9cbiAgb25JbnNlcnRGaWxlOiAoZmlsZTogRmlsZSwgaXNFeHBlY3RpbmdJbWFnZT86IGJvb2xlYW4pID0+IFByb21pc2U8SVNsYXRlSW5zZXJ0ZWRGaWxlSW5mb3JtYXRpb25UeXBlPiB8IElTbGF0ZUluc2VydGVkRmlsZUluZm9ybWF0aW9uVHlwZTtcbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRoYXQgdXN1YWxseSBjb21lcyBmcm9tIHRoZSBoYW5kbGVyIGFuZCBpcyBwcm92aWRlZCB2aWEgdGhlIHJlbmRlcmVyXG4gICAqIGRpcmVjdGx5IHRvIHRoaXMgaW4gb3JkZXIgdG8gaGFuZGxlIGZpbGUgaW5zZXJ0aW9ucyBpbnRvIHRoZSBtZWRpYSBwcm9wZXJ0eVxuICAgKiB0aGlzIGZ1bmN0aW9uIGlzIGdpdmVuIGJ5IHRoZSBoYW5kbGVyIGluIHRoaXMgd2F5IHRvIHRoZSByZW5kZXJlclxuICAgKi9cbiAgb25JbnNlcnRGaWxlRnJvbVVSTDogKHVybDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGlzRXhwZWN0aW5nSW1hZ2U/OiBib29sZWFuKSA9PiBQcm9taXNlPElTbGF0ZUluc2VydGVkRmlsZUluZm9ybWF0aW9uVHlwZT4gfCBJU2xhdGVJbnNlcnRlZEZpbGVJbmZvcm1hdGlvblR5cGU7XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBzcGVjaWZpZWQgdG8gaW5mb3JtIHdoZXRoZXIgYSBmaWxlIGlzIGluY2x1ZGVkXG4gICAqIGluIHRoZSBjdXJyZW50IGludGVybmFsIGluZm9ybWF0aW9uXG4gICAqL1xuICBvblJldHJpZXZlRmlsZTogKGZpbGVJZDogc3RyaW5nKSA9PiBJU2xhdGVGaWxlO1xuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBzcGVjaWZpZWQgdG8gcmV0cmlldmUgYW4gaW1hZ2VcbiAgICogQHBhcmFtIGZpbGVJZCBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBvblJldHJpZXZlSW1hZ2U6IChmaWxlSWQ6IHN0cmluZykgPT4gKHsgZmlsZTogSVNsYXRlRmlsZSwgc3Jjc2V0OiBzdHJpbmcgfSlcbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIHNwZWNpZmllZCB0byByZXRyaWV2ZSBkYXRhIHVyaXMgZnJvbSBibG9iIHVybHMgZ2l2ZW5cbiAgICogYSBmaWxlIGlkXG4gICAqL1xuICAvLyBvblJldHJpZXZlRGF0YVVSSTogKGZpbGVJZDogc3RyaW5nKSA9PiBzdHJpbmc7XG4gIC8qKlxuICAgKiBBIHBsYWNlaG9sZGVyIHRvIGJlIHVzZWQgdG8gYmUgZGlzcGxheWVkLCBpdCBvbmx5IGRpc3BsYXlzIHdoZW4gdGhlIHZhbHVlXG4gICAqIGlzIGNvbnNpZGVyZWQgdG8gYmUgdGhlIG51bGwgZG9jdW1lbnRcbiAgICovXG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAvKipcbiAgICogV2hldGhlciB0byBhdXRvIGZvY3VzIG9uIG1vdW50XG4gICAqL1xuICBhdXRvRm9jdXM/OiBib29sZWFuO1xuICAvKipcbiAgICogV2hldGhlciB0aGUgZmllbGQgaXMgZGlzYWJsZWRcbiAgICovXG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEFuIHNwZWNpZmljIHNjcm9sbCBtYXJnaW4gdG9wIHRvIGJlIHVzZWQgd2hlbiBzY3JvbGwgaW50byB2aWV3IGlzIHVzZWRcbiAgICogYWdhaW5zdCB0aGlzIGVsZW1lbnRcbiAgICovXG4gIHNjcm9sbE1hcmdpblRvcD86IHN0cmluZyB8IG51bWJlcjtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiB0aGlzIGVkaXRvciBhbmQgaXQgaXMgdXNlZCBvbmx5XG4gKiBpbnRlcm5hbGx5IGluIHRoZSBlZGl0b3Igc3RhdGUsIHRoZSB3cmFwcGVyIG1pZ2h0IGFjY2VzcyBzb21lIHBhcnRzIG9mIGl0XG4gKiBuZXZlcnRoZWxlc3MgdmlhIHRoZSBoZWxwZXJzLCBmZWF0dXJlIHN1cHBvcnQgYW5kIHdoYXRub3RcbiAqL1xuaW50ZXJmYWNlIElTbGF0ZUVkaXRvclN0YXRlIGV4dGVuZHMgSVNsYXRlRWRpdG9ySW50ZXJuYWxTdGF0ZVR5cGUge1xuICAvKipcbiAgICogVGhlIGFjdHVhbCBpbnRlcm5hbCB2YWx1ZSB0aGF0IHNsYXRlIGlzXG4gICAqIHVzaW5nLCBzbGF0ZSBleHBlY3RzIGFuIGltbXV0YWJsZSBvYmplY3QgaGVyZSwgYW5kIHRoaXMgaXMgd2hhdCBpdCBpc1xuICAgKiB1c2luZyB0aGUgc2VyaWFsaXplciBmdW5jdGlvbnMgaW4gdGhlIHV0aWxpdGllcyBpbiBvcmRlclxuICAgKiB0byBvYnRhaW4gdGhpcyBpbnRlcm5hbCB2YWx1ZVxuICAgKi9cbiAgdHJlZVZhbHVlOiBJUm9vdExldmVsRG9jdW1lbnQ7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBpbnRlcm5hbCB2YWx1ZSBpcyBzeW5jZWQgb3Igc2hvdWxkIGJlIHN5bmNlZCwgYmVjYXVzZSB0aGUgcmljaFxuICAgKiB0ZXh0IGVkaXRvciBpcyByYXRoZXIgY29tcGxleCwgc2VuZGluZyB1cGRhdGVzIGFsbCB0aGUgdGltZSBhbmQgcmVmZXRjaGluZyBmcm9tXG4gICAqIHRoZSBzdHJpbmcgdGhhdCBpcyBjdXJyZW50IHZhbHVlIHRvIHJlcGFyc2UgaXMgZXhwZW5zaXZlLCB3ZSBkbyB0aGUgZm9sbG93aW5nXG4gICAqIFxuICAgKiAxLiBvbmNlIHNvbWV0aGluZyBoYXMgY2hhbmdlZCBpbiBzbGF0ZSwgdGhlIHN5bmNlZCBzdGF0ZSB3aWxsIGJlIHNldCB0byBmYWxzZSwgYW5kIGEgdGltZXIgd2lsbCBiZSBzZXQgYXNcbiAgICogYSB0aW1lb3V0IGluIG9yZGVyIHRvIGFjdHVhbGx5IGNhbGwgb25DaGFuZ2UsIHNvIGl0ZW1pemUgaW50ZXJuYWwgaGFuZGxpbmcgKHdoaWNoIGlzIGV4cGVuc2l2ZSksIHdvbid0IHRyaWdnZXJcbiAgICogb24gZXZlcnkgc2luZ2xlIGtleXByZXNzLCBvbmNlIHRoZSB1c2VyIHN0b3BzIHR5cGluZywgdGhlIGVudGlyZSBjaGFpbiBvZiBldmVudHMgZ2V0cyByZWxlYXNlZFxuICAgKiAyLiB3aGlsZSB0aGUgZmxhZyBpcyBmYWxzZSB0aGUgc3RyaW5nIHZhbHVlIGNhbm5vdCBhZmZlY3QgdGhlIGludGVybmFsbHkgc2V0IHZhbHVlIGFuZCBpdCB3aWxsIG5vdCBvdmVycmlkZSwgc29cbiAgICogdGhlIHZhbHVlIHRoYXQgaXMgc2hvd24gaXMgb25seSBkZXBlbmRhbnQgb24gdGhlIGludGVybmFsIHN0YXRlIHRoYXQgaXMgaGVyZSwgYW5kIG9uY2UgdGhlIGZsYWcgaXMgc2V0IHRvIHRydWVcbiAgICogdGhlbiBpdCB3aWxsIGJlIHJlY2hlY2tlZFxuICAgKiAzLiB3aGVuIHRoZSBmbGFnIGlzIHNldCB0byB0cnVlICh1c2luZyBnZXREZXJpdmVkIGluIG9yZGVyIG8gYmUgY2hlYXBlciBhbmQgYXZvaWQgMSBleHRyYSByZW5kZXIgY3ljbGUpIHdlIHdpbGxcbiAgICogMy4xLiBDaGVjayB0aGUgaW50ZXJuYWwgdmFsdWUsIGlmIG9uZSBwcm92aWRlZCwgYW5kIGlmIHRoZXkgYm90aCBhcmUgdGhlIHNhbWUgYW5kIG1hdGNoIHRoZSB1dWlkIHNpZ25hdHVyZSwgdGhlbiB3ZVxuICAgKiBjb25zaWRlciB3ZSBhcmUgaG9sZGluZyB0aGUgc2FtZSB2YWx1ZTsgaWYgdGhhdCdzIG5vdCB0aGUgY2FzZSwgbm8gaW50ZXJuYWwgdmFsdWUsIG9yIGludGVybmFsIHZhbHVlIGRvZXNuJ3QgbWF0Y2hcbiAgICogd2UgcmVzZXQgdG8gdGhlIG5ldyBpbnRlcm5hbCB2YWx1ZSBhbmQgZGlzYWJsZSBhbGwgY3VycmVudCBzZWxlY3Rpb25zIGFuZCBhbmNob3JzXG4gICAqIDMuMi4gQ2hlY2sgdGhlIHN0cmluZyB2YWx1ZSBhbmQgc2VyaWFsaXplIGl0LCBiYXNlZCBvbiB0aGUgaXNSaWNoVGV4dCBwcm9wZXJ0eSB0byBkZWZpbmUgaG93IGl0IHdpbGwgYmUgcGFyc2VkXG4gICAqIHRvIGNyZWF0ZSBhIGRvY3VtZW50LCBjaGVjayB0aGUgc2lnbmF0dXJlIG9mIHRoZSByZXN1bHQsIGlmIHRoZSBzaWduYXR1cmUgZG9lc24ndCBtYXRjaCwgdGhpcyBtZWFucyB0aGV5IGFyZSBkaWZmZXJlbnRcbiAgICogZG9jdW1lbnRzIHNvIHdlIGRvIHRoZSBzYW1lLCBhbmQgdXBkYXRlIHdpdGggdGhlIG5ldyB2YWx1ZVxuICAgKi9cbiAgc3luY2VkOiBib29sZWFuO1xuICAvKipcbiAgICogYWxsIGNvbnRhaW5lcnMgdGhhdCBleGlzdCB3aXRoaW4gdGhlIGRlZmluaXRpb25zXG4gICAqIGZvciB0aGUgY3NzIGNsYXNzZXNcbiAgICogXG4gICAqIFRoZXkgZXhpc3QgYXMgc3RhdGUgYmVjYXVzZSBvZiBTU1JcbiAgICogVGhlIHNlcnZlciBzaWRlIGlzIG5vdCBhYmxlIHRvIGFjY2VzcyB0aGVzZSBub3IgcmVhZCB0aGUgQ1NTIGZpbGVcbiAgICogZnJvbSB0aGUgc3R5bGVzaGVldHMgZGVmaW5pdGlvblxuICAgKi9cbiAgYWxsQ29udGFpbmVyczogc3RyaW5nW107XG4gIC8qKlxuICAgKiBhdmFpbGFibGUgY3VzdG9tIHRoYXQgZXhpc3Qgd2l0aGluIHRoZSBkZWZpbml0aW9uc1xuICAgKiBmb3IgdGhlIGNzcyBjbGFzc2VzXG4gICAqIFxuICAgKiBUaGV5IGV4aXN0IGFzIHN0YXRlIGJlY2F1c2Ugb2YgU1NSXG4gICAqIFRoZSBzZXJ2ZXIgc2lkZSBpcyBub3QgYWJsZSB0byBhY2Nlc3MgdGhlc2Ugbm9yIHJlYWQgdGhlIENTUyBmaWxlXG4gICAqIGZyb20gdGhlIHN0eWxlc2hlZXRzIGRlZmluaXRpb25cbiAgICovXG4gIGFsbEN1c3RvbTogc3RyaW5nW107XG4gIC8qKlxuICAgKiBhdmFpbGFibGUgcmljaCBjbGFzcyB0aGF0IGV4aXN0IHdpdGhpbiB0aGUgZGVmaW5pdGlvbnNcbiAgICogZm9yIHRoZSBjc3MgY2xhc3Nlc1xuICAgKiBcbiAgICogVGhleSBleGlzdCBhcyBzdGF0ZSBiZWNhdXNlIG9mIFNTUlxuICAgKiBUaGUgc2VydmVyIHNpZGUgaXMgbm90IGFibGUgdG8gYWNjZXNzIHRoZXNlIG5vciByZWFkIHRoZSBDU1MgZmlsZVxuICAgKiBmcm9tIHRoZSBzdHlsZXNoZWV0cyBkZWZpbml0aW9uXG4gICAqL1xuICBhbGxSaWNoQ2xhc3Nlczogc3RyaW5nW107XG4gIC8qKlxuICAgKiBhbGwgdGFibGVzIHRoYXQgZXhpc3Qgd2l0aGluIHRoZSBkZWZpbml0aW9uc1xuICAgKiBmb3IgdGhlIGNzcyBjbGFzc2VzXG4gICAqIFxuICAgKiBUaGV5IGV4aXN0IGFzIHN0YXRlIGJlY2F1c2Ugb2YgU1NSXG4gICAqIFRoZSBzZXJ2ZXIgc2lkZSBpcyBub3QgYWJsZSB0byBhY2Nlc3MgdGhlc2Ugbm9yIHJlYWQgdGhlIENTUyBmaWxlXG4gICAqIGZyb20gdGhlIHN0eWxlc2hlZXRzIGRlZmluaXRpb25cbiAgICovXG4gIGFsbFRhYmxlczogc3RyaW5nW107XG59XG5cbmNvbnN0IGZhbHNlRm4gPSAoKSA9PiBmYWxzZTtcblxuLyoqXG4gKiBCZWhvbGQgdGhlIGNvbXBvbmVudCB0aGF0IGRvZXMgYSBsb3Qgb2YgdGhlIG1hZ2ljXG4gKiBmb3IgcmljaCB0ZXh0IGhhbmRsaW5nLCB0aGlzIGNvbXBvbmVudCBkb2VzIG5vdCBoYXZlIGFueSBkZWZpbml0aW9uXG4gKiBvbiBob3cgaXQgaXMgc3VwcG9zZWQgdG8gcmVuZGVyIHRoaW5ncyBsaWtlIHRoZSB0b29sYmFyIGFuZCB3aGF0IGZ1bmN0aW9uc1xuICogc3VjaCBwcm92aWRlcyBpbiBvcmRlciB0byBiZSBhYmxlIHRvIGNvbnN0cnVjdCB0aGUgcmljaCB0ZXh0XG4gKiBhbmQgaXQncyB0aGUgam9iIG9mIHRoZSBkZXZlbG9wZXIgdG8gZGVjaWRlIGhvdyB0byBkbyBzbywgYnkgZGVmYXVsdCB0aGVyZVxuICogaXMgYSB3cmFwcGVyIHRoYXQgaXMgdXNlZCBmb3IgZmFzdCBwcm90b3R5cGluZywgYnV0IGl0J3MgYSByYXRoZXIgZ2VuZXJpY1xuICogb25lLCBhbmQgZGV2ZWxvcGVycyB1c2luZyBpdGVtaXplIHNob3VsZCB1c2UgdGhpcyBzbGF0ZSBlZGl0b3IgY2xhc3MgYW5kIGFyZVxuICogY29tbWVuZGVkIHRvLCBiZWNhdXNlIGl0J3MgZWFzeSwgYnV0IHRoZXkgc2hvdWxkIHByZWZlciB0byB1c2UgdGhlaXIgb3duXG4gKiBjdXN0b21pemVkIHdyYXBwZXIgdG8gcHJvdmlkZSB0aGUgZnVuY3Rpb25hbGl0eSB0aGV5IHdhbnQgYW5kIGhvdyB0aGV5IHdhbnQgaXRcbiAqIHNvIHRoZXkgY2FuIGRlZmluZSBldmVuIHRoZWlyIG93biBjdXN0b20gdWktaGFuZGxlciBiYXNlZCBlbGVtZW50cywgc3VjaCBhcywgZWcuXG4gKiBtYXRoIGNvbXBvbmVudHNcbiAqIFxuICogaXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHlvdXIgb3duIGN1c3RvbSByZW5kZXJlciBhbmQgaW1wb3J0IHRoaXMgY2xhc3MsIGNvcHlpbmcgb2ZmXG4gKiB0aGUgUHJvcGVydHlFbnRyeVRleHQgYmVjYXVzZSBpdCB3aWxsIG5vdCBpbmNsdWRlIGFueSBtYXRlcmlhbCBVSSBmYXN0IHByb3RvdHlwaW5nIHJlc291cmNlc1xuICogb3RoZXJ3aXNlIGlmIHlvdSBhcmUgYWxzbyB1c2luZyBtYXRlcmlhbCBVSSBhcyBpbmNsdWRlZCBpbiBpdGVtaXplIHlvdSBtaWdodCB1c2VcbiAqIFdyYXBwZXIgYW5kIHdyYXBwZXJBcmdzIGluIHRoZSByZW5kZXJlckFyZ3MgYnV0IHRoaXMgaXMgcmF0aGVyIGFkdmFuY2VkLCB0aGUgbW9zdFxuICogYWR2YW5jZWQgc3R1ZmYgb2ZmIGl0ZW1pemUgYW5kIG9uZSB0aGF0IHNob3VsZCBiZSBzaW1wbGlmaWVkXG4gKi9cbmV4cG9ydCBjbGFzcyBTbGF0ZUVkaXRvciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJU2xhdGVFZGl0b3JQcm9wcywgSVNsYXRlRWRpdG9yU3RhdGU+IHtcbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgdGhlIHJlYWN0IGVkaXRvciBlbGVtZW50IHRoYXQgaXMgY3JlYXRlZFxuICAgKiB1c2luZyBzbGF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBlZGl0b3I6IEl0ZW1pemVFZGl0b3I7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSB1cGRhdGUgdGltZW91dCB0aGF0IGlzIHVzZWQgaW4gb3JkZXIgdG8gcnVuIG9uQ2hhbmdlIGV2ZW50cyB3aGVuXG4gICAqIHRoZSB1c2VyIHN0b3BzIHR5cGluZyBhbmQgbm90IG9uIGV2ZXJ5IGtleXN0cm9rZSwgYmVjYXVzZSByaWNoIHRleHQgaXMgZXhwZW5zaXZlXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZVRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0O1xuICBwcml2YXRlIGlzSW5Ob3JtYWxpemF0aW9uOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgcHJldmVudE5vcm1hbGl6ZTogYm9vbGVhbiA9IGZhbHNlO1xuICAvKipcbiAgICogV2hlbiBhIGNhbGwgdG8gZGVsZXRlIHRoZSBjdXJyZW50IHNlbGVjdGVkIG5vZGUgaXMgZG9uZSwgdGhlIHNlbGVjdGlvbiBhbmNob3JzIGFzIHRoZXkgaGF2ZSBiZWVuIHNldFxuICAgKiBuZWVkIHRvIGJlIHJlbW92ZWQgYW5kIHJlc2V0IGJlY2F1c2Ugb3RoZXJ3aXNlIHRoZXkgd2lsbCBiZSBwb2ludGluZyB0byBpbnZhbGlkIG5vZGVzLCB0aGlzIGludGVybmFsXG4gICAqIGZsYWcgYWxsb3dzIHRvIGtlZXAgdHJhY2sgb2YgdGhhdCBzby5cbiAgICogXG4gICAqIDEuIHRoZSBkZWxldGUgZnVuY3Rpb24gZ2V0cyBjYWxsZWQsIHRoZSBmbGFnIGdldHMgc2V0IHRvIHRydWVcbiAgICogMi4gc2xhdGUgaXMgaW50ZXJuYWxseSBhc2tlZCB0byBkZWxldGUgYXQgdGhlIHNlbGVjdGVkIGFuZCBnaXZlbiBwYXRoXG4gICAqIDMuIHRoaXMgdHJpZ2dlcnMgdGhlIGNoYW5nZSBmdW5jdGlvbiB3aGljaCB3aWxsIHRyeSB0byByZWNhbGN1bGF0ZSBhbmNob3JzLCBidXQgdGhlIG9sZCBhbmNob3JzIGFyZSBpbnZhbGlkXG4gICAqIDQuIGJlY2F1c2Ugb2YgdGhlIGZsYWcgdGhlIGNoYW5nZSBmdW5jdGlvbiBrbm93cyB0aGUgbFx1MDBGNmFzdCBjaGFuZ2Ugd2FzIGEgc2VsZWN0ZWQgZGVsZXRlIGFuZCB0ZWxscyB0aGUgYW5jaG9yXG4gICAqIHJlY2FsY3VsYXRpb24gbm90IHRvIHJldXNlIG9sZCBhbmNob3JzXG4gICAqL1xuICBwcml2YXRlIGxhc3RDaGFuZ2VXYXNTZWxlY3RlZERlbGV0ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgb3JpZ2luYWxTZXRGcmFnbWVudERhdGE6IGFueTtcbiAgcHJpdmF0ZSBvcmlnaW5hbEluc2VydERhdGE6IGFueTtcbiAgcHJpdmF0ZSBpc1VubW91bnRlZDogYm9vbGVhbjtcblxuICBwcml2YXRlIGVkaXRhYmxlUmVmOiBSZWFjdC5SZWZPYmplY3Q8SFRNTERpdkVsZW1lbnQ+ID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gIHByaXZhdGUgd3JhcHBlclJlZjogUmVhY3QuUmVmT2JqZWN0PGFueT4gPSBSZWFjdC5jcmVhdGVSZWYoKTtcblxuICAvKipcbiAgICogVGhlIHN0YW5kYXJkIGRlcml2ZWQgc3RhdGUgZnVuY3Rpb24gaXMgdXNlZCBpbiBvcmRlciB0byBzZXQgdGhlIHN0YXRlIGluIGFuIGVmZmVjdGl2ZSB3YXlcbiAgICogaXQgaXMgdXNlZCBiZWNhdXNlIHRoZSBiZWhhdmlvdXIgb2YgdGhpcyBlZGl0b3IgaXMgcmF0aGVyIGNvbXBsZXhcbiAgICogQHBhcmFtIHByb3BzIHRoZSBjdXJyZW50IHByb3BzXG4gICAqIEBwYXJhbSBzdGF0ZSB0aGUgY3VycmVudCBzdGF0ZVxuICAgKiBAcmV0dXJucyBhIHBhcnRpYWwgb2YgdGhlIG5ldyBzdGF0ZSBvciBudWxsXG4gICAqL1xuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKHByb3BzOiBJU2xhdGVFZGl0b3JQcm9wcywgc3RhdGU6IElTbGF0ZUVkaXRvclN0YXRlKTogUGFydGlhbDxJU2xhdGVFZGl0b3JTdGF0ZT4ge1xuICAgIC8vIHdlIG9ubHkgbWVzcyB3aXRoIHRoZSBzdGF0ZSBpZiB3ZSBhcmUgc3luY2VkXG4gICAgLy8gaWYgd2UgZGlkIG5vdCBvdXIgc3RhdGUgd291bGQgYmFzaWNhbGx5IGJlIGltbXV0YWJsZVxuICAgIC8vIGFzIGl0IHdvdWxkIHJlc3RvcmUgZnJvbSB0aGUgcHJvcCBvbiBlYWNoIHJlbmRlciBjeWNsZVxuICAgIGlmIChzdGF0ZS5zeW5jZWQpIHtcbiAgICAgIC8vIG5vdyBpZiB3ZSBoYXZlIGFuIGludGVybmFsIHZhbHVlIHRoYXQgaXMgZ2l2ZW4gdmlhIHRoZSBwcm9wc1xuICAgICAgLy8gdGhpcyBtZWFucyB0aGF0IHRoaXMgaXMgdGhlIGludGVybmFsIHZhbHVlIHRoYXQgcmVmZXJzIHRvIHRoZSB2YWx1ZVxuICAgICAgLy8gaXRzZWxmXG4gICAgICBpZiAocHJvcHMudHJlZVZhbHVlKSB7XG5cbiAgICAgICAgLy8gd2UgY2hlY2ssIGlmIHdlIGRvbid0IGhhdmUgYW4gaW50ZXJuYWwgdmFsdWUgdGhlbiBjZXJ0YWlubHlcbiAgICAgICAgLy8gdGhpcyBuZXcgaW50ZXJuYWwgdmFsdWUgYXBwbGllcywgYW5kIGFsc28gd2Ugb25seSBjYXJlIGFib3V0IGNoYW5naW5nXG4gICAgICAgIC8vIHRvIHRoZSBpbnRlcm5hbCB2YWx1ZSBuZXcgdmFsdWUgaWYgdGhlIGlkcyBhcmUgbWlzdG1hdGNoaW5nIGFzIHRoaXMgaWRcbiAgICAgICAgLy8gcmVwcmVzZW50cyB0aGUgdW5pcXVlIHNpZ25hdHVyZSBvZiB0aGF0IHZhbHVlXG4gICAgICAgIGlmICghc3RhdGUudHJlZVZhbHVlIHx8IHByb3BzLnRyZWVWYWx1ZS5pZCAhPT0gc3RhdGUudHJlZVZhbHVlLmlkKSB7XG5cbiAgICAgICAgICAvLyBzbyBpZiB0aGUgY3JpdGVyaWEgcGFzc2VzLCBhbmQgdGhlIHNpZ25hdHVyZXMgZG9uJ3QgbWF0Y2ggb3IgdGhlcmUncyBubyBpbnRlcm5hbFxuICAgICAgICAgIC8vIHZhbHVlIHRvIGNvbXBhcmUgYWdhaW5zdCB3ZSB3aWxsIHVwZGF0ZSB0aGUgaW50ZXJuYWwgdmFsdWUgYW5kIGNsZWFyIGFsbCB0aGUgYW5jaG9yc1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0cmVlVmFsdWU6IHByb3BzLnRyZWVWYWx1ZSxcbiAgICAgICAgICAgIGlzUmljaFRleHQ6IHByb3BzLmlzUmljaFRleHQsXG4gICAgICAgICAgICBjdXJyZW50Um9vdENvbnRleHQ6IHByb3BzLnJvb3RDb250ZXh0IHx8IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50VmFsaWQ6IHByb3BzLmN1cnJlbnRWYWxpZCxcblxuICAgICAgICAgICAgY3VycmVudFRleHQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50SW5saW5lRWxlbWVudDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRCbG9ja0VsZW1lbnQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFRleHRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50SW5saW5lRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRCbG9ja0VsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzOiBudWxsLFxuXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50czogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lQ29udGV4dDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudENvbnRleHQ6IG51bGwsXG4gICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIHByZXZpb3VzVGV4dEFuY2hvcjogbnVsbCxcblxuICAgICAgICAgICAgYWxsb3dzSW5zZXJ0RWxlbWVudDogZmFsc2VGbixcbiAgICAgICAgICAgIGFsbG93c1RleHQ6IGZhbHNlLFxuICAgICAgICAgICAgaW5saW5lSXNWb2lkOiBmYWxzZSxcbiAgICAgICAgICAgIGJsb2NrSXNWb2lkOiBmYWxzZSxcbiAgICAgICAgICAgIHRvcG1vc3RTdXBlcmJsb2NrSXNWb2lkOiBmYWxzZSxcbiAgICAgICAgICAgIHN1cGVyQmxvY2tVSUhhbmRsZXI6IG51bGwsXG4gICAgICAgICAgICBibG9ja1VJSGFuZGxlcjogbnVsbCxcbiAgICAgICAgICAgIGlubGluZVVJSGFuZGxlcjogbnVsbCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhbiBpbnRlcm5hbCB2YWx1ZSB3ZSBuZWVkIHRvIHVzZSB0aGUgZ2l2ZW5cbiAgICAgICAgLy8gc3RyaW5nXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBhbmQgZGVzZXJpYWxpemUgaXQgYmFzZWQgb24gdGhlIHByb3BzXG4gICAgICAgIGNvbnN0IG5ld3RyZWVWYWx1ZSA9IHByb3BzLmlzUmljaFRleHQgP1xuICAgICAgICAgIGRlc2VyaWFsaXplKHByb3BzLnZhbHVlLCBzdGF0ZS50cmVlVmFsdWUsIHtcbiAgICAgICAgICAgIHVzZUNvbnRleHRSdWxlc09mOiBzdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICAgICAgICAgfSkgOlxuICAgICAgICAgIGRlc2VyaWFsaXplUGxhaW4ocHJvcHMudmFsdWUsIHN0YXRlLnRyZWVWYWx1ZSk7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUncyBubyBpbnRlcm5hbCB2YWx1ZSB0byBjb21wYXJlLCBvciB0aGUgbmV3IGludGVybmFsIHZhbHVlIGRvZXNuJ3RcbiAgICAgICAgLy8gbWF0Y2ggd2l0aCB0aGUgY3VycmVudCwgbm90ZSB0aGF0IHRoZSBzaWduYXR1cmUgd2lsbCBtYXRjaCB3aXRoIHBhcnNlZCB2YWx1ZXNcbiAgICAgICAgLy8gYXMgaXQgdXNlcyBhIG5hbWVzcGFjZWQgdXVpZCB0aGF0IHdpbGwgZ2l2ZSB0aGUgc2FtZSB2YWx1ZSBmb3IgdGhlIHNhbWUgc3RyaW5nXG4gICAgICAgIGlmICghc3RhdGUudHJlZVZhbHVlIHx8IG5ld3RyZWVWYWx1ZS5pZCAhPT0gc3RhdGUudHJlZVZhbHVlLmlkKSB7XG5cbiAgICAgICAgICAvLyB0aGVuIHdlIGRvIHRoZSBzYW1lIGFuZCBzZXQgdGhlIG5ldyBpbnRlcm5hbCB2YWx1ZVxuICAgICAgICAgIC8vIGFuZCBjbGVhciBhbGwgdGhlIGFuY2hvcnNcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHJlZVZhbHVlOiBuZXd0cmVlVmFsdWUsXG4gICAgICAgICAgICBpc1JpY2hUZXh0OiBwcm9wcy5pc1JpY2hUZXh0LFxuICAgICAgICAgICAgY3VycmVudFJvb3RDb250ZXh0OiBwcm9wcy5yb290Q29udGV4dCB8fCBudWxsLFxuICAgICAgICAgICAgY3VycmVudFZhbGlkOiBwcm9wcy5jdXJyZW50VmFsaWQsXG5cbiAgICAgICAgICAgIGN1cnJlbnRUZXh0OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudElubGluZUVsZW1lbnQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50QmxvY2tFbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50czogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRUZXh0QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudElubGluZUVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yczogbnVsbCxcblxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkVGV4dDogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHM6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yczogbnVsbCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICAgICAgICBwcmV2aW91c1RleHRBbmNob3I6IG51bGwsXG5cbiAgICAgICAgICAgIGFsbG93c0luc2VydEVsZW1lbnQ6IGZhbHNlRm4sXG4gICAgICAgICAgICBhbGxvd3NUZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIGlubGluZUlzVm9pZDogZmFsc2UsXG4gICAgICAgICAgICBibG9ja0lzVm9pZDogZmFsc2UsXG4gICAgICAgICAgICB0b3Btb3N0U3VwZXJibG9ja0lzVm9pZDogZmFsc2UsXG4gICAgICAgICAgICBzdXBlckJsb2NrVUlIYW5kbGVyOiBudWxsLFxuICAgICAgICAgICAgYmxvY2tVSUhhbmRsZXI6IG51bGwsXG4gICAgICAgICAgICBpbmxpbmVVSUhhbmRsZXI6IG51bGwsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIHNsYXRlIGVkaXRvciBjb21wb25lbnRcbiAgICogQHBhcmFtIHByb3BzIHRoZSBwcm9wc1xuICAgKi9cbiAgY29uc3RydWN0b3IocHJvcHM6IElTbGF0ZUVkaXRvclByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIC8vIHNldHRpbmcgdXAgdGhlIGludGVybmFsIHZhbHVlIGZyb20gdGhlIHByb3BlcnR5XG4gICAgICAvLyBmaXJzdCB3ZSBwaWNrIHRoZSBpbnRlcm5hbCB2YWx1ZSBpZiBhdmFpbGFibGVcbiAgICAgIC8vIG9yIG90aGVyd2lzZSB3ZSBwYXJzZSBvbmVcbiAgICAgIHRyZWVWYWx1ZTogcHJvcHMudHJlZVZhbHVlIHx8IChwcm9wcy5pc1JpY2hUZXh0ID8gZGVzZXJpYWxpemUocHJvcHMudmFsdWUsIG51bGwsIHtcbiAgICAgICAgdXNlQ29udGV4dFJ1bGVzT2Y6IHByb3BzLnJvb3RDb250ZXh0LFxuICAgICAgfSkgOiBkZXNlcmlhbGl6ZVBsYWluKHByb3BzLnZhbHVlKSksXG5cbiAgICAgIC8vIHdlIGFyZSBzeW5jZWRcbiAgICAgIHN5bmNlZDogdHJ1ZSxcbiAgICAgIC8vIGZvY3VzZWRcbiAgICAgIGZvY3VzZWQ6IGZhbHNlLFxuXG4gICAgICAvLyBzZXQgdXAgdGhlIGFuY2hvcnNcbiAgICAgIGN1cnJlbnRUZXh0OiBudWxsLFxuICAgICAgY3VycmVudElubGluZUVsZW1lbnQ6IG51bGwsXG4gICAgICBjdXJyZW50QmxvY2tFbGVtZW50OiBudWxsLFxuICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50czogbnVsbCxcbiAgICAgIGN1cnJlbnRUZXh0QW5jaG9yOiBudWxsLFxuICAgICAgY3VycmVudElubGluZUVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yczogbnVsbCxcblxuICAgICAgY3VycmVudFNlbGVjdGVkVGV4dDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHM6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yOiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvcjogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yczogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yOiBudWxsLFxuICAgICAgcHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBwcmV2aW91c1RleHRBbmNob3I6IG51bGwsXG5cbiAgICAgIGlzUmljaFRleHQ6IHByb3BzLmlzUmljaFRleHQsXG4gICAgICBjdXJyZW50Um9vdENvbnRleHQ6IHByb3BzLnJvb3RDb250ZXh0IHx8IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVDb250ZXh0OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudENvbnRleHQ6IG51bGwsXG4gICAgICBjdXJyZW50VmFsaWQ6IHByb3BzLmN1cnJlbnRWYWxpZCxcblxuICAgICAgLy8gZW5zdXJlIFNTUiBjb21wYXRpYmlsaXR5XG4gICAgICAvLyBzaW5jZSB3ZSBjYW5ub3QgcmVhZCB0aGUgQ1NTIGZpbGUgb24gdGhlIHNlcnZlciBzaWRlXG4gICAgICAvLyBhcyB3ZSBoYXZlIG5vIGFjY2VzcyB0byBzdHlsZXNoZWV0c1xuICAgICAgYWxsQ29udGFpbmVyczogW10sXG4gICAgICBhbGxDdXN0b206IFtdLFxuICAgICAgYWxsUmljaENsYXNzZXM6IFtdLFxuICAgICAgYWxsVGFibGVzOiBbXSxcblxuICAgICAgYWxsb3dzSW5zZXJ0RWxlbWVudDogZmFsc2VGbixcbiAgICAgIGFsbG93c1RleHQ6IGZhbHNlLFxuICAgICAgaW5saW5lSXNWb2lkOiBmYWxzZSxcbiAgICAgIGJsb2NrSXNWb2lkOiBmYWxzZSxcbiAgICAgIHRvcG1vc3RTdXBlcmJsb2NrSXNWb2lkOiBmYWxzZSxcbiAgICAgIHN1cGVyQmxvY2tVSUhhbmRsZXI6IG51bGwsXG4gICAgICBibG9ja1VJSGFuZGxlcjogbnVsbCxcbiAgICAgIGlubGluZVVJSGFuZGxlcjogbnVsbCxcbiAgICB9XG5cbiAgICB0aGlzLmlzVW5tb3VudGVkID0gZmFsc2U7XG5cbiAgICAvLyBub3cgd2UgYnVpbGQgdGhlIHNsYXRlIGVkaXRvclxuICAgIGNvbnN0IHJhd0VkaXRvciA9IGNyZWF0ZUVkaXRvcigpO1xuICAgIC8vIHdpdGggcmVhY3Qgb2YgY291cnNlIDspXG4gICAgdGhpcy5lZGl0b3IgPSB3aXRoUmVhY3Qod2l0aEhpc3RvcnkocmF3RWRpdG9yKSk7XG5cbiAgICB0aGlzLmZvcmNlRm9jdXMgPSB0aGlzLmZvcmNlRm9jdXMuYmluZCh0aGlzKTtcbiAgICB0aGlzLmZvcmNlQmx1ciA9IHRoaXMuZm9yY2VCbHVyLmJpbmQodGhpcyk7XG5cbiAgICAvLyBzZXR0aW5nIHVwIHRoZSBmdW5jdGlvbnMgdG8gb3ZlcnJpZGVcbiAgICAvLyB0aGUgZGVmYXVsdHNcbiAgICB0aGlzLm5vcm1hbGl6ZU5vZGUgPSB0aGlzLm5vcm1hbGl6ZU5vZGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydEJyZWFrID0gdGhpcy5pbnNlcnRCcmVhay5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0U3VwZXJicmVhayA9IHRoaXMuaW5zZXJ0U3VwZXJicmVhay5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlQmFja3dhcmQgPSB0aGlzLmRlbGV0ZUJhY2t3YXJkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZWxldGVGb3J3YXJkID0gdGhpcy5kZWxldGVGb3J3YXJkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRGcmFnbWVudERhdGEgPSB0aGlzLnNldEZyYWdtZW50RGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZmluZEFuZEFwcGVuZEZpbGVzVG9EYXRhVHJhbnNmZXIgPSB0aGlzLmZpbmRBbmRBcHBlbmRGaWxlc1RvRGF0YVRyYW5zZmVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnREYXRhID0gdGhpcy5pbnNlcnREYXRhLmJpbmQodGhpcyk7XG4gICAgdGhpcy5maW5kQW5kSW5zZXJ0RmlsZXNGcm9tRGF0YVRyYW5zZmVyID0gdGhpcy5maW5kQW5kSW5zZXJ0RmlsZXNGcm9tRGF0YVRyYW5zZmVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pc1ZvaWQgPSB0aGlzLmlzVm9pZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0Q29udGV4dEZvciA9IHRoaXMuZ2V0Q29udGV4dEZvci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0Um9vdENvbnRleHQgPSB0aGlzLmdldFJvb3RDb250ZXh0LmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLm9yaWdpbmFsU2V0RnJhZ21lbnREYXRhID0gdGhpcy5lZGl0b3Iuc2V0RnJhZ21lbnREYXRhO1xuICAgIHRoaXMub3JpZ2luYWxJbnNlcnREYXRhID0gdGhpcy5lZGl0b3IuaW5zZXJ0RGF0YTtcblxuICAgIC8vIGFuZCBzbyB3ZSBvdmVycmlkZVxuICAgIHRoaXMuZWRpdG9yLmlzSW5saW5lID0gdGhpcy5pc0lubGluZSBhcyBhbnk7XG4gICAgdGhpcy5lZGl0b3IuaXNWb2lkID0gdGhpcy5pc1ZvaWQgYXMgYW55O1xuICAgIHRoaXMuZWRpdG9yLm5vcm1hbGl6ZU5vZGUgPSB0aGlzLm5vcm1hbGl6ZU5vZGU7XG4gICAgdGhpcy5lZGl0b3IuaW5zZXJ0QnJlYWsgPSB0aGlzLmluc2VydEJyZWFrO1xuICAgIHRoaXMuZWRpdG9yLmRlbGV0ZUJhY2t3YXJkID0gdGhpcy5kZWxldGVCYWNrd2FyZDtcbiAgICB0aGlzLmVkaXRvci5kZWxldGVGb3J3YXJkID0gdGhpcy5kZWxldGVGb3J3YXJkO1xuICAgIHRoaXMuZWRpdG9yLnNldEZyYWdtZW50RGF0YSA9IHRoaXMuc2V0RnJhZ21lbnREYXRhO1xuICAgIHRoaXMuZWRpdG9yLmluc2VydERhdGEgPSB0aGlzLmluc2VydERhdGE7XG5cbiAgICB0aGlzLmdldFByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yID0gdGhpcy5nZXRQcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0UHJldmlvdXNUZXh0QW5jaG9yID0gdGhpcy5nZXRQcmV2aW91c1RleHRBbmNob3IuYmluZCh0aGlzKTtcblxuICAgIC8vIG90aGVyIGZ1bmN0aW9ucyBhbmQgaGVsZXIgdXRpbGl0aWVzXG4gICAgdGhpcy5kZWxldGVTZWxlY3RlZE5vZGUgPSB0aGlzLmRlbGV0ZVNlbGVjdGVkTm9kZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlUGF0aCA9IHRoaXMuZGVsZXRlUGF0aC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0VmFsdWUgPSB0aGlzLnNldFZhbHVlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW5kZXJFbGVtZW50ID0gdGhpcy5yZW5kZXJFbGVtZW50LmJpbmQodGhpcyk7XG4gICAgdGhpcy5hY3R1YWxseVJlbmRlckVsZW1lbnQgPSB0aGlzLmFjdHVhbGx5UmVuZGVyRWxlbWVudC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW5kZXJUZXh0ID0gdGhpcy5yZW5kZXJUZXh0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkZvY3VzZWRDaGFuZ2UgPSB0aGlzLm9uRm9jdXNlZENoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25CbHVycmVkQ2hhbmdlID0gdGhpcy5vbkJsdXJyZWRDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uS2V5RG93biA9IHRoaXMub25LZXlEb3duLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmRlbGV0ZVRhYmxlQ29sdW1uID0gdGhpcy5kZWxldGVUYWJsZUNvbHVtbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlVGFibGVSb3cgPSB0aGlzLmRlbGV0ZVRhYmxlUm93LmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZWxlY3RQYXRoID0gdGhpcy5zZWxlY3RQYXRoLmJpbmQodGhpcyk7XG4gICAgdGhpcy5tb3ZlUGF0aHMgPSB0aGlzLm1vdmVQYXRocy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZm9jdXMgPSB0aGlzLmZvY3VzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRJbWFnZSA9IHRoaXMuaW5zZXJ0SW1hZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydFZpZGVvID0gdGhpcy5pbnNlcnRWaWRlby5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlVmlkZW8gPSB0aGlzLnVwZGF0ZVZpZGVvLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRGaWxlID0gdGhpcy5pbnNlcnRGaWxlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRUZW1wbGF0ZVRleHQgPSB0aGlzLmluc2VydFRlbXBsYXRlVGV4dC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlVGVtcGxhdGVUZXh0ID0gdGhpcy51cGRhdGVUZW1wbGF0ZVRleHQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydFRlbXBsYXRlSFRNTCA9IHRoaXMuaW5zZXJ0VGVtcGxhdGVIVE1MLmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGVUZW1wbGF0ZUhUTUwgPSB0aGlzLnVwZGF0ZVRlbXBsYXRlSFRNTC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0VGFibGUgPSB0aGlzLmluc2VydFRhYmxlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRUYWJsZUNvbHVtbiA9IHRoaXMuaW5zZXJ0VGFibGVDb2x1bW4uYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydFRhYmxlUm93ID0gdGhpcy5pbnNlcnRUYWJsZVJvdy5iaW5kKHRoaXMpO1xuICAgIHRoaXMudG9nZ2xlVGFibGUgPSB0aGlzLnRvZ2dsZVRhYmxlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jYW5Ub2dnbGVUYWJsZSA9IHRoaXMuY2FuVG9nZ2xlVGFibGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydENvbnRhaW5lciA9IHRoaXMuaW5zZXJ0Q29udGFpbmVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnRDdXN0b20gPSB0aGlzLmluc2VydEN1c3RvbS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudG9nZ2xlUXVvdGUgPSB0aGlzLnRvZ2dsZVF1b3RlLmJpbmQodGhpcyk7XG4gICAgdGhpcy50b2dnbGVUaXRsZSA9IHRoaXMudG9nZ2xlVGl0bGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc2VydExpc3QgPSB0aGlzLmluc2VydExpc3QuYmluZCh0aGlzKTtcbiAgICB0aGlzLnRvZ2dsZUxpbmsgPSB0aGlzLnRvZ2dsZUxpbmsuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZUxpbmsgPSB0aGlzLnVwZGF0ZUxpbmsuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldFN0eWxlID0gdGhpcy5zZXRTdHlsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0ID0gdGhpcy5zZXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldEhvdmVyU3R5bGUgPSB0aGlzLnNldEhvdmVyU3R5bGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldEFjdGl2ZVN0eWxlID0gdGhpcy5zZXRBY3RpdmVTdHlsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0UmljaENsYXNzZXMgPSB0aGlzLnNldFJpY2hDbGFzc2VzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRDb250ZXh0ID0gdGhpcy5zZXRDb250ZXh0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRJZkNvbmRpdGlvbiA9IHRoaXMuc2V0SWZDb25kaXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldEZvckVhY2ggPSB0aGlzLnNldEZvckVhY2guYmluZCh0aGlzKTtcbiAgICB0aGlzLmZvcm1hdFRvZ2dsZSA9IHRoaXMuZm9ybWF0VG9nZ2xlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRBY3Rpb24gPSB0aGlzLnNldEFjdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5zZXJ0RWxlbWVudCA9IHRoaXMuaW5zZXJ0RWxlbWVudC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0U3RhdGUgPSB0aGlzLmdldFN0YXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRVSUhhbmRsZXIgPSB0aGlzLnNldFVJSGFuZGxlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0VUlIYW5kbGVyQXJnID0gdGhpcy5zZXRVSUhhbmRsZXJBcmcuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuYXZhaWxhYmxlRmlsdGVyaW5nRnVuY3Rpb24gPSB0aGlzLmF2YWlsYWJsZUZpbHRlcmluZ0Z1bmN0aW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jYWxjdWxhdGVBbmNob3JzID0gdGhpcy5jYWxjdWxhdGVBbmNob3JzLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLnVwZGF0ZU5vZGVBdCA9IHRoaXMudXBkYXRlTm9kZUF0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbnNlcnROb2RlQXQgPSB0aGlzLmluc2VydE5vZGVBdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlTm9kZUF0ID0gdGhpcy5kZWxldGVOb2RlQXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm1lcmdlTm9kZXNBdCA9IHRoaXMubWVyZ2VOb2Rlc0F0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5zcGxpdEVsZW1lbnRBbmRFc2NhcGVDaGlsZEludG9QYXJlbnRBdCA9IHRoaXMuc3BsaXRFbGVtZW50QW5kRXNjYXBlQ2hpbGRJbnRvUGFyZW50QXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLndyYXBOb2RlQXQgPSB0aGlzLndyYXBOb2RlQXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldE5vZGVBdCA9IHRoaXMuZ2V0Tm9kZUF0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5jbG9uZUVsZW1lbnRBdCA9IHRoaXMuY2xvbmVFbGVtZW50QXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm1vdmVOb2RlQXQgPSB0aGlzLm1vdmVOb2RlQXQuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuaGFyZEJsdXIgPSB0aGlzLmhhcmRCbHVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZWxlY3RpdmVIYXJkQmx1cklmSGFzU2VsZWN0ZWRFbGVtZW50ID0gdGhpcy5zZWxlY3RpdmVIYXJkQmx1cklmSGFzU2VsZWN0ZWRFbGVtZW50LmJpbmQodGhpcyk7XG4gICAgdGhpcy5zb2Z0Qmx1ciA9IHRoaXMuc29mdEJsdXIuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHJ1bnMgYW5kIHByZXBhcmVzIHRoZSB0cmVlIHRoYXQgaXMgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGVcbiAgICogcGFzdGVkIGNvbnRlbnRcbiAgICogQHBhcmFtIGRhdGEgdGhlIGRhdGEgdHJhbnNmZXIgb2YgdGhlIGNsaXBib2FyZFxuICAgKiBAcGFyYW0gYmxvYnMgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGJsb2IgdHJhbnNmZXIgb2JqZWN0XG4gICAqIEBwYXJhbSBlbGVtZW50IHRoZSBlbGVtZW50IHdlIGFyZSBjdXJyZW50bHkgcHJvY2Vzc2luZ1xuICAgKi9cbiAgcHVibGljIGFzeW5jIGZpbmRBbmRJbnNlcnRGaWxlc0Zyb21EYXRhVHJhbnNmZXIoZGF0YTogRGF0YVRyYW5zZmVyLCBlbGVtZW50OiBSaWNoRWxlbWVudCk6IFByb21pc2U8UmljaEVsZW1lbnQ+IHtcbiAgICAvLyBieSBkZWZhdWx0IHRoZSBuZXcgZWxlbWVudCBpcyBpdHNlbGZcbiAgICBsZXQgbmV3RWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgbGV0IHdhc092ZXJ3cml0dGVuID0gZmFsc2U7XG5cbiAgICAvLyBob3dldmVyIHdlIG1pZ2h0IGhhdmUgdGhlc2UgdHlwZXMgd2UgbmVlZCB0byBwcm9jZXNzXG4gICAgaWYgKG5ld0VsZW1lbnQudHlwZSA9PT0gXCJpbWFnZVwiIHx8IG5ld0VsZW1lbnQudHlwZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIGNvbnN0IGlkU3BlY2lmaWVkID0gbmV3RWxlbWVudC5zcmNJZDtcbiAgICAgIGNvbnN0IHVybFRvUmVhZEZyb20gPSBuZXdFbGVtZW50LnNyYztcblxuICAgICAgY29uc3QgZXhpc3RhbnRGaWxlID0gbmV3RWxlbWVudC50eXBlID09PSBcImltYWdlXCIgP1xuICAgICAgICB0aGlzLnByb3BzLm9uUmV0cmlldmVJbWFnZShpZFNwZWNpZmllZCkgOlxuICAgICAgICB0aGlzLnByb3BzLm9uUmV0cmlldmVGaWxlKGlkU3BlY2lmaWVkKTtcblxuICAgICAgaWYgKGV4aXN0YW50RmlsZSkge1xuICAgICAgICAvLyBGaWxlIGJlbG9uZ3MgdG8gdGhpcyBlZGl0b3IsIG5vdGhpbmcgdG8gZG9cbiAgICAgICAgaWYgKG5ld0VsZW1lbnQudHlwZSA9PT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgY29uc3QgbmV3SW1hZ2VOb2RlOiBJSW1hZ2UgPSB7XG4gICAgICAgICAgICAuLi5uZXdFbGVtZW50LFxuICAgICAgICAgICAgdHlwZTogXCJpbWFnZVwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3JjOiAoZXhpc3RhbnRGaWxlIGFzIGFueSkuZmlsZS51cmwsXG4gICAgICAgICAgICBzcmNTZXQ6IChleGlzdGFudEZpbGUgYXMgYW55KS5zcmNzZXQsXG4gICAgICAgICAgICBzaXplczogXCI3MHZ3XCIsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBuZXdFbGVtZW50ID0gbmV3SW1hZ2VOb2RlO1xuICAgICAgICAgIHdhc092ZXJ3cml0dGVuID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBuZXdGaWxlTm9kZTogSUZpbGUgPSB7XG4gICAgICAgICAgICAuLi5uZXdFbGVtZW50LFxuICAgICAgICAgICAgdHlwZTogXCJmaWxlXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYm9sZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXRhbGljOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzcmM6IChleGlzdGFudEZpbGUgYXMgYW55KS51cmwsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBuZXdFbGVtZW50ID0gbmV3RmlsZU5vZGU7XG4gICAgICAgICAgd2FzT3ZlcndyaXR0ZW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaWxlIGJlbG9uZ3MgdG8gYSBkaWZmZXJlbnQgZWRpdG9yLCBjbG9uaW5nIHRoZSBjb250ZW50XG4gICAgICAgIGNvbnN0IGluZm9Gcm9tSW5zZXJ0ID0gYXdhaXQgdGhpcy5wcm9wcy5vbkluc2VydEZpbGVGcm9tVVJMKFxuICAgICAgICAgIHVybFRvUmVhZEZyb20sXG4gICAgICAgICAgKG5ld0VsZW1lbnQgYXMgYW55KS5maWxlTmFtZSB8fCAobmV3RWxlbWVudCBhcyBhbnkpLmFsdCB8fCBpZFNwZWNpZmllZCxcbiAgICAgICAgICBuZXdFbGVtZW50LnR5cGUgPT09IFwiaW1hZ2VcIixcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoaW5mb0Zyb21JbnNlcnQpIHtcbiAgICAgICAgICBpZiAobmV3RWxlbWVudC50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlTm9kZTogSUltYWdlID0ge1xuICAgICAgICAgICAgICAuLi5uZXdFbGVtZW50LFxuICAgICAgICAgICAgICB0eXBlOiBcImltYWdlXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYm9sZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBoZWlnaHQ6IGluZm9Gcm9tSW5zZXJ0LmhlaWdodCxcbiAgICAgICAgICAgICAgd2lkdGg6IGluZm9Gcm9tSW5zZXJ0LndpZHRoLFxuICAgICAgICAgICAgICBzcmM6IGluZm9Gcm9tSW5zZXJ0LnJlc3VsdC51cmwsXG4gICAgICAgICAgICAgIHNyY0lkOiBpbmZvRnJvbUluc2VydC5yZXN1bHQuaWQsXG4gICAgICAgICAgICAgIHNyY1NldDogbnVsbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBuZXdFbGVtZW50ID0gaW1hZ2VOb2RlO1xuICAgICAgICAgICAgd2FzT3ZlcndyaXR0ZW4gPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlTm9kZTogSUZpbGUgPSB7XG4gICAgICAgICAgICAgIC4uLm5ld0VsZW1lbnQsXG4gICAgICAgICAgICAgIHR5cGU6IFwiZmlsZVwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgaXRhbGljOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc2l6ZTogcHJldHR5Qnl0ZXMoaW5mb0Zyb21JbnNlcnQucmVzdWx0LnNpemUpLFxuICAgICAgICAgICAgICBzcmM6IGluZm9Gcm9tSW5zZXJ0LnJlc3VsdC51cmwsXG4gICAgICAgICAgICAgIHNyY0lkOiBpbmZvRnJvbUluc2VydC5yZXN1bHQuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbmV3RWxlbWVudCA9IGZpbGVOb2RlO1xuICAgICAgICAgICAgd2FzT3ZlcndyaXR0ZW4gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICB3YXNPdmVyd3JpdHRlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBpZiB3ZSBzdGlsbCBoYXZlIHRoZSBlbGVtZW50IGFuZCBpdCBoYXMgY2hpbGRyZW5cbiAgICAvLyB3ZSBuZWVkIHRvIHByb2Nlc3MgdGhvc2UgdG9vXG4gICAgaWYgKG5ld0VsZW1lbnQgJiYgbmV3RWxlbWVudC5jaGlsZHJlbiAmJiAhd2FzT3ZlcndyaXR0ZW4pIHtcbiAgICAgIG5ld0VsZW1lbnQgPSB7IC4uLm5ld0VsZW1lbnQgfTtcbiAgICAgIG5ld0VsZW1lbnQuY2hpbGRyZW4gPSAoXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKChuZXdFbGVtZW50LmNoaWxkcmVuIGFzIGFueSkubWFwKHRoaXMuZmluZEFuZEluc2VydEZpbGVzRnJvbURhdGFUcmFuc2Zlci5iaW5kKHRoaXMsIGRhdGEpKSlcbiAgICAgICkuZmlsdGVyKGUgPT4gISFlKSBhcyBhbnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBydW5zIHdoZW4gd2UgYXJlIGluc2VydGluZyB1c2luZyB0aGUgc2xhdGUgY2xpcGJvYXJkXG4gICAqIEBwYXJhbSBkYXRhIHRoZSBkYXRhIHRyYW5zZmVyXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5zZXJ0RGF0YShkYXRhOiBEYXRhVHJhbnNmZXIpIHtcbiAgICAvLyB3ZSBncmFiIHRoZSBmcmFnbWVudCBkYXRhIGZvciBzbGF0ZVxuICAgIGNvbnN0IGZyYWdtZW50ID0gZGF0YS5nZXREYXRhKCdhcHBsaWNhdGlvbi94LXNsYXRlLWZyYWdtZW50Jyk7XG5cbiAgICAvLyBpZiB3ZSBoYXZlIGl0IHRoaXMgaXMgdGhlIGRlZmF1bHQgY2xpcGJvYXJkXG4gICAgLy8gdGhpcyBzaG91bGQgbm90IGhhcHBlbiBieSBkZWZhdWx0IHRoaXMgbWVhbnMgaXQgaXMgdXNpbmcgdGhlIGZhbGxiYWNrXG4gICAgLy8gY2xpcGJvYXJkIG1lY2hhbmlzbVxuICAgIGlmIChmcmFnbWVudCkge1xuICAgICAgY29uc29sZS53YXJuKFwiVGhlIGVkaXRvciB1c2VkIHRoZSBmYWxsYmFjayBjbGlwYm9hcmQgbWVjaGFuaXNtIHJhdGhlciB0aGFuIHRoZSBuZXcgY2xpcGJvYXJkLCBmaWxlcyBtYXkgZmFpbCB0byBsb2FkXCIpO1xuICAgICAgLy8gdGhlbiB3ZSBkZWNvZGUgYW5kIHBhcnNlXG4gICAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5hdG9iKGZyYWdtZW50KSk7XG4gICAgICAvLyBub3RlIGhvdyB3ZSBmaWx0ZXIgaW4gY2FzZSBiaXRzIGZhaWwgdG8gbG9hZCAoYWthIGltYWdlcyBhbmQgZmlsZXMpXG4gICAgICBjb25zdCBwYXJzZWQgPSAoXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKEpTT04ucGFyc2UoZGVjb2RlZCkubWFwKHRoaXMuZmluZEFuZEluc2VydEZpbGVzRnJvbURhdGFUcmFuc2Zlci5iaW5kKHRoaXMsIGRhdGEpKSkgYXMgTm9kZVtdXG4gICAgICApLmZpbHRlcihlID0+ICEhZSkgYXMgYW55O1xuXG4gICAgICBpZiAoIXBhcnNlZCB8fCAhcGFyc2VkLmxlbmd0aCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gZmluZCBjaGlsZHJlbiB0byBhZGRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gbm93IHdlIGNhbiBpbnNlcnQgdGhhdCBmcmFnbWVudCBvbmNlIHdlIGFyZSBkb25lXG4gICAgICBjb25zdCBzaG91bGRVc2VJbnNlcnRGcmFnbWVudCA9ICFpc1N1cGVyQmxvY2socGFyc2VkWzBdKTtcbiAgICAgIGlmIChzaG91bGRVc2VJbnNlcnRGcmFnbWVudCkge1xuICAgICAgICAvLyBpbnNlcnRpbmcgYSBmcmFnbWVudCBhbGxvd3MgbWVyZ2luZyBvZiBibG9ja3NcbiAgICAgICAgLy8gd2l0aCB0aGlzIHdlIGVuc3VyZSB0aGF0IGZvciBleGFtcGxlLCBhIHRpdGxlIGNhbiBiZSBwYXN0ZWRcbiAgICAgICAgLy8gaW5zaWRlIGEgcGFyYWdyYXBoXG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0RnJhZ21lbnQodGhpcy5lZGl0b3IsIHBhcnNlZCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudEFuY2hvcikge1xuICAgICAgICAvLyB0aGUgbmV4dCBvbmUgaXMgYSBzdXBlcmJsb2NrIHdlIGFyZSB0cnlpbmcgdG8gcHVzaFxuICAgICAgICAvLyB3ZSBkbyBub3QgYWxsb3cgaXQgYXR0ZW1wdGluZyB0byBtZXJnZSB3aXRoIG91ciBjdXJyZW50XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHBhcnNlZCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuZmlsZXMubGVuZ3RoKSB7XG4gICAgICBBcnJheS5mcm9tKGRhdGEuZmlsZXMpLmZvckVhY2goKGYpID0+IHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc3VwcG9ydGVkSW1hZ2VUeXBlcy5pbmNsdWRlcyhmLnR5cGUpKSB7XG4gICAgICAgICAgdGhpcy5pbnNlcnRJbWFnZShmLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5pbnNlcnRGaWxlKGYpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBuZXcgd2F5IHRoYXQgb2ZmZXJzIHN1cGVyIGNvbXBhYmlsaXR5IHdpdGggZXZlcnl0aGluZ1xuICAgIGNvbnN0IGh0bWxEYXRhID0gZGF0YS5nZXREYXRhKFwidGV4dC9odG1sXCIpO1xuICAgIGlmIChodG1sRGF0YSkge1xuICAgICAgLy8gd2UgZGVzZXJpYWxpemUgYW5kIHByb2Nlc3MgYSByYXcgaHRtbFxuICAgICAgY29uc3QgZGVzZXJpYWxpemVkID0gZGVzZXJpYWxpemUoaHRtbERhdGEsIG51bGwsIHtcbiAgICAgICAgZG9udE5vcm1hbGl6ZTogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyB0aGVuIHNlbmQgaXQgZm9yIGZpbGUgcHJvY2Vzc2luZ1xuICAgICAgY29uc3QgcGFyc2VkID0gKFxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChkZXNlcmlhbGl6ZWQuY2hpbGRyZW4ubWFwKHRoaXMuZmluZEFuZEluc2VydEZpbGVzRnJvbURhdGFUcmFuc2Zlci5iaW5kKHRoaXMsIGRhdGEpKSkgYXMgTm9kZVtdXG4gICAgICApLmZpbHRlcihlID0+ICEhZSkgYXMgYW55O1xuXG4gICAgICBpZiAoIXBhcnNlZCB8fCAhcGFyc2VkLmxlbmd0aCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gZmluZCBjaGlsZHJlbiB0byBhZGRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gbm93IHdlIGNhbiBpbnNlcnQgdGhhdCBmcmFnbWVudCBvbmNlIHdlIGFyZSBkb25lXG4gICAgICBjb25zdCBzaG91bGRVc2VJbnNlcnRGcmFnbWVudCA9ICFpc1N1cGVyQmxvY2socGFyc2VkWzBdKTtcbiAgICAgIGlmIChzaG91bGRVc2VJbnNlcnRGcmFnbWVudCkge1xuICAgICAgICAvLyBpbnNlcnRpbmcgYSBmcmFnbWVudCBhbGxvd3MgbWVyZ2luZyBvZiBibG9ja3NcbiAgICAgICAgLy8gd2l0aCB0aGlzIHdlIGVuc3VyZSB0aGF0IGZvciBleGFtcGxlLCBhIHRpdGxlIGNhbiBiZSBwYXN0ZWRcbiAgICAgICAgLy8gaW5zaWRlIGEgcGFyYWdyYXBoXG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0RnJhZ21lbnQodGhpcy5lZGl0b3IsIHBhcnNlZCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudEFuY2hvcikge1xuICAgICAgICAvLyB0aGUgbmV4dCBvbmUgaXMgYSBzdXBlcmJsb2NrIHdlIGFyZSB0cnlpbmcgdG8gcHVzaFxuICAgICAgICAvLyB3ZSBkbyBub3QgYWxsb3cgaXQgYXR0ZW1wdGluZyB0byBtZXJnZSB3aXRoIG91ciBjdXJyZW50XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHBhcnNlZCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub3JpZ2luYWxJbnNlcnREYXRhKGRhdGEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXREYXRhVVJJKGJsb2I6IEJsb2IpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwibG9hZFwiLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgLy8gY29udmVydCBpbWFnZSBmaWxlIHRvIGJhc2U2NCBzdHJpbmdcbiAgICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQgYXMgYW55KTtcbiAgICAgICAgfSxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsICgpID0+IHtcbiAgICAgICAgcmVqZWN0KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW5zIHBlciBlYWNoIHJpY2ggZWxlbWVudCB0aGF0IGhhcyBqdXN0IGJlZW4gY29waWVkIHRvIHRoZSBjbGlwYm9hcmRcbiAgICogQHBhcmFtIGRhdGEgdGhlIGRhdGEgdHJhbnNmZXJcbiAgICogQHBhcmFtIGVsZW1lbnQgdGhlIHJpY2ggZWxlbWVudCB3ZSBoYXZlIGp1c3QgY29waWVkXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZmluZEFuZEFwcGVuZEZpbGVzVG9EYXRhVHJhbnNmZXIoZGF0YTogRGF0YVRyYW5zZmVyLCBlbGVtZW50OiBSaWNoRWxlbWVudCk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gd2Ugd2FudCB0byBzcG90IGltYWdlcyBhbmQgZmlsZXNcbiAgICBpZiAoZWxlbWVudC50eXBlID09PSBcImltYWdlXCIgfHwgZWxlbWVudC50eXBlID09PSBcImZpbGVcIikge1xuICAgICAgLy8gZ2V0IHRoZSB1cmxcbiAgICAgIGNvbnN0IHVybFRvUmVhZEZyb20gPSBlbGVtZW50LnNyYztcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0ICgoYXdhaXQgZmV0Y2godXJsVG9SZWFkRnJvbSkpLmJsb2IoKSk7XG4gICAgICAgIGNvbnN0IGRhdGFVUkkgPSBhd2FpdCB0aGlzLmdldERhdGFVUkkoYmxvYik7XG5cbiAgICAgICAgLy8gLy8gaWYgaXQncyBhIGJsb2JcbiAgICAgICAgLy8gY29uc3QgaXNCbG9iID0gdXJsVG9SZWFkRnJvbS5zdGFydHNXaXRoKFwiYmxvYjpcIik7XG5cbiAgICAgICAgLy8gLy8gdGhlbiB3ZSBzaG91bGQgdGhpbmsgYWJvdXQgY29weWluZyBpdCByaWdodCBpbnRvIHRoZSBkYXRhIHRyYW5zZmVyXG4gICAgICAgIC8vIC8vIHNpbmNlIGJsb2JzIGFyZSB0ZW1wb3JhcnlcbiAgICAgICAgLy8gaWYgKGlzQmxvYikge1xuICAgICAgICAvLyAgIGNvbnN0IHVybERhdGEgPSB0aGlzLnByb3BzLm9uUmV0cmlldmVEYXRhVVJJKGVsZW1lbnQuc3JjSWQpO1xuICAgICAgICAvLyAgIGlmICh1cmxEYXRhKSB7XG4gICAgICAgIC8vICAgICBnYXRoZXJlZEZpbGVzW2VsZW1lbnQuc3JjSWRdID0gdXJsRGF0YTtcbiAgICAgICAgLy8gICB9XG4gICAgICAgIC8vIH1cblxuICAgICAgICBlbGVtZW50LnNyYyA9IGRhdGFVUkk7XG4gICAgICAgIGRlbGV0ZSAoZWxlbWVudCBhcyBJSW1hZ2UpLnNyY1NldDtcbiAgICAgIH0gY2F0Y2ggKGVycikgeyB9XG4gICAgfVxuXG4gICAgLy8gbm93IHdlIHJ1biBwZXIgZWFjaCBjaGlsZHJlblxuICAgIGlmIChlbGVtZW50LmNoaWxkcmVuKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCgoZWxlbWVudC5jaGlsZHJlbiBhcyBhbnkpLm1hcCh0aGlzLmZpbmRBbmRBcHBlbmRGaWxlc1RvRGF0YVRyYW5zZmVyLmJpbmQodGhpcywgZGF0YSkpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBydW5zIHdoZW4gd2UgYXJlIHByZXBhcmluZyB0aGUgc2xhdGUgY2xpcGJvYXJkXG4gICAqIEBwYXJhbSBkYXRhIHRoZSBkYXRhIHRyYW5zZmVyXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgc2V0RnJhZ21lbnREYXRhKGRhdGE6IERhdGFUcmFuc2Zlcikge1xuICAgIC8vIHdlIHJ1biB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gdG8gcHJlcGFyZSB0aGUgY2xpcGJvYXJkXG4gICAgdGhpcy5vcmlnaW5hbFNldEZyYWdtZW50RGF0YShkYXRhKTtcblxuICAgIC8vIG5lZWQgdG8gZmluZCB0aGUgZmlsZXMgdGhhdCBhcmUgaW5jbHVkZWQgaW4gdGhlIGNvcHlcbiAgICBjb25zdCBmcmFnbWVudDY0ID0gZGF0YS5nZXREYXRhKFwiYXBwbGljYXRpb24veC1zbGF0ZS1mcmFnbWVudFwiKTtcbiAgICBpZiAoZnJhZ21lbnQ2NCAmJiBuYXZpZ2F0b3IuY2xpcGJvYXJkKSB7XG4gICAgICAvLyB3ZSBhcmUgZG9pbmcgdGhlIHJlYWwgY29weWluZyBoZXJlIHNpbmNlIHRoZSBjb3B5aW5nIG1lY2hhbmlzbVxuICAgICAgLy8gdGhhdCBjb21lcyBieSBkZWZhdWx0IGlzIG5vdCB2ZXJ5IGdvb2RcbiAgICAgIGNvbnN0IGNvcHlEYXRhVHJlZTogUmljaEVsZW1lbnRbXSA9IEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KGF0b2IoZnJhZ21lbnQ2NCkpKTtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNvcHlEYXRhVHJlZS5tYXAodGhpcy5maW5kQW5kQXBwZW5kRmlsZXNUb0RhdGFUcmFuc2Zlci5iaW5kKHRoaXMsIGRhdGEpKSk7XG5cbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gKHtcbiAgICAgICAgY2hpbGRyZW46IGNvcHlEYXRhVHJlZSBhcyBhbnksXG4gICAgICAgIGlkOiBcIkNPUFlfRUxFTUVOVFwiLFxuICAgICAgICByaWNoOiB0cnVlLFxuICAgICAgICB0eXBlOiBcImRvY3VtZW50XCIgYXMgXCJkb2N1bWVudFwiLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGh0bWwgPSBzZXJpYWxpemUoZG9jdW1lbnQpIGFzIEhUTUxFbGVtZW50W107XG4gICAgICBjb25zdCBodG1sU3RyID0gaHRtbC5tYXAoKG4pID0+IG4ub3V0ZXJIVE1MKS5qb2luKFwiXCIpO1xuICAgICAgY29uc3QgdGV4dCA9IHNlcmlhbGl6ZVN0cmluZyhkb2N1bWVudCk7XG5cbiAgICAgIGNvbnN0IHRleHRQbGFpbiA9IG5ldyBCbG9iKFt0ZXh0XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7XG4gICAgICBjb25zdCBodG1sQm9keSA9IG5ldyBCbG9iKFtodG1sU3RyXSwgeyB0eXBlOiAndGV4dC9odG1sJyB9KTtcbiAgICAgIGNvbnN0IGl0ZW0gPSBuZXcgQ2xpcGJvYXJkSXRlbSh7XG4gICAgICAgICd0ZXh0L3BsYWluJzogdGV4dFBsYWluLFxuICAgICAgICBcInRleHQvaHRtbFwiOiBodG1sQm9keSxcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZShbaXRlbV0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlTm9kZUF0KHBhdGg6IFBhdGgsIHY6IFBhcnRpYWw8UmljaEVsZW1lbnQgfCBJVGV4dD4pIHtcbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB2LCB7XG4gICAgICBhdDogcGF0aCxcbiAgICB9KTtcbiAgfVxuICBwcml2YXRlIGRlbGV0ZU5vZGVBdChwYXRoOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5kZWxldGUodGhpcy5lZGl0b3IsIHtcbiAgICAgIGF0OiBwYXRoLFxuICAgIH0pO1xuICB9XG4gIHByaXZhdGUgaW5zZXJ0Tm9kZUF0KHBhdGg6IFBhdGgsIG5vZGU6IFJpY2hFbGVtZW50IHwgSVRleHQsIHRhcmdldEluZGV4OiBudW1iZXIpIHtcbiAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBub2RlLCB7XG4gICAgICBhdDogWy4uLnBhdGgsIHRhcmdldEluZGV4XSxcbiAgICB9KTtcbiAgfVxuICBwcml2YXRlIG1lcmdlTm9kZXNBdChiYXNlUGF0aDogUGF0aCwgcmVmZXJlbmNlUGF0aDogUGF0aCkge1xuICAgIGNvbnN0IHBhcmVudFBhdGggPSBbLi4uYmFzZVBhdGhdO1xuICAgIHBhcmVudFBhdGgucG9wKCk7XG5cbiAgICAvLyBkdWUgdG8gYSBzbGF0ZSBidWcgbWVyZ2luZyBkb2Vzbid0IHF1aXRlIHdvcmtcbiAgICAvLyBpdCBqdXN0IGRvZXMgbm90aGluZywgZGVzcGl0ZSB0aGUgc3BlY2lmaWNhdGlvblxuICAgIC8vIHRoZSBzZWNvbmQgYXJndW1lbnQgZG9lc24ndCBwYXNzIGVpdGhlclxuICAgIFRyYW5zZm9ybXMubWVyZ2VOb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgYXQ6IHJlZmVyZW5jZVBhdGgsXG4gICAgICB2b2lkczogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuICBwcml2YXRlIHNwbGl0RWxlbWVudEFuZEVzY2FwZUNoaWxkSW50b1BhcmVudEF0KHBhdGg6IFBhdGgsIGVzY2FwaW5nQ2hpbGRJbmRleDogbnVtYmVyKSB7XG4gICAgVHJhbnNmb3Jtcy5saWZ0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIGF0OiBbLi4ucGF0aCwgZXNjYXBpbmdDaGlsZEluZGV4XSxcbiAgICB9KVxuICB9XG4gIHByaXZhdGUgd3JhcE5vZGVBdChwYXRoOiBQYXRoLCB3cmFwcGVyczogUmljaEVsZW1lbnRbXSkge1xuICAgIHdyYXBwZXJzLmZvckVhY2goKHdyYXBwZXIpID0+IHtcbiAgICAgIFRyYW5zZm9ybXMud3JhcE5vZGVzKHRoaXMuZWRpdG9yLCB3cmFwcGVyLCB7XG4gICAgICAgIGF0OiBwYXRoLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgcHJpdmF0ZSBnZXROb2RlQXQocGF0aDogUGF0aCkge1xuICAgIHJldHVybiBOb2RlLmdldCh0aGlzLmVkaXRvciwgcGF0aCkgYXMgUmljaEVsZW1lbnQgfCBJVGV4dDtcbiAgfVxuICBwcml2YXRlIGNsb25lRWxlbWVudEF0KGZyb21QYXRoOiBQYXRoLCB0b1BhdGg6IFBhdGgpIHtcbiAgICBjb25zdCB0b0NvcHlOb2RlID0gdGhpcy5nZXROb2RlQXQoZnJvbVBhdGgpIGFzIFJpY2hFbGVtZW50O1xuICAgIGNvbnN0IGNvcHkgPSB7XG4gICAgICAuLi50b0NvcHlOb2RlLFxuICAgIH1cbiAgICBjb3B5LmNoaWxkcmVuID0gW107XG5cbiAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBjb3B5LCB7XG4gICAgICBhdDogdG9QYXRoLFxuICAgIH0pO1xuICB9XG4gIHByaXZhdGUgbW92ZU5vZGVBdChmcm9tUGF0aDogUGF0aCwgdG9QYXRoOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIGF0OiBmcm9tUGF0aCxcbiAgICAgIHRvOiB0b1BhdGgsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTm9ybWFsaXphdGlvbiBmdW5jaXRvbiB0aGF0IG92ZXJyaWRlcyB0aGUgbm9ybWFsaXphdGlvblxuICAgKiBvZiB0aGUgc3RhbmRhcmQgZWRpdG9yXG4gICAqIEBwYXJhbSBlbnRyeSB0aGUgZW50cnkgd2UgYXJlIG5vcm1hbGl6aW5nXG4gICAqL1xuICBwdWJsaWMgbm9ybWFsaXplTm9kZShlbnRyeTogTm9kZUVudHJ5PE5vZGU+KSB7XG4gICAgLy8gdGhlIG5vcm1hbGl6YXRpb24gZnVuY3Rpb24gdGhhdCBjb21lc1xuICAgIC8vIGZyb20gdGhlIHNlcmlhbGl6ZXIgdGFrZXMgY2FyZSBvZiB0aGVcbiAgICAvLyBlbnRpcmUgc2VyaWFsaXphdGlvbiBtZWNoYW5pc20gYW5kIHNoYWxsIG5vdFxuICAgIC8vIGJlIHJlY2FsbGVkIHdoZW4gaXQncyBkb2luZyBpdHMgam9iXG4gICAgaWYgKHRoaXMuaXNJbk5vcm1hbGl6YXRpb24gfHwgdGhpcy5wcmV2ZW50Tm9ybWFsaXplKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgW25vZGUsIHBhdGhdID0gZW50cnk7XG5cbiAgICAvLyBpZiBpdCdzIHRoZSBlZGl0b3IgaXRzZWxmLCB0aGlzIGlzIHRoZSBvbmx5IGNhc2VcbiAgICAvLyB3ZSB3YW50IHRvIG5vcm1hbGl6ZVxuICAgIC8vIHdlIHdhbnQgdG8gYXZvaWQgb3RoZXJzIGFzIHRoZXkgYXJlIHZlcmJvc2VcbiAgICBpZiAoRWRpdG9yLmlzRWRpdG9yKG5vZGUpKSB7XG4gICAgICB0aGlzLmlzSW5Ob3JtYWxpemF0aW9uID0gdHJ1ZTtcblxuICAgICAgLy8gdGhpcyB3aWxsIGJhc2ljYWxseSBiZSB0cnVlIGV2ZXJ5IHRpbWVcbiAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyB3ZSBpbnNlcnQgYSBwYXJhZ3JhcGhcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvcixcbiAgICAgICAgICB7IHR5cGU6IFwicGFyYWdyYXBoXCIsIGNoaWxkcmVuOiBbU1RBTkRBUkRfVEVYVF9OT0RFKCkgYXMgYW55XSB9LFxuICAgICAgICAgIHsgYXQ6IHBhdGguY29uY2F0KDApIH1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHBzZXVkb0RvY3VtZW50OiBJUm9vdExldmVsRG9jdW1lbnQgPSB7XG4gICAgICAgICAgdHlwZTogXCJkb2N1bWVudFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuIGFzIGFueSxcbiAgICAgICAgICBpZDogdGhpcy5zdGF0ZS50cmVlVmFsdWUuaWQsXG4gICAgICAgICAgcmljaDogdGhpcy5zdGF0ZS50cmVlVmFsdWUucmljaCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBub2RlQXRTZWxlY3Rpb24gPSB0aGlzLmVkaXRvci5zZWxlY3Rpb24gPyB0aGlzLmdldE5vZGVBdCh0aGlzLmVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLnBhdGgpIDogbnVsbDtcbiAgICAgICAgY29uc3Qgbm9kZUlnbm9yZTogUGF0aFtdID0gW107XG4gICAgICAgIGlmIChUZXh0LmlzVGV4dChub2RlQXRTZWxlY3Rpb24pICYmIG5vZGVBdFNlbGVjdGlvbi50ZXh0ID09PSBcIlwiKSB7XG4gICAgICAgICAgbm9kZUlnbm9yZS5wdXNoKHRoaXMuZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IucGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIG5vcm1hbGl6ZUVsZW1lbnQoXG4gICAgICAgICAgICBwc2V1ZG9Eb2N1bWVudCxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgcHNldWRvRG9jdW1lbnQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHdvcmtPbk9yaWdpbmFsOiBmYWxzZSxcbiAgICAgICAgICAgICAgdXBkYXRlTm9kZUF0OiB0aGlzLnVwZGF0ZU5vZGVBdCxcbiAgICAgICAgICAgICAgZGVsZXRlTm9kZUF0OiB0aGlzLmRlbGV0ZU5vZGVBdCxcbiAgICAgICAgICAgICAgaW5zZXJ0Tm9kZUF0OiB0aGlzLmluc2VydE5vZGVBdCxcbiAgICAgICAgICAgICAgbWVyZ2VOb2Rlc0F0OiB0aGlzLm1lcmdlTm9kZXNBdCxcbiAgICAgICAgICAgICAgc3BsaXRFbGVtZW50QW5kRXNjYXBlQ2hpbGRJbnRvUGFyZW50QXQ6IHRoaXMuc3BsaXRFbGVtZW50QW5kRXNjYXBlQ2hpbGRJbnRvUGFyZW50QXQsXG4gICAgICAgICAgICAgIHdyYXBOb2RlQXQ6IHRoaXMud3JhcE5vZGVBdCxcbiAgICAgICAgICAgICAgZ2V0Tm9kZUF0OiB0aGlzLmdldE5vZGVBdCxcbiAgICAgICAgICAgICAgY2xvbmVFbGVtZW50QXQ6IHRoaXMuY2xvbmVFbGVtZW50QXQsXG4gICAgICAgICAgICAgIG1vdmVOb2RlQXQ6IHRoaXMubW92ZU5vZGVBdCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlnbm9yZU5vZGVzQXQ6IG5vZGVJZ25vcmUsXG4gICAgICAgICAgICAgIHVzZUNvbnRleHRSdWxlc09mOiB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVyci5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5pc0luTm9ybWFsaXphdGlvbiA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSBmb3IgdGhlIGRlZmF1bHQgZWRpdG9yIGlubGluZSBmdW5jdGlvblxuICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgZWxlbWVudCB0aGF0IGlzIHRvIGJlIGNvbnNpZGVyZWRcbiAgICogQHJldHVybnMgYSBib29sZWFuIG9uIHdoZXRoZXIgaXQgcmVwcmVzZW50cyBhbiBpbmxpbmUgZWxlbWVudFxuICAgKi9cbiAgcHVibGljIGlzSW5saW5lKGVsZW1lbnQ6IFJpY2hFbGVtZW50KSB7XG4gICAgcmV0dXJuIGlzSW5saW5lKGVsZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIGZvciB0aGUgZGVmYXVsdCBlZGl0b3Igdm9pZCBmdW5jdGlvblxuICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgZWxlbWVudCB0aGF0IGlzIHRvIGJlIGNvbnNpZGVyZWRcbiAgICogQHJldHVybnMgYSBib29sZWFuIG9uIHdoZXRoZXIgaXQgcmVwcmVzZW50cyBhIHZvaWQgZWxlbWVudFxuICAgKi9cbiAgcHVibGljIGlzVm9pZChlbGVtZW50OiBSaWNoRWxlbWVudCkge1xuICAgIHJldHVybiBpc1ZvaWQoZWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgZm9yIHRoZSBkZWZhdWx0IGVkaXRvciBpbnNlcnQgYnJlYWsgZnVuY3Rpb25cbiAgICovXG4gIHB1YmxpYyBpbnNlcnRCcmVhaygpIHtcbiAgICBjb25zdCBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnQgPSB0aGlzLnN0YXRlLmN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHMgJiZcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFN1cGVyQmxvY2tFbGVtZW50c1t0aGlzLnN0YXRlLmN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHMubGVuZ3RoIC0gMV07XG5cbiAgICBjb25zdCBpc0xpc3RJdGVtQnJlYWsgPSAoXG4gICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnQgJiZcbiAgICAgIC8vIGFuZCB3ZSBhcmUgd2l0aGluIGEgbGlzdCBhbmQgYSBsaXN0IGl0ZW1cbiAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudC50eXBlID09PSBcImxpc3QtaXRlbVwiXG4gICAgKTtcbiAgICBpZiAoXG4gICAgICAvLyBpZiB3ZSBhcmUgc2ltcGx5IGNvbGxhcHNlZFxuICAgICAgUmFuZ2UuaXNDb2xsYXBzZWQodGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSAmJlxuICAgICAgLy8gYW5kIHdlIGhhdmUgYSBsaXN0IGl0ZW1cbiAgICAgIGlzTGlzdEl0ZW1CcmVhayAmJlxuICAgICAgLy8gYW5kIHRoYXQgZmlyc3QgY2hpbGRyZW4gaXMgYW4gZW1wdHkgcGFyYWdyYXBoXG4gICAgICAvLyB0aGVyZSBtYXkgYmUgYSBzZWNvbmQgbGlzdFxuICAgICAgKGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudC5jaGlsZHJlblswXSBhcyBhbnkpLnR5cGUgPT09IFwicGFyYWdyYXBoXCIgJiZcbiAgICAgIC8vIHdpdGggb25lIGVtcHR5IHRleHQgbm9kZVxuICAgICAgKGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudC5jaGlsZHJlblswXSBhcyBhbnkpLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgVGV4dC5pc1RleHQoKGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudC5jaGlsZHJlblswXSBhcyBhbnkpLmNoaWxkcmVuWzBdKSAmJlxuICAgICAgKGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudC5jaGlsZHJlblswXSBhcyBhbnkpLmNoaWxkcmVuWzBdLnRleHQgPT09IFwiXCJcbiAgICAgIC8vIGFuZCB0aGF0IHRleHQgbm9kZSBpcyBlbXB0eVxuICAgICAgLy8gYmFzaWNhbGx5XG4gICAgICAvLyAxLiBsaXN0IGl0ZW0gMVxuICAgICAgLy8gMi4gfFxuICAgICAgLy8gMy4gbGlzdCBpdGVtIDNcbiAgICAgIC8vIGFuZCB3ZSBhcmUgcHJlc3NpbmcgZW50ZXIgdGhlcmUgd2hlcmUgfCByZXByZXNlbnRzIHRoZSBjYXJldFxuICAgICkge1xuICAgICAgLy8gd2UgbmVlZCB0byBicmVhayB0aGUgbGlzdFxuICAgICAgdGhpcy5icmVha0xpc3QoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudCkge1xuICAgICAgLy8gc3RyYW5nZVxuICAgICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKHRoaXMuZWRpdG9yLCB7IGFsd2F5czogdHJ1ZSB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBpZiB3ZSBhcmUgZGVhbGluZyB3aXRoIGEgdm9pZCBlbGVtZW50IGxpa2UgYW4gaW1hZ2VcbiAgICAvLyB3ZSBkb24ndCB3YW50IHRvIGNsb25lIGl0XG4gICAgaWYgKHRoaXMuZWRpdG9yLmlzVm9pZCh0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnQgYXMgYW55KSkge1xuICAgICAgLy8gdGhlbiB3ZSB3YW50IHRvIGluc2VydCBhbiBlbXB0eSBwYXJhZ3JhcGhcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgICAgdHlwZTogXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAuLi50aGlzLnN0YXRlLmN1cnJlbnRUZXh0LFxuICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIG5vdyB3ZSBnZXQgdGhlIGVuZCBvZiB0aGUgZ2l2ZW4gcmFuZ2VcbiAgICBjb25zdCBlbmQgPSBSYW5nZS5lbmQodGhpcy5lZGl0b3Iuc2VsZWN0aW9uKTtcbiAgICAvLyBhbmQgbWFrZSBhIGNvcHkgb2YgdGhlIGJsb2NrIGVsZW1lbnQgYW5jaG9yXG4gICAgY29uc3QgZmluYWxCbG9ja1BhdGg6IFBhdGggPSBbLi4udGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yXTtcblxuICAgIC8vIGFuZCBsZXQncyBmaW5kIHRoZSBsYXN0IGNoaWxkIHRoYXQgc2hvdWxkIGJlIGFuIHRleHQgbm9kZVxuICAgIC8vIGFzIHdlIGdvIGRlZXAgaW5zaWRlIHRoZSBzdHJ1Y3R1cmVcbiAgICBsZXQgbGFzdENoaWxkOiBOb2RlID0gdGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50IGFzIGFueTtcbiAgICBpZiAobGFzdENoaWxkICYmIEVsZW1lbnQuaXNFbGVtZW50KGxhc3RDaGlsZCkpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgY29uc3QgbGFzdFBvaW50ID0gbGFzdENoaWxkLmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgIGxhc3RDaGlsZCA9IGxhc3RDaGlsZC5jaGlsZHJlbltsYXN0UG9pbnRdIGFzIGFueSBhcyBOb2RlO1xuICAgICAgICBmaW5hbEJsb2NrUGF0aC5wdXNoKGxhc3RQb2ludCk7XG4gICAgICB9IHdoaWxlIChFbGVtZW50LmlzRWxlbWVudChsYXN0Q2hpbGQpKTtcbiAgICB9XG5cbiAgICAvLyB1bnRpbCB3ZSBmaW5kIHRoZSB0ZXh0IG5vZGUsIHRoZSBsYXN0IHRleHQgbm9kZSBpbiB0aGUgbGFzdCBwYXJ0XG4gICAgLy8gb2YgdGhlc2UgXG4gICAgY29uc3QgZmluYWxCbG9ja09mZnNldCA9IGxhc3RDaGlsZCA/IChsYXN0Q2hpbGQgYXMgVGV4dCkudGV4dC5sZW5ndGggOiBudWxsO1xuXG4gICAgY29uc3QgaXNFbmRPZkxpbmUgPSAoXG4gICAgICBlbmQub2Zmc2V0ID09PSBmaW5hbEJsb2NrT2Zmc2V0ICYmXG4gICAgICBQYXRoLmVxdWFscyhmaW5hbEJsb2NrUGF0aCwgZW5kLnBhdGgpXG4gICAgKTtcblxuICAgIGlmIChpc0xpc3RJdGVtQnJlYWspIHtcbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBkbyBhIHNpbXBsZSBzcGxpdCBub2RlXG4gICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXModGhpcy5lZGl0b3IsIHsgYWx3YXlzOiB0cnVlLCBtYXRjaDogKG46IGFueSkgPT4gbi50eXBlID09PSBcImxpc3QtaXRlbVwiIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBvdGhlcndpc2Ugd2UgZG8gYSBzaW1wbGUgc3BsaXQgbm9kZVxuICAgICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKHRoaXMuZWRpdG9yLCB7IGFsd2F5czogdHJ1ZSB9KVxuICAgIH1cblxuICAgIC8vIGdvdHRhIGNsZWFyIHVpIGhhbmRsZXJzIGFuZCB3aGF0bm90XG4gICAgaWYgKGlzRW5kT2ZMaW5lKSB7XG4gICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICAgIHVpSGFuZGxlcjogbnVsbCxcbiAgICAgICAgaHRtbDogbnVsbCxcbiAgICAgICAgdWlIYW5kbGVyQXJnczogbnVsbCxcbiAgICAgICAgdGV4dENvbnRlbnQ6IG51bGwsXG4gICAgICB9LCB7XG4gICAgICAgIG1hdGNoOiAobikgPT4ge1xuICAgICAgICAgIHJldHVybiBpc0Jsb2NrKG4gYXMgYW55KTtcbiAgICAgICAgfSxcbiAgICAgICAgbW9kZTogXCJsb3dlc3RcIixcbiAgICAgICAgYXQ6IHRoaXMuZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IucGF0aCxcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIGZ1bmN0aW9uIHRvIHBlcmZvcm0gYSBmb3J3YXJkIGRlbGV0ZVxuICAgKiBiYWNrd2FyZHMgZXZlbnRcbiAgICogQHBhcmFtIHVuaXQgdGhlIHVuaXQgd2UgYXJlIGRlYWxpbmcgd2l0aFxuICAgKi9cbiAgcHVibGljIGRlbGV0ZUZvcndhcmQodW5pdDogXCJjaGFyYWN0ZXJcIiB8IFwid29yZFwiIHwgXCJsaW5lXCIgfCBcImJsb2NrXCIpIHtcbiAgICAvLyBmaXJzdCB3ZSBwaWNrIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSB0aGlzLmVkaXRvclxuXG4gICAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudCAmJlxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmXG4gICAgICAgIFRleHQuaXNUZXh0KHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudC5jaGlsZHJlblswXSkgJiZcbiAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50LmNoaWxkcmVuWzBdLnRleHQgPT09IFwiXCJcbiAgICAgICkge1xuICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZSh0aGlzLmVkaXRvciwgeyBhdDogdGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5kZWxldGUodGhpcy5lZGl0b3IsIHsgdW5pdCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgZnVuY3Rpb24gdG8gcGVyZm9ybSBhIHN0YW5kYXJkIGRlbGV0ZVxuICAgKiBiYWNrd2FyZHMgZXZlbnRcbiAgICogQHBhcmFtIHVuaXQgdGhlIHVuaXQgd2UgYXJlIGRlYWxpbmcgd2l0aFxuICAgKi9cbiAgcHVibGljIGRlbGV0ZUJhY2t3YXJkKHVuaXQ6IFwiY2hhcmFjdGVyXCIgfCBcIndvcmRcIiB8IFwibGluZVwiIHwgXCJibG9ja1wiKSB7XG4gICAgLy8gZmlyc3Qgd2UgcGljayB0aGUgY3VycmVudCBzZWxlY3Rpb25cbiAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gdGhpcy5lZGl0b3I7XG5cbiAgICBjb25zdCBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnQgPSB0aGlzLnN0YXRlLmN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHMgJiZcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFN1cGVyQmxvY2tFbGVtZW50c1t0aGlzLnN0YXRlLmN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHMubGVuZ3RoIC0gMV07XG5cbiAgICAvLyBpZiB3ZSBoYXZlIG9uZSBvZiBhbnkga2luZFxuICAgIGlmIChcbiAgICAgIHNlbGVjdGlvbiAmJlxuICAgICAgLy8gYW5kIGl0J3MgY29sbGFwc2VkXG4gICAgICBSYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pICYmXG4gICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnQgJiZcbiAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudC50eXBlID09PSBcImxpc3QtaXRlbVwiICYmXG4gICAgICAoXG4gICAgICAgIC8vIGFuZCB3ZSBhcmUgZGVsZXRpbmcgYSBjaGFyYWN0ZXIgb2YgYSB3b3JkXG4gICAgICAgIChcbiAgICAgICAgICAodW5pdCA9PT0gXCJjaGFyYWN0ZXJcIiB8fCB1bml0ID09PSBcIndvcmRcIikgJiZcbiAgICAgICAgICAvLyBhbmQgd2UgYXJlIGF0IHRoZSBzdGFydCBvZiB0aGUgYmxvY2tcbiAgICAgICAgICBzZWxlY3Rpb24uYW5jaG9yLm9mZnNldCA9PT0gMFxuICAgICAgICApIHx8XG4gICAgICAgIC8vIG9yIHdlIGFyZSByZW1vdmluZyBhIGxpbmUgb3IgYmxvY2tcbiAgICAgICAgKFxuICAgICAgICAgIHVuaXQgPT09IFwibGluZVwiIHx8IHVuaXQgPT0gXCJibG9ja1wiXG4gICAgICAgIClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIC8vIHdlIG5lZWQgdG8gYnJlYWsgdGhlIGxpc3QsIGJyZWFraW5nIHRoZSBsaXN0IGNvbnNpc3Qgb2Ygc3BsaXR0aW5nXG4gICAgICAvLyBvbmUgbGlzdCBpbnRvIHR3bywgcmVtb3ZpbmcgdGhlIGZpcnN0IG9yIHRoZSBsYXN0IGVsZW1lbnQgYmFjayB0byBhIHBhcmFncmFwaFxuICAgICAgLy8gb3Igd2hhdG5vdCwgZXRjLi4uXG4gICAgICB0aGlzLmJyZWFrTGlzdCgpO1xuXG4gICAgICAvLyBvdGhlcndpc2UgaWYgd2UgaGF2ZSBhIHNlbGVjdGlvbiwgYW5kIHRoZSBzZWxlY3Rpb24gaXMgY29sbGFwc2VkXG4gICAgfSBlbHNlIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNDb2xsYXBzZWQoc2VsZWN0aW9uKSkge1xuICAgICAgLy8gd2UgbXVzdCBhdm9pZCByZW1vdmluZyBjdXJyZW50IGxvY2F0aW9uIGlmIHN1Y2ggaXMgZW1wdHlcbiAgICAgIC8vIHRoaXMgaXMgYmVjYXVzZSBlZy4gaWYgd2UgaGF2ZSBhIGJvbGQgdGV4dFxuICAgICAgLy8gdGhlbiB3ZSB3YW50IHRvIGVuc3VyZSB0aGF0IHN1Y2ggaXMgbm90IHJlbW92ZWRcbiAgICAgIC8vIHRoZXJlIGFyZSBob3dldmVyIGluIG1vc3QgY2lyY3Vtc3RhbmNlcyB3ZSB3YW50IHRvIGVuc3VyZVxuICAgICAgLy8gYW55IGVtcHR5IHRleHQgaXMgcmVtb3ZlZCBldmVuIGluIHRoZSBjdXJyZW50IGNhcmV0XG4gICAgICBUcmFuc2Zvcm1zLmRlbGV0ZSh0aGlzLmVkaXRvciwgeyB1bml0LCByZXZlcnNlOiB0cnVlIH0pO1xuICAgICAgLy8gb3RoZXJ3aXNlXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJyZWFrcyB0aGUgbGlzdCBiYXNlZCBvbiB0aGUgY3VycmVudCBzZWxlY3Rpb25cbiAgICogd2UgbXVzdCBiZSBpbiBhIGxpc3QgY3VycmVudGx5LCB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZFxuICAgKiBieSB0aGUgZGVsZXRlIGJhY2t3YXJkcyBmdW5jdGlvbmFsaXR5IGFzIHdlbGwgYXMgdGhlIHRvZ2dsZVxuICAgKiBsaXN0IG9uZVxuICAgKi9cbiAgcHVibGljIGJyZWFrTGlzdCgpIHtcbiAgICB0aGlzLnByZXZlbnROb3JtYWxpemUgPSB0cnVlO1xuXG4gICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhcbiAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAge1xuICAgICAgICBtYXRjaDogKG46IGFueSkgPT4ge1xuICAgICAgICAgIHJldHVybiBuLnR5cGUgPT09IFwibGlzdFwiO1xuICAgICAgICB9LFxuICAgICAgICBtb2RlOiBcImxvd2VzdFwiLFxuICAgICAgICBzcGxpdDogdHJ1ZSxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gZmFsc2U7XG5cbiAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKFxuICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICB7XG4gICAgICAgIG1hdGNoOiAobjogYW55KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG4udHlwZSA9PT0gXCJsaXN0LWl0ZW1cIjtcbiAgICAgICAgfSxcbiAgICAgICAgbW9kZTogXCJsb3dlc3RcIixcbiAgICAgICAgc3BsaXQ6IHRydWUsXG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgc3VwZXJibG9jayBicmVhaywgc2luY2UgeW91IG1pZ2h0IG5vdCBiZSBhYmxlIHRvIGVzY2FwZVxuICAgKiBzdXBlcmJsb2NrcywgZWcuIHN1Y2ggYXMgYSBzaW5nbGUgY29udGFpbmVyLCB5b3Ugd2lsbCB1c2UgYSBzdXBlcmJsb2NrIGJyZWFrXG4gICAqIGFsdCtlbnRlciBpbiBvcmRlciB0byBlc2NhcGUgdGhlIHN1cGVyYmxvY2tcbiAgICogXG4gICAqIEBwYXJhbSBhdCB0aGUgcGF0aCBvZiB0aGUgc3VwZXJibG9jayB0byBpbnNlcnQgYSBicmVhayBhdFxuICAgKiBAcGFyYW0gcmV2ZXJzZSB3aGV0aGVyIHRvIGluc2VydCBpdCBiZWZvcmUgb3IgYWZ0ZXIsIGJ5IGRlZmF1bHQgaXQgd2lsbCBiZSBhZnRlciwgdXNlIHRoaXMgZmxhZyBmb3IgYmVmb3JlXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0U3VwZXJicmVhayhhdD86IFBhdGgsIHJldmVyc2U/OiBib29sZWFuKSB7XG4gICAgbGV0IGN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb21BbmNob3IgPSBhdCB8fCAoXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRCbG9ja0VsZW1lbnQgJiYgaXNWb2lkKHRoaXMuc3RhdGUuY3VycmVudEJsb2NrRWxlbWVudCkgJiYgdGhpcy5zdGF0ZS5jdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yXG4gICAgKSB8fCAoXG4gICAgICAgIHRoaXMuc3RhdGUuY3VycmVudFN1cGVyQmxvY2tFbGVtZW50cyAmJlxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbdGhpcy5zdGF0ZS5jdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLmxlbmd0aCAtIDFdXG4gICAgICApO1xuXG4gICAgaWYgKCFjdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tQW5jaG9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb20gPSBOb2RlLmdldCh0aGlzLmVkaXRvciwgY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbUFuY2hvcikgYXMgUmljaEVsZW1lbnQ7XG4gICAgLy8gbWFrZSBhIGNvcHlcbiAgICBjdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tQW5jaG9yID0gWy4uLmN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb21BbmNob3JdO1xuICAgIC8vIHNvIHdlIGdldCB0aGlzIGFuY2hvciBmb3IgdGhlIHBhcmVudFxuICAgIGxldCBwYXJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvciA9IFsuLi5jdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tQW5jaG9yXTtcbiAgICBwYXJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvci5wb3AoKTtcbiAgICBsZXQgcGFyZW50U3VwZXJCbG9ja0VsZW1lbnQ6IFJpY2hFbGVtZW50ID0gbnVsbDtcblxuICAgIC8vIGFuZCBub3cgbG9vcFxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAvLyBnZXQgdGhlIHBhcmVudCBlbGVtZW50IGFuZCBjaGVjayB0aGF0IHBhcmFncmFwaHMgY2FuIGJlIGFkZGVkIHRvIGl0XG4gICAgICBwYXJlbnRTdXBlckJsb2NrRWxlbWVudCA9IE5vZGUuZ2V0KHRoaXMuZWRpdG9yLCBwYXJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcikgYXMgUmljaEVsZW1lbnQ7XG4gICAgICBjb25zdCBhbGxvd3NDaGlsZHJlbiA9IFNFUklBTElaQVRJT05fUkVHSVNUUlkuQUxMT1dTX0NISUxEUkVOW3BhcmVudFN1cGVyQmxvY2tFbGVtZW50LnR5cGVdO1xuICAgICAgY29uc3QgY2FuUGFyZW50SGF2ZVBhcmFncmFwaEFzQ2hpbGRyZW4gPSAhYWxsb3dzQ2hpbGRyZW4gfHwgYWxsb3dzQ2hpbGRyZW4uaW5jbHVkZXMoXCJwYXJhZ3JhcGhcIik7XG4gICAgICBjb25zdCBpc0FTb2xvRXNjYXBhYmxlVHlwZSA9IGN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb20udHlwZSA9PT0gXCJsaXN0XCI7XG5cbiAgICAgIC8vIGNvdWxkIGJlIHRoZSBlZGl0b3IsIHNvIHdlIHN0b3BcbiAgICAgIGlmIChcbiAgICAgICAgKFxuICAgICAgICAgIC8vIGxpc3QgYW5kIGxpc3QgaXRlbXMgY2FuIGJlIGVzY2FwZWQgYnlcbiAgICAgICAgICAvLyBzdGFuZGFyZCBlbnRlcmluZyBzbyB3ZSBkb24ndCBhbGxvdyB0aGF0IGFzIGEgYnJlYWsgcG9pbnRcbiAgICAgICAgICAhaXNBU29sb0VzY2FwYWJsZVR5cGUgJiZcbiAgICAgICAgICBjYW5QYXJlbnRIYXZlUGFyYWdyYXBoQXNDaGlsZHJlblxuICAgICAgICApIHx8XG4gICAgICAgICFwYXJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvci5sZW5ndGhcbiAgICAgICkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gb3RoZXJ3aXNlIHdlIGdvIG9uZSBsZXZlbCB1cCBmb3IgYm90aFxuICAgICAgcGFyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3IucG9wKCk7XG4gICAgICBjdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tQW5jaG9yLnBvcCgpO1xuICAgICAgY3VycmVudEVsZW1lbnRUb0JyZWFrRnJvbSA9IE5vZGUuZ2V0KHRoaXMuZWRpdG9yLCBjdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tQW5jaG9yKSBhcyBSaWNoRWxlbWVudDtcbiAgICB9O1xuXG4gICAgLy8gY2Fubm90IGJyZWFrIGFzIGl0J3MgYSBzb2xvIGVzY2FwYWJsZSB0eXBlXG4gICAgaWYgKGN1cnJlbnRFbGVtZW50VG9CcmVha0Zyb20udHlwZSA9PT0gXCJsaXN0XCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBhbmQgbm93IHdlIG5lZWQgdG8gZ2V0IHRoZSBuZXh0IGFuY2hvciB0aGF0IGlzIG5leHQgdG8gc3VjaCBibG9ja1xuICAgIGNvbnN0IG5leHRBbmNob3IgPSBjdXJyZW50RWxlbWVudFRvQnJlYWtGcm9tQW5jaG9yO1xuICAgIGlmICghcmV2ZXJzZSkge1xuICAgICAgLy8gaWYgaXQncyBpbiByZXZlcnNlIHdlIGFjdHVhbGx5IGp1c3QgaW5zZXJ0IHJpZ2h0IGluIHRoZSBzYW1lIHNwb3RcbiAgICAgIC8vIHdoaWNoIHdpbGwgcHVzaCB0aGUgZ2l2ZW4gc3VwZXJibG9jayBmb3J3YXJkc1xuICAgICAgbmV4dEFuY2hvcltuZXh0QW5jaG9yLmxlbmd0aCAtIDFdKys7XG4gICAgfVxuXG4gICAgLy8gYW5kIHdlIGluc2VydCBhIGNsb25lIGJhc2VkIG9uIHRoZSBibG9jayBpdHNlbGZcbiAgICAvLyB3aXRoIG5vIHRleHRcbiAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICB0eXBlOiBcInBhcmFncmFwaFwiIGFzIGFueSxcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICB9IGFzIGFueVxuICAgICAgXVxuICAgIH0sIHsgYXQ6IG5leHRBbmNob3IgfSk7XG5cbiAgICAvLyBhbmQgd2Ugd2FudCB0byBmb2N1cyBvbiBzdWNoIHRleHRcbiAgICBjb25zdCBuZXh0QW5jaG9yVGV4dCA9IG5leHRBbmNob3IuY29uY2F0KFswXSk7XG5cbiAgICB0aGlzLmZvY3VzQXQoe1xuICAgICAgYW5jaG9yOiB7XG4gICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgcGF0aDogbmV4dEFuY2hvclRleHQsXG4gICAgICB9LFxuICAgICAgZm9jdXM6IHtcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICBwYXRoOiBuZXh0QW5jaG9yVGV4dCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgYW5jaG9ycyBhbmQgdGhlIGNvbnRleHQgYmFzZWQgb24gYSBnaXZlbiB2YWx1ZVxuICAgKiAob3IgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGVkaXRvcikgYW5kIHRoZSBzZWxlY3Rpb24gbm9kZXNcbiAgICogdGhhdCBhcmUgY3VycmVudGx5IHNlbGVjdGVkIChvciBpdCB3aWxsIG92ZXJyaWRlIHdpdGggdGhlIGRlZmF1bHRzKVxuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBhbmNob3IgdGhhdCBpcyBjdXJyZW50bHkgZGVlbWVkIHRvIGJlIHNlbGVjdGVkIGF0XG4gICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgdGhhdCB3ZSBhcmUgd29ya2luZyB3aXRoLCBpZiBub3QgcHJvdmlkZWQgaXQgd2lsbCB0YWtlIGl0IGZyb20gdGhlIHN0YXRlXG4gICAqIEBwYXJhbSBjdXJyZW50R2l2ZW5TZWxlY3RlZE5vZGVBbmNob3IgdGhlIHNlbGVjdGVkIG5vZGUgYW5jaG9yLCBhbmQgdGV4dCBhbmNob3IgaWYgbm90IHByb3ZpZGVkXG4gICAqIGl0IHdpbGwgdXNlIHRoZSBkZWZhdWx0IHZhbHVlcyBiYXNlZCBvbiB0aGUgbG9naWMgb2YgdGhlIGNhbGN1bGF0ZWQgYW5jaG9yc1xuICAgKi9cbiAgcHVibGljIGNhbGN1bGF0ZUFuY2hvcnMoXG4gICAgYW5jaG9yOiBQYXRoLFxuICAgIHZhbHVlPzogTm9kZVtdLFxuICAgIGN1cnJlbnRHaXZlblNlbGVjdGVkTm9kZUFuY2hvcj86IFBhdGgsXG4gICkge1xuICAgIC8vIGZpcnN0IHdlIHNldCB1cCBhbGwgdGhlIGJhc2ljcyB0byB0aGVpciBudWxsIHZhbHVlXG4gICAgbGV0IGN1cnJlbnRJbmxpbmVFbGVtZW50OiBSaWNoRWxlbWVudCA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRJbmxpbmVFbGVtZW50QW5jaG9yOiBQYXRoID0gbnVsbDtcbiAgICBsZXQgY3VycmVudEJsb2NrRWxlbWVudDogUmljaEVsZW1lbnQgPSBudWxsO1xuICAgIGxldCBjdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yOiBQYXRoID0gbnVsbDtcbiAgICBsZXQgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50czogUmljaEVsZW1lbnRbXSA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IFBhdGhbXSA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRUZXh0OiBJVGV4dCA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRUZXh0QW5jaG9yOiBQYXRoID0gbnVsbDtcblxuICAgIGxldCBwcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcjogUGF0aCA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcjtcbiAgICBsZXQgcHJldmlvdXNUZXh0QW5jaG9yOiBQYXRoID0gdGhpcy5zdGF0ZS5jdXJyZW50VGV4dEFuY2hvcjtcblxuICAgIC8vIG5vdyB3ZSBkbyBuZWVkIHRvIHNldHVwIHRoZSBhbmNob3IgaWYgd2UgaGF2ZSBhbiBhbmNob3JcbiAgICAvLyBpbiB0aGF0IGNhc2Ugd2UgbmVlZCB0byBwb3B1bGF0ZSB0aGVzZSBmaWVsZHNcbiAgICBpZiAoYW5jaG9yKSB7XG4gICAgICAvLyB0aGUgY3VycmVudCBlbGVtZW50XG4gICAgICBsZXQgY3VycmVudExvb3BpbmdFbGVtZW50ID0gdmFsdWUgPyB7XG4gICAgICAgIGNoaWxkcmVuOiB2YWx1ZSxcbiAgICAgIH0gYXMgYW55IDogdGhpcy5zdGF0ZS50cmVlVmFsdWU7XG4gICAgICBjb25zdCBsb29waW5nQW5jaG9yOiBQYXRoID0gW107XG5cbiAgICAgIC8vIHdlIGxvb3AgaW4gb3VyIHRleHQgYW5jaG9yXG4gICAgICBhbmNob3IuZm9yRWFjaCgobjogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGxvb3BpbmdBbmNob3IucHVzaChuKTtcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgYW4gZWxlbWVudFxuICAgICAgICBjdXJyZW50TG9vcGluZ0VsZW1lbnQgPSBjdXJyZW50TG9vcGluZ0VsZW1lbnQgJiYgY3VycmVudExvb3BpbmdFbGVtZW50LmNoaWxkcmVuW25dIGFzIFJpY2hFbGVtZW50O1xuXG4gICAgICAgIC8vIGlmIGl0J3MgYSBub24gaW5saW5lIHRoZW4gd2UgYXJlIGludG8gb3VyIGN1cnJlbnQgYmxvY2tcbiAgICAgICAgaWYgKGN1cnJlbnRMb29waW5nRWxlbWVudCAmJiBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLklOTElORVNbY3VycmVudExvb3BpbmdFbGVtZW50LnR5cGVdKSB7XG4gICAgICAgICAgY3VycmVudElubGluZUVsZW1lbnQgPSBjdXJyZW50TG9vcGluZ0VsZW1lbnQ7XG4gICAgICAgICAgY3VycmVudElubGluZUVsZW1lbnRBbmNob3IgPSBbLi4ubG9vcGluZ0FuY2hvcl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgc3VwZXJibG9jayBvciBsaXN0LWl0ZW0gZWxlbWVudCB0aGF0IGNvbnRhaW5zIGxpc3RzXG4gICAgICAgIGlmIChjdXJyZW50TG9vcGluZ0VsZW1lbnQgJiYgU0VSSUFMSVpBVElPTl9SRUdJU1RSWS5CTE9DS1NbY3VycmVudExvb3BpbmdFbGVtZW50LnR5cGVdKSB7XG4gICAgICAgICAgY3VycmVudEJsb2NrRWxlbWVudCA9IGN1cnJlbnRMb29waW5nRWxlbWVudDtcbiAgICAgICAgICBjdXJyZW50QmxvY2tFbGVtZW50QW5jaG9yID0gWy4uLmxvb3BpbmdBbmNob3JdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHN1cGVyYmxvY2sgb3IgbGlzdC1pdGVtIGVsZW1lbnQgdGhhdCBjb250YWlucyBsaXN0c1xuICAgICAgICBpZiAoY3VycmVudExvb3BpbmdFbGVtZW50ICYmIFNFUklBTElaQVRJT05fUkVHSVNUUlkuU1VQRVJCTE9DS1NbY3VycmVudExvb3BpbmdFbGVtZW50LnR5cGVdKSB7XG4gICAgICAgICAgaWYgKCFjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzKSB7XG4gICAgICAgICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzID0gW107XG4gICAgICAgICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHMucHVzaChjdXJyZW50TG9vcGluZ0VsZW1lbnQpO1xuICAgICAgICAgIGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMucHVzaChbLi4ubG9vcGluZ0FuY2hvcl0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1cnJlbnRMb29waW5nRWxlbWVudCAmJiBUZXh0LmlzVGV4dChjdXJyZW50TG9vcGluZ0VsZW1lbnQpKSB7XG4gICAgICAgICAgY3VycmVudFRleHQgPSBjdXJyZW50TG9vcGluZ0VsZW1lbnQ7XG4gICAgICAgICAgY3VycmVudFRleHRBbmNob3IgPSBbLi4ubG9vcGluZ0FuY2hvcl07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIG5vdyBmb3Igb3VyIHNlbGVjdGlvbiwgYnkgZGVmYXVsdCBpdCdzIGFsbCBudWxsXG4gICAgbGV0IGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3I6IFBhdGggPSBudWxsO1xuICAgIGxldCBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50OiBSaWNoRWxlbWVudCA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudDogUmljaEVsZW1lbnQgPSBudWxsO1xuICAgIGxldCBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHM6IFJpY2hFbGVtZW50W10gPSBudWxsO1xuICAgIGxldCBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3I6IFBhdGggPSBudWxsO1xuICAgIGxldCBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IFBhdGhbXSA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRTZWxlY3RlZFRleHQ6IElUZXh0ID0gbnVsbDtcbiAgICBsZXQgY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvcjogUGF0aCA9IG51bGw7XG5cbiAgICBsZXQgZ2l2ZW5TZWxlY3RlZE5vZGVBbmNob3JJc0NvcnJ1cHRlZCA9IGZhbHNlO1xuXG4gICAgaWYgKGN1cnJlbnRHaXZlblNlbGVjdGVkTm9kZUFuY2hvcikge1xuICAgICAgbGV0IGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRDb3JydXB0aW9uVGVzdCA9IHZhbHVlID8ge1xuICAgICAgICBjaGlsZHJlbjogdmFsdWUsXG4gICAgICB9IGFzIGFueSA6IHRoaXMuc3RhdGUudHJlZVZhbHVlO1xuICAgICAgZ2l2ZW5TZWxlY3RlZE5vZGVBbmNob3JJc0NvcnJ1cHRlZCA9IGN1cnJlbnRHaXZlblNlbGVjdGVkTm9kZUFuY2hvci5zb21lKChuOiBudW1iZXIsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29ycnVwdGlvblRlc3QgfHxcbiAgICAgICAgICAhY3VycmVudFNlbGVjdGVkRWxlbWVudENvcnJ1cHRpb25UZXN0LmNoaWxkcmVuIHx8XG4gICAgICAgICAgIWN1cnJlbnRTZWxlY3RlZEVsZW1lbnRDb3JydXB0aW9uVGVzdC5jaGlsZHJlbltuXVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29ycnVwdGlvblRlc3QgPSBjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29ycnVwdGlvblRlc3QuY2hpbGRyZW5bbl07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBpZiB3ZSBkb24ndCBoYXZlIGEgc2VsZWN0ZWQgYW5jaG9yIGFuZCBvcmlnaW5cbiAgICAvLyB3ZSBoYXZlIHB1cnBvc2VseSBzZXQgdGhlbiB3ZSBzaG91bGRcbiAgICAvLyBkZWZhdWx0IHRvIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFsdWVzLCBpZiBhbnlcbiAgICBpZiAoIWN1cnJlbnRHaXZlblNlbGVjdGVkTm9kZUFuY2hvciB8fCBnaXZlblNlbGVjdGVkTm9kZUFuY2hvcklzQ29ycnVwdGVkKSB7XG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yID0gY3VycmVudElubGluZUVsZW1lbnRBbmNob3I7XG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50ID0gY3VycmVudElubGluZUVsZW1lbnQ7XG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQgPSBjdXJyZW50QmxvY2tFbGVtZW50O1xuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yID0gY3VycmVudEJsb2NrRWxlbWVudEFuY2hvcjtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyA9IGN1cnJlbnRTdXBlckJsb2NrRWxlbWVudHM7XG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMgPSBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzO1xuICAgICAgY3VycmVudFNlbGVjdGVkVGV4dCA9IGN1cnJlbnRUZXh0O1xuICAgICAgY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvciA9IGN1cnJlbnRUZXh0QW5jaG9yO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBsb29waW5nQW5jaG9yOiBQYXRoID0gW107XG5cbiAgICAgIC8vIG5vdyB3ZSBuZWVkIHRvIHByZXBhcmUgYW5kIGZpbmQgdGhlIHRleHQgb3JpZ2luLCBhbmQgY29udGV4dFxuICAgICAgLy8gYXMgd2VsbCBhcyB0aGUgc2VsZWN0ZWQgZWxlbWVudFxuICAgICAgbGV0IGN1cnJlbnRMb29waW5nRWxlbWVudCA9IHZhbHVlID8ge1xuICAgICAgICBjaGlsZHJlbjogdmFsdWUsXG4gICAgICB9IGFzIGFueSA6IHRoaXMuc3RhdGUudHJlZVZhbHVlO1xuXG4gICAgICAvLyBzbyB3ZSBsb29wIGluIHRoZSBvcmlnaW4gYW5jaG9yXG4gICAgICBjdXJyZW50R2l2ZW5TZWxlY3RlZE5vZGVBbmNob3IuZm9yRWFjaCgobjogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgIC8vIGFuZCB1cGRhdGUgdGhlIG5vZGUgb3JpZ2luXG4gICAgICAgIGN1cnJlbnRMb29waW5nRWxlbWVudCA9IGN1cnJlbnRMb29waW5nRWxlbWVudCAmJiBjdXJyZW50TG9vcGluZ0VsZW1lbnQuY2hpbGRyZW5bbl07XG4gICAgICAgIGxvb3BpbmdBbmNob3IucHVzaChuKTtcblxuICAgICAgICBpZiAoY3VycmVudExvb3BpbmdFbGVtZW50ICYmIFNFUklBTElaQVRJT05fUkVHSVNUUlkuSU5MSU5FU1tjdXJyZW50TG9vcGluZ0VsZW1lbnQudHlwZV0pIHtcbiAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50ID0gY3VycmVudExvb3BpbmdFbGVtZW50O1xuICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IgPSBbLi4ubG9vcGluZ0FuY2hvcl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgc3VwZXJibG9jayBvciBsaXN0LWl0ZW0gZWxlbWVudCB0aGF0IGNvbnRhaW5zIGxpc3RzXG4gICAgICAgIGlmIChjdXJyZW50TG9vcGluZ0VsZW1lbnQgJiYgU0VSSUFMSVpBVElPTl9SRUdJU1RSWS5CTE9DS1NbY3VycmVudExvb3BpbmdFbGVtZW50LnR5cGVdKSB7XG4gICAgICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50ID0gY3VycmVudExvb3BpbmdFbGVtZW50O1xuICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvciA9IFsuLi5sb29waW5nQW5jaG9yXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHdlIGhhdmUgYSBzdXBlcmJsb2NrIG9yIGxpc3QtaXRlbSBlbGVtZW50IHRoYXQgY29udGFpbnMgbGlzdHNcbiAgICAgICAgaWYgKGN1cnJlbnRMb29waW5nRWxlbWVudCAmJiBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLlNVUEVSQkxPQ0tTW2N1cnJlbnRMb29waW5nRWxlbWVudC50eXBlXSkge1xuICAgICAgICAgIGlmICghY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzKSB7XG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgPSBbXTtcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycyA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMucHVzaChjdXJyZW50TG9vcGluZ0VsZW1lbnQpO1xuICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycy5wdXNoKFsuLi5sb29waW5nQW5jaG9yXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VycmVudExvb3BpbmdFbGVtZW50ICYmIFRleHQuaXNUZXh0KGN1cnJlbnRMb29waW5nRWxlbWVudCkpIHtcbiAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0ID0gY3VycmVudExvb3BpbmdFbGVtZW50O1xuICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3IgPSBbLi4ubG9vcGluZ0FuY2hvcl07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHBzZXVkb0RvY3VtZW50OiBJUm9vdExldmVsRG9jdW1lbnQgPSB7XG4gICAgICB0eXBlOiBcImRvY3VtZW50XCIsXG4gICAgICBjaGlsZHJlbjogdmFsdWUgYXMgYW55LFxuICAgICAgaWQ6IHRoaXMuc3RhdGUudHJlZVZhbHVlLmlkLFxuICAgICAgcmljaDogdGhpcy5zdGF0ZS50cmVlVmFsdWUucmljaCxcbiAgICB9O1xuXG4gICAgY29uc3QgY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0ID0gZ2V0Q29udGV4dEZvcihcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycyAmJiBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLmxlbmd0aCAtIDFdLFxuICAgICAgXCJmaW5hbFwiLFxuICAgICAgcHNldWRvRG9jdW1lbnQsXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgICApO1xuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dCA9IGdldENvbnRleHRGb3IoXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IsXG4gICAgICBcImZpbmFsXCIsXG4gICAgICBwc2V1ZG9Eb2N1bWVudCxcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LFxuICAgICk7XG4gICAgY29uc3QgY3VycmVudFNlbGVjdGVkSW5saW5lQ29udGV4dCA9IGdldENvbnRleHRGb3IoXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yLFxuICAgICAgXCJmaW5hbFwiLFxuICAgICAgcHNldWRvRG9jdW1lbnQsXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgICApO1xuXG4gICAgLy8gQ2FsY3VsYXRpb24gb2Ygb3RoZXIgY29udGV4dHVhbCBpbmZvcm1hdGlvblxuICAgIGNvbnN0IGJhc2VTdXBlckJsb2NrID0gKFxuICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzICYmIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50c1tjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMubGVuZ3RoIC0gMV1cbiAgICApIHx8IHBzZXVkb0RvY3VtZW50O1xuICAgIGNvbnN0IGJhc2VBbGxvd2VkQ2hpbGRyZU9mU3VwZXJCbG9jayA9IGJhc2VTdXBlckJsb2NrID8gZ2V0QWxsb3dlZENoaWxkcmVuVHlwZXMoYmFzZVN1cGVyQmxvY2spIDogW107XG5cbiAgICBjb25zdCBzdXBlckJsb2NrVUlIYW5kbGVyID0gZ2V0VUlIYW5kbGVyVmFsdWVXaXRoS25vd25Db250ZXh0Rm9yKFxuICAgICAgYmFzZVN1cGVyQmxvY2sgYXMgUmljaEVsZW1lbnQsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHQgfHwgdGhpcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgICApO1xuXG4gICAgY29uc3QgYmFzZUJsb2NrID0gY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50O1xuICAgIGNvbnN0IGJhc2VBbGxvd2VkQ2hpbGRyZW5PZkJsb2NrID0gYmFzZUJsb2NrID8gZ2V0QWxsb3dlZENoaWxkcmVuVHlwZXMoYmFzZUJsb2NrKSA6IFtdO1xuXG4gICAgY29uc3QgYmxvY2tVSUhhbmRsZXIgPSBnZXRVSUhhbmRsZXJWYWx1ZVdpdGhLbm93bkNvbnRleHRGb3IoXG4gICAgICBiYXNlQmxvY2ssXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQsXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgICApO1xuXG4gICAgY29uc3QgaW5saW5lVUlIYW5kbGVyID0gZ2V0VUlIYW5kbGVyVmFsdWVXaXRoS25vd25Db250ZXh0Rm9yKFxuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUNvbnRleHQsXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCxcbiAgICApO1xuXG4gICAgY29uc3QgYWxsb3dzSW5zZXJ0RWxlbWVudCA9IChlbGVtZW50OiBSaWNoRWxlbWVudCwgb3B0czogeyBjb2xsYXBzZWQ/OiBib29sZWFuOyBleHRlbmRlZD86IGJvb2xlYW47IHNlbGVjdGVkPzogYm9vbGVhbiB9ID0ge30pID0+IHtcbiAgICAgIGlmIChvcHRzLmNvbGxhcHNlZCB8fCBvcHRzLmV4dGVuZGVkIHx8IG9wdHMuc2VsZWN0ZWQpIHtcbiAgICAgICAgaWYgKG9wdHMuc2VsZWN0ZWQgJiYgIXRoaXMuZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0NvbGxhcHNlZCA9IHRoaXMuZWRpdG9yLnNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZCh0aGlzLmVkaXRvci5zZWxlY3Rpb24pO1xuICAgICAgICBpZiAoIWlzQ29sbGFwc2VkICYmIG9wdHMuY29sbGFwc2VkKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQ29sbGFwc2VkICYmIG9wdHMuZXh0ZW5kZWQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gd2UgZmlyc3QgbmVlZCB0byBjaGVjayB3aGVyZSBpdCBnb2VzXG4gICAgICBpZiAoaXNTdXBlckJsb2NrKGVsZW1lbnQpIHx8IGlzQmxvY2soZWxlbWVudCkpIHtcbiAgICAgICAgaWYgKCFiYXNlQWxsb3dlZENoaWxkcmVPZlN1cGVyQmxvY2suaW5jbHVkZXMoZWxlbWVudC50eXBlKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdXBlckJsb2NrVUlIYW5kbGVyICYmIHN1cGVyQmxvY2tVSUhhbmRsZXIuYWxsb3dzQ2hpbGRyZW4gP1xuICAgICAgICAgIHN1cGVyQmxvY2tVSUhhbmRsZXIuYWxsb3dzQ2hpbGRyZW4oZWxlbWVudCwgYmFzZVN1cGVyQmxvY2sgYXMgUmljaEVsZW1lbnQpIDpcbiAgICAgICAgICB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChpc0lubGluZShlbGVtZW50KSkge1xuICAgICAgICBpZiAoIWJhc2VBbGxvd2VkQ2hpbGRyZW5PZkJsb2NrLmluY2x1ZGVzKGVsZW1lbnQudHlwZSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYmxvY2tVSUhhbmRsZXIgJiYgYmxvY2tVSUhhbmRsZXIuYWxsb3dzQ2hpbGRyZW4gP1xuICAgICAgICAgIGJsb2NrVUlIYW5kbGVyLmFsbG93c0NoaWxkcmVuKGVsZW1lbnQsIGJhc2VCbG9jaykgOlxuICAgICAgICAgIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdG9wbW9zdFN1cGVyYmxvY2sgPSBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgJiZcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50c1tjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgdG9wbW9zdFN1cGVyYmxvY2tBbmNob3IgPSBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMgJiZcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1tjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgaW5saW5lSXNWb2lkID0gY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCA/IGlzVm9pZChjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50KSA6IGZhbHNlO1xuICAgIGNvbnN0IGJsb2NrSXNWb2lkID0gY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50ID8gaXNWb2lkKGN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCkgOiBmYWxzZTtcbiAgICBjb25zdCB0b3Btb3N0U3VwZXJibG9ja0lzVm9pZCA9IHRvcG1vc3RTdXBlcmJsb2NrID8gaXNWb2lkKHRvcG1vc3RTdXBlcmJsb2NrKSA6IGZhbHNlO1xuICAgIGNvbnN0IHZvaWRFbGVtZW50ID0gaW5saW5lSXNWb2lkIHx8IGJsb2NrSXNWb2lkIHx8IHRvcG1vc3RTdXBlcmJsb2NrSXNWb2lkO1xuICAgIGNvbnN0IGFsbG93c1RleHQgPSAhdm9pZEVsZW1lbnQ7XG5cbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRFbGVtZW50ID0gY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCB8fCBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQgfHwgdG9wbW9zdFN1cGVyYmxvY2sgfHwgbnVsbDtcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yID0gY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvciB8fCBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IgfHwgdG9wbW9zdFN1cGVyYmxvY2tBbmNob3IgfHwgbnVsbDtcblxuICAgIC8vIG5vdyB3ZSBjYW4gcmV0dXJuXG4gICAgcmV0dXJuIHtcbiAgICAgIGN1cnJlbnRUZXh0QW5jaG9yLFxuICAgICAgY3VycmVudFRleHQsXG4gICAgICBjdXJyZW50QmxvY2tFbGVtZW50LFxuICAgICAgY3VycmVudEJsb2NrRWxlbWVudEFuY2hvcixcbiAgICAgIGN1cnJlbnRJbmxpbmVFbGVtZW50LFxuICAgICAgY3VycmVudElubGluZUVsZW1lbnRBbmNob3IsXG4gICAgICBjdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzLFxuICAgICAgY3VycmVudFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycyxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHQsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yLFxuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50LFxuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yLFxuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50LFxuICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcixcblxuICAgICAgY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0LFxuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0LFxuICAgICAgY3VycmVudFNlbGVjdGVkSW5saW5lQ29udGV4dCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRDb250ZXh0OiBjdXJyZW50U2VsZWN0ZWRJbmxpbmVDb250ZXh0IHx8IGN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dCB8fCBjdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHQsXG5cbiAgICAgIGFsbG93c0luc2VydEVsZW1lbnQsXG4gICAgICBhbGxvd3NUZXh0LFxuICAgICAgaW5saW5lSXNWb2lkLFxuICAgICAgYmxvY2tJc1ZvaWQsXG4gICAgICB0b3Btb3N0U3VwZXJibG9ja0lzVm9pZCxcbiAgICAgIHN1cGVyQmxvY2tVSUhhbmRsZXIsXG4gICAgICBibG9ja1VJSGFuZGxlcixcbiAgICAgIGlubGluZVVJSGFuZGxlcixcblxuICAgICAgcHJldmlvdXNTZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgICBwcmV2aW91c1RleHRBbmNob3IsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIG9uIGNoYW5nZSB3aGVuIHRoZSBmaWVsZCBpcyBmb2N1c2VkXG4gICAqIGFuZCBoYXMgY2hhbmdlZFxuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBhbmNob3IgdGhhdCB3ZSBhcmUgYXRcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0aGF0IHdlIGdvdFxuICAgKi9cbiAgcHVibGljIG9uRm9jdXNlZENoYW5nZShhbmNob3I6IFBhdGgsIHZhbHVlOiBOb2RlW10pIHtcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBub3cgd2UgY2FuIGNhbGN1bGF0ZSB0aGUgYW5jaG9ycyBhbmQgY29udGV4dFxuICAgIHRoaXMuc2V0U3RhdGUodGhpcy5jYWxjdWxhdGVBbmNob3JzKGFuY2hvciwgdmFsdWUpKTtcblxuICAgIC8vIGlmIHdlIGFyZSBub3QgY29uc2lkZXJlZCBhcyBjdXJyZW50bHkgZm9jdXNlZFxuICAgIGlmICghdGhpcy5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICAvLyB3ZSBjYWxsIHRoaXNcbiAgICAgIHRoaXMucHJvcHMub25Gb2N1cyAmJiB0aGlzLnByb3BzLm9uRm9jdXMoKTtcbiAgICAgIC8vIGFuZCBzZXQgdGhlIHN0YXRlXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZm9jdXNlZDogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBvbiBhbiBvbiBjaGFuZ2Ugd2hlbnQgaGUgZmllbGQgaXMgYmx1cnJlZFxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRoYXQgd2UgYXJlIHdvcmtpbmcgd2l0aFxuICAgKi9cbiAgcHVibGljIG9uQmx1cnJlZENoYW5nZSh2YWx1ZT86IE5vZGVbXSkge1xuICAgIGlmICh0aGlzLmlzVW5tb3VudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGlmIHdlIGFyZSBjb25zaWRlcmVkIGFzIGZvY3VzZWRcbiAgICBpZiAodGhpcy5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICAvLyB3ZWxsIG5vdCBhbnltb3JlXG4gICAgICB0aGlzLnByb3BzLm9uQmx1ciAmJiB0aGlzLnByb3BzLm9uQmx1cigpO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMgJiZcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW3RoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLmxlbmd0aCAtIDFdO1xuXG4gICAgLy8gd2UgcGljayB0aGUgYW5jaG9yIGJhc2VkIG9uIHNwZWNpZmljaXR5XG4gICAgLy8gdGhlIG9uZSB3ZSBnb3QgdGhlIG1vc3Qgc3BlY2lmaWMgd2UgcGFzcyB0aGF0XG4gICAgY29uc3QgY3VycmVudFNlbGVjdGVkQW5jaG9yID1cbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dEFuY2hvciB8fFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50QW5jaG9yIHx8XG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvciB8fFxuICAgICAgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3I7XG5cbiAgICAvLyBub3cgd2UgY2FuIGNhbGwgdGhpc1xuICAgIGNvbnN0IGFuY2hvckRhdGEgPSB0aGlzLmNhbGN1bGF0ZUFuY2hvcnMoXG4gICAgICAvLyBubyBhbmNob3IgYXMgaXQgaXMgbm90IGtub3duXG4gICAgICBudWxsLFxuICAgICAgLy8gdGhlIHZhbHVlXG4gICAgICB2YWx1ZSxcbiAgICAgIC8vIGFuZCB3ZSBwYXNzIHRoZSBzZWxlY3RlZCBub2RlIGFuY2hvciBhcyBpdFxuICAgICAgLy8gcmVtYWlucyBldmVuIGFmdGVyIHRoZSBzZWxlY3Rpb24gb25seSBpZlxuICAgICAgLy8gd2UgaGF2ZSBub3QganVzdCBkZWxldGVkIHRoYXQgbm9kZVxuICAgICAgY3VycmVudFNlbGVjdGVkQW5jaG9yICYmXG4gICAgICAgICF0aGlzLmxhc3RDaGFuZ2VXYXNTZWxlY3RlZERlbGV0ZSA/IGN1cnJlbnRTZWxlY3RlZEFuY2hvciA6IG51bGwsXG4gICAgKTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGZvY3VzZWQ6IGZhbHNlLFxuICAgICAgLi4uYW5jaG9yRGF0YSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBvcHRpbWl6YXRpb24gc28gdGhhdCB0aGUgY29tcG9uZW50IHVwZGF0ZXMgb25seSB3aGVuIGl0J3MgbmVjZXNzYXJ5XG4gICAqIEBwYXJhbSBuZXh0UHJvcHMgdGhlIG5leHQgcHJvcGVydGllc1xuICAgKiBAcGFyYW0gbmV4dFN0YXRlIHRoZSBuZXh0IHN0YXRlXG4gICAqL1xuICBwdWJsaWMgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wczogSVNsYXRlRWRpdG9yUHJvcHMsIG5leHRTdGF0ZTogSVNsYXRlRWRpdG9yU3RhdGUpIHtcbiAgICBjb25zdCBzdGFuZGFyZFVwZGF0ZSA9IChcbiAgICAgIG5leHRQcm9wcy5pZCAhPT0gdGhpcy5wcm9wcy5pZCB8fFxuICAgICAgbmV4dFByb3BzLmxhbmcgIT09IHRoaXMucHJvcHMubGFuZyB8fFxuICAgICAgbmV4dFByb3BzLmN1cnJlbnRWYWxpZCAhPT0gdGhpcy5wcm9wcy5jdXJyZW50VmFsaWQgfHxcbiAgICAgIG5leHRTdGF0ZS5mb2N1c2VkICE9PSB0aGlzLnN0YXRlLmZvY3VzZWQgfHxcbiAgICAgIG5leHRQcm9wcy5XcmFwcGVyICE9PSB0aGlzLnByb3BzLldyYXBwZXIgfHxcbiAgICAgIG5leHRQcm9wcy5pc1JpY2hUZXh0ICE9PSB0aGlzLnByb3BzLmlzUmljaFRleHQgfHxcbiAgICAgIG5leHRQcm9wcy5yb290Q29udGV4dCAhPT0gdGhpcy5wcm9wcy5yb290Q29udGV4dCB8fFxuICAgICAgbmV4dFByb3BzLmJhc2VJMThuICE9PSB0aGlzLnByb3BzLmJhc2VJMThuIHx8XG4gICAgICAhZXF1YWxzKG5leHRTdGF0ZS5jdXJyZW50VGV4dEFuY2hvciwgdGhpcy5zdGF0ZS5jdXJyZW50VGV4dEFuY2hvciwge3N0cmljdDogdHJ1ZX0pIHx8XG4gICAgICAhZXF1YWxzKG5leHRTdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yICE9PSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3IsIHtzdHJpY3Q6IHRydWV9KSB8fFxuICAgICAgbmV4dFN0YXRlLmN1cnJlbnRSb290Q29udGV4dCAhPT0gdGhpcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQgfHxcbiAgICAgIG5leHRQcm9wcy5jdXJyZW50TG9hZEVycm9yICE9PSB0aGlzLnByb3BzLmN1cnJlbnRMb2FkRXJyb3IgfHxcbiAgICAgIG5leHRQcm9wcy5lbGVtZW50V3JhcHBlcnMgIT09IHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzIHx8XG4gICAgICAhZXF1YWxzKHRoaXMuc3RhdGUuYWxsQ29udGFpbmVycywgbmV4dFN0YXRlLmFsbENvbnRhaW5lcnMsIHsgc3RyaWN0OiB0cnVlIH0pIHx8XG4gICAgICAhZXF1YWxzKHRoaXMuc3RhdGUuYWxsVGFibGVzLCBuZXh0U3RhdGUuYWxsVGFibGVzLCB7IHN0cmljdDogdHJ1ZSB9KSB8fFxuICAgICAgIWVxdWFscyh0aGlzLnN0YXRlLmFsbEN1c3RvbSwgbmV4dFN0YXRlLmFsbEN1c3RvbSwgeyBzdHJpY3Q6IHRydWUgfSkgfHxcbiAgICAgICFlcXVhbHModGhpcy5zdGF0ZS5hbGxSaWNoQ2xhc3NlcywgbmV4dFN0YXRlLmFsbFJpY2hDbGFzc2VzLCB7IHN0cmljdDogdHJ1ZSB9KSB8fFxuICAgICAgIWVxdWFscyhuZXh0UHJvcHMud3JhcHBlckFyZ3MsIHRoaXMucHJvcHMud3JhcHBlckFyZ3MsIHsgc3RyaWN0OiB0cnVlIH0pIHx8XG4gICAgICAhZXF1YWxzKG5leHRQcm9wcy5lbGVtZW50V3JhcHBlcnNBcmdzLCB0aGlzLnByb3BzLmVsZW1lbnRXcmFwcGVyc0FyZ3MsIHsgc3RyaWN0OiB0cnVlIH0pIHx8XG4gICAgICAhZXF1YWxzKG5leHRQcm9wcy5mZWF0dXJlcywgdGhpcy5wcm9wcy5mZWF0dXJlcywgeyBzdHJpY3Q6IHRydWUgfSlcbiAgICApXG5cbiAgICAvLyBpZiBpdCdzIGEgc3RhbmRhcmQgdXBkYXRlIG1hdGNoXG4gICAgaWYgKHN0YW5kYXJkVXBkYXRlKSB7XG4gICAgICAvLyB5ZXBcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIG90aGVyd2lzZSBsZXQncyBjaGVjayBmb3IgaW50ZXJuYWwgdmFsdWVzIHNpZ25hdHVyZSBkaWZmZXJlbmNlc1xuICAgIGlmIChuZXh0UHJvcHMudHJlZVZhbHVlICYmIG5leHRTdGF0ZS5zeW5jZWQpIHtcbiAgICAgIHJldHVybiBuZXh0UHJvcHMudHJlZVZhbHVlLmlkICE9PSB0aGlzLnN0YXRlLnRyZWVWYWx1ZS5pZDtcbiAgICB9XG5cbiAgICAvLyBvdGhlcndpc2Ugd2UgZG8gYWxsb3cgZm9yIHRoZSB1cGRhdGVcbiAgICAvLyBhcyB3aXRob3V0IGFuIGludGVybmFsIHZhbHVlIG9yIGluIGEgbm9uLXN5bmNlZCBzdGF0ZVxuICAgIC8vIHdlIGFyZSBsaXN0ZW5pbmcgZm9yIGV2ZXJ5IGNoYW5nZVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIG9mZiB0aGUgcmljaCB0ZXh0XG4gICAqIEBwYXJhbSB2IHRoZSB2YWx1ZSB0byBzZXRcbiAgICovXG4gIHB1YmxpYyBzZXRWYWx1ZSh2OiBhbnkpIHtcbiAgICAvLyBmb3Igc29tZSByZWFzb24gc2xhdGUga2VlcHMgdHJpZ2dlcmluZ1xuICAgIC8vIGEgdmFsdWUgY2hhbmdlIHdoZW4gaXQncyBkaXNhYmxlZFxuICAgIC8vIGJlY2F1c2Ugc2xhdGUgY2FuIGJlIGJ1Z2d5XG4gICAgaWYgKHRoaXMuaXNVbm1vdW50ZWQgfHwgdGhpcy5wcm9wcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGJ1aWxkIGEgbmV3IGRvY3VtZW50XG4gICAgY29uc3QgbmV3Um9vdERvY3VtZW50OiBJUm9vdExldmVsRG9jdW1lbnQgPSB7XG4gICAgICAvLyB3ZSBkb24ndCBrbm93IHRoZSBpZCB5ZXRcbiAgICAgIGlkOiBudWxsLFxuICAgICAgdHlwZTogXCJkb2N1bWVudFwiLFxuICAgICAgcmljaDogdGhpcy5zdGF0ZS50cmVlVmFsdWUucmljaCxcbiAgICAgIGNoaWxkcmVuOiB2LFxuICAgIH07XG5cbiAgICBjb25zdCBzZXJpYWxpemVkID0gc2VyaWFsaXplU3RyaW5nKG5ld1Jvb3REb2N1bWVudCk7XG4gICAgbmV3Um9vdERvY3VtZW50LmlkID0gZ2V0VVVJREZvcihzZXJpYWxpemVkKTtcblxuICAgIC8vIHdlIGRvIG5vdCB1cGRhdGUgaW1tZWRpYXRlbHksXG4gICAgLy8gZm9yIHRoYXQgd2UgZmlyc3QgY2xlYXIgdGhlIHVwZGF0ZSB0aW1lb3V0XG4gICAgLy8gdGhlIHVwZGF0ZSB0aW1lb3V0IGNvbnRhaW5zIHVwZGF0ZSBpbnN0cnVjdGlvbnNcbiAgICAvLyAyIG9mIHRoZW1cbiAgICAvLyB3ZSB3YW50IHRvIGhhbHQgc3VjaCBhc3luYyBleGVjdXRpb25cbiAgICBjbGVhclRpbWVvdXQodGhpcy51cGRhdGVUaW1lb3V0KTtcblxuICAgIGNvbnN0IGlzRXF1YWwgPSAoc2VyaWFsaXplZCB8fCBudWxsKSA9PT0gKHRoaXMucHJvcHMudmFsdWUgfHwgbnVsbCk7XG5cbiAgICBpZiAoaXNFcXVhbCkge1xuICAgICAgLy8gYW5kIHNldCB0aGUgc3RhdGUgdG8gdGhhdFxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHRyZWVWYWx1ZTogbmV3Um9vdERvY3VtZW50LFxuICAgICAgICBzeW5jZWQ6IHRydWUsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHRyZWVWYWx1ZTogbmV3Um9vdERvY3VtZW50LFxuICAgICAgICBzeW5jZWQ6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIG5vdyB3ZSBjYW4gc2V0IGl0XG4gICAgICB0aGlzLnVwZGF0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUudHJlZVZhbHVlLnJpY2gpIHtcbiAgICAgICAgICBpZiAodGhpcy5wcm9wcy5jYWNoZVN0b3JlQ291bnRHbG9iYWwpIHtcbiAgICAgICAgICAgIC8vIHdoYXQgd2UgZG8gaXMgdGhhdCB3ZSBjb3VudCB0aGUgY2hhcmFjdGVyc1xuICAgICAgICAgICAgY29uc3QgY291bnQgPSBjb3VudFNpemUodGhpcy5zdGF0ZS50cmVlVmFsdWUpO1xuICAgICAgICAgICAgLy8gYW5kIHNldCBpdCBpbiB0aGUgbGFzdCByaWNoIHRleHQgY2hhbmdlIGNoZWF0IHZhcmlhYmxlXG4gICAgICAgICAgICAod2luZG93IGFzIGFueSlbdGhpcy5wcm9wcy5jYWNoZVN0b3JlQ291bnRHbG9iYWxdID0gY291bnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gYW5kIG5vdyB3ZSBjYW4gdHJpZ2dlciB0aGUgb24gY2hhbmdlIGV2ZW50XG4gICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2Uoc2VyaWFsaXplU3RyaW5nKHRoaXMuc3RhdGUudHJlZVZhbHVlKSwgdGhpcy5zdGF0ZS50cmVlVmFsdWUpO1xuICAgICAgICAvLyBhbmQgbm93IHdlIGFyZSBnb2luZyB0byB3YWl0IGEgbGl0dGxlIGJpdCBtb3JlXG4gICAgICAgIHRoaXMudXBkYXRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIHRvIHRlbGwgaXQgdGhhdCBpdCBzaG91bGQgc3luY1xuICAgICAgICAgIGlmICghdGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgIHN5bmNlZDogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMzApO1xuICAgICAgfSwgMzAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZXMgdGhlIGNvbnRleHQgYSBnaXZlbiBub2RlIGlzIHNpdHRpbmcgaW5cbiAgICogQHBhcmFtIG4gdGhlIG5vZGUgaW4gcXVlc3Rpb25cbiAgICogQHBhcmFtIG9ubHlTd2ljaGluZ0NvbnRleHQgcHJvdmlkZXMgdGhlIGNvbnRleHQgb25seSBpZiBpdCB3YXMgc2V0XG4gICAqIGJ5IHRoZSBnaXZlbiBub2RlIG90aGVyd2lzZSBpdCB3aWxsIHJldHVybiBudWxsXG4gICAqL1xuICBwdWJsaWMgZ2V0Q29udGV4dEZvcihuOiBOb2RlIHwgUGF0aCwgbGV2ZWw/OiBcImZpbmFsXCIgfCBcInNlbGVjdC1jb250ZXh0XCIgfCBcInNlbGVjdC1sb29wXCIsIG9ubHlTd2ljaGluZ0NvbnRleHQ/OiBib29sZWFuKTogSVRlbXBsYXRlQXJnQ29udGV4dERlZmluaXRpb24ge1xuICAgIGlmIChvbmx5U3dpY2hpbmdDb250ZXh0KSB7XG4gICAgICBjb25zdCBub2RlQXNSaWNoRWxlbWVudDogUmljaEVsZW1lbnQgPSAoUGF0aC5pc1BhdGgobikgPyBOb2RlLmdldCh0aGlzLmVkaXRvciwgbikgOiBuKSBhcyBSaWNoRWxlbWVudDtcbiAgICAgIGlmICghbm9kZUFzUmljaEVsZW1lbnQuY29udGV4dCAmJiAhbm9kZUFzUmljaEVsZW1lbnQuZm9yRWFjaCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwYXRoT2ZOb2RlID0gUGF0aC5pc1BhdGgobikgPyBuIDogUmVhY3RFZGl0b3IuZmluZFBhdGgodGhpcy5lZGl0b3IsIG4pO1xuICAgIHJldHVybiBnZXRDb250ZXh0Rm9yKFxuICAgICAgcGF0aE9mTm9kZSxcbiAgICAgIGxldmVsIHx8IFwiZmluYWxcIixcbiAgICAgIHRoaXMuc3RhdGUudHJlZVZhbHVlLFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRSb290Q29udGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQ7XG4gIH1cblxuICBwdWJsaWMgcmVuZGVyRWxlbWVudChwcm9wczogUmVuZGVyRWxlbWVudFByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxDdXJyZW50RWxlbWVudFJldHJpZXZlclxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIGZuPXt0aGlzLmFjdHVhbGx5UmVuZGVyRWxlbWVudH1cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIHRoZSByZW5kZXIgZWxlbWVudCBmdW5jdGlvbiB0byBiZSB1c2VkIGluIHNsYXRlIGVkaXRvclxuICAgKiBAcGFyYW0gcHJvcHMgdGhlIHByb3BlcnRpZXMgdGhhdCBzbGF0ZSBwcm92aWRlcyB0byByZW5kZXIgdGhlIGNvbXBvbmVudFxuICAgKi9cbiAgcHVibGljIGFjdHVhbGx5UmVuZGVyRWxlbWVudChcbiAgICBwcm9wczogUmVuZGVyRWxlbWVudFByb3BzLFxuICAgIGlzU2VsZWN0ZWQ6IGJvb2xlYW4sXG4gICAgc2VsZWN0aW9uQ3JpdGVyaWE6IFwiYmxvY2tcIiB8IFwic3VwZXJibG9ja1wiIHwgXCJpbmxpbmVcIixcbiAgICBpc1ByaW1hcnk6IGJvb2xlYW4sXG4gICkge1xuICAgIC8vIGZpcnN0IHdlIGV4dHJhY3QgYWxsIHRoZXNlIHN0dWZmc1xuICAgIGNvbnN0IHsgYXR0cmlidXRlcywgY2hpbGRyZW4sIGVsZW1lbnQgfSA9IHByb3BzO1xuXG4gICAgLy8gbGV0J3MgY2hlY2sgZm9yIGEgdWkgaGFuZGxlclxuICAgIGNvbnN0IHVpSGFuZGxlciA9IChlbGVtZW50IGFzIGFueSBhcyBSaWNoRWxlbWVudCkudWlIYW5kbGVyO1xuICAgIGxldCB0b1JldHVybjogUmVhY3QuUmVhY3ROb2RlID0gbnVsbDtcbiAgICBsZXQgd2FzVUlIYW5kbGVkID0gZmFsc2U7XG5cbiAgICAvLyBpZiB3ZSBoYXZlIG9uZVxuICAgIGlmICh1aUhhbmRsZXIpIHtcbiAgICAgIGNvbnN0IGhhbmRsZXJDb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0Rm9yKGVsZW1lbnQgYXMgYW55KTtcblxuICAgICAgLy8gd2UgZXh0cmFjdCB0aGUgYXJndW1lbnRzIGZvciB0aGUgdWkgaGFuZGxlciB0aGF0IGFyZSBpbiB0aGUgcmljaCBlbGVtZW50XG4gICAgICBjb25zdCB1aUhhbmRsZXJBcmdzID0gKGVsZW1lbnQgYXMgYW55IGFzIFJpY2hFbGVtZW50KS51aUhhbmRsZXJBcmdzO1xuXG4gICAgICAvLyBhbmQgbm93IHdlIHRyeSB0byBnZXQgdGhlIHVpIGhhbmRsZXIgZnJvbSB0aGUgY29udGV4dCBpdHNlbGZcbiAgICAgIC8vIGVpdGhlciB0aGUgcm9vdCBvciB0aGUgb25lIGluIHRoZSBwcm9wZXJ0eSBpdHNlbGZcbiAgICAgIGxldCBwcm9wZXJ0aWVzRnJvbUNvbnRleHQ6IElUZW1wbGF0ZUFyZ1VJSGFuZGxlckRlZmluaXRpb24gPVxuICAgICAgICAoaGFuZGxlckNvbnRleHQgJiYgaGFuZGxlckNvbnRleHQucHJvcGVydGllcyAmJiBoYW5kbGVyQ29udGV4dC5wcm9wZXJ0aWVzW3VpSGFuZGxlcl0pIGFzIElUZW1wbGF0ZUFyZ1VJSGFuZGxlckRlZmluaXRpb247XG5cbiAgICAgIGlmICghcHJvcGVydGllc0Zyb21Db250ZXh0KSB7XG4gICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCA9ICh0aGlzLnByb3BzLnJvb3RDb250ZXh0ICYmIHRoaXMucHJvcHMucm9vdENvbnRleHQucHJvcGVydGllc1t1aUhhbmRsZXJdKSBhcyBJVGVtcGxhdGVBcmdVSUhhbmRsZXJEZWZpbml0aW9uO1xuICAgICAgICBpZiAocHJvcGVydGllc0Zyb21Db250ZXh0ICYmIHByb3BlcnRpZXNGcm9tQ29udGV4dC5ub25Sb290SW5oZXJpdGFibGUpIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHdlIGRvbid0IGZpbmQgYSBVSSBoYW5kbGVyXG4gICAgICAvLyBsZXQncyBwdXQgYSBtZXNzYWdlIGFib3V0IGl0XG4gICAgICBpZiAoXG4gICAgICAgIHByb3BlcnRpZXNGcm9tQ29udGV4dCAmJlxuICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQudHlwZSA9PT0gXCJ1aS1oYW5kbGVyXCIgJiZcbiAgICAgICAgcHJvcGVydGllc0Zyb21Db250ZXh0LmVkaXRvckhhbmRsZXJcbiAgICAgICkge1xuICAgICAgICAvLyBub3cgd2UgY2FuIGdldCB0aGUgY29tcG9uZW50LCBleHRyYSBhcmdzIGFuZCB3aGF0bm90XG4gICAgICAgIGNvbnN0IEhhbmRsZXJDb21wb25lbnQgPSBwcm9wZXJ0aWVzRnJvbUNvbnRleHQuZWRpdG9ySGFuZGxlci5Db21wb25lbnQ7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJFeHRyYUFyZ3MgPSBwcm9wZXJ0aWVzRnJvbUNvbnRleHQuZWRpdG9ySGFuZGxlci5leHRyYUFyZ3M7XG4gICAgICAgIGNvbnN0IHBhc3NFeHRyYUluZm8gPSBwcm9wZXJ0aWVzRnJvbUNvbnRleHQuZWRpdG9ySGFuZGxlci5wYXNzU2xhdGVJbmZvO1xuXG4gICAgICAgIC8vIHRoZSBleHRyYSBpbmZvIHRoYXQgc2hvdWxkIGJlIHBhc3NlZCBpZiBuZWNlc3NhcnlcbiAgICAgICAgY29uc3QgZXh0cmFJbmZvID0gcGFzc0V4dHJhSW5mbyA/XG4gICAgICAgICAge1xuICAgICAgICAgICAgaGVscGVyczogdGhpcy5nZXRIZWxwZXJzKCksXG4gICAgICAgICAgICBzZWxlY3RlZDogaXNTZWxlY3RlZCAmJiBpc1ByaW1hcnksXG4gICAgICAgICAgfSA6IHt9O1xuXG4gICAgICAgIGxldCBjbGFzc05hbWU6IHN0cmluZyA9IG51bGw7XG4gICAgICAgIChlbGVtZW50IGFzIGFueSBhcyBSaWNoRWxlbWVudCkucmljaENsYXNzTGlzdCAmJiAoZWxlbWVudCBhcyBhbnkgYXMgUmljaEVsZW1lbnQpLnJpY2hDbGFzc0xpc3QuZm9yRWFjaCgoYykgPT4ge1xuICAgICAgICAgIGNsYXNzTmFtZSA9IChjbGFzc05hbWUgfHwgXCJcIikgKyBcIiByaWNoLXRleHQtLVwiICsgYztcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gY29udmVydFN0eWxlU3RyaW5nVG9SZWFjdE9iamVjdCgoZWxlbWVudCBhcyBhbnkgYXMgUmljaEVsZW1lbnQpLnN0eWxlKTtcbiAgICAgICAgY29uc3Qgc3R5bGVBY3RpdmUgPSBjb252ZXJ0U3R5bGVTdHJpbmdUb1JlYWN0T2JqZWN0KChlbGVtZW50IGFzIGFueSBhcyBSaWNoRWxlbWVudCkuc3R5bGVBY3RpdmUpO1xuICAgICAgICBjb25zdCBzdHlsZUhvdmVyID0gY29udmVydFN0eWxlU3RyaW5nVG9SZWFjdE9iamVjdCgoZWxlbWVudCBhcyBhbnkgYXMgUmljaEVsZW1lbnQpLnN0eWxlSG92ZXIpO1xuXG4gICAgICAgIC8vIG5vdyB3ZSBjYW4gdXNlIHRoZSBoYW5kbGVyIGNvbXBvbmVudCB0aGF0IGlzIGdpdmVuIHZpYSB0aGUgdWkgaGFuZGxlclxuICAgICAgICB0b1JldHVybiA9IDxIYW5kbGVyQ29tcG9uZW50XG4gICAgICAgICAgYXJncz17e1xuICAgICAgICAgICAgLi4udWlIYW5kbGVyQXJncyxcbiAgICAgICAgICAgIC4uLmhhbmRsZXJFeHRyYUFyZ3MsXG4gICAgICAgICAgfSBhcyBhbnl9XG4gICAgICAgICAgaXNTbGF0ZT17dHJ1ZX1cbiAgICAgICAgICBhdHRyaWJ1dGVzPXthdHRyaWJ1dGVzfVxuICAgICAgICAgIGVsZW1lbnQ9e2VsZW1lbnQgYXMgYW55fVxuICAgICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgICBzdHlsZUFjdGl2ZT17c3R5bGVBY3RpdmV9XG4gICAgICAgICAgc3R5bGVIb3Zlcj17c3R5bGVIb3Zlcn1cbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgICBldmVudHM9e251bGx9XG4gICAgICAgICAgey4uLmV4dHJhSW5mb31cbiAgICAgICAgPlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9IYW5kbGVyQ29tcG9uZW50PjtcblxuICAgICAgICBjb25zdCBjb250ZXh0U3dpY2hDb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0Rm9yKGVsZW1lbnQgYXMgYW55LCBcImZpbmFsXCIsIHRydWUpO1xuXG4gICAgICAgIC8vIGlmIHdlIGFyZSBpbiBhIHVpIGhhbmRsZXIgdGhhdCBpcyBjdXJyZW50bHkgbG9vcGluZ1xuICAgICAgICAvLyBhcyB3ZSBoYXZlIGVudGVyZWQgYSBsb29wYWJsZSBjb250ZXh0XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0ICYmXG4gICAgICAgICAgY29udGV4dFN3aWNoQ29udGV4dC5sb29wYWJsZSAmJlxuICAgICAgICAgIGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncyAmJlxuICAgICAgICAgIGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy5sb29wRW11bGF0aW9uICYmXG4gICAgICAgICAgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLmxvb3BFbXVsYXRpb24gPj0gMVxuICAgICAgICApIHtcbiAgICAgICAgICAvLyBhbmQgbm93IHdlIGhhdmUgZW50ZXJlZCBsb29wIGVtdWxhdGlvblxuICAgICAgICAgIGNvbnN0IGFycjogUmVhY3QuUmVhY3ROb2RlW10gPSBbXTtcbiAgICAgICAgICAvLyB3ZSBhcmUgZ29pbmcgdG8gdXNlIHRoZSB3cmFwcGVyIGluIGVhY2ggY2FzZSB0byBjaGFuZ2UgdGhlIGNvbnRleHRcbiAgICAgICAgICAvLyB3aGljaCBob3BlZnVsbHkgd2lsbCBjaGFuZ2UgdGhpbmdzIGRvd24gdGhlIGxpbmVcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy5sb29wRW11bGF0aW9uOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZERpc2FibGVFbGVtZW50V3JhcHBlcnMgPSBpICE9PSBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3MubG9vcEVtdWxhdGlvbiAtIDE7XG4gICAgICAgICAgICBpZiAoY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIpIHtcbiAgICAgICAgICAgICAgaWYgKHNob3VsZERpc2FibGVFbGVtZW50V3JhcHBlcnMpIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaChcbiAgICAgICAgICAgICAgICAgIDxFbGVtZW50V3JhcHBlckRpc2FibGVyLlByb3ZpZGVyIHZhbHVlPXt0cnVlfSBrZXk9e2l9PlxuICAgICAgICAgICAgICAgICAgICB7Y29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIodG9SZXR1cm4sIGkpfVxuICAgICAgICAgICAgICAgICAgPC9FbGVtZW50V3JhcHBlckRpc2FibGVyLlByb3ZpZGVyPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goPFJlYWN0LkZyYWdtZW50IGtleT17aX0+e2NvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy53cmFwcGVyKHRvUmV0dXJuLCBpKX08L1JlYWN0LkZyYWdtZW50Pik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChzaG91bGREaXNhYmxlRWxlbWVudFdyYXBwZXJzKSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goXG4gICAgICAgICAgICAgICAgICA8RWxlbWVudFdyYXBwZXJEaXNhYmxlci5Qcm92aWRlciB2YWx1ZT17dHJ1ZX0ga2V5PXtpfT5cbiAgICAgICAgICAgICAgICAgICAge3RvUmV0dXJufVxuICAgICAgICAgICAgICAgICAgPC9FbGVtZW50V3JhcHBlckRpc2FibGVyLlByb3ZpZGVyPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goPFJlYWN0LkZyYWdtZW50IGtleT17aX0+e3RvUmV0dXJufTwvUmVhY3QuRnJhZ21lbnQ+KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0b1JldHVybiA9IGFycjtcbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0U3dpY2hDb250ZXh0ICYmIGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncyAmJiBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3Mud3JhcHBlcikge1xuICAgICAgICAgIC8vIG90aGVyd2lzZSBpZiB3ZSBnb3QgYSBzdGFuZGFyZCBjb250ZXh0LCB3aXRoIGEgd3JhcHBlciwgdGhlbiB3ZSB1c2UgaXRcbiAgICAgICAgICB0b1JldHVybiA9IGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy53cmFwcGVyKHRvUmV0dXJuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdhc1VJSGFuZGxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF3YXNVSUhhbmRsZWQpIHtcbiAgICAgIGNvbnN0IGN1c3RvbVByb3BzOiBhbnkgPSB7IC4uLmF0dHJpYnV0ZXMsIGNoaWxkcmVuIH07XG5cbiAgICAgIGNvbnN0IGh0bWwgPSAoZWxlbWVudCBhcyBhbnkgYXMgUmljaEVsZW1lbnQpLmh0bWw7XG4gICAgICBpZiAodHlwZW9mIGh0bWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgaHRtbENvbnRleHQgPSB0aGlzLmdldENvbnRleHRGb3IoZWxlbWVudCBhcyBhbnkpO1xuICAgICAgICBsZXQgcHJvcGVydGllc0Zyb21Db250ZXh0OiBJVGVtcGxhdGVBcmdIVE1MRGVmaW5pdGlvbiA9IGh0bWxDb250ZXh0ICYmIGh0bWxDb250ZXh0LnByb3BlcnRpZXMgJiYgaHRtbENvbnRleHQucHJvcGVydGllc1todG1sXSBhcyBJVGVtcGxhdGVBcmdIVE1MRGVmaW5pdGlvbjtcbiAgICAgICAgaWYgKCFwcm9wZXJ0aWVzRnJvbUNvbnRleHQpIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQgPSB0aGlzLnByb3BzLnJvb3RDb250ZXh0ICYmIHRoaXMucHJvcHMucm9vdENvbnRleHQucHJvcGVydGllcyAmJiB0aGlzLnByb3BzLnJvb3RDb250ZXh0LnByb3BlcnRpZXNbaHRtbF0gYXMgSVRlbXBsYXRlQXJnSFRNTERlZmluaXRpb247XG4gICAgICAgICAgaWYgKHByb3BlcnRpZXNGcm9tQ29udGV4dCAmJiBwcm9wZXJ0aWVzRnJvbUNvbnRleHQubm9uUm9vdEluaGVyaXRhYmxlKSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9wZXJ0aWVzRnJvbUNvbnRleHQgJiYgcHJvcGVydGllc0Zyb21Db250ZXh0LnR5cGUgPT09IFwiaHRtbFwiICYmIHR5cGVvZiBwcm9wZXJ0aWVzRnJvbUNvbnRleHQuZWRpdG9yRGlzcGxheSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IHRvRGlzcGxheSA9IHByb3BlcnRpZXNGcm9tQ29udGV4dC5lZGl0b3JEaXNwbGF5O1xuICAgICAgICAgIGlmICh0eXBlb2YgdG9EaXNwbGF5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBjdXN0b21Qcm9wcy5jaGlsZHJlbiA9IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNvbnRlbnRFZGl0YWJsZT17ZmFsc2V9IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7IF9faHRtbDogdG9EaXNwbGF5IH19IHN0eWxlPXt7IGRpc3BsYXk6IFwiY29udGVudHNcIiB9fSAvPlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdXN0b21Qcm9wcy5jaGlsZHJlbiA9IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNvbnRlbnRFZGl0YWJsZT17ZmFsc2V9IHN0eWxlPXt7IGRpc3BsYXk6IFwiY29udGVudHNcIiB9fT5cbiAgICAgICAgICAgICAgICAgIHt0b0Rpc3BsYXl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1c3RvbVByb3BzLmNoaWxkcmVuID0gKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgeyhwcm9wZXJ0aWVzRnJvbUNvbnRleHQgJiYgcHJvcGVydGllc0Zyb21Db250ZXh0LmxhYmVsKSB8fCAoZWxlbWVudCBhcyBhbnkpLmNoaWxkcmVuWzBdLnRleHR9XG4gICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdGV4dCA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICBpZiAodHlwZW9mIHRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgdGV4dENvbnRleHQgPSB0aGlzLmdldENvbnRleHRGb3IoZWxlbWVudCBhcyBhbnkpO1xuICAgICAgICBsZXQgcHJvcGVydGllc0Zyb21Db250ZXh0OiBJVGVtcGxhdGVBcmdUZXh0RGVmaW5pdGlvbiA9IHRleHRDb250ZXh0ICYmXG4gICAgICAgICAgdGV4dENvbnRleHQucHJvcGVydGllcyAmJlxuICAgICAgICAgIHRleHRDb250ZXh0LnByb3BlcnRpZXNbdGV4dF0gYXMgSVRlbXBsYXRlQXJnVGV4dERlZmluaXRpb247XG4gICAgICAgIGlmICghcHJvcGVydGllc0Zyb21Db250ZXh0KSB7XG4gICAgICAgICAgcHJvcGVydGllc0Zyb21Db250ZXh0ID0gdGhpcy5wcm9wcy5yb290Q29udGV4dCAmJlxuICAgICAgICAgICAgdGhpcy5wcm9wcy5yb290Q29udGV4dC5wcm9wZXJ0aWVzICYmXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJvb3RDb250ZXh0LnByb3BlcnRpZXNbdGV4dF0gYXMgSVRlbXBsYXRlQXJnVGV4dERlZmluaXRpb247XG4gICAgICAgICAgaWYgKHByb3BlcnRpZXNGcm9tQ29udGV4dCAmJiBwcm9wZXJ0aWVzRnJvbUNvbnRleHQubm9uUm9vdEluaGVyaXRhYmxlKSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGN1c3RvbVByb3BzLmNoaWxkcmVuID0gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICB7KFxuICAgICAgICAgICAgICBwcm9wZXJ0aWVzRnJvbUNvbnRleHQgJiZcbiAgICAgICAgICAgICAgcHJvcGVydGllc0Zyb21Db250ZXh0LnR5cGUgPT09IFwidGV4dFwiICYmXG4gICAgICAgICAgICAgIChwcm9wZXJ0aWVzRnJvbUNvbnRleHQuZWRpdG9yRGlzcGxheSB8fCBwcm9wZXJ0aWVzRnJvbUNvbnRleHQubGFiZWwpXG4gICAgICAgICAgICApIHx8IChlbGVtZW50IGFzIGFueSkuY2hpbGRyZW5bMF0udGV4dH1cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gYW5kIG5vdyB3ZSBjYWxsIHRoZSByZWFjdGlmaWNhdGlvblxuICAgICAgdG9SZXR1cm4gPSBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLlJFQUNUSUZZW2VsZW1lbnQudHlwZSBhcyBzdHJpbmddKHtcbiAgICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgc2VsZWN0ZWQ6IGlzU2VsZWN0ZWQgJiYgaXNQcmltYXJ5LFxuICAgICAgICBlbGVtZW50OiBlbGVtZW50IGFzIGFueSxcbiAgICAgICAgYXNUZW1wbGF0ZTogZmFsc2UsXG4gICAgICAgIGN1c3RvbVByb3BzLFxuXG4gICAgICAgIC8vIHdlIGRvbid0IGNhcmUgYXMgd2UgYXJlIG5vdCB1c2luZyB0aGUgb25DdXN0b20gZnVuY3Rpb25cbiAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICB0cmVlOiBudWxsLFxuICAgICAgfSkgYXMgYW55O1xuXG4gICAgICBjb25zdCBjb250ZXh0U3dpY2hDb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0Rm9yKGVsZW1lbnQgYXMgYW55LCBcImZpbmFsXCIsIHRydWUpO1xuXG4gICAgICAvLyBpZiB3ZSBmaW5kIG91cnNlbHZlcyBpbiBhIGxvb3BhYmxlIGNvbnRleHQgYXMgd2UgYXJlIGN1cnJlbnRseSBsb29waW5nXG4gICAgICBpZiAoXG4gICAgICAgIGNvbnRleHRTd2ljaENvbnRleHQgJiZcbiAgICAgICAgY29udGV4dFN3aWNoQ29udGV4dC5sb29wYWJsZSAmJlxuICAgICAgICBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3MgJiZcbiAgICAgICAgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLmxvb3BFbXVsYXRpb24gJiZcbiAgICAgICAgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLmxvb3BFbXVsYXRpb24gPj0gMVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGFycjogUmVhY3QuUmVhY3ROb2RlW10gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250ZXh0U3dpY2hDb250ZXh0LmVkaXRvckFyZ3MubG9vcEVtdWxhdGlvbjsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qgc2hvdWxkRGlzYWJsZUVsZW1lbnRXcmFwcGVycyA9IGkgIT09IGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy5sb29wRW11bGF0aW9uIC0gMTtcbiAgICAgICAgICBpZiAoY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIpIHtcbiAgICAgICAgICAgIGlmIChzaG91bGREaXNhYmxlRWxlbWVudFdyYXBwZXJzKSB7XG4gICAgICAgICAgICAgIGFyci5wdXNoKFxuICAgICAgICAgICAgICAgIDxFbGVtZW50V3JhcHBlckRpc2FibGVyLlByb3ZpZGVyIHZhbHVlPXt0cnVlfSBrZXk9e2l9PlxuICAgICAgICAgICAgICAgICAge2NvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy53cmFwcGVyKHRvUmV0dXJuLCBpKX1cbiAgICAgICAgICAgICAgICA8L0VsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXI+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhcnIucHVzaCg8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT57Y29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIodG9SZXR1cm4sIGkpfTwvUmVhY3QuRnJhZ21lbnQ+KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNob3VsZERpc2FibGVFbGVtZW50V3JhcHBlcnMpIHtcbiAgICAgICAgICAgICAgYXJyLnB1c2goXG4gICAgICAgICAgICAgICAgPEVsZW1lbnRXcmFwcGVyRGlzYWJsZXIuUHJvdmlkZXIgdmFsdWU9e3RydWV9IGtleT17aX0+XG4gICAgICAgICAgICAgICAgICB7dG9SZXR1cm59XG4gICAgICAgICAgICAgICAgPC9FbGVtZW50V3JhcHBlckRpc2FibGVyLlByb3ZpZGVyPlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXJyLnB1c2goPFJlYWN0LkZyYWdtZW50IGtleT17aX0+e3RvUmV0dXJufTwvUmVhY3QuRnJhZ21lbnQ+KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdG9SZXR1cm4gPSBhcnI7XG4gICAgICB9IGVsc2UgaWYgKGNvbnRleHRTd2ljaENvbnRleHQgJiYgY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzICYmIGNvbnRleHRTd2ljaENvbnRleHQuZWRpdG9yQXJncy53cmFwcGVyKSB7XG4gICAgICAgIHRvUmV0dXJuID0gY29udGV4dFN3aWNoQ29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIodG9SZXR1cm4pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzICYmXG4gICAgICAoXG4gICAgICAgIChcbiAgICAgICAgICAhd2FzVUlIYW5kbGVkICYmXG4gICAgICAgICAgdGhpcy5wcm9wcy5lbGVtZW50V3JhcHBlcnMuY29tcG9uZW50cyAmJlxuICAgICAgICAgIHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzLmNvbXBvbmVudHNbZWxlbWVudC50eXBlXVxuICAgICAgICApIHx8IChcbiAgICAgICAgICB0aGlzLnByb3BzLmVsZW1lbnRXcmFwcGVycy51aUhhbmRsZXIgJiZcbiAgICAgICAgICB0aGlzLnByb3BzLmVsZW1lbnRXcmFwcGVycy51aUhhbmRsZXJbZWxlbWVudC51aUhhbmRsZXJdXG4gICAgICAgIClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIGNvbnN0IEVsZW1lbnRXcmFwcGVyID1cbiAgICAgICAgKFxuICAgICAgICAgIHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzLnVpSGFuZGxlciAmJlxuICAgICAgICAgIHRoaXMucHJvcHMuZWxlbWVudFdyYXBwZXJzLnVpSGFuZGxlcltlbGVtZW50LnVpSGFuZGxlcl1cbiAgICAgICAgKSB8fCB0aGlzLnByb3BzLmVsZW1lbnRXcmFwcGVycy5jb21wb25lbnRzW2VsZW1lbnQudHlwZV07XG5cbiAgICAgIGlmIChFbGVtZW50V3JhcHBlcikge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxFbGVtZW50V3JhcHBlckRpc2FibGVyLkNvbnN1bWVyPlxuICAgICAgICAgICAgeyhkaXNhYmxlZCkgPT4gKFxuICAgICAgICAgICAgICBkaXNhYmxlZCA/IHRvUmV0dXJuIDogKFxuICAgICAgICAgICAgICAgIDxFbGVtZW50V3JhcHBlclxuICAgICAgICAgICAgICAgICAgZWxlbWVudD17ZWxlbWVudH1cbiAgICAgICAgICAgICAgICAgIGhlbHBlcnM9e3RoaXMuZ2V0SGVscGVycygpfVxuICAgICAgICAgICAgICAgICAgcHJpbWFyeVNlbGVjdGlvbj17aXNQcmltYXJ5fVxuICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZD17aXNTZWxlY3RlZH1cbiAgICAgICAgICAgICAgICAgIGZlYXR1cmVTdXBwb3J0PXt0aGlzLmdldEZlYXR1cmVTdXBwb3J0KCl9XG4gICAgICAgICAgICAgICAgICBiYXNlSTE4bj17dGhpcy5wcm9wcy5iYXNlSTE4bn1cbiAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmVsZW1lbnRXcmFwcGVyc0FyZ3N9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge3RvUmV0dXJufVxuICAgICAgICAgICAgICAgIDwvRWxlbWVudFdyYXBwZXI+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9FbGVtZW50V3JhcHBlckRpc2FibGVyLkNvbnN1bWVyPlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0b1JldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiB0aGUgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgYnkgc2xhdGUgdG8gcmVuZGVyIHRleHRcbiAgICogQHBhcmFtIHByb3BzIHRoZSBwcm9wZXJ0aWVzIGdpdmVuIGJ5IHNsYXRlIHRvIHJlbmRlciBhIHRleHQgbGVhZlxuICAgKi9cbiAgcHVibGljIHJlbmRlclRleHQocHJvcHM6IFJlbmRlckxlYWZQcm9wcykge1xuICAgIC8vIGZpcnN0IHdlIGV4dHJhY3QgdGhlIGF0dHJpYnV0ZXNcbiAgICBjb25zdCB7IGF0dHJpYnV0ZXMsIGNoaWxkcmVuLCBsZWFmIH0gPSBwcm9wcztcblxuICAgIC8vIG5vdyB3ZSB1c2UgdGhlIHNlcmlhbGl6YXRpb24gcmVnaXN0cnkgaW4gb3JkZXJcbiAgICAvLyB0byBtYWtlIHRoZSBjYWxsc1xuICAgIHJldHVybiBTRVJJQUxJWkFUSU9OX1JFR0lTVFJZLlJFQUNUSUZZLnRleHQoe1xuICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgIGVsZW1lbnQ6IGxlYWYgYXMgYW55LFxuICAgICAgYXNUZW1wbGF0ZTogZmFsc2UsXG4gICAgICBjdXN0b21Qcm9wczogeyAuLi5hdHRyaWJ1dGVzLCBjaGlsZHJlbiB9LFxuXG4gICAgICAvLyB3ZSBkb24ndCBjYXJlIGFzIHdlIGFyZSBub3QgdXNpbmcgdGhlIG9uQ3VzdG9tIGZ1bmN0aW9uXG4gICAgICAvLyB0aGlzIHdpbGwgcHJldmVudCBub3JtYWxpemF0aW9uIGJ1dCB0aGF0J3MgZmluZVxuICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgdHJlZTogbnVsbCxcbiAgICB9KSBhcyBhbnk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNoYW5nZSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB2aWEgc2xhdGUgd2hlbiBhIGNoYW5nZSBvY2N1cnNcbiAgICogdGhpcyBmdW5jdGlvbiBoaXRzIGV2ZXJ5IHRpbWUgb24gZXZlcnkgY2hhbmdlIG9mIHRoZSByaWNoIHRleHRcbiAgICogQHBhcmFtIG5ld1ZhbHVlIHRoZSBuZXcgdmFsdWUgb2YgdGhlIGNoaWxkcmVuIG9mIHRoZSBkb2N1bWVudFxuICAgKi9cbiAgcHVibGljIG9uQ2hhbmdlKG5ld1ZhbHVlOiBOb2RlW10pIHtcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGlmIHRoZXJlJ3MgYSBzZWxlY3Rpb25cbiAgICBpZiAodGhpcy5lZGl0b3Iuc2VsZWN0aW9uICYmIFJlYWN0RWRpdG9yLmlzRm9jdXNlZCh0aGlzLmVkaXRvcikpIHtcbiAgICAgIC8vIHdlIGFyZSBvbiBmb2N1c1xuICAgICAgdGhpcy5vbkZvY3VzZWRDaGFuZ2UodGhpcy5lZGl0b3Iuc2VsZWN0aW9uLmFuY2hvci5wYXRoLCBuZXdWYWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBhcmUgYmx1cnJlZFxuICAgICAgdGhpcy5vbkJsdXJyZWRDaGFuZ2UobmV3VmFsdWUpO1xuICAgIH1cblxuICAgIC8vIGFsd2F5cyByZW1hcmsgdGhlIGZsYWcgYXMgZmFsc2UgYXMgdGhpcyBjaGFuZ2UgaXMgYSBub3JtYWwgY2hhbmdlXG4gICAgdGhpcy5sYXN0Q2hhbmdlV2FzU2VsZWN0ZWREZWxldGUgPSBmYWxzZTtcblxuICAgIC8vIGFuZCBpZiB0aGUgbmV3IHZhbHVlIGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgb2xkIGNoaWxkcmVuIG9mIHRoZSBkb2N1bWVudFxuICAgIC8vIGFzIHRoZXNlIHZhbHVlcyBhcmUgaW1tdXRhYmxlIGFuZCB3ZSBqdXN0IG92ZXJyaWRlIHRoZW1cbiAgICAvLyBOT1cgaXQgbWF0dGVycyBhcyBzbGF0ZSBkaWQgYSB3ZWlyZCB1cGRhdGUgd2hlcmUgaXQgY2hhbmdlcyB0aGUgaW1tdXRhYmxlXG4gICAgLy8gc3RhdGUgYmVjYXVzZSBub3cgdGhlIHN0YXRlIGlzIG11dGFibGVcbiAgICAvL2lmIChuZXdWYWx1ZSAhPT0gdGhpcy5zdGF0ZS50cmVlVmFsdWUuY2hpbGRyZW4gYXMgYW55KSB7XG4gICAgLy8gd2UgdXBkYXRlLCB0aGUgcmVhc29uIHRoZSB2YWx1ZSBtaWdodCBiZSBlcXVhbCBpcyBiZWNhdXNlIHRoZSBjaGFuZ2VcbiAgICAvLyB0cmlnZ2VycyBmb3IgY2hhbmdlcyBpbiB0aGUgc2VsZWN0aW9uXG4gICAgdGhpcy5zZXRWYWx1ZShuZXdWYWx1ZSk7XG4gICAgLy99XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSBoYXJkIGJsdXIgZXZlbnQgYW5kIHRoZSBwYXRocyBhcmUgY2xlYXJlZCBvdXRcbiAgICovXG4gIHB1YmxpYyBoYXJkQmx1cigpIHtcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkVGV4dDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQ6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHM6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnM6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRJbmxpbmVDb250ZXh0OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0OiBudWxsLFxuICAgICAgY3VycmVudFNlbGVjdGVkRWxlbWVudDogbnVsbCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3I6IG51bGwsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRFbGVtZW50Q29udGV4dDogbnVsbCxcbiAgICAgIHByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yOiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgICBwcmV2aW91c1RleHRBbmNob3I6IHRoaXMuc3RhdGUuY3VycmVudFRleHRBbmNob3IsXG4gICAgfSk7XG4gICAgVHJhbnNmb3Jtcy5kZXNlbGVjdCh0aGlzLmVkaXRvcik7XG4gICAgUmVhY3RFZGl0b3IuYmx1cih0aGlzLmVkaXRvcik7XG4gIH1cblxuICBwdWJsaWMgc2VsZWN0aXZlSGFyZEJsdXJJZkhhc1NlbGVjdGVkRWxlbWVudChlOiBLZXlib2FyZEV2ZW50LCBlbGU6IEhUTUxFbGVtZW50KSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCkge1xuICAgICAgaWYgKGVsZSAmJiB0aGlzLndyYXBwZXJSZWY/LmN1cnJlbnQ/LnNlbGVjdGl2ZUhhcmRCbHVyKSB7XG4gICAgICAgIHRoaXMud3JhcHBlclJlZj8uY3VycmVudD8uc2VsZWN0aXZlSGFyZEJsdXIoZSwgZWxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGFyZEJsdXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSBzb2Z0IGJsdXIgZXZlbnRcbiAgICovXG4gIHB1YmxpYyBzb2Z0Qmx1cigpIHtcbiAgICBSZWFjdEVkaXRvci5ibHVyKHRoaXMuZWRpdG9yKTtcbiAgICBUcmFuc2Zvcm1zLmRlc2VsZWN0KHRoaXMuZWRpdG9yKTtcbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVQYXRoKHA6IFBhdGgpIHtcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yO1xuXG4gICAgaWYgKFxuICAgICAgUGF0aC5lcXVhbHMocCwgY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcikgfHxcbiAgICAgIFBhdGguaXNBbmNlc3RvcihwLCBjdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yKVxuICAgICkge1xuICAgICAgdGhpcy5sYXN0Q2hhbmdlV2FzU2VsZWN0ZWREZWxldGUgPSB0cnVlO1xuICAgIH1cblxuICAgIFRyYW5zZm9ybXMuZGVsZXRlKHRoaXMuZWRpdG9yLCB7XG4gICAgICBhdDogcCxcbiAgICB9KTtcblxuICAgIC8vIGFuZCBub3cgd2UgY2FuIHJlZm9jdXNcbiAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50VGV4dCkge1xuICAgICAgLy8gbm93IHdlIG5lZWQgdG8gcmVmb2N1c1xuICAgICAgUmVhY3RFZGl0b3IuZm9jdXModGhpcy5lZGl0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBSZWFjdEVkaXRvci5ibHVyKHRoaXMuZWRpdG9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZ2l2ZW4gYSBub2RlIHBhdGgsIHRoYXQgc2hvdWxkIHJlcHJlc2VudCBlaXRoZXIgYW4gZWxlbWVudCBvciBhIHRleHQgbm9kZVxuICAgKiB0aGlzIGFsbG93cyBzdWNoIGEgcGF0aCB0byBiZSBzZWxlY3RlZCBhbmQgYmUgbWFya2VkIGludG8gdGhlIHNlbGVjdGlvblxuICAgKiBAcGFyYW0gcCB0aGUgcGF0aCB0byBzZWxlY3RcbiAgICovXG4gIHB1YmxpYyBzZWxlY3RQYXRoKHA6IFBhdGgpIHtcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIG5vdyB3ZSBjYW4gdXBkYXRlIHRoZSBzdGF0ZVxuICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICB0aGlzLmNhbGN1bGF0ZUFuY2hvcnMoXG4gICAgICAgIHRoaXMuZWRpdG9yLnNlbGVjdGlvbiAmJiB0aGlzLmVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLnBhdGgsXG4gICAgICAgIHRoaXMuc3RhdGUudHJlZVZhbHVlLmNoaWxkcmVuIGFzIGFueSxcbiAgICAgICAgcCxcbiAgICAgICksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvd3MgdG8gbW92ZSBiZXR3ZWVuIHR3byBwYXRocyBhcyBpdCBtb3ZlcyBlbGVtZW50cyB0byBvbmUgcGxhY2UgdG8gYW5vdGhlclxuICAgKiBAcGFyYW0gcCB0aGUgcGF0aCB0byBzZWxlY3RcbiAgICovXG4gIHB1YmxpYyBtb3ZlUGF0aHMoZnJvbTogUGF0aCwgdG86IFBhdGgpIHtcbiAgICBpZiAodGhpcy5pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGVkRWxlbWVudCA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudDtcblxuICAgIC8vIGR1ZSB0byBhIGJ1ZyBpbiB0aGUgd2F5IHRoZSBub2RlcyBhcmUgbW92ZWQgYWN0dWFsbHlcbiAgICAvLyBpdCBoYXMgdG8gYmUgZG9uZSB0aGlzIHdheSBzbyBmaXJzdCB3ZSBuZWVkIHRvIGZpbmRcbiAgICAvLyBpZiB3ZSBhcmUganVzdCBzb3J0aW5nLCBzb3J0aW5nIGluIHRoZSBzYW1lIGxldmVsXG4gICAgY29uc3QgdG9Dcm9wcGVkID0gWy4uLnRvXTtcbiAgICBjb25zdCB0b0xhc3QgPSB0b0Nyb3BwZWQucG9wKCk7XG5cbiAgICBjb25zdCBmcm9tQ3JvcHBlZCA9IFsuLi5mcm9tXTtcbiAgICBjb25zdCBmcm9tTGFzdCA9IGZyb21Dcm9wcGVkLnBvcCgpO1xuXG4gICAgLy8gdGhpcyB3aWxsIHdvcmsgYXMgd2hlcmUgd2UgYXJlIGFjdHVhbGx5IG1vdmluZyB0b1xuICAgIGNvbnN0IGFjdHVhbFRvID0gWy4uLnRvXTtcblxuICAgIC8vIGlmIHdlIGFyZSBhdCB0aGUgc2FtZSBsZXZlbCwgYW5kIHdlIGFyZSBtb3ZpbmcgdW5kZXIgb3VyIGZyb21cbiAgICBpZiAoUGF0aC5lcXVhbHMoZnJvbUNyb3BwZWQsIHRvQ3JvcHBlZCkgJiYgdG9MYXN0ID4gZnJvbUxhc3QpIHtcbiAgICAgIC8vIHRoZW4gd2Ugc3Vic3RyYWN0IG9uZVxuICAgICAgYWN0dWFsVG9bYWN0dWFsVG8ubGVuZ3RoIC0gMV0tLTtcbiAgICB9XG5cbiAgICAvLyB0aGUgcmVhc29uIHdlIGRvIHRoYXQgaXMgYmVjYXVzZSBmb3Igc29tZSB3ZWlyZCBtZXNzZWQgdXAgcmVhc29uIHNsYXRlXG4gICAgLy8gaXMgZ29pbmcgdG8gbW92ZSB0aGluZ3MgYXQgdGhlIHNhbWUgbGV2ZWwgb25lIHBvc2l0aW9uIGZ1cnRoZXIgYmVjYXVzZVxuICAgIC8vIHdlIGFyZSB0YWtpbmcgb25lIGVsZW1lbnQgYXdheSAoaXQgZG9lcyB0aGF0KSBhbmQgdGhlbiBpdCBtb3ZlcyBpdCB0byB0aGUgd3JvbmdcbiAgICAvLyBwbGFjZSBvbmUgZnVydGhlciBiZWNhdXNlIHRoZW4gaXQgaXMgbm90IHRoZXJlIGFueW1vcmUsIHdlaXJkbHkgdGhpcyBkb2Vzbid0XG4gICAgLy8gaGFwcGVuIHdoZW4gdGhlcmUgYXJlIG1hbnkgbGV2ZWxzIGludm9sdmVkXG5cbiAgICAvLyBhbmQgd2UgY2FuIG1vdmUgaXQgbm93XG4gICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoXG4gICAgICB0aGlzLmVkaXRvcixcbiAgICAgIHtcbiAgICAgICAgYXQ6IGZyb20sXG4gICAgICAgIHRvOiBhY3R1YWxUbyxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBhbmQgbm93IHdlIG5lZWQgdG8gZmluZCBvdXQgdGhlIHBhdGggdG8gc2VsZWN0XG4gICAgICBjb25zdCBuZXdTZWxlY3RlZEFuY2hvciA9IHNlbGVjdGVkRWxlbWVudCA/IFJlYWN0RWRpdG9yLmZpbmRQYXRoKHRoaXMuZWRpdG9yLCBzZWxlY3RlZEVsZW1lbnQpIDogbnVsbDtcbiAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5jYWxjdWxhdGVBbmNob3JzKHRoaXMuZWRpdG9yLnNlbGVjdGlvbiAmJiB0aGlzLmVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLnBhdGgsIG51bGwsIG5ld1NlbGVjdGVkQW5jaG9yKSlcbiAgICB9LCAwKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRQcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5wcmV2aW91c1NlbGVjdGVkRWxlbWVudEFuY2hvcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRQcmV2aW91c1RleHRBbmNob3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUucHJldmlvdXNUZXh0QW5jaG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgdGhlIHNlbGVjdGVkIG5vZGUgdGhhdCBoYXMgYmVlbiBzZWxlY3RlZCwgZWl0aGVyIHRoZSBjdXJyZW50IGRlZmF1bHRcbiAgICogb3Igb25lIHRoYXQgaGFzIGJlZW4gbWFudWFsbHkgc2VsZWN0ZWQgdXNpbmcgc2VsZWN0UGF0aFxuICAgKi9cbiAgcHVibGljIGRlbGV0ZVNlbGVjdGVkTm9kZSgpIHtcbiAgICAvLyBmaXJzdCB3ZSBtYXJrIHRvIHNheSB0aGF0IHRoZSBsYXN0IHdhcyBzZWxlY3RlZCBkZWxldGUsIHJlbWVtYmVyIGFzIGRlZmluZWRcbiAgICAvLyB0aGlzIGlzIHVzZWQgYmVjYXVzZSBkdXJpbmcgdGhlIG5vcm1hbGl6YXRpb24gdGhlIGFuY2hvcnMgbWlnaHQgY29ycnVwdCBkdXJpbmcgdGhlXG4gICAgLy8gY2FsbCB0byBvbmNoYW5nZSBhcyB0aGUgc2VsZWN0ZWQgYW5jaG9ycyBhcmUgbm93IG1lc3NlZCB1cCwgc28gdGhpcyBmbGFnXG4gICAgLy8gZW5zdXJlcyB0byBjbGVhciB1cCB0aGUgYW5jaG9ycyBqdXN0IGFmdGVyIHRoZSB0cmFuc2Zvcm1cbiAgICB0aGlzLmxhc3RDaGFuZ2VXYXNTZWxlY3RlZERlbGV0ZSA9IHRydWU7XG5cbiAgICBjb25zdCBzZWxlY3RlZEVsZW1lbnRBbmNob3IgPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3I7XG5cbiAgICAvLyBzbyB3ZSBkZWxldGUgd2hpY2ggd2lsbCBjYWxsIG9uY2hhbmdlIGFuZCBub3JtYWxpemF0aW9uXG4gICAgVHJhbnNmb3Jtcy5kZWxldGUodGhpcy5lZGl0b3IsIHtcbiAgICAgIGF0OiBzZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgfSk7XG5cbiAgICAvLyBhbmQgbm93IHdlIGNhbiByZWZvY3VzXG4gICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFRleHQpIHtcbiAgICAgIC8vIG5vdyB3ZSBuZWVkIHRvIHJlZm9jdXNcbiAgICAgIFJlYWN0RWRpdG9yLmZvY3VzKHRoaXMuZWRpdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgUmVhY3RFZGl0b3IuYmx1cih0aGlzLmVkaXRvcik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBBIGhlbHBlciBmdW5jdGlvbiB0byBjYWxsIHJlYWN0IGZvY3VzIGJhY2sgaW50byB0aGUgZWRpdG9yXG4gICAqL1xuICBwdWJsaWMgZm9jdXMoKSB7XG4gICAgLy9wcmV2ZW50Rm9jdXMoKTtcbiAgICAvLyBub3cgd2UgbmVlZCB0byByZWZvY3VzXG4gICAgUmVhY3RFZGl0b3IuZm9jdXModGhpcy5lZGl0b3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuIGFzeW5jIGZ1bmN0aW9uIHRoYXQgaXMgYSBiaXQgb2YgYSBoYWNrIHRvIGZvY3VzIGF0IGEgZ2l2ZW5cbiAgICogcmFuZ2UsIGJlY2F1c2Ugb2YgdGhlIHdheSBzbGF0ZSB3b3JrcyBpdCBuZWVkcyB0byBiZSBhc3luY1xuICAgKiBAcGFyYW0gYXQgdGhlIHJhbmdlIHRvIGZvY3VzIGF0XG4gICAqIEByZXR1cm5zIGEgdm9pZCBwcm9taXNlIG9uY2UgaXQncyBkb25lXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZm9jdXNBdChhdDogUmFuZ2UgfCBQYXRoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy9wcmV2ZW50Rm9jdXMoKTtcblxuICAgIGlmIChSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyKSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIFJlYWN0RWRpdG9yLmZvY3VzKHRoaXMuZWRpdG9yKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KHRoaXMuZWRpdG9yLCBhdCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHIsIDApO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdFBhdGgoYXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBhIGZhbGxiYWNrIGZvciBpbnNlcnQgd2hlbiBubyBpbnNlcnQgcmVnaW9uIGlzIGZvdW5kXG4gICAqIEBwYXJhbSB0eXBlIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIHB1YmxpYyBnZXRGYWxsYmFja0luc2VydFBhdGgoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCkge1xuICAgICAgcmV0dXJuIFsuLi50aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IsIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudC5jaGlsZHJlbi5sZW5ndGhdO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQpIHtcbiAgICAgIHJldHVybiBbLi4udGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IsIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50LmNoaWxkcmVuLmxlbmd0aF07XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cykge1xuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3IgPVxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1t0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycy5sZW5ndGggLSAxXTtcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50ID1cbiAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHNbdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMubGVuZ3RoIC0gMV07XG4gICAgICByZXR1cm4gWy4uLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yLCBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudC5jaGlsZHJlbi5sZW5ndGhdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW3RoaXMuc3RhdGUudHJlZVZhbHVlLmNoaWxkcmVuLmxlbmd0aF07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGFuIGltYWdlIGJhc2VkIG9uIGEgZ2l2ZW4gZmlsZSB0aGF0IGhhc1xuICAgKiBiZWVuIHRha2VuIGFzIGFuIGlucHV0XG4gICAqIFxuICAgKiBOb3RlIHRoYXQgdGhlcmUgaXMgYW4gaW5zZXJ0IGZpbGUgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgZ2l2ZW5cbiAgICogYXMgcHJvcCBhbmQgdGhhdCdzIHdoYXQgdGhpcyBmdW5jdGlvbiB3aWxsIGNhbGwsIGlmIGFuIGVycm9yIG9jY3VycmVkXG4gICAqIGl0IHNob3VsZCBoYXZlIGJlZW4gZmVkIGFzIGEgcHJvcCBhcyB3ZWxsLCBzbyB0aGlzIGZ1bmN0aW9uIGFsd2F5c1xuICAgKiByZXR1cm5zIGEgdm9pZCBwcm9taXNlXG4gICAqIFxuICAgKiBAcGFyYW0gZmlsZSB0aGUgZmlsZVxuICAgKiBAcGFyYW0gc3RhbmRhbG9uZSB3aGV0aGVyIHRvIG1ha2UgaXQgYSBzdGFuZGFsb25lIGltYWdlXG4gICAqIEByZXR1cm5zIGEgdm9pZCBwcm9taXNlIG9uY2UgaXQncyBkb25lXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5zZXJ0SW1hZ2UoZmlsZTogRmlsZSwgc3RhbmRhbG9uZTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIHdlIHRyeVxuICAgIHRyeSB7XG4gICAgICAvLyBub3cgbGV0J3Mgc2VlIHdoYXQgd2UgZ2V0XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5wcm9wcy5vbkluc2VydEZpbGUoZmlsZSwgdHJ1ZSk7XG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmcgdGhlcmUgc2hvdWxkIGJlIGFuIGVycm9yIGluIHRoZSBwcm9wc1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIG5vdyB3ZSBjYW4gYnVpbGQgdGhlIGltYWdlIG5vZGUgdGhhdCB3ZSBzaG91bGQgYWRkIGluIHRoZSB0cmVlXG4gICAgICBjb25zdCBpbWFnZU5vZGU6IElJbWFnZSA9IHtcbiAgICAgICAgdHlwZTogXCJpbWFnZVwiLFxuICAgICAgICBhbHQ6IG51bGwsXG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgYm9sZDogZmFsc2UsXG4gICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBoZWlnaHQ6IGRhdGEuaGVpZ2h0LFxuICAgICAgICB3aWR0aDogZGF0YS53aWR0aCxcbiAgICAgICAgc2l6ZXM6IFwiNzB2d1wiLFxuICAgICAgICBzcmM6IGRhdGEucmVzdWx0LnVybCxcbiAgICAgICAgc3JjSWQ6IGRhdGEucmVzdWx0LmlkLFxuICAgICAgICBzcmNTZXQ6IG51bGwsXG4gICAgICAgIHN0YW5kYWxvbmUsXG4gICAgICB9O1xuXG4gICAgICAvLyBhbmQgd2UgY2FsbCB0aGUgaW5zZXJ0IG5vZGVcbiAgICAgIGlmICghdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGltYWdlTm9kZSBhcyBhbnksIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBpbWFnZU5vZGUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVUZW1wbGF0ZVRleHQobGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xuICAgIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQpIHtcbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgICAgdGV4dENvbnRlbnQ6IHZhbHVlIHx8IFwiXCIsXG4gICAgICB9LCB7IGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IgfSk7XG4gICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICAgIHRleHQ6IGxhYmVsIHx8IGxvY2FsZVJlcGxhY2VyKHRoaXMucHJvcHMuYmFzZUkxOG4udGVtcGxhdGUsIHRoaXMucHJvcHMuYmFzZUkxOG4udGV4dCksXG4gICAgICB9LCB7IGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHRBbmNob3IgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGEgYml0IG9mIHRlbXBsYXRlIHRleHQgdGhhdCBpcyB1c2VkIGZvciB0ZW1wbGF0aW5nIHB1cnBvc2VzXG4gICAqIFxuICAgKiBAcGFyYW0gbGFiZWwgdGhlIGxhYmVsIHRvIGdpdmUgaXRcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0aGF0IGl0IGdldHNcbiAgICogQHBhcmFtIGF0IGF0IHdoaWNoIHJhbmdlIHRvIGluc2VydCBpdCAob3B0aW9uYWwpXG4gICAqIEByZXR1cm5zIGEgdm9pZCBwcm9taXNlXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0VGVtcGxhdGVUZXh0KGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICAvLyBub3cgd2UgbWFrZSB0aGUgdGV4dCBub2RlXG4gICAgY29uc3QgdGV4dE5vZGU6IElUZXh0ID0ge1xuICAgICAgYm9sZDogZmFsc2UsXG4gICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgdW5kZXJsaW5lOiBmYWxzZSxcbiAgICAgIHRleHQ6IGxhYmVsIHx8IGxvY2FsZVJlcGxhY2VyKHRoaXMucHJvcHMuYmFzZUkxOG4udGVtcGxhdGUsIHRoaXMucHJvcHMuYmFzZUkxOG4udGV4dCksXG4gICAgfTtcblxuICAgIC8vIGFuZCBub3cgd2UgYnVpbGQgYSBwYXJhZ3JhcGggbm9kZSB0byBwdXQgdGhlIHRleHQgdGhlcmVcbiAgICBjb25zdCBpbmxpbmVOb2RlOiBJSW5saW5lID0ge1xuICAgICAgY2hpbGRyZW46IFt0ZXh0Tm9kZV0sXG4gICAgICB0eXBlOiBcImlubGluZVwiLFxuICAgICAgdGV4dENvbnRlbnQ6IHZhbHVlIHx8IFwiXCIsXG4gICAgfTtcblxuICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgIGlmICghdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBpbmxpbmVOb2RlIGFzIGFueSwgeyBhdDogdGhpcy5nZXRGYWxsYmFja0luc2VydFBhdGgoKSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgaW5saW5lTm9kZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZVRlbXBsYXRlSFRNTChsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50KSB7XG4gICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICAgIGh0bWw6IHZhbHVlIHx8IFwiXCIsXG4gICAgICB9LCB7IGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvciB9KTtcbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgICAgdGV4dDogbGFiZWwgfHwgbG9jYWxlUmVwbGFjZXIodGhpcy5wcm9wcy5iYXNlSTE4bi50ZW1wbGF0ZSwgdGhpcy5wcm9wcy5iYXNlSTE4bi5jb250YWluZXIpLFxuICAgICAgfSwgeyBhdDogdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0QW5jaG9yIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIGluc2VydCBhIGJpdCBvZiB0ZW1wbGF0ZSBodG1sIHRoYXQgaXMgdXNlZCBmb3IgdGVtcGxhdGluZyBwdXJwb3Nlcywgd29yayBzaW1pbGFyXG4gICAqIHRvIHRlbXBsYXRlIHRleHQsIGV4Y2VwdCBpdCB1c2VzIGh0bWwgY29udGVudCBpbnN0ZWFkIHRvIHJlcGxhY2UgdGhlIGlubmVyIGh0bWxcbiAgICogXG4gICAqIEBwYXJhbSBsYWJlbCB0aGUgbGFiZWwgdG8gYmUgZ2l2ZW4gdG8gdGhlIGVsZW1lbnQgdG8gYmUgYWRkZWRcbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0aGF0IHdpbGwgYmUgdXNlZCBmcm9tIHRoZSBjb250ZXh0XG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZSB3aGVyZSB0byBiZSBpbnNlcnRlZFxuICAgKi9cbiAgcHVibGljIGluc2VydFRlbXBsYXRlSFRNTChsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgLy8gYW5kIGNyZWF0ZSBhIHRleHQgbm9kZSBiYXNlZCBvbiB0aGF0XG4gICAgLy8gd2hpY2ggaXMgd2hlcmUgd2UgcHV0IHRoZSBsYWJlbFxuICAgIGNvbnN0IHRleHROb2RlOiBJVGV4dCA9IHtcbiAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgaXRhbGljOiBmYWxzZSxcbiAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICB0ZXh0OiBsYWJlbCB8fCBsb2NhbGVSZXBsYWNlcih0aGlzLnByb3BzLmJhc2VJMThuLnRlbXBsYXRlLCB0aGlzLnByb3BzLmJhc2VJMThuLmNvbnRhaW5lciksXG4gICAgfVxuXG4gICAgLy8gYW5kIGEgY29udGFpbmVyIHRvIG1ha2UgaXQgYmUgdGhlIGlubmVyIGh0bWxcbiAgICAvLyBjb250YWluZXJcbiAgICBjb25zdCB2b2lkQmxvY2s6IElWb2lkQmxvY2sgPSB7XG4gICAgICBjaGlsZHJlbjogW3RleHROb2RlXSxcbiAgICAgIHR5cGU6IFwidm9pZC1ibG9ja1wiLFxuICAgICAgaHRtbDogdmFsdWUgfHwgXCJcIixcbiAgICB9XG5cbiAgICAvLyBhbmQgd2UgY2FsbCB0aGUgaW5zZXJ0IG5vZGVcbiAgICBpZiAoIXRoaXMuZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgdm9pZEJsb2NrLCB7IGF0OiB0aGlzLmdldEZhbGxiYWNrSW5zZXJ0UGF0aCgpIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCB2b2lkQmxvY2spO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgdGFibGUgYXQgdGhlIGdpdmVuIGxvY2F0aW9uXG4gICAqIEBwYXJhbSB0eXBlIHRoZSB0eXBlIG9mIHRoZSB0YWJsZVxuICAgKi9cbiAgcHVibGljIGluc2VydFRhYmxlKHR5cGU/OiBzdHJpbmcpIHtcbiAgICAvLyBub3cgd2UgY2FuIG1ha2UgdGhlIGNvbnRhaW5lclxuICAgIGNvbnN0IHRhYmxlTm9kZTogSVRhYmxlID0ge1xuICAgICAgdHlwZTogXCJ0YWJsZVwiLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IFwidGJvZHlcIixcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiBcInRyXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZFwiLFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgU1RBTkRBUkRfUEFSQUdSQVBIKCksXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB0YWJsZVR5cGU6IHR5cGUgfHwgbnVsbCxcbiAgICB9O1xuXG4gICAgLy8gYW5kIHdlIGNhbGwgdGhlIGluc2VydCBub2RlXG4gICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHRhYmxlTm9kZSwgeyBhdDogdGhpcy5nZXRGYWxsYmFja0luc2VydFBhdGgoKSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgdGFibGVOb2RlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaW5zZXJ0VGFibGVDb2x1bW4oKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRDb2x1bW5JbmRleCA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzICYmXG4gICAgICBmaW5kTGFzdEluZGV4KHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzLCAoZSkgPT4gZS50eXBlID09PSBcInRkXCIgfHwgZS50eXBlID09PSBcInRoXCIpO1xuXG4gICAgaWYgKGN1cnJlbnRDb2x1bW5JbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50Q29sdW1uID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHNbY3VycmVudENvbHVtbkluZGV4XTtcbiAgICBjb25zdCBjdXJyZW50Q29sdW1uQW5jaG9yID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbY3VycmVudENvbHVtbkluZGV4XTtcblxuICAgIC8vIHRoaXMgaXMgd2hlcmUgd2UgZW5kIHRvIGZvY3VzIGFzIHRoYXQncyB3aGVyZSB3ZSBhZGQgdGhlIG5ldyByb3cgYXRcbiAgICAvLyBob3dldmVyIHdlIGRvIG5lZWQgdG8gYWRkIGEgbmV3IGNvbHVtbiBhdCB0aGUgc2FtZSBpbmRleCBpbiBldmVyeVxuICAgIC8vIHJvd1xuICAgIGNvbnN0IHRhcmdldENvbHVtbkFuY2hvciA9IFsuLi5jdXJyZW50Q29sdW1uQW5jaG9yXTtcbiAgICB0YXJnZXRDb2x1bW5BbmNob3JbdGFyZ2V0Q29sdW1uQW5jaG9yLmxlbmd0aCAtIDFdKys7XG5cbiAgICBjb25zdCB0YXJnZXRJbmRleCA9IHRhcmdldENvbHVtbkFuY2hvclt0YXJnZXRDb2x1bW5BbmNob3IubGVuZ3RoIC0gMV07XG5cbiAgICBjb25zdCB0YWJsZUFuY2hvciA9IFsuLi5jdXJyZW50Q29sdW1uQW5jaG9yXTtcbiAgICAvLyB0clxuICAgIHRhYmxlQW5jaG9yLnBvcCgpO1xuICAgIC8vIHRoZWFkIG9yIHRib2R5XG4gICAgdGFibGVBbmNob3IucG9wKCk7XG4gICAgLy8gdGFibGVcbiAgICB0YWJsZUFuY2hvci5wb3AoKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB0YWJsZUVsZW1lbnQgPSB0aGlzLmdldE5vZGVBdCh0YWJsZUFuY2hvcikgYXMgUmljaEVsZW1lbnQ7XG5cbiAgICAgIGlmICh0YWJsZUVsZW1lbnQudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgIHRhYmxlRWxlbWVudC5jaGlsZHJlbi5mb3JFYWNoKCh0aGVhZE9yVGJvZHlPclRmb290LCB0aGVhZE9yVGJvZHlPclRGb290SW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBpc0xhc3RFbGVtZW50SW5UYWJsZUJvZHkgPSB0aGVhZE9yVGJvZHlPclRGb290SW5kZXggPT09IHRhYmxlRWxlbWVudC5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICAgIHRoZWFkT3JUYm9keU9yVGZvb3QuY2hpbGRyZW4uZm9yRWFjaCgocm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29sdW1uOiBJVGQgPSB7XG4gICAgICAgICAgICAgIHR5cGU6IFwidGRcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBTVEFOREFSRF9QQVJBR1JBUEgoKSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxldCBhY3R1YWxUYXJnZXRJbmRleDogbnVtYmVyID0gdGFyZ2V0SW5kZXg7XG4gICAgICAgICAgICBpZiAoYWN0dWFsVGFyZ2V0SW5kZXggPiByb3cuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGFjdHVhbFRhcmdldEluZGV4ID0gcm93LmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW5zZXJ0UG9pbnQgPSBbLi4udGFibGVBbmNob3IsIHRoZWFkT3JUYm9keU9yVEZvb3RJbmRleCwgcm93SW5kZXgsIGFjdHVhbFRhcmdldEluZGV4XTtcblxuICAgICAgICAgICAgLy8gb25seSBhbGxvdyB0byBub3JtYWxpemUgYXQgb3VyIGxhc3QgaW5zZXJ0XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgdGhlIG5vcm1hbGl6ZXIgd2lsbCBnZXQgY3JhenlcbiAgICAgICAgICAgIHRoaXMucHJldmVudE5vcm1hbGl6ZSA9IGlzTGFzdEVsZW1lbnRJblRhYmxlQm9keSA/IHJvd0luZGV4ICE9PSB0aGVhZE9yVGJvZHlPclRmb290LmNoaWxkcmVuLmxlbmd0aCAtIDEgOiB0cnVlO1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgY29sdW1uLCB7IGF0OiBpbnNlcnRQb2ludCB9KTtcbiAgICAgICAgICAgIHRoaXMucHJldmVudE5vcm1hbGl6ZSA9IGZhbHNlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0ZXh0QW5jaG9yT2ZDb2x1bW4gPSB0YXJnZXRDb2x1bW5BbmNob3I7XG4gICAgICAgIC8vIHBhcmFncmFwaFxuICAgICAgICB0ZXh0QW5jaG9yT2ZDb2x1bW4ucHVzaCgwKTtcbiAgICAgICAgLy8gdGV4dFxuICAgICAgICB0ZXh0QW5jaG9yT2ZDb2x1bW4ucHVzaCgwKTtcblxuICAgICAgICB0aGlzLmZvY3VzQXQoe1xuICAgICAgICAgIGFuY2hvcjoge1xuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgcGF0aDogdGFyZ2V0Q29sdW1uQW5jaG9yLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9jdXM6IHtcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIHBhdGg6IHRhcmdldENvbHVtbkFuY2hvcixcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcblxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVUYWJsZUNvbHVtbigpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudENvbHVtbkluZGV4ID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgJiZcbiAgICAgIGZpbmRMYXN0SW5kZXgodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMsIChlKSA9PiBlLnR5cGUgPT09IFwidGRcIiB8fCBlLnR5cGUgPT09IFwidGhcIik7XG5cbiAgICBpZiAoY3VycmVudENvbHVtbkluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRDb2x1bW4gPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50c1tjdXJyZW50Q29sdW1uSW5kZXhdO1xuICAgIGNvbnN0IGN1cnJlbnRDb2x1bW5BbmNob3IgPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1tjdXJyZW50Q29sdW1uSW5kZXhdO1xuXG4gICAgLy8gdGhpcyBpcyB0aGUgaW5kZXggd2UgYXJlIHJlbW92aW5nIGluIGVhY2ggcm93XG4gICAgY29uc3QgdGFyZ2V0SW5kZXggPSBjdXJyZW50Q29sdW1uQW5jaG9yW2N1cnJlbnRDb2x1bW5BbmNob3IubGVuZ3RoIC0gMV07XG5cbiAgICBjb25zdCB0YWJsZUFuY2hvciA9IFsuLi5jdXJyZW50Q29sdW1uQW5jaG9yXTtcbiAgICAvLyB0clxuICAgIHRhYmxlQW5jaG9yLnBvcCgpO1xuICAgIC8vIHRoZWFkIG9yIHRib2R5XG4gICAgdGFibGVBbmNob3IucG9wKCk7XG4gICAgLy8gdGFibGVcbiAgICB0YWJsZUFuY2hvci5wb3AoKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB0YWJsZUVsZW1lbnQgPSB0aGlzLmdldE5vZGVBdCh0YWJsZUFuY2hvcikgYXMgUmljaEVsZW1lbnQ7XG5cbiAgICAgIGlmICh0YWJsZUVsZW1lbnQudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgIHRhYmxlRWxlbWVudC5jaGlsZHJlbi5mb3JFYWNoKCh0aGVhZE9yVGJvZHlPclRmb290LCB0aGVhZE9yVGJvZHlPclRGb290SW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBpc0xhc3RFbGVtZW50SW5UYWJsZUJvZHkgPSB0aGVhZE9yVGJvZHlPclRGb290SW5kZXggPT09IHRhYmxlRWxlbWVudC5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICAgIHRoZWFkT3JUYm9keU9yVGZvb3QuY2hpbGRyZW4uZm9yRWFjaCgocm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVsZXRlUG9pbnQgPSBbLi4udGFibGVBbmNob3IsIHRoZWFkT3JUYm9keU9yVEZvb3RJbmRleCwgcm93SW5kZXgsIHRhcmdldEluZGV4XTtcblxuICAgICAgICAgICAgLy8gb25seSBhbGxvdyB0byBub3JtYWxpemUgYXQgb3VyIGxhc3QgaW5zZXJ0XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgdGhlIG5vcm1hbGl6ZXIgd2lsbCBnZXQgY3JhenlcbiAgICAgICAgICAgIHRoaXMucHJldmVudE5vcm1hbGl6ZSA9IGlzTGFzdEVsZW1lbnRJblRhYmxlQm9keSA/IHJvd0luZGV4ICE9PSB0aGVhZE9yVGJvZHlPclRmb290LmNoaWxkcmVuLmxlbmd0aCAtIDEgOiB0cnVlO1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5kZWxldGUodGhpcy5lZGl0b3IsIHsgYXQ6IGRlbGV0ZVBvaW50IH0pO1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGluc2VydFRhYmxlUm93KCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50Um93SW5kZXggPSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cyAmJlxuICAgICAgZmluZExhc3RJbmRleCh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cywgKGUpID0+IGUudHlwZSA9PT0gXCJ0clwiKTtcblxuICAgIGlmIChjdXJyZW50Um93SW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFJvdyA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzW2N1cnJlbnRSb3dJbmRleF07XG4gICAgY29uc3QgY3VycmVudFJvd0FuY2hvciA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW2N1cnJlbnRSb3dJbmRleF07XG5cbiAgICBjb25zdCByb3c6IElUciA9IHtcbiAgICAgIHR5cGU6IFwidHJcIixcbiAgICAgIGNoaWxkcmVuOiBjdXJyZW50Um93LmNoaWxkcmVuLm1hcCgodikgPT4gKFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogXCJ0ZFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICBTVEFOREFSRF9QQVJBR1JBUEgoKSxcbiAgICAgICAgICBdLFxuICAgICAgICB9XG4gICAgICApKSxcbiAgICB9O1xuXG4gICAgLy8gYW5kIG5vdyBsZXQncyBnZXQgdGhlIHRoZWFkIG9yIHRib2R5IGluIHF1ZXN0aW9uXG4gICAgY29uc3QgcGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdEFuY2hvciA9IFsuLi5jdXJyZW50Um93QW5jaG9yXTtcbiAgICBwYXJlbnRUYm9keU9yVGhlYWRPclRmb290QW5jaG9yLnBvcCgpO1xuICAgIGNvbnN0IHBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3QgPSB0aGlzLmdldE5vZGVBdChwYXJlbnRUYm9keU9yVGhlYWRPclRmb290QW5jaG9yKSBhcyBSaWNoRWxlbWVudDtcblxuICAgIC8vIGlmIGl0J3MgYSB0Ym9keVxuICAgIGlmIChwYXJlbnRUYm9keU9yVGhlYWRPclRmb290LnR5cGUgPT09IFwidGJvZHlcIikge1xuICAgICAgLy8gd2Ugc2ltcGx5IGFkZCB0aGUgcm93IG5leHQgdG8gdGhlIGN1cnJlbnRcbiAgICAgIGNvbnN0IHRhcmdldFJvd0FuY2hvciA9IGN1cnJlbnRSb3dBbmNob3I7XG4gICAgICB0YXJnZXRSb3dBbmNob3JbdGFyZ2V0Um93QW5jaG9yLmxlbmd0aCAtIDFdKys7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCByb3csIHsgYXQ6IHRhcmdldFJvd0FuY2hvciB9KTtcblxuICAgICAgY29uc3QgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0ID0gdGFyZ2V0Um93QW5jaG9yO1xuICAgICAgLy8gZmlyc3QgdGRcbiAgICAgIHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dC5wdXNoKDApO1xuICAgICAgLy8gZmlyc3QgcGFyYWdyYXBoXG4gICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgIC8vIGZpcnN0IHRleHQgaW4gcGFyYWdyYXBoXG4gICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcblxuICAgICAgdGhpcy5mb2N1c0F0KHtcbiAgICAgICAgYW5jaG9yOiB7XG4gICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgIHBhdGg6IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCxcbiAgICAgICAgfSxcbiAgICAgICAgZm9jdXM6IHtcbiAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgcGF0aDogdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChwYXJlbnRUYm9keU9yVGhlYWRPclRmb290LnR5cGUgPT09IFwidGhlYWRcIikge1xuICAgICAgLy8gb3RoZXJ3aXNlIHdlIG5lZWQgdG8gYWRkIHRoZSByb3cgaW4gdGhlIHRib2R5LCB0aGF0IGlzIG5leHRcbiAgICAgIC8vIHRvIHRoZSB0aGVhZFxuICAgICAgY29uc3QgdGJvZHlBbmNob3IgPSBbLi4ucGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdEFuY2hvcl07XG4gICAgICB0Ym9keUFuY2hvclt0Ym9keUFuY2hvci5sZW5ndGggLSAxXSsrO1xuXG4gICAgICAvLyBsZXQncyBnZXQgdGhlIHRib2R5XG4gICAgICBsZXQgdGJvZHk6IFJpY2hFbGVtZW50ID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRib2R5ID0gdGhpcy5nZXROb2RlQXQodGJvZHlBbmNob3IpIGFzIFJpY2hFbGVtZW50O1xuICAgICAgfSBjYXRjaCB7XG5cbiAgICAgIH1cblxuICAgICAgLy8gaWYgd2UgaGF2ZSBhIHRib2R5XG4gICAgICBpZiAodGJvZHkgJiYgdGJvZHkudHlwZSA9PT0gXCJ0Ym9keVwiKSB7XG4gICAgICAgIC8vIG5ldyByb3cgYXQgdGhlIHN0YXJ0IG9mIHRoZSB0Ym9keVxuICAgICAgICBjb25zdCB0YXJnZXRSb3dBbmNob3IgPSB0Ym9keUFuY2hvcjtcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yLnB1c2goMCk7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHJvdywgeyBhdDogdGFyZ2V0Um93QW5jaG9yIH0pO1xuXG4gICAgICAgIGNvbnN0IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCA9IHRhcmdldFJvd0FuY2hvcjtcbiAgICAgICAgLy8gZmlyc3QgdGRcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG4gICAgICAgIC8vIGZpcnN0IHBhcmFncmFwaFxuICAgICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgICAgLy8gZmlyc3QgdGV4dCBpbiBwYXJhZ3JhcGhcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG5cbiAgICAgICAgdGhpcy5mb2N1c0F0KHtcbiAgICAgICAgICBhbmNob3I6IHtcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIHBhdGg6IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvY3VzOiB7XG4gICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICBwYXRoOiB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBubyB0Ym9keSwgd2UgbmVlZCB0byBhZGQgYSBuZXcgdGJvZHkgd2hlcmUgaXQgc2hvdWxkIGJlXG4gICAgICAgIC8vIGNvdWxkIGJlIGEgdGZvb3Qgb3IgZG93bnJpZ2h0IG1pc3NpbmdcbiAgICAgICAgY29uc3QgdGJvZHk6IElUYm9keSA9IHtcbiAgICAgICAgICB0eXBlOiBcInRib2R5XCIsXG4gICAgICAgICAgY2hpbGRyZW46IFtyb3ddLFxuICAgICAgICB9O1xuXG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHRib2R5LCB7IGF0OiB0Ym9keUFuY2hvciB9KTtcblxuICAgICAgICBjb25zdCB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQgPSB0Ym9keUFuY2hvcjtcbiAgICAgICAgLy8gZmlyc3QgdHJcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG4gICAgICAgIC8vIGZpcnN0IHRkXG4gICAgICAgIHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dC5wdXNoKDApO1xuICAgICAgICAvLyBmaXJzdCBwYXJhZ3JhcGhcbiAgICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG4gICAgICAgIC8vIGZpcnN0IHRleHQgaW4gcGFyYWdyYXBoXG4gICAgICAgIHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dC5wdXNoKDApO1xuXG4gICAgICAgIHRoaXMuZm9jdXNBdCh7XG4gICAgICAgICAgYW5jaG9yOiB7XG4gICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICBwYXRoOiB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb2N1czoge1xuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgcGF0aDogdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdC50eXBlID09PSBcInRmb290XCIpIHtcbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBuZWVkIHRvIGFkZCB0aGUgcm93IGluIHRoZSB0Ym9keSwgdGhhdCBpcyBuZXh0XG4gICAgICAvLyB0byB0aGUgdGhlYWRcbiAgICAgIGNvbnN0IHRib2R5QW5jaG9yID0gWy4uLnBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3RBbmNob3JdO1xuICAgICAgdGJvZHlBbmNob3JbdGJvZHlBbmNob3IubGVuZ3RoIC0gMV0tLTtcblxuICAgICAgLy8gbGV0J3MgZ2V0IHRoZSB0Ym9keVxuICAgICAgbGV0IHRib2R5OiBSaWNoRWxlbWVudCA9IG51bGw7XG4gICAgICB0cnkge1xuICAgICAgICB0Ym9keSA9IHRoaXMuZ2V0Tm9kZUF0KHRib2R5QW5jaG9yKSBhcyBSaWNoRWxlbWVudDtcbiAgICAgIH0gY2F0Y2gge1xuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRmb290Q2xvbmUgPSB7IC4uLnBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3QgfSBhcyBJVGZvb3Q7XG4gICAgICB0Zm9vdENsb25lLmNoaWxkcmVuID0gdGZvb3RDbG9uZS5jaGlsZHJlbi5tYXAoKHYpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiBcInRyXCIsXG4gICAgICAgICAgY2hpbGRyZW46IHYuY2hpbGRyZW4ubWFwKHYyID0+IChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ0ZFwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIFNUQU5EQVJEX1BBUkFHUkFQSCgpLFxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKSksXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBpZiB3ZSBoYXZlIGEgdGJvZHlcbiAgICAgIHRoaXMucHJldmVudE5vcm1hbGl6ZSA9IHRydWU7XG4gICAgICBpZiAodGJvZHkgJiYgdGJvZHkudHlwZSA9PT0gXCJ0Ym9keVwiKSB7XG4gICAgICAgIC8vIHdlIHVwZGF0ZSBvdXIgdGZvb3QgdG8gYmUgdGJvZHkgc28gdGhhdCBpdCBtZXJnZXNcbiAgICAgICAgY29uc3QgY3VycmVudFRCb2R5UHJvcHNDb3B5ID0geyAuLi50Ym9keSB9O1xuICAgICAgICBkZWxldGUgY3VycmVudFRCb2R5UHJvcHNDb3B5LmNoaWxkcmVuO1xuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIGN1cnJlbnRUQm9keVByb3BzQ29weSBhcyBhbnksXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXQ6IHBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3RBbmNob3IsXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gd2Ugc2ltcGx5IG1ha2UgaXQgaW50byBhIHRib2R5XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogXCJ0Ym9keVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXQ6IHBhcmVudFRib2R5T3JUaGVhZE9yVGZvb3RBbmNob3IsXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gZmFsc2U7XG5cbiAgICAgIGNvbnN0IG5leHRBbmNob3JGb3JUZm9vdCA9IFsuLi5wYXJlbnRUYm9keU9yVGhlYWRPclRmb290QW5jaG9yXTtcbiAgICAgIG5leHRBbmNob3JGb3JUZm9vdFtuZXh0QW5jaG9yRm9yVGZvb3QubGVuZ3RoIC0gMV0rKztcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHRmb290Q2xvbmUsIHsgYXQ6IG5leHRBbmNob3JGb3JUZm9vdCB9KTtcblxuICAgICAgLy8gaWYgdGhlcmUgd2FzIGEgdGJvZHkgdGhlIG1lcmdpbmcgcmVhY3Rpb24gY2F1c2VkIHRoYXQgdGhlIG5leHQgYW5jaG9yIGlzIG5vdFxuICAgICAgLy8gYW55bW9yZSB3aGVyZSBvdXIgbm9kZSBpcyBzbyB3ZSBjYW4gdXNlIHRoaXMgb25lLCBvdGhlcndpc2UgaXQgaXMgdGhlIHNhbWUgYXMgdGhlIG5leHRcbiAgICAgIGNvbnN0IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCA9IHRib2R5ID8gcGFyZW50VGJvZHlPclRoZWFkT3JUZm9vdEFuY2hvciA6IG5leHRBbmNob3JGb3JUZm9vdDtcbiAgICAgIC8vIGZpcnN0IHRyXG4gICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgIC8vIGZpcnN0IHRkXG4gICAgICB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQucHVzaCgwKTtcbiAgICAgIC8vIGZpcnN0IHBhcmFncmFwaFxuICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG4gICAgICAvLyBmaXJzdCB0ZXh0IGluIHBhcmFncmFwaFxuICAgICAgdGFyZ2V0Um93QW5jaG9yRmlyc3RUZXh0LnB1c2goMCk7XG5cbiAgICAgIHRoaXMuZm9jdXNBdCh7XG4gICAgICAgIGFuY2hvcjoge1xuICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICBwYXRoOiB0YXJnZXRSb3dBbmNob3JGaXJzdFRleHQsXG4gICAgICAgIH0sXG4gICAgICAgIGZvY3VzOiB7XG4gICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgIHBhdGg6IHRhcmdldFJvd0FuY2hvckZpcnN0VGV4dCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVUYWJsZVJvdygpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFJvd0luZGV4ID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgJiZcbiAgICAgIGZpbmRMYXN0SW5kZXgodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMsIChlKSA9PiBlLnR5cGUgPT09IFwidHJcIik7XG5cbiAgICBpZiAoY3VycmVudFJvd0luZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBUcmFuc2Zvcm1zLmRlbGV0ZSh0aGlzLmVkaXRvciwgeyBhdDogdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbY3VycmVudFJvd0luZGV4XSB9KTtcbiAgICB9IGNhdGNoIHtcblxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUZWxscyB3aGV0aGVyIHRoZSBjdXJyZW50IHRhYmxlIHJvdyBjYW5cbiAgICogYmUgdG9nZ2xlZCBpbiB0aGUgZW52aXJvbm1lbnQgaXQgaXNcbiAgICovXG4gIHB1YmxpYyBjYW5Ub2dnbGVUYWJsZShlbGVtZW50OiBcInRoZWFkXCIgfCBcInRmb290XCIpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgcG90ZW50aWFsVGRJbmRleCA9IGZpbmRMYXN0SW5kZXgodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMsIChlKSA9PiBlLnR5cGUgPT09IFwidGRcIiB8fCBlLnR5cGUgPT09IFwidGhcIik7XG5cbiAgICBpZiAocG90ZW50aWFsVGRJbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCB0ZEFuY2hvciA9IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW3BvdGVudGlhbFRkSW5kZXhdO1xuXG4gICAgY29uc3Qgcm93UGF0aCA9IFsuLi50ZEFuY2hvcl07XG4gICAgcm93UGF0aC5wb3AoKTtcblxuICAgIGNvbnN0IHRoZWFkT3JUYm9keU9yVGZvb3RQYXRoID0gWy4uLnJvd1BhdGhdO1xuICAgIHRoZWFkT3JUYm9keU9yVGZvb3RQYXRoLnBvcCgpO1xuXG4gICAgY29uc3QgdGFibGVQYXRoID0gWy4uLnRoZWFkT3JUYm9keU9yVGZvb3RQYXRoXTtcbiAgICB0YWJsZVBhdGgucG9wKCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcG90ZW50aWFsUm93ID0gdGhpcy5nZXROb2RlQXQocm93UGF0aCkgYXMgUmljaEVsZW1lbnQ7XG4gICAgICBpZiAocG90ZW50aWFsUm93LnR5cGUgIT09IFwidHJcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRoZWFkT3JUYm9keU9yVGZvb3QgPSB0aGlzLmdldE5vZGVBdCh0aGVhZE9yVGJvZHlPclRmb290UGF0aCkgYXMgUmljaEVsZW1lbnQ7XG4gICAgICBpZiAodGhlYWRPclRib2R5T3JUZm9vdC50eXBlID09PSBlbGVtZW50KSB7XG4gICAgICAgIC8vIGlmIHdlIGFyZSBhbHJlYWR5IGluIGEgdGhlYWQgb2YgY291cnNlIHdlIGNhbiB0b2dnbGUgaXQgaW50byBhIHRib2R5XG4gICAgICAgIC8vIHJvdyBlbGVtZW50XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh0aGVhZE9yVGJvZHlPclRmb290LnR5cGUgPT09IFwidGZvb3RcIiB8fCB0aGVhZE9yVGJvZHlPclRmb290LnR5cGUgPT09IFwidGhlYWRcIikge1xuICAgICAgICAvLyB3ZSBjYW4ndCBjb252ZXJ0IHRoZSBzYW1lIHRoaW5nIGFzIHdlIGFyZSBub3QgaW4gdGhlIHJpZ2h0IHBsYWNlXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGFibGVQYXJlbnQgPSB0aGlzLmdldE5vZGVBdCh0YWJsZVBhdGgpIGFzIFJpY2hFbGVtZW50O1xuICAgICAgaWYgKHRhYmxlUGFyZW50LnR5cGUgIT09IFwidGFibGVcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIHdlIGNhbm5vdCB0b2dnbGUgaWYgd2UgYWxyZWFkeSBoYXZlIGEgdGhlYWRcbiAgICAgIGNvbnN0IHRoZWFkT3JUZm9vdEFscmVhZHlFeGlzdHMgPSB0YWJsZVBhcmVudC5jaGlsZHJlbi5maW5kKChjKSA9PiBjLnR5cGUgPT09IGVsZW1lbnQpO1xuICAgICAgaWYgKHRoZWFkT3JUZm9vdEFscmVhZHlFeGlzdHMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IFwidGhlYWRcIikge1xuICAgICAgICAgIC8vIG90aGVyd2lzZSB3ZSBjYW4gb25seSB0b2dnbGUgaWYgdGhpcyBpcyB0aGUgZmlyc3Qgcm93IG9mIHRoZSB0YWJsZVxuICAgICAgICAgIHJldHVybiByb3dQYXRoW3Jvd1BhdGgubGVuZ3RoIC0gMV0gPT09IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudCA9PT0gXCJ0Zm9vdFwiKSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIGNhbiBvbmx5IHRvZ2dsZSBpZiB0aGlzIGlzIHRoZSBsYXN0IHJvdyBvZiB0aGUgdGFibGVcbiAgICAgICAgICByZXR1cm4gcm93UGF0aFtyb3dQYXRoLmxlbmd0aCAtIDFdID09PSB0aGVhZE9yVGJvZHlPclRmb290LmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9ubHkgd29ya3Mgd2hlbiB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgdGFibGVcbiAgICogaXMgc2VsZWN0ZWQsIGFrYSB0aGUgZmlyc3Qgcm93XG4gICAqL1xuICBwdWJsaWMgdG9nZ2xlVGFibGUoZWxlbWVudDogXCJ0aGVhZFwiIHwgXCJ0Zm9vdFwiKSB7XG4gICAgaWYgKCF0aGlzLmNhblRvZ2dsZVRhYmxlKGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG90ZW50aWFsVGRJbmRleCA9IGZpbmRMYXN0SW5kZXgodGhpcy5zdGF0ZS5jdXJyZW50U3VwZXJCbG9ja0VsZW1lbnRzLCAoZSkgPT4gZS50eXBlID09PSBcInRkXCIgfHwgZS50eXBlID09PSBcInRoXCIpO1xuICAgIGNvbnN0IHRkQW5jaG9yID0gdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbcG90ZW50aWFsVGRJbmRleF07XG5cbiAgICBjb25zdCByb3dQYXRoID0gWy4uLnRkQW5jaG9yXTtcbiAgICByb3dQYXRoLnBvcCgpO1xuXG4gICAgY29uc3QgdGhlYWRPclRib2R5UGF0aCA9IFsuLi5yb3dQYXRoXTtcbiAgICB0aGVhZE9yVGJvZHlQYXRoLnBvcCgpO1xuXG4gICAgY29uc3QgdGFibGVQYXRoID0gWy4uLnRoZWFkT3JUYm9keVBhdGhdO1xuICAgIHRhYmxlUGF0aC5wb3AoKTtcblxuICAgIGNvbnN0IHRhYmxlUGFyZW50ID0gdGhpcy5nZXROb2RlQXQodGFibGVQYXRoKSBhcyBJVGFibGU7XG5cbiAgICAvLyBtb3ZlIGFsbCB0aGUgdGhlYWQgZWxlbWVudHMgaW50byB0aGUgdGJvZHlcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRhYmxlUGFyZW50LmNoaWxkcmVuLmZpbmRJbmRleCgoZSkgPT4gZS50eXBlID09PSBlbGVtZW50KTtcbiAgICBjb25zdCBib2R5UG9zaXRpb24gPSB0YWJsZVBhcmVudC5jaGlsZHJlbi5maW5kSW5kZXgoKGUpID0+IGUudHlwZSA9PT0gXCJ0Ym9keVwiKTtcbiAgICBpZiAocG9zaXRpb24gIT09IC0xKSB7XG4gICAgICBjb25zdCBjdXJyZW50VEJvZHkgPSB0YWJsZVBhcmVudC5jaGlsZHJlbltib2R5UG9zaXRpb25dO1xuXG4gICAgICBpZiAoIWN1cnJlbnRUQm9keSkge1xuICAgICAgICAvLyBubyBib2R5IGxldCdzIG1ha2UgdGhlIHdob2xlIHRoaW5nIHRoZSBib2R5XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogXCJ0Ym9keVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXQ6IFsuLi50YWJsZVBhdGgsIHBvc2l0aW9uXSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlbnN1cmUgdGhleSB3aWxsIG1lcmdlIGFuZCBiZWNvbWUgMSBzaW5nbGUgYm9keVxuICAgICAgICAvLyBhcyB0aGV5IGFyZSBtZXJnYWJsZVxuICAgICAgICBjb25zdCBjdXJyZW50VEJvZHlQcm9wc0NvcHkgPSB7IC4uLmN1cnJlbnRUQm9keSB9O1xuICAgICAgICBkZWxldGUgY3VycmVudFRCb2R5UHJvcHNDb3B5LmNoaWxkcmVuO1xuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIGN1cnJlbnRUQm9keVByb3BzQ29weSBhcyBhbnksXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXQ6IFsuLi50YWJsZVBhdGgsIHBvc2l0aW9uXSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1vdmUgdGhlIGZpcnN0IHJvdyBvZiB0aGUgdGJvZHkgYXMgYSB0aGVhZFxuICAgICAgY29uc3QgY3VycmVudFRCb2R5ID0gdGFibGVQYXJlbnQuY2hpbGRyZW5bYm9keVBvc2l0aW9uXTtcblxuICAgICAgaWYgKCFjdXJyZW50VEJvZHkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBvbmx5IHRoYXQgb25lIHJvd1xuICAgICAgaWYgKGN1cnJlbnRUQm9keS5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gbm8gb3RoZXIgdGhhbiBvbmUgcm93IGxldCdzIG1ha2UgdGhlIHdob2xlIHRoaW5nIHRoZSB0aGVhZFxuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKFxuICAgICAgICAgIHRoaXMuZWRpdG9yLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IGVsZW1lbnQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgYm9keVBvc2l0aW9uXSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjdXJyZW50VEJvZHlQcm9wc0NvcHkgPSB7IC4uLmN1cnJlbnRUQm9keSB9O1xuICAgICAgICBjdXJyZW50VEJvZHlQcm9wc0NvcHkuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgY3VycmVudFRCb2R5UHJvcHNDb3B5LnR5cGUgPSBlbGVtZW50O1xuXG4gICAgICAgIC8vIGluc2VydGluZyBlbXB0eSBlbGVtZW50XG4gICAgICAgIHRoaXMucHJldmVudE5vcm1hbGl6ZSA9IHRydWU7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAgY3VycmVudFRCb2R5UHJvcHNDb3B5IGFzIGFueSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgZWxlbWVudCA9PT0gXCJ0aGVhZFwiID8gMCA6IGJvZHlQb3NpdGlvbiArIDFdLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5wcmV2ZW50Tm9ybWFsaXplID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IFwidGhlYWRcIikge1xuICAgICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKFxuICAgICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vIHRib2R5IGlzIG5vdyBpbiAxIGFoZWFkXG4gICAgICAgICAgICAgIC8vIHplcm8gZm9yIHRoZSBmaXJzdCByb3dcbiAgICAgICAgICAgICAgYXQ6IFsuLi50YWJsZVBhdGgsIGJvZHlQb3NpdGlvbiArIDEsIDBdLFxuICAgICAgICAgICAgICAvLyB0aGlzIGlzIG91ciBuZXcgdGhlYWRcbiAgICAgICAgICAgICAgdG86IFsuLi50YWJsZVBhdGgsIDAsIDBdLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoXG4gICAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgLy8gdGJvZHkgaXMgYXQgdGhlIHNhbWUgcGxhY2UgYXMgYmVmb3JlXG4gICAgICAgICAgICAgIC8vIHdlIHBpY2sgdGhlIGxhc3Qgcm93XG4gICAgICAgICAgICAgIGF0OiBbLi4udGFibGVQYXRoLCBib2R5UG9zaXRpb24sIGN1cnJlbnRUQm9keS5jaGlsZHJlbi5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgICAgLy8gdGhpcyBpcyBvdXIgbmV3IHRmb290IHdoaWNoIGlzIGFmdGVyIG91ciBib2R5XG4gICAgICAgICAgICAgIHRvOiBbLi4udGFibGVQYXRoLCBib2R5UG9zaXRpb24gKyAxLCAwXSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0VmlkZW9TcmNPcmlnaW5BbmRTdGF0dXModXJsOiBzdHJpbmcpIHtcbiAgICAvLyBmaXJzdCB3ZSBwYXJzZSB0aGUgdXJsLCB3ZSBvbmx5IHN1cHBvcnQgeW91dHViZSBvciB2aW1lb1xuICAgIC8vIHVybHMgZm9yIHRoZSB2aWRlb1xuICAgIGxldCBzcmM6IHN0cmluZyA9IG51bGw7XG4gICAgbGV0IG9yaWdpbjogc3RyaW5nID0gbnVsbDtcbiAgICBsZXQgc3RhdHVzOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIGxldCBwYXJzZWRVUkw6IFVSTCA9IG51bGw7XG4gICAgaWYgKHVybCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcGFyc2VkVVJMID0gbmV3IFVSTCh1cmwpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHN0YXR1cyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGZpcnN0IHdlIGFyZSBnb2luZyB0byBjaGVjayBmb3IgeW91dHViZVxuICAgIC8vIHVybHNcbiAgICBpZiAocGFyc2VkVVJMKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHBhcnNlZFVSTC5ob3N0bmFtZSA9PT0gXCJ5b3V0dWJlLmNvbVwiIHx8XG4gICAgICAgIHBhcnNlZFVSTC5ob3N0bmFtZSA9PT0gXCJ3d3cueW91dHViZS5jb21cIiB8fFxuICAgICAgICBwYXJzZWRVUkwuaG9zdG5hbWUgPT09IFwieW91dHUuYmVcIlxuICAgICAgKSB7XG4gICAgICAgIC8vIHNldCBpdCBhcyB5b3V0dWJlIGluIHRoZSBvcmlnaW5cbiAgICAgICAgb3JpZ2luID0gXCJ5b3V0dWJlXCI7XG5cbiAgICAgICAgLy8gY2hlY2sgZm9yIGNsYXNzaWMgeW91dHViZSB1cmxzXG4gICAgICAgIGNvbnN0IGlzQ2xhc3NpY1lUVXJsID0gKFxuICAgICAgICAgIHBhcnNlZFVSTC5ob3N0bmFtZSA9PT0gXCJ5b3V0dWJlLmNvbVwiIHx8XG4gICAgICAgICAgcGFyc2VkVVJMLmhvc3RuYW1lID09PSBcInd3dy55b3V0dWJlLmNvbVwiXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gYW5kIHRoZW4gd2UgY2FuIGNoZWNrIGZvciB0aGVzZSBhcyB3ZSB0cnlcbiAgICAgICAgLy8gdG8gZ2V0IHRoZSBzb3VyY2UgaWRcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlzQ2xhc3NpY1lUVXJsICYmXG4gICAgICAgICAgcGFyc2VkVVJMLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvZW1iZWQvXCIpXG4gICAgICAgICkge1xuICAgICAgICAgIHNyYyA9IHBhcnNlZFVSTC5wYXRobmFtZS5zcGxpdChcIi9cIilbMl07XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgaXNDbGFzc2ljWVRVcmwgJiZcbiAgICAgICAgICBwYXJzZWRVUkwucGF0aG5hbWUuc3RhcnRzV2l0aChcIi93YXRjaFwiKVxuICAgICAgICApIHtcbiAgICAgICAgICBsZXQgc2VhcmNoID0gcGFyc2VkVVJMLnNlYXJjaDtcbiAgICAgICAgICBpZiAoc2VhcmNoWzBdID09PSBcIj9cIikge1xuICAgICAgICAgICAgc2VhcmNoID0gc2VhcmNoLnN1YnN0cigxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VhcmNoLnNwbGl0KFwiJlwiKS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICAgICAgICBpZiAodi5zdGFydHNXaXRoKFwidj1cIikpIHtcbiAgICAgICAgICAgICAgc3JjID0gdi5zdWJzdHIoMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgcGFyc2VkVVJMLmhvc3RuYW1lID09PSBcInlvdXR1LmJlXCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgc3JjID0gcGFyc2VkVVJMLnBhdGhuYW1lLnNwbGl0KFwiL1wiKVsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdlIGhhdmUgc3VjY2VkZWRcbiAgICAgICAgc3RhdHVzID0gdHJ1ZTtcblxuICAgICAgICAvLyBub3cgZm9yIHZpbWVvXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBwYXJzZWRVUkwuaG9zdCA9PT0gXCJwbGF5ZXIudmltZW8uY29tXCJcbiAgICAgICkge1xuICAgICAgICAvLyBtdWNoIHNpbXBsZXJcbiAgICAgICAgb3JpZ2luID0gXCJ2aW1lb1wiO1xuICAgICAgICBzcmMgPSBwYXJzZWRVUkwucGF0aG5hbWUuc3BsaXQoXCIvXCIpWzJdO1xuICAgICAgICBzdGF0dXMgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXMgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3JjLFxuICAgICAgb3JpZ2luLFxuICAgICAgc3RhdHVzLFxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVWaWRlbyh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9nZXRWaWRlb1NyY09yaWdpbkFuZFN0YXR1cyh1cmwpO1xuXG4gICAgaWYgKFxuICAgICAgZGF0YS5zdGF0dXMgJiZcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50ICYmXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudC50eXBlID09PSBcInZpZGVvXCJcbiAgICApIHtcbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgICAgb3JpZ2luOiBkYXRhLm9yaWdpbixcbiAgICAgICAgc3JjOiBkYXRhLnNyYyxcbiAgICAgIH0gYXMgYW55LCB7XG4gICAgICAgIGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvclxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YS5zdGF0dXM7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBpbnNlcnQgYSB2aWRlbyBnaXZlbiB0aGUgaW5mb3JtYXRpb25cbiAgICogQHBhcmFtIHVybCB0aGUgdXJsIG9mIHRoZSB2aWRlb1xuICAgKiBAcGFyYW0gYXQgYSBwYXJ0aWFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKiBAcmV0dXJucyBhIGJvb2xlYW4gb24gd2hldGhlciBpdCBzdWNjZWVkZWRcbiAgICovXG4gIHB1YmxpYyBpbnNlcnRWaWRlbyh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9nZXRWaWRlb1NyY09yaWdpbkFuZFN0YXR1cyh1cmwpO1xuXG5cbiAgICAvLyBhbmQgaW5zZXJ0IHRoZSB2aWRlbyBpZiB3ZSBoYXZlIGJlZW5cbiAgICAvLyBjb25zaWRlcmVkIHN1Y2Nlc2Z1bFxuICAgIGNvbnN0IHZpZGVvTm9kZTogSVZpZGVvID0ge1xuICAgICAgdHlwZTogXCJ2aWRlb1wiLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlLFxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgb3JpZ2luOiBkYXRhLm9yaWdpbiBhcyBhbnksXG4gICAgICBzcmM6IGRhdGEuc3JjLFxuICAgIH1cblxuICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgIGlmICghdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCB2aWRlb05vZGUsIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIHZpZGVvTm9kZSk7XG4gICAgfVxuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgLy8gdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG5cbiAgICAvLyByZXR1cm4gdGhlIHN0YXR1c1xuICAgIHJldHVybiBkYXRhLnN0YXR1cztcbiAgfTtcbiAgLyoqXG4gICAqIFdpbGwgaW5zZXJ0IGEgZmlsZSBiYXNlZCBvbiB0aGUgaW5mb3JtYXRpb24gZ2l2ZW4gaXQgdXNlc1xuICAgKiB0aGUgc3RhbmRhcmQgb24gaW5zZXJ0IGZpbGUgZnVuY3Rpb24gaW4gb3JkZXIgdG8gcGVyZm9tIGl0XG4gICAqXG4gICAqIEBwYXJhbSBmaWxlIHRoZSBmaWxlIHRvIGluc2VydFxuICAgKiBAcGFyYW0gYXQgYSBwYXJ0aWFsIHJhbmdlIHRvIGluc2VydCBhdFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluc2VydEZpbGUoZmlsZTogRmlsZSkge1xuICAgIC8vIHNvIHdlIHRyeVxuICAgIHRyeSB7XG4gICAgICAvLyB3ZSBjYWxsIHRoZSBpbnNlcnQgZmlsZSBmdW5jdGlvbiwgYW5kIHBhc3MgZmFsc2UgYmVjYXVzZVxuICAgICAgLy8gd2UgYXJlIG5vdCBkZWFsaW5nIHdpdGggYW4gaW1hZ2VcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnByb3BzLm9uSW5zZXJ0RmlsZShmaWxlLCBmYWxzZSk7XG5cbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZyB0aGVyZSBzaG91bGQgYmUgYW4gZXJyb3IgaW4gdGhlIHN0YXRlXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gbm93IHdlIGNhbiBidWlsZCB0aGUgZmlsZSBub2RlXG4gICAgICBjb25zdCBmaWxlTm9kZTogSUZpbGUgPSB7XG4gICAgICAgIHR5cGU6IFwiZmlsZVwiLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgICAgICAgaXRhbGljOiBmYWxzZSxcbiAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlLFxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgZXh0ZW5zaW9uOiBtaW1lVHlwZVRvRXh0ZW5zaW9uKGZpbGUudHlwZSksXG4gICAgICAgIGZpbGVOYW1lOiBkYXRhLnJlc3VsdC5uYW1lLFxuICAgICAgICBzaXplOiBwcmV0dHlCeXRlcyhkYXRhLnJlc3VsdC5zaXplKSxcbiAgICAgICAgc3JjOiBkYXRhLnJlc3VsdC51cmwsXG4gICAgICAgIHNyY0lkOiBkYXRhLnJlc3VsdC5pZCxcbiAgICAgIH07XG5cbiAgICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcyh0aGlzLmVkaXRvciwgZmlsZU5vZGUsIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBmaWxlTm9kZSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBXaWxsIGluc2VydCBhIGNvbnRhaW5lciBhdCB0aGUgZ2l2ZW4gbG9jYXRpb25cbiAgICogQHBhcmFtIHR5cGUgb3B0aW9uYWwsIHRoZSBjb250YWluZXIgdHlwZSwgb3RoZXJ3aXNlIHdpbGwgaW5zZXJ0IGEgc3RhbmRhcmQgY29udGFpbmVyXG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCByYW5nZVxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluc2VydENvbnRhaW5lcih0eXBlPzogc3RyaW5nKSB7XG4gICAgLy8gbm93IHdlIGNhbiBtYWtlIHRoZSBjb250YWluZXJcbiAgICBjb25zdCBjb250YWluZXJOb2RlOiBJQ29udGFpbmVyID0ge1xuICAgICAgdHlwZTogXCJjb250YWluZXJcIixcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcInBhcmFncmFwaFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGJvbGQ6IGZhbHNlLFxuICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBjb250YWluZXJUeXBlOiB0eXBlIHx8IG51bGwsXG4gICAgfTtcblxuICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgIGlmICghdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBjb250YWluZXJOb2RlLCB7IGF0OiB0aGlzLmdldEZhbGxiYWNrSW5zZXJ0UGF0aCgpIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBjb250YWluZXJOb2RlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydHMgYSBjdXN0b20gZWxlbWVudFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgdHlwZSBmb3IgdGhlIGN1c3RvbSBlbGVtZW50XG4gICAqIEBwYXJhbSBhdCBhbiBvcHRpb25hbCBhdCByYW5nZSB0byBpbnNlcnQgdGhlIGN1c3RvbSBhdFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluc2VydEN1c3RvbSh0eXBlOiBzdHJpbmcpIHtcbiAgICAvLyBub3cgd2UgY2FuIG1ha2UgdGhlIGN1c3RvbVxuICAgIGNvbnN0IGN1c3RvbU5vZGU6IElDdXN0b20gPSB7XG4gICAgICB0eXBlOiBcImN1c3RvbVwiLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYm9sZDogZmFsc2UsXG4gICAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gICAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2UsXG4gICAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9IGFzIGFueVxuICAgICAgXSxcbiAgICAgIGN1c3RvbVR5cGU6IHR5cGUsXG4gICAgfTtcblxuICAgIC8vIGFuZCB3ZSBjYWxsIHRoZSBpbnNlcnQgbm9kZVxuICAgIGlmICghdGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBjdXN0b21Ob2RlLCB7IGF0OiB0aGlzLmdldEZhbGxiYWNrSW5zZXJ0UGF0aCgpIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBjdXN0b21Ob2RlKTtcbiAgICB9XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICAvLyB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgfTtcblxuICAvKipcbiAgICogTWFrZXMgYSBxdW90ZSBvdXQgb2YgdGhlIGN1cnJlbnQgZWxlbWVudFxuICAgKiBAcGFyYW0gYXQgdG9nZ2xlIGF0IHRoZSBnaXZlbiByYW5nZSwgdGhpcyB3aWxsIGNhdXNlIGEgZm9jdXNcbiAgICovXG4gIHB1YmxpYyBhc3luYyB0b2dnbGVRdW90ZSgpIHtcbiAgICAvLyBub3cgd2UgZ290IHRvIGNoZWNrIGlmIHdlIGFyZSBjb2xsYXBzZWRcbiAgICBjb25zdCBpc0NvbGxhcHNlZCA9IFJhbmdlLmlzQ29sbGFwc2VkKHRoaXMuZWRpdG9yLnNlbGVjdGlvbik7XG5cbiAgICBpZiAoaXNDb2xsYXBzZWQgJiYgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudC50eXBlID09PSBcInF1b3RlXCIpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhcbiAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBcInBhcmFncmFwaFwiLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogXCJxdW90ZVwiLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICAvLyB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgfTtcblxuICAvKipcbiAgICogTWFrZXMgYSB0aXRsZSBvdXQgb2YgdGhlIGN1cnJlbnQgZWxlbWVudFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgdGl0bGUgdHlwZVxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcmFuZ2VcbiAgICovXG4gIHB1YmxpYyBhc3luYyB0b2dnbGVUaXRsZSh0eXBlOiBcImgxXCIgfCBcImgyXCIgfCBcImgzXCIgfCBcImg0XCIgfCBcImg1XCIgfCBcImg2XCIpIHtcbiAgICAvLyBub3cgd2UgZ290IHRvIGNoZWNrIGlmIHdlIGFyZSBjb2xsYXBzZWRcbiAgICBjb25zdCBpc0NvbGxhcHNlZCA9IFJhbmdlLmlzQ29sbGFwc2VkKHRoaXMuZWRpdG9yLnNlbGVjdGlvbik7XG5cbiAgICBpZiAoaXNDb2xsYXBzZWQgJiYgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudC50eXBlID09PSBcInRpdGxlXCIpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhcbiAgICAgICAgICB0aGlzLmVkaXRvcixcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBcInBhcmFncmFwaFwiLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogXCJ0aXRsZVwiLFxuICAgICAgICAgICAgdGl0bGVUeXBlOiB0eXBlLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICAvLyB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgfTtcblxuICAvKipcbiAgICogTWFrZXMgYSBsaXN0IG91dCBvZiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAqIEBwYXJhbSB0eXBlIHRoZSB0eXBlIG9mIHRoZSBsaXN0IHRoYXQgaXMgdG8gYmUgdG9nZ2xlZCwgZWl0aGVyIGJ1bGxldGVkIG9yIG51bWJlclxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcmFuZ2VcbiAgICovXG4gIHB1YmxpYyBhc3luYyBpbnNlcnRMaXN0KHR5cGU6IFwiYnVsbGV0ZWRcIiB8IFwibnVtYmVyZWRcIikge1xuICAgIC8vIG5vdyB3ZSBjYW4gbWFrZSB0aGUgbHVzdFxuICAgIGNvbnN0IGxpc3ROb2RlOiBJTGlzdCA9IHtcbiAgICAgIHR5cGU6IFwibGlzdFwiLFxuICAgICAgbGlzdFR5cGU6IHR5cGUsXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogXCJsaXN0LWl0ZW1cIixcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgU1RBTkRBUkRfUEFSQUdSQVBIKCksXG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuXG4gICAgLy8gYW5kIHdlIGNhbGwgdGhlIGluc2VydCBub2RlXG4gICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGxpc3ROb2RlLCB7IGF0OiB0aGlzLmdldEZhbGxiYWNrSW5zZXJ0UGF0aCgpIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBsaXN0Tm9kZSk7XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyB1cGRhdGVMaW5rKHVybDogc3RyaW5nLCB0dmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIC8vIG90aGVyd2lzZSBsZXQncyBmaW5kIHdoYXQgdXJsIHdlIGFyZSB1c2luZ1xuICAgIGxldCB2YWxpZFN0YXRlOiBib29sZWFuID0gdHJ1ZTtcbiAgICAvLyBpZiB0aGVyZSBhcmUgbm8gdHZhbHVlJ3MgZ2l2ZW5cbiAgICBpZiAodXJsKSB7XG4gICAgICAvLyB3ZSBhdHRlbXB0IHRvIHBhcnNlIGl0XG4gICAgICB0cnkge1xuICAgICAgICAvLyBhbmQgc28gd2UgZG8gaW4gb3JkZXIgdG8gY2hlY2sgbG9jYWxpdHlcbiAgICAgICAgY29uc3QgdXJsUGFyc2VkID0gbmV3IFVSTCh1cmwpO1xuICAgICAgICBjb25zdCBpc0xvY2FsID0gdXJsUGFyc2VkLmhvc3RuYW1lID09PSBsb2NhdGlvbi5ob3N0bmFtZTtcblxuICAgICAgICAvLyBub3cgYXMgZmVhdHVyZSBzdXBwb3J0IG1heWJlIG9ubHkgbG9jYWwgdXJscyBiZSBhbGxvd2VkXG4gICAgICAgIGNvbnN0IG9ubHlMb2NhbCA9ICF0aGlzLnByb3BzLmZlYXR1cmVzLnN1cHBvcnRzRXh0ZXJuYWxMaW5rcztcbiAgICAgICAgLy8gaWYgaXQncyBzdWNoIHRoZSBjYXNlIGFkbiBpdCdzIG5vdCBhIGxvY2FsIHVybFxuICAgICAgICBpZiAob25seUxvY2FsICYmICFpc0xvY2FsKSB7XG4gICAgICAgICAgLy8gd2UgaGF2ZSBmYWlsZWRcbiAgICAgICAgICB2YWxpZFN0YXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICB2YWxpZFN0YXRlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50ICYmXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQudHlwZSA9PT0gXCJsaW5rXCJcbiAgICApIHtcbiAgICAgIGNvbnN0IGxpbms6IFBhcnRpYWw8SUxpbms+ID0ge1xuICAgICAgICBocmVmOiB1cmwsXG4gICAgICAgIHRocmVmOiB0dmFsdWUsXG4gICAgICB9XG4gICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCBsaW5rLCB7XG4gICAgICAgIGF0OiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICAvLyB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcblxuICAgIHJldHVybiB2YWxpZFN0YXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2VzIGEgbGluayBvdXQgb2YgdGhlIGN1cnJlbnQgZWxlbWVudFxuICAgKiBAcGFyYW0gdXJsIHRoZSB1cmwgdGhhdCB3ZSBhcmUgdXNpbmcgKG51bGwgaWYgdXNpbmcgdHZhbHVlKVxuICAgKiBAcGFyYW0gdHZhbHVlIHRoZSB0ZW1wbGF0ZSB2YWx1ZSB0byB1c2UgKG51bGwgaWYgcHJvdmlkaW5nIHVybClcbiAgICogQHBhcmFtIGF0IGFuIG9wdGlvbmFsIHJhbmdlIHRvIHBhc3NcbiAgICogQHJldHVybnMgYSBib29sZWFuIGlmIHRoZSBsaW5rIHdhcyB2YWxpZCBhbmQgdG9nZ2xlTGlua1xuICAgKi9cbiAgcHVibGljIHRvZ2dsZUxpbmsodXJsOiBzdHJpbmcsIHR2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgLy8gb3RoZXJ3aXNlIGxldCdzIGZpbmQgd2hhdCB1cmwgd2UgYXJlIHVzaW5nXG4gICAgbGV0IHZhbGlkU3RhdGU6IGJvb2xlYW4gPSB0cnVlO1xuICAgIC8vIGlmIHRoZXJlIGFyZSBubyB0dmFsdWUncyBnaXZlblxuICAgIGlmICh1cmwpIHtcbiAgICAgIC8vIHdlIGF0dGVtcHQgdG8gcGFyc2UgaXRcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIGFuZCBzbyB3ZSBkbyBpbiBvcmRlciB0byBjaGVjayBsb2NhbGl0eVxuICAgICAgICBjb25zdCB1cmxQYXJzZWQgPSBuZXcgVVJMKHVybCk7XG4gICAgICAgIGNvbnN0IGlzTG9jYWwgPSB1cmxQYXJzZWQuaG9zdG5hbWUgPT09IGxvY2F0aW9uLmhvc3RuYW1lO1xuXG4gICAgICAgIC8vIG5vdyBhcyBmZWF0dXJlIHN1cHBvcnQgbWF5YmUgb25seSBsb2NhbCB1cmxzIGJlIGFsbG93ZWRcbiAgICAgICAgY29uc3Qgb25seUxvY2FsID0gIXRoaXMucHJvcHMuZmVhdHVyZXMuc3VwcG9ydHNFeHRlcm5hbExpbmtzO1xuICAgICAgICAvLyBpZiBpdCdzIHN1Y2ggdGhlIGNhc2UgYWRuIGl0J3Mgbm90IGEgbG9jYWwgdXJsXG4gICAgICAgIGlmIChvbmx5TG9jYWwgJiYgIWlzTG9jYWwpIHtcbiAgICAgICAgICAvLyB3ZSBoYXZlIGZhaWxlZFxuICAgICAgICAgIHZhbGlkU3RhdGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHZhbGlkU3RhdGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBsaW5rOiBJTGluayA9IHtcbiAgICAgIHR5cGU6IFwibGlua1wiLFxuICAgICAgaHJlZjogdXJsLFxuICAgICAgdGhyZWY6IHR2YWx1ZSxcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIFNUQU5EQVJEX1RFWFRfTk9ERSh0aGlzLnByb3BzLmJhc2VJMThuLmxpbmspXG4gICAgICBdXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5lZGl0b3Iuc2VsZWN0aW9uICYmXG4gICAgICBSYW5nZS5pc0NvbGxhcHNlZCh0aGlzLmVkaXRvci5zZWxlY3Rpb24pXG4gICAgKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCAmJlxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQudHlwZSA9PT0gXCJsaW5rXCJcbiAgICAgICkge1xuICAgICAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvclxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGxpbmspO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5lZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBUcmFuc2Zvcm1zLndyYXBOb2Rlcyh0aGlzLmVkaXRvciwgbGluaywge1xuICAgICAgICBtYXRjaDogKHYpID0+IFRleHQuaXNUZXh0KHYpLFxuICAgICAgICBzcGxpdDogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKHRoaXMuZWRpdG9yLCBsaW5rLCB7XG4gICAgICAgIGF0OiB0aGlzLmdldEZhbGxiYWNrSW5zZXJ0UGF0aCgpLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgLy8gdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG5cbiAgICAvLyB3ZSBoYXZlIHN1Y2NlZWRlZFxuICAgIHJldHVybiB2YWxpZFN0YXRlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBYml0cmFyeSB1cGRhdGUsIGRvZXMgYW4gYXJiaXRyYXJ5IHVwZGF0ZSBmb3IgYW4gZWxlbWVudCBvciBub2RlXG4gICAqIGF0IHRoZSBnaXZlbiBwYXRoXG4gICAqIEBwYXJhbSBhcmdzIGFuIG9iamVjdCB0byB1cGRhdGUgdGhhdCBzaG91bGQgYmUgcGFydGlhbCBvZiB0aGUgZWxlbWVudCByaWNoIHByb3BlcnRpZXNcbiAgICogQHBhcmFtIGFuY2hvciB0aGUgbm9kZSBhbmNob3IgdG8gdXBkYXRlXG4gICAqL1xuICBwdWJsaWMgc2V0KGFyZ3M6IGFueSwgYW5jaG9yOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwgYXJncywgeyBhdDogYW5jaG9yIH0pO1xuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgLy8gdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGN1cnJlbnQgc3R5bGUgZm9yIHRoZSBlbGVtZW50XG4gICAqIEBwYXJhbSBzdHlsZSB0aGUgc3R5bGUgdG8gYmUgc2V0LCB0aGlzIHNob3VsZCBiZSBhIHN0eWxlIHN0cmluZ1xuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBlbGVtZW50IGFuY2hvciB0byB1cGRhdGVcbiAgICovXG4gIHB1YmxpYyBzZXRTdHlsZShzdHlsZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICBzdHlsZSxcbiAgICB9LCB7IGF0OiBhbmNob3IgfSk7XG5cbiAgICAvLyByZWxhdGVkIHRvIHRoZSBidWdneSBtZXNzIHNsYXRlIGhhcyBiZWNvbWVcbiAgICAvLyB0aGlzLm9uQ2hhbmdlKHRoaXMuZWRpdG9yLmNoaWxkcmVuKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgdGVtcGxhdGUgaG92ZXIgc3R5bGUgZm9yIHRoZSBlbGVtZW50XG4gICAqIEBwYXJhbSBzdHlsZSB0aGUgc3R5bGUgdG8gYmUgc2V0LCB0aGlzIHNob3VsZCBiZSBhIHN0eWxlIHN0cmluZ1xuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBlbGVtZW50IGFuY2hvciB0byB1cGRhdGVcbiAgICovXG4gIHB1YmxpYyBzZXRIb3ZlclN0eWxlKHN0eWxlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIHN0eWxlSG92ZXI6IHN0eWxlLFxuICAgIH0sIHsgYXQ6IGFuY2hvciB9KTtcblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIC8vIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhY3RpdmUgc3R5bGUgZm9yIHRoZSBlbGVtZW50XG4gICAqIEBwYXJhbSBzdHlsZSB0aGUgc3R5bGUgdG8gYmUgc2V0LCB0aGlzIHNob3VsZCBiZSBhIHN0eWxlIHN0cmluZ1xuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBlbGVtZW50IGFuY2hvciB0byB1cGRhdGVcbiAgICovXG4gIHB1YmxpYyBzZXRBY3RpdmVTdHlsZShzdHlsZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICBzdHlsZUFjdGl2ZTogc3R5bGUsXG4gICAgfSwgeyBhdDogYW5jaG9yIH0pO1xuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgLy8gdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHJpY2ggY2xhc3NlcyBvZiB0aGUgZWxlbWVudFxuICAgKiBAcGFyYW0gY2xhc3NlcyBhbiBhcnJheSBvZiBzdHJpbmcgdGhhdCByZXByZXNlbnQgdGhlIHJpY2ggY2xhc3Nlc1xuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBlbGVtZW50IGFuY2hvclxuICAgKi9cbiAgcHVibGljIHNldFJpY2hDbGFzc2VzKGNsYXNzZXM6IHN0cmluZ1tdLCBhbmNob3I6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICByaWNoQ2xhc3NMaXN0OiBjbGFzc2VzLFxuICAgIH0sIHsgYXQ6IGFuY2hvciB9KTtcblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIC8vIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIGEgZ2l2ZW4gYWN0aW9uIGZvciB1c2FnZSB3aXRoaW4gdGVtcGxhdGluZ1xuICAgKiBhcyBhbiBldmVudCBsaXN0ZW5lclxuICAgKiBcbiAgICogTm90ZSB0aGF0IHVzaW5nIHRoaXMgZnVuY3Rpb24gaXMgcmlza3kgaWYgdGhlIHN0cnVjdHVyZSB0byBwcm92aWRlIGEgZ2l2ZW5cbiAgICoga2V5IGlzIG5vdCB1bmRlcnN0b29kIHByb3Blcmx5LCBrZXlzIHNob3VsZCBiZSB2YWxpZFxuICAgKiBcbiAgICogQHBhcmFtIGtleSB0aGUga2V5IGZvciB0aGUgYWN0aW9uLCBzaG91bGQgYmUgc29tZXRoaW5nIGxpa2UsIGNsaWNrLCBtb3VzZWVudGVyLCBldGMuLi5cbiAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSBmb3IgdGhlIHByb3BlcnR5XG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGFuY2hvciBmb3IgdGhlIGVsZW1lbnQgdGhhdCBpcyB0byBiZSBhc3NpZ25lZCB0aGUgbGlzdGVuZXIgdG8gdHVybiBpbnRlcmFjdGl2ZVxuICAgKi9cbiAgcHVibGljIHNldEFjdGlvbihrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgW2tleV06IHZhbHVlLFxuICAgIH0sIHsgYXQ6IGFuY2hvciB9KTtcblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIC8vIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYW4gVUkgaGFuZGxlciB0byBhIGdpdmVuIGVsZW1lbnQgc28gdGhhdCBpdCBpcyB1aSBoYW5kbGVkXG4gICAqIFxuICAgKiBUaGlzIGlzIGFuIGF2YW5jZWQgb3B0aW9uIGZvciB1aSBoYW5kbGluZ1xuICAgKiBcbiAgICogbm9ybWFsbHkgeW91IHdvdWxkIHVzZSB0aGlzIGZ1bmN0aW9uIGZvciB1cGRhdGluZyBhbiBhbHJlYWR5IGluc2VydGVkXG4gICAqIHVpIGhhbmRsZWQgY29tcG9uZW50XG4gICAqIFxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIGZvciB0aGUgdWkgaGFuZGxlciB0aGF0IHNob3VsZCBiZSB0YWtlbiBvdXQgb2YgdGhlIGNvbnRleHRcbiAgICogQHBhcmFtIGFyZ3MgdGhlIGFyZ3MgZm9yIHRoZSB1aSBoYW5kbGVyXG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGFuY2hvciB3aGVyZSB0byBpbnNlcnQgYXRcbiAgICovXG4gIHB1YmxpYyBzZXRVSUhhbmRsZXIodmFsdWU6IHN0cmluZywgYXJnczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSwgYW5jaG9yOiBQYXRoKSB7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2Rlcyh0aGlzLmVkaXRvciwge1xuICAgICAgdWlIYW5kbGVyOiB2YWx1ZSxcbiAgICAgIHVpSGFuZGxlckFyZ3M6IGFyZ3MsXG4gICAgfSwgeyBhdDogYW5jaG9yIH0pO1xuXG4gICAgLy8gcmVsYXRlZCB0byB0aGUgYnVnZ3kgbWVzcyBzbGF0ZSBoYXMgYmVjb21lXG4gICAgLy8gdGhpcy5vbkNoYW5nZSh0aGlzLmVkaXRvci5jaGlsZHJlbik7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1aSBoYW5kbGVyIGFyZ3MgdG8gYSBnaXZlbiBlbGVtZW50XG4gICAqIEBwYXJhbSBrZXkgdGhlIHVpIGhhbmRsZXIgYXJnIGtleVxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIHVpIGhhbmRsZXIgYXJnIHZhbHVlXG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGFuY2hvciBpbiBxdWVzdGlvblxuICAgKi9cbiAgcHVibGljIHNldFVJSGFuZGxlckFyZyhrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSB7XG4gICAgY29uc3Qgbm9kZUF0UGF0aCA9IE5vZGUuZ2V0KHRoaXMuZWRpdG9yLCBhbmNob3IpO1xuICAgIGxldCBuZXdWYWx1ZTogYW55ID0ge1xuICAgICAgLi4uKG5vZGVBdFBhdGggYXMgYW55IGFzIFJpY2hFbGVtZW50KS51aUhhbmRsZXJBcmdzLFxuICAgICAgW2tleV06IHZhbHVlLFxuICAgIH07XG5cbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVsZXRlIG5ld1ZhbHVlW2tleV07XG4gICAgfVxuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIHVpSGFuZGxlckFyZ3M6IG5ld1ZhbHVlLFxuICAgIH0sIHsgYXQ6IGFuY2hvciB9KTtcblxuICAgIC8vIHJlbGF0ZWQgdG8gdGhlIGJ1Z2d5IG1lc3Mgc2xhdGUgaGFzIGJlY29tZVxuICAgIC8vIHRoaXMub25DaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluc2VydHMgYW4gZWxlbWVudCBhdCBhIGdpdmVuIHBvc2l0aW9uXG4gICAqIEBwYXJhbSBlbGVtZW50IHRoZSBlbGVtZW50IFxuICAgKiBAcGFyYW0gYXQgYW4gb3B0aW9uYWwgcG9zaXRpb24gdG8gZG8gaXQgYXRcbiAgICovXG4gIHB1YmxpYyBpbnNlcnRFbGVtZW50KGVsZW1lbnQ6IFJpY2hFbGVtZW50KSB7XG4gICAgLy8gYW5kIHdlIGNhbGwgdGhlIGluc2VydCBub2RlXG4gICAgaWYgKCF0aGlzLmVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGVsZW1lbnQsIHsgYXQ6IHRoaXMuZ2V0RmFsbGJhY2tJbnNlcnRQYXRoKCkgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXModGhpcy5lZGl0b3IsIGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb250ZXh0IGtleVxuICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIGZvciB0aGUgbmV3IGNvbnRleHQga2V5XG4gICAqIEBwYXJhbSBhbmNob3IgdGhlIGFuY2hvciB3aGVyZSB0byBzZXQgdGhlIGNvbnRleHQga2V5IGF0XG4gICAqL1xuICBwdWJsaWMgc2V0Q29udGV4dCh2YWx1ZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICBjb250ZXh0OiB2YWx1ZSxcbiAgICB9LCB7IGF0OiBhbmNob3IgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGNvbnRleHQga2V5XG4gICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgZm9yIHRoZSBuZXcgaWYgY29uZGl0aW9uIGtleVxuICAgKiBAcGFyYW0gYW5jaG9yIHRoZSBhbmNob3Igd2hlcmUgdG8gc2V0IHRoZSBjb250ZXh0IGtleSBhdFxuICAgKi9cbiAgcHVibGljIHNldElmQ29uZGl0aW9uKHZhbHVlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkge1xuICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModGhpcy5lZGl0b3IsIHtcbiAgICAgIGlmQ29uZGl0aW9uOiB2YWx1ZSxcbiAgICB9LCB7IGF0OiBhbmNob3IgfSk7XG4gIH07XG5cblxuICAvKipcbiAgKiBTZXRzIHRoZSBmb3ItZWFjaCBsb29wIGtleVxuICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgZm9yIHRoZSBuZXcgY29udGV4dCBrZXlcbiAgKiBAcGFyYW0gYW5jaG9yIHRoZSBhbmNob3Igd2hlcmUgdG8gc2V0IHRoZSBjb250ZXh0IGtleSBhdFxuICAqL1xuICBwdWJsaWMgc2V0Rm9yRWFjaCh2YWx1ZTogc3RyaW5nLCBhbmNob3I6IFBhdGgpIHtcbiAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKHRoaXMuZWRpdG9yLCB7XG4gICAgICBmb3JFYWNoOiB2YWx1ZSxcbiAgICB9LCB7IGF0OiBhbmNob3IgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZvcm1hdHMgdGhlIGN1cnJlbnQgdGV4dCBhcyBib2xkXG4gICAqL1xuICBwdWJsaWMgZm9ybWF0VG9nZ2xlKGtleTogXCJib2xkXCIgfCBcIml0YWxpY1wiIHwgXCJ1bmRlcmxpbmVcIikge1xuICAgIC8vIGlmIHdlIGhhdmUgYSBzZWxlY3Rpb24gYW5kIHRoZSBwb2ludHMgYXJlIGVxdWFsXG4gICAgLy8gYmFzaWNhbGx5IHRoZSBzYW1lIGFzIGEgY29sbGFwc2VkIHNlbGVjdGlvblxuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFRleHQgJiZcbiAgICAgIHRoaXMuZWRpdG9yLnNlbGVjdGlvbiAmJlxuICAgICAgUG9pbnQuZXF1YWxzKHRoaXMuZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IsIHRoaXMuZWRpdG9yLnNlbGVjdGlvbi5mb2N1cylcbiAgICApIHtcbiAgICAgIC8vIHRoZW4gd2UgaW5zZXJ0IGFuIGVtcHR5IHRleHQgbm9kZSwgaXQgd2lsbCByZW1haW4gYWxpdmVcbiAgICAgIC8vIGJ5IHZpcnR1ZSBvZiBpdCBiZWluZyB0aGUgc2FtZSBsb2NhdGlvbiBhcyBvdXIgY3Vyc29yIHNvXG4gICAgICAvLyBub3JtYWxpemF0aW9uIHdvbid0IHJlbW92ZSBpdFxuICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhcbiAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgIHtcbiAgICAgICAgICAuLi50aGlzLnN0YXRlLmN1cnJlbnRUZXh0LFxuICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgW2tleV06ICF0aGlzLnN0YXRlLmN1cnJlbnRUZXh0W2tleV0sXG4gICAgICAgIH0sXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBvdGhlcndpc2Ugd2UganVzdCB0b2dnbGVcbiAgICAgIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRUZXh0KSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAgeyBba2V5XTogIXRoaXMuc3RhdGUuY3VycmVudFRleHRba2V5XSB9LFxuICAgICAgICAgIHsgbWF0Y2g6IG4gPT4gVGV4dC5pc1RleHQobiksIHNwbGl0OiB0cnVlIH1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0KSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgICAgdGhpcy5lZGl0b3IsXG4gICAgICAgICAgeyBba2V5XTogIXRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dFtrZXldIH0sXG4gICAgICAgICAgeyBtYXRjaDogbiA9PiBUZXh0LmlzVGV4dChuKSwgYXQ6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yLCBtb2RlOiBcImFsbFwiIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyBhIGhlbHBlciBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgaW4gb3JkZXIgdG8gZXh0cmFjdCB0aGUgYXZhaWxhYmxlXG4gICAqIGNsYXNzZXMgdGhhdCB3ZSBoYXZlIGZvciB1c2FnZSB3aXRoaW4gcmljaCBjbGFzc2VzLCBjb250YWluZXIsIGFuZCBjdXN0b21zXG4gICAqIGNvbnNpZGVyaW5nIHdoYXQgd2UgaGF2ZSBmb3VuZCBpbiB0aGUgYWxsIHByb21pc2UgZm9yIGFsbCB3aGF0IGlzIGF2YWlsYWJsZVxuICAgKiBiZWNhdXNlIHRoZXJlIG1pZ2h0IGJlIGZpbHRlcnMgZm9yIHRoZW0sIGFuZCB3ZSBuZWVkIHRvIGZpbmQgdGhlIGxhYmVscyBhbmQgd2hhdG5vdFxuICAgKiBvZiB3aGF0IHdlIGNhbiBhY3R1YWxseSB1c2VcbiAgICogXG4gICAqIEBwYXJhbSBmZWF0dXJlIHRoZSBmZWF0dXJlIHdlIGFyZSBzZWFyY2hpbmcgZm9yIGJhc2ljYWxseSwgc3VwcG9ydHNDdXN0b20sIHN1cHBvcnRzUmljaENsYXNzZXMgYW5kIHN1cHBvcnRzQ29udGFpbmVyc1xuICAgKiB0aGF0IHdlIGRlY2lkZSBvbiB3aGV0aGVyIHdlIHN1cHBvcnQgdGhhdCBmZWF0dXJlXG4gICAqIEBwYXJhbSBmZWF0dXJlQWxsIHRoZSBhbGwgbmFtZSBmb3IgdGhlIGZlYXR1cmUgaW4gdGhlIHN0YXRlIGFuZCB3aGVyZSBpdCBpcyBsb2NhdGVkIGluIHRoZSBzdGF0ZSB0aGF0IHdlIGFyZSBtZWFudCB0byBhd2FpdFxuICAgKiBiYXNpY2FsbHkgYWxsQ3VzdG9tcywgYWxsUmljaENsYXNzZXMgYW5kIGFsbENvbnRhaW5lcnNcbiAgICogQHBhcmFtIGZlYXR1cmVMaXN0IHRoZSBsaXN0IG9mIHN1cHBvcnRlZCB0aGF0IGlzIGdpdmVuIGluIHRoZSBmZWF0dXJlIHN1cHBvcnQgb2YgdGhlIHByb3BlcnR5IHNvIGJhc2ljYWxseVxuICAgKiBzdXBwb3J0ZWRDdXN0b21zLCBzdXBwb3J0ZWRSaWNoQ2xhc3NlcyBhbmQgc3VwcG9ydGVkQ29udGFpbmVyc1xuICAgKiBAcGFyYW0gaTE4bkxvY2F0aW9uIHRoZSBsb2NhdGlvbiBmb3IgdGhlIGkxOG4gZGF0YSBpbiB0aGUgaTE4biByb290LCBiYXNpY2FsbHkgY3VzdG9tLCBjb250YWluZXJzIGFuZCByaWNoXG4gICAqL1xuICBwcml2YXRlIGF2YWlsYWJsZUZpbHRlcmluZ0Z1bmN0aW9uKFxuICAgIGZlYXR1cmU6IHN0cmluZyxcbiAgICBmZWF0dXJlQWxsOiBzdHJpbmcsXG4gICAgZmVhdHVyZUxpc3Q6IHN0cmluZyxcbiAgICBpMThuTG9jYXRpb246IHN0cmluZyxcbiAgKTogSUF2YWlsYWJsZUVsZW1lbnRDU1NDbGFzc05hbWVbXSB7XG5cbiAgICAvLyBzbyB3ZSBkbyBpdCBpbiBvbmUgbGluZSBiZWNhdXNlIGFwcGFyZW50bHkgd2UgZG9uJ3QgY2FyZSBhYm91dCByZWFkYWJpbGl0eVxuICAgIC8vIGFuZCB3aWxsIGZpeCBpdCB3aXRoIGNvbW1lbnRzXG4gICAgcmV0dXJuIChcbiAgICAgIC8vIHdlIHBpY2sgdGhlIGZlYXR1cmUgb2YgdGhlIGVnLiBzdXBwb3J0c0N1c3RvbSwgc3VwcG9ydHNSaWNoQ2xhc3NlcyBvdXQgb2YgdGhlIGZlYXR1cmUgc3VwcG9ydCB0byBzZWVcbiAgICAgIC8vIGlmIHdlIHN1cHBvcnQgdGhhdCBmZWF0dXJlIGF0IGFsbFxuICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlc1tmZWF0dXJlXSA/XG4gICAgICAgIC8vIGlmIHdlIGRvIHdlIHBpY2sgZnJvbSB0aGUgc3RhdGUgd2hhdCB3ZSBoYXZlIGZvdW5kIGluIHRoZSBzdHlsZXNoZWV0XG4gICAgICAgIC8vIG9mIHRoZSBjbGFzc2VzIGZvciB0aGF0IGZlYXR1cmUgYXMgd2UgaGF2ZSBhd2FpdGVkXG4gICAgICAgICh0aGlzLnN0YXRlW2ZlYXR1cmVBbGxdIGFzIHN0cmluZ1tdKS5maWx0ZXIoKGMpID0+XG4gICAgICAgICAgLy8gYW5kIHdlIGZpbHRlciBiYXNlZCBvbiBvdXIgZmVhdHVyZSBsaXN0LCBpZiB3ZSBoYXZlIG9uZSBvZiBjb3Vyc2UsIG90aGVyd2lzZSBhbGwgcGFzc1xuICAgICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZXNbZmVhdHVyZUxpc3RdID8gdGhpcy5wcm9wcy5mZWF0dXJlc1tmZWF0dXJlTGlzdF0uaW5jbHVkZXMoYykgOiB0cnVlXG4gICAgICAgICkgOlxuICAgICAgICBbXVxuICAgICkubWFwKChjKSA9PiB7XG4gICAgICAvLyBhbmQgbm93IHdlIG1hcCBpbiBvcmRlciB0byBnaXZlIGl0IGEgbGFiZWwgYmFzZWQgb24gdGhlIHJvb3QgaTE4biBkYXRhXG4gICAgICAvLyBhcyB3ZSBoYXZlIGRlc2NyaWJlZCBiZWZvcmUsIGFuZCB0aGV5IGFyZSBmb3VuZCBpbiB0aGUgaTE4biBsb2NhdGlvbiB0aGF0XG4gICAgICAvLyB0aGV5IGhhdmUgYmVlbiBkZWZpbmVkIGJ5IGRlZmF1bHQgYnkgdGhpcyB0ZXh0IGVkaXRvciBlbGVtZW50XG4gICAgICAvLyBhbmQgd2Ugc2VhcmNoIGludG8gdGhlIGkxOG4gcm9vdFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IGMsXG4gICAgICAgIGxhYmVsOiAoXG4gICAgICAgICAgdGhpcy5wcm9wcy5iYXNlSTE4biAmJlxuICAgICAgICAgIHRoaXMucHJvcHMuYmFzZUkxOG5baTE4bkxvY2F0aW9uXSAmJlxuICAgICAgICAgIChcbiAgICAgICAgICAgIC8vIGJvdGggdGhlIGRlZmF1bHQgYW5kIGJ5IHJlcGxhY2luZ1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5iYXNlSTE4bltpMThuTG9jYXRpb25dW2NdIHx8XG4gICAgICAgICAgICB0aGlzLnByb3BzLmJhc2VJMThuW2kxOG5Mb2NhdGlvbl1bYy5yZXBsYWNlKC8tL2csIFwiX1wiKV1cbiAgICAgICAgICApXG4gICAgICAgICkgfHwgY1xuICAgICAgICAvLyBhbmQgaWYgd2UgZmluZCBub3RoaW5nIHdlIHVzZSB0aGUgdmFsdWUgaXRzZWxmXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIG9uIHRoZSBrZXlkb3duIG9mIHRoZSBzbGF0ZSBlZGl0b3IgaXRzZWxmXG4gICAqIEBwYXJhbSBlIHRoZSBldmVudFxuICAgKi9cbiAgcHVibGljIG9uS2V5RG93bihlOiBSZWFjdC5LZXlib2FyZEV2ZW50KSB7XG4gICAgLy8gb24gYWx0K2VudGVyIHdlIHdhbnQgdG8gaW5zZXJ0IGEgc3VwZXIgYmxvY2sgYnJlYWtcbiAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIiAmJiBlLmFsdEtleSkge1xuICAgICAgdGhpcy5pbnNlcnRTdXBlcmJyZWFrKG51bGwsIGUuc2hpZnRLZXkpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IFwielwiICYmIGUuY3RybEtleSAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgdGhpcy5lZGl0b3IudW5kbygpO1xuICAgIH0gZWxzZSBpZiAoKGUua2V5ID09PSBcInlcIiAmJiBlLmN0cmxLZXkpIHx8IChlLmtleSA9PT0gXCJ6XCIgJiYgZS5jdHJsS2V5ICYmIGUuc2hpZnRLZXkpKSB7XG4gICAgICB0aGlzLmVkaXRvci5yZWRvKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJhc2ljIG9sZCBzY2hvb2wgY29tcG9uZW50IGRpZCBtb3VudFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vIG5vdyB3ZSBjYW4gYXdhaXQgZm9yIG91ciBhbGwgcHJvbWlzZSBoZXJlXG4gICAgYXdhaXQgQUxMX1BST01JU0U7XG4gICAgLy8gYW5kIGZpdCB0aGUgaW5mb3JtYXRpb24gdGhlcmUgYXMgd2UgaGF2ZSBnb3R0ZW5cbiAgICAvLyBvdXIgYXJyYXlzIGZpbGxlZCBmcm9tIHRoZSBzdHlsZXNoZWV0XG4gICAgaWYgKCF0aGlzLmlzVW5tb3VudGVkKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgYWxsQ29udGFpbmVyczogQUxMX0NPTlRBSU5FUlMsXG4gICAgICAgIGFsbFRhYmxlczogQUxMX1RBQkxFUyxcbiAgICAgICAgYWxsQ3VzdG9tOiBBTExfQ1VTVE9NLFxuICAgICAgICBhbGxSaWNoQ2xhc3NlczogQUxMX1JJQ0hfQ0xBU1NFUyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmF1dG9Gb2N1cykge1xuICAgICAgUmVhY3RFZGl0b3IuZm9jdXModGhpcy5lZGl0b3IpO1xuICAgICAgLy8gYnVnIHNvbWV0aW1lcyBpdCB3aWxsIG5vdCBmb2N1c1xuICAgICAgLy8gRm9jdXMgZ29kIGRhbW4gaXRcbiAgICAgIHRoaXMuZm9yY2VGb2N1cygpO1xuICAgIH1cblxuICAgIGNvbnN0IGVkaXRhYmxlSFRNTEVsZW1lbnQgPSB0aGlzLmVkaXRhYmxlUmVmLmN1cnJlbnQuY2hpbGROb2Rlc1swXSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICBFRElUT1JfUE9PTC5zZXQoZWRpdGFibGVIVE1MRWxlbWVudCwgdGhpcyk7XG4gIH1cblxuICBwdWJsaWMgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUmVhZG9ubHk8SVNsYXRlRWRpdG9yUHJvcHM+LCBwcmV2U3RhdGU6IFJlYWRvbmx5PElTbGF0ZUVkaXRvclN0YXRlPiwgc25hcHNob3Q/OiBhbnkpOiB2b2lkIHtcbiAgICAvLyBpZiBvdXIgcHJldiBzZWxlY3RlZCB0ZXh0IGlzIGVtcHR5XG4gICAgaWYgKHByZXZTdGF0ZS5jdXJyZW50VGV4dCAmJiBwcmV2U3RhdGUuY3VycmVudFRleHQudGV4dCA9PT0gXCJcIikge1xuICAgICAgLy8gbGV0J3MgZmluZCB3aGVyZSBpdCBpcyBub3dcbiAgICAgIGNvbnN0IGFuY2hvckluQ3VycmVudCA9IFJlYWN0RWRpdG9yLmZpbmRQYXRoKHRoaXMuZWRpdG9yLCBwcmV2U3RhdGUuY3VycmVudFRleHQpO1xuICAgICAgaWYgKGFuY2hvckluQ3VycmVudCkge1xuICAgICAgICAvLyBsZXQncyBmaW5kIHdoYXQgaXQgaXMgbm93XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZWxlbWVudEluQ3VycmVudCA9IE5vZGUuZ2V0KHRoaXMuZWRpdG9yLCBhbmNob3JJbkN1cnJlbnQpIGFzIElUZXh0O1xuICAgICAgICAgIC8vIGlmIGl0J3Mgc3RpbGwgZW1wdHkgYW5kIHdlIGFyZSBub3Qgb3ZlciBpdCwgdGhlbiB3ZSBtYXkgd2FudCB0byBkZWxldGUgaXRcbiAgICAgICAgICBpZiAoZWxlbWVudEluQ3VycmVudC50ZXh0ID09PSBcIlwiICYmIGVsZW1lbnRJbkN1cnJlbnQgIT09IHRoaXMuc3RhdGUuY3VycmVudFRleHQpIHtcbiAgICAgICAgICAgIC8vIG5vdyB3ZSBuZWVkIHRvIGtub3cgaWYgaXQncyBhbiBpbmxpbmUgc3BhY2VyLCB2b2lkLCBldGMuLi5cbiAgICAgICAgICAgIC8vIHNvIHdlIGp1c3QgY2FsbCBub3JtYWxpemF0aW9uXG4gICAgICAgICAgICB0aGlzLm5vcm1hbGl6ZU5vZGUoW3RoaXMuZWRpdG9yLCBbXV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgLy8gbm9kZSBpcyBtaXNzaW5nIGFuZCBzbGF0ZSBzb21laG93IHJlcG9ydHMgaXQgYXQgc3RpbGwgYmVpbmcgdGhlcmVcbiAgICAgICAgICAvLyBjYXVzZXMgYW4gZXJyb3IsIG5vdGhpZ24gdG8gZG8sIHRoZSBub2RlIGhhcyBiZWVuIGRlbGV0ZWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTb21ldGltZXMgc2xhdGUgbGVhdmVzIGEgc2VsZWN0aW9uIGJlaGluZCB3ZSBuZWVkIHRvIHVuc2VsZWN0IGlmIHN1Y2hcbiAgICogaXMgdGhlIGNhc2VcbiAgICovXG4gIHB1YmxpYyBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAvLyB3ZSBuZWVkIHRvIHNldCB0aGlzIHRvIHByZXZlbnQgdGhlIHNldCB2YWx1ZVxuICAgIC8vIGZyb20gYmVpbmcgY2FsbGVkIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnRcbiAgICB0aGlzLmlzVW5tb3VudGVkID0gdHJ1ZTtcbiAgICBSZWFjdEVkaXRvci5kZXNlbGVjdCh0aGlzLmVkaXRvcik7XG5cbiAgICBjb25zdCBlZGl0YWJsZUhUTUxFbGVtZW50ID0gdGhpcy5lZGl0YWJsZVJlZi5jdXJyZW50LmNoaWxkTm9kZXNbMF0gYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgRURJVE9SX1BPT0wuZGVsZXRlKGVkaXRhYmxlSFRNTEVsZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIHRoZSBoZWxwZXJzIHRoYXQgYXJlIHVzZWQgYnkgdGhlIGVkaXRvclxuICAgKiB0byBjb25zdHJ1Y3QgcmljaCB0ZXh0IGRhdGFcbiAgICovXG4gIHB1YmxpYyBnZXRIZWxwZXJzKCkge1xuICAgIGNvbnN0IGhlbHBlcnM6IElIZWxwZXJGdW5jdGlvbnMgPSB7XG4gICAgICBlZGl0b3I6IHRoaXMuZWRpdG9yLFxuICAgICAgVHJhbnNmb3JtcyxcbiAgICAgIFJhbmdlLFxuICAgICAgUmVhY3RFZGl0b3IsXG4gICAgICBIaXN0b3J5RWRpdG9yLFxuICAgICAgTm9kZSxcbiAgICAgIFBhdGgsXG5cbiAgICAgIGdldENvbnRleHRGb3I6IHRoaXMuZ2V0Q29udGV4dEZvcixcbiAgICAgIGdldFJvb3RDb250ZXh0OiB0aGlzLmdldFJvb3RDb250ZXh0LFxuICAgICAgZ2V0U3RhdGU6IHRoaXMuZ2V0U3RhdGUsXG5cbiAgICAgIHNlbGVjdFBhdGg6IHRoaXMuc2VsZWN0UGF0aCxcbiAgICAgIGRlbGV0ZVBhdGg6IHRoaXMuZGVsZXRlUGF0aCxcbiAgICAgIG1vdmVQYXRoczogdGhpcy5tb3ZlUGF0aHMsXG5cbiAgICAgIGRlbGV0ZVNlbGVjdGVkTm9kZTogdGhpcy5kZWxldGVTZWxlY3RlZE5vZGUsXG5cbiAgICAgIGdldFByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yOiB0aGlzLmdldFByZXZpb3VzU2VsZWN0ZWRFbGVtZW50QW5jaG9yLFxuICAgICAgZ2V0UHJldmlvdXNUZXh0QW5jaG9yOiB0aGlzLmdldFByZXZpb3VzVGV4dEFuY2hvcixcblxuICAgICAgZm9jdXM6IHRoaXMuZm9jdXMsXG4gICAgICBmb2N1c0F0OiB0aGlzLmZvY3VzQXQsXG5cbiAgICAgIGluc2VydFN1cGVyYnJlYWs6IHRoaXMuaW5zZXJ0U3VwZXJicmVhayxcblxuICAgICAgZm9ybWF0VG9nZ2xlOiB0aGlzLmZvcm1hdFRvZ2dsZSxcbiAgICAgIGluc2VydENvbnRhaW5lcjogdGhpcy5pbnNlcnRDb250YWluZXIsXG4gICAgICBpbnNlcnRDdXN0b206IHRoaXMuaW5zZXJ0Q3VzdG9tLFxuICAgICAgaW5zZXJ0RmlsZTogdGhpcy5pbnNlcnRGaWxlLFxuICAgICAgaW5zZXJ0SW1hZ2U6IHRoaXMuaW5zZXJ0SW1hZ2UsXG4gICAgICBpbnNlcnRWaWRlbzogdGhpcy5pbnNlcnRWaWRlbyxcbiAgICAgIHVwZGF0ZVZpZGVvOiB0aGlzLnVwZGF0ZVZpZGVvLFxuICAgICAgaW5zZXJ0VGVtcGxhdGVUZXh0OiB0aGlzLmluc2VydFRlbXBsYXRlVGV4dCxcbiAgICAgIHVwZGF0ZVRlbXBsYXRlVGV4dDogdGhpcy51cGRhdGVUZW1wbGF0ZVRleHQsXG4gICAgICBpbnNlcnRUZW1wbGF0ZUhUTUw6IHRoaXMuaW5zZXJ0VGVtcGxhdGVIVE1MLFxuICAgICAgdXBkYXRlVGVtcGxhdGVIVE1MOiB0aGlzLnVwZGF0ZVRlbXBsYXRlSFRNTCxcbiAgICAgIGluc2VydFRhYmxlOiB0aGlzLmluc2VydFRhYmxlLFxuICAgICAgaW5zZXJ0VGFibGVDb2x1bW46IHRoaXMuaW5zZXJ0VGFibGVDb2x1bW4sXG4gICAgICBpbnNlcnRUYWJsZVJvdzogdGhpcy5pbnNlcnRUYWJsZVJvdyxcbiAgICAgIHRvZ2dsZVRhYmxlOiB0aGlzLnRvZ2dsZVRhYmxlLFxuICAgICAgY2FuVG9nZ2xlVGFibGU6IHRoaXMuY2FuVG9nZ2xlVGFibGUsXG4gICAgICB0b2dnbGVMaW5rOiB0aGlzLnRvZ2dsZUxpbmssXG4gICAgICB1cGRhdGVMaW5rOiB0aGlzLnVwZGF0ZUxpbmssXG4gICAgICBpbnNlcnRMaXN0OiB0aGlzLmluc2VydExpc3QsXG4gICAgICB0b2dnbGVRdW90ZTogdGhpcy50b2dnbGVRdW90ZSxcbiAgICAgIHRvZ2dsZVRpdGxlOiB0aGlzLnRvZ2dsZVRpdGxlLFxuICAgICAgc2V0QWN0aXZlU3R5bGU6IHRoaXMuc2V0QWN0aXZlU3R5bGUsXG4gICAgICBzZXRDb250ZXh0OiB0aGlzLnNldENvbnRleHQsXG4gICAgICBzZXRJZkNvbmRpdGlvbjogdGhpcy5zZXRJZkNvbmRpdGlvbixcbiAgICAgIHNldEZvckVhY2g6IHRoaXMuc2V0Rm9yRWFjaCxcbiAgICAgIHNldEhvdmVyU3R5bGU6IHRoaXMuc2V0SG92ZXJTdHlsZSxcbiAgICAgIHNldFN0eWxlOiB0aGlzLnNldFN0eWxlLFxuICAgICAgc2V0OiB0aGlzLnNldCxcbiAgICAgIHNldFJpY2hDbGFzc2VzOiB0aGlzLnNldFJpY2hDbGFzc2VzLFxuICAgICAgc2V0QWN0aW9uOiB0aGlzLnNldEFjdGlvbixcbiAgICAgIHNldFVJSGFuZGxlcjogdGhpcy5zZXRVSUhhbmRsZXIsXG4gICAgICBzZXRVSUhhbmRsZXJBcmc6IHRoaXMuc2V0VUlIYW5kbGVyQXJnLFxuICAgICAgaW5zZXJ0RWxlbWVudDogdGhpcy5pbnNlcnRFbGVtZW50LFxuICAgICAgZGVsZXRlVGFibGVDb2x1bW46IHRoaXMuZGVsZXRlVGFibGVDb2x1bW4sXG4gICAgICBkZWxldGVUYWJsZVJvdzogdGhpcy5kZWxldGVUYWJsZVJvdyxcblxuICAgICAgaGFyZEJsdXI6IHRoaXMuaGFyZEJsdXIsXG4gICAgICBzb2Z0Qmx1cjogdGhpcy5zb2Z0Qmx1cixcbiAgICB9XG5cbiAgICByZXR1cm4gaGVscGVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyB0aGUgZmVhdHVyZSBzdXBwb3J0IGluZm9ybWF0aW9uIHRoYXQgaXMgdXNlZCBieSB0aGUgZWRpdG9yXG4gICAqIHRvIGtub3cgd2hhdCBpdCBjYW4gYW5kIGNhbid0IGRvXG4gICAqL1xuICBwdWJsaWMgZ2V0RmVhdHVyZVN1cHBvcnQoKSB7XG4gICAgLy8gSGFwcGVucyBmb3IgcGxhaW50ZXh0IHdoaWNoIGhhcyBubyBmZWF0dXJlc1xuICAgIC8vIHNpbmNlIGl0IGRvZXNuJ3Qgc3VwcG9ydCBhbnlcbiAgICBpZiAodGhpcy5wcm9wcy5mZWF0dXJlcyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gd2UgZ2V0IHRoZXNlIGZyb20gdGhlIGF2YWlsYWJsZSBmaWx0ZXJpbmcgZnVuY3Rpb25zXG4gICAgY29uc3QgYXZhaWxhYmxlQ3VzdG9tcyA9IHRoaXMuYXZhaWxhYmxlRmlsdGVyaW5nRnVuY3Rpb24oXCJzdXBwb3J0c0N1c3RvbVwiLCBcImFsbEN1c3RvbVwiLCBcInN1cHBvcnRlZEN1c3RvbXNcIiwgXCJyaWNoQ3VzdG9tc1wiKTtcbiAgICBjb25zdCBhdmFpbGFibGVSaWNoQ2xhc3NlcyA9IHRoaXMuYXZhaWxhYmxlRmlsdGVyaW5nRnVuY3Rpb24oXCJzdXBwb3J0c1JpY2hDbGFzc2VzXCIsIFwiYWxsUmljaENsYXNzZXNcIiwgXCJzdXBwb3J0ZWRSaWNoQ2xhc3Nlc1wiLCBcInJpY2hDbGFzc2VzXCIpO1xuICAgIGNvbnN0IGF2YWlsYWJsZUNvbnRhaW5lcnMgPSB0aGlzLmF2YWlsYWJsZUZpbHRlcmluZ0Z1bmN0aW9uKFwic3VwcG9ydHNDb250YWluZXJzXCIsIFwiYWxsQ29udGFpbmVyc1wiLCBcInN1cHBvcnRlZENvbnRhaW5lcnNcIiwgXCJyaWNoQ29udGFpbmVyc1wiKTtcbiAgICBjb25zdCBhdmFpbGFibGVUYWJsZXMgPSB0aGlzLmF2YWlsYWJsZUZpbHRlcmluZ0Z1bmN0aW9uKFwic3VwcG9ydHNUYWJsZXNcIiwgXCJhbGxUYWJsZXNcIiwgXCJzdXBwb3J0ZWRUYWJsZXNcIiwgXCJyaWNoVGFibGVzXCIpO1xuXG4gICAgLy8gYW5kIGV4dGVuZCBiYXNlZCBvbiB0aGUgZmVhdHVyZXNcbiAgICBjb25zdCBuZXdGZWF0dXJlU3VwcG9ydDogSUFjY2Vzc2libGVGZWF0dXJlU3VwcG9ydE9wdGlvbnMgPSB7XG4gICAgICAuLi50aGlzLnByb3BzLmZlYXR1cmVzLFxuXG4gICAgICBhdmFpbGFibGVDb250YWluZXJzLFxuICAgICAgYXZhaWxhYmxlQ3VzdG9tcyxcbiAgICAgIGF2YWlsYWJsZVJpY2hDbGFzc2VzLFxuICAgICAgYXZhaWxhYmxlVGFibGVzLFxuICAgIH07XG5cbiAgICByZXR1cm4gbmV3RmVhdHVyZVN1cHBvcnQ7XG4gIH1cblxuICBwdWJsaWMgZm9yY2VGb2N1cygpIHtcbiAgICAvLyB3aXRoIHRoaXMgY29uZGl0aW9uIHdlIGF2b2lkIGl0IGFwcGx5aW5nIHdpdGggY2hpbGRyZW5cbiAgICAvLyB0aGF0IGFyZSBuZXN0ZWQsIHN1Y2ggYXMgaW50ZXJuYWwgdGV4dGFyZWFzXG4gICAgLy8gaWYgKFxuICAgIC8vICAgLy8hcHJldmVudE5leHRGb2N1cyAmJlxuICAgIC8vICAgZS50YXJnZXQgJiZcbiAgICAvLyAgIChlLnRhcmdldCBhcyBIVE1MRGl2RWxlbWVudCkuZGF0YXNldCAmJlxuICAgIC8vICAgKGUudGFyZ2V0IGFzIEhUTUxEaXZFbGVtZW50KS5kYXRhc2V0LnNsYXRlRWRpdG9yID09PSBcInRydWVcIlxuICAgIC8vICkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICBjb25zdCBwYXRoOiBQYXRoID0gW107XG4gICAgICBsZXQgY3VycmVudDogYW55ID0gdGhpcy5lZGl0b3IuY2hpbGRyZW4gJiYgdGhpcy5lZGl0b3IuY2hpbGRyZW5bMF07XG4gICAgICB3aGlsZSAoY3VycmVudCkge1xuICAgICAgICBwYXRoLnB1c2goMCk7XG4gICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LmNoaWxkcmVuICYmIGN1cnJlbnQuY2hpbGRyZW5bMF07XG4gICAgICB9XG4gICAgICAvLyBidWcgaW4gc2xhdGUgc29tZXRpbWVzIGl0IGp1c3QgcmVqZWN0cyB0byBmb2N1c1xuICAgICAgLy8gd2hlbiB1c2luZyB0YWIsIHNwZWNpZmljYWxseSBzaGlmdCt0YWJcbiAgICAgIC8vIG5haCBpdCBkb2VzIGl0IGFsc28gd2l0aCB0YWIgc29tZXRpbWVzXG4gICAgICB0aGlzLmZvY3VzQXQoe1xuICAgICAgICBhbmNob3I6IHtcbiAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgfSxcbiAgICAgICAgZm9jdXM6IHtcbiAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb3JlIGJ1Z3MgaW4gc2xhdGUgc3RpbGwgbWF5IHJlamVjdCB0byBmb2N1cyBiZWNhdXNlIHNsYXRlXG4gICAgICAvLyBjYW4gYmUgdmVyeSBidWdneVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICAgICAgdGhpcy5vbkZvY3VzZWRDaGFuZ2UocGF0aCwgdGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgICB9LCAyMCk7XG4gICAgfVxuICAgIC8vIH1cbiAgfVxuXG4gIHB1YmxpYyBmb3JjZUJsdXIoKSB7XG4gICAgLy8gYnVnIGluIHNsYXRlIHNvbWV0aW1lcyBpdCB3aWxsIG5vdCBibHVyIGFuZCBqdXN0IHJlamVjdHMgdG8gYmx1clxuICAgIC8vIHdoZW4gYW5vdGhlciBlbGVtZW50IGhhcyBiZWVuIGJsdXJyZWRcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmZvY3VzZWQpIHtcbiAgICAgICAgdGhpcy5vbkJsdXJyZWRDaGFuZ2UodGhpcy5lZGl0b3IuY2hpbGRyZW4pO1xuICAgICAgfVxuICAgIH0sIDIwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgZnVuY3Rpb25cbiAgICovXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgLy8gbWFrZSB0aGUgZWRpdGFibGVcbiAgICBsZXQgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSA9IChcbiAgICAgIDxDdXJyZW50RWxlbWVudFByb3ZpZGVyXG4gICAgICAgIGJsb2NrPXt0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudH1cbiAgICAgICAgc3VwZXJibG9ja3M9e3RoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzIHx8IFtdfVxuICAgICAgICBpbmxpbmU9e3RoaXMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudH1cbiAgICAgID5cbiAgICAgICAgPGRpdiByZWY9e3RoaXMuZWRpdGFibGVSZWZ9IHN0eWxlPXt7IGRpc3BsYXk6IFwiY29udGVudHNcIiB9fSBkYXRhLXNsYXRlLWJ1Zz1cInRydWVcIj5cbiAgICAgICAgICA8RWRpdGFibGVcbiAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmlkfVxuICAgICAgICAgICAgbGFuZz17dGhpcy5wcm9wcy5sYW5nfVxuICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLm9uS2V5RG93bn1cbiAgICAgICAgICAgIHJlbmRlckVsZW1lbnQ9e3RoaXMucmVuZGVyRWxlbWVudH1cbiAgICAgICAgICAgIHJlbmRlckxlYWY9e3RoaXMucmVuZGVyVGV4dH1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLnBsYWNlaG9sZGVyfVxuICAgICAgICAgICAgcmVhZE9ubHk9e3RoaXMucHJvcHMuZGlzYWJsZWR9XG4gICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5wcm9wcy5kaXNhYmxlZH1cbiAgICAgICAgICAgIHN0eWxlPXt7IHNjcm9sbE1hcmdpblRvcDogdGhpcy5wcm9wcy5zY3JvbGxNYXJnaW5Ub3AgfX1cbiAgICAgICAgICAgIC8vIG9uRm9jdXM9e3RoaXMuZm9yY2VGb2N1c31cbiAgICAgICAgICAgIG9uQmx1cj17dGhpcy5mb3JjZUJsdXJ9XG4gICAgICAgICAgICAvLyBvbkNsaWNrPXtwcmV2ZW50Rm9jdXN9XG4gICAgICAgICAgICBhcmlhLWludmFsaWQ9eyF0aGlzLnByb3BzLmN1cnJlbnRWYWxpZH1cbiAgICAgICAgICAgIGFyaWEtZXJyb3JtZXNzYWdlPXt0aGlzLnByb3BzLmN1cnJlbnRWYWxpZCA/IG51bGwgOiB0aGlzLnByb3BzLmN1cnJlbnRHZW5lcmFsRXJyb3JFbGVtZW50SWR9XG4gICAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PXt0aGlzLnByb3BzLmN1cnJlbnREZXNjcmliZWRCeX1cbiAgICAgICAgICAgIGFyaWEtcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0N1cnJlbnRFbGVtZW50UHJvdmlkZXI+XG4gICAgKTtcblxuICAgIC8vIGFuZCBwaWNrIG9uIHRoZSB3cmFwcGVyLCBob3BlZnVsbHkgd2UgaGF2ZSBvbmVcbiAgICAvLyBpdCdkIGJlIHdlaXJkIG5vdCB0byBoYXZlIG9uZVxuICAgIGNvbnN0IFdyYXBwZXIgPSB0aGlzLnByb3BzLldyYXBwZXI7XG5cbiAgICAvLyBpZiB3ZSBoYXZlIGEgd3JhcHBlclxuICAgIGlmIChXcmFwcGVyKSB7XG4gICAgICAvLyBhbmQgd2UgZmVlZCB0aGUgdGhpbmcgaW4gdGhlIHdyYXBwZXIgYXMgdGhlIG5ldyBjaGlsZHJlblxuICAgICAgLy8gdGhhdCBpcyBub3cgd3JhcHBlciBpbnNpZGUgdGhlIHdyYXBwZXJcbiAgICAgIGNoaWxkcmVuID0gKFxuICAgICAgICA8V3JhcHBlclxuICAgICAgICAgIHsuLi50aGlzLnByb3BzLndyYXBwZXJBcmdzfVxuICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnByb3BzLmRpc2FibGVkfVxuICAgICAgICAgIHN0YXRlPXt0aGlzLnN0YXRlfVxuICAgICAgICAgIGhlbHBlcnM9e3RoaXMuZ2V0SGVscGVycygpfVxuICAgICAgICAgIGZlYXR1cmVTdXBwb3J0PXt0aGlzLmdldEZlYXR1cmVTdXBwb3J0KCl9XG4gICAgICAgICAgY3VycmVudExvYWRFcnJvcj17dGhpcy5wcm9wcy5jdXJyZW50TG9hZEVycm9yfVxuICAgICAgICAgIGRpc21pc3NDdXJyZW50TG9hZEVycm9yPXt0aGlzLnByb3BzLmRpc21pc3NDdXJyZW50TG9hZEVycm9yfVxuICAgICAgICAgIHJlZj17dGhpcy53cmFwcGVyUmVmfVxuICAgICAgICAgIGJhc2VJMThuPXt0aGlzLnByb3BzLmJhc2VJMThufVxuICAgICAgICA+XG4gICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L1dyYXBwZXI+XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIHdyYXBwaW5nIGJhc2VkIG9uIHRoZSByb290IGNvbnRleHRcbiAgICBpZiAodGhpcy5wcm9wcy5yb290Q29udGV4dCAmJiB0aGlzLnByb3BzLnJvb3RDb250ZXh0LmVkaXRvckFyZ3MgJiYgdGhpcy5wcm9wcy5yb290Q29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIpIHtcbiAgICAgIGNoaWxkcmVuID0gdGhpcy5wcm9wcy5yb290Q29udGV4dC5lZGl0b3JBcmdzLndyYXBwZXIoY2hpbGRyZW4pO1xuICAgIH1cblxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9pYW5zdG9ybXRheWxvci9zbGF0ZS9wdWxsLzQ1NDBcbiAgICBpZiAodGhpcy5zdGF0ZS50cmVlVmFsdWUuY2hpbGRyZW4gIT09IHRoaXMuZWRpdG9yLmNoaWxkcmVuKSB7XG4gICAgICB0aGlzLmVkaXRvci5jaGlsZHJlbiA9IHRoaXMuc3RhdGUudHJlZVZhbHVlLmNoaWxkcmVuO1xuICAgIH1cblxuICAgIC8vIG5vdyB3ZSBjYW4gcmV0dXJuXG4gICAgcmV0dXJuIChcbiAgICAgIDxTbGF0ZVxuICAgICAgICBlZGl0b3I9e3RoaXMuZWRpdG9yfVxuICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS50cmVlVmFsdWUuY2hpbGRyZW59XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlfVxuICAgICAgPlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L1NsYXRlPlxuICAgICk7XG4gIH1cbn1cbiIsICIvKiFcbiAqIGlzLXBsYWluLW9iamVjdCA8aHR0cHM6Ly9naXRodWIuY29tL2pvbnNjaGxpbmtlcnQvaXMtcGxhaW4tb2JqZWN0PlxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE3LCBKb24gU2NobGlua2VydC5cbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5mdW5jdGlvbiBpc09iamVjdChvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KG8pIHtcbiAgdmFyIGN0b3IscHJvdDtcblxuICBpZiAoaXNPYmplY3QobykgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG5cbiAgLy8gSWYgaGFzIG1vZGlmaWVkIGNvbnN0cnVjdG9yXG4gIGN0b3IgPSBvLmNvbnN0cnVjdG9yO1xuICBpZiAoY3RvciA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdHJ1ZTtcblxuICAvLyBJZiBoYXMgbW9kaWZpZWQgcHJvdG90eXBlXG4gIHByb3QgPSBjdG9yLnByb3RvdHlwZTtcbiAgaWYgKGlzT2JqZWN0KHByb3QpID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIElmIGNvbnN0cnVjdG9yIGRvZXMgbm90IGhhdmUgYW4gT2JqZWN0LXNwZWNpZmljIG1ldGhvZFxuICBpZiAocHJvdC5oYXNPd25Qcm9wZXJ0eSgnaXNQcm90b3R5cGVPZicpID09PSBmYWxzZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIE1vc3QgbGlrZWx5IGEgcGxhaW4gT2JqZWN0XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgeyBpc1BsYWluT2JqZWN0IH07XG4iLCAiLy8gU2hvdWxkIGJlIG5vIGltcG9ydHMgaGVyZSFcblxuLyoqXG4gKiBUaGUgc2VudGluZWwgdmFsdWUgcmV0dXJuZWQgYnkgcHJvZHVjZXJzIHRvIHJlcGxhY2UgdGhlIGRyYWZ0IHdpdGggdW5kZWZpbmVkLlxuICovXG5leHBvcnQgY29uc3QgTk9USElORzogdW5pcXVlIHN5bWJvbCA9IFN5bWJvbC5mb3IoXCJpbW1lci1ub3RoaW5nXCIpXG5cbi8qKlxuICogVG8gbGV0IEltbWVyIHRyZWF0IHlvdXIgY2xhc3MgaW5zdGFuY2VzIGFzIHBsYWluIGltbXV0YWJsZSBvYmplY3RzXG4gKiAoYWxiZWl0IHdpdGggYSBjdXN0b20gcHJvdG90eXBlKSwgeW91IG11c3QgZGVmaW5lIGVpdGhlciBhbiBpbnN0YW5jZSBwcm9wZXJ0eVxuICogb3IgYSBzdGF0aWMgcHJvcGVydHkgb24gZWFjaCBvZiB5b3VyIGN1c3RvbSBjbGFzc2VzLlxuICpcbiAqIE90aGVyd2lzZSwgeW91ciBjbGFzcyBpbnN0YW5jZSB3aWxsIG5ldmVyIGJlIGRyYWZ0ZWQsIHdoaWNoIG1lYW5zIGl0IHdvbid0IGJlXG4gKiBzYWZlIHRvIG11dGF0ZSBpbiBhIHByb2R1Y2UgY2FsbGJhY2suXG4gKi9cbmV4cG9ydCBjb25zdCBEUkFGVEFCTEU6IHVuaXF1ZSBzeW1ib2wgPSBTeW1ib2wuZm9yKFwiaW1tZXItZHJhZnRhYmxlXCIpXG5cbmV4cG9ydCBjb25zdCBEUkFGVF9TVEFURTogdW5pcXVlIHN5bWJvbCA9IFN5bWJvbC5mb3IoXCJpbW1lci1zdGF0ZVwiKVxuIiwgImV4cG9ydCBjb25zdCBlcnJvcnMgPVxuXHRwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCJcblx0XHQ/IFtcblx0XHRcdFx0Ly8gQWxsIGVycm9yIGNvZGVzLCBzdGFydGluZyBieSAwOlxuXHRcdFx0XHRmdW5jdGlvbihwbHVnaW46IHN0cmluZykge1xuXHRcdFx0XHRcdHJldHVybiBgVGhlIHBsdWdpbiBmb3IgJyR7cGx1Z2lufScgaGFzIG5vdCBiZWVuIGxvYWRlZCBpbnRvIEltbWVyLiBUbyBlbmFibGUgdGhlIHBsdWdpbiwgaW1wb3J0IGFuZCBjYWxsIFxcYGVuYWJsZSR7cGx1Z2lufSgpXFxgIHdoZW4gaW5pdGlhbGl6aW5nIHlvdXIgYXBwbGljYXRpb24uYFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbih0aGluZzogc3RyaW5nKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGBwcm9kdWNlIGNhbiBvbmx5IGJlIGNhbGxlZCBvbiB0aGluZ3MgdGhhdCBhcmUgZHJhZnRhYmxlOiBwbGFpbiBvYmplY3RzLCBhcnJheXMsIE1hcCwgU2V0IG9yIGNsYXNzZXMgdGhhdCBhcmUgbWFya2VkIHdpdGggJ1tpbW1lcmFibGVdOiB0cnVlJy4gR290ICcke3RoaW5nfSdgXG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwiVGhpcyBvYmplY3QgaGFzIGJlZW4gZnJvemVuIGFuZCBzaG91bGQgbm90IGJlIG11dGF0ZWRcIixcblx0XHRcdFx0ZnVuY3Rpb24oZGF0YTogYW55KSB7XG5cdFx0XHRcdFx0cmV0dXJuIChcblx0XHRcdFx0XHRcdFwiQ2Fubm90IHVzZSBhIHByb3h5IHRoYXQgaGFzIGJlZW4gcmV2b2tlZC4gRGlkIHlvdSBwYXNzIGFuIG9iamVjdCBmcm9tIGluc2lkZSBhbiBpbW1lciBmdW5jdGlvbiB0byBhbiBhc3luYyBwcm9jZXNzPyBcIiArXG5cdFx0XHRcdFx0XHRkYXRhXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcIkFuIGltbWVyIHByb2R1Y2VyIHJldHVybmVkIGEgbmV3IHZhbHVlICphbmQqIG1vZGlmaWVkIGl0cyBkcmFmdC4gRWl0aGVyIHJldHVybiBhIG5ldyB2YWx1ZSAqb3IqIG1vZGlmeSB0aGUgZHJhZnQuXCIsXG5cdFx0XHRcdFwiSW1tZXIgZm9yYmlkcyBjaXJjdWxhciByZWZlcmVuY2VzXCIsXG5cdFx0XHRcdFwiVGhlIGZpcnN0IG9yIHNlY29uZCBhcmd1bWVudCB0byBgcHJvZHVjZWAgbXVzdCBiZSBhIGZ1bmN0aW9uXCIsXG5cdFx0XHRcdFwiVGhlIHRoaXJkIGFyZ3VtZW50IHRvIGBwcm9kdWNlYCBtdXN0IGJlIGEgZnVuY3Rpb24gb3IgdW5kZWZpbmVkXCIsXG5cdFx0XHRcdFwiRmlyc3QgYXJndW1lbnQgdG8gYGNyZWF0ZURyYWZ0YCBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LCBhbiBhcnJheSwgb3IgYW4gaW1tZXJhYmxlIG9iamVjdFwiLFxuXHRcdFx0XHRcIkZpcnN0IGFyZ3VtZW50IHRvIGBmaW5pc2hEcmFmdGAgbXVzdCBiZSBhIGRyYWZ0IHJldHVybmVkIGJ5IGBjcmVhdGVEcmFmdGBcIixcblx0XHRcdFx0ZnVuY3Rpb24odGhpbmc6IHN0cmluZykge1xuXHRcdFx0XHRcdHJldHVybiBgJ2N1cnJlbnQnIGV4cGVjdHMgYSBkcmFmdCwgZ290OiAke3RoaW5nfWBcblx0XHRcdFx0fSxcblx0XHRcdFx0XCJPYmplY3QuZGVmaW5lUHJvcGVydHkoKSBjYW5ub3QgYmUgdXNlZCBvbiBhbiBJbW1lciBkcmFmdFwiLFxuXHRcdFx0XHRcIk9iamVjdC5zZXRQcm90b3R5cGVPZigpIGNhbm5vdCBiZSB1c2VkIG9uIGFuIEltbWVyIGRyYWZ0XCIsXG5cdFx0XHRcdFwiSW1tZXIgb25seSBzdXBwb3J0cyBkZWxldGluZyBhcnJheSBpbmRpY2VzXCIsXG5cdFx0XHRcdFwiSW1tZXIgb25seSBzdXBwb3J0cyBzZXR0aW5nIGFycmF5IGluZGljZXMgYW5kIHRoZSAnbGVuZ3RoJyBwcm9wZXJ0eVwiLFxuXHRcdFx0XHRmdW5jdGlvbih0aGluZzogc3RyaW5nKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGAnb3JpZ2luYWwnIGV4cGVjdHMgYSBkcmFmdCwgZ290OiAke3RoaW5nfWBcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBOb3RlOiBpZiBtb3JlIGVycm9ycyBhcmUgYWRkZWQsIHRoZSBlcnJvck9mZnNldCBpbiBQYXRjaGVzLnRzIHNob3VsZCBiZSBpbmNyZWFzZWRcblx0XHRcdFx0Ly8gU2VlIFBhdGNoZXMudHMgZm9yIGFkZGl0aW9uYWwgZXJyb3JzXG5cdFx0ICBdXG5cdFx0OiBbXVxuXG5leHBvcnQgZnVuY3Rpb24gZGllKGVycm9yOiBudW1iZXIsIC4uLmFyZ3M6IGFueVtdKTogbmV2ZXIge1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG5cdFx0Y29uc3QgZSA9IGVycm9yc1tlcnJvcl1cblx0XHRjb25zdCBtc2cgPSB0eXBlb2YgZSA9PT0gXCJmdW5jdGlvblwiID8gZS5hcHBseShudWxsLCBhcmdzIGFzIGFueSkgOiBlXG5cdFx0dGhyb3cgbmV3IEVycm9yKGBbSW1tZXJdICR7bXNnfWApXG5cdH1cblx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdGBbSW1tZXJdIG1pbmlmaWVkIGVycm9yIG5yOiAke2Vycm9yfS4gRnVsbCBlcnJvciBhdDogaHR0cHM6Ly9iaXQubHkvM2NYRUtXZmBcblx0KVxufVxuIiwgImltcG9ydCB7XG5cdERSQUZUX1NUQVRFLFxuXHREUkFGVEFCTEUsXG5cdE9iamVjdGlzaCxcblx0RHJhZnRlZCxcblx0QW55T2JqZWN0LFxuXHRBbnlNYXAsXG5cdEFueVNldCxcblx0SW1tZXJTdGF0ZSxcblx0QXJjaFR5cGUsXG5cdGRpZVxufSBmcm9tIFwiLi4vaW50ZXJuYWxcIlxuXG5leHBvcnQgY29uc3QgZ2V0UHJvdG90eXBlT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2ZcblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYW4gSW1tZXIgZHJhZnQgKi9cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RyYWZ0KHZhbHVlOiBhbnkpOiBib29sZWFuIHtcblx0cmV0dXJuICEhdmFsdWUgJiYgISF2YWx1ZVtEUkFGVF9TVEFURV1cbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgY2FuIGJlIGRyYWZ0ZWQgYnkgSW1tZXIgKi9cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RyYWZ0YWJsZSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG5cdGlmICghdmFsdWUpIHJldHVybiBmYWxzZVxuXHRyZXR1cm4gKFxuXHRcdGlzUGxhaW5PYmplY3QodmFsdWUpIHx8XG5cdFx0QXJyYXkuaXNBcnJheSh2YWx1ZSkgfHxcblx0XHQhIXZhbHVlW0RSQUZUQUJMRV0gfHxcblx0XHQhIXZhbHVlLmNvbnN0cnVjdG9yPy5bRFJBRlRBQkxFXSB8fFxuXHRcdGlzTWFwKHZhbHVlKSB8fFxuXHRcdGlzU2V0KHZhbHVlKVxuXHQpXG59XG5cbmNvbnN0IG9iamVjdEN0b3JTdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yLnRvU3RyaW5nKClcbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlOiBhbnkpOiBib29sZWFuIHtcblx0aWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHJldHVybiBmYWxzZVxuXHRjb25zdCBwcm90byA9IGdldFByb3RvdHlwZU9mKHZhbHVlKVxuXHRpZiAocHJvdG8gPT09IG51bGwpIHtcblx0XHRyZXR1cm4gdHJ1ZVxuXHR9XG5cdGNvbnN0IEN0b3IgPVxuXHRcdE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3RvLCBcImNvbnN0cnVjdG9yXCIpICYmIHByb3RvLmNvbnN0cnVjdG9yXG5cblx0aWYgKEN0b3IgPT09IE9iamVjdCkgcmV0dXJuIHRydWVcblxuXHRyZXR1cm4gKFxuXHRcdHR5cGVvZiBDdG9yID09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdEZ1bmN0aW9uLnRvU3RyaW5nLmNhbGwoQ3RvcikgPT09IG9iamVjdEN0b3JTdHJpbmdcblx0KVxufVxuXG4vKiogR2V0IHRoZSB1bmRlcmx5aW5nIG9iamVjdCB0aGF0IGlzIHJlcHJlc2VudGVkIGJ5IHRoZSBnaXZlbiBkcmFmdCAqL1xuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIG9yaWdpbmFsPFQ+KHZhbHVlOiBUKTogVCB8IHVuZGVmaW5lZFxuZXhwb3J0IGZ1bmN0aW9uIG9yaWdpbmFsKHZhbHVlOiBEcmFmdGVkPGFueT4pOiBhbnkge1xuXHRpZiAoIWlzRHJhZnQodmFsdWUpKSBkaWUoMTUsIHZhbHVlKVxuXHRyZXR1cm4gdmFsdWVbRFJBRlRfU1RBVEVdLmJhc2VfXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlYWNoPFQgZXh0ZW5kcyBPYmplY3Rpc2g+KFxuXHRvYmo6IFQsXG5cdGl0ZXI6IChrZXk6IHN0cmluZyB8IG51bWJlciwgdmFsdWU6IGFueSwgc291cmNlOiBUKSA9PiB2b2lkLFxuXHRlbnVtZXJhYmxlT25seT86IGJvb2xlYW5cbik6IHZvaWRcbmV4cG9ydCBmdW5jdGlvbiBlYWNoKG9iajogYW55LCBpdGVyOiBhbnkpIHtcblx0aWYgKGdldEFyY2h0eXBlKG9iaikgPT09IEFyY2hUeXBlLk9iamVjdCkge1xuXHRcdE9iamVjdC5lbnRyaWVzKG9iaikuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG5cdFx0XHRpdGVyKGtleSwgdmFsdWUsIG9iailcblx0XHR9KVxuXHR9IGVsc2Uge1xuXHRcdG9iai5mb3JFYWNoKChlbnRyeTogYW55LCBpbmRleDogYW55KSA9PiBpdGVyKGluZGV4LCBlbnRyeSwgb2JqKSlcblx0fVxufVxuXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJjaHR5cGUodGhpbmc6IGFueSk6IEFyY2hUeXBlIHtcblx0Y29uc3Qgc3RhdGU6IHVuZGVmaW5lZCB8IEltbWVyU3RhdGUgPSB0aGluZ1tEUkFGVF9TVEFURV1cblx0cmV0dXJuIHN0YXRlXG5cdFx0PyBzdGF0ZS50eXBlX1xuXHRcdDogQXJyYXkuaXNBcnJheSh0aGluZylcblx0XHQ/IEFyY2hUeXBlLkFycmF5XG5cdFx0OiBpc01hcCh0aGluZylcblx0XHQ/IEFyY2hUeXBlLk1hcFxuXHRcdDogaXNTZXQodGhpbmcpXG5cdFx0PyBBcmNoVHlwZS5TZXRcblx0XHQ6IEFyY2hUeXBlLk9iamVjdFxufVxuXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gaGFzKHRoaW5nOiBhbnksIHByb3A6IFByb3BlcnR5S2V5KTogYm9vbGVhbiB7XG5cdHJldHVybiBnZXRBcmNodHlwZSh0aGluZykgPT09IEFyY2hUeXBlLk1hcFxuXHRcdD8gdGhpbmcuaGFzKHByb3ApXG5cdFx0OiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpbmcsIHByb3ApXG59XG5cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQodGhpbmc6IEFueU1hcCB8IEFueU9iamVjdCwgcHJvcDogUHJvcGVydHlLZXkpOiBhbnkge1xuXHQvLyBAdHMtaWdub3JlXG5cdHJldHVybiBnZXRBcmNodHlwZSh0aGluZykgPT09IEFyY2hUeXBlLk1hcCA/IHRoaW5nLmdldChwcm9wKSA6IHRoaW5nW3Byb3BdXG59XG5cbi8qI19fUFVSRV9fKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXQodGhpbmc6IGFueSwgcHJvcE9yT2xkVmFsdWU6IFByb3BlcnR5S2V5LCB2YWx1ZTogYW55KSB7XG5cdGNvbnN0IHQgPSBnZXRBcmNodHlwZSh0aGluZylcblx0aWYgKHQgPT09IEFyY2hUeXBlLk1hcCkgdGhpbmcuc2V0KHByb3BPck9sZFZhbHVlLCB2YWx1ZSlcblx0ZWxzZSBpZiAodCA9PT0gQXJjaFR5cGUuU2V0KSB7XG5cdFx0dGhpbmcuYWRkKHZhbHVlKVxuXHR9IGVsc2UgdGhpbmdbcHJvcE9yT2xkVmFsdWVdID0gdmFsdWVcbn1cblxuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIGlzKHg6IGFueSwgeTogYW55KTogYm9vbGVhbiB7XG5cdC8vIEZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9mYmpzL2Jsb2IvYzY5OTA0YTUxMWI5MDAyNjY5MzUxNjgyMjMwNjNkZDg3NzJkZmM0MC9wYWNrYWdlcy9mYmpzL3NyYy9jb3JlL3NoYWxsb3dFcXVhbC5qc1xuXHRpZiAoeCA9PT0geSkge1xuXHRcdHJldHVybiB4ICE9PSAwIHx8IDEgLyB4ID09PSAxIC8geVxuXHR9IGVsc2Uge1xuXHRcdHJldHVybiB4ICE9PSB4ICYmIHkgIT09IHlcblx0fVxufVxuXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gaXNNYXAodGFyZ2V0OiBhbnkpOiB0YXJnZXQgaXMgQW55TWFwIHtcblx0cmV0dXJuIHRhcmdldCBpbnN0YW5jZW9mIE1hcFxufVxuXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gaXNTZXQodGFyZ2V0OiBhbnkpOiB0YXJnZXQgaXMgQW55U2V0IHtcblx0cmV0dXJuIHRhcmdldCBpbnN0YW5jZW9mIFNldFxufVxuLyojX19QVVJFX18qL1xuZXhwb3J0IGZ1bmN0aW9uIGxhdGVzdChzdGF0ZTogSW1tZXJTdGF0ZSk6IGFueSB7XG5cdHJldHVybiBzdGF0ZS5jb3B5XyB8fCBzdGF0ZS5iYXNlX1xufVxuXG4vKiNfX1BVUkVfXyovXG5leHBvcnQgZnVuY3Rpb24gc2hhbGxvd0NvcHkoYmFzZTogYW55LCBzdHJpY3Q6IGJvb2xlYW4pIHtcblx0aWYgKGlzTWFwKGJhc2UpKSB7XG5cdFx0cmV0dXJuIG5ldyBNYXAoYmFzZSlcblx0fVxuXHRpZiAoaXNTZXQoYmFzZSkpIHtcblx0XHRyZXR1cm4gbmV3IFNldChiYXNlKVxuXHR9XG5cdGlmIChBcnJheS5pc0FycmF5KGJhc2UpKSByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYmFzZSlcblxuXHRpZiAoIXN0cmljdCAmJiBpc1BsYWluT2JqZWN0KGJhc2UpKSB7XG5cdFx0aWYgKCFnZXRQcm90b3R5cGVPZihiYXNlKSkge1xuXHRcdFx0Y29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuXHRcdFx0cmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqLCBiYXNlKVxuXHRcdH1cblx0XHRyZXR1cm4gey4uLmJhc2V9XG5cdH1cblxuXHRjb25zdCBkZXNjcmlwdG9ycyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKGJhc2UpXG5cdGRlbGV0ZSBkZXNjcmlwdG9yc1tEUkFGVF9TVEFURSBhcyBhbnldXG5cdGxldCBrZXlzID0gUmVmbGVjdC5vd25LZXlzKGRlc2NyaXB0b3JzKVxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0XHRjb25zdCBrZXk6IGFueSA9IGtleXNbaV1cblx0XHRjb25zdCBkZXNjID0gZGVzY3JpcHRvcnNba2V5XVxuXHRcdGlmIChkZXNjLndyaXRhYmxlID09PSBmYWxzZSkge1xuXHRcdFx0ZGVzYy53cml0YWJsZSA9IHRydWVcblx0XHRcdGRlc2MuY29uZmlndXJhYmxlID0gdHJ1ZVxuXHRcdH1cblx0XHQvLyBsaWtlIG9iamVjdC5hc3NpZ24sIHdlIHdpbGwgcmVhZCBhbnkgX293bl8sIGdldC9zZXQgYWNjZXNzb3JzLiBUaGlzIGhlbHBzIGluIGRlYWxpbmdcblx0XHQvLyB3aXRoIGxpYnJhcmllcyB0aGF0IHRyYXAgdmFsdWVzLCBsaWtlIG1vYnggb3IgdnVlXG5cdFx0Ly8gdW5saWtlIG9iamVjdC5hc3NpZ24sIG5vbi1lbnVtZXJhYmxlcyB3aWxsIGJlIGNvcGllZCBhcyB3ZWxsXG5cdFx0aWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KVxuXHRcdFx0ZGVzY3JpcHRvcnNba2V5XSA9IHtcblx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0XHR3cml0YWJsZTogdHJ1ZSwgLy8gY291bGQgbGl2ZSB3aXRoICEhZGVzYy5zZXQgYXMgd2VsbCBoZXJlLi4uXG5cdFx0XHRcdGVudW1lcmFibGU6IGRlc2MuZW51bWVyYWJsZSxcblx0XHRcdFx0dmFsdWU6IGJhc2Vba2V5XVxuXHRcdFx0fVxuXHR9XG5cdHJldHVybiBPYmplY3QuY3JlYXRlKGdldFByb3RvdHlwZU9mKGJhc2UpLCBkZXNjcmlwdG9ycylcbn1cblxuLyoqXG4gKiBGcmVlemVzIGRyYWZ0YWJsZSBvYmplY3RzLiBSZXR1cm5zIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gKiBCeSBkZWZhdWx0IGZyZWV6ZXMgc2hhbGxvd2x5LCBidXQgaWYgdGhlIHNlY29uZCBhcmd1bWVudCBpcyBgdHJ1ZWAgaXQgd2lsbCBmcmVlemUgcmVjdXJzaXZlbHkuXG4gKlxuICogQHBhcmFtIG9ialxuICogQHBhcmFtIGRlZXBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyZWV6ZTxUPihvYmo6IFQsIGRlZXA/OiBib29sZWFuKTogVFxuZXhwb3J0IGZ1bmN0aW9uIGZyZWV6ZTxUPihvYmo6IGFueSwgZGVlcDogYm9vbGVhbiA9IGZhbHNlKTogVCB7XG5cdGlmIChpc0Zyb3plbihvYmopIHx8IGlzRHJhZnQob2JqKSB8fCAhaXNEcmFmdGFibGUob2JqKSkgcmV0dXJuIG9ialxuXHRpZiAoZ2V0QXJjaHR5cGUob2JqKSA+IDEgLyogTWFwIG9yIFNldCAqLykge1xuXHRcdG9iai5zZXQgPSBvYmouYWRkID0gb2JqLmNsZWFyID0gb2JqLmRlbGV0ZSA9IGRvbnRNdXRhdGVGcm96ZW5Db2xsZWN0aW9ucyBhcyBhbnlcblx0fVxuXHRPYmplY3QuZnJlZXplKG9iailcblx0aWYgKGRlZXApIGVhY2gob2JqLCAoX2tleSwgdmFsdWUpID0+IGZyZWV6ZSh2YWx1ZSwgdHJ1ZSksIHRydWUpXG5cdHJldHVybiBvYmpcbn1cblxuZnVuY3Rpb24gZG9udE11dGF0ZUZyb3plbkNvbGxlY3Rpb25zKCkge1xuXHRkaWUoMilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRnJvemVuKG9iajogYW55KTogYm9vbGVhbiB7XG5cdHJldHVybiBPYmplY3QuaXNGcm96ZW4ob2JqKVxufVxuIiwgImltcG9ydCB7XG5cdEltbWVyU3RhdGUsXG5cdFBhdGNoLFxuXHREcmFmdGVkLFxuXHRJbW1lckJhc2VTdGF0ZSxcblx0QW55TWFwLFxuXHRBbnlTZXQsXG5cdEFyY2hUeXBlLFxuXHRkaWVcbn0gZnJvbSBcIi4uL2ludGVybmFsXCJcblxuLyoqIFBsdWdpbiB1dGlsaXRpZXMgKi9cbmNvbnN0IHBsdWdpbnM6IHtcblx0UGF0Y2hlcz86IHtcblx0XHRnZW5lcmF0ZVBhdGNoZXNfKFxuXHRcdFx0c3RhdGU6IEltbWVyU3RhdGUsXG5cdFx0XHRiYXNlUGF0aDogUGF0Y2hQYXRoLFxuXHRcdFx0cGF0Y2hlczogUGF0Y2hbXSxcblx0XHRcdGludmVyc2VQYXRjaGVzOiBQYXRjaFtdXG5cdFx0KTogdm9pZFxuXHRcdGdlbmVyYXRlUmVwbGFjZW1lbnRQYXRjaGVzXyhcblx0XHRcdGJhc2U6IGFueSxcblx0XHRcdHJlcGxhY2VtZW50OiBhbnksXG5cdFx0XHRwYXRjaGVzOiBQYXRjaFtdLFxuXHRcdFx0aW52ZXJzZVBhdGNoZXM6IFBhdGNoW11cblx0XHQpOiB2b2lkXG5cdFx0YXBwbHlQYXRjaGVzXzxUPihkcmFmdDogVCwgcGF0Y2hlczogUGF0Y2hbXSk6IFRcblx0fVxuXHRNYXBTZXQ/OiB7XG5cdFx0cHJveHlNYXBfPFQgZXh0ZW5kcyBBbnlNYXA+KHRhcmdldDogVCwgcGFyZW50PzogSW1tZXJTdGF0ZSk6IFRcblx0XHRwcm94eVNldF88VCBleHRlbmRzIEFueVNldD4odGFyZ2V0OiBULCBwYXJlbnQ/OiBJbW1lclN0YXRlKTogVFxuXHR9XG59ID0ge31cblxudHlwZSBQbHVnaW5zID0gdHlwZW9mIHBsdWdpbnNcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBsdWdpbjxLIGV4dGVuZHMga2V5b2YgUGx1Z2lucz4oXG5cdHBsdWdpbktleTogS1xuKTogRXhjbHVkZTxQbHVnaW5zW0tdLCB1bmRlZmluZWQ+IHtcblx0Y29uc3QgcGx1Z2luID0gcGx1Z2luc1twbHVnaW5LZXldXG5cdGlmICghcGx1Z2luKSB7XG5cdFx0ZGllKDAsIHBsdWdpbktleSlcblx0fVxuXHQvLyBAdHMtaWdub3JlXG5cdHJldHVybiBwbHVnaW5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRQbHVnaW48SyBleHRlbmRzIGtleW9mIFBsdWdpbnM+KFxuXHRwbHVnaW5LZXk6IEssXG5cdGltcGxlbWVudGF0aW9uOiBQbHVnaW5zW0tdXG4pOiB2b2lkIHtcblx0aWYgKCFwbHVnaW5zW3BsdWdpbktleV0pIHBsdWdpbnNbcGx1Z2luS2V5XSA9IGltcGxlbWVudGF0aW9uXG59XG4vKiogTWFwIC8gU2V0IHBsdWdpbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIE1hcFN0YXRlIGV4dGVuZHMgSW1tZXJCYXNlU3RhdGUge1xuXHR0eXBlXzogQXJjaFR5cGUuTWFwXG5cdGNvcHlfOiBBbnlNYXAgfCB1bmRlZmluZWRcblx0YXNzaWduZWRfOiBNYXA8YW55LCBib29sZWFuPiB8IHVuZGVmaW5lZFxuXHRiYXNlXzogQW55TWFwXG5cdHJldm9rZWRfOiBib29sZWFuXG5cdGRyYWZ0XzogRHJhZnRlZDxBbnlNYXAsIE1hcFN0YXRlPlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNldFN0YXRlIGV4dGVuZHMgSW1tZXJCYXNlU3RhdGUge1xuXHR0eXBlXzogQXJjaFR5cGUuU2V0XG5cdGNvcHlfOiBBbnlTZXQgfCB1bmRlZmluZWRcblx0YmFzZV86IEFueVNldFxuXHRkcmFmdHNfOiBNYXA8YW55LCBEcmFmdGVkPiAvLyBtYXBzIHRoZSBvcmlnaW5hbCB2YWx1ZSB0byB0aGUgZHJhZnQgdmFsdWUgaW4gdGhlIG5ldyBzZXRcblx0cmV2b2tlZF86IGJvb2xlYW5cblx0ZHJhZnRfOiBEcmFmdGVkPEFueVNldCwgU2V0U3RhdGU+XG59XG5cbi8qKiBQYXRjaGVzIHBsdWdpbiAqL1xuXG5leHBvcnQgdHlwZSBQYXRjaFBhdGggPSAoc3RyaW5nIHwgbnVtYmVyKVtdXG4iLCAiaW1wb3J0IHtcblx0UGF0Y2gsXG5cdFBhdGNoTGlzdGVuZXIsXG5cdERyYWZ0ZWQsXG5cdEltbWVyLFxuXHREUkFGVF9TVEFURSxcblx0SW1tZXJTdGF0ZSxcblx0QXJjaFR5cGUsXG5cdGdldFBsdWdpblxufSBmcm9tIFwiLi4vaW50ZXJuYWxcIlxuXG4vKiogRWFjaCBzY29wZSByZXByZXNlbnRzIGEgYHByb2R1Y2VgIGNhbGwuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1tZXJTY29wZSB7XG5cdHBhdGNoZXNfPzogUGF0Y2hbXVxuXHRpbnZlcnNlUGF0Y2hlc18/OiBQYXRjaFtdXG5cdGNhbkF1dG9GcmVlemVfOiBib29sZWFuXG5cdGRyYWZ0c186IGFueVtdXG5cdHBhcmVudF8/OiBJbW1lclNjb3BlXG5cdHBhdGNoTGlzdGVuZXJfPzogUGF0Y2hMaXN0ZW5lclxuXHRpbW1lcl86IEltbWVyXG5cdHVuZmluYWxpemVkRHJhZnRzXzogbnVtYmVyXG59XG5cbmxldCBjdXJyZW50U2NvcGU6IEltbWVyU2NvcGUgfCB1bmRlZmluZWRcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRTY29wZSgpIHtcblx0cmV0dXJuIGN1cnJlbnRTY29wZSFcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2NvcGUoXG5cdHBhcmVudF86IEltbWVyU2NvcGUgfCB1bmRlZmluZWQsXG5cdGltbWVyXzogSW1tZXJcbik6IEltbWVyU2NvcGUge1xuXHRyZXR1cm4ge1xuXHRcdGRyYWZ0c186IFtdLFxuXHRcdHBhcmVudF8sXG5cdFx0aW1tZXJfLFxuXHRcdC8vIFdoZW5ldmVyIHRoZSBtb2RpZmllZCBkcmFmdCBjb250YWlucyBhIGRyYWZ0IGZyb20gYW5vdGhlciBzY29wZSwgd2Vcblx0XHQvLyBuZWVkIHRvIHByZXZlbnQgYXV0by1mcmVlemluZyBzbyB0aGUgdW5vd25lZCBkcmFmdCBjYW4gYmUgZmluYWxpemVkLlxuXHRcdGNhbkF1dG9GcmVlemVfOiB0cnVlLFxuXHRcdHVuZmluYWxpemVkRHJhZnRzXzogMFxuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VQYXRjaGVzSW5TY29wZShcblx0c2NvcGU6IEltbWVyU2NvcGUsXG5cdHBhdGNoTGlzdGVuZXI/OiBQYXRjaExpc3RlbmVyXG4pIHtcblx0aWYgKHBhdGNoTGlzdGVuZXIpIHtcblx0XHRnZXRQbHVnaW4oXCJQYXRjaGVzXCIpIC8vIGFzc2VydCB3ZSBoYXZlIHRoZSBwbHVnaW5cblx0XHRzY29wZS5wYXRjaGVzXyA9IFtdXG5cdFx0c2NvcGUuaW52ZXJzZVBhdGNoZXNfID0gW11cblx0XHRzY29wZS5wYXRjaExpc3RlbmVyXyA9IHBhdGNoTGlzdGVuZXJcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmV2b2tlU2NvcGUoc2NvcGU6IEltbWVyU2NvcGUpIHtcblx0bGVhdmVTY29wZShzY29wZSlcblx0c2NvcGUuZHJhZnRzXy5mb3JFYWNoKHJldm9rZURyYWZ0KVxuXHQvLyBAdHMtaWdub3JlXG5cdHNjb3BlLmRyYWZ0c18gPSBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsZWF2ZVNjb3BlKHNjb3BlOiBJbW1lclNjb3BlKSB7XG5cdGlmIChzY29wZSA9PT0gY3VycmVudFNjb3BlKSB7XG5cdFx0Y3VycmVudFNjb3BlID0gc2NvcGUucGFyZW50X1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnRlclNjb3BlKGltbWVyOiBJbW1lcikge1xuXHRyZXR1cm4gKGN1cnJlbnRTY29wZSA9IGNyZWF0ZVNjb3BlKGN1cnJlbnRTY29wZSwgaW1tZXIpKVxufVxuXG5mdW5jdGlvbiByZXZva2VEcmFmdChkcmFmdDogRHJhZnRlZCkge1xuXHRjb25zdCBzdGF0ZTogSW1tZXJTdGF0ZSA9IGRyYWZ0W0RSQUZUX1NUQVRFXVxuXHRpZiAoc3RhdGUudHlwZV8gPT09IEFyY2hUeXBlLk9iamVjdCB8fCBzdGF0ZS50eXBlXyA9PT0gQXJjaFR5cGUuQXJyYXkpXG5cdFx0c3RhdGUucmV2b2tlXygpXG5cdGVsc2Ugc3RhdGUucmV2b2tlZF8gPSB0cnVlXG59XG4iLCAiaW1wb3J0IHtcblx0SW1tZXJTY29wZSxcblx0RFJBRlRfU1RBVEUsXG5cdGlzRHJhZnRhYmxlLFxuXHROT1RISU5HLFxuXHRQYXRjaFBhdGgsXG5cdGVhY2gsXG5cdGhhcyxcblx0ZnJlZXplLFxuXHRJbW1lclN0YXRlLFxuXHRpc0RyYWZ0LFxuXHRTZXRTdGF0ZSxcblx0c2V0LFxuXHRBcmNoVHlwZSxcblx0Z2V0UGx1Z2luLFxuXHRkaWUsXG5cdHJldm9rZVNjb3BlLFxuXHRpc0Zyb3plblxufSBmcm9tIFwiLi4vaW50ZXJuYWxcIlxuXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc1Jlc3VsdChyZXN1bHQ6IGFueSwgc2NvcGU6IEltbWVyU2NvcGUpIHtcblx0c2NvcGUudW5maW5hbGl6ZWREcmFmdHNfID0gc2NvcGUuZHJhZnRzXy5sZW5ndGhcblx0Y29uc3QgYmFzZURyYWZ0ID0gc2NvcGUuZHJhZnRzXyFbMF1cblx0Y29uc3QgaXNSZXBsYWNlZCA9IHJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIHJlc3VsdCAhPT0gYmFzZURyYWZ0XG5cdGlmIChpc1JlcGxhY2VkKSB7XG5cdFx0aWYgKGJhc2VEcmFmdFtEUkFGVF9TVEFURV0ubW9kaWZpZWRfKSB7XG5cdFx0XHRyZXZva2VTY29wZShzY29wZSlcblx0XHRcdGRpZSg0KVxuXHRcdH1cblx0XHRpZiAoaXNEcmFmdGFibGUocmVzdWx0KSkge1xuXHRcdFx0Ly8gRmluYWxpemUgdGhlIHJlc3VsdCBpbiBjYXNlIGl0IGNvbnRhaW5zIChvciBpcykgYSBzdWJzZXQgb2YgdGhlIGRyYWZ0LlxuXHRcdFx0cmVzdWx0ID0gZmluYWxpemUoc2NvcGUsIHJlc3VsdClcblx0XHRcdGlmICghc2NvcGUucGFyZW50XykgbWF5YmVGcmVlemUoc2NvcGUsIHJlc3VsdClcblx0XHR9XG5cdFx0aWYgKHNjb3BlLnBhdGNoZXNfKSB7XG5cdFx0XHRnZXRQbHVnaW4oXCJQYXRjaGVzXCIpLmdlbmVyYXRlUmVwbGFjZW1lbnRQYXRjaGVzXyhcblx0XHRcdFx0YmFzZURyYWZ0W0RSQUZUX1NUQVRFXS5iYXNlXyxcblx0XHRcdFx0cmVzdWx0LFxuXHRcdFx0XHRzY29wZS5wYXRjaGVzXyxcblx0XHRcdFx0c2NvcGUuaW52ZXJzZVBhdGNoZXNfIVxuXHRcdFx0KVxuXHRcdH1cblx0fSBlbHNlIHtcblx0XHQvLyBGaW5hbGl6ZSB0aGUgYmFzZSBkcmFmdC5cblx0XHRyZXN1bHQgPSBmaW5hbGl6ZShzY29wZSwgYmFzZURyYWZ0LCBbXSlcblx0fVxuXHRyZXZva2VTY29wZShzY29wZSlcblx0aWYgKHNjb3BlLnBhdGNoZXNfKSB7XG5cdFx0c2NvcGUucGF0Y2hMaXN0ZW5lcl8hKHNjb3BlLnBhdGNoZXNfLCBzY29wZS5pbnZlcnNlUGF0Y2hlc18hKVxuXHR9XG5cdHJldHVybiByZXN1bHQgIT09IE5PVEhJTkcgPyByZXN1bHQgOiB1bmRlZmluZWRcbn1cblxuZnVuY3Rpb24gZmluYWxpemUocm9vdFNjb3BlOiBJbW1lclNjb3BlLCB2YWx1ZTogYW55LCBwYXRoPzogUGF0Y2hQYXRoKSB7XG5cdC8vIERvbid0IHJlY3Vyc2UgaW4gdGhvIHJlY3Vyc2l2ZSBkYXRhIHN0cnVjdHVyZXNcblx0aWYgKGlzRnJvemVuKHZhbHVlKSkgcmV0dXJuIHZhbHVlXG5cblx0Y29uc3Qgc3RhdGU6IEltbWVyU3RhdGUgPSB2YWx1ZVtEUkFGVF9TVEFURV1cblx0Ly8gQSBwbGFpbiBvYmplY3QsIG1pZ2h0IG5lZWQgZnJlZXppbmcsIG1pZ2h0IGNvbnRhaW4gZHJhZnRzXG5cdGlmICghc3RhdGUpIHtcblx0XHRlYWNoKFxuXHRcdFx0dmFsdWUsXG5cdFx0XHQoa2V5LCBjaGlsZFZhbHVlKSA9PlxuXHRcdFx0XHRmaW5hbGl6ZVByb3BlcnR5KHJvb3RTY29wZSwgc3RhdGUsIHZhbHVlLCBrZXksIGNoaWxkVmFsdWUsIHBhdGgpLFxuXHRcdFx0dHJ1ZSAvLyBTZWUgIzU5MCwgZG9uJ3QgcmVjdXJzZSBpbnRvIG5vbi1lbnVtZXJhYmxlIG9mIG5vbiBkcmFmdGVkIG9iamVjdHNcblx0XHQpXG5cdFx0cmV0dXJuIHZhbHVlXG5cdH1cblx0Ly8gTmV2ZXIgZmluYWxpemUgZHJhZnRzIG93bmVkIGJ5IGFub3RoZXIgc2NvcGUuXG5cdGlmIChzdGF0ZS5zY29wZV8gIT09IHJvb3RTY29wZSkgcmV0dXJuIHZhbHVlXG5cdC8vIFVubW9kaWZpZWQgZHJhZnQsIHJldHVybiB0aGUgKGZyb3plbikgb3JpZ2luYWxcblx0aWYgKCFzdGF0ZS5tb2RpZmllZF8pIHtcblx0XHRtYXliZUZyZWV6ZShyb290U2NvcGUsIHN0YXRlLmJhc2VfLCB0cnVlKVxuXHRcdHJldHVybiBzdGF0ZS5iYXNlX1xuXHR9XG5cdC8vIE5vdCBmaW5hbGl6ZWQgeWV0LCBsZXQncyBkbyB0aGF0IG5vd1xuXHRpZiAoIXN0YXRlLmZpbmFsaXplZF8pIHtcblx0XHRzdGF0ZS5maW5hbGl6ZWRfID0gdHJ1ZVxuXHRcdHN0YXRlLnNjb3BlXy51bmZpbmFsaXplZERyYWZ0c18tLVxuXHRcdGNvbnN0IHJlc3VsdCA9IHN0YXRlLmNvcHlfXG5cdFx0Ly8gRmluYWxpemUgYWxsIGNoaWxkcmVuIG9mIHRoZSBjb3B5XG5cdFx0Ly8gRm9yIHNldHMgd2UgY2xvbmUgYmVmb3JlIGl0ZXJhdGluZywgb3RoZXJ3aXNlIHdlIGNhbiBnZXQgaW4gZW5kbGVzcyBsb29wIGR1ZSB0byBtb2RpZnlpbmcgZHVyaW5nIGl0ZXJhdGlvbiwgc2VlICM2Mjhcblx0XHQvLyBUbyBwcmVzZXJ2ZSBpbnNlcnRpb24gb3JkZXIgaW4gYWxsIGNhc2VzIHdlIHRoZW4gY2xlYXIgdGhlIHNldFxuXHRcdC8vIEFuZCB3ZSBsZXQgZmluYWxpemVQcm9wZXJ0eSBrbm93IGl0IG5lZWRzIHRvIHJlLWFkZCBub24tZHJhZnQgY2hpbGRyZW4gYmFjayB0byB0aGUgdGFyZ2V0XG5cdFx0bGV0IHJlc3VsdEVhY2ggPSByZXN1bHRcblx0XHRsZXQgaXNTZXQgPSBmYWxzZVxuXHRcdGlmIChzdGF0ZS50eXBlXyA9PT0gQXJjaFR5cGUuU2V0KSB7XG5cdFx0XHRyZXN1bHRFYWNoID0gbmV3IFNldChyZXN1bHQpXG5cdFx0XHRyZXN1bHQuY2xlYXIoKVxuXHRcdFx0aXNTZXQgPSB0cnVlXG5cdFx0fVxuXHRcdGVhY2gocmVzdWx0RWFjaCwgKGtleSwgY2hpbGRWYWx1ZSkgPT5cblx0XHRcdGZpbmFsaXplUHJvcGVydHkocm9vdFNjb3BlLCBzdGF0ZSwgcmVzdWx0LCBrZXksIGNoaWxkVmFsdWUsIHBhdGgsIGlzU2V0KVxuXHRcdClcblx0XHQvLyBldmVyeXRoaW5nIGluc2lkZSBpcyBmcm96ZW4sIHdlIGNhbiBmcmVlemUgaGVyZVxuXHRcdG1heWJlRnJlZXplKHJvb3RTY29wZSwgcmVzdWx0LCBmYWxzZSlcblx0XHQvLyBmaXJzdCB0aW1lIGZpbmFsaXppbmcsIGxldCdzIGNyZWF0ZSB0aG9zZSBwYXRjaGVzXG5cdFx0aWYgKHBhdGggJiYgcm9vdFNjb3BlLnBhdGNoZXNfKSB7XG5cdFx0XHRnZXRQbHVnaW4oXCJQYXRjaGVzXCIpLmdlbmVyYXRlUGF0Y2hlc18oXG5cdFx0XHRcdHN0YXRlLFxuXHRcdFx0XHRwYXRoLFxuXHRcdFx0XHRyb290U2NvcGUucGF0Y2hlc18sXG5cdFx0XHRcdHJvb3RTY29wZS5pbnZlcnNlUGF0Y2hlc18hXG5cdFx0XHQpXG5cdFx0fVxuXHR9XG5cdHJldHVybiBzdGF0ZS5jb3B5X1xufVxuXG5mdW5jdGlvbiBmaW5hbGl6ZVByb3BlcnR5KFxuXHRyb290U2NvcGU6IEltbWVyU2NvcGUsXG5cdHBhcmVudFN0YXRlOiB1bmRlZmluZWQgfCBJbW1lclN0YXRlLFxuXHR0YXJnZXRPYmplY3Q6IGFueSxcblx0cHJvcDogc3RyaW5nIHwgbnVtYmVyLFxuXHRjaGlsZFZhbHVlOiBhbnksXG5cdHJvb3RQYXRoPzogUGF0Y2hQYXRoLFxuXHR0YXJnZXRJc1NldD86IGJvb2xlYW5cbikge1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmIGNoaWxkVmFsdWUgPT09IHRhcmdldE9iamVjdClcblx0XHRkaWUoNSlcblx0aWYgKGlzRHJhZnQoY2hpbGRWYWx1ZSkpIHtcblx0XHRjb25zdCBwYXRoID1cblx0XHRcdHJvb3RQYXRoICYmXG5cdFx0XHRwYXJlbnRTdGF0ZSAmJlxuXHRcdFx0cGFyZW50U3RhdGUhLnR5cGVfICE9PSBBcmNoVHlwZS5TZXQgJiYgLy8gU2V0IG9iamVjdHMgYXJlIGF0b21pYyBzaW5jZSB0aGV5IGhhdmUgbm8ga2V5cy5cblx0XHRcdCFoYXMoKHBhcmVudFN0YXRlIGFzIEV4Y2x1ZGU8SW1tZXJTdGF0ZSwgU2V0U3RhdGU+KS5hc3NpZ25lZF8hLCBwcm9wKSAvLyBTa2lwIGRlZXAgcGF0Y2hlcyBmb3IgYXNzaWduZWQga2V5cy5cblx0XHRcdFx0PyByb290UGF0aCEuY29uY2F0KHByb3ApXG5cdFx0XHRcdDogdW5kZWZpbmVkXG5cdFx0Ly8gRHJhZnRzIG93bmVkIGJ5IGBzY29wZWAgYXJlIGZpbmFsaXplZCBoZXJlLlxuXHRcdGNvbnN0IHJlcyA9IGZpbmFsaXplKHJvb3RTY29wZSwgY2hpbGRWYWx1ZSwgcGF0aClcblx0XHRzZXQodGFyZ2V0T2JqZWN0LCBwcm9wLCByZXMpXG5cdFx0Ly8gRHJhZnRzIGZyb20gYW5vdGhlciBzY29wZSBtdXN0IHByZXZlbnRlZCB0byBiZSBmcm96ZW5cblx0XHQvLyBpZiB3ZSBnb3QgYSBkcmFmdCBiYWNrIGZyb20gZmluYWxpemUsIHdlJ3JlIGluIGEgbmVzdGVkIHByb2R1Y2UgYW5kIHNob3VsZG4ndCBmcmVlemVcblx0XHRpZiAoaXNEcmFmdChyZXMpKSB7XG5cdFx0XHRyb290U2NvcGUuY2FuQXV0b0ZyZWV6ZV8gPSBmYWxzZVxuXHRcdH0gZWxzZSByZXR1cm5cblx0fSBlbHNlIGlmICh0YXJnZXRJc1NldCkge1xuXHRcdHRhcmdldE9iamVjdC5hZGQoY2hpbGRWYWx1ZSlcblx0fVxuXHQvLyBTZWFyY2ggbmV3IG9iamVjdHMgZm9yIHVuZmluYWxpemVkIGRyYWZ0cy4gRnJvemVuIG9iamVjdHMgc2hvdWxkIG5ldmVyIGNvbnRhaW4gZHJhZnRzLlxuXHRpZiAoaXNEcmFmdGFibGUoY2hpbGRWYWx1ZSkgJiYgIWlzRnJvemVuKGNoaWxkVmFsdWUpKSB7XG5cdFx0aWYgKCFyb290U2NvcGUuaW1tZXJfLmF1dG9GcmVlemVfICYmIHJvb3RTY29wZS51bmZpbmFsaXplZERyYWZ0c18gPCAxKSB7XG5cdFx0XHQvLyBvcHRpbWl6YXRpb246IGlmIGFuIG9iamVjdCBpcyBub3QgYSBkcmFmdCwgYW5kIHdlIGRvbid0IGhhdmUgdG9cblx0XHRcdC8vIGRlZXBmcmVlemUgZXZlcnl0aGluZywgYW5kIHdlIGFyZSBzdXJlIHRoYXQgbm8gZHJhZnRzIGFyZSBsZWZ0IGluIHRoZSByZW1haW5pbmcgb2JqZWN0XG5cdFx0XHQvLyBjYXVzZSB3ZSBzYXcgYW5kIGZpbmFsaXplZCBhbGwgZHJhZnRzIGFscmVhZHk7IHdlIGNhbiBzdG9wIHZpc2l0aW5nIHRoZSByZXN0IG9mIHRoZSB0cmVlLlxuXHRcdFx0Ly8gVGhpcyBiZW5lZml0cyBlc3BlY2lhbGx5IGFkZGluZyBsYXJnZSBkYXRhIHRyZWUncyB3aXRob3V0IGZ1cnRoZXIgcHJvY2Vzc2luZy5cblx0XHRcdC8vIFNlZSBhZGQtZGF0YS5qcyBwZXJmIHRlc3Rcblx0XHRcdHJldHVyblxuXHRcdH1cblx0XHRmaW5hbGl6ZShyb290U2NvcGUsIGNoaWxkVmFsdWUpXG5cdFx0Ly8gaW1tZXIgZGVlcCBmcmVlemVzIHBsYWluIG9iamVjdHMsIHNvIGlmIHRoZXJlIGlzIG5vIHBhcmVudCBzdGF0ZSwgd2UgZnJlZXplIGFzIHdlbGxcblx0XHRpZiAoIXBhcmVudFN0YXRlIHx8ICFwYXJlbnRTdGF0ZS5zY29wZV8ucGFyZW50Xylcblx0XHRcdG1heWJlRnJlZXplKHJvb3RTY29wZSwgY2hpbGRWYWx1ZSlcblx0fVxufVxuXG5mdW5jdGlvbiBtYXliZUZyZWV6ZShzY29wZTogSW1tZXJTY29wZSwgdmFsdWU6IGFueSwgZGVlcCA9IGZhbHNlKSB7XG5cdC8vIHdlIG5ldmVyIGZyZWV6ZSBmb3IgYSBub24tcm9vdCBzY29wZTsgYXMgaXQgd291bGQgcHJldmVudCBwcnVuaW5nIGZvciBkcmFmdHMgaW5zaWRlIHdyYXBwaW5nIG9iamVjdHNcblx0aWYgKCFzY29wZS5wYXJlbnRfICYmIHNjb3BlLmltbWVyXy5hdXRvRnJlZXplXyAmJiBzY29wZS5jYW5BdXRvRnJlZXplXykge1xuXHRcdGZyZWV6ZSh2YWx1ZSwgZGVlcClcblx0fVxufVxuIiwgImltcG9ydCB7XG5cdGVhY2gsXG5cdGhhcyxcblx0aXMsXG5cdGlzRHJhZnRhYmxlLFxuXHRzaGFsbG93Q29weSxcblx0bGF0ZXN0LFxuXHRJbW1lckJhc2VTdGF0ZSxcblx0SW1tZXJTdGF0ZSxcblx0RHJhZnRlZCxcblx0QW55T2JqZWN0LFxuXHRBbnlBcnJheSxcblx0T2JqZWN0aXNoLFxuXHRnZXRDdXJyZW50U2NvcGUsXG5cdGdldFByb3RvdHlwZU9mLFxuXHREUkFGVF9TVEFURSxcblx0ZGllLFxuXHRjcmVhdGVQcm94eSxcblx0QXJjaFR5cGUsXG5cdEltbWVyU2NvcGVcbn0gZnJvbSBcIi4uL2ludGVybmFsXCJcblxuaW50ZXJmYWNlIFByb3h5QmFzZVN0YXRlIGV4dGVuZHMgSW1tZXJCYXNlU3RhdGUge1xuXHRhc3NpZ25lZF86IHtcblx0XHRbcHJvcGVydHk6IHN0cmluZ106IGJvb2xlYW5cblx0fVxuXHRwYXJlbnRfPzogSW1tZXJTdGF0ZVxuXHRyZXZva2VfKCk6IHZvaWRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm94eU9iamVjdFN0YXRlIGV4dGVuZHMgUHJveHlCYXNlU3RhdGUge1xuXHR0eXBlXzogQXJjaFR5cGUuT2JqZWN0XG5cdGJhc2VfOiBhbnlcblx0Y29weV86IGFueVxuXHRkcmFmdF86IERyYWZ0ZWQ8QW55T2JqZWN0LCBQcm94eU9iamVjdFN0YXRlPlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb3h5QXJyYXlTdGF0ZSBleHRlbmRzIFByb3h5QmFzZVN0YXRlIHtcblx0dHlwZV86IEFyY2hUeXBlLkFycmF5XG5cdGJhc2VfOiBBbnlBcnJheVxuXHRjb3B5XzogQW55QXJyYXkgfCBudWxsXG5cdGRyYWZ0XzogRHJhZnRlZDxBbnlBcnJheSwgUHJveHlBcnJheVN0YXRlPlxufVxuXG50eXBlIFByb3h5U3RhdGUgPSBQcm94eU9iamVjdFN0YXRlIHwgUHJveHlBcnJheVN0YXRlXG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBkcmFmdCBvZiB0aGUgYGJhc2VgIG9iamVjdC5cbiAqXG4gKiBUaGUgc2Vjb25kIGFyZ3VtZW50IGlzIHRoZSBwYXJlbnQgZHJhZnQtc3RhdGUgKHVzZWQgaW50ZXJuYWxseSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm94eVByb3h5PFQgZXh0ZW5kcyBPYmplY3Rpc2g+KFxuXHRiYXNlOiBULFxuXHRwYXJlbnQ/OiBJbW1lclN0YXRlXG4pOiBEcmFmdGVkPFQsIFByb3h5U3RhdGU+IHtcblx0Y29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkoYmFzZSlcblx0Y29uc3Qgc3RhdGU6IFByb3h5U3RhdGUgPSB7XG5cdFx0dHlwZV86IGlzQXJyYXkgPyBBcmNoVHlwZS5BcnJheSA6IChBcmNoVHlwZS5PYmplY3QgYXMgYW55KSxcblx0XHQvLyBUcmFjayB3aGljaCBwcm9kdWNlIGNhbGwgdGhpcyBpcyBhc3NvY2lhdGVkIHdpdGguXG5cdFx0c2NvcGVfOiBwYXJlbnQgPyBwYXJlbnQuc2NvcGVfIDogZ2V0Q3VycmVudFNjb3BlKCkhLFxuXHRcdC8vIFRydWUgZm9yIGJvdGggc2hhbGxvdyBhbmQgZGVlcCBjaGFuZ2VzLlxuXHRcdG1vZGlmaWVkXzogZmFsc2UsXG5cdFx0Ly8gVXNlZCBkdXJpbmcgZmluYWxpemF0aW9uLlxuXHRcdGZpbmFsaXplZF86IGZhbHNlLFxuXHRcdC8vIFRyYWNrIHdoaWNoIHByb3BlcnRpZXMgaGF2ZSBiZWVuIGFzc2lnbmVkICh0cnVlKSBvciBkZWxldGVkIChmYWxzZSkuXG5cdFx0YXNzaWduZWRfOiB7fSxcblx0XHQvLyBUaGUgcGFyZW50IGRyYWZ0IHN0YXRlLlxuXHRcdHBhcmVudF86IHBhcmVudCxcblx0XHQvLyBUaGUgYmFzZSBzdGF0ZS5cblx0XHRiYXNlXzogYmFzZSxcblx0XHQvLyBUaGUgYmFzZSBwcm94eS5cblx0XHRkcmFmdF86IG51bGwgYXMgYW55LCAvLyBzZXQgYmVsb3dcblx0XHQvLyBUaGUgYmFzZSBjb3B5IHdpdGggYW55IHVwZGF0ZWQgdmFsdWVzLlxuXHRcdGNvcHlfOiBudWxsLFxuXHRcdC8vIENhbGxlZCBieSB0aGUgYHByb2R1Y2VgIGZ1bmN0aW9uLlxuXHRcdHJldm9rZV86IG51bGwgYXMgYW55LFxuXHRcdGlzTWFudWFsXzogZmFsc2Vcblx0fVxuXG5cdC8vIHRoZSB0cmFwcyBtdXN0IHRhcmdldCBzb21ldGhpbmcsIGEgYml0IGxpa2UgdGhlICdyZWFsJyBiYXNlLlxuXHQvLyBidXQgYWxzbywgd2UgbmVlZCB0byBiZSBhYmxlIHRvIGRldGVybWluZSBmcm9tIHRoZSB0YXJnZXQgd2hhdCB0aGUgcmVsZXZhbnQgc3RhdGUgaXNcblx0Ly8gKHRvIGF2b2lkIGNyZWF0aW5nIHRyYXBzIHBlciBpbnN0YW5jZSB0byBjYXB0dXJlIHRoZSBzdGF0ZSBpbiBjbG9zdXJlLFxuXHQvLyBhbmQgdG8gYXZvaWQgY3JlYXRpbmcgd2VpcmQgaGlkZGVuIHByb3BlcnRpZXMgYXMgd2VsbClcblx0Ly8gU28gdGhlIHRyaWNrIGlzIHRvIHVzZSAnc3RhdGUnIGFzIHRoZSBhY3R1YWwgJ3RhcmdldCchIChhbmQgbWFrZSBzdXJlIHdlIGludGVyY2VwdCBldmVyeXRoaW5nKVxuXHQvLyBOb3RlIHRoYXQgaW4gdGhlIGNhc2Ugb2YgYW4gYXJyYXksIHdlIHB1dCB0aGUgc3RhdGUgaW4gYW4gYXJyYXkgdG8gaGF2ZSBiZXR0ZXIgUmVmbGVjdCBkZWZhdWx0cyBvb3RiXG5cdGxldCB0YXJnZXQ6IFQgPSBzdGF0ZSBhcyBhbnlcblx0bGV0IHRyYXBzOiBQcm94eUhhbmRsZXI8b2JqZWN0IHwgQXJyYXk8YW55Pj4gPSBvYmplY3RUcmFwc1xuXHRpZiAoaXNBcnJheSkge1xuXHRcdHRhcmdldCA9IFtzdGF0ZV0gYXMgYW55XG5cdFx0dHJhcHMgPSBhcnJheVRyYXBzXG5cdH1cblxuXHRjb25zdCB7cmV2b2tlLCBwcm94eX0gPSBQcm94eS5yZXZvY2FibGUodGFyZ2V0LCB0cmFwcylcblx0c3RhdGUuZHJhZnRfID0gcHJveHkgYXMgYW55XG5cdHN0YXRlLnJldm9rZV8gPSByZXZva2Vcblx0cmV0dXJuIHByb3h5IGFzIGFueVxufVxuXG4vKipcbiAqIE9iamVjdCBkcmFmdHNcbiAqL1xuZXhwb3J0IGNvbnN0IG9iamVjdFRyYXBzOiBQcm94eUhhbmRsZXI8UHJveHlTdGF0ZT4gPSB7XG5cdGdldChzdGF0ZSwgcHJvcCkge1xuXHRcdGlmIChwcm9wID09PSBEUkFGVF9TVEFURSkgcmV0dXJuIHN0YXRlXG5cblx0XHRjb25zdCBzb3VyY2UgPSBsYXRlc3Qoc3RhdGUpXG5cdFx0aWYgKCFoYXMoc291cmNlLCBwcm9wKSkge1xuXHRcdFx0Ly8gbm9uLWV4aXN0aW5nIG9yIG5vbi1vd24gcHJvcGVydHkuLi5cblx0XHRcdHJldHVybiByZWFkUHJvcEZyb21Qcm90byhzdGF0ZSwgc291cmNlLCBwcm9wKVxuXHRcdH1cblx0XHRjb25zdCB2YWx1ZSA9IHNvdXJjZVtwcm9wXVxuXHRcdGlmIChzdGF0ZS5maW5hbGl6ZWRfIHx8ICFpc0RyYWZ0YWJsZSh2YWx1ZSkpIHtcblx0XHRcdHJldHVybiB2YWx1ZVxuXHRcdH1cblx0XHQvLyBDaGVjayBmb3IgZXhpc3RpbmcgZHJhZnQgaW4gbW9kaWZpZWQgc3RhdGUuXG5cdFx0Ly8gQXNzaWduZWQgdmFsdWVzIGFyZSBuZXZlciBkcmFmdGVkLiBUaGlzIGNhdGNoZXMgYW55IGRyYWZ0cyB3ZSBjcmVhdGVkLCB0b28uXG5cdFx0aWYgKHZhbHVlID09PSBwZWVrKHN0YXRlLmJhc2VfLCBwcm9wKSkge1xuXHRcdFx0cHJlcGFyZUNvcHkoc3RhdGUpXG5cdFx0XHRyZXR1cm4gKHN0YXRlLmNvcHlfIVtwcm9wIGFzIGFueV0gPSBjcmVhdGVQcm94eSh2YWx1ZSwgc3RhdGUpKVxuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWVcblx0fSxcblx0aGFzKHN0YXRlLCBwcm9wKSB7XG5cdFx0cmV0dXJuIHByb3AgaW4gbGF0ZXN0KHN0YXRlKVxuXHR9LFxuXHRvd25LZXlzKHN0YXRlKSB7XG5cdFx0cmV0dXJuIFJlZmxlY3Qub3duS2V5cyhsYXRlc3Qoc3RhdGUpKVxuXHR9LFxuXHRzZXQoXG5cdFx0c3RhdGU6IFByb3h5T2JqZWN0U3RhdGUsXG5cdFx0cHJvcDogc3RyaW5nIC8qIHN0cmljdGx5IG5vdCwgYnV0IGhlbHBzIFRTICovLFxuXHRcdHZhbHVlXG5cdCkge1xuXHRcdGNvbnN0IGRlc2MgPSBnZXREZXNjcmlwdG9yRnJvbVByb3RvKGxhdGVzdChzdGF0ZSksIHByb3ApXG5cdFx0aWYgKGRlc2M/LnNldCkge1xuXHRcdFx0Ly8gc3BlY2lhbCBjYXNlOiBpZiB0aGlzIHdyaXRlIGlzIGNhcHR1cmVkIGJ5IGEgc2V0dGVyLCB3ZSBoYXZlXG5cdFx0XHQvLyB0byB0cmlnZ2VyIGl0IHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuXHRcdFx0ZGVzYy5zZXQuY2FsbChzdGF0ZS5kcmFmdF8sIHZhbHVlKVxuXHRcdFx0cmV0dXJuIHRydWVcblx0XHR9XG5cdFx0aWYgKCFzdGF0ZS5tb2RpZmllZF8pIHtcblx0XHRcdC8vIHRoZSBsYXN0IGNoZWNrIGlzIGJlY2F1c2Ugd2UgbmVlZCB0byBiZSBhYmxlIHRvIGRpc3Rpbmd1aXNoIHNldHRpbmcgYSBub24tZXhpc3RpbmcgdG8gdW5kZWZpbmVkICh3aGljaCBpcyBhIGNoYW5nZSlcblx0XHRcdC8vIGZyb20gc2V0dGluZyBhbiBleGlzdGluZyBwcm9wZXJ0eSB3aXRoIHZhbHVlIHVuZGVmaW5lZCB0byB1bmRlZmluZWQgKHdoaWNoIGlzIG5vdCBhIGNoYW5nZSlcblx0XHRcdGNvbnN0IGN1cnJlbnQgPSBwZWVrKGxhdGVzdChzdGF0ZSksIHByb3ApXG5cdFx0XHQvLyBzcGVjaWFsIGNhc2UsIGlmIHdlIGFzc2lnbmluZyB0aGUgb3JpZ2luYWwgdmFsdWUgdG8gYSBkcmFmdCwgd2UgY2FuIGlnbm9yZSB0aGUgYXNzaWdubWVudFxuXHRcdFx0Y29uc3QgY3VycmVudFN0YXRlOiBQcm94eU9iamVjdFN0YXRlID0gY3VycmVudD8uW0RSQUZUX1NUQVRFXVxuXHRcdFx0aWYgKGN1cnJlbnRTdGF0ZSAmJiBjdXJyZW50U3RhdGUuYmFzZV8gPT09IHZhbHVlKSB7XG5cdFx0XHRcdHN0YXRlLmNvcHlfIVtwcm9wXSA9IHZhbHVlXG5cdFx0XHRcdHN0YXRlLmFzc2lnbmVkX1twcm9wXSA9IGZhbHNlXG5cdFx0XHRcdHJldHVybiB0cnVlXG5cdFx0XHR9XG5cdFx0XHRpZiAoaXModmFsdWUsIGN1cnJlbnQpICYmICh2YWx1ZSAhPT0gdW5kZWZpbmVkIHx8IGhhcyhzdGF0ZS5iYXNlXywgcHJvcCkpKVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdFx0cHJlcGFyZUNvcHkoc3RhdGUpXG5cdFx0XHRtYXJrQ2hhbmdlZChzdGF0ZSlcblx0XHR9XG5cblx0XHRpZiAoXG5cdFx0XHQoc3RhdGUuY29weV8hW3Byb3BdID09PSB2YWx1ZSAmJlxuXHRcdFx0XHQvLyBzcGVjaWFsIGNhc2U6IGhhbmRsZSBuZXcgcHJvcHMgd2l0aCB2YWx1ZSAndW5kZWZpbmVkJ1xuXHRcdFx0XHQodmFsdWUgIT09IHVuZGVmaW5lZCB8fCBwcm9wIGluIHN0YXRlLmNvcHlfKSkgfHxcblx0XHRcdC8vIHNwZWNpYWwgY2FzZTogTmFOXG5cdFx0XHQoTnVtYmVyLmlzTmFOKHZhbHVlKSAmJiBOdW1iZXIuaXNOYU4oc3RhdGUuY29weV8hW3Byb3BdKSlcblx0XHQpXG5cdFx0XHRyZXR1cm4gdHJ1ZVxuXG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHN0YXRlLmNvcHlfIVtwcm9wXSA9IHZhbHVlXG5cdFx0c3RhdGUuYXNzaWduZWRfW3Byb3BdID0gdHJ1ZVxuXHRcdHJldHVybiB0cnVlXG5cdH0sXG5cdGRlbGV0ZVByb3BlcnR5KHN0YXRlLCBwcm9wOiBzdHJpbmcpIHtcblx0XHQvLyBUaGUgYHVuZGVmaW5lZGAgY2hlY2sgaXMgYSBmYXN0IHBhdGggZm9yIHByZS1leGlzdGluZyBrZXlzLlxuXHRcdGlmIChwZWVrKHN0YXRlLmJhc2VfLCBwcm9wKSAhPT0gdW5kZWZpbmVkIHx8IHByb3AgaW4gc3RhdGUuYmFzZV8pIHtcblx0XHRcdHN0YXRlLmFzc2lnbmVkX1twcm9wXSA9IGZhbHNlXG5cdFx0XHRwcmVwYXJlQ29weShzdGF0ZSlcblx0XHRcdG1hcmtDaGFuZ2VkKHN0YXRlKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBpZiBhbiBvcmlnaW5hbGx5IG5vdCBhc3NpZ25lZCBwcm9wZXJ0eSB3YXMgZGVsZXRlZFxuXHRcdFx0ZGVsZXRlIHN0YXRlLmFzc2lnbmVkX1twcm9wXVxuXHRcdH1cblx0XHRpZiAoc3RhdGUuY29weV8pIHtcblx0XHRcdGRlbGV0ZSBzdGF0ZS5jb3B5X1twcm9wXVxuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZVxuXHR9LFxuXHQvLyBOb3RlOiBXZSBuZXZlciBjb2VyY2UgYGRlc2MudmFsdWVgIGludG8gYW4gSW1tZXIgZHJhZnQsIGJlY2F1c2Ugd2UgY2FuJ3QgbWFrZVxuXHQvLyB0aGUgc2FtZSBndWFyYW50ZWUgaW4gRVM1IG1vZGUuXG5cdGdldE93blByb3BlcnR5RGVzY3JpcHRvcihzdGF0ZSwgcHJvcCkge1xuXHRcdGNvbnN0IG93bmVyID0gbGF0ZXN0KHN0YXRlKVxuXHRcdGNvbnN0IGRlc2MgPSBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvd25lciwgcHJvcClcblx0XHRpZiAoIWRlc2MpIHJldHVybiBkZXNjXG5cdFx0cmV0dXJuIHtcblx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0Y29uZmlndXJhYmxlOiBzdGF0ZS50eXBlXyAhPT0gQXJjaFR5cGUuQXJyYXkgfHwgcHJvcCAhPT0gXCJsZW5ndGhcIixcblx0XHRcdGVudW1lcmFibGU6IGRlc2MuZW51bWVyYWJsZSxcblx0XHRcdHZhbHVlOiBvd25lcltwcm9wXVxuXHRcdH1cblx0fSxcblx0ZGVmaW5lUHJvcGVydHkoKSB7XG5cdFx0ZGllKDExKVxuXHR9LFxuXHRnZXRQcm90b3R5cGVPZihzdGF0ZSkge1xuXHRcdHJldHVybiBnZXRQcm90b3R5cGVPZihzdGF0ZS5iYXNlXylcblx0fSxcblx0c2V0UHJvdG90eXBlT2YoKSB7XG5cdFx0ZGllKDEyKVxuXHR9XG59XG5cbi8qKlxuICogQXJyYXkgZHJhZnRzXG4gKi9cblxuY29uc3QgYXJyYXlUcmFwczogUHJveHlIYW5kbGVyPFtQcm94eUFycmF5U3RhdGVdPiA9IHt9XG5lYWNoKG9iamVjdFRyYXBzLCAoa2V5LCBmbikgPT4ge1xuXHQvLyBAdHMtaWdub3JlXG5cdGFycmF5VHJhcHNba2V5XSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFyZ3VtZW50c1swXSA9IGFyZ3VtZW50c1swXVswXVxuXHRcdHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG5cdH1cbn0pXG5hcnJheVRyYXBzLmRlbGV0ZVByb3BlcnR5ID0gZnVuY3Rpb24oc3RhdGUsIHByb3ApIHtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJiBpc05hTihwYXJzZUludChwcm9wIGFzIGFueSkpKVxuXHRcdGRpZSgxMylcblx0Ly8gQHRzLWlnbm9yZVxuXHRyZXR1cm4gYXJyYXlUcmFwcy5zZXQhLmNhbGwodGhpcywgc3RhdGUsIHByb3AsIHVuZGVmaW5lZClcbn1cbmFycmF5VHJhcHMuc2V0ID0gZnVuY3Rpb24oc3RhdGUsIHByb3AsIHZhbHVlKSB7XG5cdGlmIChcblx0XHRwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiZcblx0XHRwcm9wICE9PSBcImxlbmd0aFwiICYmXG5cdFx0aXNOYU4ocGFyc2VJbnQocHJvcCBhcyBhbnkpKVxuXHQpXG5cdFx0ZGllKDE0KVxuXHRyZXR1cm4gb2JqZWN0VHJhcHMuc2V0IS5jYWxsKHRoaXMsIHN0YXRlWzBdLCBwcm9wLCB2YWx1ZSwgc3RhdGVbMF0pXG59XG5cbi8vIEFjY2VzcyBhIHByb3BlcnR5IHdpdGhvdXQgY3JlYXRpbmcgYW4gSW1tZXIgZHJhZnQuXG5mdW5jdGlvbiBwZWVrKGRyYWZ0OiBEcmFmdGVkLCBwcm9wOiBQcm9wZXJ0eUtleSkge1xuXHRjb25zdCBzdGF0ZSA9IGRyYWZ0W0RSQUZUX1NUQVRFXVxuXHRjb25zdCBzb3VyY2UgPSBzdGF0ZSA/IGxhdGVzdChzdGF0ZSkgOiBkcmFmdFxuXHRyZXR1cm4gc291cmNlW3Byb3BdXG59XG5cbmZ1bmN0aW9uIHJlYWRQcm9wRnJvbVByb3RvKHN0YXRlOiBJbW1lclN0YXRlLCBzb3VyY2U6IGFueSwgcHJvcDogUHJvcGVydHlLZXkpIHtcblx0Y29uc3QgZGVzYyA9IGdldERlc2NyaXB0b3JGcm9tUHJvdG8oc291cmNlLCBwcm9wKVxuXHRyZXR1cm4gZGVzY1xuXHRcdD8gYHZhbHVlYCBpbiBkZXNjXG5cdFx0XHQ/IGRlc2MudmFsdWVcblx0XHRcdDogLy8gVGhpcyBpcyBhIHZlcnkgc3BlY2lhbCBjYXNlLCBpZiB0aGUgcHJvcCBpcyBhIGdldHRlciBkZWZpbmVkIGJ5IHRoZVxuXHRcdFx0ICAvLyBwcm90b3R5cGUsIHdlIHNob3VsZCBpbnZva2UgaXQgd2l0aCB0aGUgZHJhZnQgYXMgY29udGV4dCFcblx0XHRcdCAgZGVzYy5nZXQ/LmNhbGwoc3RhdGUuZHJhZnRfKVxuXHRcdDogdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGdldERlc2NyaXB0b3JGcm9tUHJvdG8oXG5cdHNvdXJjZTogYW55LFxuXHRwcm9wOiBQcm9wZXJ0eUtleVxuKTogUHJvcGVydHlEZXNjcmlwdG9yIHwgdW5kZWZpbmVkIHtcblx0Ly8gJ2luJyBjaGVja3MgcHJvdG8hXG5cdGlmICghKHByb3AgaW4gc291cmNlKSkgcmV0dXJuIHVuZGVmaW5lZFxuXHRsZXQgcHJvdG8gPSBnZXRQcm90b3R5cGVPZihzb3VyY2UpXG5cdHdoaWxlIChwcm90bykge1xuXHRcdGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBwcm9wKVxuXHRcdGlmIChkZXNjKSByZXR1cm4gZGVzY1xuXHRcdHByb3RvID0gZ2V0UHJvdG90eXBlT2YocHJvdG8pXG5cdH1cblx0cmV0dXJuIHVuZGVmaW5lZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFya0NoYW5nZWQoc3RhdGU6IEltbWVyU3RhdGUpIHtcblx0aWYgKCFzdGF0ZS5tb2RpZmllZF8pIHtcblx0XHRzdGF0ZS5tb2RpZmllZF8gPSB0cnVlXG5cdFx0aWYgKHN0YXRlLnBhcmVudF8pIHtcblx0XHRcdG1hcmtDaGFuZ2VkKHN0YXRlLnBhcmVudF8pXG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlQ29weShzdGF0ZToge1xuXHRiYXNlXzogYW55XG5cdGNvcHlfOiBhbnlcblx0c2NvcGVfOiBJbW1lclNjb3BlXG59KSB7XG5cdGlmICghc3RhdGUuY29weV8pIHtcblx0XHRzdGF0ZS5jb3B5XyA9IHNoYWxsb3dDb3B5KFxuXHRcdFx0c3RhdGUuYmFzZV8sXG5cdFx0XHRzdGF0ZS5zY29wZV8uaW1tZXJfLnVzZVN0cmljdFNoYWxsb3dDb3B5X1xuXHRcdClcblx0fVxufVxuIiwgImltcG9ydCB7XG5cdElQcm9kdWNlV2l0aFBhdGNoZXMsXG5cdElQcm9kdWNlLFxuXHRJbW1lclN0YXRlLFxuXHREcmFmdGVkLFxuXHRpc0RyYWZ0YWJsZSxcblx0cHJvY2Vzc1Jlc3VsdCxcblx0UGF0Y2gsXG5cdE9iamVjdGlzaCxcblx0RFJBRlRfU1RBVEUsXG5cdERyYWZ0LFxuXHRQYXRjaExpc3RlbmVyLFxuXHRpc0RyYWZ0LFxuXHRpc01hcCxcblx0aXNTZXQsXG5cdGNyZWF0ZVByb3h5UHJveHksXG5cdGdldFBsdWdpbixcblx0ZGllLFxuXHRlbnRlclNjb3BlLFxuXHRyZXZva2VTY29wZSxcblx0bGVhdmVTY29wZSxcblx0dXNlUGF0Y2hlc0luU2NvcGUsXG5cdGdldEN1cnJlbnRTY29wZSxcblx0Tk9USElORyxcblx0ZnJlZXplLFxuXHRjdXJyZW50XG59IGZyb20gXCIuLi9pbnRlcm5hbFwiXG5cbmludGVyZmFjZSBQcm9kdWNlcnNGbnMge1xuXHRwcm9kdWNlOiBJUHJvZHVjZVxuXHRwcm9kdWNlV2l0aFBhdGNoZXM6IElQcm9kdWNlV2l0aFBhdGNoZXNcbn1cblxuZXhwb3J0IGNsYXNzIEltbWVyIGltcGxlbWVudHMgUHJvZHVjZXJzRm5zIHtcblx0YXV0b0ZyZWV6ZV86IGJvb2xlYW4gPSB0cnVlXG5cdHVzZVN0cmljdFNoYWxsb3dDb3B5XzogYm9vbGVhbiA9IGZhbHNlXG5cblx0Y29uc3RydWN0b3IoY29uZmlnPzoge2F1dG9GcmVlemU/OiBib29sZWFuOyB1c2VTdHJpY3RTaGFsbG93Q29weT86IGJvb2xlYW59KSB7XG5cdFx0aWYgKHR5cGVvZiBjb25maWc/LmF1dG9GcmVlemUgPT09IFwiYm9vbGVhblwiKVxuXHRcdFx0dGhpcy5zZXRBdXRvRnJlZXplKGNvbmZpZyEuYXV0b0ZyZWV6ZSlcblx0XHRpZiAodHlwZW9mIGNvbmZpZz8udXNlU3RyaWN0U2hhbGxvd0NvcHkgPT09IFwiYm9vbGVhblwiKVxuXHRcdFx0dGhpcy5zZXRVc2VTdHJpY3RTaGFsbG93Q29weShjb25maWchLnVzZVN0cmljdFNoYWxsb3dDb3B5KVxuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBgcHJvZHVjZWAgZnVuY3Rpb24gdGFrZXMgYSB2YWx1ZSBhbmQgYSBcInJlY2lwZSBmdW5jdGlvblwiICh3aG9zZVxuXHQgKiByZXR1cm4gdmFsdWUgb2Z0ZW4gZGVwZW5kcyBvbiB0aGUgYmFzZSBzdGF0ZSkuIFRoZSByZWNpcGUgZnVuY3Rpb24gaXNcblx0ICogZnJlZSB0byBtdXRhdGUgaXRzIGZpcnN0IGFyZ3VtZW50IGhvd2V2ZXIgaXQgd2FudHMuIEFsbCBtdXRhdGlvbnMgYXJlXG5cdCAqIG9ubHkgZXZlciBhcHBsaWVkIHRvIGEgX19jb3B5X18gb2YgdGhlIGJhc2Ugc3RhdGUuXG5cdCAqXG5cdCAqIFBhc3Mgb25seSBhIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIFwiY3VycmllZCBwcm9kdWNlclwiIHdoaWNoIHJlbGlldmVzIHlvdVxuXHQgKiBmcm9tIHBhc3NpbmcgdGhlIHJlY2lwZSBmdW5jdGlvbiBldmVyeSB0aW1lLlxuXHQgKlxuXHQgKiBPbmx5IHBsYWluIG9iamVjdHMgYW5kIGFycmF5cyBhcmUgbWFkZSBtdXRhYmxlLiBBbGwgb3RoZXIgb2JqZWN0cyBhcmVcblx0ICogY29uc2lkZXJlZCB1bmNvcHlhYmxlLlxuXHQgKlxuXHQgKiBOb3RlOiBUaGlzIGZ1bmN0aW9uIGlzIF9fYm91bmRfXyB0byBpdHMgYEltbWVyYCBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHthbnl9IGJhc2UgLSB0aGUgaW5pdGlhbCBzdGF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWNpcGUgLSBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgcHJveHkgb2YgdGhlIGJhc2Ugc3RhdGUgYXMgZmlyc3QgYXJndW1lbnQgYW5kIHdoaWNoIGNhbiBiZSBmcmVlbHkgbW9kaWZpZWRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gcGF0Y2hMaXN0ZW5lciAtIG9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2l0aCBhbGwgdGhlIHBhdGNoZXMgcHJvZHVjZWQgaGVyZVxuXHQgKiBAcmV0dXJucyB7YW55fSBhIG5ldyBzdGF0ZSwgb3IgdGhlIGluaXRpYWwgc3RhdGUgaWYgbm90aGluZyB3YXMgbW9kaWZpZWRcblx0ICovXG5cdHByb2R1Y2U6IElQcm9kdWNlID0gKGJhc2U6IGFueSwgcmVjaXBlPzogYW55LCBwYXRjaExpc3RlbmVyPzogYW55KSA9PiB7XG5cdFx0Ly8gY3VycmllZCBpbnZvY2F0aW9uXG5cdFx0aWYgKHR5cGVvZiBiYXNlID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIHJlY2lwZSAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRjb25zdCBkZWZhdWx0QmFzZSA9IHJlY2lwZVxuXHRcdFx0cmVjaXBlID0gYmFzZVxuXG5cdFx0XHRjb25zdCBzZWxmID0gdGhpc1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIGN1cnJpZWRQcm9kdWNlKFxuXHRcdFx0XHR0aGlzOiBhbnksXG5cdFx0XHRcdGJhc2UgPSBkZWZhdWx0QmFzZSxcblx0XHRcdFx0Li4uYXJnczogYW55W11cblx0XHRcdCkge1xuXHRcdFx0XHRyZXR1cm4gc2VsZi5wcm9kdWNlKGJhc2UsIChkcmFmdDogRHJhZnRlZCkgPT4gcmVjaXBlLmNhbGwodGhpcywgZHJhZnQsIC4uLmFyZ3MpKSAvLyBwcmV0dGllci1pZ25vcmVcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodHlwZW9mIHJlY2lwZSAhPT0gXCJmdW5jdGlvblwiKSBkaWUoNilcblx0XHRpZiAocGF0Y2hMaXN0ZW5lciAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBwYXRjaExpc3RlbmVyICE9PSBcImZ1bmN0aW9uXCIpXG5cdFx0XHRkaWUoNylcblxuXHRcdGxldCByZXN1bHRcblxuXHRcdC8vIE9ubHkgcGxhaW4gb2JqZWN0cywgYXJyYXlzLCBhbmQgXCJpbW1lcmFibGUgY2xhc3Nlc1wiIGFyZSBkcmFmdGVkLlxuXHRcdGlmIChpc0RyYWZ0YWJsZShiYXNlKSkge1xuXHRcdFx0Y29uc3Qgc2NvcGUgPSBlbnRlclNjb3BlKHRoaXMpXG5cdFx0XHRjb25zdCBwcm94eSA9IGNyZWF0ZVByb3h5KGJhc2UsIHVuZGVmaW5lZClcblx0XHRcdGxldCBoYXNFcnJvciA9IHRydWVcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHJlc3VsdCA9IHJlY2lwZShwcm94eSlcblx0XHRcdFx0aGFzRXJyb3IgPSBmYWxzZVxuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0Ly8gZmluYWxseSBpbnN0ZWFkIG9mIGNhdGNoICsgcmV0aHJvdyBiZXR0ZXIgcHJlc2VydmVzIG9yaWdpbmFsIHN0YWNrXG5cdFx0XHRcdGlmIChoYXNFcnJvcikgcmV2b2tlU2NvcGUoc2NvcGUpXG5cdFx0XHRcdGVsc2UgbGVhdmVTY29wZShzY29wZSlcblx0XHRcdH1cblx0XHRcdHVzZVBhdGNoZXNJblNjb3BlKHNjb3BlLCBwYXRjaExpc3RlbmVyKVxuXHRcdFx0cmV0dXJuIHByb2Nlc3NSZXN1bHQocmVzdWx0LCBzY29wZSlcblx0XHR9IGVsc2UgaWYgKCFiYXNlIHx8IHR5cGVvZiBiYXNlICE9PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRyZXN1bHQgPSByZWNpcGUoYmFzZSlcblx0XHRcdGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gYmFzZVxuXHRcdFx0aWYgKHJlc3VsdCA9PT0gTk9USElORykgcmVzdWx0ID0gdW5kZWZpbmVkXG5cdFx0XHRpZiAodGhpcy5hdXRvRnJlZXplXykgZnJlZXplKHJlc3VsdCwgdHJ1ZSlcblx0XHRcdGlmIChwYXRjaExpc3RlbmVyKSB7XG5cdFx0XHRcdGNvbnN0IHA6IFBhdGNoW10gPSBbXVxuXHRcdFx0XHRjb25zdCBpcDogUGF0Y2hbXSA9IFtdXG5cdFx0XHRcdGdldFBsdWdpbihcIlBhdGNoZXNcIikuZ2VuZXJhdGVSZXBsYWNlbWVudFBhdGNoZXNfKGJhc2UsIHJlc3VsdCwgcCwgaXApXG5cdFx0XHRcdHBhdGNoTGlzdGVuZXIocCwgaXApXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0XG5cdFx0fSBlbHNlIGRpZSgxLCBiYXNlKVxuXHR9XG5cblx0cHJvZHVjZVdpdGhQYXRjaGVzOiBJUHJvZHVjZVdpdGhQYXRjaGVzID0gKGJhc2U6IGFueSwgcmVjaXBlPzogYW55KTogYW55ID0+IHtcblx0XHQvLyBjdXJyaWVkIGludm9jYXRpb25cblx0XHRpZiAodHlwZW9mIGJhc2UgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0cmV0dXJuIChzdGF0ZTogYW55LCAuLi5hcmdzOiBhbnlbXSkgPT5cblx0XHRcdFx0dGhpcy5wcm9kdWNlV2l0aFBhdGNoZXMoc3RhdGUsIChkcmFmdDogYW55KSA9PiBiYXNlKGRyYWZ0LCAuLi5hcmdzKSlcblx0XHR9XG5cblx0XHRsZXQgcGF0Y2hlczogUGF0Y2hbXSwgaW52ZXJzZVBhdGNoZXM6IFBhdGNoW11cblx0XHRjb25zdCByZXN1bHQgPSB0aGlzLnByb2R1Y2UoYmFzZSwgcmVjaXBlLCAocDogUGF0Y2hbXSwgaXA6IFBhdGNoW10pID0+IHtcblx0XHRcdHBhdGNoZXMgPSBwXG5cdFx0XHRpbnZlcnNlUGF0Y2hlcyA9IGlwXG5cdFx0fSlcblx0XHRyZXR1cm4gW3Jlc3VsdCwgcGF0Y2hlcyEsIGludmVyc2VQYXRjaGVzIV1cblx0fVxuXG5cdGNyZWF0ZURyYWZ0PFQgZXh0ZW5kcyBPYmplY3Rpc2g+KGJhc2U6IFQpOiBEcmFmdDxUPiB7XG5cdFx0aWYgKCFpc0RyYWZ0YWJsZShiYXNlKSkgZGllKDgpXG5cdFx0aWYgKGlzRHJhZnQoYmFzZSkpIGJhc2UgPSBjdXJyZW50KGJhc2UpXG5cdFx0Y29uc3Qgc2NvcGUgPSBlbnRlclNjb3BlKHRoaXMpXG5cdFx0Y29uc3QgcHJveHkgPSBjcmVhdGVQcm94eShiYXNlLCB1bmRlZmluZWQpXG5cdFx0cHJveHlbRFJBRlRfU1RBVEVdLmlzTWFudWFsXyA9IHRydWVcblx0XHRsZWF2ZVNjb3BlKHNjb3BlKVxuXHRcdHJldHVybiBwcm94eSBhcyBhbnlcblx0fVxuXG5cdGZpbmlzaERyYWZ0PEQgZXh0ZW5kcyBEcmFmdDxhbnk+Pihcblx0XHRkcmFmdDogRCxcblx0XHRwYXRjaExpc3RlbmVyPzogUGF0Y2hMaXN0ZW5lclxuXHQpOiBEIGV4dGVuZHMgRHJhZnQ8aW5mZXIgVD4gPyBUIDogbmV2ZXIge1xuXHRcdGNvbnN0IHN0YXRlOiBJbW1lclN0YXRlID0gZHJhZnQgJiYgKGRyYWZ0IGFzIGFueSlbRFJBRlRfU1RBVEVdXG5cdFx0aWYgKCFzdGF0ZSB8fCAhc3RhdGUuaXNNYW51YWxfKSBkaWUoOSlcblx0XHRjb25zdCB7c2NvcGVfOiBzY29wZX0gPSBzdGF0ZVxuXHRcdHVzZVBhdGNoZXNJblNjb3BlKHNjb3BlLCBwYXRjaExpc3RlbmVyKVxuXHRcdHJldHVybiBwcm9jZXNzUmVzdWx0KHVuZGVmaW5lZCwgc2NvcGUpXG5cdH1cblxuXHQvKipcblx0ICogUGFzcyB0cnVlIHRvIGF1dG9tYXRpY2FsbHkgZnJlZXplIGFsbCBjb3BpZXMgY3JlYXRlZCBieSBJbW1lci5cblx0ICpcblx0ICogQnkgZGVmYXVsdCwgYXV0by1mcmVlemluZyBpcyBlbmFibGVkLlxuXHQgKi9cblx0c2V0QXV0b0ZyZWV6ZSh2YWx1ZTogYm9vbGVhbikge1xuXHRcdHRoaXMuYXV0b0ZyZWV6ZV8gPSB2YWx1ZVxuXHR9XG5cblx0LyoqXG5cdCAqIFBhc3MgdHJ1ZSB0byBlbmFibGUgc3RyaWN0IHNoYWxsb3cgY29weS5cblx0ICpcblx0ICogQnkgZGVmYXVsdCwgaW1tZXIgZG9lcyBub3QgY29weSB0aGUgb2JqZWN0IGRlc2NyaXB0b3JzIHN1Y2ggYXMgZ2V0dGVyLCBzZXR0ZXIgYW5kIG5vbi1lbnVtcmFibGUgcHJvcGVydGllcy5cblx0ICovXG5cdHNldFVzZVN0cmljdFNoYWxsb3dDb3B5KHZhbHVlOiBib29sZWFuKSB7XG5cdFx0dGhpcy51c2VTdHJpY3RTaGFsbG93Q29weV8gPSB2YWx1ZVxuXHR9XG5cblx0YXBwbHlQYXRjaGVzPFQgZXh0ZW5kcyBPYmplY3Rpc2g+KGJhc2U6IFQsIHBhdGNoZXM6IFBhdGNoW10pOiBUIHtcblx0XHQvLyBJZiBhIHBhdGNoIHJlcGxhY2VzIHRoZSBlbnRpcmUgc3RhdGUsIHRha2UgdGhhdCByZXBsYWNlbWVudCBhcyBiYXNlXG5cdFx0Ly8gYmVmb3JlIGFwcGx5aW5nIHBhdGNoZXNcblx0XHRsZXQgaTogbnVtYmVyXG5cdFx0Zm9yIChpID0gcGF0Y2hlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0Y29uc3QgcGF0Y2ggPSBwYXRjaGVzW2ldXG5cdFx0XHRpZiAocGF0Y2gucGF0aC5sZW5ndGggPT09IDAgJiYgcGF0Y2gub3AgPT09IFwicmVwbGFjZVwiKSB7XG5cdFx0XHRcdGJhc2UgPSBwYXRjaC52YWx1ZVxuXHRcdFx0XHRicmVha1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBJZiB0aGVyZSB3YXMgYSBwYXRjaCB0aGF0IHJlcGxhY2VkIHRoZSBlbnRpcmUgc3RhdGUsIHN0YXJ0IGZyb20gdGhlXG5cdFx0Ly8gcGF0Y2ggYWZ0ZXIgdGhhdC5cblx0XHRpZiAoaSA+IC0xKSB7XG5cdFx0XHRwYXRjaGVzID0gcGF0Y2hlcy5zbGljZShpICsgMSlcblx0XHR9XG5cblx0XHRjb25zdCBhcHBseVBhdGNoZXNJbXBsID0gZ2V0UGx1Z2luKFwiUGF0Y2hlc1wiKS5hcHBseVBhdGNoZXNfXG5cdFx0aWYgKGlzRHJhZnQoYmFzZSkpIHtcblx0XHRcdC8vIE4uQjogbmV2ZXIgaGl0cyBpZiBzb21lIHBhdGNoIGEgcmVwbGFjZW1lbnQsIHBhdGNoZXMgYXJlIG5ldmVyIGRyYWZ0c1xuXHRcdFx0cmV0dXJuIGFwcGx5UGF0Y2hlc0ltcGwoYmFzZSwgcGF0Y2hlcylcblx0XHR9XG5cdFx0Ly8gT3RoZXJ3aXNlLCBwcm9kdWNlIGEgY29weSBvZiB0aGUgYmFzZSBzdGF0ZS5cblx0XHRyZXR1cm4gdGhpcy5wcm9kdWNlKGJhc2UsIChkcmFmdDogRHJhZnRlZCkgPT5cblx0XHRcdGFwcGx5UGF0Y2hlc0ltcGwoZHJhZnQsIHBhdGNoZXMpXG5cdFx0KVxuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm94eTxUIGV4dGVuZHMgT2JqZWN0aXNoPihcblx0dmFsdWU6IFQsXG5cdHBhcmVudD86IEltbWVyU3RhdGVcbik6IERyYWZ0ZWQ8VCwgSW1tZXJTdGF0ZT4ge1xuXHQvLyBwcmVjb25kaXRpb246IGNyZWF0ZVByb3h5IHNob3VsZCBiZSBndWFyZGVkIGJ5IGlzRHJhZnRhYmxlLCBzbyB3ZSBrbm93IHdlIGNhbiBzYWZlbHkgZHJhZnRcblx0Y29uc3QgZHJhZnQ6IERyYWZ0ZWQgPSBpc01hcCh2YWx1ZSlcblx0XHQ/IGdldFBsdWdpbihcIk1hcFNldFwiKS5wcm94eU1hcF8odmFsdWUsIHBhcmVudClcblx0XHQ6IGlzU2V0KHZhbHVlKVxuXHRcdD8gZ2V0UGx1Z2luKFwiTWFwU2V0XCIpLnByb3h5U2V0Xyh2YWx1ZSwgcGFyZW50KVxuXHRcdDogY3JlYXRlUHJveHlQcm94eSh2YWx1ZSwgcGFyZW50KVxuXG5cdGNvbnN0IHNjb3BlID0gcGFyZW50ID8gcGFyZW50LnNjb3BlXyA6IGdldEN1cnJlbnRTY29wZSgpXG5cdHNjb3BlLmRyYWZ0c18ucHVzaChkcmFmdClcblx0cmV0dXJuIGRyYWZ0XG59XG4iLCAiaW1wb3J0IHtcblx0ZGllLFxuXHRpc0RyYWZ0LFxuXHRzaGFsbG93Q29weSxcblx0ZWFjaCxcblx0RFJBRlRfU1RBVEUsXG5cdHNldCxcblx0SW1tZXJTdGF0ZSxcblx0aXNEcmFmdGFibGUsXG5cdGlzRnJvemVuXG59IGZyb20gXCIuLi9pbnRlcm5hbFwiXG5cbi8qKiBUYWtlcyBhIHNuYXBzaG90IG9mIHRoZSBjdXJyZW50IHN0YXRlIG9mIGEgZHJhZnQgYW5kIGZpbmFsaXplcyBpdCAoYnV0IHdpdGhvdXQgZnJlZXppbmcpLiBUaGlzIGlzIGEgZ3JlYXQgdXRpbGl0eSB0byBwcmludCB0aGUgY3VycmVudCBzdGF0ZSBkdXJpbmcgZGVidWdnaW5nIChubyBQcm94aWVzIGluIHRoZSB3YXkpLiBUaGUgb3V0cHV0IG9mIGN1cnJlbnQgY2FuIGFsc28gYmUgc2FmZWx5IGxlYWtlZCBvdXRzaWRlIHRoZSBwcm9kdWNlci4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjdXJyZW50PFQ+KHZhbHVlOiBUKTogVFxuZXhwb3J0IGZ1bmN0aW9uIGN1cnJlbnQodmFsdWU6IGFueSk6IGFueSB7XG5cdGlmICghaXNEcmFmdCh2YWx1ZSkpIGRpZSgxMCwgdmFsdWUpXG5cdHJldHVybiBjdXJyZW50SW1wbCh2YWx1ZSlcbn1cblxuZnVuY3Rpb24gY3VycmVudEltcGwodmFsdWU6IGFueSk6IGFueSB7XG5cdGlmICghaXNEcmFmdGFibGUodmFsdWUpIHx8IGlzRnJvemVuKHZhbHVlKSkgcmV0dXJuIHZhbHVlXG5cdGNvbnN0IHN0YXRlOiBJbW1lclN0YXRlIHwgdW5kZWZpbmVkID0gdmFsdWVbRFJBRlRfU1RBVEVdXG5cdGxldCBjb3B5OiBhbnlcblx0aWYgKHN0YXRlKSB7XG5cdFx0aWYgKCFzdGF0ZS5tb2RpZmllZF8pIHJldHVybiBzdGF0ZS5iYXNlX1xuXHRcdC8vIE9wdGltaXphdGlvbjogYXZvaWQgZ2VuZXJhdGluZyBuZXcgZHJhZnRzIGR1cmluZyBjb3B5aW5nXG5cdFx0c3RhdGUuZmluYWxpemVkXyA9IHRydWVcblx0XHRjb3B5ID0gc2hhbGxvd0NvcHkodmFsdWUsIHN0YXRlLnNjb3BlXy5pbW1lcl8udXNlU3RyaWN0U2hhbGxvd0NvcHlfKVxuXHR9IGVsc2Uge1xuXHRcdGNvcHkgPSBzaGFsbG93Q29weSh2YWx1ZSwgdHJ1ZSlcblx0fVxuXHQvLyByZWN1cnNlXG5cdGVhY2goY29weSwgKGtleSwgY2hpbGRWYWx1ZSkgPT4ge1xuXHRcdHNldChjb3B5LCBrZXksIGN1cnJlbnRJbXBsKGNoaWxkVmFsdWUpKVxuXHR9KVxuXHRpZiAoc3RhdGUpIHtcblx0XHRzdGF0ZS5maW5hbGl6ZWRfID0gZmFsc2Vcblx0fVxuXHRyZXR1cm4gY29weVxufVxuIiwgImltcG9ydCB7aW1tZXJhYmxlfSBmcm9tIFwiLi4vaW1tZXJcIlxuaW1wb3J0IHtcblx0SW1tZXJTdGF0ZSxcblx0UGF0Y2gsXG5cdFNldFN0YXRlLFxuXHRQcm94eUFycmF5U3RhdGUsXG5cdE1hcFN0YXRlLFxuXHRQcm94eU9iamVjdFN0YXRlLFxuXHRQYXRjaFBhdGgsXG5cdGdldCxcblx0ZWFjaCxcblx0aGFzLFxuXHRnZXRBcmNodHlwZSxcblx0Z2V0UHJvdG90eXBlT2YsXG5cdGlzU2V0LFxuXHRpc01hcCxcblx0bG9hZFBsdWdpbixcblx0QXJjaFR5cGUsXG5cdGRpZSxcblx0aXNEcmFmdCxcblx0aXNEcmFmdGFibGUsXG5cdE5PVEhJTkcsXG5cdGVycm9yc1xufSBmcm9tIFwiLi4vaW50ZXJuYWxcIlxuXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlUGF0Y2hlcygpIHtcblx0Y29uc3QgZXJyb3JPZmZzZXQgPSAxNlxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG5cdFx0ZXJyb3JzLnB1c2goXG5cdFx0XHQnU2V0cyBjYW5ub3QgaGF2ZSBcInJlcGxhY2VcIiBwYXRjaGVzLicsXG5cdFx0XHRmdW5jdGlvbihvcDogc3RyaW5nKSB7XG5cdFx0XHRcdHJldHVybiBcIlVuc3VwcG9ydGVkIHBhdGNoIG9wZXJhdGlvbjogXCIgKyBvcFxuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uKHBhdGg6IHN0cmluZykge1xuXHRcdFx0XHRyZXR1cm4gXCJDYW5ub3QgYXBwbHkgcGF0Y2gsIHBhdGggZG9lc24ndCByZXNvbHZlOiBcIiArIHBhdGhcblx0XHRcdH0sXG5cdFx0XHRcIlBhdGNoaW5nIHJlc2VydmVkIGF0dHJpYnV0ZXMgbGlrZSBfX3Byb3RvX18sIHByb3RvdHlwZSBhbmQgY29uc3RydWN0b3IgaXMgbm90IGFsbG93ZWRcIlxuXHRcdClcblx0fVxuXG5cdGNvbnN0IFJFUExBQ0UgPSBcInJlcGxhY2VcIlxuXHRjb25zdCBBREQgPSBcImFkZFwiXG5cdGNvbnN0IFJFTU9WRSA9IFwicmVtb3ZlXCJcblxuXHRmdW5jdGlvbiBnZW5lcmF0ZVBhdGNoZXNfKFxuXHRcdHN0YXRlOiBJbW1lclN0YXRlLFxuXHRcdGJhc2VQYXRoOiBQYXRjaFBhdGgsXG5cdFx0cGF0Y2hlczogUGF0Y2hbXSxcblx0XHRpbnZlcnNlUGF0Y2hlczogUGF0Y2hbXVxuXHQpOiB2b2lkIHtcblx0XHRzd2l0Y2ggKHN0YXRlLnR5cGVfKSB7XG5cdFx0XHRjYXNlIEFyY2hUeXBlLk9iamVjdDpcblx0XHRcdGNhc2UgQXJjaFR5cGUuTWFwOlxuXHRcdFx0XHRyZXR1cm4gZ2VuZXJhdGVQYXRjaGVzRnJvbUFzc2lnbmVkKFxuXHRcdFx0XHRcdHN0YXRlLFxuXHRcdFx0XHRcdGJhc2VQYXRoLFxuXHRcdFx0XHRcdHBhdGNoZXMsXG5cdFx0XHRcdFx0aW52ZXJzZVBhdGNoZXNcblx0XHRcdFx0KVxuXHRcdFx0Y2FzZSBBcmNoVHlwZS5BcnJheTpcblx0XHRcdFx0cmV0dXJuIGdlbmVyYXRlQXJyYXlQYXRjaGVzKHN0YXRlLCBiYXNlUGF0aCwgcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpXG5cdFx0XHRjYXNlIEFyY2hUeXBlLlNldDpcblx0XHRcdFx0cmV0dXJuIGdlbmVyYXRlU2V0UGF0Y2hlcyhcblx0XHRcdFx0XHQoc3RhdGUgYXMgYW55KSBhcyBTZXRTdGF0ZSxcblx0XHRcdFx0XHRiYXNlUGF0aCxcblx0XHRcdFx0XHRwYXRjaGVzLFxuXHRcdFx0XHRcdGludmVyc2VQYXRjaGVzXG5cdFx0XHRcdClcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUFycmF5UGF0Y2hlcyhcblx0XHRzdGF0ZTogUHJveHlBcnJheVN0YXRlLFxuXHRcdGJhc2VQYXRoOiBQYXRjaFBhdGgsXG5cdFx0cGF0Y2hlczogUGF0Y2hbXSxcblx0XHRpbnZlcnNlUGF0Y2hlczogUGF0Y2hbXVxuXHQpIHtcblx0XHRsZXQge2Jhc2VfLCBhc3NpZ25lZF99ID0gc3RhdGVcblx0XHRsZXQgY29weV8gPSBzdGF0ZS5jb3B5XyFcblxuXHRcdC8vIFJlZHVjZSBjb21wbGV4aXR5IGJ5IGVuc3VyaW5nIGBiYXNlYCBpcyBuZXZlciBsb25nZXIuXG5cdFx0aWYgKGNvcHlfLmxlbmd0aCA8IGJhc2VfLmxlbmd0aCkge1xuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0O1tiYXNlXywgY29weV9dID0gW2NvcHlfLCBiYXNlX11cblx0XHRcdDtbcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXNdID0gW2ludmVyc2VQYXRjaGVzLCBwYXRjaGVzXVxuXHRcdH1cblxuXHRcdC8vIFByb2Nlc3MgcmVwbGFjZWQgaW5kaWNlcy5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGJhc2VfLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoYXNzaWduZWRfW2ldICYmIGNvcHlfW2ldICE9PSBiYXNlX1tpXSkge1xuXHRcdFx0XHRjb25zdCBwYXRoID0gYmFzZVBhdGguY29uY2F0KFtpXSlcblx0XHRcdFx0cGF0Y2hlcy5wdXNoKHtcblx0XHRcdFx0XHRvcDogUkVQTEFDRSxcblx0XHRcdFx0XHRwYXRoLFxuXHRcdFx0XHRcdC8vIE5lZWQgdG8gbWF5YmUgY2xvbmUgaXQsIGFzIGl0IGNhbiBpbiBmYWN0IGJlIHRoZSBvcmlnaW5hbCB2YWx1ZVxuXHRcdFx0XHRcdC8vIGR1ZSB0byB0aGUgYmFzZS9jb3B5IGludmVyc2lvbiBhdCB0aGUgc3RhcnQgb2YgdGhpcyBmdW5jdGlvblxuXHRcdFx0XHRcdHZhbHVlOiBjbG9uZVBhdGNoVmFsdWVJZk5lZWRlZChjb3B5X1tpXSlcblx0XHRcdFx0fSlcblx0XHRcdFx0aW52ZXJzZVBhdGNoZXMucHVzaCh7XG5cdFx0XHRcdFx0b3A6IFJFUExBQ0UsXG5cdFx0XHRcdFx0cGF0aCxcblx0XHRcdFx0XHR2YWx1ZTogY2xvbmVQYXRjaFZhbHVlSWZOZWVkZWQoYmFzZV9baV0pXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUHJvY2VzcyBhZGRlZCBpbmRpY2VzLlxuXHRcdGZvciAobGV0IGkgPSBiYXNlXy5sZW5ndGg7IGkgPCBjb3B5Xy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgcGF0aCA9IGJhc2VQYXRoLmNvbmNhdChbaV0pXG5cdFx0XHRwYXRjaGVzLnB1c2goe1xuXHRcdFx0XHRvcDogQURELFxuXHRcdFx0XHRwYXRoLFxuXHRcdFx0XHQvLyBOZWVkIHRvIG1heWJlIGNsb25lIGl0LCBhcyBpdCBjYW4gaW4gZmFjdCBiZSB0aGUgb3JpZ2luYWwgdmFsdWVcblx0XHRcdFx0Ly8gZHVlIHRvIHRoZSBiYXNlL2NvcHkgaW52ZXJzaW9uIGF0IHRoZSBzdGFydCBvZiB0aGlzIGZ1bmN0aW9uXG5cdFx0XHRcdHZhbHVlOiBjbG9uZVBhdGNoVmFsdWVJZk5lZWRlZChjb3B5X1tpXSlcblx0XHRcdH0pXG5cdFx0fVxuXHRcdGZvciAobGV0IGkgPSBjb3B5Xy5sZW5ndGggLSAxOyBiYXNlXy5sZW5ndGggPD0gaTsgLS1pKSB7XG5cdFx0XHRjb25zdCBwYXRoID0gYmFzZVBhdGguY29uY2F0KFtpXSlcblx0XHRcdGludmVyc2VQYXRjaGVzLnB1c2goe1xuXHRcdFx0XHRvcDogUkVNT1ZFLFxuXHRcdFx0XHRwYXRoXG5cdFx0XHR9KVxuXHRcdH1cblx0fVxuXG5cdC8vIFRoaXMgaXMgdXNlZCBmb3IgYm90aCBNYXAgb2JqZWN0cyBhbmQgbm9ybWFsIG9iamVjdHMuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlUGF0Y2hlc0Zyb21Bc3NpZ25lZChcblx0XHRzdGF0ZTogTWFwU3RhdGUgfCBQcm94eU9iamVjdFN0YXRlLFxuXHRcdGJhc2VQYXRoOiBQYXRjaFBhdGgsXG5cdFx0cGF0Y2hlczogUGF0Y2hbXSxcblx0XHRpbnZlcnNlUGF0Y2hlczogUGF0Y2hbXVxuXHQpIHtcblx0XHRjb25zdCB7YmFzZV8sIGNvcHlffSA9IHN0YXRlXG5cdFx0ZWFjaChzdGF0ZS5hc3NpZ25lZF8hLCAoa2V5LCBhc3NpZ25lZFZhbHVlKSA9PiB7XG5cdFx0XHRjb25zdCBvcmlnVmFsdWUgPSBnZXQoYmFzZV8sIGtleSlcblx0XHRcdGNvbnN0IHZhbHVlID0gZ2V0KGNvcHlfISwga2V5KVxuXHRcdFx0Y29uc3Qgb3AgPSAhYXNzaWduZWRWYWx1ZSA/IFJFTU9WRSA6IGhhcyhiYXNlXywga2V5KSA/IFJFUExBQ0UgOiBBRERcblx0XHRcdGlmIChvcmlnVmFsdWUgPT09IHZhbHVlICYmIG9wID09PSBSRVBMQUNFKSByZXR1cm5cblx0XHRcdGNvbnN0IHBhdGggPSBiYXNlUGF0aC5jb25jYXQoa2V5IGFzIGFueSlcblx0XHRcdHBhdGNoZXMucHVzaChvcCA9PT0gUkVNT1ZFID8ge29wLCBwYXRofSA6IHtvcCwgcGF0aCwgdmFsdWV9KVxuXHRcdFx0aW52ZXJzZVBhdGNoZXMucHVzaChcblx0XHRcdFx0b3AgPT09IEFERFxuXHRcdFx0XHRcdD8ge29wOiBSRU1PVkUsIHBhdGh9XG5cdFx0XHRcdFx0OiBvcCA9PT0gUkVNT1ZFXG5cdFx0XHRcdFx0PyB7b3A6IEFERCwgcGF0aCwgdmFsdWU6IGNsb25lUGF0Y2hWYWx1ZUlmTmVlZGVkKG9yaWdWYWx1ZSl9XG5cdFx0XHRcdFx0OiB7b3A6IFJFUExBQ0UsIHBhdGgsIHZhbHVlOiBjbG9uZVBhdGNoVmFsdWVJZk5lZWRlZChvcmlnVmFsdWUpfVxuXHRcdFx0KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZVNldFBhdGNoZXMoXG5cdFx0c3RhdGU6IFNldFN0YXRlLFxuXHRcdGJhc2VQYXRoOiBQYXRjaFBhdGgsXG5cdFx0cGF0Y2hlczogUGF0Y2hbXSxcblx0XHRpbnZlcnNlUGF0Y2hlczogUGF0Y2hbXVxuXHQpIHtcblx0XHRsZXQge2Jhc2VfLCBjb3B5X30gPSBzdGF0ZVxuXG5cdFx0bGV0IGkgPSAwXG5cdFx0YmFzZV8uZm9yRWFjaCgodmFsdWU6IGFueSkgPT4ge1xuXHRcdFx0aWYgKCFjb3B5XyEuaGFzKHZhbHVlKSkge1xuXHRcdFx0XHRjb25zdCBwYXRoID0gYmFzZVBhdGguY29uY2F0KFtpXSlcblx0XHRcdFx0cGF0Y2hlcy5wdXNoKHtcblx0XHRcdFx0XHRvcDogUkVNT1ZFLFxuXHRcdFx0XHRcdHBhdGgsXG5cdFx0XHRcdFx0dmFsdWVcblx0XHRcdFx0fSlcblx0XHRcdFx0aW52ZXJzZVBhdGNoZXMudW5zaGlmdCh7XG5cdFx0XHRcdFx0b3A6IEFERCxcblx0XHRcdFx0XHRwYXRoLFxuXHRcdFx0XHRcdHZhbHVlXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0XHRpKytcblx0XHR9KVxuXHRcdGkgPSAwXG5cdFx0Y29weV8hLmZvckVhY2goKHZhbHVlOiBhbnkpID0+IHtcblx0XHRcdGlmICghYmFzZV8uaGFzKHZhbHVlKSkge1xuXHRcdFx0XHRjb25zdCBwYXRoID0gYmFzZVBhdGguY29uY2F0KFtpXSlcblx0XHRcdFx0cGF0Y2hlcy5wdXNoKHtcblx0XHRcdFx0XHRvcDogQURELFxuXHRcdFx0XHRcdHBhdGgsXG5cdFx0XHRcdFx0dmFsdWVcblx0XHRcdFx0fSlcblx0XHRcdFx0aW52ZXJzZVBhdGNoZXMudW5zaGlmdCh7XG5cdFx0XHRcdFx0b3A6IFJFTU9WRSxcblx0XHRcdFx0XHRwYXRoLFxuXHRcdFx0XHRcdHZhbHVlXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0XHRpKytcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2VuZXJhdGVSZXBsYWNlbWVudFBhdGNoZXNfKFxuXHRcdGJhc2VWYWx1ZTogYW55LFxuXHRcdHJlcGxhY2VtZW50OiBhbnksXG5cdFx0cGF0Y2hlczogUGF0Y2hbXSxcblx0XHRpbnZlcnNlUGF0Y2hlczogUGF0Y2hbXVxuXHQpOiB2b2lkIHtcblx0XHRwYXRjaGVzLnB1c2goe1xuXHRcdFx0b3A6IFJFUExBQ0UsXG5cdFx0XHRwYXRoOiBbXSxcblx0XHRcdHZhbHVlOiByZXBsYWNlbWVudCA9PT0gTk9USElORyA/IHVuZGVmaW5lZCA6IHJlcGxhY2VtZW50XG5cdFx0fSlcblx0XHRpbnZlcnNlUGF0Y2hlcy5wdXNoKHtcblx0XHRcdG9wOiBSRVBMQUNFLFxuXHRcdFx0cGF0aDogW10sXG5cdFx0XHR2YWx1ZTogYmFzZVZhbHVlXG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGFwcGx5UGF0Y2hlc188VD4oZHJhZnQ6IFQsIHBhdGNoZXM6IFBhdGNoW10pOiBUIHtcblx0XHRwYXRjaGVzLmZvckVhY2gocGF0Y2ggPT4ge1xuXHRcdFx0Y29uc3Qge3BhdGgsIG9wfSA9IHBhdGNoXG5cblx0XHRcdGxldCBiYXNlOiBhbnkgPSBkcmFmdFxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykge1xuXHRcdFx0XHRjb25zdCBwYXJlbnRUeXBlID0gZ2V0QXJjaHR5cGUoYmFzZSlcblx0XHRcdFx0bGV0IHAgPSBwYXRoW2ldXG5cdFx0XHRcdGlmICh0eXBlb2YgcCAhPT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgcCAhPT0gXCJudW1iZXJcIikge1xuXHRcdFx0XHRcdHAgPSBcIlwiICsgcFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2VlICM3MzgsIGF2b2lkIHByb3RvdHlwZSBwb2xsdXRpb25cblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdChwYXJlbnRUeXBlID09PSBBcmNoVHlwZS5PYmplY3QgfHwgcGFyZW50VHlwZSA9PT0gQXJjaFR5cGUuQXJyYXkpICYmXG5cdFx0XHRcdFx0KHAgPT09IFwiX19wcm90b19fXCIgfHwgcCA9PT0gXCJjb25zdHJ1Y3RvclwiKVxuXHRcdFx0XHQpXG5cdFx0XHRcdFx0ZGllKGVycm9yT2Zmc2V0ICsgMylcblx0XHRcdFx0aWYgKHR5cGVvZiBiYXNlID09PSBcImZ1bmN0aW9uXCIgJiYgcCA9PT0gXCJwcm90b3R5cGVcIilcblx0XHRcdFx0XHRkaWUoZXJyb3JPZmZzZXQgKyAzKVxuXHRcdFx0XHRiYXNlID0gZ2V0KGJhc2UsIHApXG5cdFx0XHRcdGlmICh0eXBlb2YgYmFzZSAhPT0gXCJvYmplY3RcIikgZGllKGVycm9yT2Zmc2V0ICsgMiwgcGF0aC5qb2luKFwiL1wiKSlcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgdHlwZSA9IGdldEFyY2h0eXBlKGJhc2UpXG5cdFx0XHRjb25zdCB2YWx1ZSA9IGRlZXBDbG9uZVBhdGNoVmFsdWUocGF0Y2gudmFsdWUpIC8vIHVzZWQgdG8gY2xvbmUgcGF0Y2ggdG8gZW5zdXJlIG9yaWdpbmFsIHBhdGNoIGlzIG5vdCBtb2RpZmllZCwgc2VlICM0MTFcblx0XHRcdGNvbnN0IGtleSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXVxuXHRcdFx0c3dpdGNoIChvcCkge1xuXHRcdFx0XHRjYXNlIFJFUExBQ0U6XG5cdFx0XHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdFx0XHRjYXNlIEFyY2hUeXBlLk1hcDpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJhc2Uuc2V0KGtleSwgdmFsdWUpXG5cdFx0XHRcdFx0XHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRcdFx0XHRcdFx0Y2FzZSBBcmNoVHlwZS5TZXQ6XG5cdFx0XHRcdFx0XHRcdGRpZShlcnJvck9mZnNldClcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdC8vIGlmIHZhbHVlIGlzIGFuIG9iamVjdCwgdGhlbiBpdCdzIGFzc2lnbmVkIGJ5IHJlZmVyZW5jZVxuXHRcdFx0XHRcdFx0XHQvLyBpbiB0aGUgZm9sbG93aW5nIGFkZCBvciByZW1vdmUgb3BzLCB0aGUgdmFsdWUgZmllbGQgaW5zaWRlIHRoZSBwYXRjaCB3aWxsIGFsc28gYmUgbW9kaWZ5ZWRcblx0XHRcdFx0XHRcdFx0Ly8gc28gd2UgdXNlIHZhbHVlIGZyb20gdGhlIGNsb25lZCBwYXRjaFxuXHRcdFx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdFx0XHRcdHJldHVybiAoYmFzZVtrZXldID0gdmFsdWUpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRjYXNlIEFERDpcblx0XHRcdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0XHRcdGNhc2UgQXJjaFR5cGUuQXJyYXk6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBrZXkgPT09IFwiLVwiXG5cdFx0XHRcdFx0XHRcdFx0PyBiYXNlLnB1c2godmFsdWUpXG5cdFx0XHRcdFx0XHRcdFx0OiBiYXNlLnNwbGljZShrZXkgYXMgYW55LCAwLCB2YWx1ZSlcblx0XHRcdFx0XHRcdGNhc2UgQXJjaFR5cGUuTWFwOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYmFzZS5zZXQoa2V5LCB2YWx1ZSlcblx0XHRcdFx0XHRcdGNhc2UgQXJjaFR5cGUuU2V0OlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYmFzZS5hZGQodmFsdWUpXG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKGJhc2Vba2V5XSA9IHZhbHVlKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0Y2FzZSBSRU1PVkU6XG5cdFx0XHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdFx0XHRjYXNlIEFyY2hUeXBlLkFycmF5OlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYmFzZS5zcGxpY2Uoa2V5IGFzIGFueSwgMSlcblx0XHRcdFx0XHRcdGNhc2UgQXJjaFR5cGUuTWFwOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYmFzZS5kZWxldGUoa2V5KVxuXHRcdFx0XHRcdFx0Y2FzZSBBcmNoVHlwZS5TZXQ6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBiYXNlLmRlbGV0ZShwYXRjaC52YWx1ZSlcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkZWxldGUgYmFzZVtrZXldXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGRpZShlcnJvck9mZnNldCArIDEsIG9wKVxuXHRcdFx0fVxuXHRcdH0pXG5cblx0XHRyZXR1cm4gZHJhZnRcblx0fVxuXG5cdC8vIG9wdGltaXplOiB0aGlzIGlzIHF1aXRlIGEgcGVyZm9ybWFuY2UgaGl0LCBjYW4gd2UgZGV0ZWN0IGludGVsbGlnZW50bHkgd2hlbiBpdCBpcyBuZWVkZWQ/XG5cdC8vIEUuZy4gYXV0by1kcmFmdCB3aGVuIG5ldyBvYmplY3RzIGZyb20gb3V0c2lkZSBhcmUgYXNzaWduZWQgYW5kIG1vZGlmaWVkP1xuXHQvLyAoU2VlIGZhaWxpbmcgdGVzdCB3aGVuIGRlZXBDbG9uZSBqdXN0IHJldHVybnMgb2JqKVxuXHRmdW5jdGlvbiBkZWVwQ2xvbmVQYXRjaFZhbHVlPFQ+KG9iajogVCk6IFRcblx0ZnVuY3Rpb24gZGVlcENsb25lUGF0Y2hWYWx1ZShvYmo6IGFueSkge1xuXHRcdGlmICghaXNEcmFmdGFibGUob2JqKSkgcmV0dXJuIG9ialxuXHRcdGlmIChBcnJheS5pc0FycmF5KG9iaikpIHJldHVybiBvYmoubWFwKGRlZXBDbG9uZVBhdGNoVmFsdWUpXG5cdFx0aWYgKGlzTWFwKG9iaikpXG5cdFx0XHRyZXR1cm4gbmV3IE1hcChcblx0XHRcdFx0QXJyYXkuZnJvbShvYmouZW50cmllcygpKS5tYXAoKFtrLCB2XSkgPT4gW2ssIGRlZXBDbG9uZVBhdGNoVmFsdWUodildKVxuXHRcdFx0KVxuXHRcdGlmIChpc1NldChvYmopKSByZXR1cm4gbmV3IFNldChBcnJheS5mcm9tKG9iaikubWFwKGRlZXBDbG9uZVBhdGNoVmFsdWUpKVxuXHRcdGNvbnN0IGNsb25lZCA9IE9iamVjdC5jcmVhdGUoZ2V0UHJvdG90eXBlT2Yob2JqKSlcblx0XHRmb3IgKGNvbnN0IGtleSBpbiBvYmopIGNsb25lZFtrZXldID0gZGVlcENsb25lUGF0Y2hWYWx1ZShvYmpba2V5XSlcblx0XHRpZiAoaGFzKG9iaiwgaW1tZXJhYmxlKSkgY2xvbmVkW2ltbWVyYWJsZV0gPSBvYmpbaW1tZXJhYmxlXVxuXHRcdHJldHVybiBjbG9uZWRcblx0fVxuXG5cdGZ1bmN0aW9uIGNsb25lUGF0Y2hWYWx1ZUlmTmVlZGVkPFQ+KG9iajogVCk6IFQge1xuXHRcdGlmIChpc0RyYWZ0KG9iaikpIHtcblx0XHRcdHJldHVybiBkZWVwQ2xvbmVQYXRjaFZhbHVlKG9iailcblx0XHR9IGVsc2UgcmV0dXJuIG9ialxuXHR9XG5cblx0bG9hZFBsdWdpbihcIlBhdGNoZXNcIiwge1xuXHRcdGFwcGx5UGF0Y2hlc18sXG5cdFx0Z2VuZXJhdGVQYXRjaGVzXyxcblx0XHRnZW5lcmF0ZVJlcGxhY2VtZW50UGF0Y2hlc19cblx0fSlcbn1cbiIsICIvLyB0eXBlcyBvbmx5IVxuaW1wb3J0IHtcblx0SW1tZXJTdGF0ZSxcblx0QW55TWFwLFxuXHRBbnlTZXQsXG5cdE1hcFN0YXRlLFxuXHRTZXRTdGF0ZSxcblx0RFJBRlRfU1RBVEUsXG5cdGdldEN1cnJlbnRTY29wZSxcblx0bGF0ZXN0LFxuXHRpc0RyYWZ0YWJsZSxcblx0Y3JlYXRlUHJveHksXG5cdGxvYWRQbHVnaW4sXG5cdG1hcmtDaGFuZ2VkLFxuXHRkaWUsXG5cdEFyY2hUeXBlLFxuXHRlYWNoXG59IGZyb20gXCIuLi9pbnRlcm5hbFwiXG5cbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVNYXBTZXQoKSB7XG5cdGNsYXNzIERyYWZ0TWFwIGV4dGVuZHMgTWFwIHtcblx0XHRbRFJBRlRfU1RBVEVdOiBNYXBTdGF0ZVxuXG5cdFx0Y29uc3RydWN0b3IodGFyZ2V0OiBBbnlNYXAsIHBhcmVudD86IEltbWVyU3RhdGUpIHtcblx0XHRcdHN1cGVyKClcblx0XHRcdHRoaXNbRFJBRlRfU1RBVEVdID0ge1xuXHRcdFx0XHR0eXBlXzogQXJjaFR5cGUuTWFwLFxuXHRcdFx0XHRwYXJlbnRfOiBwYXJlbnQsXG5cdFx0XHRcdHNjb3BlXzogcGFyZW50ID8gcGFyZW50LnNjb3BlXyA6IGdldEN1cnJlbnRTY29wZSgpISxcblx0XHRcdFx0bW9kaWZpZWRfOiBmYWxzZSxcblx0XHRcdFx0ZmluYWxpemVkXzogZmFsc2UsXG5cdFx0XHRcdGNvcHlfOiB1bmRlZmluZWQsXG5cdFx0XHRcdGFzc2lnbmVkXzogdW5kZWZpbmVkLFxuXHRcdFx0XHRiYXNlXzogdGFyZ2V0LFxuXHRcdFx0XHRkcmFmdF86IHRoaXMgYXMgYW55LFxuXHRcdFx0XHRpc01hbnVhbF86IGZhbHNlLFxuXHRcdFx0XHRyZXZva2VkXzogZmFsc2Vcblx0XHRcdH1cblx0XHR9XG5cblx0XHRnZXQgc2l6ZSgpOiBudW1iZXIge1xuXHRcdFx0cmV0dXJuIGxhdGVzdCh0aGlzW0RSQUZUX1NUQVRFXSkuc2l6ZVxuXHRcdH1cblxuXHRcdGhhcyhrZXk6IGFueSk6IGJvb2xlYW4ge1xuXHRcdFx0cmV0dXJuIGxhdGVzdCh0aGlzW0RSQUZUX1NUQVRFXSkuaGFzKGtleSlcblx0XHR9XG5cblx0XHRzZXQoa2V5OiBhbnksIHZhbHVlOiBhbnkpIHtcblx0XHRcdGNvbnN0IHN0YXRlOiBNYXBTdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdXG5cdFx0XHRhc3NlcnRVbnJldm9rZWQoc3RhdGUpXG5cdFx0XHRpZiAoIWxhdGVzdChzdGF0ZSkuaGFzKGtleSkgfHwgbGF0ZXN0KHN0YXRlKS5nZXQoa2V5KSAhPT0gdmFsdWUpIHtcblx0XHRcdFx0cHJlcGFyZU1hcENvcHkoc3RhdGUpXG5cdFx0XHRcdG1hcmtDaGFuZ2VkKHN0YXRlKVxuXHRcdFx0XHRzdGF0ZS5hc3NpZ25lZF8hLnNldChrZXksIHRydWUpXG5cdFx0XHRcdHN0YXRlLmNvcHlfIS5zZXQoa2V5LCB2YWx1ZSlcblx0XHRcdFx0c3RhdGUuYXNzaWduZWRfIS5zZXQoa2V5LCB0cnVlKVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXNcblx0XHR9XG5cblx0XHRkZWxldGUoa2V5OiBhbnkpOiBib29sZWFuIHtcblx0XHRcdGlmICghdGhpcy5oYXMoa2V5KSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc3RhdGU6IE1hcFN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV1cblx0XHRcdGFzc2VydFVucmV2b2tlZChzdGF0ZSlcblx0XHRcdHByZXBhcmVNYXBDb3B5KHN0YXRlKVxuXHRcdFx0bWFya0NoYW5nZWQoc3RhdGUpXG5cdFx0XHRpZiAoc3RhdGUuYmFzZV8uaGFzKGtleSkpIHtcblx0XHRcdFx0c3RhdGUuYXNzaWduZWRfIS5zZXQoa2V5LCBmYWxzZSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN0YXRlLmFzc2lnbmVkXyEuZGVsZXRlKGtleSlcblx0XHRcdH1cblx0XHRcdHN0YXRlLmNvcHlfIS5kZWxldGUoa2V5KVxuXHRcdFx0cmV0dXJuIHRydWVcblx0XHR9XG5cblx0XHRjbGVhcigpIHtcblx0XHRcdGNvbnN0IHN0YXRlOiBNYXBTdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdXG5cdFx0XHRhc3NlcnRVbnJldm9rZWQoc3RhdGUpXG5cdFx0XHRpZiAobGF0ZXN0KHN0YXRlKS5zaXplKSB7XG5cdFx0XHRcdHByZXBhcmVNYXBDb3B5KHN0YXRlKVxuXHRcdFx0XHRtYXJrQ2hhbmdlZChzdGF0ZSlcblx0XHRcdFx0c3RhdGUuYXNzaWduZWRfID0gbmV3IE1hcCgpXG5cdFx0XHRcdGVhY2goc3RhdGUuYmFzZV8sIGtleSA9PiB7XG5cdFx0XHRcdFx0c3RhdGUuYXNzaWduZWRfIS5zZXQoa2V5LCBmYWxzZSlcblx0XHRcdFx0fSlcblx0XHRcdFx0c3RhdGUuY29weV8hLmNsZWFyKClcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmb3JFYWNoKGNiOiAodmFsdWU6IGFueSwga2V5OiBhbnksIHNlbGY6IGFueSkgPT4gdm9pZCwgdGhpc0FyZz86IGFueSkge1xuXHRcdFx0Y29uc3Qgc3RhdGU6IE1hcFN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV1cblx0XHRcdGxhdGVzdChzdGF0ZSkuZm9yRWFjaCgoX3ZhbHVlOiBhbnksIGtleTogYW55LCBfbWFwOiBhbnkpID0+IHtcblx0XHRcdFx0Y2IuY2FsbCh0aGlzQXJnLCB0aGlzLmdldChrZXkpLCBrZXksIHRoaXMpXG5cdFx0XHR9KVxuXHRcdH1cblxuXHRcdGdldChrZXk6IGFueSk6IGFueSB7XG5cdFx0XHRjb25zdCBzdGF0ZTogTWFwU3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXVxuXHRcdFx0YXNzZXJ0VW5yZXZva2VkKHN0YXRlKVxuXHRcdFx0Y29uc3QgdmFsdWUgPSBsYXRlc3Qoc3RhdGUpLmdldChrZXkpXG5cdFx0XHRpZiAoc3RhdGUuZmluYWxpemVkXyB8fCAhaXNEcmFmdGFibGUodmFsdWUpKSB7XG5cdFx0XHRcdHJldHVybiB2YWx1ZVxuXHRcdFx0fVxuXHRcdFx0aWYgKHZhbHVlICE9PSBzdGF0ZS5iYXNlXy5nZXQoa2V5KSkge1xuXHRcdFx0XHRyZXR1cm4gdmFsdWUgLy8gZWl0aGVyIGFscmVhZHkgZHJhZnRlZCBvciByZWFzc2lnbmVkXG5cdFx0XHR9XG5cdFx0XHQvLyBkZXNwaXRlIHdoYXQgaXQgbG9va3MsIHRoaXMgY3JlYXRlcyBhIGRyYWZ0IG9ubHkgb25jZSwgc2VlIGFib3ZlIGNvbmRpdGlvblxuXHRcdFx0Y29uc3QgZHJhZnQgPSBjcmVhdGVQcm94eSh2YWx1ZSwgc3RhdGUpXG5cdFx0XHRwcmVwYXJlTWFwQ29weShzdGF0ZSlcblx0XHRcdHN0YXRlLmNvcHlfIS5zZXQoa2V5LCBkcmFmdClcblx0XHRcdHJldHVybiBkcmFmdFxuXHRcdH1cblxuXHRcdGtleXMoKTogSXRlcmFibGVJdGVyYXRvcjxhbnk+IHtcblx0XHRcdHJldHVybiBsYXRlc3QodGhpc1tEUkFGVF9TVEFURV0pLmtleXMoKVxuXHRcdH1cblxuXHRcdHZhbHVlcygpOiBJdGVyYWJsZUl0ZXJhdG9yPGFueT4ge1xuXHRcdFx0Y29uc3QgaXRlcmF0b3IgPSB0aGlzLmtleXMoKVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0W1N5bWJvbC5pdGVyYXRvcl06ICgpID0+IHRoaXMudmFsdWVzKCksXG5cdFx0XHRcdG5leHQ6ICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCByID0gaXRlcmF0b3IubmV4dCgpXG5cdFx0XHRcdFx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0XHRcdFx0XHRpZiAoci5kb25lKSByZXR1cm4gclxuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gdGhpcy5nZXQoci52YWx1ZSlcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0ZG9uZTogZmFsc2UsXG5cdFx0XHRcdFx0XHR2YWx1ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBhcyBhbnlcblx0XHR9XG5cblx0XHRlbnRyaWVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8W2FueSwgYW55XT4ge1xuXHRcdFx0Y29uc3QgaXRlcmF0b3IgPSB0aGlzLmtleXMoKVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0W1N5bWJvbC5pdGVyYXRvcl06ICgpID0+IHRoaXMuZW50cmllcygpLFxuXHRcdFx0XHRuZXh0OiAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgciA9IGl0ZXJhdG9yLm5leHQoKVxuXHRcdFx0XHRcdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdFx0XHRcdFx0aWYgKHIuZG9uZSkgcmV0dXJuIHJcblx0XHRcdFx0XHRjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0KHIudmFsdWUpXG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdGRvbmU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0dmFsdWU6IFtyLnZhbHVlLCB2YWx1ZV1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gYXMgYW55XG5cdFx0fVxuXG5cdFx0W1N5bWJvbC5pdGVyYXRvcl0oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lbnRyaWVzKClcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBwcm94eU1hcF88VCBleHRlbmRzIEFueU1hcD4odGFyZ2V0OiBULCBwYXJlbnQ/OiBJbW1lclN0YXRlKTogVCB7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHJldHVybiBuZXcgRHJhZnRNYXAodGFyZ2V0LCBwYXJlbnQpXG5cdH1cblxuXHRmdW5jdGlvbiBwcmVwYXJlTWFwQ29weShzdGF0ZTogTWFwU3RhdGUpIHtcblx0XHRpZiAoIXN0YXRlLmNvcHlfKSB7XG5cdFx0XHRzdGF0ZS5hc3NpZ25lZF8gPSBuZXcgTWFwKClcblx0XHRcdHN0YXRlLmNvcHlfID0gbmV3IE1hcChzdGF0ZS5iYXNlXylcblx0XHR9XG5cdH1cblxuXHRjbGFzcyBEcmFmdFNldCBleHRlbmRzIFNldCB7XG5cdFx0W0RSQUZUX1NUQVRFXTogU2V0U3RhdGVcblx0XHRjb25zdHJ1Y3Rvcih0YXJnZXQ6IEFueVNldCwgcGFyZW50PzogSW1tZXJTdGF0ZSkge1xuXHRcdFx0c3VwZXIoKVxuXHRcdFx0dGhpc1tEUkFGVF9TVEFURV0gPSB7XG5cdFx0XHRcdHR5cGVfOiBBcmNoVHlwZS5TZXQsXG5cdFx0XHRcdHBhcmVudF86IHBhcmVudCxcblx0XHRcdFx0c2NvcGVfOiBwYXJlbnQgPyBwYXJlbnQuc2NvcGVfIDogZ2V0Q3VycmVudFNjb3BlKCkhLFxuXHRcdFx0XHRtb2RpZmllZF86IGZhbHNlLFxuXHRcdFx0XHRmaW5hbGl6ZWRfOiBmYWxzZSxcblx0XHRcdFx0Y29weV86IHVuZGVmaW5lZCxcblx0XHRcdFx0YmFzZV86IHRhcmdldCxcblx0XHRcdFx0ZHJhZnRfOiB0aGlzLFxuXHRcdFx0XHRkcmFmdHNfOiBuZXcgTWFwKCksXG5cdFx0XHRcdHJldm9rZWRfOiBmYWxzZSxcblx0XHRcdFx0aXNNYW51YWxfOiBmYWxzZVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGdldCBzaXplKCk6IG51bWJlciB7XG5cdFx0XHRyZXR1cm4gbGF0ZXN0KHRoaXNbRFJBRlRfU1RBVEVdKS5zaXplXG5cdFx0fVxuXG5cdFx0aGFzKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcblx0XHRcdGNvbnN0IHN0YXRlOiBTZXRTdGF0ZSA9IHRoaXNbRFJBRlRfU1RBVEVdXG5cdFx0XHRhc3NlcnRVbnJldm9rZWQoc3RhdGUpXG5cdFx0XHQvLyBiaXQgb2YgdHJpY2tlcnkgaGVyZSwgdG8gYmUgYWJsZSB0byByZWNvZ25pemUgYm90aCB0aGUgdmFsdWUsIGFuZCB0aGUgZHJhZnQgb2YgaXRzIHZhbHVlXG5cdFx0XHRpZiAoIXN0YXRlLmNvcHlfKSB7XG5cdFx0XHRcdHJldHVybiBzdGF0ZS5iYXNlXy5oYXModmFsdWUpXG5cdFx0XHR9XG5cdFx0XHRpZiAoc3RhdGUuY29weV8uaGFzKHZhbHVlKSkgcmV0dXJuIHRydWVcblx0XHRcdGlmIChzdGF0ZS5kcmFmdHNfLmhhcyh2YWx1ZSkgJiYgc3RhdGUuY29weV8uaGFzKHN0YXRlLmRyYWZ0c18uZ2V0KHZhbHVlKSkpXG5cdFx0XHRcdHJldHVybiB0cnVlXG5cdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHR9XG5cblx0XHRhZGQodmFsdWU6IGFueSk6IGFueSB7XG5cdFx0XHRjb25zdCBzdGF0ZTogU2V0U3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXVxuXHRcdFx0YXNzZXJ0VW5yZXZva2VkKHN0YXRlKVxuXHRcdFx0aWYgKCF0aGlzLmhhcyh2YWx1ZSkpIHtcblx0XHRcdFx0cHJlcGFyZVNldENvcHkoc3RhdGUpXG5cdFx0XHRcdG1hcmtDaGFuZ2VkKHN0YXRlKVxuXHRcdFx0XHRzdGF0ZS5jb3B5XyEuYWRkKHZhbHVlKVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXNcblx0XHR9XG5cblx0XHRkZWxldGUodmFsdWU6IGFueSk6IGFueSB7XG5cdFx0XHRpZiAoIXRoaXMuaGFzKHZhbHVlKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc3RhdGU6IFNldFN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV1cblx0XHRcdGFzc2VydFVucmV2b2tlZChzdGF0ZSlcblx0XHRcdHByZXBhcmVTZXRDb3B5KHN0YXRlKVxuXHRcdFx0bWFya0NoYW5nZWQoc3RhdGUpXG5cdFx0XHRyZXR1cm4gKFxuXHRcdFx0XHRzdGF0ZS5jb3B5XyEuZGVsZXRlKHZhbHVlKSB8fFxuXHRcdFx0XHQoc3RhdGUuZHJhZnRzXy5oYXModmFsdWUpXG5cdFx0XHRcdFx0PyBzdGF0ZS5jb3B5XyEuZGVsZXRlKHN0YXRlLmRyYWZ0c18uZ2V0KHZhbHVlKSlcblx0XHRcdFx0XHQ6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZhbHNlKVxuXHRcdFx0KVxuXHRcdH1cblxuXHRcdGNsZWFyKCkge1xuXHRcdFx0Y29uc3Qgc3RhdGU6IFNldFN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV1cblx0XHRcdGFzc2VydFVucmV2b2tlZChzdGF0ZSlcblx0XHRcdGlmIChsYXRlc3Qoc3RhdGUpLnNpemUpIHtcblx0XHRcdFx0cHJlcGFyZVNldENvcHkoc3RhdGUpXG5cdFx0XHRcdG1hcmtDaGFuZ2VkKHN0YXRlKVxuXHRcdFx0XHRzdGF0ZS5jb3B5XyEuY2xlYXIoKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZhbHVlcygpOiBJdGVyYWJsZUl0ZXJhdG9yPGFueT4ge1xuXHRcdFx0Y29uc3Qgc3RhdGU6IFNldFN0YXRlID0gdGhpc1tEUkFGVF9TVEFURV1cblx0XHRcdGFzc2VydFVucmV2b2tlZChzdGF0ZSlcblx0XHRcdHByZXBhcmVTZXRDb3B5KHN0YXRlKVxuXHRcdFx0cmV0dXJuIHN0YXRlLmNvcHlfIS52YWx1ZXMoKVxuXHRcdH1cblxuXHRcdGVudHJpZXMoKTogSXRlcmFibGVJdGVyYXRvcjxbYW55LCBhbnldPiB7XG5cdFx0XHRjb25zdCBzdGF0ZTogU2V0U3RhdGUgPSB0aGlzW0RSQUZUX1NUQVRFXVxuXHRcdFx0YXNzZXJ0VW5yZXZva2VkKHN0YXRlKVxuXHRcdFx0cHJlcGFyZVNldENvcHkoc3RhdGUpXG5cdFx0XHRyZXR1cm4gc3RhdGUuY29weV8hLmVudHJpZXMoKVxuXHRcdH1cblxuXHRcdGtleXMoKTogSXRlcmFibGVJdGVyYXRvcjxhbnk+IHtcblx0XHRcdHJldHVybiB0aGlzLnZhbHVlcygpXG5cdFx0fVxuXG5cdFx0W1N5bWJvbC5pdGVyYXRvcl0oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy52YWx1ZXMoKVxuXHRcdH1cblxuXHRcdGZvckVhY2goY2I6IGFueSwgdGhpc0FyZz86IGFueSkge1xuXHRcdFx0Y29uc3QgaXRlcmF0b3IgPSB0aGlzLnZhbHVlcygpXG5cdFx0XHRsZXQgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpXG5cdFx0XHR3aGlsZSAoIXJlc3VsdC5kb25lKSB7XG5cdFx0XHRcdGNiLmNhbGwodGhpc0FyZywgcmVzdWx0LnZhbHVlLCByZXN1bHQudmFsdWUsIHRoaXMpXG5cdFx0XHRcdHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRmdW5jdGlvbiBwcm94eVNldF88VCBleHRlbmRzIEFueVNldD4odGFyZ2V0OiBULCBwYXJlbnQ/OiBJbW1lclN0YXRlKTogVCB7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHJldHVybiBuZXcgRHJhZnRTZXQodGFyZ2V0LCBwYXJlbnQpXG5cdH1cblxuXHRmdW5jdGlvbiBwcmVwYXJlU2V0Q29weShzdGF0ZTogU2V0U3RhdGUpIHtcblx0XHRpZiAoIXN0YXRlLmNvcHlfKSB7XG5cdFx0XHQvLyBjcmVhdGUgZHJhZnRzIGZvciBhbGwgZW50cmllcyB0byBwcmVzZXJ2ZSBpbnNlcnRpb24gb3JkZXJcblx0XHRcdHN0YXRlLmNvcHlfID0gbmV3IFNldCgpXG5cdFx0XHRzdGF0ZS5iYXNlXy5mb3JFYWNoKHZhbHVlID0+IHtcblx0XHRcdFx0aWYgKGlzRHJhZnRhYmxlKHZhbHVlKSkge1xuXHRcdFx0XHRcdGNvbnN0IGRyYWZ0ID0gY3JlYXRlUHJveHkodmFsdWUsIHN0YXRlKVxuXHRcdFx0XHRcdHN0YXRlLmRyYWZ0c18uc2V0KHZhbHVlLCBkcmFmdClcblx0XHRcdFx0XHRzdGF0ZS5jb3B5XyEuYWRkKGRyYWZ0KVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0YXRlLmNvcHlfIS5hZGQodmFsdWUpXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gYXNzZXJ0VW5yZXZva2VkKHN0YXRlOiBhbnkgLypFUzVTdGF0ZSB8IE1hcFN0YXRlIHwgU2V0U3RhdGUqLykge1xuXHRcdGlmIChzdGF0ZS5yZXZva2VkXykgZGllKDMsIEpTT04uc3RyaW5naWZ5KGxhdGVzdChzdGF0ZSkpKVxuXHR9XG5cblx0bG9hZFBsdWdpbihcIk1hcFNldFwiLCB7cHJveHlNYXBfLCBwcm94eVNldF99KVxufVxuIiwgImltcG9ydCB7XG5cdElQcm9kdWNlLFxuXHRJUHJvZHVjZVdpdGhQYXRjaGVzLFxuXHRJbW1lcixcblx0RHJhZnQsXG5cdEltbXV0YWJsZVxufSBmcm9tIFwiLi9pbnRlcm5hbFwiXG5cbmV4cG9ydCB7XG5cdERyYWZ0LFxuXHRJbW11dGFibGUsXG5cdFBhdGNoLFxuXHRQYXRjaExpc3RlbmVyLFxuXHRvcmlnaW5hbCxcblx0Y3VycmVudCxcblx0aXNEcmFmdCxcblx0aXNEcmFmdGFibGUsXG5cdE5PVEhJTkcgYXMgbm90aGluZyxcblx0RFJBRlRBQkxFIGFzIGltbWVyYWJsZSxcblx0ZnJlZXplLFxuXHRPYmplY3Rpc2hcbn0gZnJvbSBcIi4vaW50ZXJuYWxcIlxuXG5jb25zdCBpbW1lciA9IG5ldyBJbW1lcigpXG5cbi8qKlxuICogVGhlIGBwcm9kdWNlYCBmdW5jdGlvbiB0YWtlcyBhIHZhbHVlIGFuZCBhIFwicmVjaXBlIGZ1bmN0aW9uXCIgKHdob3NlXG4gKiByZXR1cm4gdmFsdWUgb2Z0ZW4gZGVwZW5kcyBvbiB0aGUgYmFzZSBzdGF0ZSkuIFRoZSByZWNpcGUgZnVuY3Rpb24gaXNcbiAqIGZyZWUgdG8gbXV0YXRlIGl0cyBmaXJzdCBhcmd1bWVudCBob3dldmVyIGl0IHdhbnRzLiBBbGwgbXV0YXRpb25zIGFyZVxuICogb25seSBldmVyIGFwcGxpZWQgdG8gYSBfX2NvcHlfXyBvZiB0aGUgYmFzZSBzdGF0ZS5cbiAqXG4gKiBQYXNzIG9ubHkgYSBmdW5jdGlvbiB0byBjcmVhdGUgYSBcImN1cnJpZWQgcHJvZHVjZXJcIiB3aGljaCByZWxpZXZlcyB5b3VcbiAqIGZyb20gcGFzc2luZyB0aGUgcmVjaXBlIGZ1bmN0aW9uIGV2ZXJ5IHRpbWUuXG4gKlxuICogT25seSBwbGFpbiBvYmplY3RzIGFuZCBhcnJheXMgYXJlIG1hZGUgbXV0YWJsZS4gQWxsIG90aGVyIG9iamVjdHMgYXJlXG4gKiBjb25zaWRlcmVkIHVuY29weWFibGUuXG4gKlxuICogTm90ZTogVGhpcyBmdW5jdGlvbiBpcyBfX2JvdW5kX18gdG8gaXRzIGBJbW1lcmAgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHthbnl9IGJhc2UgLSB0aGUgaW5pdGlhbCBzdGF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvZHVjZXIgLSBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgcHJveHkgb2YgdGhlIGJhc2Ugc3RhdGUgYXMgZmlyc3QgYXJndW1lbnQgYW5kIHdoaWNoIGNhbiBiZSBmcmVlbHkgbW9kaWZpZWRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBhdGNoTGlzdGVuZXIgLSBvcHRpb25hbCBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdpdGggYWxsIHRoZSBwYXRjaGVzIHByb2R1Y2VkIGhlcmVcbiAqIEByZXR1cm5zIHthbnl9IGEgbmV3IHN0YXRlLCBvciB0aGUgaW5pdGlhbCBzdGF0ZSBpZiBub3RoaW5nIHdhcyBtb2RpZmllZFxuICovXG5leHBvcnQgY29uc3QgcHJvZHVjZTogSVByb2R1Y2UgPSBpbW1lci5wcm9kdWNlXG5cbi8qKlxuICogTGlrZSBgcHJvZHVjZWAsIGJ1dCBgcHJvZHVjZVdpdGhQYXRjaGVzYCBhbHdheXMgcmV0dXJucyBhIHR1cGxlXG4gKiBbbmV4dFN0YXRlLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlc10gKGluc3RlYWQgb2YganVzdCB0aGUgbmV4dCBzdGF0ZSlcbiAqL1xuZXhwb3J0IGNvbnN0IHByb2R1Y2VXaXRoUGF0Y2hlczogSVByb2R1Y2VXaXRoUGF0Y2hlcyA9IGltbWVyLnByb2R1Y2VXaXRoUGF0Y2hlcy5iaW5kKFxuXHRpbW1lclxuKVxuXG4vKipcbiAqIFBhc3MgdHJ1ZSB0byBhdXRvbWF0aWNhbGx5IGZyZWV6ZSBhbGwgY29waWVzIGNyZWF0ZWQgYnkgSW1tZXIuXG4gKlxuICogQWx3YXlzIGZyZWV6ZSBieSBkZWZhdWx0LCBldmVuIGluIHByb2R1Y3Rpb24gbW9kZVxuICovXG5leHBvcnQgY29uc3Qgc2V0QXV0b0ZyZWV6ZSA9IGltbWVyLnNldEF1dG9GcmVlemUuYmluZChpbW1lcilcblxuLyoqXG4gKiBQYXNzIHRydWUgdG8gZW5hYmxlIHN0cmljdCBzaGFsbG93IGNvcHkuXG4gKlxuICogQnkgZGVmYXVsdCwgaW1tZXIgZG9lcyBub3QgY29weSB0aGUgb2JqZWN0IGRlc2NyaXB0b3JzIHN1Y2ggYXMgZ2V0dGVyLCBzZXR0ZXIgYW5kIG5vbi1lbnVtcmFibGUgcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IGNvbnN0IHNldFVzZVN0cmljdFNoYWxsb3dDb3B5ID0gaW1tZXIuc2V0VXNlU3RyaWN0U2hhbGxvd0NvcHkuYmluZChpbW1lcilcblxuLyoqXG4gKiBBcHBseSBhbiBhcnJheSBvZiBJbW1lciBwYXRjaGVzIHRvIHRoZSBmaXJzdCBhcmd1bWVudC5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGEgcHJvZHVjZXIsIHdoaWNoIG1lYW5zIGNvcHktb24td3JpdGUgaXMgaW4gZWZmZWN0LlxuICovXG5leHBvcnQgY29uc3QgYXBwbHlQYXRjaGVzID0gaW1tZXIuYXBwbHlQYXRjaGVzLmJpbmQoaW1tZXIpXG5cbi8qKlxuICogQ3JlYXRlIGFuIEltbWVyIGRyYWZ0IGZyb20gdGhlIGdpdmVuIGJhc2Ugc3RhdGUsIHdoaWNoIG1heSBiZSBhIGRyYWZ0IGl0c2VsZi5cbiAqIFRoZSBkcmFmdCBjYW4gYmUgbW9kaWZpZWQgdW50aWwgeW91IGZpbmFsaXplIGl0IHdpdGggdGhlIGBmaW5pc2hEcmFmdGAgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVEcmFmdCA9IGltbWVyLmNyZWF0ZURyYWZ0LmJpbmQoaW1tZXIpXG5cbi8qKlxuICogRmluYWxpemUgYW4gSW1tZXIgZHJhZnQgZnJvbSBhIGBjcmVhdGVEcmFmdGAgY2FsbCwgcmV0dXJuaW5nIHRoZSBiYXNlIHN0YXRlXG4gKiAoaWYgbm8gY2hhbmdlcyB3ZXJlIG1hZGUpIG9yIGEgbW9kaWZpZWQgY29weS4gVGhlIGRyYWZ0IG11c3QgKm5vdCogYmVcbiAqIG11dGF0ZWQgYWZ0ZXJ3YXJkcy5cbiAqXG4gKiBQYXNzIGEgZnVuY3Rpb24gYXMgdGhlIDJuZCBhcmd1bWVudCB0byBnZW5lcmF0ZSBJbW1lciBwYXRjaGVzIGJhc2VkIG9uIHRoZVxuICogY2hhbmdlcyB0aGF0IHdlcmUgbWFkZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGZpbmlzaERyYWZ0ID0gaW1tZXIuZmluaXNoRHJhZnQuYmluZChpbW1lcilcblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGFjdHVhbGx5IGEgbm8tb3AsIGJ1dCBjYW4gYmUgdXNlZCB0byBjYXN0IGFuIGltbXV0YWJsZSB0eXBlXG4gKiB0byBhbiBkcmFmdCB0eXBlIGFuZCBtYWtlIFR5cGVTY3JpcHQgaGFwcHlcbiAqXG4gKiBAcGFyYW0gdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhc3REcmFmdDxUPih2YWx1ZTogVCk6IERyYWZ0PFQ+IHtcblx0cmV0dXJuIHZhbHVlIGFzIGFueVxufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaXMgYWN0dWFsbHkgYSBuby1vcCwgYnV0IGNhbiBiZSB1c2VkIHRvIGNhc3QgYSBtdXRhYmxlIHR5cGVcbiAqIHRvIGFuIGltbXV0YWJsZSB0eXBlIGFuZCBtYWtlIFR5cGVTY3JpcHQgaGFwcHlcbiAqIEBwYXJhbSB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FzdEltbXV0YWJsZTxUPih2YWx1ZTogVCk6IEltbXV0YWJsZTxUPiB7XG5cdHJldHVybiB2YWx1ZSBhcyBhbnlcbn1cblxuZXhwb3J0IHtJbW1lcn1cblxuZXhwb3J0IHtlbmFibGVQYXRjaGVzfSBmcm9tIFwiLi9wbHVnaW5zL3BhdGNoZXNcIlxuZXhwb3J0IHtlbmFibGVNYXBTZXR9IGZyb20gXCIuL3BsdWdpbnMvbWFwc2V0XCJcbiIsICJpbXBvcnQgeyBPcGVyYXRpb24sIFBhdGggfSBmcm9tICcuLidcblxuLyoqXG4gKiBgUGF0aFJlZmAgb2JqZWN0cyBrZWVwIGEgc3BlY2lmaWMgcGF0aCBpbiBhIGRvY3VtZW50IHN5bmNlZCBvdmVyIHRpbWUgYXMgbmV3XG4gKiBvcGVyYXRpb25zIGFyZSBhcHBsaWVkIHRvIHRoZSBlZGl0b3IuIFlvdSBjYW4gYWNjZXNzIHRoZWlyIGBjdXJyZW50YCBwcm9wZXJ0eVxuICogYXQgYW55IHRpbWUgZm9yIHRoZSB1cC10by1kYXRlIHBhdGggdmFsdWUuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBQYXRoUmVmIHtcbiAgY3VycmVudDogUGF0aCB8IG51bGxcbiAgYWZmaW5pdHk6ICdmb3J3YXJkJyB8ICdiYWNrd2FyZCcgfCBudWxsXG4gIHVucmVmKCk6IFBhdGggfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aFJlZkludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gdGhlIHBhdGggcmVmJ3MgY3VycmVudCB2YWx1ZSBieSBhbiBvcGVyYXRpb24uXG4gICAqL1xuICB0cmFuc2Zvcm06IChyZWY6IFBhdGhSZWYsIG9wOiBPcGVyYXRpb24pID0+IHZvaWRcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFBhdGhSZWY6IFBhdGhSZWZJbnRlcmZhY2UgPSB7XG4gIHRyYW5zZm9ybShyZWY6IFBhdGhSZWYsIG9wOiBPcGVyYXRpb24pOiB2b2lkIHtcbiAgICBjb25zdCB7IGN1cnJlbnQsIGFmZmluaXR5IH0gPSByZWZcblxuICAgIGlmIChjdXJyZW50ID09IG51bGwpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHBhdGggPSBQYXRoLnRyYW5zZm9ybShjdXJyZW50LCBvcCwgeyBhZmZpbml0eSB9KVxuICAgIHJlZi5jdXJyZW50ID0gcGF0aFxuXG4gICAgaWYgKHBhdGggPT0gbnVsbCkge1xuICAgICAgcmVmLnVucmVmKClcbiAgICB9XG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgT3BlcmF0aW9uLCBQb2ludCB9IGZyb20gJy4uJ1xuaW1wb3J0IHsgVGV4dERpcmVjdGlvbiB9IGZyb20gJy4uL3R5cGVzL3R5cGVzJ1xuXG4vKipcbiAqIGBQb2ludFJlZmAgb2JqZWN0cyBrZWVwIGEgc3BlY2lmaWMgcG9pbnQgaW4gYSBkb2N1bWVudCBzeW5jZWQgb3ZlciB0aW1lIGFzIG5ld1xuICogb3BlcmF0aW9ucyBhcmUgYXBwbGllZCB0byB0aGUgZWRpdG9yLiBZb3UgY2FuIGFjY2VzcyB0aGVpciBgY3VycmVudGAgcHJvcGVydHlcbiAqIGF0IGFueSB0aW1lIGZvciB0aGUgdXAtdG8tZGF0ZSBwb2ludCB2YWx1ZS5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFBvaW50UmVmIHtcbiAgY3VycmVudDogUG9pbnQgfCBudWxsXG4gIGFmZmluaXR5OiBUZXh0RGlyZWN0aW9uIHwgbnVsbFxuICB1bnJlZigpOiBQb2ludCB8IG51bGxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb2ludFJlZkludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gdGhlIHBvaW50IHJlZidzIGN1cnJlbnQgdmFsdWUgYnkgYW4gb3BlcmF0aW9uLlxuICAgKi9cbiAgdHJhbnNmb3JtOiAocmVmOiBQb2ludFJlZiwgb3A6IE9wZXJhdGlvbikgPT4gdm9pZFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgUG9pbnRSZWY6IFBvaW50UmVmSW50ZXJmYWNlID0ge1xuICB0cmFuc2Zvcm0ocmVmOiBQb2ludFJlZiwgb3A6IE9wZXJhdGlvbik6IHZvaWQge1xuICAgIGNvbnN0IHsgY3VycmVudCwgYWZmaW5pdHkgfSA9IHJlZlxuXG4gICAgaWYgKGN1cnJlbnQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcG9pbnQgPSBQb2ludC50cmFuc2Zvcm0oY3VycmVudCwgb3AsIHsgYWZmaW5pdHkgfSlcbiAgICByZWYuY3VycmVudCA9IHBvaW50XG5cbiAgICBpZiAocG9pbnQgPT0gbnVsbCkge1xuICAgICAgcmVmLnVucmVmKClcbiAgICB9XG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgT3BlcmF0aW9uLCBSYW5nZSB9IGZyb20gJy4uJ1xuXG4vKipcbiAqIGBSYW5nZVJlZmAgb2JqZWN0cyBrZWVwIGEgc3BlY2lmaWMgcmFuZ2UgaW4gYSBkb2N1bWVudCBzeW5jZWQgb3ZlciB0aW1lIGFzIG5ld1xuICogb3BlcmF0aW9ucyBhcmUgYXBwbGllZCB0byB0aGUgZWRpdG9yLiBZb3UgY2FuIGFjY2VzcyB0aGVpciBgY3VycmVudGAgcHJvcGVydHlcbiAqIGF0IGFueSB0aW1lIGZvciB0aGUgdXAtdG8tZGF0ZSByYW5nZSB2YWx1ZS5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFJhbmdlUmVmIHtcbiAgY3VycmVudDogUmFuZ2UgfCBudWxsXG4gIGFmZmluaXR5OiAnZm9yd2FyZCcgfCAnYmFja3dhcmQnIHwgJ291dHdhcmQnIHwgJ2lud2FyZCcgfCBudWxsXG4gIHVucmVmKCk6IFJhbmdlIHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhbmdlUmVmSW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIFRyYW5zZm9ybSB0aGUgcmFuZ2UgcmVmJ3MgY3VycmVudCB2YWx1ZSBieSBhbiBvcGVyYXRpb24uXG4gICAqL1xuICB0cmFuc2Zvcm06IChyZWY6IFJhbmdlUmVmLCBvcDogT3BlcmF0aW9uKSA9PiB2b2lkXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBSYW5nZVJlZjogUmFuZ2VSZWZJbnRlcmZhY2UgPSB7XG4gIHRyYW5zZm9ybShyZWY6IFJhbmdlUmVmLCBvcDogT3BlcmF0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgeyBjdXJyZW50LCBhZmZpbml0eSB9ID0gcmVmXG5cbiAgICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBwYXRoID0gUmFuZ2UudHJhbnNmb3JtKGN1cnJlbnQsIG9wLCB7IGFmZmluaXR5IH0pXG4gICAgcmVmLmN1cnJlbnQgPSBwYXRoXG5cbiAgICBpZiAocGF0aCA9PSBudWxsKSB7XG4gICAgICByZWYudW5yZWYoKVxuICAgIH1cbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIFBhdGgsIFBhdGhSZWYsIFBvaW50UmVmLCBSYW5nZVJlZiB9IGZyb20gJy4uJ1xuXG5leHBvcnQgY29uc3QgRElSVFlfUEFUSFM6IFdlYWtNYXA8RWRpdG9yLCBQYXRoW10+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IERJUlRZX1BBVEhfS0VZUzogV2Vha01hcDxFZGl0b3IsIFNldDxzdHJpbmc+PiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBGTFVTSElORzogV2Vha01hcDxFZGl0b3IsIGJvb2xlYW4+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IE5PUk1BTElaSU5HOiBXZWFrTWFwPEVkaXRvciwgYm9vbGVhbj4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgUEFUSF9SRUZTOiBXZWFrTWFwPEVkaXRvciwgU2V0PFBhdGhSZWY+PiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBQT0lOVF9SRUZTOiBXZWFrTWFwPEVkaXRvciwgU2V0PFBvaW50UmVmPj4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgUkFOR0VfUkVGUzogV2Vha01hcDxFZGl0b3IsIFNldDxSYW5nZVJlZj4+ID0gbmV3IFdlYWtNYXAoKVxuIiwgImltcG9ydCB7XG4gIEluc2VydE5vZGVPcGVyYXRpb24sXG4gIE1lcmdlTm9kZU9wZXJhdGlvbixcbiAgTW92ZU5vZGVPcGVyYXRpb24sXG4gIE9wZXJhdGlvbixcbiAgUmVtb3ZlTm9kZU9wZXJhdGlvbixcbiAgU3BsaXROb2RlT3BlcmF0aW9uLFxufSBmcm9tICcuLidcbmltcG9ydCB7IFRleHREaXJlY3Rpb24gfSBmcm9tICcuLi90eXBlcy90eXBlcydcblxuLyoqXG4gKiBgUGF0aGAgYXJyYXlzIGFyZSBhIGxpc3Qgb2YgaW5kZXhlcyB0aGF0IGRlc2NyaWJlIGEgbm9kZSdzIGV4YWN0IHBvc2l0aW9uIGluXG4gKiBhIFNsYXRlIG5vZGUgdHJlZS4gQWx0aG91Z2ggdGhleSBhcmUgdXN1YWxseSByZWxhdGl2ZSB0byB0aGUgcm9vdCBgRWRpdG9yYFxuICogb2JqZWN0LCB0aGV5IGNhbiBiZSByZWxhdGl2ZSB0byBhbnkgYE5vZGVgIG9iamVjdC5cbiAqL1xuXG5leHBvcnQgdHlwZSBQYXRoID0gbnVtYmVyW11cblxuZXhwb3J0IGludGVyZmFjZSBQYXRoQW5jZXN0b3JzT3B0aW9ucyB7XG4gIHJldmVyc2U/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aExldmVsc09wdGlvbnMge1xuICByZXZlcnNlPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhdGhUcmFuc2Zvcm1PcHRpb25zIHtcbiAgYWZmaW5pdHk/OiBUZXh0RGlyZWN0aW9uIHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhdGhJbnRlcmZhY2Uge1xuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBhbmNlc3RvciBwYXRocyBmb3IgYSBnaXZlbiBwYXRoLlxuICAgKlxuICAgKiBUaGUgcGF0aHMgYXJlIHNvcnRlZCBmcm9tIHNoYWxsb3dlc3QgdG8gZGVlcGVzdCBhbmNlc3Rvci4gSG93ZXZlciwgaWYgdGhlXG4gICAqIGByZXZlcnNlOiB0cnVlYCBvcHRpb24gaXMgcGFzc2VkLCB0aGV5IGFyZSByZXZlcnNlZC5cbiAgICovXG4gIGFuY2VzdG9yczogKHBhdGg6IFBhdGgsIG9wdGlvbnM/OiBQYXRoQW5jZXN0b3JzT3B0aW9ucykgPT4gUGF0aFtdXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29tbW9uIGFuY2VzdG9yIHBhdGggb2YgdHdvIHBhdGhzLlxuICAgKi9cbiAgY29tbW9uOiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gUGF0aFxuXG4gIC8qKlxuICAgKiBDb21wYXJlIGEgcGF0aCB0byBhbm90aGVyLCByZXR1cm5pbmcgYW4gaW50ZWdlciBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHBhdGhcbiAgICogd2FzIGJlZm9yZSwgYXQsIG9yIGFmdGVyIHRoZSBvdGhlci5cbiAgICpcbiAgICogTm90ZTogVHdvIHBhdGhzIG9mIHVuZXF1YWwgbGVuZ3RoIGNhbiBzdGlsbCByZWNlaXZlIGEgYDBgIHJlc3VsdCBpZiBvbmUgaXNcbiAgICogZGlyZWN0bHkgYWJvdmUgb3IgYmVsb3cgdGhlIG90aGVyLiBJZiB5b3Ugd2FudCBleGFjdCBtYXRjaGluZywgdXNlXG4gICAqIFtbUGF0aC5lcXVhbHNdXSBpbnN0ZWFkLlxuICAgKi9cbiAgY29tcGFyZTogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IC0xIHwgMCB8IDFcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGVuZHMgYWZ0ZXIgb25lIG9mIHRoZSBpbmRleGVzIGluIGFub3RoZXIuXG4gICAqL1xuICBlbmRzQWZ0ZXI6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBlbmRzIGF0IG9uZSBvZiB0aGUgaW5kZXhlcyBpbiBhbm90aGVyLlxuICAgKi9cbiAgZW5kc0F0OiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggZW5kcyBiZWZvcmUgb25lIG9mIHRoZSBpbmRleGVzIGluIGFub3RoZXIuXG4gICAqL1xuICBlbmRzQmVmb3JlOiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggaXMgZXhhY3RseSBlcXVhbCB0byBhbm90aGVyLlxuICAgKi9cbiAgZXF1YWxzOiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgcGF0aCBvZiBwcmV2aW91cyBzaWJsaW5nIG5vZGUgZXhpc3RzXG4gICAqL1xuICBoYXNQcmV2aW91czogKHBhdGg6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGlzIGFmdGVyIGFub3RoZXIuXG4gICAqL1xuICBpc0FmdGVyOiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggaXMgYW4gYW5jZXN0b3Igb2YgYW5vdGhlci5cbiAgICovXG4gIGlzQW5jZXN0b3I6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcGF0aCBpcyBiZWZvcmUgYW5vdGhlci5cbiAgICovXG4gIGlzQmVmb3JlOiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggaXMgYSBjaGlsZCBvZiBhbm90aGVyLlxuICAgKi9cbiAgaXNDaGlsZDogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGlzIGVxdWFsIHRvIG9yIGFuIGFuY2VzdG9yIG9mIGFub3RoZXIuXG4gICAqL1xuICBpc0NvbW1vbjogKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGlzIGEgZGVzY2VuZGFudCBvZiBhbm90aGVyLlxuICAgKi9cbiAgaXNEZXNjZW5kYW50OiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBhdGggaXMgdGhlIHBhcmVudCBvZiBhbm90aGVyLlxuICAgKi9cbiAgaXNQYXJlbnQ6IChwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlzIGEgdmFsdWUgaW1wbGVtZW50cyB0aGUgYFBhdGhgIGludGVyZmFjZS5cbiAgICovXG4gIGlzUGF0aDogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIFBhdGhcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwYXRoIGlzIGEgc2libGluZyBvZiBhbm90aGVyLlxuICAgKi9cbiAgaXNTaWJsaW5nOiAocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIHBhdGhzIGF0IGV2ZXJ5IGxldmVsIGRvd24gdG8gYSBwYXRoLiBOb3RlOiB0aGlzIGlzIHRoZSBzYW1lXG4gICAqIGFzIGBQYXRoLmFuY2VzdG9yc2AsIGJ1dCBpbmNsdWRpbmcgdGhlIHBhdGggaXRzZWxmLlxuICAgKlxuICAgKiBUaGUgcGF0aHMgYXJlIHNvcnRlZCBmcm9tIHNoYWxsb3dlc3QgdG8gZGVlcGVzdC4gSG93ZXZlciwgaWYgdGhlIGByZXZlcnNlOlxuICAgKiB0cnVlYCBvcHRpb24gaXMgcGFzc2VkLCB0aGV5IGFyZSByZXZlcnNlZC5cbiAgICovXG4gIGxldmVsczogKHBhdGg6IFBhdGgsIG9wdGlvbnM/OiBQYXRoTGV2ZWxzT3B0aW9ucykgPT4gUGF0aFtdXG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgcGF0aCwgZ2V0IHRoZSBwYXRoIHRvIHRoZSBuZXh0IHNpYmxpbmcgbm9kZS5cbiAgICovXG4gIG5leHQ6IChwYXRoOiBQYXRoKSA9PiBQYXRoXG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGlzIG9wZXJhdGlvbiBjYW4gYWZmZWN0IHBhdGhzIG9yIG5vdC4gVXNlZCBhcyBhblxuICAgKiBvcHRpbWl6YXRpb24gd2hlbiB1cGRhdGluZyBkaXJ0eSBwYXRocyBkdXJpbmcgbm9ybWFsaXphdGlvblxuICAgKlxuICAgKiBOT1RFOiBUaGlzICptdXN0KiBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgaW1wbGVtZW50YXRpb24gb2YgJ3RyYW5zZm9ybSdcbiAgICogYmVsb3dcbiAgICovXG4gIG9wZXJhdGlvbkNhblRyYW5zZm9ybVBhdGg6IChcbiAgICBvcGVyYXRpb246IE9wZXJhdGlvblxuICApID0+IG9wZXJhdGlvbiBpc1xuICAgIHwgSW5zZXJ0Tm9kZU9wZXJhdGlvblxuICAgIHwgUmVtb3ZlTm9kZU9wZXJhdGlvblxuICAgIHwgTWVyZ2VOb2RlT3BlcmF0aW9uXG4gICAgfCBTcGxpdE5vZGVPcGVyYXRpb25cbiAgICB8IE1vdmVOb2RlT3BlcmF0aW9uXG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgcGF0aCwgcmV0dXJuIGEgbmV3IHBhdGggcmVmZXJyaW5nIHRvIHRoZSBwYXJlbnQgbm9kZSBhYm92ZSBpdC5cbiAgICovXG4gIHBhcmVudDogKHBhdGg6IFBhdGgpID0+IFBhdGhcblxuICAvKipcbiAgICogR2l2ZW4gYSBwYXRoLCBnZXQgdGhlIHBhdGggdG8gdGhlIHByZXZpb3VzIHNpYmxpbmcgbm9kZS5cbiAgICovXG4gIHByZXZpb3VzOiAocGF0aDogUGF0aCkgPT4gUGF0aFxuXG4gIC8qKlxuICAgKiBHZXQgYSBwYXRoIHJlbGF0aXZlIHRvIGFuIGFuY2VzdG9yLlxuICAgKi9cbiAgcmVsYXRpdmU6IChwYXRoOiBQYXRoLCBhbmNlc3RvcjogUGF0aCkgPT4gUGF0aFxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gYSBwYXRoIGJ5IGFuIG9wZXJhdGlvbi5cbiAgICovXG4gIHRyYW5zZm9ybTogKFxuICAgIHBhdGg6IFBhdGgsXG4gICAgb3BlcmF0aW9uOiBPcGVyYXRpb24sXG4gICAgb3B0aW9ucz86IFBhdGhUcmFuc2Zvcm1PcHRpb25zXG4gICkgPT4gUGF0aCB8IG51bGxcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFBhdGg6IFBhdGhJbnRlcmZhY2UgPSB7XG4gIGFuY2VzdG9ycyhwYXRoOiBQYXRoLCBvcHRpb25zOiBQYXRoQW5jZXN0b3JzT3B0aW9ucyA9IHt9KTogUGF0aFtdIHtcbiAgICBjb25zdCB7IHJldmVyc2UgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgIGxldCBwYXRocyA9IFBhdGgubGV2ZWxzKHBhdGgsIG9wdGlvbnMpXG5cbiAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgcGF0aHMgPSBwYXRocy5zbGljZSgxKVxuICAgIH0gZWxzZSB7XG4gICAgICBwYXRocyA9IHBhdGhzLnNsaWNlKDAsIC0xKVxuICAgIH1cblxuICAgIHJldHVybiBwYXRoc1xuICB9LFxuXG4gIGNvbW1vbihwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogUGF0aCB7XG4gICAgY29uc3QgY29tbW9uOiBQYXRoID0gW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aC5sZW5ndGggJiYgaSA8IGFub3RoZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGF2ID0gcGF0aFtpXVxuICAgICAgY29uc3QgYnYgPSBhbm90aGVyW2ldXG5cbiAgICAgIGlmIChhdiAhPT0gYnYpIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY29tbW9uLnB1c2goYXYpXG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbW1vblxuICB9LFxuXG4gIGNvbXBhcmUocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IC0xIHwgMCB8IDEge1xuICAgIGNvbnN0IG1pbiA9IE1hdGgubWluKHBhdGgubGVuZ3RoLCBhbm90aGVyLmxlbmd0aClcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWluOyBpKyspIHtcbiAgICAgIGlmIChwYXRoW2ldIDwgYW5vdGhlcltpXSkgcmV0dXJuIC0xXG4gICAgICBpZiAocGF0aFtpXSA+IGFub3RoZXJbaV0pIHJldHVybiAxXG4gICAgfVxuXG4gICAgcmV0dXJuIDBcbiAgfSxcblxuICBlbmRzQWZ0ZXIocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGkgPSBwYXRoLmxlbmd0aCAtIDFcbiAgICBjb25zdCBhcyA9IHBhdGguc2xpY2UoMCwgaSlcbiAgICBjb25zdCBicyA9IGFub3RoZXIuc2xpY2UoMCwgaSlcbiAgICBjb25zdCBhdiA9IHBhdGhbaV1cbiAgICBjb25zdCBidiA9IGFub3RoZXJbaV1cbiAgICByZXR1cm4gUGF0aC5lcXVhbHMoYXMsIGJzKSAmJiBhdiA+IGJ2XG4gIH0sXG5cbiAgZW5kc0F0KHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICBjb25zdCBpID0gcGF0aC5sZW5ndGhcbiAgICBjb25zdCBhcyA9IHBhdGguc2xpY2UoMCwgaSlcbiAgICBjb25zdCBicyA9IGFub3RoZXIuc2xpY2UoMCwgaSlcbiAgICByZXR1cm4gUGF0aC5lcXVhbHMoYXMsIGJzKVxuICB9LFxuXG4gIGVuZHNCZWZvcmUocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGkgPSBwYXRoLmxlbmd0aCAtIDFcbiAgICBjb25zdCBhcyA9IHBhdGguc2xpY2UoMCwgaSlcbiAgICBjb25zdCBicyA9IGFub3RoZXIuc2xpY2UoMCwgaSlcbiAgICBjb25zdCBhdiA9IHBhdGhbaV1cbiAgICBjb25zdCBidiA9IGFub3RoZXJbaV1cbiAgICByZXR1cm4gUGF0aC5lcXVhbHMoYXMsIGJzKSAmJiBhdiA8IGJ2XG4gIH0sXG5cbiAgZXF1YWxzKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgcGF0aC5sZW5ndGggPT09IGFub3RoZXIubGVuZ3RoICYmIHBhdGguZXZlcnkoKG4sIGkpID0+IG4gPT09IGFub3RoZXJbaV0pXG4gICAgKVxuICB9LFxuXG4gIGhhc1ByZXZpb3VzKHBhdGg6IFBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gcGF0aFtwYXRoLmxlbmd0aCAtIDFdID4gMFxuICB9LFxuXG4gIGlzQWZ0ZXIocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBQYXRoLmNvbXBhcmUocGF0aCwgYW5vdGhlcikgPT09IDFcbiAgfSxcblxuICBpc0FuY2VzdG9yKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gcGF0aC5sZW5ndGggPCBhbm90aGVyLmxlbmd0aCAmJiBQYXRoLmNvbXBhcmUocGF0aCwgYW5vdGhlcikgPT09IDBcbiAgfSxcblxuICBpc0JlZm9yZShwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFBhdGguY29tcGFyZShwYXRoLCBhbm90aGVyKSA9PT0gLTFcbiAgfSxcblxuICBpc0NoaWxkKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgcGF0aC5sZW5ndGggPT09IGFub3RoZXIubGVuZ3RoICsgMSAmJiBQYXRoLmNvbXBhcmUocGF0aCwgYW5vdGhlcikgPT09IDBcbiAgICApXG4gIH0sXG5cbiAgaXNDb21tb24ocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwYXRoLmxlbmd0aCA8PSBhbm90aGVyLmxlbmd0aCAmJiBQYXRoLmNvbXBhcmUocGF0aCwgYW5vdGhlcikgPT09IDBcbiAgfSxcblxuICBpc0Rlc2NlbmRhbnQocGF0aDogUGF0aCwgYW5vdGhlcjogUGF0aCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwYXRoLmxlbmd0aCA+IGFub3RoZXIubGVuZ3RoICYmIFBhdGguY29tcGFyZShwYXRoLCBhbm90aGVyKSA9PT0gMFxuICB9LFxuXG4gIGlzUGFyZW50KHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgcGF0aC5sZW5ndGggKyAxID09PSBhbm90aGVyLmxlbmd0aCAmJiBQYXRoLmNvbXBhcmUocGF0aCwgYW5vdGhlcikgPT09IDBcbiAgICApXG4gIH0sXG5cbiAgaXNQYXRoKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBQYXRoIHtcbiAgICByZXR1cm4gKFxuICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiZcbiAgICAgICh2YWx1ZS5sZW5ndGggPT09IDAgfHwgdHlwZW9mIHZhbHVlWzBdID09PSAnbnVtYmVyJylcbiAgICApXG4gIH0sXG5cbiAgaXNTaWJsaW5nKHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBib29sZWFuIHtcbiAgICBpZiAocGF0aC5sZW5ndGggIT09IGFub3RoZXIubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBhcyA9IHBhdGguc2xpY2UoMCwgLTEpXG4gICAgY29uc3QgYnMgPSBhbm90aGVyLnNsaWNlKDAsIC0xKVxuICAgIGNvbnN0IGFsID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG4gICAgY29uc3QgYmwgPSBhbm90aGVyW2Fub3RoZXIubGVuZ3RoIC0gMV1cbiAgICByZXR1cm4gYWwgIT09IGJsICYmIFBhdGguZXF1YWxzKGFzLCBicylcbiAgfSxcblxuICBsZXZlbHMocGF0aDogUGF0aCwgb3B0aW9uczogUGF0aExldmVsc09wdGlvbnMgPSB7fSk6IFBhdGhbXSB7XG4gICAgY29uc3QgeyByZXZlcnNlID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICBjb25zdCBsaXN0OiBQYXRoW10gPSBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gcGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgbGlzdC5wdXNoKHBhdGguc2xpY2UoMCwgaSkpXG4gICAgfVxuXG4gICAgaWYgKHJldmVyc2UpIHtcbiAgICAgIGxpc3QucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RcbiAgfSxcblxuICBuZXh0KHBhdGg6IFBhdGgpOiBQYXRoIHtcbiAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgdGhlIG5leHQgcGF0aCBvZiBhIHJvb3QgcGF0aCBbJHtwYXRofV0sIGJlY2F1c2UgaXQgaGFzIG5vIG5leHQgaW5kZXguYFxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IGxhc3QgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cbiAgICByZXR1cm4gcGF0aC5zbGljZSgwLCAtMSkuY29uY2F0KGxhc3QgKyAxKVxuICB9LFxuXG4gIG9wZXJhdGlvbkNhblRyYW5zZm9ybVBhdGgoXG4gICAgb3BlcmF0aW9uOiBPcGVyYXRpb25cbiAgKTogb3BlcmF0aW9uIGlzXG4gICAgfCBJbnNlcnROb2RlT3BlcmF0aW9uXG4gICAgfCBSZW1vdmVOb2RlT3BlcmF0aW9uXG4gICAgfCBNZXJnZU5vZGVPcGVyYXRpb25cbiAgICB8IFNwbGl0Tm9kZU9wZXJhdGlvblxuICAgIHwgTW92ZU5vZGVPcGVyYXRpb24ge1xuICAgIHN3aXRjaCAob3BlcmF0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2luc2VydF9ub2RlJzpcbiAgICAgIGNhc2UgJ3JlbW92ZV9ub2RlJzpcbiAgICAgIGNhc2UgJ21lcmdlX25vZGUnOlxuICAgICAgY2FzZSAnc3BsaXRfbm9kZSc6XG4gICAgICBjYXNlICdtb3ZlX25vZGUnOlxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9LFxuXG4gIHBhcmVudChwYXRoOiBQYXRoKTogUGF0aCB7XG4gICAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBnZXQgdGhlIHBhcmVudCBwYXRoIG9mIHRoZSByb290IHBhdGggWyR7cGF0aH1dLmApXG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdGguc2xpY2UoMCwgLTEpXG4gIH0sXG5cbiAgcHJldmlvdXMocGF0aDogUGF0aCk6IFBhdGgge1xuICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCB0aGUgcHJldmlvdXMgcGF0aCBvZiBhIHJvb3QgcGF0aCBbJHtwYXRofV0sIGJlY2F1c2UgaXQgaGFzIG5vIHByZXZpb3VzIGluZGV4LmBcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBsYXN0ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG5cbiAgICBpZiAobGFzdCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IHRoZSBwcmV2aW91cyBwYXRoIG9mIGEgZmlyc3QgY2hpbGQgcGF0aCBbJHtwYXRofV0gYmVjYXVzZSBpdCB3b3VsZCByZXN1bHQgaW4gYSBuZWdhdGl2ZSBpbmRleC5gXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdGguc2xpY2UoMCwgLTEpLmNvbmNhdChsYXN0IC0gMSlcbiAgfSxcblxuICByZWxhdGl2ZShwYXRoOiBQYXRoLCBhbmNlc3RvcjogUGF0aCk6IFBhdGgge1xuICAgIGlmICghUGF0aC5pc0FuY2VzdG9yKGFuY2VzdG9yLCBwYXRoKSAmJiAhUGF0aC5lcXVhbHMocGF0aCwgYW5jZXN0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IHRoZSByZWxhdGl2ZSBwYXRoIG9mIFske3BhdGh9XSBpbnNpZGUgYW5jZXN0b3IgWyR7YW5jZXN0b3J9XSwgYmVjYXVzZSBpdCBpcyBub3QgYWJvdmUgb3IgZXF1YWwgdG8gdGhlIHBhdGguYFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBwYXRoLnNsaWNlKGFuY2VzdG9yLmxlbmd0aClcbiAgfSxcblxuICB0cmFuc2Zvcm0oXG4gICAgcGF0aDogUGF0aCB8IG51bGwsXG4gICAgb3BlcmF0aW9uOiBPcGVyYXRpb24sXG4gICAgb3B0aW9uczogUGF0aFRyYW5zZm9ybU9wdGlvbnMgPSB7fVxuICApOiBQYXRoIHwgbnVsbCB7XG4gICAgaWYgKCFwYXRoKSByZXR1cm4gbnVsbFxuXG4gICAgLy8gUEVSRjogdXNlIGRlc3RydWN0aW5nIGluc3RlYWQgb2YgaW1tZXJcbiAgICBjb25zdCBwID0gWy4uLnBhdGhdXG4gICAgY29uc3QgeyBhZmZpbml0eSA9ICdmb3J3YXJkJyB9ID0gb3B0aW9uc1xuXG4gICAgLy8gUEVSRjogRXhpdCBlYXJseSBpZiB0aGUgb3BlcmF0aW9uIGlzIGd1YXJhbnRlZWQgbm90IHRvIGhhdmUgYW4gZWZmZWN0LlxuICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHBcbiAgICB9XG5cbiAgICBzd2l0Y2ggKG9wZXJhdGlvbi50eXBlKSB7XG4gICAgICBjYXNlICdpbnNlcnRfbm9kZSc6IHtcbiAgICAgICAgY29uc3QgeyBwYXRoOiBvcCB9ID0gb3BlcmF0aW9uXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIFBhdGguZXF1YWxzKG9wLCBwKSB8fFxuICAgICAgICAgIFBhdGguZW5kc0JlZm9yZShvcCwgcCkgfHxcbiAgICAgICAgICBQYXRoLmlzQW5jZXN0b3Iob3AsIHApXG4gICAgICAgICkge1xuICAgICAgICAgIHBbb3AubGVuZ3RoIC0gMV0gKz0gMVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmVtb3ZlX25vZGUnOiB7XG4gICAgICAgIGNvbnN0IHsgcGF0aDogb3AgfSA9IG9wZXJhdGlvblxuXG4gICAgICAgIGlmIChQYXRoLmVxdWFscyhvcCwgcCkgfHwgUGF0aC5pc0FuY2VzdG9yKG9wLCBwKSkge1xuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH0gZWxzZSBpZiAoUGF0aC5lbmRzQmVmb3JlKG9wLCBwKSkge1xuICAgICAgICAgIHBbb3AubGVuZ3RoIC0gMV0gLT0gMVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVyZ2Vfbm9kZSc6IHtcbiAgICAgICAgY29uc3QgeyBwYXRoOiBvcCwgcG9zaXRpb24gfSA9IG9wZXJhdGlvblxuXG4gICAgICAgIGlmIChQYXRoLmVxdWFscyhvcCwgcCkgfHwgUGF0aC5lbmRzQmVmb3JlKG9wLCBwKSkge1xuICAgICAgICAgIHBbb3AubGVuZ3RoIC0gMV0gLT0gMVxuICAgICAgICB9IGVsc2UgaWYgKFBhdGguaXNBbmNlc3RvcihvcCwgcCkpIHtcbiAgICAgICAgICBwW29wLmxlbmd0aCAtIDFdIC09IDFcbiAgICAgICAgICBwW29wLmxlbmd0aF0gKz0gcG9zaXRpb25cbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3NwbGl0X25vZGUnOiB7XG4gICAgICAgIGNvbnN0IHsgcGF0aDogb3AsIHBvc2l0aW9uIH0gPSBvcGVyYXRpb25cblxuICAgICAgICBpZiAoUGF0aC5lcXVhbHMob3AsIHApKSB7XG4gICAgICAgICAgaWYgKGFmZmluaXR5ID09PSAnZm9yd2FyZCcpIHtcbiAgICAgICAgICAgIHBbcC5sZW5ndGggLSAxXSArPSAxXG4gICAgICAgICAgfSBlbHNlIGlmIChhZmZpbml0eSA9PT0gJ2JhY2t3YXJkJykge1xuICAgICAgICAgICAgLy8gTm90aGluZywgYmVjYXVzZSBpdCBzdGlsbCByZWZlcnMgdG8gdGhlIHJpZ2h0IHBhdGguXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFBhdGguZW5kc0JlZm9yZShvcCwgcCkpIHtcbiAgICAgICAgICBwW29wLmxlbmd0aCAtIDFdICs9IDFcbiAgICAgICAgfSBlbHNlIGlmIChQYXRoLmlzQW5jZXN0b3Iob3AsIHApICYmIHBhdGhbb3AubGVuZ3RoXSA+PSBwb3NpdGlvbikge1xuICAgICAgICAgIHBbb3AubGVuZ3RoIC0gMV0gKz0gMVxuICAgICAgICAgIHBbb3AubGVuZ3RoXSAtPSBwb3NpdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbW92ZV9ub2RlJzoge1xuICAgICAgICBjb25zdCB7IHBhdGg6IG9wLCBuZXdQYXRoOiBvbnAgfSA9IG9wZXJhdGlvblxuXG4gICAgICAgIC8vIElmIHRoZSBvbGQgYW5kIG5ldyBwYXRoIGFyZSB0aGUgc2FtZSwgaXQncyBhIG5vLW9wLlxuICAgICAgICBpZiAoUGF0aC5lcXVhbHMob3AsIG9ucCkpIHtcbiAgICAgICAgICByZXR1cm4gcFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFBhdGguaXNBbmNlc3RvcihvcCwgcCkgfHwgUGF0aC5lcXVhbHMob3AsIHApKSB7XG4gICAgICAgICAgY29uc3QgY29weSA9IG9ucC5zbGljZSgpXG5cbiAgICAgICAgICBpZiAoUGF0aC5lbmRzQmVmb3JlKG9wLCBvbnApICYmIG9wLmxlbmd0aCA8IG9ucC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvcHlbb3AubGVuZ3RoIC0gMV0gLT0gMVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBjb3B5LmNvbmNhdChwLnNsaWNlKG9wLmxlbmd0aCkpXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgUGF0aC5pc1NpYmxpbmcob3AsIG9ucCkgJiZcbiAgICAgICAgICAoUGF0aC5pc0FuY2VzdG9yKG9ucCwgcCkgfHwgUGF0aC5lcXVhbHMob25wLCBwKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFBhdGguZW5kc0JlZm9yZShvcCwgcCkpIHtcbiAgICAgICAgICAgIHBbb3AubGVuZ3RoIC0gMV0gLT0gMVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwW29wLmxlbmd0aCAtIDFdICs9IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgUGF0aC5lbmRzQmVmb3JlKG9ucCwgcCkgfHxcbiAgICAgICAgICBQYXRoLmVxdWFscyhvbnAsIHApIHx8XG4gICAgICAgICAgUGF0aC5pc0FuY2VzdG9yKG9ucCwgcClcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFBhdGguZW5kc0JlZm9yZShvcCwgcCkpIHtcbiAgICAgICAgICAgIHBbb3AubGVuZ3RoIC0gMV0gLT0gMVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHBbb25wLmxlbmd0aCAtIDFdICs9IDFcbiAgICAgICAgfSBlbHNlIGlmIChQYXRoLmVuZHNCZWZvcmUob3AsIHApKSB7XG4gICAgICAgICAgaWYgKFBhdGguZXF1YWxzKG9ucCwgcCkpIHtcbiAgICAgICAgICAgIHBbb25wLmxlbmd0aCAtIDFdICs9IDFcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwW29wLmxlbmd0aCAtIDFdIC09IDFcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBcbiAgfSxcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdHlwZW9mKG8pIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gdHlwZW9mIG87XG4gIH0gOiBmdW5jdGlvbiAobykge1xuICAgIHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvO1xuICB9LCBfdHlwZW9mKG8pO1xufSIsICJpbXBvcnQgX3R5cGVvZiBmcm9tIFwiLi90eXBlb2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkge1xuICBpZiAoX3R5cGVvZihpbnB1dCkgIT09IFwib2JqZWN0XCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDtcbiAgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdO1xuICBpZiAocHJpbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCBcImRlZmF1bHRcIik7XG4gICAgaWYgKF90eXBlb2YocmVzKSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHJlcztcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7XG4gIH1cbiAgcmV0dXJuIChoaW50ID09PSBcInN0cmluZ1wiID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7XG59IiwgImltcG9ydCBfdHlwZW9mIGZyb20gXCIuL3R5cGVvZi5qc1wiO1xuaW1wb3J0IHRvUHJpbWl0aXZlIGZyb20gXCIuL3RvUHJpbWl0aXZlLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpIHtcbiAgdmFyIGtleSA9IHRvUHJpbWl0aXZlKGFyZywgXCJzdHJpbmdcIik7XG4gIHJldHVybiBfdHlwZW9mKGtleSkgPT09IFwic3ltYm9sXCIgPyBrZXkgOiBTdHJpbmcoa2V5KTtcbn0iLCAiaW1wb3J0IHRvUHJvcGVydHlLZXkgZnJvbSBcIi4vdG9Qcm9wZXJ0eUtleS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBrZXkgPSB0b1Byb3BlcnR5S2V5KGtleSk7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBvYmo7XG59IiwgImltcG9ydCB7IGNyZWF0ZURyYWZ0LCBmaW5pc2hEcmFmdCwgaXNEcmFmdCB9IGZyb20gJ2ltbWVyJ1xuaW1wb3J0IHtcbiAgQW5jZXN0b3IsXG4gIERlc2NlbmRhbnQsXG4gIEVkaXRvcixcbiAgRWxlbWVudCxcbiAgTm9kZSxcbiAgTm9kZUVudHJ5LFxuICBPcGVyYXRpb24sXG4gIFBhdGgsXG4gIFBvaW50LFxuICBSYW5nZSxcbiAgU2NydWJiZXIsXG4gIFNlbGVjdGlvbixcbiAgVGV4dCxcbn0gZnJvbSAnLi4vLi4vaW5kZXgnXG5cbmV4cG9ydCBpbnRlcmZhY2UgR2VuZXJhbFRyYW5zZm9ybXMge1xuICAvKipcbiAgICogVHJhbnNmb3JtIHRoZSBlZGl0b3IgYnkgYW4gb3BlcmF0aW9uLlxuICAgKi9cbiAgdHJhbnNmb3JtOiAoZWRpdG9yOiBFZGl0b3IsIG9wOiBPcGVyYXRpb24pID0+IHZvaWRcbn1cblxuY29uc3QgYXBwbHlUb0RyYWZ0ID0gKGVkaXRvcjogRWRpdG9yLCBzZWxlY3Rpb246IFNlbGVjdGlvbiwgb3A6IE9wZXJhdGlvbikgPT4ge1xuICBzd2l0Y2ggKG9wLnR5cGUpIHtcbiAgICBjYXNlICdpbnNlcnRfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCwgbm9kZSB9ID0gb3BcbiAgICAgIGNvbnN0IHBhcmVudCA9IE5vZGUucGFyZW50KGVkaXRvciwgcGF0aClcbiAgICAgIGNvbnN0IGluZGV4ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG5cbiAgICAgIGlmIChpbmRleCA+IHBhcmVudC5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBDYW5ub3QgYXBwbHkgYW4gXCJpbnNlcnRfbm9kZVwiIG9wZXJhdGlvbiBhdCBwYXRoIFske3BhdGh9XSBiZWNhdXNlIHRoZSBkZXN0aW5hdGlvbiBpcyBwYXN0IHRoZSBlbmQgb2YgdGhlIG5vZGUuYFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIHBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDAsIG5vZGUpXG5cbiAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgZm9yIChjb25zdCBbcG9pbnQsIGtleV0gb2YgUmFuZ2UucG9pbnRzKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICBzZWxlY3Rpb25ba2V5XSA9IFBvaW50LnRyYW5zZm9ybShwb2ludCwgb3ApIVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY2FzZSAnaW5zZXJ0X3RleHQnOiB7XG4gICAgICBjb25zdCB7IHBhdGgsIG9mZnNldCwgdGV4dCB9ID0gb3BcbiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA9PT0gMCkgYnJlYWtcbiAgICAgIGNvbnN0IG5vZGUgPSBOb2RlLmxlYWYoZWRpdG9yLCBwYXRoKVxuICAgICAgY29uc3QgYmVmb3JlID0gbm9kZS50ZXh0LnNsaWNlKDAsIG9mZnNldClcbiAgICAgIGNvbnN0IGFmdGVyID0gbm9kZS50ZXh0LnNsaWNlKG9mZnNldClcbiAgICAgIG5vZGUudGV4dCA9IGJlZm9yZSArIHRleHQgKyBhZnRlclxuXG4gICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgIGZvciAoY29uc3QgW3BvaW50LCBrZXldIG9mIFJhbmdlLnBvaW50cyhzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgc2VsZWN0aW9uW2tleV0gPSBQb2ludC50cmFuc2Zvcm0ocG9pbnQsIG9wKSFcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGNhc2UgJ21lcmdlX25vZGUnOiB7XG4gICAgICBjb25zdCB7IHBhdGggfSA9IG9wXG4gICAgICBjb25zdCBub2RlID0gTm9kZS5nZXQoZWRpdG9yLCBwYXRoKVxuICAgICAgY29uc3QgcHJldlBhdGggPSBQYXRoLnByZXZpb3VzKHBhdGgpXG4gICAgICBjb25zdCBwcmV2ID0gTm9kZS5nZXQoZWRpdG9yLCBwcmV2UGF0aClcbiAgICAgIGNvbnN0IHBhcmVudCA9IE5vZGUucGFyZW50KGVkaXRvciwgcGF0aClcbiAgICAgIGNvbnN0IGluZGV4ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG5cbiAgICAgIGlmIChUZXh0LmlzVGV4dChub2RlKSAmJiBUZXh0LmlzVGV4dChwcmV2KSkge1xuICAgICAgICBwcmV2LnRleHQgKz0gbm9kZS50ZXh0XG4gICAgICB9IGVsc2UgaWYgKCFUZXh0LmlzVGV4dChub2RlKSAmJiAhVGV4dC5pc1RleHQocHJldikpIHtcbiAgICAgICAgcHJldi5jaGlsZHJlbi5wdXNoKC4uLm5vZGUuY2hpbGRyZW4pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYENhbm5vdCBhcHBseSBhIFwibWVyZ2Vfbm9kZVwiIG9wZXJhdGlvbiBhdCBwYXRoIFske3BhdGh9XSB0byBub2RlcyBvZiBkaWZmZXJlbnQgaW50ZXJmYWNlczogJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgICAgICBub2RlXG4gICAgICAgICAgKX0gJHtTY3J1YmJlci5zdHJpbmdpZnkocHJldil9YFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIHBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpXG5cbiAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgZm9yIChjb25zdCBbcG9pbnQsIGtleV0gb2YgUmFuZ2UucG9pbnRzKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICBzZWxlY3Rpb25ba2V5XSA9IFBvaW50LnRyYW5zZm9ybShwb2ludCwgb3ApIVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY2FzZSAnbW92ZV9ub2RlJzoge1xuICAgICAgY29uc3QgeyBwYXRoLCBuZXdQYXRoIH0gPSBvcFxuXG4gICAgICBpZiAoUGF0aC5pc0FuY2VzdG9yKHBhdGgsIG5ld1BhdGgpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgQ2Fubm90IG1vdmUgYSBwYXRoIFske3BhdGh9XSB0byBuZXcgcGF0aCBbJHtuZXdQYXRofV0gYmVjYXVzZSB0aGUgZGVzdGluYXRpb24gaXMgaW5zaWRlIGl0c2VsZi5gXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm9kZSA9IE5vZGUuZ2V0KGVkaXRvciwgcGF0aClcbiAgICAgIGNvbnN0IHBhcmVudCA9IE5vZGUucGFyZW50KGVkaXRvciwgcGF0aClcbiAgICAgIGNvbnN0IGluZGV4ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG5cbiAgICAgIC8vIFRoaXMgaXMgdHJpY2t5LCBidXQgc2luY2UgdGhlIGBwYXRoYCBhbmQgYG5ld1BhdGhgIGJvdGggcmVmZXIgdG9cbiAgICAgIC8vIHRoZSBzYW1lIHNuYXBzaG90IGluIHRpbWUsIHRoZXJlJ3MgYSBtaXNtYXRjaC4gQWZ0ZXIgZWl0aGVyXG4gICAgICAvLyByZW1vdmluZyB0aGUgb3JpZ2luYWwgcG9zaXRpb24sIHRoZSBzZWNvbmQgc3RlcCdzIHBhdGggY2FuIGJlIG91dFxuICAgICAgLy8gb2YgZGF0ZS4gU28gaW5zdGVhZCBvZiB1c2luZyB0aGUgYG9wLm5ld1BhdGhgIGRpcmVjdGx5LCB3ZVxuICAgICAgLy8gdHJhbnNmb3JtIGBvcC5wYXRoYCB0byBhc2NlcnRhaW4gd2hhdCB0aGUgYG5ld1BhdGhgIHdvdWxkIGJlIGFmdGVyXG4gICAgICAvLyB0aGUgb3BlcmF0aW9uIHdhcyBhcHBsaWVkLlxuICAgICAgcGFyZW50LmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSlcbiAgICAgIGNvbnN0IHRydWVQYXRoID0gUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3ApIVxuICAgICAgY29uc3QgbmV3UGFyZW50ID0gTm9kZS5nZXQoZWRpdG9yLCBQYXRoLnBhcmVudCh0cnVlUGF0aCkpIGFzIEFuY2VzdG9yXG4gICAgICBjb25zdCBuZXdJbmRleCA9IHRydWVQYXRoW3RydWVQYXRoLmxlbmd0aCAtIDFdXG5cbiAgICAgIG5ld1BhcmVudC5jaGlsZHJlbi5zcGxpY2UobmV3SW5kZXgsIDAsIG5vZGUpXG5cbiAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgZm9yIChjb25zdCBbcG9pbnQsIGtleV0gb2YgUmFuZ2UucG9pbnRzKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICBzZWxlY3Rpb25ba2V5XSA9IFBvaW50LnRyYW5zZm9ybShwb2ludCwgb3ApIVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY2FzZSAncmVtb3ZlX25vZGUnOiB7XG4gICAgICBjb25zdCB7IHBhdGggfSA9IG9wXG4gICAgICBjb25zdCBpbmRleCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXVxuICAgICAgY29uc3QgcGFyZW50ID0gTm9kZS5wYXJlbnQoZWRpdG9yLCBwYXRoKVxuICAgICAgcGFyZW50LmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSlcblxuICAgICAgLy8gVHJhbnNmb3JtIGFsbCB0aGUgcG9pbnRzIGluIHRoZSB2YWx1ZSwgYnV0IGlmIHRoZSBwb2ludCB3YXMgaW4gdGhlXG4gICAgICAvLyBub2RlIHRoYXQgd2FzIHJlbW92ZWQgd2UgbmVlZCB0byB1cGRhdGUgdGhlIHJhbmdlIG9yIHJlbW92ZSBpdC5cbiAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgZm9yIChjb25zdCBbcG9pbnQsIGtleV0gb2YgUmFuZ2UucG9pbnRzKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBQb2ludC50cmFuc2Zvcm0ocG9pbnQsIG9wKVxuXG4gICAgICAgICAgaWYgKHNlbGVjdGlvbiAhPSBudWxsICYmIHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb25ba2V5XSA9IHJlc3VsdFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgcHJldjogTm9kZUVudHJ5PFRleHQ+IHwgdW5kZWZpbmVkXG4gICAgICAgICAgICBsZXQgbmV4dDogTm9kZUVudHJ5PFRleHQ+IHwgdW5kZWZpbmVkXG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgW24sIHBdIG9mIE5vZGUudGV4dHMoZWRpdG9yKSkge1xuICAgICAgICAgICAgICBpZiAoUGF0aC5jb21wYXJlKHAsIHBhdGgpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHByZXYgPSBbbiwgcF1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXh0ID0gW24sIHBdXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgcHJlZmVyTmV4dCA9IGZhbHNlXG4gICAgICAgICAgICBpZiAocHJldiAmJiBuZXh0KSB7XG4gICAgICAgICAgICAgIGlmIChQYXRoLmVxdWFscyhuZXh0WzFdLCBwYXRoKSkge1xuICAgICAgICAgICAgICAgIHByZWZlck5leHQgPSAhUGF0aC5oYXNQcmV2aW91cyhuZXh0WzFdKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZWZlck5leHQgPVxuICAgICAgICAgICAgICAgICAgUGF0aC5jb21tb24ocHJldlsxXSwgcGF0aCkubGVuZ3RoIDxcbiAgICAgICAgICAgICAgICAgIFBhdGguY29tbW9uKG5leHRbMV0sIHBhdGgpLmxlbmd0aFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcmV2ICYmICFwcmVmZXJOZXh0KSB7XG4gICAgICAgICAgICAgIHBvaW50LnBhdGggPSBwcmV2WzFdXG4gICAgICAgICAgICAgIHBvaW50Lm9mZnNldCA9IHByZXZbMF0udGV4dC5sZW5ndGhcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmV4dCkge1xuICAgICAgICAgICAgICBwb2ludC5wYXRoID0gbmV4dFsxXVxuICAgICAgICAgICAgICBwb2ludC5vZmZzZXQgPSAwXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZWxlY3Rpb24gPSBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY2FzZSAncmVtb3ZlX3RleHQnOiB7XG4gICAgICBjb25zdCB7IHBhdGgsIG9mZnNldCwgdGV4dCB9ID0gb3BcbiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA9PT0gMCkgYnJlYWtcbiAgICAgIGNvbnN0IG5vZGUgPSBOb2RlLmxlYWYoZWRpdG9yLCBwYXRoKVxuICAgICAgY29uc3QgYmVmb3JlID0gbm9kZS50ZXh0LnNsaWNlKDAsIG9mZnNldClcbiAgICAgIGNvbnN0IGFmdGVyID0gbm9kZS50ZXh0LnNsaWNlKG9mZnNldCArIHRleHQubGVuZ3RoKVxuICAgICAgbm9kZS50ZXh0ID0gYmVmb3JlICsgYWZ0ZXJcblxuICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICBmb3IgKGNvbnN0IFtwb2ludCwga2V5XSBvZiBSYW5nZS5wb2ludHMoc2VsZWN0aW9uKSkge1xuICAgICAgICAgIHNlbGVjdGlvbltrZXldID0gUG9pbnQudHJhbnNmb3JtKHBvaW50LCBvcCkhXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjYXNlICdzZXRfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCwgcHJvcGVydGllcywgbmV3UHJvcGVydGllcyB9ID0gb3BcblxuICAgICAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHNldCBwcm9wZXJ0aWVzIG9uIHRoZSByb290IG5vZGUhYClcbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm9kZSA9IE5vZGUuZ2V0KGVkaXRvciwgcGF0aClcblxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV3UHJvcGVydGllcykge1xuICAgICAgICBpZiAoa2V5ID09PSAnY2hpbGRyZW4nIHx8IGtleSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3Qgc2V0IHRoZSBcIiR7a2V5fVwiIHByb3BlcnR5IG9mIG5vZGVzIWApXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWx1ZSA9IG5ld1Byb3BlcnRpZXNbPGtleW9mIE5vZGU+a2V5XVxuXG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgZGVsZXRlIG5vZGVbPGtleW9mIE5vZGU+a2V5XVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGVbPGtleW9mIE5vZGU+a2V5XSA9IHZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcHJvcGVydGllcyB0aGF0IHdlcmUgcHJldmlvdXNseSBkZWZpbmVkLCBidXQgYXJlIG5vdyBtaXNzaW5nLCBtdXN0IGJlIGRlbGV0ZWRcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKCFuZXdQcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBkZWxldGUgbm9kZVs8a2V5b2YgTm9kZT5rZXldXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjYXNlICdzZXRfc2VsZWN0aW9uJzoge1xuICAgICAgY29uc3QgeyBuZXdQcm9wZXJ0aWVzIH0gPSBvcFxuXG4gICAgICBpZiAobmV3UHJvcGVydGllcyA9PSBudWxsKSB7XG4gICAgICAgIHNlbGVjdGlvbiA9IG5ld1Byb3BlcnRpZXNcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzZWxlY3Rpb24gPT0gbnVsbCkge1xuICAgICAgICAgIGlmICghUmFuZ2UuaXNSYW5nZShuZXdQcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgQ2Fubm90IGFwcGx5IGFuIGluY29tcGxldGUgXCJzZXRfc2VsZWN0aW9uXCIgb3BlcmF0aW9uIHByb3BlcnRpZXMgJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgICAgICAgICAgbmV3UHJvcGVydGllc1xuICAgICAgICAgICAgICApfSB3aGVuIHRoZXJlIGlzIG5vIGN1cnJlbnQgc2VsZWN0aW9uLmBcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxlY3Rpb24gPSB7IC4uLm5ld1Byb3BlcnRpZXMgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV3UHJvcGVydGllcykge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gbmV3UHJvcGVydGllc1s8a2V5b2YgUmFuZ2U+a2V5XVxuXG4gICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdhbmNob3InIHx8IGtleSA9PT0gJ2ZvY3VzJykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCByZW1vdmUgdGhlIFwiJHtrZXl9XCIgc2VsZWN0aW9uIHByb3BlcnR5YClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVsZXRlIHNlbGVjdGlvbls8a2V5b2YgUmFuZ2U+a2V5XVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxlY3Rpb25bPGtleW9mIFJhbmdlPmtleV0gPSB2YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGNhc2UgJ3NwbGl0X25vZGUnOiB7XG4gICAgICBjb25zdCB7IHBhdGgsIHBvc2l0aW9uLCBwcm9wZXJ0aWVzIH0gPSBvcFxuXG4gICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBDYW5ub3QgYXBwbHkgYSBcInNwbGl0X25vZGVcIiBvcGVyYXRpb24gYXQgcGF0aCBbJHtwYXRofV0gYmVjYXVzZSB0aGUgcm9vdCBub2RlIGNhbm5vdCBiZSBzcGxpdC5gXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm9kZSA9IE5vZGUuZ2V0KGVkaXRvciwgcGF0aClcbiAgICAgIGNvbnN0IHBhcmVudCA9IE5vZGUucGFyZW50KGVkaXRvciwgcGF0aClcbiAgICAgIGNvbnN0IGluZGV4ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG4gICAgICBsZXQgbmV3Tm9kZTogRGVzY2VuZGFudFxuXG4gICAgICBpZiAoVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICAgICAgY29uc3QgYmVmb3JlID0gbm9kZS50ZXh0LnNsaWNlKDAsIHBvc2l0aW9uKVxuICAgICAgICBjb25zdCBhZnRlciA9IG5vZGUudGV4dC5zbGljZShwb3NpdGlvbilcbiAgICAgICAgbm9kZS50ZXh0ID0gYmVmb3JlXG4gICAgICAgIG5ld05vZGUgPSB7XG4gICAgICAgICAgLi4uKHByb3BlcnRpZXMgYXMgUGFydGlhbDxUZXh0PiksXG4gICAgICAgICAgdGV4dDogYWZ0ZXIsXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGJlZm9yZSA9IG5vZGUuY2hpbGRyZW4uc2xpY2UoMCwgcG9zaXRpb24pXG4gICAgICAgIGNvbnN0IGFmdGVyID0gbm9kZS5jaGlsZHJlbi5zbGljZShwb3NpdGlvbilcbiAgICAgICAgbm9kZS5jaGlsZHJlbiA9IGJlZm9yZVxuXG4gICAgICAgIG5ld05vZGUgPSB7XG4gICAgICAgICAgLi4uKHByb3BlcnRpZXMgYXMgUGFydGlhbDxFbGVtZW50PiksXG4gICAgICAgICAgY2hpbGRyZW46IGFmdGVyLFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXggKyAxLCAwLCBuZXdOb2RlKVxuXG4gICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgIGZvciAoY29uc3QgW3BvaW50LCBrZXldIG9mIFJhbmdlLnBvaW50cyhzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgc2VsZWN0aW9uW2tleV0gPSBQb2ludC50cmFuc2Zvcm0ocG9pbnQsIG9wKSFcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2VsZWN0aW9uXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBHZW5lcmFsVHJhbnNmb3JtczogR2VuZXJhbFRyYW5zZm9ybXMgPSB7XG4gIHRyYW5zZm9ybShlZGl0b3I6IEVkaXRvciwgb3A6IE9wZXJhdGlvbik6IHZvaWQge1xuICAgIGVkaXRvci5jaGlsZHJlbiA9IGNyZWF0ZURyYWZ0KGVkaXRvci5jaGlsZHJlbilcbiAgICBsZXQgc2VsZWN0aW9uID0gZWRpdG9yLnNlbGVjdGlvbiAmJiBjcmVhdGVEcmFmdChlZGl0b3Iuc2VsZWN0aW9uKVxuXG4gICAgdHJ5IHtcbiAgICAgIHNlbGVjdGlvbiA9IGFwcGx5VG9EcmFmdChlZGl0b3IsIHNlbGVjdGlvbiwgb3ApXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGVkaXRvci5jaGlsZHJlbiA9IGZpbmlzaERyYWZ0KGVkaXRvci5jaGlsZHJlbilcblxuICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uID0gaXNEcmFmdChzZWxlY3Rpb24pXG4gICAgICAgICAgPyAoZmluaXNoRHJhZnQoc2VsZWN0aW9uKSBhcyBSYW5nZSlcbiAgICAgICAgICA6IHNlbGVjdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWRpdG9yLnNlbGVjdGlvbiA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFbGVtZW50LCBMb2NhdGlvbiwgTm9kZSwgUGF0aCB9IGZyb20gJy4uLy4uL2luZGV4J1xuaW1wb3J0IHsgTm9kZU1hdGNoLCBQcm9wc0NvbXBhcmUsIFByb3BzTWVyZ2UgfSBmcm9tICcuLi9lZGl0b3InXG5pbXBvcnQgeyBNYXhpbWl6ZU1vZGUsIFJhbmdlTW9kZSB9IGZyb20gJy4uLy4uL3R5cGVzL3R5cGVzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVJbnNlcnROb2Rlc09wdGlvbnM8VCBleHRlbmRzIE5vZGU+IHtcbiAgYXQ/OiBMb2NhdGlvblxuICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICBtb2RlPzogUmFuZ2VNb2RlXG4gIGhhbmdpbmc/OiBib29sZWFuXG4gIHNlbGVjdD86IGJvb2xlYW5cbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZVRyYW5zZm9ybXMge1xuICAvKipcbiAgICogSW5zZXJ0IG5vZGVzIGluIHRoZSBlZGl0b3JcbiAgICogYXQgdGhlIHNwZWNpZmllZCBsb2NhdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBvciAoaWYgbm90IGRlZmluZWQpIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgaW5zZXJ0Tm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgbm9kZXM6IE5vZGUgfCBOb2RlW10sXG4gICAgb3B0aW9ucz86IE5vZGVJbnNlcnROb2Rlc09wdGlvbnM8VD5cbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIExpZnQgbm9kZXMgYXQgYSBzcGVjaWZpYyBsb2NhdGlvbiB1cHdhcmRzIGluIHRoZSBkb2N1bWVudCB0cmVlLCBzcGxpdHRpbmdcbiAgICogdGhlaXIgcGFyZW50IGluIHR3byBpZiBuZWNlc3NhcnkuXG4gICAqL1xuICBsaWZ0Tm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGF0PzogTG9jYXRpb25cbiAgICAgIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gICAgICBtb2RlPzogTWF4aW1pemVNb2RlXG4gICAgICB2b2lkcz86IGJvb2xlYW5cbiAgICB9XG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBNZXJnZSBhIG5vZGUgYXQgYSBsb2NhdGlvbiB3aXRoIHRoZSBwcmV2aW91cyBub2RlIG9mIHRoZSBzYW1lIGRlcHRoLFxuICAgKiByZW1vdmluZyBhbnkgZW1wdHkgY29udGFpbmluZyBub2RlcyBhZnRlciB0aGUgbWVyZ2UgaWYgbmVjZXNzYXJ5LlxuICAgKi9cbiAgbWVyZ2VOb2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzoge1xuICAgICAgYXQ/OiBMb2NhdGlvblxuICAgICAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgICAgIG1vZGU/OiBSYW5nZU1vZGVcbiAgICAgIGhhbmdpbmc/OiBib29sZWFuXG4gICAgICB2b2lkcz86IGJvb2xlYW5cbiAgICB9XG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBub2RlcyBhdCBhIGxvY2F0aW9uIHRvIGEgbmV3IGxvY2F0aW9uLlxuICAgKi9cbiAgbW92ZU5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGF0PzogTG9jYXRpb25cbiAgICAgIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gICAgICBtb2RlPzogTWF4aW1pemVNb2RlXG4gICAgICB0bzogUGF0aFxuICAgICAgdm9pZHM/OiBib29sZWFuXG4gICAgfVxuICApID0+IHZvaWRcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBub2RlcyBhdCBhIHNwZWNpZmljIGxvY2F0aW9uIGluIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIHJlbW92ZU5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBhdD86IExvY2F0aW9uXG4gICAgICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICAgICAgbW9kZT86IFJhbmdlTW9kZVxuICAgICAgaGFuZ2luZz86IGJvb2xlYW5cbiAgICAgIHZvaWRzPzogYm9vbGVhblxuICAgIH1cbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIFNldCBuZXcgcHJvcGVydGllcyBvbiB0aGUgbm9kZXMgYXQgYSBsb2NhdGlvbi5cbiAgICovXG4gIHNldE5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIHByb3BzOiBQYXJ0aWFsPFQ+LFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBhdD86IExvY2F0aW9uXG4gICAgICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICAgICAgbW9kZT86IE1heGltaXplTW9kZVxuICAgICAgaGFuZ2luZz86IGJvb2xlYW5cbiAgICAgIHNwbGl0PzogYm9vbGVhblxuICAgICAgdm9pZHM/OiBib29sZWFuXG4gICAgICBjb21wYXJlPzogUHJvcHNDb21wYXJlXG4gICAgICBtZXJnZT86IFByb3BzTWVyZ2VcbiAgICB9XG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBTcGxpdCB0aGUgbm9kZXMgYXQgYSBzcGVjaWZpYyBsb2NhdGlvbi5cbiAgICovXG4gIHNwbGl0Tm9kZXM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGF0PzogTG9jYXRpb25cbiAgICAgIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gICAgICBtb2RlPzogUmFuZ2VNb2RlXG4gICAgICBhbHdheXM/OiBib29sZWFuXG4gICAgICBoZWlnaHQ/OiBudW1iZXJcbiAgICAgIHZvaWRzPzogYm9vbGVhblxuICAgIH1cbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIFVuc2V0IHByb3BlcnRpZXMgb24gdGhlIG5vZGVzIGF0IGEgbG9jYXRpb24uXG4gICAqL1xuICB1bnNldE5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIHByb3BzOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICBvcHRpb25zPzoge1xuICAgICAgYXQ/OiBMb2NhdGlvblxuICAgICAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgICAgIG1vZGU/OiBNYXhpbWl6ZU1vZGVcbiAgICAgIGhhbmdpbmc/OiBib29sZWFuXG4gICAgICBzcGxpdD86IGJvb2xlYW5cbiAgICAgIHZvaWRzPzogYm9vbGVhblxuICAgIH1cbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIFVud3JhcCB0aGUgbm9kZXMgYXQgYSBsb2NhdGlvbiBmcm9tIGEgcGFyZW50IG5vZGUsIHNwbGl0dGluZyB0aGUgcGFyZW50IGlmXG4gICAqIG5lY2Vzc2FyeSB0byBlbnN1cmUgdGhhdCBvbmx5IHRoZSBjb250ZW50IGluIHRoZSByYW5nZSBpcyB1bndyYXBwZWQuXG4gICAqL1xuICB1bndyYXBOb2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzoge1xuICAgICAgYXQ/OiBMb2NhdGlvblxuICAgICAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgICAgIG1vZGU/OiBNYXhpbWl6ZU1vZGVcbiAgICAgIHNwbGl0PzogYm9vbGVhblxuICAgICAgdm9pZHM/OiBib29sZWFuXG4gICAgfVxuICApID0+IHZvaWRcblxuICAvKipcbiAgICogV3JhcCB0aGUgbm9kZXMgYXQgYSBsb2NhdGlvbiBpbiBhIG5ldyBjb250YWluZXIgbm9kZSwgc3BsaXR0aW5nIHRoZSBlZGdlc1xuICAgKiBvZiB0aGUgcmFuZ2UgZmlyc3QgdG8gZW5zdXJlIHRoYXQgb25seSB0aGUgY29udGVudCBpbiB0aGUgcmFuZ2UgaXMgd3JhcHBlZC5cbiAgICovXG4gIHdyYXBOb2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBlbGVtZW50OiBFbGVtZW50LFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBhdD86IExvY2F0aW9uXG4gICAgICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICAgICAgbW9kZT86IE1heGltaXplTW9kZVxuICAgICAgc3BsaXQ/OiBib29sZWFuXG4gICAgICB2b2lkcz86IGJvb2xlYW5cbiAgICB9XG4gICkgPT4gdm9pZFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgTm9kZVRyYW5zZm9ybXM6IE5vZGVUcmFuc2Zvcm1zID0ge1xuICBpbnNlcnROb2RlcyhlZGl0b3IsIG5vZGVzLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLmluc2VydE5vZGVzKG5vZGVzLCBvcHRpb25zKVxuICB9LFxuICBsaWZ0Tm9kZXMoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLmxpZnROb2RlcyhvcHRpb25zKVxuICB9LFxuICBtZXJnZU5vZGVzKGVkaXRvciwgb3B0aW9ucykge1xuICAgIGVkaXRvci5tZXJnZU5vZGVzKG9wdGlvbnMpXG4gIH0sXG4gIG1vdmVOb2RlcyhlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IubW92ZU5vZGVzKG9wdGlvbnMpXG4gIH0sXG4gIHJlbW92ZU5vZGVzKGVkaXRvciwgb3B0aW9ucykge1xuICAgIGVkaXRvci5yZW1vdmVOb2RlcyhvcHRpb25zKVxuICB9LFxuICBzZXROb2RlcyhlZGl0b3IsIHByb3BzLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLnNldE5vZGVzKHByb3BzLCBvcHRpb25zKVxuICB9LFxuICBzcGxpdE5vZGVzKGVkaXRvciwgb3B0aW9ucykge1xuICAgIGVkaXRvci5zcGxpdE5vZGVzKG9wdGlvbnMpXG4gIH0sXG4gIHVuc2V0Tm9kZXMoZWRpdG9yLCBwcm9wcywgb3B0aW9ucykge1xuICAgIGVkaXRvci51bnNldE5vZGVzKHByb3BzLCBvcHRpb25zKVxuICB9LFxuICB1bndyYXBOb2RlcyhlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IudW53cmFwTm9kZXMob3B0aW9ucylcbiAgfSxcbiAgd3JhcE5vZGVzKGVkaXRvciwgZWxlbWVudCwgb3B0aW9ucykge1xuICAgIGVkaXRvci53cmFwTm9kZXMoZWxlbWVudCwgb3B0aW9ucylcbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIExvY2F0aW9uLCBQb2ludCwgUmFuZ2UgfSBmcm9tICcuLi8uLi9pbmRleCdcbmltcG9ydCB7IE1vdmVVbml0LCBTZWxlY3Rpb25FZGdlIH0gZnJvbSAnLi4vLi4vdHlwZXMvdHlwZXMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0aW9uQ29sbGFwc2VPcHRpb25zIHtcbiAgZWRnZT86IFNlbGVjdGlvbkVkZ2Vcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWxlY3Rpb25Nb3ZlT3B0aW9ucyB7XG4gIGRpc3RhbmNlPzogbnVtYmVyXG4gIHVuaXQ/OiBNb3ZlVW5pdFxuICByZXZlcnNlPzogYm9vbGVhblxuICBlZGdlPzogU2VsZWN0aW9uRWRnZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdGlvblNldFBvaW50T3B0aW9ucyB7XG4gIGVkZ2U/OiBTZWxlY3Rpb25FZGdlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0aW9uVHJhbnNmb3JtcyB7XG4gIC8qKlxuICAgKiBDb2xsYXBzZSB0aGUgc2VsZWN0aW9uLlxuICAgKi9cbiAgY29sbGFwc2U6IChlZGl0b3I6IEVkaXRvciwgb3B0aW9ucz86IFNlbGVjdGlvbkNvbGxhcHNlT3B0aW9ucykgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBVbnNldCB0aGUgc2VsZWN0aW9uLlxuICAgKi9cbiAgZGVzZWxlY3Q6IChlZGl0b3I6IEVkaXRvcikgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBzZWxlY3Rpb24ncyBwb2ludCBmb3J3YXJkIG9yIGJhY2t3YXJkLlxuICAgKi9cbiAgbW92ZTogKGVkaXRvcjogRWRpdG9yLCBvcHRpb25zPzogU2VsZWN0aW9uTW92ZU9wdGlvbnMpID0+IHZvaWRcblxuICAvKipcbiAgICogU2V0IHRoZSBzZWxlY3Rpb24gdG8gYSBuZXcgdmFsdWUuXG4gICAqL1xuICBzZWxlY3Q6IChlZGl0b3I6IEVkaXRvciwgdGFyZ2V0OiBMb2NhdGlvbikgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBTZXQgbmV3IHByb3BlcnRpZXMgb24gb25lIG9mIHRoZSBzZWxlY3Rpb24ncyBwb2ludHMuXG4gICAqL1xuICBzZXRQb2ludDogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIHByb3BzOiBQYXJ0aWFsPFBvaW50PixcbiAgICBvcHRpb25zPzogU2VsZWN0aW9uU2V0UG9pbnRPcHRpb25zXG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBTZXQgbmV3IHByb3BlcnRpZXMgb24gdGhlIHNlbGVjdGlvbi5cbiAgICovXG4gIHNldFNlbGVjdGlvbjogKGVkaXRvcjogRWRpdG9yLCBwcm9wczogUGFydGlhbDxSYW5nZT4pID0+IHZvaWRcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFNlbGVjdGlvblRyYW5zZm9ybXM6IFNlbGVjdGlvblRyYW5zZm9ybXMgPSB7XG4gIGNvbGxhcHNlKGVkaXRvciwgb3B0aW9ucykge1xuICAgIGVkaXRvci5jb2xsYXBzZShvcHRpb25zKVxuICB9LFxuICBkZXNlbGVjdChlZGl0b3IpIHtcbiAgICBlZGl0b3IuZGVzZWxlY3QoKVxuICB9LFxuICBtb3ZlKGVkaXRvciwgb3B0aW9ucykge1xuICAgIGVkaXRvci5tb3ZlKG9wdGlvbnMpXG4gIH0sXG4gIHNlbGVjdChlZGl0b3IsIHRhcmdldCkge1xuICAgIGVkaXRvci5zZWxlY3QodGFyZ2V0KVxuICB9LFxuICBzZXRQb2ludChlZGl0b3IsIHByb3BzLCBvcHRpb25zKSB7XG4gICAgZWRpdG9yLnNldFBvaW50KHByb3BzLCBvcHRpb25zKVxuICB9LFxuICBzZXRTZWxlY3Rpb24oZWRpdG9yLCBwcm9wcykge1xuICAgIGVkaXRvci5zZXRTZWxlY3Rpb24ocHJvcHMpXG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ2lzLXBsYWluLW9iamVjdCdcblxuLypcbiAgQ3VzdG9tIGRlZXAgZXF1YWwgY29tcGFyaXNvbiBmb3IgU2xhdGUgbm9kZXMuXG5cbiAgV2UgZG9uJ3QgbmVlZCBnZW5lcmFsIHB1cnBvc2UgZGVlcCBlcXVhbGl0eTtcbiAgU2xhdGUgb25seSBzdXBwb3J0cyBwbGFpbiB2YWx1ZXMsIEFycmF5cywgYW5kIG5lc3RlZCBvYmplY3RzLlxuICBDb21wbGV4IHZhbHVlcyBuZXN0ZWQgaW5zaWRlIEFycmF5cyBhcmUgbm90IHN1cHBvcnRlZC5cblxuICBTbGF0ZSBvYmplY3RzIGFyZSBkZXNpZ25lZCB0byBiZSBzZXJpYWxpc2VkLCBzb1xuICBtaXNzaW5nIGtleXMgYXJlIGRlbGliZXJhdGVseSBub3JtYWxpc2VkIHRvIHVuZGVmaW5lZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzRGVlcEVxdWFsID0gKFxuICBub2RlOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICBhbm90aGVyOiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4pOiBib29sZWFuID0+IHtcbiAgZm9yIChjb25zdCBrZXkgaW4gbm9kZSkge1xuICAgIGNvbnN0IGEgPSBub2RlW2tleV1cbiAgICBjb25zdCBiID0gYW5vdGhlcltrZXldXG4gICAgaWYgKGlzUGxhaW5PYmplY3QoYSkgJiYgaXNQbGFpbk9iamVjdChiKSkge1xuICAgICAgaWYgKCFpc0RlZXBFcXVhbChhLCBiKSkgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGEpICYmIEFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhW2ldICE9PSBiW2ldKSByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGEgIT09IGIpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAgRGVlcCBvYmplY3QgZXF1YWxpdHkgaXMgb25seSBuZWNlc3NhcnkgaW4gb25lIGRpcmVjdGlvbjsgaW4gdGhlIHJldmVyc2UgZGlyZWN0aW9uXG4gICAgd2UgYXJlIG9ubHkgbG9va2luZyBmb3Iga2V5cyB0aGF0IGFyZSBtaXNzaW5nLlxuICAgIEFzIGFib3ZlLCB1bmRlZmluZWQga2V5cyBhcmUgbm9ybWFsaXNlZCB0byBtaXNzaW5nLlxuICAqL1xuXG4gIGZvciAoY29uc3Qga2V5IGluIGFub3RoZXIpIHtcbiAgICBpZiAobm9kZVtrZXldID09PSB1bmRlZmluZWQgJiYgYW5vdGhlcltrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gIHZhciBrZXksIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn0iLCAiaW1wb3J0IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIi4vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSBvYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpO1xuICB2YXIga2V5LCBpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldO1xuICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufSIsICJpbXBvcnQgeyBwcm9kdWNlIH0gZnJvbSAnaW1tZXInXG5pbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnaXMtcGxhaW4tb2JqZWN0J1xuaW1wb3J0IHsgRXh0ZW5kZWRUeXBlLCBPcGVyYXRpb24sIFBhdGgsIFBvaW50LCBQb2ludEVudHJ5IH0gZnJvbSAnLi4nXG5pbXBvcnQgeyBSYW5nZURpcmVjdGlvbiB9IGZyb20gJy4uL3R5cGVzL3R5cGVzJ1xuXG4vKipcbiAqIGBSYW5nZWAgb2JqZWN0cyBhcmUgYSBzZXQgb2YgcG9pbnRzIHRoYXQgcmVmZXIgdG8gYSBzcGVjaWZpYyBzcGFuIG9mIGEgU2xhdGVcbiAqIGRvY3VtZW50LiBUaGV5IGNhbiBkZWZpbmUgYSBzcGFuIGluc2lkZSBhIHNpbmdsZSBub2RlIG9yIGEgY2FuIHNwYW4gYWNyb3NzXG4gKiBtdWx0aXBsZSBub2Rlcy5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VSYW5nZSB7XG4gIGFuY2hvcjogUG9pbnRcbiAgZm9jdXM6IFBvaW50XG59XG5cbmV4cG9ydCB0eXBlIFJhbmdlID0gRXh0ZW5kZWRUeXBlPCdSYW5nZScsIEJhc2VSYW5nZT5cblxuZXhwb3J0IGludGVyZmFjZSBSYW5nZUVkZ2VzT3B0aW9ucyB7XG4gIHJldmVyc2U/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmFuZ2VUcmFuc2Zvcm1PcHRpb25zIHtcbiAgYWZmaW5pdHk/OiBSYW5nZURpcmVjdGlvbiB8IG51bGxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYW5nZUludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0YXJ0IGFuZCBlbmQgcG9pbnRzIG9mIGEgcmFuZ2UsIGluIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IGFwcGVhclxuICAgKiBpbiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBlZGdlczogKHJhbmdlOiBSYW5nZSwgb3B0aW9ucz86IFJhbmdlRWRnZXNPcHRpb25zKSA9PiBbUG9pbnQsIFBvaW50XVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGVuZCBwb2ludCBvZiBhIHJhbmdlLlxuICAgKi9cbiAgZW5kOiAocmFuZ2U6IFJhbmdlKSA9PiBQb2ludFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHJhbmdlIGlzIGV4YWN0bHkgZXF1YWwgdG8gYW5vdGhlci5cbiAgICovXG4gIGVxdWFsczogKHJhbmdlOiBSYW5nZSwgYW5vdGhlcjogUmFuZ2UpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSByYW5nZSBpbmNsdWRlcyBhIHBhdGgsIGEgcG9pbnQgb3IgcGFydCBvZiBhbm90aGVyIHJhbmdlLlxuICAgKi9cbiAgaW5jbHVkZXM6IChyYW5nZTogUmFuZ2UsIHRhcmdldDogUGF0aCB8IFBvaW50IHwgUmFuZ2UpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogR2V0IHRoZSBpbnRlcnNlY3Rpb24gb2YgYSByYW5nZSB3aXRoIGFub3RoZXIuXG4gICAqL1xuICBpbnRlcnNlY3Rpb246IChyYW5nZTogUmFuZ2UsIGFub3RoZXI6IFJhbmdlKSA9PiBSYW5nZSB8IG51bGxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSByYW5nZSBpcyBiYWNrd2FyZCwgbWVhbmluZyB0aGF0IGl0cyBhbmNob3IgcG9pbnQgYXBwZWFycyBpbiB0aGVcbiAgICogZG9jdW1lbnQgX2FmdGVyXyBpdHMgZm9jdXMgcG9pbnQuXG4gICAqL1xuICBpc0JhY2t3YXJkOiAocmFuZ2U6IFJhbmdlKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcmFuZ2UgaXMgY29sbGFwc2VkLCBtZWFuaW5nIHRoYXQgYm90aCBpdHMgYW5jaG9yIGFuZCBmb2N1c1xuICAgKiBwb2ludHMgcmVmZXIgdG8gdGhlIGV4YWN0IHNhbWUgcG9zaXRpb24gaW4gdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgaXNDb2xsYXBzZWQ6IChyYW5nZTogUmFuZ2UpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSByYW5nZSBpcyBleHBhbmRlZC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgb3Bwb3NpdGUgb2YgW1tSYW5nZS5pc0NvbGxhcHNlZF1dIGFuZCBpcyBwcm92aWRlZCBmb3IgbGVnaWJpbGl0eS5cbiAgICovXG4gIGlzRXhwYW5kZWQ6IChyYW5nZTogUmFuZ2UpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSByYW5nZSBpcyBmb3J3YXJkLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBvcHBvc2l0ZSBvZiBbW1JhbmdlLmlzQmFja3dhcmRdXSBhbmQgaXMgcHJvdmlkZWQgZm9yIGxlZ2liaWxpdHkuXG4gICAqL1xuICBpc0ZvcndhcmQ6IChyYW5nZTogUmFuZ2UpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpbXBsZW1lbnRzIHRoZSBbW1JhbmdlXV0gaW50ZXJmYWNlLlxuICAgKi9cbiAgaXNSYW5nZTogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIFJhbmdlXG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgdGhyb3VnaCBhbGwgb2YgdGhlIHBvaW50IGVudHJpZXMgaW4gYSByYW5nZS5cbiAgICovXG4gIHBvaW50czogKHJhbmdlOiBSYW5nZSkgPT4gR2VuZXJhdG9yPFBvaW50RW50cnksIHZvaWQsIHVuZGVmaW5lZD5cblxuICAvKipcbiAgICogR2V0IHRoZSBzdGFydCBwb2ludCBvZiBhIHJhbmdlLlxuICAgKi9cbiAgc3RhcnQ6IChyYW5nZTogUmFuZ2UpID0+IFBvaW50XG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybSBhIHJhbmdlIGJ5IGFuIG9wZXJhdGlvbi5cbiAgICovXG4gIHRyYW5zZm9ybTogKFxuICAgIHJhbmdlOiBSYW5nZSxcbiAgICBvcDogT3BlcmF0aW9uLFxuICAgIG9wdGlvbnM/OiBSYW5nZVRyYW5zZm9ybU9wdGlvbnNcbiAgKSA9PiBSYW5nZSB8IG51bGxcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFJhbmdlOiBSYW5nZUludGVyZmFjZSA9IHtcbiAgZWRnZXMocmFuZ2U6IFJhbmdlLCBvcHRpb25zOiBSYW5nZUVkZ2VzT3B0aW9ucyA9IHt9KTogW1BvaW50LCBQb2ludF0ge1xuICAgIGNvbnN0IHsgcmV2ZXJzZSA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgY29uc3QgeyBhbmNob3IsIGZvY3VzIH0gPSByYW5nZVxuICAgIHJldHVybiBSYW5nZS5pc0JhY2t3YXJkKHJhbmdlKSA9PT0gcmV2ZXJzZVxuICAgICAgPyBbYW5jaG9yLCBmb2N1c11cbiAgICAgIDogW2ZvY3VzLCBhbmNob3JdXG4gIH0sXG5cbiAgZW5kKHJhbmdlOiBSYW5nZSk6IFBvaW50IHtcbiAgICBjb25zdCBbLCBlbmRdID0gUmFuZ2UuZWRnZXMocmFuZ2UpXG4gICAgcmV0dXJuIGVuZFxuICB9LFxuXG4gIGVxdWFscyhyYW5nZTogUmFuZ2UsIGFub3RoZXI6IFJhbmdlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIFBvaW50LmVxdWFscyhyYW5nZS5hbmNob3IsIGFub3RoZXIuYW5jaG9yKSAmJlxuICAgICAgUG9pbnQuZXF1YWxzKHJhbmdlLmZvY3VzLCBhbm90aGVyLmZvY3VzKVxuICAgIClcbiAgfSxcblxuICBpbmNsdWRlcyhyYW5nZTogUmFuZ2UsIHRhcmdldDogUGF0aCB8IFBvaW50IHwgUmFuZ2UpOiBib29sZWFuIHtcbiAgICBpZiAoUmFuZ2UuaXNSYW5nZSh0YXJnZXQpKSB7XG4gICAgICBpZiAoXG4gICAgICAgIFJhbmdlLmluY2x1ZGVzKHJhbmdlLCB0YXJnZXQuYW5jaG9yKSB8fFxuICAgICAgICBSYW5nZS5pbmNsdWRlcyhyYW5nZSwgdGFyZ2V0LmZvY3VzKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFtycywgcmVdID0gUmFuZ2UuZWRnZXMocmFuZ2UpXG4gICAgICBjb25zdCBbdHMsIHRlXSA9IFJhbmdlLmVkZ2VzKHRhcmdldClcbiAgICAgIHJldHVybiBQb2ludC5pc0JlZm9yZShycywgdHMpICYmIFBvaW50LmlzQWZ0ZXIocmUsIHRlKVxuICAgIH1cblxuICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKHJhbmdlKVxuICAgIGxldCBpc0FmdGVyU3RhcnQgPSBmYWxzZVxuICAgIGxldCBpc0JlZm9yZUVuZCA9IGZhbHNlXG5cbiAgICBpZiAoUG9pbnQuaXNQb2ludCh0YXJnZXQpKSB7XG4gICAgICBpc0FmdGVyU3RhcnQgPSBQb2ludC5jb21wYXJlKHRhcmdldCwgc3RhcnQpID49IDBcbiAgICAgIGlzQmVmb3JlRW5kID0gUG9pbnQuY29tcGFyZSh0YXJnZXQsIGVuZCkgPD0gMFxuICAgIH0gZWxzZSB7XG4gICAgICBpc0FmdGVyU3RhcnQgPSBQYXRoLmNvbXBhcmUodGFyZ2V0LCBzdGFydC5wYXRoKSA+PSAwXG4gICAgICBpc0JlZm9yZUVuZCA9IFBhdGguY29tcGFyZSh0YXJnZXQsIGVuZC5wYXRoKSA8PSAwXG4gICAgfVxuXG4gICAgcmV0dXJuIGlzQWZ0ZXJTdGFydCAmJiBpc0JlZm9yZUVuZFxuICB9LFxuXG4gIGludGVyc2VjdGlvbihyYW5nZTogUmFuZ2UsIGFub3RoZXI6IFJhbmdlKTogUmFuZ2UgfCBudWxsIHtcbiAgICBjb25zdCB7IGFuY2hvciwgZm9jdXMsIC4uLnJlc3QgfSA9IHJhbmdlXG4gICAgY29uc3QgW3MxLCBlMV0gPSBSYW5nZS5lZGdlcyhyYW5nZSlcbiAgICBjb25zdCBbczIsIGUyXSA9IFJhbmdlLmVkZ2VzKGFub3RoZXIpXG4gICAgY29uc3Qgc3RhcnQgPSBQb2ludC5pc0JlZm9yZShzMSwgczIpID8gczIgOiBzMVxuICAgIGNvbnN0IGVuZCA9IFBvaW50LmlzQmVmb3JlKGUxLCBlMikgPyBlMSA6IGUyXG5cbiAgICBpZiAoUG9pbnQuaXNCZWZvcmUoZW5kLCBzdGFydCkpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7IGFuY2hvcjogc3RhcnQsIGZvY3VzOiBlbmQsIC4uLnJlc3QgfVxuICAgIH1cbiAgfSxcblxuICBpc0JhY2t3YXJkKHJhbmdlOiBSYW5nZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgYW5jaG9yLCBmb2N1cyB9ID0gcmFuZ2VcbiAgICByZXR1cm4gUG9pbnQuaXNBZnRlcihhbmNob3IsIGZvY3VzKVxuICB9LFxuXG4gIGlzQ29sbGFwc2VkKHJhbmdlOiBSYW5nZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgYW5jaG9yLCBmb2N1cyB9ID0gcmFuZ2VcbiAgICByZXR1cm4gUG9pbnQuZXF1YWxzKGFuY2hvciwgZm9jdXMpXG4gIH0sXG5cbiAgaXNFeHBhbmRlZChyYW5nZTogUmFuZ2UpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIVJhbmdlLmlzQ29sbGFwc2VkKHJhbmdlKVxuICB9LFxuXG4gIGlzRm9yd2FyZChyYW5nZTogUmFuZ2UpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIVJhbmdlLmlzQmFja3dhcmQocmFuZ2UpXG4gIH0sXG5cbiAgaXNSYW5nZSh2YWx1ZTogYW55KTogdmFsdWUgaXMgUmFuZ2Uge1xuICAgIHJldHVybiAoXG4gICAgICBpc1BsYWluT2JqZWN0KHZhbHVlKSAmJlxuICAgICAgUG9pbnQuaXNQb2ludCh2YWx1ZS5hbmNob3IpICYmXG4gICAgICBQb2ludC5pc1BvaW50KHZhbHVlLmZvY3VzKVxuICAgIClcbiAgfSxcblxuICAqcG9pbnRzKHJhbmdlOiBSYW5nZSk6IEdlbmVyYXRvcjxQb2ludEVudHJ5LCB2b2lkLCB1bmRlZmluZWQ+IHtcbiAgICB5aWVsZCBbcmFuZ2UuYW5jaG9yLCAnYW5jaG9yJ11cbiAgICB5aWVsZCBbcmFuZ2UuZm9jdXMsICdmb2N1cyddXG4gIH0sXG5cbiAgc3RhcnQocmFuZ2U6IFJhbmdlKTogUG9pbnQge1xuICAgIGNvbnN0IFtzdGFydF0gPSBSYW5nZS5lZGdlcyhyYW5nZSlcbiAgICByZXR1cm4gc3RhcnRcbiAgfSxcblxuICB0cmFuc2Zvcm0oXG4gICAgcmFuZ2U6IFJhbmdlIHwgbnVsbCxcbiAgICBvcDogT3BlcmF0aW9uLFxuICAgIG9wdGlvbnM6IFJhbmdlVHJhbnNmb3JtT3B0aW9ucyA9IHt9XG4gICk6IFJhbmdlIHwgbnVsbCB7XG4gICAgcmV0dXJuIHByb2R1Y2UocmFuZ2UsIHIgPT4ge1xuICAgICAgaWYgKHIgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgYWZmaW5pdHkgPSAnaW53YXJkJyB9ID0gb3B0aW9uc1xuICAgICAgbGV0IGFmZmluaXR5QW5jaG9yOiAnZm9yd2FyZCcgfCAnYmFja3dhcmQnIHwgbnVsbFxuICAgICAgbGV0IGFmZmluaXR5Rm9jdXM6ICdmb3J3YXJkJyB8ICdiYWNrd2FyZCcgfCBudWxsXG5cbiAgICAgIGlmIChhZmZpbml0eSA9PT0gJ2lud2FyZCcpIHtcbiAgICAgICAgLy8gSWYgdGhlIHJhbmdlIGlzIGNvbGxhcHNlZCwgbWFrZSBzdXJlIHRvIHVzZSB0aGUgc2FtZSBhZmZpbml0eSB0b1xuICAgICAgICAvLyBhdm9pZCB0aGUgdHdvIHBvaW50cyBwYXNzaW5nIGVhY2ggb3RoZXIgYW5kIGV4cGFuZGluZyBpbiB0aGUgb3Bwb3NpdGVcbiAgICAgICAgLy8gZGlyZWN0aW9uXG4gICAgICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gUmFuZ2UuaXNDb2xsYXBzZWQocilcbiAgICAgICAgaWYgKFJhbmdlLmlzRm9yd2FyZChyKSkge1xuICAgICAgICAgIGFmZmluaXR5QW5jaG9yID0gJ2ZvcndhcmQnXG4gICAgICAgICAgYWZmaW5pdHlGb2N1cyA9IGlzQ29sbGFwc2VkID8gYWZmaW5pdHlBbmNob3IgOiAnYmFja3dhcmQnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWZmaW5pdHlBbmNob3IgPSAnYmFja3dhcmQnXG4gICAgICAgICAgYWZmaW5pdHlGb2N1cyA9IGlzQ29sbGFwc2VkID8gYWZmaW5pdHlBbmNob3IgOiAnZm9yd2FyZCdcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhZmZpbml0eSA9PT0gJ291dHdhcmQnKSB7XG4gICAgICAgIGlmIChSYW5nZS5pc0ZvcndhcmQocikpIHtcbiAgICAgICAgICBhZmZpbml0eUFuY2hvciA9ICdiYWNrd2FyZCdcbiAgICAgICAgICBhZmZpbml0eUZvY3VzID0gJ2ZvcndhcmQnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWZmaW5pdHlBbmNob3IgPSAnZm9yd2FyZCdcbiAgICAgICAgICBhZmZpbml0eUZvY3VzID0gJ2JhY2t3YXJkJ1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZmZpbml0eUFuY2hvciA9IGFmZmluaXR5XG4gICAgICAgIGFmZmluaXR5Rm9jdXMgPSBhZmZpbml0eVxuICAgICAgfVxuICAgICAgY29uc3QgYW5jaG9yID0gUG9pbnQudHJhbnNmb3JtKHIuYW5jaG9yLCBvcCwgeyBhZmZpbml0eTogYWZmaW5pdHlBbmNob3IgfSlcbiAgICAgIGNvbnN0IGZvY3VzID0gUG9pbnQudHJhbnNmb3JtKHIuZm9jdXMsIG9wLCB7IGFmZmluaXR5OiBhZmZpbml0eUZvY3VzIH0pXG5cbiAgICAgIGlmICghYW5jaG9yIHx8ICFmb2N1cykge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuXG4gICAgICByLmFuY2hvciA9IGFuY2hvclxuICAgICAgci5mb2N1cyA9IGZvY3VzXG4gICAgfSlcbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnaXMtcGxhaW4tb2JqZWN0J1xuaW1wb3J0IHsgQW5jZXN0b3IsIERlc2NlbmRhbnQsIEVkaXRvciwgRXh0ZW5kZWRUeXBlLCBOb2RlLCBQYXRoIH0gZnJvbSAnLi4nXG5cbi8qKlxuICogYEVsZW1lbnRgIG9iamVjdHMgYXJlIGEgdHlwZSBvZiBub2RlIGluIGEgU2xhdGUgZG9jdW1lbnQgdGhhdCBjb250YWluIG90aGVyXG4gKiBlbGVtZW50IG5vZGVzIG9yIHRleHQgbm9kZXMuIFRoZXkgY2FuIGJlIGVpdGhlciBcImJsb2Nrc1wiIG9yIFwiaW5saW5lc1wiXG4gKiBkZXBlbmRpbmcgb24gdGhlIFNsYXRlIGVkaXRvcidzIGNvbmZpZ3VyYXRpb24uXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBCYXNlRWxlbWVudCB7XG4gIGNoaWxkcmVuOiBEZXNjZW5kYW50W11cbn1cblxuZXhwb3J0IHR5cGUgRWxlbWVudCA9IEV4dGVuZGVkVHlwZTwnRWxlbWVudCcsIEJhc2VFbGVtZW50PlxuXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRJbnRlcmZhY2Uge1xuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpbXBsZW1lbnRzIHRoZSAnQW5jZXN0b3InIGludGVyZmFjZS5cbiAgICovXG4gIGlzQW5jZXN0b3I6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBBbmNlc3RvclxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGltcGxlbWVudHMgdGhlIGBFbGVtZW50YCBpbnRlcmZhY2UuXG4gICAqL1xuICBpc0VsZW1lbnQ6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBFbGVtZW50XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYW4gYXJyYXkgb2YgYEVsZW1lbnRgIG9iamVjdHMuXG4gICAqL1xuICBpc0VsZW1lbnRMaXN0OiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgRWxlbWVudFtdXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgc2V0IG9mIHByb3BzIGlzIGEgcGFydGlhbCBvZiBFbGVtZW50LlxuICAgKi9cbiAgaXNFbGVtZW50UHJvcHM6IChwcm9wczogYW55KSA9PiBwcm9wcyBpcyBQYXJ0aWFsPEVsZW1lbnQ+XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaW1wbGVtZW50cyB0aGUgYEVsZW1lbnRgIGludGVyZmFjZSBhbmQgaGFzIGVsZW1lbnRLZXkgd2l0aCBzZWxlY3RlZCB2YWx1ZS5cbiAgICogRGVmYXVsdCBpdCBjaGVjayB0byBgdHlwZWAga2V5IHZhbHVlXG4gICAqL1xuICBpc0VsZW1lbnRUeXBlOiA8VCBleHRlbmRzIEVsZW1lbnQ+KFxuICAgIHZhbHVlOiBhbnksXG4gICAgZWxlbWVudFZhbDogc3RyaW5nLFxuICAgIGVsZW1lbnRLZXk/OiBzdHJpbmdcbiAgKSA9PiB2YWx1ZSBpcyBUXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGVsZW1lbnQgbWF0Y2hlcyBzZXQgb2YgcHJvcGVydGllcy5cbiAgICpcbiAgICogTm90ZTogdGhpcyBjaGVja3MgY3VzdG9tIHByb3BlcnRpZXMsIGFuZCBpdCBkb2VzIG5vdCBlbnN1cmUgdGhhdCBhbnlcbiAgICogY2hpbGRyZW4gYXJlIGVxdWl2YWxlbnQuXG4gICAqL1xuICBtYXRjaGVzOiAoZWxlbWVudDogRWxlbWVudCwgcHJvcHM6IFBhcnRpYWw8RWxlbWVudD4pID0+IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBTaGFyZWQgdGhlIGZ1bmN0aW9uIHdpdGggaXNFbGVtZW50VHlwZSB1dGlsaXR5XG4gKi9cbmNvbnN0IGlzRWxlbWVudCA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgRWxlbWVudCA9PiB7XG4gIHJldHVybiAoXG4gICAgaXNQbGFpbk9iamVjdCh2YWx1ZSkgJiZcbiAgICBOb2RlLmlzTm9kZUxpc3QodmFsdWUuY2hpbGRyZW4pICYmXG4gICAgIUVkaXRvci5pc0VkaXRvcih2YWx1ZSlcbiAgKVxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgRWxlbWVudDogRWxlbWVudEludGVyZmFjZSA9IHtcbiAgaXNBbmNlc3Rvcih2YWx1ZTogYW55KTogdmFsdWUgaXMgQW5jZXN0b3Ige1xuICAgIHJldHVybiBpc1BsYWluT2JqZWN0KHZhbHVlKSAmJiBOb2RlLmlzTm9kZUxpc3QodmFsdWUuY2hpbGRyZW4pXG4gIH0sXG5cbiAgaXNFbGVtZW50LFxuXG4gIGlzRWxlbWVudExpc3QodmFsdWU6IGFueSk6IHZhbHVlIGlzIEVsZW1lbnRbXSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmV2ZXJ5KHZhbCA9PiBFbGVtZW50LmlzRWxlbWVudCh2YWwpKVxuICB9LFxuXG4gIGlzRWxlbWVudFByb3BzKHByb3BzOiBhbnkpOiBwcm9wcyBpcyBQYXJ0aWFsPEVsZW1lbnQ+IHtcbiAgICByZXR1cm4gKHByb3BzIGFzIFBhcnRpYWw8RWxlbWVudD4pLmNoaWxkcmVuICE9PSB1bmRlZmluZWRcbiAgfSxcblxuICBpc0VsZW1lbnRUeXBlOiA8VCBleHRlbmRzIEVsZW1lbnQ+KFxuICAgIHZhbHVlOiBhbnksXG4gICAgZWxlbWVudFZhbDogc3RyaW5nLFxuICAgIGVsZW1lbnRLZXk6IHN0cmluZyA9ICd0eXBlJ1xuICApOiB2YWx1ZSBpcyBUID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgaXNFbGVtZW50KHZhbHVlKSAmJiB2YWx1ZVs8a2V5b2YgRGVzY2VuZGFudD5lbGVtZW50S2V5XSA9PT0gZWxlbWVudFZhbFxuICAgIClcbiAgfSxcblxuICBtYXRjaGVzKGVsZW1lbnQ6IEVsZW1lbnQsIHByb3BzOiBQYXJ0aWFsPEVsZW1lbnQ+KTogYm9vbGVhbiB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgIGlmIChrZXkgPT09ICdjaGlsZHJlbicpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKGVsZW1lbnRbPGtleW9mIERlc2NlbmRhbnQ+a2V5XSAhPT0gcHJvcHNbPGtleW9mIERlc2NlbmRhbnQ+a2V5XSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9LFxufVxuXG4vKipcbiAqIGBFbGVtZW50RW50cnlgIG9iamVjdHMgcmVmZXIgdG8gYW4gYEVsZW1lbnRgIGFuZCB0aGUgYFBhdGhgIHdoZXJlIGl0IGNhbiBiZVxuICogZm91bmQgaW5zaWRlIGEgcm9vdCBub2RlLlxuICovXG5leHBvcnQgdHlwZSBFbGVtZW50RW50cnkgPSBbRWxlbWVudCwgUGF0aF1cbiIsICJpbXBvcnQgeyBwcm9kdWNlIH0gZnJvbSAnaW1tZXInXG5pbXBvcnQgeyBFZGl0b3IsIFBhdGgsIFJhbmdlLCBTY3J1YmJlciwgVGV4dCB9IGZyb20gJy4uJ1xuaW1wb3J0IHsgRWxlbWVudCwgRWxlbWVudEVudHJ5IH0gZnJvbSAnLi9lbGVtZW50J1xuXG4vKipcbiAqIFRoZSBgTm9kZWAgdW5pb24gdHlwZSByZXByZXNlbnRzIGFsbCBvZiB0aGUgZGlmZmVyZW50IHR5cGVzIG9mIG5vZGVzIHRoYXRcbiAqIG9jY3VyIGluIGEgU2xhdGUgZG9jdW1lbnQgdHJlZS5cbiAqL1xuXG5leHBvcnQgdHlwZSBCYXNlTm9kZSA9IEVkaXRvciB8IEVsZW1lbnQgfCBUZXh0XG5leHBvcnQgdHlwZSBOb2RlID0gRWRpdG9yIHwgRWxlbWVudCB8IFRleHRcblxuZXhwb3J0IGludGVyZmFjZSBOb2RlQW5jZXN0b3JzT3B0aW9ucyB7XG4gIHJldmVyc2U/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZUNoaWxkcmVuT3B0aW9ucyB7XG4gIHJldmVyc2U/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZURlc2NlbmRhbnRzT3B0aW9ucyB7XG4gIGZyb20/OiBQYXRoXG4gIHRvPzogUGF0aFxuICByZXZlcnNlPzogYm9vbGVhblxuICBwYXNzPzogKG5vZGU6IE5vZGVFbnRyeSkgPT4gYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVFbGVtZW50c09wdGlvbnMge1xuICBmcm9tPzogUGF0aFxuICB0bz86IFBhdGhcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbiAgcGFzcz86IChub2RlOiBOb2RlRW50cnkpID0+IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb2RlTGV2ZWxzT3B0aW9ucyB7XG4gIHJldmVyc2U/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZU5vZGVzT3B0aW9ucyB7XG4gIGZyb20/OiBQYXRoXG4gIHRvPzogUGF0aFxuICByZXZlcnNlPzogYm9vbGVhblxuICBwYXNzPzogKGVudHJ5OiBOb2RlRW50cnkpID0+IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb2RlVGV4dHNPcHRpb25zIHtcbiAgZnJvbT86IFBhdGhcbiAgdG8/OiBQYXRoXG4gIHJldmVyc2U/OiBib29sZWFuXG4gIHBhc3M/OiAobm9kZTogTm9kZUVudHJ5KSA9PiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZUludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBHZXQgdGhlIG5vZGUgYXQgYSBzcGVjaWZpYyBwYXRoLCBhc3NlcnRpbmcgdGhhdCBpdCdzIGFuIGFuY2VzdG9yIG5vZGUuXG4gICAqL1xuICBhbmNlc3RvcjogKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpID0+IEFuY2VzdG9yXG5cbiAgLyoqXG4gICAqIFJldHVybiBhIGdlbmVyYXRvciBvZiBhbGwgdGhlIGFuY2VzdG9yIG5vZGVzIGFib3ZlIGEgc3BlY2lmaWMgcGF0aC5cbiAgICpcbiAgICogQnkgZGVmYXVsdCB0aGUgb3JkZXIgaXMgdG9wLWRvd24sIGZyb20gaGlnaGVzdCB0byBsb3dlc3QgYW5jZXN0b3IgaW5cbiAgICogdGhlIHRyZWUsIGJ1dCB5b3UgY2FuIHBhc3MgdGhlIGByZXZlcnNlOiB0cnVlYCBvcHRpb24gdG8gZ28gYm90dG9tLXVwLlxuICAgKi9cbiAgYW5jZXN0b3JzOiAoXG4gICAgcm9vdDogTm9kZSxcbiAgICBwYXRoOiBQYXRoLFxuICAgIG9wdGlvbnM/OiBOb2RlQW5jZXN0b3JzT3B0aW9uc1xuICApID0+IEdlbmVyYXRvcjxOb2RlRW50cnk8QW5jZXN0b3I+LCB2b2lkLCB1bmRlZmluZWQ+XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY2hpbGQgb2YgYSBub2RlIGF0IGEgc3BlY2lmaWMgaW5kZXguXG4gICAqL1xuICBjaGlsZDogKHJvb3Q6IE5vZGUsIGluZGV4OiBudW1iZXIpID0+IERlc2NlbmRhbnRcblxuICAvKipcbiAgICogSXRlcmF0ZSBvdmVyIHRoZSBjaGlsZHJlbiBvZiBhIG5vZGUgYXQgYSBzcGVjaWZpYyBwYXRoLlxuICAgKi9cbiAgY2hpbGRyZW46IChcbiAgICByb290OiBOb2RlLFxuICAgIHBhdGg6IFBhdGgsXG4gICAgb3B0aW9ucz86IE5vZGVDaGlsZHJlbk9wdGlvbnNcbiAgKSA9PiBHZW5lcmF0b3I8Tm9kZUVudHJ5PERlc2NlbmRhbnQ+LCB2b2lkLCB1bmRlZmluZWQ+XG5cbiAgLyoqXG4gICAqIEdldCBhbiBlbnRyeSBmb3IgdGhlIGNvbW1vbiBhbmNlc2V0b3Igbm9kZSBvZiB0d28gcGF0aHMuXG4gICAqL1xuICBjb21tb246IChyb290OiBOb2RlLCBwYXRoOiBQYXRoLCBhbm90aGVyOiBQYXRoKSA9PiBOb2RlRW50cnlcblxuICAvKipcbiAgICogR2V0IHRoZSBub2RlIGF0IGEgc3BlY2lmaWMgcGF0aCwgYXNzZXJ0aW5nIHRoYXQgaXQncyBhIGRlc2NlbmRhbnQgbm9kZS5cbiAgICovXG4gIGRlc2NlbmRhbnQ6IChyb290OiBOb2RlLCBwYXRoOiBQYXRoKSA9PiBEZXNjZW5kYW50XG5cbiAgLyoqXG4gICAqIFJldHVybiBhIGdlbmVyYXRvciBvZiBhbGwgdGhlIGRlc2NlbmRhbnQgbm9kZSBlbnRyaWVzIGluc2lkZSBhIHJvb3Qgbm9kZS5cbiAgICovXG4gIGRlc2NlbmRhbnRzOiAoXG4gICAgcm9vdDogTm9kZSxcbiAgICBvcHRpb25zPzogTm9kZURlc2NlbmRhbnRzT3B0aW9uc1xuICApID0+IEdlbmVyYXRvcjxOb2RlRW50cnk8RGVzY2VuZGFudD4sIHZvaWQsIHVuZGVmaW5lZD5cblxuICAvKipcbiAgICogUmV0dXJuIGEgZ2VuZXJhdG9yIG9mIGFsbCB0aGUgZWxlbWVudCBub2RlcyBpbnNpZGUgYSByb290IG5vZGUuIEVhY2ggaXRlcmF0aW9uXG4gICAqIHdpbGwgcmV0dXJuIGFuIGBFbGVtZW50RW50cnlgIHR1cGxlIGNvbnNpc3Rpbmcgb2YgYFtFbGVtZW50LCBQYXRoXWAuIElmIHRoZVxuICAgKiByb290IG5vZGUgaXMgYW4gZWxlbWVudCBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBpdGVyYXRpb24gYXMgd2VsbC5cbiAgICovXG4gIGVsZW1lbnRzOiAoXG4gICAgcm9vdDogTm9kZSxcbiAgICBvcHRpb25zPzogTm9kZUVsZW1lbnRzT3B0aW9uc1xuICApID0+IEdlbmVyYXRvcjxFbGVtZW50RW50cnksIHZvaWQsIHVuZGVmaW5lZD5cblxuICAvKipcbiAgICogRXh0cmFjdCBwcm9wcyBmcm9tIGEgTm9kZS5cbiAgICovXG4gIGV4dHJhY3RQcm9wczogKG5vZGU6IE5vZGUpID0+IE5vZGVQcm9wc1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGZpcnN0IG5vZGUgZW50cnkgaW4gYSByb290IG5vZGUgZnJvbSBhIHBhdGguXG4gICAqL1xuICBmaXJzdDogKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpID0+IE5vZGVFbnRyeVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNsaWNlZCBmcmFnbWVudCByZXByZXNlbnRlZCBieSBhIHJhbmdlIGluc2lkZSBhIHJvb3Qgbm9kZS5cbiAgICovXG4gIGZyYWdtZW50OiAocm9vdDogTm9kZSwgcmFuZ2U6IFJhbmdlKSA9PiBEZXNjZW5kYW50W11cblxuICAvKipcbiAgICogR2V0IHRoZSBkZXNjZW5kYW50IG5vZGUgcmVmZXJyZWQgdG8gYnkgYSBzcGVjaWZpYyBwYXRoLiBJZiB0aGUgcGF0aCBpcyBhblxuICAgKiBlbXB0eSBhcnJheSwgaXQgcmVmZXJzIHRvIHRoZSByb290IG5vZGUgaXRzZWxmLlxuICAgKi9cbiAgZ2V0OiAocm9vdDogTm9kZSwgcGF0aDogUGF0aCkgPT4gTm9kZVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGRlc2NlbmRhbnQgbm9kZSBleGlzdHMgYXQgYSBzcGVjaWZpYyBwYXRoLlxuICAgKi9cbiAgaGFzOiAocm9vdDogTm9kZSwgcGF0aDogUGF0aCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGltcGxlbWVudHMgdGhlIGBOb2RlYCBpbnRlcmZhY2UuXG4gICAqL1xuICBpc05vZGU6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBOb2RlXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBsaXN0IG9mIGBOb2RlYCBvYmplY3RzLlxuICAgKi9cbiAgaXNOb2RlTGlzdDogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIE5vZGVbXVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxhc3Qgbm9kZSBlbnRyeSBpbiBhIHJvb3Qgbm9kZSBmcm9tIGEgcGF0aC5cbiAgICovXG4gIGxhc3Q6IChyb290OiBOb2RlLCBwYXRoOiBQYXRoKSA9PiBOb2RlRW50cnlcblxuICAvKipcbiAgICogR2V0IHRoZSBub2RlIGF0IGEgc3BlY2lmaWMgcGF0aCwgZW5zdXJpbmcgaXQncyBhIGxlYWYgdGV4dCBub2RlLlxuICAgKi9cbiAgbGVhZjogKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpID0+IFRleHRcblxuICAvKipcbiAgICogUmV0dXJuIGEgZ2VuZXJhdG9yIG9mIHRoZSBpbiBhIGJyYW5jaCBvZiB0aGUgdHJlZSwgZnJvbSBhIHNwZWNpZmljIHBhdGguXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQgdGhlIG9yZGVyIGlzIHRvcC1kb3duLCBmcm9tIGhpZ2hlc3QgdG8gbG93ZXN0IG5vZGUgaW4gdGhlIHRyZWUsXG4gICAqIGJ1dCB5b3UgY2FuIHBhc3MgdGhlIGByZXZlcnNlOiB0cnVlYCBvcHRpb24gdG8gZ28gYm90dG9tLXVwLlxuICAgKi9cbiAgbGV2ZWxzOiAoXG4gICAgcm9vdDogTm9kZSxcbiAgICBwYXRoOiBQYXRoLFxuICAgIG9wdGlvbnM/OiBOb2RlTGV2ZWxzT3B0aW9uc1xuICApID0+IEdlbmVyYXRvcjxOb2RlRW50cnksIHZvaWQsIHVuZGVmaW5lZD5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBub2RlIG1hdGNoZXMgYSBzZXQgb2YgcHJvcHMuXG4gICAqL1xuICBtYXRjaGVzOiAobm9kZTogTm9kZSwgcHJvcHM6IFBhcnRpYWw8Tm9kZT4pID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogUmV0dXJuIGEgZ2VuZXJhdG9yIG9mIGFsbCB0aGUgbm9kZSBlbnRyaWVzIG9mIGEgcm9vdCBub2RlLiBFYWNoIGVudHJ5IGlzXG4gICAqIHJldHVybmVkIGFzIGEgYFtOb2RlLCBQYXRoXWAgdHVwbGUsIHdpdGggdGhlIHBhdGggcmVmZXJyaW5nIHRvIHRoZSBub2RlJ3NcbiAgICogcG9zaXRpb24gaW5zaWRlIHRoZSByb290IG5vZGUuXG4gICAqL1xuICBub2RlczogKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgb3B0aW9ucz86IE5vZGVOb2Rlc09wdGlvbnNcbiAgKSA9PiBHZW5lcmF0b3I8Tm9kZUVudHJ5LCB2b2lkLCB1bmRlZmluZWQ+XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcGFyZW50IG9mIGEgbm9kZSBhdCBhIHNwZWNpZmljIHBhdGguXG4gICAqL1xuICBwYXJlbnQ6IChyb290OiBOb2RlLCBwYXRoOiBQYXRoKSA9PiBBbmNlc3RvclxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbmNhdGVuYXRlZCB0ZXh0IHN0cmluZyBvZiBhIG5vZGUncyBjb250ZW50LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgdGhpcyB3aWxsIG5vdCBpbmNsdWRlIHNwYWNlcyBvciBsaW5lIGJyZWFrcyBiZXR3ZWVuIGJsb2NrIG5vZGVzLlxuICAgKiBJdCBpcyBub3QgYSB1c2VyLWZhY2luZyBzdHJpbmcsIGJ1dCBhIHN0cmluZyBmb3IgcGVyZm9ybWluZyBvZmZzZXQtcmVsYXRlZFxuICAgKiBjb21wdXRhdGlvbnMgZm9yIGEgbm9kZS5cbiAgICovXG4gIHN0cmluZzogKG5vZGU6IE5vZGUpID0+IHN0cmluZ1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBnZW5lcmF0b3Igb2YgYWxsIGxlYWYgdGV4dCBub2RlcyBpbiBhIHJvb3Qgbm9kZS5cbiAgICovXG4gIHRleHRzOiAoXG4gICAgcm9vdDogTm9kZSxcbiAgICBvcHRpb25zPzogTm9kZVRleHRzT3B0aW9uc1xuICApID0+IEdlbmVyYXRvcjxOb2RlRW50cnk8VGV4dD4sIHZvaWQsIHVuZGVmaW5lZD5cbn1cblxuY29uc3QgSVNfTk9ERV9MSVNUX0NBQ0hFID0gbmV3IFdlYWtNYXA8YW55W10sIGJvb2xlYW4+KClcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IE5vZGU6IE5vZGVJbnRlcmZhY2UgPSB7XG4gIGFuY2VzdG9yKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpOiBBbmNlc3RvciB7XG4gICAgY29uc3Qgbm9kZSA9IE5vZGUuZ2V0KHJvb3QsIHBhdGgpXG5cbiAgICBpZiAoVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgdGhlIGFuY2VzdG9yIG5vZGUgYXQgcGF0aCBbJHtwYXRofV0gYmVjYXVzZSBpdCByZWZlcnMgdG8gYSB0ZXh0IG5vZGUgaW5zdGVhZDogJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgICAgbm9kZVxuICAgICAgICApfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZVxuICB9LFxuXG4gICphbmNlc3RvcnMoXG4gICAgcm9vdDogTm9kZSxcbiAgICBwYXRoOiBQYXRoLFxuICAgIG9wdGlvbnM6IE5vZGVBbmNlc3RvcnNPcHRpb25zID0ge31cbiAgKTogR2VuZXJhdG9yPE5vZGVFbnRyeTxBbmNlc3Rvcj4sIHZvaWQsIHVuZGVmaW5lZD4ge1xuICAgIGZvciAoY29uc3QgcCBvZiBQYXRoLmFuY2VzdG9ycyhwYXRoLCBvcHRpb25zKSkge1xuICAgICAgY29uc3QgbiA9IE5vZGUuYW5jZXN0b3Iocm9vdCwgcClcbiAgICAgIGNvbnN0IGVudHJ5OiBOb2RlRW50cnk8QW5jZXN0b3I+ID0gW24sIHBdXG4gICAgICB5aWVsZCBlbnRyeVxuICAgIH1cbiAgfSxcblxuICBjaGlsZChyb290OiBOb2RlLCBpbmRleDogbnVtYmVyKTogRGVzY2VuZGFudCB7XG4gICAgaWYgKFRleHQuaXNUZXh0KHJvb3QpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IHRoZSBjaGlsZCBvZiBhIHRleHQgbm9kZTogJHtTY3J1YmJlci5zdHJpbmdpZnkocm9vdCl9YFxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IGMgPSByb290LmNoaWxkcmVuW2luZGV4XSBhcyBEZXNjZW5kYW50XG5cbiAgICBpZiAoYyA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgZ2V0IGNoaWxkIGF0IGluZGV4IFxcYCR7aW5kZXh9XFxgIGluIG5vZGU6ICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICAgIHJvb3RcbiAgICAgICAgKX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIGNcbiAgfSxcblxuICAqY2hpbGRyZW4oXG4gICAgcm9vdDogTm9kZSxcbiAgICBwYXRoOiBQYXRoLFxuICAgIG9wdGlvbnM6IE5vZGVDaGlsZHJlbk9wdGlvbnMgPSB7fVxuICApOiBHZW5lcmF0b3I8Tm9kZUVudHJ5PERlc2NlbmRhbnQ+LCB2b2lkLCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCB7IHJldmVyc2UgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgIGNvbnN0IGFuY2VzdG9yID0gTm9kZS5hbmNlc3Rvcihyb290LCBwYXRoKVxuICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IGFuY2VzdG9yXG4gICAgbGV0IGluZGV4ID0gcmV2ZXJzZSA/IGNoaWxkcmVuLmxlbmd0aCAtIDEgOiAwXG5cbiAgICB3aGlsZSAocmV2ZXJzZSA/IGluZGV4ID49IDAgOiBpbmRleCA8IGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgY29uc3QgY2hpbGQgPSBOb2RlLmNoaWxkKGFuY2VzdG9yLCBpbmRleClcbiAgICAgIGNvbnN0IGNoaWxkUGF0aCA9IHBhdGguY29uY2F0KGluZGV4KVxuICAgICAgeWllbGQgW2NoaWxkLCBjaGlsZFBhdGhdXG4gICAgICBpbmRleCA9IHJldmVyc2UgPyBpbmRleCAtIDEgOiBpbmRleCArIDFcbiAgICB9XG4gIH0sXG5cbiAgY29tbW9uKHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgsIGFub3RoZXI6IFBhdGgpOiBOb2RlRW50cnkge1xuICAgIGNvbnN0IHAgPSBQYXRoLmNvbW1vbihwYXRoLCBhbm90aGVyKVxuICAgIGNvbnN0IG4gPSBOb2RlLmdldChyb290LCBwKVxuICAgIHJldHVybiBbbiwgcF1cbiAgfSxcblxuICBkZXNjZW5kYW50KHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpOiBEZXNjZW5kYW50IHtcbiAgICBjb25zdCBub2RlID0gTm9kZS5nZXQocm9vdCwgcGF0aClcblxuICAgIGlmIChFZGl0b3IuaXNFZGl0b3Iobm9kZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgdGhlIGRlc2NlbmRhbnQgbm9kZSBhdCBwYXRoIFske3BhdGh9XSBiZWNhdXNlIGl0IHJlZmVycyB0byB0aGUgcm9vdCBlZGl0b3Igbm9kZSBpbnN0ZWFkOiAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgICBub2RlXG4gICAgICAgICl9YFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBub2RlXG4gIH0sXG5cbiAgKmRlc2NlbmRhbnRzKFxuICAgIHJvb3Q6IE5vZGUsXG4gICAgb3B0aW9uczogTm9kZURlc2NlbmRhbnRzT3B0aW9ucyA9IHt9XG4gICk6IEdlbmVyYXRvcjxOb2RlRW50cnk8RGVzY2VuZGFudD4sIHZvaWQsIHVuZGVmaW5lZD4ge1xuICAgIGZvciAoY29uc3QgW25vZGUsIHBhdGhdIG9mIE5vZGUubm9kZXMocm9vdCwgb3B0aW9ucykpIHtcbiAgICAgIGlmIChwYXRoLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAvLyBOT1RFOiB3ZSBoYXZlIHRvIGNvZXJjZSBoZXJlIGJlY2F1c2UgY2hlY2tpbmcgdGhlIHBhdGgncyBsZW5ndGggZG9lc1xuICAgICAgICAvLyBndWFyYW50ZWUgdGhhdCBgbm9kZWAgaXMgbm90IGEgYEVkaXRvcmAsIGJ1dCBUeXBlU2NyaXB0IGRvZXNuJ3Qga25vdy5cbiAgICAgICAgeWllbGQgW25vZGUsIHBhdGhdIGFzIE5vZGVFbnRyeTxEZXNjZW5kYW50PlxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAqZWxlbWVudHMoXG4gICAgcm9vdDogTm9kZSxcbiAgICBvcHRpb25zOiBOb2RlRWxlbWVudHNPcHRpb25zID0ge31cbiAgKTogR2VuZXJhdG9yPEVsZW1lbnRFbnRyeSwgdm9pZCwgdW5kZWZpbmVkPiB7XG4gICAgZm9yIChjb25zdCBbbm9kZSwgcGF0aF0gb2YgTm9kZS5ub2Rlcyhyb290LCBvcHRpb25zKSkge1xuICAgICAgaWYgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpKSB7XG4gICAgICAgIHlpZWxkIFtub2RlLCBwYXRoXVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBleHRyYWN0UHJvcHMobm9kZTogTm9kZSk6IE5vZGVQcm9wcyB7XG4gICAgaWYgKEVsZW1lbnQuaXNBbmNlc3Rvcihub2RlKSkge1xuICAgICAgY29uc3QgeyBjaGlsZHJlbiwgLi4ucHJvcGVydGllcyB9ID0gbm9kZVxuXG4gICAgICByZXR1cm4gcHJvcGVydGllc1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB7IHRleHQsIC4uLnByb3BlcnRpZXMgfSA9IG5vZGVcblxuICAgICAgcmV0dXJuIHByb3BlcnRpZXNcbiAgICB9XG4gIH0sXG5cbiAgZmlyc3Qocm9vdDogTm9kZSwgcGF0aDogUGF0aCk6IE5vZGVFbnRyeSB7XG4gICAgY29uc3QgcCA9IHBhdGguc2xpY2UoKVxuICAgIGxldCBuID0gTm9kZS5nZXQocm9vdCwgcClcblxuICAgIHdoaWxlIChuKSB7XG4gICAgICBpZiAoVGV4dC5pc1RleHQobikgfHwgbi5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG4gPSBuLmNoaWxkcmVuWzBdXG4gICAgICAgIHAucHVzaCgwKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbbiwgcF1cbiAgfSxcblxuICBmcmFnbWVudChyb290OiBOb2RlLCByYW5nZTogUmFuZ2UpOiBEZXNjZW5kYW50W10ge1xuICAgIGlmIChUZXh0LmlzVGV4dChyb290KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCBhIGZyYWdtZW50IHN0YXJ0aW5nIGZyb20gYSByb290IHRleHQgbm9kZTogJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgICAgcm9vdFxuICAgICAgICApfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBuZXdSb290ID0gcHJvZHVjZSh7IGNoaWxkcmVuOiByb290LmNoaWxkcmVuIH0sIHIgPT4ge1xuICAgICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXMocmFuZ2UpXG4gICAgICBjb25zdCBub2RlRW50cmllcyA9IE5vZGUubm9kZXMociwge1xuICAgICAgICByZXZlcnNlOiB0cnVlLFxuICAgICAgICBwYXNzOiAoWywgcGF0aF0pID0+ICFSYW5nZS5pbmNsdWRlcyhyYW5nZSwgcGF0aCksXG4gICAgICB9KVxuXG4gICAgICBmb3IgKGNvbnN0IFssIHBhdGhdIG9mIG5vZGVFbnRyaWVzKSB7XG4gICAgICAgIGlmICghUmFuZ2UuaW5jbHVkZXMocmFuZ2UsIHBhdGgpKSB7XG4gICAgICAgICAgY29uc3QgcGFyZW50ID0gTm9kZS5wYXJlbnQociwgcGF0aClcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXVxuICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoUGF0aC5lcXVhbHMocGF0aCwgZW5kLnBhdGgpKSB7XG4gICAgICAgICAgY29uc3QgbGVhZiA9IE5vZGUubGVhZihyLCBwYXRoKVxuICAgICAgICAgIGxlYWYudGV4dCA9IGxlYWYudGV4dC5zbGljZSgwLCBlbmQub2Zmc2V0KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFBhdGguZXF1YWxzKHBhdGgsIHN0YXJ0LnBhdGgpKSB7XG4gICAgICAgICAgY29uc3QgbGVhZiA9IE5vZGUubGVhZihyLCBwYXRoKVxuICAgICAgICAgIGxlYWYudGV4dCA9IGxlYWYudGV4dC5zbGljZShzdGFydC5vZmZzZXQpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKEVkaXRvci5pc0VkaXRvcihyKSkge1xuICAgICAgICByLnNlbGVjdGlvbiA9IG51bGxcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIG5ld1Jvb3QuY2hpbGRyZW5cbiAgfSxcblxuICBnZXQocm9vdDogTm9kZSwgcGF0aDogUGF0aCk6IE5vZGUge1xuICAgIGxldCBub2RlID0gcm9vdFxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwID0gcGF0aFtpXVxuXG4gICAgICBpZiAoVGV4dC5pc1RleHQobm9kZSkgfHwgIW5vZGUuY2hpbGRyZW5bcF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBDYW5ub3QgZmluZCBhIGRlc2NlbmRhbnQgYXQgcGF0aCBbJHtwYXRofV0gaW4gbm9kZTogJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgICAgICByb290XG4gICAgICAgICAgKX1gXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgbm9kZSA9IG5vZGUuY2hpbGRyZW5bcF1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZVxuICB9LFxuXG4gIGhhcyhyb290OiBOb2RlLCBwYXRoOiBQYXRoKTogYm9vbGVhbiB7XG4gICAgbGV0IG5vZGUgPSByb290XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHAgPSBwYXRoW2ldXG5cbiAgICAgIGlmIChUZXh0LmlzVGV4dChub2RlKSB8fCAhbm9kZS5jaGlsZHJlbltwXSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgbm9kZSA9IG5vZGUuY2hpbGRyZW5bcF1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9LFxuXG4gIGlzTm9kZSh2YWx1ZTogYW55KTogdmFsdWUgaXMgTm9kZSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFRleHQuaXNUZXh0KHZhbHVlKSB8fCBFbGVtZW50LmlzRWxlbWVudCh2YWx1ZSkgfHwgRWRpdG9yLmlzRWRpdG9yKHZhbHVlKVxuICAgIClcbiAgfSxcblxuICBpc05vZGVMaXN0KHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBOb2RlW10ge1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBjYWNoZWRSZXN1bHQgPSBJU19OT0RFX0xJU1RfQ0FDSEUuZ2V0KHZhbHVlKVxuICAgIGlmIChjYWNoZWRSZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGNhY2hlZFJlc3VsdFxuICAgIH1cbiAgICBjb25zdCBpc05vZGVMaXN0ID0gdmFsdWUuZXZlcnkodmFsID0+IE5vZGUuaXNOb2RlKHZhbCkpXG4gICAgSVNfTk9ERV9MSVNUX0NBQ0hFLnNldCh2YWx1ZSwgaXNOb2RlTGlzdClcbiAgICByZXR1cm4gaXNOb2RlTGlzdFxuICB9LFxuXG4gIGxhc3Qocm9vdDogTm9kZSwgcGF0aDogUGF0aCk6IE5vZGVFbnRyeSB7XG4gICAgY29uc3QgcCA9IHBhdGguc2xpY2UoKVxuICAgIGxldCBuID0gTm9kZS5nZXQocm9vdCwgcClcblxuICAgIHdoaWxlIChuKSB7XG4gICAgICBpZiAoVGV4dC5pc1RleHQobikgfHwgbi5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGkgPSBuLmNoaWxkcmVuLmxlbmd0aCAtIDFcbiAgICAgICAgbiA9IG4uY2hpbGRyZW5baV1cbiAgICAgICAgcC5wdXNoKGkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFtuLCBwXVxuICB9LFxuXG4gIGxlYWYocm9vdDogTm9kZSwgcGF0aDogUGF0aCk6IFRleHQge1xuICAgIGNvbnN0IG5vZGUgPSBOb2RlLmdldChyb290LCBwYXRoKVxuXG4gICAgaWYgKCFUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCB0aGUgbGVhZiBub2RlIGF0IHBhdGggWyR7cGF0aH1dIGJlY2F1c2UgaXQgcmVmZXJzIHRvIGEgbm9uLWxlYWYgbm9kZTogJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgICAgbm9kZVxuICAgICAgICApfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZVxuICB9LFxuXG4gICpsZXZlbHMoXG4gICAgcm9vdDogTm9kZSxcbiAgICBwYXRoOiBQYXRoLFxuICAgIG9wdGlvbnM6IE5vZGVMZXZlbHNPcHRpb25zID0ge31cbiAgKTogR2VuZXJhdG9yPE5vZGVFbnRyeSwgdm9pZCwgdW5kZWZpbmVkPiB7XG4gICAgZm9yIChjb25zdCBwIG9mIFBhdGgubGV2ZWxzKHBhdGgsIG9wdGlvbnMpKSB7XG4gICAgICBjb25zdCBuID0gTm9kZS5nZXQocm9vdCwgcClcbiAgICAgIHlpZWxkIFtuLCBwXVxuICAgIH1cbiAgfSxcblxuICBtYXRjaGVzKG5vZGU6IE5vZGUsIHByb3BzOiBQYXJ0aWFsPE5vZGU+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIChFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJlxuICAgICAgICBFbGVtZW50LmlzRWxlbWVudFByb3BzKHByb3BzKSAmJlxuICAgICAgICBFbGVtZW50Lm1hdGNoZXMobm9kZSwgcHJvcHMpKSB8fFxuICAgICAgKFRleHQuaXNUZXh0KG5vZGUpICYmXG4gICAgICAgIFRleHQuaXNUZXh0UHJvcHMocHJvcHMpICYmXG4gICAgICAgIFRleHQubWF0Y2hlcyhub2RlLCBwcm9wcykpXG4gICAgKVxuICB9LFxuXG4gICpub2RlcyhcbiAgICByb290OiBOb2RlLFxuICAgIG9wdGlvbnM6IE5vZGVOb2Rlc09wdGlvbnMgPSB7fVxuICApOiBHZW5lcmF0b3I8Tm9kZUVudHJ5LCB2b2lkLCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCB7IHBhc3MsIHJldmVyc2UgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgIGNvbnN0IHsgZnJvbSA9IFtdLCB0byB9ID0gb3B0aW9uc1xuICAgIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0KClcbiAgICBsZXQgcDogUGF0aCA9IFtdXG4gICAgbGV0IG4gPSByb290XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgaWYgKHRvICYmIChyZXZlcnNlID8gUGF0aC5pc0JlZm9yZShwLCB0bykgOiBQYXRoLmlzQWZ0ZXIocCwgdG8pKSkge1xuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBpZiAoIXZpc2l0ZWQuaGFzKG4pKSB7XG4gICAgICAgIHlpZWxkIFtuLCBwXVxuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSdyZSBhbGxvd2VkIHRvIGdvIGRvd253YXJkIGFuZCB3ZSBoYXZlbid0IGRlc2NlbmRlZCB5ZXQsIGRvLlxuICAgICAgaWYgKFxuICAgICAgICAhdmlzaXRlZC5oYXMobikgJiZcbiAgICAgICAgIVRleHQuaXNUZXh0KG4pICYmXG4gICAgICAgIG4uY2hpbGRyZW4ubGVuZ3RoICE9PSAwICYmXG4gICAgICAgIChwYXNzID09IG51bGwgfHwgcGFzcyhbbiwgcF0pID09PSBmYWxzZSlcbiAgICAgICkge1xuICAgICAgICB2aXNpdGVkLmFkZChuKVxuICAgICAgICBsZXQgbmV4dEluZGV4ID0gcmV2ZXJzZSA/IG4uY2hpbGRyZW4ubGVuZ3RoIC0gMSA6IDBcblxuICAgICAgICBpZiAoUGF0aC5pc0FuY2VzdG9yKHAsIGZyb20pKSB7XG4gICAgICAgICAgbmV4dEluZGV4ID0gZnJvbVtwLmxlbmd0aF1cbiAgICAgICAgfVxuXG4gICAgICAgIHAgPSBwLmNvbmNhdChuZXh0SW5kZXgpXG4gICAgICAgIG4gPSBOb2RlLmdldChyb290LCBwKVxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSdyZSBhdCB0aGUgcm9vdCBhbmQgd2UgY2FuJ3QgZ28gZG93biwgd2UncmUgZG9uZS5cbiAgICAgIGlmIChwLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSdyZSBnb2luZyBmb3J3YXJkLi4uXG4gICAgICBpZiAoIXJldmVyc2UpIHtcbiAgICAgICAgY29uc3QgbmV3UGF0aCA9IFBhdGgubmV4dChwKVxuXG4gICAgICAgIGlmIChOb2RlLmhhcyhyb290LCBuZXdQYXRoKSkge1xuICAgICAgICAgIHAgPSBuZXdQYXRoXG4gICAgICAgICAgbiA9IE5vZGUuZ2V0KHJvb3QsIHApXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSdyZSBnb2luZyBiYWNrd2FyZC4uLlxuICAgICAgaWYgKHJldmVyc2UgJiYgcFtwLmxlbmd0aCAtIDFdICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IG5ld1BhdGggPSBQYXRoLnByZXZpb3VzKHApXG4gICAgICAgIHAgPSBuZXdQYXRoXG4gICAgICAgIG4gPSBOb2RlLmdldChyb290LCBwKVxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyBPdGhlcndpc2Ugd2UncmUgZ29pbmcgdXB3YXJkLi4uXG4gICAgICBwID0gUGF0aC5wYXJlbnQocClcbiAgICAgIG4gPSBOb2RlLmdldChyb290LCBwKVxuICAgICAgdmlzaXRlZC5hZGQobilcbiAgICB9XG4gIH0sXG5cbiAgcGFyZW50KHJvb3Q6IE5vZGUsIHBhdGg6IFBhdGgpOiBBbmNlc3RvciB7XG4gICAgY29uc3QgcGFyZW50UGF0aCA9IFBhdGgucGFyZW50KHBhdGgpXG4gICAgY29uc3QgcCA9IE5vZGUuZ2V0KHJvb3QsIHBhcmVudFBhdGgpXG5cbiAgICBpZiAoVGV4dC5pc1RleHQocCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBnZXQgdGhlIHBhcmVudCBvZiBwYXRoIFske3BhdGh9XSBiZWNhdXNlIGl0IGRvZXMgbm90IGV4aXN0IGluIHRoZSByb290LmBcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gcFxuICB9LFxuXG4gIHN0cmluZyhub2RlOiBOb2RlKTogc3RyaW5nIHtcbiAgICBpZiAoVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICAgIHJldHVybiBub2RlLnRleHRcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5vZGUuY2hpbGRyZW4ubWFwKE5vZGUuc3RyaW5nKS5qb2luKCcnKVxuICAgIH1cbiAgfSxcblxuICAqdGV4dHMoXG4gICAgcm9vdDogTm9kZSxcbiAgICBvcHRpb25zOiBOb2RlVGV4dHNPcHRpb25zID0ge31cbiAgKTogR2VuZXJhdG9yPE5vZGVFbnRyeTxUZXh0Piwgdm9pZCwgdW5kZWZpbmVkPiB7XG4gICAgZm9yIChjb25zdCBbbm9kZSwgcGF0aF0gb2YgTm9kZS5ub2Rlcyhyb290LCBvcHRpb25zKSkge1xuICAgICAgaWYgKFRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICAgIHlpZWxkIFtub2RlLCBwYXRoXVxuICAgICAgfVxuICAgIH1cbiAgfSxcbn1cblxuLyoqXG4gKiBUaGUgYERlc2NlbmRhbnRgIHVuaW9uIHR5cGUgcmVwcmVzZW50cyBub2RlcyB0aGF0IGFyZSBkZXNjZW5kYW50cyBpbiB0aGVcbiAqIHRyZWUuIEl0IGlzIHJldHVybmVkIGFzIGEgY29udmVuaWVuY2UgaW4gY2VydGFpbiBjYXNlcyB0byBuYXJyb3cgYSB2YWx1ZVxuICogZnVydGhlciB0aGFuIHRoZSBtb3JlIGdlbmVyaWMgYE5vZGVgIHVuaW9uLlxuICovXG5cbmV4cG9ydCB0eXBlIERlc2NlbmRhbnQgPSBFbGVtZW50IHwgVGV4dFxuXG4vKipcbiAqIFRoZSBgQW5jZXN0b3JgIHVuaW9uIHR5cGUgcmVwcmVzZW50cyBub2RlcyB0aGF0IGFyZSBhbmNlc3RvcnMgaW4gdGhlIHRyZWUuXG4gKiBJdCBpcyByZXR1cm5lZCBhcyBhIGNvbnZlbmllbmNlIGluIGNlcnRhaW4gY2FzZXMgdG8gbmFycm93IGEgdmFsdWUgZnVydGhlclxuICogdGhhbiB0aGUgbW9yZSBnZW5lcmljIGBOb2RlYCB1bmlvbi5cbiAqL1xuXG5leHBvcnQgdHlwZSBBbmNlc3RvciA9IEVkaXRvciB8IEVsZW1lbnRcblxuLyoqXG4gKiBgTm9kZUVudHJ5YCBvYmplY3RzIGFyZSByZXR1cm5lZCB3aGVuIGl0ZXJhdGluZyBvdmVyIHRoZSBub2RlcyBpbiBhIFNsYXRlXG4gKiBkb2N1bWVudCB0cmVlLiBUaGV5IGNvbnNpc3Qgb2YgdGhlIG5vZGUgYW5kIGl0cyBgUGF0aGAgcmVsYXRpdmUgdG8gdGhlIHJvb3RcbiAqIG5vZGUgaW4gdGhlIGRvY3VtZW50LlxuICovXG5cbmV4cG9ydCB0eXBlIE5vZGVFbnRyeTxUIGV4dGVuZHMgTm9kZSA9IE5vZGU+ID0gW1QsIFBhdGhdXG5cbi8qKlxuICogQ29udmVuaWVuY2UgdHlwZSBmb3IgcmV0dXJuaW5nIHRoZSBwcm9wcyBvZiBhIG5vZGUuXG4gKi9cbmV4cG9ydCB0eXBlIE5vZGVQcm9wcyA9XG4gIHwgT21pdDxFZGl0b3IsICdjaGlsZHJlbic+XG4gIHwgT21pdDxFbGVtZW50LCAnY2hpbGRyZW4nPlxuICB8IE9taXQ8VGV4dCwgJ3RleHQnPlxuIiwgImltcG9ydCB7IEV4dGVuZGVkVHlwZSwgTm9kZSwgUGF0aCwgUmFuZ2UgfSBmcm9tICcuLidcbmltcG9ydCB7IGlzUGxhaW5PYmplY3QgfSBmcm9tICdpcy1wbGFpbi1vYmplY3QnXG5cbmV4cG9ydCB0eXBlIEJhc2VJbnNlcnROb2RlT3BlcmF0aW9uID0ge1xuICB0eXBlOiAnaW5zZXJ0X25vZGUnXG4gIHBhdGg6IFBhdGhcbiAgbm9kZTogTm9kZVxufVxuXG5leHBvcnQgdHlwZSBJbnNlcnROb2RlT3BlcmF0aW9uID0gRXh0ZW5kZWRUeXBlPFxuICAnSW5zZXJ0Tm9kZU9wZXJhdGlvbicsXG4gIEJhc2VJbnNlcnROb2RlT3BlcmF0aW9uXG4+XG5cbmV4cG9ydCB0eXBlIEJhc2VJbnNlcnRUZXh0T3BlcmF0aW9uID0ge1xuICB0eXBlOiAnaW5zZXJ0X3RleHQnXG4gIHBhdGg6IFBhdGhcbiAgb2Zmc2V0OiBudW1iZXJcbiAgdGV4dDogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIEluc2VydFRleHRPcGVyYXRpb24gPSBFeHRlbmRlZFR5cGU8XG4gICdJbnNlcnRUZXh0T3BlcmF0aW9uJyxcbiAgQmFzZUluc2VydFRleHRPcGVyYXRpb25cbj5cblxuZXhwb3J0IHR5cGUgQmFzZU1lcmdlTm9kZU9wZXJhdGlvbiA9IHtcbiAgdHlwZTogJ21lcmdlX25vZGUnXG4gIHBhdGg6IFBhdGhcbiAgcG9zaXRpb246IG51bWJlclxuICBwcm9wZXJ0aWVzOiBQYXJ0aWFsPE5vZGU+XG59XG5cbmV4cG9ydCB0eXBlIE1lcmdlTm9kZU9wZXJhdGlvbiA9IEV4dGVuZGVkVHlwZTxcbiAgJ01lcmdlTm9kZU9wZXJhdGlvbicsXG4gIEJhc2VNZXJnZU5vZGVPcGVyYXRpb25cbj5cblxuZXhwb3J0IHR5cGUgQmFzZU1vdmVOb2RlT3BlcmF0aW9uID0ge1xuICB0eXBlOiAnbW92ZV9ub2RlJ1xuICBwYXRoOiBQYXRoXG4gIG5ld1BhdGg6IFBhdGhcbn1cblxuZXhwb3J0IHR5cGUgTW92ZU5vZGVPcGVyYXRpb24gPSBFeHRlbmRlZFR5cGU8XG4gICdNb3ZlTm9kZU9wZXJhdGlvbicsXG4gIEJhc2VNb3ZlTm9kZU9wZXJhdGlvblxuPlxuXG5leHBvcnQgdHlwZSBCYXNlUmVtb3ZlTm9kZU9wZXJhdGlvbiA9IHtcbiAgdHlwZTogJ3JlbW92ZV9ub2RlJ1xuICBwYXRoOiBQYXRoXG4gIG5vZGU6IE5vZGVcbn1cblxuZXhwb3J0IHR5cGUgUmVtb3ZlTm9kZU9wZXJhdGlvbiA9IEV4dGVuZGVkVHlwZTxcbiAgJ1JlbW92ZU5vZGVPcGVyYXRpb24nLFxuICBCYXNlUmVtb3ZlTm9kZU9wZXJhdGlvblxuPlxuXG5leHBvcnQgdHlwZSBCYXNlUmVtb3ZlVGV4dE9wZXJhdGlvbiA9IHtcbiAgdHlwZTogJ3JlbW92ZV90ZXh0J1xuICBwYXRoOiBQYXRoXG4gIG9mZnNldDogbnVtYmVyXG4gIHRleHQ6IHN0cmluZ1xufVxuXG5leHBvcnQgdHlwZSBSZW1vdmVUZXh0T3BlcmF0aW9uID0gRXh0ZW5kZWRUeXBlPFxuICAnUmVtb3ZlVGV4dE9wZXJhdGlvbicsXG4gIEJhc2VSZW1vdmVUZXh0T3BlcmF0aW9uXG4+XG5cbmV4cG9ydCB0eXBlIEJhc2VTZXROb2RlT3BlcmF0aW9uID0ge1xuICB0eXBlOiAnc2V0X25vZGUnXG4gIHBhdGg6IFBhdGhcbiAgcHJvcGVydGllczogUGFydGlhbDxOb2RlPlxuICBuZXdQcm9wZXJ0aWVzOiBQYXJ0aWFsPE5vZGU+XG59XG5cbmV4cG9ydCB0eXBlIFNldE5vZGVPcGVyYXRpb24gPSBFeHRlbmRlZFR5cGU8XG4gICdTZXROb2RlT3BlcmF0aW9uJyxcbiAgQmFzZVNldE5vZGVPcGVyYXRpb25cbj5cblxuZXhwb3J0IHR5cGUgQmFzZVNldFNlbGVjdGlvbk9wZXJhdGlvbiA9XG4gIHwge1xuICAgICAgdHlwZTogJ3NldF9zZWxlY3Rpb24nXG4gICAgICBwcm9wZXJ0aWVzOiBudWxsXG4gICAgICBuZXdQcm9wZXJ0aWVzOiBSYW5nZVxuICAgIH1cbiAgfCB7XG4gICAgICB0eXBlOiAnc2V0X3NlbGVjdGlvbidcbiAgICAgIHByb3BlcnRpZXM6IFBhcnRpYWw8UmFuZ2U+XG4gICAgICBuZXdQcm9wZXJ0aWVzOiBQYXJ0aWFsPFJhbmdlPlxuICAgIH1cbiAgfCB7XG4gICAgICB0eXBlOiAnc2V0X3NlbGVjdGlvbidcbiAgICAgIHByb3BlcnRpZXM6IFJhbmdlXG4gICAgICBuZXdQcm9wZXJ0aWVzOiBudWxsXG4gICAgfVxuXG5leHBvcnQgdHlwZSBTZXRTZWxlY3Rpb25PcGVyYXRpb24gPSBFeHRlbmRlZFR5cGU8XG4gICdTZXRTZWxlY3Rpb25PcGVyYXRpb24nLFxuICBCYXNlU2V0U2VsZWN0aW9uT3BlcmF0aW9uXG4+XG5cbmV4cG9ydCB0eXBlIEJhc2VTcGxpdE5vZGVPcGVyYXRpb24gPSB7XG4gIHR5cGU6ICdzcGxpdF9ub2RlJ1xuICBwYXRoOiBQYXRoXG4gIHBvc2l0aW9uOiBudW1iZXJcbiAgcHJvcGVydGllczogUGFydGlhbDxOb2RlPlxufVxuXG5leHBvcnQgdHlwZSBTcGxpdE5vZGVPcGVyYXRpb24gPSBFeHRlbmRlZFR5cGU8XG4gICdTcGxpdE5vZGVPcGVyYXRpb24nLFxuICBCYXNlU3BsaXROb2RlT3BlcmF0aW9uXG4+XG5cbmV4cG9ydCB0eXBlIE5vZGVPcGVyYXRpb24gPVxuICB8IEluc2VydE5vZGVPcGVyYXRpb25cbiAgfCBNZXJnZU5vZGVPcGVyYXRpb25cbiAgfCBNb3ZlTm9kZU9wZXJhdGlvblxuICB8IFJlbW92ZU5vZGVPcGVyYXRpb25cbiAgfCBTZXROb2RlT3BlcmF0aW9uXG4gIHwgU3BsaXROb2RlT3BlcmF0aW9uXG5cbmV4cG9ydCB0eXBlIFNlbGVjdGlvbk9wZXJhdGlvbiA9IFNldFNlbGVjdGlvbk9wZXJhdGlvblxuXG5leHBvcnQgdHlwZSBUZXh0T3BlcmF0aW9uID0gSW5zZXJ0VGV4dE9wZXJhdGlvbiB8IFJlbW92ZVRleHRPcGVyYXRpb25cblxuLyoqXG4gKiBgT3BlcmF0aW9uYCBvYmplY3RzIGRlZmluZSB0aGUgbG93LWxldmVsIGluc3RydWN0aW9ucyB0aGF0IFNsYXRlIGVkaXRvcnMgdXNlXG4gKiB0byBhcHBseSBjaGFuZ2VzIHRvIHRoZWlyIGludGVybmFsIHN0YXRlLiBSZXByZXNlbnRpbmcgYWxsIGNoYW5nZXMgYXNcbiAqIG9wZXJhdGlvbnMgaXMgd2hhdCBhbGxvd3MgU2xhdGUgZWRpdG9ycyB0byBlYXNpbHkgaW1wbGVtZW50IGhpc3RvcnksXG4gKiBjb2xsYWJvcmF0aW9uLCBhbmQgb3RoZXIgZmVhdHVyZXMuXG4gKi9cblxuZXhwb3J0IHR5cGUgQmFzZU9wZXJhdGlvbiA9IE5vZGVPcGVyYXRpb24gfCBTZWxlY3Rpb25PcGVyYXRpb24gfCBUZXh0T3BlcmF0aW9uXG5leHBvcnQgdHlwZSBPcGVyYXRpb24gPSBFeHRlbmRlZFR5cGU8J09wZXJhdGlvbicsIEJhc2VPcGVyYXRpb24+XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3BlcmF0aW9uSW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBgTm9kZU9wZXJhdGlvbmAgb2JqZWN0LlxuICAgKi9cbiAgaXNOb2RlT3BlcmF0aW9uOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgTm9kZU9wZXJhdGlvblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGFuIGBPcGVyYXRpb25gIG9iamVjdC5cbiAgICovXG4gIGlzT3BlcmF0aW9uOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgT3BlcmF0aW9uXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBsaXN0IG9mIGBPcGVyYXRpb25gIG9iamVjdHMuXG4gICAqL1xuICBpc09wZXJhdGlvbkxpc3Q6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBPcGVyYXRpb25bXVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgYFNlbGVjdGlvbk9wZXJhdGlvbmAgb2JqZWN0LlxuICAgKi9cbiAgaXNTZWxlY3Rpb25PcGVyYXRpb246ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBTZWxlY3Rpb25PcGVyYXRpb25cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIGBUZXh0T3BlcmF0aW9uYCBvYmplY3QuXG4gICAqL1xuICBpc1RleHRPcGVyYXRpb246ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBUZXh0T3BlcmF0aW9uXG5cbiAgLyoqXG4gICAqIEludmVydCBhbiBvcGVyYXRpb24sIHJldHVybmluZyBhIG5ldyBvcGVyYXRpb24gdGhhdCB3aWxsIGV4YWN0bHkgdW5kbyB0aGVcbiAgICogb3JpZ2luYWwgd2hlbiBhcHBsaWVkLlxuICAgKi9cbiAgaW52ZXJzZTogKG9wOiBPcGVyYXRpb24pID0+IE9wZXJhdGlvblxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgT3BlcmF0aW9uOiBPcGVyYXRpb25JbnRlcmZhY2UgPSB7XG4gIGlzTm9kZU9wZXJhdGlvbih2YWx1ZTogYW55KTogdmFsdWUgaXMgTm9kZU9wZXJhdGlvbiB7XG4gICAgcmV0dXJuIE9wZXJhdGlvbi5pc09wZXJhdGlvbih2YWx1ZSkgJiYgdmFsdWUudHlwZS5lbmRzV2l0aCgnX25vZGUnKVxuICB9LFxuXG4gIGlzT3BlcmF0aW9uKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBPcGVyYXRpb24ge1xuICAgIGlmICghaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHN3aXRjaCAodmFsdWUudHlwZSkge1xuICAgICAgY2FzZSAnaW5zZXJ0X25vZGUnOlxuICAgICAgICByZXR1cm4gUGF0aC5pc1BhdGgodmFsdWUucGF0aCkgJiYgTm9kZS5pc05vZGUodmFsdWUubm9kZSlcbiAgICAgIGNhc2UgJ2luc2VydF90ZXh0JzpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICB0eXBlb2YgdmFsdWUub2Zmc2V0ID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgIHR5cGVvZiB2YWx1ZS50ZXh0ID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgIFBhdGguaXNQYXRoKHZhbHVlLnBhdGgpXG4gICAgICAgIClcbiAgICAgIGNhc2UgJ21lcmdlX25vZGUnOlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHR5cGVvZiB2YWx1ZS5wb3NpdGlvbiA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICBQYXRoLmlzUGF0aCh2YWx1ZS5wYXRoKSAmJlxuICAgICAgICAgIGlzUGxhaW5PYmplY3QodmFsdWUucHJvcGVydGllcylcbiAgICAgICAgKVxuICAgICAgY2FzZSAnbW92ZV9ub2RlJzpcbiAgICAgICAgcmV0dXJuIFBhdGguaXNQYXRoKHZhbHVlLnBhdGgpICYmIFBhdGguaXNQYXRoKHZhbHVlLm5ld1BhdGgpXG4gICAgICBjYXNlICdyZW1vdmVfbm9kZSc6XG4gICAgICAgIHJldHVybiBQYXRoLmlzUGF0aCh2YWx1ZS5wYXRoKSAmJiBOb2RlLmlzTm9kZSh2YWx1ZS5ub2RlKVxuICAgICAgY2FzZSAncmVtb3ZlX3RleHQnOlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHR5cGVvZiB2YWx1ZS5vZmZzZXQgPT09ICdudW1iZXInICYmXG4gICAgICAgICAgdHlwZW9mIHZhbHVlLnRleHQgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgUGF0aC5pc1BhdGgodmFsdWUucGF0aClcbiAgICAgICAgKVxuICAgICAgY2FzZSAnc2V0X25vZGUnOlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIFBhdGguaXNQYXRoKHZhbHVlLnBhdGgpICYmXG4gICAgICAgICAgaXNQbGFpbk9iamVjdCh2YWx1ZS5wcm9wZXJ0aWVzKSAmJlxuICAgICAgICAgIGlzUGxhaW5PYmplY3QodmFsdWUubmV3UHJvcGVydGllcylcbiAgICAgICAgKVxuICAgICAgY2FzZSAnc2V0X3NlbGVjdGlvbic6XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgKHZhbHVlLnByb3BlcnRpZXMgPT09IG51bGwgJiYgUmFuZ2UuaXNSYW5nZSh2YWx1ZS5uZXdQcm9wZXJ0aWVzKSkgfHxcbiAgICAgICAgICAodmFsdWUubmV3UHJvcGVydGllcyA9PT0gbnVsbCAmJiBSYW5nZS5pc1JhbmdlKHZhbHVlLnByb3BlcnRpZXMpKSB8fFxuICAgICAgICAgIChpc1BsYWluT2JqZWN0KHZhbHVlLnByb3BlcnRpZXMpICYmXG4gICAgICAgICAgICBpc1BsYWluT2JqZWN0KHZhbHVlLm5ld1Byb3BlcnRpZXMpKVxuICAgICAgICApXG4gICAgICBjYXNlICdzcGxpdF9ub2RlJzpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBQYXRoLmlzUGF0aCh2YWx1ZS5wYXRoKSAmJlxuICAgICAgICAgIHR5cGVvZiB2YWx1ZS5wb3NpdGlvbiA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICBpc1BsYWluT2JqZWN0KHZhbHVlLnByb3BlcnRpZXMpXG4gICAgICAgIClcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSxcblxuICBpc09wZXJhdGlvbkxpc3QodmFsdWU6IGFueSk6IHZhbHVlIGlzIE9wZXJhdGlvbltdIHtcbiAgICByZXR1cm4gKFxuICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUuZXZlcnkodmFsID0+IE9wZXJhdGlvbi5pc09wZXJhdGlvbih2YWwpKVxuICAgIClcbiAgfSxcblxuICBpc1NlbGVjdGlvbk9wZXJhdGlvbih2YWx1ZTogYW55KTogdmFsdWUgaXMgU2VsZWN0aW9uT3BlcmF0aW9uIHtcbiAgICByZXR1cm4gT3BlcmF0aW9uLmlzT3BlcmF0aW9uKHZhbHVlKSAmJiB2YWx1ZS50eXBlLmVuZHNXaXRoKCdfc2VsZWN0aW9uJylcbiAgfSxcblxuICBpc1RleHRPcGVyYXRpb24odmFsdWU6IGFueSk6IHZhbHVlIGlzIFRleHRPcGVyYXRpb24ge1xuICAgIHJldHVybiBPcGVyYXRpb24uaXNPcGVyYXRpb24odmFsdWUpICYmIHZhbHVlLnR5cGUuZW5kc1dpdGgoJ190ZXh0JylcbiAgfSxcblxuICBpbnZlcnNlKG9wOiBPcGVyYXRpb24pOiBPcGVyYXRpb24ge1xuICAgIHN3aXRjaCAob3AudHlwZSkge1xuICAgICAgY2FzZSAnaW5zZXJ0X25vZGUnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLm9wLCB0eXBlOiAncmVtb3ZlX25vZGUnIH1cbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5zZXJ0X3RleHQnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLm9wLCB0eXBlOiAncmVtb3ZlX3RleHQnIH1cbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVyZ2Vfbm9kZSc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4ub3AsIHR5cGU6ICdzcGxpdF9ub2RlJywgcGF0aDogUGF0aC5wcmV2aW91cyhvcC5wYXRoKSB9XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21vdmVfbm9kZSc6IHtcbiAgICAgICAgY29uc3QgeyBuZXdQYXRoLCBwYXRoIH0gPSBvcFxuXG4gICAgICAgIC8vIFBFUkY6IGluIHRoaXMgY2FzZSB0aGUgbW92ZSBvcGVyYXRpb24gaXMgYSBuby1vcCBhbnl3YXlzLlxuICAgICAgICBpZiAoUGF0aC5lcXVhbHMobmV3UGF0aCwgcGF0aCkpIHtcbiAgICAgICAgICByZXR1cm4gb3BcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSBtb3ZlIGhhcHBlbnMgY29tcGxldGVseSB3aXRoaW4gYSBzaW5nbGUgcGFyZW50IHRoZSBwYXRoIGFuZFxuICAgICAgICAvLyBuZXdQYXRoIGFyZSBzdGFibGUgd2l0aCByZXNwZWN0IHRvIGVhY2ggb3RoZXIuXG4gICAgICAgIGlmIChQYXRoLmlzU2libGluZyhwYXRoLCBuZXdQYXRoKSkge1xuICAgICAgICAgIHJldHVybiB7IC4uLm9wLCBwYXRoOiBuZXdQYXRoLCBuZXdQYXRoOiBwYXRoIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSBtb3ZlIGRvZXMgbm90IGhhcHBlbiB3aXRoaW4gYSBzaW5nbGUgcGFyZW50IGl0IGlzIHBvc3NpYmxlXG4gICAgICAgIC8vIGZvciB0aGUgbW92ZSB0byBpbXBhY3QgdGhlIHRydWUgcGF0aCB0byB0aGUgbG9jYXRpb24gd2hlcmUgdGhlIG5vZGVcbiAgICAgICAgLy8gd2FzIHJlbW92ZWQgZnJvbSBhbmQgd2hlcmUgaXQgd2FzIGluc2VydGVkLiBXZSBoYXZlIHRvIGFkanVzdCBmb3IgdGhpc1xuICAgICAgICAvLyBhbmQgZmluZCB0aGUgb3JpZ2luYWwgcGF0aC4gV2UgY2FuIGFjY29tcGxpc2ggdGhpcyAob25seSBpbiBub24tc2libGluZylcbiAgICAgICAgLy8gbW92ZXMgYnkgbG9va2luZyBhdCB0aGUgaW1wYWN0IG9mIHRoZSBtb3ZlIG9wZXJhdGlvbiBvbiB0aGUgbm9kZVxuICAgICAgICAvLyBhZnRlciB0aGUgb3JpZ2luYWwgbW92ZSBwYXRoLlxuICAgICAgICBjb25zdCBpbnZlcnNlUGF0aCA9IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wKSFcbiAgICAgICAgY29uc3QgaW52ZXJzZU5ld1BhdGggPSBQYXRoLnRyYW5zZm9ybShQYXRoLm5leHQocGF0aCksIG9wKSFcbiAgICAgICAgcmV0dXJuIHsgLi4ub3AsIHBhdGg6IGludmVyc2VQYXRoLCBuZXdQYXRoOiBpbnZlcnNlTmV3UGF0aCB9XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JlbW92ZV9ub2RlJzoge1xuICAgICAgICByZXR1cm4geyAuLi5vcCwgdHlwZTogJ2luc2VydF9ub2RlJyB9XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JlbW92ZV90ZXh0Jzoge1xuICAgICAgICByZXR1cm4geyAuLi5vcCwgdHlwZTogJ2luc2VydF90ZXh0JyB9XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3NldF9ub2RlJzoge1xuICAgICAgICBjb25zdCB7IHByb3BlcnRpZXMsIG5ld1Byb3BlcnRpZXMgfSA9IG9wXG4gICAgICAgIHJldHVybiB7IC4uLm9wLCBwcm9wZXJ0aWVzOiBuZXdQcm9wZXJ0aWVzLCBuZXdQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzIH1cbiAgICAgIH1cblxuICAgICAgY2FzZSAnc2V0X3NlbGVjdGlvbic6IHtcbiAgICAgICAgY29uc3QgeyBwcm9wZXJ0aWVzLCBuZXdQcm9wZXJ0aWVzIH0gPSBvcFxuXG4gICAgICAgIGlmIChwcm9wZXJ0aWVzID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ub3AsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBuZXdQcm9wZXJ0aWVzIGFzIFJhbmdlLFxuICAgICAgICAgICAgbmV3UHJvcGVydGllczogbnVsbCxcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobmV3UHJvcGVydGllcyA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLm9wLFxuICAgICAgICAgICAgcHJvcGVydGllczogbnVsbCxcbiAgICAgICAgICAgIG5ld1Byb3BlcnRpZXM6IHByb3BlcnRpZXMgYXMgUmFuZ2UsXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7IC4uLm9wLCBwcm9wZXJ0aWVzOiBuZXdQcm9wZXJ0aWVzLCBuZXdQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYXNlICdzcGxpdF9ub2RlJzoge1xuICAgICAgICByZXR1cm4geyAuLi5vcCwgdHlwZTogJ21lcmdlX25vZGUnLCBwYXRoOiBQYXRoLm5leHQob3AucGF0aCkgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJ2lzLXBsYWluLW9iamVjdCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBPcGVyYXRpb24gfSBmcm9tICcuLi9pbnRlcmZhY2VzL29wZXJhdGlvbidcblxuY29uc3QgSVNfRURJVE9SX0NBQ0hFID0gbmV3IFdlYWtNYXA8b2JqZWN0LCBib29sZWFuPigpXG5cbmV4cG9ydCBjb25zdCBpc0VkaXRvcjogRWRpdG9ySW50ZXJmYWNlWydpc0VkaXRvciddID0gKFxuICB2YWx1ZTogYW55XG4pOiB2YWx1ZSBpcyBFZGl0b3IgPT4ge1xuICBjb25zdCBjYWNoZWRJc0VkaXRvciA9IElTX0VESVRPUl9DQUNIRS5nZXQodmFsdWUpXG4gIGlmIChjYWNoZWRJc0VkaXRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGNhY2hlZElzRWRpdG9yXG4gIH1cblxuICBpZiAoIWlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBjb25zdCBpc0VkaXRvciA9XG4gICAgdHlwZW9mIHZhbHVlLmFkZE1hcmsgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuYXBwbHkgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuZGVsZXRlRnJhZ21lbnQgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuaW5zZXJ0QnJlYWsgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuaW5zZXJ0U29mdEJyZWFrID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmluc2VydEZyYWdtZW50ID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLmluc2VydE5vZGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuaW5zZXJ0VGV4dCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5pc0VsZW1lbnRSZWFkT25seSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5pc0lubGluZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5pc1NlbGVjdGFibGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUuaXNWb2lkID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHZhbHVlLm5vcm1hbGl6ZU5vZGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUub25DaGFuZ2UgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgdmFsdWUucmVtb3ZlTWFyayA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5nZXREaXJ0eVBhdGhzID09PSAnZnVuY3Rpb24nICYmXG4gICAgKHZhbHVlLm1hcmtzID09PSBudWxsIHx8IGlzUGxhaW5PYmplY3QodmFsdWUubWFya3MpKSAmJlxuICAgICh2YWx1ZS5zZWxlY3Rpb24gPT09IG51bGwgfHwgUmFuZ2UuaXNSYW5nZSh2YWx1ZS5zZWxlY3Rpb24pKSAmJlxuICAgIE5vZGUuaXNOb2RlTGlzdCh2YWx1ZS5jaGlsZHJlbikgJiZcbiAgICBPcGVyYXRpb24uaXNPcGVyYXRpb25MaXN0KHZhbHVlLm9wZXJhdGlvbnMpXG4gIElTX0VESVRPUl9DQUNIRS5zZXQodmFsdWUsIGlzRWRpdG9yKVxuICByZXR1cm4gaXNFZGl0b3Jcbn1cbiIsICJpbXBvcnQge1xuICBBbmNlc3RvcixcbiAgRGVzY2VuZGFudCxcbiAgRWxlbWVudCxcbiAgRXh0ZW5kZWRUeXBlLFxuICBMb2NhdGlvbixcbiAgTm9kZSxcbiAgTm9kZUVudHJ5LFxuICBPcGVyYXRpb24sXG4gIFBhdGgsXG4gIFBhdGhSZWYsXG4gIFBvaW50LFxuICBQb2ludFJlZixcbiAgUmFuZ2UsXG4gIFJhbmdlUmVmLFxuICBTcGFuLFxuICBUZXh0LFxuICBUcmFuc2Zvcm1zLFxufSBmcm9tICcuLidcbmltcG9ydCB7XG4gIExlYWZFZGdlLFxuICBNYXhpbWl6ZU1vZGUsXG4gIFJhbmdlRGlyZWN0aW9uLFxuICBTZWxlY3Rpb25Nb2RlLFxuICBUZXh0RGlyZWN0aW9uLFxuICBUZXh0VW5pdCxcbiAgVGV4dFVuaXRBZGp1c3RtZW50LFxufSBmcm9tICcuLi90eXBlcy90eXBlcydcbmltcG9ydCB7IE9taXRGaXJzdEFyZyB9IGZyb20gJy4uL3V0aWxzL3R5cGVzJ1xuaW1wb3J0IHsgaXNFZGl0b3IgfSBmcm9tICcuLi9lZGl0b3IvaXMtZWRpdG9yJ1xuaW1wb3J0IHtcbiAgVGV4dEluc2VydEZyYWdtZW50T3B0aW9ucyxcbiAgVGV4dEluc2VydFRleHRPcHRpb25zLFxufSBmcm9tICcuL3RyYW5zZm9ybXMvdGV4dCdcbmltcG9ydCB7IE5vZGVJbnNlcnROb2Rlc09wdGlvbnMgfSBmcm9tICcuL3RyYW5zZm9ybXMvbm9kZSdcblxuLyoqXG4gKiBUaGUgYEVkaXRvcmAgaW50ZXJmYWNlIHN0b3JlcyBhbGwgdGhlIHN0YXRlIG9mIGEgU2xhdGUgZWRpdG9yLiBJdCBpcyBleHRlbmRlZFxuICogYnkgcGx1Z2lucyB0aGF0IHdpc2ggdG8gYWRkIHRoZWlyIG93biBoZWxwZXJzIGFuZCBpbXBsZW1lbnQgbmV3IGJlaGF2aW9ycy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCYXNlRWRpdG9yIHtcbiAgLy8gQ29yZSBzdGF0ZS5cblxuICBjaGlsZHJlbjogRGVzY2VuZGFudFtdXG4gIHNlbGVjdGlvbjogU2VsZWN0aW9uXG4gIG9wZXJhdGlvbnM6IE9wZXJhdGlvbltdXG4gIG1hcmtzOiBFZGl0b3JNYXJrcyB8IG51bGxcblxuICAvLyBPdmVycmlkZWFibGUgY29yZSBtZXRob2RzLlxuXG4gIGFwcGx5OiAob3BlcmF0aW9uOiBPcGVyYXRpb24pID0+IHZvaWRcbiAgZ2V0RGlydHlQYXRoczogKG9wZXJhdGlvbjogT3BlcmF0aW9uKSA9PiBQYXRoW11cbiAgZ2V0RnJhZ21lbnQ6ICgpID0+IERlc2NlbmRhbnRbXVxuICBpc0VsZW1lbnRSZWFkT25seTogKGVsZW1lbnQ6IEVsZW1lbnQpID0+IGJvb2xlYW5cbiAgaXNTZWxlY3RhYmxlOiAoZWxlbWVudDogRWxlbWVudCkgPT4gYm9vbGVhblxuICBtYXJrYWJsZVZvaWQ6IChlbGVtZW50OiBFbGVtZW50KSA9PiBib29sZWFuXG4gIG5vcm1hbGl6ZU5vZGU6IChlbnRyeTogTm9kZUVudHJ5LCBvcHRpb25zPzogeyBvcGVyYXRpb24/OiBPcGVyYXRpb24gfSkgPT4gdm9pZFxuICBvbkNoYW5nZTogKG9wdGlvbnM/OiB7IG9wZXJhdGlvbj86IE9wZXJhdGlvbiB9KSA9PiB2b2lkXG4gIHNob3VsZE5vcm1hbGl6ZTogKHtcbiAgICBpdGVyYXRpb24sXG4gICAgZGlydHlQYXRocyxcbiAgICBvcGVyYXRpb24sXG4gIH06IHtcbiAgICBpdGVyYXRpb246IG51bWJlclxuICAgIGluaXRpYWxEaXJ0eVBhdGhzTGVuZ3RoOiBudW1iZXJcbiAgICBkaXJ0eVBhdGhzOiBQYXRoW11cbiAgICBvcGVyYXRpb24/OiBPcGVyYXRpb25cbiAgfSkgPT4gYm9vbGVhblxuXG4gIC8vIE92ZXJyaWRlYWJsZSBjb3JlIHRyYW5zZm9ybXMuXG5cbiAgYWRkTWFyazogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuYWRkTWFyaz5cbiAgY29sbGFwc2U6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5jb2xsYXBzZT5cbiAgZGVsZXRlOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMuZGVsZXRlPlxuICBkZWxldGVCYWNrd2FyZDogKHVuaXQ6IFRleHRVbml0KSA9PiB2b2lkXG4gIGRlbGV0ZUZvcndhcmQ6ICh1bml0OiBUZXh0VW5pdCkgPT4gdm9pZFxuICBkZWxldGVGcmFnbWVudDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuZGVsZXRlRnJhZ21lbnQ+XG4gIGRlc2VsZWN0OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMuZGVzZWxlY3Q+XG4gIGluc2VydEJyZWFrOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5pbnNlcnRCcmVhaz5cbiAgaW5zZXJ0RnJhZ21lbnQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5pbnNlcnRGcmFnbWVudD5cbiAgaW5zZXJ0Tm9kZTogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaW5zZXJ0Tm9kZT5cbiAgaW5zZXJ0Tm9kZXM6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5pbnNlcnROb2Rlcz5cbiAgaW5zZXJ0U29mdEJyZWFrOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5pbnNlcnRTb2Z0QnJlYWs+XG4gIGluc2VydFRleHQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5pbnNlcnRUZXh0PlxuICBsaWZ0Tm9kZXM6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5saWZ0Tm9kZXM+XG4gIG1lcmdlTm9kZXM6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5tZXJnZU5vZGVzPlxuICBtb3ZlOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMubW92ZT5cbiAgbW92ZU5vZGVzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMubW92ZU5vZGVzPlxuICBub3JtYWxpemU6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLm5vcm1hbGl6ZT5cbiAgcmVtb3ZlTWFyazogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucmVtb3ZlTWFyaz5cbiAgcmVtb3ZlTm9kZXM6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5yZW1vdmVOb2Rlcz5cbiAgc2VsZWN0OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMuc2VsZWN0PlxuICBzZXROb2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBwcm9wczogUGFydGlhbDxUPixcbiAgICBvcHRpb25zPzoge1xuICAgICAgYXQ/OiBMb2NhdGlvblxuICAgICAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgICAgIG1vZGU/OiBNYXhpbWl6ZU1vZGVcbiAgICAgIGhhbmdpbmc/OiBib29sZWFuXG4gICAgICBzcGxpdD86IGJvb2xlYW5cbiAgICAgIHZvaWRzPzogYm9vbGVhblxuICAgICAgY29tcGFyZT86IFByb3BzQ29tcGFyZVxuICAgICAgbWVyZ2U/OiBQcm9wc01lcmdlXG4gICAgfVxuICApID0+IHZvaWRcbiAgc2V0Tm9ybWFsaXppbmc6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnNldE5vcm1hbGl6aW5nPlxuICBzZXRQb2ludDogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLnNldFBvaW50PlxuICBzZXRTZWxlY3Rpb246IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5zZXRTZWxlY3Rpb24+XG4gIHNwbGl0Tm9kZXM6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzPlxuICB1bnNldE5vZGVzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIFRyYW5zZm9ybXMudW5zZXROb2Rlcz5cbiAgdW53cmFwTm9kZXM6IE9taXRGaXJzdEFyZzx0eXBlb2YgVHJhbnNmb3Jtcy51bndyYXBOb2Rlcz5cbiAgd2l0aG91dE5vcm1hbGl6aW5nOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmc+XG4gIHdyYXBOb2RlczogT21pdEZpcnN0QXJnPHR5cGVvZiBUcmFuc2Zvcm1zLndyYXBOb2Rlcz5cblxuICAvLyBPdmVycmlkZWFibGUgY29yZSBxdWVyaWVzLlxuXG4gIGFib3ZlOiA8VCBleHRlbmRzIEFuY2VzdG9yPihcbiAgICBvcHRpb25zPzogRWRpdG9yQWJvdmVPcHRpb25zPFQ+XG4gICkgPT4gTm9kZUVudHJ5PFQ+IHwgdW5kZWZpbmVkXG4gIGFmdGVyOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5hZnRlcj5cbiAgYmVmb3JlOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5iZWZvcmU+XG4gIGVkZ2VzOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5lZGdlcz5cbiAgZWxlbWVudFJlYWRPbmx5OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5lbGVtZW50UmVhZE9ubHk+XG4gIGVuZDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuZW5kPlxuICBmaXJzdDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuZmlyc3Q+XG4gIGZyYWdtZW50OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5mcmFnbWVudD5cbiAgZ2V0TWFya3M6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLm1hcmtzPlxuICBoYXNCbG9ja3M6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmhhc0Jsb2Nrcz5cbiAgaGFzSW5saW5lczogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaGFzSW5saW5lcz5cbiAgaGFzUGF0aDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaGFzUGF0aD5cbiAgaGFzVGV4dHM6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmhhc1RleHRzPlxuICBpc0Jsb2NrOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5pc0Jsb2NrPlxuICBpc0VkZ2U6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmlzRWRnZT5cbiAgaXNFbXB0eTogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaXNFbXB0eT5cbiAgaXNFbmQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmlzRW5kPlxuICBpc0lubGluZTogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaXNJbmxpbmU+XG4gIGlzTm9ybWFsaXppbmc6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmlzTm9ybWFsaXppbmc+XG4gIGlzU3RhcnQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLmlzU3RhcnQ+XG4gIGlzVm9pZDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IuaXNWb2lkPlxuICBsYXN0OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5sYXN0PlxuICBsZWFmOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5sZWFmPlxuICBsZXZlbHM6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgb3B0aW9ucz86IEVkaXRvckxldmVsc09wdGlvbnM8VD5cbiAgKSA9PiBHZW5lcmF0b3I8Tm9kZUVudHJ5PFQ+LCB2b2lkLCB1bmRlZmluZWQ+XG4gIG5leHQ6IDxUIGV4dGVuZHMgRGVzY2VuZGFudD4oXG4gICAgb3B0aW9ucz86IEVkaXRvck5leHRPcHRpb25zPFQ+XG4gICkgPT4gTm9kZUVudHJ5PFQ+IHwgdW5kZWZpbmVkXG4gIG5vZGU6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLm5vZGU+XG4gIG5vZGVzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIG9wdGlvbnM/OiBFZGl0b3JOb2Rlc09wdGlvbnM8VD5cbiAgKSA9PiBHZW5lcmF0b3I8Tm9kZUVudHJ5PFQ+LCB2b2lkLCB1bmRlZmluZWQ+XG4gIHBhcmVudDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucGFyZW50PlxuICBwYXRoOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5wYXRoPlxuICBwYXRoUmVmOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5wYXRoUmVmPlxuICBwYXRoUmVmczogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucGF0aFJlZnM+XG4gIHBvaW50OiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5wb2ludD5cbiAgcG9pbnRSZWY6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnBvaW50UmVmPlxuICBwb2ludFJlZnM6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnBvaW50UmVmcz5cbiAgcG9zaXRpb25zOiBPbWl0Rmlyc3RBcmc8dHlwZW9mIEVkaXRvci5wb3NpdGlvbnM+XG4gIHByZXZpb3VzOiA8VCBleHRlbmRzIE5vZGU+KFxuICAgIG9wdGlvbnM/OiBFZGl0b3JQcmV2aW91c09wdGlvbnM8VD5cbiAgKSA9PiBOb2RlRW50cnk8VD4gfCB1bmRlZmluZWRcbiAgcmFuZ2U6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnJhbmdlPlxuICByYW5nZVJlZjogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucmFuZ2VSZWY+XG4gIHJhbmdlUmVmczogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IucmFuZ2VSZWZzPlxuICBzdGFydDogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3Iuc3RhcnQ+XG4gIHN0cmluZzogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3Iuc3RyaW5nPlxuICB1bmhhbmdSYW5nZTogT21pdEZpcnN0QXJnPHR5cGVvZiBFZGl0b3IudW5oYW5nUmFuZ2U+XG4gIHZvaWQ6IE9taXRGaXJzdEFyZzx0eXBlb2YgRWRpdG9yLnZvaWQ+XG59XG5cbmV4cG9ydCB0eXBlIEVkaXRvciA9IEV4dGVuZGVkVHlwZTwnRWRpdG9yJywgQmFzZUVkaXRvcj5cblxuZXhwb3J0IHR5cGUgQmFzZVNlbGVjdGlvbiA9IFJhbmdlIHwgbnVsbFxuXG5leHBvcnQgdHlwZSBTZWxlY3Rpb24gPSBFeHRlbmRlZFR5cGU8J1NlbGVjdGlvbicsIEJhc2VTZWxlY3Rpb24+XG5cbmV4cG9ydCB0eXBlIEVkaXRvck1hcmtzID0gT21pdDxUZXh0LCAndGV4dCc+XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yQWJvdmVPcHRpb25zPFQgZXh0ZW5kcyBBbmNlc3Rvcj4ge1xuICBhdD86IExvY2F0aW9uXG4gIG1hdGNoPzogTm9kZU1hdGNoPFQ+XG4gIG1vZGU/OiBNYXhpbWl6ZU1vZGVcbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yQWZ0ZXJPcHRpb25zIHtcbiAgZGlzdGFuY2U/OiBudW1iZXJcbiAgdW5pdD86IFRleHRVbml0QWRqdXN0bWVudFxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JCZWZvcmVPcHRpb25zIHtcbiAgZGlzdGFuY2U/OiBudW1iZXJcbiAgdW5pdD86IFRleHRVbml0QWRqdXN0bWVudFxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JEaXJlY3RlZERlbGV0aW9uT3B0aW9ucyB7XG4gIHVuaXQ/OiBUZXh0VW5pdFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvckVsZW1lbnRSZWFkT25seU9wdGlvbnMge1xuICBhdD86IExvY2F0aW9uXG4gIG1vZGU/OiBNYXhpbWl6ZU1vZGVcbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yRnJhZ21lbnREZWxldGlvbk9wdGlvbnMge1xuICBkaXJlY3Rpb24/OiBUZXh0RGlyZWN0aW9uXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yTGVhZk9wdGlvbnMge1xuICBkZXB0aD86IG51bWJlclxuICBlZGdlPzogTGVhZkVkZ2Vcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JMZXZlbHNPcHRpb25zPFQgZXh0ZW5kcyBOb2RlPiB7XG4gIGF0PzogTG9jYXRpb25cbiAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgcmV2ZXJzZT86IGJvb2xlYW5cbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yTmV4dE9wdGlvbnM8VCBleHRlbmRzIERlc2NlbmRhbnQ+IHtcbiAgYXQ/OiBMb2NhdGlvblxuICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICBtb2RlPzogU2VsZWN0aW9uTW9kZVxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JOb2RlT3B0aW9ucyB7XG4gIGRlcHRoPzogbnVtYmVyXG4gIGVkZ2U/OiBMZWFmRWRnZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvck5vZGVzT3B0aW9uczxUIGV4dGVuZHMgTm9kZT4ge1xuICBhdD86IExvY2F0aW9uIHwgU3BhblxuICBtYXRjaD86IE5vZGVNYXRjaDxUPlxuICBtb2RlPzogU2VsZWN0aW9uTW9kZVxuICB1bml2ZXJzYWw/OiBib29sZWFuXG4gIHJldmVyc2U/OiBib29sZWFuXG4gIHZvaWRzPzogYm9vbGVhblxuICBpZ25vcmVOb25TZWxlY3RhYmxlPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvck5vcm1hbGl6ZU9wdGlvbnMge1xuICBmb3JjZT86IGJvb2xlYW5cbiAgb3BlcmF0aW9uPzogT3BlcmF0aW9uXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yUGFyZW50T3B0aW9ucyB7XG4gIGRlcHRoPzogbnVtYmVyXG4gIGVkZ2U/OiBMZWFmRWRnZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvclBhdGhPcHRpb25zIHtcbiAgZGVwdGg/OiBudW1iZXJcbiAgZWRnZT86IExlYWZFZGdlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yUGF0aFJlZk9wdGlvbnMge1xuICBhZmZpbml0eT86IFRleHREaXJlY3Rpb24gfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yUG9pbnRPcHRpb25zIHtcbiAgZWRnZT86IExlYWZFZGdlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yUG9pbnRSZWZPcHRpb25zIHtcbiAgYWZmaW5pdHk/OiBUZXh0RGlyZWN0aW9uIHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvclBvc2l0aW9uc09wdGlvbnMge1xuICBhdD86IExvY2F0aW9uXG4gIHVuaXQ/OiBUZXh0VW5pdEFkanVzdG1lbnRcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbiAgdm9pZHM/OiBib29sZWFuXG4gIGlnbm9yZU5vblNlbGVjdGFibGU/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yUHJldmlvdXNPcHRpb25zPFQgZXh0ZW5kcyBOb2RlPiB7XG4gIGF0PzogTG9jYXRpb25cbiAgbWF0Y2g/OiBOb2RlTWF0Y2g8VD5cbiAgbW9kZT86IFNlbGVjdGlvbk1vZGVcbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yUmFuZ2VSZWZPcHRpb25zIHtcbiAgYWZmaW5pdHk/OiBSYW5nZURpcmVjdGlvbiB8IG51bGxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JTdHJpbmdPcHRpb25zIHtcbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yVW5oYW5nUmFuZ2VPcHRpb25zIHtcbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yVm9pZE9wdGlvbnMge1xuICBhdD86IExvY2F0aW9uXG4gIG1vZGU/OiBNYXhpbWl6ZU1vZGVcbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9ySW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIEdldCB0aGUgYW5jZXN0b3IgYWJvdmUgYSBsb2NhdGlvbiBpbiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBhYm92ZTogPFQgZXh0ZW5kcyBBbmNlc3Rvcj4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvckFib3ZlT3B0aW9uczxUPlxuICApID0+IE5vZGVFbnRyeTxUPiB8IHVuZGVmaW5lZFxuXG4gIC8qKlxuICAgKiBBZGQgYSBjdXN0b20gcHJvcGVydHkgdG8gdGhlIGxlYWYgdGV4dCBub2RlcyBpbiB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAqXG4gICAqIElmIHRoZSBzZWxlY3Rpb24gaXMgY3VycmVudGx5IGNvbGxhcHNlZCwgdGhlIG1hcmtzIHdpbGwgYmUgYWRkZWQgdG8gdGhlXG4gICAqIGBlZGl0b3IubWFya3NgIHByb3BlcnR5IGluc3RlYWQsIGFuZCBhcHBsaWVkIHdoZW4gdGV4dCBpcyBpbnNlcnRlZCBuZXh0LlxuICAgKi9cbiAgYWRkTWFyazogKGVkaXRvcjogRWRpdG9yLCBrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBvaW50IGFmdGVyIGEgbG9jYXRpb24uXG4gICAqL1xuICBhZnRlcjogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIGF0OiBMb2NhdGlvbixcbiAgICBvcHRpb25zPzogRWRpdG9yQWZ0ZXJPcHRpb25zXG4gICkgPT4gUG9pbnQgfCB1bmRlZmluZWRcblxuICAvKipcbiAgICogR2V0IHRoZSBwb2ludCBiZWZvcmUgYSBsb2NhdGlvbi5cbiAgICovXG4gIGJlZm9yZTogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIGF0OiBMb2NhdGlvbixcbiAgICBvcHRpb25zPzogRWRpdG9yQmVmb3JlT3B0aW9uc1xuICApID0+IFBvaW50IHwgdW5kZWZpbmVkXG5cbiAgLyoqXG4gICAqIERlbGV0ZSBjb250ZW50IGluIHRoZSBlZGl0b3IgYmFja3dhcmQgZnJvbSB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAqL1xuICBkZWxldGVCYWNrd2FyZDogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JEaXJlY3RlZERlbGV0aW9uT3B0aW9uc1xuICApID0+IHZvaWRcblxuICAvKipcbiAgICogRGVsZXRlIGNvbnRlbnQgaW4gdGhlIGVkaXRvciBmb3J3YXJkIGZyb20gdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKi9cbiAgZGVsZXRlRm9yd2FyZDogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JEaXJlY3RlZERlbGV0aW9uT3B0aW9uc1xuICApID0+IHZvaWRcblxuICAvKipcbiAgICogRGVsZXRlIHRoZSBjb250ZW50IGluIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICovXG4gIGRlbGV0ZUZyYWdtZW50OiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvckZyYWdtZW50RGVsZXRpb25PcHRpb25zXG4gICkgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0YXJ0IGFuZCBlbmQgcG9pbnRzIG9mIGEgbG9jYXRpb24uXG4gICAqL1xuICBlZGdlczogKGVkaXRvcjogRWRpdG9yLCBhdDogTG9jYXRpb24pID0+IFtQb2ludCwgUG9pbnRdXG5cbiAgLyoqXG4gICAqIE1hdGNoIGEgcmVhZC1vbmx5IGVsZW1lbnQgaW4gdGhlIGN1cnJlbnQgYnJhbmNoIG9mIHRoZSBlZGl0b3IuXG4gICAqL1xuICBlbGVtZW50UmVhZE9ubHk6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yRWxlbWVudFJlYWRPbmx5T3B0aW9uc1xuICApID0+IE5vZGVFbnRyeTxFbGVtZW50PiB8IHVuZGVmaW5lZFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGVuZCBwb2ludCBvZiBhIGxvY2F0aW9uLlxuICAgKi9cbiAgZW5kOiAoZWRpdG9yOiBFZGl0b3IsIGF0OiBMb2NhdGlvbikgPT4gUG9pbnRcblxuICAvKipcbiAgICogR2V0IHRoZSBmaXJzdCBub2RlIGF0IGEgbG9jYXRpb24uXG4gICAqL1xuICBmaXJzdDogKGVkaXRvcjogRWRpdG9yLCBhdDogTG9jYXRpb24pID0+IE5vZGVFbnRyeVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGZyYWdtZW50IGF0IGEgbG9jYXRpb24uXG4gICAqL1xuICBmcmFnbWVudDogKGVkaXRvcjogRWRpdG9yLCBhdDogTG9jYXRpb24pID0+IERlc2NlbmRhbnRbXVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIG5vZGUgaGFzIGJsb2NrIGNoaWxkcmVuLlxuICAgKi9cbiAgaGFzQmxvY2tzOiAoZWRpdG9yOiBFZGl0b3IsIGVsZW1lbnQ6IEVsZW1lbnQpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBub2RlIGhhcyBpbmxpbmUgYW5kIHRleHQgY2hpbGRyZW4uXG4gICAqL1xuICBoYXNJbmxpbmVzOiAoZWRpdG9yOiBFZGl0b3IsIGVsZW1lbnQ6IEVsZW1lbnQpID0+IGJvb2xlYW5cblxuICBoYXNQYXRoOiAoZWRpdG9yOiBFZGl0b3IsIHBhdGg6IFBhdGgpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBub2RlIGhhcyB0ZXh0IGNoaWxkcmVuLlxuICAgKi9cbiAgaGFzVGV4dHM6IChlZGl0b3I6IEVkaXRvciwgZWxlbWVudDogRWxlbWVudCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBJbnNlcnQgYSBibG9jayBicmVhayBhdCB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAqXG4gICAqIElmIHRoZSBzZWxlY3Rpb24gaXMgY3VycmVudGx5IGV4cGFuZGVkLCBpdCB3aWxsIGJlIGRlbGV0ZWQgZmlyc3QuXG4gICAqL1xuICBpbnNlcnRCcmVhazogKGVkaXRvcjogRWRpdG9yKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIEluc2VydHMgYSBmcmFnbWVudFxuICAgKiBhdCB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBpbnNlcnRGcmFnbWVudDogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIGZyYWdtZW50OiBOb2RlW10sXG4gICAgb3B0aW9ucz86IFRleHRJbnNlcnRGcmFnbWVudE9wdGlvbnNcbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIEF0b21pY2FsbHkgaW5zZXJ0cyBgbm9kZXNgXG4gICAqIGF0IHRoZSBzcGVjaWZpZWQgbG9jYXRpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgY3VycmVudCBzZWxlY3Rpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIGluc2VydE5vZGU6IDxUIGV4dGVuZHMgTm9kZT4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgbm9kZTogTm9kZSxcbiAgICBvcHRpb25zPzogTm9kZUluc2VydE5vZGVzT3B0aW9uczxUPlxuICApID0+IHZvaWRcblxuICAvKipcbiAgICogSW5zZXJ0IGEgc29mdCBicmVhayBhdCB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAqXG4gICAqIElmIHRoZSBzZWxlY3Rpb24gaXMgY3VycmVudGx5IGV4cGFuZGVkLCBpdCB3aWxsIGJlIGRlbGV0ZWQgZmlyc3QuXG4gICAqL1xuICBpbnNlcnRTb2Z0QnJlYWs6IChlZGl0b3I6IEVkaXRvcikgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBJbnNlcnQgYSBzdHJpbmcgb2YgdGV4dFxuICAgKiBhdCB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBpbnNlcnRUZXh0OiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgdGV4dDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBUZXh0SW5zZXJ0VGV4dE9wdGlvbnNcbiAgKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBibG9jayBgRWxlbWVudGAgb2JqZWN0LlxuICAgKi9cbiAgaXNCbG9jazogKGVkaXRvcjogRWRpdG9yLCB2YWx1ZTogRWxlbWVudCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBvaW50IGlzIGFuIGVkZ2Ugb2YgYSBsb2NhdGlvbi5cbiAgICovXG4gIGlzRWRnZTogKGVkaXRvcjogRWRpdG9yLCBwb2ludDogUG9pbnQsIGF0OiBMb2NhdGlvbikgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGFuIGBFZGl0b3JgIG9iamVjdC5cbiAgICovXG4gIGlzRWRpdG9yOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgRWRpdG9yXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSByZWFkLW9ubHkgYEVsZW1lbnRgIG9iamVjdC5cbiAgICovXG4gIGlzRWxlbWVudFJlYWRPbmx5OiAoZWRpdG9yOiBFZGl0b3IsIGVsZW1lbnQ6IEVsZW1lbnQpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBlbXB0eSwgYWNjb3VudGluZyBmb3Igdm9pZCBub2Rlcy5cbiAgICovXG4gIGlzRW1wdHk6IChlZGl0b3I6IEVkaXRvciwgZWxlbWVudDogRWxlbWVudCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBvaW50IGlzIHRoZSBlbmQgcG9pbnQgb2YgYSBsb2NhdGlvbi5cbiAgICovXG4gIGlzRW5kOiAoZWRpdG9yOiBFZGl0b3IsIHBvaW50OiBQb2ludCwgYXQ6IExvY2F0aW9uKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYW4gaW5saW5lIGBFbGVtZW50YCBvYmplY3QuXG4gICAqL1xuICBpc0lubGluZTogKGVkaXRvcjogRWRpdG9yLCB2YWx1ZTogRWxlbWVudCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgZWRpdG9yIGlzIGN1cnJlbnRseSBub3JtYWxpemluZyBhZnRlciBlYWNoIG9wZXJhdGlvbi5cbiAgICovXG4gIGlzTm9ybWFsaXppbmc6IChlZGl0b3I6IEVkaXRvcikgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgc2VsZWN0YWJsZSBgRWxlbWVudGAgb2JqZWN0LlxuICAgKi9cbiAgaXNTZWxlY3RhYmxlOiAoZWRpdG9yOiBFZGl0b3IsIGVsZW1lbnQ6IEVsZW1lbnQpID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwb2ludCBpcyB0aGUgc3RhcnQgcG9pbnQgb2YgYSBsb2NhdGlvbi5cbiAgICovXG4gIGlzU3RhcnQ6IChlZGl0b3I6IEVkaXRvciwgcG9pbnQ6IFBvaW50LCBhdDogTG9jYXRpb24pID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIHZvaWQgYEVsZW1lbnRgIG9iamVjdC5cbiAgICovXG4gIGlzVm9pZDogKGVkaXRvcjogRWRpdG9yLCB2YWx1ZTogRWxlbWVudCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxhc3Qgbm9kZSBhdCBhIGxvY2F0aW9uLlxuICAgKi9cbiAgbGFzdDogKGVkaXRvcjogRWRpdG9yLCBhdDogTG9jYXRpb24pID0+IE5vZGVFbnRyeVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxlYWYgdGV4dCBub2RlIGF0IGEgbG9jYXRpb24uXG4gICAqL1xuICBsZWFmOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgYXQ6IExvY2F0aW9uLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JMZWFmT3B0aW9uc1xuICApID0+IE5vZGVFbnRyeTxUZXh0PlxuXG4gIC8qKlxuICAgKiBJdGVyYXRlIHRocm91Z2ggYWxsIG9mIHRoZSBsZXZlbHMgYXQgYSBsb2NhdGlvbi5cbiAgICovXG4gIGxldmVsczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yTGV2ZWxzT3B0aW9uczxUPlxuICApID0+IEdlbmVyYXRvcjxOb2RlRW50cnk8VD4sIHZvaWQsIHVuZGVmaW5lZD5cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXJrcyB0aGF0IHdvdWxkIGJlIGFkZGVkIHRvIHRleHQgYXQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKi9cbiAgbWFya3M6IChlZGl0b3I6IEVkaXRvcikgPT4gT21pdDxUZXh0LCAndGV4dCc+IHwgbnVsbFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1hdGNoaW5nIG5vZGUgaW4gdGhlIGJyYW5jaCBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYSBsb2NhdGlvbi5cbiAgICovXG4gIG5leHQ6IDxUIGV4dGVuZHMgRGVzY2VuZGFudD4oXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgb3B0aW9ucz86IEVkaXRvck5leHRPcHRpb25zPFQ+XG4gICkgPT4gTm9kZUVudHJ5PFQ+IHwgdW5kZWZpbmVkXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbm9kZSBhdCBhIGxvY2F0aW9uLlxuICAgKi9cbiAgbm9kZTogKGVkaXRvcjogRWRpdG9yLCBhdDogTG9jYXRpb24sIG9wdGlvbnM/OiBFZGl0b3JOb2RlT3B0aW9ucykgPT4gTm9kZUVudHJ5XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgdGhyb3VnaCBhbGwgb2YgdGhlIG5vZGVzIGluIHRoZSBFZGl0b3IuXG4gICAqL1xuICBub2RlczogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yTm9kZXNPcHRpb25zPFQ+XG4gICkgPT4gR2VuZXJhdG9yPE5vZGVFbnRyeTxUPiwgdm9pZCwgdW5kZWZpbmVkPlxuXG4gIC8qKlxuICAgKiBOb3JtYWxpemUgYW55IGRpcnR5IG9iamVjdHMgaW4gdGhlIGVkaXRvci5cbiAgICovXG4gIG5vcm1hbGl6ZTogKGVkaXRvcjogRWRpdG9yLCBvcHRpb25zPzogRWRpdG9yTm9ybWFsaXplT3B0aW9ucykgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBhcmVudCBub2RlIG9mIGEgbG9jYXRpb24uXG4gICAqL1xuICBwYXJlbnQ6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBhdDogTG9jYXRpb24sXG4gICAgb3B0aW9ucz86IEVkaXRvclBhcmVudE9wdGlvbnNcbiAgKSA9PiBOb2RlRW50cnk8QW5jZXN0b3I+XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcGF0aCBvZiBhIGxvY2F0aW9uLlxuICAgKi9cbiAgcGF0aDogKGVkaXRvcjogRWRpdG9yLCBhdDogTG9jYXRpb24sIG9wdGlvbnM/OiBFZGl0b3JQYXRoT3B0aW9ucykgPT4gUGF0aFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBtdXRhYmxlIHJlZiBmb3IgYSBgUGF0aGAgb2JqZWN0LCB3aGljaCB3aWxsIHN0YXkgaW4gc3luYyBhcyBuZXdcbiAgICogb3BlcmF0aW9ucyBhcmUgYXBwbGllZCB0byB0aGUgZWRpdG9yLlxuICAgKi9cbiAgcGF0aFJlZjogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIHBhdGg6IFBhdGgsXG4gICAgb3B0aW9ucz86IEVkaXRvclBhdGhSZWZPcHRpb25zXG4gICkgPT4gUGF0aFJlZlxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNldCBvZiBjdXJyZW50bHkgdHJhY2tlZCBwYXRoIHJlZnMgb2YgdGhlIGVkaXRvci5cbiAgICovXG4gIHBhdGhSZWZzOiAoZWRpdG9yOiBFZGl0b3IpID0+IFNldDxQYXRoUmVmPlxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0YXJ0IG9yIGVuZCBwb2ludCBvZiBhIGxvY2F0aW9uLlxuICAgKi9cbiAgcG9pbnQ6IChlZGl0b3I6IEVkaXRvciwgYXQ6IExvY2F0aW9uLCBvcHRpb25zPzogRWRpdG9yUG9pbnRPcHRpb25zKSA9PiBQb2ludFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBtdXRhYmxlIHJlZiBmb3IgYSBgUG9pbnRgIG9iamVjdCwgd2hpY2ggd2lsbCBzdGF5IGluIHN5bmMgYXMgbmV3XG4gICAqIG9wZXJhdGlvbnMgYXJlIGFwcGxpZWQgdG8gdGhlIGVkaXRvci5cbiAgICovXG4gIHBvaW50UmVmOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgcG9pbnQ6IFBvaW50LFxuICAgIG9wdGlvbnM/OiBFZGl0b3JQb2ludFJlZk9wdGlvbnNcbiAgKSA9PiBQb2ludFJlZlxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNldCBvZiBjdXJyZW50bHkgdHJhY2tlZCBwb2ludCByZWZzIG9mIHRoZSBlZGl0b3IuXG4gICAqL1xuICBwb2ludFJlZnM6IChlZGl0b3I6IEVkaXRvcikgPT4gU2V0PFBvaW50UmVmPlxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYWxsIHRoZSBwb3NpdGlvbnMgaW4gYGF0YCByYW5nZSB3aGVyZSBhIGBQb2ludGAgY2FuIGJlIHBsYWNlZC5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgbW92ZXMgZm9yd2FyZCBieSBpbmRpdmlkdWFsIG9mZnNldHMgYXQgYSB0aW1lLCBidXRcbiAgICogdGhlIGB1bml0YCBvcHRpb24gY2FuIGJlIHVzZWQgdG8gdG8gbW92ZSBieSBjaGFyYWN0ZXIsIHdvcmQsIGxpbmUsIG9yIGJsb2NrLlxuICAgKlxuICAgKiBUaGUgYHJldmVyc2VgIG9wdGlvbiBjYW4gYmUgdXNlZCB0byBjaGFuZ2UgaXRlcmF0aW9uIGRpcmVjdGlvbi5cbiAgICpcbiAgICogTm90ZTogQnkgZGVmYXVsdCB2b2lkIG5vZGVzIGFyZSB0cmVhdGVkIGFzIGEgc2luZ2xlIHBvaW50IGFuZCBpdGVyYXRpb25cbiAgICogd2lsbCBub3QgaGFwcGVuIGluc2lkZSB0aGVpciBjb250ZW50IHVubGVzcyB5b3UgcGFzcyBpbiB0cnVlIGZvciB0aGVcbiAgICogYHZvaWRzYCBvcHRpb24sIHRoZW4gaXRlcmF0aW9uIHdpbGwgb2NjdXIuXG4gICAqL1xuICBwb3NpdGlvbnM6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yUG9zaXRpb25zT3B0aW9uc1xuICApID0+IEdlbmVyYXRvcjxQb2ludCwgdm9pZCwgdW5kZWZpbmVkPlxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1hdGNoaW5nIG5vZGUgaW4gdGhlIGJyYW5jaCBvZiB0aGUgZG9jdW1lbnQgYmVmb3JlIGEgbG9jYXRpb24uXG4gICAqL1xuICBwcmV2aW91czogPFQgZXh0ZW5kcyBOb2RlPihcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBvcHRpb25zPzogRWRpdG9yUHJldmlvdXNPcHRpb25zPFQ+XG4gICkgPT4gTm9kZUVudHJ5PFQ+IHwgdW5kZWZpbmVkXG5cbiAgLyoqXG4gICAqIEdldCBhIHJhbmdlIG9mIGEgbG9jYXRpb24uXG4gICAqL1xuICByYW5nZTogKGVkaXRvcjogRWRpdG9yLCBhdDogTG9jYXRpb24sIHRvPzogTG9jYXRpb24pID0+IFJhbmdlXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG11dGFibGUgcmVmIGZvciBhIGBSYW5nZWAgb2JqZWN0LCB3aGljaCB3aWxsIHN0YXkgaW4gc3luYyBhcyBuZXdcbiAgICogb3BlcmF0aW9ucyBhcmUgYXBwbGllZCB0byB0aGUgZWRpdG9yLlxuICAgKi9cbiAgcmFuZ2VSZWY6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICByYW5nZTogUmFuZ2UsXG4gICAgb3B0aW9ucz86IEVkaXRvclJhbmdlUmVmT3B0aW9uc1xuICApID0+IFJhbmdlUmVmXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2V0IG9mIGN1cnJlbnRseSB0cmFja2VkIHJhbmdlIHJlZnMgb2YgdGhlIGVkaXRvci5cbiAgICovXG4gIHJhbmdlUmVmczogKGVkaXRvcjogRWRpdG9yKSA9PiBTZXQ8UmFuZ2VSZWY+XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGN1c3RvbSBwcm9wZXJ0eSBmcm9tIGFsbCBvZiB0aGUgbGVhZiB0ZXh0IG5vZGVzIGluIHRoZSBjdXJyZW50XG4gICAqIHNlbGVjdGlvbi5cbiAgICpcbiAgICogSWYgdGhlIHNlbGVjdGlvbiBpcyBjdXJyZW50bHkgY29sbGFwc2VkLCB0aGUgcmVtb3ZhbCB3aWxsIGJlIHN0b3JlZCBvblxuICAgKiBgZWRpdG9yLm1hcmtzYCBhbmQgYXBwbGllZCB0byB0aGUgdGV4dCBpbnNlcnRlZCBuZXh0LlxuICAgKi9cbiAgcmVtb3ZlTWFyazogKGVkaXRvcjogRWRpdG9yLCBrZXk6IHN0cmluZykgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBNYW51YWxseSBzZXQgaWYgdGhlIGVkaXRvciBzaG91bGQgY3VycmVudGx5IGJlIG5vcm1hbGl6aW5nLlxuICAgKlxuICAgKiBOb3RlOiBVc2luZyB0aGlzIGluY29ycmVjdGx5IGNhbiBsZWF2ZSB0aGUgZWRpdG9yIGluIGFuIGludmFsaWQgc3RhdGUuXG4gICAqXG4gICAqL1xuICBzZXROb3JtYWxpemluZzogKGVkaXRvcjogRWRpdG9yLCBpc05vcm1hbGl6aW5nOiBib29sZWFuKSA9PiB2b2lkXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhcnQgcG9pbnQgb2YgYSBsb2NhdGlvbi5cbiAgICovXG4gIHN0YXJ0OiAoZWRpdG9yOiBFZGl0b3IsIGF0OiBMb2NhdGlvbikgPT4gUG9pbnRcblxuICAvKipcbiAgICogR2V0IHRoZSB0ZXh0IHN0cmluZyBjb250ZW50IG9mIGEgbG9jYXRpb24uXG4gICAqXG4gICAqIE5vdGU6IGJ5IGRlZmF1bHQgdGhlIHRleHQgb2Ygdm9pZCBub2RlcyBpcyBjb25zaWRlcmVkIHRvIGJlIGFuIGVtcHR5XG4gICAqIHN0cmluZywgcmVnYXJkbGVzcyBvZiBjb250ZW50LCB1bmxlc3MgeW91IHBhc3MgaW4gdHJ1ZSBmb3IgdGhlIHZvaWRzIG9wdGlvblxuICAgKi9cbiAgc3RyaW5nOiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgYXQ6IExvY2F0aW9uLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JTdHJpbmdPcHRpb25zXG4gICkgPT4gc3RyaW5nXG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYSByYW5nZSBpbnRvIGEgbm9uLWhhbmdpbmcgb25lLlxuICAgKi9cbiAgdW5oYW5nUmFuZ2U6IChcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICByYW5nZTogUmFuZ2UsXG4gICAgb3B0aW9ucz86IEVkaXRvclVuaGFuZ1JhbmdlT3B0aW9uc1xuICApID0+IFJhbmdlXG5cbiAgLyoqXG4gICAqIE1hdGNoIGEgdm9pZCBub2RlIGluIHRoZSBjdXJyZW50IGJyYW5jaCBvZiB0aGUgZWRpdG9yLlxuICAgKi9cbiAgdm9pZDogKFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JWb2lkT3B0aW9uc1xuICApID0+IE5vZGVFbnRyeTxFbGVtZW50PiB8IHVuZGVmaW5lZFxuXG4gIC8qKlxuICAgKiBDYWxsIGEgZnVuY3Rpb24sIGRlZmVycmluZyBub3JtYWxpemF0aW9uIHVudGlsIGFmdGVyIGl0IGNvbXBsZXRlcy5cbiAgICovXG4gIHdpdGhvdXROb3JtYWxpemluZzogKGVkaXRvcjogRWRpdG9yLCBmbjogKCkgPT4gdm9pZCkgPT4gdm9pZFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgRWRpdG9yOiBFZGl0b3JJbnRlcmZhY2UgPSB7XG4gIGFib3ZlKGVkaXRvciwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IuYWJvdmUob3B0aW9ucylcbiAgfSxcblxuICBhZGRNYXJrKGVkaXRvciwga2V5LCB2YWx1ZSkge1xuICAgIGVkaXRvci5hZGRNYXJrKGtleSwgdmFsdWUpXG4gIH0sXG5cbiAgYWZ0ZXIoZWRpdG9yLCBhdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IuYWZ0ZXIoYXQsIG9wdGlvbnMpXG4gIH0sXG5cbiAgYmVmb3JlKGVkaXRvciwgYXQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLmJlZm9yZShhdCwgb3B0aW9ucylcbiAgfSxcblxuICBkZWxldGVCYWNrd2FyZChlZGl0b3IsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHsgdW5pdCA9ICdjaGFyYWN0ZXInIH0gPSBvcHRpb25zXG4gICAgZWRpdG9yLmRlbGV0ZUJhY2t3YXJkKHVuaXQpXG4gIH0sXG5cbiAgZGVsZXRlRm9yd2FyZChlZGl0b3IsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHsgdW5pdCA9ICdjaGFyYWN0ZXInIH0gPSBvcHRpb25zXG4gICAgZWRpdG9yLmRlbGV0ZUZvcndhcmQodW5pdClcbiAgfSxcblxuICBkZWxldGVGcmFnbWVudChlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IuZGVsZXRlRnJhZ21lbnQob3B0aW9ucylcbiAgfSxcblxuICBlZGdlcyhlZGl0b3IsIGF0KSB7XG4gICAgcmV0dXJuIGVkaXRvci5lZGdlcyhhdClcbiAgfSxcblxuICBlbGVtZW50UmVhZE9ubHkoZWRpdG9yOiBFZGl0b3IsIG9wdGlvbnM6IEVkaXRvckVsZW1lbnRSZWFkT25seU9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiBlZGl0b3IuZWxlbWVudFJlYWRPbmx5KG9wdGlvbnMpXG4gIH0sXG5cbiAgZW5kKGVkaXRvciwgYXQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmVuZChhdClcbiAgfSxcblxuICBmaXJzdChlZGl0b3IsIGF0KSB7XG4gICAgcmV0dXJuIGVkaXRvci5maXJzdChhdClcbiAgfSxcblxuICBmcmFnbWVudChlZGl0b3IsIGF0KSB7XG4gICAgcmV0dXJuIGVkaXRvci5mcmFnbWVudChhdClcbiAgfSxcblxuICBoYXNCbG9ja3MoZWRpdG9yLCBlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVkaXRvci5oYXNCbG9ja3MoZWxlbWVudClcbiAgfSxcblxuICBoYXNJbmxpbmVzKGVkaXRvciwgZWxlbWVudCkge1xuICAgIHJldHVybiBlZGl0b3IuaGFzSW5saW5lcyhlbGVtZW50KVxuICB9LFxuXG4gIGhhc1BhdGgoZWRpdG9yLCBwYXRoKSB7XG4gICAgcmV0dXJuIGVkaXRvci5oYXNQYXRoKHBhdGgpXG4gIH0sXG5cbiAgaGFzVGV4dHMoZWRpdG9yLCBlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVkaXRvci5oYXNUZXh0cyhlbGVtZW50KVxuICB9LFxuXG4gIGluc2VydEJyZWFrKGVkaXRvcikge1xuICAgIGVkaXRvci5pbnNlcnRCcmVhaygpXG4gIH0sXG5cbiAgaW5zZXJ0RnJhZ21lbnQoZWRpdG9yLCBmcmFnbWVudCwgb3B0aW9ucykge1xuICAgIGVkaXRvci5pbnNlcnRGcmFnbWVudChmcmFnbWVudCwgb3B0aW9ucylcbiAgfSxcblxuICBpbnNlcnROb2RlKGVkaXRvciwgbm9kZSkge1xuICAgIGVkaXRvci5pbnNlcnROb2RlKG5vZGUpXG4gIH0sXG5cbiAgaW5zZXJ0U29mdEJyZWFrKGVkaXRvcikge1xuICAgIGVkaXRvci5pbnNlcnRTb2Z0QnJlYWsoKVxuICB9LFxuXG4gIGluc2VydFRleHQoZWRpdG9yLCB0ZXh0KSB7XG4gICAgZWRpdG9yLmluc2VydFRleHQodGV4dClcbiAgfSxcblxuICBpc0Jsb2NrKGVkaXRvciwgdmFsdWUpIHtcbiAgICByZXR1cm4gZWRpdG9yLmlzQmxvY2sodmFsdWUpXG4gIH0sXG5cbiAgaXNFZGdlKGVkaXRvciwgcG9pbnQsIGF0KSB7XG4gICAgcmV0dXJuIGVkaXRvci5pc0VkZ2UocG9pbnQsIGF0KVxuICB9LFxuXG4gIGlzRWRpdG9yKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBFZGl0b3Ige1xuICAgIHJldHVybiBpc0VkaXRvcih2YWx1ZSlcbiAgfSxcblxuICBpc0VsZW1lbnRSZWFkT25seShlZGl0b3IsIGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmlzRWxlbWVudFJlYWRPbmx5KGVsZW1lbnQpXG4gIH0sXG5cbiAgaXNFbXB0eShlZGl0b3IsIGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmlzRW1wdHkoZWxlbWVudClcbiAgfSxcblxuICBpc0VuZChlZGl0b3IsIHBvaW50LCBhdCkge1xuICAgIHJldHVybiBlZGl0b3IuaXNFbmQocG9pbnQsIGF0KVxuICB9LFxuXG4gIGlzSW5saW5lKGVkaXRvciwgdmFsdWUpIHtcbiAgICByZXR1cm4gZWRpdG9yLmlzSW5saW5lKHZhbHVlKVxuICB9LFxuXG4gIGlzTm9ybWFsaXppbmcoZWRpdG9yKSB7XG4gICAgcmV0dXJuIGVkaXRvci5pc05vcm1hbGl6aW5nKClcbiAgfSxcblxuICBpc1NlbGVjdGFibGUoZWRpdG9yOiBFZGl0b3IsIHZhbHVlOiBFbGVtZW50KSB7XG4gICAgcmV0dXJuIGVkaXRvci5pc1NlbGVjdGFibGUodmFsdWUpXG4gIH0sXG5cbiAgaXNTdGFydChlZGl0b3IsIHBvaW50LCBhdCkge1xuICAgIHJldHVybiBlZGl0b3IuaXNTdGFydChwb2ludCwgYXQpXG4gIH0sXG5cbiAgaXNWb2lkKGVkaXRvciwgdmFsdWUpIHtcbiAgICByZXR1cm4gZWRpdG9yLmlzVm9pZCh2YWx1ZSlcbiAgfSxcblxuICBsYXN0KGVkaXRvciwgYXQpIHtcbiAgICByZXR1cm4gZWRpdG9yLmxhc3QoYXQpXG4gIH0sXG5cbiAgbGVhZihlZGl0b3IsIGF0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5sZWFmKGF0LCBvcHRpb25zKVxuICB9LFxuXG4gIGxldmVscyhlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLmxldmVscyhvcHRpb25zKVxuICB9LFxuXG4gIG1hcmtzKGVkaXRvcikge1xuICAgIHJldHVybiBlZGl0b3IuZ2V0TWFya3MoKVxuICB9LFxuXG4gIG5leHQ8VCBleHRlbmRzIERlc2NlbmRhbnQ+KFxuICAgIGVkaXRvcjogRWRpdG9yLFxuICAgIG9wdGlvbnM/OiBFZGl0b3JOZXh0T3B0aW9uczxUPlxuICApOiBOb2RlRW50cnk8VD4gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBlZGl0b3IubmV4dChvcHRpb25zKVxuICB9LFxuXG4gIG5vZGUoZWRpdG9yLCBhdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3Iubm9kZShhdCwgb3B0aW9ucylcbiAgfSxcblxuICBub2RlcyhlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLm5vZGVzKG9wdGlvbnMpXG4gIH0sXG5cbiAgbm9ybWFsaXplKGVkaXRvciwgb3B0aW9ucykge1xuICAgIGVkaXRvci5ub3JtYWxpemUob3B0aW9ucylcbiAgfSxcblxuICBwYXJlbnQoZWRpdG9yLCBhdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IucGFyZW50KGF0LCBvcHRpb25zKVxuICB9LFxuXG4gIHBhdGgoZWRpdG9yLCBhdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IucGF0aChhdCwgb3B0aW9ucylcbiAgfSxcblxuICBwYXRoUmVmKGVkaXRvciwgcGF0aCwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IucGF0aFJlZihwYXRoLCBvcHRpb25zKVxuICB9LFxuXG4gIHBhdGhSZWZzKGVkaXRvcikge1xuICAgIHJldHVybiBlZGl0b3IucGF0aFJlZnMoKVxuICB9LFxuXG4gIHBvaW50KGVkaXRvciwgYXQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLnBvaW50KGF0LCBvcHRpb25zKVxuICB9LFxuXG4gIHBvaW50UmVmKGVkaXRvciwgcG9pbnQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLnBvaW50UmVmKHBvaW50LCBvcHRpb25zKVxuICB9LFxuXG4gIHBvaW50UmVmcyhlZGl0b3IpIHtcbiAgICByZXR1cm4gZWRpdG9yLnBvaW50UmVmcygpXG4gIH0sXG5cbiAgcG9zaXRpb25zKGVkaXRvciwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IucG9zaXRpb25zKG9wdGlvbnMpXG4gIH0sXG5cbiAgcHJldmlvdXMoZWRpdG9yLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5wcmV2aW91cyhvcHRpb25zKVxuICB9LFxuXG4gIHJhbmdlKGVkaXRvciwgYXQsIHRvKSB7XG4gICAgcmV0dXJuIGVkaXRvci5yYW5nZShhdCwgdG8pXG4gIH0sXG5cbiAgcmFuZ2VSZWYoZWRpdG9yLCByYW5nZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IucmFuZ2VSZWYocmFuZ2UsIG9wdGlvbnMpXG4gIH0sXG5cbiAgcmFuZ2VSZWZzKGVkaXRvcikge1xuICAgIHJldHVybiBlZGl0b3IucmFuZ2VSZWZzKClcbiAgfSxcblxuICByZW1vdmVNYXJrKGVkaXRvciwga2V5KSB7XG4gICAgZWRpdG9yLnJlbW92ZU1hcmsoa2V5KVxuICB9LFxuXG4gIHNldE5vcm1hbGl6aW5nKGVkaXRvciwgaXNOb3JtYWxpemluZykge1xuICAgIGVkaXRvci5zZXROb3JtYWxpemluZyhpc05vcm1hbGl6aW5nKVxuICB9LFxuXG4gIHN0YXJ0KGVkaXRvciwgYXQpIHtcbiAgICByZXR1cm4gZWRpdG9yLnN0YXJ0KGF0KVxuICB9LFxuXG4gIHN0cmluZyhlZGl0b3IsIGF0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVkaXRvci5zdHJpbmcoYXQsIG9wdGlvbnMpXG4gIH0sXG5cbiAgdW5oYW5nUmFuZ2UoZWRpdG9yLCByYW5nZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBlZGl0b3IudW5oYW5nUmFuZ2UocmFuZ2UsIG9wdGlvbnMpXG4gIH0sXG5cbiAgdm9pZChlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZWRpdG9yLnZvaWQob3B0aW9ucylcbiAgfSxcblxuICB3aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCBmbjogKCkgPT4gdm9pZCkge1xuICAgIGVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZm4pXG4gIH0sXG59XG5cbi8qKlxuICogQSBoZWxwZXIgdHlwZSBmb3IgbmFycm93aW5nIG1hdGNoZWQgbm9kZXMgd2l0aCBhIHByZWRpY2F0ZS5cbiAqL1xuXG5leHBvcnQgdHlwZSBOb2RlTWF0Y2g8VCBleHRlbmRzIE5vZGU+ID1cbiAgfCAoKG5vZGU6IE5vZGUsIHBhdGg6IFBhdGgpID0+IG5vZGUgaXMgVClcbiAgfCAoKG5vZGU6IE5vZGUsIHBhdGg6IFBhdGgpID0+IGJvb2xlYW4pXG5cbmV4cG9ydCB0eXBlIFByb3BzQ29tcGFyZSA9IChwcm9wOiBQYXJ0aWFsPE5vZGU+LCBub2RlOiBQYXJ0aWFsPE5vZGU+KSA9PiBib29sZWFuXG5leHBvcnQgdHlwZSBQcm9wc01lcmdlID0gKHByb3A6IFBhcnRpYWw8Tm9kZT4sIG5vZGU6IFBhcnRpYWw8Tm9kZT4pID0+IG9iamVjdFxuIiwgImltcG9ydCB7IFBhdGgsIFBvaW50LCBSYW5nZSB9IGZyb20gJy4uJ1xuXG4vKipcbiAqIFRoZSBgTG9jYXRpb25gIGludGVyZmFjZSBpcyBhIHVuaW9uIG9mIHRoZSB3YXlzIHRvIHJlZmVyIHRvIGEgc3BlY2lmaWNcbiAqIGxvY2F0aW9uIGluIGEgU2xhdGUgZG9jdW1lbnQ6IHBhdGhzLCBwb2ludHMgb3IgcmFuZ2VzLlxuICpcbiAqIE1ldGhvZHMgd2lsbCBvZnRlbiBhY2NlcHQgYSBgTG9jYXRpb25gIGluc3RlYWQgb2YgcmVxdWlyaW5nIG9ubHkgYSBgUGF0aGAsXG4gKiBgUG9pbnRgIG9yIGBSYW5nZWAuIFRoaXMgZWxpbWluYXRlcyB0aGUgbmVlZCBmb3IgZGV2ZWxvcGVycyB0byBtYW5hZ2VcbiAqIGNvbnZlcnRpbmcgYmV0d2VlbiB0aGUgZGlmZmVyZW50IGludGVyZmFjZXMgaW4gdGhlaXIgb3duIGNvZGUgYmFzZS5cbiAqL1xuXG5leHBvcnQgdHlwZSBMb2NhdGlvbiA9IFBhdGggfCBQb2ludCB8IFJhbmdlXG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9jYXRpb25JbnRlcmZhY2Uge1xuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpbXBsZW1lbnRzIHRoZSBgTG9jYXRpb25gIGludGVyZmFjZS5cbiAgICovXG4gIGlzTG9jYXRpb246ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBMb2NhdGlvblxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgY29uc3QgTG9jYXRpb246IExvY2F0aW9uSW50ZXJmYWNlID0ge1xuICBpc0xvY2F0aW9uKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBMb2NhdGlvbiB7XG4gICAgcmV0dXJuIFBhdGguaXNQYXRoKHZhbHVlKSB8fCBQb2ludC5pc1BvaW50KHZhbHVlKSB8fCBSYW5nZS5pc1JhbmdlKHZhbHVlKVxuICB9LFxufVxuXG4vKipcbiAqIFRoZSBgU3BhbmAgaW50ZXJmYWNlIGlzIGEgbG93LWxldmVsIHdheSB0byByZWZlciB0byBsb2NhdGlvbnMgaW4gbm9kZXNcbiAqIHdpdGhvdXQgdXNpbmcgYFBvaW50YCB3aGljaCByZXF1aXJlcyBsZWFmIHRleHQgbm9kZXMgdG8gYmUgcHJlc2VudC5cbiAqL1xuXG5leHBvcnQgdHlwZSBTcGFuID0gW1BhdGgsIFBhdGhdXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3BhbkludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGltcGxlbWVudHMgdGhlIGBTcGFuYCBpbnRlcmZhY2UuXG4gICAqL1xuICBpc1NwYW46ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBTcGFuXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBTcGFuOiBTcGFuSW50ZXJmYWNlID0ge1xuICBpc1NwYW4odmFsdWU6IGFueSk6IHZhbHVlIGlzIFNwYW4ge1xuICAgIHJldHVybiAoXG4gICAgICBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDIgJiYgdmFsdWUuZXZlcnkoUGF0aC5pc1BhdGgpXG4gICAgKVxuICB9LFxufVxuIiwgImltcG9ydCB7IGlzUGxhaW5PYmplY3QgfSBmcm9tICdpcy1wbGFpbi1vYmplY3QnXG5pbXBvcnQgeyBwcm9kdWNlIH0gZnJvbSAnaW1tZXInXG5pbXBvcnQgeyBFeHRlbmRlZFR5cGUsIE9wZXJhdGlvbiwgUGF0aCB9IGZyb20gJy4uJ1xuaW1wb3J0IHsgVGV4dERpcmVjdGlvbiB9IGZyb20gJy4uL3R5cGVzL3R5cGVzJ1xuXG4vKipcbiAqIGBQb2ludGAgb2JqZWN0cyByZWZlciB0byBhIHNwZWNpZmljIGxvY2F0aW9uIGluIGEgdGV4dCBub2RlIGluIGEgU2xhdGVcbiAqIGRvY3VtZW50LiBJdHMgcGF0aCByZWZlcnMgdG8gdGhlIGxvY2F0aW9uIG9mIHRoZSBub2RlIGluIHRoZSB0cmVlLCBhbmQgaXRzXG4gKiBvZmZzZXQgcmVmZXJzIHRvIHRoZSBkaXN0YW5jZSBpbnRvIHRoZSBub2RlJ3Mgc3RyaW5nIG9mIHRleHQuIFBvaW50cyBjYW5cbiAqIG9ubHkgcmVmZXIgdG8gYFRleHRgIG5vZGVzLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVBvaW50IHtcbiAgcGF0aDogUGF0aFxuICBvZmZzZXQ6IG51bWJlclxufVxuXG5leHBvcnQgdHlwZSBQb2ludCA9IEV4dGVuZGVkVHlwZTwnUG9pbnQnLCBCYXNlUG9pbnQ+XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9pbnRUcmFuc2Zvcm1PcHRpb25zIHtcbiAgYWZmaW5pdHk/OiBUZXh0RGlyZWN0aW9uIHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvaW50SW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIENvbXBhcmUgYSBwb2ludCB0byBhbm90aGVyLCByZXR1cm5pbmcgYW4gaW50ZWdlciBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlXG4gICAqIHBvaW50IHdhcyBiZWZvcmUsIGF0LCBvciBhZnRlciB0aGUgb3RoZXIuXG4gICAqL1xuICBjb21wYXJlOiAocG9pbnQ6IFBvaW50LCBhbm90aGVyOiBQb2ludCkgPT4gLTEgfCAwIHwgMVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBvaW50IGlzIGFmdGVyIGFub3RoZXIuXG4gICAqL1xuICBpc0FmdGVyOiAocG9pbnQ6IFBvaW50LCBhbm90aGVyOiBQb2ludCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHBvaW50IGlzIGJlZm9yZSBhbm90aGVyLlxuICAgKi9cbiAgaXNCZWZvcmU6IChwb2ludDogUG9pbnQsIGFub3RoZXI6IFBvaW50KSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcG9pbnQgaXMgZXhhY3RseSBlcXVhbCB0byBhbm90aGVyLlxuICAgKi9cbiAgZXF1YWxzOiAocG9pbnQ6IFBvaW50LCBhbm90aGVyOiBQb2ludCkgPT4gYm9vbGVhblxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGltcGxlbWVudHMgdGhlIGBQb2ludGAgaW50ZXJmYWNlLlxuICAgKi9cbiAgaXNQb2ludDogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIFBvaW50XG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybSBhIHBvaW50IGJ5IGFuIG9wZXJhdGlvbi5cbiAgICovXG4gIHRyYW5zZm9ybTogKFxuICAgIHBvaW50OiBQb2ludCxcbiAgICBvcDogT3BlcmF0aW9uLFxuICAgIG9wdGlvbnM/OiBQb2ludFRyYW5zZm9ybU9wdGlvbnNcbiAgKSA9PiBQb2ludCB8IG51bGxcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IFBvaW50OiBQb2ludEludGVyZmFjZSA9IHtcbiAgY29tcGFyZShwb2ludDogUG9pbnQsIGFub3RoZXI6IFBvaW50KTogLTEgfCAwIHwgMSB7XG4gICAgY29uc3QgcmVzdWx0ID0gUGF0aC5jb21wYXJlKHBvaW50LnBhdGgsIGFub3RoZXIucGF0aClcblxuICAgIGlmIChyZXN1bHQgPT09IDApIHtcbiAgICAgIGlmIChwb2ludC5vZmZzZXQgPCBhbm90aGVyLm9mZnNldCkgcmV0dXJuIC0xXG4gICAgICBpZiAocG9pbnQub2Zmc2V0ID4gYW5vdGhlci5vZmZzZXQpIHJldHVybiAxXG4gICAgICByZXR1cm4gMFxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRcbiAgfSxcblxuICBpc0FmdGVyKHBvaW50OiBQb2ludCwgYW5vdGhlcjogUG9pbnQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gUG9pbnQuY29tcGFyZShwb2ludCwgYW5vdGhlcikgPT09IDFcbiAgfSxcblxuICBpc0JlZm9yZShwb2ludDogUG9pbnQsIGFub3RoZXI6IFBvaW50KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFBvaW50LmNvbXBhcmUocG9pbnQsIGFub3RoZXIpID09PSAtMVxuICB9LFxuXG4gIGVxdWFscyhwb2ludDogUG9pbnQsIGFub3RoZXI6IFBvaW50KTogYm9vbGVhbiB7XG4gICAgLy8gUEVSRjogZW5zdXJlIHRoZSBvZmZzZXRzIGFyZSBlcXVhbCBmaXJzdCBzaW5jZSB0aGV5IGFyZSBjaGVhcGVyIHRvIGNoZWNrLlxuICAgIHJldHVybiAoXG4gICAgICBwb2ludC5vZmZzZXQgPT09IGFub3RoZXIub2Zmc2V0ICYmIFBhdGguZXF1YWxzKHBvaW50LnBhdGgsIGFub3RoZXIucGF0aClcbiAgICApXG4gIH0sXG5cbiAgaXNQb2ludCh2YWx1ZTogYW55KTogdmFsdWUgaXMgUG9pbnQge1xuICAgIHJldHVybiAoXG4gICAgICBpc1BsYWluT2JqZWN0KHZhbHVlKSAmJlxuICAgICAgdHlwZW9mIHZhbHVlLm9mZnNldCA9PT0gJ251bWJlcicgJiZcbiAgICAgIFBhdGguaXNQYXRoKHZhbHVlLnBhdGgpXG4gICAgKVxuICB9LFxuXG4gIHRyYW5zZm9ybShcbiAgICBwb2ludDogUG9pbnQgfCBudWxsLFxuICAgIG9wOiBPcGVyYXRpb24sXG4gICAgb3B0aW9uczogUG9pbnRUcmFuc2Zvcm1PcHRpb25zID0ge31cbiAgKTogUG9pbnQgfCBudWxsIHtcbiAgICByZXR1cm4gcHJvZHVjZShwb2ludCwgcCA9PiB7XG4gICAgICBpZiAocCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgICAgY29uc3QgeyBhZmZpbml0eSA9ICdmb3J3YXJkJyB9ID0gb3B0aW9uc1xuICAgICAgY29uc3QgeyBwYXRoLCBvZmZzZXQgfSA9IHBcblxuICAgICAgc3dpdGNoIChvcC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2luc2VydF9ub2RlJzpcbiAgICAgICAgY2FzZSAnbW92ZV9ub2RlJzoge1xuICAgICAgICAgIHAucGF0aCA9IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wLCBvcHRpb25zKSFcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAnaW5zZXJ0X3RleHQnOiB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgUGF0aC5lcXVhbHMob3AucGF0aCwgcGF0aCkgJiZcbiAgICAgICAgICAgIChvcC5vZmZzZXQgPCBvZmZzZXQgfHxcbiAgICAgICAgICAgICAgKG9wLm9mZnNldCA9PT0gb2Zmc2V0ICYmIGFmZmluaXR5ID09PSAnZm9yd2FyZCcpKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcC5vZmZzZXQgKz0gb3AudGV4dC5sZW5ndGhcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAnbWVyZ2Vfbm9kZSc6IHtcbiAgICAgICAgICBpZiAoUGF0aC5lcXVhbHMob3AucGF0aCwgcGF0aCkpIHtcbiAgICAgICAgICAgIHAub2Zmc2V0ICs9IG9wLnBvc2l0aW9uXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcC5wYXRoID0gUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3AsIG9wdGlvbnMpIVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBjYXNlICdyZW1vdmVfdGV4dCc6IHtcbiAgICAgICAgICBpZiAoUGF0aC5lcXVhbHMob3AucGF0aCwgcGF0aCkgJiYgb3Aub2Zmc2V0IDw9IG9mZnNldCkge1xuICAgICAgICAgICAgcC5vZmZzZXQgLT0gTWF0aC5taW4ob2Zmc2V0IC0gb3Aub2Zmc2V0LCBvcC50ZXh0Lmxlbmd0aClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAncmVtb3ZlX25vZGUnOiB7XG4gICAgICAgICAgaWYgKFBhdGguZXF1YWxzKG9wLnBhdGgsIHBhdGgpIHx8IFBhdGguaXNBbmNlc3RvcihvcC5wYXRoLCBwYXRoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwLnBhdGggPSBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcCwgb3B0aW9ucykhXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3NwbGl0X25vZGUnOiB7XG4gICAgICAgICAgaWYgKFBhdGguZXF1YWxzKG9wLnBhdGgsIHBhdGgpKSB7XG4gICAgICAgICAgICBpZiAob3AucG9zaXRpb24gPT09IG9mZnNldCAmJiBhZmZpbml0eSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBvcC5wb3NpdGlvbiA8IG9mZnNldCB8fFxuICAgICAgICAgICAgICAob3AucG9zaXRpb24gPT09IG9mZnNldCAmJiBhZmZpbml0eSA9PT0gJ2ZvcndhcmQnKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHAub2Zmc2V0IC09IG9wLnBvc2l0aW9uXG5cbiAgICAgICAgICAgICAgcC5wYXRoID0gUGF0aC50cmFuc2Zvcm0ocGF0aCwgb3AsIHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGFmZmluaXR5OiAnZm9yd2FyZCcsXG4gICAgICAgICAgICAgIH0pIVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwLnBhdGggPSBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcCwgb3B0aW9ucykhXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH0sXG59XG5cbi8qKlxuICogYFBvaW50RW50cnlgIG9iamVjdHMgYXJlIHJldHVybmVkIHdoZW4gaXRlcmF0aW5nIG92ZXIgYFBvaW50YCBvYmplY3RzIHRoYXRcbiAqIGJlbG9uZyB0byBhIHJhbmdlLlxuICovXG5cbmV4cG9ydCB0eXBlIFBvaW50RW50cnkgPSBbUG9pbnQsICdhbmNob3InIHwgJ2ZvY3VzJ11cbiIsICJleHBvcnQgdHlwZSBTY3J1YmJlciA9IChrZXk6IHN0cmluZywgdmFsdWU6IHVua25vd24pID0+IHVua25vd25cblxuZXhwb3J0IGludGVyZmFjZSBTY3J1YmJlckludGVyZmFjZSB7XG4gIHNldFNjcnViYmVyKHNjcnViYmVyOiBTY3J1YmJlciB8IHVuZGVmaW5lZCk6IHZvaWRcbiAgc3RyaW5naWZ5KHZhbHVlOiBhbnkpOiBzdHJpbmdcbn1cblxubGV0IF9zY3J1YmJlcjogU2NydWJiZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcblxuLyoqXG4gKiBUaGlzIGludGVyZmFjZSBpbXBsZW1lbnRzIGEgc3RyaW5naWZ5KCkgZnVuY3Rpb24sIHdoaWNoIGlzIHVzZWQgYnkgU2xhdGVcbiAqIGludGVybmFsbHkgd2hlbiBnZW5lcmF0aW5nIGV4Y2VwdGlvbnMgY29udGFpbmluZyBlbmQgdXNlciBkYXRhLiBEZXZlbG9wZXJzXG4gKiB1c2luZyBTbGF0ZSBtYXkgY2FsbCBTY3J1YmJlci5zZXRTY3J1YmJlcigpIHRvIGFsdGVyIHRoZSBiZWhhdmlvciBvZiB0aGlzXG4gKiBzdHJpbmdpZnkoKSBmdW5jdGlvbi5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgdG8gcHJldmVudCB0aGUgY2xlYXJ0ZXh0IGxvZ2dpbmcgb2YgJ3RleHQnIGZpZWxkcyB3aXRoaW4gTm9kZXM6XG4gKlxuICogICAgaW1wb3J0IHsgU2NydWJiZXIgfSBmcm9tICdzbGF0ZSc7XG4gKiAgICBTY3J1YmJlci5zZXRTY3J1YmJlcigoa2V5LCB2YWwpID0+IHtcbiAqICAgICAgaWYgKGtleSA9PT0gJ3RleHQnKSByZXR1cm4gJy4uLnNjcnViYmVkLi4uJ1xuICogICAgICByZXR1cm4gdmFsXG4gKiAgICB9KTtcbiAqXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBTY3J1YmJlcjogU2NydWJiZXJJbnRlcmZhY2UgPSB7XG4gIHNldFNjcnViYmVyKHNjcnViYmVyOiBTY3J1YmJlciB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIF9zY3J1YmJlciA9IHNjcnViYmVyXG4gIH0sXG5cbiAgc3RyaW5naWZ5KHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgX3NjcnViYmVyKVxuICB9LFxufVxuIiwgImltcG9ydCB7IGlzUGxhaW5PYmplY3QgfSBmcm9tICdpcy1wbGFpbi1vYmplY3QnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uJ1xuaW1wb3J0IHsgRXh0ZW5kZWRUeXBlIH0gZnJvbSAnLi4vdHlwZXMvY3VzdG9tLXR5cGVzJ1xuaW1wb3J0IHsgaXNEZWVwRXF1YWwgfSBmcm9tICcuLi91dGlscy9kZWVwLWVxdWFsJ1xuXG4vKipcbiAqIGBUZXh0YCBvYmplY3RzIHJlcHJlc2VudCB0aGUgbm9kZXMgdGhhdCBjb250YWluIHRoZSBhY3R1YWwgdGV4dCBjb250ZW50IG9mIGFcbiAqIFNsYXRlIGRvY3VtZW50IGFsb25nIHdpdGggYW55IGZvcm1hdHRpbmcgcHJvcGVydGllcy4gVGhleSBhcmUgYWx3YXlzIGxlYWZcbiAqIG5vZGVzIGluIHRoZSBkb2N1bWVudCB0cmVlIGFzIHRoZXkgY2Fubm90IGNvbnRhaW4gYW55IGNoaWxkcmVuLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVRleHQge1xuICB0ZXh0OiBzdHJpbmdcbn1cblxuZXhwb3J0IHR5cGUgVGV4dCA9IEV4dGVuZGVkVHlwZTwnVGV4dCcsIEJhc2VUZXh0PlxuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRFcXVhbHNPcHRpb25zIHtcbiAgbG9vc2U/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0d28gdGV4dCBub2RlcyBhcmUgZXF1YWwuXG4gICAqXG4gICAqIFdoZW4gbG9vc2UgaXMgc2V0LCB0aGUgdGV4dCBpcyBub3QgY29tcGFyZWQuIFRoaXMgaXNcbiAgICogdXNlZCB0byBjaGVjayB3aGV0aGVyIHNpYmxpbmcgdGV4dCBub2RlcyBjYW4gYmUgbWVyZ2VkLlxuICAgKi9cbiAgZXF1YWxzOiAodGV4dDogVGV4dCwgYW5vdGhlcjogVGV4dCwgb3B0aW9ucz86IFRleHRFcXVhbHNPcHRpb25zKSA9PiBib29sZWFuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmFsdWUgaW1wbGVtZW50cyB0aGUgYFRleHRgIGludGVyZmFjZS5cbiAgICovXG4gIGlzVGV4dDogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIFRleHRcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIGxpc3Qgb2YgYFRleHRgIG9iamVjdHMuXG4gICAqL1xuICBpc1RleHRMaXN0OiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgVGV4dFtdXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHNvbWUgcHJvcHMgYXJlIGEgcGFydGlhbCBvZiBUZXh0LlxuICAgKi9cbiAgaXNUZXh0UHJvcHM6IChwcm9wczogYW55KSA9PiBwcm9wcyBpcyBQYXJ0aWFsPFRleHQ+XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIHRleHQgbWF0Y2hlcyBzZXQgb2YgcHJvcGVydGllcy5cbiAgICpcbiAgICogTm90ZTogdGhpcyBpcyBmb3IgbWF0Y2hpbmcgY3VzdG9tIHByb3BlcnRpZXMsIGFuZCBpdCBkb2VzIG5vdCBlbnN1cmUgdGhhdFxuICAgKiB0aGUgYHRleHRgIHByb3BlcnR5IGFyZSB0d28gbm9kZXMgZXF1YWwuXG4gICAqL1xuICBtYXRjaGVzOiAodGV4dDogVGV4dCwgcHJvcHM6IFBhcnRpYWw8VGV4dD4pID0+IGJvb2xlYW5cblxuICAvKipcbiAgICogR2V0IHRoZSBsZWF2ZXMgZm9yIGEgdGV4dCBub2RlIGdpdmVuIGRlY29yYXRpb25zLlxuICAgKi9cbiAgZGVjb3JhdGlvbnM6IChub2RlOiBUZXh0LCBkZWNvcmF0aW9uczogUmFuZ2VbXSkgPT4gVGV4dFtdXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBUZXh0OiBUZXh0SW50ZXJmYWNlID0ge1xuICBlcXVhbHModGV4dDogVGV4dCwgYW5vdGhlcjogVGV4dCwgb3B0aW9uczogVGV4dEVxdWFsc09wdGlvbnMgPSB7fSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgbG9vc2UgPSBmYWxzZSB9ID0gb3B0aW9uc1xuXG4gICAgZnVuY3Rpb24gb21pdFRleHQob2JqOiBSZWNvcmQ8YW55LCBhbnk+KSB7XG4gICAgICBjb25zdCB7IHRleHQsIC4uLnJlc3QgfSA9IG9ialxuXG4gICAgICByZXR1cm4gcmVzdFxuICAgIH1cblxuICAgIHJldHVybiBpc0RlZXBFcXVhbChcbiAgICAgIGxvb3NlID8gb21pdFRleHQodGV4dCkgOiB0ZXh0LFxuICAgICAgbG9vc2UgPyBvbWl0VGV4dChhbm90aGVyKSA6IGFub3RoZXJcbiAgICApXG4gIH0sXG5cbiAgaXNUZXh0KHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBUZXh0IHtcbiAgICByZXR1cm4gaXNQbGFpbk9iamVjdCh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlLnRleHQgPT09ICdzdHJpbmcnXG4gIH0sXG5cbiAgaXNUZXh0TGlzdCh2YWx1ZTogYW55KTogdmFsdWUgaXMgVGV4dFtdIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUuZXZlcnkodmFsID0+IFRleHQuaXNUZXh0KHZhbCkpXG4gIH0sXG5cbiAgaXNUZXh0UHJvcHMocHJvcHM6IGFueSk6IHByb3BzIGlzIFBhcnRpYWw8VGV4dD4ge1xuICAgIHJldHVybiAocHJvcHMgYXMgUGFydGlhbDxUZXh0PikudGV4dCAhPT0gdW5kZWZpbmVkXG4gIH0sXG5cbiAgbWF0Y2hlcyh0ZXh0OiBUZXh0LCBwcm9wczogUGFydGlhbDxUZXh0Pik6IGJvb2xlYW4ge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XG4gICAgICBpZiAoa2V5ID09PSAndGV4dCcpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAhdGV4dC5oYXNPd25Qcm9wZXJ0eShrZXkpIHx8XG4gICAgICAgIHRleHRbPGtleW9mIFRleHQ+a2V5XSAhPT0gcHJvcHNbPGtleW9mIFRleHQ+a2V5XVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH0sXG5cbiAgZGVjb3JhdGlvbnMobm9kZTogVGV4dCwgZGVjb3JhdGlvbnM6IFJhbmdlW10pOiBUZXh0W10ge1xuICAgIGxldCBsZWF2ZXM6IFRleHRbXSA9IFt7IC4uLm5vZGUgfV1cblxuICAgIGZvciAoY29uc3QgZGVjIG9mIGRlY29yYXRpb25zKSB7XG4gICAgICBjb25zdCB7IGFuY2hvciwgZm9jdXMsIC4uLnJlc3QgfSA9IGRlY1xuICAgICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXMoZGVjKVxuICAgICAgY29uc3QgbmV4dCA9IFtdXG4gICAgICBsZXQgbGVhZkVuZCA9IDBcbiAgICAgIGNvbnN0IGRlY29yYXRpb25TdGFydCA9IHN0YXJ0Lm9mZnNldFxuICAgICAgY29uc3QgZGVjb3JhdGlvbkVuZCA9IGVuZC5vZmZzZXRcblxuICAgICAgZm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xuICAgICAgICBjb25zdCB7IGxlbmd0aCB9ID0gbGVhZi50ZXh0XG4gICAgICAgIGNvbnN0IGxlYWZTdGFydCA9IGxlYWZFbmRcbiAgICAgICAgbGVhZkVuZCArPSBsZW5ndGhcblxuICAgICAgICAvLyBJZiB0aGUgcmFuZ2UgZW5jb21wYXNzZXMgdGhlIGVudGlyZSBsZWFmLCBhZGQgdGhlIHJhbmdlLlxuICAgICAgICBpZiAoZGVjb3JhdGlvblN0YXJ0IDw9IGxlYWZTdGFydCAmJiBsZWFmRW5kIDw9IGRlY29yYXRpb25FbmQpIHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGxlYWYsIHJlc3QpXG4gICAgICAgICAgbmV4dC5wdXNoKGxlYWYpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSByYW5nZSBleHBhbmRlZCBhbmQgbWF0Y2ggdGhlIGxlYWYsIG9yIHN0YXJ0cyBhZnRlciwgb3IgZW5kcyBiZWZvcmUgaXQsIGNvbnRpbnVlLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgKGRlY29yYXRpb25TdGFydCAhPT0gZGVjb3JhdGlvbkVuZCAmJlxuICAgICAgICAgICAgKGRlY29yYXRpb25TdGFydCA9PT0gbGVhZkVuZCB8fCBkZWNvcmF0aW9uRW5kID09PSBsZWFmU3RhcnQpKSB8fFxuICAgICAgICAgIGRlY29yYXRpb25TdGFydCA+IGxlYWZFbmQgfHxcbiAgICAgICAgICBkZWNvcmF0aW9uRW5kIDwgbGVhZlN0YXJ0IHx8XG4gICAgICAgICAgKGRlY29yYXRpb25FbmQgPT09IGxlYWZTdGFydCAmJiBsZWFmU3RhcnQgIT09IDApXG4gICAgICAgICkge1xuICAgICAgICAgIG5leHQucHVzaChsZWFmKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyBPdGhlcndpc2Ugd2UgbmVlZCB0byBzcGxpdCB0aGUgbGVhZiwgYXQgdGhlIHN0YXJ0LCBlbmQsIG9yIGJvdGgsXG4gICAgICAgIC8vIGFuZCBhZGQgdGhlIHJhbmdlIHRvIHRoZSBtaWRkbGUgaW50ZXJzZWN0aW5nIHNlY3Rpb24uIERvIHRoZSBlbmRcbiAgICAgICAgLy8gc3BsaXQgZmlyc3Qgc2luY2Ugd2UgZG9uJ3QgbmVlZCB0byB1cGRhdGUgdGhlIG9mZnNldCB0aGF0IHdheS5cbiAgICAgICAgbGV0IG1pZGRsZSA9IGxlYWZcbiAgICAgICAgbGV0IGJlZm9yZVxuICAgICAgICBsZXQgYWZ0ZXJcblxuICAgICAgICBpZiAoZGVjb3JhdGlvbkVuZCA8IGxlYWZFbmQpIHtcbiAgICAgICAgICBjb25zdCBvZmYgPSBkZWNvcmF0aW9uRW5kIC0gbGVhZlN0YXJ0XG4gICAgICAgICAgYWZ0ZXIgPSB7IC4uLm1pZGRsZSwgdGV4dDogbWlkZGxlLnRleHQuc2xpY2Uob2ZmKSB9XG4gICAgICAgICAgbWlkZGxlID0geyAuLi5taWRkbGUsIHRleHQ6IG1pZGRsZS50ZXh0LnNsaWNlKDAsIG9mZikgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRlY29yYXRpb25TdGFydCA+IGxlYWZTdGFydCkge1xuICAgICAgICAgIGNvbnN0IG9mZiA9IGRlY29yYXRpb25TdGFydCAtIGxlYWZTdGFydFxuICAgICAgICAgIGJlZm9yZSA9IHsgLi4ubWlkZGxlLCB0ZXh0OiBtaWRkbGUudGV4dC5zbGljZSgwLCBvZmYpIH1cbiAgICAgICAgICBtaWRkbGUgPSB7IC4uLm1pZGRsZSwgdGV4dDogbWlkZGxlLnRleHQuc2xpY2Uob2ZmKSB9XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuYXNzaWduKG1pZGRsZSwgcmVzdClcblxuICAgICAgICBpZiAoYmVmb3JlKSB7XG4gICAgICAgICAgbmV4dC5wdXNoKGJlZm9yZSlcbiAgICAgICAgfVxuXG4gICAgICAgIG5leHQucHVzaChtaWRkbGUpXG5cbiAgICAgICAgaWYgKGFmdGVyKSB7XG4gICAgICAgICAgbmV4dC5wdXNoKGFmdGVyKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxlYXZlcyA9IG5leHRcbiAgICB9XG5cbiAgICByZXR1cm4gbGVhdmVzXG4gIH0sXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBMb2NhdGlvbiB9IGZyb20gJy4uL2ludGVyZmFjZXMnXG5cbi8qKlxuICogR2V0IHRoZSBkZWZhdWx0IGxvY2F0aW9uIHRvIGluc2VydCBjb250ZW50IGludG8gdGhlIGVkaXRvci5cbiAqIEJ5IGRlZmF1bHQsIHVzZSB0aGUgc2VsZWN0aW9uIGFzIHRoZSB0YXJnZXQgbG9jYXRpb24uIEJ1dCBpZiB0aGVyZSBpc1xuICogbm8gc2VsZWN0aW9uLCBpbnNlcnQgYXQgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQgc2luY2UgdGhhdCBpcyBzdWNoIGFcbiAqIGNvbW1vbiB1c2UgY2FzZSB3aGVuIGluc2VydGluZyBmcm9tIGEgbm9uLXNlbGVjdGVkIHN0YXRlLlxuICovXG5leHBvcnQgY29uc3QgZ2V0RGVmYXVsdEluc2VydExvY2F0aW9uID0gKGVkaXRvcjogRWRpdG9yKTogTG9jYXRpb24gPT4ge1xuICBpZiAoZWRpdG9yLnNlbGVjdGlvbikge1xuICAgIHJldHVybiBlZGl0b3Iuc2VsZWN0aW9uXG4gIH0gZWxzZSBpZiAoZWRpdG9yLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gRWRpdG9yLmVuZChlZGl0b3IsIFtdKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBbMF1cbiAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5cbmV4cG9ydCBjb25zdCBtYXRjaFBhdGggPSAoXG4gIGVkaXRvcjogRWRpdG9yLFxuICBwYXRoOiBQYXRoXG4pOiAoKG5vZGU6IE5vZGUpID0+IGJvb2xlYW4pID0+IHtcbiAgY29uc3QgW25vZGVdID0gRWRpdG9yLm5vZGUoZWRpdG9yLCBwYXRoKVxuICByZXR1cm4gbiA9PiBuID09PSBub2RlXG59XG4iLCAiLy8gQ2hhcmFjdGVyIChncmFwaGVtZSBjbHVzdGVyKSBib3VuZGFyaWVzIGFyZSBkZXRlcm1pbmVkIGFjY29yZGluZyB0b1xuLy8gdGhlIGRlZmF1bHQgZ3JhcGhlbWUgY2x1c3RlciBib3VuZGFyeSBzcGVjaWZpY2F0aW9uLCBleHRlbmRlZCBncmFwaGVtZSBjbHVzdGVycyB2YXJpYW50WzFdLlxuLy9cbi8vIFJlZmVyZW5jZXM6XG4vL1xuLy8gWzFdIGh0dHBzOi8vd3d3LnVuaWNvZGUub3JnL3JlcG9ydHMvdHIyOS8jRGVmYXVsdF9HcmFwaGVtZV9DbHVzdGVyX1RhYmxlXG4vLyBbMl0gaHR0cHM6Ly93d3cudW5pY29kZS5vcmcvUHVibGljL1VDRC9sYXRlc3QvdWNkL2F1eGlsaWFyeS9HcmFwaGVtZUJyZWFrUHJvcGVydHkudHh0XG4vLyBbM10gaHR0cHM6Ly93d3cudW5pY29kZS5vcmcvUHVibGljL1VDRC9sYXRlc3QvdWNkL2F1eGlsaWFyeS9HcmFwaGVtZUJyZWFrVGVzdC5odG1sXG4vLyBbNF0gaHR0cHM6Ly93d3cudW5pY29kZS5vcmcvUHVibGljL1VDRC9sYXRlc3QvdWNkL2F1eGlsaWFyeS9HcmFwaGVtZUJyZWFrVGVzdC50eHRcblxuLyoqXG4gKiBHZXQgdGhlIGRpc3RhbmNlIHRvIHRoZSBlbmQgb2YgdGhlIGZpcnN0IGNoYXJhY3RlciBpbiBhIHN0cmluZyBvZiB0ZXh0LlxuICovXG5cbmV4cG9ydCBjb25zdCBnZXRDaGFyYWN0ZXJEaXN0YW5jZSA9IChzdHI6IHN0cmluZywgaXNSVEwgPSBmYWxzZSk6IG51bWJlciA9PiB7XG4gIGNvbnN0IGlzTFRSID0gIWlzUlRMXG4gIGNvbnN0IGNvZGVwb2ludHMgPSBpc1JUTCA/IGNvZGVwb2ludHNJdGVyYXRvclJUTChzdHIpIDogc3RyXG5cbiAgbGV0IGxlZnQ6IENvZGVwb2ludFR5cGUgPSBDb2RlcG9pbnRUeXBlLk5vbmVcbiAgbGV0IHJpZ2h0OiBDb2RlcG9pbnRUeXBlID0gQ29kZXBvaW50VHlwZS5Ob25lXG4gIGxldCBkaXN0YW5jZSA9IDBcbiAgLy8gRXZhbHVhdGlvbiBvZiB0aGVzZSBjb25kaXRpb25zIGFyZSBkZWZlcnJlZC5cbiAgbGV0IGdiMTE6IGJvb2xlYW4gfCBudWxsID0gbnVsbCAvLyBJcyBHQjExIGFwcGxpY2FibGU/XG4gIGxldCBnYjEyT3IxMzogYm9vbGVhbiB8IG51bGwgPSBudWxsIC8vIElzIEdCMTIgb3IgR0IxMyBhcHBsaWNhYmxlP1xuXG4gIGZvciAoY29uc3QgY2hhciBvZiBjb2RlcG9pbnRzKSB7XG4gICAgY29uc3QgY29kZSA9IGNoYXIuY29kZVBvaW50QXQoMClcbiAgICBpZiAoIWNvZGUpIGJyZWFrXG5cbiAgICBjb25zdCB0eXBlID0gZ2V0Q29kZXBvaW50VHlwZShjaGFyLCBjb2RlKVxuICAgIDtbbGVmdCwgcmlnaHRdID0gaXNMVFIgPyBbcmlnaHQsIHR5cGVdIDogW3R5cGUsIGxlZnRdXG5cbiAgICBpZiAoXG4gICAgICBpbnRlcnNlY3RzKGxlZnQsIENvZGVwb2ludFR5cGUuWldKKSAmJlxuICAgICAgaW50ZXJzZWN0cyhyaWdodCwgQ29kZXBvaW50VHlwZS5FeHRQaWN0KVxuICAgICkge1xuICAgICAgaWYgKGlzTFRSKSB7XG4gICAgICAgIGdiMTEgPSBlbmRzV2l0aEVtb2ppWldKKHN0ci5zdWJzdHJpbmcoMCwgZGlzdGFuY2UpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2IxMSA9IGVuZHNXaXRoRW1vamlaV0ooc3RyLnN1YnN0cmluZygwLCBzdHIubGVuZ3RoIC0gZGlzdGFuY2UpKVxuICAgICAgfVxuICAgICAgaWYgKCFnYjExKSBicmVha1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGludGVyc2VjdHMobGVmdCwgQ29kZXBvaW50VHlwZS5SSSkgJiZcbiAgICAgIGludGVyc2VjdHMocmlnaHQsIENvZGVwb2ludFR5cGUuUkkpXG4gICAgKSB7XG4gICAgICBpZiAoZ2IxMk9yMTMgIT09IG51bGwpIHtcbiAgICAgICAgZ2IxMk9yMTMgPSAhZ2IxMk9yMTNcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0xUUikge1xuICAgICAgICAgIGdiMTJPcjEzID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdiMTJPcjEzID0gZW5kc1dpdGhPZGROdW1iZXJPZlJJcyhcbiAgICAgICAgICAgIHN0ci5zdWJzdHJpbmcoMCwgc3RyLmxlbmd0aCAtIGRpc3RhbmNlKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFnYjEyT3IxMykgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBsZWZ0ICE9PSBDb2RlcG9pbnRUeXBlLk5vbmUgJiZcbiAgICAgIHJpZ2h0ICE9PSBDb2RlcG9pbnRUeXBlLk5vbmUgJiZcbiAgICAgIGlzQm91bmRhcnlQYWlyKGxlZnQsIHJpZ2h0KVxuICAgICkge1xuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBkaXN0YW5jZSArPSBjaGFyLmxlbmd0aFxuICB9XG5cbiAgcmV0dXJuIGRpc3RhbmNlIHx8IDFcbn1cblxuY29uc3QgU1BBQ0UgPSAvXFxzL1xuY29uc3QgUFVOQ1RVQVRJT04gPVxuICAvW1xcdTAwMkJcXHUwMDIxLVxcdTAwMjNcXHUwMDI1LVxcdTAwMkFcXHUwMDJDLVxcdTAwMkZcXHUwMDNBXFx1MDAzQlxcdTAwM0ZcXHUwMDQwXFx1MDA1Qi1cXHUwMDVEXFx1MDA1RlxcdTAwN0JcXHUwMDdEXFx1MDBBMVxcdTAwQTdcXHUwMEFCXFx1MDBCNlxcdTAwQjdcXHUwMEJCXFx1MDBCRlxcdTAzN0VcXHUwMzg3XFx1MDU1QS1cXHUwNTVGXFx1MDU4OVxcdTA1OEFcXHUwNUJFXFx1MDVDMFxcdTA1QzNcXHUwNUM2XFx1MDVGM1xcdTA1RjRcXHUwNjA5XFx1MDYwQVxcdTA2MENcXHUwNjBEXFx1MDYxQlxcdTA2MUVcXHUwNjFGXFx1MDY2QS1cXHUwNjZEXFx1MDZENFxcdTA3MDAtXFx1MDcwRFxcdTA3RjctXFx1MDdGOVxcdTA4MzAtXFx1MDgzRVxcdTA4NUVcXHUwOTY0XFx1MDk2NVxcdTA5NzBcXHUwQUYwXFx1MERGNFxcdTBFNEZcXHUwRTVBXFx1MEU1QlxcdTBGMDQtXFx1MEYxMlxcdTBGMTRcXHUwRjNBLVxcdTBGM0RcXHUwRjg1XFx1MEZEMC1cXHUwRkQ0XFx1MEZEOVxcdTBGREFcXHUxMDRBLVxcdTEwNEZcXHUxMEZCXFx1MTM2MC1cXHUxMzY4XFx1MTQwMFxcdTE2NkRcXHUxNjZFXFx1MTY5QlxcdTE2OUNcXHUxNkVCLVxcdTE2RURcXHUxNzM1XFx1MTczNlxcdTE3RDQtXFx1MTdENlxcdTE3RDgtXFx1MTdEQVxcdTE4MDAtXFx1MTgwQVxcdTE5NDRcXHUxOTQ1XFx1MUExRVxcdTFBMUZcXHUxQUEwLVxcdTFBQTZcXHUxQUE4LVxcdTFBQURcXHUxQjVBLVxcdTFCNjBcXHUxQkZDLVxcdTFCRkZcXHUxQzNCLVxcdTFDM0ZcXHUxQzdFXFx1MUM3RlxcdTFDQzAtXFx1MUNDN1xcdTFDRDNcXHUyMDEwLVxcdTIwMjdcXHUyMDMwLVxcdTIwNDNcXHUyMDQ1LVxcdTIwNTFcXHUyMDUzLVxcdTIwNUVcXHUyMDdEXFx1MjA3RVxcdTIwOERcXHUyMDhFXFx1MjMyOVxcdTIzMkFcXHUyNzY4LVxcdTI3NzVcXHUyN0M1XFx1MjdDNlxcdTI3RTYtXFx1MjdFRlxcdTI5ODMtXFx1Mjk5OFxcdTI5RDgtXFx1MjlEQlxcdTI5RkNcXHUyOUZEXFx1MkNGOS1cXHUyQ0ZDXFx1MkNGRVxcdTJDRkZcXHUyRDcwXFx1MkUwMC1cXHUyRTJFXFx1MkUzMC1cXHUyRTNCXFx1MzAwMS1cXHUzMDAzXFx1MzAwOC1cXHUzMDExXFx1MzAxNC1cXHUzMDFGXFx1MzAzMFxcdTMwM0RcXHUzMEEwXFx1MzBGQlxcdUE0RkVcXHVBNEZGXFx1QTYwRC1cXHVBNjBGXFx1QTY3M1xcdUE2N0VcXHVBNkYyLVxcdUE2RjdcXHVBODc0LVxcdUE4NzdcXHVBOENFXFx1QThDRlxcdUE4RjgtXFx1QThGQVxcdUE5MkVcXHVBOTJGXFx1QTk1RlxcdUE5QzEtXFx1QTlDRFxcdUE5REVcXHVBOURGXFx1QUE1Qy1cXHVBQTVGXFx1QUFERVxcdUFBREZcXHVBQUYwXFx1QUFGMVxcdUFCRUJcXHVGRDNFXFx1RkQzRlxcdUZFMTAtXFx1RkUxOVxcdUZFMzAtXFx1RkU1MlxcdUZFNTQtXFx1RkU2MVxcdUZFNjNcXHVGRTY4XFx1RkU2QVxcdUZFNkJcXHVGRjAxLVxcdUZGMDNcXHVGRjA1LVxcdUZGMEFcXHVGRjBDLVxcdUZGMEZcXHVGRjFBXFx1RkYxQlxcdUZGMUZcXHVGRjIwXFx1RkYzQi1cXHVGRjNEXFx1RkYzRlxcdUZGNUJcXHVGRjVEXFx1RkY1Ri1cXHVGRjY1XS9cbmNvbnN0IENIQU1FTEVPTiA9IC9bJ1xcdTIwMThcXHUyMDE5XS9cblxuLyoqXG4gKiBHZXQgdGhlIGRpc3RhbmNlIHRvIHRoZSBlbmQgb2YgdGhlIGZpcnN0IHdvcmQgaW4gYSBzdHJpbmcgb2YgdGV4dC5cbiAqL1xuXG5leHBvcnQgY29uc3QgZ2V0V29yZERpc3RhbmNlID0gKHRleHQ6IHN0cmluZywgaXNSVEwgPSBmYWxzZSk6IG51bWJlciA9PiB7XG4gIGxldCBkaXN0ID0gMFxuICBsZXQgc3RhcnRlZCA9IGZhbHNlXG5cbiAgd2hpbGUgKHRleHQubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGNoYXJEaXN0ID0gZ2V0Q2hhcmFjdGVyRGlzdGFuY2UodGV4dCwgaXNSVEwpXG4gICAgY29uc3QgW2NoYXIsIHJlbWFpbmluZ10gPSBzcGxpdEJ5Q2hhcmFjdGVyRGlzdGFuY2UodGV4dCwgY2hhckRpc3QsIGlzUlRMKVxuXG4gICAgaWYgKGlzV29yZENoYXJhY3RlcihjaGFyLCByZW1haW5pbmcsIGlzUlRMKSkge1xuICAgICAgc3RhcnRlZCA9IHRydWVcbiAgICAgIGRpc3QgKz0gY2hhckRpc3RcbiAgICB9IGVsc2UgaWYgKCFzdGFydGVkKSB7XG4gICAgICBkaXN0ICs9IGNoYXJEaXN0XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgdGV4dCA9IHJlbWFpbmluZ1xuICB9XG5cbiAgcmV0dXJuIGRpc3Rcbn1cblxuLyoqXG4gKiBTcGxpdCBhIHN0cmluZyBpbiB0d28gcGFydHMgYXQgYSBnaXZlbiBkaXN0YW5jZSBzdGFydGluZyBmcm9tIHRoZSBlbmQgd2hlblxuICogYGlzUlRMYCBpcyBzZXQgdG8gYHRydWVgLlxuICovXG5cbmV4cG9ydCBjb25zdCBzcGxpdEJ5Q2hhcmFjdGVyRGlzdGFuY2UgPSAoXG4gIHN0cjogc3RyaW5nLFxuICBkaXN0OiBudW1iZXIsXG4gIGlzUlRMPzogYm9vbGVhblxuKTogW3N0cmluZywgc3RyaW5nXSA9PiB7XG4gIGlmIChpc1JUTCkge1xuICAgIGNvbnN0IGF0ID0gc3RyLmxlbmd0aCAtIGRpc3RcbiAgICByZXR1cm4gW3N0ci5zbGljZShhdCwgc3RyLmxlbmd0aCksIHN0ci5zbGljZSgwLCBhdCldXG4gIH1cblxuICByZXR1cm4gW3N0ci5zbGljZSgwLCBkaXN0KSwgc3RyLnNsaWNlKGRpc3QpXVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgY2hhcmFjdGVyIGlzIGEgd29yZCBjaGFyYWN0ZXIuIFRoZSBgcmVtYWluaW5nYCBhcmd1bWVudCBpcyB1c2VkXG4gKiBiZWNhdXNlIHNvbWV0aW1lcyB5b3UgbXVzdCByZWFkIHN1YnNlcXVlbnQgY2hhcmFjdGVycyB0byB0cnVseSBkZXRlcm1pbmUgaXQuXG4gKi9cblxuY29uc3QgaXNXb3JkQ2hhcmFjdGVyID0gKFxuICBjaGFyOiBzdHJpbmcsXG4gIHJlbWFpbmluZzogc3RyaW5nLFxuICBpc1JUTCA9IGZhbHNlXG4pOiBib29sZWFuID0+IHtcbiAgaWYgKFNQQUNFLnRlc3QoY2hhcikpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIENoYW1lbGVvbnMgY291bnQgYXMgd29yZCBjaGFyYWN0ZXJzIGFzIGxvbmcgYXMgdGhleSdyZSBpbiBhIHdvcmQsIHNvXG4gIC8vIHJlY3Vyc2UgdG8gc2VlIGlmIHRoZSBuZXh0IG9uZSBpcyBhIHdvcmQgY2hhcmFjdGVyIG9yIG5vdC5cbiAgaWYgKENIQU1FTEVPTi50ZXN0KGNoYXIpKSB7XG4gICAgY29uc3QgY2hhckRpc3QgPSBnZXRDaGFyYWN0ZXJEaXN0YW5jZShyZW1haW5pbmcsIGlzUlRMKVxuICAgIGNvbnN0IFtuZXh0Q2hhciwgbmV4dFJlbWFpbmluZ10gPSBzcGxpdEJ5Q2hhcmFjdGVyRGlzdGFuY2UoXG4gICAgICByZW1haW5pbmcsXG4gICAgICBjaGFyRGlzdCxcbiAgICAgIGlzUlRMXG4gICAgKVxuXG4gICAgaWYgKGlzV29yZENoYXJhY3RlcihuZXh0Q2hhciwgbmV4dFJlbWFpbmluZywgaXNSVEwpKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGlmIChQVU5DVFVBVElPTi50ZXN0KGNoYXIpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG4vKipcbiAqIEl0ZXJhdGUgb24gY29kZXBvaW50cyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGNvZGVwb2ludHNJdGVyYXRvclJUTCA9IGZ1bmN0aW9uKiAoc3RyOiBzdHJpbmcpIHtcbiAgY29uc3QgZW5kID0gc3RyLmxlbmd0aCAtIDFcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNoYXIxID0gc3RyLmNoYXJBdChlbmQgLSBpKVxuXG4gICAgaWYgKGlzTG93U3Vycm9nYXRlKGNoYXIxLmNoYXJDb2RlQXQoMCkpKSB7XG4gICAgICBjb25zdCBjaGFyMiA9IHN0ci5jaGFyQXQoZW5kIC0gaSAtIDEpXG4gICAgICBpZiAoaXNIaWdoU3Vycm9nYXRlKGNoYXIyLmNoYXJDb2RlQXQoMCkpKSB7XG4gICAgICAgIHlpZWxkIGNoYXIyICsgY2hhcjFcblxuICAgICAgICBpKytcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICB5aWVsZCBjaGFyMVxuICB9XG59XG5cbi8qKlxuICogSXMgYGNoYXJDb2RlYCBhIGhpZ2ggc3Vycm9nYXRlLlxuICpcbiAqIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VuaXZlcnNhbF9DaGFyYWN0ZXJfU2V0X2NoYXJhY3RlcnMjU3Vycm9nYXRlc1xuICovXG5cbmNvbnN0IGlzSGlnaFN1cnJvZ2F0ZSA9IChjaGFyQ29kZTogbnVtYmVyKSA9PiB7XG4gIHJldHVybiBjaGFyQ29kZSA+PSAweGQ4MDAgJiYgY2hhckNvZGUgPD0gMHhkYmZmXG59XG5cbi8qKlxuICogSXMgYGNoYXJDb2RlYCBhIGxvdyBzdXJyb2dhdGUuXG4gKlxuICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVW5pdmVyc2FsX0NoYXJhY3Rlcl9TZXRfY2hhcmFjdGVycyNTdXJyb2dhdGVzXG4gKi9cblxuY29uc3QgaXNMb3dTdXJyb2dhdGUgPSAoY2hhckNvZGU6IG51bWJlcikgPT4ge1xuICByZXR1cm4gY2hhckNvZGUgPj0gMHhkYzAwICYmIGNoYXJDb2RlIDw9IDB4ZGZmZlxufVxuXG5lbnVtIENvZGVwb2ludFR5cGUge1xuICBOb25lID0gMCxcbiAgRXh0ZW5kID0gMSA8PCAwLFxuICBaV0ogPSAxIDw8IDEsXG4gIFJJID0gMSA8PCAyLFxuICBQcmVwZW5kID0gMSA8PCAzLFxuICBTcGFjaW5nTWFyayA9IDEgPDwgNCxcbiAgTCA9IDEgPDwgNSxcbiAgViA9IDEgPDwgNixcbiAgVCA9IDEgPDwgNyxcbiAgTFYgPSAxIDw8IDgsXG4gIExWVCA9IDEgPDwgOSxcbiAgRXh0UGljdCA9IDEgPDwgMTAsXG4gIEFueSA9IDEgPDwgMTEsXG59XG5cbmNvbnN0IHJlRXh0ZW5kID0gL15bXFxwe0dyX0V4dH1cXHB7RU1vZH1dJC91XG5jb25zdCByZVByZXBlbmQgPVxuICAvXltcXHUwNjAwLVxcdTA2MDVcXHUwNkREXFx1MDcwRlxcdTA4OTAtXFx1MDg5MVxcdTA4RTJcXHUwRDRFXFx1ezExMEJEfVxcdXsxMTBDRH1cXHV7MTExQzJ9LVxcdXsxMTFDM31cXHV7MTE5M0Z9XFx1ezExOTQxfVxcdXsxMUEzQX1cXHV7MTFBODR9LVxcdXsxMUE4OX1cXHV7MTFENDZ9XSQvdVxuY29uc3QgcmVTcGFjaW5nTWFyayA9XG4gIC9eW1xcdTA5MDNcXHUwOTNCXFx1MDkzRS1cXHUwOTQwXFx1MDk0OS1cXHUwOTRDXFx1MDk0RS1cXHUwOTRGXFx1MDk4Mi1cXHUwOTgzXFx1MDlCRi1cXHUwOUMwXFx1MDlDNy1cXHUwOUM4XFx1MDlDQi1cXHUwOUNDXFx1MEEwM1xcdTBBM0UtXFx1MEE0MFxcdTBBODNcXHUwQUJFLVxcdTBBQzBcXHUwQUM5XFx1MEFDQi1cXHUwQUNDXFx1MEIwMi1cXHUwQjAzXFx1MEI0MFxcdTBCNDctXFx1MEI0OFxcdTBCNEItXFx1MEI0Q1xcdTBCQkZcXHUwQkMxLVxcdTBCQzJcXHUwQkM2LVxcdTBCQzhcXHUwQkNBLVxcdTBCQ0NcXHUwQzAxLVxcdTBDMDNcXHUwQzQxLVxcdTBDNDRcXHUwQzgyLVxcdTBDODNcXHUwQ0JFXFx1MENDMC1cXHUwQ0MxXFx1MENDMy1cXHUwQ0M0XFx1MENDNy1cXHUwQ0M4XFx1MENDQS1cXHUwQ0NCXFx1MEQwMi1cXHUwRDAzXFx1MEQzRi1cXHUwRDQwXFx1MEQ0Ni1cXHUwRDQ4XFx1MEQ0QS1cXHUwRDRDXFx1MEQ4Mi1cXHUwRDgzXFx1MEREMC1cXHUwREQxXFx1MEREOC1cXHUwRERFXFx1MERGMi1cXHUwREYzXFx1MEUzM1xcdTBFQjNcXHUwRjNFLVxcdTBGM0ZcXHUwRjdGXFx1MTAzMVxcdTEwM0ItXFx1MTAzQ1xcdTEwNTYtXFx1MTA1N1xcdTEwODRcXHUxNzE1XFx1MTczNFxcdTE3QjZcXHUxN0JFLVxcdTE3QzVcXHUxN0M3LVxcdTE3QzhcXHUxOTIzLVxcdTE5MjZcXHUxOTI5LVxcdTE5MkJcXHUxOTMwLVxcdTE5MzFcXHUxOTMzLVxcdTE5MzhcXHUxQTE5LVxcdTFBMUFcXHUxQTU1XFx1MUE1N1xcdTFBNkQtXFx1MUE3MlxcdTFCMDRcXHUxQjNCXFx1MUIzRC1cXHUxQjQxXFx1MUI0My1cXHUxQjQ0XFx1MUI4MlxcdTFCQTFcXHUxQkE2LVxcdTFCQTdcXHUxQkFBXFx1MUJFN1xcdTFCRUEtXFx1MUJFQ1xcdTFCRUVcXHUxQkYyLVxcdTFCRjNcXHUxQzI0LVxcdTFDMkJcXHUxQzM0LVxcdTFDMzVcXHUxQ0UxXFx1MUNGN1xcdUE4MjMtXFx1QTgyNFxcdUE4MjdcXHVBODgwLVxcdUE4ODFcXHVBOEI0LVxcdUE4QzNcXHVBOTUyLVxcdUE5NTNcXHVBOTgzXFx1QTlCNC1cXHVBOUI1XFx1QTlCQS1cXHVBOUJCXFx1QTlCRS1cXHVBOUMwXFx1QUEyRi1cXHVBQTMwXFx1QUEzMy1cXHVBQTM0XFx1QUE0RFxcdUFBRUJcXHVBQUVFLVxcdUFBRUZcXHVBQUY1XFx1QUJFMy1cXHVBQkU0XFx1QUJFNi1cXHVBQkU3XFx1QUJFOS1cXHVBQkVBXFx1QUJFQ1xcdXsxMTAwMH1cXHV7MTEwMDJ9XFx1ezExMDgyfVxcdXsxMTBCMH0tXFx1ezExMEIyfVxcdXsxMTBCN30tXFx1ezExMEI4fVxcdXsxMTEyQ31cXHV7MTExNDV9LVxcdXsxMTE0Nn1cXHV7MTExODJ9XFx1ezExMUIzfS1cXHV7MTExQjV9XFx1ezExMUJGfS1cXHV7MTExQzB9XFx1ezExMUNFfVxcdXsxMTIyQ30tXFx1ezExMjJFfVxcdXsxMTIzMn0tXFx1ezExMjMzfVxcdXsxMTIzNX1cXHV7MTEyRTB9LVxcdXsxMTJFMn1cXHV7MTEzMDJ9LVxcdXsxMTMwM31cXHV7MTEzM0Z9XFx1ezExMzQxfS1cXHV7MTEzNDR9XFx1ezExMzQ3fS1cXHV7MTEzNDh9XFx1ezExMzRCfS1cXHV7MTEzNER9XFx1ezExMzYyfS1cXHV7MTEzNjN9XFx1ezExNDM1fS1cXHV7MTE0Mzd9XFx1ezExNDQwfS1cXHV7MTE0NDF9XFx1ezExNDQ1fVxcdXsxMTRCMX0tXFx1ezExNEIyfVxcdXsxMTRCOX1cXHV7MTE0QkJ9LVxcdXsxMTRCQ31cXHV7MTE0QkV9XFx1ezExNEMxfVxcdXsxMTVCMH0tXFx1ezExNUIxfVxcdXsxMTVCOH0tXFx1ezExNUJCfVxcdXsxMTVCRX1cXHV7MTE2MzB9LVxcdXsxMTYzMn1cXHV7MTE2M0J9LVxcdXsxMTYzQ31cXHV7MTE2M0V9XFx1ezExNkFDfVxcdXsxMTZBRX0tXFx1ezExNkFGfVxcdXsxMTZCNn1cXHV7MTE3MjZ9XFx1ezExODJDfS1cXHV7MTE4MkV9XFx1ezExODM4fVxcdXsxMTkzMX0tXFx1ezExOTM1fVxcdXsxMTkzN30tXFx1ezExOTM4fVxcdXsxMTkzRH1cXHV7MTE5NDB9XFx1ezExOTQyfVxcdXsxMTlEMX0tXFx1ezExOUQzfVxcdXsxMTlEQ30tXFx1ezExOURGfVxcdXsxMTlFNH1cXHV7MTFBMzl9XFx1ezExQTU3fS1cXHV7MTFBNTh9XFx1ezExQTk3fVxcdXsxMUMyRn1cXHV7MTFDM0V9XFx1ezExQ0E5fVxcdXsxMUNCMX1cXHV7MTFDQjR9XFx1ezExRDhBfS1cXHV7MTFEOEV9XFx1ezExRDkzfS1cXHV7MTFEOTR9XFx1ezExRDk2fVxcdXsxMUVGNX0tXFx1ezExRUY2fVxcdXsxNkY1MX0tXFx1ezE2Rjg3fVxcdXsxNkZGMH0tXFx1ezE2RkYxfVxcdXsxRDE2Nn1cXHV7MUQxNkR9XSQvdVxuY29uc3QgcmVMID0gL15bXFx1MTEwMC1cXHUxMTVGXFx1QTk2MC1cXHVBOTdDXSQvdVxuY29uc3QgcmVWID0gL15bXFx1MTE2MC1cXHUxMUE3XFx1RDdCMC1cXHVEN0M2XSQvdVxuY29uc3QgcmVUID0gL15bXFx1MTFBOC1cXHUxMUZGXFx1RDdDQi1cXHVEN0ZCXSQvdVxuY29uc3QgcmVMViA9XG4gIC9eW1xcdUFDMDBcXHVBQzFDXFx1QUMzOFxcdUFDNTRcXHVBQzcwXFx1QUM4Q1xcdUFDQThcXHVBQ0M0XFx1QUNFMFxcdUFDRkNcXHVBRDE4XFx1QUQzNFxcdUFENTBcXHVBRDZDXFx1QUQ4OFxcdUFEQTRcXHVBREMwXFx1QUREQ1xcdUFERjhcXHVBRTE0XFx1QUUzMFxcdUFFNENcXHVBRTY4XFx1QUU4NFxcdUFFQTBcXHVBRUJDXFx1QUVEOFxcdUFFRjRcXHVBRjEwXFx1QUYyQ1xcdUFGNDhcXHVBRjY0XFx1QUY4MFxcdUFGOUNcXHVBRkI4XFx1QUZENFxcdUFGRjBcXHVCMDBDXFx1QjAyOFxcdUIwNDRcXHVCMDYwXFx1QjA3Q1xcdUIwOThcXHVCMEI0XFx1QjBEMFxcdUIwRUNcXHVCMTA4XFx1QjEyNFxcdUIxNDBcXHVCMTVDXFx1QjE3OFxcdUIxOTRcXHVCMUIwXFx1QjFDQ1xcdUIxRThcXHVCMjA0XFx1QjIyMFxcdUIyM0NcXHVCMjU4XFx1QjI3NFxcdUIyOTBcXHVCMkFDXFx1QjJDOFxcdUIyRTRcXHVCMzAwXFx1QjMxQ1xcdUIzMzhcXHVCMzU0XFx1QjM3MFxcdUIzOENcXHVCM0E4XFx1QjNDNFxcdUIzRTBcXHVCM0ZDXFx1QjQxOFxcdUI0MzRcXHVCNDUwXFx1QjQ2Q1xcdUI0ODhcXHVCNEE0XFx1QjRDMFxcdUI0RENcXHVCNEY4XFx1QjUxNFxcdUI1MzBcXHVCNTRDXFx1QjU2OFxcdUI1ODRcXHVCNUEwXFx1QjVCQ1xcdUI1RDhcXHVCNUY0XFx1QjYxMFxcdUI2MkNcXHVCNjQ4XFx1QjY2NFxcdUI2ODBcXHVCNjlDXFx1QjZCOFxcdUI2RDRcXHVCNkYwXFx1QjcwQ1xcdUI3MjhcXHVCNzQ0XFx1Qjc2MFxcdUI3N0NcXHVCNzk4XFx1QjdCNFxcdUI3RDBcXHVCN0VDXFx1QjgwOFxcdUI4MjRcXHVCODQwXFx1Qjg1Q1xcdUI4NzhcXHVCODk0XFx1QjhCMFxcdUI4Q0NcXHVCOEU4XFx1QjkwNFxcdUI5MjBcXHVCOTNDXFx1Qjk1OFxcdUI5NzRcXHVCOTkwXFx1QjlBQ1xcdUI5QzhcXHVCOUU0XFx1QkEwMFxcdUJBMUNcXHVCQTM4XFx1QkE1NFxcdUJBNzBcXHVCQThDXFx1QkFBOFxcdUJBQzRcXHVCQUUwXFx1QkFGQ1xcdUJCMThcXHVCQjM0XFx1QkI1MFxcdUJCNkNcXHVCQjg4XFx1QkJBNFxcdUJCQzBcXHVCQkRDXFx1QkJGOFxcdUJDMTRcXHVCQzMwXFx1QkM0Q1xcdUJDNjhcXHVCQzg0XFx1QkNBMFxcdUJDQkNcXHVCQ0Q4XFx1QkNGNFxcdUJEMTBcXHVCRDJDXFx1QkQ0OFxcdUJENjRcXHVCRDgwXFx1QkQ5Q1xcdUJEQjhcXHVCREQ0XFx1QkRGMFxcdUJFMENcXHVCRTI4XFx1QkU0NFxcdUJFNjBcXHVCRTdDXFx1QkU5OFxcdUJFQjRcXHVCRUQwXFx1QkVFQ1xcdUJGMDhcXHVCRjI0XFx1QkY0MFxcdUJGNUNcXHVCRjc4XFx1QkY5NFxcdUJGQjBcXHVCRkNDXFx1QkZFOFxcdUMwMDRcXHVDMDIwXFx1QzAzQ1xcdUMwNThcXHVDMDc0XFx1QzA5MFxcdUMwQUNcXHVDMEM4XFx1QzBFNFxcdUMxMDBcXHVDMTFDXFx1QzEzOFxcdUMxNTRcXHVDMTcwXFx1QzE4Q1xcdUMxQThcXHVDMUM0XFx1QzFFMFxcdUMxRkNcXHVDMjE4XFx1QzIzNFxcdUMyNTBcXHVDMjZDXFx1QzI4OFxcdUMyQTRcXHVDMkMwXFx1QzJEQ1xcdUMyRjhcXHVDMzE0XFx1QzMzMFxcdUMzNENcXHVDMzY4XFx1QzM4NFxcdUMzQTBcXHVDM0JDXFx1QzNEOFxcdUMzRjRcXHVDNDEwXFx1QzQyQ1xcdUM0NDhcXHVDNDY0XFx1QzQ4MFxcdUM0OUNcXHVDNEI4XFx1QzRENFxcdUM0RjBcXHVDNTBDXFx1QzUyOFxcdUM1NDRcXHVDNTYwXFx1QzU3Q1xcdUM1OThcXHVDNUI0XFx1QzVEMFxcdUM1RUNcXHVDNjA4XFx1QzYyNFxcdUM2NDBcXHVDNjVDXFx1QzY3OFxcdUM2OTRcXHVDNkIwXFx1QzZDQ1xcdUM2RThcXHVDNzA0XFx1QzcyMFxcdUM3M0NcXHVDNzU4XFx1Qzc3NFxcdUM3OTBcXHVDN0FDXFx1QzdDOFxcdUM3RTRcXHVDODAwXFx1QzgxQ1xcdUM4MzhcXHVDODU0XFx1Qzg3MFxcdUM4OENcXHVDOEE4XFx1QzhDNFxcdUM4RTBcXHVDOEZDXFx1QzkxOFxcdUM5MzRcXHVDOTUwXFx1Qzk2Q1xcdUM5ODhcXHVDOUE0XFx1QzlDMFxcdUM5RENcXHVDOUY4XFx1Q0ExNFxcdUNBMzBcXHVDQTRDXFx1Q0E2OFxcdUNBODRcXHVDQUEwXFx1Q0FCQ1xcdUNBRDhcXHVDQUY0XFx1Q0IxMFxcdUNCMkNcXHVDQjQ4XFx1Q0I2NFxcdUNCODBcXHVDQjlDXFx1Q0JCOFxcdUNCRDRcXHVDQkYwXFx1Q0MwQ1xcdUNDMjhcXHVDQzQ0XFx1Q0M2MFxcdUNDN0NcXHVDQzk4XFx1Q0NCNFxcdUNDRDBcXHVDQ0VDXFx1Q0QwOFxcdUNEMjRcXHVDRDQwXFx1Q0Q1Q1xcdUNENzhcXHVDRDk0XFx1Q0RCMFxcdUNEQ0NcXHVDREU4XFx1Q0UwNFxcdUNFMjBcXHVDRTNDXFx1Q0U1OFxcdUNFNzRcXHVDRTkwXFx1Q0VBQ1xcdUNFQzhcXHVDRUU0XFx1Q0YwMFxcdUNGMUNcXHVDRjM4XFx1Q0Y1NFxcdUNGNzBcXHVDRjhDXFx1Q0ZBOFxcdUNGQzRcXHVDRkUwXFx1Q0ZGQ1xcdUQwMThcXHVEMDM0XFx1RDA1MFxcdUQwNkNcXHVEMDg4XFx1RDBBNFxcdUQwQzBcXHVEMERDXFx1RDBGOFxcdUQxMTRcXHVEMTMwXFx1RDE0Q1xcdUQxNjhcXHVEMTg0XFx1RDFBMFxcdUQxQkNcXHVEMUQ4XFx1RDFGNFxcdUQyMTBcXHVEMjJDXFx1RDI0OFxcdUQyNjRcXHVEMjgwXFx1RDI5Q1xcdUQyQjhcXHVEMkQ0XFx1RDJGMFxcdUQzMENcXHVEMzI4XFx1RDM0NFxcdUQzNjBcXHVEMzdDXFx1RDM5OFxcdUQzQjRcXHVEM0QwXFx1RDNFQ1xcdUQ0MDhcXHVENDI0XFx1RDQ0MFxcdUQ0NUNcXHVENDc4XFx1RDQ5NFxcdUQ0QjBcXHVENENDXFx1RDRFOFxcdUQ1MDRcXHVENTIwXFx1RDUzQ1xcdUQ1NThcXHVENTc0XFx1RDU5MFxcdUQ1QUNcXHVENUM4XFx1RDVFNFxcdUQ2MDBcXHVENjFDXFx1RDYzOFxcdUQ2NTRcXHVENjcwXFx1RDY4Q1xcdUQ2QThcXHVENkM0XFx1RDZFMFxcdUQ2RkNcXHVENzE4XFx1RDczNFxcdUQ3NTBcXHVENzZDXFx1RDc4OF0kL3VcbmNvbnN0IHJlTFZUID1cbiAgL15bXFx1QUMwMS1cXHVBQzFCXFx1QUMxRC1cXHVBQzM3XFx1QUMzOS1cXHVBQzUzXFx1QUM1NS1cXHVBQzZGXFx1QUM3MS1cXHVBQzhCXFx1QUM4RC1cXHVBQ0E3XFx1QUNBOS1cXHVBQ0MzXFx1QUNDNS1cXHVBQ0RGXFx1QUNFMS1cXHVBQ0ZCXFx1QUNGRC1cXHVBRDE3XFx1QUQxOS1cXHVBRDMzXFx1QUQzNS1cXHVBRDRGXFx1QUQ1MS1cXHVBRDZCXFx1QUQ2RC1cXHVBRDg3XFx1QUQ4OS1cXHVBREEzXFx1QURBNS1cXHVBREJGXFx1QURDMS1cXHVBRERCXFx1QURERC1cXHVBREY3XFx1QURGOS1cXHVBRTEzXFx1QUUxNS1cXHVBRTJGXFx1QUUzMS1cXHVBRTRCXFx1QUU0RC1cXHVBRTY3XFx1QUU2OS1cXHVBRTgzXFx1QUU4NS1cXHVBRTlGXFx1QUVBMS1cXHVBRUJCXFx1QUVCRC1cXHVBRUQ3XFx1QUVEOS1cXHVBRUYzXFx1QUVGNS1cXHVBRjBGXFx1QUYxMS1cXHVBRjJCXFx1QUYyRC1cXHVBRjQ3XFx1QUY0OS1cXHVBRjYzXFx1QUY2NS1cXHVBRjdGXFx1QUY4MS1cXHVBRjlCXFx1QUY5RC1cXHVBRkI3XFx1QUZCOS1cXHVBRkQzXFx1QUZENS1cXHVBRkVGXFx1QUZGMS1cXHVCMDBCXFx1QjAwRC1cXHVCMDI3XFx1QjAyOS1cXHVCMDQzXFx1QjA0NS1cXHVCMDVGXFx1QjA2MS1cXHVCMDdCXFx1QjA3RC1cXHVCMDk3XFx1QjA5OS1cXHVCMEIzXFx1QjBCNS1cXHVCMENGXFx1QjBEMS1cXHVCMEVCXFx1QjBFRC1cXHVCMTA3XFx1QjEwOS1cXHVCMTIzXFx1QjEyNS1cXHVCMTNGXFx1QjE0MS1cXHVCMTVCXFx1QjE1RC1cXHVCMTc3XFx1QjE3OS1cXHVCMTkzXFx1QjE5NS1cXHVCMUFGXFx1QjFCMS1cXHVCMUNCXFx1QjFDRC1cXHVCMUU3XFx1QjFFOS1cXHVCMjAzXFx1QjIwNS1cXHVCMjFGXFx1QjIyMS1cXHVCMjNCXFx1QjIzRC1cXHVCMjU3XFx1QjI1OS1cXHVCMjczXFx1QjI3NS1cXHVCMjhGXFx1QjI5MS1cXHVCMkFCXFx1QjJBRC1cXHVCMkM3XFx1QjJDOS1cXHVCMkUzXFx1QjJFNS1cXHVCMkZGXFx1QjMwMS1cXHVCMzFCXFx1QjMxRC1cXHVCMzM3XFx1QjMzOS1cXHVCMzUzXFx1QjM1NS1cXHVCMzZGXFx1QjM3MS1cXHVCMzhCXFx1QjM4RC1cXHVCM0E3XFx1QjNBOS1cXHVCM0MzXFx1QjNDNS1cXHVCM0RGXFx1QjNFMS1cXHVCM0ZCXFx1QjNGRC1cXHVCNDE3XFx1QjQxOS1cXHVCNDMzXFx1QjQzNS1cXHVCNDRGXFx1QjQ1MS1cXHVCNDZCXFx1QjQ2RC1cXHVCNDg3XFx1QjQ4OS1cXHVCNEEzXFx1QjRBNS1cXHVCNEJGXFx1QjRDMS1cXHVCNERCXFx1QjRERC1cXHVCNEY3XFx1QjRGOS1cXHVCNTEzXFx1QjUxNS1cXHVCNTJGXFx1QjUzMS1cXHVCNTRCXFx1QjU0RC1cXHVCNTY3XFx1QjU2OS1cXHVCNTgzXFx1QjU4NS1cXHVCNTlGXFx1QjVBMS1cXHVCNUJCXFx1QjVCRC1cXHVCNUQ3XFx1QjVEOS1cXHVCNUYzXFx1QjVGNS1cXHVCNjBGXFx1QjYxMS1cXHVCNjJCXFx1QjYyRC1cXHVCNjQ3XFx1QjY0OS1cXHVCNjYzXFx1QjY2NS1cXHVCNjdGXFx1QjY4MS1cXHVCNjlCXFx1QjY5RC1cXHVCNkI3XFx1QjZCOS1cXHVCNkQzXFx1QjZENS1cXHVCNkVGXFx1QjZGMS1cXHVCNzBCXFx1QjcwRC1cXHVCNzI3XFx1QjcyOS1cXHVCNzQzXFx1Qjc0NS1cXHVCNzVGXFx1Qjc2MS1cXHVCNzdCXFx1Qjc3RC1cXHVCNzk3XFx1Qjc5OS1cXHVCN0IzXFx1QjdCNS1cXHVCN0NGXFx1QjdEMS1cXHVCN0VCXFx1QjdFRC1cXHVCODA3XFx1QjgwOS1cXHVCODIzXFx1QjgyNS1cXHVCODNGXFx1Qjg0MS1cXHVCODVCXFx1Qjg1RC1cXHVCODc3XFx1Qjg3OS1cXHVCODkzXFx1Qjg5NS1cXHVCOEFGXFx1QjhCMS1cXHVCOENCXFx1QjhDRC1cXHVCOEU3XFx1QjhFOS1cXHVCOTAzXFx1QjkwNS1cXHVCOTFGXFx1QjkyMS1cXHVCOTNCXFx1QjkzRC1cXHVCOTU3XFx1Qjk1OS1cXHVCOTczXFx1Qjk3NS1cXHVCOThGXFx1Qjk5MS1cXHVCOUFCXFx1QjlBRC1cXHVCOUM3XFx1QjlDOS1cXHVCOUUzXFx1QjlFNS1cXHVCOUZGXFx1QkEwMS1cXHVCQTFCXFx1QkExRC1cXHVCQTM3XFx1QkEzOS1cXHVCQTUzXFx1QkE1NS1cXHVCQTZGXFx1QkE3MS1cXHVCQThCXFx1QkE4RC1cXHVCQUE3XFx1QkFBOS1cXHVCQUMzXFx1QkFDNS1cXHVCQURGXFx1QkFFMS1cXHVCQUZCXFx1QkFGRC1cXHVCQjE3XFx1QkIxOS1cXHVCQjMzXFx1QkIzNS1cXHVCQjRGXFx1QkI1MS1cXHVCQjZCXFx1QkI2RC1cXHVCQjg3XFx1QkI4OS1cXHVCQkEzXFx1QkJBNS1cXHVCQkJGXFx1QkJDMS1cXHVCQkRCXFx1QkJERC1cXHVCQkY3XFx1QkJGOS1cXHVCQzEzXFx1QkMxNS1cXHVCQzJGXFx1QkMzMS1cXHVCQzRCXFx1QkM0RC1cXHVCQzY3XFx1QkM2OS1cXHVCQzgzXFx1QkM4NS1cXHVCQzlGXFx1QkNBMS1cXHVCQ0JCXFx1QkNCRC1cXHVCQ0Q3XFx1QkNEOS1cXHVCQ0YzXFx1QkNGNS1cXHVCRDBGXFx1QkQxMS1cXHVCRDJCXFx1QkQyRC1cXHVCRDQ3XFx1QkQ0OS1cXHVCRDYzXFx1QkQ2NS1cXHVCRDdGXFx1QkQ4MS1cXHVCRDlCXFx1QkQ5RC1cXHVCREI3XFx1QkRCOS1cXHVCREQzXFx1QkRENS1cXHVCREVGXFx1QkRGMS1cXHVCRTBCXFx1QkUwRC1cXHVCRTI3XFx1QkUyOS1cXHVCRTQzXFx1QkU0NS1cXHVCRTVGXFx1QkU2MS1cXHVCRTdCXFx1QkU3RC1cXHVCRTk3XFx1QkU5OS1cXHVCRUIzXFx1QkVCNS1cXHVCRUNGXFx1QkVEMS1cXHVCRUVCXFx1QkVFRC1cXHVCRjA3XFx1QkYwOS1cXHVCRjIzXFx1QkYyNS1cXHVCRjNGXFx1QkY0MS1cXHVCRjVCXFx1QkY1RC1cXHVCRjc3XFx1QkY3OS1cXHVCRjkzXFx1QkY5NS1cXHVCRkFGXFx1QkZCMS1cXHVCRkNCXFx1QkZDRC1cXHVCRkU3XFx1QkZFOS1cXHVDMDAzXFx1QzAwNS1cXHVDMDFGXFx1QzAyMS1cXHVDMDNCXFx1QzAzRC1cXHVDMDU3XFx1QzA1OS1cXHVDMDczXFx1QzA3NS1cXHVDMDhGXFx1QzA5MS1cXHVDMEFCXFx1QzBBRC1cXHVDMEM3XFx1QzBDOS1cXHVDMEUzXFx1QzBFNS1cXHVDMEZGXFx1QzEwMS1cXHVDMTFCXFx1QzExRC1cXHVDMTM3XFx1QzEzOS1cXHVDMTUzXFx1QzE1NS1cXHVDMTZGXFx1QzE3MS1cXHVDMThCXFx1QzE4RC1cXHVDMUE3XFx1QzFBOS1cXHVDMUMzXFx1QzFDNS1cXHVDMURGXFx1QzFFMS1cXHVDMUZCXFx1QzFGRC1cXHVDMjE3XFx1QzIxOS1cXHVDMjMzXFx1QzIzNS1cXHVDMjRGXFx1QzI1MS1cXHVDMjZCXFx1QzI2RC1cXHVDMjg3XFx1QzI4OS1cXHVDMkEzXFx1QzJBNS1cXHVDMkJGXFx1QzJDMS1cXHVDMkRCXFx1QzJERC1cXHVDMkY3XFx1QzJGOS1cXHVDMzEzXFx1QzMxNS1cXHVDMzJGXFx1QzMzMS1cXHVDMzRCXFx1QzM0RC1cXHVDMzY3XFx1QzM2OS1cXHVDMzgzXFx1QzM4NS1cXHVDMzlGXFx1QzNBMS1cXHVDM0JCXFx1QzNCRC1cXHVDM0Q3XFx1QzNEOS1cXHVDM0YzXFx1QzNGNS1cXHVDNDBGXFx1QzQxMS1cXHVDNDJCXFx1QzQyRC1cXHVDNDQ3XFx1QzQ0OS1cXHVDNDYzXFx1QzQ2NS1cXHVDNDdGXFx1QzQ4MS1cXHVDNDlCXFx1QzQ5RC1cXHVDNEI3XFx1QzRCOS1cXHVDNEQzXFx1QzRENS1cXHVDNEVGXFx1QzRGMS1cXHVDNTBCXFx1QzUwRC1cXHVDNTI3XFx1QzUyOS1cXHVDNTQzXFx1QzU0NS1cXHVDNTVGXFx1QzU2MS1cXHVDNTdCXFx1QzU3RC1cXHVDNTk3XFx1QzU5OS1cXHVDNUIzXFx1QzVCNS1cXHVDNUNGXFx1QzVEMS1cXHVDNUVCXFx1QzVFRC1cXHVDNjA3XFx1QzYwOS1cXHVDNjIzXFx1QzYyNS1cXHVDNjNGXFx1QzY0MS1cXHVDNjVCXFx1QzY1RC1cXHVDNjc3XFx1QzY3OS1cXHVDNjkzXFx1QzY5NS1cXHVDNkFGXFx1QzZCMS1cXHVDNkNCXFx1QzZDRC1cXHVDNkU3XFx1QzZFOS1cXHVDNzAzXFx1QzcwNS1cXHVDNzFGXFx1QzcyMS1cXHVDNzNCXFx1QzczRC1cXHVDNzU3XFx1Qzc1OS1cXHVDNzczXFx1Qzc3NS1cXHVDNzhGXFx1Qzc5MS1cXHVDN0FCXFx1QzdBRC1cXHVDN0M3XFx1QzdDOS1cXHVDN0UzXFx1QzdFNS1cXHVDN0ZGXFx1QzgwMS1cXHVDODFCXFx1QzgxRC1cXHVDODM3XFx1QzgzOS1cXHVDODUzXFx1Qzg1NS1cXHVDODZGXFx1Qzg3MS1cXHVDODhCXFx1Qzg4RC1cXHVDOEE3XFx1QzhBOS1cXHVDOEMzXFx1QzhDNS1cXHVDOERGXFx1QzhFMS1cXHVDOEZCXFx1QzhGRC1cXHVDOTE3XFx1QzkxOS1cXHVDOTMzXFx1QzkzNS1cXHVDOTRGXFx1Qzk1MS1cXHVDOTZCXFx1Qzk2RC1cXHVDOTg3XFx1Qzk4OS1cXHVDOUEzXFx1QzlBNS1cXHVDOUJGXFx1QzlDMS1cXHVDOURCXFx1QzlERC1cXHVDOUY3XFx1QzlGOS1cXHVDQTEzXFx1Q0ExNS1cXHVDQTJGXFx1Q0EzMS1cXHVDQTRCXFx1Q0E0RC1cXHVDQTY3XFx1Q0E2OS1cXHVDQTgzXFx1Q0E4NS1cXHVDQTlGXFx1Q0FBMS1cXHVDQUJCXFx1Q0FCRC1cXHVDQUQ3XFx1Q0FEOS1cXHVDQUYzXFx1Q0FGNS1cXHVDQjBGXFx1Q0IxMS1cXHVDQjJCXFx1Q0IyRC1cXHVDQjQ3XFx1Q0I0OS1cXHVDQjYzXFx1Q0I2NS1cXHVDQjdGXFx1Q0I4MS1cXHVDQjlCXFx1Q0I5RC1cXHVDQkI3XFx1Q0JCOS1cXHVDQkQzXFx1Q0JENS1cXHVDQkVGXFx1Q0JGMS1cXHVDQzBCXFx1Q0MwRC1cXHVDQzI3XFx1Q0MyOS1cXHVDQzQzXFx1Q0M0NS1cXHVDQzVGXFx1Q0M2MS1cXHVDQzdCXFx1Q0M3RC1cXHVDQzk3XFx1Q0M5OS1cXHVDQ0IzXFx1Q0NCNS1cXHVDQ0NGXFx1Q0NEMS1cXHVDQ0VCXFx1Q0NFRC1cXHVDRDA3XFx1Q0QwOS1cXHVDRDIzXFx1Q0QyNS1cXHVDRDNGXFx1Q0Q0MS1cXHVDRDVCXFx1Q0Q1RC1cXHVDRDc3XFx1Q0Q3OS1cXHVDRDkzXFx1Q0Q5NS1cXHVDREFGXFx1Q0RCMS1cXHVDRENCXFx1Q0RDRC1cXHVDREU3XFx1Q0RFOS1cXHVDRTAzXFx1Q0UwNS1cXHVDRTFGXFx1Q0UyMS1cXHVDRTNCXFx1Q0UzRC1cXHVDRTU3XFx1Q0U1OS1cXHVDRTczXFx1Q0U3NS1cXHVDRThGXFx1Q0U5MS1cXHVDRUFCXFx1Q0VBRC1cXHVDRUM3XFx1Q0VDOS1cXHVDRUUzXFx1Q0VFNS1cXHVDRUZGXFx1Q0YwMS1cXHVDRjFCXFx1Q0YxRC1cXHVDRjM3XFx1Q0YzOS1cXHVDRjUzXFx1Q0Y1NS1cXHVDRjZGXFx1Q0Y3MS1cXHVDRjhCXFx1Q0Y4RC1cXHVDRkE3XFx1Q0ZBOS1cXHVDRkMzXFx1Q0ZDNS1cXHVDRkRGXFx1Q0ZFMS1cXHVDRkZCXFx1Q0ZGRC1cXHVEMDE3XFx1RDAxOS1cXHVEMDMzXFx1RDAzNS1cXHVEMDRGXFx1RDA1MS1cXHVEMDZCXFx1RDA2RC1cXHVEMDg3XFx1RDA4OS1cXHVEMEEzXFx1RDBBNS1cXHVEMEJGXFx1RDBDMS1cXHVEMERCXFx1RDBERC1cXHVEMEY3XFx1RDBGOS1cXHVEMTEzXFx1RDExNS1cXHVEMTJGXFx1RDEzMS1cXHVEMTRCXFx1RDE0RC1cXHVEMTY3XFx1RDE2OS1cXHVEMTgzXFx1RDE4NS1cXHVEMTlGXFx1RDFBMS1cXHVEMUJCXFx1RDFCRC1cXHVEMUQ3XFx1RDFEOS1cXHVEMUYzXFx1RDFGNS1cXHVEMjBGXFx1RDIxMS1cXHVEMjJCXFx1RDIyRC1cXHVEMjQ3XFx1RDI0OS1cXHVEMjYzXFx1RDI2NS1cXHVEMjdGXFx1RDI4MS1cXHVEMjlCXFx1RDI5RC1cXHVEMkI3XFx1RDJCOS1cXHVEMkQzXFx1RDJENS1cXHVEMkVGXFx1RDJGMS1cXHVEMzBCXFx1RDMwRC1cXHVEMzI3XFx1RDMyOS1cXHVEMzQzXFx1RDM0NS1cXHVEMzVGXFx1RDM2MS1cXHVEMzdCXFx1RDM3RC1cXHVEMzk3XFx1RDM5OS1cXHVEM0IzXFx1RDNCNS1cXHVEM0NGXFx1RDNEMS1cXHVEM0VCXFx1RDNFRC1cXHVENDA3XFx1RDQwOS1cXHVENDIzXFx1RDQyNS1cXHVENDNGXFx1RDQ0MS1cXHVENDVCXFx1RDQ1RC1cXHVENDc3XFx1RDQ3OS1cXHVENDkzXFx1RDQ5NS1cXHVENEFGXFx1RDRCMS1cXHVENENCXFx1RDRDRC1cXHVENEU3XFx1RDRFOS1cXHVENTAzXFx1RDUwNS1cXHVENTFGXFx1RDUyMS1cXHVENTNCXFx1RDUzRC1cXHVENTU3XFx1RDU1OS1cXHVENTczXFx1RDU3NS1cXHVENThGXFx1RDU5MS1cXHVENUFCXFx1RDVBRC1cXHVENUM3XFx1RDVDOS1cXHVENUUzXFx1RDVFNS1cXHVENUZGXFx1RDYwMS1cXHVENjFCXFx1RDYxRC1cXHVENjM3XFx1RDYzOS1cXHVENjUzXFx1RDY1NS1cXHVENjZGXFx1RDY3MS1cXHVENjhCXFx1RDY4RC1cXHVENkE3XFx1RDZBOS1cXHVENkMzXFx1RDZDNS1cXHVENkRGXFx1RDZFMS1cXHVENkZCXFx1RDZGRC1cXHVENzE3XFx1RDcxOS1cXHVENzMzXFx1RDczNS1cXHVENzRGXFx1RDc1MS1cXHVENzZCXFx1RDc2RC1cXHVENzg3XFx1RDc4OS1cXHVEN0EzXSQvdVxuY29uc3QgcmVFeHRQaWN0ID0gL15cXHB7RXh0UGljdH0kL3VcblxuY29uc3QgZ2V0Q29kZXBvaW50VHlwZSA9IChjaGFyOiBzdHJpbmcsIGNvZGU6IG51bWJlcik6IENvZGVwb2ludFR5cGUgPT4ge1xuICBsZXQgdHlwZSA9IENvZGVwb2ludFR5cGUuQW55XG4gIGlmIChjaGFyLnNlYXJjaChyZUV4dGVuZCkgIT09IC0xKSB7XG4gICAgdHlwZSB8PSBDb2RlcG9pbnRUeXBlLkV4dGVuZFxuICB9XG4gIGlmIChjb2RlID09PSAweDIwMGQpIHtcbiAgICB0eXBlIHw9IENvZGVwb2ludFR5cGUuWldKXG4gIH1cbiAgaWYgKGNvZGUgPj0gMHgxZjFlNiAmJiBjb2RlIDw9IDB4MWYxZmYpIHtcbiAgICB0eXBlIHw9IENvZGVwb2ludFR5cGUuUklcbiAgfVxuICBpZiAoY2hhci5zZWFyY2gocmVQcmVwZW5kKSAhPT0gLTEpIHtcbiAgICB0eXBlIHw9IENvZGVwb2ludFR5cGUuUHJlcGVuZFxuICB9XG4gIGlmIChjaGFyLnNlYXJjaChyZVNwYWNpbmdNYXJrKSAhPT0gLTEpIHtcbiAgICB0eXBlIHw9IENvZGVwb2ludFR5cGUuU3BhY2luZ01hcmtcbiAgfVxuICBpZiAoY2hhci5zZWFyY2gocmVMKSAhPT0gLTEpIHtcbiAgICB0eXBlIHw9IENvZGVwb2ludFR5cGUuTFxuICB9XG4gIGlmIChjaGFyLnNlYXJjaChyZVYpICE9PSAtMSkge1xuICAgIHR5cGUgfD0gQ29kZXBvaW50VHlwZS5WXG4gIH1cbiAgaWYgKGNoYXIuc2VhcmNoKHJlVCkgIT09IC0xKSB7XG4gICAgdHlwZSB8PSBDb2RlcG9pbnRUeXBlLlRcbiAgfVxuICBpZiAoY2hhci5zZWFyY2gocmVMVikgIT09IC0xKSB7XG4gICAgdHlwZSB8PSBDb2RlcG9pbnRUeXBlLkxWXG4gIH1cbiAgaWYgKGNoYXIuc2VhcmNoKHJlTFZUKSAhPT0gLTEpIHtcbiAgICB0eXBlIHw9IENvZGVwb2ludFR5cGUuTFZUXG4gIH1cbiAgaWYgKGNoYXIuc2VhcmNoKHJlRXh0UGljdCkgIT09IC0xKSB7XG4gICAgdHlwZSB8PSBDb2RlcG9pbnRUeXBlLkV4dFBpY3RcbiAgfVxuXG4gIHJldHVybiB0eXBlXG59XG5cbmZ1bmN0aW9uIGludGVyc2VjdHMoeDogQ29kZXBvaW50VHlwZSwgeTogQ29kZXBvaW50VHlwZSkge1xuICByZXR1cm4gKHggJiB5KSAhPT0gMFxufVxuXG5jb25zdCBOb25Cb3VuZGFyeVBhaXJzOiBbQ29kZXBvaW50VHlwZSwgQ29kZXBvaW50VHlwZV1bXSA9IFtcbiAgLy8gR0I2XG4gIFtcbiAgICBDb2RlcG9pbnRUeXBlLkwsXG4gICAgQ29kZXBvaW50VHlwZS5MIHwgQ29kZXBvaW50VHlwZS5WIHwgQ29kZXBvaW50VHlwZS5MViB8IENvZGVwb2ludFR5cGUuTFZULFxuICBdLFxuICAvLyBHQjdcbiAgW0NvZGVwb2ludFR5cGUuTFYgfCBDb2RlcG9pbnRUeXBlLlYsIENvZGVwb2ludFR5cGUuViB8IENvZGVwb2ludFR5cGUuVF0sXG4gIC8vIEdCOFxuICBbQ29kZXBvaW50VHlwZS5MVlQgfCBDb2RlcG9pbnRUeXBlLlQsIENvZGVwb2ludFR5cGUuVF0sXG4gIC8vIEdCOVxuICBbQ29kZXBvaW50VHlwZS5BbnksIENvZGVwb2ludFR5cGUuRXh0ZW5kIHwgQ29kZXBvaW50VHlwZS5aV0pdLFxuICAvLyBHQjlhXG4gIFtDb2RlcG9pbnRUeXBlLkFueSwgQ29kZXBvaW50VHlwZS5TcGFjaW5nTWFya10sXG4gIC8vIEdCOWJcbiAgW0NvZGVwb2ludFR5cGUuUHJlcGVuZCwgQ29kZXBvaW50VHlwZS5BbnldLFxuICAvLyBHQjExXG4gIFtDb2RlcG9pbnRUeXBlLlpXSiwgQ29kZXBvaW50VHlwZS5FeHRQaWN0XSxcbiAgLy8gR0IxMiBhbmQgR0IxM1xuICBbQ29kZXBvaW50VHlwZS5SSSwgQ29kZXBvaW50VHlwZS5SSV0sXG5dXG5cbmZ1bmN0aW9uIGlzQm91bmRhcnlQYWlyKGxlZnQ6IENvZGVwb2ludFR5cGUsIHJpZ2h0OiBDb2RlcG9pbnRUeXBlKSB7XG4gIHJldHVybiAoXG4gICAgTm9uQm91bmRhcnlQYWlycy5maW5kSW5kZXgoXG4gICAgICByID0+IGludGVyc2VjdHMobGVmdCwgclswXSkgJiYgaW50ZXJzZWN0cyhyaWdodCwgclsxXSlcbiAgICApID09PSAtMVxuICApXG59XG5cbmNvbnN0IGVuZGluZ0Vtb2ppWldKID0gL1xccHtFeHRQaWN0fVtcXHB7R3JfRXh0fVxccHtFTW9kfV0qXFx1MjAwRCQvdVxuY29uc3QgZW5kc1dpdGhFbW9qaVpXSiA9IChzdHI6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gc3RyLnNlYXJjaChlbmRpbmdFbW9qaVpXSikgIT09IC0xXG59XG5cbmNvbnN0IGVuZGluZ1JJcyA9IC9cXHB7Ukl9KyQvZ3VcbmNvbnN0IGVuZHNXaXRoT2RkTnVtYmVyT2ZSSXMgPSAoc3RyOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgY29uc3QgbWF0Y2ggPSBzdHIubWF0Y2goZW5kaW5nUklzKVxuICBpZiAobWF0Y2ggPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIHtcbiAgICAvLyBBIFJJIGlzIHJlcHJlc2VudGVkIGJ5IGEgc3Vycm9nYXRlIHBhaXIuXG4gICAgY29uc3QgbnVtUklzID0gbWF0Y2hbMF0ubGVuZ3RoIC8gMlxuICAgIHJldHVybiBudW1SSXMgJSAyID09PSAxXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIExvY2F0aW9uLCBOb2RlLCBQYXRoLCBSYW5nZSwgVHJhbnNmb3JtcyB9IGZyb20gJy4uLy4uL2luZGV4J1xuaW1wb3J0IHsgVGV4dFVuaXQgfSBmcm9tICcuLi8uLi90eXBlcy90eXBlcydcbmltcG9ydCB7IGdldERlZmF1bHRJbnNlcnRMb2NhdGlvbiB9IGZyb20gJy4uLy4uL3V0aWxzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFRleHREZWxldGVPcHRpb25zIHtcbiAgYXQ/OiBMb2NhdGlvblxuICBkaXN0YW5jZT86IG51bWJlclxuICB1bml0PzogVGV4dFVuaXRcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbiAgaGFuZ2luZz86IGJvb2xlYW5cbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEluc2VydEZyYWdtZW50T3B0aW9ucyB7XG4gIGF0PzogTG9jYXRpb25cbiAgaGFuZ2luZz86IGJvb2xlYW5cbiAgdm9pZHM/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEluc2VydFRleHRPcHRpb25zIHtcbiAgYXQ/OiBMb2NhdGlvblxuICB2b2lkcz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXh0VHJhbnNmb3JtcyB7XG4gIC8qKlxuICAgKiBEZWxldGUgY29udGVudCBpbiB0aGUgZWRpdG9yLlxuICAgKi9cbiAgZGVsZXRlOiAoZWRpdG9yOiBFZGl0b3IsIG9wdGlvbnM/OiBUZXh0RGVsZXRlT3B0aW9ucykgPT4gdm9pZFxuXG4gIC8qKlxuICAgKiBJbnNlcnQgYSBmcmFnbWVudCBpbiB0aGUgZWRpdG9yXG4gICAqIGF0IHRoZSBzcGVjaWZpZWQgbG9jYXRpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgY3VycmVudCBzZWxlY3Rpb24gb3IgKGlmIG5vdCBkZWZpbmVkKSB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIGluc2VydEZyYWdtZW50OiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgZnJhZ21lbnQ6IE5vZGVbXSxcbiAgICBvcHRpb25zPzogVGV4dEluc2VydEZyYWdtZW50T3B0aW9uc1xuICApID0+IHZvaWRcblxuICAvKipcbiAgICogSW5zZXJ0IGEgc3RyaW5nIG9mIHRleHQgaW4gdGhlIGVkaXRvclxuICAgKiBhdCB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIG9yIChpZiBub3QgZGVmaW5lZCkgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBpbnNlcnRUZXh0OiAoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgdGV4dDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBUZXh0SW5zZXJ0VGV4dE9wdGlvbnNcbiAgKSA9PiB2b2lkXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBUZXh0VHJhbnNmb3JtczogVGV4dFRyYW5zZm9ybXMgPSB7XG4gIGRlbGV0ZShlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IuZGVsZXRlKG9wdGlvbnMpXG4gIH0sXG4gIGluc2VydEZyYWdtZW50KGVkaXRvciwgZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICBlZGl0b3IuaW5zZXJ0RnJhZ21lbnQoZnJhZ21lbnQsIG9wdGlvbnMpXG4gIH0sXG4gIGluc2VydFRleHQoXG4gICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgdGV4dDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IFRleHRJbnNlcnRUZXh0T3B0aW9ucyA9IHt9XG4gICk6IHZvaWQge1xuICAgIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHZvaWRzID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICAgIGxldCB7IGF0ID0gZ2V0RGVmYXVsdEluc2VydExvY2F0aW9uKGVkaXRvcikgfSA9IG9wdGlvbnNcblxuICAgICAgaWYgKFBhdGguaXNQYXRoKGF0KSkge1xuICAgICAgICBhdCA9IEVkaXRvci5yYW5nZShlZGl0b3IsIGF0KVxuICAgICAgfVxuXG4gICAgICBpZiAoUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICAgICAgaWYgKFJhbmdlLmlzQ29sbGFwc2VkKGF0KSkge1xuICAgICAgICAgIGF0ID0gYXQuYW5jaG9yXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZW5kID0gUmFuZ2UuZW5kKGF0KVxuICAgICAgICAgIGlmICghdm9pZHMgJiYgRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0OiBlbmQgfSkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzdGFydCA9IFJhbmdlLnN0YXJ0KGF0KVxuICAgICAgICAgIGNvbnN0IHN0YXJ0UmVmID0gRWRpdG9yLnBvaW50UmVmKGVkaXRvciwgc3RhcnQpXG4gICAgICAgICAgY29uc3QgZW5kUmVmID0gRWRpdG9yLnBvaW50UmVmKGVkaXRvciwgZW5kKVxuICAgICAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwgeyBhdCwgdm9pZHMgfSlcbiAgICAgICAgICBjb25zdCBzdGFydFBvaW50ID0gc3RhcnRSZWYudW5yZWYoKVxuICAgICAgICAgIGNvbnN0IGVuZFBvaW50ID0gZW5kUmVmLnVucmVmKClcblxuICAgICAgICAgIGF0ID0gc3RhcnRQb2ludCB8fCBlbmRQb2ludCFcbiAgICAgICAgICBUcmFuc2Zvcm1zLnNldFNlbGVjdGlvbihlZGl0b3IsIHsgYW5jaG9yOiBhdCwgZm9jdXM6IGF0IH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAoIXZvaWRzICYmIEVkaXRvci52b2lkKGVkaXRvciwgeyBhdCB9KSkgfHxcbiAgICAgICAgRWRpdG9yLmVsZW1lbnRSZWFkT25seShlZGl0b3IsIHsgYXQgfSlcbiAgICAgICkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBwYXRoLCBvZmZzZXQgfSA9IGF0XG4gICAgICBpZiAodGV4dC5sZW5ndGggPiAwKVxuICAgICAgICBlZGl0b3IuYXBwbHkoeyB0eXBlOiAnaW5zZXJ0X3RleHQnLCBwYXRoLCBvZmZzZXQsIHRleHQgfSlcbiAgICB9KVxuICB9LFxufVxuIiwgImltcG9ydCB7IEdlbmVyYWxUcmFuc2Zvcm1zIH0gZnJvbSAnLi9nZW5lcmFsJ1xuaW1wb3J0IHsgTm9kZVRyYW5zZm9ybXMgfSBmcm9tICcuL25vZGUnXG5pbXBvcnQgeyBTZWxlY3Rpb25UcmFuc2Zvcm1zIH0gZnJvbSAnLi9zZWxlY3Rpb24nXG5pbXBvcnQgeyBUZXh0VHJhbnNmb3JtcyB9IGZyb20gJy4vdGV4dCdcblxuZXhwb3J0IGNvbnN0IFRyYW5zZm9ybXM6IEdlbmVyYWxUcmFuc2Zvcm1zICZcbiAgTm9kZVRyYW5zZm9ybXMgJlxuICBTZWxlY3Rpb25UcmFuc2Zvcm1zICZcbiAgVGV4dFRyYW5zZm9ybXMgPSB7XG4gIC4uLkdlbmVyYWxUcmFuc2Zvcm1zLFxuICAuLi5Ob2RlVHJhbnNmb3JtcyxcbiAgLi4uU2VsZWN0aW9uVHJhbnNmb3JtcyxcbiAgLi4uVGV4dFRyYW5zZm9ybXMsXG59XG4iLCAiaW1wb3J0IHsgUGF0aFJlZiB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aC1yZWYnXG5pbXBvcnQgeyBQb2ludFJlZiB9IGZyb20gJy4uL2ludGVyZmFjZXMvcG9pbnQtcmVmJ1xuaW1wb3J0IHsgUmFuZ2VSZWYgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlLXJlZidcbmltcG9ydCB7IERJUlRZX1BBVEhfS0VZUywgRElSVFlfUEFUSFMsIEZMVVNISU5HIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBXaXRoRWRpdG9yRmlyc3RBcmcgfSBmcm9tICcuLi91dGlscy90eXBlcydcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgYXBwbHk6IFdpdGhFZGl0b3JGaXJzdEFyZzxFZGl0b3JbJ2FwcGx5J10+ID0gKGVkaXRvciwgb3ApID0+IHtcbiAgZm9yIChjb25zdCByZWYgb2YgRWRpdG9yLnBhdGhSZWZzKGVkaXRvcikpIHtcbiAgICBQYXRoUmVmLnRyYW5zZm9ybShyZWYsIG9wKVxuICB9XG5cbiAgZm9yIChjb25zdCByZWYgb2YgRWRpdG9yLnBvaW50UmVmcyhlZGl0b3IpKSB7XG4gICAgUG9pbnRSZWYudHJhbnNmb3JtKHJlZiwgb3ApXG4gIH1cblxuICBmb3IgKGNvbnN0IHJlZiBvZiBFZGl0b3IucmFuZ2VSZWZzKGVkaXRvcikpIHtcbiAgICBSYW5nZVJlZi50cmFuc2Zvcm0ocmVmLCBvcClcbiAgfVxuXG4gIGNvbnN0IG9sZERpcnR5UGF0aHMgPSBESVJUWV9QQVRIUy5nZXQoZWRpdG9yKSB8fCBbXVxuICBjb25zdCBvbGREaXJ0eVBhdGhLZXlzID0gRElSVFlfUEFUSF9LRVlTLmdldChlZGl0b3IpIHx8IG5ldyBTZXQoKVxuICBsZXQgZGlydHlQYXRoczogUGF0aFtdXG4gIGxldCBkaXJ0eVBhdGhLZXlzOiBTZXQ8c3RyaW5nPlxuXG4gIGNvbnN0IGFkZCA9IChwYXRoOiBQYXRoIHwgbnVsbCkgPT4ge1xuICAgIGlmIChwYXRoKSB7XG4gICAgICBjb25zdCBrZXkgPSBwYXRoLmpvaW4oJywnKVxuXG4gICAgICBpZiAoIWRpcnR5UGF0aEtleXMuaGFzKGtleSkpIHtcbiAgICAgICAgZGlydHlQYXRoS2V5cy5hZGQoa2V5KVxuICAgICAgICBkaXJ0eVBhdGhzLnB1c2gocGF0aClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoUGF0aC5vcGVyYXRpb25DYW5UcmFuc2Zvcm1QYXRoKG9wKSkge1xuICAgIGRpcnR5UGF0aHMgPSBbXVxuICAgIGRpcnR5UGF0aEtleXMgPSBuZXcgU2V0KClcbiAgICBmb3IgKGNvbnN0IHBhdGggb2Ygb2xkRGlydHlQYXRocykge1xuICAgICAgY29uc3QgbmV3UGF0aCA9IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wKVxuICAgICAgYWRkKG5ld1BhdGgpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGRpcnR5UGF0aHMgPSBvbGREaXJ0eVBhdGhzXG4gICAgZGlydHlQYXRoS2V5cyA9IG9sZERpcnR5UGF0aEtleXNcbiAgfVxuXG4gIGNvbnN0IG5ld0RpcnR5UGF0aHMgPSBlZGl0b3IuZ2V0RGlydHlQYXRocyhvcClcbiAgZm9yIChjb25zdCBwYXRoIG9mIG5ld0RpcnR5UGF0aHMpIHtcbiAgICBhZGQocGF0aClcbiAgfVxuXG4gIERJUlRZX1BBVEhTLnNldChlZGl0b3IsIGRpcnR5UGF0aHMpXG4gIERJUlRZX1BBVEhfS0VZUy5zZXQoZWRpdG9yLCBkaXJ0eVBhdGhLZXlzKVxuICBUcmFuc2Zvcm1zLnRyYW5zZm9ybShlZGl0b3IsIG9wKVxuICBlZGl0b3Iub3BlcmF0aW9ucy5wdXNoKG9wKVxuICBFZGl0b3Iubm9ybWFsaXplKGVkaXRvciwge1xuICAgIG9wZXJhdGlvbjogb3AsXG4gIH0pXG5cbiAgLy8gQ2xlYXIgYW55IGZvcm1hdHMgYXBwbGllZCB0byB0aGUgY3Vyc29yIGlmIHRoZSBzZWxlY3Rpb24gY2hhbmdlcy5cbiAgaWYgKG9wLnR5cGUgPT09ICdzZXRfc2VsZWN0aW9uJykge1xuICAgIGVkaXRvci5tYXJrcyA9IG51bGxcbiAgfVxuXG4gIGlmICghRkxVU0hJTkcuZ2V0KGVkaXRvcikpIHtcbiAgICBGTFVTSElORy5zZXQoZWRpdG9yLCB0cnVlKVxuXG4gICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICBGTFVTSElORy5zZXQoZWRpdG9yLCBmYWxzZSlcbiAgICAgIGVkaXRvci5vbkNoYW5nZSh7IG9wZXJhdGlvbjogb3AgfSlcbiAgICAgIGVkaXRvci5vcGVyYXRpb25zID0gW11cbiAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHsgV2l0aEVkaXRvckZpcnN0QXJnIH0gZnJvbSAnLi4vdXRpbHMvdHlwZXMnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuLyoqXG4gKiBHZXQgdGhlIFwiZGlydHlcIiBwYXRocyBnZW5lcmF0ZWQgZnJvbSBhbiBvcGVyYXRpb24uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXREaXJ0eVBhdGhzOiBXaXRoRWRpdG9yRmlyc3RBcmc8RWRpdG9yWydnZXREaXJ0eVBhdGhzJ10+ID0gKFxuICBlZGl0b3IsXG4gIG9wXG4pID0+IHtcbiAgc3dpdGNoIChvcC50eXBlKSB7XG4gICAgY2FzZSAnaW5zZXJ0X3RleHQnOlxuICAgIGNhc2UgJ3JlbW92ZV90ZXh0JzpcbiAgICBjYXNlICdzZXRfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCB9ID0gb3BcbiAgICAgIHJldHVybiBQYXRoLmxldmVscyhwYXRoKVxuICAgIH1cblxuICAgIGNhc2UgJ2luc2VydF9ub2RlJzoge1xuICAgICAgY29uc3QgeyBub2RlLCBwYXRoIH0gPSBvcFxuICAgICAgY29uc3QgbGV2ZWxzID0gUGF0aC5sZXZlbHMocGF0aClcbiAgICAgIGNvbnN0IGRlc2NlbmRhbnRzID0gVGV4dC5pc1RleHQobm9kZSlcbiAgICAgICAgPyBbXVxuICAgICAgICA6IEFycmF5LmZyb20oTm9kZS5ub2Rlcyhub2RlKSwgKFssIHBdKSA9PiBwYXRoLmNvbmNhdChwKSlcblxuICAgICAgcmV0dXJuIFsuLi5sZXZlbHMsIC4uLmRlc2NlbmRhbnRzXVxuICAgIH1cblxuICAgIGNhc2UgJ21lcmdlX25vZGUnOiB7XG4gICAgICBjb25zdCB7IHBhdGggfSA9IG9wXG4gICAgICBjb25zdCBhbmNlc3RvcnMgPSBQYXRoLmFuY2VzdG9ycyhwYXRoKVxuICAgICAgY29uc3QgcHJldmlvdXNQYXRoID0gUGF0aC5wcmV2aW91cyhwYXRoKVxuICAgICAgcmV0dXJuIFsuLi5hbmNlc3RvcnMsIHByZXZpb3VzUGF0aF1cbiAgICB9XG5cbiAgICBjYXNlICdtb3ZlX25vZGUnOiB7XG4gICAgICBjb25zdCB7IHBhdGgsIG5ld1BhdGggfSA9IG9wXG5cbiAgICAgIGlmIChQYXRoLmVxdWFscyhwYXRoLCBuZXdQYXRoKSkge1xuICAgICAgICByZXR1cm4gW11cbiAgICAgIH1cblxuICAgICAgY29uc3Qgb2xkQW5jZXN0b3JzOiBQYXRoW10gPSBbXVxuICAgICAgY29uc3QgbmV3QW5jZXN0b3JzOiBQYXRoW10gPSBbXVxuXG4gICAgICBmb3IgKGNvbnN0IGFuY2VzdG9yIG9mIFBhdGguYW5jZXN0b3JzKHBhdGgpKSB7XG4gICAgICAgIGNvbnN0IHAgPSBQYXRoLnRyYW5zZm9ybShhbmNlc3Rvciwgb3ApXG4gICAgICAgIG9sZEFuY2VzdG9ycy5wdXNoKHAhKVxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGFuY2VzdG9yIG9mIFBhdGguYW5jZXN0b3JzKG5ld1BhdGgpKSB7XG4gICAgICAgIGNvbnN0IHAgPSBQYXRoLnRyYW5zZm9ybShhbmNlc3Rvciwgb3ApXG4gICAgICAgIG5ld0FuY2VzdG9ycy5wdXNoKHAhKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXdQYXJlbnQgPSBuZXdBbmNlc3RvcnNbbmV3QW5jZXN0b3JzLmxlbmd0aCAtIDFdXG4gICAgICBjb25zdCBuZXdJbmRleCA9IG5ld1BhdGhbbmV3UGF0aC5sZW5ndGggLSAxXVxuICAgICAgY29uc3QgcmVzdWx0UGF0aCA9IG5ld1BhcmVudC5jb25jYXQobmV3SW5kZXgpXG5cbiAgICAgIHJldHVybiBbLi4ub2xkQW5jZXN0b3JzLCAuLi5uZXdBbmNlc3RvcnMsIHJlc3VsdFBhdGhdXG4gICAgfVxuXG4gICAgY2FzZSAncmVtb3ZlX25vZGUnOiB7XG4gICAgICBjb25zdCB7IHBhdGggfSA9IG9wXG4gICAgICBjb25zdCBhbmNlc3RvcnMgPSBQYXRoLmFuY2VzdG9ycyhwYXRoKVxuICAgICAgcmV0dXJuIFsuLi5hbmNlc3RvcnNdXG4gICAgfVxuXG4gICAgY2FzZSAnc3BsaXRfbm9kZSc6IHtcbiAgICAgIGNvbnN0IHsgcGF0aCB9ID0gb3BcbiAgICAgIGNvbnN0IGxldmVscyA9IFBhdGgubGV2ZWxzKHBhdGgpXG4gICAgICBjb25zdCBuZXh0UGF0aCA9IFBhdGgubmV4dChwYXRoKVxuICAgICAgcmV0dXJuIFsuLi5sZXZlbHMsIG5leHRQYXRoXVxuICAgIH1cblxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMnXG5pbXBvcnQgeyBXaXRoRWRpdG9yRmlyc3RBcmcgfSBmcm9tICcuLi91dGlscydcblxuZXhwb3J0IGNvbnN0IGdldEZyYWdtZW50OiBXaXRoRWRpdG9yRmlyc3RBcmc8XG4gIEVkaXRvclsnZ2V0RnJhZ21lbnQnXVxuPiA9IGVkaXRvciA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcblxuICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuIE5vZGUuZnJhZ21lbnQoZWRpdG9yLCBzZWxlY3Rpb24pXG4gIH1cbiAgcmV0dXJuIFtdXG59XG4iLCAiaW1wb3J0IHsgV2l0aEVkaXRvckZpcnN0QXJnIH0gZnJvbSAnLi4vdXRpbHMvdHlwZXMnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBEZXNjZW5kYW50LCBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBub3JtYWxpemVOb2RlOiBXaXRoRWRpdG9yRmlyc3RBcmc8RWRpdG9yWydub3JtYWxpemVOb2RlJ10+ID0gKFxuICBlZGl0b3IsXG4gIGVudHJ5XG4pID0+IHtcbiAgY29uc3QgW25vZGUsIHBhdGhdID0gZW50cnlcblxuICAvLyBUaGVyZSBhcmUgbm8gY29yZSBub3JtYWxpemF0aW9ucyBmb3IgdGV4dCBub2Rlcy5cbiAgaWYgKFRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBFbnN1cmUgdGhhdCBibG9jayBhbmQgaW5saW5lIG5vZGVzIGhhdmUgYXQgbGVhc3Qgb25lIHRleHQgY2hpbGQuXG4gIGlmIChFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbnN0IGNoaWxkID0geyB0ZXh0OiAnJyB9XG4gICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIGNoaWxkLCB7XG4gICAgICBhdDogcGF0aC5jb25jYXQoMCksXG4gICAgICB2b2lkczogdHJ1ZSxcbiAgICB9KVxuICAgIHJldHVyblxuICB9XG5cbiAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIG5vZGUgc2hvdWxkIGhhdmUgYmxvY2sgb3IgaW5saW5lIGNoaWxkcmVuLlxuICBjb25zdCBzaG91bGRIYXZlSW5saW5lcyA9IEVkaXRvci5pc0VkaXRvcihub2RlKVxuICAgID8gZmFsc2VcbiAgICA6IEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmXG4gICAgICAoZWRpdG9yLmlzSW5saW5lKG5vZGUpIHx8XG4gICAgICAgIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwIHx8XG4gICAgICAgIFRleHQuaXNUZXh0KG5vZGUuY2hpbGRyZW5bMF0pIHx8XG4gICAgICAgIGVkaXRvci5pc0lubGluZShub2RlLmNoaWxkcmVuWzBdKSlcblxuICAvLyBTaW5jZSB3ZSdsbCBiZSBhcHBseWluZyBvcGVyYXRpb25zIHdoaWxlIGl0ZXJhdGluZywga2VlcCB0cmFjayBvZiBhblxuICAvLyBpbmRleCB0aGF0IGFjY291bnRzIGZvciBhbnkgYWRkZWQvcmVtb3ZlZCBub2Rlcy5cbiAgbGV0IG4gPSAwXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrLCBuKyspIHtcbiAgICBjb25zdCBjdXJyZW50Tm9kZSA9IE5vZGUuZ2V0KGVkaXRvciwgcGF0aClcbiAgICBpZiAoVGV4dC5pc1RleHQoY3VycmVudE5vZGUpKSBjb250aW51ZVxuICAgIGNvbnN0IGNoaWxkID0gY3VycmVudE5vZGUuY2hpbGRyZW5bbl0gYXMgRGVzY2VuZGFudFxuICAgIGNvbnN0IHByZXYgPSBjdXJyZW50Tm9kZS5jaGlsZHJlbltuIC0gMV0gYXMgRGVzY2VuZGFudFxuICAgIGNvbnN0IGlzTGFzdCA9IGkgPT09IG5vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gMVxuICAgIGNvbnN0IGlzSW5saW5lT3JUZXh0ID1cbiAgICAgIFRleHQuaXNUZXh0KGNoaWxkKSB8fCAoRWxlbWVudC5pc0VsZW1lbnQoY2hpbGQpICYmIGVkaXRvci5pc0lubGluZShjaGlsZCkpXG5cbiAgICAvLyBPbmx5IGFsbG93IGJsb2NrIG5vZGVzIGluIHRoZSB0b3AtbGV2ZWwgY2hpbGRyZW4gYW5kIHBhcmVudCBibG9ja3NcbiAgICAvLyB0aGF0IG9ubHkgY29udGFpbiBibG9jayBub2Rlcy4gU2ltaWxhcmx5LCBvbmx5IGFsbG93IGlubGluZSBub2RlcyBpblxuICAgIC8vIG90aGVyIGlubGluZSBub2Rlcywgb3IgcGFyZW50IGJsb2NrcyB0aGF0IG9ubHkgY29udGFpbiBpbmxpbmVzIGFuZFxuICAgIC8vIHRleHQuXG4gICAgaWYgKGlzSW5saW5lT3JUZXh0ICE9PSBzaG91bGRIYXZlSW5saW5lcykge1xuICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHsgYXQ6IHBhdGguY29uY2F0KG4pLCB2b2lkczogdHJ1ZSB9KVxuICAgICAgbi0tXG4gICAgfSBlbHNlIGlmIChFbGVtZW50LmlzRWxlbWVudChjaGlsZCkpIHtcbiAgICAgIC8vIEVuc3VyZSB0aGF0IGlubGluZSBub2RlcyBhcmUgc3Vycm91bmRlZCBieSB0ZXh0IG5vZGVzLlxuICAgICAgaWYgKGVkaXRvci5pc0lubGluZShjaGlsZCkpIHtcbiAgICAgICAgaWYgKHByZXYgPT0gbnVsbCB8fCAhVGV4dC5pc1RleHQocHJldikpIHtcbiAgICAgICAgICBjb25zdCBuZXdDaGlsZCA9IHsgdGV4dDogJycgfVxuICAgICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBuZXdDaGlsZCwge1xuICAgICAgICAgICAgYXQ6IHBhdGguY29uY2F0KG4pLFxuICAgICAgICAgICAgdm9pZHM6IHRydWUsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBuKytcbiAgICAgICAgfSBlbHNlIGlmIChpc0xhc3QpIHtcbiAgICAgICAgICBjb25zdCBuZXdDaGlsZCA9IHsgdGV4dDogJycgfVxuICAgICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBuZXdDaGlsZCwge1xuICAgICAgICAgICAgYXQ6IHBhdGguY29uY2F0KG4gKyAxKSxcbiAgICAgICAgICAgIHZvaWRzOiB0cnVlLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgbisrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTWVyZ2UgYWRqYWNlbnQgdGV4dCBub2RlcyB0aGF0IGFyZSBlbXB0eSBvciBtYXRjaC5cbiAgICAgIGlmIChwcmV2ICE9IG51bGwgJiYgVGV4dC5pc1RleHQocHJldikpIHtcbiAgICAgICAgaWYgKFRleHQuZXF1YWxzKGNoaWxkLCBwcmV2LCB7IGxvb3NlOiB0cnVlIH0pKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5tZXJnZU5vZGVzKGVkaXRvciwgeyBhdDogcGF0aC5jb25jYXQobiksIHZvaWRzOiB0cnVlIH0pXG4gICAgICAgICAgbi0tXG4gICAgICAgIH0gZWxzZSBpZiAocHJldi50ZXh0ID09PSAnJykge1xuICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhdDogcGF0aC5jb25jYXQobiAtIDEpLFxuICAgICAgICAgICAgdm9pZHM6IHRydWUsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBuLS1cbiAgICAgICAgfSBlbHNlIGlmIChjaGlsZC50ZXh0ID09PSAnJykge1xuICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhdDogcGF0aC5jb25jYXQobiksXG4gICAgICAgICAgICB2b2lkczogdHJ1ZSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIG4tLVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgV2l0aEVkaXRvckZpcnN0QXJnIH0gZnJvbSAnLi4vdXRpbHMvdHlwZXMnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IHNob3VsZE5vcm1hbGl6ZTogV2l0aEVkaXRvckZpcnN0QXJnPEVkaXRvclsnc2hvdWxkTm9ybWFsaXplJ10+ID0gKFxuICBlZGl0b3IsXG4gIHsgaXRlcmF0aW9uLCBpbml0aWFsRGlydHlQYXRoc0xlbmd0aCB9XG4pID0+IHtcbiAgY29uc3QgbWF4SXRlcmF0aW9ucyA9IGluaXRpYWxEaXJ0eVBhdGhzTGVuZ3RoICogNDIgLy8gSEFDSzogYmV0dGVyIHdheT9cblxuICBpZiAoaXRlcmF0aW9uID4gbWF4SXRlcmF0aW9ucykge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBDb3VsZCBub3QgY29tcGxldGVseSBub3JtYWxpemUgdGhlIGVkaXRvciBhZnRlciAke21heEl0ZXJhdGlvbnN9IGl0ZXJhdGlvbnMhIFRoaXMgaXMgdXN1YWxseSBkdWUgdG8gaW5jb3JyZWN0IG5vcm1hbGl6YXRpb24gbG9naWMgdGhhdCBsZWF2ZXMgYSBub2RlIGluIGFuIGludmFsaWQgc3RhdGUuYFxuICAgIClcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuXG5leHBvcnQgY29uc3QgYWJvdmU6IEVkaXRvckludGVyZmFjZVsnYWJvdmUnXSA9IChlZGl0b3IsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7XG4gICAgdm9pZHMgPSBmYWxzZSxcbiAgICBtb2RlID0gJ2xvd2VzdCcsXG4gICAgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uLFxuICAgIG1hdGNoLFxuICB9ID0gb3B0aW9uc1xuXG4gIGlmICghYXQpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IHBhdGggPSBFZGl0b3IucGF0aChlZGl0b3IsIGF0KVxuICBjb25zdCByZXZlcnNlID0gbW9kZSA9PT0gJ2xvd2VzdCdcblxuICBmb3IgKGNvbnN0IFtuLCBwXSBvZiBFZGl0b3IubGV2ZWxzKGVkaXRvciwge1xuICAgIGF0OiBwYXRoLFxuICAgIHZvaWRzLFxuICAgIG1hdGNoLFxuICAgIHJldmVyc2UsXG4gIH0pKSB7XG4gICAgaWYgKFRleHQuaXNUZXh0KG4pKSBjb250aW51ZVxuICAgIGlmIChSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgaWYgKFxuICAgICAgICBQYXRoLmlzQW5jZXN0b3IocCwgYXQuYW5jaG9yLnBhdGgpICYmXG4gICAgICAgIFBhdGguaXNBbmNlc3RvcihwLCBhdC5mb2N1cy5wYXRoKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBbbiwgcF1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFQYXRoLmVxdWFscyhwYXRoLCBwKSkge1xuICAgICAgICByZXR1cm4gW24sIHBdXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IEZMVVNISU5HIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGFkZE1hcms6IEVkaXRvckludGVyZmFjZVsnYWRkTWFyayddID0gKGVkaXRvciwga2V5LCB2YWx1ZSkgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG5cbiAgaWYgKHNlbGVjdGlvbikge1xuICAgIGNvbnN0IG1hdGNoID0gKG5vZGU6IE5vZGUsIHBhdGg6IFBhdGgpID0+IHtcbiAgICAgIGlmICghVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlIC8vIG1hcmtzIGNhbiBvbmx5IGJlIGFwcGxpZWQgdG8gdGV4dFxuICAgICAgfVxuICAgICAgY29uc3QgW3BhcmVudE5vZGUsIHBhcmVudFBhdGhdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIHBhdGgpXG4gICAgICByZXR1cm4gIWVkaXRvci5pc1ZvaWQocGFyZW50Tm9kZSkgfHwgZWRpdG9yLm1hcmthYmxlVm9pZChwYXJlbnROb2RlKVxuICAgIH1cbiAgICBjb25zdCBleHBhbmRlZFNlbGVjdGlvbiA9IFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKVxuICAgIGxldCBtYXJrQWNjZXB0aW5nVm9pZFNlbGVjdGVkID0gZmFsc2VcbiAgICBpZiAoIWV4cGFuZGVkU2VsZWN0aW9uKSB7XG4gICAgICBjb25zdCBbc2VsZWN0ZWROb2RlLCBzZWxlY3RlZFBhdGhdID0gRWRpdG9yLm5vZGUoZWRpdG9yLCBzZWxlY3Rpb24pXG4gICAgICBpZiAoc2VsZWN0ZWROb2RlICYmIG1hdGNoKHNlbGVjdGVkTm9kZSwgc2VsZWN0ZWRQYXRoKSkge1xuICAgICAgICBjb25zdCBbcGFyZW50Tm9kZV0gPSBFZGl0b3IucGFyZW50KGVkaXRvciwgc2VsZWN0ZWRQYXRoKVxuICAgICAgICBtYXJrQWNjZXB0aW5nVm9pZFNlbGVjdGVkID1cbiAgICAgICAgICBwYXJlbnROb2RlICYmIGVkaXRvci5tYXJrYWJsZVZvaWQocGFyZW50Tm9kZSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGV4cGFuZGVkU2VsZWN0aW9uIHx8IG1hcmtBY2NlcHRpbmdWb2lkU2VsZWN0ZWQpIHtcbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoXG4gICAgICAgIGVkaXRvcixcbiAgICAgICAgeyBba2V5XTogdmFsdWUgfSxcbiAgICAgICAge1xuICAgICAgICAgIG1hdGNoLFxuICAgICAgICAgIHNwbGl0OiB0cnVlLFxuICAgICAgICAgIHZvaWRzOiB0cnVlLFxuICAgICAgICB9XG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1hcmtzID0ge1xuICAgICAgICAuLi4oRWRpdG9yLm1hcmtzKGVkaXRvcikgfHwge30pLFxuICAgICAgICBba2V5XTogdmFsdWUsXG4gICAgICB9XG5cbiAgICAgIGVkaXRvci5tYXJrcyA9IG1hcmtzXG4gICAgICBpZiAoIUZMVVNISU5HLmdldChlZGl0b3IpKSB7XG4gICAgICAgIGVkaXRvci5vbkNoYW5nZSgpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcblxuZXhwb3J0IGNvbnN0IGFmdGVyOiBFZGl0b3JJbnRlcmZhY2VbJ2FmdGVyJ10gPSAoZWRpdG9yLCBhdCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IGFuY2hvciA9IEVkaXRvci5wb2ludChlZGl0b3IsIGF0LCB7IGVkZ2U6ICdlbmQnIH0pXG4gIGNvbnN0IGZvY3VzID0gRWRpdG9yLmVuZChlZGl0b3IsIFtdKVxuICBjb25zdCByYW5nZSA9IHsgYW5jaG9yLCBmb2N1cyB9XG4gIGNvbnN0IHsgZGlzdGFuY2UgPSAxIH0gPSBvcHRpb25zXG4gIGxldCBkID0gMFxuICBsZXQgdGFyZ2V0XG5cbiAgZm9yIChjb25zdCBwIG9mIEVkaXRvci5wb3NpdGlvbnMoZWRpdG9yLCB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBhdDogcmFuZ2UsXG4gIH0pKSB7XG4gICAgaWYgKGQgPiBkaXN0YW5jZSkge1xuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoZCAhPT0gMCkge1xuICAgICAgdGFyZ2V0ID0gcFxuICAgIH1cblxuICAgIGQrK1xuICB9XG5cbiAgcmV0dXJuIHRhcmdldFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBiZWZvcmU6IEVkaXRvckludGVyZmFjZVsnYmVmb3JlJ10gPSAoZWRpdG9yLCBhdCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IGFuY2hvciA9IEVkaXRvci5zdGFydChlZGl0b3IsIFtdKVxuICBjb25zdCBmb2N1cyA9IEVkaXRvci5wb2ludChlZGl0b3IsIGF0LCB7IGVkZ2U6ICdzdGFydCcgfSlcbiAgY29uc3QgcmFuZ2UgPSB7IGFuY2hvciwgZm9jdXMgfVxuICBjb25zdCB7IGRpc3RhbmNlID0gMSB9ID0gb3B0aW9uc1xuICBsZXQgZCA9IDBcbiAgbGV0IHRhcmdldFxuXG4gIGZvciAoY29uc3QgcCBvZiBFZGl0b3IucG9zaXRpb25zKGVkaXRvciwge1xuICAgIC4uLm9wdGlvbnMsXG4gICAgYXQ6IHJhbmdlLFxuICAgIHJldmVyc2U6IHRydWUsXG4gIH0pKSB7XG4gICAgaWYgKGQgPiBkaXN0YW5jZSkge1xuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoZCAhPT0gMCkge1xuICAgICAgdGFyZ2V0ID0gcFxuICAgIH1cblxuICAgIGQrK1xuICB9XG5cbiAgcmV0dXJuIHRhcmdldFxufVxuIiwgImltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFdpdGhFZGl0b3JGaXJzdEFyZyB9IGZyb20gJy4uL3V0aWxzL3R5cGVzJ1xuXG5leHBvcnQgY29uc3QgZGVsZXRlQmFja3dhcmQ6IFdpdGhFZGl0b3JGaXJzdEFyZzxFZGl0b3JbJ2RlbGV0ZUJhY2t3YXJkJ10+ID0gKFxuICBlZGl0b3IsXG4gIHVuaXRcbikgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG5cbiAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pKSB7XG4gICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7IHVuaXQsIHJldmVyc2U6IHRydWUgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFdpdGhFZGl0b3JGaXJzdEFyZyB9IGZyb20gJy4uL3V0aWxzL3R5cGVzJ1xuXG5leHBvcnQgY29uc3QgZGVsZXRlRm9yd2FyZDogV2l0aEVkaXRvckZpcnN0QXJnPEVkaXRvclsnZGVsZXRlRm9yd2FyZCddPiA9IChcbiAgZWRpdG9yLFxuICB1bml0XG4pID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuXG4gIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNDb2xsYXBzZWQoc2VsZWN0aW9uKSkge1xuICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwgeyB1bml0IH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBkZWxldGVGcmFnbWVudDogRWRpdG9ySW50ZXJmYWNlWydkZWxldGVGcmFnbWVudCddID0gKFxuICBlZGl0b3IsXG4gIHsgZGlyZWN0aW9uID0gJ2ZvcndhcmQnIH0gPSB7fVxuKSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcblxuICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwgeyByZXZlcnNlOiBkaXJlY3Rpb24gPT09ICdiYWNrd2FyZCcgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBlZGdlczogRWRpdG9ySW50ZXJmYWNlWydlZGdlcyddID0gKGVkaXRvciwgYXQpID0+IHtcbiAgcmV0dXJuIFtFZGl0b3Iuc3RhcnQoZWRpdG9yLCBhdCksIEVkaXRvci5lbmQoZWRpdG9yLCBhdCldXG59XG4iLCAiaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBlbGVtZW50UmVhZE9ubHk6IEVkaXRvckludGVyZmFjZVsnZWxlbWVudFJlYWRPbmx5J10gPSAoXG4gIGVkaXRvcixcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgcmV0dXJuIEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAuLi5vcHRpb25zLFxuICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0VsZW1lbnRSZWFkT25seShlZGl0b3IsIG4pLFxuICB9KVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBlbmQ6IEVkaXRvckludGVyZmFjZVsnZW5kJ10gPSAoZWRpdG9yLCBhdCkgPT4ge1xuICByZXR1cm4gRWRpdG9yLnBvaW50KGVkaXRvciwgYXQsIHsgZWRnZTogJ2VuZCcgfSlcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgZmlyc3Q6IEVkaXRvckludGVyZmFjZVsnZmlyc3QnXSA9IChlZGl0b3IsIGF0KSA9PiB7XG4gIGNvbnN0IHBhdGggPSBFZGl0b3IucGF0aChlZGl0b3IsIGF0LCB7IGVkZ2U6ICdzdGFydCcgfSlcbiAgcmV0dXJuIEVkaXRvci5ub2RlKGVkaXRvciwgcGF0aClcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcblxuZXhwb3J0IGNvbnN0IGZyYWdtZW50OiBFZGl0b3JJbnRlcmZhY2VbJ2ZyYWdtZW50J10gPSAoZWRpdG9yLCBhdCkgPT4ge1xuICBjb25zdCByYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIGF0KVxuICByZXR1cm4gTm9kZS5mcmFnbWVudChlZGl0b3IsIHJhbmdlKVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuXG5leHBvcnQgY29uc3QgZ2V0Vm9pZDogRWRpdG9ySW50ZXJmYWNlWyd2b2lkJ10gPSAoZWRpdG9yLCBvcHRpb25zID0ge30pID0+IHtcbiAgcmV0dXJuIEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAuLi5vcHRpb25zLFxuICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBuKSxcbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcblxuZXhwb3J0IGNvbnN0IGhhc0Jsb2NrczogRWRpdG9ySW50ZXJmYWNlWydoYXNCbG9ja3MnXSA9IChlZGl0b3IsIGVsZW1lbnQpID0+IHtcbiAgcmV0dXJuIGVsZW1lbnQuY2hpbGRyZW4uc29tZShcbiAgICBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgKVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuXG5leHBvcnQgY29uc3QgaGFzSW5saW5lczogRWRpdG9ySW50ZXJmYWNlWydoYXNJbmxpbmVzJ10gPSAoZWRpdG9yLCBlbGVtZW50KSA9PiB7XG4gIHJldHVybiBlbGVtZW50LmNoaWxkcmVuLnNvbWUoXG4gICAgbiA9PiBUZXh0LmlzVGV4dChuKSB8fCBFZGl0b3IuaXNJbmxpbmUoZWRpdG9yLCBuKVxuICApXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuXG5leHBvcnQgY29uc3QgaGFzUGF0aDogRWRpdG9ySW50ZXJmYWNlWydoYXNQYXRoJ10gPSAoZWRpdG9yLCBwYXRoKSA9PiB7XG4gIHJldHVybiBOb2RlLmhhcyhlZGl0b3IsIHBhdGgpXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuXG5leHBvcnQgY29uc3QgaGFzVGV4dHM6IEVkaXRvckludGVyZmFjZVsnaGFzVGV4dHMnXSA9IChlZGl0b3IsIGVsZW1lbnQpID0+IHtcbiAgcmV0dXJuIGVsZW1lbnQuY2hpbGRyZW4uZXZlcnkobiA9PiBUZXh0LmlzVGV4dChuKSlcbn1cbiIsICJpbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBpbnNlcnRCcmVhazogRWRpdG9ySW50ZXJmYWNlWydpbnNlcnRCcmVhayddID0gZWRpdG9yID0+IHtcbiAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGVkaXRvciwgeyBhbHdheXM6IHRydWUgfSlcbn1cbiIsICJpbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBpbnNlcnROb2RlOiBFZGl0b3JJbnRlcmZhY2VbJ2luc2VydE5vZGUnXSA9IChcbiAgZWRpdG9yLFxuICBub2RlLFxuICBvcHRpb25zXG4pID0+IHtcbiAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIG5vZGUsIG9wdGlvbnMpXG59XG4iLCAiaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0U29mdEJyZWFrOiBFZGl0b3JJbnRlcmZhY2VbJ2luc2VydFNvZnRCcmVhayddID0gZWRpdG9yID0+IHtcbiAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGVkaXRvciwgeyBhbHdheXM6IHRydWUgfSlcbn1cbiIsICJpbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBpbnNlcnRUZXh0OiBFZGl0b3JJbnRlcmZhY2VbJ2luc2VydFRleHQnXSA9IChcbiAgZWRpdG9yLFxuICB0ZXh0LFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiwgbWFya3MgfSA9IGVkaXRvclxuXG4gIGlmIChzZWxlY3Rpb24pIHtcbiAgICBpZiAobWFya3MpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSB7IHRleHQsIC4uLm1hcmtzIH1cbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBub2RlLCB7XG4gICAgICAgIGF0OiBvcHRpb25zLmF0LFxuICAgICAgICB2b2lkczogb3B0aW9ucy52b2lkcyxcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0VGV4dChlZGl0b3IsIHRleHQsIG9wdGlvbnMpXG4gICAgfVxuXG4gICAgZWRpdG9yLm1hcmtzID0gbnVsbFxuICB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBpc0Jsb2NrOiBFZGl0b3JJbnRlcmZhY2VbJ2lzQmxvY2snXSA9IChlZGl0b3IsIHZhbHVlKSA9PiB7XG4gIHJldHVybiAhZWRpdG9yLmlzSW5saW5lKHZhbHVlKVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBpc0VkZ2U6IEVkaXRvckludGVyZmFjZVsnaXNFZGdlJ10gPSAoZWRpdG9yLCBwb2ludCwgYXQpID0+IHtcbiAgcmV0dXJuIEVkaXRvci5pc1N0YXJ0KGVkaXRvciwgcG9pbnQsIGF0KSB8fCBFZGl0b3IuaXNFbmQoZWRpdG9yLCBwb2ludCwgYXQpXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuXG5leHBvcnQgY29uc3QgaXNFbXB0eTogRWRpdG9ySW50ZXJmYWNlWydpc0VtcHR5J10gPSAoZWRpdG9yLCBlbGVtZW50KSA9PiB7XG4gIGNvbnN0IHsgY2hpbGRyZW4gfSA9IGVsZW1lbnRcbiAgY29uc3QgW2ZpcnN0XSA9IGNoaWxkcmVuXG4gIHJldHVybiAoXG4gICAgY2hpbGRyZW4ubGVuZ3RoID09PSAwIHx8XG4gICAgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgVGV4dC5pc1RleHQoZmlyc3QpICYmXG4gICAgICBmaXJzdC50ZXh0ID09PSAnJyAmJlxuICAgICAgIWVkaXRvci5pc1ZvaWQoZWxlbWVudCkpXG4gIClcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BvaW50J1xuXG5leHBvcnQgY29uc3QgaXNFbmQ6IEVkaXRvckludGVyZmFjZVsnaXNFbmQnXSA9IChlZGl0b3IsIHBvaW50LCBhdCkgPT4ge1xuICBjb25zdCBlbmQgPSBFZGl0b3IuZW5kKGVkaXRvciwgYXQpXG4gIHJldHVybiBQb2ludC5lcXVhbHMocG9pbnQsIGVuZClcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IE5PUk1BTElaSU5HIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuXG5leHBvcnQgY29uc3QgaXNOb3JtYWxpemluZzogRWRpdG9ySW50ZXJmYWNlWydpc05vcm1hbGl6aW5nJ10gPSBlZGl0b3IgPT4ge1xuICBjb25zdCBpc05vcm1hbGl6aW5nID0gTk9STUFMSVpJTkcuZ2V0KGVkaXRvcilcbiAgcmV0dXJuIGlzTm9ybWFsaXppbmcgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBpc05vcm1hbGl6aW5nXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wb2ludCdcblxuZXhwb3J0IGNvbnN0IGlzU3RhcnQ6IEVkaXRvckludGVyZmFjZVsnaXNTdGFydCddID0gKGVkaXRvciwgcG9pbnQsIGF0KSA9PiB7XG4gIC8vIFBFUkY6IElmIHRoZSBvZmZzZXQgaXNuJ3QgYDBgIHdlIGtub3cgaXQncyBub3QgdGhlIHN0YXJ0LlxuICBpZiAocG9pbnQub2Zmc2V0ICE9PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBjb25zdCBzdGFydCA9IEVkaXRvci5zdGFydChlZGl0b3IsIGF0KVxuICByZXR1cm4gUG9pbnQuZXF1YWxzKHBvaW50LCBzdGFydClcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgbGFzdDogRWRpdG9ySW50ZXJmYWNlWydsYXN0J10gPSAoZWRpdG9yLCBhdCkgPT4ge1xuICBjb25zdCBwYXRoID0gRWRpdG9yLnBhdGgoZWRpdG9yLCBhdCwgeyBlZGdlOiAnZW5kJyB9KVxuICByZXR1cm4gRWRpdG9yLm5vZGUoZWRpdG9yLCBwYXRoKVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuXG5leHBvcnQgY29uc3QgbGVhZjogRWRpdG9ySW50ZXJmYWNlWydsZWFmJ10gPSAoZWRpdG9yLCBhdCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHBhdGggPSBFZGl0b3IucGF0aChlZGl0b3IsIGF0LCBvcHRpb25zKVxuICBjb25zdCBub2RlID0gTm9kZS5sZWFmKGVkaXRvciwgcGF0aClcbiAgcmV0dXJuIFtub2RlLCBwYXRoXVxufVxuIiwgImltcG9ydCB7IE5vZGUsIE5vZGVFbnRyeSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciwgRWRpdG9yTGV2ZWxzT3B0aW9ucyB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcblxuZXhwb3J0IGZ1bmN0aW9uKiBsZXZlbHM8VCBleHRlbmRzIE5vZGU+KFxuICBlZGl0b3I6IEVkaXRvcixcbiAgb3B0aW9uczogRWRpdG9yTGV2ZWxzT3B0aW9uczxUPiA9IHt9XG4pOiBHZW5lcmF0b3I8Tm9kZUVudHJ5PFQ+LCB2b2lkLCB1bmRlZmluZWQ+IHtcbiAgY29uc3QgeyBhdCA9IGVkaXRvci5zZWxlY3Rpb24sIHJldmVyc2UgPSBmYWxzZSwgdm9pZHMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICBsZXQgeyBtYXRjaCB9ID0gb3B0aW9uc1xuXG4gIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgbWF0Y2ggPSAoKSA9PiB0cnVlXG4gIH1cblxuICBpZiAoIWF0KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBsZXZlbHM6IE5vZGVFbnRyeTxUPltdID0gW11cbiAgY29uc3QgcGF0aCA9IEVkaXRvci5wYXRoKGVkaXRvciwgYXQpXG5cbiAgZm9yIChjb25zdCBbbiwgcF0gb2YgTm9kZS5sZXZlbHMoZWRpdG9yLCBwYXRoKSkge1xuICAgIGlmICghbWF0Y2gobiwgcCkpIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgbGV2ZWxzLnB1c2goW24sIHBdIGFzIE5vZGVFbnRyeTxUPilcblxuICAgIGlmICghdm9pZHMgJiYgRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzVm9pZChlZGl0b3IsIG4pKSB7XG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmIChyZXZlcnNlKSB7XG4gICAgbGV2ZWxzLnJldmVyc2UoKVxuICB9XG5cbiAgeWllbGQqIGxldmVsc1xufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBOb2RlRW50cnkgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJy4uL2ludGVyZmFjZXMnXG5cbmV4cG9ydCBjb25zdCBtYXJrczogRWRpdG9ySW50ZXJmYWNlWydtYXJrcyddID0gKGVkaXRvciwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgbWFya3MsIHNlbGVjdGlvbiB9ID0gZWRpdG9yXG5cbiAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGxldCB7IGFuY2hvciwgZm9jdXMgfSA9IHNlbGVjdGlvblxuXG4gIGlmIChtYXJrcykge1xuICAgIHJldHVybiBtYXJrc1xuICB9XG5cbiAgaWYgKFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgIC8qKlxuICAgICAqIENPTVBBVDogTWFrZSBzdXJlIGhhbmdpbmcgcmFuZ2VzIChjYXVzZWQgYnkgZG91YmxlIGNsaWNraW5nIGluIEZpcmVmb3gpXG4gICAgICogZG8gbm90IGFkdmVyc2VseSBhZmZlY3QgdGhlIHJldHVybmVkIG1hcmtzLlxuICAgICAqL1xuICAgIGNvbnN0IGlzRW5kID0gRWRpdG9yLmlzRW5kKGVkaXRvciwgYW5jaG9yLCBhbmNob3IucGF0aClcbiAgICBpZiAoaXNFbmQpIHtcbiAgICAgIGNvbnN0IGFmdGVyID0gRWRpdG9yLmFmdGVyKGVkaXRvciwgYW5jaG9yIGFzIFBvaW50KVxuICAgICAgaWYgKGFmdGVyKSB7XG4gICAgICAgIGFuY2hvciA9IGFmdGVyXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgW21hdGNoXSA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBUZXh0LmlzVGV4dCxcbiAgICAgIGF0OiB7XG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgZm9jdXMsXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIGNvbnN0IFtub2RlXSA9IG1hdGNoIGFzIE5vZGVFbnRyeTxUZXh0PlxuICAgICAgY29uc3QgeyB0ZXh0LCAuLi5yZXN0IH0gPSBub2RlXG4gICAgICByZXR1cm4gcmVzdFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge31cbiAgICB9XG4gIH1cblxuICBjb25zdCB7IHBhdGggfSA9IGFuY2hvclxuXG4gIGxldCBbbm9kZV0gPSBFZGl0b3IubGVhZihlZGl0b3IsIHBhdGgpXG5cbiAgaWYgKGFuY2hvci5vZmZzZXQgPT09IDApIHtcbiAgICBjb25zdCBwcmV2ID0gRWRpdG9yLnByZXZpb3VzKGVkaXRvciwgeyBhdDogcGF0aCwgbWF0Y2g6IFRleHQuaXNUZXh0IH0pXG4gICAgY29uc3QgbWFya2VkVm9pZCA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBuID0+XG4gICAgICAgIEVsZW1lbnQuaXNFbGVtZW50KG4pICYmXG4gICAgICAgIEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBuKSAmJlxuICAgICAgICBlZGl0b3IubWFya2FibGVWb2lkKG4pLFxuICAgIH0pXG4gICAgaWYgKCFtYXJrZWRWb2lkKSB7XG4gICAgICBjb25zdCBibG9jayA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKSxcbiAgICAgIH0pXG5cbiAgICAgIGlmIChwcmV2ICYmIGJsb2NrKSB7XG4gICAgICAgIGNvbnN0IFtwcmV2Tm9kZSwgcHJldlBhdGhdID0gcHJldlxuICAgICAgICBjb25zdCBbLCBibG9ja1BhdGhdID0gYmxvY2tcblxuICAgICAgICBpZiAoUGF0aC5pc0FuY2VzdG9yKGJsb2NrUGF0aCwgcHJldlBhdGgpKSB7XG4gICAgICAgICAgbm9kZSA9IHByZXZOb2RlIGFzIFRleHRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHsgdGV4dCwgLi4ucmVzdCB9ID0gbm9kZVxuICByZXR1cm4gcmVzdFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBTcGFuIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9sb2NhdGlvbidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5cbmV4cG9ydCBjb25zdCBuZXh0OiBFZGl0b3JJbnRlcmZhY2VbJ25leHQnXSA9IChlZGl0b3IsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IG1vZGUgPSAnbG93ZXN0Jywgdm9pZHMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICBsZXQgeyBtYXRjaCwgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uIH0gPSBvcHRpb25zXG5cbiAgaWYgKCFhdCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgcG9pbnRBZnRlckxvY2F0aW9uID0gRWRpdG9yLmFmdGVyKGVkaXRvciwgYXQsIHsgdm9pZHMgfSlcblxuICBpZiAoIXBvaW50QWZ0ZXJMb2NhdGlvbikgcmV0dXJuXG5cbiAgY29uc3QgWywgdG9dID0gRWRpdG9yLmxhc3QoZWRpdG9yLCBbXSlcblxuICBjb25zdCBzcGFuOiBTcGFuID0gW3BvaW50QWZ0ZXJMb2NhdGlvbi5wYXRoLCB0b11cblxuICBpZiAoUGF0aC5pc1BhdGgoYXQpICYmIGF0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGdldCB0aGUgbmV4dCBub2RlIGZyb20gdGhlIHJvb3Qgbm9kZSFgKVxuICB9XG5cbiAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICBpZiAoUGF0aC5pc1BhdGgoYXQpKSB7XG4gICAgICBjb25zdCBbcGFyZW50XSA9IEVkaXRvci5wYXJlbnQoZWRpdG9yLCBhdClcbiAgICAgIG1hdGNoID0gbiA9PiBwYXJlbnQuY2hpbGRyZW4uaW5jbHVkZXMobilcbiAgICB9IGVsc2Uge1xuICAgICAgbWF0Y2ggPSAoKSA9PiB0cnVlXG4gICAgfVxuICB9XG5cbiAgY29uc3QgW25leHRdID0gRWRpdG9yLm5vZGVzKGVkaXRvciwgeyBhdDogc3BhbiwgbWF0Y2gsIG1vZGUsIHZvaWRzIH0pXG4gIHJldHVybiBuZXh0XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5cbmV4cG9ydCBjb25zdCBub2RlOiBFZGl0b3JJbnRlcmZhY2VbJ25vZGUnXSA9IChlZGl0b3IsIGF0LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgcGF0aCA9IEVkaXRvci5wYXRoKGVkaXRvciwgYXQsIG9wdGlvbnMpXG4gIGNvbnN0IG5vZGUgPSBOb2RlLmdldChlZGl0b3IsIHBhdGgpXG4gIHJldHVybiBbbm9kZSwgcGF0aF1cbn1cbiIsICJpbXBvcnQgeyBOb2RlLCBOb2RlRW50cnkgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IsIEVkaXRvck5vZGVzT3B0aW9ucyB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgU3BhbiB9IGZyb20gJy4uL2ludGVyZmFjZXMvbG9jYXRpb24nXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5cbmV4cG9ydCBmdW5jdGlvbiogbm9kZXM8VCBleHRlbmRzIE5vZGU+KFxuICBlZGl0b3I6IEVkaXRvcixcbiAgb3B0aW9uczogRWRpdG9yTm9kZXNPcHRpb25zPFQ+ID0ge31cbik6IEdlbmVyYXRvcjxOb2RlRW50cnk8VD4sIHZvaWQsIHVuZGVmaW5lZD4ge1xuICBjb25zdCB7XG4gICAgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uLFxuICAgIG1vZGUgPSAnYWxsJyxcbiAgICB1bml2ZXJzYWwgPSBmYWxzZSxcbiAgICByZXZlcnNlID0gZmFsc2UsXG4gICAgdm9pZHMgPSBmYWxzZSxcbiAgICBpZ25vcmVOb25TZWxlY3RhYmxlID0gZmFsc2UsXG4gIH0gPSBvcHRpb25zXG4gIGxldCB7IG1hdGNoIH0gPSBvcHRpb25zXG5cbiAgaWYgKCFtYXRjaCkge1xuICAgIG1hdGNoID0gKCkgPT4gdHJ1ZVxuICB9XG5cbiAgaWYgKCFhdCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgbGV0IGZyb21cbiAgbGV0IHRvXG5cbiAgaWYgKFNwYW4uaXNTcGFuKGF0KSkge1xuICAgIGZyb20gPSBhdFswXVxuICAgIHRvID0gYXRbMV1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCBmaXJzdCA9IEVkaXRvci5wYXRoKGVkaXRvciwgYXQsIHsgZWRnZTogJ3N0YXJ0JyB9KVxuICAgIGNvbnN0IGxhc3QgPSBFZGl0b3IucGF0aChlZGl0b3IsIGF0LCB7IGVkZ2U6ICdlbmQnIH0pXG4gICAgZnJvbSA9IHJldmVyc2UgPyBsYXN0IDogZmlyc3RcbiAgICB0byA9IHJldmVyc2UgPyBmaXJzdCA6IGxhc3RcbiAgfVxuXG4gIGNvbnN0IG5vZGVFbnRyaWVzID0gTm9kZS5ub2RlcyhlZGl0b3IsIHtcbiAgICByZXZlcnNlLFxuICAgIGZyb20sXG4gICAgdG8sXG4gICAgcGFzczogKFtub2RlXSkgPT4ge1xuICAgICAgaWYgKCFFbGVtZW50LmlzRWxlbWVudChub2RlKSkgcmV0dXJuIGZhbHNlXG4gICAgICBpZiAoXG4gICAgICAgICF2b2lkcyAmJlxuICAgICAgICAoRWRpdG9yLmlzVm9pZChlZGl0b3IsIG5vZGUpIHx8IEVkaXRvci5pc0VsZW1lbnRSZWFkT25seShlZGl0b3IsIG5vZGUpKVxuICAgICAgKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgaWYgKGlnbm9yZU5vblNlbGVjdGFibGUgJiYgIUVkaXRvci5pc1NlbGVjdGFibGUoZWRpdG9yLCBub2RlKSkgcmV0dXJuIHRydWVcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0sXG4gIH0pXG5cbiAgY29uc3QgbWF0Y2hlczogTm9kZUVudHJ5PFQ+W10gPSBbXVxuICBsZXQgaGl0OiBOb2RlRW50cnk8VD4gfCB1bmRlZmluZWRcblxuICBmb3IgKGNvbnN0IFtub2RlLCBwYXRoXSBvZiBub2RlRW50cmllcykge1xuICAgIGlmIChcbiAgICAgIGlnbm9yZU5vblNlbGVjdGFibGUgJiZcbiAgICAgIEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmXG4gICAgICAhRWRpdG9yLmlzU2VsZWN0YWJsZShlZGl0b3IsIG5vZGUpXG4gICAgKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGNvbnN0IGlzTG93ZXIgPSBoaXQgJiYgUGF0aC5jb21wYXJlKHBhdGgsIGhpdFsxXSkgPT09IDBcblxuICAgIC8vIEluIGhpZ2hlc3QgbW9kZSBhbnkgbm9kZSBsb3dlciB0aGFuIHRoZSBsYXN0IGhpdCBpcyBub3QgYSBtYXRjaC5cbiAgICBpZiAobW9kZSA9PT0gJ2hpZ2hlc3QnICYmIGlzTG93ZXIpIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgaWYgKCFtYXRjaChub2RlLCBwYXRoKSkge1xuICAgICAgLy8gSWYgd2UndmUgYXJyaXZlZCBhdCBhIGxlYWYgdGV4dCBub2RlIHRoYXQgaXMgbm90IGxvd2VyIHRoYW4gdGhlIGxhc3RcbiAgICAgIC8vIGhpdCwgdGhlbiB3ZSd2ZSBmb3VuZCBhIGJyYW5jaCB0aGF0IGRvZXNuJ3QgaW5jbHVkZSBhIG1hdGNoLCB3aGljaFxuICAgICAgLy8gbWVhbnMgdGhlIG1hdGNoIGlzIG5vdCB1bml2ZXJzYWwuXG4gICAgICBpZiAodW5pdmVyc2FsICYmICFpc0xvd2VyICYmIFRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSdzIGEgbWF0Y2ggYW5kIGl0J3MgbG93ZXIgdGhhbiB0aGUgbGFzdCwgdXBkYXRlIHRoZSBoaXQuXG4gICAgaWYgKG1vZGUgPT09ICdsb3dlc3QnICYmIGlzTG93ZXIpIHtcbiAgICAgIGhpdCA9IFtub2RlLCBwYXRoXSBhcyBOb2RlRW50cnk8VD5cbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgLy8gSW4gbG93ZXN0IG1vZGUgd2UgZW1pdCB0aGUgbGFzdCBoaXQsIG9uY2UgaXQncyBndWFyYW50ZWVkIGxvd2VzdC5cbiAgICBjb25zdCBlbWl0OiBOb2RlRW50cnk8VD4gfCB1bmRlZmluZWQgPVxuICAgICAgbW9kZSA9PT0gJ2xvd2VzdCcgPyBoaXQgOiAoW25vZGUsIHBhdGhdIGFzIE5vZGVFbnRyeTxUPilcblxuICAgIGlmIChlbWl0KSB7XG4gICAgICBpZiAodW5pdmVyc2FsKSB7XG4gICAgICAgIG1hdGNoZXMucHVzaChlbWl0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeWllbGQgZW1pdFxuICAgICAgfVxuICAgIH1cblxuICAgIGhpdCA9IFtub2RlLCBwYXRoXSBhcyBOb2RlRW50cnk8VD5cbiAgfVxuXG4gIC8vIFNpbmNlIGxvd2VzdCBpcyBhbHdheXMgZW1pdHRpbmcgb25lIGJlaGluZCwgY2F0Y2ggdXAgYXQgdGhlIGVuZC5cbiAgaWYgKG1vZGUgPT09ICdsb3dlc3QnICYmIGhpdCkge1xuICAgIGlmICh1bml2ZXJzYWwpIHtcbiAgICAgIG1hdGNoZXMucHVzaChoaXQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHlpZWxkIGhpdFxuICAgIH1cbiAgfVxuXG4gIC8vIFVuaXZlcnNhbCBkZWZlcnMgdG8gZW5zdXJlIHRoYXQgdGhlIG1hdGNoIG9jY3VycyBpbiBldmVyeSBicmFuY2gsIHNvIHdlXG4gIC8vIHlpZWxkIGFsbCBvZiB0aGUgbWF0Y2hlcyBhZnRlciBpdGVyYXRpbmcuXG4gIGlmICh1bml2ZXJzYWwpIHtcbiAgICB5aWVsZCogbWF0Y2hlc1xuICB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IERJUlRZX1BBVEhfS0VZUywgRElSVFlfUEFUSFMgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5cbmV4cG9ydCBjb25zdCBub3JtYWxpemU6IEVkaXRvckludGVyZmFjZVsnbm9ybWFsaXplJ10gPSAoXG4gIGVkaXRvcixcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgY29uc3QgeyBmb3JjZSA9IGZhbHNlLCBvcGVyYXRpb24gfSA9IG9wdGlvbnNcbiAgY29uc3QgZ2V0RGlydHlQYXRocyA9IChlZGl0b3I6IEVkaXRvcikgPT4ge1xuICAgIHJldHVybiBESVJUWV9QQVRIUy5nZXQoZWRpdG9yKSB8fCBbXVxuICB9XG5cbiAgY29uc3QgZ2V0RGlydHlQYXRoS2V5cyA9IChlZGl0b3I6IEVkaXRvcikgPT4ge1xuICAgIHJldHVybiBESVJUWV9QQVRIX0tFWVMuZ2V0KGVkaXRvcikgfHwgbmV3IFNldCgpXG4gIH1cblxuICBjb25zdCBwb3BEaXJ0eVBhdGggPSAoZWRpdG9yOiBFZGl0b3IpOiBQYXRoID0+IHtcbiAgICBjb25zdCBwYXRoID0gZ2V0RGlydHlQYXRocyhlZGl0b3IpLnBvcCgpIVxuICAgIGNvbnN0IGtleSA9IHBhdGguam9pbignLCcpXG4gICAgZ2V0RGlydHlQYXRoS2V5cyhlZGl0b3IpLmRlbGV0ZShrZXkpXG4gICAgcmV0dXJuIHBhdGhcbiAgfVxuXG4gIGlmICghRWRpdG9yLmlzTm9ybWFsaXppbmcoZWRpdG9yKSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKGZvcmNlKSB7XG4gICAgY29uc3QgYWxsUGF0aHMgPSBBcnJheS5mcm9tKE5vZGUubm9kZXMoZWRpdG9yKSwgKFssIHBdKSA9PiBwKVxuICAgIGNvbnN0IGFsbFBhdGhLZXlzID0gbmV3IFNldChhbGxQYXRocy5tYXAocCA9PiBwLmpvaW4oJywnKSkpXG4gICAgRElSVFlfUEFUSFMuc2V0KGVkaXRvciwgYWxsUGF0aHMpXG4gICAgRElSVFlfUEFUSF9LRVlTLnNldChlZGl0b3IsIGFsbFBhdGhLZXlzKVxuICB9XG5cbiAgaWYgKGdldERpcnR5UGF0aHMoZWRpdG9yKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgLypcbiAgICAgIEZpeCBkaXJ0eSBlbGVtZW50cyB3aXRoIG5vIGNoaWxkcmVuLlxuICAgICAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUoKSBkb2VzIGZpeCB0aGlzLCBidXQgc29tZSBub3JtYWxpemF0aW9uIGZpeGVzIGFsc28gcmVxdWlyZSBpdCB0byB3b3JrLlxuICAgICAgUnVubmluZyBhbiBpbml0aWFsIHBhc3MgYXZvaWRzIHRoZSBjYXRjaC0yMiByYWNlIGNvbmRpdGlvbi5cbiAgICAqL1xuICAgIGZvciAoY29uc3QgZGlydHlQYXRoIG9mIGdldERpcnR5UGF0aHMoZWRpdG9yKSkge1xuICAgICAgaWYgKE5vZGUuaGFzKGVkaXRvciwgZGlydHlQYXRoKSkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IEVkaXRvci5ub2RlKGVkaXRvciwgZGlydHlQYXRoKVxuICAgICAgICBjb25zdCBbbm9kZSwgX10gPSBlbnRyeVxuXG4gICAgICAgIC8qXG4gICAgICAgICAgVGhlIGRlZmF1bHQgbm9ybWFsaXplciBpbnNlcnRzIGFuIGVtcHR5IHRleHQgbm9kZSBpbiB0aGlzIHNjZW5hcmlvLCBidXQgaXQgY2FuIGJlIGN1c3RvbWlzZWQuXG4gICAgICAgICAgU28gdGhlcmUgaXMgc29tZSByaXNrIGhlcmUuXG5cbiAgICAgICAgICBBcyBsb25nIGFzIHRoZSBub3JtYWxpemVyIG9ubHkgaW5zZXJ0cyBjaGlsZCBub2RlcyBmb3IgdGhpcyBjYXNlIGl0IGlzIHNhZmUgdG8gZG8gaW4gYW55IG9yZGVyO1xuICAgICAgICAgIGJ5IGRlZmluaXRpb24gYWRkaW5nIGNoaWxkcmVuIHRvIGFuIGVtcHR5IG5vZGUgY2FuJ3QgY2F1c2Ugb3RoZXIgcGF0aHMgdG8gY2hhbmdlLlxuICAgICAgICAqL1xuICAgICAgICBpZiAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBlZGl0b3Iubm9ybWFsaXplTm9kZShlbnRyeSwgeyBvcGVyYXRpb24gfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBkaXJ0eVBhdGhzID0gZ2V0RGlydHlQYXRocyhlZGl0b3IpXG4gICAgY29uc3QgaW5pdGlhbERpcnR5UGF0aHNMZW5ndGggPSBkaXJ0eVBhdGhzLmxlbmd0aFxuICAgIGxldCBpdGVyYXRpb24gPSAwXG5cbiAgICB3aGlsZSAoZGlydHlQYXRocy5sZW5ndGggIT09IDApIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWVkaXRvci5zaG91bGROb3JtYWxpemUoe1xuICAgICAgICAgIGRpcnR5UGF0aHMsXG4gICAgICAgICAgaXRlcmF0aW9uLFxuICAgICAgICAgIGluaXRpYWxEaXJ0eVBhdGhzTGVuZ3RoLFxuICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgfSlcbiAgICAgICkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgZGlydHlQYXRoID0gcG9wRGlydHlQYXRoKGVkaXRvcilcblxuICAgICAgLy8gSWYgdGhlIG5vZGUgZG9lc24ndCBleGlzdCBpbiB0aGUgdHJlZSwgaXQgZG9lcyBub3QgbmVlZCB0byBiZSBub3JtYWxpemVkLlxuICAgICAgaWYgKE5vZGUuaGFzKGVkaXRvciwgZGlydHlQYXRoKSkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IEVkaXRvci5ub2RlKGVkaXRvciwgZGlydHlQYXRoKVxuICAgICAgICBlZGl0b3Iubm9ybWFsaXplTm9kZShlbnRyeSwgeyBvcGVyYXRpb24gfSlcbiAgICAgIH1cbiAgICAgIGl0ZXJhdGlvbisrXG4gICAgICBkaXJ0eVBhdGhzID0gZ2V0RGlydHlQYXRocyhlZGl0b3IpXG4gICAgfVxuICB9KVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgQW5jZXN0b3IsIE5vZGVFbnRyeSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcblxuZXhwb3J0IGNvbnN0IHBhcmVudDogRWRpdG9ySW50ZXJmYWNlWydwYXJlbnQnXSA9IChlZGl0b3IsIGF0LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgcGF0aCA9IEVkaXRvci5wYXRoKGVkaXRvciwgYXQsIG9wdGlvbnMpXG4gIGNvbnN0IHBhcmVudFBhdGggPSBQYXRoLnBhcmVudChwYXRoKVxuICBjb25zdCBlbnRyeSA9IEVkaXRvci5ub2RlKGVkaXRvciwgcGFyZW50UGF0aClcbiAgcmV0dXJuIGVudHJ5IGFzIE5vZGVFbnRyeTxBbmNlc3Rvcj5cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUGF0aFJlZiB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aC1yZWYnXG5cbmV4cG9ydCBjb25zdCBwYXRoUmVmOiBFZGl0b3JJbnRlcmZhY2VbJ3BhdGhSZWYnXSA9IChcbiAgZWRpdG9yLFxuICBwYXRoLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBjb25zdCB7IGFmZmluaXR5ID0gJ2ZvcndhcmQnIH0gPSBvcHRpb25zXG4gIGNvbnN0IHJlZjogUGF0aFJlZiA9IHtcbiAgICBjdXJyZW50OiBwYXRoLFxuICAgIGFmZmluaXR5LFxuICAgIHVucmVmKCkge1xuICAgICAgY29uc3QgeyBjdXJyZW50IH0gPSByZWZcbiAgICAgIGNvbnN0IHBhdGhSZWZzID0gRWRpdG9yLnBhdGhSZWZzKGVkaXRvcilcbiAgICAgIHBhdGhSZWZzLmRlbGV0ZShyZWYpXG4gICAgICByZWYuY3VycmVudCA9IG51bGxcbiAgICAgIHJldHVybiBjdXJyZW50XG4gICAgfSxcbiAgfVxuXG4gIGNvbnN0IHJlZnMgPSBFZGl0b3IucGF0aFJlZnMoZWRpdG9yKVxuICByZWZzLmFkZChyZWYpXG4gIHJldHVybiByZWZcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBBVEhfUkVGUyB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcblxuZXhwb3J0IGNvbnN0IHBhdGhSZWZzOiBFZGl0b3JJbnRlcmZhY2VbJ3BhdGhSZWZzJ10gPSBlZGl0b3IgPT4ge1xuICBsZXQgcmVmcyA9IFBBVEhfUkVGUy5nZXQoZWRpdG9yKVxuXG4gIGlmICghcmVmcykge1xuICAgIHJlZnMgPSBuZXcgU2V0KClcbiAgICBQQVRIX1JFRlMuc2V0KGVkaXRvciwgcmVmcylcbiAgfVxuXG4gIHJldHVybiByZWZzXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlLCBOb2RlLCBQYXRoLCBQb2ludCwgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzJ1xuXG5leHBvcnQgY29uc3QgcGF0aDogRWRpdG9ySW50ZXJmYWNlWydwYXRoJ10gPSAoZWRpdG9yLCBhdCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgZGVwdGgsIGVkZ2UgfSA9IG9wdGlvbnNcblxuICBpZiAoUGF0aC5pc1BhdGgoYXQpKSB7XG4gICAgaWYgKGVkZ2UgPT09ICdzdGFydCcpIHtcbiAgICAgIGNvbnN0IFssIGZpcnN0UGF0aF0gPSBOb2RlLmZpcnN0KGVkaXRvciwgYXQpXG4gICAgICBhdCA9IGZpcnN0UGF0aFxuICAgIH0gZWxzZSBpZiAoZWRnZSA9PT0gJ2VuZCcpIHtcbiAgICAgIGNvbnN0IFssIGxhc3RQYXRoXSA9IE5vZGUubGFzdChlZGl0b3IsIGF0KVxuICAgICAgYXQgPSBsYXN0UGF0aFxuICAgIH1cbiAgfVxuXG4gIGlmIChSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgIGlmIChlZGdlID09PSAnc3RhcnQnKSB7XG4gICAgICBhdCA9IFJhbmdlLnN0YXJ0KGF0KVxuICAgIH0gZWxzZSBpZiAoZWRnZSA9PT0gJ2VuZCcpIHtcbiAgICAgIGF0ID0gUmFuZ2UuZW5kKGF0KVxuICAgIH0gZWxzZSB7XG4gICAgICBhdCA9IFBhdGguY29tbW9uKGF0LmFuY2hvci5wYXRoLCBhdC5mb2N1cy5wYXRoKVxuICAgIH1cbiAgfVxuXG4gIGlmIChQb2ludC5pc1BvaW50KGF0KSkge1xuICAgIGF0ID0gYXQucGF0aFxuICB9XG5cbiAgaWYgKGRlcHRoICE9IG51bGwpIHtcbiAgICBhdCA9IGF0LnNsaWNlKDAsIGRlcHRoKVxuICB9XG5cbiAgcmV0dXJuIGF0XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBvaW50UmVmIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wb2ludC1yZWYnXG5cbmV4cG9ydCBjb25zdCBwb2ludFJlZjogRWRpdG9ySW50ZXJmYWNlWydwb2ludFJlZiddID0gKFxuICBlZGl0b3IsXG4gIHBvaW50LFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBjb25zdCB7IGFmZmluaXR5ID0gJ2ZvcndhcmQnIH0gPSBvcHRpb25zXG4gIGNvbnN0IHJlZjogUG9pbnRSZWYgPSB7XG4gICAgY3VycmVudDogcG9pbnQsXG4gICAgYWZmaW5pdHksXG4gICAgdW5yZWYoKSB7XG4gICAgICBjb25zdCB7IGN1cnJlbnQgfSA9IHJlZlxuICAgICAgY29uc3QgcG9pbnRSZWZzID0gRWRpdG9yLnBvaW50UmVmcyhlZGl0b3IpXG4gICAgICBwb2ludFJlZnMuZGVsZXRlKHJlZilcbiAgICAgIHJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgcmV0dXJuIGN1cnJlbnRcbiAgICB9LFxuICB9XG5cbiAgY29uc3QgcmVmcyA9IEVkaXRvci5wb2ludFJlZnMoZWRpdG9yKVxuICByZWZzLmFkZChyZWYpXG4gIHJldHVybiByZWZcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBPSU5UX1JFRlMgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5cbmV4cG9ydCBjb25zdCBwb2ludFJlZnM6IEVkaXRvckludGVyZmFjZVsncG9pbnRSZWZzJ10gPSBlZGl0b3IgPT4ge1xuICBsZXQgcmVmcyA9IFBPSU5UX1JFRlMuZ2V0KGVkaXRvcilcblxuICBpZiAoIXJlZnMpIHtcbiAgICByZWZzID0gbmV3IFNldCgpXG4gICAgUE9JTlRfUkVGUy5zZXQoZWRpdG9yLCByZWZzKVxuICB9XG5cbiAgcmV0dXJuIHJlZnNcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcblxuZXhwb3J0IGNvbnN0IHBvaW50OiBFZGl0b3JJbnRlcmZhY2VbJ3BvaW50J10gPSAoZWRpdG9yLCBhdCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgZWRnZSA9ICdzdGFydCcgfSA9IG9wdGlvbnNcblxuICBpZiAoUGF0aC5pc1BhdGgoYXQpKSB7XG4gICAgbGV0IHBhdGhcblxuICAgIGlmIChlZGdlID09PSAnZW5kJykge1xuICAgICAgY29uc3QgWywgbGFzdFBhdGhdID0gTm9kZS5sYXN0KGVkaXRvciwgYXQpXG4gICAgICBwYXRoID0gbGFzdFBhdGhcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgWywgZmlyc3RQYXRoXSA9IE5vZGUuZmlyc3QoZWRpdG9yLCBhdClcbiAgICAgIHBhdGggPSBmaXJzdFBhdGhcbiAgICB9XG5cbiAgICBjb25zdCBub2RlID0gTm9kZS5nZXQoZWRpdG9yLCBwYXRoKVxuXG4gICAgaWYgKCFUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGdldCB0aGUgJHtlZGdlfSBwb2ludCBpbiB0aGUgbm9kZSBhdCBwYXRoIFske2F0fV0gYmVjYXVzZSBpdCBoYXMgbm8gJHtlZGdlfSB0ZXh0IG5vZGUuYFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiB7IHBhdGgsIG9mZnNldDogZWRnZSA9PT0gJ2VuZCcgPyBub2RlLnRleHQubGVuZ3RoIDogMCB9XG4gIH1cblxuICBpZiAoUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyhhdClcbiAgICByZXR1cm4gZWRnZSA9PT0gJ3N0YXJ0JyA/IHN0YXJ0IDogZW5kXG4gIH1cblxuICByZXR1cm4gYXRcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvclBvc2l0aW9uc09wdGlvbnMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wb2ludCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7XG4gIGdldENoYXJhY3RlckRpc3RhbmNlLFxuICBnZXRXb3JkRGlzdGFuY2UsXG4gIHNwbGl0QnlDaGFyYWN0ZXJEaXN0YW5jZSxcbn0gZnJvbSAnLi4vdXRpbHMvc3RyaW5nJ1xuXG5leHBvcnQgZnVuY3Rpb24qIHBvc2l0aW9ucyhcbiAgZWRpdG9yOiBFZGl0b3IsXG4gIG9wdGlvbnM6IEVkaXRvclBvc2l0aW9uc09wdGlvbnMgPSB7fVxuKTogR2VuZXJhdG9yPFBvaW50LCB2b2lkLCB1bmRlZmluZWQ+IHtcbiAgY29uc3Qge1xuICAgIGF0ID0gZWRpdG9yLnNlbGVjdGlvbixcbiAgICB1bml0ID0gJ29mZnNldCcsXG4gICAgcmV2ZXJzZSA9IGZhbHNlLFxuICAgIHZvaWRzID0gZmFsc2UsXG4gICAgaWdub3JlTm9uU2VsZWN0YWJsZSA9IGZhbHNlLFxuICB9ID0gb3B0aW9uc1xuXG4gIGlmICghYXQpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8qKlxuICAgKiBBbGdvcml0aG0gbm90ZXM6XG4gICAqXG4gICAqIEVhY2ggc3RlcCBgZGlzdGFuY2VgIGlzIGR5bmFtaWMgZGVwZW5kaW5nIG9uIHRoZSB1bmRlcmx5aW5nIHRleHRcbiAgICogYW5kIHRoZSBgdW5pdGAgc3BlY2lmaWVkLiAgRWFjaCBzdGVwLCBlLmcuLCBhIGxpbmUgb3Igd29yZCwgbWF5XG4gICAqIHNwYW4gbXVsdGlwbGUgdGV4dCBub2Rlcywgc28gd2UgaXRlcmF0ZSB0aHJvdWdoIHRoZSB0ZXh0IGJvdGggb25cbiAgICogdHdvIGxldmVscyBpbiBzdGVwLXN5bmM6XG4gICAqXG4gICAqIGBsZWFmVGV4dGAgc3RvcmVzIHRoZSB0ZXh0IG9uIGEgdGV4dCBsZWFmIGxldmVsLCBhbmQgaXMgYWR2YW5jZWRcbiAgICogdGhyb3VnaCB1c2luZyB0aGUgY291bnRlcnMgYGxlYWZUZXh0T2Zmc2V0YCBhbmQgYGxlYWZUZXh0UmVtYWluaW5nYC5cbiAgICpcbiAgICogYGJsb2NrVGV4dGAgc3RvcmVzIHRoZSB0ZXh0IG9uIGEgYmxvY2sgbGV2ZWwsIGFuZCBpcyBzaG9ydGVuZWRcbiAgICogYnkgYGRpc3RhbmNlYCBldmVyeSB0aW1lIGl0IGlzIGFkdmFuY2VkLlxuICAgKlxuICAgKiBXZSBvbmx5IG1haW50YWluIGEgd2luZG93IG9mIG9uZSBibG9ja1RleHQgYW5kIG9uZSBsZWFmVGV4dCBiZWNhdXNlXG4gICAqIGEgYmxvY2sgbm9kZSBhbHdheXMgYXBwZWFycyBiZWZvcmUgYWxsIG9mIGl0cyBsZWFmIG5vZGVzLlxuICAgKi9cblxuICBjb25zdCByYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIGF0KVxuICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyhyYW5nZSlcbiAgY29uc3QgZmlyc3QgPSByZXZlcnNlID8gZW5kIDogc3RhcnRcbiAgbGV0IGlzTmV3QmxvY2sgPSBmYWxzZVxuICBsZXQgYmxvY2tUZXh0ID0gJydcbiAgbGV0IGRpc3RhbmNlID0gMCAvLyBEaXN0YW5jZSBmb3IgbGVhZlRleHQgdG8gY2F0Y2ggdXAgdG8gYmxvY2tUZXh0LlxuICBsZXQgbGVhZlRleHRSZW1haW5pbmcgPSAwXG4gIGxldCBsZWFmVGV4dE9mZnNldCA9IDBcblxuICAvLyBJdGVyYXRlIHRocm91Z2ggYWxsIG5vZGVzIGluIHJhbmdlLCBncmFiYmluZyBlbnRpcmUgdGV4dHVhbCBjb250ZW50XG4gIC8vIG9mIGJsb2NrIG5vZGVzIGluIGJsb2NrVGV4dCwgYW5kIHRleHQgbm9kZXMgaW4gbGVhZlRleHQuXG4gIC8vIEV4cGxvaXRzIHRoZSBmYWN0IHRoYXQgbm9kZXMgYXJlIHNlcXVlbmNlZCBpbiBzdWNoIGEgd2F5IHRoYXQgd2UgZmlyc3RcbiAgLy8gZW5jb3VudGVyIHRoZSBibG9jayBub2RlLCB0aGVuIGFsbCBvZiBpdHMgdGV4dCBub2Rlcywgc28gd2hlbiBpdGVyYXRpbmdcbiAgLy8gdGhyb3VnaCB0aGUgYmxvY2tUZXh0IGFuZCBsZWFmVGV4dCB3ZSBqdXN0IG5lZWQgdG8gcmVtZW1iZXIgYSB3aW5kb3cgb2ZcbiAgLy8gb25lIGJsb2NrIG5vZGUgYW5kIGxlYWYgbm9kZSwgcmVzcGVjdGl2ZWx5LlxuICBmb3IgKGNvbnN0IFtub2RlLCBwYXRoXSBvZiBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgYXQsXG4gICAgcmV2ZXJzZSxcbiAgICB2b2lkcyxcbiAgICBpZ25vcmVOb25TZWxlY3RhYmxlLFxuICB9KSkge1xuICAgIC8qXG4gICAgICogRUxFTUVOVCBOT0RFIC0gWWllbGQgcG9zaXRpb24ocykgZm9yIHZvaWRzLCBjb2xsZWN0IGJsb2NrVGV4dCBmb3IgYmxvY2tzXG4gICAgICovXG4gICAgaWYgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpKSB7XG4gICAgICAvLyBWb2lkIG5vZGVzIGFyZSBhIHNwZWNpYWwgY2FzZSwgc28gYnkgZGVmYXVsdCB3ZSB3aWxsIGFsd2F5c1xuICAgICAgLy8geWllbGQgdGhlaXIgZmlyc3QgcG9pbnQuIElmIHRoZSBgdm9pZHNgIG9wdGlvbiBpcyBzZXQgdG8gdHJ1ZSxcbiAgICAgIC8vIHRoZW4gd2Ugd2lsbCBpdGVyYXRlIG92ZXIgdGhlaXIgY29udGVudC5cbiAgICAgIGlmICghdm9pZHMgJiYgKGVkaXRvci5pc1ZvaWQobm9kZSkgfHwgZWRpdG9yLmlzRWxlbWVudFJlYWRPbmx5KG5vZGUpKSkge1xuICAgICAgICB5aWVsZCBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBwYXRoKVxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyBJbmxpbmUgZWxlbWVudCBub2RlcyBhcmUgaWdub3JlZCBhcyB0aGV5IGRvbid0IHRoZW1zZWx2ZXNcbiAgICAgIC8vIGNvbnRyaWJ1dGUgdG8gYGJsb2NrVGV4dGAgb3IgYGxlYWZUZXh0YCAtIHRoZWlyIHBhcmVudCBhbmRcbiAgICAgIC8vIGNoaWxkcmVuIGRvLlxuICAgICAgaWYgKGVkaXRvci5pc0lubGluZShub2RlKSkgY29udGludWVcblxuICAgICAgLy8gQmxvY2sgZWxlbWVudCBub2RlIC0gc2V0IGBibG9ja1RleHRgIHRvIGl0cyB0ZXh0IGNvbnRlbnQuXG4gICAgICBpZiAoRWRpdG9yLmhhc0lubGluZXMoZWRpdG9yLCBub2RlKSkge1xuICAgICAgICAvLyBXZSBhbHdheXMgZXhoYXVzdCBibG9jayBub2RlcyBiZWZvcmUgZW5jb3VudGVyaW5nIGEgbmV3IG9uZTpcbiAgICAgICAgLy8gICBjb25zb2xlLmFzc2VydChibG9ja1RleHQgPT09ICcnLFxuICAgICAgICAvLyAgICAgYGJsb2NrVGV4dD0nJHtibG9ja1RleHR9JyAtIGArXG4gICAgICAgIC8vICAgICBgbm90IGV4aGF1c3RlZCBiZWZvcmUgbmV3IGJsb2NrIG5vZGVgLCBwYXRoKVxuXG4gICAgICAgIC8vIEVuc3VyZSByYW5nZSBjb25zaWRlcmVkIGlzIGNhcHBlZCB0byBgcmFuZ2VgLCBpbiB0aGVcbiAgICAgICAgLy8gc3RhcnQvZW5kIGVkZ2UgY2FzZXMgd2hlcmUgYmxvY2sgZXh0ZW5kcyBiZXlvbmQgcmFuZ2UuXG4gICAgICAgIC8vIEVxdWl2YWxlbnQgdG8gdGhpcywgYnV0IHByZXN1bWFibHkgbW9yZSBwZXJmb3JtYW50OlxuICAgICAgICAvLyAgIGJsb2NrUmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCAuLi5FZGl0b3IuZWRnZXMoZWRpdG9yLCBwYXRoKSlcbiAgICAgICAgLy8gICBibG9ja1JhbmdlID0gUmFuZ2UuaW50ZXJzZWN0aW9uKHJhbmdlLCBibG9ja1JhbmdlKSAvLyBpbnRlcnNlY3RcbiAgICAgICAgLy8gICBibG9ja1RleHQgPSBFZGl0b3Iuc3RyaW5nKGVkaXRvciwgYmxvY2tSYW5nZSwgeyB2b2lkcyB9KVxuICAgICAgICBjb25zdCBlID0gUGF0aC5pc0FuY2VzdG9yKHBhdGgsIGVuZC5wYXRoKVxuICAgICAgICAgID8gZW5kXG4gICAgICAgICAgOiBFZGl0b3IuZW5kKGVkaXRvciwgcGF0aClcbiAgICAgICAgY29uc3QgcyA9IFBhdGguaXNBbmNlc3RvcihwYXRoLCBzdGFydC5wYXRoKVxuICAgICAgICAgID8gc3RhcnRcbiAgICAgICAgICA6IEVkaXRvci5zdGFydChlZGl0b3IsIHBhdGgpXG5cbiAgICAgICAgYmxvY2tUZXh0ID0gRWRpdG9yLnN0cmluZyhlZGl0b3IsIHsgYW5jaG9yOiBzLCBmb2N1czogZSB9LCB7IHZvaWRzIH0pXG4gICAgICAgIGlzTmV3QmxvY2sgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBURVhUIExFQUYgTk9ERSAtIEl0ZXJhdGUgdGhyb3VnaCB0ZXh0IGNvbnRlbnQsIHlpZWxkaW5nXG4gICAgICogcG9zaXRpb25zIGV2ZXJ5IGBkaXN0YW5jZWAgb2Zmc2V0IGFjY29yZGluZyB0byBgdW5pdGAuXG4gICAgICovXG4gICAgaWYgKFRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICBjb25zdCBpc0ZpcnN0ID0gUGF0aC5lcXVhbHMocGF0aCwgZmlyc3QucGF0aClcblxuICAgICAgLy8gUHJvb2YgdGhhdCB3ZSBhbHdheXMgZXhoYXVzdCB0ZXh0IG5vZGVzIGJlZm9yZSBlbmNvdW50ZXJpbmcgYSBuZXcgb25lOlxuICAgICAgLy8gICBjb25zb2xlLmFzc2VydChsZWFmVGV4dFJlbWFpbmluZyA8PSAwLFxuICAgICAgLy8gICAgIGBsZWFmVGV4dFJlbWFpbmluZz0ke2xlYWZUZXh0UmVtYWluaW5nfSAtIGArXG4gICAgICAvLyAgICAgYG5vdCBleGhhdXN0ZWQgYmVmb3JlIG5ldyBsZWFmIHRleHQgbm9kZWAsIHBhdGgpXG5cbiAgICAgIC8vIFJlc2V0IGBsZWFmVGV4dGAgY291bnRlcnMgZm9yIG5ldyB0ZXh0IG5vZGUuXG4gICAgICBpZiAoaXNGaXJzdCkge1xuICAgICAgICBsZWFmVGV4dFJlbWFpbmluZyA9IHJldmVyc2VcbiAgICAgICAgICA/IGZpcnN0Lm9mZnNldFxuICAgICAgICAgIDogbm9kZS50ZXh0Lmxlbmd0aCAtIGZpcnN0Lm9mZnNldFxuICAgICAgICBsZWFmVGV4dE9mZnNldCA9IGZpcnN0Lm9mZnNldCAvLyBXb3JrcyBmb3IgcmV2ZXJzZSB0b28uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZWFmVGV4dFJlbWFpbmluZyA9IG5vZGUudGV4dC5sZW5ndGhcbiAgICAgICAgbGVhZlRleHRPZmZzZXQgPSByZXZlcnNlID8gbGVhZlRleHRSZW1haW5pbmcgOiAwXG4gICAgICB9XG5cbiAgICAgIC8vIFlpZWxkIHBvc2l0aW9uIGF0IHRoZSBzdGFydCBvZiBub2RlIChwb3RlbnRpYWxseSkuXG4gICAgICBpZiAoaXNGaXJzdCB8fCBpc05ld0Jsb2NrIHx8IHVuaXQgPT09ICdvZmZzZXQnKSB7XG4gICAgICAgIHlpZWxkIHsgcGF0aCwgb2Zmc2V0OiBsZWFmVGV4dE9mZnNldCB9XG4gICAgICAgIGlzTmV3QmxvY2sgPSBmYWxzZVxuICAgICAgfVxuXG4gICAgICAvLyBZaWVsZCBwb3NpdGlvbnMgZXZlcnkgKGR5bmFtaWNhbGx5IGNhbGN1bGF0ZWQpIGBkaXN0YW5jZWAgb2Zmc2V0LlxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgLy8gSWYgYGxlYWZUZXh0YCBoYXMgY2F1Z2h0IHVwIHdpdGggYGJsb2NrVGV4dGAgKGRpc3RhbmNlPTApLFxuICAgICAgICAvLyBhbmQgaWYgYmxvY2tUZXh0IGlzIGV4aGF1c3RlZCwgYnJlYWsgdG8gZ2V0IGFub3RoZXIgYmxvY2sgbm9kZSxcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGFkdmFuY2UgYmxvY2tUZXh0IGZvcndhcmQgYnkgdGhlIG5ldyBgZGlzdGFuY2VgLlxuICAgICAgICBpZiAoZGlzdGFuY2UgPT09IDApIHtcbiAgICAgICAgICBpZiAoYmxvY2tUZXh0ID09PSAnJykgYnJlYWtcbiAgICAgICAgICBkaXN0YW5jZSA9IGNhbGNEaXN0YW5jZShibG9ja1RleHQsIHVuaXQsIHJldmVyc2UpXG4gICAgICAgICAgLy8gU3BsaXQgdGhlIHN0cmluZyBhdCB0aGUgcHJldmlvdXNseSBmb3VuZCBkaXN0YW5jZSBhbmQgdXNlIHRoZVxuICAgICAgICAgIC8vIHJlbWFpbmluZyBzdHJpbmcgZm9yIHRoZSBuZXh0IGl0ZXJhdGlvbi5cbiAgICAgICAgICBibG9ja1RleHQgPSBzcGxpdEJ5Q2hhcmFjdGVyRGlzdGFuY2UoYmxvY2tUZXh0LCBkaXN0YW5jZSwgcmV2ZXJzZSlbMV1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkdmFuY2UgYGxlYWZUZXh0YCBieSB0aGUgY3VycmVudCBgZGlzdGFuY2VgLlxuICAgICAgICBsZWFmVGV4dE9mZnNldCA9IHJldmVyc2VcbiAgICAgICAgICA/IGxlYWZUZXh0T2Zmc2V0IC0gZGlzdGFuY2VcbiAgICAgICAgICA6IGxlYWZUZXh0T2Zmc2V0ICsgZGlzdGFuY2VcbiAgICAgICAgbGVhZlRleHRSZW1haW5pbmcgPSBsZWFmVGV4dFJlbWFpbmluZyAtIGRpc3RhbmNlXG5cbiAgICAgICAgLy8gSWYgYGxlYWZUZXh0YCBpcyBleGhhdXN0ZWQsIGJyZWFrIHRvIGdldCBhIG5ldyBsZWFmIG5vZGVcbiAgICAgICAgLy8gYW5kIHNldCBkaXN0YW5jZSB0byB0aGUgb3ZlcmZsb3cgYW1vdW50LCBzbyB3ZSdsbCAobWF5YmUpXG4gICAgICAgIC8vIGNhdGNoIHVwIHRvIGJsb2NrVGV4dCBpbiB0aGUgbmV4dCBsZWFmIHRleHQgbm9kZS5cbiAgICAgICAgaWYgKGxlYWZUZXh0UmVtYWluaW5nIDwgMCkge1xuICAgICAgICAgIGRpc3RhbmNlID0gLWxlYWZUZXh0UmVtYWluaW5nXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN1Y2Nlc3NmdWxseSB3YWxrZWQgYGRpc3RhbmNlYCBvZmZzZXRzIHRocm91Z2ggYGxlYWZUZXh0YFxuICAgICAgICAvLyB0byBjYXRjaCB1cCB3aXRoIGBibG9ja1RleHRgLCBzbyB3ZSBjYW4gcmVzZXQgYGRpc3RhbmNlYFxuICAgICAgICAvLyBhbmQgeWllbGQgdGhpcyBwb3NpdGlvbiBpbiB0aGlzIG5vZGUuXG4gICAgICAgIGRpc3RhbmNlID0gMFxuICAgICAgICB5aWVsZCB7IHBhdGgsIG9mZnNldDogbGVhZlRleHRPZmZzZXQgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBQcm9vZiB0aGF0IHVwb24gY29tcGxldGlvbiwgd2UndmUgZXhhaHVzdGVkIGJvdGggbGVhZiBhbmQgYmxvY2sgdGV4dDpcbiAgLy8gICBjb25zb2xlLmFzc2VydChsZWFmVGV4dFJlbWFpbmluZyA8PSAwLCBcImxlYWZUZXh0IHdhc24ndCBleGhhdXN0ZWRcIilcbiAgLy8gICBjb25zb2xlLmFzc2VydChibG9ja1RleHQgPT09ICcnLCBcImJsb2NrVGV4dCB3YXNuJ3QgZXhoYXVzdGVkXCIpXG5cbiAgLy8gSGVscGVyOlxuICAvLyBSZXR1cm4gdGhlIGRpc3RhbmNlIGluIG9mZnNldHMgZm9yIGEgc3RlcCBvZiBzaXplIGB1bml0YCBvbiBnaXZlbiBzdHJpbmcuXG4gIGZ1bmN0aW9uIGNhbGNEaXN0YW5jZSh0ZXh0OiBzdHJpbmcsIHVuaXQ6IHN0cmluZywgcmV2ZXJzZT86IGJvb2xlYW4pIHtcbiAgICBpZiAodW5pdCA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIHJldHVybiBnZXRDaGFyYWN0ZXJEaXN0YW5jZSh0ZXh0LCByZXZlcnNlKVxuICAgIH0gZWxzZSBpZiAodW5pdCA9PT0gJ3dvcmQnKSB7XG4gICAgICByZXR1cm4gZ2V0V29yZERpc3RhbmNlKHRleHQsIHJldmVyc2UpXG4gICAgfSBlbHNlIGlmICh1bml0ID09PSAnbGluZScgfHwgdW5pdCA9PT0gJ2Jsb2NrJykge1xuICAgICAgcmV0dXJuIHRleHQubGVuZ3RoXG4gICAgfVxuICAgIHJldHVybiAxXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgU3BhbiB9IGZyb20gJy4uL2ludGVyZmFjZXMvbG9jYXRpb24nXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuXG5leHBvcnQgY29uc3QgcHJldmlvdXM6IEVkaXRvckludGVyZmFjZVsncHJldmlvdXMnXSA9IChlZGl0b3IsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IG1vZGUgPSAnbG93ZXN0Jywgdm9pZHMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICBsZXQgeyBtYXRjaCwgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uIH0gPSBvcHRpb25zXG5cbiAgaWYgKCFhdCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgcG9pbnRCZWZvcmVMb2NhdGlvbiA9IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBhdCwgeyB2b2lkcyB9KVxuXG4gIGlmICghcG9pbnRCZWZvcmVMb2NhdGlvbikge1xuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgWywgdG9dID0gRWRpdG9yLmZpcnN0KGVkaXRvciwgW10pXG5cbiAgLy8gVGhlIHNlYXJjaCBsb2NhdGlvbiBpcyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgZG9jdW1lbnQgdG8gdGhlIHBhdGggb2ZcbiAgLy8gdGhlIHBvaW50IGJlZm9yZSB0aGUgbG9jYXRpb24gcGFzc2VkIGluXG4gIGNvbnN0IHNwYW46IFNwYW4gPSBbcG9pbnRCZWZvcmVMb2NhdGlvbi5wYXRoLCB0b11cblxuICBpZiAoUGF0aC5pc1BhdGgoYXQpICYmIGF0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGdldCB0aGUgcHJldmlvdXMgbm9kZSBmcm9tIHRoZSByb290IG5vZGUhYClcbiAgfVxuXG4gIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgaWYgKFBhdGguaXNQYXRoKGF0KSkge1xuICAgICAgY29uc3QgW3BhcmVudF0gPSBFZGl0b3IucGFyZW50KGVkaXRvciwgYXQpXG4gICAgICBtYXRjaCA9IG4gPT4gcGFyZW50LmNoaWxkcmVuLmluY2x1ZGVzKG4pXG4gICAgfSBlbHNlIHtcbiAgICAgIG1hdGNoID0gKCkgPT4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IFtwcmV2aW91c10gPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgcmV2ZXJzZTogdHJ1ZSxcbiAgICBhdDogc3BhbixcbiAgICBtYXRjaCxcbiAgICBtb2RlLFxuICAgIHZvaWRzLFxuICB9KVxuXG4gIHJldHVybiBwcmV2aW91c1xufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBSYW5nZVJlZiB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UtcmVmJ1xuXG5leHBvcnQgY29uc3QgcmFuZ2VSZWY6IEVkaXRvckludGVyZmFjZVsncmFuZ2VSZWYnXSA9IChcbiAgZWRpdG9yLFxuICByYW5nZSxcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgY29uc3QgeyBhZmZpbml0eSA9ICdmb3J3YXJkJyB9ID0gb3B0aW9uc1xuICBjb25zdCByZWY6IFJhbmdlUmVmID0ge1xuICAgIGN1cnJlbnQ6IHJhbmdlLFxuICAgIGFmZmluaXR5LFxuICAgIHVucmVmKCkge1xuICAgICAgY29uc3QgeyBjdXJyZW50IH0gPSByZWZcbiAgICAgIGNvbnN0IHJhbmdlUmVmcyA9IEVkaXRvci5yYW5nZVJlZnMoZWRpdG9yKVxuICAgICAgcmFuZ2VSZWZzLmRlbGV0ZShyZWYpXG4gICAgICByZWYuY3VycmVudCA9IG51bGxcbiAgICAgIHJldHVybiBjdXJyZW50XG4gICAgfSxcbiAgfVxuXG4gIGNvbnN0IHJlZnMgPSBFZGl0b3IucmFuZ2VSZWZzKGVkaXRvcilcbiAgcmVmcy5hZGQocmVmKVxuICByZXR1cm4gcmVmXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBSQU5HRV9SRUZTIH0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuXG5leHBvcnQgY29uc3QgcmFuZ2VSZWZzOiBFZGl0b3JJbnRlcmZhY2VbJ3JhbmdlUmVmcyddID0gZWRpdG9yID0+IHtcbiAgbGV0IHJlZnMgPSBSQU5HRV9SRUZTLmdldChlZGl0b3IpXG5cbiAgaWYgKCFyZWZzKSB7XG4gICAgcmVmcyA9IG5ldyBTZXQoKVxuICAgIFJBTkdFX1JFRlMuc2V0KGVkaXRvciwgcmVmcylcbiAgfVxuXG4gIHJldHVybiByZWZzXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcblxuZXhwb3J0IGNvbnN0IHJhbmdlOiBFZGl0b3JJbnRlcmZhY2VbJ3JhbmdlJ10gPSAoZWRpdG9yLCBhdCwgdG8pID0+IHtcbiAgaWYgKFJhbmdlLmlzUmFuZ2UoYXQpICYmICF0bykge1xuICAgIHJldHVybiBhdFxuICB9XG5cbiAgY29uc3Qgc3RhcnQgPSBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBhdClcbiAgY29uc3QgZW5kID0gRWRpdG9yLmVuZChlZGl0b3IsIHRvIHx8IGF0KVxuICByZXR1cm4geyBhbmNob3I6IHN0YXJ0LCBmb2N1czogZW5kIH1cbn1cbiIsICJpbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgRkxVU0hJTkcgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlTWFyazogRWRpdG9ySW50ZXJmYWNlWydyZW1vdmVNYXJrJ10gPSAoZWRpdG9yLCBrZXkpID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuXG4gIGlmIChzZWxlY3Rpb24pIHtcbiAgICBjb25zdCBtYXRjaCA9IChub2RlOiBOb2RlLCBwYXRoOiBQYXRoKSA9PiB7XG4gICAgICBpZiAoIVRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZSAvLyBtYXJrcyBjYW4gb25seSBiZSBhcHBsaWVkIHRvIHRleHRcbiAgICAgIH1cbiAgICAgIGNvbnN0IFtwYXJlbnROb2RlLCBwYXJlbnRQYXRoXSA9IEVkaXRvci5wYXJlbnQoZWRpdG9yLCBwYXRoKVxuICAgICAgcmV0dXJuICFlZGl0b3IuaXNWb2lkKHBhcmVudE5vZGUpIHx8IGVkaXRvci5tYXJrYWJsZVZvaWQocGFyZW50Tm9kZSlcbiAgICB9XG4gICAgY29uc3QgZXhwYW5kZWRTZWxlY3Rpb24gPSBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbilcbiAgICBsZXQgbWFya0FjY2VwdGluZ1ZvaWRTZWxlY3RlZCA9IGZhbHNlXG4gICAgaWYgKCFleHBhbmRlZFNlbGVjdGlvbikge1xuICAgICAgY29uc3QgW3NlbGVjdGVkTm9kZSwgc2VsZWN0ZWRQYXRoXSA9IEVkaXRvci5ub2RlKGVkaXRvciwgc2VsZWN0aW9uKVxuICAgICAgaWYgKHNlbGVjdGVkTm9kZSAmJiBtYXRjaChzZWxlY3RlZE5vZGUsIHNlbGVjdGVkUGF0aCkpIHtcbiAgICAgICAgY29uc3QgW3BhcmVudE5vZGVdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIHNlbGVjdGVkUGF0aClcbiAgICAgICAgbWFya0FjY2VwdGluZ1ZvaWRTZWxlY3RlZCA9XG4gICAgICAgICAgcGFyZW50Tm9kZSAmJiBlZGl0b3IubWFya2FibGVWb2lkKHBhcmVudE5vZGUpXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChleHBhbmRlZFNlbGVjdGlvbiB8fCBtYXJrQWNjZXB0aW5nVm9pZFNlbGVjdGVkKSB7XG4gICAgICBUcmFuc2Zvcm1zLnVuc2V0Tm9kZXMoZWRpdG9yLCBrZXksIHtcbiAgICAgICAgbWF0Y2gsXG4gICAgICAgIHNwbGl0OiB0cnVlLFxuICAgICAgICB2b2lkczogdHJ1ZSxcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1hcmtzID0geyAuLi4oRWRpdG9yLm1hcmtzKGVkaXRvcikgfHwge30pIH1cbiAgICAgIGRlbGV0ZSBtYXJrc1s8a2V5b2YgTm9kZT5rZXldXG4gICAgICBlZGl0b3IubWFya3MgPSBtYXJrc1xuICAgICAgaWYgKCFGTFVTSElORy5nZXQoZWRpdG9yKSkge1xuICAgICAgICBlZGl0b3Iub25DaGFuZ2UoKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgTk9STUFMSVpJTkcgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5cbmV4cG9ydCBjb25zdCBzZXROb3JtYWxpemluZzogRWRpdG9ySW50ZXJmYWNlWydzZXROb3JtYWxpemluZyddID0gKFxuICBlZGl0b3IsXG4gIGlzTm9ybWFsaXppbmdcbikgPT4ge1xuICBOT1JNQUxJWklORy5zZXQoZWRpdG9yLCBpc05vcm1hbGl6aW5nKVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCBzdGFydDogRWRpdG9ySW50ZXJmYWNlWydzdGFydCddID0gKGVkaXRvciwgYXQpID0+IHtcbiAgcmV0dXJuIEVkaXRvci5wb2ludChlZGl0b3IsIGF0LCB7IGVkZ2U6ICdzdGFydCcgfSlcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5cbmV4cG9ydCBjb25zdCBzdHJpbmc6IEVkaXRvckludGVyZmFjZVsnc3RyaW5nJ10gPSAoZWRpdG9yLCBhdCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgdm9pZHMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICBjb25zdCByYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIGF0KVxuICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyhyYW5nZSlcbiAgbGV0IHRleHQgPSAnJ1xuXG4gIGZvciAoY29uc3QgW25vZGUsIHBhdGhdIG9mIEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICBhdDogcmFuZ2UsXG4gICAgbWF0Y2g6IFRleHQuaXNUZXh0LFxuICAgIHZvaWRzLFxuICB9KSkge1xuICAgIGxldCB0ID0gbm9kZS50ZXh0XG5cbiAgICBpZiAoUGF0aC5lcXVhbHMocGF0aCwgZW5kLnBhdGgpKSB7XG4gICAgICB0ID0gdC5zbGljZSgwLCBlbmQub2Zmc2V0KVxuICAgIH1cblxuICAgIGlmIChQYXRoLmVxdWFscyhwYXRoLCBzdGFydC5wYXRoKSkge1xuICAgICAgdCA9IHQuc2xpY2Uoc3RhcnQub2Zmc2V0KVxuICAgIH1cblxuICAgIHRleHQgKz0gdFxuICB9XG5cbiAgcmV0dXJuIHRleHRcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIEVkaXRvckludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuXG5leHBvcnQgY29uc3QgdW5oYW5nUmFuZ2U6IEVkaXRvckludGVyZmFjZVsndW5oYW5nUmFuZ2UnXSA9IChcbiAgZWRpdG9yLFxuICByYW5nZSxcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgY29uc3QgeyB2b2lkcyA9IGZhbHNlIH0gPSBvcHRpb25zXG4gIGxldCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyhyYW5nZSlcblxuICAvLyBQRVJGOiBleGl0IGVhcmx5IGlmIHdlIGNhbiBndWFyYW50ZWUgdGhhdCB0aGUgcmFuZ2UgaXNuJ3QgaGFuZ2luZy5cbiAgaWYgKFxuICAgIHN0YXJ0Lm9mZnNldCAhPT0gMCB8fFxuICAgIGVuZC5vZmZzZXQgIT09IDAgfHxcbiAgICBSYW5nZS5pc0NvbGxhcHNlZChyYW5nZSkgfHxcbiAgICBQYXRoLmhhc1ByZXZpb3VzKGVuZC5wYXRoKVxuICApIHtcbiAgICByZXR1cm4gcmFuZ2VcbiAgfVxuXG4gIGNvbnN0IGVuZEJsb2NrID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIGF0OiBlbmQsXG4gICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKSxcbiAgICB2b2lkcyxcbiAgfSlcbiAgY29uc3QgYmxvY2tQYXRoID0gZW5kQmxvY2sgPyBlbmRCbG9ja1sxXSA6IFtdXG4gIGNvbnN0IGZpcnN0ID0gRWRpdG9yLnN0YXJ0KGVkaXRvciwgc3RhcnQpXG4gIGNvbnN0IGJlZm9yZSA9IHsgYW5jaG9yOiBmaXJzdCwgZm9jdXM6IGVuZCB9XG4gIGxldCBza2lwID0gdHJ1ZVxuXG4gIGZvciAoY29uc3QgW25vZGUsIHBhdGhdIG9mIEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICBhdDogYmVmb3JlLFxuICAgIG1hdGNoOiBUZXh0LmlzVGV4dCxcbiAgICByZXZlcnNlOiB0cnVlLFxuICAgIHZvaWRzLFxuICB9KSkge1xuICAgIGlmIChza2lwKSB7XG4gICAgICBza2lwID0gZmFsc2VcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgaWYgKG5vZGUudGV4dCAhPT0gJycgfHwgUGF0aC5pc0JlZm9yZShwYXRoLCBibG9ja1BhdGgpKSB7XG4gICAgICBlbmQgPSB7IHBhdGgsIG9mZnNldDogbm9kZS50ZXh0Lmxlbmd0aCB9XG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IGFuY2hvcjogc3RhcnQsIGZvY3VzOiBlbmQgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgRWRpdG9ySW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5cbmV4cG9ydCBjb25zdCB3aXRob3V0Tm9ybWFsaXppbmc6IEVkaXRvckludGVyZmFjZVsnd2l0aG91dE5vcm1hbGl6aW5nJ10gPSAoXG4gIGVkaXRvcixcbiAgZm5cbikgPT4ge1xuICBjb25zdCB2YWx1ZSA9IEVkaXRvci5pc05vcm1hbGl6aW5nKGVkaXRvcilcbiAgRWRpdG9yLnNldE5vcm1hbGl6aW5nKGVkaXRvciwgZmFsc2UpXG4gIHRyeSB7XG4gICAgZm4oKVxuICB9IGZpbmFsbHkge1xuICAgIEVkaXRvci5zZXROb3JtYWxpemluZyhlZGl0b3IsIHZhbHVlKVxuICB9XG4gIEVkaXRvci5ub3JtYWxpemUoZWRpdG9yKVxufVxuIiwgImltcG9ydCB7IFRleHRUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL3RleHQnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wb2ludCdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IE5vZGVFbnRyeSB9IGZyb20gJy4uL2ludGVyZmFjZXMvbm9kZSdcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZVRleHQ6IFRleHRUcmFuc2Zvcm1zWydkZWxldGUnXSA9IChlZGl0b3IsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHJldmVyc2UgPSBmYWxzZSxcbiAgICAgIHVuaXQgPSAnY2hhcmFjdGVyJyxcbiAgICAgIGRpc3RhbmNlID0gMSxcbiAgICAgIHZvaWRzID0gZmFsc2UsXG4gICAgfSA9IG9wdGlvbnNcbiAgICBsZXQgeyBhdCA9IGVkaXRvci5zZWxlY3Rpb24sIGhhbmdpbmcgPSBmYWxzZSB9ID0gb3B0aW9uc1xuXG4gICAgaWYgKCFhdCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IGlzQ29sbGFwc2VkID0gZmFsc2VcbiAgICBpZiAoUmFuZ2UuaXNSYW5nZShhdCkgJiYgUmFuZ2UuaXNDb2xsYXBzZWQoYXQpKSB7XG4gICAgICBpc0NvbGxhcHNlZCA9IHRydWVcbiAgICAgIGF0ID0gYXQuYW5jaG9yXG4gICAgfVxuXG4gICAgaWYgKFBvaW50LmlzUG9pbnQoYXQpKSB7XG4gICAgICBjb25zdCBmdXJ0aGVzdFZvaWQgPSBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQsIG1vZGU6ICdoaWdoZXN0JyB9KVxuXG4gICAgICBpZiAoIXZvaWRzICYmIGZ1cnRoZXN0Vm9pZCkge1xuICAgICAgICBjb25zdCBbLCB2b2lkUGF0aF0gPSBmdXJ0aGVzdFZvaWRcbiAgICAgICAgYXQgPSB2b2lkUGF0aFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgb3B0cyA9IHsgdW5pdCwgZGlzdGFuY2UgfVxuICAgICAgICBjb25zdCB0YXJnZXQgPSByZXZlcnNlXG4gICAgICAgICAgPyBFZGl0b3IuYmVmb3JlKGVkaXRvciwgYXQsIG9wdHMpIHx8IEVkaXRvci5zdGFydChlZGl0b3IsIFtdKVxuICAgICAgICAgIDogRWRpdG9yLmFmdGVyKGVkaXRvciwgYXQsIG9wdHMpIHx8IEVkaXRvci5lbmQoZWRpdG9yLCBbXSlcbiAgICAgICAgYXQgPSB7IGFuY2hvcjogYXQsIGZvY3VzOiB0YXJnZXQgfVxuICAgICAgICBoYW5naW5nID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChQYXRoLmlzUGF0aChhdCkpIHtcbiAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7IGF0LCB2b2lkcyB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKFJhbmdlLmlzQ29sbGFwc2VkKGF0KSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKCFoYW5naW5nKSB7XG4gICAgICBjb25zdCBbLCBlbmRdID0gUmFuZ2UuZWRnZXMoYXQpXG4gICAgICBjb25zdCBlbmRPZkRvYyA9IEVkaXRvci5lbmQoZWRpdG9yLCBbXSlcblxuICAgICAgaWYgKCFQb2ludC5lcXVhbHMoZW5kLCBlbmRPZkRvYykpIHtcbiAgICAgICAgYXQgPSBFZGl0b3IudW5oYW5nUmFuZ2UoZWRpdG9yLCBhdCwgeyB2b2lkcyB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyhhdClcbiAgICBjb25zdCBzdGFydEJsb2NrID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKSxcbiAgICAgIGF0OiBzdGFydCxcbiAgICAgIHZvaWRzLFxuICAgIH0pXG4gICAgY29uc3QgZW5kQmxvY2sgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pLFxuICAgICAgYXQ6IGVuZCxcbiAgICAgIHZvaWRzLFxuICAgIH0pXG4gICAgY29uc3QgaXNBY3Jvc3NCbG9ja3MgPVxuICAgICAgc3RhcnRCbG9jayAmJiBlbmRCbG9jayAmJiAhUGF0aC5lcXVhbHMoc3RhcnRCbG9ja1sxXSwgZW5kQmxvY2tbMV0pXG4gICAgY29uc3QgaXNTaW5nbGVUZXh0ID0gUGF0aC5lcXVhbHMoc3RhcnQucGF0aCwgZW5kLnBhdGgpXG4gICAgY29uc3Qgc3RhcnROb25FZGl0YWJsZSA9IHZvaWRzXG4gICAgICA/IG51bGxcbiAgICAgIDogRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0OiBzdGFydCwgbW9kZTogJ2hpZ2hlc3QnIH0pID8/XG4gICAgICAgIEVkaXRvci5lbGVtZW50UmVhZE9ubHkoZWRpdG9yLCB7IGF0OiBzdGFydCwgbW9kZTogJ2hpZ2hlc3QnIH0pXG4gICAgY29uc3QgZW5kTm9uRWRpdGFibGUgPSB2b2lkc1xuICAgICAgPyBudWxsXG4gICAgICA6IEVkaXRvci52b2lkKGVkaXRvciwgeyBhdDogZW5kLCBtb2RlOiAnaGlnaGVzdCcgfSkgPz9cbiAgICAgICAgRWRpdG9yLmVsZW1lbnRSZWFkT25seShlZGl0b3IsIHsgYXQ6IGVuZCwgbW9kZTogJ2hpZ2hlc3QnIH0pXG5cbiAgICAvLyBJZiB0aGUgc3RhcnQgb3IgZW5kIHBvaW50cyBhcmUgaW5zaWRlIGFuIGlubGluZSB2b2lkLCBudWRnZSB0aGVtIG91dC5cbiAgICBpZiAoc3RhcnROb25FZGl0YWJsZSkge1xuICAgICAgY29uc3QgYmVmb3JlID0gRWRpdG9yLmJlZm9yZShlZGl0b3IsIHN0YXJ0KVxuXG4gICAgICBpZiAoYmVmb3JlICYmIHN0YXJ0QmxvY2sgJiYgUGF0aC5pc0FuY2VzdG9yKHN0YXJ0QmxvY2tbMV0sIGJlZm9yZS5wYXRoKSkge1xuICAgICAgICBzdGFydCA9IGJlZm9yZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlbmROb25FZGl0YWJsZSkge1xuICAgICAgY29uc3QgYWZ0ZXIgPSBFZGl0b3IuYWZ0ZXIoZWRpdG9yLCBlbmQpXG5cbiAgICAgIGlmIChhZnRlciAmJiBlbmRCbG9jayAmJiBQYXRoLmlzQW5jZXN0b3IoZW5kQmxvY2tbMV0sIGFmdGVyLnBhdGgpKSB7XG4gICAgICAgIGVuZCA9IGFmdGVyXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBoaWdoZXN0IG5vZGVzIHRoYXQgYXJlIGNvbXBsZXRlbHkgaW5zaWRlIHRoZSByYW5nZSwgYXMgd2VsbCBhc1xuICAgIC8vIHRoZSBzdGFydCBhbmQgZW5kIG5vZGVzLlxuICAgIGNvbnN0IG1hdGNoZXM6IE5vZGVFbnRyeVtdID0gW11cbiAgICBsZXQgbGFzdFBhdGg6IFBhdGggfCB1bmRlZmluZWRcblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgRWRpdG9yLm5vZGVzKGVkaXRvciwgeyBhdCwgdm9pZHMgfSkpIHtcbiAgICAgIGNvbnN0IFtub2RlLCBwYXRoXSA9IGVudHJ5XG5cbiAgICAgIGlmIChsYXN0UGF0aCAmJiBQYXRoLmNvbXBhcmUocGF0aCwgbGFzdFBhdGgpID09PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgKCF2b2lkcyAmJlxuICAgICAgICAgIEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmXG4gICAgICAgICAgKEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBub2RlKSB8fFxuICAgICAgICAgICAgRWRpdG9yLmlzRWxlbWVudFJlYWRPbmx5KGVkaXRvciwgbm9kZSkpKSB8fFxuICAgICAgICAoIVBhdGguaXNDb21tb24ocGF0aCwgc3RhcnQucGF0aCkgJiYgIVBhdGguaXNDb21tb24ocGF0aCwgZW5kLnBhdGgpKVxuICAgICAgKSB7XG4gICAgICAgIG1hdGNoZXMucHVzaChlbnRyeSlcbiAgICAgICAgbGFzdFBhdGggPSBwYXRoXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcGF0aFJlZnMgPSBBcnJheS5mcm9tKG1hdGNoZXMsIChbLCBwXSkgPT4gRWRpdG9yLnBhdGhSZWYoZWRpdG9yLCBwKSlcbiAgICBjb25zdCBzdGFydFJlZiA9IEVkaXRvci5wb2ludFJlZihlZGl0b3IsIHN0YXJ0KVxuICAgIGNvbnN0IGVuZFJlZiA9IEVkaXRvci5wb2ludFJlZihlZGl0b3IsIGVuZClcblxuICAgIGxldCByZW1vdmVkVGV4dCA9ICcnXG5cbiAgICBpZiAoIWlzU2luZ2xlVGV4dCAmJiAhc3RhcnROb25FZGl0YWJsZSkge1xuICAgICAgY29uc3QgcG9pbnQgPSBzdGFydFJlZi5jdXJyZW50IVxuICAgICAgY29uc3QgW25vZGVdID0gRWRpdG9yLmxlYWYoZWRpdG9yLCBwb2ludClcbiAgICAgIGNvbnN0IHsgcGF0aCB9ID0gcG9pbnRcbiAgICAgIGNvbnN0IHsgb2Zmc2V0IH0gPSBzdGFydFxuICAgICAgY29uc3QgdGV4dCA9IG5vZGUudGV4dC5zbGljZShvZmZzZXQpXG4gICAgICBpZiAodGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGVkaXRvci5hcHBseSh7IHR5cGU6ICdyZW1vdmVfdGV4dCcsIHBhdGgsIG9mZnNldCwgdGV4dCB9KVxuICAgICAgICByZW1vdmVkVGV4dCA9IHRleHRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXRoUmVmc1xuICAgICAgLnJldmVyc2UoKVxuICAgICAgLm1hcChyID0+IHIudW5yZWYoKSlcbiAgICAgIC5maWx0ZXIoKHIpOiByIGlzIFBhdGggPT4gciAhPT0gbnVsbClcbiAgICAgIC5mb3JFYWNoKHAgPT4gVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHsgYXQ6IHAsIHZvaWRzIH0pKVxuXG4gICAgaWYgKCFlbmROb25FZGl0YWJsZSkge1xuICAgICAgY29uc3QgcG9pbnQgPSBlbmRSZWYuY3VycmVudCFcbiAgICAgIGNvbnN0IFtub2RlXSA9IEVkaXRvci5sZWFmKGVkaXRvciwgcG9pbnQpXG4gICAgICBjb25zdCB7IHBhdGggfSA9IHBvaW50XG4gICAgICBjb25zdCBvZmZzZXQgPSBpc1NpbmdsZVRleHQgPyBzdGFydC5vZmZzZXQgOiAwXG4gICAgICBjb25zdCB0ZXh0ID0gbm9kZS50ZXh0LnNsaWNlKG9mZnNldCwgZW5kLm9mZnNldClcbiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgZWRpdG9yLmFwcGx5KHsgdHlwZTogJ3JlbW92ZV90ZXh0JywgcGF0aCwgb2Zmc2V0LCB0ZXh0IH0pXG4gICAgICAgIHJlbW92ZWRUZXh0ID0gdGV4dFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghaXNTaW5nbGVUZXh0ICYmIGlzQWNyb3NzQmxvY2tzICYmIGVuZFJlZi5jdXJyZW50ICYmIHN0YXJ0UmVmLmN1cnJlbnQpIHtcbiAgICAgIFRyYW5zZm9ybXMubWVyZ2VOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IGVuZFJlZi5jdXJyZW50LFxuICAgICAgICBoYW5naW5nOiB0cnVlLFxuICAgICAgICB2b2lkcyxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gRm9yIFRoYWkgc2NyaXB0LCBkZWxldGluZyBOIGNoYXJhY3RlcihzKSBiYWNrd2FyZCBzaG91bGQgZGVsZXRlXG4gICAgLy8gTiBjb2RlIHBvaW50KHMpIGluc3RlYWQgb2YgYW4gZW50aXJlIGdyYXBoZW1lIGNsdXN0ZXIuXG4gICAgLy8gVGhlcmVmb3JlLCB0aGUgcmVtYWluaW5nIGNvZGUgcG9pbnRzIHNob3VsZCBiZSBpbnNlcnRlZCBiYWNrLlxuICAgIGlmIChcbiAgICAgIGlzQ29sbGFwc2VkICYmXG4gICAgICByZXZlcnNlICYmXG4gICAgICB1bml0ID09PSAnY2hhcmFjdGVyJyAmJlxuICAgICAgcmVtb3ZlZFRleHQubGVuZ3RoID4gMSAmJlxuICAgICAgcmVtb3ZlZFRleHQubWF0Y2goL1tcXHUwRTAwLVxcdTBFN0ZdKy8pXG4gICAgKSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydFRleHQoXG4gICAgICAgIGVkaXRvcixcbiAgICAgICAgcmVtb3ZlZFRleHQuc2xpY2UoMCwgcmVtb3ZlZFRleHQubGVuZ3RoIC0gZGlzdGFuY2UpXG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRVbnJlZiA9IHN0YXJ0UmVmLnVucmVmKClcbiAgICBjb25zdCBlbmRVbnJlZiA9IGVuZFJlZi51bnJlZigpXG4gICAgY29uc3QgcG9pbnQgPSByZXZlcnNlID8gc3RhcnRVbnJlZiB8fCBlbmRVbnJlZiA6IGVuZFVucmVmIHx8IHN0YXJ0VW5yZWZcblxuICAgIGlmIChvcHRpb25zLmF0ID09IG51bGwgJiYgcG9pbnQpIHtcbiAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgcG9pbnQpXG4gICAgfVxuICB9KVxufVxuIiwgImltcG9ydCB7IFRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgTm9kZSwgTm9kZUVudHJ5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGV4dCdcbmltcG9ydCB7IFRleHRUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL3RleHQnXG5pbXBvcnQgeyBnZXREZWZhdWx0SW5zZXJ0TG9jYXRpb24gfSBmcm9tICcuLi91dGlscydcblxuZXhwb3J0IGNvbnN0IGluc2VydEZyYWdtZW50OiBUZXh0VHJhbnNmb3Jtc1snaW5zZXJ0RnJhZ21lbnQnXSA9IChcbiAgZWRpdG9yLFxuICBmcmFnbWVudCxcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCB7IGhhbmdpbmcgPSBmYWxzZSwgdm9pZHMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgIGxldCB7IGF0ID0gZ2V0RGVmYXVsdEluc2VydExvY2F0aW9uKGVkaXRvcikgfSA9IG9wdGlvbnNcblxuICAgIGlmICghZnJhZ21lbnQubGVuZ3RoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICAgIGlmICghaGFuZ2luZykge1xuICAgICAgICBhdCA9IEVkaXRvci51bmhhbmdSYW5nZShlZGl0b3IsIGF0LCB7IHZvaWRzIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChSYW5nZS5pc0NvbGxhcHNlZChhdCkpIHtcbiAgICAgICAgYXQgPSBhdC5hbmNob3JcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IFssIGVuZF0gPSBSYW5nZS5lZGdlcyhhdClcblxuICAgICAgICBpZiAoIXZvaWRzICYmIEVkaXRvci52b2lkKGVkaXRvciwgeyBhdDogZW5kIH0pKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwb2ludFJlZiA9IEVkaXRvci5wb2ludFJlZihlZGl0b3IsIGVuZClcbiAgICAgICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7IGF0IH0pXG4gICAgICAgIGF0ID0gcG9pbnRSZWYudW5yZWYoKSFcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKFBhdGguaXNQYXRoKGF0KSkge1xuICAgICAgYXQgPSBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBhdClcbiAgICB9XG5cbiAgICBpZiAoIXZvaWRzICYmIEVkaXRvci52b2lkKGVkaXRvciwgeyBhdCB9KSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGluc2VydCBwb2ludCBpcyBhdCB0aGUgZWRnZSBvZiBhbiBpbmxpbmUgbm9kZSwgbW92ZSBpdCBvdXRzaWRlXG4gICAgLy8gaW5zdGVhZCBzaW5jZSBpdCB3aWxsIG5lZWQgdG8gYmUgc3BsaXQgb3RoZXJ3aXNlLlxuICAgIGNvbnN0IGlubGluZUVsZW1lbnRNYXRjaCA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIGF0LFxuICAgICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzSW5saW5lKGVkaXRvciwgbiksXG4gICAgICBtb2RlOiAnaGlnaGVzdCcsXG4gICAgICB2b2lkcyxcbiAgICB9KVxuXG4gICAgaWYgKGlubGluZUVsZW1lbnRNYXRjaCkge1xuICAgICAgY29uc3QgWywgaW5saW5lUGF0aF0gPSBpbmxpbmVFbGVtZW50TWF0Y2hcblxuICAgICAgaWYgKEVkaXRvci5pc0VuZChlZGl0b3IsIGF0LCBpbmxpbmVQYXRoKSkge1xuICAgICAgICBjb25zdCBhZnRlciA9IEVkaXRvci5hZnRlcihlZGl0b3IsIGlubGluZVBhdGgpIVxuICAgICAgICBhdCA9IGFmdGVyXG4gICAgICB9IGVsc2UgaWYgKEVkaXRvci5pc1N0YXJ0KGVkaXRvciwgYXQsIGlubGluZVBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGJlZm9yZSA9IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBpbmxpbmVQYXRoKSFcbiAgICAgICAgYXQgPSBiZWZvcmVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBibG9ja01hdGNoID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKSxcbiAgICAgIGF0LFxuICAgICAgdm9pZHMsXG4gICAgfSkhXG4gICAgY29uc3QgWywgYmxvY2tQYXRoXSA9IGJsb2NrTWF0Y2hcbiAgICBjb25zdCBpc0Jsb2NrU3RhcnQgPSBFZGl0b3IuaXNTdGFydChlZGl0b3IsIGF0LCBibG9ja1BhdGgpXG4gICAgY29uc3QgaXNCbG9ja0VuZCA9IEVkaXRvci5pc0VuZChlZGl0b3IsIGF0LCBibG9ja1BhdGgpXG4gICAgY29uc3QgaXNCbG9ja0VtcHR5ID0gaXNCbG9ja1N0YXJ0ICYmIGlzQmxvY2tFbmRcbiAgICBjb25zdCBtZXJnZVN0YXJ0ID0gIWlzQmxvY2tTdGFydCB8fCAoaXNCbG9ja1N0YXJ0ICYmIGlzQmxvY2tFbmQpXG4gICAgY29uc3QgbWVyZ2VFbmQgPSAhaXNCbG9ja0VuZFxuICAgIGNvbnN0IFssIGZpcnN0UGF0aF0gPSBOb2RlLmZpcnN0KHsgY2hpbGRyZW46IGZyYWdtZW50IH0sIFtdKVxuICAgIGNvbnN0IFssIGxhc3RQYXRoXSA9IE5vZGUubGFzdCh7IGNoaWxkcmVuOiBmcmFnbWVudCB9LCBbXSlcblxuICAgIGNvbnN0IG1hdGNoZXM6IE5vZGVFbnRyeVtdID0gW11cbiAgICBjb25zdCBtYXRjaGVyID0gKFtuLCBwXTogTm9kZUVudHJ5KSA9PiB7XG4gICAgICBjb25zdCBpc1Jvb3QgPSBwLmxlbmd0aCA9PT0gMFxuICAgICAgaWYgKGlzUm9vdCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQmxvY2tFbXB0eSkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIG1lcmdlU3RhcnQgJiZcbiAgICAgICAgUGF0aC5pc0FuY2VzdG9yKHAsIGZpcnN0UGF0aCkgJiZcbiAgICAgICAgRWxlbWVudC5pc0VsZW1lbnQobikgJiZcbiAgICAgICAgIWVkaXRvci5pc1ZvaWQobikgJiZcbiAgICAgICAgIWVkaXRvci5pc0lubGluZShuKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIG1lcmdlRW5kICYmXG4gICAgICAgIFBhdGguaXNBbmNlc3RvcihwLCBsYXN0UGF0aCkgJiZcbiAgICAgICAgRWxlbWVudC5pc0VsZW1lbnQobikgJiZcbiAgICAgICAgIWVkaXRvci5pc1ZvaWQobikgJiZcbiAgICAgICAgIWVkaXRvci5pc0lubGluZShuKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgTm9kZS5ub2Rlcyh7IGNoaWxkcmVuOiBmcmFnbWVudCB9LCB7IHBhc3M6IG1hdGNoZXIgfSkpIHtcbiAgICAgIGlmIChtYXRjaGVyKGVudHJ5KSkge1xuICAgICAgICBtYXRjaGVzLnB1c2goZW50cnkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRzID0gW11cbiAgICBjb25zdCBtaWRkbGVzID0gW11cbiAgICBjb25zdCBlbmRzID0gW11cbiAgICBsZXQgc3RhcnRpbmcgPSB0cnVlXG4gICAgbGV0IGhhc0Jsb2NrcyA9IGZhbHNlXG5cbiAgICBmb3IgKGNvbnN0IFtub2RlXSBvZiBtYXRjaGVzKSB7XG4gICAgICBpZiAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiYgIWVkaXRvci5pc0lubGluZShub2RlKSkge1xuICAgICAgICBzdGFydGluZyA9IGZhbHNlXG4gICAgICAgIGhhc0Jsb2NrcyA9IHRydWVcbiAgICAgICAgbWlkZGxlcy5wdXNoKG5vZGUpXG4gICAgICB9IGVsc2UgaWYgKHN0YXJ0aW5nKSB7XG4gICAgICAgIHN0YXJ0cy5wdXNoKG5vZGUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbmRzLnB1c2gobm9kZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBbaW5saW5lTWF0Y2hdID0gRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgICAgYXQsXG4gICAgICBtYXRjaDogbiA9PiBUZXh0LmlzVGV4dChuKSB8fCBFZGl0b3IuaXNJbmxpbmUoZWRpdG9yLCBuKSxcbiAgICAgIG1vZGU6ICdoaWdoZXN0JyxcbiAgICAgIHZvaWRzLFxuICAgIH0pIVxuXG4gICAgY29uc3QgWywgaW5saW5lUGF0aF0gPSBpbmxpbmVNYXRjaFxuICAgIGNvbnN0IGlzSW5saW5lU3RhcnQgPSBFZGl0b3IuaXNTdGFydChlZGl0b3IsIGF0LCBpbmxpbmVQYXRoKVxuICAgIGNvbnN0IGlzSW5saW5lRW5kID0gRWRpdG9yLmlzRW5kKGVkaXRvciwgYXQsIGlubGluZVBhdGgpXG5cbiAgICBjb25zdCBtaWRkbGVSZWYgPSBFZGl0b3IucGF0aFJlZihcbiAgICAgIGVkaXRvcixcbiAgICAgIGlzQmxvY2tFbmQgJiYgIWVuZHMubGVuZ3RoID8gUGF0aC5uZXh0KGJsb2NrUGF0aCkgOiBibG9ja1BhdGhcbiAgICApXG5cbiAgICBjb25zdCBlbmRSZWYgPSBFZGl0b3IucGF0aFJlZihcbiAgICAgIGVkaXRvcixcbiAgICAgIGlzSW5saW5lRW5kID8gUGF0aC5uZXh0KGlubGluZVBhdGgpIDogaW5saW5lUGF0aFxuICAgIClcblxuICAgIFRyYW5zZm9ybXMuc3BsaXROb2RlcyhlZGl0b3IsIHtcbiAgICAgIGF0LFxuICAgICAgbWF0Y2g6IG4gPT5cbiAgICAgICAgaGFzQmxvY2tzXG4gICAgICAgICAgPyBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgICAgICAgOiBUZXh0LmlzVGV4dChuKSB8fCBFZGl0b3IuaXNJbmxpbmUoZWRpdG9yLCBuKSxcbiAgICAgIG1vZGU6IGhhc0Jsb2NrcyA/ICdsb3dlc3QnIDogJ2hpZ2hlc3QnLFxuICAgICAgYWx3YXlzOlxuICAgICAgICBoYXNCbG9ja3MgJiZcbiAgICAgICAgKCFpc0Jsb2NrU3RhcnQgfHwgc3RhcnRzLmxlbmd0aCA+IDApICYmXG4gICAgICAgICghaXNCbG9ja0VuZCB8fCBlbmRzLmxlbmd0aCA+IDApLFxuICAgICAgdm9pZHMsXG4gICAgfSlcblxuICAgIGNvbnN0IHN0YXJ0UmVmID0gRWRpdG9yLnBhdGhSZWYoXG4gICAgICBlZGl0b3IsXG4gICAgICAhaXNJbmxpbmVTdGFydCB8fCAoaXNJbmxpbmVTdGFydCAmJiBpc0lubGluZUVuZClcbiAgICAgICAgPyBQYXRoLm5leHQoaW5saW5lUGF0aClcbiAgICAgICAgOiBpbmxpbmVQYXRoXG4gICAgKVxuXG4gICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIHN0YXJ0cywge1xuICAgICAgYXQ6IHN0YXJ0UmVmLmN1cnJlbnQhLFxuICAgICAgbWF0Y2g6IG4gPT4gVGV4dC5pc1RleHQobikgfHwgRWRpdG9yLmlzSW5saW5lKGVkaXRvciwgbiksXG4gICAgICBtb2RlOiAnaGlnaGVzdCcsXG4gICAgICB2b2lkcyxcbiAgICB9KVxuXG4gICAgaWYgKGlzQmxvY2tFbXB0eSAmJiAhc3RhcnRzLmxlbmd0aCAmJiBtaWRkbGVzLmxlbmd0aCAmJiAhZW5kcy5sZW5ndGgpIHtcbiAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwgeyBhdDogYmxvY2tQYXRoLCB2b2lkcyB9KVxuICAgIH1cblxuICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBtaWRkbGVzLCB7XG4gICAgICBhdDogbWlkZGxlUmVmLmN1cnJlbnQhLFxuICAgICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKSxcbiAgICAgIG1vZGU6ICdsb3dlc3QnLFxuICAgICAgdm9pZHMsXG4gICAgfSlcblxuICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBlbmRzLCB7XG4gICAgICBhdDogZW5kUmVmLmN1cnJlbnQhLFxuICAgICAgbWF0Y2g6IG4gPT4gVGV4dC5pc1RleHQobikgfHwgRWRpdG9yLmlzSW5saW5lKGVkaXRvciwgbiksXG4gICAgICBtb2RlOiAnaGlnaGVzdCcsXG4gICAgICB2b2lkcyxcbiAgICB9KVxuXG4gICAgaWYgKCFvcHRpb25zLmF0KSB7XG4gICAgICBsZXQgcGF0aFxuXG4gICAgICBpZiAoZW5kcy5sZW5ndGggPiAwICYmIGVuZFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHBhdGggPSBQYXRoLnByZXZpb3VzKGVuZFJlZi5jdXJyZW50KVxuICAgICAgfSBlbHNlIGlmIChtaWRkbGVzLmxlbmd0aCA+IDAgJiYgbWlkZGxlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcGF0aCA9IFBhdGgucHJldmlvdXMobWlkZGxlUmVmLmN1cnJlbnQpXG4gICAgICB9IGVsc2UgaWYgKHN0YXJ0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcGF0aCA9IFBhdGgucHJldmlvdXMoc3RhcnRSZWYuY3VycmVudClcbiAgICAgIH1cblxuICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgY29uc3QgZW5kID0gRWRpdG9yLmVuZChlZGl0b3IsIHBhdGgpXG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgZW5kKVxuICAgICAgfVxuICAgIH1cblxuICAgIHN0YXJ0UmVmLnVucmVmKClcbiAgICBtaWRkbGVSZWYudW5yZWYoKVxuICAgIGVuZFJlZi51bnJlZigpXG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgU2VsZWN0aW9uVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9zZWxlY3Rpb24nXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuXG5leHBvcnQgY29uc3QgY29sbGFwc2U6IFNlbGVjdGlvblRyYW5zZm9ybXNbJ2NvbGxhcHNlJ10gPSAoXG4gIGVkaXRvcixcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgY29uc3QgeyBlZGdlID0gJ2FuY2hvcicgfSA9IG9wdGlvbnNcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuXG4gIGlmICghc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuXG4gIH0gZWxzZSBpZiAoZWRnZSA9PT0gJ2FuY2hvcicpIHtcbiAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHNlbGVjdGlvbi5hbmNob3IpXG4gIH0gZWxzZSBpZiAoZWRnZSA9PT0gJ2ZvY3VzJykge1xuICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgc2VsZWN0aW9uLmZvY3VzKVxuICB9IGVsc2UgaWYgKGVkZ2UgPT09ICdzdGFydCcpIHtcbiAgICBjb25zdCBbc3RhcnRdID0gUmFuZ2UuZWRnZXMoc2VsZWN0aW9uKVxuICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgc3RhcnQpXG4gIH0gZWxzZSBpZiAoZWRnZSA9PT0gJ2VuZCcpIHtcbiAgICBjb25zdCBbLCBlbmRdID0gUmFuZ2UuZWRnZXMoc2VsZWN0aW9uKVxuICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgZW5kKVxuICB9XG59XG4iLCAiaW1wb3J0IHsgU2VsZWN0aW9uVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9zZWxlY3Rpb24nXG5cbmV4cG9ydCBjb25zdCBkZXNlbGVjdDogU2VsZWN0aW9uVHJhbnNmb3Jtc1snZGVzZWxlY3QnXSA9IGVkaXRvciA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcblxuICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgZWRpdG9yLmFwcGx5KHtcbiAgICAgIHR5cGU6ICdzZXRfc2VsZWN0aW9uJyxcbiAgICAgIHByb3BlcnRpZXM6IHNlbGVjdGlvbixcbiAgICAgIG5ld1Byb3BlcnRpZXM6IG51bGwsXG4gICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7IFNlbGVjdGlvblRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvc2VsZWN0aW9uJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuXG5leHBvcnQgY29uc3QgbW92ZTogU2VsZWN0aW9uVHJhbnNmb3Jtc1snbW92ZSddID0gKGVkaXRvciwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgY29uc3QgeyBkaXN0YW5jZSA9IDEsIHVuaXQgPSAnY2hhcmFjdGVyJywgcmV2ZXJzZSA9IGZhbHNlIH0gPSBvcHRpb25zXG4gIGxldCB7IGVkZ2UgPSBudWxsIH0gPSBvcHRpb25zXG5cbiAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGlmIChlZGdlID09PSAnc3RhcnQnKSB7XG4gICAgZWRnZSA9IFJhbmdlLmlzQmFja3dhcmQoc2VsZWN0aW9uKSA/ICdmb2N1cycgOiAnYW5jaG9yJ1xuICB9XG5cbiAgaWYgKGVkZ2UgPT09ICdlbmQnKSB7XG4gICAgZWRnZSA9IFJhbmdlLmlzQmFja3dhcmQoc2VsZWN0aW9uKSA/ICdhbmNob3InIDogJ2ZvY3VzJ1xuICB9XG5cbiAgY29uc3QgeyBhbmNob3IsIGZvY3VzIH0gPSBzZWxlY3Rpb25cbiAgY29uc3Qgb3B0cyA9IHsgZGlzdGFuY2UsIHVuaXQsIGlnbm9yZU5vblNlbGVjdGFibGU6IHRydWUgfVxuICBjb25zdCBwcm9wczogUGFydGlhbDxSYW5nZT4gPSB7fVxuXG4gIGlmIChlZGdlID09IG51bGwgfHwgZWRnZSA9PT0gJ2FuY2hvcicpIHtcbiAgICBjb25zdCBwb2ludCA9IHJldmVyc2VcbiAgICAgID8gRWRpdG9yLmJlZm9yZShlZGl0b3IsIGFuY2hvciwgb3B0cylcbiAgICAgIDogRWRpdG9yLmFmdGVyKGVkaXRvciwgYW5jaG9yLCBvcHRzKVxuXG4gICAgaWYgKHBvaW50KSB7XG4gICAgICBwcm9wcy5hbmNob3IgPSBwb2ludFxuICAgIH1cbiAgfVxuXG4gIGlmIChlZGdlID09IG51bGwgfHwgZWRnZSA9PT0gJ2ZvY3VzJykge1xuICAgIGNvbnN0IHBvaW50ID0gcmV2ZXJzZVxuICAgICAgPyBFZGl0b3IuYmVmb3JlKGVkaXRvciwgZm9jdXMsIG9wdHMpXG4gICAgICA6IEVkaXRvci5hZnRlcihlZGl0b3IsIGZvY3VzLCBvcHRzKVxuXG4gICAgaWYgKHBvaW50KSB7XG4gICAgICBwcm9wcy5mb2N1cyA9IHBvaW50XG4gICAgfVxuICB9XG5cbiAgVHJhbnNmb3Jtcy5zZXRTZWxlY3Rpb24oZWRpdG9yLCBwcm9wcylcbn1cbiIsICJpbXBvcnQgeyBTZWxlY3Rpb25UcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL3NlbGVjdGlvbidcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFNjcnViYmVyIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9zY3J1YmJlcidcblxuZXhwb3J0IGNvbnN0IHNlbGVjdDogU2VsZWN0aW9uVHJhbnNmb3Jtc1snc2VsZWN0J10gPSAoZWRpdG9yLCB0YXJnZXQpID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICB0YXJnZXQgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCB0YXJnZXQpXG5cbiAgaWYgKHNlbGVjdGlvbikge1xuICAgIFRyYW5zZm9ybXMuc2V0U2VsZWN0aW9uKGVkaXRvciwgdGFyZ2V0KVxuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKCFSYW5nZS5pc1JhbmdlKHRhcmdldCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgV2hlbiBzZXR0aW5nIHRoZSBzZWxlY3Rpb24gYW5kIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBpcyBcXGBudWxsXFxgIHlvdSBtdXN0IHByb3ZpZGUgYXQgbGVhc3QgYW4gXFxgYW5jaG9yXFxgIGFuZCBcXGBmb2N1c1xcYCwgYnV0IHlvdSBwYXNzZWQ6ICR7U2NydWJiZXIuc3RyaW5naWZ5KFxuICAgICAgICB0YXJnZXRcbiAgICAgICl9YFxuICAgIClcbiAgfVxuXG4gIGVkaXRvci5hcHBseSh7XG4gICAgdHlwZTogJ3NldF9zZWxlY3Rpb24nLFxuICAgIHByb3BlcnRpZXM6IHNlbGVjdGlvbixcbiAgICBuZXdQcm9wZXJ0aWVzOiB0YXJnZXQsXG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgU2VsZWN0aW9uVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9zZWxlY3Rpb24nXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuXG5leHBvcnQgY29uc3Qgc2V0UG9pbnQ6IFNlbGVjdGlvblRyYW5zZm9ybXNbJ3NldFBvaW50J10gPSAoXG4gIGVkaXRvcixcbiAgcHJvcHMsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgbGV0IHsgZWRnZSA9ICdib3RoJyB9ID0gb3B0aW9uc1xuXG4gIGlmICghc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAoZWRnZSA9PT0gJ3N0YXJ0Jykge1xuICAgIGVkZ2UgPSBSYW5nZS5pc0JhY2t3YXJkKHNlbGVjdGlvbikgPyAnZm9jdXMnIDogJ2FuY2hvcidcbiAgfVxuXG4gIGlmIChlZGdlID09PSAnZW5kJykge1xuICAgIGVkZ2UgPSBSYW5nZS5pc0JhY2t3YXJkKHNlbGVjdGlvbikgPyAnYW5jaG9yJyA6ICdmb2N1cydcbiAgfVxuXG4gIGNvbnN0IHsgYW5jaG9yLCBmb2N1cyB9ID0gc2VsZWN0aW9uXG4gIGNvbnN0IHBvaW50ID0gZWRnZSA9PT0gJ2FuY2hvcicgPyBhbmNob3IgOiBmb2N1c1xuXG4gIFRyYW5zZm9ybXMuc2V0U2VsZWN0aW9uKGVkaXRvciwge1xuICAgIFtlZGdlID09PSAnYW5jaG9yJyA/ICdhbmNob3InIDogJ2ZvY3VzJ106IHsgLi4ucG9pbnQsIC4uLnByb3BzIH0sXG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgU2VsZWN0aW9uVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9zZWxlY3Rpb24nXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcG9pbnQnXG5cbmV4cG9ydCBjb25zdCBzZXRTZWxlY3Rpb246IFNlbGVjdGlvblRyYW5zZm9ybXNbJ3NldFNlbGVjdGlvbiddID0gKFxuICBlZGl0b3IsXG4gIHByb3BzXG4pID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICBjb25zdCBvbGRQcm9wczogUGFydGlhbDxSYW5nZT4gfCBudWxsID0ge31cbiAgY29uc3QgbmV3UHJvcHM6IFBhcnRpYWw8UmFuZ2U+ID0ge31cblxuICBpZiAoIXNlbGVjdGlvbikge1xuICAgIHJldHVyblxuICB9XG5cbiAgZm9yIChjb25zdCBrIGluIHByb3BzKSB7XG4gICAgaWYgKFxuICAgICAgKGsgPT09ICdhbmNob3InICYmXG4gICAgICAgIHByb3BzLmFuY2hvciAhPSBudWxsICYmXG4gICAgICAgICFQb2ludC5lcXVhbHMocHJvcHMuYW5jaG9yLCBzZWxlY3Rpb24uYW5jaG9yKSkgfHxcbiAgICAgIChrID09PSAnZm9jdXMnICYmXG4gICAgICAgIHByb3BzLmZvY3VzICE9IG51bGwgJiZcbiAgICAgICAgIVBvaW50LmVxdWFscyhwcm9wcy5mb2N1cywgc2VsZWN0aW9uLmZvY3VzKSkgfHxcbiAgICAgIChrICE9PSAnYW5jaG9yJyAmJlxuICAgICAgICBrICE9PSAnZm9jdXMnICYmXG4gICAgICAgIHByb3BzWzxrZXlvZiBSYW5nZT5rXSAhPT0gc2VsZWN0aW9uWzxrZXlvZiBSYW5nZT5rXSlcbiAgICApIHtcbiAgICAgIG9sZFByb3BzWzxrZXlvZiBSYW5nZT5rXSA9IHNlbGVjdGlvbls8a2V5b2YgUmFuZ2U+a11cbiAgICAgIG5ld1Byb3BzWzxrZXlvZiBSYW5nZT5rXSA9IHByb3BzWzxrZXlvZiBSYW5nZT5rXVxuICAgIH1cbiAgfVxuXG4gIGlmIChPYmplY3Qua2V5cyhvbGRQcm9wcykubGVuZ3RoID4gMCkge1xuICAgIGVkaXRvci5hcHBseSh7XG4gICAgICB0eXBlOiAnc2V0X3NlbGVjdGlvbicsXG4gICAgICBwcm9wZXJ0aWVzOiBvbGRQcm9wcyxcbiAgICAgIG5ld1Byb3BlcnRpZXM6IG5ld1Byb3BzLFxuICAgIH0pXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBOb2RlVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wb2ludCdcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IGdldERlZmF1bHRJbnNlcnRMb2NhdGlvbiB9IGZyb20gJy4uL3V0aWxzJ1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0Tm9kZXM6IE5vZGVUcmFuc2Zvcm1zWydpbnNlcnROb2RlcyddID0gKFxuICBlZGl0b3IsXG4gIG5vZGVzLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IHsgaGFuZ2luZyA9IGZhbHNlLCB2b2lkcyA9IGZhbHNlLCBtb2RlID0gJ2xvd2VzdCcgfSA9IG9wdGlvbnNcbiAgICBsZXQgeyBhdCwgbWF0Y2gsIHNlbGVjdCB9ID0gb3B0aW9uc1xuXG4gICAgaWYgKE5vZGUuaXNOb2RlKG5vZGVzKSkge1xuICAgICAgbm9kZXMgPSBbbm9kZXNdXG4gICAgfVxuXG4gICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgW25vZGVdID0gbm9kZXNcblxuICAgIGlmICghYXQpIHtcbiAgICAgIGF0ID0gZ2V0RGVmYXVsdEluc2VydExvY2F0aW9uKGVkaXRvcilcbiAgICAgIGlmIChzZWxlY3QgIT09IGZhbHNlKSB7XG4gICAgICAgIHNlbGVjdCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2VsZWN0ID09IG51bGwpIHtcbiAgICAgIHNlbGVjdCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICBpZiAoIWhhbmdpbmcpIHtcbiAgICAgICAgYXQgPSBFZGl0b3IudW5oYW5nUmFuZ2UoZWRpdG9yLCBhdCwgeyB2b2lkcyB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoUmFuZ2UuaXNDb2xsYXBzZWQoYXQpKSB7XG4gICAgICAgIGF0ID0gYXQuYW5jaG9yXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBbLCBlbmRdID0gUmFuZ2UuZWRnZXMoYXQpXG4gICAgICAgIGNvbnN0IHBvaW50UmVmID0gRWRpdG9yLnBvaW50UmVmKGVkaXRvciwgZW5kKVxuICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHsgYXQgfSlcbiAgICAgICAgYXQgPSBwb2ludFJlZi51bnJlZigpIVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChQb2ludC5pc1BvaW50KGF0KSkge1xuICAgICAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICAgICAgaWYgKFRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICAgICAgbWF0Y2ggPSBuID0+IFRleHQuaXNUZXh0KG4pXG4gICAgICAgIH0gZWxzZSBpZiAoZWRpdG9yLmlzSW5saW5lKG5vZGUpKSB7XG4gICAgICAgICAgbWF0Y2ggPSBuID0+IFRleHQuaXNUZXh0KG4pIHx8IEVkaXRvci5pc0lubGluZShlZGl0b3IsIG4pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWF0Y2ggPSBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBbZW50cnldID0gRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdDogYXQucGF0aCxcbiAgICAgICAgbWF0Y2gsXG4gICAgICAgIG1vZGUsXG4gICAgICAgIHZvaWRzLFxuICAgICAgfSlcblxuICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgIGNvbnN0IFssIG1hdGNoUGF0aF0gPSBlbnRyeVxuICAgICAgICBjb25zdCBwYXRoUmVmID0gRWRpdG9yLnBhdGhSZWYoZWRpdG9yLCBtYXRjaFBhdGgpXG4gICAgICAgIGNvbnN0IGlzQXRFbmQgPSBFZGl0b3IuaXNFbmQoZWRpdG9yLCBhdCwgbWF0Y2hQYXRoKVxuICAgICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7IGF0LCBtYXRjaCwgbW9kZSwgdm9pZHMgfSlcbiAgICAgICAgY29uc3QgcGF0aCA9IHBhdGhSZWYudW5yZWYoKSFcbiAgICAgICAgYXQgPSBpc0F0RW5kID8gUGF0aC5uZXh0KHBhdGgpIDogcGF0aFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcGFyZW50UGF0aCA9IFBhdGgucGFyZW50KGF0KVxuICAgIGxldCBpbmRleCA9IGF0W2F0Lmxlbmd0aCAtIDFdXG5cbiAgICBpZiAoIXZvaWRzICYmIEVkaXRvci52b2lkKGVkaXRvciwgeyBhdDogcGFyZW50UGF0aCB9KSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBub2RlIG9mIG5vZGVzKSB7XG4gICAgICBjb25zdCBwYXRoID0gcGFyZW50UGF0aC5jb25jYXQoaW5kZXgpXG4gICAgICBpbmRleCsrXG4gICAgICBlZGl0b3IuYXBwbHkoeyB0eXBlOiAnaW5zZXJ0X25vZGUnLCBwYXRoLCBub2RlIH0pXG4gICAgICBhdCA9IFBhdGgubmV4dChhdClcbiAgICB9XG4gICAgYXQgPSBQYXRoLnByZXZpb3VzKGF0KVxuXG4gICAgaWYgKHNlbGVjdCkge1xuICAgICAgY29uc3QgcG9pbnQgPSBFZGl0b3IuZW5kKGVkaXRvciwgYXQpXG5cbiAgICAgIGlmIChwb2ludCkge1xuICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHBvaW50KVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBOb2RlVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgbWF0Y2hQYXRoIH0gZnJvbSAnLi4vdXRpbHMvbWF0Y2gtcGF0aCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBBbmNlc3RvciwgTm9kZUVudHJ5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcblxuZXhwb3J0IGNvbnN0IGxpZnROb2RlczogTm9kZVRyYW5zZm9ybXNbJ2xpZnROb2RlcyddID0gKFxuICBlZGl0b3IsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3QgeyBhdCA9IGVkaXRvci5zZWxlY3Rpb24sIG1vZGUgPSAnbG93ZXN0Jywgdm9pZHMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuICAgIGxldCB7IG1hdGNoIH0gPSBvcHRpb25zXG5cbiAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgICAgbWF0Y2ggPSBQYXRoLmlzUGF0aChhdClcbiAgICAgICAgPyBtYXRjaFBhdGgoZWRpdG9yLCBhdClcbiAgICAgICAgOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICB9XG5cbiAgICBpZiAoIWF0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBtYXRjaGVzID0gRWRpdG9yLm5vZGVzKGVkaXRvciwgeyBhdCwgbWF0Y2gsIG1vZGUsIHZvaWRzIH0pXG4gICAgY29uc3QgcGF0aFJlZnMgPSBBcnJheS5mcm9tKG1hdGNoZXMsIChbLCBwXSkgPT4gRWRpdG9yLnBhdGhSZWYoZWRpdG9yLCBwKSlcblxuICAgIGZvciAoY29uc3QgcGF0aFJlZiBvZiBwYXRoUmVmcykge1xuICAgICAgY29uc3QgcGF0aCA9IHBhdGhSZWYudW5yZWYoKSFcblxuICAgICAgaWYgKHBhdGgubGVuZ3RoIDwgMikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYENhbm5vdCBsaWZ0IG5vZGUgYXQgYSBwYXRoIFske3BhdGh9XSBiZWNhdXNlIGl0IGhhcyBhIGRlcHRoIG9mIGxlc3MgdGhhbiBcXGAyXFxgLmBcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwYXJlbnROb2RlRW50cnkgPSBFZGl0b3Iubm9kZShlZGl0b3IsIFBhdGgucGFyZW50KHBhdGgpKVxuICAgICAgY29uc3QgW3BhcmVudCwgcGFyZW50UGF0aF0gPSBwYXJlbnROb2RlRW50cnkgYXMgTm9kZUVudHJ5PEFuY2VzdG9yPlxuICAgICAgY29uc3QgaW5kZXggPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cbiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBwYXJlbnQuY2hpbGRyZW5cblxuICAgICAgaWYgKGxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB0b1BhdGggPSBQYXRoLm5leHQocGFyZW50UGF0aClcbiAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7IGF0OiBwYXRoLCB0bzogdG9QYXRoLCB2b2lkcyB9KVxuICAgICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwgeyBhdDogcGFyZW50UGF0aCwgdm9pZHMgfSlcbiAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7IGF0OiBwYXRoLCB0bzogcGFyZW50UGF0aCwgdm9pZHMgfSlcbiAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IGxlbmd0aCAtIDEpIHtcbiAgICAgICAgY29uc3QgdG9QYXRoID0gUGF0aC5uZXh0KHBhcmVudFBhdGgpXG4gICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwgeyBhdDogcGF0aCwgdG86IHRvUGF0aCwgdm9pZHMgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNwbGl0UGF0aCA9IFBhdGgubmV4dChwYXRoKVxuICAgICAgICBjb25zdCB0b1BhdGggPSBQYXRoLm5leHQocGFyZW50UGF0aClcbiAgICAgICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGVkaXRvciwgeyBhdDogc3BsaXRQYXRoLCB2b2lkcyB9KVxuICAgICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHsgYXQ6IHBhdGgsIHRvOiB0b1BhdGgsIHZvaWRzIH0pXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwgImltcG9ydCB7IE5vZGVUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RleHQnXG5pbXBvcnQgeyBTY3J1YmJlciB9IGZyb20gJy4uL2ludGVyZmFjZXMvc2NydWJiZXInXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub2RlJ1xuXG5jb25zdCBoYXNTaW5nbGVDaGlsZE5lc3QgPSAoZWRpdG9yOiBFZGl0b3IsIG5vZGU6IE5vZGUpOiBib29sZWFuID0+IHtcbiAgaWYgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IG5vZGUgYXMgRWxlbWVudFxuICAgIGlmIChFZGl0b3IuaXNWb2lkKGVkaXRvciwgbm9kZSkpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBlbHNlIGlmIChlbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIGhhc1NpbmdsZUNoaWxkTmVzdChlZGl0b3IsIGVsZW1lbnQuY2hpbGRyZW5bMF0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSBlbHNlIGlmIChFZGl0b3IuaXNFZGl0b3Iobm9kZSkpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBtZXJnZU5vZGVzOiBOb2RlVHJhbnNmb3Jtc1snbWVyZ2VOb2RlcyddID0gKFxuICBlZGl0b3IsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgbGV0IHsgbWF0Y2gsIGF0ID0gZWRpdG9yLnNlbGVjdGlvbiB9ID0gb3B0aW9uc1xuICAgIGNvbnN0IHsgaGFuZ2luZyA9IGZhbHNlLCB2b2lkcyA9IGZhbHNlLCBtb2RlID0gJ2xvd2VzdCcgfSA9IG9wdGlvbnNcblxuICAgIGlmICghYXQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICBpZiAoUGF0aC5pc1BhdGgoYXQpKSB7XG4gICAgICAgIGNvbnN0IFtwYXJlbnRdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIGF0KVxuICAgICAgICBtYXRjaCA9IG4gPT4gcGFyZW50LmNoaWxkcmVuLmluY2x1ZGVzKG4pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRjaCA9IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghaGFuZ2luZyAmJiBSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgYXQgPSBFZGl0b3IudW5oYW5nUmFuZ2UoZWRpdG9yLCBhdCwgeyB2b2lkcyB9KVxuICAgIH1cblxuICAgIGlmIChSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgaWYgKFJhbmdlLmlzQ29sbGFwc2VkKGF0KSkge1xuICAgICAgICBhdCA9IGF0LmFuY2hvclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgWywgZW5kXSA9IFJhbmdlLmVkZ2VzKGF0KVxuICAgICAgICBjb25zdCBwb2ludFJlZiA9IEVkaXRvci5wb2ludFJlZihlZGl0b3IsIGVuZClcbiAgICAgICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7IGF0IH0pXG4gICAgICAgIGF0ID0gcG9pbnRSZWYudW5yZWYoKSFcblxuICAgICAgICBpZiAob3B0aW9ucy5hdCA9PSBudWxsKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBhdClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IFtjdXJyZW50XSA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHsgYXQsIG1hdGNoLCB2b2lkcywgbW9kZSB9KVxuICAgIGNvbnN0IHByZXYgPSBFZGl0b3IucHJldmlvdXMoZWRpdG9yLCB7IGF0LCBtYXRjaCwgdm9pZHMsIG1vZGUgfSlcblxuICAgIGlmICghY3VycmVudCB8fCAhcHJldikge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgW25vZGUsIHBhdGhdID0gY3VycmVudFxuICAgIGNvbnN0IFtwcmV2Tm9kZSwgcHJldlBhdGhdID0gcHJldlxuXG4gICAgaWYgKHBhdGgubGVuZ3RoID09PSAwIHx8IHByZXZQYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbmV3UGF0aCA9IFBhdGgubmV4dChwcmV2UGF0aClcbiAgICBjb25zdCBjb21tb25QYXRoID0gUGF0aC5jb21tb24ocGF0aCwgcHJldlBhdGgpXG4gICAgY29uc3QgaXNQcmV2aW91c1NpYmxpbmcgPSBQYXRoLmlzU2libGluZyhwYXRoLCBwcmV2UGF0aClcbiAgICBjb25zdCBsZXZlbHMgPSBBcnJheS5mcm9tKEVkaXRvci5sZXZlbHMoZWRpdG9yLCB7IGF0OiBwYXRoIH0pLCAoW25dKSA9PiBuKVxuICAgICAgLnNsaWNlKGNvbW1vblBhdGgubGVuZ3RoKVxuICAgICAgLnNsaWNlKDAsIC0xKVxuXG4gICAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBtZXJnZSB3aWxsIGxlYXZlIGFuIGFuY2VzdG9yIG9mIHRoZSBwYXRoIGVtcHR5IGFzIGFcbiAgICAvLyByZXN1bHQsIGluIHdoaWNoIGNhc2Ugd2UnbGwgd2FudCB0byByZW1vdmUgaXQgYWZ0ZXIgbWVyZ2luZy5cbiAgICBjb25zdCBlbXB0eUFuY2VzdG9yID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgYXQ6IHBhdGgsXG4gICAgICBtb2RlOiAnaGlnaGVzdCcsXG4gICAgICBtYXRjaDogbiA9PiBsZXZlbHMuaW5jbHVkZXMobikgJiYgaGFzU2luZ2xlQ2hpbGROZXN0KGVkaXRvciwgbiksXG4gICAgfSlcblxuICAgIGNvbnN0IGVtcHR5UmVmID0gZW1wdHlBbmNlc3RvciAmJiBFZGl0b3IucGF0aFJlZihlZGl0b3IsIGVtcHR5QW5jZXN0b3JbMV0pXG4gICAgbGV0IHByb3BlcnRpZXNcbiAgICBsZXQgcG9zaXRpb25cblxuICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBub2RlcyBhcmUgZXF1aXZhbGVudCwgYW5kIGZpZ3VyZSBvdXQgd2hhdCB0aGUgcG9zaXRpb25cbiAgICAvLyBhbmQgZXh0cmEgcHJvcGVydGllcyBvZiB0aGUgbWVyZ2Ugd2lsbCBiZS5cbiAgICBpZiAoVGV4dC5pc1RleHQobm9kZSkgJiYgVGV4dC5pc1RleHQocHJldk5vZGUpKSB7XG4gICAgICBjb25zdCB7IHRleHQsIC4uLnJlc3QgfSA9IG5vZGVcbiAgICAgIHBvc2l0aW9uID0gcHJldk5vZGUudGV4dC5sZW5ndGhcbiAgICAgIHByb3BlcnRpZXMgPSByZXN0IGFzIFBhcnRpYWw8VGV4dD5cbiAgICB9IGVsc2UgaWYgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmIEVsZW1lbnQuaXNFbGVtZW50KHByZXZOb2RlKSkge1xuICAgICAgY29uc3QgeyBjaGlsZHJlbiwgLi4ucmVzdCB9ID0gbm9kZVxuICAgICAgcG9zaXRpb24gPSBwcmV2Tm9kZS5jaGlsZHJlbi5sZW5ndGhcbiAgICAgIHByb3BlcnRpZXMgPSByZXN0IGFzIFBhcnRpYWw8RWxlbWVudD5cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IG1lcmdlIHRoZSBub2RlIGF0IHBhdGggWyR7cGF0aH1dIHdpdGggdGhlIHByZXZpb3VzIHNpYmxpbmcgYmVjYXVzZSBpdCBpcyBub3QgdGhlIHNhbWUga2luZDogJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgICAgbm9kZVxuICAgICAgICApfSAke1NjcnViYmVyLnN0cmluZ2lmeShwcmV2Tm9kZSl9YFxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIElmIHRoZSBub2RlIGlzbid0IGFscmVhZHkgdGhlIG5leHQgc2libGluZyBvZiB0aGUgcHJldmlvdXMgbm9kZSwgbW92ZVxuICAgIC8vIGl0IHNvIHRoYXQgaXQgaXMgYmVmb3JlIG1lcmdpbmcuXG4gICAgaWYgKCFpc1ByZXZpb3VzU2libGluZykge1xuICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7IGF0OiBwYXRoLCB0bzogbmV3UGF0aCwgdm9pZHMgfSlcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSB3YXMgZ29pbmcgdG8gYmUgYW4gZW1wdHkgYW5jZXN0b3Igb2YgdGhlIG5vZGUgdGhhdCB3YXMgbWVyZ2VkLFxuICAgIC8vIHdlIHJlbW92ZSBpdCBmcm9tIHRoZSB0cmVlLlxuICAgIGlmIChlbXB0eVJlZikge1xuICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHsgYXQ6IGVtcHR5UmVmLmN1cnJlbnQhLCB2b2lkcyB9KVxuICAgIH1cblxuICAgIC8vIElmIHRoZSB0YXJnZXQgbm9kZSB0aGF0IHdlJ3JlIG1lcmdpbmcgd2l0aCBpcyBlbXB0eSwgcmVtb3ZlIGl0IGluc3RlYWRcbiAgICAvLyBvZiBtZXJnaW5nIHRoZSB0d28uIFRoaXMgaXMgYSBjb21tb24gcmljaCB0ZXh0IGVkaXRvciBiZWhhdmlvciB0b1xuICAgIC8vIHByZXZlbnQgbG9zaW5nIGZvcm1hdHRpbmcgd2hlbiBkZWxldGluZyBlbnRpcmUgbm9kZXMgd2hlbiB5b3UgaGF2ZSBhXG4gICAgLy8gaGFuZ2luZyBzZWxlY3Rpb24uXG4gICAgLy8gaWYgcHJldk5vZGUgaXMgZmlyc3QgY2hpbGQgaW4gcGFyZW50LGRvbid0IHJlbW92ZSBpdC5cbiAgICBpZiAoXG4gICAgICAoRWxlbWVudC5pc0VsZW1lbnQocHJldk5vZGUpICYmIEVkaXRvci5pc0VtcHR5KGVkaXRvciwgcHJldk5vZGUpKSB8fFxuICAgICAgKFRleHQuaXNUZXh0KHByZXZOb2RlKSAmJlxuICAgICAgICBwcmV2Tm9kZS50ZXh0ID09PSAnJyAmJlxuICAgICAgICBwcmV2UGF0aFtwcmV2UGF0aC5sZW5ndGggLSAxXSAhPT0gMClcbiAgICApIHtcbiAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7IGF0OiBwcmV2UGF0aCwgdm9pZHMgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZWRpdG9yLmFwcGx5KHtcbiAgICAgICAgdHlwZTogJ21lcmdlX25vZGUnLFxuICAgICAgICBwYXRoOiBuZXdQYXRoLFxuICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgcHJvcGVydGllcyxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGVtcHR5UmVmKSB7XG4gICAgICBlbXB0eVJlZi51bnJlZigpXG4gICAgfVxuICB9KVxufVxuIiwgImltcG9ydCB7IE5vZGVUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zL25vZGUnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VkaXRvcidcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBtYXRjaFBhdGggfSBmcm9tICcuLi91dGlscy9tYXRjaC1wYXRoJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcblxuZXhwb3J0IGNvbnN0IG1vdmVOb2RlczogTm9kZVRyYW5zZm9ybXNbJ21vdmVOb2RlcyddID0gKGVkaXRvciwgb3B0aW9ucykgPT4ge1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHRvLFxuICAgICAgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uLFxuICAgICAgbW9kZSA9ICdsb3dlc3QnLFxuICAgICAgdm9pZHMgPSBmYWxzZSxcbiAgICB9ID0gb3B0aW9uc1xuICAgIGxldCB7IG1hdGNoIH0gPSBvcHRpb25zXG5cbiAgICBpZiAoIWF0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgICAgbWF0Y2ggPSBQYXRoLmlzUGF0aChhdClcbiAgICAgICAgPyBtYXRjaFBhdGgoZWRpdG9yLCBhdClcbiAgICAgICAgOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICB9XG5cbiAgICBjb25zdCB0b1JlZiA9IEVkaXRvci5wYXRoUmVmKGVkaXRvciwgdG8pXG4gICAgY29uc3QgdGFyZ2V0cyA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHsgYXQsIG1hdGNoLCBtb2RlLCB2b2lkcyB9KVxuICAgIGNvbnN0IHBhdGhSZWZzID0gQXJyYXkuZnJvbSh0YXJnZXRzLCAoWywgcF0pID0+IEVkaXRvci5wYXRoUmVmKGVkaXRvciwgcCkpXG5cbiAgICBmb3IgKGNvbnN0IHBhdGhSZWYgb2YgcGF0aFJlZnMpIHtcbiAgICAgIGNvbnN0IHBhdGggPSBwYXRoUmVmLnVucmVmKCkhXG4gICAgICBjb25zdCBuZXdQYXRoID0gdG9SZWYuY3VycmVudCFcblxuICAgICAgaWYgKHBhdGgubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGVkaXRvci5hcHBseSh7IHR5cGU6ICdtb3ZlX25vZGUnLCBwYXRoLCBuZXdQYXRoIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdG9SZWYuY3VycmVudCAmJlxuICAgICAgICBQYXRoLmlzU2libGluZyhuZXdQYXRoLCBwYXRoKSAmJlxuICAgICAgICBQYXRoLmlzQWZ0ZXIobmV3UGF0aCwgcGF0aClcbiAgICAgICkge1xuICAgICAgICAvLyBXaGVuIHBlcmZvcm1pbmcgYSBzaWJsaW5nIG1vdmUgdG8gYSBsYXRlciBpbmRleCwgdGhlIHBhdGggYXQgdGhlIGRlc3RpbmF0aW9uIGlzIHNoaWZ0ZWRcbiAgICAgICAgLy8gdG8gYmVmb3JlIHRoZSBpbnNlcnRpb24gcG9pbnQgaW5zdGVhZCBvZiBhZnRlci4gVG8gZW5zdXJlIG91ciBncm91cCBvZiBub2RlcyBhcmUgaW5zZXJ0ZWRcbiAgICAgICAgLy8gaW4gdGhlIGNvcnJlY3Qgb3JkZXIgd2UgaW5jcmVtZW50IHRvUmVmIHRvIGFjY291bnQgZm9yIHRoYXRcbiAgICAgICAgdG9SZWYuY3VycmVudCA9IFBhdGgubmV4dCh0b1JlZi5jdXJyZW50KVxuICAgICAgfVxuICAgIH1cblxuICAgIHRvUmVmLnVucmVmKClcbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBOb2RlVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgbWF0Y2hQYXRoIH0gZnJvbSAnLi4vdXRpbHMvbWF0Y2gtcGF0aCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5cbmV4cG9ydCBjb25zdCByZW1vdmVOb2RlczogTm9kZVRyYW5zZm9ybXNbJ3JlbW92ZU5vZGVzJ10gPSAoXG4gIGVkaXRvcixcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCB7IGhhbmdpbmcgPSBmYWxzZSwgdm9pZHMgPSBmYWxzZSwgbW9kZSA9ICdsb3dlc3QnIH0gPSBvcHRpb25zXG4gICAgbGV0IHsgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uLCBtYXRjaCB9ID0gb3B0aW9uc1xuXG4gICAgaWYgKCFhdCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICAgIG1hdGNoID0gUGF0aC5pc1BhdGgoYXQpXG4gICAgICAgID8gbWF0Y2hQYXRoKGVkaXRvciwgYXQpXG4gICAgICAgIDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgfVxuXG4gICAgaWYgKCFoYW5naW5nICYmIFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICBhdCA9IEVkaXRvci51bmhhbmdSYW5nZShlZGl0b3IsIGF0LCB7IHZvaWRzIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZGVwdGhzID0gRWRpdG9yLm5vZGVzKGVkaXRvciwgeyBhdCwgbWF0Y2gsIG1vZGUsIHZvaWRzIH0pXG4gICAgY29uc3QgcGF0aFJlZnMgPSBBcnJheS5mcm9tKGRlcHRocywgKFssIHBdKSA9PiBFZGl0b3IucGF0aFJlZihlZGl0b3IsIHApKVxuXG4gICAgZm9yIChjb25zdCBwYXRoUmVmIG9mIHBhdGhSZWZzKSB7XG4gICAgICBjb25zdCBwYXRoID0gcGF0aFJlZi51bnJlZigpIVxuXG4gICAgICBpZiAocGF0aCkge1xuICAgICAgICBjb25zdCBbbm9kZV0gPSBFZGl0b3Iubm9kZShlZGl0b3IsIHBhdGgpXG4gICAgICAgIGVkaXRvci5hcHBseSh7IHR5cGU6ICdyZW1vdmVfbm9kZScsIHBhdGgsIG5vZGUgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgTm9kZVRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGF0aCdcbmltcG9ydCB7IG1hdGNoUGF0aCB9IGZyb20gJy4uL3V0aWxzL21hdGNoLXBhdGgnXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lbGVtZW50J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5cbmV4cG9ydCBjb25zdCBzZXROb2RlczogTm9kZVRyYW5zZm9ybXNbJ3NldE5vZGVzJ10gPSAoXG4gIGVkaXRvcixcbiAgcHJvcHM6IFBhcnRpYWw8Tm9kZT4sXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgbGV0IHsgbWF0Y2gsIGF0ID0gZWRpdG9yLnNlbGVjdGlvbiwgY29tcGFyZSwgbWVyZ2UgfSA9IG9wdGlvbnNcbiAgICBjb25zdCB7XG4gICAgICBoYW5naW5nID0gZmFsc2UsXG4gICAgICBtb2RlID0gJ2xvd2VzdCcsXG4gICAgICBzcGxpdCA9IGZhbHNlLFxuICAgICAgdm9pZHMgPSBmYWxzZSxcbiAgICB9ID0gb3B0aW9uc1xuXG4gICAgaWYgKCFhdCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICAgIG1hdGNoID0gUGF0aC5pc1BhdGgoYXQpXG4gICAgICAgID8gbWF0Y2hQYXRoKGVkaXRvciwgYXQpXG4gICAgICAgIDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgfVxuXG4gICAgaWYgKCFoYW5naW5nICYmIFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICBhdCA9IEVkaXRvci51bmhhbmdSYW5nZShlZGl0b3IsIGF0LCB7IHZvaWRzIH0pXG4gICAgfVxuXG4gICAgaWYgKHNwbGl0ICYmIFJhbmdlLmlzUmFuZ2UoYXQpKSB7XG4gICAgICBpZiAoXG4gICAgICAgIFJhbmdlLmlzQ29sbGFwc2VkKGF0KSAmJlxuICAgICAgICBFZGl0b3IubGVhZihlZGl0b3IsIGF0LmFuY2hvcilbMF0udGV4dC5sZW5ndGggPiAwXG4gICAgICApIHtcbiAgICAgICAgLy8gSWYgdGhlIHJhbmdlIGlzIGNvbGxhcHNlZCBpbiBhIG5vbi1lbXB0eSBub2RlIGFuZCAnc3BsaXQnIGlzIHRydWUsIHRoZXJlJ3Mgbm90aGluZyB0b1xuICAgICAgICAvLyBzZXQgdGhhdCB3b24ndCBnZXQgbm9ybWFsaXplZCBhd2F5XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgcmFuZ2VSZWYgPSBFZGl0b3IucmFuZ2VSZWYoZWRpdG9yLCBhdCwgeyBhZmZpbml0eTogJ2lud2FyZCcgfSlcbiAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKGF0KVxuICAgICAgY29uc3Qgc3BsaXRNb2RlID0gbW9kZSA9PT0gJ2xvd2VzdCcgPyAnbG93ZXN0JyA6ICdoaWdoZXN0J1xuICAgICAgY29uc3QgZW5kQXRFbmRPZk5vZGUgPSBFZGl0b3IuaXNFbmQoZWRpdG9yLCBlbmQsIGVuZC5wYXRoKVxuICAgICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdDogZW5kLFxuICAgICAgICBtYXRjaCxcbiAgICAgICAgbW9kZTogc3BsaXRNb2RlLFxuICAgICAgICB2b2lkcyxcbiAgICAgICAgYWx3YXlzOiAhZW5kQXRFbmRPZk5vZGUsXG4gICAgICB9KVxuICAgICAgY29uc3Qgc3RhcnRBdFN0YXJ0T2ZOb2RlID0gRWRpdG9yLmlzU3RhcnQoZWRpdG9yLCBzdGFydCwgc3RhcnQucGF0aClcbiAgICAgIFRyYW5zZm9ybXMuc3BsaXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IHN0YXJ0LFxuICAgICAgICBtYXRjaCxcbiAgICAgICAgbW9kZTogc3BsaXRNb2RlLFxuICAgICAgICB2b2lkcyxcbiAgICAgICAgYWx3YXlzOiAhc3RhcnRBdFN0YXJ0T2ZOb2RlLFxuICAgICAgfSlcbiAgICAgIGF0ID0gcmFuZ2VSZWYudW5yZWYoKSFcblxuICAgICAgaWYgKG9wdGlvbnMuYXQgPT0gbnVsbCkge1xuICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIGF0KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY29tcGFyZSkge1xuICAgICAgY29tcGFyZSA9IChwcm9wLCBub2RlUHJvcCkgPT4gcHJvcCAhPT0gbm9kZVByb3BcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFtub2RlLCBwYXRoXSBvZiBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdCxcbiAgICAgIG1hdGNoLFxuICAgICAgbW9kZSxcbiAgICAgIHZvaWRzLFxuICAgIH0pKSB7XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzOiBQYXJ0aWFsPE5vZGU+ID0ge31cbiAgICAgIC8vIEZJWE1FOiBpcyB0aGlzIGNvcnJlY3Q/XG4gICAgICBjb25zdCBuZXdQcm9wZXJ0aWVzOiBQYXJ0aWFsPE5vZGU+ICYgeyBba2V5OiBzdHJpbmddOiB1bmtub3duIH0gPSB7fVxuXG4gICAgICAvLyBZb3UgY2FuJ3Qgc2V0IHByb3BlcnRpZXMgb24gdGhlIGVkaXRvciBub2RlLlxuICAgICAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGxldCBoYXNDaGFuZ2VzID0gZmFsc2VcblxuICAgICAgZm9yIChjb25zdCBrIGluIHByb3BzKSB7XG4gICAgICAgIGlmIChrID09PSAnY2hpbGRyZW4nIHx8IGsgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29tcGFyZShwcm9wc1s8a2V5b2YgTm9kZT5rXSwgbm9kZVs8a2V5b2YgTm9kZT5rXSkpIHtcbiAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZVxuICAgICAgICAgIC8vIE9taXQgbmV3IHByb3BlcnRpZXMgZnJvbSB0aGUgb2xkIHByb3BlcnRpZXMgbGlzdFxuICAgICAgICAgIGlmIChub2RlLmhhc093blByb3BlcnR5KGspKVxuICAgICAgICAgICAgcHJvcGVydGllc1s8a2V5b2YgTm9kZT5rXSA9IG5vZGVbPGtleW9mIE5vZGU+a11cbiAgICAgICAgICAvLyBPbWl0IHByb3BlcnRpZXMgdGhhdCBoYXZlIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBuZXcgcHJvcGVydGllcyBsaXN0XG4gICAgICAgICAgaWYgKG1lcmdlKSB7XG4gICAgICAgICAgICBpZiAocHJvcHNbPGtleW9mIE5vZGU+a10gIT0gbnVsbClcbiAgICAgICAgICAgICAgbmV3UHJvcGVydGllc1s8a2V5b2YgTm9kZT5rXSA9IG1lcmdlKFxuICAgICAgICAgICAgICAgIG5vZGVbPGtleW9mIE5vZGU+a10sXG4gICAgICAgICAgICAgICAgcHJvcHNbPGtleW9mIE5vZGU+a11cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAocHJvcHNbPGtleW9mIE5vZGU+a10gIT0gbnVsbClcbiAgICAgICAgICAgICAgbmV3UHJvcGVydGllc1s8a2V5b2YgTm9kZT5rXSA9IHByb3BzWzxrZXlvZiBOb2RlPmtdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChoYXNDaGFuZ2VzKSB7XG4gICAgICAgIGVkaXRvci5hcHBseSh7XG4gICAgICAgICAgdHlwZTogJ3NldF9ub2RlJyxcbiAgICAgICAgICBwYXRoLFxuICAgICAgICAgIHByb3BlcnRpZXMsXG4gICAgICAgICAgbmV3UHJvcGVydGllcyxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCAiaW1wb3J0IHsgTm9kZVRyYW5zZm9ybXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3RyYW5zZm9ybXMvbm9kZSdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWRpdG9yJ1xuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4uL2ludGVyZmFjZXMvZWxlbWVudCdcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9yYW5nZSdcbmltcG9ydCB7IFBhdGggfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BhdGgnXG5pbXBvcnQgeyBQb2ludFJlZiB9IGZyb20gJy4uL2ludGVyZmFjZXMvcG9pbnQtcmVmJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vZGUnXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcG9pbnQnXG5cbi8qKlxuICogQ29udmVydCBhIHJhbmdlIGludG8gYSBwb2ludCBieSBkZWxldGluZyBpdCdzIGNvbnRlbnQuXG4gKi9cbmNvbnN0IGRlbGV0ZVJhbmdlID0gKGVkaXRvcjogRWRpdG9yLCByYW5nZTogUmFuZ2UpOiBQb2ludCB8IG51bGwgPT4ge1xuICBpZiAoUmFuZ2UuaXNDb2xsYXBzZWQocmFuZ2UpKSB7XG4gICAgcmV0dXJuIHJhbmdlLmFuY2hvclxuICB9IGVsc2Uge1xuICAgIGNvbnN0IFssIGVuZF0gPSBSYW5nZS5lZGdlcyhyYW5nZSlcbiAgICBjb25zdCBwb2ludFJlZiA9IEVkaXRvci5wb2ludFJlZihlZGl0b3IsIGVuZClcbiAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHsgYXQ6IHJhbmdlIH0pXG4gICAgcmV0dXJuIHBvaW50UmVmLnVucmVmKClcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgc3BsaXROb2RlczogTm9kZVRyYW5zZm9ybXNbJ3NwbGl0Tm9kZXMnXSA9IChcbiAgZWRpdG9yLFxuICBvcHRpb25zID0ge31cbikgPT4ge1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIGNvbnN0IHsgbW9kZSA9ICdsb3dlc3QnLCB2b2lkcyA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgbGV0IHsgbWF0Y2gsIGF0ID0gZWRpdG9yLnNlbGVjdGlvbiwgaGVpZ2h0ID0gMCwgYWx3YXlzID0gZmFsc2UgfSA9IG9wdGlvbnNcblxuICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICBtYXRjaCA9IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICAgIH1cblxuICAgIGlmIChSYW5nZS5pc1JhbmdlKGF0KSkge1xuICAgICAgYXQgPSBkZWxldGVSYW5nZShlZGl0b3IsIGF0KVxuICAgIH1cblxuICAgIC8vIElmIHRoZSB0YXJnZXQgaXMgYSBwYXRoLCB0aGUgZGVmYXVsdCBoZWlnaHQtc2tpcHBpbmcgYW5kIHBvc2l0aW9uXG4gICAgLy8gY291bnRlcnMgbmVlZCB0byBhY2NvdW50IGZvciB1cyBwb3RlbnRpYWxseSBzcGxpdHRpbmcgYXQgYSBub24tbGVhZi5cbiAgICBpZiAoUGF0aC5pc1BhdGgoYXQpKSB7XG4gICAgICBjb25zdCBwYXRoID0gYXRcbiAgICAgIGNvbnN0IHBvaW50ID0gRWRpdG9yLnBvaW50KGVkaXRvciwgcGF0aClcbiAgICAgIGNvbnN0IFtwYXJlbnRdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIHBhdGgpXG4gICAgICBtYXRjaCA9IG4gPT4gbiA9PT0gcGFyZW50XG4gICAgICBoZWlnaHQgPSBwb2ludC5wYXRoLmxlbmd0aCAtIHBhdGgubGVuZ3RoICsgMVxuICAgICAgYXQgPSBwb2ludFxuICAgICAgYWx3YXlzID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmICghYXQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGJlZm9yZVJlZiA9IEVkaXRvci5wb2ludFJlZihlZGl0b3IsIGF0LCB7XG4gICAgICBhZmZpbml0eTogJ2JhY2t3YXJkJyxcbiAgICB9KVxuICAgIGxldCBhZnRlclJlZjogUG9pbnRSZWYgfCB1bmRlZmluZWRcbiAgICB0cnkge1xuICAgICAgY29uc3QgW2hpZ2hlc3RdID0gRWRpdG9yLm5vZGVzKGVkaXRvciwgeyBhdCwgbWF0Y2gsIG1vZGUsIHZvaWRzIH0pXG5cbiAgICAgIGlmICghaGlnaGVzdCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3Qgdm9pZE1hdGNoID0gRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0LCBtb2RlOiAnaGlnaGVzdCcgfSlcbiAgICAgIGNvbnN0IG51ZGdlID0gMFxuXG4gICAgICBpZiAoIXZvaWRzICYmIHZvaWRNYXRjaCkge1xuICAgICAgICBjb25zdCBbdm9pZE5vZGUsIHZvaWRQYXRoXSA9IHZvaWRNYXRjaFxuXG4gICAgICAgIGlmIChFbGVtZW50LmlzRWxlbWVudCh2b2lkTm9kZSkgJiYgZWRpdG9yLmlzSW5saW5lKHZvaWROb2RlKSkge1xuICAgICAgICAgIGxldCBhZnRlciA9IEVkaXRvci5hZnRlcihlZGl0b3IsIHZvaWRQYXRoKVxuXG4gICAgICAgICAgaWYgKCFhZnRlcikge1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IHsgdGV4dDogJycgfVxuICAgICAgICAgICAgY29uc3QgYWZ0ZXJQYXRoID0gUGF0aC5uZXh0KHZvaWRQYXRoKVxuICAgICAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIHRleHQsIHsgYXQ6IGFmdGVyUGF0aCwgdm9pZHMgfSlcbiAgICAgICAgICAgIGFmdGVyID0gRWRpdG9yLnBvaW50KGVkaXRvciwgYWZ0ZXJQYXRoKSFcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhdCA9IGFmdGVyXG4gICAgICAgICAgYWx3YXlzID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2libGluZ0hlaWdodCA9IGF0LnBhdGgubGVuZ3RoIC0gdm9pZFBhdGgubGVuZ3RoXG4gICAgICAgIGhlaWdodCA9IHNpYmxpbmdIZWlnaHQgKyAxXG4gICAgICAgIGFsd2F5cyA9IHRydWVcbiAgICAgIH1cblxuICAgICAgYWZ0ZXJSZWYgPSBFZGl0b3IucG9pbnRSZWYoZWRpdG9yLCBhdClcbiAgICAgIGNvbnN0IGRlcHRoID0gYXQucGF0aC5sZW5ndGggLSBoZWlnaHRcbiAgICAgIGNvbnN0IFssIGhpZ2hlc3RQYXRoXSA9IGhpZ2hlc3RcbiAgICAgIGNvbnN0IGxvd2VzdFBhdGggPSBhdC5wYXRoLnNsaWNlKDAsIGRlcHRoKVxuICAgICAgbGV0IHBvc2l0aW9uID0gaGVpZ2h0ID09PSAwID8gYXQub2Zmc2V0IDogYXQucGF0aFtkZXB0aF0gKyBudWRnZVxuXG4gICAgICBmb3IgKGNvbnN0IFtub2RlLCBwYXRoXSBvZiBFZGl0b3IubGV2ZWxzKGVkaXRvciwge1xuICAgICAgICBhdDogbG93ZXN0UGF0aCxcbiAgICAgICAgcmV2ZXJzZTogdHJ1ZSxcbiAgICAgICAgdm9pZHMsXG4gICAgICB9KSkge1xuICAgICAgICBsZXQgc3BsaXQgPSBmYWxzZVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBwYXRoLmxlbmd0aCA8IGhpZ2hlc3RQYXRoLmxlbmd0aCB8fFxuICAgICAgICAgIHBhdGgubGVuZ3RoID09PSAwIHx8XG4gICAgICAgICAgKCF2b2lkcyAmJiBFbGVtZW50LmlzRWxlbWVudChub2RlKSAmJiBFZGl0b3IuaXNWb2lkKGVkaXRvciwgbm9kZSkpXG4gICAgICAgICkge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwb2ludCA9IGJlZm9yZVJlZi5jdXJyZW50IVxuICAgICAgICBjb25zdCBpc0VuZCA9IEVkaXRvci5pc0VuZChlZGl0b3IsIHBvaW50LCBwYXRoKVxuXG4gICAgICAgIGlmIChhbHdheXMgfHwgIWJlZm9yZVJlZiB8fCAhRWRpdG9yLmlzRWRnZShlZGl0b3IsIHBvaW50LCBwYXRoKSkge1xuICAgICAgICAgIHNwbGl0ID0gdHJ1ZVxuICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBOb2RlLmV4dHJhY3RQcm9wcyhub2RlKVxuICAgICAgICAgIGVkaXRvci5hcHBseSh7XG4gICAgICAgICAgICB0eXBlOiAnc3BsaXRfbm9kZScsXG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgICBwcm9wZXJ0aWVzLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBwb3NpdGlvbiA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXSArIChzcGxpdCB8fCBpc0VuZCA/IDEgOiAwKVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5hdCA9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHBvaW50ID0gYWZ0ZXJSZWYuY3VycmVudCB8fCBFZGl0b3IuZW5kKGVkaXRvciwgW10pXG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgcG9pbnQpXG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGJlZm9yZVJlZi51bnJlZigpXG4gICAgICBhZnRlclJlZj8udW5yZWYoKVxuICAgIH1cbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBOb2RlVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9ub2RlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcblxuZXhwb3J0IGNvbnN0IHVuc2V0Tm9kZXM6IE5vZGVUcmFuc2Zvcm1zWyd1bnNldE5vZGVzJ10gPSAoXG4gIGVkaXRvcixcbiAgcHJvcHMsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIGlmICghQXJyYXkuaXNBcnJheShwcm9wcykpIHtcbiAgICBwcm9wcyA9IFtwcm9wc11cbiAgfVxuXG4gIGNvbnN0IG9iajogYW55ID0ge31cblxuICBmb3IgKGNvbnN0IGtleSBvZiBwcm9wcykge1xuICAgIG9ialtrZXldID0gbnVsbFxuICB9XG5cbiAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIG9iaiwgb3B0aW9ucylcbn1cbiIsICJpbXBvcnQgeyBOb2RlVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgbWF0Y2hQYXRoIH0gZnJvbSAnLi4vdXRpbHMvbWF0Y2gtcGF0aCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvcmFuZ2UnXG5pbXBvcnQgeyBUcmFuc2Zvcm1zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90cmFuc2Zvcm1zJ1xuXG5leHBvcnQgY29uc3QgdW53cmFwTm9kZXM6IE5vZGVUcmFuc2Zvcm1zWyd1bndyYXBOb2RlcyddID0gKFxuICBlZGl0b3IsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3QgeyBtb2RlID0gJ2xvd2VzdCcsIHNwbGl0ID0gZmFsc2UsIHZvaWRzID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICBsZXQgeyBhdCA9IGVkaXRvci5zZWxlY3Rpb24sIG1hdGNoIH0gPSBvcHRpb25zXG5cbiAgICBpZiAoIWF0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgICAgbWF0Y2ggPSBQYXRoLmlzUGF0aChhdClcbiAgICAgICAgPyBtYXRjaFBhdGgoZWRpdG9yLCBhdClcbiAgICAgICAgOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICB9XG5cbiAgICBpZiAoUGF0aC5pc1BhdGgoYXQpKSB7XG4gICAgICBhdCA9IEVkaXRvci5yYW5nZShlZGl0b3IsIGF0KVxuICAgIH1cblxuICAgIGNvbnN0IHJhbmdlUmVmID0gUmFuZ2UuaXNSYW5nZShhdCkgPyBFZGl0b3IucmFuZ2VSZWYoZWRpdG9yLCBhdCkgOiBudWxsXG4gICAgY29uc3QgbWF0Y2hlcyA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHsgYXQsIG1hdGNoLCBtb2RlLCB2b2lkcyB9KVxuICAgIGNvbnN0IHBhdGhSZWZzID0gQXJyYXkuZnJvbShcbiAgICAgIG1hdGNoZXMsXG4gICAgICAoWywgcF0pID0+IEVkaXRvci5wYXRoUmVmKGVkaXRvciwgcClcbiAgICAgIC8vIHVud3JhcE5vZGUgd2lsbCBjYWxsIGxpZnROb2RlIHdoaWNoIGRvZXMgbm90IHN1cHBvcnQgc3BsaXR0aW5nIHRoZSBub2RlIHdoZW4gbmVzdGVkLlxuICAgICAgLy8gSWYgd2UgZG8gbm90IHJldmVyc2UgdGhlIG9yZGVyIGFuZCBjYWxsIGl0IGZyb20gdG9wIHRvIHRoZSBib3R0b20sIGl0IHdpbGwgcmVtb3ZlIGFsbCBibG9ja3NcbiAgICAgIC8vIHRoYXQgd3JhcCB0YXJnZXQgbm9kZS4gU28gd2UgcmV2ZXJzZSB0aGUgb3JkZXIuXG4gICAgKS5yZXZlcnNlKClcblxuICAgIGZvciAoY29uc3QgcGF0aFJlZiBvZiBwYXRoUmVmcykge1xuICAgICAgY29uc3QgcGF0aCA9IHBhdGhSZWYudW5yZWYoKSFcbiAgICAgIGNvbnN0IFtub2RlXSA9IEVkaXRvci5ub2RlKGVkaXRvciwgcGF0aClcbiAgICAgIGxldCByYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIHBhdGgpXG5cbiAgICAgIGlmIChzcGxpdCAmJiByYW5nZVJlZikge1xuICAgICAgICByYW5nZSA9IFJhbmdlLmludGVyc2VjdGlvbihyYW5nZVJlZi5jdXJyZW50ISwgcmFuZ2UpIVxuICAgICAgfVxuXG4gICAgICBUcmFuc2Zvcm1zLmxpZnROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IHJhbmdlLFxuICAgICAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzQW5jZXN0b3Iobm9kZSkgJiYgbm9kZS5jaGlsZHJlbi5pbmNsdWRlcyhuKSxcbiAgICAgICAgdm9pZHMsXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChyYW5nZVJlZikge1xuICAgICAgcmFuZ2VSZWYudW5yZWYoKVxuICAgIH1cbiAgfSlcbn1cbiIsICJpbXBvcnQgeyBOb2RlVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3Jtcy9ub2RlJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9lZGl0b3InXG5pbXBvcnQgeyBQYXRoIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wYXRoJ1xuaW1wb3J0IHsgbWF0Y2hQYXRoIH0gZnJvbSAnLi4vdXRpbHMvbWF0Y2gtcGF0aCdcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2VsZW1lbnQnXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90ZXh0J1xuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3JhbmdlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdHJhbnNmb3JtcydcblxuZXhwb3J0IGNvbnN0IHdyYXBOb2RlczogTm9kZVRyYW5zZm9ybXNbJ3dyYXBOb2RlcyddID0gKFxuICBlZGl0b3IsXG4gIGVsZW1lbnQsXG4gIG9wdGlvbnMgPSB7fVxuKSA9PiB7XG4gIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgY29uc3QgeyBtb2RlID0gJ2xvd2VzdCcsIHNwbGl0ID0gZmFsc2UsIHZvaWRzID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgICBsZXQgeyBtYXRjaCwgYXQgPSBlZGl0b3Iuc2VsZWN0aW9uIH0gPSBvcHRpb25zXG5cbiAgICBpZiAoIWF0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgICAgaWYgKFBhdGguaXNQYXRoKGF0KSkge1xuICAgICAgICBtYXRjaCA9IG1hdGNoUGF0aChlZGl0b3IsIGF0KVxuICAgICAgfSBlbHNlIGlmIChlZGl0b3IuaXNJbmxpbmUoZWxlbWVudCkpIHtcbiAgICAgICAgbWF0Y2ggPSBuID0+XG4gICAgICAgICAgKEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0lubGluZShlZGl0b3IsIG4pKSB8fCBUZXh0LmlzVGV4dChuKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWF0Y2ggPSBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3BsaXQgJiYgUmFuZ2UuaXNSYW5nZShhdCkpIHtcbiAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKGF0KVxuICAgICAgY29uc3QgcmFuZ2VSZWYgPSBFZGl0b3IucmFuZ2VSZWYoZWRpdG9yLCBhdCwge1xuICAgICAgICBhZmZpbml0eTogJ2lud2FyZCcsXG4gICAgICB9KVxuICAgICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGVkaXRvciwgeyBhdDogZW5kLCBtYXRjaCwgdm9pZHMgfSlcbiAgICAgIFRyYW5zZm9ybXMuc3BsaXROb2RlcyhlZGl0b3IsIHsgYXQ6IHN0YXJ0LCBtYXRjaCwgdm9pZHMgfSlcbiAgICAgIGF0ID0gcmFuZ2VSZWYudW5yZWYoKSFcblxuICAgICAgaWYgKG9wdGlvbnMuYXQgPT0gbnVsbCkge1xuICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIGF0KVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJvb3RzID0gQXJyYXkuZnJvbShcbiAgICAgIEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQsXG4gICAgICAgIG1hdGNoOiBlZGl0b3IuaXNJbmxpbmUoZWxlbWVudClcbiAgICAgICAgICA/IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICAgICAgICAgIDogbiA9PiBFZGl0b3IuaXNFZGl0b3IobiksXG4gICAgICAgIG1vZGU6ICdsb3dlc3QnLFxuICAgICAgICB2b2lkcyxcbiAgICAgIH0pXG4gICAgKVxuXG4gICAgZm9yIChjb25zdCBbLCByb290UGF0aF0gb2Ygcm9vdHMpIHtcbiAgICAgIGNvbnN0IGEgPSBSYW5nZS5pc1JhbmdlKGF0KVxuICAgICAgICA/IFJhbmdlLmludGVyc2VjdGlvbihhdCwgRWRpdG9yLnJhbmdlKGVkaXRvciwgcm9vdFBhdGgpKVxuICAgICAgICA6IGF0XG5cbiAgICAgIGlmICghYSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBjb25zdCBtYXRjaGVzID0gQXJyYXkuZnJvbShcbiAgICAgICAgRWRpdG9yLm5vZGVzKGVkaXRvciwgeyBhdDogYSwgbWF0Y2gsIG1vZGUsIHZvaWRzIH0pXG4gICAgICApXG5cbiAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgW2ZpcnN0XSA9IG1hdGNoZXNcbiAgICAgICAgY29uc3QgbGFzdCA9IG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGggLSAxXVxuICAgICAgICBjb25zdCBbLCBmaXJzdFBhdGhdID0gZmlyc3RcbiAgICAgICAgY29uc3QgWywgbGFzdFBhdGhdID0gbGFzdFxuXG4gICAgICAgIGlmIChmaXJzdFBhdGgubGVuZ3RoID09PSAwICYmIGxhc3RQYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgcGFyZW50IC0gdXN1YWxseSBtZWFucyB0aGUgbm9kZSBpcyBhbiBlZGl0b3IgLSBkb24ndCBkbyBhbnl0aGluZ1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb21tb25QYXRoID0gUGF0aC5lcXVhbHMoZmlyc3RQYXRoLCBsYXN0UGF0aClcbiAgICAgICAgICA/IFBhdGgucGFyZW50KGZpcnN0UGF0aClcbiAgICAgICAgICA6IFBhdGguY29tbW9uKGZpcnN0UGF0aCwgbGFzdFBhdGgpXG5cbiAgICAgICAgY29uc3QgcmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBmaXJzdFBhdGgsIGxhc3RQYXRoKVxuICAgICAgICBjb25zdCBjb21tb25Ob2RlRW50cnkgPSBFZGl0b3Iubm9kZShlZGl0b3IsIGNvbW1vblBhdGgpXG4gICAgICAgIGNvbnN0IFtjb21tb25Ob2RlXSA9IGNvbW1vbk5vZGVFbnRyeVxuICAgICAgICBjb25zdCBkZXB0aCA9IGNvbW1vblBhdGgubGVuZ3RoICsgMVxuICAgICAgICBjb25zdCB3cmFwcGVyUGF0aCA9IFBhdGgubmV4dChsYXN0UGF0aC5zbGljZSgwLCBkZXB0aCkpXG4gICAgICAgIGNvbnN0IHdyYXBwZXIgPSB7IC4uLmVsZW1lbnQsIGNoaWxkcmVuOiBbXSB9XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCB3cmFwcGVyLCB7IGF0OiB3cmFwcGVyUGF0aCwgdm9pZHMgfSlcblxuICAgICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICBhdDogcmFuZ2UsXG4gICAgICAgICAgbWF0Y2g6IG4gPT5cbiAgICAgICAgICAgIEVsZW1lbnQuaXNBbmNlc3Rvcihjb21tb25Ob2RlKSAmJiBjb21tb25Ob2RlLmNoaWxkcmVuLmluY2x1ZGVzKG4pLFxuICAgICAgICAgIHRvOiB3cmFwcGVyUGF0aC5jb25jYXQoMCksXG4gICAgICAgICAgdm9pZHMsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwgImltcG9ydCB7XG4gIGFkZE1hcmssXG4gIGRlbGV0ZUZyYWdtZW50LFxuICBFZGl0b3IsXG4gIGdldERpcnR5UGF0aHMsXG4gIGdldEZyYWdtZW50LFxuICBpbnNlcnRCcmVhayxcbiAgaW5zZXJ0RnJhZ21lbnQsXG4gIGluc2VydE5vZGUsXG4gIGluc2VydFNvZnRCcmVhayxcbiAgaW5zZXJ0VGV4dCxcbiAgbm9ybWFsaXplTm9kZSxcbiAgcmVtb3ZlTWFyayxcbiAgc2hvdWxkTm9ybWFsaXplLFxufSBmcm9tICcuLydcbmltcG9ydCB7IGFwcGx5IH0gZnJvbSAnLi9jb3JlJ1xuaW1wb3J0IHtcbiAgYWJvdmUsXG4gIGFmdGVyLFxuICBiZWZvcmUsXG4gIGRlbGV0ZUJhY2t3YXJkLFxuICBkZWxldGVGb3J3YXJkLFxuICBlZGdlcyxcbiAgZWxlbWVudFJlYWRPbmx5LFxuICBlbmQsXG4gIGZpcnN0LFxuICBmcmFnbWVudCxcbiAgZ2V0Vm9pZCxcbiAgaGFzQmxvY2tzLFxuICBoYXNJbmxpbmVzLFxuICBoYXNQYXRoLFxuICBoYXNUZXh0cyxcbiAgaXNCbG9jayxcbiAgaXNFZGdlLFxuICBpc0VtcHR5LFxuICBpc0VuZCxcbiAgaXNOb3JtYWxpemluZyxcbiAgaXNTdGFydCxcbiAgbGFzdCxcbiAgbGVhZixcbiAgbGV2ZWxzLFxuICBtYXJrcyxcbiAgbmV4dCxcbiAgbm9kZSxcbiAgbm9kZXMsXG4gIG5vcm1hbGl6ZSxcbiAgcGFyZW50LFxuICBwYXRoLFxuICBwYXRoUmVmLFxuICBwYXRoUmVmcyxcbiAgcG9pbnQsXG4gIHBvaW50UmVmLFxuICBwb2ludFJlZnMsXG4gIHBvc2l0aW9ucyxcbiAgcHJldmlvdXMsXG4gIHJhbmdlLFxuICByYW5nZVJlZixcbiAgcmFuZ2VSZWZzLFxuICBzZXROb3JtYWxpemluZyxcbiAgc3RhcnQsXG4gIHN0cmluZyxcbiAgdW5oYW5nUmFuZ2UsXG4gIHdpdGhvdXROb3JtYWxpemluZyxcbn0gZnJvbSAnLi9lZGl0b3InXG5pbXBvcnQgeyBkZWxldGVUZXh0IH0gZnJvbSAnLi90cmFuc2Zvcm1zLXRleHQnXG5pbXBvcnQge1xuICBjb2xsYXBzZSxcbiAgZGVzZWxlY3QsXG4gIG1vdmUsXG4gIHNlbGVjdCxcbiAgc2V0UG9pbnQsXG4gIHNldFNlbGVjdGlvbixcbn0gZnJvbSAnLi90cmFuc2Zvcm1zLXNlbGVjdGlvbidcbmltcG9ydCB7XG4gIGluc2VydE5vZGVzLFxuICBsaWZ0Tm9kZXMsXG4gIG1lcmdlTm9kZXMsXG4gIG1vdmVOb2RlcyxcbiAgcmVtb3ZlTm9kZXMsXG4gIHNldE5vZGVzLFxuICBzcGxpdE5vZGVzLFxuICB1bnNldE5vZGVzLFxuICB1bndyYXBOb2RlcyxcbiAgd3JhcE5vZGVzLFxufSBmcm9tICcuL3RyYW5zZm9ybXMtbm9kZSdcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgU2xhdGUgYEVkaXRvcmAgb2JqZWN0LlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlRWRpdG9yID0gKCk6IEVkaXRvciA9PiB7XG4gIGNvbnN0IGVkaXRvcjogRWRpdG9yID0ge1xuICAgIGNoaWxkcmVuOiBbXSxcbiAgICBvcGVyYXRpb25zOiBbXSxcbiAgICBzZWxlY3Rpb246IG51bGwsXG4gICAgbWFya3M6IG51bGwsXG4gICAgaXNFbGVtZW50UmVhZE9ubHk6ICgpID0+IGZhbHNlLFxuICAgIGlzSW5saW5lOiAoKSA9PiBmYWxzZSxcbiAgICBpc1NlbGVjdGFibGU6ICgpID0+IHRydWUsXG4gICAgaXNWb2lkOiAoKSA9PiBmYWxzZSxcbiAgICBtYXJrYWJsZVZvaWQ6ICgpID0+IGZhbHNlLFxuICAgIG9uQ2hhbmdlOiAoKSA9PiB7fSxcblxuICAgIC8vIENvcmVcbiAgICBhcHBseTogKC4uLmFyZ3MpID0+IGFwcGx5KGVkaXRvciwgLi4uYXJncyksXG5cbiAgICAvLyBFZGl0b3JcbiAgICBhZGRNYXJrOiAoLi4uYXJncykgPT4gYWRkTWFyayhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGRlbGV0ZUJhY2t3YXJkOiAoLi4uYXJncykgPT4gZGVsZXRlQmFja3dhcmQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBkZWxldGVGb3J3YXJkOiAoLi4uYXJncykgPT4gZGVsZXRlRm9yd2FyZChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGRlbGV0ZUZyYWdtZW50OiAoLi4uYXJncykgPT4gZGVsZXRlRnJhZ21lbnQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBnZXRGcmFnbWVudDogKC4uLmFyZ3MpID0+IGdldEZyYWdtZW50KGVkaXRvciwgLi4uYXJncyksXG4gICAgaW5zZXJ0QnJlYWs6ICguLi5hcmdzKSA9PiBpbnNlcnRCcmVhayhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGluc2VydFNvZnRCcmVhazogKC4uLmFyZ3MpID0+IGluc2VydFNvZnRCcmVhayhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGluc2VydEZyYWdtZW50OiAoLi4uYXJncykgPT4gaW5zZXJ0RnJhZ21lbnQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpbnNlcnROb2RlOiAoLi4uYXJncykgPT4gaW5zZXJ0Tm9kZShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGluc2VydFRleHQ6ICguLi5hcmdzKSA9PiBpbnNlcnRUZXh0KGVkaXRvciwgLi4uYXJncyksXG4gICAgbm9ybWFsaXplTm9kZTogKC4uLmFyZ3MpID0+IG5vcm1hbGl6ZU5vZGUoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICByZW1vdmVNYXJrOiAoLi4uYXJncykgPT4gcmVtb3ZlTWFyayhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGdldERpcnR5UGF0aHM6ICguLi5hcmdzKSA9PiBnZXREaXJ0eVBhdGhzKGVkaXRvciwgLi4uYXJncyksXG4gICAgc2hvdWxkTm9ybWFsaXplOiAoLi4uYXJncykgPT4gc2hvdWxkTm9ybWFsaXplKGVkaXRvciwgLi4uYXJncyksXG5cbiAgICAvLyBFZGl0b3IgaW50ZXJmYWNlXG4gICAgYWJvdmU6ICguLi5hcmdzKSA9PiBhYm92ZShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGFmdGVyOiAoLi4uYXJncykgPT4gYWZ0ZXIoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBiZWZvcmU6ICguLi5hcmdzKSA9PiBiZWZvcmUoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBjb2xsYXBzZTogKC4uLmFyZ3MpID0+IGNvbGxhcHNlKGVkaXRvciwgLi4uYXJncyksXG4gICAgZGVsZXRlOiAoLi4uYXJncykgPT4gZGVsZXRlVGV4dChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGRlc2VsZWN0OiAoLi4uYXJncykgPT4gZGVzZWxlY3QoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBlZGdlczogKC4uLmFyZ3MpID0+IGVkZ2VzKGVkaXRvciwgLi4uYXJncyksXG4gICAgZWxlbWVudFJlYWRPbmx5OiAoLi4uYXJncykgPT4gZWxlbWVudFJlYWRPbmx5KGVkaXRvciwgLi4uYXJncyksXG4gICAgZW5kOiAoLi4uYXJncykgPT4gZW5kKGVkaXRvciwgLi4uYXJncyksXG4gICAgZmlyc3Q6ICguLi5hcmdzKSA9PiBmaXJzdChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGZyYWdtZW50OiAoLi4uYXJncykgPT4gZnJhZ21lbnQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBnZXRNYXJrczogKC4uLmFyZ3MpID0+IG1hcmtzKGVkaXRvciwgLi4uYXJncyksXG4gICAgaGFzQmxvY2tzOiAoLi4uYXJncykgPT4gaGFzQmxvY2tzKGVkaXRvciwgLi4uYXJncyksXG4gICAgaGFzSW5saW5lczogKC4uLmFyZ3MpID0+IGhhc0lubGluZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBoYXNQYXRoOiAoLi4uYXJncykgPT4gaGFzUGF0aChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGhhc1RleHRzOiAoLi4uYXJncykgPT4gaGFzVGV4dHMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpbnNlcnROb2RlczogKC4uLmFyZ3MpID0+IGluc2VydE5vZGVzKGVkaXRvciwgLi4uYXJncyksXG4gICAgaXNCbG9jazogKC4uLmFyZ3MpID0+IGlzQmxvY2soZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpc0VkZ2U6ICguLi5hcmdzKSA9PiBpc0VkZ2UoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpc0VtcHR5OiAoLi4uYXJncykgPT4gaXNFbXB0eShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGlzRW5kOiAoLi4uYXJncykgPT4gaXNFbmQoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBpc05vcm1hbGl6aW5nOiAoLi4uYXJncykgPT4gaXNOb3JtYWxpemluZyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGlzU3RhcnQ6ICguLi5hcmdzKSA9PiBpc1N0YXJ0KGVkaXRvciwgLi4uYXJncyksXG4gICAgbGFzdDogKC4uLmFyZ3MpID0+IGxhc3QoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBsZWFmOiAoLi4uYXJncykgPT4gbGVhZihlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGxldmVsczogKC4uLmFyZ3MpID0+IGxldmVscyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIGxpZnROb2RlczogKC4uLmFyZ3MpID0+IGxpZnROb2RlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIG1lcmdlTm9kZXM6ICguLi5hcmdzKSA9PiBtZXJnZU5vZGVzKGVkaXRvciwgLi4uYXJncyksXG4gICAgbW92ZTogKC4uLmFyZ3MpID0+IG1vdmUoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBtb3ZlTm9kZXM6ICguLi5hcmdzKSA9PiBtb3ZlTm9kZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBuZXh0OiAoLi4uYXJncykgPT4gbmV4dChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIG5vZGU6ICguLi5hcmdzKSA9PiBub2RlKGVkaXRvciwgLi4uYXJncyksXG4gICAgbm9kZXM6ICguLi5hcmdzKSA9PiBub2RlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIG5vcm1hbGl6ZTogKC4uLmFyZ3MpID0+IG5vcm1hbGl6ZShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHBhcmVudDogKC4uLmFyZ3MpID0+IHBhcmVudChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHBhdGg6ICguLi5hcmdzKSA9PiBwYXRoKGVkaXRvciwgLi4uYXJncyksXG4gICAgcGF0aFJlZjogKC4uLmFyZ3MpID0+IHBhdGhSZWYoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBwYXRoUmVmczogKC4uLmFyZ3MpID0+IHBhdGhSZWZzKGVkaXRvciwgLi4uYXJncyksXG4gICAgcG9pbnQ6ICguLi5hcmdzKSA9PiBwb2ludChlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHBvaW50UmVmOiAoLi4uYXJncykgPT4gcG9pbnRSZWYoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBwb2ludFJlZnM6ICguLi5hcmdzKSA9PiBwb2ludFJlZnMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBwb3NpdGlvbnM6ICguLi5hcmdzKSA9PiBwb3NpdGlvbnMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBwcmV2aW91czogKC4uLmFyZ3MpID0+IHByZXZpb3VzKGVkaXRvciwgLi4uYXJncyksXG4gICAgcmFuZ2U6ICguLi5hcmdzKSA9PiByYW5nZShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHJhbmdlUmVmOiAoLi4uYXJncykgPT4gcmFuZ2VSZWYoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICByYW5nZVJlZnM6ICguLi5hcmdzKSA9PiByYW5nZVJlZnMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICByZW1vdmVOb2RlczogKC4uLmFyZ3MpID0+IHJlbW92ZU5vZGVzKGVkaXRvciwgLi4uYXJncyksXG4gICAgc2VsZWN0OiAoLi4uYXJncykgPT4gc2VsZWN0KGVkaXRvciwgLi4uYXJncyksXG4gICAgc2V0Tm9kZXM6ICguLi5hcmdzKSA9PiBzZXROb2RlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHNldE5vcm1hbGl6aW5nOiAoLi4uYXJncykgPT4gc2V0Tm9ybWFsaXppbmcoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBzZXRQb2ludDogKC4uLmFyZ3MpID0+IHNldFBvaW50KGVkaXRvciwgLi4uYXJncyksXG4gICAgc2V0U2VsZWN0aW9uOiAoLi4uYXJncykgPT4gc2V0U2VsZWN0aW9uKGVkaXRvciwgLi4uYXJncyksXG4gICAgc3BsaXROb2RlczogKC4uLmFyZ3MpID0+IHNwbGl0Tm9kZXMoZWRpdG9yLCAuLi5hcmdzKSxcbiAgICBzdGFydDogKC4uLmFyZ3MpID0+IHN0YXJ0KGVkaXRvciwgLi4uYXJncyksXG4gICAgc3RyaW5nOiAoLi4uYXJncykgPT4gc3RyaW5nKGVkaXRvciwgLi4uYXJncyksXG4gICAgdW5oYW5nUmFuZ2U6ICguLi5hcmdzKSA9PiB1bmhhbmdSYW5nZShlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHVuc2V0Tm9kZXM6ICguLi5hcmdzKSA9PiB1bnNldE5vZGVzKGVkaXRvciwgLi4uYXJncyksXG4gICAgdW53cmFwTm9kZXM6ICguLi5hcmdzKSA9PiB1bndyYXBOb2RlcyhlZGl0b3IsIC4uLmFyZ3MpLFxuICAgIHZvaWQ6ICguLi5hcmdzKSA9PiBnZXRWb2lkKGVkaXRvciwgLi4uYXJncyksXG4gICAgd2l0aG91dE5vcm1hbGl6aW5nOiAoLi4uYXJncykgPT4gd2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgLi4uYXJncyksXG4gICAgd3JhcE5vZGVzOiAoLi4uYXJncykgPT4gd3JhcE5vZGVzKGVkaXRvciwgLi4uYXJncyksXG4gIH1cblxuICByZXR1cm4gZWRpdG9yXG59XG4iLCAiLy8gQ29tcHV0ZSB3aGF0IHNjcm9sbGluZyBuZWVkcyB0byBiZSBkb25lIG9uIHJlcXVpcmVkIHNjcm9sbGluZyBib3hlcyBmb3IgdGFyZ2V0IHRvIGJlIGluIHZpZXdcblxuLy8gVGhlIHR5cGUgbmFtZXMgaGVyZSBhcmUgbmFtZWQgYWZ0ZXIgdGhlIHNwZWMgdG8gbWFrZSBpdCBlYXNpZXIgdG8gZmluZCBtb3JlIGluZm9ybWF0aW9uIGFyb3VuZCB3aGF0IHRoZXkgbWVhbjpcbi8vIFRvIHJlZHVjZSBjaHVybiBhbmQgcmVkdWNlIHRoaW5ncyB0aGF0IG5lZWQgYmUgbWFpbnRhaW5lZCB0aGluZ3MgZnJvbSB0aGUgb2ZmaWNpYWwgVFMgRE9NIGxpYnJhcnkgaXMgdXNlZCBoZXJlXG4vLyBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20tdmlldy9cblxuLy8gRm9yIGEgZGVmaW5pdGlvbiBvbiB3aGF0IGlzIFwiYmxvY2sgZmxvdyBkaXJlY3Rpb25cIiBleGFjdGx5LCBjaGVjayB0aGlzOiBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3NzLXdyaXRpbmctbW9kZXMtNC8jYmxvY2stZmxvdy1kaXJlY3Rpb25cblxuLy8gYWRkIHN1cHBvcnQgZm9yIHZpc3VhbFZpZXdwb3J0IG9iamVjdCBjdXJyZW50bHkgaW1wbGVtZW50ZWQgaW4gY2hyb21lXG5pbnRlcmZhY2UgdmlzdWFsVmlld3BvcnQge1xuICBoZWlnaHQ6IG51bWJlclxuICB3aWR0aDogbnVtYmVyXG59XG5cbnR5cGUgU2Nyb2xsTG9naWNhbFBvc2l0aW9uID0gJ3N0YXJ0JyB8ICdjZW50ZXInIHwgJ2VuZCcgfCAnbmVhcmVzdCdcbi8vIFRoaXMgbmV3IG9wdGlvbiBpcyB0cmFja2VkIGluIHRoaXMgUFIsIHdoaWNoIGlzIHRoZSBtb3N0IGxpa2VseSBjYW5kaWRhdGUgYXQgdGhlIHRpbWU6IGh0dHBzOi8vZ2l0aHViLmNvbS93M2MvY3Nzd2ctZHJhZnRzL3B1bGwvMTgwNVxudHlwZSBTY3JvbGxNb2RlID0gJ2Fsd2F5cycgfCAnaWYtbmVlZGVkJ1xuLy8gTmV3IG9wdGlvbiB0aGF0IHNraXBzIGF1dG8tc2Nyb2xsaW5nIGFsbCBub2RlcyB3aXRoIG92ZXJmbG93OiBoaWRkZW4gc2V0XG4vLyBTZWUgRkYgaW1wbGVtZW50YXRpb246IGh0dHBzOi8vaGcubW96aWxsYS5vcmcvaW50ZWdyYXRpb24vZngtdGVhbS9yZXYvYzQ4YzNlYzA1MDEyI2w3LjE4XG50eXBlIFNraXBPdmVyZmxvd0hpZGRlbkVsZW1lbnRzID0gYm9vbGVhblxuXG5pbnRlcmZhY2UgT3B0aW9ucyB7XG4gIGJsb2NrPzogU2Nyb2xsTG9naWNhbFBvc2l0aW9uXG4gIGlubGluZT86IFNjcm9sbExvZ2ljYWxQb3NpdGlvblxuICBzY3JvbGxNb2RlPzogU2Nyb2xsTW9kZVxuICBib3VuZGFyeT86IEN1c3RvbVNjcm9sbEJvdW5kYXJ5XG4gIHNraXBPdmVyZmxvd0hpZGRlbkVsZW1lbnRzPzogU2tpcE92ZXJmbG93SGlkZGVuRWxlbWVudHNcbn1cblxuLy8gQ3VzdG9tIGJlaGF2aW9yLCBub3QgaW4gYW55IHNwZWNcbnR5cGUgQ3VzdG9tU2Nyb2xsQm91bmRhcnlDYWxsYmFjayA9IChwYXJlbnQ6IEVsZW1lbnQpID0+IGJvb2xlYW5cbnR5cGUgQ3VzdG9tU2Nyb2xsQm91bmRhcnkgPSBFbGVtZW50IHwgQ3VzdG9tU2Nyb2xsQm91bmRhcnlDYWxsYmFjayB8IG51bGxcbmludGVyZmFjZSBDdXN0b21TY3JvbGxBY3Rpb24ge1xuICBlbDogRWxlbWVudFxuICB0b3A6IG51bWJlclxuICBsZWZ0OiBudW1iZXJcbn1cblxuLy8gQFRPRE8gYmV0dGVyIHNoYWRvd2RvbSB0ZXN0LCAxMSA9IGRvY3VtZW50IGZyYWdtZW50XG5mdW5jdGlvbiBpc0VsZW1lbnQoZWw6IGFueSk6IGVsIGlzIEVsZW1lbnQge1xuICByZXR1cm4gdHlwZW9mIGVsID09PSAnb2JqZWN0JyAmJiBlbCAhPSBudWxsICYmIGVsLm5vZGVUeXBlID09PSAxXG59XG5cbmZ1bmN0aW9uIGNhbk92ZXJmbG93KFxuICBvdmVyZmxvdzogc3RyaW5nIHwgbnVsbCxcbiAgc2tpcE92ZXJmbG93SGlkZGVuRWxlbWVudHM/OiBib29sZWFuXG4pIHtcbiAgaWYgKHNraXBPdmVyZmxvd0hpZGRlbkVsZW1lbnRzICYmIG92ZXJmbG93ID09PSAnaGlkZGVuJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIG92ZXJmbG93ICE9PSAndmlzaWJsZScgJiYgb3ZlcmZsb3cgIT09ICdjbGlwJ1xufVxuXG5mdW5jdGlvbiBnZXRGcmFtZUVsZW1lbnQoZWw6IEVsZW1lbnQpIHtcbiAgaWYgKCFlbC5vd25lckRvY3VtZW50IHx8ICFlbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHRyeSB7XG4gICAgcmV0dXJuIGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZnJhbWVFbGVtZW50XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmZ1bmN0aW9uIGlzSGlkZGVuQnlGcmFtZShlbDogRWxlbWVudCk6IGJvb2xlYW4ge1xuICBjb25zdCBmcmFtZSA9IGdldEZyYW1lRWxlbWVudChlbClcbiAgaWYgKCFmcmFtZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICBmcmFtZS5jbGllbnRIZWlnaHQgPCBlbC5zY3JvbGxIZWlnaHQgfHwgZnJhbWUuY2xpZW50V2lkdGggPCBlbC5zY3JvbGxXaWR0aFxuICApXG59XG5cbmZ1bmN0aW9uIGlzU2Nyb2xsYWJsZShlbDogRWxlbWVudCwgc2tpcE92ZXJmbG93SGlkZGVuRWxlbWVudHM/OiBib29sZWFuKSB7XG4gIGlmIChlbC5jbGllbnRIZWlnaHQgPCBlbC5zY3JvbGxIZWlnaHQgfHwgZWwuY2xpZW50V2lkdGggPCBlbC5zY3JvbGxXaWR0aCkge1xuICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCwgbnVsbClcbiAgICByZXR1cm4gKFxuICAgICAgY2FuT3ZlcmZsb3coc3R5bGUub3ZlcmZsb3dZLCBza2lwT3ZlcmZsb3dIaWRkZW5FbGVtZW50cykgfHxcbiAgICAgIGNhbk92ZXJmbG93KHN0eWxlLm92ZXJmbG93WCwgc2tpcE92ZXJmbG93SGlkZGVuRWxlbWVudHMpIHx8XG4gICAgICBpc0hpZGRlbkJ5RnJhbWUoZWwpXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG4vKipcbiAqIEZpbmQgb3V0IHdoaWNoIGVkZ2UgdG8gYWxpZ24gYWdhaW5zdCB3aGVuIGxvZ2ljYWwgc2Nyb2xsIHBvc2l0aW9uIGlzIFwibmVhcmVzdFwiXG4gKiBJbnRlcmVzdGluZyBmYWN0OiBcIm5lYXJlc3RcIiB3b3JrcyBzaW1pbGFyaWx5IHRvIFwiaWYtbmVlZGVkXCIsIGlmIHRoZSBlbGVtZW50IGlzIGZ1bGx5IHZpc2libGUgaXQgd2lsbCBub3Qgc2Nyb2xsIGl0XG4gKlxuICogTGVnZW5kczpcbiAqIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCDilI8g4pSBIOKUgSDilIEg4pSTXG4gKiDilIIgdGFyZ2V0IOKUgiAgIGZyYW1lXG4gKiDilJTilIDilIDilIDilIDilIDilIDilIDilIDilJgg4pSXIOKUgSDilIEg4pSBIOKUm1xuICovXG5mdW5jdGlvbiBhbGlnbk5lYXJlc3QoXG4gIHNjcm9sbGluZ0VkZ2VTdGFydDogbnVtYmVyLFxuICBzY3JvbGxpbmdFZGdlRW5kOiBudW1iZXIsXG4gIHNjcm9sbGluZ1NpemU6IG51bWJlcixcbiAgc2Nyb2xsaW5nQm9yZGVyU3RhcnQ6IG51bWJlcixcbiAgc2Nyb2xsaW5nQm9yZGVyRW5kOiBudW1iZXIsXG4gIGVsZW1lbnRFZGdlU3RhcnQ6IG51bWJlcixcbiAgZWxlbWVudEVkZ2VFbmQ6IG51bWJlcixcbiAgZWxlbWVudFNpemU6IG51bWJlclxuKSB7XG4gIC8qKlxuICAgKiBJZiBlbGVtZW50IGVkZ2UgQSBhbmQgZWxlbWVudCBlZGdlIEIgYXJlIGJvdGggb3V0c2lkZSBzY3JvbGxpbmcgYm94IGVkZ2UgQSBhbmQgc2Nyb2xsaW5nIGJveCBlZGdlIEJcbiAgICpcbiAgICogICAgICAgICAg4pSM4pSA4pSA4pSQXG4gICAqICAgICAgICDilI/ilIHilILilIHilIHilILilIHilJNcbiAgICogICAgICAgICAg4pSCICDilIJcbiAgICogICAgICAgIOKUgyDilIIgIOKUgiDilIMgICAgICAgIGRvIG5vdGhpbmdcbiAgICogICAgICAgICAg4pSCICDilIJcbiAgICogICAgICAgIOKUl+KUgeKUguKUgeKUgeKUguKUgeKUm1xuICAgKiAgICAgICAgICDilJTilIDilIDilJhcbiAgICpcbiAgICogIElmIGVsZW1lbnQgZWRnZSBDIGFuZCBlbGVtZW50IGVkZ2UgRCBhcmUgYm90aCBvdXRzaWRlIHNjcm9sbGluZyBib3ggZWRnZSBDIGFuZCBzY3JvbGxpbmcgYm94IGVkZ2UgRFxuICAgKlxuICAgKiAgICDilI8g4pSBIOKUgSDilIEg4pSBIOKUk1xuICAgKiAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkFxuICAgKiAgIOKUguKUgyAgICAgICAgIOKUg+KUgiAgICAgICAgZG8gbm90aGluZ1xuICAgKiAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmFxuICAgKiAgICDilJcg4pSBIOKUgSDilIEg4pSBIOKUm1xuICAgKi9cbiAgaWYgKFxuICAgIChlbGVtZW50RWRnZVN0YXJ0IDwgc2Nyb2xsaW5nRWRnZVN0YXJ0ICYmXG4gICAgICBlbGVtZW50RWRnZUVuZCA+IHNjcm9sbGluZ0VkZ2VFbmQpIHx8XG4gICAgKGVsZW1lbnRFZGdlU3RhcnQgPiBzY3JvbGxpbmdFZGdlU3RhcnQgJiYgZWxlbWVudEVkZ2VFbmQgPCBzY3JvbGxpbmdFZGdlRW5kKVxuICApIHtcbiAgICByZXR1cm4gMFxuICB9XG5cbiAgLyoqXG4gICAqIElmIGVsZW1lbnQgZWRnZSBBIGlzIG91dHNpZGUgc2Nyb2xsaW5nIGJveCBlZGdlIEEgYW5kIGVsZW1lbnQgaGVpZ2h0IGlzIGxlc3MgdGhhbiBzY3JvbGxpbmcgYm94IGhlaWdodFxuICAgKlxuICAgKiAgICAgICAgICDilIzilIDilIDilJBcbiAgICogICAgICAgIOKUj+KUgeKUguKUgeKUgeKUguKUgeKUkyAgICAgICAgIOKUj+KUgeKUjOKUgeKUgeKUkOKUgeKUk1xuICAgKiAgICAgICAgICDilJTilIDilIDilJggICAgICAgICAgICAg4pSCICDilIJcbiAgICogIGZyb20gIOKUgyAgICAgIOKUgyAgICAgdG8gIOKUgyDilJTilIDilIDilJgg4pSDXG4gICAqXG4gICAqICAgICAgICDilJfilIEg4pSB4pSBIOKUgeKUmyAgICAgICAgIOKUl+KUgSDilIHilIEg4pSB4pSbXG4gICAqXG4gICAqIElmIGVsZW1lbnQgZWRnZSBCIGlzIG91dHNpZGUgc2Nyb2xsaW5nIGJveCBlZGdlIEIgYW5kIGVsZW1lbnQgaGVpZ2h0IGlzIGdyZWF0ZXIgdGhhbiBzY3JvbGxpbmcgYm94IGhlaWdodFxuICAgKlxuICAgKiAgICAgICAg4pSP4pSBIOKUgeKUgSDilIHilJMgICAgICAgICDilI/ilIHilIzilIHilIHilJDilIHilJNcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICDilIIgIOKUglxuICAgKiAgZnJvbSAg4pSDIOKUjOKUgOKUgOKUkCDilIMgICAgIHRvICDilIMg4pSCICDilIIg4pSDXG4gICAqICAgICAgICAgIOKUgiAg4pSCICAgICAgICAgICAgIOKUgiAg4pSCXG4gICAqICAgICAgICDilJfilIHilILilIHilIHilILilIHilJsgICAgICAgICDilJfilIHilILilIHilIHilILilIHilJtcbiAgICogICAgICAgICAg4pSCICDilIIgICAgICAgICAgICAg4pSU4pSA4pSA4pSYXG4gICAqICAgICAgICAgIOKUgiAg4pSCXG4gICAqICAgICAgICAgIOKUlOKUgOKUgOKUmFxuICAgKlxuICAgKiBJZiBlbGVtZW50IGVkZ2UgQyBpcyBvdXRzaWRlIHNjcm9sbGluZyBib3ggZWRnZSBDIGFuZCBlbGVtZW50IHdpZHRoIGlzIGxlc3MgdGhhbiBzY3JvbGxpbmcgYm94IHdpZHRoXG4gICAqXG4gICAqICAgICAgIGZyb20gICAgICAgICAgICAgICAgIHRvXG4gICAqICAgIOKUjyDilIEg4pSBIOKUgSDilIEg4pSTICAgICAgICAg4pSPIOKUgSDilIEg4pSBIOKUgSDilJNcbiAgICogIOKUjOKUgOKUgOKUgOKUkCAgICAgICAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSQXG4gICAqICDilIIg4pSDIOKUgiAgICAgICDilIMgICAgICAgICDilIMgICDilIIgICAgIOKUg1xuICAgKiAg4pSU4pSA4pSA4pSA4pSYICAgICAgICAgICAgICAgICDilJTilIDilIDilIDilJhcbiAgICogICAg4pSXIOKUgSDilIEg4pSBIOKUgSDilJsgICAgICAgICDilJcg4pSBIOKUgSDilIEg4pSBIOKUm1xuICAgKlxuICAgKiBJZiBlbGVtZW50IGVkZ2UgRCBpcyBvdXRzaWRlIHNjcm9sbGluZyBib3ggZWRnZSBEIGFuZCBlbGVtZW50IHdpZHRoIGlzIGdyZWF0ZXIgdGhhbiBzY3JvbGxpbmcgYm94IHdpZHRoXG4gICAqXG4gICAqICAgICAgIGZyb20gICAgICAgICAgICAgICAgIHRvXG4gICAqICAgIOKUjyDilIEg4pSBIOKUgSDilIEg4pSTICAgICAgICAg4pSPIOKUgSDilIEg4pSBIOKUgSDilJNcbiAgICogICAgICAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkFxuICAgKiAgICDilIMgICDilIIgICAgIOKUgyAgICAg4pSCICAg4pSDICAgICAgICAg4pSDIOKUglxuICAgKiAgICAgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYXG4gICAqICAgIOKUlyDilIEg4pSBIOKUgSDilIEg4pSbICAgICAgICAg4pSXIOKUgSDilIEg4pSBIOKUgSDilJtcbiAgICovXG4gIGlmIChcbiAgICAoZWxlbWVudEVkZ2VTdGFydCA8PSBzY3JvbGxpbmdFZGdlU3RhcnQgJiYgZWxlbWVudFNpemUgPD0gc2Nyb2xsaW5nU2l6ZSkgfHxcbiAgICAoZWxlbWVudEVkZ2VFbmQgPj0gc2Nyb2xsaW5nRWRnZUVuZCAmJiBlbGVtZW50U2l6ZSA+PSBzY3JvbGxpbmdTaXplKVxuICApIHtcbiAgICByZXR1cm4gZWxlbWVudEVkZ2VTdGFydCAtIHNjcm9sbGluZ0VkZ2VTdGFydCAtIHNjcm9sbGluZ0JvcmRlclN0YXJ0XG4gIH1cblxuICAvKipcbiAgICogSWYgZWxlbWVudCBlZGdlIEIgaXMgb3V0c2lkZSBzY3JvbGxpbmcgYm94IGVkZ2UgQiBhbmQgZWxlbWVudCBoZWlnaHQgaXMgbGVzcyB0aGFuIHNjcm9sbGluZyBib3ggaGVpZ2h0XG4gICAqXG4gICAqICAgICAgICDilI/ilIEg4pSB4pSBIOKUgeKUkyAgICAgICAgIOKUj+KUgSDilIHilIEg4pSB4pSTXG4gICAqXG4gICAqICBmcm9tICDilIMgICAgICDilIMgICAgIHRvICDilIMg4pSM4pSA4pSA4pSQIOKUg1xuICAgKiAgICAgICAgICDilIzilIDilIDilJAgICAgICAgICAgICAg4pSCICDilIJcbiAgICogICAgICAgIOKUl+KUgeKUguKUgeKUgeKUguKUgeKUmyAgICAgICAgIOKUl+KUgeKUlOKUgeKUgeKUmOKUgeKUm1xuICAgKiAgICAgICAgICDilJTilIDilIDilJhcbiAgICpcbiAgICogSWYgZWxlbWVudCBlZGdlIEEgaXMgb3V0c2lkZSBzY3JvbGxpbmcgYm94IGVkZ2UgQSBhbmQgZWxlbWVudCBoZWlnaHQgaXMgZ3JlYXRlciB0aGFuIHNjcm9sbGluZyBib3ggaGVpZ2h0XG4gICAqXG4gICAqICAgICAgICAgIOKUjOKUgOKUgOKUkFxuICAgKiAgICAgICAgICDilIIgIOKUglxuICAgKiAgICAgICAgICDilIIgIOKUgiAgICAgICAgICAgICDilIzilIDilIDilJBcbiAgICogICAgICAgIOKUj+KUgeKUguKUgeKUgeKUguKUgeKUkyAgICAgICAgIOKUj+KUgeKUguKUgeKUgeKUguKUgeKUk1xuICAgKiAgICAgICAgICDilIIgIOKUgiAgICAgICAgICAgICDilIIgIOKUglxuICAgKiAgZnJvbSAg4pSDIOKUlOKUgOKUgOKUmCDilIMgICAgIHRvICDilIMg4pSCICDilIIg4pSDXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSCICDilIJcbiAgICogICAgICAgIOKUl+KUgSDilIHilIEg4pSB4pSbICAgICAgICAg4pSX4pSB4pSU4pSB4pSB4pSY4pSB4pSbXG4gICAqXG4gICAqIElmIGVsZW1lbnQgZWRnZSBDIGlzIG91dHNpZGUgc2Nyb2xsaW5nIGJveCBlZGdlIEMgYW5kIGVsZW1lbnQgd2lkdGggaXMgZ3JlYXRlciB0aGFuIHNjcm9sbGluZyBib3ggd2lkdGhcbiAgICpcbiAgICogICAgICAgICAgIGZyb20gICAgICAgICAgICAgICAgIHRvXG4gICAqICAgICAgICDilI8g4pSBIOKUgSDilIEg4pSBIOKUkyAgICAgICAgIOKUjyDilIEg4pSBIOKUgSDilIEg4pSTXG4gICAqICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAgICAgICAgICAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkFxuICAgKiAg4pSCICAgICDilIMgICAgIOKUgiAgIOKUgyAgICAgICDilIIg4pSDICAgICAgICAg4pSDXG4gICAqICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJggICAgICAgICAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmFxuICAgKiAgICAgICAg4pSXIOKUgSDilIEg4pSBIOKUgSDilJsgICAgICAgICDilJcg4pSBIOKUgSDilIEg4pSBIOKUm1xuICAgKlxuICAgKiBJZiBlbGVtZW50IGVkZ2UgRCBpcyBvdXRzaWRlIHNjcm9sbGluZyBib3ggZWRnZSBEIGFuZCBlbGVtZW50IHdpZHRoIGlzIGxlc3MgdGhhbiBzY3JvbGxpbmcgYm94IHdpZHRoXG4gICAqXG4gICAqICAgICAgICAgICBmcm9tICAgICAgICAgICAgICAgICB0b1xuICAgKiAgICAgICAg4pSPIOKUgSDilIEg4pSBIOKUgSDilJMgICAgICAgICDilI8g4pSBIOKUgSDilIEg4pSBIOKUk1xuICAgKiAgICAgICAgICAgICAgICDilIzilIDilIDilIDilJAgICAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSQXG4gICAqICAgICAgICDilIMgICAgICAg4pSCIOKUgyDilIIgICAgICAg4pSDICAgICDilIIgICDilINcbiAgICogICAgICAgICAgICAgICAg4pSU4pSA4pSA4pSA4pSYICAgICAgICAgICAgIOKUlOKUgOKUgOKUgOKUmFxuICAgKiAgICAgICAg4pSXIOKUgSDilIEg4pSBIOKUgSDilJsgICAgICAgICDilJcg4pSBIOKUgSDilIEg4pSBIOKUm1xuICAgKlxuICAgKi9cbiAgaWYgKFxuICAgIChlbGVtZW50RWRnZUVuZCA+IHNjcm9sbGluZ0VkZ2VFbmQgJiYgZWxlbWVudFNpemUgPCBzY3JvbGxpbmdTaXplKSB8fFxuICAgIChlbGVtZW50RWRnZVN0YXJ0IDwgc2Nyb2xsaW5nRWRnZVN0YXJ0ICYmIGVsZW1lbnRTaXplID4gc2Nyb2xsaW5nU2l6ZSlcbiAgKSB7XG4gICAgcmV0dXJuIGVsZW1lbnRFZGdlRW5kIC0gc2Nyb2xsaW5nRWRnZUVuZCArIHNjcm9sbGluZ0JvcmRlckVuZFxuICB9XG5cbiAgcmV0dXJuIDBcbn1cblxuZnVuY3Rpb24gZ2V0UGFyZW50RWxlbWVudChlbGVtZW50OiBOb2RlKTogRWxlbWVudCB8IG51bGwge1xuICBjb25zdCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnRcbiAgaWYgKHBhcmVudCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIChlbGVtZW50LmdldFJvb3ROb2RlKCkgYXMgU2hhZG93Um9vdCkuaG9zdCB8fCBudWxsXG4gIH1cbiAgcmV0dXJuIHBhcmVudFxufVxuXG5leHBvcnQgZGVmYXVsdCAodGFyZ2V0OiBFbGVtZW50LCBvcHRpb25zOiBPcHRpb25zKTogQ3VzdG9tU2Nyb2xsQWN0aW9uW10gPT4ge1xuICAvL1RPRE86IHJlbW92ZSB0aGlzIGhhY2sgd2hlbiBtaWNyb2J1bmRsZSB3aWxsIHN1cHBvcnQgdHlwZXNjcmlwdCA+PSA0LjBcbiAgY29uc3Qgd2luZG93V2l0aFZpZXdwb3J0ID0gd2luZG93IGFzIHVua25vd24gYXMgV2luZG93ICYge1xuICAgIHZpc3VhbFZpZXdwb3J0OiB2aXN1YWxWaWV3cG9ydFxuICB9XG5cbiAgY29uc3QgeyBzY3JvbGxNb2RlLCBibG9jaywgaW5saW5lLCBib3VuZGFyeSwgc2tpcE92ZXJmbG93SGlkZGVuRWxlbWVudHMgfSA9XG4gICAgb3B0aW9uc1xuICAvLyBBbGxvdyB1c2luZyBhIGNhbGxiYWNrIHRvIGNoZWNrIHRoZSBib3VuZGFyeVxuICAvLyBUaGUgZGVmYXVsdCBiZWhhdmlvciBpcyB0byBjaGVjayBpZiB0aGUgY3VycmVudCB0YXJnZXQgbWF0Y2hlcyB0aGUgYm91bmRhcnkgZWxlbWVudCBvciBub3RcbiAgLy8gSWYgdW5kZWZpbmVkIGl0J2xsIGNoZWNrIHRoYXQgdGFyZ2V0IGlzIG5ldmVyIHVuZGVmaW5lZCAoY2FuIGhhcHBlbiBhcyB3ZSByZWN1cnNlIHVwIHRoZSB0cmVlKVxuICBjb25zdCBjaGVja0JvdW5kYXJ5ID1cbiAgICB0eXBlb2YgYm91bmRhcnkgPT09ICdmdW5jdGlvbicgPyBib3VuZGFyeSA6IChub2RlOiBhbnkpID0+IG5vZGUgIT09IGJvdW5kYXJ5XG5cbiAgaWYgKCFpc0VsZW1lbnQodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgdGFyZ2V0JylcbiAgfVxuXG4gIC8vIFVzZWQgdG8gaGFuZGxlIHRoZSB0b3AgbW9zdCBlbGVtZW50IHRoYXQgY2FuIGJlIHNjcm9sbGVkXG4gIGNvbnN0IHNjcm9sbGluZ0VsZW1lbnQgPSBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuXG4gIC8vIENvbGxlY3QgYWxsIHRoZSBzY3JvbGxpbmcgYm94ZXMsIGFzIGRlZmluZWQgaW4gdGhlIHNwZWM6IGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS12aWV3LyNzY3JvbGxpbmctYm94XG4gIGNvbnN0IGZyYW1lczogRWxlbWVudFtdID0gW11cbiAgbGV0IGN1cnNvcjogRWxlbWVudCB8IG51bGwgPSB0YXJnZXRcbiAgd2hpbGUgKGlzRWxlbWVudChjdXJzb3IpICYmIGNoZWNrQm91bmRhcnkoY3Vyc29yKSkge1xuICAgIC8vIE1vdmUgY3Vyc29yIHRvIHBhcmVudFxuICAgIGN1cnNvciA9IGdldFBhcmVudEVsZW1lbnQoY3Vyc29yKVxuXG4gICAgLy8gU3RvcCB3aGVuIHdlIHJlYWNoIHRoZSB2aWV3cG9ydFxuICAgIGlmIChjdXJzb3IgPT09IHNjcm9sbGluZ0VsZW1lbnQpIHtcbiAgICAgIGZyYW1lcy5wdXNoKGN1cnNvcilcbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgLy8gU2tpcCBkb2N1bWVudC5ib2R5IGlmIGl0J3Mgbm90IHRoZSBzY3JvbGxpbmdFbGVtZW50IGFuZCBkb2N1bWVudEVsZW1lbnQgaXNuJ3QgaW5kZXBlbmRlbnRseSBzY3JvbGxhYmxlXG4gICAgaWYgKFxuICAgICAgY3Vyc29yICE9IG51bGwgJiZcbiAgICAgIGN1cnNvciA9PT0gZG9jdW1lbnQuYm9keSAmJlxuICAgICAgaXNTY3JvbGxhYmxlKGN1cnNvcikgJiZcbiAgICAgICFpc1Njcm9sbGFibGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KVxuICAgICkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICAvLyBOb3cgd2UgY2hlY2sgaWYgdGhlIGVsZW1lbnQgaXMgc2Nyb2xsYWJsZSwgdGhpcyBjb2RlIG9ubHkgcnVucyBpZiB0aGUgbG9vcCBoYXZlbid0IGFscmVhZHkgaGl0IHRoZSB2aWV3cG9ydCBvciBhIGN1c3RvbSBib3VuZGFyeVxuICAgIGlmIChjdXJzb3IgIT0gbnVsbCAmJiBpc1Njcm9sbGFibGUoY3Vyc29yLCBza2lwT3ZlcmZsb3dIaWRkZW5FbGVtZW50cykpIHtcbiAgICAgIGZyYW1lcy5wdXNoKGN1cnNvcilcbiAgICB9XG4gIH1cblxuICAvLyBTdXBwb3J0IHBpbmNoLXpvb21pbmcgcHJvcGVybHksIG1ha2luZyBzdXJlIGVsZW1lbnRzIHNjcm9sbCBpbnRvIHRoZSB2aXN1YWwgdmlld3BvcnRcbiAgLy8gQnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IHZpc3VhbFZpZXdwb3J0IHdpbGwgcmVwb3J0IHRoZSBsYXlvdXQgdmlld3BvcnQgZGltZW5zaW9ucyBvbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgvSGVpZ2h0XG4gIC8vIGFuZCB2aWV3cG9ydCBkaW1lbnNpb25zIG9uIHdpbmRvdy5pbm5lcldpZHRoL0hlaWdodFxuICAvLyBodHRwczovL3d3dy5xdWlya3Ntb2RlLm9yZy9tb2JpbGUvdmlld3BvcnRzMi5odG1sXG4gIC8vIGh0dHBzOi8vYm9rYW5kLmdpdGh1Yi5pby92aWV3cG9ydC9pbmRleC5odG1sXG4gIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3dXaXRoVmlld3BvcnQudmlzdWFsVmlld3BvcnRcbiAgICA/IHdpbmRvd1dpdGhWaWV3cG9ydC52aXN1YWxWaWV3cG9ydC53aWR0aFxuICAgIDogaW5uZXJXaWR0aFxuICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IHdpbmRvd1dpdGhWaWV3cG9ydC52aXN1YWxWaWV3cG9ydFxuICAgID8gd2luZG93V2l0aFZpZXdwb3J0LnZpc3VhbFZpZXdwb3J0LmhlaWdodFxuICAgIDogaW5uZXJIZWlnaHRcblxuICAvLyBOZXdlciBicm93c2VycyBzdXBwb3J0cyBzY3JvbGxbWHxZXSwgcGFnZVtYfFldT2Zmc2V0IGlzXG4gIGNvbnN0IHZpZXdwb3J0WCA9IHdpbmRvdy5zY3JvbGxYIHx8IHBhZ2VYT2Zmc2V0XG4gIGNvbnN0IHZpZXdwb3J0WSA9IHdpbmRvdy5zY3JvbGxZIHx8IHBhZ2VZT2Zmc2V0XG5cbiAgY29uc3Qge1xuICAgIGhlaWdodDogdGFyZ2V0SGVpZ2h0LFxuICAgIHdpZHRoOiB0YXJnZXRXaWR0aCxcbiAgICB0b3A6IHRhcmdldFRvcCxcbiAgICByaWdodDogdGFyZ2V0UmlnaHQsXG4gICAgYm90dG9tOiB0YXJnZXRCb3R0b20sXG4gICAgbGVmdDogdGFyZ2V0TGVmdCxcbiAgfSA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG4gIC8vIFRoZXNlIHZhbHVlcyBtdXRhdGUgYXMgd2UgbG9vcCB0aHJvdWdoIGFuZCBnZW5lcmF0ZSBzY3JvbGwgY29vcmRpbmF0ZXNcbiAgbGV0IHRhcmdldEJsb2NrOiBudW1iZXIgPVxuICAgIGJsb2NrID09PSAnc3RhcnQnIHx8IGJsb2NrID09PSAnbmVhcmVzdCdcbiAgICAgID8gdGFyZ2V0VG9wXG4gICAgICA6IGJsb2NrID09PSAnZW5kJ1xuICAgICAgPyB0YXJnZXRCb3R0b21cbiAgICAgIDogdGFyZ2V0VG9wICsgdGFyZ2V0SGVpZ2h0IC8gMiAvLyBibG9jayA9PT0gJ2NlbnRlclxuICBsZXQgdGFyZ2V0SW5saW5lOiBudW1iZXIgPVxuICAgIGlubGluZSA9PT0gJ2NlbnRlcidcbiAgICAgID8gdGFyZ2V0TGVmdCArIHRhcmdldFdpZHRoIC8gMlxuICAgICAgOiBpbmxpbmUgPT09ICdlbmQnXG4gICAgICA/IHRhcmdldFJpZ2h0XG4gICAgICA6IHRhcmdldExlZnQgLy8gaW5saW5lID09PSAnc3RhcnQgfHwgaW5saW5lID09PSAnbmVhcmVzdFxuXG4gIC8vIENvbGxlY3QgbmV3IHNjcm9sbCBwb3NpdGlvbnNcbiAgY29uc3QgY29tcHV0YXRpb25zOiBDdXN0b21TY3JvbGxBY3Rpb25bXSA9IFtdXG4gIC8vIEluIGNocm9tZSB0aGVyZSdzIG5vIGxvbmdlciBhIGRpZmZlcmVuY2UgYmV0d2VlbiBjYWNoaW5nIHRoZSBgZnJhbWVzLmxlbmd0aGAgdG8gYSB2YXIgb3Igbm90LCBzbyB3ZSBkb24ndCBpbiB0aGlzIGNhc2UgKHNpemUgPiBzcGVlZCBhbnl3YXlzKVxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZnJhbWVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgIGNvbnN0IGZyYW1lID0gZnJhbWVzW2luZGV4XVxuXG4gICAgLy8gQFRPRE8gYWRkIGEgc2hvdWxkU2Nyb2xsIGhvb2sgaGVyZSB0aGF0IGFsbG93cyB1c2VybGFuZCBjb2RlIHRvIHRha2UgY29udHJvbFxuXG4gICAgY29uc3QgeyBoZWlnaHQsIHdpZHRoLCB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQgfSA9XG4gICAgICBmcmFtZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG4gICAgLy8gSWYgdGhlIGVsZW1lbnQgaXMgYWxyZWFkeSB2aXNpYmxlIHdlIGNhbiBlbmQgaXQgaGVyZVxuICAgIC8vIEBUT0RPIHRhcmdldEJsb2NrIGFuZCB0YXJnZXRJbmxpbmUgc2hvdWxkIGJlIHRha2VuIGludG8gYWNjb3VudCB0byBiZSBjb21wbGlhbnQgd2l0aCBodHRwczovL2dpdGh1Yi5jb20vdzNjL2Nzc3dnLWRyYWZ0cy9wdWxsLzE4MDUvZmlsZXMjZGlmZi0zYzE3ZjBlNDNjMjBmOGVjZjg5NDE5ZDQ5ZTdlZjVlMFIxMzMzXG4gICAgaWYgKFxuICAgICAgc2Nyb2xsTW9kZSA9PT0gJ2lmLW5lZWRlZCcgJiZcbiAgICAgIHRhcmdldFRvcCA+PSAwICYmXG4gICAgICB0YXJnZXRMZWZ0ID49IDAgJiZcbiAgICAgIHRhcmdldEJvdHRvbSA8PSB2aWV3cG9ydEhlaWdodCAmJlxuICAgICAgdGFyZ2V0UmlnaHQgPD0gdmlld3BvcnRXaWR0aCAmJlxuICAgICAgdGFyZ2V0VG9wID49IHRvcCAmJlxuICAgICAgdGFyZ2V0Qm90dG9tIDw9IGJvdHRvbSAmJlxuICAgICAgdGFyZ2V0TGVmdCA+PSBsZWZ0ICYmXG4gICAgICB0YXJnZXRSaWdodCA8PSByaWdodFxuICAgICkge1xuICAgICAgLy8gQnJlYWsgdGhlIGxvb3AgYW5kIHJldHVybiB0aGUgY29tcHV0YXRpb25zIGZvciB0aGluZ3MgdGhhdCBhcmUgbm90IGZ1bGx5IHZpc2libGVcbiAgICAgIHJldHVybiBjb21wdXRhdGlvbnNcbiAgICB9XG5cbiAgICBjb25zdCBmcmFtZVN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShmcmFtZSlcbiAgICBjb25zdCBib3JkZXJMZWZ0ID0gcGFyc2VJbnQoZnJhbWVTdHlsZS5ib3JkZXJMZWZ0V2lkdGggYXMgc3RyaW5nLCAxMClcbiAgICBjb25zdCBib3JkZXJUb3AgPSBwYXJzZUludChmcmFtZVN0eWxlLmJvcmRlclRvcFdpZHRoIGFzIHN0cmluZywgMTApXG4gICAgY29uc3QgYm9yZGVyUmlnaHQgPSBwYXJzZUludChmcmFtZVN0eWxlLmJvcmRlclJpZ2h0V2lkdGggYXMgc3RyaW5nLCAxMClcbiAgICBjb25zdCBib3JkZXJCb3R0b20gPSBwYXJzZUludChmcmFtZVN0eWxlLmJvcmRlckJvdHRvbVdpZHRoIGFzIHN0cmluZywgMTApXG5cbiAgICBsZXQgYmxvY2tTY3JvbGw6IG51bWJlciA9IDBcbiAgICBsZXQgaW5saW5lU2Nyb2xsOiBudW1iZXIgPSAwXG5cbiAgICAvLyBUaGUgcHJvcGVydHkgZXhpc3RhbmNlIGNoZWNrcyBmb3Igb2ZmZnNldFtXaWR0aHxIZWlnaHRdIGlzIGJlY2F1c2Ugb25seSBIVE1MRWxlbWVudCBvYmplY3RzIGhhdmUgdGhlbSwgYnV0IGFueSBFbGVtZW50IG1pZ2h0IHBhc3MgYnkgaGVyZVxuICAgIC8vIEBUT0RPIGZpbmQgb3V0IGlmIHRoZSBcImFzIEhUTUxFbGVtZW50XCIgb3ZlcnJpZGVzIGNhbiBiZSBkcm9wcGVkXG4gICAgY29uc3Qgc2Nyb2xsYmFyV2lkdGggPVxuICAgICAgJ29mZnNldFdpZHRoJyBpbiBmcmFtZVxuICAgICAgICA/IChmcmFtZSBhcyBIVE1MRWxlbWVudCkub2Zmc2V0V2lkdGggLVxuICAgICAgICAgIChmcmFtZSBhcyBIVE1MRWxlbWVudCkuY2xpZW50V2lkdGggLVxuICAgICAgICAgIGJvcmRlckxlZnQgLVxuICAgICAgICAgIGJvcmRlclJpZ2h0XG4gICAgICAgIDogMFxuICAgIGNvbnN0IHNjcm9sbGJhckhlaWdodCA9XG4gICAgICAnb2Zmc2V0SGVpZ2h0JyBpbiBmcmFtZVxuICAgICAgICA/IChmcmFtZSBhcyBIVE1MRWxlbWVudCkub2Zmc2V0SGVpZ2h0IC1cbiAgICAgICAgICAoZnJhbWUgYXMgSFRNTEVsZW1lbnQpLmNsaWVudEhlaWdodCAtXG4gICAgICAgICAgYm9yZGVyVG9wIC1cbiAgICAgICAgICBib3JkZXJCb3R0b21cbiAgICAgICAgOiAwXG5cbiAgICBjb25zdCBzY2FsZVggPVxuICAgICAgJ29mZnNldFdpZHRoJyBpbiBmcmFtZVxuICAgICAgICA/IChmcmFtZSBhcyBIVE1MRWxlbWVudCkub2Zmc2V0V2lkdGggPT09IDBcbiAgICAgICAgICA/IDBcbiAgICAgICAgICA6IHdpZHRoIC8gKGZyYW1lIGFzIEhUTUxFbGVtZW50KS5vZmZzZXRXaWR0aFxuICAgICAgICA6IDBcbiAgICBjb25zdCBzY2FsZVkgPVxuICAgICAgJ29mZnNldEhlaWdodCcgaW4gZnJhbWVcbiAgICAgICAgPyAoZnJhbWUgYXMgSFRNTEVsZW1lbnQpLm9mZnNldEhlaWdodCA9PT0gMFxuICAgICAgICAgID8gMFxuICAgICAgICAgIDogaGVpZ2h0IC8gKGZyYW1lIGFzIEhUTUxFbGVtZW50KS5vZmZzZXRIZWlnaHRcbiAgICAgICAgOiAwXG5cbiAgICBpZiAoc2Nyb2xsaW5nRWxlbWVudCA9PT0gZnJhbWUpIHtcbiAgICAgIC8vIEhhbmRsZSB2aWV3cG9ydCBsb2dpYyAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IG9yIGRvY3VtZW50LmJvZHkpXG5cbiAgICAgIGlmIChibG9jayA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICBibG9ja1Njcm9sbCA9IHRhcmdldEJsb2NrXG4gICAgICB9IGVsc2UgaWYgKGJsb2NrID09PSAnZW5kJykge1xuICAgICAgICBibG9ja1Njcm9sbCA9IHRhcmdldEJsb2NrIC0gdmlld3BvcnRIZWlnaHRcbiAgICAgIH0gZWxzZSBpZiAoYmxvY2sgPT09ICduZWFyZXN0Jykge1xuICAgICAgICBibG9ja1Njcm9sbCA9IGFsaWduTmVhcmVzdChcbiAgICAgICAgICB2aWV3cG9ydFksXG4gICAgICAgICAgdmlld3BvcnRZICsgdmlld3BvcnRIZWlnaHQsXG4gICAgICAgICAgdmlld3BvcnRIZWlnaHQsXG4gICAgICAgICAgYm9yZGVyVG9wLFxuICAgICAgICAgIGJvcmRlckJvdHRvbSxcbiAgICAgICAgICB2aWV3cG9ydFkgKyB0YXJnZXRCbG9jayxcbiAgICAgICAgICB2aWV3cG9ydFkgKyB0YXJnZXRCbG9jayArIHRhcmdldEhlaWdodCxcbiAgICAgICAgICB0YXJnZXRIZWlnaHRcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYmxvY2sgPT09ICdjZW50ZXInIGlzIHRoZSBkZWZhdWx0XG4gICAgICAgIGJsb2NrU2Nyb2xsID0gdGFyZ2V0QmxvY2sgLSB2aWV3cG9ydEhlaWdodCAvIDJcbiAgICAgIH1cblxuICAgICAgaWYgKGlubGluZSA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICBpbmxpbmVTY3JvbGwgPSB0YXJnZXRJbmxpbmVcbiAgICAgIH0gZWxzZSBpZiAoaW5saW5lID09PSAnY2VudGVyJykge1xuICAgICAgICBpbmxpbmVTY3JvbGwgPSB0YXJnZXRJbmxpbmUgLSB2aWV3cG9ydFdpZHRoIC8gMlxuICAgICAgfSBlbHNlIGlmIChpbmxpbmUgPT09ICdlbmQnKSB7XG4gICAgICAgIGlubGluZVNjcm9sbCA9IHRhcmdldElubGluZSAtIHZpZXdwb3J0V2lkdGhcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlubGluZSA9PT0gJ25lYXJlc3QnIGlzIHRoZSBkZWZhdWx0XG4gICAgICAgIGlubGluZVNjcm9sbCA9IGFsaWduTmVhcmVzdChcbiAgICAgICAgICB2aWV3cG9ydFgsXG4gICAgICAgICAgdmlld3BvcnRYICsgdmlld3BvcnRXaWR0aCxcbiAgICAgICAgICB2aWV3cG9ydFdpZHRoLFxuICAgICAgICAgIGJvcmRlckxlZnQsXG4gICAgICAgICAgYm9yZGVyUmlnaHQsXG4gICAgICAgICAgdmlld3BvcnRYICsgdGFyZ2V0SW5saW5lLFxuICAgICAgICAgIHZpZXdwb3J0WCArIHRhcmdldElubGluZSArIHRhcmdldFdpZHRoLFxuICAgICAgICAgIHRhcmdldFdpZHRoXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgLy8gQXBwbHkgc2Nyb2xsIHBvc2l0aW9uIG9mZnNldHMgYW5kIGVuc3VyZSB0aGV5IGFyZSB3aXRoaW4gYm91bmRzXG4gICAgICAvLyBAVE9ETyBhZGQgbW9yZSB0ZXN0IGNhc2VzIHRvIGNvdmVyIHRoaXMgMTAwJVxuICAgICAgYmxvY2tTY3JvbGwgPSBNYXRoLm1heCgwLCBibG9ja1Njcm9sbCArIHZpZXdwb3J0WSlcbiAgICAgIGlubGluZVNjcm9sbCA9IE1hdGgubWF4KDAsIGlubGluZVNjcm9sbCArIHZpZXdwb3J0WClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSGFuZGxlIGVhY2ggc2Nyb2xsaW5nIGZyYW1lIHRoYXQgbWlnaHQgZXhpc3QgYmV0d2VlbiB0aGUgdGFyZ2V0IGFuZCB0aGUgdmlld3BvcnRcblxuICAgICAgaWYgKGJsb2NrID09PSAnc3RhcnQnKSB7XG4gICAgICAgIGJsb2NrU2Nyb2xsID0gdGFyZ2V0QmxvY2sgLSB0b3AgLSBib3JkZXJUb3BcbiAgICAgIH0gZWxzZSBpZiAoYmxvY2sgPT09ICdlbmQnKSB7XG4gICAgICAgIGJsb2NrU2Nyb2xsID0gdGFyZ2V0QmxvY2sgLSBib3R0b20gKyBib3JkZXJCb3R0b20gKyBzY3JvbGxiYXJIZWlnaHRcbiAgICAgIH0gZWxzZSBpZiAoYmxvY2sgPT09ICduZWFyZXN0Jykge1xuICAgICAgICBibG9ja1Njcm9sbCA9IGFsaWduTmVhcmVzdChcbiAgICAgICAgICB0b3AsXG4gICAgICAgICAgYm90dG9tLFxuICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICBib3JkZXJUb3AsXG4gICAgICAgICAgYm9yZGVyQm90dG9tICsgc2Nyb2xsYmFySGVpZ2h0LFxuICAgICAgICAgIHRhcmdldEJsb2NrLFxuICAgICAgICAgIHRhcmdldEJsb2NrICsgdGFyZ2V0SGVpZ2h0LFxuICAgICAgICAgIHRhcmdldEhlaWdodFxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBibG9jayA9PT0gJ2NlbnRlcicgaXMgdGhlIGRlZmF1bHRcbiAgICAgICAgYmxvY2tTY3JvbGwgPSB0YXJnZXRCbG9jayAtICh0b3AgKyBoZWlnaHQgLyAyKSArIHNjcm9sbGJhckhlaWdodCAvIDJcbiAgICAgIH1cblxuICAgICAgaWYgKGlubGluZSA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICBpbmxpbmVTY3JvbGwgPSB0YXJnZXRJbmxpbmUgLSBsZWZ0IC0gYm9yZGVyTGVmdFxuICAgICAgfSBlbHNlIGlmIChpbmxpbmUgPT09ICdjZW50ZXInKSB7XG4gICAgICAgIGlubGluZVNjcm9sbCA9IHRhcmdldElubGluZSAtIChsZWZ0ICsgd2lkdGggLyAyKSArIHNjcm9sbGJhcldpZHRoIC8gMlxuICAgICAgfSBlbHNlIGlmIChpbmxpbmUgPT09ICdlbmQnKSB7XG4gICAgICAgIGlubGluZVNjcm9sbCA9IHRhcmdldElubGluZSAtIHJpZ2h0ICsgYm9yZGVyUmlnaHQgKyBzY3JvbGxiYXJXaWR0aFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaW5saW5lID09PSAnbmVhcmVzdCcgaXMgdGhlIGRlZmF1bHRcbiAgICAgICAgaW5saW5lU2Nyb2xsID0gYWxpZ25OZWFyZXN0KFxuICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgcmlnaHQsXG4gICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgYm9yZGVyTGVmdCxcbiAgICAgICAgICBib3JkZXJSaWdodCArIHNjcm9sbGJhcldpZHRoLFxuICAgICAgICAgIHRhcmdldElubGluZSxcbiAgICAgICAgICB0YXJnZXRJbmxpbmUgKyB0YXJnZXRXaWR0aCxcbiAgICAgICAgICB0YXJnZXRXaWR0aFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgc2Nyb2xsTGVmdCwgc2Nyb2xsVG9wIH0gPSBmcmFtZVxuICAgICAgLy8gRW5zdXJlIHNjcm9sbCBjb29yZGluYXRlcyBhcmUgbm90IG91dCBvZiBib3VuZHMgd2hpbGUgYXBwbHlpbmcgc2Nyb2xsIG9mZnNldHNcbiAgICAgIGJsb2NrU2Nyb2xsID0gTWF0aC5tYXgoXG4gICAgICAgIDAsXG4gICAgICAgIE1hdGgubWluKFxuICAgICAgICAgIHNjcm9sbFRvcCArIGJsb2NrU2Nyb2xsIC8gc2NhbGVZLFxuICAgICAgICAgIGZyYW1lLnNjcm9sbEhlaWdodCAtIGhlaWdodCAvIHNjYWxlWSArIHNjcm9sbGJhckhlaWdodFxuICAgICAgICApXG4gICAgICApXG4gICAgICBpbmxpbmVTY3JvbGwgPSBNYXRoLm1heChcbiAgICAgICAgMCxcbiAgICAgICAgTWF0aC5taW4oXG4gICAgICAgICAgc2Nyb2xsTGVmdCArIGlubGluZVNjcm9sbCAvIHNjYWxlWCxcbiAgICAgICAgICBmcmFtZS5zY3JvbGxXaWR0aCAtIHdpZHRoIC8gc2NhbGVYICsgc2Nyb2xsYmFyV2lkdGhcbiAgICAgICAgKVxuICAgICAgKVxuXG4gICAgICAvLyBDYWNoZSB0aGUgb2Zmc2V0IHNvIHRoYXQgcGFyZW50IGZyYW1lcyBjYW4gc2Nyb2xsIHRoaXMgaW50byB2aWV3IGNvcnJlY3RseVxuICAgICAgdGFyZ2V0QmxvY2sgKz0gc2Nyb2xsVG9wIC0gYmxvY2tTY3JvbGxcbiAgICAgIHRhcmdldElubGluZSArPSBzY3JvbGxMZWZ0IC0gaW5saW5lU2Nyb2xsXG4gICAgfVxuXG4gICAgY29tcHV0YXRpb25zLnB1c2goeyBlbDogZnJhbWUsIHRvcDogYmxvY2tTY3JvbGwsIGxlZnQ6IGlubGluZVNjcm9sbCB9KVxuICB9XG5cbiAgcmV0dXJuIGNvbXB1dGF0aW9uc1xufVxuIiwgImltcG9ydCBjb21wdXRlIGZyb20gJ2NvbXB1dGUtc2Nyb2xsLWludG8tdmlldyc7XG5mdW5jdGlvbiBpc09wdGlvbnNPYmplY3Qob3B0aW9ucykge1xuICByZXR1cm4gb3B0aW9ucyA9PT0gT2JqZWN0KG9wdGlvbnMpICYmIE9iamVjdC5rZXlzKG9wdGlvbnMpLmxlbmd0aCAhPT0gMDtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRCZWhhdmlvcihhY3Rpb25zLCBiZWhhdmlvcikge1xuICBpZiAoYmVoYXZpb3IgPT09IHZvaWQgMCkge1xuICAgIGJlaGF2aW9yID0gJ2F1dG8nO1xuICB9XG4gIHZhciBjYW5TbW9vdGhTY3JvbGwgPSAoJ3Njcm9sbEJlaGF2aW9yJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlKTtcbiAgYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgdmFyIGVsID0gX3JlZi5lbCxcbiAgICAgIHRvcCA9IF9yZWYudG9wLFxuICAgICAgbGVmdCA9IF9yZWYubGVmdDtcbiAgICBpZiAoZWwuc2Nyb2xsICYmIGNhblNtb290aFNjcm9sbCkge1xuICAgICAgZWwuc2Nyb2xsKHtcbiAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgIGxlZnQ6IGxlZnQsXG4gICAgICAgIGJlaGF2aW9yOiBiZWhhdmlvclxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnNjcm9sbFRvcCA9IHRvcDtcbiAgICAgIGVsLnNjcm9sbExlZnQgPSBsZWZ0O1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJsb2NrOiAnZW5kJyxcbiAgICAgIGlubGluZTogJ25lYXJlc3QnXG4gICAgfTtcbiAgfVxuICBpZiAoaXNPcHRpb25zT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBibG9jazogJ3N0YXJ0JyxcbiAgICBpbmxpbmU6ICduZWFyZXN0J1xuICB9O1xufVxuZnVuY3Rpb24gc2Nyb2xsSW50b1ZpZXcodGFyZ2V0LCBvcHRpb25zKSB7XG4gIHZhciBpc1RhcmdldEF0dGFjaGVkID0gdGFyZ2V0LmlzQ29ubmVjdGVkIHx8IHRhcmdldC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyh0YXJnZXQpO1xuICBpZiAoaXNPcHRpb25zT2JqZWN0KG9wdGlvbnMpICYmIHR5cGVvZiBvcHRpb25zLmJlaGF2aW9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMuYmVoYXZpb3IoaXNUYXJnZXRBdHRhY2hlZCA/IGNvbXB1dGUodGFyZ2V0LCBvcHRpb25zKSA6IFtdKTtcbiAgfVxuICBpZiAoIWlzVGFyZ2V0QXR0YWNoZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGNvbXB1dGVPcHRpb25zID0gZ2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgcmV0dXJuIGRlZmF1bHRCZWhhdmlvcihjb21wdXRlKHRhcmdldCwgY29tcHV0ZU9wdGlvbnMpLCBjb21wdXRlT3B0aW9ucy5iZWhhdmlvcik7XG59XG5leHBvcnQgZGVmYXVsdCBzY3JvbGxJbnRvVmlldzsiLCAidmFyIHJlc2l6ZU9ic2VydmVycyA9IFtdO1xuZXhwb3J0IHsgcmVzaXplT2JzZXJ2ZXJzIH07XG4iLCAiaW1wb3J0IHsgcmVzaXplT2JzZXJ2ZXJzIH0gZnJvbSAnLi4vdXRpbHMvcmVzaXplT2JzZXJ2ZXJzJztcbnZhciBoYXNBY3RpdmVPYnNlcnZhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHJlc2l6ZU9ic2VydmVycy5zb21lKGZ1bmN0aW9uIChybykgeyByZXR1cm4gcm8uYWN0aXZlVGFyZ2V0cy5sZW5ndGggPiAwOyB9KTtcbn07XG5leHBvcnQgeyBoYXNBY3RpdmVPYnNlcnZhdGlvbnMgfTtcbiIsICJpbXBvcnQgeyByZXNpemVPYnNlcnZlcnMgfSBmcm9tICcuLi91dGlscy9yZXNpemVPYnNlcnZlcnMnO1xudmFyIGhhc1NraXBwZWRPYnNlcnZhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHJlc2l6ZU9ic2VydmVycy5zb21lKGZ1bmN0aW9uIChybykgeyByZXR1cm4gcm8uc2tpcHBlZFRhcmdldHMubGVuZ3RoID4gMDsgfSk7XG59O1xuZXhwb3J0IHsgaGFzU2tpcHBlZE9ic2VydmF0aW9ucyB9O1xuIiwgInZhciBtc2cgPSAnUmVzaXplT2JzZXJ2ZXIgbG9vcCBjb21wbGV0ZWQgd2l0aCB1bmRlbGl2ZXJlZCBub3RpZmljYXRpb25zLic7XG52YXIgZGVsaXZlclJlc2l6ZUxvb3BFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXZlbnQ7XG4gICAgaWYgKHR5cGVvZiBFcnJvckV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGV2ZW50ID0gbmV3IEVycm9yRXZlbnQoJ2Vycm9yJywge1xuICAgICAgICAgICAgbWVzc2FnZTogbXNnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICAgICAgZXZlbnQuaW5pdEV2ZW50KCdlcnJvcicsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgIGV2ZW50Lm1lc3NhZ2UgPSBtc2c7XG4gICAgfVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbn07XG5leHBvcnQgeyBkZWxpdmVyUmVzaXplTG9vcEVycm9yIH07XG4iLCAidmFyIFJlc2l6ZU9ic2VydmVyQm94T3B0aW9ucztcbihmdW5jdGlvbiAoUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zKSB7XG4gICAgUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zW1wiQk9SREVSX0JPWFwiXSA9IFwiYm9yZGVyLWJveFwiO1xuICAgIFJlc2l6ZU9ic2VydmVyQm94T3B0aW9uc1tcIkNPTlRFTlRfQk9YXCJdID0gXCJjb250ZW50LWJveFwiO1xuICAgIFJlc2l6ZU9ic2VydmVyQm94T3B0aW9uc1tcIkRFVklDRV9QSVhFTF9DT05URU5UX0JPWFwiXSA9IFwiZGV2aWNlLXBpeGVsLWNvbnRlbnQtYm94XCI7XG59KShSZXNpemVPYnNlcnZlckJveE9wdGlvbnMgfHwgKFJlc2l6ZU9ic2VydmVyQm94T3B0aW9ucyA9IHt9KSk7XG5leHBvcnQgeyBSZXNpemVPYnNlcnZlckJveE9wdGlvbnMgfTtcbiIsICJleHBvcnQgdmFyIGZyZWV6ZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIE9iamVjdC5mcmVlemUob2JqKTsgfTtcbiIsICJpbXBvcnQgeyBmcmVlemUgfSBmcm9tICcuL3V0aWxzL2ZyZWV6ZSc7XG52YXIgUmVzaXplT2JzZXJ2ZXJTaXplID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXNpemVPYnNlcnZlclNpemUoaW5saW5lU2l6ZSwgYmxvY2tTaXplKSB7XG4gICAgICAgIHRoaXMuaW5saW5lU2l6ZSA9IGlubGluZVNpemU7XG4gICAgICAgIHRoaXMuYmxvY2tTaXplID0gYmxvY2tTaXplO1xuICAgICAgICBmcmVlemUodGhpcyk7XG4gICAgfVxuICAgIHJldHVybiBSZXNpemVPYnNlcnZlclNpemU7XG59KCkpO1xuZXhwb3J0IHsgUmVzaXplT2JzZXJ2ZXJTaXplIH07XG4iLCAiaW1wb3J0IHsgZnJlZXplIH0gZnJvbSAnLi91dGlscy9mcmVlemUnO1xudmFyIERPTVJlY3RSZWFkT25seSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRE9NUmVjdFJlYWRPbmx5KHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy50b3AgPSB0aGlzLnk7XG4gICAgICAgIHRoaXMubGVmdCA9IHRoaXMueDtcbiAgICAgICAgdGhpcy5ib3R0b20gPSB0aGlzLnRvcCArIHRoaXMuaGVpZ2h0O1xuICAgICAgICB0aGlzLnJpZ2h0ID0gdGhpcy5sZWZ0ICsgdGhpcy53aWR0aDtcbiAgICAgICAgcmV0dXJuIGZyZWV6ZSh0aGlzKTtcbiAgICB9XG4gICAgRE9NUmVjdFJlYWRPbmx5LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHggPSBfYS54LCB5ID0gX2EueSwgdG9wID0gX2EudG9wLCByaWdodCA9IF9hLnJpZ2h0LCBib3R0b20gPSBfYS5ib3R0b20sIGxlZnQgPSBfYS5sZWZ0LCB3aWR0aCA9IF9hLndpZHRoLCBoZWlnaHQgPSBfYS5oZWlnaHQ7XG4gICAgICAgIHJldHVybiB7IHg6IHgsIHk6IHksIHRvcDogdG9wLCByaWdodDogcmlnaHQsIGJvdHRvbTogYm90dG9tLCBsZWZ0OiBsZWZ0LCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH07XG4gICAgfTtcbiAgICBET01SZWN0UmVhZE9ubHkuZnJvbVJlY3QgPSBmdW5jdGlvbiAocmVjdGFuZ2xlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRE9NUmVjdFJlYWRPbmx5KHJlY3RhbmdsZS54LCByZWN0YW5nbGUueSwgcmVjdGFuZ2xlLndpZHRoLCByZWN0YW5nbGUuaGVpZ2h0KTtcbiAgICB9O1xuICAgIHJldHVybiBET01SZWN0UmVhZE9ubHk7XG59KCkpO1xuZXhwb3J0IHsgRE9NUmVjdFJlYWRPbmx5IH07XG4iLCAidmFyIGlzU1ZHID0gZnVuY3Rpb24gKHRhcmdldCkgeyByZXR1cm4gdGFyZ2V0IGluc3RhbmNlb2YgU1ZHRWxlbWVudCAmJiAnZ2V0QkJveCcgaW4gdGFyZ2V0OyB9O1xudmFyIGlzSGlkZGVuID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGlmIChpc1NWRyh0YXJnZXQpKSB7XG4gICAgICAgIHZhciBfYSA9IHRhcmdldC5nZXRCQm94KCksIHdpZHRoID0gX2Eud2lkdGgsIGhlaWdodCA9IF9hLmhlaWdodDtcbiAgICAgICAgcmV0dXJuICF3aWR0aCAmJiAhaGVpZ2h0O1xuICAgIH1cbiAgICB2YXIgX2IgPSB0YXJnZXQsIG9mZnNldFdpZHRoID0gX2Iub2Zmc2V0V2lkdGgsIG9mZnNldEhlaWdodCA9IF9iLm9mZnNldEhlaWdodDtcbiAgICByZXR1cm4gIShvZmZzZXRXaWR0aCB8fCBvZmZzZXRIZWlnaHQgfHwgdGFyZ2V0LmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTtcbn07XG52YXIgaXNFbGVtZW50ID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHZhciBfYTtcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIHNjb3BlID0gKF9hID0gb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLm93bmVyRG9jdW1lbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZWZhdWx0VmlldztcbiAgICByZXR1cm4gISEoc2NvcGUgJiYgb2JqIGluc3RhbmNlb2Ygc2NvcGUuRWxlbWVudCk7XG59O1xudmFyIGlzUmVwbGFjZWRFbGVtZW50ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIHN3aXRjaCAodGFyZ2V0LnRhZ05hbWUpIHtcbiAgICAgICAgY2FzZSAnSU5QVVQnOlxuICAgICAgICAgICAgaWYgKHRhcmdldC50eXBlICE9PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIGNhc2UgJ1ZJREVPJzpcbiAgICAgICAgY2FzZSAnQVVESU8nOlxuICAgICAgICBjYXNlICdFTUJFRCc6XG4gICAgICAgIGNhc2UgJ09CSkVDVCc6XG4gICAgICAgIGNhc2UgJ0NBTlZBUyc6XG4gICAgICAgIGNhc2UgJ0lGUkFNRSc6XG4gICAgICAgIGNhc2UgJ0lNRyc6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbmV4cG9ydCB7IGlzU1ZHLCBpc0hpZGRlbiwgaXNFbGVtZW50LCBpc1JlcGxhY2VkRWxlbWVudCB9O1xuIiwgImV4cG9ydCB2YXIgZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB7fTtcbiIsICJpbXBvcnQgeyBSZXNpemVPYnNlcnZlckJveE9wdGlvbnMgfSBmcm9tICcuLi9SZXNpemVPYnNlcnZlckJveE9wdGlvbnMnO1xuaW1wb3J0IHsgUmVzaXplT2JzZXJ2ZXJTaXplIH0gZnJvbSAnLi4vUmVzaXplT2JzZXJ2ZXJTaXplJztcbmltcG9ydCB7IERPTVJlY3RSZWFkT25seSB9IGZyb20gJy4uL0RPTVJlY3RSZWFkT25seSc7XG5pbXBvcnQgeyBpc1NWRywgaXNIaWRkZW4gfSBmcm9tICcuLi91dGlscy9lbGVtZW50JztcbmltcG9ydCB7IGZyZWV6ZSB9IGZyb20gJy4uL3V0aWxzL2ZyZWV6ZSc7XG5pbXBvcnQgeyBnbG9iYWwgfSBmcm9tICcuLi91dGlscy9nbG9iYWwnO1xudmFyIGNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbnZhciBzY3JvbGxSZWdleHAgPSAvYXV0b3xzY3JvbGwvO1xudmFyIHZlcnRpY2FsUmVnZXhwID0gL150Ynx2ZXJ0aWNhbC87XG52YXIgSUUgPSAoL21zaWV8dHJpZGVudC9pKS50ZXN0KGdsb2JhbC5uYXZpZ2F0b3IgJiYgZ2xvYmFsLm5hdmlnYXRvci51c2VyQWdlbnQpO1xudmFyIHBhcnNlRGltZW5zaW9uID0gZnVuY3Rpb24gKHBpeGVsKSB7IHJldHVybiBwYXJzZUZsb2F0KHBpeGVsIHx8ICcwJyk7IH07XG52YXIgc2l6ZSA9IGZ1bmN0aW9uIChpbmxpbmVTaXplLCBibG9ja1NpemUsIHN3aXRjaFNpemVzKSB7XG4gICAgaWYgKGlubGluZVNpemUgPT09IHZvaWQgMCkgeyBpbmxpbmVTaXplID0gMDsgfVxuICAgIGlmIChibG9ja1NpemUgPT09IHZvaWQgMCkgeyBibG9ja1NpemUgPSAwOyB9XG4gICAgaWYgKHN3aXRjaFNpemVzID09PSB2b2lkIDApIHsgc3dpdGNoU2l6ZXMgPSBmYWxzZTsgfVxuICAgIHJldHVybiBuZXcgUmVzaXplT2JzZXJ2ZXJTaXplKChzd2l0Y2hTaXplcyA/IGJsb2NrU2l6ZSA6IGlubGluZVNpemUpIHx8IDAsIChzd2l0Y2hTaXplcyA/IGlubGluZVNpemUgOiBibG9ja1NpemUpIHx8IDApO1xufTtcbnZhciB6ZXJvQm94ZXMgPSBmcmVlemUoe1xuICAgIGRldmljZVBpeGVsQ29udGVudEJveFNpemU6IHNpemUoKSxcbiAgICBib3JkZXJCb3hTaXplOiBzaXplKCksXG4gICAgY29udGVudEJveFNpemU6IHNpemUoKSxcbiAgICBjb250ZW50UmVjdDogbmV3IERPTVJlY3RSZWFkT25seSgwLCAwLCAwLCAwKVxufSk7XG52YXIgY2FsY3VsYXRlQm94U2l6ZXMgPSBmdW5jdGlvbiAodGFyZ2V0LCBmb3JjZVJlY2FsY3VsYXRpb24pIHtcbiAgICBpZiAoZm9yY2VSZWNhbGN1bGF0aW9uID09PSB2b2lkIDApIHsgZm9yY2VSZWNhbGN1bGF0aW9uID0gZmFsc2U7IH1cbiAgICBpZiAoY2FjaGUuaGFzKHRhcmdldCkgJiYgIWZvcmNlUmVjYWxjdWxhdGlvbikge1xuICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KHRhcmdldCk7XG4gICAgfVxuICAgIGlmIChpc0hpZGRlbih0YXJnZXQpKSB7XG4gICAgICAgIGNhY2hlLnNldCh0YXJnZXQsIHplcm9Cb3hlcyk7XG4gICAgICAgIHJldHVybiB6ZXJvQm94ZXM7XG4gICAgfVxuICAgIHZhciBjcyA9IGdldENvbXB1dGVkU3R5bGUodGFyZ2V0KTtcbiAgICB2YXIgc3ZnID0gaXNTVkcodGFyZ2V0KSAmJiB0YXJnZXQub3duZXJTVkdFbGVtZW50ICYmIHRhcmdldC5nZXRCQm94KCk7XG4gICAgdmFyIHJlbW92ZVBhZGRpbmcgPSAhSUUgJiYgY3MuYm94U2l6aW5nID09PSAnYm9yZGVyLWJveCc7XG4gICAgdmFyIHN3aXRjaFNpemVzID0gdmVydGljYWxSZWdleHAudGVzdChjcy53cml0aW5nTW9kZSB8fCAnJyk7XG4gICAgdmFyIGNhblNjcm9sbFZlcnRpY2FsbHkgPSAhc3ZnICYmIHNjcm9sbFJlZ2V4cC50ZXN0KGNzLm92ZXJmbG93WSB8fCAnJyk7XG4gICAgdmFyIGNhblNjcm9sbEhvcml6b250YWxseSA9ICFzdmcgJiYgc2Nyb2xsUmVnZXhwLnRlc3QoY3Mub3ZlcmZsb3dYIHx8ICcnKTtcbiAgICB2YXIgcGFkZGluZ1RvcCA9IHN2ZyA/IDAgOiBwYXJzZURpbWVuc2lvbihjcy5wYWRkaW5nVG9wKTtcbiAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gc3ZnID8gMCA6IHBhcnNlRGltZW5zaW9uKGNzLnBhZGRpbmdSaWdodCk7XG4gICAgdmFyIHBhZGRpbmdCb3R0b20gPSBzdmcgPyAwIDogcGFyc2VEaW1lbnNpb24oY3MucGFkZGluZ0JvdHRvbSk7XG4gICAgdmFyIHBhZGRpbmdMZWZ0ID0gc3ZnID8gMCA6IHBhcnNlRGltZW5zaW9uKGNzLnBhZGRpbmdMZWZ0KTtcbiAgICB2YXIgYm9yZGVyVG9wID0gc3ZnID8gMCA6IHBhcnNlRGltZW5zaW9uKGNzLmJvcmRlclRvcFdpZHRoKTtcbiAgICB2YXIgYm9yZGVyUmlnaHQgPSBzdmcgPyAwIDogcGFyc2VEaW1lbnNpb24oY3MuYm9yZGVyUmlnaHRXaWR0aCk7XG4gICAgdmFyIGJvcmRlckJvdHRvbSA9IHN2ZyA/IDAgOiBwYXJzZURpbWVuc2lvbihjcy5ib3JkZXJCb3R0b21XaWR0aCk7XG4gICAgdmFyIGJvcmRlckxlZnQgPSBzdmcgPyAwIDogcGFyc2VEaW1lbnNpb24oY3MuYm9yZGVyTGVmdFdpZHRoKTtcbiAgICB2YXIgaG9yaXpvbnRhbFBhZGRpbmcgPSBwYWRkaW5nTGVmdCArIHBhZGRpbmdSaWdodDtcbiAgICB2YXIgdmVydGljYWxQYWRkaW5nID0gcGFkZGluZ1RvcCArIHBhZGRpbmdCb3R0b207XG4gICAgdmFyIGhvcml6b250YWxCb3JkZXJBcmVhID0gYm9yZGVyTGVmdCArIGJvcmRlclJpZ2h0O1xuICAgIHZhciB2ZXJ0aWNhbEJvcmRlckFyZWEgPSBib3JkZXJUb3AgKyBib3JkZXJCb3R0b207XG4gICAgdmFyIGhvcml6b250YWxTY3JvbGxiYXJUaGlja25lc3MgPSAhY2FuU2Nyb2xsSG9yaXpvbnRhbGx5ID8gMCA6IHRhcmdldC5vZmZzZXRIZWlnaHQgLSB2ZXJ0aWNhbEJvcmRlckFyZWEgLSB0YXJnZXQuY2xpZW50SGVpZ2h0O1xuICAgIHZhciB2ZXJ0aWNhbFNjcm9sbGJhclRoaWNrbmVzcyA9ICFjYW5TY3JvbGxWZXJ0aWNhbGx5ID8gMCA6IHRhcmdldC5vZmZzZXRXaWR0aCAtIGhvcml6b250YWxCb3JkZXJBcmVhIC0gdGFyZ2V0LmNsaWVudFdpZHRoO1xuICAgIHZhciB3aWR0aFJlZHVjdGlvbiA9IHJlbW92ZVBhZGRpbmcgPyBob3Jpem9udGFsUGFkZGluZyArIGhvcml6b250YWxCb3JkZXJBcmVhIDogMDtcbiAgICB2YXIgaGVpZ2h0UmVkdWN0aW9uID0gcmVtb3ZlUGFkZGluZyA/IHZlcnRpY2FsUGFkZGluZyArIHZlcnRpY2FsQm9yZGVyQXJlYSA6IDA7XG4gICAgdmFyIGNvbnRlbnRXaWR0aCA9IHN2ZyA/IHN2Zy53aWR0aCA6IHBhcnNlRGltZW5zaW9uKGNzLndpZHRoKSAtIHdpZHRoUmVkdWN0aW9uIC0gdmVydGljYWxTY3JvbGxiYXJUaGlja25lc3M7XG4gICAgdmFyIGNvbnRlbnRIZWlnaHQgPSBzdmcgPyBzdmcuaGVpZ2h0IDogcGFyc2VEaW1lbnNpb24oY3MuaGVpZ2h0KSAtIGhlaWdodFJlZHVjdGlvbiAtIGhvcml6b250YWxTY3JvbGxiYXJUaGlja25lc3M7XG4gICAgdmFyIGJvcmRlckJveFdpZHRoID0gY29udGVudFdpZHRoICsgaG9yaXpvbnRhbFBhZGRpbmcgKyB2ZXJ0aWNhbFNjcm9sbGJhclRoaWNrbmVzcyArIGhvcml6b250YWxCb3JkZXJBcmVhO1xuICAgIHZhciBib3JkZXJCb3hIZWlnaHQgPSBjb250ZW50SGVpZ2h0ICsgdmVydGljYWxQYWRkaW5nICsgaG9yaXpvbnRhbFNjcm9sbGJhclRoaWNrbmVzcyArIHZlcnRpY2FsQm9yZGVyQXJlYTtcbiAgICB2YXIgYm94ZXMgPSBmcmVlemUoe1xuICAgICAgICBkZXZpY2VQaXhlbENvbnRlbnRCb3hTaXplOiBzaXplKE1hdGgucm91bmQoY29udGVudFdpZHRoICogZGV2aWNlUGl4ZWxSYXRpbyksIE1hdGgucm91bmQoY29udGVudEhlaWdodCAqIGRldmljZVBpeGVsUmF0aW8pLCBzd2l0Y2hTaXplcyksXG4gICAgICAgIGJvcmRlckJveFNpemU6IHNpemUoYm9yZGVyQm94V2lkdGgsIGJvcmRlckJveEhlaWdodCwgc3dpdGNoU2l6ZXMpLFxuICAgICAgICBjb250ZW50Qm94U2l6ZTogc2l6ZShjb250ZW50V2lkdGgsIGNvbnRlbnRIZWlnaHQsIHN3aXRjaFNpemVzKSxcbiAgICAgICAgY29udGVudFJlY3Q6IG5ldyBET01SZWN0UmVhZE9ubHkocGFkZGluZ0xlZnQsIHBhZGRpbmdUb3AsIGNvbnRlbnRXaWR0aCwgY29udGVudEhlaWdodClcbiAgICB9KTtcbiAgICBjYWNoZS5zZXQodGFyZ2V0LCBib3hlcyk7XG4gICAgcmV0dXJuIGJveGVzO1xufTtcbnZhciBjYWxjdWxhdGVCb3hTaXplID0gZnVuY3Rpb24gKHRhcmdldCwgb2JzZXJ2ZWRCb3gsIGZvcmNlUmVjYWxjdWxhdGlvbikge1xuICAgIHZhciBfYSA9IGNhbGN1bGF0ZUJveFNpemVzKHRhcmdldCwgZm9yY2VSZWNhbGN1bGF0aW9uKSwgYm9yZGVyQm94U2l6ZSA9IF9hLmJvcmRlckJveFNpemUsIGNvbnRlbnRCb3hTaXplID0gX2EuY29udGVudEJveFNpemUsIGRldmljZVBpeGVsQ29udGVudEJveFNpemUgPSBfYS5kZXZpY2VQaXhlbENvbnRlbnRCb3hTaXplO1xuICAgIHN3aXRjaCAob2JzZXJ2ZWRCb3gpIHtcbiAgICAgICAgY2FzZSBSZXNpemVPYnNlcnZlckJveE9wdGlvbnMuREVWSUNFX1BJWEVMX0NPTlRFTlRfQk9YOlxuICAgICAgICAgICAgcmV0dXJuIGRldmljZVBpeGVsQ29udGVudEJveFNpemU7XG4gICAgICAgIGNhc2UgUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zLkJPUkRFUl9CT1g6XG4gICAgICAgICAgICByZXR1cm4gYm9yZGVyQm94U2l6ZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50Qm94U2l6ZTtcbiAgICB9XG59O1xuZXhwb3J0IHsgY2FsY3VsYXRlQm94U2l6ZSwgY2FsY3VsYXRlQm94U2l6ZXMgfTtcbiIsICJpbXBvcnQgeyBjYWxjdWxhdGVCb3hTaXplcyB9IGZyb20gJy4vYWxnb3JpdGhtcy9jYWxjdWxhdGVCb3hTaXplJztcbmltcG9ydCB7IGZyZWV6ZSB9IGZyb20gJy4vdXRpbHMvZnJlZXplJztcbnZhciBSZXNpemVPYnNlcnZlckVudHJ5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXNpemVPYnNlcnZlckVudHJ5KHRhcmdldCkge1xuICAgICAgICB2YXIgYm94ZXMgPSBjYWxjdWxhdGVCb3hTaXplcyh0YXJnZXQpO1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5jb250ZW50UmVjdCA9IGJveGVzLmNvbnRlbnRSZWN0O1xuICAgICAgICB0aGlzLmJvcmRlckJveFNpemUgPSBmcmVlemUoW2JveGVzLmJvcmRlckJveFNpemVdKTtcbiAgICAgICAgdGhpcy5jb250ZW50Qm94U2l6ZSA9IGZyZWV6ZShbYm94ZXMuY29udGVudEJveFNpemVdKTtcbiAgICAgICAgdGhpcy5kZXZpY2VQaXhlbENvbnRlbnRCb3hTaXplID0gZnJlZXplKFtib3hlcy5kZXZpY2VQaXhlbENvbnRlbnRCb3hTaXplXSk7XG4gICAgfVxuICAgIHJldHVybiBSZXNpemVPYnNlcnZlckVudHJ5O1xufSgpKTtcbmV4cG9ydCB7IFJlc2l6ZU9ic2VydmVyRW50cnkgfTtcbiIsICJpbXBvcnQgeyBpc0hpZGRlbiB9IGZyb20gJy4uL3V0aWxzL2VsZW1lbnQnO1xudmFyIGNhbGN1bGF0ZURlcHRoRm9yTm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgaWYgKGlzSGlkZGVuKG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBJbmZpbml0eTtcbiAgICB9XG4gICAgdmFyIGRlcHRoID0gMDtcbiAgICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgZGVwdGggKz0gMTtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiBkZXB0aDtcbn07XG5leHBvcnQgeyBjYWxjdWxhdGVEZXB0aEZvck5vZGUgfTtcbiIsICJpbXBvcnQgeyByZXNpemVPYnNlcnZlcnMgfSBmcm9tICcuLi91dGlscy9yZXNpemVPYnNlcnZlcnMnO1xuaW1wb3J0IHsgUmVzaXplT2JzZXJ2ZXJFbnRyeSB9IGZyb20gJy4uL1Jlc2l6ZU9ic2VydmVyRW50cnknO1xuaW1wb3J0IHsgY2FsY3VsYXRlRGVwdGhGb3JOb2RlIH0gZnJvbSAnLi9jYWxjdWxhdGVEZXB0aEZvck5vZGUnO1xuaW1wb3J0IHsgY2FsY3VsYXRlQm94U2l6ZSB9IGZyb20gJy4vY2FsY3VsYXRlQm94U2l6ZSc7XG52YXIgYnJvYWRjYXN0QWN0aXZlT2JzZXJ2YXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzaGFsbG93ZXN0RGVwdGggPSBJbmZpbml0eTtcbiAgICB2YXIgY2FsbGJhY2tzID0gW107XG4gICAgcmVzaXplT2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gcHJvY2Vzc09ic2VydmVyKHJvKSB7XG4gICAgICAgIGlmIChyby5hY3RpdmVUYXJnZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbnRyaWVzID0gW107XG4gICAgICAgIHJvLmFjdGl2ZVRhcmdldHMuZm9yRWFjaChmdW5jdGlvbiBwcm9jZXNzVGFyZ2V0KG90KSB7XG4gICAgICAgICAgICB2YXIgZW50cnkgPSBuZXcgUmVzaXplT2JzZXJ2ZXJFbnRyeShvdC50YXJnZXQpO1xuICAgICAgICAgICAgdmFyIHRhcmdldERlcHRoID0gY2FsY3VsYXRlRGVwdGhGb3JOb2RlKG90LnRhcmdldCk7XG4gICAgICAgICAgICBlbnRyaWVzLnB1c2goZW50cnkpO1xuICAgICAgICAgICAgb3QubGFzdFJlcG9ydGVkU2l6ZSA9IGNhbGN1bGF0ZUJveFNpemUob3QudGFyZ2V0LCBvdC5vYnNlcnZlZEJveCk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0RGVwdGggPCBzaGFsbG93ZXN0RGVwdGgpIHtcbiAgICAgICAgICAgICAgICBzaGFsbG93ZXN0RGVwdGggPSB0YXJnZXREZXB0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNhbGxiYWNrcy5wdXNoKGZ1bmN0aW9uIHJlc2l6ZU9ic2VydmVyQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICByby5jYWxsYmFjay5jYWxsKHJvLm9ic2VydmVyLCBlbnRyaWVzLCByby5vYnNlcnZlcik7XG4gICAgICAgIH0pO1xuICAgICAgICByby5hY3RpdmVUYXJnZXRzLnNwbGljZSgwLCByby5hY3RpdmVUYXJnZXRzLmxlbmd0aCk7XG4gICAgfSk7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBjYWxsYmFja3NfMSA9IGNhbGxiYWNrczsgX2kgPCBjYWxsYmFja3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gY2FsbGJhY2tzXzFbX2ldO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cbiAgICByZXR1cm4gc2hhbGxvd2VzdERlcHRoO1xufTtcbmV4cG9ydCB7IGJyb2FkY2FzdEFjdGl2ZU9ic2VydmF0aW9ucyB9O1xuIiwgImltcG9ydCB7IHJlc2l6ZU9ic2VydmVycyB9IGZyb20gJy4uL3V0aWxzL3Jlc2l6ZU9ic2VydmVycyc7XG5pbXBvcnQgeyBjYWxjdWxhdGVEZXB0aEZvck5vZGUgfSBmcm9tICcuL2NhbGN1bGF0ZURlcHRoRm9yTm9kZSc7XG52YXIgZ2F0aGVyQWN0aXZlT2JzZXJ2YXRpb25zQXREZXB0aCA9IGZ1bmN0aW9uIChkZXB0aCkge1xuICAgIHJlc2l6ZU9ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIHByb2Nlc3NPYnNlcnZlcihybykge1xuICAgICAgICByby5hY3RpdmVUYXJnZXRzLnNwbGljZSgwLCByby5hY3RpdmVUYXJnZXRzLmxlbmd0aCk7XG4gICAgICAgIHJvLnNraXBwZWRUYXJnZXRzLnNwbGljZSgwLCByby5za2lwcGVkVGFyZ2V0cy5sZW5ndGgpO1xuICAgICAgICByby5vYnNlcnZhdGlvblRhcmdldHMuZm9yRWFjaChmdW5jdGlvbiBwcm9jZXNzVGFyZ2V0KG90KSB7XG4gICAgICAgICAgICBpZiAob3QuaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgICAgIGlmIChjYWxjdWxhdGVEZXB0aEZvck5vZGUob3QudGFyZ2V0KSA+IGRlcHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvLmFjdGl2ZVRhcmdldHMucHVzaChvdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByby5za2lwcGVkVGFyZ2V0cy5wdXNoKG90KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcbmV4cG9ydCB7IGdhdGhlckFjdGl2ZU9ic2VydmF0aW9uc0F0RGVwdGggfTtcbiIsICJpbXBvcnQgeyBoYXNBY3RpdmVPYnNlcnZhdGlvbnMgfSBmcm9tICcuLi9hbGdvcml0aG1zL2hhc0FjdGl2ZU9ic2VydmF0aW9ucyc7XG5pbXBvcnQgeyBoYXNTa2lwcGVkT2JzZXJ2YXRpb25zIH0gZnJvbSAnLi4vYWxnb3JpdGhtcy9oYXNTa2lwcGVkT2JzZXJ2YXRpb25zJztcbmltcG9ydCB7IGRlbGl2ZXJSZXNpemVMb29wRXJyb3IgfSBmcm9tICcuLi9hbGdvcml0aG1zL2RlbGl2ZXJSZXNpemVMb29wRXJyb3InO1xuaW1wb3J0IHsgYnJvYWRjYXN0QWN0aXZlT2JzZXJ2YXRpb25zIH0gZnJvbSAnLi4vYWxnb3JpdGhtcy9icm9hZGNhc3RBY3RpdmVPYnNlcnZhdGlvbnMnO1xuaW1wb3J0IHsgZ2F0aGVyQWN0aXZlT2JzZXJ2YXRpb25zQXREZXB0aCB9IGZyb20gJy4uL2FsZ29yaXRobXMvZ2F0aGVyQWN0aXZlT2JzZXJ2YXRpb25zQXREZXB0aCc7XG52YXIgcHJvY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGVwdGggPSAwO1xuICAgIGdhdGhlckFjdGl2ZU9ic2VydmF0aW9uc0F0RGVwdGgoZGVwdGgpO1xuICAgIHdoaWxlIChoYXNBY3RpdmVPYnNlcnZhdGlvbnMoKSkge1xuICAgICAgICBkZXB0aCA9IGJyb2FkY2FzdEFjdGl2ZU9ic2VydmF0aW9ucygpO1xuICAgICAgICBnYXRoZXJBY3RpdmVPYnNlcnZhdGlvbnNBdERlcHRoKGRlcHRoKTtcbiAgICB9XG4gICAgaWYgKGhhc1NraXBwZWRPYnNlcnZhdGlvbnMoKSkge1xuICAgICAgICBkZWxpdmVyUmVzaXplTG9vcEVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiBkZXB0aCA+IDA7XG59O1xuZXhwb3J0IHsgcHJvY2VzcyB9O1xuIiwgInZhciB0cmlnZ2VyO1xudmFyIGNhbGxiYWNrcyA9IFtdO1xudmFyIG5vdGlmeSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNhbGxiYWNrcy5zcGxpY2UoMCkuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsgcmV0dXJuIGNiKCk7IH0pOyB9O1xudmFyIHF1ZXVlTWljcm9UYXNrID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0cmlnZ2VyKSB7XG4gICAgICAgIHZhciB0b2dnbGVfMSA9IDA7XG4gICAgICAgIHZhciBlbF8xID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICAgICAgICB2YXIgY29uZmlnID0geyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH07XG4gICAgICAgIG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vdGlmeSgpOyB9KS5vYnNlcnZlKGVsXzEsIGNvbmZpZyk7XG4gICAgICAgIHRyaWdnZXIgPSBmdW5jdGlvbiAoKSB7IGVsXzEudGV4dENvbnRlbnQgPSBcIlwiLmNvbmNhdCh0b2dnbGVfMSA/IHRvZ2dsZV8xLS0gOiB0b2dnbGVfMSsrKTsgfTtcbiAgICB9XG4gICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIHRyaWdnZXIoKTtcbn07XG5leHBvcnQgeyBxdWV1ZU1pY3JvVGFzayB9O1xuIiwgImltcG9ydCB7IHF1ZXVlTWljcm9UYXNrIH0gZnJvbSAnLi9xdWV1ZU1pY3JvVGFzayc7XG52YXIgcXVldWVSZXNpemVPYnNlcnZlciA9IGZ1bmN0aW9uIChjYikge1xuICAgIHF1ZXVlTWljcm9UYXNrKGZ1bmN0aW9uIFJlc2l6ZU9ic2VydmVyKCkge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2IpO1xuICAgIH0pO1xufTtcbmV4cG9ydCB7IHF1ZXVlUmVzaXplT2JzZXJ2ZXIgfTtcbiIsICJpbXBvcnQgeyBwcm9jZXNzIH0gZnJvbSAnLi9wcm9jZXNzJztcbmltcG9ydCB7IGdsb2JhbCB9IGZyb20gJy4vZ2xvYmFsJztcbmltcG9ydCB7IHF1ZXVlUmVzaXplT2JzZXJ2ZXIgfSBmcm9tICcuL3F1ZXVlUmVzaXplT2JzZXJ2ZXInO1xudmFyIHdhdGNoaW5nID0gMDtcbnZhciBpc1dhdGNoaW5nID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gISF3YXRjaGluZzsgfTtcbnZhciBDQVRDSF9QRVJJT0QgPSAyNTA7XG52YXIgb2JzZXJ2ZXJDb25maWcgPSB7IGF0dHJpYnV0ZXM6IHRydWUsIGNoYXJhY3RlckRhdGE6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9O1xudmFyIGV2ZW50cyA9IFtcbiAgICAncmVzaXplJyxcbiAgICAnbG9hZCcsXG4gICAgJ3RyYW5zaXRpb25lbmQnLFxuICAgICdhbmltYXRpb25lbmQnLFxuICAgICdhbmltYXRpb25zdGFydCcsXG4gICAgJ2FuaW1hdGlvbml0ZXJhdGlvbicsXG4gICAgJ2tleXVwJyxcbiAgICAna2V5ZG93bicsXG4gICAgJ21vdXNldXAnLFxuICAgICdtb3VzZWRvd24nLFxuICAgICdtb3VzZW92ZXInLFxuICAgICdtb3VzZW91dCcsXG4gICAgJ2JsdXInLFxuICAgICdmb2N1cydcbl07XG52YXIgdGltZSA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7XG4gICAgaWYgKHRpbWVvdXQgPT09IHZvaWQgMCkgeyB0aW1lb3V0ID0gMDsgfVxuICAgIHJldHVybiBEYXRlLm5vdygpICsgdGltZW91dDtcbn07XG52YXIgc2NoZWR1bGVkID0gZmFsc2U7XG52YXIgU2NoZWR1bGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTY2hlZHVsZXIoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zY2hlZHVsZSgpOyB9O1xuICAgIH1cbiAgICBTY2hlZHVsZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aW1lb3V0ID09PSB2b2lkIDApIHsgdGltZW91dCA9IENBVENIX1BFUklPRDsgfVxuICAgICAgICBpZiAoc2NoZWR1bGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHVudGlsID0gdGltZSh0aW1lb3V0KTtcbiAgICAgICAgcXVldWVSZXNpemVPYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHNIYXZlUmVzaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50c0hhdmVSZXNpemVkID0gcHJvY2VzcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgc2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGltZW91dCA9IHVudGlsIC0gdGltZSgpO1xuICAgICAgICAgICAgICAgIGlmICghaXNXYXRjaGluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzSGF2ZVJlc2l6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucnVuKDEwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aW1lb3V0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5ydW4odGltZW91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGFydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgdGhpcy5ydW4oKTtcbiAgICB9O1xuICAgIFNjaGVkdWxlci5wcm90b3R5cGUub2JzZXJ2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNiID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMub2JzZXJ2ZXIgJiYgX3RoaXMub2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCBvYnNlcnZlckNvbmZpZyk7IH07XG4gICAgICAgIGRvY3VtZW50LmJvZHkgPyBjYigpIDogZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBjYik7XG4gICAgfTtcbiAgICBTY2hlZHVsZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5zdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLmxpc3RlbmVyKTtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZSgpO1xuICAgICAgICAgICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKG5hbWUsIF90aGlzLmxpc3RlbmVyLCB0cnVlKTsgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNjaGVkdWxlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIgJiYgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gZ2xvYmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgX3RoaXMubGlzdGVuZXIsIHRydWUpOyB9KTtcbiAgICAgICAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTY2hlZHVsZXI7XG59KCkpO1xudmFyIHNjaGVkdWxlciA9IG5ldyBTY2hlZHVsZXIoKTtcbnZhciB1cGRhdGVDb3VudCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgIXdhdGNoaW5nICYmIG4gPiAwICYmIHNjaGVkdWxlci5zdGFydCgpO1xuICAgIHdhdGNoaW5nICs9IG47XG4gICAgIXdhdGNoaW5nICYmIHNjaGVkdWxlci5zdG9wKCk7XG59O1xuZXhwb3J0IHsgc2NoZWR1bGVyLCB1cGRhdGVDb3VudCB9O1xuIiwgImltcG9ydCB7IFJlc2l6ZU9ic2VydmVyQm94T3B0aW9ucyB9IGZyb20gJy4vUmVzaXplT2JzZXJ2ZXJCb3hPcHRpb25zJztcbmltcG9ydCB7IGNhbGN1bGF0ZUJveFNpemUgfSBmcm9tICcuL2FsZ29yaXRobXMvY2FsY3VsYXRlQm94U2l6ZSc7XG5pbXBvcnQgeyBpc1NWRywgaXNSZXBsYWNlZEVsZW1lbnQgfSBmcm9tICcuL3V0aWxzL2VsZW1lbnQnO1xudmFyIHNraXBOb3RpZnlPbkVsZW1lbnQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgcmV0dXJuICFpc1NWRyh0YXJnZXQpXG4gICAgICAgICYmICFpc1JlcGxhY2VkRWxlbWVudCh0YXJnZXQpXG4gICAgICAgICYmIGdldENvbXB1dGVkU3R5bGUodGFyZ2V0KS5kaXNwbGF5ID09PSAnaW5saW5lJztcbn07XG52YXIgUmVzaXplT2JzZXJ2YXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc2l6ZU9ic2VydmF0aW9uKHRhcmdldCwgb2JzZXJ2ZWRCb3gpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMub2JzZXJ2ZWRCb3ggPSBvYnNlcnZlZEJveCB8fCBSZXNpemVPYnNlcnZlckJveE9wdGlvbnMuQ09OVEVOVF9CT1g7XG4gICAgICAgIHRoaXMubGFzdFJlcG9ydGVkU2l6ZSA9IHtcbiAgICAgICAgICAgIGlubGluZVNpemU6IDAsXG4gICAgICAgICAgICBibG9ja1NpemU6IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgUmVzaXplT2JzZXJ2YXRpb24ucHJvdG90eXBlLmlzQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2l6ZSA9IGNhbGN1bGF0ZUJveFNpemUodGhpcy50YXJnZXQsIHRoaXMub2JzZXJ2ZWRCb3gsIHRydWUpO1xuICAgICAgICBpZiAoc2tpcE5vdGlmeU9uRWxlbWVudCh0aGlzLnRhcmdldCkpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFJlcG9ydGVkU2l6ZSA9IHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGFzdFJlcG9ydGVkU2l6ZS5pbmxpbmVTaXplICE9PSBzaXplLmlubGluZVNpemVcbiAgICAgICAgICAgIHx8IHRoaXMubGFzdFJlcG9ydGVkU2l6ZS5ibG9ja1NpemUgIT09IHNpemUuYmxvY2tTaXplKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICByZXR1cm4gUmVzaXplT2JzZXJ2YXRpb247XG59KCkpO1xuZXhwb3J0IHsgUmVzaXplT2JzZXJ2YXRpb24gfTtcbiIsICJ2YXIgUmVzaXplT2JzZXJ2ZXJEZXRhaWwgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc2l6ZU9ic2VydmVyRGV0YWlsKHJlc2l6ZU9ic2VydmVyLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldHMgPSBbXTtcbiAgICAgICAgdGhpcy5za2lwcGVkVGFyZ2V0cyA9IFtdO1xuICAgICAgICB0aGlzLm9ic2VydmF0aW9uVGFyZ2V0cyA9IFtdO1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gcmVzaXplT2JzZXJ2ZXI7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmVyRGV0YWlsO1xufSgpKTtcbmV4cG9ydCB7IFJlc2l6ZU9ic2VydmVyRGV0YWlsIH07XG4iLCAiaW1wb3J0IHsgc2NoZWR1bGVyLCB1cGRhdGVDb3VudCB9IGZyb20gJy4vdXRpbHMvc2NoZWR1bGVyJztcbmltcG9ydCB7IFJlc2l6ZU9ic2VydmF0aW9uIH0gZnJvbSAnLi9SZXNpemVPYnNlcnZhdGlvbic7XG5pbXBvcnQgeyBSZXNpemVPYnNlcnZlckRldGFpbCB9IGZyb20gJy4vUmVzaXplT2JzZXJ2ZXJEZXRhaWwnO1xuaW1wb3J0IHsgcmVzaXplT2JzZXJ2ZXJzIH0gZnJvbSAnLi91dGlscy9yZXNpemVPYnNlcnZlcnMnO1xudmFyIG9ic2VydmVyTWFwID0gbmV3IFdlYWtNYXAoKTtcbnZhciBnZXRPYnNlcnZhdGlvbkluZGV4ID0gZnVuY3Rpb24gKG9ic2VydmF0aW9uVGFyZ2V0cywgdGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYnNlcnZhdGlvblRhcmdldHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKG9ic2VydmF0aW9uVGFyZ2V0c1tpXS50YXJnZXQgPT09IHRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufTtcbnZhciBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlcigpIHtcbiAgICB9XG4gICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLmNvbm5lY3QgPSBmdW5jdGlvbiAocmVzaXplT2JzZXJ2ZXIsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkZXRhaWwgPSBuZXcgUmVzaXplT2JzZXJ2ZXJEZXRhaWwocmVzaXplT2JzZXJ2ZXIsIGNhbGxiYWNrKTtcbiAgICAgICAgb2JzZXJ2ZXJNYXAuc2V0KHJlc2l6ZU9ic2VydmVyLCBkZXRhaWwpO1xuICAgIH07XG4gICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLm9ic2VydmUgPSBmdW5jdGlvbiAocmVzaXplT2JzZXJ2ZXIsIHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgZGV0YWlsID0gb2JzZXJ2ZXJNYXAuZ2V0KHJlc2l6ZU9ic2VydmVyKTtcbiAgICAgICAgdmFyIGZpcnN0T2JzZXJ2YXRpb24gPSBkZXRhaWwub2JzZXJ2YXRpb25UYXJnZXRzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgaWYgKGdldE9ic2VydmF0aW9uSW5kZXgoZGV0YWlsLm9ic2VydmF0aW9uVGFyZ2V0cywgdGFyZ2V0KSA8IDApIHtcbiAgICAgICAgICAgIGZpcnN0T2JzZXJ2YXRpb24gJiYgcmVzaXplT2JzZXJ2ZXJzLnB1c2goZGV0YWlsKTtcbiAgICAgICAgICAgIGRldGFpbC5vYnNlcnZhdGlvblRhcmdldHMucHVzaChuZXcgUmVzaXplT2JzZXJ2YXRpb24odGFyZ2V0LCBvcHRpb25zICYmIG9wdGlvbnMuYm94KSk7XG4gICAgICAgICAgICB1cGRhdGVDb3VudCgxKTtcbiAgICAgICAgICAgIHNjaGVkdWxlci5zY2hlZHVsZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIudW5vYnNlcnZlID0gZnVuY3Rpb24gKHJlc2l6ZU9ic2VydmVyLCB0YXJnZXQpIHtcbiAgICAgICAgdmFyIGRldGFpbCA9IG9ic2VydmVyTWFwLmdldChyZXNpemVPYnNlcnZlcik7XG4gICAgICAgIHZhciBpbmRleCA9IGdldE9ic2VydmF0aW9uSW5kZXgoZGV0YWlsLm9ic2VydmF0aW9uVGFyZ2V0cywgdGFyZ2V0KTtcbiAgICAgICAgdmFyIGxhc3RPYnNlcnZhdGlvbiA9IGRldGFpbC5vYnNlcnZhdGlvblRhcmdldHMubGVuZ3RoID09PSAxO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgbGFzdE9ic2VydmF0aW9uICYmIHJlc2l6ZU9ic2VydmVycy5zcGxpY2UocmVzaXplT2JzZXJ2ZXJzLmluZGV4T2YoZGV0YWlsKSwgMSk7XG4gICAgICAgICAgICBkZXRhaWwub2JzZXJ2YXRpb25UYXJnZXRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB1cGRhdGVDb3VudCgtMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5kaXNjb25uZWN0ID0gZnVuY3Rpb24gKHJlc2l6ZU9ic2VydmVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBkZXRhaWwgPSBvYnNlcnZlck1hcC5nZXQocmVzaXplT2JzZXJ2ZXIpO1xuICAgICAgICBkZXRhaWwub2JzZXJ2YXRpb25UYXJnZXRzLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbiAob3QpIHsgcmV0dXJuIF90aGlzLnVub2JzZXJ2ZShyZXNpemVPYnNlcnZlciwgb3QudGFyZ2V0KTsgfSk7XG4gICAgICAgIGRldGFpbC5hY3RpdmVUYXJnZXRzLnNwbGljZSgwLCBkZXRhaWwuYWN0aXZlVGFyZ2V0cy5sZW5ndGgpO1xuICAgIH07XG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlcjtcbn0oKSk7XG5leHBvcnQgeyBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIgfTtcbiIsICJpbXBvcnQgeyBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIgfSBmcm9tICcuL1Jlc2l6ZU9ic2VydmVyQ29udHJvbGxlcic7XG5pbXBvcnQgeyBpc0VsZW1lbnQgfSBmcm9tICcuL3V0aWxzL2VsZW1lbnQnO1xudmFyIFJlc2l6ZU9ic2VydmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXNpemVPYnNlcnZlcihjYWxsYmFjaykge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Jlc2l6ZU9ic2VydmVyJzogMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50LlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUmVzaXplT2JzZXJ2ZXInOiBUaGUgY2FsbGJhY2sgcHJvdmlkZWQgYXMgcGFyYW1ldGVyIDEgaXMgbm90IGEgZnVuY3Rpb24uXCIpO1xuICAgICAgICB9XG4gICAgICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5jb25uZWN0KHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgUmVzaXplT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAodGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ29ic2VydmUnIG9uICdSZXNpemVPYnNlcnZlcic6IDEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0VsZW1lbnQodGFyZ2V0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBleGVjdXRlICdvYnNlcnZlJyBvbiAnUmVzaXplT2JzZXJ2ZXInOiBwYXJhbWV0ZXIgMSBpcyBub3Qgb2YgdHlwZSAnRWxlbWVudFwiKTtcbiAgICAgICAgfVxuICAgICAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIub2JzZXJ2ZSh0aGlzLCB0YXJnZXQsIG9wdGlvbnMpO1xuICAgIH07XG4gICAgUmVzaXplT2JzZXJ2ZXIucHJvdG90eXBlLnVub2JzZXJ2ZSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gZXhlY3V0ZSAndW5vYnNlcnZlJyBvbiAnUmVzaXplT2JzZXJ2ZXInOiAxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAwIHByZXNlbnQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNFbGVtZW50KHRhcmdldCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gZXhlY3V0ZSAndW5vYnNlcnZlJyBvbiAnUmVzaXplT2JzZXJ2ZXInOiBwYXJhbWV0ZXIgMSBpcyBub3Qgb2YgdHlwZSAnRWxlbWVudFwiKTtcbiAgICAgICAgfVxuICAgICAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIudW5vYnNlcnZlKHRoaXMsIHRhcmdldCk7XG4gICAgfTtcbiAgICBSZXNpemVPYnNlcnZlci5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLmRpc2Nvbm5lY3QodGhpcyk7XG4gICAgfTtcbiAgICBSZXNpemVPYnNlcnZlci50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICdmdW5jdGlvbiBSZXNpemVPYnNlcnZlciAoKSB7IFtwb2x5ZmlsbCBjb2RlXSB9JztcbiAgICB9O1xuICAgIHJldHVybiBSZXNpemVPYnNlcnZlcjtcbn0oKSk7XG5leHBvcnQgeyBSZXNpemVPYnNlcnZlciB9O1xuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7XG4gIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9O1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgdmFyIGtleSwgaTtcblxuICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaV07XG4gICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn0iLCAiaW1wb3J0IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIi4vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSBvYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpO1xuICB2YXIga2V5LCBpO1xuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTtcbiAgICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufSIsICIvKipcbiAqIEFuIGF1dG8taW5jcmVtZW50aW5nIGlkZW50aWZpZXIgZm9yIGtleXMuXG4gKi9cblxubGV0IG4gPSAwXG5cbi8qKlxuICogQSBjbGFzcyB0aGF0IGtlZXBzIHRyYWNrIG9mIGEga2V5IHN0cmluZy4gV2UgdXNlIGEgZnVsbCBjbGFzcyBoZXJlIGJlY2F1c2Ugd2VcbiAqIHdhbnQgdG8gYmUgYWJsZSB0byB1c2UgdGhlbSBhcyBrZXlzIGluIGBXZWFrTWFwYCBvYmplY3RzLlxuICovXG5cbmV4cG9ydCBjbGFzcyBLZXkge1xuICBpZDogc3RyaW5nXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pZCA9IGAke24rK31gXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBBbmNlc3RvciwgRWRpdG9yLCBOb2RlLCBSYW5nZSwgUmFuZ2VSZWYsIFRleHQgfSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJy4uL2hvb2tzL2FuZHJvaWQtaW5wdXQtbWFuYWdlci9hbmRyb2lkLWlucHV0LW1hbmFnZXInXG5pbXBvcnQgeyBUZXh0RGlmZiB9IGZyb20gJy4vZGlmZi10ZXh0J1xuaW1wb3J0IHsgS2V5IH0gZnJvbSAnLi9rZXknXG5cbi8qKlxuICogVHdvIHdlYWsgbWFwcyB0aGF0IGFsbG93IHVzIHJlYnVpbGQgYSBwYXRoIGdpdmVuIGEgbm9kZS4gVGhleSBhcmUgcG9wdWxhdGVkXG4gKiBhdCByZW5kZXIgdGltZSBzdWNoIHRoYXQgYWZ0ZXIgYSByZW5kZXIgb2NjdXJzIHdlIGNhbiBhbHdheXMgYmFja3RyYWNrLlxuICovXG5cbmV4cG9ydCBjb25zdCBOT0RFX1RPX0lOREVYOiBXZWFrTWFwPE5vZGUsIG51bWJlcj4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgTk9ERV9UT19QQVJFTlQ6IFdlYWtNYXA8Tm9kZSwgQW5jZXN0b3I+ID0gbmV3IFdlYWtNYXAoKVxuXG4vKipcbiAqIFdlYWsgbWFwcyB0aGF0IGFsbG93IHVzIHRvIGdvIGJldHdlZW4gU2xhdGUgbm9kZXMgYW5kIERPTSBub2Rlcy4gVGhlc2VcbiAqIGFyZSB1c2VkIHRvIHJlc29sdmUgRE9NIGV2ZW50LXJlbGF0ZWQgbG9naWMgaW50byBTbGF0ZSBhY3Rpb25zLlxuICovXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX1dJTkRPVzogV2Vha01hcDxFZGl0b3IsIFdpbmRvdz4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX0VMRU1FTlQ6IFdlYWtNYXA8RWRpdG9yLCBIVE1MRWxlbWVudD4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX1BMQUNFSE9MREVSOiBXZWFrTWFwPEVkaXRvciwgc3RyaW5nPiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fUExBQ0VIT0xERVJfRUxFTUVOVDogV2Vha01hcDxcbiAgRWRpdG9yLFxuICBIVE1MRWxlbWVudFxuPiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBFTEVNRU5UX1RPX05PREU6IFdlYWtNYXA8SFRNTEVsZW1lbnQsIE5vZGU+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IE5PREVfVE9fRUxFTUVOVDogV2Vha01hcDxOb2RlLCBIVE1MRWxlbWVudD4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgTk9ERV9UT19LRVk6IFdlYWtNYXA8Tm9kZSwgS2V5PiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fS0VZX1RPX0VMRU1FTlQ6IFdlYWtNYXA8XG4gIEVkaXRvcixcbiAgV2Vha01hcDxLZXksIEhUTUxFbGVtZW50PlxuPiA9IG5ldyBXZWFrTWFwKClcblxuLyoqXG4gKiBXZWFrIG1hcHMgZm9yIHN0b3JpbmcgZWRpdG9yLXJlbGF0ZWQgc3RhdGUuXG4gKi9cblxuZXhwb3J0IGNvbnN0IElTX1JFQURfT05MWTogV2Vha01hcDxFZGl0b3IsIGJvb2xlYW4+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IElTX0ZPQ1VTRUQ6IFdlYWtNYXA8RWRpdG9yLCBib29sZWFuPiA9IG5ldyBXZWFrTWFwKClcbmV4cG9ydCBjb25zdCBJU19EUkFHR0lORzogV2Vha01hcDxFZGl0b3IsIGJvb2xlYW4+ID0gbmV3IFdlYWtNYXAoKVxuZXhwb3J0IGNvbnN0IElTX0NMSUNLSU5HOiBXZWFrTWFwPEVkaXRvciwgYm9vbGVhbj4gPSBuZXcgV2Vha01hcCgpXG5leHBvcnQgY29uc3QgSVNfQ09NUE9TSU5HOiBXZWFrTWFwPEVkaXRvciwgYm9vbGVhbj4gPSBuZXcgV2Vha01hcCgpXG5cbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fVVNFUl9TRUxFQ1RJT046IFdlYWtNYXA8XG4gIEVkaXRvcixcbiAgUmFuZ2VSZWYgfCBudWxsXG4+ID0gbmV3IFdlYWtNYXAoKVxuXG4vKipcbiAqIFdlYWsgbWFwIGZvciBhc3NvY2lhdGluZyB0aGUgY29udGV4dCBgb25DaGFuZ2VgIGNvbnRleHQgd2l0aCB0aGUgcGx1Z2luLlxuICovXG5cbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fT05fQ0hBTkdFID0gbmV3IFdlYWtNYXA8RWRpdG9yLCAoKSA9PiB2b2lkPigpXG5cbi8qKlxuICogV2VhayBtYXBzIGZvciBzYXZpbmcgcGVuZGluZyBzdGF0ZSBvbiBjb21wb3NpdGlvbiBzdGFnZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX1NDSEVEVUxFX0ZMVVNIOiBXZWFrTWFwPFxuICBFZGl0b3IsXG4gICgpID0+IHZvaWRcbj4gPSBuZXcgV2Vha01hcCgpXG5cbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1M6IFdlYWtNYXA8XG4gIEVkaXRvcixcbiAgUGFydGlhbDxUZXh0PiB8IG51bGxcbj4gPSBuZXcgV2Vha01hcCgpXG5cbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fVVNFUl9NQVJLUzogV2Vha01hcDxcbiAgRWRpdG9yLFxuICBQYXJ0aWFsPFRleHQ+IHwgbnVsbFxuPiA9IG5ldyBXZWFrTWFwKClcblxuLyoqXG4gKiBBbmRyb2lkIGlucHV0IGhhbmRsaW5nIHNwZWNpZmljIHdlYWstbWFwc1xuICovXG5cbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fUEVORElOR19ESUZGUzogV2Vha01hcDxcbiAgRWRpdG9yLFxuICBUZXh0RGlmZltdXG4+ID0gbmV3IFdlYWtNYXAoKVxuXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OOiBXZWFrTWFwPFxuICBFZGl0b3IsXG4gIEFjdGlvbiB8IG51bGxcbj4gPSBuZXcgV2Vha01hcCgpXG5cbmV4cG9ydCBjb25zdCBFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT046IFdlYWtNYXA8XG4gIEVkaXRvcixcbiAgUmFuZ2UgfCBudWxsXG4+ID0gbmV3IFdlYWtNYXAoKVxuXG5leHBvcnQgY29uc3QgRURJVE9SX1RPX0ZPUkNFX1JFTkRFUjogV2Vha01hcDxFZGl0b3IsICgpID0+IHZvaWQ+ID0gbmV3IFdlYWtNYXAoKVxuXG4vKipcbiAqIFN5bWJvbHMuXG4gKi9cblxuZXhwb3J0IGNvbnN0IFBMQUNFSE9MREVSX1NZTUJPTCA9IChTeW1ib2woJ3BsYWNlaG9sZGVyJykgYXMgdW5rbm93bikgYXMgc3RyaW5nXG5leHBvcnQgY29uc3QgTUFSS19QTEFDRUhPTERFUl9TWU1CT0wgPSAoU3ltYm9sKFxuICAnbWFyay1wbGFjZWhvbGRlcidcbikgYXMgdW5rbm93bikgYXMgc3RyaW5nXG4iLCAiLyoqXG4gKiBUeXBlcy5cbiAqL1xuXG4vLyBDT01QQVQ6IFRoaXMgaXMgcmVxdWlyZWQgdG8gcHJldmVudCBUeXBlU2NyaXB0IGFsaWFzZXMgZnJvbSBkb2luZyBzb21lIHZlcnlcbi8vIHdlaXJkIHRoaW5ncyBmb3IgU2xhdGUncyB0eXBlcyB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgZ2xvYmFscy4gKDIwMTkvMTEvMjcpXG4vLyBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzM1MDAyXG5pbXBvcnQgRE9NTm9kZSA9IGdsb2JhbFRoaXMuTm9kZVxuaW1wb3J0IERPTUNvbW1lbnQgPSBnbG9iYWxUaGlzLkNvbW1lbnRcbmltcG9ydCBET01FbGVtZW50ID0gZ2xvYmFsVGhpcy5FbGVtZW50XG5pbXBvcnQgRE9NVGV4dCA9IGdsb2JhbFRoaXMuVGV4dFxuaW1wb3J0IERPTVJhbmdlID0gZ2xvYmFsVGhpcy5SYW5nZVxuaW1wb3J0IERPTVNlbGVjdGlvbiA9IGdsb2JhbFRoaXMuU2VsZWN0aW9uXG5pbXBvcnQgRE9NU3RhdGljUmFuZ2UgPSBnbG9iYWxUaGlzLlN0YXRpY1JhbmdlXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4uL3BsdWdpbi9yZWFjdC1lZGl0b3InXG5cbmV4cG9ydCB7XG4gIERPTU5vZGUsXG4gIERPTUNvbW1lbnQsXG4gIERPTUVsZW1lbnQsXG4gIERPTVRleHQsXG4gIERPTVJhbmdlLFxuICBET01TZWxlY3Rpb24sXG4gIERPTVN0YXRpY1JhbmdlLFxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIFNlbGVjdGlvbjogdHlwZW9mIFNlbGVjdGlvblsnY29uc3RydWN0b3InXVxuICAgIERhdGFUcmFuc2ZlcjogdHlwZW9mIERhdGFUcmFuc2ZlclsnY29uc3RydWN0b3InXVxuICAgIE5vZGU6IHR5cGVvZiBOb2RlWydjb25zdHJ1Y3RvciddXG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgRE9NUG9pbnQgPSBbTm9kZSwgbnVtYmVyXVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGhvc3Qgd2luZG93IG9mIGEgRE9NIG5vZGVcbiAqL1xuXG5leHBvcnQgY29uc3QgZ2V0RGVmYXVsdFZpZXcgPSAodmFsdWU6IGFueSk6IFdpbmRvdyB8IG51bGwgPT4ge1xuICByZXR1cm4gKFxuICAgICh2YWx1ZSAmJiB2YWx1ZS5vd25lckRvY3VtZW50ICYmIHZhbHVlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpIHx8IG51bGxcbiAgKVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgRE9NIG5vZGUgaXMgYSBjb21tZW50IG5vZGUuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGlzRE9NQ29tbWVudCA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgRE9NQ29tbWVudCA9PiB7XG4gIHJldHVybiBpc0RPTU5vZGUodmFsdWUpICYmIHZhbHVlLm5vZGVUeXBlID09PSA4XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBET00gbm9kZSBpcyBhbiBlbGVtZW50IG5vZGUuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGlzRE9NRWxlbWVudCA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgRE9NRWxlbWVudCA9PiB7XG4gIHJldHVybiBpc0RPTU5vZGUodmFsdWUpICYmIHZhbHVlLm5vZGVUeXBlID09PSAxXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIERPTSBub2RlLlxuICovXG5cbmV4cG9ydCBjb25zdCBpc0RPTU5vZGUgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIERPTU5vZGUgPT4ge1xuICBjb25zdCB3aW5kb3cgPSBnZXREZWZhdWx0Vmlldyh2YWx1ZSlcbiAgcmV0dXJuICEhd2luZG93ICYmIHZhbHVlIGluc3RhbmNlb2Ygd2luZG93Lk5vZGVcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgRE9NIHNlbGVjdGlvbi5cbiAqL1xuXG5leHBvcnQgY29uc3QgaXNET01TZWxlY3Rpb24gPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIERPTVNlbGVjdGlvbiA9PiB7XG4gIGNvbnN0IHdpbmRvdyA9IHZhbHVlICYmIHZhbHVlLmFuY2hvck5vZGUgJiYgZ2V0RGVmYXVsdFZpZXcodmFsdWUuYW5jaG9yTm9kZSlcbiAgcmV0dXJuICEhd2luZG93ICYmIHZhbHVlIGluc3RhbmNlb2Ygd2luZG93LlNlbGVjdGlvblxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgRE9NIG5vZGUgaXMgYW4gZWxlbWVudCBub2RlLlxuICovXG5cbmV4cG9ydCBjb25zdCBpc0RPTVRleHQgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIERPTVRleHQgPT4ge1xuICByZXR1cm4gaXNET01Ob2RlKHZhbHVlKSAmJiB2YWx1ZS5ub2RlVHlwZSA9PT0gM1xufVxuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGEgcGFzdGUgZXZlbnQgaXMgYSBwbGFpbnRleHQtb25seSBldmVudC5cbiAqL1xuXG5leHBvcnQgY29uc3QgaXNQbGFpblRleHRPbmx5UGFzdGUgPSAoZXZlbnQ6IENsaXBib2FyZEV2ZW50KSA9PiB7XG4gIHJldHVybiAoXG4gICAgZXZlbnQuY2xpcGJvYXJkRGF0YSAmJlxuICAgIGV2ZW50LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpICE9PSAnJyAmJlxuICAgIGV2ZW50LmNsaXBib2FyZERhdGEudHlwZXMubGVuZ3RoID09PSAxXG4gIClcbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgYSBET00gcG9pbnQgc28gdGhhdCBpdCBhbHdheXMgcmVmZXJzIHRvIGEgdGV4dCBub2RlLlxuICovXG5cbmV4cG9ydCBjb25zdCBub3JtYWxpemVET01Qb2ludCA9IChkb21Qb2ludDogRE9NUG9pbnQpOiBET01Qb2ludCA9PiB7XG4gIGxldCBbbm9kZSwgb2Zmc2V0XSA9IGRvbVBvaW50XG5cbiAgLy8gSWYgaXQncyBhbiBlbGVtZW50IG5vZGUsIGl0cyBvZmZzZXQgcmVmZXJzIHRvIHRoZSBpbmRleCBvZiBpdHMgY2hpbGRyZW5cbiAgLy8gaW5jbHVkaW5nIGNvbW1lbnQgbm9kZXMsIHNvIHRyeSB0byBmaW5kIHRoZSByaWdodCB0ZXh0IGNoaWxkIG5vZGUuXG4gIGlmIChpc0RPTUVsZW1lbnQobm9kZSkgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgIGxldCBpc0xhc3QgPSBvZmZzZXQgPT09IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGhcbiAgICBsZXQgaW5kZXggPSBpc0xhc3QgPyBvZmZzZXQgLSAxIDogb2Zmc2V0XG4gICAgO1tub2RlLCBpbmRleF0gPSBnZXRFZGl0YWJsZUNoaWxkQW5kSW5kZXgoXG4gICAgICBub2RlLFxuICAgICAgaW5kZXgsXG4gICAgICBpc0xhc3QgPyAnYmFja3dhcmQnIDogJ2ZvcndhcmQnXG4gICAgKVxuICAgIC8vIElmIHRoZSBlZGl0YWJsZSBjaGlsZCBmb3VuZCBpcyBpbiBmcm9udCBvZiBpbnB1dCBvZmZzZXQsIHdlIGluc3RlYWQgc2VlayB0byBpdHMgZW5kXG4gICAgaXNMYXN0ID0gaW5kZXggPCBvZmZzZXRcblxuICAgIC8vIElmIHRoZSBub2RlIGhhcyBjaGlsZHJlbiwgdHJhdmVyc2UgdW50aWwgd2UgaGF2ZSBhIGxlYWYgbm9kZS4gTGVhZiBub2Rlc1xuICAgIC8vIGNhbiBiZSBlaXRoZXIgdGV4dCBub2Rlcywgb3Igb3RoZXIgdm9pZCBET00gbm9kZXMuXG4gICAgd2hpbGUgKGlzRE9NRWxlbWVudChub2RlKSAmJiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBpID0gaXNMYXN0ID8gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCAtIDEgOiAwXG4gICAgICBub2RlID0gZ2V0RWRpdGFibGVDaGlsZChub2RlLCBpLCBpc0xhc3QgPyAnYmFja3dhcmQnIDogJ2ZvcndhcmQnKVxuICAgIH1cblxuICAgIC8vIERldGVybWluZSB0aGUgbmV3IG9mZnNldCBpbnNpZGUgdGhlIHRleHQgbm9kZS5cbiAgICBvZmZzZXQgPSBpc0xhc3QgJiYgbm9kZS50ZXh0Q29udGVudCAhPSBudWxsID8gbm9kZS50ZXh0Q29udGVudC5sZW5ndGggOiAwXG4gIH1cblxuICAvLyBSZXR1cm4gdGhlIG5vZGUgYW5kIG9mZnNldC5cbiAgcmV0dXJuIFtub2RlLCBvZmZzZXRdXG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3ZXRoZXIgdGhlIGFjdGl2ZSBlbGVtZW50IGlzIG5lc3RlZCB3aXRoaW4gYSBzaGFkb3dSb290XG4gKi9cblxuZXhwb3J0IGNvbnN0IGhhc1NoYWRvd1Jvb3QgPSAobm9kZTogTm9kZSB8IG51bGwpID0+IHtcbiAgbGV0IHBhcmVudCA9IG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlXG4gIHdoaWxlIChwYXJlbnQpIHtcbiAgICBpZiAocGFyZW50LnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IFNoYWRvd1Jvb3RdJykge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGVcbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuLyoqXG4gKiBHZXQgdGhlIG5lYXJlc3QgZWRpdGFibGUgY2hpbGQgYW5kIGluZGV4IGF0IGBpbmRleGAgaW4gYSBgcGFyZW50YCwgcHJlZmVycmluZ1xuICogYGRpcmVjdGlvbmAuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGdldEVkaXRhYmxlQ2hpbGRBbmRJbmRleCA9IChcbiAgcGFyZW50OiBET01FbGVtZW50LFxuICBpbmRleDogbnVtYmVyLFxuICBkaXJlY3Rpb246ICdmb3J3YXJkJyB8ICdiYWNrd2FyZCdcbik6IFtET01Ob2RlLCBudW1iZXJdID0+IHtcbiAgY29uc3QgeyBjaGlsZE5vZGVzIH0gPSBwYXJlbnRcbiAgbGV0IGNoaWxkID0gY2hpbGROb2Rlc1tpbmRleF1cbiAgbGV0IGkgPSBpbmRleFxuICBsZXQgdHJpZWRGb3J3YXJkID0gZmFsc2VcbiAgbGV0IHRyaWVkQmFja3dhcmQgPSBmYWxzZVxuXG4gIC8vIFdoaWxlIHRoZSBjaGlsZCBpcyBhIGNvbW1lbnQgbm9kZSwgb3IgYW4gZWxlbWVudCBub2RlIHdpdGggbm8gY2hpbGRyZW4sXG4gIC8vIGtlZXAgaXRlcmF0aW5nIHRvIGZpbmQgYSBzaWJsaW5nIG5vbi12b2lkLCBub24tY29tbWVudCBub2RlLlxuICB3aGlsZSAoXG4gICAgaXNET01Db21tZW50KGNoaWxkKSB8fFxuICAgIChpc0RPTUVsZW1lbnQoY2hpbGQpICYmIGNoaWxkLmNoaWxkTm9kZXMubGVuZ3RoID09PSAwKSB8fFxuICAgIChpc0RPTUVsZW1lbnQoY2hpbGQpICYmIGNoaWxkLmdldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJykgPT09ICdmYWxzZScpXG4gICkge1xuICAgIGlmICh0cmllZEZvcndhcmQgJiYgdHJpZWRCYWNrd2FyZCkge1xuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoaSA+PSBjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgdHJpZWRGb3J3YXJkID0gdHJ1ZVxuICAgICAgaSA9IGluZGV4IC0gMVxuICAgICAgZGlyZWN0aW9uID0gJ2JhY2t3YXJkJ1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBpZiAoaSA8IDApIHtcbiAgICAgIHRyaWVkQmFja3dhcmQgPSB0cnVlXG4gICAgICBpID0gaW5kZXggKyAxXG4gICAgICBkaXJlY3Rpb24gPSAnZm9yd2FyZCdcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgY2hpbGQgPSBjaGlsZE5vZGVzW2ldXG4gICAgaW5kZXggPSBpXG4gICAgaSArPSBkaXJlY3Rpb24gPT09ICdmb3J3YXJkJyA/IDEgOiAtMVxuICB9XG5cbiAgcmV0dXJuIFtjaGlsZCwgaW5kZXhdXG59XG5cbi8qKlxuICogR2V0IHRoZSBuZWFyZXN0IGVkaXRhYmxlIGNoaWxkIGF0IGBpbmRleGAgaW4gYSBgcGFyZW50YCwgcHJlZmVycmluZ1xuICogYGRpcmVjdGlvbmAuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGdldEVkaXRhYmxlQ2hpbGQgPSAoXG4gIHBhcmVudDogRE9NRWxlbWVudCxcbiAgaW5kZXg6IG51bWJlcixcbiAgZGlyZWN0aW9uOiAnZm9yd2FyZCcgfCAnYmFja3dhcmQnXG4pOiBET01Ob2RlID0+IHtcbiAgY29uc3QgW2NoaWxkXSA9IGdldEVkaXRhYmxlQ2hpbGRBbmRJbmRleChwYXJlbnQsIGluZGV4LCBkaXJlY3Rpb24pXG4gIHJldHVybiBjaGlsZFxufVxuXG4vKipcbiAqIEdldCBhIHBsYWludGV4dCByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29udGVudCBvZiBhIG5vZGUsIGFjY291bnRpbmcgZm9yIGJsb2NrXG4gKiBlbGVtZW50cyB3aGljaCBnZXQgYSBuZXdsaW5lIGFwcGVuZGVkLlxuICpcbiAqIFRoZSBkb21Ob2RlIG11c3QgYmUgYXR0YWNoZWQgdG8gdGhlIERPTS5cbiAqL1xuXG5leHBvcnQgY29uc3QgZ2V0UGxhaW5UZXh0ID0gKGRvbU5vZGU6IERPTU5vZGUpID0+IHtcbiAgbGV0IHRleHQgPSAnJ1xuXG4gIGlmIChpc0RPTVRleHQoZG9tTm9kZSkgJiYgZG9tTm9kZS5ub2RlVmFsdWUpIHtcbiAgICByZXR1cm4gZG9tTm9kZS5ub2RlVmFsdWVcbiAgfVxuXG4gIGlmIChpc0RPTUVsZW1lbnQoZG9tTm9kZSkpIHtcbiAgICBmb3IgKGNvbnN0IGNoaWxkTm9kZSBvZiBBcnJheS5mcm9tKGRvbU5vZGUuY2hpbGROb2RlcykpIHtcbiAgICAgIHRleHQgKz0gZ2V0UGxhaW5UZXh0KGNoaWxkTm9kZSlcbiAgICB9XG5cbiAgICBjb25zdCBkaXNwbGF5ID0gZ2V0Q29tcHV0ZWRTdHlsZShkb21Ob2RlKS5nZXRQcm9wZXJ0eVZhbHVlKCdkaXNwbGF5JylcblxuICAgIGlmIChkaXNwbGF5ID09PSAnYmxvY2snIHx8IGRpc3BsYXkgPT09ICdsaXN0JyB8fCBkb21Ob2RlLnRhZ05hbWUgPT09ICdCUicpIHtcbiAgICAgIHRleHQgKz0gJ1xcbidcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGV4dFxufVxuXG4vKipcbiAqIEdldCB4LXNsYXRlLWZyYWdtZW50IGF0dHJpYnV0ZSBmcm9tIGRhdGEtc2xhdGUtZnJhZ21lbnRcbiAqL1xuY29uc3QgY2F0Y2hTbGF0ZUZyYWdtZW50ID0gL2RhdGEtc2xhdGUtZnJhZ21lbnQ9XCIoLis/KVwiL21cbmV4cG9ydCBjb25zdCBnZXRTbGF0ZUZyYWdtZW50QXR0cmlidXRlID0gKFxuICBkYXRhVHJhbnNmZXI6IERhdGFUcmFuc2ZlclxuKTogc3RyaW5nIHwgdm9pZCA9PiB7XG4gIGNvbnN0IGh0bWxEYXRhID0gZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvaHRtbCcpXG4gIGNvbnN0IFssIGZyYWdtZW50XSA9IGh0bWxEYXRhLm1hdGNoKGNhdGNoU2xhdGVGcmFnbWVudCkgfHwgW11cbiAgcmV0dXJuIGZyYWdtZW50XG59XG5cbi8qKlxuICogR2V0IHRoZSB4LXNsYXRlLWZyYWdtZW50IGF0dHJpYnV0ZSB0aGF0IGV4aXN0IGluIHRleHQvaHRtbCBkYXRhXG4gKiBhbmQgYXBwZW5kIGl0IHRvIHRoZSBEYXRhVHJhbnNmZXIgb2JqZWN0XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDbGlwYm9hcmREYXRhID0gKGRhdGFUcmFuc2ZlcjogRGF0YVRyYW5zZmVyKTogRGF0YVRyYW5zZmVyID0+IHtcbiAgaWYgKCFkYXRhVHJhbnNmZXIuZ2V0RGF0YSgnYXBwbGljYXRpb24veC1zbGF0ZS1mcmFnbWVudCcpKSB7XG4gICAgY29uc3QgZnJhZ21lbnQgPSBnZXRTbGF0ZUZyYWdtZW50QXR0cmlidXRlKGRhdGFUcmFuc2ZlcilcbiAgICBpZiAoZnJhZ21lbnQpIHtcbiAgICAgIGNvbnN0IGNsaXBib2FyZERhdGEgPSBuZXcgRGF0YVRyYW5zZmVyKClcbiAgICAgIGRhdGFUcmFuc2Zlci50eXBlcy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgICBjbGlwYm9hcmREYXRhLnNldERhdGEodHlwZSwgZGF0YVRyYW5zZmVyLmdldERhdGEodHlwZSkpXG4gICAgICB9KVxuICAgICAgY2xpcGJvYXJkRGF0YS5zZXREYXRhKCdhcHBsaWNhdGlvbi94LXNsYXRlLWZyYWdtZW50JywgZnJhZ21lbnQpXG4gICAgICByZXR1cm4gY2xpcGJvYXJkRGF0YVxuICAgIH1cbiAgfVxuICByZXR1cm4gZGF0YVRyYW5zZmVyXG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciBhIG11dGF0aW9uIG9yaWdpbmF0ZXMgZnJvbSBhIGVkaXRhYmxlIGVsZW1lbnQgaW5zaWRlIHRoZSBlZGl0b3IuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGlzVHJhY2tlZE11dGF0aW9uID0gKFxuICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICBtdXRhdGlvbjogTXV0YXRpb25SZWNvcmQsXG4gIGJhdGNoOiBNdXRhdGlvblJlY29yZFtdXG4pOiBib29sZWFuID0+IHtcbiAgY29uc3QgeyB0YXJnZXQgfSA9IG11dGF0aW9uXG4gIGlmIChpc0RPTUVsZW1lbnQodGFyZ2V0KSAmJiB0YXJnZXQubWF0Y2hlcygnW2NvbnRlbnRFZGl0YWJsZT1cImZhbHNlXCJdJykpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGNvbnN0IHsgZG9jdW1lbnQgfSA9IFJlYWN0RWRpdG9yLmdldFdpbmRvdyhlZGl0b3IpXG4gIGlmIChkb2N1bWVudC5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgcmV0dXJuIFJlYWN0RWRpdG9yLmhhc0RPTU5vZGUoZWRpdG9yLCB0YXJnZXQsIHsgZWRpdGFibGU6IHRydWUgfSlcbiAgfVxuXG4gIGNvbnN0IHBhcmVudE11dGF0aW9uID0gYmF0Y2guZmluZCgoeyBhZGRlZE5vZGVzLCByZW1vdmVkTm9kZXMgfSkgPT4ge1xuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBhZGRlZE5vZGVzKSB7XG4gICAgICBpZiAobm9kZSA9PT0gdGFyZ2V0IHx8IG5vZGUuY29udGFpbnModGFyZ2V0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3Qgbm9kZSBvZiByZW1vdmVkTm9kZXMpIHtcbiAgICAgIGlmIChub2RlID09PSB0YXJnZXQgfHwgbm9kZS5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGlmICghcGFyZW50TXV0YXRpb24gfHwgcGFyZW50TXV0YXRpb24gPT09IG11dGF0aW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBUYXJnZXQgYWRkL3JlbW92ZSBpcyB0cmFja2VkLiBUcmFjayB0aGUgbXV0YXRpb24gaWYgd2UgdHJhY2sgdGhlIHBhcmVudCBtdXRhdGlvbi5cbiAgcmV0dXJuIGlzVHJhY2tlZE11dGF0aW9uKGVkaXRvciwgcGFyZW50TXV0YXRpb24sIGJhdGNoKVxufVxuIiwgImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcblxuZXhwb3J0IGNvbnN0IElTX1JFQUNUX1ZFUlNJT05fMTdfT1JfQUJPVkUgPVxuICBwYXJzZUludChSZWFjdC52ZXJzaW9uLnNwbGl0KCcuJylbMF0sIDEwKSA+PSAxN1xuXG5leHBvcnQgY29uc3QgSVNfSU9TID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiZcbiAgIXdpbmRvdy5NU1N0cmVhbVxuXG5leHBvcnQgY29uc3QgSVNfQVBQTEUgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAvTWFjIE9TIFgvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcblxuZXhwb3J0IGNvbnN0IElTX0FORFJPSUQgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAvQW5kcm9pZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG5leHBvcnQgY29uc3QgSVNfRklSRUZPWCA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gIC9eKD8hLipTZWFtb25rZXkpKD89LipGaXJlZm94KS4qL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG5leHBvcnQgY29uc3QgSVNfU0FGQVJJID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgL1ZlcnNpb25cXC9bXFxkXFwuXSsuKlNhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG4vLyBcIm1vZGVyblwiIEVkZ2Ugd2FzIHJlbGVhc2VkIGF0IDc5LnhcbmV4cG9ydCBjb25zdCBJU19FREdFX0xFR0FDWSA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gIC9FZGdlP1xcLyg/OlswLTZdWzAtOV18WzAtN11bMC04XSkoPzpcXC4pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXG5leHBvcnQgY29uc3QgSVNfQ0hST01FID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgL0Nocm9tZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcblxuLy8gTmF0aXZlIGBiZWZvcmVJbnB1dGAgZXZlbnRzIGRvbid0IHdvcmsgd2VsbCB3aXRoIHJlYWN0IG9uIENocm9tZSA3NVxuLy8gYW5kIG9sZGVyLCBDaHJvbWUgNzYrIGNhbiB1c2UgYGJlZm9yZUlucHV0YCB0aG91Z2guXG5leHBvcnQgY29uc3QgSVNfQ0hST01FX0xFR0FDWSA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gIC9DaHJvbWU/XFwvKD86WzAtN11bMC01XXxbMC02XVswLTldKSg/OlxcLikvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbi8vIEZpcmVmb3ggZGlkIG5vdCBzdXBwb3J0IGBiZWZvcmVJbnB1dGAgdW50aWwgYHY4N2AuXG5leHBvcnQgY29uc3QgSVNfRklSRUZPWF9MRUdBQ1kgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAvXig/IS4qU2VhbW9ua2V5KSg/PS4qRmlyZWZveFxcLyg/OlswLTddWzAtOV18WzAtOF1bMC02XSkoPzpcXC4pKS4qL2kudGVzdChcbiAgICBuYXZpZ2F0b3IudXNlckFnZW50XG4gIClcblxuLy8gVUMgbW9iaWxlIGJyb3dzZXJcbmV4cG9ydCBjb25zdCBJU19VQ19NT0JJTEUgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAvLipVQ0Jyb3dzZXIvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcblxuLy8gV2VjaGF0IGJyb3dzZXJcbmV4cG9ydCBjb25zdCBJU19XRUNIQVRCUk9XU0VSID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgLy4qV2VjaGF0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbi8vIENoZWNrIGlmIERPTSBpcyBhdmFpbGFibGUgYXMgUmVhY3QgZG9lcyBpbnRlcm5hbGx5LlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2Jsb2IvbWFzdGVyL3BhY2thZ2VzL3NoYXJlZC9FeGVjdXRpb25FbnZpcm9ubWVudC5qc1xuZXhwb3J0IGNvbnN0IENBTl9VU0VfRE9NID0gISEoXG4gIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gIHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gIHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCdcbilcblxuLy8gQ09NUEFUOiBGaXJlZm94L0VkZ2UgTGVnYWN5IGRvbid0IHN1cHBvcnQgdGhlIGBiZWZvcmVpbnB1dGAgZXZlbnRcbi8vIENocm9tZSBMZWdhY3kgZG9lc24ndCBzdXBwb3J0IGBiZWZvcmVpbnB1dGAgY29ycmVjdGx5XG5leHBvcnQgY29uc3QgSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUID1cbiAgIUlTX0NIUk9NRV9MRUdBQ1kgJiZcbiAgIUlTX0VER0VfTEVHQUNZICYmXG4gIC8vIGdsb2JhbFRoaXMgaXMgdW5kZWZpbmVkIGluIG9sZGVyIGJyb3dzZXJzXG4gIHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyAmJlxuICBnbG9iYWxUaGlzLklucHV0RXZlbnQgJiZcbiAgLy8gQHRzLWlnbm9yZSBUaGUgYGdldFRhcmdldFJhbmdlc2AgcHJvcGVydHkgaXNuJ3QgcmVjb2duaXplZC5cbiAgdHlwZW9mIGdsb2JhbFRoaXMuSW5wdXRFdmVudC5wcm90b3R5cGUuZ2V0VGFyZ2V0UmFuZ2VzID09PSAnZnVuY3Rpb24nXG4iLCAiaW1wb3J0IHtcbiAgQmFzZUVkaXRvcixcbiAgRWRpdG9yLFxuICBOb2RlLFxuICBQYXRoLFxuICBQb2ludCxcbiAgUmFuZ2UsXG4gIFNjcnViYmVyLFxuICBUcmFuc2Zvcm1zLFxuICBFbGVtZW50LFxufSBmcm9tICdzbGF0ZSdcblxuaW1wb3J0IHsgS2V5IH0gZnJvbSAnLi4vdXRpbHMva2V5J1xuaW1wb3J0IHtcbiAgRURJVE9SX1RPX0VMRU1FTlQsXG4gIEVMRU1FTlRfVE9fTk9ERSxcbiAgSVNfRk9DVVNFRCxcbiAgSVNfUkVBRF9PTkxZLFxuICBOT0RFX1RPX0lOREVYLFxuICBOT0RFX1RPX0tFWSxcbiAgTk9ERV9UT19QQVJFTlQsXG4gIEVESVRPUl9UT19XSU5ET1csXG4gIEVESVRPUl9UT19LRVlfVE9fRUxFTUVOVCxcbiAgSVNfQ09NUE9TSU5HLFxuICBFRElUT1JfVE9fU0NIRURVTEVfRkxVU0gsXG4gIEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLFxufSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQge1xuICBET01FbGVtZW50LFxuICBET01Ob2RlLFxuICBET01Qb2ludCxcbiAgRE9NUmFuZ2UsXG4gIERPTVNlbGVjdGlvbixcbiAgRE9NU3RhdGljUmFuZ2UsXG4gIGlzRE9NRWxlbWVudCxcbiAgaXNET01TZWxlY3Rpb24sXG4gIGlzRE9NTm9kZSxcbiAgbm9ybWFsaXplRE9NUG9pbnQsXG4gIGhhc1NoYWRvd1Jvb3QsXG4gIERPTVRleHQsXG59IGZyb20gJy4uL3V0aWxzL2RvbSdcbmltcG9ydCB7IElTX0NIUk9NRSwgSVNfRklSRUZPWCwgSVNfQU5EUk9JRCB9IGZyb20gJy4uL3V0aWxzL2Vudmlyb25tZW50J1xuXG4vKipcbiAqIEEgUmVhY3QgYW5kIERPTS1zcGVjaWZpYyB2ZXJzaW9uIG9mIHRoZSBgRWRpdG9yYCBpbnRlcmZhY2UuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBSZWFjdEVkaXRvciBleHRlbmRzIEJhc2VFZGl0b3Ige1xuICBpbnNlcnREYXRhOiAoZGF0YTogRGF0YVRyYW5zZmVyKSA9PiB2b2lkXG4gIGluc2VydEZyYWdtZW50RGF0YTogKGRhdGE6IERhdGFUcmFuc2ZlcikgPT4gYm9vbGVhblxuICBpbnNlcnRUZXh0RGF0YTogKGRhdGE6IERhdGFUcmFuc2ZlcikgPT4gYm9vbGVhblxuICBzZXRGcmFnbWVudERhdGE6IChcbiAgICBkYXRhOiBEYXRhVHJhbnNmZXIsXG4gICAgb3JpZ2luRXZlbnQ/OiAnZHJhZycgfCAnY29weScgfCAnY3V0J1xuICApID0+IHZvaWRcbiAgaGFzUmFuZ2U6IChlZGl0b3I6IFJlYWN0RWRpdG9yLCByYW5nZTogUmFuZ2UpID0+IGJvb2xlYW5cbiAgaGFzVGFyZ2V0OiAoXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICB0YXJnZXQ6IEV2ZW50VGFyZ2V0IHwgbnVsbFxuICApID0+IHRhcmdldCBpcyBET01Ob2RlXG4gIGhhc0VkaXRhYmxlVGFyZ2V0OiAoXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICB0YXJnZXQ6IEV2ZW50VGFyZ2V0IHwgbnVsbFxuICApID0+IHRhcmdldCBpcyBET01Ob2RlXG4gIGhhc1NlbGVjdGFibGVUYXJnZXQ6IChcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIHRhcmdldDogRXZlbnRUYXJnZXQgfCBudWxsXG4gICkgPT4gYm9vbGVhblxuICBpc1RhcmdldEluc2lkZU5vblJlYWRvbmx5Vm9pZDogKFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgdGFyZ2V0OiBFdmVudFRhcmdldCB8IG51bGxcbiAgKSA9PiBib29sZWFuXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBSZWFjdEVkaXRvciA9IHtcbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBjb21wb3NpbmcgaW5zaWRlIHRoZSBlZGl0b3IuXG4gICAqL1xuXG4gIGlzQ29tcG9zaW5nKGVkaXRvcjogUmVhY3RFZGl0b3IpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISFJU19DT01QT1NJTkcuZ2V0KGVkaXRvcilcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBob3N0IHdpbmRvdyBvZiB0aGUgY3VycmVudCBlZGl0b3IuXG4gICAqL1xuXG4gIGdldFdpbmRvdyhlZGl0b3I6IFJlYWN0RWRpdG9yKTogV2luZG93IHtcbiAgICBjb25zdCB3aW5kb3cgPSBFRElUT1JfVE9fV0lORE9XLmdldChlZGl0b3IpXG4gICAgaWYgKCF3aW5kb3cpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGZpbmQgYSBob3N0IHdpbmRvdyBlbGVtZW50IGZvciB0aGlzIGVkaXRvcicpXG4gICAgfVxuICAgIHJldHVybiB3aW5kb3dcbiAgfSxcblxuICAvKipcbiAgICogRmluZCBhIGtleSBmb3IgYSBTbGF0ZSBub2RlLlxuICAgKi9cblxuICBmaW5kS2V5KGVkaXRvcjogUmVhY3RFZGl0b3IsIG5vZGU6IE5vZGUpOiBLZXkge1xuICAgIGxldCBrZXkgPSBOT0RFX1RPX0tFWS5nZXQobm9kZSlcblxuICAgIGlmICgha2V5KSB7XG4gICAgICBrZXkgPSBuZXcgS2V5KClcbiAgICAgIE5PREVfVE9fS0VZLnNldChub2RlLCBrZXkpXG4gICAgfVxuXG4gICAgcmV0dXJuIGtleVxuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBwYXRoIG9mIFNsYXRlIG5vZGUuXG4gICAqL1xuXG4gIGZpbmRQYXRoKGVkaXRvcjogUmVhY3RFZGl0b3IsIG5vZGU6IE5vZGUpOiBQYXRoIHtcbiAgICBjb25zdCBwYXRoOiBQYXRoID0gW11cbiAgICBsZXQgY2hpbGQgPSBub2RlXG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgY29uc3QgcGFyZW50ID0gTk9ERV9UT19QQVJFTlQuZ2V0KGNoaWxkKVxuXG4gICAgICBpZiAocGFyZW50ID09IG51bGwpIHtcbiAgICAgICAgaWYgKEVkaXRvci5pc0VkaXRvcihjaGlsZCkpIHtcbiAgICAgICAgICByZXR1cm4gcGF0aFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgaSA9IE5PREVfVE9fSU5ERVguZ2V0KGNoaWxkKVxuXG4gICAgICBpZiAoaSA9PSBudWxsKSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIHBhdGgudW5zaGlmdChpKVxuICAgICAgY2hpbGQgPSBwYXJlbnRcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVW5hYmxlIHRvIGZpbmQgdGhlIHBhdGggZm9yIFNsYXRlIG5vZGU6ICR7U2NydWJiZXIuc3RyaW5naWZ5KG5vZGUpfWBcbiAgICApXG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIERPTSBub2RlIHRoYXQgaW1wbGVtZW50cyBEb2N1bWVudE9yU2hhZG93Um9vdCBmb3IgdGhlIGVkaXRvci5cbiAgICovXG5cbiAgZmluZERvY3VtZW50T3JTaGFkb3dSb290KGVkaXRvcjogUmVhY3RFZGl0b3IpOiBEb2N1bWVudCB8IFNoYWRvd1Jvb3Qge1xuICAgIGNvbnN0IGVsID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKVxuICAgIGNvbnN0IHJvb3QgPSBlbC5nZXRSb290Tm9kZSgpXG5cbiAgICBpZiAoXG4gICAgICAocm9vdCBpbnN0YW5jZW9mIERvY3VtZW50IHx8IHJvb3QgaW5zdGFuY2VvZiBTaGFkb3dSb290KSAmJlxuICAgICAgcm9vdC5nZXRTZWxlY3Rpb24gIT0gbnVsbFxuICAgICkge1xuICAgICAgcmV0dXJuIHJvb3RcbiAgICB9XG5cbiAgICByZXR1cm4gZWwub3duZXJEb2N1bWVudFxuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgZWRpdG9yIGlzIGZvY3VzZWQuXG4gICAqL1xuXG4gIGlzRm9jdXNlZChlZGl0b3I6IFJlYWN0RWRpdG9yKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhSVNfRk9DVVNFRC5nZXQoZWRpdG9yKVxuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgZWRpdG9yIGlzIGluIHJlYWQtb25seSBtb2RlLlxuICAgKi9cblxuICBpc1JlYWRPbmx5KGVkaXRvcjogUmVhY3RFZGl0b3IpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISFJU19SRUFEX09OTFkuZ2V0KGVkaXRvcilcbiAgfSxcblxuICAvKipcbiAgICogQmx1ciB0aGUgZWRpdG9yLlxuICAgKi9cblxuICBibHVyKGVkaXRvcjogUmVhY3RFZGl0b3IpOiB2b2lkIHtcbiAgICBjb25zdCBlbCA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcilcbiAgICBjb25zdCByb290ID0gUmVhY3RFZGl0b3IuZmluZERvY3VtZW50T3JTaGFkb3dSb290KGVkaXRvcilcbiAgICBJU19GT0NVU0VELnNldChlZGl0b3IsIGZhbHNlKVxuXG4gICAgaWYgKHJvb3QuYWN0aXZlRWxlbWVudCA9PT0gZWwpIHtcbiAgICAgIGVsLmJsdXIoKVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRm9jdXMgdGhlIGVkaXRvci5cbiAgICovXG5cbiAgZm9jdXMoZWRpdG9yOiBSZWFjdEVkaXRvcik6IHZvaWQge1xuICAgIGNvbnN0IGVsID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKVxuICAgIGNvbnN0IHJvb3QgPSBSZWFjdEVkaXRvci5maW5kRG9jdW1lbnRPclNoYWRvd1Jvb3QoZWRpdG9yKVxuICAgIElTX0ZPQ1VTRUQuc2V0KGVkaXRvciwgdHJ1ZSlcblxuICAgIGlmIChyb290LmFjdGl2ZUVsZW1lbnQgIT09IGVsKSB7XG4gICAgICBlbC5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSlcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlc2VsZWN0IHRoZSBlZGl0b3IuXG4gICAqL1xuXG4gIGRlc2VsZWN0KGVkaXRvcjogUmVhY3RFZGl0b3IpOiB2b2lkIHtcbiAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gICAgY29uc3Qgcm9vdCA9IFJlYWN0RWRpdG9yLmZpbmREb2N1bWVudE9yU2hhZG93Um9vdChlZGl0b3IpXG4gICAgY29uc3QgZG9tU2VsZWN0aW9uID0gcm9vdC5nZXRTZWxlY3Rpb24oKVxuXG4gICAgaWYgKGRvbVNlbGVjdGlvbiAmJiBkb21TZWxlY3Rpb24ucmFuZ2VDb3VudCA+IDApIHtcbiAgICAgIGRvbVNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKVxuICAgIH1cblxuICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgIFRyYW5zZm9ybXMuZGVzZWxlY3QoZWRpdG9yKVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBET00gbm9kZSBpcyB3aXRoaW4gdGhlIGVkaXRvci5cbiAgICovXG5cbiAgaGFzRE9NTm9kZShcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIHRhcmdldDogRE9NTm9kZSxcbiAgICBvcHRpb25zOiB7IGVkaXRhYmxlPzogYm9vbGVhbiB9ID0ge31cbiAgKTogYm9vbGVhbiB7XG4gICAgY29uc3QgeyBlZGl0YWJsZSA9IGZhbHNlIH0gPSBvcHRpb25zXG4gICAgY29uc3QgZWRpdG9yRWwgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBlZGl0b3IpXG4gICAgbGV0IHRhcmdldEVsXG5cbiAgICAvLyBDT01QQVQ6IEluIEZpcmVmb3gsIHJlYWRpbmcgYHRhcmdldC5ub2RlVHlwZWAgd2lsbCB0aHJvdyBhbiBlcnJvciBpZlxuICAgIC8vIHRhcmdldCBpcyBvcmlnaW5hdGluZyBmcm9tIGFuIGludGVybmFsIFwicmVzdHJpY3RlZFwiIGVsZW1lbnQgKGUuZy4gYVxuICAgIC8vIHN0ZXBwZXIgYXJyb3cgb24gYSBudW1iZXIgaW5wdXQpLiAoMjAxOC8wNS8wNClcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vaWFuc3Rvcm10YXlsb3Ivc2xhdGUvaXNzdWVzLzE4MTlcbiAgICB0cnkge1xuICAgICAgdGFyZ2V0RWwgPSAoaXNET01FbGVtZW50KHRhcmdldClcbiAgICAgICAgPyB0YXJnZXRcbiAgICAgICAgOiB0YXJnZXQucGFyZW50RWxlbWVudCkgYXMgSFRNTEVsZW1lbnRcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWVyci5tZXNzYWdlLmluY2x1ZGVzKCdQZXJtaXNzaW9uIGRlbmllZCB0byBhY2Nlc3MgcHJvcGVydHkgXCJub2RlVHlwZVwiJylcbiAgICAgICkge1xuICAgICAgICB0aHJvdyBlcnJcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXRhcmdldEVsKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgdGFyZ2V0RWwuY2xvc2VzdChgW2RhdGEtc2xhdGUtZWRpdG9yXWApID09PSBlZGl0b3JFbCAmJlxuICAgICAgKCFlZGl0YWJsZSB8fCB0YXJnZXRFbC5pc0NvbnRlbnRFZGl0YWJsZVxuICAgICAgICA/IHRydWVcbiAgICAgICAgOiAodHlwZW9mIHRhcmdldEVsLmlzQ29udGVudEVkaXRhYmxlID09PSAnYm9vbGVhbicgJiYgLy8gaXNDb250ZW50RWRpdGFibGUgZXhpc3RzIG9ubHkgb24gSFRNTEVsZW1lbnQsIGFuZCBvbiBvdGhlciBub2RlcyBpdCB3aWxsIGJlIHVuZGVmaW5lZFxuICAgICAgICAgICAgLy8gdGhpcyBpcyB0aGUgY29yZSBsb2dpYyB0aGF0IGxldHMgeW91IGtub3cgeW91IGdvdCB0aGUgcmlnaHQgZWRpdG9yLnNlbGVjdGlvbiBpbnN0ZWFkIG9mIG51bGwgd2hlbiBlZGl0b3IgaXMgY29udGVudGVkaXRhYmxlPVwiZmFsc2VcIihyZWFkT25seSlcbiAgICAgICAgICAgIHRhcmdldEVsLmNsb3Nlc3QoJ1tjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiXScpID09PSBlZGl0b3JFbCkgfHxcbiAgICAgICAgICAhIXRhcmdldEVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zbGF0ZS16ZXJvLXdpZHRoJykpXG4gICAgKVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbnNlcnQgZGF0YSBmcm9tIGEgYERhdGFUcmFuc2ZlcmAgaW50byB0aGUgZWRpdG9yLlxuICAgKi9cblxuICBpbnNlcnREYXRhKGVkaXRvcjogUmVhY3RFZGl0b3IsIGRhdGE6IERhdGFUcmFuc2Zlcik6IHZvaWQge1xuICAgIGVkaXRvci5pbnNlcnREYXRhKGRhdGEpXG4gIH0sXG5cbiAgLyoqXG4gICAqIEluc2VydCBmcmFnbWVudCBkYXRhIGZyb20gYSBgRGF0YVRyYW5zZmVyYCBpbnRvIHRoZSBlZGl0b3IuXG4gICAqL1xuXG4gIGluc2VydEZyYWdtZW50RGF0YShlZGl0b3I6IFJlYWN0RWRpdG9yLCBkYXRhOiBEYXRhVHJhbnNmZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZWRpdG9yLmluc2VydEZyYWdtZW50RGF0YShkYXRhKVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbnNlcnQgdGV4dCBkYXRhIGZyb20gYSBgRGF0YVRyYW5zZmVyYCBpbnRvIHRoZSBlZGl0b3IuXG4gICAqL1xuXG4gIGluc2VydFRleHREYXRhKGVkaXRvcjogUmVhY3RFZGl0b3IsIGRhdGE6IERhdGFUcmFuc2Zlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBlZGl0b3IuaW5zZXJ0VGV4dERhdGEoZGF0YSlcbiAgfSxcblxuICAvKipcbiAgICogU2V0cyBkYXRhIGZyb20gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBmcmFnbWVudCBvbiBhIGBEYXRhVHJhbnNmZXJgLlxuICAgKi9cblxuICBzZXRGcmFnbWVudERhdGEoXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICBkYXRhOiBEYXRhVHJhbnNmZXIsXG4gICAgb3JpZ2luRXZlbnQ/OiAnZHJhZycgfCAnY29weScgfCAnY3V0J1xuICApOiB2b2lkIHtcbiAgICBlZGl0b3Iuc2V0RnJhZ21lbnREYXRhKGRhdGEsIG9yaWdpbkV2ZW50KVxuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBuYXRpdmUgRE9NIGVsZW1lbnQgZnJvbSBhIFNsYXRlIG5vZGUuXG4gICAqL1xuXG4gIHRvRE9NTm9kZShlZGl0b3I6IFJlYWN0RWRpdG9yLCBub2RlOiBOb2RlKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IEtFWV9UT19FTEVNRU5UID0gRURJVE9SX1RPX0tFWV9UT19FTEVNRU5ULmdldChlZGl0b3IpXG4gICAgY29uc3QgZG9tTm9kZSA9IEVkaXRvci5pc0VkaXRvcihub2RlKVxuICAgICAgPyBFRElUT1JfVE9fRUxFTUVOVC5nZXQoZWRpdG9yKVxuICAgICAgOiBLRVlfVE9fRUxFTUVOVD8uZ2V0KFJlYWN0RWRpdG9yLmZpbmRLZXkoZWRpdG9yLCBub2RlKSlcblxuICAgIGlmICghZG9tTm9kZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IHJlc29sdmUgYSBET00gbm9kZSBmcm9tIFNsYXRlIG5vZGU6ICR7U2NydWJiZXIuc3RyaW5naWZ5KG5vZGUpfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tTm9kZVxuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kIGEgbmF0aXZlIERPTSBzZWxlY3Rpb24gcG9pbnQgZnJvbSBhIFNsYXRlIHBvaW50LlxuICAgKi9cblxuICB0b0RPTVBvaW50KGVkaXRvcjogUmVhY3RFZGl0b3IsIHBvaW50OiBQb2ludCk6IERPTVBvaW50IHtcbiAgICBjb25zdCBbbm9kZV0gPSBFZGl0b3Iubm9kZShlZGl0b3IsIHBvaW50LnBhdGgpXG4gICAgY29uc3QgZWwgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBub2RlKVxuICAgIGxldCBkb21Qb2ludDogRE9NUG9pbnQgfCB1bmRlZmluZWRcblxuICAgIC8vIElmIHdlJ3JlIGluc2lkZSBhIHZvaWQgbm9kZSwgZm9yY2UgdGhlIG9mZnNldCB0byAwLCBvdGhlcndpc2UgdGhlIHplcm9cbiAgICAvLyB3aWR0aCBzcGFjaW5nIGNoYXJhY3RlciB3aWxsIHJlc3VsdCBpbiBhbiBpbmNvcnJlY3Qgb2Zmc2V0IG9mIDFcbiAgICBpZiAoRWRpdG9yLnZvaWQoZWRpdG9yLCB7IGF0OiBwb2ludCB9KSkge1xuICAgICAgcG9pbnQgPSB7IHBhdGg6IHBvaW50LnBhdGgsIG9mZnNldDogMCB9XG4gICAgfVxuXG4gICAgLy8gRm9yIGVhY2ggbGVhZiwgd2UgbmVlZCB0byBpc29sYXRlIGl0cyBjb250ZW50LCB3aGljaCBtZWFucyBmaWx0ZXJpbmdcbiAgICAvLyB0byBpdHMgZGlyZWN0IHRleHQgYW5kIHplcm8td2lkdGggc3BhbnMuIChXZSBoYXZlIHRvIGZpbHRlciBvdXQgYW55XG4gICAgLy8gb3RoZXIgc2libGluZ3MgdGhhdCBtYXkgaGF2ZSBiZWVuIHJlbmRlcmVkIGFsb25nc2lkZSB0aGVtLilcbiAgICBjb25zdCBzZWxlY3RvciA9IGBbZGF0YS1zbGF0ZS1zdHJpbmddLCBbZGF0YS1zbGF0ZS16ZXJvLXdpZHRoXWBcbiAgICBjb25zdCB0ZXh0cyA9IEFycmF5LmZyb20oZWwucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpXG4gICAgbGV0IHN0YXJ0ID0gMFxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdGV4dCA9IHRleHRzW2ldXG4gICAgICBjb25zdCBkb21Ob2RlID0gdGV4dC5jaGlsZE5vZGVzWzBdIGFzIEhUTUxFbGVtZW50XG5cbiAgICAgIGlmIChkb21Ob2RlID09IG51bGwgfHwgZG9tTm9kZS50ZXh0Q29udGVudCA9PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBkb21Ob2RlLnRleHRDb250ZW50XG4gICAgICBjb25zdCBhdHRyID0gdGV4dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtbGVuZ3RoJylcbiAgICAgIGNvbnN0IHRydWVMZW5ndGggPSBhdHRyID09IG51bGwgPyBsZW5ndGggOiBwYXJzZUludChhdHRyLCAxMClcbiAgICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgdHJ1ZUxlbmd0aFxuXG4gICAgICAvLyBQcmVmZXIgcHV0dGluZyB0aGUgc2VsZWN0aW9uIGluc2lkZSB0aGUgbWFyayBwbGFjZWhvbGRlciB0byBlbnN1cmVcbiAgICAgIC8vIGNvbXBvc2VkIHRleHQgaXMgZGlzcGxheWVkIHdpdGggdGhlIGNvcnJlY3QgbWFya3MuXG4gICAgICBjb25zdCBuZXh0VGV4dCA9IHRleHRzW2kgKyAxXVxuICAgICAgaWYgKFxuICAgICAgICBwb2ludC5vZmZzZXQgPT09IGVuZCAmJlxuICAgICAgICBuZXh0VGV4dD8uaGFzQXR0cmlidXRlKCdkYXRhLXNsYXRlLW1hcmstcGxhY2Vob2xkZXInKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGRvbVRleHQgPSBuZXh0VGV4dC5jaGlsZE5vZGVzWzBdXG5cbiAgICAgICAgZG9tUG9pbnQgPSBbXG4gICAgICAgICAgLy8gQ09NUEFUOiBJZiB3ZSBkb24ndCBleHBsaWNpdHkgc2V0IHRoZSBkb20gcG9pbnQgdG8gYmUgb24gdGhlIGFjdHVhbFxuICAgICAgICAgIC8vIGRvbSB0ZXh0IGVsZW1lbnQsIGNocm9tZSB3aWxsIHB1dCB0aGUgc2VsZWN0aW9uIGJlaGluZCB0aGUgYWN0dWFsIGRvbVxuICAgICAgICAgIC8vIHRleHQgZWxlbWVudCwgY2F1c2luZyBkb21SYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSBjYWxscyBvbiBhIGNvbGxhcHNlZFxuICAgICAgICAgIC8vIHNlbGVjdGlvbiB0byByZXR1cm4gaW5jb3JyZWN0IHplcm8gdmFsdWVzIChodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00MzU0MzgpXG4gICAgICAgICAgLy8gd2hpY2ggd2lsbCBjYXVzZSBpc3N1ZXMgd2hlbiBzY3JvbGxpbmcgdG8gaXQuXG4gICAgICAgICAgZG9tVGV4dCBpbnN0YW5jZW9mIERPTVRleHQgPyBkb21UZXh0IDogbmV4dFRleHQsXG4gICAgICAgICAgbmV4dFRleHQudGV4dENvbnRlbnQ/LnN0YXJ0c1dpdGgoJ1xcdUZFRkYnKSA/IDEgOiAwLFxuICAgICAgICBdXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGlmIChwb2ludC5vZmZzZXQgPD0gZW5kKSB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IE1hdGgubWluKGxlbmd0aCwgTWF0aC5tYXgoMCwgcG9pbnQub2Zmc2V0IC0gc3RhcnQpKVxuICAgICAgICBkb21Qb2ludCA9IFtkb21Ob2RlLCBvZmZzZXRdXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIHN0YXJ0ID0gZW5kXG4gICAgfVxuXG4gICAgaWYgKCFkb21Qb2ludCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IHJlc29sdmUgYSBET00gcG9pbnQgZnJvbSBTbGF0ZSBwb2ludDogJHtTY3J1YmJlci5zdHJpbmdpZnkoXG4gICAgICAgICAgcG9pbnRcbiAgICAgICAgKX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIGRvbVBvaW50XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmQgYSBuYXRpdmUgRE9NIHJhbmdlIGZyb20gYSBTbGF0ZSBgcmFuZ2VgLlxuICAgKlxuICAgKiBOb3RpY2U6IHRoZSByZXR1cm5lZCByYW5nZSB3aWxsIGFsd2F5cyBiZSBvcmRpbmFsIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiBTbGF0ZSBgcmFuZ2VgIGR1ZSB0byBET00gQVBJIGxpbWl0LlxuICAgKlxuICAgKiB0aGVyZSBpcyBubyB3YXkgdG8gY3JlYXRlIGEgcmV2ZXJzZSBET00gUmFuZ2UgdXNpbmcgUmFuZ2Uuc2V0U3RhcnQvc2V0RW5kXG4gICAqIGFjY29yZGluZyB0byBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2NvbmNlcHQtcmFuZ2UtYnAtc2V0LlxuICAgKi9cblxuICB0b0RPTVJhbmdlKGVkaXRvcjogUmVhY3RFZGl0b3IsIHJhbmdlOiBSYW5nZSk6IERPTVJhbmdlIHtcbiAgICBjb25zdCB7IGFuY2hvciwgZm9jdXMgfSA9IHJhbmdlXG4gICAgY29uc3QgaXNCYWNrd2FyZCA9IFJhbmdlLmlzQmFja3dhcmQocmFuZ2UpXG4gICAgY29uc3QgZG9tQW5jaG9yID0gUmVhY3RFZGl0b3IudG9ET01Qb2ludChlZGl0b3IsIGFuY2hvcilcbiAgICBjb25zdCBkb21Gb2N1cyA9IFJhbmdlLmlzQ29sbGFwc2VkKHJhbmdlKVxuICAgICAgPyBkb21BbmNob3JcbiAgICAgIDogUmVhY3RFZGl0b3IudG9ET01Qb2ludChlZGl0b3IsIGZvY3VzKVxuXG4gICAgY29uc3Qgd2luZG93ID0gUmVhY3RFZGl0b3IuZ2V0V2luZG93KGVkaXRvcilcbiAgICBjb25zdCBkb21SYW5nZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVSYW5nZSgpXG4gICAgY29uc3QgW3N0YXJ0Tm9kZSwgc3RhcnRPZmZzZXRdID0gaXNCYWNrd2FyZCA/IGRvbUZvY3VzIDogZG9tQW5jaG9yXG4gICAgY29uc3QgW2VuZE5vZGUsIGVuZE9mZnNldF0gPSBpc0JhY2t3YXJkID8gZG9tQW5jaG9yIDogZG9tRm9jdXNcblxuICAgIC8vIEEgc2xhdGUgUG9pbnQgYXQgemVyby13aWR0aCBMZWFmIGFsd2F5cyBoYXMgYW4gb2Zmc2V0IG9mIDAgYnV0IGEgbmF0aXZlIERPTSBzZWxlY3Rpb24gYXRcbiAgICAvLyB6ZXJvLXdpZHRoIG5vZGUgaGFzIGFuIG9mZnNldCBvZiAxIHNvIHdlIGhhdmUgdG8gY2hlY2sgaWYgd2UgYXJlIGluIGEgemVyby13aWR0aCBub2RlIGFuZFxuICAgIC8vIGFkanVzdCB0aGUgb2Zmc2V0IGFjY29yZGluZ2x5LlxuICAgIGNvbnN0IHN0YXJ0RWwgPSAoaXNET01FbGVtZW50KHN0YXJ0Tm9kZSlcbiAgICAgID8gc3RhcnROb2RlXG4gICAgICA6IHN0YXJ0Tm9kZS5wYXJlbnRFbGVtZW50KSBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGlzU3RhcnRBdFplcm9XaWR0aCA9ICEhc3RhcnRFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtemVyby13aWR0aCcpXG4gICAgY29uc3QgZW5kRWwgPSAoaXNET01FbGVtZW50KGVuZE5vZGUpXG4gICAgICA/IGVuZE5vZGVcbiAgICAgIDogZW5kTm9kZS5wYXJlbnRFbGVtZW50KSBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IGlzRW5kQXRaZXJvV2lkdGggPSAhIWVuZEVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zbGF0ZS16ZXJvLXdpZHRoJylcblxuICAgIGRvbVJhbmdlLnNldFN0YXJ0KHN0YXJ0Tm9kZSwgaXNTdGFydEF0WmVyb1dpZHRoID8gMSA6IHN0YXJ0T2Zmc2V0KVxuICAgIGRvbVJhbmdlLnNldEVuZChlbmROb2RlLCBpc0VuZEF0WmVyb1dpZHRoID8gMSA6IGVuZE9mZnNldClcbiAgICByZXR1cm4gZG9tUmFuZ2VcbiAgfSxcblxuICAvKipcbiAgICogRmluZCBhIFNsYXRlIG5vZGUgZnJvbSBhIG5hdGl2ZSBET00gYGVsZW1lbnRgLlxuICAgKi9cblxuICB0b1NsYXRlTm9kZShlZGl0b3I6IFJlYWN0RWRpdG9yLCBkb21Ob2RlOiBET01Ob2RlKTogTm9kZSB7XG4gICAgbGV0IGRvbUVsID0gaXNET01FbGVtZW50KGRvbU5vZGUpID8gZG9tTm9kZSA6IGRvbU5vZGUucGFyZW50RWxlbWVudFxuXG4gICAgaWYgKGRvbUVsICYmICFkb21FbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtbm9kZScpKSB7XG4gICAgICBkb21FbCA9IGRvbUVsLmNsb3Nlc3QoYFtkYXRhLXNsYXRlLW5vZGVdYClcbiAgICB9XG5cbiAgICBjb25zdCBub2RlID0gZG9tRWwgPyBFTEVNRU5UX1RPX05PREUuZ2V0KGRvbUVsIGFzIEhUTUxFbGVtZW50KSA6IG51bGxcblxuICAgIGlmICghbm9kZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVzb2x2ZSBhIFNsYXRlIG5vZGUgZnJvbSBET00gbm9kZTogJHtkb21FbH1gKVxuICAgIH1cblxuICAgIHJldHVybiBub2RlXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdGFyZ2V0IHJhbmdlIGZyb20gYSBET00gYGV2ZW50YC5cbiAgICovXG5cbiAgZmluZEV2ZW50UmFuZ2UoZWRpdG9yOiBSZWFjdEVkaXRvciwgZXZlbnQ6IGFueSk6IFJhbmdlIHtcbiAgICBpZiAoJ25hdGl2ZUV2ZW50JyBpbiBldmVudCkge1xuICAgICAgZXZlbnQgPSBldmVudC5uYXRpdmVFdmVudFxuICAgIH1cblxuICAgIGNvbnN0IHsgY2xpZW50WDogeCwgY2xpZW50WTogeSwgdGFyZ2V0IH0gPSBldmVudFxuXG4gICAgaWYgKHggPT0gbnVsbCB8fCB5ID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJlc29sdmUgYSBTbGF0ZSByYW5nZSBmcm9tIGEgRE9NIGV2ZW50OiAke2V2ZW50fWApXG4gICAgfVxuXG4gICAgY29uc3Qgbm9kZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVOb2RlKGVkaXRvciwgZXZlbnQudGFyZ2V0KVxuICAgIGNvbnN0IHBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIG5vZGUpXG5cbiAgICAvLyBJZiB0aGUgZHJvcCB0YXJnZXQgaXMgaW5zaWRlIGEgdm9pZCBub2RlLCBtb3ZlIGl0IGludG8gZWl0aGVyIHRoZVxuICAgIC8vIG5leHQgb3IgcHJldmlvdXMgbm9kZSwgZGVwZW5kaW5nIG9uIHdoaWNoIHNpZGUgdGhlIGB4YCBhbmQgYHlgXG4gICAgLy8gY29vcmRpbmF0ZXMgYXJlIGNsb3Nlc3QgdG8uXG4gICAgaWYgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmIEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBub2RlKSkge1xuICAgICAgY29uc3QgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgY29uc3QgaXNQcmV2ID0gZWRpdG9yLmlzSW5saW5lKG5vZGUpXG4gICAgICAgID8geCAtIHJlY3QubGVmdCA8IHJlY3QubGVmdCArIHJlY3Qud2lkdGggLSB4XG4gICAgICAgIDogeSAtIHJlY3QudG9wIDwgcmVjdC50b3AgKyByZWN0LmhlaWdodCAtIHlcblxuICAgICAgY29uc3QgZWRnZSA9IEVkaXRvci5wb2ludChlZGl0b3IsIHBhdGgsIHtcbiAgICAgICAgZWRnZTogaXNQcmV2ID8gJ3N0YXJ0JyA6ICdlbmQnLFxuICAgICAgfSlcbiAgICAgIGNvbnN0IHBvaW50ID0gaXNQcmV2XG4gICAgICAgID8gRWRpdG9yLmJlZm9yZShlZGl0b3IsIGVkZ2UpXG4gICAgICAgIDogRWRpdG9yLmFmdGVyKGVkaXRvciwgZWRnZSlcblxuICAgICAgaWYgKHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHJhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgcG9pbnQpXG4gICAgICAgIHJldHVybiByYW5nZVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEVsc2UgcmVzb2x2ZSBhIHJhbmdlIGZyb20gdGhlIGNhcmV0IHBvc2l0aW9uIHdoZXJlIHRoZSBkcm9wIG9jY3VyZWQuXG4gICAgbGV0IGRvbVJhbmdlXG4gICAgY29uc3QgeyBkb2N1bWVudCB9ID0gUmVhY3RFZGl0b3IuZ2V0V2luZG93KGVkaXRvcilcblxuICAgIC8vIENPTVBBVDogSW4gRmlyZWZveCwgYGNhcmV0UmFuZ2VGcm9tUG9pbnRgIGRvZXNuJ3QgZXhpc3QuICgyMDE2LzA3LzI1KVxuICAgIGlmIChkb2N1bWVudC5jYXJldFJhbmdlRnJvbVBvaW50KSB7XG4gICAgICBkb21SYW5nZSA9IGRvY3VtZW50LmNhcmV0UmFuZ2VGcm9tUG9pbnQoeCwgeSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBkb2N1bWVudC5jYXJldFBvc2l0aW9uRnJvbVBvaW50KHgsIHkpXG5cbiAgICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgICBkb21SYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKClcbiAgICAgICAgZG9tUmFuZ2Uuc2V0U3RhcnQocG9zaXRpb24ub2Zmc2V0Tm9kZSwgcG9zaXRpb24ub2Zmc2V0KVxuICAgICAgICBkb21SYW5nZS5zZXRFbmQocG9zaXRpb24ub2Zmc2V0Tm9kZSwgcG9zaXRpb24ub2Zmc2V0KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZG9tUmFuZ2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJlc29sdmUgYSBTbGF0ZSByYW5nZSBmcm9tIGEgRE9NIGV2ZW50OiAke2V2ZW50fWApXG4gICAgfVxuXG4gICAgLy8gUmVzb2x2ZSBhIFNsYXRlIHJhbmdlIGZyb20gdGhlIERPTSByYW5nZS5cbiAgICBjb25zdCByYW5nZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVSYW5nZShlZGl0b3IsIGRvbVJhbmdlLCB7XG4gICAgICBleGFjdE1hdGNoOiBmYWxzZSxcbiAgICAgIHN1cHByZXNzVGhyb3c6IGZhbHNlLFxuICAgIH0pXG4gICAgcmV0dXJuIHJhbmdlXG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmQgYSBTbGF0ZSBwb2ludCBmcm9tIGEgRE9NIHNlbGVjdGlvbidzIGBkb21Ob2RlYCBhbmQgYGRvbU9mZnNldGAuXG4gICAqL1xuXG4gIHRvU2xhdGVQb2ludDxUIGV4dGVuZHMgYm9vbGVhbj4oXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICBkb21Qb2ludDogRE9NUG9pbnQsXG4gICAgb3B0aW9uczoge1xuICAgICAgZXhhY3RNYXRjaDogYm9vbGVhblxuICAgICAgc3VwcHJlc3NUaHJvdzogVFxuICAgIH1cbiAgKTogVCBleHRlbmRzIHRydWUgPyBQb2ludCB8IG51bGwgOiBQb2ludCB7XG4gICAgY29uc3QgeyBleGFjdE1hdGNoLCBzdXBwcmVzc1Rocm93IH0gPSBvcHRpb25zXG4gICAgY29uc3QgW25lYXJlc3ROb2RlLCBuZWFyZXN0T2Zmc2V0XSA9IGV4YWN0TWF0Y2hcbiAgICAgID8gZG9tUG9pbnRcbiAgICAgIDogbm9ybWFsaXplRE9NUG9pbnQoZG9tUG9pbnQpXG4gICAgY29uc3QgcGFyZW50Tm9kZSA9IG5lYXJlc3ROb2RlLnBhcmVudE5vZGUgYXMgRE9NRWxlbWVudFxuICAgIGxldCB0ZXh0Tm9kZTogRE9NRWxlbWVudCB8IG51bGwgPSBudWxsXG4gICAgbGV0IG9mZnNldCA9IDBcblxuICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICBjb25zdCBlZGl0b3JFbCA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcilcbiAgICAgIGNvbnN0IHBvdGVudGlhbFZvaWROb2RlID0gcGFyZW50Tm9kZS5jbG9zZXN0KCdbZGF0YS1zbGF0ZS12b2lkPVwidHJ1ZVwiXScpXG4gICAgICAvLyBOZWVkIHRvIGVuc3VyZSB0aGF0IHRoZSBjbG9zZXN0IHZvaWQgbm9kZSBpcyBhY3R1YWxseSBhIHZvaWQgbm9kZVxuICAgICAgLy8gd2l0aGluIHRoaXMgZWRpdG9yLCBhbmQgbm90IGEgdm9pZCBub2RlIHdpdGhpbiBzb21lIHBhcmVudCBlZGl0b3IuIFRoaXMgY2FuIGhhcHBlblxuICAgICAgLy8gaWYgdGhpcyBlZGl0b3IgaXMgd2l0aGluIGEgdm9pZCBub2RlIG9mIGFub3RoZXIgZWRpdG9yIChcIm5lc3RlZCBlZGl0b3JzXCIsIGxpa2UgaW5cbiAgICAgIC8vIHRoZSBcIkVkaXRhYmxlIFZvaWRzXCIgZXhhbXBsZSBvbiB0aGUgZG9jcyBzaXRlKS5cbiAgICAgIGNvbnN0IHZvaWROb2RlID1cbiAgICAgICAgcG90ZW50aWFsVm9pZE5vZGUgJiYgZWRpdG9yRWwuY29udGFpbnMocG90ZW50aWFsVm9pZE5vZGUpXG4gICAgICAgICAgPyBwb3RlbnRpYWxWb2lkTm9kZVxuICAgICAgICAgIDogbnVsbFxuICAgICAgbGV0IGxlYWZOb2RlID0gcGFyZW50Tm9kZS5jbG9zZXN0KCdbZGF0YS1zbGF0ZS1sZWFmXScpXG4gICAgICBsZXQgZG9tTm9kZTogRE9NRWxlbWVudCB8IG51bGwgPSBudWxsXG5cbiAgICAgIC8vIENhbGN1bGF0ZSBob3cgZmFyIGludG8gdGhlIHRleHQgbm9kZSB0aGUgYG5lYXJlc3ROb2RlYCBpcywgc28gdGhhdCB3ZVxuICAgICAgLy8gY2FuIGRldGVybWluZSB3aGF0IHRoZSBvZmZzZXQgcmVsYXRpdmUgdG8gdGhlIHRleHQgbm9kZSBpcy5cbiAgICAgIGlmIChsZWFmTm9kZSkge1xuICAgICAgICB0ZXh0Tm9kZSA9IGxlYWZOb2RlLmNsb3Nlc3QoJ1tkYXRhLXNsYXRlLW5vZGU9XCJ0ZXh0XCJdJylcblxuICAgICAgICBpZiAodGV4dE5vZGUpIHtcbiAgICAgICAgICBjb25zdCB3aW5kb3cgPSBSZWFjdEVkaXRvci5nZXRXaW5kb3coZWRpdG9yKVxuICAgICAgICAgIGNvbnN0IHJhbmdlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZVJhbmdlKClcbiAgICAgICAgICByYW5nZS5zZXRTdGFydCh0ZXh0Tm9kZSwgMClcbiAgICAgICAgICByYW5nZS5zZXRFbmQobmVhcmVzdE5vZGUsIG5lYXJlc3RPZmZzZXQpXG5cbiAgICAgICAgICBjb25zdCBjb250ZW50cyA9IHJhbmdlLmNsb25lQ29udGVudHMoKVxuICAgICAgICAgIGNvbnN0IHJlbW92YWxzID0gW1xuICAgICAgICAgICAgLi4uQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoXG4gICAgICAgICAgICAgIGNvbnRlbnRzLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNsYXRlLXplcm8td2lkdGhdJylcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICAuLi5BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChcbiAgICAgICAgICAgICAgY29udGVudHMucXVlcnlTZWxlY3RvckFsbCgnW2NvbnRlbnRlZGl0YWJsZT1mYWxzZV0nKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICBdXG5cbiAgICAgICAgICByZW1vdmFscy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIC8vIENPTVBBVDogV2hpbGUgY29tcG9zaW5nIGF0IHRoZSBzdGFydCBvZiBhIHRleHQgbm9kZSwgc29tZSBrZXlib2FyZHMgcHV0XG4gICAgICAgICAgICAvLyB0aGUgdGV4dCBjb250ZW50IGluc2lkZSB0aGUgemVybyB3aWR0aCBzcGFjZS5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgSVNfQU5EUk9JRCAmJlxuICAgICAgICAgICAgICAhZXhhY3RNYXRjaCAmJlxuICAgICAgICAgICAgICBlbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtemVyby13aWR0aCcpICYmXG4gICAgICAgICAgICAgIGVsLnRleHRDb250ZW50Lmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgZWwudGV4dENvbnRleHQgIT09ICdcXHVGRUZGJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGlmIChlbC50ZXh0Q29udGVudC5zdGFydHNXaXRoKCdcXHVGRUZGJykpIHtcbiAgICAgICAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IGVsLnRleHRDb250ZW50LnNsaWNlKDEpXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWwhLnBhcmVudE5vZGUhLnJlbW92ZUNoaWxkKGVsKVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICAvLyBDT01QQVQ6IEVkZ2UgaGFzIGEgYnVnIHdoZXJlIFJhbmdlLnByb3RvdHlwZS50b1N0cmluZygpIHdpbGxcbiAgICAgICAgICAvLyBjb252ZXJ0IFxcbiBpbnRvIFxcclxcbi4gVGhlIGJ1ZyBjYXVzZXMgYSBsb29wIHdoZW4gc2xhdGUtcmVhY3RcbiAgICAgICAgICAvLyBhdHRlbXB0cyB0byByZXBvc2l0aW9uIGl0cyBjdXJzb3IgdG8gbWF0Y2ggdGhlIG5hdGl2ZSBwb3NpdGlvbi4gVXNlXG4gICAgICAgICAgLy8gdGV4dENvbnRlbnQubGVuZ3RoIGluc3RlYWQuXG4gICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9pc3N1ZXMvMTAyOTExMTYvXG4gICAgICAgICAgb2Zmc2V0ID0gY29udGVudHMudGV4dENvbnRlbnQhLmxlbmd0aFxuICAgICAgICAgIGRvbU5vZGUgPSB0ZXh0Tm9kZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHZvaWROb2RlKSB7XG4gICAgICAgIC8vIEZvciB2b2lkIG5vZGVzLCB0aGUgZWxlbWVudCB3aXRoIHRoZSBvZmZzZXQga2V5IHdpbGwgYmUgYSBjb3VzaW4sIG5vdCBhblxuICAgICAgICAvLyBhbmNlc3Rvciwgc28gZmluZCBpdCBieSBnb2luZyBkb3duIGZyb20gdGhlIG5lYXJlc3Qgdm9pZCBwYXJlbnQgYW5kIHRha2luZyB0aGVcbiAgICAgICAgLy8gZmlyc3Qgb25lIHRoYXQgaXNuJ3QgaW5zaWRlIGEgbmVzdGVkIGVkaXRvci5cbiAgICAgICAgY29uc3QgbGVhZk5vZGVzID0gdm9pZE5vZGUucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2xhdGUtbGVhZl0nKVxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbGVhZk5vZGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBsZWFmTm9kZXNbaW5kZXhdXG4gICAgICAgICAgaWYgKFJlYWN0RWRpdG9yLmhhc0RPTU5vZGUoZWRpdG9yLCBjdXJyZW50KSkge1xuICAgICAgICAgICAgbGVhZk5vZGUgPSBjdXJyZW50XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENPTVBBVDogSW4gcmVhZC1vbmx5IGVkaXRvcnMgdGhlIGxlYWYgaXMgbm90IHJlbmRlcmVkLlxuICAgICAgICBpZiAoIWxlYWZOb2RlKSB7XG4gICAgICAgICAgb2Zmc2V0ID0gMVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRleHROb2RlID0gbGVhZk5vZGUuY2xvc2VzdCgnW2RhdGEtc2xhdGUtbm9kZT1cInRleHRcIl0nKSFcbiAgICAgICAgICBkb21Ob2RlID0gbGVhZk5vZGVcbiAgICAgICAgICBvZmZzZXQgPSBkb21Ob2RlLnRleHRDb250ZW50IS5sZW5ndGhcbiAgICAgICAgICBkb21Ob2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNsYXRlLXplcm8td2lkdGhdJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBvZmZzZXQgLT0gZWwudGV4dENvbnRlbnQhLmxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBkb21Ob2RlICYmXG4gICAgICAgIG9mZnNldCA9PT0gZG9tTm9kZS50ZXh0Q29udGVudCEubGVuZ3RoICYmXG4gICAgICAgIC8vIENPTVBBVDogQW5kcm9pZCBJTUVzIG1pZ2h0IHJlbW92ZSB0aGUgemVybyB3aWR0aCBzcGFjZSB3aGlsZSBjb21wb3NpbmcsXG4gICAgICAgIC8vIGFuZCB3ZSBkb24ndCBhZGQgaXQgZm9yIGxpbmUtYnJlYWtzLlxuICAgICAgICBJU19BTkRST0lEICYmXG4gICAgICAgIGRvbU5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXNsYXRlLXplcm8td2lkdGgnKSA9PT0gJ3onICYmXG4gICAgICAgIGRvbU5vZGUudGV4dENvbnRlbnQ/LnN0YXJ0c1dpdGgoJ1xcdUZFRkYnKSAmJlxuICAgICAgICAvLyBDT01QQVQ6IElmIHRoZSBwYXJlbnQgbm9kZSBpcyBhIFNsYXRlIHplcm8td2lkdGggc3BhY2UsIGVkaXRvciBpc1xuICAgICAgICAvLyBiZWNhdXNlIHRoZSB0ZXh0IG5vZGUgc2hvdWxkIGhhdmUgbm8gY2hhcmFjdGVycy4gSG93ZXZlciwgZHVyaW5nIElNRVxuICAgICAgICAvLyBjb21wb3NpdGlvbiB0aGUgQVNDSUkgY2hhcmFjdGVycyB3aWxsIGJlIHByZXBlbmRlZCB0byB0aGUgemVyby13aWR0aFxuICAgICAgICAvLyBzcGFjZSwgc28gc3VidHJhY3QgMSBmcm9tIHRoZSBvZmZzZXQgdG8gYWNjb3VudCBmb3IgdGhlIHplcm8td2lkdGhcbiAgICAgICAgLy8gc3BhY2UgY2hhcmFjdGVyLlxuICAgICAgICAocGFyZW50Tm9kZS5oYXNBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtemVyby13aWR0aCcpIHx8XG4gICAgICAgICAgLy8gQ09NUEFUOiBJbiBGaXJlZm94LCBgcmFuZ2UuY2xvbmVDb250ZW50cygpYCByZXR1cm5zIGFuIGV4dHJhIHRyYWlsaW5nICdcXG4nXG4gICAgICAgICAgLy8gd2hlbiB0aGUgZG9jdW1lbnQgZW5kcyB3aXRoIGEgbmV3LWxpbmUgY2hhcmFjdGVyLiBUaGlzIHJlc3VsdHMgaW4gdGhlIG9mZnNldFxuICAgICAgICAgIC8vIGxlbmd0aCBiZWluZyBvZmYgYnkgb25lLCBzbyB3ZSBuZWVkIHRvIHN1YnRyYWN0IG9uZSB0byBhY2NvdW50IGZvciB0aGlzLlxuICAgICAgICAgIChJU19GSVJFRk9YICYmIGRvbU5vZGUudGV4dENvbnRlbnQ/LmVuZHNXaXRoKCdcXG5cXG4nKSkpXG4gICAgICApIHtcbiAgICAgICAgb2Zmc2V0LS1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoSVNfQU5EUk9JRCAmJiAhdGV4dE5vZGUgJiYgIWV4YWN0TWF0Y2gpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBwYXJlbnROb2RlLmhhc0F0dHJpYnV0ZSgnZGF0YS1zbGF0ZS1ub2RlJylcbiAgICAgICAgPyBwYXJlbnROb2RlXG4gICAgICAgIDogcGFyZW50Tm9kZS5jbG9zZXN0KCdbZGF0YS1zbGF0ZS1ub2RlXScpXG5cbiAgICAgIGlmIChub2RlICYmIFJlYWN0RWRpdG9yLmhhc0RPTU5vZGUoZWRpdG9yLCBub2RlLCB7IGVkaXRhYmxlOiB0cnVlIH0pKSB7XG4gICAgICAgIGNvbnN0IHNsYXRlTm9kZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVOb2RlKGVkaXRvciwgbm9kZSlcbiAgICAgICAgbGV0IHsgcGF0aCwgb2Zmc2V0IH0gPSBFZGl0b3Iuc3RhcnQoXG4gICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgIFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgc2xhdGVOb2RlKVxuICAgICAgICApXG5cbiAgICAgICAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNsYXRlLWxlYWZdJykpIHtcbiAgICAgICAgICBvZmZzZXQgPSBuZWFyZXN0T2Zmc2V0XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBwYXRoLCBvZmZzZXQgfSBhcyBUIGV4dGVuZHMgdHJ1ZSA/IFBvaW50IHwgbnVsbCA6IFBvaW50XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0ZXh0Tm9kZSkge1xuICAgICAgaWYgKHN1cHByZXNzVGhyb3cpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgYXMgVCBleHRlbmRzIHRydWUgPyBQb2ludCB8IG51bGwgOiBQb2ludFxuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IHJlc29sdmUgYSBTbGF0ZSBwb2ludCBmcm9tIERPTSBwb2ludDogJHtkb21Qb2ludH1gXG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gQ09NUEFUOiBJZiBzb21lb25lIGlzIGNsaWNraW5nIGZyb20gb25lIFNsYXRlIGVkaXRvciBpbnRvIGFub3RoZXIsXG4gICAgLy8gdGhlIHNlbGVjdCBldmVudCBmaXJlcyB0d2ljZSwgb25jZSBmb3IgdGhlIG9sZCBlZGl0b3IncyBgZWxlbWVudGBcbiAgICAvLyBmaXJzdCwgYW5kIHRoZW4gYWZ0ZXJ3YXJkcyBmb3IgdGhlIGNvcnJlY3QgYGVsZW1lbnRgLiAoMjAxNy8wMy8wMylcbiAgICBjb25zdCBzbGF0ZU5vZGUgPSBSZWFjdEVkaXRvci50b1NsYXRlTm9kZShlZGl0b3IsIHRleHROb2RlISlcbiAgICBjb25zdCBwYXRoID0gUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBzbGF0ZU5vZGUpXG4gICAgcmV0dXJuIHsgcGF0aCwgb2Zmc2V0IH0gYXMgVCBleHRlbmRzIHRydWUgPyBQb2ludCB8IG51bGwgOiBQb2ludFxuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kIGEgU2xhdGUgcmFuZ2UgZnJvbSBhIERPTSByYW5nZSBvciBzZWxlY3Rpb24uXG4gICAqL1xuXG4gIHRvU2xhdGVSYW5nZTxUIGV4dGVuZHMgYm9vbGVhbj4oXG4gICAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgICBkb21SYW5nZTogRE9NUmFuZ2UgfCBET01TdGF0aWNSYW5nZSB8IERPTVNlbGVjdGlvbixcbiAgICBvcHRpb25zOiB7XG4gICAgICBleGFjdE1hdGNoOiBib29sZWFuXG4gICAgICBzdXBwcmVzc1Rocm93OiBUXG4gICAgfVxuICApOiBUIGV4dGVuZHMgdHJ1ZSA/IFJhbmdlIHwgbnVsbCA6IFJhbmdlIHtcbiAgICBjb25zdCB7IGV4YWN0TWF0Y2gsIHN1cHByZXNzVGhyb3cgfSA9IG9wdGlvbnNcbiAgICBjb25zdCBlbCA9IGlzRE9NU2VsZWN0aW9uKGRvbVJhbmdlKVxuICAgICAgPyBkb21SYW5nZS5hbmNob3JOb2RlXG4gICAgICA6IGRvbVJhbmdlLnN0YXJ0Q29udGFpbmVyXG4gICAgbGV0IGFuY2hvck5vZGVcbiAgICBsZXQgYW5jaG9yT2Zmc2V0XG4gICAgbGV0IGZvY3VzTm9kZVxuICAgIGxldCBmb2N1c09mZnNldFxuICAgIGxldCBpc0NvbGxhcHNlZFxuXG4gICAgaWYgKGVsKSB7XG4gICAgICBpZiAoaXNET01TZWxlY3Rpb24oZG9tUmFuZ2UpKSB7XG4gICAgICAgIGFuY2hvck5vZGUgPSBkb21SYW5nZS5hbmNob3JOb2RlXG4gICAgICAgIGFuY2hvck9mZnNldCA9IGRvbVJhbmdlLmFuY2hvck9mZnNldFxuICAgICAgICBmb2N1c05vZGUgPSBkb21SYW5nZS5mb2N1c05vZGVcbiAgICAgICAgZm9jdXNPZmZzZXQgPSBkb21SYW5nZS5mb2N1c09mZnNldFxuICAgICAgICAvLyBDT01QQVQ6IFRoZXJlJ3MgYSBidWcgaW4gY2hyb21lIHRoYXQgYWx3YXlzIHJldHVybnMgYHRydWVgIGZvclxuICAgICAgICAvLyBgaXNDb2xsYXBzZWRgIGZvciBhIFNlbGVjdGlvbiB0aGF0IGNvbWVzIGZyb20gYSBTaGFkb3dSb290LlxuICAgICAgICAvLyAoMjAyMC8wOC8wOClcbiAgICAgICAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDQ3NTIzXG4gICAgICAgIGlmIChJU19DSFJPTUUgJiYgaGFzU2hhZG93Um9vdChhbmNob3JOb2RlKSkge1xuICAgICAgICAgIGlzQ29sbGFwc2VkID1cbiAgICAgICAgICAgIGRvbVJhbmdlLmFuY2hvck5vZGUgPT09IGRvbVJhbmdlLmZvY3VzTm9kZSAmJlxuICAgICAgICAgICAgZG9tUmFuZ2UuYW5jaG9yT2Zmc2V0ID09PSBkb21SYW5nZS5mb2N1c09mZnNldFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlzQ29sbGFwc2VkID0gZG9tUmFuZ2UuaXNDb2xsYXBzZWRcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYW5jaG9yTm9kZSA9IGRvbVJhbmdlLnN0YXJ0Q29udGFpbmVyXG4gICAgICAgIGFuY2hvck9mZnNldCA9IGRvbVJhbmdlLnN0YXJ0T2Zmc2V0XG4gICAgICAgIGZvY3VzTm9kZSA9IGRvbVJhbmdlLmVuZENvbnRhaW5lclxuICAgICAgICBmb2N1c09mZnNldCA9IGRvbVJhbmdlLmVuZE9mZnNldFxuICAgICAgICBpc0NvbGxhcHNlZCA9IGRvbVJhbmdlLmNvbGxhcHNlZFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGFuY2hvck5vZGUgPT0gbnVsbCB8fFxuICAgICAgZm9jdXNOb2RlID09IG51bGwgfHxcbiAgICAgIGFuY2hvck9mZnNldCA9PSBudWxsIHx8XG4gICAgICBmb2N1c09mZnNldCA9PSBudWxsXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgcmVzb2x2ZSBhIFNsYXRlIHJhbmdlIGZyb20gRE9NIHJhbmdlOiAke2RvbVJhbmdlfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICBsZXQgYW5jaG9yID0gUmVhY3RFZGl0b3IudG9TbGF0ZVBvaW50KGVkaXRvciwgW2FuY2hvck5vZGUsIGFuY2hvck9mZnNldF0sIHtcbiAgICAgIGV4YWN0TWF0Y2gsXG4gICAgICBzdXBwcmVzc1Rocm93LFxuICAgIH0pXG4gICAgaWYgKCFhbmNob3IpIHtcbiAgICAgIHJldHVybiBudWxsIGFzIFQgZXh0ZW5kcyB0cnVlID8gUmFuZ2UgfCBudWxsIDogUmFuZ2VcbiAgICB9XG5cbiAgICBsZXQgZm9jdXMgPSBpc0NvbGxhcHNlZFxuICAgICAgPyBhbmNob3JcbiAgICAgIDogUmVhY3RFZGl0b3IudG9TbGF0ZVBvaW50KGVkaXRvciwgW2ZvY3VzTm9kZSwgZm9jdXNPZmZzZXRdLCB7XG4gICAgICAgICAgZXhhY3RNYXRjaCxcbiAgICAgICAgICBzdXBwcmVzc1Rocm93LFxuICAgICAgICB9KVxuICAgIGlmICghZm9jdXMpIHtcbiAgICAgIHJldHVybiBudWxsIGFzIFQgZXh0ZW5kcyB0cnVlID8gUmFuZ2UgfCBudWxsIDogUmFuZ2VcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzdXBwb3NlIHdlIGhhdmUgdGhpcyBkb2N1bWVudDpcbiAgICAgKlxuICAgICAqIHsgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICogICBjaGlsZHJlbjogW1xuICAgICAqICAgICB7IHRleHQ6ICdmb28gJyB9LFxuICAgICAqICAgICB7IHRleHQ6ICdiYXInIH0sXG4gICAgICogICAgIHsgdGV4dDogJyBiYXonIH1cbiAgICAgKiAgIF1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBhIGRvdWJsZSBjbGljayBvbiBcImJhclwiIG9uIGNocm9tZSB3aWxsIGNyZWF0ZSB0aGlzIHJhbmdlOlxuICAgICAqXG4gICAgICogYW5jaG9yIC0+IFswLDFdIG9mZnNldCAwXG4gICAgICogZm9jdXMgIC0+IFswLDFdIG9mZnNldCAzXG4gICAgICpcbiAgICAgKiB3aGlsZSBvbiBmaXJlZm94IHdpbGwgY3JlYXRlIHRoaXMgcmFuZ2U6XG4gICAgICpcbiAgICAgKiBhbmNob3IgLT4gWzAsMF0gb2Zmc2V0IDRcbiAgICAgKiBmb2N1cyAgLT4gWzAsMl0gb2Zmc2V0IDBcbiAgICAgKlxuICAgICAqIGxldCdzIHRyeSB0byBmaXggaXQuLi5cbiAgICAgKi9cblxuICAgIGlmIChJU19GSVJFRk9YICYmICFpc0NvbGxhcHNlZCAmJiBhbmNob3JOb2RlICE9PSBmb2N1c05vZGUpIHtcbiAgICAgIGNvbnN0IGlzRW5kID0gRWRpdG9yLmlzRW5kKGVkaXRvciwgYW5jaG9yISwgYW5jaG9yLnBhdGgpXG4gICAgICBjb25zdCBpc1N0YXJ0ID0gRWRpdG9yLmlzU3RhcnQoZWRpdG9yLCBmb2N1cyEsIGZvY3VzLnBhdGgpXG5cbiAgICAgIGlmIChpc0VuZCkge1xuICAgICAgICBjb25zdCBhZnRlciA9IEVkaXRvci5hZnRlcihlZGl0b3IsIGFuY2hvciBhcyBQb2ludClcbiAgICAgICAgLy8gRWRpdG9yLmFmdGVyKCkgbWlnaHQgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICBhbmNob3IgPSAoYWZ0ZXIgfHwgYW5jaG9yISkgYXMgVCBleHRlbmRzIHRydWUgPyBQb2ludCB8IG51bGwgOiBQb2ludFxuICAgICAgfVxuXG4gICAgICBpZiAoaXNTdGFydCkge1xuICAgICAgICBjb25zdCBiZWZvcmUgPSBFZGl0b3IuYmVmb3JlKGVkaXRvciwgZm9jdXMgYXMgUG9pbnQpXG4gICAgICAgIGZvY3VzID0gKGJlZm9yZSB8fCBmb2N1cyEpIGFzIFQgZXh0ZW5kcyB0cnVlID8gUG9pbnQgfCBudWxsIDogUG9pbnRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcmFuZ2U6IFJhbmdlID0geyBhbmNob3I6IGFuY2hvciBhcyBQb2ludCwgZm9jdXM6IGZvY3VzIGFzIFBvaW50IH1cbiAgICAvLyBpZiB0aGUgc2VsZWN0aW9uIGlzIGEgaGFuZ2luZyByYW5nZSB0aGF0IGVuZHMgaW4gYSB2b2lkXG4gICAgLy8gYW5kIHRoZSBET00gZm9jdXMgaXMgYW4gRWxlbWVudFxuICAgIC8vIChtZWFuaW5nIHRoYXQgdGhlIHNlbGVjdGlvbiBlbmRzIGJlZm9yZSB0aGUgZWxlbWVudClcbiAgICAvLyB1bmhhbmcgdGhlIHJhbmdlIHRvIGF2b2lkIG1pc3Rha2VubHkgaW5jbHVkaW5nIHRoZSB2b2lkXG4gICAgaWYgKFxuICAgICAgUmFuZ2UuaXNFeHBhbmRlZChyYW5nZSkgJiZcbiAgICAgIFJhbmdlLmlzRm9yd2FyZChyYW5nZSkgJiZcbiAgICAgIGlzRE9NRWxlbWVudChmb2N1c05vZGUpICYmXG4gICAgICBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQ6IHJhbmdlLmZvY3VzLCBtb2RlOiAnaGlnaGVzdCcgfSlcbiAgICApIHtcbiAgICAgIHJhbmdlID0gRWRpdG9yLnVuaGFuZ1JhbmdlKGVkaXRvciwgcmFuZ2UsIHsgdm9pZHM6IHRydWUgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gKHJhbmdlIGFzIHVua25vd24pIGFzIFQgZXh0ZW5kcyB0cnVlID8gUmFuZ2UgfCBudWxsIDogUmFuZ2VcbiAgfSxcblxuICBoYXNSYW5nZShlZGl0b3I6IFJlYWN0RWRpdG9yLCByYW5nZTogUmFuZ2UpOiBib29sZWFuIHtcbiAgICBjb25zdCB7IGFuY2hvciwgZm9jdXMgfSA9IHJhbmdlXG4gICAgcmV0dXJuIChcbiAgICAgIEVkaXRvci5oYXNQYXRoKGVkaXRvciwgYW5jaG9yLnBhdGgpICYmIEVkaXRvci5oYXNQYXRoKGVkaXRvciwgZm9jdXMucGF0aClcbiAgICApXG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSB0YXJnZXQgaXMgaW4gdGhlIGVkaXRvci5cbiAgICovXG4gIGhhc1RhcmdldChcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIHRhcmdldDogRXZlbnRUYXJnZXQgfCBudWxsXG4gICk6IHRhcmdldCBpcyBET01Ob2RlIHtcbiAgICByZXR1cm4gaXNET01Ob2RlKHRhcmdldCkgJiYgUmVhY3RFZGl0b3IuaGFzRE9NTm9kZShlZGl0b3IsIHRhcmdldClcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHRhcmdldCBpcyBlZGl0YWJsZSBhbmQgaW4gdGhlIGVkaXRvci5cbiAgICovXG4gIGhhc0VkaXRhYmxlVGFyZ2V0KFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgdGFyZ2V0OiBFdmVudFRhcmdldCB8IG51bGxcbiAgKTogdGFyZ2V0IGlzIERPTU5vZGUge1xuICAgIHJldHVybiAoXG4gICAgICBpc0RPTU5vZGUodGFyZ2V0KSAmJlxuICAgICAgUmVhY3RFZGl0b3IuaGFzRE9NTm9kZShlZGl0b3IsIHRhcmdldCwgeyBlZGl0YWJsZTogdHJ1ZSB9KVxuICAgIClcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHRhcmdldCBjYW4gYmUgc2VsZWN0YWJsZVxuICAgKi9cbiAgaGFzU2VsZWN0YWJsZVRhcmdldChcbiAgICBlZGl0b3I6IFJlYWN0RWRpdG9yLFxuICAgIHRhcmdldDogRXZlbnRUYXJnZXQgfCBudWxsXG4gICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdEVkaXRvci5oYXNFZGl0YWJsZVRhcmdldChlZGl0b3IsIHRhcmdldCkgfHxcbiAgICAgIFJlYWN0RWRpdG9yLmlzVGFyZ2V0SW5zaWRlTm9uUmVhZG9ubHlWb2lkKGVkaXRvciwgdGFyZ2V0KVxuICAgIClcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHRhcmdldCBpcyBpbnNpZGUgdm9pZCBhbmQgaW4gYW4gbm9uLXJlYWRvbmx5IGVkaXRvci5cbiAgICovXG4gIGlzVGFyZ2V0SW5zaWRlTm9uUmVhZG9ubHlWb2lkKFxuICAgIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gICAgdGFyZ2V0OiBFdmVudFRhcmdldCB8IG51bGxcbiAgKTogYm9vbGVhbiB7XG4gICAgaWYgKElTX1JFQURfT05MWS5nZXQoZWRpdG9yKSkgcmV0dXJuIGZhbHNlXG5cbiAgICBjb25zdCBzbGF0ZU5vZGUgPVxuICAgICAgUmVhY3RFZGl0b3IuaGFzVGFyZ2V0KGVkaXRvciwgdGFyZ2V0KSAmJlxuICAgICAgUmVhY3RFZGl0b3IudG9TbGF0ZU5vZGUoZWRpdG9yLCB0YXJnZXQpXG4gICAgcmV0dXJuIEVsZW1lbnQuaXNFbGVtZW50KHNsYXRlTm9kZSkgJiYgRWRpdG9yLmlzVm9pZChlZGl0b3IsIHNsYXRlTm9kZSlcbiAgfSxcblxuICAvKipcbiAgICogRXhwZXJpbWVudGFsIGFuZCBhbmRyb2lkIHNwZWNpZmljOiBGbHVzaCBhbGwgcGVuZGluZyBkaWZmcyBhbmQgY2FuY2VsIGNvbXBvc2l0aW9uIGF0IHRoZSBuZXh0IHBvc3NpYmxlIHRpbWUuXG4gICAqL1xuICBhbmRyb2lkU2NoZWR1bGVGbHVzaChlZGl0b3I6IEVkaXRvcikge1xuICAgIEVESVRPUl9UT19TQ0hFRFVMRV9GTFVTSC5nZXQoZWRpdG9yKT8uKClcbiAgfSxcblxuICAvKipcbiAgICogRXhwZXJpbWVudGFsIGFuZCBhbmRyb2lkIHNwZWNpZmljOiBHZXQgcGVuZGluZyBkaWZmc1xuICAgKi9cbiAgYW5kcm9pZFBlbmRpbmdEaWZmcyhlZGl0b3I6IEVkaXRvcikge1xuICAgIHJldHVybiBFRElUT1JfVE9fUEVORElOR19ESUZGUy5nZXQoZWRpdG9yKVxuICB9LFxufVxuIiwgImltcG9ydCB7IHVzZUxheW91dEVmZmVjdCwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBDQU5fVVNFX0RPTSB9IGZyb20gJy4uL3V0aWxzL2Vudmlyb25tZW50J1xuXG4vKipcbiAqIFByZXZlbnQgd2FybmluZyBvbiBTU1IgYnkgZmFsbGluZyBiYWNrIHRvIHVzZUVmZmVjdCB3aGVuIERPTSBpc24ndCBhdmFpbGFibGVcbiAqL1xuXG5leHBvcnQgY29uc3QgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCA9IENBTl9VU0VfRE9NXG4gID8gdXNlTGF5b3V0RWZmZWN0XG4gIDogdXNlRWZmZWN0XG4iLCAiaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IFBMQUNFSE9MREVSX1NZTUJPTCB9IGZyb20gJy4vd2Vhay1tYXBzJ1xuXG5leHBvcnQgY29uc3Qgc2hhbGxvd0NvbXBhcmUgPSAob2JqMToge30sIG9iajI6IHt9KSA9PlxuICBPYmplY3Qua2V5cyhvYmoxKS5sZW5ndGggPT09IE9iamVjdC5rZXlzKG9iajIpLmxlbmd0aCAmJlxuICBPYmplY3Qua2V5cyhvYmoxKS5ldmVyeShcbiAgICBrZXkgPT4gb2JqMi5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIG9iajFba2V5XSA9PT0gb2JqMltrZXldXG4gIClcblxuLyoqXG4gKiBDaGVjayBpZiBhIGxpc3Qgb2YgZGVjb3JhdG9yIHJhbmdlcyBhcmUgZXF1YWwgdG8gYW5vdGhlci5cbiAqXG4gKiBQRVJGOiB0aGlzIHJlcXVpcmVzIHRoZSB0d28gbGlzdHMgdG8gYWxzbyBoYXZlIHRoZSByYW5nZXMgaW5zaWRlIHRoZW0gaW4gdGhlXG4gKiBzYW1lIG9yZGVyLCBidXQgdGhpcyBpcyBhbiBva2F5IGNvbnN0cmFpbnQgZm9yIHVzIHNpbmNlIGRlY29yYXRpb25zIGFyZVxuICoga2VwdCBpbiBvcmRlciwgYW5kIHRoZSBvZGQgY2FzZSB3aGVyZSB0aGV5IGFyZW4ndCBpcyBva2F5IHRvIHJlLXJlbmRlciBmb3IuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGlzRGVjb3JhdG9yUmFuZ2VMaXN0RXF1YWwgPSAoXG4gIGxpc3Q6IFJhbmdlW10sXG4gIGFub3RoZXI6IFJhbmdlW11cbik6IGJvb2xlYW4gPT4ge1xuICBpZiAobGlzdC5sZW5ndGggIT09IGFub3RoZXIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCByYW5nZSA9IGxpc3RbaV1cbiAgICBjb25zdCBvdGhlciA9IGFub3RoZXJbaV1cblxuICAgIGNvbnN0IHsgYW5jaG9yOiByYW5nZUFuY2hvciwgZm9jdXM6IHJhbmdlRm9jdXMsIC4uLnJhbmdlT3duUHJvcHMgfSA9IHJhbmdlXG4gICAgY29uc3QgeyBhbmNob3I6IG90aGVyQW5jaG9yLCBmb2N1czogb3RoZXJGb2N1cywgLi4ub3RoZXJPd25Qcm9wcyB9ID0gb3RoZXJcblxuICAgIGlmIChcbiAgICAgICFSYW5nZS5lcXVhbHMocmFuZ2UsIG90aGVyKSB8fFxuICAgICAgcmFuZ2VbUExBQ0VIT0xERVJfU1lNQk9MXSAhPT0gb3RoZXJbUExBQ0VIT0xERVJfU1lNQk9MXSB8fFxuICAgICAgIXNoYWxsb3dDb21wYXJlKHJhbmdlT3duUHJvcHMsIG90aGVyT3duUHJvcHMpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuIiwgImltcG9ydCBSZWFjdCwgeyB1c2VSZWYgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEVkaXRvciwgVGV4dCwgUGF0aCwgRWxlbWVudCwgTm9kZSB9IGZyb20gJ3NsYXRlJ1xuXG5pbXBvcnQgeyBSZWFjdEVkaXRvciwgdXNlU2xhdGVTdGF0aWMgfSBmcm9tICcuLidcbmltcG9ydCB7IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgfSBmcm9tICcuLi9ob29rcy91c2UtaXNvbW9ycGhpYy1sYXlvdXQtZWZmZWN0J1xuaW1wb3J0IHsgSVNfQU5EUk9JRCB9IGZyb20gJy4uL3V0aWxzL2Vudmlyb25tZW50J1xuaW1wb3J0IHsgTUFSS19QTEFDRUhPTERFUl9TWU1CT0wgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5cbi8qKlxuICogTGVhZiBjb250ZW50IHN0cmluZ3MuXG4gKi9cblxuY29uc3QgU3RyaW5nID0gKHByb3BzOiB7XG4gIGlzTGFzdDogYm9vbGVhblxuICBsZWFmOiBUZXh0XG4gIHBhcmVudDogRWxlbWVudFxuICB0ZXh0OiBUZXh0XG59KSA9PiB7XG4gIGNvbnN0IHsgaXNMYXN0LCBsZWFmLCBwYXJlbnQsIHRleHQgfSA9IHByb3BzXG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlU3RhdGljKClcbiAgY29uc3QgcGF0aCA9IFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgdGV4dClcbiAgY29uc3QgcGFyZW50UGF0aCA9IFBhdGgucGFyZW50KHBhdGgpXG4gIGNvbnN0IGlzTWFya1BsYWNlaG9sZGVyID0gbGVhZltNQVJLX1BMQUNFSE9MREVSX1NZTUJPTF0gPT09IHRydWVcblxuICAvLyBDT01QQVQ6IFJlbmRlciB0ZXh0IGluc2lkZSB2b2lkIG5vZGVzIHdpdGggYSB6ZXJvLXdpZHRoIHNwYWNlLlxuICAvLyBTbyB0aGUgbm9kZSBjYW4gY29udGFpbiBzZWxlY3Rpb24gYnV0IHRoZSB0ZXh0IGlzIG5vdCB2aXNpYmxlLlxuICBpZiAoZWRpdG9yLmlzVm9pZChwYXJlbnQpKSB7XG4gICAgcmV0dXJuIDxaZXJvV2lkdGhTdHJpbmcgbGVuZ3RoPXtOb2RlLnN0cmluZyhwYXJlbnQpLmxlbmd0aH0gLz5cbiAgfVxuXG4gIC8vIENPTVBBVDogSWYgdGhpcyBpcyB0aGUgbGFzdCB0ZXh0IG5vZGUgaW4gYW4gZW1wdHkgYmxvY2ssIHJlbmRlciBhIHplcm8tXG4gIC8vIHdpZHRoIHNwYWNlIHRoYXQgd2lsbCBjb252ZXJ0IGludG8gYSBsaW5lIGJyZWFrIHdoZW4gY29weWluZyBhbmQgcGFzdGluZ1xuICAvLyB0byBzdXBwb3J0IGV4cGVjdGVkIHBsYWluIHRleHQuXG4gIGlmIChcbiAgICBsZWFmLnRleHQgPT09ICcnICYmXG4gICAgcGFyZW50LmNoaWxkcmVuW3BhcmVudC5jaGlsZHJlbi5sZW5ndGggLSAxXSA9PT0gdGV4dCAmJlxuICAgICFlZGl0b3IuaXNJbmxpbmUocGFyZW50KSAmJlxuICAgIEVkaXRvci5zdHJpbmcoZWRpdG9yLCBwYXJlbnRQYXRoKSA9PT0gJydcbiAgKSB7XG4gICAgcmV0dXJuIDxaZXJvV2lkdGhTdHJpbmcgaXNMaW5lQnJlYWsgaXNNYXJrUGxhY2Vob2xkZXI9e2lzTWFya1BsYWNlaG9sZGVyfSAvPlxuICB9XG5cbiAgLy8gQ09NUEFUOiBJZiB0aGUgdGV4dCBpcyBlbXB0eSwgaXQncyBiZWNhdXNlIGl0J3Mgb24gdGhlIGVkZ2Ugb2YgYW4gaW5saW5lXG4gIC8vIG5vZGUsIHNvIHdlIHJlbmRlciBhIHplcm8td2lkdGggc3BhY2Ugc28gdGhhdCB0aGUgc2VsZWN0aW9uIGNhbiBiZVxuICAvLyBpbnNlcnRlZCBuZXh0IHRvIGl0IHN0aWxsLlxuICBpZiAobGVhZi50ZXh0ID09PSAnJykge1xuICAgIHJldHVybiA8WmVyb1dpZHRoU3RyaW5nIGlzTWFya1BsYWNlaG9sZGVyPXtpc01hcmtQbGFjZWhvbGRlcn0gLz5cbiAgfVxuXG4gIC8vIENPTVBBVDogQnJvd3NlcnMgd2lsbCBjb2xsYXBzZSB0cmFpbGluZyBuZXcgbGluZXMgYXQgdGhlIGVuZCBvZiBibG9ja3MsXG4gIC8vIHNvIHdlIG5lZWQgdG8gYWRkIGFuIGV4dHJhIHRyYWlsaW5nIG5ldyBsaW5lcyB0byBwcmV2ZW50IHRoYXQuXG4gIGlmIChpc0xhc3QgJiYgbGVhZi50ZXh0LnNsaWNlKC0xKSA9PT0gJ1xcbicpIHtcbiAgICByZXR1cm4gPFRleHRTdHJpbmcgaXNUcmFpbGluZyB0ZXh0PXtsZWFmLnRleHR9IC8+XG4gIH1cblxuICByZXR1cm4gPFRleHRTdHJpbmcgdGV4dD17bGVhZi50ZXh0fSAvPlxufVxuXG4vKipcbiAqIExlYWYgc3RyaW5ncyB3aXRoIHRleHQgaW4gdGhlbS5cbiAqL1xuY29uc3QgVGV4dFN0cmluZyA9IChwcm9wczogeyB0ZXh0OiBzdHJpbmc7IGlzVHJhaWxpbmc/OiBib29sZWFuIH0pID0+IHtcbiAgY29uc3QgeyB0ZXh0LCBpc1RyYWlsaW5nID0gZmFsc2UgfSA9IHByb3BzXG5cbiAgY29uc3QgcmVmID0gdXNlUmVmPEhUTUxTcGFuRWxlbWVudD4obnVsbClcblxuICBjb25zdCBnZXRUZXh0Q29udGVudCA9ICgpID0+IHtcbiAgICByZXR1cm4gYCR7dGV4dCA/PyAnJ30ke2lzVHJhaWxpbmcgPyAnXFxuJyA6ICcnfWBcbiAgfVxuXG4gIC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB0ZXh0IHJlbmRlcmluZyBib3VuZGFyeSB3aGVyZSB3ZSBpbnRlcmZhY2Ugd2l0aCB0aGUgRE9NXG4gIC8vIFRoZSB0ZXh0IGlzIG5vdCByZW5kZXJlZCBhcyBwYXJ0IG9mIHRoZSB2aXJ0dWFsIERPTSwgYXMgc2luY2Ugd2UgaGFuZGxlIGJhc2ljIGNoYXJhY3RlciBpbnNlcnRpb25zIG5hdGl2ZWx5LFxuICAvLyB1cGRhdGluZyB0aGUgRE9NIGlzIG5vdCBhIG9uZSB3YXkgZGF0YWZsb3cgYW55bW9yZS4gV2hhdCB3ZSBuZWVkIGhlcmUgaXMgbm90IHJlY29uY2lsaWF0aW9uIGFuZCBkaWZmaW5nXG4gIC8vIHdpdGggcHJldmlvdXMgdmVyc2lvbiBvZiB0aGUgdmlydHVhbCBET00sIGJ1dCByYXRoZXIgZGlmZmluZyB3aXRoIHRoZSBhY3R1YWwgRE9NIGVsZW1lbnQsIGFuZCByZXBsYWNlIHRoZSBET00gPHNwYW4+IGNvbnRlbnRcbiAgLy8gZXhhY3RseSBpZiBhbmQgb25seSBpZiBpdHMgY3VycmVudCBjb250ZW50IGRvZXMgbm90IG1hdGNoIG91ciBjdXJyZW50IHZpcnR1YWwgRE9NLlxuICAvLyBPdGhlcndpc2UgdGhlIERPTSBUZXh0Tm9kZSB3b3VsZCBhbHdheXMgYmUgcmVwbGFjZWQgYnkgUmVhY3QgYXMgdGhlIHVzZXIgdHlwZXMsIHdoaWNoIGludGVyZmVyZXMgd2l0aCBuYXRpdmUgdGV4dCBmZWF0dXJlcyxcbiAgLy8gZWcgbWFrZXMgbmF0aXZlIHNwZWxsY2hlY2sgb3B0IG91dCBmcm9tIGNoZWNraW5nIHRoZSB0ZXh0IG5vZGUuXG5cbiAgLy8gdXNlTGF5b3V0RWZmZWN0OiB1cGRhdGluZyBvdXIgc3BhbiBiZWZvcmUgYnJvd3NlciBwYWludFxuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAvLyBudWxsIGNvYWxlc2NpbmcgdGV4dCB0byBtYWtlIHN1cmUgd2UncmUgbm90IG91dHB1dGluZyBcIm51bGxcIiBhcyBhIHN0cmluZyBpbiB0aGUgZXh0cmVtZSBjYXNlIGl0IGlzIG51bGxpc2ggYXQgcnVudGltZVxuICAgIGNvbnN0IHRleHRXaXRoVHJhaWxpbmcgPSBnZXRUZXh0Q29udGVudCgpXG5cbiAgICBpZiAocmVmLmN1cnJlbnQgJiYgcmVmLmN1cnJlbnQudGV4dENvbnRlbnQgIT09IHRleHRXaXRoVHJhaWxpbmcpIHtcbiAgICAgIHJlZi5jdXJyZW50LnRleHRDb250ZW50ID0gdGV4dFdpdGhUcmFpbGluZ1xuICAgIH1cblxuICAgIC8vIGludGVudGlvbmFsbHkgbm90IHNwZWNpZnlpbmcgZGVwZW5kZW5jaWVzLCBzbyB0aGF0IHRoaXMgZWZmZWN0IHJ1bnMgb24gZXZlcnkgcmVuZGVyXG4gICAgLy8gYXMgdGhpcyBlZmZlY3RpdmVseSByZXBsYWNlcyBcInNwZWNpZnlpbmcgdGhlIHRleHQgaW4gdGhlIHZpcnR1YWwgRE9NIHVuZGVyIHRoZSA8c3Bhbj4gYmVsb3dcIiBvbiBlYWNoIHJlbmRlclxuICB9KVxuXG4gIC8vIFJlbmRlciB0ZXh0IGNvbnRlbnQgaW1tZWRpYXRlbHkgaWYgaXQncyB0aGUgZmlyc3QtdGltZSByZW5kZXJcbiAgLy8gRW5zdXJlIHRoYXQgdGV4dCBjb250ZW50IGlzIHJlbmRlcmVkIG9uIHNlcnZlci1zaWRlIHJlbmRlcmluZ1xuICBpZiAoIXJlZi5jdXJyZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxzcGFuIGRhdGEtc2xhdGUtc3RyaW5nIHJlZj17cmVmfT5cbiAgICAgICAge2dldFRleHRDb250ZW50KCl9XG4gICAgICA8L3NwYW4+XG4gICAgKVxuICB9XG5cbiAgLy8gdGhlIHNwYW4gaXMgaW50ZW50aW9uYWxseSBzYW1lIG9uIGV2ZXJ5IHJlbmRlciBpbiB2aXJ0dWFsIERPTSwgYWN0dWFsIHJlbmRlcmluZyBoYXBwZW5zIGluIHRoZSBsYXlvdXQgZWZmZWN0IGFib3ZlXG4gIHJldHVybiA8c3BhbiBkYXRhLXNsYXRlLXN0cmluZyByZWY9e3JlZn0gLz5cbn1cblxuLyoqXG4gKiBMZWFmIHN0cmluZ3Mgd2l0aG91dCB0ZXh0LCByZW5kZXIgYXMgemVyby13aWR0aCBzdHJpbmdzLlxuICovXG5cbmV4cG9ydCBjb25zdCBaZXJvV2lkdGhTdHJpbmcgPSAocHJvcHM6IHtcbiAgbGVuZ3RoPzogbnVtYmVyXG4gIGlzTGluZUJyZWFrPzogYm9vbGVhblxuICBpc01hcmtQbGFjZWhvbGRlcj86IGJvb2xlYW5cbn0pID0+IHtcbiAgY29uc3QgeyBsZW5ndGggPSAwLCBpc0xpbmVCcmVhayA9IGZhbHNlLCBpc01hcmtQbGFjZWhvbGRlciA9IGZhbHNlIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgJ2RhdGEtc2xhdGUtemVyby13aWR0aCc6IGlzTGluZUJyZWFrID8gJ24nIDogJ3onLFxuICAgICdkYXRhLXNsYXRlLWxlbmd0aCc6IGxlbmd0aCxcbiAgfVxuXG4gIGlmIChpc01hcmtQbGFjZWhvbGRlcikge1xuICAgIGF0dHJpYnV0ZXNbJ2RhdGEtc2xhdGUtbWFyay1wbGFjZWhvbGRlciddID0gdHJ1ZVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8c3BhbiB7Li4uYXR0cmlidXRlc30+XG4gICAgICB7IUlTX0FORFJPSUQgfHwgIWlzTGluZUJyZWFrID8gJ1xcdUZFRkYnIDogbnVsbH1cbiAgICAgIHtpc0xpbmVCcmVhayA/IDxiciAvPiA6IG51bGx9XG4gICAgPC9zcGFuPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0cmluZ1xuIiwgImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi4vcGx1Z2luL3JlYWN0LWVkaXRvcidcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJ3NsYXRlJ1xuXG4vKipcbiAqIEEgUmVhY3QgY29udGV4dCBmb3Igc2hhcmluZyB0aGUgZWRpdG9yIG9iamVjdC5cbiAqL1xuXG5leHBvcnQgY29uc3QgRWRpdG9yQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8UmVhY3RFZGl0b3IgfCBudWxsPihudWxsKVxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBlZGl0b3Igb2JqZWN0IGZyb20gdGhlIFJlYWN0IGNvbnRleHQuXG4gKi9cblxuZXhwb3J0IGNvbnN0IHVzZVNsYXRlU3RhdGljID0gKCk6IEVkaXRvciA9PiB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUNvbnRleHQoRWRpdG9yQ29udGV4dClcblxuICBpZiAoIWVkaXRvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgXFxgdXNlU2xhdGVTdGF0aWNcXGAgaG9vayBtdXN0IGJlIHVzZWQgaW5zaWRlIHRoZSA8U2xhdGU+IGNvbXBvbmVudCdzIGNvbnRleHQuYFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBlZGl0b3Jcbn1cbiIsICJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEVsZW1lbnQsIFRleHQgfSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IFJlc2l6ZU9ic2VydmVyIGFzIFJlc2l6ZU9ic2VydmVyUG9seWZpbGwgfSBmcm9tICdAanVnZ2xlL3Jlc2l6ZS1vYnNlcnZlcidcbmltcG9ydCBTdHJpbmcgZnJvbSAnLi9zdHJpbmcnXG5pbXBvcnQge1xuICBQTEFDRUhPTERFUl9TWU1CT0wsXG4gIEVESVRPUl9UT19QTEFDRUhPTERFUl9FTEVNRU5ULFxuICBFRElUT1JfVE9fRk9SQ0VfUkVOREVSLFxufSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQgeyBSZW5kZXJMZWFmUHJvcHMsIFJlbmRlclBsYWNlaG9sZGVyUHJvcHMgfSBmcm9tICcuL2VkaXRhYmxlJ1xuaW1wb3J0IHsgdXNlU2xhdGVTdGF0aWMgfSBmcm9tICcuLi9ob29rcy91c2Utc2xhdGUtc3RhdGljJ1xuXG4vKipcbiAqIEluZGl2aWR1YWwgbGVhdmVzIGluIGEgdGV4dCBub2RlIHdpdGggdW5pcXVlIGZvcm1hdHRpbmcuXG4gKi9cblxuY29uc3QgTGVhZiA9IChwcm9wczoge1xuICBpc0xhc3Q6IGJvb2xlYW5cbiAgbGVhZjogVGV4dFxuICBwYXJlbnQ6IEVsZW1lbnRcbiAgcmVuZGVyUGxhY2Vob2xkZXI6IChwcm9wczogUmVuZGVyUGxhY2Vob2xkZXJQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgcmVuZGVyTGVhZj86IChwcm9wczogUmVuZGVyTGVhZlByb3BzKSA9PiBKU1guRWxlbWVudFxuICB0ZXh0OiBUZXh0XG59KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBsZWFmLFxuICAgIGlzTGFzdCxcbiAgICB0ZXh0LFxuICAgIHBhcmVudCxcbiAgICByZW5kZXJQbGFjZWhvbGRlcixcbiAgICByZW5kZXJMZWFmID0gKHByb3BzOiBSZW5kZXJMZWFmUHJvcHMpID0+IDxEZWZhdWx0TGVhZiB7Li4ucHJvcHN9IC8+LFxuICB9ID0gcHJvcHNcblxuICBjb25zdCBsYXN0UGxhY2Vob2xkZXJSZWYgPSB1c2VSZWY8SFRNTFNwYW5FbGVtZW50IHwgbnVsbD4obnVsbClcbiAgY29uc3QgcGxhY2Vob2xkZXJSZWYgPSB1c2VSZWY8SFRNTFNwYW5FbGVtZW50IHwgbnVsbD4obnVsbClcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKVxuXG4gIGNvbnN0IHBsYWNlaG9sZGVyUmVzaXplT2JzZXJ2ZXIgPSB1c2VSZWY8UmVzaXplT2JzZXJ2ZXIgfCBudWxsPihudWxsKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChwbGFjZWhvbGRlclJlc2l6ZU9ic2VydmVyLmN1cnJlbnQpIHtcbiAgICAgICAgcGxhY2Vob2xkZXJSZXNpemVPYnNlcnZlci5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW10pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBwbGFjZWhvbGRlckVsID0gcGxhY2Vob2xkZXJSZWY/LmN1cnJlbnRcblxuICAgIGlmIChwbGFjZWhvbGRlckVsKSB7XG4gICAgICBFRElUT1JfVE9fUExBQ0VIT0xERVJfRUxFTUVOVC5zZXQoZWRpdG9yLCBwbGFjZWhvbGRlckVsKVxuICAgIH0gZWxzZSB7XG4gICAgICBFRElUT1JfVE9fUExBQ0VIT0xERVJfRUxFTUVOVC5kZWxldGUoZWRpdG9yKVxuICAgIH1cblxuICAgIGlmIChwbGFjZWhvbGRlclJlc2l6ZU9ic2VydmVyLmN1cnJlbnQpIHtcbiAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBvYnNlcnZlci5cbiAgICAgIHBsYWNlaG9sZGVyUmVzaXplT2JzZXJ2ZXIuY3VycmVudC5kaXNjb25uZWN0KClcbiAgICAgIGlmIChwbGFjZWhvbGRlckVsKVxuICAgICAgICBwbGFjZWhvbGRlclJlc2l6ZU9ic2VydmVyLmN1cnJlbnQub2JzZXJ2ZShwbGFjZWhvbGRlckVsKVxuICAgIH0gZWxzZSBpZiAocGxhY2Vob2xkZXJFbCkge1xuICAgICAgLy8gQ3JlYXRlIGEgbmV3IG9ic2VydmVyIGFuZCBvYnNlcnZlIHRoZSBwbGFjZWhvbGRlciBlbGVtZW50LlxuICAgICAgY29uc3QgUmVzaXplT2JzZXJ2ZXIgPSB3aW5kb3cuUmVzaXplT2JzZXJ2ZXIgfHwgUmVzaXplT2JzZXJ2ZXJQb2x5ZmlsbFxuICAgICAgcGxhY2Vob2xkZXJSZXNpemVPYnNlcnZlci5jdXJyZW50ID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgLy8gRm9yY2UgYSByZS1yZW5kZXIgb2YgdGhlIGVkaXRvciBzbyBpdHMgbWluLWhlaWdodCBjYW4gYmUgdXBkYXRlZFxuICAgICAgICAvLyB0byB0aGUgbmV3IGhlaWdodCBvZiB0aGUgcGxhY2Vob2xkZXIuXG4gICAgICAgIGNvbnN0IGZvcmNlUmVuZGVyID0gRURJVE9SX1RPX0ZPUkNFX1JFTkRFUi5nZXQoZWRpdG9yKVxuICAgICAgICBmb3JjZVJlbmRlcj8uKClcbiAgICAgIH0pXG4gICAgICBwbGFjZWhvbGRlclJlc2l6ZU9ic2VydmVyLmN1cnJlbnQub2JzZXJ2ZShwbGFjZWhvbGRlckVsKVxuICAgIH1cblxuICAgIGlmICghcGxhY2Vob2xkZXJFbCAmJiBsYXN0UGxhY2Vob2xkZXJSZWYuY3VycmVudCkge1xuICAgICAgLy8gTm8gcGxhY2Vob2xkZXIgZWxlbWVudCwgc28gbm8gbmVlZCBmb3IgYSByZXNpemUgb2JzZXJ2ZXIuXG4gICAgICAvLyBGb3JjZSBhIHJlLXJlbmRlciBvZiB0aGUgZWRpdG9yIHNvIGl0cyBtaW4taGVpZ2h0IGNhbiBiZSByZXNldC5cbiAgICAgIGNvbnN0IGZvcmNlUmVuZGVyID0gRURJVE9SX1RPX0ZPUkNFX1JFTkRFUi5nZXQoZWRpdG9yKVxuICAgICAgZm9yY2VSZW5kZXI/LigpXG4gICAgfVxuXG4gICAgbGFzdFBsYWNlaG9sZGVyUmVmLmN1cnJlbnQgPSBwbGFjZWhvbGRlclJlZi5jdXJyZW50XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgRURJVE9SX1RPX1BMQUNFSE9MREVSX0VMRU1FTlQuZGVsZXRlKGVkaXRvcilcbiAgICB9XG4gIH0sIFtwbGFjZWhvbGRlclJlZiwgbGVhZl0pXG5cbiAgbGV0IGNoaWxkcmVuID0gKFxuICAgIDxTdHJpbmcgaXNMYXN0PXtpc0xhc3R9IGxlYWY9e2xlYWZ9IHBhcmVudD17cGFyZW50fSB0ZXh0PXt0ZXh0fSAvPlxuICApXG5cbiAgaWYgKGxlYWZbUExBQ0VIT0xERVJfU1lNQk9MXSkge1xuICAgIGNvbnN0IHBsYWNlaG9sZGVyUHJvcHM6IFJlbmRlclBsYWNlaG9sZGVyUHJvcHMgPSB7XG4gICAgICBjaGlsZHJlbjogbGVhZi5wbGFjZWhvbGRlcixcbiAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgJ2RhdGEtc2xhdGUtcGxhY2Vob2xkZXInOiB0cnVlLFxuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgIG1heFdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgICBvcGFjaXR5OiAnMC4zMzMnLFxuICAgICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgICAgICAgICB0ZXh0RGVjb3JhdGlvbjogJ25vbmUnLFxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50RWRpdGFibGU6IGZhbHNlLFxuICAgICAgICByZWY6IHBsYWNlaG9sZGVyUmVmLFxuICAgICAgfSxcbiAgICB9XG5cbiAgICBjaGlsZHJlbiA9IChcbiAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAge3JlbmRlclBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyUHJvcHMpfVxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgIClcbiAgfVxuXG4gIC8vIENPTVBBVDogSGF2aW5nIHRoZSBgZGF0YS1gIGF0dHJpYnV0ZXMgb24gdGhlc2UgbGVhZiBlbGVtZW50cyBlbnN1cmVzIHRoYXRcbiAgLy8gaW4gY2VydGFpbiBtaXNiZWhhdmluZyBicm93c2VycyB0aGV5IGFyZW4ndCB3ZWlyZGx5IGNsb25lZC9kZXN0cm95ZWQgYnlcbiAgLy8gY29udGVudGVkaXRhYmxlIGJlaGF2aW9ycy4gKDIwMTkvMDUvMDgpXG4gIGNvbnN0IGF0dHJpYnV0ZXM6IHtcbiAgICAnZGF0YS1zbGF0ZS1sZWFmJzogdHJ1ZVxuICB9ID0ge1xuICAgICdkYXRhLXNsYXRlLWxlYWYnOiB0cnVlLFxuICB9XG5cbiAgcmV0dXJuIHJlbmRlckxlYWYoeyBhdHRyaWJ1dGVzLCBjaGlsZHJlbiwgbGVhZiwgdGV4dCB9KVxufVxuXG5jb25zdCBNZW1vaXplZExlYWYgPSBSZWFjdC5tZW1vKExlYWYsIChwcmV2LCBuZXh0KSA9PiB7XG4gIHJldHVybiAoXG4gICAgbmV4dC5wYXJlbnQgPT09IHByZXYucGFyZW50ICYmXG4gICAgbmV4dC5pc0xhc3QgPT09IHByZXYuaXNMYXN0ICYmXG4gICAgbmV4dC5yZW5kZXJMZWFmID09PSBwcmV2LnJlbmRlckxlYWYgJiZcbiAgICBuZXh0LnJlbmRlclBsYWNlaG9sZGVyID09PSBwcmV2LnJlbmRlclBsYWNlaG9sZGVyICYmXG4gICAgbmV4dC50ZXh0ID09PSBwcmV2LnRleHQgJiZcbiAgICBUZXh0LmVxdWFscyhuZXh0LmxlYWYsIHByZXYubGVhZikgJiZcbiAgICBuZXh0LmxlYWZbUExBQ0VIT0xERVJfU1lNQk9MXSA9PT0gcHJldi5sZWFmW1BMQUNFSE9MREVSX1NZTUJPTF1cbiAgKVxufSlcblxuZXhwb3J0IGNvbnN0IERlZmF1bHRMZWFmID0gKHByb3BzOiBSZW5kZXJMZWFmUHJvcHMpID0+IHtcbiAgY29uc3QgeyBhdHRyaWJ1dGVzLCBjaGlsZHJlbiB9ID0gcHJvcHNcbiAgcmV0dXJuIDxzcGFuIHsuLi5hdHRyaWJ1dGVzfT57Y2hpbGRyZW59PC9zcGFuPlxufVxuXG5leHBvcnQgZGVmYXVsdCBNZW1vaXplZExlYWZcbiIsICJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBFbGVtZW50LCBSYW5nZSwgVGV4dCBhcyBTbGF0ZVRleHQgfSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IFJlYWN0RWRpdG9yLCB1c2VTbGF0ZVN0YXRpYyB9IGZyb20gJy4uJ1xuaW1wb3J0IHsgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCB9IGZyb20gJy4uL2hvb2tzL3VzZS1pc29tb3JwaGljLWxheW91dC1lZmZlY3QnXG5pbXBvcnQgeyBpc0RlY29yYXRvclJhbmdlTGlzdEVxdWFsIH0gZnJvbSAnLi4vdXRpbHMvcmFuZ2UtbGlzdCdcbmltcG9ydCB7XG4gIEVESVRPUl9UT19LRVlfVE9fRUxFTUVOVCxcbiAgRUxFTUVOVF9UT19OT0RFLFxuICBOT0RFX1RPX0VMRU1FTlQsXG59IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7IFJlbmRlckxlYWZQcm9wcywgUmVuZGVyUGxhY2Vob2xkZXJQcm9wcyB9IGZyb20gJy4vZWRpdGFibGUnXG5pbXBvcnQgTGVhZiBmcm9tICcuL2xlYWYnXG5cbi8qKlxuICogVGV4dC5cbiAqL1xuXG5jb25zdCBUZXh0ID0gKHByb3BzOiB7XG4gIGRlY29yYXRpb25zOiBSYW5nZVtdXG4gIGlzTGFzdDogYm9vbGVhblxuICBwYXJlbnQ6IEVsZW1lbnRcbiAgcmVuZGVyUGxhY2Vob2xkZXI6IChwcm9wczogUmVuZGVyUGxhY2Vob2xkZXJQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgcmVuZGVyTGVhZj86IChwcm9wczogUmVuZGVyTGVhZlByb3BzKSA9PiBKU1guRWxlbWVudFxuICB0ZXh0OiBTbGF0ZVRleHRcbn0pID0+IHtcbiAgY29uc3Qge1xuICAgIGRlY29yYXRpb25zLFxuICAgIGlzTGFzdCxcbiAgICBwYXJlbnQsXG4gICAgcmVuZGVyUGxhY2Vob2xkZXIsXG4gICAgcmVuZGVyTGVhZixcbiAgICB0ZXh0LFxuICB9ID0gcHJvcHNcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKVxuICBjb25zdCByZWYgPSB1c2VSZWY8SFRNTFNwYW5FbGVtZW50PihudWxsKVxuICBjb25zdCBsZWF2ZXMgPSBTbGF0ZVRleHQuZGVjb3JhdGlvbnModGV4dCwgZGVjb3JhdGlvbnMpXG4gIGNvbnN0IGtleSA9IFJlYWN0RWRpdG9yLmZpbmRLZXkoZWRpdG9yLCB0ZXh0KVxuICBjb25zdCBjaGlsZHJlbiA9IFtdXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZWF2ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBsZWFmID0gbGVhdmVzW2ldXG5cbiAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgPExlYWZcbiAgICAgICAgaXNMYXN0PXtpc0xhc3QgJiYgaSA9PT0gbGVhdmVzLmxlbmd0aCAtIDF9XG4gICAgICAgIGtleT17YCR7a2V5LmlkfS0ke2l9YH1cbiAgICAgICAgcmVuZGVyUGxhY2Vob2xkZXI9e3JlbmRlclBsYWNlaG9sZGVyfVxuICAgICAgICBsZWFmPXtsZWFmfVxuICAgICAgICB0ZXh0PXt0ZXh0fVxuICAgICAgICBwYXJlbnQ9e3BhcmVudH1cbiAgICAgICAgcmVuZGVyTGVhZj17cmVuZGVyTGVhZn1cbiAgICAgIC8+XG4gICAgKVxuICB9XG5cbiAgLy8gVXBkYXRlIGVsZW1lbnQtcmVsYXRlZCB3ZWFrIG1hcHMgd2l0aCB0aGUgRE9NIGVsZW1lbnQgcmVmLlxuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBLRVlfVE9fRUxFTUVOVCA9IEVESVRPUl9UT19LRVlfVE9fRUxFTUVOVC5nZXQoZWRpdG9yKVxuICAgIGlmIChyZWYuY3VycmVudCkge1xuICAgICAgS0VZX1RPX0VMRU1FTlQ/LnNldChrZXksIHJlZi5jdXJyZW50KVxuICAgICAgTk9ERV9UT19FTEVNRU5ULnNldCh0ZXh0LCByZWYuY3VycmVudClcbiAgICAgIEVMRU1FTlRfVE9fTk9ERS5zZXQocmVmLmN1cnJlbnQsIHRleHQpXG4gICAgfSBlbHNlIHtcbiAgICAgIEtFWV9UT19FTEVNRU5UPy5kZWxldGUoa2V5KVxuICAgICAgTk9ERV9UT19FTEVNRU5ULmRlbGV0ZSh0ZXh0KVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4gKFxuICAgIDxzcGFuIGRhdGEtc2xhdGUtbm9kZT1cInRleHRcIiByZWY9e3JlZn0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9zcGFuPlxuICApXG59XG5cbmNvbnN0IE1lbW9pemVkVGV4dCA9IFJlYWN0Lm1lbW8oVGV4dCwgKHByZXYsIG5leHQpID0+IHtcbiAgcmV0dXJuIChcbiAgICBuZXh0LnBhcmVudCA9PT0gcHJldi5wYXJlbnQgJiZcbiAgICBuZXh0LmlzTGFzdCA9PT0gcHJldi5pc0xhc3QgJiZcbiAgICBuZXh0LnJlbmRlckxlYWYgPT09IHByZXYucmVuZGVyTGVhZiAmJlxuICAgIG5leHQudGV4dCA9PT0gcHJldi50ZXh0ICYmXG4gICAgaXNEZWNvcmF0b3JSYW5nZUxpc3RFcXVhbChuZXh0LmRlY29yYXRpb25zLCBwcmV2LmRlY29yYXRpb25zKVxuICApXG59KVxuXG5leHBvcnQgZGVmYXVsdCBNZW1vaXplZFRleHRcbiIsICJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBnZXREaXJlY3Rpb24gZnJvbSAnZGlyZWN0aW9uJ1xuaW1wb3J0IHsgRWRpdG9yLCBOb2RlLCBSYW5nZSwgRWxlbWVudCBhcyBTbGF0ZUVsZW1lbnQgfSBmcm9tICdzbGF0ZSdcblxuaW1wb3J0IFRleHQgZnJvbSAnLi90ZXh0J1xuaW1wb3J0IHVzZUNoaWxkcmVuIGZyb20gJy4uL2hvb2tzL3VzZS1jaGlsZHJlbidcbmltcG9ydCB7IFJlYWN0RWRpdG9yLCB1c2VTbGF0ZVN0YXRpYywgdXNlUmVhZE9ubHkgfSBmcm9tICcuLidcbmltcG9ydCB7XG4gIE5PREVfVE9fRUxFTUVOVCxcbiAgRUxFTUVOVF9UT19OT0RFLFxuICBOT0RFX1RPX1BBUkVOVCxcbiAgTk9ERV9UT19JTkRFWCxcbiAgRURJVE9SX1RPX0tFWV9UT19FTEVNRU5ULFxufSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQgeyBpc0RlY29yYXRvclJhbmdlTGlzdEVxdWFsIH0gZnJvbSAnLi4vdXRpbHMvcmFuZ2UtbGlzdCdcbmltcG9ydCB7XG4gIFJlbmRlckVsZW1lbnRQcm9wcyxcbiAgUmVuZGVyTGVhZlByb3BzLFxuICBSZW5kZXJQbGFjZWhvbGRlclByb3BzLFxufSBmcm9tICcuL2VkaXRhYmxlJ1xuXG4vKipcbiAqIEVsZW1lbnQuXG4gKi9cblxuY29uc3QgRWxlbWVudCA9IChwcm9wczoge1xuICBkZWNvcmF0aW9uczogUmFuZ2VbXVxuICBlbGVtZW50OiBTbGF0ZUVsZW1lbnRcbiAgcmVuZGVyRWxlbWVudD86IChwcm9wczogUmVuZGVyRWxlbWVudFByb3BzKSA9PiBKU1guRWxlbWVudFxuICByZW5kZXJQbGFjZWhvbGRlcjogKHByb3BzOiBSZW5kZXJQbGFjZWhvbGRlclByb3BzKSA9PiBKU1guRWxlbWVudFxuICByZW5kZXJMZWFmPzogKHByb3BzOiBSZW5kZXJMZWFmUHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHNlbGVjdGlvbjogUmFuZ2UgfCBudWxsXG59KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBkZWNvcmF0aW9ucyxcbiAgICBlbGVtZW50LFxuICAgIHJlbmRlckVsZW1lbnQgPSAocDogUmVuZGVyRWxlbWVudFByb3BzKSA9PiA8RGVmYXVsdEVsZW1lbnQgey4uLnB9IC8+LFxuICAgIHJlbmRlclBsYWNlaG9sZGVyLFxuICAgIHJlbmRlckxlYWYsXG4gICAgc2VsZWN0aW9uLFxuICB9ID0gcHJvcHNcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKVxuICBjb25zdCByZWFkT25seSA9IHVzZVJlYWRPbmx5KClcbiAgY29uc3QgaXNJbmxpbmUgPSBlZGl0b3IuaXNJbmxpbmUoZWxlbWVudClcbiAgY29uc3Qga2V5ID0gUmVhY3RFZGl0b3IuZmluZEtleShlZGl0b3IsIGVsZW1lbnQpXG4gIGNvbnN0IHJlZiA9IHVzZUNhbGxiYWNrKFxuICAgIChyZWY6IEhUTUxFbGVtZW50IHwgbnVsbCkgPT4ge1xuICAgICAgLy8gVXBkYXRlIGVsZW1lbnQtcmVsYXRlZCB3ZWFrIG1hcHMgd2l0aCB0aGUgRE9NIGVsZW1lbnQgcmVmLlxuICAgICAgY29uc3QgS0VZX1RPX0VMRU1FTlQgPSBFRElUT1JfVE9fS0VZX1RPX0VMRU1FTlQuZ2V0KGVkaXRvcilcbiAgICAgIGlmIChyZWYpIHtcbiAgICAgICAgS0VZX1RPX0VMRU1FTlQ/LnNldChrZXksIHJlZilcbiAgICAgICAgTk9ERV9UT19FTEVNRU5ULnNldChlbGVtZW50LCByZWYpXG4gICAgICAgIEVMRU1FTlRfVE9fTk9ERS5zZXQocmVmLCBlbGVtZW50KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgS0VZX1RPX0VMRU1FTlQ/LmRlbGV0ZShrZXkpXG4gICAgICAgIE5PREVfVE9fRUxFTUVOVC5kZWxldGUoZWxlbWVudClcbiAgICAgIH1cbiAgICB9LFxuICAgIFtlZGl0b3IsIGtleSwgZWxlbWVudF1cbiAgKVxuICBsZXQgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSA9IHVzZUNoaWxkcmVuKHtcbiAgICBkZWNvcmF0aW9ucyxcbiAgICBub2RlOiBlbGVtZW50LFxuICAgIHJlbmRlckVsZW1lbnQsXG4gICAgcmVuZGVyUGxhY2Vob2xkZXIsXG4gICAgcmVuZGVyTGVhZixcbiAgICBzZWxlY3Rpb24sXG4gIH0pXG5cbiAgLy8gQXR0cmlidXRlcyB0aGF0IHRoZSBkZXZlbG9wZXIgbXVzdCBtaXggaW50byB0aGUgZWxlbWVudCBpbiB0aGVpclxuICAvLyBjdXN0b20gbm9kZSByZW5kZXJlciBjb21wb25lbnQuXG4gIGNvbnN0IGF0dHJpYnV0ZXM6IHtcbiAgICAnZGF0YS1zbGF0ZS1ub2RlJzogJ2VsZW1lbnQnXG4gICAgJ2RhdGEtc2xhdGUtdm9pZCc/OiB0cnVlXG4gICAgJ2RhdGEtc2xhdGUtaW5saW5lJz86IHRydWVcbiAgICBjb250ZW50RWRpdGFibGU/OiBmYWxzZVxuICAgIGRpcj86ICdydGwnXG4gICAgcmVmOiBhbnlcbiAgfSA9IHtcbiAgICAnZGF0YS1zbGF0ZS1ub2RlJzogJ2VsZW1lbnQnLFxuICAgIHJlZixcbiAgfVxuXG4gIGlmIChpc0lubGluZSkge1xuICAgIGF0dHJpYnV0ZXNbJ2RhdGEtc2xhdGUtaW5saW5lJ10gPSB0cnVlXG4gIH1cblxuICAvLyBJZiBpdCdzIGEgYmxvY2sgbm9kZSB3aXRoIGlubGluZSBjaGlsZHJlbiwgYWRkIHRoZSBwcm9wZXIgYGRpcmAgYXR0cmlidXRlXG4gIC8vIGZvciB0ZXh0IGRpcmVjdGlvbi5cbiAgaWYgKCFpc0lubGluZSAmJiBFZGl0b3IuaGFzSW5saW5lcyhlZGl0b3IsIGVsZW1lbnQpKSB7XG4gICAgY29uc3QgdGV4dCA9IE5vZGUuc3RyaW5nKGVsZW1lbnQpXG4gICAgY29uc3QgZGlyID0gZ2V0RGlyZWN0aW9uKHRleHQpXG5cbiAgICBpZiAoZGlyID09PSAncnRsJykge1xuICAgICAgYXR0cmlidXRlcy5kaXIgPSBkaXJcbiAgICB9XG4gIH1cblxuICAvLyBJZiBpdCdzIGEgdm9pZCBub2RlLCB3cmFwIHRoZSBjaGlsZHJlbiBpbiBleHRyYSB2b2lkLXNwZWNpZmljIGVsZW1lbnRzLlxuICBpZiAoRWRpdG9yLmlzVm9pZChlZGl0b3IsIGVsZW1lbnQpKSB7XG4gICAgYXR0cmlidXRlc1snZGF0YS1zbGF0ZS12b2lkJ10gPSB0cnVlXG5cbiAgICBpZiAoIXJlYWRPbmx5ICYmIGlzSW5saW5lKSB7XG4gICAgICBhdHRyaWJ1dGVzLmNvbnRlbnRFZGl0YWJsZSA9IGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgVGFnID0gaXNJbmxpbmUgPyAnc3BhbicgOiAnZGl2J1xuICAgIGNvbnN0IFtbdGV4dF1dID0gTm9kZS50ZXh0cyhlbGVtZW50KVxuXG4gICAgY2hpbGRyZW4gPSAoXG4gICAgICA8VGFnXG4gICAgICAgIGRhdGEtc2xhdGUtc3BhY2VyXG4gICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgaGVpZ2h0OiAnMCcsXG4gICAgICAgICAgY29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8VGV4dFxuICAgICAgICAgIHJlbmRlclBsYWNlaG9sZGVyPXtyZW5kZXJQbGFjZWhvbGRlcn1cbiAgICAgICAgICBkZWNvcmF0aW9ucz17W119XG4gICAgICAgICAgaXNMYXN0PXtmYWxzZX1cbiAgICAgICAgICBwYXJlbnQ9e2VsZW1lbnR9XG4gICAgICAgICAgdGV4dD17dGV4dH1cbiAgICAgICAgLz5cbiAgICAgIDwvVGFnPlxuICAgIClcblxuICAgIE5PREVfVE9fSU5ERVguc2V0KHRleHQsIDApXG4gICAgTk9ERV9UT19QQVJFTlQuc2V0KHRleHQsIGVsZW1lbnQpXG4gIH1cblxuICByZXR1cm4gcmVuZGVyRWxlbWVudCh7IGF0dHJpYnV0ZXMsIGNoaWxkcmVuLCBlbGVtZW50IH0pXG59XG5cbmNvbnN0IE1lbW9pemVkRWxlbWVudCA9IFJlYWN0Lm1lbW8oRWxlbWVudCwgKHByZXYsIG5leHQpID0+IHtcbiAgcmV0dXJuIChcbiAgICBwcmV2LmVsZW1lbnQgPT09IG5leHQuZWxlbWVudCAmJlxuICAgIHByZXYucmVuZGVyRWxlbWVudCA9PT0gbmV4dC5yZW5kZXJFbGVtZW50ICYmXG4gICAgcHJldi5yZW5kZXJMZWFmID09PSBuZXh0LnJlbmRlckxlYWYgJiZcbiAgICBpc0RlY29yYXRvclJhbmdlTGlzdEVxdWFsKHByZXYuZGVjb3JhdGlvbnMsIG5leHQuZGVjb3JhdGlvbnMpICYmXG4gICAgKHByZXYuc2VsZWN0aW9uID09PSBuZXh0LnNlbGVjdGlvbiB8fFxuICAgICAgKCEhcHJldi5zZWxlY3Rpb24gJiZcbiAgICAgICAgISFuZXh0LnNlbGVjdGlvbiAmJlxuICAgICAgICBSYW5nZS5lcXVhbHMocHJldi5zZWxlY3Rpb24sIG5leHQuc2VsZWN0aW9uKSkpXG4gIClcbn0pXG5cbi8qKlxuICogVGhlIGRlZmF1bHQgZWxlbWVudCByZW5kZXJlci5cbiAqL1xuXG5leHBvcnQgY29uc3QgRGVmYXVsdEVsZW1lbnQgPSAocHJvcHM6IFJlbmRlckVsZW1lbnRQcm9wcykgPT4ge1xuICBjb25zdCB7IGF0dHJpYnV0ZXMsIGNoaWxkcmVuLCBlbGVtZW50IH0gPSBwcm9wc1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpXG4gIGNvbnN0IFRhZyA9IGVkaXRvci5pc0lubGluZShlbGVtZW50KSA/ICdzcGFuJyA6ICdkaXYnXG4gIHJldHVybiAoXG4gICAgPFRhZyB7Li4uYXR0cmlidXRlc30gc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScgfX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9UYWc+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgTWVtb2l6ZWRFbGVtZW50XG4iLCAiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgUmFuZ2UsIE5vZGVFbnRyeSB9IGZyb20gJ3NsYXRlJ1xuXG4vKipcbiAqIEEgUmVhY3QgY29udGV4dCBmb3Igc2hhcmluZyB0aGUgYGRlY29yYXRlYCBwcm9wIG9mIHRoZSBlZGl0YWJsZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgRGVjb3JhdGVDb250ZXh0ID0gY3JlYXRlQ29udGV4dDwoZW50cnk6IE5vZGVFbnRyeSkgPT4gUmFuZ2VbXT4oXG4gICgpID0+IFtdXG4pXG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGBkZWNvcmF0ZWAgcHJvcCBvZiB0aGUgZWRpdGFibGUuXG4gKi9cblxuZXhwb3J0IGNvbnN0IHVzZURlY29yYXRlID0gKCk6ICgoZW50cnk6IE5vZGVFbnRyeSkgPT4gUmFuZ2VbXSkgPT4ge1xuICByZXR1cm4gdXNlQ29udGV4dChEZWNvcmF0ZUNvbnRleHQpXG59XG4iLCAiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0J1xuXG4vKipcbiAqIEEgUmVhY3QgY29udGV4dCBmb3Igc2hhcmluZyB0aGUgYHNlbGVjdGVkYCBzdGF0ZSBvZiBhbiBlbGVtZW50LlxuICovXG5cbmV4cG9ydCBjb25zdCBTZWxlY3RlZENvbnRleHQgPSBjcmVhdGVDb250ZXh0KGZhbHNlKVxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBgc2VsZWN0ZWRgIHN0YXRlIG9mIGFuIGVsZW1lbnQuXG4gKi9cblxuZXhwb3J0IGNvbnN0IHVzZVNlbGVjdGVkID0gKCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gdXNlQ29udGV4dChTZWxlY3RlZENvbnRleHQpXG59XG4iLCAiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRWRpdG9yLCBSYW5nZSwgRWxlbWVudCwgQW5jZXN0b3IsIERlc2NlbmRhbnQgfSBmcm9tICdzbGF0ZSdcblxuaW1wb3J0IEVsZW1lbnRDb21wb25lbnQgZnJvbSAnLi4vY29tcG9uZW50cy9lbGVtZW50J1xuaW1wb3J0IFRleHRDb21wb25lbnQgZnJvbSAnLi4vY29tcG9uZW50cy90ZXh0J1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuLi9wbHVnaW4vcmVhY3QtZWRpdG9yJ1xuaW1wb3J0IHsgdXNlU2xhdGVTdGF0aWMgfSBmcm9tICcuL3VzZS1zbGF0ZS1zdGF0aWMnXG5pbXBvcnQgeyB1c2VEZWNvcmF0ZSB9IGZyb20gJy4vdXNlLWRlY29yYXRlJ1xuaW1wb3J0IHsgTk9ERV9UT19JTkRFWCwgTk9ERV9UT19QQVJFTlQgfSBmcm9tICcuLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQge1xuICBSZW5kZXJFbGVtZW50UHJvcHMsXG4gIFJlbmRlckxlYWZQcm9wcyxcbiAgUmVuZGVyUGxhY2Vob2xkZXJQcm9wcyxcbn0gZnJvbSAnLi4vY29tcG9uZW50cy9lZGl0YWJsZSdcbmltcG9ydCB7IFNlbGVjdGVkQ29udGV4dCB9IGZyb20gJy4vdXNlLXNlbGVjdGVkJ1xuXG4vKipcbiAqIENoaWxkcmVuLlxuICovXG5cbmNvbnN0IHVzZUNoaWxkcmVuID0gKHByb3BzOiB7XG4gIGRlY29yYXRpb25zOiBSYW5nZVtdXG4gIG5vZGU6IEFuY2VzdG9yXG4gIHJlbmRlckVsZW1lbnQ/OiAocHJvcHM6IFJlbmRlckVsZW1lbnRQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgcmVuZGVyUGxhY2Vob2xkZXI6IChwcm9wczogUmVuZGVyUGxhY2Vob2xkZXJQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgcmVuZGVyTGVhZj86IChwcm9wczogUmVuZGVyTGVhZlByb3BzKSA9PiBKU1guRWxlbWVudFxuICBzZWxlY3Rpb246IFJhbmdlIHwgbnVsbFxufSkgPT4ge1xuICBjb25zdCB7XG4gICAgZGVjb3JhdGlvbnMsXG4gICAgbm9kZSxcbiAgICByZW5kZXJFbGVtZW50LFxuICAgIHJlbmRlclBsYWNlaG9sZGVyLFxuICAgIHJlbmRlckxlYWYsXG4gICAgc2VsZWN0aW9uLFxuICB9ID0gcHJvcHNcbiAgY29uc3QgZGVjb3JhdGUgPSB1c2VEZWNvcmF0ZSgpXG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlU3RhdGljKClcbiAgY29uc3QgcGF0aCA9IFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgbm9kZSlcbiAgY29uc3QgY2hpbGRyZW4gPSBbXVxuICBjb25zdCBpc0xlYWZCbG9jayA9XG4gICAgRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiZcbiAgICAhZWRpdG9yLmlzSW5saW5lKG5vZGUpICYmXG4gICAgRWRpdG9yLmhhc0lubGluZXMoZWRpdG9yLCBub2RlKVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHAgPSBwYXRoLmNvbmNhdChpKVxuICAgIGNvbnN0IG4gPSBub2RlLmNoaWxkcmVuW2ldIGFzIERlc2NlbmRhbnRcbiAgICBjb25zdCBrZXkgPSBSZWFjdEVkaXRvci5maW5kS2V5KGVkaXRvciwgbilcbiAgICBjb25zdCByYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIHApXG4gICAgY29uc3Qgc2VsID0gc2VsZWN0aW9uICYmIFJhbmdlLmludGVyc2VjdGlvbihyYW5nZSwgc2VsZWN0aW9uKVxuICAgIGNvbnN0IGRzID0gZGVjb3JhdGUoW24sIHBdKVxuXG4gICAgZm9yIChjb25zdCBkZWMgb2YgZGVjb3JhdGlvbnMpIHtcbiAgICAgIGNvbnN0IGQgPSBSYW5nZS5pbnRlcnNlY3Rpb24oZGVjLCByYW5nZSlcblxuICAgICAgaWYgKGQpIHtcbiAgICAgICAgZHMucHVzaChkKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChFbGVtZW50LmlzRWxlbWVudChuKSkge1xuICAgICAgY2hpbGRyZW4ucHVzaChcbiAgICAgICAgPFNlbGVjdGVkQ29udGV4dC5Qcm92aWRlciBrZXk9e2Bwcm92aWRlci0ke2tleS5pZH1gfSB2YWx1ZT17ISFzZWx9PlxuICAgICAgICAgIDxFbGVtZW50Q29tcG9uZW50XG4gICAgICAgICAgICBkZWNvcmF0aW9ucz17ZHN9XG4gICAgICAgICAgICBlbGVtZW50PXtufVxuICAgICAgICAgICAga2V5PXtrZXkuaWR9XG4gICAgICAgICAgICByZW5kZXJFbGVtZW50PXtyZW5kZXJFbGVtZW50fVxuICAgICAgICAgICAgcmVuZGVyUGxhY2Vob2xkZXI9e3JlbmRlclBsYWNlaG9sZGVyfVxuICAgICAgICAgICAgcmVuZGVyTGVhZj17cmVuZGVyTGVhZn1cbiAgICAgICAgICAgIHNlbGVjdGlvbj17c2VsfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvU2VsZWN0ZWRDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgICA8VGV4dENvbXBvbmVudFxuICAgICAgICAgIGRlY29yYXRpb25zPXtkc31cbiAgICAgICAgICBrZXk9e2tleS5pZH1cbiAgICAgICAgICBpc0xhc3Q9e2lzTGVhZkJsb2NrICYmIGkgPT09IG5vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gMX1cbiAgICAgICAgICBwYXJlbnQ9e25vZGV9XG4gICAgICAgICAgcmVuZGVyUGxhY2Vob2xkZXI9e3JlbmRlclBsYWNlaG9sZGVyfVxuICAgICAgICAgIHJlbmRlckxlYWY9e3JlbmRlckxlYWZ9XG4gICAgICAgICAgdGV4dD17bn1cbiAgICAgICAgLz5cbiAgICAgIClcbiAgICB9XG5cbiAgICBOT0RFX1RPX0lOREVYLnNldChuLCBpKVxuICAgIE5PREVfVE9fUEFSRU5ULnNldChuLCBub2RlKVxuICB9XG5cbiAgcmV0dXJuIGNoaWxkcmVuXG59XG5cbmV4cG9ydCBkZWZhdWx0IHVzZUNoaWxkcmVuXG4iLCAiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0J1xuXG4vKipcbiAqIEEgUmVhY3QgY29udGV4dCBmb3Igc2hhcmluZyB0aGUgYHJlYWRPbmx5YCBzdGF0ZSBvZiB0aGUgZWRpdG9yLlxuICovXG5cbmV4cG9ydCBjb25zdCBSZWFkT25seUNvbnRleHQgPSBjcmVhdGVDb250ZXh0KGZhbHNlKVxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBgcmVhZE9ubHlgIHN0YXRlIG9mIHRoZSBlZGl0b3IuXG4gKi9cblxuZXhwb3J0IGNvbnN0IHVzZVJlYWRPbmx5ID0gKCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gdXNlQ29udGV4dChSZWFkT25seUNvbnRleHQpXG59XG4iLCAiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4uL3BsdWdpbi9yZWFjdC1lZGl0b3InXG5cbi8qKlxuICogQSBSZWFjdCBjb250ZXh0IGZvciBzaGFyaW5nIHRoZSBlZGl0b3Igb2JqZWN0LCBpbiBhIHdheSB0aGF0IHJlLXJlbmRlcnMgdGhlXG4gKiBjb250ZXh0IHdoZW5ldmVyIGNoYW5nZXMgb2NjdXIuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBTbGF0ZUNvbnRleHRWYWx1ZSB7XG4gIHY6IG51bWJlclxuICBlZGl0b3I6IFJlYWN0RWRpdG9yXG59XG5cbmV4cG9ydCBjb25zdCBTbGF0ZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0PHtcbiAgdjogbnVtYmVyXG4gIGVkaXRvcjogUmVhY3RFZGl0b3Jcbn0gfCBudWxsPihudWxsKVxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBlZGl0b3Igb2JqZWN0IGZyb20gdGhlIFJlYWN0IGNvbnRleHQuXG4gKi9cblxuZXhwb3J0IGNvbnN0IHVzZVNsYXRlID0gKCk6IEVkaXRvciA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KFNsYXRlQ29udGV4dClcblxuICBpZiAoIWNvbnRleHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVGhlIFxcYHVzZVNsYXRlXFxgIGhvb2sgbXVzdCBiZSB1c2VkIGluc2lkZSB0aGUgPFNsYXRlPiBjb21wb25lbnQncyBjb250ZXh0LmBcbiAgICApXG4gIH1cblxuICBjb25zdCB7IGVkaXRvciB9ID0gY29udGV4dFxuICByZXR1cm4gZWRpdG9yXG59XG5cbmV4cG9ydCBjb25zdCB1c2VTbGF0ZVdpdGhWID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChTbGF0ZUNvbnRleHQpXG5cbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFRoZSBcXGB1c2VTbGF0ZVxcYCBob29rIG11c3QgYmUgdXNlZCBpbnNpZGUgdGhlIDxTbGF0ZT4gY29tcG9uZW50J3MgY29udGV4dC5gXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGNvbnRleHRcbn1cbiIsICJleHBvcnQgY29uc3QgVFJJUExFX0NMSUNLID0gM1xuIiwgImltcG9ydCB7IGlzS2V5SG90a2V5IH0gZnJvbSAnaXMtaG90a2V5J1xuaW1wb3J0IHsgSVNfQVBQTEUgfSBmcm9tICcuL2Vudmlyb25tZW50J1xuXG4vKipcbiAqIEhvdGtleSBtYXBwaW5ncyBmb3IgZWFjaCBwbGF0Zm9ybS5cbiAqL1xuXG5jb25zdCBIT1RLRVlTID0ge1xuICBib2xkOiAnbW9kK2InLFxuICBjb21wb3NlOiBbJ2Rvd24nLCAnbGVmdCcsICdyaWdodCcsICd1cCcsICdiYWNrc3BhY2UnLCAnZW50ZXInXSxcbiAgbW92ZUJhY2t3YXJkOiAnbGVmdCcsXG4gIG1vdmVGb3J3YXJkOiAncmlnaHQnLFxuICBtb3ZlV29yZEJhY2t3YXJkOiAnY3RybCtsZWZ0JyxcbiAgbW92ZVdvcmRGb3J3YXJkOiAnY3RybCtyaWdodCcsXG4gIGRlbGV0ZUJhY2t3YXJkOiAnc2hpZnQ/K2JhY2tzcGFjZScsXG4gIGRlbGV0ZUZvcndhcmQ6ICdzaGlmdD8rZGVsZXRlJyxcbiAgZXh0ZW5kQmFja3dhcmQ6ICdzaGlmdCtsZWZ0JyxcbiAgZXh0ZW5kRm9yd2FyZDogJ3NoaWZ0K3JpZ2h0JyxcbiAgaXRhbGljOiAnbW9kK2knLFxuICBpbnNlcnRTb2Z0QnJlYWs6ICdzaGlmdCtlbnRlcicsXG4gIHNwbGl0QmxvY2s6ICdlbnRlcicsXG4gIHVuZG86ICdtb2QreicsXG59XG5cbmNvbnN0IEFQUExFX0hPVEtFWVMgPSB7XG4gIG1vdmVMaW5lQmFja3dhcmQ6ICdvcHQrdXAnLFxuICBtb3ZlTGluZUZvcndhcmQ6ICdvcHQrZG93bicsXG4gIG1vdmVXb3JkQmFja3dhcmQ6ICdvcHQrbGVmdCcsXG4gIG1vdmVXb3JkRm9yd2FyZDogJ29wdCtyaWdodCcsXG4gIGRlbGV0ZUJhY2t3YXJkOiBbJ2N0cmwrYmFja3NwYWNlJywgJ2N0cmwraCddLFxuICBkZWxldGVGb3J3YXJkOiBbJ2N0cmwrZGVsZXRlJywgJ2N0cmwrZCddLFxuICBkZWxldGVMaW5lQmFja3dhcmQ6ICdjbWQrc2hpZnQ/K2JhY2tzcGFjZScsXG4gIGRlbGV0ZUxpbmVGb3J3YXJkOiBbJ2NtZCtzaGlmdD8rZGVsZXRlJywgJ2N0cmwrayddLFxuICBkZWxldGVXb3JkQmFja3dhcmQ6ICdvcHQrc2hpZnQ/K2JhY2tzcGFjZScsXG4gIGRlbGV0ZVdvcmRGb3J3YXJkOiAnb3B0K3NoaWZ0PytkZWxldGUnLFxuICBleHRlbmRMaW5lQmFja3dhcmQ6ICdvcHQrc2hpZnQrdXAnLFxuICBleHRlbmRMaW5lRm9yd2FyZDogJ29wdCtzaGlmdCtkb3duJyxcbiAgcmVkbzogJ2NtZCtzaGlmdCt6JyxcbiAgdHJhbnNwb3NlQ2hhcmFjdGVyOiAnY3RybCt0Jyxcbn1cblxuY29uc3QgV0lORE9XU19IT1RLRVlTID0ge1xuICBkZWxldGVXb3JkQmFja3dhcmQ6ICdjdHJsK3NoaWZ0PytiYWNrc3BhY2UnLFxuICBkZWxldGVXb3JkRm9yd2FyZDogJ2N0cmwrc2hpZnQ/K2RlbGV0ZScsXG4gIHJlZG86IFsnY3RybCt5JywgJ2N0cmwrc2hpZnQreiddLFxufVxuXG4vKipcbiAqIENyZWF0ZSBhIHBsYXRmb3JtLWF3YXJlIGhvdGtleSBjaGVja2VyLlxuICovXG5cbmNvbnN0IGNyZWF0ZSA9IChrZXk6IHN0cmluZykgPT4ge1xuICBjb25zdCBnZW5lcmljID0gSE9US0VZU1trZXldXG4gIGNvbnN0IGFwcGxlID0gQVBQTEVfSE9US0VZU1trZXldXG4gIGNvbnN0IHdpbmRvd3MgPSBXSU5ET1dTX0hPVEtFWVNba2V5XVxuICBjb25zdCBpc0dlbmVyaWMgPSBnZW5lcmljICYmIGlzS2V5SG90a2V5KGdlbmVyaWMpXG4gIGNvbnN0IGlzQXBwbGUgPSBhcHBsZSAmJiBpc0tleUhvdGtleShhcHBsZSlcbiAgY29uc3QgaXNXaW5kb3dzID0gd2luZG93cyAmJiBpc0tleUhvdGtleSh3aW5kb3dzKVxuXG4gIHJldHVybiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICBpZiAoaXNHZW5lcmljICYmIGlzR2VuZXJpYyhldmVudCkpIHJldHVybiB0cnVlXG4gICAgaWYgKElTX0FQUExFICYmIGlzQXBwbGUgJiYgaXNBcHBsZShldmVudCkpIHJldHVybiB0cnVlXG4gICAgaWYgKCFJU19BUFBMRSAmJiBpc1dpbmRvd3MgJiYgaXNXaW5kb3dzKGV2ZW50KSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG4vKipcbiAqIEhvdGtleXMuXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQge1xuICBpc0JvbGQ6IGNyZWF0ZSgnYm9sZCcpLFxuICBpc0NvbXBvc2U6IGNyZWF0ZSgnY29tcG9zZScpLFxuICBpc01vdmVCYWNrd2FyZDogY3JlYXRlKCdtb3ZlQmFja3dhcmQnKSxcbiAgaXNNb3ZlRm9yd2FyZDogY3JlYXRlKCdtb3ZlRm9yd2FyZCcpLFxuICBpc0RlbGV0ZUJhY2t3YXJkOiBjcmVhdGUoJ2RlbGV0ZUJhY2t3YXJkJyksXG4gIGlzRGVsZXRlRm9yd2FyZDogY3JlYXRlKCdkZWxldGVGb3J3YXJkJyksXG4gIGlzRGVsZXRlTGluZUJhY2t3YXJkOiBjcmVhdGUoJ2RlbGV0ZUxpbmVCYWNrd2FyZCcpLFxuICBpc0RlbGV0ZUxpbmVGb3J3YXJkOiBjcmVhdGUoJ2RlbGV0ZUxpbmVGb3J3YXJkJyksXG4gIGlzRGVsZXRlV29yZEJhY2t3YXJkOiBjcmVhdGUoJ2RlbGV0ZVdvcmRCYWNrd2FyZCcpLFxuICBpc0RlbGV0ZVdvcmRGb3J3YXJkOiBjcmVhdGUoJ2RlbGV0ZVdvcmRGb3J3YXJkJyksXG4gIGlzRXh0ZW5kQmFja3dhcmQ6IGNyZWF0ZSgnZXh0ZW5kQmFja3dhcmQnKSxcbiAgaXNFeHRlbmRGb3J3YXJkOiBjcmVhdGUoJ2V4dGVuZEZvcndhcmQnKSxcbiAgaXNFeHRlbmRMaW5lQmFja3dhcmQ6IGNyZWF0ZSgnZXh0ZW5kTGluZUJhY2t3YXJkJyksXG4gIGlzRXh0ZW5kTGluZUZvcndhcmQ6IGNyZWF0ZSgnZXh0ZW5kTGluZUZvcndhcmQnKSxcbiAgaXNJdGFsaWM6IGNyZWF0ZSgnaXRhbGljJyksXG4gIGlzTW92ZUxpbmVCYWNrd2FyZDogY3JlYXRlKCdtb3ZlTGluZUJhY2t3YXJkJyksXG4gIGlzTW92ZUxpbmVGb3J3YXJkOiBjcmVhdGUoJ21vdmVMaW5lRm9yd2FyZCcpLFxuICBpc01vdmVXb3JkQmFja3dhcmQ6IGNyZWF0ZSgnbW92ZVdvcmRCYWNrd2FyZCcpLFxuICBpc01vdmVXb3JkRm9yd2FyZDogY3JlYXRlKCdtb3ZlV29yZEZvcndhcmQnKSxcbiAgaXNSZWRvOiBjcmVhdGUoJ3JlZG8nKSxcbiAgaXNTb2Z0QnJlYWs6IGNyZWF0ZSgnaW5zZXJ0U29mdEJyZWFrJyksXG4gIGlzU3BsaXRCbG9jazogY3JlYXRlKCdzcGxpdEJsb2NrJyksXG4gIGlzVHJhbnNwb3NlQ2hhcmFjdGVyOiBjcmVhdGUoJ3RyYW5zcG9zZUNoYXJhY3RlcicpLFxuICBpc1VuZG86IGNyZWF0ZSgndW5kbycpLFxufVxuIiwgImltcG9ydCB7IFJlZk9iamVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuLi8uLi9wbHVnaW4vcmVhY3QtZWRpdG9yJ1xuaW1wb3J0IHsgaXNUcmFja2VkTXV0YXRpb24gfSBmcm9tICcuLi8uLi91dGlscy9kb20nXG5cbmV4cG9ydCB0eXBlIFJlc3RvcmVET01NYW5hZ2VyID0ge1xuICByZWdpc3Rlck11dGF0aW9uczogKG11dGF0aW9uczogTXV0YXRpb25SZWNvcmRbXSkgPT4gdm9pZFxuICByZXN0b3JlRE9NOiAoKSA9PiB2b2lkXG4gIGNsZWFyOiAoKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVSZXN0b3JlRG9tTWFuYWdlciA9IChcbiAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgcmVjZWl2ZWRVc2VySW5wdXQ6IFJlZk9iamVjdDxib29sZWFuPlxuKTogUmVzdG9yZURPTU1hbmFnZXIgPT4ge1xuICBsZXQgYnVmZmVyZWRNdXRhdGlvbnM6IE11dGF0aW9uUmVjb3JkW10gPSBbXVxuXG4gIGNvbnN0IGNsZWFyID0gKCkgPT4ge1xuICAgIGJ1ZmZlcmVkTXV0YXRpb25zID0gW11cbiAgfVxuXG4gIGNvbnN0IHJlZ2lzdGVyTXV0YXRpb25zID0gKG11dGF0aW9uczogTXV0YXRpb25SZWNvcmRbXSkgPT4ge1xuICAgIGlmICghcmVjZWl2ZWRVc2VySW5wdXQuY3VycmVudCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgdHJhY2tlZE11dGF0aW9ucyA9IG11dGF0aW9ucy5maWx0ZXIobXV0YXRpb24gPT5cbiAgICAgIGlzVHJhY2tlZE11dGF0aW9uKGVkaXRvciwgbXV0YXRpb24sIG11dGF0aW9ucylcbiAgICApXG5cbiAgICBidWZmZXJlZE11dGF0aW9ucy5wdXNoKC4uLnRyYWNrZWRNdXRhdGlvbnMpXG4gIH1cblxuICBmdW5jdGlvbiByZXN0b3JlRE9NKCkge1xuICAgIGJ1ZmZlcmVkTXV0YXRpb25zLnJldmVyc2UoKS5mb3JFYWNoKG11dGF0aW9uID0+IHtcbiAgICAgIGlmIChtdXRhdGlvbi50eXBlID09PSAnY2hhcmFjdGVyRGF0YScpIHtcbiAgICAgICAgbXV0YXRpb24udGFyZ2V0LnRleHRDb250ZW50ID0gbXV0YXRpb24ub2xkVmFsdWVcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIG11dGF0aW9uLnJlbW92ZWROb2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICBtdXRhdGlvbi50YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIG11dGF0aW9uLm5leHRTaWJsaW5nKVxuICAgICAgfSlcblxuICAgICAgbXV0YXRpb24uYWRkZWROb2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICBtdXRhdGlvbi50YXJnZXQucmVtb3ZlQ2hpbGQobm9kZSlcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIC8vIENsZWFyIGJ1ZmZlcmVkIG11dGF0aW9ucyB0byBlbnN1cmUgd2UgZG9uJ3QgdW5kbyB0aGVtIHR3aWNlXG4gICAgY2xlYXIoKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZWdpc3Rlck11dGF0aW9ucyxcbiAgICByZXN0b3JlRE9NLFxuICAgIGNsZWFyLFxuICB9XG59XG4iLCAiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCwgQ29tcG9uZW50VHlwZSwgQ29udGV4dFR5cGUsIFJlZk9iamVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRWRpdG9yQ29udGV4dCB9IGZyb20gJy4uLy4uL2hvb2tzL3VzZS1zbGF0ZS1zdGF0aWMnXG5pbXBvcnQgeyBJU19BTkRST0lEIH0gZnJvbSAnLi4vLi4vdXRpbHMvZW52aXJvbm1lbnQnXG5pbXBvcnQge1xuICBjcmVhdGVSZXN0b3JlRG9tTWFuYWdlcixcbiAgUmVzdG9yZURPTU1hbmFnZXIsXG59IGZyb20gJy4vcmVzdG9yZS1kb20tbWFuYWdlcidcblxuY29uc3QgTVVUQVRJT05fT0JTRVJWRVJfQ09ORklHOiBNdXRhdGlvbk9ic2VydmVySW5pdCA9IHtcbiAgc3VidHJlZTogdHJ1ZSxcbiAgY2hpbGRMaXN0OiB0cnVlLFxuICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxuICBjaGFyYWN0ZXJEYXRhT2xkVmFsdWU6IHRydWUsXG59XG5cbnR5cGUgUmVzdG9yZURPTVByb3BzID0ge1xuICByZWNlaXZlZFVzZXJJbnB1dDogUmVmT2JqZWN0PGJvb2xlYW4+XG4gIG5vZGU6IFJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD5cbn1cblxuLy8gV2UgaGF2ZSB0byB1c2UgYSBjbGFzcyBjb21wb25lbnQgaGVyZSBzaW5jZSB3ZSByZWx5IG9uIGBnZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZWAgd2hpY2ggaGFzIG5vIEZDIGVxdWl2YWxlbnRcbi8vIHRvIHJ1biBjb2RlIHN5bmNocm9ub3VzbHkgaW1tZWRpYXRlbHkgYmVmb3JlIHJlYWN0IGNvbW1pdHMgdGhlIGNvbXBvbmVudCB1cGRhdGUgdG8gdGhlIERPTS5cbmNsYXNzIFJlc3RvcmVET01Db21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQ8UmVzdG9yZURPTVByb3BzPiB7XG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IEVkaXRvckNvbnRleHRcbiAgY29udGV4dDogQ29udGV4dFR5cGU8dHlwZW9mIEVkaXRvckNvbnRleHQ+ID0gbnVsbFxuXG4gIHByaXZhdGUgbWFuYWdlcjogUmVzdG9yZURPTU1hbmFnZXIgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIG11dGF0aW9uT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbFxuXG4gIG9ic2VydmUoKSB7XG4gICAgY29uc3QgeyBub2RlIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKCFub2RlLmN1cnJlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGF0dGFjaCBNdXRhdGlvbk9ic2VydmVyLCBgbm9kZWAgaXMgdW5kZWZpbmVkJylcbiAgICB9XG5cbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXI/Lm9ic2VydmUobm9kZS5jdXJyZW50LCBNVVRBVElPTl9PQlNFUlZFUl9DT05GSUcpXG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjb25zdCB7IHJlY2VpdmVkVXNlcklucHV0IH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgZWRpdG9yID0gdGhpcy5jb250ZXh0IVxuXG4gICAgdGhpcy5tYW5hZ2VyID0gY3JlYXRlUmVzdG9yZURvbU1hbmFnZXIoZWRpdG9yLCByZWNlaXZlZFVzZXJJbnB1dClcbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLm1hbmFnZXIucmVnaXN0ZXJNdXRhdGlvbnMpXG5cbiAgICB0aGlzLm9ic2VydmUoKVxuICB9XG5cbiAgZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUoKSB7XG4gICAgY29uc3QgcGVuZGluZ011dGF0aW9ucyA9IHRoaXMubXV0YXRpb25PYnNlcnZlcj8udGFrZVJlY29yZHMoKVxuICAgIGlmIChwZW5kaW5nTXV0YXRpb25zPy5sZW5ndGgpIHtcbiAgICAgIHRoaXMubWFuYWdlcj8ucmVnaXN0ZXJNdXRhdGlvbnMocGVuZGluZ011dGF0aW9ucylcbiAgICB9XG5cbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKVxuICAgIHRoaXMubWFuYWdlcj8ucmVzdG9yZURPTSgpXG5cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMubWFuYWdlcj8uY2xlYXIoKVxuICAgIHRoaXMub2JzZXJ2ZSgpXG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IFJlc3RvcmVET006IENvbXBvbmVudFR5cGU8UmVzdG9yZURPTVByb3BzPiA9IElTX0FORFJPSURcbiAgPyBSZXN0b3JlRE9NQ29tcG9uZW50XG4gIDogKHsgY2hpbGRyZW4gfSkgPT4gPD57Y2hpbGRyZW59PC8+XG4iLCAiaW1wb3J0IHtcbiAgRWRpdG9yLFxuICBOb2RlLFxuICBPcGVyYXRpb24sXG4gIFBhdGgsXG4gIFBvaW50LFxuICBSYW5nZSxcbiAgVGV4dCxcbiAgRWxlbWVudCxcbn0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyBFRElUT1JfVE9fUEVORElOR19ESUZGUyB9IGZyb20gJy4vd2Vhay1tYXBzJ1xuXG5leHBvcnQgdHlwZSBTdHJpbmdEaWZmID0ge1xuICBzdGFydDogbnVtYmVyXG4gIGVuZDogbnVtYmVyXG4gIHRleHQ6IHN0cmluZ1xufVxuXG5leHBvcnQgdHlwZSBUZXh0RGlmZiA9IHtcbiAgaWQ6IG51bWJlclxuICBwYXRoOiBQYXRoXG4gIGRpZmY6IFN0cmluZ0RpZmZcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGEgdGV4dCBkaWZmIHdhcyBhcHBsaWVkIGluIGEgd2F5IHdlIGNhbiBwZXJmb3JtIHRoZSBwZW5kaW5nIGFjdGlvbiBvbiAvXG4gKiByZWNvdmVyIHRoZSBwZW5kaW5nIHNlbGVjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeURpZmZTdGF0ZShlZGl0b3I6IEVkaXRvciwgdGV4dERpZmY6IFRleHREaWZmKTogYm9vbGVhbiB7XG4gIGNvbnN0IHsgcGF0aCwgZGlmZiB9ID0gdGV4dERpZmZcbiAgaWYgKCFFZGl0b3IuaGFzUGF0aChlZGl0b3IsIHBhdGgpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBjb25zdCBub2RlID0gTm9kZS5nZXQoZWRpdG9yLCBwYXRoKVxuICBpZiAoIVRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpZiAoZGlmZi5zdGFydCAhPT0gbm9kZS50ZXh0Lmxlbmd0aCB8fCBkaWZmLnRleHQubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIG5vZGUudGV4dC5zbGljZShkaWZmLnN0YXJ0LCBkaWZmLnN0YXJ0ICsgZGlmZi50ZXh0Lmxlbmd0aCkgPT09IGRpZmYudGV4dFxuICAgIClcbiAgfVxuXG4gIGNvbnN0IG5leHRQYXRoID0gUGF0aC5uZXh0KHBhdGgpXG4gIGlmICghRWRpdG9yLmhhc1BhdGgoZWRpdG9yLCBuZXh0UGF0aCkpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGNvbnN0IG5leHROb2RlID0gTm9kZS5nZXQoZWRpdG9yLCBuZXh0UGF0aClcbiAgcmV0dXJuIFRleHQuaXNUZXh0KG5leHROb2RlKSAmJiBuZXh0Tm9kZS50ZXh0LnN0YXJ0c1dpdGgoZGlmZi50ZXh0KVxufVxuXG5mdW5jdGlvbiBhcHBseVN0cmluZ0RpZmYodGV4dDogc3RyaW5nLCAuLi5kaWZmczogU3RyaW5nRGlmZltdKSB7XG4gIHJldHVybiBkaWZmcy5yZWR1Y2UoXG4gICAgKHRleHQsIGRpZmYpID0+XG4gICAgICB0ZXh0LnNsaWNlKDAsIGRpZmYuc3RhcnQpICsgZGlmZi50ZXh0ICsgdGV4dC5zbGljZShkaWZmLmVuZCksXG4gICAgdGV4dFxuICApXG59XG5cbmZ1bmN0aW9uIGxvbmdlc3RDb21tb25QcmVmaXhMZW5ndGgoc3RyOiBzdHJpbmcsIGFub3RoZXI6IHN0cmluZykge1xuICBjb25zdCBsZW5ndGggPSBNYXRoLm1pbihzdHIubGVuZ3RoLCBhbm90aGVyLmxlbmd0aClcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0ci5jaGFyQXQoaSkgIT09IGFub3RoZXIuY2hhckF0KGkpKSB7XG4gICAgICByZXR1cm4gaVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBsZW5ndGhcbn1cblxuZnVuY3Rpb24gbG9uZ2VzdENvbW1vblN1ZmZpeExlbmd0aChcbiAgc3RyOiBzdHJpbmcsXG4gIGFub3RoZXI6IHN0cmluZyxcbiAgbWF4OiBudW1iZXJcbik6IG51bWJlciB7XG4gIGNvbnN0IGxlbmd0aCA9IE1hdGgubWluKHN0ci5sZW5ndGgsIGFub3RoZXIubGVuZ3RoLCBtYXgpXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmIChcbiAgICAgIHN0ci5jaGFyQXQoc3RyLmxlbmd0aCAtIGkgLSAxKSAhPT0gYW5vdGhlci5jaGFyQXQoYW5vdGhlci5sZW5ndGggLSBpIC0gMSlcbiAgICApIHtcbiAgICAgIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGxlbmd0aFxufVxuXG4vKipcbiAqIFJlbW92ZSByZWR1bmRhbnQgY2hhbmdlcyBmcm9tIHRoZSBkaWZmIHNvIHRoYXQgaXQgc3BhbnMgdGhlIG1pbmltYWwgcG9zc2libGUgcmFuZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVN0cmluZ0RpZmYodGFyZ2V0VGV4dDogc3RyaW5nLCBkaWZmOiBTdHJpbmdEaWZmKSB7XG4gIGNvbnN0IHsgc3RhcnQsIGVuZCwgdGV4dCB9ID0gZGlmZlxuICBjb25zdCByZW1vdmVkVGV4dCA9IHRhcmdldFRleHQuc2xpY2Uoc3RhcnQsIGVuZClcblxuICBjb25zdCBwcmVmaXhMZW5ndGggPSBsb25nZXN0Q29tbW9uUHJlZml4TGVuZ3RoKHJlbW92ZWRUZXh0LCB0ZXh0KVxuICBjb25zdCBtYXggPSBNYXRoLm1pbihcbiAgICByZW1vdmVkVGV4dC5sZW5ndGggLSBwcmVmaXhMZW5ndGgsXG4gICAgdGV4dC5sZW5ndGggLSBwcmVmaXhMZW5ndGhcbiAgKVxuICBjb25zdCBzdWZmaXhMZW5ndGggPSBsb25nZXN0Q29tbW9uU3VmZml4TGVuZ3RoKHJlbW92ZWRUZXh0LCB0ZXh0LCBtYXgpXG5cbiAgY29uc3Qgbm9ybWFsaXplZDogU3RyaW5nRGlmZiA9IHtcbiAgICBzdGFydDogc3RhcnQgKyBwcmVmaXhMZW5ndGgsXG4gICAgZW5kOiBlbmQgLSBzdWZmaXhMZW5ndGgsXG4gICAgdGV4dDogdGV4dC5zbGljZShwcmVmaXhMZW5ndGgsIHRleHQubGVuZ3RoIC0gc3VmZml4TGVuZ3RoKSxcbiAgfVxuXG4gIGlmIChub3JtYWxpemVkLnN0YXJ0ID09PSBub3JtYWxpemVkLmVuZCAmJiBub3JtYWxpemVkLnRleHQubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiBub3JtYWxpemVkXG59XG5cbi8qKlxuICogUmV0dXJuIGEgc3RyaW5nIGRpZmYgdGhhdCBpcyBlcXVpdmFsZW50IHRvIGFwcGx5aW5nIGIgYWZ0ZXIgYSBzcGFubmluZyB0aGUgcmFuZ2Ugb2ZcbiAqIGJvdGggY2hhbmdlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VTdHJpbmdEaWZmcyhcbiAgdGFyZ2V0VGV4dDogc3RyaW5nLFxuICBhOiBTdHJpbmdEaWZmLFxuICBiOiBTdHJpbmdEaWZmXG4pOiBTdHJpbmdEaWZmIHwgbnVsbCB7XG4gIGNvbnN0IHN0YXJ0ID0gTWF0aC5taW4oYS5zdGFydCwgYi5zdGFydClcbiAgY29uc3Qgb3ZlcmxhcCA9IE1hdGgubWF4KFxuICAgIDAsXG4gICAgTWF0aC5taW4oYS5zdGFydCArIGEudGV4dC5sZW5ndGgsIGIuZW5kKSAtIGIuc3RhcnRcbiAgKVxuXG4gIGNvbnN0IGFwcGxpZWQgPSBhcHBseVN0cmluZ0RpZmYodGFyZ2V0VGV4dCwgYSwgYilcbiAgY29uc3Qgc2xpY2VFbmQgPSBNYXRoLm1heChcbiAgICBiLnN0YXJ0ICsgYi50ZXh0Lmxlbmd0aCxcbiAgICBhLnN0YXJ0ICtcbiAgICAgIGEudGV4dC5sZW5ndGggK1xuICAgICAgKGEuc3RhcnQgKyBhLnRleHQubGVuZ3RoID4gYi5zdGFydCA/IGIudGV4dC5sZW5ndGggOiAwKSAtXG4gICAgICBvdmVybGFwXG4gIClcblxuICBjb25zdCB0ZXh0ID0gYXBwbGllZC5zbGljZShzdGFydCwgc2xpY2VFbmQpXG4gIGNvbnN0IGVuZCA9IE1hdGgubWF4KGEuZW5kLCBiLmVuZCAtIGEudGV4dC5sZW5ndGggKyAoYS5lbmQgLSBhLnN0YXJ0KSlcbiAgcmV0dXJuIG5vcm1hbGl6ZVN0cmluZ0RpZmYodGFyZ2V0VGV4dCwgeyBzdGFydCwgZW5kLCB0ZXh0IH0pXG59XG5cbi8qKlxuICogR2V0IHRoZSBzbGF0ZSByYW5nZSB0aGUgdGV4dCBkaWZmIHNwYW5zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGFyZ2V0UmFuZ2UodGV4dERpZmY6IFRleHREaWZmKTogUmFuZ2Uge1xuICBjb25zdCB7IHBhdGgsIGRpZmYgfSA9IHRleHREaWZmXG4gIHJldHVybiB7XG4gICAgYW5jaG9yOiB7IHBhdGgsIG9mZnNldDogZGlmZi5zdGFydCB9LFxuICAgIGZvY3VzOiB7IHBhdGgsIG9mZnNldDogZGlmZi5lbmQgfSxcbiAgfVxufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSBhICdwZW5kaW5nIHBvaW50JyBhLmsuYSBhIHBvaW50IGJhc2VkIG9uIHRoZSBkb20gc3RhdGUgYmVmb3JlIGFwcGx5aW5nXG4gKiB0aGUgcGVuZGluZyBkaWZmcy4gU2luY2UgdGhlIHBlbmRpbmcgZGlmZnMgbWlnaHQgaGF2ZSBiZWVuIGluc2VydGVkIHdpdGggZGlmZmVyZW50XG4gKiBtYXJrcyB3ZSBoYXZlIHRvICd3YWxrJyB0aGUgb2Zmc2V0IGZyb20gdGhlIHN0YXJ0aW5nIHBvc2l0aW9uIHRvIGVuc3VyZSB3ZSBzdGlsbFxuICogaGF2ZSBhIHZhbGlkIHBvaW50IGluc2lkZSB0aGUgZG9jdW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVBvaW50KGVkaXRvcjogRWRpdG9yLCBwb2ludDogUG9pbnQpOiBQb2ludCB8IG51bGwge1xuICBsZXQgeyBwYXRoLCBvZmZzZXQgfSA9IHBvaW50XG4gIGlmICghRWRpdG9yLmhhc1BhdGgoZWRpdG9yLCBwYXRoKSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBsZXQgbGVhZiA9IE5vZGUuZ2V0KGVkaXRvciwgcGF0aClcbiAgaWYgKCFUZXh0LmlzVGV4dChsZWFmKSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBjb25zdCBwYXJlbnRCbG9jayA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICBtYXRjaDogbiA9PiBFbGVtZW50LmlzRWxlbWVudChuKSAmJiBFZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pLFxuICAgIGF0OiBwYXRoLFxuICB9KVxuXG4gIGlmICghcGFyZW50QmxvY2spIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgd2hpbGUgKG9mZnNldCA+IGxlYWYudGV4dC5sZW5ndGgpIHtcbiAgICBjb25zdCBlbnRyeSA9IEVkaXRvci5uZXh0KGVkaXRvciwgeyBhdDogcGF0aCwgbWF0Y2g6IFRleHQuaXNUZXh0IH0pXG4gICAgaWYgKCFlbnRyeSB8fCAhUGF0aC5pc0Rlc2NlbmRhbnQoZW50cnlbMV0sIHBhcmVudEJsb2NrWzFdKSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBvZmZzZXQgLT0gbGVhZi50ZXh0Lmxlbmd0aFxuICAgIGxlYWYgPSBlbnRyeVswXVxuICAgIHBhdGggPSBlbnRyeVsxXVxuICB9XG5cbiAgcmV0dXJuIHsgcGF0aCwgb2Zmc2V0IH1cbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgYSAncGVuZGluZyBzZWxlY3Rpb24nIHRvIGVuc3VyZSBpdCdzIHZhbGlkIGluIHRoZSBjdXJyZW50IGRvY3VtZW50IHN0YXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUmFuZ2UoZWRpdG9yOiBFZGl0b3IsIHJhbmdlOiBSYW5nZSk6IFJhbmdlIHwgbnVsbCB7XG4gIGNvbnN0IGFuY2hvciA9IG5vcm1hbGl6ZVBvaW50KGVkaXRvciwgcmFuZ2UuYW5jaG9yKVxuICBpZiAoIWFuY2hvcikge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBpZiAoUmFuZ2UuaXNDb2xsYXBzZWQocmFuZ2UpKSB7XG4gICAgcmV0dXJuIHsgYW5jaG9yLCBmb2N1czogYW5jaG9yIH1cbiAgfVxuXG4gIGNvbnN0IGZvY3VzID0gbm9ybWFsaXplUG9pbnQoZWRpdG9yLCByYW5nZS5mb2N1cylcbiAgaWYgKCFmb2N1cykge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4geyBhbmNob3IsIGZvY3VzIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVBlbmRpbmdQb2ludChcbiAgZWRpdG9yOiBFZGl0b3IsXG4gIHBvaW50OiBQb2ludCxcbiAgb3A6IE9wZXJhdGlvblxuKTogUG9pbnQgfCBudWxsIHtcbiAgY29uc3QgcGVuZGluZ0RpZmZzID0gRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuZ2V0KGVkaXRvcilcbiAgY29uc3QgdGV4dERpZmYgPSBwZW5kaW5nRGlmZnM/LmZpbmQoKHsgcGF0aCB9KSA9PlxuICAgIFBhdGguZXF1YWxzKHBhdGgsIHBvaW50LnBhdGgpXG4gIClcblxuICBpZiAoIXRleHREaWZmIHx8IHBvaW50Lm9mZnNldCA8PSB0ZXh0RGlmZi5kaWZmLnN0YXJ0KSB7XG4gICAgcmV0dXJuIFBvaW50LnRyYW5zZm9ybShwb2ludCwgb3AsIHsgYWZmaW5pdHk6ICdiYWNrd2FyZCcgfSlcbiAgfVxuXG4gIGNvbnN0IHsgZGlmZiB9ID0gdGV4dERpZmZcbiAgLy8gUG9pbnQgcmVmZXJlbmNlcyBsb2NhdGlvbiBpbnNpZGUgdGhlIGRpZmYgPT4gdHJhbnNmb3JtIHRoZSBwb2ludCBiYXNlZCBvbiB0aGUgbG9jYXRpb25cbiAgLy8gdGhlIGRpZmYgd2lsbCBiZSBhcHBsaWVkIHRvIGFuZCBhZGQgdGhlIG9mZnNldCBpbnNpZGUgdGhlIGRpZmYuXG4gIGlmIChwb2ludC5vZmZzZXQgPD0gZGlmZi5zdGFydCArIGRpZmYudGV4dC5sZW5ndGgpIHtcbiAgICBjb25zdCBhbmNob3IgPSB7IHBhdGg6IHBvaW50LnBhdGgsIG9mZnNldDogZGlmZi5zdGFydCB9XG4gICAgY29uc3QgdHJhbnNmb3JtZWQgPSBQb2ludC50cmFuc2Zvcm0oYW5jaG9yLCBvcCwge1xuICAgICAgYWZmaW5pdHk6ICdiYWNrd2FyZCcsXG4gICAgfSlcblxuICAgIGlmICghdHJhbnNmb3JtZWQpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGg6IHRyYW5zZm9ybWVkLnBhdGgsXG4gICAgICBvZmZzZXQ6IHRyYW5zZm9ybWVkLm9mZnNldCArIHBvaW50Lm9mZnNldCAtIGRpZmYuc3RhcnQsXG4gICAgfVxuICB9XG5cbiAgLy8gUG9pbnQgcmVmZXJlbmNlcyBsb2NhdGlvbiBhZnRlciB0aGUgZGlmZlxuICBjb25zdCBhbmNob3IgPSB7XG4gICAgcGF0aDogcG9pbnQucGF0aCxcbiAgICBvZmZzZXQ6IHBvaW50Lm9mZnNldCAtIGRpZmYudGV4dC5sZW5ndGggKyBkaWZmLmVuZCAtIGRpZmYuc3RhcnQsXG4gIH1cbiAgY29uc3QgdHJhbnNmb3JtZWQgPSBQb2ludC50cmFuc2Zvcm0oYW5jaG9yLCBvcCwge1xuICAgIGFmZmluaXR5OiAnYmFja3dhcmQnLFxuICB9KVxuICBpZiAoIXRyYW5zZm9ybWVkKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGlmIChcbiAgICBvcC50eXBlID09PSAnc3BsaXRfbm9kZScgJiZcbiAgICBQYXRoLmVxdWFscyhvcC5wYXRoLCBwb2ludC5wYXRoKSAmJlxuICAgIGFuY2hvci5vZmZzZXQgPCBvcC5wb3NpdGlvbiAmJlxuICAgIGRpZmYuc3RhcnQgPCBvcC5wb3NpdGlvblxuICApIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtZWRcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGF0aDogdHJhbnNmb3JtZWQucGF0aCxcbiAgICBvZmZzZXQ6IHRyYW5zZm9ybWVkLm9mZnNldCArIGRpZmYudGV4dC5sZW5ndGggLSBkaWZmLmVuZCArIGRpZmYuc3RhcnQsXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVBlbmRpbmdSYW5nZShcbiAgZWRpdG9yOiBFZGl0b3IsXG4gIHJhbmdlOiBSYW5nZSxcbiAgb3A6IE9wZXJhdGlvblxuKTogUmFuZ2UgfCBudWxsIHtcbiAgY29uc3QgYW5jaG9yID0gdHJhbnNmb3JtUGVuZGluZ1BvaW50KGVkaXRvciwgcmFuZ2UuYW5jaG9yLCBvcClcbiAgaWYgKCFhbmNob3IpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgaWYgKFJhbmdlLmlzQ29sbGFwc2VkKHJhbmdlKSkge1xuICAgIHJldHVybiB7IGFuY2hvciwgZm9jdXM6IGFuY2hvciB9XG4gIH1cblxuICBjb25zdCBmb2N1cyA9IHRyYW5zZm9ybVBlbmRpbmdQb2ludChlZGl0b3IsIHJhbmdlLmZvY3VzLCBvcClcbiAgaWYgKCFmb2N1cykge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4geyBhbmNob3IsIGZvY3VzIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVRleHREaWZmKFxuICB0ZXh0RGlmZjogVGV4dERpZmYsXG4gIG9wOiBPcGVyYXRpb25cbik6IFRleHREaWZmIHwgbnVsbCB7XG4gIGNvbnN0IHsgcGF0aCwgZGlmZiwgaWQgfSA9IHRleHREaWZmXG5cbiAgc3dpdGNoIChvcC50eXBlKSB7XG4gICAgY2FzZSAnaW5zZXJ0X3RleHQnOiB7XG4gICAgICBpZiAoIVBhdGguZXF1YWxzKG9wLnBhdGgsIHBhdGgpIHx8IG9wLm9mZnNldCA+PSBkaWZmLmVuZCkge1xuICAgICAgICByZXR1cm4gdGV4dERpZmZcbiAgICAgIH1cblxuICAgICAgaWYgKG9wLm9mZnNldCA8PSBkaWZmLnN0YXJ0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGlmZjoge1xuICAgICAgICAgICAgc3RhcnQ6IG9wLnRleHQubGVuZ3RoICsgZGlmZi5zdGFydCxcbiAgICAgICAgICAgIGVuZDogb3AudGV4dC5sZW5ndGggKyBkaWZmLmVuZCxcbiAgICAgICAgICAgIHRleHQ6IGRpZmYudGV4dCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGlmZjoge1xuICAgICAgICAgIHN0YXJ0OiBkaWZmLnN0YXJ0LFxuICAgICAgICAgIGVuZDogZGlmZi5lbmQgKyBvcC50ZXh0Lmxlbmd0aCxcbiAgICAgICAgICB0ZXh0OiBkaWZmLnRleHQsXG4gICAgICAgIH0sXG4gICAgICAgIGlkLFxuICAgICAgICBwYXRoLFxuICAgICAgfVxuICAgIH1cbiAgICBjYXNlICdyZW1vdmVfdGV4dCc6IHtcbiAgICAgIGlmICghUGF0aC5lcXVhbHMob3AucGF0aCwgcGF0aCkgfHwgb3Aub2Zmc2V0ID49IGRpZmYuZW5kKSB7XG4gICAgICAgIHJldHVybiB0ZXh0RGlmZlxuICAgICAgfVxuXG4gICAgICBpZiAob3Aub2Zmc2V0ICsgb3AudGV4dC5sZW5ndGggPD0gZGlmZi5zdGFydCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRpZmY6IHtcbiAgICAgICAgICAgIHN0YXJ0OiBkaWZmLnN0YXJ0IC0gb3AudGV4dC5sZW5ndGgsXG4gICAgICAgICAgICBlbmQ6IGRpZmYuZW5kIC0gb3AudGV4dC5sZW5ndGgsXG4gICAgICAgICAgICB0ZXh0OiBkaWZmLnRleHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwYXRoLFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRpZmY6IHtcbiAgICAgICAgICBzdGFydDogZGlmZi5zdGFydCxcbiAgICAgICAgICBlbmQ6IGRpZmYuZW5kIC0gb3AudGV4dC5sZW5ndGgsXG4gICAgICAgICAgdGV4dDogZGlmZi50ZXh0LFxuICAgICAgICB9LFxuICAgICAgICBpZCxcbiAgICAgICAgcGF0aCxcbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSAnc3BsaXRfbm9kZSc6IHtcbiAgICAgIGlmICghUGF0aC5lcXVhbHMob3AucGF0aCwgcGF0aCkgfHwgb3AucG9zaXRpb24gPj0gZGlmZi5lbmQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkaWZmLFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHBhdGg6IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wLCB7IGFmZmluaXR5OiAnYmFja3dhcmQnIH0pISxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAob3AucG9zaXRpb24gPiBkaWZmLnN0YXJ0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGlmZjoge1xuICAgICAgICAgICAgc3RhcnQ6IGRpZmYuc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IE1hdGgubWluKG9wLnBvc2l0aW9uLCBkaWZmLmVuZCksXG4gICAgICAgICAgICB0ZXh0OiBkaWZmLnRleHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwYXRoLFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRpZmY6IHtcbiAgICAgICAgICBzdGFydDogZGlmZi5zdGFydCAtIG9wLnBvc2l0aW9uLFxuICAgICAgICAgIGVuZDogZGlmZi5lbmQgLSBvcC5wb3NpdGlvbixcbiAgICAgICAgICB0ZXh0OiBkaWZmLnRleHQsXG4gICAgICAgIH0sXG4gICAgICAgIGlkLFxuICAgICAgICBwYXRoOiBQYXRoLnRyYW5zZm9ybShwYXRoLCBvcCwgeyBhZmZpbml0eTogJ2ZvcndhcmQnIH0pISxcbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSAnbWVyZ2Vfbm9kZSc6IHtcbiAgICAgIGlmICghUGF0aC5lcXVhbHMob3AucGF0aCwgcGF0aCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkaWZmLFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHBhdGg6IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wKSEsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGlmZjoge1xuICAgICAgICAgIHN0YXJ0OiBkaWZmLnN0YXJ0ICsgb3AucG9zaXRpb24sXG4gICAgICAgICAgZW5kOiBkaWZmLmVuZCArIG9wLnBvc2l0aW9uLFxuICAgICAgICAgIHRleHQ6IGRpZmYudGV4dCxcbiAgICAgICAgfSxcbiAgICAgICAgaWQsXG4gICAgICAgIHBhdGg6IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wKSEsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgbmV3UGF0aCA9IFBhdGgudHJhbnNmb3JtKHBhdGgsIG9wKVxuICBpZiAoIW5ld1BhdGgpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBkaWZmLFxuICAgIHBhdGg6IG5ld1BhdGgsXG4gICAgaWQsXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBEZWJvdW5jZWRGdW5jIH0gZnJvbSAnbG9kYXNoJ1xuaW1wb3J0IHsgRWRpdG9yLCBOb2RlLCBQYXRoLCBQb2ludCwgUmFuZ2UsIFRleHQsIFRyYW5zZm9ybXMgfSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IFJlYWN0RWRpdG9yIH0gZnJvbSAnLi4vLi4vcGx1Z2luL3JlYWN0LWVkaXRvcidcbmltcG9ydCB7XG4gIG1lcmdlU3RyaW5nRGlmZnMsXG4gIG5vcm1hbGl6ZVBvaW50LFxuICBub3JtYWxpemVSYW5nZSxcbiAgbm9ybWFsaXplU3RyaW5nRGlmZixcbiAgU3RyaW5nRGlmZixcbiAgdGFyZ2V0UmFuZ2UsXG4gIFRleHREaWZmLFxuICB2ZXJpZnlEaWZmU3RhdGUsXG59IGZyb20gJy4uLy4uL3V0aWxzL2RpZmYtdGV4dCdcbmltcG9ydCB7IGlzRE9NU2VsZWN0aW9uLCBpc1RyYWNrZWRNdXRhdGlvbiB9IGZyb20gJy4uLy4uL3V0aWxzL2RvbSdcbmltcG9ydCB7XG4gIEVESVRPUl9UT19GT1JDRV9SRU5ERVIsXG4gIEVESVRPUl9UT19QRU5ESU5HX0FDVElPTixcbiAgRURJVE9SX1RPX1BFTkRJTkdfRElGRlMsXG4gIEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUyxcbiAgRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OLFxuICBFRElUT1JfVE9fUExBQ0VIT0xERVJfRUxFTUVOVCxcbiAgRURJVE9SX1RPX1VTRVJfTUFSS1MsXG4gIElTX0NPTVBPU0lORyxcbn0gZnJvbSAnLi4vLi4vdXRpbHMvd2Vhay1tYXBzJ1xuXG5leHBvcnQgdHlwZSBBY3Rpb24gPSB7IGF0PzogUG9pbnQgfCBSYW5nZTsgcnVuOiAoKSA9PiB2b2lkIH1cblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2RyYWZ0LWpzL2Jsb2IvbWFpbi9zcmMvY29tcG9uZW50L2hhbmRsZXJzL2NvbXBvc2l0aW9uL0RyYWZ0RWRpdG9yQ29tcG9zaXRpb25IYW5kbGVyLmpzI0w0MVxuLy8gV2hlbiB1c2luZyBrZXlib2FyZCBFbmdsaXNoIGFzc29jaWF0aW9uIGZ1bmN0aW9uLCBjb25wb3NpdGlvbkVuZCB0cmlnZ2VyZWQgdG9vIGZhc3QsIHJlc3VsdGluZyBpbiBhZnRlciBgaW5zZXJ0VGV4dGAgc3RpbGwgbWFpbnRhaW4gYXNzb2NpYXRpb24gc3RhdGUuXG5jb25zdCBSRVNPTFZFX0RFTEFZID0gMjVcblxuLy8gVGltZSB3aXRoIG5vIHVzZXIgaW50ZXJhY3Rpb24gYmVmb3JlIHRoZSBjdXJyZW50IHVzZXIgYWN0aW9uIGlzIGNvbnNpZGVyZWQgYXMgZG9uZS5cbmNvbnN0IEZMVVNIX0RFTEFZID0gMjAwXG5cbi8vIFJlcGxhY2Ugd2l0aCBgY29uc3QgZGVidWcgPSBjb25zb2xlLmxvZ2AgdG8gZGVidWdcbmNvbnN0IGRlYnVnID0gKC4uLl86IHVua25vd25bXSkgPT4ge31cblxuZXhwb3J0IHR5cGUgQ3JlYXRlQW5kcm9pZElucHV0TWFuYWdlck9wdGlvbnMgPSB7XG4gIGVkaXRvcjogUmVhY3RFZGl0b3JcblxuICBzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlOiBEZWJvdW5jZWRGdW5jPCgpID0+IHZvaWQ+XG4gIG9uRE9NU2VsZWN0aW9uQ2hhbmdlOiBEZWJvdW5jZWRGdW5jPCgpID0+IHZvaWQ+XG59XG5cbmV4cG9ydCB0eXBlIEFuZHJvaWRJbnB1dE1hbmFnZXIgPSB7XG4gIGZsdXNoOiAoKSA9PiB2b2lkXG4gIHNjaGVkdWxlRmx1c2g6ICgpID0+IHZvaWRcblxuICBoYXNQZW5kaW5nRGlmZnM6ICgpID0+IGJvb2xlYW5cbiAgaGFzUGVuZGluZ0FjdGlvbjogKCkgPT4gYm9vbGVhblxuICBoYXNQZW5kaW5nQ2hhbmdlczogKCkgPT4gYm9vbGVhblxuICBpc0ZsdXNoaW5nOiAoKSA9PiBib29sZWFuIHwgJ2FjdGlvbidcblxuICBoYW5kbGVVc2VyU2VsZWN0OiAocmFuZ2U6IFJhbmdlIHwgbnVsbCkgPT4gdm9pZFxuICBoYW5kbGVDb21wb3NpdGlvbkVuZDogKGV2ZW50OiBSZWFjdC5Db21wb3NpdGlvbkV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4gdm9pZFxuICBoYW5kbGVDb21wb3NpdGlvblN0YXJ0OiAoXG4gICAgZXZlbnQ6IFJlYWN0LkNvbXBvc2l0aW9uRXZlbnQ8SFRNTERpdkVsZW1lbnQ+XG4gICkgPT4gdm9pZFxuICBoYW5kbGVET01CZWZvcmVJbnB1dDogKGV2ZW50OiBJbnB1dEV2ZW50KSA9PiB2b2lkXG4gIGhhbmRsZUtleURvd246IChldmVudDogUmVhY3QuS2V5Ym9hcmRFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHZvaWRcblxuICBoYW5kbGVEb21NdXRhdGlvbnM6IChtdXRhdGlvbnM6IE11dGF0aW9uUmVjb3JkW10pID0+IHZvaWRcbiAgaGFuZGxlSW5wdXQ6ICgpID0+IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFuZHJvaWRJbnB1dE1hbmFnZXIoe1xuICBlZGl0b3IsXG4gIHNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2UsXG4gIG9uRE9NU2VsZWN0aW9uQ2hhbmdlLFxufTogQ3JlYXRlQW5kcm9pZElucHV0TWFuYWdlck9wdGlvbnMpOiBBbmRyb2lkSW5wdXRNYW5hZ2VyIHtcbiAgbGV0IGZsdXNoaW5nOiAnYWN0aW9uJyB8IGJvb2xlYW4gPSBmYWxzZVxuICBsZXQgY29tcG9zaXRpb25FbmRUaW1lb3V0SWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbCA9IG51bGxcbiAgbGV0IGZsdXNoVGltZW91dElkOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsXG4gIGxldCBhY3Rpb25UaW1lb3V0SWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbCA9IG51bGxcblxuICBsZXQgaWRDb3VudGVyID0gMFxuICBsZXQgaW5zZXJ0UG9zaXRpb25IaW50OiBTdHJpbmdEaWZmIHwgbnVsbCB8IGZhbHNlID0gZmFsc2VcblxuICBjb25zdCBhcHBseVBlbmRpbmdTZWxlY3Rpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgcGVuZGluZ1NlbGVjdGlvbiA9IEVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTi5nZXQoZWRpdG9yKVxuICAgIEVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTi5kZWxldGUoZWRpdG9yKVxuXG4gICAgaWYgKHBlbmRpbmdTZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVSYW5nZShlZGl0b3IsIHBlbmRpbmdTZWxlY3Rpb24pXG5cbiAgICAgIGRlYnVnKCdhcHBseSBwZW5kaW5nIHNlbGVjdGlvbicsIHBlbmRpbmdTZWxlY3Rpb24sIG5vcm1hbGl6ZWQpXG5cbiAgICAgIGlmIChub3JtYWxpemVkICYmICghc2VsZWN0aW9uIHx8ICFSYW5nZS5lcXVhbHMobm9ybWFsaXplZCwgc2VsZWN0aW9uKSkpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBub3JtYWxpemVkKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHBlcmZvcm1BY3Rpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgYWN0aW9uID0gRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OLmdldChlZGl0b3IpXG4gICAgRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OLmRlbGV0ZShlZGl0b3IpXG4gICAgaWYgKCFhY3Rpb24pIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChhY3Rpb24uYXQpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IFBvaW50LmlzUG9pbnQoYWN0aW9uLmF0KVxuICAgICAgICA/IG5vcm1hbGl6ZVBvaW50KGVkaXRvciwgYWN0aW9uLmF0KVxuICAgICAgICA6IG5vcm1hbGl6ZVJhbmdlKGVkaXRvciwgYWN0aW9uLmF0KVxuXG4gICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgdGFyZ2V0UmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCB0YXJnZXQpXG4gICAgICBpZiAoIWVkaXRvci5zZWxlY3Rpb24gfHwgIVJhbmdlLmVxdWFscyhlZGl0b3Iuc2VsZWN0aW9uLCB0YXJnZXRSYW5nZSkpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCB0YXJnZXQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgYWN0aW9uLnJ1bigpXG4gIH1cblxuICBjb25zdCBmbHVzaCA9ICgpID0+IHtcbiAgICBpZiAoZmx1c2hUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChmbHVzaFRpbWVvdXRJZClcbiAgICAgIGZsdXNoVGltZW91dElkID0gbnVsbFxuICAgIH1cblxuICAgIGlmIChhY3Rpb25UaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChhY3Rpb25UaW1lb3V0SWQpXG4gICAgICBhY3Rpb25UaW1lb3V0SWQgPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKCFoYXNQZW5kaW5nRGlmZnMoKSAmJiAhaGFzUGVuZGluZ0FjdGlvbigpKSB7XG4gICAgICBhcHBseVBlbmRpbmdTZWxlY3Rpb24oKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKCFmbHVzaGluZykge1xuICAgICAgZmx1c2hpbmcgPSB0cnVlXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IChmbHVzaGluZyA9IGZhbHNlKSlcbiAgICB9XG5cbiAgICBpZiAoaGFzUGVuZGluZ0FjdGlvbigpKSB7XG4gICAgICBmbHVzaGluZyA9ICdhY3Rpb24nXG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZWN0aW9uUmVmID1cbiAgICAgIGVkaXRvci5zZWxlY3Rpb24gJiZcbiAgICAgIEVkaXRvci5yYW5nZVJlZihlZGl0b3IsIGVkaXRvci5zZWxlY3Rpb24sIHsgYWZmaW5pdHk6ICdmb3J3YXJkJyB9KVxuICAgIEVESVRPUl9UT19VU0VSX01BUktTLnNldChlZGl0b3IsIGVkaXRvci5tYXJrcylcblxuICAgIGRlYnVnKFxuICAgICAgJ2ZsdXNoJyxcbiAgICAgIEVESVRPUl9UT19QRU5ESU5HX0FDVElPTi5nZXQoZWRpdG9yKSxcbiAgICAgIEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLmdldChlZGl0b3IpXG4gICAgKVxuXG4gICAgbGV0IHNjaGVkdWxlU2VsZWN0aW9uQ2hhbmdlID0gISFFRElUT1JfVE9fUEVORElOR19ESUZGUy5nZXQoZWRpdG9yKT8ubGVuZ3RoXG5cbiAgICBsZXQgZGlmZjogVGV4dERpZmYgfCB1bmRlZmluZWRcbiAgICB3aGlsZSAoKGRpZmYgPSBFRElUT1JfVE9fUEVORElOR19ESUZGUy5nZXQoZWRpdG9yKT8uWzBdKSkge1xuICAgICAgY29uc3QgcGVuZGluZ01hcmtzID0gRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLmdldChlZGl0b3IpXG5cbiAgICAgIGlmIChwZW5kaW5nTWFya3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MuZGVsZXRlKGVkaXRvcilcbiAgICAgICAgZWRpdG9yLm1hcmtzID0gcGVuZGluZ01hcmtzXG4gICAgICB9XG5cbiAgICAgIGlmIChwZW5kaW5nTWFya3MgJiYgaW5zZXJ0UG9zaXRpb25IaW50ID09PSBmYWxzZSkge1xuICAgICAgICBpbnNlcnRQb3NpdGlvbkhpbnQgPSBudWxsXG4gICAgICAgIGRlYnVnKCdpbnNlcnQgYWZ0ZXIgbWFyayBwbGFjZWhvbGRlcicpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJhbmdlID0gdGFyZ2V0UmFuZ2UoZGlmZilcbiAgICAgIGlmICghZWRpdG9yLnNlbGVjdGlvbiB8fCAhUmFuZ2UuZXF1YWxzKGVkaXRvci5zZWxlY3Rpb24sIHJhbmdlKSkge1xuICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHJhbmdlKVxuICAgICAgfVxuXG4gICAgICBpZiAoZGlmZi5kaWZmLnRleHQpIHtcbiAgICAgICAgRWRpdG9yLmluc2VydFRleHQoZWRpdG9yLCBkaWZmLmRpZmYudGV4dClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IpXG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBkaWZmIG9ubHkgYWZ0ZXIgd2UgaGF2ZSBhcHBsaWVkIGl0IHRvIGFjY291bnQgZm9yIGl0IHdoZW4gdHJhbnNmb3JtaW5nXG4gICAgICAvLyBwZW5kaW5nIHJhbmdlcy5cbiAgICAgIEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLnNldChcbiAgICAgICAgZWRpdG9yLFxuICAgICAgICBFRElUT1JfVE9fUEVORElOR19ESUZGUy5nZXQoZWRpdG9yKT8uZmlsdGVyKFxuICAgICAgICAgICh7IGlkIH0pID0+IGlkICE9PSBkaWZmIS5pZFxuICAgICAgICApIVxuICAgICAgKVxuXG4gICAgICBpZiAoIXZlcmlmeURpZmZTdGF0ZShlZGl0b3IsIGRpZmYpKSB7XG4gICAgICAgIGRlYnVnKCdpbnZhbGlkIGRpZmYgc3RhdGUnKVxuICAgICAgICBzY2hlZHVsZVNlbGVjdGlvbkNoYW5nZSA9IGZhbHNlXG4gICAgICAgIEVESVRPUl9UT19QRU5ESU5HX0FDVElPTi5kZWxldGUoZWRpdG9yKVxuICAgICAgICBFRElUT1JfVE9fVVNFUl9NQVJLUy5kZWxldGUoZWRpdG9yKVxuICAgICAgICBmbHVzaGluZyA9ICdhY3Rpb24nXG5cbiAgICAgICAgLy8gRW5zdXJlIHdlIGRvbid0IHJlc3RvcmUgdGhlIHBlbmRpbmcgdXNlciAoZG9tKSBzZWxlY3Rpb25cbiAgICAgICAgLy8gc2luY2UgdGhlIGRvY3VtZW50IGFuZCBkb20gc3RhdGUgZG8gbm90IG1hdGNoLlxuICAgICAgICBFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04uZGVsZXRlKGVkaXRvcilcbiAgICAgICAgc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZS5jYW5jZWwoKVxuICAgICAgICBvbkRPTVNlbGVjdGlvbkNoYW5nZS5jYW5jZWwoKVxuICAgICAgICBzZWxlY3Rpb25SZWY/LnVucmVmKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3Rpb24gPSBzZWxlY3Rpb25SZWY/LnVucmVmKClcbiAgICBpZiAoXG4gICAgICBzZWxlY3Rpb24gJiZcbiAgICAgICFFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04uZ2V0KGVkaXRvcikgJiZcbiAgICAgICghZWRpdG9yLnNlbGVjdGlvbiB8fCAhUmFuZ2UuZXF1YWxzKHNlbGVjdGlvbiwgZWRpdG9yLnNlbGVjdGlvbikpXG4gICAgKSB7XG4gICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHNlbGVjdGlvbilcbiAgICB9XG5cbiAgICBpZiAoaGFzUGVuZGluZ0FjdGlvbigpKSB7XG4gICAgICBwZXJmb3JtQWN0aW9uKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIENPTVBBVDogVGhlIHNlbGVjdGlvbkNoYW5nZSBldmVudCBpcyBmaXJlZCBhZnRlciB0aGUgYWN0aW9uIGlzIHBlcmZvcm1lZCxcbiAgICAvLyBzbyB3ZSBoYXZlIHRvIG1hbnVhbGx5IHNjaGVkdWxlIGl0IHRvIGVuc3VyZSB3ZSBkb24ndCAndGhyb3cgYXdheScgdGhlIHNlbGVjdGlvblxuICAgIC8vIHdoaWxlIHJlbmRlcmluZyBpZiB3ZSBoYXZlIHBlbmRpbmcgY2hhbmdlcy5cbiAgICBpZiAoc2NoZWR1bGVTZWxlY3Rpb25DaGFuZ2UpIHtcbiAgICAgIGRlYnVnKCdzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlIHBlbmRpbmcgY2hhbmdlcycpXG4gICAgICBzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlKClcbiAgICB9XG5cbiAgICBzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlLmZsdXNoKClcbiAgICBvbkRPTVNlbGVjdGlvbkNoYW5nZS5mbHVzaCgpXG5cbiAgICBhcHBseVBlbmRpbmdTZWxlY3Rpb24oKVxuXG4gICAgY29uc3QgdXNlck1hcmtzID0gRURJVE9SX1RPX1VTRVJfTUFSS1MuZ2V0KGVkaXRvcilcbiAgICBFRElUT1JfVE9fVVNFUl9NQVJLUy5kZWxldGUoZWRpdG9yKVxuICAgIGlmICh1c2VyTWFya3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZWRpdG9yLm1hcmtzID0gdXNlck1hcmtzXG4gICAgICBlZGl0b3Iub25DaGFuZ2UoKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUNvbXBvc2l0aW9uRW5kID0gKFxuICAgIF9ldmVudDogUmVhY3QuQ29tcG9zaXRpb25FdmVudDxIVE1MRGl2RWxlbWVudD5cbiAgKSA9PiB7XG4gICAgaWYgKGNvbXBvc2l0aW9uRW5kVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQoY29tcG9zaXRpb25FbmRUaW1lb3V0SWQpXG4gICAgfVxuXG4gICAgY29tcG9zaXRpb25FbmRUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIElTX0NPTVBPU0lORy5zZXQoZWRpdG9yLCBmYWxzZSlcbiAgICAgIGZsdXNoKClcbiAgICB9LCBSRVNPTFZFX0RFTEFZKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlQ29tcG9zaXRpb25TdGFydCA9IChcbiAgICBfZXZlbnQ6IFJlYWN0LkNvbXBvc2l0aW9uRXZlbnQ8SFRNTERpdkVsZW1lbnQ+XG4gICkgPT4ge1xuICAgIGRlYnVnKCdjb21wb3NpdGlvbiBzdGFydCcpXG5cbiAgICBJU19DT01QT1NJTkcuc2V0KGVkaXRvciwgdHJ1ZSlcblxuICAgIGlmIChjb21wb3NpdGlvbkVuZFRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGNvbXBvc2l0aW9uRW5kVGltZW91dElkKVxuICAgICAgY29tcG9zaXRpb25FbmRUaW1lb3V0SWQgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgY29uc3QgdXBkYXRlUGxhY2Vob2xkZXJWaXNpYmlsaXR5ID0gKGZvcmNlSGlkZSA9IGZhbHNlKSA9PiB7XG4gICAgY29uc3QgcGxhY2Vob2xkZXJFbGVtZW50ID0gRURJVE9SX1RPX1BMQUNFSE9MREVSX0VMRU1FTlQuZ2V0KGVkaXRvcilcbiAgICBpZiAoIXBsYWNlaG9sZGVyRWxlbWVudCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGhhc1BlbmRpbmdEaWZmcygpIHx8IGZvcmNlSGlkZSkge1xuICAgICAgcGxhY2Vob2xkZXJFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHBsYWNlaG9sZGVyRWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpXG4gIH1cblxuICBjb25zdCBzdG9yZURpZmYgPSAocGF0aDogUGF0aCwgZGlmZjogU3RyaW5nRGlmZikgPT4ge1xuICAgIGRlYnVnKCdzdG9yZURpZmYnLCBwYXRoLCBkaWZmKVxuXG4gICAgY29uc3QgcGVuZGluZ0RpZmZzID0gRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuZ2V0KGVkaXRvcikgPz8gW11cbiAgICBFRElUT1JfVE9fUEVORElOR19ESUZGUy5zZXQoZWRpdG9yLCBwZW5kaW5nRGlmZnMpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBOb2RlLmxlYWYoZWRpdG9yLCBwYXRoKVxuICAgIGNvbnN0IGlkeCA9IHBlbmRpbmdEaWZmcy5maW5kSW5kZXgoY2hhbmdlID0+IFBhdGguZXF1YWxzKGNoYW5nZS5wYXRoLCBwYXRoKSlcbiAgICBpZiAoaWR4IDwgMCkge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVN0cmluZ0RpZmYodGFyZ2V0LnRleHQsIGRpZmYpXG4gICAgICBpZiAobm9ybWFsaXplZCkge1xuICAgICAgICBwZW5kaW5nRGlmZnMucHVzaCh7IHBhdGgsIGRpZmYsIGlkOiBpZENvdW50ZXIrKyB9KVxuICAgICAgfVxuXG4gICAgICB1cGRhdGVQbGFjZWhvbGRlclZpc2liaWxpdHkoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VTdHJpbmdEaWZmcyh0YXJnZXQudGV4dCwgcGVuZGluZ0RpZmZzW2lkeF0uZGlmZiwgZGlmZilcbiAgICBpZiAoIW1lcmdlZCkge1xuICAgICAgcGVuZGluZ0RpZmZzLnNwbGljZShpZHgsIDEpXG4gICAgICB1cGRhdGVQbGFjZWhvbGRlclZpc2liaWxpdHkoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgcGVuZGluZ0RpZmZzW2lkeF0gPSB7XG4gICAgICAuLi5wZW5kaW5nRGlmZnNbaWR4XSxcbiAgICAgIGRpZmY6IG1lcmdlZCxcbiAgICB9XG4gIH1cblxuICBjb25zdCBzY2hlZHVsZUFjdGlvbiA9IChcbiAgICBydW46ICgpID0+IHZvaWQsXG4gICAgeyBhdCB9OiB7IGF0PzogUG9pbnQgfCBSYW5nZSB9ID0ge31cbiAgKTogdm9pZCA9PiB7XG4gICAgaW5zZXJ0UG9zaXRpb25IaW50ID0gZmFsc2VcbiAgICBkZWJ1Zygnc2NoZWR1bGVBY3Rpb24nLCB7IGF0LCBydW4gfSlcblxuICAgIEVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTi5kZWxldGUoZWRpdG9yKVxuICAgIHNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2UuY2FuY2VsKClcbiAgICBvbkRPTVNlbGVjdGlvbkNoYW5nZS5jYW5jZWwoKVxuXG4gICAgaWYgKGhhc1BlbmRpbmdBY3Rpb24oKSkge1xuICAgICAgZmx1c2goKVxuICAgIH1cblxuICAgIEVESVRPUl9UT19QRU5ESU5HX0FDVElPTi5zZXQoZWRpdG9yLCB7IGF0LCBydW4gfSlcblxuICAgIC8vIENPTVBBVDogV2hlbiBkZWxldGluZyBiZWZvcmUgYSBub24tY29udGVudGVkaXRhYmxlIGVsZW1lbnQgY2hyb21lIG9ubHkgZmlyZXMgYSBiZWZvcmVpbnB1dCxcbiAgICAvLyAobm8gaW5wdXQpIGFuZCBkb2Vzbid0IHBlcmZvcm0gYW55IGRvbSBtdXRhdGlvbnMuIFdpdGhvdXQgYSBmbHVzaCB0aW1lb3V0IHdlIHdvdWxkIG5ldmVyIGZsdXNoXG4gICAgLy8gaW4gdGhpcyBjYXNlIGFuZCB0aHVzIG5ldmVyIGFjdHVhbGx5IHBlcmZvcm0gdGhlIGFjdGlvbi5cbiAgICBhY3Rpb25UaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZsdXNoKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlRE9NQmVmb3JlSW5wdXQgPSAoZXZlbnQ6IElucHV0RXZlbnQpOiB2b2lkID0+IHtcbiAgICBpZiAoZmx1c2hUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChmbHVzaFRpbWVvdXRJZClcbiAgICAgIGZsdXNoVGltZW91dElkID0gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IHsgaW5wdXRUeXBlOiB0eXBlIH0gPSBldmVudFxuICAgIGxldCB0YXJnZXRSYW5nZTogUmFuZ2UgfCBudWxsID0gbnVsbFxuICAgIGNvbnN0IGRhdGEgPSAoZXZlbnQgYXMgYW55KS5kYXRhVHJhbnNmZXIgfHwgZXZlbnQuZGF0YSB8fCB1bmRlZmluZWRcblxuICAgIGlmIChcbiAgICAgIGluc2VydFBvc2l0aW9uSGludCAhPT0gZmFsc2UgJiZcbiAgICAgIHR5cGUgIT09ICdpbnNlcnRUZXh0JyAmJlxuICAgICAgdHlwZSAhPT0gJ2luc2VydENvbXBvc2l0aW9uVGV4dCdcbiAgICApIHtcbiAgICAgIGluc2VydFBvc2l0aW9uSGludCA9IGZhbHNlXG4gICAgfVxuXG4gICAgbGV0IFtuYXRpdmVUYXJnZXRSYW5nZV0gPSAoZXZlbnQgYXMgYW55KS5nZXRUYXJnZXRSYW5nZXMoKVxuICAgIGlmIChuYXRpdmVUYXJnZXRSYW5nZSkge1xuICAgICAgdGFyZ2V0UmFuZ2UgPSBSZWFjdEVkaXRvci50b1NsYXRlUmFuZ2UoZWRpdG9yLCBuYXRpdmVUYXJnZXRSYW5nZSwge1xuICAgICAgICBleGFjdE1hdGNoOiBmYWxzZSxcbiAgICAgICAgc3VwcHJlc3NUaHJvdzogdHJ1ZSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQ09NUEFUOiBTZWxlY3Rpb25DaGFuZ2UgZXZlbnQgaXMgZmlyZWQgYWZ0ZXIgdGhlIGFjdGlvbiBpcyBwZXJmb3JtZWQsIHNvIHdlXG4gICAgLy8gaGF2ZSB0byBtYW51YWxseSBnZXQgdGhlIHNlbGVjdGlvbiBoZXJlIHRvIGVuc3VyZSBpdCdzIHVwLXRvLWRhdGUuXG4gICAgY29uc3Qgd2luZG93ID0gUmVhY3RFZGl0b3IuZ2V0V2luZG93KGVkaXRvcilcbiAgICBjb25zdCBkb21TZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKClcbiAgICBpZiAoIXRhcmdldFJhbmdlICYmIGRvbVNlbGVjdGlvbikge1xuICAgICAgbmF0aXZlVGFyZ2V0UmFuZ2UgPSBkb21TZWxlY3Rpb25cbiAgICAgIHRhcmdldFJhbmdlID0gUmVhY3RFZGl0b3IudG9TbGF0ZVJhbmdlKGVkaXRvciwgZG9tU2VsZWN0aW9uLCB7XG4gICAgICAgIGV4YWN0TWF0Y2g6IGZhbHNlLFxuICAgICAgICBzdXBwcmVzc1Rocm93OiB0cnVlLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0YXJnZXRSYW5nZSA9IHRhcmdldFJhbmdlID8/IGVkaXRvci5zZWxlY3Rpb25cbiAgICBpZiAoIXRhcmdldFJhbmdlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoUmFuZ2UuaXNFeHBhbmRlZCh0YXJnZXRSYW5nZSkgJiYgdHlwZS5zdGFydHNXaXRoKCdkZWxldGUnKSkge1xuICAgICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXModGFyZ2V0UmFuZ2UpXG4gICAgICBjb25zdCBsZWFmID0gTm9kZS5sZWFmKGVkaXRvciwgc3RhcnQucGF0aClcblxuICAgICAgaWYgKGxlYWYudGV4dC5sZW5ndGggPT09IHN0YXJ0Lm9mZnNldCAmJiBlbmQub2Zmc2V0ID09PSAwKSB7XG4gICAgICAgIGNvbnN0IG5leHQgPSBFZGl0b3IubmV4dChlZGl0b3IsIHsgYXQ6IHN0YXJ0LnBhdGgsIG1hdGNoOiBUZXh0LmlzVGV4dCB9KVxuICAgICAgICBpZiAobmV4dCAmJiBQYXRoLmVxdWFscyhuZXh0WzFdLCBlbmQucGF0aCkpIHtcbiAgICAgICAgICB0YXJnZXRSYW5nZSA9IHsgYW5jaG9yOiBlbmQsIGZvY3VzOiBlbmQgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFJhbmdlLmlzRXhwYW5kZWQodGFyZ2V0UmFuZ2UpICYmIHR5cGUuc3RhcnRzV2l0aCgnZGVsZXRlJykpIHtcbiAgICAgIGlmIChQYXRoLmVxdWFscyh0YXJnZXRSYW5nZS5hbmNob3IucGF0aCwgdGFyZ2V0UmFuZ2UuZm9jdXMucGF0aCkpIHtcbiAgICAgICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXModGFyZ2V0UmFuZ2UpXG4gICAgICAgIHJldHVybiBzdG9yZURpZmYodGFyZ2V0UmFuZ2UuYW5jaG9yLnBhdGgsIHtcbiAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICBlbmQ6IGVuZC5vZmZzZXQsXG4gICAgICAgICAgc3RhcnQ6IHN0YXJ0Lm9mZnNldCxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGlyZWN0aW9uID0gdHlwZS5lbmRzV2l0aCgnQmFja3dhcmQnKSA/ICdiYWNrd2FyZCcgOiAnZm9yd2FyZCdcbiAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbihcbiAgICAgICAgKCkgPT4gRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvciwgeyBkaXJlY3Rpb24gfSksXG4gICAgICAgIHsgYXQ6IHRhcmdldFJhbmdlIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ2RlbGV0ZUJ5Q29tcG9zaXRpb24nOlxuICAgICAgY2FzZSAnZGVsZXRlQnlDdXQnOlxuICAgICAgY2FzZSAnZGVsZXRlQnlEcmFnJzoge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oKCkgPT4gRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvciksIHtcbiAgICAgICAgICBhdDogdGFyZ2V0UmFuZ2UsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZUNvbnRlbnQnOlxuICAgICAgY2FzZSAnZGVsZXRlQ29udGVudEZvcndhcmQnOiB7XG4gICAgICAgIGNvbnN0IHsgYW5jaG9yIH0gPSB0YXJnZXRSYW5nZVxuICAgICAgICBpZiAoUmFuZ2UuaXNDb2xsYXBzZWQodGFyZ2V0UmFuZ2UpKSB7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZSA9IE5vZGUubGVhZihlZGl0b3IsIGFuY2hvci5wYXRoKVxuXG4gICAgICAgICAgaWYgKGFuY2hvci5vZmZzZXQgPCB0YXJnZXROb2RlLnRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvcmVEaWZmKGFuY2hvci5wYXRoLCB7XG4gICAgICAgICAgICAgIHRleHQ6ICcnLFxuICAgICAgICAgICAgICBzdGFydDogYW5jaG9yLm9mZnNldCxcbiAgICAgICAgICAgICAgZW5kOiBhbmNob3Iub2Zmc2V0ICsgMSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKCgpID0+IEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvciksIHtcbiAgICAgICAgICBhdDogdGFyZ2V0UmFuZ2UsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZUNvbnRlbnRCYWNrd2FyZCc6IHtcbiAgICAgICAgY29uc3QgeyBhbmNob3IgfSA9IHRhcmdldFJhbmdlXG5cbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIG1pc21hdGNoIGJldHdlZW4gdGhlIG5hdGl2ZSBhbmQgc2xhdGUgc2VsZWN0aW9uIGJlaW5nIGNvbGxhcHNlZFxuICAgICAgICAvLyB3ZSBhcmUgbW9zdCBsaWtlbHkgZGVsZXRpbmcgYSB6ZXJvLXdpZHRoIHBsYWNlaG9sZGVyIGFuZCB0aHVzIHNob3VsZCBwZXJmb3JtIGl0XG4gICAgICAgIC8vIGFzIGFuIGFjdGlvbiB0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvciAobW9zdGx5IGhhcHBlbnMgd2l0aCBtYXJrIHBsYWNlaG9sZGVycylcbiAgICAgICAgY29uc3QgbmF0aXZlQ29sbGFwc2VkID0gaXNET01TZWxlY3Rpb24obmF0aXZlVGFyZ2V0UmFuZ2UpXG4gICAgICAgICAgPyBuYXRpdmVUYXJnZXRSYW5nZS5pc0NvbGxhcHNlZFxuICAgICAgICAgIDogISFuYXRpdmVUYXJnZXRSYW5nZT8uY29sbGFwc2VkXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5hdGl2ZUNvbGxhcHNlZCAmJlxuICAgICAgICAgIFJhbmdlLmlzQ29sbGFwc2VkKHRhcmdldFJhbmdlKSAmJlxuICAgICAgICAgIGFuY2hvci5vZmZzZXQgPiAwXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBzdG9yZURpZmYoYW5jaG9yLnBhdGgsIHtcbiAgICAgICAgICAgIHRleHQ6ICcnLFxuICAgICAgICAgICAgc3RhcnQ6IGFuY2hvci5vZmZzZXQgLSAxLFxuICAgICAgICAgICAgZW5kOiBhbmNob3Iub2Zmc2V0LFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oKCkgPT4gRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciksIHtcbiAgICAgICAgICBhdDogdGFyZ2V0UmFuZ2UsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZUVudGlyZVNvZnRMaW5lJzoge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgeyB1bml0OiAnbGluZScgfSlcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvciwgeyB1bml0OiAnbGluZScgfSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgYXQ6IHRhcmdldFJhbmdlIH1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVIYXJkTGluZUJhY2t3YXJkJzoge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oXG4gICAgICAgICAgKCkgPT4gRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgeyB1bml0OiAnYmxvY2snIH0pLFxuICAgICAgICAgIHsgYXQ6IHRhcmdldFJhbmdlIH1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVTb2Z0TGluZUJhY2t3YXJkJzoge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oXG4gICAgICAgICAgKCkgPT4gRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgeyB1bml0OiAnbGluZScgfSksXG4gICAgICAgICAgeyBhdDogdGFyZ2V0UmFuZ2UgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlbGV0ZUhhcmRMaW5lRm9yd2FyZCc6IHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKFxuICAgICAgICAgICgpID0+IEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvciwgeyB1bml0OiAnYmxvY2snIH0pLFxuICAgICAgICAgIHsgYXQ6IHRhcmdldFJhbmdlIH1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVTb2Z0TGluZUZvcndhcmQnOiB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbihcbiAgICAgICAgICAoKSA9PiBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IsIHsgdW5pdDogJ2xpbmUnIH0pLFxuICAgICAgICAgIHsgYXQ6IHRhcmdldFJhbmdlIH1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWxldGVXb3JkQmFja3dhcmQnOiB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbihcbiAgICAgICAgICAoKSA9PiBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yLCB7IHVuaXQ6ICd3b3JkJyB9KSxcbiAgICAgICAgICB7IGF0OiB0YXJnZXRSYW5nZSB9XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVsZXRlV29yZEZvcndhcmQnOiB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbihcbiAgICAgICAgICAoKSA9PiBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IsIHsgdW5pdDogJ3dvcmQnIH0pLFxuICAgICAgICAgIHsgYXQ6IHRhcmdldFJhbmdlIH1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjYXNlICdpbnNlcnRMaW5lQnJlYWsnOiB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbigoKSA9PiBFZGl0b3IuaW5zZXJ0U29mdEJyZWFrKGVkaXRvciksIHtcbiAgICAgICAgICBhdDogdGFyZ2V0UmFuZ2UsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2luc2VydFBhcmFncmFwaCc6IHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlQWN0aW9uKCgpID0+IEVkaXRvci5pbnNlcnRCcmVhayhlZGl0b3IpLCB7XG4gICAgICAgICAgYXQ6IHRhcmdldFJhbmdlLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgY2FzZSAnaW5zZXJ0Q29tcG9zaXRpb25UZXh0JzpcbiAgICAgIGNhc2UgJ2RlbGV0ZUNvbXBvc2l0aW9uVGV4dCc6XG4gICAgICBjYXNlICdpbnNlcnRGcm9tQ29tcG9zaXRpb24nOlxuICAgICAgY2FzZSAnaW5zZXJ0RnJvbURyb3AnOlxuICAgICAgY2FzZSAnaW5zZXJ0RnJvbVBhc3RlJzpcbiAgICAgIGNhc2UgJ2luc2VydEZyb21ZYW5rJzpcbiAgICAgIGNhc2UgJ2luc2VydFJlcGxhY2VtZW50VGV4dCc6XG4gICAgICBjYXNlICdpbnNlcnRUZXh0Jzoge1xuICAgICAgICBpZiAoZGF0YT8uY29uc3RydWN0b3IubmFtZSA9PT0gJ0RhdGFUcmFuc2ZlcicpIHtcbiAgICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oKCkgPT4gUmVhY3RFZGl0b3IuaW5zZXJ0RGF0YShlZGl0b3IsIGRhdGEpLCB7XG4gICAgICAgICAgICBhdDogdGFyZ2V0UmFuZ2UsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgJiYgZGF0YS5pbmNsdWRlcygnXFxuJykpIHtcbiAgICAgICAgICByZXR1cm4gc2NoZWR1bGVBY3Rpb24oKCkgPT4gRWRpdG9yLmluc2VydFNvZnRCcmVhayhlZGl0b3IpLCB7XG4gICAgICAgICAgICBhdDogUmFuZ2UuZW5kKHRhcmdldFJhbmdlKSxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRleHQgPSBkYXRhID8/ICcnXG5cbiAgICAgICAgLy8gQ09NUEFUOiBJZiB3ZSBhcmUgd3JpdGluZyBpbnNpZGUgYSBwbGFjZWhvbGRlciwgdGhlIGltZSBpbnNlcnRzIHRoZSB0ZXh0IGluc2lkZVxuICAgICAgICAvLyB0aGUgcGxhY2Vob2xkZXIgaXRzZWxmIGFuZCB0aHVzIGluY2x1ZGVzIHRoZSB6ZXJvLXdpZHRoIHNwYWNlIGluc2lkZSBlZGl0IGV2ZW50cy5cbiAgICAgICAgaWYgKEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUy5nZXQoZWRpdG9yKSkge1xuICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoJ1xcdUZFRkYnLCAnJylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChQYXRoLmVxdWFscyh0YXJnZXRSYW5nZS5hbmNob3IucGF0aCwgdGFyZ2V0UmFuZ2UuZm9jdXMucGF0aCkpIHtcbiAgICAgICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBSYW5nZS5lZGdlcyh0YXJnZXRSYW5nZSlcblxuICAgICAgICAgIGNvbnN0IGRpZmYgPSB7XG4gICAgICAgICAgICBzdGFydDogc3RhcnQub2Zmc2V0LFxuICAgICAgICAgICAgZW5kOiBlbmQub2Zmc2V0LFxuICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDT01QQVQ6IFN3aWZ0a2V5IGhhcyBhIHdlaXJkIGJ1ZyB3aGVyZSB0aGUgdGFyZ2V0IHJhbmdlIG9mIHRoZSAybmQgd29yZFxuICAgICAgICAgIC8vIGluc2VydGVkIGFmdGVyIGEgbWFyayBwbGFjZWhvbGRlciBpcyBpbnNlcnRlZCB3aXRoIGFuIGFuY2hvciBvZmZzZXQgb2ZmIGJ5IDEuXG4gICAgICAgICAgLy8gU28gd3JpdGluZyAnc29tZSB0ZXh0JyB3aWxsIHJlc3VsdCBpbiAnc29tZSB0dGV4dCcuIEx1Y2tpbHkgYWxsICdub3JtYWwnIGluc2VydFxuICAgICAgICAgIC8vIHRleHQgZXZlbnRzIGFyZSBmaXJlZCB3aXRoIHRoZSBjb3JyZWN0IHRhcmdldCByYW5nZXMsIG9ubHkgdGhlIGZpbmFsICdpbnNlcnRDb21wb3NpdGlvbidcbiAgICAgICAgICAvLyBpc24ndCwgc28gd2UgY2FuIGFkanVzdCB0aGUgdGFyZ2V0IHJhbmdlIHN0YXJ0IG9mZnNldCBpZiB3ZSBhcmUgY29uZmlkZW50IHRoaXMgaXMgdGhlXG4gICAgICAgICAgLy8gc3dpZnRrZXkgaW5zZXJ0IGNhdXNpbmcgdGhlIGlzc3VlLlxuICAgICAgICAgIGlmICh0ZXh0ICYmIGluc2VydFBvc2l0aW9uSGludCAmJiB0eXBlID09PSAnaW5zZXJ0Q29tcG9zaXRpb25UZXh0Jykge1xuICAgICAgICAgICAgY29uc3QgaGludFBvc2l0aW9uID1cbiAgICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb25IaW50LnN0YXJ0ICsgaW5zZXJ0UG9zaXRpb25IaW50LnRleHQuc2VhcmNoKC9cXFN8JC8pXG4gICAgICAgICAgICBjb25zdCBkaWZmUG9zaXRpb24gPSBkaWZmLnN0YXJ0ICsgZGlmZi50ZXh0LnNlYXJjaCgvXFxTfCQvKVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGRpZmZQb3NpdGlvbiA9PT0gaGludFBvc2l0aW9uICsgMSAmJlxuICAgICAgICAgICAgICBkaWZmLmVuZCA9PT1cbiAgICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbkhpbnQuc3RhcnQgKyBpbnNlcnRQb3NpdGlvbkhpbnQudGV4dC5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBkZWJ1ZygnYWRqdXN0aW5nIHN3aWZ0S2V5IGluc2VydCBwb3NpdGlvbiB1c2luZyBoaW50JylcbiAgICAgICAgICAgICAgZGlmZi5zdGFydCAtPSAxXG4gICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uSGludCA9IG51bGxcbiAgICAgICAgICAgICAgc2NoZWR1bGVGbHVzaCgpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbkhpbnQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2luc2VydFRleHQnKSB7XG4gICAgICAgICAgICBpZiAoaW5zZXJ0UG9zaXRpb25IaW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uSGludCA9IGRpZmZcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uSGludCAmJlxuICAgICAgICAgICAgICBSYW5nZS5pc0NvbGxhcHNlZCh0YXJnZXRSYW5nZSkgJiZcbiAgICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb25IaW50LmVuZCArIGluc2VydFBvc2l0aW9uSGludC50ZXh0Lmxlbmd0aCA9PT1cbiAgICAgICAgICAgICAgICBzdGFydC5vZmZzZXRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbkhpbnQgPSB7XG4gICAgICAgICAgICAgICAgLi4uaW5zZXJ0UG9zaXRpb25IaW50LFxuICAgICAgICAgICAgICAgIHRleHQ6IGluc2VydFBvc2l0aW9uSGludC50ZXh0ICsgdGV4dCxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb25IaW50ID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb25IaW50ID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdG9yZURpZmYoc3RhcnQucGF0aCwgZGlmZilcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzY2hlZHVsZUFjdGlvbigoKSA9PiBFZGl0b3IuaW5zZXJ0VGV4dChlZGl0b3IsIHRleHQpLCB7XG4gICAgICAgICAgYXQ6IHRhcmdldFJhbmdlLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhc1BlbmRpbmdBY3Rpb24gPSAoKSA9PiB7XG4gICAgcmV0dXJuICEhRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OLmdldChlZGl0b3IpXG4gIH1cblxuICBjb25zdCBoYXNQZW5kaW5nRGlmZnMgPSAoKSA9PiB7XG4gICAgcmV0dXJuICEhRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuZ2V0KGVkaXRvcik/Lmxlbmd0aFxuICB9XG5cbiAgY29uc3QgaGFzUGVuZGluZ0NoYW5nZXMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGhhc1BlbmRpbmdBY3Rpb24oKSB8fCBoYXNQZW5kaW5nRGlmZnMoKVxuICB9XG5cbiAgY29uc3QgaXNGbHVzaGluZyA9ICgpID0+IHtcbiAgICByZXR1cm4gZmx1c2hpbmdcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZVVzZXJTZWxlY3QgPSAocmFuZ2U6IFJhbmdlIHwgbnVsbCkgPT4ge1xuICAgIEVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTi5zZXQoZWRpdG9yLCByYW5nZSlcblxuICAgIGlmIChmbHVzaFRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGZsdXNoVGltZW91dElkKVxuICAgICAgZmx1c2hUaW1lb3V0SWQgPSBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICAgIGlmICghcmFuZ2UpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHBhdGhDaGFuZ2VkID1cbiAgICAgICFzZWxlY3Rpb24gfHwgIVBhdGguZXF1YWxzKHNlbGVjdGlvbi5hbmNob3IucGF0aCwgcmFuZ2UuYW5jaG9yLnBhdGgpXG4gICAgY29uc3QgcGFyZW50UGF0aENoYW5nZWQgPVxuICAgICAgIXNlbGVjdGlvbiB8fFxuICAgICAgIVBhdGguZXF1YWxzKFxuICAgICAgICBzZWxlY3Rpb24uYW5jaG9yLnBhdGguc2xpY2UoMCwgLTEpLFxuICAgICAgICByYW5nZS5hbmNob3IucGF0aC5zbGljZSgwLCAtMSlcbiAgICAgIClcblxuICAgIGlmICgocGF0aENoYW5nZWQgJiYgaW5zZXJ0UG9zaXRpb25IaW50KSB8fCBwYXJlbnRQYXRoQ2hhbmdlZCkge1xuICAgICAgaW5zZXJ0UG9zaXRpb25IaW50ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAocGF0aENoYW5nZWQgfHwgIWhhc1BlbmRpbmdEaWZmcygpKSB7XG4gICAgICBmbHVzaFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZmx1c2gsIEZMVVNIX0RFTEFZKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUlucHV0ID0gKCkgPT4ge1xuICAgIGlmIChoYXNQZW5kaW5nQWN0aW9uKCkgfHwgIWhhc1BlbmRpbmdEaWZmcygpKSB7XG4gICAgICBkZWJ1ZygnZmx1c2ggaW5wdXQnKVxuICAgICAgZmx1c2goKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSAoXzogUmVhY3QuS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIC8vIENPTVBBVDogU3dpZnRrZXkgY2xvc2VzIHRoZSBrZXlib2FyZCB3aGVuIHR5cGluZyBpbnNpZGUgYSBlbXB0eSBub2RlXG4gICAgLy8gZGlyZWN0bHkgbmV4dCB0byBhIG5vbi1jb250ZW50ZWRpdGFibGUgZWxlbWVudCAoPSB0aGUgcGxhY2Vob2xkZXIpLlxuICAgIC8vIFRoZSBvbmx5IGV2ZW50IGZpcmVkIHNvb24gZW5vdWdoIGZvciB1cyB0byBhbGxvdyBoaWRpbmcgdGhlIHBsYWNlaG9sZGVyXG4gICAgLy8gd2l0aG91dCBzd2lmdGtleSBwaWNraW5nIGl0IHVwIGlzIHRoZSBrZXlkb3duIGV2ZW50LCBzbyB3ZSBoYXZlIHRvIGhpZGUgaXRcbiAgICAvLyBoZXJlLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2lhbnN0b3JtdGF5bG9yL3NsYXRlL3B1bGwvNDk4OCNpc3N1ZWNvbW1lbnQtMTIwMTA1MDUzNVxuICAgIGlmICghaGFzUGVuZGluZ0RpZmZzKCkpIHtcbiAgICAgIHVwZGF0ZVBsYWNlaG9sZGVyVmlzaWJpbGl0eSh0cnVlKVxuICAgICAgc2V0VGltZW91dCh1cGRhdGVQbGFjZWhvbGRlclZpc2liaWxpdHkpXG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc2NoZWR1bGVGbHVzaCA9ICgpID0+IHtcbiAgICBpZiAoIWhhc1BlbmRpbmdBY3Rpb24oKSkge1xuICAgICAgYWN0aW9uVGltZW91dElkID0gc2V0VGltZW91dChmbHVzaClcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVEb21NdXRhdGlvbnMgPSAobXV0YXRpb25zOiBNdXRhdGlvblJlY29yZFtdKSA9PiB7XG4gICAgaWYgKGhhc1BlbmRpbmdEaWZmcygpIHx8IGhhc1BlbmRpbmdBY3Rpb24oKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgbXV0YXRpb25zLnNvbWUobXV0YXRpb24gPT4gaXNUcmFja2VkTXV0YXRpb24oZWRpdG9yLCBtdXRhdGlvbiwgbXV0YXRpb25zKSlcbiAgICApIHtcbiAgICAgIC8vIENhdXNlIGEgcmUtcmVuZGVyIHRvIHJlc3RvcmUgdGhlIGRvbSBzdGF0ZSBpZiB3ZSBlbmNvdW50ZXIgdHJhY2tlZCBtdXRhdGlvbnMgd2l0aG91dFxuICAgICAgLy8gYSBjb3JyZXNwb25kaW5nIHBlbmRpbmcgYWN0aW9uLlxuICAgICAgRURJVE9SX1RPX0ZPUkNFX1JFTkRFUi5nZXQoZWRpdG9yKT8uKClcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGZsdXNoLFxuICAgIHNjaGVkdWxlRmx1c2gsXG5cbiAgICBoYXNQZW5kaW5nRGlmZnMsXG4gICAgaGFzUGVuZGluZ0FjdGlvbixcbiAgICBoYXNQZW5kaW5nQ2hhbmdlcyxcblxuICAgIGlzRmx1c2hpbmcsXG5cbiAgICBoYW5kbGVVc2VyU2VsZWN0LFxuICAgIGhhbmRsZUNvbXBvc2l0aW9uRW5kLFxuICAgIGhhbmRsZUNvbXBvc2l0aW9uU3RhcnQsXG4gICAgaGFuZGxlRE9NQmVmb3JlSW5wdXQsXG4gICAgaGFuZGxlS2V5RG93bixcblxuICAgIGhhbmRsZURvbU11dGF0aW9ucyxcbiAgICBoYW5kbGVJbnB1dCxcbiAgfVxufVxuIiwgImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VJc01vdW50ZWQoKSB7XG4gIGNvbnN0IGlzTW91bnRlZFJlZiA9IHVzZVJlZihmYWxzZSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlzTW91bnRlZFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgfVxuICB9LCBbXSlcblxuICByZXR1cm4gaXNNb3VudGVkUmVmLmN1cnJlbnRcbn1cbiIsICJpbXBvcnQgeyBSZWZPYmplY3QsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgfSBmcm9tICcuL3VzZS1pc29tb3JwaGljLWxheW91dC1lZmZlY3QnXG5pbXBvcnQgeyBpc0RPTUVsZW1lbnQgfSBmcm9tICcuLi91dGlscy9kb20nXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4uL3BsdWdpbi9yZWFjdC1lZGl0b3InXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VNdXRhdGlvbk9ic2VydmVyKFxuICBub2RlOiBSZWZPYmplY3Q8SFRNTEVsZW1lbnQ+LFxuICBjYWxsYmFjazogTXV0YXRpb25DYWxsYmFjayxcbiAgb3B0aW9uczogTXV0YXRpb25PYnNlcnZlckluaXRcbikge1xuICBjb25zdCBbbXV0YXRpb25PYnNlcnZlcl0gPSB1c2VTdGF0ZSgoKSA9PiBuZXcgTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjaykpXG5cbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgLy8gRGlzY2FyZCBtdXRhdGlvbnMgY2F1c2VkIGR1cmluZyByZW5kZXIgcGhhc2UuIFRoaXMgd29ya3MgZHVlIHRvIHJlYWN0IGNhbGxpbmdcbiAgICAvLyB1c2VMYXlvdXRFZmZlY3Qgc3luY2hyb25vdXNseSBhZnRlciB0aGUgcmVuZGVyIHBoYXNlIGJlZm9yZSB0aGUgbmV4dCB0aWNrLlxuICAgIG11dGF0aW9uT2JzZXJ2ZXIudGFrZVJlY29yZHMoKVxuICB9KVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFub2RlLmN1cnJlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGF0dGFjaCBNdXRhdGlvbk9ic2VydmVyLCBgbm9kZWAgaXMgdW5kZWZpbmVkJylcbiAgICB9XG5cbiAgICBtdXRhdGlvbk9ic2VydmVyLm9ic2VydmUobm9kZS5jdXJyZW50LCBvcHRpb25zKVxuICAgIHJldHVybiAoKSA9PiBtdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICB9LCBbXSlcbn1cbiIsICJpbXBvcnQgeyBSZWZPYmplY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VTbGF0ZVN0YXRpYyB9IGZyb20gJy4uL3VzZS1zbGF0ZS1zdGF0aWMnXG5pbXBvcnQgeyBJU19BTkRST0lEIH0gZnJvbSAnLi4vLi4vdXRpbHMvZW52aXJvbm1lbnQnXG5pbXBvcnQgeyBFRElUT1JfVE9fU0NIRURVTEVfRkxVU0ggfSBmcm9tICcuLi8uLi91dGlscy93ZWFrLW1hcHMnXG5pbXBvcnQge1xuICBjcmVhdGVBbmRyb2lkSW5wdXRNYW5hZ2VyLFxuICBDcmVhdGVBbmRyb2lkSW5wdXRNYW5hZ2VyT3B0aW9ucyxcbn0gZnJvbSAnLi9hbmRyb2lkLWlucHV0LW1hbmFnZXInXG5pbXBvcnQgeyB1c2VJc01vdW50ZWQgfSBmcm9tICcuLi91c2UtaXMtbW91bnRlZCdcbmltcG9ydCB7IHVzZU11dGF0aW9uT2JzZXJ2ZXIgfSBmcm9tICcuLi91c2UtbXV0YXRpb24tb2JzZXJ2ZXInXG5cbnR5cGUgVXNlQW5kcm9pZElucHV0TWFuYWdlck9wdGlvbnMgPSB7XG4gIG5vZGU6IFJlZk9iamVjdDxIVE1MRWxlbWVudD5cbn0gJiBPbWl0PFxuICBDcmVhdGVBbmRyb2lkSW5wdXRNYW5hZ2VyT3B0aW9ucyxcbiAgJ2VkaXRvcicgfCAnb25Vc2VySW5wdXQnIHwgJ3JlY2VpdmVkVXNlcklucHV0J1xuPlxuXG5jb25zdCBNVVRBVElPTl9PQlNFUlZFUl9DT05GSUc6IE11dGF0aW9uT2JzZXJ2ZXJJbml0ID0ge1xuICBzdWJ0cmVlOiB0cnVlLFxuICBjaGlsZExpc3Q6IHRydWUsXG4gIGNoYXJhY3RlckRhdGE6IHRydWUsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VBbmRyb2lkSW5wdXRNYW5hZ2VyKHtcbiAgbm9kZSxcbiAgLi4ub3B0aW9uc1xufTogVXNlQW5kcm9pZElucHV0TWFuYWdlck9wdGlvbnMpIHtcbiAgaWYgKCFJU19BTkRST0lEKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlU3RhdGljKClcbiAgY29uc3QgaXNNb3VudGVkID0gdXNlSXNNb3VudGVkKClcblxuICBjb25zdCBbaW5wdXRNYW5hZ2VyXSA9IHVzZVN0YXRlKCgpID0+XG4gICAgY3JlYXRlQW5kcm9pZElucHV0TWFuYWdlcih7XG4gICAgICBlZGl0b3IsXG4gICAgICAuLi5vcHRpb25zLFxuICAgIH0pXG4gIClcblxuICB1c2VNdXRhdGlvbk9ic2VydmVyKFxuICAgIG5vZGUsXG4gICAgaW5wdXRNYW5hZ2VyLmhhbmRsZURvbU11dGF0aW9ucyxcbiAgICBNVVRBVElPTl9PQlNFUlZFUl9DT05GSUdcbiAgKVxuXG4gIEVESVRPUl9UT19TQ0hFRFVMRV9GTFVTSC5zZXQoZWRpdG9yLCBpbnB1dE1hbmFnZXIuc2NoZWR1bGVGbHVzaClcbiAgaWYgKGlzTW91bnRlZCkge1xuICAgIGlucHV0TWFuYWdlci5mbHVzaCgpXG4gIH1cblxuICByZXR1cm4gaW5wdXRNYW5hZ2VyXG59XG4iLCAiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4uL3BsdWdpbi9yZWFjdC1lZGl0b3InXG5pbXBvcnQgeyB1c2VTbGF0ZVN0YXRpYyB9IGZyb20gJy4vdXNlLXNsYXRlLXN0YXRpYydcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVRyYWNrVXNlcklucHV0KCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpXG5cbiAgY29uc3QgcmVjZWl2ZWRVc2VySW5wdXQgPSB1c2VSZWY8Ym9vbGVhbj4oZmFsc2UpXG4gIGNvbnN0IGFuaW1hdGlvbkZyYW1lSWRSZWYgPSB1c2VSZWY8bnVtYmVyPigwKVxuXG4gIGNvbnN0IG9uVXNlcklucHV0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChyZWNlaXZlZFVzZXJJbnB1dC5jdXJyZW50KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICByZWNlaXZlZFVzZXJJbnB1dC5jdXJyZW50ID0gdHJ1ZVxuXG4gICAgY29uc3Qgd2luZG93ID0gUmVhY3RFZGl0b3IuZ2V0V2luZG93KGVkaXRvcilcbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uRnJhbWVJZFJlZi5jdXJyZW50KVxuXG4gICAgYW5pbWF0aW9uRnJhbWVJZFJlZi5jdXJyZW50ID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICByZWNlaXZlZFVzZXJJbnB1dC5jdXJyZW50ID0gZmFsc2VcbiAgICB9KVxuICB9LCBbXSlcblxuICB1c2VFZmZlY3QoKCkgPT4gKCkgPT4gY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uRnJhbWVJZFJlZi5jdXJyZW50KSwgW10pXG5cbiAgcmV0dXJuIHtcbiAgICByZWNlaXZlZFVzZXJJbnB1dCxcbiAgICBvblVzZXJJbnB1dCxcbiAgfVxufVxuIiwgImltcG9ydCBnZXREaXJlY3Rpb24gZnJvbSAnZGlyZWN0aW9uJ1xuaW1wb3J0IGRlYm91bmNlIGZyb20gJ2xvZGFzaC9kZWJvdW5jZSdcbmltcG9ydCB0aHJvdHRsZSBmcm9tICdsb2Rhc2gvdGhyb3R0bGUnXG5pbXBvcnQgUmVhY3QsIHtcbiAgdXNlQ2FsbGJhY2ssXG4gIHVzZUVmZmVjdCxcbiAgdXNlTWVtbyxcbiAgdXNlUmVkdWNlcixcbiAgdXNlUmVmLFxuICB1c2VTdGF0ZSxcbn0gZnJvbSAncmVhY3QnXG5pbXBvcnQgc2Nyb2xsSW50b1ZpZXcgZnJvbSAnc2Nyb2xsLWludG8tdmlldy1pZi1uZWVkZWQnXG5pbXBvcnQge1xuICBFZGl0b3IsXG4gIEVsZW1lbnQsXG4gIE5vZGUsXG4gIE5vZGVFbnRyeSxcbiAgUGF0aCxcbiAgUmFuZ2UsXG4gIFRleHQsXG4gIFRyYW5zZm9ybXMsXG59IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuLi9wbHVnaW4vcmVhY3QtZWRpdG9yJ1xuaW1wb3J0IHVzZUNoaWxkcmVuIGZyb20gJy4uL2hvb2tzL3VzZS1jaGlsZHJlbidcbmltcG9ydCB7IERlY29yYXRlQ29udGV4dCB9IGZyb20gJy4uL2hvb2tzL3VzZS1kZWNvcmF0ZSdcbmltcG9ydCB7IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgfSBmcm9tICcuLi9ob29rcy91c2UtaXNvbW9ycGhpYy1sYXlvdXQtZWZmZWN0J1xuaW1wb3J0IHsgUmVhZE9ubHlDb250ZXh0IH0gZnJvbSAnLi4vaG9va3MvdXNlLXJlYWQtb25seSdcbmltcG9ydCB7IHVzZVNsYXRlIH0gZnJvbSAnLi4vaG9va3MvdXNlLXNsYXRlJ1xuaW1wb3J0IHsgVFJJUExFX0NMSUNLIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJ1xuaW1wb3J0IHtcbiAgRE9NRWxlbWVudCxcbiAgRE9NTm9kZSxcbiAgRE9NUmFuZ2UsXG4gIERPTVRleHQsXG4gIGdldERlZmF1bHRWaWV3LFxuICBpc0RPTUVsZW1lbnQsXG4gIGlzRE9NTm9kZSxcbiAgaXNQbGFpblRleHRPbmx5UGFzdGUsXG59IGZyb20gJy4uL3V0aWxzL2RvbSdcbmltcG9ydCB7XG4gIENBTl9VU0VfRE9NLFxuICBIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQsXG4gIElTX0FORFJPSUQsXG4gIElTX0NIUk9NRSxcbiAgSVNfRklSRUZPWCxcbiAgSVNfRklSRUZPWF9MRUdBQ1ksXG4gIElTX0lPUyxcbiAgSVNfU0FGQVJJLFxuICBJU19VQ19NT0JJTEUsXG4gIElTX1dFQ0hBVEJST1dTRVIsXG59IGZyb20gJy4uL3V0aWxzL2Vudmlyb25tZW50J1xuaW1wb3J0IEhvdGtleXMgZnJvbSAnLi4vdXRpbHMvaG90a2V5cydcbmltcG9ydCB7XG4gIEVESVRPUl9UT19FTEVNRU5ULFxuICBFRElUT1JfVE9fRk9SQ0VfUkVOREVSLFxuICBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MsXG4gIEVESVRPUl9UT19QTEFDRUhPTERFUl9FTEVNRU5ULFxuICBFRElUT1JfVE9fVVNFUl9NQVJLUyxcbiAgRURJVE9SX1RPX1VTRVJfU0VMRUNUSU9OLFxuICBFRElUT1JfVE9fV0lORE9XLFxuICBFTEVNRU5UX1RPX05PREUsXG4gIElTX0NPTVBPU0lORyxcbiAgSVNfRk9DVVNFRCxcbiAgSVNfUkVBRF9PTkxZLFxuICBNQVJLX1BMQUNFSE9MREVSX1NZTUJPTCxcbiAgTk9ERV9UT19FTEVNRU5ULFxuICBQTEFDRUhPTERFUl9TWU1CT0wsXG59IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7IFJlc3RvcmVET00gfSBmcm9tICcuL3Jlc3RvcmUtZG9tL3Jlc3RvcmUtZG9tJ1xuaW1wb3J0IHsgdXNlQW5kcm9pZElucHV0TWFuYWdlciB9IGZyb20gJy4uL2hvb2tzL2FuZHJvaWQtaW5wdXQtbWFuYWdlci91c2UtYW5kcm9pZC1pbnB1dC1tYW5hZ2VyJ1xuaW1wb3J0IHsgdXNlVHJhY2tVc2VySW5wdXQgfSBmcm9tICcuLi9ob29rcy91c2UtdHJhY2stdXNlci1pbnB1dCdcblxudHlwZSBEZWZlcnJlZE9wZXJhdGlvbiA9ICgpID0+IHZvaWRcblxuY29uc3QgQ2hpbGRyZW4gPSAocHJvcHM6IFBhcmFtZXRlcnM8dHlwZW9mIHVzZUNoaWxkcmVuPlswXSkgPT4gKFxuICA8UmVhY3QuRnJhZ21lbnQ+e3VzZUNoaWxkcmVuKHByb3BzKX08L1JlYWN0LkZyYWdtZW50PlxuKVxuXG4vKipcbiAqIGBSZW5kZXJFbGVtZW50UHJvcHNgIGFyZSBwYXNzZWQgdG8gdGhlIGByZW5kZXJFbGVtZW50YCBoYW5kbGVyLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyRWxlbWVudFByb3BzIHtcbiAgY2hpbGRyZW46IGFueVxuICBlbGVtZW50OiBFbGVtZW50XG4gIGF0dHJpYnV0ZXM6IHtcbiAgICAnZGF0YS1zbGF0ZS1ub2RlJzogJ2VsZW1lbnQnXG4gICAgJ2RhdGEtc2xhdGUtaW5saW5lJz86IHRydWVcbiAgICAnZGF0YS1zbGF0ZS12b2lkJz86IHRydWVcbiAgICBkaXI/OiAncnRsJ1xuICAgIHJlZjogYW55XG4gIH1cbn1cblxuLyoqXG4gKiBgUmVuZGVyTGVhZlByb3BzYCBhcmUgcGFzc2VkIHRvIHRoZSBgcmVuZGVyTGVhZmAgaGFuZGxlci5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlckxlYWZQcm9wcyB7XG4gIGNoaWxkcmVuOiBhbnlcbiAgbGVhZjogVGV4dFxuICB0ZXh0OiBUZXh0XG4gIGF0dHJpYnV0ZXM6IHtcbiAgICAnZGF0YS1zbGF0ZS1sZWFmJzogdHJ1ZVxuICB9XG59XG5cbi8qKlxuICogYEVkaXRhYmxlUHJvcHNgIGFyZSBwYXNzZWQgdG8gdGhlIGA8RWRpdGFibGU+YCBjb21wb25lbnQuXG4gKi9cblxuZXhwb3J0IHR5cGUgRWRpdGFibGVQcm9wcyA9IHtcbiAgZGVjb3JhdGU/OiAoZW50cnk6IE5vZGVFbnRyeSkgPT4gUmFuZ2VbXVxuICBvbkRPTUJlZm9yZUlucHV0PzogKGV2ZW50OiBJbnB1dEV2ZW50KSA9PiB2b2lkXG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nXG4gIHJlYWRPbmx5PzogYm9vbGVhblxuICByb2xlPzogc3RyaW5nXG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllc1xuICByZW5kZXJFbGVtZW50PzogKHByb3BzOiBSZW5kZXJFbGVtZW50UHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHJlbmRlckxlYWY/OiAocHJvcHM6IFJlbmRlckxlYWZQcm9wcykgPT4gSlNYLkVsZW1lbnRcbiAgcmVuZGVyUGxhY2Vob2xkZXI/OiAocHJvcHM6IFJlbmRlclBsYWNlaG9sZGVyUHJvcHMpID0+IEpTWC5FbGVtZW50XG4gIHNjcm9sbFNlbGVjdGlvbkludG9WaWV3PzogKGVkaXRvcjogUmVhY3RFZGl0b3IsIGRvbVJhbmdlOiBET01SYW5nZSkgPT4gdm9pZFxuICBhcz86IFJlYWN0LkVsZW1lbnRUeXBlXG4gIGRpc2FibGVEZWZhdWx0U3R5bGVzPzogYm9vbGVhblxufSAmIFJlYWN0LlRleHRhcmVhSFRNTEF0dHJpYnV0ZXM8SFRNTERpdkVsZW1lbnQ+XG5cbi8qKlxuICogRWRpdGFibGUuXG4gKi9cblxuZXhwb3J0IGNvbnN0IEVkaXRhYmxlID0gKHByb3BzOiBFZGl0YWJsZVByb3BzKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBhdXRvRm9jdXMsXG4gICAgZGVjb3JhdGUgPSBkZWZhdWx0RGVjb3JhdGUsXG4gICAgb25ET01CZWZvcmVJbnB1dDogcHJvcHNPbkRPTUJlZm9yZUlucHV0LFxuICAgIHBsYWNlaG9sZGVyLFxuICAgIHJlYWRPbmx5ID0gZmFsc2UsXG4gICAgcmVuZGVyRWxlbWVudCxcbiAgICByZW5kZXJMZWFmLFxuICAgIHJlbmRlclBsYWNlaG9sZGVyID0gcHJvcHMgPT4gPERlZmF1bHRQbGFjZWhvbGRlciB7Li4ucHJvcHN9IC8+LFxuICAgIHNjcm9sbFNlbGVjdGlvbkludG9WaWV3ID0gZGVmYXVsdFNjcm9sbFNlbGVjdGlvbkludG9WaWV3LFxuICAgIHN0eWxlOiB1c2VyU3R5bGUgPSB7fSxcbiAgICBhczogQ29tcG9uZW50ID0gJ2RpdicsXG4gICAgZGlzYWJsZURlZmF1bHRTdHlsZXMgPSBmYWxzZSxcbiAgICAuLi5hdHRyaWJ1dGVzXG4gIH0gPSBwcm9wc1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZSgpXG4gIC8vIFJlcmVuZGVyIGVkaXRvciB3aGVuIGNvbXBvc2l0aW9uIHN0YXR1cyBjaGFuZ2VkXG4gIGNvbnN0IFtpc0NvbXBvc2luZywgc2V0SXNDb21wb3NpbmddID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IHJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcbiAgY29uc3QgZGVmZXJyZWRPcGVyYXRpb25zID0gdXNlUmVmPERlZmVycmVkT3BlcmF0aW9uW10+KFtdKVxuXG4gIGNvbnN0IHsgb25Vc2VySW5wdXQsIHJlY2VpdmVkVXNlcklucHV0IH0gPSB1c2VUcmFja1VzZXJJbnB1dCgpXG5cbiAgY29uc3QgWywgZm9yY2VSZW5kZXJdID0gdXNlUmVkdWNlcihzID0+IHMgKyAxLCAwKVxuICBFRElUT1JfVE9fRk9SQ0VfUkVOREVSLnNldChlZGl0b3IsIGZvcmNlUmVuZGVyKVxuXG4gIC8vIFVwZGF0ZSBpbnRlcm5hbCBzdGF0ZSBvbiBlYWNoIHJlbmRlci5cbiAgSVNfUkVBRF9PTkxZLnNldChlZGl0b3IsIHJlYWRPbmx5KVxuXG4gIC8vIEtlZXAgdHJhY2sgb2Ygc29tZSBzdGF0ZSBmb3IgdGhlIGV2ZW50IGhhbmRsZXIgbG9naWMuXG4gIGNvbnN0IHN0YXRlID0gdXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgaXNEcmFnZ2luZ0ludGVybmFsbHk6IGZhbHNlLFxuICAgICAgaXNVcGRhdGluZ1NlbGVjdGlvbjogZmFsc2UsXG4gICAgICBsYXRlc3RFbGVtZW50OiBudWxsIGFzIERPTUVsZW1lbnQgfCBudWxsLFxuICAgICAgaGFzTWFya1BsYWNlaG9sZGVyOiBmYWxzZSxcbiAgICB9KSxcbiAgICBbXVxuICApXG5cbiAgLy8gVGhlIGF1dG9Gb2N1cyBUZXh0YXJlYUhUTUxBdHRyaWJ1dGUgZG9lc24ndCBkbyBhbnl0aGluZyBvbiBhIGRpdiwgc28gaXRcbiAgLy8gbmVlZHMgdG8gYmUgbWFudWFsbHkgZm9jdXNlZC5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocmVmLmN1cnJlbnQgJiYgYXV0b0ZvY3VzKSB7XG4gICAgICByZWYuY3VycmVudC5mb2N1cygpXG4gICAgfVxuICB9LCBbYXV0b0ZvY3VzXSlcblxuICAvLyBMaXN0ZW4gb24gdGhlIG5hdGl2ZSBgc2VsZWN0aW9uY2hhbmdlYCBldmVudCB0byBiZSBhYmxlIHRvIHVwZGF0ZSBhbnkgdGltZVxuICAvLyB0aGUgc2VsZWN0aW9uIGNoYW5nZXMuIFRoaXMgaXMgcmVxdWlyZWQgYmVjYXVzZSBSZWFjdCdzIGBvblNlbGVjdGAgaXMgbGVha3lcbiAgLy8gYW5kIG5vbi1zdGFuZGFyZCBzbyBpdCBkb2Vzbid0IGZpcmUgdW50aWwgYWZ0ZXIgYSBzZWxlY3Rpb24gaGFzIGJlZW5cbiAgLy8gcmVsZWFzZWQuIFRoaXMgY2F1c2VzIGlzc3VlcyBpbiBzaXR1YXRpb25zIHdoZXJlIGFub3RoZXIgY2hhbmdlIGhhcHBlbnNcbiAgLy8gd2hpbGUgYSBzZWxlY3Rpb24gaXMgYmVpbmcgZHJhZ2dlZC5cbiAgY29uc3Qgb25ET01TZWxlY3Rpb25DaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICB0aHJvdHRsZSgoKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIChJU19BTkRST0lEIHx8ICFSZWFjdEVkaXRvci5pc0NvbXBvc2luZyhlZGl0b3IpKSAmJlxuICAgICAgICAoIXN0YXRlLmlzVXBkYXRpbmdTZWxlY3Rpb24gfHwgYW5kcm9pZElucHV0TWFuYWdlcj8uaXNGbHVzaGluZygpKSAmJlxuICAgICAgICAhc3RhdGUuaXNEcmFnZ2luZ0ludGVybmFsbHlcbiAgICAgICkge1xuICAgICAgICBjb25zdCByb290ID0gUmVhY3RFZGl0b3IuZmluZERvY3VtZW50T3JTaGFkb3dSb290KGVkaXRvcilcbiAgICAgICAgY29uc3QgeyBhY3RpdmVFbGVtZW50IH0gPSByb290XG4gICAgICAgIGNvbnN0IGVsID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKVxuICAgICAgICBjb25zdCBkb21TZWxlY3Rpb24gPSByb290LmdldFNlbGVjdGlvbigpXG5cbiAgICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQgPT09IGVsKSB7XG4gICAgICAgICAgc3RhdGUubGF0ZXN0RWxlbWVudCA9IGFjdGl2ZUVsZW1lbnRcbiAgICAgICAgICBJU19GT0NVU0VELnNldChlZGl0b3IsIHRydWUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgSVNfRk9DVVNFRC5kZWxldGUoZWRpdG9yKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFkb21TZWxlY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gVHJhbnNmb3Jtcy5kZXNlbGVjdChlZGl0b3IpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGFuY2hvck5vZGUsIGZvY3VzTm9kZSB9ID0gZG9tU2VsZWN0aW9uXG5cbiAgICAgICAgY29uc3QgYW5jaG9yTm9kZVNlbGVjdGFibGUgPVxuICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc0VkaXRhYmxlVGFyZ2V0KGVkaXRvciwgYW5jaG9yTm9kZSkgfHxcbiAgICAgICAgICBSZWFjdEVkaXRvci5pc1RhcmdldEluc2lkZU5vblJlYWRvbmx5Vm9pZChlZGl0b3IsIGFuY2hvck5vZGUpXG5cbiAgICAgICAgY29uc3QgZm9jdXNOb2RlU2VsZWN0YWJsZSA9XG4gICAgICAgICAgUmVhY3RFZGl0b3IuaGFzRWRpdGFibGVUYXJnZXQoZWRpdG9yLCBmb2N1c05vZGUpIHx8XG4gICAgICAgICAgUmVhY3RFZGl0b3IuaXNUYXJnZXRJbnNpZGVOb25SZWFkb25seVZvaWQoZWRpdG9yLCBmb2N1c05vZGUpXG5cbiAgICAgICAgaWYgKGFuY2hvck5vZGVTZWxlY3RhYmxlICYmIGZvY3VzTm9kZVNlbGVjdGFibGUpIHtcbiAgICAgICAgICBjb25zdCByYW5nZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVSYW5nZShlZGl0b3IsIGRvbVNlbGVjdGlvbiwge1xuICAgICAgICAgICAgZXhhY3RNYXRjaDogZmFsc2UsXG4gICAgICAgICAgICBzdXBwcmVzc1Rocm93OiB0cnVlLFxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIVJlYWN0RWRpdG9yLmlzQ29tcG9zaW5nKGVkaXRvcikgJiZcbiAgICAgICAgICAgICAgIWFuZHJvaWRJbnB1dE1hbmFnZXI/Lmhhc1BlbmRpbmdDaGFuZ2VzKCkgJiZcbiAgICAgICAgICAgICAgIWFuZHJvaWRJbnB1dE1hbmFnZXI/LmlzRmx1c2hpbmcoKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgcmFuZ2UpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhbmRyb2lkSW5wdXRNYW5hZ2VyPy5oYW5kbGVVc2VyU2VsZWN0KHJhbmdlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlc2VsZWN0IHRoZSBlZGl0b3IgaWYgdGhlIGRvbSBzZWxlY3Rpb24gaXMgbm90IHNlbGVjdGFibGUgaW4gcmVhZG9ubHkgbW9kZVxuICAgICAgICBpZiAocmVhZE9ubHkgJiYgKCFhbmNob3JOb2RlU2VsZWN0YWJsZSB8fCAhZm9jdXNOb2RlU2VsZWN0YWJsZSkpIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLmRlc2VsZWN0KGVkaXRvcilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIDEwMCksXG4gICAgW3JlYWRPbmx5XVxuICApXG5cbiAgY29uc3Qgc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZSA9IHVzZU1lbW8oXG4gICAgKCkgPT4gZGVib3VuY2Uob25ET01TZWxlY3Rpb25DaGFuZ2UsIDApLFxuICAgIFtvbkRPTVNlbGVjdGlvbkNoYW5nZV1cbiAgKVxuXG4gIGNvbnN0IGFuZHJvaWRJbnB1dE1hbmFnZXIgPSB1c2VBbmRyb2lkSW5wdXRNYW5hZ2VyKHtcbiAgICBub2RlOiByZWYsXG4gICAgb25ET01TZWxlY3Rpb25DaGFuZ2UsXG4gICAgc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZSxcbiAgfSlcblxuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAvLyBVcGRhdGUgZWxlbWVudC1yZWxhdGVkIHdlYWsgbWFwcyB3aXRoIHRoZSBET00gZWxlbWVudCByZWYuXG4gICAgbGV0IHdpbmRvd1xuICAgIGlmIChyZWYuY3VycmVudCAmJiAod2luZG93ID0gZ2V0RGVmYXVsdFZpZXcocmVmLmN1cnJlbnQpKSkge1xuICAgICAgRURJVE9SX1RPX1dJTkRPVy5zZXQoZWRpdG9yLCB3aW5kb3cpXG4gICAgICBFRElUT1JfVE9fRUxFTUVOVC5zZXQoZWRpdG9yLCByZWYuY3VycmVudClcbiAgICAgIE5PREVfVE9fRUxFTUVOVC5zZXQoZWRpdG9yLCByZWYuY3VycmVudClcbiAgICAgIEVMRU1FTlRfVE9fTk9ERS5zZXQocmVmLmN1cnJlbnQsIGVkaXRvcilcbiAgICB9IGVsc2Uge1xuICAgICAgTk9ERV9UT19FTEVNRU5ULmRlbGV0ZShlZGl0b3IpXG4gICAgfVxuXG4gICAgLy8gTWFrZSBzdXJlIHRoZSBET00gc2VsZWN0aW9uIHN0YXRlIGlzIGluIHN5bmMuXG4gICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICAgIGNvbnN0IHJvb3QgPSBSZWFjdEVkaXRvci5maW5kRG9jdW1lbnRPclNoYWRvd1Jvb3QoZWRpdG9yKVxuICAgIGNvbnN0IGRvbVNlbGVjdGlvbiA9IHJvb3QuZ2V0U2VsZWN0aW9uKClcblxuICAgIGlmIChcbiAgICAgICFkb21TZWxlY3Rpb24gfHxcbiAgICAgICFSZWFjdEVkaXRvci5pc0ZvY3VzZWQoZWRpdG9yKSB8fFxuICAgICAgYW5kcm9pZElucHV0TWFuYWdlcj8uaGFzUGVuZGluZ0FjdGlvbigpXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBzZXREb21TZWxlY3Rpb24gPSAoZm9yY2VDaGFuZ2U/OiBib29sZWFuKSA9PiB7XG4gICAgICBjb25zdCBoYXNEb21TZWxlY3Rpb24gPSBkb21TZWxlY3Rpb24udHlwZSAhPT0gJ05vbmUnXG5cbiAgICAgIC8vIElmIHRoZSBET00gc2VsZWN0aW9uIGlzIHByb3Blcmx5IHVuc2V0LCB3ZSdyZSBkb25lLlxuICAgICAgaWYgKCFzZWxlY3Rpb24gJiYgIWhhc0RvbVNlbGVjdGlvbikge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gdmVyaWZ5IHRoYXQgdGhlIGRvbSBzZWxlY3Rpb24gaXMgaW4gdGhlIGVkaXRvclxuICAgICAgY29uc3QgZWRpdG9yRWxlbWVudCA9IEVESVRPUl9UT19FTEVNRU5ULmdldChlZGl0b3IpIVxuICAgICAgbGV0IGhhc0RvbVNlbGVjdGlvbkluRWRpdG9yID0gZmFsc2VcbiAgICAgIGlmIChcbiAgICAgICAgZWRpdG9yRWxlbWVudC5jb250YWlucyhkb21TZWxlY3Rpb24uYW5jaG9yTm9kZSkgJiZcbiAgICAgICAgZWRpdG9yRWxlbWVudC5jb250YWlucyhkb21TZWxlY3Rpb24uZm9jdXNOb2RlKVxuICAgICAgKSB7XG4gICAgICAgIGhhc0RvbVNlbGVjdGlvbkluRWRpdG9yID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgRE9NIHNlbGVjdGlvbiBpcyBpbiB0aGUgZWRpdG9yIGFuZCB0aGUgZWRpdG9yIHNlbGVjdGlvbiBpcyBhbHJlYWR5IGNvcnJlY3QsIHdlJ3JlIGRvbmUuXG4gICAgICBpZiAoXG4gICAgICAgIGhhc0RvbVNlbGVjdGlvbiAmJlxuICAgICAgICBoYXNEb21TZWxlY3Rpb25JbkVkaXRvciAmJlxuICAgICAgICBzZWxlY3Rpb24gJiZcbiAgICAgICAgIWZvcmNlQ2hhbmdlXG4gICAgICApIHtcbiAgICAgICAgY29uc3Qgc2xhdGVSYW5nZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVSYW5nZShlZGl0b3IsIGRvbVNlbGVjdGlvbiwge1xuICAgICAgICAgIGV4YWN0TWF0Y2g6IHRydWUsXG5cbiAgICAgICAgICAvLyBkb21TZWxlY3Rpb24gaXMgbm90IG5lY2Vzc2FyaWx5IGEgdmFsaWQgU2xhdGUgcmFuZ2VcbiAgICAgICAgICAvLyAoZS5nLiB3aGVuIGNsaWNraW5nIG9uIGNvbnRlbnRFZGl0YWJsZTpmYWxzZSBlbGVtZW50KVxuICAgICAgICAgIHN1cHByZXNzVGhyb3c6IHRydWUsXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKHNsYXRlUmFuZ2UgJiYgUmFuZ2UuZXF1YWxzKHNsYXRlUmFuZ2UsIHNlbGVjdGlvbikpIHtcbiAgICAgICAgICBpZiAoIXN0YXRlLmhhc01hcmtQbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gRW5zdXJlIHNlbGVjdGlvbiBpcyBpbnNpZGUgdGhlIG1hcmsgcGxhY2Vob2xkZXJcbiAgICAgICAgICBjb25zdCB7IGFuY2hvck5vZGUgfSA9IGRvbVNlbGVjdGlvblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGFuY2hvck5vZGU/LnBhcmVudEVsZW1lbnQ/Lmhhc0F0dHJpYnV0ZShcbiAgICAgICAgICAgICAgJ2RhdGEtc2xhdGUtbWFyay1wbGFjZWhvbGRlcidcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB3aGVuIDxFZGl0YWJsZS8+IGlzIGJlaW5nIGNvbnRyb2xsZWQgdGhyb3VnaCBleHRlcm5hbCB2YWx1ZVxuICAgICAgLy8gdGhlbiBpdHMgY2hpbGRyZW4gbWlnaHQganVzdCBjaGFuZ2UgLSBET00gcmVzcG9uZHMgdG8gaXQgb24gaXRzIG93blxuICAgICAgLy8gYnV0IFNsYXRlJ3MgdmFsdWUgaXMgbm90IGJlaW5nIHVwZGF0ZWQgdGhyb3VnaCBhbnkgb3BlcmF0aW9uXG4gICAgICAvLyBhbmQgdGh1cyBpdCBkb2Vzbid0IHRyYW5zZm9ybSBzZWxlY3Rpb24gb24gaXRzIG93blxuICAgICAgaWYgKHNlbGVjdGlvbiAmJiAhUmVhY3RFZGl0b3IuaGFzUmFuZ2UoZWRpdG9yLCBzZWxlY3Rpb24pKSB7XG4gICAgICAgIGVkaXRvci5zZWxlY3Rpb24gPSBSZWFjdEVkaXRvci50b1NsYXRlUmFuZ2UoZWRpdG9yLCBkb21TZWxlY3Rpb24sIHtcbiAgICAgICAgICBleGFjdE1hdGNoOiBmYWxzZSxcbiAgICAgICAgICBzdXBwcmVzc1Rocm93OiB0cnVlLFxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gT3RoZXJ3aXNlIHRoZSBET00gc2VsZWN0aW9uIGlzIG91dCBvZiBzeW5jLCBzbyB1cGRhdGUgaXQuXG4gICAgICBzdGF0ZS5pc1VwZGF0aW5nU2VsZWN0aW9uID0gdHJ1ZVxuXG4gICAgICBjb25zdCBuZXdEb21SYW5nZTogRE9NUmFuZ2UgfCBudWxsID1cbiAgICAgICAgc2VsZWN0aW9uICYmIFJlYWN0RWRpdG9yLnRvRE9NUmFuZ2UoZWRpdG9yLCBzZWxlY3Rpb24pXG5cbiAgICAgIGlmIChuZXdEb21SYW5nZSkge1xuICAgICAgICBpZiAoUmFuZ2UuaXNCYWNrd2FyZChzZWxlY3Rpb24hKSkge1xuICAgICAgICAgIGRvbVNlbGVjdGlvbi5zZXRCYXNlQW5kRXh0ZW50KFxuICAgICAgICAgICAgbmV3RG9tUmFuZ2UuZW5kQ29udGFpbmVyLFxuICAgICAgICAgICAgbmV3RG9tUmFuZ2UuZW5kT2Zmc2V0LFxuICAgICAgICAgICAgbmV3RG9tUmFuZ2Uuc3RhcnRDb250YWluZXIsXG4gICAgICAgICAgICBuZXdEb21SYW5nZS5zdGFydE9mZnNldFxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkb21TZWxlY3Rpb24uc2V0QmFzZUFuZEV4dGVudChcbiAgICAgICAgICAgIG5ld0RvbVJhbmdlLnN0YXJ0Q29udGFpbmVyLFxuICAgICAgICAgICAgbmV3RG9tUmFuZ2Uuc3RhcnRPZmZzZXQsXG4gICAgICAgICAgICBuZXdEb21SYW5nZS5lbmRDb250YWluZXIsXG4gICAgICAgICAgICBuZXdEb21SYW5nZS5lbmRPZmZzZXRcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgc2Nyb2xsU2VsZWN0aW9uSW50b1ZpZXcoZWRpdG9yLCBuZXdEb21SYW5nZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvbVNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3RG9tUmFuZ2VcbiAgICB9XG5cbiAgICBjb25zdCBuZXdEb21SYW5nZSA9IHNldERvbVNlbGVjdGlvbigpXG4gICAgY29uc3QgZW5zdXJlU2VsZWN0aW9uID0gYW5kcm9pZElucHV0TWFuYWdlcj8uaXNGbHVzaGluZygpID09PSAnYWN0aW9uJ1xuXG4gICAgaWYgKCFJU19BTkRST0lEIHx8ICFlbnN1cmVTZWxlY3Rpb24pIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyBDT01QQVQ6IEluIEZpcmVmb3gsIGl0J3Mgbm90IGVub3VnaCB0byBjcmVhdGUgYSByYW5nZSwgeW91IGFsc28gbmVlZFxuICAgICAgICAvLyB0byBmb2N1cyB0aGUgY29udGVudGVkaXRhYmxlIGVsZW1lbnQgdG9vLiAoMjAxNi8xMS8xNilcbiAgICAgICAgaWYgKG5ld0RvbVJhbmdlICYmIElTX0ZJUkVGT1gpIHtcbiAgICAgICAgICBjb25zdCBlbCA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcilcbiAgICAgICAgICBlbC5mb2N1cygpXG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nU2VsZWN0aW9uID0gZmFsc2VcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBsZXQgdGltZW91dElkOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsXG4gICAgY29uc3QgYW5pbWF0aW9uRnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBpZiAoZW5zdXJlU2VsZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGVuc3VyZURvbVNlbGVjdGlvbiA9IChmb3JjZUNoYW5nZT86IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZWwgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBlZGl0b3IpXG4gICAgICAgICAgICBlbC5mb2N1cygpXG5cbiAgICAgICAgICAgIHNldERvbVNlbGVjdGlvbihmb3JjZUNoYW5nZSlcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBJZ25vcmUsIGRvbSBhbmQgc3RhdGUgbWlnaHQgYmUgb3V0IG9mIHN5bmNcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb21wYXQ6IEFuZHJvaWQgSU1FcyB0cnkgdG8gZm9yY2UgdGhlaXIgc2VsZWN0aW9uIGJ5IG1hbnVhbGx5IHJlLWFwcGx5aW5nIGl0IGV2ZW4gYWZ0ZXIgd2Ugc2V0IGl0LlxuICAgICAgICAvLyBUaGlzIGVzc2VudGlhbGx5IHdvdWxkIG1ha2Ugc2V0dGluZyB0aGUgc2xhdGUgc2VsZWN0aW9uIGR1cmluZyBhbiB1cGRhdGUgbWVhbmluZ2xlc3MsIHNvIHdlIGZvcmNlIGl0XG4gICAgICAgIC8vIGFnYWluIGhlcmUuIFdlIGNhbid0IG9ubHkgZG8gaXQgaW4gdGhlIHNldFRpbWVvdXQgYWZ0ZXIgdGhlIGFuaW1hdGlvbiBmcmFtZSBzaW5jZSB0aGF0IHdvdWxkIGNhdXNlIGFcbiAgICAgICAgLy8gdmlzaWJsZSBmbGlja2VyLlxuICAgICAgICBlbnN1cmVEb21TZWxlY3Rpb24oKVxuXG4gICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIENPTVBBVDogV2hpbGUgc2V0dGluZyB0aGUgc2VsZWN0aW9uIGluIGFuIGFuaW1hdGlvbiBmcmFtZSB2aXN1YWxseSBjb3JyZWN0bHkgc2V0cyB0aGUgc2VsZWN0aW9uLFxuICAgICAgICAgIC8vIGl0IGRvZXNuJ3QgdXBkYXRlIEdCb2FyZHMgc3BlbGxjaGVja2VyIHN0YXRlLiBXZSBoYXZlIHRvIG1hbnVhbGx5IHRyaWdnZXIgYSBzZWxlY3Rpb24gY2hhbmdlIGFmdGVyXG4gICAgICAgICAgLy8gdGhlIGFuaW1hdGlvbiBmcmFtZSB0byBlbnN1cmUgaXQgZGlzcGxheXMgdGhlIGNvcnJlY3Qgc3RhdGUuXG4gICAgICAgICAgZW5zdXJlRG9tU2VsZWN0aW9uKHRydWUpXG4gICAgICAgICAgc3RhdGUuaXNVcGRhdGluZ1NlbGVjdGlvbiA9IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25GcmFtZUlkKVxuICAgICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICAvLyBMaXN0ZW4gb24gdGhlIG5hdGl2ZSBgYmVmb3JlaW5wdXRgIGV2ZW50IHRvIGdldCByZWFsIFwiTGV2ZWwgMlwiIGV2ZW50cy4gVGhpc1xuICAvLyBpcyByZXF1aXJlZCBiZWNhdXNlIFJlYWN0J3MgYGJlZm9yZWlucHV0YCBpcyBmYWtlIGFuZCBuZXZlciByZWFsbHkgYXR0YWNoZXNcbiAgLy8gdG8gdGhlIHJlYWwgZXZlbnQgc2FkbHkuICgyMDE5LzExLzAxKVxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzExMjExXG4gIGNvbnN0IG9uRE9NQmVmb3JlSW5wdXQgPSB1c2VDYWxsYmFjayhcbiAgICAoZXZlbnQ6IElucHV0RXZlbnQpID0+IHtcbiAgICAgIG9uVXNlcklucHV0KClcblxuICAgICAgaWYgKFxuICAgICAgICAhcmVhZE9ubHkgJiZcbiAgICAgICAgUmVhY3RFZGl0b3IuaGFzRWRpdGFibGVUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpICYmXG4gICAgICAgICFpc0RPTUV2ZW50SGFuZGxlZChldmVudCwgcHJvcHNPbkRPTUJlZm9yZUlucHV0KVxuICAgICAgKSB7XG4gICAgICAgIC8vIENPTVBBVDogQmVmb3JlSW5wdXQgZXZlbnRzIGFyZW4ndCBjYW5jZWxhYmxlIG9uIGFuZHJvaWQsIHNvIHdlIGhhdmUgdG8gaGFuZGxlIHRoZW0gZGlmZmVyZW50bHkgdXNpbmcgdGhlIGFuZHJvaWQgaW5wdXQgbWFuYWdlci5cbiAgICAgICAgaWYgKGFuZHJvaWRJbnB1dE1hbmFnZXIpIHtcbiAgICAgICAgICByZXR1cm4gYW5kcm9pZElucHV0TWFuYWdlci5oYW5kbGVET01CZWZvcmVJbnB1dChldmVudClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNvbWUgSU1Fcy9DaHJvbWUgZXh0ZW5zaW9ucyBsaWtlIGUuZy4gR3JhbW1hcmx5IHNldCB0aGUgc2VsZWN0aW9uIGltbWVkaWF0ZWx5IGJlZm9yZVxuICAgICAgICAvLyB0cmlnZ2VyaW5nIGEgYGJlZm9yZWlucHV0YCBleHBlY3RpbmcgdGhlIGNoYW5nZSB0byBiZSBhcHBsaWVkIHRvIHRoZSBpbW1lZGlhdGVseSBiZWZvcmVcbiAgICAgICAgLy8gc2V0IHNlbGVjdGlvbi5cbiAgICAgICAgc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZS5mbHVzaCgpXG4gICAgICAgIG9uRE9NU2VsZWN0aW9uQ2hhbmdlLmZsdXNoKClcblxuICAgICAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gICAgICAgIGNvbnN0IHsgaW5wdXRUeXBlOiB0eXBlIH0gPSBldmVudFxuICAgICAgICBjb25zdCBkYXRhID0gKGV2ZW50IGFzIGFueSkuZGF0YVRyYW5zZmVyIHx8IGV2ZW50LmRhdGEgfHwgdW5kZWZpbmVkXG5cbiAgICAgICAgY29uc3QgaXNDb21wb3NpdGlvbkNoYW5nZSA9XG4gICAgICAgICAgdHlwZSA9PT0gJ2luc2VydENvbXBvc2l0aW9uVGV4dCcgfHwgdHlwZSA9PT0gJ2RlbGV0ZUNvbXBvc2l0aW9uVGV4dCdcblxuICAgICAgICAvLyBDT01QQVQ6IHVzZSBjb21wb3NpdGlvbiBjaGFuZ2UgZXZlbnRzIGFzIGEgaGludCB0byB3aGVyZSB3ZSBzaG91bGQgaW5zZXJ0XG4gICAgICAgIC8vIGNvbXBvc2l0aW9uIHRleHQgaWYgd2UgYXJlbid0IGNvbXBvc2luZyB0byB3b3JrIGFyb3VuZCBodHRwczovL2dpdGh1Yi5jb20vaWFuc3Rvcm10YXlsb3Ivc2xhdGUvaXNzdWVzLzUwMzhcbiAgICAgICAgaWYgKGlzQ29tcG9zaXRpb25DaGFuZ2UgJiYgUmVhY3RFZGl0b3IuaXNDb21wb3NpbmcoZWRpdG9yKSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG5hdGl2ZSA9IGZhbHNlXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlID09PSAnaW5zZXJ0VGV4dCcgJiZcbiAgICAgICAgICBzZWxlY3Rpb24gJiZcbiAgICAgICAgICBSYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pICYmXG4gICAgICAgICAgLy8gT25seSB1c2UgbmF0aXZlIGNoYXJhY3RlciBpbnNlcnRpb24gZm9yIHNpbmdsZSBjaGFyYWN0ZXJzIGEteiBvciBzcGFjZSBmb3Igbm93LlxuICAgICAgICAgIC8vIExvbmctcHJlc3MgZXZlbnRzIChob2xkIGEgKyBwcmVzcyA0ID0gw6QpIHRvIGNob29zZSBhIHNwZWNpYWwgY2hhcmFjdGVyIG90aGVyd2lzZVxuICAgICAgICAgIC8vIGNhdXNlcyBkdXBsaWNhdGUgaW5zZXJ0cy5cbiAgICAgICAgICBldmVudC5kYXRhICYmXG4gICAgICAgICAgZXZlbnQuZGF0YS5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAvW2EteiBdL2kudGVzdChldmVudC5kYXRhKSAmJlxuICAgICAgICAgIC8vIENocm9tZSBoYXMgaXNzdWVzIGNvcnJlY3RseSBlZGl0aW5nIHRoZSBzdGFydCBvZiBub2RlczogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTI0OTQwNVxuICAgICAgICAgIC8vIFdoZW4gdGhlcmUgaXMgYW4gaW5saW5lIGVsZW1lbnQsIGUuZy4gYSBsaW5rLCBhbmQgeW91IHNlbGVjdFxuICAgICAgICAgIC8vIHJpZ2h0IGFmdGVyIGl0ICh0aGUgc3RhcnQgb2YgdGhlIG5leHQgbm9kZSkuXG4gICAgICAgICAgc2VsZWN0aW9uLmFuY2hvci5vZmZzZXQgIT09IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgbmF0aXZlID0gdHJ1ZVxuXG4gICAgICAgICAgLy8gU2tpcCBuYXRpdmUgaWYgdGhlcmUgYXJlIG1hcmtzLCBhc1xuICAgICAgICAgIC8vIGBpbnNlcnRUZXh0YCB3aWxsIGluc2VydCBhIG5vZGUsIG5vdCBqdXN0IHRleHQuXG4gICAgICAgICAgaWYgKGVkaXRvci5tYXJrcykge1xuICAgICAgICAgICAgbmF0aXZlID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDaHJvbWUgYWxzbyBoYXMgaXNzdWVzIGNvcnJlY3RseSBlZGl0aW5nIHRoZSBlbmQgb2YgYW5jaG9yIGVsZW1lbnRzOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xMjU5MTAwXG4gICAgICAgICAgLy8gVGhlcmVmb3JlIHdlIGRvbid0IGFsbG93IG5hdGl2ZSBldmVudHMgdG8gaW5zZXJ0IHRleHQgYXQgdGhlIGVuZCBvZiBhbmNob3Igbm9kZXMuXG4gICAgICAgICAgY29uc3QgeyBhbmNob3IgfSA9IHNlbGVjdGlvblxuXG4gICAgICAgICAgY29uc3QgW25vZGUsIG9mZnNldF0gPSBSZWFjdEVkaXRvci50b0RPTVBvaW50KGVkaXRvciwgYW5jaG9yKVxuICAgICAgICAgIGNvbnN0IGFuY2hvck5vZGUgPSBub2RlLnBhcmVudEVsZW1lbnQ/LmNsb3Nlc3QoJ2EnKVxuXG4gICAgICAgICAgY29uc3Qgd2luZG93ID0gUmVhY3RFZGl0b3IuZ2V0V2luZG93KGVkaXRvcilcblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIG5hdGl2ZSAmJlxuICAgICAgICAgICAgYW5jaG9yTm9kZSAmJlxuICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzRE9NTm9kZShlZGl0b3IsIGFuY2hvck5vZGUpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBsYXN0IHRleHQgbm9kZSBpbnNpZGUgdGhlIGFuY2hvci5cbiAgICAgICAgICAgIGNvbnN0IGxhc3RUZXh0ID0gd2luZG93Py5kb2N1bWVudFxuICAgICAgICAgICAgICAuY3JlYXRlVHJlZVdhbGtlcihhbmNob3JOb2RlLCBOb2RlRmlsdGVyLlNIT1dfVEVYVClcbiAgICAgICAgICAgICAgLmxhc3RDaGlsZCgpIGFzIERPTVRleHQgfCBudWxsXG5cbiAgICAgICAgICAgIGlmIChsYXN0VGV4dCA9PT0gbm9kZSAmJiBsYXN0VGV4dC50ZXh0Q29udGVudD8ubGVuZ3RoID09PSBvZmZzZXQpIHtcbiAgICAgICAgICAgICAgbmF0aXZlID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDaHJvbWUgaGFzIGlzc3VlcyB3aXRoIHRoZSBwcmVzZW5jZSBvZiB0YWIgY2hhcmFjdGVycyBpbnNpZGUgZWxlbWVudHMgd2l0aCB3aGl0ZVNwYWNlID0gJ3ByZSdcbiAgICAgICAgICAvLyBjYXVzaW5nIGFibm9ybWFsIGluc2VydCBiZWhhdmlvcjogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTIxOTEzOVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIG5hdGl2ZSAmJlxuICAgICAgICAgICAgbm9kZS5wYXJlbnRFbGVtZW50ICYmXG4gICAgICAgICAgICB3aW5kb3c/LmdldENvbXB1dGVkU3R5bGUobm9kZS5wYXJlbnRFbGVtZW50KT8ud2hpdGVTcGFjZSA9PT0gJ3ByZSdcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgICAgICAgICBhdDogYW5jaG9yLnBhdGgsXG4gICAgICAgICAgICAgIG1hdGNoOiBuID0+IEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbiksXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZiAoYmxvY2sgJiYgTm9kZS5zdHJpbmcoYmxvY2tbMF0pLmluY2x1ZGVzKCdcXHQnKSkge1xuICAgICAgICAgICAgICBuYXRpdmUgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENPTVBBVDogRm9yIHRoZSBkZWxldGluZyBmb3J3YXJkL2JhY2t3YXJkIGlucHV0IHR5cGVzIHdlIGRvbid0IHdhbnRcbiAgICAgICAgLy8gdG8gY2hhbmdlIHRoZSBzZWxlY3Rpb24gYmVjYXVzZSBpdCBpcyB0aGUgcmFuZ2UgdGhhdCB3aWxsIGJlIGRlbGV0ZWQsXG4gICAgICAgIC8vIGFuZCB0aG9zZSBjb21tYW5kcyBkZXRlcm1pbmUgdGhhdCBmb3IgdGhlbXNlbHZlcy5cbiAgICAgICAgaWYgKCF0eXBlLnN0YXJ0c1dpdGgoJ2RlbGV0ZScpIHx8IHR5cGUuc3RhcnRzV2l0aCgnZGVsZXRlQnknKSkge1xuICAgICAgICAgIGNvbnN0IFt0YXJnZXRSYW5nZV0gPSAoZXZlbnQgYXMgYW55KS5nZXRUYXJnZXRSYW5nZXMoKVxuXG4gICAgICAgICAgaWYgKHRhcmdldFJhbmdlKSB7XG4gICAgICAgICAgICBjb25zdCByYW5nZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVSYW5nZShlZGl0b3IsIHRhcmdldFJhbmdlLCB7XG4gICAgICAgICAgICAgIGV4YWN0TWF0Y2g6IGZhbHNlLFxuICAgICAgICAgICAgICBzdXBwcmVzc1Rocm93OiBmYWxzZSxcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGlmICghc2VsZWN0aW9uIHx8ICFSYW5nZS5lcXVhbHMoc2VsZWN0aW9uLCByYW5nZSkpIHtcbiAgICAgICAgICAgICAgbmF0aXZlID0gZmFsc2VcblxuICAgICAgICAgICAgICBjb25zdCBzZWxlY3Rpb25SZWYgPVxuICAgICAgICAgICAgICAgICFpc0NvbXBvc2l0aW9uQ2hhbmdlICYmXG4gICAgICAgICAgICAgICAgZWRpdG9yLnNlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgIEVkaXRvci5yYW5nZVJlZihlZGl0b3IsIGVkaXRvci5zZWxlY3Rpb24pXG5cbiAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCByYW5nZSlcblxuICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uUmVmKSB7XG4gICAgICAgICAgICAgICAgRURJVE9SX1RPX1VTRVJfU0VMRUNUSU9OLnNldChlZGl0b3IsIHNlbGVjdGlvblJlZilcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbXBvc2l0aW9uIGNoYW5nZSB0eXBlcyBvY2N1ciB3aGlsZSBhIHVzZXIgaXMgY29tcG9zaW5nIHRleHQgYW5kIGNhbid0IGJlXG4gICAgICAgIC8vIGNhbmNlbGxlZC4gTGV0IHRoZW0gdGhyb3VnaCBhbmQgd2FpdCBmb3IgdGhlIGNvbXBvc2l0aW9uIHRvIGVuZC5cbiAgICAgICAgaWYgKGlzQ29tcG9zaXRpb25DaGFuZ2UpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbmF0aXZlKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ09NUEFUOiBJZiB0aGUgc2VsZWN0aW9uIGlzIGV4cGFuZGVkLCBldmVuIGlmIHRoZSBjb21tYW5kIHNlZW1zIGxpa2VcbiAgICAgICAgLy8gYSBkZWxldGUgZm9yd2FyZC9iYWNrd2FyZCBjb21tYW5kIGl0IHNob3VsZCBkZWxldGUgdGhlIHNlbGVjdGlvbi5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHNlbGVjdGlvbiAmJlxuICAgICAgICAgIFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSAmJlxuICAgICAgICAgIHR5cGUuc3RhcnRzV2l0aCgnZGVsZXRlJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gdHlwZS5lbmRzV2l0aCgnQmFja3dhcmQnKSA/ICdiYWNrd2FyZCcgOiAnZm9yd2FyZCdcbiAgICAgICAgICBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yLCB7IGRpcmVjdGlvbiB9KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgY2FzZSAnZGVsZXRlQnlDb21wb3NpdGlvbic6XG4gICAgICAgICAgY2FzZSAnZGVsZXRlQnlDdXQnOlxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZUJ5RHJhZyc6IHtcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZUNvbnRlbnQnOlxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZUNvbnRlbnRGb3J3YXJkJzoge1xuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdkZWxldGVDb250ZW50QmFja3dhcmQnOiB7XG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdkZWxldGVFbnRpcmVTb2Z0TGluZSc6IHtcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IsIHsgdW5pdDogJ2xpbmUnIH0pXG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IsIHsgdW5pdDogJ2xpbmUnIH0pXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZUhhcmRMaW5lQmFja3dhcmQnOiB7XG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlQmFja3dhcmQoZWRpdG9yLCB7IHVuaXQ6ICdibG9jaycgfSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnZGVsZXRlU29mdExpbmVCYWNrd2FyZCc6IHtcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IsIHsgdW5pdDogJ2xpbmUnIH0pXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZUhhcmRMaW5lRm9yd2FyZCc6IHtcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvciwgeyB1bml0OiAnYmxvY2snIH0pXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2RlbGV0ZVNvZnRMaW5lRm9yd2FyZCc6IHtcbiAgICAgICAgICAgIEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvciwgeyB1bml0OiAnbGluZScgfSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnZGVsZXRlV29yZEJhY2t3YXJkJzoge1xuICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgeyB1bml0OiAnd29yZCcgfSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnZGVsZXRlV29yZEZvcndhcmQnOiB7XG4gICAgICAgICAgICBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IsIHsgdW5pdDogJ3dvcmQnIH0pXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2luc2VydExpbmVCcmVhayc6XG4gICAgICAgICAgICBFZGl0b3IuaW5zZXJ0U29mdEJyZWFrKGVkaXRvcilcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdpbnNlcnRQYXJhZ3JhcGgnOiB7XG4gICAgICAgICAgICBFZGl0b3IuaW5zZXJ0QnJlYWsoZWRpdG9yKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdpbnNlcnRGcm9tQ29tcG9zaXRpb24nOlxuICAgICAgICAgIGNhc2UgJ2luc2VydEZyb21Ecm9wJzpcbiAgICAgICAgICBjYXNlICdpbnNlcnRGcm9tUGFzdGUnOlxuICAgICAgICAgIGNhc2UgJ2luc2VydEZyb21ZYW5rJzpcbiAgICAgICAgICBjYXNlICdpbnNlcnRSZXBsYWNlbWVudFRleHQnOlxuICAgICAgICAgIGNhc2UgJ2luc2VydFRleHQnOiB7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2luc2VydEZyb21Db21wb3NpdGlvbicpIHtcbiAgICAgICAgICAgICAgLy8gQ09NUEFUOiBpbiBTYWZhcmksIGBjb21wb3NpdGlvbmVuZGAgaXMgZGlzcGF0Y2hlZCBhZnRlciB0aGVcbiAgICAgICAgICAgICAgLy8gYGJlZm9yZWlucHV0YCBmb3IgXCJpbnNlcnRGcm9tQ29tcG9zaXRpb25cIi4gQnV0IGlmIHdlIHdhaXQgZm9yIGl0XG4gICAgICAgICAgICAgIC8vIHRoZW4gd2Ugd2lsbCBhYm9ydCBiZWNhdXNlIHdlJ3JlIHN0aWxsIGNvbXBvc2luZyBhbmQgdGhlIHNlbGVjdGlvblxuICAgICAgICAgICAgICAvLyB3b24ndCBiZSB1cGRhdGVkIHByb3Blcmx5LlxuICAgICAgICAgICAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvaW5wdXQtZXZlbnRzLTIvXG4gICAgICAgICAgICAgIGlmIChSZWFjdEVkaXRvci5pc0NvbXBvc2luZyhlZGl0b3IpKSB7XG4gICAgICAgICAgICAgICAgc2V0SXNDb21wb3NpbmcoZmFsc2UpXG4gICAgICAgICAgICAgICAgSVNfQ09NUE9TSU5HLnNldChlZGl0b3IsIGZhbHNlKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHVzZSBhIHdlYWsgY29tcGFyaXNvbiBpbnN0ZWFkIG9mICdpbnN0YW5jZW9mJyB0byBhbGxvd1xuICAgICAgICAgICAgLy8gcHJvZ3JhbW1hdGljIGFjY2VzcyBvZiBwYXN0ZSBldmVudHMgY29taW5nIGZyb20gZXh0ZXJuYWwgd2luZG93c1xuICAgICAgICAgICAgLy8gbGlrZSBjeXByZXNzIHdoZXJlIGN5LndpbmRvdyBkb2VzIG5vdCB3b3JrIHJlYWxpYmx5XG4gICAgICAgICAgICBpZiAoZGF0YT8uY29uc3RydWN0b3IubmFtZSA9PT0gJ0RhdGFUcmFuc2ZlcicpIHtcbiAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaW5zZXJ0RGF0YShlZGl0b3IsIGRhdGEpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAvLyBPbmx5IGluc2VydFRleHQgb3BlcmF0aW9ucyB1c2UgdGhlIG5hdGl2ZSBmdW5jdGlvbmFsaXR5LCBmb3Igbm93LlxuICAgICAgICAgICAgICAvLyBQb3RlbnRpYWxseSBleHBhbmQgdG8gc2luZ2xlIGNoYXJhY3RlciBkZWxldGVzLCBhcyB3ZWxsLlxuICAgICAgICAgICAgICBpZiAobmF0aXZlKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWRPcGVyYXRpb25zLmN1cnJlbnQucHVzaCgoKSA9PlxuICAgICAgICAgICAgICAgICAgRWRpdG9yLmluc2VydFRleHQoZWRpdG9yLCBkYXRhKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBFZGl0b3IuaW5zZXJ0VGV4dChlZGl0b3IsIGRhdGEpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXN0b3JlIHRoZSBhY3R1YWwgdXNlciBzZWN0aW9uIGlmIG5vdGhpbmcgbWFudWFsbHkgc2V0IGl0LlxuICAgICAgICBjb25zdCB0b1Jlc3RvcmUgPSBFRElUT1JfVE9fVVNFUl9TRUxFQ1RJT04uZ2V0KGVkaXRvcik/LnVucmVmKClcbiAgICAgICAgRURJVE9SX1RPX1VTRVJfU0VMRUNUSU9OLmRlbGV0ZShlZGl0b3IpXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRvUmVzdG9yZSAmJlxuICAgICAgICAgICghZWRpdG9yLnNlbGVjdGlvbiB8fCAhUmFuZ2UuZXF1YWxzKGVkaXRvci5zZWxlY3Rpb24sIHRvUmVzdG9yZSkpXG4gICAgICAgICkge1xuICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgdG9SZXN0b3JlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbcmVhZE9ubHksIHByb3BzT25ET01CZWZvcmVJbnB1dF1cbiAgKVxuXG4gIC8vIEF0dGFjaCBhIG5hdGl2ZSBET00gZXZlbnQgaGFuZGxlciBmb3IgYGJlZm9yZWlucHV0YCBldmVudHMsIGJlY2F1c2UgUmVhY3Qnc1xuICAvLyBidWlsdC1pbiBgb25CZWZvcmVJbnB1dGAgaXMgYWN0dWFsbHkgYSBsZWFreSBwb2x5ZmlsbCB0aGF0IGRvZXNuJ3QgZXhwb3NlXG4gIC8vIHJlYWwgYGJlZm9yZWlucHV0YCBldmVudHMgc2FkbHkuLi4gKDIwMTkvMTEvMDQpXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMTEyMTFcbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlZi5jdXJyZW50ICYmIEhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCkge1xuICAgICAgLy8gQHRzLWlnbm9yZSBUaGUgYGJlZm9yZWlucHV0YCBldmVudCBpc24ndCByZWNvZ25pemVkLlxuICAgICAgcmVmLmN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JlaW5wdXQnLCBvbkRPTUJlZm9yZUlucHV0KVxuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAocmVmLmN1cnJlbnQgJiYgSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmUgVGhlIGBiZWZvcmVpbnB1dGAgZXZlbnQgaXNuJ3QgcmVjb2duaXplZC5cbiAgICAgICAgcmVmLmN1cnJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JlaW5wdXQnLCBvbkRPTUJlZm9yZUlucHV0KVxuICAgICAgfVxuICAgIH1cbiAgfSwgW29uRE9NQmVmb3JlSW5wdXRdKVxuXG4gIC8vIEF0dGFjaCBhIG5hdGl2ZSBET00gZXZlbnQgaGFuZGxlciBmb3IgYHNlbGVjdGlvbmNoYW5nZWAsIGJlY2F1c2UgUmVhY3Qnc1xuICAvLyBidWlsdC1pbiBgb25TZWxlY3RgIGhhbmRsZXIgZG9lc24ndCBmaXJlIGZvciBhbGwgc2VsZWN0aW9uIGNoYW5nZXMuIEl0J3MgYVxuICAvLyBsZWFreSBwb2x5ZmlsbCB0aGF0IG9ubHkgZmlyZXMgb24ga2V5cHJlc3NlcyBvciBjbGlja3MuIEluc3RlYWQsIHdlIHdhbnQgdG9cbiAgLy8gZmlyZSBmb3IgYW55IGNoYW5nZSB0byB0aGUgc2VsZWN0aW9uIGluc2lkZSB0aGUgZWRpdG9yLiAoMjAxOS8xMS8wNClcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy81Nzg1XG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHdpbmRvdyA9IFJlYWN0RWRpdG9yLmdldFdpbmRvdyhlZGl0b3IpXG5cbiAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdzZWxlY3Rpb25jaGFuZ2UnLFxuICAgICAgc2NoZWR1bGVPbkRPTVNlbGVjdGlvbkNoYW5nZVxuICAgIClcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ3NlbGVjdGlvbmNoYW5nZScsXG4gICAgICAgIHNjaGVkdWxlT25ET01TZWxlY3Rpb25DaGFuZ2VcbiAgICAgIClcbiAgICB9XG4gIH0sIFtzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlXSlcblxuICBjb25zdCBkZWNvcmF0aW9ucyA9IGRlY29yYXRlKFtlZGl0b3IsIFtdXSlcblxuICBpZiAoXG4gICAgcGxhY2Vob2xkZXIgJiZcbiAgICBlZGl0b3IuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmXG4gICAgQXJyYXkuZnJvbShOb2RlLnRleHRzKGVkaXRvcikpLmxlbmd0aCA9PT0gMSAmJlxuICAgIE5vZGUuc3RyaW5nKGVkaXRvcikgPT09ICcnICYmXG4gICAgIWlzQ29tcG9zaW5nXG4gICkge1xuICAgIGNvbnN0IHN0YXJ0ID0gRWRpdG9yLnN0YXJ0KGVkaXRvciwgW10pXG4gICAgZGVjb3JhdGlvbnMucHVzaCh7XG4gICAgICBbUExBQ0VIT0xERVJfU1lNQk9MXTogdHJ1ZSxcbiAgICAgIHBsYWNlaG9sZGVyLFxuICAgICAgYW5jaG9yOiBzdGFydCxcbiAgICAgIGZvY3VzOiBzdGFydCxcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgeyBtYXJrcyB9ID0gZWRpdG9yXG4gIHN0YXRlLmhhc01hcmtQbGFjZWhvbGRlciA9IGZhbHNlXG5cbiAgaWYgKGVkaXRvci5zZWxlY3Rpb24gJiYgUmFuZ2UuaXNDb2xsYXBzZWQoZWRpdG9yLnNlbGVjdGlvbikgJiYgbWFya3MpIHtcbiAgICBjb25zdCB7IGFuY2hvciB9ID0gZWRpdG9yLnNlbGVjdGlvblxuICAgIGNvbnN0IGxlYWYgPSBOb2RlLmxlYWYoZWRpdG9yLCBhbmNob3IucGF0aClcbiAgICBjb25zdCB7IHRleHQsIC4uLnJlc3QgfSA9IGxlYWZcblxuICAgIC8vIFdoaWxlIG1hcmtzIGlzbid0IGEgJ2NvbXBsZXRlJyB0ZXh0LCB3ZSBjYW4gc3RpbGwgdXNlIGxvb3NlIFRleHQuZXF1YWxzXG4gICAgLy8gaGVyZSB3aGljaCBvbmx5IGNvbXBhcmVzIG1hcmtzIGFueXdheS5cbiAgICBpZiAoIVRleHQuZXF1YWxzKGxlYWYsIG1hcmtzIGFzIFRleHQsIHsgbG9vc2U6IHRydWUgfSkpIHtcbiAgICAgIHN0YXRlLmhhc01hcmtQbGFjZWhvbGRlciA9IHRydWVcblxuICAgICAgY29uc3QgdW5zZXQgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC5rZXlzKHJlc3QpLm1hcChtYXJrID0+IFttYXJrLCBudWxsXSlcbiAgICAgIClcblxuICAgICAgZGVjb3JhdGlvbnMucHVzaCh7XG4gICAgICAgIFtNQVJLX1BMQUNFSE9MREVSX1NZTUJPTF06IHRydWUsXG4gICAgICAgIC4uLnVuc2V0LFxuICAgICAgICAuLi5tYXJrcyxcblxuICAgICAgICBhbmNob3IsXG4gICAgICAgIGZvY3VzOiBhbmNob3IsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBFRElUT1JfVE9fTUFSS19QTEFDRUhPTERFUl9NQVJLUyBpbiBzZXRUaW1lb3V0IHVzZUVmZmVjdCB0byBlbnN1cmUgd2UgZG9uJ3Qgc2V0IGl0XG4gIC8vIGJlZm9yZSB3ZSByZWNlaXZlIHRoZSBjb21wb3NpdGlvbiBlbmQgZXZlbnQuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG4gICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IHsgYW5jaG9yIH0gPSBzZWxlY3Rpb25cbiAgICAgICAgY29uc3QgdGV4dCA9IE5vZGUubGVhZihlZGl0b3IsIGFuY2hvci5wYXRoKVxuXG4gICAgICAgIC8vIFdoaWxlIG1hcmtzIGlzbid0IGEgJ2NvbXBsZXRlJyB0ZXh0LCB3ZSBjYW4gc3RpbGwgdXNlIGxvb3NlIFRleHQuZXF1YWxzXG4gICAgICAgIC8vIGhlcmUgd2hpY2ggb25seSBjb21wYXJlcyBtYXJrcyBhbnl3YXkuXG4gICAgICAgIGlmIChtYXJrcyAmJiAhVGV4dC5lcXVhbHModGV4dCwgbWFya3MgYXMgVGV4dCwgeyBsb29zZTogdHJ1ZSB9KSkge1xuICAgICAgICAgIEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUy5zZXQoZWRpdG9yLCBtYXJrcylcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MuZGVsZXRlKGVkaXRvcilcbiAgICB9KVxuICB9KVxuXG4gIGNvbnN0IHBsYWNlaG9sZGVySGVpZ2h0ID0gRURJVE9SX1RPX1BMQUNFSE9MREVSX0VMRU1FTlQuZ2V0KFxuICAgIGVkaXRvclxuICApPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKT8uaGVpZ2h0XG5cbiAgcmV0dXJuIChcbiAgICA8UmVhZE9ubHlDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtyZWFkT25seX0+XG4gICAgICA8RGVjb3JhdGVDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtkZWNvcmF0ZX0+XG4gICAgICAgIDxSZXN0b3JlRE9NIG5vZGU9e3JlZn0gcmVjZWl2ZWRVc2VySW5wdXQ9e3JlY2VpdmVkVXNlcklucHV0fT5cbiAgICAgICAgICA8Q29tcG9uZW50XG4gICAgICAgICAgICByb2xlPXtyZWFkT25seSA/IHVuZGVmaW5lZCA6ICd0ZXh0Ym94J31cbiAgICAgICAgICAgIGFyaWEtbXVsdGlsaW5lPXtyZWFkT25seSA/IHVuZGVmaW5lZCA6IHRydWV9XG4gICAgICAgICAgICB7Li4uYXR0cmlidXRlc31cbiAgICAgICAgICAgIC8vIENPTVBBVDogQ2VydGFpbiBicm93c2VycyBkb24ndCBzdXBwb3J0IHRoZSBgYmVmb3JlaW5wdXRgIGV2ZW50LCBzbyB3ZSdkXG4gICAgICAgICAgICAvLyBoYXZlIHRvIHVzZSBoYWNrcyB0byBtYWtlIHRoZXNlIHJlcGxhY2VtZW50LWJhc2VkIGZlYXR1cmVzIHdvcmsuXG4gICAgICAgICAgICAvLyBGb3IgU1NSIHNpdHVhdGlvbnMgSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUIGlzIGZhbHNlIGFuZCByZXN1bHRzIGluIHByb3BcbiAgICAgICAgICAgIC8vIG1pc21hdGNoIHdhcm5pbmcgYXBwIG1vdmVzIHRvIGJyb3dzZXIuIFBhc3MtdGhyb3VnaCBjb25zdW1lciBwcm9wcyB3aGVuXG4gICAgICAgICAgICAvLyBub3QgQ0FOX1VTRV9ET00gKFNTUikgYW5kIGRlZmF1bHQgdG8gZmFsc3kgdmFsdWVcbiAgICAgICAgICAgIHNwZWxsQ2hlY2s9e1xuICAgICAgICAgICAgICBIQVNfQkVGT1JFX0lOUFVUX1NVUFBPUlQgfHwgIUNBTl9VU0VfRE9NXG4gICAgICAgICAgICAgICAgPyBhdHRyaWJ1dGVzLnNwZWxsQ2hlY2tcbiAgICAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdXRvQ29ycmVjdD17XG4gICAgICAgICAgICAgIEhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCB8fCAhQ0FOX1VTRV9ET01cbiAgICAgICAgICAgICAgICA/IGF0dHJpYnV0ZXMuYXV0b0NvcnJlY3RcbiAgICAgICAgICAgICAgICA6ICdmYWxzZSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF1dG9DYXBpdGFsaXplPXtcbiAgICAgICAgICAgICAgSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUIHx8ICFDQU5fVVNFX0RPTVxuICAgICAgICAgICAgICAgID8gYXR0cmlidXRlcy5hdXRvQ2FwaXRhbGl6ZVxuICAgICAgICAgICAgICAgIDogJ2ZhbHNlJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS1zbGF0ZS1lZGl0b3JcbiAgICAgICAgICAgIGRhdGEtc2xhdGUtbm9kZT1cInZhbHVlXCJcbiAgICAgICAgICAgIC8vIGV4cGxpY2l0bHkgc2V0IHRoaXNcbiAgICAgICAgICAgIGNvbnRlbnRFZGl0YWJsZT17IXJlYWRPbmx5fVxuICAgICAgICAgICAgLy8gaW4gc29tZSBjYXNlcywgYSBkZWNvcmF0aW9uIG5lZWRzIGFjY2VzcyB0byB0aGUgcmFuZ2UgLyBzZWxlY3Rpb24gdG8gZGVjb3JhdGUgYSB0ZXh0IG5vZGUsXG4gICAgICAgICAgICAvLyB0aGVuIHlvdSB3aWxsIHNlbGVjdCB0aGUgd2hvbGUgdGV4dCBub2RlIHdoZW4geW91IHNlbGVjdCBwYXJ0IHRoZSBvZiB0ZXh0XG4gICAgICAgICAgICAvLyB0aGlzIG1hZ2ljIHpJbmRleD1cIi0xXCIgd2lsbCBmaXggaXRcbiAgICAgICAgICAgIHppbmRleD17LTF9XG4gICAgICAgICAgICBzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmdcbiAgICAgICAgICAgIHJlZj17cmVmfVxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgLi4uKGRpc2FibGVEZWZhdWx0U3R5bGVzXG4gICAgICAgICAgICAgICAgPyB7fVxuICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAvLyBBbGxvdyBwb3NpdGlvbmluZyByZWxhdGl2ZSB0byB0aGUgZWRpdGFibGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgdGhlIGRlZmF1bHQgb3V0bGluZSBzdHlsZXMuXG4gICAgICAgICAgICAgICAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJlc2VydmUgYWRqYWNlbnQgd2hpdGVzcGFjZSBhbmQgbmV3IGxpbmVzLlxuICAgICAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiAncHJlLXdyYXAnLFxuICAgICAgICAgICAgICAgICAgICAvLyBBbGxvdyB3b3JkcyB0byBicmVhayBpZiB0aGV5IGFyZSB0b28gbG9uZy5cbiAgICAgICAgICAgICAgICAgICAgd29yZFdyYXA6ICdicmVhay13b3JkJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSB0aGUgbWluaW11bSBoZWlnaHQgdGhhdCBvZiB0aGUgcGxhY2Vob2xkZXIuXG4gICAgICAgICAgICAgICAgICAgIC4uLihwbGFjZWhvbGRlckhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgID8geyBtaW5IZWlnaHQ6IHBsYWNlaG9sZGVySGVpZ2h0IH1cbiAgICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAvLyBBbGxvdyBmb3IgcGFzc2VkLWluIHN0eWxlcyB0byBvdmVycmlkZSBhbnl0aGluZy5cbiAgICAgICAgICAgICAgLi4udXNlclN0eWxlLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uQmVmb3JlSW5wdXQ9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkZvcm1FdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IENlcnRhaW4gYnJvd3NlcnMgZG9uJ3Qgc3VwcG9ydCB0aGUgYGJlZm9yZWlucHV0YCBldmVudCwgc28gd2VcbiAgICAgICAgICAgICAgICAvLyBmYWxsIGJhY2sgdG8gUmVhY3QncyBsZWFreSBwb2x5ZmlsbCBpbnN0ZWFkIGp1c3QgZm9yIGl0LiBJdFxuICAgICAgICAgICAgICAgIC8vIG9ubHkgd29ya3MgZm9yIHRoZSBgaW5zZXJ0VGV4dGAgaW5wdXQgdHlwZS5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUICYmXG4gICAgICAgICAgICAgICAgICAhcmVhZE9ubHkgJiZcbiAgICAgICAgICAgICAgICAgICFpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkJlZm9yZUlucHV0KSAmJlxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzU2VsZWN0YWJsZVRhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgIGlmICghUmVhY3RFZGl0b3IuaXNDb21wb3NpbmcoZWRpdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gKGV2ZW50IGFzIGFueSkuZGF0YSBhcyBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmluc2VydFRleHQoZWRpdG9yLCB0ZXh0KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW3JlYWRPbmx5XVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uSW5wdXQ9e3VzZUNhbGxiYWNrKChldmVudDogUmVhY3QuU3ludGhldGljRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGFuZHJvaWRJbnB1dE1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICBhbmRyb2lkSW5wdXRNYW5hZ2VyLmhhbmRsZUlucHV0KClcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIEZsdXNoIG5hdGl2ZSBvcGVyYXRpb25zLCBhcyBuYXRpdmUgZXZlbnRzIHdpbGwgaGF2ZSBwcm9wb2dhdGVkXG4gICAgICAgICAgICAgIC8vIGFuZCB3ZSBjYW4gY29ycmVjdGx5IGNvbXBhcmUgRE9NIHRleHQgdmFsdWVzIGluIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgLy8gdG8gc3RvcCByZW5kZXJpbmcsIHNvIHRoYXQgYnJvd3NlciBmdW5jdGlvbnMgbGlrZSBhdXRvY29ycmVjdFxuICAgICAgICAgICAgICAvLyBhbmQgc3BlbGxjaGVjayB3b3JrIGFzIGV4cGVjdGVkLlxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IG9wIG9mIGRlZmVycmVkT3BlcmF0aW9ucy5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgb3AoKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRlZmVycmVkT3BlcmF0aW9ucy5jdXJyZW50ID0gW11cbiAgICAgICAgICAgIH0sIFtdKX1cbiAgICAgICAgICAgIG9uQmx1cj17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuRm9jdXNFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICByZWFkT25seSB8fFxuICAgICAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZ1NlbGVjdGlvbiB8fFxuICAgICAgICAgICAgICAgICAgIVJlYWN0RWRpdG9yLmhhc1NlbGVjdGFibGVUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpIHx8XG4gICAgICAgICAgICAgICAgICBpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkJsdXIpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IElmIHRoZSBjdXJyZW50IGBhY3RpdmVFbGVtZW50YCBpcyBzdGlsbCB0aGUgcHJldmlvdXNcbiAgICAgICAgICAgICAgICAvLyBvbmUsIHRoaXMgaXMgZHVlIHRvIHRoZSB3aW5kb3cgYmVpbmcgYmx1cnJlZCB3aGVuIHRoZSB0YWJcbiAgICAgICAgICAgICAgICAvLyBpdHNlbGYgYmVjb21lcyB1bmZvY3VzZWQsIHNvIHdlIHdhbnQgdG8gYWJvcnQgZWFybHkgdG8gYWxsb3cgdG9cbiAgICAgICAgICAgICAgICAvLyBlZGl0b3IgdG8gc3RheSBmb2N1c2VkIHdoZW4gdGhlIHRhYiBiZWNvbWVzIGZvY3VzZWQgYWdhaW4uXG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdCA9IFJlYWN0RWRpdG9yLmZpbmREb2N1bWVudE9yU2hhZG93Um9vdChlZGl0b3IpXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmxhdGVzdEVsZW1lbnQgPT09IHJvb3QuYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgeyByZWxhdGVkVGFyZ2V0IH0gPSBldmVudFxuICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKVxuXG4gICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBUaGUgZXZlbnQgc2hvdWxkIGJlIGlnbm9yZWQgaWYgdGhlIGZvY3VzIGlzIHJldHVybmluZ1xuICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBlZGl0b3IgZnJvbSBhbiBlbWJlZGRlZCBlZGl0YWJsZSBlbGVtZW50IChlZy4gYW4gPGlucHV0PlxuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgaW5zaWRlIGEgdm9pZCBub2RlKS5cbiAgICAgICAgICAgICAgICBpZiAocmVsYXRlZFRhcmdldCA9PT0gZWwpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENPTVBBVDogVGhlIGV2ZW50IHNob3VsZCBiZSBpZ25vcmVkIGlmIHRoZSBmb2N1cyBpcyBtb3ZpbmcgZnJvbVxuICAgICAgICAgICAgICAgIC8vIHRoZSBlZGl0b3IgdG8gaW5zaWRlIGEgdm9pZCBub2RlJ3Mgc3BhY2VyIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgaXNET01FbGVtZW50KHJlbGF0ZWRUYXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICByZWxhdGVkVGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1zbGF0ZS1zcGFjZXInKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBUaGUgZXZlbnQgc2hvdWxkIGJlIGlnbm9yZWQgaWYgdGhlIGZvY3VzIGlzIG1vdmluZyB0byBhXG4gICAgICAgICAgICAgICAgLy8gbm9uLSBlZGl0YWJsZSBzZWN0aW9uIG9mIGFuIGVsZW1lbnQgdGhhdCBpc24ndCBhIHZvaWQgbm9kZSAoZWcuXG4gICAgICAgICAgICAgICAgLy8gYSBsaXN0IGl0ZW0gb2YgdGhlIGNoZWNrIGxpc3QgZXhhbXBsZSkuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICBpc0RPTU5vZGUocmVsYXRlZFRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc0RPTU5vZGUoZWRpdG9yLCByZWxhdGVkVGFyZ2V0KVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVOb2RlKGVkaXRvciwgcmVsYXRlZFRhcmdldClcblxuICAgICAgICAgICAgICAgICAgaWYgKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmICFlZGl0b3IuaXNWb2lkKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENPTVBBVDogU2FmYXJpIGRvZXNuJ3QgYWx3YXlzIHJlbW92ZSB0aGUgc2VsZWN0aW9uIGV2ZW4gaWYgdGhlIGNvbnRlbnQtXG4gICAgICAgICAgICAgICAgLy8gZWRpdGFibGUgZWxlbWVudCBubyBsb25nZXIgaGFzIGZvY3VzLiBSZWZlciB0bzpcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMjM1MzI0Ny9mb3JjZS1jb250ZW50ZWRpdGFibGUtZGl2LXRvLXN0b3AtYWNjZXB0aW5nLWlucHV0LWFmdGVyLWl0LWxvc2VzLWZvY3VzLXVuZGVyLXdlYlxuICAgICAgICAgICAgICAgIGlmIChJU19TQUZBUkkpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGRvbVNlbGVjdGlvbiA9IHJvb3QuZ2V0U2VsZWN0aW9uKClcbiAgICAgICAgICAgICAgICAgIGRvbVNlbGVjdGlvbj8ucmVtb3ZlQWxsUmFuZ2VzKClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBJU19GT0NVU0VELmRlbGV0ZShlZGl0b3IpXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFtyZWFkT25seSwgYXR0cmlidXRlcy5vbkJsdXJdXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25DbGljaz17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICAhaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25DbGljaykgJiZcbiAgICAgICAgICAgICAgICAgIGlzRE9NTm9kZShldmVudC50YXJnZXQpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gUmVhY3RFZGl0b3IudG9TbGF0ZU5vZGUoZWRpdG9yLCBldmVudC50YXJnZXQpXG4gICAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBub2RlKVxuXG4gICAgICAgICAgICAgICAgICAvLyBBdCB0aGlzIHRpbWUsIHRoZSBTbGF0ZSBkb2N1bWVudCBtYXkgYmUgYXJiaXRyYXJpbHkgZGlmZmVyZW50LFxuICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBvbkNsaWNrIGhhbmRsZXJzIGNhbiBjaGFuZ2UgdGhlIGRvY3VtZW50IGJlZm9yZSB3ZSBnZXQgaGVyZS5cbiAgICAgICAgICAgICAgICAgIC8vIFRoZXJlZm9yZSB3ZSBtdXN0IGNoZWNrIHRoYXQgdGhpcyBwYXRoIGFjdHVhbGx5IGV4aXN0cyxcbiAgICAgICAgICAgICAgICAgIC8vIGFuZCB0aGF0IGl0IHN0aWxsIHJlZmVycyB0byB0aGUgc2FtZSBub2RlLlxuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAhRWRpdG9yLmhhc1BhdGgoZWRpdG9yLCBwYXRoKSB8fFxuICAgICAgICAgICAgICAgICAgICBOb2RlLmdldChlZGl0b3IsIHBhdGgpICE9PSBub2RlXG4gICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kZXRhaWwgPT09IFRSSVBMRV9DTElDSyAmJiBwYXRoLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBibG9ja1BhdGggPSBwYXRoXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAhKEVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbm9kZSkpXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2g6IG4gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0OiBwYXRoLFxuICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICBibG9ja1BhdGggPSBibG9jaz8uWzFdID8/IHBhdGguc2xpY2UoMCwgMSlcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgYmxvY2tQYXRoKVxuICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHJhbmdlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKHJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IEVkaXRvci5zdGFydChlZGl0b3IsIHBhdGgpXG4gICAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBFZGl0b3IuZW5kKGVkaXRvciwgcGF0aClcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0Vm9pZCA9IEVkaXRvci52b2lkKGVkaXRvciwgeyBhdDogc3RhcnQgfSlcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZFZvaWQgPSBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQ6IGVuZCB9KVxuXG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0Vm9pZCAmJlxuICAgICAgICAgICAgICAgICAgICBlbmRWb2lkICYmXG4gICAgICAgICAgICAgICAgICAgIFBhdGguZXF1YWxzKHN0YXJ0Vm9pZFsxXSwgZW5kVm9pZFsxXSlcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IEVkaXRvci5yYW5nZShlZGl0b3IsIHN0YXJ0KVxuICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHJhbmdlKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW3JlYWRPbmx5LCBhdHRyaWJ1dGVzLm9uQ2xpY2tdXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25Db21wb3NpdGlvbkVuZD17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuQ29tcG9zaXRpb25FdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoUmVhY3RFZGl0b3IuaGFzU2VsZWN0YWJsZVRhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChSZWFjdEVkaXRvci5pc0NvbXBvc2luZyhlZGl0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldElzQ29tcG9zaW5nKGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICBJU19DT01QT1NJTkcuc2V0KGVkaXRvciwgZmFsc2UpXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGFuZHJvaWRJbnB1dE1hbmFnZXI/LmhhbmRsZUNvbXBvc2l0aW9uRW5kKGV2ZW50KVxuXG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uQ29tcG9zaXRpb25FbmQpIHx8XG4gICAgICAgICAgICAgICAgICAgIElTX0FORFJPSURcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBJbiBDaHJvbWUsIGBiZWZvcmVpbnB1dGAgZXZlbnRzIGZvciBjb21wb3NpdGlvbnNcbiAgICAgICAgICAgICAgICAgIC8vIGFyZW4ndCBjb3JyZWN0IGFuZCBuZXZlciBmaXJlIHRoZSBcImluc2VydEZyb21Db21wb3NpdGlvblwiXG4gICAgICAgICAgICAgICAgICAvLyB0eXBlIHRoYXQgd2UgbmVlZC4gU28gaW5zdGVhZCwgaW5zZXJ0IHdoZW5ldmVyIGEgY29tcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgIC8vIGVuZHMgc2luY2UgaXQgd2lsbCBhbHJlYWR5IGhhdmUgYmVlbiBjb21taXR0ZWQgdG8gdGhlIERPTS5cbiAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgIUlTX1NBRkFSSSAmJlxuICAgICAgICAgICAgICAgICAgICAhSVNfRklSRUZPWF9MRUdBQ1kgJiZcbiAgICAgICAgICAgICAgICAgICAgIUlTX0lPUyAmJlxuICAgICAgICAgICAgICAgICAgICAhSVNfV0VDSEFUQlJPV1NFUiAmJlxuICAgICAgICAgICAgICAgICAgICAhSVNfVUNfTU9CSUxFICYmXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmRhdGFcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlck1hcmtzID0gRURJVE9SX1RPX1BFTkRJTkdfSU5TRVJUSU9OX01BUktTLmdldChcbiAgICAgICAgICAgICAgICAgICAgICBlZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MuZGVsZXRlKGVkaXRvcilcblxuICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgd2UgaW5zZXJ0IHRleHQgd2l0aCB0aGUgbWFya3MgdGhlIHVzZXIgd2FzIGFjdHVhbGx5IHNlZWluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGxhY2Vob2xkZXJNYXJrcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgRURJVE9SX1RPX1VTRVJfTUFSS1Muc2V0KGVkaXRvciwgZWRpdG9yLm1hcmtzKVxuICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5tYXJrcyA9IHBsYWNlaG9sZGVyTWFya3NcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIEVkaXRvci5pbnNlcnRUZXh0KGVkaXRvciwgZXZlbnQuZGF0YSlcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyTWFya3MgPSBFRElUT1JfVE9fVVNFUl9NQVJLUy5nZXQoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICBFRElUT1JfVE9fVVNFUl9NQVJLUy5kZWxldGUoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlck1hcmtzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IubWFya3MgPSB1c2VyTWFya3NcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW2F0dHJpYnV0ZXMub25Db21wb3NpdGlvbkVuZF1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbkNvbXBvc2l0aW9uVXBkYXRlPXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5Db21wb3NpdGlvbkV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc1NlbGVjdGFibGVUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICAhaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25Db21wb3NpdGlvblVwZGF0ZSlcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGlmICghUmVhY3RFZGl0b3IuaXNDb21wb3NpbmcoZWRpdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRJc0NvbXBvc2luZyh0cnVlKVxuICAgICAgICAgICAgICAgICAgICBJU19DT01QT1NJTkcuc2V0KGVkaXRvciwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFthdHRyaWJ1dGVzLm9uQ29tcG9zaXRpb25VcGRhdGVdXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25Db21wb3NpdGlvblN0YXJ0PXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5Db21wb3NpdGlvbkV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChSZWFjdEVkaXRvci5oYXNTZWxlY3RhYmxlVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgYW5kcm9pZElucHV0TWFuYWdlcj8uaGFuZGxlQ29tcG9zaXRpb25TdGFydChldmVudClcblxuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkNvbXBvc2l0aW9uU3RhcnQpIHx8XG4gICAgICAgICAgICAgICAgICAgIElTX0FORFJPSURcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgc2V0SXNDb21wb3NpbmcodHJ1ZSlcblxuICAgICAgICAgICAgICAgICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IGVkaXRvclxuICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmxpbmUgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgbWF0Y2g6IG4gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnQuaXNFbGVtZW50KG4pICYmIEVkaXRvci5pc0lubGluZShlZGl0b3IsIG4pLFxuICAgICAgICAgICAgICAgICAgICAgIG1vZGU6ICdoaWdoZXN0JyxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubGluZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFssIGlubGluZVBhdGhdID0gaW5saW5lXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKEVkaXRvci5pc0VuZChlZGl0b3IsIHNlbGVjdGlvbi5hbmNob3IsIGlubGluZVBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2ludCA9IEVkaXRvci5hZnRlcihlZGl0b3IsIGlubGluZVBhdGgpIVxuICAgICAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZXRTZWxlY3Rpb24oZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvcjogcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzOiBwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbYXR0cmlidXRlcy5vbkNvbXBvc2l0aW9uU3RhcnRdXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25Db3B5PXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5DbGlwYm9hcmRFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNTZWxlY3RhYmxlVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgIWlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uQ29weSlcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLnNldEZyYWdtZW50RGF0YShcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICBldmVudC5jbGlwYm9hcmREYXRhLFxuICAgICAgICAgICAgICAgICAgICAnY29weSdcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFthdHRyaWJ1dGVzLm9uQ29weV1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbkN1dD17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuQ2xpcGJvYXJkRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgIXJlYWRPbmx5ICYmXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNTZWxlY3RhYmxlVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgIWlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uQ3V0KVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3Iuc2V0RnJhZ21lbnREYXRhKFxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmNsaXBib2FyZERhdGEsXG4gICAgICAgICAgICAgICAgICAgICdjdXQnXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gZWRpdG9yXG5cbiAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IE5vZGUucGFyZW50KGVkaXRvciwgc2VsZWN0aW9uLmFuY2hvci5wYXRoKVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChFZGl0b3IuaXNWb2lkKGVkaXRvciwgbm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFtyZWFkT25seSwgYXR0cmlidXRlcy5vbkN1dF1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBvbkRyYWdPdmVyPXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzVGFyZ2V0KGVkaXRvciwgZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgIWlzRXZlbnRIYW5kbGVkKGV2ZW50LCBhdHRyaWJ1dGVzLm9uRHJhZ092ZXIpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAvLyBPbmx5IHdoZW4gdGhlIHRhcmdldCBpcyB2b2lkLCBjYWxsIGBwcmV2ZW50RGVmYXVsdGAgdG8gc2lnbmFsXG4gICAgICAgICAgICAgICAgICAvLyB0aGF0IGRyb3BzIGFyZSBhbGxvd2VkLiBFZGl0YWJsZSBjb250ZW50IGlzIGRyb3BwYWJsZSBieVxuICAgICAgICAgICAgICAgICAgLy8gZGVmYXVsdCwgYW5kIGNhbGxpbmcgYHByZXZlbnREZWZhdWx0YCBoaWRlcyB0aGUgY3Vyc29yLlxuICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IFJlYWN0RWRpdG9yLnRvU2xhdGVOb2RlKGVkaXRvciwgZXZlbnQudGFyZ2V0KVxuXG4gICAgICAgICAgICAgICAgICBpZiAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiYgRWRpdG9yLmlzVm9pZChlZGl0b3IsIG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFthdHRyaWJ1dGVzLm9uRHJhZ092ZXJdXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25EcmFnU3RhcnQ9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkRyYWdFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhcmVhZE9ubHkgJiZcbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmhhc1RhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICFpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkRyYWdTdGFydClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBSZWFjdEVkaXRvci50b1NsYXRlTm9kZShlZGl0b3IsIGV2ZW50LnRhcmdldClcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIG5vZGUpXG4gICAgICAgICAgICAgICAgICBjb25zdCB2b2lkTWF0Y2ggPVxuICAgICAgICAgICAgICAgICAgICAoRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiYgRWRpdG9yLmlzVm9pZChlZGl0b3IsIG5vZGUpKSB8fFxuICAgICAgICAgICAgICAgICAgICBFZGl0b3Iudm9pZChlZGl0b3IsIHsgYXQ6IHBhdGgsIHZvaWRzOiB0cnVlIH0pXG5cbiAgICAgICAgICAgICAgICAgIC8vIElmIHN0YXJ0aW5nIGEgZHJhZyBvbiBhIHZvaWQgbm9kZSwgbWFrZSBzdXJlIGl0IGlzIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICAvLyBzbyB0aGF0IGl0IHNob3dzIHVwIGluIHRoZSBzZWxlY3Rpb24ncyBmcmFnbWVudC5cbiAgICAgICAgICAgICAgICAgIGlmICh2b2lkTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBFZGl0b3IucmFuZ2UoZWRpdG9yLCBwYXRoKVxuICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHJhbmdlKVxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBzdGF0ZS5pc0RyYWdnaW5nSW50ZXJuYWxseSA9IHRydWVcblxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3Iuc2V0RnJhZ21lbnREYXRhKFxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmRhdGFUcmFuc2ZlcixcbiAgICAgICAgICAgICAgICAgICAgJ2RyYWcnXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbcmVhZE9ubHksIGF0dHJpYnV0ZXMub25EcmFnU3RhcnRdXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25Ecm9wPXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgIXJlYWRPbmx5ICYmXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICAhaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25Ecm9wKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBkcmFnZ2VkIHJhbmdlIGJlZm9yZSB1cGRhdGluZyBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGRyYWdnZWRSYW5nZSA9IGVkaXRvci5zZWxlY3Rpb25cblxuICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgcmFuZ2Ugd2hlcmUgdGhlIGRyb3AgaGFwcGVuZWRcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gUmVhY3RFZGl0b3IuZmluZEV2ZW50UmFuZ2UoZWRpdG9yLCBldmVudClcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBldmVudC5kYXRhVHJhbnNmZXJcblxuICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCByYW5nZSlcblxuICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmlzRHJhZ2dpbmdJbnRlcm5hbGx5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2VkUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAhUmFuZ2UuZXF1YWxzKGRyYWdnZWRSYW5nZSwgcmFuZ2UpICYmXG4gICAgICAgICAgICAgICAgICAgICAgIUVkaXRvci52b2lkKGVkaXRvciwgeyBhdDogcmFuZ2UsIHZvaWRzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXQ6IGRyYWdnZWRSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIFJlYWN0RWRpdG9yLmluc2VydERhdGEoZWRpdG9yLCBkYXRhKVxuXG4gICAgICAgICAgICAgICAgICAvLyBXaGVuIGRyYWdnaW5nIGZyb20gYW5vdGhlciBzb3VyY2UgaW50byB0aGUgZWRpdG9yLCBpdCdzIHBvc3NpYmxlXG4gICAgICAgICAgICAgICAgICAvLyB0aGF0IHRoZSBjdXJyZW50IGVkaXRvciBkb2VzIG5vdCBoYXZlIGZvY3VzLlxuICAgICAgICAgICAgICAgICAgaWYgKCFSZWFjdEVkaXRvci5pc0ZvY3VzZWQoZWRpdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5mb2N1cyhlZGl0b3IpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc3RhdGUuaXNEcmFnZ2luZ0ludGVybmFsbHkgPSBmYWxzZVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbcmVhZE9ubHksIGF0dHJpYnV0ZXMub25Ecm9wXVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uRHJhZ0VuZD17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuRHJhZ0V2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFyZWFkT25seSAmJlxuICAgICAgICAgICAgICAgICAgc3RhdGUuaXNEcmFnZ2luZ0ludGVybmFsbHkgJiZcbiAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMub25EcmFnRW5kICYmXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLm9uRHJhZ0VuZChldmVudClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBXaGVuIGRyb3BwaW5nIG9uIGEgZGlmZmVyZW50IGRyb3BwYWJsZSBlbGVtZW50IHRoYW4gdGhlIGN1cnJlbnQgZWRpdG9yLFxuICAgICAgICAgICAgICAgIC8vIGBvbkRyb3BgIGlzIG5vdCBjYWxsZWQuIFNvIHdlIG5lZWQgdG8gY2xlYW4gdXAgaW4gYG9uRHJhZ0VuZGAgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBgb25EcmFnRW5kYCBpcyBvbmx5IGNhbGxlZCB3aGVuIGBvbkRyb3BgIGlzIG5vdCBjYWxsZWRcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc0RyYWdnaW5nSW50ZXJuYWxseSA9IGZhbHNlXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFtyZWFkT25seSwgYXR0cmlidXRlcy5vbkRyYWdFbmRdXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25Gb2N1cz17dXNlQ2FsbGJhY2soXG4gICAgICAgICAgICAgIChldmVudDogUmVhY3QuRm9jdXNFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhcmVhZE9ubHkgJiZcbiAgICAgICAgICAgICAgICAgICFzdGF0ZS5pc1VwZGF0aW5nU2VsZWN0aW9uICYmXG4gICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5oYXNFZGl0YWJsZVRhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICFpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vbkZvY3VzKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBlZGl0b3IpXG4gICAgICAgICAgICAgICAgICBjb25zdCByb290ID0gUmVhY3RFZGl0b3IuZmluZERvY3VtZW50T3JTaGFkb3dSb290KGVkaXRvcilcbiAgICAgICAgICAgICAgICAgIHN0YXRlLmxhdGVzdEVsZW1lbnQgPSByb290LmFjdGl2ZUVsZW1lbnRcblxuICAgICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBJZiB0aGUgZWRpdG9yIGhhcyBuZXN0ZWQgZWRpdGFibGUgZWxlbWVudHMsIHRoZSBmb2N1c1xuICAgICAgICAgICAgICAgICAgLy8gY2FuIGdvIHRvIHRoZW0uIEluIEZpcmVmb3gsIHRoaXMgbXVzdCBiZSBwcmV2ZW50ZWQgYmVjYXVzZSBpdFxuICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0cyBpbiBpc3N1ZXMgd2l0aCBrZXlib2FyZCBuYXZpZ2F0aW9uLiAoMjAxNy8wMy8zMClcbiAgICAgICAgICAgICAgICAgIGlmIChJU19GSVJFRk9YICYmIGV2ZW50LnRhcmdldCAhPT0gZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuZm9jdXMoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgSVNfRk9DVVNFRC5zZXQoZWRpdG9yLCB0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgW3JlYWRPbmx5LCBhdHRyaWJ1dGVzLm9uRm9jdXNdXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgb25LZXlEb3duPXt1c2VDYWxsYmFjayhcbiAgICAgICAgICAgICAgKGV2ZW50OiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFyZWFkT25seSAmJlxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzRWRpdGFibGVUYXJnZXQoZWRpdG9yLCBldmVudC50YXJnZXQpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBhbmRyb2lkSW5wdXRNYW5hZ2VyPy5oYW5kbGVLZXlEb3duKGV2ZW50KVxuXG4gICAgICAgICAgICAgICAgICBjb25zdCB7IG5hdGl2ZUV2ZW50IH0gPSBldmVudFxuXG4gICAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IFRoZSBjb21wb3NpdGlvbiBlbmQgZXZlbnQgaXNuJ3QgZmlyZWQgcmVsaWFibHkgaW4gYWxsIGJyb3dzZXJzLFxuICAgICAgICAgICAgICAgICAgLy8gc28gd2Ugc29tZXRpbWVzIG1pZ2h0IGVuZCB1cCBzdHVjayBpbiBhIGNvbXBvc2l0aW9uIHN0YXRlIGV2ZW4gdGhvdWdoIHdlXG4gICAgICAgICAgICAgICAgICAvLyBhcmVuJ3QgY29tcG9zaW5nIGFueSBtb3JlLlxuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5pc0NvbXBvc2luZyhlZGl0b3IpICYmXG4gICAgICAgICAgICAgICAgICAgIG5hdGl2ZUV2ZW50LmlzQ29tcG9zaW5nID09PSBmYWxzZVxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIElTX0NPTVBPU0lORy5zZXQoZWRpdG9yLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNDb21wb3NpbmcoZmFsc2UpXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgaXNFdmVudEhhbmRsZWQoZXZlbnQsIGF0dHJpYnV0ZXMub25LZXlEb3duKSB8fFxuICAgICAgICAgICAgICAgICAgICBSZWFjdEVkaXRvci5pc0NvbXBvc2luZyhlZGl0b3IpXG4gICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlZGl0b3JcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPVxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IuY2hpbGRyZW5bXG4gICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uICE9PSBudWxsID8gc2VsZWN0aW9uLmZvY3VzLnBhdGhbMF0gOiAwXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGlzUlRMID0gZ2V0RGlyZWN0aW9uKE5vZGUuc3RyaW5nKGVsZW1lbnQpKSA9PT0gJ3J0bCdcblxuICAgICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBTaW5jZSB3ZSBwcmV2ZW50IHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9uXG4gICAgICAgICAgICAgICAgICAvLyBgYmVmb3JlaW5wdXRgIGV2ZW50cywgdGhlIGJyb3dzZXIgZG9lc24ndCB0aGluayB0aGVyZSdzIGV2ZXJcbiAgICAgICAgICAgICAgICAgIC8vIGFueSBoaXN0b3J5IHN0YWNrIHRvIHVuZG8gb3IgcmVkbywgc28gd2UgaGF2ZSB0byBtYW5hZ2UgdGhlc2VcbiAgICAgICAgICAgICAgICAgIC8vIGhvdGtleXMgb3Vyc2VsdmVzLiAoMjAxOS8xMS8wNilcbiAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzUmVkbyhuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXliZUhpc3RvcnlFZGl0b3I6IGFueSA9IGVkaXRvclxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF5YmVIaXN0b3J5RWRpdG9yLnJlZG8gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICBtYXliZUhpc3RvcnlFZGl0b3IucmVkbygpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNVbmRvKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heWJlSGlzdG9yeUVkaXRvcjogYW55ID0gZWRpdG9yXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXliZUhpc3RvcnlFZGl0b3IudW5kbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgIG1heWJlSGlzdG9yeUVkaXRvci51bmRvKClcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IENlcnRhaW4gYnJvd3NlcnMgZG9uJ3QgaGFuZGxlIHRoZSBzZWxlY3Rpb24gdXBkYXRlc1xuICAgICAgICAgICAgICAgICAgLy8gcHJvcGVybHkuIEluIENocm9tZSwgdGhlIHNlbGVjdGlvbiBpc24ndCBwcm9wZXJseSBleHRlbmRlZC5cbiAgICAgICAgICAgICAgICAgIC8vIEFuZCBpbiBGaXJlZm94LCB0aGUgc2VsZWN0aW9uIGlzbid0IHByb3Blcmx5IGNvbGxhcHNlZC5cbiAgICAgICAgICAgICAgICAgIC8vICgyMDE3LzEwLzE3KVxuICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNNb3ZlTGluZUJhY2t3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZShlZGl0b3IsIHsgdW5pdDogJ2xpbmUnLCByZXZlcnNlOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc01vdmVMaW5lRm9yd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmUoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJyB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNFeHRlbmRMaW5lQmFja3dhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlKGVkaXRvciwge1xuICAgICAgICAgICAgICAgICAgICAgIHVuaXQ6ICdsaW5lJyxcbiAgICAgICAgICAgICAgICAgICAgICBlZGdlOiAnZm9jdXMnLFxuICAgICAgICAgICAgICAgICAgICAgIHJldmVyc2U6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc0V4dGVuZExpbmVGb3J3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZShlZGl0b3IsIHsgdW5pdDogJ2xpbmUnLCBlZGdlOiAnZm9jdXMnIH0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IElmIGEgdm9pZCBub2RlIGlzIHNlbGVjdGVkLCBvciBhIHplcm8td2lkdGggdGV4dCBub2RlXG4gICAgICAgICAgICAgICAgICAvLyBhZGphY2VudCB0byBhbiBpbmxpbmUgaXMgc2VsZWN0ZWQsIHdlIG5lZWQgdG8gaGFuZGxlIHRoZXNlXG4gICAgICAgICAgICAgICAgICAvLyBob3RrZXlzIG1hbnVhbGx5IGJlY2F1c2UgYnJvd3NlcnMgd29uJ3QgYmUgYWJsZSB0byBza2lwIG92ZXJcbiAgICAgICAgICAgICAgICAgIC8vIHRoZSB2b2lkIG5vZGUgd2l0aCB0aGUgemVyby13aWR0aCBzcGFjZSBub3QgYmVpbmcgYW4gZW1wdHlcbiAgICAgICAgICAgICAgICAgIC8vIHN0cmluZy5cbiAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzTW92ZUJhY2t3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlKGVkaXRvciwgeyByZXZlcnNlOiAhaXNSVEwgfSlcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLmNvbGxhcHNlKGVkaXRvciwgeyBlZGdlOiAnc3RhcnQnIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNNb3ZlRm9yd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNDb2xsYXBzZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZShlZGl0b3IsIHsgcmV2ZXJzZTogaXNSVEwgfSlcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLmNvbGxhcHNlKGVkaXRvciwgeyBlZGdlOiAnZW5kJyB9KVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzTW92ZVdvcmRCYWNrd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5jb2xsYXBzZShlZGl0b3IsIHsgZWRnZTogJ2ZvY3VzJyB9KVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlKGVkaXRvciwgeyB1bml0OiAnd29yZCcsIHJldmVyc2U6ICFpc1JUTCB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNNb3ZlV29yZEZvcndhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuY29sbGFwc2UoZWRpdG9yLCB7IGVkZ2U6ICdmb2N1cycgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZShlZGl0b3IsIHsgdW5pdDogJ3dvcmQnLCByZXZlcnNlOiBpc1JUTCB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBDZXJ0YWluIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgdGhlIGBiZWZvcmVpbnB1dGAgZXZlbnQsIHNvIHdlXG4gICAgICAgICAgICAgICAgICAvLyBmYWxsIGJhY2sgdG8gZ3Vlc3NpbmcgYXQgdGhlIGlucHV0IGludGVudGlvbiBmb3IgaG90a2V5cy5cbiAgICAgICAgICAgICAgICAgIC8vIENPTVBBVDogSW4gaU9TLCBzb21lIG9mIHRoZXNlIGhvdGtleXMgYXJlIGhhbmRsZWQgaW4gdGhlXG4gICAgICAgICAgICAgICAgICBpZiAoIUhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCBoYXZlIGEgY29yZSBiZWhhdmlvciBmb3IgdGhlc2UsIGJ1dCB0aGV5IGNoYW5nZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gRE9NIGlmIHdlIGRvbid0IHByZXZlbnQgdGhlbSwgc28gd2UgaGF2ZSB0by5cbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgIEhvdGtleXMuaXNCb2xkKG5hdGl2ZUV2ZW50KSB8fFxuICAgICAgICAgICAgICAgICAgICAgIEhvdGtleXMuaXNJdGFsaWMobmF0aXZlRXZlbnQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgSG90a2V5cy5pc1RyYW5zcG9zZUNoYXJhY3RlcihuYXRpdmVFdmVudClcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNTb2Z0QnJlYWsobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5pbnNlcnRTb2Z0QnJlYWsoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNTcGxpdEJsb2NrKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuaW5zZXJ0QnJlYWsoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNEZWxldGVCYWNrd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvciwgeyBkaXJlY3Rpb246ICdiYWNrd2FyZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzRGVsZXRlRm9yd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvciwgeyBkaXJlY3Rpb246ICdmb3J3YXJkJyB9KVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlRm9yd2FyZChlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc0RlbGV0ZUxpbmVCYWNrd2FyZChuYXRpdmVFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uICYmIFJhbmdlLmlzRXhwYW5kZWQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZyYWdtZW50KGVkaXRvciwgeyBkaXJlY3Rpb246ICdiYWNrd2FyZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgeyB1bml0OiAnbGluZScgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChIb3RrZXlzLmlzRGVsZXRlTGluZUZvcndhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IsIHsgZGlyZWN0aW9uOiAnZm9yd2FyZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUZvcndhcmQoZWRpdG9yLCB7IHVuaXQ6ICdsaW5lJyB9KVxuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKEhvdGtleXMuaXNEZWxldGVXb3JkQmFja3dhcmQobmF0aXZlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBSYW5nZS5pc0V4cGFuZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVGcmFnbWVudChlZGl0b3IsIHsgZGlyZWN0aW9uOiAnYmFja3dhcmQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVCYWNrd2FyZChlZGl0b3IsIHsgdW5pdDogJ3dvcmQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoSG90a2V5cy5pc0RlbGV0ZVdvcmRGb3J3YXJkKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24gJiYgUmFuZ2UuaXNFeHBhbmRlZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3IuZGVsZXRlRnJhZ21lbnQoZWRpdG9yLCB7IGRpcmVjdGlvbjogJ2ZvcndhcmQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5kZWxldGVGb3J3YXJkKGVkaXRvciwgeyB1bml0OiAnd29yZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKElTX0NIUk9NRSB8fCBJU19TQUZBUkkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBDT01QQVQ6IENocm9tZSBhbmQgU2FmYXJpIHN1cHBvcnQgYGJlZm9yZWlucHV0YCBldmVudCBidXQgZG8gbm90IGZpcmVcbiAgICAgICAgICAgICAgICAgICAgICAvLyBhbiBldmVudCB3aGVuIGRlbGV0aW5nIGJhY2t3YXJkcyBpbiBhIHNlbGVjdGVkIHZvaWQgaW5saW5lIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChIb3RrZXlzLmlzRGVsZXRlQmFja3dhcmQobmF0aXZlRXZlbnQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIEhvdGtleXMuaXNEZWxldGVGb3J3YXJkKG5hdGl2ZUV2ZW50KSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIFJhbmdlLmlzQ29sbGFwc2VkKHNlbGVjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROb2RlID0gTm9kZS5wYXJlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLmFuY2hvci5wYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudC5pc0VsZW1lbnQoY3VycmVudE5vZGUpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5pc1ZvaWQoZWRpdG9yLCBjdXJyZW50Tm9kZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKEVkaXRvci5pc0lubGluZShlZGl0b3IsIGN1cnJlbnROb2RlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5pc0Jsb2NrKGVkaXRvciwgY3VycmVudE5vZGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yLmRlbGV0ZUJhY2t3YXJkKGVkaXRvciwgeyB1bml0OiAnYmxvY2snIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbcmVhZE9ubHksIGF0dHJpYnV0ZXMub25LZXlEb3duXVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uUGFzdGU9e3VzZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAoZXZlbnQ6IFJlYWN0LkNsaXBib2FyZEV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFyZWFkT25seSAmJlxuICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaGFzU2VsZWN0YWJsZVRhcmdldChlZGl0b3IsIGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICFpc0V2ZW50SGFuZGxlZChldmVudCwgYXR0cmlidXRlcy5vblBhc3RlKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBDZXJ0YWluIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgdGhlIGBiZWZvcmVpbnB1dGAgZXZlbnQsIHNvIHdlXG4gICAgICAgICAgICAgICAgICAvLyBmYWxsIGJhY2sgdG8gUmVhY3QncyBgb25QYXN0ZWAgaGVyZSBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgICAgLy8gQ09NUEFUOiBGaXJlZm94LCBDaHJvbWUgYW5kIFNhZmFyaSBkb24ndCBlbWl0IGBiZWZvcmVpbnB1dGAgZXZlbnRzXG4gICAgICAgICAgICAgICAgICAvLyB3aGVuIFwicGFzdGUgd2l0aG91dCBmb3JtYXR0aW5nXCIgaXMgdXNlZCwgc28gZmFsbGJhY2suICgyMDIwLzAyLzIwKVxuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAhSEFTX0JFRk9SRV9JTlBVVF9TVVBQT1JUIHx8XG4gICAgICAgICAgICAgICAgICAgIGlzUGxhaW5UZXh0T25seVBhc3RlKGV2ZW50Lm5hdGl2ZUV2ZW50KVxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgUmVhY3RFZGl0b3IuaW5zZXJ0RGF0YShlZGl0b3IsIGV2ZW50LmNsaXBib2FyZERhdGEpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBbcmVhZE9ubHksIGF0dHJpYnV0ZXMub25QYXN0ZV1cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPENoaWxkcmVuXG4gICAgICAgICAgICAgIGRlY29yYXRpb25zPXtkZWNvcmF0aW9uc31cbiAgICAgICAgICAgICAgbm9kZT17ZWRpdG9yfVxuICAgICAgICAgICAgICByZW5kZXJFbGVtZW50PXtyZW5kZXJFbGVtZW50fVxuICAgICAgICAgICAgICByZW5kZXJQbGFjZWhvbGRlcj17cmVuZGVyUGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICAgIHJlbmRlckxlYWY9e3JlbmRlckxlYWZ9XG4gICAgICAgICAgICAgIHNlbGVjdGlvbj17ZWRpdG9yLnNlbGVjdGlvbn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9Db21wb25lbnQ+XG4gICAgICAgIDwvUmVzdG9yZURPTT5cbiAgICAgIDwvRGVjb3JhdGVDb250ZXh0LlByb3ZpZGVyPlxuICAgIDwvUmVhZE9ubHlDb250ZXh0LlByb3ZpZGVyPlxuICApXG59XG5cbi8qKlxuICogVGhlIHByb3BzIHRoYXQgZ2V0IHBhc3NlZCB0byByZW5kZXJQbGFjZWhvbGRlclxuICovXG5leHBvcnQgdHlwZSBSZW5kZXJQbGFjZWhvbGRlclByb3BzID0ge1xuICBjaGlsZHJlbjogYW55XG4gIGF0dHJpYnV0ZXM6IHtcbiAgICAnZGF0YS1zbGF0ZS1wbGFjZWhvbGRlcic6IGJvb2xlYW5cbiAgICBkaXI/OiAncnRsJ1xuICAgIGNvbnRlbnRFZGl0YWJsZTogYm9vbGVhblxuICAgIHJlZjogUmVhY3QuUmVmT2JqZWN0PGFueT5cbiAgICBzdHlsZTogUmVhY3QuQ1NTUHJvcGVydGllc1xuICB9XG59XG5cbi8qKlxuICogVGhlIGRlZmF1bHQgcGxhY2Vob2xkZXIgZWxlbWVudFxuICovXG5cbmV4cG9ydCBjb25zdCBEZWZhdWx0UGxhY2Vob2xkZXIgPSAoe1xuICBhdHRyaWJ1dGVzLFxuICBjaGlsZHJlbixcbn06IFJlbmRlclBsYWNlaG9sZGVyUHJvcHMpID0+IChcbiAgLy8gQ09NUEFUOiBBcnRpZmljaWFsbHkgYWRkIGEgbGluZS1icmVhayB0byB0aGUgZW5kIG9uIHRoZSBwbGFjZWhvbGRlciBlbGVtZW50XG4gIC8vIHRvIHByZXZlbnQgQW5kcm9pZCBJTUVzIHRvIHBpY2sgdXAgaXRzIGNvbnRlbnQgaW4gYXV0b2NvcnJlY3QgYW5kIHRvIGF1dG8tY2FwaXRhbGl6ZSB0aGUgZmlyc3QgbGV0dGVyXG4gIDxzcGFuIHsuLi5hdHRyaWJ1dGVzfT5cbiAgICB7Y2hpbGRyZW59XG4gICAge0lTX0FORFJPSUQgJiYgPGJyIC8+fVxuICA8L3NwYW4+XG4pXG5cbi8qKlxuICogQSBkZWZhdWx0IG1lbW9pemVkIGRlY29yYXRlIGZ1bmN0aW9uLlxuICovXG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0RGVjb3JhdGU6IChlbnRyeTogTm9kZUVudHJ5KSA9PiBSYW5nZVtdID0gKCkgPT4gW11cblxuLyoqXG4gKiBBIGRlZmF1bHQgaW1wbGVtZW50IHRvIHNjcm9sbCBkb20gcmFuZ2UgaW50byB2aWV3LlxuICovXG5cbmNvbnN0IGRlZmF1bHRTY3JvbGxTZWxlY3Rpb25JbnRvVmlldyA9IChcbiAgZWRpdG9yOiBSZWFjdEVkaXRvcixcbiAgZG9tUmFuZ2U6IERPTVJhbmdlXG4pID0+IHtcbiAgLy8gVGhpcyB3YXMgYWZmZWN0aW5nIHRoZSBzZWxlY3Rpb24gb2YgbXVsdGlwbGUgYmxvY2tzIGFuZCBkcmFnZ2luZyBiZWhhdmlvcixcbiAgLy8gc28gZW5hYmxlZCBvbmx5IGlmIHRoZSBzZWxlY3Rpb24gaGFzIGJlZW4gY29sbGFwc2VkLlxuICBpZiAoXG4gICAgZG9tUmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICYmXG4gICAgKCFlZGl0b3Iuc2VsZWN0aW9uIHx8XG4gICAgICAoZWRpdG9yLnNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChlZGl0b3Iuc2VsZWN0aW9uKSkpXG4gICkge1xuICAgIGNvbnN0IGxlYWZFbCA9IGRvbVJhbmdlLnN0YXJ0Q29udGFpbmVyLnBhcmVudEVsZW1lbnQhXG4gICAgbGVhZkVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCA9IGRvbVJhbmdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdC5iaW5kKGRvbVJhbmdlKVxuICAgIHNjcm9sbEludG9WaWV3KGxlYWZFbCwge1xuICAgICAgc2Nyb2xsTW9kZTogJ2lmLW5lZWRlZCcsXG4gICAgfSlcblxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgYW4gdW5vcnRob2RveCBkZWxldGUgRDpcbiAgICBkZWxldGUgbGVhZkVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdFxuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZXZlbnQgaXMgb3ZlcnJpZGVkIGJ5IGEgaGFuZGxlci5cbiAqL1xuXG5leHBvcnQgY29uc3QgaXNFdmVudEhhbmRsZWQgPSA8XG4gIEV2ZW50VHlwZSBleHRlbmRzIFJlYWN0LlN5bnRoZXRpY0V2ZW50PHVua25vd24sIHVua25vd24+XG4+KFxuICBldmVudDogRXZlbnRUeXBlLFxuICBoYW5kbGVyPzogKGV2ZW50OiBFdmVudFR5cGUpID0+IHZvaWQgfCBib29sZWFuXG4pID0+IHtcbiAgaWYgKCFoYW5kbGVyKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgLy8gVGhlIGN1c3RvbSBldmVudCBoYW5kbGVyIG1heSByZXR1cm4gYSBib29sZWFuIHRvIHNwZWNpZnkgd2hldGhlciB0aGUgZXZlbnRcbiAgLy8gc2hhbGwgYmUgdHJlYXRlZCBhcyBiZWluZyBoYW5kbGVkIG9yIG5vdC5cbiAgY29uc3Qgc2hvdWxkVHJlYXRFdmVudEFzSGFuZGxlZCA9IGhhbmRsZXIoZXZlbnQpXG5cbiAgaWYgKHNob3VsZFRyZWF0RXZlbnRBc0hhbmRsZWQgIT0gbnVsbCkge1xuICAgIHJldHVybiBzaG91bGRUcmVhdEV2ZW50QXNIYW5kbGVkXG4gIH1cblxuICByZXR1cm4gZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgRE9NIGV2ZW50IGlzIG92ZXJyaWRlZCBieSBhIGhhbmRsZXIuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGlzRE9NRXZlbnRIYW5kbGVkID0gPEUgZXh0ZW5kcyBFdmVudD4oXG4gIGV2ZW50OiBFLFxuICBoYW5kbGVyPzogKGV2ZW50OiBFKSA9PiB2b2lkIHwgYm9vbGVhblxuKSA9PiB7XG4gIGlmICghaGFuZGxlcikge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLy8gVGhlIGN1c3RvbSBldmVudCBoYW5kbGVyIG1heSByZXR1cm4gYSBib29sZWFuIHRvIHNwZWNpZnkgd2hldGhlciB0aGUgZXZlbnRcbiAgLy8gc2hhbGwgYmUgdHJlYXRlZCBhcyBiZWluZyBoYW5kbGVkIG9yIG5vdC5cbiAgY29uc3Qgc2hvdWxkVHJlYXRFdmVudEFzSGFuZGxlZCA9IGhhbmRsZXIoZXZlbnQpXG5cbiAgaWYgKHNob3VsZFRyZWF0RXZlbnRBc0hhbmRsZWQgIT0gbnVsbCkge1xuICAgIHJldHVybiBzaG91bGRUcmVhdEV2ZW50QXNIYW5kbGVkXG4gIH1cblxuICByZXR1cm4gZXZlbnQuZGVmYXVsdFByZXZlbnRlZFxufVxuIiwgImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCdcblxuLyoqXG4gKiBBIFJlYWN0IGNvbnRleHQgZm9yIHNoYXJpbmcgdGhlIGBmb2N1c2VkYCBzdGF0ZSBvZiB0aGUgZWRpdG9yLlxuICovXG5cbmV4cG9ydCBjb25zdCBGb2N1c2VkQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoZmFsc2UpXG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGBmb2N1c2VkYCBzdGF0ZSBvZiB0aGUgZWRpdG9yLlxuICovXG5cbmV4cG9ydCBjb25zdCB1c2VGb2N1c2VkID0gKCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gdXNlQ29udGV4dChGb2N1c2VkQ29udGV4dClcbn1cbiIsICJpbXBvcnQge1xuICBjcmVhdGVDb250ZXh0LFxuICB1c2VDYWxsYmFjayxcbiAgdXNlQ29udGV4dCxcbiAgdXNlTWVtbyxcbiAgdXNlUmVkdWNlcixcbiAgdXNlUmVmLFxufSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJ3NsYXRlJ1xuaW1wb3J0IHsgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCB9IGZyb20gJy4vdXNlLWlzb21vcnBoaWMtbGF5b3V0LWVmZmVjdCdcblxuZnVuY3Rpb24gaXNFcnJvcihlcnJvcjogYW55KTogZXJyb3IgaXMgRXJyb3Ige1xuICByZXR1cm4gZXJyb3IgaW5zdGFuY2VvZiBFcnJvclxufVxuXG50eXBlIEVkaXRvckNoYW5nZUhhbmRsZXIgPSAoZWRpdG9yOiBFZGl0b3IpID0+IHZvaWRcbi8qKlxuICogQSBSZWFjdCBjb250ZXh0IGZvciBzaGFyaW5nIHRoZSBlZGl0b3Igc2VsZWN0b3IgY29udGV4dCBpbiBhIHdheSB0byBjb250cm9sIHJlcmVuZGVyc1xuICovXG5cbmV4cG9ydCBjb25zdCBTbGF0ZVNlbGVjdG9yQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8e1xuICBnZXRTbGF0ZTogKCkgPT4gRWRpdG9yXG4gIGFkZEV2ZW50TGlzdGVuZXI6IChjYWxsYmFjazogRWRpdG9yQ2hhbmdlSGFuZGxlcikgPT4gKCkgPT4gdm9pZFxufT4oe30gYXMgYW55KVxuXG5jb25zdCByZWZFcXVhbGl0eSA9IChhOiBhbnksIGI6IGFueSkgPT4gYSA9PT0gYlxuXG4vKipcbiAqIHVzZSByZWR1eCBzdHlsZSBzZWxlY3RvcnMgdG8gcHJldmVudCByZXJlbmRlcmluZyBvbiBldmVyeSBrZXlzdHJva2UuXG4gKiBCZWFyIGluIG1pbmQgcmVyZW5kZXJpbmcgY2FuIG9ubHkgcHJldmVudGVkIGlmIHRoZSByZXR1cm5lZCB2YWx1ZSBpcyBhIHZhbHVlIHR5cGUgb3IgZm9yIHJlZmVyZW5jZSB0eXBlcyAoZS5nLiBvYmplY3RzIGFuZCBhcnJheXMpIGFkZCBhIGN1c3RvbSBlcXVhbGl0eSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICogYGBgXG4gKiAgY29uc3QgaXNTZWxlY3Rpb25BY3RpdmUgPSB1c2VTbGF0ZVNlbGVjdG9yKGVkaXRvciA9PiBCb29sZWFuKGVkaXRvci5zZWxlY3Rpb24pKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlU2xhdGVTZWxlY3RvcjxUPihcbiAgc2VsZWN0b3I6IChlZGl0b3I6IEVkaXRvcikgPT4gVCxcbiAgZXF1YWxpdHlGbjogKGE6IFQsIGI6IFQpID0+IGJvb2xlYW4gPSByZWZFcXVhbGl0eVxuKSB7XG4gIGNvbnN0IFssIGZvcmNlUmVuZGVyXSA9IHVzZVJlZHVjZXIocyA9PiBzICsgMSwgMClcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoU2xhdGVTZWxlY3RvckNvbnRleHQpXG4gIGlmICghY29udGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgXFxgdXNlU2xhdGVTZWxlY3RvclxcYCBob29rIG11c3QgYmUgdXNlZCBpbnNpZGUgdGhlIDxTbGF0ZT4gY29tcG9uZW50J3MgY29udGV4dC5gXG4gICAgKVxuICB9XG4gIGNvbnN0IHsgZ2V0U2xhdGUsIGFkZEV2ZW50TGlzdGVuZXIgfSA9IGNvbnRleHRcblxuICBjb25zdCBsYXRlc3RTdWJzY3JpcHRpb25DYWxsYmFja0Vycm9yID0gdXNlUmVmPEVycm9yIHwgdW5kZWZpbmVkPigpXG4gIGNvbnN0IGxhdGVzdFNlbGVjdG9yID0gdXNlUmVmPChlZGl0b3I6IEVkaXRvcikgPT4gVD4oKCkgPT4gbnVsbCBhcyBhbnkpXG4gIGNvbnN0IGxhdGVzdFNlbGVjdGVkU3RhdGUgPSB1c2VSZWY8VD4oKG51bGwgYXMgYW55KSBhcyBUKVxuICBsZXQgc2VsZWN0ZWRTdGF0ZTogVFxuXG4gIHRyeSB7XG4gICAgaWYgKFxuICAgICAgc2VsZWN0b3IgIT09IGxhdGVzdFNlbGVjdG9yLmN1cnJlbnQgfHxcbiAgICAgIGxhdGVzdFN1YnNjcmlwdGlvbkNhbGxiYWNrRXJyb3IuY3VycmVudFxuICAgICkge1xuICAgICAgc2VsZWN0ZWRTdGF0ZSA9IHNlbGVjdG9yKGdldFNsYXRlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGVjdGVkU3RhdGUgPSBsYXRlc3RTZWxlY3RlZFN0YXRlLmN1cnJlbnRcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChsYXRlc3RTdWJzY3JpcHRpb25DYWxsYmFja0Vycm9yLmN1cnJlbnQgJiYgaXNFcnJvcihlcnIpKSB7XG4gICAgICBlcnIubWVzc2FnZSArPSBgXFxuVGhlIGVycm9yIG1heSBiZSBjb3JyZWxhdGVkIHdpdGggdGhpcyBwcmV2aW91cyBlcnJvcjpcXG4ke2xhdGVzdFN1YnNjcmlwdGlvbkNhbGxiYWNrRXJyb3IuY3VycmVudC5zdGFja31cXG5cXG5gXG4gICAgfVxuXG4gICAgdGhyb3cgZXJyXG4gIH1cbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgbGF0ZXN0U2VsZWN0b3IuY3VycmVudCA9IHNlbGVjdG9yXG4gICAgbGF0ZXN0U2VsZWN0ZWRTdGF0ZS5jdXJyZW50ID0gc2VsZWN0ZWRTdGF0ZVxuICAgIGxhdGVzdFN1YnNjcmlwdGlvbkNhbGxiYWNrRXJyb3IuY3VycmVudCA9IHVuZGVmaW5lZFxuICB9KVxuXG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoXG4gICAgKCkgPT4ge1xuICAgICAgZnVuY3Rpb24gY2hlY2tGb3JVcGRhdGVzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IG5ld1NlbGVjdGVkU3RhdGUgPSBsYXRlc3RTZWxlY3Rvci5jdXJyZW50KGdldFNsYXRlKCkpXG5cbiAgICAgICAgICBpZiAoZXF1YWxpdHlGbihuZXdTZWxlY3RlZFN0YXRlLCBsYXRlc3RTZWxlY3RlZFN0YXRlLmN1cnJlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsYXRlc3RTZWxlY3RlZFN0YXRlLmN1cnJlbnQgPSBuZXdTZWxlY3RlZFN0YXRlXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIC8vIHdlIGlnbm9yZSBhbGwgZXJyb3JzIGhlcmUsIHNpbmNlIHdoZW4gdGhlIGNvbXBvbmVudFxuICAgICAgICAgIC8vIGlzIHJlLXJlbmRlcmVkLCB0aGUgc2VsZWN0b3JzIGFyZSBjYWxsZWQgYWdhaW4sIGFuZFxuICAgICAgICAgIC8vIHdpbGwgdGhyb3cgYWdhaW4sIGlmIG5laXRoZXIgcHJvcHMgbm9yIHN0b3JlIHN0YXRlXG4gICAgICAgICAgLy8gY2hhbmdlZFxuICAgICAgICAgIGxhdGVzdFN1YnNjcmlwdGlvbkNhbGxiYWNrRXJyb3IuY3VycmVudCA9IGVyclxuICAgICAgICB9XG5cbiAgICAgICAgZm9yY2VSZW5kZXIoKVxuICAgICAgfVxuXG4gICAgICBjb25zdCB1bnN1YnNjcmliZSA9IGFkZEV2ZW50TGlzdGVuZXIoY2hlY2tGb3JVcGRhdGVzKVxuXG4gICAgICBjaGVja0ZvclVwZGF0ZXMoKVxuXG4gICAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKVxuICAgIH0sXG4gICAgLy8gZG9uJ3QgcmVyZW5kZXIgb24gZXF1YWxpdHlGbiBjaGFuZ2Ugc2luY2Ugd2Ugd2FudCB0byBiZSBhYmxlIHRvIGRlZmluZSBpdCBpbmxpbmVcbiAgICBbYWRkRXZlbnRMaXN0ZW5lciwgZ2V0U2xhdGVdXG4gIClcblxuICByZXR1cm4gc2VsZWN0ZWRTdGF0ZVxufVxuXG4vKipcbiAqIENyZWF0ZSBzZWxlY3RvciBjb250ZXh0IHdpdGggZWRpdG9yIHVwZGF0aW5nIG9uIGV2ZXJ5IGVkaXRvciBjaGFuZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlbGVjdG9yQ29udGV4dChlZGl0b3I6IEVkaXRvcikge1xuICBjb25zdCBldmVudExpc3RlbmVycyA9IHVzZVJlZjxFZGl0b3JDaGFuZ2VIYW5kbGVyW10+KFtdKS5jdXJyZW50XG4gIGNvbnN0IHNsYXRlUmVmID0gdXNlUmVmPHtcbiAgICBlZGl0b3I6IEVkaXRvclxuICB9Pih7XG4gICAgZWRpdG9yLFxuICB9KS5jdXJyZW50XG4gIGNvbnN0IG9uQ2hhbmdlID0gdXNlQ2FsbGJhY2soKGVkaXRvcjogRWRpdG9yKSA9PiB7XG4gICAgc2xhdGVSZWYuZWRpdG9yID0gZWRpdG9yXG4gICAgZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXI6IEVkaXRvckNoYW5nZUhhbmRsZXIpID0+IGxpc3RlbmVyKGVkaXRvcikpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IHNlbGVjdG9yQ29udGV4dCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBnZXRTbGF0ZTogKCkgPT4gc2xhdGVSZWYuZWRpdG9yLFxuICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogKGNhbGxiYWNrOiBFZGl0b3JDaGFuZ2VIYW5kbGVyKSA9PiB7XG4gICAgICAgIGV2ZW50TGlzdGVuZXJzLnB1c2goY2FsbGJhY2spXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgZXZlbnRMaXN0ZW5lcnMuc3BsaWNlKGV2ZW50TGlzdGVuZXJzLmluZGV4T2YoY2FsbGJhY2spLCAxKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgIH1cbiAgfSwgW2V2ZW50TGlzdGVuZXJzLCBzbGF0ZVJlZl0pXG4gIHJldHVybiB7IHNlbGVjdG9yQ29udGV4dCwgb25DaGFuZ2UgfVxufVxuIiwgImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBFZGl0b3IsIE5vZGUsIERlc2NlbmRhbnQsIFNjcnViYmVyIH0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4uL3BsdWdpbi9yZWFjdC1lZGl0b3InXG5pbXBvcnQgeyBGb2N1c2VkQ29udGV4dCB9IGZyb20gJy4uL2hvb2tzL3VzZS1mb2N1c2VkJ1xuaW1wb3J0IHsgRWRpdG9yQ29udGV4dCB9IGZyb20gJy4uL2hvb2tzL3VzZS1zbGF0ZS1zdGF0aWMnXG5pbXBvcnQgeyBTbGF0ZUNvbnRleHQsIFNsYXRlQ29udGV4dFZhbHVlIH0gZnJvbSAnLi4vaG9va3MvdXNlLXNsYXRlJ1xuaW1wb3J0IHtcbiAgZ2V0U2VsZWN0b3JDb250ZXh0LFxuICBTbGF0ZVNlbGVjdG9yQ29udGV4dCxcbn0gZnJvbSAnLi4vaG9va3MvdXNlLXNsYXRlLXNlbGVjdG9yJ1xuaW1wb3J0IHsgRURJVE9SX1RPX09OX0NIQU5HRSB9IGZyb20gJy4uL3V0aWxzL3dlYWstbWFwcydcbmltcG9ydCB7IElTX1JFQUNUX1ZFUlNJT05fMTdfT1JfQUJPVkUgfSBmcm9tICcuLi91dGlscy9lbnZpcm9ubWVudCdcbmltcG9ydCB7IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgfSBmcm9tICcuLi9ob29rcy91c2UtaXNvbW9ycGhpYy1sYXlvdXQtZWZmZWN0J1xuXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgdGhlIHByb3ZpZGVyIHRvIGhhbmRsZSBgb25DaGFuZ2VgIGV2ZW50cywgYmVjYXVzZSB0aGUgZWRpdG9yXG4gKiBpcyBhIG11dGFibGUgc2luZ2xldG9uIHNvIGl0IHdvbid0IGV2ZXIgcmVnaXN0ZXIgYXMgXCJjaGFuZ2VkXCIgb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBjb25zdCBTbGF0ZSA9IChwcm9wczoge1xuICBlZGl0b3I6IFJlYWN0RWRpdG9yXG4gIHZhbHVlOiBEZXNjZW5kYW50W11cbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZVxuICBvbkNoYW5nZT86ICh2YWx1ZTogRGVzY2VuZGFudFtdKSA9PiB2b2lkXG59KSA9PiB7XG4gIGNvbnN0IHsgZWRpdG9yLCBjaGlsZHJlbiwgb25DaGFuZ2UsIHZhbHVlLCAuLi5yZXN0IH0gPSBwcm9wc1xuICBjb25zdCB1bm1vdW50UmVmID0gdXNlUmVmKGZhbHNlKVxuXG4gIGNvbnN0IFtjb250ZXh0LCBzZXRDb250ZXh0XSA9IFJlYWN0LnVzZVN0YXRlPFNsYXRlQ29udGV4dFZhbHVlPigoKSA9PiB7XG4gICAgaWYgKCFOb2RlLmlzTm9kZUxpc3QodmFsdWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBbU2xhdGVdIHZhbHVlIGlzIGludmFsaWQhIEV4cGVjdGVkIGEgbGlzdCBvZiBlbGVtZW50cyBidXQgZ290OiAke1NjcnViYmVyLnN0cmluZ2lmeShcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICApfWBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKCFFZGl0b3IuaXNFZGl0b3IoZWRpdG9yKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgW1NsYXRlXSBlZGl0b3IgaXMgaW52YWxpZCEgWW91IHBhc3NlZDogJHtTY3J1YmJlci5zdHJpbmdpZnkoZWRpdG9yKX1gXG4gICAgICApXG4gICAgfVxuICAgIGVkaXRvci5jaGlsZHJlbiA9IHZhbHVlXG4gICAgT2JqZWN0LmFzc2lnbihlZGl0b3IsIHJlc3QpXG4gICAgcmV0dXJuIHsgdjogMCwgZWRpdG9yIH1cbiAgfSlcblxuICBjb25zdCB7XG4gICAgc2VsZWN0b3JDb250ZXh0LFxuICAgIG9uQ2hhbmdlOiBoYW5kbGVTZWxlY3RvckNoYW5nZSxcbiAgfSA9IGdldFNlbGVjdG9yQ29udGV4dChlZGl0b3IpXG5cbiAgY29uc3Qgb25Db250ZXh0Q2hhbmdlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChvbkNoYW5nZSkge1xuICAgICAgb25DaGFuZ2UoZWRpdG9yLmNoaWxkcmVuKVxuICAgIH1cblxuICAgIHNldENvbnRleHQocHJldkNvbnRleHQgPT4gKHtcbiAgICAgIHY6IHByZXZDb250ZXh0LnYgKyAxLFxuICAgICAgZWRpdG9yLFxuICAgIH0pKVxuICAgIGhhbmRsZVNlbGVjdG9yQ2hhbmdlKGVkaXRvcilcbiAgfSwgW29uQ2hhbmdlXSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIEVESVRPUl9UT19PTl9DSEFOR0Uuc2V0KGVkaXRvciwgb25Db250ZXh0Q2hhbmdlKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIEVESVRPUl9UT19PTl9DSEFOR0Uuc2V0KGVkaXRvciwgKCkgPT4ge30pXG4gICAgICB1bm1vdW50UmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCBbaXNGb2N1c2VkLCBzZXRJc0ZvY3VzZWRdID0gdXNlU3RhdGUoUmVhY3RFZGl0b3IuaXNGb2N1c2VkKGVkaXRvcikpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRJc0ZvY3VzZWQoUmVhY3RFZGl0b3IuaXNGb2N1c2VkKGVkaXRvcikpXG4gIH0pXG5cbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZm4gPSAoKSA9PiBzZXRJc0ZvY3VzZWQoUmVhY3RFZGl0b3IuaXNGb2N1c2VkKGVkaXRvcikpXG4gICAgaWYgKElTX1JFQUNUX1ZFUlNJT05fMTdfT1JfQUJPVkUpIHtcbiAgICAgIC8vIEluIFJlYWN0ID49IDE3IG9uRm9jdXMgYW5kIG9uQmx1ciBsaXN0ZW4gdG8gdGhlIGZvY3VzaW4gYW5kIGZvY3Vzb3V0IGV2ZW50cyBkdXJpbmcgdGhlIGJ1YmJsaW5nIHBoYXNlLlxuICAgICAgLy8gVGhlcmVmb3JlIGluIG9yZGVyIGZvciA8RWRpdGFibGUgLz4ncyBoYW5kbGVycyB0byBydW4gZmlyc3QsIHdoaWNoIGlzIG5lY2Vzc2FyeSBmb3IgUmVhY3RFZGl0b3IuaXNGb2N1c2VkKGVkaXRvcilcbiAgICAgIC8vIHRvIHJldHVybiB0aGUgY29ycmVjdCB2YWx1ZSwgd2UgaGF2ZSB0byBsaXN0ZW4gdG8gdGhlIGZvY3VzaW4gYW5kIGZvY3Vzb3V0IGV2ZW50cyB3aXRob3V0IHVzZUNhcHR1cmUgaGVyZS5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBmbilcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgZm4pXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgZm4pXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgZm4pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZm4sIHRydWUpXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZm4sIHRydWUpXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIGZuLCB0cnVlKVxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgZm4sIHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9LCBbXSlcblxuICByZXR1cm4gKFxuICAgIDxTbGF0ZVNlbGVjdG9yQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17c2VsZWN0b3JDb250ZXh0fT5cbiAgICAgIDxTbGF0ZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHR9PlxuICAgICAgICA8RWRpdG9yQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17Y29udGV4dC5lZGl0b3J9PlxuICAgICAgICAgIDxGb2N1c2VkQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17aXNGb2N1c2VkfT5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8L0ZvY3VzZWRDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgICA8L0VkaXRvckNvbnRleHQuUHJvdmlkZXI+XG4gICAgICA8L1NsYXRlQ29udGV4dC5Qcm92aWRlcj5cbiAgICA8L1NsYXRlU2VsZWN0b3JDb250ZXh0LlByb3ZpZGVyPlxuICApXG59XG4iLCAiaW1wb3J0IHsgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0J1xuXG5pbXBvcnQgeyBFZGl0b3JDb250ZXh0IH0gZnJvbSAnLi91c2Utc2xhdGUtc3RhdGljJ1xuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBlZGl0b3Igb2JqZWN0IGZyb20gdGhlIFJlYWN0IGNvbnRleHQuXG4gKiBAZGVwcmVjYXRlZCBVc2UgdXNlU2xhdGVTdGF0aWMgaW5zdGVhZC5cbiAqL1xuXG5leHBvcnQgY29uc3QgdXNlRWRpdG9yID0gKCkgPT4ge1xuICBjb25zdCBlZGl0b3IgPSB1c2VDb250ZXh0KEVkaXRvckNvbnRleHQpXG5cbiAgaWYgKCFlZGl0b3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVGhlIFxcYHVzZUVkaXRvclxcYCBob29rIG11c3QgYmUgdXNlZCBpbnNpZGUgdGhlIDxTbGF0ZT4gY29tcG9uZW50J3MgY29udGV4dC5gXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGVkaXRvclxufVxuIiwgImltcG9ydCB7IEJhc2VTZWxlY3Rpb24sIFJhbmdlIH0gZnJvbSAnc2xhdGUnXG5cbmltcG9ydCB7IHVzZVNsYXRlU2VsZWN0b3IgfSBmcm9tICcuL3VzZS1zbGF0ZS1zZWxlY3RvcidcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgc2xhdGUgc2VsZWN0aW9uLlxuICogT25seSB0cmlnZ2VycyBhIHJlcmVuZGVyIHdoZW4gdGhlIHNlbGVjdGlvbiBhY3R1YWxseSBjaGFuZ2VzXG4gKi9cbmV4cG9ydCBjb25zdCB1c2VTbGF0ZVNlbGVjdGlvbiA9ICgpID0+IHtcbiAgcmV0dXJuIHVzZVNsYXRlU2VsZWN0b3IoZWRpdG9yID0+IGVkaXRvci5zZWxlY3Rpb24sIGlzU2VsZWN0aW9uRXF1YWwpXG59XG5cbmNvbnN0IGlzU2VsZWN0aW9uRXF1YWwgPSAoYTogQmFzZVNlbGVjdGlvbiwgYjogQmFzZVNlbGVjdGlvbikgPT4ge1xuICBpZiAoIWEgJiYgIWIpIHJldHVybiB0cnVlXG4gIGlmICghYSB8fCAhYikgcmV0dXJuIGZhbHNlXG4gIHJldHVybiBSYW5nZS5lcXVhbHMoYSwgYilcbn1cbiIsICIvKipcbiAqIFV0aWxpdGllcyBmb3Igc2luZ2xlLWxpbmUgZGVsZXRpb25cbiAqL1xuXG5pbXBvcnQgeyBSYW5nZSwgRWRpdG9yIH0gZnJvbSAnc2xhdGUnXG5pbXBvcnQgeyBSZWFjdEVkaXRvciB9IGZyb20gJy4uL3BsdWdpbi9yZWFjdC1lZGl0b3InXG5cbmNvbnN0IGRvUmVjdHNJbnRlcnNlY3QgPSAocmVjdDogRE9NUmVjdCwgY29tcGFyZVJlY3Q6IERPTVJlY3QpID0+IHtcbiAgY29uc3QgbWlkZGxlID0gKGNvbXBhcmVSZWN0LnRvcCArIGNvbXBhcmVSZWN0LmJvdHRvbSkgLyAyXG5cbiAgcmV0dXJuIHJlY3QudG9wIDw9IG1pZGRsZSAmJiByZWN0LmJvdHRvbSA+PSBtaWRkbGVcbn1cblxuY29uc3QgYXJlUmFuZ2VzU2FtZUxpbmUgPSAoXG4gIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gIHJhbmdlMTogUmFuZ2UsXG4gIHJhbmdlMjogUmFuZ2VcbikgPT4ge1xuICBjb25zdCByZWN0MSA9IFJlYWN0RWRpdG9yLnRvRE9NUmFuZ2UoZWRpdG9yLCByYW5nZTEpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gIGNvbnN0IHJlY3QyID0gUmVhY3RFZGl0b3IudG9ET01SYW5nZShlZGl0b3IsIHJhbmdlMikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuICByZXR1cm4gZG9SZWN0c0ludGVyc2VjdChyZWN0MSwgcmVjdDIpICYmIGRvUmVjdHNJbnRlcnNlY3QocmVjdDIsIHJlY3QxKVxufVxuXG4vKipcbiAqIEEgaGVscGVyIHV0aWxpdHkgdGhhdCByZXR1cm5zIHRoZSBlbmQgcG9ydGlvbiBvZiBhIGBSYW5nZWBcbiAqIHdoaWNoIGlzIGxvY2F0ZWQgb24gYSBzaW5nbGUgbGluZS5cbiAqXG4gKiBAcGFyYW0ge0VkaXRvcn0gZWRpdG9yIFRoZSBlZGl0b3Igb2JqZWN0IHRvIGNvbXBhcmUgYWdhaW5zdFxuICogQHBhcmFtIHtSYW5nZX0gcGFyZW50UmFuZ2UgVGhlIHBhcmVudCByYW5nZSB0byBjb21wYXJlIGFnYWluc3RcbiAqIEByZXR1cm5zIHtSYW5nZX0gQSB2YWxpZCBwb3J0aW9uIG9mIHRoZSBwYXJlbnRSYW5nZSB3aGljaCBpcyBvbmUgYSBzaW5nbGUgbGluZVxuICovXG5leHBvcnQgY29uc3QgZmluZEN1cnJlbnRMaW5lUmFuZ2UgPSAoXG4gIGVkaXRvcjogUmVhY3RFZGl0b3IsXG4gIHBhcmVudFJhbmdlOiBSYW5nZVxuKTogUmFuZ2UgPT4ge1xuICBjb25zdCBwYXJlbnRSYW5nZUJvdW5kYXJ5ID0gRWRpdG9yLnJhbmdlKGVkaXRvciwgUmFuZ2UuZW5kKHBhcmVudFJhbmdlKSlcbiAgY29uc3QgcG9zaXRpb25zID0gQXJyYXkuZnJvbShFZGl0b3IucG9zaXRpb25zKGVkaXRvciwgeyBhdDogcGFyZW50UmFuZ2UgfSkpXG5cbiAgbGV0IGxlZnQgPSAwXG4gIGxldCByaWdodCA9IHBvc2l0aW9ucy5sZW5ndGhcbiAgbGV0IG1pZGRsZSA9IE1hdGguZmxvb3IocmlnaHQgLyAyKVxuXG4gIGlmIChcbiAgICBhcmVSYW5nZXNTYW1lTGluZShcbiAgICAgIGVkaXRvcixcbiAgICAgIEVkaXRvci5yYW5nZShlZGl0b3IsIHBvc2l0aW9uc1tsZWZ0XSksXG4gICAgICBwYXJlbnRSYW5nZUJvdW5kYXJ5XG4gICAgKVxuICApIHtcbiAgICByZXR1cm4gRWRpdG9yLnJhbmdlKGVkaXRvciwgcG9zaXRpb25zW2xlZnRdLCBwYXJlbnRSYW5nZUJvdW5kYXJ5KVxuICB9XG5cbiAgaWYgKHBvc2l0aW9ucy5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIEVkaXRvci5yYW5nZShcbiAgICAgIGVkaXRvcixcbiAgICAgIHBvc2l0aW9uc1twb3NpdGlvbnMubGVuZ3RoIC0gMV0sXG4gICAgICBwYXJlbnRSYW5nZUJvdW5kYXJ5XG4gICAgKVxuICB9XG5cbiAgd2hpbGUgKG1pZGRsZSAhPT0gcG9zaXRpb25zLmxlbmd0aCAmJiBtaWRkbGUgIT09IGxlZnQpIHtcbiAgICBpZiAoXG4gICAgICBhcmVSYW5nZXNTYW1lTGluZShcbiAgICAgICAgZWRpdG9yLFxuICAgICAgICBFZGl0b3IucmFuZ2UoZWRpdG9yLCBwb3NpdGlvbnNbbWlkZGxlXSksXG4gICAgICAgIHBhcmVudFJhbmdlQm91bmRhcnlcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHJpZ2h0ID0gbWlkZGxlXG4gICAgfSBlbHNlIHtcbiAgICAgIGxlZnQgPSBtaWRkbGVcbiAgICB9XG5cbiAgICBtaWRkbGUgPSBNYXRoLmZsb29yKChsZWZ0ICsgcmlnaHQpIC8gMilcbiAgfVxuXG4gIHJldHVybiBFZGl0b3IucmFuZ2UoZWRpdG9yLCBwb3NpdGlvbnNbcmlnaHRdLCBwYXJlbnRSYW5nZUJvdW5kYXJ5KVxufVxuIiwgImltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nXG5pbXBvcnQge1xuICBCYXNlRWRpdG9yLFxuICBFZGl0b3IsXG4gIE5vZGUsXG4gIE9wZXJhdGlvbixcbiAgUGF0aCxcbiAgUG9pbnQsXG4gIFJhbmdlLFxuICBUcmFuc2Zvcm1zLFxuICBFbGVtZW50LFxufSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7XG4gIFRleHREaWZmLFxuICB0cmFuc2Zvcm1QZW5kaW5nUG9pbnQsXG4gIHRyYW5zZm9ybVBlbmRpbmdSYW5nZSxcbiAgdHJhbnNmb3JtVGV4dERpZmYsXG59IGZyb20gJy4uL3V0aWxzL2RpZmYtdGV4dCdcbmltcG9ydCB7XG4gIGdldFBsYWluVGV4dCxcbiAgZ2V0U2xhdGVGcmFnbWVudEF0dHJpYnV0ZSxcbiAgaXNET01UZXh0LFxufSBmcm9tICcuLi91dGlscy9kb20nXG5pbXBvcnQgeyBLZXkgfSBmcm9tICcuLi91dGlscy9rZXknXG5pbXBvcnQgeyBmaW5kQ3VycmVudExpbmVSYW5nZSB9IGZyb20gJy4uL3V0aWxzL2xpbmVzJ1xuaW1wb3J0IHtcbiAgRURJVE9SX1RPX0tFWV9UT19FTEVNRU5ULFxuICBFRElUT1JfVE9fT05fQ0hBTkdFLFxuICBFRElUT1JfVE9fUEVORElOR19BQ1RJT04sXG4gIEVESVRPUl9UT19QRU5ESU5HX0RJRkZTLFxuICBFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04sXG4gIEVESVRPUl9UT19VU0VSX01BUktTLFxuICBFRElUT1JfVE9fVVNFUl9TRUxFQ1RJT04sXG4gIE5PREVfVE9fS0VZLFxuICBFRElUT1JfVE9fU0NIRURVTEVfRkxVU0gsXG4gIEVESVRPUl9UT19QRU5ESU5HX0lOU0VSVElPTl9NQVJLUyxcbn0gZnJvbSAnLi4vdXRpbHMvd2Vhay1tYXBzJ1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IgfSBmcm9tICcuL3JlYWN0LWVkaXRvcidcbi8qKlxuICogYHdpdGhSZWFjdGAgYWRkcyBSZWFjdCBhbmQgRE9NIHNwZWNpZmljIGJlaGF2aW9ycyB0byB0aGUgZWRpdG9yLlxuICpcbiAqIElmIHlvdSBhcmUgdXNpbmcgVHlwZVNjcmlwdCwgeW91IG11c3QgZXh0ZW5kIFNsYXRlJ3MgQ3VzdG9tVHlwZXMgdG8gdXNlXG4gKiB0aGlzIHBsdWdpbi5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9kb2NzLnNsYXRlanMub3JnL2NvbmNlcHRzLzExLXR5cGVzY3JpcHQgdG8gbGVhcm4gaG93LlxuICovXG5cbmV4cG9ydCBjb25zdCB3aXRoUmVhY3QgPSA8VCBleHRlbmRzIEJhc2VFZGl0b3I+KGVkaXRvcjogVCk6IFQgJiBSZWFjdEVkaXRvciA9PiB7XG4gIGNvbnN0IGUgPSBlZGl0b3IgYXMgVCAmIFJlYWN0RWRpdG9yXG4gIGNvbnN0IHsgYXBwbHksIG9uQ2hhbmdlLCBkZWxldGVCYWNrd2FyZCwgYWRkTWFyaywgcmVtb3ZlTWFyayB9ID0gZVxuXG4gIC8vIFRoZSBXZWFrTWFwIHdoaWNoIG1hcHMgYSBrZXkgdG8gYSBzcGVjaWZpYyBIVE1MRWxlbWVudCBtdXN0IGJlIHNjb3BlZCB0byB0aGUgZWRpdG9yIGluc3RhbmNlIHRvXG4gIC8vIGF2b2lkIGNvbGxpc2lvbnMgYmV0d2VlbiBlZGl0b3JzIGluIHRoZSBET00gdGhhdCBzaGFyZSB0aGUgc2FtZSB2YWx1ZS5cbiAgRURJVE9SX1RPX0tFWV9UT19FTEVNRU5ULnNldChlLCBuZXcgV2Vha01hcCgpKVxuXG4gIGUuYWRkTWFyayA9IChrZXksIHZhbHVlKSA9PiB7XG4gICAgRURJVE9SX1RPX1NDSEVEVUxFX0ZMVVNILmdldChlKT8uKClcblxuICAgIGlmIChcbiAgICAgICFFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MuZ2V0KGUpICYmXG4gICAgICBFRElUT1JfVE9fUEVORElOR19ESUZGUy5nZXQoZSk/Lmxlbmd0aFxuICAgICkge1xuICAgICAgLy8gRW5zdXJlIHRoZSBjdXJyZW50IHBlbmRpbmcgZGlmZnMgb3JpZ2luYXRpbmcgZnJvbSBjaGFuZ2VzIGJlZm9yZSB0aGUgYWRkTWFya1xuICAgICAgLy8gYXJlIGFwcGxpZWQgd2l0aCB0aGUgY3VycmVudCBmb3JtYXR0aW5nXG4gICAgICBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1Muc2V0KGUsIG51bGwpXG4gICAgfVxuXG4gICAgRURJVE9SX1RPX1VTRVJfTUFSS1MuZGVsZXRlKGUpXG5cbiAgICBhZGRNYXJrKGtleSwgdmFsdWUpXG4gIH1cblxuICBlLnJlbW92ZU1hcmsgPSBrZXkgPT4ge1xuICAgIGlmIChcbiAgICAgICFFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MuZ2V0KGUpICYmXG4gICAgICBFRElUT1JfVE9fUEVORElOR19ESUZGUy5nZXQoZSk/Lmxlbmd0aFxuICAgICkge1xuICAgICAgLy8gRW5zdXJlIHRoZSBjdXJyZW50IHBlbmRpbmcgZGlmZnMgb3JpZ2luYXRpbmcgZnJvbSBjaGFuZ2VzIGJlZm9yZSB0aGUgYWRkTWFya1xuICAgICAgLy8gYXJlIGFwcGxpZWQgd2l0aCB0aGUgY3VycmVudCBmb3JtYXR0aW5nXG4gICAgICBFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1Muc2V0KGUsIG51bGwpXG4gICAgfVxuXG4gICAgRURJVE9SX1RPX1VTRVJfTUFSS1MuZGVsZXRlKGUpXG5cbiAgICByZW1vdmVNYXJrKGtleSlcbiAgfVxuXG4gIGUuZGVsZXRlQmFja3dhcmQgPSB1bml0ID0+IHtcbiAgICBpZiAodW5pdCAhPT0gJ2xpbmUnKSB7XG4gICAgICByZXR1cm4gZGVsZXRlQmFja3dhcmQodW5pdClcbiAgICB9XG5cbiAgICBpZiAoZS5zZWxlY3Rpb24gJiYgUmFuZ2UuaXNDb2xsYXBzZWQoZS5zZWxlY3Rpb24pKSB7XG4gICAgICBjb25zdCBwYXJlbnRCbG9ja0VudHJ5ID0gRWRpdG9yLmFib3ZlKGUsIHtcbiAgICAgICAgbWF0Y2g6IG4gPT4gRWxlbWVudC5pc0VsZW1lbnQobikgJiYgRWRpdG9yLmlzQmxvY2soZSwgbiksXG4gICAgICAgIGF0OiBlLnNlbGVjdGlvbixcbiAgICAgIH0pXG5cbiAgICAgIGlmIChwYXJlbnRCbG9ja0VudHJ5KSB7XG4gICAgICAgIGNvbnN0IFssIHBhcmVudEJsb2NrUGF0aF0gPSBwYXJlbnRCbG9ja0VudHJ5XG4gICAgICAgIGNvbnN0IHBhcmVudEVsZW1lbnRSYW5nZSA9IEVkaXRvci5yYW5nZShcbiAgICAgICAgICBlLFxuICAgICAgICAgIHBhcmVudEJsb2NrUGF0aCxcbiAgICAgICAgICBlLnNlbGVjdGlvbi5hbmNob3JcbiAgICAgICAgKVxuXG4gICAgICAgIGNvbnN0IGN1cnJlbnRMaW5lUmFuZ2UgPSBmaW5kQ3VycmVudExpbmVSYW5nZShlLCBwYXJlbnRFbGVtZW50UmFuZ2UpXG5cbiAgICAgICAgaWYgKCFSYW5nZS5pc0NvbGxhcHNlZChjdXJyZW50TGluZVJhbmdlKSkge1xuICAgICAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKGUsIHsgYXQ6IGN1cnJlbnRMaW5lUmFuZ2UgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRoaXMgYXR0ZW1wdHMgdG8gcmVzZXQgdGhlIE5PREVfVE9fS0VZIGVudHJ5IHRvIHRoZSBjb3JyZWN0IHZhbHVlXG4gIC8vIGFzIGFwcGx5KCkgY2hhbmdlcyB0aGUgb2JqZWN0IHJlZmVyZW5jZSBhbmQgaGVuY2UgaW52YWxpZGF0ZXMgdGhlIE5PREVfVE9fS0VZIGVudHJ5XG4gIGUuYXBwbHkgPSAob3A6IE9wZXJhdGlvbikgPT4ge1xuICAgIGNvbnN0IG1hdGNoZXM6IFtQYXRoLCBLZXldW10gPSBbXVxuXG4gICAgY29uc3QgcGVuZGluZ0RpZmZzID0gRURJVE9SX1RPX1BFTkRJTkdfRElGRlMuZ2V0KGUpXG4gICAgaWYgKHBlbmRpbmdEaWZmcz8ubGVuZ3RoKSB7XG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHBlbmRpbmdEaWZmc1xuICAgICAgICAubWFwKHRleHREaWZmID0+IHRyYW5zZm9ybVRleHREaWZmKHRleHREaWZmLCBvcCkpXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbikgYXMgVGV4dERpZmZbXVxuXG4gICAgICBFRElUT1JfVE9fUEVORElOR19ESUZGUy5zZXQoZSwgdHJhbnNmb3JtZWQpXG4gICAgfVxuXG4gICAgY29uc3QgcGVuZGluZ1NlbGVjdGlvbiA9IEVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTi5nZXQoZSlcbiAgICBpZiAocGVuZGluZ1NlbGVjdGlvbikge1xuICAgICAgRURJVE9SX1RPX1BFTkRJTkdfU0VMRUNUSU9OLnNldChcbiAgICAgICAgZSxcbiAgICAgICAgdHJhbnNmb3JtUGVuZGluZ1JhbmdlKGUsIHBlbmRpbmdTZWxlY3Rpb24sIG9wKVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IHBlbmRpbmdBY3Rpb24gPSBFRElUT1JfVE9fUEVORElOR19BQ1RJT04uZ2V0KGUpXG4gICAgaWYgKHBlbmRpbmdBY3Rpb24/LmF0KSB7XG4gICAgICBjb25zdCBhdCA9IFBvaW50LmlzUG9pbnQocGVuZGluZ0FjdGlvbj8uYXQpXG4gICAgICAgID8gdHJhbnNmb3JtUGVuZGluZ1BvaW50KGUsIHBlbmRpbmdBY3Rpb24uYXQsIG9wKVxuICAgICAgICA6IHRyYW5zZm9ybVBlbmRpbmdSYW5nZShlLCBwZW5kaW5nQWN0aW9uLmF0LCBvcClcblxuICAgICAgRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OLnNldChlLCBhdCA/IHsgLi4ucGVuZGluZ0FjdGlvbiwgYXQgfSA6IG51bGwpXG4gICAgfVxuXG4gICAgc3dpdGNoIChvcC50eXBlKSB7XG4gICAgICBjYXNlICdpbnNlcnRfdGV4dCc6XG4gICAgICBjYXNlICdyZW1vdmVfdGV4dCc6XG4gICAgICBjYXNlICdzZXRfbm9kZSc6XG4gICAgICBjYXNlICdzcGxpdF9ub2RlJzoge1xuICAgICAgICBtYXRjaGVzLnB1c2goLi4uZ2V0TWF0Y2hlcyhlLCBvcC5wYXRoKSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnc2V0X3NlbGVjdGlvbic6IHtcbiAgICAgICAgLy8gU2VsZWN0aW9uIHdhcyBtYW51YWxseSBzZXQsIGRvbid0IHJlc3RvcmUgdGhlIHVzZXIgc2VsZWN0aW9uIGFmdGVyIHRoZSBjaGFuZ2UuXG4gICAgICAgIEVESVRPUl9UT19VU0VSX1NFTEVDVElPTi5nZXQoZSk/LnVucmVmKClcbiAgICAgICAgRURJVE9SX1RPX1VTRVJfU0VMRUNUSU9OLmRlbGV0ZShlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdpbnNlcnRfbm9kZSc6XG4gICAgICBjYXNlICdyZW1vdmVfbm9kZSc6IHtcbiAgICAgICAgbWF0Y2hlcy5wdXNoKC4uLmdldE1hdGNoZXMoZSwgUGF0aC5wYXJlbnQob3AucGF0aCkpKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtZXJnZV9ub2RlJzoge1xuICAgICAgICBjb25zdCBwcmV2UGF0aCA9IFBhdGgucHJldmlvdXMob3AucGF0aClcbiAgICAgICAgbWF0Y2hlcy5wdXNoKC4uLmdldE1hdGNoZXMoZSwgcHJldlBhdGgpKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtb3ZlX25vZGUnOiB7XG4gICAgICAgIGNvbnN0IGNvbW1vblBhdGggPSBQYXRoLmNvbW1vbihcbiAgICAgICAgICBQYXRoLnBhcmVudChvcC5wYXRoKSxcbiAgICAgICAgICBQYXRoLnBhcmVudChvcC5uZXdQYXRoKVxuICAgICAgICApXG4gICAgICAgIG1hdGNoZXMucHVzaCguLi5nZXRNYXRjaGVzKGUsIGNvbW1vblBhdGgpKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIGFwcGx5KG9wKVxuXG4gICAgZm9yIChjb25zdCBbcGF0aCwga2V5XSBvZiBtYXRjaGVzKSB7XG4gICAgICBjb25zdCBbbm9kZV0gPSBFZGl0b3Iubm9kZShlLCBwYXRoKVxuICAgICAgTk9ERV9UT19LRVkuc2V0KG5vZGUsIGtleSlcbiAgICB9XG4gIH1cblxuICBlLnNldEZyYWdtZW50RGF0YSA9IChkYXRhOiBQaWNrPERhdGFUcmFuc2ZlciwgJ2dldERhdGEnIHwgJ3NldERhdGEnPikgPT4ge1xuICAgIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSBlXG5cbiAgICBpZiAoIXNlbGVjdGlvbikge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gUmFuZ2UuZWRnZXMoc2VsZWN0aW9uKVxuICAgIGNvbnN0IHN0YXJ0Vm9pZCA9IEVkaXRvci52b2lkKGUsIHsgYXQ6IHN0YXJ0LnBhdGggfSlcbiAgICBjb25zdCBlbmRWb2lkID0gRWRpdG9yLnZvaWQoZSwgeyBhdDogZW5kLnBhdGggfSlcblxuICAgIGlmIChSYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pICYmICFzdGFydFZvaWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIGZha2Ugc2VsZWN0aW9uIHNvIHRoYXQgd2UgY2FuIGFkZCBhIEJhc2U2NC1lbmNvZGVkIGNvcHkgb2YgdGhlXG4gICAgLy8gZnJhZ21lbnQgdG8gdGhlIEhUTUwsIHRvIGRlY29kZSBvbiBmdXR1cmUgcGFzdGVzLlxuICAgIGNvbnN0IGRvbVJhbmdlID0gUmVhY3RFZGl0b3IudG9ET01SYW5nZShlLCBzZWxlY3Rpb24pXG4gICAgbGV0IGNvbnRlbnRzID0gZG9tUmFuZ2UuY2xvbmVDb250ZW50cygpXG4gICAgbGV0IGF0dGFjaCA9IGNvbnRlbnRzLmNoaWxkTm9kZXNbMF0gYXMgSFRNTEVsZW1lbnRcblxuICAgIC8vIE1ha2Ugc3VyZSBhdHRhY2ggaXMgbm9uLWVtcHR5LCBzaW5jZSBlbXB0eSBub2RlcyB3aWxsIG5vdCBnZXQgY29waWVkLlxuICAgIGNvbnRlbnRzLmNoaWxkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgIGlmIChub2RlLnRleHRDb250ZW50ICYmIG5vZGUudGV4dENvbnRlbnQudHJpbSgpICE9PSAnJykge1xuICAgICAgICBhdHRhY2ggPSBub2RlIGFzIEhUTUxFbGVtZW50XG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIENPTVBBVDogSWYgdGhlIGVuZCBub2RlIGlzIGEgdm9pZCBub2RlLCB3ZSBuZWVkIHRvIG1vdmUgdGhlIGVuZCBvZiB0aGVcbiAgICAvLyByYW5nZSBmcm9tIHRoZSB2b2lkIG5vZGUncyBzcGFjZXIgc3BhbiwgdG8gdGhlIGVuZCBvZiB0aGUgdm9pZCBub2RlJ3NcbiAgICAvLyBjb250ZW50LCBzaW5jZSB0aGUgc3BhY2VyIGlzIGJlZm9yZSB2b2lkJ3MgY29udGVudCBpbiB0aGUgRE9NLlxuICAgIGlmIChlbmRWb2lkKSB7XG4gICAgICBjb25zdCBbdm9pZE5vZGVdID0gZW5kVm9pZFxuICAgICAgY29uc3QgciA9IGRvbVJhbmdlLmNsb25lUmFuZ2UoKVxuICAgICAgY29uc3QgZG9tTm9kZSA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlLCB2b2lkTm9kZSlcbiAgICAgIHIuc2V0RW5kQWZ0ZXIoZG9tTm9kZSlcbiAgICAgIGNvbnRlbnRzID0gci5jbG9uZUNvbnRlbnRzKClcbiAgICB9XG5cbiAgICAvLyBDT01QQVQ6IElmIHRoZSBzdGFydCBub2RlIGlzIGEgdm9pZCBub2RlLCB3ZSBuZWVkIHRvIGF0dGFjaCB0aGUgZW5jb2RlZFxuICAgIC8vIGZyYWdtZW50IHRvIHRoZSB2b2lkIG5vZGUncyBjb250ZW50IG5vZGUgaW5zdGVhZCBvZiB0aGUgc3BhY2VyLCBiZWNhdXNlXG4gICAgLy8gYXR0YWNoaW5nIGl0IHRvIGVtcHR5IGA8ZGl2Pi88c3Bhbj5gIG5vZGVzIHdpbGwgZW5kIHVwIGhhdmluZyBpdCBlcmFzZWQgYnlcbiAgICAvLyBtb3N0IGJyb3dzZXJzLiAoMjAxOC8wNC8yNylcbiAgICBpZiAoc3RhcnRWb2lkKSB7XG4gICAgICBhdHRhY2ggPSBjb250ZW50cy5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zbGF0ZS1zcGFjZXJdJykhIGFzIEhUTUxFbGVtZW50XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFueSB6ZXJvLXdpZHRoIHNwYWNlIHNwYW5zIGZyb20gdGhlIGNsb25lZCBET00gc28gdGhhdCB0aGV5IGRvbid0XG4gICAgLy8gc2hvdyB1cCBlbHNld2hlcmUgd2hlbiBwYXN0ZWQuXG4gICAgQXJyYXkuZnJvbShjb250ZW50cy5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zbGF0ZS16ZXJvLXdpZHRoXScpKS5mb3JFYWNoKFxuICAgICAgencgPT4ge1xuICAgICAgICBjb25zdCBpc05ld2xpbmUgPSB6dy5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtemVyby13aWR0aCcpID09PSAnbidcbiAgICAgICAgencudGV4dENvbnRlbnQgPSBpc05ld2xpbmUgPyAnXFxuJyA6ICcnXG4gICAgICB9XG4gICAgKVxuXG4gICAgLy8gU2V0IGEgYGRhdGEtc2xhdGUtZnJhZ21lbnRgIGF0dHJpYnV0ZSBvbiBhIG5vbi1lbXB0eSBub2RlLCBzbyBpdCBzaG93cyB1cFxuICAgIC8vIGluIHRoZSBIVE1MLCBhbmQgY2FuIGJlIHVzZWQgZm9yIGludHJhLVNsYXRlIHBhc3RpbmcuIElmIGl0J3MgYSB0ZXh0XG4gICAgLy8gbm9kZSwgd3JhcCBpdCBpbiBhIGA8c3Bhbj5gIHNvIHdlIGhhdmUgc29tZXRoaW5nIHRvIHNldCBhbiBhdHRyaWJ1dGUgb24uXG4gICAgaWYgKGlzRE9NVGV4dChhdHRhY2gpKSB7XG4gICAgICBjb25zdCBzcGFuID0gYXR0YWNoLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgICAvLyBDT01QQVQ6IEluIENocm9tZSBhbmQgU2FmYXJpLCBpZiB3ZSBkb24ndCBhZGQgdGhlIGB3aGl0ZS1zcGFjZWAgc3R5bGVcbiAgICAgIC8vIHRoZW4gbGVhZGluZyBhbmQgdHJhaWxpbmcgc3BhY2VzIHdpbGwgYmUgaWdub3JlZC4gKDIwMTcvMDkvMjEpXG4gICAgICBzcGFuLnN0eWxlLndoaXRlU3BhY2UgPSAncHJlJ1xuICAgICAgc3Bhbi5hcHBlbmRDaGlsZChhdHRhY2gpXG4gICAgICBjb250ZW50cy5hcHBlbmRDaGlsZChzcGFuKVxuICAgICAgYXR0YWNoID0gc3BhblxuICAgIH1cblxuICAgIGNvbnN0IGZyYWdtZW50ID0gZS5nZXRGcmFnbWVudCgpXG4gICAgY29uc3Qgc3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZnJhZ21lbnQpXG4gICAgY29uc3QgZW5jb2RlZCA9IHdpbmRvdy5idG9hKGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmcpKVxuICAgIGF0dGFjaC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2xhdGUtZnJhZ21lbnQnLCBlbmNvZGVkKVxuICAgIGRhdGEuc2V0RGF0YSgnYXBwbGljYXRpb24veC1zbGF0ZS1mcmFnbWVudCcsIGVuY29kZWQpXG5cbiAgICAvLyBBZGQgdGhlIGNvbnRlbnQgdG8gYSA8ZGl2PiBzbyB0aGF0IHdlIGNhbiBnZXQgaXRzIGlubmVyIEhUTUwuXG4gICAgY29uc3QgZGl2ID0gY29udGVudHMub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGRpdi5hcHBlbmRDaGlsZChjb250ZW50cylcbiAgICBkaXYuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAndHJ1ZScpXG4gICAgY29udGVudHMub3duZXJEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdilcbiAgICBkYXRhLnNldERhdGEoJ3RleHQvaHRtbCcsIGRpdi5pbm5lckhUTUwpXG4gICAgZGF0YS5zZXREYXRhKCd0ZXh0L3BsYWluJywgZ2V0UGxhaW5UZXh0KGRpdikpXG4gICAgY29udGVudHMub3duZXJEb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdilcbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgZS5pbnNlcnREYXRhID0gKGRhdGE6IERhdGFUcmFuc2ZlcikgPT4ge1xuICAgIGlmICghZS5pbnNlcnRGcmFnbWVudERhdGEoZGF0YSkpIHtcbiAgICAgIGUuaW5zZXJ0VGV4dERhdGEoZGF0YSlcbiAgICB9XG4gIH1cblxuICBlLmluc2VydEZyYWdtZW50RGF0YSA9IChkYXRhOiBEYXRhVHJhbnNmZXIpOiBib29sZWFuID0+IHtcbiAgICAvKipcbiAgICAgKiBDaGVja2luZyBjb3BpZWQgZnJhZ21lbnQgZnJvbSBhcHBsaWNhdGlvbi94LXNsYXRlLWZyYWdtZW50IG9yIGRhdGEtc2xhdGUtZnJhZ21lbnRcbiAgICAgKi9cbiAgICBjb25zdCBmcmFnbWVudCA9XG4gICAgICBkYXRhLmdldERhdGEoJ2FwcGxpY2F0aW9uL3gtc2xhdGUtZnJhZ21lbnQnKSB8fFxuICAgICAgZ2V0U2xhdGVGcmFnbWVudEF0dHJpYnV0ZShkYXRhKVxuXG4gICAgaWYgKGZyYWdtZW50KSB7XG4gICAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5hdG9iKGZyYWdtZW50KSlcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoZGVjb2RlZCkgYXMgTm9kZVtdXG4gICAgICBlLmluc2VydEZyYWdtZW50KHBhcnNlZClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZS5pbnNlcnRUZXh0RGF0YSA9IChkYXRhOiBEYXRhVHJhbnNmZXIpOiBib29sZWFuID0+IHtcbiAgICBjb25zdCB0ZXh0ID0gZGF0YS5nZXREYXRhKCd0ZXh0L3BsYWluJylcblxuICAgIGlmICh0ZXh0KSB7XG4gICAgICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoL1xcclxcbnxcXHJ8XFxuLylcbiAgICAgIGxldCBzcGxpdCA9IGZhbHNlXG5cbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgICBpZiAoc3BsaXQpIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZSwgeyBhbHdheXM6IHRydWUgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGUuaW5zZXJ0VGV4dChsaW5lKVxuICAgICAgICBzcGxpdCA9IHRydWVcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZS5vbkNoYW5nZSA9ICgpID0+IHtcbiAgICAvLyBDT01QQVQ6IFJlYWN0IGRvZXNuJ3QgYmF0Y2ggYHNldFN0YXRlYCBob29rIGNhbGxzLCB3aGljaCBtZWFucyB0aGF0IHRoZVxuICAgIC8vIGNoaWxkcmVuIGFuZCBzZWxlY3Rpb24gY2FuIGdldCBvdXQgb2Ygc3luYyBmb3Igb25lIHJlbmRlciBwYXNzLiBTbyB3ZVxuICAgIC8vIGhhdmUgdG8gdXNlIHRoaXMgdW5zdGFibGUgQVBJIHRvIGVuc3VyZSBpdCBiYXRjaGVzIHRoZW0uICgyMDE5LzEyLzAzKVxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMTQyNTkjaXNzdWVjb21tZW50LTQzOTcwMjM2N1xuICAgIFJlYWN0RE9NLnVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzKCgpID0+IHtcbiAgICAgIGNvbnN0IG9uQ29udGV4dENoYW5nZSA9IEVESVRPUl9UT19PTl9DSEFOR0UuZ2V0KGUpXG5cbiAgICAgIGlmIChvbkNvbnRleHRDaGFuZ2UpIHtcbiAgICAgICAgb25Db250ZXh0Q2hhbmdlKClcbiAgICAgIH1cblxuICAgICAgb25DaGFuZ2UoKVxuICAgIH0pXG4gIH1cblxuICByZXR1cm4gZVxufVxuXG5jb25zdCBnZXRNYXRjaGVzID0gKGU6IEVkaXRvciwgcGF0aDogUGF0aCkgPT4ge1xuICBjb25zdCBtYXRjaGVzOiBbUGF0aCwgS2V5XVtdID0gW11cbiAgZm9yIChjb25zdCBbbiwgcF0gb2YgRWRpdG9yLmxldmVscyhlLCB7IGF0OiBwYXRoIH0pKSB7XG4gICAgY29uc3Qga2V5ID0gUmVhY3RFZGl0b3IuZmluZEtleShlLCBuKVxuICAgIG1hdGNoZXMucHVzaChbcCwga2V5XSlcbiAgfVxuICByZXR1cm4gbWF0Y2hlc1xufVxuIiwgImltcG9ydCB7IGlzUGxhaW5PYmplY3QgfSBmcm9tICdpcy1wbGFpbi1vYmplY3QnXG5pbXBvcnQgeyBPcGVyYXRpb24sIFJhbmdlIH0gZnJvbSAnc2xhdGUnXG5cbmludGVyZmFjZSBCYXRjaCB7XG4gIG9wZXJhdGlvbnM6IE9wZXJhdGlvbltdXG4gIHNlbGVjdGlvbkJlZm9yZTogUmFuZ2UgfCBudWxsXG59XG5cbi8qKlxuICogYEhpc3RvcnlgIG9iamVjdHMgaG9sZCBhbGwgb2YgdGhlIG9wZXJhdGlvbnMgdGhhdCBhcmUgYXBwbGllZCB0byBhIHZhbHVlLCBzb1xuICogdGhleSBjYW4gYmUgdW5kb25lIG9yIHJlZG9uZSBhcyBuZWNlc3NhcnkuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBIaXN0b3J5IHtcbiAgcmVkb3M6IEJhdGNoW11cbiAgdW5kb3M6IEJhdGNoW11cbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuZXhwb3J0IGNvbnN0IEhpc3RvcnkgPSB7XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgYEhpc3RvcnlgIG9iamVjdC5cbiAgICovXG5cbiAgaXNIaXN0b3J5KHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBIaXN0b3J5IHtcbiAgICByZXR1cm4gKFxuICAgICAgaXNQbGFpbk9iamVjdCh2YWx1ZSkgJiZcbiAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUucmVkb3MpICYmXG4gICAgICBBcnJheS5pc0FycmF5KHZhbHVlLnVuZG9zKSAmJlxuICAgICAgKHZhbHVlLnJlZG9zLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBPcGVyYXRpb24uaXNPcGVyYXRpb25MaXN0KHZhbHVlLnJlZG9zWzBdLm9wZXJhdGlvbnMpKSAmJlxuICAgICAgKHZhbHVlLnVuZG9zLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBPcGVyYXRpb24uaXNPcGVyYXRpb25MaXN0KHZhbHVlLnVuZG9zWzBdLm9wZXJhdGlvbnMpKVxuICAgIClcbiAgfSxcbn1cbiIsICJpbXBvcnQgeyBCYXNlRWRpdG9yLCBFZGl0b3IgfSBmcm9tICdzbGF0ZSdcbmltcG9ydCB7IEhpc3RvcnkgfSBmcm9tICcuL2hpc3RvcnknXG5cbi8qKlxuICogV2Vha21hcHMgZm9yIGF0dGFjaGluZyBzdGF0ZSB0byB0aGUgZWRpdG9yLlxuICovXG5cbmV4cG9ydCBjb25zdCBISVNUT1JZID0gbmV3IFdlYWtNYXA8RWRpdG9yLCBIaXN0b3J5PigpXG5leHBvcnQgY29uc3QgU0FWSU5HID0gbmV3IFdlYWtNYXA8RWRpdG9yLCBib29sZWFuIHwgdW5kZWZpbmVkPigpXG5leHBvcnQgY29uc3QgTUVSR0lORyA9IG5ldyBXZWFrTWFwPEVkaXRvciwgYm9vbGVhbiB8IHVuZGVmaW5lZD4oKVxuXG4vKipcbiAqIGBIaXN0b3J5RWRpdG9yYCBjb250YWlucyBoZWxwZXJzIGZvciBoaXN0b3J5LWVuYWJsZWQgZWRpdG9ycy5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEhpc3RvcnlFZGl0b3IgZXh0ZW5kcyBCYXNlRWRpdG9yIHtcbiAgaGlzdG9yeTogSGlzdG9yeVxuICB1bmRvOiAoKSA9PiB2b2lkXG4gIHJlZG86ICgpID0+IHZvaWRcbiAgd3JpdGVIaXN0b3J5OiAoc3RhY2s6ICd1bmRvcycgfCAncmVkb3MnLCBiYXRjaDogYW55KSA9PiB2b2lkXG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbmV4cG9ydCBjb25zdCBIaXN0b3J5RWRpdG9yID0ge1xuICAvKipcbiAgICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBhIGBIaXN0b3J5RWRpdG9yYCBvYmplY3QuXG4gICAqL1xuXG4gIGlzSGlzdG9yeUVkaXRvcih2YWx1ZTogYW55KTogdmFsdWUgaXMgSGlzdG9yeUVkaXRvciB7XG4gICAgcmV0dXJuIEhpc3RvcnkuaXNIaXN0b3J5KHZhbHVlLmhpc3RvcnkpICYmIEVkaXRvci5pc0VkaXRvcih2YWx1ZSlcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBtZXJnZSBmbGFnJ3MgY3VycmVudCB2YWx1ZS5cbiAgICovXG5cbiAgaXNNZXJnaW5nKGVkaXRvcjogSGlzdG9yeUVkaXRvcik6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBNRVJHSU5HLmdldChlZGl0b3IpXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2F2aW5nIGZsYWcncyBjdXJyZW50IHZhbHVlLlxuICAgKi9cblxuICBpc1NhdmluZyhlZGl0b3I6IEhpc3RvcnlFZGl0b3IpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gU0FWSU5HLmdldChlZGl0b3IpXG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZG8gdG8gdGhlIHByZXZpb3VzIHNhdmVkIHN0YXRlLlxuICAgKi9cblxuICByZWRvKGVkaXRvcjogSGlzdG9yeUVkaXRvcik6IHZvaWQge1xuICAgIGVkaXRvci5yZWRvKClcbiAgfSxcblxuICAvKipcbiAgICogVW5kbyB0byB0aGUgcHJldmlvdXMgc2F2ZWQgc3RhdGUuXG4gICAqL1xuXG4gIHVuZG8oZWRpdG9yOiBIaXN0b3J5RWRpdG9yKTogdm9pZCB7XG4gICAgZWRpdG9yLnVuZG8oKVxuICB9LFxuXG4gIC8qKlxuICAgKiBBcHBseSBhIHNlcmllcyBvZiBjaGFuZ2VzIGluc2lkZSBhIHN5bmNocm9ub3VzIGBmbmAsIHdpdGhvdXQgbWVyZ2luZyBhbnkgb2ZcbiAgICogdGhlIG5ldyBvcGVyYXRpb25zIGludG8gcHJldmlvdXMgc2F2ZSBwb2ludCBpbiB0aGUgaGlzdG9yeS5cbiAgICovXG5cbiAgd2l0aG91dE1lcmdpbmcoZWRpdG9yOiBIaXN0b3J5RWRpdG9yLCBmbjogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNvbnN0IHByZXYgPSBIaXN0b3J5RWRpdG9yLmlzTWVyZ2luZyhlZGl0b3IpXG4gICAgTUVSR0lORy5zZXQoZWRpdG9yLCBmYWxzZSlcbiAgICBmbigpXG4gICAgTUVSR0lORy5zZXQoZWRpdG9yLCBwcmV2KVxuICB9LFxuXG4gIC8qKlxuICAgKiBBcHBseSBhIHNlcmllcyBvZiBjaGFuZ2VzIGluc2lkZSBhIHN5bmNocm9ub3VzIGBmbmAsIHdpdGhvdXQgc2F2aW5nIGFueSBvZlxuICAgKiB0aGVpciBvcGVyYXRpb25zIGludG8gdGhlIGhpc3RvcnkuXG4gICAqL1xuXG4gIHdpdGhvdXRTYXZpbmcoZWRpdG9yOiBIaXN0b3J5RWRpdG9yLCBmbjogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNvbnN0IHByZXYgPSBIaXN0b3J5RWRpdG9yLmlzU2F2aW5nKGVkaXRvcilcbiAgICBTQVZJTkcuc2V0KGVkaXRvciwgZmFsc2UpXG4gICAgZm4oKVxuICAgIFNBVklORy5zZXQoZWRpdG9yLCBwcmV2KVxuICB9LFxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgT3BlcmF0aW9uLCBQYXRoLCBSYW5nZSwgVHJhbnNmb3JtcyB9IGZyb20gJ3NsYXRlJ1xuXG5pbXBvcnQgeyBIaXN0b3J5RWRpdG9yIH0gZnJvbSAnLi9oaXN0b3J5LWVkaXRvcidcblxuLyoqXG4gKiBUaGUgYHdpdGhIaXN0b3J5YCBwbHVnaW4ga2VlcHMgdHJhY2sgb2YgdGhlIG9wZXJhdGlvbiBoaXN0b3J5IG9mIGEgU2xhdGVcbiAqIGVkaXRvciBhcyBvcGVyYXRpb25zIGFyZSBhcHBsaWVkIHRvIGl0LCB1c2luZyB1bmRvIGFuZCByZWRvIHN0YWNrcy5cbiAqXG4gKiBJZiB5b3UgYXJlIHVzaW5nIFR5cGVTY3JpcHQsIHlvdSBtdXN0IGV4dGVuZCBTbGF0ZSdzIEN1c3RvbVR5cGVzIHRvIHVzZVxuICogdGhpcyBwbHVnaW4uXG4gKlxuICogU2VlIGh0dHBzOi8vZG9jcy5zbGF0ZWpzLm9yZy9jb25jZXB0cy8xMS10eXBlc2NyaXB0IHRvIGxlYXJuIGhvdy5cbiAqL1xuXG5leHBvcnQgY29uc3Qgd2l0aEhpc3RvcnkgPSA8VCBleHRlbmRzIEVkaXRvcj4oZWRpdG9yOiBUKSA9PiB7XG4gIGNvbnN0IGUgPSBlZGl0b3IgYXMgVCAmIEhpc3RvcnlFZGl0b3JcbiAgY29uc3QgeyBhcHBseSB9ID0gZVxuICBlLmhpc3RvcnkgPSB7IHVuZG9zOiBbXSwgcmVkb3M6IFtdIH1cblxuICBlLnJlZG8gPSAoKSA9PiB7XG4gICAgY29uc3QgeyBoaXN0b3J5IH0gPSBlXG4gICAgY29uc3QgeyByZWRvcyB9ID0gaGlzdG9yeVxuXG4gICAgaWYgKHJlZG9zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGJhdGNoID0gcmVkb3NbcmVkb3MubGVuZ3RoIC0gMV1cblxuICAgICAgaWYgKGJhdGNoLnNlbGVjdGlvbkJlZm9yZSkge1xuICAgICAgICBUcmFuc2Zvcm1zLnNldFNlbGVjdGlvbihlLCBiYXRjaC5zZWxlY3Rpb25CZWZvcmUpXG4gICAgICB9XG5cbiAgICAgIEhpc3RvcnlFZGl0b3Iud2l0aG91dFNhdmluZyhlLCAoKSA9PiB7XG4gICAgICAgIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZSwgKCkgPT4ge1xuICAgICAgICAgIGZvciAoY29uc3Qgb3Agb2YgYmF0Y2gub3BlcmF0aW9ucykge1xuICAgICAgICAgICAgZS5hcHBseShvcClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuXG4gICAgICBoaXN0b3J5LnJlZG9zLnBvcCgpXG4gICAgICBlLndyaXRlSGlzdG9yeSgndW5kb3MnLCBiYXRjaClcbiAgICB9XG4gIH1cblxuICBlLnVuZG8gPSAoKSA9PiB7XG4gICAgY29uc3QgeyBoaXN0b3J5IH0gPSBlXG4gICAgY29uc3QgeyB1bmRvcyB9ID0gaGlzdG9yeVxuXG4gICAgaWYgKHVuZG9zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGJhdGNoID0gdW5kb3NbdW5kb3MubGVuZ3RoIC0gMV1cblxuICAgICAgSGlzdG9yeUVkaXRvci53aXRob3V0U2F2aW5nKGUsICgpID0+IHtcbiAgICAgICAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgaW52ZXJzZU9wcyA9IGJhdGNoLm9wZXJhdGlvbnMubWFwKE9wZXJhdGlvbi5pbnZlcnNlKS5yZXZlcnNlKClcblxuICAgICAgICAgIGZvciAoY29uc3Qgb3Agb2YgaW52ZXJzZU9wcykge1xuICAgICAgICAgICAgZS5hcHBseShvcClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGJhdGNoLnNlbGVjdGlvbkJlZm9yZSkge1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZXRTZWxlY3Rpb24oZSwgYmF0Y2guc2VsZWN0aW9uQmVmb3JlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG5cbiAgICAgIGUud3JpdGVIaXN0b3J5KCdyZWRvcycsIGJhdGNoKVxuICAgICAgaGlzdG9yeS51bmRvcy5wb3AoKVxuICAgIH1cbiAgfVxuXG4gIGUuYXBwbHkgPSAob3A6IE9wZXJhdGlvbikgPT4ge1xuICAgIGNvbnN0IHsgb3BlcmF0aW9ucywgaGlzdG9yeSB9ID0gZVxuICAgIGNvbnN0IHsgdW5kb3MgfSA9IGhpc3RvcnlcbiAgICBjb25zdCBsYXN0QmF0Y2ggPSB1bmRvc1t1bmRvcy5sZW5ndGggLSAxXVxuICAgIGNvbnN0IGxhc3RPcCA9XG4gICAgICBsYXN0QmF0Y2ggJiYgbGFzdEJhdGNoLm9wZXJhdGlvbnNbbGFzdEJhdGNoLm9wZXJhdGlvbnMubGVuZ3RoIC0gMV1cbiAgICBsZXQgc2F2ZSA9IEhpc3RvcnlFZGl0b3IuaXNTYXZpbmcoZSlcbiAgICBsZXQgbWVyZ2UgPSBIaXN0b3J5RWRpdG9yLmlzTWVyZ2luZyhlKVxuXG4gICAgaWYgKHNhdmUgPT0gbnVsbCkge1xuICAgICAgc2F2ZSA9IHNob3VsZFNhdmUob3AsIGxhc3RPcClcbiAgICB9XG5cbiAgICBpZiAoc2F2ZSkge1xuICAgICAgaWYgKG1lcmdlID09IG51bGwpIHtcbiAgICAgICAgaWYgKGxhc3RCYXRjaCA9PSBudWxsKSB7XG4gICAgICAgICAgbWVyZ2UgPSBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKG9wZXJhdGlvbnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgbWVyZ2UgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWVyZ2UgPSBzaG91bGRNZXJnZShvcCwgbGFzdE9wKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChsYXN0QmF0Y2ggJiYgbWVyZ2UpIHtcbiAgICAgICAgbGFzdEJhdGNoLm9wZXJhdGlvbnMucHVzaChvcClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGJhdGNoID0ge1xuICAgICAgICAgIG9wZXJhdGlvbnM6IFtvcF0sXG4gICAgICAgICAgc2VsZWN0aW9uQmVmb3JlOiBlLnNlbGVjdGlvbixcbiAgICAgICAgfVxuICAgICAgICBlLndyaXRlSGlzdG9yeSgndW5kb3MnLCBiYXRjaClcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKHVuZG9zLmxlbmd0aCA+IDEwMCkge1xuICAgICAgICB1bmRvcy5zaGlmdCgpXG4gICAgICB9XG5cbiAgICAgIGhpc3RvcnkucmVkb3MgPSBbXVxuICAgIH1cblxuICAgIGFwcGx5KG9wKVxuICB9XG5cbiAgZS53cml0ZUhpc3RvcnkgPSAoc3RhY2s6ICd1bmRvcycgfCAncmVkb3MnLCBiYXRjaDogYW55KSA9PiB7XG4gICAgZS5oaXN0b3J5W3N0YWNrXS5wdXNoKGJhdGNoKVxuICB9XG5cbiAgcmV0dXJuIGVcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRvIG1lcmdlIGFuIG9wZXJhdGlvbiBpbnRvIHRoZSBwcmV2aW91cyBvcGVyYXRpb24uXG4gKi9cblxuY29uc3Qgc2hvdWxkTWVyZ2UgPSAob3A6IE9wZXJhdGlvbiwgcHJldjogT3BlcmF0aW9uIHwgdW5kZWZpbmVkKTogYm9vbGVhbiA9PiB7XG4gIGlmIChcbiAgICBwcmV2ICYmXG4gICAgb3AudHlwZSA9PT0gJ2luc2VydF90ZXh0JyAmJlxuICAgIHByZXYudHlwZSA9PT0gJ2luc2VydF90ZXh0JyAmJlxuICAgIG9wLm9mZnNldCA9PT0gcHJldi5vZmZzZXQgKyBwcmV2LnRleHQubGVuZ3RoICYmXG4gICAgUGF0aC5lcXVhbHMob3AucGF0aCwgcHJldi5wYXRoKVxuICApIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgaWYgKFxuICAgIHByZXYgJiZcbiAgICBvcC50eXBlID09PSAncmVtb3ZlX3RleHQnICYmXG4gICAgcHJldi50eXBlID09PSAncmVtb3ZlX3RleHQnICYmXG4gICAgb3Aub2Zmc2V0ICsgb3AudGV4dC5sZW5ndGggPT09IHByZXYub2Zmc2V0ICYmXG4gICAgUGF0aC5lcXVhbHMob3AucGF0aCwgcHJldi5wYXRoKVxuICApIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciBhbiBvcGVyYXRpb24gbmVlZHMgdG8gYmUgc2F2ZWQgdG8gdGhlIGhpc3RvcnkuXG4gKi9cblxuY29uc3Qgc2hvdWxkU2F2ZSA9IChvcDogT3BlcmF0aW9uLCBwcmV2OiBPcGVyYXRpb24gfCB1bmRlZmluZWQpOiBib29sZWFuID0+IHtcbiAgaWYgKG9wLnR5cGUgPT09ICdzZXRfc2VsZWN0aW9uJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cbiIsICJjb25zdCBCWVRFX1VOSVRTID0gW1xuXHQnQicsXG5cdCdrQicsXG5cdCdNQicsXG5cdCdHQicsXG5cdCdUQicsXG5cdCdQQicsXG5cdCdFQicsXG5cdCdaQicsXG5cdCdZQicsXG5dO1xuXG5jb25zdCBCSUJZVEVfVU5JVFMgPSBbXG5cdCdCJyxcblx0J0tpQicsXG5cdCdNaUInLFxuXHQnR2lCJyxcblx0J1RpQicsXG5cdCdQaUInLFxuXHQnRWlCJyxcblx0J1ppQicsXG5cdCdZaUInLFxuXTtcblxuY29uc3QgQklUX1VOSVRTID0gW1xuXHQnYicsXG5cdCdrYml0Jyxcblx0J01iaXQnLFxuXHQnR2JpdCcsXG5cdCdUYml0Jyxcblx0J1BiaXQnLFxuXHQnRWJpdCcsXG5cdCdaYml0Jyxcblx0J1liaXQnLFxuXTtcblxuY29uc3QgQklCSVRfVU5JVFMgPSBbXG5cdCdiJyxcblx0J2tpYml0Jyxcblx0J01pYml0Jyxcblx0J0dpYml0Jyxcblx0J1RpYml0Jyxcblx0J1BpYml0Jyxcblx0J0VpYml0Jyxcblx0J1ppYml0Jyxcblx0J1lpYml0Jyxcbl07XG5cbi8qXG5Gb3JtYXRzIHRoZSBnaXZlbiBudW1iZXIgdXNpbmcgYE51bWJlciN0b0xvY2FsZVN0cmluZ2AuXG4tIElmIGxvY2FsZSBpcyBhIHN0cmluZywgdGhlIHZhbHVlIGlzIGV4cGVjdGVkIHRvIGJlIGEgbG9jYWxlLWtleSAoZm9yIGV4YW1wbGU6IGBkZWApLlxuLSBJZiBsb2NhbGUgaXMgdHJ1ZSwgdGhlIHN5c3RlbSBkZWZhdWx0IGxvY2FsZSBpcyB1c2VkIGZvciB0cmFuc2xhdGlvbi5cbi0gSWYgbm8gdmFsdWUgZm9yIGxvY2FsZSBpcyBzcGVjaWZpZWQsIHRoZSBudW1iZXIgaXMgcmV0dXJuZWQgdW5tb2RpZmllZC5cbiovXG5jb25zdCB0b0xvY2FsZVN0cmluZyA9IChudW1iZXIsIGxvY2FsZSwgb3B0aW9ucykgPT4ge1xuXHRsZXQgcmVzdWx0ID0gbnVtYmVyO1xuXHRpZiAodHlwZW9mIGxvY2FsZSA9PT0gJ3N0cmluZycgfHwgQXJyYXkuaXNBcnJheShsb2NhbGUpKSB7XG5cdFx0cmVzdWx0ID0gbnVtYmVyLnRvTG9jYWxlU3RyaW5nKGxvY2FsZSwgb3B0aW9ucyk7XG5cdH0gZWxzZSBpZiAobG9jYWxlID09PSB0cnVlIHx8IG9wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJlc3VsdCA9IG51bWJlci50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsIG9wdGlvbnMpO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHByZXR0eUJ5dGVzKG51bWJlciwgb3B0aW9ucykge1xuXHRpZiAoIU51bWJlci5pc0Zpbml0ZShudW1iZXIpKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgYSBmaW5pdGUgbnVtYmVyLCBnb3QgJHt0eXBlb2YgbnVtYmVyfTogJHtudW1iZXJ9YCk7XG5cdH1cblxuXHRvcHRpb25zID0ge1xuXHRcdGJpdHM6IGZhbHNlLFxuXHRcdGJpbmFyeTogZmFsc2UsXG5cdFx0c3BhY2U6IHRydWUsXG5cdFx0Li4ub3B0aW9ucyxcblx0fTtcblxuXHRjb25zdCBVTklUUyA9IG9wdGlvbnMuYml0c1xuXHRcdD8gKG9wdGlvbnMuYmluYXJ5ID8gQklCSVRfVU5JVFMgOiBCSVRfVU5JVFMpXG5cdFx0OiAob3B0aW9ucy5iaW5hcnkgPyBCSUJZVEVfVU5JVFMgOiBCWVRFX1VOSVRTKTtcblxuXHRjb25zdCBzZXBhcmF0b3IgPSBvcHRpb25zLnNwYWNlID8gJyAnIDogJyc7XG5cblx0aWYgKG9wdGlvbnMuc2lnbmVkICYmIG51bWJlciA9PT0gMCkge1xuXHRcdHJldHVybiBgIDAke3NlcGFyYXRvcn0ke1VOSVRTWzBdfWA7XG5cdH1cblxuXHRjb25zdCBpc05lZ2F0aXZlID0gbnVtYmVyIDwgMDtcblx0Y29uc3QgcHJlZml4ID0gaXNOZWdhdGl2ZSA/ICctJyA6IChvcHRpb25zLnNpZ25lZCA/ICcrJyA6ICcnKTtcblxuXHRpZiAoaXNOZWdhdGl2ZSkge1xuXHRcdG51bWJlciA9IC1udW1iZXI7XG5cdH1cblxuXHRsZXQgbG9jYWxlT3B0aW9ucztcblxuXHRpZiAob3B0aW9ucy5taW5pbXVtRnJhY3Rpb25EaWdpdHMgIT09IHVuZGVmaW5lZCkge1xuXHRcdGxvY2FsZU9wdGlvbnMgPSB7bWluaW11bUZyYWN0aW9uRGlnaXRzOiBvcHRpb25zLm1pbmltdW1GcmFjdGlvbkRpZ2l0c307XG5cdH1cblxuXHRpZiAob3B0aW9ucy5tYXhpbXVtRnJhY3Rpb25EaWdpdHMgIT09IHVuZGVmaW5lZCkge1xuXHRcdGxvY2FsZU9wdGlvbnMgPSB7bWF4aW11bUZyYWN0aW9uRGlnaXRzOiBvcHRpb25zLm1heGltdW1GcmFjdGlvbkRpZ2l0cywgLi4ubG9jYWxlT3B0aW9uc307XG5cdH1cblxuXHRpZiAobnVtYmVyIDwgMSkge1xuXHRcdGNvbnN0IG51bWJlclN0cmluZyA9IHRvTG9jYWxlU3RyaW5nKG51bWJlciwgb3B0aW9ucy5sb2NhbGUsIGxvY2FsZU9wdGlvbnMpO1xuXHRcdHJldHVybiBwcmVmaXggKyBudW1iZXJTdHJpbmcgKyBzZXBhcmF0b3IgKyBVTklUU1swXTtcblx0fVxuXG5cdGNvbnN0IGV4cG9uZW50ID0gTWF0aC5taW4oTWF0aC5mbG9vcihvcHRpb25zLmJpbmFyeSA/IE1hdGgubG9nKG51bWJlcikgLyBNYXRoLmxvZygxMDI0KSA6IE1hdGgubG9nMTAobnVtYmVyKSAvIDMpLCBVTklUUy5sZW5ndGggLSAxKTtcblx0bnVtYmVyIC89IChvcHRpb25zLmJpbmFyeSA/IDEwMjQgOiAxMDAwKSAqKiBleHBvbmVudDtcblxuXHRpZiAoIWxvY2FsZU9wdGlvbnMpIHtcblx0XHRudW1iZXIgPSBudW1iZXIudG9QcmVjaXNpb24oMyk7XG5cdH1cblxuXHRjb25zdCBudW1iZXJTdHJpbmcgPSB0b0xvY2FsZVN0cmluZyhOdW1iZXIobnVtYmVyKSwgb3B0aW9ucy5sb2NhbGUsIGxvY2FsZU9wdGlvbnMpO1xuXG5cdGNvbnN0IHVuaXQgPSBVTklUU1tleHBvbmVudF07XG5cblx0cmV0dXJuIHByZWZpeCArIG51bWJlclN0cmluZyArIHNlcGFyYXRvciArIHVuaXQ7XG59XG4iLCAiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHR5cGUgeyBSZW5kZXJFbGVtZW50UHJvcHMgfSBmcm9tIFwic2xhdGUtcmVhY3RcIjtcbmltcG9ydCB7IFJpY2hFbGVtZW50LCBpc0Jsb2NrLCBpc1N1cGVyQmxvY2sgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplclwiO1xuXG5pbnRlcmZhY2UgSUN1cnJlbnRlbGVtZW50UHJvdmlkZXJQcm9wcyB7XG4gIGJsb2NrOiBSaWNoRWxlbWVudDtcbiAgc3VwZXJibG9ja3M6IFJpY2hFbGVtZW50W107XG4gIGlubGluZTogUmljaEVsZW1lbnQ7XG59XG5cbmNvbnN0IEN1cnJlbnRFbGVtZW50Q29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8SUN1cnJlbnRlbGVtZW50UHJvdmlkZXJQcm9wcz4obnVsbCk7XG5cbmV4cG9ydCBjbGFzcyBDdXJyZW50RWxlbWVudFByb3ZpZGVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxJQ3VycmVudGVsZW1lbnRQcm92aWRlclByb3BzPiB7XG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxDdXJyZW50RWxlbWVudENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3RoaXMucHJvcHN9Pnt0aGlzLnByb3BzLmNoaWxkcmVufTwvQ3VycmVudEVsZW1lbnRDb250ZXh0LlByb3ZpZGVyPlxuICAgIClcbiAgfVxufVxuXG5pbnRlcmZhY2UgSUN1cnJlbnRFbGVtZW50UmV0cmlldmVyUHJvcHMgZXh0ZW5kcyBSZW5kZXJFbGVtZW50UHJvcHMge1xuICBmbjogKFxuICAgIHBhc3NlZFByb3BzOiBSZW5kZXJFbGVtZW50UHJvcHMsXG4gICAgaXNTZWxlY3RlZDogYm9vbGVhbixcbiAgICBzZWxlY3Rpb25Dcml0ZXJpYTogXCJibG9ja1wiIHwgXCJzdXBlcmJsb2NrXCIgfCBcImlubGluZVwiLFxuICAgIHNlbGVjdGlvbklzUHJpbWFyeTogYm9vbGVhbixcbiAgKSA9PiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmludGVyZmFjZSBJQ3VycmVudEVsZW1lbnRSZXRyaWV2ZXJPcHRpbWl6ZXJQcm9wcyBleHRlbmRzIElDdXJyZW50RWxlbWVudFJldHJpZXZlclByb3BzIHtcbiAgaXNTZWxlY3RlZDogYm9vbGVhbjtcbiAgc2VsZWN0aW9uQ3JpdGVyaWE6IFwiYmxvY2tcIiB8IFwic3VwZXJibG9ja1wiIHwgXCJpbmxpbmVcIjtcbiAgc2VsZWN0aW9uSXNQcmltYXJ5OiBib29sZWFuO1xufVxuXG5jbGFzcyBDdXJyZW50RWxlbWVudFJldHJpZXZlck9wdGltaXplciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8SUN1cnJlbnRFbGVtZW50UmV0cmlldmVyT3B0aW1pemVyUHJvcHM+IHtcbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5wcm9wcy5mbih7XG4gICAgICAgIGF0dHJpYnV0ZXM6IHRoaXMucHJvcHMuYXR0cmlidXRlcyxcbiAgICAgICAgY2hpbGRyZW46IHRoaXMucHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGVsZW1lbnQ6IHRoaXMucHJvcHMuZWxlbWVudCxcbiAgICAgIH0sIHRoaXMucHJvcHMuaXNTZWxlY3RlZCwgdGhpcy5wcm9wcy5zZWxlY3Rpb25Dcml0ZXJpYSwgdGhpcy5wcm9wcy5zZWxlY3Rpb25Jc1ByaW1hcnkpXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ3VycmVudEVsZW1lbnRSZXRyaWV2ZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PElDdXJyZW50RWxlbWVudFJldHJpZXZlclByb3BzPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJQ3VycmVudEVsZW1lbnRSZXRyaWV2ZXJQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMuY29uc3VtZSA9IHRoaXMuY29uc3VtZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgcHVibGljIGNvbnN1bWUoc2VsZWN0aW9uOiBJQ3VycmVudGVsZW1lbnRQcm92aWRlclByb3BzKSB7XG4gICAgY29uc3QgZWxlbWVudEluUXVlc3Rpb24gPSB0aGlzLnByb3BzLmVsZW1lbnQ7XG4gICAgbGV0IGlzU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICBsZXQgc2VsZWN0aW9uQ3JpdGVyaWE6IFwiYmxvY2tcIiB8IFwic3VwZXJibG9ja1wiIHwgXCJpbmxpbmVcIiA9IG51bGw7XG4gICAgbGV0IHNlbGVjdGlvbklzUHJpbWFyeTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGlmIChpc0Jsb2NrKGVsZW1lbnRJblF1ZXN0aW9uKSkge1xuICAgICAgc2VsZWN0aW9uQ3JpdGVyaWEgPSBcImJsb2NrXCI7XG4gICAgICBpc1NlbGVjdGVkID0gc2VsZWN0aW9uLmJsb2NrID09PSBlbGVtZW50SW5RdWVzdGlvbjtcbiAgICAgIHNlbGVjdGlvbklzUHJpbWFyeSA9IGlzU2VsZWN0ZWQgJiYgIXNlbGVjdGlvbi5pbmxpbmU7XG4gICAgfSBlbHNlIGlmIChpc1N1cGVyQmxvY2soZWxlbWVudEluUXVlc3Rpb24pKSB7XG4gICAgICBzZWxlY3Rpb25Dcml0ZXJpYSA9IFwic3VwZXJibG9ja1wiO1xuICAgICAgY29uc3QgaW5kZXggPSBzZWxlY3Rpb24uc3VwZXJibG9ja3MuZmluZEluZGV4KChlKSA9PiBlID09PSBlbGVtZW50SW5RdWVzdGlvbik7XG4gICAgICBpc1NlbGVjdGVkID0gaW5kZXggIT09IC0xO1xuICAgICAgc2VsZWN0aW9uSXNQcmltYXJ5ID0gaXNTZWxlY3RlZCAmJiAhc2VsZWN0aW9uLmJsb2NrICYmICFzZWxlY3Rpb24uaW5saW5lICYmIGluZGV4ID09PSBzZWxlY3Rpb24uc3VwZXJibG9ja3MubGVuZ3RoIC0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZWN0aW9uQ3JpdGVyaWEgPSBcImlubGluZVwiO1xuICAgICAgaXNTZWxlY3RlZCA9IHNlbGVjdGlvbi5pbmxpbmUgPT09IGVsZW1lbnRJblF1ZXN0aW9uO1xuICAgICAgc2VsZWN0aW9uSXNQcmltYXJ5ID0gaXNTZWxlY3RlZDtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEN1cnJlbnRFbGVtZW50UmV0cmlldmVyT3B0aW1pemVyXG4gICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICBpc1NlbGVjdGVkPXtpc1NlbGVjdGVkfVxuICAgICAgICBzZWxlY3Rpb25Dcml0ZXJpYT17c2VsZWN0aW9uQ3JpdGVyaWF9XG4gICAgICAgIHNlbGVjdGlvbklzUHJpbWFyeT17c2VsZWN0aW9uSXNQcmltYXJ5fVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8Q3VycmVudEVsZW1lbnRDb250ZXh0LkNvbnN1bWVyPnt0aGlzLmNvbnN1bWV9PC9DdXJyZW50RWxlbWVudENvbnRleHQuQ29uc3VtZXI+XG4gICAgKVxuICB9XG59IiwgImltcG9ydCB7IElSb290TGV2ZWxEb2N1bWVudCwgUmljaEVsZW1lbnQsIGRlc2VyaWFsaXplIH0gZnJvbSBcIi4uL3NlcmlhbGl6ZXJcIjtcbmltcG9ydCB7IElUZXh0IH0gZnJvbSBcIi4uL3NlcmlhbGl6ZXIvdHlwZXMvdGV4dFwiO1xuaW1wb3J0IGVxdWFscyBmcm9tIFwiZGVlcC1lcXVhbFwiO1xuXG4vKipcbiAqIENvdW50cyB0aGUgc2l6ZSBvZiB0aGUgZG9jdW1lbnRcbiAqIEBwYXJhbSByb290IFxuICovXG5leHBvcnQgZnVuY3Rpb24gY291bnRTaXplKHJvb3Q6IElSb290TGV2ZWxEb2N1bWVudCB8IFJpY2hFbGVtZW50IHwgSVRleHQpOiBudW1iZXIge1xuICBpZiAodHlwZW9mIChyb290IGFzIElUZXh0KS50ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIChyb290IGFzIElUZXh0KS50ZXh0Lmxlbmd0aDtcbiAgfVxuICBjb25zdCBjb3VudHMgPSAocm9vdCBhcyBJUm9vdExldmVsRG9jdW1lbnQpLmNoaWxkcmVuLm1hcChjb3VudFNpemUpO1xuICBpZiAoY291bnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2UgaWYgKGNvdW50cy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gY291bnRzWzBdO1xuICB9XG5cbiAgcmV0dXJuIGNvdW50cy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKTtcbn1cblxuLyoqXG4gKiBDb3VudHMgdGhlIHdvcmRzIG9mIHRoZSBkb2N1bWVudFxuICogQHBhcmFtIHJvb3QgXG4gKi9cbmNvbnN0IHNwYWNlUmVnZXggPSAvXlxccyskLztcbmV4cG9ydCBmdW5jdGlvbiBjb3VudFdvcmRzKHJvb3Q6IElSb290TGV2ZWxEb2N1bWVudCB8IFJpY2hFbGVtZW50IHwgSVRleHQpOiBudW1iZXIge1xuICBpZiAodHlwZW9mIChyb290IGFzIElUZXh0KS50ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIChyb290IGFzIElUZXh0KS50ZXh0LnNwbGl0KFwiIFwiKS5maWx0ZXIoKHYpID0+IHYgIT09IFwiXCIgJiYgIXNwYWNlUmVnZXgudGVzdCh2KSkubGVuZ3RoO1xuICB9XG4gIGNvbnN0IGNvdW50cyA9IChyb290IGFzIElSb290TGV2ZWxEb2N1bWVudCkuY2hpbGRyZW4ubWFwKGNvdW50V29yZHMpO1xuICBpZiAoY291bnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2UgaWYgKGNvdW50cy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gY291bnRzWzBdO1xuICB9XG5cbiAgcmV0dXJuIGNvdW50cy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKTtcbn1cblxuLyoqXG4gKiBDb3VudHMgdGhlIHNpemUgYW5kIHdvcmRzIG9mIHRoZSBkb2N1bWVudFxuICogQHBhcmFtIHJvb3QgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3VudFNpemVBbmRXb3Jkcyhyb290OiBJUm9vdExldmVsRG9jdW1lbnQgfCBSaWNoRWxlbWVudCB8IElUZXh0KTogW251bWJlciwgbnVtYmVyXSB7XG4gIGlmICh0eXBlb2YgKHJvb3QgYXMgSVRleHQpLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gW1xuICAgICAgKHJvb3QgYXMgSVRleHQpLnRleHQubGVuZ3RoLFxuICAgICAgKHJvb3QgYXMgSVRleHQpLnRleHQuc3BsaXQoXCIgXCIpLmZpbHRlcigodikgPT4gdiAhPT0gXCJcIikubGVuZ3RoLFxuICAgIF07XG4gIH1cbiAgY29uc3QgcmVzdWx0cyA9IChyb290IGFzIElSb290TGV2ZWxEb2N1bWVudCkuY2hpbGRyZW4ubWFwKGNvdW50U2l6ZUFuZFdvcmRzKTtcbiAgaWYgKHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFswLCAwXTtcbiAgfSBlbHNlIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiByZXN1bHRzWzBdO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdHMucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgcmV0dXJuIFthWzBdICsgYlswXSwgYVsxXSArIGJbMV1dO1xuICB9KTtcbn1cblxuY29uc3QgaW52YWxpZENvbXBhcmFibGVzID0gW1xuICBcInNyY1NldFwiLFxuICBcInNyY1wiLFxuICBcInNpemVzXCIsXG5dO1xuXG5mdW5jdGlvbiByZW1vdmVJbnZhbGlkQ29tcGFyYWJsZXMoZWxlbTogUmljaEVsZW1lbnQgfCBJUm9vdExldmVsRG9jdW1lbnQpIHtcbiAgZm9yIChsZXQgY29tcGFyYWJsZSBvZiBpbnZhbGlkQ29tcGFyYWJsZXMpIHtcbiAgICBpZiAoZWxlbVtjb21wYXJhYmxlXSkge1xuICAgICAgZWxlbVtjb21wYXJhYmxlXSA9IG51bGw7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChlbGVtLmNoaWxkcmVuKSB7XG4gICAgZWxlbS5jaGlsZHJlbi5mb3JFYWNoKHJlbW92ZUludmFsaWRDb21wYXJhYmxlcyBhcyBhbnkpO1xuICB9XG5cbiAgcmV0dXJuIGVsZW07XG59XG5cbi8qKlxuICogY29tcGFyZXMgdHdvIHRleHQgZm9yIGVxdWl2YWxlbmNlXG4gKiBAcGFyYW0gdGV4dDEgXG4gKiBAcGFyYW0gdGV4dDIgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0VxdWFsaXR5KHRleHQxOiBzdHJpbmcgfCBOb2RlW10sIHRleHQyOiBzdHJpbmcgfCBOb2RlW10pIHtcbiAgaWYgKHRleHQxID09PSB0ZXh0Mikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKHRleHQxID09PSBudWxsIHx8IHRleHQyID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHRleHQxID09PSB0ZXh0MjtcbiAgfVxuXG4gIGNvbnN0IGRvY3VtZW50MSA9IHJlbW92ZUludmFsaWRDb21wYXJhYmxlcyhkZXNlcmlhbGl6ZSh0ZXh0MSkpO1xuICBjb25zdCBkb2N1bWVudDIgPSByZW1vdmVJbnZhbGlkQ29tcGFyYWJsZXMoZGVzZXJpYWxpemUodGV4dDIpKTtcblxuICByZXR1cm4gZXF1YWxzKGRvY3VtZW50MS5jaGlsZHJlbiwgZG9jdW1lbnQyLmNoaWxkcmVuKTtcbn1cblxuLyoqXG4gKiBjb21wYXJlcyB0d28gcGxhaW4gdGV4dCBmb3IgZXF1aXZhbGVuY2VcbiAqIEBwYXJhbSB0ZXh0MSBcbiAqIEBwYXJhbSB0ZXh0MiBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRXF1YWxpdHlQbGFpbih0ZXh0MTogc3RyaW5nLCB0ZXh0Mjogc3RyaW5nKSB7XG4gIHJldHVybiB0ZXh0MSA9PT0gdGV4dDI7XG59XG4iLCAiaW1wb3J0IHsgSVJvb3RMZXZlbERvY3VtZW50LCBSaWNoRWxlbWVudCB9IGZyb20gXCIuLi9zZXJpYWxpemVyXCI7XG5pbXBvcnQgeyBJVGV4dCB9IGZyb20gXCIuLi9zZXJpYWxpemVyL3R5cGVzL3RleHRcIjtcbmltcG9ydCB7IElCYXNlSTE4blJpY2hUZXh0SW5mbyB9IGZyb20gXCIuL3NsYXRlXCI7XG5cbi8qKlxuICogbG9jYWxlIHJlcGxhY2VyIGZ1bmN0aW9uIHVzZWQgaGVyZSBzbyB0aGF0IGl0ZW1pemUgaXMgbm90IG5lZWRlZCB0byBiZSBpbXBvcnRlZFxuICogdGhpcyBpcyBhIGNvcHlcbiAqIFxuICogQHBhcmFtIHN0ciBcbiAqIEBwYXJhbSBhcmdzIFxuICogQHJldHVybnMgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2NhbGVSZXBsYWNlcihzdHI6IHN0cmluZywgLi4uYXJnczogYW55W10pOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL1xceyhcXGQrKVxcfS9nLCAobWF0Y2gsIGluZGV4TWF0Y2gpID0+IHtcbiAgICBpZiAodHlwZW9mIGFyZ3NbaW5kZXhNYXRjaF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybiBcIj9cIjtcbiAgICB9IGVsc2UgaWYgKGFyZ3NbaW5kZXhNYXRjaF0gPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgICByZXR1cm4gYXJnc1tpbmRleE1hdGNoXS50b1N0cmluZygpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IG1pbWVFeHRlbnNpb25zID0ge1xuICBcImF1ZGlvL2FhY1wiOiBcImFhY1wiLFxuICBcImFwcGxpY2F0aW9uL3gtYWJpd29yZFwiOiBcImFid1wiLFxuICBcImFwcGxpY2F0aW9uL3gtZnJlZWFyY1wiOiBcImFyY1wiLFxuICBcInZpZGVvL3gtbXN2aWRlb1wiOiBcImF2aVwiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5hbWF6b24uZWJvb2tcIjogXCJhendcIixcbiAgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIjogXCJiaW5cIixcbiAgXCJpbWFnZS9ibXBcIjogXCJibXBcIixcbiAgXCJhcHBsaWNhdGlvbi94LWJ6aXBcIjogXCJielwiLFxuICBcImFwcGxpY2F0aW9uL3gtYnppcDJcIjogXCJiejJcIixcbiAgXCJhcHBsaWNhdGlvbi94LWNzaFwiOiBcImNzaFwiLFxuICBcInRleHQvY3NzXCI6IFwiY3NzXCIsXG4gIFwidGV4dC9jc3ZcIjogXCJjc3ZcIixcbiAgXCJhcHBsaWNhdGlvbi9tc3dvcmRcIjogXCJkb2NcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudFwiOiBcImRvY3hcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQubXMtZm9udG9iamVjdFwiOiBcImVvdFwiLFxuICBcImFwcGxpY2F0aW9uL2VwdWIremlwXCI6IFwiZXB1YlwiLFxuICBcImltYWdlL2dpZlwiOiBcImdpZlwiLFxuICBcInRleHQvaHRtbFwiOiBcImh0bWxcIixcbiAgXCJpbWFnZS92bmQubWljcm9zb2Z0Lmljb25cIjogXCJpY29cIixcbiAgXCJ0ZXh0L2NhbGVuZGFyXCI6IFwiaWNzXCIsXG4gIFwiYXBwbGljYXRpb24vamF2YS1hcmNoaXZlXCI6IFwiamFyXCIsXG4gIFwiaW1hZ2UvanBlZ1wiOiBcImpwZ1wiLFxuICBcInRleHQvamF2YXNjcmlwdFwiOiBcImpzXCIsXG4gIFwiYXBwbGljYXRpb24vanNvblwiOiBcImpzb25cIixcbiAgXCJhcHBsaWNhdGlvbi9sZCtqc29uXCI6IFwianNvbmxkXCIsXG4gIFwiYXVkaW8vbWlkaSBhdWRpby94LW1pZGlcIjogXCJtaWRcIixcbiAgXCJhdWRpby9tcGVnXCI6IFwibXAzXCIsXG4gIFwidmlkZW8vbXBlZ1wiOiBcIm1wZWdcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQuYXBwbGUuaW5zdGFsbGVyK3htbFwiOiBcIm1wa2dcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQub2FzaXMub3BlbmRvY3VtZW50LnByZXNlbnRhdGlvblwiOiBcIm9kcFwiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5vYXNpcy5vcGVuZG9jdW1lbnQuc3ByZWFkc2hlZXRcIjogXCJvZHNcIixcbiAgXCJhcHBsaWNhdGlvbi92bmQub2FzaXMub3BlbmRvY3VtZW50LnRleHRcIjogXCJvZHRcIixcbiAgXCJhdWRpby9vZ2dcIjogXCJvZ2FcIixcbiAgXCJ2aWRlby9vZ2dcIjogXCJvZ3ZcIixcbiAgXCJhcHBsaWNhdGlvbi9vZ2dcIjogXCJvZ3hcIixcbiAgXCJmb250L290ZlwiOiBcIm90ZlwiLFxuICBcImltYWdlL3BuZ1wiOiBcInBuZ1wiLFxuICBcImFwcGxpY2F0aW9uL3BkZlwiOiBcInBkZlwiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5tcy1wb3dlcnBvaW50XCI6IFwicHB0XCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnByZXNlbnRhdGlvbm1sLnByZXNlbnRhdGlvblwiOiBcInBwdHhcIixcbiAgXCJhcHBsaWNhdGlvbi94LXJhci1jb21wcmVzc2VkXCI6IFwicmFyXCIsXG4gIFwiYXBwbGljYXRpb24vcnRmXCI6IFwicnRmXCIsXG4gIFwiYXBwbGljYXRpb24veC1zaFwiOiBcInNoXCIsXG4gIFwiaW1hZ2Uvc3ZnK3htbFwiOiBcInN2Z1wiLFxuICBcImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCI6IFwic3dmXCIsXG4gIFwiYXBwbGljYXRpb24veC10YXJcIjogXCJ0YXJcIixcbiAgXCJpbWFnZS90aWZmXCI6IFwidGlmZlwiLFxuICBcImZvbnQvdHRmXCI6IFwidHRmXCIsXG4gIFwidGV4dC9wbGFpblwiOiBcInR4dFwiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC52aXNpb1wiOiBcInZzZFwiLFxuICBcImF1ZGlvL3dhdlwiOiBcIndhdlwiLFxuICBcImF1ZGlvL3dlYm1cIjogXCJ3ZWJhXCIsXG4gIFwidmlkZW8vd2VibVwiOiBcIndlYm1cIixcbiAgXCJpbWFnZS93ZWJwXCI6IFwid2VicFwiLFxuICBcImZvbnQvd29mZlwiOiBcIndvZmZcIixcbiAgXCJmb250L3dvZmYyXCI6IFwid29mZjJcIixcbiAgXCJhcHBsaWNhdGlvbi94aHRtbCt4bWxcIjogXCJ4aHRtbFwiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbFwiOiBcInhsc1wiLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0XCI6IFwieGxzeFwiLFxuICBcImFwcGxpY2F0aW9uL3htbCBpZiBub3QgcmVhZGFibGUgZnJvbSBjYXN1YWwgdXNlcnMgKFJGQyAzMDIzLCBzZWN0aW9uIDMpXCI6IFwieG1sXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm1vemlsbGEueHVsK3htbFwiOiBcInh1bFwiLFxuICBcImFwcGxpY2F0aW9uL3ppcFwiOiBcInppcFwiLFxuICBcInZpZGVvLzNncHBcIjogXCIzZ3BcIixcbiAgXCJ2aWRlby8zZ3BwMlwiOiBcIjNnMlwiLFxuICBcImFwcGxpY2F0aW9uL3gtN3otY29tcHJlc3NlZFwiOiBcIjd6XCIsXG59O1xuXG4vKipcbiAqIENvbnZlcnRzIGEgbWltZSB0eXBlIHRvIGFuIGV4dGVuc2lvbiB1c2luZyBhIGtub3duIGV4dGVuc2lvbiBsaXN0XG4gKiBcbiAqIENvcGllZCBzbyB0aGF0IGl0ZW1pemUgZG9lc24ndCBuZWVkIHRvIGJlIGltcG9ydGVkIGFzIHdlbGxcbiAqIFxuICogQHBhcmFtIHN0ciB0aGUgc3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgbWltZSB0eXBlXG4gKiBAcmV0dXJucyBhbiBleHRlbnNpb24gb3IgdHh0IGlmIGl0IGRvZXNuJ3Qga25vd1xuICovXG5leHBvcnQgZnVuY3Rpb24gbWltZVR5cGVUb0V4dGVuc2lvbihzdHI6IHN0cmluZykge1xuICBjb25zdCBleHBlY3RlZEV4dCA9IG1pbWVFeHRlbnNpb25zW3N0cl07XG4gIGlmIChleHBlY3RlZEV4dCkge1xuICAgIHJldHVybiBleHBlY3RlZEV4dDtcbiAgfVxuICByZXR1cm4gKHN0ci5zcGxpdChcIi9cIilbMV0gfHwgXCJ0eHRcIikuc3Vic3RyKDAsIDMpO1xufVxuXG5cbi8qKlxuICogVGhlIGF0dHJpYnV0ZXMgdGhhdCBleGlzdCBpbiBhIGdpdmVuIGVsZW1lbnQgdGhhdCBtYXJrIHN1Y2hcbiAqIGFzIGEgdGVtcGxhdGVkIGVsZW1lbnRcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgdGVtcGxhdGVkQXR0cmlidXRlcyA9IFtcbiAgXCJ0aHJlZlwiLFxuICBcInRleHRDb250ZW50XCIsXG4gIFwiaHRtbFwiLFxuICBcImZvckVhY2hcIixcbiAgXCJjb250ZXh0XCIsXG4gIFwidWlIYW5kbGVyXCIsXG5dO1xuXG4vKipcbiAqIFRoZSBpbnRlcmFjdGl2ZSBhY3Rpb25zIHRoYXQgZXhpc3QgdGhhdCBtYXJrXG4gKiBzb21ldGhpbmcgYXMgYSB0ZW1wbGF0ZWQgZWxlbWVudCB0aGF0IGlzIGludGVyYWN0aXZlXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IHRlbXBsYXRlZEludGVyYWN0aXZlQWN0aW9ucyA9IFtcbiAgXCJjbGlja1wiLFxuICBcImJsdXJcIixcbiAgXCJmb2N1c1wiLFxuICBcImlucHV0XCIsXG4gIFwia2V5ZG93blwiLFxuICBcImtleXByZXNzXCIsXG4gIFwia2V5dXBcIixcbiAgXCJtb3VzZWRvd25cIixcbiAgXCJtb3VzZWVudGVyXCIsXG4gIFwibW91c2VsZWF2ZVwiLFxuICBcIm1vdXNlbW92ZVwiLFxuICBcIm1vdXNlb3ZlclwiLFxuICBcIm1vdXNlb3V0XCIsXG4gIFwibW91c2V1cFwiLFxuICBcIm1vdXNld2hlZWxcIixcbiAgXCJ0b3VjaHN0YXJ0XCIsXG4gIFwidG91Y2htb3ZlXCIsXG4gIFwidG91Y2hlbmRcIixcbiAgXCJ0b3VjaGNhbmNlbFwiLFxuICBcIndoZWVsXCIsXG5dO1xuXG4vKipcbiAqIFRoZSBhdHRyaWJ1dGVzIHRoYXQgZXhpc3QgaW4gYSBnaXZlbiBlbGVtZW50IHRoYXQgbWFyayBzdWNoXG4gKiBhcyBhIHRlbXBsYXRlZCBzdHlsZWQgZWxlbWVudHNcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgdGVtcGxhdGVkU3R5bGVkQXR0cmlidXRlcyA9IFtcbiAgXCJzdHlsZUhvdmVyXCIsXG4gIFwic3R5bGVBY3RpdmVcIixcbl07XG5cblxuLyoqXG4gKiBUaGUgbGlzdCBvZiBzcGVjaWFsIHR5cGVzIHRvIHVzZVxuICogQGlnbm9yZVxuICovXG5jb25zdCBzcGVjaWFsVHlwZXMgPSB7XG4gIFwidm9pZC1ibG9ja1wiOiBcImNvbnRhaW5lclwiLFxuICBcInZvaWQtc3VwZXJibG9ja1wiOiBcImNvbnRhaW5lclwiLFxuICBcInZvaWQtaW5saW5lXCI6IFwiaW5saW5lXCIsXG59O1xuXG4vKipcbiAqIFRoZSBub2RlIGluZm9ybWF0aW9uIHRoYXQgaXMgZXh0cmFjdGVkIG9mIGEgZ2l2ZW4gbm9kZSB1c2VkXG4gKiB0byBiZSBkaXNwbGF5ZWQgdG8gdGhlIHVzZXJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJTm9kZUluZm8ge1xuICAvKipcbiAgICogVGhlIG5hbWUgdGhhdCBpcyBnaXZlbiwgaHVtYW4gcmVhZGFibGUgaW4gdGhlIGdpdmVuIGxhbmd1YWdlXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBXaGV0aGVyIGl0IHJlcHJlc2VudHMgYSB0ZW1wbGF0ZWQgbm9kZVxuICAgKi9cbiAgaXNUZW1wbGF0ZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFdoZXRoZXIgaXQgcmVwcmVzZW50cyBhIHRleHQgbm9kZVxuICAgKi9cbiAgaXNUZXh0OiBib29sZWFuO1xuICAvKipcbiAgICogU3BlY2lmaWVzIHdoZXRoZXIgaXQgaXMgYW4gaW50ZXJhY3RpdmUgZWxlbWVudFxuICAgKi9cbiAgaXNJbnRlcmFjdGl2ZTogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBQcm92aWRlcyB0aGUgbm9kZSBpbmZvIG9mIGEgZ2l2ZW4gbm9kZVxuICogQHBhcmFtIG5vZGUgdGhlIG5vZGUsIGVpdGhlciB0ZXh0IG9yIHJpY2ggZWxlbWVudFxuICogQHBhcmFtIGkxOG5EYXRhIHRoZSBpMThuIGluZm9ybWF0aW9uIHRvIGJlIHVzZWQgdG8gY3JlYXRlIHRoZSBuYW1lXG4gKiBAcmV0dXJucyB0aGUgbm9kZSBpbmZvcm1hdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5mb0ZvcihcbiAgbm9kZTogUmljaEVsZW1lbnQgfCBJVGV4dCB8IElSb290TGV2ZWxEb2N1bWVudCxcbiAgaTE4bkRhdGE6IElCYXNlSTE4blJpY2hUZXh0SW5mbyxcbik6IElOb2RlSW5mbyB7XG4gIGlmICgobm9kZSBhcyBhbnkpLnR5cGUgPT09IFwiZG9jdW1lbnRcIikge1xuICAgIHJldHVybiBudWxsIGFzIGFueTtcbiAgfVxuXG4gIC8vIGNoZWNrIGZvciB3aGV0aGVyIGlzIGludGVyYWN0aXZlIGFuZCBvdGhlciBvcHRpb25zXG4gIGNvbnN0IGlzSW50ZXJhY3RpdmUgPSB0ZW1wbGF0ZWRJbnRlcmFjdGl2ZUFjdGlvbnMuc29tZSgoYXR0cikgPT4gdHlwZW9mIG5vZGVbYXR0cl0gIT09IFwidW5kZWZpbmVkXCIgJiYgbm9kZVthdHRyXSAhPT0gbnVsbCk7XG4gIGNvbnN0IGlzVGVtcGxhdGVTdHlsZWQgPSB0ZW1wbGF0ZWRTdHlsZWRBdHRyaWJ1dGVzLnNvbWUoKGF0dHIpID0+IHR5cGVvZiBub2RlW2F0dHJdICE9PSBcInVuZGVmaW5lZFwiICYmIG5vZGVbYXR0cl0gIT09IG51bGwpO1xuICBjb25zdCBpc0Jhc2ljU3R5bGVkID0gISEobm9kZSBhcyBSaWNoRWxlbWVudCkuc3R5bGUgfHwgKChub2RlIGFzIFJpY2hFbGVtZW50KS5yaWNoQ2xhc3NMaXN0ICYmICgobm9kZSBhcyBSaWNoRWxlbWVudCkucmljaENsYXNzTGlzdCBhcyBhbnkpLmxlbmd0aCk7XG4gIGNvbnN0IGlzQmFzaWNUZW1wbGF0ZWQgPSB0ZW1wbGF0ZWRBdHRyaWJ1dGVzLnNvbWUoKGF0dHIpID0+IHR5cGVvZiBub2RlW2F0dHJdICE9PSBcInVuZGVmaW5lZFwiICYmIG5vZGVbYXR0cl0gIT09IG51bGwpO1xuICBjb25zdCBpc1RlbXBsYXRlID0gaXNJbnRlcmFjdGl2ZSB8fCBpc1RlbXBsYXRlU3R5bGVkIHx8IGlzQmFzaWNUZW1wbGF0ZWQ7XG5cbiAgLy8gbm93IGxldCdzIGJ1aWxkIHRoZSBuYW1lIGxhYmVsIGZvciB0aGUgZ2l2ZW4gbGFuZ3VhZ2VcbiAgY29uc3QgZm91bmRDdXN0b21OYW1lID0gKCEobm9kZSBhcyBSaWNoRWxlbWVudCkuZ2l2ZW5OYW1lICYmIChub2RlIGFzIFJpY2hFbGVtZW50KS51aUhhbmRsZXIpID9cbiAgICBpMThuRGF0YS5yaWNoVUlIYW5kbGVyRWxlbWVudFsobm9kZSBhcyBSaWNoRWxlbWVudCBhcyBhbnkpLnVpSGFuZGxlci5yZXBsYWNlKC8tL2csIFwiX1wiKV0gOiBudWxsO1xuICBsZXQgbmFtZUxhYmVsOiBzdHJpbmcgPSAobm9kZSBhcyBSaWNoRWxlbWVudCkuZ2l2ZW5OYW1lID8gKG5vZGUgYXMgUmljaEVsZW1lbnQpLmdpdmVuTmFtZSA6IChcbiAgICBmb3VuZEN1c3RvbU5hbWUgfHwgKFxuICAgICAgKG5vZGUgYXMgUmljaEVsZW1lbnQpLnR5cGUgP1xuICAgICAgICAoaTE4bkRhdGFbc3BlY2lhbFR5cGVzWyhub2RlIGFzIFJpY2hFbGVtZW50KS50eXBlXSA/IHNwZWNpYWxUeXBlc1sobm9kZSBhcyBSaWNoRWxlbWVudCkudHlwZV0gOiAobm9kZSBhcyBSaWNoRWxlbWVudCkudHlwZS5yZXBsYWNlKC8tL2csIFwiX1wiKV0gfHxcbiAgICAgICAgICAobm9kZSBhcyBSaWNoRWxlbWVudCkudHlwZSkgOlxuICAgICAgICBpMThuRGF0YS50ZXh0KVxuICApO1xuXG4gIGlmICghKG5vZGUgYXMgUmljaEVsZW1lbnQpLmdpdmVuTmFtZSAmJiAhZm91bmRDdXN0b21OYW1lKSB7XG4gICAgaWYgKGlzQmFzaWNTdHlsZWQgfHwgaXNUZW1wbGF0ZVN0eWxlZCkge1xuICAgICAgbmFtZUxhYmVsID0gbG9jYWxlUmVwbGFjZXIoaTE4bkRhdGEuc3R5bGVkLCBuYW1lTGFiZWwpO1xuICAgIH1cbiAgICBpZiAoaXNJbnRlcmFjdGl2ZSkge1xuICAgICAgbmFtZUxhYmVsID0gbG9jYWxlUmVwbGFjZXIoaTE4bkRhdGEuaW50ZXJhY3RpdmUsIG5hbWVMYWJlbCk7XG4gICAgfVxuICAgIGlmIChpc1RlbXBsYXRlKSB7XG4gICAgICBuYW1lTGFiZWwgPSBsb2NhbGVSZXBsYWNlcihpMThuRGF0YS50ZW1wbGF0ZSwgbmFtZUxhYmVsKTtcbiAgICB9XG4gIH1cblxuICAvLyBhbmQgd2UgY2FuIHJldHVybiB0aGUgaW5mb3JtYXRpb24gbm93XG4gIHJldHVybiB7XG4gICAgaXNUZW1wbGF0ZSxcbiAgICBpc0ludGVyYWN0aXZlLFxuICAgIG5hbWU6IG5hbWVMYWJlbCxcbiAgICBpc1RleHQ6IHR5cGVvZiAobm9kZSBhcyBJVGV4dCkudGV4dCA9PT0gXCJzdHJpbmdcIixcbiAgfVxufSIsICIvKipcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgZmFzdCBwcm90b3R5cGluZyB3cmFwcGVyIHRoYXQgdXNlcyB0aGUgbWF0ZXJpYWwgVUkgZWxlbWVudHNcbiAqIGluIG9yZGVyIHRvIGNyZWF0ZSB0aGUgc2xhdGUgZWRpdG9yIGZvciB0aGUgUHJvcGVydHlWaWV3VGV4dFxuICogXG4gKiBUaGUgd3JhcHBlciBjb21wb25lbnQgaXMgYWRkZWQgYXMgYSBwcm9wZXJ0eSB0byB0aGUgc2xhdGUgZWRpdG9yIGl0c2VsZiBzbyBvdGhlciB3cmFwcGVyc1xuICogY2FuIGJlIGFkZGVkIGFzIHJlcGxhY2VtZW50LCB5b3UgY2FuIGFsc28gZGVzaWduIHlvdXIgb3duIHdyYXBwZXIgYmFzZWQgb24gdGhpcyBvbmVcbiAqIFxuICogQG1vZHVsZVxuICovXG5cbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJSGVscGVyRnVuY3Rpb25zLCBJU2xhdGVFZGl0b3JJbnRlcm5hbFN0YXRlVHlwZSwgSVNsYXRlRWRpdG9yV3JhcHBlckJhc2VQcm9wcyB9IGZyb20gXCIuXCI7XG5cbmltcG9ydCB7IFBhdGgsIFJhbmdlIH0gZnJvbSBcInNsYXRlXCI7XG5pbXBvcnQgeyBSaWNoRWxlbWVudCB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyXCI7XG5pbXBvcnQgeyBXcmFwcGVyRHJhd2VyIH0gZnJvbSBcIi4vZHJhd2VyXCI7XG5pbXBvcnQgeyBGaWxlTG9hZEVycm9yRGlhbG9nLCBJRGlhbG9nQ29tcG9uZW50UHJvcHMgfSBmcm9tIFwiLi9kaWFsb2dzL2ZpbGVcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgeyBjb3VudFNpemVBbmRXb3JkcyB9IGZyb20gXCIuLi8uLi91dGlsXCI7XG5pbXBvcnQgeyBTVEFOREFSRF9URVhUX05PREUgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy90ZXh0XCI7XG5pbXBvcnQgeyBJQmFzZUkxOG5SaWNoVGV4dEluZm8sIGRlZmF1bHRCYXNlSTE4blJpY2hJbmZvRW5nbGlzaCB9IGZyb20gXCIuXCI7XG5pbXBvcnQgeyBJV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVByb3BzLCBJV3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXJQcm9wcywgSVdyYXBwZXJEcmF3ZXJUYWJzUHJvcHMgfSBmcm9tIFwiLi9kcmF3ZXJcIjtcbmltcG9ydCB0eXBlIHsgSVdyYXBwZXJEcmF3ZXJDaGVja0JveFByb3BzLCBJV3JhcHBlckRyYXdlck11bHRpU2VsZWN0RmllbGRQcm9wcywgSVdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZFByb3BzLCBJV3JhcHBlckRyYXdlclRleHRGaWVsZFByb3BzIH0gZnJvbSBcIi4vZHJhd2VyL2dlbmVyYWxcIjtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRXcmFwcGVySTE4blJpY2hJbmZvRW5nbGlzaDogSVdyYXBwZXJJMThuUmljaFRleHRJbmZvID0ge1xuICAuLi5kZWZhdWx0QmFzZUkxOG5SaWNoSW5mb0VuZ2xpc2gsXG4gIGZvcm1hdEFkZENvbnRhaW5lckxhYmVsOiBcImFkZCBjb250YWluZXJcIixcbiAgYWRkVGVtcGxhdGVIVE1MOiB7XG4gICAgbGFiZWw6IFwic2VsZWN0IGEgdGVtcGxhdGVcIixcbiAgICBwbGFjZWhvbGRlcjogXCJzZWxlY3QgYSB0ZW1wbGF0ZVwiLFxuICAgIHN1Ym1pdDogXCJva1wiLFxuICAgIHRpdGxlOiBcImFkZCB0ZW1wbGF0ZSBodG1sXCIsXG4gIH0sXG4gIGFkZFRlbXBsYXRlVGV4dDoge1xuICAgIGxhYmVsOiBcInNlbGVjdCBhIHRlbXBsYXRlXCIsXG4gICAgcGxhY2Vob2xkZXI6IFwic2VsZWN0IGEgdGVtcGxhdGVcIixcbiAgICBzdWJtaXQ6IFwib2tcIixcbiAgICB0aXRsZTogXCJhZGQgdGVtcGxhdGUgdGV4dFwiLFxuICB9LFxuICBmb3JtYXRBZGRDdXN0b21MYWJlbDogXCJhZGQgY3VzdG9tXCIsXG4gIGZvcm1hdEFkZEZpbGVMYWJlbDogXCJhZGQgZmlsZVwiLFxuICBmb3JtYXRBZGRJbWFnZUxhYmVsOiBcImFkZCBpbWFnZVwiLFxuICBmb3JtYXRBZGRUYWJsZUxhYmVsOiBcImFkZCB0YWJsZVwiLFxuICBmb3JtYXRBZGRUYm9keUxhYmVsOiBcImFkZCB0YWJsZSBib2R5XCIsXG4gIGZvcm1hdEFkZFRkTGFiZWw6IFwiYWRkIHRhYmxlIGNvbHVtblwiLFxuICBmb3JtYXRBZGRUZW1wbGF0ZUhUTUw6IFwiYWRkIHRlbXBsYXRlIGh0bWxcIixcbiAgZm9ybWF0QWRkVGVtcGxhdGVUZXh0OiBcImFkZCB0ZW1wbGF0ZSB0ZXh0XCIsXG4gIGZvcm1hdEFkZFRmb290TGFiZWw6IFwidG9nZ2xlIHRhYmxlIGZvb3RcIixcbiAgZm9ybWF0QWRkVGhlYWRMYWJlbDogXCJhZGQgdGFibGUgaGVhZFwiLFxuICBmb3JtYXRBZGRUaExhYmVsOiBcInRvZ2dsZSB0YWJsZSBoZWFkZXJcIixcbiAgZm9ybWF0QWRkVHJMYWJlbDogXCJhZGQgdGFibGUgcm93XCIsXG4gIGZvcm1hdEFkZFZpZGVvTGFiZWw6IFwiYWRkIHRhYmxlIHZpZGVvXCIsXG4gIGZvcm1hdEJvbGRMYWJlbDogXCJib2xkXCIsXG4gIGZvcm1hdERlbGV0ZUVsZW1lbnQ6IFwiZGVsZXRlXCIsXG4gIGZvcm1hdERlbFRkTGFiZWw6IFwiZGVsZXRlIHRhYmxlIGNvbHVtblwiLFxuICBmb3JtYXREZWxUaExhYmVsOiBcImRlbGV0ZSB0YWJsZSBoZWFkZXIgY29sdW1uXCIsXG4gIGZvcm1hdERlbFRyTGFiZWw6IFwiZGVsZXRlIHRhYmxlIHJvd1wiLFxuICBmb3JtYXRJdGFsaWNMYWJlbDogXCJpdGFsaWNcIixcbiAgZm9ybWF0TGlua0xhYmVsOiBcImxpbmtcIixcbiAgZm9ybWF0TGlzdEJ1bGxldGVkTGFiZWw6IFwiYnVsbGV0ZWQgbGlzdFwiLFxuICBmb3JtYXRMaXN0TnVtYmVyZWRMYWJlbDogXCJudW1iZXJlZCBsaXN0XCIsXG4gIGZvcm1hdE1ha2VMb29wOiBcIm1ha2UgbG9vcFwiLFxuICBmb3JtYXRNb3JlOiBcIm1vcmVcIixcbiAgZm9ybWF0UXVvdGVMYWJlbDogXCJxdW90ZVwiLFxuICBmb3JtYXRTZXRBY3RpdmVTdHlsZUxhYmVsOiBcImFjdGl2ZSBzdHlsZVwiLFxuICBmb3JtYXRTZXRDbGFzc0xhYmVsOiBcImNsYXNzIG5hbWVzXCIsXG4gIGZvcm1hdFNldENvbnRleHQ6IFwic2V0IGNvbnRleHRcIixcbiAgZm9ybWF0U2V0RXZlbnRIYW5kbGVyczogXCJzZXQgZXZlbnQgaGFuZGxlcnNcIixcbiAgZm9ybWF0U2V0SG92ZXJTdHlsZUxhYmVsOiBcImhvdmVyIHN0eWxlXCIsXG4gIGZvcm1hdFNldFJlbmRlckNvbmRpdGlvbjogXCJzZXQgcmVuZGVyIGNvbmRpdGlvblwiLFxuICBmb3JtYXRTZXRTdHlsZUxhYmVsOiBcInNldCBzdHlsZVwiLFxuICBmb3JtYXRTZXRVSUhhbmRsZXJBcmdMYWJlbDogXCJzZXQgdWkgaGFuZGxlciBhcmdcIixcbiAgZm9ybWF0U2V0VUlIYW5kbGVyQXJnTmFtZTogXCJzZXQgdWkgaGFuZGxlciBhcmcgbmFtZVwiLFxuICBmb3JtYXRTZXRVSUhhbmRsZXJBcmdWYWx1ZTogXCJzZXQgdWkgaGFuZGxlciBhcmcgdmFsdWVcIixcbiAgZm9ybWF0U2V0VUlIYW5kbGVyTGFiZWw6IFwic2V0IHVpIGhhbmRsZXJcIixcbiAgZm9ybWF0VGl0bGVMYWJlbDogXCJ0aXRsZVwiLFxuICBmb3JtYXRVbmRlcmxpbmVMYWJlbDogXCJ1bmRlcmxpbmVcIixcbiAgbG9hZFZpZGVvOiB7XG4gICAgaW52YWxpZDogXCJpbnZhbGlkIHVybFwiLFxuICAgIGxhYmVsOiBcInlvdXR1YmUgYW5kIHZpbWVvIG9ubHlcIixcbiAgICBwbGFjZWhvbGRlcjogXCJodHRwczovL3lvdXR1YmUuY29tLy4uLlwiLFxuICAgIHN1Ym1pdDogXCJpbnNlcnRcIixcbiAgICB0aXRsZTogXCJpbnNlcnQgYSB2aWRlb1wiLFxuICB9LFxuICBzZXRMaW5rOiB7XG4gICAgaW52YWxpZDogXCJpbnZhbGlkIGxpbmtcIixcbiAgICBsYWJlbDogXCJ1cmxcIixcbiAgICBwbGFjZWhvbGRlcjogXCJodHRwczovL3VybFwiLFxuICAgIHBsYWNlaG9sZGVyTG9jYWxPbmx5OiBcIi4vbG9jYWwtdXJsLW9ubHlcIixcbiAgICBzdWJtaXQ6IFwib2tcIixcbiAgICB0ZW1wbGF0ZWQ6IFwib3Igc2VsZWN0IG9uZSBvZiB0aGVzZSB0ZW1wbGF0ZSB2YWx1ZXNcIixcbiAgICB0ZW1wbGF0ZWRMYWJlbDogXCJ0ZW1wbGF0ZSB2YWx1ZVwiLFxuICAgIHRlbXBsYXRlZFBsYWNlaG9sZGVyOiBcInRlbXBsYXRlIHZhbHVlXCIsXG4gICAgdGVtcGxhdGVkVW5zcGVjaWZpZWQ6IFwidW5zcGVjaWZpZWRcIixcbiAgICB0aXRsZTogXCJpbnNlcnQgYSBsaW5rLFwiXG4gIH0sXG4gIGdlbmVyaWNFcnJvcjogXCJlcnJvclwiLFxuICBvazogXCJva1wiLFxufVxuXG4vKipcbiAqIFRoZSByaWNoIHRleHQgaW5mb3JtYXRpb25cbiAqIHRvIGJlIHVzZWQgdG8gYnVpbGQgYW4gZWRpdG9yIGFuZCBkZXNjcmliZVxuICogYSBub2RlXG4gKiBcbiAqIGNoZWNrIGJhc2ljSTE4blJpY2hJbmZvRW5nbGlzaCB0byBzZWUgaG93IGl0IGlzIGRvbmVcbiAqIHNvbWUgb2YgdGhlc2UgZWxlbWVudHMgYXJlIHNldHVwIHdpdGggYSBudW1iZXIgezB9XG4gKiBkdWUgdG8gaXRlbWl6ZSdzIGxvY2FsaXphdGlvbiBhbmQgdGhlIHdheSBpdCdzIGRvbmVcbiAqIGluIGl0cyBsb2NhbGl6YXRpb24gZmlsZXMsIGhlcmUgeW91IGhhdmUgdG8gZG8gYnkgY29kZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbyBleHRlbmRzIElCYXNlSTE4blJpY2hUZXh0SW5mbyB7XG4gIGZvcm1hdEJvbGRMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRJdGFsaWNMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRVbmRlcmxpbmVMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRMaW5rTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0VGl0bGVMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRRdW90ZUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdExpc3ROdW1iZXJlZExhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdExpc3RCdWxsZXRlZExhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEFkZEltYWdlTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0QWRkVmlkZW9MYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRGaWxlTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0QWRkQ29udGFpbmVyTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0QWRkVGFibGVMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRUaGVhZExhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEFkZFRib2R5TGFiZWw6IHN0cmluZztcbiAgZm9ybWF0QWRkVGZvb3RMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRUckxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdEFkZFRkTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0QWRkVGhMYWJlbDogc3RyaW5nO1xuICBmb3JtYXREZWxUckxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdERlbFRkTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0RGVsVGhMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRBZGRDdXN0b21MYWJlbDogc3RyaW5nO1xuICBmb3JtYXRTZXRTdHlsZUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFNldEhvdmVyU3R5bGVMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRTZXRBY3RpdmVTdHlsZUxhYmVsOiBzdHJpbmc7XG4gIGZvcm1hdFNldENsYXNzTGFiZWw6IHN0cmluZztcbiAgZm9ybWF0U2V0RXZlbnRIYW5kbGVyczogc3RyaW5nO1xuICBmb3JtYXRTZXRDb250ZXh0OiBzdHJpbmc7XG4gIGZvcm1hdFNldFJlbmRlckNvbmRpdGlvbjogc3RyaW5nO1xuICBmb3JtYXRNYWtlTG9vcDogc3RyaW5nO1xuICBmb3JtYXRTZXRVSUhhbmRsZXJMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRTZXRVSUhhbmRsZXJBcmdMYWJlbDogc3RyaW5nO1xuICBmb3JtYXRTZXRVSUhhbmRsZXJBcmdOYW1lOiBzdHJpbmc7XG4gIGZvcm1hdFNldFVJSGFuZGxlckFyZ1ZhbHVlOiBzdHJpbmc7XG4gIGZvcm1hdEFkZFRlbXBsYXRlVGV4dDogc3RyaW5nO1xuICBmb3JtYXRBZGRUZW1wbGF0ZUhUTUw6IHN0cmluZztcbiAgZm9ybWF0RGVsZXRlRWxlbWVudDogc3RyaW5nO1xuICBmb3JtYXRNb3JlOiBzdHJpbmc7XG5cbiAgbG9hZFZpZGVvOiB7XG4gICAgaW52YWxpZDogc3RyaW5nO1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgcGxhY2Vob2xkZXI6IHN0cmluZztcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIHN1Ym1pdDogc3RyaW5nO1xuICB9O1xuXG4gIHNldExpbms6IHtcbiAgICBpbnZhbGlkOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBwbGFjZWhvbGRlcjogc3RyaW5nO1xuICAgIHBsYWNlaG9sZGVyTG9jYWxPbmx5OiBzdHJpbmc7XG4gICAgdGVtcGxhdGVkOiBzdHJpbmc7XG4gICAgdGVtcGxhdGVkTGFiZWw6IHN0cmluZztcbiAgICB0ZW1wbGF0ZWRQbGFjZWhvbGRlcjogc3RyaW5nO1xuICAgIHRlbXBsYXRlZFVuc3BlY2lmaWVkOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBzdWJtaXQ6IHN0cmluZztcbiAgfTtcblxuICBhZGRUZW1wbGF0ZVRleHQ6IHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgcGxhY2Vob2xkZXI6IHN0cmluZztcbiAgICBzdWJtaXQ6IHN0cmluZztcbiAgfTtcblxuICBhZGRUZW1wbGF0ZUhUTUw6IHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgcGxhY2Vob2xkZXI6IHN0cmluZztcbiAgICBzdWJtaXQ6IHN0cmluZztcbiAgfTtcblxuICBnZW5lcmljRXJyb3I6IHN0cmluZztcbiAgb2s6IHN0cmluZztcbn1cblxudHlwZSBSaWNoRWxlbWVudEZuID0gKCkgPT4gUmljaEVsZW1lbnQ7XG5cbmZ1bmN0aW9uIGNhbGxGbihmb2N1c0ZuOiBGdW5jdGlvbiwgYWN0aW9uRm46IEZ1bmN0aW9uLCAuLi5hcmdzOiBhbnlbXSkge1xuICBmb2N1c0ZuKCk7XG4gIGFjdGlvbkZuKC4uLmFyZ3MpO1xufVxuXG4vKipcbiAqIFJlZmVycyB0byB0b29sYmFyIHByZXNjZW5jZSBlbGVtZW50cyB0aGF0IGFyZSBhZGRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElUb29sYmFyUHJlc2NlbnNlRWxlbWVudCB7XG4gIC8qKlxuICAgKiBUaGUgZXh0cmEgaWRcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBBIHRpdGxlIHRvIHVzZVxuICAgKiBpZiBhIHJlYWN0IG5vZGUgaXMgcHJvdmlkZWQgdGhpcyBub2RlIHdpbGwgYmUgbW9kaWZpZWRcbiAgICogYW5kIGFkZGVkIGEgY2hpbGRyZW4gYXMgKGkxOG5WYWx1ZTogc3RyaW5nKSA9PiBSZWFjdC5Ob2RlXG4gICAqIGVnLiB0aGUgaTE4blJlYWQgZWxlbWVudFxuICAgKi9cbiAgdGl0bGU/OiBzdHJpbmcgfCBSZWFjdC5SZWFjdE5vZGU7XG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCB0byBiZSBhZGRlZFxuICAgKi9cbiAgZWxlbWVudD86IFJpY2hFbGVtZW50IHwgUmljaEVsZW1lbnRGbjtcbiAgLyoqXG4gICAqIEFsdGVybmF0aXZlbHkgYW4gYWN0aW9uXG4gICAqL1xuICBvbkNsaWNrPzogKGRlZmF1bHRBY3Rpb246ICgpID0+IFJpY2hFbGVtZW50LCBlOiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxFbGVtZW50PikgPT4gdm9pZDtcbiAgLyoqXG4gICAqIEhhbmRsZSByZWZvY3VzIGF0dGVtcHRzIGR1cmluZyB0aGUgY2xpY2sgZXZlbnRcbiAgICogQHBhcmFtIGRlZmF1bHRBY3Rpb24gXG4gICAqIEBwYXJhbSBlIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIHJlZm9jdXNIYW5kbGVyPzogKGRlZmF1bHRBY3Rpb246ICgpID0+IHZvaWQsIGU6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEVsZW1lbnQ+KSA9PiB2b2lkO1xuICAvKipcbiAgICogVHJpZ2dlciBvbiBhbnkga2V5ZG93biBldmVudFxuICAgKiBAcGFyYW0gZSBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBvbkFueUtleURvd24/OiAoZTogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIE1hbnVhbGx5IHNwZWNpZnkgd2hldGhlciBpdCdzIGRpc2FibGVkXG4gICAqIGlmIG5vdCBzcGVjaWZpZWQgaXQgd2lsbCBjaGVjayB3aGV0aGVyIGFuIGVsZW1lbnRcbiAgICogY2FuIGJlIGluc2VydGVkIGFzIGl0IGFzc3VtZXMgaXQncyBhYm91dCB0aGUgaW5zZXJ0aW9uXG4gICAqIG9mIHRoZSBlbGVtZW50XG4gICAqL1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIHdoZXRoZXIgaXQgc2hvdWxkIGJlIG1hcmtlZCBhcyBzZWxlY3RlZFxuICAgKi9cbiAgc2VsZWN0ZWQ/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBBIGdpdmVuIGNvdW50IGZvciB0aGUgYnV0dG9uXG4gICAqL1xuICBjb3VudD86IG51bWJlcjtcblxuICAvKipcbiAgICogQWRkcyBhIGN1c3RvbSBjaGlsZHJlbiBhdCB0aGUgZW5kIG9mIHRoZSB0b29sYmFyXG4gICAqL1xuICBjdXN0b21DaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIEFyYml0cmFyeSBwcm9wcyBwYXNzZWQgdG8gdGhlIFRvb2xiYXJCdXR0b24gZWxlbWVudFxuICAgKiB1c2UgaWYgeW91ciB0b29sYmFyIGlzIGFibGUgdG8gY29uc3VtZSBmdXJ0aGVyIHByb3BzXG4gICAqL1xuICB0b29sYmFyQnV0dG9uUHJvcHM6IGFueTtcbn1cblxuLyoqXG4gKiBTcGVjaWZpZXMgYSBpbnB1dCBjb25maWd1cmF0aW9uIGZvciB0aGUgdWkgaGFuZGxlciBhcmd1bWVudFxuICogb2YgdHlwZSBzZWxlY3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRHJhd2VyVUlIYW5kbGVyRWxlbWVudENvbmZpZ1NlbGVjdCB7XG4gIHR5cGU6IFwic2VsZWN0XCIsXG4gIGxhYmVsOiBzdHJpbmcgfCBSZWFjdC5SZWFjdE5vZGU7XG4gIGZhc3RLZXk/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEEgcGxhY2Vob2xkZXIgdG8gdXNlXG4gICAqIGlmIGEgcmVhY3Qgbm9kZSBpcyBwcm92aWRlZCB0aGlzIG5vZGUgd2lsbCBiZSBtb2RpZmllZFxuICAgKiBhbmQgYWRkZWQgYSBjaGlsZHJlbiBhcyAoaTE4blZhbHVlOiBzdHJpbmcpID0+IFJlYWN0Lk5vZGVcbiAgICogZWcuIHRoZSBpMThuUmVhZCBlbGVtZW50XG4gICAqL1xuICBwbGFjZWhvbGRlcjogc3RyaW5nIHwgUmVhY3QuUmVhY3ROb2RlO1xuICBvcHRpb25zOiBBcnJheTx7IHZhbHVlOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgfCBSZWFjdC5SZWFjdE5vZGUgfT47XG59XG5cbi8qKlxuICogU3BlY2lmaWVzIGFuIGlucHV0IGNvbmZpZ3VyYXRpb24gZm9yIHRoZSB1aSBoYW5kbGVyIGFyZ3VtZW50XG4gKiBvZiB0eXBlIGlucHV0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlclVJSGFuZGxlckVsZW1lbnRDb25maWdJbnB1dCB7XG4gIHR5cGU6IFwiaW5wdXRcIjtcbiAgbGFiZWw6IHN0cmluZyB8IFJlYWN0LlJlYWN0Tm9kZTtcbiAgcGF0dGVybj86IHN0cmluZztcbiAgc3VidHlwZT86IFwidGV4dFwiIHwgXCJudW1iZXJcIjtcbiAgZmFzdEtleT86IHN0cmluZztcblxuICAvKipcbiAgICogQSBwbGFjZWhvbGRlciB0byB1c2VcbiAgICogaWYgYSByZWFjdCBub2RlIGlzIHByb3ZpZGVkIHRoaXMgbm9kZSB3aWxsIGJlIG1vZGlmaWVkXG4gICAqIGFuZCBhZGRlZCBhIGNoaWxkcmVuIGFzIChpMThuVmFsdWU6IHN0cmluZykgPT4gUmVhY3QuTm9kZVxuICAgKiBlZy4gdGhlIGkxOG5SZWFkIGVsZW1lbnRcbiAgICovXG4gIHBsYWNlaG9sZGVyOiBzdHJpbmcgfCBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbi8qKlxuICogU3BlY2lmaWVzIGEgaW5wdXQgY29uZmlndXJhdGlvbiBmb3IgdGhlIHVpIGhhbmRsZXIgYXJndW1lbnRcbiAqIG9mIHR5cGUgYm9vbGVhbiwgYmVjYXVzZSBhbGwgdWkgaGFuZGxlcnMgYXJlIHN0cmluZ3NcbiAqIHRoaXMgdXNlcyB0aGUgc3RyaW5nIHRydWUgb3IgZmFsc2UgcmF0aGVyIHRoYW4gYWN0dWFsXG4gKiBib29sZWFuc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3ZXJVSUhhbmRsZXJFbGVtZW50Q29uZmlnQm9vbGVhbiB7XG4gIHR5cGU6IFwiYm9vbGVhblwiLFxuICBsYWJlbDogc3RyaW5nIHwgUmVhY3QuUmVhY3ROb2RlO1xuICBmYXN0S2V5Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3ZXJVSUhhbmRsZXJFbGVtZW50Q29uZmlnQ3VzdG9tUHJvcHMge1xuICB2YWx1ZTogc3RyaW5nO1xuICBvbkNoYW5nZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uRGVsYXllZENoYW5nZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGhlbHBlcnM6IElIZWxwZXJGdW5jdGlvbnM7XG4gIHN0YXRlOiBJU2xhdGVFZGl0b3JJbnRlcm5hbFN0YXRlVHlwZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRHJhd2VyVUlIYW5kbGVyRWxlbWVudENvbmZpZ0N1c3RvbSB7XG4gIHR5cGU6IFwiY3VzdG9tXCI7XG4gIGNvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJhd2VyVUlIYW5kbGVyRWxlbWVudENvbmZpZ0N1c3RvbVByb3BzPjtcbn1cblxuLyoqXG4gKiBTcGVjaWZpZXMgYSBjb25maWd1cmF0b3IgdG8gYmUgYWRkZWQgdG8gdGhlIGRyYXdlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3ZXJDb25maWd1cmF0b3JFbGVtZW50IHtcbiAga2V5Pzogc3RyaW5nIHwgbnVtYmVyO1xuICBDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudFR5cGU8SURyYXdlckNvbnRhaW5lclByb3BzPjtcbn1cblxuZXhwb3J0IHR5cGUgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhcklkZW50aWZpZWRFbGVtZW50ID1cbiAgXCJib2xkXCIgfFxuICBcIml0YWxpY1wiIHxcbiAgXCJ1bmRlcmxpbmVcIiB8XG4gIFwibGlua1wiIHxcbiAgXCJ0aXRsZVwiIHxcbiAgXCJidWxsZXRlZC1saXN0XCIgfFxuICBcIm51bWJlcmVkLWxpc3RcIiB8XG4gIFwiaW1hZ2VcIiB8XG4gIFwidmlkZW9cIiB8XG4gIFwiZmlsZVwiIHxcbiAgXCJxdW90ZVwiIHxcbiAgXCJjb250YWluZXJcIiB8XG4gIFwidGFibGVcIiB8XG4gIFwidGVtcGxhdGUtdGV4dFwiIHxcbiAgXCJ0ZW1wbGF0ZS1odG1sXCIgfFxuICBcImV4dHJhc1wiIHxcbiAgXCJub25lXCIgfFxuICBcImRpdmlkZXJcIiB8XG4gIFwiaGRpdmlkZXJcIjtcblxuZXhwb3J0IHR5cGUgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhckVsZW1lbnRCYXNlRm9ybSA9XG4gIElUb29sYmFyUHJlc2NlbnNlRWxlbWVudCB8XG4gIFNsYXRlRWRpdG9yV3JhcHBlckN1c3RvbVRvb2xiYXJJZGVudGlmaWVkRWxlbWVudDtcblxuZXhwb3J0IHR5cGUgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhckVsZW1lbnRGbkZvcm0gPSAodG9vbGJhclByb3BzOiBhbnkpID0+XG4gIFNsYXRlRWRpdG9yV3JhcHBlckN1c3RvbVRvb2xiYXJFbGVtZW50QmFzZUZvcm07XG5cbmV4cG9ydCB0eXBlIFNsYXRlRWRpdG9yV3JhcHBlckN1c3RvbVRvb2xiYXJFbGVtZW50ID1cbiAgU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhckVsZW1lbnRCYXNlRm9ybSB8XG4gIFNsYXRlRWRpdG9yV3JhcHBlckN1c3RvbVRvb2xiYXJFbGVtZW50Rm5Gb3JtO1xuXG4vKipcbiAqIFRoZXNlIGFyZSB0aGUgYmFzZSBwcm9wcyB0aGF0IHRoaXMgd3JhcHBlciB1c2VzLCBub3RlIGhvdyB3ZSBleHRlbmQgdGhlIGJhc2Ugd3JhcHBlciBwcm9wcyBhcyBkZWZpbmVkXG4gKiBpbiB0aGUgc2xhdGUgZWRpdG9yIGl0c2VsZiwgYW5kIGFkZCB0aGUgc3R5bGVzIGZvciB0aGUgY2xhc3NlcyBhbmQgdGhlc2UgaTE4biBpbmZvXG4gKiBcbiAqIElmIHlvdSB3b25kZXIgaG93IHRoZSBpMThuIGluZm9ybWF0aW9uIGlzIHRvIGJlIGFkZGVkLCBpbiB0aGUgUHJvcGVydHlFbnRyeVRleHQgd2hlbiBjcmVhdGluZ1xuICogdGhlIHNsYXRlIGVkaXRvciBhcyBhIGNvbXBvbmVudCB0aGUgd3JhcHBlciBjYW4gcmVjZWl2ZSB3cmFwcGVyQXJncyBzbyB0aGVzZSBhcmdzIGFyZSBwYXNzZWRcbiAqIHdoZW4gdGhlIGVkaXRvciBpcyBjcmVhdGVkIHdpdGggdGhlIHdyYXBwZXIgaXRzZWxmXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSURlZmF1bHRTbGF0ZVdyYXBwZXJQcm9wcyBleHRlbmRzIElTbGF0ZUVkaXRvcldyYXBwZXJCYXNlUHJvcHMge1xuICAvKipcbiAgICogRnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgc3BlY2lmaWVkIHRvIGFzc2lnbiBleHRyYSB0b29sYmFyIGVsZW1lbnRzXG4gICAqIHRvIGJlIHVzZWQgZWl0aGVyIGJ5IHVpIGhhbmRsZWQgY29tcG9uZW50cyBhbmQgd2hhdG5vdFxuICAgKi9cbiAgdG9vbGJhckV4dHJhcz86IElUb29sYmFyUHJlc2NlbnNlRWxlbWVudFtdO1xuICAvKipcbiAgICogRnVuY3Rpb24gdG8gYmUgdXNlZCB0byBzcGVjaWZ5IGEgd2hvbGUgY3VzdG9tIHRvb2xiYXIgZG93biB0byB0aGUgdmVyeSBiYXNpY3NcbiAgICovXG4gIGN1c3RvbVRvb2xiYXI/OiBTbGF0ZUVkaXRvcldyYXBwZXJDdXN0b21Ub29sYmFyRWxlbWVudFtdO1xuICAvKipcbiAgICogRHJhd2VyIGV4dHJhcyBmb3IgdGhlIHVpIGhhbmRsZWQgdHlwZXNcbiAgICovXG4gIGRyYXdlckV4dHJhcz86IElEcmF3ZXJDb25maWd1cmF0b3JFbGVtZW50W107XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGhpZGUgdGhlIGRyYXdlclxuICAgKi9cbiAgaGlkZURyYXdlcj86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUaGUgZGlzam9pbnRlZCBtb2RlXG4gICAqL1xuICBkaXNqb2ludGVkTW9kZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUaGUgdG9vbGJhciBpcyByZXRhaW5lZCBldmVuIGlmIHRoZSB0ZXh0IGlzbid0IGZvY3VzZWRcbiAgICovXG4gIGRpc2pvaW50ZWRNb2RlS2VlcFRvb2xiYXI/OiBib29sZWFuO1xuICAvKipcbiAgICogQWRkIGEgY2xhc3MgbmFtZSB0byB0aGUgdG9vbGJhciBpbiB0aGUgd3JhcHBlclxuICAgKi9cbiAgdG9vbGJhckNsYXNzTmFtZT86IHN0cmluZztcbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdG8gZGVmaW5lIGN1c3RvbSBleHRyYSBjaGlsZHJlblxuICAgKi9cbiAgY3VzdG9tRXh0cmFDaGlsZHJlbj86IChjaGFyYWN0ZXJDb3VudDogbnVtYmVyLCB3b3JkQ291bnQ6IG51bWJlcikgPT4gUmVhY3QuUmVhY3ROb2RlO1xuXG4gIC8qKlxuICAgKiBDdXN0b21pemF0aW9uIGZvciB0aGUgZHJhd2VyXG4gICAqIHRoZSBjb250YWluZXIgYm94IHRoYXQgd3JhcHMgdGhlIGVudGlyZSBkcmF3ZXJcbiAgICovXG4gIERyYXdlckNvbnRhaW5lckJveD86IERyYXdlckNvbnRhaW5lckJveENvbXBvbmVudDtcblxuICAvKipcbiAgICogQ3VzdG9taXphdGlvbiBmb3IgdGhlIGRyYXdlclxuICAgKiB0aGUgc3BhY2VyIHRoYXQgaXMgYWRkZWQgb24gZGlzam9pbnRlZCBtb2RlIG9ubHlcbiAgICovXG4gIERyYXdlclNwYWNlcj86IERyYXdlclNwYWNlckNvbXBvbmVudDtcblxuICAvKipcbiAgICogQ3VzdG9taXphdGlvbiBmb3IgdGhlIFxuICAgKi9cbiAgRHJhd2VyVGVtcGxhdGluZ0NvbnRhaW5lckJveD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SURyYXdlclRlbXBsYXRpbmdDb250YWluZXJCb3hQcm9wcz47XG5cbiAgLyoqXG4gICAqIEN1c3RvbWl6YXRpb24gZm9yIHRoZSBkcmF3ZXJcbiAgICogdGhlIGJvZHkgb2JqZWN0IGNvbnRhaW5tZW50IGl0c2VsZlxuICAgKi9cbiAgRHJhd2VyQm9keT86IERyYXdlckJvZHlDb21wb25lbnQ7XG5cbiAgLyoqXG4gICAqIEN1c3RvbWl6YXRpb24gZm9yIHRoZSBidXR0b24gd3JhcHBlciB0aGF0IGlzIHVzZWRcbiAgICogaW4gdGhlIHRvb2xiYXJcbiAgICovXG4gIFRvb2xiYXJCdXR0b24/OiBUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuXG4gIC8qKlxuICAgKiBUaGUgYnV0dG9uIHVzZWQgdG8gdG9nZ2xlIHRoZSBkcmF3ZXIgZnJvbSB0aGUgdG9vbGJhclxuICAgKi9cbiAgVG9vbGJhckRyYXdlckJ1dHRvbj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVRvb2xiYXJEcmF3ZXJCdXR0b25Qcm9wcz47XG5cbiAgLyoqXG4gICAqIFVzZWQgZm9yIHNlcGFyYXRpb24gaW4gdGhlIHRvb2xiYXIgKGhvcml6b250YWwpXG4gICAqL1xuICBUb29sYmFySERpdmlkZXI/OiBSZWFjdC5Db21wb25lbnRUeXBlPHt9PjtcblxuICAvKipcbiAgICogVXNlZCBmb3Igc2VwYXJhdGlvbiBpbiB0aGUgdG9vbGJhciAodmVydGljYWwpXG4gICAqL1xuICBUb29sYmFyVkRpdmlkZXI/OiBSZWFjdC5Db21wb25lbnRUeXBlPHt9PjtcblxuICAvKipcbiAgICogVXNlZCBmb3IgdGhlIHRvb2xiYXIgaXRzZWxmXG4gICAqIHRoZSB0b29sYmFyIHNob3VsZCBhbHNvIHN1cHBvcnQgYSByZWZcbiAgICogYXMgaXQncyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgaGVpZ2h0IG9mIHRoZSB0b29sYmFyXG4gICAqL1xuICBUb29sYmFyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJVG9vbGJhclByb3BzPjtcblxuICAvKipcbiAgICogV2hlbiB1c2VkIGRpc2pvaW50ZWQgbW9kZSBhIGNvbnRhaW5lciBpcyBnaXZlbiB0byB0aGUgZWRpdG9yXG4gICAqIHRvIHdyYXAgaXQgdXNlIHRoaXMgdG8gc3BlY2lmeSBpdCwgcmVtZW1iZXIgdG8gYWxsb3cgaXQgdG8gcGFzc1xuICAgKiBhIHJlZiBhcyBpdCdzIHJlcXVpcmVkIGZvciB0aGlzIGNvbXBvbmVudFxuICAgKi9cbiAgRGlzam9pbnRlZEVkaXRvckNvbnRhaW5lcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUVkaXRvckNvbnRhaW5lclByb3BzPjtcbiAgLyoqXG4gICAqIFRoZSBkaXNqb2ludGVkIGVkaXRvciBpdHNlbGZcbiAgICovXG4gIERpc2pvaW50ZWRFZGl0b3I/OiBSZWFjdC5Db21wb25lbnRUeXBlPElFZGl0b3JQcm9wcz47XG4gIC8qKlxuICAgKiBUaGUgZWRpdG9yIGl0c2VsZiwgbm90IHVzZWQgaW4gZGlzam9pbnRlZCBtb2RlXG4gICAqIHRoZSBEaXNqb2ludGVkRWRpdG9yIGlzIHVzZWQgaW5zdGVhZFxuICAgKiBhIHJlZiBpcyByZXF1aXJlZCBmb3IgdGhpcyBjb21wb25lbnQgdG8gYmUgc3VwcG9ydGVkXG4gICAqL1xuICBFZGl0b3I/OiBSZWFjdC5Db21wb25lbnRUeXBlPElFZGl0b3JQcm9wcz47XG4gIC8qKlxuICAgKiBXaGVuIHVzaW5nIHRoZSBzdGFuZGFyZCBtb2RlLCBpdCBjb250YWluc1xuICAgKiB0aGUgZWRpdG9yIGl0c2VsZlxuICAgKi9cbiAgRWRpdG9yQ29udGFpbmVyPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRWRpdG9yQ29udGFpbmVyUHJvcHM+O1xuXG4gIC8qKlxuICAgKiBBIHdyYXBwZXIgZm9yIHRoZSB0b29sYmFyIGNvbXBvbmVudFxuICAgKi9cbiAgVG9vbGJhcldyYXBwZXI/OiBSZWFjdC5Db21wb25lbnRUeXBlPElFZGl0b3JXcmFwcGVyUHJvcHM+O1xuXG4gIC8qKlxuICAgKiBBIHdyYXBwZXIgZm9yIGV2ZXJ5dGhpbmdcbiAgICovXG4gIEZpbmFsV3JhcHBlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUVkaXRvcldyYXBwZXJQcm9wcz47XG5cbiAgLyoqXG4gICAqIEEgd3JhcHBlciBmb3IgdGhlIGVkaXRpbmcgcmVnaW9uXG4gICAqL1xuICBCYXNlV3JhcHBlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUVkaXRvcldyYXBwZXJQcm9wcz47XG5cbiAgLyoqXG4gICAqIEEgd3JhcHBlciBmb3IgdGhlIGRyYXdlclxuICAgKi9cbiAgRHJhd2VyV3JhcHBlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SUVkaXRvcldyYXBwZXJQcm9wcz47XG5cbiAgLyoqXG4gICAqIFVzZWQgZm9yIGRpc3BsYXlpbmcgZGlhbG9ncyB3aXRoIGVycm9yc1xuICAgKi9cbiAgRGlhbG9nPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRGlhbG9nQ29tcG9uZW50UHJvcHM+O1xuXG4gIC8qKlxuICAgKiBVc2VkIGZvciBnZW5lcmF0aW5nIHRoZSB0aXRsZSBhbmQgaGlyZWFyY2h5IG9mIGVhY2ggZWxlbWVudCBpbiB0aGUgZHJhd2VyXG4gICAqL1xuICBXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVByb3BzPjtcblxuICAvKipcbiAgICogVXNlZCBmb3Igd3JhcHBpbmcgYWxsIHRoZSB0aXRsZXMgZ2VuZXJhdGVkXG4gICAqL1xuICBXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlV3JhcHBlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8eyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0+O1xuXG4gIC8qKlxuICAgKiBXcmFwcyB0aGUgaW5mb3JtYXRpb24gcGFuZWwgZnJvbSB0aGUgZHJhd2VyLCB3aGF0ZXZlciBpcyB2aXNpYmxlXG4gICAqL1xuICBXcmFwcGVyRHJhd2VySW5mb1BhbmVsV3JhcHBlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyUHJvcHM+O1xuXG4gIC8qKlxuICAgKiBVc2VkIGZvciB0aGUgdGFicyBzd2l0Y2hlciBjb21wb25lbnQgdGhhdCBpcyB1c2VkIGluIHRoZSBkcmF3ZXJcbiAgICovXG4gIFdyYXBwZXJEcmF3ZXJUYWJzPzogUmVhY3QuQ29tcG9uZW50VHlwZTxJV3JhcHBlckRyYXdlclRhYnNQcm9wcz47XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gd3JhcCB0aGUgaW50ZXJuYWwgcGFuZWxcbiAgICovXG4gIFdyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8eyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0+O1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIG1ha2UgdGV4dCBpbnB1dCBmaWVsZHNcbiAgICovXG4gIFdyYXBwZXJEcmF3ZXJUZXh0RmllbGQ/OiBSZWFjdC5Db21wb25lbnRUeXBlPElXcmFwcGVyRHJhd2VyVGV4dEZpZWxkUHJvcHM+O1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIG1ha2UgY2hlY2tib3ggaW5wdXQgZmllbGRzXG4gICAqL1xuICBXcmFwcGVyRHJhd2VyQ2hlY2tib3hGaWVsZD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJDaGVja0JveFByb3BzPjtcblxuICAvKipcbiAgICogVXNlZCB0byBtYWtlIHNlbGVjdCBpbnB1dCBmaWVsZHNcbiAgICovXG4gIFdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZFByb3BzPjtcblxuICAvKipcbiAqIFVzZWQgdG8gbWFrZSBzZWxlY3QgaW5wdXQgZmllbGRzXG4gKi9cbiAgV3JhcHBlckRyYXdlck11bHRpU2VsZWN0RmllbGQ/OiBSZWFjdC5Db21wb25lbnRUeXBlPElXcmFwcGVyRHJhd2VyTXVsdGlTZWxlY3RGaWVsZFByb3BzPjtcblxuICAvKipcbiAgICogYWRkIGV4dHJhIGNoaWxkcmVuIHRvIHRoZSBkcmF3ZXJcbiAgICovXG4gIGRyYXdlckV4dHJhQ2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmZ1bmN0aW9uIERlZmF1bHRFZGl0b3JDb250YWluZXIocHJvcHM6IElFZGl0b3JDb250YWluZXJQcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JEZWZhdWx0RWRpdG9yQ29udGFpbmVyXCI+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlclRlbXBsYXRpbmdDb250YWluZXJCb3hQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbi8qKlxuICogQW4gdXRpbGl0eSB0byBkZWZpbmUgYSBzaW5nbGUgdGVtcGxhdGluZyBvcHRpb25cbiAqIGZvciB1c2FnZSBpbiBhIHNlbGVjdCBmaWVsZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElTaW5nbGVUZW1wbGF0aW5nRWxlbWVudE9wdGlvbiB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUVkaXRvcldyYXBwZXJQcm9wcyBleHRlbmRzIElEZWZhdWx0U2xhdGVXcmFwcGVyUHJvcHMge1xuICBkcmF3ZXJPcGVuOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElFZGl0b3JDb250YWluZXJQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUVkaXRvclByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgY2xhc3NOYW1lOiBzdHJpbmc7XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBJVG9vbGJhclByb3BzIHtcbiAgLyoqXG4gICAqIHRvb2xiYXIgY29udGVudHMgd2l0aCBhbGwgdGhlIGJ1dHRvbnMgYW5kIHNlcGFyYXRvcnNcbiAgICogYXMgZGV0ZXJtaW5lZFxuICAgKi9cbiAgdG9vbGJhckNvbnRlbnRzOiBSZWFjdC5SZWFjdE5vZGU7XG4gIC8qKlxuICAgKiBDdXN0b20gY2hpbGRyZW4gZm9yIHRoZSB0b29sYmFyIHRoYXQgYXJlIGFkZGVkXG4gICAqIGJ5IHRoZSBhY3RpdmUgdG9vbGJhciBlbGVtZW50c1xuICAgKi9cbiAgY3VzdG9tQ2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIFNpbmdsZSBkcmF3ZXIgYnV0dG9uIHRvIG9wZW4gYW5kIGNsb3NlIHRoZSBkcmF3ZXJcbiAgICovXG4gIGRyYXdlckJ1dHRvbjogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogVGhlc2UgcHJvcHMgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIHRvcCBvZiB0aGUgdG9vbGJhclxuICAgKi9cbiAgcHJvcHM6IGFueTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgd29ya2luZyBpbiBkaXNqb2ludGVkIG1vZGVcbiAgICovXG4gIGRpc2pvaW50ZWRNb2RlOiBib29sZWFuO1xuICAvKipcbiAgICogV2hldGhlciB0aGUgZHJhd2VyIGlzIG9wZW5cbiAgICovXG4gIGRyYXdlck9wZW46IGJvb2xlYW47XG59XG5cbmNvbnN0IERlZmF1bHRUb29sYmFyID0gUmVhY3QuZm9yd2FyZFJlZigocHJvcHM6IElUb29sYmFyUHJvcHMsIHJlZjogUmVhY3QuRm9yd2FyZGVkUmVmPEhUTUxFbGVtZW50PikgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JUb29sYmFyXCIgey4uLnByb3BzLnByb3BzfSByZWY9e3JlZn0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yVG9vbGJhckludGVybmFsXCI+XG4gICAgICAgIHtwcm9wcy50b29sYmFyQ29udGVudHN9XG4gICAgICAgIHtwcm9wcy5jdXN0b21DaGlsZHJlbn1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvclRvb2xiYXJJbnRlcm5hbFNwYWNlclwiIC8+XG4gICAgICAgIHtwcm9wcy5kcmF3ZXJCdXR0b259XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufSk7XG5cbi8qKlxuICogVGhlc2UgYXJlIHRoZSByaWNoIHRleHQgZWRpdG9yIHRvb2xiYXIgcHJvcGVydGllcyB0aGV5IGJhc2ljYWxseSB0YWtlIHRoZSBzYW1lXG4gKiB0aGF0IHRoZSBlbnRpcmUgd3JhcHBlciBkb2VzLCBidXQgYWRkaW5nIHRoZXNlIGZ1bmN0aW9ucyBhbmQgZmxhZ3MgdGFrZW4gZnJvbVxuICogdGhlIHN0YXRlIG9mIHRoZSB3cmFwcGVyIG9yIG90aGVyIGZ1bmN0aW9uc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFJpY2hUZXh0RWRpdG9yVG9vbGJhclByb3BzIGV4dGVuZHMgSURlZmF1bHRTbGF0ZVdyYXBwZXJQcm9wcyB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBkcmF3ZXIgaXMgb3BlbiwgdGhlIGRyYXdlciBpcyB0aGUgc2lkZSBkcmF3ZXIgdGhhdCBjb250YWluc1xuICAgKiBhIGxvdCBvZiBmdW5jdGlvbmFsaXR5IHRvIGVkaXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBlbGVtZW50XG4gICAqL1xuICBkcmF3ZXJPcGVuOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBzdGF0ZVxuICAgKi9cbiAgc3RhdGU6IElTbGF0ZUVkaXRvckludGVybmFsU3RhdGVUeXBlO1xuXG4gIC8qKlxuICAgKiBBIGN1c3RvbSB0b29sYmFyIHN0YXRlXG4gICAqL1xuICB0b29sYmFyU3RhdGU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIHRvb2xiYXIgaGVpZ2h0XG4gICAqL1xuICB0b29sYmFySGVpZ2h0OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIGNhbGwgdG8gcmVxdWVzdCBhbiBpbWFnZSwgb3BlbnMgYSBkaWFsb2cgc28gcmVxdWlyZXMgYSBzdGF0ZVxuICAgKi9cbiAgcmVxdWVzdEltYWdlOiAoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBDYWxsIHRvIHJlcXVlc3QgYSBmaWxlLCBvcGVucyBhIGRpYWxvZyBzbyByZXF1aXJlcyBhIHN0YXRlXG4gICAqL1xuICByZXF1ZXN0RmlsZTogKCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogc2V0cyB0aGUgdG9vbGJhciBzdGF0ZVxuICAgKi9cbiAgc2V0VG9vbGJhclN0YXRlOiAoc3RhdGU6IHN0cmluZyB8IG51bGwpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdGhhdCBzcGVjaWZpZXMgd2hldGhlciB0aGUgZHJhd2VyIHNob3VsZFxuICAgKiBleGlzdFxuICAgKiBAcmV0dXJucyBhIGJvb2xlYW4gYXMgdGhlIGFuc3dlclxuICAgKi9cbiAgc2hvdWxkSGF2ZURyYXdlcjogKCkgPT4gYm9vbGVhbjtcblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBkcmF3ZXIgb3BlbiBvciBjbG9zZVxuICAgKi9cbiAgdG9nZ2xlRHJhd2VyOiAoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB0aGUgaGVpZ2h0IGNoYW5nZXNcbiAgICovXG4gIG9uSGVpZ2h0Q2hhbmdlOiAobmV3SGVpZ2h0OiBudW1iZXIpID0+IHZvaWQ7XG59XG5cbmludGVyZmFjZSBSaWNoVGV4dEVkaXRvclRvb2xiYXJTdGF0ZSB7XG4gIGlzUmVhZHk6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMgZXh0ZW5kcyBSaWNoVGV4dEVkaXRvclRvb2xiYXJTdGF0ZSwgUmljaFRleHRFZGl0b3JUb29sYmFyUHJvcHMge1xufVxuXG4vLyBmdW5jdGlvbiBlbGVtZW50RmFzdEtleVJldHVybihcbi8vICAgcHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcyxcbi8vICAgZWxlbWVudDogUmVhY3QuUmVhY3ROb2RlLFxuLy8gICBhbHRCYWRnZWRDaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlLFxuLy8gICBwcmlvcml0eTogbnVtYmVyLFxuLy8gICBkaXNhYmxlZDogYm9vbGVhbixcbi8vICAgdXNlU3R5bGVUcmFuc2Zvcm0/OiBib29sZWFuLFxuLy8gICB1c2VUcmlnZ2VyQWx0QWZ0ZXJBY3Rpb24/OiBib29sZWFuLFxuLy8gICBmYXN0S2V5T3ZlcnJpZGU/OiBzdHJpbmcsXG4vLyApOiBhbnkge1xuLy8gICBjb25zdCBmYXN0S2V5ID0gZmFzdEtleU92ZXJyaWRlIHx8IHByb3BzLmZhc3RLZXk7XG5cbi8vICAgaWYgKCFmYXN0S2V5KSB7XG4vLyAgICAgcmV0dXJuIGVsZW1lbnQ7XG4vLyAgIH1cblxuLy8gICByZXR1cm4gKFxuLy8gICAgIDxBbHRCYWRnZVJlYWN0aW9uZXJcbi8vICAgICAgIHJlYWN0aW9uS2V5PXtmYXN0S2V5fVxuLy8gICAgICAgcHJpb3JpdHk9e3ByaW9yaXR5fVxuLy8gICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkIHx8ICFwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50fVxuLy8gICAgICAgYWx0QmFkZ2VkQ2hpbGRyZW49e2FsdEJhZGdlZENoaWxkcmVufVxuLy8gICAgICAgbGFiZWw9e2Zhc3RLZXkgPT09IFwiZXNjYXBlXCIgPyBcImVzY1wiIDogbnVsbH1cbi8vICAgICAgIHRhYmJhYmxlPXtmYXN0S2V5ICE9PSBcImVzY2FwZVwifVxuLy8gICAgICAgdXNlVHJhbnNmb3JtPXt1c2VTdHlsZVRyYW5zZm9ybSA/IFwiY2xvc2VcIiA6IG51bGx9XG4vLyAgICAgICB0cmlnZ2VyQWx0QWZ0ZXJBY3Rpb249e3VzZVRyaWdnZXJBbHRBZnRlckFjdGlvbn1cbi8vICAgICAgIHNlbGVjdG9yPVwiYnV0dG9uXCJcbi8vICAgICAgIG9uVGFiT3V0VHJpZ2dlcj1cImVzY2FwZVwiXG4vLyAgICAgPlxuLy8gICAgICAge2VsZW1lbnR9XG4vLyAgICAgPC9BbHRCYWRnZVJlYWN0aW9uZXI+XG4vLyAgICk7XG4vLyB9XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRvb2xiYXJCdXR0b25Qcm9wcyB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHR5cGU6IFNsYXRlRWRpdG9yV3JhcHBlckN1c3RvbVRvb2xiYXJJZGVudGlmaWVkRWxlbWVudCB8IFwiZXh0cmFcIjtcbiAgZXh0cmFJZD86IHN0cmluZztcbiAgc2VsZWN0ZWQ6IGJvb2xlYW47XG4gIGRpc2FibGVkOiBib29sZWFuO1xuICBodG1sRW50aXR5OiBzdHJpbmc7XG4gIG9uQ2xpY2s6ICgpID0+IHZvaWQ7XG4gIGNvdW50PzogbnVtYmVyO1xuICBkaXNqb2ludGVkTW9kZTogYm9vbGVhbjtcbn1cblxudHlwZSBUb29sYmFyQnV0dG9uQ29tcG9uZW50ID0gUmVhY3QuQ29tcG9uZW50VHlwZTxJVG9vbGJhckJ1dHRvblByb3BzPjtcblxuZnVuY3Rpb24gRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQocHJvcHM6IElUb29sYmFyQnV0dG9uUHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8YnV0dG9uXG4gICAgICBjbGFzc05hbWU9e1wic2xhdGVFZGl0b3JUb29sYmFyQnV0dG9uIFwiICsgKHByb3BzLnNlbGVjdGVkID8gXCIgc2VsZWN0ZWRcIiA6IFwiXCIpfVxuICAgICAgdGl0bGU9e3Byb3BzLnRpdGxlfVxuICAgICAgZGlzYWJsZWQ9e3Byb3BzLmRpc2FibGVkfVxuICAgICAgb25DbGljaz17cHJvcHMub25DbGlja31cbiAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7IF9faHRtbDogcHJvcHMuaHRtbEVudGl0eSArICh0eXBlb2YgcHJvcHMuY291bnQgPT09IFwibnVtYmVyXCIgPyAoXCIgKFwiICsgcHJvcHMuY291bnQgKyBcIilcIikgOiBcIlwiKSB9fVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIEJvbGQocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dCB8fCAhcHJvcHMuc3RhdGUuYWxsb3dzVGV4dDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdEJvbGRMYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0ICYmIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHQuYm9sZH1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMuZm9ybWF0VG9nZ2xlLCBcImJvbGRcIil9XG4gICAgICBodG1sRW50aXR5PVwiJiN4MWQ0MDE7XCJcbiAgICAgIHR5cGU9XCJib2xkXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBJdGFsaWMocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dCB8fCAhcHJvcHMuc3RhdGUuYWxsb3dzVGV4dDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdEl0YWxpY0xhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e3Byb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRleHQgJiYgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dC5pdGFsaWN9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLmZvcm1hdFRvZ2dsZSwgXCJpdGFsaWNcIil9XG4gICAgICBodG1sRW50aXR5PVwiJiN4MWQ0NzA7XCJcbiAgICAgIHR5cGU9XCJpdGFsaWNcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFVuZGVybGluZShwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0IHx8ICFwcm9wcy5zdGF0ZS5hbGxvd3NUZXh0O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0VW5kZXJsaW5lTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17cHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVGV4dCAmJiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0LnVuZGVybGluZX1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMuZm9ybWF0VG9nZ2xlLCBcInVuZGVybGluZVwiKX1cbiAgICAgIGh0bWxFbnRpdHk9XCImI3gxZTQ4O1wiXG4gICAgICB0eXBlPVwidW5kZXJsaW5lXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBWRGl2aWRlcihwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmIChwcm9wcy5Ub29sYmFyVkRpdmlkZXIpIHtcbiAgICBjb25zdCBSZWFsRGl2aWRlciA9IHByb3BzLlRvb2xiYXJWRGl2aWRlcjtcbiAgICByZXR1cm4gKDxSZWFsRGl2aWRlciAvPik7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JWZGl2aWRlclwiIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIEhEaXZpZGVyKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKHByb3BzLlRvb2xiYXJIRGl2aWRlcikge1xuICAgIGNvbnN0IFJlYWxEaXZpZGVyID0gcHJvcHMuVG9vbGJhckhEaXZpZGVyO1xuICAgIHJldHVybiAoPFJlYWxEaXZpZGVyIC8+KTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JIZGl2aWRlcnNwYWNlclwiIC8+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9ySGRpdmlkZXJcIiAvPlxuICAgIDwvPlxuICApO1xufVxuXG5mdW5jdGlvbiBMaW5rKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKCFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0xpbmtzIHx8ICFwcm9wcy5pc1JlYWR5KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZXQgdGVtcGxhdGVMaW5rQW1vdW50ID0gMDtcblxuICBpZiAocHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUZW1wbGF0aW5nICYmIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dCkge1xuICAgIE9iamVjdC5rZXlzKHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dC5wcm9wZXJ0aWVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0LnByb3BlcnRpZXNba2V5XTtcblxuICAgICAgLy8gYnV0IHRoZXkgbXVzdCBiZSB0aGUgZ2l2ZW4gZWxlbWVudCB0eXBlXG4gICAgICBpZiAocHJvcGVydHkudHlwZSA9PT0gXCJsaW5rXCIpIHtcbiAgICAgICAgdGVtcGxhdGVMaW5rQW1vdW50Kys7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAoXG4gICAgcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUZW1wbGF0aW5nICYmXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0ICYmXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0ICE9PSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHRcbiAgKSB7XG4gICAgT2JqZWN0LmtleXMocHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQucHJvcGVydGllc1trZXldO1xuICAgICAgaWYgKHByb3BlcnR5Lm5vblJvb3RJbmhlcml0YWJsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIGJ1dCB0aGV5IG11c3QgYmUgdGhlIGdpdmVuIGVsZW1lbnQgdHlwZVxuICAgICAgaWYgKHByb3BlcnR5LnR5cGUgPT09IFwibGlua1wiKSB7XG4gICAgICAgIHRlbXBsYXRlTGlua0Ftb3VudCsrO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudCh7IHR5cGU6IFwibGlua1wiLCBocmVmOiBcIlwiLCBjaGlsZHJlbjogW10sIHRocmVmOiBudWxsIH0pO1xuXG4gIGNvbnN0IHNlbGVjdGVkID0gcHJvcHMuaGVscGVycy5lZGl0b3Iuc2VsZWN0aW9uICYmXG4gICAgcHJvcHMuaGVscGVycy5SYW5nZS5pc0NvbGxhcHNlZChwcm9wcy5oZWxwZXJzLmVkaXRvci5zZWxlY3Rpb24pICYmXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudCAmJlxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQudHlwZSA9PT0gXCJsaW5rXCI7XG5cbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG5cbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdExpbmtMYWJlbH1cbiAgICAgIHNlbGVjdGVkPXtzZWxlY3RlZH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMudG9nZ2xlTGluaywgbnVsbCwgbnVsbCl9XG4gICAgICBjb3VudD17dGVtcGxhdGVMaW5rQW1vdW50ID09PSAwID8gbnVsbCA6IHRlbXBsYXRlTGlua0Ftb3VudH1cbiAgICAgIGh0bWxFbnRpdHk9XCImI3gxZjUxNztcIlxuICAgICAgdHlwZT1cImxpbmtcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFRpdGxlKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKCFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RpdGxlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KHsgdHlwZTogXCJ0aXRsZVwiLCB0aXRsZVR5cGU6IFwiaDFcIiwgY2hpbGRyZW46IFtdIH0sIHsgY29sbGFwc2VkOiB0cnVlIH0pO1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdFRpdGxlTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17cHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50ICYmIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudC50eXBlID09PSBcInRpdGxlXCJ9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLnRvZ2dsZVRpdGxlLCBcImgxXCIpfVxuICAgICAgaHRtbEVudGl0eT1cIiYjeDFkNDEzO1wiXG4gICAgICB0eXBlPVwidGl0bGVcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFF1b3RlKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKCFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1F1b3RlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KHsgdHlwZTogXCJxdW90ZVwiLCBjaGlsZHJlbjogW10gfSwgeyBjb2xsYXBzZWQ6IHRydWUgfSk7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0UXVvdGVMYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQgJiYgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50LnR5cGUgPT09IFwicXVvdGVcIn1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMudG9nZ2xlUXVvdGUpfVxuICAgICAgaHRtbEVudGl0eT1cIiZxdW90O1wiXG4gICAgICB0eXBlPVwicXVvdGVcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cblxuZnVuY3Rpb24gTnVtYmVyZWRMaXN0KHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKCFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0xpc3RzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KHsgdHlwZTogXCJsaXN0XCIsIGxpc3RUeXBlOiBcIm51bWJlcmVkXCIsIGNoaWxkcmVuOiBbXSB9KTtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRMaXN0TnVtYmVyZWRMYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtmYWxzZX1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMuaW5zZXJ0TGlzdCwgXCJudW1iZXJlZFwiKX1cbiAgICAgIGh0bWxFbnRpdHk9XCIxMjNcIlxuICAgICAgdHlwZT1cIm51bWJlcmVkLWxpc3RcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIEJ1bGxldGVkTGlzdChwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmICghcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNMaXN0cykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudCh7IHR5cGU6IFwibGlzdFwiLCBsaXN0VHlwZTogXCJidWxsZXRlZFwiLCBjaGlsZHJlbjogW10gfSk7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0TGlzdEJ1bGxldGVkTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17ZmFsc2V9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLmluc2VydExpc3QsIFwiYnVsbGV0ZWRcIil9XG4gICAgICBodG1sRW50aXR5PVwiLi4uXCJcbiAgICAgIHR5cGU9XCJidWxsZXRlZC1saXN0XCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5jb25zdCBpbWdFeGFtcGxlID0ge1xuICB0eXBlOiBcImltYWdlXCIgYXMgXCJpbWFnZVwiLFxuICBjaGlsZHJlbjogW1NUQU5EQVJEX1RFWFRfTk9ERSgpXSBhcyBhbnksXG4gIHdpZHRoOiAwLFxuICBoZWlnaHQ6IDAsXG4gIGFsdDogXCJcIixcbiAgc3JjOiBcIlwiLFxuICBzcmNTZXQ6IFwiXCIsXG4gIHNyY0lkOiBcIlwiLFxuICBzdGFuZGFsb25lOiBmYWxzZSxcbiAgc2l6ZXM6IFwiXCIsXG59O1xuXG5mdW5jdGlvbiBJbWFnZShwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmIChcbiAgICAhcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNJbWFnZXNcbiAgKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KGltZ0V4YW1wbGUsIHsgc2VsZWN0ZWQ6IHRydWUgfSk7XG4gIGNvbnN0IFRvb2xiYXJCdXR0b24gPSBwcm9wcy5Ub29sYmFyQnV0dG9uIHx8IERlZmF1bHRUb29sYmFyQnV0dG9uQ29tcG9uZW50O1xuICByZXR1cm4gKFxuICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICB0aXRsZT17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0QWRkSW1hZ2VMYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtmYWxzZX1cbiAgICAgIG9uQ2xpY2s9e3Byb3BzLnJlcXVlc3RJbWFnZX1cbiAgICAgIGh0bWxFbnRpdHk9XCImIzEyODI0NztcIlxuICAgICAgdHlwZT1cImltYWdlXCJcbiAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAvPlxuICApO1xufVxuXG5jb25zdCB2aWRlb0V4YW1wbGUgPSB7XG4gIHR5cGU6IFwidmlkZW9cIiBhcyBcInZpZGVvXCIsXG4gIG9yaWdpbjogXCJ5b3V0dWJlXCIgYXMgXCJ5b3V0dWJlXCIsXG4gIHNyYzogXCJcIixcbiAgY2hpbGRyZW46IFtTVEFOREFSRF9URVhUX05PREUoKV0gYXMgYW55LFxufVxuXG5mdW5jdGlvbiBWaWRlbyhwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmIChcbiAgICAhcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNWaWRlb3NcbiAgKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KHZpZGVvRXhhbXBsZSwgeyBzZWxlY3RlZDogdHJ1ZSB9KTtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRBZGRWaWRlb0xhYmVsfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2VsZWN0ZWQ9e2ZhbHNlfVxuICAgICAgb25DbGljaz17Y2FsbEZuLmJpbmQobnVsbCwgcHJvcHMuaGVscGVycy5mb2N1cywgcHJvcHMuaGVscGVycy5pbnNlcnRWaWRlbywgbnVsbCl9XG4gICAgICBodG1sRW50aXR5PVwiJiMxMjc5MDk7XCJcbiAgICAgIHR5cGU9XCJ2aWRlb1wiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuY29uc3QgZmlsZUV4YW1wbGUgPSB7XG4gIHR5cGU6IFwiZmlsZVwiIGFzIFwiZmlsZVwiLFxuICBjaGlsZHJlbjogW1NUQU5EQVJEX1RFWFRfTk9ERSgpXSBhcyBhbnksXG4gIGV4dGVuc2lvbjogXCJcIixcbiAgZmlsZU5hbWU6IFwiXCIsXG4gIHNpemU6IFwiXCIsXG4gIHNyYzogXCJcIixcbiAgc3JjSWQ6IFwiXCIsXG59O1xuXG5mdW5jdGlvbiBGaWxlKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKFxuICAgICFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ZpbGVzXG4gICkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudChmaWxlRXhhbXBsZSwgeyBzZWxlY3RlZDogdHJ1ZSB9KTtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRBZGRGaWxlTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17ZmFsc2V9XG4gICAgICBvbkNsaWNrPXtwcm9wcy5yZXF1ZXN0RmlsZX1cbiAgICAgIGh0bWxFbnRpdHk9XCImIzEyODQ0MTtcIlxuICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIENvbnRhaW5lcihwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzKSB7XG4gIGlmIChcbiAgICAhcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNDb250YWluZXJzXG4gICkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZGlzYWJsZWQgPSAhcHJvcHMuc3RhdGUuYWxsb3dzSW5zZXJ0RWxlbWVudCh7IHR5cGU6IFwiY29udGFpbmVyXCIsIGNvbnRhaW5lclR5cGU6IG51bGwsIGNoaWxkcmVuOiBbXSB9KTtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRBZGRDb250YWluZXJMYWJlbH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNlbGVjdGVkPXtmYWxzZX1cbiAgICAgIG9uQ2xpY2s9e2NhbGxGbi5iaW5kKG51bGwsIHByb3BzLmhlbHBlcnMuZm9jdXMsIHByb3BzLmhlbHBlcnMuaW5zZXJ0Q29udGFpbmVyLCBudWxsKX1cbiAgICAgIGh0bWxFbnRpdHk9XCImIzk5NzQ7XCJcbiAgICAgIHR5cGU9XCJjb250YWluZXJcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFRhYmxlKHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKFxuICAgICFwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RhYmxlc1xuICApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoeyB0eXBlOiBcInRhYmxlXCIsIHRhYmxlVHlwZTogbnVsbCwgY2hpbGRyZW46IFtdIH0pO1xuICBjb25zdCBUb29sYmFyQnV0dG9uID0gcHJvcHMuVG9vbGJhckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckJ1dHRvbkNvbXBvbmVudDtcbiAgcmV0dXJuIChcbiAgICA8VG9vbGJhckJ1dHRvblxuICAgICAgdGl0bGU9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmZvcm1hdEFkZFRhYmxlTGFiZWx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17ZmFsc2V9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLmluc2VydFRhYmxlLCBudWxsKX1cbiAgICAgIGh0bWxFbnRpdHk9XCImIzU3ODU7XCJcbiAgICAgIHR5cGU9XCJ0YWJsZVwiXG4gICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVGVtcGxhdGVUZXh0KHByb3BzOiBSaWNoVGV4dEVkaXRvclRvb2xiYXJFbGVtZW50UHJvcHMpIHtcbiAgaWYgKFxuICAgICFwcm9wcy5pc1JlYWR5IHx8XG4gICAgIXByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGVtcGxhdGluZ1xuICApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxldCB0ZW1wbGF0ZVRleHRBbW91bnQgPSAwO1xuXG4gIGlmIChwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQpIHtcbiAgICBPYmplY3Qua2V5cyhwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0NvbnRleHQucHJvcGVydGllcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrQ29udGV4dC5wcm9wZXJ0aWVzW2tleV07XG5cbiAgICAgIC8vIGJ1dCB0aGV5IG11c3QgYmUgdGhlIGdpdmVuIGVsZW1lbnQgdHlwZVxuICAgICAgaWYgKHByb3BlcnR5LnR5cGUgPT09IFwidGV4dFwiKSB7XG4gICAgICAgIHRlbXBsYXRlVGV4dEFtb3VudCsrO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKFxuICAgIHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGVtcGxhdGluZyAmJlxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCAmJlxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCAhPT0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0XG4gICkge1xuICAgIE9iamVjdC5rZXlzKHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dC5wcm9wZXJ0aWVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0gcHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LnByb3BlcnRpZXNba2V5XTtcbiAgICAgIGlmIChwcm9wZXJ0eS5ub25Sb290SW5oZXJpdGFibGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBidXQgdGhleSBtdXN0IGJlIHRoZSBnaXZlbiBlbGVtZW50IHR5cGVcbiAgICAgIGlmIChwcm9wZXJ0eS50eXBlID09PSBcInRleHRcIikge1xuICAgICAgICB0ZW1wbGF0ZVRleHRBbW91bnQrKztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmICh0ZW1wbGF0ZVRleHRBbW91bnQgPT09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoeyB0eXBlOiBcImlubGluZVwiLCBjaGlsZHJlbjogW10sIHRleHRDb250ZW50OiBcInRleHRcIiB9KTtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRBZGRUZW1wbGF0ZVRleHR9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17ZmFsc2V9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLmluc2VydFRlbXBsYXRlVGV4dCwgbnVsbCwgbnVsbCl9XG4gICAgICBodG1sRW50aXR5PVwidGV4dFwiXG4gICAgICB0eXBlPVwidGFibGVcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgICAgY291bnQ9e3RlbXBsYXRlVGV4dEFtb3VudH1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBUZW1wbGF0ZUhUTUwocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAoXG4gICAgIXByb3BzLmlzUmVhZHkgfHxcbiAgICAhcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUZW1wbGF0aW5nXG4gICkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbGV0IHRlbXBsYXRlSFRNTEFtb3VudCA9IDA7XG5cbiAgY29uc3QgY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnQgPSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgJiZcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHNbXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRzLmxlbmd0aCAtIDFcbiAgICBdO1xuXG4gIGlmIChcbiAgICBjdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudCAmJlxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dFxuICApIHtcbiAgICBPYmplY3Qua2V5cyhwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUb3Btb3N0U3VwZXJCbG9ja0NvbnRleHQucHJvcGVydGllcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFRvcG1vc3RTdXBlckJsb2NrQ29udGV4dC5wcm9wZXJ0aWVzW2tleV07XG5cbiAgICAgIC8vIGJ1dCB0aGV5IG11c3QgYmUgdGhlIGdpdmVuIGVsZW1lbnQgdHlwZVxuICAgICAgaWYgKHByb3BlcnR5LnR5cGUgPT09IFwiaHRtbFwiKSB7XG4gICAgICAgIHRlbXBsYXRlSFRNTEFtb3VudCsrO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKFxuICAgIHByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGVtcGxhdGluZyAmJlxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCAmJlxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dCAhPT0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0XG4gICkge1xuICAgIE9iamVjdC5rZXlzKHByb3BzLnN0YXRlLmN1cnJlbnRSb290Q29udGV4dC5wcm9wZXJ0aWVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0gcHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LnByb3BlcnRpZXNba2V5XTtcbiAgICAgIGlmIChwcm9wZXJ0eS5ub25Sb290SW5oZXJpdGFibGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBidXQgdGhleSBtdXN0IGJlIHRoZSBnaXZlbiBlbGVtZW50IHR5cGVcbiAgICAgIGlmIChwcm9wZXJ0eS50eXBlID09PSBcImh0bWxcIikge1xuICAgICAgICB0ZW1wbGF0ZUhUTUxBbW91bnQrKztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmICh0ZW1wbGF0ZUhUTUxBbW91bnQgPT09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpc2FibGVkID0gIXByb3BzLnN0YXRlLmFsbG93c0luc2VydEVsZW1lbnQoeyB0eXBlOiBcInZvaWQtYmxvY2tcIiwgY2hpbGRyZW46IFtdLCBodG1sOiBcImh0bWxcIiB9KTtcbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJCdXR0b25cbiAgICAgIHRpdGxlPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRBZGRUZW1wbGF0ZUhUTUx9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBzZWxlY3RlZD17ZmFsc2V9XG4gICAgICBvbkNsaWNrPXtjYWxsRm4uYmluZChudWxsLCBwcm9wcy5oZWxwZXJzLmZvY3VzLCBwcm9wcy5oZWxwZXJzLmluc2VydFRlbXBsYXRlSFRNTCwgbnVsbCwgbnVsbCl9XG4gICAgICBodG1sRW50aXR5PVwiaHRtbFwiXG4gICAgICB0eXBlPVwidGFibGVcIlxuICAgICAgZGlzam9pbnRlZE1vZGU9e3Byb3BzLmRpc2pvaW50ZWRNb2RlfVxuICAgICAgY291bnQ9e3RlbXBsYXRlSFRNTEFtb3VudH1cbiAgICAvPlxuICApO1xufVxuXG5pbnRlcmZhY2UgSVRvb2xiYXJFeHRyYVByb3BzIGV4dGVuZHMgUmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzIHtcbiAgZXh0cmE6IElUb29sYmFyUHJlc2NlbnNlRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gVG9vbGJhckV4dHJhKHByb3BzOiBJVG9vbGJhckV4dHJhUHJvcHMpIHtcbiAgY29uc3QgZWxlbWVudFJlZmVyZW5jZSA9IHR5cGVvZiBwcm9wcy5leHRyYS5lbGVtZW50ID09PSBcImZ1bmN0aW9uXCIgPyBwcm9wcy5leHRyYS5lbGVtZW50KCkgOiBwcm9wcy5leHRyYS5lbGVtZW50O1xuICBjb25zdCBkZWZhdWx0QWN0aW9uID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0eXBlb2YgcHJvcHMuZXh0cmEuZWxlbWVudCA9PT0gXCJmdW5jdGlvblwiID8gcHJvcHMuZXh0cmEuZWxlbWVudCgpIDogcHJvcHMuZXh0cmEuZWxlbWVudDtcbiAgICBwcm9wcy5oZWxwZXJzLmluc2VydEVsZW1lbnQoZWxlbWVudCk7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH0sIFtwcm9wcy5leHRyYS5lbGVtZW50LCBwcm9wcy5oZWxwZXJzLmluc2VydEVsZW1lbnRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwcm9wcy5leHRyYS5vbkFueUtleURvd24pIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgcHJvcHMuZXh0cmEub25BbnlLZXlEb3duKTtcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBwcm9wcy5leHRyYS5vbkFueUtleURvd24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybjtcbiAgfSwgW3Byb3BzLmV4dHJhLm9uQW55S2V5RG93bl0pXG5cbiAgY29uc3Qgb25DbGljayA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxCdXR0b25FbGVtZW50PikgPT4ge1xuICAgIGlmIChwcm9wcy5leHRyYS5yZWZvY3VzSGFuZGxlcikge1xuICAgICAgcHJvcHMuZXh0cmEucmVmb2N1c0hhbmRsZXIocHJvcHMuaGVscGVycy5mb2N1cywgZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb3BzLmhlbHBlcnMuZm9jdXMoKTtcbiAgICB9XG4gICAgcHJvcHMuZXh0cmEub25DbGljayA/IHByb3BzLmV4dHJhLm9uQ2xpY2soZGVmYXVsdEFjdGlvbiwgZSkgOiBkZWZhdWx0QWN0aW9uKCk7XG4gIH0sIFtdKTtcblxuICBsZXQgZGlzYWJsZWQgPSBmYWxzZTtcbiAgaWYgKGVsZW1lbnRSZWZlcmVuY2UpIHtcbiAgICBkaXNhYmxlZCA9ICFwcm9wcy5zdGF0ZS5hbGxvd3NJbnNlcnRFbGVtZW50KGVsZW1lbnRSZWZlcmVuY2UpO1xuICB9XG5cbiAgY29uc3QgVG9vbGJhckJ1dHRvbiA9IHByb3BzLlRvb2xiYXJCdXR0b24gfHwgRGVmYXVsdFRvb2xiYXJCdXR0b25Db21wb25lbnQ7XG4gIGlmICh0eXBlb2YgcHJvcHMuZXh0cmEudGl0bGUgPT09IFwic3RyaW5nXCIgfHwgIXByb3BzLmV4dHJhLnRpdGxlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICAgIHRpdGxlPXtwcm9wcy5leHRyYS50aXRsZSBhcyBzdHJpbmd9XG4gICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgc2VsZWN0ZWQ9e3Byb3BzLmV4dHJhLnNlbGVjdGVkfVxuICAgICAgICBjb3VudD17cHJvcHMuZXh0cmEuY291bnR9XG4gICAgICAgIGRpc2pvaW50ZWRNb2RlPXtwcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAgICAgaHRtbEVudGl0eT1cIj9cIlxuICAgICAgICB0eXBlPVwiZXh0cmFcIlxuICAgICAgICBleHRyYUlkPXtwcm9wcy5leHRyYS5pZH1cbiAgICAgICAgb25DbGljaz17b25DbGlja31cbiAgICAgICAgey4uLnByb3BzLmV4dHJhLnRvb2xiYXJCdXR0b25Qcm9wc31cbiAgICAgIC8+XG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBlbGVtZW50OiBSZWFjdC5SZWFjdEVsZW1lbnQgPSBwcm9wcy5leHRyYS50aXRsZSBhcyBhbnk7XG4gICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChlbGVtZW50LCB7XG4gICAgICBjaGlsZHJlbjogKGkxOG5UaXRsZTogc3RyaW5nKSA9PiAoXG4gICAgICAgIDxUb29sYmFyQnV0dG9uXG4gICAgICAgICAgdGl0bGU9e2kxOG5UaXRsZX1cbiAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgc2VsZWN0ZWQ9e3Byb3BzLmV4dHJhLnNlbGVjdGVkfVxuICAgICAgICAgIGNvdW50PXtwcm9wcy5leHRyYS5jb3VudH1cbiAgICAgICAgICBkaXNqb2ludGVkTW9kZT17cHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgICAgICAgaHRtbEVudGl0eT1cIj9cIlxuICAgICAgICAgIHR5cGU9XCJleHRyYVwiXG4gICAgICAgICAgZXh0cmFJZD17cHJvcHMuZXh0cmEuaWR9XG4gICAgICAgICAgb25DbGljaz17b25DbGlja31cbiAgICAgICAgICB7Li4ucHJvcHMuZXh0cmEudG9vbGJhckJ1dHRvblByb3BzfVxuICAgICAgICAvPlxuICAgICAgKVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIFRvb2xiYXJFeHRyYXMocHJvcHM6IFJpY2hUZXh0RWRpdG9yVG9vbGJhckVsZW1lbnRQcm9wcykge1xuICBpZiAocHJvcHMudG9vbGJhckV4dHJhcyAmJiBwcm9wcy50b29sYmFyRXh0cmFzLmxlbmd0aCkge1xuICAgIGNvbnN0IHRvb2xiYXJFeHRyYXMgPSBwcm9wcy50b29sYmFyRXh0cmFzLm1hcCgoeCwgaW5kZXgpID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxUb29sYmFyRXh0cmEgey4uLnByb3BzfSBleHRyYT17eH0ga2V5PXtpbmRleH0gLz5cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBjdXN0b21zID0gcHJvcHMudG9vbGJhckV4dHJhcy5tYXAoKHgsIGkpID0+IChcbiAgICAgIHguY3VzdG9tQ2hpbGRyZW4gPyA8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT57eC5jdXN0b21DaGlsZHJlbn08L1JlYWN0LkZyYWdtZW50PiA6IG51bGxcbiAgICApKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICB7dG9vbGJhckV4dHJhc31cbiAgICAgICAge2N1c3RvbXN9XG4gICAgICA8Lz5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIE5vbmUoKTogYW55IHtcbiAgcmV0dXJuIG51bGw7XG59XG5cbmNvbnN0IHRvb2xiYXJSZWdpc3RyeTogUmVjb3JkPFNsYXRlRWRpdG9yV3JhcHBlckN1c3RvbVRvb2xiYXJJZGVudGlmaWVkRWxlbWVudCwgUmVhY3QuRWxlbWVudFR5cGU8UmljaFRleHRFZGl0b3JUb29sYmFyRWxlbWVudFByb3BzPj4gPSB7XG4gIG5vbmU6IE5vbmUsXG4gIGl0YWxpYzogSXRhbGljLFxuICBib2xkOiBCb2xkLFxuICB1bmRlcmxpbmU6IFVuZGVybGluZSxcbiAgXCJidWxsZXRlZC1saXN0XCI6IEJ1bGxldGVkTGlzdCxcbiAgXCJudW1iZXJlZC1saXN0XCI6IE51bWJlcmVkTGlzdCxcbiAgXCJ0ZW1wbGF0ZS1odG1sXCI6IFRlbXBsYXRlSFRNTCxcbiAgXCJ0ZW1wbGF0ZS10ZXh0XCI6IFRlbXBsYXRlVGV4dCxcbiAgdGl0bGU6IFRpdGxlLFxuICBjb250YWluZXI6IENvbnRhaW5lcixcbiAgZGl2aWRlcjogVkRpdmlkZXIsXG4gIGhkaXZpZGVyOiBIRGl2aWRlcixcbiAgZXh0cmFzOiBUb29sYmFyRXh0cmFzLFxuICBmaWxlOiBGaWxlLFxuICBpbWFnZTogSW1hZ2UsXG4gIGxpbms6IExpbmssXG4gIHF1b3RlOiBRdW90ZSxcbiAgdmlkZW86IFZpZGVvLFxuICB0YWJsZTogVGFibGUsXG59XG5cbmludGVyZmFjZSBJVG9vbGJhckRyYXdlckJ1dHRvblByb3BzIHtcbiAgZHJhd2VyT3BlbjogYm9vbGVhbjtcbiAgdG9nZ2xlRHJhd2VyOiAoKSA9PiB2b2lkO1xuICBkaXNqb2ludGVkTW9kZTogYm9vbGVhbjtcbn07XG5cbmZ1bmN0aW9uIERlZmF1bHRUb29sYmFyRHJhd2VyVG9nZ2xlQnV0dG9uKHByb3BzOiBJVG9vbGJhckRyYXdlckJ1dHRvblByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPGJ1dHRvblxuICAgICAgb25DbGljaz17cHJvcHMudG9nZ2xlRHJhd2VyfVxuICAgICAgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JUb29sYmFyQnV0dG9uXCJcbiAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7IF9faHRtbDogcHJvcHMuZHJhd2VyT3BlbiA/IFwiJiMxMTAxNDtcIiA6IFwiJiMxMTAxNTtcIiB9fVxuICAgIC8+XG4gICk7XG59XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgZnVuY3Rpb24gY29tcG9uZW50IHRoYXQgcmVwcmVzZW50cyB0aGUgdG9vbGJhciBmb3IgdGhlIHdyYXBwZXJcbiAqIEBwYXJhbSBwcm9wcyB0aGUgZW50aXJlIHJpY2ggdGV4dCBlZGl0b3IgdG9vbGJhciBwcm9wcyB3aXRoIGFsbCB0aGUgYWRkZWQgZnVuY3Rpb25zXG4gKi9cbmNsYXNzIFJpY2hUZXh0RWRpdG9yVG9vbGJhciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxSaWNoVGV4dEVkaXRvclRvb2xiYXJQcm9wcywgUmljaFRleHRFZGl0b3JUb29sYmFyU3RhdGU+IHtcblxuICBwcml2YXRlIGFwcEJhckhlYWRlclJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxFbGVtZW50PjtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogUmljaFRleHRFZGl0b3JUb29sYmFyUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgLy8gaXNzdWVzIHdpdGggdGhlIGJhZGdlIGFuZCBTU1JcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaXNSZWFkeTogZmFsc2UsXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpc1JlYWR5OiB0cnVlLFxuICAgIH0pO1xuXG4gICAgdGhpcy5wcm9wcy5vbkhlaWdodENoYW5nZSh0aGlzLmdldEhlaWdodCgpKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICB0aGlzLnByb3BzLm9uSGVpZ2h0Q2hhbmdlKHRoaXMuZ2V0SGVpZ2h0KCkpO1xuICB9XG5cbiAgcHVibGljIGdldEhlaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBCYXJIZWFkZXJSZWY/LmN1cnJlbnQ/Lm9mZnNldEhlaWdodDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBcHBiYXJIZWFkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwQmFySGVhZGVyUmVmPy5jdXJyZW50O1xuICB9XG5cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICAvLyBubyByaWNoIHRleHRcbiAgICBpZiAoIXRoaXMucHJvcHMuc3RhdGUuaXNSaWNoVGV4dCkge1xuICAgICAgLy8gbm8gdG9vbGJhclxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuZGlzam9pbnRlZE1vZGUgJiYgIXRoaXMucHJvcHMuZGlzam9pbnRlZE1vZGVLZWVwVG9vbGJhciAmJiAhdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB0b29sYmFyRm9ybTogU2xhdGVFZGl0b3JXcmFwcGVyQ3VzdG9tVG9vbGJhckVsZW1lbnRbXSA9IChcbiAgICAgIHRoaXMucHJvcHMuY3VzdG9tVG9vbGJhciB8fCBbXG4gICAgICAgIFwiYm9sZFwiLFxuICAgICAgICBcIml0YWxpY1wiLFxuICAgICAgICBcInVuZGVybGluZVwiLFxuICAgICAgICAoXG4gICAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RpdGxlIHx8XG4gICAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1F1b3RlIHx8XG4gICAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0xpbmtzIHx8XG4gICAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0xpc3RzXG4gICAgICAgICkgPyBcImRpdmlkZXJcIiA6IFwibm9uZVwiLFxuICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzTGlua3MgPyBcImxpbmtcIiA6IFwibm9uZVwiLFxuICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVGl0bGUgPyBcInRpdGxlXCIgOiBcIm5vbmVcIixcbiAgICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1F1b3RlID8gXCJxdW90ZVwiIDogXCJub25lXCIsXG4gICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNMaXN0cyA/IFwiYnVsbGV0ZWQtbGlzdFwiIDogXCJub25lXCIsXG4gICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNMaXN0cyA/IFwibnVtYmVyZWQtbGlzdFwiIDogXCJub25lXCIsXG4gICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUYWJsZXMgPyBcInRhYmxlXCIgOiBcIm5vbmVcIixcbiAgICAgICAgKFxuICAgICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNJbWFnZXMgfHxcbiAgICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzRmlsZXMgfHxcbiAgICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzVmlkZW9zXG4gICAgICAgICkgPyBcImRpdmlkZXJcIiA6IFwibm9uZVwiLFxuICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzSW1hZ2VzID8gXCJpbWFnZVwiIDogXCJub25lXCIsXG4gICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNGaWxlcyA/IFwiZmlsZVwiIDogXCJub25lXCIsXG4gICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNWaWRlb3MgPyBcInZpZGVvXCIgOiBcIm5vbmVcIixcbiAgICAgICAgXCJkaXZpZGVyXCIsXG4gICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNDb250YWluZXJzID8gXCJjb250YWluZXJcIiA6IFwibm9uZVwiLFxuICAgICAgICBcInRlbXBsYXRlLXRleHRcIixcbiAgICAgICAgXCJ0ZW1wbGF0ZS1odG1sXCIsXG4gICAgICAgIHRoaXMucHJvcHMudG9vbGJhckV4dHJhcyAmJiB0aGlzLnByb3BzLnRvb2xiYXJFeHRyYXMubGVuZ3RoID8gXCJleHRyYXNcIiA6IFwibm9uZVwiLFxuICAgICAgXVxuICAgICkubWFwKCh2KSA9PiB7XG4gICAgICBpZiAodHlwZW9mICh2KSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiB2KHRoaXMucHJvcHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdjtcbiAgICB9KTtcblxuICAgIGNvbnN0IERyYXdlclRvZ2dsZUNvbXBvbmVudCA9IHRoaXMucHJvcHMuVG9vbGJhckRyYXdlckJ1dHRvbiB8fCBEZWZhdWx0VG9vbGJhckRyYXdlclRvZ2dsZUJ1dHRvbjtcblxuICAgIGxldCBkcmF3ZXJCdXR0b24gPSAoXG4gICAgICB0aGlzLnByb3BzLnNob3VsZEhhdmVEcmF3ZXIoKSA/XG4gICAgICAgIDxEcmF3ZXJUb2dnbGVDb21wb25lbnRcbiAgICAgICAgICBkcmF3ZXJPcGVuPXt0aGlzLnByb3BzLmRyYXdlck9wZW59XG4gICAgICAgICAgdG9nZ2xlRHJhd2VyPXt0aGlzLnByb3BzLnRvZ2dsZURyYXdlcn1cbiAgICAgICAgICBkaXNqb2ludGVkTW9kZT17dGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAgICAgLz4gOlxuICAgICAgICBudWxsXG4gICAgKTtcblxuICAgIGNvbnN0IGN1c3RvbUNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGVbXSA9IFtdO1xuICAgIGNvbnN0IHRvb2xiYXJGb3JtTWFwcGVkID0gKFxuICAgICAgdG9vbGJhckZvcm0ubWFwKChlbGUsIGluZGV4KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgZWxlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgY29uc3QgRWxlbWVudCA9IHRvb2xiYXJSZWdpc3RyeVtlbGVdO1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8RWxlbWVudFxuICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgICAgICAgaXNSZWFkeT17dGhpcy5zdGF0ZS5pc1JlYWR5fVxuICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGV4dHJhVmFsdWUgPSB0eXBlb2YgZWxlID09PSBcImZ1bmN0aW9uXCIgPyBlbGUodGhpcy5wcm9wcykgOiBlbGU7XG5cbiAgICAgICAgICBpZiAoKGV4dHJhVmFsdWUgYXMgSVRvb2xiYXJQcmVzY2Vuc2VFbGVtZW50KS5jdXN0b21DaGlsZHJlbikge1xuICAgICAgICAgICAgY3VzdG9tQ2hpbGRyZW4ucHVzaChcbiAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50IGtleT17aW5kZXh9PlxuICAgICAgICAgICAgICAgIHsoZXh0cmFWYWx1ZSBhcyBJVG9vbGJhclByZXNjZW5zZUVsZW1lbnQpLmN1c3RvbUNoaWxkcmVufVxuICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFRvb2xiYXJFeHRyYVxuICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgICAgICAgaXNSZWFkeT17dGhpcy5zdGF0ZS5pc1JlYWR5fVxuICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICBleHRyYT17ZXh0cmFWYWx1ZSBhcyBJVG9vbGJhclByZXNjZW5zZUVsZW1lbnR9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcblxuICAgIGNvbnN0IFRvb2xiYXIgPSB0aGlzLnByb3BzLlRvb2xiYXIgfHwgRGVmYXVsdFRvb2xiYXI7XG5cbiAgICAvLyBub3cgd2UgY2FuIGNyZWF0ZSB0aGUgY29tcG9uZW50IGl0c2VsZlxuICAgIC8vIHRoZXJlIGlzIG5vdCBtdWNoIHRvIHNheSBvbiBob3cgdGhpcyBhbGwgd29ya3NcbiAgICBjb25zdCB0b1JldHVybiA9IChcbiAgICAgIDxUb29sYmFyXG4gICAgICAgIGN1c3RvbUNoaWxkcmVuPXtjdXN0b21DaGlsZHJlbn1cbiAgICAgICAgZGlzam9pbnRlZE1vZGU9e3RoaXMucHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgICAgIGRyYXdlckJ1dHRvbj17ZHJhd2VyQnV0dG9ufVxuICAgICAgICBkcmF3ZXJPcGVuPXt0aGlzLnByb3BzLmRyYXdlck9wZW59XG4gICAgICAgIHByb3BzPXt7XG4gICAgICAgICAgW1wiZGF0YS11bmJsdXJcIl06IHRydWUsXG4gICAgICAgIH19XG4gICAgICAgIHRvb2xiYXJDb250ZW50cz17dG9vbGJhckZvcm1NYXBwZWR9XG4gICAgICAgIHJlZj17dGhpcy5hcHBCYXJIZWFkZXJSZWZ9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZSAmJiB0aGlzLnN0YXRlLmlzUmVhZHkpIHtcbiAgICAgIHJldHVybiBSZWFjdERPTS5jcmVhdGVQb3J0YWwodG9SZXR1cm4sIGRvY3VtZW50LmJvZHkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0b1JldHVybjtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBzdGF0ZSBmb3IgdGhlIHdyYXBwZXJcbiAqIHRoZSBzdGF0ZSBpcyBuZWNlc3NhcnkgYXMgdGhlIHdyYXBwZXIgY2FuIGhvbGQgZGlhbG9ncyBvcGVuXG4gKiBhbmQgdGhlIGRyYXdlciBpdHNlbGZcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEZWZhdWx0U2xhdGVXcmFwcGVyU3RhdGUge1xuICAvKipcbiAgICogU3BlY2lmaWVzIHRoZSBzdGF0ZSBvZiB0aGUgZHJhd2VyXG4gICAqL1xuICBkcmF3ZXJPcGVuOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgdGhlIGhlaWdodCBvZiB0aGUgdG9vbGJhciBmb3IgdXNlXG4gICAqIHdoZW4gdGhlIGRyYXdlciBpcyBvcGVuIGluIGRpc2pvaW50ZWQgbW9kZVxuICAgKi9cbiAgdG9vbGJhckhlaWdodDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBBIGN1c3RvbSB0b29sYmFyIHN0YXRlXG4gICAqL1xuICB0b29sYmFyU3RhdGU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGRyYXdlciBiZWluZyBvcGVuIG9yIGNsb3NlZCBpcyBzdG9yZWQgaW4gbG9jYWwgc3RvcmFnZSwgd2hpY2ggaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgc2VydmVyXG4gICAqIHNpZGUsIGFuZCB0aGUgZHJhd2VyIGFuaW1hdGVzIHdoZW4gaXQncyBvcGVuZWQgYW5kIGNsb3NlZCwgc28gdGhpcyB2YXJpYWJsZSBpcyBhbHdheXMgZmFsc2UgYXQgdGhlXG4gICAqIHN0YXJ0LCB0aGUgZHJhd2VyIGlzIGFsd2F5cyBjbG9zZWQgYXQgdGhlIHN0YXJ0LCBob3dldmVyLCBpZiB3ZSBuZWVkIHRvIG9wZW4gdGhlIGRyYXdlciBhdCB0aGUgc3RhcnRcbiAgICogb24gbW91bnQgd2UgZG9uJ3Qgd2FudCBhbnkgYW5pbWF0aW9uIHNvIHdlIHRvZ2dsZSB0aGlzIGZsYWcgdGVtcG9yYXJpbHksIGl0IGRvZXNuJ3QgbmVlZCB0byBiZSBwYXJ0XG4gICAqIG9mIHRoZSBzdGF0ZSBhcyBpdCdzIG9ubHkgdXNlZCB0aGVyZVxuICAgKi9cbiAgbm9BbmltYXRlOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBXaGVuIG9wZW5pbmcgYSBkaWFsb2cgYW5kIGxvc2luZyBmb2N1cyB0byB0aGUgc2xhdGUgcmljaCB0ZXh0IGVkaXRvciBjb250ZW50IGVkaXRhYmxlXG4gICAqIHdlIGxvc2UgYWNjZXNzIHRvIHRoZSBhbmNob3JzIGFuZCBjdXJyZW50IGVsZW1lbnRzIG5vdyB0aGF0IHdlIGFyZSBpbiBmb2N1cyBvZiBzb21ldGhpbmdcbiAgICogZWxzZSBzbyB3ZSBuZWVkIHRvIHN0b3JlIHRoZSBlbGVtZW50IHRoYXQgd2FzIHRoZSBjdXJyZW50IGVsZW1lbnQgdGhhdCB3YXMgaW4gZm9jdXNcbiAgICogYmVmb3JlIHRoYXQgaGFwcGVuZWRcbiAgICovXG4gIGlubGluZUVsZW1lbnRUaGF0V2FzQ3VycmVudEJlZm9yZUxvc2luZ0ZvY3VzOiBSaWNoRWxlbWVudDtcbn1cblxuLyoqXG4gKiBUaGlzIHJlcHJlc2VudHMgdGhlIHVud3JhcHBlZCBjbGFzcyB0aGF0IGlzIHVzZWQgZm9yIHRoZSB3cmFwcGVyLCBpdCBpcyBub3RcbiAqIHRoZSBleHBvcnRlZCBvbmUgYmVjYXVzZSBpdCBuZWVkcyB0byBiZSB3aXRoU3R5bGVzIGZvciBzdHlsaXphdGlvblxuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdFNsYXRlV3JhcHBlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8SURlZmF1bHRTbGF0ZVdyYXBwZXJQcm9wcywgRGVmYXVsdFNsYXRlV3JhcHBlclN0YXRlPiB7XG4gIC8qKlxuICAgKiBUaGUgcmVmIG9iamVjdCBmb3IgdGhlIGlucHV0IG9iamVjdCBmb3IgaW1hZ2UgaW5wdXRcbiAgICovXG4gIHByaXZhdGUgaW5wdXRJbWFnZVJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxJbnB1dEVsZW1lbnQ+O1xuXG4gIC8qKlxuICAgKiBUaGUgcmVmIG9iamVjdCBmb3IgdGhlIGlucHV0IG9iamVjdCBmb3IgYW55IGZpbGUgaW5wdXRcbiAgICovXG4gIHByaXZhdGUgaW5wdXRGaWxlUmVmOiBSZWFjdC5SZWZPYmplY3Q8SFRNTElucHV0RWxlbWVudD47XG5cbiAgLyoqXG4gICAqIEEgcmVmIHRvIHRoZSBjb250YWluZXJcbiAgICovXG4gIHByaXZhdGUgRHJhd2VyQ29udGFpbmVyUmVmOiBSZWFjdC5SZWZPYmplY3Q8RHJhd2VyQ29udGFpbmVyPjtcblxuICAvKipcbiAgICogYSByZWYgdG8gdGhlIGVkaXRvclxuICAgKi9cbiAgcHJpdmF0ZSBlZGl0b3JSZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRWxlbWVudD47XG5cbiAgLyoqXG4gICAqIEEgcmVmIGZvciB0aGUgdG9vbGJhclxuICAgKi9cbiAgcHJpdmF0ZSB0b29sYmFyUmVmOiBSZWFjdC5SZWZPYmplY3Q8UmljaFRleHRFZGl0b3JUb29sYmFyPjtcblxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgcmFuZ2UgdGhhdCB3YXMgaW4gcGxhY2UgYmVmb3JlIGxvc2luZyBmb2N1cywgaXQgaXMgdXNlZCBiZWNhdXNlXG4gICAqIHdoZW4gb3BlbmluZyBzb21lIGRpYWxvZywgdGhlIGluc2VydGlvbiBvciBjaGFuZ2UgbmVlZHMgdG8gaGFwcGVuIGF0IGEgZ2l2ZW5cbiAgICogc2VsZWN0aW9uIHJhbmdlLCBidXQgdGhhdCBpcyBsb3N0IHdoZW4gbG9zaW5nIGZvY3VzLCBzbyB3ZSBuZWVkIHRvIHJlbWVtYmVyIGl0XG4gICAqL1xuICBwcml2YXRlIG9yaWdpbmFsU2VsZWN0aW9uQXJlYTogUmFuZ2U7XG4gIC8qKlxuICAgKiBJZiBpbnN0ZWFkIG9mIGhhdmluZyBhIHNlbGVjdGlvbiBhcmVhIHdlIGhhZCBhIHNlbGVjdGlvbiBwYXRoIGFzIGEgc2VsZWN0ZWQgZWxlbWVudFxuICAgKiBiZWNhdXNlIHdlIHdlcmUgd29ya2lnbiBpbiB0aGUgcmFuZ2VcbiAgICovXG4gIHByaXZhdGUgb3JpZ2luYWxTZWxlY3Rpb25QYXRoOiBQYXRoO1xuXG4gIC8qKlxuICAgKiB0aGlzIGlzIHVzZWQgdG8gZW5zdXJlIGEgcmVmb2N1cyBhZnRlciB0aGUgbmF0aXZlIGRpYWxvZ3MgZm9yIGZpbGUgYW5kIGZvciBpbWFnZSB0aGF0XG4gICAqIGFyZSB1c2VkIHRvIGdldCBhIGZpbGUgYXJlIGNsb3NlZDsgd2hpbGUgd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgaW5wdXQgZXZlbnQgdG8gdHJpZ2dlclxuICAgKiB3ZSBkb24ndCBrbm93IGlmIHRoYXQgaGFwcGVucyBmaXJzdCBhcyB0aGVyZSBhcmUgbm8gZ3VhcmFudGVlcyBzbyB3ZSBkZWxheSBpdCBhIGxpdHRsZSBiaXRcbiAgICogYW5kIHRoZSBjaGFuZ2UgZXZlbnQgbWlnaHQgbm90IGV2ZW4gdHJpZ2dlclxuICAgKi9cbiAgcHJpdmF0ZSByZWZvY3VzVGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XG5cbiAgcHJpdmF0ZSBpc1VubW91bnRlZDogYm9vbGVhbjtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBtYXRlcmlhbCB1aSBiYXNlZCB3cmFwcGVyIGZvciB0aGUgc2xhdGUgZWRpdG9yXG4gICAqIEBwYXJhbSBwcm9wcyB0aGUgYmFzZSBwcm9wZXJ0aWVzIHRoYXQgZXZlcnkgd3JhcHBlciBnZXRzIGV4dGVuZGVkIGZvciB0aGlzIHNwZWNpZmljIHdyYXBwZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJRGVmYXVsdFNsYXRlV3JhcHBlclByb3BzKSB7XG5cbiAgICAvLyBzdXBlciBjYWxsaW5nXG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgLy8gc2V0dXAgdGhlIGluaXRpYWwgc3RhdGVcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaW5saW5lRWxlbWVudFRoYXRXYXNDdXJyZW50QmVmb3JlTG9zaW5nRm9jdXM6IG51bGwsXG5cbiAgICAgIC8vIGtlZXAgU1NSIGNvbXBhdGliaWxpdHkgYnkga2VlcGluZyB0aGUgZHJhd2VyIGNsb3NlZCBhdCB0aGUgc3RhcnRcbiAgICAgIC8vIGFzIHdlIGNhbm5vdCByZWFkIGxvY2FsIHN0b3JhZ2UgaW4gdGhlIHNlcnZlciBzaWRlXG4gICAgICBkcmF3ZXJPcGVuOiBmYWxzZSxcbiAgICAgIHRvb2xiYXJIZWlnaHQ6IDAsXG4gICAgICBub0FuaW1hdGU6IHRydWUsXG4gICAgICB0b29sYmFyU3RhdGU6IG51bGwsXG4gICAgfVxuXG4gICAgdGhpcy5pc1VubW91bnRlZCA9IGZhbHNlO1xuXG4gICAgLy8gY3JlYXRlIHRoZSByZWZzXG4gICAgdGhpcy5pbnB1dEltYWdlUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gICAgdGhpcy5pbnB1dEZpbGVSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgICB0aGlzLkRyYXdlckNvbnRhaW5lclJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuICAgIHRoaXMudG9vbGJhclJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuICAgIHRoaXMuZWRpdG9yUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG5cbiAgICAvLyBiaW5kIGFsbCB0aGUgZnVuY3Rpb25zXG4gICAgdGhpcy5vbkhlaWdodENoYW5nZSA9IHRoaXMub25IZWlnaHRDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uSW1hZ2VMb2FkID0gdGhpcy5vbkltYWdlTG9hZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25GaWxlTG9hZCA9IHRoaXMub25GaWxlTG9hZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVxdWVzdEltYWdlID0gdGhpcy5yZXF1ZXN0SW1hZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlcXVlc3RGaWxlID0gdGhpcy5yZXF1ZXN0RmlsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25GaWxlRXZlbnRlZFJlRm9jdXMgPSB0aGlzLm9uRmlsZUV2ZW50ZWRSZUZvY3VzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZWZvY3VzID0gdGhpcy5yZWZvY3VzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zaG91bGRIYXZlRHJhd2VyID0gdGhpcy5zaG91bGRIYXZlRHJhd2VyLmJpbmQodGhpcyk7XG4gICAgdGhpcy50b2dnbGVEcmF3ZXIgPSB0aGlzLnRvZ2dsZURyYXdlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0VG9vbGJhclN0YXRlID0gdGhpcy5zZXRUb29sYmFyU3RhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNlbGVjdGl2ZUhhcmRCbHVyID0gdGhpcy5zZWxlY3RpdmVIYXJkQmx1ci5iaW5kKHRoaXMpO1xuICAgIHRoaXMua2V5VXBMaXN0ZW5lciA9IHRoaXMua2V5VXBMaXN0ZW5lci5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25BbHRBY3Rpb25UcmlnZ2VyZWQgPSB0aGlzLm9uQWx0QWN0aW9uVHJpZ2dlcmVkLmJpbmQodGhpcyk7XG4gIH1cblxuICBwdWJsaWMgb25BbHRBY3Rpb25UcmlnZ2VyZWQodGFiTmF2OiBib29sZWFuLCBhY3Rpb246IFwiY2xpY2tcIiB8IFwiZm9jdXNcIiB8IFwiYmx1clwiKSB7XG4gICAgaWYgKGFjdGlvbiA9PT0gXCJibHVyXCIpIHtcbiAgICAgIHRoaXMucHJvcHMuaGVscGVycy5oYXJkQmx1cigpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbkhlaWdodENoYW5nZShuZXdIZWlnaHQ6IG51bWJlcikge1xuICAgIGlmICh0aGlzLnN0YXRlLnRvb2xiYXJIZWlnaHQgIT09IG5ld0hlaWdodCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHRvb2xiYXJIZWlnaHQ6IG5ld0hlaWdodCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEdXJpbmcgdGhlIG1vdW50IGV2ZW50XG4gICAqL1xuICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLy8gaWYgd2Ugc2hvdWxkIGhhdmUgYSBkcmF3ZXJcbiAgICBpZiAodGhpcy5zaG91bGRIYXZlRHJhd2VyKCkpIHtcbiAgICAgIC8vIGFuZCBzZXQgdGhlIHN0YXRlIG9mIHRoZSBkcmF3ZXIgYmFzZWQgb24gdGhlIGxvY2FsIHN0b3JhZ2UgdmFsdWVcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBkcmF3ZXJPcGVuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlNMQVRFX0RSQVdFUl9PUEVOXCIpID09PSBcInRydWVcIixcbiAgICAgICAgbm9BbmltYXRlOiB0cnVlLFxuICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIHdhaXQgMzAwIHNlY29uZHMgYmVjYXVzZSBhcyB1c3VhbFxuICAgICAgICAvLyBzb21lIGJ1ZyBpbiByZWFjdCBjYXVzZXMgc3RhdGVzIHRvIHN0YWNrXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIGFuZCByZS1lbmFibGUgdGhlIGFuaW1hdGlvblxuICAgICAgICAgIC8vIGlmIHRoZSBkcmF3ZXIgb3BlbmVkIGl0IHdvbid0IGFuaW1hdGVcbiAgICAgICAgICAvLyB0aGlzIGtlZXBzIFNTUiBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgIXRoaXMuaXNVbm1vdW50ZWQgJiYgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBub0FuaW1hdGU6IGZhbHNlLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gb3RoZXJ3aXNlIGFuaW1hdGlvbiBpcyBlbmFibGVkXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgbm9BbmltYXRlOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLnNlbGVjdGl2ZUhhcmRCbHVyKTtcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuc2VsZWN0aXZlSGFyZEJsdXIpO1xuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMua2V5VXBMaXN0ZW5lcik7XG4gIH1cblxuICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuc2VsZWN0aXZlSGFyZEJsdXIpO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5zZWxlY3RpdmVIYXJkQmx1cik7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5rZXlVcExpc3RlbmVyKTtcbiAgICB0aGlzLmlzVW5tb3VudGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBrZXlVcExpc3RlbmVyKGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoZS5rZXkgPT09IFwiVGFiXCIpIHtcbiAgICAgIHRoaXMuc2VsZWN0aXZlSGFyZEJsdXIoZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNlbGVjdGl2ZUhhcmRCbHVyKGU6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50LCBhbHRUYXJnZXQ/OiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGFsdFRhcmdldCB8fCAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpO1xuICAgIC8vIHdlIGFyZSBjdXJyZW50bHkgaW4gZm9jdXNcbiAgICBpZiAodGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRUZXh0KSB7XG4gICAgICAvLyBpZiBpdCdzIGFuIHVuYmx1cnJlZCB0YXJnZXQsIHN1Y2ggYXMgdGhlIHRvb2xiYXJcbiAgICAgIC8vIG9yIHRoZSBkcmF3ZXJcbiAgICAgIGlmICh0aGlzLmlzVW5ibHVycmVkKHRhcmdldCkpIHtcbiAgICAgICAgaWYgKHRhcmdldC50YWdOYW1lICE9PSBcIklOUFVUXCIgJiYgdGFyZ2V0LnRhZ05hbWUgIT09IFwiU0VMRUNUXCIpIHtcbiAgICAgICAgICAvLyBzdG9wIGZyb20gbG9zaW5nIGZvY3VzXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLmlzSW5FZGl0b3IodGFyZ2V0KSkge1xuICAgICAgICAvLyBvdGhlcndpc2UgaWYgd2UgYXJlIG5vdCBpbiB0aGUgZWRpdG9yXG4gICAgICAgIC8vIGp1c3QgbG9zZSBhbGwgdGhlIGZvY3VzXG4gICAgICAgIHRoaXMucHJvcHMuaGVscGVycy5oYXJkQmx1cigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpc1VuYmx1cnJlZChlbGU6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgaWYgKFxuICAgICAgZWxlID09PSB0aGlzLnRvb2xiYXJSZWYuY3VycmVudC5nZXRBcHBiYXJIZWFkZXIoKSB8fFxuICAgICAgZWxlID09PSB0aGlzLkRyYXdlckNvbnRhaW5lclJlZi5jdXJyZW50LmdldERyYXdlckJvZHkoKSB8fFxuICAgICAgZWxlLmRhdGFzZXQudW5ibHVyXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZWxlLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVW5ibHVycmVkKGVsZS5wYXJlbnRFbGVtZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgaXNJbkVkaXRvcihlbGU6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgaWYgKFxuICAgICAgZWxlLmRhdGFzZXQubm90RWRpdG9yXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGVsZSA9PT0gdGhpcy5lZGl0b3JSZWYuY3VycmVudFxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGVsZS5wYXJlbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5pc0luRWRpdG9yKGVsZS5wYXJlbnRFbGVtZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogU3BlY2lmaWVzIG9uIHdoZXRoZXIgaXQgc2hvdWxkIGhhdmUgYSBkcmF3ZXJcbiAgICogQHJldHVybnMgYSBib29sZWFuIG9uIHRoaXMgZmFjdFxuICAgKi9cbiAgcHVibGljIHNob3VsZEhhdmVEcmF3ZXIoKSB7XG4gICAgLy8gYmFzaWNhbGx5IG5vdCByaWNoIHRleHRcbiAgICBpZiAoIXRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQgfHwgdGhpcy5wcm9wcy5oaWRlRHJhd2VyKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIGEgZHJhd2VyIGlzIG9ubHkgbmVjZXNzYXJ5IGlmIHdlIHN1cHBvcnQgYWxsIG9mIHRoZXNlXG4gICAgLy8gYmVhdXNlIHRoYXQncyB3aGF0IHdlIGNvbmZpZ3VyZSBpbiB0aGUgZHJhd2VyXG4gICAgcmV0dXJuICEhKFxuICAgICAgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmcgfHxcbiAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNDdXN0b21TdHlsZXMgfHxcbiAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNDb250YWluZXJzIHx8XG4gICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRlZEN1c3RvbXMgfHxcbiAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNSaWNoQ2xhc3NlcyB8fFxuICAgICAgdGhpcy5wcm9wcy5kcmF3ZXJFeHRyYXNcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIGluIG9yZGVyIHRvIG9wZW4gdGhlIGRpYWxvZyBpbiBvcmRlciB0byByZXF1ZXN0IGFuIGltYWdlXG4gICAqIHZpYSB0aGlzIGZpbGUgdXBsb2FkIGRpYWxvZ1xuICAgKi9cbiAgcHVibGljIHJlcXVlc3RJbWFnZSgpIHtcbiAgICAvLyB3ZSBhZGQgdGhlIGZvY3VzIGxpc3RlbmVyIGZvciB0aGUgcmVmb2N1cyB3aGVuIHRoZSBkaWFsb2cgY2xvc2VzXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgdGhpcy5vbkZpbGVFdmVudGVkUmVGb2N1cywgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgIC8vIGdldCB0aGUgb3JpZ2luYWwgc2VsZWN0aW9uIGFyZWFcbiAgICB0aGlzLm9yaWdpbmFsU2VsZWN0aW9uQXJlYSA9IHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFRleHQgPyB0aGlzLnByb3BzLmhlbHBlcnMuZWRpdG9yLnNlbGVjdGlvbiA6IG51bGw7XG4gICAgdGhpcy5vcmlnaW5hbFNlbGVjdGlvblBhdGggPSB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnRBbmNob3IgfHxcbiAgICAgIHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yIHx8XG4gICAgICAoXG4gICAgICAgIHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzICYmXG4gICAgICAgIHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW1xuICAgICAgICB0aGlzLnByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycy5sZW5ndGggLSAxXG4gICAgICAgIF1cbiAgICAgICk7XG4gICAgLy8gdHJpZ2dlciBhIGNsaWNrXG4gICAgdGhpcy5pbnB1dEltYWdlUmVmLmN1cnJlbnQuY2xpY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlcyBpbiBvcmRlciB0byBvcGVuIHRoZSBkaWFsb2cgaW4gb3JkZXIgdG8gcmVxdWVzdCBhbiBmaWxlXG4gICAqIHZpYSB0aGlzIGZpbGUgdXBsb2FkIGRpYWxvZ1xuICAgKi9cbiAgcHVibGljIHJlcXVlc3RGaWxlKCkge1xuICAgIC8vIHdlIGFkZCB0aGUgZm9jdXMgbGlzdGVuZXIgZm9yIHRoZSByZWZvY3VzIHdoZW4gdGhlIGRpYWxvZyBjbG9zZXNcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLm9uRmlsZUV2ZW50ZWRSZUZvY3VzLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgLy8gZ2V0IHRoZSBvcmlnaW5hbCBzZWxlY3Rpb24gYXJlYVxuICAgIHRoaXMub3JpZ2luYWxTZWxlY3Rpb25BcmVhID0gdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50VGV4dCA/IHRoaXMucHJvcHMuaGVscGVycy5lZGl0b3Iuc2VsZWN0aW9uIDogbnVsbDtcbiAgICB0aGlzLm9yaWdpbmFsU2VsZWN0aW9uUGF0aCA9IHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvciB8fFxuICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnRBbmNob3IgfHxcbiAgICAgIChcbiAgICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnMgJiZcbiAgICAgICAgdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudEFuY2hvcnNbXG4gICAgICAgIHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLmxlbmd0aCAtIDFcbiAgICAgICAgXVxuICAgICAgKTtcbiAgICAvLyB0cmlnZ2VyIGEgY2xpY2tcbiAgICB0aGlzLmlucHV0RmlsZVJlZi5jdXJyZW50LmNsaWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMvY2xvc2VzIHRoZSBkcmF3ZXJcbiAgICovXG4gIHB1YmxpYyB0b2dnbGVEcmF3ZXIoKSB7XG4gICAgLy8gd2UgdGFrZSB0aGUgbmV3IHN0YXRlIHRoYXQgd2Ugd2lsbCBiZSB1c2luZyBhcyB0aGUgb3Bwb3NpdGUgb2YgIHRoZSBjdXJyZW50XG4gICAgY29uc3QgbmV3U3RhdGUgPSAhdGhpcy5zdGF0ZS5kcmF3ZXJPcGVuO1xuXG4gICAgLy8gcHV0IGl0IGluIHRoZSBzdGF0ZVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZHJhd2VyT3BlbjogbmV3U3RhdGUsXG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMucHJvcHMuZGlzam9pbnRlZE1vZGUpIHtcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcIlNMQVRFX0RSQVdFUl9PUEVOXCIpKTtcbiAgICB9XG5cbiAgICAvLyBhbmQgcHV0IGl0IGluIGxvY2FsIHN0b3JhZ2VcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlNMQVRFX0RSQVdFUl9PUEVOXCIsIEpTT04uc3RyaW5naWZ5KG5ld1N0YXRlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVmb2N1c2VzIGFzIHRoZSBvcmlnaW5hbCBzZWxlY3Rpb24gYXJlYSB0aGF0IHdhcyBmb2N1c2VkXG4gICAqIG1haW5seSB1c2VkIGJ5IGRpYWxvZ3Mgb25jZSB0aGV5IGhhYXZlIGNsb3NlZFxuICAgKi9cbiAgcHVibGljIHJlZm9jdXMoKSB7XG4gICAgaWYgKHRoaXMuaXNVbm1vdW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcmlnaW5hbFNlbGVjdGlvbkFyZWEpIHtcbiAgICAgIHRoaXMucHJvcHMuaGVscGVycy5mb2N1c0F0KHRoaXMub3JpZ2luYWxTZWxlY3Rpb25BcmVhKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3JpZ2luYWxTZWxlY3Rpb25QYXRoKSB7XG4gICAgICB0aGlzLnByb3BzLmhlbHBlcnMuc2VsZWN0UGF0aCh0aGlzLm9yaWdpbmFsU2VsZWN0aW9uUGF0aCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIG9uY2UgdGhlIGRvY3VtZW50IGhhcyByZWNvdmVyZWQgZm9jdXMgZnJvbSB0aGUgZmlsZVxuICAgKiBkaWFsb2cgdGhhdCBpcyBuYXRpdmUgZm9yIHRoZSBmaWxlIHVwbG9hZFxuICAgKi9cbiAgcHVibGljIG9uRmlsZUV2ZW50ZWRSZUZvY3VzKCkge1xuICAgIC8vIHJlbW92ZSB0aGUgb2xkIGxpc3RlbmVyIGZyb20gdGhlIGJvZHlcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLm9uRmlsZUV2ZW50ZWRSZUZvY3VzLCB7IGNhcHR1cmU6IHRydWUgfSk7XG5cbiAgICAvLyB3ZSBkbyBpdCB0aGlzIHdheSBiZWNhdXNlIHRoaXMgaXMgYSBoYWNreSB3YXkgYW5kIHdlIGFyZSBub3Qgc3VyZVxuICAgIC8vIG9uIHdoZXRoZXIgdGhlIGZvY3VzIGV2ZW50IHdpbGwgdHJpZ2dlciBiZWZvcmUgdGhlIGlucHV0IGV2ZW50LFxuICAgIC8vIHRoYXQgY29tZXMgZnJvbSB0aGUgZmlsZSBpbnB1dCBkaWFsb2csIHRoZSBpbnB1dCBzaG91bGQgY29tZSBmaXJzdFxuICAgIC8vIGFzIHRoZSBmaWxlIGlzIHRvIHVwbG9hZCwgYnV0IHdlIG1ha2Ugbm8gYXNzdW1wdGlvbnNcbiAgICB0aGlzLnJlZm9jdXNUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnJlZm9jdXMsIDMwKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRUb29sYmFyU3RhdGUoc3RhdGU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS50b29sYmFyU3RhdGUgIT09IHN0YXRlKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgdG9vbGJhclN0YXRlOiBzdGF0ZSB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBnZXRzIGNhbGxlZCBvbmNlIHRoZSBpbWFnZSBpbnB1dCBjYWxscyB0aGUgb24gY2hhbmdlIGV2ZW50XG4gICAqIHdoaWNoIG1lYW5zIGl0IGhhcyBiZWVuIGxvYWRlZCBieSB0aGUgaW5wdXQgaXRzZWxmIGFuZCBpdCdzIGF2YWlsYWJsZSBmb3JcbiAgICogcmVhZGluZ1xuICAgKiBAcGFyYW0gZSB0aGUgY2hhbmdlIGV2ZW50IHRoYXQgY29udGFpbnMgdGhlIGZpbGUgXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgb25JbWFnZUxvYWQoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pIHtcbiAgICAvLyByZW1vdmUgdGhlIGxpc3RlbmVyIGZvciB0aGUgd2hvbGUgaW5wdXQgZm9yIHRoZSByZWZvY3VzIGJhY2sgaW50byB0aGUgZmllbGRcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLm9uRmlsZUV2ZW50ZWRSZUZvY3VzLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgLy8gY2xlYXIgYSB0aW1lb3V0IGluIGNhc2UgdGhlcmUgaXMgb25lIGZvciB0aGlzIHJlZm9jdXMsIHNpbmNlIHRoZSBldmVudFxuICAgIC8vIG1pZ2h0IHJlZmVyIHRvIGEgY2FuY2VsLCB0aGVuIHdlIG5lZWQgdG8gZW5zdXJlIGl0IGlzIGNhbmNlbGxlZFxuICAgIC8vIGFzIHRoaXMgZnVuY3Rpb24gaXRzZWxmIHdpbGwgcmVmb2N1cyBhZnRlciB0aGUgaW1hZ2UgaXMgaW5zZXJ0ZWRcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZWZvY3VzVGltZW91dCk7XG4gICAgLy8gbm93IHdlIHBpY2sgdGhlIGltYWdlXG4gICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdO1xuICAgIGUudGFyZ2V0LnZhbHVlID0gXCJcIjtcbiAgICAvLyBhbmQgaW5zZXJ0IGl0XG4gICAgYXdhaXQgdGhpcy5wcm9wcy5oZWxwZXJzLmZvY3VzQXQodGhpcy5vcmlnaW5hbFNlbGVjdGlvbkFyZWEgfHwgdGhpcy5vcmlnaW5hbFNlbGVjdGlvblBhdGgpO1xuICAgIHRoaXMucHJvcHMuaGVscGVycy5pbnNlcnRJbWFnZShmaWxlLCBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBnZXRzIGNhbGxlZCBvbmNlIHRoZSBmaWxlIGlucHV0IGNhbGxzIHRoZSBvbiBjaGFuZ2UgZXZlbnRcbiAgICogd2hpY2ggbWVhbnMgaXQgaGFzIGJlZW4gbG9hZGVkIGJ5IHRoZSBpbnB1dCBpdHNlbGYgYW5kIGl0J3MgYXZhaWxhYmxlIGZvclxuICAgKiByZWFkaW5nXG4gICAqIEBwYXJhbSBlIHRoZSBjaGFuZ2UgZXZlbnQgdGhhdCBjb250YWlucyB0aGUgZmlsZVxuICAgKi9cbiAgcHVibGljIGFzeW5jIG9uRmlsZUxvYWQoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pIHtcbiAgICAvLyByZW1vdmUgdGhlIGxpc3RlbmVyIGZvciB0aGUgd2hvbGUgaW5wdXQgZm9yIHRoZSByZWZvY3VzIGJhY2sgaW50byB0aGUgZmllbGRcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLm9uRmlsZUV2ZW50ZWRSZUZvY3VzLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgLy8gY2xlYXIgYSB0aW1lb3V0IGluIGNhc2UgdGhlcmUgaXMgb25lIGZvciB0aGlzIHJlZm9jdXMsIHNpbmNlIHRoZSBldmVudFxuICAgIC8vIG1pZ2h0IHJlZmVyIHRvIGEgY2FuY2VsLCB0aGVuIHdlIG5lZWQgdG8gZW5zdXJlIGl0IGlzIGNhbmNlbGxlZFxuICAgIC8vIGFzIHRoaXMgZnVuY3Rpb24gaXRzZWxmIHdpbGwgcmVmb2N1cyBhZnRlciB0aGUgaW1hZ2UgaXMgaW5zZXJ0ZWRcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZWZvY3VzVGltZW91dCk7XG4gICAgLy8gbm93IHdlIHBpY2sgdGhlIGZpbGVcbiAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07XG4gICAgZS50YXJnZXQudmFsdWUgPSBcIlwiO1xuICAgIC8vIGFuZCBpbnNlcnQgaXRcbiAgICBhd2FpdCB0aGlzLnByb3BzLmhlbHBlcnMuZm9jdXNBdCh0aGlzLm9yaWdpbmFsU2VsZWN0aW9uQXJlYSB8fCB0aGlzLm9yaWdpbmFsU2VsZWN0aW9uUGF0aCk7XG4gICAgdGhpcy5wcm9wcy5oZWxwZXJzLmluc2VydEZpbGUoZmlsZSk7XG4gIH1cblxuICAvKipcbiAgICogU3RhbmRhcmQgcmVuZGVyIGZ1bmN0aW9uIGZyb20gdGhlIHdyYXBwZXJcbiAgICovXG4gIHB1YmxpYyByZW5kZXIoKSB7XG5cbiAgICAvLyBmaXJzdCB3ZSBidWlsZCB0aGUgaWFtZ2UgaW5wdXQgaWYgd2Ugc3VwcG9ydCBpdFxuICAgIGNvbnN0IGltYWdlSW5wdXQgPSB0aGlzLnByb3BzLnN0YXRlLmlzUmljaFRleHQgJiYgdGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ltYWdlcyA/IChcbiAgICAgIDxpbnB1dFxuICAgICAgICByZWY9e3RoaXMuaW5wdXRJbWFnZVJlZn1cbiAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICBhY2NlcHQ9e3RoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNJbWFnZXNBY2NlcHR9XG4gICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6IFwibm9uZVwiIH19XG4gICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uSW1hZ2VMb2FkfVxuICAgICAgLz5cbiAgICApIDogbnVsbDtcblxuICAgIC8vIG5vdyB0aGUgZ2VuZXJhbCBmaWxlIGlucHV0XG4gICAgY29uc3QgZmlsZUlucHV0ID0gdGhpcy5wcm9wcy5zdGF0ZS5pc1JpY2hUZXh0ICYmIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNGaWxlcyA/IChcbiAgICAgIDxpbnB1dFxuICAgICAgICByZWY9e3RoaXMuaW5wdXRGaWxlUmVmfVxuICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgIGFjY2VwdD17dGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0ZpbGVzQWNjZXB0fVxuICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiBcIm5vbmVcIiB9fVxuICAgICAgICBhdXRvQ29tcGxldGU9XCJvZmZcIlxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkZpbGVMb2FkfVxuICAgICAgLz5cbiAgICApIDogbnVsbDtcblxuICAgIC8vIHRoZSBmaWxlIGxvYWQgZXJyb3IgZGlhbG9nIHRoYXQgc2hvd3MgYW4gZXJyb3JcbiAgICAvLyBiYXNlZCBvbiB0aGUgY3VycmVudCBsb2FkIGVycm9yXG4gICAgY29uc3QgZmlsZUxvYWRFcnJvckRpYWxvZyA9XG4gICAgICB0aGlzLnByb3BzLnN0YXRlLmlzUmljaFRleHQgJiZcbiAgICAgICAgKFxuICAgICAgICAgIHRoaXMucHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNJbWFnZXMgfHxcbiAgICAgICAgICB0aGlzLnByb3BzLmZlYXR1cmVTdXBwb3J0LnN1cHBvcnRzRmlsZXNcbiAgICAgICAgKSA/XG4gICAgICAgIChcbiAgICAgICAgICA8RmlsZUxvYWRFcnJvckRpYWxvZ1xuICAgICAgICAgICAgY3VycmVudExvYWRFcnJvcj17dGhpcy5wcm9wcy5jdXJyZW50TG9hZEVycm9yfVxuICAgICAgICAgICAgZGlzbWlzc0N1cnJlbnRMb2FkRXJyb3I9e3RoaXMucHJvcHMuZGlzbWlzc0N1cnJlbnRMb2FkRXJyb3J9XG4gICAgICAgICAgICBpMThuR2VuZXJpY0Vycm9yPXsodGhpcy5wcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmdlbmVyaWNFcnJvcn1cbiAgICAgICAgICAgIGkxOG5Paz17KHRoaXMucHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5va31cbiAgICAgICAgICAgIERpYWxvZz17dGhpcy5wcm9wcy5EaWFsb2d9XG4gICAgICAgICAgLz5cbiAgICAgICAgKSA6IG51bGw7XG5cbiAgICBsZXQgdG9vbGJhciA9IChcbiAgICAgIDxSaWNoVGV4dEVkaXRvclRvb2xiYXJcbiAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgIHRvb2xiYXJTdGF0ZT17dGhpcy5zdGF0ZS50b29sYmFyU3RhdGV9XG4gICAgICAgIHRvb2xiYXJIZWlnaHQ9e3RoaXMuc3RhdGUudG9vbGJhckhlaWdodH1cbiAgICAgICAgcmVmPXt0aGlzLnRvb2xiYXJSZWZ9XG4gICAgICAgIG9uSGVpZ2h0Q2hhbmdlPXt0aGlzLm9uSGVpZ2h0Q2hhbmdlfVxuICAgICAgICByZXF1ZXN0SW1hZ2U9e3RoaXMucmVxdWVzdEltYWdlfVxuICAgICAgICByZXF1ZXN0RmlsZT17dGhpcy5yZXF1ZXN0RmlsZX1cbiAgICAgICAgc2hvdWxkSGF2ZURyYXdlcj17dGhpcy5zaG91bGRIYXZlRHJhd2VyfVxuICAgICAgICBkcmF3ZXJPcGVuPXt0aGlzLnN0YXRlLmRyYXdlck9wZW59XG4gICAgICAgIHRvZ2dsZURyYXdlcj17dGhpcy50b2dnbGVEcmF3ZXJ9XG4gICAgICAgIHNldFRvb2xiYXJTdGF0ZT17dGhpcy5zZXRUb29sYmFyU3RhdGV9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBsZXQgZXh0cmFDaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlID0gbnVsbDtcbiAgICBpZiAodGhpcy5wcm9wcy5jdXN0b21FeHRyYUNoaWxkcmVuKSB7XG4gICAgICBjb25zdCBbY2hhcmFjdGVyQ291bnQsIHdvcmRDb3VudF0gPSBjb3VudFNpemVBbmRXb3Jkcyh0aGlzLnByb3BzLnN0YXRlLnRyZWVWYWx1ZSk7XG4gICAgICBleHRyYUNoaWxkcmVuID0gdGhpcy5wcm9wcy5jdXN0b21FeHRyYUNoaWxkcmVuKGNoYXJhY3RlckNvdW50LCB3b3JkQ291bnQpO1xuICAgIH1cblxuICAgIGxldCBkcmF3ZXJDb250YWluZXIgPSAoXG4gICAgICA8RHJhd2VyQ29udGFpbmVyXG4gICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICByZWY9e3RoaXMuRHJhd2VyQ29udGFpbmVyUmVmfVxuICAgICAgICBkcmF3ZXJPcGVuPXt0aGlzLnN0YXRlLmRyYXdlck9wZW59XG4gICAgICAgIG5vQW5pbWF0ZT17dGhpcy5zdGF0ZS5ub0FuaW1hdGV9XG4gICAgICAgIHRvb2xiYXJIZWlnaHQ9e3RoaXMuc3RhdGUudG9vbGJhckhlaWdodH1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGNvbnN0IERpc2pvaW50ZWRFZGl0b3JDb250YWluZXIgPSB0aGlzLnByb3BzLkRpc2pvaW50ZWRFZGl0b3JDb250YWluZXIgfHwgXCJkaXZcIjtcbiAgICBjb25zdCBFZGl0b3JDb250YWluZXIgPSB0aGlzLnByb3BzLkVkaXRvckNvbnRhaW5lciB8fCBEZWZhdWx0RWRpdG9yQ29udGFpbmVyO1xuICAgIGNvbnN0IERpc2pvaW50ZWRFZGl0b3IgPSB0aGlzLnByb3BzLkRpc2pvaW50ZWRFZGl0b3IgfHwgXCJkaXZcIjtcbiAgICBjb25zdCBFZGl0b3IgPSB0aGlzLnByb3BzLkVkaXRvciB8fCBcImRpdlwiO1xuXG4gICAgY29uc3QgYmFzaWNDbGFzc05hbWUgPSBcInJpY2gtdGV4dCBlZGl0b3IgXCIgK1xuICAgICAgKHRoaXMucHJvcHMuc3RhdGUuaXNSaWNoVGV4dCA/IFwicmljaC10ZXh0LW1vZGVcIiA6IFwicGxhaW4tdGV4dC1tb2RlXCIpICtcbiAgICAgICh0aGlzLnByb3BzLnN0YXRlLmZvY3VzZWQgPyBcIiBmb2N1c2VkXCIgOiBcIlwiKSArXG4gICAgICAodGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50VmFsaWQgPyBcIiB2YWxpZFwiIDogXCIgaW52YWxpZFwiKSArXG4gICAgICAodGhpcy5wcm9wcy5kaXNhYmxlZCA/IFwiIGRpc2FibGVkXCIgOiBcIiBlbmFibGVkXCIpO1xuXG4gICAgbGV0IGJveDogUmVhY3QuUmVhY3ROb2RlID0gbnVsbDtcbiAgICBpZiAodGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZSkge1xuICAgICAgYm94ID0gKFxuICAgICAgICA8RGlzam9pbnRlZEVkaXRvckNvbnRhaW5lciByZWY9e3RoaXMuZWRpdG9yUmVmIGFzIGFueX0gY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JEaXNqb2ludGVkRWRpdG9yQ29udGFpbmVyXCI+XG4gICAgICAgICAgPERpc2pvaW50ZWRFZGl0b3IgY2xhc3NOYW1lPXtiYXNpY0NsYXNzTmFtZX0+XG4gICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICA8L0Rpc2pvaW50ZWRFZGl0b3I+XG4gICAgICAgICAgPGRpdiBkYXRhLW5vdC1lZGl0b3I9e3RydWV9IHN0eWxlPXt7IHdpZHRoOiBcIjEwMCVcIiB9fT5cbiAgICAgICAgICAgIHtleHRyYUNoaWxkcmVufVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0Rpc2pvaW50ZWRFZGl0b3JDb250YWluZXI+XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBib3ggPSAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPEVkaXRvclxuICAgICAgICAgICAgcmVmPXt0aGlzLmVkaXRvclJlZiBhcyBhbnl9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2Jhc2ljQ2xhc3NOYW1lfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgIDwvRWRpdG9yPlxuICAgICAgICAgIHtleHRyYUNoaWxkcmVufVxuICAgICAgICA8Lz5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gd2UgaGF2ZSByZWFjdGlvbmVyIHNwZWNpZmljYXRpb25zXG4gICAgaWYgKHRoaXMucHJvcHMuQmFzZVdyYXBwZXIpIHtcbiAgICAgIGNvbnN0IEJhc2VXcmFwcGVyID0gdGhpcy5wcm9wcy5CYXNlV3JhcHBlcjtcbiAgICAgIGJveCA9IChcbiAgICAgICAgPEJhc2VXcmFwcGVyXG4gICAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgICAgZHJhd2VyT3Blbj17dGhpcy5zdGF0ZS5kcmF3ZXJPcGVufVxuICAgICAgICA+XG4gICAgICAgICAge2JveH1cbiAgICAgICAgPC9CYXNlV3JhcHBlcj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuVG9vbGJhcldyYXBwZXIpIHtcbiAgICAgIGNvbnN0IFRvb2xiYXJXcmFwcGVyID0gdGhpcy5wcm9wcy5Ub29sYmFyV3JhcHBlcjtcblxuICAgICAgdG9vbGJhciA9IChcbiAgICAgICAgPFRvb2xiYXJXcmFwcGVyIHsuLi50aGlzLnByb3BzfSBkcmF3ZXJPcGVuPXt0aGlzLnN0YXRlLmRyYXdlck9wZW59PlxuICAgICAgICAgIHt0b29sYmFyfVxuICAgICAgICA8L1Rvb2xiYXJXcmFwcGVyPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5EcmF3ZXJXcmFwcGVyKSB7XG4gICAgICBjb25zdCBEcmF3ZXJXcmFwcGVyID0gdGhpcy5wcm9wcy5EcmF3ZXJXcmFwcGVyO1xuXG4gICAgICBkcmF3ZXJDb250YWluZXIgPSAoXG4gICAgICAgIDxEcmF3ZXJXcmFwcGVyIHsuLi50aGlzLnByb3BzfSBkcmF3ZXJPcGVuPXt0aGlzLnN0YXRlLmRyYXdlck9wZW59PlxuICAgICAgICAgIHtkcmF3ZXJDb250YWluZXJ9XG4gICAgICAgIDwvRHJhd2VyV3JhcHBlcj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IHRvUmV0dXJuOiBSZWFjdC5SZWFjdE5vZGU7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZSkge1xuICAgICAgdG9SZXR1cm4gPSAoXG4gICAgICAgIDw+XG4gICAgICAgICAge3Rvb2xiYXJ9XG4gICAgICAgICAge2JveH1cbiAgICAgICAgICB7ZHJhd2VyQ29udGFpbmVyfVxuICAgICAgICAgIHsvKiB7ZmlsZUxvYWRFcnJvckRpYWxvZ1RPRE99ICovfVxuICAgICAgICAgIHtpbWFnZUlucHV0fVxuICAgICAgICAgIHtmaWxlSW5wdXR9XG4gICAgICAgIDwvPlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9SZXR1cm4gPSAoXG4gICAgICAgIDw+XG4gICAgICAgICAge3Rvb2xiYXJ9XG4gICAgICAgICAgPEVkaXRvckNvbnRhaW5lcj5cbiAgICAgICAgICAgIHtib3h9XG4gICAgICAgICAgICB7ZHJhd2VyQ29udGFpbmVyfVxuICAgICAgICAgIDwvRWRpdG9yQ29udGFpbmVyPlxuICAgICAgICAgIHsvKiB7ZmlsZUxvYWRFcnJvckRpYWxvZ1RPRE99ICovfVxuICAgICAgICAgIHtpbWFnZUlucHV0fVxuICAgICAgICAgIHtmaWxlSW5wdXR9XG4gICAgICAgIDwvPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5GaW5hbFdyYXBwZXIpIHtcbiAgICAgIGNvbnN0IEZpbmFsV3JhcHBlciA9IHRoaXMucHJvcHMuRmluYWxXcmFwcGVyO1xuXG4gICAgICB0b1JldHVybiA9IChcbiAgICAgICAgPEZpbmFsV3JhcHBlciB7Li4udGhpcy5wcm9wc30gZHJhd2VyT3Blbj17dGhpcy5zdGF0ZS5kcmF3ZXJPcGVufT5cbiAgICAgICAgICB7dG9SZXR1cm59XG4gICAgICAgIDwvRmluYWxXcmFwcGVyPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdG9SZXR1cm47XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRHJhd2VyQ29udGFpbmVyUHJvcHMgZXh0ZW5kcyBJRGVmYXVsdFNsYXRlV3JhcHBlclByb3BzIHtcbiAgZHJhd2VyT3BlbjogYm9vbGVhbjtcbiAgdG9vbGJhckhlaWdodDogbnVtYmVyO1xuICBub0FuaW1hdGU6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBJRHJhd2VyQ29udGFpbmVyU3RhdGUge1xuICBpc1JlYWR5OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEcmF3ZXJDb250YWluZXJCb3hQcm9wcyB7XG4gIC8qKlxuICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSB0b29sYmFyIHRoYXRcbiAgICogaXMgY3VycmVudGx5IGJlaW5nIG9uIHVzZVxuICAgKi9cbiAgdG9vbGJhckhlaWdodDogbnVtYmVyO1xuICAvKipcbiAgICogV2hldGhlciBkaXNqb2ludGVkIG1vZGUgaXMgYmVpbmcgdXNlZFxuICAgKi9cbiAgZGlzam9pbnRlZE1vZGU6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBJZiB0aGUgZHJhd2VyIGlzIGFscmVhZHkgY29uZmlybWVkIHRvIGJlIG9wZW5cbiAgICogZG8gbm90IHBlcmZvcm0gYW55IG9wZW4gb3IgY2xvc2UgYW5pbWF0aW9uXG4gICAqL1xuICBub0FuaW1hdGU6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUaGUgY2hpbGRyZW4gcmVwcmVzZW50IGFsbCBvZiB3aGF0XG4gICAqIHRoZSBkcmF3ZXIgYm94IGNvbnRhaW5zXG4gICAqL1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogV2hldGhlciB0aGUgZHJhd2VyIHNob3VsZCBiZSBvcGVuXG4gICAqIGFjY29yZGluZyB0byBhIHRvb2xiYXIgYWN0aW9uXG4gICAqL1xuICBkcmF3ZXJPcGVuOiBib29sZWFuO1xufVxuXG4vKipcbiAqIEEgc3BhY2VyIGlzIGJhc2ljYWxseSBhIHNtYWxsIGNoZXJyeSBvbiB0b3BcbiAqIGFkZGVkIHRvIGZpdCB0aGUgdG9vbGJhcmhlaWdodCBhcm91bmQgdGhlIGRyYXdlciBjb250YWluZXJcbiAqIGlmIG5lY2Vzc2FyeSwgb25seSB1c2VmdWwgb24gZGlzam9pbnRlZCBtb2RlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSURyYXdlclNwYWNlclByb3BzIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgZGlzam9pbnRlZCBtb2RlIGlzIGJlaW5nIHVzZWRcbiAgICovXG4gIGRpc2pvaW50ZWRNb2RlOiBib29sZWFuO1xuICAvKipcbiAgICogVGhlIGhlaWdodCBvZiB0aGUgdG9vbGJhciB0aGF0XG4gICAqIGlzIGN1cnJlbnRseSBiZWluZyBvbiB1c2VcbiAgICovXG4gIHRvb2xiYXJIZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRHJhd2VyQm9keVByb3BzIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgZGlzam9pbnRlZCBtb2RlIGlzIGJlaW5nIHVzZWRcbiAgICovXG4gIGRpc2pvaW50ZWRNb2RlOiBib29sZWFuO1xuICAvKipcbiAgICogVGhlIGhlaWdodCBvZiB0aGUgdG9vbGJhciB0aGF0XG4gICAqIGlzIGN1cnJlbnRseSBiZWluZyBvbiB1c2VcbiAgICovXG4gIHRvb2xiYXJIZWlnaHQ6IG51bWJlcjtcbiAgLyoqXG4gICAqIFRoZSBjb250ZW50IG9mIHRoZSBkcmF3ZXIgaXRzZWxmXG4gICAqL1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogV2hldGhlciB0aGUgZHJhd2VyIGlzIG9wZW4gb3Igbm90XG4gICAqL1xuICBkcmF3ZXJPcGVuOiBib29sZWFuO1xufVxuXG5leHBvcnQgdHlwZSBEcmF3ZXJDb250YWluZXJCb3hDb21wb25lbnQgPSBSZWFjdC5Db21wb25lbnRUeXBlPElEcmF3ZXJDb250YWluZXJCb3hQcm9wcz47XG5leHBvcnQgdHlwZSBEcmF3ZXJTcGFjZXJDb21wb25lbnQgPSBSZWFjdC5Db21wb25lbnRUeXBlPElEcmF3ZXJTcGFjZXJQcm9wcz47XG5leHBvcnQgdHlwZSBEcmF3ZXJCb2R5Q29tcG9uZW50ID0gUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJhd2VyQm9keVByb3BzPjtcblxuY29uc3QgRGVmYXVsdERyYXdlckJvZHkgPSBSZWFjdC5mb3J3YXJkUmVmKChwcm9wczogSURyYXdlckJvZHlQcm9wcywgcmVmOiBSZWFjdC5Gb3J3YXJkZWRSZWY8SFRNTEVsZW1lbnQ+KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdiByZWY9e3JlZiBhcyBhbnl9IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yRHJhd2VyQm9keVwiPlxuICAgICAge3Byb3BzLmRyYXdlck9wZW4gPyBwcm9wcy5jaGlsZHJlbiA6IG51bGx9XG4gICAgPC9kaXY+XG4gICk7XG59KVxuXG5mdW5jdGlvbiBEZWZhdWx0RHJhd2VyU3BhY2VyKHByb3BzOiBJRHJhd2VyU3BhY2VyUHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckRyYXdlckFwcGJhclNwYWNlclwiXG4gICAgICBzdHlsZT17eyBoZWlnaHQ6IHByb3BzLnRvb2xiYXJIZWlnaHQsIGZsZXg6IFwiMCAwIFwiICsgcHJvcHMudG9vbGJhckhlaWdodCArIFwicHhcIiB9fVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIERlZmF1bHREcmF3ZXJDb250YWluZXJCb3gocHJvcHM6IElEcmF3ZXJDb250YWluZXJCb3hQcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgIChwcm9wcy5kcmF3ZXJPcGVuID8gXCJvcGVuIFwiIDogXCJcIikgK1xuICAgICAgICAocHJvcHMuZGlzam9pbnRlZE1vZGUgPyBcInNsYXRlRWRpdG9yRHJhd2VyRml4ZWRcIiA6IFwic2xhdGVFZGl0b3JEcmF3ZXJcIikgK1xuICAgICAgICAocHJvcHMubm9BbmltYXRlID8gXCIgc2xhdGVFZGl0b3JEcmF3ZXJOb0FuaW1hdGVcIiA6IFwiXCIpXG4gICAgICB9XG4gICAgPlxuICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgIDwvZGl2PlxuICApO1xufVxuXG5jbGFzcyBEcmF3ZXJDb250YWluZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SURyYXdlckNvbnRhaW5lclByb3BzLCBJRHJhd2VyQ29udGFpbmVyU3RhdGU+IHtcbiAgcHJpdmF0ZSBlZGl0b3JEcmF3ZXJCb2R5UmVmOiBSZWFjdC5SZWZPYmplY3Q8SFRNTERpdkVsZW1lbnQ+O1xuICBjb25zdHJ1Y3Rvcihwcm9wczogSURyYXdlckNvbnRhaW5lclByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzUmVhZHk6IGZhbHNlLFxuICAgIH1cblxuICAgIHRoaXMuZWRpdG9yRHJhd2VyQm9keVJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuICB9XG4gIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGlzUmVhZHk6IHRydWUsXG4gICAgfSk7XG4gIH1cbiAgcHVibGljIGdldERyYXdlckJvZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWRpdG9yRHJhd2VyQm9keVJlZi5jdXJyZW50O1xuICB9XG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuZGlzam9pbnRlZE1vZGUgJiYgIXRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgRHJhd2VyQ29udGFpbmVyQm94ID0gdGhpcy5wcm9wcy5EcmF3ZXJDb250YWluZXJCb3ggfHwgRGVmYXVsdERyYXdlckNvbnRhaW5lckJveDtcbiAgICBjb25zdCBEcmF3ZXJTcGFjZXIgPSB0aGlzLnByb3BzLkRyYXdlclNwYWNlciB8fCBEZWZhdWx0RHJhd2VyU3BhY2VyO1xuICAgIGNvbnN0IERyYXdlckJvZHkgPSB0aGlzLnByb3BzLkRyYXdlckJvZHkgfHwgRGVmYXVsdERyYXdlckJvZHk7XG5cbiAgICBjb25zdCB0b1JldHVybiA9IChcbiAgICAgIDxEcmF3ZXJDb250YWluZXJCb3hcbiAgICAgICAgZGlzam9pbnRlZE1vZGU9e3RoaXMucHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgICAgIGRyYXdlck9wZW49e3RoaXMucHJvcHMuZHJhd2VyT3Blbn1cbiAgICAgICAgbm9BbmltYXRlPXt0aGlzLnByb3BzLm5vQW5pbWF0ZX1cbiAgICAgICAgdG9vbGJhckhlaWdodD17dGhpcy5wcm9wcy50b29sYmFySGVpZ2h0fVxuICAgICAgPlxuICAgICAgICB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZSAmJiB0aGlzLnByb3BzLmRyYXdlck9wZW4gP1xuICAgICAgICAgICAgPERyYXdlclNwYWNlclxuICAgICAgICAgICAgICBkaXNqb2ludGVkTW9kZT17dGhpcy5wcm9wcy5kaXNqb2ludGVkTW9kZX1cbiAgICAgICAgICAgICAgdG9vbGJhckhlaWdodD17dGhpcy5wcm9wcy50b29sYmFySGVpZ2h0fVxuICAgICAgICAgICAgLz4gOlxuICAgICAgICAgICAgbnVsbFxuICAgICAgICB9XG4gICAgICAgIDxEcmF3ZXJCb2R5XG4gICAgICAgICAgcmVmPXt0aGlzLmVkaXRvckRyYXdlckJvZHlSZWZ9XG4gICAgICAgICAgZGlzam9pbnRlZE1vZGU9e3RoaXMucHJvcHMuZGlzam9pbnRlZE1vZGV9XG4gICAgICAgICAgdG9vbGJhckhlaWdodD17dGhpcy5wcm9wcy50b29sYmFySGVpZ2h0fVxuICAgICAgICAgIGRyYXdlck9wZW49e3RoaXMucHJvcHMuZHJhd2VyT3Blbn1cbiAgICAgICAgPlxuICAgICAgICAgIDxXcmFwcGVyRHJhd2VyIHsuLi50aGlzLnByb3BzfSAvPlxuICAgICAgICA8L0RyYXdlckJvZHk+XG4gICAgICA8L0RyYXdlckNvbnRhaW5lckJveD5cbiAgICApO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuZGlzam9pbnRlZE1vZGUpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmlzUmVhZHkpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0RE9NLmNyZWF0ZVBvcnRhbCh0b1JldHVybiwgZG9jdW1lbnQuYm9keSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRvUmV0dXJuO1xuICAgIH1cbiAgfVxufVxuIiwgIi8qKlxuICogVGhpcyBmaWxlIHByb3ZpZGVzIHRoZSBkcmF3ZXIgY29udGVudCB0aGF0IGV4aXN0cyBzaWRlIHRvIHRoZSByaWNoIHRleHQgZWRpdG9yXG4gKiB3aGVuIGl0IGlzIGFsbG93ZWQgdG8gaG9sZCBhIGRyYXdlciwgdGhlIGRyYXdlciBjb250YWlucyBhIHJhbmdlIG9mIG9wdGlvbnMgdG8gZW5hYmxlXG4gKiB0ZW1wbGF0aW5nIG9yIGN1c3RvbSBzdHlsaW5nXG4gKiBAbW9kdWxlXG4gKi9cblxuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJRHJhd2VyQ29udGFpbmVyUHJvcHMgfSBmcm9tIFwiLi4vd3JhcHBlclwiO1xuaW1wb3J0IHsgSU5vZGVJbmZvLCBnZXRJbmZvRm9yIH0gZnJvbSBcIi4uLy4uXCI7XG5pbXBvcnQgeyBHZW5lcmFsT3B0aW9ucyB9IGZyb20gXCIuL2dlbmVyYWxcIjtcbmltcG9ydCB7IFN0eWxlc09wdGlvbnMgfSBmcm9tIFwiLi9zdHlsZXNcIjtcbmltcG9ydCB7IEFjdGlvbnNPcHRpb25zIH0gZnJvbSBcIi4vYWN0aW9uc1wiO1xuaW1wb3J0IHsgVGVtcGxhdGluZ09wdGlvbnMgfSBmcm9tIFwiLi90ZW1wbGF0aW5nXCI7XG5cblxuZXhwb3J0IGludGVyZmFjZSBJV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVByb3BzIHtcbiAgaW5mbzogSU5vZGVJbmZvO1xuICBlbnRpcmVQYXRoOiBBcnJheTx7IGluZm86IElOb2RlSW5mbzsgcGF0aDogc3RyaW5nW10gfT47XG4gIGlzQ3VycmVudDogYm9vbGVhbjtcbiAgaW5kZXg6IG51bWJlcjtcbiAgb25TZWxlY3Q6ICgpID0+IHZvaWQ7XG59XG5cbmZ1bmN0aW9uIERlZmF1bHRXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlKHByb3BzOiBJV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPGg2PlxuICAgICAge1xuICAgICAgICBwcm9wcy5pbmZvLmlzSW50ZXJhY3RpdmUgPyAoXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlSWNvblJ0bE9ubHlcIj57U3RyaW5nLmZyb21DaGFyQ29kZSg5MDk0KX08L3NwYW4+XG4gICAgICAgICkgOiBudWxsXG4gICAgICB9XG4gICAgICA8c3BhblxuICAgICAgICBjbGFzc05hbWU9e3Byb3BzLmlzQ3VycmVudCA/IFwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlU2VsZWN0ZWRcIiA6IFwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlXCJ9XG4gICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICBhcmlhLWN1cnJlbnQ9e3Byb3BzLmlzQ3VycmVudH1cbiAgICAgICAgb25DbGljaz17cHJvcHMub25TZWxlY3R9XG4gICAgICA+XG4gICAgICAgIHtwcm9wcy5pbmZvLm5hbWV9XG4gICAgICA8L3NwYW4+XG4gICAgICB7XG4gICAgICAgIHByb3BzLmluZm8uaXNJbnRlcmFjdGl2ZSA/IChcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVJY29uTHRyT25seVwiPntTdHJpbmcuZnJvbUNoYXJDb2RlKDkwOTQpfTwvc3Bhbj5cbiAgICAgICAgKSA6IG51bGxcbiAgICAgIH1cbiAgICAgIHtcbiAgICAgICAgcHJvcHMuaXNDdXJyZW50ID8gbnVsbCA6IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlSWNvbkx0ck9ubHlcIj57U3RyaW5nLmZyb21DaGFyQ29kZSgxMTEwNil9PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlSWNvblJ0bE9ubHlcIj57U3RyaW5nLmZyb21DaGFyQ29kZSgxMTEwNil9PC9zcGFuPlxuICAgICAgICAgIDwvPlxuICAgICAgICApXG4gICAgICB9XG4gICAgPC9oNj5cbiAgKVxufVxuXG5mdW5jdGlvbiBEZWZhdWx0V3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZVdyYXBwZXIocHJvcHM6IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVXcmFwcGVyXCI+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbnR5cGUgSU9wdGlvblR5cGUgPSBcIk1BSU5cIiB8IFwiU1RZTEVTXCIgfCBcIkFDVElPTlNcIiB8IFwiVEVNUExBVElOR1wiO1xudHlwZSBTZXRPcHRpb25UeXBlRm4gPSAodjogSU9wdGlvblR5cGUpID0+IHZvaWQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyUHJvcHMge1xuICBhY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb246IElPcHRpb25UeXBlO1xuICBzZWxlY3RlZE9wdGlvbjogSU9wdGlvblR5cGU7XG4gIHNldFNlbGVjdGVkT3B0aW9uOiBTZXRPcHRpb25UeXBlRm47XG4gIHNldEFjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbjogU2V0T3B0aW9uVHlwZUZuO1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElXcmFwcGVyRHJhd2VyVGFic1Byb3BzIHtcbiAgYWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uOiBJT3B0aW9uVHlwZTtcbiAgc2VsZWN0ZWRPcHRpb246IElPcHRpb25UeXBlO1xuICBzZXRTZWxlY3RlZE9wdGlvbjogU2V0T3B0aW9uVHlwZUZuO1xuICBzZXRBY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb246IFNldE9wdGlvblR5cGVGbjtcbiAgb3B0aW9uczogQXJyYXk8eyBpZDogc3RyaW5nOyBsYWJlbDogc3RyaW5nOyB9PlxufVxuXG5leHBvcnQgZnVuY3Rpb24gRGVmYXVsdFdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyKHByb3BzOiBJV3JhcHBlckRyYXdlckluZm9QYW5lbFdyYXBwZXJQcm9wcykge1xuICByZXR1cm4gcHJvcHMuY2hpbGRyZW4gYXMgYW55O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRGVmYXVsdFdyYXBwZXJEcmF3ZXJUYWJzKHByb3BzOiBJV3JhcHBlckRyYXdlclRhYnNQcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyVGFic1wiPlxuICAgICAge3Byb3BzLm9wdGlvbnMubWFwKCh2KSA9PiAoXG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5zZXRTZWxlY3RlZE9wdGlvbi5iaW5kKG51bGwsIHYuaWQpfVxuICAgICAgICAgIGtleT17di5pZH1cbiAgICAgICAgICBjbGFzc05hbWU9e3Byb3BzLnNlbGVjdGVkT3B0aW9uID09PSB2LmlkID8gXCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJUYWJTZWxlY3RlZFwiIDogXCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJUYWJcIn1cbiAgICAgICAgPlxuICAgICAgICAgIHt2LmxhYmVsfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICkpfVxuICAgIDwvZGl2PlxuICApO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHdyYXBwZXIgZHJhd2VyIGl0c2VsZlxuICogQHBhcmFtIHByb3BzIGl0IHRha2VzIHRoZSBlbnRpcmUgd3JhcHBlciBwcm9wcyB3aXRoIHRoZSBzdHlsZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFdyYXBwZXJEcmF3ZXIocHJvcHM6IElEcmF3ZXJDb250YWluZXJQcm9wcykge1xuICAvLyB3ZSBncmFiIHRoaXMgZnJvbSBsb2NhbCBzdG9yYWdlLCB0aGlzIHdvbid0IGFmZmVjdCBTU1IgYmVjYXVzZSB0aGUgZHJhd2VyIHdvbid0XG4gIC8vIGV2ZXIgcmVuZGVyIGluIHRoZSBzZXJ2ZXIgc2lkZSwgaXQncyBjbGllbnQgc2lkZSBvbmx5LCBpdCdzIGFsd2F5cyB0ZWNobmljYWxseSBjbG9zZWRcbiAgLy8gb24gdGhlIHNlcnZlciBzaWRlXG4gIGNvbnN0IFtsb2NhdGlvbiwgc2V0TG9jYXRpb25dID0gdXNlU3RhdGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJTTEFURV9EUkFXRVJfTEFTVF9MT0NBVElPTlwiKSB8fCBcIk1BSU5cIiBhcyBJT3B0aW9uVHlwZSk7XG4gIGNvbnN0IFthY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb24sIHVzZUFjY2Vzc2liaWxpdHlTZWxlY3RlZE9wdGlvbl0gPSB1c2VTdGF0ZShudWxsIGFzIElPcHRpb25UeXBlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghcHJvcHMuZHJhd2VyT3Blbikge1xuICAgICAgdXNlQWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uKG51bGwpO1xuICAgIH1cbiAgfSwgW3Byb3BzLmRyYXdlck9wZW5dKTtcblxuICAvLyB1cGRhdGUgdGhlIGdpdmVuIGxvY2F0aW9uXG4gIGNvbnN0IHNldExvY2F0aW9uQ2FsbGJhY2sgPSB1c2VDYWxsYmFjaygodmFsdWU6IElPcHRpb25UeXBlKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJTTEFURV9EUkFXRVJfTEFTVF9MT0NBVElPTlwiLCB2YWx1ZSk7XG4gICAgdXNlQWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uKHZhbHVlKTtcbiAgICBzZXRMb2NhdGlvbih2YWx1ZSk7XG4gIH0sIFtdKTtcblxuICAvLyBub3cgd2UgbmVlZCB0byBidWlsZCB0aGUgc2V0dGluZ3NcbiAgbGV0IHNldHRpbmdzRm9yTm9kZTogUmVhY3QuUmVhY3ROb2RlID0gbnVsbDtcbiAgbGV0IHRpdGxlRm9yTm9kZTogUmVhY3QuUmVhY3ROb2RlID0gbnVsbDtcblxuICAvLyBhbmQgdGhhdCdzIGRvbmUgYmFzZWQgb24gdGhlIHNlbGVjdGVkIG5vZGVcbiAgaWYgKHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQpIHtcbiAgICAvLyBhbmQgYWNjb3JkaW5nIHRvIHRoYXQgZGVjaWRlIHdoaWNoIHBhbmVsIHRvIHJlbmRlclxuICAgIGxldCBpbmZvUGFuZWw6IFJlYWN0LlJlYWN0Tm9kZSA9IG51bGw7XG4gICAgc3dpdGNoIChsb2NhdGlvbikge1xuICAgICAgY2FzZSBcIk1BSU5cIjpcbiAgICAgICAgaW5mb1BhbmVsID0gPEdlbmVyYWxPcHRpb25zIHsuLi5wcm9wc30gLz47XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIlNUWUxFU1wiOlxuICAgICAgICBpbmZvUGFuZWwgPSA8U3R5bGVzT3B0aW9ucyB7Li4ucHJvcHN9IC8+O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJBQ1RJT05TXCI6XG4gICAgICAgIGluZm9QYW5lbCA9IDxBY3Rpb25zT3B0aW9ucyB7Li4ucHJvcHN9IC8+O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJURU1QTEFUSU5HXCI6XG4gICAgICAgIGluZm9QYW5lbCA9IDxUZW1wbGF0aW5nT3B0aW9ucyB7Li4ucHJvcHN9IC8+O1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3RlZE5vZGVJbmZvID0gZ2V0SW5mb0ZvcihcbiAgICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQsXG4gICAgICBwcm9wcy5iYXNlSTE4bixcbiAgICApO1xuXG4gICAgY29uc3QgcG90ZW50aWFsQmxvY2tQYXJlbnQgPSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50ID09PSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVFbGVtZW50ID9cbiAgICAgIGdldEluZm9Gb3IoXG4gICAgICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudCxcbiAgICAgICAgcHJvcHMuYmFzZUkxOG4sXG4gICAgICApIDogbnVsbDtcblxuICAgIGNvbnN0IHN1cGVyQmxvY2tQYXRocyA9IChwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgfHwgW10pLmZpbHRlcigoZSkgPT4gZSAhPT0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCkubWFwKCh2LCBpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5mbzogZ2V0SW5mb0Zvcih2LCBwcm9wcy5iYXNlSTE4biksXG4gICAgICAgIHBhdGg6IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9yc1tpbmRleF0sXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBlbnRpcmVQYXRoID0gc3VwZXJCbG9ja1BhdGhzO1xuXG4gICAgaWYgKHBvdGVudGlhbEJsb2NrUGFyZW50KSB7XG4gICAgICBlbnRpcmVQYXRoLnB1c2goe1xuICAgICAgICBpbmZvOiBwb3RlbnRpYWxCbG9ja1BhcmVudCxcbiAgICAgICAgcGF0aDogcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tFbGVtZW50QW5jaG9yLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZW50aXJlUGF0aC5wdXNoKHtcbiAgICAgIGluZm86IHNlbGVjdGVkTm9kZUluZm8sXG4gICAgICBwYXRoOiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yLFxuICAgIH0pO1xuXG4gICAgY29uc3QgV3JhcHBlckRyYXdlckVsZW1lbnRUaXRsZSA9IHByb3BzLldyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGUgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGU7XG5cbiAgICB0aXRsZUZvck5vZGUgPSBlbnRpcmVQYXRoLm1hcCgodiwgaSkgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFdyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVcbiAgICAgICAgICBlbnRpcmVQYXRoPXtlbnRpcmVQYXRoIGFzIGFueX1cbiAgICAgICAgICBpbmZvPXt2LmluZm99XG4gICAgICAgICAgaXNDdXJyZW50PXtpID09PSBlbnRpcmVQYXRoLmxlbmd0aCAtIDF9XG4gICAgICAgICAga2V5PXtpfVxuICAgICAgICAgIGluZGV4PXtpfVxuICAgICAgICAgIG9uU2VsZWN0PXtpID09PSBlbnRpcmVQYXRoLmxlbmd0aCAtIDEgPyBudWxsIDogcHJvcHMuaGVscGVycy5zZWxlY3RQYXRoLmJpbmQobnVsbCwgdi5wYXRoKX1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBXcmFwcGVyRHJhd2VySW5mb1BhbmVsV3JhcHBlciA9IHByb3BzLldyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VySW5mb1BhbmVsV3JhcHBlcjtcblxuICAgIGNvbnN0IFdyYXBwZXJEcmF3ZXJUYWJzID0gcHJvcHMuV3JhcHBlckRyYXdlclRhYnMgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJUYWJzO1xuXG4gICAgLy8gYW5kIG5vdyB3ZSBjYW4gYnVpbGQgdGhlc2Ugc2V0dGluZ3NcbiAgICAvLyBiYXNpY2FsbHkgaGVyZSB3ZSBhcmUgYnVpbGRpbmcgdGhlIGRpdmlkZXIgYW5kIHRoZW5cbiAgICAvLyBhZGRpbmcgdGhlIHBhbmVsLCB3aGVyZSB0aGUgdGFicyBhbGxvdyB1cyB0byBzd2l0Y2hcbiAgICAvLyBmcm9tIGVhY2ggcGFuZWxcbiAgICBzZXR0aW5nc0Zvck5vZGUgPSAoXG4gICAgICA8PlxuICAgICAgICB7XG4gICAgICAgICAgIXNlbGVjdGVkTm9kZUluZm8uaXNUZXh0ID9cbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgPFdyYXBwZXJEcmF3ZXJUYWJzXG4gICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uPXthY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb24gYXMgYW55fVxuICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uPXtsb2NhdGlvbiBhcyBhbnl9XG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRPcHRpb249e3NldExvY2F0aW9uQ2FsbGJhY2t9XG4gICAgICAgICAgICAgICAgc2V0QWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uPXt1c2VBY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb259XG4gICAgICAgICAgICAgICAgb3B0aW9ucz17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZDogXCJNQUlOXCIsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBwcm9wcy5iYXNlSTE4bi5zZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0N1c3RvbVN0eWxlcyB8fCBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1JpY2hDbGFzc2VzID8gKFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiU1RZTEVTXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHByb3BzLmJhc2VJMThuLnN0eWxlcyxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmcgPyAoXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZDogXCJURU1QTEFUSU5HXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHByb3BzLmJhc2VJMThuLnRlbXBsYXRpbmcsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUZW1wbGF0aW5nID8gKFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiQUNUSU9OU1wiLFxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBwcm9wcy5iYXNlSTE4bi5hY3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApIDogbnVsbCxcbiAgICAgICAgICAgICAgICBdLmZpbHRlcigodikgPT4gISF2KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiBudWxsXG4gICAgICAgIH1cbiAgICAgICAgPFdyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyXG4gICAgICAgICAgYWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uPXthY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb24gYXMgYW55fVxuICAgICAgICAgIHNlbGVjdGVkT3B0aW9uPXtsb2NhdGlvbiBhcyBhbnl9XG4gICAgICAgICAgc2V0U2VsZWN0ZWRPcHRpb249e3NldExvY2F0aW9uQ2FsbGJhY2t9XG4gICAgICAgICAgc2V0QWNjZXNzaWJpbGl0eVNlbGVjdGVkT3B0aW9uPXt1c2VBY2Nlc3NpYmlsaXR5U2VsZWN0ZWRPcHRpb259XG4gICAgICAgID5cbiAgICAgICAgICB7aW5mb1BhbmVsfVxuICAgICAgICA8L1dyYXBwZXJEcmF3ZXJJbmZvUGFuZWxXcmFwcGVyPlxuICAgICAgPC8+XG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IFdyYXBwZXJGb3JUaXRsZSA9IHByb3BzLldyYXBwZXJEcmF3ZXJFbGVtZW50VGl0bGVXcmFwcGVyIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyRWxlbWVudFRpdGxlV3JhcHBlcjtcblxuICAvLyBub3cgd2UgcmV0dXJuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxXcmFwcGVyRm9yVGl0bGU+XG4gICAgICAgIHt0aXRsZUZvck5vZGV9XG4gICAgICA8L1dyYXBwZXJGb3JUaXRsZT5cbiAgICAgIHtzZXR0aW5nc0Zvck5vZGV9XG4gICAgICB7cHJvcHMuZHJhd2VyRXh0cmFDaGlsZHJlbn1cbiAgICA8Lz5cbiAgKTtcbn1cbiIsICIvKipcbiAqIEdpdmVzIHRoZSBnZW5lcmFsIG9wdGlvbnMgZm9yIHRoZSBjdXJyZW50IHNlbGVjdGVkIGNvbXBvbmVudCwgZ2VuZXJhbCBvcHRpb25zXG4gKiBkZXBlbmQgb24gdGhlIHJpY2ggZWxlbWVudCB0aGF0IGlzIGN1cnJlbnRseSBjaG9zZW4sIGl0IGFsc28gcHJvdmlkZXMgYSBkZWxldGVcbiAqIG9wdGlvbiB0byBkZWxldGUgdGhlIG5vZGVcbiAqIEBtb2R1bGVcbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSURyYXdlckNvbnRhaW5lclByb3BzIH0gZnJvbSBcIi4uL3dyYXBwZXJcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIERlZmF1bHRXcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXIocHJvcHM6IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlclwiPlxuICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVdyYXBwZXJEcmF3ZXJUZXh0RmllbGRQcm9wcyB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIG9uQ2hhbmdlQnlFdmVudDogKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB2b2lkO1xuICBvbkNoYW5nZUJ5VmFsdWU6ICh2OiBzdHJpbmcpID0+IHZvaWQ7XG4gIGlkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZFByb3BzIHtcbiAgdmFsdWU6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgb25DaGFuZ2VCeUV2ZW50OiAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB2b2lkO1xuICBvbkNoYW5nZUJ5VmFsdWU6ICh2OiBzdHJpbmcpID0+IHZvaWQ7XG4gIGlkOiBzdHJpbmc7XG4gIG9wdGlvbnM6IEFycmF5PHsgdmFsdWU6IHN0cmluZyA7IGxhYmVsOiBzdHJpbmcgfCBSZWFjdC5SZWFjdE5vZGU7IHByaW1hcnk/OiBib29sZWFuIH0+O1xuICB1bmJsdXI6ICgpID0+IHZvaWQ7XG4gIHJlc2V0Qmx1cjogKCkgPT4gdm9pZDtcbiAgZGlzcGxheUVtcHR5PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJV3JhcHBlckRyYXdlck11bHRpU2VsZWN0RmllbGRQcm9wcyB7XG4gIHZhbHVlczogc3RyaW5nW107XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgb25DaGFuZ2U6ICh2OiBzdHJpbmdbXSkgPT4gdm9pZDtcbiAgaWQ6IHN0cmluZztcbiAgb3B0aW9uczogQXJyYXk8eyB2YWx1ZTogc3RyaW5nOyBsYWJlbDogc3RyaW5nIHwgUmVhY3QuUmVhY3ROb2RlOyBwcmltYXJ5PzogYm9vbGVhbiAgfT47XG4gIHVuYmx1cjogKCkgPT4gdm9pZDtcbiAgcmVzZXRCbHVyOiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElXcmFwcGVyRHJhd2VyQ2hlY2tCb3hQcm9wcyB7XG4gIHZhbHVlOiBib29sZWFuO1xuICBsYWJlbDogc3RyaW5nO1xuICBvbkNoYW5nZTogKHY6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIGlkOiBzdHJpbmc7XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIERlZmF1bHRXcmFwcGVyRHJhd2VyVGV4dEZpZWxkKHByb3BzOiBJV3JhcHBlckRyYXdlclRleHRGaWVsZFByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJUZXh0RmllbGRcIj5cbiAgICAgIDxsYWJlbD57cHJvcHMubGFiZWx9PC9sYWJlbD5cbiAgICAgIDxpbnB1dFxuICAgICAgICB2YWx1ZT17cHJvcHMudmFsdWV9XG4gICAgICAgIHBsYWNlaG9sZGVyPXtwcm9wcy5wbGFjZWhvbGRlciB8fCBwcm9wcy5sYWJlbH1cbiAgICAgICAgb25DaGFuZ2U9e3Byb3BzLm9uQ2hhbmdlQnlFdmVudH1cbiAgICAgICAgZGlzYWJsZWQ9e3Byb3BzLmRpc2FibGVkfVxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gRGVmYXVsdFdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZChwcm9wczogSVdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZFByb3BzKSB7XG4gIC8vIGR1ZSB0byBjb250cmFpbnMgb2YgdGhlIG5hdGl2ZSBIVE1MIHNlbGVjdFxuICAvLyB0aGUgbGFiZWwgY2Fubm90IGJlIHVzZWQgaW4gb3B0aW9uIHZhbHVlcyB3aGVyZSBhbiBodG1sIGhhcyBiZWVuIGdpdmVuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZFwiPlxuICAgICAgPGxhYmVsPntwcm9wcy5sYWJlbH08L2xhYmVsPlxuICAgICAgPHNlbGVjdFxuICAgICAgICB2YWx1ZT17cHJvcHMudmFsdWV9XG4gICAgICAgIG9uQ2hhbmdlPXtwcm9wcy5vbkNoYW5nZUJ5RXZlbnR9XG4gICAgICAgIGRpc2FibGVkPXtwcm9wcy5kaXNhYmxlZH1cbiAgICAgICAgcGxhY2Vob2xkZXI9e3Byb3BzLnBsYWNlaG9sZGVyfVxuICAgICAgPlxuICAgICAgICB7cHJvcHMub3B0aW9ucy5tYXAob3B0aW9uID0+IChcbiAgICAgICAgICA8b3B0aW9uIGtleT17b3B0aW9uLnZhbHVlfSB2YWx1ZT17b3B0aW9uLnZhbHVlfT5cbiAgICAgICAgICAgIHt0eXBlb2Ygb3B0aW9uLmxhYmVsID09PSBcInN0cmluZ1wiID8gb3B0aW9uLmxhYmVsIDogb3B0aW9uLnZhbHVlfVxuICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICApKX1cbiAgICAgIDwvc2VsZWN0PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRGVmYXVsdFdyYXBwZXJEcmF3ZXJNdWx0aVNlbGVjdEZpZWxkKHByb3BzOiBJV3JhcHBlckRyYXdlck11bHRpU2VsZWN0RmllbGRQcm9wcykge1xuICBjb25zdCBoYW5kbGVTZWxlY3RDaGFuZ2UgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ZWRPcHRpb25zID0gQXJyYXkuZnJvbShlLnRhcmdldC5zZWxlY3RlZE9wdGlvbnMsIG9wdGlvbiA9PiBvcHRpb24udmFsdWUpO1xuICAgIHByb3BzLm9uQ2hhbmdlKHNlbGVjdGVkT3B0aW9ucyk7XG4gIH0sIFtdKTtcblxuICAvLyBkdWUgdG8gY29udHJhaW5zIG9mIHRoZSBuYXRpdmUgSFRNTCBzZWxlY3RcbiAgLy8gdGhlIGxhYmVsIGNhbm5vdCBiZSB1c2VkIGluIG9wdGlvbiB2YWx1ZXMgd2hlcmUgYW4gaHRtbCBoYXMgYmVlbiBnaXZlblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JXcmFwcGVyRHJhd2VyTXVsdGlTZWxlY3RGaWVsZFwiPlxuICAgICAgPGxhYmVsPntwcm9wcy5sYWJlbH08L2xhYmVsPlxuICAgICAgPHNlbGVjdFxuICAgICAgICBtdWx0aXBsZT17dHJ1ZX1cbiAgICAgICAgdmFsdWU9e3Byb3BzLnZhbHVlc31cbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNlbGVjdENoYW5nZX1cbiAgICAgICAgZGlzYWJsZWQ9e3Byb3BzLmRpc2FibGVkfVxuICAgICAgPlxuICAgICAgICB7cHJvcHMub3B0aW9ucy5tYXAob3B0aW9uID0+IChcbiAgICAgICAgICA8b3B0aW9uIGtleT17b3B0aW9uLnZhbHVlfSB2YWx1ZT17b3B0aW9uLnZhbHVlfT5cbiAgICAgICAgICAgIHt0eXBlb2Ygb3B0aW9uLmxhYmVsID09PSBcInN0cmluZ1wiID8gb3B0aW9uLmxhYmVsIDogb3B0aW9uLnZhbHVlfVxuICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICApKX1cbiAgICAgIDwvc2VsZWN0PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRGVmYXVsdFdyYXBwZXJEcmF3ZXJDaGVja0JveEZpZWxkKHByb3BzOiBJV3JhcHBlckRyYXdlckNoZWNrQm94UHJvcHMpIHtcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gZXZlbnQudGFyZ2V0LmNoZWNrZWQ7XG4gICAgcHJvcHMub25DaGFuZ2UobmV3VmFsdWUpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvcldyYXBwZXJEcmF3ZXJDaGVja0JveEZpZWxkXCI+XG4gICAgICA8aW5wdXRcbiAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgY2hlY2tlZD17cHJvcHMudmFsdWV9XG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgIGRpc2FibGVkPXtwcm9wcy5kaXNhYmxlZH1cbiAgICAgIC8+XG4gICAgICA8bGFiZWw+e3Byb3BzLmxhYmVsfTwvbGFiZWw+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbi8qKlxuICogUHJvdmlkZXMgdGhlIGRyYXdlciBzZWN0aW9uIHdpdGggYWxsIHRoZSBnZW5lcmFsIG9wdGlvbnMgb2YgYSBnaXZlbiBjb21wb25lbnRcbiAqIHRoZXNlIGdlbmVyYWwgb3B0aW9ucyBhcmUgdGhlIHNwZWNpZmljIG9wdGlvbnMgZm9yIHRoZSBnZW5lcmljIGNvbXBvbmVudHNcbiAqIEBwYXJhbSBwcm9wcyBhbGwgdGhlIGVudGlyZSB3cmFwcGVyIHByb3BzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBHZW5lcmFsT3B0aW9ucyhwcm9wczogSURyYXdlckNvbnRhaW5lclByb3BzKSB7XG4gIGNvbnN0IFtuYW1lLCBzZXROYW1lXSA9IHVzZVN0YXRlKChwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50ICYmIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQuZ2l2ZW5OYW1lKSB8fCBcIlwiKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldE5hbWUoKHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQgJiYgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudC5naXZlbk5hbWUpIHx8IFwiXCIpO1xuICB9LCBbcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudF0pO1xuXG4gIGNvbnN0IGxhc3RVcGRhdGVSZWYgPSB1c2VSZWY8YW55PigpO1xuXG4gIGNvbnN0IHVwZGF0ZU5hbWVCID0gdXNlQ2FsbGJhY2soKHY6IHN0cmluZykgPT4ge1xuICAgIHNldE5hbWUodik7XG4gICAgY2xlYXJUaW1lb3V0KGxhc3RVcGRhdGVSZWYuY3VycmVudCk7XG4gICAgbGFzdFVwZGF0ZVJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBwcm9wcy5oZWxwZXJzLnNldCh7XG4gICAgICAgIGdpdmVuTmFtZTogdixcbiAgICAgIH0sIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IpO1xuICAgIH0sIDYwMCk7XG4gIH0sIFtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50XSk7XG5cbiAgY29uc3QgdXBkYXRlTmFtZSA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIHVwZGF0ZU5hbWVCKGUudGFyZ2V0LnZhbHVlKTtcbiAgfSwgW3VwZGF0ZU5hbWVCXSk7XG5cbiAgaWYgKCFwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBXcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXIgPSBwcm9wcy5XcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXIgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlcjtcbiAgY29uc3QgV3JhcHBlckRyYXdlclRleHRGaWVsZCA9IHByb3BzLldyYXBwZXJEcmF3ZXJUZXh0RmllbGQgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJUZXh0RmllbGQ7XG5cbiAgLy8gYW5kIHJldHVyblxuICByZXR1cm4gKFxuICAgIDxXcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXI+XG4gICAgICA8V3JhcHBlckRyYXdlclRleHRGaWVsZFxuICAgICAgICB2YWx1ZT17bmFtZX1cbiAgICAgICAgbGFiZWw9e3Byb3BzLmJhc2VJMThuLm5hbWV9XG4gICAgICAgIG9uQ2hhbmdlQnlFdmVudD17dXBkYXRlTmFtZX1cbiAgICAgICAgb25DaGFuZ2VCeVZhbHVlPXt1cGRhdGVOYW1lQn1cbiAgICAgICAgaWQ9XCJuYW1lXCJcbiAgICAgIC8+XG4gICAgICB7XG4gICAgICAgIHByb3BzLmRyYXdlckV4dHJhcyA/IChcbiAgICAgICAgICBwcm9wcy5kcmF3ZXJFeHRyYXMubWFwKCh2LCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBFbGVtZW50ID0gdi5Db21wb25lbnQgYXMgYW55O1xuICAgICAgICAgICAgcmV0dXJuIDxFbGVtZW50IGtleT17di5rZXkgfHwgaX0gey4uLnByb3BzfSAvPlxuICAgICAgICAgIH0pXG4gICAgICAgICkgOiBudWxsXG4gICAgICB9XG4gICAgPC9XcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXI+XG4gICk7XG59XG4iLCAiLyoqXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIHN0eWxlcyBvcHRpb25zIHRoYXQgZXhpc3Qgd2l0aGluIHRoZSBkcmF3ZXIgaW4gb3JkZXJcbiAqIHRvIHNldCBhbGwgdGhlIGlubGluZSBzdHlsZXMgZm9yIHRoZSBjb21wb25lbnRcbiAqIEBtb2R1bGVcbiAqL1xuXG5pbXBvcnQgeyBSaWNoRWxlbWVudCB9IGZyb20gXCIuLi8uLi8uLi9zZXJpYWxpemVyXCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IElEcmF3ZXJDb250YWluZXJQcm9wcyB9IGZyb20gXCIuLi93cmFwcGVyXCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcInNsYXRlXCI7XG5pbXBvcnQgZXF1YWxzIGZyb20gXCJkZWVwLWVxdWFsXCI7XG5pbXBvcnQgeyBEZWZhdWx0V3JhcHBlckRyYXdlckNoZWNrQm94RmllbGQsIERlZmF1bHRXcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXIsIERlZmF1bHRXcmFwcGVyRHJhd2VyTXVsdGlTZWxlY3RGaWVsZCwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJUZXh0RmllbGQsIElXcmFwcGVyRHJhd2VyVGV4dEZpZWxkUHJvcHMgfSBmcm9tIFwiLi9nZW5lcmFsXCI7XG5cbi8qKlxuICogVGhlIHNpbmdsZSBzdHlsZSBvcHRpb24gcHJvcHMgdGhhdCBkZWZpbmUgYSBzaW5nbGVcbiAqIG9wdGlvbiBmb3IgdGhlIGlubGluZSBzdHlsZSwgZWl0aGVyLCBhY3RpdmUsIGhvdmVyLFxuICogb3IgdGhlIHN0YW5kYXJkIHN0eWxlXG4gKi9cbmludGVyZmFjZSBJU2luZ2xlU3R5bGVQcm9wcyB7XG4gIC8qKlxuICAgKiB0aGUgbmFtZSwgaXQncyB1c2VkIGluIHRoZSBsYWJlbCBhbmQgcGxhY2Vob2xkZXIsIG5vdCBqdXN0IG5hbWVzcGFjaW5nXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCB2YWx1ZSBhcyBpdCBpcyByaWdodCBub3dcbiAgICovXG4gIHN0eWxlVmFsdWU6IHN0cmluZztcbiAgLyoqXG4gICAqIGluIHdoaWNoIGFuY2hvciB0aGUgdmFsdWUgd2FzIGdlbmVyYXRlZCBmcm9tXG4gICAqIHdlIGtlZXAgdHJhY2sgb2YgdGhlIGFuY2hvciBpbiBvcmRlciB0byBrbm93XG4gICAqIGlmIHRoZSB2YWx1ZSBzaG91bGQgYmUgdXBkYXRlZFxuICAgKiB0aGVyZSBpcyBhIGRlbGF5IGJldHdlZW4gdGhlIHVwZGF0aW5nIGFuZCByZWNlaXZpbmcgdGhlXG4gICAqIHZhbHVlIGluIHRoZSBmaWVsZCBzbyBpdCdkIGNhdXNlIGZsaWNrZXJpbmcgb3RoZXJ3aXNlXG4gICAqL1xuICBhbmNob3I6IFBhdGg7XG4gIC8qKlxuICAgKiBUcmlnZ2VycyBvbiB0aGUgY2hhbmdlIG9mIHRoZSB0ZXh0IGZpZWxkLCBhbmQgaXQgdHJpZ2dlcnNcbiAgICogZXZlcnkgdGltZSBhIGtleXByZXNzIGlzIGRvbmVcbiAgICovXG4gIG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZywgYW5jaG9yOiBQYXRoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBUaGUgdGV4dCBmaWVsZCB0byB1c2VcbiAgICovXG4gIFRleHRGaWVsZD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJUZXh0RmllbGRQcm9wcz47XG4gIC8qKlxuICAgKiBUaGUgaWQgb2YgdGhlIGZpZWxkXG4gICAqL1xuICBpZDogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoZSBzdGF0ZSBvZiB0aGUgc3R5bGUgaW5wdXQgZWxlbWVudFxuICovXG5pbnRlcmZhY2UgSVNpbmdsZVN0eWxlU3RhdGUge1xuICAvKipcbiAgICogVGhlIGN1cnJlbnQgdmFsdWUgYXMgaW4gdGhlIHN0YXRlLCB3ZSBzdG9yZSB0aGUgdmFsdWUgaGVyZVxuICAgKiBhbmQgd2Uga2VlcCBpdCBoZXJlIGJlY2F1c2UgdGhlcmUncyBhIGRlbGF5IHdoZW4gdXBkYXRpbmcgdGhlc2VcbiAgICogdmFsdWVzIGZyb20gdGhlIHJpY2ggZWxlbWVudCBjb250ZW50XG4gICAqL1xuICB2YWx1ZTogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGFuY2hvciB3aGVyZSBpdCBjb21lcyBmcm9tIHdlIGFsc28gc3RvcmUgdGhlIGFuY2hvciB0byBrbm93IGlmIGl0IGhhc1xuICAgKiBjaGFuZ2VkIHdoaWNoIG1lYW5zIGl0J3MgYW5vdGhlciBlbGVtZW50LCBvdGhlcndpc2Ugd2UgYXNzdW1lIHRoYXQgdGhlIHN0YXRlXG4gICAqIHZhbHVlIGlzIHRoZSByaWdodCB2YWx1ZVxuICAgKi9cbiAgdmFsdWVGb3JBbmNob3I6IFBhdGg7XG59XG5cbi8qKlxuICogVGhlIHNpbmdsZSBzdHlsZSBlbGVtZW50IHRoYXQgcHJvdmlkZXMgYW4gaW5wdXQgZm9yIHNldHRpbmcgdGhlIHN0eWxlXG4gKiBib3RoIGFjdGl2ZSwgaG92ZXIgYW5kIHRoZSBzdGFuZGFyZFxuICovXG5jbGFzcyBTaW5nbGVTdHlsZSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8SVNpbmdsZVN0eWxlUHJvcHMsIElTaW5nbGVTdHlsZVN0YXRlPiB7XG5cbiAgLyoqXG4gICAqIFdlIG5lZWQgdGhlIGRlcml2ZWQgZnVuY3Rpb24gaW4gb3JkZXIgdG8gYmUgYWJsZSB0byB1cGRhdGUgdGhlIHZhbHVlIG9mIHRoZVxuICAgKiBzZWxlY3RvciBpbiBjYXNlLCB0aGlzIGlzIHRoZSBtb3JlIGVmZmljaWVudCB3YXkgaW4gdGhlc2UgY2FzZXMgd2hlcmUgdGhpbmdzXG4gICAqIGFyZSBzbGlnaHRseSBvdXQgb2Ygc3luY1xuICAgKi9cbiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhwcm9wczogSVNpbmdsZVN0eWxlUHJvcHMsIHN0YXRlOiBJU2luZ2xlU3R5bGVTdGF0ZSkge1xuICAgIC8vIGZvciB0aGF0IHdlIGNoZWNrIGlmIHRoZSB2YWx1ZSBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIG9uZSBpbiB0aGUgc3RhdGUsIHdoaWNoIGhhcHBlbnNcbiAgICAvLyB3aGVuZXZlciBjaGFuZ2luZywgYnV0IGluIG9yZGVyIHRvIGFjdHVhbGx5IGNoYW5nZSBpdCB3ZSBvbmx5IGRvIHNvIGlmIGl0J3MgYSBkaWZmZXJlbnRcbiAgICAvLyBlbGVtZW50IGFuY2hvciB3ZSBhcmUgYXRcbiAgICBpZiAoKHByb3BzLnN0eWxlVmFsdWUgfHwgXCJcIikgIT09IHN0YXRlLnZhbHVlICYmICFQYXRoLmVxdWFscyhwcm9wcy5hbmNob3IsIHN0YXRlLnZhbHVlRm9yQW5jaG9yKSkge1xuICAgICAgLy8gc28gd2UgdXBkYXRlXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcHJvcHMuc3R5bGVWYWx1ZSB8fCBcIlwiLFxuICAgICAgICB2YWx1ZUZvckFuY2hvcjogcHJvcHMuYW5jaG9yLFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgdGhlIGVsZW1lbnQgdGhhdCBwcm92aWRlcyBhbiBpbnB1dCBmb3IgYWN0aXZlLCBob3ZlciBhbmQgdGhlIHN0YW5kYXJkXG4gICAqIEBwYXJhbSBwcm9wcyBcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJU2luZ2xlU3R5bGVQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIC8vIGJpbmQgdGhlIGZ1bmN0aW9uc1xuICAgIHRoaXMub25TdHlsZUNoYW5nZSA9IHRoaXMub25TdHlsZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25TdHlsZUNoYW5nZUIgPSB0aGlzLm9uU3R5bGVDaGFuZ2VCLmJpbmQodGhpcyk7XG5cbiAgICAvLyBzZXQgdGhlIGluaXRpYWwgc3RhdGVcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdmFsdWU6IHByb3BzLnN0eWxlVmFsdWUgfHwgXCJcIixcbiAgICAgIHZhbHVlRm9yQW5jaG9yOiBwcm9wcy5hbmNob3IsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGVhY2ggdGltZSB0aGUgaW5wdXQgZm9yIHRoZSBzdHlsZSBjaGFuZ2VzXG4gICAqIEBwYXJhbSBlIHRoZSBjaGFuZ2UgZXZlbnQgaW4gcXVlc3Rpb25cbiAgICovXG4gIHB1YmxpYyBvblN0eWxlQ2hhbmdlKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSB7XG4gICAgdGhpcy5vblN0eWxlQ2hhbmdlQihlLnRhcmdldC52YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgZWFjaCB0aW1lIHRoZSBpbnB1dCBmb3IgdGhlIHN0eWxlIGNoYW5nZXNcbiAgICogQHBhcmFtIGUgdGhlIGNoYW5nZSBldmVudCBpbiBxdWVzdGlvblxuICAgKi9cbiAgcHVibGljIG9uU3R5bGVDaGFuZ2VCKG5ld1ZhbHVlOiBzdHJpbmcgPSBudWxsKSB7XG4gICAgLy8gc2V0IHRoZSBzdGF0ZVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdmFsdWU6IG5ld1ZhbHVlIHx8IFwiXCIsXG4gICAgICB2YWx1ZUZvckFuY2hvcjogdGhpcy5wcm9wcy5hbmNob3IsXG4gICAgfSk7XG4gICAgLy8gY2FsbCB0aGUgZXZlbnRcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKG5ld1ZhbHVlLCB0aGlzLnByb3BzLmFuY2hvcik7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0YW5kYXJkIHJlbmRlciBmdW5jdGlvblxuICAgKi9cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICBjb25zdCBUZXh0RmllbGQgPSB0aGlzLnByb3BzLlRleHRGaWVsZCB8fCBEZWZhdWx0V3JhcHBlckRyYXdlclRleHRGaWVsZDtcbiAgICByZXR1cm4gKFxuICAgICAgPFRleHRGaWVsZFxuICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS52YWx1ZX1cbiAgICAgICAgb25DaGFuZ2VCeVZhbHVlPXt0aGlzLm9uU3R5bGVDaGFuZ2VCfVxuICAgICAgICBvbkNoYW5nZUJ5RXZlbnQ9e3RoaXMub25TdHlsZUNoYW5nZX1cbiAgICAgICAgbGFiZWw9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgaWQ9e3RoaXMucHJvcHMuaWR9XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgc3RhdGUgZm9yIHRoZSBjbGFzc2VzIG9wdGlvbiBzZWxlY3RvciB0aGF0IGFsbG93c1xuICogZm9yIHNlbGVjdGluZyByaWNoIGNsYXNzZXNcbiAqL1xuaW50ZXJmYWNlIElDbGFzc2VzT3B0aW9uU2VsZWN0b3JTdGF0ZSB7XG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCB2YWx1ZSBhcyBpbiB0aGUgc3RhdGUsIHdlIHN0b3JlIHRoZSB2YWx1ZSBoZXJlXG4gICAqIGFuZCB3ZSBrZWVwIGl0IGhlcmUgYmVjYXVzZSB0aGVyZSdzIGEgZGVsYXkgd2hlbiB1cGRhdGluZyB0aGVzZVxuICAgKiB2YWx1ZXMgZnJvbSB0aGUgcmljaCBlbGVtZW50IGNvbnRlbnRcbiAgICogXG4gICAqIFRoaXMgaXMgYW4gYXJyYXkgYmVjYXVzZSB0aGUgY2xhc3NlcyBmb3IgdGhlIGVsZW1lbnQgYXJlIGFuIGFycmF5XG4gICAqL1xuICB2YWx1ZTogc3RyaW5nW107XG4gIC8qKlxuICAgKiBUaGUgYW5jaG9yIHdoZXJlIGl0IGNvbWVzIGZyb20gd2UgYWxzbyBzdG9yZSB0aGUgYW5jaG9yIHRvIGtub3cgaWYgaXQgaGFzXG4gICAqIGNoYW5nZWQgd2hpY2ggbWVhbnMgaXQncyBhbm90aGVyIGVsZW1lbnQsIG90aGVyd2lzZSB3ZSBhc3N1bWUgdGhhdCB0aGUgc3RhdGVcbiAgICogdmFsdWUgaXMgdGhlIHJpZ2h0IHZhbHVlXG4gICAqL1xuICB2YWx1ZUZvckFuY2hvcjogUGF0aDtcbiAgdmFsdWVMYXN0VGltZVJlcXVlc3RlZFVwZGF0ZTogbnVtYmVyO1xufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgcGlja2VyIGZvciByaWNoIGNsYXNzZXMgaW4gdGhlIGRyYXdlciBmb3IgdGhlIGdpdmVuIGVsZW1lbnRcbiAqIGJhc2ljYWxseSBhIHNlbGVjdCBmaWVsZFxuICovXG5jbGFzcyBDbGFzc2VzT3B0aW9uU2VsZWN0b3IgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PElEcmF3ZXJDb250YWluZXJQcm9wcywgSUNsYXNzZXNPcHRpb25TZWxlY3RvclN0YXRlPiB7XG5cbiAgLyoqXG4gICAqIFdlIG5lZWQgdGhlIGRlcml2ZWQgZnVuY3Rpb24gaW4gb3JkZXIgdG8gYmUgYWJsZSB0byB1cGRhdGUgdGhlIHZhbHVlIG9mIHRoZVxuICAgKiBzZWxlY3RvciBpbiBjYXNlLCB0aGlzIGlzIHRoZSBtb3JlIGVmZmljaWVudCB3YXkgaW4gdGhlc2UgY2FzZXMgd2hlcmUgdGhpbmdzXG4gICAqIGFyZSBzbGlnaHRseSBvdXQgb2Ygc3luY1xuICAgKi9cbiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhwcm9wczogSURyYXdlckNvbnRhaW5lclByb3BzLCBzdGF0ZTogSUNsYXNzZXNPcHRpb25TZWxlY3RvclN0YXRlKSB7XG4gICAgLy8gd2UgZG8gaXQgdGhpcyB3YXkgYmVjYXVzZSB0aGlzIGNvbXBvbmVudCBlYXRzIHRoZSBlbnRpcmUgd3JhcHBlciBwcm9wcyBzbyB3ZSBuZWVkIHRvIHBpY2sgaXQgcmlnaHRcbiAgICAvLyBmcm9tIHRoZSBjdXJyZW50IHNlbGVjdGVkIG5vZGVcbiAgICBjb25zdCBzZWxlY3RlZE5vZGU6IFJpY2hFbGVtZW50ID0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCBhcyBhbnk7XG5cbiAgICAvLyBhbmQgd2UgdXNlIGJvdGggZXF1YWxzIGFuZCBwYXRoIGVxdWFscyB0byBkZXRlcm1pbmUgYSBjaGFuZ2VcbiAgICAvLyBhbmQgYXZvaWQgdGhlIHN5bmMgaXNzdWVcbiAgICBjb25zdCB0aW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICBpZiAoXG4gICAgICAhZXF1YWxzKHNlbGVjdGVkTm9kZS5yaWNoQ2xhc3NMaXN0IHx8IFtdLCBzdGF0ZS52YWx1ZSwgeyBzdHJpY3Q6IHRydWUgfSkgJiZcbiAgICAgIChcbiAgICAgICAgIVBhdGguZXF1YWxzKHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IsIHN0YXRlLnZhbHVlRm9yQW5jaG9yKSB8fFxuICAgICAgICB0aW1lIC0gc3RhdGUudmFsdWVMYXN0VGltZVJlcXVlc3RlZFVwZGF0ZSA+IDMwMFxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHNlbGVjdGVkTm9kZS5yaWNoQ2xhc3NMaXN0IHx8IFtdLFxuICAgICAgICB2YWx1ZUZvckFuY2hvcjogcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcixcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBjb25zdHJ1Y3RzIGEgbmV3IGNsYXNzIHNlbGVjdG9yIGZvciByaWNoIGNsYXNzZXNcbiAgICogQHBhcmFtIHByb3BzIHRoZSBlbnRpcmUgbWF0ZXJpYWwgdWkgc2xhdGUgd3JhcHBlciBwcm9wcyB0aGF0IHRoZSB3cmFwcGVyIHRha2VzXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcm9wczogSURyYXdlckNvbnRhaW5lclByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgLy8gc2V0dXAgdGhlIGluaXRpYWwgc3RhdGVcbiAgICBjb25zdCBzZWxlY3RlZE5vZGU6IFJpY2hFbGVtZW50ID0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudCBhcyBhbnk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHZhbHVlOiBzZWxlY3RlZE5vZGUucmljaENsYXNzTGlzdCB8fCBbXSxcbiAgICAgIHZhbHVlRm9yQW5jaG9yOiBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yLFxuICAgICAgdmFsdWVMYXN0VGltZVJlcXVlc3RlZFVwZGF0ZTogMCxcbiAgICB9O1xuXG4gICAgdGhpcy5vblJpY2hDbGFzc0xpc3RDaGFuZ2UgPSB0aGlzLm9uUmljaENsYXNzTGlzdENoYW5nZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIHdoZW4gdGhlIHNlbGVjdCBmaWVsZCBjaGFuZ2VzIGFuZCByZWNlaXZlcyBhIG5ldyB2YWx1ZVxuICAgKiBAcGFyYW0gZSB0aGUgY2hhbmdlIGV2ZW50XG4gICAqL1xuICBwdWJsaWMgb25SaWNoQ2xhc3NMaXN0Q2hhbmdlKG5ld1ZhbHVlOiBzdHJpbmdbXSA9IFtdKSB7XG4gICAgLy8gbm93IHdlIGNhbiB1cGRhdGUgdGhlIHN0YXRlXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB2YWx1ZTogbmV3VmFsdWUsXG4gICAgICB2YWx1ZUZvckFuY2hvcjogdGhpcy5wcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yLFxuICAgICAgdmFsdWVMYXN0VGltZVJlcXVlc3RlZFVwZGF0ZTogKG5ldyBEYXRlKCkpLmdldFRpbWUoKSxcbiAgICB9LCAoKSA9PiB7XG4gICAgICAvLyBpZiB3ZSBoYXZlIG5vdGhpbmcsIHRoZSBuZXcgdmFsdWUgaXMgbnVsbFxuICAgICAgLy8gZm9yIHRoZSBwcmltYXJ5IGNvbXBvbmVudFxuICAgICAgaWYgKG5ld1ZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBuZXdWYWx1ZSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIHNvIHdlIHNldCBzdWNoXG4gICAgICB0aGlzLnByb3BzLmhlbHBlcnMuc2V0UmljaENsYXNzZXMobmV3VmFsdWUsIHRoaXMucHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcik7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgdW5ibHVyKCkge1xuICAgIGRvY3VtZW50LmJvZHkuZGF0YXNldC51bmJsdXIgPSBcInRydWVcIjtcbiAgfVxuXG4gIHB1YmxpYyByZXNldEJsdXIoKSB7XG4gICAgZGVsZXRlIGRvY3VtZW50LmJvZHkuZGF0YXNldC51bmJsdXI7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHJlbmRlciBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgdGhlIG11bHRpc2VsZWN0XG4gICAqL1xuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIC8vIHdlIHVzZSBhIGNoaXAgZm9ybSBpbiBvcmRlciB0byBtYWtlIGl0IGZvciBtdWx0aXBsZSBzZWxlY3Rpb25cbiAgICBjb25zdCBNdWx0aVNlbGVjdG9yID0gdGhpcy5wcm9wcy5XcmFwcGVyRHJhd2VyTXVsdGlTZWxlY3RGaWVsZCB8fCBEZWZhdWx0V3JhcHBlckRyYXdlck11bHRpU2VsZWN0RmllbGQ7XG4gICAgcmV0dXJuIChcbiAgICAgIDxNdWx0aVNlbGVjdG9yXG4gICAgICAgIGlkPVwicmljaC1jbGFzc1wiXG4gICAgICAgIGxhYmVsPXt0aGlzLnByb3BzLmJhc2VJMThuLmNsYXNzZXN9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uUmljaENsYXNzTGlzdENoYW5nZX1cbiAgICAgICAgb3B0aW9ucz17dGhpcy5wcm9wcy5mZWF0dXJlU3VwcG9ydC5hdmFpbGFibGVSaWNoQ2xhc3Nlcy5tYXAoKGVsZW1lbnQpID0+IChcbiAgICAgICAgICAoe1xuICAgICAgICAgICAgbGFiZWw6IGVsZW1lbnQubGFiZWwsXG4gICAgICAgICAgICB2YWx1ZTogZWxlbWVudC52YWx1ZSxcbiAgICAgICAgICB9KVxuICAgICAgICApKX1cbiAgICAgICAgcmVzZXRCbHVyPXt0aGlzLnJlc2V0Qmx1cn1cbiAgICAgICAgdW5ibHVyPXt0aGlzLnVuYmx1cn1cbiAgICAgICAgdmFsdWVzPXt0aGlzLnN0YXRlLnZhbHVlfVxuICAgICAgLz5cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgdGhlIGNvbXBvbmVudCB0aGF0IGNvbnRhaW5zIHRoZSBtdWx0aXNlbGVjdG9yIGZvciB0aGUgcmljaCBjbGFzc2VzXG4gKiBhcyB3ZWxsIGFzIGFsbG93cyB0byBzZXQgYWN0aXZlLCBob3ZlciBhbmQgc3RhbmRhcmQgc3R5bGVzIGZvciB0aGUgY29tcG9uZW50XG4gKiBAcGFyYW0gcHJvcHMgdGhlIHByb3BzIGZvciB0aGUgdGVtcGxhdGluZyB3aGljaCBpcyBsaXRlcmFsbHkgdGhlIHdob2xlXG4gKiBvcHRpb25zIG9mIHRoZSB3cmFwcGVyIGl0c2VsZlxuICovXG5leHBvcnQgZnVuY3Rpb24gU3R5bGVzT3B0aW9ucyhwcm9wczogSURyYXdlckNvbnRhaW5lclByb3BzKSB7XG4gIGNvbnN0IHNldFN0YW5kYWxvbmUgPSB1c2VDYWxsYmFjaygodjogYm9vbGVhbikgPT4ge1xuICAgIHByb3BzLmhlbHBlcnMuc2V0KHtcbiAgICAgIHN0YW5kYWxvbmU6IHYsXG4gICAgfSwgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcik7XG4gIH0sIFtdKTtcblxuICBpZiAoIXByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IENoZWNrYm94RmllbGQgPSBwcm9wcy5XcmFwcGVyRHJhd2VyQ2hlY2tib3hGaWVsZCB8fCBEZWZhdWx0V3JhcHBlckRyYXdlckNoZWNrQm94RmllbGQ7XG5cbiAgY29uc3QgaW1nU3RhbmRhbG9uZSA9IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnQudHlwZSA9PT0gXCJpbWFnZVwiID8gKFxuICAgIDxDaGVja2JveEZpZWxkXG4gICAgICBvbkNoYW5nZT17c2V0U3RhbmRhbG9uZX1cbiAgICAgIGlkPVwiaW1hZ2Utc3RhbmRhbG9uZVwiXG4gICAgICBsYWJlbD17cHJvcHMuYmFzZUkxOG4uc3RhbmRhbG9uZX1cbiAgICAgIHZhbHVlPXtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50LnN0YW5kYWxvbmV9XG4gICAgLz5cbiAgKSA6IG51bGw7XG5cbiAgY29uc3QgY3VycmVudE5vZGUgPSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50IGFzIFJpY2hFbGVtZW50O1xuICBjb25zdCBXcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXIgPSBwcm9wcy5XcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXIgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJJbnRlcm5hbFBhbmVsV3JhcHBlcjtcblxuICByZXR1cm4gKFxuICAgIDxXcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXI+XG4gICAgICB7aW1nU3RhbmRhbG9uZX1cbiAgICAgIHtcbiAgICAgICAgcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNSaWNoQ2xhc3NlcyA/XG4gICAgICAgICAgPENsYXNzZXNPcHRpb25TZWxlY3RvclxuICAgICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgIC8+IDogbnVsbFxuICAgICAgfVxuICAgICAge1xuICAgICAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0N1c3RvbVN0eWxlcyA/XG4gICAgICAgICAgPFNpbmdsZVN0eWxlXG4gICAgICAgICAgICBhbmNob3I9e3Byb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3J9XG4gICAgICAgICAgICBvbkNoYW5nZT17cHJvcHMuaGVscGVycy5zZXRTdHlsZX1cbiAgICAgICAgICAgIG5hbWU9e3Byb3BzLmJhc2VJMThuLnN0eWxlfVxuICAgICAgICAgICAgc3R5bGVWYWx1ZT17Y3VycmVudE5vZGUuc3R5bGV9XG4gICAgICAgICAgICBUZXh0RmllbGQ9e3Byb3BzLldyYXBwZXJEcmF3ZXJUZXh0RmllbGR9XG4gICAgICAgICAgICBpZD1cInN0eWxlXCJcbiAgICAgICAgICAvPiA6IG51bGxcbiAgICAgIH1cbiAgICAgIHtcbiAgICAgICAgcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNDdXN0b21TdHlsZXMgJiYgcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNUZW1wbGF0aW5nID9cbiAgICAgICAgICA8U2luZ2xlU3R5bGVcbiAgICAgICAgICAgIGFuY2hvcj17cHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcn1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtwcm9wcy5oZWxwZXJzLnNldEhvdmVyU3R5bGV9XG4gICAgICAgICAgICBuYW1lPXtwcm9wcy5iYXNlSTE4bi5zdHlsZUhvdmVyfVxuICAgICAgICAgICAgc3R5bGVWYWx1ZT17Y3VycmVudE5vZGUuc3R5bGVIb3Zlcn1cbiAgICAgICAgICAgIFRleHRGaWVsZD17cHJvcHMuV3JhcHBlckRyYXdlclRleHRGaWVsZH1cbiAgICAgICAgICAgIGlkPVwic3R5bGUtaG92ZXJcIlxuICAgICAgICAgIC8+IDogbnVsbFxuICAgICAgfVxuICAgICAge1xuICAgICAgICBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c0N1c3RvbVN0eWxlcyAmJiBwcm9wcy5mZWF0dXJlU3VwcG9ydC5zdXBwb3J0c1RlbXBsYXRpbmcgP1xuICAgICAgICAgIDxTaW5nbGVTdHlsZVxuICAgICAgICAgICAgYW5jaG9yPXtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yfVxuICAgICAgICAgICAgb25DaGFuZ2U9e3Byb3BzLmhlbHBlcnMuc2V0QWN0aXZlU3R5bGV9XG4gICAgICAgICAgICBuYW1lPXtwcm9wcy5iYXNlSTE4bi5zdHlsZUFjdGl2ZX1cbiAgICAgICAgICAgIHN0eWxlVmFsdWU9e2N1cnJlbnROb2RlLnN0eWxlQWN0aXZlfVxuICAgICAgICAgICAgVGV4dEZpZWxkPXtwcm9wcy5XcmFwcGVyRHJhd2VyVGV4dEZpZWxkfVxuICAgICAgICAgICAgaWQ9XCJzdHlsZS1hY3RpdmVcIlxuICAgICAgICAgIC8+IDogbnVsbFxuICAgICAgfVxuICAgIDwvV3JhcHBlckRyYXdlckludGVybmFsUGFuZWxXcmFwcGVyPlxuICApO1xufVxuIiwgIi8qKlxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBwYXJ0IG9mIHRoZSBkcmF3ZXIgdGhhdCBjb250YWlucyB0aGUgYWN0aW9uXG4gKiBtb2RpZmllcnMgdGhhdCBhbGxvd3MgdG8gc2V0IHRoaW5ncyBsaWtlIG9uLWNsaWNrIG9uLWZvY3VzIGV0Yy4uLlxuICogQG1vZHVsZVxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IElEcmF3ZXJDb250YWluZXJQcm9wcyB9IGZyb20gXCIuLi93cmFwcGVyXCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcInNsYXRlXCI7XG5pbXBvcnQgeyBEZWZhdWx0V3JhcHBlckRyYXdlckludGVybmFsUGFuZWxXcmFwcGVyLCBEZWZhdWx0V3JhcHBlckRyYXdlclNlbGVjdEZpZWxkLCBJV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkUHJvcHMgfSBmcm9tIFwiLi9nZW5lcmFsXCI7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgbGlzdCBvZiBldmVudHMgdGhhdCB3ZSBzdXBwb3J0XG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IEVWRU5UUyA9IFtcbiAgXCJjbGlja1wiLFxuICBcImJsdXJcIixcbiAgXCJmb2N1c1wiLFxuICBcImlucHV0XCIsXG4gIFwia2V5ZG93blwiLFxuICBcImtleXByZXNzXCIsXG4gIFwia2V5dXBcIixcbiAgXCJtb3VzZWRvd25cIixcbiAgXCJtb3VzZWVudGVyXCIsXG4gIFwibW91c2VsZWF2ZVwiLFxuICBcIm1vdXNlbW92ZVwiLFxuICBcIm1vdXNlb3ZlclwiLFxuICBcIm1vdXNlb3V0XCIsXG4gIFwibW91c2V1cFwiLFxuICBcIm1vdXNld2hlZWxcIixcbiAgXCJ0b3VjaHN0YXJ0XCIsXG4gIFwidG91Y2htb3ZlXCIsXG4gIFwidG91Y2hlbmRcIixcbiAgXCJ0b3VjaGNhbmNlbFwiLFxuICBcIndoZWVsXCIsXG5dO1xuXG4vKipcbiAqIEEgdXRpbGl0eSB0byBzcGVjaWZ5IGEgc2luZ2xlIGFjdGlvblxuICogb3B0aW9uIGZvciB0aGUgc2VsZWN0IGludGVyZmFjZVxuICovXG5pbnRlcmZhY2UgSVNpbmdsZUFjdGlvbk9wdGlvbiB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIHByaW1hcnk6IGJvb2xlYW47XG59XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgcHJvcHMgdGhhdCB0aGUgc2VsZWN0b3IgdGFrZXNcbiAqIHRoZSBzZWxlY3RvciBjb21wb25lbnQgdGFrZXMgdGhlc2UgcHJvcHMgYW5kIGdlbmVyYXRlc1xuICogYSBzZWxlY3Qgd2l0aCB0aGUgbmVjZXNzYXJ5IGluZm9ybWF0aW9uIGFuZCBoYW5kbGVyc1xuICogaW4gb3JkZXIgdG8gbW9kaWZ5IHRoZSBhY3Rpb25cbiAqL1xuaW50ZXJmYWNlIElTaW5nbGVBY3Rpb25Qcm9wcyB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBpcyB1c2VkIGJvdGggYXMgbmFtZXNwYWNpbmcgYW5kIGFzIHRoZSBuYW1lIGl0c2VsZlxuICAgKiBzaW5jZSB0aGUgSlMgZXZlbnRzIGFyZSBqcyBzcGVjaWZpYyB0aGVyZSdzIG5vIHBvaW50IGZvciB0aGVtXG4gICAqIHRvIGJlIHRyYW5zbGF0ZWRcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHZhbHVlIHRoYXQgaXQgaG9sZHNcbiAgICovXG4gIGFjdGlvblZhbHVlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBBbGwgdGhlIG9wdGlvbnMgdGhhdCBhcmUgYWxsb3dlZCBmb3IgdGhlIGFjdGlvbnMsIHRoZXNlIHJlcHJlc2VudHNcbiAgICogdGhlIGZ1bmN0aW9ucyB0aGF0IGV4aXN0IHdpdGhpbiB0aGUgY29udGV4dFxuICAgKi9cbiAgb3B0aW9uczogSVNpbmdsZUFjdGlvbk9wdGlvbltdO1xuICAvKipcbiAgICogaW4gd2hpY2ggYW5jaG9yIHRoZSB2YWx1ZSB3YXMgZ2VuZXJhdGVkIGZyb21cbiAgICogd2Uga2VlcCB0cmFjayBvZiB0aGUgYW5jaG9yIGluIG9yZGVyIHRvIGtub3dcbiAgICogaWYgdGhlIHZhbHVlIHNob3VsZCBiZSB1cGRhdGVkXG4gICAqIHRoZXJlIGlzIGEgZGVsYXkgYmV0d2VlbiB0aGUgdXBkYXRpbmcgYW5kIHJlY2VpdmluZyB0aGVcbiAgICogdmFsdWUgaW4gdGhlIGZpZWxkIHNvIGl0J2QgY2F1c2UgZmxpY2tlcmluZyBvdGhlcndpc2VcbiAgICovXG4gIGFuY2hvcjogUGF0aDtcbiAgLyoqXG4gICAqIFRoZSBncm91cCBpbmRleCBmb3IgYWNjZXNzaWJpbGl0eVxuICAgKi9cbiAgZ3JvdXBJbmRleDogbnVtYmVyO1xuICAvKipcbiAgICogVHJpZ2dlciBvbiBjaGFuZ2VcbiAgICogQHBhcmFtIGtleSB0aGUgYWN0aW9uIGtleSwgY2xpY2ssIG1vdXNlb3ZlciwgZXRjLi4uXG4gICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgdGhhdCBpcyByZWZlcnJlZCB0b1xuICAgKiBAcGFyYW0gYW5jaG9yIGluIHdoaWNoIGFuY2hvciBpdCBnZW5lcmF0ZWRcbiAgICovXG4gIG9uQ2hhbmdlOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogaWQgZm9yIHRoZSBhY3Rpb24gc3BhY2VcbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgU2VsZWN0RmllbGQ6IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZFByb3BzPjtcbn1cblxuLyoqXG4gKiBUaGUgc3RhdGUgb2YgZWFjaCBhY3Rpb24gc2VsZWN0b3JcbiAqL1xuaW50ZXJmYWNlIElTaW5nbGVBY3Rpb25TdGF0ZSB7XG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCB2YWx1ZSBhcyBpbiB0aGUgc3RhdGUsIHdlIHN0b3JlIHRoZSB2YWx1ZSBoZXJlXG4gICAqIGFuZCB3ZSBrZWVwIGl0IGhlcmUgYmVjYXVzZSB0aGVyZSdzIGEgZGVsYXkgd2hlbiB1cGRhdGluZyB0aGVzZVxuICAgKiB2YWx1ZXMgZnJvbSB0aGUgcmljaCBlbGVtZW50IGNvbnRlbnRcbiAgICovXG4gIHZhbHVlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgYW5jaG9yIHdoZXJlIGl0IGNvbWVzIGZyb20gd2UgYWxzbyBzdG9yZSB0aGUgYW5jaG9yIHRvIGtub3cgaWYgaXQgaGFzXG4gICAqIGNoYW5nZWQgd2hpY2ggbWVhbnMgaXQncyBhbm90aGVyIGVsZW1lbnQsIG90aGVyd2lzZSB3ZSBhc3N1bWUgdGhhdCB0aGUgc3RhdGVcbiAgICogdmFsdWUgaXMgdGhlIHJpZ2h0IHZhbHVlXG4gICAqL1xuICB2YWx1ZUZvckFuY2hvcjogUGF0aDtcbiAgdmFsdWVMYXN0VGltZVJlcXVlc3RlZFVwZGF0ZTogbnVtYmVyO1xufVxuXG4vKipcbiAqIFRoZSBzaW5nbGUgYWN0aW9uIGNsYXNzIHJlcHJlc2VudHMgdGhlIGNvbXBvbmVudCB0aGF0IGFsbG93cyBmb3IgbW9kaWZpY2F0aW9uXG4gKiBvZiBhIHNpbmdsZSBhY3Rpb24gZWcuIGNsaWNrLCBtb3VzZW92ZXIsIGJ5IHByb2R1Y2luZyBhIHNpbmdsZSBzZWxlY3QgZWxlbWVudFxuICogd2l0aCB0aGUgbmVjZXNzYXJ5IGhhbmRsZXJzIGFuZCB0YWtpbmcgdGhlIG5lY2Vzc2FyeSBwcm9wcyBmb3IgbW9kaWZpY2F0aW9uXG4gKi9cbmNsYXNzIFNpbmdsZUFjdGlvbiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8SVNpbmdsZUFjdGlvblByb3BzLCBJU2luZ2xlQWN0aW9uU3RhdGU+IHtcblxuICAvKipcbiAgICogV2UgbmVlZCB0aGUgZGVyaXZlZCBmdW5jdGlvbiBpbiBvcmRlciB0byBiZSBhYmxlIHRvIHVwZGF0ZSB0aGUgdmFsdWUgb2YgdGhlXG4gICAqIHNlbGVjdG9yIGluIGNhc2UsIHRoaXMgaXMgdGhlIG1vcmUgZWZmaWNpZW50IHdheSBpbiB0aGVzZSBjYXNlcyB3aGVyZSB0aGluZ3NcbiAgICogYXJlIHNsaWdodGx5IG91dCBvZiBzeW5jXG4gICAqL1xuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKHByb3BzOiBJU2luZ2xlQWN0aW9uUHJvcHMsIHN0YXRlOiBJU2luZ2xlQWN0aW9uU3RhdGUpIHtcbiAgICAvLyBmb3IgdGhhdCB3ZSBjaGVjayBpZiB0aGUgdmFsdWUgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gdGhlIHN0YXRlLCB3aGljaCBoYXBwZW5zXG4gICAgLy8gd2hlbmV2ZXIgY2hhbmdpbmcsIGJ1dCBpbiBvcmRlciB0byBhY3R1YWxseSBjaGFuZ2UgaXQgd2Ugb25seSBkbyBzbyBpZiBpdCdzIGEgZGlmZmVyZW50XG4gICAgLy8gZWxlbWVudCBhbmNob3Igd2UgYXJlIGF0XG4gICAgY29uc3QgdGltZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG4gICAgaWYgKFxuICAgICAgKHByb3BzLmFjdGlvblZhbHVlIHx8IFwiXCIpICE9PSBzdGF0ZS52YWx1ZSAmJlxuICAgICAgKFxuICAgICAgICAhUGF0aC5lcXVhbHMocHJvcHMuYW5jaG9yLCBzdGF0ZS52YWx1ZUZvckFuY2hvcikgfHxcbiAgICAgICAgdGltZSAtIHN0YXRlLnZhbHVlTGFzdFRpbWVSZXF1ZXN0ZWRVcGRhdGUgPiAzMDBcbiAgICAgIClcbiAgICApIHtcbiAgICAgIC8vIHNvIHdlIHVwZGF0ZVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHByb3BzLmFjdGlvblZhbHVlIHx8IFwiXCIsXG4gICAgICAgIHZhbHVlRm9yQW5jaG9yOiBwcm9wcy5hbmNob3IsXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogY29uc3RydWN0cyBhIG5ldyBTaW5nbGVBY3Rpb24gaW5zdGFuY2VcbiAgICogQHBhcmFtIHByb3BzIHRoZSBwcm9wc1xuICAgKi9cbiAgY29uc3RydWN0b3IocHJvcHM6IElTaW5nbGVBY3Rpb25Qcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMub25BY3Rpb25WYWx1ZUNoYW5nZSA9IHRoaXMub25BY3Rpb25WYWx1ZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25EaXJlY3RDaGFuZ2UgPSB0aGlzLm9uRGlyZWN0Q2hhbmdlLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdmFsdWU6IHByb3BzLmFjdGlvblZhbHVlIHx8IFwiXCIsXG4gICAgICB2YWx1ZUZvckFuY2hvcjogcHJvcHMuYW5jaG9yLFxuICAgICAgdmFsdWVMYXN0VGltZVJlcXVlc3RlZFVwZGF0ZTogMCxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgd2hlbiB0aGUgc2VsZWN0b3IgdmFsdWUgaGFzIGNoYW5nZWQgdG8gc29tZXRoaW5nIGVsc2VcbiAgICogQHBhcmFtIGUgdGhlIGNoYW5nZSBldmVudFxuICAgKi9cbiAgcHVibGljIG9uQWN0aW9uVmFsdWVDaGFuZ2UoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSB7XG4gICAgLy8gaXQgbWlnaHQgYmUgbnVsbFxuICAgIHRoaXMub25EaXJlY3RDaGFuZ2UoZS50YXJnZXQudmFsdWUpO1xuICB9XG5cbiAgcHVibGljIG9uRGlyZWN0Q2hhbmdlKG5ld1ZhbHVlOiBzdHJpbmcgPSBudWxsKSB7XG4gICAgLy8gdXBkYXRlIHRoZSBzdGF0ZVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdmFsdWU6IG5ld1ZhbHVlIHx8IFwiXCIsXG4gICAgICB2YWx1ZUZvckFuY2hvcjogdGhpcy5wcm9wcy5hbmNob3IsXG4gICAgICB2YWx1ZUxhc3RUaW1lUmVxdWVzdGVkVXBkYXRlOiAobmV3IERhdGUoKSkuZ2V0VGltZSgpLFxuICAgIH0pO1xuXG4gICAgLy8gdHJpZ2dlciBvbiBjaGFuZ2VcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMucHJvcHMubmFtZSwgbmV3VmFsdWUsIHRoaXMucHJvcHMuYW5jaG9yKTtcbiAgfVxuXG4gIHB1YmxpYyB1bmJsdXIoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5kYXRhc2V0LnVuYmx1ciA9IFwidHJ1ZVwiO1xuICB9XG5cbiAgcHVibGljIHJlc2V0Qmx1cigpIHtcbiAgICBkZWxldGUgZG9jdW1lbnQuYm9keS5kYXRhc2V0LnVuYmx1cjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcmVuZGVyIGZ1bmN0aW9uIGZvciB0aGUgY29tcG9uZW50XG4gICAqL1xuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIGNvbnN0IFNlbGVjdEZpZWxkID0gdGhpcy5wcm9wcy5TZWxlY3RGaWVsZCB8fCBEZWZhdWx0V3JhcHBlckRyYXdlclNlbGVjdEZpZWxkO1xuICAgIHJldHVybiAoXG4gICAgICA8U2VsZWN0RmllbGRcbiAgICAgICAgaWQ9e3RoaXMucHJvcHMuaWR9XG4gICAgICAgIGxhYmVsPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgIG9uQ2hhbmdlQnlFdmVudD17dGhpcy5vbkFjdGlvblZhbHVlQ2hhbmdlfVxuICAgICAgICBvbkNoYW5nZUJ5VmFsdWU9e3RoaXMub25EaXJlY3RDaGFuZ2V9XG4gICAgICAgIG9wdGlvbnM9e3RoaXMucHJvcHMub3B0aW9uc31cbiAgICAgICAgcmVzZXRCbHVyPXt0aGlzLnJlc2V0Qmx1cn1cbiAgICAgICAgdW5ibHVyPXt0aGlzLnVuYmx1cn1cbiAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudmFsdWV9XG4gICAgICAgIGRpc3BsYXlFbXB0eT17dHJ1ZX1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIENvbnN0cnVjdHMgYWxsIHRoZSBzZWxlY3RvciBmb3IgYWxsIHRoZSBnaXZlbiBvcHRpb25zIHRoYXQgZXhpc3QgdGhhdCBjYW4gYmUgc2V0XG4gKiBiYXNlZCBvbiB0aGUgY29udGV4dFxuICogQHBhcmFtIHByb3BzIHRoZSB3aG9sZSBtYXRlcmlhbCB1aSBzbGF0ZSB3cmFwcGVyIHdpdGggc3R5bGVzIHByb3BzIGZyb20gdGhlIGRyYXdlciBpdHNlbGZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEFjdGlvbnNPcHRpb25zKHByb3BzOiBJRHJhd2VyQ29udGFpbmVyUHJvcHMpIHtcbiAgLy8gZ2V0IHRoZSBjdXJyZW50IG5vZGUgdGhhdCB3ZSBoYXZlIGN1cnJlbnRseSBzZWxlY3RlZFxuICBjb25zdCBjdXJyZW50Tm9kZSA9IHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZElubGluZUVsZW1lbnQgfHxcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRCbG9ja0VsZW1lbnQgfHxcbiAgICAoXG4gICAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRTdXBlckJsb2NrRWxlbWVudHMgJiZcbiAgICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50c1tcbiAgICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50cy5sZW5ndGggLSAxXG4gICAgICBdXG4gICAgKTtcblxuICBjb25zdCBjdXJyZW50Tm9kZUNvbnRleHQgPSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRJbmxpbmVDb250ZXh0IHx8XG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkQmxvY2tDb250ZXh0IHx8XG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkVG9wbW9zdFN1cGVyQmxvY2tDb250ZXh0O1xuXG4gIGNvbnN0IGN1cnJlbnROb2RlQW5jaG9yID0gcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkSW5saW5lRWxlbWVudEFuY2hvciB8fFxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEJsb2NrRWxlbWVudEFuY2hvciB8fFxuICAgIChcbiAgICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZFN1cGVyQmxvY2tFbGVtZW50QW5jaG9ycyAmJlxuICAgICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzW1xuICAgICAgcHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkU3VwZXJCbG9ja0VsZW1lbnRBbmNob3JzLmxlbmd0aCAtIDFcbiAgICAgIF1cbiAgICApO1xuXG4gIC8vIGFuZCBub3cgbGV0J3MgYnVpbGQgYWxsIHRoZSBvcHRpb25zIHRoYXQgd2UgaGF2ZSBmb3IgdGhhdCB3ZSBuZWVkIHRvIGNoZWNrIG91ciBjdXJyZW50IGNvbnRleHQsIGlmIHdlIGhhdmUgb25lXG4gIGxldCBhbGxPcHRpb25zID0gY3VycmVudE5vZGVDb250ZXh0ID8gT2JqZWN0LmtleXMoY3VycmVudE5vZGVDb250ZXh0LnByb3BlcnRpZXMpLm1hcCgocCkgPT4ge1xuICAgIC8vIGdldCB0aGUgdmFsdWUgb2YgZWFjaCBwcm9wZXJ0eSBpbiB0aGUgY29udGV4dCBwcm9wZXJ0aWVzXG4gICAgY29uc3QgdmFsdWUgPSBjdXJyZW50Tm9kZUNvbnRleHQucHJvcGVydGllc1twXTtcblxuICAgIC8vIGFuZCBpdCBuZWVkcyB0byBiZSBhIGZ1bmN0aW9uIHRvIHBhc3NcbiAgICBpZiAodmFsdWUudHlwZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBub3cgd2UgY2FuIHJldHVybiBpdCBhbmQgZ2l2ZSBpdCB0aGUgbGFiZWwgaXQgaG9sZHNcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IHAsXG4gICAgICBsYWJlbDogdHlwZW9mIHZhbHVlLmxhYmVsID09PSBcImZ1bmN0aW9uXCIgPyB2YWx1ZS5sYWJlbCgpIDogdmFsdWUubGFiZWwsXG4gICAgICBwcmltYXJ5OiBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQgIT09IGN1cnJlbnROb2RlQ29udGV4dCxcbiAgICB9XG4gIH0pLmZpbHRlcigodikgPT4gISF2KSA6IFtdO1xuXG4gIGlmIChwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQgIT09IGN1cnJlbnROb2RlQ29udGV4dCkge1xuICAgIGFsbE9wdGlvbnMgPSBhbGxPcHRpb25zLmNvbmNhdChPYmplY3Qua2V5cyhwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQucHJvcGVydGllcykubWFwKChwKSA9PiB7XG4gICAgICAvLyBnZXQgdGhlIHZhbHVlIG9mIGVhY2ggcHJvcGVydHkgaW4gdGhlIGNvbnRleHQgcHJvcGVydGllc1xuICAgICAgY29uc3QgdmFsdWUgPSBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQucHJvcGVydGllc1twXTtcblxuICAgICAgaWYgKCh2YWx1ZSBhcyBhbnkpLm5vblJvb3RJbmhlcml0YWJsZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gYW5kIGl0IG5lZWRzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzc1xuICAgICAgaWYgKHZhbHVlLnR5cGUgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gbm93IHdlIGNhbiByZXR1cm4gaXQgYW5kIGdpdmUgaXQgdGhlIGxhYmVsIGl0IGhvbGRzXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcCxcbiAgICAgICAgbGFiZWw6IHR5cGVvZiB2YWx1ZS5sYWJlbCA9PT0gXCJmdW5jdGlvblwiID8gdmFsdWUubGFiZWwoKSA6IHZhbHVlLmxhYmVsLFxuICAgICAgICBwcmltYXJ5OiBmYWxzZSxcbiAgICAgIH1cbiAgICB9KS5maWx0ZXIoKHYpID0+ICEhdikpO1xuICB9XG5cbiAgaWYgKGFsbE9wdGlvbnMpIHtcbiAgICBhbGxPcHRpb25zID0gW3tcbiAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgbGFiZWw6IFwiIC0gXCIsXG4gICAgICBwcmltYXJ5OiBmYWxzZSxcbiAgICB9XS5jb25jYXQoYWxsT3B0aW9ucyk7XG4gIH07XG5cbiAgY29uc3QgV3JhcHBlckRyYXdlckludGVybmFsUGFuZWxXcmFwcGVyID0gcHJvcHMuV3JhcHBlckRyYXdlckludGVybmFsUGFuZWxXcmFwcGVyIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXI7XG5cbiAgLy8gbm93IHdlIGNhbiByZXR1cm4gdGhlIHdob2xlIGJveFxuICByZXR1cm4gKFxuICAgIDxXcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXI+XG4gICAgICB7XG4gICAgICAgIEVWRU5UUy5tYXAoKHYsIGluZGV4KSA9PiAoXG4gICAgICAgICAgPFNpbmdsZUFjdGlvblxuICAgICAgICAgICAga2V5PXt2fVxuICAgICAgICAgICAgbmFtZT17dn1cbiAgICAgICAgICAgIGFjdGlvblZhbHVlPXtjdXJyZW50Tm9kZVt2XSB8fCBudWxsfVxuICAgICAgICAgICAgb3B0aW9ucz17YWxsT3B0aW9uc31cbiAgICAgICAgICAgIGFuY2hvcj17Y3VycmVudE5vZGVBbmNob3J9XG4gICAgICAgICAgICBvbkNoYW5nZT17cHJvcHMuaGVscGVycy5zZXRBY3Rpb259XG4gICAgICAgICAgICBncm91cEluZGV4PXtpbmRleH1cbiAgICAgICAgICAgIGlkPXtcImFjdGlvbi1cIiArIHZ9XG4gICAgICAgICAgICBTZWxlY3RGaWVsZD17cHJvcHMuV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkfVxuICAgICAgICAgIC8+XG4gICAgICAgICkpXG4gICAgICB9XG4gICAgPC9XcmFwcGVyRHJhd2VySW50ZXJuYWxQYW5lbFdyYXBwZXI+XG4gICk7XG59XG4iLCAiLyoqXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIHRlbXBsYXRpbmcgb3B0aW9ucyB0aGF0IGV4aXN0IHdpdGhpbiB0aGUgZHJhd2VyIGluIG9yZGVyXG4gKiB0byBzZXQgdGhlIGZvci1lYWNoIGFuZCBjb250ZXh0IGtleVxuICogQG1vZHVsZVxuICovXG5cbmltcG9ydCB7IGdldENvbnRleHRGb3IsIFJpY2hFbGVtZW50IH0gZnJvbSBcIi4uLy4uLy4uL3NlcmlhbGl6ZXJcIjtcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjayB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHR5cGUgeyBJRHJhd2VyQ29udGFpbmVyUHJvcHMsIElEcmF3ZXJUZW1wbGF0aW5nQ29udGFpbmVyQm94UHJvcHMsIElTaW5nbGVUZW1wbGF0aW5nRWxlbWVudE9wdGlvbiB9IGZyb20gXCIuLi93cmFwcGVyXCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcInNsYXRlXCI7XG5pbXBvcnQgeyBEZWZhdWx0V3JhcHBlckRyYXdlclNlbGVjdEZpZWxkLCBJV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkUHJvcHMgfSBmcm9tIFwiLi9nZW5lcmFsXCI7XG5cbi8qKlxuICogVGhlIHNpbmdsZSB0ZW1wbGF0aW5nIGVsZW1lbnQgb3B0aW9uIHByb3BzIGFyZSB0aGUgcHJvcHNcbiAqIHRoYXQgdGhlIGNvbXBvbmVudCB0YWtlcyBpbiBvcmRlciB0byBidWlsZCB0aGUgc2VsZWN0IGZpZWxkXG4gKiBmb3IgdGhlc2Ugb3B0aW9uc1xuICovXG5pbnRlcmZhY2UgSVNpbmdsZVRlbXBsYXRpbmdFbGVtZW50UHJvcHMge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIG9wdGlvbiwgdXNlZCBmb3IgbmFtZXNwYWNpbmdcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBpMThuIG5hbWUgaXMgd2hhdCBpcyBhY3R1YWxseSB2aXNpYmxlIGZvciB0aGUgdXNlclxuICAgKiB1c2VkIGZvciBwbGFjZWhvbGRlciBhbmQgbGFiZWxcbiAgICovXG4gIGkxOG5OYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCB2YWx1ZVxuICAgKi9cbiAgdmFsdWU6IHN0cmluZztcbiAgLyoqXG4gICAqIEFsbCB0aGUgb3B0aW9uc1xuICAgKi9cbiAgb3B0aW9uczogSVNpbmdsZVRlbXBsYXRpbmdFbGVtZW50T3B0aW9uW107XG4gIC8qKlxuICAgKiBpbiB3aGljaCBhbmNob3IgdGhlIHZhbHVlIHdhcyBnZW5lcmF0ZWQgZnJvbVxuICAgKiB3ZSBrZWVwIHRyYWNrIG9mIHRoZSBhbmNob3IgaW4gb3JkZXIgdG8ga25vd1xuICAgKiBpZiB0aGUgdmFsdWUgc2hvdWxkIGJlIHVwZGF0ZWRcbiAgICogdGhlcmUgaXMgYSBkZWxheSBiZXR3ZWVuIHRoZSB1cGRhdGluZyBhbmQgcmVjZWl2aW5nIHRoZVxuICAgKiB2YWx1ZSBpbiB0aGUgZmllbGQgc28gaXQnZCBjYXVzZSBmbGlja2VyaW5nIG90aGVyd2lzZVxuICAgKi9cbiAgYW5jaG9yOiBQYXRoO1xuICAvKipcbiAgICogVGhlIGNoYW5nZSBldmVudCB0aGF0IHRyaWdnZXJzIG9uY2UgdGhlIHNlbGVjdCB2YWx1ZSBjaGFuZ2VzXG4gICAqL1xuICBvbkNoYW5nZTogKHZhbHVlOiBzdHJpbmcsIGFuY2hvcjogUGF0aCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFRoZSBpZCB0aGF0IHRoaXMgcmVwcmVzZW50c1xuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICBTZWxlY3RGaWVsZDogUmVhY3QuQ29tcG9uZW50VHlwZTxJV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkUHJvcHM+O1xufVxuXG4vKipcbiAqIFRoZSBzdGF0ZSBvZiB0aGUgdGVtcGxhdGluZyBlbGVtZW50XG4gKi9cbmludGVyZmFjZSBJU2luZ2xlVGVtcGxhdGluZ0VsZW1lbnRTdGF0ZSB7XG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCB2YWx1ZSBhcyBpbiB0aGUgc3RhdGUsIHdlIHN0b3JlIHRoZSB2YWx1ZSBoZXJlXG4gICAqIGFuZCB3ZSBrZWVwIGl0IGhlcmUgYmVjYXVzZSB0aGVyZSdzIGEgZGVsYXkgd2hlbiB1cGRhdGluZyB0aGVzZVxuICAgKiB2YWx1ZXMgZnJvbSB0aGUgcmljaCBlbGVtZW50IGNvbnRlbnRcbiAgICovXG4gIHZhbHVlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgYW5jaG9yIHdoZXJlIGl0IGNvbWVzIGZyb20gd2UgYWxzbyBzdG9yZSB0aGUgYW5jaG9yIHRvIGtub3cgaWYgaXQgaGFzXG4gICAqIGNoYW5nZWQgd2hpY2ggbWVhbnMgaXQncyBhbm90aGVyIGVsZW1lbnQsIG90aGVyd2lzZSB3ZSBhc3N1bWUgdGhhdCB0aGUgc3RhdGVcbiAgICogdmFsdWUgaXMgdGhlIHJpZ2h0IHZhbHVlXG4gICAqL1xuICB2YWx1ZUZvckFuY2hvcjogUGF0aDtcbiAgdmFsdWVMYXN0VGltZVJlcXVlc3RlZFVwZGF0ZTogbnVtYmVyO1xufVxuXG4vKipcbiAqIFRoZSBzaW5nbGUgdGVtcGxhdGluZyBlbGVtZW50IGNsYXNzIHRoYXQgcHJvdmlkZXMgdGhlIHNlbGVjdG9yXG4gKi9cbmNsYXNzIFNpbmdsZVRlbXBsYXRpbmdFbGVtZW50IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxJU2luZ2xlVGVtcGxhdGluZ0VsZW1lbnRQcm9wcywgSVNpbmdsZVRlbXBsYXRpbmdFbGVtZW50U3RhdGU+IHtcblxuICAvKipcbiAgICogV2UgbmVlZCB0aGUgZGVyaXZlZCBmdW5jdGlvbiBpbiBvcmRlciB0byBiZSBhYmxlIHRvIHVwZGF0ZSB0aGUgdmFsdWUgb2YgdGhlXG4gICAqIHNlbGVjdG9yIGluIGNhc2UsIHRoaXMgaXMgdGhlIG1vcmUgZWZmaWNpZW50IHdheSBpbiB0aGVzZSBjYXNlcyB3aGVyZSB0aGluZ3NcbiAgICogYXJlIHNsaWdodGx5IG91dCBvZiBzeW5jXG4gICAqL1xuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKHByb3BzOiBJU2luZ2xlVGVtcGxhdGluZ0VsZW1lbnRQcm9wcywgc3RhdGU6IElTaW5nbGVUZW1wbGF0aW5nRWxlbWVudFN0YXRlKSB7XG4gICAgLy8gZm9yIHRoYXQgd2UgY2hlY2sgaWYgdGhlIHZhbHVlIGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgb25lIGluIHRoZSBzdGF0ZSwgd2hpY2ggaGFwcGVuc1xuICAgIC8vIHdoZW5ldmVyIGNoYW5naW5nLCBidXQgaW4gb3JkZXIgdG8gYWN0dWFsbHkgY2hhbmdlIGl0IHdlIG9ubHkgZG8gc28gaWYgaXQncyBhIGRpZmZlcmVudFxuICAgIC8vIGVsZW1lbnQgYW5jaG9yIHdlIGFyZSBhdFxuICAgIGNvbnN0IHRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgIGlmIChcbiAgICAgIChwcm9wcy52YWx1ZSB8fCBcIlwiKSAhPT0gc3RhdGUudmFsdWUgJiZcbiAgICAgIChcbiAgICAgICAgIVBhdGguZXF1YWxzKHByb3BzLmFuY2hvciwgc3RhdGUudmFsdWVGb3JBbmNob3IpIHx8XG4gICAgICAgIHRpbWUgLSBzdGF0ZS52YWx1ZUxhc3RUaW1lUmVxdWVzdGVkVXBkYXRlID4gMzAwXG4gICAgICApXG4gICAgKSB7XG4gICAgICAvLyBzbyB3ZSB1cGRhdGVcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBwcm9wcy52YWx1ZSB8fCBcIlwiLFxuICAgICAgICB2YWx1ZUZvckFuY2hvcjogcHJvcHMuYW5jaG9yLFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdCBhIGJyYW5kIG5ldyB0ZW1wbGF0aW5nIGVsZW1lbnQgdGhhdCBwcm92aWRlcyBhIHNlbGVjdG9yXG4gICAqIEBwYXJhbSBwcm9wcyB0aGUgcHJvcHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJU2luZ2xlVGVtcGxhdGluZ0VsZW1lbnRQcm9wcykge1xuICAgIC8vIGNhbGwgdG8gdGhlIHN1cGVyXG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgLy8gZnVuY3Rpb24gYmluZGluZ1xuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkNoYW5nZUJ5RXZlbnQgPSB0aGlzLm9uQ2hhbmdlQnlFdmVudC5iaW5kKHRoaXMpO1xuXG4gICAgLy8gc2V0dXAgdGhlIGluaXRpYWwgc3RhdGVcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdmFsdWU6IHByb3BzLnZhbHVlIHx8IFwiXCIsXG4gICAgICB2YWx1ZUZvckFuY2hvcjogcHJvcHMuYW5jaG9yLFxuICAgICAgdmFsdWVMYXN0VGltZVJlcXVlc3RlZFVwZGF0ZTogMCxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiB0cmlnZ2VycyBvbmNlIHRoZSBzZWxlY3Rpb24gaGFzIGNoYW5nZWRcbiAgICogaW4gdGhlIGZpZWxkXG4gICAqIEBwYXJhbSBlIHRoZSBjaGFuZ2UgZXZlbnRcbiAgICovXG4gIHB1YmxpYyBvbkNoYW5nZShuZXdWYWx1ZTogc3RyaW5nKSB7XG4gICAgLy8gbm93IHdlIGNhbiB1cGRhdGUgdGhlIHN0YXRlXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB2YWx1ZTogbmV3VmFsdWUgfHwgXCJcIixcbiAgICAgIHZhbHVlRm9yQW5jaG9yOiB0aGlzLnByb3BzLmFuY2hvcixcbiAgICAgIHZhbHVlTGFzdFRpbWVSZXF1ZXN0ZWRVcGRhdGU6IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCksXG4gICAgfSk7XG5cbiAgICAvLyBhbmQgc2V0IHRoZSBzdGF0ZVxuICAgIHRoaXMucHJvcHMub25DaGFuZ2UobmV3VmFsdWUsIHRoaXMucHJvcHMuYW5jaG9yKTtcbiAgfVxuXG4gIC8qKlxuICogVGhpcyBmdW5jdGlvbiB0cmlnZ2VycyBvbmNlIHRoZSBzZWxlY3Rpb24gaGFzIGNoYW5nZWRcbiAqIGluIHRoZSBmaWVsZFxuICogQHBhcmFtIGUgdGhlIGNoYW5nZSBldmVudFxuICovXG4gIHB1YmxpYyBvbkNoYW5nZUJ5RXZlbnQoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSB7XG4gICAgLy8gZ3JhYiB0aGUgbmV3IHZhbHVlIGZyb20gdGhlIGV2ZW50XG4gICAgY29uc3QgbmV3VmFsdWUgPSBlLnRhcmdldC52YWx1ZSB8fCBudWxsO1xuXG4gICAgdGhpcy5vbkNoYW5nZShuZXdWYWx1ZSk7XG4gIH1cblxuICBwdWJsaWMgdW5ibHVyKCkge1xuICAgIGRvY3VtZW50LmJvZHkuZGF0YXNldC51bmJsdXIgPSBcInRydWVcIjtcbiAgfVxuXG4gIHB1YmxpYyByZXNldEJsdXIoKSB7XG4gICAgZGVsZXRlIGRvY3VtZW50LmJvZHkuZGF0YXNldC51bmJsdXI7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHJlbmRlciBmdW5jdGlvblxuICAgKi9cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICAvLyBoZXJlIHdlIGRvIHRoZSByZXR1cm4gd2l0aCB0aGUgYm94XG4gICAgY29uc3QgU2VsZWN0RmllbGQgPSB0aGlzLnByb3BzLlNlbGVjdEZpZWxkIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGQ7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTZWxlY3RGaWVsZFxuICAgICAgICBsYWJlbD17dGhpcy5wcm9wcy5pMThuTmFtZX1cbiAgICAgICAgb25DaGFuZ2VCeUV2ZW50PXt0aGlzLm9uQ2hhbmdlQnlFdmVudH1cbiAgICAgICAgb25DaGFuZ2VCeVZhbHVlPXt0aGlzLm9uQ2hhbmdlfVxuICAgICAgICBvcHRpb25zPXt0aGlzLnByb3BzLm9wdGlvbnN9XG4gICAgICAgIHJlc2V0Qmx1cj17dGhpcy5yZXNldEJsdXJ9XG4gICAgICAgIHVuYmx1cj17dGhpcy51bmJsdXJ9XG4gICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnZhbHVlfVxuICAgICAgICBpZD17dGhpcy5wcm9wcy5pZH1cbiAgICAgICAgZGlzcGxheUVtcHR5PXt0cnVlfVxuICAgICAgLz5cbiAgICApO1xuICB9XG59XG5cbmZ1bmN0aW9uIERlZmF1bHREcmF3ZXJUZW1wbGF0aW5nQ29udGFpbmVyQm94KHByb3BzOiBJRHJhd2VyVGVtcGxhdGluZ0NvbnRhaW5lckJveFByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzdGFsZUVkaXRvckRyYXdlclRlbXBsYXRpbmdDb250YWluZXJCb3hcIj5cbiAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIHRoZSBjb21wb25lbnQgdGhhdCBjb250YWlucyB0aGUgYm90aCBzZWxlY3RvcnMgZm9yIGJvdGhcbiAqIGVhY2ggYW5kIGNvbnRleHQga2V5IGZvciB1c2FnZSBpbiB0ZW1wbGF0aW5nXG4gKiBAcGFyYW0gcHJvcHMgdGhlIHByb3BzIGZvciB0aGUgdGVtcGxhdGluZyB3aGljaCBpcyBsaXRlcmFsbHkgdGhlIHdob2xlXG4gKiBvcHRpb25zIG9mIHRoZSB3cmFwcGVyIGl0c2VsZlxuICovXG5leHBvcnQgZnVuY3Rpb24gVGVtcGxhdGluZ09wdGlvbnMocHJvcHM6IElEcmF3ZXJDb250YWluZXJQcm9wcykge1xuICAvLyB3ZSBuZWVkIHRvIHBpY2sgdGhlc2UgdG8gbWFrZSB0aGUgb3B0aW9uIGxpc3RcbiAgY29uc3QgY3VycmVudE5vZGUgPSBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50IGFzIFJpY2hFbGVtZW50O1xuICBjb25zdCBhbGxFYWNoQ29udGV4dHM6IElTaW5nbGVUZW1wbGF0aW5nRWxlbWVudE9wdGlvbltdID0gW1xuICAgIHtcbiAgICAgIGxhYmVsOiBcIiAtIFwiLFxuICAgICAgdmFsdWU6IFwiXCIsXG4gICAgfSxcbiAgXTtcbiAgY29uc3QgYWxsQ29udGV4dHM6IElTaW5nbGVUZW1wbGF0aW5nRWxlbWVudE9wdGlvbltdID0gW1xuICAgIHtcbiAgICAgIGxhYmVsOiBcIiAtIFwiLFxuICAgICAgdmFsdWU6IFwiXCIsXG4gICAgfSxcbiAgXTtcbiAgY29uc3QgYWxsSWZDb25kaXRpb25zOiBJU2luZ2xlVGVtcGxhdGluZ0VsZW1lbnRPcHRpb25bXSA9IFtcbiAgICB7XG4gICAgICBsYWJlbDogXCIgLSBcIixcbiAgICAgIHZhbHVlOiBcIlwiLFxuICAgIH0sXG4gIF07XG5cbiAgLy8gaWYgd2UgaGF2ZSBhIGNvbnRleHQsIG90aGVyd2lzZSB3aXRob3V0IGNvbnRleHQgdGhlcmUgYXJlIG5vIG9wdGlvbnNcbiAgY29uc3QgY3VycmVudFNlbGVjdEVsZW1lbnRGb3JTZWxlY3RDb250ZXh0ID0gZ2V0Q29udGV4dEZvcihcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yLFxuICAgIFwic2VsZWN0LWNvbnRleHRcIixcbiAgICBwcm9wcy5zdGF0ZS50cmVlVmFsdWUsXG4gICAgcHJvcHMuc3RhdGUuY3VycmVudFJvb3RDb250ZXh0LFxuICApO1xuICBpZiAoY3VycmVudFNlbGVjdEVsZW1lbnRGb3JTZWxlY3RDb250ZXh0KSB7XG4gICAgLy8gd2UgYnVpbGQgdGhlIGtleSBsaXN0XG4gICAgT2JqZWN0LmtleXMoY3VycmVudFNlbGVjdEVsZW1lbnRGb3JTZWxlY3RDb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKHApID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gY3VycmVudFNlbGVjdEVsZW1lbnRGb3JTZWxlY3RDb250ZXh0LnByb3BlcnRpZXNbcF07XG4gICAgICAvLyBpdCBuZWVkcyB0byBiZSBhIGNvbnRleHQgdHlwZVxuICAgICAgaWYgKHZhbHVlLnR5cGUgIT09IFwiY29udGV4dFwiIHx8IHZhbHVlLmxvb3BhYmxlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBub3cgd2UgY2FuIGJ1aWxkIHRoZSBvcHRpb25cbiAgICAgIGNvbnN0IG9wdGlvbiA9IHtcbiAgICAgICAgdmFsdWU6IHAsXG4gICAgICAgIGxhYmVsOiB0eXBlb2YgdmFsdWUubGFiZWwgPT09IFwiZnVuY3Rpb25cIiA/IHZhbHVlLmxhYmVsKCkgOiB2YWx1ZS5sYWJlbCxcbiAgICAgIH07XG5cbiAgICAgIGFsbENvbnRleHRzLnB1c2gob3B0aW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRTZWxlY3RFbGVtZW50Rm9yRWFjaENvbnRleHQgPSBnZXRDb250ZXh0Rm9yKFxuICAgIHByb3BzLnN0YXRlLmN1cnJlbnRTZWxlY3RlZEVsZW1lbnRBbmNob3IsXG4gICAgXCJzZWxlY3QtbG9vcFwiLFxuICAgIHByb3BzLnN0YXRlLnRyZWVWYWx1ZSxcbiAgICBwcm9wcy5zdGF0ZS5jdXJyZW50Um9vdENvbnRleHQsXG4gICk7XG4gIC8vIGlmIHdlIGhhdmUgYSBjb250ZXh0LCBvdGhlcndpc2Ugd2l0aG91dCBjb250ZXh0IHRoZXJlIGFyZSBubyBvcHRpb25zXG4gIGlmIChjdXJyZW50U2VsZWN0RWxlbWVudEZvckVhY2hDb250ZXh0KSB7XG4gICAgLy8gd2UgYnVpbGQgdGhlIGtleSBsaXN0XG4gICAgT2JqZWN0LmtleXMoY3VycmVudFNlbGVjdEVsZW1lbnRGb3JFYWNoQ29udGV4dC5wcm9wZXJ0aWVzKS5mb3JFYWNoKChwKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGN1cnJlbnRTZWxlY3RFbGVtZW50Rm9yRWFjaENvbnRleHQucHJvcGVydGllc1twXTtcbiAgICAgIC8vIGl0IG5lZWRzIHRvIGJlIGEgY29udGV4dCB0eXBlXG4gICAgICBjb25zdCBpc1ZhbGlkRm9yQm9vbGVhbiA9IHZhbHVlLnR5cGUgPT09IFwiYm9vbGVhblwiO1xuICAgICAgY29uc3QgaXNWYWxpZEZvckxvb3AgPSB2YWx1ZS50eXBlID09PSBcImNvbnRleHRcIiAmJiB2YWx1ZS5sb29wYWJsZTtcbiAgICAgIGlmICghaXNWYWxpZEZvckJvb2xlYW4gJiYgIWlzVmFsaWRGb3JMb29wKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBub3cgd2UgY2FuIGJ1aWxkIHRoZSBvcHRpb25cbiAgICAgIGNvbnN0IG9wdGlvbiA9IHtcbiAgICAgICAgdmFsdWU6IHAsXG4gICAgICAgIGxhYmVsOiB0eXBlb2YgdmFsdWUubGFiZWwgPT09IFwiZnVuY3Rpb25cIiA/IHZhbHVlLmxhYmVsKCkgOiB2YWx1ZS5sYWJlbCxcbiAgICAgIH07XG5cbiAgICAgIGlmIChpc1ZhbGlkRm9yQm9vbGVhbikge1xuICAgICAgICBhbGxJZkNvbmRpdGlvbnMucHVzaChvcHRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxsRWFjaENvbnRleHRzLnB1c2gob3B0aW9uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChjdXJyZW50Tm9kZS5mb3JFYWNoKSB7XG4gICAgY29uc3QgZWFjaEZvdW5kID0gYWxsRWFjaENvbnRleHRzLmZpbmQoKHYpID0+IHYudmFsdWUgPT09IGN1cnJlbnROb2RlLmZvckVhY2gpO1xuICAgIGlmICghZWFjaEZvdW5kKSB7XG4gICAgICBhbGxFYWNoQ29udGV4dHMucHVzaCh7XG4gICAgICAgIHZhbHVlOiBjdXJyZW50Tm9kZS5mb3JFYWNoLFxuICAgICAgICBsYWJlbDogY3VycmVudE5vZGUuZm9yRWFjaCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjdXJyZW50Tm9kZS5jb250ZXh0KSB7XG4gICAgY29uc3QgY29udGV4dEZvdW5kID0gYWxsQ29udGV4dHMuZmluZCgodikgPT4gdi52YWx1ZSA9PT0gY3VycmVudE5vZGUuY29udGV4dCk7XG4gICAgaWYgKCFjb250ZXh0Rm91bmQpIHtcbiAgICAgIGFsbENvbnRleHRzLnB1c2goe1xuICAgICAgICB2YWx1ZTogY3VycmVudE5vZGUuY29udGV4dCxcbiAgICAgICAgbGFiZWw6IGN1cnJlbnROb2RlLmNvbnRleHQsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBpZiAoY3VycmVudE5vZGUuaWZDb25kaXRpb24pIHtcbiAgICBjb25zdCBpZkNvbmRpdGlvbkZvdW5kID0gYWxsSWZDb25kaXRpb25zLmZpbmQoKHYpID0+IHYudmFsdWUgPT09IGN1cnJlbnROb2RlLmlmQ29uZGl0aW9uKTtcbiAgICBpZiAoIWlmQ29uZGl0aW9uRm91bmQpIHtcbiAgICAgIGFsbEVhY2hDb250ZXh0cy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IGN1cnJlbnROb2RlLmlmQ29uZGl0aW9uLFxuICAgICAgICBsYWJlbDogY3VycmVudE5vZGUuaWZDb25kaXRpb24sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBhbmQgcmV0dXJuIHRoZSB0aGluZ1xuICBjb25zdCBEcmF3ZXJUZW1wbGF0aW5nQ29udGFpbmVyQm94ID0gcHJvcHMuRHJhd2VyVGVtcGxhdGluZ0NvbnRhaW5lckJveCB8fCBEZWZhdWx0RHJhd2VyVGVtcGxhdGluZ0NvbnRhaW5lckJveDtcbiAgcmV0dXJuIChcbiAgICA8RHJhd2VyVGVtcGxhdGluZ0NvbnRhaW5lckJveD5cbiAgICAgIDxTaW5nbGVUZW1wbGF0aW5nRWxlbWVudFxuICAgICAgICBuYW1lPVwiY29udGV4dFwiXG4gICAgICAgIGkxOG5OYW1lPXtwcm9wcy5iYXNlSTE4bi5jb250ZXh0fVxuICAgICAgICB2YWx1ZT17Y3VycmVudE5vZGUuY29udGV4dCB8fCBudWxsfVxuICAgICAgICBvcHRpb25zPXthbGxDb250ZXh0c31cbiAgICAgICAgYW5jaG9yPXtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yfVxuICAgICAgICBvbkNoYW5nZT17cHJvcHMuaGVscGVycy5zZXRDb250ZXh0fVxuICAgICAgICBTZWxlY3RGaWVsZD17cHJvcHMuV3JhcHBlckRyYXdlclNlbGVjdEZpZWxkfVxuICAgICAgICBpZD1cInJlbmRlci1jb250ZXh0XCJcbiAgICAgIC8+XG4gICAgICA8U2luZ2xlVGVtcGxhdGluZ0VsZW1lbnRcbiAgICAgICAgbmFtZT1cImlmXCJcbiAgICAgICAgaTE4bk5hbWU9e3Byb3BzLmJhc2VJMThuLnJlbmRlckNvbmRpdGlvbn1cbiAgICAgICAgdmFsdWU9e2N1cnJlbnROb2RlLmlmQ29uZGl0aW9uIHx8IG51bGx9XG4gICAgICAgIG9wdGlvbnM9e2FsbElmQ29uZGl0aW9uc31cbiAgICAgICAgYW5jaG9yPXtwcm9wcy5zdGF0ZS5jdXJyZW50U2VsZWN0ZWRFbGVtZW50QW5jaG9yfVxuICAgICAgICBvbkNoYW5nZT17cHJvcHMuaGVscGVycy5zZXRJZkNvbmRpdGlvbn1cbiAgICAgICAgU2VsZWN0RmllbGQ9e3Byb3BzLldyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZH1cbiAgICAgICAgaWQ9XCJyZW5kZXItaWZcIlxuICAgICAgLz5cbiAgICAgIDxTaW5nbGVUZW1wbGF0aW5nRWxlbWVudFxuICAgICAgICBuYW1lPVwiZWFjaFwiXG4gICAgICAgIGkxOG5OYW1lPXtwcm9wcy5iYXNlSTE4bi5lYWNofVxuICAgICAgICB2YWx1ZT17Y3VycmVudE5vZGUuZm9yRWFjaCB8fCBudWxsfVxuICAgICAgICBvcHRpb25zPXthbGxFYWNoQ29udGV4dHN9XG4gICAgICAgIGFuY2hvcj17cHJvcHMuc3RhdGUuY3VycmVudFNlbGVjdGVkRWxlbWVudEFuY2hvcn1cbiAgICAgICAgb25DaGFuZ2U9e3Byb3BzLmhlbHBlcnMuc2V0Rm9yRWFjaH1cbiAgICAgICAgU2VsZWN0RmllbGQ9e3Byb3BzLldyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZH1cbiAgICAgICAgaWQ9XCJyZW5kZXItZm9yLWVhY2hcIlxuICAgICAgLz5cbiAgICA8L0RyYXdlclRlbXBsYXRpbmdDb250YWluZXJCb3g+XG4gICk7XG59XG4iLCAiLyoqXG4gKiBQcm92aWRlcyB0aGUgZGlhbG9ncyB0aGF0IGFyZSB1c2VkIGZvciB0aGUgZmlsZVxuICogQG1vZHVsZVxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5cbi8qKlxuICogVGhlIGVycm9yIGRpYWxvZyBwcm9wc1xuICovXG5pbnRlcmZhY2UgSUZpbGVMb2FkRXJyb3JEaWFsb2dQcm9wcyB7XG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBlcnJvciwgaXQgYWxzbyByZXByZXNlbnRzXG4gICAqIHRoZSBmYWN0IG9mIHRoZSBkaWFsb2cgYmVpbmcgb3BlbiBpZiBvbmVcbiAgICogaXMgYXZhaWxhYmxlXG4gICAqL1xuICBjdXJyZW50TG9hZEVycm9yOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBkaXNtaXNzIHN1Y2ggZXJyb3JcbiAgICovXG4gIGRpc21pc3NDdXJyZW50TG9hZEVycm9yOiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogR2VuZXJpYyBlcnJvciBtZXNzYWdlXG4gICAqL1xuICBpMThuR2VuZXJpY0Vycm9yOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBPa1xuICAgKi9cbiAgaTE4bk9rOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgY29tcG9uZW50IGZvciB0aGUgZGlhbG9nXG4gICAqL1xuICBEaWFsb2c/OiBSZWFjdC5Db21wb25lbnRUeXBlPElEaWFsb2dDb21wb25lbnRQcm9wcz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURpYWxvZ0NvbXBvbmVudFByb3BzIHtcbiAgY2hpbGRyZW46IHN0cmluZztcbiAgb3BlbjogYm9vbGVhbjtcbiAgb25DbG9zZTogKCkgPT4gdm9pZDtcbiAgdGl0bGU6IHN0cmluZztcbiAgYnV0dG9uczogQXJyYXk8e1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgb25DbGljazogKCkgPT4gdm9pZDtcbiAgICBhY3Rpb246IFwicHJpbWFyeVwiIHwgXCJzZWNvbmRhcnlcIjtcbiAgfT47XG59XG5cbmZ1bmN0aW9uIERlZmF1bHREaWFsb2cocHJvcHM6IElEaWFsb2dDb21wb25lbnRQcm9wcykge1xuICBpZiAoIXByb3BzLm9wZW4pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGRpYWxvZyA9IChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yRGlhbG9nQmFja2Ryb3BcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JEaWFsb2dcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckRpYWxvZ1RpdGxlXCI+e3Byb3BzLnRpdGxlfTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yRGlhbG9nQ29udGVudFwiPntwcm9wcy5jaGlsZHJlbn08L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckJ1dHRvbnNcIj5cbiAgICAgICAgICB7cHJvcHMuYnV0dG9ucy5tYXAoKHYpID0+IChcbiAgICAgICAgICAgIDxidXR0b24ga2V5PXt2LmFjdGlvbn0gb25DbGljaz17di5vbkNsaWNrfT57di5sYWJlbH08L2J1dHRvbj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcblxuICByZXR1cm4gUmVhY3RET00uY3JlYXRlUG9ydGFsKGRpYWxvZywgZG9jdW1lbnQuYm9keSk7XG59XG5cbi8qKlxuICogVGhpcyBkaWFsb2cgcHJvdmlkZXMgYSBjb252ZW5pZW50IGVycm9yIG1lc3NhZ2UgdG8gZGlzcGxheSBhbmQgY2xvc2VcbiAqIGZvciB3aGVuIHRoZSBmaWxlIGZhaWxlZCB0byBsb2FkXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWxlTG9hZEVycm9yRGlhbG9nIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxJRmlsZUxvYWRFcnJvckRpYWxvZ1Byb3BzPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBJRmlsZUxvYWRFcnJvckRpYWxvZ1Byb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5vbkNsb3NlID0gdGhpcy5vbkNsb3NlLmJpbmQodGhpcyk7XG4gIH1cbiAgcHVibGljIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5wcm9wcy5kaXNtaXNzQ3VycmVudExvYWRFcnJvcigpO1xuICB9XG4gIC8qKlxuICAgKiBUaGUgcmVuZGVyIGZ1bmN0aW9uXG4gICAqL1xuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIGNvbnN0IERpYWxvZyA9IHRoaXMucHJvcHMuRGlhbG9nIHx8IERlZmF1bHREaWFsb2c7XG4gICAgcmV0dXJuIChcbiAgICAgIDxEaWFsb2dcbiAgICAgICAgb3Blbj17ISF0aGlzLnByb3BzLmN1cnJlbnRMb2FkRXJyb3J9XG4gICAgICAgIG9uQ2xvc2U9e3RoaXMub25DbG9zZX1cbiAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMuaTE4bkdlbmVyaWNFcnJvcn1cbiAgICAgICAgYnV0dG9ucz17XG4gICAgICAgICAgW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBsYWJlbDogdGhpcy5wcm9wcy5pMThuT2ssXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucHJvcHMuZGlzbWlzc0N1cnJlbnRMb2FkRXJyb3IsXG4gICAgICAgICAgICAgIGFjdGlvbjogXCJwcmltYXJ5XCIsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICA+XG4gICAgICAgIHt0aGlzLnByb3BzLmN1cnJlbnRMb2FkRXJyb3J9XG4gICAgICA8L0RpYWxvZz5cbiAgICApO1xuICB9XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBJU2xhdGVFZGl0b3JFbGVtZW50V3JhcHBlcnMsIElTbGF0ZUVkaXRvckludGVybmFsU3RhdGVUeXBlLCBJU2xhdGVFZGl0b3JXcmFwcGVyRWxlbWVudFByb3BzIH0gZnJvbSBcIi5cIjtcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSUxpbmsgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy9saW5rXCI7XG5pbXBvcnQgdHlwZSB7IElWaWRlbyB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL3ZpZGVvXCI7XG5pbXBvcnQgeyBJQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvY29udGFpbmVyXCI7XG5pbXBvcnQgeyBFZGl0b3JEcm9wZG93biwgSURyb3Bkb3duQ29tcG9uZW50Qm94UHJvcHMsIElEcm9wZG93bkNvbXBvbmVudFByb3BzLCBJRHJvcGRvd25Db21wb25lbnRXcmFwcGVyUHJvcHMgfSBmcm9tIFwiLi4vZWRpdG9yLWRyb3Bkb3duXCI7XG5pbXBvcnQgeyBJVGFibGUgfSBmcm9tIFwiLi4vLi4vc2VyaWFsaXplci90eXBlcy90YWJsZVwiO1xuaW1wb3J0IHsgSVRpdGxlIH0gZnJvbSBcIi4uLy4uL3NlcmlhbGl6ZXIvdHlwZXMvdGl0bGVcIjtcbmltcG9ydCB7IElJbWFnZSB9IGZyb20gXCIuLi8uLi9zZXJpYWxpemVyL3R5cGVzL2ltYWdlXCI7XG5pbXBvcnQgeyBEZWZhdWx0V3JhcHBlckRyYXdlclNlbGVjdEZpZWxkLCBEZWZhdWx0V3JhcHBlckRyYXdlclRleHRGaWVsZCwgSVdyYXBwZXJEcmF3ZXJDaGVja0JveFByb3BzLCBJV3JhcHBlckRyYXdlck11bHRpU2VsZWN0RmllbGRQcm9wcywgSVdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZFByb3BzLCBJV3JhcHBlckRyYXdlclRleHRGaWVsZFByb3BzIH0gZnJvbSBcIi4vZHJhd2VyL2dlbmVyYWxcIjtcbmltcG9ydCB7IElXcmFwcGVySTE4blJpY2hUZXh0SW5mbyB9IGZyb20gXCIuL3dyYXBwZXJcIjtcblxuLyoqXG4gKiBSZXByZXNlbnRzIGFuIG9wdGlvbiBmb3IgdGhlIHRlbXBsYXRlZCB2YWx1ZXNcbiAqIHRoYXQgdGhlIGxpbmsgY2FuIHRha2VcbiAqL1xuaW50ZXJmYWNlIElUZW1wbGF0ZU9wdGlvbiB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmcgfCAoKCkgPT4gc3RyaW5nKTtcbiAgcHJpbWFyeTogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUVsZW1lbnRXcmFwcGVyQnV0dG9uIHtcbiAgbGFiZWw6IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbiAgZGlzYWJsZWQ6IGJvb2xlYW47XG4gIHNlbGVjdGVkPzogYm9vbGVhbjtcbiAgb25DbGljazogKCkgPT4gdm9pZDtcbn1cblxuZnVuY3Rpb24gRGVmYXVsdEVsZW1lbnRXcmFwcGVyQnV0dG9uQ29tcG9uZW50KHByb3BzOiBJRWxlbWVudFdyYXBwZXJCdXR0b24pIHtcbiAgcmV0dXJuIChcbiAgICA8YnV0dG9uXG4gICAgICBjbGFzc05hbWU9e1wic2xhdGVFZGl0b3JFbGVtZW50V3JhcHBlckJ1dHRvbiBcIiArIChwcm9wcy5zZWxlY3RlZCA/IFwiIHNlbGVjdGVkXCIgOiBcIlwiKX1cbiAgICAgIGRpc2FibGVkPXtwcm9wcy5kaXNhYmxlZH1cbiAgICAgIG9uQ2xpY2s9e3Byb3BzLm9uQ2xpY2t9XG4gICAgPlxuICAgICAge3Byb3BzLmxhYmVsfVxuICAgIDwvYnV0dG9uID5cbiAgKTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRmllbGRXcmFwcGVyRm9yTW9yZU9wdGlvbnMge1xuICBsYWJlbDogc3RyaW5nO1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xufVxuXG5mdW5jdGlvbiBEZWZhdWx0RmllbGRXcmFwcGVyRm9yTW9yZU9wdGlvbnMocHJvcHM6IElGaWVsZFdyYXBwZXJGb3JNb3JlT3B0aW9ucykge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JGaWVsZFdyYXBwZXJGb3JNb3JlT3B0aW9uc1wiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbGF0ZUVkaXRvckZpZWxkV3JhcHBlckZvck1vcmVPcHRpb25zTGFiZWxcIj57cHJvcHMubGFiZWx9PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsYXRlRWRpdG9yRmllbGRXcmFwcGVyRm9yTW9yZU9wdGlvbnNDaGlsZHJlblwiPntwcm9wcy5jaGlsZHJlbn08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEZWZhdWx0U2xhdGVFbGVtZW50V3JhcHBlcnNQcm9wcyBleHRlbmRzIElTbGF0ZUVkaXRvcldyYXBwZXJFbGVtZW50UHJvcHMge1xuICAvKipcbiAgICogVXNlZCB0byBtYWtlIHRleHQgaW5wdXQgZmllbGRzXG4gICAqL1xuICBFbGVtZW50V3JhcHBlclRleHRGaWVsZD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJUZXh0RmllbGRQcm9wcz47XG5cbiAgLy8gLyoqXG4gIC8vICAqIFVzZWQgdG8gbWFrZSBjaGVja2JveCBpbnB1dCBmaWVsZHNcbiAgLy8gICovXG4gIC8vIEVsZW1lbnRXcmFwcGVyQ2hlY2tib3hGaWVsZD86IFJlYWN0LkNvbXBvbmVudFR5cGU8SVdyYXBwZXJEcmF3ZXJDaGVja0JveFByb3BzPjtcblxuICAvKipcbiAgICogVXNlZCB0byBtYWtlIHNlbGVjdCBpbnB1dCBmaWVsZHNcbiAgICovXG4gIEVsZW1lbnRXcmFwcGVyU2VsZWN0RmllbGQ/OiBSZWFjdC5Db21wb25lbnRUeXBlPElXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGRQcm9wcz47XG5cbiAgLy8gLyoqXG4gIC8vICAqIFVzZWQgdG8gbWFrZSBzZWxlY3QgaW5wdXQgZmllbGRzXG4gIC8vICAqL1xuICAvLyBFbGVtZW50V3JhcHBlck11bHRpU2VsZWN0RmllbGQ/OiBSZWFjdC5Db21wb25lbnRUeXBlPElXcmFwcGVyRHJhd2VyTXVsdGlTZWxlY3RGaWVsZFByb3BzPjtcblxuICAvKipcbiAgICogQnV0dG9ucyB1c2VkIHdpdGhpbiB0aGUgZWxlbWVudCB3cmFwcGVyc1xuICAgKi9cbiAgRWxlbWVudFdyYXBwZXJCdXR0b24/OiBSZWFjdC5Db21wb25lbnRUeXBlPElFbGVtZW50V3JhcHBlckJ1dHRvbj47XG5cbiAgLyoqXG4gICAqIFRoZSBkcm9wZG93biBjb21wb25lbnQgdG8gdXNlXG4gICAqIG5vdGUgdGhhdCBpdCBzaG91bGQgc3VwcG9ydCBhIHJlZiBvYmplY3QgZm9yIHRoaXNcbiAgICovXG4gIERyb3Bkb3duQ29tcG9uZW50PzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJvcGRvd25Db21wb25lbnRQcm9wcz47XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgdGhlIG9wdGlvbmFsIHBhcmVudCBib3ggdGhhdCBzb21lIGVsZW1lbnRzIGNob29zZSB0byB1c2VcbiAgICovXG4gIERyb3Bkb3duQ29tcG9uZW50Qm94PzogUmVhY3QuQ29tcG9uZW50VHlwZTxJRHJvcGRvd25Db21wb25lbnRCb3hQcm9wcz47XG5cbiAgLyoqXG4gICAqIFRoZSBjb21wb25lbnQgdGhlIGRyb3Bkb3duIGlzIHVzaW5nIGFzIGEgd3JhcHBlclxuICAgKiBmb3IgdGhlIGVsZW1lbnRcbiAgICovXG4gIERyb3Bkb3duQ29tcG9uZW50V3JhcHBlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SURyb3Bkb3duQ29tcG9uZW50V3JhcHBlclByb3BzPjtcblxuICAvKipcbiAgICogVXNlZCBtYWlubHkgaW4gdGhlIHRlbXBsYXRlZCBlbGVtZW50IHRoYXQgaXQgd3JhcHMgaW4gb3JkZXIgdG8gc2F5IHRoYXRcbiAgICogdGhlcmUgYXJlIG1vcmUgb3B0aW9uc1xuICAgKi9cbiAgRmllbGRXcmFwcGVyRm9yTW9yZU9wdGlvbnM/OiBSZWFjdC5Db21wb25lbnRUeXBlPElGaWVsZFdyYXBwZXJGb3JNb3JlT3B0aW9ucz47XG59XG5cbmZ1bmN0aW9uIGdldFZpZGVvVVJMKHY6IElWaWRlbykge1xuICBpZiAodi5vcmlnaW4gPT09IFwieW91dHViZVwiKSB7XG4gICAgcmV0dXJuIFwiaHR0cHM6Ly95b3V0dWJlLmNvbS93YXRjaD92PVwiICsgdi5zcmM7XG4gIH0gZWxzZSBpZiAodi5vcmlnaW4gPT09IFwidmltZW9cIikge1xuICAgIHJldHVybiBcImh0dHBzOi8vdmltZW8uY29tL1wiICsgdi5zcmM7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbn1cblxuZnVuY3Rpb24gSFRNTFdyYXBwZXIocHJvcHM6IElEZWZhdWx0U2xhdGVFbGVtZW50V3JhcHBlcnNQcm9wcykge1xuICBjb25zdCBbaHRtbE9wdGlvbnMsIHNldEhUTUxPcHRpb25zXSA9IHVzZVN0YXRlPElUZW1wbGF0ZU9wdGlvbltdPihbXSk7XG5cbiAgY29uc3QgdXBkYXRlSFRNTEIgPSB1c2VDYWxsYmFjaygobmV3Vjogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbGFiZWwgPSBodG1sT3B0aW9ucy5maW5kKChvKSA9PiBvLnZhbHVlID09PSBuZXdWKTtcbiAgICBwcm9wcy5oZWxwZXJzLnVwZGF0ZVRlbXBsYXRlSFRNTCh0eXBlb2YgbGFiZWwubGFiZWwgPT09IFwic3RyaW5nXCIgPyBsYWJlbC5sYWJlbCA6IGxhYmVsLmxhYmVsKCksIG5ld1YpO1xuICB9LCBbaHRtbE9wdGlvbnNdKTtcblxuICBjb25zdCB1cGRhdGVIVE1MID0gdXNlQ2FsbGJhY2soKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgIHVwZGF0ZUhUTUxCKGUudGFyZ2V0LnZhbHVlKTtcbiAgfSwgW3VwZGF0ZUhUTUxCXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXByb3BzLmlzU2VsZWN0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZXh0ID0gcHJvcHMuaGVscGVycy5nZXRDb250ZXh0Rm9yKHByb3BzLmVsZW1lbnQpO1xuICAgIGNvbnN0IHJvb3RDb250ZXh0ID0gcHJvcHMuaGVscGVycy5nZXRSb290Q29udGV4dCgpO1xuXG4gICAgLy8gbmVlZCB0byBmaW5kIHRoZSB0ZW1wbGF0ZWQgb3B0aW9ucyB0aGF0IGFyZSBhdmFpbGFibGVcbiAgICAvLyBnaXZlbiB0aGUgY3VycmVudCBjb250ZXh0XG4gICAgY29uc3QgaHRtbFByb3BlcnRpZXNUb1VzZTogSVRlbXBsYXRlT3B0aW9uW10gPSBbXTtcblxuICAgIC8vIG5vdyB3ZSBuZWVkIHRvIGdyYWIgdGhlIGN1cnJlbnQgY29udGV4dCwgaWYgd2UgaGF2ZSBhbnlcbiAgICBjb250ZXh0ICYmIE9iamVjdC5rZXlzKGNvbnRleHQucHJvcGVydGllcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAvLyBncmFiIGVhY2ggcHJvcGVydHkgYW5kIGNoZWNrIHRoZSB0eXBlIG9mIGl0XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbnRleHQucHJvcGVydGllc1trZXldO1xuICAgICAgLy8gaWYgaXQncyBub3QgYSBsaW5rXG4gICAgICBpZiAocHJvcGVydHkudHlwZSAhPT0gXCJodG1sXCIpIHtcbiAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBvdGhlcndpc2Ugd2UgaGF2ZSBhIHByb3BlcnR5IHdlIGNhbiB1c2VcbiAgICAgIGh0bWxQcm9wZXJ0aWVzVG9Vc2UucHVzaCh7XG4gICAgICAgIHZhbHVlOiBrZXksXG4gICAgICAgIGxhYmVsOiBwcm9wZXJ0eS5sYWJlbCB8fCBrZXksXG4gICAgICAgIHByaW1hcnk6IGNvbnRleHQgIT09IHJvb3RDb250ZXh0LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAocm9vdENvbnRleHQgJiYgcm9vdENvbnRleHQgIT09IGNvbnRleHQpIHtcbiAgICAgIE9iamVjdC5rZXlzKHJvb3RDb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAvLyBncmFiIGVhY2ggcHJvcGVydHkgYW5kIGNoZWNrIHRoZSB0eXBlIG9mIGl0XG4gICAgICAgIGNvbnN0IHByb3BlcnR5ID0gcm9vdENvbnRleHQucHJvcGVydGllc1trZXldO1xuXG4gICAgICAgIGlmIChwcm9wZXJ0eS5ub25Sb290SW5oZXJpdGFibGUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiBpdCdzIG5vdCBhIGxpbmtcbiAgICAgICAgaWYgKHByb3BlcnR5LnR5cGUgIT09IFwiaHRtbFwiKSB7XG4gICAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBvdGhlcndpc2Ugd2UgaGF2ZSBhIHByb3BlcnR5IHdlIGNhbiB1c2VcbiAgICAgICAgaHRtbFByb3BlcnRpZXNUb1VzZS5wdXNoKHtcbiAgICAgICAgICB2YWx1ZToga2V5LFxuICAgICAgICAgIGxhYmVsOiBwcm9wZXJ0eS5sYWJlbCB8fCBrZXksXG4gICAgICAgICAgcHJpbWFyeTogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gYW5kIHRoZSB2YWx1ZSBvZiBzdWNoIGlzIG5vdCBpbiB0aGUgbGlzdFxuICAgIGlmIChwcm9wcy5lbGVtZW50Lmh0bWwgJiYgIWh0bWxQcm9wZXJ0aWVzVG9Vc2Uuc29tZSgocCkgPT4gcC52YWx1ZSA9PT0gcHJvcHMuZWxlbWVudC5odG1sKSkge1xuICAgICAgLy8gd2UgYWRkIGl0XG4gICAgICBodG1sUHJvcGVydGllc1RvVXNlLnB1c2goe1xuICAgICAgICB2YWx1ZTogcHJvcHMuZWxlbWVudC5odG1sLFxuICAgICAgICBsYWJlbDogKHByb3BzLmVsZW1lbnQuY2hpbGRyZW5bMF0gYXMgYW55KS50ZXh0LFxuICAgICAgICBwcmltYXJ5OiBmYWxzZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldEhUTUxPcHRpb25zKGh0bWxQcm9wZXJ0aWVzVG9Vc2UpO1xuICB9LCBbcHJvcHMuZWxlbWVudCwgcHJvcHMuaXNTZWxlY3RlZF0pO1xuXG4gIGNvbnN0IFNlbGVjdEZpZWxkID0gcHJvcHMuRWxlbWVudFdyYXBwZXJTZWxlY3RGaWVsZCB8fCBEZWZhdWx0V3JhcHBlckRyYXdlclNlbGVjdEZpZWxkO1xuXG4gIHJldHVybiAoXG4gICAgPEVkaXRvckRyb3Bkb3duXG4gICAgICBEcm9wZG93bkNvbXBvbmVudD17cHJvcHMuRHJvcGRvd25Db21wb25lbnR9XG4gICAgICBEcm9wZG93bkNvbXBvbmVudEJveD17cHJvcHMuRHJvcGRvd25Db21wb25lbnRCb3h9XG4gICAgICBEcm9wZG93bkNvbXBvbmVudFdyYXBwZXI9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50V3JhcHBlcn1cbiAgICAgIGRyb3Bkb3duQ29tcG9uZW50V3JhcHBlclRhZz1cInNwYW5cIlxuICAgICAgaXNPcGVuPXtwcm9wcy5pc1NlbGVjdGVkfVxuICAgICAgZHJvcGRvd249e1xuICAgICAgICA8U2VsZWN0RmllbGRcbiAgICAgICAgICBpZD1cInRlbXBsYXRlLWh0bWxcIlxuICAgICAgICAgIGxhYmVsPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5hZGRUZW1wbGF0ZUhUTUwubGFiZWx9XG4gICAgICAgICAgb25DaGFuZ2VCeUV2ZW50PXt1cGRhdGVIVE1MfVxuICAgICAgICAgIG9uQ2hhbmdlQnlWYWx1ZT17dXBkYXRlSFRNTEJ9XG4gICAgICAgICAgb3B0aW9ucz17aHRtbE9wdGlvbnMubWFwKCh2KSA9PiAoe1xuICAgICAgICAgICAgbGFiZWw6IHR5cGVvZiB2LmxhYmVsID09PSBcImZ1bmN0aW9uXCIgPyB2LmxhYmVsKCkgOiB2LmxhYmVsLFxuICAgICAgICAgICAgdmFsdWU6IHYudmFsdWUsXG4gICAgICAgICAgICBwcmltYXJ5OiB2LnByaW1hcnksXG4gICAgICAgICAgfSkpfVxuICAgICAgICAgIHJlc2V0Qmx1cj17bnVsbH1cbiAgICAgICAgICB1bmJsdXI9e251bGx9XG4gICAgICAgICAgdmFsdWU9e3Byb3BzLmVsZW1lbnQuaHRtbH1cbiAgICAgICAgLz5cbiAgICAgIH1cbiAgICA+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9FZGl0b3JEcm9wZG93bj5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVGV4dFdyYXBwZXIocHJvcHM6IElEZWZhdWx0U2xhdGVFbGVtZW50V3JhcHBlcnNQcm9wcykge1xuICBjb25zdCBbdGV4dE9wdGlvbnMsIHNldFRleHRPcHRpb25zXSA9IHVzZVN0YXRlPElUZW1wbGF0ZU9wdGlvbltdPihbXSk7XG5cbiAgY29uc3QgdXBkYXRlVGV4dENvbnRlbnRCID0gdXNlQ2FsbGJhY2soKG5ld1Y6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGxhYmVsID0gdGV4dE9wdGlvbnMuZmluZCgobykgPT4gby52YWx1ZSA9PT0gbmV3Vik7XG4gICAgcHJvcHMuaGVscGVycy51cGRhdGVUZW1wbGF0ZVRleHQodHlwZW9mIGxhYmVsLmxhYmVsID09PSBcInN0cmluZ1wiID8gbGFiZWwubGFiZWwgOiBsYWJlbC5sYWJlbCgpLCBuZXdWKTtcbiAgfSwgW3RleHRPcHRpb25zXSk7XG5cbiAgY29uc3QgdXBkYXRlVGV4dENvbnRlbnQgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgdXBkYXRlVGV4dENvbnRlbnRCKGUudGFyZ2V0LnZhbHVlKTtcbiAgfSwgW3VwZGF0ZVRleHRDb250ZW50Ql0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFwcm9wcy5pc1NlbGVjdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY29udGV4dCA9IHByb3BzLmhlbHBlcnMuZ2V0Q29udGV4dEZvcihwcm9wcy5lbGVtZW50KTtcbiAgICBjb25zdCByb290Q29udGV4dCA9IHByb3BzLmhlbHBlcnMuZ2V0Um9vdENvbnRleHQoKTtcblxuICAgIC8vIG5lZWQgdG8gZmluZCB0aGUgdGVtcGxhdGVkIG9wdGlvbnMgdGhhdCBhcmUgYXZhaWxhYmxlXG4gICAgLy8gZ2l2ZW4gdGhlIGN1cnJlbnQgY29udGV4dFxuICAgIGNvbnN0IHRleHRQcm9wZXJ0aWVzVG9Vc2U6IElUZW1wbGF0ZU9wdGlvbltdID0gW107XG5cbiAgICAvLyBub3cgd2UgbmVlZCB0byBncmFiIHRoZSBjdXJyZW50IGNvbnRleHQsIGlmIHdlIGhhdmUgYW55XG4gICAgY29udGV4dCAmJiBPYmplY3Qua2V5cyhjb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgLy8gZ3JhYiBlYWNoIHByb3BlcnR5IGFuZCBjaGVjayB0aGUgdHlwZSBvZiBpdFxuICAgICAgY29uc3QgcHJvcGVydHkgPSBjb250ZXh0LnByb3BlcnRpZXNba2V5XTtcbiAgICAgIC8vIGlmIGl0J3Mgbm90IGEgbGlua1xuICAgICAgaWYgKHByb3BlcnR5LnR5cGUgIT09IFwidGV4dFwiKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gb3RoZXJ3aXNlIHdlIGhhdmUgYSBwcm9wZXJ0eSB3ZSBjYW4gdXNlXG4gICAgICB0ZXh0UHJvcGVydGllc1RvVXNlLnB1c2goe1xuICAgICAgICB2YWx1ZToga2V5LFxuICAgICAgICBsYWJlbDogcHJvcGVydHkubGFiZWwgfHwga2V5LFxuICAgICAgICBwcmltYXJ5OiBjb250ZXh0ICE9PSByb290Q29udGV4dCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaWYgKHJvb3RDb250ZXh0ICYmIHJvb3RDb250ZXh0ICE9PSBjb250ZXh0KSB7XG4gICAgICBPYmplY3Qua2V5cyhyb290Q29udGV4dC5wcm9wZXJ0aWVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgLy8gZ3JhYiBlYWNoIHByb3BlcnR5IGFuZCBjaGVjayB0aGUgdHlwZSBvZiBpdFxuICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHJvb3RDb250ZXh0LnByb3BlcnRpZXNba2V5XTtcblxuICAgICAgICBpZiAocHJvcGVydHkubm9uUm9vdEluaGVyaXRhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgaXQncyBub3QgYSBsaW5rXG4gICAgICAgIGlmIChwcm9wZXJ0eS50eXBlICE9PSBcInRleHRcIikge1xuICAgICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIGhhdmUgYSBwcm9wZXJ0eSB3ZSBjYW4gdXNlXG4gICAgICAgIHRleHRQcm9wZXJ0aWVzVG9Vc2UucHVzaCh7XG4gICAgICAgICAgdmFsdWU6IGtleSxcbiAgICAgICAgICBsYWJlbDogcHJvcGVydHkubGFiZWwgfHwga2V5LFxuICAgICAgICAgIHByaW1hcnk6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGFuZCB0aGUgdmFsdWUgb2Ygc3VjaCBpcyBub3QgaW4gdGhlIGxpc3RcbiAgICBpZiAocHJvcHMuZWxlbWVudC50ZXh0Q29udGVudCAmJiAhdGV4dFByb3BlcnRpZXNUb1VzZS5zb21lKChwKSA9PiBwLnZhbHVlID09PSBwcm9wcy5lbGVtZW50LnRleHRDb250ZW50KSkge1xuICAgICAgLy8gd2UgYWRkIGl0XG4gICAgICB0ZXh0UHJvcGVydGllc1RvVXNlLnB1c2goe1xuICAgICAgICB2YWx1ZTogcHJvcHMuZWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgICAgbGFiZWw6IChwcm9wcy5lbGVtZW50LmNoaWxkcmVuWzBdIGFzIGFueSkudGV4dCxcbiAgICAgICAgcHJpbWFyeTogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXRUZXh0T3B0aW9ucyh0ZXh0UHJvcGVydGllc1RvVXNlKTtcbiAgfSwgW3Byb3BzLmVsZW1lbnQsIHByb3BzLmlzU2VsZWN0ZWRdKTtcblxuICBjb25zdCBTZWxlY3RGaWVsZCA9IHByb3BzLkVsZW1lbnRXcmFwcGVyU2VsZWN0RmllbGQgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZDtcblxuICByZXR1cm4gKFxuICAgIDxFZGl0b3JEcm9wZG93blxuICAgICAgRHJvcGRvd25Db21wb25lbnQ9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50fVxuICAgICAgRHJvcGRvd25Db21wb25lbnRCb3g9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50Qm94fVxuICAgICAgRHJvcGRvd25Db21wb25lbnRXcmFwcGVyPXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudFdyYXBwZXJ9XG4gICAgICBkcm9wZG93bkNvbXBvbmVudFdyYXBwZXJUYWc9XCJzcGFuXCJcbiAgICAgIGlzT3Blbj17cHJvcHMuaXNTZWxlY3RlZH1cbiAgICAgIGRyb3Bkb3duPXtcbiAgICAgICAgPFNlbGVjdEZpZWxkXG4gICAgICAgICAgaWQ9XCJ0ZW1wbGF0ZS10ZXh0XCJcbiAgICAgICAgICBsYWJlbD17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuYWRkVGVtcGxhdGVUZXh0LmxhYmVsfVxuICAgICAgICAgIG9uQ2hhbmdlQnlFdmVudD17dXBkYXRlVGV4dENvbnRlbnR9XG4gICAgICAgICAgb25DaGFuZ2VCeVZhbHVlPXt1cGRhdGVUZXh0Q29udGVudEJ9XG4gICAgICAgICAgb3B0aW9ucz17dGV4dE9wdGlvbnMubWFwKCh2KSA9PiAoe1xuICAgICAgICAgICAgbGFiZWw6IHR5cGVvZiB2LmxhYmVsID09PSBcImZ1bmN0aW9uXCIgPyB2LmxhYmVsKCkgOiB2LmxhYmVsLFxuICAgICAgICAgICAgdmFsdWU6IHYudmFsdWUsXG4gICAgICAgICAgICBwcmltYXJ5OiB2LnByaW1hcnksXG4gICAgICAgICAgfSkpfVxuICAgICAgICAgIHJlc2V0Qmx1cj17bnVsbH1cbiAgICAgICAgICB1bmJsdXI9e251bGx9XG4gICAgICAgICAgdmFsdWU9e3Byb3BzLmVsZW1lbnQuaHRtbH1cbiAgICAgICAgLz5cbiAgICAgIH1cbiAgICA+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9FZGl0b3JEcm9wZG93bj5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVGRBbmRUaChwcm9wczogSURlZmF1bHRTbGF0ZUVsZW1lbnRXcmFwcGVyc1Byb3BzKSB7XG4gIGNvbnN0IHBhdGggPSBwcm9wcy5oZWxwZXJzLlJlYWN0RWRpdG9yLmZpbmRQYXRoKHByb3BzLmhlbHBlcnMuZWRpdG9yLCBwcm9wcy5lbGVtZW50KTtcbiAgY29uc3QgcGFyZW50UGF0aCA9IFsuLi5wYXRoXTtcbiAgLy8gdHJcbiAgcGFyZW50UGF0aC5wb3AoKTtcbiAgLy8gdGhlYWQgb3IgdGJvZHkgb3IgdGZvb3RcbiAgcGFyZW50UGF0aC5wb3AoKTtcblxuICBjb25zdCBwYXJlbnRUaGVhZE9yVGJvZHlPclRmb290ID0gcHJvcHMuaGVscGVycy5Ob2RlLmdldChwcm9wcy5oZWxwZXJzLmVkaXRvciwgcGFyZW50UGF0aCkgYXMgYW55O1xuXG4gIHBhcmVudFBhdGgucG9wKCk7XG4gIGNvbnN0IHRhYmxlRWxlbWVudCA9IHByb3BzLmhlbHBlcnMuTm9kZS5nZXQocHJvcHMuaGVscGVycy5lZGl0b3IsIHBhcmVudFBhdGgpIGFzIGFueTtcblxuICBjb25zdCBbdGFibGVUeXBlLCBzZXRUYWJsZVR5cGVdID0gdXNlU3RhdGUoKHRhYmxlRWxlbWVudCBhcyBJVGFibGUpLnRhYmxlVHlwZSB8fCBcIlwiKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFRhYmxlVHlwZSgodGFibGVFbGVtZW50IGFzIElUYWJsZSkudGFibGVUeXBlIHx8IFwiXCIpO1xuICB9LCBbKHRhYmxlRWxlbWVudCBhcyBJVGFibGUpLnRhYmxlVHlwZV0pO1xuXG4gIGNvbnN0IHVwZGF0ZVRhYmxlVHlwZUIgPSB1c2VDYWxsYmFjaygobmV3VmFsdWU6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHBhdGggPSBwcm9wcy5oZWxwZXJzLlJlYWN0RWRpdG9yLmZpbmRQYXRoKHByb3BzLmhlbHBlcnMuZWRpdG9yLCBwcm9wcy5lbGVtZW50KTtcbiAgICBjb25zdCB0YWJsZVBhdGggPSBbLi4ucGF0aF07XG4gICAgLy8gdHJcbiAgICB0YWJsZVBhdGgucG9wKCk7XG4gICAgLy8gdGhlYWQgb3IgdGJvZHkgb3IgdGZvb3RcbiAgICB0YWJsZVBhdGgucG9wKCk7XG4gICAgLy8gdGFibGVcbiAgICB0YWJsZVBhdGgucG9wKCk7XG5cbiAgICBwcm9wcy5oZWxwZXJzLnNldCh7XG4gICAgICB0YWJsZVR5cGU6IG5ld1ZhbHVlIHx8IG51bGwsXG4gICAgfSBhcyBhbnksIHRhYmxlUGF0aCk7XG4gICAgc2V0VGFibGVUeXBlKG5ld1ZhbHVlIHx8IFwiXCIpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgdXBkYXRlVGFibGVUeXBlID0gdXNlQ2FsbGJhY2soKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgIHVwZGF0ZVRhYmxlVHlwZUIoZS50YXJnZXQudmFsdWUpXG4gIH0sIFt1cGRhdGVUYWJsZVR5cGVCXSk7XG5cbiAgY29uc3QgU2VsZWN0RmllbGQgPSBwcm9wcy5FbGVtZW50V3JhcHBlclNlbGVjdEZpZWxkIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyU2VsZWN0RmllbGQ7XG4gIGNvbnN0IEJ1dHRvbiA9IHByb3BzLkVsZW1lbnRXcmFwcGVyQnV0dG9uIHx8IERlZmF1bHRFbGVtZW50V3JhcHBlckJ1dHRvbkNvbXBvbmVudDtcblxuICAvLyBiZWNhdXNlIG9mIGRvbSBuZXN0aW5nIHdlIHdpbGwganVzdCBwdXQgYSBmYWtlIGNvbXBvbmVudCB0byB0aGUgc2lkZVxuICAvLyBhbmQgYSBmYWtlIGVsZW1lbnQgc28gd2UgZG9uJ3QgbmVzdCBhIHRkIGluIHRoZSB0YWJsZVxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgICA8RWRpdG9yRHJvcGRvd25cbiAgICAgICAgRHJvcGRvd25Db21wb25lbnQ9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50fVxuICAgICAgICBEcm9wZG93bkNvbXBvbmVudEJveD17cHJvcHMuRHJvcGRvd25Db21wb25lbnRCb3h9XG4gICAgICAgIERyb3Bkb3duQ29tcG9uZW50V3JhcHBlcj17cHJvcHMuRHJvcGRvd25Db21wb25lbnRXcmFwcGVyfVxuICAgICAgICBkcm9wZG93bkNvbXBvbmVudFdyYXBwZXJUYWc9XCJ0ZFwiXG4gICAgICAgIGRyb3Bkb3duQ29tcG9uZW50V3JhcHBlckhpZGRlbj17dHJ1ZX1cbiAgICAgICAgZHJvcGRvd25Db21wb25lbnRXcmFwcGVyUHJvcHM9e3sgY29udGVudEVkaXRhYmxlOiBmYWxzZSB9fVxuICAgICAgICBkcm9wZG93blNpemFibGU9e3RydWV9XG4gICAgICAgIGRyb3Bkb3duPXtcbiAgICAgICAgICA8PlxuICAgICAgICAgICAge3Byb3BzLmZlYXR1cmVTdXBwb3J0LmF2YWlsYWJsZVRhYmxlcy5sZW5ndGggPyAoXG4gICAgICAgICAgICAgIDxTZWxlY3RGaWVsZFxuICAgICAgICAgICAgICAgIHZhbHVlPXt0YWJsZVR5cGV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2VCeUV2ZW50PXt1cGRhdGVUYWJsZVR5cGV9XG4gICAgICAgICAgICAgICAgZGlzcGxheUVtcHR5PXt0cnVlfVxuICAgICAgICAgICAgICAgIGxhYmVsPXtwcm9wcy5iYXNlSTE4bi50eXBlfVxuICAgICAgICAgICAgICAgIGlkPVwidGFibGUtdHlwZVwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2VCeVZhbHVlPXt1cGRhdGVUYWJsZVR5cGVCfVxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e1t7XG4gICAgICAgICAgICAgICAgICBsYWJlbDogXCIgLSBcIixcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICAgICAgICAgIH1dLmNvbmNhdChwcm9wcy5mZWF0dXJlU3VwcG9ydC5hdmFpbGFibGVUYWJsZXMpfVxuICAgICAgICAgICAgICAgIHJlc2V0Qmx1cj17bnVsbH1cbiAgICAgICAgICAgICAgICB1bmJsdXI9e251bGx9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgaWQ9XCJ0YWJsZS1hZGQtdGRcIlxuICAgICAgICAgICAgICBsYWJlbD17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0QWRkVGRMYWJlbH1cbiAgICAgICAgICAgICAgb25DbGljaz17cHJvcHMuaGVscGVycy5pbnNlcnRUYWJsZUNvbHVtbn1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgaWQ9XCJ0YWJsZS1hZGQtdHJcIlxuICAgICAgICAgICAgICBsYWJlbD17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0QWRkVHJMYWJlbH1cbiAgICAgICAgICAgICAgb25DbGljaz17cHJvcHMuaGVscGVycy5pbnNlcnRUYWJsZVJvd31cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgaWQ9XCJ0YWJsZS1kZWwtdGRcIlxuICAgICAgICAgICAgICBsYWJlbD17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0RGVsVGRMYWJlbH1cbiAgICAgICAgICAgICAgb25DbGljaz17cHJvcHMuaGVscGVycy5kZWxldGVUYWJsZUNvbHVtbn1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgaWQ9XCJ0YWJsZS1kZWwtdHJcIlxuICAgICAgICAgICAgICBsYWJlbD17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0RGVsVHJMYWJlbH1cbiAgICAgICAgICAgICAgb25DbGljaz17cHJvcHMuaGVscGVycy5kZWxldGVUYWJsZVJvd31cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgaWQ9XCJ0YWJsZS10b2dnbGUtdGhcIlxuICAgICAgICAgICAgICBsYWJlbD17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuZm9ybWF0QWRkVGhMYWJlbH1cbiAgICAgICAgICAgICAgb25DbGljaz17cHJvcHMuaGVscGVycy50b2dnbGVUYWJsZS5iaW5kKG51bGwsIFwidGhlYWRcIil9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXshcHJvcHMuaGVscGVycy5jYW5Ub2dnbGVUYWJsZShcInRoZWFkXCIpfVxuICAgICAgICAgICAgICBzZWxlY3RlZD17cHJvcHMuZWxlbWVudC50eXBlID09PSBcInRoXCJ9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBpZD1cInRhYmxlLXRvZ2dsZS10Zm9vdFwiXG4gICAgICAgICAgICAgIGxhYmVsPXsocHJvcHMuYmFzZUkxOG4gYXMgSVdyYXBwZXJJMThuUmljaFRleHRJbmZvKS5mb3JtYXRBZGRUZm9vdExhYmVsfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5oZWxwZXJzLnRvZ2dsZVRhYmxlLmJpbmQobnVsbCwgXCJ0Zm9vdFwiKX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFwcm9wcy5oZWxwZXJzLmNhblRvZ2dsZVRhYmxlKFwidGZvb3RcIil9XG4gICAgICAgICAgICAgIHNlbGVjdGVkPXtwYXJlbnRUaGVhZE9yVGJvZHlPclRmb290LnR5cGUgPT09IFwidGZvb3RcIn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgIH1cbiAgICAgICAgaXNPcGVuPXtwcm9wcy5pc1NlbGVjdGVkfVxuICAgICAgICBnb0ludG9UcmVlRGVwdGg9ey00fVxuICAgICAgPlxuICAgICAgICA8cCAvPlxuICAgICAgPC9FZGl0b3JEcm9wZG93bj5cbiAgICA8Lz5cbiAgKTtcbn1cblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRFbGVtZW50V3JhcHBlcnM6IElTbGF0ZUVkaXRvckVsZW1lbnRXcmFwcGVycyA9IHtcbiAgY29tcG9uZW50czoge1xuICAgIGxpbms6IChwcm9wczogSURlZmF1bHRTbGF0ZUVsZW1lbnRXcmFwcGVyc1Byb3BzKSA9PiB7XG4gICAgICBjb25zdCBbdmFsaWQsIHNldFZhbGlkXSA9IHVzZVN0YXRlKHRydWUpO1xuICAgICAgY29uc3QgW2xpbmtPcHRpb25zLCBzZXRMaW5rT3B0aW9uc10gPSB1c2VTdGF0ZTxJVGVtcGxhdGVPcHRpb25bXT4oW10pO1xuICAgICAgY29uc3QgW2VsZW1lbnRIcmVmLCBzZXRFbGVtZW50SHJlZl0gPSB1c2VTdGF0ZSgocHJvcHMuZWxlbWVudCBhcyBJTGluaykuaHJlZiB8fCBcIlwiKTtcblxuICAgICAgY29uc3QgdXBkYXRlRWxlbWVudEhyZWZCID0gdXNlQ2FsbGJhY2soKG5ld1Y6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZCA9IHByb3BzLmhlbHBlcnMudXBkYXRlTGluayhuZXdWLCAocHJvcHMuZWxlbWVudCBhcyBJTGluaykudGhyZWYgfHwgbnVsbCk7XG4gICAgICAgIHNldEVsZW1lbnRIcmVmKG5ld1YpO1xuICAgICAgICBzZXRWYWxpZCh2YWxpZCk7XG4gICAgICB9LCBbcHJvcHMuZWxlbWVudF0pO1xuXG4gICAgICBjb25zdCB1cGRhdGVFbGVtZW50VEhyZWZCID0gdXNlQ2FsbGJhY2soKG5ld1Y6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZCA9IHByb3BzLmhlbHBlcnMudXBkYXRlTGluaygocHJvcHMuZWxlbWVudCBhcyBJTGluaykuaHJlZiB8fCBudWxsLCBuZXdWKTtcbiAgICAgICAgc2V0VmFsaWQodmFsaWQpO1xuICAgICAgfSwgW3Byb3BzLmVsZW1lbnRdKTtcblxuICAgICAgY29uc3QgdXBkYXRlRWxlbWVudEhyZWYgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICAgICAgdXBkYXRlRWxlbWVudEhyZWZCKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH0sIFt1cGRhdGVFbGVtZW50SHJlZkJdKTtcblxuICAgICAgY29uc3QgdXBkYXRlRWxlbWVudFRIcmVmID0gdXNlQ2FsbGJhY2soKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgICAgICB1cGRhdGVFbGVtZW50VEhyZWZCKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH0sIFtdKTtcblxuICAgICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFwcm9wcy5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBwcm9wcy5oZWxwZXJzLmdldENvbnRleHRGb3IocHJvcHMuZWxlbWVudCk7XG4gICAgICAgIGNvbnN0IHJvb3RDb250ZXh0ID0gcHJvcHMuaGVscGVycy5nZXRSb290Q29udGV4dCgpO1xuXG4gICAgICAgIC8vIG5lZWQgdG8gZmluZCB0aGUgdGVtcGxhdGVkIG9wdGlvbnMgdGhhdCBhcmUgYXZhaWxhYmxlXG4gICAgICAgIC8vIGdpdmVuIHRoZSBjdXJyZW50IGNvbnRleHRcbiAgICAgICAgY29uc3QgbGlua1Byb3BlcnRpZXNUb1VzZTogSVRlbXBsYXRlT3B0aW9uW10gPSBbXTtcblxuICAgICAgICAvLyBub3cgd2UgbmVlZCB0byBncmFiIHRoZSBjdXJyZW50IGNvbnRleHQsIGlmIHdlIGhhdmUgYW55XG4gICAgICAgIGNvbnRleHQgJiYgT2JqZWN0LmtleXMoY29udGV4dC5wcm9wZXJ0aWVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAvLyBncmFiIGVhY2ggcHJvcGVydHkgYW5kIGNoZWNrIHRoZSB0eXBlIG9mIGl0XG4gICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBjb250ZXh0LnByb3BlcnRpZXNba2V5XTtcbiAgICAgICAgICAvLyBpZiBpdCdzIG5vdCBhIGxpbmtcbiAgICAgICAgICBpZiAocHJvcGVydHkudHlwZSAhPT0gXCJsaW5rXCIpIHtcbiAgICAgICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIGhhdmUgYSBwcm9wZXJ0eSB3ZSBjYW4gdXNlXG4gICAgICAgICAgbGlua1Byb3BlcnRpZXNUb1VzZS5wdXNoKHtcbiAgICAgICAgICAgIHZhbHVlOiBrZXksXG4gICAgICAgICAgICBsYWJlbDogcHJvcGVydHkubGFiZWwgfHwga2V5LFxuICAgICAgICAgICAgcHJpbWFyeTogY29udGV4dCAhPT0gcm9vdENvbnRleHQsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChyb290Q29udGV4dCAmJiByb290Q29udGV4dCAhPT0gY29udGV4dCkge1xuICAgICAgICAgIE9iamVjdC5rZXlzKHJvb3RDb250ZXh0LnByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgLy8gZ3JhYiBlYWNoIHByb3BlcnR5IGFuZCBjaGVjayB0aGUgdHlwZSBvZiBpdFxuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSByb290Q29udGV4dC5wcm9wZXJ0aWVzW2tleV07XG5cbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eS5ub25Sb290SW5oZXJpdGFibGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCBhIGxpbmtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eS50eXBlICE9PSBcImxpbmtcIikge1xuICAgICAgICAgICAgICAvLyBjb250aW51ZVxuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSB3ZSBoYXZlIGEgcHJvcGVydHkgd2UgY2FuIHVzZVxuICAgICAgICAgICAgbGlua1Byb3BlcnRpZXNUb1VzZS5wdXNoKHtcbiAgICAgICAgICAgICAgdmFsdWU6IGtleSxcbiAgICAgICAgICAgICAgbGFiZWw6IHByb3BlcnR5LmxhYmVsIHx8IGtleSxcbiAgICAgICAgICAgICAgcHJpbWFyeTogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFuZCB0aGUgdmFsdWUgb2Ygc3VjaCBpcyBub3QgaW4gdGhlIGxpc3RcbiAgICAgICAgaWYgKChwcm9wcy5lbGVtZW50IGFzIElMaW5rKS50aHJlZiAmJiAhbGlua1Byb3BlcnRpZXNUb1VzZS5zb21lKChwKSA9PiBwLnZhbHVlID09PSAocHJvcHMuZWxlbWVudCBhcyBJTGluaykudGhyZWYpKSB7XG4gICAgICAgICAgLy8gd2UgYWRkIGl0XG4gICAgICAgICAgbGlua1Byb3BlcnRpZXNUb1VzZS5wdXNoKHtcbiAgICAgICAgICAgIHZhbHVlOiAocHJvcHMuZWxlbWVudCBhcyBJTGluaykudGhyZWYsXG4gICAgICAgICAgICBsYWJlbDogKHByb3BzLmVsZW1lbnQgYXMgSUxpbmspLnRocmVmLFxuICAgICAgICAgICAgcHJpbWFyeTogZmFsc2UsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRFbGVtZW50SHJlZigocHJvcHMuZWxlbWVudCBhcyBJTGluaykuaHJlZiB8fCBcIlwiKTtcbiAgICAgICAgc2V0TGlua09wdGlvbnMobGlua1Byb3BlcnRpZXNUb1VzZSk7XG4gICAgICB9LCBbcHJvcHMuZWxlbWVudCwgcHJvcHMuaXNTZWxlY3RlZF0pO1xuXG4gICAgICBjb25zdCBTZWxlY3RGaWVsZCA9IHByb3BzLkVsZW1lbnRXcmFwcGVyU2VsZWN0RmllbGQgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZDtcbiAgICAgIGNvbnN0IFRleHRGaWVsZCA9IHByb3BzLkVsZW1lbnRXcmFwcGVyVGV4dEZpZWxkIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyVGV4dEZpZWxkO1xuICAgICAgY29uc3QgRmllbGRXcmFwcGVyRm9yTW9yZU9wdGlvbnMgPSBwcm9wcy5GaWVsZFdyYXBwZXJGb3JNb3JlT3B0aW9ucyB8fCBEZWZhdWx0RmllbGRXcmFwcGVyRm9yTW9yZU9wdGlvbnM7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxFZGl0b3JEcm9wZG93blxuICAgICAgICAgIERyb3Bkb3duQ29tcG9uZW50PXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudH1cbiAgICAgICAgICBEcm9wZG93bkNvbXBvbmVudEJveD17cHJvcHMuRHJvcGRvd25Db21wb25lbnRCb3h9XG4gICAgICAgICAgRHJvcGRvd25Db21wb25lbnRXcmFwcGVyPXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudFdyYXBwZXJ9XG4gICAgICAgICAgZHJvcGRvd25Db21wb25lbnRXcmFwcGVyVGFnPVwic3BhblwiXG4gICAgICAgICAgaXNPcGVuPXtwcm9wcy5pc1NlbGVjdGVkfVxuICAgICAgICAgIGRyb3Bkb3duPXtcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgICB2YWx1ZT17ZWxlbWVudEhyZWZ9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2VCeUV2ZW50PXt1cGRhdGVFbGVtZW50SHJlZn1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZUJ5VmFsdWU9e3VwZGF0ZUVsZW1lbnRIcmVmQn1cbiAgICAgICAgICAgICAgICBsYWJlbD17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuc2V0TGluay5sYWJlbH1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ISEocHJvcHMuZWxlbWVudCBhcyBJTGluaykudGhyZWZ9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e1xuICAgICAgICAgICAgICAgICAgcHJvcHMuZmVhdHVyZVN1cHBvcnQuc3VwcG9ydHNFeHRlcm5hbExpbmtzID9cbiAgICAgICAgICAgICAgICAgICAgKHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuc2V0TGluay5wbGFjZWhvbGRlciA6XG4gICAgICAgICAgICAgICAgICAgIChwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLnNldExpbmsucGxhY2Vob2xkZXJMb2NhbE9ubHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWQ9XCJsaW5rLWhyZWZcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGlua09wdGlvbnMubGVuZ3RoID9cbiAgICAgICAgICAgICAgICAgIDxGaWVsZFdyYXBwZXJGb3JNb3JlT3B0aW9ucyBsYWJlbD17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuc2V0TGluay50ZW1wbGF0ZWR9PlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICBpZD1cImxpbmstdGhyZWZcIlxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXsocHJvcHMuZWxlbWVudCBhcyBJTGluaykudGhyZWYgfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuc2V0TGluay50ZW1wbGF0ZWRMYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17KHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuc2V0TGluay50ZW1wbGF0ZWRQbGFjZWhvbGRlcn1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUJ5RXZlbnQ9e3VwZGF0ZUVsZW1lbnRUSHJlZn1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZUJ5VmFsdWU9e3VwZGF0ZUVsZW1lbnRUSHJlZkJ9XG4gICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUVtcHR5PXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e1t7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogKHByb3BzLmJhc2VJMThuIGFzIElXcmFwcGVySTE4blJpY2hUZXh0SW5mbykuc2V0TGluay50ZW1wbGF0ZWRVbnNwZWNpZmllZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgIH1dLmNvbmNhdChsaW5rT3B0aW9ucy5tYXAoKHYpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdHlwZW9mIHYubGFiZWwgPT09IFwiZnVuY3Rpb25cIiA/IHYubGFiZWwoKSA6IHYubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdi52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnk6IHYucHJpbWFyeSxcbiAgICAgICAgICAgICAgICAgICAgICB9KSkpfVxuICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Qmx1cj17bnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICB1bmJsdXI9e251bGx9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0ZpZWxkV3JhcHBlckZvck1vcmVPcHRpb25zPlxuICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICB9XG4gICAgICAgID5cbiAgICAgICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgICAgIDwvRWRpdG9yRHJvcGRvd24+XG4gICAgICApO1xuICAgIH0sXG4gICAgdmlkZW86IChwcm9wczogSURlZmF1bHRTbGF0ZUVsZW1lbnRXcmFwcGVyc1Byb3BzKSA9PiB7XG4gICAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IHVzZVN0YXRlKGdldFZpZGVvVVJMKHByb3BzLmVsZW1lbnQgYXMgSVZpZGVvKSk7XG4gICAgICBjb25zdCBbdmFsaWQsIHNldFZhbGlkXSA9IHVzZVN0YXRlKHRydWUpO1xuXG4gICAgICBjb25zdCB1cGRhdGVWaWRlb1VSTEIgPSB1c2VDYWxsYmFjaygobmV3Vjogc3RyaW5nKSA9PiB7XG4gICAgICAgIHNldFZhbHVlKG5ld1YpO1xuICAgICAgICBzZXRWYWxpZChwcm9wcy5oZWxwZXJzLnVwZGF0ZVZpZGVvKG5ld1YpKTtcbiAgICAgIH0sIFtdKTtcblxuICAgICAgY29uc3QgdXBkYXRlVmlkZW9VUkwgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICAgICAgdXBkYXRlVmlkZW9VUkxCKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH0sIFt1cGRhdGVWaWRlb1VSTEJdKTtcblxuICAgICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgc2V0VmFsdWUoZ2V0VmlkZW9VUkwocHJvcHMuZWxlbWVudCBhcyBJVmlkZW8pKTtcbiAgICAgIH0sIFtwcm9wcy5lbGVtZW50XSk7XG5cbiAgICAgIGNvbnN0IFRleHRGaWVsZCA9IHByb3BzLkVsZW1lbnRXcmFwcGVyVGV4dEZpZWxkIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyVGV4dEZpZWxkO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8RWRpdG9yRHJvcGRvd25cbiAgICAgICAgICBEcm9wZG93bkNvbXBvbmVudD17cHJvcHMuRHJvcGRvd25Db21wb25lbnR9XG4gICAgICAgICAgRHJvcGRvd25Db21wb25lbnRCb3g9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50Qm94fVxuICAgICAgICAgIERyb3Bkb3duQ29tcG9uZW50V3JhcHBlcj17cHJvcHMuRHJvcGRvd25Db21wb25lbnRXcmFwcGVyfVxuICAgICAgICAgIGRyb3Bkb3duPXtcbiAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgICAgICBvbkNoYW5nZUJ5RXZlbnQ9e3VwZGF0ZVZpZGVvVVJMfVxuICAgICAgICAgICAgICBvbkNoYW5nZUJ5VmFsdWU9e3VwZGF0ZVZpZGVvVVJMQn1cbiAgICAgICAgICAgICAgbGFiZWw9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmxvYWRWaWRlby5sYWJlbH1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9eyhwcm9wcy5iYXNlSTE4biBhcyBJV3JhcHBlckkxOG5SaWNoVGV4dEluZm8pLmxvYWRWaWRlby5wbGFjZWhvbGRlcn1cbiAgICAgICAgICAgICAgaWQ9XCJ2aWRlby11cmxcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgICAgZHJvcGRvd25Db21wb25lbnRXcmFwcGVyVGFnPVwiZGl2XCJcbiAgICAgICAgICBnb0ludG9UcmVlRGVwdGg9ezF9XG4gICAgICAgICAgaXNPcGVuPXtwcm9wcy5pc1NlbGVjdGVkfVxuICAgICAgICA+XG4gICAgICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgICAgICA8L0VkaXRvckRyb3Bkb3duPlxuICAgICAgKTtcbiAgICB9LFxuICAgIGltYWdlOiAocHJvcHM6IElEZWZhdWx0U2xhdGVFbGVtZW50V3JhcHBlcnNQcm9wcykgPT4ge1xuICAgICAgY29uc3QgW2FsdCwgc2V0QWx0XSA9IHVzZVN0YXRlKChwcm9wcy5lbGVtZW50IGFzIElJbWFnZSkuYWx0IHx8IFwiXCIpO1xuXG4gICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzZXRBbHQoKHByb3BzLmVsZW1lbnQgYXMgSUltYWdlKS5hbHQgfHwgXCJcIik7XG4gICAgICB9LCBbcHJvcHMuZWxlbWVudF0pO1xuXG4gICAgICBjb25zdCB1cGRhdGVBbHRCID0gdXNlQ2FsbGJhY2soKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHByb3BzLmhlbHBlcnMuUmVhY3RFZGl0b3IuZmluZFBhdGgocHJvcHMuaGVscGVycy5lZGl0b3IsIHByb3BzLmVsZW1lbnQpO1xuICAgICAgICBwcm9wcy5oZWxwZXJzLnNldCh7XG4gICAgICAgICAgYWx0OiBuZXdWYWx1ZSB8fCBudWxsLFxuICAgICAgICB9IGFzIGFueSwgcGF0aCk7XG4gICAgICAgIHNldEFsdChuZXdWYWx1ZSk7XG4gICAgICB9LCBbXSk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZUFsdCA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgICB1cGRhdGVBbHRCKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH0sIFt1cGRhdGVBbHRCXSk7XG5cbiAgICAgIGNvbnN0IFRleHRGaWVsZCA9IHByb3BzLkVsZW1lbnRXcmFwcGVyVGV4dEZpZWxkIHx8IERlZmF1bHRXcmFwcGVyRHJhd2VyVGV4dEZpZWxkO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8RWRpdG9yRHJvcGRvd25cbiAgICAgICAgICBEcm9wZG93bkNvbXBvbmVudD17cHJvcHMuRHJvcGRvd25Db21wb25lbnR9XG4gICAgICAgICAgRHJvcGRvd25Db21wb25lbnRCb3g9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50Qm94fVxuICAgICAgICAgIERyb3Bkb3duQ29tcG9uZW50V3JhcHBlcj17cHJvcHMuRHJvcGRvd25Db21wb25lbnRXcmFwcGVyfVxuICAgICAgICAgIGRyb3Bkb3duPXtcbiAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgdmFsdWU9e2FsdH1cbiAgICAgICAgICAgICAgb25DaGFuZ2VCeUV2ZW50PXt1cGRhdGVBbHR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlQnlWYWx1ZT17dXBkYXRlQWx0Qn1cbiAgICAgICAgICAgICAgbGFiZWw9e3Byb3BzLmJhc2VJMThuLmFsdH1cbiAgICAgICAgICAgICAgaWQ9XCJpbWFnZS1hbHRcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgICAgZHJvcGRvd25Db21wb25lbnRXcmFwcGVyVGFnPVwiZGl2XCJcbiAgICAgICAgICBnb0ludG9UcmVlRGVwdGg9eyhwcm9wcy5lbGVtZW50IGFzIElJbWFnZSkuc3RhbmRhbG9uZSA/IG51bGwgOiAxfVxuICAgICAgICAgIGlzT3Blbj17cHJvcHMuaXNTZWxlY3RlZH1cbiAgICAgICAgPlxuICAgICAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgPC9FZGl0b3JEcm9wZG93bj5cbiAgICAgICk7XG4gICAgfSxcbiAgICB0ZDogVGRBbmRUaCBhcyBhbnksXG4gICAgdGg6IFRkQW5kVGggYXMgYW55LFxuICAgIHRpdGxlOiAocHJvcHM6IElEZWZhdWx0U2xhdGVFbGVtZW50V3JhcHBlcnNQcm9wcykgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlVGl0bGVUeXBlQiA9IHVzZUNhbGxiYWNrKChuZXdWOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHByb3BzLmhlbHBlcnMuUmVhY3RFZGl0b3IuZmluZFBhdGgocHJvcHMuaGVscGVycy5lZGl0b3IsIHByb3BzLmVsZW1lbnQpO1xuICAgICAgICBwcm9wcy5oZWxwZXJzLnNldCh7XG4gICAgICAgICAgdGl0bGVUeXBlOiBuZXdWIHx8IG51bGwsXG4gICAgICAgIH0gYXMgYW55LCBwYXRoKTtcbiAgICAgIH0sIFtdKTtcblxuICAgICAgY29uc3QgdXBkYXRlVGl0bGVUeXBlID0gdXNlQ2FsbGJhY2soKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgICAgICB1cGRhdGVUaXRsZVR5cGVCKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH0sIFt1cGRhdGVUaXRsZVR5cGVCXSk7XG5cbiAgICAgIGNvbnN0IFNlbGVjdEZpZWxkID0gcHJvcHMuRWxlbWVudFdyYXBwZXJTZWxlY3RGaWVsZCB8fCBEZWZhdWx0V3JhcHBlckRyYXdlclNlbGVjdEZpZWxkO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8RWRpdG9yRHJvcGRvd25cbiAgICAgICAgICBEcm9wZG93bkNvbXBvbmVudD17cHJvcHMuRHJvcGRvd25Db21wb25lbnR9XG4gICAgICAgICAgRHJvcGRvd25Db21wb25lbnRCb3g9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50Qm94fVxuICAgICAgICAgIERyb3Bkb3duQ29tcG9uZW50V3JhcHBlcj17cHJvcHMuRHJvcGRvd25Db21wb25lbnRXcmFwcGVyfVxuICAgICAgICAgIGRyb3Bkb3duQ29tcG9uZW50V3JhcHBlclRhZz1cImRpdlwiXG4gICAgICAgICAgaXNPcGVuPXtwcm9wcy5pc1NlbGVjdGVkfVxuICAgICAgICAgIGRyb3Bkb3duPXtcbiAgICAgICAgICAgIDxTZWxlY3RGaWVsZFxuICAgICAgICAgICAgICBpZD1cInRpdGxlLXR5cGVcIlxuICAgICAgICAgICAgICBsYWJlbD17cHJvcHMuYmFzZUkxOG4udHlwZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2VCeUV2ZW50PXt1cGRhdGVUaXRsZVR5cGV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlQnlWYWx1ZT17dXBkYXRlVGl0bGVUeXBlQn1cbiAgICAgICAgICAgICAgb3B0aW9ucz17W1wiaDFcIiwgXCJoMlwiLCBcImgzXCIsIFwiaDRcIiwgXCJoNVwiLCBcImg2XCJdLm1hcCgoRWxlbWVudDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiA8RWxlbWVudD57cHJvcHMuYmFzZUkxOG4udGl0bGV9PC9FbGVtZW50PixcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBFbGVtZW50ID8gRWxlbWVudCA6IFwiIC0gXCIsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgcmVzZXRCbHVyPXtudWxsfVxuICAgICAgICAgICAgICB1bmJsdXI9e251bGx9XG4gICAgICAgICAgICAgIHZhbHVlPXsocHJvcHMuZWxlbWVudCBhcyBJVGl0bGUpLnRpdGxlVHlwZSB8fCBcImgxXCJ9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIH1cbiAgICAgICAgPlxuICAgICAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgPC9FZGl0b3JEcm9wZG93bj5cbiAgICAgICkgYXMgYW55O1xuICAgIH0sXG4gICAgaW5saW5lOiAocHJvcHM6IElEZWZhdWx0U2xhdGVFbGVtZW50V3JhcHBlcnNQcm9wcykgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBwcm9wcy5lbGVtZW50LnRleHRDb250ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBwcm9wcy5jaGlsZHJlbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICg8VGV4dFdyYXBwZXIgey4uLnByb3BzfSAvPikgYXMgYW55O1xuICAgIH0sXG4gICAgXCJ2b2lkLWJsb2NrXCI6IChwcm9wczogSURlZmF1bHRTbGF0ZUVsZW1lbnRXcmFwcGVyc1Byb3BzKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHByb3BzLmVsZW1lbnQuaHRtbCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gcHJvcHMuY2hpbGRyZW47XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoPEhUTUxXcmFwcGVyIHsuLi5wcm9wc30gLz4pIGFzIGFueTtcbiAgICB9LFxuICAgIGNvbnRhaW5lcjogKHByb3BzOiBJRGVmYXVsdFNsYXRlRWxlbWVudFdyYXBwZXJzUHJvcHMpID0+IHtcbiAgICAgIGNvbnN0IHVwZGF0ZUNvbnRhaW5lclR5cGVCID0gdXNlQ2FsbGJhY2soKG5ld1Y6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gcHJvcHMuaGVscGVycy5SZWFjdEVkaXRvci5maW5kUGF0aChwcm9wcy5oZWxwZXJzLmVkaXRvciwgcHJvcHMuZWxlbWVudCk7XG4gICAgICAgIHByb3BzLmhlbHBlcnMuc2V0KHtcbiAgICAgICAgICBjb250YWluZXJUeXBlOiBuZXdWIHx8IG51bGwsXG4gICAgICAgIH0gYXMgYW55LCBwYXRoKTtcbiAgICAgIH0sIFtdKTtcblxuICAgICAgY29uc3QgdXBkYXRlQ29udGFpbmVyVHlwZSA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHtcbiAgICAgICAgdXBkYXRlQ29udGFpbmVyVHlwZUIoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfSwgW3VwZGF0ZUNvbnRhaW5lclR5cGVCXSk7XG5cbiAgICAgIGlmICghcHJvcHMuZmVhdHVyZVN1cHBvcnQuYXZhaWxhYmxlQ29udGFpbmVycy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmNoaWxkcmVuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBTZWxlY3RGaWVsZCA9IHByb3BzLkVsZW1lbnRXcmFwcGVyU2VsZWN0RmllbGQgfHwgRGVmYXVsdFdyYXBwZXJEcmF3ZXJTZWxlY3RGaWVsZDtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEVkaXRvckRyb3Bkb3duXG4gICAgICAgICAgRHJvcGRvd25Db21wb25lbnQ9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50fVxuICAgICAgICAgIERyb3Bkb3duQ29tcG9uZW50Qm94PXtwcm9wcy5Ecm9wZG93bkNvbXBvbmVudEJveH1cbiAgICAgICAgICBEcm9wZG93bkNvbXBvbmVudFdyYXBwZXI9e3Byb3BzLkRyb3Bkb3duQ29tcG9uZW50V3JhcHBlcn1cbiAgICAgICAgICBkcm9wZG93bkNvbXBvbmVudFdyYXBwZXJUYWc9XCJzcGFuXCJcbiAgICAgICAgICBpc09wZW49e3Byb3BzLmlzU2VsZWN0ZWR9XG4gICAgICAgICAgZHJvcGRvd249e1xuICAgICAgICAgICAgPFNlbGVjdEZpZWxkXG4gICAgICAgICAgICAgIGlkPVwiY29udGFpbmVyLXR5cGVcIlxuICAgICAgICAgICAgICBsYWJlbD17cHJvcHMuYmFzZUkxOG4udHlwZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2VCeUV2ZW50PXt1cGRhdGVDb250YWluZXJUeXBlfVxuICAgICAgICAgICAgICBvbkNoYW5nZUJ5VmFsdWU9e3VwZGF0ZUNvbnRhaW5lclR5cGVCfVxuICAgICAgICAgICAgICBvcHRpb25zPXtbe1xuICAgICAgICAgICAgICAgIGxhYmVsOiBcIiAtIFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICAgICAgICB9XS5jb25jYXQocHJvcHMuZmVhdHVyZVN1cHBvcnQuYXZhaWxhYmxlQ29udGFpbmVycyl9XG4gICAgICAgICAgICAgIHJlc2V0Qmx1cj17bnVsbH1cbiAgICAgICAgICAgICAgdW5ibHVyPXtudWxsfVxuICAgICAgICAgICAgICB2YWx1ZT17KHByb3BzLmVsZW1lbnQgYXMgSUNvbnRhaW5lcikuY29udGFpbmVyVHlwZSB8fCBcIlwifVxuICAgICAgICAgICAgICBkaXNwbGF5RW1wdHk9e3RydWV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIH1cbiAgICAgICAgPlxuICAgICAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgPC9FZGl0b3JEcm9wZG93bj5cbiAgICAgICkgYXMgYW55O1xuICAgIH1cbiAgfVxufSIsICIvKipcbiAqIFRoaXMgaXMgYSBkcm9wZG93biB0aGF0IGlzIHVzZWQgZm9yIGhhdmluZyBhbiBlZGl0b3IgZnVuY3Rpb25hbGl0eSBsaWtlXG4gKiB0b29sYmFyLCB1c2VkIGEgbG90IGluIHRoZSBmYXN0IHByb3RvdHlwaW5nIG1hdGVyaWFsIGVkaXRvclxuICovXG5cbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vKipcbiAqIFRoZSBjb21wb25lbnQgd3JhcHBlciB0byB1c2UsXG4gKiBzaG91bGQgc3VwcG9ydCBhIHJlZlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElEcm9wZG93bkNvbXBvbmVudFdyYXBwZXJQcm9wcyB7XG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSB0YWcgdGhlIGNvbXBvbmVudCBzaG91bGQgaGF2ZVxuICAgKi9cbiAgdGFnOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBleHRyYSBwcm9wcyB0aGUgY29tcG9uZW50IHdyYXBwZXIgc2hvdWxkIGhhdmVcbiAgICovXG4gIHByb3BzOiBhbnk7XG4gIC8qKlxuICAgKiBUaGUgY2hpbGRyZW4gaXQgaXMgd3JhcHBpbmdcbiAgICovXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmNvbnN0IERlZmF1bHREcm9wZG93bkNvbXBvbmVudFdyYXBwZXIgPSBSZWFjdC5mb3J3YXJkUmVmKChwcm9wczogSURyb3Bkb3duQ29tcG9uZW50V3JhcHBlclByb3BzLCByZWYpID0+IHtcbiAgY29uc3QgRWxlbWVudCA9IHByb3BzLnRhZztcbiAgcmV0dXJuIChcbiAgICA8RWxlbWVudFxuICAgICAgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JEcm9wZG93bkNvbnRlbnRXcmFwcGVyXCJcbiAgICAgIHsuLi5wcm9wcy5wcm9wc31cbiAgICAgIHJlZj17cmVmfVxuICAgID5cbiAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICA8L0VsZW1lbnQ+XG4gIClcbn0pO1xuXG5cbi8qKlxuICogVGhlIHByb3BzIGZvciB0aGUgZHJvcGRvd25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRWRpdG9yRHJvcGRvd24ge1xuICAvKipcbiAgICogd2V0aGVyIGl0IGlzIG9wZW5cbiAgICovXG4gIGlzT3BlbjogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFdoYXQgekluZGV4IHRvIHVzZSB3aGVuIHBvcHBpbmcgdXBcbiAgICovXG4gIHpJbmRleD86IG51bWJlcjtcbiAgLyoqXG4gICAqIHRoZSBjb250ZW50cyBvZiB0aGUgZHJvcGRvd24gaXRzZWxmXG4gICAqL1xuICBkcm9wZG93bjogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogVGhlIHRhZyB0aGUgY29tcG9uZW50IHdyYXBwZXIgc2hvdWxkIHVzZVxuICAgKi9cbiAgZHJvcGRvd25Db21wb25lbnRXcmFwcGVyVGFnPzogc3RyaW5nO1xuICAvKipcbiAgICogZXh0cmEgcHJvcHMgdGhlIGNvbXBvbmVudCB3cmFwcGVyIHNob3VsZCBoYXZlXG4gICAqL1xuICBkcm9wZG93bkNvbXBvbmVudFdyYXBwZXJQcm9wcz86IGFueTtcbiAgLyoqXG4gICAqIFRoZSBjb21wb25lbnQgdGhlIGRyb3Bkb3duIGlzIHVzaW5nIGFzIGEgd3JhcHBlclxuICAgKiBmb3IgdGhlIGVsZW1lbnRcbiAgICovXG4gIERyb3Bkb3duQ29tcG9uZW50V3JhcHBlcj86IFJlYWN0LkNvbXBvbmVudFR5cGU8SURyb3Bkb3duQ29tcG9uZW50V3JhcHBlclByb3BzPjtcbiAgLyoqXG4gICAqIHdoZXRoZXIgdGhlIGNvbXBvbmVudCB3cmFwcGVyIHNob3VsZCBiZSBoaWRkZW5cbiAgICovXG4gIGRyb3Bkb3duQ29tcG9uZW50V3JhcHBlckhpZGRlbj86IGJvb2xlYW47XG4gIC8qKlxuICAgKiB3aGV0aGVyIHRvIHVzZSB0aGUgZHJvcGRvd24gYXMgc2l6YWJsZVxuICAgKi9cbiAgZHJvcGRvd25TaXphYmxlPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIHRoZSBlbGVtZW50IHRoYXQgaXMgdG8gYmUgcmVuZGVyZWRcbiAgICovXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gIC8qKlxuICAgKiB0aGUgZHJvcGRvd24gd2lsbCBhbmNob3IgaXRzZWxmIG5vcm1hbGx5IHRvIHRoZSBuZXh0IGF2YWlsYWJsZSBlbGVtZW50IG5vZGVcbiAgICogZWl0aGVyIHRoZSBmaXJzdCBvciB0aGUgbGFzdCBkZXBlbmRpbmcgb24gdGhlaXIgcG9zaXRpb24sIHVzZSB0aGlzIHRvIHR1bmUgdGhlIGRpcmVjdGlvblxuICAgKiBmb3IgZXhhbXBsZSB3aXRoIGEgdmFsdWUgb2YgMlxuICAgKiBcbiAgICogPGRpdiBjbGFzcz1cIndyYXBwZXJcIj5cbiAgICogICA8ZGl2IGNsYXNzPVwiZWxlbWVudC1pbi1xdWVzdGlvblwiPlxuICAgKiAgICAgPGRpdiBjbGFzcz1cInNvbWV0aGluZ1wiPlxuICAgKiAgICAgICA8ZGl2IGNsYXNzPVwic29tZXRoaW5nLWVsc2VcIj5cbiAgICogICAgICAgPC9kaXY+XG4gICAqICAgICA8L2Rpdj5cbiAgICogICA8L2Rpdj5cbiAgICogPC9kaXY+XG4gICAqIFxuICAgKiBpdCB3aWxsIHVzZSBcInNvbWV0aGluZy1lbHNlXCIgYXMgdGhlIHBvc2l0aW9uaW5nIGVsZW1lbnQsIGhvd2V2ZXIgcmV2ZXJzZSB2YWx1ZXMgYXJlIGFsc28gdmFsaWRcbiAgICogXG4gICAqIDxkaXYgY2xhc3M9XCJwYXJlbnRcIj5cbiAgICogICA8ZGl2IGNsYXNzPVwid3JhcHBlclwiPlxuICAgKiAgICAgPGRpdiBjbGFzcz1cImVsZW1lbnQtaW4tcXVlc3Rpb25cIj5cbiAgICogICAgICAgPGRpdiBjbGFzcz1cInNvbWV0aGluZ1wiPlxuICAgKiAgICAgICAgIDxkaXYgY2xhc3M9XCJzb21ldGhpbmctZWxzZVwiPlxuICAgKiAgICAgICAgIDwvZGl2PlxuICAgKiAgICAgICA8L2Rpdj5cbiAgICogICAgIDwvZGl2PlxuICAgKiAgIDwvZGl2PlxuICAgKiA8L2Rpdj5cbiAgICogXG4gICAqIHdpdGggYSB2YWx1ZSBvZiAtMiBcInBhcmVudFwiIHdpbGwgYmUgdXNlZCBpbnN0ZWFkXG4gICAqL1xuICBnb0ludG9UcmVlRGVwdGg/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIGlmIHRydWUgdGhlIGVsZW1lbnQgd2lsbCB0cmlnZ2VyIGEgb25DbG9zZSBldmVudCB3aGVuIGFueXRoaW5nXG4gICAqIG91dHNpZGUgb2YgaXQgaXMgY2xpY2tlZCBvciB0b3VjaGVkXG4gICAqL1xuICBjbG9zZWFibGU/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBvbmx5IHJlbGV2YW50IGlmIGNsb3NlYWJsZSBpcyB0cnVlLCB3aWxsIGJlIGNhbGxlZCBvbmNlIHRoZSBlbGVtZW50XG4gICAqIGdldHMgdHJpZ2dlcmVkIGJ5IHNvbWV0aGluZyBvdXRzaWRlIG9mIGl0XG4gICAqL1xuICBvbkNsb3NlPzogKCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogSW5zdGVhZCBvZiBjcmVhdGluZyBhIGRyb3Bkb3duIGRpcmVjdGx5IGFzIGl0cyBjb250YWluZXJcbiAgICogaXQgd2lsbCBwb3NpdGlvbiBhIGNvbnRhaW5lciBpbnN0ZWFkXG4gICAqL1xuICBjb250YWluV2l0aGluQm94PzogYm9vbGVhbjtcblxuICAvKipcbiAgICogd2hlcmUgdG8gcGxhY2UgdGhlIHBvcnRhbCwgYnkgZGVmYXVsdCB0aGUgaHRtbCBib2R5XG4gICAqL1xuICBwb3J0YWxFbGVtZW50PzogSFRNTEVsZW1lbnQ7XG5cbiAgLyoqXG4gICAqIEJ5IGRlZmF1bHQgd2hldGhlciB0aGUgZWxlbWVudCB0aGF0IHJlcHJlc2VudHMgdGhlIG1lbnUgb3ZlcmZsb3dzIHRoZSB3aW5kb3cgaXMgY2FsY3VsYXRlZFxuICAgKiB1c2luZyB0aGUgZm9sbG93aW5nIGZvcm11bGFcbiAgICogXG4gICAqIDEuIGNhbGN1bGF0ZSB0aGUgdG9wIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBlbnRpcmUgZG9jdW1lbnQgdG9wICsgZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50LnNjcm9sbFRvcFxuICAgKiAyLiB1c2UgdGhlIGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgdG8ga25vdyBob3cgbXVjaCBzcGFjZSB3ZSBoYXZlIGxlZnQgYW5kIHN1YnN0cmFjdCB0aGF0IHRvcFxuICAgKiAgIDIuMSB3ZSByZW1vdmUgY3VycmVudG92ZXJmbG93IGJlY2F1c2UgaW4gY2FzZSB3ZSBhbHJlYWR5IGhhdmUgYWRkZWQgb3ZlcmZsb3cgc3BhY2VyIHRvIGFkZCBmb3IgdGhhdCBzcGFjZVxuICAgKiAzLiBjb21wYXJlIHRoYXQgbnVtYmVyIHRvIHRoZSBoZWlnaHRcbiAgICogNC4gcmV0dXJucyBieSBob3cgbWFueSBwaXhlcyBpdCBvdmVyZmxvd3MsIG5lZ2F0aXZlIG51bWJlcnMgb3IgemVybyBtZWFucyBubyBvdmVyZmxvdywgb3RoZXJ3aXNlIGl0IG92ZXJmbG93cyBhbmQgYSBzcGFjZXIgbmVlZHMgdG8gYmUgYnVpbHRcbiAgICogQHBhcmFtIGVsZW1lbnQgXG4gICAqIEByZXR1cm5zIGJ5IGhvdyBtYW55IHBpeGVscyBpdCBvdmVyZmxvd3NcbiAgICovXG4gIHBvcnRhbEVsZW1lbnRPdmVyZmxvd0NhbGN1bGF0b3I/OiAodG9wOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRvIGdlbmVyYXRlIGEgc3BhY2VyIHRoYXQgd2lsbCBiZSBhdHRhY2hlZCB0byB0aGUgYm9keVxuICAgKiBcbiAgICogYmVjYXVzZSBvZiB0aGUgd2F5IHRoZSBzdGFuZGFyZCBpdGVtaXplIGFwcCBpcyBnZW5lcmF0ZWQgd2hlcmUgI2FwcCBhbmQgI21haW4gYXJlIG9mIGVmZmVjdGl2ZSBoZWlnaHQgb2YgMTAwJVxuICAgKiB0aGlzIGZvcm11bGEgdXNlcyBkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0ICsgb3ZlcmZsb3cgKzI1IGZvciB0aGUgaGVpZ2h0XG4gICAqIHJhdGhlciB0aGFuIHVzaW5nIHRoZSBvdmVyZmxvdyBzcGVjaWZpYyB2YWx1ZVxuICAgKiBcbiAgICogQHBhcmFtIG92ZXJmbG93IFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIHBvcnRhbEVsZW1lbnRPdmVyZmxvd1NwYWNlckhlaWdodENhbGN1bGF0b3I/OiAob3ZlcmZsb3c6IG51bWJlcikgPT4gbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUbyBnZW5lcmF0ZSBhIHNwYWNlciB0aGF0IHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGJvZHlcbiAgICogXG4gICAqIEBwYXJhbSBoZWlnaHQgXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgcG9ydGFsRWxlbWVudE92ZXJmbG93U3BhY2VyR2VuZXJhdG9yPzogKGhlaWdodDogbnVtYmVyLCByZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRWxlbWVudD4pID0+IFJlYWN0LlJlYWN0Tm9kZTtcblxuICAvKipcbiAgICogVGhlIGRyb3Bkb3duIGNvbXBvbmVudCB0byB1c2VcbiAgICogbm90ZSB0aGF0IGl0IHNob3VsZCBzdXBwb3J0IGEgcmVmIG9iamVjdCBmb3IgdGhpc1xuICAgKi9cbiAgRHJvcGRvd25Db21wb25lbnQ/OiBSZWFjdC5Db21wb25lbnRUeXBlPElEcm9wZG93bkNvbXBvbmVudFByb3BzPjtcblxuICAvKipcbiAgICogUmVwcmVzZW50cyB0aGUgb3B0aW9uYWwgcGFyZW50IGJveCB0aGF0IHNvbWUgZWxlbWVudHMgY2hvb3NlIHRvIHVzZVxuICAgKi9cbiAgRHJvcGRvd25Db21wb25lbnRCb3g/OiBSZWFjdC5Db21wb25lbnRUeXBlPElEcm9wZG93bkNvbXBvbmVudEJveFByb3BzPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRHJvcGRvd25Db21wb25lbnRQcm9wcyB7XG4gIC8qKlxuICAgKiBTaXphYmxlIHJlcHJlc2VudHMgd2hldGhlciBpdCBzaG91bGQgYWxsb3cgYSBkcm9wZG93biB0aGF0IGNhbiBjaGFuZ2UgaW4gc2l6ZVxuICAgKi9cbiAgc2l6YWJsZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIHdoZXRoZXIgaXQgd2lsbCBiZSB1bHRpbWF0ZWx5IGNvbnRhaW5lZCB3aXRoaW4gdGhlIHBhcmVudCBib3hcbiAgICovXG4gIGNvbnRhaW5lZFdpdGhpbkJveDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFBhc3MgdGhlc2UgcHJvcHMgdG8gdGhlIGNoaWxkXG4gICAqIHRoZXkgYXJlIGltcG9ydGFudFxuICAgKi9cbiAgcHJvcHM6IGFueTtcbiAgLyoqXG4gICAqIFRoZSBjb250ZW50cyBvZiB0aGUgZHJvcGRvd24gaXRzZWxmIHRvIHNob3dcbiAgICovXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURyb3Bkb3duQ29tcG9uZW50Qm94UHJvcHMge1xuICAvKipcbiAgICogU2l6YWJsZSByZXByZXNlbnRzIHdoZXRoZXIgaXQgc2hvdWxkIGFsbG93IGEgZHJvcGRvd24gdGhhdCBjYW4gY2hhbmdlIGluIHNpemVcbiAgICovXG4gIHNpemFibGU6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBQYXNzIHRoZXNlIHByb3BzIHRvIHRoZSBjaGlsZFxuICAgKiB0aGV5IGFyZSBpbXBvcnRhbnRcbiAgICovXG4gIHByb3BzOiBhbnk7XG4gIC8qKlxuICAgKiBUaGUgY29udGVudHMgb2YgdGhlIGRyb3Bkb3duIGl0c2VsZiB0byBzaG93XG4gICAqL1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xufVxuXG5jb25zdCBEZWZhdWx0RHJvcGRvd25Db21wb25lbnQgPSBSZWFjdC5mb3J3YXJkUmVmKChwcm9wczogSURyb3Bkb3duQ29tcG9uZW50UHJvcHMsIHJlZikgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17cHJvcHMuY29udGFpbmVkV2l0aGluQm94ID8gXCJzbGF0ZUVkaXRvckRyb3Bkb3duQ29tcG9uZW50Q29udGFpbmVkXCIgOiBcInNsYXRlRWRpdG9yRHJvcGRvd25Db21wb25lbnRcIn1cbiAgICAgIHsuLi5wcm9wcy5wcm9wc31cbiAgICAgIHJlZj17cmVmfVxuICAgID5cbiAgICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICA8L2Rpdj5cbiAgKVxufSk7XG5cbmNvbnN0IERlZmF1bHREcm9wZG93bkNvbXBvbmVudEJveCA9IFJlYWN0LmZvcndhcmRSZWYoKHByb3BzOiBJRHJvcGRvd25Db21wb25lbnRCb3hQcm9wcywgcmVmKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPVwic2xhdGVFZGl0b3JEcm9wZG93bkNvbXBvbmVudENvbnRhaW5lckJveFwiXG4gICAgICB7Li4ucHJvcHMucHJvcHN9XG4gICAgICByZWY9e3JlZn1cbiAgICA+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9kaXY+XG4gIClcbn0pO1xuXG5mdW5jdGlvbiBkZWZhdWx0UG9ydGFsRWxlbWVudE92ZXJmbG93Q2FsY3VsYXRvcih0b3A6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCByZWZlcmVuY2UgPSBkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQ7XG4gIGNvbnN0IHBvc2l0aW9uVG9wT3ZlcmFsbCA9IHRvcCArIHJlZmVyZW5jZS5zY3JvbGxUb3A7XG4gIGNvbnN0IGF2YWlsYWJsZUhlaWdodCA9IHJlZmVyZW5jZS5zY3JvbGxIZWlnaHQ7XG4gIGNvbnN0IHNwYWNlUmVtYWluaW5nID0gYXZhaWxhYmxlSGVpZ2h0IC0gcG9zaXRpb25Ub3BPdmVyYWxsO1xuICByZXR1cm4gaGVpZ2h0IC0gc3BhY2VSZW1haW5pbmc7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRQb3J0YWxFbGVtZW50T3ZlcmZsb3dTcGFjZXJIZWlnaHRDYWxjdWxhdG9yKG92ZXJmbG93OiBudW1iZXIpIHtcbiAgY29uc3QgcmVmZXJlbmNlID0gZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50O1xuICByZXR1cm4gcmVmZXJlbmNlLnNjcm9sbEhlaWdodCAtIHdpbmRvdy5pbm5lckhlaWdodCArIG92ZXJmbG93O1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0UG9ydGFsRWxlbWVudE92ZXJmbG93U3BhY2VyR2VuZXJhdG9yKGhlaWdodDogbnVtYmVyLCByZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRWxlbWVudD4pIHtcbiAgcmV0dXJuICg8ZGl2IHJlZj17cmVmIGFzIGFueX0gc3R5bGU9e3sgaGVpZ2h0LCBiYWNrZ3JvdW5kQ29sb3I6IFwiI2VlZVwiIH19PjwvZGl2Pilcbn1cblxuZnVuY3Rpb24gaXNJbkRyb3Bkb3duT3JXcmFwcGVyKFxuICBlbGU6IEhUTUxFbGVtZW50LFxuICBkcm9wZG93bkl0c2VsZjogSFRNTEVsZW1lbnQsXG4gIHdyYXBwZXJDb250YWluZXI6IEhUTUxFbGVtZW50LFxuKTogYm9vbGVhbiB7XG4gIGlmIChcbiAgICBlbGUgPT09IGRyb3Bkb3duSXRzZWxmIHx8XG4gICAgZWxlID09PSB3cmFwcGVyQ29udGFpbmVyXG4gICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKGVsZS5wYXJlbnRFbGVtZW50KSB7XG4gICAgcmV0dXJuIGlzSW5Ecm9wZG93bk9yV3JhcHBlcihlbGUucGFyZW50RWxlbWVudCwgZHJvcGRvd25JdHNlbGYsIHdyYXBwZXJDb250YWluZXIpO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRWRpdG9yRHJvcGRvd24ocHJvcHM6IElFZGl0b3JEcm9wZG93bikge1xuICBjb25zdCBib3hSZWYgPSB1c2VSZWY8SFRNTEVsZW1lbnQ+KCk7XG4gIGNvbnN0IGRyb3Bkb3duUmVmID0gdXNlUmVmPEhUTUxFbGVtZW50PigpO1xuICAvLyBjYW5ub3QgcmVseSBpbiByZWFjdCBzdGF0ZSBmb3IgdGhpcyBiZWNhdXNlIHRoZSBzdGF0ZSBkb2VzIG5vdCByZXByZXNlbnQgdGhlIHJlYWxpdHkgb2YgdGhlIGNvbXBvbmVudFxuICAvLyBpbiB0aGUgRE9NXG4gIGNvbnN0IG92ZXJmbG93RWxlbWVudCA9IHVzZVJlZjxIVE1MRWxlbWVudD4oKTtcbiAgY29uc3QgW3Bvcywgc2V0UG9zXSA9IHVzZVN0YXRlPFtudW1iZXIsIG51bWJlciwgbnVtYmVyXT4obnVsbCk7XG5cbiAgY29uc3QgW292ZXJmbG93U3BhY2VySGVpZ2h0LCBzZXRPdmVyZmxvd1NwYWNlckhlaWdodF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2N1cnJlbnRPdmVyZmxvdywgc2V0Q3VycmVudE92ZXJmbG93XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBjb25ncnVlbnRUaW1lciA9IHVzZVJlZihudWxsIGFzIGFueSk7XG5cbiAgY29uc3QgcmVjYWxjdWxhdGVPdmVyZmxvdyA9IHVzZUNhbGxiYWNrKCh0b3AsIGhlaWdodCkgPT4ge1xuICAgIC8vIG92ZXJmbG93IGlzIG9ubHkgcmVjYWxjdWxhdGVkIG9ubHkgaWYgaXQgZG9lcyBub3QgaGF2ZSBhIGhlaWdodCBvZiB6ZXJvXG4gICAgaWYgKCFvdmVyZmxvd0VsZW1lbnQuY3VycmVudCB8fCAhb3ZlcmZsb3dFbGVtZW50LmN1cnJlbnQub2Zmc2V0SGVpZ2h0KSB7XG4gICAgICBjb25zdCBuZXdPdmVyZmxvdyA9IHByb3BzLnBvcnRhbEVsZW1lbnRPdmVyZmxvd0NhbGN1bGF0b3IgP1xuICAgICAgICBwcm9wcy5wb3J0YWxFbGVtZW50T3ZlcmZsb3dDYWxjdWxhdG9yKHRvcCwgaGVpZ2h0KSA6XG4gICAgICAgIGRlZmF1bHRQb3J0YWxFbGVtZW50T3ZlcmZsb3dDYWxjdWxhdG9yKHRvcCwgaGVpZ2h0KTtcblxuICAgICAgaWYgKG5ld092ZXJmbG93ID4gMCkge1xuICAgICAgICBjb25zdCBuZXdIZWlnaHQgPSAoXG4gICAgICAgICAgcHJvcHMucG9ydGFsRWxlbWVudE92ZXJmbG93U3BhY2VySGVpZ2h0Q2FsY3VsYXRvciA/XG4gICAgICAgICAgICBwcm9wcy5wb3J0YWxFbGVtZW50T3ZlcmZsb3dTcGFjZXJIZWlnaHRDYWxjdWxhdG9yKG5ld092ZXJmbG93KSA6XG4gICAgICAgICAgICBkZWZhdWx0UG9ydGFsRWxlbWVudE92ZXJmbG93U3BhY2VySGVpZ2h0Q2FsY3VsYXRvcihuZXdPdmVyZmxvdylcbiAgICAgICAgKSArIDI1O1xuICAgICAgICBzZXRPdmVyZmxvd1NwYWNlckhlaWdodChuZXdIZWlnaHQpO1xuICAgICAgICBzZXRDdXJyZW50T3ZlcmZsb3cobmV3T3ZlcmZsb3cpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0T3ZlcmZsb3dTcGFjZXJIZWlnaHQoMCk7XG4gICAgICAgIHNldEN1cnJlbnRPdmVyZmxvdygwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtwcm9wcy5wb3J0YWxFbGVtZW50T3ZlcmZsb3dDYWxjdWxhdG9yLCBwcm9wcy5wb3J0YWxFbGVtZW50T3ZlcmZsb3dTcGFjZXJIZWlnaHRDYWxjdWxhdG9yXSk7XG5cbiAgY29uc3QgY29uZ3J1ZW50VGltZXJFeGVjID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChkcm9wZG93blJlZi5jdXJyZW50ICYmIG92ZXJmbG93RWxlbWVudC5jdXJyZW50KSB7XG4gICAgICBjb25zdCBjbGllbnRSZWN0ID0gZHJvcGRvd25SZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRIZWlnaHQgPSBjbGllbnRSZWN0LmhlaWdodDtcbiAgICAgIGNvbnN0IGN1cnJlbnRUb3AgPSBjbGllbnRSZWN0LnRvcDtcblxuICAgICAgY29uc3QgbW9yZU92ZXJmbG93ID0gcHJvcHMucG9ydGFsRWxlbWVudE92ZXJmbG93Q2FsY3VsYXRvciA/XG4gICAgICAgIHByb3BzLnBvcnRhbEVsZW1lbnRPdmVyZmxvd0NhbGN1bGF0b3IoY3VycmVudFRvcCwgY3VycmVudEhlaWdodCkgOlxuICAgICAgICBkZWZhdWx0UG9ydGFsRWxlbWVudE92ZXJmbG93Q2FsY3VsYXRvcihjdXJyZW50VG9wLCBjdXJyZW50SGVpZ2h0KTtcblxuICAgICAgaWYgKG1vcmVPdmVyZmxvdyA+IDApIHtcbiAgICAgICAgY29uc3QgbmV3T3ZlcmZsb3cgPSBjdXJyZW50T3ZlcmZsb3cgKyBtb3JlT3ZlcmZsb3c7XG4gICAgICAgIHNldEN1cnJlbnRPdmVyZmxvdyhuZXdPdmVyZmxvdyk7XG5cbiAgICAgICAgY29uc3Qgb3ZlcmZsb3dFbGVtZW50SGVpZ2h0ID0gb3ZlcmZsb3dFbGVtZW50LmN1cnJlbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBjb25zdCBuZXdIZWlnaHQgPSBvdmVyZmxvd0VsZW1lbnRIZWlnaHQgKyBtb3JlT3ZlcmZsb3cgKyAyNTtcblxuICAgICAgICBzZXRPdmVyZmxvd1NwYWNlckhlaWdodChuZXdIZWlnaHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2N1cnJlbnRPdmVyZmxvd10pO1xuXG4gIGNvbnN0IHVwZGF0ZVBvcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIWJveFJlZi5jdXJyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaWYgaXQncyB1c2luZyB0aGUgc2libGluZyBzdHJhdGVneSB3aGVyZSB0aGUgZWxlbWVudCBpcyBpbiB0aGUgc2libGluZyBzaWRlIHJhdGhlciB0aGFuIGRvd24gaW4gdGhlcmVcbiAgICAvLyB3ZSBnb3R0YSB1c2UgdGhlIHBhcmVudCBhcyB0aGUgc291cmNlIG9mIG91ciBjaGlsZHJlblxuICAgIGNvbnN0IGNoaWxkcmVuID0gQXJyYXkuZnJvbShib3hSZWYuY3VycmVudC5jaGlsZE5vZGVzKTtcbiAgICAvLyBub3cgd2UgZ3JhYiB0aGUgZmlyc3Qgbm9kZVxuICAgIGxldCBmaXJzdE5vZGUgPSBjaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudDtcbiAgICAvLyBzYW1lIGJlY2F1c2Ugb3VyIGVsZW1lbnQgd291bGQgYmUgbGFzdCBpZiB3ZSB1c2VkIHByZXZpb3VzIGNoaWxkcmVuIHdlIGdvdHRhIG1vdmUgdHdvIHNpZGVzXG4gICAgbGV0IGxhc3ROb2RlID0gY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0gYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICBpZiAocHJvcHMuZ29JbnRvVHJlZURlcHRoKSB7XG4gICAgICBjb25zdCBnb1Rvd2FyZHNQYXJlbnQgPSBwcm9wcy5nb0ludG9UcmVlRGVwdGggPCAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLmFicyhwcm9wcy5nb0ludG9UcmVlRGVwdGgpOyBpKyspIHtcbiAgICAgICAgaWYgKCFnb1Rvd2FyZHNQYXJlbnQpIHtcbiAgICAgICAgICBmaXJzdE5vZGUgPSBmaXJzdE5vZGUuY2hpbGROb2Rlc1swXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBsYXN0Tm9kZSA9IGxhc3ROb2RlLmNoaWxkTm9kZXNbbGFzdE5vZGUuY2hpbGROb2Rlcy5sZW5ndGggLSAxXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaXJzdE5vZGUgPSBmaXJzdE5vZGUucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBsYXN0Tm9kZSA9IGxhc3ROb2RlLnBhcmVudEVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdE5vZGVCb3VuZGluZ1JlY3QgPSBmaXJzdE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgbGFzdE5vZGVCb3VuZGluZ1JlY3QgPSBsYXN0Tm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIGNvbnN0IGxvd2VybW9zdE5vZGVDbGllbnRSZWN0ID0gZmlyc3ROb2RlQm91bmRpbmdSZWN0LmJvdHRvbSA+IGxhc3ROb2RlQm91bmRpbmdSZWN0LmJvdHRvbSA/IGZpcnN0Tm9kZUJvdW5kaW5nUmVjdCA6IGxhc3ROb2RlQm91bmRpbmdSZWN0O1xuXG4gICAgY29uc3QgbGVmdE1vc3RQb3NpdGlvbiA9IGxvd2VybW9zdE5vZGVDbGllbnRSZWN0LmxlZnQ7XG4gICAgY29uc3QgcmlnaHRNb3N0UG9zaXRpb24gPSBsb3dlcm1vc3ROb2RlQ2xpZW50UmVjdC5yaWdodDtcblxuICAgIGxldCBsZWZ0OiBudW1iZXIgPSBudWxsO1xuICAgIGxldCByaWdodDogbnVtYmVyID0gbnVsbDtcbiAgICBjb25zdCB3aWR0aFRvQ29tcGFyZUFnYWluc3QgPSBkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgaWYgKGxlZnRNb3N0UG9zaXRpb24gPiAod2lkdGhUb0NvbXBhcmVBZ2FpbnN0IC8gMikpIHtcbiAgICAgIHJpZ2h0ID0gd2lkdGhUb0NvbXBhcmVBZ2FpbnN0IC0gcmlnaHRNb3N0UG9zaXRpb247XG4gICAgfSBlbHNlIHtcbiAgICAgIGxlZnQgPSBsZWZ0TW9zdFBvc2l0aW9uO1xuICAgIH1cblxuICAgIGNvbnN0IHRvcCA9IGxvd2VybW9zdE5vZGVDbGllbnRSZWN0LnRvcCArIGxvd2VybW9zdE5vZGVDbGllbnRSZWN0LmhlaWdodDtcblxuICAgIHNldFBvcyhbdG9wLCBsZWZ0LCByaWdodF0pO1xuXG4gICAgaWYgKGRyb3Bkb3duUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGRyb3Bkb3duUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuXG4gICAgICByZWNhbGN1bGF0ZU92ZXJmbG93KHRvcCwgaGVpZ2h0KTtcbiAgICB9XG4gIH0sIFtyZWNhbGN1bGF0ZU92ZXJmbG93XSk7XG5cbiAgY29uc3QgY2FsbENsb3NlYWJsZSA9IHVzZUNhbGxiYWNrKChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgaWYgKHByb3BzLmNsb3NlYWJsZSkge1xuICAgICAgbGV0IHdyYXBwZXJSZWYgPSBib3hSZWYuY3VycmVudDtcbiAgICAgIGlmIChwcm9wcy5nb0ludG9UcmVlRGVwdGgpIHtcbiAgICAgICAgY29uc3QgZ29Ub3dhcmRzUGFyZW50ID0gcHJvcHMuZ29JbnRvVHJlZURlcHRoIDwgMDtcbiAgICAgICAgaWYgKGdvVG93YXJkc1BhcmVudCkge1xuICAgICAgICAgIHdyYXBwZXJSZWYgPSB3cmFwcGVyUmVmLnBhcmVudEVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghaXNJbkRyb3Bkb3duT3JXcmFwcGVyKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50LCBkcm9wZG93blJlZi5jdXJyZW50LCB3cmFwcGVyUmVmKSkge1xuICAgICAgICBwcm9wcy5vbkNsb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgdXBkYXRlUG9zRGVsYXllZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRUaW1lb3V0KHVwZGF0ZVBvcywgNTApO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgcG9zTWFzc1RyaWdnZXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgcG9zSW50ZXJuYWwgPSBzZXRJbnRlcnZhbCh1cGRhdGVQb3MsIDEwKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwocG9zSW50ZXJuYWwpO1xuICAgIH0sIDYwMCk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwcm9wcy5pc09wZW4pIHtcbiAgICAgIHVwZGF0ZVBvcygpO1xuICAgICAgY29uZ3J1ZW50VGltZXIuY3VycmVudCA9IHNldEludGVydmFsKGNvbmdydWVudFRpbWVyRXhlYywgMTAwMCk7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiU0xBVEVfRFJBV0VSX09QRU5cIiwgcG9zTWFzc1RyaWdnZXIpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB1cGRhdGVQb3MpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdXBkYXRlUG9zKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB1cGRhdGVQb3NEZWxheWVkKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdXBkYXRlUG9zRGVsYXllZCk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB1cGRhdGVQb3MsIHRydWUpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgY2FsbENsb3NlYWJsZSk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgY2FsbENsb3NlYWJsZSk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiU0xBVEVfRFJBV0VSX09QRU5cIiwgcG9zTWFzc1RyaWdnZXIpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHVwZGF0ZVBvcylcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdXBkYXRlUG9zKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHVwZGF0ZVBvc0RlbGF5ZWQpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHVwZGF0ZVBvc0RlbGF5ZWQpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB1cGRhdGVQb3MsIHRydWUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjYWxsQ2xvc2VhYmxlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGNhbGxDbG9zZWFibGUpO1xuICAgICAgICBjbGVhckludGVydmFsKGNvbmdydWVudFRpbWVyLmN1cnJlbnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXRDdXJyZW50T3ZlcmZsb3coMCk7XG4gICAgICBzZXRPdmVyZmxvd1NwYWNlckhlaWdodCgwKTtcbiAgICB9XG4gIH0sIFtwcm9wcy5pc09wZW4sIHVwZGF0ZVBvcywgdXBkYXRlUG9zRGVsYXllZCwgcG9zTWFzc1RyaWdnZXIsIGNhbGxDbG9zZWFibGUsIGNvbmdydWVudFRpbWVyRXhlY10pO1xuXG4gIGxldCBwb3J0YWw6IFJlYWN0LlJlYWN0Tm9kZSA9IG51bGw7XG4gIGxldCBvdmVyZmxvd1BvcnRhbDogUmVhY3QuUmVhY3ROb2RlID0gbnVsbDtcblxuICBpZiAocHJvcHMuaXNPcGVuKSB7XG4gICAgY29uc3Qgc3R5bGU6IGFueSA9IHBvcyA/XG4gICAgICB7IHBvc2l0aW9uOiBcImZpeGVkXCIsIHRvcDogcG9zWzBdLCBsZWZ0OiBwb3NbMV0sIHJpZ2h0OiBwb3NbMl0sIHpJbmRleDogdHlwZW9mIHByb3BzLnpJbmRleCAhPT0gXCJ1bmRlZmluZWRcIiA/IHByb3BzLnpJbmRleCA6IDUwMCB9IDpcbiAgICAgIHsgcG9zaXRpb246IFwiZml4ZWRcIiwgdG9wOiAwLCBsZWZ0OiAwLCB2aXNpYmlsaXR5OiBcImhpZGRlblwiLCB6SW5kZXg6IHR5cGVvZiBwcm9wcy56SW5kZXggIT09IFwidW5kZWZpbmVkXCIgPyBwcm9wcy56SW5kZXggOiA1MDAgfTtcblxuICAgIGNvbnN0IERyb3Bkb3duQ29tcG9uZW50ID0gcHJvcHMuRHJvcGRvd25Db21wb25lbnQgfHwgRGVmYXVsdERyb3Bkb3duQ29tcG9uZW50O1xuXG4gICAgbGV0IGVsZW1lbnRJbnNpZGVQb3J0YWwgPSAoXG4gICAgICA8RHJvcGRvd25Db21wb25lbnRcbiAgICAgICAgY29udGFpbmVkV2l0aGluQm94PXtwcm9wcy5jb250YWluV2l0aGluQm94fVxuICAgICAgICBwcm9wcz17e1xuICAgICAgICAgIFtcImRhdGEtdW5ibHVyXCJdOiB0cnVlLFxuICAgICAgICAgIHN0eWxlOiBwcm9wcy5jb250YWluV2l0aGluQm94ID8gbnVsbCA6IHN0eWxlLFxuICAgICAgICB9fVxuICAgICAgICBzaXphYmxlPXshIXByb3BzLmRyb3Bkb3duU2l6YWJsZX1cbiAgICAgICAgcmVmPXtwcm9wcy5jb250YWluV2l0aGluQm94ID8gbnVsbCA6IGRyb3Bkb3duUmVmfVxuICAgICAgPlxuICAgICAgICB7cHJvcHMuZHJvcGRvd259XG4gICAgICA8L0Ryb3Bkb3duQ29tcG9uZW50PlxuICAgICk7XG5cbiAgICBpZiAocHJvcHMuY29udGFpbldpdGhpbkJveCkge1xuICAgICAgY29uc3QgRHJvcGRvd25Db21wb25lbnRCb3ggPSBwcm9wcy5Ecm9wZG93bkNvbXBvbmVudEJveCB8fCBEZWZhdWx0RHJvcGRvd25Db21wb25lbnRCb3g7XG4gICAgICBlbGVtZW50SW5zaWRlUG9ydGFsID0gKFxuICAgICAgICA8RHJvcGRvd25Db21wb25lbnRCb3hcbiAgICAgICAgICBwcm9wcz17e1xuICAgICAgICAgICAgW1wiZGF0YS11bmJsdXJcIl06IHRydWUsXG4gICAgICAgICAgICBzdHlsZSxcbiAgICAgICAgICB9fVxuICAgICAgICAgIHNpemFibGU9e3Byb3BzLmRyb3Bkb3duU2l6YWJsZX1cbiAgICAgICAgICByZWY9e2Ryb3Bkb3duUmVmfVxuICAgICAgICA+XG4gICAgICAgICAge2VsZW1lbnRJbnNpZGVQb3J0YWx9XG4gICAgICAgIDwvRHJvcGRvd25Db21wb25lbnRCb3g+XG4gICAgICApO1xuICAgIH1cblxuICAgIHBvcnRhbCA9IFJlYWN0RE9NLmNyZWF0ZVBvcnRhbChcbiAgICAgIGVsZW1lbnRJbnNpZGVQb3J0YWwsXG4gICAgICBwcm9wcy5wb3J0YWxFbGVtZW50IHx8IGRvY3VtZW50LmJvZHksXG4gICAgKTtcblxuICAgIG92ZXJmbG93UG9ydGFsID0gUmVhY3RET00uY3JlYXRlUG9ydGFsKChcbiAgICAgIHByb3BzLnBvcnRhbEVsZW1lbnRPdmVyZmxvd1NwYWNlckdlbmVyYXRvciA/XG4gICAgICAgIHByb3BzLnBvcnRhbEVsZW1lbnRPdmVyZmxvd1NwYWNlckdlbmVyYXRvcihvdmVyZmxvd1NwYWNlckhlaWdodCwgb3ZlcmZsb3dFbGVtZW50KSA6XG4gICAgICAgIGRlZmF1bHRQb3J0YWxFbGVtZW50T3ZlcmZsb3dTcGFjZXJHZW5lcmF0b3Iob3ZlcmZsb3dTcGFjZXJIZWlnaHQsIG92ZXJmbG93RWxlbWVudClcbiAgICApLCBwcm9wcy5wb3J0YWxFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpO1xuICB9XG5cbiAgY29uc3QgV3JhcHBlciA9IHByb3BzLkRyb3Bkb3duQ29tcG9uZW50V3JhcHBlciB8fCBEZWZhdWx0RHJvcGRvd25Db21wb25lbnRXcmFwcGVyO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxXcmFwcGVyXG4gICAgICAgIHRhZz17cHJvcHMuZHJvcGRvd25Db21wb25lbnRXcmFwcGVyVGFnfVxuICAgICAgICBwcm9wcz17e1xuICAgICAgICAgIC4uLnByb3BzLmRyb3Bkb3duQ29tcG9uZW50V3JhcHBlclByb3BzLFxuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICBkaXNwbGF5OiBwcm9wcy5kcm9wZG93bkNvbXBvbmVudFdyYXBwZXJIaWRkZW4gPyBcIm5vbmVcIiA6IFwiY29udGVudHNcIixcbiAgICAgICAgICAgIC4uLihwcm9wcy5kcm9wZG93bkNvbXBvbmVudFdyYXBwZXJQcm9wcz8uc3R5bGUgfHwge30pXG4gICAgICAgICAgfVxuICAgICAgICB9fVxuICAgICAgICByZWY9e2JveFJlZn1cbiAgICAgID5cbiAgICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgICAgPC9XcmFwcGVyPlxuICAgICAge3BvcnRhbH1cbiAgICAgIHtvdmVyZmxvd1BvcnRhbH1cbiAgICA8Lz5cbiAgKTtcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFFQSxXQUFPLFVBQVU7QUFFakIsUUFBSSxNQUFNO0FBQ1YsUUFBSSxNQUNGO0FBSUYsUUFBSSxNQUFNLElBQUksT0FBTyxRQUFRLE1BQU0sUUFBUSxNQUFNLEdBQUc7QUFDcEQsUUFBSSxNQUFNLElBQUksT0FBTyxRQUFRLE1BQU0sUUFBUSxNQUFNLEdBQUc7QUFFcEQsYUFBUyxVQUFVLE9BQU87QUFDeEIsY0FBUSxPQUFPLFNBQVMsRUFBRTtBQUUxQixVQUFJLElBQUksS0FBSyxLQUFLLEdBQUc7QUFDbkIsZUFBTztBQUFBLE1BQ1Q7QUFFQSxVQUFJLElBQUksS0FBSyxLQUFLLEdBQUc7QUFDbkIsZUFBTztBQUFBLE1BQ1Q7QUFFQSxhQUFPO0FBQUEsSUFDVDtBQUFBO0FBQUE7OztBQ3pCQTtBQUFBO0FBeUJBLGFBQVNBLFVBQVMsT0FBTztBQUN2QixVQUFJLE9BQU8sT0FBTztBQUNsQixhQUFPLFNBQVMsU0FBUyxRQUFRLFlBQVksUUFBUTtBQUFBLElBQ3ZEO0FBRUEsV0FBTyxVQUFVQTtBQUFBO0FBQUE7OztBQzlCakI7QUFBQTtBQUNBLFFBQUksYUFBYSxPQUFPLFVBQVUsWUFBWSxVQUFVLE9BQU8sV0FBVyxVQUFVO0FBRXBGLFdBQU8sVUFBVTtBQUFBO0FBQUE7OztBQ0hqQjtBQUFBO0FBQUEsUUFBSSxhQUFhO0FBR2pCLFFBQUksV0FBVyxPQUFPLFFBQVEsWUFBWSxRQUFRLEtBQUssV0FBVyxVQUFVO0FBRzVFLFFBQUksT0FBTyxjQUFjLFlBQVksU0FBUyxhQUFhLEVBQUU7QUFFN0QsV0FBTyxVQUFVO0FBQUE7QUFBQTs7O0FDUmpCO0FBQUE7QUFBQSxRQUFJLE9BQU87QUFrQlgsUUFBSSxNQUFNLFdBQVc7QUFDbkIsYUFBTyxLQUFLLEtBQUssSUFBSTtB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bUI7QUFBQSxjQUNsRCxXQUFXO0FBQUEsY0FDWCxRQUFRO0FBQUEsY0FDUixPQUFRLE1BQU0sUUFBdUIsaUJBQWlCO0FBQUEsY0FDdEQsY0FBYztBQUFBO0FBQUEsVUFDaEI7QUFBQTtBQUFBLFFBR0QsTUFBTTtBQUFBLE1BQ1Q7QUFBQSxJQUVKO0FBQUEsRUFDRjtBQUNGOyIsCiAgIm5hbWVzIjogWyJpc09iamVjdCIsICJzdHJpbmciLCAic3RyaW5nIiwgIlN5bWJvbCIsICJTeW1ib2wiLCAiZSIsICJTeW1ib2wiLCAiaXNPYmplY3QiLCAiaXNPYmplY3QiLCAiZGVib3VuY2UiLCAidGltZSIsICJkZWJvdW5jZSIsICJpc09iamVjdCIsICJ0aHJvdHRsZSIsICJzdHJpbmciLCAiY2hlY2siLCAiZSIsICJpc0tleUhvdGtleSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2RlZXBfZXF1YWwiLCAiZSIsICJtc2ciLCAiaXNQbGFpbk9iamVjdCIsICJ0IiwgImlzUGxhaW5PYmplY3QiLCAiaSIsICJpbW1lciIsICJwYXRoIiwgImlzU2V0IiwgInBhcmVudCIsICJjdXJyZW50IiwgIkltbWVyIiwgInNlbGYiLCAiYmFzZSIsICJpIiwgIkltbWVyIiwgIlBhdGhSZWYiLCAidHJhbnNmb3JtIiwgInJlZiIsICJvcCIsICJjdXJyZW50IiwgImFmZmluaXR5IiwgInBhdGgiLCAiUGF0aCIsICJ1bnJlZiIsICJQb2ludFJlZiIsICJwb2ludCIsICJQb2ludCIsICJSYW5nZVJlZiIsICJSYW5nZSIsICJESVJUWV9QQVRIUyIsICJXZWFrTWFwIiwgIkRJUlRZX1BBVEhfS0VZUyIsICJGTFVTSElORyIsICJOT1JNQUxJWklORyIsICJQQVRIX1JFRlMiLCAiUE9JTlRfUkVGUyIsICJSQU5HRV9SRUZTIiwgImFuY2VzdG9ycyIsICJvcHRpb25zIiwgImFyZ3VtZW50cyIsICJsZW5ndGgiLCAidW5kZWZpbmVkIiwgInJldmVyc2UiLCAicGF0aHMiLCAibGV2ZWxzIiwgInNsaWNlIiwgImNvbW1vbiIsICJhbm90aGVyIiwgImkiLCAiYXYiLCAiYnYiLCAicHVzaCIsICJjb21wYXJlIiwgIm1pbiIsICJNYXRoIiwgImVuZHNBZnRlciIsICJhcyIsICJicyIsICJlcXVhbHMiLCAiZW5kc0F0IiwgImVuZHNCZWZvcmUiLCAiZXZlcnkiLCAibiIsICJoYXNQcmV2aW91cyIsICJpc0FmdGVyIiwgImlzQW5jZXN0b3IiLCAiaXNCZWZvcmUiLCAiaXNDaGlsZCIsICJpc0NvbW1vbiIsICJpc0Rlc2NlbmRhbnQiLCAiaXNQYXJlbnQiLCAiaXNQYXRoIiwgInZhbHVlIiwgIkFycmF5IiwgImlzQXJyYXkiLCAiaXNTaWJsaW5nIiwgImFsIiwgImJsIiwgImxpc3QiLCAibmV4dCIsICJFcnJvciIsICJjb25jYXQiLCAibGFzdCIsICJvcGVyYXRpb25DYW5UcmFuc2Zvcm1QYXRoIiwgIm9wZXJhdGlvbiIsICJ0eXBlIiwgInBhcmVudCIsICJwcmV2aW91cyIsICJyZWxhdGl2ZSIsICJhbmNlc3RvciIsICJwIiwgInBvc2l0aW9uIiwgIm5ld1BhdGgiLCAib25wIiwgImNvcHkiLCAibyIsICJ0b1ByaW1pdGl2ZSIsICJ0b1Byb3BlcnR5S2V5IiwgImFwcGx5VG9EcmFmdCIsICJlZGl0b3IiLCAic2VsZWN0aW9uIiwgIm5vZGUiLCAiTm9kZSIsICJpbmRleCIsICJjaGlsZHJlbiIsICJzcGxpY2UiLCAia2V5IiwgInBvaW50cyIsICJvZmZzZXQiLCAidGV4dCIsICJsZWFmIiwgImJlZm9yZSIsICJhZnRlciIsICJnZXQiLCAicHJldlBhdGgiLCAicHJldiIsICJUZXh0IiwgImlzVGV4dCIsICJTY3J1YmJlciIsICJzdHJpbmdpZnkiLCAidHJ1ZVBhdGgiLCAibmV3UGFyZW50IiwgIm5ld0luZGV4IiwgInJlc3VsdCIsICJ0ZXh0cyIsICJwcmVmZXJOZXh0IiwgInByb3BlcnRpZXMiLCAibmV3UHJvcGVydGllcyIsICJoYXNPd25Qcm9wZXJ0eSIsICJpc1JhbmdlIiwgIl9vYmplY3RTcHJlYWQiLCAibmV3Tm9kZSIsICJHZW5lcmFsVHJhbnNmb3JtcyIsICJjcmVhdGVEcmFmdCIsICJmaW5pc2hEcmFmdCIsICJpc0RyYWZ0IiwgIk5vZGVUcmFuc2Zvcm1zIiwgImluc2VydE5vZGVzIiwgIm5vZGVzIiwgImxpZnROb2RlcyIsICJtZXJnZU5vZGVzIiwgIm1vdmVOb2RlcyIsICJyZW1vdmVOb2RlcyIsICJzZXROb2RlcyIsICJwcm9wcyIsICJzcGxpdE5vZGVzIiwgInVuc2V0Tm9kZXMiLCAidW53cmFwTm9kZXMiLCAid3JhcE5vZGVzIiwgImVsZW1lbnQiLCAiU2VsZWN0aW9uVHJhbnNmb3JtcyIsICJjb2xsYXBzZSIsICJkZXNlbGVjdCIsICJtb3ZlIiwgInNlbGVjdCIsICJ0YXJnZXQiLCAic2V0UG9pbnQiLCAic2V0U2VsZWN0aW9uIiwgImlzRGVlcEVxdWFsIiwgImEiLCAiYiIsICJpc1BsYWluT2JqZWN0IiwgIm9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UiLCAiZWRnZXMiLCAicmFuZ2UiLCAiYW5jaG9yIiwgImZvY3VzIiwgImlzQmFja3dhcmQiLCAiZW5kIiwgImluY2x1ZGVzIiwgInJzIiwgInJlIiwgInRzIiwgInRlIiwgInN0YXJ0IiwgImlzQWZ0ZXJTdGFydCIsICJpc0JlZm9yZUVuZCIsICJpc1BvaW50IiwgImludGVyc2VjdGlvbiIsICJyZXN0IiwgIl9vYmplY3RXaXRob3V0UHJvcGVydGllcyIsICJfZXhjbHVkZWQiLCAiczEiLCAiZTEiLCAiczIiLCAiZTIiLCAiaXNDb2xsYXBzZWQiLCAiaXNFeHBhbmRlZCIsICJpc0ZvcndhcmQiLCAicHJvZHVjZSIsICJyIiwgImFmZmluaXR5QW5jaG9yIiwgImFmZmluaXR5Rm9jdXMiLCAiaXNFbGVtZW50IiwgImlzTm9kZUxpc3QiLCAiRWRpdG9yIiwgImlzRWRpdG9yIiwgIkVsZW1lbnQiLCAiaXNFbGVtZW50TGlzdCIsICJ2YWwiLCAiaXNFbGVtZW50UHJvcHMiLCAiaXNFbGVtZW50VHlwZSIsICJlbGVtZW50VmFsIiwgImVsZW1lbnRLZXkiLCAibWF0Y2hlcyIsICJJU19OT0RFX0xJU1RfQ0FDSEUiLCAicm9vdCIsICJlbnRyeSIsICJjaGlsZCIsICJjIiwgImNoaWxkUGF0aCIsICJkZXNjZW5kYW50IiwgImRlc2NlbmRhbnRzIiwgImVsZW1lbnRzIiwgImV4dHJhY3RQcm9wcyIsICJfZXhjbHVkZWQyIiwgImZpcnN0IiwgImZyYWdtZW50IiwgIm5ld1Jvb3QiLCAibm9kZUVudHJpZXMiLCAicGFzcyIsICJfcmVmIiwgImhhcyIsICJpc05vZGUiLCAiY2FjaGVkUmVzdWx0IiwgInNldCIsICJpc1RleHRQcm9wcyIsICJmcm9tIiwgInRvIiwgInZpc2l0ZWQiLCAiU2V0IiwgImFkZCIsICJuZXh0SW5kZXgiLCAicGFyZW50UGF0aCIsICJzdHJpbmciLCAibWFwIiwgImpvaW4iLCAiT3BlcmF0aW9uIiwgImlzTm9kZU9wZXJhdGlvbiIsICJpc09wZXJhdGlvbiIsICJlbmRzV2l0aCIsICJpc09wZXJhdGlvbkxpc3QiLCAiaXNTZWxlY3Rpb25PcGVyYXRpb24iLCAiaXNUZXh0T3BlcmF0aW9uIiwgImludmVyc2UiLCAiaW52ZXJzZVBhdGgiLCAiaW52ZXJzZU5ld1BhdGgiLCAiSVNfRURJVE9SX0NBQ0hFIiwgImNhY2hlZElzRWRpdG9yIiwgImFkZE1hcmsiLCAiYXBwbHkiLCAiZGVsZXRlRnJhZ21lbnQiLCAiaW5zZXJ0QnJlYWsiLCAiaW5zZXJ0U29mdEJyZWFrIiwgImluc2VydEZyYWdtZW50IiwgImluc2VydE5vZGUiLCAiaW5zZXJ0VGV4dCIsICJpc0VsZW1lbnRSZWFkT25seSIsICJpc0lubGluZSIsICJpc1NlbGVjdGFibGUiLCAiaXNWb2lkIiwgIm5vcm1hbGl6ZU5vZGUiLCAib25DaGFuZ2UiLCAicmVtb3ZlTWFyayIsICJnZXREaXJ0eVBhdGhzIiwgIm1hcmtzIiwgIm9wZXJhdGlvbnMiLCAiYWJvdmUiLCAiYXQiLCAiZGVsZXRlQmFja3dhcmQiLCAidW5pdCIsICJkZWxldGVGb3J3YXJkIiwgImVsZW1lbnRSZWFkT25seSIsICJoYXNCbG9ja3MiLCAiaGFzSW5saW5lcyIsICJoYXNQYXRoIiwgImhhc1RleHRzIiwgImlzQmxvY2siLCAiaXNFZGdlIiwgImlzRW1wdHkiLCAiaXNFbmQiLCAiaXNOb3JtYWxpemluZyIsICJpc1N0YXJ0IiwgImdldE1hcmtzIiwgIm5vcm1hbGl6ZSIsICJwYXRoUmVmIiwgInBhdGhSZWZzIiwgInBvaW50UmVmIiwgInBvaW50UmVmcyIsICJwb3NpdGlvbnMiLCAicmFuZ2VSZWYiLCAicmFuZ2VSZWZzIiwgInNldE5vcm1hbGl6aW5nIiwgInVuaGFuZ1JhbmdlIiwgInZvaWQiLCAid2l0aG91dE5vcm1hbGl6aW5nIiwgImZuIiwgIlNwYW4iLCAiaXNTcGFuIiwgInZhbHVlIiwgIkFycmF5IiwgImlzQXJyYXkiLCAibGVuZ3RoIiwgImV2ZXJ5IiwgIlBhdGgiLCAiaXNQYXRoIiwgIlBvaW50IiwgImNvbXBhcmUiLCAicG9pbnQiLCAiYW5vdGhlciIsICJyZXN1bHQiLCAicGF0aCIsICJvZmZzZXQiLCAiaXNBZnRlciIsICJpc0JlZm9yZSIsICJlcXVhbHMiLCAiaXNQb2ludCIsICJpc1BsYWluT2JqZWN0IiwgInRyYW5zZm9ybSIsICJvcCIsICJvcHRpb25zIiwgInByb2R1Y2UiLCAicCIsICJhZmZpbml0eSIsICJ0eXBlIiwgInRleHQiLCAicG9zaXRpb24iLCAiTWF0aCIsICJtaW4iLCAiaXNBbmNlc3RvciIsICJfb2JqZWN0U3ByZWFkIiwgIl9zY3J1YmJlciIsICJ1bmRlZmluZWQiLCAiU2NydWJiZXIiLCAic2V0U2NydWJiZXIiLCAic2NydWJiZXIiLCAic3RyaW5naWZ5IiwgIkpTT04iLCAiVGV4dCIsICJsb29zZSIsICJvbWl0VGV4dCIsICJvYmoiLCAicmVzdCIsICJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCAiX2V4Y2x1ZGVkIiwgImlzRGVlcEVxdWFsIiwgImlzVGV4dCIsICJpc1RleHRMaXN0IiwgInZhbCIsICJpc1RleHRQcm9wcyIsICJwcm9wcyIsICJtYXRjaGVzIiwgImtleSIsICJoYXNPd25Qcm9wZXJ0eSIsICJkZWNvcmF0aW9ucyIsICJub2RlIiwgImxlYXZlcyIsICJkZWMiLCAiX2V4Y2x1ZGVkMiIsICJzdGFydCIsICJlbmQiLCAiUmFuZ2UiLCAiZWRnZXMiLCAibmV4dCIsICJsZWFmRW5kIiwgImRlY29yYXRpb25TdGFydCIsICJkZWNvcmF0aW9uRW5kIiwgImxlYWYiLCAibGVhZlN0YXJ0IiwgIk9iamVjdCIsICJhc3NpZ24iLCAicHVzaCIsICJtaWRkbGUiLCAiYmVmb3JlIiwgImFmdGVyIiwgIm9mZiIsICJzbGljZSIsICJnZXREZWZhdWx0SW5zZXJ0TG9jYXRpb24iLCAiZWRpdG9yIiwgInNlbGVjdGlvbiIsICJjaGlsZHJlbiIsICJFZGl0b3IiLCAibWF0Y2hQYXRoIiwgIm4iLCAiZ2V0Q2hhcmFjdGVyRGlzdGFuY2UiLCAic3RyIiwgImlzUlRMIiwgImFyZ3VtZW50cyIsICJpc0xUUiIsICJjb2RlcG9pbnRzIiwgImNvZGVwb2ludHNJdGVyYXRvclJUTCIsICJsZWZ0IiwgIkNvZGVwb2ludFR5cGUiLCAiTm9uZSIsICJyaWdodCIsICJkaXN0YW5jZSIsICJnYjExIiwgImdiMTJPcjEzIiwgImNoYXIiLCAiY29kZSIsICJjb2RlUG9pbnRBdCIsICJnZXRDb2RlcG9pbnRUeXBlIiwgImludGVyc2VjdHMiLCAiWldKIiwgIkV4dFBpY3QiLCAiZW5kc1dpdGhFbW9qaVpXSiIsICJzdWJzdHJpbmciLCAiUkkiLCAiZW5kc1dpdGhPZGROdW1iZXJPZlJJcyIsICJpc0JvdW5kYXJ5UGFpciIsICJTUEFDRSIsICJQVU5DVFVBVElPTiIsICJDSEFNRUxFT04iLCAiZ2V0V29yZERpc3RhbmNlIiwgImRpc3QiLCAic3RhcnRlZCIsICJjaGFyRGlzdCIsICJyZW1haW5pbmciLCAic3BsaXRCeUNoYXJhY3RlckRpc3RhbmNlIiwgImlzV29yZENoYXJhY3RlciIsICJhdCIsICJ0ZXN0IiwgIm5leHRDaGFyIiwgIm5leHRSZW1haW5pbmciLCAiaSIsICJjaGFyMSIsICJjaGFyQXQiLCAiaXNMb3dTdXJyb2dhdGUiLCAiY2hhckNvZGVBdCIsICJjaGFyMiIsICJpc0hpZ2hTdXJyb2dhdGUiLCAiY2hhckNvZGUiLCAicmVFeHRlbmQiLCAicmVQcmVwZW5kIiwgInJlU3BhY2luZ01hcmsiLCAicmVMIiwgInJlViIsICJyZVQiLCAicmVMViIsICJyZUxWVCIsICJyZUV4dFBpY3QiLCAiQW55IiwgInNlYXJjaCIsICJFeHRlbmQiLCAiUHJlcGVuZCIsICJTcGFjaW5nTWFyayIsICJMIiwgIlYiLCAiVCIsICJMViIsICJMVlQiLCAieCIsICJ5IiwgIk5vbkJvdW5kYXJ5UGFpcnMiLCAiZmluZEluZGV4IiwgInIiLCAiZW5kaW5nRW1vamlaV0oiLCAiZW5kaW5nUklzIiwgIm1hdGNoIiwgIm51bVJJcyIsICJUZXh0VHJhbnNmb3JtcyIsICJkZWxldGUiLCAiaW5zZXJ0RnJhZ21lbnQiLCAiZnJhZ21lbnQiLCAiaW5zZXJ0VGV4dCIsICJ3aXRob3V0Tm9ybWFsaXppbmciLCAidm9pZHMiLCAicmFuZ2UiLCAiaXNSYW5nZSIsICJpc0NvbGxhcHNlZCIsICJhbmNob3IiLCAidm9pZCIsICJzdGFydFJlZiIsICJwb2ludFJlZiIsICJlbmRSZWYiLCAiVHJhbnNmb3JtcyIsICJzdGFydFBvaW50IiwgInVucmVmIiwgImVuZFBvaW50IiwgInNldFNlbGVjdGlvbiIsICJmb2N1cyIsICJlbGVtZW50UmVhZE9ubHkiLCAiYXBwbHkiLCAiR2VuZXJhbFRyYW5zZm9ybXMiLCAiTm9kZVRyYW5zZm9ybXMiLCAiU2VsZWN0aW9uVHJhbnNmb3JtcyIsICJyZWYiLCAicGF0aFJlZnMiLCAiUGF0aFJlZiIsICJwb2ludFJlZnMiLCAiUG9pbnRSZWYiLCAicmFuZ2VSZWZzIiwgIlJhbmdlUmVmIiwgIm9sZERpcnR5UGF0aHMiLCAiRElSVFlfUEFUSFMiLCAiZ2V0IiwgIm9sZERpcnR5UGF0aEtleXMiLCAiRElSVFlfUEFUSF9LRVlTIiwgIlNldCIsICJkaXJ0eVBhdGhzIiwgImRpcnR5UGF0aEtleXMiLCAiYWRkIiwgImpvaW4iLCAiaGFzIiwgIm9wZXJhdGlvbkNhblRyYW5zZm9ybVBhdGgiLCAibmV3UGF0aCIsICJuZXdEaXJ0eVBhdGhzIiwgImdldERpcnR5UGF0aHMiLCAic2V0IiwgIm9wZXJhdGlvbnMiLCAibm9ybWFsaXplIiwgIm9wZXJhdGlvbiIsICJtYXJrcyIsICJGTFVTSElORyIsICJQcm9taXNlIiwgInJlc29sdmUiLCAidGhlbiIsICJvbkNoYW5nZSIsICJsZXZlbHMiLCAiZGVzY2VuZGFudHMiLCAiZnJvbSIsICJOb2RlIiwgIm5vZGVzIiwgIl9yZWYiLCAiY29uY2F0IiwgImFuY2VzdG9ycyIsICJwcmV2aW91c1BhdGgiLCAicHJldmlvdXMiLCAib2xkQW5jZXN0b3JzIiwgIm5ld0FuY2VzdG9ycyIsICJhbmNlc3RvciIsICJuZXdQYXJlbnQiLCAibmV3SW5kZXgiLCAicmVzdWx0UGF0aCIsICJuZXh0UGF0aCIsICJnZXRGcmFnbWVudCIsICJub3JtYWxpemVOb2RlIiwgImVudHJ5IiwgIkVsZW1lbnQiLCAiaXNFbGVtZW50IiwgImNoaWxkIiwgImluc2VydE5vZGVzIiwgInNob3VsZEhhdmVJbmxpbmVzIiwgImlzRWRpdG9yIiwgImlzSW5saW5lIiwgImN1cnJlbnROb2RlIiwgInByZXYiLCAiaXNMYXN0IiwgImlzSW5saW5lT3JUZXh0IiwgInJlbW92ZU5vZGVzIiwgIm5ld0NoaWxkIiwgIm1lcmdlTm9kZXMiLCAic2hvdWxkTm9ybWFsaXplIiwgIml0ZXJhdGlvbiIsICJpbml0aWFsRGlydHlQYXRoc0xlbmd0aCIsICJtYXhJdGVyYXRpb25zIiwgIkVycm9yIiwgImFib3ZlIiwgIm1vZGUiLCAicmV2ZXJzZSIsICJhZGRNYXJrIiwgInBhcmVudE5vZGUiLCAicGFyZW50UGF0aCIsICJwYXJlbnQiLCAiaXNWb2lkIiwgIm1hcmthYmxlVm9pZCIsICJleHBhbmRlZFNlbGVjdGlvbiIsICJpc0V4cGFuZGVkIiwgIm1hcmtBY2NlcHRpbmdWb2lkU2VsZWN0ZWQiLCAic2VsZWN0ZWROb2RlIiwgInNlbGVjdGVkUGF0aCIsICJzZXROb2RlcyIsICJzcGxpdCIsICJlZGdlIiwgImQiLCAidGFyZ2V0IiwgInBvc2l0aW9ucyIsICJkZWxldGVCYWNrd2FyZCIsICJ1bml0IiwgImRlbGV0ZUZvcndhcmQiLCAiZGVsZXRlRnJhZ21lbnQiLCAiZGlyZWN0aW9uIiwgImlzRWxlbWVudFJlYWRPbmx5IiwgImZpcnN0IiwgImdldFZvaWQiLCAiaGFzQmxvY2tzIiwgImVsZW1lbnQiLCAic29tZSIsICJpc0Jsb2NrIiwgImhhc0lubGluZXMiLCAiaGFzUGF0aCIsICJoYXNUZXh0cyIsICJpbnNlcnRCcmVhayIsICJzcGxpdE5vZGVzIiwgImFsd2F5cyIsICJpbnNlcnROb2RlIiwgImluc2VydFNvZnRCcmVhayIsICJpc0VkZ2UiLCAiaXNTdGFydCIsICJpc0VuZCIsICJpc0VtcHR5IiwgImlzTm9ybWFsaXppbmciLCAiTk9STUFMSVpJTkciLCAibGFzdCIsICJtYXJrZWRWb2lkIiwgImJsb2NrIiwgInByZXZOb2RlIiwgInByZXZQYXRoIiwgImJsb2NrUGF0aCIsICJwb2ludEFmdGVyTG9jYXRpb24iLCAidG8iLCAic3BhbiIsICJpbmNsdWRlcyIsICJ1bml2ZXJzYWwiLCAiaWdub3JlTm9uU2VsZWN0YWJsZSIsICJub2RlRW50cmllcyIsICJwYXNzIiwgImlzU2VsZWN0YWJsZSIsICJoaXQiLCAiaXNMb3dlciIsICJlbWl0IiwgImZvcmNlIiwgImdldERpcnR5UGF0aEtleXMiLCAicG9wRGlydHlQYXRoIiwgInBvcCIsICJhbGxQYXRocyIsICJhbGxQYXRoS2V5cyIsICJtYXAiLCAiZGlydHlQYXRoIiwgIl8iLCAicGF0aFJlZiIsICJjdXJyZW50IiwgInJlZnMiLCAiUEFUSF9SRUZTIiwgImRlcHRoIiwgImZpcnN0UGF0aCIsICJsYXN0UGF0aCIsICJjb21tb24iLCAiUE9JTlRfUkVGUyIsICJpc05ld0Jsb2NrIiwgImJsb2NrVGV4dCIsICJsZWFmVGV4dFJlbWFpbmluZyIsICJsZWFmVGV4dE9mZnNldCIsICJlIiwgInMiLCAic3RyaW5nIiwgImlzRmlyc3QiLCAiY2FsY0Rpc3RhbmNlIiwgInBvaW50QmVmb3JlTG9jYXRpb24iLCAicmFuZ2VSZWYiLCAiUkFOR0VfUkVGUyIsICJyZW1vdmVNYXJrIiwgInVuc2V0Tm9kZXMiLCAic2V0Tm9ybWFsaXppbmciLCAidCIsICJ1bmhhbmdSYW5nZSIsICJoYXNQcmV2aW91cyIsICJlbmRCbG9jayIsICJza2lwIiwgImZuIiwgImRlbGV0ZVRleHQiLCAiX0VkaXRvciR2b2lkIiwgIl9FZGl0b3Ikdm9pZDIiLCAiaGFuZ2luZyIsICJmdXJ0aGVzdFZvaWQiLCAidm9pZFBhdGgiLCAib3B0cyIsICJlbmRPZkRvYyIsICJzdGFydEJsb2NrIiwgImlzQWNyb3NzQmxvY2tzIiwgImlzU2luZ2xlVGV4dCIsICJzdGFydE5vbkVkaXRhYmxlIiwgImVuZE5vbkVkaXRhYmxlIiwgImlzQ29tbW9uIiwgInJlbW92ZWRUZXh0IiwgImZpbHRlciIsICJmb3JFYWNoIiwgInN0YXJ0VW5yZWYiLCAiZW5kVW5yZWYiLCAic2VsZWN0IiwgImlubGluZUVsZW1lbnRNYXRjaCIsICJpbmxpbmVQYXRoIiwgImJsb2NrTWF0Y2giLCAiaXNCbG9ja1N0YXJ0IiwgImlzQmxvY2tFbmQiLCAiaXNCbG9ja0VtcHR5IiwgIm1lcmdlU3RhcnQiLCAibWVyZ2VFbmQiLCAibWF0Y2hlciIsICJpc1Jvb3QiLCAic3RhcnRzIiwgIm1pZGRsZXMiLCAiZW5kcyIsICJzdGFydGluZyIsICJpbmxpbmVNYXRjaCIsICJpc0lubGluZVN0YXJ0IiwgImlzSW5saW5lRW5kIiwgIm1pZGRsZVJlZiIsICJjb2xsYXBzZSIsICJkZXNlbGVjdCIsICJwcm9wZXJ0aWVzIiwgIm5ld1Byb3BlcnRpZXMiLCAibW92ZSIsICJpc0JhY2t3YXJkIiwgInNldFBvaW50IiwgIm9sZFByb3BzIiwgIm5ld1Byb3BzIiwgImsiLCAia2V5cyIsICJpc05vZGUiLCAiaXNBdEVuZCIsICJpbmRleCIsICJsaWZ0Tm9kZXMiLCAicGFyZW50Tm9kZUVudHJ5IiwgInRvUGF0aCIsICJtb3ZlTm9kZXMiLCAic3BsaXRQYXRoIiwgImhhc1NpbmdsZUNoaWxkTmVzdCIsICJjb21tb25QYXRoIiwgImlzUHJldmlvdXNTaWJsaW5nIiwgImlzU2libGluZyIsICJlbXB0eUFuY2VzdG9yIiwgImVtcHR5UmVmIiwgInRvUmVmIiwgInRhcmdldHMiLCAiZGVwdGhzIiwgIm1lcmdlIiwgInNwbGl0TW9kZSIsICJlbmRBdEVuZE9mTm9kZSIsICJzdGFydEF0U3RhcnRPZk5vZGUiLCAicHJvcCIsICJub2RlUHJvcCIsICJoYXNDaGFuZ2VzIiwgImRlbGV0ZVJhbmdlIiwgImhlaWdodCIsICJiZWZvcmVSZWYiLCAiYWZ0ZXJSZWYiLCAiaGlnaGVzdCIsICJ2b2lkTWF0Y2giLCAibnVkZ2UiLCAidm9pZE5vZGUiLCAiYWZ0ZXJQYXRoIiwgInNpYmxpbmdIZWlnaHQiLCAiaGlnaGVzdFBhdGgiLCAibG93ZXN0UGF0aCIsICJleHRyYWN0UHJvcHMiLCAiX2FmdGVyUmVmIiwgInVud3JhcE5vZGVzIiwgIl9sb29wIiwgImludGVyc2VjdGlvbiIsICJ3cmFwTm9kZXMiLCAicm9vdHMiLCAiYSIsICJyb290UGF0aCIsICJjb21tb25Ob2RlRW50cnkiLCAiY29tbW9uTm9kZSIsICJ3cmFwcGVyUGF0aCIsICJ3cmFwcGVyIiwgIl9yZXQiLCAiY3JlYXRlRWRpdG9yIiwgIl9sZW4iLCAiYXJncyIsICJfa2V5IiwgIl9sZW4yIiwgIl9rZXkyIiwgIl9sZW4zIiwgIl9rZXkzIiwgIl9sZW40IiwgIl9rZXk0IiwgIl9sZW41IiwgIl9rZXk1IiwgIl9sZW42IiwgIl9rZXk2IiwgIl9sZW43IiwgIl9rZXk3IiwgIl9sZW44IiwgIl9rZXk4IiwgIl9sZW45IiwgIl9rZXk5IiwgIl9sZW4xMCIsICJfa2V5MTAiLCAiX2xlbjExIiwgIl9rZXkxMSIsICJfbGVuMTIiLCAiX2tleTEyIiwgIl9sZW4xMyIsICJfa2V5MTMiLCAiX2xlbjE0IiwgIl9rZXkxNCIsICJfbGVuMTUiLCAiX2tleTE1IiwgIl9sZW4xNiIsICJfa2V5MTYiLCAiX2xlbjE3IiwgIl9rZXkxNyIsICJfbGVuMTgiLCAiX2tleTE4IiwgIl9sZW4xOSIsICJfa2V5MTkiLCAiX2RlbGV0ZSIsICJfbGVuMjAiLCAiX2tleTIwIiwgIl9sZW4yMSIsICJfa2V5MjEiLCAiX2xlbjIyIiwgIl9rZXkyMiIsICJfbGVuMjMiLCAiX2tleTIzIiwgIl9sZW4yNCIsICJfa2V5MjQiLCAiX2xlbjI1IiwgIl9rZXkyNSIsICJfbGVuMjYiLCAiX2tleTI2IiwgImdldE1hcmtzIiwgIl9sZW4yNyIsICJfa2V5MjciLCAiX2xlbjI4IiwgIl9rZXkyOCIsICJfbGVuMjkiLCAiX2tleTI5IiwgIl9sZW4zMCIsICJfa2V5MzAiLCAiX2xlbjMxIiwgIl9rZXkzMSIsICJfbGVuMzIiLCAiX2tleTMyIiwgIl9sZW4zMyIsICJfa2V5MzMiLCAiX2xlbjM0IiwgIl9rZXkzNCIsICJfbGVuMzUiLCAiX2tleTM1IiwgIl9sZW4zNiIsICJfa2V5MzYiLCAiX2xlbjM3IiwgIl9rZXkzNyIsICJfbGVuMzgiLCAiX2tleTM4IiwgIl9sZW4zOSIsICJfa2V5MzkiLCAiX2xlbjQwIiwgIl9rZXk0MCIsICJfbGVuNDEiLCAiX2tleTQxIiwgIl9sZW40MiIsICJfa2V5NDIiLCAiX2xlbjQzIiwgIl9rZXk0MyIsICJfbGVuNDQiLCAiX2tleTQ0IiwgIl9sZW40NSIsICJfa2V5NDUiLCAiX2xlbjQ2IiwgIl9rZXk0NiIsICJfbGVuNDciLCAiX2tleTQ3IiwgIl9sZW40OCIsICJfa2V5NDgiLCAiX2xlbjQ5IiwgIl9rZXk0OSIsICJfbGVuNTAiLCAiX2tleTUwIiwgIl9sZW41MSIsICJfa2V5NTEiLCAiX2xlbjUyIiwgIl9rZXk1MiIsICJfbGVuNTMiLCAiX2tleTUzIiwgIl9sZW41NCIsICJfa2V5NTQiLCAiX2xlbjU1IiwgIl9rZXk1NSIsICJfbGVuNTYiLCAiX2tleTU2IiwgIl9sZW41NyIsICJfa2V5NTciLCAiX2xlbjU4IiwgIl9rZXk1OCIsICJfbGVuNTkiLCAiX2tleTU5IiwgIl9sZW42MCIsICJfa2V5NjAiLCAiX2xlbjYxIiwgIl9rZXk2MSIsICJfbGVuNjIiLCAiX2tleTYyIiwgIl9sZW42MyIsICJfa2V5NjMiLCAiX2xlbjY0IiwgIl9rZXk2NCIsICJfbGVuNjUiLCAiX2tleTY1IiwgIl9sZW42NiIsICJfa2V5NjYiLCAiX2xlbjY3IiwgIl9rZXk2NyIsICJfbGVuNjgiLCAiX2tleTY4IiwgIl9sZW42OSIsICJfa2V5NjkiLCAiX2xlbjcwIiwgIl9rZXk3MCIsICJfbGVuNzEiLCAiX2tleTcxIiwgIl9sZW43MiIsICJfa2V5NzIiLCAiX2xlbjczIiwgIl9rZXk3MyIsICJfdm9pZCIsICJfbGVuNzQiLCAiX2tleTc0IiwgIl9sZW43NSIsICJfa2V5NzUiLCAiX2xlbjc2IiwgIl9rZXk3NiIsICJlbCIsICJub2RlVHlwZSIsICJjYW5PdmVyZmxvdyIsICJvdmVyZmxvdyIsICJza2lwT3ZlcmZsb3dIaWRkZW5FbGVtZW50cyIsICJ0IiwgImlzU2Nyb2xsYWJsZSIsICJjbGllbnRIZWlnaHQiLCAic2Nyb2xsSGVpZ2h0IiwgImNsaWVudFdpZHRoIiwgInNjcm9sbFdpZHRoIiwgInN0eWxlIiwgImdldENvbXB1dGVkU3R5bGUiLCAib3ZlcmZsb3dZIiwgIm92ZXJmbG93WCIsICJmcmFtZSIsICJvd25lckRvY3VtZW50IiwgImRlZmF1bHRWaWV3IiwgImZyYW1lRWxlbWVudCIsICJlIiwgInNjcm9sbGluZ0VkZ2VTdGFydCIsICJzY3JvbGxpbmdFZGdlRW5kIiwgInNjcm9sbGluZ1NpemUiLCAic2Nyb2xsaW5nQm9yZGVyU3RhcnQiLCAic2Nyb2xsaW5nQm9yZGVyRW5kIiwgImVsZW1lbnRFZGdlU3RhcnQiLCAiZWxlbWVudEVkZ2VFbmQiLCAiZWxlbWVudFNpemUiLCAidGFyZ2V0IiwgIm9wdGlvbnMiLCAid2luZG93V2l0aFZpZXdwb3J0IiwgIndpbmRvdyIsICJzY3JvbGxNb2RlIiwgImJsb2NrIiwgImlubGluZSIsICJib3VuZGFyeSIsICJjaGVja0JvdW5kYXJ5IiwgIm5vZGUiLCAiaXNFbGVtZW50IiwgImVsZW1lbnQiLCAicGFyZW50IiwgInNjcm9sbGluZ0VsZW1lbnQiLCAiZG9jdW1lbnQiLCAiZG9jdW1lbnRFbGVtZW50IiwgImZyYW1lcyIsICJjdXJzb3IiLCAicGFyZW50RWxlbWVudCIsICJnZXRSb290Tm9kZSIsICJob3N0IiwgInB1c2giLCAiYm9keSIsICJ2aWV3cG9ydFdpZHRoIiwgInZpc3VhbFZpZXdwb3J0IiwgIndpZHRoIiwgImlubmVyV2lkdGgiLCAidmlld3BvcnRIZWlnaHQiLCAiaGVpZ2h0IiwgImlubmVySGVpZ2h0IiwgInNjcm9sbFgiLCAicGFnZVhPZmZzZXQiLCAidmlld3BvcnRZIiwgInNjcm9sbFkiLCAicGFnZVlPZmZzZXQiLCAiX3RhcmdldCRnZXRCb3VuZGluZ0NsIiwgImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsICJ0YXJnZXRIZWlnaHQiLCAidGFyZ2V0V2lkdGgiLCAidGFyZ2V0VG9wIiwgInRvcCIsICJ0YXJnZXRSaWdodCIsICJyaWdodCIsICJ0YXJnZXRCb3R0b20iLCAiYm90dG9tIiwgInRhcmdldExlZnQiLCAibGVmdCIsICJ0YXJnZXRCbG9jayIsICJ0YXJnZXRJbmxpbmUiLCAiY29tcHV0YXRpb25zIiwgImluZGV4IiwgImxlbmd0aCIsICJfZnJhbWUkZ2V0Qm91bmRpbmdDbGkiLCAiZnJhbWVTdHlsZSIsICJib3JkZXJMZWZ0IiwgInBhcnNlSW50IiwgImJvcmRlckxlZnRXaWR0aCIsICJib3JkZXJUb3AiLCAiYm9yZGVyVG9wV2lkdGgiLCAiYm9yZGVyUmlnaHRXaWR0aCIsICJib3JkZXJCb3R0b20iLCAiYm9yZGVyQm90dG9tV2lkdGgiLCAiYmxvY2tTY3JvbGwiLCAiaW5saW5lU2Nyb2xsIiwgInNjcm9sbGJhcldpZHRoIiwgIm9mZnNldFdpZHRoIiwgImJvcmRlclJpZ2h0IiwgInNjcm9sbGJhckhlaWdodCIsICJvZmZzZXRIZWlnaHQiLCAic2NhbGVYIiwgInNjYWxlWSIsICJhbGlnbk5lYXJlc3QiLCAidmlld3BvcnRYIiwgIk1hdGgiLCAibWF4IiwgInNjcm9sbExlZnQiLCAic2Nyb2xsVG9wIiwgIm1pbiIsICJSZXNpemVPYnNlcnZlckJveE9wdGlvbnMiLCAiZnJlZXplIiwgIlJlc2l6ZU9ic2VydmVyU2l6ZSIsICJmcmVlemUiLCAiRE9NUmVjdFJlYWRPbmx5IiwgImZyZWV6ZSIsICJpc0VsZW1lbnQiLCAiZ2xvYmFsIiwgImdsb2JhbCIsICJmcmVlemUiLCAiUmVzaXplT2JzZXJ2ZXJFbnRyeSIsICJmcmVlemUiLCAibm9kZSIsICJwYXJlbnQiLCAiY2FsbGJhY2tzIiwgInByb2Nlc3MiLCAiUmVzaXplT2JzZXJ2ZXIiLCAiU2NoZWR1bGVyIiwgInByb2Nlc3MiLCAiZ2xvYmFsIiwgIm4iLCAiUmVzaXplT2JzZXJ2YXRpb24iLCAic2l6ZSIsICJSZXNpemVPYnNlcnZlckRldGFpbCIsICJpIiwgIlJlc2l6ZU9ic2VydmVyQ29udHJvbGxlciIsICJSZXNpemVPYnNlcnZlciIsICJpc0VsZW1lbnQiLCAiX2RlZmluZVByb3BlcnR5IiwgIl9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIiwgImkiLCAiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwgIm9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UiLCAibiIsICJLZXkiLCAiY29uc3RydWN0b3IiLCAiaWQiLCAiTk9ERV9UT19JTkRFWCIsICJXZWFrTWFwIiwgIk5PREVfVE9fUEFSRU5UIiwgIkVESVRPUl9UT19XSU5ET1ciLCAiRURJVE9SX1RPX0VMRU1FTlQiLCAiRURJVE9SX1RPX1BMQUNFSE9MREVSX0VMRU1FTlQiLCAiRUxFTUVOVF9UT19OT0RFIiwgIk5PREVfVE9fRUxFTUVOVCIsICJOT0RFX1RPX0tFWSIsICJFRElUT1JfVE9fS0VZX1RPX0VMRU1FTlQiLCAiSVNfUkVBRF9PTkxZIiwgIklTX0ZPQ1VTRUQiLCAiSVNfQ09NUE9TSU5HIiwgIkVESVRPUl9UT19VU0VSX1NFTEVDVElPTiIsICJFRElUT1JfVE9fT05fQ0hBTkdFIiwgIkVESVRPUl9UT19TQ0hFRFVMRV9GTFVTSCIsICJFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MiLCAiRURJVE9SX1RPX1VTRVJfTUFSS1MiLCAiRURJVE9SX1RPX1BFTkRJTkdfRElGRlMiLCAiRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OIiwgIkVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTiIsICJFRElUT1JfVE9fRk9SQ0VfUkVOREVSIiwgIlBMQUNFSE9MREVSX1NZTUJPTCIsICJTeW1ib2wiLCAiTUFSS19QTEFDRUhPTERFUl9TWU1CT0wiLCAiRE9NVGV4dCIsICJnbG9iYWxUaGlzIiwgIlRleHQiLCAiZ2V0RGVmYXVsdFZpZXciLCAidmFsdWUiLCAib3duZXJEb2N1bWVudCIsICJkZWZhdWx0VmlldyIsICJpc0RPTUNvbW1lbnQiLCAiaXNET01Ob2RlIiwgIm5vZGVUeXBlIiwgImlzRE9NRWxlbWVudCIsICJ3aW5kb3ciLCAiTm9kZSIsICJpc0RPTVNlbGVjdGlvbiIsICJhbmNob3JOb2RlIiwgIlNlbGVjdGlvbiIsICJpc0RPTVRleHQiLCAiaXNQbGFpblRleHRPbmx5UGFzdGUiLCAiZXZlbnQiLCAiY2xpcGJvYXJkRGF0YSIsICJnZXREYXRhIiwgInR5cGVzIiwgImxlbmd0aCIsICJub3JtYWxpemVET01Qb2ludCIsICJkb21Qb2ludCIsICJub2RlIiwgIm9mZnNldCIsICJjaGlsZE5vZGVzIiwgImlzTGFzdCIsICJpbmRleCIsICJnZXRFZGl0YWJsZUNoaWxkQW5kSW5kZXgiLCAiZ2V0RWRpdGFibGVDaGlsZCIsICJ0ZXh0Q29udGVudCIsICJoYXNTaGFkb3dSb290IiwgInBhcmVudCIsICJwYXJlbnROb2RlIiwgInRvU3RyaW5nIiwgImRpcmVjdGlvbiIsICJjaGlsZCIsICJ0cmllZEZvcndhcmQiLCAidHJpZWRCYWNrd2FyZCIsICJnZXRBdHRyaWJ1dGUiLCAiZ2V0UGxhaW5UZXh0IiwgImRvbU5vZGUiLCAidGV4dCIsICJub2RlVmFsdWUiLCAiY2hpbGROb2RlIiwgIkFycmF5IiwgImZyb20iLCAiZGlzcGxheSIsICJnZXRDb21wdXRlZFN0eWxlIiwgImdldFByb3BlcnR5VmFsdWUiLCAidGFnTmFtZSIsICJjYXRjaFNsYXRlRnJhZ21lbnQiLCAiZ2V0U2xhdGVGcmFnbWVudEF0dHJpYnV0ZSIsICJkYXRhVHJhbnNmZXIiLCAiaHRtbERhdGEiLCAiZnJhZ21lbnQiLCAibWF0Y2giLCAiaXNUcmFja2VkTXV0YXRpb24iLCAiZWRpdG9yIiwgIm11dGF0aW9uIiwgImJhdGNoIiwgInRhcmdldCIsICJtYXRjaGVzIiwgImRvY3VtZW50IiwgIlJlYWN0RWRpdG9yIiwgImdldFdpbmRvdyIsICJjb250YWlucyIsICJoYXNET01Ob2RlIiwgImVkaXRhYmxlIiwgInBhcmVudE11dGF0aW9uIiwgImZpbmQiLCAiYWRkZWROb2RlcyIsICJyZW1vdmVkTm9kZXMiLCAiSVNfUkVBQ1RfVkVSU0lPTl8xN19PUl9BQk9WRSIsICJwYXJzZUludCIsICJSZWFjdCIsICJ2ZXJzaW9uIiwgInNwbGl0IiwgIklTX0lPUyIsICJuYXZpZ2F0b3IiLCAidGVzdCIsICJ1c2VyQWdlbnQiLCAiTVNTdHJlYW0iLCAiSVNfQVBQTEUiLCAiSVNfQU5EUk9JRCIsICJJU19GSVJFRk9YIiwgIklTX1NBRkFSSSIsICJJU19FREdFX0xFR0FDWSIsICJJU19DSFJPTUUiLCAiSVNfQ0hST01FX0xFR0FDWSIsICJJU19GSVJFRk9YX0xFR0FDWSIsICJJU19VQ19NT0JJTEUiLCAiSVNfV0VDSEFUQlJPV1NFUiIsICJDQU5fVVNFX0RPTSIsICJjcmVhdGVFbGVtZW50IiwgIkhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCIsICJJbnB1dEV2ZW50IiwgInByb3RvdHlwZSIsICJnZXRUYXJnZXRSYW5nZXMiLCAiaXNDb21wb3NpbmciLCAiZ2V0IiwgIkVycm9yIiwgImZpbmRLZXkiLCAia2V5IiwgInNldCIsICJmaW5kUGF0aCIsICJwYXRoIiwgIkVkaXRvciIsICJpc0VkaXRvciIsICJ1bnNoaWZ0IiwgIlNjcnViYmVyIiwgInN0cmluZ2lmeSIsICJmaW5kRG9jdW1lbnRPclNoYWRvd1Jvb3QiLCAiZWwiLCAidG9ET01Ob2RlIiwgInJvb3QiLCAiZ2V0Um9vdE5vZGUiLCAiRG9jdW1lbnQiLCAiU2hhZG93Um9vdCIsICJnZXRTZWxlY3Rpb24iLCAiaXNGb2N1c2VkIiwgImlzUmVhZE9ubHkiLCAiYmx1ciIsICJhY3RpdmVFbGVtZW50IiwgImZvY3VzIiwgInByZXZlbnRTY3JvbGwiLCAiZGVzZWxlY3QiLCAic2VsZWN0aW9uIiwgImRvbVNlbGVjdGlvbiIsICJyYW5nZUNvdW50IiwgInJlbW92ZUFsbFJhbmdlcyIsICJUcmFuc2Zvcm1zIiwgIm9wdGlvbnMiLCAiZWRpdG9yRWwiLCAidGFyZ2V0RWwiLCAicGFyZW50RWxlbWVudCIsICJlcnIiLCAibWVzc2FnZSIsICJpbmNsdWRlcyIsICJjbG9zZXN0IiwgImlzQ29udGVudEVkaXRhYmxlIiwgImluc2VydERhdGEiLCAiZGF0YSIsICJpbnNlcnRGcmFnbWVudERhdGEiLCAiaW5zZXJ0VGV4dERhdGEiLCAic2V0RnJhZ21lbnREYXRhIiwgIm9yaWdpbkV2ZW50IiwgIktFWV9UT19FTEVNRU5UIiwgInRvRE9NUG9pbnQiLCAicG9pbnQiLCAidm9pZCIsICJhdCIsICJzZWxlY3RvciIsICJ0ZXh0cyIsICJxdWVyeVNlbGVjdG9yQWxsIiwgInN0YXJ0IiwgImF0dHIiLCAidHJ1ZUxlbmd0aCIsICJlbmQiLCAibmV4dFRleHQiLCAiaGFzQXR0cmlidXRlIiwgImRvbVRleHQiLCAic3RhcnRzV2l0aCIsICJNYXRoIiwgIm1pbiIsICJtYXgiLCAidG9ET01SYW5nZSIsICJyYW5nZSIsICJhbmNob3IiLCAiaXNCYWNrd2FyZCIsICJSYW5nZSIsICJkb21BbmNob3IiLCAiZG9tRm9jdXMiLCAiaXNDb2xsYXBzZWQiLCAiZG9tUmFuZ2UiLCAiY3JlYXRlUmFuZ2UiLCAic3RhcnROb2RlIiwgInN0YXJ0T2Zmc2V0IiwgImVuZE5vZGUiLCAiZW5kT2Zmc2V0IiwgInN0YXJ0RWwiLCAiaXNTdGFydEF0WmVyb1dpZHRoIiwgImVuZEVsIiwgImlzRW5kQXRaZXJvV2lkdGgiLCAic2V0U3RhcnQiLCAic2V0RW5kIiwgInRvU2xhdGVOb2RlIiwgImRvbUVsIiwgImZpbmRFdmVudFJhbmdlIiwgIm5hdGl2ZUV2ZW50IiwgImNsaWVudFgiLCAieCIsICJjbGllbnRZIiwgInkiLCAiRWxlbWVudCIsICJpc0VsZW1lbnQiLCAiaXNWb2lkIiwgInJlY3QiLCAiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwgImlzUHJldiIsICJpc0lubGluZSIsICJsZWZ0IiwgIndpZHRoIiwgInRvcCIsICJoZWlnaHQiLCAiZWRnZSIsICJiZWZvcmUiLCAiYWZ0ZXIiLCAiY2FyZXRSYW5nZUZyb21Qb2ludCIsICJwb3NpdGlvbiIsICJjYXJldFBvc2l0aW9uRnJvbVBvaW50IiwgIm9mZnNldE5vZGUiLCAidG9TbGF0ZVJhbmdlIiwgImV4YWN0TWF0Y2giLCAic3VwcHJlc3NUaHJvdyIsICJ0b1NsYXRlUG9pbnQiLCAibmVhcmVzdE5vZGUiLCAibmVhcmVzdE9mZnNldCIsICJ0ZXh0Tm9kZSIsICJwb3RlbnRpYWxWb2lkTm9kZSIsICJ2b2lkTm9kZSIsICJsZWFmTm9kZSIsICJjb250ZW50cyIsICJjbG9uZUNvbnRlbnRzIiwgInJlbW92YWxzIiwgInNsaWNlIiwgImNhbGwiLCAiZm9yRWFjaCIsICJ0ZXh0Q29udGV4dCIsICJyZW1vdmVDaGlsZCIsICJsZWFmTm9kZXMiLCAiY3VycmVudCIsICJlbmRzV2l0aCIsICJzbGF0ZU5vZGUiLCAicXVlcnlTZWxlY3RvciIsICJzdGFydENvbnRhaW5lciIsICJhbmNob3JPZmZzZXQiLCAiZm9jdXNOb2RlIiwgImZvY3VzT2Zmc2V0IiwgImVuZENvbnRhaW5lciIsICJjb2xsYXBzZWQiLCAiaXNFbmQiLCAiaXNTdGFydCIsICJpc0V4cGFuZGVkIiwgImlzRm9yd2FyZCIsICJtb2RlIiwgInVuaGFuZ1JhbmdlIiwgInZvaWRzIiwgImhhc1JhbmdlIiwgImhhc1BhdGgiLCAiaGFzVGFyZ2V0IiwgImhhc0VkaXRhYmxlVGFyZ2V0IiwgImhhc1NlbGVjdGFibGVUYXJnZXQiLCAiaXNUYXJnZXRJbnNpZGVOb25SZWFkb25seVZvaWQiLCAiYW5kcm9pZFNjaGVkdWxlRmx1c2giLCAiYW5kcm9pZFBlbmRpbmdEaWZmcyIsICJ1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IiwgInVzZUxheW91dEVmZmVjdCIsICJ1c2VFZmZlY3QiLCAic2hhbGxvd0NvbXBhcmUiLCAib2JqMSIsICJvYmoyIiwgIk9iamVjdCIsICJrZXlzIiwgImV2ZXJ5IiwgImhhc093blByb3BlcnR5IiwgImlzRGVjb3JhdG9yUmFuZ2VMaXN0RXF1YWwiLCAibGlzdCIsICJhbm90aGVyIiwgIm90aGVyIiwgInJhbmdlT3duUHJvcHMiLCAiX2V4Y2x1ZGVkJDMiLCAib3RoZXJPd25Qcm9wcyIsICJfZXhjbHVkZWQyJDEiLCAiZXF1YWxzIiwgIlN0cmluZyIsICJwcm9wcyIsICJsZWFmIiwgInVzZVNsYXRlU3RhdGljIiwgInBhcmVudFBhdGgiLCAiUGF0aCIsICJpc01hcmtQbGFjZWhvbGRlciIsICJaZXJvV2lkdGhTdHJpbmciLCAic3RyaW5nIiwgImNoaWxkcmVuIiwgImlzTGluZUJyZWFrIiwgIlRleHRTdHJpbmciLCAiaXNUcmFpbGluZyIsICJyZWYiLCAidXNlUmVmIiwgImdldFRleHRDb250ZW50IiwgInRleHRXaXRoVHJhaWxpbmciLCAiYXR0cmlidXRlcyIsICJFZGl0b3JDb250ZXh0IiwgImNyZWF0ZUNvbnRleHQiLCAidXNlQ29udGV4dCIsICJMZWFmIiwgInJlbmRlclBsYWNlaG9sZGVyIiwgInJlbmRlckxlYWYiLCAiRGVmYXVsdExlYWYiLCAibGFzdFBsYWNlaG9sZGVyUmVmIiwgInBsYWNlaG9sZGVyUmVmIiwgInBsYWNlaG9sZGVyUmVzaXplT2JzZXJ2ZXIiLCAiZGlzY29ubmVjdCIsICJwbGFjZWhvbGRlckVsIiwgImRlbGV0ZSIsICJvYnNlcnZlIiwgIlJlc2l6ZU9ic2VydmVyIiwgIlJlc2l6ZU9ic2VydmVyUG9seWZpbGwiLCAiZm9yY2VSZW5kZXIiLCAicGxhY2Vob2xkZXJQcm9wcyIsICJwbGFjZWhvbGRlciIsICJzdHlsZSIsICJwb2ludGVyRXZlbnRzIiwgIm1heFdpZHRoIiwgIm9wYWNpdHkiLCAidXNlclNlbGVjdCIsICJ0ZXh0RGVjb3JhdGlvbiIsICJjb250ZW50RWRpdGFibGUiLCAiRnJhZ21lbnQiLCAiTWVtb2l6ZWRMZWFmIiwgIm1lbW8iLCAicHJldiIsICJuZXh0IiwgImRlY29yYXRpb25zIiwgImxlYXZlcyIsICJTbGF0ZVRleHQiLCAicHVzaCIsICJNZW1vaXplZFRleHQiLCAiZWxlbWVudCIsICJyZW5kZXJFbGVtZW50IiwgInAiLCAiRGVmYXVsdEVsZW1lbnQiLCAicmVhZE9ubHkiLCAidXNlUmVhZE9ubHkiLCAidXNlQ2FsbGJhY2siLCAidXNlQ2hpbGRyZW4iLCAiaGFzSW5saW5lcyIsICJkaXIiLCAiZ2V0RGlyZWN0aW9uIiwgIlRhZyIsICJjb2xvciIsICJvdXRsaW5lIiwgIk1lbW9pemVkRWxlbWVudCIsICJEZWNvcmF0ZUNvbnRleHQiLCAidXNlRGVjb3JhdGUiLCAiU2VsZWN0ZWRDb250ZXh0IiwgInVzZUNoaWxkcmVuIiwgInByb3BzIiwgImRlY29yYXRpb25zIiwgIm5vZGUiLCAicmVuZGVyRWxlbWVudCIsICJyZW5kZXJQbGFjZWhvbGRlciIsICJyZW5kZXJMZWFmIiwgInNlbGVjdGlvbiIsICJkZWNvcmF0ZSIsICJ1c2VEZWNvcmF0ZSIsICJlZGl0b3IiLCAidXNlU2xhdGVTdGF0aWMiLCAicGF0aCIsICJSZWFjdEVkaXRvciIsICJmaW5kUGF0aCIsICJjaGlsZHJlbiIsICJpc0xlYWZCbG9jayIsICJFbGVtZW50IiwgImlzRWxlbWVudCIsICJpc0lubGluZSIsICJFZGl0b3IiLCAiaGFzSW5saW5lcyIsICJpIiwgImxlbmd0aCIsICJwIiwgImNvbmNhdCIsICJuIiwgImtleSIsICJmaW5kS2V5IiwgInJhbmdlIiwgInNlbCIsICJSYW5nZSIsICJpbnRlcnNlY3Rpb24iLCAiZHMiLCAiZGVjIiwgImQiLCAicHVzaCIsICJSZWFjdCIsICJTZWxlY3RlZENvbnRleHQiLCAiUHJvdmlkZXIiLCAiaWQiLCAidmFsdWUiLCAiRWxlbWVudENvbXBvbmVudCIsICJlbGVtZW50IiwgIlRleHRDb21wb25lbnQiLCAiaXNMYXN0IiwgInBhcmVudCIsICJ0ZXh0IiwgIk5PREVfVE9fSU5ERVgiLCAic2V0IiwgIk5PREVfVE9fUEFSRU5UIiwgIlJlYWRPbmx5Q29udGV4dCIsICJjcmVhdGVDb250ZXh0IiwgInVzZVJlYWRPbmx5IiwgInVzZUNvbnRleHQiLCAiU2xhdGVDb250ZXh0IiwgInVzZVNsYXRlIiwgImNvbnRleHQiLCAiRXJyb3IiLCAiVFJJUExFX0NMSUNLIiwgIkhPVEtFWVMiLCAiYm9sZCIsICJjb21wb3NlIiwgIm1vdmVCYWNrd2FyZCIsICJtb3ZlRm9yd2FyZCIsICJtb3ZlV29yZEJhY2t3YXJkIiwgIm1vdmVXb3JkRm9yd2FyZCIsICJkZWxldGVCYWNrd2FyZCIsICJkZWxldGVGb3J3YXJkIiwgImV4dGVuZEJhY2t3YXJkIiwgImV4dGVuZEZvcndhcmQiLCAiaXRhbGljIiwgImluc2VydFNvZnRCcmVhayIsICJzcGxpdEJsb2NrIiwgInVuZG8iLCAiQVBQTEVfSE9US0VZUyIsICJtb3ZlTGluZUJhY2t3YXJkIiwgIm1vdmVMaW5lRm9yd2FyZCIsICJkZWxldGVMaW5lQmFja3dhcmQiLCAiZGVsZXRlTGluZUZvcndhcmQiLCAiZGVsZXRlV29yZEJhY2t3YXJkIiwgImRlbGV0ZVdvcmRGb3J3YXJkIiwgImV4dGVuZExpbmVCYWNrd2FyZCIsICJleHRlbmRMaW5lRm9yd2FyZCIsICJyZWRvIiwgInRyYW5zcG9zZUNoYXJhY3RlciIsICJXSU5ET1dTX0hPVEtFWVMiLCAiY3JlYXRlIiwgImtleSIsICJnZW5lcmljIiwgImFwcGxlIiwgIndpbmRvd3MiLCAiaXNHZW5lcmljIiwgImlzS2V5SG90a2V5IiwgImlzQXBwbGUiLCAiaXNXaW5kb3dzIiwgImV2ZW50IiwgIklTX0FQUExFIiwgImlzQm9sZCIsICJpc0NvbXBvc2UiLCAiaXNNb3ZlQmFja3dhcmQiLCAiaXNNb3ZlRm9yd2FyZCIsICJpc0RlbGV0ZUJhY2t3YXJkIiwgImlzRGVsZXRlRm9yd2FyZCIsICJpc0RlbGV0ZUxpbmVCYWNrd2FyZCIsICJpc0RlbGV0ZUxpbmVGb3J3YXJkIiwgImlzRGVsZXRlV29yZEJhY2t3YXJkIiwgImlzRGVsZXRlV29yZEZvcndhcmQiLCAiaXNFeHRlbmRCYWNrd2FyZCIsICJpc0V4dGVuZEZvcndhcmQiLCAiaXNFeHRlbmRMaW5lQmFja3dhcmQiLCAiaXNFeHRlbmRMaW5lRm9yd2FyZCIsICJpc0l0YWxpYyIsICJpc01vdmVMaW5lQmFja3dhcmQiLCAiaXNNb3ZlTGluZUZvcndhcmQiLCAiaXNNb3ZlV29yZEJhY2t3YXJkIiwgImlzTW92ZVdvcmRGb3J3YXJkIiwgImlzUmVkbyIsICJpc1NvZnRCcmVhayIsICJpc1NwbGl0QmxvY2siLCAiaXNUcmFuc3Bvc2VDaGFyYWN0ZXIiLCAiaXNVbmRvIiwgImNyZWF0ZVJlc3RvcmVEb21NYW5hZ2VyIiwgImVkaXRvciIsICJyZWNlaXZlZFVzZXJJbnB1dCIsICJidWZmZXJlZE11dGF0aW9ucyIsICJjbGVhciIsICJyZWdpc3Rlck11dGF0aW9ucyIsICJtdXRhdGlvbnMiLCAiY3VycmVudCIsICJ0cmFja2VkTXV0YXRpb25zIiwgImZpbHRlciIsICJtdXRhdGlvbiIsICJpc1RyYWNrZWRNdXRhdGlvbiIsICJwdXNoIiwgInJlc3RvcmVET00iLCAicmV2ZXJzZSIsICJmb3JFYWNoIiwgInR5cGUiLCAidGFyZ2V0IiwgInRleHRDb250ZW50IiwgIm9sZFZhbHVlIiwgInJlbW92ZWROb2RlcyIsICJub2RlIiwgImluc2VydEJlZm9yZSIsICJuZXh0U2libGluZyIsICJhZGRlZE5vZGVzIiwgInJlbW92ZUNoaWxkIiwgIk1VVEFUSU9OX09CU0VSVkVSX0NPTkZJRyIsICJzdWJ0cmVlIiwgImNoaWxkTGlzdCIsICJjaGFyYWN0ZXJEYXRhIiwgImNoYXJhY3RlckRhdGFPbGRWYWx1ZSIsICJSZXN0b3JlRE9NQ29tcG9uZW50IiwgIkNvbXBvbmVudCIsICJjb25zdHJ1Y3RvciIsICJvYnNlcnZlIiwgInByb3BzIiwgIkVycm9yIiwgIm11dGF0aW9uT2JzZXJ2ZXIiLCAiY29tcG9uZW50RGlkTW91bnQiLCAiY29udGV4dCIsICJtYW5hZ2VyIiwgIk11dGF0aW9uT2JzZXJ2ZXIiLCAiZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUiLCAicGVuZGluZ011dGF0aW9ucyIsICJ0YWtlUmVjb3JkcyIsICJsZW5ndGgiLCAiZGlzY29ubmVjdCIsICJjb21wb25lbnREaWRVcGRhdGUiLCAiY29tcG9uZW50V2lsbFVubW91bnQiLCAicmVuZGVyIiwgImNoaWxkcmVuIiwgIkVkaXRvckNvbnRleHQiLCAiUmVzdG9yZURPTSIsICJJU19BTkRST0lEIiwgIlJlYWN0IiwgInZlcmlmeURpZmZTdGF0ZSIsICJ0ZXh0RGlmZiIsICJwYXRoIiwgImRpZmYiLCAiRWRpdG9yIiwgImhhc1BhdGgiLCAiTm9kZSIsICJnZXQiLCAiVGV4dCIsICJpc1RleHQiLCAic3RhcnQiLCAidGV4dCIsICJzbGljZSIsICJuZXh0UGF0aCIsICJQYXRoIiwgIm5leHQiLCAibmV4dE5vZGUiLCAic3RhcnRzV2l0aCIsICJhcHBseVN0cmluZ0RpZmYiLCAiZGlmZnMiLCAicmVkdWNlIiwgImVuZCIsICJsb25nZXN0Q29tbW9uUHJlZml4TGVuZ3RoIiwgInN0ciIsICJhbm90aGVyIiwgIk1hdGgiLCAibWluIiwgImkiLCAiY2hhckF0IiwgImxvbmdlc3RDb21tb25TdWZmaXhMZW5ndGgiLCAibWF4IiwgIm5vcm1hbGl6ZVN0cmluZ0RpZmYiLCAidGFyZ2V0VGV4dCIsICJyZW1vdmVkVGV4dCIsICJwcmVmaXhMZW5ndGgiLCAic3VmZml4TGVuZ3RoIiwgIm5vcm1hbGl6ZWQiLCAibWVyZ2VTdHJpbmdEaWZmcyIsICJhIiwgImIiLCAib3ZlcmxhcCIsICJhcHBsaWVkIiwgInNsaWNlRW5kIiwgInRhcmdldFJhbmdlIiwgImFuY2hvciIsICJvZmZzZXQiLCAiZm9jdXMiLCAibm9ybWFsaXplUG9pbnQiLCAicG9pbnQiLCAibGVhZiIsICJwYXJlbnRCbG9jayIsICJhYm92ZSIsICJtYXRjaCIsICJuIiwgIkVsZW1lbnQiLCAiaXNFbGVtZW50IiwgImlzQmxvY2siLCAiYXQiLCAiZW50cnkiLCAiaXNEZXNjZW5kYW50IiwgIm5vcm1hbGl6ZVJhbmdlIiwgInJhbmdlIiwgIlJhbmdlIiwgImlzQ29sbGFwc2VkIiwgInRyYW5zZm9ybVBlbmRpbmdQb2ludCIsICJvcCIsICJwZW5kaW5nRGlmZnMiLCAiRURJVE9SX1RPX1BFTkRJTkdfRElGRlMiLCAiZmluZCIsICJlcXVhbHMiLCAiUG9pbnQiLCAidHJhbnNmb3JtIiwgImFmZmluaXR5IiwgInRyYW5zZm9ybWVkIiwgInBvc2l0aW9uIiwgInRyYW5zZm9ybVBlbmRpbmdSYW5nZSIsICJ0cmFuc2Zvcm1UZXh0RGlmZiIsICJpZCIsICJuZXdQYXRoIiwgIlJFU09MVkVfREVMQVkiLCAiRkxVU0hfREVMQVkiLCAiZGVidWciLCAiY3JlYXRlQW5kcm9pZElucHV0TWFuYWdlciIsICJzY2hlZHVsZU9uRE9NU2VsZWN0aW9uQ2hhbmdlIiwgIm9uRE9NU2VsZWN0aW9uQ2hhbmdlIiwgImZsdXNoaW5nIiwgImNvbXBvc2l0aW9uRW5kVGltZW91dElkIiwgImZsdXNoVGltZW91dElkIiwgImFjdGlvblRpbWVvdXRJZCIsICJpZENvdW50ZXIiLCAiaW5zZXJ0UG9zaXRpb25IaW50IiwgImFwcGx5UGVuZGluZ1NlbGVjdGlvbiIsICJwZW5kaW5nU2VsZWN0aW9uIiwgIkVESVRPUl9UT19QRU5ESU5HX1NFTEVDVElPTiIsICJkZWxldGUiLCAic2VsZWN0aW9uIiwgIlRyYW5zZm9ybXMiLCAic2VsZWN0IiwgInBlcmZvcm1BY3Rpb24iLCAiYWN0aW9uIiwgIkVESVRPUl9UT19QRU5ESU5HX0FDVElPTiIsICJpc1BvaW50IiwgInJ1biIsICJmbHVzaCIsICJjbGVhclRpbWVvdXQiLCAiaGFzUGVuZGluZ0RpZmZzIiwgImhhc1BlbmRpbmdBY3Rpb24iLCAic2V0VGltZW91dCIsICJzZWxlY3Rpb25SZWYiLCAicmFuZ2VSZWYiLCAiRURJVE9SX1RPX1VTRVJfTUFSS1MiLCAic2V0IiwgIm1hcmtzIiwgInNjaGVkdWxlU2VsZWN0aW9uQ2hhbmdlIiwgInBlbmRpbmdNYXJrcyIsICJFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MiLCAidW5kZWZpbmVkIiwgImluc2VydFRleHQiLCAiZGVsZXRlRnJhZ21lbnQiLCAiY2FuY2VsIiwgInVucmVmIiwgInVzZXJNYXJrcyIsICJvbkNoYW5nZSIsICJoYW5kbGVDb21wb3NpdGlvbkVuZCIsICJfZXZlbnQiLCAiSVNfQ09NUE9TSU5HIiwgImhhbmRsZUNvbXBvc2l0aW9uU3RhcnQiLCAidXBkYXRlUGxhY2Vob2xkZXJWaXNpYmlsaXR5IiwgImZvcmNlSGlkZSIsICJwbGFjZWhvbGRlckVsZW1lbnQiLCAiRURJVE9SX1RPX1BMQUNFSE9MREVSX0VMRU1FTlQiLCAic3R5bGUiLCAiZGlzcGxheSIsICJyZW1vdmVQcm9wZXJ0eSIsICJzdG9yZURpZmYiLCAiaWR4IiwgImZpbmRJbmRleCIsICJjaGFuZ2UiLCAibWVyZ2VkIiwgInNwbGljZSIsICJfb2JqZWN0U3ByZWFkJDMiLCAic2NoZWR1bGVBY3Rpb24iLCAiaGFuZGxlRE9NQmVmb3JlSW5wdXQiLCAiaW5wdXRUeXBlIiwgImRhdGEiLCAiZGF0YVRyYW5zZmVyIiwgIm5hdGl2ZVRhcmdldFJhbmdlIiwgImdldFRhcmdldFJhbmdlcyIsICJSZWFjdEVkaXRvciIsICJ0b1NsYXRlUmFuZ2UiLCAiZXhhY3RNYXRjaCIsICJzdXBwcmVzc1Rocm93IiwgIndpbmRvdyIsICJnZXRXaW5kb3ciLCAiZG9tU2VsZWN0aW9uIiwgImdldFNlbGVjdGlvbiIsICJpc0V4cGFuZGVkIiwgImVkZ2VzIiwgImRpcmVjdGlvbiIsICJlbmRzV2l0aCIsICJ0YXJnZXROb2RlIiwgIm5hdGl2ZUNvbGxhcHNlZCIsICJpc0RPTVNlbGVjdGlvbiIsICJjb2xsYXBzZWQiLCAidW5pdCIsICJpbnNlcnRCcmVhayIsICJuYW1lIiwgImluc2VydERhdGEiLCAiaW5jbHVkZXMiLCAicmVwbGFjZSIsICJoaW50UG9zaXRpb24iLCAic2VhcmNoIiwgImRpZmZQb3NpdGlvbiIsICJzY2hlZHVsZUZsdXNoIiwgImhhc1BlbmRpbmdDaGFuZ2VzIiwgImlzRmx1c2hpbmciLCAiaGFuZGxlVXNlclNlbGVjdCIsICJwYXRoQ2hhbmdlZCIsICJwYXJlbnRQYXRoQ2hhbmdlZCIsICJoYW5kbGVJbnB1dCIsICJoYW5kbGVLZXlEb3duIiwgIl8iLCAiaGFuZGxlRG9tTXV0YXRpb25zIiwgInNvbWUiLCAiRURJVE9SX1RPX0ZPUkNFX1JFTkRFUiIsICJ1c2VJc01vdW50ZWQiLCAiaXNNb3VudGVkUmVmIiwgInVzZVJlZiIsICJ1c2VFZmZlY3QiLCAidXNlTXV0YXRpb25PYnNlcnZlciIsICJjYWxsYmFjayIsICJvcHRpb25zIiwgInVzZVN0YXRlIiwgInVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QiLCAidXNlQW5kcm9pZElucHV0TWFuYWdlciIsICJ1c2VTbGF0ZVN0YXRpYyIsICJpc01vdW50ZWQiLCAiaW5wdXRNYW5hZ2VyIiwgIl9vYmplY3RTcHJlYWQkMiIsICJFRElUT1JfVE9fU0NIRURVTEVfRkxVU0giLCAidXNlVHJhY2tVc2VySW5wdXQiLCAiYW5pbWF0aW9uRnJhbWVJZFJlZiIsICJvblVzZXJJbnB1dCIsICJ1c2VDYWxsYmFjayIsICJjYW5jZWxBbmltYXRpb25GcmFtZSIsICJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCAiQ2hpbGRyZW4iLCAiRnJhZ21lbnQiLCAidXNlQ2hpbGRyZW4iLCAiRWRpdGFibGUiLCAiYXV0b0ZvY3VzIiwgImRlY29yYXRlIiwgImRlZmF1bHREZWNvcmF0ZSIsICJvbkRPTUJlZm9yZUlucHV0IiwgInByb3BzT25ET01CZWZvcmVJbnB1dCIsICJwbGFjZWhvbGRlciIsICJyZWFkT25seSIsICJyZW5kZXJFbGVtZW50IiwgInJlbmRlckxlYWYiLCAicmVuZGVyUGxhY2Vob2xkZXIiLCAiRGVmYXVsdFBsYWNlaG9sZGVyIiwgInNjcm9sbFNlbGVjdGlvbkludG9WaWV3IiwgImRlZmF1bHRTY3JvbGxTZWxlY3Rpb25JbnRvVmlldyIsICJ1c2VyU3R5bGUiLCAiYXMiLCAiZGlzYWJsZURlZmF1bHRTdHlsZXMiLCAiYXR0cmlidXRlcyIsICJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCAiX2V4Y2x1ZGVkJDEiLCAidXNlU2xhdGUiLCAiaXNDb21wb3NpbmciLCAic2V0SXNDb21wb3NpbmciLCAicmVmIiwgImRlZmVycmVkT3BlcmF0aW9ucyIsICJmb3JjZVJlbmRlciIsICJ1c2VSZWR1Y2VyIiwgInMiLCAiSVNfUkVBRF9PTkxZIiwgInN0YXRlIiwgInVzZU1lbW8iLCAiaXNEcmFnZ2luZ0ludGVybmFsbHkiLCAiaXNVcGRhdGluZ1NlbGVjdGlvbiIsICJsYXRlc3RFbGVtZW50IiwgImhhc01hcmtQbGFjZWhvbGRlciIsICJ0aHJvdHRsZSIsICJhbmRyb2lkSW5wdXRNYW5hZ2VyIiwgInJvb3QiLCAiZmluZERvY3VtZW50T3JTaGFkb3dSb290IiwgImFjdGl2ZUVsZW1lbnQiLCAiZWwiLCAidG9ET01Ob2RlIiwgIklTX0ZPQ1VTRUQiLCAiZGVzZWxlY3QiLCAiYW5jaG9yTm9kZSIsICJmb2N1c05vZGUiLCAiYW5jaG9yTm9kZVNlbGVjdGFibGUiLCAiaGFzRWRpdGFibGVUYXJnZXQiLCAiaXNUYXJnZXRJbnNpZGVOb25SZWFkb25seVZvaWQiLCAiZm9jdXNOb2RlU2VsZWN0YWJsZSIsICJkZWJvdW5jZSIsICJnZXREZWZhdWx0VmlldyIsICJFRElUT1JfVE9fV0lORE9XIiwgIkVESVRPUl9UT19FTEVNRU5UIiwgIk5PREVfVE9fRUxFTUVOVCIsICJFTEVNRU5UX1RPX05PREUiLCAiaXNGb2N1c2VkIiwgInNldERvbVNlbGVjdGlvbiIsICJmb3JjZUNoYW5nZSIsICJoYXNEb21TZWxlY3Rpb24iLCAiZWRpdG9yRWxlbWVudCIsICJoYXNEb21TZWxlY3Rpb25JbkVkaXRvciIsICJjb250YWlucyIsICJzbGF0ZVJhbmdlIiwgInBhcmVudEVsZW1lbnQiLCAiaGFzQXR0cmlidXRlIiwgImhhc1JhbmdlIiwgIm5ld0RvbVJhbmdlIiwgInRvRE9NUmFuZ2UiLCAiaXNCYWNrd2FyZCIsICJzZXRCYXNlQW5kRXh0ZW50IiwgImVuZENvbnRhaW5lciIsICJlbmRPZmZzZXQiLCAic3RhcnRDb250YWluZXIiLCAic3RhcnRPZmZzZXQiLCAicmVtb3ZlQWxsUmFuZ2VzIiwgImVuc3VyZVNlbGVjdGlvbiIsICJJU19GSVJFRk9YIiwgInRpbWVvdXRJZCIsICJhbmltYXRpb25GcmFtZUlkIiwgImVuc3VyZURvbVNlbGVjdGlvbiIsICJlIiwgImlzRE9NRXZlbnRIYW5kbGVkIiwgImlzQ29tcG9zaXRpb25DaGFuZ2UiLCAibmF0aXZlIiwgInRlc3QiLCAidG9ET01Qb2ludCIsICJjbG9zZXN0IiwgImhhc0RPTU5vZGUiLCAibGFzdFRleHQiLCAiZG9jdW1lbnQiLCAiY3JlYXRlVHJlZVdhbGtlciIsICJOb2RlRmlsdGVyIiwgIlNIT1dfVEVYVCIsICJsYXN0Q2hpbGQiLCAiZ2V0Q29tcHV0ZWRTdHlsZSIsICJ3aGl0ZVNwYWNlIiwgImJsb2NrIiwgInN0cmluZyIsICJFRElUT1JfVE9fVVNFUl9TRUxFQ1RJT04iLCAicHJldmVudERlZmF1bHQiLCAidG9SZXN0b3JlIiwgIkhBU19CRUZPUkVfSU5QVVRfU1VQUE9SVCIsICJhZGRFdmVudExpc3RlbmVyIiwgInJlbW92ZUV2ZW50TGlzdGVuZXIiLCAiZGVjb3JhdGlvbnMiLCAiQXJyYXkiLCAiZnJvbSIsICJ0ZXh0cyIsICJQTEFDRUhPTERFUl9TWU1CT0wiLCAicmVzdCIsICJfZXhjbHVkZWQyIiwgImxvb3NlIiwgInVuc2V0IiwgIk9iamVjdCIsICJmcm9tRW50cmllcyIsICJrZXlzIiwgIm1hcCIsICJtYXJrIiwgIl9vYmplY3RTcHJlYWQkMSIsICJNQVJLX1BMQUNFSE9MREVSX1NZTUJPTCIsICJwbGFjZWhvbGRlckhlaWdodCIsICJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCAiaGVpZ2h0IiwgIlJlYWRPbmx5Q29udGV4dCIsICJQcm92aWRlciIsICJ2YWx1ZSIsICJEZWNvcmF0ZUNvbnRleHQiLCAicm9sZSIsICJzcGVsbENoZWNrIiwgIkNBTl9VU0VfRE9NIiwgImF1dG9Db3JyZWN0IiwgImF1dG9DYXBpdGFsaXplIiwgImNvbnRlbnRFZGl0YWJsZSIsICJ6aW5kZXgiLCAic3VwcHJlc3NDb250ZW50RWRpdGFibGVXYXJuaW5nIiwgIm91dGxpbmUiLCAid29yZFdyYXAiLCAibWluSGVpZ2h0IiwgIm9uQmVmb3JlSW5wdXQiLCAiaXNFdmVudEhhbmRsZWQiLCAiaGFzU2VsZWN0YWJsZVRhcmdldCIsICJvbklucHV0IiwgIm9uQmx1ciIsICJyZWxhdGVkVGFyZ2V0IiwgImlzRE9NRWxlbWVudCIsICJpc0RPTU5vZGUiLCAidG9TbGF0ZU5vZGUiLCAiaXNWb2lkIiwgIklTX1NBRkFSSSIsICJvbkNsaWNrIiwgImhhc1RhcmdldCIsICJmaW5kUGF0aCIsICJkZXRhaWwiLCAiYmxvY2tQYXRoIiwgInN0YXJ0Vm9pZCIsICJ2b2lkIiwgImVuZFZvaWQiLCAib25Db21wb3NpdGlvbkVuZCIsICJJU19GSVJFRk9YX0xFR0FDWSIsICJJU19JT1MiLCAiSVNfV0VDSEFUQlJPV1NFUiIsICJJU19VQ19NT0JJTEUiLCAicGxhY2Vob2xkZXJNYXJrcyIsICJvbkNvbXBvc2l0aW9uVXBkYXRlIiwgIm9uQ29tcG9zaXRpb25TdGFydCIsICJpbmxpbmUiLCAiaXNJbmxpbmUiLCAibW9kZSIsICJpbmxpbmVQYXRoIiwgImlzRW5kIiwgImFmdGVyIiwgInNldFNlbGVjdGlvbiIsICJvbkNvcHkiLCAic2V0RnJhZ21lbnREYXRhIiwgImNsaXBib2FyZERhdGEiLCAib25DdXQiLCAicGFyZW50IiwgIm9uRHJhZ092ZXIiLCAib25EcmFnU3RhcnQiLCAidm9pZE1hdGNoIiwgInZvaWRzIiwgIm9uRHJvcCIsICJkcmFnZ2VkUmFuZ2UiLCAiZmluZEV2ZW50UmFuZ2UiLCAib25EcmFnRW5kIiwgIm9uRm9jdXMiLCAib25LZXlEb3duIiwgIm5hdGl2ZUV2ZW50IiwgImVsZW1lbnQiLCAiaXNSVEwiLCAiZ2V0RGlyZWN0aW9uIiwgIkhvdGtleXMiLCAibWF5YmVIaXN0b3J5RWRpdG9yIiwgIm1vdmUiLCAiZWRnZSIsICJjb2xsYXBzZSIsICJJU19DSFJPTUUiLCAiY3VycmVudE5vZGUiLCAib25QYXN0ZSIsICJpc1BsYWluVGV4dE9ubHlQYXN0ZSIsICJkb21SYW5nZSIsICJsZWFmRWwiLCAiYmluZCIsICJzY3JvbGxJbnRvVmlldyIsICJzY3JvbGxNb2RlIiwgImhhbmRsZXIiLCAic2hvdWxkVHJlYXRFdmVudEFzSGFuZGxlZCIsICJpc0RlZmF1bHRQcmV2ZW50ZWQiLCAiaXNQcm9wYWdhdGlvblN0b3BwZWQiLCAiZGVmYXVsdFByZXZlbnRlZCIsICJGb2N1c2VkQ29udGV4dCIsICJjcmVhdGVDb250ZXh0IiwgIlNsYXRlU2VsZWN0b3JDb250ZXh0IiwgImNyZWF0ZUNvbnRleHQiLCAiZ2V0U2VsZWN0b3JDb250ZXh0IiwgImVkaXRvciIsICJldmVudExpc3RlbmVycyIsICJ1c2VSZWYiLCAiY3VycmVudCIsICJzbGF0ZVJlZiIsICJvbkNoYW5nZSIsICJ1c2VDYWxsYmFjayIsICJmb3JFYWNoIiwgImxpc3RlbmVyIiwgInNlbGVjdG9yQ29udGV4dCIsICJ1c2VNZW1vIiwgImdldFNsYXRlIiwgImFkZEV2ZW50TGlzdGVuZXIiLCAiY2FsbGJhY2siLCAicHVzaCIsICJzcGxpY2UiLCAiaW5kZXhPZiIsICJTbGF0ZSIsICJwcm9wcyIsICJjaGlsZHJlbiIsICJ2YWx1ZSIsICJyZXN0IiwgIl9vYmplY3RXaXRob3V0UHJvcGVydGllcyIsICJfZXhjbHVkZWQiLCAidW5tb3VudFJlZiIsICJjb250ZXh0IiwgInNldENvbnRleHQiLCAiUmVhY3QiLCAidXNlU3RhdGUiLCAiTm9kZSIsICJpc05vZGVMaXN0IiwgIkVycm9yIiwgIlNjcnViYmVyIiwgInN0cmluZ2lmeSIsICJFZGl0b3IiLCAiaXNFZGl0b3IiLCAiT2JqZWN0IiwgImFzc2lnbiIsICJ2IiwgImhhbmRsZVNlbGVjdG9yQ2hhbmdlIiwgIm9uQ29udGV4dENoYW5nZSIsICJwcmV2Q29udGV4dCIsICJ1c2VFZmZlY3QiLCAiRURJVE9SX1RPX09OX0NIQU5HRSIsICJzZXQiLCAiaXNGb2N1c2VkIiwgInNldElzRm9jdXNlZCIsICJSZWFjdEVkaXRvciIsICJ1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IiwgImZuIiwgIklTX1JFQUNUX1ZFUlNJT05fMTdfT1JfQUJPVkUiLCAiZG9jdW1lbnQiLCAicmVtb3ZlRXZlbnRMaXN0ZW5lciIsICJTbGF0ZVNlbGVjdG9yQ29udGV4dCIsICJQcm92aWRlciIsICJTbGF0ZUNvbnRleHQiLCAiRWRpdG9yQ29udGV4dCIsICJGb2N1c2VkQ29udGV4dCIsICJkb1JlY3RzSW50ZXJzZWN0IiwgInJlY3QiLCAiY29tcGFyZVJlY3QiLCAibWlkZGxlIiwgInRvcCIsICJib3R0b20iLCAiYXJlUmFuZ2VzU2FtZUxpbmUiLCAiZWRpdG9yIiwgInJhbmdlMSIsICJyYW5nZTIiLCAicmVjdDEiLCAiUmVhY3RFZGl0b3IiLCAidG9ET01SYW5nZSIsICJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCAicmVjdDIiLCAiZmluZEN1cnJlbnRMaW5lUmFuZ2UiLCAicGFyZW50UmFuZ2UiLCAicGFyZW50UmFuZ2VCb3VuZGFyeSIsICJFZGl0b3IiLCAicmFuZ2UiLCAiUmFuZ2UiLCAiZW5kIiwgInBvc2l0aW9ucyIsICJBcnJheSIsICJmcm9tIiwgImF0IiwgImxlZnQiLCAicmlnaHQiLCAibGVuZ3RoIiwgIk1hdGgiLCAiZmxvb3IiLCAid2l0aFJlYWN0IiwgImUiLCAiYXBwbHkiLCAib25DaGFuZ2UiLCAiZGVsZXRlQmFja3dhcmQiLCAiYWRkTWFyayIsICJyZW1vdmVNYXJrIiwgIkVESVRPUl9UT19LRVlfVE9fRUxFTUVOVCIsICJzZXQiLCAiV2Vha01hcCIsICJrZXkiLCAidmFsdWUiLCAiRURJVE9SX1RPX1NDSEVEVUxFX0ZMVVNIIiwgImdldCIsICJFRElUT1JfVE9fUEVORElOR19JTlNFUlRJT05fTUFSS1MiLCAiRURJVE9SX1RPX1BFTkRJTkdfRElGRlMiLCAiRURJVE9SX1RPX1VTRVJfTUFSS1MiLCAiZGVsZXRlIiwgInVuaXQiLCAic2VsZWN0aW9uIiwgImlzQ29sbGFwc2VkIiwgInBhcmVudEJsb2NrRW50cnkiLCAiYWJvdmUiLCAibWF0Y2giLCAibiIsICJFbGVtZW50IiwgImlzRWxlbWVudCIsICJpc0Jsb2NrIiwgInBhcmVudEJsb2NrUGF0aCIsICJwYXJlbnRFbGVtZW50UmFuZ2UiLCAiYW5jaG9yIiwgImN1cnJlbnRMaW5lUmFuZ2UiLCAiVHJhbnNmb3JtcyIsICJvcCIsICJtYXRjaGVzIiwgInBlbmRpbmdEaWZmcyIsICJ0cmFuc2Zvcm1lZCIsICJtYXAiLCAidGV4dERpZmYiLCAidHJhbnNmb3JtVGV4dERpZmYiLCAiZmlsdGVyIiwgIkJvb2xlYW4iLCAicGVuZGluZ1NlbGVjdGlvbiIsICJFRElUT1JfVE9fUEVORElOR19TRUxFQ1RJT04iLCAidHJhbnNmb3JtUGVuZGluZ1JhbmdlIiwgInBlbmRpbmdBY3Rpb24iLCAiRURJVE9SX1RPX1BFTkRJTkdfQUNUSU9OIiwgIlBvaW50IiwgImlzUG9pbnQiLCAidHJhbnNmb3JtUGVuZGluZ1BvaW50IiwgIl9vYmplY3RTcHJlYWQiLCAidHlwZSIsICJwdXNoIiwgImdldE1hdGNoZXMiLCAicGF0aCIsICJFRElUT1JfVE9fVVNFUl9TRUxFQ1RJT04iLCAidW5yZWYiLCAiUGF0aCIsICJwYXJlbnQiLCAicHJldlBhdGgiLCAicHJldmlvdXMiLCAiY29tbW9uUGF0aCIsICJjb21tb24iLCAibmV3UGF0aCIsICJub2RlIiwgIk5PREVfVE9fS0VZIiwgInNldEZyYWdtZW50RGF0YSIsICJkYXRhIiwgInN0YXJ0IiwgImVkZ2VzIiwgInN0YXJ0Vm9pZCIsICJ2b2lkIiwgImVuZFZvaWQiLCAiZG9tUmFuZ2UiLCAiY29udGVudHMiLCAiY2xvbmVDb250ZW50cyIsICJhdHRhY2giLCAiY2hpbGROb2RlcyIsICJmb3JFYWNoIiwgInRleHRDb250ZW50IiwgInRyaW0iLCAidm9pZE5vZGUiLCAiciIsICJjbG9uZVJhbmdlIiwgImRvbU5vZGUiLCAidG9ET01Ob2RlIiwgInNldEVuZEFmdGVyIiwgInF1ZXJ5U2VsZWN0b3IiLCAicXVlcnlTZWxlY3RvckFsbCIsICJ6dyIsICJpc05ld2xpbmUiLCAiZ2V0QXR0cmlidXRlIiwgImlzRE9NVGV4dCIsICJzcGFuIiwgIm93bmVyRG9jdW1lbnQiLCAiY3JlYXRlRWxlbWVudCIsICJzdHlsZSIsICJ3aGl0ZVNwYWNlIiwgImFwcGVuZENoaWxkIiwgImZyYWdtZW50IiwgImdldEZyYWdtZW50IiwgInN0cmluZyIsICJKU09OIiwgInN0cmluZ2lmeSIsICJlbmNvZGVkIiwgIndpbmRvdyIsICJidG9hIiwgImVuY29kZVVSSUNvbXBvbmVudCIsICJzZXRBdHRyaWJ1dGUiLCAic2V0RGF0YSIsICJkaXYiLCAiYm9keSIsICJpbm5lckhUTUwiLCAiZ2V0UGxhaW5UZXh0IiwgInJlbW92ZUNoaWxkIiwgImluc2VydERhdGEiLCAiaW5zZXJ0RnJhZ21lbnREYXRhIiwgImluc2VydFRleHREYXRhIiwgImdldERhdGEiLCAiZ2V0U2xhdGVGcmFnbWVudEF0dHJpYnV0ZSIsICJkZWNvZGVkIiwgImRlY29kZVVSSUNvbXBvbmVudCIsICJhdG9iIiwgInBhcnNlZCIsICJwYXJzZSIsICJpbnNlcnRGcmFnbWVudCIsICJ0ZXh0IiwgImxpbmVzIiwgInNwbGl0IiwgImxpbmUiLCAic3BsaXROb2RlcyIsICJhbHdheXMiLCAiaW5zZXJ0VGV4dCIsICJSZWFjdERPTSIsICJ1bnN0YWJsZV9iYXRjaGVkVXBkYXRlcyIsICJvbkNvbnRleHRDaGFuZ2UiLCAiRURJVE9SX1RPX09OX0NIQU5HRSIsICJwIiwgImxldmVscyIsICJmaW5kS2V5IiwgIkhpc3RvcnkiLCAiaXNIaXN0b3J5IiwgInZhbHVlIiwgImlzUGxhaW5PYmplY3QiLCAiQXJyYXkiLCAiaXNBcnJheSIsICJyZWRvcyIsICJ1bmRvcyIsICJsZW5ndGgiLCAiT3BlcmF0aW9uIiwgImlzT3BlcmF0aW9uTGlzdCIsICJvcGVyYXRpb25zIiwgIlNBVklORyIsICJXZWFrTWFwIiwgIk1FUkdJTkciLCAiSGlzdG9yeUVkaXRvciIsICJpc0hpc3RvcnlFZGl0b3IiLCAidmFsdWUiLCAiSGlzdG9yeSIsICJpc0hpc3RvcnkiLCAiaGlzdG9yeSIsICJFZGl0b3IiLCAiaXNFZGl0b3IiLCAiaXNNZXJnaW5nIiwgImVkaXRvciIsICJnZXQiLCAiaXNTYXZpbmciLCAicmVkbyIsICJ1bmRvIiwgIndpdGhvdXRNZXJnaW5nIiwgImZuIiwgInByZXYiLCAic2V0IiwgIndpdGhvdXRTYXZpbmciLCAid2l0aEhpc3RvcnkiLCAiZSIsICJhcHBseSIsICJ1bmRvcyIsICJyZWRvcyIsICJsZW5ndGgiLCAiYmF0Y2giLCAic2VsZWN0aW9uQmVmb3JlIiwgIlRyYW5zZm9ybXMiLCAic2V0U2VsZWN0aW9uIiwgIndpdGhvdXROb3JtYWxpemluZyIsICJvcCIsICJvcGVyYXRpb25zIiwgInBvcCIsICJ3cml0ZUhpc3RvcnkiLCAiaW52ZXJzZU9wcyIsICJtYXAiLCAiT3BlcmF0aW9uIiwgImludmVyc2UiLCAicmV2ZXJzZSIsICJsYXN0QmF0Y2giLCAibGFzdE9wIiwgInNhdmUiLCAibWVyZ2UiLCAic2hvdWxkU2F2ZSIsICJzaG91bGRNZXJnZSIsICJwdXNoIiwgInNlbGVjdGlvbiIsICJzaGlmdCIsICJzdGFjayIsICJ0eXBlIiwgIm9mZnNldCIsICJ0ZXh0IiwgIlBhdGgiLCAiZXF1YWxzIiwgInBhdGgiLCAibnVtYmVyU3RyaW5nIiwgImltcG9ydF9yZWFjdCIsICJSZWFjdCIsICJlIiwgIm5vZGUiLCAiUmVhY3QiLCAiZSIsICJyIiwgIlJlYWN0IiwgImUiLCAiZnJhZ21lbnQiLCAiZG9jdW1lbnQiLCAibiIsICJwYXRoIiwgIm5vZGUiLCAiZW5kIiwgIkVsZW1lbnQiLCAiZXF1YWxzIiwgImkiLCAibGVhZiIsICJyIiwgInRib2R5IiwgImN1cnJlbnQiLCAiaW1wb3J0X3JlYWN0IiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfcmVhY3QiLCAiUmVhY3QiLCAiZSIsICJpIiwgIkVsZW1lbnQiLCAiaW1wb3J0X3JlYWN0IiwgImltcG9ydF9kZWVwX2VxdWFsIiwgIlJlYWN0IiwgImUiLCAidGltZSIsICJlcXVhbHMiLCAiaW1wb3J0X3JlYWN0IiwgIlJlYWN0IiwgInRpbWUiLCAiZSIsICJpbXBvcnRfcmVhY3QiLCAiUmVhY3QiLCAidGltZSIsICJlIiwgIlJlYWN0IiwgImxvY2F0aW9uIiwgImUiLCAiaSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X3JlYWN0X2RvbSIsICJSZWFjdCIsICJSZWFjdERPTSIsICJpbXBvcnRfcmVhY3RfZG9tIiwgIlJlYWN0IiwgImUiLCAiaSIsICJSZWFjdCIsICJFbGVtZW50IiwgIlJlYWN0RE9NIiwgImUiLCAiRWRpdG9yIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfcmVhY3RfZG9tIiwgImltcG9ydF9yZWFjdCIsICJSZWFjdCIsICJFbGVtZW50IiwgImkiLCAiZSIsICJSZWFjdERPTSIsICJSZWFjdCIsICJlIiwgInBhdGgiLCAidmFsaWQiLCAiRWxlbWVudCJdCn0K
