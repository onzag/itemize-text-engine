import {
  DOMWindow,
  MutatingTemplateArgs,
  NULL_DOCUMENT,
  SERIALIZATION_REGISTRY,
  TemplateArgs,
  __toESM,
  deserialize,
  require_react,
  require_react_dom,
  sanitize
} from "/dist/commons.js";

// example2.tsx
var import_react2 = __toESM(require_react());
var import_react_dom = __toESM(require_react_dom());

// ../renderer/index.tsx
var import_react = __toESM(require_react());
function processTemplateNodeInitialization(node, templateArgsContext, templateArgsRootcontext) {
  const ifKey = node.dataset.if;
  if (ifKey) {
    const ifValue = templateArgsContext[ifKey];
    if (!ifValue) {
      node.parentElement.removeChild(node);
      return;
    }
  }
  const textKey = node.dataset.text;
  if (textKey) {
    const text = templateArgsContext[textKey] || templateArgsRootcontext[textKey];
    if (typeof text !== "string") {
    } else {
      node.textContent = text;
    }
  }
  const threfKey = node.dataset.href;
  if (threfKey) {
    const thref = templateArgsContext[threfKey] || templateArgsRootcontext[threfKey];
    if (typeof thref !== "string") {
    } else {
      node.setAttribute("href", thref);
    }
  }
  const htmlKey = node.dataset.html;
  if (htmlKey) {
    const html = templateArgsContext[htmlKey] || templateArgsRootcontext[htmlKey];
    if (typeof html !== "string") {
    } else {
      node.innerHTML = html;
    }
  }
}
function processTemplateInitialization(node, templateArgsContext, templateArgsRootContext) {
  node.hasChildNodes() && node.childNodes.forEach((childNode) => {
    const childNodeASHTMLElement = childNode;
    let templateArgsNewContext = templateArgsContext;
    if (typeof childNodeASHTMLElement.dataset !== "undefined" && childNodeASHTMLElement.dataset) {
      const contextKey = childNodeASHTMLElement.dataset.context;
      if (contextKey) {
        templateArgsNewContext = templateArgsNewContext[contextKey];
      }
      const forEachKey = childNodeASHTMLElement.dataset.forEach;
      if (forEachKey) {
        const ifKey = childNodeASHTMLElement.dataset.if;
        const ifValue = ifKey && templateArgsNewContext[ifKey];
        if (ifKey && !ifValue) {
          node.parentElement.removeChild(node);
        } else {
          const forArgument = templateArgsNewContext[forEachKey];
          const nextSibling = childNodeASHTMLElement.nextSibling;
          forArgument.forEach((forEachContext, index) => {
            const clone = childNodeASHTMLElement.cloneNode(true);
            if (nextSibling) {
              childNodeASHTMLElement.parentElement.insertBefore(clone, nextSibling);
            } else {
              childNodeASHTMLElement.parentElement.appendChild(clone);
            }
            processTemplateNodeInitialization(
              clone,
              forEachContext,
              templateArgsRootContext
            );
            if (clone.hasChildNodes()) {
              processTemplateInitialization(
                clone,
                forEachContext,
                templateArgsRootContext
              );
            }
          });
          childNodeASHTMLElement.parentElement.removeChild(childNodeASHTMLElement);
        }
      } else {
        processTemplateNodeInitialization(
          childNodeASHTMLElement,
          templateArgsNewContext,
          templateArgsRootContext
        );
      }
    }
    if (childNodeASHTMLElement.hasChildNodes()) {
      processTemplateInitialization(
        childNodeASHTMLElement,
        templateArgsNewContext,
        templateArgsRootContext
      );
    }
  });
}
function renderTemplateAsNode(template, args) {
  const cheapdiv = DOMWindow.document.createElement("div");
  cheapdiv.innerHTML = template;
  processTemplateInitialization(
    cheapdiv,
    args,
    args
  );
  return cheapdiv;
}
function renderTemplateDontSanitize(template, args) {
  return renderTemplateAsNode(template, args).innerHTML;
}
function renderTemplateDynamically(document2, args, options = {}) {
  if (document2 === NULL_DOCUMENT) {
    return null;
  }
  const toReturn = /* @__PURE__ */ import_react.default.createElement(import_react.default.Fragment, null, document2.children.map((c, index) => {
    return SERIALIZATION_REGISTRY.REACTIFY[c.type || "text"]({
      asTemplate: true,
      active: true,
      element: c,
      key: index,
      templateArgs: args,
      selected: false,
      extraOptions: options,
      parent: document2,
      tree: document2
    });
  }));
  if (args && args.wrapper) {
    return args.wrapper(toReturn);
  }
  return toReturn;
}

// example2.tsx
var featureSupport = {
  supportedContainers: [],
  supportedCustoms: [],
  supportedRichClasses: [],
  supportedTables: [],
  supportsContainers: true,
  supportsCustom: true,
  supportsCustomStyles: true,
  supportsExternalLinks: true,
  supportsFiles: true,
  supportsFilesAccept: null,
  supportsImages: true,
  supportsImagesAccept: null,
  supportsLinks: true,
  supportsLists: true,
  supportsQuote: true,
  supportsRichClasses: true,
  supportsTables: true,
  // notice this being true
  supportsTemplating: true,
  supportsTitle: true,
  supportsVideos: true
};
var TEXT_FROM_SERVER_1 = '<p>Basic templating for <span class="inline" data-text="username">username</span></p>';
var sanitized1 = sanitize({
  fileResolver: null
}, featureSupport, TEXT_FROM_SERVER_1);
var rendered1 = renderTemplateDontSanitize(sanitized1, {
  username: "my name"
});
var textTree1 = deserialize(sanitized1);
var rendered1_2 = renderTemplateDynamically(textTree1, new TemplateArgs(
  {
    username: "my name"
  }
));
var TEXT_FROM_SERVER_2 = '<p data-style-hover="color: red">Click this <span class="inline" data-html="button">button</span></p>';
var sanitized2 = sanitize({
  fileResolver: null
}, featureSupport, TEXT_FROM_SERVER_2);
var textTree2 = deserialize(sanitized2);
var rendered2 = renderTemplateDynamically(textTree2, new TemplateArgs(
  {
    button: /* @__PURE__ */ import_react2.default.createElement("button", { onClick: () => alert("You clicked me") }, "click me!")
  }
));
var TEXT_FROM_SERVER_3 = '<ul><li data-for-each="buttons" data-html="button"><p>button</p></li></ul>';
var sanitized3 = sanitize({
  fileResolver: null
}, featureSupport, TEXT_FROM_SERVER_3);
var textTree3 = deserialize(sanitized3);
var rendered3 = renderTemplateDynamically(textTree3, new TemplateArgs(
  {
    buttons: [
      new TemplateArgs({
        button: /* @__PURE__ */ import_react2.default.createElement("button", { onClick: () => alert("You clicked me 1") }, "click 1")
      }),
      new TemplateArgs({
        button: /* @__PURE__ */ import_react2.default.createElement("button", { onClick: () => alert("You clicked me 2") }, "click 2")
      }),
      new TemplateArgs({
        button: /* @__PURE__ */ import_react2.default.createElement("button", { onClick: () => alert("You clicked me 3") }, "click 3")
      })
    ]
  }
));
var MyInfoContext = import_react2.default.createContext([]);
var MyInfoProvider = (props) => {
  const buttonSets = [
    ["button1", "button2", "button3"],
    ["button4", "button5", "button6"]
    // Add more button sets as needed
  ];
  const [currentSetIndex, setCurrentSetIndex] = (0, import_react2.useState)(0);
  const currentSet = buttonSets[currentSetIndex];
  (0, import_react2.useEffect)(() => {
    const intervalId = setInterval(() => {
      setCurrentSetIndex((prevIndex) => (prevIndex + 1) % buttonSets.length);
    }, 5e3);
    return () => clearInterval(intervalId);
  }, [currentSetIndex, buttonSets.length]);
  return /* @__PURE__ */ import_react2.default.createElement(MyInfoContext.Provider, { value: currentSet }, props.children);
};
var rendered3_2 = renderTemplateDynamically(textTree3, new TemplateArgs(
  {
    buttons: new MutatingTemplateArgs((children) => {
      return /* @__PURE__ */ import_react2.default.createElement(MyInfoContext.Consumer, null, (values) => {
        return values.map((value) => {
          return children(new TemplateArgs(
            {
              button: /* @__PURE__ */ import_react2.default.createElement("button", { onClick: () => alert("You clicked " + value) }, value)
            }
          ), value);
        });
      });
    })
  }
).wrappedBy((children) => {
  return /* @__PURE__ */ import_react2.default.createElement(MyInfoProvider, null, children);
}));
function Example() {
  return /* @__PURE__ */ import_react2.default.createElement("div", null, /* @__PURE__ */ import_react2.default.createElement("h1", null, "Advanced Displaying"), /* @__PURE__ */ import_react2.default.createElement("section", null, /* @__PURE__ */ import_react2.default.createElement("div", null, "Original HTML (also sanitized):"), /* @__PURE__ */ import_react2.default.createElement("code", null, TEXT_FROM_SERVER_1), /* @__PURE__ */ import_react2.default.createElement("div", null, "Deserialized HTML Tree:"), /* @__PURE__ */ import_react2.default.createElement("code", null, JSON.stringify(textTree1, null, 2)), /* @__PURE__ */ import_react2.default.createElement("div", null, "rendered template"), /* @__PURE__ */ import_react2.default.createElement("code", null, rendered1), /* @__PURE__ */ import_react2.default.createElement("div", null, "rendered template dinamically (react component)"), /* @__PURE__ */ import_react2.default.createElement("div", { className: "rich-text", style: { padding: "10px", border: "solid 1px #ccc" } }, rendered1_2)), /* @__PURE__ */ import_react2.default.createElement("section", null, /* @__PURE__ */ import_react2.default.createElement("div", null, "Original HTML (also sanitized):"), /* @__PURE__ */ import_react2.default.createElement("code", null, TEXT_FROM_SERVER_2), /* @__PURE__ */ import_react2.default.createElement("div", null, "rendered template dinamically (react component)"), /* @__PURE__ */ import_react2.default.createElement("div", { className: "rich-text", style: { padding: "10px", border: "solid 1px #ccc" } }, rendered2)), /* @__PURE__ */ import_react2.default.createElement("section", null, /* @__PURE__ */ import_react2.default.createElement("div", null, "Original HTML (also sanitized):"), /* @__PURE__ */ import_react2.default.createElement("code", null, TEXT_FROM_SERVER_3), /* @__PURE__ */ import_react2.default.createElement("div", null, "rendered template dinamically (react component)"), /* @__PURE__ */ import_react2.default.createElement("div", { className: "rich-text", style: { padding: "10px", border: "solid 1px #ccc" } }, rendered3), /* @__PURE__ */ import_react2.default.createElement("div", null, "rendered template dinamically (react component, with mutating data)"), /* @__PURE__ */ import_react2.default.createElement("div", { className: "rich-text", style: { padding: "10px", border: "solid 1px #ccc" } }, rendered3_2)));
}
import_react_dom.default.render(/* @__PURE__ */ import_react2.default.createElement(Example, null), document.querySelector("#app"));
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vZXhhbXBsZTIudHN4IiwgIi4uLy4uL3JlbmRlcmVyL2luZGV4LnRzeCJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgeyBkZXNlcmlhbGl6ZSB9IGZyb20gXCIuLi9zZXJpYWxpemVyXCI7XG5pbXBvcnQgeyBJRmVhdHVyZVN1cHBvcnRPcHRpb25zLCBzYW5pdGl6ZSB9IGZyb20gXCIuLi9zYW5pdGl6ZXJcIjtcbmltcG9ydCB7IHJlbmRlclRlbXBsYXRlRG9udFNhbml0aXplLCByZW5kZXJUZW1wbGF0ZUR5bmFtaWNhbGx5IH0gZnJvbSBcIi4uL3JlbmRlcmVyXCI7XG5pbXBvcnQgeyBNdXRhdGluZ1RlbXBsYXRlQXJncywgVGVtcGxhdGVBcmdzIH0gZnJvbSBcIi4uL3NlcmlhbGl6ZXIvdGVtcGxhdGUtYXJnc1wiO1xuXG5jb25zdCBmZWF0dXJlU3VwcG9ydDogSUZlYXR1cmVTdXBwb3J0T3B0aW9ucyA9IHtcbiAgc3VwcG9ydGVkQ29udGFpbmVyczogW10sXG4gIHN1cHBvcnRlZEN1c3RvbXM6IFtdLFxuICBzdXBwb3J0ZWRSaWNoQ2xhc3NlczogW10sXG4gIHN1cHBvcnRlZFRhYmxlczogW10sXG4gIHN1cHBvcnRzQ29udGFpbmVyczogdHJ1ZSxcbiAgc3VwcG9ydHNDdXN0b206IHRydWUsXG4gIHN1cHBvcnRzQ3VzdG9tU3R5bGVzOiB0cnVlLFxuICBzdXBwb3J0c0V4dGVybmFsTGlua3M6IHRydWUsXG4gIHN1cHBvcnRzRmlsZXM6IHRydWUsXG4gIHN1cHBvcnRzRmlsZXNBY2NlcHQ6IG51bGwsXG4gIHN1cHBvcnRzSW1hZ2VzOiB0cnVlLFxuICBzdXBwb3J0c0ltYWdlc0FjY2VwdDogbnVsbCxcbiAgc3VwcG9ydHNMaW5rczogdHJ1ZSxcbiAgc3VwcG9ydHNMaXN0czogdHJ1ZSxcbiAgc3VwcG9ydHNRdW90ZTogdHJ1ZSxcbiAgc3VwcG9ydHNSaWNoQ2xhc3NlczogdHJ1ZSxcbiAgc3VwcG9ydHNUYWJsZXM6IHRydWUsXG4gIC8vIG5vdGljZSB0aGlzIGJlaW5nIHRydWVcbiAgc3VwcG9ydHNUZW1wbGF0aW5nOiB0cnVlLFxuICBzdXBwb3J0c1RpdGxlOiB0cnVlLFxuICBzdXBwb3J0c1ZpZGVvczogdHJ1ZSxcbn07XG5cbi8vIG5vdGUgaG93IHRoaXMgc3BlY2lmaWVzIHRoZSBpbmxpbmUgY2xhc3Ncbi8vIHRoYXQgaXMgYmVjYXVzZSBzcGFuIGlzIGFsc28gdXNlZCBpbiB0aGUgdGV4dCB0eXBlIHRvIG1ha2UgZm9yXG4vLyBjdXN0b20gc3R5bGVzLCBvbmx5IHRoZSBpbmxpbmUgdGFnIGFsbG93cyBmb3IgY3VzdG9tIHByb3BlcnRpZXNcbi8vIG90aGVyd2lzZSBpdCB3aWxsIHZhbmlzaCwgd2hpbGUgaXQgd2lsbCBzdXJ2aXZlIHNhbml0aXphdGlvbiBpdCB3aWxsIG5vdCBzdXJ2aXZlIGRlc2VyaWFsaXphdGlvblxuLy8gb25jZSB0aGUgbm9ybWFsaXplciBjYXRjaGVzIGl0LCBzcGFuIGlzIHVzZWQgZm9yIHRleHQgc3R5bGVzLCBhbmQgc3Bhbi5pbmxpbmUgaXMgYW4gaW5saW5lIGVsZW1lbnRcbi8vIGZvciBvdGhlciBwdXJwb3Nlc1xuY29uc3QgVEVYVF9GUk9NX1NFUlZFUl8xID0gJzxwPkJhc2ljIHRlbXBsYXRpbmcgZm9yIDxzcGFuIGNsYXNzPVwiaW5saW5lXCIgZGF0YS10ZXh0PVwidXNlcm5hbWVcIj51c2VybmFtZTwvc3Bhbj48L3A+JztcblxuY29uc3Qgc2FuaXRpemVkMSA9IHNhbml0aXplKHtcbiAgZmlsZVJlc29sdmVyOiBudWxsLFxufSwgZmVhdHVyZVN1cHBvcnQsIFRFWFRfRlJPTV9TRVJWRVJfMSk7XG5cbi8vIHRoZSByZW5kZXIgdGVtcGxhdGUgbWV0aG9kIGlzIGxpbWl0ZWQgcXVpdGUgYSBiaXRcbmNvbnN0IHJlbmRlcmVkMSA9IHJlbmRlclRlbXBsYXRlRG9udFNhbml0aXplKHNhbml0aXplZDEsIHtcbiAgdXNlcm5hbWU6IFwibXkgbmFtZVwiLFxufSk7XG5cbmNvbnN0IHRleHRUcmVlMSA9IGRlc2VyaWFsaXplKHNhbml0aXplZDEpO1xuXG5jb25zdCByZW5kZXJlZDFfMiA9IHJlbmRlclRlbXBsYXRlRHluYW1pY2FsbHkodGV4dFRyZWUxLCBuZXcgVGVtcGxhdGVBcmdzKFxuICB7XG4gICAgdXNlcm5hbWU6IFwibXkgbmFtZVwiLFxuICB9XG4pKTtcblxuLy8gcmVuZGVyaW5nIGFzIGEgcmVhY3QgY29tcG9uZW50IGFsbG93cyBmb3IgZnVsbCBjdXN0b21pemF0aW9uIG9uXG4vLyBob3cgdGhpbmdzIGFyZSByZW5kZXJlZCwgaXQgYWxzbyBoYXMgcXVpdGUgYSBtb3JlIHJhbmdlIG9uIHdoYXQgaXQgY2FuIGFuZCBjYW4ndCBkb1xuLy8gZm9yIGV4YW1wbGUgZGF0YS1zdHlsZS1ob3ZlciBpcyBub3cgZnVuY3Rpb25hbCBpcyBhbGxvd2VkIGJ5IHRoZSBmZWF0dXJlIHN1cHBvcnQsIGFuZCB3aGVuXG4vLyB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGV4dC1odG1sIHlvdSBjYW4gaGF2ZSBhIGxvdCBvZiBmbGV4aWJpbGl0eVxuLy8gbm90ZSB0aGF0IGl0J3MgcG9zc2libGUgdG8gaW5mb3JtIHRoZSBlZGl0b3IgYWJvdXQgdGhpcyB0b28gc28gdGhlIGVkaXRpbmcgZXhwZXJpZW5jZVxuLy8gaXMgYWxzbyBncmVhdFxuY29uc3QgVEVYVF9GUk9NX1NFUlZFUl8yID0gJzxwIGRhdGEtc3R5bGUtaG92ZXI9XCJjb2xvcjogcmVkXCI+Q2xpY2sgdGhpcyA8c3BhbiBjbGFzcz1cImlubGluZVwiIGRhdGEtaHRtbD1cImJ1dHRvblwiPmJ1dHRvbjwvc3Bhbj48L3A+JztcbmNvbnN0IHNhbml0aXplZDIgPSBzYW5pdGl6ZSh7XG4gIGZpbGVSZXNvbHZlcjogbnVsbCxcbn0sIGZlYXR1cmVTdXBwb3J0LCBURVhUX0ZST01fU0VSVkVSXzIpO1xuY29uc3QgdGV4dFRyZWUyID0gZGVzZXJpYWxpemUoc2FuaXRpemVkMik7XG5jb25zdCByZW5kZXJlZDIgPSByZW5kZXJUZW1wbGF0ZUR5bmFtaWNhbGx5KHRleHRUcmVlMiwgbmV3IFRlbXBsYXRlQXJncyhcbiAge1xuICAgIGJ1dHRvbjogPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBhbGVydChcIllvdSBjbGlja2VkIG1lXCIpfT5jbGljayBtZSE8L2J1dHRvbj4sXG4gIH1cbikpO1xuXG4vLyBvdGhlciBtb3JlIGFkdmFuY2VkIGZlYXR1cmVzIGFyZSBhbHNvIGluY2x1ZGVkIHdpdGggZHluYW1pYyByZW5kZXJzXG4vLyBzb21lIG9mIHRoZW0gd29yayB3aXRoIHN0YXRpYyB0b28gZm9yIGV4YW1wbGUsIGxldCdzIG1ha2UgYSBsb29wIGZvciBhIGxpc3RcbmNvbnN0IFRFWFRfRlJPTV9TRVJWRVJfMyA9ICc8dWw+PGxpIGRhdGEtZm9yLWVhY2g9XCJidXR0b25zXCIgZGF0YS1odG1sPVwiYnV0dG9uXCI+PHA+YnV0dG9uPC9wPjwvbGk+PC91bD4nO1xuY29uc3Qgc2FuaXRpemVkMyA9IHNhbml0aXplKHtcbiAgZmlsZVJlc29sdmVyOiBudWxsLFxufSwgZmVhdHVyZVN1cHBvcnQsIFRFWFRfRlJPTV9TRVJWRVJfMyk7XG5jb25zdCB0ZXh0VHJlZTMgPSBkZXNlcmlhbGl6ZShzYW5pdGl6ZWQzKTtcbmNvbnN0IHJlbmRlcmVkMyA9IHJlbmRlclRlbXBsYXRlRHluYW1pY2FsbHkodGV4dFRyZWUzLCBuZXcgVGVtcGxhdGVBcmdzKFxuICB7XG4gICAgYnV0dG9uczogW1xuICAgICAgbmV3IFRlbXBsYXRlQXJncyh7XG4gICAgICAgIGJ1dHRvbjogPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBhbGVydChcIllvdSBjbGlja2VkIG1lIDFcIil9PmNsaWNrIDE8L2J1dHRvbj5cbiAgICAgIH0pLFxuICAgICAgbmV3IFRlbXBsYXRlQXJncyh7XG4gICAgICAgIGJ1dHRvbjogPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBhbGVydChcIllvdSBjbGlja2VkIG1lIDJcIil9PmNsaWNrIDI8L2J1dHRvbj5cbiAgICAgIH0pLFxuICAgICAgbmV3IFRlbXBsYXRlQXJncyh7XG4gICAgICAgIGJ1dHRvbjogPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBhbGVydChcIllvdSBjbGlja2VkIG1lIDNcIil9PmNsaWNrIDM8L2J1dHRvbj5cbiAgICAgIH0pLFxuICAgIF1cbiAgfVxuKSk7XG5cbmNvbnN0IE15SW5mb0NvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PHN0cmluZ1tdPihbXSk7XG5cbmNvbnN0IE15SW5mb1Byb3ZpZGVyID0gKHByb3BzOiB7Y2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZX0pID0+IHtcbiAgY29uc3QgYnV0dG9uU2V0cyA9IFtcbiAgICBbJ2J1dHRvbjEnLCAnYnV0dG9uMicsICdidXR0b24zJ10sXG4gICAgWydidXR0b240JywgJ2J1dHRvbjUnLCAnYnV0dG9uNiddLFxuICAgIC8vIEFkZCBtb3JlIGJ1dHRvbiBzZXRzIGFzIG5lZWRlZFxuICBdO1xuXG4gIGNvbnN0IFtjdXJyZW50U2V0SW5kZXgsIHNldEN1cnJlbnRTZXRJbmRleF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgY3VycmVudFNldCA9IGJ1dHRvblNldHNbY3VycmVudFNldEluZGV4XTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBzZXRDdXJyZW50U2V0SW5kZXgoKHByZXZJbmRleCkgPT4gKHByZXZJbmRleCArIDEpICUgYnV0dG9uU2V0cy5sZW5ndGgpO1xuICAgIH0sIDUwMDApO1xuXG4gICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XG4gIH0sIFtjdXJyZW50U2V0SW5kZXgsIGJ1dHRvblNldHMubGVuZ3RoXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8TXlJbmZvQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17Y3VycmVudFNldH0+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9NeUluZm9Db250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcblxuLy8gaXQgaXMgYWxzbyBwb3NzaWJsZSB0byBtYWtlIG11dGF0aW5nIGNvbnRleHRzLCBtdXRhdGluZyBmdW5jdGlvbnMsIHRoYXQgZGVwZW5kIG9uIGNvbnRleHRzXG5jb25zdCByZW5kZXJlZDNfMiA9IHJlbmRlclRlbXBsYXRlRHluYW1pY2FsbHkodGV4dFRyZWUzLCBuZXcgVGVtcGxhdGVBcmdzKFxuICB7XG4gICAgYnV0dG9uczogbmV3IE11dGF0aW5nVGVtcGxhdGVBcmdzKChjaGlsZHJlbikgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPE15SW5mb0NvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgeyh2YWx1ZXMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXMubWFwKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gY2hpbGRyZW4obmV3IFRlbXBsYXRlQXJncyhcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBidXR0b246IDxidXR0b24gb25DbGljaz17KCkgPT4gYWxlcnQoXCJZb3UgY2xpY2tlZCBcIiArIHZhbHVlKX0+e3ZhbHVlfTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKSwgdmFsdWUpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9fVxuICAgICAgICA8L015SW5mb0NvbnRleHQuQ29uc3VtZXI+XG4gICAgICApXG4gICAgfSksXG4gIH1cbikud3JhcHBlZEJ5KChjaGlsZHJlbikgPT4ge1xuICAvLyB0aGlzIGNvbnRleHQgY291bGQgYmUgYW55d2hlcmUsIGJ1dCB3ZSBhcmUgcHV0dGluZyBpdCBoZXJlXG4gIC8vIHRoZSB3cmFwcGVkIGJ5IGZ1bmN0aW9uYWxpdHkgY2FuIHdyYXAgZm9yIGFueSByZWFzb25cbiAgLy8gZXZlbiBpZiBpdCdzIHN0eWxpc3RpYywgYnV0IGl0J3MgbWVhbnQgdG8gYmUgdXNlZCBmb3JcbiAgLy8gcGFzc2luZyBkb3duIGNvbnRleHRzXG5cbiAgLy8gZWZmZWN0aXZlbHkgYmVjYXVzZSB0aGlzIGlzIGEgcmVhY3QgY29tcG9uZW50IGlmIHRoZSBkYXRhIGNoYW5nZXNcbiAgLy8gdGhlbiB0aGUgZGlzcGxheSBjaGFuZ2VzXG4gIHJldHVybiAoXG4gICAgPE15SW5mb1Byb3ZpZGVyPlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvTXlJbmZvUHJvdmlkZXI+XG4gICk7XG59KSk7XG5cbmZ1bmN0aW9uIEV4YW1wbGUoKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxoMT5BZHZhbmNlZCBEaXNwbGF5aW5nPC9oMT5cblxuICAgICAgPHNlY3Rpb24+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgT3JpZ2luYWwgSFRNTCAoYWxzbyBzYW5pdGl6ZWQpOlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGNvZGU+e1RFWFRfRlJPTV9TRVJWRVJfMX08L2NvZGU+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgRGVzZXJpYWxpemVkIEhUTUwgVHJlZTpcbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxjb2RlPntKU09OLnN0cmluZ2lmeSh0ZXh0VHJlZTEsIG51bGwsIDIpfTwvY29kZT5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICByZW5kZXJlZCB0ZW1wbGF0ZVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGNvZGU+e3JlbmRlcmVkMX08L2NvZGU+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgcmVuZGVyZWQgdGVtcGxhdGUgZGluYW1pY2FsbHkgKHJlYWN0IGNvbXBvbmVudClcbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmljaC10ZXh0XCIgc3R5bGU9e3sgcGFkZGluZzogXCIxMHB4XCIsIGJvcmRlcjogXCJzb2xpZCAxcHggI2NjY1wiIH19PlxuICAgICAgICAgIHtyZW5kZXJlZDFfMn1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3NlY3Rpb24+XG5cbiAgICAgIDxzZWN0aW9uPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIE9yaWdpbmFsIEhUTUwgKGFsc28gc2FuaXRpemVkKTpcbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxjb2RlPntURVhUX0ZST01fU0VSVkVSXzJ9PC9jb2RlPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIHJlbmRlcmVkIHRlbXBsYXRlIGRpbmFtaWNhbGx5IChyZWFjdCBjb21wb25lbnQpXG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJpY2gtdGV4dFwiIHN0eWxlPXt7IHBhZGRpbmc6IFwiMTBweFwiLCBib3JkZXI6IFwic29saWQgMXB4ICNjY2NcIiB9fT5cbiAgICAgICAgICB7cmVuZGVyZWQyfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc2VjdGlvbj5cblxuICAgICAgPHNlY3Rpb24+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgT3JpZ2luYWwgSFRNTCAoYWxzbyBzYW5pdGl6ZWQpOlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGNvZGU+e1RFWFRfRlJPTV9TRVJWRVJfM308L2NvZGU+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgcmVuZGVyZWQgdGVtcGxhdGUgZGluYW1pY2FsbHkgKHJlYWN0IGNvbXBvbmVudClcbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmljaC10ZXh0XCIgc3R5bGU9e3sgcGFkZGluZzogXCIxMHB4XCIsIGJvcmRlcjogXCJzb2xpZCAxcHggI2NjY1wiIH19PlxuICAgICAgICAgIHtyZW5kZXJlZDN9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIHJlbmRlcmVkIHRlbXBsYXRlIGRpbmFtaWNhbGx5IChyZWFjdCBjb21wb25lbnQsIHdpdGggbXV0YXRpbmcgZGF0YSlcbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmljaC10ZXh0XCIgc3R5bGU9e3sgcGFkZGluZzogXCIxMHB4XCIsIGJvcmRlcjogXCJzb2xpZCAxcHggI2NjY1wiIH19PlxuICAgICAgICAgIHtyZW5kZXJlZDNfMn1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3NlY3Rpb24+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cblJlYWN0RE9NLnJlbmRlcig8RXhhbXBsZSAvPiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhcHBcIikpOyIsICJpbXBvcnQgeyBET01QdXJpZnkgfSBmcm9tIFwiLi4vc2VyaWFsaXplci9kb21cIjtcbmltcG9ydCB7XG4gIElSb290TGV2ZWxEb2N1bWVudCwgUmljaEVsZW1lbnQsIFNFUklBTElaQVRJT05fUkVHSVNUUlksIElSZWFjdGlmeUV4dHJhT3B0aW9ucywgTlVMTF9ET0NVTUVOVCwgZGVzZXJpYWxpemVcbn0gZnJvbSBcIi4uL3NlcmlhbGl6ZXJcIjtcbmltcG9ydCB7IElUZXh0IH0gZnJvbSBcIi4uL3NlcmlhbGl6ZXIvdHlwZXMvdGV4dFwiO1xuaW1wb3J0IHsgRE9NV2luZG93IH0gZnJvbSBcIi4uL3NlcmlhbGl6ZXIvZG9tXCI7XG5pbXBvcnQgeyBUZW1wbGF0ZUFyZ3MgfSBmcm9tIFwiLi4vc2VyaWFsaXplci90ZW1wbGF0ZS1hcmdzXCI7XG5pbXBvcnQgeyBJRmVhdHVyZVN1cHBvcnRPcHRpb25zLCBJUG9zdFByb2Nlc3NpbmdPcHRpb25zLCBzYW5pdGl6ZSB9IGZyb20gXCIuLi9zYW5pdGl6ZXJcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcblxuLyoqXG4gKiBQcm9jZXNzZXMgdGhlIGluaXRpYWxpemF0aW9uIG9mIGEgc2luZ2xlIG5vZGVcbiAqIEBwYXJhbSBub2RlIHRoZSBub2RlIGluIHF1ZXN0aW9uc1xuICogQHBhcmFtIHRlbXBsYXRlQXJnc0NvbnRleHQgdGhlIGFyZyBjb250ZXh0IHdlIGFyZSBjdXJyZW50bHkgaW5cbiAqL1xuZnVuY3Rpb24gcHJvY2Vzc1RlbXBsYXRlTm9kZUluaXRpYWxpemF0aW9uKFxuICBub2RlOiBIVE1MRWxlbWVudCxcbiAgdGVtcGxhdGVBcmdzQ29udGV4dDogYW55LFxuICB0ZW1wbGF0ZUFyZ3NSb290Y29udGV4dDogYW55LFxuKSB7XG4gIGNvbnN0IGlmS2V5ID0gbm9kZS5kYXRhc2V0LmlmO1xuICBpZiAoaWZLZXkpIHtcbiAgICBjb25zdCBpZlZhbHVlID0gdGVtcGxhdGVBcmdzQ29udGV4dFtpZktleV07XG4gICAgaWYgKCFpZlZhbHVlKSB7XG4gICAgICBub2RlLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgLy8gaGFzIGEgdGV4dCBoYW5kbGVyXG4gIGNvbnN0IHRleHRLZXkgPSBub2RlLmRhdGFzZXQudGV4dDtcbiAgaWYgKHRleHRLZXkpIHtcbiAgICBjb25zdCB0ZXh0OiBzdHJpbmcgPSB0ZW1wbGF0ZUFyZ3NDb250ZXh0W3RleHRLZXldIHx8IHRlbXBsYXRlQXJnc1Jvb3Rjb250ZXh0W3RleHRLZXldO1xuICAgIGlmICh0eXBlb2YgdGV4dCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgLy8gd2UgZG8gbm90IGxvZyBiZWNhdXNlIHRoaXMgd2lsbCBoaXQgdGhlIHNlcnZlciBzaWRlXG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgIH1cbiAgfVxuXG4gIC8vIHNldCB0aGUgdGhyZWYga2V5XG4gIGNvbnN0IHRocmVmS2V5ID0gbm9kZS5kYXRhc2V0LmhyZWY7XG4gIGlmICh0aHJlZktleSkge1xuICAgIGNvbnN0IHRocmVmOiBzdHJpbmcgPSB0ZW1wbGF0ZUFyZ3NDb250ZXh0W3RocmVmS2V5XSB8fCB0ZW1wbGF0ZUFyZ3NSb290Y29udGV4dFt0aHJlZktleV07XG4gICAgaWYgKHR5cGVvZiB0aHJlZiAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgLy8gd2UgZG8gbm90IGxvZyBiZWNhdXNlIHRoaXMgd2lsbCBoaXQgdGhlIHNlcnZlciBzaWRlXG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCB0aHJlZik7XG4gICAgfVxuICB9XG5cbiAgLy8gaGFzIGEgSFRNTCBoYW5kbGVyXG4gIGNvbnN0IGh0bWxLZXkgPSBub2RlLmRhdGFzZXQuaHRtbDtcbiAgaWYgKGh0bWxLZXkpIHtcbiAgICBjb25zdCBodG1sOiBzdHJpbmcgPSB0ZW1wbGF0ZUFyZ3NDb250ZXh0W2h0bWxLZXldIHx8IHRlbXBsYXRlQXJnc1Jvb3Rjb250ZXh0W2h0bWxLZXldO1xuXG4gICAgaWYgKHR5cGVvZiBodG1sICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAvLyB3ZSBkbyBub3QgbG9nIGJlY2F1c2UgdGhpcyB3aWxsIGhpdCB0aGUgc2VydmVyIHNpZGVcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZS5pbm5lckhUTUwgPSBodG1sO1xuICAgIH1cbiAgfVxufVxuXG5cbi8qKlxuICogUHJvY2Vzc2VzIHRoZSBpbnRpYWxpemF0aW9uIG9mIGEgdGVtcGxhdGUsIGJ5IHByb2Nlc3NpbmdcbiAqIHRoZSBjaGlsZCBub2RlcyBvZiBhIGdpdmVuIG5vZGVcbiAqIEBwYXJhbSBub2RlIHRoZSBub2RlIHdlIGFyZSB3b3JraW5nIHdpdGhcbiAqIEBwYXJhbSB0ZW1wbGF0ZUFyZ3NDb250ZXh0IHRoZSB0ZW1wbGF0ZSBhcmdzIHdlIGFyZSBjdXJyZW50bHkgd29ya2luZyB3aXRoXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NUZW1wbGF0ZUluaXRpYWxpemF0aW9uKFxuICBub2RlOiBIVE1MRWxlbWVudCxcbiAgdGVtcGxhdGVBcmdzQ29udGV4dDogYW55LFxuICB0ZW1wbGF0ZUFyZ3NSb290Q29udGV4dDogYW55LFxuKSB7XG4gIC8vIGZpcnN0IHdlIGNoZWNrIGlmIHdlIGhhdmUgY2hpbGQgbm9kZXMgdG8gbG9vcFxuICBub2RlLmhhc0NoaWxkTm9kZXMoKSAmJiBub2RlLmNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGROb2RlKSA9PiB7XG4gICAgLy8gd2UgY29uc2lkZXIgaXQgYW4gaHRtbCBlbGVtZW50XG4gICAgY29uc3QgY2hpbGROb2RlQVNIVE1MRWxlbWVudCA9IGNoaWxkTm9kZSBhcyBIVE1MRWxlbWVudDtcblxuICAgIC8vIHNvIHRoZSBhcmdzIHdlIGFyZSB3b3JraW5nIHdpdGgsIHRoaXMgaXMgZ29pbmcgdG8gYmVcbiAgICAvLyB0aGUgY29udGV4dCB3ZSB3aWxsIGJlIHdvcmtpbmcgd2l0aFxuICAgIGxldCB0ZW1wbGF0ZUFyZ3NOZXdDb250ZXh0ID0gdGVtcGxhdGVBcmdzQ29udGV4dDtcblxuICAgIC8vIGNoZWFwIGNoZWVzeSB3YXkgdG8gY2hlY2sgaWYgd2UgYXJlIHdvcmtpbmcgd2l0aCBhIEhUTUwgRWxlbWVudFxuICAgIC8vIHRoYXQgaGFzIGEgZGF0YXNldCBpbiBpdCwgbm8gbmVlZCBmb3IgZmFuY3kgY2hlY2tzIHNpbmNlIHdlIGFyZSBvbmx5IGludGVyZXN0ZWRcbiAgICAvLyBpbiBzdWNoIGVsZW1lbnRzIGFuZCB3ZSBjYW4gYmUgc3VyZSB3ZSBoYXZlIGFuIGh0bWwgZWxlbWVudFxuICAgIGlmICh0eXBlb2YgY2hpbGROb2RlQVNIVE1MRWxlbWVudC5kYXRhc2V0ICE9PSBcInVuZGVmaW5lZFwiICYmIGNoaWxkTm9kZUFTSFRNTEVsZW1lbnQuZGF0YXNldCkge1xuXG4gICAgICAvLyB1cGRhdGUgdGhlIGNvbnRleHQgZm9yIGNoaWxkcmVuXG4gICAgICBjb25zdCBjb250ZXh0S2V5ID0gY2hpbGROb2RlQVNIVE1MRWxlbWVudC5kYXRhc2V0LmNvbnRleHQ7XG4gICAgICBpZiAoY29udGV4dEtleSkge1xuICAgICAgICB0ZW1wbGF0ZUFyZ3NOZXdDb250ZXh0ID0gdGVtcGxhdGVBcmdzTmV3Q29udGV4dFtjb250ZXh0S2V5XTtcbiAgICAgIH1cblxuICAgICAgLy8gc28gbm93IHdlIGdvdCB0byBzZWUgaWYgd2UgaGF2ZSBhIGZvciBsb29wXG4gICAgICBjb25zdCBmb3JFYWNoS2V5ID0gY2hpbGROb2RlQVNIVE1MRWxlbWVudC5kYXRhc2V0LmZvckVhY2g7XG4gICAgICBpZiAoZm9yRWFjaEtleSkge1xuICAgICAgICBjb25zdCBpZktleSA9IGNoaWxkTm9kZUFTSFRNTEVsZW1lbnQuZGF0YXNldC5pZjtcbiAgICAgICAgY29uc3QgaWZWYWx1ZSA9IGlmS2V5ICYmIHRlbXBsYXRlQXJnc05ld0NvbnRleHRbaWZLZXldO1xuXG4gICAgICAgIGlmIChpZktleSAmJiAhaWZWYWx1ZSkge1xuICAgICAgICAgIG5vZGUucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBhbmQgdGhpcyBpcyB3aGF0IHdlIGFyZSBsb29waW5nIGZvclxuICAgICAgICAgIGNvbnN0IGZvckFyZ3VtZW50ID0gdGVtcGxhdGVBcmdzTmV3Q29udGV4dFtmb3JFYWNoS2V5XTtcbiAgICAgICAgICAvLyB3ZSBncmFiIHRoZSBuZXh0IHNpYmxpbmcgc28gdGhhdCB3ZSBjYW4gcHJvcGVybHkgcmVwZWF0XG4gICAgICAgICAgY29uc3QgbmV4dFNpYmxpbmcgPSBjaGlsZE5vZGVBU0hUTUxFbGVtZW50Lm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgLy8gc28gd2UgbG9vcFxuICAgICAgICAgIGZvckFyZ3VtZW50LmZvckVhY2goKGZvckVhY2hDb250ZXh0OiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIC8vIG5vdyB3ZSBtYWtlIGEgY2xvbmUgb2Ygd2hhdCB3ZSBhcmUgbG9vcGluZyBmb3JcbiAgICAgICAgICAgIGNvbnN0IGNsb25lID0gY2hpbGROb2RlQVNIVE1MRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgbmV4dCBzaWJsaW5nXG4gICAgICAgICAgICBpZiAobmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgICAgLy8gd2UgaW5zZXJ0IGJlZm9yZSBpdFxuICAgICAgICAgICAgICBjaGlsZE5vZGVBU0hUTUxFbGVtZW50LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNsb25lLCBuZXh0U2libGluZyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjaGlsZE5vZGVBU0hUTUxFbGVtZW50LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBhbmQgbm93IHdlIGNhbGwgZm9yIHRoZSBpbml0aWFsaXphdGlvbiBvZiB0aGlzIG5vZGUgaXRzZWxmXG4gICAgICAgICAgICBwcm9jZXNzVGVtcGxhdGVOb2RlSW5pdGlhbGl6YXRpb24oXG4gICAgICAgICAgICAgIGNsb25lLFxuICAgICAgICAgICAgICBmb3JFYWNoQ29udGV4dCxcbiAgICAgICAgICAgICAgdGVtcGxhdGVBcmdzUm9vdENvbnRleHQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBpZiB3ZSBkb24ndCBleHBlY3QgY2hpbGRyZW4gdG8gYmUgdW5oYW5kbGVkXG4gICAgICAgICAgICBpZiAoY2xvbmUuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICAgIC8vIHdlIGhhbmRsZSB0aGVtIHBlciBjbG9uZSByZXN1bHRcbiAgICAgICAgICAgICAgcHJvY2Vzc1RlbXBsYXRlSW5pdGlhbGl6YXRpb24oXG4gICAgICAgICAgICAgICAgY2xvbmUsXG4gICAgICAgICAgICAgICAgZm9yRWFjaENvbnRleHQsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVBcmdzUm9vdENvbnRleHQsXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBub3cgd2UgY2FuIHJlbW92ZSB0aGUgb3JpZ2luYWxcbiAgICAgICAgICBjaGlsZE5vZGVBU0hUTUxFbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2RlQVNIVE1MRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG90aGVyd2lzZSBpZiB3ZSBoYXZlIG5vIGZvciBsb29wLCB3ZSBqdXN0IHByb2Nlc3MgdGhlIG5vZGUgaXRzZWxmXG4gICAgICAgIHByb2Nlc3NUZW1wbGF0ZU5vZGVJbml0aWFsaXphdGlvbihcbiAgICAgICAgICBjaGlsZE5vZGVBU0hUTUxFbGVtZW50LFxuICAgICAgICAgIHRlbXBsYXRlQXJnc05ld0NvbnRleHQsXG4gICAgICAgICAgdGVtcGxhdGVBcmdzUm9vdENvbnRleHQsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gYW5kIGlmIHdlIGRpZCBub3QgZGVjaWRlIHRvIGxlYXZlIHRoZSBjaGlsZHJlbiBvZiB0aGUgbm9kZSB1bmhhbmRsZWQgYW5kXG4gICAgLy8gd2UgaGF2ZSBjaGlsZHJlblxuICAgIGlmIChjaGlsZE5vZGVBU0hUTUxFbGVtZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgLy8gbGV0cyByZWN1cnNlIGludG8gdGhlbSBmb3IgdGhlaXIgcHJvY2Vzc2luZ1xuICAgICAgcHJvY2Vzc1RlbXBsYXRlSW5pdGlhbGl6YXRpb24oXG4gICAgICAgIGNoaWxkTm9kZUFTSFRNTEVsZW1lbnQsXG4gICAgICAgIHRlbXBsYXRlQXJnc05ld0NvbnRleHQsXG4gICAgICAgIHRlbXBsYXRlQXJnc1Jvb3RDb250ZXh0LFxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFNhbWUgYXMgcmVuZGVyIHRlbXBsYXRlIGJ1dCB3aWxsIHByb3ZpZGVcbiAqIHRoZSBkaXYgYXMgYSByYXcgSFRNTCByZXN1bHRcbiAqIFxuICogdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBzYW5pdGl6ZSEhIVxuICogXG4gKiBAcGFyYW0gdGVtcGxhdGUgdGhlIHRlbXBsYXRlIGluIHF1ZXN0aW9uXG4gKiBAcGFyYW0gYXJncyB0aGUgYXJndW1lbnRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJUZW1wbGF0ZUFzTm9kZShcbiAgdGVtcGxhdGU6IHN0cmluZyxcbiAgYXJnczogYW55LFxuKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBjaGVhcGRpdiA9IERPTVdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjaGVhcGRpdi5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcblxuICBwcm9jZXNzVGVtcGxhdGVJbml0aWFsaXphdGlvbihcbiAgICBjaGVhcGRpdixcbiAgICBhcmdzLFxuICAgIGFyZ3MsXG4gICk7XG5cbiAgcmV0dXJuIGNoZWFwZGl2O1xufVxuXG4vKipcbiAqIFBlcmZvcm1zIGEgc2ltcGxlIHRlbXBsYXRlIHJlbmRlcmluZ1xuICogZnJvbSBhIHN0cmluZyBiYXNlZCBIVE1MIHRlbXBsYXRlIGJhc2VkIG9uIHRoZSB0ZXh0IHNwZWNzXG4gKiBcbiAqIGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBzYW5pdGl6ZSEhIVxuICogXG4gKiBAcGFyYW0gdGVtcGxhdGUgdGhlIHRlbXBsYXRlIGluIHF1ZXN0aW9uXG4gKiBAcGFyYW0gYXJncyB0aGUgYXJndW1lbnRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJUZW1wbGF0ZURvbnRTYW5pdGl6ZShcbiAgdGVtcGxhdGU6IHN0cmluZyxcbiAgYXJnczogYW55LFxuKTogc3RyaW5nIHtcbiAgcmV0dXJuIHJlbmRlclRlbXBsYXRlQXNOb2RlKHRlbXBsYXRlLCBhcmdzKS5pbm5lckhUTUw7XG59XG5cblxuLyoqXG4gKiBQZXJmb3JtcyBhIHNpbXBsZSB0ZW1wbGF0ZSByZW5kZXJpbmdcbiAqIGZyb20gYSBzdHJpbmcgYmFzZWQgSFRNTCB0ZW1wbGF0ZSBiYXNlZCBvbiB0aGUgdGV4dCBzcGVjc1xuICogXG4gKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCBVSSBIYW5kbGVyc1xuICogaXQgaXMgdXNlZCBmb3IgcHJvZHVjaW5nIGEgc3RyaW5nIGJ5IGRvaW5nIGEgc2ltcGxlIHBhc3NcbiAqIG9uIGEgdGVtcGxhdGVcbiAqIFxuICogSXQgYWxzbyBkb2VzIG5vdCBzdXBwb3J0IGR5bmFtaWMgc3R5bGVzXG4gKiBcbiAqIGZvciBwcm9wZXIgdGVtcGxhdGVzIHdpdGggZnVsbCBibG93biBmdW5jdGlvbmFsaXR5IHlvdSBzaG91bGRcbiAqIHVzZSB0aGUgcmVuZGVyVGVtcGxhdGVEeW5hbWljYWxseSBtZXRob2RcbiAqIFxuICogQHBhcmFtIHRlbXBsYXRlIHRoZSB0ZW1wbGF0ZSBpbiBxdWVzdGlvblxuICogQHBhcmFtIGFyZ3MgdGhlIGFyZ3VtZW50c1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyVGVtcGxhdGUoXG4gIG9wdGlvbnM6IElQb3N0UHJvY2Vzc2luZ09wdGlvbnMsXG4gIGZlYXR1cmVTdXBwb3J0OiBJRmVhdHVyZVN1cHBvcnRPcHRpb25zLFxuICB0ZW1wbGF0ZTogc3RyaW5nLFxuICBhcmdzOiBhbnksXG4pOiBzdHJpbmcge1xuICBjb25zdCBzYW5pdGl6ZWQgPSBzYW5pdGl6ZShvcHRpb25zLCBmZWF0dXJlU3VwcG9ydCwgdGVtcGxhdGUpO1xuXG4gIHJldHVybiByZW5kZXJUZW1wbGF0ZUFzTm9kZShzYW5pdGl6ZWQsIGFyZ3MpLmlubmVySFRNTDtcbn1cblxuLyoqXG4gKiBDb21waWxlcyB0aGUgdGVtcGxhdGUgYnV0IGl0IGRvZXMgYXMgYSByZWFjdCBlbGVtZW50IGluIHdoaWNoXG4gKiB3YXkgaXQgc3VwcG9ydHMgdGhlIHdob2xlIHJhbmdlIG9mIHRoZSBjb21wb25lbnRyeSwgaW5jbHVkaW5nXG4gKiBkeW5hbWljIHN0eWxlcyBhbmQgVUkgaGFuZGxpbmdcbiAqIFxuICogVGhlIHByb3BlcnR5IHNob3VsZCBiZSBhIHRlbXBsYXRlIGZvciB0aGlzIHRvIGJlIHVzYWJsZVxuICogXG4gKiBlZy4gcmVuZGVyVGVtcGxhdGVEeW5hbWljYWxseShkZXNlcmlhbGl6ZShzYW5pdGl6ZSguLi4pKSwgey4uLmFyZ3N9KVxuICogXG4gKiBub3RlIGhvdyB0aGlzIG1ldGhvZCBkaWZmZXJzIGZyb20gdGhlIHJlbmRlclRlbXBsYXRlIG1ldGhvZCBhcyBpdFxuICogdGFrZXMgYSBkb2N1bWVudCBpbnN0ZWFkXG4gKiBcbiAqIEBwYXJhbSBkb2N1bWVudCB0aGUgcm9vdCBsZXZlbCBkb2N1bWVudFxuICogQHBhcmFtIGFyZ3MgdGhlIGFyZ3VtZW50cyB0byByZW5kZXIgdGhlIHRlbXBsYXRlIHdpdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclRlbXBsYXRlRHluYW1pY2FsbHkoXG4gIGRvY3VtZW50OiBJUm9vdExldmVsRG9jdW1lbnQsXG4gIGFyZ3M6IFRlbXBsYXRlQXJncyxcbiAgb3B0aW9uczogSVJlYWN0aWZ5RXh0cmFPcHRpb25zID0ge30sXG4pOiBSZWFjdC5SZWFjdE5vZGUge1xuICBpZiAoZG9jdW1lbnQgPT09IE5VTExfRE9DVU1FTlQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHRvUmV0dXJuID0gKFxuICAgIDw+XG4gICAgICB7XG4gICAgICAgIGRvY3VtZW50LmNoaWxkcmVuLm1hcCgoYywgaW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4gU0VSSUFMSVpBVElPTl9SRUdJU1RSWS5SRUFDVElGWVtjLnR5cGUgfHwgXCJ0ZXh0XCJdKHtcbiAgICAgICAgICAgIGFzVGVtcGxhdGU6IHRydWUsXG4gICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICBlbGVtZW50OiBjLFxuICAgICAgICAgICAga2V5OiBpbmRleCxcbiAgICAgICAgICAgIHRlbXBsYXRlQXJnczogYXJncyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGV4dHJhT3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgICAgIHBhcmVudDogZG9jdW1lbnQsXG4gICAgICAgICAgICB0cmVlOiBkb2N1bWVudCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICA8Lz5cbiAgKTtcblxuICBpZiAoYXJncyAmJiBhcmdzLndyYXBwZXIpIHtcbiAgICByZXR1cm4gYXJncy53cmFwcGVyKHRvUmV0dXJuKTtcbiAgfVxuXG4gIHJldHVybiB0b1JldHVybjtcbn1cblxuXG4vLyBiaXQgb3ZlcmtpbGwgYnV0IHNvIGJlIGl0XG5leHBvcnQgY29uc3Qgbm9kZXNUaGF0UmVwcmVzZW50TGluZXMgPSBbXG4gIFwiYWRkcmVzc1wiLFxuICBcImJsb2NrcXVvdGVcIixcbiAgXCJib2R5XCIsXG4gIFwiY2VudGVyXCIsXG4gIFwiZGl2XCIsXG4gIFwiZGlyXCIsXG4gIFwiZGxcIixcbiAgXCJmaWVsZHNldFwiLFxuICBcImZvcm1cIixcbiAgXCJoMVwiLFxuICBcImgyXCIsXG4gIFwiaDNcIixcbiAgXCJoNFwiLFxuICBcImg1XCIsXG4gIFwiaDZcIixcbiAgXCJ0YWJsZVwiLFxuICBcImRkXCIsXG4gIFwiZnJhbWVzZXRcIixcbiAgXCJsaVwiLFxuICBcInRib2R5XCIsXG4gIFwidGZvb3RcIixcbiAgXCJ0aGVhZFwiLFxuICBcInRyXCIsXG4gIFwiaHRtbFwiLFxuXVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnROb2RlVG9UZXh0KG5vZGU6IE5vZGUpOiBzdHJpbmcge1xuICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMykge1xuICAgIHJldHVybiBub2RlLnRleHRDb250ZW50O1xuICB9XG4gIGlmICghbm9kZS5jaGlsZE5vZGVzIHx8ICFub2RlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgcmV0dXJuIEFycmF5LmZyb20obm9kZS5jaGlsZE5vZGVzKS5tYXAoKGNub2RlLCBpbmRleCkgPT4ge1xuICAgIGlmIChjbm9kZS5ub2RlVHlwZSAhPT0gMykge1xuICAgICAgLy8gd2UgY29uc2lkZXIgaXQgYW4gaHRtbCBlbGVtZW50XG4gICAgICBjb25zdCBjaGlsZE5vZGVBU0hUTUxFbGVtZW50ID0gY25vZGUgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoY2hpbGROb2RlQVNIVE1MRWxlbWVudC50YWdOYW1lICYmIG5vZGVzVGhhdFJlcHJlc2VudExpbmVzLmluY2x1ZGVzKGNoaWxkTm9kZUFTSFRNTEVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICByZXR1cm4gY29udmVydE5vZGVUb1RleHQoY25vZGUpICsgXCJcXG5cIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb252ZXJ0Tm9kZVRvVGV4dChjbm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjbm9kZS50ZXh0Q29udGVudDtcbiAgICB9XG4gIH0pLmpvaW4oXCJcIik7XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7OztBQUFBLElBQUFBLGdCQUEyQztBQUMzQyx1QkFBcUI7OztBQ09yQixtQkFBa0I7QUFPbEIsU0FBUyxrQ0FDUCxNQUNBLHFCQUNBLHlCQUNBO0FBQ0EsUUFBTSxRQUFRLEtBQUssUUFBUTtBQUMzQixNQUFJLE9BQU87QUFDVCxVQUFNLFVBQVUsb0JBQW9CLEtBQUs7QUFDekMsUUFBSSxDQUFDLFNBQVM7QUFDWixXQUFLLGNBQWMsWUFBWSxJQUFJO0FBQ25DO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFHQSxRQUFNLFVBQVUsS0FBSyxRQUFRO0FBQzdCLE1BQUksU0FBUztBQUNYLFVBQU0sT0FBZSxvQkFBb0IsT0FBTyxLQUFLLHdCQUF3QixPQUFPO0FBQ3BGLFFBQUksT0FBTyxTQUFTLFVBQVU7QUFBQSxJQUU5QixPQUFPO0FBQ0wsV0FBSyxjQUFjO0FBQUEsSUFDckI7QUFBQSxFQUNGO0FBR0EsUUFBTSxXQUFXLEtBQUssUUFBUTtBQUM5QixNQUFJLFVBQVU7QUFDWixVQUFNLFFBQWdCLG9CQUFvQixRQUFRLEtBQUssd0JBQXdCLFFBQVE7QUFDdkYsUUFBSSxPQUFPLFVBQVUsVUFBVTtBQUFBLElBRS9CLE9BQU87QUFDTCxXQUFLLGFBQWEsUUFBUSxLQUFLO0FBQUEsSUFDakM7QUFB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QkFBQUEsUUFBQSxjQUFDLFNBQUksV0FBVSxhQUFZLE9BQU8sRUFBRSxTQUFTLFFBQVEsUUFBUSxpQkFBaUIsS0FDM0UsV0FDSCxDQUNGLEdBRUEsOEJBQUFBLFFBQUEsY0FBQyxpQkFDQyw4QkFBQUEsUUFBQSxjQUFDLGFBQUksaUNBRUwsR0FDQSw4QkFBQUEsUUFBQSxjQUFDLGNBQU0sa0JBQW1CLEdBQzFCLDhCQUFBQSxRQUFBLGNBQUMsYUFBSSxpREFFTCxHQUNBLDhCQUFBQSxRQUFBLGNBQUMsU0FBSSxXQUFVLGFBQVksT0FBTyxFQUFFLFNBQVMsUUFBUSxRQUFRLGlCQUFpQixLQUMzRSxTQUNILENBQ0YsR0FFQSw4QkFBQUEsUUFBQSxjQUFDLGlCQUNDLDhCQUFBQSxRQUFBLGNBQUMsYUFBSSxpQ0FFTCxHQUNBLDhCQUFBQSxRQUFBLGNBQUMsY0FBTSxrQkFBbUIsR0FDMUIsOEJBQUFBLFFBQUEsY0FBQyxhQUFJLGlEQUVMLEdBQ0EsOEJBQUFBLFFBQUEsY0FBQyxTQUFJLFdBQVUsYUFBWSxPQUFPLEVBQUUsU0FBUyxRQUFRLFFBQVEsaUJBQWlCLEtBQzNFLFNBQ0gsR0FDQSw4QkFBQUEsUUFBQSxjQUFDLGFBQUkscUVBRUwsR0FDQSw4QkFBQUEsUUFBQSxjQUFDLFNBQUksV0FBVSxhQUFZLE9BQU8sRUFBRSxTQUFTLFFBQVEsUUFBUSxpQkFBaUIsS0FDM0UsV0FDSCxDQUNGLENBQ0Y7QUFFSjtBQUVBLGlCQUFBQyxRQUFTLE9BQU8sOEJBQUFELFFBQUEsY0FBQyxhQUFRLEdBQUksU0FBUyxjQUFjLE1BQU0sQ0FBQzsiLAogICJuYW1lcyI6IFsiaW1wb3J0X3JlYWN0IiwgImRvY3VtZW50IiwgIlJlYWN0IiwgIlJlYWN0IiwgIlJlYWN0RE9NIl0KfQo=
